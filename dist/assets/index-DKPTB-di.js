var l9=Object.defineProperty;var HA=e=>{throw TypeError(e)};var c9=(e,t,n)=>t in e?l9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zt=(e,t,n)=>c9(e,typeof t!="symbol"?t+"":t,n),j0=(e,t,n)=>t.has(e)||HA("Cannot "+n);var je=(e,t,n)=>(j0(e,t,"read from private field"),n?n.call(e):t.get(e)),tn=(e,t,n)=>t.has(e)?HA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ct=(e,t,n,r)=>(j0(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Rr=(e,t,n)=>(j0(e,t,"access private method"),n);var Wp=(e,t,n,r)=>({set _(a){Ct(e,t,a,n)},get _(){return je(e,t,r)}});function u9(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(r,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function d9(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var GM={exports:{}},ly={},YM={exports:{}},Vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm=Symbol.for("react.element"),f9=Symbol.for("react.portal"),h9=Symbol.for("react.fragment"),m9=Symbol.for("react.strict_mode"),p9=Symbol.for("react.profiler"),g9=Symbol.for("react.provider"),v9=Symbol.for("react.context"),x9=Symbol.for("react.forward_ref"),y9=Symbol.for("react.suspense"),b9=Symbol.for("react.memo"),w9=Symbol.for("react.lazy"),VA=Symbol.iterator;function j9(e){return e===null||typeof e!="object"?null:(e=VA&&e[VA]||e["@@iterator"],typeof e=="function"?e:null)}var XM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JM=Object.assign,QM={};function Xd(e,t,n){this.props=e,this.context=t,this.refs=QM,this.updater=n||XM}Xd.prototype.isReactComponent={};Xd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ZM(){}ZM.prototype=Xd.prototype;function Xk(e,t,n){this.props=e,this.context=t,this.refs=QM,this.updater=n||XM}var Jk=Xk.prototype=new ZM;Jk.constructor=Xk;JM(Jk,Xd.prototype);Jk.isPureReactComponent=!0;var KA=Array.isArray,eD=Object.prototype.hasOwnProperty,Qk={current:null},tD={key:!0,ref:!0,__self:!0,__source:!0};function nD(e,t,n){var r,a={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)eD.call(t,r)&&!tD.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:Zm,type:e,key:s,ref:o,props:a,_owner:Qk.current}}function _9(e,t){return{$$typeof:Zm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zk(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zm}function k9(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var GA=/\/+/g;function _0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?k9(""+e.key):t.toString(36)}function Kg(e,t,n,r,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Zm:case f9:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+_0(o,0):r,KA(a)?(n="",e!=null&&(n=e.replace(GA,"$&/")+"/"),Kg(a,t,n,"",function(u){return u})):a!=null&&(Zk(a)&&(a=_9(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(GA,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",KA(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+_0(s,l);o+=Kg(s,t,n,c,a)}else if(c=j9(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+_0(s,l++),o+=Kg(s,t,n,c,a);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Hp(e,t,n){if(e==null)return e;var r=[],a=0;return Kg(e,r,"","",function(s){return t.call(n,s,a++)}),r}function S9(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var sa={current:null},Gg={transition:null},N9={ReactCurrentDispatcher:sa,ReactCurrentBatchConfig:Gg,ReactCurrentOwner:Qk};function rD(){throw Error("act(...) is not supported in production builds of React.")}Vt.Children={map:Hp,forEach:function(e,t,n){Hp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hp(e,function(){t++}),t},toArray:function(e){return Hp(e,function(t){return t})||[]},only:function(e){if(!Zk(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Vt.Component=Xd;Vt.Fragment=h9;Vt.Profiler=p9;Vt.PureComponent=Xk;Vt.StrictMode=m9;Vt.Suspense=y9;Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N9;Vt.act=rD;Vt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=JM({},e.props),a=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Qk.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)eD.call(t,c)&&!tD.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Zm,type:e.type,key:a,ref:s,props:r,_owner:o}};Vt.createContext=function(e){return e={$$typeof:v9,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:g9,_context:e},e.Consumer=e};Vt.createElement=nD;Vt.createFactory=function(e){var t=nD.bind(null,e);return t.type=e,t};Vt.createRef=function(){return{current:null}};Vt.forwardRef=function(e){return{$$typeof:x9,render:e}};Vt.isValidElement=Zk;Vt.lazy=function(e){return{$$typeof:w9,_payload:{_status:-1,_result:e},_init:S9}};Vt.memo=function(e,t){return{$$typeof:b9,type:e,compare:t===void 0?null:t}};Vt.startTransition=function(e){var t=Gg.transition;Gg.transition={};try{e()}finally{Gg.transition=t}};Vt.unstable_act=rD;Vt.useCallback=function(e,t){return sa.current.useCallback(e,t)};Vt.useContext=function(e){return sa.current.useContext(e)};Vt.useDebugValue=function(){};Vt.useDeferredValue=function(e){return sa.current.useDeferredValue(e)};Vt.useEffect=function(e,t){return sa.current.useEffect(e,t)};Vt.useId=function(){return sa.current.useId()};Vt.useImperativeHandle=function(e,t,n){return sa.current.useImperativeHandle(e,t,n)};Vt.useInsertionEffect=function(e,t){return sa.current.useInsertionEffect(e,t)};Vt.useLayoutEffect=function(e,t){return sa.current.useLayoutEffect(e,t)};Vt.useMemo=function(e,t){return sa.current.useMemo(e,t)};Vt.useReducer=function(e,t,n){return sa.current.useReducer(e,t,n)};Vt.useRef=function(e){return sa.current.useRef(e)};Vt.useState=function(e){return sa.current.useState(e)};Vt.useSyncExternalStore=function(e,t,n){return sa.current.useSyncExternalStore(e,t,n)};Vt.useTransition=function(){return sa.current.useTransition()};Vt.version="18.3.1";YM.exports=Vt;var p=YM.exports;const V=fn(p),eS=u9({__proto__:null,default:V},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C9=p,A9=Symbol.for("react.element"),E9=Symbol.for("react.fragment"),P9=Object.prototype.hasOwnProperty,T9=C9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O9={key:!0,ref:!0,__self:!0,__source:!0};function aD(e,t,n){var r,a={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)P9.call(t,r)&&!O9.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:A9,type:e,key:s,ref:o,props:a,_owner:T9.current}}ly.Fragment=E9;ly.jsx=aD;ly.jsxs=aD;GM.exports=ly;var i=GM.exports,iD={exports:{}},Ha={},sD={exports:{}},oD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,R){var C=T.length;T.push(R);e:for(;0<C;){var F=C-1>>>1,M=T[F];if(0<a(M,R))T[F]=R,T[C]=M,C=F;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var R=T[0],C=T.pop();if(C!==R){T[0]=C;e:for(var F=0,M=T.length,A=M>>>1;F<A;){var W=2*(F+1)-1,G=T[W],Y=W+1,H=T[Y];if(0>a(G,C))Y<M&&0>a(H,G)?(T[F]=H,T[Y]=C,F=Y):(T[F]=G,T[W]=C,F=W);else if(Y<M&&0>a(H,C))T[F]=H,T[Y]=C,F=Y;else break e}}return R}function a(T,R){var C=T.sortIndex-R.sortIndex;return C!==0?C:T.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,d=null,h=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(T){for(var R=n(u);R!==null;){if(R.callback===null)r(u);else if(R.startTime<=T)r(u),R.sortIndex=R.expirationTime,t(c,R);else break;R=n(u)}}function j(T){if(v=!1,w(T),!g)if(n(c)!==null)g=!0,$(k);else{var R=n(u);R!==null&&O(j,R.startTime-T)}}function k(T,R){g=!1,v&&(v=!1,y(E),E=-1),m=!0;var C=h;try{for(w(R),d=n(c);d!==null&&(!(d.expirationTime>R)||T&&!P());){var F=d.callback;if(typeof F=="function"){d.callback=null,h=d.priorityLevel;var M=F(d.expirationTime<=R);R=e.unstable_now(),typeof M=="function"?d.callback=M:d===n(c)&&r(c),w(R)}else r(c);d=n(c)}if(d!==null)var A=!0;else{var W=n(u);W!==null&&O(j,W.startTime-R),A=!1}return A}finally{d=null,h=C,m=!1}}var _=!1,S=null,E=-1,N=5,I=-1;function P(){return!(e.unstable_now()-I<N)}function D(){if(S!==null){var T=e.unstable_now();I=T;var R=!0;try{R=S(!0,T)}finally{R?L():(_=!1,S=null)}}else _=!1}var L;if(typeof b=="function")L=function(){b(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,U=B.port2;B.port1.onmessage=D,L=function(){U.postMessage(null)}}else L=function(){x(D,0)};function $(T){S=T,_||(_=!0,L())}function O(T,R){E=x(function(){T(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,$(k))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var C=h;h=R;try{return T()}finally{h=C}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,R){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var C=h;h=T;try{return R()}finally{h=C}},e.unstable_scheduleCallback=function(T,R,C){var F=e.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?F+C:F):C=F,T){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=C+M,T={id:f++,callback:R,priorityLevel:T,startTime:C,expirationTime:M,sortIndex:-1},C>F?(T.sortIndex=C,t(u,T),n(c)===null&&T===n(u)&&(v?(y(E),E=-1):v=!0,O(j,C-F))):(T.sortIndex=M,t(c,T),g||m||(g=!0,$(k))),T},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(T){var R=h;return function(){var C=h;h=R;try{return T.apply(this,arguments)}finally{h=C}}}})(oD);sD.exports=oD;var I9=sD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R9=p,qa=I9;function Pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lD=new Set,Th={};function qc(e,t){md(e,t),md(e+"Capture",t)}function md(e,t){for(Th[e]=t,e=0;e<t.length;e++)lD.add(t[e])}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ej=Object.prototype.hasOwnProperty,M9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,YA={},XA={};function D9(e){return Ej.call(XA,e)?!0:Ej.call(YA,e)?!1:M9.test(e)?XA[e]=!0:(YA[e]=!0,!1)}function $9(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function L9(e,t,n,r){if(t===null||typeof t>"u"||$9(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function oa(e,t,n,r,a,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Or={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Or[e]=new oa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Or[t]=new oa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Or[e]=new oa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Or[e]=new oa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Or[e]=new oa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Or[e]=new oa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Or[e]=new oa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Or[e]=new oa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Or[e]=new oa(e,5,!1,e.toLowerCase(),null,!1,!1)});var tS=/[\-:]([a-z])/g;function nS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tS,nS);Or[t]=new oa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tS,nS);Or[t]=new oa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tS,nS);Or[t]=new oa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Or[e]=new oa(e,1,!1,e.toLowerCase(),null,!1,!1)});Or.xlinkHref=new oa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Or[e]=new oa(e,1,!1,e.toLowerCase(),null,!0,!0)});function rS(e,t,n,r){var a=Or.hasOwnProperty(t)?Or[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(L9(t,n,a,r)&&(n=null),r||a===null?D9(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var fo=R9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vp=Symbol.for("react.element"),Eu=Symbol.for("react.portal"),Pu=Symbol.for("react.fragment"),aS=Symbol.for("react.strict_mode"),Pj=Symbol.for("react.profiler"),cD=Symbol.for("react.provider"),uD=Symbol.for("react.context"),iS=Symbol.for("react.forward_ref"),Tj=Symbol.for("react.suspense"),Oj=Symbol.for("react.suspense_list"),sS=Symbol.for("react.memo"),Mo=Symbol.for("react.lazy"),dD=Symbol.for("react.offscreen"),JA=Symbol.iterator;function kf(e){return e===null||typeof e!="object"?null:(e=JA&&e[JA]||e["@@iterator"],typeof e=="function"?e:null)}var zn=Object.assign,k0;function th(e){if(k0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);k0=t&&t[1]||""}return`
`+k0+e}var S0=!1;function N0(e,t){if(!e||S0)return"";S0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=r.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{S0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?th(e):""}function F9(e){switch(e.tag){case 5:return th(e.type);case 16:return th("Lazy");case 13:return th("Suspense");case 19:return th("SuspenseList");case 0:case 2:case 15:return e=N0(e.type,!1),e;case 11:return e=N0(e.type.render,!1),e;case 1:return e=N0(e.type,!0),e;default:return""}}function Ij(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pu:return"Fragment";case Eu:return"Portal";case Pj:return"Profiler";case aS:return"StrictMode";case Tj:return"Suspense";case Oj:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case uD:return(e.displayName||"Context")+".Consumer";case cD:return(e._context.displayName||"Context")+".Provider";case iS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sS:return t=e.displayName||null,t!==null?t:Ij(e.type)||"Memo";case Mo:t=e._payload,e=e._init;try{return Ij(e(t))}catch{}}return null}function B9(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ij(t);case 8:return t===aS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ul(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function fD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function U9(e){var t=fD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Kp(e){e._valueTracker||(e._valueTracker=U9(e))}function hD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=fD(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function gv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Rj(e,t){var n=t.checked;return zn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function QA(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ul(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mD(e,t){t=t.checked,t!=null&&rS(e,"checked",t,!1)}function Mj(e,t){mD(e,t);var n=ul(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Dj(e,t.type,n):t.hasOwnProperty("defaultValue")&&Dj(e,t.type,ul(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ZA(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Dj(e,t,n){(t!=="number"||gv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var nh=Array.isArray;function Hu(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ul(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function $j(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pe(91));return zn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function eE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Pe(92));if(nh(n)){if(1<n.length)throw Error(Pe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ul(n)}}function pD(e,t){var n=ul(t.value),r=ul(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function tE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lj(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gp,vD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gp=Gp||document.createElement("div"),Gp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Oh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var dh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z9=["Webkit","ms","Moz","O"];Object.keys(dh).forEach(function(e){z9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dh[t]=dh[e]})});function xD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||dh.hasOwnProperty(e)&&dh[e]?(""+t).trim():t+"px"}function yD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=xD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var q9=zn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fj(e,t){if(t){if(q9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pe(62))}}function Bj(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uj=null;function oS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zj=null,Vu=null,Ku=null;function nE(e){if(e=np(e)){if(typeof zj!="function")throw Error(Pe(280));var t=e.stateNode;t&&(t=hy(t),zj(e.stateNode,e.type,t))}}function bD(e){Vu?Ku?Ku.push(e):Ku=[e]:Vu=e}function wD(){if(Vu){var e=Vu,t=Ku;if(Ku=Vu=null,nE(e),t)for(e=0;e<t.length;e++)nE(t[e])}}function jD(e,t){return e(t)}function _D(){}var C0=!1;function kD(e,t,n){if(C0)return e(t,n);C0=!0;try{return jD(e,t,n)}finally{C0=!1,(Vu!==null||Ku!==null)&&(_D(),wD())}}function Ih(e,t){var n=e.stateNode;if(n===null)return null;var r=hy(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Pe(231,t,typeof n));return n}var qj=!1;if(Zs)try{var Sf={};Object.defineProperty(Sf,"passive",{get:function(){qj=!0}}),window.addEventListener("test",Sf,Sf),window.removeEventListener("test",Sf,Sf)}catch{qj=!1}function W9(e,t,n,r,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var fh=!1,vv=null,xv=!1,Wj=null,H9={onError:function(e){fh=!0,vv=e}};function V9(e,t,n,r,a,s,o,l,c){fh=!1,vv=null,W9.apply(H9,arguments)}function K9(e,t,n,r,a,s,o,l,c){if(V9.apply(this,arguments),fh){if(fh){var u=vv;fh=!1,vv=null}else throw Error(Pe(198));xv||(xv=!0,Wj=u)}}function Wc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function SD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rE(e){if(Wc(e)!==e)throw Error(Pe(188))}function G9(e){var t=e.alternate;if(!t){if(t=Wc(e),t===null)throw Error(Pe(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return rE(a),e;if(s===r)return rE(a),t;s=s.sibling}throw Error(Pe(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o)throw Error(Pe(189))}}if(n.alternate!==r)throw Error(Pe(190))}if(n.tag!==3)throw Error(Pe(188));return n.stateNode.current===n?e:t}function ND(e){return e=G9(e),e!==null?CD(e):null}function CD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=CD(e);if(t!==null)return t;e=e.sibling}return null}var AD=qa.unstable_scheduleCallback,aE=qa.unstable_cancelCallback,Y9=qa.unstable_shouldYield,X9=qa.unstable_requestPaint,Zn=qa.unstable_now,J9=qa.unstable_getCurrentPriorityLevel,lS=qa.unstable_ImmediatePriority,ED=qa.unstable_UserBlockingPriority,yv=qa.unstable_NormalPriority,Q9=qa.unstable_LowPriority,PD=qa.unstable_IdlePriority,cy=null,ds=null;function Z9(e){if(ds&&typeof ds.onCommitFiberRoot=="function")try{ds.onCommitFiberRoot(cy,e,void 0,(e.current.flags&128)===128)}catch{}}var Fi=Math.clz32?Math.clz32:nH,eH=Math.log,tH=Math.LN2;function nH(e){return e>>>=0,e===0?32:31-(eH(e)/tH|0)|0}var Yp=64,Xp=4194304;function rh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bv(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=rh(l):(s&=o,s!==0&&(r=rh(s)))}else o=n&~a,o!==0?r=rh(o):s!==0&&(r=rh(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,s=t&-t,a>=s||a===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Fi(t),a=1<<n,r|=e[n],t&=~a;return r}function rH(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aH(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Fi(s),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=rH(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function Hj(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function TD(){var e=Yp;return Yp<<=1,!(Yp&4194240)&&(Yp=64),e}function A0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ep(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fi(t),e[t]=n}function iH(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Fi(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}function cS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Fi(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var pn=0;function OD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ID,uS,RD,MD,DD,Vj=!1,Jp=[],Qo=null,Zo=null,el=null,Rh=new Map,Mh=new Map,Lo=[],sH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iE(e,t){switch(e){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":el=null;break;case"pointerover":case"pointerout":Rh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mh.delete(t.pointerId)}}function Nf(e,t,n,r,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},t!==null&&(t=np(t),t!==null&&uS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function oH(e,t,n,r,a){switch(t){case"focusin":return Qo=Nf(Qo,e,t,n,r,a),!0;case"dragenter":return Zo=Nf(Zo,e,t,n,r,a),!0;case"mouseover":return el=Nf(el,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Rh.set(s,Nf(Rh.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Mh.set(s,Nf(Mh.get(s)||null,e,t,n,r,a)),!0}return!1}function $D(e){var t=nc(e.target);if(t!==null){var n=Wc(t);if(n!==null){if(t=n.tag,t===13){if(t=SD(n),t!==null){e.blockedOn=t,DD(e.priority,function(){RD(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kj(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Uj=r,n.target.dispatchEvent(r),Uj=null}else return t=np(n),t!==null&&uS(t),e.blockedOn=n,!1;t.shift()}return!0}function sE(e,t,n){Yg(e)&&n.delete(t)}function lH(){Vj=!1,Qo!==null&&Yg(Qo)&&(Qo=null),Zo!==null&&Yg(Zo)&&(Zo=null),el!==null&&Yg(el)&&(el=null),Rh.forEach(sE),Mh.forEach(sE)}function Cf(e,t){e.blockedOn===t&&(e.blockedOn=null,Vj||(Vj=!0,qa.unstable_scheduleCallback(qa.unstable_NormalPriority,lH)))}function Dh(e){function t(a){return Cf(a,e)}if(0<Jp.length){Cf(Jp[0],e);for(var n=1;n<Jp.length;n++){var r=Jp[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Qo!==null&&Cf(Qo,e),Zo!==null&&Cf(Zo,e),el!==null&&Cf(el,e),Rh.forEach(t),Mh.forEach(t),n=0;n<Lo.length;n++)r=Lo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Lo.length&&(n=Lo[0],n.blockedOn===null);)$D(n),n.blockedOn===null&&Lo.shift()}var Gu=fo.ReactCurrentBatchConfig,wv=!0;function cH(e,t,n,r){var a=pn,s=Gu.transition;Gu.transition=null;try{pn=1,dS(e,t,n,r)}finally{pn=a,Gu.transition=s}}function uH(e,t,n,r){var a=pn,s=Gu.transition;Gu.transition=null;try{pn=4,dS(e,t,n,r)}finally{pn=a,Gu.transition=s}}function dS(e,t,n,r){if(wv){var a=Kj(e,t,n,r);if(a===null)L0(e,t,r,jv,n),iE(e,r);else if(oH(a,e,t,n,r))r.stopPropagation();else if(iE(e,r),t&4&&-1<sH.indexOf(e)){for(;a!==null;){var s=np(a);if(s!==null&&ID(s),s=Kj(e,t,n,r),s===null&&L0(e,t,r,jv,n),s===a)break;a=s}a!==null&&r.stopPropagation()}else L0(e,t,r,null,n)}}var jv=null;function Kj(e,t,n,r){if(jv=null,e=oS(r),e=nc(e),e!==null)if(t=Wc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=SD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jv=e,null}function LD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J9()){case lS:return 1;case ED:return 4;case yv:case Q9:return 16;case PD:return 536870912;default:return 16}default:return 16}}var Go=null,fS=null,Xg=null;function FD(){if(Xg)return Xg;var e,t=fS,n=t.length,r,a="value"in Go?Go.value:Go.textContent,s=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[s-r];r++);return Xg=a.slice(e,1<r?1-r:void 0)}function Jg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qp(){return!0}function oE(){return!1}function Va(e){function t(n,r,a,s,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qp:oE,this.isPropagationStopped=oE,this}return zn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qp)},persist:function(){},isPersistent:Qp}),t}var Jd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hS=Va(Jd),tp=zn({},Jd,{view:0,detail:0}),dH=Va(tp),E0,P0,Af,uy=zn({},tp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Af&&(Af&&e.type==="mousemove"?(E0=e.screenX-Af.screenX,P0=e.screenY-Af.screenY):P0=E0=0,Af=e),E0)},movementY:function(e){return"movementY"in e?e.movementY:P0}}),lE=Va(uy),fH=zn({},uy,{dataTransfer:0}),hH=Va(fH),mH=zn({},tp,{relatedTarget:0}),T0=Va(mH),pH=zn({},Jd,{animationName:0,elapsedTime:0,pseudoElement:0}),gH=Va(pH),vH=zn({},Jd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xH=Va(vH),yH=zn({},Jd,{data:0}),cE=Va(yH),bH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _H(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jH[e])?!!t[e]:!1}function mS(){return _H}var kH=zn({},tp,{key:function(e){if(e.key){var t=bH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wH[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mS,charCode:function(e){return e.type==="keypress"?Jg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),SH=Va(kH),NH=zn({},uy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uE=Va(NH),CH=zn({},tp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mS}),AH=Va(CH),EH=zn({},Jd,{propertyName:0,elapsedTime:0,pseudoElement:0}),PH=Va(EH),TH=zn({},uy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),OH=Va(TH),IH=[9,13,27,32],pS=Zs&&"CompositionEvent"in window,hh=null;Zs&&"documentMode"in document&&(hh=document.documentMode);var RH=Zs&&"TextEvent"in window&&!hh,BD=Zs&&(!pS||hh&&8<hh&&11>=hh),dE=" ",fE=!1;function UD(e,t){switch(e){case"keyup":return IH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tu=!1;function MH(e,t){switch(e){case"compositionend":return zD(t);case"keypress":return t.which!==32?null:(fE=!0,dE);case"textInput":return e=t.data,e===dE&&fE?null:e;default:return null}}function DH(e,t){if(Tu)return e==="compositionend"||!pS&&UD(e,t)?(e=FD(),Xg=fS=Go=null,Tu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return BD&&t.locale!=="ko"?null:t.data;default:return null}}var $H={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$H[e.type]:t==="textarea"}function qD(e,t,n,r){bD(r),t=_v(t,"onChange"),0<t.length&&(n=new hS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var mh=null,$h=null;function LH(e){e$(e,0)}function dy(e){var t=Ru(e);if(hD(t))return e}function FH(e,t){if(e==="change")return t}var WD=!1;if(Zs){var O0;if(Zs){var I0="oninput"in document;if(!I0){var mE=document.createElement("div");mE.setAttribute("oninput","return;"),I0=typeof mE.oninput=="function"}O0=I0}else O0=!1;WD=O0&&(!document.documentMode||9<document.documentMode)}function pE(){mh&&(mh.detachEvent("onpropertychange",HD),$h=mh=null)}function HD(e){if(e.propertyName==="value"&&dy($h)){var t=[];qD(t,$h,e,oS(e)),kD(LH,t)}}function BH(e,t,n){e==="focusin"?(pE(),mh=t,$h=n,mh.attachEvent("onpropertychange",HD)):e==="focusout"&&pE()}function UH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dy($h)}function zH(e,t){if(e==="click")return dy(t)}function qH(e,t){if(e==="input"||e==="change")return dy(t)}function WH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qi=typeof Object.is=="function"?Object.is:WH;function Lh(e,t){if(qi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Ej.call(t,a)||!qi(e[a],t[a]))return!1}return!0}function gE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vE(e,t){var n=gE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gE(n)}}function VD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?VD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function KD(){for(var e=window,t=gv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=gv(e.document)}return t}function gS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function HH(e){var t=KD(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&VD(n.ownerDocument.documentElement,n)){if(r!==null&&gS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=r.end===void 0?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=vE(n,s);var o=vE(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var VH=Zs&&"documentMode"in document&&11>=document.documentMode,Ou=null,Gj=null,ph=null,Yj=!1;function xE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yj||Ou==null||Ou!==gv(r)||(r=Ou,"selectionStart"in r&&gS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ph&&Lh(ph,r)||(ph=r,r=_v(Gj,"onSelect"),0<r.length&&(t=new hS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ou)))}function Zp(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Iu={animationend:Zp("Animation","AnimationEnd"),animationiteration:Zp("Animation","AnimationIteration"),animationstart:Zp("Animation","AnimationStart"),transitionend:Zp("Transition","TransitionEnd")},R0={},GD={};Zs&&(GD=document.createElement("div").style,"AnimationEvent"in window||(delete Iu.animationend.animation,delete Iu.animationiteration.animation,delete Iu.animationstart.animation),"TransitionEvent"in window||delete Iu.transitionend.transition);function fy(e){if(R0[e])return R0[e];if(!Iu[e])return e;var t=Iu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in GD)return R0[e]=t[n];return e}var YD=fy("animationend"),XD=fy("animationiteration"),JD=fy("animationstart"),QD=fy("transitionend"),ZD=new Map,yE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yl(e,t){ZD.set(e,t),qc(t,[e])}for(var M0=0;M0<yE.length;M0++){var D0=yE[M0],KH=D0.toLowerCase(),GH=D0[0].toUpperCase()+D0.slice(1);yl(KH,"on"+GH)}yl(YD,"onAnimationEnd");yl(XD,"onAnimationIteration");yl(JD,"onAnimationStart");yl("dblclick","onDoubleClick");yl("focusin","onFocus");yl("focusout","onBlur");yl(QD,"onTransitionEnd");md("onMouseEnter",["mouseout","mouseover"]);md("onMouseLeave",["mouseout","mouseover"]);md("onPointerEnter",["pointerout","pointerover"]);md("onPointerLeave",["pointerout","pointerover"]);qc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qc("onBeforeInput",["compositionend","keypress","textInput","paste"]);qc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ah="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YH=new Set("cancel close invalid load scroll toggle".split(" ").concat(ah));function bE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,K9(r,t,void 0,e),e.currentTarget=null}function e$(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;bE(a,l,u),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;bE(a,l,u),s=c}}}if(xv)throw e=Wj,xv=!1,Wj=null,e}function Pn(e,t){var n=t[e1];n===void 0&&(n=t[e1]=new Set);var r=e+"__bubble";n.has(r)||(t$(t,e,2,!1),n.add(r))}function $0(e,t,n){var r=0;t&&(r|=4),t$(n,e,r,t)}var eg="_reactListening"+Math.random().toString(36).slice(2);function Fh(e){if(!e[eg]){e[eg]=!0,lD.forEach(function(n){n!=="selectionchange"&&(YH.has(n)||$0(n,!1,e),$0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[eg]||(t[eg]=!0,$0("selectionchange",!1,t))}}function t$(e,t,n,r){switch(LD(t)){case 1:var a=cH;break;case 4:a=uH;break;default:a=dS}n=a.bind(null,t,n,e),a=void 0,!qj||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function L0(e,t,n,r,a){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=nc(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}kD(function(){var u=s,f=oS(n),d=[];e:{var h=ZD.get(e);if(h!==void 0){var m=hS,g=e;switch(e){case"keypress":if(Jg(n)===0)break e;case"keydown":case"keyup":m=SH;break;case"focusin":g="focus",m=T0;break;case"focusout":g="blur",m=T0;break;case"beforeblur":case"afterblur":m=T0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=lE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=hH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=AH;break;case YD:case XD:case JD:m=gH;break;case QD:m=PH;break;case"scroll":m=dH;break;case"wheel":m=OH;break;case"copy":case"cut":case"paste":m=xH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=uE}var v=(t&4)!==0,x=!v&&e==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var b=u,w;b!==null;){w=b;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,y!==null&&(j=Ih(b,y),j!=null&&v.push(Bh(b,j,w)))),x)break;b=b.return}0<v.length&&(h=new m(h,g,null,n,f),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==Uj&&(g=n.relatedTarget||n.fromElement)&&(nc(g)||g[eo]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?nc(g):null,g!==null&&(x=Wc(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=lE,j="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=uE,j="onPointerLeave",y="onPointerEnter",b="pointer"),x=m==null?h:Ru(m),w=g==null?h:Ru(g),h=new v(j,b+"leave",m,n,f),h.target=x,h.relatedTarget=w,j=null,nc(f)===u&&(v=new v(y,b+"enter",g,n,f),v.target=w,v.relatedTarget=x,j=v),x=j,m&&g)t:{for(v=m,y=g,b=0,w=v;w;w=au(w))b++;for(w=0,j=y;j;j=au(j))w++;for(;0<b-w;)v=au(v),b--;for(;0<w-b;)y=au(y),w--;for(;b--;){if(v===y||y!==null&&v===y.alternate)break t;v=au(v),y=au(y)}v=null}else v=null;m!==null&&wE(d,h,m,v,!1),g!==null&&x!==null&&wE(d,x,g,v,!0)}}e:{if(h=u?Ru(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var k=FH;else if(hE(h))if(WD)k=qH;else{k=UH;var _=BH}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=zH);if(k&&(k=k(e,u))){qD(d,k,n,f);break e}_&&_(e,h,u),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&Dj(h,"number",h.value)}switch(_=u?Ru(u):window,e){case"focusin":(hE(_)||_.contentEditable==="true")&&(Ou=_,Gj=u,ph=null);break;case"focusout":ph=Gj=Ou=null;break;case"mousedown":Yj=!0;break;case"contextmenu":case"mouseup":case"dragend":Yj=!1,xE(d,n,f);break;case"selectionchange":if(VH)break;case"keydown":case"keyup":xE(d,n,f)}var S;if(pS)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Tu?UD(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(BD&&n.locale!=="ko"&&(Tu||E!=="onCompositionStart"?E==="onCompositionEnd"&&Tu&&(S=FD()):(Go=f,fS="value"in Go?Go.value:Go.textContent,Tu=!0)),_=_v(u,E),0<_.length&&(E=new cE(E,e,null,n,f),d.push({event:E,listeners:_}),S?E.data=S:(S=zD(n),S!==null&&(E.data=S)))),(S=RH?MH(e,n):DH(e,n))&&(u=_v(u,"onBeforeInput"),0<u.length&&(f=new cE("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=S))}e$(d,t)})}function Bh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _v(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Ih(e,n),s!=null&&r.unshift(Bh(e,s,a)),s=Ih(e,t),s!=null&&r.push(Bh(e,s,a))),e=e.return}return r}function au(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wE(e,t,n,r,a){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,a?(c=Ih(n,s),c!=null&&o.unshift(Bh(n,c,l))):a||(c=Ih(n,s),c!=null&&o.push(Bh(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var XH=/\r\n?/g,JH=/\u0000|\uFFFD/g;function jE(e){return(typeof e=="string"?e:""+e).replace(XH,`
`).replace(JH,"")}function tg(e,t,n){if(t=jE(t),jE(e)!==t&&n)throw Error(Pe(425))}function kv(){}var Xj=null,Jj=null;function Qj(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zj=typeof setTimeout=="function"?setTimeout:void 0,QH=typeof clearTimeout=="function"?clearTimeout:void 0,_E=typeof Promise=="function"?Promise:void 0,ZH=typeof queueMicrotask=="function"?queueMicrotask:typeof _E<"u"?function(e){return _E.resolve(null).then(e).catch(e7)}:Zj;function e7(e){setTimeout(function(){throw e})}function F0(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Dh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Dh(t)}function tl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function kE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Qd=Math.random().toString(36).slice(2),as="__reactFiber$"+Qd,Uh="__reactProps$"+Qd,eo="__reactContainer$"+Qd,e1="__reactEvents$"+Qd,t7="__reactListeners$"+Qd,n7="__reactHandles$"+Qd;function nc(e){var t=e[as];if(t)return t;for(var n=e.parentNode;n;){if(t=n[eo]||n[as]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=kE(e);e!==null;){if(n=e[as])return n;e=kE(e)}return t}e=n,n=e.parentNode}return null}function np(e){return e=e[as]||e[eo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ru(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pe(33))}function hy(e){return e[Uh]||null}var t1=[],Mu=-1;function bl(e){return{current:e}}function In(e){0>Mu||(e.current=t1[Mu],t1[Mu]=null,Mu--)}function Sn(e,t){Mu++,t1[Mu]=e.current,e.current=t}var dl={},Hr=bl(dl),_a=bl(!1),yc=dl;function pd(e,t){var n=e.type.contextTypes;if(!n)return dl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in n)a[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ka(e){return e=e.childContextTypes,e!=null}function Sv(){In(_a),In(Hr)}function SE(e,t,n){if(Hr.current!==dl)throw Error(Pe(168));Sn(Hr,t),Sn(_a,n)}function n$(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Pe(108,B9(e)||"Unknown",a));return zn({},n,r)}function Nv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dl,yc=Hr.current,Sn(Hr,e),Sn(_a,_a.current),!0}function NE(e,t,n){var r=e.stateNode;if(!r)throw Error(Pe(169));n?(e=n$(e,t,yc),r.__reactInternalMemoizedMergedChildContext=e,In(_a),In(Hr),Sn(Hr,e)):In(_a),Sn(_a,n)}var Ds=null,my=!1,B0=!1;function r$(e){Ds===null?Ds=[e]:Ds.push(e)}function r7(e){my=!0,r$(e)}function wl(){if(!B0&&Ds!==null){B0=!0;var e=0,t=pn;try{var n=Ds;for(pn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ds=null,my=!1}catch(a){throw Ds!==null&&(Ds=Ds.slice(e+1)),AD(lS,wl),a}finally{pn=t,B0=!1}}return null}var Du=[],$u=0,Cv=null,Av=0,ri=[],ai=0,bc=null,Fs=1,Bs="";function Wl(e,t){Du[$u++]=Av,Du[$u++]=Cv,Cv=e,Av=t}function a$(e,t,n){ri[ai++]=Fs,ri[ai++]=Bs,ri[ai++]=bc,bc=e;var r=Fs;e=Bs;var a=32-Fi(r)-1;r&=~(1<<a),n+=1;var s=32-Fi(t)+a;if(30<s){var o=a-a%5;s=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Fs=1<<32-Fi(t)+a|n<<a|r,Bs=s+e}else Fs=1<<s|n<<a|r,Bs=e}function vS(e){e.return!==null&&(Wl(e,1),a$(e,1,0))}function xS(e){for(;e===Cv;)Cv=Du[--$u],Du[$u]=null,Av=Du[--$u],Du[$u]=null;for(;e===bc;)bc=ri[--ai],ri[ai]=null,Bs=ri[--ai],ri[ai]=null,Fs=ri[--ai],ri[ai]=null}var Ba=null,Fa=null,$n=!1,Ri=null;function i$(e,t){var n=oi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function CE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ba=e,Fa=tl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ba=e,Fa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=bc!==null?{id:Fs,overflow:Bs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=oi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ba=e,Fa=null,!0):!1;default:return!1}}function n1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function r1(e){if($n){var t=Fa;if(t){var n=t;if(!CE(e,t)){if(n1(e))throw Error(Pe(418));t=tl(n.nextSibling);var r=Ba;t&&CE(e,t)?i$(r,n):(e.flags=e.flags&-4097|2,$n=!1,Ba=e)}}else{if(n1(e))throw Error(Pe(418));e.flags=e.flags&-4097|2,$n=!1,Ba=e}}}function AE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ba=e}function ng(e){if(e!==Ba)return!1;if(!$n)return AE(e),$n=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qj(e.type,e.memoizedProps)),t&&(t=Fa)){if(n1(e))throw s$(),Error(Pe(418));for(;t;)i$(e,t),t=tl(t.nextSibling)}if(AE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Fa=tl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Fa=null}}else Fa=Ba?tl(e.stateNode.nextSibling):null;return!0}function s$(){for(var e=Fa;e;)e=tl(e.nextSibling)}function gd(){Fa=Ba=null,$n=!1}function yS(e){Ri===null?Ri=[e]:Ri.push(e)}var a7=fo.ReactCurrentBatchConfig;function Ef(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Pe(309));var r=n.stateNode}if(!r)throw Error(Pe(147,e));var a=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Pe(284));if(!n._owner)throw Error(Pe(290,e))}return e}function rg(e,t){throw e=Object.prototype.toString.call(t),Error(Pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function EE(e){var t=e._init;return t(e._payload)}function o$(e){function t(y,b){if(e){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function a(y,b){return y=il(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,b,w,j){return b===null||b.tag!==6?(b=K0(w,y.mode,j),b.return=y,b):(b=a(b,w),b.return=y,b)}function c(y,b,w,j){var k=w.type;return k===Pu?f(y,b,w.props.children,j,w.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Mo&&EE(k)===b.type)?(j=a(b,w.props),j.ref=Ef(y,b,w),j.return=y,j):(j=av(w.type,w.key,w.props,null,y.mode,j),j.ref=Ef(y,b,w),j.return=y,j)}function u(y,b,w,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=G0(w,y.mode,j),b.return=y,b):(b=a(b,w.children||[]),b.return=y,b)}function f(y,b,w,j,k){return b===null||b.tag!==7?(b=gc(w,y.mode,j,k),b.return=y,b):(b=a(b,w),b.return=y,b)}function d(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=K0(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Vp:return w=av(b.type,b.key,b.props,null,y.mode,w),w.ref=Ef(y,null,b),w.return=y,w;case Eu:return b=G0(b,y.mode,w),b.return=y,b;case Mo:var j=b._init;return d(y,j(b._payload),w)}if(nh(b)||kf(b))return b=gc(b,y.mode,w,null),b.return=y,b;rg(y,b)}return null}function h(y,b,w,j){var k=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:l(y,b,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vp:return w.key===k?c(y,b,w,j):null;case Eu:return w.key===k?u(y,b,w,j):null;case Mo:return k=w._init,h(y,b,k(w._payload),j)}if(nh(w)||kf(w))return k!==null?null:f(y,b,w,j,null);rg(y,w)}return null}function m(y,b,w,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return y=y.get(w)||null,l(b,y,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Vp:return y=y.get(j.key===null?w:j.key)||null,c(b,y,j,k);case Eu:return y=y.get(j.key===null?w:j.key)||null,u(b,y,j,k);case Mo:var _=j._init;return m(y,b,w,_(j._payload),k)}if(nh(j)||kf(j))return y=y.get(w)||null,f(b,y,j,k,null);rg(b,j)}return null}function g(y,b,w,j){for(var k=null,_=null,S=b,E=b=0,N=null;S!==null&&E<w.length;E++){S.index>E?(N=S,S=null):N=S.sibling;var I=h(y,S,w[E],j);if(I===null){S===null&&(S=N);break}e&&S&&I.alternate===null&&t(y,S),b=s(I,b,E),_===null?k=I:_.sibling=I,_=I,S=N}if(E===w.length)return n(y,S),$n&&Wl(y,E),k;if(S===null){for(;E<w.length;E++)S=d(y,w[E],j),S!==null&&(b=s(S,b,E),_===null?k=S:_.sibling=S,_=S);return $n&&Wl(y,E),k}for(S=r(y,S);E<w.length;E++)N=m(S,y,E,w[E],j),N!==null&&(e&&N.alternate!==null&&S.delete(N.key===null?E:N.key),b=s(N,b,E),_===null?k=N:_.sibling=N,_=N);return e&&S.forEach(function(P){return t(y,P)}),$n&&Wl(y,E),k}function v(y,b,w,j){var k=kf(w);if(typeof k!="function")throw Error(Pe(150));if(w=k.call(w),w==null)throw Error(Pe(151));for(var _=k=null,S=b,E=b=0,N=null,I=w.next();S!==null&&!I.done;E++,I=w.next()){S.index>E?(N=S,S=null):N=S.sibling;var P=h(y,S,I.value,j);if(P===null){S===null&&(S=N);break}e&&S&&P.alternate===null&&t(y,S),b=s(P,b,E),_===null?k=P:_.sibling=P,_=P,S=N}if(I.done)return n(y,S),$n&&Wl(y,E),k;if(S===null){for(;!I.done;E++,I=w.next())I=d(y,I.value,j),I!==null&&(b=s(I,b,E),_===null?k=I:_.sibling=I,_=I);return $n&&Wl(y,E),k}for(S=r(y,S);!I.done;E++,I=w.next())I=m(S,y,E,I.value,j),I!==null&&(e&&I.alternate!==null&&S.delete(I.key===null?E:I.key),b=s(I,b,E),_===null?k=I:_.sibling=I,_=I);return e&&S.forEach(function(D){return t(y,D)}),$n&&Wl(y,E),k}function x(y,b,w,j){if(typeof w=="object"&&w!==null&&w.type===Pu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Vp:e:{for(var k=w.key,_=b;_!==null;){if(_.key===k){if(k=w.type,k===Pu){if(_.tag===7){n(y,_.sibling),b=a(_,w.props.children),b.return=y,y=b;break e}}else if(_.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Mo&&EE(k)===_.type){n(y,_.sibling),b=a(_,w.props),b.ref=Ef(y,_,w),b.return=y,y=b;break e}n(y,_);break}else t(y,_);_=_.sibling}w.type===Pu?(b=gc(w.props.children,y.mode,j,w.key),b.return=y,y=b):(j=av(w.type,w.key,w.props,null,y.mode,j),j.ref=Ef(y,b,w),j.return=y,y=j)}return o(y);case Eu:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(y,b.sibling),b=a(b,w.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else t(y,b);b=b.sibling}b=G0(w,y.mode,j),b.return=y,y=b}return o(y);case Mo:return _=w._init,x(y,b,_(w._payload),j)}if(nh(w))return g(y,b,w,j);if(kf(w))return v(y,b,w,j);rg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(y,b.sibling),b=a(b,w),b.return=y,y=b):(n(y,b),b=K0(w,y.mode,j),b.return=y,y=b),o(y)):n(y,b)}return x}var vd=o$(!0),l$=o$(!1),Ev=bl(null),Pv=null,Lu=null,bS=null;function wS(){bS=Lu=Pv=null}function jS(e){var t=Ev.current;In(Ev),e._currentValue=t}function a1(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yu(e,t){Pv=e,bS=Lu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ya=!0),e.firstContext=null)}function mi(e){var t=e._currentValue;if(bS!==e)if(e={context:e,memoizedValue:t,next:null},Lu===null){if(Pv===null)throw Error(Pe(308));Lu=e,Pv.dependencies={lanes:0,firstContext:e}}else Lu=Lu.next=e;return t}var rc=null;function _S(e){rc===null?rc=[e]:rc.push(e)}function c$(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,_S(t)):(n.next=a.next,a.next=n),t.interleaved=n,to(e,r)}function to(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Do=!1;function kS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function u$(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nl(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Qt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,to(e,n)}return a=r.interleaved,a===null?(t.next=t,_S(r)):(t.next=a.next,a.next=t),r.interleaved=t,to(e,n)}function Qg(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,cS(e,n)}}function PE(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?a=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?a=s=t:s=s.next=t}else a=s=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Tv(e,t,n,r){var a=e.updateQueue;Do=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(s!==null){var d=a.baseState;o=0,f=u=c=null,l=s;do{var h=l.lane,m=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(h=t,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=zn({},d,h);break e;case 2:Do=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=m,c=d):f=f.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(f===null&&(c=d),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else s===null&&(a.shared.lanes=0);jc|=o,e.lanes=o,e.memoizedState=d}}function TE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Pe(191,a));a.call(r)}}}var rp={},fs=bl(rp),zh=bl(rp),qh=bl(rp);function ac(e){if(e===rp)throw Error(Pe(174));return e}function SS(e,t){switch(Sn(qh,t),Sn(zh,e),Sn(fs,rp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lj(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lj(t,e)}In(fs),Sn(fs,t)}function xd(){In(fs),In(zh),In(qh)}function d$(e){ac(qh.current);var t=ac(fs.current),n=Lj(t,e.type);t!==n&&(Sn(zh,e),Sn(fs,n))}function NS(e){zh.current===e&&(In(fs),In(zh))}var Bn=bl(0);function Ov(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var U0=[];function CS(){for(var e=0;e<U0.length;e++)U0[e]._workInProgressVersionPrimary=null;U0.length=0}var Zg=fo.ReactCurrentDispatcher,z0=fo.ReactCurrentBatchConfig,wc=0,Un=null,fr=null,yr=null,Iv=!1,gh=!1,Wh=0,i7=0;function Mr(){throw Error(Pe(321))}function AS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qi(e[n],t[n]))return!1;return!0}function ES(e,t,n,r,a,s){if(wc=s,Un=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zg.current=e===null||e.memoizedState===null?c7:u7,e=n(r,a),gh){s=0;do{if(gh=!1,Wh=0,25<=s)throw Error(Pe(301));s+=1,yr=fr=null,t.updateQueue=null,Zg.current=d7,e=n(r,a)}while(gh)}if(Zg.current=Rv,t=fr!==null&&fr.next!==null,wc=0,yr=fr=Un=null,Iv=!1,t)throw Error(Pe(300));return e}function PS(){var e=Wh!==0;return Wh=0,e}function Qi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yr===null?Un.memoizedState=yr=e:yr=yr.next=e,yr}function pi(){if(fr===null){var e=Un.alternate;e=e!==null?e.memoizedState:null}else e=fr.next;var t=yr===null?Un.memoizedState:yr.next;if(t!==null)yr=t,fr=e;else{if(e===null)throw Error(Pe(310));fr=e,e={memoizedState:fr.memoizedState,baseState:fr.baseState,baseQueue:fr.baseQueue,queue:fr.queue,next:null},yr===null?Un.memoizedState=yr=e:yr=yr.next=e}return yr}function Hh(e,t){return typeof t=="function"?t(e):t}function q0(e){var t=pi(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var r=fr,a=r.baseQueue,s=n.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}r.baseQueue=a=s,n.pending=null}if(a!==null){s=a.next,r=r.baseState;var l=o=null,c=null,u=s;do{var f=u.lane;if((wc&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=r):c=c.next=d,Un.lanes|=f,jc|=f}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=l,qi(r,t.memoizedState)||(ya=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do s=a.lane,Un.lanes|=s,jc|=s,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function W0(e){var t=pi(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do s=e(s,o.action),o=o.next;while(o!==a);qi(s,t.memoizedState)||(ya=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function f$(){}function h$(e,t){var n=Un,r=pi(),a=t(),s=!qi(r.memoizedState,a);if(s&&(r.memoizedState=a,ya=!0),r=r.queue,TS(g$.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||yr!==null&&yr.memoizedState.tag&1){if(n.flags|=2048,Vh(9,p$.bind(null,n,r,a,t),void 0,null),wr===null)throw Error(Pe(349));wc&30||m$(n,t,a)}return a}function m$(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Un.updateQueue,t===null?(t={lastEffect:null,stores:null},Un.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function p$(e,t,n,r){t.value=n,t.getSnapshot=r,v$(t)&&x$(e)}function g$(e,t,n){return n(function(){v$(t)&&x$(e)})}function v$(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qi(e,n)}catch{return!0}}function x$(e){var t=to(e,1);t!==null&&Bi(t,e,1,-1)}function OE(e){var t=Qi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hh,lastRenderedState:e},t.queue=e,e=e.dispatch=l7.bind(null,Un,e),[t.memoizedState,e]}function Vh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Un.updateQueue,t===null?(t={lastEffect:null,stores:null},Un.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function y$(){return pi().memoizedState}function ev(e,t,n,r){var a=Qi();Un.flags|=e,a.memoizedState=Vh(1|t,n,void 0,r===void 0?null:r)}function py(e,t,n,r){var a=pi();r=r===void 0?null:r;var s=void 0;if(fr!==null){var o=fr.memoizedState;if(s=o.destroy,r!==null&&AS(r,o.deps)){a.memoizedState=Vh(t,n,s,r);return}}Un.flags|=e,a.memoizedState=Vh(1|t,n,s,r)}function IE(e,t){return ev(8390656,8,e,t)}function TS(e,t){return py(2048,8,e,t)}function b$(e,t){return py(4,2,e,t)}function w$(e,t){return py(4,4,e,t)}function j$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _$(e,t,n){return n=n!=null?n.concat([e]):null,py(4,4,j$.bind(null,t,e),n)}function OS(){}function k$(e,t){var n=pi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&AS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function S$(e,t){var n=pi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&AS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function N$(e,t,n){return wc&21?(qi(n,t)||(n=TD(),Un.lanes|=n,jc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ya=!0),e.memoizedState=n)}function s7(e,t){var n=pn;pn=n!==0&&4>n?n:4,e(!0);var r=z0.transition;z0.transition={};try{e(!1),t()}finally{pn=n,z0.transition=r}}function C$(){return pi().memoizedState}function o7(e,t,n){var r=al(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A$(e))E$(t,n);else if(n=c$(e,t,n,r),n!==null){var a=ia();Bi(n,e,r,a),P$(n,t,r)}}function l7(e,t,n){var r=al(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A$(e))E$(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(a.hasEagerState=!0,a.eagerState=l,qi(l,o)){var c=t.interleaved;c===null?(a.next=a,_S(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=c$(e,t,a,r),n!==null&&(a=ia(),Bi(n,e,r,a),P$(n,t,r))}}function A$(e){var t=e.alternate;return e===Un||t!==null&&t===Un}function E$(e,t){gh=Iv=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function P$(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,cS(e,n)}}var Rv={readContext:mi,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useInsertionEffect:Mr,useLayoutEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useMutableSource:Mr,useSyncExternalStore:Mr,useId:Mr,unstable_isNewReconciler:!1},c7={readContext:mi,useCallback:function(e,t){return Qi().memoizedState=[e,t===void 0?null:t],e},useContext:mi,useEffect:IE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ev(4194308,4,j$.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ev(4194308,4,e,t)},useInsertionEffect:function(e,t){return ev(4,2,e,t)},useMemo:function(e,t){var n=Qi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Qi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=o7.bind(null,Un,e),[r.memoizedState,e]},useRef:function(e){var t=Qi();return e={current:e},t.memoizedState=e},useState:OE,useDebugValue:OS,useDeferredValue:function(e){return Qi().memoizedState=e},useTransition:function(){var e=OE(!1),t=e[0];return e=s7.bind(null,e[1]),Qi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Un,a=Qi();if($n){if(n===void 0)throw Error(Pe(407));n=n()}else{if(n=t(),wr===null)throw Error(Pe(349));wc&30||m$(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,IE(g$.bind(null,r,s,e),[e]),r.flags|=2048,Vh(9,p$.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Qi(),t=wr.identifierPrefix;if($n){var n=Bs,r=Fs;n=(r&~(1<<32-Fi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Wh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=i7++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},u7={readContext:mi,useCallback:k$,useContext:mi,useEffect:TS,useImperativeHandle:_$,useInsertionEffect:b$,useLayoutEffect:w$,useMemo:S$,useReducer:q0,useRef:y$,useState:function(){return q0(Hh)},useDebugValue:OS,useDeferredValue:function(e){var t=pi();return N$(t,fr.memoizedState,e)},useTransition:function(){var e=q0(Hh)[0],t=pi().memoizedState;return[e,t]},useMutableSource:f$,useSyncExternalStore:h$,useId:C$,unstable_isNewReconciler:!1},d7={readContext:mi,useCallback:k$,useContext:mi,useEffect:TS,useImperativeHandle:_$,useInsertionEffect:b$,useLayoutEffect:w$,useMemo:S$,useReducer:W0,useRef:y$,useState:function(){return W0(Hh)},useDebugValue:OS,useDeferredValue:function(e){var t=pi();return fr===null?t.memoizedState=e:N$(t,fr.memoizedState,e)},useTransition:function(){var e=W0(Hh)[0],t=pi().memoizedState;return[e,t]},useMutableSource:f$,useSyncExternalStore:h$,useId:C$,unstable_isNewReconciler:!1};function Ni(e,t){if(e&&e.defaultProps){t=zn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function i1(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:zn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var gy={isMounted:function(e){return(e=e._reactInternals)?Wc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ia(),a=al(e),s=Vs(r,a);s.payload=t,n!=null&&(s.callback=n),t=nl(e,s,a),t!==null&&(Bi(t,e,a,r),Qg(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ia(),a=al(e),s=Vs(r,a);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=nl(e,s,a),t!==null&&(Bi(t,e,a,r),Qg(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ia(),r=al(e),a=Vs(n,r);a.tag=2,t!=null&&(a.callback=t),t=nl(e,a,r),t!==null&&(Bi(t,e,r,n),Qg(t,e,r))}};function RE(e,t,n,r,a,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Lh(n,r)||!Lh(a,s):!0}function T$(e,t,n){var r=!1,a=dl,s=t.contextType;return typeof s=="object"&&s!==null?s=mi(s):(a=ka(t)?yc:Hr.current,r=t.contextTypes,s=(r=r!=null)?pd(e,a):dl),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gy,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function ME(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&gy.enqueueReplaceState(t,t.state,null)}function s1(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},kS(e);var s=t.contextType;typeof s=="object"&&s!==null?a.context=mi(s):(s=ka(t)?yc:Hr.current,a.context=pd(e,s)),a.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(i1(e,t,s,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&gy.enqueueReplaceState(a,a.state,null),Tv(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function yd(e,t){try{var n="",r=t;do n+=F9(r),r=r.return;while(r);var a=n}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:a,digest:null}}function H0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function o1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var f7=typeof WeakMap=="function"?WeakMap:Map;function O$(e,t,n){n=Vs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Dv||(Dv=!0,v1=r),o1(e,t)},n}function I$(e,t,n){n=Vs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){o1(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){o1(e,t),typeof r!="function"&&(rl===null?rl=new Set([this]):rl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function DE(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new f7;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=N7.bind(null,e,t,n),t.then(e,e))}function $E(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function LE(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vs(-1,1),t.tag=2,nl(n,t,1))),n.lanes|=1),e)}var h7=fo.ReactCurrentOwner,ya=!1;function ea(e,t,n,r){t.child=e===null?l$(t,null,n,r):vd(t,e.child,n,r)}function FE(e,t,n,r,a){n=n.render;var s=t.ref;return Yu(t,a),r=ES(e,t,n,r,s,a),n=PS(),e!==null&&!ya?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,no(e,t,a)):($n&&n&&vS(t),t.flags|=1,ea(e,t,r,a),t.child)}function BE(e,t,n,r,a){if(e===null){var s=n.type;return typeof s=="function"&&!BS(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,R$(e,t,s,r,a)):(e=av(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&a)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Lh,n(o,r)&&e.ref===t.ref)return no(e,t,a)}return t.flags|=1,e=il(s,r),e.ref=t.ref,e.return=t,t.child=e}function R$(e,t,n,r,a){if(e!==null){var s=e.memoizedProps;if(Lh(s,r)&&e.ref===t.ref)if(ya=!1,t.pendingProps=r=s,(e.lanes&a)!==0)e.flags&131072&&(ya=!0);else return t.lanes=e.lanes,no(e,t,a)}return l1(e,t,n,r,a)}function M$(e,t,n){var r=t.pendingProps,a=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sn(Bu,Ra),Ra|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sn(Bu,Ra),Ra|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Sn(Bu,Ra),Ra|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Sn(Bu,Ra),Ra|=r;return ea(e,t,a,n),t.child}function D$(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function l1(e,t,n,r,a){var s=ka(n)?yc:Hr.current;return s=pd(t,s),Yu(t,a),n=ES(e,t,n,r,s,a),r=PS(),e!==null&&!ya?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,no(e,t,a)):($n&&r&&vS(t),t.flags|=1,ea(e,t,n,a),t.child)}function UE(e,t,n,r,a){if(ka(n)){var s=!0;Nv(t)}else s=!1;if(Yu(t,a),t.stateNode===null)tv(e,t),T$(t,n,r),s1(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=mi(u):(u=ka(n)?yc:Hr.current,u=pd(t,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&ME(t,o,r,u),Do=!1;var h=t.memoizedState;o.state=h,Tv(t,r,o,a),c=t.memoizedState,l!==r||h!==c||_a.current||Do?(typeof f=="function"&&(i1(t,n,f,r),c=t.memoizedState),(l=Do||RE(t,n,l,r,h,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,u$(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ni(t.type,l),o.props=u,d=t.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=mi(c):(c=ka(n)?yc:Hr.current,c=pd(t,c));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==c)&&ME(t,o,r,c),Do=!1,h=t.memoizedState,o.state=h,Tv(t,r,o,a);var g=t.memoizedState;l!==d||h!==g||_a.current||Do?(typeof m=="function"&&(i1(t,n,m,r),g=t.memoizedState),(u=Do||RE(t,n,u,r,h,g,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return c1(e,t,n,r,s,a)}function c1(e,t,n,r,a,s){D$(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&NE(t,n,!1),no(e,t,s);r=t.stateNode,h7.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=vd(t,e.child,null,s),t.child=vd(t,null,l,s)):ea(e,t,l,s),t.memoizedState=r.state,a&&NE(t,n,!0),t.child}function $$(e){var t=e.stateNode;t.pendingContext?SE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&SE(e,t.context,!1),SS(e,t.containerInfo)}function zE(e,t,n,r,a){return gd(),yS(a),t.flags|=256,ea(e,t,n,r),t.child}var u1={dehydrated:null,treeContext:null,retryLane:0};function d1(e){return{baseLanes:e,cachePool:null,transitions:null}}function L$(e,t,n){var r=t.pendingProps,a=Bn.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Sn(Bn,a&1),e===null)return r1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yy(o,r,0,null),e=gc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=d1(n),t.memoizedState=u1,e):IS(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return m7(e,t,o,r,l,a,n);if(s){s=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=il(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=il(l,s):(s=gc(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?d1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=u1,r}return s=e.child,e=s.sibling,r=il(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function IS(e,t){return t=yy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ag(e,t,n,r){return r!==null&&yS(r),vd(t,e.child,null,n),e=IS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function m7(e,t,n,r,a,s,o){if(n)return t.flags&256?(t.flags&=-257,r=H0(Error(Pe(422))),ag(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=yy({mode:"visible",children:r.children},a,0,null),s=gc(s,a,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&vd(t,e.child,null,o),t.child.memoizedState=d1(o),t.memoizedState=u1,s);if(!(t.mode&1))return ag(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(Pe(419)),r=H0(s,r,void 0),ag(e,t,o,r)}if(l=(o&e.childLanes)!==0,ya||l){if(r=wr,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,to(e,a),Bi(r,e,a,-1))}return FS(),r=H0(Error(Pe(421))),ag(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=C7.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,Fa=tl(a.nextSibling),Ba=t,$n=!0,Ri=null,e!==null&&(ri[ai++]=Fs,ri[ai++]=Bs,ri[ai++]=bc,Fs=e.id,Bs=e.overflow,bc=t),t=IS(t,r.children),t.flags|=4096,t)}function qE(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),a1(e.return,t,n)}function V0(e,t,n,r,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function F$(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(ea(e,t,r.children,n),r=Bn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qE(e,n,t);else if(e.tag===19)qE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Sn(Bn,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ov(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),V0(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ov(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}V0(t,!0,n,null,s);break;case"together":V0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function tv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function no(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pe(153));if(t.child!==null){for(e=t.child,n=il(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=il(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function p7(e,t,n){switch(t.tag){case 3:$$(t),gd();break;case 5:d$(t);break;case 1:ka(t.type)&&Nv(t);break;case 4:SS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Sn(Ev,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Sn(Bn,Bn.current&1),t.flags|=128,null):n&t.child.childLanes?L$(e,t,n):(Sn(Bn,Bn.current&1),e=no(e,t,n),e!==null?e.sibling:null);Sn(Bn,Bn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return F$(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sn(Bn,Bn.current),r)break;return null;case 22:case 23:return t.lanes=0,M$(e,t,n)}return no(e,t,n)}var B$,f1,U$,z$;B$=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};f1=function(){};U$=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ac(fs.current);var s=null;switch(n){case"input":a=Rj(e,a),r=Rj(e,r),s=[];break;case"select":a=zn({},a,{value:void 0}),r=zn({},r,{value:void 0}),s=[];break;case"textarea":a=$j(e,a),r=$j(e,r),s=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=kv)}Fj(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Th.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Th.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Pn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};z$=function(e,t,n,r){n!==r&&(t.flags|=4)};function Pf(e,t){if(!$n)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Dr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function g7(e,t,n){var r=t.pendingProps;switch(xS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(t),null;case 1:return ka(t.type)&&Sv(),Dr(t),null;case 3:return r=t.stateNode,xd(),In(_a),In(Hr),CS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ng(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ri!==null&&(b1(Ri),Ri=null))),f1(e,t),Dr(t),null;case 5:NS(t);var a=ac(qh.current);if(n=t.type,e!==null&&t.stateNode!=null)U$(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Pe(166));return Dr(t),null}if(e=ac(fs.current),ng(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[as]=t,r[Uh]=s,e=(t.mode&1)!==0,n){case"dialog":Pn("cancel",r),Pn("close",r);break;case"iframe":case"object":case"embed":Pn("load",r);break;case"video":case"audio":for(a=0;a<ah.length;a++)Pn(ah[a],r);break;case"source":Pn("error",r);break;case"img":case"image":case"link":Pn("error",r),Pn("load",r);break;case"details":Pn("toggle",r);break;case"input":QA(r,s),Pn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pn("invalid",r);break;case"textarea":eE(r,s),Pn("invalid",r)}Fj(n,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&tg(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&tg(r.textContent,l,e),a=["children",""+l]):Th.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Pn("scroll",r)}switch(n){case"input":Kp(r),ZA(r,s,!0);break;case"textarea":Kp(r),tE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=kv)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[as]=t,e[Uh]=r,B$(e,t,!1,!1),t.stateNode=e;e:{switch(o=Bj(n,r),n){case"dialog":Pn("cancel",e),Pn("close",e),a=r;break;case"iframe":case"object":case"embed":Pn("load",e),a=r;break;case"video":case"audio":for(a=0;a<ah.length;a++)Pn(ah[a],e);a=r;break;case"source":Pn("error",e),a=r;break;case"img":case"image":case"link":Pn("error",e),Pn("load",e),a=r;break;case"details":Pn("toggle",e),a=r;break;case"input":QA(e,r),a=Rj(e,r),Pn("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=zn({},r,{value:void 0}),Pn("invalid",e);break;case"textarea":eE(e,r),a=$j(e,r),Pn("invalid",e);break;default:a=r}Fj(n,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?yD(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&vD(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Oh(e,c):typeof c=="number"&&Oh(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Th.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Pn("scroll",e):c!=null&&rS(e,s,c,o))}switch(n){case"input":Kp(e),ZA(e,r,!1);break;case"textarea":Kp(e),tE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ul(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Hu(e,!!r.multiple,s,!1):r.defaultValue!=null&&Hu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=kv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Dr(t),null;case 6:if(e&&t.stateNode!=null)z$(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Pe(166));if(n=ac(qh.current),ac(fs.current),ng(t)){if(r=t.stateNode,n=t.memoizedProps,r[as]=t,(s=r.nodeValue!==n)&&(e=Ba,e!==null))switch(e.tag){case 3:tg(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&tg(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[as]=t,t.stateNode=r}return Dr(t),null;case 13:if(In(Bn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($n&&Fa!==null&&t.mode&1&&!(t.flags&128))s$(),gd(),t.flags|=98560,s=!1;else if(s=ng(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Pe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Pe(317));s[as]=t}else gd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Dr(t),s=!1}else Ri!==null&&(b1(Ri),Ri=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Bn.current&1?hr===0&&(hr=3):FS())),t.updateQueue!==null&&(t.flags|=4),Dr(t),null);case 4:return xd(),f1(e,t),e===null&&Fh(t.stateNode.containerInfo),Dr(t),null;case 10:return jS(t.type._context),Dr(t),null;case 17:return ka(t.type)&&Sv(),Dr(t),null;case 19:if(In(Bn),s=t.memoizedState,s===null)return Dr(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Pf(s,!1);else{if(hr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ov(e),o!==null){for(t.flags|=128,Pf(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Sn(Bn,Bn.current&1|2),t.child}e=e.sibling}s.tail!==null&&Zn()>bd&&(t.flags|=128,r=!0,Pf(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ov(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Pf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!$n)return Dr(t),null}else 2*Zn()-s.renderingStartTime>bd&&n!==1073741824&&(t.flags|=128,r=!0,Pf(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Zn(),t.sibling=null,n=Bn.current,Sn(Bn,r?n&1|2:n&1),t):(Dr(t),null);case 22:case 23:return LS(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ra&1073741824&&(Dr(t),t.subtreeFlags&6&&(t.flags|=8192)):Dr(t),null;case 24:return null;case 25:return null}throw Error(Pe(156,t.tag))}function v7(e,t){switch(xS(t),t.tag){case 1:return ka(t.type)&&Sv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xd(),In(_a),In(Hr),CS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return NS(t),null;case 13:if(In(Bn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pe(340));gd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return In(Bn),null;case 4:return xd(),null;case 10:return jS(t.type._context),null;case 22:case 23:return LS(),null;case 24:return null;default:return null}}var ig=!1,Fr=!1,x7=typeof WeakSet=="function"?WeakSet:Set,at=null;function Fu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Hn(e,t,r)}else n.current=null}function h1(e,t,n){try{n()}catch(r){Hn(e,t,r)}}var WE=!1;function y7(e,t){if(Xj=wv,e=KD(),gS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var m;d!==n||a!==0&&d.nodeType!==3||(l=o+a),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===e)break t;if(h===n&&++u===a&&(l=o),h===s&&++f===r&&(c=o),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jj={focusedElem:e,selectionRange:n},wv=!1,at=t;at!==null;)if(t=at,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,at=e;else for(;at!==null;){t=at;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Ni(t.type,v),x);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pe(163))}}catch(j){Hn(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,at=e;break}at=t.return}return g=WE,WE=!1,g}function vh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,s!==void 0&&h1(t,n,s)}a=a.next}while(a!==r)}}function vy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function m1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function q$(e){var t=e.alternate;t!==null&&(e.alternate=null,q$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[as],delete t[Uh],delete t[e1],delete t[t7],delete t[n7])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function W$(e){return e.tag===5||e.tag===3||e.tag===4}function HE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||W$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function p1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=kv));else if(r!==4&&(e=e.child,e!==null))for(p1(e,t,n),e=e.sibling;e!==null;)p1(e,t,n),e=e.sibling}function g1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(g1(e,t,n),e=e.sibling;e!==null;)g1(e,t,n),e=e.sibling}var Cr=null,Ti=!1;function _o(e,t,n){for(n=n.child;n!==null;)H$(e,t,n),n=n.sibling}function H$(e,t,n){if(ds&&typeof ds.onCommitFiberUnmount=="function")try{ds.onCommitFiberUnmount(cy,n)}catch{}switch(n.tag){case 5:Fr||Fu(n,t);case 6:var r=Cr,a=Ti;Cr=null,_o(e,t,n),Cr=r,Ti=a,Cr!==null&&(Ti?(e=Cr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Cr.removeChild(n.stateNode));break;case 18:Cr!==null&&(Ti?(e=Cr,n=n.stateNode,e.nodeType===8?F0(e.parentNode,n):e.nodeType===1&&F0(e,n),Dh(e)):F0(Cr,n.stateNode));break;case 4:r=Cr,a=Ti,Cr=n.stateNode.containerInfo,Ti=!0,_o(e,t,n),Cr=r,Ti=a;break;case 0:case 11:case 14:case 15:if(!Fr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&h1(n,t,o),a=a.next}while(a!==r)}_o(e,t,n);break;case 1:if(!Fr&&(Fu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Hn(n,t,l)}_o(e,t,n);break;case 21:_o(e,t,n);break;case 22:n.mode&1?(Fr=(r=Fr)||n.memoizedState!==null,_o(e,t,n),Fr=r):_o(e,t,n);break;default:_o(e,t,n)}}function VE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new x7),t.forEach(function(r){var a=A7.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function wi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Cr=l.stateNode,Ti=!1;break e;case 3:Cr=l.stateNode.containerInfo,Ti=!0;break e;case 4:Cr=l.stateNode.containerInfo,Ti=!0;break e}l=l.return}if(Cr===null)throw Error(Pe(160));H$(s,o,a),Cr=null,Ti=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Hn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)V$(t,e),t=t.sibling}function V$(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(wi(t,e),Ji(e),r&4){try{vh(3,e,e.return),vy(3,e)}catch(v){Hn(e,e.return,v)}try{vh(5,e,e.return)}catch(v){Hn(e,e.return,v)}}break;case 1:wi(t,e),Ji(e),r&512&&n!==null&&Fu(n,n.return);break;case 5:if(wi(t,e),Ji(e),r&512&&n!==null&&Fu(n,n.return),e.flags&32){var a=e.stateNode;try{Oh(a,"")}catch(v){Hn(e,e.return,v)}}if(r&4&&(a=e.stateNode,a!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&mD(a,s),Bj(l,o);var u=Bj(l,s);for(o=0;o<c.length;o+=2){var f=c[o],d=c[o+1];f==="style"?yD(a,d):f==="dangerouslySetInnerHTML"?vD(a,d):f==="children"?Oh(a,d):rS(a,f,d,u)}switch(l){case"input":Mj(a,s);break;case"textarea":pD(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Hu(a,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?Hu(a,!!s.multiple,s.defaultValue,!0):Hu(a,!!s.multiple,s.multiple?[]:"",!1))}a[Uh]=s}catch(v){Hn(e,e.return,v)}}break;case 6:if(wi(t,e),Ji(e),r&4){if(e.stateNode===null)throw Error(Pe(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(v){Hn(e,e.return,v)}}break;case 3:if(wi(t,e),Ji(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Dh(t.containerInfo)}catch(v){Hn(e,e.return,v)}break;case 4:wi(t,e),Ji(e);break;case 13:wi(t,e),Ji(e),a=e.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(DS=Zn())),r&4&&VE(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Fr=(u=Fr)||f,wi(t,e),Fr=u):wi(t,e),Ji(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(at=e,f=e.child;f!==null;){for(d=at=f;at!==null;){switch(h=at,m=h.child,h.tag){case 0:case 11:case 14:case 15:vh(4,h,h.return);break;case 1:Fu(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Hn(r,n,v)}}break;case 5:Fu(h,h.return);break;case 22:if(h.memoizedState!==null){GE(d);continue}}m!==null?(m.return=h,at=m):GE(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{a=d.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=xD("display",o))}catch(v){Hn(e,e.return,v)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){Hn(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wi(t,e),Ji(e),r&4&&VE(e);break;case 21:break;default:wi(t,e),Ji(e)}}function Ji(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(W$(n)){var r=n;break e}n=n.return}throw Error(Pe(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Oh(a,""),r.flags&=-33);var s=HE(e);g1(e,s,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=HE(e);p1(e,l,o);break;default:throw Error(Pe(161))}}catch(c){Hn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function b7(e,t,n){at=e,K$(e)}function K$(e,t,n){for(var r=(e.mode&1)!==0;at!==null;){var a=at,s=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||ig;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Fr;l=ig;var u=Fr;if(ig=o,(Fr=c)&&!u)for(at=a;at!==null;)o=at,c=o.child,o.tag===22&&o.memoizedState!==null?YE(a):c!==null?(c.return=o,at=c):YE(a);for(;s!==null;)at=s,K$(s),s=s.sibling;at=a,ig=l,Fr=u}KE(e)}else a.subtreeFlags&8772&&s!==null?(s.return=a,at=s):KE(e)}}function KE(e){for(;at!==null;){var t=at;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Fr||vy(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Fr)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ni(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&TE(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}TE(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Dh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pe(163))}Fr||t.flags&512&&m1(t)}catch(h){Hn(t,t.return,h)}}if(t===e){at=null;break}if(n=t.sibling,n!==null){n.return=t.return,at=n;break}at=t.return}}function GE(e){for(;at!==null;){var t=at;if(t===e){at=null;break}var n=t.sibling;if(n!==null){n.return=t.return,at=n;break}at=t.return}}function YE(e){for(;at!==null;){var t=at;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vy(4,t)}catch(c){Hn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Hn(t,a,c)}}var s=t.return;try{m1(t)}catch(c){Hn(t,s,c)}break;case 5:var o=t.return;try{m1(t)}catch(c){Hn(t,o,c)}}}catch(c){Hn(t,t.return,c)}if(t===e){at=null;break}var l=t.sibling;if(l!==null){l.return=t.return,at=l;break}at=t.return}}var w7=Math.ceil,Mv=fo.ReactCurrentDispatcher,RS=fo.ReactCurrentOwner,ui=fo.ReactCurrentBatchConfig,Qt=0,wr=null,rr=null,Tr=0,Ra=0,Bu=bl(0),hr=0,Kh=null,jc=0,xy=0,MS=0,xh=null,pa=null,DS=0,bd=1/0,Rs=null,Dv=!1,v1=null,rl=null,sg=!1,Yo=null,$v=0,yh=0,x1=null,nv=-1,rv=0;function ia(){return Qt&6?Zn():nv!==-1?nv:nv=Zn()}function al(e){return e.mode&1?Qt&2&&Tr!==0?Tr&-Tr:a7.transition!==null?(rv===0&&(rv=TD()),rv):(e=pn,e!==0||(e=window.event,e=e===void 0?16:LD(e.type)),e):1}function Bi(e,t,n,r){if(50<yh)throw yh=0,x1=null,Error(Pe(185));ep(e,n,r),(!(Qt&2)||e!==wr)&&(e===wr&&(!(Qt&2)&&(xy|=n),hr===4&&Fo(e,Tr)),Sa(e,r),n===1&&Qt===0&&!(t.mode&1)&&(bd=Zn()+500,my&&wl()))}function Sa(e,t){var n=e.callbackNode;aH(e,t);var r=bv(e,e===wr?Tr:0);if(r===0)n!==null&&aE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&aE(n),t===1)e.tag===0?r7(XE.bind(null,e)):r$(XE.bind(null,e)),ZH(function(){!(Qt&6)&&wl()}),n=null;else{switch(OD(r)){case 1:n=lS;break;case 4:n=ED;break;case 16:n=yv;break;case 536870912:n=PD;break;default:n=yv}n=tL(n,G$.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function G$(e,t){if(nv=-1,rv=0,Qt&6)throw Error(Pe(327));var n=e.callbackNode;if(Xu()&&e.callbackNode!==n)return null;var r=bv(e,e===wr?Tr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Lv(e,r);else{t=r;var a=Qt;Qt|=2;var s=X$();(wr!==e||Tr!==t)&&(Rs=null,bd=Zn()+500,pc(e,t));do try{k7();break}catch(l){Y$(e,l)}while(!0);wS(),Mv.current=s,Qt=a,rr!==null?t=0:(wr=null,Tr=0,t=hr)}if(t!==0){if(t===2&&(a=Hj(e),a!==0&&(r=a,t=y1(e,a))),t===1)throw n=Kh,pc(e,0),Fo(e,r),Sa(e,Zn()),n;if(t===6)Fo(e,r);else{if(a=e.current.alternate,!(r&30)&&!j7(a)&&(t=Lv(e,r),t===2&&(s=Hj(e),s!==0&&(r=s,t=y1(e,s))),t===1))throw n=Kh,pc(e,0),Fo(e,r),Sa(e,Zn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Pe(345));case 2:Hl(e,pa,Rs);break;case 3:if(Fo(e,r),(r&130023424)===r&&(t=DS+500-Zn(),10<t)){if(bv(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){ia(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Zj(Hl.bind(null,e,pa,Rs),t);break}Hl(e,pa,Rs);break;case 4:if(Fo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Fi(r);s=1<<o,o=t[o],o>a&&(a=o),r&=~s}if(r=a,r=Zn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*w7(r/1960))-r,10<r){e.timeoutHandle=Zj(Hl.bind(null,e,pa,Rs),r);break}Hl(e,pa,Rs);break;case 5:Hl(e,pa,Rs);break;default:throw Error(Pe(329))}}}return Sa(e,Zn()),e.callbackNode===n?G$.bind(null,e):null}function y1(e,t){var n=xh;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),e=Lv(e,t),e!==2&&(t=pa,pa=n,t!==null&&b1(t)),e}function b1(e){pa===null?pa=e:pa.push.apply(pa,e)}function j7(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!qi(s(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fo(e,t){for(t&=~MS,t&=~xy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Fi(t),r=1<<n;e[n]=-1,t&=~r}}function XE(e){if(Qt&6)throw Error(Pe(327));Xu();var t=bv(e,0);if(!(t&1))return Sa(e,Zn()),null;var n=Lv(e,t);if(e.tag!==0&&n===2){var r=Hj(e);r!==0&&(t=r,n=y1(e,r))}if(n===1)throw n=Kh,pc(e,0),Fo(e,t),Sa(e,Zn()),n;if(n===6)throw Error(Pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hl(e,pa,Rs),Sa(e,Zn()),null}function $S(e,t){var n=Qt;Qt|=1;try{return e(t)}finally{Qt=n,Qt===0&&(bd=Zn()+500,my&&wl())}}function _c(e){Yo!==null&&Yo.tag===0&&!(Qt&6)&&Xu();var t=Qt;Qt|=1;var n=ui.transition,r=pn;try{if(ui.transition=null,pn=1,e)return e()}finally{pn=r,ui.transition=n,Qt=t,!(Qt&6)&&wl()}}function LS(){Ra=Bu.current,In(Bu)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,QH(n)),rr!==null)for(n=rr.return;n!==null;){var r=n;switch(xS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sv();break;case 3:xd(),In(_a),In(Hr),CS();break;case 5:NS(r);break;case 4:xd();break;case 13:In(Bn);break;case 19:In(Bn);break;case 10:jS(r.type._context);break;case 22:case 23:LS()}n=n.return}if(wr=e,rr=e=il(e.current,null),Tr=Ra=t,hr=0,Kh=null,MS=xy=jc=0,pa=xh=null,rc!==null){for(t=0;t<rc.length;t++)if(n=rc[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=a,r.next=o}n.pending=r}rc=null}return e}function Y$(e,t){do{var n=rr;try{if(wS(),Zg.current=Rv,Iv){for(var r=Un.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Iv=!1}if(wc=0,yr=fr=Un=null,gh=!1,Wh=0,RS.current=null,n===null||n.return===null){hr=1,Kh=t,rr=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Tr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=$E(o);if(m!==null){m.flags&=-257,LE(m,o,l,s,t),m.mode&1&&DE(s,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){DE(s,u,t),FS();break e}c=Error(Pe(426))}}else if($n&&l.mode&1){var x=$E(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),LE(x,o,l,s,t),yS(yd(c,l));break e}}s=c=yd(c,l),hr!==4&&(hr=2),xh===null?xh=[s]:xh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=O$(s,c,t);PE(s,y);break e;case 1:l=c;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(rl===null||!rl.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var j=I$(s,l,t);PE(s,j);break e}}s=s.return}while(s!==null)}Q$(n)}catch(k){t=k,rr===n&&n!==null&&(rr=n=n.return);continue}break}while(!0)}function X$(){var e=Mv.current;return Mv.current=Rv,e===null?Rv:e}function FS(){(hr===0||hr===3||hr===2)&&(hr=4),wr===null||!(jc&268435455)&&!(xy&268435455)||Fo(wr,Tr)}function Lv(e,t){var n=Qt;Qt|=2;var r=X$();(wr!==e||Tr!==t)&&(Rs=null,pc(e,t));do try{_7();break}catch(a){Y$(e,a)}while(!0);if(wS(),Qt=n,Mv.current=r,rr!==null)throw Error(Pe(261));return wr=null,Tr=0,hr}function _7(){for(;rr!==null;)J$(rr)}function k7(){for(;rr!==null&&!Y9();)J$(rr)}function J$(e){var t=eL(e.alternate,e,Ra);e.memoizedProps=e.pendingProps,t===null?Q$(e):rr=t,RS.current=null}function Q$(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=v7(n,t),n!==null){n.flags&=32767,rr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{hr=6,rr=null;return}}else if(n=g7(n,t,Ra),n!==null){rr=n;return}if(t=t.sibling,t!==null){rr=t;return}rr=t=e}while(t!==null);hr===0&&(hr=5)}function Hl(e,t,n){var r=pn,a=ui.transition;try{ui.transition=null,pn=1,S7(e,t,n,r)}finally{ui.transition=a,pn=r}return null}function S7(e,t,n,r){do Xu();while(Yo!==null);if(Qt&6)throw Error(Pe(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Pe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(iH(e,s),e===wr&&(rr=wr=null,Tr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sg||(sg=!0,tL(yv,function(){return Xu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ui.transition,ui.transition=null;var o=pn;pn=1;var l=Qt;Qt|=4,RS.current=null,y7(e,n),V$(n,e),HH(Jj),wv=!!Xj,Jj=Xj=null,e.current=n,b7(n),X9(),Qt=l,pn=o,ui.transition=s}else e.current=n;if(sg&&(sg=!1,Yo=e,$v=a),s=e.pendingLanes,s===0&&(rl=null),Z9(n.stateNode),Sa(e,Zn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Dv)throw Dv=!1,e=v1,v1=null,e;return $v&1&&e.tag!==0&&Xu(),s=e.pendingLanes,s&1?e===x1?yh++:(yh=0,x1=e):yh=0,wl(),null}function Xu(){if(Yo!==null){var e=OD($v),t=ui.transition,n=pn;try{if(ui.transition=null,pn=16>e?16:e,Yo===null)var r=!1;else{if(e=Yo,Yo=null,$v=0,Qt&6)throw Error(Pe(331));var a=Qt;for(Qt|=4,at=e.current;at!==null;){var s=at,o=s.child;if(at.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(at=u;at!==null;){var f=at;switch(f.tag){case 0:case 11:case 15:vh(8,f,s)}var d=f.child;if(d!==null)d.return=f,at=d;else for(;at!==null;){f=at;var h=f.sibling,m=f.return;if(q$(f),f===u){at=null;break}if(h!==null){h.return=m,at=h;break}at=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}at=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,at=o;else e:for(;at!==null;){if(s=at,s.flags&2048)switch(s.tag){case 0:case 11:case 15:vh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,at=y;break e}at=s.return}}var b=e.current;for(at=b;at!==null;){o=at;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,at=w;else e:for(o=b;at!==null;){if(l=at,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vy(9,l)}}catch(k){Hn(l,l.return,k)}if(l===o){at=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,at=j;break e}at=l.return}}if(Qt=a,wl(),ds&&typeof ds.onPostCommitFiberRoot=="function")try{ds.onPostCommitFiberRoot(cy,e)}catch{}r=!0}return r}finally{pn=n,ui.transition=t}}return!1}function JE(e,t,n){t=yd(n,t),t=O$(e,t,1),e=nl(e,t,1),t=ia(),e!==null&&(ep(e,1,t),Sa(e,t))}function Hn(e,t,n){if(e.tag===3)JE(e,e,n);else for(;t!==null;){if(t.tag===3){JE(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rl===null||!rl.has(r))){e=yd(n,e),e=I$(t,e,1),t=nl(t,e,1),e=ia(),t!==null&&(ep(t,1,e),Sa(t,e));break}}t=t.return}}function N7(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ia(),e.pingedLanes|=e.suspendedLanes&n,wr===e&&(Tr&n)===n&&(hr===4||hr===3&&(Tr&130023424)===Tr&&500>Zn()-DS?pc(e,0):MS|=n),Sa(e,t)}function Z$(e,t){t===0&&(e.mode&1?(t=Xp,Xp<<=1,!(Xp&130023424)&&(Xp=4194304)):t=1);var n=ia();e=to(e,t),e!==null&&(ep(e,t,n),Sa(e,n))}function C7(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Z$(e,n)}function A7(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Pe(314))}r!==null&&r.delete(t),Z$(e,n)}var eL;eL=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_a.current)ya=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ya=!1,p7(e,t,n);ya=!!(e.flags&131072)}else ya=!1,$n&&t.flags&1048576&&a$(t,Av,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;tv(e,t),e=t.pendingProps;var a=pd(t,Hr.current);Yu(t,n),a=ES(null,t,r,e,a,n);var s=PS();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ka(r)?(s=!0,Nv(t)):s=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,kS(t),a.updater=gy,t.stateNode=a,a._reactInternals=t,s1(t,r,e,n),t=c1(null,t,r,!0,s,n)):(t.tag=0,$n&&s&&vS(t),ea(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(tv(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=P7(r),e=Ni(r,e),a){case 0:t=l1(null,t,r,e,n);break e;case 1:t=UE(null,t,r,e,n);break e;case 11:t=FE(null,t,r,e,n);break e;case 14:t=BE(null,t,r,Ni(r.type,e),n);break e}throw Error(Pe(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ni(r,a),l1(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ni(r,a),UE(e,t,r,a,n);case 3:e:{if($$(t),e===null)throw Error(Pe(387));r=t.pendingProps,s=t.memoizedState,a=s.element,u$(e,t),Tv(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){a=yd(Error(Pe(423)),t),t=zE(e,t,r,n,a);break e}else if(r!==a){a=yd(Error(Pe(424)),t),t=zE(e,t,r,n,a);break e}else for(Fa=tl(t.stateNode.containerInfo.firstChild),Ba=t,$n=!0,Ri=null,n=l$(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gd(),r===a){t=no(e,t,n);break e}ea(e,t,r,n)}t=t.child}return t;case 5:return d$(t),e===null&&r1(t),r=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,o=a.children,Qj(r,a)?o=null:s!==null&&Qj(r,s)&&(t.flags|=32),D$(e,t),ea(e,t,o,n),t.child;case 6:return e===null&&r1(t),null;case 13:return L$(e,t,n);case 4:return SS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=vd(t,null,r,n):ea(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ni(r,a),FE(e,t,r,a,n);case 7:return ea(e,t,t.pendingProps,n),t.child;case 8:return ea(e,t,t.pendingProps.children,n),t.child;case 12:return ea(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,Sn(Ev,r._currentValue),r._currentValue=o,s!==null)if(qi(s.value,o)){if(s.children===a.children&&!_a.current){t=no(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Vs(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),a1(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Pe(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),a1(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ea(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Yu(t,n),a=mi(a),r=r(a),t.flags|=1,ea(e,t,r,n),t.child;case 14:return r=t.type,a=Ni(r,t.pendingProps),a=Ni(r.type,a),BE(e,t,r,a,n);case 15:return R$(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ni(r,a),tv(e,t),t.tag=1,ka(r)?(e=!0,Nv(t)):e=!1,Yu(t,n),T$(t,r,a),s1(t,r,a,n),c1(null,t,r,!0,e,n);case 19:return F$(e,t,n);case 22:return M$(e,t,n)}throw Error(Pe(156,t.tag))};function tL(e,t){return AD(e,t)}function E7(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(e,t,n,r){return new E7(e,t,n,r)}function BS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function P7(e){if(typeof e=="function")return BS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===iS)return 11;if(e===sS)return 14}return 2}function il(e,t){var n=e.alternate;return n===null?(n=oi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function av(e,t,n,r,a,s){var o=2;if(r=e,typeof e=="function")BS(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Pu:return gc(n.children,a,s,t);case aS:o=8,a|=8;break;case Pj:return e=oi(12,n,t,a|2),e.elementType=Pj,e.lanes=s,e;case Tj:return e=oi(13,n,t,a),e.elementType=Tj,e.lanes=s,e;case Oj:return e=oi(19,n,t,a),e.elementType=Oj,e.lanes=s,e;case dD:return yy(n,a,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cD:o=10;break e;case uD:o=9;break e;case iS:o=11;break e;case sS:o=14;break e;case Mo:o=16,r=null;break e}throw Error(Pe(130,e==null?e:typeof e,""))}return t=oi(o,n,t,a),t.elementType=e,t.type=r,t.lanes=s,t}function gc(e,t,n,r){return e=oi(7,e,r,t),e.lanes=n,e}function yy(e,t,n,r){return e=oi(22,e,r,t),e.elementType=dD,e.lanes=n,e.stateNode={isHidden:!1},e}function K0(e,t,n){return e=oi(6,e,null,t),e.lanes=n,e}function G0(e,t,n){return t=oi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function T7(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=A0(0),this.expirationTimes=A0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=A0(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function US(e,t,n,r,a,s,o,l,c){return e=new T7(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=oi(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kS(s),e}function O7(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function nL(e){if(!e)return dl;e=e._reactInternals;e:{if(Wc(e)!==e||e.tag!==1)throw Error(Pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ka(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pe(171))}if(e.tag===1){var n=e.type;if(ka(n))return n$(e,n,t)}return t}function rL(e,t,n,r,a,s,o,l,c){return e=US(n,r,!0,e,a,s,o,l,c),e.context=nL(null),n=e.current,r=ia(),a=al(n),s=Vs(r,a),s.callback=t??null,nl(n,s,a),e.current.lanes=a,ep(e,a,r),Sa(e,r),e}function by(e,t,n,r){var a=t.current,s=ia(),o=al(a);return n=nL(n),t.context===null?t.context=n:t.pendingContext=n,t=Vs(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=nl(a,t,o),e!==null&&(Bi(e,a,o,s),Qg(e,a,o)),o}function Fv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function QE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zS(e,t){QE(e,t),(e=e.alternate)&&QE(e,t)}function I7(){return null}var aL=typeof reportError=="function"?reportError:function(e){console.error(e)};function qS(e){this._internalRoot=e}wy.prototype.render=qS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pe(409));by(e,t,null,null)};wy.prototype.unmount=qS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_c(function(){by(null,e,null,null)}),t[eo]=null}};function wy(e){this._internalRoot=e}wy.prototype.unstable_scheduleHydration=function(e){if(e){var t=MD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lo.length&&t!==0&&t<Lo[n].priority;n++);Lo.splice(n,0,e),n===0&&$D(e)}};function WS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function jy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ZE(){}function R7(e,t,n,r,a){if(a){if(typeof r=="function"){var s=r;r=function(){var u=Fv(o);s.call(u)}}var o=rL(t,r,e,0,null,!1,!1,"",ZE);return e._reactRootContainer=o,e[eo]=o.current,Fh(e.nodeType===8?e.parentNode:e),_c(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var u=Fv(c);l.call(u)}}var c=US(e,0,!1,null,null,!1,!1,"",ZE);return e._reactRootContainer=c,e[eo]=c.current,Fh(e.nodeType===8?e.parentNode:e),_c(function(){by(t,c,n,r)}),c}function _y(e,t,n,r,a){var s=n._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=Fv(o);l.call(c)}}by(t,o,e,a)}else o=R7(n,t,e,a,r);return Fv(o)}ID=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=rh(t.pendingLanes);n!==0&&(cS(t,n|1),Sa(t,Zn()),!(Qt&6)&&(bd=Zn()+500,wl()))}break;case 13:_c(function(){var r=to(e,1);if(r!==null){var a=ia();Bi(r,e,1,a)}}),zS(e,1)}};uS=function(e){if(e.tag===13){var t=to(e,134217728);if(t!==null){var n=ia();Bi(t,e,134217728,n)}zS(e,134217728)}};RD=function(e){if(e.tag===13){var t=al(e),n=to(e,t);if(n!==null){var r=ia();Bi(n,e,t,r)}zS(e,t)}};MD=function(){return pn};DD=function(e,t){var n=pn;try{return pn=e,t()}finally{pn=n}};zj=function(e,t,n){switch(t){case"input":if(Mj(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=hy(r);if(!a)throw Error(Pe(90));hD(r),Mj(r,a)}}}break;case"textarea":pD(e,n);break;case"select":t=n.value,t!=null&&Hu(e,!!n.multiple,t,!1)}};jD=$S;_D=_c;var M7={usingClientEntryPoint:!1,Events:[np,Ru,hy,bD,wD,$S]},Tf={findFiberByHostInstance:nc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D7={bundleType:Tf.bundleType,version:Tf.version,rendererPackageName:Tf.rendererPackageName,rendererConfig:Tf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ND(e),e===null?null:e.stateNode},findFiberByHostInstance:Tf.findFiberByHostInstance||I7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var og=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!og.isDisabled&&og.supportsFiber)try{cy=og.inject(D7),ds=og}catch{}}Ha.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M7;Ha.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!WS(t))throw Error(Pe(200));return O7(e,t,null,n)};Ha.createRoot=function(e,t){if(!WS(e))throw Error(Pe(299));var n=!1,r="",a=aL;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=US(e,1,!1,null,null,n,!1,r,a),e[eo]=t.current,Fh(e.nodeType===8?e.parentNode:e),new qS(t)};Ha.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pe(188)):(e=Object.keys(e).join(","),Error(Pe(268,e)));return e=ND(t),e=e===null?null:e.stateNode,e};Ha.flushSync=function(e){return _c(e)};Ha.hydrate=function(e,t,n){if(!jy(t))throw Error(Pe(200));return _y(null,e,t,!0,n)};Ha.hydrateRoot=function(e,t,n){if(!WS(e))throw Error(Pe(405));var r=n!=null&&n.hydratedSources||null,a=!1,s="",o=aL;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=rL(t,null,e,1,n??null,a,!1,s,o),e[eo]=t.current,Fh(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new wy(t)};Ha.render=function(e,t,n){if(!jy(t))throw Error(Pe(200));return _y(null,e,t,!1,n)};Ha.unmountComponentAtNode=function(e){if(!jy(e))throw Error(Pe(40));return e._reactRootContainer?(_c(function(){_y(null,null,e,!1,function(){e._reactRootContainer=null,e[eo]=null})}),!0):!1};Ha.unstable_batchedUpdates=$S;Ha.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!jy(n))throw Error(Pe(200));if(e==null||e._reactInternals===void 0)throw Error(Pe(38));return _y(e,t,n,!1,r)};Ha.version="18.3.1-next-f1338f8080-20240426";function iL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iL)}catch(e){console.error(e)}}iL(),iD.exports=Ha;var Hc=iD.exports;const sL=fn(Hc);var oL,eP=Hc;oL=eP.createRoot,eP.hydrateRoot;const $7=1,L7=1e6;let Y0=0;function F7(){return Y0=(Y0+1)%Number.MAX_SAFE_INTEGER,Y0.toString()}const X0=new Map,tP=e=>{if(X0.has(e))return;const t=setTimeout(()=>{X0.delete(e),bh({type:"REMOVE_TOAST",toastId:e})},L7);X0.set(e,t)},B7=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,$7)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?tP(n):e.toasts.forEach(r=>{tP(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},iv=[];let sv={toasts:[]};function bh(e){sv=B7(sv,e),iv.forEach(t=>{t(sv)})}function U7({...e}){const t=F7(),n=a=>bh({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>bh({type:"DISMISS_TOAST",toastId:t});return bh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function Vc(){const[e,t]=p.useState(sv);return p.useEffect(()=>(iv.push(t),()=>{const n=iv.indexOf(t);n>-1&&iv.splice(n,1)}),[e]),{...e,toast:U7,dismiss:n=>bh({type:"DISMISS_TOAST",toastId:n})}}function Ee(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function nP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ro(...e){return t=>{let n=!1;const r=e.map(a=>{const s=nP(a,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let a=0;a<r.length;a++){const s=r[a];typeof s=="function"?s():nP(e[a],null)}}}}function St(...e){return p.useCallback(ro(...e),e)}function z7(e,t){const n=p.createContext(t),r=s=>{const{children:o,...l}=s,c=p.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function a(s){const o=p.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,a]}function _r(e,t=[]){let n=[];function r(s,o){const l=p.createContext(o),c=n.length;n=[...n,o];const u=d=>{var y;const{scope:h,children:m,...g}=d,v=((y=h==null?void 0:h[e])==null?void 0:y[c])||l,x=p.useMemo(()=>g,Object.values(g));return i.jsx(v.Provider,{value:x,children:m})};u.displayName=s+"Provider";function f(d,h){var v;const m=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,g=p.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,f]}const a=()=>{const s=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,q7(a,...t)]}function q7(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const d=c(s)[`__scope${u}`];return{...l,...d}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function fl(e){const t=W7(e),n=p.forwardRef((r,a)=>{const{children:s,...o}=r,l=p.Children.toArray(s),c=l.find(H7);if(c){const u=c.props.children,f=l.map(d=>d===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:d);return i.jsx(t,{...o,ref:a,children:p.isValidElement(u)?p.cloneElement(u,void 0,f):null})}return i.jsx(t,{...o,ref:a,children:s})});return n.displayName=`${e}.Slot`,n}var HS=fl("Slot");function W7(e){const t=p.forwardRef((n,r)=>{const{children:a,...s}=n;if(p.isValidElement(a)){const o=K7(a),l=V7(s,a.props);return a.type!==p.Fragment&&(l.ref=r?ro(r,o):o),p.cloneElement(a,l)}return p.Children.count(a)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var lL=Symbol("radix.slottable");function cL(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=lL,t}function H7(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===lL}function V7(e,t){const n={...t};for(const r in t){const a=e[r],s=t[r];/^on[A-Z]/.test(r)?a&&s?n[r]=(...l)=>{const c=s(...l);return a(...l),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...s}:r==="className"&&(n[r]=[a,s].filter(Boolean).join(" "))}return{...e,...n}}function K7(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function ap(e){const t=e+"CollectionProvider",[n,r]=_r(t),[a,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:x,children:y}=v,b=V.useRef(null),w=V.useRef(new Map).current;return i.jsx(a,{scope:x,itemMap:w,collectionRef:b,children:y})};o.displayName=t;const l=e+"CollectionSlot",c=fl(l),u=V.forwardRef((v,x)=>{const{scope:y,children:b}=v,w=s(l,y),j=St(x,w.collectionRef);return i.jsx(c,{ref:j,children:b})});u.displayName=l;const f=e+"CollectionItemSlot",d="data-radix-collection-item",h=fl(f),m=V.forwardRef((v,x)=>{const{scope:y,children:b,...w}=v,j=V.useRef(null),k=St(x,j),_=s(f,y);return V.useEffect(()=>(_.itemMap.set(j,{ref:j,...w}),()=>void _.itemMap.delete(j))),i.jsx(h,{[d]:"",ref:k,children:b})});m.displayName=f;function g(v){const x=s(e+"CollectionConsumer",v);return V.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((_,S)=>w.indexOf(_.ref.current)-w.indexOf(S.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},g,r]}var G7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ge=G7.reduce((e,t)=>{const n=fl(`Primitive.${t}`),r=p.forwardRef((a,s)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function VS(e,t){e&&Hc.flushSync(()=>e.dispatchEvent(t))}function Kn(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Y7(e,t=globalThis==null?void 0:globalThis.document){const n=Kn(e);p.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var X7="DismissableLayer",w1="dismissableLayer.update",J7="dismissableLayer.pointerDownOutside",Q7="dismissableLayer.focusOutside",rP,uL=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Kc=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=e,u=p.useContext(uL),[f,d]=p.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=St(t,S=>d(S)),v=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),b=f?v.indexOf(f):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,j=b>=y,k=eV(S=>{const E=S.target,N=[...u.branches].some(I=>I.contains(E));!j||N||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},h),_=tV(S=>{const E=S.target;[...u.branches].some(I=>I.contains(E))||(s==null||s(S),o==null||o(S),S.defaultPrevented||l==null||l())},h);return Y7(S=>{b===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},h),p.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(rP=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),aP(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=rP)}},[f,h,n,u]),p.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),aP())},[f,u]),p.useEffect(()=>{const S=()=>m({});return document.addEventListener(w1,S),()=>document.removeEventListener(w1,S)},[]),i.jsx(Ge.div,{...c,ref:g,style:{pointerEvents:w?j?"auto":"none":void 0,...e.style},onFocusCapture:Ee(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Ee(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Ee(e.onPointerDownCapture,k.onPointerDownCapture)})});Kc.displayName=X7;var Z7="DismissableLayerBranch",dL=p.forwardRef((e,t)=>{const n=p.useContext(uL),r=p.useRef(null),a=St(t,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),i.jsx(Ge.div,{...e,ref:a})});dL.displayName=Z7;function eV(e,t=globalThis==null?void 0:globalThis.document){const n=Kn(e),r=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let c=function(){fL(J7,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function tV(e,t=globalThis==null?void 0:globalThis.document){const n=Kn(e),r=p.useRef(!1);return p.useEffect(()=>{const a=s=>{s.target&&!r.current&&fL(Q7,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function aP(){const e=new CustomEvent(w1);document.dispatchEvent(e)}function fL(e,t,n,{discrete:r}){const a=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?VS(a,s):a.dispatchEvent(s)}var nV=Kc,rV=dL,Xn=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},aV="Portal",Zd=p.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,s]=p.useState(!1);Xn(()=>s(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?sL.createPortal(i.jsx(Ge.div,{...r,ref:t}),o):null});Zd.displayName=aV;function iV(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var pr=e=>{const{present:t,children:n}=e,r=sV(t),a=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=St(r.ref,oV(a));return typeof n=="function"||r.isPresent?p.cloneElement(a,{ref:s}):null};pr.displayName="Presence";function sV(e){const[t,n]=p.useState(),r=p.useRef(null),a=p.useRef(e),s=p.useRef("none"),o=e?"mounted":"unmounted",[l,c]=iV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=lg(r.current);s.current=l==="mounted"?u:"none"},[l]),Xn(()=>{const u=r.current,f=a.current;if(f!==e){const h=s.current,m=lg(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Xn(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,d=m=>{const v=lg(r.current).includes(m.animationName);if(m.target===t&&v&&(c("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},h=m=>{m.target===t&&(s.current=lg(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function lg(e){return(e==null?void 0:e.animationName)||"none"}function oV(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var lV=eS[" useInsertionEffect ".trim().toString()]||Xn;function Ca({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,s,o]=cV({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const f=p.useRef(e!==void 0);p.useEffect(()=>{const d=f.current;d!==l&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const u=p.useCallback(f=>{var d;if(l){const h=uV(f)?f(e):f;h!==e&&((d=o.current)==null||d.call(o,h))}else s(f)},[l,e,s,o]);return[c,u]}function cV({defaultProp:e,onChange:t}){const[n,r]=p.useState(e),a=p.useRef(n),s=p.useRef(t);return lV(()=>{s.current=t},[t]),p.useEffect(()=>{var o;a.current!==n&&((o=s.current)==null||o.call(s,n),a.current=n)},[n,a]),[n,r,s]}function uV(e){return typeof e=="function"}var hL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),dV="VisuallyHidden",ky=p.forwardRef((e,t)=>i.jsx(Ge.span,{...e,ref:t,style:{...hL,...e.style}}));ky.displayName=dV;var fV=ky,KS="ToastProvider",[GS,hV,mV]=ap("Toast"),[mL,GFe]=_r("Toast",[mV]),[pV,Sy]=mL(KS),pL=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:s=50,children:o}=e,[l,c]=p.useState(null),[u,f]=p.useState(0),d=p.useRef(!1),h=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${KS}\`. Expected non-empty \`string\`.`),i.jsx(GS.Provider,{scope:t,children:i.jsx(pV,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:s,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>f(m=>m+1),[]),onToastRemove:p.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};pL.displayName=KS;var gL="ToastViewport",gV=["F8"],j1="toast.viewportPause",_1="toast.viewportResume",vL=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=gV,label:a="Notifications ({hotkey})",...s}=e,o=Sy(gL,n),l=hV(n),c=p.useRef(null),u=p.useRef(null),f=p.useRef(null),d=p.useRef(null),h=St(t,d,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;p.useEffect(()=>{const x=y=>{var w;r.length!==0&&r.every(j=>y[j]||y.code===j)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),p.useEffect(()=>{const x=c.current,y=d.current;if(g&&x&&y){const b=()=>{if(!o.isClosePausedRef.current){const _=new CustomEvent(j1);y.dispatchEvent(_),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const _=new CustomEvent(_1);y.dispatchEvent(_),o.isClosePausedRef.current=!1}},j=_=>{!x.contains(_.relatedTarget)&&w()},k=()=>{x.contains(document.activeElement)||w()};return x.addEventListener("focusin",b),x.addEventListener("focusout",j),x.addEventListener("pointermove",b),x.addEventListener("pointerleave",k),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{x.removeEventListener("focusin",b),x.removeEventListener("focusout",j),x.removeEventListener("pointermove",b),x.removeEventListener("pointerleave",k),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:x})=>{const b=l().map(w=>{const j=w.ref.current,k=[j,...EV(j)];return x==="forwards"?k:k.reverse()});return(x==="forwards"?b.reverse():b).flat()},[l]);return p.useEffect(()=>{const x=d.current;if(x){const y=b=>{var k,_,S;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const E=document.activeElement,N=b.shiftKey;if(b.target===x&&N){(k=u.current)==null||k.focus();return}const D=v({tabbingDirection:N?"backwards":"forwards"}),L=D.findIndex(B=>B===E);J0(D.slice(L+1))?b.preventDefault():N?(_=u.current)==null||_.focus():(S=f.current)==null||S.focus()}};return x.addEventListener("keydown",y),()=>x.removeEventListener("keydown",y)}},[l,v]),i.jsxs(rV,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&i.jsx(k1,{ref:u,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});J0(x)}}),i.jsx(GS.Slot,{scope:n,children:i.jsx(Ge.ol,{tabIndex:-1,...s,ref:h})}),g&&i.jsx(k1,{ref:f,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});J0(x)}})]})});vL.displayName=gL;var xL="ToastFocusProxy",k1=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,s=Sy(xL,n);return i.jsx(ky,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(l))&&r()}})});k1.displayName=xL;var ip="Toast",vV="toast.swipeStart",xV="toast.swipeMove",yV="toast.swipeCancel",bV="toast.swipeEnd",yL=p.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:s,...o}=e,[l,c]=Ca({prop:r,defaultProp:a??!0,onChange:s,caller:ip});return i.jsx(pr,{present:n||l,children:i.jsx(_V,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Kn(e.onPause),onResume:Kn(e.onResume),onSwipeStart:Ee(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ee(e.onSwipeMove,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Ee(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ee(e.onSwipeEnd,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});yL.displayName=ip;var[wV,jV]=mL(ip,{onClose(){}}),_V=p.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:s,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:m,...g}=e,v=Sy(ip,n),[x,y]=p.useState(null),b=St(t,B=>y(B)),w=p.useRef(null),j=p.useRef(null),k=a||v.duration,_=p.useRef(0),S=p.useRef(k),E=p.useRef(0),{onToastAdd:N,onToastRemove:I}=v,P=Kn(()=>{var U;(x==null?void 0:x.contains(document.activeElement))&&((U=v.viewport)==null||U.focus()),o()}),D=p.useCallback(B=>{!B||B===1/0||(window.clearTimeout(E.current),_.current=new Date().getTime(),E.current=window.setTimeout(P,B))},[P]);p.useEffect(()=>{const B=v.viewport;if(B){const U=()=>{D(S.current),u==null||u()},$=()=>{const O=new Date().getTime()-_.current;S.current=S.current-O,window.clearTimeout(E.current),c==null||c()};return B.addEventListener(j1,$),B.addEventListener(_1,U),()=>{B.removeEventListener(j1,$),B.removeEventListener(_1,U)}}},[v.viewport,k,c,u,D]),p.useEffect(()=>{s&&!v.isClosePausedRef.current&&D(k)},[s,k,v.isClosePausedRef,D]),p.useEffect(()=>(N(),()=>I()),[N,I]);const L=p.useMemo(()=>x?NL(x):null,[x]);return v.viewport?i.jsxs(i.Fragment,{children:[L&&i.jsx(kV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:L}),i.jsx(wV,{scope:n,onClose:P,children:Hc.createPortal(i.jsx(GS.ItemSlot,{scope:n,children:i.jsx(nV,{asChild:!0,onEscapeKeyDown:Ee(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||P(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Ge.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ee(e.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Ee(e.onPointerDown,B=>{B.button===0&&(w.current={x:B.clientX,y:B.clientY})}),onPointerMove:Ee(e.onPointerMove,B=>{if(!w.current)return;const U=B.clientX-w.current.x,$=B.clientY-w.current.y,O=!!j.current,T=["left","right"].includes(v.swipeDirection),R=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,C=T?R(0,U):0,F=T?0:R(0,$),M=B.pointerType==="touch"?10:2,A={x:C,y:F},W={originalEvent:B,delta:A};O?(j.current=A,cg(xV,d,W,{discrete:!1})):iP(A,v.swipeDirection,M)?(j.current=A,cg(vV,f,W,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(U)>M||Math.abs($)>M)&&(w.current=null)}),onPointerUp:Ee(e.onPointerUp,B=>{const U=j.current,$=B.target;if($.hasPointerCapture(B.pointerId)&&$.releasePointerCapture(B.pointerId),j.current=null,w.current=null,U){const O=B.currentTarget,T={originalEvent:B,delta:U};iP(U,v.swipeDirection,v.swipeThreshold)?cg(bV,m,T,{discrete:!0}):cg(yV,h,T,{discrete:!0}),O.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),kV=e=>{const{__scopeToast:t,children:n,...r}=e,a=Sy(ip,t),[s,o]=p.useState(!1),[l,c]=p.useState(!1);return CV(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Zd,{asChild:!0,children:i.jsx(ky,{...r,children:s&&i.jsxs(i.Fragment,{children:[a.label," ",n]})})})},SV="ToastTitle",bL=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Ge.div,{...r,ref:t})});bL.displayName=SV;var NV="ToastDescription",wL=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Ge.div,{...r,ref:t})});wL.displayName=NV;var jL="ToastAction",_L=p.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(SL,{altText:n,asChild:!0,children:i.jsx(YS,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${jL}\`. Expected non-empty \`string\`.`),null)});_L.displayName=jL;var kL="ToastClose",YS=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=jV(kL,n);return i.jsx(SL,{asChild:!0,children:i.jsx(Ge.button,{type:"button",...r,ref:t,onClick:Ee(e.onClick,a.onClose)})})});YS.displayName=kL;var SL=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return i.jsx(Ge.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function NL(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),AV(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!a)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...NL(r))}}),t}function cg(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?VS(a,s):a.dispatchEvent(s)}var iP=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),s=r>a;return t==="left"||t==="right"?s&&r>n:!s&&a>n};function CV(e=()=>{}){const t=Kn(e);Xn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function AV(e){return e.nodeType===e.ELEMENT_NODE}function EV(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function J0(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var PV=pL,CL=vL,AL=yL,EL=bL,PL=wL,TL=_L,OL=YS;function IL(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=IL(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Zt(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=IL(e))&&(r&&(r+=" "),r+=t);return r}const sP=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,oP=Zt,sp=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return oP(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:s}=t,o=Object.keys(a).map(u=>{const f=n==null?void 0:n[u],d=s==null?void 0:s[u];if(f===null)return null;const h=sP(f)||sP(d);return a[u][h]}),l=n&&Object.entries(n).reduce((u,f)=>{let[d,h]=f;return h===void 0||(u[d]=h),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:d,className:h,...m}=f;return Object.entries(m).every(g=>{let[v,x]=g;return Array.isArray(x)?x.includes({...s,...l}[v]):{...s,...l}[v]===x})?[...u,d,h]:u},[]);return oP(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RL=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...OV,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:RL("lucide",a),...l},[...o.map(([u,f])=>p.createElement(u,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(e,t)=>{const n=p.forwardRef(({className:r,...a},s)=>p.createElement(IV,{ref:s,iconNode:t,className:RL(`lucide-${TV(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=Ye("AlignCenter",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=Ye("AlignJustify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=Ye("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=Ye("AlignRight",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Ye("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=Ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=Ye("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=Ye("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=Ye("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Ye("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=Ye("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=Ye("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=Ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=Ye("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=Ye("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=Ye("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=Ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=Ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=Ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=Ye("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=Ye("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=Ye("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=Ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=Ye("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=Ye("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=Ye("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=Ye("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=Ye("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=Ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=Ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=Ye("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=Ye("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=Ye("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=Ye("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=Ye("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=Ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=Ye("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=Ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=Ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=Ye("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=Ye("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=Ye("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=Ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=Ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=Ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Ye("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=Ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=Ye("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=Ye("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=Ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=Ye("PlugZap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=Ye("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=Ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=Ye("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Ye("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=Ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=Ye("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=Ye("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=Ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=Ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=Ye("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=Ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=Ye("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=Ye("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=Ye("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=Ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=Ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=Ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=Ye("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),eN="-",eK=e=>{const t=nK(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(eN);return l[0]===""&&l.length!==1&&l.shift(),KL(l,t)||tK(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},KL=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?KL(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const s=e.join(eN);return(o=t.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},pP=/^\[(.+)\]$/,tK=e=>{if(pP.test(e)){const t=pP.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},nK=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return aK(Object.entries(e.classGroups),n).forEach(([s,o])=>{S1(o,r,s,t)}),r},S1=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const s=a===""?t:gP(t,a);s.classGroupId=n;return}if(typeof a=="function"){if(rK(a)){S1(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([s,o])=>{S1(o,gP(t,s),n,r)})})},gP=(e,t)=>{let n=e;return t.split(eN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},rK=e=>e.isThemeGetter,aK=(e,t)=>t?e.map(([n,r])=>{const a=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[t+o,l])):s);return[n,a]}):e,iK=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(s,o)=>{n.set(s,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return a(s,o),o},set(s,o){n.has(s)?n.set(s,o):a(s,o)}}},GL="!",sK=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],s=t.length,o=l=>{const c=[];let u=0,f=0,d;for(let x=0;x<l.length;x++){let y=l[x];if(u===0){if(y===a&&(r||l.slice(x,x+s)===t)){c.push(l.slice(f,x)),f=x+s;continue}if(y==="/"){d=x;continue}}y==="["?u++:y==="]"&&u--}const h=c.length===0?l:l.substring(f),m=h.startsWith(GL),g=m?h.substring(1):h,v=d&&d>f?d-f:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:o}):o},oK=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},lK=e=>({cache:iK(e.cacheSize),parseClassName:sK(e),...eK(e)}),cK=/\s+/,uK=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,s=[],o=e.trim().split(cK);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:f,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:m}=n(u);let g=!!m,v=r(g?h.substring(0,m):h);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=r(h),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}const x=oK(f).join(":"),y=d?x+GL:x,b=y+v;if(s.includes(b))continue;s.push(b);const w=a(v,g);for(let j=0;j<w.length;++j){const k=w[j];s.push(y+k)}l=u+(l.length>0?" "+l:l)}return l};function dK(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=YL(t))&&(r&&(r+=" "),r+=n);return r}const YL=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=YL(e[r]))&&(n&&(n+=" "),n+=t);return n};function fK(e,...t){let n,r,a,s=o;function o(c){const u=t.reduce((f,d)=>d(f),e());return n=lK(u),r=n.cache.get,a=n.cache.set,s=l,l(c)}function l(c){const u=r(c);if(u)return u;const f=uK(c,n);return a(c,f),f}return function(){return s(dK.apply(null,arguments))}}const En=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},XL=/^\[(?:([a-z-]+):)?(.+)\]$/i,hK=/^\d+\/\d+$/,mK=new Set(["px","full","screen"]),pK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,xK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,As=e=>Ju(e)||mK.has(e)||hK.test(e),Co=e=>ef(e,"length",CK),Ju=e=>!!e&&!Number.isNaN(Number(e)),tw=e=>ef(e,"number",Ju),If=e=>!!e&&Number.isInteger(Number(e)),bK=e=>e.endsWith("%")&&Ju(e.slice(0,-1)),Pt=e=>XL.test(e),Ao=e=>pK.test(e),wK=new Set(["length","size","percentage"]),jK=e=>ef(e,wK,JL),_K=e=>ef(e,"position",JL),kK=new Set(["image","url"]),SK=e=>ef(e,kK,EK),NK=e=>ef(e,"",AK),Rf=()=>!0,ef=(e,t,n)=>{const r=XL.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},CK=e=>gK.test(e)&&!vK.test(e),JL=()=>!1,AK=e=>xK.test(e),EK=e=>yK.test(e),PK=()=>{const e=En("colors"),t=En("spacing"),n=En("blur"),r=En("brightness"),a=En("borderColor"),s=En("borderRadius"),o=En("borderSpacing"),l=En("borderWidth"),c=En("contrast"),u=En("grayscale"),f=En("hueRotate"),d=En("invert"),h=En("gap"),m=En("gradientColorStops"),g=En("gradientColorStopPositions"),v=En("inset"),x=En("margin"),y=En("opacity"),b=En("padding"),w=En("saturate"),j=En("scale"),k=En("sepia"),_=En("skew"),S=En("space"),E=En("translate"),N=()=>["auto","contain","none"],I=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",Pt,t],D=()=>[Pt,t],L=()=>["",As,Co],B=()=>["auto",Ju,Pt],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],R=()=>["","0",Pt],C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[Ju,Pt];return{cacheSize:500,separator:":",theme:{colors:[Rf],spacing:[As,Co],blur:["none","",Ao,Pt],brightness:F(),borderColor:[e],borderRadius:["none","","full",Ao,Pt],borderSpacing:D(),borderWidth:L(),contrast:F(),grayscale:R(),hueRotate:F(),invert:R(),gap:D(),gradientColorStops:[e],gradientColorStopPositions:[bK,Co],inset:P(),margin:P(),opacity:F(),padding:D(),saturate:F(),scale:F(),sepia:R(),skew:F(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Pt]}],container:["container"],columns:[{columns:[Ao]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),Pt]}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",If,Pt]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pt]}],grow:[{grow:R()}],shrink:[{shrink:R()}],order:[{order:["first","last","none",If,Pt]}],"grid-cols":[{"grid-cols":[Rf]}],"col-start-end":[{col:["auto",{span:["full",If,Pt]},Pt]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Rf]}],"row-start-end":[{row:["auto",{span:[If,Pt]},Pt]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pt,t]}],"min-w":[{"min-w":[Pt,t,"min","max","fit"]}],"max-w":[{"max-w":[Pt,t,"none","full","min","max","fit","prose",{screen:[Ao]},Ao]}],h:[{h:[Pt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ao,Co]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",tw]}],"font-family":[{font:[Rf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pt]}],"line-clamp":[{"line-clamp":["none",Ju,tw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",As,Pt]}],"list-image":[{"list-image":["none",Pt]}],"list-style-type":[{list:["none","disc","decimal",Pt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",As,Co]}],"underline-offset":[{"underline-offset":["auto",As,Pt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),_K]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",jK]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},SK]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:$()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[As,Pt]}],"outline-w":[{outline:[As,Co]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[As,Co]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ao,NK]}],"shadow-color":[{shadow:[Rf]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ao,Pt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pt]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",Pt]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[If,Pt]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[As,Co,tw]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},TK=fK(PK);function xe(...e){return TK(Zt(e))}function OK(e,t){if(!t||t.length===0)return;const n=Object.keys(t[0]),r=[n.join(","),...t.map(l=>n.map(c=>{const u=l[c],f=u==null?"":String(u),d='"'+f.replace(/"/g,'""')+'"';return/[",\n]/.test(f)?d:f}).join(","))].join(`
`),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),o=URL.createObjectURL(a);s.setAttribute("href",o),s.setAttribute("download",e),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}function QL(e){if(typeof e=="string"){let t=e.replace(/([A-Z0-9._%+-]+)@([A-Z0-9.-]+)\.[A-Z]{2,}/gi,"***@***");return t=t.replace(/\b\+?\d[\d\s-]{6,}\b/g,n=>n.slice(0,Math.max(0,n.length-4)).replace(/\d/g,"*")+n.slice(-4)),t=t.replace(/(\d+\.\d+\.\d+)\.\d+/g,"$1.*"),t}if(e&&typeof e=="object"){const t=Array.isArray(e)?[]:{};for(const n of Object.keys(e))t[n]=QL(e[n]);return t}return e}const IK=PV,ZL=p.forwardRef(({className:e,...t},n)=>i.jsx(CL,{ref:n,className:xe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));ZL.displayName=CL.displayName;const RK=sp("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),e4=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(AL,{ref:r,className:xe(RK({variant:t}),e),...n}));e4.displayName=AL.displayName;const MK=p.forwardRef(({className:e,...t},n)=>i.jsx(TL,{ref:n,className:xe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));MK.displayName=TL.displayName;const t4=p.forwardRef(({className:e,...t},n)=>i.jsx(OL,{ref:n,className:xe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(lp,{className:"h-4 w-4"})}));t4.displayName=OL.displayName;const n4=p.forwardRef(({className:e,...t},n)=>i.jsx(EL,{ref:n,className:xe("text-sm font-semibold",e),...t}));n4.displayName=EL.displayName;const r4=p.forwardRef(({className:e,...t},n)=>i.jsx(PL,{ref:n,className:xe("text-sm opacity-90",e),...t}));r4.displayName=PL.displayName;function DK(){const{toasts:e}=Vc();return i.jsxs(IK,{children:[e.map(function({id:t,title:n,description:r,action:a,...s}){return i.jsxs(e4,{...s,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(n4,{children:n}),r&&i.jsx(r4,{children:r})]}),a,i.jsx(t4,{})]},t)}),i.jsx(ZL,{})]})}var vP=["light","dark"],$K="(prefers-color-scheme: dark)",LK=p.createContext(void 0),FK={setTheme:e=>{},themes:[]},BK=()=>{var e;return(e=p.useContext(LK))!=null?e:FK};p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:s,value:o,attrs:l,nonce:c})=>{let u=s==="system",f=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=a?vP.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,v=!1,x=!0)=>{let y=o?o[g]:g,b=v?g+"|| ''":`'${y}'`,w="";return a&&x&&!v&&vP.includes(g)&&(w+=`d.style.colorScheme = '${g}';`),n==="class"?v||y?w+=`c.add(${b})`:w+="null":y&&(w+=`d[s](n,${b})`),w},m=e?`!function(){${f}${h(e)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${$K}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${u?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var UK=e=>{switch(e){case"success":return WK;case"info":return VK;case"warning":return HK;case"error":return KK;default:return null}},zK=Array(12).fill(0),qK=({visible:e,className:t})=>V.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},V.createElement("div",{className:"sonner-spinner"},zK.map((n,r)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),WK=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),HK=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),VK=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),KK=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),GK=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),YK=()=>{let[e,t]=V.useState(document.hidden);return V.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},N1=1,XK=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:N1++,s=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),s?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0,s,o=r.then(async c=>{if(s=["resolve",c],V.isValidElement(c))a=!1,this.create({id:n,type:"default",message:c});else if(QK(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:f})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:f})}}).catch(async c=>{if(s=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:f})}}).finally(()=>{var c;a&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>s[0]==="reject"?u(s[1]):c(s[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||N1++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ha=new XK,JK=(e,t)=>{let n=(t==null?void 0:t.id)||N1++;return ha.addToast({title:e,...t,id:n}),n},QK=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",ZK=JK,eG=()=>ha.toasts,tG=()=>ha.getActiveToasts(),Ie=Object.assign(ZK,{success:ha.success,info:ha.info,warning:ha.warning,error:ha.error,custom:ha.custom,message:ha.message,promise:ha.promise,dismiss:ha.dismiss,loading:ha.loading},{getHistory:eG,getToasts:tG});function nG(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}nG(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function ug(e){return e.label!==void 0}var rG=3,aG="32px",iG="16px",xP=4e3,sG=356,oG=14,lG=20,cG=200;function ji(...e){return e.filter(Boolean).join(" ")}function uG(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var dG=e=>{var t,n,r,a,s,o,l,c,u,f,d;let{invert:h,toast:m,unstyled:g,interacting:v,setHeights:x,visibleToasts:y,heights:b,index:w,toasts:j,expanded:k,removeToast:_,defaultRichColors:S,closeButton:E,style:N,cancelButtonStyle:I,actionButtonStyle:P,className:D="",descriptionClassName:L="",duration:B,position:U,gap:$,loadingIcon:O,expandByDefault:T,classNames:R,icons:C,closeButtonAriaLabel:F="Close toast",pauseWhenPageIsHidden:M}=e,[A,W]=V.useState(null),[G,Y]=V.useState(null),[H,Q]=V.useState(!1),[X,re]=V.useState(!1),[fe,J]=V.useState(!1),[ye,z]=V.useState(!1),[q,ae]=V.useState(!1),[se,be]=V.useState(0),[Se,Le]=V.useState(0),ge=V.useRef(m.duration||B||xP),We=V.useRef(null),dt=V.useRef(null),bt=w===0,Et=w+1<=y,te=m.type,me=m.dismissible!==!1,Fe=m.className||"",He=m.descriptionClassName||"",Ue=V.useMemo(()=>b.findIndex(ze=>ze.toastId===m.id)||0,[b,m.id]),he=V.useMemo(()=>{var ze;return(ze=m.closeButton)!=null?ze:E},[m.closeButton,E]),Ot=V.useMemo(()=>m.duration||B||xP,[m.duration,B]),vt=V.useRef(0),wt=V.useRef(0),ve=V.useRef(0),_e=V.useRef(null),[$e,oe]=U.split("-"),Ze=V.useMemo(()=>b.reduce((ze,ie,Ne)=>Ne>=Ue?ze:ze+ie.height,0),[b,Ue]),Ke=YK(),en=m.invert||h,_t=te==="loading";wt.current=V.useMemo(()=>Ue*$+Ze,[Ue,Ze]),V.useEffect(()=>{ge.current=Ot},[Ot]),V.useEffect(()=>{Q(!0)},[]),V.useEffect(()=>{let ze=dt.current;if(ze){let ie=ze.getBoundingClientRect().height;return Le(ie),x(Ne=>[{toastId:m.id,height:ie,position:m.position},...Ne]),()=>x(Ne=>Ne.filter(Re=>Re.toastId!==m.id))}},[x,m.id]),V.useLayoutEffect(()=>{if(!H)return;let ze=dt.current,ie=ze.style.height;ze.style.height="auto";let Ne=ze.getBoundingClientRect().height;ze.style.height=ie,Le(Ne),x(Re=>Re.find(et=>et.toastId===m.id)?Re.map(et=>et.toastId===m.id?{...et,height:Ne}:et):[{toastId:m.id,height:Ne,position:m.position},...Re])},[H,m.title,m.description,x,m.id]);let ut=V.useCallback(()=>{re(!0),be(wt.current),x(ze=>ze.filter(ie=>ie.toastId!==m.id)),setTimeout(()=>{_(m)},cG)},[m,_,x,wt]);V.useEffect(()=>{if(m.promise&&te==="loading"||m.duration===1/0||m.type==="loading")return;let ze;return k||v||M&&Ke?(()=>{if(ve.current<vt.current){let ie=new Date().getTime()-vt.current;ge.current=ge.current-ie}ve.current=new Date().getTime()})():ge.current!==1/0&&(vt.current=new Date().getTime(),ze=setTimeout(()=>{var ie;(ie=m.onAutoClose)==null||ie.call(m,m),ut()},ge.current)),()=>clearTimeout(ze)},[k,v,m,te,M,Ke,ut]),V.useEffect(()=>{m.delete&&ut()},[ut,m.delete]);function Lt(){var ze,ie,Ne;return C!=null&&C.loading?V.createElement("div",{className:ji(R==null?void 0:R.loader,(ze=m==null?void 0:m.classNames)==null?void 0:ze.loader,"sonner-loader"),"data-visible":te==="loading"},C.loading):O?V.createElement("div",{className:ji(R==null?void 0:R.loader,(ie=m==null?void 0:m.classNames)==null?void 0:ie.loader,"sonner-loader"),"data-visible":te==="loading"},O):V.createElement(qK,{className:ji(R==null?void 0:R.loader,(Ne=m==null?void 0:m.classNames)==null?void 0:Ne.loader),visible:te==="loading"})}return V.createElement("li",{tabIndex:0,ref:dt,className:ji(D,Fe,R==null?void 0:R.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,R==null?void 0:R.default,R==null?void 0:R[te],(n=m==null?void 0:m.classNames)==null?void 0:n[te]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:S,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":H,"data-promise":!!m.promise,"data-swiped":q,"data-removed":X,"data-visible":Et,"data-y-position":$e,"data-x-position":oe,"data-index":w,"data-front":bt,"data-swiping":fe,"data-dismissible":me,"data-type":te,"data-invert":en,"data-swipe-out":ye,"data-swipe-direction":G,"data-expanded":!!(k||T&&H),style:{"--index":w,"--toasts-before":w,"--z-index":j.length-w,"--offset":`${X?se:wt.current}px`,"--initial-height":T?"auto":`${Se}px`,...N,...m.style},onDragEnd:()=>{J(!1),W(null),_e.current=null},onPointerDown:ze=>{_t||!me||(We.current=new Date,be(wt.current),ze.target.setPointerCapture(ze.pointerId),ze.target.tagName!=="BUTTON"&&(J(!0),_e.current={x:ze.clientX,y:ze.clientY}))},onPointerUp:()=>{var ze,ie,Ne,Re;if(ye||!me)return;_e.current=null;let et=Number(((ze=dt.current)==null?void 0:ze.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),pt=Number(((ie=dt.current)==null?void 0:ie.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ee=new Date().getTime()-((Ne=We.current)==null?void 0:Ne.getTime()),ke=A==="x"?et:pt,st=Math.abs(ke)/ee;if(Math.abs(ke)>=lG||st>.11){be(wt.current),(Re=m.onDismiss)==null||Re.call(m,m),Y(A==="x"?et>0?"right":"left":pt>0?"down":"up"),ut(),z(!0),ae(!1);return}J(!1),W(null)},onPointerMove:ze=>{var ie,Ne,Re,et;if(!_e.current||!me||((ie=window.getSelection())==null?void 0:ie.toString().length)>0)return;let pt=ze.clientY-_e.current.y,ee=ze.clientX-_e.current.x,ke=(Ne=e.swipeDirections)!=null?Ne:uG(U);!A&&(Math.abs(ee)>1||Math.abs(pt)>1)&&W(Math.abs(ee)>Math.abs(pt)?"x":"y");let st={x:0,y:0};A==="y"?(ke.includes("top")||ke.includes("bottom"))&&(ke.includes("top")&&pt<0||ke.includes("bottom")&&pt>0)&&(st.y=pt):A==="x"&&(ke.includes("left")||ke.includes("right"))&&(ke.includes("left")&&ee<0||ke.includes("right")&&ee>0)&&(st.x=ee),(Math.abs(st.x)>0||Math.abs(st.y)>0)&&ae(!0),(Re=dt.current)==null||Re.style.setProperty("--swipe-amount-x",`${st.x}px`),(et=dt.current)==null||et.style.setProperty("--swipe-amount-y",`${st.y}px`)}},he&&!m.jsx?V.createElement("button",{"aria-label":F,"data-disabled":_t,"data-close-button":!0,onClick:_t||!me?()=>{}:()=>{var ze;ut(),(ze=m.onDismiss)==null||ze.call(m,m)},className:ji(R==null?void 0:R.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(s=C==null?void 0:C.close)!=null?s:GK):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:V.createElement(V.Fragment,null,te||m.icon||m.promise?V.createElement("div",{"data-icon":"",className:ji(R==null?void 0:R.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Lt():null,m.type!=="loading"?m.icon||(C==null?void 0:C[te])||UK(te):null):null,V.createElement("div",{"data-content":"",className:ji(R==null?void 0:R.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},V.createElement("div",{"data-title":"",className:ji(R==null?void 0:R.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?V.createElement("div",{"data-description":"",className:ji(L,He,R==null?void 0:R.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&ug(m.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||I,onClick:ze=>{var ie,Ne;ug(m.cancel)&&me&&((Ne=(ie=m.cancel).onClick)==null||Ne.call(ie,ze),ut())},className:ji(R==null?void 0:R.cancelButton,(f=m==null?void 0:m.classNames)==null?void 0:f.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&ug(m.action)?V.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||P,onClick:ze=>{var ie,Ne;ug(m.action)&&((Ne=(ie=m.action).onClick)==null||Ne.call(ie,ze),!ze.defaultPrevented&&ut())},className:ji(R==null?void 0:R.actionButton,(d=m==null?void 0:m.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function yP(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function fG(e,t){let n={};return[e,t].forEach((r,a)=>{let s=a===1,o=s?"--mobile-offset":"--offset",l=s?iG:aG;function c(u){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var hG=p.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:c,mobileOffset:u,theme:f="light",richColors:d,duration:h,style:m,visibleToasts:g=rG,toastOptions:v,dir:x=yP(),gap:y=oG,loadingIcon:b,icons:w,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:k}=e,[_,S]=V.useState([]),E=V.useMemo(()=>Array.from(new Set([r].concat(_.filter(M=>M.position).map(M=>M.position)))),[_,r]),[N,I]=V.useState([]),[P,D]=V.useState(!1),[L,B]=V.useState(!1),[U,$]=V.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=V.useRef(null),T=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),R=V.useRef(null),C=V.useRef(!1),F=V.useCallback(M=>{S(A=>{var W;return(W=A.find(G=>G.id===M.id))!=null&&W.delete||ha.dismiss(M.id),A.filter(({id:G})=>G!==M.id)})},[]);return V.useEffect(()=>ha.subscribe(M=>{if(M.dismiss){S(A=>A.map(W=>W.id===M.id?{...W,delete:!0}:W));return}setTimeout(()=>{sL.flushSync(()=>{S(A=>{let W=A.findIndex(G=>G.id===M.id);return W!==-1?[...A.slice(0,W),{...A[W],...M},...A.slice(W+1)]:[M,...A]})})})}),[]),V.useEffect(()=>{if(f!=="system"){$(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?$("dark"):$("light")),typeof window>"u")return;let M=window.matchMedia("(prefers-color-scheme: dark)");try{M.addEventListener("change",({matches:A})=>{$(A?"dark":"light")})}catch{M.addListener(({matches:W})=>{try{$(W?"dark":"light")}catch(G){console.error(G)}})}},[f]),V.useEffect(()=>{_.length<=1&&D(!1)},[_]),V.useEffect(()=>{let M=A=>{var W,G;a.every(Y=>A[Y]||A.code===Y)&&(D(!0),(W=O.current)==null||W.focus()),A.code==="Escape"&&(document.activeElement===O.current||(G=O.current)!=null&&G.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[a]),V.useEffect(()=>{if(O.current)return()=>{R.current&&(R.current.focus({preventScroll:!0}),R.current=null,C.current=!1)}},[O.current]),V.createElement("section",{ref:t,"aria-label":`${j} ${T}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((M,A)=>{var W;let[G,Y]=M.split("-");return _.length?V.createElement("ol",{key:M,dir:x==="auto"?yP():x,tabIndex:-1,ref:O,className:l,"data-sonner-toaster":!0,"data-theme":U,"data-y-position":G,"data-lifted":P&&_.length>1&&!s,"data-x-position":Y,style:{"--front-toast-height":`${((W=N[0])==null?void 0:W.height)||0}px`,"--width":`${sG}px`,"--gap":`${y}px`,...m,...fG(c,u)},onBlur:H=>{C.current&&!H.currentTarget.contains(H.relatedTarget)&&(C.current=!1,R.current&&(R.current.focus({preventScroll:!0}),R.current=null))},onFocus:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||C.current||(C.current=!0,R.current=H.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{L||D(!1)},onDragEnd:()=>D(!1),onPointerDown:H=>{H.target instanceof HTMLElement&&H.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},_.filter(H=>!H.position&&A===0||H.position===M).map((H,Q)=>{var X,re;return V.createElement(dG,{key:H.id,icons:w,index:Q,toast:H,defaultRichColors:d,duration:(X=v==null?void 0:v.duration)!=null?X:h,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:g,closeButton:(re=v==null?void 0:v.closeButton)!=null?re:o,interacting:L,position:M,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:F,toasts:_.filter(fe=>fe.position==H.position),heights:N.filter(fe=>fe.position==H.position),setHeights:I,expandByDefault:s,gap:y,loadingIcon:b,expanded:P,pauseWhenPageIsHidden:k,swipeDirections:e.swipeDirections})})):null}))});const a4=({...e})=>{const{theme:t="system"}=BK();return i.jsx(hG,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},bP=Object.freeze(Object.defineProperty({__proto__:null,Toaster:a4,toast:Ie},Symbol.toStringTag,{value:"Module"}));var mG=eS[" useId ".trim().toString()]||(()=>{}),pG=0;function ir(e){const[t,n]=p.useState(mG());return Xn(()=>{e||n(r=>r??String(pG++))},[e]),e||(t?`radix-${t}`:"")}const gG=["top","right","bottom","left"],hl=Math.min,Da=Math.max,zv=Math.round,dg=Math.floor,ms=e=>({x:e,y:e}),vG={left:"right",right:"left",bottom:"top",top:"bottom"},xG={start:"end",end:"start"};function C1(e,t,n){return Da(e,hl(t,n))}function ao(e,t){return typeof e=="function"?e(t):e}function io(e){return e.split("-")[0]}function tf(e){return e.split("-")[1]}function tN(e){return e==="x"?"y":"x"}function nN(e){return e==="y"?"height":"width"}const yG=new Set(["top","bottom"]);function ss(e){return yG.has(io(e))?"y":"x"}function rN(e){return tN(ss(e))}function bG(e,t,n){n===void 0&&(n=!1);const r=tf(e),a=rN(e),s=nN(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=qv(o)),[o,qv(o)]}function wG(e){const t=qv(e);return[A1(e),t,A1(t)]}function A1(e){return e.replace(/start|end/g,t=>xG[t])}const wP=["left","right"],jP=["right","left"],jG=["top","bottom"],_G=["bottom","top"];function kG(e,t,n){switch(e){case"top":case"bottom":return n?t?jP:wP:t?wP:jP;case"left":case"right":return t?jG:_G;default:return[]}}function SG(e,t,n,r){const a=tf(e);let s=kG(io(e),n==="start",r);return a&&(s=s.map(o=>o+"-"+a),t&&(s=s.concat(s.map(A1)))),s}function qv(e){return e.replace(/left|right|bottom|top/g,t=>vG[t])}function NG(e){return{top:0,right:0,bottom:0,left:0,...e}}function i4(e){return typeof e!="number"?NG(e):{top:e,right:e,bottom:e,left:e}}function Wv(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function _P(e,t,n){let{reference:r,floating:a}=e;const s=ss(t),o=rN(t),l=nN(o),c=io(t),u=s==="y",f=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,h=r[l]/2-a[l]/2;let m;switch(c){case"top":m={x:f,y:r.y-a.height};break;case"bottom":m={x:f,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-a.width,y:d};break;default:m={x:r.x,y:r.y}}switch(tf(t)){case"start":m[o]-=h*(n&&u?-1:1);break;case"end":m[o]+=h*(n&&u?-1:1);break}return m}const CG=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:d}=_P(u,r,c),h=r,m={},g=0;for(let v=0;v<l.length;v++){const{name:x,fn:y}=l[v],{x:b,y:w,data:j,reset:k}=await y({x:f,y:d,initialPlacement:r,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});f=b??f,d=w??d,m={...m,[x]:{...m[x],...j}},k&&g<=50&&(g++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:f,y:d}=_P(u,h,c)),v=-1)}return{x:f,y:d,placement:h,strategy:a,middlewareData:m}};async function Jh(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:s,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=ao(t,e),g=i4(m),x=l[h?d==="floating"?"reference":"floating":d],y=Wv(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),b=d==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),j=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},k=Wv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(y.top-k.top+g.top)/j.y,bottom:(k.bottom-y.bottom+g.bottom)/j.y,left:(y.left-k.left+g.left)/j.x,right:(k.right-y.right+g.right)/j.x}}const AG=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:s,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=ao(e,t)||{};if(u==null)return{};const d=i4(f),h={x:n,y:r},m=rN(a),g=nN(m),v=await o.getDimensions(u),x=m==="y",y=x?"top":"left",b=x?"bottom":"right",w=x?"clientHeight":"clientWidth",j=s.reference[g]+s.reference[m]-h[m]-s.floating[g],k=h[m]-s.reference[m],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=_?_[w]:0;(!S||!await(o.isElement==null?void 0:o.isElement(_)))&&(S=l.floating[w]||s.floating[g]);const E=j/2-k/2,N=S/2-v[g]/2-1,I=hl(d[y],N),P=hl(d[b],N),D=I,L=S-v[g]-P,B=S/2-v[g]/2+E,U=C1(D,B,L),$=!c.arrow&&tf(a)!=null&&B!==U&&s.reference[g]/2-(B<D?I:P)-v[g]/2<0,O=$?B<D?B-D:B-L:0;return{[m]:h[m]+O,data:{[m]:U,centerOffset:B-U-O,...$&&{alignmentOffset:O}},reset:$}}}),EG=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...x}=ao(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=io(a),b=ss(l),w=io(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),k=h||(w||!v?[qv(l)]:wG(l)),_=g!=="none";!h&&_&&k.push(...SG(l,v,g,j));const S=[l,...k],E=await Jh(t,x),N=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&N.push(E[y]),d){const B=bG(a,o,j);N.push(E[B[0]],E[B[1]])}if(I=[...I,{placement:a,overflows:N}],!N.every(B=>B<=0)){var P,D;const B=(((P=s.flip)==null?void 0:P.index)||0)+1,U=S[B];if(U&&(!(d==="alignment"?b!==ss(U):!1)||I.every(T=>T.overflows[0]>0&&ss(T.placement)===b)))return{data:{index:B,overflows:I},reset:{placement:U}};let $=(D=I.filter(O=>O.overflows[0]<=0).sort((O,T)=>O.overflows[1]-T.overflows[1])[0])==null?void 0:D.placement;if(!$)switch(m){case"bestFit":{var L;const O=(L=I.filter(T=>{if(_){const R=ss(T.placement);return R===b||R==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(R=>R>0).reduce((R,C)=>R+C,0)]).sort((T,R)=>T[1]-R[1])[0])==null?void 0:L[0];O&&($=O);break}case"initialPlacement":$=l;break}if(a!==$)return{reset:{placement:$}}}return{}}}};function kP(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function SP(e){return gG.some(t=>e[t]>=0)}const PG=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=ao(e,t);switch(r){case"referenceHidden":{const s=await Jh(t,{...a,elementContext:"reference"}),o=kP(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:SP(o)}}}case"escaped":{const s=await Jh(t,{...a,altBoundary:!0}),o=kP(s,n.floating);return{data:{escapedOffsets:o,escaped:SP(o)}}}default:return{}}}}},s4=new Set(["left","top"]);async function TG(e,t){const{placement:n,platform:r,elements:a}=e,s=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=io(n),l=tf(n),c=ss(n)==="y",u=s4.has(o)?-1:1,f=s&&c?-1:1,d=ao(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*f,y:h*u}:{x:h*u,y:m*f}}const OG=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:s,placement:o,middlewareData:l}=t,c=await TG(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:s+c.y,data:{...c,placement:o}}}}},IG=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:y,y:b}=x;return{x:y,y:b}}},...c}=ao(e,t),u={x:n,y:r},f=await Jh(t,c),d=ss(io(a)),h=tN(d);let m=u[h],g=u[d];if(s){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=m+f[x],w=m-f[y];m=C1(b,m,w)}if(o){const x=d==="y"?"top":"left",y=d==="y"?"bottom":"right",b=g+f[x],w=g-f[y];g=C1(b,g,w)}const v=l.fn({...t,[h]:m,[d]:g});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:s,[d]:o}}}}}},RG=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:s,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ao(e,t),f={x:n,y:r},d=ss(a),h=tN(d);let m=f[h],g=f[d];const v=ao(l,t),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=h==="y"?"height":"width",j=s.reference[h]-s.floating[w]+x.mainAxis,k=s.reference[h]+s.reference[w]-x.mainAxis;m<j?m=j:m>k&&(m=k)}if(u){var y,b;const w=h==="y"?"width":"height",j=s4.has(io(a)),k=s.reference[d]-s.floating[w]+(j&&((y=o.offset)==null?void 0:y[d])||0)+(j?0:x.crossAxis),_=s.reference[d]+s.reference[w]+(j?0:((b=o.offset)==null?void 0:b[d])||0)-(j?x.crossAxis:0);g<k?g=k:g>_&&(g=_)}return{[h]:m,[d]:g}}}},MG=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:s,platform:o,elements:l}=t,{apply:c=()=>{},...u}=ao(e,t),f=await Jh(t,u),d=io(a),h=tf(a),m=ss(a)==="y",{width:g,height:v}=s.floating;let x,y;d==="top"||d==="bottom"?(x=d,y=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=d,x=h==="end"?"top":"bottom");const b=v-f.top-f.bottom,w=g-f.left-f.right,j=hl(v-f[x],b),k=hl(g-f[y],w),_=!t.middlewareData.shift;let S=j,E=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(E=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(S=b),_&&!h){const I=Da(f.left,0),P=Da(f.right,0),D=Da(f.top,0),L=Da(f.bottom,0);m?E=g-2*(I!==0||P!==0?I+P:Da(f.left,f.right)):S=v-2*(D!==0||L!==0?D+L:Da(f.top,f.bottom))}await c({...t,availableWidth:E,availableHeight:S});const N=await o.getDimensions(l.floating);return g!==N.width||v!==N.height?{reset:{rects:!0}}:{}}}};function Ey(){return typeof window<"u"}function nf(e){return o4(e)?(e.nodeName||"").toLowerCase():"#document"}function Ua(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function js(e){var t;return(t=(o4(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function o4(e){return Ey()?e instanceof Node||e instanceof Ua(e).Node:!1}function Wi(e){return Ey()?e instanceof Element||e instanceof Ua(e).Element:!1}function xs(e){return Ey()?e instanceof HTMLElement||e instanceof Ua(e).HTMLElement:!1}function NP(e){return!Ey()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ua(e).ShadowRoot}const DG=new Set(["inline","contents"]);function cp(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Hi(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!DG.has(a)}const $G=new Set(["table","td","th"]);function LG(e){return $G.has(nf(e))}const FG=[":popover-open",":modal"];function Py(e){return FG.some(t=>{try{return e.matches(t)}catch{return!1}})}const BG=["transform","translate","scale","rotate","perspective"],UG=["transform","translate","scale","rotate","perspective","filter"],zG=["paint","layout","strict","content"];function aN(e){const t=iN(),n=Wi(e)?Hi(e):e;return BG.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||UG.some(r=>(n.willChange||"").includes(r))||zG.some(r=>(n.contain||"").includes(r))}function qG(e){let t=ml(e);for(;xs(t)&&!wd(t);){if(aN(t))return t;if(Py(t))return null;t=ml(t)}return null}function iN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const WG=new Set(["html","body","#document"]);function wd(e){return WG.has(nf(e))}function Hi(e){return Ua(e).getComputedStyle(e)}function Ty(e){return Wi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ml(e){if(nf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||NP(e)&&e.host||js(e);return NP(t)?t.host:t}function l4(e){const t=ml(e);return wd(t)?e.ownerDocument?e.ownerDocument.body:e.body:xs(t)&&cp(t)?t:l4(t)}function Qh(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=l4(e),s=a===((r=e.ownerDocument)==null?void 0:r.body),o=Ua(a);if(s){const l=E1(o);return t.concat(o,o.visualViewport||[],cp(a)?a:[],l&&n?Qh(l):[])}return t.concat(a,Qh(a,[],n))}function E1(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function c4(e){const t=Hi(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=xs(e),s=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=zv(n)!==s||zv(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function sN(e){return Wi(e)?e:e.contextElement}function Qu(e){const t=sN(e);if(!xs(t))return ms(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:s}=c4(t);let o=(s?zv(n.width):n.width)/r,l=(s?zv(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const HG=ms(0);function u4(e){const t=Ua(e);return!iN()||!t.visualViewport?HG:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function VG(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ua(e)?!1:t}function Sc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),s=sN(e);let o=ms(1);t&&(r?Wi(r)&&(o=Qu(r)):o=Qu(e));const l=VG(s,n,r)?u4(s):ms(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,f=a.width/o.x,d=a.height/o.y;if(s){const h=Ua(s),m=r&&Wi(r)?Ua(r):r;let g=h,v=E1(g);for(;v&&r&&m!==g;){const x=Qu(v),y=v.getBoundingClientRect(),b=Hi(v),w=y.left+(v.clientLeft+parseFloat(b.paddingLeft))*x.x,j=y.top+(v.clientTop+parseFloat(b.paddingTop))*x.y;c*=x.x,u*=x.y,f*=x.x,d*=x.y,c+=w,u+=j,g=Ua(v),v=E1(g)}}return Wv({width:f,height:d,x:c,y:u})}function oN(e,t){const n=Ty(e).scrollLeft;return t?t.left+n:Sc(js(e)).left+n}function d4(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:oN(e,r)),s=r.top+t.scrollTop;return{x:a,y:s}}function KG(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const s=a==="fixed",o=js(r),l=t?Py(t.floating):!1;if(r===o||l&&s)return n;let c={scrollLeft:0,scrollTop:0},u=ms(1);const f=ms(0),d=xs(r);if((d||!d&&!s)&&((nf(r)!=="body"||cp(o))&&(c=Ty(r)),xs(r))){const m=Sc(r);u=Qu(r),f.x=m.x+r.clientLeft,f.y=m.y+r.clientTop}const h=o&&!d&&!s?d4(o,c,!0):ms(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+h.x,y:n.y*u.y-c.scrollTop*u.y+f.y+h.y}}function GG(e){return Array.from(e.getClientRects())}function YG(e){const t=js(e),n=Ty(e),r=e.ownerDocument.body,a=Da(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Da(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+oN(e);const l=-n.scrollTop;return Hi(r).direction==="rtl"&&(o+=Da(t.clientWidth,r.clientWidth)-a),{width:a,height:s,x:o,y:l}}function XG(e,t){const n=Ua(e),r=js(e),a=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){s=a.width,o=a.height;const u=iN();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:s,height:o,x:l,y:c}}const JG=new Set(["absolute","fixed"]);function QG(e,t){const n=Sc(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,s=xs(e)?Qu(e):ms(1),o=e.clientWidth*s.x,l=e.clientHeight*s.y,c=a*s.x,u=r*s.y;return{width:o,height:l,x:c,y:u}}function CP(e,t,n){let r;if(t==="viewport")r=XG(e,n);else if(t==="document")r=YG(js(e));else if(Wi(t))r=QG(t,n);else{const a=u4(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Wv(r)}function f4(e,t){const n=ml(e);return n===t||!Wi(n)||wd(n)?!1:Hi(n).position==="fixed"||f4(n,t)}function ZG(e,t){const n=t.get(e);if(n)return n;let r=Qh(e,[],!1).filter(l=>Wi(l)&&nf(l)!=="body"),a=null;const s=Hi(e).position==="fixed";let o=s?ml(e):e;for(;Wi(o)&&!wd(o);){const l=Hi(o),c=aN(o);!c&&l.position==="fixed"&&(a=null),(s?!c&&!a:!c&&l.position==="static"&&!!a&&JG.has(a.position)||cp(o)&&!c&&f4(e,o))?r=r.filter(f=>f!==o):a=l,o=ml(o)}return t.set(e,r),r}function eY(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Py(t)?[]:ZG(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,f)=>{const d=CP(t,f,a);return u.top=Da(d.top,u.top),u.right=hl(d.right,u.right),u.bottom=hl(d.bottom,u.bottom),u.left=Da(d.left,u.left),u},CP(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function tY(e){const{width:t,height:n}=c4(e);return{width:t,height:n}}function nY(e,t,n){const r=xs(t),a=js(t),s=n==="fixed",o=Sc(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const c=ms(0);function u(){c.x=oN(a)}if(r||!r&&!s)if((nf(t)!=="body"||cp(a))&&(l=Ty(t)),r){const m=Sc(t,!0,s,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();s&&!r&&a&&u();const f=a&&!r&&!s?d4(a,l):ms(0),d=o.left+l.scrollLeft-c.x-f.x,h=o.top+l.scrollTop-c.y-f.y;return{x:d,y:h,width:o.width,height:o.height}}function nw(e){return Hi(e).position==="static"}function AP(e,t){if(!xs(e)||Hi(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return js(e)===n&&(n=n.ownerDocument.body),n}function h4(e,t){const n=Ua(e);if(Py(e))return n;if(!xs(e)){let a=ml(e);for(;a&&!wd(a);){if(Wi(a)&&!nw(a))return a;a=ml(a)}return n}let r=AP(e,t);for(;r&&LG(r)&&nw(r);)r=AP(r,t);return r&&wd(r)&&nw(r)&&!aN(r)?n:r||qG(e)||n}const rY=async function(e){const t=this.getOffsetParent||h4,n=this.getDimensions,r=await n(e.floating);return{reference:nY(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function aY(e){return Hi(e).direction==="rtl"}const iY={convertOffsetParentRelativeRectToViewportRelativeRect:KG,getDocumentElement:js,getClippingRect:eY,getOffsetParent:h4,getElementRects:rY,getClientRects:GG,getDimensions:tY,getScale:Qu,isElement:Wi,isRTL:aY};function m4(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function sY(e,t){let n=null,r;const a=js(e);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=e.getBoundingClientRect(),{left:f,top:d,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=dg(d),v=dg(a.clientWidth-(f+h)),x=dg(a.clientHeight-(d+m)),y=dg(f),w={rootMargin:-g+"px "+-v+"px "+-x+"px "+-y+"px",threshold:Da(0,hl(1,c))||1};let j=!0;function k(_){const S=_[0].intersectionRatio;if(S!==c){if(!j)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!m4(u,e.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(k,{...w,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,w)}n.observe(e)}return o(!0),s}function oY(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=sN(e),f=a||s?[...u?Qh(u):[],...Qh(t)]:[];f.forEach(y=>{a&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=u&&l?sY(u,n):null;let h=-1,m=null;o&&(m=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let g,v=c?Sc(e):null;c&&x();function x(){const y=Sc(e);v&&!m4(v,y)&&n(),v=y,g=requestAnimationFrame(x)}return n(),()=>{var y;f.forEach(b=>{a&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d==null||d(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const lY=OG,cY=IG,uY=EG,dY=MG,fY=PG,EP=AG,hY=RG,mY=(e,t,n)=>{const r=new Map,a={platform:iY,...n},s={...a.platform,_c:r};return CG(e,t,{...a,platform:s})};var pY=typeof document<"u",gY=function(){},cv=pY?p.useLayoutEffect:gY;function Hv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Hv(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const s=a[r];if(!(s==="_owner"&&e.$$typeof)&&!Hv(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function p4(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function PP(e,t){const n=p4(e);return Math.round(t*n)/n}function rw(e){const t=p.useRef(e);return cv(()=>{t.current=e}),t}function vY(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,d]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(r);Hv(h,r)||m(r);const[g,v]=p.useState(null),[x,y]=p.useState(null),b=p.useCallback(T=>{T!==_.current&&(_.current=T,v(T))},[]),w=p.useCallback(T=>{T!==S.current&&(S.current=T,y(T))},[]),j=s||g,k=o||x,_=p.useRef(null),S=p.useRef(null),E=p.useRef(f),N=c!=null,I=rw(c),P=rw(a),D=rw(u),L=p.useCallback(()=>{if(!_.current||!S.current)return;const T={placement:t,strategy:n,middleware:h};P.current&&(T.platform=P.current),mY(_.current,S.current,T).then(R=>{const C={...R,isPositioned:D.current!==!1};B.current&&!Hv(E.current,C)&&(E.current=C,Hc.flushSync(()=>{d(C)}))})},[h,t,n,P,D]);cv(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,d(T=>({...T,isPositioned:!1})))},[u]);const B=p.useRef(!1);cv(()=>(B.current=!0,()=>{B.current=!1}),[]),cv(()=>{if(j&&(_.current=j),k&&(S.current=k),j&&k){if(I.current)return I.current(j,k,L);L()}},[j,k,L,I,N]);const U=p.useMemo(()=>({reference:_,floating:S,setReference:b,setFloating:w}),[b,w]),$=p.useMemo(()=>({reference:j,floating:k}),[j,k]),O=p.useMemo(()=>{const T={position:n,left:0,top:0};if(!$.floating)return T;const R=PP($.floating,f.x),C=PP($.floating,f.y);return l?{...T,transform:"translate("+R+"px, "+C+"px)",...p4($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:C}},[n,l,$.floating,f.x,f.y]);return p.useMemo(()=>({...f,update:L,refs:U,elements:$,floatingStyles:O}),[f,L,U,$,O])}const xY=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?EP({element:r.current,padding:a}).fn(n):{}:r?EP({element:r,padding:a}).fn(n):{}}}},yY=(e,t)=>({...lY(e),options:[e,t]}),bY=(e,t)=>({...cY(e),options:[e,t]}),wY=(e,t)=>({...hY(e),options:[e,t]}),jY=(e,t)=>({...uY(e),options:[e,t]}),_Y=(e,t)=>({...dY(e),options:[e,t]}),kY=(e,t)=>({...fY(e),options:[e,t]}),SY=(e,t)=>({...xY(e),options:[e,t]});var NY="Arrow",g4=p.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...s}=e;return i.jsx(Ge.svg,{...s,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});g4.displayName=NY;var CY=g4;function lN(e){const[t,n]=p.useState(void 0);return Xn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const s=a[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var cN="Popper",[v4,jl]=_r(cN),[AY,x4]=v4(cN),y4=e=>{const{__scopePopper:t,children:n}=e,[r,a]=p.useState(null);return i.jsx(AY,{scope:t,anchor:r,onAnchorChange:a,children:n})};y4.displayName=cN;var b4="PopperAnchor",w4=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,s=x4(b4,n),o=p.useRef(null),l=St(t,o);return p.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(Ge.div,{...a,ref:l})});w4.displayName=b4;var uN="PopperContent",[EY,PY]=v4(uN),j4=p.forwardRef((e,t)=>{var H,Q,X,re,fe,J;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=e,x=x4(uN,n),[y,b]=p.useState(null),w=St(t,ye=>b(ye)),[j,k]=p.useState(null),_=lN(j),S=(_==null?void 0:_.width)??0,E=(_==null?void 0:_.height)??0,N=r+(s!=="center"?"-"+s:""),I=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},P=Array.isArray(u)?u:[u],D=P.length>0,L={padding:I,boundary:P.filter(OY),altBoundary:D},{refs:B,floatingStyles:U,placement:$,isPositioned:O,middlewareData:T}=vY({strategy:"fixed",placement:N,whileElementsMounted:(...ye)=>oY(...ye,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[yY({mainAxis:a+E,alignmentAxis:o}),c&&bY({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?wY():void 0,...L}),c&&jY({...L}),_Y({...L,apply:({elements:ye,rects:z,availableWidth:q,availableHeight:ae})=>{const{width:se,height:be}=z.reference,Se=ye.floating.style;Se.setProperty("--radix-popper-available-width",`${q}px`),Se.setProperty("--radix-popper-available-height",`${ae}px`),Se.setProperty("--radix-popper-anchor-width",`${se}px`),Se.setProperty("--radix-popper-anchor-height",`${be}px`)}}),j&&SY({element:j,padding:l}),IY({arrowWidth:S,arrowHeight:E}),h&&kY({strategy:"referenceHidden",...L})]}),[R,C]=S4($),F=Kn(g);Xn(()=>{O&&(F==null||F())},[O,F]);const M=(H=T.arrow)==null?void 0:H.x,A=(Q=T.arrow)==null?void 0:Q.y,W=((X=T.arrow)==null?void 0:X.centerOffset)!==0,[G,Y]=p.useState();return Xn(()=>{y&&Y(window.getComputedStyle(y).zIndex)},[y]),i.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:O?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[(re=T.transformOrigin)==null?void 0:re.x,(fe=T.transformOrigin)==null?void 0:fe.y].join(" "),...((J=T.hide)==null?void 0:J.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(EY,{scope:n,placedSide:R,onArrowChange:k,arrowX:M,arrowY:A,shouldHideArrow:W,children:i.jsx(Ge.div,{"data-side":R,"data-align":C,...v,ref:w,style:{...v.style,animation:O?void 0:"none"}})})})});j4.displayName=uN;var _4="PopperArrow",TY={top:"bottom",right:"left",bottom:"top",left:"right"},k4=p.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,s=PY(_4,r),o=TY[s.placedSide];return i.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:i.jsx(CY,{...a,ref:n,style:{...a.style,display:"block"}})})});k4.displayName=_4;function OY(e){return e!==null}var IY=e=>({name:"transformOrigin",options:e,fn(t){var x,y,b;const{placement:n,rects:r,middlewareData:a}=t,o=((x=a.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,f]=S4(n),d={start:"0%",center:"50%",end:"100%"}[f],h=(((y=a.arrow)==null?void 0:y.x)??0)+l/2,m=(((b=a.arrow)==null?void 0:b.y)??0)+c/2;let g="",v="";return u==="bottom"?(g=o?d:`${h}px`,v=`${-c}px`):u==="top"?(g=o?d:`${h}px`,v=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,v=o?d:`${m}px`):u==="left"&&(g=`${r.floating.width+c}px`,v=o?d:`${m}px`),{data:{x:g,y:v}}}});function S4(e){const[t,n="center"]=e.split("-");return[t,n]}var Oy=y4,up=w4,Iy=j4,Ry=k4,[My,YFe]=_r("Tooltip",[jl]),Dy=jl(),N4="TooltipProvider",RY=700,P1="tooltip.open",[MY,dN]=My(N4),C4=e=>{const{__scopeTooltip:t,delayDuration:n=RY,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:s}=e,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(MY,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:s})};C4.displayName=N4;var Zh="Tooltip",[DY,$y]=My(Zh),A4=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:s,disableHoverableContent:o,delayDuration:l}=e,c=dN(Zh,e.__scopeTooltip),u=Dy(t),[f,d]=p.useState(null),h=ir(),m=p.useRef(0),g=o??c.disableHoverableContent,v=l??c.delayDuration,x=p.useRef(!1),[y,b]=Ca({prop:r,defaultProp:a??!1,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(P1))):c.onClose(),s==null||s(S)},caller:Zh}),w=p.useMemo(()=>y?x.current?"delayed-open":"instant-open":"closed",[y]),j=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x.current=!1,b(!0)},[b]),k=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b(!1)},[b]),_=p.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,b(!0),m.current=0},v)},[v,b]);return p.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),i.jsx(Oy,{...u,children:i.jsx(DY,{scope:t,contentId:h,open:y,stateAttribute:w,trigger:f,onTriggerChange:d,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayedRef.current?_():j()},[c.isOpenDelayedRef,_,j]),onTriggerLeave:p.useCallback(()=>{g?k():(window.clearTimeout(m.current),m.current=0)},[k,g]),onOpen:j,onClose:k,disableHoverableContent:g,children:n})})};A4.displayName=Zh;var T1="TooltipTrigger",E4=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=$y(T1,n),s=dN(T1,n),o=Dy(n),l=p.useRef(null),c=St(t,l,a.onTriggerChange),u=p.useRef(!1),f=p.useRef(!1),d=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),i.jsx(up,{asChild:!0,...o,children:i.jsx(Ge.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:Ee(e.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!s.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:Ee(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:Ee(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ee(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Ee(e.onBlur,a.onClose),onClick:Ee(e.onClick,a.onClose)})})});E4.displayName=T1;var $Y="TooltipPortal",[XFe,LY]=My($Y,{forceMount:void 0}),jd="TooltipContent",P4=p.forwardRef((e,t)=>{const n=LY(jd,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...s}=e,o=$y(jd,e.__scopeTooltip);return i.jsx(pr,{present:r||o.open,children:o.disableHoverableContent?i.jsx(T4,{side:a,...s,ref:t}):i.jsx(FY,{side:a,...s,ref:t})})}),FY=p.forwardRef((e,t)=>{const n=$y(jd,e.__scopeTooltip),r=dN(jd,e.__scopeTooltip),a=p.useRef(null),s=St(t,a),[o,l]=p.useState(null),{trigger:c,onClose:u}=n,f=a.current,{onPointerInTransitChange:d}=r,h=p.useCallback(()=>{l(null),d(!1)},[d]),m=p.useCallback((g,v)=>{const x=g.currentTarget,y={x:g.clientX,y:g.clientY},b=WY(y,x.getBoundingClientRect()),w=HY(y,b),j=VY(v.getBoundingClientRect()),k=GY([...w,...j]);l(k),d(!0)},[d]);return p.useEffect(()=>()=>h(),[h]),p.useEffect(()=>{if(c&&f){const g=x=>m(x,f),v=x=>m(x,c);return c.addEventListener("pointerleave",g),f.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",g),f.removeEventListener("pointerleave",v)}}},[c,f,m,h]),p.useEffect(()=>{if(o){const g=v=>{const x=v.target,y={x:v.clientX,y:v.clientY},b=(c==null?void 0:c.contains(x))||(f==null?void 0:f.contains(x)),w=!KY(y,o);b?h():w&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,f,o,u,h]),i.jsx(T4,{...e,ref:s})}),[BY,UY]=My(Zh,{isInside:!1}),zY=cL("TooltipContent"),T4=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=e,c=$y(jd,n),u=Dy(n),{onClose:f}=c;return p.useEffect(()=>(document.addEventListener(P1,f),()=>document.removeEventListener(P1,f)),[f]),p.useEffect(()=>{if(c.trigger){const d=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&f()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,f]),i.jsx(Kc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:f,children:i.jsxs(Iy,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(zY,{children:r}),i.jsx(BY,{scope:n,isInside:!0,children:i.jsx(fV,{id:c.contentId,role:"tooltip",children:a||r})})]})})});P4.displayName=jd;var O4="TooltipArrow",qY=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Dy(n);return UY(O4,n).isInside?null:i.jsx(Ry,{...a,...r,ref:t})});qY.displayName=O4;function WY(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,a,s)){case s:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function HY(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function VY(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function KY(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,f=l.y,d=c.x,h=c.y;f>r!=h>r&&n<(d-u)*(r-f)/(h-f)+u&&(a=!a)}return a}function GY(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),YY(t)}function YY(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var XY=C4,JY=A4,QY=E4,I4=P4;const O1=XY,ce=JY,ue=QY,le=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(I4,{ref:r,sideOffset:t,className:xe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));le.displayName=I4.displayName;var Ly=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Fy=typeof window>"u"||"Deno"in globalThis;function Ci(){}function ZY(e,t){return typeof e=="function"?e(t):e}function eX(e){return typeof e=="number"&&e>=0&&e!==1/0}function tX(e,t){return Math.max(e+(t||0)-Date.now(),0)}function I1(e,t){return typeof e=="function"?e(t):e}function nX(e,t){return typeof e=="function"?e(t):e}function TP(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:s,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==fN(o,t.options))return!1}else if(!tm(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||s&&!s(t))}function OP(e,t){const{exact:n,status:r,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(em(t.options.mutationKey)!==em(s))return!1}else if(!tm(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function fN(e,t){return((t==null?void 0:t.queryKeyHashFn)||em)(e)}function em(e){return JSON.stringify(e,(t,n)=>R1(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function tm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>tm(e[n],t[n])):!1}function R4(e,t){if(e===t)return e;const n=IP(e)&&IP(t);if(n||R1(e)&&R1(t)){const r=n?e:Object.keys(e),a=r.length,s=n?t:Object.keys(t),o=s.length,l=n?[]:{},c=new Set(r);let u=0;for(let f=0;f<o;f++){const d=n?f:s[f];(!n&&c.has(d)||n)&&e[d]===void 0&&t[d]===void 0?(l[d]=void 0,u++):(l[d]=R4(e[d],t[d]),l[d]===e[d]&&e[d]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function IP(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function R1(e){if(!RP(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!RP(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function RP(e){return Object.prototype.toString.call(e)==="[object Object]"}function rX(e){return new Promise(t=>{setTimeout(t,e)})}function aX(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?R4(e,t):t}function iX(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function sX(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var hN=Symbol();function M4(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===hN?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var cc,qo,sd,BM,oX=(BM=class extends Ly{constructor(){super();tn(this,cc);tn(this,qo);tn(this,sd);Ct(this,sd,t=>{if(!Fy&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){je(this,qo)||this.setEventListener(je(this,sd))}onUnsubscribe(){var t;this.hasListeners()||((t=je(this,qo))==null||t.call(this),Ct(this,qo,void 0))}setEventListener(t){var n;Ct(this,sd,t),(n=je(this,qo))==null||n.call(this),Ct(this,qo,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){je(this,cc)!==t&&(Ct(this,cc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof je(this,cc)=="boolean"?je(this,cc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},cc=new WeakMap,qo=new WeakMap,sd=new WeakMap,BM),D4=new oX,od,Wo,ld,UM,lX=(UM=class extends Ly{constructor(){super();tn(this,od,!0);tn(this,Wo);tn(this,ld);Ct(this,ld,t=>{if(!Fy&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){je(this,Wo)||this.setEventListener(je(this,ld))}onUnsubscribe(){var t;this.hasListeners()||((t=je(this,Wo))==null||t.call(this),Ct(this,Wo,void 0))}setEventListener(t){var n;Ct(this,ld,t),(n=je(this,Wo))==null||n.call(this),Ct(this,Wo,t(this.setOnline.bind(this)))}setOnline(t){je(this,od)!==t&&(Ct(this,od,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return je(this,od)}},od=new WeakMap,Wo=new WeakMap,ld=new WeakMap,UM),Vv=new lX;function cX(){let e,t;const n=new Promise((a,s)=>{e=a,t=s});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}function uX(e){return Math.min(1e3*2**e,3e4)}function $4(e){return(e??"online")==="online"?Vv.isOnline():!0}var L4=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function aw(e){return e instanceof L4}function F4(e){let t=!1,n=0,r=!1,a;const s=cX(),o=v=>{var x;r||(h(new L4(v)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>D4.isFocused()&&(e.networkMode==="always"||Vv.isOnline())&&e.canRun(),f=()=>$4(e.networkMode)&&e.canRun(),d=v=>{var x;r||(r=!0,(x=e.onSuccess)==null||x.call(e,v),a==null||a(),s.resolve(v))},h=v=>{var x;r||(r=!0,(x=e.onError)==null||x.call(e,v),a==null||a(),s.reject(v))},m=()=>new Promise(v=>{var x;a=y=>{(r||u())&&v(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var v;a=void 0,r||(v=e.onContinue)==null||v.call(e)}),g=()=>{if(r)return;let v;const x=n===0?e.initialPromise:void 0;try{v=x??e.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(d).catch(y=>{var _;if(r)return;const b=e.retry??(Fy?0:3),w=e.retryDelay??uX,j=typeof w=="function"?w(n,y):w,k=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(t||!k){h(y);return}n++,(_=e.onFail)==null||_.call(e,n,y),rX(j).then(()=>u()?void 0:m()).then(()=>{t?h(y):g()})})};return{promise:s,cancel:o,continue:()=>(a==null||a(),s),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?g():m().then(g),s)}}var dX=e=>setTimeout(e,0);function fX(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=dX;const s=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var na=fX(),uc,zM,B4=(zM=class{constructor(){tn(this,uc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),eX(this.gcTime)&&Ct(this,uc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Fy?1/0:5*60*1e3))}clearGcTimeout(){je(this,uc)&&(clearTimeout(je(this,uc)),Ct(this,uc,void 0))}},uc=new WeakMap,zM),cd,dc,ni,fc,$r,Jm,hc,Ei,Os,qM,hX=(qM=class extends B4{constructor(t){super();tn(this,Ei);tn(this,cd);tn(this,dc);tn(this,ni);tn(this,fc);tn(this,$r);tn(this,Jm);tn(this,hc);Ct(this,hc,!1),Ct(this,Jm,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ct(this,fc,t.client),Ct(this,ni,je(this,fc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ct(this,cd,pX(this.options)),this.state=t.state??je(this,cd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=je(this,$r))==null?void 0:t.promise}setOptions(t){this.options={...je(this,Jm),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&je(this,ni).remove(this)}setData(t,n){const r=aX(this.state.data,t,this.options);return Rr(this,Ei,Os).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Rr(this,Ei,Os).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=je(this,$r))==null?void 0:r.promise;return(a=je(this,$r))==null||a.cancel(t),n?n.then(Ci).catch(Ci):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(je(this,cd))}isActive(){return this.observers.some(t=>nX(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===hN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>I1(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!tX(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=je(this,$r))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=je(this,$r))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),je(this,ni).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(je(this,$r)&&(je(this,hc)?je(this,$r).cancel({revert:!0}):je(this,$r).cancelRetry()),this.scheduleGc()),je(this,ni).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Rr(this,Ei,Os).call(this,{type:"invalidate"})}fetch(t,n){var u,f,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(je(this,$r))return je(this,$r).continueRetry(),je(this,$r).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Ct(this,hc,!0),r.signal)})},s=()=>{const h=M4(this.options,n),g=(()=>{const v={client:je(this,fc),queryKey:this.queryKey,meta:this.meta};return a(v),v})();return Ct(this,hc,!1),this.options.persister?this.options.persister(h,g,this):h(g)},l=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:je(this,fc),state:this.state,fetchFn:s};return a(h),h})();(u=this.options.behavior)==null||u.onFetch(l,this),Ct(this,dc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Rr(this,Ei,Os).call(this,{type:"fetch",meta:(d=l.fetchOptions)==null?void 0:d.meta});const c=h=>{var m,g,v,x;aw(h)&&h.silent||Rr(this,Ei,Os).call(this,{type:"error",error:h}),aw(h)||((g=(m=je(this,ni).config).onError)==null||g.call(m,h,this),(x=(v=je(this,ni).config).onSettled)==null||x.call(v,this.state.data,h,this)),this.scheduleGc()};return Ct(this,$r,F4({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var m,g,v,x;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(g=(m=je(this,ni).config).onSuccess)==null||g.call(m,h,this),(x=(v=je(this,ni).config).onSettled)==null||x.call(v,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,m)=>{Rr(this,Ei,Os).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{Rr(this,Ei,Os).call(this,{type:"pause"})},onContinue:()=>{Rr(this,Ei,Os).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),je(this,$r).start()}},cd=new WeakMap,dc=new WeakMap,ni=new WeakMap,fc=new WeakMap,$r=new WeakMap,Jm=new WeakMap,hc=new WeakMap,Ei=new WeakSet,Os=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...mX(r.data,this.options),fetchMeta:t.meta??null};case"success":return Ct(this,dc,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return aw(a)&&a.revert&&je(this,dc)?{...je(this,dc),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),na.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),je(this,ni).notify({query:this,type:"updated",action:t})})},qM);function mX(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$4(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function pX(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ts,WM,gX=(WM=class extends Ly{constructor(t={}){super();tn(this,ts);this.config=t,Ct(this,ts,new Map)}build(t,n,r){const a=n.queryKey,s=n.queryHash??fN(a,n);let o=this.get(s);return o||(o=new hX({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){je(this,ts).has(t.queryHash)||(je(this,ts).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=je(this,ts).get(t.queryHash);n&&(t.destroy(),n===t&&je(this,ts).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){na.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return je(this,ts).get(t)}getAll(){return[...je(this,ts).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>TP(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>TP(t,r)):n}notify(t){na.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){na.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){na.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ts=new WeakMap,WM),ns,Jr,mc,rs,Oo,HM,vX=(HM=class extends B4{constructor(t){super();tn(this,rs);tn(this,ns);tn(this,Jr);tn(this,mc);this.mutationId=t.mutationId,Ct(this,Jr,t.mutationCache),Ct(this,ns,[]),this.state=t.state||xX(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){je(this,ns).includes(t)||(je(this,ns).push(t),this.clearGcTimeout(),je(this,Jr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ct(this,ns,je(this,ns).filter(n=>n!==t)),this.scheduleGc(),je(this,Jr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){je(this,ns).length||(this.state.status==="pending"?this.scheduleGc():je(this,Jr).remove(this))}continue(){var t;return((t=je(this,mc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,l,c,u,f,d,h,m,g,v,x,y,b,w,j,k,_,S,E;const n=()=>{Rr(this,rs,Oo).call(this,{type:"continue"})};Ct(this,mc,F4({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(N,I)=>{Rr(this,rs,Oo).call(this,{type:"failed",failureCount:N,error:I})},onPause:()=>{Rr(this,rs,Oo).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>je(this,Jr).canRun(this)}));const r=this.state.status==="pending",a=!je(this,mc).canStart();try{if(r)n();else{Rr(this,rs,Oo).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(s=je(this,Jr).config).onMutate)==null?void 0:o.call(s,t,this));const I=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));I!==this.state.context&&Rr(this,rs,Oo).call(this,{type:"pending",context:I,variables:t,isPaused:a})}const N=await je(this,mc).start();return await((f=(u=je(this,Jr).config).onSuccess)==null?void 0:f.call(u,N,t,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,N,t,this.state.context)),await((g=(m=je(this,Jr).config).onSettled)==null?void 0:g.call(m,N,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,N,null,t,this.state.context)),Rr(this,rs,Oo).call(this,{type:"success",data:N}),N}catch(N){try{throw await((b=(y=je(this,Jr).config).onError)==null?void 0:b.call(y,N,t,this.state.context,this)),await((j=(w=this.options).onError)==null?void 0:j.call(w,N,t,this.state.context)),await((_=(k=je(this,Jr).config).onSettled)==null?void 0:_.call(k,void 0,N,this.state.variables,this.state.context,this)),await((E=(S=this.options).onSettled)==null?void 0:E.call(S,void 0,N,t,this.state.context)),N}finally{Rr(this,rs,Oo).call(this,{type:"error",error:N})}}finally{je(this,Jr).runNext(this)}}},ns=new WeakMap,Jr=new WeakMap,mc=new WeakMap,rs=new WeakSet,Oo=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),na.batch(()=>{je(this,ns).forEach(r=>{r.onMutationUpdate(t)}),je(this,Jr).notify({mutation:this,type:"updated",action:t})})},HM);function xX(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ls,Pi,Qm,VM,yX=(VM=class extends Ly{constructor(t={}){super();tn(this,Ls);tn(this,Pi);tn(this,Qm);this.config=t,Ct(this,Ls,new Set),Ct(this,Pi,new Map),Ct(this,Qm,0)}build(t,n,r){const a=new vX({mutationCache:this,mutationId:++Wp(this,Qm)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){je(this,Ls).add(t);const n=fg(t);if(typeof n=="string"){const r=je(this,Pi).get(n);r?r.push(t):je(this,Pi).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(je(this,Ls).delete(t)){const n=fg(t);if(typeof n=="string"){const r=je(this,Pi).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&je(this,Pi).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=fg(t);if(typeof n=="string"){const r=je(this,Pi).get(n),a=r==null?void 0:r.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=fg(t);if(typeof n=="string"){const a=(r=je(this,Pi).get(n))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){na.batch(()=>{je(this,Ls).forEach(t=>{this.notify({type:"removed",mutation:t})}),je(this,Ls).clear(),je(this,Pi).clear()})}getAll(){return Array.from(je(this,Ls))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>OP(n,r))}findAll(t={}){return this.getAll().filter(n=>OP(t,n))}notify(t){na.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return na.batch(()=>Promise.all(t.map(n=>n.continue().catch(Ci))))}},Ls=new WeakMap,Pi=new WeakMap,Qm=new WeakMap,VM);function fg(e){var t;return(t=e.options.scope)==null?void 0:t.id}function MP(e){return{onFetch:(t,n)=>{var f,d,h,m,g;const r=t.options,a=(h=(d=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,s=((m=t.state.data)==null?void 0:m.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const x=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},y=M4(t.options,t.fetchOptions),b=async(w,j,k)=>{if(v)return Promise.reject();if(j==null&&w.pages.length)return Promise.resolve(w);const S=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:j,direction:k?"backward":"forward",meta:t.options.meta};return x(P),P})(),E=await y(S),{maxPages:N}=t.options,I=k?sX:iX;return{pages:I(w.pages,E,N),pageParams:I(w.pageParams,j,N)}};if(a&&s.length){const w=a==="backward",j=w?bX:DP,k={pages:s,pageParams:o},_=j(r,k);l=await b(k,_,w)}else{const w=e??s.length;do{const j=c===0?o[0]??r.initialPageParam:DP(r,l);if(c>0&&j==null)break;l=await b(l,j),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var v,x;return(x=(v=t.options).persister)==null?void 0:x.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function DP(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function bX(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var qn,Ho,Vo,ud,dd,Ko,fd,hd,KM,wX=(KM=class{constructor(e={}){tn(this,qn);tn(this,Ho);tn(this,Vo);tn(this,ud);tn(this,dd);tn(this,Ko);tn(this,fd);tn(this,hd);Ct(this,qn,e.queryCache||new gX),Ct(this,Ho,e.mutationCache||new yX),Ct(this,Vo,e.defaultOptions||{}),Ct(this,ud,new Map),Ct(this,dd,new Map),Ct(this,Ko,0)}mount(){Wp(this,Ko)._++,je(this,Ko)===1&&(Ct(this,fd,D4.subscribe(async e=>{e&&(await this.resumePausedMutations(),je(this,qn).onFocus())})),Ct(this,hd,Vv.subscribe(async e=>{e&&(await this.resumePausedMutations(),je(this,qn).onOnline())})))}unmount(){var e,t;Wp(this,Ko)._--,je(this,Ko)===0&&((e=je(this,fd))==null||e.call(this),Ct(this,fd,void 0),(t=je(this,hd))==null||t.call(this),Ct(this,hd,void 0))}isFetching(e){return je(this,qn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return je(this,Ho).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=je(this,qn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=je(this,qn).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(I1(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return je(this,qn).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=je(this,qn).get(r.queryHash),s=a==null?void 0:a.state.data,o=ZY(t,s);if(o!==void 0)return je(this,qn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return na.batch(()=>je(this,qn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=je(this,qn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=je(this,qn);na.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=je(this,qn);return na.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=na.batch(()=>je(this,qn).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(Ci).catch(Ci)}invalidateQueries(e,t={}){return na.batch(()=>(je(this,qn).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=na.batch(()=>je(this,qn).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,n);return n.throwOnError||(s=s.catch(Ci)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Ci)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=je(this,qn).build(this,t);return n.isStaleByTime(I1(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ci).catch(Ci)}fetchInfiniteQuery(e){return e.behavior=MP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ci).catch(Ci)}ensureInfiniteQueryData(e){return e.behavior=MP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Vv.isOnline()?je(this,Ho).resumePausedMutations():Promise.resolve()}getQueryCache(){return je(this,qn)}getMutationCache(){return je(this,Ho)}getDefaultOptions(){return je(this,Vo)}setDefaultOptions(e){Ct(this,Vo,e)}setQueryDefaults(e,t){je(this,ud).set(em(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...je(this,ud).values()],n={};return t.forEach(r=>{tm(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){je(this,dd).set(em(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...je(this,dd).values()],n={};return t.forEach(r=>{tm(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...je(this,Vo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=fN(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===hN&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...je(this,Vo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){je(this,qn).clear(),je(this,Ho).clear()}},qn=new WeakMap,Ho=new WeakMap,Vo=new WeakMap,ud=new WeakMap,dd=new WeakMap,Ko=new WeakMap,fd=new WeakMap,hd=new WeakMap,KM),jX=p.createContext(void 0),_X=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(jX.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nm(){return nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nm.apply(this,arguments)}var Xo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Xo||(Xo={}));const $P="popstate";function kX(e){e===void 0&&(e={});function t(r,a){let{pathname:s,search:o,hash:l}=r.location;return M1("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Kv(a)}return NX(t,n,null,e)}function sr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function U4(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function SX(){return Math.random().toString(36).substr(2,8)}function LP(e,t){return{usr:e.state,key:e.key,idx:t}}function M1(e,t,n,r){return n===void 0&&(n=null),nm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?rf(t):t,{state:n,key:t&&t.key||r||SX()})}function Kv(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function rf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function NX(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:s=!1}=r,o=a.history,l=Xo.Pop,c=null,u=f();u==null&&(u=0,o.replaceState(nm({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function d(){l=Xo.Pop;let x=f(),y=x==null?null:x-u;u=x,c&&c({action:l,location:v.location,delta:y})}function h(x,y){l=Xo.Push;let b=M1(v.location,x,y);u=f()+1;let w=LP(b,u),j=v.createHref(b);try{o.pushState(w,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(j)}s&&c&&c({action:l,location:v.location,delta:1})}function m(x,y){l=Xo.Replace;let b=M1(v.location,x,y);u=f();let w=LP(b,u),j=v.createHref(b);o.replaceState(w,"",j),s&&c&&c({action:l,location:v.location,delta:0})}function g(x){let y=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof x=="string"?x:Kv(x);return b=b.replace(/ $/,"%20"),sr(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let v={get action(){return l},get location(){return e(a,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener($P,d),c=x,()=>{a.removeEventListener($P,d),c=null}},createHref(x){return t(a,x)},createURL:g,encodeLocation(x){let y=g(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(x){return o.go(x)}};return v}var FP;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(FP||(FP={}));function CX(e,t,n){return n===void 0&&(n="/"),AX(e,t,n,!1)}function AX(e,t,n,r){let a=typeof t=="string"?rf(t):t,s=mN(a.pathname||"/",n);if(s==null)return null;let o=z4(e);EX(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=BX(s);l=LX(o[c],u,r)}return l}function z4(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(sr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=sl([r,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(sr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),z4(s.children,t,f,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:DX(u,s.index),routesMeta:f})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of q4(s.path))a(s,o,c)}),t}function q4(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return a?[s,""]:[s];let o=q4(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function EX(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:$X(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const PX=/^:[\w-]+$/,TX=3,OX=2,IX=1,RX=10,MX=-2,BP=e=>e==="*";function DX(e,t){let n=e.split("/"),r=n.length;return n.some(BP)&&(r+=MX),t&&(r+=OX),n.filter(a=>!BP(a)).reduce((a,s)=>a+(PX.test(s)?TX:s===""?IX:RX),r)}function $X(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function LX(e,t,n){let{routesMeta:r}=e,a={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,f=s==="/"?t:t.slice(s.length)||"/",d=UP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=UP({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!d)return null;Object.assign(a,d.params),o.push({params:a,pathname:sl([s,d.pathname]),pathnameBase:WX(sl([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=sl([s,d.pathnameBase]))}return o}function UP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=FX(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((u,f,d)=>{let{paramName:h,isOptional:m}=f;if(h==="*"){let v=l[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[d];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function FX(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),U4(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function BX(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return U4(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function mN(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function UX(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?rf(e):e;return{pathname:n?n.startsWith("/")?n:zX(n,t):t,search:HX(r),hash:VX(a)}}function zX(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function iw(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qX(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function W4(e,t){let n=qX(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function H4(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=rf(e):(a=nm({},e),sr(!a.pathname||!a.pathname.includes("?"),iw("?","pathname","search",a)),sr(!a.pathname||!a.pathname.includes("#"),iw("#","pathname","hash",a)),sr(!a.search||!a.search.includes("#"),iw("#","search","hash",a)));let s=e===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;a.pathname=h.join("/")}l=d>=0?t[d]:"/"}let c=UX(a,l),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const sl=e=>e.join("/").replace(/\/\/+/g,"/"),WX=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),HX=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,VX=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function KX(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const V4=["post","put","patch","delete"];new Set(V4);const GX=["get",...V4];new Set(GX);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rm(){return rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rm.apply(this,arguments)}const pN=p.createContext(null),YX=p.createContext(null),Gc=p.createContext(null),By=p.createContext(null),_l=p.createContext({outlet:null,matches:[],isDataRoute:!1}),K4=p.createContext(null);function XX(e,t){let{relative:n}=t===void 0?{}:t;dp()||sr(!1);let{basename:r,navigator:a}=p.useContext(Gc),{hash:s,pathname:o,search:l}=Y4(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:sl([r,o])),a.createHref({pathname:c,search:l,hash:s})}function dp(){return p.useContext(By)!=null}function kl(){return dp()||sr(!1),p.useContext(By).location}function G4(e){p.useContext(Gc).static||p.useLayoutEffect(e)}function Ka(){let{isDataRoute:e}=p.useContext(_l);return e?uJ():JX()}function JX(){dp()||sr(!1);let e=p.useContext(pN),{basename:t,future:n,navigator:r}=p.useContext(Gc),{matches:a}=p.useContext(_l),{pathname:s}=kl(),o=JSON.stringify(W4(a,n.v7_relativeSplatPath)),l=p.useRef(!1);return G4(()=>{l.current=!0}),p.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=H4(u,JSON.parse(o),s,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:sl([t,d.pathname])),(f.replace?r.replace:r.push)(d,f.state,f)},[t,r,o,s,e])}function QX(){let{matches:e}=p.useContext(_l),t=e[e.length-1];return t?t.params:{}}function Y4(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=p.useContext(Gc),{matches:a}=p.useContext(_l),{pathname:s}=kl(),o=JSON.stringify(W4(a,r.v7_relativeSplatPath));return p.useMemo(()=>H4(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function ZX(e,t){return eJ(e,t)}function eJ(e,t,n,r){dp()||sr(!1);let{navigator:a}=p.useContext(Gc),{matches:s}=p.useContext(_l),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=kl(),f;if(t){var d;let x=typeof t=="string"?rf(t):t;c==="/"||(d=x.pathname)!=null&&d.startsWith(c)||sr(!1),f=x}else f=u;let h=f.pathname||"/",m=h;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=CX(e,{pathname:m}),v=iJ(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:sl([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:sl([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return t&&v?p.createElement(By.Provider,{value:{location:rm({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Xo.Pop}},v):v}function tJ(){let e=cJ(),t=KX(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:a},n):null,null)}const nJ=p.createElement(tJ,null);class rJ extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement(_l.Provider,{value:this.props.routeContext},p.createElement(K4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aJ(e){let{routeContext:t,match:n,children:r}=e,a=p.useContext(pN);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(_l.Provider,{value:t},r)}function iJ(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let f=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);f>=0||sr(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:m}=n,g=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,d,h)=>{let m,g=!1,v=null,x=null;n&&(m=l&&d.route.id?l[d.route.id]:void 0,v=d.route.errorElement||nJ,c&&(u<0&&h===0?(g=!0,x=null):u===h&&(g=!0,x=d.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,h+1)),b=()=>{let w;return m?w=v:g?w=x:d.route.Component?w=p.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=f,p.createElement(aJ,{match:d,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?p.createElement(rJ,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var X4=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(X4||{}),Gv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Gv||{});function sJ(e){let t=p.useContext(pN);return t||sr(!1),t}function oJ(e){let t=p.useContext(YX);return t||sr(!1),t}function lJ(e){let t=p.useContext(_l);return t||sr(!1),t}function J4(e){let t=lJ(),n=t.matches[t.matches.length-1];return n.route.id||sr(!1),n.route.id}function cJ(){var e;let t=p.useContext(K4),n=oJ(Gv.UseRouteError),r=J4(Gv.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function uJ(){let{router:e}=sJ(X4.UseNavigateStable),t=J4(Gv.UseNavigateStable),n=p.useRef(!1);return G4(()=>{n.current=!0}),p.useCallback(function(a,s){s===void 0&&(s={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,rm({fromRouteId:t},s)))},[e,t])}function dJ(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ta(e){sr(!1)}function fJ(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Xo.Pop,navigator:s,static:o=!1,future:l}=e;dp()&&sr(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:s,static:o,future:rm({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=rf(r));let{pathname:f="/",search:d="",hash:h="",state:m=null,key:g="default"}=r,v=p.useMemo(()=>{let x=mN(f,c);return x==null?null:{location:{pathname:x,search:d,hash:h,state:m,key:g},navigationType:a}},[c,f,d,h,m,g,a]);return v==null?null:p.createElement(Gc.Provider,{value:u},p.createElement(By.Provider,{children:n,value:v}))}function hJ(e){let{children:t,location:n}=e;return ZX(D1(t),n)}new Promise(()=>{});function D1(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,a)=>{if(!p.isValidElement(r))return;let s=[...t,a];if(r.type===p.Fragment){n.push.apply(n,D1(r.props.children,s));return}r.type!==Ta&&sr(!1),!r.props.index||!r.props.children||sr(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=D1(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $1(){return $1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$1.apply(this,arguments)}function mJ(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function pJ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gJ(e,t){return e.button===0&&(!t||t==="_self")&&!pJ(e)}function L1(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function vJ(e,t){let n=L1(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(s=>{n.append(a,s)})}),n}const xJ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yJ="6";try{window.__reactRouterVersion=yJ}catch{}const bJ="startTransition",zP=eS[bJ];function wJ(e){let{basename:t,children:n,future:r,window:a}=e,s=p.useRef();s.current==null&&(s.current=kX({window:a,v5Compat:!0}));let o=s.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},f=p.useCallback(d=>{u&&zP?zP(()=>c(d)):c(d)},[c,u]);return p.useLayoutEffect(()=>o.listen(f),[o,f]),p.useEffect(()=>dJ(r),[r]),p.createElement(fJ,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const jJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_J=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qP=p.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:f,viewTransition:d}=t,h=mJ(t,xJ),{basename:m}=p.useContext(Gc),g,v=!1;if(typeof u=="string"&&_J.test(u)&&(g=u,jJ))try{let w=new URL(window.location.href),j=u.startsWith("//")?new URL(w.protocol+u):new URL(u),k=mN(j.pathname,m);j.origin===w.origin&&k!=null?u=k+j.search+j.hash:v=!0}catch{}let x=XX(u,{relative:a}),y=kJ(u,{replace:o,state:l,target:c,preventScrollReset:f,relative:a,viewTransition:d});function b(w){r&&r(w),w.defaultPrevented||y(w)}return p.createElement("a",$1({},h,{href:g||x,onClick:v||s?r:b,ref:n,target:c}))});var WP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(WP||(WP={}));var HP;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(HP||(HP={}));function kJ(e,t){let{target:n,replace:r,state:a,preventScrollReset:s,relative:o,viewTransition:l}=t===void 0?{}:t,c=Ka(),u=kl(),f=Y4(e,{relative:o});return p.useCallback(d=>{if(gJ(d,n)){d.preventDefault();let h=r!==void 0?r:Kv(u)===Kv(f);c(e,{replace:h,state:a,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,f,r,a,n,e,s,o,l])}function gN(e){let t=p.useRef(L1(e)),n=p.useRef(!1),r=kl(),a=p.useMemo(()=>vJ(r.search,n.current?null:t.current),[r.search]),s=Ka(),o=p.useCallback((l,c)=>{const u=L1(typeof l=="function"?l(a):l);n.current=!0,s("?"+u,c)},[s,a]);return[a,o]}const SJ="modulepreload",NJ=function(e){return"/"+e},VP={},Ys=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=NJ(c),c in VP)return;VP[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":SJ,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},CJ=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ys(async()=>{const{default:r}=await Promise.resolve().then(()=>af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class vN extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class AJ extends vN{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class KP extends vN{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class GP extends vN{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var F1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(F1||(F1={}));var EJ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class PJ{constructor(t,{headers:n={},customFetch:r,region:a=F1.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=CJ(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return EJ(this,void 0,void 0,function*(){try{const{headers:a,method:s,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let f;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(l["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(l["Content-Type"]="application/json",f=JSON.stringify(o)));const d=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:f}).catch(v=>{throw new AJ(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new KP(d);if(!d.ok)throw new GP(d);let m=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield d.json():m==="application/octet-stream"?g=yield d.blob():m==="text/event-stream"?g=d:m==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null,response:d}}catch(a){return{data:null,error:a,response:a instanceof GP||a instanceof KP?a.context:void 0}}})}}var va={},xN={},Uy={},fp={},zy={},qy={},TJ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_d=TJ();const OJ=_d.fetch,Q4=_d.fetch.bind(_d),Z4=_d.Headers,IJ=_d.Request,RJ=_d.Response,af=Object.freeze(Object.defineProperty({__proto__:null,Headers:Z4,Request:IJ,Response:RJ,default:Q4,fetch:OJ},Symbol.toStringTag,{value:"Module"})),MJ=d9(af);var Wy={};Object.defineProperty(Wy,"__esModule",{value:!0});let DJ=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Wy.default=DJ;var eF=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qy,"__esModule",{value:!0});const $J=eF(MJ),LJ=eF(Wy);let FJ=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=$J.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,l,c;let u=null,f=null,d=null,h=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=y:f=JSON.parse(y))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,d=null,h=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const v=await s.text();try{u=JSON.parse(v),Array.isArray(u)&&s.status===404&&(f=[],u=null,h=200,m="OK")}catch{s.status===404&&v===""?(h=204,m="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,m="OK"),u&&this.shouldThrowOnError)throw new LJ.default(u)}return{error:u,data:f,count:d,status:h,statusText:m}});return this.shouldThrowOnError||(a=a.catch(s=>{var o,l,c;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};qy.default=FJ;var BJ=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zy,"__esModule",{value:!0});const UJ=BJ(qy);let zJ=class extends UJ.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:s=a}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const s=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:s=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};zy.default=zJ;var qJ=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fp,"__esModule",{value:!0});const WJ=qJ(zy);let HJ=class extends WJ.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let s="";a==="plain"?s="pl":a==="phrase"?s="ph":a==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};fp.default=HJ;var VJ=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Uy,"__esModule",{value:!0});const Mf=VJ(fp);let KJ=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=n,this.schema=r,this.fetch=a}select(t,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Mf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const a="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Mf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:s=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new Mf.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new Mf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Mf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Uy.default=KJ;var Hy={},Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});Vy.version=void 0;Vy.version="0.0.0-automated";Object.defineProperty(Hy,"__esModule",{value:!0});Hy.DEFAULT_HEADERS=void 0;const GJ=Vy;Hy.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${GJ.version}`};var tF=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xN,"__esModule",{value:!0});const YJ=tF(Uy),XJ=tF(fp),JJ=Hy;let QJ=class nF{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},JJ.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new YJ.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new nF(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:s}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;r||a?(o=r?"HEAD":"GET",Object.entries(n).filter(([f,d])=>d!==void 0).map(([f,d])=>[f,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([f,d])=>{l.searchParams.append(f,d)})):(o="POST",c=n);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new XJ.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};xN.default=QJ;var sf=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(va,"__esModule",{value:!0});va.PostgrestError=va.PostgrestBuilder=va.PostgrestTransformBuilder=va.PostgrestFilterBuilder=va.PostgrestQueryBuilder=va.PostgrestClient=void 0;const rF=sf(xN);va.PostgrestClient=rF.default;const aF=sf(Uy);va.PostgrestQueryBuilder=aF.default;const iF=sf(fp);va.PostgrestFilterBuilder=iF.default;const sF=sf(zy);va.PostgrestTransformBuilder=sF.default;const oF=sf(qy);va.PostgrestBuilder=oF.default;const lF=sf(Wy);va.PostgrestError=lF.default;var ZJ=va.default={PostgrestClient:rF.default,PostgrestQueryBuilder:aF.default,PostgrestFilterBuilder:iF.default,PostgrestTransformBuilder:sF.default,PostgrestBuilder:oF.default,PostgrestError:lF.default};const{PostgrestClient:eQ,PostgrestQueryBuilder:n3e,PostgrestFilterBuilder:r3e,PostgrestTransformBuilder:a3e,PostgrestBuilder:i3e,PostgrestError:s3e}=ZJ;class tQ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const nQ="2.15.1",rQ=`realtime-js/${nQ}`,aQ="1.0.0",B1=1e4,iQ=1e3,sQ=100;var wh;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(wh||(wh={}));var ur;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ur||(ur={}));var Oi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Oi||(Oi={}));var U1;(function(e){e.websocket="websocket"})(U1||(U1={}));var Zl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Zl||(Zl={}));class oQ{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class cF{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var jn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(jn||(jn={}));const YP=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,o)=>(s[o]=lQ(o,e,t,a),s),{})},lQ=(e,t,n,r)=>{const a=t.find(l=>l.name===e),s=a==null?void 0:a.type,o=n[e];return s&&!r.includes(s)?uF(s,o):z1(o)},uF=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return fQ(t,n)}switch(e){case jn.bool:return cQ(t);case jn.float4:case jn.float8:case jn.int2:case jn.int4:case jn.int8:case jn.numeric:case jn.oid:return uQ(t);case jn.json:case jn.jsonb:return dQ(t);case jn.timestamp:return hQ(t);case jn.abstime:case jn.date:case jn.daterange:case jn.int4range:case jn.int8range:case jn.money:case jn.reltime:case jn.text:case jn.time:case jn.timestamptz:case jn.timetz:case jn.tsrange:case jn.tstzrange:return z1(t);default:return z1(t)}},z1=e=>e,cQ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},uQ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},dQ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},fQ=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>uF(t,l))}return e},hQ=e=>typeof e=="string"?e.replace(" ","T"):e,dF=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class sw{constructor(t,n,r={},a=B1){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var XP;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(XP||(XP={}));class jh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jh.syncState(this.state,a,s,o),this.pendingDiffs.forEach(c=>{this.state=jh.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=jh.syncDiff(this.state,a,s,o),l())}),this.onJoin((a,s,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:o})}),this.onLeave((a,s,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const s=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(s,(u,f)=>{o[u]||(c[u]=f)}),this.map(o,(u,f)=>{const d=s[u];if(d){const h=f.map(x=>x.presence_ref),m=d.map(x=>x.presence_ref),g=f.filter(x=>m.indexOf(x.presence_ref)<0),v=d.filter(x=>h.indexOf(x.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=f}),this.syncDiff(s,{joins:l,leaves:c},r,a)}static syncDiff(t,n,r,a){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(s,(l,c)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),f.length>0){const d=t[l].map(m=>m.presence_ref),h=f.filter(m=>d.indexOf(m.presence_ref)<0);t[l].unshift(...h)}r(l,f,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const f=c.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var JP;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(JP||(JP={}));var _h;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(_h||(_h={}));var Ms;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ms||(Ms={}));class yN{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ur.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new sw(this,Oi.join,this.params,this.timeout),this.rejoinTimer=new cF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ur.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ur.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Oi.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new jh(this),this.broadcastEndpointURL=dF(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ur.closed){const{config:{broadcast:s,presence:o,private:l}}=this.params,c=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[_h.PRESENCE]&&this.bindings[_h.PRESENCE].length>0,f={},d={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(Ms.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(Ms.CLOSED)),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var m;if(this.socket.setAuth(),h===void 0){t==null||t(Ms.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,x=[];for(let y=0;y<v;y++){const b=g[y],{filter:{event:w,schema:j,table:k,filter:_}}=b,S=h&&h[y];if(S&&S.event===w&&S.schema===j&&S.table===k&&S.filter===_)x.push(Object.assign(Object.assign({},b),{id:S.id}));else{this.unsubscribe(),this.state=ur.errored,t==null||t(Ms.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Ms.SUBSCRIBED);return}}).receive("error",h=>{this.state=ur.errored,t==null||t(Ms.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ms.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ur.joined&&t===_h.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ur.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Oi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new sw(this,Oi.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ur.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,s=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(s),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new sw(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>sQ){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,s;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:f}=Oi;if(r&&[l,c,u,f].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,v,x;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(m=>m.callback(h,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var g,v,x,y,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const j=m.id,k=(g=m.filter)===null||g===void 0?void 0:g.event;return j&&((v=n.ids)===null||v===void 0?void 0:v.includes(j))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const j=(b=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return j==="*"||j===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:x,commit_timestamp:y,type:b,errors:w}=g;h=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:y,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(h,r)})}_isClosed(){return this.state===ur.closed}_isJoined(){return this.state===ur.joined}_isJoining(){return this.state===ur.joining}_isLeaving(){return this.state===ur.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),s={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&yN.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Oi.close,{},t)}_onError(t){this._on(Oi.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ur.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=YP(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=YP(t.columns,t.old_record)),n}}const QP=()=>{},hg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mQ=[1e3,2e3,5e3,1e4],pQ=1e4,gQ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vQ{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=B1,this.transport=null,this.heartbeatIntervalMs=hg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=QP,this.ref=0,this.reconnectTimer=null,this.logger=QP,this.conn=null,this.sendBuffer=[],this.serializer=new oQ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let s;return a?s=a:typeof fetch>"u"?s=(...o)=>Ys(async()=>{const{default:l}=await Promise.resolve().then(()=>af);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${U1.websocket}`,this.httpEndpoint=dF(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tQ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:aQ}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case wh.connecting:return Zl.Connecting;case wh.open:return Zl.Open;case wh.closing:return Zl.Closing;default:return Zl.Closed}}isConnected(){return this.connectionState()===Zl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(s=>s.topic===r);if(a)return a;{const s=new yN(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:a,ref:s}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${s})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(iQ,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},hg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:s,ref:o}=n,l=o?`(${o})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Oi.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([gQ],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:rQ};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Oi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new cF(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,s,o,l,c,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:B1,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:hg.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:f=>mQ[f-1]||pQ,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(f,d)=>d(JSON.stringify(f)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class bN extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function dr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class xQ extends bN{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class q1 extends bN{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var yQ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const fF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ys(async()=>{const{default:r}=await Promise.resolve().then(()=>af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},bQ=()=>yQ(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ys(()=>Promise.resolve().then(()=>af),void 0)).Response:Response}),W1=e=>{if(Array.isArray(e))return e.map(n=>W1(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=W1(r)}),t},wQ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Yc=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const ow=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jQ=(e,t,n)=>Yc(void 0,void 0,void 0,function*(){const r=yield bQ();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const s=e.status||500,o=(a==null?void 0:a.statusCode)||s+"";t(new xQ(ow(a),s,o))}).catch(a=>{t(new q1(ow(a),a))}):t(new q1(ow(e),e))}),_Q=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(wQ(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function hp(e,t,n,r,a,s){return Yc(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,_Q(t,r,a,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>jQ(c,l,r))})})}function Yv(e,t,n,r){return Yc(this,void 0,void 0,function*(){return hp(e,"GET",t,n,r)})}function Zi(e,t,n,r,a){return Yc(this,void 0,void 0,function*(){return hp(e,"POST",t,r,a,n)})}function H1(e,t,n,r,a){return Yc(this,void 0,void 0,function*(){return hp(e,"PUT",t,r,a,n)})}function kQ(e,t,n,r){return Yc(this,void 0,void 0,function*(){return hp(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function hF(e,t,n,r,a){return Yc(this,void 0,void 0,function*(){return hp(e,"DELETE",t,r,a,n)})}var Yr=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const SQ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ZP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class NQ{constructor(t,n={},r,a){this.url=t,this.headers=n,this.bucketId=r,this.fetch=fF(a)}uploadOrUpdate(t,n,r,a){return Yr(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},ZP),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),d=yield(t=="PUT"?H1:Zi)(this.fetch,`${this.url}/object/${f}`,s,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(dr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return Yr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return Yr(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:ZP.upsert},a),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const d=yield H1(this.fetch,l.toString(),c,{headers:f});return{data:{path:s,fullPath:d.Key},error:null}}catch(c){if(dr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Yr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const s=yield Zi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new bN("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}update(t,n,r){return Yr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Yr(this,void 0,void 0,function*(){try{return{data:yield Zi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}copy(t,n,r){return Yr(this,void 0,void 0,function*(){try{return{data:{path:(yield Zi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return Yr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),s=yield Zi(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return Yr(this,void 0,void 0,function*(){try{const a=yield Zi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}download(t,n){return Yr(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Yv(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(dr(l))return{data:null,error:l};throw l}})}info(t){return Yr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Yv(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:W1(r),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}exists(t){return Yr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield kQ(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(dr(r)&&r instanceof q1){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&a.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Yr(this,void 0,void 0,function*(){try{return{data:yield hF(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}list(t,n,r){return Yr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},SQ),n),{prefix:t||""});return{data:yield Zi(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}listV2(t,n){return Yr(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Zi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const CQ="2.11.0",AQ={"X-Client-Info":`storage-js/${CQ}`};var iu=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class EQ{constructor(t,n={},r,a){const s=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},AQ),n),this.fetch=fF(r)}listBuckets(){return iu(this,void 0,void 0,function*(){try{return{data:yield Yv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(dr(t))return{data:null,error:t};throw t}})}getBucket(t){return iu(this,void 0,void 0,function*(){try{return{data:yield Yv(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return iu(this,void 0,void 0,function*(){try{return{data:yield Zi(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return iu(this,void 0,void 0,function*(){try{return{data:yield H1(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return iu(this,void 0,void 0,function*(){try{return{data:yield Zi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return iu(this,void 0,void 0,function*(){try{return{data:yield hF(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}}class PQ extends EQ{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new NQ(this.url,this.headers,t,this.fetch)}}const TQ="2.55.0";let sh="";typeof Deno<"u"?sh="deno":typeof document<"u"?sh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sh="react-native":sh="node";const OQ={"X-Client-Info":`supabase-js-${sh}/${TQ}`},IQ={headers:OQ},RQ={schema:"public"},MQ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DQ={};var $Q=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const LQ=e=>{let t;return e?t=e:typeof fetch>"u"?t=Q4:t=fetch,(...n)=>t(...n)},FQ=()=>typeof Headers>"u"?Z4:Headers,BQ=(e,t,n)=>{const r=LQ(n),a=FQ();return(s,o)=>$Q(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var UQ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function zQ(e){return e.endsWith("/")?e:e+"/"}function qQ(e,t){var n,r;const{db:a,auth:s,realtime:o,global:l}=e,{db:c,auth:u,realtime:f,global:d}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},f),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>UQ(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const mF="2.71.1",wu=30*1e3,V1=3,lw=V1*wu,WQ="http://localhost:9999",HQ="supabase.auth.token",VQ={"X-Client-Info":`gotrue-js/${mF}`},K1="X-Supabase-Api-Version",pF={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},KQ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,GQ=10*60*1e3;class wN extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function At(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class YQ extends wN{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function XQ(e){return At(e)&&e.name==="AuthApiError"}class gF extends wN{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Sl extends wN{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Io extends Sl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function JQ(e){return At(e)&&e.name==="AuthSessionMissingError"}class mg extends Sl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pg extends Sl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class gg extends Sl{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function QQ(e){return At(e)&&e.name==="AuthImplicitGrantRedirectError"}class eT extends Sl{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class G1 extends Sl{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function cw(e){return At(e)&&e.name==="AuthRetryableFetchError"}class tT extends Sl{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Y1 extends Sl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nT=` 	
\r=`.split(""),ZQ=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<nT.length;t+=1)e[nT[t].charCodeAt(0)]=-2;for(let t=0;t<Xv.length;t+=1)e[Xv[t].charCodeAt(0)]=t;return e})();function rT(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Xv[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Xv[r]),t.queuedBits-=6}}function vF(e,t,n){const r=ZQ[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function aT(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=o=>{nZ(o,r,n)};for(let o=0;o<e.length;o+=1)vF(e.charCodeAt(o),a,s);return t.join("")}function eZ(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function tZ(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}eZ(r,t)}}function nZ(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function rZ(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)vF(e.charCodeAt(a),n,r);return new Uint8Array(t)}function aZ(e){const t=[];return tZ(e,n=>t.push(n)),new Uint8Array(t)}function iZ(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>rT(a,n,r)),rT(null,n,r),t.join("")}function sZ(e){return Math.round(Date.now()/1e3)+e}function oZ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ki=()=>typeof window<"u"&&typeof document<"u",Bl={tested:!1,writable:!1},xF=()=>{if(!ki())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bl.tested)return Bl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Bl.tested=!0,Bl.writable=!0}catch{Bl.tested=!0,Bl.writable=!1}return Bl.writable};function lZ(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const yF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ys(async()=>{const{default:r}=await Promise.resolve().then(()=>af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},cZ=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ju=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ul=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Eo=async(e,t)=>{await e.removeItem(t)};class Ky{constructor(){this.promise=new Ky.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Ky.promiseConstructor=Promise;function uw(e){const t=e.split(".");if(t.length!==3)throw new Y1("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!KQ.test(t[r]))throw new Y1("JWT not in base64url format");return{header:JSON.parse(aT(t[0])),payload:JSON.parse(aT(t[1])),signature:rZ(t[2]),raw:{header:t[0],payload:t[1]}}}async function uZ(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function dZ(e,t){return new Promise((r,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){a(o);return}}})()})}function fZ(e){return("0"+e.toString(16)).substr(-2)}function hZ(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let s=0;s<56;s++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,fZ).join("")}async function mZ(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function pZ(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await mZ(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function su(e,t,n=!1){const r=hZ();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await ju(e,`${t}-code-verifier`,a);const s=await pZ(r);return[s,r===s?"plain":"s256"]}const gZ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vZ(e){const t=e.headers.get(K1);if(!t||!t.match(gZ))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function xZ(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function yZ(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bZ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ou(e){if(!bZ.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function dw(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function iT(e){return JSON.parse(JSON.stringify(e))}var wZ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Vl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),jZ=[502,503,504];async function sT(e){var t;if(!cZ(e))throw new G1(Vl(e),0);if(jZ.includes(e.status))throw new G1(Vl(e),e.status);let n;try{n=await e.json()}catch(s){throw new gF(Vl(s),s)}let r;const a=vZ(e);if(a&&a.getTime()>=pF["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new tT(Vl(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Io}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new tT(Vl(n),e.status,n.weak_password.reasons);throw new YQ(Vl(n),e.status||500,r)}const _Z=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function qt(e,t,n,r){var a;const s=Object.assign({},r==null?void 0:r.headers);s[K1]||(s[K1]=pF["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await kZ(e,t,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function kZ(e,t,n,r,a,s){const o=_Z(t,r,a,s);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new G1(Vl(c),0)}if(l.ok||await sT(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await sT(c)}}function Is(e){var t;let n=null;AZ(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=sZ(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function oT(e){const t=Is(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Uo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function SZ(e){return{data:e,error:null}}function NZ(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s}=e,o=wZ(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function CZ(e){return e}function AZ(e){return e.access_token&&e.refresh_token&&e.expires_in}const fw=["global","local","others"];var EZ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class PZ{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=yF(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=fw[0]){if(fw.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fw.join(", ")}`);try{return await qt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await qt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Uo})}catch(r){if(At(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=EZ(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await qt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:NZ,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(At(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await qt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Uo})}catch(n){if(At(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,s,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await qt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:CZ});if(f.error)throw f.error;const d=await f.json(),h=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(At(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ou(t);try{return await qt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Uo})}catch(n){if(At(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ou(t);try{return await qt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Uo})}catch(r){if(At(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){ou(t);try{return await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Uo})}catch(r){if(At(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){ou(t.userId);try{const{data:n,error:r}=await qt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(At(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ou(t.userId),ou(t.id);try{return{data:await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}}}function lT(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function TZ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const lu={debug:!!(globalThis&&xF()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bF extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class OZ extends bF{}async function IZ(e,t,n){lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),lu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new OZ(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(lu.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}TZ();const RZ={url:WQ,storageKey:HQ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:VQ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function cT(e,t,n){return await n()}const cu={};class am{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=am.nextInstanceID,am.nextInstanceID+=1,this.instanceID>0&&ki()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},RZ),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new PZ({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=yF(a.fetch),this.lock=a.lock||cT,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ki()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=IZ:this.lock=cT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:xF()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lT(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=lT(this.memoryStorage)),ki()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=cu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){cu[this.storageKey]=Object.assign(Object.assign({},cu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=cu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){cu[this.storageKey]=Object.assign(Object.assign({},cu[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${mF}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=lZ(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ki()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),QQ(s)){const c=(t=s.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return At(n)?{error:n}:{error:new gF("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const s=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Is}),{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(At(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,a;try{let s;if("email"in t){const{email:f,password:d,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await su(this.storage,this.storageKey)),s=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:f,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:Is})}else if("phone"in t){const{phone:f,password:d,options:h}=t;s=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Is})}else throw new pg("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(At(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:o,options:l}=t;n=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:oT})}else if("phone"in t){const{phone:s,password:o,options:l}=t;n=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:oT})}else throw new pg("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new mg}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(At(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,a,s,o,l,c,u,f,d,h,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:x,wallet:y,statement:b,options:w}=t;let j;if(ki())if(typeof y=="object")j=y;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))j=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=y}const k=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const _=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),b?{statement:b}:null));let S;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")S=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)S=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),v=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(a=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((d=(f=w==null?void 0:w.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...w.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const _=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=_}}try{const{data:x,error:y}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:iZ(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Is});if(y)throw y;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new mg}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:y})}catch(x){if(At(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await Ul(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:s,error:o}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Is});if(await Eo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new mg}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:o})}catch(s){if(At(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:s,nonce:o}=t,l=await qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Is}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new mg}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(At(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,s,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await su(this.storage,this.storageKey));const{error:d}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:f}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new pg("You must provide either an email or phone number.")}catch(l){if(At(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,s;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await qt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:Is});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(At(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await su(this.storage,this.storageKey)),await qt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:SZ})}catch(s){if(At(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Io;const{error:a}=await qt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(At(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:s}=t,{error:o}=await qt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:s}=t,{data:o,error:l}=await qt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new pg("You must provide either an email or phone number and a type")}catch(n){if(At(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ul(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<lw:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Ul(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=dw()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,f)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,f))})}return{data:{session:t},error:null}}const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Uo}):await this._useSession(async n=>{var r,a,s;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Io}:await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:Uo})})}catch(n){if(At(n))return JQ(n)&&(await this._removeSession(),await Eo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:s}=r;if(s)throw s;if(!a.session)throw new Io;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await su(this.storage,this.storageKey));const{data:u,error:f}=await qt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Uo});if(f)throw f;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(At(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Io;const n=Date.now()/1e3;let r=n,a=!0,s=null;const{payload:o}=uw(t.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(At(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Io;const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(At(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!ki())throw new gg("No browser detected.");if(t.error||t.error_description||t.error_code)throw new gg(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new eT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gg("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new eT("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!s||!l||!o||!u)throw new gg("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(l);let h=f+d;c&&(h=parseInt(c));const m=h-f;m*1e3<=wu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const g=h-d;f-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,f):f-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,f);const{data:v,error:x}=await this._getUser(s);if(x)throw x;const y={provider_token:r,provider_refresh_token:a,access_token:s,expires_in:d,expires_at:h,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if(At(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ul(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:s}=n;if(s)return{error:s};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(XQ(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Eo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=oZ(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await su(this.storage,this.storageKey,!0));try{return await qt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(At(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:a}=await this._useSession(async s=>{var o,l,c,u,f;const{data:d,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await qt(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(a)throw a;return ki()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(At(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:s,error:o}=n;if(o)throw o;return await qt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(At(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await dZ(async a=>(a>0&&await uZ(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await qt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Is})),(a,s)=>{const o=200*Math.pow(2,a);return s&&cw(s)&&Date.now()+o-r<wu})}catch(r){if(this._debug(n,"error",r),At(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),ki()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Ul(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Ul(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await ju(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:dw()}else if(a&&!a.user&&!a.user){const o=await Ul(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Eo(this.storage,this.storageKey+"-user"),await ju(this.storage,this.storageKey,a)):a.user=dw()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const s=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<lw;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${lw}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),cw(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Io;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ky;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new Io;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(a,"error",s),At(s)){const o={session:null,error:s};return cw(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ju(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const s=iT(a);await ju(this.storage,this.storageKey,s)}else{const a=iT(n);await ju(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Eo(this.storage,this.storageKey),await Eo(this.storage,this.storageKey+"-code-verifier"),await Eo(this.storage,this.storageKey+"-user"),this.userStorage&&await Eo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ki()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),wu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/wu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${wu}ms, refresh threshold is ${V1} ticks`),a<=V1&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof bF)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ki()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await su(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);a.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;return s?{data:null,error:s}:await qt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(At(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:s,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await qt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(At(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:l}=await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(At(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;return s?{data:null,error:s}:await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(At(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:s}=t;if(s)return{data:null,error:s};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=uw(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const f=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+GQ>a)return r;const{data:s,error:o}=await qt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,r=s.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};r=m.session.access_token}const{header:a,payload:s,signature:o,raw:{header:l,payload:c}}=uw(r);n!=null&&n.allowExpired||xZ(s.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:a,signature:o},error:null}}const f=yZ(a.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,o,aZ(`${l}.${c}`)))throw new Y1("Invalid JWT signature");return{data:{claims:s,header:a,signature:o},error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}}}am.nextInstanceID=0;const MZ=am;class DZ extends MZ{constructor(t){super(t)}}var $Z=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class LZ{constructor(t,n,r){var a,s,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=zQ(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:RQ,realtime:DQ,auth:Object.assign(Object.assign({},MQ),{storageKey:u}),global:IQ},d=qQ(r??{},f);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=BQ(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new eQ(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new PQ(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new PJ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return $Z(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,storageKey:s,flowType:o,lock:l,debug:c},u,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new DZ({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,flowType:o,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new vQ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const wF=(e,t,n)=>new LZ(e,t,n);function FZ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}FZ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Kl=(e=>(e.CLOSED="CLOSED",e.OPEN="OPEN",e.HALF_OPEN="HALF_OPEN",e))(Kl||{});const BZ={failureThreshold:5,resetTimeout:3e4,successThreshold:2,monitoringPeriod:1e4,timeout:1e4},UZ="circuit_breaker_";class zZ{constructor(t,n={}){zt(this,"config");zt(this,"state");zt(this,"failures",[]);zt(this,"successes",0);zt(this,"stateChangedAt");zt(this,"lastFailureTime",null);zt(this,"lastSuccessTime",null);zt(this,"totalRequests",0);zt(this,"listeners",[]);zt(this,"storageKey");this.name=t,this.config={...BZ,...n},this.storageKey=`${UZ}${t}`,this.state=this.loadState()||"CLOSED",this.stateChangedAt=Date.now(),this.failures=[],this.loadFromStorage()}async execute(t,n){if(this.totalRequests++,!this.canExecute()){const a=new Error(`Circuit breaker is ${this.state}. Request rejected.`);throw a.circuitBreaker={state:this.state,name:this.name},a}const r=n||this.config.timeout;try{const a=new Promise((o,l)=>{setTimeout(()=>{l(new Error(`Request timeout after ${r}ms`))},r)}),s=await Promise.race([t(),a]);return this.recordSuccess(),s}catch(a){throw a instanceof Error&&a.message.includes("timeout")&&this.emitEvent({type:"timeout"}),this.recordFailure(a),a}}canExecute(){const t=Date.now();switch(this.state){case"CLOSED":return!0;case"OPEN":return t-this.stateChangedAt>=this.config.resetTimeout?(this.transitionTo("HALF_OPEN"),!0):!1;case"HALF_OPEN":return!0;default:return!1}}recordSuccess(){this.lastSuccessTime=Date.now(),this.emitEvent({type:"success"}),this.state==="HALF_OPEN"&&(this.successes++,this.successes>=this.config.successThreshold&&(this.transitionTo("CLOSED"),this.successes=0,this.failures=[])),this.saveToStorage()}recordFailure(t){const n=Date.now();this.lastFailureTime=n,this.emitEvent({type:"failure",error:t}),this.failures.push({time:n});const r=n-this.config.monitoringPeriod;this.failures=this.failures.filter(a=>a.time>r),(this.state==="CLOSED"||this.state==="HALF_OPEN")&&this.failures.length>=this.config.failureThreshold&&(this.transitionTo("OPEN"),this.successes=0),this.state==="HALF_OPEN"&&(this.transitionTo("OPEN"),this.successes=0),this.saveToStorage()}transitionTo(t){if(this.state===t)return;const n=this.state;this.state=t,this.stateChangedAt=Date.now(),this.emitEvent({type:"stateChange",from:n,to:t}),this.saveToStorage()}getStats(){return{failures:this.failures.length,successes:this.successes,state:this.state,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime,stateChangedAt:this.stateChangedAt,totalRequests:this.totalRequests}}getState(){return this.state}getConfig(){return{...this.config}}updateConfig(t){this.config={...this.config,...t};try{if(typeof localStorage<"u"){const n=localStorage.getItem(this.storageKey),r=n?JSON.parse(n):{};r.config=this.config,localStorage.setItem(this.storageKey,JSON.stringify(r))}}catch(n){console.warn("Failed to save circuit breaker config:",n)}}reset(){this.transitionTo("CLOSED"),this.failures=[],this.successes=0,this.lastFailureTime=null,this.lastSuccessTime=null,this.totalRequests=0,this.saveToStorage()}open(){this.transitionTo("OPEN")}on(t,n){this.listeners.push(n)}off(t){this.listeners=this.listeners.filter(n=>n!==t)}emitEvent(t){this.listeners.forEach(n=>{try{n(t)}catch(r){console.error("Circuit breaker event listener error:",r)}})}saveToStorage(){try{if(typeof localStorage<"u"){const t={state:this.state,stateChangedAt:this.stateChangedAt,failures:this.failures,successes:this.successes,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime,totalRequests:this.totalRequests};localStorage.setItem(this.storageKey,JSON.stringify(t))}}catch(t){console.warn("Failed to save circuit breaker state:",t)}}loadState(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t)return JSON.parse(t).state}}catch(t){console.warn("Failed to load circuit breaker state:",t)}return null}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t){const n=JSON.parse(t);n.config&&(this.config={...this.config,...n.config}),this.state=n.state||"CLOSED",this.stateChangedAt=n.stateChangedAt||Date.now(),this.failures=(n.failures||[]).filter(r=>{const a=Date.now()-this.config.monitoringPeriod;return r.time>a}),this.successes=n.successes||0,this.lastFailureTime=n.lastFailureTime||null,this.lastSuccessTime=n.lastSuccessTime||null,this.totalRequests=n.totalRequests||0,this.state==="OPEN"&&Date.now()-this.stateChangedAt>=this.config.resetTimeout&&this.transitionTo("HALF_OPEN")}}}catch(t){console.warn("Failed to load circuit breaker state:",t)}}}const Jt=new zZ("database",{failureThreshold:5,resetTimeout:3e4,successThreshold:2,monitoringPeriod:1e4,timeout:1e4}),qZ=["ECONNRESET","ENOTFOUND","ETIMEDOUT","ECONNREFUSED","NetworkError"],WZ=["Timeout","ETIMEDOUT"],HZ=[500,502,503,504,429];function Ai(e){var a;const t=(e==null?void 0:e.message)||String(e),n=(e==null?void 0:e.code)||(e==null?void 0:e.error_code)||"",r=(e==null?void 0:e.status)||(e==null?void 0:e.statusCode)||((a=e==null?void 0:e.response)==null?void 0:a.status);if(qZ.some(s=>t.includes(s)||n.includes(s)||t.toLowerCase().includes("network")))return{category:"NETWORK",isRetryable:!0,retryDelay:1e3,userMessage:"Koneksi jaringan bermasalah. Mencoba lagi...",originalError:e};if(WZ.some(s=>t.includes(s)||n.includes(s)||t.toLowerCase().includes("timeout")))return{category:"TIMEOUT",isRetryable:!0,retryDelay:2e3,userMessage:"Permintaan memakan waktu terlalu lama. Mencoba lagi...",originalError:e};if(r===429||t.includes("rate limit")||t.includes("too many requests")||n==="PGRST301")return{category:"RATE_LIMIT",isRetryable:!0,retryDelay:5e3,userMessage:"Terlalu banyak permintaan. Mohon tunggu sebentar...",originalError:e};if(r===401||r===403||t.includes("JWT")||t.includes("token")||t.includes("unauthorized")||t.includes("forbidden")||n==="PGRST301"||n==="PGRST302")return{category:"AUTH_ERROR",isRetryable:!1,userMessage:"Sesi Anda telah berakhir. Silakan login kembali.",originalError:e};if(r===400||t.includes("validation")||t.includes("invalid")||t.includes("constraint")||n==="23505"||n==="23503"||n==="23514")return{category:"VALIDATION_ERROR",isRetryable:!1,userMessage:"Data yang dimasukkan tidak valid. Silakan periksa kembali.",originalError:e};if(HZ.includes(r)||n!=null&&n.startsWith("PGRST")||n!=null&&n.startsWith("P0001")||t.includes("database")||t.includes("connection")){const s=r>=500||r===429;return{category:"DATABASE_ERROR",isRetryable:s,retryDelay:s?2e3:void 0,userMessage:s?"Database sedang bermasalah. Mencoba lagi...":"Terjadi kesalahan database. Silakan coba lagi nanti.",originalError:e}}return r===404?{category:"VALIDATION_ERROR",isRetryable:!1,userMessage:"Data yang dicari tidak ditemukan.",originalError:e}:{category:"UNKNOWN",isRetryable:!0,retryDelay:1e3,userMessage:"Terjadi kesalahan. Mencoba lagi...",originalError:e}}const jF={reads:{limit:100,window:6e4},writes:{limit:30,window:6e4},rpc:{limit:20,window:6e4},auth:{limit:10,window:6e4}},VZ="rate_limit_";class X1{constructor(t="default",n={}){zt(this,"config");zt(this,"requests",new Map);zt(this,"storageKey");this.name=t,this.config={...jF,...n},this.storageKey=`${VZ}${t}`,this.loadFromStorage(),typeof window<"u"&&setInterval(()=>this.cleanup(),6e4)}checkLimit(t,n,r){const a=this.getKey(t,n,r),s=Date.now(),o=this.getConfig(n);let l=this.requests.get(a)||[];const c=s-o.window;l=l.filter(v=>v.timestamp>c);const u=l.length,f=u<o.limit,d=l[0],h=d?d.timestamp+o.window:s+o.window,m=f?void 0:Math.ceil((h-s)/1e3)*1e3,g={allowed:f,remaining:Math.max(0,o.limit-u-1),resetAt:h,retryAfter:m};return f&&(l.push({timestamp:s,operation:n,endpoint:r}),this.requests.set(a,l),this.saveToStorage(a,l)),g}recordRequest(t,n,r){const a=this.getKey(t,n,r),s=Date.now();let o=this.requests.get(a)||[];o.push({timestamp:s,operation:n,endpoint:r});const l=this.getConfig(n),c=s-l.window;o=o.filter(u=>u.timestamp>c),this.requests.set(a,o),this.saveToStorage(a,o)}getUsage(t,n,r){const a=this.getKey(t,n,r),s=Date.now(),o=this.getConfig(n);let l=this.requests.get(a)||[];const c=s-o.window;l=l.filter(d=>d.timestamp>c);const u=l[0],f=u?u.timestamp+o.window:s+o.window;return{count:l.length,limit:o.limit,resetAt:f}}reset(t,n,r){if(n){const a=this.getKey(t,n,r);this.requests.delete(a),this.deleteFromStorage(a)}else{const a=t?`${t}:`:"anonymous:";for(const s of this.requests.keys())s.startsWith(a)&&(this.requests.delete(s),this.deleteFromStorage(s))}}cleanup(){const t=Date.now(),n=Math.max(this.config.reads.window,this.config.writes.window,this.config.rpc.window,this.config.auth.window),r=t-n;for(const[a,s]of this.requests.entries()){const o=s.filter(l=>l.timestamp>r);o.length===0?(this.requests.delete(a),this.deleteFromStorage(a)):o.length!==s.length&&(this.requests.set(a,o),this.saveToStorage(a,o))}}getConfig(t){return this.config[t]}getKey(t,n,r){return`${t||"anonymous"}:${n}${r?`:${r}`:""}`}saveToStorage(t,n){try{if(typeof localStorage<"u"){const r=`${this.storageKey}:${t}`,a=Date.now(),s=n.filter(o=>a-o.timestamp<6e4);localStorage.setItem(r,JSON.stringify({requests:s,savedAt:a}))}}catch(r){console.warn("Failed to save rate limit data:",r)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=Date.now(),n=`${this.storageKey}:`;for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a&&a.startsWith(n))try{const s=JSON.parse(localStorage.getItem(a)||"{}"),o=s.savedAt||0;if(t-o<3e5){const l=(s.requests||[]).filter(c=>{const u=c.operation||"read",f=this.getConfig(u);return t-c.timestamp<f.window});if(l.length>0){const c=a.replace(n,"");this.requests.set(c,l)}else localStorage.removeItem(a)}else localStorage.removeItem(a)}catch{localStorage.removeItem(a)}}}}catch(t){console.warn("Failed to load rate limit data:",t)}}deleteFromStorage(t){try{if(typeof localStorage<"u"){const n=`${this.storageKey}:${t}`;localStorage.removeItem(n)}}catch{}}}new X1("default",jF);class KZ{constructor(){zt(this,"queue",[]);zt(this,"batchSize",50);zt(this,"batchInterval",3e4);zt(this,"intervalId",null);zt(this,"enabled",!0);zt(this,"lastFlushTime",0);zt(this,"flushThrottle",1e4);typeof window<"u"&&this.startBatching()}record(t){if(!this.enabled)return;this.queue.length>=1e3&&(this.queue=this.queue.slice(-500)),this.queue.push({...t,timestamp:Date.now()});const n=Date.now();this.queue.length>=this.batchSize&&n-this.lastFlushTime>=this.flushThrottle&&this.flush()}startBatching(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.flush()},this.batchInterval)}stopBatching(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}async flush(){if(this.queue.length===0)return;const t=Date.now();if(t-this.lastFlushTime<this.flushThrottle)return;const n=[...this.queue];this.queue=[],this.lastFlushTime=t;try{const{error:r}=await ne.from("circuit_breaker_metrics").insert(n.map(a=>({operation_type:a.operationType,endpoint:a.endpoint||null,user_id:a.userId||null,circuit_breaker_state:a.circuitBreakerState,success:a.success,error_category:a.errorCategory||null,response_time_ms:a.responseTimeMs,metadata:a.metadata||{}})));r&&(console.warn("Failed to send metrics:",r),this.queue.length<100&&(this.queue=[...n,...this.queue]))}catch(r){console.warn("Failed to flush metrics:",r),this.queue.length<100&&(this.queue=[...n,...this.queue])}}setEnabled(t){this.enabled=t,t?this.startBatching():(this.stopBatching(),this.queue=[])}getQueueSize(){return this.queue.length}async forceFlush(){await this.flush()}}function hw(e,t){if(e.length===0)return 0;const n=[...e].sort((a,s)=>a-s),r=Math.ceil(t/100*n.length)-1;return n[Math.max(0,r)]}async function _F(e,t,n){try{let r=ne.from("circuit_breaker_metrics").select("*");e&&(r=r.gte("created_at",e.toISOString())),t&&(r=r.lt("created_at",t.toISOString()));const{data:a,error:s}=await r;if(s||!a)return{totalOperations:0,successRate:0,failureRate:0,avgResponseTime:0,p50ResponseTime:0,p95ResponseTime:0,p99ResponseTime:0,circuitBreakerStates:{},errorCategories:{},operationsByType:{}};const o=a.length,l=a.filter(g=>g.success).length,c=a.filter(g=>!g.success).length,u=a.map(g=>g.response_time_ms||0).filter(g=>g>0),f={},d={},h={};a.forEach(g=>{const v=g.circuit_breaker_state||"UNKNOWN";if(f[v]=(f[v]||0)+1,g.error_category){const y=g.error_category;d[y]=(d[y]||0)+1}const x=g.operation_type||"unknown";h[x]=(h[x]||0)+1});const m=u.length>0?u.reduce((g,v)=>g+v,0)/u.length:0;return{totalOperations:o,successRate:o>0?l/o:0,failureRate:o>0?c/o:0,avgResponseTime:m,p50ResponseTime:hw(u,50),p95ResponseTime:hw(u,95),p99ResponseTime:hw(u,99),circuitBreakerStates:f,errorCategories:d,operationsByType:h}}catch(r){return console.error("Failed to get metrics stats:",r),{totalOperations:0,successRate:0,failureRate:0,avgResponseTime:0,p50ResponseTime:0,p95ResponseTime:0,p99ResponseTime:0,circuitBreakerStates:{},errorCategories:{},operationsByType:{}}}}const im=new KZ,uT={baseConfig:{read:{limit:100,window:6e4},write:{limit:30,window:6e4},rpc:{limit:20,window:6e4},auth:{limit:10,window:6e4}},minMultiplier:.5,maxMultiplier:2,adjustmentInterval:6e4,healthyLatencyThreshold:200,stressLatencyThreshold:1e3};class GZ{constructor(t={}){zt(this,"config");zt(this,"currentMultipliers",new Map);zt(this,"lastAdjustment",Date.now());zt(this,"rateLimiters",new Map);zt(this,"storageKey","adaptive_rate_limiter");zt(this,"adjustmentIntervalId",null);this.config={...uT,...t},this.loadFromStorage(),Object.keys(this.config.baseConfig).forEach(n=>{this.currentMultipliers.has(n)||this.currentMultipliers.set(n,1)}),typeof window<"u"&&(this.adjustmentIntervalId=setInterval(()=>this.adjustLimits(),this.config.adjustmentInterval))}getLimiter(t){if(!this.rateLimiters.has(t)){const n=this.config.baseConfig[t],r=this.currentMultipliers.get(t)||1,a={limit:Math.round(n.limit*r),window:n.window};this.rateLimiters.set(t,new X1(`adaptive_${t}`,{[t]:a}))}return this.rateLimiters.get(t)}async adjustLimits(){try{const t=Date.now(),n=new Date(t-5*60*1e3),r=await this.getRecentStats(n,new Date(t));for(const a of Object.keys(this.config.baseConfig))await this.adjustOperationLimit(a,r);this.lastAdjustment=t}catch(t){console.warn("Failed to adjust rate limits:",t)}}async getRecentStats(t,n){try{const r=await _F(t,n);return{avgResponseTime:r.avgResponseTime,errorRate:r.failureRate,requestVolume:r.totalOperations}}catch{return{avgResponseTime:300,errorRate:.01,requestVolume:100}}}async adjustOperationLimit(t,n){const r=this.currentMultipliers.get(t)||1,a=this.config.baseConfig[t];let s=r;const{avgResponseTime:o,errorRate:l}=n;o<this.config.healthyLatencyThreshold&&l<.05?s=Math.min(r*1.1,this.config.maxMultiplier):o>this.config.stressLatencyThreshold||l>.2?s=Math.max(r*.8,this.config.minMultiplier):r>1?s=Math.max(r*.95,1):r<1&&(s=Math.min(r*1.05,1)),this.currentMultipliers.set(t,s);const c={limit:Math.round(a.limit*s),window:a.window};this.rateLimiters.set(t,new X1(`adaptive_${t}`,{[t]:c})),this.saveToStorage()}getMultiplier(t){return this.currentMultipliers.get(t)||1}getEffectiveLimit(t){const n=this.config.baseConfig[t],r=this.currentMultipliers.get(t)||1;return Math.round(n.limit*r)}reset(){Object.keys(this.config.baseConfig).forEach(t=>{this.currentMultipliers.set(t,1),this.rateLimiters.delete(t)}),this.saveToStorage()}getConfig(){return{...this.config}}updateConfig(t){this.config={...this.config,...t},t.adjustmentInterval&&typeof window<"u"&&(this.adjustmentIntervalId&&clearInterval(this.adjustmentIntervalId),this.adjustmentIntervalId=setInterval(()=>this.adjustLimits(),this.config.adjustmentInterval)),this.rateLimiters.clear(),this.saveToStorage()}checkLimit(t,n,r){return this.getLimiter(n).checkLimit(t,n,r)}recordRequest(t,n,r){this.getLimiter(n).recordRequest(t,n,r)}getUsage(t,n,r){return this.getLimiter(n).getUsage(t,n,r)}saveToStorage(){try{if(typeof localStorage<"u"){const t={config:this.config,multipliers:Object.fromEntries(this.currentMultipliers),lastAdjustment:this.lastAdjustment};localStorage.setItem(this.storageKey,JSON.stringify(t))}}catch(t){console.warn("Failed to save adaptive rate limiter config:",t)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t){const n=JSON.parse(t);n.config&&(this.config={...uT,...n.config}),n.multipliers&&Object.entries(n.multipliers).forEach(([r,a])=>{this.currentMultipliers.set(r,a)}),n.lastAdjustment&&(this.lastAdjustment=n.lastAdjustment)}}}catch(t){console.warn("Failed to load adaptive rate limiter config:",t)}}}const Mt=new GZ,YZ={defaultTtl:5*60*1e3,maxSize:100,strategy:"stale-while-revalidate"},Df="supabase_cache_",dT="1";class XZ{constructor(t={}){zt(this,"cache",new Map);zt(this,"config");this.config={...YZ,...t},this.loadFromStorage(),typeof window<"u"&&setInterval(()=>this.cleanup(),6e4)}get(t){const n=this.cache.get(t);if(!n)return null;const r=Date.now(),a=n.ttl||this.config.defaultTtl;return n.timestamp+a<r?(this.cache.delete(t),this.deleteFromStorage(t),null):n.data}set(t,n,r){const a={data:n,timestamp:Date.now(),ttl:r||this.config.defaultTtl,version:parseInt(dT)};if(this.cache.size>=this.config.maxSize){const s=this.findOldestEntry();s&&(this.cache.delete(s),this.deleteFromStorage(s))}this.cache.set(t,a),this.saveToStorage(t,a)}async execute(t,n,r,a){const s=r||this.config.strategy,o=this.get(t);switch(s){case"cache-first":if(o)return o;try{const l=await n();return this.set(t,l,a),l}catch(l){if(o)return o;throw l}case"network-first":try{const l=await n();return this.set(t,l,a),l}catch(l){if(o)return o;throw l}case"stale-while-revalidate":if(o)return n().then(l=>{this.set(t,l,a)}).catch(()=>{}),o;try{const l=await n();return this.set(t,l,a),l}catch(l){throw l}case"network-only":try{const l=await n();return this.set(t,l,a),l}catch(l){throw l}case"cache-only":if(o)return o;throw new Error("No cached data available");default:return await n()}}invalidate(t){this.cache.delete(t),this.deleteFromStorage(t)}invalidatePattern(t){const n=new RegExp(t);for(const r of this.cache.keys())n.test(r)&&this.invalidate(r)}clear(){this.cache.clear();try{if(typeof localStorage<"u")for(let t=localStorage.length-1;t>=0;t--){const n=localStorage.key(t);n&&n.startsWith(Df)&&localStorage.removeItem(n)}}catch(t){console.warn("Failed to clear cache from storage:",t)}}findOldestEntry(){let t=null,n=1/0;for(const[r,a]of this.cache.entries())a.timestamp<n&&(n=a.timestamp,t=r);return t}cleanup(){const t=Date.now();for(const[n,r]of this.cache.entries()){const a=r.ttl||this.config.defaultTtl;r.timestamp+a<t&&(this.cache.delete(n),this.deleteFromStorage(n))}}saveToStorage(t,n){try{if(typeof localStorage<"u"){const r=`${Df}${t}`;localStorage.setItem(r,JSON.stringify(n))}}catch(r){console.warn("Failed to save cache entry:",r)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=Date.now();for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);if(r&&r.startsWith(Df))try{const s=JSON.parse(localStorage.getItem(r)||"{}");if(s.version&&s.version!==parseInt(dT)){localStorage.removeItem(r);continue}const o=s.ttl||this.config.defaultTtl;if(s.timestamp+o<t){localStorage.removeItem(r);continue}const l=r.replace(Df,"");this.cache.set(l,s)}catch{localStorage.removeItem(r)}}}}catch(t){console.warn("Failed to load cache from storage:",t)}}deleteFromStorage(t){try{if(typeof localStorage<"u"){const n=`${Df}${t}`;localStorage.removeItem(n)}}catch{}}getStats(){const t=Date.now(),n=Array.from(this.cache.entries()).map(([r,a])=>({key:r,age:t-a.timestamp,ttl:a.ttl||this.config.defaultTtl}));return{size:this.cache.size,maxSize:this.config.maxSize,entries:n}}}const li=new XZ;class JZ{constructor(){zt(this,"queue",[]);zt(this,"processing",!1);zt(this,"maxRetries",3);zt(this,"storageKey","offline_queue");this.loadFromStorage(),typeof window<"u"&&window.addEventListener("online",()=>{this.processQueue()})}add(t){const n={...t,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),retries:0};return this.queue.push(n),this.saveToStorage(),typeof navigator<"u"&&navigator.onLine&&this.processQueue(),n.id}async processQueue(t){if(!(this.processing||this.queue.length===0)&&t){this.processing=!0;try{const n=[...this.queue];this.queue=[];for(const r of n)try{await t(r),this.remove(r.id)}catch{r.retries++,r.retries<this.maxRetries?this.queue.push(r):(console.error("Failed to sync write operation after max retries:",r),this.remove(r.id))}this.saveToStorage()}finally{this.processing=!1}}}remove(t){this.queue=this.queue.filter(n=>n.id!==t),this.saveToStorage()}size(){return this.queue.length}clear(){this.queue=[],this.saveToStorage()}getAll(){return[...this.queue]}saveToStorage(){try{typeof localStorage<"u"&&localStorage.setItem(this.storageKey,JSON.stringify(this.queue))}catch(t){console.warn("Failed to save offline queue:",t)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);t&&(this.queue=JSON.parse(t))}}catch(t){console.warn("Failed to load offline queue:",t)}}}new JZ;async function kF(e,t=3,n=1e3){let r;for(let a=0;a<=t;a++)try{return await e()}catch(s){r=s;const o=Ai(s);if(!o.isRetryable||Jt.getState()!=="CLOSED")throw s;if(a>=t)break;const l=Math.min(n*Math.pow(2,a),8e3),c=o.retryDelay||l;await new Promise(u=>setTimeout(u,c))}throw r}let $f=null,mw=0;const QZ=6e4;async function jN(e,t=!1){var r,a;const n=Date.now();if(!t&&$f!==null&&n-mw<QZ)return $f;try{const s=e.auth.getSession(),o=new Promise(c=>{setTimeout(()=>c({data:{session:null}}),500)}),{data:l}=await Promise.race([s,o]);return $f=((a=(r=l==null?void 0:l.session)==null?void 0:r.user)==null?void 0:a.id)||null,mw=n,$f}catch{return $f=null,mw=n,null}}async function SF(e,t,n,r,a=!1){if(a)return;const s=r!==void 0?r:await jN(e).catch(()=>null);if(t==="rpc"){const l=Mt.getUsage(s,t,n);if(l.count<l.limit*.9){Mt.recordRequest(s,t,n);return}const c=Mt.checkLimit(s,t,n);if(!c.allowed){const u=new Error(c.retryAfter?`Rate limit exceeded. Please wait ${Math.ceil(c.retryAfter/1e3)} seconds.`:"Rate limit exceeded. Please try again later.");throw u.code="RATE_LIMIT_EXCEEDED",u.status=429,u.retryAfter=c.retryAfter,u.category="RATE_LIMIT",u}return}const o=Mt.checkLimit(s,t,n);if(!o.allowed){const l=new Error(o.retryAfter?`Rate limit exceeded. Please wait ${Math.ceil(o.retryAfter/1e3)} seconds.`:"Rate limit exceeded. Please try again later.");throw l.code="RATE_LIMIT_EXCEEDED",l.status=429,l.retryAfter=o.retryAfter,l.category="RATE_LIMIT",l}}const NF=new Set;function J1(e){return e===void 0?"u":e===null?"n":typeof e=="function"?"f":typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"?`p:${String(e)}`:typeof e=="string"?`s:${e}`:e instanceof Date?`d:${e.toISOString()}`:Array.isArray(e)?`a:[${e.map(t=>J1(t)).join(",")}]`:typeof e=="object"?`o:{${Object.keys(e).sort().map(r=>`${r}:${J1(e[r])}`).join(",")}}`:`x:${String(e)}`}function ZZ(e){return!e||e.length===0?"":e.map(t=>J1(t)).join("|")}function eee(e){if(!e)return"base";let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return Math.abs(t).toString(36)}function CF(e,t,n="read",r,a=!1,s=""){return new Proxy(e,{get(o,l){const c=o[l];let u=n;if((l==="insert"||l==="update"||l==="upsert"||l==="delete")&&(u="write"),l==="then"||l==="catch"||l==="finally"){const f=Promise.resolve(o),d=(async()=>{const h=Date.now(),m=eee(s),g=r?`query:${r}:${u}:${m}`:void 0;if(u==="read"&&g&&!a){const k=li.get(g);if(k&&!NF.has(g))return k}const v=jN(t).catch(()=>null),x=Jt.getState();try{const k=await Promise.race([v,new Promise(_=>setTimeout(()=>_(null),100))]);u==="read"?Mt.recordRequest(k,u,r):await SF(t,u,r,k)}catch(k){if(k.code==="RATE_LIMIT_EXCEEDED")throw k}let y;try{y=await Jt.execute(()=>kF(async()=>await f))}catch(k){y={data:null,error:k}}u==="read"&&g&&y&&!y.error&&y.data&&li.set(g,y,5*60*1e3);const b=Date.now()-h,w=y!=null&&y.error?Ai(y.error).category:void 0,j=await v.catch(()=>null);return Promise.resolve().then(()=>{try{im.record({operationType:u,endpoint:r,userId:j||void 0,circuitBreakerState:x,success:!(y!=null&&y.error),errorCategory:w,responseTimeMs:b,metadata:y!=null&&y.error?{error:y.error.message}:{}})}catch{}}),y})().catch(h=>{const m=Date.now()-startTime,g=Ai(h);return im.record({operationType:u,endpoint:r,userId:userId||void 0,circuitBreakerState:circuitState,success:!1,errorCategory:g.category,responseTimeMs:m,metadata:{error:h instanceof Error?h.message:String(h)}}),h.code==="RATE_LIMIT_EXCEEDED"?{data:null,error:{message:h.message,code:"RATE_LIMIT_EXCEEDED",status:429,category:"RATE_LIMIT",retryAfter:h.retryAfter,circuitBreaker:Jt.getState()}}:h&&typeof h=="object"&&("data"in h||"error"in h)?{data:h.data||null,error:{...h.error||h,message:g.userMessage,category:g.category,circuitBreaker:Jt.getState()}}:{data:null,error:{...g.originalError,message:g.userMessage,category:g.category,circuitBreaker:Jt.getState()}}});return(h,m)=>d[l](h,m)}return typeof c=="function"?(...f)=>{const d=c.apply(o,f),h=ZZ(f),m=h?`${l}(${h})`:`${l}()`,g=s?`${s}|${m}`:m;return CF(d,t,u,r,a,g)}:c}})}function tee(e){const t=e;return{from:n=>{const r=t.from(n);return CF(r,t,"read",n)},rpc:async(n,r,a)=>{const s=Date.now(),o=`rpc:${n}:${JSON.stringify(r||{})}`,l=li.get(o);if(l&&!l.error&&!NF.has(o))return l;const c=jN(t).catch(()=>null),u=Jt.getState();try{try{const g=await Promise.race([c,new Promise(v=>setTimeout(()=>v(null),100))]);await SF(t,"rpc",n,g,!1)}catch(g){if(g.code==="RATE_LIMIT_EXCEEDED")throw g}const f=await Jt.execute(()=>kF(async()=>await t.rpc(n,r,a)));f&&!f.error&&li.set(o,f,5*60*1e3);const d=Date.now()-s,h=f!=null&&f.error?Ai(f.error).category:void 0,m=await c.catch(()=>null);return Promise.resolve().then(()=>{try{im.record({operationType:"rpc",endpoint:n,userId:m||void 0,circuitBreakerState:u,success:!(f!=null&&f.error),errorCategory:h,responseTimeMs:d,metadata:f!=null&&f.error?{error:f.error.message}:{}})}catch{}}),f}catch(f){const d=Ai(f),h=Date.now()-s,m=await c.catch(()=>null);return Promise.resolve().then(()=>{try{im.record({operationType:"rpc",endpoint:n,userId:m||void 0,circuitBreakerState:u,success:!1,errorCategory:d.category,responseTimeMs:h,metadata:{error:f instanceof Error?f.message:String(f)}})}catch{}}),{data:null,error:{...d.originalError,message:d.userMessage,category:d.category,circuitBreaker:u}}}},auth:{getSession:async()=>{try{return await Jt.execute(()=>t.auth.getSession(),5e3)}catch(n){const r=Ai(n);throw new Error(r.userMessage)}},getUser:async()=>{try{return await Jt.execute(()=>t.auth.getUser(),5e3)}catch(n){const r=Ai(n);throw new Error(r.userMessage)}},signOut:async()=>{try{return await Jt.execute(()=>t.auth.signOut(),5e3)}catch(n){const r=Ai(n);throw new Error(r.userMessage)}},signInWithPassword:async n=>{try{return await Jt.execute(()=>t.auth.signInWithPassword(n),1e4)}catch(r){const a=Ai(r);throw new Error(a.userMessage)}},signInWithOtp:async(n,r)=>{try{return await Jt.execute(()=>t.auth.signInWithOtp({email:n,options:r}),1e4)}catch(a){const s=Ai(a);throw new Error(s.userMessage)}},verifyOtp:async n=>{try{return await Jt.execute(()=>t.auth.verifyOtp(n),1e4)}catch(r){const a=Ai(r);throw new Error(a.userMessage)}},onAuthStateChange:t.auth.onAuthStateChange.bind(t.auth),resetPasswordForEmail:t.auth.resetPasswordForEmail.bind(t.auth),refreshSession:t.auth.refreshSession.bind(t.auth),updateUser:t.auth.updateUser.bind(t.auth),setSession:t.auth.setSession.bind(t.auth)},storage:t.storage,channel:t.channel.bind(t),removeChannel:t.removeChannel.bind(t),removeAllChannels:t.removeAllChannels.bind(t),getChannels:t.getChannels.bind(t),getCircuitBreaker:()=>Jt,getCircuitBreakerStats:()=>Jt.getStats()}}const nee="https://bkynymyhbfrhvwxqqttk.supabase.co",ree="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",ne=wF(nee,ree),Nt=tee(ne);async function Wt(e){var t;try{const{action:n,resource:r,resourceId:a=null,context:s={},ip:o=null,userAgent:l=null}=e;let c=e.userId??null;if(!c)try{const d=typeof localStorage<"u"?localStorage.getItem("app.currentUserId"):null;d&&(c=d)}catch{}if(!c){const{data:d}=await ne.auth.getUser();c=((t=d==null?void 0:d.user)==null?void 0:t.id)??null}let u=e.orgId??null;if(!u&&c&&(authData!=null&&authData.user))try{const{data:d}=await ne.from("org_members").select("org_id").eq("user_id",c).limit(1).maybeSingle();u=(d==null?void 0:d.org_id)??null}catch{return}if(!u&&n==="auth.logout")return;if(!u)try{const{data:d}=await ne.from("orgs").select("id").limit(1).maybeSingle();u=(d==null?void 0:d.id)??null}catch{return}try{const d=`logAction:${n}:${r}:${c||"anon"}`,h=Date.now(),m=typeof localStorage<"u"?localStorage.getItem(d):null;if(m){const g=Number(m)||0;if(h-g<3e3)return}typeof localStorage<"u"&&localStorage.setItem(d,String(h))}catch{}if(!u)return;const{error:f}=await ne.rpc("log_action",{p_action:n,p_resource:r,p_resource_id:a,p_context:{...s,route:typeof window<"u"?window.location.pathname:null},p_ip:o,p_user_agent:l,p_org_id:u,p_user_id:c});f&&console.warn("logAction failed",f)}catch(n){console.warn("logAction threw",n)}}const AF=p.createContext(void 0);function aee({children:e}){var T;const t=Ka(),[n,r]=p.useState(null),[a,s]=p.useState(null),[o,l]=p.useState(!0),c=p.useRef(null),[u,f]=p.useState(!1),[d,h]=p.useState(()=>{var R;try{if(localStorage.getItem("otpVerified")==="true")return!0;const F=localStorage.getItem("app.lastAuthEvent");if(F)try{const M=JSON.parse(F),A=(R=M==null?void 0:M.user)==null?void 0:R.id;if(A)return localStorage.getItem(`otpVerified:${A}`)==="true"}catch{}return!1}catch{return!1}}),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,b]=p.useState(!1),[w,j]=p.useState(!1),[k,_]=p.useState(0);p.useEffect(()=>{b(!1)},[n==null?void 0:n.id]);const[S,E]=p.useState(!1),N=p.useRef(null),I=p.useRef(null);p.useEffect(()=>{I.current=(n==null?void 0:n.id)??null},[n==null?void 0:n.id]);const P=p.useCallback(R=>{var C;h(R);try{const F=(C=a==null?void 0:a.user)!=null&&C.id?`otpVerified:${a.user.id}`:"otpVerified";R?(localStorage.setItem(F,"true"),localStorage.setItem("otpVerified","true")):(localStorage.removeItem(F),localStorage.removeItem("otpVerified"))}catch{}},[(T=a==null?void 0:a.user)==null?void 0:T.id]),D=async R=>{var M,A;const C=(M=R==null?void 0:R.user)==null?void 0:M.id,F=k+1;if(_(F),!C)return x(!1),!0;if(w||y&&((A=R==null?void 0:R.user)==null?void 0:A.id)===(n==null?void 0:n.id))return!v;j(!0);try{const{data:W,error:G}=await ne.from("users_profile").select("is_active").eq("user_id",C).maybeSingle();return G?(console.error("Error checking account status:",G),!v):W?W.is_active===!0?(x(!1),b(!0),!0):(t("/account-deactivated",{replace:!0}),!1):!v}catch(W){return console.error("Failed to check account status",W),!v}finally{j(!1)}},L=async R=>{var F,M,A,W,G;const C=(F=R==null?void 0:R.user)==null?void 0:F.id;if(!C){f(!1);try{const Y=(M=R==null?void 0:R.user)!=null&&M.id?`otpRequired:${R.user.id}`:"otpRequired";localStorage.removeItem(Y)}catch{}return!1}try{const{data:Y,error:H}=await ne.from("users_profile").select("is_2fa_email_enabled").eq("user_id",C).maybeSingle();if(H)throw H;if(!Y){f(!0);try{const X=(A=R==null?void 0:R.user)!=null&&A.id?`otpRequired:${R.user.id}`:"otpRequired";localStorage.setItem(X,"true")}catch{}return!0}const Q=(Y==null?void 0:Y.is_2fa_email_enabled)===!0;f(!!Q);try{const X=(W=R==null?void 0:R.user)!=null&&W.id?`otpRequired:${R.user.id}`:"otpRequired";Q?localStorage.setItem(X,"true"):localStorage.removeItem(X)}catch{}return!!Q}catch(Y){console.warn("Failed to evaluate 2FA profile flag",Y),f(!0);try{const H=(G=R==null?void 0:R.user)!=null&&G.id?`otpRequired:${R.user.id}`:"otpRequired";localStorage.setItem(H,"true")}catch{}return!0}},B=R=>{let C=!1;const F=window.setTimeout(()=>{C||g(!0)},5e3);return R.finally(()=>{C=!0,window.clearTimeout(F),g(!0)})};p.useEffect(()=>{(async()=>{var A,W,G;l(!0),g(!1);let F=!1;const M=window.setTimeout(()=>{F=!0,l(!1),g(!0)},5e3);try{try{localStorage.removeItem("otpRequired"),localStorage.removeItem("otpVerified")}catch{}try{const re=Object.keys(localStorage).filter(fe=>fe.startsWith("sb-")&&fe.endsWith("-auth-token"));for(const fe of re)try{const J=localStorage.getItem(fe);if(!J)continue;const ye=JSON.parse(J);if(ye!=null&&ye.access_token&&(ye!=null&&ye.user)){s(ye),r(ye.user);break}}catch{}localStorage.removeItem("sb-tgrmxlbnutxpewfmofdx-auth-token"),localStorage.removeItem("sb-yoekcpoppfudmqtvjcby-auth-token")}catch{}const Y=await Promise.race([ne.auth.getSession().catch(()=>({data:{session:null}})),new Promise(re=>{setTimeout(()=>re({data:{session:null}}),4e3)})]),H=((A=Y==null?void 0:Y.data)==null?void 0:A.session)??null;s(H),r((H==null?void 0:H.user)??null);const Q=await Promise.race([ne.auth.getUser().catch(()=>({data:{user:null}})),new Promise(re=>{setTimeout(()=>re({data:{user:null}}),4e3)})]);if(!(((W=Q==null?void 0:Q.data)==null?void 0:W.user)??null)){s(null),r(null),f(!1),P(!1),g(!0);return}if(H){if(!await Promise.race([D(H),new Promise(fe=>setTimeout(()=>fe(!0),3e3))])){s(H),r(H.user),f(!1),P(!1),g(!0),l(!1);return}s(H),r(H.user);try{(G=H.user)!=null&&G.id&&(localStorage.setItem("app.currentUserId",H.user.id),localStorage.setItem("app.currentUserEmail",H.user.email||""))}catch{}F||(window.clearTimeout(M),l(!1)),B(L(H).then(fe=>{f(!!fe)}));return}else f(!1),P(!1),g(!0)}finally{F||(window.clearTimeout(M),l(!1))}})();const{data:{subscription:C}}=ne.auth.onAuthStateChange(async(F,M)=>{var A,W,G,Y;try{if(F==="SIGNED_IN"){const H=I.current,Q=((A=M==null?void 0:M.user)==null?void 0:A.id)||null;if(!!H&&!!Q&&H===Q){s(M),r((M==null?void 0:M.user)??null);return}if(S){s(M),r((M==null?void 0:M.user)??null);return}if(!await Promise.race([D(M),new Promise(ye=>setTimeout(()=>ye(!0),3e3))])){s(M),r((M==null?void 0:M.user)??null),f(!1),P(!1),g(!0),l(!1);return}s(M),r((M==null?void 0:M.user)??null);const fe=((W=M==null?void 0:M.user)==null?void 0:W.id)||null;if(fe&&N.current!==fe){Wt({action:"auth.login",resource:"auth",userId:fe,context:{}}).catch(()=>{}),N.current=fe;try{localStorage.setItem("app.currentUserId",fe),localStorage.setItem("app.currentUserEmail",((G=M==null?void 0:M.user)==null?void 0:G.email)||"")}catch{}}let J=!1;try{const ye=fe?`otpVerified:${fe}`:"otpVerified";J=localStorage.getItem(ye)==="true"||localStorage.getItem("otpVerified")==="true"}catch{}P(!!J);try{const ye=(Y=M==null?void 0:M.user)!=null&&Y.id?`otpRequired:${M.user.id}`:"otpRequired";localStorage.removeItem(ye)}catch{}g(!1),l(!1),B(L(M).then(ye=>{var z;if(ye&&!J){const q=((z=M==null?void 0:M.user)==null?void 0:z.id)||null;q&&c.current!==q&&ne.functions.invoke("send-2fa-login-email",{headers:M!=null&&M.access_token?{Authorization:`Bearer ${M.access_token}`}:void 0}).then(()=>{c.current=q}).catch(ae=>{console.warn("2FA send function failed",ae)})}f(!!ye)}));try{localStorage.setItem("app.lastAuthEvent",JSON.stringify({event:F,at:Date.now(),user:(M==null?void 0:M.user)||null}))}catch{}return}if(F==="PASSWORD_RECOVERY"){try{localStorage.setItem("auth.intent","recovery")}catch{}try{if(window.location.hash){const H=new URL(window.location.href);H.hash="",window.history.replaceState({},document.title,H.toString())}}catch{}window.location.pathname!=="/reset-password"&&t("/reset-password",{replace:!0}),g(!1),B((async()=>{try{const H=await L(M);f(!!H),H&&P(!1)}catch{f(!1)}})());return}if(F==="TOKEN_REFRESHED"||F==="USER_UPDATED")return;if(F==="SIGNED_OUT"){n!=null&&n.id&&Wt({action:"auth.logout",resource:"auth",userId:n.id,context:{}}).catch(()=>{}),f(!1),P(!1),E(!1),x(!1);try{const H=[];for(let X=0;X<localStorage.length;X++){const re=localStorage.key(X);re&&H.push(re)}H.forEach(X=>{try{localStorage.removeItem(X)}catch{}});const Q=[];for(let X=0;X<sessionStorage.length;X++){const re=sessionStorage.key(X);re&&Q.push(re)}Q.forEach(X=>{try{sessionStorage.removeItem(X)}catch{}})}catch(H){console.warn("Error clearing cache on sign out:",H)}}}catch{}F!=="SIGNED_IN"&&(s(M),r((M==null?void 0:M.user)??null)),g(!0),l(!1)});return()=>C.unsubscribe()},[]),p.useEffect(()=>{const R=async()=>{try{await ne.auth.getSession()}catch{}},C=()=>{try{document.visibilityState==="visible"&&R()}catch{}};window.addEventListener("focus",R),document.addEventListener("visibilitychange",C);const F=window.setInterval(()=>{try{document.visibilityState==="visible"&&ne.auth.getSession().catch(()=>{})}catch{}},4*60*1e3);return()=>{window.removeEventListener("focus",R),document.removeEventListener("visibilitychange",C);try{clearInterval(F)}catch{}}},[]);const U=p.useCallback(async()=>{try{E(!0);try{const R=[];for(let M=0;M<localStorage.length;M++){const A=localStorage.key(M);A&&R.push(A)}R.forEach(M=>{try{localStorage.removeItem(M)}catch{}});const C=[];for(let M=0;M<sessionStorage.length;M++){const A=sessionStorage.key(M);A&&C.push(A)}C.forEach(M=>{try{sessionStorage.removeItem(M)}catch{}});const F=["app.cached","app.lastAuthEvent","app.currentUserId","app.currentUserEmail","otpVerified","otpRequired","auth.intent","sb-"];Object.keys(localStorage).forEach(M=>{if(F.some(A=>M.includes(A)))try{localStorage.removeItem(M)}catch{}})}catch(R){console.warn("Error clearing cache:",R)}await ne.auth.signOut()}catch(R){console.error("Error signing out:",R)}finally{E(!1)}},[]),$=p.useCallback(async()=>{try{const{data:{user:R}}=await ne.auth.getUser();r(R)}catch(R){console.error("Error refreshing user:",R)}},[]),O=p.useMemo(()=>({user:n,session:a,loading:o,signOut:U,refreshUser:$,otpRequired:u,otpVerified:d,setOtpVerified:P,otpEvaluated:m,accountDeactivated:v,setAccountDeactivated:x}),[n,a,o,U,$,u,d,P,m,v,x]);return i.jsx(AF.Provider,{value:O,children:e})}function Vr(){const e=p.useContext(AF);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const Uu={analytics:["read"],ai_profiles:["create","update","delete","read_all","read_own"],ai_sessions:["create","update","delete","read_all","read_own"],channels:["create","update","delete","read_all","read_own"],contacts:["create","update","delete","read_all","read_own"],contact_identities:["create","update","delete","read_all","read_own"],threads:["create","update","delete","read_all","read_channel_owned","read_collaborator"],messages:["create","update","delete","send","read_all","read_collaborator"],ai_agent_files:["create","read","delete"],admin_panel:["read","update"],super_agents:["create","update","delete","read_all","read_own"],users_profile:["create","update","delete","read"],roles:["create","read","update","delete"],audit_logs:["read"],alerts:["read","ack"]},pw=e=>e==="create"?"create":e==="update"?"update":e==="delete"?"delete":e.startsWith("read")||e.startsWith("view")?"read":"special",iee=e=>["delete","manage_2fa","configure","update_token_limit","manage"].some(n=>e.includes(n)),EF=p.createContext(void 0);function see({children:e}){const{user:t,accountDeactivated:n}=Vr(),[r,a]=p.useState([]),[s,o]=p.useState([]),[l,c]=p.useState(null),[u,f]=p.useState(!0),[d,h]=p.useState(null),m=async(P,D)=>{try{D!=null&&D.background||f(!0),h(null);const{data:L,error:B}=await ne.from("v_current_user_permissions").select("*");if(B)throw B;const U=L||[];o(U);const{data:$,error:O}=await ne.from("user_roles").select("role_id").eq("user_id",P);if(O)throw O;if(!$||$.length===0){a([]),c({user_id:P,roles:[],permissions:U});return}const T=$.map(A=>A.role_id),{data:R,error:C}=await ne.from("roles").select("*").in("id",T);if(C)throw C;const F=R||[];a(F);const M=F.map(A=>({...A,permissions:U}));c({user_id:P,roles:M,permissions:U})}catch(L){console.error("Error fetching user RBAC:",L),h(L instanceof Error?L.message:"Failed to fetch user permissions")}finally{D!=null&&D.background||f(!1)}},g=async()=>{t!=null&&t.id&&await m(t.id,{background:!0})};p.useEffect(()=>{t!=null&&t.id&&!n?m(t.id):(a([]),o([]),c(null),f(!1))},[t==null?void 0:t.id,n]);const v=P=>{if(!P)return!1;if(r.some($=>$.name==="master_agent"))return!0;const D=String(P).trim().toLowerCase();if(s.some($=>($.name||"").trim().toLowerCase()===D)||s.some($=>`${$.resource}.${$.action}`.toLowerCase()===D))return!0;const U=D.indexOf(".");if(U>0){const $=D.slice(0,U),O=D.slice(U+1),R={edit:["update"],update:["edit"],remove:["delete"],delete:["remove"],send:["create"],read:["read_all","read_own","read_channel_owned","read_collaborator"],read_all:["read"]}[O]||[];if(R.length>0&&s.some(F=>R.some(M=>`${F.resource}.${F.action}`.toLowerCase()===`${$}.${M}`)))return!0}return!1},x=P=>P.some(D=>v(D)),y=P=>P.every(D=>v(D)),b=P=>r.some(D=>D.name===P),I={userRoles:r,userPermissions:s,userWithRoles:l,hasPermission:v,hasAnyPermission:x,hasAllPermissions:y,hasRole:b,hasAnyRole:P=>P.some(D=>b(D)),hasPermissionDB:async(P,D)=>{try{const{data:L,error:B}=await ne.rpc("has_perm",{p_resource:P,p_action:D});return B?(console.error("Error checking permission:",B),!1):L===!0}catch(L){return console.error("Error in hasPermissionDB:",L),!1}},can:(P,...D)=>!P||D.length===0?!1:D.every(L=>v(`${P}.${L}`)),canRead:P=>{const D=Uu[P];if(!Array.isArray(D))return!1;const L=D.filter(B=>B==="read"||B.startsWith("read_"));return L.length===0?!1:L.some(B=>v(`${P}.${B}`))},canCreate:P=>v(`${P}.create`),canUpdate:P=>v(`${P}.update`),canDelete:P=>v(`${P}.delete`),loading:u,error:d,refreshRBAC:g};return i.jsx(EF.Provider,{value:I,children:e})}function jr(){const e=p.useContext(EF);if(e===void 0)throw new Error("useRBAC must be used within an RBACProvider");return e}const kd=sp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Z=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},s)=>{const o=r?HS:"button";return i.jsx(o,{className:xe(kd({variant:t,size:n,className:e})),ref:s,...a})});Z.displayName="Button";const Ae=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:xe("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ae.displayName="Card";const tt=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:xe("flex flex-col space-y-1.5 p-6",e),...t}));tt.displayName="CardHeader";const Qe=p.forwardRef(({className:e,...t},n)=>i.jsx("h3",{ref:n,className:xe("text-2xl font-semibold leading-none tracking-tight",e),...t}));Qe.displayName="CardTitle";const di=p.forwardRef(({className:e,...t},n)=>i.jsx("p",{ref:n,className:xe("text-sm text-muted-foreground",e),...t}));di.displayName="CardDescription";const Je=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:xe("p-6 pt-0",e),...t}));Je.displayName="CardContent";const oee=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:xe("flex items-center p-6 pt-0",e),...t}));oee.displayName="CardFooter";const Ve=p.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:xe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Ve.displayName="Input";var lee="Label",PF=p.forwardRef((e,t)=>i.jsx(Ge.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));PF.displayName=lee;var TF=PF;const cee=sp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Be=p.forwardRef(({className:e,...t},n)=>i.jsx(TF,{ref:n,className:xe(cee(),e),...t}));Be.displayName=TF.displayName;var uee=p.createContext(void 0);function of(e){const t=p.useContext(uee);return e||t||"ltr"}var gw="rovingFocusGroup.onEntryFocus",dee={bubbles:!1,cancelable:!0},mp="RovingFocusGroup",[Q1,OF,fee]=ap(mp),[hee,Gy]=_r(mp,[fee]),[mee,pee]=hee(mp),IF=p.forwardRef((e,t)=>i.jsx(Q1.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Q1.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(gee,{...e,ref:t})})}));IF.displayName=mp;var gee=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...d}=e,h=p.useRef(null),m=St(t,h),g=of(s),[v,x]=Ca({prop:o,defaultProp:l??null,onChange:c,caller:mp}),[y,b]=p.useState(!1),w=Kn(u),j=OF(n),k=p.useRef(!1),[_,S]=p.useState(0);return p.useEffect(()=>{const E=h.current;if(E)return E.addEventListener(gw,w),()=>E.removeEventListener(gw,w)},[w]),i.jsx(mee,{scope:n,orientation:r,dir:g,loop:a,currentTabStopId:v,onItemFocus:p.useCallback(E=>x(E),[x]),onItemShiftTab:p.useCallback(()=>b(!0),[]),onFocusableItemAdd:p.useCallback(()=>S(E=>E+1),[]),onFocusableItemRemove:p.useCallback(()=>S(E=>E-1),[]),children:i.jsx(Ge.div,{tabIndex:y||_===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:Ee(e.onMouseDown,()=>{k.current=!0}),onFocus:Ee(e.onFocus,E=>{const N=!k.current;if(E.target===E.currentTarget&&N&&!y){const I=new CustomEvent(gw,dee);if(E.currentTarget.dispatchEvent(I),!I.defaultPrevented){const P=j().filter($=>$.focusable),D=P.find($=>$.active),L=P.find($=>$.id===v),U=[D,L,...P].filter(Boolean).map($=>$.ref.current);DF(U,f)}}k.current=!1}),onBlur:Ee(e.onBlur,()=>b(!1))})})}),RF="RovingFocusGroupItem",MF=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:s,children:o,...l}=e,c=ir(),u=s||c,f=pee(RF,n),d=f.currentTabStopId===u,h=OF(n),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:v}=f;return p.useEffect(()=>{if(r)return m(),()=>g()},[r,m,g]),i.jsx(Q1.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:i.jsx(Ge.span,{tabIndex:d?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:Ee(e.onMouseDown,x=>{r?f.onItemFocus(u):x.preventDefault()}),onFocus:Ee(e.onFocus,()=>f.onItemFocus(u)),onKeyDown:Ee(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=yee(x,f.orientation,f.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let w=h().filter(j=>j.focusable).map(j=>j.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const j=w.indexOf(x.currentTarget);w=f.loop?bee(w,j+1):w.slice(j+1)}setTimeout(()=>DF(w))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:v!=null}):o})})});MF.displayName=RF;var vee={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function xee(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function yee(e,t,n){const r=xee(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return vee[r]}function DF(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function bee(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var $F=IF,LF=MF,Yy="Tabs",[wee,o3e]=_r(Yy,[Gy]),FF=Gy(),[jee,_N]=wee(Yy),BF=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=of(l),[d,h]=Ca({prop:r,onChange:a,defaultProp:s??"",caller:Yy});return i.jsx(jee,{scope:n,baseId:ir(),value:d,onValueChange:h,orientation:o,dir:f,activationMode:c,children:i.jsx(Ge.div,{dir:f,"data-orientation":o,...u,ref:t})})});BF.displayName=Yy;var UF="TabsList",zF=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,s=_N(UF,n),o=FF(n);return i.jsx($F,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:i.jsx(Ge.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})});zF.displayName=UF;var qF="TabsTrigger",WF=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...s}=e,o=_N(qF,n),l=FF(n),c=KF(o.baseId,r),u=GF(o.baseId,r),f=r===o.value;return i.jsx(LF,{asChild:!0,...l,focusable:!a,active:f,children:i.jsx(Ge.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...s,ref:t,onMouseDown:Ee(e.onMouseDown,d=>{!a&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Ee(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Ee(e.onFocus,()=>{const d=o.activationMode!=="manual";!f&&!a&&d&&o.onValueChange(r)})})})});WF.displayName=qF;var HF="TabsContent",VF=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:s,...o}=e,l=_N(HF,n),c=KF(l.baseId,r),u=GF(l.baseId,r),f=r===l.value,d=p.useRef(f);return p.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),i.jsx(pr,{present:a||f,children:({present:h})=>i.jsx(Ge.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});VF.displayName=HF;function KF(e,t){return`${e}-trigger-${t}`}function GF(e,t){return`${e}-content-${t}`}var _ee=BF,YF=zF,XF=WF,JF=VF;const pl=_ee,so=p.forwardRef(({className:e,...t},n)=>i.jsx(YF,{ref:n,className:xe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));so.displayName=YF.displayName;const Gn=p.forwardRef(({className:e,...t},n)=>i.jsx(XF,{ref:n,className:xe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Gn.displayName=XF.displayName;const Dn=p.forwardRef(({className:e,...t},n)=>i.jsx(JF,{ref:n,className:xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Dn.displayName=JF.displayName;const kee=sp("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),sm=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:xe(kee({variant:t}),e),...n}));sm.displayName="Alert";const See=p.forwardRef(({className:e,...t},n)=>i.jsx("h5",{ref:n,className:xe("mb-1 font-medium leading-none tracking-tight",e),...t}));See.displayName="AlertTitle";const om=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:xe("text-sm [&_p]:leading-relaxed",e),...t}));om.displayName="AlertDescription";function Nee({sitekey:e,onVerify:t,onExpire:n,className:r}){const a=p.useRef(null),s=p.useRef(null);return p.useEffect(()=>(new Promise(l=>{if(window.hcaptcha)return l();const c=document.createElement("script");c.src="https://js.hcaptcha.com/1/api.js",c.async=!0,c.defer=!0,c.onload=()=>l(),document.head.appendChild(c)}).then(()=>{a.current&&s.current===null&&(s.current=window.hcaptcha.render(a.current,{sitekey:e,callback:l=>t(l),"expired-callback":()=>n&&n()}))}),()=>{try{s.current!==null&&window.hcaptcha&&window.hcaptcha.remove(s.current)}catch{}}),[e]),i.jsx("div",{className:r,children:i.jsx("div",{ref:a})})}const Cee="vite_react_shadcn_ts",Aee="0.1.15",Eee="module",Pee={predev:"echo skip changelog copy",dev:"vite",prebuild:"echo skip changelog copy",build:"vite build","build:dev":"vite build --mode development",lint:"eslint .",preview:"vite preview",test:"vitest",sync:"node sync/index.js"},Tee={"@hookform/resolvers":"^3.10.0","@radix-ui/react-accordion":"^1.2.11","@radix-ui/react-alert-dialog":"^1.1.14","@radix-ui/react-aspect-ratio":"^1.1.7","@radix-ui/react-avatar":"^1.1.10","@radix-ui/react-checkbox":"^1.3.2","@radix-ui/react-collapsible":"^1.1.11","@radix-ui/react-context-menu":"^2.2.15","@radix-ui/react-dialog":"^1.1.14","@radix-ui/react-dropdown-menu":"^2.1.15","@radix-ui/react-hover-card":"^1.1.14","@radix-ui/react-label":"^2.1.7","@radix-ui/react-menubar":"^1.1.15","@radix-ui/react-navigation-menu":"^1.2.13","@radix-ui/react-popover":"^1.1.14","@radix-ui/react-progress":"^1.1.7","@radix-ui/react-radio-group":"^1.3.7","@radix-ui/react-scroll-area":"^1.2.9","@radix-ui/react-select":"^2.2.5","@radix-ui/react-separator":"^1.1.7","@radix-ui/react-slider":"^1.3.5","@radix-ui/react-slot":"^1.2.3","@radix-ui/react-switch":"^1.2.5","@radix-ui/react-tabs":"^1.1.12","@radix-ui/react-toast":"^1.2.14","@radix-ui/react-toggle":"^1.1.9","@radix-ui/react-toggle-group":"^1.1.10","@radix-ui/react-tooltip":"^1.2.7","@supabase/supabase-js":"^2.55.0","@tanstack/react-query":"^5.83.0","class-variance-authority":"^0.7.1",clsx:"^2.1.1",cmdk:"^1.1.1","date-fns":"^3.6.0","embla-carousel-react":"^8.6.0","input-otp":"^1.4.2","lucide-react":"^0.462.0","next-themes":"^0.3.0",react:"^18.3.1","react-day-picker":"^8.10.1","react-dom":"^18.3.1","react-hook-form":"^7.61.1","react-markdown":"^9.1.0","react-resizable-panels":"^2.1.9","react-router-dom":"^6.30.1",recharts:"^2.15.4","remark-gfm":"^4.0.1",sonner:"^1.7.4",dotenv:"^16.4.5","tailwind-merge":"^2.6.0","tailwindcss-animate":"^1.0.7",vaul:"^0.9.9",ws:"^8.18.0",zod:"^3.25.76"},Oee={"@eslint/js":"^9.32.0","@tailwindcss/typography":"^0.5.16","@types/node":"^22.16.5","@types/react":"^18.3.23","@types/react-dom":"^18.3.7","@vitejs/plugin-react-swc":"^3.11.0",autoprefixer:"^10.4.21",eslint:"^9.32.0","eslint-plugin-react-hooks":"^5.2.0","eslint-plugin-react-refresh":"^0.4.20",globals:"^15.15.0",postcss:"^8.5.6",tailwindcss:"^3.4.17",typescript:"^5.8.3","typescript-eslint":"^8.38.0",vite:"^5.4.19",vitest:"^1.6.0"},vw={name:Cee,private:!0,version:Aee,type:Eee,scripts:Pee,dependencies:Tee,devDependencies:Oee};function Iee({onBack:e}){const t=Ka(),[n,r]=p.useState("login"),[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[f,d]=p.useState(null),[h,m]=p.useState(null),[g,v]=p.useState(null),x="30583a2e-84ac-496a-8ec2-23043ae06dc0",y=!!x,b=()=>{var I,P;try{(P=(I=window==null?void 0:window.hcaptcha)==null?void 0:I.reset)==null||P.call(I)}catch{}},[w,j]=p.useState(""),[k,_]=p.useState("");p.useState(""),p.useState("");const S=async I=>{var P;if(I.preventDefault(),s(!0),u(null),v(null),!h){v("Please complete the CAPTCHA"),s(!1);return}try{const{data:D,error:L}=await ne.auth.signInWithPassword({email:w,password:k,...y&&h?{options:{captchaToken:h}}:{}});if(L)throw L;const B=(P=D.user)==null?void 0:P.id;if(B)try{const{data:U,error:$}=await ne.from("users_profile").select("is_active, is_2fa_email_enabled").eq("user_id",B).maybeSingle();if($)throw console.error("Profile fetch error:",$),$;if(!U){await ne.auth.signOut(),u("Your account profile is missing. Please contact your Master Agent."),s(!1);return}if(U.is_active===!1){t("/account-deactivated",{replace:!0});return}const O=(U==null?void 0:U.is_2fa_email_enabled)===!0;Ie.success("Login successful!"),t("/",{replace:!0});return}catch(U){console.warn("Profile fetch failed:",U),Ie.success("Login successful!")}else Ie.success("Login successful!");t("/",{replace:!0})}catch(D){console.error("Login error:",D),u(D instanceof Error?D.message:"Failed to login"),Ie.error("Login failed"),b()}finally{s(!1)}},E=async I=>{I.preventDefault(),s(!0),u(null);try{const{error:P}=await ne.auth.resetPasswordForEmail(w,{redirectTo:`${window.location.origin}/reset-password`});if(P)throw P;d("Password reset email sent! Please check your inbox."),Ie.success("Password reset email sent!")}catch(P){console.error("Password reset error:",P),u(P instanceof Error?P.message:"Failed to send reset email"),Ie.error("Failed to send reset email")}finally{s(!1)}},N=()=>{u(null),d(null)};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Ae,{className:"w-full max-w-md",children:[i.jsxs(tt,{className:"space-y-1",children:[e&&i.jsxs(Z,{variant:"ghost",size:"sm",onClick:e,className:"absolute top-4 left-4",children:[i.jsx(op,{className:"w-4 h-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"text-center",children:[i.jsx(Qe,{className:"text-2xl font-bold",children:"Welcome back"}),i.jsx(di,{children:"Sign in to continue to Chatflow"})]})]}),i.jsx(Je,{children:i.jsxs(pl,{value:n,onValueChange:I=>{r(I),N()},children:[i.jsxs(so,{className:"grid w-full grid-cols-2",children:[i.jsx(Gn,{value:"login",children:"Login"}),i.jsx(Gn,{value:"reset",children:"Reset"})]}),c&&i.jsx(sm,{className:"mt-4 border-red-200 bg-red-50",children:i.jsx(om,{className:"text-red-800",children:c})}),f&&i.jsx(sm,{className:"mt-4 border-green-200 bg-green-50",children:i.jsx(om,{className:"text-green-800",children:f})}),i.jsx(Dn,{value:"login",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:S,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"login-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Bv,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ve,{id:"login-email",type:"email",placeholder:"Enter your email",value:w,onChange:I=>j(I.target.value),className:"pl-10",required:!0})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Well send a one-time code after login."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"login-password",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ve,{id:"login-password",type:o?"text":"password",placeholder:"Enter your password",value:k,onChange:I=>_(I.target.value),className:"pl-10 pr-10",required:!0}),i.jsx(Z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?i.jsx(UL,{className:"h-4 w-4"}):i.jsx(JS,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"flex items-center justify-end text-xs",children:i.jsx(qP,{to:"/reset-password",className:"hover:underline",children:"Forgot password?"})})]}),i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(Nee,{sitekey:x,onVerify:I=>m(I),onExpire:()=>{m(null)}}),g&&i.jsx("p",{className:"text-xs text-red-600 mt-1",children:g})]}),i.jsx(Z,{type:"submit",className:"w-full",disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:i.jsxs(qP,{to:"/changelog",className:"hover:underline",children:["v",vw==null?void 0:vw.version]})})]})}),i.jsx(Dn,{value:"reset",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:E,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"reset-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Bv,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ve,{id:"reset-email",type:"email",placeholder:"Enter your email",value:w,onChange:I=>j(I.target.value),className:"pl-10",required:!0})]})]}),i.jsx(Z,{type:"submit",className:"w-full",disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending reset email..."]}):"Send Reset Email"})]})})]})})]})})}function vg({children:e}){const{user:t,loading:n,otpRequired:r,otpVerified:a,otpEvaluated:s}=Vr(),o=Ka(),l=kl();if(p.useEffect(()=>{var u;if(!n&&s&&t){const f=l.pathname==="/otp",d=l.pathname==="/reset-password",h=l.pathname==="/invite";let m=!1;try{const g=new URL(window.location.href),v=g.searchParams.get("type"),x=g.searchParams.get("code"),y=window.location.hash||"";m=v==="invite"||x&&!y.includes("access_token=")||y.includes("type=invite")||window.location.pathname==="/invite"}catch{}if(t&&(async()=>{try{const{data:g}=await ne.from("users_profile").select("password_set").eq("user_id",t.id).single();if(g&&g.password_set===!1){setTimeout(()=>o("/reset-password",{replace:!0}),0);return}}catch{}})(),m&&!d&&!h){setTimeout(()=>o("/reset-password",{replace:!0}),0);return}if(r&&!a&&!f){let g="2fa";try{new URL(window.location.href).searchParams.get("type")==="recovery"&&(g="recovery"),(u=window.location.hash)!=null&&u.includes("access_token=")&&(g="recovery"),localStorage.getItem("auth.intent")==="recovery"&&(g="recovery")}catch{}setTimeout(()=>o("/otp",{replace:!0,state:{from:l.pathname,intent:g}}),0)}}},[t,n,s,r,a,l.pathname,o]),n)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),i.jsx("span",{children:"Loading..."})]})});if(!t)return i.jsx(Iee,{});const c=l.pathname==="/otp";return t&&r&&!a&&!c?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),i.jsx("span",{children:"Redirecting"})]})}):i.jsx(i.Fragment,{children:e})}const Ree=sp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:opacity-90",secondary:"border-transparent bg-secondary text-secondary-foreground hover:opacity-90",destructive:"border-transparent bg-destructive text-destructive-foreground hover:opacity-90",outline:"text-foreground hover:opacity-90"}},defaultVariants:{variant:"default"}}),It=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,className:xe(Ree({variant:t}),e),...n}));It.displayName="Badge";var Mee="Separator",fT="horizontal",Dee=["horizontal","vertical"],QF=p.forwardRef((e,t)=>{const{decorative:n,orientation:r=fT,...a}=e,s=$ee(r)?r:fT,l=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return i.jsx(Ge.div,{"data-orientation":s,...l,...a,ref:t})});QF.displayName=Mee;function $ee(e){return Dee.includes(e)}var ZF=QF;const lm=p.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>i.jsx(ZF,{ref:a,decorative:n,orientation:t,className:xe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));lm.displayName=ZF.displayName;var xw=0;function Xy(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??hT()),document.body.insertAdjacentElement("beforeend",e[1]??hT()),xw++,()=>{xw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),xw--}},[])}function hT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var yw="focusScope.autoFocusOnMount",bw="focusScope.autoFocusOnUnmount",mT={bubbles:!1,cancelable:!0},Lee="FocusScope",pp=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...o}=e,[l,c]=p.useState(null),u=Kn(a),f=Kn(s),d=p.useRef(null),h=St(t,v=>c(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(w){if(m.paused||!l)return;const j=w.target;l.contains(j)?d.current=j:Ro(d.current,{select:!0})},x=function(w){if(m.paused||!l)return;const j=w.relatedTarget;j!==null&&(l.contains(j)||Ro(d.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&Ro(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const b=new MutationObserver(y);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),b.disconnect()}}},[r,l,m.paused]),p.useEffect(()=>{if(l){gT.add(m);const v=document.activeElement;if(!l.contains(v)){const y=new CustomEvent(yw,mT);l.addEventListener(yw,u),l.dispatchEvent(y),y.defaultPrevented||(Fee(Wee(e3(l)),{select:!0}),document.activeElement===v&&Ro(l))}return()=>{l.removeEventListener(yw,u),setTimeout(()=>{const y=new CustomEvent(bw,mT);l.addEventListener(bw,f),l.dispatchEvent(y),y.defaultPrevented||Ro(v??document.body,{select:!0}),l.removeEventListener(bw,f),gT.remove(m)},0)}}},[l,u,f,m]);const g=p.useCallback(v=>{if(!n&&!r||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const b=v.currentTarget,[w,j]=Bee(b);w&&j?!v.shiftKey&&y===j?(v.preventDefault(),n&&Ro(w,{select:!0})):v.shiftKey&&y===w&&(v.preventDefault(),n&&Ro(j,{select:!0})):y===b&&v.preventDefault()}},[n,r,m.paused]);return i.jsx(Ge.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});pp.displayName=Lee;function Fee(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Ro(r,{select:t}),document.activeElement!==n)return}function Bee(e){const t=e3(e),n=pT(t,e),r=pT(t.reverse(),e);return[n,r]}function e3(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function pT(e,t){for(const n of e)if(!Uee(n,{upTo:t}))return n}function Uee(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function zee(e){return e instanceof HTMLInputElement&&"select"in e}function Ro(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&zee(e)&&t&&e.select()}}var gT=qee();function qee(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=vT(e,t),e.unshift(t)},remove(t){var n;e=vT(e,t),(n=e[0])==null||n.resume()}}}function vT(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Wee(e){return e.filter(t=>t.tagName!=="A")}var Hee=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},uu=new WeakMap,xg=new WeakMap,yg={},ww=0,t3=function(e){return e&&(e.host||t3(e.parentNode))},Vee=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=t3(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Kee=function(e,t,n,r){var a=Vee(t,Array.isArray(e)?e:[e]);yg[n]||(yg[n]=new WeakMap);var s=yg[n],o=[],l=new Set,c=new Set(a),u=function(d){!d||l.has(d)||(l.add(d),u(d.parentNode))};a.forEach(u);var f=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(l.has(h))f(h);else try{var m=h.getAttribute(r),g=m!==null&&m!=="false",v=(uu.get(h)||0)+1,x=(s.get(h)||0)+1;uu.set(h,v),s.set(h,x),o.push(h),v===1&&g&&xg.set(h,!0),x===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return f(t),l.clear(),ww++,function(){o.forEach(function(d){var h=uu.get(d)-1,m=s.get(d)-1;uu.set(d,h),s.set(d,m),h||(xg.has(d)||d.removeAttribute(r),xg.delete(d)),m||d.removeAttribute(n)}),ww--,ww||(uu=new WeakMap,uu=new WeakMap,xg=new WeakMap,yg={})}},Jy=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Hee(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),Kee(r,a,n,"aria-hidden")):function(){return null}},is=function(){return is=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},is.apply(this,arguments)};function n3(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Gee(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,s;r<a;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var uv="right-scroll-bar-position",dv="width-before-scroll-bar",Yee="with-scroll-bars-hidden",Xee="--removed-body-scroll-bar-size";function jw(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Jee(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var Qee=typeof window<"u"?p.useLayoutEffect:p.useEffect,xT=new WeakMap;function Zee(e,t){var n=Jee(null,function(r){return e.forEach(function(a){return jw(a,r)})});return Qee(function(){var r=xT.get(n);if(r){var a=new Set(r),s=new Set(e),o=n.current;a.forEach(function(l){s.has(l)||jw(l,null)}),s.forEach(function(l){a.has(l)||jw(l,o)})}xT.set(n,e)},[e]),n}function ete(e){return e}function tte(e,t){t===void 0&&(t=ete);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(s),o=n}var c=function(){var f=o;o=[],f.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){o.push(f),u()},filter:function(f){return o=o.filter(f),n}}}};return a}function nte(e){e===void 0&&(e={});var t=tte(null);return t.options=is({async:!0,ssr:!1},e),t}var r3=function(e){var t=e.sideCar,n=n3(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,is({},n))};r3.isSideCarExport=!0;function rte(e,t){return e.useMedium(t),r3}var a3=nte(),_w=function(){},Qy=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:_w,onWheelCapture:_w,onTouchMoveCapture:_w}),a=r[0],s=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,m=e.noRelative,g=e.noIsolation,v=e.inert,x=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,w=e.gapMode,j=n3(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=h,_=Zee([n,t]),S=is(is({},j),a);return p.createElement(p.Fragment,null,f&&p.createElement(k,{sideCar:a3,removeScrollBar:u,shards:d,noRelative:m,noIsolation:g,inert:v,setCallbacks:s,allowPinchZoom:!!x,lockRef:n,gapMode:w}),o?p.cloneElement(p.Children.only(l),is(is({},S),{ref:_})):p.createElement(b,is({},S,{className:c,ref:_}),l))});Qy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qy.classNames={fullWidth:dv,zeroRight:uv};var ate=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ite(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ate();return t&&e.setAttribute("nonce",t),e}function ste(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function ote(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var lte=function(){var e=0,t=null;return{add:function(n){e==0&&(t=ite())&&(ste(t,n),ote(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},cte=function(){var e=lte();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},i3=function(){var e=cte(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},ute={left:0,top:0,right:0,gap:0},kw=function(e){return parseInt(e||"",10)||0},dte=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[kw(n),kw(r),kw(a)]},fte=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ute;var t=dte(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},hte=i3(),Zu="data-scroll-locked",mte=function(e,t,n,r){var a=e.left,s=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Yee,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Zu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(uv,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(dv,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(uv," .").concat(uv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(dv," .").concat(dv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Zu,`] {
    `).concat(Xee,": ").concat(l,`px;
  }
`)},yT=function(){var e=parseInt(document.body.getAttribute(Zu)||"0",10);return isFinite(e)?e:0},pte=function(){p.useEffect(function(){return document.body.setAttribute(Zu,(yT()+1).toString()),function(){var e=yT()-1;e<=0?document.body.removeAttribute(Zu):document.body.setAttribute(Zu,e.toString())}},[])},gte=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;pte();var s=p.useMemo(function(){return fte(a)},[a]);return p.createElement(hte,{styles:mte(s,!t,a,n?"":"!important")})},Z1=!1;if(typeof window<"u")try{var bg=Object.defineProperty({},"passive",{get:function(){return Z1=!0,!0}});window.addEventListener("test",bg,bg),window.removeEventListener("test",bg,bg)}catch{Z1=!1}var du=Z1?{passive:!1}:!1,vte=function(e){return e.tagName==="TEXTAREA"},s3=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!vte(e)&&n[t]==="visible")},xte=function(e){return s3(e,"overflowY")},yte=function(e){return s3(e,"overflowX")},bT=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=o3(e,r);if(a){var s=l3(e,r),o=s[1],l=s[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},bte=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},wte=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},o3=function(e,t){return e==="v"?xte(t):yte(t)},l3=function(e,t){return e==="v"?bte(t):wte(t)},jte=function(e,t){return e==="h"&&t==="rtl"?-1:1},_te=function(e,t,n,r,a){var s=jte(e,window.getComputedStyle(t).direction),o=s*r,l=n.target,c=t.contains(l),u=!1,f=o>0,d=0,h=0;do{if(!l)break;var m=l3(e,l),g=m[0],v=m[1],x=m[2],y=v-x-s*g;(g||y)&&o3(e,l)&&(d+=y,h+=g);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(d)<1||!a)||!f&&(Math.abs(h)<1||!a))&&(u=!0),u},wg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},wT=function(e){return[e.deltaX,e.deltaY]},jT=function(e){return e&&"current"in e?e.current:e},kte=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Ste=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Nte=0,fu=[];function Cte(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),a=p.useState(Nte++)[0],s=p.useState(i3)[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=Gee([e.lockRef.current],(e.shards||[]).map(jT),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var y=wg(v),b=n.current,w="deltaX"in v?v.deltaX:b[0]-y[0],j="deltaY"in v?v.deltaY:b[1]-y[1],k,_=v.target,S=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in v&&S==="h"&&_.type==="range")return!1;var E=bT(S,_);if(!E)return!0;if(E?k=S:(k=S==="v"?"h":"v",E=bT(S,_)),!E)return!1;if(!r.current&&"changedTouches"in v&&(w||j)&&(r.current=k),!k)return!0;var N=r.current||k;return _te(N,x,v,N==="h"?w:j,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!fu.length||fu[fu.length-1]!==s)){var y="deltaY"in x?wT(x):wg(x),b=t.current.filter(function(k){return k.name===x.type&&(k.target===x.target||x.target===k.shadowParent)&&kte(k.delta,y)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(jT).filter(Boolean).filter(function(k){return k.contains(x.target)}),j=w.length>0?l(x,w[0]):!o.current.noIsolation;j&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,y,b){var w={name:v,delta:x,target:y,should:b,shadowParent:Ate(y)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),f=p.useCallback(function(v){n.current=wg(v),r.current=void 0},[]),d=p.useCallback(function(v){u(v.type,wT(v),v.target,l(v,e.lockRef.current))},[]),h=p.useCallback(function(v){u(v.type,wg(v),v.target,l(v,e.lockRef.current))},[]);p.useEffect(function(){return fu.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,du),document.addEventListener("touchmove",c,du),document.addEventListener("touchstart",f,du),function(){fu=fu.filter(function(v){return v!==s}),document.removeEventListener("wheel",c,du),document.removeEventListener("touchmove",c,du),document.removeEventListener("touchstart",f,du)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(s,{styles:Ste(a)}):null,m?p.createElement(gte,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Ate(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Ete=rte(a3,Cte);var gp=p.forwardRef(function(e,t){return p.createElement(Qy,is({},e,{ref:t,sideCar:Ete}))});gp.classNames=Qy.classNames;var e_=["Enter"," "],Pte=["ArrowDown","PageUp","Home"],c3=["ArrowUp","PageDown","End"],Tte=[...Pte,...c3],Ote={ltr:[...e_,"ArrowRight"],rtl:[...e_,"ArrowLeft"]},Ite={ltr:["ArrowLeft"],rtl:["ArrowRight"]},vp="Menu",[cm,Rte,Mte]=ap(vp),[Xc,u3]=_r(vp,[Mte,jl,Gy]),Zy=jl(),d3=Gy(),[Dte,Jc]=Xc(vp),[$te,xp]=Xc(vp),f3=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:s,modal:o=!0}=e,l=Zy(t),[c,u]=p.useState(null),f=p.useRef(!1),d=Kn(s),h=of(a);return p.useEffect(()=>{const m=()=>{f.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>f.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),i.jsx(Oy,{...l,children:i.jsx(Dte,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:u,children:i.jsx($te,{scope:t,onClose:p.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:h,modal:o,children:r})})})};f3.displayName=vp;var Lte="MenuAnchor",kN=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Zy(n);return i.jsx(up,{...a,...r,ref:t})});kN.displayName=Lte;var SN="MenuPortal",[Fte,h3]=Xc(SN,{forceMount:void 0}),m3=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,s=Jc(SN,t);return i.jsx(Fte,{scope:t,forceMount:n,children:i.jsx(pr,{present:n||s.open,children:i.jsx(Zd,{asChild:!0,container:a,children:r})})})};m3.displayName=SN;var fi="MenuContent",[Bte,NN]=Xc(fi),p3=p.forwardRef((e,t)=>{const n=h3(fi,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,s=Jc(fi,e.__scopeMenu),o=xp(fi,e.__scopeMenu);return i.jsx(cm.Provider,{scope:e.__scopeMenu,children:i.jsx(pr,{present:r||s.open,children:i.jsx(cm.Slot,{scope:e.__scopeMenu,children:o.modal?i.jsx(Ute,{...a,ref:t}):i.jsx(zte,{...a,ref:t})})})})}),Ute=p.forwardRef((e,t)=>{const n=Jc(fi,e.__scopeMenu),r=p.useRef(null),a=St(t,r);return p.useEffect(()=>{const s=r.current;if(s)return Jy(s)},[]),i.jsx(CN,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ee(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),zte=p.forwardRef((e,t)=>{const n=Jc(fi,e.__scopeMenu);return i.jsx(CN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),qte=fl("MenuContent.ScrollLock"),CN=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...v}=e,x=Jc(fi,n),y=xp(fi,n),b=Zy(n),w=d3(n),j=Rte(n),[k,_]=p.useState(null),S=p.useRef(null),E=St(t,S,x.onContentChange),N=p.useRef(0),I=p.useRef(""),P=p.useRef(0),D=p.useRef(null),L=p.useRef("right"),B=p.useRef(0),U=g?gp:p.Fragment,$=g?{as:qte,allowPinchZoom:!0}:void 0,O=R=>{var H,Q;const C=I.current+R,F=j().filter(X=>!X.disabled),M=document.activeElement,A=(H=F.find(X=>X.ref.current===M))==null?void 0:H.textValue,W=F.map(X=>X.textValue),G=tne(W,C,A),Y=(Q=F.find(X=>X.textValue===G))==null?void 0:Q.ref.current;(function X(re){I.current=re,window.clearTimeout(N.current),re!==""&&(N.current=window.setTimeout(()=>X(""),1e3))})(C),Y&&setTimeout(()=>Y.focus())};p.useEffect(()=>()=>window.clearTimeout(N.current),[]),Xy();const T=p.useCallback(R=>{var F,M;return L.current===((F=D.current)==null?void 0:F.side)&&rne(R,(M=D.current)==null?void 0:M.area)},[]);return i.jsx(Bte,{scope:n,searchRef:I,onItemEnter:p.useCallback(R=>{T(R)&&R.preventDefault()},[T]),onItemLeave:p.useCallback(R=>{var C;T(R)||((C=S.current)==null||C.focus(),_(null))},[T]),onTriggerLeave:p.useCallback(R=>{T(R)&&R.preventDefault()},[T]),pointerGraceTimerRef:P,onPointerGraceIntentChange:p.useCallback(R=>{D.current=R},[]),children:i.jsx(U,{...$,children:i.jsx(pp,{asChild:!0,trapped:a,onMountAutoFocus:Ee(s,R=>{var C;R.preventDefault(),(C=S.current)==null||C.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(Kc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:i.jsx($F,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:_,onEntryFocus:Ee(c,R=>{y.isUsingKeyboardRef.current||R.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Iy,{role:"menu","aria-orientation":"vertical","data-state":T3(x.open),"data-radix-menu-content":"",dir:y.dir,...b,...v,ref:E,style:{outline:"none",...v.style},onKeyDown:Ee(v.onKeyDown,R=>{const F=R.target.closest("[data-radix-menu-content]")===R.currentTarget,M=R.ctrlKey||R.altKey||R.metaKey,A=R.key.length===1;F&&(R.key==="Tab"&&R.preventDefault(),!M&&A&&O(R.key));const W=S.current;if(R.target!==W||!Tte.includes(R.key))return;R.preventDefault();const Y=j().filter(H=>!H.disabled).map(H=>H.ref.current);c3.includes(R.key)&&Y.reverse(),Zte(Y)}),onBlur:Ee(e.onBlur,R=>{R.currentTarget.contains(R.target)||(window.clearTimeout(N.current),I.current="")}),onPointerMove:Ee(e.onPointerMove,um(R=>{const C=R.target,F=B.current!==R.clientX;if(R.currentTarget.contains(C)&&F){const M=R.clientX>B.current?"right":"left";L.current=M,B.current=R.clientX}}))})})})})})})});p3.displayName=fi;var Wte="MenuGroup",AN=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Ge.div,{role:"group",...r,ref:t})});AN.displayName=Wte;var Hte="MenuLabel",g3=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Ge.div,{...r,ref:t})});g3.displayName=Hte;var Jv="MenuItem",_T="menu.itemSelect",eb=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,s=p.useRef(null),o=xp(Jv,e.__scopeMenu),l=NN(Jv,e.__scopeMenu),c=St(t,s),u=p.useRef(!1),f=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(_T,{bubbles:!0,cancelable:!0});d.addEventListener(_T,m=>r==null?void 0:r(m),{once:!0}),VS(d,h),h.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(v3,{...a,ref:c,disabled:n,onClick:Ee(e.onClick,f),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),u.current=!0},onPointerUp:Ee(e.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:Ee(e.onKeyDown,d=>{const h=l.searchRef.current!=="";n||h&&d.key===" "||e_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});eb.displayName=Jv;var v3=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...s}=e,o=NN(Jv,n),l=d3(n),c=p.useRef(null),u=St(t,c),[f,d]=p.useState(!1),[h,m]=p.useState("");return p.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[s.children]),i.jsx(cm.ItemSlot,{scope:n,disabled:r,textValue:a??h,children:i.jsx(LF,{asChild:!0,...l,focusable:!r,children:i.jsx(Ge.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:Ee(e.onPointerMove,um(g=>{r?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ee(e.onPointerLeave,um(g=>o.onItemLeave(g))),onFocus:Ee(e.onFocus,()=>d(!0)),onBlur:Ee(e.onBlur,()=>d(!1))})})})}),Vte="MenuCheckboxItem",x3=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return i.jsx(_3,{scope:e.__scopeMenu,checked:n,children:i.jsx(eb,{role:"menuitemcheckbox","aria-checked":Qv(n)?"mixed":n,...a,ref:t,"data-state":PN(n),onSelect:Ee(a.onSelect,()=>r==null?void 0:r(Qv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});x3.displayName=Vte;var y3="MenuRadioGroup",[Kte,Gte]=Xc(y3,{value:void 0,onValueChange:()=>{}}),b3=p.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,s=Kn(r);return i.jsx(Kte,{scope:e.__scopeMenu,value:n,onValueChange:s,children:i.jsx(AN,{...a,ref:t})})});b3.displayName=y3;var w3="MenuRadioItem",j3=p.forwardRef((e,t)=>{const{value:n,...r}=e,a=Gte(w3,e.__scopeMenu),s=n===a.value;return i.jsx(_3,{scope:e.__scopeMenu,checked:s,children:i.jsx(eb,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":PN(s),onSelect:Ee(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});j3.displayName=w3;var EN="MenuItemIndicator",[_3,Yte]=Xc(EN,{checked:!1}),k3=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,s=Yte(EN,n);return i.jsx(pr,{present:r||Qv(s.checked)||s.checked===!0,children:i.jsx(Ge.span,{...a,ref:t,"data-state":PN(s.checked)})})});k3.displayName=EN;var Xte="MenuSeparator",S3=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Ge.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});S3.displayName=Xte;var Jte="MenuArrow",N3=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Zy(n);return i.jsx(Ry,{...a,...r,ref:t})});N3.displayName=Jte;var Qte="MenuSub",[l3e,C3]=Xc(Qte),oh="MenuSubTrigger",A3=p.forwardRef((e,t)=>{const n=Jc(oh,e.__scopeMenu),r=xp(oh,e.__scopeMenu),a=C3(oh,e.__scopeMenu),s=NN(oh,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,u={__scopeMenu:e.__scopeMenu},f=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>f,[f]),p.useEffect(()=>{const d=l.current;return()=>{window.clearTimeout(d),c(null)}},[l,c]),i.jsx(kN,{asChild:!0,...u,children:i.jsx(v3,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":T3(n.open),...e,ref:ro(t,a.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ee(e.onPointerMove,um(d=>{s.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ee(e.onPointerLeave,um(d=>{var m,g;f();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(g=n.content)==null?void 0:g.dataset.side,x=v==="right",y=x?-5:5,b=h[x?"left":"right"],w=h[x?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:b,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:b,y:h.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Ee(e.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";e.disabled||h&&d.key===" "||Ote[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});A3.displayName=oh;var E3="MenuSubContent",P3=p.forwardRef((e,t)=>{const n=h3(fi,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,s=Jc(fi,e.__scopeMenu),o=xp(fi,e.__scopeMenu),l=C3(E3,e.__scopeMenu),c=p.useRef(null),u=St(t,c);return i.jsx(cm.Provider,{scope:e.__scopeMenu,children:i.jsx(pr,{present:r||s.open,children:i.jsx(cm.Slot,{scope:e.__scopeMenu,children:i.jsx(CN,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var d;o.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ee(e.onFocusOutside,f=>{f.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Ee(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ee(e.onKeyDown,f=>{var m;const d=f.currentTarget.contains(f.target),h=Ite[o.dir].includes(f.key);d&&h&&(s.onOpenChange(!1),(m=l.trigger)==null||m.focus(),f.preventDefault())})})})})})});P3.displayName=E3;function T3(e){return e?"open":"closed"}function Qv(e){return e==="indeterminate"}function PN(e){return Qv(e)?"indeterminate":e?"checked":"unchecked"}function Zte(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function ene(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function tne(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let o=ene(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function nne(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,f=l.y,d=c.x,h=c.y;f>r!=h>r&&n<(d-u)*(r-f)/(h-f)+u&&(a=!a)}return a}function rne(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return nne(n,t)}function um(e){return t=>t.pointerType==="mouse"?e(t):void 0}var ane=f3,ine=kN,sne=m3,one=p3,lne=AN,cne=g3,une=eb,dne=x3,fne=b3,hne=j3,mne=k3,pne=S3,gne=N3,vne=A3,xne=P3,tb="DropdownMenu",[yne,c3e]=_r(tb,[u3]),la=u3(),[bne,O3]=yne(tb),I3=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:s,onOpenChange:o,modal:l=!0}=e,c=la(t),u=p.useRef(null),[f,d]=Ca({prop:a,defaultProp:s??!1,onChange:o,caller:tb});return i.jsx(bne,{scope:t,triggerId:ir(),triggerRef:u,contentId:ir(),open:f,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:l,children:i.jsx(ane,{...c,open:f,onOpenChange:d,dir:r,modal:l,children:n})})};I3.displayName=tb;var R3="DropdownMenuTrigger",M3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,s=O3(R3,n),o=la(n);return i.jsx(ine,{asChild:!0,...o,children:i.jsx(Ge.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:ro(t,s.triggerRef),onPointerDown:Ee(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:Ee(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});M3.displayName=R3;var wne="DropdownMenuPortal",D3=e=>{const{__scopeDropdownMenu:t,...n}=e,r=la(t);return i.jsx(sne,{...r,...n})};D3.displayName=wne;var $3="DropdownMenuContent",L3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=O3($3,n),s=la(n),o=p.useRef(!1);return i.jsx(one,{id:a.contentId,"aria-labelledby":a.triggerId,...s,...r,ref:t,onCloseAutoFocus:Ee(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ee(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,f=c.button===2||u;(!a.modal||f)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});L3.displayName=$3;var jne="DropdownMenuGroup",_ne=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(lne,{...a,...r,ref:t})});_ne.displayName=jne;var kne="DropdownMenuLabel",F3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(cne,{...a,...r,ref:t})});F3.displayName=kne;var Sne="DropdownMenuItem",B3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(une,{...a,...r,ref:t})});B3.displayName=Sne;var Nne="DropdownMenuCheckboxItem",U3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(dne,{...a,...r,ref:t})});U3.displayName=Nne;var Cne="DropdownMenuRadioGroup",Ane=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(fne,{...a,...r,ref:t})});Ane.displayName=Cne;var Ene="DropdownMenuRadioItem",z3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(hne,{...a,...r,ref:t})});z3.displayName=Ene;var Pne="DropdownMenuItemIndicator",q3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(mne,{...a,...r,ref:t})});q3.displayName=Pne;var Tne="DropdownMenuSeparator",W3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(pne,{...a,...r,ref:t})});W3.displayName=Tne;var One="DropdownMenuArrow",Ine=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(gne,{...a,...r,ref:t})});Ine.displayName=One;var Rne="DropdownMenuSubTrigger",H3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(vne,{...a,...r,ref:t})});H3.displayName=Rne;var Mne="DropdownMenuSubContent",V3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(xne,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});V3.displayName=Mne;var Dne=I3,$ne=M3,Lne=D3,K3=L3,G3=F3,Y3=B3,X3=U3,J3=z3,Q3=q3,Z3=W3,e5=H3,t5=V3;const _u=Dne,ku=$ne,Fne=p.forwardRef(({className:e,inset:t,children:n,...r},a)=>i.jsxs(e5,{ref:a,className:xe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,i.jsx(Cy,{className:"ml-auto h-4 w-4"})]}));Fne.displayName=e5.displayName;const Bne=p.forwardRef(({className:e,...t},n)=>i.jsx(t5,{ref:n,className:xe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Bne.displayName=t5.displayName;const ec=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(Lne,{children:i.jsx(K3,{ref:r,sideOffset:t,className:xe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));ec.displayName=K3.displayName;const Za=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(Y3,{ref:r,className:xe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Za.displayName=Y3.displayName;const Une=p.forwardRef(({className:e,children:t,checked:n,...r},a)=>i.jsxs(X3,{ref:a,className:xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Q3,{children:i.jsx(Ny,{className:"h-4 w-4"})})}),t]}));Une.displayName=X3.displayName;const zne=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(J3,{ref:r,className:xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Q3,{children:i.jsx(zV,{className:"h-2 w-2 fill-current"})})}),t]}));zne.displayName=J3.displayName;const n5=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(G3,{ref:r,className:xe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));n5.displayName=G3.displayName;const t_=p.forwardRef(({className:e,...t},n)=>i.jsx(Z3,{ref:n,className:xe("-mx-1 my-1 h-px bg-muted",e),...t}));t_.displayName=Z3.displayName;var r5={exports:{}},a5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sd=p;function qne(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wne=typeof Object.is=="function"?Object.is:qne,Hne=Sd.useState,Vne=Sd.useEffect,Kne=Sd.useLayoutEffect,Gne=Sd.useDebugValue;function Yne(e,t){var n=t(),r=Hne({inst:{value:n,getSnapshot:t}}),a=r[0].inst,s=r[1];return Kne(function(){a.value=n,a.getSnapshot=t,Sw(a)&&s({inst:a})},[e,n,t]),Vne(function(){return Sw(a)&&s({inst:a}),e(function(){Sw(a)&&s({inst:a})})},[e]),Gne(n),n}function Sw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wne(e,n)}catch{return!0}}function Xne(e,t){return t()}var Jne=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Xne:Yne;a5.useSyncExternalStore=Sd.useSyncExternalStore!==void 0?Sd.useSyncExternalStore:Jne;r5.exports=a5;var Qne=r5.exports;function Zne(){return Qne.useSyncExternalStore(ere,()=>!0,()=>!1)}function ere(){return()=>{}}var TN="Avatar",[tre,u3e]=_r(TN),[nre,i5]=tre(TN),s5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,s]=p.useState("idle");return i.jsx(nre,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:s,children:i.jsx(Ge.span,{...r,ref:t})})});s5.displayName=TN;var o5="AvatarImage",l5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...s}=e,o=i5(o5,n),l=rre(r,s),c=Kn(u=>{a(u),o.onImageLoadingStatusChange(u)});return Xn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(Ge.img,{...s,ref:t,src:r}):null});l5.displayName=o5;var c5="AvatarFallback",u5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,s=i5(c5,n),[o,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?i.jsx(Ge.span,{...a,ref:t}):null});u5.displayName=c5;function kT(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function rre(e,{referrerPolicy:t,crossOrigin:n}){const r=Zne(),a=p.useRef(null),s=r?(a.current||(a.current=new window.Image),a.current):null,[o,l]=p.useState(()=>kT(s,e));return Xn(()=>{l(kT(s,e))},[s,e]),Xn(()=>{const c=d=>()=>{l(d)};if(!s)return;const u=c("loaded"),f=c("error");return s.addEventListener("load",u),s.addEventListener("error",f),t&&(s.referrerPolicy=t),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",u),s.removeEventListener("error",f)}},[s,n,t]),o}var d5=s5,f5=l5,h5=u5;const zr=p.forwardRef(({className:e,...t},n)=>i.jsx(d5,{ref:n,className:xe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));zr.displayName=d5.displayName;const Us=p.forwardRef(({className:e,...t},n)=>i.jsx(f5,{ref:n,className:xe("aspect-square h-full w-full",e),...t}));Us.displayName=f5.displayName;const qr=p.forwardRef(({className:e,...t},n)=>i.jsx(h5,{ref:n,className:xe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));qr.displayName=h5.displayName;var nb="Dialog",[m5,p5]=_r(nb),[are,Gi]=m5(nb),g5=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,f]=Ca({prop:r,defaultProp:a??!1,onChange:s,caller:nb});return i.jsx(are,{scope:t,triggerRef:l,contentRef:c,contentId:ir(),titleId:ir(),descriptionId:ir(),open:u,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(d=>!d),[f]),modal:o,children:n})};g5.displayName=nb;var v5="DialogTrigger",x5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Gi(v5,n),s=St(t,a.triggerRef);return i.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":RN(a.open),...r,ref:s,onClick:Ee(e.onClick,a.onOpenToggle)})});x5.displayName=v5;var ON="DialogPortal",[ire,y5]=m5(ON,{forceMount:void 0}),b5=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,s=Gi(ON,t);return i.jsx(ire,{scope:t,forceMount:n,children:p.Children.map(r,o=>i.jsx(pr,{present:n||s.open,children:i.jsx(Zd,{asChild:!0,container:a,children:o})}))})};b5.displayName=ON;var Zv="DialogOverlay",w5=p.forwardRef((e,t)=>{const n=y5(Zv,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=Gi(Zv,e.__scopeDialog);return s.modal?i.jsx(pr,{present:r||s.open,children:i.jsx(ore,{...a,ref:t})}):null});w5.displayName=Zv;var sre=fl("DialogOverlay.RemoveScroll"),ore=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Gi(Zv,n);return i.jsx(gp,{as:sre,allowPinchZoom:!0,shards:[a.contentRef],children:i.jsx(Ge.div,{"data-state":RN(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Nc="DialogContent",j5=p.forwardRef((e,t)=>{const n=y5(Nc,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=Gi(Nc,e.__scopeDialog);return i.jsx(pr,{present:r||s.open,children:s.modal?i.jsx(lre,{...a,ref:t}):i.jsx(cre,{...a,ref:t})})});j5.displayName=Nc;var lre=p.forwardRef((e,t)=>{const n=Gi(Nc,e.__scopeDialog),r=p.useRef(null),a=St(t,n.contentRef,r);return p.useEffect(()=>{const s=r.current;if(s)return Jy(s)},[]),i.jsx(_5,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ee(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ee(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:Ee(e.onFocusOutside,s=>s.preventDefault())})}),cre=p.forwardRef((e,t)=>{const n=Gi(Nc,e.__scopeDialog),r=p.useRef(!1),a=p.useRef(!1);return i.jsx(_5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),_5=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,...o}=e,l=Gi(Nc,n),c=p.useRef(null),u=St(t,c);return Xy(),i.jsxs(i.Fragment,{children:[i.jsx(pp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(Kc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":RN(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(dre,{titleId:l.titleId}),i.jsx(hre,{contentRef:c,descriptionId:l.descriptionId})]})]})}),IN="DialogTitle",k5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Gi(IN,n);return i.jsx(Ge.h2,{id:a.titleId,...r,ref:t})});k5.displayName=IN;var S5="DialogDescription",N5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Gi(S5,n);return i.jsx(Ge.p,{id:a.descriptionId,...r,ref:t})});N5.displayName=S5;var C5="DialogClose",A5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Gi(C5,n);return i.jsx(Ge.button,{type:"button",...r,ref:t,onClick:Ee(e.onClick,()=>a.onOpenChange(!1))})});A5.displayName=C5;function RN(e){return e?"open":"closed"}var E5="DialogTitleWarning",[ure,P5]=z7(E5,{contentName:Nc,titleName:IN,docsSlug:"dialog"}),dre=({titleId:e})=>{const t=P5(E5),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},fre="DialogDescriptionWarning",hre=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${P5(fre).contentName}}.`;return p.useEffect(()=>{var s;const a=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},MN=g5,T5=x5,DN=b5,rb=w5,ab=j5,$N=k5,LN=N5,FN=A5;const mn=MN,BN=T5,mre=DN,O5=p.forwardRef(({className:e,...t},n)=>i.jsx(rb,{ref:n,className:xe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));O5.displayName=rb.displayName;const cn=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(mre,{children:[i.jsx(O5,{}),i.jsxs(ab,{ref:r,className:xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(FN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(lp,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cn.displayName=ab.displayName;const un=({className:e,...t})=>i.jsx("div",{className:xe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});un.displayName="DialogHeader";const ma=({className:e,...t})=>i.jsx("div",{className:xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ma.displayName="DialogFooter";const dn=p.forwardRef(({className:e,...t},n)=>i.jsx($N,{ref:n,className:xe("text-lg font-semibold leading-none tracking-tight",e),...t}));dn.displayName=$N.displayName;const Er=p.forwardRef(({className:e,...t},n)=>i.jsx(LN,{ref:n,className:xe("text-sm text-muted-foreground",e),...t}));Er.displayName=LN.displayName;function pre({open:e,onClose:t,isMasterAgent:n,pausedByName:r,pausedAt:a,onOpenAdminPanel:s}){const o=a?new Date(a).toLocaleString():null;return i.jsx(mn,{open:e,onOpenChange:l=>{l||t()},children:i.jsxs(cn,{className:"max-w-lg",children:[i.jsxs(un,{children:[i.jsx(dn,{children:"AI Replies Are Currently Paused"}),i.jsx(Er,{children:n?i.jsxs("span",{children:["AI responses are paused across every channel. Synka will not send AI replies until you resume them in ",i.jsx("strong",{children:"Admin Panel  AI Controls"}),"."]}):i.jsx("span",{children:"A master agent paused all AI responses across every channel. Synka will not send AI replies until this setting is changed. Only a master agent can resume AI replies."})})]}),i.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[r?i.jsxs("div",{children:["Paused by: ",r]}):null,o?i.jsxs("div",{children:["At: ",o]}):null]}),i.jsxs(ma,{className:"gap-2",children:[n?i.jsx(Z,{variant:"ghost",onClick:s,children:"Open Admin Panel"}):null,i.jsx(Z,{onClick:t,children:"Got it"})]})]})})}function n_(e,[t,n]){return Math.min(n,Math.max(t,e))}function gre(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var UN="ScrollArea",[I5,d3e]=_r(UN),[vre,vi]=I5(UN),R5=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:s=600,...o}=e,[l,c]=p.useState(null),[u,f]=p.useState(null),[d,h]=p.useState(null),[m,g]=p.useState(null),[v,x]=p.useState(null),[y,b]=p.useState(0),[w,j]=p.useState(0),[k,_]=p.useState(!1),[S,E]=p.useState(!1),N=St(t,P=>c(P)),I=of(a);return i.jsx(vre,{scope:n,type:r,dir:I,scrollHideDelay:s,scrollArea:l,viewport:u,onViewportChange:f,content:d,onContentChange:h,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:k,onScrollbarXEnabledChange:_,scrollbarY:v,onScrollbarYChange:x,scrollbarYEnabled:S,onScrollbarYEnabledChange:E,onCornerWidthChange:b,onCornerHeightChange:j,children:i.jsx(Ge.div,{dir:I,...o,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});R5.displayName=UN;var M5="ScrollAreaViewport",D5=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...s}=e,o=vi(M5,n),l=p.useRef(null),c=St(t,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),i.jsx(Ge.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});D5.displayName=M5;var _s="ScrollAreaScrollbar",zN=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=vi(_s,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return p.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),a.type==="hover"?i.jsx(xre,{...r,ref:t,forceMount:n}):a.type==="scroll"?i.jsx(yre,{...r,ref:t,forceMount:n}):a.type==="auto"?i.jsx($5,{...r,ref:t,forceMount:n}):a.type==="always"?i.jsx(qN,{...r,ref:t}):null});zN.displayName=_s;var xre=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=vi(_s,e.__scopeScrollArea),[s,o]=p.useState(!1);return p.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},f=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),i.jsx(pr,{present:n||s,children:i.jsx($5,{"data-state":s?"visible":"hidden",...r,ref:t})})}),yre=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=vi(_s,e.__scopeScrollArea),s=e.orientation==="horizontal",o=sb(()=>c("SCROLL_END"),100),[l,c]=gre("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),p.useEffect(()=>{const u=a.viewport,f=s?"scrollLeft":"scrollTop";if(u){let d=u[f];const h=()=>{const m=u[f];d!==m&&(c("SCROLL"),o()),d=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,s,c,o]),i.jsx(pr,{present:n||l!=="hidden",children:i.jsx(qN,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ee(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ee(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),$5=p.forwardRef((e,t)=>{const n=vi(_s,e.__scopeScrollArea),{forceMount:r,...a}=e,[s,o]=p.useState(!1),l=e.orientation==="horizontal",c=sb(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:f)}},10);return Nd(n.viewport,c),Nd(n.content,c),i.jsx(pr,{present:r||s,children:i.jsx(qN,{"data-state":s?"visible":"hidden",...a,ref:t})})}),qN=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=vi(_s,e.__scopeScrollArea),s=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=z5(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function d(h,m){return Sre(h,o.current,l,m)}return n==="horizontal"?i.jsx(bre,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollLeft,m=ST(h,l,a.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=d(h,a.dir))}}):n==="vertical"?i.jsx(wre,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollTop,m=ST(h,l);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=d(h))}}):null}),bre=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,s=vi(_s,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=St(t,c,s.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(F5,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ib(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),W5(h,d)&&f.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:tx(o.paddingLeft),paddingEnd:tx(o.paddingRight)}})}})}),wre=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,s=vi(_s,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=St(t,c,s.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(F5,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ib(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),W5(h,d)&&f.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:tx(o.paddingTop),paddingEnd:tx(o.paddingBottom)}})}})}),[jre,L5]=I5(_s),F5=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:d,...h}=e,m=vi(_s,n),[g,v]=p.useState(null),x=St(t,N=>v(N)),y=p.useRef(null),b=p.useRef(""),w=m.viewport,j=r.content-r.viewport,k=Kn(f),_=Kn(c),S=sb(d,10);function E(N){if(y.current){const I=N.clientX-y.current.left,P=N.clientY-y.current.top;u({x:I,y:P})}}return p.useEffect(()=>{const N=I=>{const P=I.target;(g==null?void 0:g.contains(P))&&k(I,j)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[w,g,j,k]),p.useEffect(_,[r,_]),Nd(g,S),Nd(m.content,S),i.jsx(jre,{scope:n,scrollbar:g,hasThumb:a,onThumbChange:Kn(s),onThumbPointerUp:Kn(o),onThumbPositionChange:_,onThumbPointerDown:Kn(l),children:i.jsx(Ge.div,{...h,ref:x,style:{position:"absolute",...h.style},onPointerDown:Ee(e.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),y.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),E(N))}),onPointerMove:Ee(e.onPointerMove,E),onPointerUp:Ee(e.onPointerUp,N=>{const I=N.target;I.hasPointerCapture(N.pointerId)&&I.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=b.current,m.viewport&&(m.viewport.style.scrollBehavior=""),y.current=null})})})}),ex="ScrollAreaThumb",B5=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=L5(ex,e.__scopeScrollArea);return i.jsx(pr,{present:n||a.hasThumb,children:i.jsx(_re,{ref:t,...r})})}),_re=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,s=vi(ex,n),o=L5(ex,n),{onThumbPositionChange:l}=o,c=St(t,d=>o.onThumbChange(d)),u=p.useRef(void 0),f=sb(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const d=s.viewport;if(d){const h=()=>{if(f(),!u.current){const m=Nre(d,l);u.current=m,l()}};return l(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,f,l]),i.jsx(Ge.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ee(e.onPointerDownCapture,d=>{const m=d.target.getBoundingClientRect(),g=d.clientX-m.left,v=d.clientY-m.top;o.onThumbPointerDown({x:g,y:v})}),onPointerUp:Ee(e.onPointerUp,o.onThumbPointerUp)})});B5.displayName=ex;var WN="ScrollAreaCorner",U5=p.forwardRef((e,t)=>{const n=vi(WN,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(kre,{...e,ref:t}):null});U5.displayName=WN;var kre=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=vi(WN,n),[s,o]=p.useState(0),[l,c]=p.useState(0),u=!!(s&&l);return Nd(a.scrollbarX,()=>{var d;const f=((d=a.scrollbarX)==null?void 0:d.offsetHeight)||0;a.onCornerHeightChange(f),c(f)}),Nd(a.scrollbarY,()=>{var d;const f=((d=a.scrollbarY)==null?void 0:d.offsetWidth)||0;a.onCornerWidthChange(f),o(f)}),u?i.jsx(Ge.div,{...r,ref:t,style:{width:s,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function tx(e){return e?parseInt(e,10):0}function z5(e,t){const n=e/t;return isNaN(n)?0:n}function ib(e){const t=z5(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Sre(e,t,n,r="ltr"){const a=ib(n),s=a/2,o=t||s,l=a-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,d=r==="ltr"?[0,f]:[f*-1,0];return q5([c,u],d)(e)}function ST(e,t,n="ltr"){const r=ib(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-a,o=t.content-t.viewport,l=s-r,c=n==="ltr"?[0,o]:[o*-1,0],u=n_(e,c);return q5([0,o],[0,l])(u)}function q5(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function W5(e,t){return e>0&&e<t}var Nre=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,l=n.top!==s.top;(o||l)&&t(),n=s,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function sb(e,t){const n=Kn(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Nd(e,t){const n=Kn(t);Xn(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var H5=R5,Cre=D5,Are=U5;const ob=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(H5,{ref:r,className:xe("relative overflow-hidden",e),...n,children:[i.jsx(Cre,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(V5,{}),i.jsx(Are,{})]}));ob.displayName=H5.displayName;const V5=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(zN,{ref:r,orientation:t,className:xe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(B5,{className:"relative flex-1 rounded-full bg-border"})}));V5.displayName=zN.displayName;function Xt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Wa(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ta(e,t){const n=Xt(e);return isNaN(t)?Wa(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Vi(e,t){const n=Xt(e);if(isNaN(t))return Wa(e,NaN);if(!t)return n;const r=n.getDate(),a=Wa(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const s=a.getDate();return r>=s?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}const HN=6048e5,Ere=864e5;let Pre={};function yp(){return Pre}function ys(e,t){var l,c,u,f;const n=yp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,a=Xt(e),s=a.getDay(),o=(s<r?7:0)+s-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Cc(e){return ys(e,{weekStartsOn:1})}function K5(e){const t=Xt(e),n=t.getFullYear(),r=Wa(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Cc(r),s=Wa(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=Cc(s);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Ac(e){const t=Xt(e);return t.setHours(0,0,0,0),t}function nx(e){const t=Xt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function os(e,t){const n=Ac(e),r=Ac(t),a=+n-nx(n),s=+r-nx(r);return Math.round((a-s)/Ere)}function Tre(e){const t=K5(e),n=Wa(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Cc(n)}function r_(e,t){const n=t*7;return ta(e,n)}function Ore(e,t){return Vi(e,t*12)}function Ire(e){let t;return e.forEach(function(n){const r=Xt(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function Rre(e){let t;return e.forEach(n=>{const r=Xt(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function ba(e,t){const n=Ac(e),r=Ac(t);return+n==+r}function VN(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Mre(e){if(!VN(e)&&typeof e!="number")return!1;const t=Xt(e);return!isNaN(Number(t))}function dm(e,t){const n=Xt(e),r=Xt(t),a=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return a*12+s}function Dre(e,t,n){const r=ys(e,n),a=ys(t,n),s=+r-nx(r),o=+a-nx(a);return Math.round((s-o)/HN)}function $re(e){const t=Xt(e);return t.setHours(23,59,59,999),t}function KN(e){const t=Xt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Na(e){const t=Xt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function G5(e){const t=Xt(e),n=Wa(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function GN(e,t){var l,c,u,f;const n=yp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,a=Xt(e),s=a.getDay(),o=(s<r?-7:0)+6-(s-r);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function Y5(e){return GN(e,{weekStartsOn:1})}const Lre={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Fre=(e,t,n)=>{let r;const a=Lre[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Nw(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Bre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ure={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qre={date:Nw({formats:Bre,defaultWidth:"full"}),time:Nw({formats:Ure,defaultWidth:"full"}),dateTime:Nw({formats:zre,defaultWidth:"full"})},Wre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Hre=(e,t,n,r)=>Wre[e];function Lf(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const Vre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Kre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Gre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Yre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Xre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Jre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Qre=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Zre={ordinalNumber:Qre,era:Lf({values:Vre,defaultWidth:"wide"}),quarter:Lf({values:Kre,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Lf({values:Gre,defaultWidth:"wide"}),day:Lf({values:Yre,defaultWidth:"wide"}),dayPeriod:Lf({values:Xre,defaultWidth:"wide",formattingValues:Jre,defaultFormattingWidth:"wide"})};function Ff(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?tae(l,d=>d.test(o)):eae(l,d=>d.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const f=t.slice(o.length);return{value:u,rest:f}}}function eae(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function tae(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function nae(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const rae=/^(\d+)(th|st|nd|rd)?/i,aae=/\d+/i,iae={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sae={any:[/^b/i,/^(a|c)/i]},oae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},lae={any:[/1/i,/2/i,/3/i,/4/i]},cae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},uae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dae={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},fae={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},hae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},mae={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pae={ordinalNumber:nae({matchPattern:rae,parsePattern:aae,valueCallback:e=>parseInt(e,10)}),era:Ff({matchPatterns:iae,defaultMatchWidth:"wide",parsePatterns:sae,defaultParseWidth:"any"}),quarter:Ff({matchPatterns:oae,defaultMatchWidth:"wide",parsePatterns:lae,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ff({matchPatterns:cae,defaultMatchWidth:"wide",parsePatterns:uae,defaultParseWidth:"any"}),day:Ff({matchPatterns:dae,defaultMatchWidth:"wide",parsePatterns:fae,defaultParseWidth:"any"}),dayPeriod:Ff({matchPatterns:hae,defaultMatchWidth:"any",parsePatterns:mae,defaultParseWidth:"any"})},X5={code:"en-US",formatDistance:Fre,formatLong:qre,formatRelative:Hre,localize:Zre,match:pae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gae(e){const t=Xt(e);return os(t,G5(t))+1}function J5(e){const t=Xt(e),n=+Cc(t)-+Tre(t);return Math.round(n/HN)+1}function Q5(e,t){var f,d,h,m;const n=Xt(e),r=n.getFullYear(),a=yp(),s=(t==null?void 0:t.firstWeekContainsDate)??((d=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=Wa(e,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const l=ys(o,t),c=Wa(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=ys(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function vae(e,t){var l,c,u,f;const n=yp(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,a=Q5(e,t),s=Wa(e,0);return s.setFullYear(a,0,r),s.setHours(0,0,0,0),ys(s,t)}function Z5(e,t){const n=Xt(e),r=+ys(n,t)-+vae(n,t);return Math.round(r/HN)+1}function hn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Po={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return hn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):hn(n+1,2)},d(e,t){return hn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return hn(e.getHours()%12||12,t.length)},H(e,t){return hn(e.getHours(),t.length)},m(e,t){return hn(e.getMinutes(),t.length)},s(e,t){return hn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return hn(a,t.length)}},hu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},NT={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Po.y(e,t)},Y:function(e,t,n,r){const a=Q5(e,r),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return hn(o,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):hn(s,t.length)},R:function(e,t){const n=K5(e);return hn(n,t.length)},u:function(e,t){const n=e.getFullYear();return hn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return hn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return hn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Po.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return hn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Z5(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):hn(a,t.length)},I:function(e,t,n){const r=J5(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):hn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Po.d(e,t)},D:function(e,t,n){const r=gae(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):hn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return hn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return hn(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return hn(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=hu.noon:r===0?a=hu.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=hu.evening:r>=12?a=hu.afternoon:r>=4?a=hu.morning:a=hu.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Po.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Po.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):hn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):hn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Po.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Po.s(e,t)},S:function(e,t){return Po.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return AT(r);case"XXXX":case"XX":return Gl(r);case"XXXXX":case"XXX":default:return Gl(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return AT(r);case"xxxx":case"xx":return Gl(r);case"xxxxx":case"xxx":default:return Gl(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+CT(r,":");case"OOOO":default:return"GMT"+Gl(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+CT(r,":");case"zzzz":default:return"GMT"+Gl(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return hn(r,t.length)},T:function(e,t,n){const r=e.getTime();return hn(r,t.length)}};function CT(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return s===0?n+String(a):n+String(a)+t+hn(s,2)}function AT(e,t){return e%60===0?(e>0?"-":"+")+hn(Math.abs(e)/60,2):Gl(e,t)}function Gl(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=hn(Math.trunc(r/60),2),s=hn(r%60,2);return n+a+t+s}const ET=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},eB=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},xae=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return ET(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",ET(r,t)).replace("{{time}}",eB(a,t))},yae={p:eB,P:xae},bae=/^D+$/,wae=/^Y+$/,jae=["D","DD","YY","YYYY"];function _ae(e){return bae.test(e)}function kae(e){return wae.test(e)}function Sae(e,t,n){const r=Nae(e,t,n);if(console.warn(r),jae.includes(e))throw new RangeError(r)}function Nae(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Cae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Aae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Eae=/^'([^]*?)'?$/,Pae=/''/g,Tae=/[a-zA-Z]/;function oo(e,t,n){var f,d,h,m,g,v,x,y;const r=yp(),a=(n==null?void 0:n.locale)??r.locale??X5,s=(n==null?void 0:n.firstWeekContainsDate)??((d=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((v=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((y=(x=r.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??0,l=Xt(e);if(!Mre(l))throw new RangeError("Invalid time value");let c=t.match(Aae).map(b=>{const w=b[0];if(w==="p"||w==="P"){const j=yae[w];return j(b,a.formatLong)}return b}).join("").match(Cae).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const w=b[0];if(w==="'")return{isToken:!1,value:Oae(b)};if(NT[w])return{isToken:!0,value:b};if(w.match(Tae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:b}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(b=>{if(!b.isToken)return b.value;const w=b.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&kae(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&_ae(w))&&Sae(w,t,String(e));const j=NT[w[0]];return j(l,w,a.localize,u)}).join("")}function Oae(e){const t=e.match(Eae);return t?t[1].replace(Pae,"'"):e}function Iae(e){const t=Xt(e),n=t.getFullYear(),r=t.getMonth(),a=Wa(e,0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function Rae(e){return Math.trunc(+Xt(e)/1e3)}function Mae(e){const t=Xt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function Dae(e,t){return Dre(Mae(e),Na(e),t)+1}function a_(e,t){const n=Xt(e),r=Xt(t);return n.getTime()>r.getTime()}function tB(e,t){const n=Xt(e),r=Xt(t);return+n<+r}function YN(e,t){const n=Xt(e),r=Xt(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function $ae(e,t){const n=Xt(e),r=Xt(t);return n.getFullYear()===r.getFullYear()}function Cw(e,t){return ta(e,-t)}function Aw(e,t){const n=Xt(e),r=n.getFullYear(),a=n.getDate(),s=Wa(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const o=Iae(s);return n.setMonth(t,Math.min(a,o)),n}function PT(e,t){const n=Xt(e);return isNaN(+n)?Wa(e,NaN):(n.setFullYear(t),n)}var kt=function(){return kt=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},kt.apply(this,arguments)};function Lae(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function nB(e,t,n){for(var r=0,a=t.length,s;r<a;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function bp(e){return e.mode==="multiple"}function wp(e){return e.mode==="range"}function lb(e){return e.mode==="single"}var Fae={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Bae(e,t){return oo(e,"LLLL y",t)}function Uae(e,t){return oo(e,"d",t)}function zae(e,t){return oo(e,"LLLL",t)}function qae(e){return"".concat(e)}function Wae(e,t){return oo(e,"cccccc",t)}function Hae(e,t){return oo(e,"yyyy",t)}var Vae=Object.freeze({__proto__:null,formatCaption:Bae,formatDay:Uae,formatMonthCaption:zae,formatWeekNumber:qae,formatWeekdayName:Wae,formatYearCaption:Hae}),Kae=function(e,t,n){return oo(e,"do MMMM (EEEE)",n)},Gae=function(){return"Month: "},Yae=function(){return"Go to next month"},Xae=function(){return"Go to previous month"},Jae=function(e,t){return oo(e,"cccc",t)},Qae=function(e){return"Week n. ".concat(e)},Zae=function(){return"Year: "},eie=Object.freeze({__proto__:null,labelDay:Kae,labelMonthDropdown:Gae,labelNext:Yae,labelPrevious:Xae,labelWeekNumber:Qae,labelWeekday:Jae,labelYearDropdown:Zae});function tie(){var e="buttons",t=Fae,n=X5,r={},a={},s=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:Vae,labels:eie,locale:n,modifiersClassNames:r,modifiers:a,numberOfMonths:s,styles:o,today:l,mode:"default"}}function nie(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,a=e.toMonth,s=e.fromDate,o=e.toDate;return r?s=Na(r):t&&(s=new Date(t,0,1)),a?o=KN(a):n&&(o=new Date(n,11,31)),{fromDate:s?Ac(s):void 0,toDate:o?Ac(o):void 0}}var rB=p.createContext(void 0);function rie(e){var t,n=e.initialProps,r=tie(),a=nie(n),s=a.fromDate,o=a.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!s||!o)&&(l="buttons");var c;(lb(n)||bp(n)||wp(n))&&(c=n.onSelect);var u=kt(kt(kt({},r),n),{captionLayout:l,classNames:kt(kt({},r.classNames),n.classNames),components:kt({},n.components),formatters:kt(kt({},r.formatters),n.formatters),fromDate:s,labels:kt(kt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:kt(kt({},r.modifiers),n.modifiers),modifiersClassNames:kt(kt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:kt(kt({},r.styles),n.styles),toDate:o});return i.jsx(rB.Provider,{value:u,children:e.children})}function Nn(){var e=p.useContext(rB);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function aB(e){var t=Nn(),n=t.locale,r=t.classNames,a=t.styles,s=t.formatters.formatCaption;return i.jsx("div",{className:r.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function aie(e){return i.jsx("svg",kt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function iB(e){var t,n,r=e.onChange,a=e.value,s=e.children,o=e.caption,l=e.className,c=e.style,u=Nn(),f=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:aie;return i.jsxs("div",{className:l,style:c,children:[i.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),i.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:r,children:s}),i.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(f,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function iie(e){var t,n=Nn(),r=n.fromDate,a=n.toDate,s=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,f=n.labels.labelMonthDropdown;if(!r)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});var d=[];if($ae(r,a))for(var h=Na(r),m=r.getMonth();m<=a.getMonth();m++)d.push(Aw(h,m));else for(var h=Na(new Date),m=0;m<=11;m++)d.push(Aw(h,m));var g=function(x){var y=Number(x.target.value),b=Aw(Na(e.displayMonth),y);e.onChange(b)},v=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:iB;return i.jsx(v,{name:"months","aria-label":f(),className:c.dropdown_month,style:s.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:d.map(function(x){return i.jsx("option",{value:x.getMonth(),children:l(x,{locale:o})},x.getMonth())})})}function sie(e){var t,n=e.displayMonth,r=Nn(),a=r.fromDate,s=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,f=r.formatters.formatYearCaption,d=r.labels.labelYearDropdown,h=[];if(!a)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});for(var m=a.getFullYear(),g=s.getFullYear(),v=m;v<=g;v++)h.push(PT(G5(new Date),v));var x=function(b){var w=PT(Na(n),Number(b.target.value));e.onChange(w)},y=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:iB;return i.jsx(y,{name:"years","aria-label":d(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:n.getFullYear(),caption:f(n,{locale:o}),children:h.map(function(b){return i.jsx("option",{value:b.getFullYear(),children:f(b,{locale:o})},b.getFullYear())})})}function oie(e,t){var n=p.useState(e),r=n[0],a=n[1],s=t===void 0?r:t;return[s,a]}function lie(e){var t=e.month,n=e.defaultMonth,r=e.today,a=t||n||r||new Date,s=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&dm(s,a)<0){var u=-1*(c-1);a=Vi(s,u)}return o&&dm(a,o)<0&&(a=o),Na(a)}function cie(){var e=Nn(),t=lie(e),n=oie(t,e.month),r=n[0],a=n[1],s=function(o){var l;if(!e.disableNavigation){var c=Na(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,s]}function uie(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,a=Na(e),s=Na(Vi(a,r)),o=dm(s,a),l=[],c=0;c<o;c++){var u=Vi(a,c);l.push(u)}return n&&(l=l.reverse()),l}function die(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=r?s:1,l=Na(e);if(!n)return Vi(l,o);var c=dm(n,e);if(!(c<s))return Vi(l,o)}}function fie(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=r?s:1,l=Na(e);if(!n)return Vi(l,-o);var c=dm(l,n);if(!(c<=0))return Vi(l,-o)}}var sB=p.createContext(void 0);function hie(e){var t=Nn(),n=cie(),r=n[0],a=n[1],s=uie(r,t),o=die(r,t),l=fie(r,t),c=function(d){return s.some(function(h){return YN(d,h)})},u=function(d,h){c(d)||(h&&tB(d,h)?a(Vi(d,1+t.numberOfMonths*-1)):a(d))},f={currentMonth:r,displayMonths:s,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return i.jsx(sB.Provider,{value:f,children:e.children})}function jp(){var e=p.useContext(sB);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function TT(e){var t,n=Nn(),r=n.classNames,a=n.styles,s=n.components,o=jp().goToMonth,l=function(f){o(Vi(f,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:aB,u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth});return i.jsxs("div",{className:r.caption_dropdowns,style:a.caption_dropdowns,children:[i.jsx("div",{className:r.vhidden,children:u}),i.jsx(iie,{onChange:l,displayMonth:e.displayMonth}),i.jsx(sie,{onChange:l,displayMonth:e.displayMonth})]})}function mie(e){return i.jsx("svg",kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function pie(e){return i.jsx("svg",kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var rx=p.forwardRef(function(e,t){var n=Nn(),r=n.classNames,a=n.styles,s=[r.button_reset,r.button];e.className&&s.push(e.className);var o=s.join(" "),l=kt(kt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),i.jsx("button",kt({},e,{ref:t,type:"button",className:o,style:l}))});function gie(e){var t,n,r=Nn(),a=r.dir,s=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,f=c.labelNext,d=r.components;if(!e.nextMonth&&!e.previousMonth)return i.jsx(i.Fragment,{});var h=u(e.previousMonth,{locale:s}),m=[o.nav_button,o.nav_button_previous].join(" "),g=f(e.nextMonth,{locale:s}),v=[o.nav_button,o.nav_button_next].join(" "),x=(t=d==null?void 0:d.IconRight)!==null&&t!==void 0?t:pie,y=(n=d==null?void 0:d.IconLeft)!==null&&n!==void 0?n:mie;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&i.jsx(rx,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?i.jsx(x,{className:o.nav_icon,style:l.nav_icon}):i.jsx(y,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&i.jsx(rx,{name:"next-month","aria-label":g,className:v,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?i.jsx(y,{className:o.nav_icon,style:l.nav_icon}):i.jsx(x,{className:o.nav_icon,style:l.nav_icon})})]})}function OT(e){var t=Nn().numberOfMonths,n=jp(),r=n.previousMonth,a=n.nextMonth,s=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(g){return YN(e.displayMonth,g)}),c=l===0,u=l===o.length-1,f=t>1&&(c||!u),d=t>1&&(u||!c),h=function(){r&&s(r)},m=function(){a&&s(a)};return i.jsx(gie,{displayMonth:e.displayMonth,hideNext:f,hidePrevious:d,nextMonth:a,previousMonth:r,onPreviousClick:h,onNextClick:m})}function vie(e){var t,n=Nn(),r=n.classNames,a=n.disableNavigation,s=n.styles,o=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:aB,u;return a?u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=i.jsx(TT,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=i.jsxs(i.Fragment,{children:[i.jsx(TT,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),i.jsx(OT,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=i.jsxs(i.Fragment,{children:[i.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(OT,{displayMonth:e.displayMonth,id:e.id})]}),i.jsx("div",{className:r.caption,style:s.caption,children:u})}function xie(e){var t=Nn(),n=t.footer,r=t.styles,a=t.classNames.tfoot;return n?i.jsx("tfoot",{className:a,style:r.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:n})})}):i.jsx(i.Fragment,{})}function yie(e,t,n){for(var r=n?Cc(new Date):ys(new Date,{locale:e,weekStartsOn:t}),a=[],s=0;s<7;s++){var o=ta(r,s);a.push(o)}return a}function bie(){var e=Nn(),t=e.classNames,n=e.styles,r=e.showWeekNumber,a=e.locale,s=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=yie(a,s,o);return i.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&i.jsx("td",{style:n.head_cell,className:t.head_cell}),u.map(function(f,d){return i.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(f,{locale:a}),children:l(f,{locale:a})},d)})]})}function wie(){var e,t=Nn(),n=t.classNames,r=t.styles,a=t.components,s=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:bie;return i.jsx("thead",{style:r.head,className:n.head,children:i.jsx(s,{})})}function jie(e){var t=Nn(),n=t.locale,r=t.formatters.formatDay;return i.jsx(i.Fragment,{children:r(e.date,{locale:n})})}var XN=p.createContext(void 0);function _ie(e){if(!bp(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return i.jsx(XN.Provider,{value:t,children:e.children})}return i.jsx(kie,{initialProps:e.initialProps,children:e.children})}function kie(e){var t=e.initialProps,n=e.children,r=t.selected,a=t.min,s=t.max,o=function(u,f,d){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,f,d);var g=!!(f.selected&&a&&(r==null?void 0:r.length)===a);if(!g){var v=!!(!f.selected&&s&&(r==null?void 0:r.length)===s);if(!v){var x=r?nB([],r):[];if(f.selected){var y=x.findIndex(function(b){return ba(u,b)});x.splice(y,1)}else x.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,x,u,f,d)}}},l={disabled:[]};r&&l.disabled.push(function(u){var f=s&&r.length>s-1,d=r.some(function(h){return ba(h,u)});return!!(f&&!d)});var c={selected:r,onDayClick:o,modifiers:l};return i.jsx(XN.Provider,{value:c,children:n})}function JN(){var e=p.useContext(XN);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Sie(e,t){var n=t||{},r=n.from,a=n.to;return r&&a?ba(a,e)&&ba(r,e)?void 0:ba(a,e)?{from:a,to:void 0}:ba(r,e)?void 0:a_(r,e)?{from:e,to:a}:{from:r,to:e}:a?a_(e,a)?{from:a,to:e}:{from:e,to:a}:r?tB(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var QN=p.createContext(void 0);function Nie(e){if(!wp(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(QN.Provider,{value:t,children:e.children})}return i.jsx(Cie,{initialProps:e.initialProps,children:e.children})}function Cie(e){var t=e.initialProps,n=e.children,r=t.selected,a=r||{},s=a.from,o=a.to,l=t.min,c=t.max,u=function(m,g,v){var x,y;(x=t.onDayClick)===null||x===void 0||x.call(t,m,g,v);var b=Sie(m,r);(y=t.onSelect)===null||y===void 0||y.call(t,b,m,g,v)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(f.range_start=[s],o?(f.range_end=[o],ba(s,o)||(f.range_middle=[{after:s,before:o}])):f.range_end=[s]):o&&(f.range_start=[o],f.range_end=[o]),l&&(s&&!o&&f.disabled.push({after:Cw(s,l-1),before:ta(s,l-1)}),s&&o&&f.disabled.push({after:s,before:ta(s,l-1)}),!s&&o&&f.disabled.push({after:Cw(o,l-1),before:ta(o,l-1)})),c){if(s&&!o&&(f.disabled.push({before:ta(s,-c+1)}),f.disabled.push({after:ta(s,c-1)})),s&&o){var d=os(o,s)+1,h=c-d;f.disabled.push({before:Cw(s,h)}),f.disabled.push({after:ta(o,h)})}!s&&o&&(f.disabled.push({before:ta(o,-c+1)}),f.disabled.push({after:ta(o,c-1)}))}return i.jsx(QN.Provider,{value:{selected:r,onDayClick:u,modifiers:f},children:n})}function ZN(){var e=p.useContext(QN);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function fv(e){return Array.isArray(e)?nB([],e):e!==void 0?[e]:[]}function Aie(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],a=n[1];t[r]=fv(a)}),t}var Ki;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Ki||(Ki={}));var Eie=Ki.Selected,Es=Ki.Disabled,Pie=Ki.Hidden,Tie=Ki.Today,Ew=Ki.RangeEnd,Pw=Ki.RangeMiddle,Tw=Ki.RangeStart,Oie=Ki.Outside;function Iie(e,t,n){var r,a=(r={},r[Eie]=fv(e.selected),r[Es]=fv(e.disabled),r[Pie]=fv(e.hidden),r[Tie]=[e.today],r[Ew]=[],r[Pw]=[],r[Tw]=[],r[Oie]=[],r);return e.fromDate&&a[Es].push({before:e.fromDate}),e.toDate&&a[Es].push({after:e.toDate}),bp(e)?a[Es]=a[Es].concat(t.modifiers[Es]):wp(e)&&(a[Es]=a[Es].concat(n.modifiers[Es]),a[Tw]=n.modifiers[Tw],a[Pw]=n.modifiers[Pw],a[Ew]=n.modifiers[Ew]),a}var oB=p.createContext(void 0);function Rie(e){var t=Nn(),n=JN(),r=ZN(),a=Iie(t,n,r),s=Aie(t.modifiers),o=kt(kt({},a),s);return i.jsx(oB.Provider,{value:o,children:e.children})}function lB(){var e=p.useContext(oB);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Mie(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Die(e){return!!(e&&typeof e=="object"&&"from"in e)}function $ie(e){return!!(e&&typeof e=="object"&&"after"in e)}function Lie(e){return!!(e&&typeof e=="object"&&"before"in e)}function Fie(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Bie(e,t){var n,r=t.from,a=t.to;if(r&&a){var s=os(a,r)<0;s&&(n=[a,r],r=n[0],a=n[1]);var o=os(e,r)>=0&&os(a,e)>=0;return o}return a?ba(a,e):r?ba(r,e):!1}function Uie(e){return VN(e)}function zie(e){return Array.isArray(e)&&e.every(VN)}function qie(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(Uie(n))return ba(e,n);if(zie(n))return n.includes(e);if(Die(n))return Bie(e,n);if(Fie(n))return n.dayOfWeek.includes(e.getDay());if(Mie(n)){var r=os(n.before,e),a=os(n.after,e),s=r>0,o=a<0,l=a_(n.before,n.after);return l?o&&s:s||o}return $ie(n)?os(e,n.after)>0:Lie(n)?os(n.before,e)>0:typeof n=="function"?n(e):!1})}function eC(e,t,n){var r=Object.keys(t).reduce(function(s,o){var l=t[o];return qie(e,l)&&s.push(o),s},[]),a={};return r.forEach(function(s){return a[s]=!0}),n&&!YN(e,n)&&(a.outside=!0),a}function Wie(e,t){for(var n=Na(e[0]),r=KN(e[e.length-1]),a,s,o=n;o<=r;){var l=eC(o,t),c=!l.disabled&&!l.hidden;if(!c){o=ta(o,1);continue}if(l.selected)return o;l.today&&!s&&(s=o),a||(a=o),o=ta(o,1)}return s||a}var Hie=365;function cB(e,t){var n=t.moveBy,r=t.direction,a=t.context,s=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,f=a.toDate,d=a.locale,h={day:ta,week:r_,month:Vi,year:Ore,startOfWeek:function(x){return a.ISOWeek?Cc(x):ys(x,{locale:d,weekStartsOn:c})},endOfWeek:function(x){return a.ISOWeek?Y5(x):GN(x,{locale:d,weekStartsOn:c})}},m=h[n](e,r==="after"?1:-1);r==="before"&&u?m=Ire([u,m]):r==="after"&&f&&(m=Rre([f,m]));var g=!0;if(s){var v=eC(m,s);g=!v.disabled&&!v.hidden}return g?m:l.count>Hie?l.lastFocused:cB(m,{moveBy:n,direction:r,context:a,modifiers:s,retry:kt(kt({},l),{count:l.count+1})})}var uB=p.createContext(void 0);function Vie(e){var t=jp(),n=lB(),r=p.useState(),a=r[0],s=r[1],o=p.useState(),l=o[0],c=o[1],u=Wie(t.displayMonths,n),f=a??(l&&t.isDateDisplayed(l))?l:u,d=function(){c(a),s(void 0)},h=function(x){s(x)},m=Nn(),g=function(x,y){if(a){var b=cB(a,{moveBy:x,direction:y,context:m,modifiers:n});ba(a,b)||(t.goToDate(b,a),h(b))}},v={focusedDay:a,focusTarget:f,blur:d,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return i.jsx(uB.Provider,{value:v,children:e.children})}function tC(){var e=p.useContext(uB);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Kie(e,t){var n=lB(),r=eC(e,n,t);return r}var nC=p.createContext(void 0);function Gie(e){if(!lb(e.initialProps)){var t={selected:void 0};return i.jsx(nC.Provider,{value:t,children:e.children})}return i.jsx(Yie,{initialProps:e.initialProps,children:e.children})}function Yie(e){var t=e.initialProps,n=e.children,r=function(s,o,l){var c,u,f;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,s,o,l);return}(f=t.onSelect)===null||f===void 0||f.call(t,s,s,o,l)},a={selected:t.selected,onDayClick:r};return i.jsx(nC.Provider,{value:a,children:n})}function dB(){var e=p.useContext(nC);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function Xie(e,t){var n=Nn(),r=dB(),a=JN(),s=ZN(),o=tC(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,f=o.focusWeekBefore,d=o.blur,h=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,v=o.focusYearBefore,x=o.focusYearAfter,y=o.focusStartOfWeek,b=o.focusEndOfWeek,w=function(O){var T,R,C,F;lb(n)?(T=r.onDayClick)===null||T===void 0||T.call(r,e,t,O):bp(n)?(R=a.onDayClick)===null||R===void 0||R.call(a,e,t,O):wp(n)?(C=s.onDayClick)===null||C===void 0||C.call(s,e,t,O):(F=n.onDayClick)===null||F===void 0||F.call(n,e,t,O)},j=function(O){var T;h(e),(T=n.onDayFocus)===null||T===void 0||T.call(n,e,t,O)},k=function(O){var T;d(),(T=n.onDayBlur)===null||T===void 0||T.call(n,e,t,O)},_=function(O){var T;(T=n.onDayMouseEnter)===null||T===void 0||T.call(n,e,t,O)},S=function(O){var T;(T=n.onDayMouseLeave)===null||T===void 0||T.call(n,e,t,O)},E=function(O){var T;(T=n.onDayPointerEnter)===null||T===void 0||T.call(n,e,t,O)},N=function(O){var T;(T=n.onDayPointerLeave)===null||T===void 0||T.call(n,e,t,O)},I=function(O){var T;(T=n.onDayTouchCancel)===null||T===void 0||T.call(n,e,t,O)},P=function(O){var T;(T=n.onDayTouchEnd)===null||T===void 0||T.call(n,e,t,O)},D=function(O){var T;(T=n.onDayTouchMove)===null||T===void 0||T.call(n,e,t,O)},L=function(O){var T;(T=n.onDayTouchStart)===null||T===void 0||T.call(n,e,t,O)},B=function(O){var T;(T=n.onDayKeyUp)===null||T===void 0||T.call(n,e,t,O)},U=function(O){var T;switch(O.key){case"ArrowLeft":O.preventDefault(),O.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":O.preventDefault(),O.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":O.preventDefault(),O.stopPropagation(),u();break;case"ArrowUp":O.preventDefault(),O.stopPropagation(),f();break;case"PageUp":O.preventDefault(),O.stopPropagation(),O.shiftKey?v():m();break;case"PageDown":O.preventDefault(),O.stopPropagation(),O.shiftKey?x():g();break;case"Home":O.preventDefault(),O.stopPropagation(),y();break;case"End":O.preventDefault(),O.stopPropagation(),b();break}(T=n.onDayKeyDown)===null||T===void 0||T.call(n,e,t,O)},$={onClick:w,onFocus:j,onBlur:k,onKeyDown:U,onKeyUp:B,onMouseEnter:_,onMouseLeave:S,onPointerEnter:E,onPointerLeave:N,onTouchCancel:I,onTouchEnd:P,onTouchMove:D,onTouchStart:L};return $}function Jie(){var e=Nn(),t=dB(),n=JN(),r=ZN(),a=lb(e)?t.selected:bp(e)?n.selected:wp(e)?r.selected:void 0;return a}function Qie(e){return Object.values(Ki).includes(e)}function Zie(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var a=e.modifiersClassNames[r];if(a)n.push(a);else if(Qie(r)){var s=e.classNames["day_".concat(r)];s&&n.push(s)}}),n}function ese(e,t){var n=kt({},e.styles.day);return Object.keys(t).forEach(function(r){var a;n=kt(kt({},n),(a=e.modifiersStyles)===null||a===void 0?void 0:a[r])}),n}function tse(e,t,n){var r,a,s,o=Nn(),l=tC(),c=Kie(e,t),u=Xie(e,c),f=Jie(),d=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var _;c.outside||l.focusedDay&&d&&ba(l.focusedDay,e)&&((_=n.current)===null||_===void 0||_.focus())},[l.focusedDay,e,n,d,c.outside]);var h=Zie(o,c).join(" "),m=ese(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),v=(s=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&s!==void 0?s:jie,x=i.jsx(v,{date:e,displayMonth:t,activeModifiers:c}),y={style:m,className:h,children:x,role:"gridcell"},b=l.focusTarget&&ba(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&ba(l.focusedDay,e),j=kt(kt(kt({},y),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=w||b?0:-1,r)),u),k={isButton:d,isHidden:g,activeModifiers:c,selectedDays:f,buttonProps:j,divProps:y};return k}function nse(e){var t=p.useRef(null),n=tse(e.date,e.displayMonth,t);return n.isHidden?i.jsx("div",{role:"gridcell"}):n.isButton?i.jsx(rx,kt({name:"day",ref:t},n.buttonProps)):i.jsx("div",kt({},n.divProps))}function rse(e){var t=e.number,n=e.dates,r=Nn(),a=r.onWeekNumberClick,s=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,f=u(Number(t),{locale:l});if(!a)return i.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:f});var d=c(Number(t),{locale:l}),h=function(m){a(t,n,m)};return i.jsx(rx,{name:"week-number","aria-label":d,className:o.weeknumber,style:s.weeknumber,onClick:h,children:f})}function ase(e){var t,n,r=Nn(),a=r.styles,s=r.classNames,o=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:nse,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:rse,f;return o&&(f=i.jsx("td",{className:s.cell,style:a.cell,children:i.jsx(u,{number:e.weekNumber,dates:e.dates})})),i.jsxs("tr",{className:s.row,style:a.row,children:[f,e.dates.map(function(d){return i.jsx("td",{className:s.cell,style:a.cell,role:"presentation",children:i.jsx(c,{displayMonth:e.displayMonth,date:d})},Rae(d))})]})}function IT(e,t,n){for(var r=n!=null&&n.ISOWeek?Y5(t):GN(t,n),a=n!=null&&n.ISOWeek?Cc(e):ys(e,n),s=os(r,a),o=[],l=0;l<=s;l++)o.push(ta(a,l));var c=o.reduce(function(u,f){var d=n!=null&&n.ISOWeek?J5(f):Z5(f,n),h=u.find(function(m){return m.weekNumber===d});return h?(h.dates.push(f),u):(u.push({weekNumber:d,dates:[f]}),u)},[]);return c}function ise(e,t){var n=IT(Na(e),KN(e),t);if(t!=null&&t.useFixedWeeks){var r=Dae(e,t);if(r<6){var a=n[n.length-1],s=a.dates[a.dates.length-1],o=r_(s,6-r),l=IT(r_(s,1),o,t);n.push.apply(n,l)}}return n}function sse(e){var t,n,r,a=Nn(),s=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,f=a.components,d=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,g=ise(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:s,weekStartsOn:d,firstWeekContainsDate:h}),v=(t=f==null?void 0:f.Head)!==null&&t!==void 0?t:wie,x=(n=f==null?void 0:f.Row)!==null&&n!==void 0?n:ase,y=(r=f==null?void 0:f.Footer)!==null&&r!==void 0?r:xie;return i.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&i.jsx(v,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(b){return i.jsx(x,{displayMonth:e.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),i.jsx(y,{displayMonth:e.displayMonth})]})}function ose(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var lse=ose()?p.useLayoutEffect:p.useEffect,Ow=!1,cse=0;function RT(){return"react-day-picker-".concat(++cse)}function use(e){var t,n=e??(Ow?RT():null),r=p.useState(n),a=r[0],s=r[1];return lse(function(){a===null&&s(RT())},[]),p.useEffect(function(){Ow===!1&&(Ow=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function dse(e){var t,n,r=Nn(),a=r.dir,s=r.classNames,o=r.styles,l=r.components,c=jp().displayMonths,u=use(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,d=[s.month],h=o.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,v=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(d.push(s.caption_start),h=kt(kt({},h),o.caption_start)),g&&(d.push(s.caption_end),h=kt(kt({},h),o.caption_end)),v&&(d.push(s.caption_between),h=kt(kt({},h),o.caption_between));var x=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:vie;return i.jsxs("div",{className:d.join(" "),style:h,children:[i.jsx(x,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(sse,{id:f,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function fse(e){var t=Nn(),n=t.classNames,r=t.styles;return i.jsx("div",{className:n.months,style:r.months,children:e.children})}function hse(e){var t,n,r=e.initialProps,a=Nn(),s=tC(),o=jp(),l=p.useState(!1),c=l[0],u=l[1];p.useEffect(function(){a.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[a.initialFocus,c,s.focus,s.focusTarget,s]);var f=[a.classNames.root,a.className];a.numberOfMonths>1&&f.push(a.classNames.multiple_months),a.showWeekNumber&&f.push(a.classNames.with_weeknumber);var d=kt(kt({},a.styles.root),a.style),h=Object.keys(r).filter(function(g){return g.startsWith("data-")}).reduce(function(g,v){var x;return kt(kt({},g),(x={},x[v]=r[v],x))},{}),m=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:fse;return i.jsx("div",kt({className:f.join(" "),style:d,dir:a.dir,id:a.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:i.jsx(m,{children:o.displayMonths.map(function(g,v){return i.jsx(dse,{displayIndex:v,displayMonth:g},v)})})}))}function mse(e){var t=e.children,n=Lae(e,["children"]);return i.jsx(rie,{initialProps:n,children:i.jsx(hie,{children:i.jsx(Gie,{initialProps:n,children:i.jsx(_ie,{initialProps:n,children:i.jsx(Nie,{initialProps:n,children:i.jsx(Rie,{children:i.jsx(Vie,{children:t})})})})})})})}function pse(e){return i.jsx(mse,kt({},e,{children:i.jsx(hse,{initialProps:e})}))}function i_({className:e,classNames:t,showOutsideDays:n=!0,...r}){return i.jsx(pse,{showOutsideDays:n,className:xe("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:xe(kd({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:xe(kd({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>i.jsx(XS,{className:"h-4 w-4"}),IconRight:({...a})=>i.jsx(Cy,{className:"h-4 w-4"})},...r})}i_.displayName="Calendar";var cb="Popover",[fB,f3e]=_r(cb,[jl]),_p=jl(),[gse,Nl]=fB(cb),hB=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:s,modal:o=!1}=e,l=_p(t),c=p.useRef(null),[u,f]=p.useState(!1),[d,h]=Ca({prop:r,defaultProp:a??!1,onChange:s,caller:cb});return i.jsx(Oy,{...l,children:i.jsx(gse,{scope:t,contentId:ir(),triggerRef:c,open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>f(!0),[]),onCustomAnchorRemove:p.useCallback(()=>f(!1),[]),modal:o,children:n})})};hB.displayName=cb;var mB="PopoverAnchor",vse=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Nl(mB,n),s=_p(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return p.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(up,{...s,...r,ref:t})});vse.displayName=mB;var pB="PopoverTrigger",gB=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Nl(pB,n),s=_p(n),o=St(t,a.triggerRef),l=i.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":wB(a.open),...r,ref:o,onClick:Ee(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:i.jsx(up,{asChild:!0,...s,children:l})});gB.displayName=pB;var rC="PopoverPortal",[xse,yse]=fB(rC,{forceMount:void 0}),vB=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,s=Nl(rC,t);return i.jsx(xse,{scope:t,forceMount:n,children:i.jsx(pr,{present:n||s.open,children:i.jsx(Zd,{asChild:!0,container:a,children:r})})})};vB.displayName=rC;var Cd="PopoverContent",xB=p.forwardRef((e,t)=>{const n=yse(Cd,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,s=Nl(Cd,e.__scopePopover);return i.jsx(pr,{present:r||s.open,children:s.modal?i.jsx(wse,{...a,ref:t}):i.jsx(jse,{...a,ref:t})})});xB.displayName=Cd;var bse=fl("PopoverContent.RemoveScroll"),wse=p.forwardRef((e,t)=>{const n=Nl(Cd,e.__scopePopover),r=p.useRef(null),a=St(t,r),s=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return Jy(o)},[]),i.jsx(gp,{as:bse,allowPinchZoom:!0,children:i.jsx(yB,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ee(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),s.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ee(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Ee(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),jse=p.forwardRef((e,t)=>{const n=Nl(Cd,e.__scopePopover),r=p.useRef(!1),a=p.useRef(!1);return i.jsx(yB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),yB=p.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:f,...d}=e,h=Nl(Cd,n),m=_p(n);return Xy(),i.jsx(pp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(Kc,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:i.jsx(Iy,{"data-state":wB(h.open),role:"dialog",id:h.contentId,...m,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),bB="PopoverClose",_se=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Nl(bB,n);return i.jsx(Ge.button,{type:"button",...r,ref:t,onClick:Ee(e.onClick,()=>a.onOpenChange(!1))})});_se.displayName=bB;var kse="PopoverArrow",Sse=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=_p(n);return i.jsx(Ry,{...a,...r,ref:t})});Sse.displayName=kse;function wB(e){return e?"open":"closed"}var Nse=hB,Cse=gB,Ase=vB,jB=xB;const ls=Nse,cs=Cse,Di=p.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},a)=>i.jsx(Ase,{children:i.jsx(jB,{ref:a,align:t,sideOffset:n,className:xe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Di.displayName=jB.displayName;function aC(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Ese=[" ","Enter","ArrowUp","ArrowDown"],Pse=[" ","Enter"],Ec="Select",[ub,db,Tse]=ap(Ec),[lf,h3e]=_r(Ec,[Tse,jl]),fb=jl(),[Ose,Cl]=lf(Ec),[Ise,Rse]=lf(Ec),_B=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:d,disabled:h,required:m,form:g}=e,v=fb(t),[x,y]=p.useState(null),[b,w]=p.useState(null),[j,k]=p.useState(!1),_=of(u),[S,E]=Ca({prop:r,defaultProp:a??!1,onChange:s,caller:Ec}),[N,I]=Ca({prop:o,defaultProp:l,onChange:c,caller:Ec}),P=p.useRef(null),D=x?g||!!x.closest("form"):!0,[L,B]=p.useState(new Set),U=Array.from(L).map($=>$.props.value).join(";");return i.jsx(Oy,{...v,children:i.jsxs(Ose,{required:m,scope:t,trigger:x,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:j,onValueNodeHasChildrenChange:k,contentId:ir(),value:N,onValueChange:I,open:S,onOpenChange:E,dir:_,triggerPointerDownPosRef:P,disabled:h,children:[i.jsx(ub.Provider,{scope:t,children:i.jsx(Ise,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback($=>{B(O=>new Set(O).add($))},[]),onNativeOptionRemove:p.useCallback($=>{B(O=>{const T=new Set(O);return T.delete($),T})},[]),children:n})}),D?i.jsxs(KB,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:d,value:N,onChange:$=>I($.target.value),disabled:h,form:g,children:[N===void 0?i.jsx("option",{value:""}):null,Array.from(L)]},U):null]})})};_B.displayName=Ec;var kB="SelectTrigger",SB=p.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,s=fb(n),o=Cl(kB,n),l=o.disabled||r,c=St(t,o.onTriggerChange),u=db(n),f=p.useRef("touch"),[d,h,m]=YB(v=>{const x=u().filter(w=>!w.disabled),y=x.find(w=>w.value===o.value),b=XB(x,v,y);b!==void 0&&o.onValueChange(b.value)}),g=v=>{l||(o.onOpenChange(!0),m()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return i.jsx(up,{asChild:!0,...s,children:i.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":GB(o.value)?"":void 0,...a,ref:c,onClick:Ee(a.onClick,v=>{v.currentTarget.focus(),f.current!=="mouse"&&g(v)}),onPointerDown:Ee(a.onPointerDown,v=>{f.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:Ee(a.onKeyDown,v=>{const x=d.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(x&&v.key===" ")&&Ese.includes(v.key)&&(g(),v.preventDefault())})})})});SB.displayName=kB;var NB="SelectValue",CB=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:s,placeholder:o="",...l}=e,c=Cl(NB,n),{onValueNodeHasChildrenChange:u}=c,f=s!==void 0,d=St(t,c.onValueNodeChange);return Xn(()=>{u(f)},[u,f]),i.jsx(Ge.span,{...l,ref:d,style:{pointerEvents:"none"},children:GB(c.value)?i.jsx(i.Fragment,{children:o}):s})});CB.displayName=NB;var Mse="SelectIcon",AB=p.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return i.jsx(Ge.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});AB.displayName=Mse;var Dse="SelectPortal",EB=e=>i.jsx(Zd,{asChild:!0,...e});EB.displayName=Dse;var Pc="SelectContent",PB=p.forwardRef((e,t)=>{const n=Cl(Pc,e.__scopeSelect),[r,a]=p.useState();if(Xn(()=>{a(new DocumentFragment)},[]),!n.open){const s=r;return s?Hc.createPortal(i.jsx(TB,{scope:e.__scopeSelect,children:i.jsx(ub.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),s):null}return i.jsx(OB,{...e,ref:t})});PB.displayName=Pc;var Si=10,[TB,Al]=lf(Pc),$se="SelectContentImpl",Lse=fl("SelectContent.RemoveScroll"),OB=p.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x,...y}=e,b=Cl(Pc,n),[w,j]=p.useState(null),[k,_]=p.useState(null),S=St(t,H=>j(H)),[E,N]=p.useState(null),[I,P]=p.useState(null),D=db(n),[L,B]=p.useState(!1),U=p.useRef(!1);p.useEffect(()=>{if(w)return Jy(w)},[w]),Xy();const $=p.useCallback(H=>{const[Q,...X]=D().map(J=>J.ref.current),[re]=X.slice(-1),fe=document.activeElement;for(const J of H)if(J===fe||(J==null||J.scrollIntoView({block:"nearest"}),J===Q&&k&&(k.scrollTop=0),J===re&&k&&(k.scrollTop=k.scrollHeight),J==null||J.focus(),document.activeElement!==fe))return},[D,k]),O=p.useCallback(()=>$([E,w]),[$,E,w]);p.useEffect(()=>{L&&O()},[L,O]);const{onOpenChange:T,triggerPointerDownPosRef:R}=b;p.useEffect(()=>{if(w){let H={x:0,y:0};const Q=re=>{var fe,J;H={x:Math.abs(Math.round(re.pageX)-(((fe=R.current)==null?void 0:fe.x)??0)),y:Math.abs(Math.round(re.pageY)-(((J=R.current)==null?void 0:J.y)??0))}},X=re=>{H.x<=10&&H.y<=10?re.preventDefault():w.contains(re.target)||T(!1),document.removeEventListener("pointermove",Q),R.current=null};return R.current!==null&&(document.addEventListener("pointermove",Q),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Q),document.removeEventListener("pointerup",X,{capture:!0})}}},[w,T,R]),p.useEffect(()=>{const H=()=>T(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[T]);const[C,F]=YB(H=>{const Q=D().filter(fe=>!fe.disabled),X=Q.find(fe=>fe.ref.current===document.activeElement),re=XB(Q,H,X);re&&setTimeout(()=>re.ref.current.focus())}),M=p.useCallback((H,Q,X)=>{const re=!U.current&&!X;(b.value!==void 0&&b.value===Q||re)&&(N(H),re&&(U.current=!0))},[b.value]),A=p.useCallback(()=>w==null?void 0:w.focus(),[w]),W=p.useCallback((H,Q,X)=>{const re=!U.current&&!X;(b.value!==void 0&&b.value===Q||re)&&P(H)},[b.value]),G=r==="popper"?s_:IB,Y=G===s_?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x}:{};return i.jsx(TB,{scope:n,content:w,viewport:k,onViewportChange:_,itemRefCallback:M,selectedItem:E,onItemLeave:A,itemTextRefCallback:W,focusSelectedItem:O,selectedItemText:I,position:r,isPositioned:L,searchRef:C,children:i.jsx(gp,{as:Lse,allowPinchZoom:!0,children:i.jsx(pp,{asChild:!0,trapped:b.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:Ee(a,H=>{var Q;(Q=b.trigger)==null||Q.focus({preventScroll:!0}),H.preventDefault()}),children:i.jsx(Kc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:i.jsx(G,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:H=>H.preventDefault(),...y,...Y,onPlaced:()=>B(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ee(y.onKeyDown,H=>{const Q=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!Q&&H.key.length===1&&F(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let re=D().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(H.key)&&(re=re.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const fe=H.target,J=re.indexOf(fe);re=re.slice(J+1)}setTimeout(()=>$(re)),H.preventDefault()}})})})})})})});OB.displayName=$se;var Fse="SelectItemAlignedPosition",IB=p.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,s=Cl(Pc,n),o=Al(Pc,n),[l,c]=p.useState(null),[u,f]=p.useState(null),d=St(t,S=>f(S)),h=db(n),m=p.useRef(!1),g=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:y,focusSelectedItem:b}=o,w=p.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&v&&x&&y){const S=s.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),N=s.valueNode.getBoundingClientRect(),I=y.getBoundingClientRect();if(s.dir!=="rtl"){const fe=I.left-E.left,J=N.left-fe,ye=S.left-J,z=S.width+ye,q=Math.max(z,E.width),ae=window.innerWidth-Si,se=n_(J,[Si,Math.max(Si,ae-q)]);l.style.minWidth=z+"px",l.style.left=se+"px"}else{const fe=E.right-I.right,J=window.innerWidth-N.right-fe,ye=window.innerWidth-S.right-J,z=S.width+ye,q=Math.max(z,E.width),ae=window.innerWidth-Si,se=n_(J,[Si,Math.max(Si,ae-q)]);l.style.minWidth=z+"px",l.style.right=se+"px"}const P=h(),D=window.innerHeight-Si*2,L=v.scrollHeight,B=window.getComputedStyle(u),U=parseInt(B.borderTopWidth,10),$=parseInt(B.paddingTop,10),O=parseInt(B.borderBottomWidth,10),T=parseInt(B.paddingBottom,10),R=U+$+L+T+O,C=Math.min(x.offsetHeight*5,R),F=window.getComputedStyle(v),M=parseInt(F.paddingTop,10),A=parseInt(F.paddingBottom,10),W=S.top+S.height/2-Si,G=D-W,Y=x.offsetHeight/2,H=x.offsetTop+Y,Q=U+$+H,X=R-Q;if(Q<=W){const fe=P.length>0&&x===P[P.length-1].ref.current;l.style.bottom="0px";const J=u.clientHeight-v.offsetTop-v.offsetHeight,ye=Math.max(G,Y+(fe?A:0)+J+O),z=Q+ye;l.style.height=z+"px"}else{const fe=P.length>0&&x===P[0].ref.current;l.style.top="0px";const ye=Math.max(W,U+v.offsetTop+(fe?M:0)+Y)+X;l.style.height=ye+"px",v.scrollTop=Q-W+v.offsetTop}l.style.margin=`${Si}px 0`,l.style.minHeight=C+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,l,u,v,x,y,s.dir,r]);Xn(()=>w(),[w]);const[j,k]=p.useState();Xn(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const _=p.useCallback(S=>{S&&g.current===!0&&(w(),b==null||b(),g.current=!1)},[w,b]);return i.jsx(Use,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:_,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:i.jsx(Ge.div,{...a,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});IB.displayName=Fse;var Bse="SelectPopperPosition",s_=p.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Si,...s}=e,o=fb(n);return i.jsx(Iy,{...o,...s,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});s_.displayName=Bse;var[Use,iC]=lf(Pc,{}),o_="SelectViewport",RB=p.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,s=Al(o_,n),o=iC(o_,n),l=St(t,s.onViewportChange),c=p.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(ub.Slot,{scope:n,children:i.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ee(a.onScroll,u=>{const f=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){const m=Math.abs(c.current-f.scrollTop);if(m>0){const g=window.innerHeight-Si*2,v=parseFloat(d.style.minHeight),x=parseFloat(d.style.height),y=Math.max(v,x);if(y<g){const b=y+m,w=Math.min(g,b),j=b-w;d.style.height=w+"px",d.style.bottom==="0px"&&(f.scrollTop=j>0?j:0,d.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});RB.displayName=o_;var MB="SelectGroup",[zse,qse]=lf(MB),Wse=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=ir();return i.jsx(zse,{scope:n,id:a,children:i.jsx(Ge.div,{role:"group","aria-labelledby":a,...r,ref:t})})});Wse.displayName=MB;var DB="SelectLabel",$B=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=qse(DB,n);return i.jsx(Ge.div,{id:a.id,...r,ref:t})});$B.displayName=DB;var ax="SelectItem",[Hse,LB]=lf(ax),FB=p.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:s,...o}=e,l=Cl(ax,n),c=Al(ax,n),u=l.value===r,[f,d]=p.useState(s??""),[h,m]=p.useState(!1),g=St(t,b=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,b,r,a)}),v=ir(),x=p.useRef("touch"),y=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Hse,{scope:n,value:r,disabled:a,textId:v,isSelected:u,onItemTextChange:p.useCallback(b=>{d(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:i.jsx(ub.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:i.jsx(Ge.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:Ee(o.onFocus,()=>m(!0)),onBlur:Ee(o.onBlur,()=>m(!1)),onClick:Ee(o.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:Ee(o.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:Ee(o.onPointerDown,b=>{x.current=b.pointerType}),onPointerMove:Ee(o.onPointerMove,b=>{var w;x.current=b.pointerType,a?(w=c.onItemLeave)==null||w.call(c):x.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ee(o.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Ee(o.onKeyDown,b=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&b.key===" "||(Pse.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});FB.displayName=ax;var lh="SelectItemText",BB=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...s}=e,o=Cl(lh,n),l=Al(lh,n),c=LB(lh,n),u=Rse(lh,n),[f,d]=p.useState(null),h=St(t,y=>d(y),c.onItemTextChange,y=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,y,c.value,c.disabled)}),m=f==null?void 0:f.textContent,g=p.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=u;return Xn(()=>(v(g),()=>x(g)),[v,x,g]),i.jsxs(i.Fragment,{children:[i.jsx(Ge.span,{id:c.textId,...s,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Hc.createPortal(s.children,o.valueNode):null]})});BB.displayName=lh;var UB="SelectItemIndicator",zB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return LB(UB,n).isSelected?i.jsx(Ge.span,{"aria-hidden":!0,...r,ref:t}):null});zB.displayName=UB;var l_="SelectScrollUpButton",qB=p.forwardRef((e,t)=>{const n=Al(l_,e.__scopeSelect),r=iC(l_,e.__scopeSelect),[a,s]=p.useState(!1),o=St(t,r.onScrollButtonChange);return Xn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?i.jsx(HB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});qB.displayName=l_;var c_="SelectScrollDownButton",WB=p.forwardRef((e,t)=>{const n=Al(c_,e.__scopeSelect),r=iC(c_,e.__scopeSelect),[a,s]=p.useState(!1),o=St(t,r.onScrollButtonChange);return Xn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;s(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?i.jsx(HB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});WB.displayName=c_;var HB=p.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,s=Al("SelectScrollButton",n),o=p.useRef(null),l=db(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Xn(()=>{var f;const u=l().find(d=>d.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),i.jsx(Ge.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ee(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ee(a.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ee(a.onPointerLeave,()=>{c()})})}),Vse="SelectSeparator",VB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(Ge.div,{"aria-hidden":!0,...r,ref:t})});VB.displayName=Vse;var u_="SelectArrow",Kse=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=fb(n),s=Cl(u_,n),o=Al(u_,n);return s.open&&o.position==="popper"?i.jsx(Ry,{...a,...r,ref:t}):null});Kse.displayName=u_;var Gse="SelectBubbleInput",KB=p.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=p.useRef(null),s=St(r,a),o=aC(t);return p.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&f){const d=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(d)}},[o,t]),i.jsx(Ge.select,{...n,style:{...hL,...n.style},ref:s,defaultValue:t})});KB.displayName=Gse;function GB(e){return e===""||e===void 0}function YB(e){const t=Kn(e),n=p.useRef(""),r=p.useRef(0),a=p.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),s=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,s]}function XB(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let o=Yse(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function Yse(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Xse=_B,JB=SB,Jse=CB,Qse=AB,Zse=EB,QB=PB,eoe=RB,ZB=$B,eU=FB,toe=BB,noe=zB,tU=qB,nU=WB,rU=VB;const Ut=Xse,Rt=Jse,Dt=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(JB,{ref:r,className:xe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(Qse,{asChild:!0,children:i.jsx(xa,{className:"h-4 w-4 opacity-50"})})]}));Dt.displayName=JB.displayName;const aU=p.forwardRef(({className:e,...t},n)=>i.jsx(tU,{ref:n,className:xe("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx($L,{className:"h-4 w-4"})}));aU.displayName=tU.displayName;const iU=p.forwardRef(({className:e,...t},n)=>i.jsx(nU,{ref:n,className:xe("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(xa,{className:"h-4 w-4"})}));iU.displayName=nU.displayName;const $t=p.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>i.jsx(Zse,{children:i.jsxs(QB,{ref:a,className:xe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(aU,{}),i.jsx(eoe,{className:xe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(iU,{})]})}));$t.displayName=QB.displayName;const roe=p.forwardRef(({className:e,...t},n)=>i.jsx(ZB,{ref:n,className:xe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));roe.displayName=ZB.displayName;const De=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(eU,{ref:r,className:xe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(noe,{children:i.jsx(Ny,{className:"h-4 w-4"})})}),i.jsx(toe,{children:t})]}));De.displayName=eU.displayName;const aoe=p.forwardRef(({className:e,...t},n)=>i.jsx(rU,{ref:n,className:xe("-mx-1 my-1 h-px bg-muted",e),...t}));aoe.displayName=rU.displayName;var MT=1,ioe=.9,soe=.8,ooe=.17,Iw=.1,Rw=.999,loe=.9999,coe=.99,uoe=/[\\\/_+.#"@\[\(\{&]/,doe=/[\\\/_+.#"@\[\(\{&]/g,foe=/[\s-]/,sU=/[\s-]/g;function d_(e,t,n,r,a,s,o){if(s===t.length)return a===e.length?MT:coe;var l=`${a},${s}`;if(o[l]!==void 0)return o[l];for(var c=r.charAt(s),u=n.indexOf(c,a),f=0,d,h,m,g;u>=0;)d=d_(e,t,n,r,u+1,s+1,o),d>f&&(u===a?d*=MT:uoe.test(e.charAt(u-1))?(d*=soe,m=e.slice(a,u-1).match(doe),m&&a>0&&(d*=Math.pow(Rw,m.length))):foe.test(e.charAt(u-1))?(d*=ioe,g=e.slice(a,u-1).match(sU),g&&a>0&&(d*=Math.pow(Rw,g.length))):(d*=ooe,a>0&&(d*=Math.pow(Rw,u-a))),e.charAt(u)!==t.charAt(s)&&(d*=loe)),(d<Iw&&n.charAt(u-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(u-1)!==r.charAt(s))&&(h=d_(e,t,n,r,u+1,s+2,o),h*Iw>d&&(d=h*Iw)),d>f&&(f=d),u=n.indexOf(c,u+1);return o[l]=f,f}function DT(e){return e.toLowerCase().replace(sU," ")}function hoe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,d_(e,t,DT(e),DT(t),0,0,{})}var Bf='[cmdk-group=""]',Mw='[cmdk-group-items=""]',moe='[cmdk-group-heading=""]',oU='[cmdk-item=""]',$T=`${oU}:not([aria-disabled="true"])`,f_="cmdk-item-select",Su="data-value",poe=(e,t,n)=>hoe(e,t,n),lU=p.createContext(void 0),kp=()=>p.useContext(lU),cU=p.createContext(void 0),sC=()=>p.useContext(cU),uU=p.createContext(void 0),dU=p.forwardRef((e,t)=>{let n=Nu(()=>{var M,A;return{search:"",value:(A=(M=e.value)!=null?M:e.defaultValue)!=null?A:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Nu(()=>new Set),a=Nu(()=>new Map),s=Nu(()=>new Map),o=Nu(()=>new Set),l=fU(e),{label:c,children:u,value:f,onValueChange:d,filter:h,shouldFilter:m,loop:g,disablePointerSelection:v=!1,vimBindings:x=!0,...y}=e,b=ir(),w=ir(),j=ir(),k=p.useRef(null),_=Noe();Tc(()=>{if(f!==void 0){let M=f.trim();n.current.value=M,S.emit()}},[f]),Tc(()=>{_(6,L)},[]);let S=p.useMemo(()=>({subscribe:M=>(o.current.add(M),()=>o.current.delete(M)),snapshot:()=>n.current,setState:(M,A,W)=>{var G,Y,H,Q;if(!Object.is(n.current[M],A)){if(n.current[M]=A,M==="search")D(),I(),_(1,P);else if(M==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let X=document.getElementById(j);X?X.focus():(G=document.getElementById(b))==null||G.focus()}if(_(7,()=>{var X;n.current.selectedItemId=(X=B())==null?void 0:X.id,S.emit()}),W||_(5,L),((Y=l.current)==null?void 0:Y.value)!==void 0){let X=A??"";(Q=(H=l.current).onValueChange)==null||Q.call(H,X);return}}S.emit()}},emit:()=>{o.current.forEach(M=>M())}}),[]),E=p.useMemo(()=>({value:(M,A,W)=>{var G;A!==((G=s.current.get(M))==null?void 0:G.value)&&(s.current.set(M,{value:A,keywords:W}),n.current.filtered.items.set(M,N(A,W)),_(2,()=>{I(),S.emit()}))},item:(M,A)=>(r.current.add(M),A&&(a.current.has(A)?a.current.get(A).add(M):a.current.set(A,new Set([M]))),_(3,()=>{D(),I(),n.current.value||P(),S.emit()}),()=>{s.current.delete(M),r.current.delete(M),n.current.filtered.items.delete(M);let W=B();_(4,()=>{D(),(W==null?void 0:W.getAttribute("id"))===M&&P(),S.emit()})}),group:M=>(a.current.has(M)||a.current.set(M,new Set),()=>{s.current.delete(M),a.current.delete(M)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:b,inputId:j,labelId:w,listInnerRef:k}),[]);function N(M,A){var W,G;let Y=(G=(W=l.current)==null?void 0:W.filter)!=null?G:poe;return M?Y(M,n.current.search,A):0}function I(){if(!n.current.search||l.current.shouldFilter===!1)return;let M=n.current.filtered.items,A=[];n.current.filtered.groups.forEach(G=>{let Y=a.current.get(G),H=0;Y.forEach(Q=>{let X=M.get(Q);H=Math.max(X,H)}),A.push([G,H])});let W=k.current;U().sort((G,Y)=>{var H,Q;let X=G.getAttribute("id"),re=Y.getAttribute("id");return((H=M.get(re))!=null?H:0)-((Q=M.get(X))!=null?Q:0)}).forEach(G=>{let Y=G.closest(Mw);Y?Y.appendChild(G.parentElement===Y?G:G.closest(`${Mw} > *`)):W.appendChild(G.parentElement===W?G:G.closest(`${Mw} > *`))}),A.sort((G,Y)=>Y[1]-G[1]).forEach(G=>{var Y;let H=(Y=k.current)==null?void 0:Y.querySelector(`${Bf}[${Su}="${encodeURIComponent(G[0])}"]`);H==null||H.parentElement.appendChild(H)})}function P(){let M=U().find(W=>W.getAttribute("aria-disabled")!=="true"),A=M==null?void 0:M.getAttribute(Su);S.setState("value",A||void 0)}function D(){var M,A,W,G;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Y=0;for(let H of r.current){let Q=(A=(M=s.current.get(H))==null?void 0:M.value)!=null?A:"",X=(G=(W=s.current.get(H))==null?void 0:W.keywords)!=null?G:[],re=N(Q,X);n.current.filtered.items.set(H,re),re>0&&Y++}for(let[H,Q]of a.current)for(let X of Q)if(n.current.filtered.items.get(X)>0){n.current.filtered.groups.add(H);break}n.current.filtered.count=Y}function L(){var M,A,W;let G=B();G&&(((M=G.parentElement)==null?void 0:M.firstChild)===G&&((W=(A=G.closest(Bf))==null?void 0:A.querySelector(moe))==null||W.scrollIntoView({block:"nearest"})),G.scrollIntoView({block:"nearest"}))}function B(){var M;return(M=k.current)==null?void 0:M.querySelector(`${oU}[aria-selected="true"]`)}function U(){var M;return Array.from(((M=k.current)==null?void 0:M.querySelectorAll($T))||[])}function $(M){let A=U()[M];A&&S.setState("value",A.getAttribute(Su))}function O(M){var A;let W=B(),G=U(),Y=G.findIndex(Q=>Q===W),H=G[Y+M];(A=l.current)!=null&&A.loop&&(H=Y+M<0?G[G.length-1]:Y+M===G.length?G[0]:G[Y+M]),H&&S.setState("value",H.getAttribute(Su))}function T(M){let A=B(),W=A==null?void 0:A.closest(Bf),G;for(;W&&!G;)W=M>0?koe(W,Bf):Soe(W,Bf),G=W==null?void 0:W.querySelector($T);G?S.setState("value",G.getAttribute(Su)):O(M)}let R=()=>$(U().length-1),C=M=>{M.preventDefault(),M.metaKey?R():M.altKey?T(1):O(1)},F=M=>{M.preventDefault(),M.metaKey?$(0):M.altKey?T(-1):O(-1)};return p.createElement(Ge.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:M=>{var A;(A=y.onKeyDown)==null||A.call(y,M);let W=M.nativeEvent.isComposing||M.keyCode===229;if(!(M.defaultPrevented||W))switch(M.key){case"n":case"j":{x&&M.ctrlKey&&C(M);break}case"ArrowDown":{C(M);break}case"p":case"k":{x&&M.ctrlKey&&F(M);break}case"ArrowUp":{F(M);break}case"Home":{M.preventDefault(),$(0);break}case"End":{M.preventDefault(),R();break}case"Enter":{M.preventDefault();let G=B();if(G){let Y=new Event(f_);G.dispatchEvent(Y)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:E.inputId,id:E.labelId,style:Aoe},c),hb(e,M=>p.createElement(cU.Provider,{value:S},p.createElement(lU.Provider,{value:E},M))))}),goe=p.forwardRef((e,t)=>{var n,r;let a=ir(),s=p.useRef(null),o=p.useContext(uU),l=kp(),c=fU(e),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;Tc(()=>{if(!u)return l.item(a,o==null?void 0:o.id)},[u]);let f=hU(a,s,[e.value,e.children,s],e.keywords),d=sC(),h=gl(_=>_.value&&_.value===f.current),m=gl(_=>u||l.filter()===!1?!0:_.search?_.filtered.items.get(a)>0:!0);p.useEffect(()=>{let _=s.current;if(!(!_||e.disabled))return _.addEventListener(f_,g),()=>_.removeEventListener(f_,g)},[m,e.onSelect,e.disabled]);function g(){var _,S;v(),(S=(_=c.current).onSelect)==null||S.call(_,f.current)}function v(){d.setState("value",f.current,!0)}if(!m)return null;let{disabled:x,value:y,onSelect:b,forceMount:w,keywords:j,...k}=e;return p.createElement(Ge.div,{ref:ro(s,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!h,"data-disabled":!!x,"data-selected":!!h,onPointerMove:x||l.getDisablePointerSelection()?void 0:v,onClick:x?void 0:g},e.children)}),voe=p.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...s}=e,o=ir(),l=p.useRef(null),c=p.useRef(null),u=ir(),f=kp(),d=gl(m=>a||f.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);Tc(()=>f.group(o),[]),hU(o,l,[e.value,e.heading,c]);let h=p.useMemo(()=>({id:o,forceMount:a}),[a]);return p.createElement(Ge.div,{ref:ro(l,t),...s,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&p.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),hb(e,m=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},p.createElement(uU.Provider,{value:h},m))))}),xoe=p.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=p.useRef(null),s=gl(o=>!o.search);return!n&&!s?null:p.createElement(Ge.div,{ref:ro(a,t),...r,"cmdk-separator":"",role:"separator"})}),yoe=p.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,s=sC(),o=gl(u=>u.search),l=gl(u=>u.selectedItemId),c=kp();return p.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),p.createElement(Ge.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:u=>{a||s.setState("search",u.target.value),n==null||n(u.target.value)}})}),boe=p.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,s=p.useRef(null),o=p.useRef(null),l=gl(u=>u.selectedItemId),c=kp();return p.useEffect(()=>{if(o.current&&s.current){let u=o.current,f=s.current,d,h=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let m=u.offsetHeight;f.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return h.observe(u),()=>{cancelAnimationFrame(d),h.unobserve(u)}}},[]),p.createElement(Ge.div,{ref:ro(s,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:c.listId},hb(e,u=>p.createElement("div",{ref:ro(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),woe=p.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:s,container:o,...l}=e;return p.createElement(MN,{open:n,onOpenChange:r},p.createElement(DN,{container:o},p.createElement(rb,{"cmdk-overlay":"",className:a}),p.createElement(ab,{"aria-label":e.label,"cmdk-dialog":"",className:s},p.createElement(dU,{ref:t,...l}))))}),joe=p.forwardRef((e,t)=>gl(n=>n.filtered.count===0)?p.createElement(Ge.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),_oe=p.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...s}=e;return p.createElement(Ge.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},hb(e,o=>p.createElement("div",{"aria-hidden":!0},o)))}),Aa=Object.assign(dU,{List:boe,Item:goe,Input:yoe,Group:voe,Separator:xoe,Dialog:woe,Empty:joe,Loading:_oe});function koe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Soe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function fU(e){let t=p.useRef(e);return Tc(()=>{t.current=e}),t}var Tc=typeof window>"u"?p.useEffect:p.useLayoutEffect;function Nu(e){let t=p.useRef();return t.current===void 0&&(t.current=e()),t}function gl(e){let t=sC(),n=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,n,n)}function hU(e,t,n,r=[]){let a=p.useRef(),s=kp();return Tc(()=>{var o;let l=(()=>{var u;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(u=f.current.textContent)==null?void 0:u.trim():a.current}})(),c=r.map(u=>u.trim());s.value(e,l,c),(o=t.current)==null||o.setAttribute(Su,l),a.current=l}),a}var Noe=()=>{let[e,t]=p.useState(),n=Nu(()=>new Map);return Tc(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function Coe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function hb({asChild:e,children:t},n){return e&&p.isValidElement(t)?p.cloneElement(Coe(t),{ref:t.ref},n(t.props.children)):n(t)}var Aoe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Oc=p.forwardRef(({className:e,...t},n)=>i.jsx(Aa,{ref:n,className:xe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Oc.displayName=Aa.displayName;const Ic=p.forwardRef(({className:e,...t},n)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(hs,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(Aa.Input,{ref:n,className:xe("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Ic.displayName=Aa.Input.displayName;const mb=p.forwardRef(({className:e,...t},n)=>i.jsx(Aa.List,{ref:n,className:xe("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));mb.displayName=Aa.List.displayName;const Rc=p.forwardRef((e,t)=>i.jsx(Aa.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Rc.displayName=Aa.Empty.displayName;const Mc=p.forwardRef(({className:e,...t},n)=>i.jsx(Aa.Group,{ref:n,className:xe("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Mc.displayName=Aa.Group.displayName;const Eoe=p.forwardRef(({className:e,...t},n)=>i.jsx(Aa.Separator,{ref:n,className:xe("-mx-1 h-px bg-border",e),...t}));Eoe.displayName=Aa.Separator.displayName;const Dc=p.forwardRef(({className:e,...t},n)=>i.jsx(Aa.Item,{ref:n,className:xe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));Dc.displayName=Aa.Item.displayName;let Dw=!1,$w=null;function fm(){return Dw?Promise.resolve():($w||($w=ne.auth.getSession().then(()=>{Dw=!0}).catch(()=>{Dw=!0})),$w)}const mU=()=>{const{user:e}=Vr(),{userRoles:t,loading:n}=jr(),[r,a]=p.useState("none"),[s,o]=p.useState(null),[l,c]=p.useState(!0),[u,f]=p.useState(null),d=p.useMemo(()=>t.map(x=>((x==null?void 0:x.name)??"").toLowerCase()),[t]),h=d.includes("master_agent"),m=d.includes("super_agent"),g=d.includes("agent");return p.useEffect(()=>{let x=!0;const y=(b,w,j)=>{x&&((j==null?void 0:j.loading)!==void 0&&c(j.loading),(j==null?void 0:j.error)!==void 0&&f(j.error),a(b),o(w))};return e!=null&&e.id?n?(c(!0),()=>{x=!1}):h?(y("all",null,{loading:!1,error:null}),()=>{x=!1}):m?(y("super",e.id,{loading:!1,error:null}),()=>{x=!1}):g?(c(!0),f(null),(async()=>{try{await fm();const{data:b,error:w}=await ne.from("super_agent_members").select("super_agent_id").eq("agent_user_id",e.id).maybeSingle();if(!x)return;if(w)throw w;const j=(b==null?void 0:b.super_agent_id)??null;j?y("agent",j,{loading:!1,error:null}):y("none",null,{loading:!1,error:"Agent belum memiliki Super Agent penanggung jawab."})}catch(b){if(!x)return;console.error("Failed to resolve agent super scope",b),y("none",null,{loading:!1,error:b instanceof Error?b.message:"Gagal memuat cakupan agen AI."})}})(),()=>{x=!1}):(d.length>0?y("all",null,{loading:!1,error:null}):c(!0),()=>{x=!1}):(y("none",null,{loading:!1,error:null}),()=>{x=!1})},[e==null?void 0:e.id,n,h,m,g,d]),{mode:r,superAgentId:s,loading:l,error:u,refresh:async()=>{if(!(e!=null&&e.id)||!g)return s;c(!0),f(null);try{await fm();const{data:x,error:y}=await ne.from("super_agent_members").select("super_agent_id").eq("agent_user_id",e.id).maybeSingle();if(y)throw y;const b=(x==null?void 0:x.super_agent_id)??null;return b?(a("agent"),o(b)):(a("none"),o(null),f("Agent belum memiliki Super Agent penanggung jawab.")),b}catch(x){return console.error("Failed to refresh agent super scope",x),a("none"),o(null),f(x instanceof Error?x.message:"Gagal memuat cakupan agen AI."),null}finally{c(!1)}}}},Sp=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),o=p.useState({current:null})[0],{user:l}=Vr(),{mode:c,superAgentId:u,loading:f,error:d}=mU(),h=p.useMemo(()=>{const g="v2",v=(l==null?void 0:l.id)??"anon";return c==="all"?`app.cachedAIAgents:${g}:${v}:all`:c==="none"?`app.cachedAIAgents:${g}:${v}:none`:`app.cachedAIAgents:${g}:${v}:${u??"none"}`},[c,u,l==null?void 0:l.id]),m=async()=>{if(!f)try{const g=`${c}:${u??"null"}`;if(o.current===g)return;if(o.current=g,r(!0),s(d??null),c==="none"){t([]);try{localStorage.setItem(h,JSON.stringify([]))}catch{}return}await fm();const v="id, org_id, name, description, system_prompt, welcome_message, transfer_conditions, stop_ai_after_handoff, response_temperature, created_at, auto_resolve_after_minutes, enable_resolve, super_agent_id";let x=null,y=null;if(c==="super"||c==="agent"){if(!u){t([]);try{localStorage.setItem(h,JSON.stringify([]))}catch{}return}const{data:b,error:w}=await ne.from("ai_profiles").select(v).eq("super_agent_id",u).order("created_at",{ascending:!1});if(x=b,y=w,(y==null?void 0:y.code)==="42703"){const j=await ne.from("ai_profiles").select(v).order("created_at",{ascending:!1});x=j.data,y=j.error}}else{const{data:b,error:w}=await ne.from("ai_profiles").select(v).order("created_at",{ascending:!1});x=b,y=w}if(y){console.error("Error fetching AI agents:",y),s(y.message),t([]);return}t(x||[]);try{localStorage.setItem(h,JSON.stringify(x||[]))}catch{}}catch(g){console.error("Error fetching AI agents:",g),s("Failed to fetch AI agents"),t([])}finally{o.current=null,r(!1)}};return p.useEffect(()=>{if(f){r(!0);return}if(c==="none"){t([]),s(d??"Tidak ada agen AI yang tersedia untuk akun ini."),r(!1);return}try{const x=localStorage.getItem(h);if(x){const y=JSON.parse(x);Array.isArray(y)&&t(y)}}catch{}const v=setTimeout(()=>m(),50);return()=>clearTimeout(v)},[f,c,d,h]),{aiAgents:e,loading:n||f,error:a,fetchAIAgents:m,scopeMode:c,superAgentId:u}},El=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null);let o=!1;const l=w=>{o=w},c=()=>{try{const w=localStorage.getItem("app.cachedAgents");if(!w)return!1;const j=JSON.parse(w);if(Array.isArray(j))return t(j),!0}catch{}return!1},u=w=>{const j=(w==null?void 0:w.filter(k=>k!=null))||[];return j.includes("master_agent")?"master_agent":j.includes("super_agent")?"super_agent":j.includes("agent")?"agent":null},f=6e4;globalThis.__agentsCache||(globalThis.__agentsCache={data:null,ts:0,inFlight:null});const d=globalThis.__agentsCache,h=w=>(w||[]).map(j=>{var S;const k=((S=j.roles)==null?void 0:S.filter(E=>E!=null))||[],_=u(j.roles||[]);return{user_id:j.id,email:j.email,display_name:j.display_name,avatar_url:j.avatar_url,timezone:j.timezone,created_at:j.created_at,roles:k,primaryRole:_,status:"Active",super_agent_id:null}}),m=async()=>(d.inFlight||(d.inFlight=(async()=>{await fm();const{data:w,error:j}=await ne.from("v_users").select("*").order("created_at",{ascending:!1});if(j)throw j;let k=h(w||[]);try{const{data:_}=await ne.from("super_agent_members").select("agent_user_id, super_agent_id");if(_&&Array.isArray(_)){const S={};_.forEach(E=>{S[E.agent_user_id]=E.super_agent_id}),k=k.map(E=>E.primaryRole==="agent"?{...E,super_agent_id:S[E.user_id]||null}:E)}}catch{}d.data=k,d.ts=Date.now(),d.inFlight=null;try{localStorage.setItem("app.cachedAgents",JSON.stringify(k))}catch{}return k})().catch(w=>{throw d.inFlight=null,w})),d.inFlight),g=async()=>d.data&&Date.now()-d.ts<f?d.data:await m(),v=async w=>{try{r(!0),s(null),w!=null&&w.force&&(d.ts=0);const j=await g();t(j)}catch(j){console.error("Error fetching human agents:",j),s("Failed to fetch human agents"),t([])}finally{r(!1)}},x=async w=>{var j,k;try{s(null);const _=w.email.trim().toLowerCase();if(w.role==="agent"&&!w.super_agent_id)throw new Error("Agents must be assigned to a super agent before they can be created.");const{data:S,error:E}=await ne.from("v_human_agents").select("user_id, confirmation_status").ilike("email",_).maybeSingle();if(E)throw E;if(S){const D=(()=>{switch(S.confirmation_status){case"accepted":return"assigned to an active member";case"waiting":return"pending for an existing invite";case"expired":return"associated with an expired invite";default:return"in use"}})();throw new Error(`The email ${_} is already ${D}. Choose a different email or manage the existing user instead.`)}const{data:N,error:I}=await ne.functions.invoke("admin-create-user",{headers:{"x-client-origin":typeof window<"u"?window.location.origin:""},body:{email:_,full_name:w.full_name,role:w.role,super_agent_id:w.super_agent_id??null,org_id:w.org_id??null}});if(I)throw I;try{const D=(N==null?void 0:N.id)||(N==null?void 0:N.user_id)||((j=N==null?void 0:N.user)==null?void 0:j.id)||null;D&&await ne.from("users_profile").update({is_2fa_email_enabled:o}).eq("user_id",D)}catch{}await v({force:!0});try{await Wt({action:"user.create",resource:"user",resourceId:(N==null?void 0:N.id)||null,context:w})}catch{}return{id:(N==null?void 0:N.id)||(N==null?void 0:N.user_id)||((k=N==null?void 0:N.user)==null?void 0:k.id)||null}}catch(_){throw console.error("Error creating agent:",_),s(_ instanceof Error?_.message:"Failed to create agent"),_}},y=async(w,j)=>{try{s(null);const{data:k,error:_}=await ne.from("roles").select("id").eq("name",j).single();if(_)throw _;const{error:S}=await ne.from("user_roles").delete().eq("user_id",w);if(S)throw S;const{error:E}=await ne.from("user_roles").insert([{user_id:w,role_id:k.id}]);if(E)throw E;await v({force:!0});try{await Wt({action:"user.update_role",resource:"user",resourceId:w,context:{role:j}})}catch{}}catch(k){throw console.error("Error updating agent role:",k),s(k instanceof Error?k.message:"Failed to update agent role"),k}},b=async w=>{try{s(null);const{data:j,error:k}=await ne.from("v_human_agents").select("role_name").eq("user_id",w).maybeSingle();if(k)throw k;if(j!=null&&j.role_name&&String(j.role_name).toLowerCase().includes("master"))throw new Error("Master agent tidak dapat dihapus.");const{error:_}=await ne.functions.invoke("admin-delete-user",{body:{user_id:w}});if(_)throw _;await v({force:!0});try{await Wt({action:"user.delete",resource:"user",resourceId:w})}catch{}}catch(j){throw console.error("Error deleting agent:",j),s(j instanceof Error?j.message:"Failed to delete agent"),j}};return p.useEffect(()=>{c()&&r(!1),v()},[]),{agents:e,teams:[],loading:n,error:a,fetchAgents:v,fetchTeams:()=>Promise.resolve(),createAgent:x,updateAgentStatus:()=>Promise.resolve(),updateAgentRole:y,deleteAgent:b,createTeam:()=>Promise.resolve(),addAgentToTeam:()=>Promise.resolve(),removeAgentFromTeam:()=>Promise.resolve(),setEnable2FAFlagForCreate:l}},Poe=({onFilterChange:e})=>{var b,w;const[t,n]=p.useState(!1),[r,a]=p.useState(),[s,o]=p.useState(),[l,c]=p.useState(!1),[u,f]=p.useState(!1),[d,h]=p.useState({dateRange:{},inbox:"",label:[],agent:"",status:"",resolvedBy:"",aiAgent:"",pipelineStatus:"",channelType:"all"}),{aiAgents:m}=Sp(),{agents:g}=El(),v=(j,k)=>{const _={...d,[j]:k};h(_)},x=()=>{const j={...d,dateRange:{from:r,to:s}};e(j),n(!1)},y=()=>{const j={dateRange:{},inbox:"",label:[],agent:"",status:"",resolvedBy:"",aiAgent:"",pipelineStatus:""};h(j),a(void 0),o(void 0),e(j)};return i.jsxs(mn,{open:t,onOpenChange:n,children:[i.jsx(BN,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(zL,{className:"h-4 w-4"})})}),i.jsxs(cn,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[i.jsx(un,{children:i.jsx(dn,{children:"Filter"})}),i.jsxs("div",{className:"grid gap-6 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date Range"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ls,{children:[i.jsx(cs,{asChild:!0,children:i.jsxs(Z,{variant:"outline",className:xe("w-full justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[i.jsx(Gh,{className:"mr-2 h-4 w-4"}),r?oo(r,"dd-MM-yyyy"):"DD-MM-YYYY"]})}),i.jsx(Di,{className:"w-auto p-0",align:"start",children:i.jsx(i_,{mode:"single",selected:r,onSelect:a,initialFocus:!0,className:"pointer-events-auto"})})]}),i.jsx("span",{className:"self-center text-muted-foreground",children:"-"}),i.jsxs(ls,{children:[i.jsx(cs,{asChild:!0,children:i.jsxs(Z,{variant:"outline",className:xe("w-full justify-start text-left font-normal",!s&&"text-muted-foreground"),children:[i.jsx(Gh,{className:"mr-2 h-4 w-4"}),s?oo(s,"dd-MM-yyyy"):"DD-MM-YYYY"]})}),i.jsx(Di,{className:"w-auto p-0",align:"start",children:i.jsx(i_,{mode:"single",selected:s,onSelect:o,initialFocus:!0,className:"pointer-events-auto"})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Inbox"}),i.jsxs(Ut,{value:d.inbox,onValueChange:j=>v("inbox",j),children:[i.jsx(Dt,{children:i.jsx(Rt,{placeholder:"All Inbox"})}),i.jsxs($t,{children:[i.jsx(De,{value:"all",children:"All Inbox"}),i.jsx(De,{value:"whatsapp",children:"WhatsApp"}),i.jsx(De,{value:"telegram",children:"Telegram"}),i.jsx(De,{value:"email",children:"Email"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Label"}),i.jsxs(Ut,{value:d.label.join(","),onValueChange:j=>v("label",j.split(",").filter(Boolean)),children:[i.jsx(Dt,{children:i.jsx(Rt,{placeholder:"Choose Labels"})}),i.jsxs($t,{children:[i.jsx(De,{value:"urgent",children:"Urgent"}),i.jsx(De,{value:"important",children:"Important"}),i.jsx(De,{value:"follow-up",children:"Follow Up"}),i.jsx(De,{value:"resolved",children:"Resolved"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Resolved By"}),i.jsxs(ls,{open:u,onOpenChange:f,children:[i.jsx(cs,{asChild:!0,children:i.jsx(Z,{variant:"outline",role:"combobox",className:"w-full justify-between",children:((b=g.find(j=>j.user_id===d.resolvedBy))==null?void 0:b.display_name)||"Choose Agent"})}),i.jsx(Di,{className:"w-[320px] p-0",children:i.jsxs(Oc,{children:[i.jsx(Ic,{placeholder:"Search Resolved By Agent"}),i.jsx(Rc,{children:"No agent found."}),i.jsx(Mc,{children:g.map(j=>i.jsx(Dc,{onSelect:()=>{v("resolvedBy",j.user_id),f(!1)},children:i.jsx("span",{className:"ml-2",children:j.display_name||"Unknown"})},j.user_id))})]})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Agent"}),i.jsxs(ls,{open:l,onOpenChange:c,children:[i.jsx(cs,{asChild:!0,children:i.jsx(Z,{variant:"outline",role:"combobox",className:"w-full justify-between",children:((w=g.find(j=>j.user_id===d.agent))==null?void 0:w.display_name)||"Choose Agent"})}),i.jsx(Di,{className:"w-[320px] p-0",children:i.jsxs(Oc,{children:[i.jsx(Ic,{placeholder:"Search Handled By Agent"}),i.jsx(Rc,{children:"No agent found."}),i.jsx(Mc,{children:g.map(j=>i.jsx(Dc,{onSelect:()=>{v("agent",j.user_id),c(!1)},children:i.jsx("span",{className:"ml-2",children:j.display_name||"Unknown"})},j.user_id))})]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"AI Agent"}),i.jsxs(Ut,{value:d.aiAgent,onValueChange:j=>v("aiAgent",j),children:[i.jsx(Dt,{children:i.jsx(Rt,{placeholder:"Choose AI Agent"})}),i.jsxs($t,{children:[i.jsx(De,{value:"all",children:"All AI Agents"}),m.map(j=>i.jsx(De,{value:j.id,children:j.name},j.id))]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Channel Type"}),i.jsxs(Ut,{value:d.channelType,onValueChange:j=>v("channelType",j),children:[i.jsx(Dt,{children:i.jsx(Rt,{placeholder:"All Channels"})}),i.jsxs($t,{children:[i.jsx(De,{value:"all",children:"All Channels"}),i.jsx(De,{value:"whatsapp",children:"WhatsApp"}),i.jsx(De,{value:"telegram",children:"Telegram"}),i.jsx(De,{value:"web",children:"Live Chat"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),i.jsxs(Ut,{value:d.status,onValueChange:j=>v("status",j),children:[i.jsx(Dt,{children:i.jsx(Rt,{placeholder:"All Statuses"})}),i.jsxs($t,{children:[i.jsx(De,{value:"all",children:"All Statuses"}),i.jsx(De,{value:"open",children:"Open"}),i.jsx(De,{value:"pending",children:"Pending"}),i.jsx(De,{value:"closed",children:"Closed"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Pipeline Status"}),i.jsxs(Ut,{value:d.pipelineStatus,onValueChange:j=>v("pipelineStatus",j),children:[i.jsx(Dt,{children:i.jsx(Rt,{placeholder:"All Statuses"})}),i.jsxs($t,{children:[i.jsx(De,{value:"all",children:"All Statuses"}),i.jsx(De,{value:"new",children:"New"}),i.jsx(De,{value:"qualified",children:"Qualified"}),i.jsx(De,{value:"proposal",children:"Proposal"}),i.jsx(De,{value:"negotiation",children:"Negotiation"}),i.jsx(De,{value:"closed-won",children:"Closed Won"}),i.jsx(De,{value:"closed-lost",children:"Closed Lost"})]})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(Z,{variant:"outline",onClick:y,children:"Reset"}),i.jsx(Z,{onClick:x,children:"Apply"})]})]})]})},pb="https://bkynymyhbfrhvwxqqttk.supabase.co",Toe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",Ps=wF(pb,Toe,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Ooe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co"},ed=Ooe??{},Uf=((ed==null?void 0:ed.VITE_WEBHOOK_BASE_URL)||"https://primary-production-376c.up.railway.app/webhook").replace(/\/$/,""),Ioe=(ed==null?void 0:ed.VITE_WEBHOOK_PROXY_SLUG)||"proxy-n8n",Lw=`${pb}/functions/v1/${Ioe}`.replace(/\/$/,""),Xr="route:",LT=e=>e.startsWith("/")?e:`/${e}`,ch=e=>e.startsWith(Xr),jg=e=>ch(e)?e.slice(Xr.length):null,Yn={BASE_URL:Uf,LEGACY_BASE_URL:Uf,PROXY_BASE_URL:Lw,ROUTE_PREFIX:Xr,ENDPOINTS:{WHATSAPP:{GET_LOGIN_QR:`${Xr}session.get_login_qr`,GET_SESSIONS:"/get_sessions",LOGOUT_SESSION:`${Xr}session.logout`,CREATE_PLATFORM:"/whatsapp/create-platform",CREATE_SESSION:`${Xr}session.create`,DISCONNECT_SESSION:"/disconnect_session",DELETE_SESSION:`${Xr}session.delete`},TELEGRAM:{CREATE_PLATFORM:`${Xr}telegram.create_platform`,SEND_MESSAGE:`${Xr}telegram.send_message`,DELETE_WEBHOOK:`${Xr}telegram.delete_webhook`,VERIFY_TOKEN:`${pb}/functions/v1/telegram-verify-token`},AI_AGENT:{CHAT_SETTINGS:`${Xr}chat.settings`,CHAT_TEST:`${Xr}chat.test`},KNOWLEDGE:{FILE_UPLOAD:"/knowledge/file-upload-dev",FILE_DELETE:"/knowledge/file-delete-dev"},MESSAGE:{DEFAULT:"/send-message",SEND_MESSAGE:"/send-message",WHATSAPP_SEND_MESSAGE:`${Xr}whatsapp.send_message`,TELEGRAM_SEND_MESSAGE:`${Xr}telegram.send_message`,WEB_SEND_MESSAGE:`${Xr}web.send_message`}},buildUrl:(e,t={})=>{if(!e)throw new Error("Endpoint must be provided");if(e.startsWith("http"))return e;if(!t.forceLegacy&&ch(e)){const n=jg(e);if(!n)throw new Error("Invalid proxy route key");return`${Lw}/${n}`}if(t.forceLegacy&&ch(e)){const n=jg(e);if(!n)throw new Error("Invalid proxy route key");return`${Uf}/${n}`}return`${Uf}${LT(e)}`},buildTestUrl:e=>{if(ch(e)){const n=jg(e);if(!n)throw new Error("Invalid proxy route key");return`${Lw}/${n}`}return`${Uf.replace("/webhook","/webhook-test")}${LT(e)}`},isProxyEndpoint:ch,extractRouteKey:jg},pU={telegram:Yn.ENDPOINTS.MESSAGE.TELEGRAM_SEND_MESSAGE,whatsapp:Yn.ENDPOINTS.MESSAGE.WHATSAPP_SEND_MESSAGE,web:Yn.ENDPOINTS.MESSAGE.WEB_SEND_MESSAGE},gU=e=>{const t=(e||"").toLowerCase();return t==="wa"||t==="waha"||t==="whatsapp_cloud"?"whatsapp":t==="tg"||t==="tele"?"telegram":t},Fw=e=>{const t=gU(e),n=pU[t]||Yn.ENDPOINTS.MESSAGE.DEFAULT;Yn.ENDPOINTS.MESSAGE.SEND_MESSAGE=n},Roe=e=>{const t=gU(e);return pU[t]||Yn.ENDPOINTS.MESSAGE.DEFAULT},Moe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co"},Doe=()=>{const e=Moe??{};return(e==null?void 0:e.VITE_SUPABASE_ANON_KEY)??null};async function wa(e,t={},n={}){const{forceLegacy:r=!1,skipAuth:a=!1}=n,s=Yn.buildUrl(e,{forceLegacy:r}),o=new Headers(t.headers),l=s.startsWith(pb)&&s.includes("/functions/v1/");if((!r&&Yn.isProxyEndpoint(e)||l)&&!a&&!o.has("Authorization")){const{data:{session:u}}=await ne.auth.getSession(),f=u==null?void 0:u.access_token;if(!f)throw new Error("Unable to call webhook without an active Supabase session");o.set("Authorization",`Bearer ${f}`);const d=Doe();d&&!o.has("apikey")&&o.set("apikey",d)}return fetch(s,{...t,headers:o})}let FT=0;const $oe=1e3,_g=(e="incoming")=>{try{if(!(localStorage.getItem("audioNotifications")!=="false")||document.visibilityState!=="visible")return;const n=Date.now();if(n-FT<$oe)return;FT=n;const r=new Audio;e==="incoming"?r.src="/tones/mixkit-message-pop-alert-2354.mp3":r.src="/tones/mixkit-long-pop-2358.wav",r.volume=.7,r.play().catch(()=>{})}catch{}},Loe=()=>{const[e,t]=p.useState([]),[n,r]=p.useState([]),[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState(null),[f,d]=p.useState(!1),h=p.useRef({}),[m,g]=p.useState({}),v=p.useRef(null),x=($=400)=>{try{v.current&&(clearTimeout(v.current),v.current=null)}catch{}v.current=window.setTimeout(()=>{document.visibilityState==="visible"&&(a||w())},$)},y=($,O)=>{t(T=>{const C=T.map(F=>F.id===$?{...F,last_message_preview:((O==null?void 0:O.body)||"").toString().replace(/\s+/g," ").trim()||"",last_message_direction:(O==null?void 0:O.direction)??null,last_message_role:(O==null?void 0:O.role)??null,last_msg_at:(O==null?void 0:O.created_at)||F.last_msg_at,unreplied:(O==null?void 0:O.direction)==="in"||(O==null?void 0:O.role)==="user"}:F).sort((F,M)=>{const A=new Date(F.last_msg_at??F.created_at??0).getTime();return new Date(M.last_msg_at??M.created_at??0).getTime()-A});return console.log("Re-sorted conversations after message update"),C})},b=()=>{try{const $=localStorage.getItem("app.cachedConversations");if(!$)return!1;const O=JSON.parse($);if(Array.isArray(O)&&O.length>=0)return t(O),d(!0),s(!1),!0}catch{}return!1},w=async $=>{try{f||s(!0),l(null),await fm();const O=$??h.current;$&&(h.current=$,g($));let T=Nt.from("threads").select(`
          *,
          contacts(name, phone, email),
          channels(display_name, type, provider, external_id, logo_url, profile_photo_url),
          messages(id, body, role, direction, created_at, seq)
        `).order("last_msg_at",{ascending:!1}).order("created_at",{foreignTable:"messages",ascending:!1}).limit(1,{foreignTable:"messages"});const{dateRange:R,status:C,agent:F,resolvedBy:M,inbox:A,channelType:W,pipelineStatus:G}=O;C&&C!=="all"&&C!==""&&(T=T.eq("status",C)),F&&F!=="all"&&F!==""&&(T=T.eq("assignee_user_id",F)),M&&M!=="all"&&M!==""&&(T=T.eq("resolved_by_user_id",M)),A&&A!=="all"&&A!==""&&(T=T.eq("channels.provider",A)),W&&W!=="all"&&W!==""&&(T=T.eq("channels.type",W)),G&&G!=="all"&&G!==""&&(T=T.eq("pipeline_status",G));const Y=new Promise((z,q)=>{const ae=setTimeout(()=>{clearTimeout(ae),q(new Error("timeout"))},8e3)}),{data:H,error:Q}=await Promise.race([T,Y]);if(Q)throw Q;const X=Array.from(new Set((H||[]).flatMap(z=>[z.assigned_by_user_id,z.assignee_user_id,z.resolved_by_user_id]).filter(Boolean)));let re={};if(X.length>0){const{data:z,error:q}=await Nt.from("users_profile").select("user_id, display_name").in("user_id",X);if(q)throw q;re=Object.fromEntries((z||[]).map(ae=>[ae.user_id,ae.display_name||""]))}let J=(H||[]).map(z=>{var Le,ge,We,dt,bt,Et,te,me,Fe,He,Ue,he,Ot,vt;const q=Array.isArray(z.messages)&&z.messages.length>0?z.messages[0]:null,ae=((q==null?void 0:q.body)||"").toString().replace(/\s+/g," ").trim(),se=(q==null?void 0:q.direction)??null,be=(q==null?void 0:q.role)??null,Se=se==="in"||be==="user";return{...z,contact_name:((Le=z.contacts)==null?void 0:Le.name)||"Unknown Contact",contact_phone:((ge=z.contacts)==null?void 0:ge.phone)||"",contact_email:((We=z.contacts)==null?void 0:We.email)||"",channel_name:((dt=z.channels)==null?void 0:dt.display_name)||"Unknown Channel",channel_type:((bt=z.channels)==null?void 0:bt.type)||"web",channel_provider:((Et=z.channels)==null?void 0:Et.provider)||void 0,channel:{provider:(te=z.channels)==null?void 0:te.provider,type:(me=z.channels)==null?void 0:me.type,display_name:(Fe=z.channels)==null?void 0:Fe.display_name,external_id:(He=z.channels)==null?void 0:He.external_id,logo_url:((Ue=z.channels)==null?void 0:Ue.logo_url)||null,profile_photo_url:((he=z.channels)==null?void 0:he.profile_photo_url)||null},channel_logo_url:((Ot=z.channels)==null?void 0:Ot.logo_url)||((vt=z.channels)==null?void 0:vt.profile_photo_url)||null,last_message_preview:ae||"",last_message_direction:se,last_message_role:be,last_msg_at:(q==null?void 0:q.created_at)||z.last_msg_at,message_count:0,assigned:!!z.assignee_user_id,assigned_by_name:z.assigned_by_user_id&&re[z.assigned_by_user_id]||"",assignee_name:z.assignee_user_id&&re[z.assignee_user_id]||"",resolved_by_name:z.resolved_by_user_id&&re[z.resolved_by_user_id]||"",unreplied:Se}});if(R!=null&&R.from){const z=Ac(R.from).getTime();J=J.filter(q=>new Date(q.last_msg_at).getTime()>=z)}if(R!=null&&R.to){const z=$re(R.to).getTime();J=J.filter(q=>new Date(q.last_msg_at).getTime()<=z)}const ye=J.sort((z,q)=>{const ae=new Date(z.last_msg_at??z.created_at??0).getTime();return new Date(q.last_msg_at??q.created_at??0).getTime()-ae});t(ye);try{localStorage.setItem("app.cachedConversations",JSON.stringify(ye))}catch{}}catch(O){console.error("Error fetching conversations:",O),l(O instanceof Error?O.message:"Failed to fetch conversations")}finally{s(!1)}},j=async $=>{var O;try{l(null);const{data:T,error:R}=await ne.from("messages").select(`
          id,
          thread_id,
          direction,
          role,
          type,
          body,
          payload,
          actor_kind,
          actor_id,
          seq,
          in_reply_to,
          edited_at,
          edit_reason,
          created_at
        `).eq("thread_id",$).order("seq",{ascending:!0});if(R)throw R;const{data:C}=await ne.from("threads").select(`
          contacts(name, phone, email)
        `).eq("id",$).maybeSingle(),F=((O=C==null?void 0:C.contacts)==null?void 0:O.name)||"Unknown Contact",M=(T||[]).map(A=>{var W;return{...A,contact_name:F,contact_avatar:((W=F[0])==null?void 0:W.toUpperCase())||"U"}});r(M),u($)}catch(T){console.error("Error fetching messages:",T),l(T instanceof Error?T.message:"Failed to fetch messages")}},k=async($,O,T="assistant")=>{var R,C;try{l(null);const{data:F,error:M}=await ne.from("threads").select("channel_id, contact_id, channels(provider)").eq("id",$).single();if(M)throw M;const A={thread_id:$,direction:"out",role:T,type:"text",body:O,payload:{},actor_kind:"agent",actor_id:null},G={id:`tmp_${Math.random().toString(36).slice(2)}`,thread_id:$,direction:"out",role:T,type:"text",body:O,payload:{},actor_kind:"agent",actor_id:null,seq:0,in_reply_to:null,edited_at:null,edit_reason:null,created_at:new Date().toISOString(),contact_name:"",contact_avatar:"A",_status:"pending"};r(re=>[...re,G]);const{data:Y,error:H}=await ne.from("messages").insert([A]).select().single();if(H)throw H;const{data:Q,error:X}=await ne.from("contacts").select("phone, external_id").eq("id",F.contact_id).single();X&&console.warn("Error fetching contact details:",X);try{const re=e.find(q=>q.id===$),fe=((R=re==null?void 0:re.channel)==null?void 0:R.provider)||((C=F==null?void 0:F.channels)==null?void 0:C.provider),J=Roe(fe),ye={channel_id:F.channel_id,contact_id:F.contact_id,contact_phone:(Q==null?void 0:Q.phone)||null,external_id:(Q==null?void 0:Q.external_id)||null,text:O,type:"text",direction:"out",role:T},z=await wa(J,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ye)});z.ok||console.warn("Webhook call failed:",z.status,z.statusText)}catch(re){console.error("Error calling webhook:",re)}await j($),y($,{body:O,direction:"out",role:T,created_at:new Date().toISOString()});try{await Wt({action:"message.send",resource:"message",resourceId:(Y==null?void 0:Y.id)??null,context:{thread_id:$,role:T}})}catch{}return Y}catch(F){throw console.error("Error sending message:",F),l(F instanceof Error?F.message:"Failed to send message"),r(M=>{const A=[...M];for(let W=A.length-1;W>=0;W--)if(A[W]._status==="pending"){A[W]._status="error";break}return A}),F}},_=async($,O)=>{var T;try{l(null);const R={org_id:((T=(await ne.auth.getUser()).data.user)==null?void 0:T.id)||"00000000-0000-0000-0000-000000000001",contact_id:$,channel_id:O,status:"open",assignee_user_id:null},{data:C,error:F}=await ne.from("threads").insert([R]).select().single();if(F)throw F;await w();try{await Wt({action:"thread.create",resource:"thread",resourceId:(C==null?void 0:C.id)??null,context:{contact_id:$,channel_id:O}})}catch{}return C}catch(R){throw console.error("Error creating conversation:",R),l(R instanceof Error?R.message:"Failed to create conversation"),R}},S=async($,O)=>{try{l(null);const{error:T}=await ne.from("threads").update({status:O}).eq("id",$);if(T)throw T;await w();try{await Wt({action:"thread.update_status",resource:"thread",resourceId:$,context:{status:O}})}catch{}}catch(T){throw console.error("Error updating thread status:",T),l(T instanceof Error?T.message:"Failed to update thread status"),T}},E=async($,O)=>{var T,R,C;try{l(null);const{error:F}=await ne.rpc("takeover_thread",{p_thread_id:$});F&&console.warn("takeover_thread RPC failed; will attempt direct update",F);const{data:M}=await ne.auth.getUser(),A=((T=M==null?void 0:M.user)==null?void 0:T.id)||null;try{const{data:W}=await ne.from("threads").select("assignee_user_id").eq("id",$).single();if(!!!(W!=null&&W.assignee_user_id)&&A){const{error:Y}=await ne.from("threads").update({assignee_user_id:A,assigned_by_user_id:A,assigned_at:new Date().toISOString(),handover_reason:"other:manual_takeover",ai_access_enabled:!1}).eq("id",$);Y&&console.warn("Fallback assignment update failed",Y)}}catch(W){console.warn("Failed verifying assignment state",W)}try{await Nt.from("threads").update({ai_access_enabled:!1}).eq("id",$)}catch{}try{const{data:W}=await ne.auth.getUser(),G=((R=W==null?void 0:W.user)==null?void 0:R.id)||null;let Y=null;if(G){const{data:H}=await ne.from("users_profile").select("display_name").eq("user_id",G).single();Y=(H==null?void 0:H.display_name)||null}await Nt.from("messages").insert([{thread_id:$,direction:null,role:"system",type:"event",body:`Conversation taken over by ${Y||((C=W==null?void 0:W.user)==null?void 0:C.email)||"agent"}.`,payload:{event:"takeover",user_id:G}}])}catch(W){console.warn("Failed to insert takeover event message",W)}await w(),await j($);try{await Wt({action:"thread.assign",resource:"thread",resourceId:$,context:{assignee_user_id:O}})}catch{}}catch(F){throw console.error("Error assigning thread:",F),l(F instanceof Error?F.message:"Failed to assign thread"),F}},N=async($,O)=>{var T,R;try{l(null);const{data:C}=await ne.auth.getUser(),F=((T=C==null?void 0:C.user)==null?void 0:T.id)||null,M=new Date().toISOString(),{error:A}=await ne.from("threads").update({assignee_user_id:O,assigned_by_user_id:F,assigned_at:M,handover_reason:"other:manual_assign",ai_access_enabled:!1}).eq("id",$);if(A)throw A;try{const W=[F,O].filter(Boolean);let G={};if(W.length>0){const{data:Q}=await ne.from("users_profile").select("user_id, display_name").in("user_id",W);G=Object.fromEntries((Q||[]).map(X=>[String(X.user_id),String(X.display_name||"")]))}const Y=F&&(G[F]||((R=C==null?void 0:C.user)==null?void 0:R.email))||"agent",H=G[O]||"agent";await Nt.from("messages").insert([{thread_id:$,direction:null,role:"system",type:"event",body:`Conversation assigned to ${H} by ${Y}.`,payload:{event:"assign",assigned_to:O,assigned_by:F}}])}catch(W){console.warn("Failed to insert assign event message",W)}await w(),await j($);try{await Wt({action:"thread.assign",resource:"thread",resourceId:$,context:{assignee_user_id:O}})}catch{}}catch(C){throw console.error("Error assigning thread to user:",C),l(C instanceof Error?C.message:"Failed to assign thread"),C}},I=async($,O)=>{try{l(null);const{error:T}=await ne.from("thread_collaborators").insert([{thread_id:$,user_id:O}]);if(T)throw T;try{await Wt({action:"thread.add_participant",resource:"thread",resourceId:$,context:{user_id:O}})}catch{}}catch(T){throw console.error("Error adding thread participant:",T),l(T instanceof Error?T.message:"Failed to add thread participant"),T}},P=async($,O)=>{try{l(null);const{error:T}=await ne.from("thread_collaborators").delete().eq("thread_id",$).eq("user_id",O);if(T)throw T;try{await Wt({action:"thread.remove_participant",resource:"thread",resourceId:$,context:{user_id:O}})}catch{}}catch(T){throw console.error("Error removing thread participant:",T),l(T instanceof Error?T.message:"Failed to remove thread participant"),T}},D=async($,O)=>{try{l(null);const{error:T}=await ne.from("thread_labels").insert([{thread_id:$,label_id:O}]);if(T)throw T;try{await Wt({action:"thread.add_label",resource:"thread",resourceId:$,context:{label_id:O}})}catch{}}catch(T){throw console.error("Error adding thread label:",T),l(T instanceof Error?T.message:"Failed to add thread label"),T}},L=async($,O)=>{try{l(null);const{error:T}=await ne.from("thread_labels").delete().eq("thread_id",$).eq("label_id",O);if(T)throw T;try{await Wt({action:"thread.remove_label",resource:"thread",resourceId:$,context:{label_id:O}})}catch{}}catch(T){throw console.error("Error removing thread label:",T),l(T instanceof Error?T.message:"Failed to remove thread label"),T}},B=async $=>{try{l(null);const{error:O}=await ne.from("threads").delete().eq("id",$);if(O)throw O;li.invalidatePattern("^query:threads"),t(T=>{const R=T.filter(C=>C.id!==$);try{localStorage.setItem("app.cachedConversations",JSON.stringify(R))}catch{}return R}),c===$&&(u(null),r([]));try{await Wt({action:"thread.delete",resource:"thread",resourceId:$})}catch{}await w()}catch(O){throw console.error("Error deleting thread:",O),l(O instanceof Error?O.message:"Failed to delete conversation"),O}};p.useEffect(()=>{b(),x(10)},[]);const U=async()=>{try{const{data:$,error:O}=await Nt.rpc("check_and_auto_resolve_threads");if(O){console.error("Auto-resolve check failed:",O);return}$&&$.length>0&&w()}catch($){console.error("Auto-resolve check error:",$)}};return p.useEffect(()=>{const $=setInterval(()=>{document.visibilityState==="visible"&&U()},3e4);return()=>clearInterval($)},[]),p.useEffect(()=>{const $=ne.channel("threads-realtime").on("postgres_changes",{event:"*",schema:"public",table:"threads"},()=>{document.visibilityState==="visible"&&x(200)}).subscribe();return()=>{try{ne.removeChannel($)}catch{}}},[]),p.useEffect(()=>{const $=ne.channel("messages-realtime-for-convlist").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},O=>{const T=O.new;T&&T.direction==="in"&&document.visibilityState==="visible"?(_g("incoming"),y(T.thread_id,T),x(100),U()):T&&(T.role==="system"||T.type==="event")&&document.visibilityState==="visible"?(_g("incoming"),y(T.thread_id,T),x(200)):T&&T.direction==="out"&&(T.role==="agent"||T.role==="assistant")&&document.visibilityState==="visible"?(y(T.thread_id,T),x(200)):T&&T.role==="agent"&&T.direction==="out"&&document.visibilityState==="visible"&&U()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},()=>{document.visibilityState==="visible"&&x(500)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages"},()=>{document.visibilityState==="visible"&&x(300)}).subscribe();return()=>{try{ne.removeChannel($)}catch{}try{v.current&&(clearTimeout(v.current),v.current=null)}catch{}}},[]),p.useEffect(()=>{if(!c)return;const $=setInterval(()=>{j(c)},3e4),O=ne.channel(`messages-${c}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},T=>{const R=T.new;R&&R.direction==="in"&&_g("incoming"),j(c)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},()=>{j(c)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},()=>{j(c)}).subscribe(T=>{T==="CHANNEL_ERROR"&&(console.error("Error subscribing to messages for thread:",c),setTimeout(()=>{j(c)},1e3))});return()=>{clearInterval($);try{ne.removeChannel(O)}catch{}}},[c]),{conversations:e,messages:n,loading:a,error:o,selectedThreadId:c,fetchConversations:w,fetchMessages:j,sendMessage:k,refreshMessages:()=>{c&&j(c)},enableAudioNotifications:()=>{localStorage.setItem("audioNotifications","true")},disableAudioNotifications:()=>{localStorage.setItem("audioNotifications","false")},testAudioNotification:()=>{_g("incoming")},createConversation:_,updateThreadStatus:S,assignThread:E,assignThreadToUser:N,addThreadParticipant:I,removeThreadParticipant:P,addThreadLabel:D,removeThreadLabel:L,deleteThread:B,checkAutoResolve:U,activeFilters:m}},oC=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),[o,l]=p.useState(0),c=async(m=1,g=100,v,x)=>{var y,b,w,j;try{r(!0),s(null);const k=!!(x!=null&&x.chatStatus||(y=x==null?void 0:x.dateRange)!=null&&y.from||(b=x==null?void 0:x.dateRange)!=null&&b.to||(x==null?void 0:x.handledBy)==="assigned");let _=Nt.from("contacts").select(`
          id, org_id, name, email, phone, locale, notes, created_at,
          threads${k?"!inner":""}(
            id, status, created_at, assignee_user_id,
            channels(display_name, provider, type)
          )
          `,{count:"exact"}).order("created_at",{ascending:!1});if(v&&(_=_.or(`name.ilike.%${v}%,phone.ilike.%${v}%,email.ilike.%${v}%`)),x&&(x.chatStatus&&(_=_.eq("threads.status",x.chatStatus)),x.handledBy==="assigned"&&(_=_.not("threads.assignee_user_id","is",null)),(w=x.dateRange)!=null&&w.from&&(_=_.gte("threads.created_at",x.dateRange.from)),(j=x.dateRange)!=null&&j.to)){const L=x.dateRange.to.length>10?x.dateRange.to:`${x.dateRange.to}T23:59:59.999Z`;_=_.lte("threads.created_at",L)}const S=(m-1)*g,E=S+g-1;_=_.range(S,E),_=_.order("created_at",{foreignTable:"threads",ascending:!1}).limit(1,{foreignTable:"threads"});const{data:N,error:I,count:P}=await _;if(I)throw I;let D=(N||[]).map(L=>{var O,T,R;const B=(L.threads||[])[0]||null,U=((O=B==null?void 0:B.channels)==null?void 0:O.display_name)||"",$=B!=null&&B.created_at?new Date(B.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(",",""):"";return{id:L.id,org_id:L.org_id,name:L.name,email:L.email,phone:L.phone,locale:L.locale,notes:L.notes,created_at:L.created_at,labelNames:"",inbox:U,channelProvider:((T=B==null?void 0:B.channels)==null?void 0:T.provider)||null,channelType:((R=B==null?void 0:B.channels)==null?void 0:R.type)||null,chatStatus:(B==null?void 0:B.status)||"",chatCreatedAt:$,chatCreatedAtISO:(B==null?void 0:B.created_at)||null,handledBy:B!=null&&B.assignee_user_id?"assigned":"unassigned"}});x&&(D=D.filter(L=>{var B,U;if(x.chatStatus&&L.chatStatus!==x.chatStatus||x.handledBy&&L.handledBy!==x.handledBy)return!1;if((B=x.dateRange)!=null&&B.from||(U=x.dateRange)!=null&&U.to){const $=new Date(L.created_at),O=x.dateRange.from?new Date(x.dateRange.from):null,T=x.dateRange.to?new Date(x.dateRange.to):null;if(O&&$<O||T&&$>T)return!1}return!0})),t(D),l(P||0)}catch(k){console.error("Error fetching contacts:",k),s(k instanceof Error?k.message:"Failed to fetch contacts")}finally{r(!1)}},u=async m=>{try{s(null);const{data:g,error:v}=await Nt.from("contacts").insert([{...m,org_id:"00000000-0000-0000-0000-000000000001"}]).select().single();if(v)throw v;await c();try{await Wt({action:"contact.create",resource:"contact",resourceId:(g==null?void 0:g.id)??null,context:m})}catch{}return g}catch(g){throw console.error("Error creating contact:",g),s(g instanceof Error?g.message:"Failed to create contact"),g}},f=async(m,g)=>{try{s(null);const{error:v}=await Nt.from("contacts").update(g).eq("id",m);if(v)throw v;await c();try{await Wt({action:"contact.update",resource:"contact",resourceId:m,context:g})}catch{}}catch(v){throw console.error("Error updating contact:",v),s(v instanceof Error?v.message:"Failed to update contact"),v}},d=async m=>{try{s(null);const{error:g}=await ne.from("contacts").delete().eq("id",m);if(g)throw g;li.invalidatePattern("^query:contacts"),await c();try{await Wt({action:"contact.delete",resource:"contact",resourceId:m})}catch{}}catch(g){throw console.error("Error deleting contact:",g),s(g instanceof Error?g.message:"Failed to delete contact"),g}},h=async m=>{try{s(null);const{error:g}=await ne.from("contacts").delete().in("id",m);if(g)throw g;li.invalidatePattern("^query:contacts"),await c();try{await Wt({action:"contact.bulk_delete",resource:"contact",context:{ids:m}})}catch{}}catch(g){throw console.error("Error deleting contacts:",g),s(g instanceof Error?g.message:"Failed to delete contacts"),g}};return p.useEffect(()=>{c()},[]),{contacts:e,loading:n,error:a,totalCount:o,fetchContacts:c,createContact:u,updateContact:f,deleteContact:d,deleteMultipleContacts:h}},nr={MASTER_AGENT:"master_agent",SUPER_AGENT:"super_agent",AGENT:"agent"},Kt=p.forwardRef(({permission:e,permissions:t=[],requireAll:n=!1,fallback:r=null,children:a},s)=>{const{hasAnyPermission:o,hasAllPermissions:l,loading:c}=jr();if(c)return null;const u=e?[e,...t]:t,f=n?l(u):o(u),d=!Array.isArray(a)&&typeof a!="string"&&typeof a!="number";return f?d?i.jsx(HS,{ref:s,children:a}):i.jsx(i.Fragment,{children:a}):i.jsx(i.Fragment,{children:r})});var vU="AlertDialog",[Foe,m3e]=_r(vU,[p5]),ho=p5(),xU=e=>{const{__scopeAlertDialog:t,...n}=e,r=ho(t);return i.jsx(MN,{...r,...n,modal:!0})};xU.displayName=vU;var Boe="AlertDialogTrigger",yU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ho(n);return i.jsx(T5,{...a,...r,ref:t})});yU.displayName=Boe;var Uoe="AlertDialogPortal",bU=e=>{const{__scopeAlertDialog:t,...n}=e,r=ho(t);return i.jsx(DN,{...r,...n})};bU.displayName=Uoe;var zoe="AlertDialogOverlay",wU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ho(n);return i.jsx(rb,{...a,...r,ref:t})});wU.displayName=zoe;var td="AlertDialogContent",[qoe,Woe]=Foe(td),Hoe=cL("AlertDialogContent"),jU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,s=ho(n),o=p.useRef(null),l=St(t,o),c=p.useRef(null);return i.jsx(ure,{contentName:td,titleName:_U,docsSlug:"alert-dialog",children:i.jsx(qoe,{scope:n,cancelRef:c,children:i.jsxs(ab,{role:"alertdialog",...s,...a,ref:l,onOpenAutoFocus:Ee(a.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(Hoe,{children:r}),i.jsx(Koe,{contentRef:o})]})})})});jU.displayName=td;var _U="AlertDialogTitle",kU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ho(n);return i.jsx($N,{...a,...r,ref:t})});kU.displayName=_U;var SU="AlertDialogDescription",NU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ho(n);return i.jsx(LN,{...a,...r,ref:t})});NU.displayName=SU;var Voe="AlertDialogAction",CU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ho(n);return i.jsx(FN,{...a,...r,ref:t})});CU.displayName=Voe;var AU="AlertDialogCancel",EU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=Woe(AU,n),s=ho(n),o=St(t,a);return i.jsx(FN,{...s,...r,ref:o})});EU.displayName=AU;var Koe=({contentRef:e})=>{const t=`\`${td}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${td}\` by passing a \`${SU}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${td}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Goe=xU,Yoe=yU,Xoe=bU,PU=wU,TU=jU,OU=CU,IU=EU,RU=kU,MU=NU;const gb=Goe,Joe=Yoe,Qoe=Xoe,DU=p.forwardRef(({className:e,...t},n)=>i.jsx(PU,{className:xe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));DU.displayName=PU.displayName;const Np=p.forwardRef(({className:e,...t},n)=>i.jsxs(Qoe,{children:[i.jsx(DU,{}),i.jsx(TU,{ref:n,className:xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Np.displayName=TU.displayName;const Cp=({className:e,...t})=>i.jsx("div",{className:xe("flex flex-col space-y-2 text-center sm:text-left",e),...t});Cp.displayName="AlertDialogHeader";const Ap=({className:e,...t})=>i.jsx("div",{className:xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ap.displayName="AlertDialogFooter";const Ep=p.forwardRef(({className:e,...t},n)=>i.jsx(RU,{ref:n,className:xe("text-lg font-semibold",e),...t}));Ep.displayName=RU.displayName;const Pp=p.forwardRef(({className:e,...t},n)=>i.jsx(MU,{ref:n,className:xe("text-sm text-muted-foreground",e),...t}));Pp.displayName=MU.displayName;const Tp=p.forwardRef(({className:e,...t},n)=>i.jsx(OU,{ref:n,className:xe(kd(),e),...t}));Tp.displayName=OU.displayName;const Op=p.forwardRef(({className:e,...t},n)=>i.jsx(IU,{ref:n,className:xe(kd({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Op.displayName=IU.displayName;function Zoe({options:e,value:t,onChange:n,placeholder:r="Select...",searchPlaceholder:a="Search...",className:s,disabled:o=!1}){const[l,c]=p.useState(!1),u=p.useMemo(()=>{var f;return(f=e.find(d=>d.value===t))==null?void 0:f.label},[e,t]);return i.jsxs(ls,{open:l,onOpenChange:c,children:[i.jsx(cs,{asChild:!0,children:i.jsxs(Z,{variant:"outline",role:"combobox","aria-expanded":l,className:xe("w-full justify-between font-normal",!t&&"text-muted-foreground",s),disabled:o,children:[i.jsx("span",{className:"truncate",children:t?u:r}),i.jsx(LL,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(Di,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:i.jsxs(Oc,{children:[i.jsx(Ic,{placeholder:a}),i.jsxs(mb,{children:[i.jsx(Rc,{children:"No results found."}),i.jsx(Mc,{children:e.map(f=>i.jsxs(Dc,{value:f.label,onSelect:()=>{n(f.value),c(!1)},children:[i.jsx(Ny,{className:xe("mr-2 h-4 w-4",t===f.value?"opacity-100":"opacity-0")}),f.label]},f.value))})]})]})})]})}function ele({options:e,value:t=[],onChange:n,onAdd:r,onRemove:a,placeholder:s="Select...",searchPlaceholder:o="Search...",className:l,disabled:c=!1}){const[u,f]=p.useState(!1),d=p.useMemo(()=>t.map(v=>e.find(x=>x.value===v)||{value:v,label:v}),[t,e]),h=p.useMemo(()=>e.filter(v=>!t.includes(v.value)),[e,t]),m=v=>{if(t.includes(v))return;const x=[...t,v];n(x),r==null||r(v),f(!1)},g=v=>{const x=t.filter(y=>y!==v);n(x),a==null||a(v)};return i.jsxs("div",{className:xe("flex flex-col gap-2",l),children:[d.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-1",children:d.map(v=>i.jsxs(It,{variant:"secondary",className:"pr-1 py-1 flex items-center gap-1",children:[v.label,i.jsxs("button",{type:"button",className:"ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2 hover:bg-muted",onClick:x=>{x.preventDefault(),g(v.value)},disabled:c,children:[i.jsx(lp,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"}),i.jsxs("span",{className:"sr-only",children:["Remove ",v.label]})]})]},v.value))}),i.jsxs(ls,{open:u,onOpenChange:f,children:[i.jsx(cs,{asChild:!0,children:i.jsxs(Z,{variant:"outline",role:"combobox","aria-expanded":u,className:"w-full justify-between font-normal text-muted-foreground",disabled:c,children:[i.jsx("span",{children:s}),i.jsx(LL,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(Di,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:i.jsxs(Oc,{children:[i.jsx(Ic,{placeholder:o}),i.jsxs(mb,{children:[i.jsx(Rc,{children:"No results found."}),i.jsx(Mc,{children:h.map(v=>i.jsx(Dc,{value:v.label,onSelect:()=>m(v.value),children:v.label},v.value))})]})]})})]})]})}const tle=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),nle=({message:e,isLastMessage:t,highlighted:n=!1,matches:r=[],activeMatchOrder:a=-1})=>{const s=e.role==="assistant"||e.role==="agent"||e.direction==="out",o=e.role==="system"||e.type==="event"||e.type==="note",l=e.role==="assistant",c=e.role==="agent",u=()=>{const f=e.body||"";if(!f||r.length===0)return f;const d=[...r].sort((g,v)=>g.start-v.start),h=[];let m=0;return d.forEach(({start:g,length:v},x)=>{g>m&&h.push(f.slice(m,g));const y=f.slice(g,g+v);h.push({type:"highlight",content:y,index:x}),m=g+v}),m<f.length&&h.push(f.slice(m)),h.map((g,v)=>{if(typeof g=="string")return i.jsx("span",{children:g},`seg-${v}`);const x=g.index===a;return i.jsx("mark",{className:`rounded-sm px-0.5 text-current text-black ${x?"bg-orange-300":"bg-yellow-200"}`,children:g.content},`highlight-${g.index}`)})};return o?i.jsx("div",{className:"flex justify-center my-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:e.body||"System event"}),i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),i.jsx("span",{children:""}),i.jsx("span",{children:"system"})]})]})}):i.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} mb-3`,children:i.jsxs("div",{className:`flex ${s?"flex-row-reverse":"flex-row"} items-end gap-2 max-w-[75%]`,children:[i.jsxs(zr,{className:"h-8 w-8",children:[i.jsx(Us,{src:""}),i.jsx(qr,{className:"text-xs",children:s?"A":e.contact_avatar})]}),i.jsxs("div",{className:`rounded-lg px-3 py-2 text-sm shadow-sm ${c?"bg-blue-600 text-white":l?"bg-blue-100 text-blue-900":"bg-muted text-foreground"} ${n?"ring-2 ring-yellow-300":""}`,children:[i.jsx("p",{className:"whitespace-pre-wrap",children:u()}),i.jsxs("div",{className:`mt-1 flex items-center gap-1 text-[10px] ${c?"text-blue-100":l?"text-blue-700":"text-muted-foreground"}`,children:[i.jsx("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),s&&(e._status==="pending"?i.jsx(Gt,{className:"h-3 w-3 animate-spin","aria-label":"pending"}):t?i.jsx(FV,{className:"h-3 w-3","aria-label":"sent"}):null)]})]})]})})};function rle(){var Ne,Re,et,pt;const[e,t]=gN(),[n,r]=p.useState(""),[a,s]=p.useState(""),[o,l]=p.useState(null),[c,u]=p.useState("assigned");p.useState(!1),p.useState(!1);const[f,d]=p.useState(""),[h,m]=p.useState(null),[g,v]=p.useState(0),x=p.useRef(null),y=p.useRef({}),b=f.trim(),{conversations:w,messages:j,loading:k,error:_,fetchConversations:S,fetchMessages:E,sendMessage:N,createConversation:I,addThreadParticipant:P,removeThreadParticipant:D,addThreadLabel:L,removeThreadLabel:B,assignThread:U,assignThreadToUser:$,deleteThread:O}=Loe();oC();const{agents:T}=El(),{user:R}=Vr(),{hasRole:C,hasPermission:F}=jr(),[M,A]=p.useState(!1),[W,G]=p.useState(null),[Y,H]=p.useState(!1),Q=F("contacts.delete"),[X,re]=p.useState([]),[fe,J]=p.useState(null),[ye,z]=p.useState([]),[q,ae]=p.useState({}),se=p.useMemo(()=>T.map(ee=>({value:ee.user_id,label:ee.display_name||ee.email||"Unknown Agent"})),[T]),be=p.useMemo(()=>Object.fromEntries(T.map(ee=>[String(ee.user_id),String(ee.display_name||ee.email||"Unknown")])),[T]),Se=p.useMemo(()=>ee=>be[ee]||q[ee]||ee,[be,q]),Le=p.useMemo(()=>{if(!o)return null;const ee=w.find(ke=>ke.id===o);return(ee==null?void 0:ee.assignee_user_id)??null},[o,w]),ge=fe??Le;p.useEffect(()=>{if(!o){J(null);return}fe&&Le===fe&&J(null)},[o,Le,fe]),p.useEffect(()=>{if(!ge){z([]);return}let ee=!0;return(async()=>{const{data:st,error:nt}=await Nt.from("super_agent_members").select("agent_user_id").eq("super_agent_id",ge);if(ee){if(nt){console.warn("Failed to fetch super agent members",nt),z([]);return}z((st||[]).map(Ft=>String(Ft.agent_user_id)))}})(),()=>{ee=!1}},[ge]),p.useEffect(()=>{const ee=Array.from(new Set([...ge?[ge]:[],...X,...ye].filter(Boolean)));if(ee.length===0)return;const ke=ee.filter(Ft=>!be[Ft]&&!q[Ft]);if(ke.length===0)return;let st=!0;return(async()=>{try{const{data:Ft,error:Rn}=await Nt.from("users_profile").select("user_id, display_name").in("user_id",ke);if(!st)return;if(Rn)throw Rn;const Cn=Object.fromEntries((Ft||[]).map(An=>[String(An.user_id),String(An.display_name||"")]));ae(An=>({...An,...Cn}))}catch(Ft){console.warn("Failed to fetch user labels",Ft)}})(),()=>{st=!1}},[ge,X,ye,be,q]);const We=p.useMemo(()=>{if(!ge)return[];const ee=new Set(ye);return se.filter(ke=>ee.has(ke.value)).map(ke=>({...ke,label:Se(ke.value)}))},[se,ge,ye,Se]),dt=p.useMemo(()=>{const ee=new Map;return We.forEach(ke=>ee.set(ke.value,ke)),X.forEach(ke=>{ee.has(ke)||ee.set(ke,{value:ke,label:Se(ke)})}),Array.from(ee.values())},[We,X,Se]);p.useEffect(()=>{if(!o){re([]);return}let ee=!0;return(async()=>{const{data:st}=await Nt.from("thread_collaborators").select("user_id").eq("thread_id",o);ee&&st&&re(st.map(nt=>nt.user_id))})(),()=>{ee=!1}},[o]);const bt=async ee=>{if(o)try{await P(o,ee),re(ke=>[...ke,ee]),Ie.success("Collaborator added")}catch{}},Et=async ee=>{if(o)try{await D(o,ee),re(ke=>ke.filter(st=>st!==ee)),Ie.success("Collaborator removed")}catch{}},te=p.useMemo(()=>{if(!b)return[];const ee=tle(b);return ee?j.flatMap(ke=>{const st=ke.body||"";if(!st)return[];const nt=new RegExp(ee,"gi"),Ft=[];let Rn=0,Cn;for(;(Cn=nt.exec(st))!==null;)Ft.push({messageId:ke.id,start:Cn.index,length:Cn[0].length,order:Rn}),Rn+=1,Cn.index===nt.lastIndex&&nt.lastIndex++;return Ft}):[]},[b,j]),me=p.useMemo(()=>{if(te.length===0)return{};const ee=te.reduce((ke,st)=>(ke[st.messageId]||(ke[st.messageId]=[]),ke[st.messageId].push({start:st.start,length:st.length}),ke),{});return Object.values(ee).forEach(ke=>{ke.sort((st,nt)=>st.start-nt.start)}),ee},[te]),Fe=te.length,He=Fe>0?te[g]:null,Ue=ee=>{S(ee)};p.useEffect(()=>{v(0)},[b]),p.useEffect(()=>{Fe>0&&g>=Fe&&v(0)},[g,Fe]),p.useEffect(()=>{if(!b||!He){m(null);return}m(He.messageId);const ee=y.current[He.messageId];ee&&ee.scrollIntoView({behavior:"smooth",block:"center"})},[b,He]);const he=()=>{Fe!==0&&v(ee=>(ee+1)%Fe)},Ot=()=>{Fe!==0&&v(ee=>(ee-1+Fe)%Fe)},vt=e.get("contact"),wt=e.get("tab"),ve=p.useRef(!1);p.useEffect(()=>{wt&&(ve.current||(wt==="assigned"||wt==="unassigned"||wt==="resolved")&&wt!==c&&u(wt))},[wt]);const _e=p.useMemo(()=>[...w.filter(ke=>`${ke.contact_name} ${ke.last_message_preview}`.toLowerCase().includes(n.toLowerCase()))].sort((ke,st)=>{const nt=new Date(ke.last_msg_at??ke.created_at??0).getTime();return new Date(st.last_msg_at??st.created_at??0).getTime()-nt}),[w,n]);p.useEffect(()=>{if(k||w.length===0)return;const ee=w.filter(nt=>nt.status!=="closed"&&nt.assigned).length,ke=w.filter(nt=>nt.status!=="closed"&&!nt.assigned).length,st=w.filter(nt=>nt.status==="closed").length;if(c==="assigned"&&ee===0&&ke>0){u("unassigned");return}if((c==="assigned"||c==="unassigned")&&ee===0&&ke===0&&st>0){u("resolved");return}},[w,k,c]),p.useEffect(()=>{if(wt===c)return;const ke=new URLSearchParams(window.location.search);ke.set("tab",c),ve.current=!0,t(ke,{replace:!0}),setTimeout(()=>{ve.current=!1},0)},[c]),p.useEffect(()=>{var ke;if(!vt||o||_e.length===0)return;const ee=_e.find(st=>st.contact_id===vt);ee&&(l(ee.id),ee.status==="closed"?u("resolved"):u(ee.assigned?"assigned":"unassigned"),E(ee.id),(ke=ee.channel)!=null&&ke.provider&&Fw(ee.channel.provider))},[vt,_e]);const $e=p.useMemo(()=>o&&_e.find(ee=>ee.id===o)||null,[o,_e]);p.useEffect(()=>{(async()=>{try{if(!($e!=null&&$e.id)||!(R!=null&&R.id)){A(!1);return}const{data:ke,error:st}=await Nt.from("thread_collaborators").select("user_id").eq("thread_id",$e.id).eq("user_id",R.id).limit(1);if(st)throw st;A(!!ke&&ke.length>0)}catch(ke){console.warn("Failed to check collaborator status",ke),A(!1)}})()},[$e==null?void 0:$e.id,R==null?void 0:R.id]);const oe=async()=>{if($e){if(!(R!=null&&R.id)){Ie.error("You must be signed in to take over");return}try{const ee=C(nr.MASTER_AGENT)||C(nr.SUPER_AGENT);if(!M)if(ee)try{const{data:ke}=await Nt.from("thread_collaborators").select("user_id").eq("thread_id",$e.id).eq("user_id",R.id).limit(1);(!ke||ke.length===0)&&await P($e.id,R.id),A(!0)}catch(ke){console.warn("Failed to ensure collaborator before takeover",ke),Ie.error("Please join as collaborator before taking over");return}else{Ie.error("Please join as collaborator before taking over");return}await U($e.id,R.id),Ie.success("You are now assigned to this chat"),u("assigned"),await S()}catch{Ie.error("Failed to take over chat")}}};p.useEffect(()=>{var ee;(ee=x.current)==null||ee.scrollIntoView({behavior:"smooth"})},[j]);const Ze=async ee=>{var st;const ke=_e.find(nt=>nt.id===ee);(st=ke==null?void 0:ke.channel)!=null&&st.provider&&Fw(ke.channel.provider),l(ee);try{const nt=new URLSearchParams(window.location.search);nt.has("contact")&&(nt.delete("contact"),t(nt,{replace:!0}))}catch{}await E(ee)},Ke=async()=>{const ee=a.trim();if(!(!ee||!o))try{const{checkAIMessageLimit:ke,autoAssignToSuperAgent:st}=await Ys(async()=>{const{checkAIMessageLimit:Ft,autoAssignToSuperAgent:Rn}=await import("./aiMessageLimit-CzT5SAWG.js");return{checkAIMessageLimit:Ft,autoAssignToSuperAgent:Rn}},[]),nt=await ke(Nt,o);if(nt.isExceeded&&nt.superAgentId){if((await st(Nt,o,nt.superAgentId)).success){Ie.error(`Batas pesan AI telah tercapai (${nt.currentCount}/${nt.limit}). Percakapan telah dialihkan ke super agent dan AI access dinonaktifkan.`),await S();return}}else if(nt.isExceeded&&!nt.superAgentId){Ie.error(`Batas pesan AI telah tercapai (${nt.currentCount}/${nt.limit}). Tidak ada super agent yang tersedia untuk penanganan.`);return}if(R!=null&&R.id){const{data:Ft}=await ne.from("users_profile").select("token_limit_enabled, max_tokens_per_day, max_tokens_per_month").eq("user_id",R.id).maybeSingle();if(Ft!=null&&Ft.token_limit_enabled){const Rn=new Date,Cn=new Date(Date.UTC(Rn.getUTCFullYear(),Rn.getUTCMonth(),Rn.getUTCDate(),0,0,0)).toISOString(),An=new Date(Date.UTC(Rn.getUTCFullYear(),Rn.getUTCMonth(),1,0,0,0)).toISOString(),[{data:bi},{data:Gr}]=await Promise.all([ne.from("token_usage_logs").select("total_tokens").eq("user_id",R.id).gte("made_at",Cn),ne.from("token_usage_logs").select("total_tokens").eq("user_id",R.id).gte("made_at",An)]),Dl=(bi||[]).reduce((xo,yo)=>xo+Number(yo.total_tokens||0),0),Ns=(Gr||[]).reduce((xo,yo)=>xo+Number(yo.total_tokens||0),0);if(Ft.max_tokens_per_day&&Dl>=Ft.max_tokens_per_day){Ie.error("Daily token limit reached");return}if(Ft.max_tokens_per_month&&Ns>=Ft.max_tokens_per_month){Ie.error("Monthly token limit reached");return}}}s(""),N(o,ee,"assistant"),Ie.success("Message sent successfully")}catch{Ie.error("Failed to send message")}},en=ee=>{ee.key==="Enter"&&!ee.shiftKey&&(ee.preventDefault(),Ke())};p.useEffect(()=>{var ee;(ee=$e==null?void 0:$e.channel)!=null&&ee.provider&&Fw($e.channel.provider)},[(Ne=$e==null?void 0:$e.channel)==null?void 0:Ne.provider]);const _t=ee=>{if(!ee)return"";const ke=new Date(ee),Ft=(new Date().getTime()-ke.getTime())/(1e3*60*60);if(Ft<24&&Ft>=0)return ke.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(Ft>=24&&Ft<48)return"Yesterday";const Rn=String(ke.getMonth()+1).padStart(2,"0"),Cn=String(ke.getDate()).padStart(2,"0"),An=ke.getFullYear();return`${Rn}/${Cn}/${An}`},ut=ee=>ee.status==="closed"?i.jsx(It,{className:"bg-green-100 text-green-700 border-0",children:"Resolved"}):i.jsx(It,{className:ee.assigned?"bg-blue-100 text-blue-700 border-0":"bg-secondary text-secondary-foreground",children:ee.assigned?"Assigned":"Unassigned"}),Lt=ee=>{const ke=ee.last_msg_at||ee.updated_at||ee.created_at||"";return _t(ke)},ze=async()=>{if(W){if(!Q){Ie.error("You do not have permission to delete conversations"),G(null);return}try{H(!0),await O(W.id),Ie.success("Conversation deleted"),o===W.id&&l(null),G(null)}catch{Ie.error("Failed to delete conversation")}finally{H(!1)}}},ie=ee=>{if(!Q){Ie.error("You do not have permission to delete conversations");return}G(ee)};return k?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Gt,{className:"h-8 w-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading conversations..."})]}):_?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-red-600 mb-2",children:["Error: ",_]}),i.jsxs(Z,{onClick:()=>{S()},variant:"outline",children:[i.jsx(Ay,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}):i.jsxs("div",{className:"grid w-full grid-cols-[360px_1fr_320px] h-[calc(100vh-120px)] gap-4",children:[i.jsxs("aside",{className:"rounded-lg border bg-card p-3",children:[i.jsxs("div",{className:"mb-3 pb-2 border-b flex items-center justify-between",children:[i.jsx("h2",{className:"text-sm font-medium",children:"Conversations"}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx(Poe,{onFilterChange:Ue})})]}),i.jsxs("div",{className:"relative mb-3",children:[i.jsx(hs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(Ve,{placeholder:"Search...",value:n,onChange:ee=>r(ee.target.value),className:"pl-10 h-8 text-sm"})]}),i.jsxs(pl,{value:c,onValueChange:ee=>{ee!==c&&u(ee)},className:"w-full",children:[i.jsxs(so,{className:"grid w-full grid-cols-[1fr_1fr_auto] mb-3 bg-white",children:[i.jsx(Gn,{value:"assigned",className:"text-xs border-b-2 border-transparent data-[state=active]:bg-blue-50 data-[state=active]:text-blue-600 data-[state=active]:border-blue-500",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("span",{className:"flex items-center",children:["Assigned",i.jsx(It,{variant:"secondary",className:"ml-2 h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:_e.filter(ee=>ee.status!=="closed"&&ee.assigned).length})]})}),i.jsx(le,{children:i.jsx("p",{children:"Lihat percakapan yang ditugaskan ke agen"})})]})}),i.jsx(Gn,{value:"unassigned",className:"text-xs border-b-2 border-transparent data-[state=active]:bg-red-50 data-[state=active]:text-red-600 data-[state=active]:border-red-500",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("span",{className:"flex items-center",children:["Unassigned",i.jsx(It,{variant:"secondary",className:"ml-2 h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:_e.filter(ee=>ee.status!=="closed"&&!ee.assigned).length})]})}),i.jsx(le,{children:i.jsx("p",{children:"Lihat percakapan yang menunggu penugasan"})})]})}),i.jsx(Gn,{value:"resolved",className:"justify-self-end h-8 px-2 rounded-full border-b-2 border-transparent data-[state=active]:bg-green-50 data-[state=active]:text-green-600 data-[state=active]:border-green-500","aria-label":"Resolved",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ih,{className:"h-4 w-4"}),i.jsx(It,{variant:"secondary",className:"h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:_e.filter(ee=>ee.status==="closed").length})]})}),i.jsx(le,{children:i.jsx("p",{children:"Lihat percakapan yang telah diselesaikan"})})]})})]}),i.jsx(Dn,{value:"assigned",className:"mt-0",children:i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:i.jsx("div",{className:"space-y-1",children:_e.filter(ee=>ee.status!=="closed"&&ee.assigned).map(ee=>{var ke,st;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Ze(ee.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===ee.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(zr,{className:"h-6 w-6",children:[i.jsx(Us,{src:ee.channel_logo_url||""}),i.jsx(qr,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-medium truncate",children:ee.contact_name}),i.jsx("p",{className:"text-xs text-gray-600 truncate mt-1",children:ee.last_message_preview||""}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Bo,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:((ke=ee.channel)==null?void 0:ke.display_name)||((st=ee.channel)==null?void 0:st.provider)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[120px]",children:[i.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:Lt(ee)}),i.jsx("div",{className:"mt-1",children:ut(ee)})]})]})}),!ee.contact_id&&Q&&i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:nt=>{nt.stopPropagation(),ie(ee)},children:i.jsx(Ar,{className:"h-4 w-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Delete conversation"})})]})]},ee.id)})})})}),i.jsx(Dn,{value:"unassigned",className:"mt-0",children:i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:i.jsx("div",{className:"space-y-1",children:_e.filter(ee=>ee.status!=="closed"&&!ee.assigned).map(ee=>{var ke,st;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Ze(ee.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===ee.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(zr,{className:"h-6 w-6",children:[i.jsx(Us,{src:""}),i.jsx(qr,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-semibold truncate",children:ee.contact_name}),i.jsx("p",{className:"text-xs text-gray-600 truncate",children:ee.last_message_preview}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Bo,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:((ke=ee.channel)==null?void 0:ke.display_name)||((st=ee.channel)==null?void 0:st.provider)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[120px]",children:[i.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:Lt(ee)}),i.jsx("div",{className:"mt-1",children:ut(ee)})]})]})}),!ee.contact_id&&Q&&i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:nt=>{nt.stopPropagation(),ie(ee)},children:i.jsx(Ar,{className:"h-4 w-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Delete conversation"})})]})]},ee.id)})})})}),i.jsx(Dn,{value:"resolved",className:"mt-0",children:i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:i.jsx("div",{className:"space-y-1",children:_e.filter(ee=>ee.status==="closed").map(ee=>{var ke;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Ze(ee.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===ee.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(zr,{className:"h-6 w-6",children:[i.jsx(Us,{src:""}),i.jsx(qr,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-semibold truncate",children:ee.contact_name}),i.jsx("p",{className:"text-xs text-gray-600 truncate",children:ee.last_message_preview}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Bo,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:((ke=ee.channel)==null?void 0:ke.display_name)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[120px]",children:[i.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:Lt(ee)}),i.jsx("div",{className:"mt-1",children:ut(ee)})]})]})}),!ee.contact_id&&Q&&i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:st=>{st.stopPropagation(),ie(ee)},children:i.jsx(Ar,{className:"h-4 w-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Delete conversation"})})]})]},ee.id)})})})})]}),i.jsx(gb,{open:!!W,onOpenChange:ee=>{ee||G(null)},children:i.jsxs(Np,{children:[i.jsxs(Cp,{children:[i.jsx(Ep,{children:"Delete conversation?"}),i.jsx(Pp,{children:"This conversation is not linked to a saved contact. Deleting it will remove all associated messages permanently."})]}),i.jsxs(Ap,{children:[i.jsx(Op,{disabled:Y,children:"Cancel"}),i.jsx(Tp,{className:"bg-red-600 hover:bg-red-700",onClick:ze,disabled:Y,children:Y?"Deleting":"Delete"})]})]})})]}),i.jsx("article",{className:"flex min-h-[70vh] flex-col rounded-lg border bg-card",children:$e?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 border-b px-4 py-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(zr,{className:"h-10 w-10",children:[i.jsx(Us,{src:""}),i.jsx(qr,{className:"text-sm",children:$e.contact_name.charAt(0)})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-base font-semibold leading-tight",children:$e.contact_name}),$e.contact_phone&&i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:$e.contact_phone})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(hs,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),i.jsx(Ve,{value:f,onChange:ee=>d(ee.target.value),placeholder:"Search messages",className:"pl-7 h-8 w-44 text-xs"})]}),b&&i.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx("span",{className:"text-xs font-medium min-w-[48px] text-right",children:Fe>0?`${g+1}/${Fe}`:"0/0"}),i.jsx(Z,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Ot,disabled:Fe===0,"aria-label":"Temukan sebelumnya",children:i.jsx($L,{className:"h-4 w-4"})}),i.jsx(Z,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:he,disabled:Fe===0,"aria-label":"Temukan berikutnya",children:i.jsx(xa,{className:"h-4 w-4"})})]})]}),$e.status!=="closed"&&i.jsx(Z,{size:"sm",className:"h-8 bg-green-600 hover:bg-green-700 text-white disabled:opacity-60",onClick:async()=>{if($e.status==="closed")return;const{error:ee}=await Nt.from("threads").update({status:"closed",resolved_at:new Date().toISOString(),resolved_by_user_id:(R==null?void 0:R.id)??null,handover_reason:null}).eq("id",$e.id);ee?Ie.error("Failed to resolve"):(Ie.success("Conversation resolved"),await S(),u("resolved"))},children:"Resolve"}),i.jsx(It,{className:$e.assigned?"bg-success text-success-foreground hover:bg-success":"bg-secondary text-secondary-foreground hover:bg-secondary",children:$e.assigned?"Assigned":"Unassigned"})]})]}),i.jsx(ob,{className:"flex-1 p-4",children:i.jsxs("div",{className:"space-y-2",children:[j.length===0?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No messages yet. Start the conversation!"}):j.map((ee,ke)=>i.jsx("div",{ref:st=>{y.current[ee.id]=st},children:i.jsx(nle,{message:ee,isLastMessage:ke===j.length-1,highlighted:h===ee.id,matches:me[ee.id]??[],activeMatchOrder:(He==null?void 0:He.messageId)===ee.id?He.order:-1})},ee.id)),i.jsx("div",{ref:x})]})}),i.jsx("div",{className:"border-t p-3",children:$e.status!=="closed"&&($e.assigned?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ve,{placeholder:`Message ${$e.contact_name}...`,value:a,onChange:ee=>s(ee.target.value),onKeyDown:en,className:"flex-1",disabled:!F("messages.create")}),i.jsx(Z,{type:"button",onClick:Ke,disabled:!a.trim()||!F("messages.create"),title:F("messages.create")?"Send message":"No permission to send messages","aria-label":"Send message",children:i.jsx(Xh,{className:"h-4 w-4"})})]}):i.jsx(Kt,{permission:"threads.update",children:i.jsx(Z,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:oe,disabled:!(R!=null&&R.id),children:"Takeover Chat"})}))})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Bo,{className:"h-12 w-12 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No conversation selected"}),i.jsx("p",{children:"Select a conversation from the sidebar to start chatting"})]})})}),i.jsx("aside",{className:"rounded-lg border bg-card p-4",children:$e?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold",children:$e.contact_name||"Unknown Contact"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Bo,{className:"h-4 w-4 text-blue-500"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(It,{variant:"outline",className:"text-xs",children:((Re=$e.channel)==null?void 0:Re.display_name)||((et=$e.channel)==null?void 0:et.provider)||"Unknown"}),((pt=$e.channel)==null?void 0:pt.type)&&i.jsx(It,{variant:"secondary",className:"text-xs",children:$e.channel.type})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Handled By"}),i.jsx(Zoe,{options:se,value:ge,onChange:async ee=>{$e&&(J(ee),await $($e.id,ee))},placeholder:"Assign Agent",searchPlaceholder:"Search agent...",className:"w-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Collaborators"}),i.jsx(ele,{options:dt,value:X,onChange:()=>{},onAdd:bt,onRemove:Et,placeholder:ge?"Add Collaborator":"Select handled by first",searchPlaceholder:"Search agent...",className:"w-full",disabled:!ge})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium mb-3",children:"Conversation Details"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Assigned By"}),i.jsx("span",{children:$e.assigned_by_name||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Handled By"}),i.jsx("span",{children:ge&&Se(ge)||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Resolved By"}),i.jsx("span",{children:$e.resolved_by_name||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"AI Handoff At"}),i.jsx("span",{children:$e.ai_handoff_at?new Date($e.ai_handoff_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Assigned At"}),i.jsx("span",{children:$e.assigned_at?new Date($e.assigned_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Created At"}),i.jsx("span",{children:$e.created_at?new Date($e.created_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Resolved At"}),i.jsx("span",{children:$e.resolved_at?new Date($e.resolved_at).toLocaleString():""})]})]})]})]}):i.jsx("div",{className:"text-sm text-muted-foreground",children:"No conversation selected"})})]})}var vb="Checkbox",[ale,p3e]=_r(vb),[ile,lC]=ale(vb);function sle(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:s,form:o,name:l,onCheckedChange:c,required:u,value:f="on",internal_do_not_use_render:d}=e,[h,m]=Ca({prop:n,defaultProp:a??!1,onChange:c,caller:vb}),[g,v]=p.useState(null),[x,y]=p.useState(null),b=p.useRef(!1),w=g?!!o||!!g.closest("form"):!0,j={checked:h,disabled:s,setChecked:m,control:g,setControl:v,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:ol(a)?!1:a,isFormControl:w,bubbleInput:x,setBubbleInput:y};return i.jsx(ile,{scope:t,...j,children:ole(d)?d(j):r})}var $U="CheckboxTrigger",LU=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:s,value:o,disabled:l,checked:c,required:u,setControl:f,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=lC($U,e),v=St(a,f),x=p.useRef(c);return p.useEffect(()=>{const y=s==null?void 0:s.form;if(y){const b=()=>d(x.current);return y.addEventListener("reset",b),()=>y.removeEventListener("reset",b)}},[s,d]),i.jsx(Ge.button,{type:"button",role:"checkbox","aria-checked":ol(c)?"mixed":c,"aria-required":u,"data-state":qU(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:v,onKeyDown:Ee(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:Ee(n,y=>{d(b=>ol(b)?!0:!b),g&&m&&(h.current=y.isPropagationStopped(),h.current||y.stopPropagation())})})});LU.displayName=$U;var cC=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:s,required:o,disabled:l,value:c,onCheckedChange:u,form:f,...d}=e;return i.jsx(sle,{__scopeCheckbox:n,checked:a,defaultChecked:s,disabled:l,required:o,onCheckedChange:u,name:r,form:f,value:c,internal_do_not_use_render:({isFormControl:h})=>i.jsxs(i.Fragment,{children:[i.jsx(LU,{...d,ref:t,__scopeCheckbox:n}),h&&i.jsx(zU,{__scopeCheckbox:n})]})})});cC.displayName=vb;var FU="CheckboxIndicator",BU=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,s=lC(FU,n);return i.jsx(pr,{present:r||ol(s.checked)||s.checked===!0,children:i.jsx(Ge.span,{"data-state":qU(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});BU.displayName=FU;var UU="CheckboxBubbleInput",zU=p.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:s,defaultChecked:o,required:l,disabled:c,name:u,value:f,form:d,bubbleInput:h,setBubbleInput:m}=lC(UU,e),g=St(n,m),v=aC(s),x=lN(r);p.useEffect(()=>{const b=h;if(!b)return;const w=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(w,"checked").set,_=!a.current;if(v!==s&&k){const S=new Event("click",{bubbles:_});b.indeterminate=ol(s),k.call(b,ol(s)?!1:s),b.dispatchEvent(S)}},[h,v,s,a]);const y=p.useRef(ol(s)?!1:s);return i.jsx(Ge.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:l,disabled:c,name:u,value:f,form:d,...t,tabIndex:-1,ref:g,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});zU.displayName=UU;function ole(e){return typeof e=="function"}function ol(e){return e==="indeterminate"}function qU(e){return ol(e)?"indeterminate":e?"checked":"unchecked"}const hm=p.forwardRef(({className:e,...t},n)=>i.jsx(cC,{ref:n,className:xe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(BU,{className:xe("flex items-center justify-center text-current"),children:i.jsx(Ny,{className:"h-4 w-4"})})}));hm.displayName=cC.displayName;const xb=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:xe("w-full caption-bottom text-sm",e),...t})}));xb.displayName="Table";const yb=p.forwardRef(({className:e,...t},n)=>i.jsx("thead",{ref:n,className:xe("[&_tr]:border-b",e),...t}));yb.displayName="TableHeader";const bb=p.forwardRef(({className:e,...t},n)=>i.jsx("tbody",{ref:n,className:xe("[&_tr:last-child]:border-0",e),...t}));bb.displayName="TableBody";const lle=p.forwardRef(({className:e,...t},n)=>i.jsx("tfoot",{ref:n,className:xe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));lle.displayName="TableFooter";const zs=p.forwardRef(({className:e,...t},n)=>i.jsx("tr",{ref:n,className:xe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));zs.displayName="TableRow";const Wn=p.forwardRef(({className:e,...t},n)=>i.jsx("th",{ref:n,className:xe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Wn.displayName="TableHead";const Mn=p.forwardRef(({className:e,...t},n)=>i.jsx("td",{ref:n,className:xe("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Mn.displayName="TableCell";const cle=p.forwardRef(({className:e,...t},n)=>i.jsx("caption",{ref:n,className:xe("mt-4 text-sm text-muted-foreground",e),...t}));cle.displayName="TableCaption";const $a=p.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:xe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));$a.displayName="Textarea";function ule(){var he,Ot,vt,wt;const{hasRole:e}=jr(),t=e("master_agent"),[n,r]=p.useState([]),[a,s]=p.useState(1),[o,l]=p.useState(""),[c,u]=p.useState(100),[f,d]=p.useState(null),[h,m]=p.useState(!0),[g,v]=p.useState(!1),[x,y]=p.useState({chatStatus:"",handledBy:"",dateRange:{}}),[b,w]=p.useState(!1),[j,k]=p.useState(!1),[_,S]=p.useState(!1),[E,N]=p.useState(""),[I,P]=p.useState(""),[D,L]=p.useState(""),[B,U]=p.useState(!1),[$,O]=p.useState(!1),[T,R]=p.useState(null),C=Ka(),{hasPermission:F}=jr(),M=F("contacts.delete"),{contacts:A,loading:W,error:G,totalCount:Y,fetchContacts:H,deleteContact:Q,updateContact:X,deleteMultipleContacts:re}=oC();p.useEffect(()=>{const ve=setTimeout(()=>{H(a,c,o,x)},300);return()=>clearTimeout(ve)},[o,a,c,x]);const fe=ve=>{r(ve?A.map(_e=>_e.id):[])},J=(ve,_e)=>{r(_e?[...n,ve]:n.filter($e=>$e!==ve))},ye=()=>{if(n.length!==0){if(!M){Ie.error("You do not have permission to delete contacts");return}k(!0)}},z=ve=>{const _e=new URLSearchParams({menu:"chat",contact:ve.id});C({pathname:"/chat",search:_e.toString()}),Ie.success(`Opening conversation with ${ve.name||"contact"}`)},q=ve=>{R(ve),O(!0)},ae=ve=>{R(ve),N(ve.name||""),P(ve.phone||""),L(ve.notes||""),S(!0)},se=async()=>{try{await re(n),r([]),k(!1),Ie.success(`Successfully deleted ${n.length} contact(s)`)}catch{Ie.error("Failed to delete contacts")}},be=async()=>{if(T)try{U(!0),await X(T.id,{name:E.trim()||null,phone:I.trim()||null,notes:D.trim()||null}),Ie.success("Contact updated"),S(!1)}catch{Ie.error("Failed to update contact")}finally{U(!1)}},Se=()=>{H(a,c,o,x),Ie.info("Contacts refreshed")},Le=(ve,_e)=>{y($e=>({...$e,[ve]:_e}))},ge=(ve,_e)=>{y($e=>({...$e,dateRange:{...$e.dateRange,[ve]:_e}}))},We=()=>{y({chatStatus:"",handledBy:"",dateRange:{}})},dt=Object.values(x).some(ve=>typeof ve=="string"?ve!=="":Object.values(ve).some(_e=>_e!=="")),bt=n.length===A.length&&A.length>0,Et=n.length>0&&n.length<A.length,te=ve=>{f===ve?m(!h):(d(ve),m(!0))},me=(()=>{if(!f)return A;const ve=[...A];return ve.sort((_e,$e)=>{const oe=_e[f],Ze=$e[f];if(oe==null&&Ze==null)return 0;if(oe==null)return h?1:-1;if(Ze==null)return h?-1:1;if(f==="chatCreatedAtISO"||f==="created_at"){const _t=new Date(oe).getTime(),ut=new Date(Ze).getTime();return h?_t-ut:ut-_t}const Ke=String(oe).toLowerCase(),en=String(Ze).toLowerCase();return Ke<en?h?-1:1:Ke>en?h?1:-1:0}),ve})(),Fe=(()=>{let ve=me;return x.handledBy&&x.handledBy!==""&&(ve=ve.filter(_e=>_e.handledBy===x.handledBy)),ve})(),He=Fe.length,Ue=ve=>{if(!ve||ve==="")return i.jsx("span",{className:"text-muted-foreground",children:""});const _e=ve==="open"?"bg-blue-100 text-blue-700":ve==="pending"?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700";return i.jsx(It,{className:`${_e} border-0`,children:ve})};return i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Contacts"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total Contacts: ",W?"...":`${He.toLocaleString()} of ${Y.toLocaleString()}`]})]}),i.jsxs("div",{className:"flex gap-4 items-center justify-between",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs(ls,{open:g,onOpenChange:v,children:[i.jsx(cs,{asChild:!0,children:i.jsxs(Z,{variant:"outline",className:"gap-2",children:[i.jsx(zL,{className:"w-4 h-4"}),"Filter",dt&&i.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]})}),i.jsx(Di,{className:"w-80 p-4",align:"start",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-medium",children:"Filter Contacts"}),dt&&i.jsx(Z,{variant:"ghost",size:"sm",onClick:We,className:"h-8 px-2 text-xs",children:"Clear All"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Chat Status"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Filter berdasarkan status percakapan: Open (terbuka), Pending (menunggu), atau Closed (tertutup)"})})]})]}),i.jsxs(Ut,{value:x.chatStatus,onValueChange:ve=>Le("chatStatus",ve==="all"?"":ve),children:[i.jsx(Dt,{className:"h-8",children:i.jsx(Rt,{placeholder:"All statuses"})}),i.jsxs($t,{children:[i.jsx(De,{value:"all",children:"All statuses"}),i.jsx(De,{value:"open",children:"Open"}),i.jsx(De,{value:"pending",children:"Pending"}),i.jsx(De,{value:"closed",children:"Closed"})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Handled By"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Filter berdasarkan siapa yang menangani percakapan: Assigned (ditugaskan ke agen) atau Unassigned (belum ditugaskan)"})})]})]}),i.jsxs(Ut,{value:x.handledBy||"",onValueChange:ve=>Le("handledBy",ve==="all"?"":ve),children:[i.jsx(Dt,{className:"h-8",children:i.jsx(Rt,{placeholder:"All agents"})}),i.jsxs($t,{children:[i.jsx(De,{value:"all",children:"All"}),i.jsx(De,{value:"assigned",children:"Assigned"}),i.jsx(De,{value:"unassigned",children:"Unassigned"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Filter berdasarkan rentang tanggal kontak dibuat. Pilih tanggal mulai dan tanggal akhir untuk membatasi hasil pencarian"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("div",{children:i.jsx(Ve,{type:"date",placeholder:"From",value:x.dateRange.from,onChange:ve=>ge("from",ve.target.value),className:"h-8 text-xs"})}),i.jsx("div",{children:i.jsx(Ve,{type:"date",placeholder:"To",value:x.dateRange.to,onChange:ve=>ge("to",ve.target.value),className:"h-8 text-xs"})})]})]})]})]})})]}),i.jsxs("div",{className:"relative",children:[i.jsx(hs,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),i.jsx(Ve,{placeholder:"Cari berdasarkan Nama atau Telepon",className:"pl-10 pr-8 w-80",value:o,onChange:ve=>l(ve.target.value)}),o&&i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("button",{type:"button",onClick:()=>l(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":"Clear search",children:i.jsx(lp,{className:"h-4 w-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Hapus pencarian"})})]})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"outline",size:"sm",onClick:Se,disabled:W,children:i.jsx(Ay,{className:`w-4 h-4 ${W?"animate-spin":""}`})})}),i.jsx(le,{children:i.jsx("p",{children:"Segarkan daftar kontak"})})]})]}),i.jsxs("div",{className:"flex gap-2",children:[M&&i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs(Z,{variant:n.length>0?"destructive":"outline",className:n.length>0?"bg-red-600 hover:bg-red-700 text-white":"",onClick:ye,disabled:n.length===0,children:["Delete Selected (",n.length,")"]})}),i.jsx(le,{children:i.jsx("p",{children:"Hapus kontak yang dipilih"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"outline",onClick:async()=>{try{w(!0);const{data:ve,error:_e}=await Nt.from("contacts").select(`
                            id,
                            name,
                            phone,
                            email,
                            notes,
                            created_at,
                            threads!left(
                              status,
                              assignee_user_id,
                              created_at,
                              channels(display_name, provider, type)
                            )
                          `);if(_e)throw _e;const $e=(ve||[]).map(_t=>{var Lt,ze,ie;const ut=(_t.threads||[])[0]||null;return{id:_t.id,name:_t.name??"",phone:_t.phone??"",email:_t.email??"",notes:_t.notes??"",contact_created_at:_t.created_at??"",chat_status:(ut==null?void 0:ut.status)??"",handled_by:(ut==null?void 0:ut.assignee_user_id)??"",chat_channel:((Lt=ut==null?void 0:ut.channels)==null?void 0:Lt.display_name)??"",chat_channel_provider:((ze=ut==null?void 0:ut.channels)==null?void 0:ze.provider)??"",chat_channel_type:((ie=ut==null?void 0:ut.channels)==null?void 0:ie.type)??"",chat_created_at:(ut==null?void 0:ut.created_at)??""}}),oe=[["ID","Name","Phone","Email","Notes","Contact Created At","Chat Status","Handled By","Chat Channel","Chat Channel Provider","Chat Channel Type","Chat Created At"].join(","),...$e.map(_t=>{var ut;return[_t.id,_t.name,_t.phone,_t.email,(ut=_t.notes)==null?void 0:ut.replace(/"/g,'""'),_t.contact_created_at,_t.chat_status,_t.handled_by,_t.chat_channel,_t.chat_channel_provider,_t.chat_channel_type,_t.chat_created_at].map(Lt=>`"${Lt??""}"`).join(",")})].join(`
`),Ze=new Blob([oe],{type:"text/csv;charset=utf-8;"}),Ke=URL.createObjectURL(Ze),en=document.createElement("a");en.href=Ke,en.setAttribute("download",`contacts-${new Date().toISOString()}.csv`),document.body.appendChild(en),en.click(),document.body.removeChild(en),URL.revokeObjectURL(Ke),Ie.success("Contacts exported to CSV")}catch(ve){console.error("Failed to export contacts:",ve),Ie.error("Failed to export contacts")}finally{w(!1)}},disabled:b,children:b?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"}),"Exporting..."]}):"Export"})}),i.jsx(le,{children:i.jsx("p",{children:"Ekspor daftar kontak"})})]})]})]})]}),G&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",G]})}),i.jsx(Ae,{children:i.jsx(Je,{className:"p-0",children:i.jsxs(xb,{children:[i.jsx(yb,{children:i.jsxs(zs,{children:[i.jsx(Wn,{className:"w-12",children:i.jsx(hm,{checked:bt,onCheckedChange:fe,"aria-label":"Select all contacts",className:Et?"data-[state=checked]:bg-blue-600":""})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("span",{className:"cursor-help",children:"ACTION"})}),i.jsx(le,{children:i.jsx("p",{children:"Aksi yang dapat dilakukan pada kontak (lihat, edit, hapus)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("name"),children:["NAME ",f==="name"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Nama kontak (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("phone"),children:["PHONE ",f==="phone"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Nomor telepon kontak (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("notes"),children:["NOTE ",f==="notes"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Catatan atau keterangan tambahan kontak (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("inbox"),children:["CHANNEL ",f==="inbox"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Saluran komunikasi kontak (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("channelType"),children:["PLATFORM ",f==="channelType"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Platform komunikasi (WhatsApp, Telegram, dll) (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("chatStatus"),children:["CHAT STATUS ",f==="chatStatus"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Status percakapan (Open, Pending, Closed) (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("chatCreatedAtISO"),children:["CREATED AT ",f==="chatCreatedAtISO"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Tanggal dan waktu kontak dibuat (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("handledBy"),children:["HANDLED BY ",f==="handledBy"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Agen yang menangani percakapan (klik untuk mengurutkan)"})})]})})]})}),i.jsx(bb,{children:W?i.jsx(zs,{children:i.jsx(Mn,{colSpan:10,className:"text-center py-8",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(Gt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Loading contacts..."})]})})}):A.length===0?i.jsx(zs,{children:i.jsx(Mn,{colSpan:10,className:"text-center py-8",children:i.jsx("div",{className:"text-muted-foreground",children:o?"No contacts found matching your search.":"No contacts found."})})}):Fe.map(ve=>{var _e;return i.jsxs(zs,{className:`hover:bg-muted/50 ${n.includes(ve.id)?"bg-blue-50":""}`,children:[i.jsx(Mn,{children:i.jsx(hm,{checked:n.includes(ve.id),onCheckedChange:$e=>J(ve.id,$e),"aria-label":`Select ${ve.name}`})}),i.jsx(Mn,{children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-blue-600 hover:bg-blue-700 text-white","aria-label":"View detailed conversation",onClick:()=>z(ve),variant:"ghost",title:"Open conversation",children:i.jsx(Bo,{className:"h-4 w-4"})})}),i.jsx(le,{children:"Open conversation"})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-green-600 hover:bg-green-700 text-white","aria-label":"View contact details",onClick:()=>q(ve),variant:"ghost",title:"View details",children:i.jsx(JS,{className:"h-4 w-4"})})}),i.jsx(le,{children:"View details"})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white","aria-label":"Edit contact",onClick:()=>ae(ve),variant:"ghost",title:"Edit contact",children:i.jsx(ga,{className:"h-4 w-4"})})}),i.jsx(le,{children:"Edit contact"})]})]})}),i.jsx(Mn,{className:"font-medium",children:i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx(zr,{className:"h-8 w-8",children:i.jsx(qr,{className:"text-xs",children:(_e=(ve.name||ve.phone||"?")[0])==null?void 0:_e.toUpperCase()})}),i.jsx("div",{className:"min-w-0",children:i.jsx("div",{className:"truncate",children:ve.name||"Unnamed Contact"})})]})}),i.jsx(Mn,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:ve.phone||"-"}),ve.phone&&i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{navigator.clipboard.writeText(ve.phone),Ie.success("Phone copied")},children:i.jsx(Q0,{className:"h-3 w-3"})})}),i.jsx(le,{children:"Copy phone"})]})]})}),i.jsx(Mn,{children:ve.notes?i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("span",{className:"line-clamp-1 max-w-[260px] inline-block align-middle",children:ve.notes})}),i.jsx(le,{className:"max-w-sm",children:ve.notes})]}):i.jsx("span",{className:"text-muted-foreground",children:"-"})}),i.jsx(Mn,{children:ve.inbox?i.jsx(It,{variant:"outline",children:ve.inbox}):""}),i.jsx(Mn,{children:ve.channelProvider?i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(It,{variant:"secondary",className:"capitalize",children:ve.channelProvider})}):i.jsx("span",{className:"text-muted-foreground",children:""})}),i.jsx(Mn,{children:Ue(ve.chatStatus)}),i.jsx(Mn,{className:"font-mono text-sm whitespace-nowrap",children:ve.chatCreatedAt||"-"}),i.jsx(Mn,{children:ve.handledBy&&ve.handledBy!==""?i.jsx(It,{className:"bg-purple-100 text-purple-700 border-0",children:ve.handledBy}):i.jsx("span",{className:"text-muted-foreground",children:""})})]},ve.id)})})]})})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Z,{variant:"outline",size:"sm",disabled:a===1||W,onClick:()=>s(a-1),children:i.jsx(XS,{className:"w-4 h-4"})}),i.jsxs("span",{className:"text-sm",children:["Page ",i.jsx("span",{className:"font-medium",children:a})," of ",i.jsx("span",{className:"font-medium",children:Math.max(1,Math.ceil(He/c))})]}),i.jsx(Z,{variant:"outline",size:"sm",disabled:a>=Math.ceil(He/c)||W,onClick:()=>s(a+1),children:i.jsx(Cy,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:"Items per page:"}),i.jsxs(Ut,{value:c.toString(),onValueChange:ve=>u(parseInt(ve)),children:[i.jsx(Dt,{className:"w-20 h-8",children:i.jsx(Rt,{})}),i.jsxs($t,{children:[i.jsx(De,{value:"50",children:"50"}),i.jsx(De,{value:"100",children:"100"}),i.jsx(De,{value:"200",children:"200"})]})]}),i.jsx("span",{children:"rows"})]}),i.jsxs("span",{children:["Total: ",i.jsx("span",{className:"font-medium",children:He.toLocaleString()})]})]})]}),i.jsx(gb,{open:j,onOpenChange:k,children:i.jsxs(Np,{children:[i.jsxs(Cp,{children:[i.jsx(Ep,{children:"Are you sure?"}),i.jsxs(Pp,{children:["This action cannot be undone. This will permanently delete ",n.length," contact",n.length>1?"s":"","."]})]}),i.jsxs(Ap,{children:[i.jsx(Op,{children:"Cancel"}),i.jsxs(Tp,{onClick:se,className:"bg-red-600 hover:bg-red-700",children:["Delete ",n.length," Contact",n.length>1?"s":""]})]})]})}),i.jsx(mn,{open:_,onOpenChange:S,children:i.jsxs(cn,{children:[i.jsx(un,{children:i.jsx(dn,{children:"Edit Contact"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(Be,{children:"Name"}),i.jsx(Ve,{value:E,onChange:ve=>N(ve.target.value),placeholder:"Full name"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Be,{children:"Phone"}),i.jsx(Ve,{value:I,onChange:ve=>P(ve.target.value),placeholder:"Phone number"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Be,{children:"Notes"}),i.jsx($a,{value:D,onChange:ve=>L(ve.target.value),placeholder:"Notes"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx(Z,{variant:"outline",onClick:()=>S(!1),disabled:B,children:"Cancel"}),i.jsx(Z,{onClick:be,disabled:B,className:"bg-blue-600 hover:bg-blue-700",children:B?"Saving":"Save"})]})]})]})}),i.jsx(mn,{open:$,onOpenChange:O,children:i.jsxs(cn,{className:"max-w-2xl",children:[i.jsx(un,{children:i.jsxs(dn,{className:"flex items-center gap-3",children:[i.jsx(zr,{className:"h-10 w-10",children:i.jsx(qr,{children:((Ot=(he=T==null?void 0:T.name)==null?void 0:he[0])==null?void 0:Ot.toUpperCase())||((wt=(vt=T==null?void 0:T.phone)==null?void 0:vt[0])==null?void 0:wt.toUpperCase())||"?"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:(T==null?void 0:T.name)||"Unnamed Contact"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact Details"})]})]})}),T&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Name"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uv,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:T.name||"Unnamed Contact"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(GV,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:T.phone||"-"}),T.phone&&i.jsx(Z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{navigator.clipboard.writeText(T.phone),Ie.success("Phone copied to clipboard")},children:i.jsx(Q0,{className:"h-3 w-3"})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),i.jsx("div",{className:"p-3 bg-muted rounded-md",children:T.notes?i.jsx("p",{className:"text-sm",children:T.notes}):i.jsx("span",{className:"text-muted-foreground text-sm",children:"No notes"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Label Names"}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{children:T.labelNames||"-"})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Inbox"}),i.jsx("div",{className:"flex items-center gap-2",children:T.inbox?i.jsx(It,{variant:"outline",children:T.inbox}):i.jsx("span",{className:"text-muted-foreground",children:""})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Chat Status"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(lv,{className:"h-4 w-4 text-muted-foreground"}),Ue(T.chatStatus)]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Handled By"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uv,{className:"h-4 w-4 text-muted-foreground"}),T.handledBy&&T.handledBy!==""?i.jsx(It,{className:"bg-purple-100 text-purple-700 border-0",children:T.handledBy}):i.jsx("span",{className:"text-muted-foreground",children:""})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Contact Created At"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gh,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-sm",children:T.created_at?new Date(T.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Chat Created At"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gh,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-sm",children:T.chatCreatedAt||"-"})]})]})]}),t&&T&&i.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[i.jsxs(Be,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[i.jsx(qL,{className:"h-4 w-4"}),"Contact UUID"]}),i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-md",children:[i.jsx("code",{className:"flex-1 font-mono text-xs text-foreground break-all",children:T.id}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 flex-shrink-0",onClick:()=>{navigator.clipboard.writeText(T.id),Ie.success("Contact UUID copied to clipboard")},children:i.jsx(Q0,{className:"h-4 w-4"})})}),i.jsx(le,{children:"Copy UUID"})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique identifier for this contact. Use this UUID for GDPR deletion requests or system integrations."})]}),i.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[i.jsxs(Z,{onClick:()=>z(T),className:"flex-1",children:[i.jsx(Bo,{className:"h-4 w-4 mr-2"}),"View Conversation"]}),i.jsxs(Z,{variant:"outline",onClick:()=>ae(T),className:"flex-1",children:[i.jsx(ga,{className:"h-4 w-4 mr-2"}),"Edit Contact"]})]})]})]})})]})}const WU=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),o=async()=>{try{r(!0),s(null);const{data:{user:d}}=await ne.auth.getUser();if(!d){t([]);return}const{data:h,error:m}=await ne.from("org_members").select("org_id").eq("user_id",d.id);if(m||!h||h.length===0){t([]);return}const g=h.map(P=>P.org_id),{data:v}=await ne.from("user_roles").select("role_id").eq("user_id",d.id);let x=!1,y=!1,b=!1;if(v&&v.length>0){const P=v.map(B=>B.role_id),{data:D}=await ne.from("roles").select("id, name").in("id",P),L=(D||[]).map(B=>(B.name||"").toLowerCase());x=L.includes("master_agent"),y=L.includes("super_agent"),b=L.includes("agent")&&!x&&!y}let w=null;if(b){const{data:P}=await ne.from("channel_agents").select("channel_id").eq("user_id",d.id);w=new Set((P||[]).map(D=>D.channel_id))}const{data:j,error:k}=await ne.from("channels").select(`
          *
        `).in("org_id",g).order("created_at",{ascending:!1});if(k){console.error("Error fetching channels:",k),s(k.message);return}const{data:_,error:S}=await ne.from("org_members").select(`
          org_id,
          user_id,
          role,
          v_users!inner (
            display_name,
            email
          )
        `).in("org_id",g);S&&console.error("Error fetching org members for platforms:",S);const E={};for(const P of _||[]){const D=P.org_id;E[D]||(E[D]=[]),E[D].push(P)}const N=(j||[]).filter(P=>w?w.has(P.id):!0),I=await Promise.all(N.map(async P=>{try{const{data:D}=await ne.from("channel_agents").select("user_id").eq("channel_id",P.id),L=(D||[]).map($=>$.user_id);let B=[];if(L.length>0){const[$,O]=await Promise.all([ne.from("users_profile").select("user_id, display_name").in("user_id",L),ne.from("v_users").select("id, display_name, email").in("id",L)]),T=$.data||[],R=O.data||[],C={};R.forEach(F=>{C[F.id]={display_name:F.display_name,email:F.email}}),T.forEach(F=>{var M,A;C[F.user_id]={display_name:F.display_name??((M=C[F.user_id])==null?void 0:M.display_name),email:(A=C[F.user_id])==null?void 0:A.email}}),B=Object.entries(C).map(([F,M])=>({user_id:F,...M}))}const U=L.map($=>{const O=B.find(T=>T.user_id===$||T.id===$)||{};return{user_id:$,display_name:O.display_name||(O==null?void 0:O.display_name),email:O.email}});return{...P,provider:P.provider,status:P.is_active?"active":"inactive",human_agents:U,super_agent_id:P.super_agent_id??null,credentials:(P==null?void 0:P.credentials)??null}}catch{return{...P,provider:P.provider,status:P.is_active?"active":"inactive",human_agents:[],super_agent_id:P.super_agent_id??null,credentials:(P==null?void 0:P.credentials)??null}}}));t(I)}catch(d){console.error("Error fetching platforms:",d),s("Failed to fetch platforms")}finally{r(!1)}},l=async d=>{var h;try{s(null);const{data:{user:m}}=await ne.auth.getUser();if(!m)throw new Error("User not authenticated");const{data:g,error:v}=await ne.from("org_members").select("org_id").eq("user_id",m.id).limit(1);if(v)throw v;const x=(h=g==null?void 0:g[0])==null?void 0:h.org_id;if(!x)throw new Error("User not found in any organization");if(!d.ai_profile_id)throw new Error("AI agent is required when creating a platform");const{data:y,error:b}=await ne.from("ai_profiles").select("super_agent_id").eq("id",d.ai_profile_id).single();if(b)throw b;const w=y==null?void 0:y.super_agent_id;if(!w)throw new Error("Selected AI agent does not have a super agent assigned. Please update the AI agent first.");const{data:j,error:k}=await ne.from("channels").insert({org_id:x,display_name:d.display_name,credentials:{},provider:d.provider,type:"inbox",profile_photo_url:d.profile_photo_url,ai_profile_id:d.ai_profile_id,super_agent_id:w,is_active:!0}).select().single();if(k)throw k;if(d.human_agent_ids&&d.human_agent_ids.length>0){const _=d.human_agent_ids.map(E=>({channel_id:j.id,user_id:E})),{error:S}=await ne.from("channel_agents").insert(_);S&&console.warn("Failed to attach channel agents on create:",S)}await o();try{await Wt({action:"channel.create",resource:"channel",resourceId:(j==null?void 0:j.id)??null,context:{...d,super_agent_id:w}})}catch{}return j}catch(m){throw console.error("Error creating platform:",m),s(m.message||"Failed to create platform"),m}},c=async(d,h)=>{try{s(null);const m={};if(typeof h.display_name<"u"&&(m.display_name=h.display_name),typeof h.profile_photo_url<"u"&&(m.profile_photo_url=h.profile_photo_url),typeof h.ai_profile_id<"u"&&(m.ai_profile_id=h.ai_profile_id,h.ai_profile_id)){const{data:g,error:v}=await ne.from("ai_profiles").select("super_agent_id").eq("id",h.ai_profile_id).single();if(v)throw v;const x=g==null?void 0:g.super_agent_id;if(!x)throw new Error("Selected AI agent does not have a super agent assigned. Please update the AI agent first.");m.super_agent_id=x}if(typeof h.provider<"u"&&(m.provider=h.provider),Object.keys(m).length>0){const{error:g}=await ne.from("channels").update(m).eq("id",d);if(g)throw g}if(h.human_agent_ids!==void 0){const{error:g}=await ne.from("channel_agents").delete().eq("channel_id",d);if(g&&console.error("Error removing human agents:",g),h.human_agent_ids.length>0){const v=h.human_agent_ids.map(y=>({channel_id:d,user_id:y})),{error:x}=await ne.from("channel_agents").insert(v);x&&console.error("Error adding human agents:",x)}}await o();try{await Wt({action:"channel.update",resource:"channel",resourceId:d,context:h})}catch{}}catch(m){throw console.error("Error updating platform:",m),s(m.message||"Failed to update platform"),m}},u=async(d,h,m)=>{const g=[/^image\//i],v=/\.(png|jpe?g|webp)$/i;if(!(g.some(w=>w.test(h.type||""))||v.test(h.name||"")))throw new Error("Only image files are allowed (PNG, JPG, WEBP).");const y=5*1024*1024;if(typeof h.size=="number"&&h.size>y)throw new Error("Image is too large. Maximum size is 5 MB.");async function b(w){try{if(typeof window>"u")return null;const j=document.createElement("img"),k=URL.createObjectURL(w);try{await new Promise((N,I)=>{j.onload=()=>N(),j.onerror=I,j.src=k})}finally{URL.revokeObjectURL(k)}const _=document.createElement("canvas");_.width=j.naturalWidth||j.width,_.height=j.naturalHeight||j.height;const S=_.getContext("2d");return S?(S.drawImage(j,0,0,_.width,_.height),await new Promise(N=>_.toBlob(I=>N(I),"image/png"))):null}catch{return null}}try{const{data:{user:w}}=await ne.auth.getUser();if(!w)throw new Error("User not authenticated");let j=m||"";if(!j){const{data:B,error:U}=await ne.from("channels").select("org_id").eq("id",d).single();if(U)throw U;j=B==null?void 0:B.org_id}if(!j)throw new Error("Missing org_id for channel");const k="channel-assets",_=`${j}/${d}/profile/avatar.png`,S=await b(h),E=S||h,N=S?"image/png":h.type||"image/*",{error:I}=await ne.storage.from(k).upload(_,E,{cacheControl:"31536000",upsert:!0,contentType:N});if(I)throw I;const{data:P}=ne.storage.from(k).getPublicUrl(_),D=P==null?void 0:P.publicUrl,{error:L}=await ne.from("channels").update({logo_url:D,profile_photo_url:D}).eq("id",d);if(L)throw L;try{await Wt({action:"channel.avatar.update",resource:"channel",resourceId:d,context:{objectPath:_}})}catch{}return D}catch(w){throw console.error("Error uploading channel avatar:",w),new Error((w==null?void 0:w.message)||"Failed to upload channel avatar")}},f=async(d,h)=>{try{const{data:{user:m}}=await ne.auth.getUser();if(!m)throw new Error("User not authenticated");let g=h||"";if(!g){const{data:b,error:w}=await ne.from("channels").select("org_id").eq("id",d).single();if(w)throw w;g=b==null?void 0:b.org_id}if(!g)throw new Error("Missing org_id for channel");const v="channel-assets",x=`${g}/${d}/profile/avatar.png`;try{await ne.storage.from(v).remove([x])}catch{}const{error:y}=await ne.from("channels").update({logo_url:null,profile_photo_url:null}).eq("id",d);if(y)throw y;try{await Wt({action:"channel.avatar.delete",resource:"channel",resourceId:d,context:{objectPath:x}})}catch{}}catch(m){throw console.error("Error deleting channel avatar:",m),new Error((m==null?void 0:m.message)||"Failed to delete channel avatar")}};return p.useEffect(()=>{o()},[]),{platforms:e,loading:n,error:a,fetchPlatforms:o,createPlatform:l,updatePlatform:c,uploadChannelAvatar:u,deleteChannelAvatar:f}},dle=()=>{const[e,t]=p.useState({}),[n,r]=p.useState(!1),[a,s]=p.useState(null),o=p.useCallback(async l=>{if(!l)return[];try{r(!0),s(null);const{data:c,error:u}=await ne.from("channels").select("*").eq("org_id",l).order("created_at",{ascending:!1});if(u)return s(u.message),[];const f=c||[];return t(d=>({...d,[l]:f})),f}catch(c){return s(c instanceof Error?c.message:"Failed to fetch channels"),[]}finally{r(!1)}},[]);return{channelsByOrg:e,loading:n,error:a,fetchByOrgId:o}};function wb({options:e,value:t,onChange:n,onValueChange:r,placeholder:a="Select...",disabled:s,className:o}){const[l,c]=p.useState(!1),u=new Set(t),f=g=>{n&&n(g),r&&r(g)},d=g=>{const v=new Set(u);v.has(g)?v.delete(g):v.add(g),f(Array.from(v))},h=e.filter(g=>u.has(g.value)).map(g=>g.label),m=h.length===0?a:`${h.length} selected`;return i.jsxs(ls,{open:l,onOpenChange:c,children:[i.jsx(cs,{asChild:!0,children:i.jsxs(Z,{type:"button",variant:"outline",role:"combobox","aria-expanded":l,disabled:s,className:xe("justify-between w-64",o),children:[i.jsx("span",{className:"truncate text-left",children:m}),i.jsx("span",{className:"ml-2 text-muted-foreground",children:""})]})}),i.jsx(Di,{className:"p-0 w-80",align:"start",onOpenAutoFocus:g=>g.preventDefault(),children:i.jsxs(Oc,{children:[i.jsx(Ic,{placeholder:"Search..."}),i.jsxs(mb,{children:[i.jsx(Rc,{children:"No results found."}),i.jsx(Mc,{children:e.map(g=>i.jsxs(Dc,{onSelect:v=>{d(g.value)},className:"cursor-pointer",children:[i.jsx("div",{className:"mr-2 flex h-4 w-4 items-center justify-center",onClick:v=>{v.preventDefault(),v.stopPropagation(),d(g.value)},children:i.jsx(hm,{checked:u.has(g.value),onCheckedChange:()=>d(g.value)})}),i.jsx("span",{children:g.label})]},g.value))})]})]})})]})}const fle=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=Vc(),{user:s}=Vr(),{hasPermission:o}=jr(),{aiAgents:l,loading:c}=Sp(),{agents:u,loading:f}=El(),[d,h]=p.useState({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,b]=p.useState(null),[w,j]=p.useState(null),[k,_]=p.useState(null);p.useRef(!1);const[S,E]=p.useState(!1),[N,I]=p.useState(!1),[P,D]=p.useState(null),L=o("channels.create");p.useMemo(()=>P&&u.find(F=>F.primaryRole==="super_agent"&&F.user_id===P)||null,[P,u]);const B="https://waha-plus-production-97c1.up.railway.app",U=async()=>{if(!s)return null;const{data:F}=await ne.from("org_members").select("org_id").eq("user_id",s.id).single();return(F==null?void 0:F.org_id)||null},$=async()=>{try{x(!0),_(null),b(null);const F=Yn.ENDPOINTS.WHATSAPP.CREATE_SESSION,M=`${Yn.BASE_URL}/2f6f9767-c3cb-4af3-b749-a496eefc2b74/waha`,A=(d.platformName||"default").replace(/\s/g,""),W={name:A,start:!0,config:{metadata:{"user.id":(s==null?void 0:s.id)||"","user.email":(s==null?void 0:s.email)||""},proxy:null,debug:!1,noweb:{store:{enabled:!0,fullSync:!1}},webhooks:[{url:M,events:["message","session.status","message.reaction","message.any","message.ack","message.waiting","message.revoked","state.change","group.join","group.leave","presence.update","poll.vote","poll.vote.failed","chat.archive","call.received","call.accepted","call.rejected","label.upsert","label.deleted","label.chat.added","label.chat.deleted","engine.event"],hmac:null,retries:null,customHeaders:null}]}};try{const H=await wa(F,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)});if(!H.ok){const Q=await H.text();if(H.status!==409)throw new Error(`Create session failed (${H.status}): ${Q||"Unknown error"}`)}}catch(H){throw H}const G=await wa(Yn.ENDPOINTS.WHATSAPP.GET_LOGIN_QR,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:A})});if(!G.ok)throw new Error(`Request failed with status ${G.status}`);const Y=G.headers.get("content-type");if(Y&&Y.includes("image/")){const H=await G.blob(),Q=URL.createObjectURL(H);return b(Q),j(A),x(!1),{qr:Q,sessionName:A}}else try{const H=await G.json(),Q=Array.isArray(H)?H[0]:H;if(!Q||!Q.data||!Q.mimetype)throw new Error("Invalid QR response shape");const X=`data:${Q.mimetype};base64,${Q.data}`;return b(X),j(A),x(!1),{qr:X,sessionName:A}}catch{const Q=await G.text();if(Q&&Q.length>0){const X=`data:image/png;base64,${Q}`;return b(X),j(A),x(!1),{qr:X,sessionName:A}}else throw new Error("Invalid response format")}return x(!1),null}catch(F){return _((F==null?void 0:F.message)||"Failed to generate QR"),x(!1),null}},O=async()=>{try{const M=await(async()=>{if(w&&w.trim().length>0)return w;try{const G=await U();if(!G)return"default";const{data:Y}=await ne.from("channels").select("display_name, provider").eq("org_id",G).eq("provider","whatsapp").order("created_at",{ascending:!1}).limit(1).maybeSingle();return((Y==null?void 0:Y.display_name)||"").replace(/\s/g,"")||"default"}catch{return"default"}})(),A=`${B}/api/sessions/${encodeURIComponent(M)}`,W=await fetch(A,{method:"GET",headers:{"Content-Type":"application/json"}});if(W.ok){const G=await W.json();return G&&G.status==="WORKING"&&G.me&&G.me.id?(g(!0),b(null),a({title:"Success",description:"WhatsApp connected successfully!"}),!0):(g(!1),!1)}return!1}catch(F){return console.error("Error checking session status:",F),!1}};p.useEffect(()=>{if(!y||m)return;const F=setInterval(async()=>{await O()&&clearInterval(F)},5e3);return()=>clearInterval(F)},[y,m]);const T=!!(d.platformName&&d.selectedAIAgent&&P&&L),R=async()=>{try{E(!0)}finally{E(!1),h({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),g(!1),x(!1),b(null),_(null),D(null),t()}},C=async()=>{try{if(I(!0),!L){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"}),I(!1);return}if(!P||!d.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"}),I(!1);return}if(!await U())throw new Error("User not found in any organization");const M=await $(),A={...d,phoneNumber:void 0,platformType:"whatsapp",selectedSuperAgentId:P};if(await n(A),a({title:"Success",description:"Channel successfully created."}),M)try{window.dispatchEvent(new CustomEvent("open-wa-qr",{detail:{sessionName:M.sessionName,qr:M.qr}}))}catch{}try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}t(),h({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),D(null)}catch(F){console.error("Error submitting form:",F),a({title:"Error",description:F.message||"Failed to create WhatsApp platform",variant:"destructive"})}finally{I(!1)}};return i.jsx(mn,{open:e,onOpenChange:t,children:i.jsx(cn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Setup WhatsApp Platform"}),i.jsx(Er,{children:"Configure your new WhatsApp platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"platformName",children:"Platform Name *"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama platform atau merek yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(Ve,{id:"platformName",placeholder:"Enter your platform or brand name",value:d.platformName,onChange:F=>h(M=>({...M,platformName:F.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di WhatsApp Business"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:d.profilePhoto?i.jsx("img",{src:URL.createObjectURL(d.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx(kc,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Ve,{id:"profilePhoto",type:"file",accept:"image/*",onChange:F=>{var A;const M=((A=F.target.files)==null?void 0:A[0])||null;h(W=>({...W,profilePhoto:M}))},className:"hidden"}),i.jsxs(Z,{variant:"outline",onClick:()=>{var F;return(F=document.getElementById("profilePhoto"))==null?void 0:F.click()},children:[i.jsx(kc,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"description",children:"Description"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx($a,{id:"description",placeholder:"Describe your business and what you offer",value:d.description,onChange:F=>h(M=>({...M,description:F.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-xs font-medium text-emerald-700",children:"Super Agent (1 max)"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform WhatsApp ini"})})]})]}),f?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(Ut,{value:P||"",onValueChange:F=>{D(F),h(M=>({...M,selectedAIAgent:"",selectedHumanAgents:[]}))},children:[i.jsx(Dt,{children:i.jsx(Rt,{placeholder:"Choose a Super Agent"})}),i.jsx($t,{className:"bg-background border z-50",children:u.filter(F=>F.primaryRole==="super_agent").map(F=>i.jsx(De,{value:F.user_id,children:F.display_name||F.email||F.user_id.slice(0,8)},F.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform WhatsApp ini"})})]})]}),c?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Ut,{value:d.selectedAIAgent,onValueChange:F=>{const M=l.find(A=>A.id===F);if(!P){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!M||M.super_agent_id!==P){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}h(A=>({...A,selectedAIAgent:F,selectedHumanAgents:[]}))},children:[i.jsx(Dt,{children:i.jsx(Rt,{placeholder:P?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx($t,{className:"bg-background border z-50",children:l.filter(F=>P?F.super_agent_id===P:!1).map(F=>i.jsx(De,{value:F.id,children:F.name},F.id))})]})]}),d.selectedAIAgent&&!P&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{children:"Assign Agents"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-xs font-medium",children:["Agents ",P?"":"(select an AI agent first)"]}),(()=>{const M=u.filter(A=>A.primaryRole==="agent").filter(A=>!!P&&A.super_agent_id===P).map(A=>({value:A.user_id,label:A.display_name||A.email||`Agent ${A.user_id.slice(0,8)}`}));return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wb,{options:M,value:d.selectedHumanAgents,onValueChange:A=>h(W=>({...W,selectedHumanAgents:A})),disabled:!P,placeholder:P?"Select human agents":"Select an AI agent first"}),i.jsx(Z,{type:"button",variant:"outline",disabled:!P||M.length===0,onClick:()=>h(A=>({...A,selectedHumanAgents:M.map(W=>W.value)})),children:"Select All"}),i.jsx(Z,{type:"button",variant:"ghost",disabled:!P||d.selectedHumanAgents.length===0,onClick:()=>h(A=>({...A,selectedHumanAgents:[]})),children:"Unselect All"})]})})()]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(Z,{variant:"outline",onClick:R,disabled:r||S,className:"text-blue-700 border-blue-200 hover:bg-blue-50",children:S?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Cancelling..."]}):"Cancel"}),i.jsx(Z,{onClick:C,disabled:r||N||!T,className:"bg-blue-100 hover:bg-blue-200 text-blue-700 transition-all duration-200 hover:shadow-md active:scale-[.98]","aria-busy":r||N,children:r||N?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create WhatsApp Platform"})]})]})})})},hle=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=Vc(),{user:s}=Vr(),{hasPermission:o}=jr(),{aiAgents:l,loading:c}=Sp(),{agents:u,loading:f}=El(),{uploadChannelAvatar:d}=WU(),[h,m]=p.useState({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[g,v]=p.useState(!1),[x,y]=p.useState(null),[b,w]=p.useState(!1),[j,k]=p.useState(null),_=(h.telegramBotToken||"").trim(),S=!!j&&j===_,E=o("channels.create"),N=p.useMemo(()=>x&&u.find(B=>B.primaryRole==="super_agent"&&B.user_id===x)||null,[x,u]),I=!!(h.displayName&&h.selectedAIAgent&&h.telegramBotToken&&x&&E&&S),P=async()=>{if(!s)return null;const{data:B}=await ne.from("org_members").select("org_id").eq("user_id",s.id).single();return(B==null?void 0:B.org_id)||null},D=async()=>{const B=(h.telegramBotToken||"").trim();if(!B){a({title:"Telegram bot token required",description:"Enter your BotFather token before validating.",variant:"destructive"});return}try{w(!0);const U=await P(),$={telegram_bot_token:B};U&&($.org_id=U);const O=await wa(Yn.ENDPOINTS.TELEGRAM.VERIFY_TOKEN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});let T=null;try{const C=await O.text();T=C?JSON.parse(C):null}catch{throw new Error("Token is invalid")}if(!O.ok)throw new Error("Token is invalid");if(T===null||typeof T!="object"||Array.isArray(T))throw new Error("Token is invalid");const R=T.valid;if(typeof R!="boolean")throw new Error("Token is invalid");if(R!==!0)throw new Error("Token is invalid");k(B),a({title:"Token validated",description:"Telegram bot token has been successfully verified."})}catch(U){console.error("Telegram token validation failed:",U),k(null);const $=U&&typeof U.message=="string"?U.message:"",O=String($).toLowerCase();a({title:"Validation failed",description:O.includes("empty")||O.includes("required")?$||"Telegram bot token is required":"Token is invalid",variant:"destructive"})}finally{w(!1)}},L=async()=>{var B;try{if(g)return;if(v(!0),!E){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"}),v(!1);return}if(!x||!h.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"}),v(!1);return}if(!S){a({title:"Token validation required",description:"You must validate the Telegram bot token before creating this platform.",variant:"destructive"}),v(!1);return}const U=await P();if(!U)throw new Error("User not found in any organization");const $=(h.telegramBotToken||"").trim();if(!$)throw new Error("Telegram bot token is required");try{const{data:C}=await ne.from("channels").select("id").eq("provider","telegram").eq("external_id",$).limit(1);if(Array.isArray(C)&&C.length>0){a({title:"Duplicate token",description:"A Telegram bot with this BotFather token already exists.",variant:"destructive"}),v(!1);return}}catch{}const O={brand_name:h.displayName,display_name:h.displayName,description:h.description,telegram_bot_token:h.telegramBotToken,ai_profile_id:h.selectedAIAgent,human_agent_ids:h.selectedHumanAgents,super_agent_id:x,org_id:U,platform_type:"telegram"},T=await wa(Yn.ENDPOINTS.TELEGRAM.CREATE_PLATFORM,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!T.ok)throw new Error(`Telegram webhook failed with status ${T.status}`);let R=null;try{if((T.headers.get("content-type")||"").includes("application/json"))R=await T.json();else{const F=await T.text();try{R=F?JSON.parse(F):null}catch{R={raw:F||null}}}}catch{R=null}try{if(h.profilePhoto){let C=(R==null?void 0:R.channel_id)||(R==null?void 0:R.id)||((B=R==null?void 0:R.channel)==null?void 0:B.id)||null;if(!C){const{data:F}=await ne.from("channels").select("id").eq("org_id",U).eq("provider","telegram").eq("external_id",$).limit(1).maybeSingle();C=(F==null?void 0:F.id)||null}C&&await d(C,h.profilePhoto,U)}}catch(C){console.warn("Telegram avatar upload failed:",C)}a({title:"Success",description:"Telegram channel created successfully"});try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}t(),m({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),y(null)}catch(U){console.error("Error submitting form:",U),a({title:"Error",description:U.message||"Failed to create Telegram platform",variant:"destructive"})}finally{v(!1)}};return i.jsx(mn,{open:e,onOpenChange:t,children:i.jsx(cn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Setup Telegram Bot Platform"}),i.jsx(Er,{children:"Configure your new Telegram bot platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"displayName",children:"Display Name *"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama yang akan ditampilkan di widget chat Telegram"})})]})]}),i.jsx(Ve,{id:"displayName",placeholder:"Enter the display name",value:h.displayName,onChange:B=>m(U=>({...U,displayName:B.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"description",children:"Description"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx($a,{id:"description",placeholder:"Describe your business and what you offer",value:h.description,onChange:B=>m(U=>({...U,description:B.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di bot Telegram"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:h.profilePhoto?i.jsx("img",{src:URL.createObjectURL(h.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx(kc,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Ve,{id:"profilePhoto",type:"file",accept:"image/*",onChange:B=>{var $;const U=(($=B.target.files)==null?void 0:$[0])||null;m(O=>({...O,profilePhoto:U}))},className:"hidden"}),i.jsxs(Z,{variant:"outline",onClick:()=>{var B;return(B=document.getElementById("profilePhoto"))==null?void 0:B.click()},children:[i.jsx(kc,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/50",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx(Be,{className:"text-sm font-medium",children:"Telegram Bot Setup"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Follow these steps to set up your Telegram bot"})]})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 1: Create a bot with BotFather"}),i.jsxs("ol",{className:"list-decimal list-inside text-xs space-y-1 ml-2",children:[i.jsx("li",{children:"Open Telegram and search for @BotFather"}),i.jsx("li",{children:"Send /newbot command"}),i.jsx("li",{children:"Choose a name for your bot (organization name)"}),i.jsx("li",{children:"Choose a username (must end with 'bot')"}),i.jsx("li",{children:"Copy the bot token provided"})]})]}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 2: Configure bot settings"}),i.jsxs("ol",{className:"list-decimal list-inside text-xs space-y-1 ml-2",children:[i.jsx("li",{children:"Send /setdescription to set bot description"}),i.jsx("li",{children:"Send /setabouttext to set about text"}),i.jsx("li",{children:"Send /setcommands to set available commands"})]})]}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 3: Enable webhook (optional)"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Your bot will automatically receive messages once connected to our platform."})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"telegramBotToken",children:"Telegram Bot Token *"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Token bot Telegram yang diperoleh dari @BotFather untuk mengautentikasi bot"})})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ve,{id:"telegramBotToken",type:"password",placeholder:"1234567890:ABCdefGHIjklMNOpqrsTUVwxyz",value:h.telegramBotToken,onChange:B=>{const U=B.target.value;m($=>({...$,telegramBotToken:U})),k(null)},className:"flex-1"}),i.jsx(Z,{type:"button",variant:S?"outline":"default",className:S?"border-emerald-600 text-emerald-700 hover:bg-emerald-50":"",onClick:D,disabled:b||!h.telegramBotToken,children:b?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"}),"Validating"]}):"Validate"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Get this token from @BotFather on Telegram. Format: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"}),S&&i.jsx("p",{className:"text-xs text-emerald-600",children:"Bot token validated. You can now create this Telegram platform."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{children:"Super Agent *"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform Telegram ini"})})]})]}),f?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(Ut,{value:x||"",onValueChange:B=>{y(B),m(U=>({...U,selectedAIAgent:"",selectedHumanAgents:[]}))},children:[i.jsx(Dt,{children:i.jsx(Rt,{placeholder:"Choose a Super Agent"})}),i.jsx($t,{className:"bg-background border z-50",children:u.filter(B=>B.primaryRole==="super_agent").map(B=>i.jsx(De,{value:B.user_id,children:B.display_name||B.email||B.user_id.slice(0,8)},B.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform Telegram ini"})})]})]}),c?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Ut,{value:h.selectedAIAgent,onValueChange:B=>{const U=l.find($=>$.id===B);if(!x){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!U||U.super_agent_id!==x){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}m($=>({...$,selectedAIAgent:B,selectedHumanAgents:[]}))},children:[i.jsx(Dt,{children:i.jsx(Rt,{placeholder:x?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx($t,{className:"bg-background border z-50",children:l.filter(B=>x?B.super_agent_id===x:!1).map(B=>i.jsx(De,{value:B.id,children:B.name},B.id))})]}),x&&i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-md bg-muted px-3 py-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:"Super Agent:"}),i.jsx("span",{className:"font-medium",children:(N==null?void 0:N.display_name)||(N==null?void 0:N.email)||x.slice(0,8)})]})]}),h.selectedAIAgent&&!x&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{children:"Select Human Agents (optional)"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):(()=>{const U=u.filter($=>$.primaryRole==="agent").filter($=>!!x&&$.super_agent_id===x).map($=>({value:$.user_id,label:$.display_name||$.email||`Agent ${$.user_id.slice(0,8)}`}));return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wb,{options:U,value:h.selectedHumanAgents,onValueChange:$=>m(O=>({...O,selectedHumanAgents:$})),disabled:!x,placeholder:x?"Select human agents":"Select an AI agent first"}),i.jsx(Z,{type:"button",variant:"outline",disabled:!x||U.length===0,onClick:()=>m($=>({...$,selectedHumanAgents:U.map(O=>O.value)})),children:"Select All"}),i.jsx(Z,{type:"button",variant:"ghost",disabled:!x||h.selectedHumanAgents.length===0,onClick:()=>m($=>({...$,selectedHumanAgents:[]})),children:"Unselect All"})]})})()]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(Z,{variant:"outline",onClick:()=>{g||(m({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),y(null),t())},disabled:r||g,children:"Cancel"}),i.jsx(Z,{onClick:L,disabled:r||g||!I,className:"bg-blue-600 hover:bg-blue-700 text-white",children:r||g?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"})," Creating..."]}):"Create Telegram Bot Platform"})]})]})})})},mle=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=Vc();Vr();const{hasPermission:s}=jr(),{aiAgents:o,loading:l}=Sp(),{agents:c,loading:u}=El(),[f,d]=p.useState({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[h,m]=p.useState(!1),[g,v]=p.useState(null),x=s("channels.create"),y=p.useMemo(()=>g&&c.find(k=>k.primaryRole==="super_agent"&&k.user_id===g)||null,[g,c]),b=!!(f.displayName&&g&&f.selectedAIAgent&&x),w=async()=>{try{if(h)return;if(!x){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"});return}if(!g||!f.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"});return}m(!0);const k={...f,platformType:"web",selectedSuperAgentId:g};await n(k);try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}d({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),v(null),t()}catch(k){console.error("Error submitting form:",k)}finally{m(!1)}},j=()=>{h||(d({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),v(null),t())};return i.jsx(mn,{open:e,onOpenChange:t,children:i.jsx(cn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Setup Web Live Chat Platform"}),i.jsx(Er,{children:"Configure your new web live chat platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"description",children:"Description"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx($a,{id:"description",placeholder:"Describe your business and what you offer",value:f.description,onChange:k=>d(_=>({..._,description:k.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di widget live chat"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:f.profilePhoto?i.jsx("img",{src:URL.createObjectURL(f.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx(kc,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Ve,{id:"profilePhoto",type:"file",accept:"image/*",onChange:k=>{var S;const _=((S=k.target.files)==null?void 0:S[0])||null;d(E=>({...E,profilePhoto:_}))},className:"hidden"}),i.jsxs(Z,{variant:"outline",onClick:()=>{var k;return(k=document.getElementById("profilePhoto"))==null?void 0:k.click()},children:[i.jsx(kc,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"displayName",children:"Display Name *"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama yang akan ditampilkan di widget live chat"})})]})]}),i.jsx(Ve,{id:"displayName",placeholder:"Name that will appear in the chat widget",value:f.displayName,onChange:k=>d(_=>({..._,displayName:k.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{children:"Super Agent *"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform Live Chat ini"})})]})]}),u?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(Ut,{value:g||"",onValueChange:k=>{v(k),d(_=>({..._,selectedAIAgent:"",selectedHumanAgents:[]}))},children:[i.jsx(Dt,{children:i.jsx(Rt,{placeholder:"Choose a Super Agent"})}),i.jsx($t,{className:"bg-background border z-50",children:c.filter(k=>k.primaryRole==="super_agent").map(k=>i.jsx(De,{value:k.user_id,children:k.display_name||k.email||k.user_id.slice(0,8)},k.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform Live Chat ini"})})]})]}),l?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Ut,{value:f.selectedAIAgent,onValueChange:k=>{const _=o.find(S=>S.id===k);if(!g){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!_||_.super_agent_id!==g){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}d(S=>({...S,selectedAIAgent:k,selectedHumanAgents:[]}))},children:[i.jsx(Dt,{children:i.jsx(Rt,{placeholder:g?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx($t,{className:"bg-background border z-50",children:o.filter(k=>g?k.super_agent_id===g:!1).map(k=>i.jsx(De,{value:k.id,children:k.name},k.id))})]}),g&&i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-md bg-muted px-3 py-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:"Super Agent:"}),i.jsx("span",{className:"font-medium",children:(y==null?void 0:y.display_name)||(y==null?void 0:y.email)||g.slice(0,8)})]})]}),f.selectedAIAgent&&!g&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{children:"Assign Agents"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),u?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-xs font-medium",children:["Agents ",g?"":"(select an AI agent first)"]}),(()=>{const _=c.filter(S=>S.primaryRole==="agent").filter(S=>!!g&&S.super_agent_id===g).map(S=>({value:S.user_id,label:S.display_name||S.email||`Agent ${S.user_id.slice(0,8)}`}));return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wb,{options:_,value:f.selectedHumanAgents,onValueChange:S=>d(E=>({...E,selectedHumanAgents:S})),disabled:!g,placeholder:g?"Select human agents":"Select an AI agent first"}),i.jsx(Z,{type:"button",variant:"outline",disabled:!g||_.length===0,onClick:()=>d(S=>({...S,selectedHumanAgents:_.map(E=>E.value)})),children:"Select All"}),i.jsx(Z,{type:"button",variant:"ghost",disabled:!g||f.selectedHumanAgents.length===0,onClick:()=>d(S=>({...S,selectedHumanAgents:[]})),children:"Unselect All"})]})})})()]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(Z,{variant:"outline",onClick:j,disabled:r||h,children:"Cancel"}),i.jsx(Z,{onClick:w,disabled:r||h||!b,children:r||h?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"})," Creating..."]}):"Create Web Live Chat Platform"})]})]})})})},ple=()=>{var ze;const{toast:e}=Vc(),{platforms:t,loading:n,error:r,createPlatform:a,fetchPlatforms:s,updatePlatform:o,uploadChannelAvatar:l,deleteChannelAvatar:c}=WU(),{aiAgents:u,loading:f}=Sp(),{agents:d,loading:h}=El(),{fetchByOrgId:m,channelsByOrg:g}=dle(),{hasRole:v}=jr(),[x,y]=p.useState(null),[b,w]=p.useState("whatsapp"),[j,k]=p.useState(""),[_,S]=p.useState(!1),[E,N]=p.useState(null),[I,P]=p.useState(!1),[D,L]=p.useState(!1),[B,U]=p.useState([]),[$,O]=p.useState(!1),[T,R]=p.useState(!1),[C,F]=p.useState(!1),M=p.useRef(null),[A,W]=p.useState([]),[G,Y]=p.useState(!1),[H,Q]=p.useState(null),[X,re]=p.useState(new Set),[fe,J]=p.useState(new Set),[ye,z]=p.useState(null),[q,ae]=p.useState(null),[se,be]=p.useState(null),[Se,Le]=p.useState(!1),[ge,We]=p.useState(null),dt=p.useRef(null),[bt,Et]=p.useState(!1),te="https://waha-plus-production-97c1.up.railway.app",me=p.useRef(null),Fe=p.useRef(!1),He=p.useRef(0);p.useEffect(()=>{t.length>0&&!x&&y(t[0].id)},[t,x]),p.useEffect(()=>{u.length>0&&!j&&k(u[0].id)},[u,j]);const Ue=ie=>{const Ne=ie==null?void 0:ie.provider;return Ne==="whatsapp"?"whatsapp":Ne==="telegram"?"telegram":"web"};p.useEffect(()=>{const ie=t.find(Ne=>Ue(Ne)===b);(!x||x&&t.find(Ne=>Ne.id===x&&Ue(Ne)!==b))&&y((ie==null?void 0:ie.id)||null)},[t,b]);const he=t.find(ie=>ie.id===x);p.useEffect(()=>{k(he&&(he==null?void 0:he.ai_profile_id)||"")},[he==null?void 0:he.id,he==null?void 0:he.ai_profile_id]),p.useEffect(()=>{const ie=Array.from(new Set(t.map(Ne=>Ne.org_id)));ie.length!==0&&Promise.resolve().then(()=>{ie.forEach(Ne=>{m(Ne)})})},[t]),p.useEffect(()=>{const ie=()=>{s()};return window.addEventListener("refresh-platforms",ie),()=>window.removeEventListener("refresh-platforms",ie)},[s]);const Ot=he?Ue(he):null,vt=(he==null?void 0:he.human_agents)||[],wt=v("master_agent")||v("super_agent"),_e=d.filter(ie=>ie.primaryRole==="agent"&&!vt.some(Ne=>Ne.user_id===ie.user_id)).map(ie=>({value:ie.user_id,label:ie.display_name||ie.email||ie.user_id.slice(0,8)})),$e=ie=>i.jsxs(i.Fragment,{children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-base flex items-center gap-2",children:["AI Agent",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform ini"})})]})]})}),i.jsx(Je,{children:f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Ut,{value:j||"",onValueChange:async Ne=>{he&&(await o(he.id,{ai_profile_id:Ne||void 0}),k(Ne))},children:[i.jsx(Dt,{children:i.jsx(Rt,{placeholder:"Choose an AI agent"})}),i.jsx($t,{children:u.map(Ne=>i.jsxs(De,{value:Ne.id,children:[" ",Ne.name]},Ne.id))})]})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-base flex items-center gap-2",children:["Super Agent",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform ini (hanya master agent yang dapat mengatur)"})})]})]})}),i.jsx(Je,{children:(()=>{const Ne=(he==null?void 0:he.super_agent_id)||null,et=(d||[]).find(pt=>pt.user_id===Ne&&pt.primaryRole==="super_agent")||null;return i.jsxs("div",{className:"text-sm space-y-2",children:[et?i.jsxs("div",{className:"inline-flex items-center gap-2 bg-muted px-3 py-1 rounded-md",children:[" ",et.display_name||et.email||et.user_id.slice(0,8)]}):i.jsx("span",{className:"text-muted-foreground",children:"No super agent assigned. Select an AI agent to link a super agent."}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Super agent assignment follows the selected AI agent. To change ownership, switch the AI agent for this platform."})]})})()})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-base flex items-center gap-2",children:["Human Agent",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]})}),i.jsxs(Je,{children:[h?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):vt.length>0?i.jsx("div",{className:"flex flex-wrap gap-2",children:vt.map(Ne=>i.jsxs("div",{className:"flex items-center gap-2 bg-muted px-3 py-1 rounded-md",children:[i.jsxs("span",{className:"text-sm",children:[" ",Ne.display_name||Ne.email||Ne.user_id]}),wt&&i.jsx(Z,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",disabled:D||!he,onClick:async()=>{if(he)try{L(!0);const Re=vt.filter(et=>et.user_id!==Ne.user_id).map(et=>et.user_id);await o(he.id,{human_agent_ids:Re})}finally{L(!1)}},children:i.jsx(lp,{className:"h-3 w-3"})})]},Ne.user_id))}):i.jsx("p",{className:"text-sm text-muted-foreground",children:"No agents connected"}),wt&&he&&i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsx(wb,{options:_e,value:B,onChange:U,placeholder:"Select human agents to add"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Kt,{permission:"channel_agents.update",children:i.jsx(Z,{variant:"outline",disabled:D||B.length===0,onClick:async()=>{if(he)try{L(!0);const Ne=vt.map(et=>et.user_id),Re=Array.from(new Set([...Ne,...B]));await o(he.id,{human_agent_ids:Re}),U([])}finally{L(!1)}},children:"Add selected"})})}),i.jsx(le,{children:i.jsx("p",{children:"Tambahkan agen manusia yang dipilih ke platform ini"})})]})]})]})]}),ie&&i.jsxs(i.Fragment,{children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-base flex items-center gap-2",children:["Link LiveChat",i.jsx(Me,{className:"h-4 w-4 text-muted-foreground"})]})}),i.jsx(Je,{children:i.jsx("div",{className:"bg-muted p-3 rounded-md",children:i.jsx(Ve,{value:`https://classy-frangollo-337599.netlify.app/livechat/${(he==null?void 0:he.id)||"{platform_id}"}`,readOnly:!0,className:"bg-background"})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-base flex items-center gap-2",children:["Embed Code",i.jsx(Me,{className:"h-4 w-4 text-muted-foreground"})]})}),i.jsx(Je,{children:i.jsx($a,{value:`<script>
(function(){
  // Lightweight chat embed - uses YOUR project's origin
  var w=window,d=document; if(w.chatWidgetLoaded) return; w.chatWidgetLoaded=true;
  var cfg=w.chatConfig||{}; cfg.baseUrl=cfg.baseUrl||'https://classy-frangollo-337599.netlify.app'; cfg.platformId=cfg.platformId||'${(he==null?void 0:he.id)||"{platform_id}"}';
  cfg.position=cfg.position||'bottom-right'; cfg.width=cfg.width||'360px'; cfg.height=cfg.height||'560px';
  var css='#chat-bubble{position:fixed;right:20px;bottom:20px;z-index:999999;background:#1d4ed8;color:#fff;border-radius:9999px;width:56px;height:56px;box-shadow:0 8px 20px rgba(0,0,0,.2);border:0;cursor:pointer;font-size:24px;line-height:56px;text-align:center}'+
           '#chat-panel{position:fixed;right:20px;bottom:92px;width:'+cfg.width+';height:'+cfg.height+';max-width:calc(100% - 40px);max-height:70vh;z-index:999999;box-shadow:0 10px 30px rgba(0,0,0,.25);border-radius:12px;overflow:hidden;opacity:0;transform:translateY(10px);pointer-events:none;transition:opacity .2s ease,transform .2s ease;background:#fff}'+
           '#chat-panel.open{opacity:1;transform:translateY(0);pointer-events:auto}';
  var s=d.createElement('style'); s.type='text/css'; s.appendChild(d.createTextNode(css)); d.head.appendChild(s);
  var bubble=d.createElement('button'); bubble.id='chat-bubble'; bubble.setAttribute('aria-label','Open chat'); bubble.innerHTML='';
  var panel=d.createElement('div'); panel.id='chat-panel';
  var iframe=d.createElement('iframe'); iframe.src=cfg.baseUrl+'/livechat/'+encodeURIComponent(cfg.platformId); iframe.style.width='100%'; iframe.style.height='100%'; iframe.style.border='0'; panel.appendChild(iframe);
  bubble.addEventListener('click',function(){ panel.classList.toggle('open'); });
  d.body.appendChild(bubble); d.body.appendChild(panel);
})();
<\/script>`,readOnly:!0,className:"font-mono text-xs h-48 bg-muted"})})]})]})]}),oe=ie=>{N(ie),S(!1)},Ze=async ie=>{try{P(!0);const Ne={display_name:ie.displayName||ie.platformName||ie.brandName,website_url:ie.websiteUrl||void 0,business_category:ie.businessCategory||void 0,description:ie.description||void 0,ai_profile_id:ie.selectedAIAgent||void 0,provider:E||"web",human_agent_ids:ie.selectedHumanAgents},Re=await a(Ne);if(Re&&ie.profilePhoto)try{await l(Re.id,ie.profilePhoto,Re.org_id)}catch(et){e({title:"Avatar upload failed",description:(et==null?void 0:et.message)||"Could not upload avatar",variant:"destructive"})}e({title:"Success",description:"Platform created successfully!"}),N(null)}catch(Ne){e({title:"Error",description:Ne.message||"Failed to create platform",variant:"destructive"})}finally{P(!1)}},Ke=async()=>{if(!Fe.current){Fe.current=!0,Y(!0),Q(null);try{const ie=`${te}/api/sessions`,Ne=await fetch(ie,{method:"GET",headers:{"Content-Type":"application/json"}});if(!Ne.ok)throw new Error(`Request failed with status ${Ne.status}`);const Re=await Ne.json(),et=Array.isArray(Re)?Re:[Re];W(et),await en(et),Date.now()>=He.current&&(He.current=Date.now()+2e3,await s())}catch(ie){Q((ie==null?void 0:ie.message)||"Failed to load sessions")}finally{Y(!1),Fe.current=!1}}},en=async ie=>{var Ne,Re;try{const{data:et}=await ne.auth.getUser(),pt=et==null?void 0:et.user;if(!pt)return;const{data:ee}=await ne.from("org_members").select("org_id").eq("user_id",pt.id).limit(1),ke=(Ne=ee==null?void 0:ee[0])==null?void 0:Ne.org_id;if(!ke)return;const{data:st}=await ne.from("channels").select("id, display_name, provider").eq("org_id",ke).eq("provider","whatsapp");for(const nt of ie){const Ft=(nt==null?void 0:nt.name)||"";if(!Ft)continue;const Rn=String((nt==null?void 0:nt.status)||"").toUpperCase(),Cn=((Re=nt==null?void 0:nt.me)==null?void 0:Re.id)||null,An=Rn==="WORKING"&&!!Cn,bi=(Ft||"").toLowerCase().replace(/\s/g,""),Gr=(st||[]).find(Dl=>(Dl.display_name||"").toLowerCase().replace(/\s/g,"")===bi);Gr&&await ne.from("channels").update({is_active:An,external_id:Cn,credentials:{waha_status:(nt==null?void 0:nt.status)||null,me_id:Cn}}).eq("id",Gr.id)}}catch(et){console.error("Failed to sync sessions to channels",et)}};p.useEffect(()=>{Ot==="whatsapp"&&me.current!=="whatsapp"&&(me.current="whatsapp",Ke()),Ot!=="whatsapp"&&(me.current=Ot||null)},[Ot]),p.useEffect(()=>{const ie=Ne=>{const Re=(Ne==null?void 0:Ne.detail)||{};ae(Re.qr||null),Re.sessionName&&We(Re.sessionName),Le(!0)};return window.addEventListener("open-wa-qr",ie),()=>window.removeEventListener("open-wa-qr",ie)},[]),p.useEffect(()=>((()=>{if(!ge||!Se)return;const Ne=async()=>{var Re;try{if(!ge)return;const et=`${te}/api/sessions/${encodeURIComponent(ge)}`,pt=await fetch(et,{method:"GET",headers:{"Content-Type":"application/json"}});if(!pt.ok)return;const ee=await pt.json(),ke=String((ee==null?void 0:ee.status)||"").toUpperCase();if(!!((Re=ee==null?void 0:ee.me)!=null&&Re.id)&&ke==="WORKING"){Le(!1),ae(null),await Ke();try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}e({title:"Connected",description:"WhatsApp connected successfully."})}}catch{}};Ne(),dt.current=window.setInterval(Ne,3e3)})(),()=>{dt.current&&(clearInterval(dt.current),dt.current=null)}),[Se,ge]);const _t=async ie=>{z(ie),be(null),ae(null),Le(!0),We(ie);try{const Ne=await wa(Yn.ENDPOINTS.WHATSAPP.GET_LOGIN_QR,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:ie})});if(!Ne.ok)throw new Error(`QR request failed: ${Ne.status}`);const Re=Ne.headers.get("content-type");if(Re&&Re.includes("image/")){const et=await Ne.blob();ae(URL.createObjectURL(et))}else try{const et=await Ne.json(),pt=Array.isArray(et)?et[0]:et;if(!(pt!=null&&pt.data)||!(pt!=null&&pt.mimetype))throw new Error("Invalid QR");ae(`data:${pt.mimetype};base64,${pt.data}`)}catch{const et=await Ne.text();et&&ae(`data:image/png;base64,${et}`)}}catch(Ne){be((Ne==null?void 0:Ne.message)||"Failed to get QR")}finally{z(null)}},ut=async ie=>{if(!ie)throw new Error("Missing channel");const Ne=Ue(ie);if(Ne==="telegram"){const et=await wa(Yn.ENDPOINTS.TELEGRAM.DELETE_WEBHOOK,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_id:ie.id,org_id:ie.org_id,bot_token:(ie==null?void 0:ie.external_id)||null})});if(!et.ok){const pt=await et.text().catch(()=>"");throw new Error(pt||`Telegram delete failed (${et.status})`)}return}if(Ne==="whatsapp"){const et=String((ie==null?void 0:ie.display_name)||"").toLowerCase().replace(/\s/g,""),pt=await wa(Yn.ENDPOINTS.WHATSAPP.DELETE_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:et})});if(!pt.ok){const ee=await pt.text().catch(()=>"");throw new Error(ee||`WhatsApp delete failed (${pt.status})`)}return}const{error:Re}=await ne.from("channels").delete().eq("id",ie.id);if(Re)throw Re},Lt=async ie=>{var Ne;if(ie){re(Re=>new Set(Re).add(ie));try{const Re=await wa(Yn.ENDPOINTS.WHATSAPP.DISCONNECT_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:ie})});if(!Re.ok)throw new Error(`Disconnect failed ${Re.status}`);const et=Date.now();for(;Date.now()-et<2e4;){await Ke();const pt=A.find(nt=>(nt.name||"")===ie),ee=String((pt==null?void 0:pt.status)||"").toUpperCase(),ke=!!((Ne=pt==null?void 0:pt.me)!=null&&Ne.id);if(!(ee==="WORKING"&&ke))break;await new Promise(nt=>setTimeout(nt,2e3))}e({title:"Disconnected",description:`Session ${ie} disconnected`})}catch(Re){Q((Re==null?void 0:Re.message)||"Failed to disconnect session")}finally{re(Re=>{const et=new Set(Re);return et.delete(ie),et})}}};return i.jsxs("div",{className:"flex h-[calc(100vh-120px)]",children:[i.jsx("div",{className:"w-80 border-r border-border bg-card",children:i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h2",{className:"text-lg font-semibold",children:"Platforms"})}),i.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"This is where you can connect all your platforms"}),i.jsx(pl,{value:b,onValueChange:ie=>w(ie),className:"mb-3",children:i.jsxs(so,{className:"grid w-full grid-cols-3 bg-muted/50 p-1",children:[i.jsx(Gn,{value:"whatsapp",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("span",{children:"WhatsApp"})}),i.jsx(le,{children:i.jsx("p",{children:"Kelola koneksi WhatsApp Business"})})]})}),i.jsx(Gn,{value:"telegram",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("span",{children:"Telegram"})}),i.jsx(le,{children:i.jsx("p",{children:"Kelola koneksi Bot Telegram"})})]})}),i.jsx(Gn,{value:"web",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("span",{children:"Live Chat"})}),i.jsx(le,{children:i.jsx("p",{children:"Kelola koneksi widget Live Chat"})})]})})]})}),n?i.jsx("div",{className:"space-y-2",children:[1,2,3].map(ie=>i.jsx(Ae,{className:"animate-pulse",children:i.jsx(Je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]})})},ie))}):r?i.jsx("div",{className:"text-sm text-red-600 p-4",children:r}):i.jsx("div",{className:"space-y-2",children:t.filter(ie=>Ue(ie)===b).length===0?i.jsx("div",{className:"text-sm text-muted-foreground p-4 text-center",children:"No platforms found. Create your first platform to get started."}):t.filter(ie=>Ue(ie)===b).map(ie=>i.jsx(Ae,{className:`cursor-pointer transition-colors hover:bg-muted/50 ${x===ie.id?"border-primary shadow-sm":""}`,onClick:()=>y(ie.id),children:i.jsx(Je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted flex items-center justify-center",children:ie.profile_photo_url?i.jsx("img",{src:ie.profile_photo_url,alt:ie.display_name||"Platform",className:"h-10 w-10 rounded-full object-cover"}):i.jsx("span",{className:"text-xs font-medium text-foreground/70",children:(ie.display_name||"").charAt(0)||"?"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-medium text-sm truncate",children:ie.display_name||"Unnamed Platform"}),i.jsx("p",{className:"text-[11px] text-muted-foreground capitalize",children:Ue(ie)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:ie.description||ie.website_url||""})]}),i.jsx("div",{className:`h-2.5 w-2.5 rounded-full ${ie.status==="active"?"bg-green-500":"bg-gray-300"}`,"aria-label":ie.status==="active"?"Active":"Inactive",title:ie.status==="active"?"Active":"Inactive"})]})})},ie.id))}),i.jsxs(mn,{open:_,onOpenChange:S,children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(BN,{asChild:!0,children:i.jsxs(Z,{variant:"outline",className:"w-full mt-4",children:[i.jsx(vs,{className:"h-4 w-4 mr-2"}),"Add Channel"]})})}),i.jsx(le,{children:i.jsx("p",{children:"Tambahkan saluran atau platform baru"})})]}),i.jsxs(cn,{className:"sm:max-w-xl p-0 overflow-hidden",children:[i.jsxs(un,{className:"p-6 pb-4",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx(dn,{className:"text-lg font-semibold",children:"Platform"})}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Select the platform you wish to establish your new inbox."})]}),i.jsxs("div",{className:"px-6 pb-6",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsxs("button",{onClick:()=>oe("whatsapp"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(lv,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"WhatsApp"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Connect your WhatsApp Business account"})]}),i.jsxs("button",{onClick:()=>oe("web"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(dP,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"Web Live Chat"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Add live chat to your website"})]}),i.jsxs("button",{onClick:()=>oe("telegram"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-400 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(Xh,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"Telegram Bot"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Connect your Telegram bot via BotFather"})]})]}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-xs text-muted-foreground",children:"More platforms coming soon"})})]})]})]}),i.jsx(fle,{isOpen:E==="whatsapp",onClose:()=>N(null),onSubmit:Ze,isSubmitting:I}),i.jsx(hle,{isOpen:E==="telegram",onClose:()=>N(null),onSubmit:Ze,isSubmitting:I}),i.jsx(mle,{isOpen:E==="web",onClose:()=>N(null),onSubmit:Ze,isSubmitting:I}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Add a new platform inbox"})]})}),i.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:i.jsxs("div",{className:"max-w-4xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:he!=null&&he.display_name?he.display_name.toUpperCase():"Select Platform"}),i.jsx("p",{className:"text-muted-foreground",children:he?he.description||he.website_url||"":"Choose a platform to manage"})]}),i.jsx("div",{className:"flex gap-2",children:he&&i.jsxs(i.Fragment,{children:[i.jsx(Z,{variant:"outline",size:"sm",disabled:$||!j||j===(he==null?void 0:he.ai_profile_id),onClick:async()=>{if(he)try{O(!0);const ie={};if(j&&j!==(he==null?void 0:he.ai_profile_id)&&(ie.ai_profile_id=j),Object.keys(ie).length===0){e({title:"No changes",description:"There are no changes to save."});return}await o(he.id,ie),e({title:"Saved",description:"Platform settings updated."});try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}await s()}catch(ie){e({title:"Error",description:(ie==null?void 0:ie.message)||"Failed to save platform",variant:"destructive"})}finally{O(!1)}},children:$?i.jsx(Gt,{className:"h-4 w-4 animate-spin"}):"Save"}),i.jsx(Z,{variant:"outline",size:"sm",disabled:bt,onClick:async()=>{if(he)try{Et(!0),await ut(he),e({title:"Deleted",description:"Channel has been deleted."}),y(null),await s()}catch(ie){e({title:"Error",description:(ie==null?void 0:ie.message)||"Failed to delete channel",variant:"destructive"})}finally{Et(!1)}},children:bt?i.jsx(Gt,{className:"h-4 w-4 animate-spin"}):i.jsx(Ar,{className:"h-4 w-4"})})]})})]}),i.jsxs("div",{className:"grid gap-6",children:[he?he&&i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-base",children:"Channel Details"})}),i.jsxs(Je,{className:"space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Provider",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Jenis platform komunikasi yang digunakan (WhatsApp, Telegram, Live Chat)"})})]})]}),i.jsx("div",{className:"capitalize",children:Ue(he)})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Status",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Status koneksi platform saat ini (Aktif atau Tidak Aktif)"})})]})]}),i.jsx("div",{children:he.status==="active"?"Active":"Inactive"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Display Name",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Nama yang ditampilkan untuk platform ini"})})]})]}),i.jsx("div",{children:he.display_name||""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["AI Agent",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Agen AI yang ditugaskan untuk menangani percakapan di platform ini"})})]})]}),i.jsx("div",{children:((ze=u.find(ie=>ie.id===(he==null?void 0:he.ai_profile_id)))==null?void 0:ze.name)||""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Created At",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Tanggal dan waktu platform ini dibuat"})})]})]}),i.jsx("div",{children:he.created_at?new Date(he.created_at).toLocaleString():""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Secret Token",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Token rahasia untuk autentikasi dan keamanan platform"})})]})]}),i.jsx("div",{children:(()=>{const ie=he==null?void 0:he.secret_token;return ie?ie.length>8?`${ie.slice(0,4)}${ie.slice(-2)}`:"":""})()})]})]}),i.jsxs("div",{className:"rounded-lg border p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-3",children:["Channel Profile",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Kelola foto profil atau logo untuk platform ini"})})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-12 w-12 rounded-full bg-muted flex items-center justify-center overflow-hidden",children:he!=null&&he.profile_photo_url?i.jsx("img",{src:(he==null?void 0:he.profile_photo_url)||"",alt:"Avatar",className:"h-12 w-12 object-cover"}):i.jsx("span",{className:"text-xs text-foreground/70",children:((he==null?void 0:he.display_name)||"?").charAt(0)})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{var ie;return(ie=M.current)==null?void 0:ie.click()},disabled:!he||T||C,children:T?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"})," Uploading..."]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(kc,{className:"h-4 w-4"})," Upload Avatar"]})})}),i.jsx(le,{children:i.jsx("p",{children:"Unggah foto profil atau logo untuk platform ini"})})]}),i.jsx("input",{ref:M,type:"file",accept:"image/png,image/jpeg,image/webp",className:"hidden",onChange:async ie=>{var Re;const Ne=(Re=ie.currentTarget.files)==null?void 0:Re[0];if(!(!Ne||!he))try{R(!0),await l(he.id,Ne,he.org_id),e({title:"Avatar updated"}),await s()}catch(et){e({title:"Avatar upload failed",description:(et==null?void 0:et.message)||"Please try again",variant:"destructive"})}finally{R(!1);try{ie.currentTarget.value=""}catch{}}}}),!!(he!=null&&he.logo_url||he!=null&&he.profile_photo_url)&&i.jsx(Z,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",disabled:!he||T||C,onClick:async()=>{if(he)try{F(!0),await c(he.id,he.org_id),await s(),e({title:"Avatar removed"})}catch(ie){e({title:"Failed to remove avatar",description:(ie==null?void 0:ie.message)||"Please try again",variant:"destructive"})}finally{F(!1)}},children:C?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"})," Removing..."]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ar,{className:"h-4 w-4"})," Remove"]})})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-2 text-xs text-muted-foreground",children:["Accepted: PNG, JPG, WEBP  Max 5 MB",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Format file yang didukung: PNG, JPG, WEBP dengan ukuran maksimal 5 MB"})})]})]})]})]})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:i.jsx(lv,{className:"w-8 h-8 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Platform Selected"}),i.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:"Select a platform from the left panel to view its details, manage settings, and configure agents."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 w-full max-w-2xl",children:[i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(lv,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"WhatsApp"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect your WhatsApp business account"})]}),i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(Xh,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"Telegram"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Set up a Telegram bot for customer support"})]}),i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(dP,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"Live Chat"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Embed chat widget on your website"})]})]})]}),Ot==="web"&&i.jsx("div",{className:"grid gap-6",children:$e(!0)}),Ot==="whatsapp"&&i.jsxs("div",{className:"grid gap-6",children:[$e(!1),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-base",children:"WhatsApp Sessions"})}),i.jsxs(Je,{children:[G&&i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading sessions..."}),H&&i.jsx("div",{className:"text-sm text-red-600",children:H}),!G&&!H&&i.jsx("div",{className:"space-y-3",children:(()=>{const ie=((he==null?void 0:he.display_name)||"").toLowerCase().replace(/\s/g,""),Ne=A.filter(Re=>((Re==null?void 0:Re.name)||"").toLowerCase().replace(/\s/g,"")===ie);return Ne.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No session found for this channel."}):Ne.map((Re,et)=>{var bi,Gr;const pt=((bi=Re==null?void 0:Re.me)==null?void 0:bi.id)||"",ee=pt?pt.replace(/@c\.us$/,""):"",ke=((Gr=Re==null?void 0:Re.me)==null?void 0:Gr.pushName)||"-",st=String((Re==null?void 0:Re.status)||"UNKNOWN").toUpperCase(),nt=(Re==null?void 0:Re.name)||"",Ft=X.has(nt)||fe.has(nt)||ye===nt,Rn=!!ee,Cn=st==="SCAN_QR_CODE",An=st==="WORKING"&&Rn;return i.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:ke}),i.jsx("div",{className:"text-xs text-muted-foreground",children:Cn||!Rn?"Not connected":ee})]}),i.jsx("div",{className:"flex items-center gap-2",children:An?i.jsx(Z,{variant:"outline",size:"sm",className:"text-amber-700 border-amber-200 hover:bg-amber-50",disabled:Ft,onClick:()=>Lt(nt),children:X.has(nt)?i.jsx(Gt,{className:"h-3 w-3 animate-spin"}):"Disconnect"}):i.jsx(Z,{variant:"outline",className:"text-blue-600 border-blue-200 hover:bg-blue-50",size:"sm",disabled:Ft,onClick:()=>_t(nt),children:ye===nt?i.jsx(Gt,{className:"h-3 w-3 animate-spin"}):"Connect"})})]},et)})})()})]})]}),i.jsx(mn,{open:Se,onOpenChange:Le,children:i.jsxs(cn,{className:"sm:max-w-md",children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Connect WhatsApp"}),i.jsx(Er,{children:"Scan this QR with your WhatsApp app to connect."})]}),se&&i.jsx("div",{className:"text-sm text-red-600",children:se}),q?i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[i.jsx("img",{src:q,alt:"QR",className:"w-56 h-56 rounded border"}),i.jsx(Z,{variant:"outline",onClick:()=>_t(ge||((he==null?void 0:he.display_name)||"").replace(/\s/g,"")),disabled:!!ye,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:ye?i.jsx(Gt,{className:"h-4 w-4 animate-spin"}):"Refresh QR"})]}):i.jsx("div",{className:"flex items-center justify-center h-60",children:i.jsx(Gt,{className:"h-6 w-6 animate-spin"})})]})})]}),Ot==="telegram"&&i.jsx("div",{className:"grid gap-6",children:$e(!1)})]}),he&&i.jsx("div",{className:"mt-8",children:i.jsxs(Ae,{className:"bg-red-50 border-2 border-red-200",children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-base text-red-700 flex items-center gap-2",children:["Danger Zone",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-red-600 cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Zona berbahaya untuk tindakan yang tidak dapat dibatalkan seperti menghapus platform"})})]})]})}),i.jsx(Je,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-red-700",children:"Delete this channel"}),i.jsx("div",{className:"text-xs text-red-600/80",children:"This action cannot be undone."})]}),i.jsxs(gb,{children:[i.jsx(Joe,{asChild:!0,children:i.jsx(Z,{className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Channel"})}),i.jsxs(Np,{children:[i.jsxs(Cp,{children:[i.jsx(Ep,{children:"Delete channel?"}),i.jsxs(Pp,{children:["This will permanently delete ",(he==null?void 0:he.display_name)||"this channel",". This action cannot be undone."]})]}),i.jsxs(Ap,{children:[i.jsx(Op,{children:"Cancel"}),i.jsx(Tp,{className:`bg-red-600 hover:bg-red-700 text-white ${bt?"animate-pulse cursor-wait":""}`,"aria-busy":bt,disabled:bt,onClick:async()=>{if(he)try{Et(!0),await ut(he),e({title:"Deleted",description:"Channel has been deleted."}),y(null),await s()}catch(ie){e({title:"Error",description:(ie==null?void 0:ie.message)||"Failed to delete channel",variant:"destructive"})}finally{Et(!1)}},children:bt?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Deleting"})]}):"Delete"})]})]})]})]})})]})})]})})]})};var gle=Array.isArray,Ea=gle,vle=typeof ar=="object"&&ar&&ar.Object===Object&&ar,HU=vle,xle=HU,yle=typeof self=="object"&&self&&self.Object===Object&&self,ble=xle||yle||Function("return this")(),ks=ble,wle=ks,jle=wle.Symbol,Ip=jle,BT=Ip,VU=Object.prototype,_le=VU.hasOwnProperty,kle=VU.toString,zf=BT?BT.toStringTag:void 0;function Sle(e){var t=_le.call(e,zf),n=e[zf];try{e[zf]=void 0;var r=!0}catch{}var a=kle.call(e);return r&&(t?e[zf]=n:delete e[zf]),a}var Nle=Sle,Cle=Object.prototype,Ale=Cle.toString;function Ele(e){return Ale.call(e)}var Ple=Ele,UT=Ip,Tle=Nle,Ole=Ple,Ile="[object Null]",Rle="[object Undefined]",zT=UT?UT.toStringTag:void 0;function Mle(e){return e==null?e===void 0?Rle:Ile:zT&&zT in Object(e)?Tle(e):Ole(e)}var mo=Mle;function Dle(e){return e!=null&&typeof e=="object"}var po=Dle,$le=mo,Lle=po,Fle="[object Symbol]";function Ble(e){return typeof e=="symbol"||Lle(e)&&$le(e)==Fle}var cf=Ble,Ule=Ea,zle=cf,qle=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wle=/^\w*$/;function Hle(e,t){if(Ule(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||zle(e)?!0:Wle.test(e)||!qle.test(e)||t!=null&&e in Object(t)}var uC=Hle;function Vle(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Pl=Vle;const uf=fn(Pl);var Kle=mo,Gle=Pl,Yle="[object AsyncFunction]",Xle="[object Function]",Jle="[object GeneratorFunction]",Qle="[object Proxy]";function Zle(e){if(!Gle(e))return!1;var t=Kle(e);return t==Xle||t==Jle||t==Yle||t==Qle}var dC=Zle;const Bt=fn(dC);var ece=ks,tce=ece["__core-js_shared__"],nce=tce,Bw=nce,qT=function(){var e=/[^.]+$/.exec(Bw&&Bw.keys&&Bw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function rce(e){return!!qT&&qT in e}var ace=rce,ice=Function.prototype,sce=ice.toString;function oce(e){if(e!=null){try{return sce.call(e)}catch{}try{return e+""}catch{}}return""}var KU=oce,lce=dC,cce=ace,uce=Pl,dce=KU,fce=/[\\^$.*+?()[\]{}|]/g,hce=/^\[object .+?Constructor\]$/,mce=Function.prototype,pce=Object.prototype,gce=mce.toString,vce=pce.hasOwnProperty,xce=RegExp("^"+gce.call(vce).replace(fce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yce(e){if(!uce(e)||cce(e))return!1;var t=lce(e)?xce:hce;return t.test(dce(e))}var bce=yce;function wce(e,t){return e==null?void 0:e[t]}var jce=wce,_ce=bce,kce=jce;function Sce(e,t){var n=kce(e,t);return _ce(n)?n:void 0}var Qc=Sce,Nce=Qc,Cce=Nce(Object,"create"),jb=Cce,WT=jb;function Ace(){this.__data__=WT?WT(null):{},this.size=0}var Ece=Ace;function Pce(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Tce=Pce,Oce=jb,Ice="__lodash_hash_undefined__",Rce=Object.prototype,Mce=Rce.hasOwnProperty;function Dce(e){var t=this.__data__;if(Oce){var n=t[e];return n===Ice?void 0:n}return Mce.call(t,e)?t[e]:void 0}var $ce=Dce,Lce=jb,Fce=Object.prototype,Bce=Fce.hasOwnProperty;function Uce(e){var t=this.__data__;return Lce?t[e]!==void 0:Bce.call(t,e)}var zce=Uce,qce=jb,Wce="__lodash_hash_undefined__";function Hce(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=qce&&t===void 0?Wce:t,this}var Vce=Hce,Kce=Ece,Gce=Tce,Yce=$ce,Xce=zce,Jce=Vce;function df(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}df.prototype.clear=Kce;df.prototype.delete=Gce;df.prototype.get=Yce;df.prototype.has=Xce;df.prototype.set=Jce;var Qce=df;function Zce(){this.__data__=[],this.size=0}var eue=Zce;function tue(e,t){return e===t||e!==e&&t!==t}var fC=tue,nue=fC;function rue(e,t){for(var n=e.length;n--;)if(nue(e[n][0],t))return n;return-1}var _b=rue,aue=_b,iue=Array.prototype,sue=iue.splice;function oue(e){var t=this.__data__,n=aue(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():sue.call(t,n,1),--this.size,!0}var lue=oue,cue=_b;function uue(e){var t=this.__data__,n=cue(t,e);return n<0?void 0:t[n][1]}var due=uue,fue=_b;function hue(e){return fue(this.__data__,e)>-1}var mue=hue,pue=_b;function gue(e,t){var n=this.__data__,r=pue(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var vue=gue,xue=eue,yue=lue,bue=due,wue=mue,jue=vue;function ff(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ff.prototype.clear=xue;ff.prototype.delete=yue;ff.prototype.get=bue;ff.prototype.has=wue;ff.prototype.set=jue;var kb=ff,_ue=Qc,kue=ks,Sue=_ue(kue,"Map"),hC=Sue,HT=Qce,Nue=kb,Cue=hC;function Aue(){this.size=0,this.__data__={hash:new HT,map:new(Cue||Nue),string:new HT}}var Eue=Aue;function Pue(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Tue=Pue,Oue=Tue;function Iue(e,t){var n=e.__data__;return Oue(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Sb=Iue,Rue=Sb;function Mue(e){var t=Rue(this,e).delete(e);return this.size-=t?1:0,t}var Due=Mue,$ue=Sb;function Lue(e){return $ue(this,e).get(e)}var Fue=Lue,Bue=Sb;function Uue(e){return Bue(this,e).has(e)}var zue=Uue,que=Sb;function Wue(e,t){var n=que(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Hue=Wue,Vue=Eue,Kue=Due,Gue=Fue,Yue=zue,Xue=Hue;function hf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}hf.prototype.clear=Vue;hf.prototype.delete=Kue;hf.prototype.get=Gue;hf.prototype.has=Yue;hf.prototype.set=Xue;var mC=hf,GU=mC,Jue="Expected a function";function pC(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Jue);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var o=e.apply(this,r);return n.cache=s.set(a,o)||s,o};return n.cache=new(pC.Cache||GU),n}pC.Cache=GU;var YU=pC;const Que=fn(YU);var Zue=YU,ede=500;function tde(e){var t=Zue(e,function(r){return n.size===ede&&n.clear(),r}),n=t.cache;return t}var nde=tde,rde=nde,ade=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ide=/\\(\\)?/g,sde=rde(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ade,function(n,r,a,s){t.push(a?s.replace(ide,"$1"):r||n)}),t}),ode=sde;function lde(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var gC=lde,VT=Ip,cde=gC,ude=Ea,dde=cf,fde=1/0,KT=VT?VT.prototype:void 0,GT=KT?KT.toString:void 0;function XU(e){if(typeof e=="string")return e;if(ude(e))return cde(e,XU)+"";if(dde(e))return GT?GT.call(e):"";var t=e+"";return t=="0"&&1/e==-fde?"-0":t}var hde=XU,mde=hde;function pde(e){return e==null?"":mde(e)}var JU=pde,gde=Ea,vde=uC,xde=ode,yde=JU;function bde(e,t){return gde(e)?e:vde(e,t)?[e]:xde(yde(e))}var QU=bde,wde=cf,jde=1/0;function _de(e){if(typeof e=="string"||wde(e))return e;var t=e+"";return t=="0"&&1/e==-jde?"-0":t}var Nb=_de,kde=QU,Sde=Nb;function Nde(e,t){t=kde(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Sde(t[n++])];return n&&n==r?e:void 0}var vC=Nde,Cde=vC;function Ade(e,t,n){var r=e==null?void 0:Cde(e,t);return r===void 0?n:r}var ZU=Ade;const hi=fn(ZU);function Ede(e){return e==null}var Pde=Ede;const sn=fn(Pde);var Tde=mo,Ode=Ea,Ide=po,Rde="[object String]";function Mde(e){return typeof e=="string"||!Ode(e)&&Ide(e)&&Tde(e)==Rde}var Dde=Mde;const $c=fn(Dde);var ez={exports:{}},gn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xC=Symbol.for("react.element"),yC=Symbol.for("react.portal"),Cb=Symbol.for("react.fragment"),Ab=Symbol.for("react.strict_mode"),Eb=Symbol.for("react.profiler"),Pb=Symbol.for("react.provider"),Tb=Symbol.for("react.context"),$de=Symbol.for("react.server_context"),Ob=Symbol.for("react.forward_ref"),Ib=Symbol.for("react.suspense"),Rb=Symbol.for("react.suspense_list"),Mb=Symbol.for("react.memo"),Db=Symbol.for("react.lazy"),Lde=Symbol.for("react.offscreen"),tz;tz=Symbol.for("react.module.reference");function xi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case xC:switch(e=e.type,e){case Cb:case Eb:case Ab:case Ib:case Rb:return e;default:switch(e=e&&e.$$typeof,e){case $de:case Tb:case Ob:case Db:case Mb:case Pb:return e;default:return t}}case yC:return t}}}gn.ContextConsumer=Tb;gn.ContextProvider=Pb;gn.Element=xC;gn.ForwardRef=Ob;gn.Fragment=Cb;gn.Lazy=Db;gn.Memo=Mb;gn.Portal=yC;gn.Profiler=Eb;gn.StrictMode=Ab;gn.Suspense=Ib;gn.SuspenseList=Rb;gn.isAsyncMode=function(){return!1};gn.isConcurrentMode=function(){return!1};gn.isContextConsumer=function(e){return xi(e)===Tb};gn.isContextProvider=function(e){return xi(e)===Pb};gn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===xC};gn.isForwardRef=function(e){return xi(e)===Ob};gn.isFragment=function(e){return xi(e)===Cb};gn.isLazy=function(e){return xi(e)===Db};gn.isMemo=function(e){return xi(e)===Mb};gn.isPortal=function(e){return xi(e)===yC};gn.isProfiler=function(e){return xi(e)===Eb};gn.isStrictMode=function(e){return xi(e)===Ab};gn.isSuspense=function(e){return xi(e)===Ib};gn.isSuspenseList=function(e){return xi(e)===Rb};gn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Cb||e===Eb||e===Ab||e===Ib||e===Rb||e===Lde||typeof e=="object"&&e!==null&&(e.$$typeof===Db||e.$$typeof===Mb||e.$$typeof===Pb||e.$$typeof===Tb||e.$$typeof===Ob||e.$$typeof===tz||e.getModuleId!==void 0)};gn.typeOf=xi;ez.exports=gn;var Fde=ez.exports,Bde=mo,Ude=po,zde="[object Number]";function qde(e){return typeof e=="number"||Ude(e)&&Bde(e)==zde}var nz=qde;const Wde=fn(nz);var Hde=nz;function Vde(e){return Hde(e)&&e!=+e}var Kde=Vde;const Rp=fn(Kde);var $i=function(t){return t===0?0:t>0?1:-1},ic=function(t){return $c(t)&&t.indexOf("%")===t.length-1},qe=function(t){return Wde(t)&&!Rp(t)},Gde=function(t){return sn(t)},mr=function(t){return qe(t)||$c(t)},Yde=0,$b=function(t){var n=++Yde;return"".concat(t||"").concat(n)},Lc=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!qe(t)&&!$c(t))return r;var s;if(ic(t)){var o=t.indexOf("%");s=n*parseFloat(t.slice(0,o))/100}else s=+t;return Rp(s)&&(s=r),a&&s>n&&(s=n),s},zo=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},Xde=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},mu=function(t,n){return qe(t)&&qe(n)?function(r){return t+r*(n-t)}:function(){return n}};function h_(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):hi(r,t))===n})}var Jde=function(t,n){return qe(t)&&qe(n)?t-n:$c(t)&&$c(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function nd(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function m_(e){"@babel/helpers - typeof";return m_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m_(e)}var Qde=["viewBox","children"],Zde=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],YT=["points","pathLength"],Uw={svg:Qde,polygon:YT,polyline:YT},bC=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ix=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(p.isValidElement(t)&&(r=t.props),!uf(r))return null;var a={};return Object.keys(r).forEach(function(s){bC.includes(s)&&(a[s]=n||function(o){return r[s](r,o)})}),a},efe=function(t,n,r){return function(a){return t(n,r,a),null}},sx=function(t,n,r){if(!uf(t)||m_(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(s){var o=t[s];bC.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=efe(o,n,r))}),a},tfe=["children"],nfe=["children"];function XT(e,t){if(e==null)return{};var n=rfe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function rfe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var JT={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Xs=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},QT=null,zw=null,wC=function e(t){if(t===QT&&Array.isArray(zw))return zw;var n=[];return p.Children.forEach(t,function(r){sn(r)||(Fde.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),zw=n,QT=t,n};function Ui(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return Xs(a)}):r=[Xs(t)],wC(e).forEach(function(a){var s=hi(a,"type.displayName")||hi(a,"type.name");r.indexOf(s)!==-1&&n.push(a)}),n}function Ma(e,t){var n=Ui(e,t);return n&&n[0]}var ZT=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!qe(r)||r<=0||!qe(a)||a<=0)},afe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],ife=function(t){return t&&t.type&&$c(t.type)&&afe.indexOf(t.type)>=0},sfe=function(t,n,r,a){var s,o=(s=Uw==null?void 0:Uw[a])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Bt(t)&&(a&&o.includes(n)||Zde.includes(n))||r&&bC.includes(n)},an=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(p.isValidElement(t)&&(a=t.props),!uf(a))return null;var s={};return Object.keys(a).forEach(function(o){var l;sfe((l=a)===null||l===void 0?void 0:l[o],o,n,r)&&(s[o]=a[o])}),s},p_=function e(t,n){if(t===n)return!0;var r=p.Children.count(t);if(r!==p.Children.count(n))return!1;if(r===0)return!0;if(r===1)return e2(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var s=t[a],o=n[a];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!e2(s,o))return!1}return!0},e2=function(t,n){if(sn(t)&&sn(n))return!0;if(!sn(t)&&!sn(n)){var r=t.props||{},a=r.children,s=XT(r,tfe),o=n.props||{},l=o.children,c=XT(o,nfe);return a&&l?nd(s,c)&&p_(a,l):!a&&!l?nd(s,c):!1}return!1},t2=function(t,n){var r=[],a={};return wC(t).forEach(function(s,o){if(ife(s))r.push(s);else if(s){var l=Xs(s.type),c=n[l]||{},u=c.handler,f=c.once;if(u&&(!f||!a[l])){var d=u(s,l,o);r.push(d),a[l]=!0}}}),r},ofe=function(t){var n=t&&t.type;return n&&JT[n]?JT[n]:null},lfe=function(t,n){return wC(n).indexOf(t)},cfe=["children","width","height","viewBox","className","style","title","desc"];function g_(){return g_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g_.apply(this,arguments)}function ufe(e,t){if(e==null)return{};var n=dfe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function dfe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function v_(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,u=ufe(e,cfe),f=a||{width:n,height:r,x:0,y:0},d=Zt("recharts-surface",s);return V.createElement("svg",g_({},an(u,!0,"svg"),{className:d,width:n,height:r,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),V.createElement("title",null,l),V.createElement("desc",null,c),t)}var ffe=["children","className"];function x_(){return x_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x_.apply(this,arguments)}function hfe(e,t){if(e==null)return{};var n=mfe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mfe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var br=V.forwardRef(function(e,t){var n=e.children,r=e.className,a=hfe(e,ffe),s=Zt("recharts-layer",r);return V.createElement("g",x_({className:s},an(a,!0),{ref:t}),n)}),Js=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s]};function pfe(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(a);++r<a;)s[r]=e[r+t];return s}var gfe=pfe,vfe=gfe;function xfe(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:vfe(e,t,n)}var yfe=xfe,bfe="\\ud800-\\udfff",wfe="\\u0300-\\u036f",jfe="\\ufe20-\\ufe2f",_fe="\\u20d0-\\u20ff",kfe=wfe+jfe+_fe,Sfe="\\ufe0e\\ufe0f",Nfe="\\u200d",Cfe=RegExp("["+Nfe+bfe+kfe+Sfe+"]");function Afe(e){return Cfe.test(e)}var rz=Afe;function Efe(e){return e.split("")}var Pfe=Efe,az="\\ud800-\\udfff",Tfe="\\u0300-\\u036f",Ofe="\\ufe20-\\ufe2f",Ife="\\u20d0-\\u20ff",Rfe=Tfe+Ofe+Ife,Mfe="\\ufe0e\\ufe0f",Dfe="["+az+"]",y_="["+Rfe+"]",b_="\\ud83c[\\udffb-\\udfff]",$fe="(?:"+y_+"|"+b_+")",iz="[^"+az+"]",sz="(?:\\ud83c[\\udde6-\\uddff]){2}",oz="[\\ud800-\\udbff][\\udc00-\\udfff]",Lfe="\\u200d",lz=$fe+"?",cz="["+Mfe+"]?",Ffe="(?:"+Lfe+"(?:"+[iz,sz,oz].join("|")+")"+cz+lz+")*",Bfe=cz+lz+Ffe,Ufe="(?:"+[iz+y_+"?",y_,sz,oz,Dfe].join("|")+")",zfe=RegExp(b_+"(?="+b_+")|"+Ufe+Bfe,"g");function qfe(e){return e.match(zfe)||[]}var Wfe=qfe,Hfe=Pfe,Vfe=rz,Kfe=Wfe;function Gfe(e){return Vfe(e)?Kfe(e):Hfe(e)}var Yfe=Gfe,Xfe=yfe,Jfe=rz,Qfe=Yfe,Zfe=JU;function ehe(e){return function(t){t=Zfe(t);var n=Jfe(t)?Qfe(t):void 0,r=n?n[0]:t.charAt(0),a=n?Xfe(n,1).join(""):t.slice(1);return r[e]()+a}}var the=ehe,nhe=the,rhe=nhe("toUpperCase"),ahe=rhe;const Lb=fn(ahe);function kn(e){return function(){return e}}const uz=Math.cos,ox=Math.sin,Yi=Math.sqrt,lx=Math.PI,Fb=2*lx,w_=Math.PI,j_=2*w_,Yl=1e-6,ihe=j_-Yl;function dz(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function she(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return dz;const n=10**t;return function(r){this._+=r[0];for(let a=1,s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class ohe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?dz:she(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,s,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,a,s){if(t=+t,n=+n,r=+r,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=r-t,u=a-n,f=o-t,d=l-n,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>Yl)if(!(Math.abs(d*c-u*f)>Yl)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,g=a-l,v=c*c+u*u,x=m*m+g*g,y=Math.sqrt(v),b=Math.sqrt(h),w=s*Math.tan((w_-Math.acos((v+h-x)/(2*y*b)))/2),j=w/b,k=w/y;Math.abs(j-1)>Yl&&this._append`L${t+j*f},${n+j*d}`,this._append`A${s},${s},0,0,${+(d*m>f*g)},${this._x1=t+k*c},${this._y1=n+k*u}`}}arc(t,n,r,a,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),c=r*Math.sin(a),u=t+l,f=n+c,d=1^o,h=o?a-s:s-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Yl||Math.abs(this._y1-f)>Yl)&&this._append`L${u},${f}`,r&&(h<0&&(h=h%j_+j_),h>ihe?this._append`A${r},${r},0,1,${d},${t-l},${n-c}A${r},${r},0,1,${d},${this._x1=u},${this._y1=f}`:h>Yl&&this._append`A${r},${r},0,${+(h>=w_)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function jC(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new ohe(t)}function _C(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fz(e){this._context=e}fz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Bb(e){return new fz(e)}function hz(e){return e[0]}function mz(e){return e[1]}function pz(e,t){var n=kn(!0),r=null,a=Bb,s=null,o=jC(l);e=typeof e=="function"?e:e===void 0?hz:kn(e),t=typeof t=="function"?t:t===void 0?mz:kn(t);function l(c){var u,f=(c=_C(c)).length,d,h=!1,m;for(r==null&&(s=a(m=o())),u=0;u<=f;++u)!(u<f&&n(d=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(d,u,c),+t(d,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:kn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:kn(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:kn(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,r!=null&&(s=a(r)),l):a},l.context=function(c){return arguments.length?(c==null?r=s=null:s=a(r=c),l):r},l}function kg(e,t,n){var r=null,a=kn(!0),s=null,o=Bb,l=null,c=jC(u);e=typeof e=="function"?e:e===void 0?hz:kn(+e),t=typeof t=="function"?t:kn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?mz:kn(+n);function u(d){var h,m,g,v=(d=_C(d)).length,x,y=!1,b,w=new Array(v),j=new Array(v);for(s==null&&(l=o(b=c())),h=0;h<=v;++h){if(!(h<v&&a(x=d[h],h,d))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(w[g],j[g]);l.lineEnd(),l.areaEnd()}y&&(w[h]=+e(x,h,d),j[h]=+t(x,h,d),l.point(r?+r(x,h,d):w[h],n?+n(x,h,d):j[h]))}if(b)return l=null,b+""||null}function f(){return pz().defined(a).curve(o).context(s)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:kn(+d),r=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:kn(+d),u):e},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:kn(+d),u):r},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:kn(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:kn(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:kn(+d),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:kn(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,s!=null&&(l=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=l=null:l=o(s=d),u):s},u}class gz{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function lhe(e){return new gz(e,!0)}function che(e){return new gz(e,!1)}const kC={draw(e,t){const n=Yi(t/lx);e.moveTo(n,0),e.arc(0,0,n,0,Fb)}},uhe={draw(e,t){const n=Yi(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},vz=Yi(1/3),dhe=vz*2,fhe={draw(e,t){const n=Yi(t/dhe),r=n*vz;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},hhe={draw(e,t){const n=Yi(t),r=-n/2;e.rect(r,r,n,n)}},mhe=.8908130915292852,xz=ox(lx/10)/ox(7*lx/10),phe=ox(Fb/10)*xz,ghe=-uz(Fb/10)*xz,vhe={draw(e,t){const n=Yi(t*mhe),r=phe*n,a=ghe*n;e.moveTo(0,-n),e.lineTo(r,a);for(let s=1;s<5;++s){const o=Fb*s/5,l=uz(o),c=ox(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*a,c*r+l*a)}e.closePath()}},qw=Yi(3),xhe={draw(e,t){const n=-Yi(t/(qw*3));e.moveTo(0,n*2),e.lineTo(-qw*n,-n),e.lineTo(qw*n,-n),e.closePath()}},Ya=-.5,Xa=Yi(3)/2,__=1/Yi(12),yhe=(__/2+1)*3,bhe={draw(e,t){const n=Yi(t/yhe),r=n/2,a=n*__,s=r,o=n*__+n,l=-s,c=o;e.moveTo(r,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(Ya*r-Xa*a,Xa*r+Ya*a),e.lineTo(Ya*s-Xa*o,Xa*s+Ya*o),e.lineTo(Ya*l-Xa*c,Xa*l+Ya*c),e.lineTo(Ya*r+Xa*a,Ya*a-Xa*r),e.lineTo(Ya*s+Xa*o,Ya*o-Xa*s),e.lineTo(Ya*l+Xa*c,Ya*c-Xa*l),e.closePath()}};function whe(e,t){let n=null,r=jC(a);e=typeof e=="function"?e:kn(e||kC),t=typeof t=="function"?t:kn(t===void 0?64:+t);function a(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:kn(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:kn(+s),a):t},a.context=function(s){return arguments.length?(n=s??null,a):n},a}function cx(){}function ux(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function yz(e){this._context=e}yz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ux(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ux(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jhe(e){return new yz(e)}function bz(e){this._context=e}bz.prototype={areaStart:cx,areaEnd:cx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ux(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _he(e){return new bz(e)}function wz(e){this._context=e}wz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ux(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function khe(e){return new wz(e)}function jz(e){this._context=e}jz.prototype={areaStart:cx,areaEnd:cx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function She(e){return new jz(e)}function n2(e){return e<0?-1:1}function r2(e,t,n){var r=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(s*a+o*r)/(r+a);return(n2(s)+n2(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function a2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ww(e,t,n){var r=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-r)/3;e._context.bezierCurveTo(r+l,a+l*t,s-l,o-l*n,s,o)}function dx(e){this._context=e}dx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ww(this,this._t0,a2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ww(this,a2(this,n=r2(this,e,t)),n);break;default:Ww(this,this._t0,n=r2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function _z(e){this._context=new kz(e)}(_z.prototype=Object.create(dx.prototype)).point=function(e,t){dx.prototype.point.call(this,t,e)};function kz(e){this._context=e}kz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,s){this._context.bezierCurveTo(t,e,r,n,s,a)}};function Nhe(e){return new dx(e)}function Che(e){return new _z(e)}function Sz(e){this._context=e}Sz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=i2(e),a=i2(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],a[0][s],r[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function i2(e){var t,n=e.length-1,r,a=new Array(n),s=new Array(n),o=new Array(n);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function Ahe(e){return new Sz(e)}function Ub(e,t){this._context=e,this._t=t}Ub.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Ehe(e){return new Ub(e,.5)}function Phe(e){return new Ub(e,0)}function The(e){return new Ub(e,1)}function Ad(e,t){if((o=e.length)>1)for(var n=1,r,a,s=e[t[0]],o,l=s.length;n<o;++n)for(a=s,s=e[t[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function k_(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Ohe(e,t){return e[t]}function Ihe(e){const t=[];return t.key=e,t}function Rhe(){var e=kn([]),t=k_,n=Ad,r=Ohe;function a(s){var o=Array.from(e.apply(this,arguments),Ihe),l,c=o.length,u=-1,f;for(const d of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(d,o[l].key,u,s)]).data=d;for(l=0,f=_C(t(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:kn(Array.from(s)),a):e},a.value=function(s){return arguments.length?(r=typeof s=="function"?s:kn(+s),a):r},a.order=function(s){return arguments.length?(t=s==null?k_:typeof s=="function"?s:kn(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(n=s??Ad,a):n},a}function Mhe(e,t){if((r=e.length)>0){for(var n,r,a=0,s=e[0].length,o;a<s;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}Ad(e,t)}}function Dhe(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,s=r.length;n<s;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}Ad(e,t)}}function $he(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,s,o;r<s;++r){for(var l=0,c=0,u=0;l<o;++l){for(var f=e[t[l]],d=f[r][1]||0,h=f[r-1][1]||0,m=(d-h)/2,g=0;g<l;++g){var v=e[t[g]],x=v[r][1]||0,y=v[r-1][1]||0;m+=x-y}c+=d,u+=m*d}a[r-1][1]+=a[r-1][0]=n,c&&(n-=u/c)}a[r-1][1]+=a[r-1][0]=n,Ad(e,t)}}function mm(e){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mm(e)}var Lhe=["type","size","sizeType"];function S_(){return S_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S_.apply(this,arguments)}function s2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function o2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s2(Object(n),!0).forEach(function(r){Fhe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fhe(e,t,n){return t=Bhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bhe(e){var t=Uhe(e,"string");return mm(t)=="symbol"?t:t+""}function Uhe(e,t){if(mm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zhe(e,t){if(e==null)return{};var n=qhe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function qhe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Nz={symbolCircle:kC,symbolCross:uhe,symbolDiamond:fhe,symbolSquare:hhe,symbolStar:vhe,symbolTriangle:xhe,symbolWye:bhe},Whe=Math.PI/180,Hhe=function(t){var n="symbol".concat(Lb(t));return Nz[n]||kC},Vhe=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Whe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Khe=function(t,n){Nz["symbol".concat(Lb(t))]=n},SC=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,s=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=zhe(t,Lhe),u=o2(o2({},c),{},{type:r,size:s,sizeType:l}),f=function(){var x=Hhe(r),y=whe().type(x).size(Vhe(s,l,r));return y()},d=u.className,h=u.cx,m=u.cy,g=an(u,!0);return h===+h&&m===+m&&s===+s?V.createElement("path",S_({},g,{className:Zt("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(m,")"),d:f()})):null};SC.registerSymbol=Khe;function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function N_(){return N_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N_.apply(this,arguments)}function l2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ghe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l2(Object(n),!0).forEach(function(r){pm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xhe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Az(r.key),r)}}function Jhe(e,t,n){return t&&Xhe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qhe(e,t,n){return t=fx(t),Zhe(e,Cz()?Reflect.construct(t,n||[],fx(e).constructor):t.apply(e,n))}function Zhe(e,t){if(t&&(Ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eme(e)}function eme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Cz=function(){return!!e})()}function fx(e){return fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fx(e)}function tme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C_(e,t)}function C_(e,t){return C_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},C_(e,t)}function pm(e,t,n){return t=Az(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Az(e){var t=nme(e,"string");return Ed(t)=="symbol"?t:t+""}function nme(e,t){if(Ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ja=32,NC=function(e){function t(){return Yhe(this,t),Qhe(this,t,arguments)}return tme(t,e),Jhe(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,s=Ja/2,o=Ja/6,l=Ja/3,c=r.inactive?a:r.color;if(r.type==="plainline")return V.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:Ja,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return V.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Ja,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return V.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Ja/8,"h").concat(Ja,"v").concat(Ja*3/4,"h").concat(-Ja,"z"),className:"recharts-legend-icon"});if(V.isValidElement(r.legendIcon)){var u=Ghe({},r);return delete u.legendIcon,V.cloneElement(r.legendIcon,u)}return V.createElement(SC,{fill:c,cx:s,cy:s,size:Ja,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,s=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:Ja,height:Ja},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,g){var v=m.formatter||c,x=Zt(pm(pm({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var y=Bt(m.value)?null:m.value;Js(!Bt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return V.createElement("li",N_({className:x,style:d,key:"legend-item-".concat(g)},sx(r.props,m,g)),V.createElement(v_,{width:o,height:o,viewBox:f,style:h},r.renderIcon(m)),V.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},v?v(y,m,g):y))})}},{key:"render",value:function(){var r=this.props,a=r.payload,s=r.layout,o=r.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return V.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(p.PureComponent);pm(NC,"displayName","Legend");pm(NC,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var rme=kb;function ame(){this.__data__=new rme,this.size=0}var ime=ame;function sme(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var ome=sme;function lme(e){return this.__data__.get(e)}var cme=lme;function ume(e){return this.__data__.has(e)}var dme=ume,fme=kb,hme=hC,mme=mC,pme=200;function gme(e,t){var n=this.__data__;if(n instanceof fme){var r=n.__data__;if(!hme||r.length<pme-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new mme(r)}return n.set(e,t),this.size=n.size,this}var vme=gme,xme=kb,yme=ime,bme=ome,wme=cme,jme=dme,_me=vme;function mf(e){var t=this.__data__=new xme(e);this.size=t.size}mf.prototype.clear=yme;mf.prototype.delete=bme;mf.prototype.get=wme;mf.prototype.has=jme;mf.prototype.set=_me;var Ez=mf,kme="__lodash_hash_undefined__";function Sme(e){return this.__data__.set(e,kme),this}var Nme=Sme;function Cme(e){return this.__data__.has(e)}var Ame=Cme,Eme=mC,Pme=Nme,Tme=Ame;function hx(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Eme;++t<n;)this.add(e[t])}hx.prototype.add=hx.prototype.push=Pme;hx.prototype.has=Tme;var Pz=hx;function Ome(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Tz=Ome;function Ime(e,t){return e.has(t)}var Oz=Ime,Rme=Pz,Mme=Tz,Dme=Oz,$me=1,Lme=2;function Fme(e,t,n,r,a,s){var o=n&$me,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(e),f=s.get(t);if(u&&f)return u==t&&f==e;var d=-1,h=!0,m=n&Lme?new Rme:void 0;for(s.set(e,t),s.set(t,e);++d<l;){var g=e[d],v=t[d];if(r)var x=o?r(v,g,d,t,e,s):r(g,v,d,e,t,s);if(x!==void 0){if(x)continue;h=!1;break}if(m){if(!Mme(t,function(y,b){if(!Dme(m,b)&&(g===y||a(g,y,n,r,s)))return m.push(b)})){h=!1;break}}else if(!(g===v||a(g,v,n,r,s))){h=!1;break}}return s.delete(e),s.delete(t),h}var Iz=Fme,Bme=ks,Ume=Bme.Uint8Array,zme=Ume;function qme(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var Wme=qme;function Hme(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var CC=Hme,c2=Ip,u2=zme,Vme=fC,Kme=Iz,Gme=Wme,Yme=CC,Xme=1,Jme=2,Qme="[object Boolean]",Zme="[object Date]",epe="[object Error]",tpe="[object Map]",npe="[object Number]",rpe="[object RegExp]",ape="[object Set]",ipe="[object String]",spe="[object Symbol]",ope="[object ArrayBuffer]",lpe="[object DataView]",d2=c2?c2.prototype:void 0,Hw=d2?d2.valueOf:void 0;function cpe(e,t,n,r,a,s,o){switch(n){case lpe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ope:return!(e.byteLength!=t.byteLength||!s(new u2(e),new u2(t)));case Qme:case Zme:case npe:return Vme(+e,+t);case epe:return e.name==t.name&&e.message==t.message;case rpe:case ipe:return e==t+"";case tpe:var l=Gme;case ape:var c=r&Xme;if(l||(l=Yme),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=Jme,o.set(e,t);var f=Kme(l(e),l(t),r,a,s,o);return o.delete(e),f;case spe:if(Hw)return Hw.call(e)==Hw.call(t)}return!1}var upe=cpe;function dpe(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var Rz=dpe,fpe=Rz,hpe=Ea;function mpe(e,t,n){var r=t(e);return hpe(e)?r:fpe(r,n(e))}var ppe=mpe;function gpe(e,t){for(var n=-1,r=e==null?0:e.length,a=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[a++]=o)}return s}var vpe=gpe;function xpe(){return[]}var ype=xpe,bpe=vpe,wpe=ype,jpe=Object.prototype,_pe=jpe.propertyIsEnumerable,f2=Object.getOwnPropertySymbols,kpe=f2?function(e){return e==null?[]:(e=Object(e),bpe(f2(e),function(t){return _pe.call(e,t)}))}:wpe,Spe=kpe;function Npe(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Cpe=Npe,Ape=mo,Epe=po,Ppe="[object Arguments]";function Tpe(e){return Epe(e)&&Ape(e)==Ppe}var Ope=Tpe,h2=Ope,Ipe=po,Mz=Object.prototype,Rpe=Mz.hasOwnProperty,Mpe=Mz.propertyIsEnumerable,Dpe=h2(function(){return arguments}())?h2:function(e){return Ipe(e)&&Rpe.call(e,"callee")&&!Mpe.call(e,"callee")},AC=Dpe,mx={exports:{}};function $pe(){return!1}var Lpe=$pe;mx.exports;(function(e,t){var n=ks,r=Lpe,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(mx,mx.exports);var Dz=mx.exports,Fpe=9007199254740991,Bpe=/^(?:0|[1-9]\d*)$/;function Upe(e,t){var n=typeof e;return t=t??Fpe,!!t&&(n=="number"||n!="symbol"&&Bpe.test(e))&&e>-1&&e%1==0&&e<t}var EC=Upe,zpe=9007199254740991;function qpe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=zpe}var PC=qpe,Wpe=mo,Hpe=PC,Vpe=po,Kpe="[object Arguments]",Gpe="[object Array]",Ype="[object Boolean]",Xpe="[object Date]",Jpe="[object Error]",Qpe="[object Function]",Zpe="[object Map]",ege="[object Number]",tge="[object Object]",nge="[object RegExp]",rge="[object Set]",age="[object String]",ige="[object WeakMap]",sge="[object ArrayBuffer]",oge="[object DataView]",lge="[object Float32Array]",cge="[object Float64Array]",uge="[object Int8Array]",dge="[object Int16Array]",fge="[object Int32Array]",hge="[object Uint8Array]",mge="[object Uint8ClampedArray]",pge="[object Uint16Array]",gge="[object Uint32Array]",Tn={};Tn[lge]=Tn[cge]=Tn[uge]=Tn[dge]=Tn[fge]=Tn[hge]=Tn[mge]=Tn[pge]=Tn[gge]=!0;Tn[Kpe]=Tn[Gpe]=Tn[sge]=Tn[Ype]=Tn[oge]=Tn[Xpe]=Tn[Jpe]=Tn[Qpe]=Tn[Zpe]=Tn[ege]=Tn[tge]=Tn[nge]=Tn[rge]=Tn[age]=Tn[ige]=!1;function vge(e){return Vpe(e)&&Hpe(e.length)&&!!Tn[Wpe(e)]}var xge=vge;function yge(e){return function(t){return e(t)}}var $z=yge,px={exports:{}};px.exports;(function(e,t){var n=HU,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===r,o=s&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(px,px.exports);var bge=px.exports,wge=xge,jge=$z,m2=bge,p2=m2&&m2.isTypedArray,_ge=p2?jge(p2):wge,Lz=_ge,kge=Cpe,Sge=AC,Nge=Ea,Cge=Dz,Age=EC,Ege=Lz,Pge=Object.prototype,Tge=Pge.hasOwnProperty;function Oge(e,t){var n=Nge(e),r=!n&&Sge(e),a=!n&&!r&&Cge(e),s=!n&&!r&&!a&&Ege(e),o=n||r||a||s,l=o?kge(e.length,String):[],c=l.length;for(var u in e)(t||Tge.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Age(u,c)))&&l.push(u);return l}var Ige=Oge,Rge=Object.prototype;function Mge(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Rge;return e===n}var Dge=Mge;function $ge(e,t){return function(n){return e(t(n))}}var Fz=$ge,Lge=Fz,Fge=Lge(Object.keys,Object),Bge=Fge,Uge=Dge,zge=Bge,qge=Object.prototype,Wge=qge.hasOwnProperty;function Hge(e){if(!Uge(e))return zge(e);var t=[];for(var n in Object(e))Wge.call(e,n)&&n!="constructor"&&t.push(n);return t}var Vge=Hge,Kge=dC,Gge=PC;function Yge(e){return e!=null&&Gge(e.length)&&!Kge(e)}var Mp=Yge,Xge=Ige,Jge=Vge,Qge=Mp;function Zge(e){return Qge(e)?Xge(e):Jge(e)}var zb=Zge,eve=ppe,tve=Spe,nve=zb;function rve(e){return eve(e,nve,tve)}var ave=rve,g2=ave,ive=1,sve=Object.prototype,ove=sve.hasOwnProperty;function lve(e,t,n,r,a,s){var o=n&ive,l=g2(e),c=l.length,u=g2(t),f=u.length;if(c!=f&&!o)return!1;for(var d=c;d--;){var h=l[d];if(!(o?h in t:ove.call(t,h)))return!1}var m=s.get(e),g=s.get(t);if(m&&g)return m==t&&g==e;var v=!0;s.set(e,t),s.set(t,e);for(var x=o;++d<c;){h=l[d];var y=e[h],b=t[h];if(r)var w=o?r(b,y,h,t,e,s):r(y,b,h,e,t,s);if(!(w===void 0?y===b||a(y,b,n,r,s):w)){v=!1;break}x||(x=h=="constructor")}if(v&&!x){var j=e.constructor,k=t.constructor;j!=k&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof k=="function"&&k instanceof k)&&(v=!1)}return s.delete(e),s.delete(t),v}var cve=lve,uve=Qc,dve=ks,fve=uve(dve,"DataView"),hve=fve,mve=Qc,pve=ks,gve=mve(pve,"Promise"),vve=gve,xve=Qc,yve=ks,bve=xve(yve,"Set"),Bz=bve,wve=Qc,jve=ks,_ve=wve(jve,"WeakMap"),kve=_ve,A_=hve,E_=hC,P_=vve,T_=Bz,O_=kve,Uz=mo,pf=KU,v2="[object Map]",Sve="[object Object]",x2="[object Promise]",y2="[object Set]",b2="[object WeakMap]",w2="[object DataView]",Nve=pf(A_),Cve=pf(E_),Ave=pf(P_),Eve=pf(T_),Pve=pf(O_),Xl=Uz;(A_&&Xl(new A_(new ArrayBuffer(1)))!=w2||E_&&Xl(new E_)!=v2||P_&&Xl(P_.resolve())!=x2||T_&&Xl(new T_)!=y2||O_&&Xl(new O_)!=b2)&&(Xl=function(e){var t=Uz(e),n=t==Sve?e.constructor:void 0,r=n?pf(n):"";if(r)switch(r){case Nve:return w2;case Cve:return v2;case Ave:return x2;case Eve:return y2;case Pve:return b2}return t});var Tve=Xl,Vw=Ez,Ove=Iz,Ive=upe,Rve=cve,j2=Tve,_2=Ea,k2=Dz,Mve=Lz,Dve=1,S2="[object Arguments]",N2="[object Array]",Sg="[object Object]",$ve=Object.prototype,C2=$ve.hasOwnProperty;function Lve(e,t,n,r,a,s){var o=_2(e),l=_2(t),c=o?N2:j2(e),u=l?N2:j2(t);c=c==S2?Sg:c,u=u==S2?Sg:u;var f=c==Sg,d=u==Sg,h=c==u;if(h&&k2(e)){if(!k2(t))return!1;o=!0,f=!1}if(h&&!f)return s||(s=new Vw),o||Mve(e)?Ove(e,t,n,r,a,s):Ive(e,t,c,n,r,a,s);if(!(n&Dve)){var m=f&&C2.call(e,"__wrapped__"),g=d&&C2.call(t,"__wrapped__");if(m||g){var v=m?e.value():e,x=g?t.value():t;return s||(s=new Vw),a(v,x,n,r,s)}}return h?(s||(s=new Vw),Rve(e,t,n,r,a,s)):!1}var Fve=Lve,Bve=Fve,A2=po;function zz(e,t,n,r,a){return e===t?!0:e==null||t==null||!A2(e)&&!A2(t)?e!==e&&t!==t:Bve(e,t,n,r,zz,a)}var TC=zz,Uve=Ez,zve=TC,qve=1,Wve=2;function Hve(e,t,n,r){var a=n.length,s=a,o=!r;if(e==null)return!s;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){l=n[a];var c=l[0],u=e[c],f=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var d=new Uve;if(r)var h=r(u,f,c,e,t,d);if(!(h===void 0?zve(f,u,qve|Wve,r,d):h))return!1}}return!0}var Vve=Hve,Kve=Pl;function Gve(e){return e===e&&!Kve(e)}var qz=Gve,Yve=qz,Xve=zb;function Jve(e){for(var t=Xve(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Yve(a)]}return t}var Qve=Jve;function Zve(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var Wz=Zve,exe=Vve,txe=Qve,nxe=Wz;function rxe(e){var t=txe(e);return t.length==1&&t[0][2]?nxe(t[0][0],t[0][1]):function(n){return n===e||exe(n,e,t)}}var axe=rxe;function ixe(e,t){return e!=null&&t in Object(e)}var sxe=ixe,oxe=QU,lxe=AC,cxe=Ea,uxe=EC,dxe=PC,fxe=Nb;function hxe(e,t,n){t=oxe(t,e);for(var r=-1,a=t.length,s=!1;++r<a;){var o=fxe(t[r]);if(!(s=e!=null&&n(e,o)))break;e=e[o]}return s||++r!=a?s:(a=e==null?0:e.length,!!a&&dxe(a)&&uxe(o,a)&&(cxe(e)||lxe(e)))}var mxe=hxe,pxe=sxe,gxe=mxe;function vxe(e,t){return e!=null&&gxe(e,t,pxe)}var xxe=vxe,yxe=TC,bxe=ZU,wxe=xxe,jxe=uC,_xe=qz,kxe=Wz,Sxe=Nb,Nxe=1,Cxe=2;function Axe(e,t){return jxe(e)&&_xe(t)?kxe(Sxe(e),t):function(n){var r=bxe(n,e);return r===void 0&&r===t?wxe(n,e):yxe(t,r,Nxe|Cxe)}}var Exe=Axe;function Pxe(e){return e}var gf=Pxe;function Txe(e){return function(t){return t==null?void 0:t[e]}}var Oxe=Txe,Ixe=vC;function Rxe(e){return function(t){return Ixe(t,e)}}var Mxe=Rxe,Dxe=Oxe,$xe=Mxe,Lxe=uC,Fxe=Nb;function Bxe(e){return Lxe(e)?Dxe(Fxe(e)):$xe(e)}var Uxe=Bxe,zxe=axe,qxe=Exe,Wxe=gf,Hxe=Ea,Vxe=Uxe;function Kxe(e){return typeof e=="function"?e:e==null?Wxe:typeof e=="object"?Hxe(e)?qxe(e[0],e[1]):zxe(e):Vxe(e)}var Tl=Kxe;function Gxe(e,t,n,r){for(var a=e.length,s=n+(r?1:-1);r?s--:++s<a;)if(t(e[s],s,e))return s;return-1}var Hz=Gxe;function Yxe(e){return e!==e}var Xxe=Yxe;function Jxe(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var Qxe=Jxe,Zxe=Hz,eye=Xxe,tye=Qxe;function nye(e,t,n){return t===t?tye(e,t,n):Zxe(e,eye,n)}var rye=nye,aye=rye;function iye(e,t){var n=e==null?0:e.length;return!!n&&aye(e,t,0)>-1}var sye=iye;function oye(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var lye=oye;function cye(){}var uye=cye,Kw=Bz,dye=uye,fye=CC,hye=1/0,mye=Kw&&1/fye(new Kw([,-0]))[1]==hye?function(e){return new Kw(e)}:dye,pye=mye,gye=Pz,vye=sye,xye=lye,yye=Oz,bye=pye,wye=CC,jye=200;function _ye(e,t,n){var r=-1,a=vye,s=e.length,o=!0,l=[],c=l;if(n)o=!1,a=xye;else if(s>=jye){var u=t?null:bye(e);if(u)return wye(u);o=!1,a=yye,c=new gye}else c=t?[]:l;e:for(;++r<s;){var f=e[r],d=t?t(f):f;if(f=n||f!==0?f:0,o&&d===d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),l.push(f)}else a(c,d,n)||(c!==l&&c.push(d),l.push(f))}return l}var kye=_ye,Sye=Tl,Nye=kye;function Cye(e,t){return e&&e.length?Nye(e,Sye(t)):[]}var Aye=Cye;const E2=fn(Aye);function Vz(e,t,n){return t===!0?E2(e,n):Bt(t)?E2(e,t):e}function Pd(e){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pd(e)}var Eye=["ref"];function P2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ts(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P2(Object(n),!0).forEach(function(r){qb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gz(r.key),r)}}function Tye(e,t,n){return t&&T2(e.prototype,t),n&&T2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oye(e,t,n){return t=gx(t),Iye(e,Kz()?Reflect.construct(t,n||[],gx(e).constructor):t.apply(e,n))}function Iye(e,t){if(t&&(Pd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rye(e)}function Rye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kz=function(){return!!e})()}function gx(e){return gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gx(e)}function Mye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I_(e,t)}function I_(e,t){return I_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},I_(e,t)}function qb(e,t,n){return t=Gz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gz(e){var t=Dye(e,"string");return Pd(t)=="symbol"?t:t+""}function Dye(e,t){if(Pd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ye(e,t){if(e==null)return{};var n=Lye(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Lye(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Fye(e){return e.value}function Bye(e,t){if(V.isValidElement(e))return V.cloneElement(e,t);if(typeof e=="function")return V.createElement(e,t);t.ref;var n=$ye(t,Eye);return V.createElement(NC,n)}var O2=1,ii=function(e){function t(){var n;Pye(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=Oye(this,t,[].concat(a)),qb(n,"lastBoundingBox",{width:-1,height:-1}),n}return Mye(t,e),Tye(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>O2||Math.abs(a.height-this.lastBoundingBox.height)>O2)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ts({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,s=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,f=a.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();d={left:((u||0)-m.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((f||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ts(Ts({},d),h)}},{key:"render",value:function(){var r=this,a=this.props,s=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,d=Ts(Ts({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return V.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(m){r.wrapperNode=m}},Bye(s,Ts(Ts({},this.props),{},{payload:Vz(f,u,Fye)})))}}],[{key:"getWithHeight",value:function(r,a){var s=Ts(Ts({},this.defaultProps),r.props),o=s.layout;return o==="vertical"&&qe(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(p.PureComponent);qb(ii,"displayName","Legend");qb(ii,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var I2=Ip,Uye=AC,zye=Ea,R2=I2?I2.isConcatSpreadable:void 0;function qye(e){return zye(e)||Uye(e)||!!(R2&&e&&e[R2])}var Wye=qye,Hye=Rz,Vye=Wye;function Yz(e,t,n,r,a){var s=-1,o=e.length;for(n||(n=Vye),a||(a=[]);++s<o;){var l=e[s];t>0&&n(l)?t>1?Yz(l,t-1,n,r,a):Hye(a,l):r||(a[a.length]=l)}return a}var Xz=Yz;function Kye(e){return function(t,n,r){for(var a=-1,s=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++a];if(n(s[c],c,s)===!1)break}return t}}var Gye=Kye,Yye=Gye,Xye=Yye(),Jye=Xye,Qye=Jye,Zye=zb;function ebe(e,t){return e&&Qye(e,t,Zye)}var Jz=ebe,tbe=Mp;function nbe(e,t){return function(n,r){if(n==null)return n;if(!tbe(n))return e(n,r);for(var a=n.length,s=t?a:-1,o=Object(n);(t?s--:++s<a)&&r(o[s],s,o)!==!1;);return n}}var rbe=nbe,abe=Jz,ibe=rbe,sbe=ibe(abe),OC=sbe,obe=OC,lbe=Mp;function cbe(e,t){var n=-1,r=lbe(e)?Array(e.length):[];return obe(e,function(a,s,o){r[++n]=t(a,s,o)}),r}var Qz=cbe;function ube(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var dbe=ube,M2=cf;function fbe(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,s=M2(e),o=t!==void 0,l=t===null,c=t===t,u=M2(t);if(!l&&!u&&!s&&e>t||s&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!a)return 1;if(!r&&!s&&!u&&e<t||u&&n&&a&&!r&&!s||l&&n&&a||!o&&a||!c)return-1}return 0}var hbe=fbe,mbe=hbe;function pbe(e,t,n){for(var r=-1,a=e.criteria,s=t.criteria,o=a.length,l=n.length;++r<o;){var c=mbe(a[r],s[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return e.index-t.index}var gbe=pbe,Gw=gC,vbe=vC,xbe=Tl,ybe=Qz,bbe=dbe,wbe=$z,jbe=gbe,_be=gf,kbe=Ea;function Sbe(e,t,n){t.length?t=Gw(t,function(s){return kbe(s)?function(o){return vbe(o,s.length===1?s[0]:s)}:s}):t=[_be];var r=-1;t=Gw(t,wbe(xbe));var a=ybe(e,function(s,o,l){var c=Gw(t,function(u){return u(s)});return{criteria:c,index:++r,value:s}});return bbe(a,function(s,o){return jbe(s,o,n)})}var Nbe=Sbe;function Cbe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Abe=Cbe,Ebe=Abe,D2=Math.max;function Pbe(e,t,n){return t=D2(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=D2(r.length-t,0),o=Array(s);++a<s;)o[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),Ebe(e,this,l)}}var Tbe=Pbe;function Obe(e){return function(){return e}}var Ibe=Obe,Rbe=Qc,Mbe=function(){try{var e=Rbe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Zz=Mbe,Dbe=Ibe,$2=Zz,$be=gf,Lbe=$2?function(e,t){return $2(e,"toString",{configurable:!0,enumerable:!1,value:Dbe(t),writable:!0})}:$be,Fbe=Lbe,Bbe=800,Ube=16,zbe=Date.now;function qbe(e){var t=0,n=0;return function(){var r=zbe(),a=Ube-(r-n);if(n=r,a>0){if(++t>=Bbe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Wbe=qbe,Hbe=Fbe,Vbe=Wbe,Kbe=Vbe(Hbe),Gbe=Kbe,Ybe=gf,Xbe=Tbe,Jbe=Gbe;function Qbe(e,t){return Jbe(Xbe(e,t,Ybe),e+"")}var Zbe=Qbe,e0e=fC,t0e=Mp,n0e=EC,r0e=Pl;function a0e(e,t,n){if(!r0e(n))return!1;var r=typeof t;return(r=="number"?t0e(n)&&n0e(t,n.length):r=="string"&&t in n)?e0e(n[t],e):!1}var Wb=a0e,i0e=Xz,s0e=Nbe,o0e=Zbe,L2=Wb,l0e=o0e(function(e,t){if(e==null)return[];var n=t.length;return n>1&&L2(e,t[0],t[1])?t=[]:n>2&&L2(t[0],t[1],t[2])&&(t=[t[0]]),s0e(e,i0e(t,1),[])}),c0e=l0e;const IC=fn(c0e);function gm(e){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gm(e)}function R_(){return R_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R_.apply(this,arguments)}function u0e(e,t){return m0e(e)||h0e(e,t)||f0e(e,t)||d0e()}function d0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f0e(e,t){if(e){if(typeof e=="string")return F2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F2(e,t)}}function F2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function m0e(e){if(Array.isArray(e))return e}function B2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Yw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B2(Object(n),!0).forEach(function(r){p0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function p0e(e,t,n){return t=g0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g0e(e){var t=v0e(e,"string");return gm(t)=="symbol"?t:t+""}function v0e(e,t){if(gm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x0e(e){return Array.isArray(e)&&mr(e[0])&&mr(e[1])?e.join(" ~ "):e}var y0e=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,s=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,d=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,v=t.label,x=t.labelFormatter,y=t.accessibilityLayer,b=y===void 0?!1:y,w=function(){if(f&&f.length){var D={padding:0,margin:0},L=(h?IC(f,h):f).map(function(B,U){if(B.type==="none")return null;var $=Yw({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},l),O=B.formatter||d||x0e,T=B.value,R=B.name,C=T,F=R;if(O&&C!=null&&F!=null){var M=O(T,R,B,U,f);if(Array.isArray(M)){var A=u0e(M,2);C=A[0],F=A[1]}else C=M}return V.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:$},mr(F)?V.createElement("span",{className:"recharts-tooltip-item-name"},F):null,mr(F)?V.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,V.createElement("span",{className:"recharts-tooltip-item-value"},C),V.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return V.createElement("ul",{className:"recharts-tooltip-item-list",style:D},L)}return null},j=Yw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=Yw({margin:0},u),_=!sn(v),S=_?v:"",E=Zt("recharts-default-tooltip",m),N=Zt("recharts-tooltip-label",g);_&&x&&f!==void 0&&f!==null&&(S=x(v,f));var I=b?{role:"status","aria-live":"assertive"}:{};return V.createElement("div",R_({className:E,style:j},I),V.createElement("p",{className:N,style:k},V.isValidElement(S)?S:"".concat(S)),w())};function vm(e){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(e)}function Ng(e,t,n){return t=b0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b0e(e){var t=w0e(e,"string");return vm(t)=="symbol"?t:t+""}function w0e(e,t){if(vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qf="recharts-tooltip-wrapper",j0e={visibility:"hidden"};function _0e(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Zt(qf,Ng(Ng(Ng(Ng({},"".concat(qf,"-right"),qe(n)&&t&&qe(t.x)&&n>=t.x),"".concat(qf,"-left"),qe(n)&&t&&qe(t.x)&&n<t.x),"".concat(qf,"-bottom"),qe(r)&&t&&qe(t.y)&&r>=t.y),"".concat(qf,"-top"),qe(r)&&t&&qe(t.y)&&r<t.y))}function U2(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(s&&qe(s[r]))return s[r];var f=n[r]-l-a,d=n[r]+a;if(t[r])return o[r]?f:d;if(o[r]){var h=f,m=c[r];return h<m?Math.max(d,c[r]):Math.max(f,c[r])}var g=d+l,v=c[r]+u;return g>v?Math.max(f,c[r]):Math.max(d,c[r])}function k0e(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function S0e(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,f,d;return o.height>0&&o.width>0&&n?(f=U2({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=U2({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=k0e({translateX:f,translateY:d,useTranslate3d:l})):u=j0e,{cssProperties:u,cssClasses:_0e({translateX:f,translateY:d,coordinate:n})}}function Td(e){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Td(e)}function z2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function q2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z2(Object(n),!0).forEach(function(r){D_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t6(r.key),r)}}function A0e(e,t,n){return t&&C0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function E0e(e,t,n){return t=vx(t),P0e(e,e6()?Reflect.construct(t,n||[],vx(e).constructor):t.apply(e,n))}function P0e(e,t){if(t&&(Td(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T0e(e)}function T0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e6=function(){return!!e})()}function vx(e){return vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vx(e)}function O0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M_(e,t)}function M_(e,t){return M_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},M_(e,t)}function D_(e,t,n){return t=t6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t6(e){var t=I0e(e,"string");return Td(t)=="symbol"?t:t+""}function I0e(e,t){if(Td(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var W2=1,R0e=function(e){function t(){var n;N0e(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=E0e(this,t,[].concat(a)),D_(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),D_(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),n}return O0e(t,e),A0e(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>W2||Math.abs(r.height-this.state.lastBoundingBox.height)>W2)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,f=a.coordinate,d=a.hasPayload,h=a.isAnimationActive,m=a.offset,g=a.position,v=a.reverseDirection,x=a.useTranslate3d,y=a.viewBox,b=a.wrapperStyle,w=S0e({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:m,position:g,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:y}),j=w.cssClasses,k=w.cssProperties,_=q2(q2({transition:h&&s?"transform ".concat(l,"ms ").concat(c):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},b);return V.createElement("div",{tabIndex:-1,className:j,style:_,ref:function(E){r.wrapperNode=E}},u)}}])}(p.PureComponent),M0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ll={isSsr:M0e(),get:function(t){return ll[t]},set:function(t,n){if(typeof t=="string")ll[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(a){ll[a]=t[a]})}}};function Od(e){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Od(e)}function H2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function V2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H2(Object(n),!0).forEach(function(r){RC(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function D0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r6(r.key),r)}}function L0e(e,t,n){return t&&$0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function F0e(e,t,n){return t=xx(t),B0e(e,n6()?Reflect.construct(t,n||[],xx(e).constructor):t.apply(e,n))}function B0e(e,t){if(t&&(Od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U0e(e)}function U0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n6=function(){return!!e})()}function xx(e){return xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xx(e)}function z0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$_(e,t)}function $_(e,t){return $_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},$_(e,t)}function RC(e,t,n){return t=r6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r6(e){var t=q0e(e,"string");return Od(t)=="symbol"?t:t+""}function q0e(e,t){if(Od(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W0e(e){return e.dataKey}function H0e(e,t){return V.isValidElement(e)?V.cloneElement(e,t):typeof e=="function"?V.createElement(e,t):V.createElement(y0e,t)}var Qn=function(e){function t(){return D0e(this,t),F0e(this,t,arguments)}return z0e(t,e),L0e(t,[{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,f=a.coordinate,d=a.filterNull,h=a.isAnimationActive,m=a.offset,g=a.payload,v=a.payloadUniqBy,x=a.position,y=a.reverseDirection,b=a.useTranslate3d,w=a.viewBox,j=a.wrapperStyle,k=g??[];d&&k.length&&(k=Vz(g.filter(function(S){return S.value!=null&&(S.hide!==!0||r.props.includeHidden)}),v,W0e));var _=k.length>0;return V.createElement(R0e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:s,coordinate:f,hasPayload:_,offset:m,position:x,reverseDirection:y,useTranslate3d:b,viewBox:w,wrapperStyle:j},H0e(u,V2(V2({},this.props),{},{payload:k})))}}])}(p.PureComponent);RC(Qn,"displayName","Tooltip");RC(Qn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ll.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var V0e=ks,K0e=function(){return V0e.Date.now()},G0e=K0e,Y0e=/\s/;function X0e(e){for(var t=e.length;t--&&Y0e.test(e.charAt(t)););return t}var J0e=X0e,Q0e=J0e,Z0e=/^\s+/;function ewe(e){return e&&e.slice(0,Q0e(e)+1).replace(Z0e,"")}var twe=ewe,nwe=twe,K2=Pl,rwe=cf,G2=NaN,awe=/^[-+]0x[0-9a-f]+$/i,iwe=/^0b[01]+$/i,swe=/^0o[0-7]+$/i,owe=parseInt;function lwe(e){if(typeof e=="number")return e;if(rwe(e))return G2;if(K2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=K2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=nwe(e);var n=iwe.test(e);return n||swe.test(e)?owe(e.slice(2),n?2:8):awe.test(e)?G2:+e}var a6=lwe,cwe=Pl,Xw=G0e,Y2=a6,uwe="Expected a function",dwe=Math.max,fwe=Math.min;function hwe(e,t,n){var r,a,s,o,l,c,u=0,f=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(uwe);t=Y2(t)||0,cwe(n)&&(f=!!n.leading,d="maxWait"in n,s=d?dwe(Y2(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h);function m(_){var S=r,E=a;return r=a=void 0,u=_,o=e.apply(E,S),o}function g(_){return u=_,l=setTimeout(y,t),f?m(_):o}function v(_){var S=_-c,E=_-u,N=t-S;return d?fwe(N,s-E):N}function x(_){var S=_-c,E=_-u;return c===void 0||S>=t||S<0||d&&E>=s}function y(){var _=Xw();if(x(_))return b(_);l=setTimeout(y,v(_))}function b(_){return l=void 0,h&&r?m(_):(r=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,r=c=a=l=void 0}function j(){return l===void 0?o:b(Xw())}function k(){var _=Xw(),S=x(_);if(r=arguments,a=this,c=_,S){if(l===void 0)return g(c);if(d)return clearTimeout(l),l=setTimeout(y,t),m(c)}return l===void 0&&(l=setTimeout(y,t)),o}return k.cancel=w,k.flush=j,k}var mwe=hwe,pwe=mwe,gwe=Pl,vwe="Expected a function";function xwe(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(vwe);return gwe(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),pwe(e,t,{leading:r,maxWait:t,trailing:a})}var ywe=xwe;const i6=fn(ywe);function xm(e){"@babel/helpers - typeof";return xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xm(e)}function X2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Cg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X2(Object(n),!0).forEach(function(r){bwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bwe(e,t,n){return t=wwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wwe(e){var t=jwe(e,"string");return xm(t)=="symbol"?t:t+""}function jwe(e,t){if(xm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _we(e,t){return Cwe(e)||Nwe(e,t)||Swe(e,t)||kwe()}function kwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Swe(e,t){if(e){if(typeof e=="string")return J2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J2(e,t)}}function J2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Cwe(e){if(Array.isArray(e))return e}var ei=p.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,s=e.width,o=s===void 0?"100%":s,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,v=g===void 0?0:g,x=e.id,y=e.className,b=e.onResize,w=e.style,j=w===void 0?{}:w,k=p.useRef(null),_=p.useRef();_.current=b,p.useImperativeHandle(t,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var S=p.useState({containerWidth:a.width,containerHeight:a.height}),E=_we(S,2),N=E[0],I=E[1],P=p.useCallback(function(L,B){I(function(U){var $=Math.round(L),O=Math.round(B);return U.containerWidth===$&&U.containerHeight===O?U:{containerWidth:$,containerHeight:O}})},[]);p.useEffect(function(){var L=function(R){var C,F=R[0].contentRect,M=F.width,A=F.height;P(M,A),(C=_.current)===null||C===void 0||C.call(_,M,A)};v>0&&(L=i6(L,v,{trailing:!0,leading:!1}));var B=new ResizeObserver(L),U=k.current.getBoundingClientRect(),$=U.width,O=U.height;return P($,O),B.observe(k.current),function(){B.disconnect()}},[P,v]);var D=p.useMemo(function(){var L=N.containerWidth,B=N.containerHeight;if(L<0||B<0)return null;Js(ic(o)||ic(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Js(!n||n>0,"The aspect(%s) must be greater than zero.",n);var U=ic(o)?L:o,$=ic(c)?B:c;n&&n>0&&(U?$=U/n:$&&(U=$*n),h&&$>h&&($=h)),Js(U>0||$>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,U,$,o,c,f,d,n);var O=!Array.isArray(m)&&Xs(m.type).endsWith("Chart");return V.Children.map(m,function(T){return V.isValidElement(T)?p.cloneElement(T,Cg({width:U,height:$},O?{style:Cg({height:"100%",width:"100%",maxHeight:$,maxWidth:U},T.props.style)}:{})):T})},[n,m,c,h,d,f,N,o]);return V.createElement("div",{id:x?"".concat(x):void 0,className:Zt("recharts-responsive-container",y),style:Cg(Cg({},j),{},{width:o,height:c,minWidth:f,minHeight:d,maxHeight:h}),ref:k},D)}),s6=function(t){return null};s6.displayName="Cell";function ym(e){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ym(e)}function Q2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function L_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q2(Object(n),!0).forEach(function(r){Awe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Awe(e,t,n){return t=Ewe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ewe(e){var t=Pwe(e,"string");return ym(t)=="symbol"?t:t+""}function Pwe(e,t){if(ym(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pu={widthCache:{},cacheCount:0},Twe=2e3,Owe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Z2="recharts_measurement_span";function Iwe(e){var t=L_({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var kh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ll.isSsr)return{width:0,height:0};var r=Iwe(n),a=JSON.stringify({text:t,copyStyle:r});if(pu.widthCache[a])return pu.widthCache[a];try{var s=document.getElementById(Z2);s||(s=document.createElement("span"),s.setAttribute("id",Z2),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=L_(L_({},Owe),r);Object.assign(s.style,o),s.textContent="".concat(t);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return pu.widthCache[a]=c,++pu.cacheCount>Twe&&(pu.cacheCount=0,pu.widthCache={}),c}catch{return{width:0,height:0}}},Rwe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function bm(e){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(e)}function yx(e,t){return Lwe(e)||$we(e,t)||Dwe(e,t)||Mwe()}function Mwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dwe(e,t){if(e){if(typeof e=="string")return eO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eO(e,t)}}function eO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $we(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Lwe(e){if(Array.isArray(e))return e}function Fwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Uwe(r.key),r)}}function Bwe(e,t,n){return t&&tO(e.prototype,t),n&&tO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Uwe(e){var t=zwe(e,"string");return bm(t)=="symbol"?t:t+""}function zwe(e,t){if(bm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var nO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qwe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Wwe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,o6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Hwe=Object.keys(o6),zu="NaN";function Vwe(e,t){return e*o6[t]}var Ag=function(){function e(t,n){Fwe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!qwe.test(n)&&(this.num=NaN,this.unit=""),Hwe.includes(n)&&(this.num=Vwe(t,n),this.unit="px")}return Bwe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=Wwe.exec(n))!==null&&r!==void 0?r:[],s=yx(a,3),o=s[1],l=s[2];return new e(parseFloat(o),l??"")}}])}();function l6(e){if(e.includes(zu))return zu;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=nO.exec(t))!==null&&n!==void 0?n:[],a=yx(r,4),s=a[1],o=a[2],l=a[3],c=Ag.parse(s??""),u=Ag.parse(l??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return zu;t=t.replace(nO,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,h=(d=rO.exec(t))!==null&&d!==void 0?d:[],m=yx(h,4),g=m[1],v=m[2],x=m[3],y=Ag.parse(g??""),b=Ag.parse(x??""),w=v==="+"?y.add(b):y.subtract(b);if(w.isNaN())return zu;t=t.replace(rO,w.toString())}return t}var aO=/\(([^()]*)\)/;function Kwe(e){for(var t=e;t.includes("(");){var n=aO.exec(t),r=yx(n,2),a=r[1];t=t.replace(aO,l6(a))}return t}function Gwe(e){var t=e.replace(/\s+/g,"");return t=Kwe(t),t=l6(t),t}function Ywe(e){try{return Gwe(e)}catch{return zu}}function Jw(e){var t=Ywe(e.slice(5,-1));return t===zu?"":t}var Xwe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Jwe=["dx","dy","angle","className","breakAll"];function F_(){return F_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F_.apply(this,arguments)}function iO(e,t){if(e==null)return{};var n=Qwe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qwe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function sO(e,t){return nje(e)||tje(e,t)||eje(e,t)||Zwe()}function Zwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eje(e,t){if(e){if(typeof e=="string")return oO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oO(e,t)}}function oO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function nje(e){if(Array.isArray(e))return e}var c6=/[ \f\n\r\t\v\u2028\u2029]+/,u6=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var s=[];sn(n)||(r?s=n.toString().split(""):s=n.toString().split(c6));var o=s.map(function(c){return{word:c,width:kh(c,a).width}}),l=r?0:kh("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},rje=function(t,n,r,a,s){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,f=qe(o),d=l,h=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return U.reduce(function($,O){var T=O.word,R=O.width,C=$[$.length-1];if(C&&(a==null||s||C.width+R+r<Number(a)))C.words.push(T),C.width+=R+r;else{var F={words:[T],width:R};$.push(F)}return $},[])},m=h(n),g=function(U){return U.reduce(function($,O){return $.width>O.width?$:O})};if(!f)return m;for(var v="",x=function(U){var $=d.slice(0,U),O=u6({breakAll:u,style:c,children:$+v}).wordsWithComputedWidth,T=h(O),R=T.length>o||g(T).width>Number(a);return[R,T]},y=0,b=d.length-1,w=0,j;y<=b&&w<=d.length-1;){var k=Math.floor((y+b)/2),_=k-1,S=x(_),E=sO(S,2),N=E[0],I=E[1],P=x(k),D=sO(P,1),L=D[0];if(!N&&!L&&(y=k+1),N&&L&&(b=k-1),!N&&L){j=I;break}w++}return j||m},lO=function(t){var n=sn(t)?[]:t.toString().split(c6);return[{words:n}]},aje=function(t){var n=t.width,r=t.scaleToFit,a=t.children,s=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!ll.isSsr){var c,u,f=u6({breakAll:o,children:a,style:s});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;c=d,u=h}else return lO(a);return rje({breakAll:o,children:a,maxLines:l,style:s},c,u,n,r)}return lO(a)},cO="#808080",bx=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,d=f===void 0?!1:f,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,v=g===void 0?"end":g,x=t.fill,y=x===void 0?cO:x,b=iO(t,Xwe),w=p.useMemo(function(){return aje({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:d,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,d,b.style,b.width]),j=b.dx,k=b.dy,_=b.angle,S=b.className,E=b.breakAll,N=iO(b,Jwe);if(!mr(r)||!mr(s))return null;var I=r+(qe(j)?j:0),P=s+(qe(k)?k:0),D;switch(v){case"start":D=Jw("calc(".concat(u,")"));break;case"middle":D=Jw("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:D=Jw("calc(".concat(w.length-1," * -").concat(l,")"));break}var L=[];if(d){var B=w[0].width,U=b.width;L.push("scale(".concat((qe(U)?U/B:1)/B,")"))}return _&&L.push("rotate(".concat(_,", ").concat(I,", ").concat(P,")")),L.length&&(N.transform=L.join(" ")),V.createElement("text",F_({},an(N,!0),{x:I,y:P,className:Zt("recharts-text",S),textAnchor:m,fill:y.includes("url")?cO:y}),w.map(function($,O){var T=$.words.join(E?"":" ");return V.createElement("tspan",{x:I,dy:O===0?D:l,key:"".concat(T,"-").concat(O)},T)}))};function cl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ije(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function MC(e){let t,n,r;e.length!==2?(t=cl,n=(l,c)=>cl(e(l),c),r=(l,c)=>e(l)-c):(t=e===cl||e===ije?e:sje,n=e,r=e);function a(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;n(l[d],c)<0?u=d+1:f=d}while(u<f)}return u}function s(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;n(l[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function o(l,c,u=0,f=l.length){const d=a(l,c,u,f-1);return d>u&&r(l[d-1],c)>-r(l[d],c)?d-1:d}return{left:a,center:o,right:s}}function sje(){return 0}function d6(e){return e===null?NaN:+e}function*oje(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const lje=MC(cl),Dp=lje.right;MC(d6).center;class uO extends Map{constructor(t,n=dje){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(dO(this,t))}has(t){return super.has(dO(this,t))}set(t,n){return super.set(cje(this,t),n)}delete(t){return super.delete(uje(this,t))}}function dO({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function cje({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function uje({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function dje(e){return e!==null&&typeof e=="object"?e.valueOf():e}function fje(e=cl){if(e===cl)return f6;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function f6(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const hje=Math.sqrt(50),mje=Math.sqrt(10),pje=Math.sqrt(2);function wx(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),s=r/Math.pow(10,a),o=s>=hje?10:s>=mje?5:s>=pje?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?wx(e,t,n*2):[l,c,u]}function B_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,s,o]=r?wx(t,e,n):wx(e,t,n);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function U_(e,t,n){return t=+t,e=+e,n=+n,wx(e,t,n)[2]}function z_(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?U_(t,e,n):U_(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function fO(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function hO(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function h6(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?f6:fje(a);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,f=Math.log(c),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(t-u*d/c+h)),g=Math.min(r,Math.floor(t+(c-u)*d/c+h));h6(e,t,m,g,a)}const s=e[t];let o=n,l=r;for(Wf(e,n,t),a(e[r],s)>0&&Wf(e,n,r);o<l;){for(Wf(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[n],s)===0?Wf(e,n,l):(++l,Wf(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function Wf(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function gje(e,t,n){if(e=Float64Array.from(oje(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return hO(e);if(t>=1)return fO(e);var r,a=(r-1)*t,s=Math.floor(a),o=fO(h6(e,s).subarray(0,s+1)),l=hO(e.subarray(s+1));return o+(l-o)*(a-s)}}function vje(e,t,n=d6){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,s=Math.floor(a),o=+n(e[s],s,e),l=+n(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function xje(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(a);++r<a;)s[r]=e+r*n;return s}function yi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function go(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const q_=Symbol("implicit");function DC(){var e=new uO,t=[],n=[],r=q_;function a(s){let o=e.get(s);if(o===void 0){if(r!==q_)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new uO;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return DC(t,n).unknown(r)},yi.apply(a,arguments),a}function wm(){var e=DC().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,s,o,l=!1,c=0,u=0,f=.5;delete e.unknown;function d(){var h=t().length,m=a<r,g=m?a:r,v=m?r:a;s=(v-g)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),g+=(v-g-s*(h-c))*f,o=s*(1-c),l&&(g=Math.round(g),o=Math.round(o));var x=xje(h).map(function(y){return g+s*y});return n(m?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([r,a]=h,r=+r,a=+a,d()):[r,a]},e.rangeRound=function(h){return[r,a]=h,r=+r,a=+a,l=!0,d()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,d()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),d()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),d()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.copy=function(){return wm(t(),[r,a]).round(l).paddingInner(c).paddingOuter(u).align(f)},yi.apply(d(),arguments)}function m6(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return m6(t())},e}function Sh(){return m6(wm.apply(null,arguments).paddingInner(1))}function $C(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function p6(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function $p(){}var jm=.7,jx=1/jm,rd="\\s*([+-]?\\d+)\\s*",_m="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ps="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yje=/^#([0-9a-f]{3,8})$/,bje=new RegExp(`^rgb\\(${rd},${rd},${rd}\\)$`),wje=new RegExp(`^rgb\\(${ps},${ps},${ps}\\)$`),jje=new RegExp(`^rgba\\(${rd},${rd},${rd},${_m}\\)$`),_je=new RegExp(`^rgba\\(${ps},${ps},${ps},${_m}\\)$`),kje=new RegExp(`^hsl\\(${_m},${ps},${ps}\\)$`),Sje=new RegExp(`^hsla\\(${_m},${ps},${ps},${_m}\\)$`),mO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$C($p,km,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:pO,formatHex:pO,formatHex8:Nje,formatHsl:Cje,formatRgb:gO,toString:gO});function pO(){return this.rgb().formatHex()}function Nje(){return this.rgb().formatHex8()}function Cje(){return g6(this).formatHsl()}function gO(){return this.rgb().formatRgb()}function km(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yje.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?vO(t):n===3?new ja(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Eg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Eg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=bje.exec(e))?new ja(t[1],t[2],t[3],1):(t=wje.exec(e))?new ja(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jje.exec(e))?Eg(t[1],t[2],t[3],t[4]):(t=_je.exec(e))?Eg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=kje.exec(e))?bO(t[1],t[2]/100,t[3]/100,1):(t=Sje.exec(e))?bO(t[1],t[2]/100,t[3]/100,t[4]):mO.hasOwnProperty(e)?vO(mO[e]):e==="transparent"?new ja(NaN,NaN,NaN,0):null}function vO(e){return new ja(e>>16&255,e>>8&255,e&255,1)}function Eg(e,t,n,r){return r<=0&&(e=t=n=NaN),new ja(e,t,n,r)}function Aje(e){return e instanceof $p||(e=km(e)),e?(e=e.rgb(),new ja(e.r,e.g,e.b,e.opacity)):new ja}function W_(e,t,n,r){return arguments.length===1?Aje(e):new ja(e,t,n,r??1)}function ja(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}$C(ja,W_,p6($p,{brighter(e){return e=e==null?jx:Math.pow(jx,e),new ja(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?jm:Math.pow(jm,e),new ja(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ja(vc(this.r),vc(this.g),vc(this.b),_x(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xO,formatHex:xO,formatHex8:Eje,formatRgb:yO,toString:yO}));function xO(){return`#${sc(this.r)}${sc(this.g)}${sc(this.b)}`}function Eje(){return`#${sc(this.r)}${sc(this.g)}${sc(this.b)}${sc((isNaN(this.opacity)?1:this.opacity)*255)}`}function yO(){const e=_x(this.opacity);return`${e===1?"rgb(":"rgba("}${vc(this.r)}, ${vc(this.g)}, ${vc(this.b)}${e===1?")":`, ${e})`}`}function _x(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function sc(e){return e=vc(e),(e<16?"0":"")+e.toString(16)}function bO(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Mi(e,t,n,r)}function g6(e){if(e instanceof Mi)return new Mi(e.h,e.s,e.l,e.opacity);if(e instanceof $p||(e=km(e)),!e)return new Mi;if(e instanceof Mi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Mi(o,l,c,e.opacity)}function Pje(e,t,n,r){return arguments.length===1?g6(e):new Mi(e,t,n,r??1)}function Mi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}$C(Mi,Pje,p6($p,{brighter(e){return e=e==null?jx:Math.pow(jx,e),new Mi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?jm:Math.pow(jm,e),new Mi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new ja(Qw(e>=240?e-240:e+120,a,r),Qw(e,a,r),Qw(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Mi(wO(this.h),Pg(this.s),Pg(this.l),_x(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_x(this.opacity);return`${e===1?"hsl(":"hsla("}${wO(this.h)}, ${Pg(this.s)*100}%, ${Pg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wO(e){return e=(e||0)%360,e<0?e+360:e}function Pg(e){return Math.max(0,Math.min(1,e||0))}function Qw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const LC=e=>()=>e;function Tje(e,t){return function(n){return e+n*t}}function Oje(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ije(e){return(e=+e)==1?v6:function(t,n){return n-t?Oje(t,n,e):LC(isNaN(t)?n:t)}}function v6(e,t){var n=t-e;return n?Tje(e,n):LC(isNaN(e)?t:e)}const jO=function e(t){var n=Ije(t);function r(a,s){var o=n((a=W_(a)).r,(s=W_(s)).r),l=n(a.g,s.g),c=n(a.b,s.b),u=v6(a.opacity,s.opacity);return function(f){return a.r=o(f),a.g=l(f),a.b=c(f),a.opacity=u(f),a+""}}return r.gamma=e,r}(1);function Rje(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(s){for(a=0;a<n;++a)r[a]=e[a]*(1-s)+t[a]*s;return r}}function Mje(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Dje(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)a[o]=vf(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=a[o](l);return s}}function $je(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function kx(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Lje(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=vf(e[a],t[a]):r[a]=t[a];return function(s){for(a in n)r[a]=n[a](s);return r}}var H_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zw=new RegExp(H_.source,"g");function Fje(e){return function(){return e}}function Bje(e){return function(t){return e(t)+""}}function Uje(e,t){var n=H_.lastIndex=Zw.lastIndex=0,r,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=H_.exec(e))&&(a=Zw.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:kx(r,a)})),n=Zw.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?Bje(c[0].x):Fje(t):(t=c.length,function(u){for(var f=0,d;f<t;++f)l[(d=c[f]).i]=d.x(u);return l.join("")})}function vf(e,t){var n=typeof t,r;return t==null||n==="boolean"?LC(t):(n==="number"?kx:n==="string"?(r=km(t))?(t=r,jO):Uje:t instanceof km?jO:t instanceof Date?$je:Mje(t)?Rje:Array.isArray(t)?Dje:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Lje:kx)(e,t)}function FC(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function zje(e,t){t===void 0&&(t=e,e=vf);for(var n=0,r=t.length-1,a=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[l](o-l)}}function qje(e){return function(){return e}}function Sx(e){return+e}var _O=[0,1];function aa(e){return e}function V_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:qje(isNaN(t)?NaN:.5)}function Wje(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Hje(e,t,n){var r=e[0],a=e[1],s=t[0],o=t[1];return a<r?(r=V_(a,r),s=n(o,s)):(r=V_(r,a),s=n(s,o)),function(l){return s(r(l))}}function Vje(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=V_(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(l){var c=Dp(e,l,1,r)-1;return s[c](a[c](l))}}function Lp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Hb(){var e=_O,t=_O,n=vf,r,a,s,o=aa,l,c,u;function f(){var h=Math.min(e.length,t.length);return o!==aa&&(o=Wje(e[0],e[h-1])),l=h>2?Vje:Hje,c=u=null,d}function d(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(r),t,n)))(r(o(h)))}return d.invert=function(h){return o(a((u||(u=l(t,e.map(r),kx)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,Sx),f()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),n=FC,f()},d.clamp=function(h){return arguments.length?(o=h?!0:aa,f()):o!==aa},d.interpolate=function(h){return arguments.length?(n=h,f()):n},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,m){return r=h,a=m,f()}}function BC(){return Hb()(aa,aa)}function Kje(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Nx(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Id(e){return e=Nx(Math.abs(e)),e?e[1]:NaN}function Gje(e,t){return function(n,r){for(var a=n.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(a-=l,a+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Yje(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Xje=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sm(e){if(!(t=Xje.exec(e)))throw new Error("invalid format: "+e);var t;return new UC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Sm.prototype=UC.prototype;function UC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}UC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jje(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var x6;function Qje(e,t){var n=Nx(e,t);if(!n)return e+"";var r=n[0],a=n[1],s=a-(x6=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Nx(e,Math.max(0,t+s-1))[0]}function kO(e,t){var n=Nx(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const SO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Kje,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>kO(e*100,t),r:kO,s:Qje,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function NO(e){return e}var CO=Array.prototype.map,AO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Zje(e){var t=e.grouping===void 0||e.thousands===void 0?NO:Gje(CO.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?NO:Yje(CO.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Sm(d);var h=d.fill,m=d.align,g=d.sign,v=d.symbol,x=d.zero,y=d.width,b=d.comma,w=d.precision,j=d.trim,k=d.type;k==="n"?(b=!0,k="g"):SO[k]||(w===void 0&&(w=12),j=!0,k="g"),(x||h==="0"&&m==="=")&&(x=!0,h="0",m="=");var _=v==="$"?n:v==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",S=v==="$"?r:/[%p]/.test(k)?o:"",E=SO[k],N=/[defgprs%]/.test(k);w=w===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function I(P){var D=_,L=S,B,U,$;if(k==="c")L=E(P)+L,P="";else{P=+P;var O=P<0||1/P<0;if(P=isNaN(P)?c:E(Math.abs(P),w),j&&(P=Jje(P)),O&&+P==0&&g!=="+"&&(O=!1),D=(O?g==="("?g:l:g==="-"||g==="("?"":g)+D,L=(k==="s"?AO[8+x6/3]:"")+L+(O&&g==="("?")":""),N){for(B=-1,U=P.length;++B<U;)if($=P.charCodeAt(B),48>$||$>57){L=($===46?a+P.slice(B+1):P.slice(B))+L,P=P.slice(0,B);break}}}b&&!x&&(P=t(P,1/0));var T=D.length+P.length+L.length,R=T<y?new Array(y-T+1).join(h):"";switch(b&&x&&(P=t(R+P,R.length?y-L.length:1/0),R=""),m){case"<":P=D+P+L+R;break;case"=":P=D+R+P+L;break;case"^":P=R.slice(0,T=R.length>>1)+D+P+L+R.slice(T);break;default:P=R+D+P+L;break}return s(P)}return I.toString=function(){return d+""},I}function f(d,h){var m=u((d=Sm(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(Id(h)/3)))*3,v=Math.pow(10,-g),x=AO[8+g/3];return function(y){return m(v*y)+x}}return{format:u,formatPrefix:f}}var Tg,zC,y6;e1e({thousands:",",grouping:[3],currency:["$",""]});function e1e(e){return Tg=Zje(e),zC=Tg.format,y6=Tg.formatPrefix,Tg}function t1e(e){return Math.max(0,-Id(Math.abs(e)))}function n1e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Id(t)/3)))*3-Id(Math.abs(e)))}function r1e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Id(t)-Id(e))+1}function b6(e,t,n,r){var a=z_(e,t,n),s;switch(r=Sm(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=n1e(a,o))&&(r.precision=s),y6(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=r1e(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=t1e(a))&&(r.precision=s-(r.type==="%")*2);break}}return zC(r)}function Ol(e){var t=e.domain;return e.ticks=function(n){var r=t();return B_(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return b6(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,s=r.length-1,o=r[a],l=r[s],c,u,f=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);f-- >0;){if(u=U_(o,l,n),u===c)return r[a]=o,r[s]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Cx(){var e=BC();return e.copy=function(){return Lp(e,Cx())},yi.apply(e,arguments),Ol(e)}function w6(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Sx),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return w6(e).unknown(t)},e=arguments.length?Array.from(e,Sx):[0,1],Ol(n)}function j6(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],s=e[r],o;return s<a&&(o=n,n=r,r=o,o=a,a=s,s=o),e[n]=t.floor(a),e[r]=t.ceil(s),e}function EO(e){return Math.log(e)}function PO(e){return Math.exp(e)}function a1e(e){return-Math.log(-e)}function i1e(e){return-Math.exp(-e)}function s1e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function o1e(e){return e===10?s1e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function l1e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function TO(e){return(t,n)=>-e(-t,n)}function qC(e){const t=e(EO,PO),n=t.domain;let r=10,a,s;function o(){return a=l1e(r),s=o1e(r),n()[0]<0?(a=TO(a),s=TO(s),e(a1e,i1e)):e(EO,PO),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let h=a(u),m=a(f),g,v;const x=l==null?10:+l;let y=[];if(!(r%1)&&m-h<x){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<r;++g)if(v=h<0?g/s(-h):g*s(h),!(v<u)){if(v>f)break;y.push(v)}}else for(;h<=m;++h)for(g=r-1;g>=1;--g)if(v=h>0?g/s(-h):g*s(h),!(v<u)){if(v>f)break;y.push(v)}y.length*2<x&&(y=B_(u,f,x))}else y=B_(h,m,Math.min(m-h,x)).map(s);return d?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Sm(c)).precision==null&&(c.trim=!0),c=zC(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return f=>{let d=f/s(Math.round(a(f)));return d*r<r-.5&&(d*=r),d<=u?c(f):""}},t.nice=()=>n(j6(n(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function _6(){const e=qC(Hb()).domain([1,10]);return e.copy=()=>Lp(e,_6()).base(e.base()),yi.apply(e,arguments),e}function OO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function IO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function WC(e){var t=1,n=e(OO(t),IO(t));return n.constant=function(r){return arguments.length?e(OO(t=+r),IO(t)):t},Ol(n)}function k6(){var e=WC(Hb());return e.copy=function(){return Lp(e,k6()).constant(e.constant())},yi.apply(e,arguments)}function RO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function c1e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function u1e(e){return e<0?-e*e:e*e}function HC(e){var t=e(aa,aa),n=1;function r(){return n===1?e(aa,aa):n===.5?e(c1e,u1e):e(RO(n),RO(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Ol(t)}function VC(){var e=HC(Hb());return e.copy=function(){return Lp(e,VC()).exponent(e.exponent())},yi.apply(e,arguments),e}function d1e(){return VC.apply(null,arguments).exponent(.5)}function MO(e){return Math.sign(e)*e*e}function f1e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function S6(){var e=BC(),t=[0,1],n=!1,r;function a(s){var o=f1e(e(s));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(s){return e.invert(MO(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,Sx)).map(MO)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(n=!!s,a):n},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return S6(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},yi.apply(a,arguments),Ol(a)}function N6(){var e=[],t=[],n=[],r;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=vje(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Dp(n,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(cl),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return N6().domain(e).range(t).unknown(r)},yi.apply(s,arguments)}function C6(){var e=0,t=1,n=1,r=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Dp(r,c,0,n)]:s}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return C6().domain([e,t]).range(a).unknown(s)},yi.apply(Ol(o),arguments)}function A6(){var e=[.5],t=[0,1],n,r=1;function a(s){return s!=null&&s<=s?t[Dp(e,s,0,r)]:n}return a.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return A6().domain(e).range(t).unknown(n)},yi.apply(a,arguments)}const ej=new Date,tj=new Date;function gr(e,t,n,r){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>gr(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),n&&(a.count=(s,o)=>(ej.setTime(+s),tj.setTime(+o),e(ej),e(tj),Math.floor(n(ej,tj))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(r?o=>r(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const Ax=gr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ax.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?gr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ax);Ax.range;const qs=1e3,ci=qs*60,Ws=ci*60,lo=Ws*24,KC=lo*7,DO=lo*30,nj=lo*365,oc=gr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*qs)},(e,t)=>(t-e)/qs,e=>e.getUTCSeconds());oc.range;const GC=gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qs)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getMinutes());GC.range;const YC=gr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getUTCMinutes());YC.range;const XC=gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qs-e.getMinutes()*ci)},(e,t)=>{e.setTime(+e+t*Ws)},(e,t)=>(t-e)/Ws,e=>e.getHours());XC.range;const JC=gr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ws)},(e,t)=>(t-e)/Ws,e=>e.getUTCHours());JC.range;const Fp=gr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ci)/lo,e=>e.getDate()-1);Fp.range;const Vb=gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lo,e=>e.getUTCDate()-1);Vb.range;const E6=gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lo,e=>Math.floor(e/lo));E6.range;function Zc(e){return gr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ci)/KC)}const Kb=Zc(0),Ex=Zc(1),h1e=Zc(2),m1e=Zc(3),Rd=Zc(4),p1e=Zc(5),g1e=Zc(6);Kb.range;Ex.range;h1e.range;m1e.range;Rd.range;p1e.range;g1e.range;function eu(e){return gr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/KC)}const Gb=eu(0),Px=eu(1),v1e=eu(2),x1e=eu(3),Md=eu(4),y1e=eu(5),b1e=eu(6);Gb.range;Px.range;v1e.range;x1e.range;Md.range;y1e.range;b1e.range;const QC=gr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());QC.range;const ZC=gr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ZC.range;const co=gr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());co.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});co.range;const uo=gr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());uo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});uo.range;function P6(e,t,n,r,a,s){const o=[[oc,1,qs],[oc,5,5*qs],[oc,15,15*qs],[oc,30,30*qs],[s,1,ci],[s,5,5*ci],[s,15,15*ci],[s,30,30*ci],[a,1,Ws],[a,3,3*Ws],[a,6,6*Ws],[a,12,12*Ws],[r,1,lo],[r,2,2*lo],[n,1,KC],[t,1,DO],[t,3,3*DO],[e,1,nj]];function l(u,f,d){const h=f<u;h&&([u,f]=[f,u]);const m=d&&typeof d.range=="function"?d:c(u,f,d),g=m?m.range(u,+f+1):[];return h?g.reverse():g}function c(u,f,d){const h=Math.abs(f-u)/d,m=MC(([,,x])=>x).right(o,h);if(m===o.length)return e.every(z_(u/nj,f/nj,d));if(m===0)return Ax.every(Math.max(z_(u,f,d),1));const[g,v]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(v)}return[l,c]}const[w1e,j1e]=P6(uo,ZC,Gb,E6,JC,YC),[_1e,k1e]=P6(co,QC,Kb,Fp,XC,GC);function rj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function aj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hf(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function S1e(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Vf(a),f=Kf(a),d=Vf(s),h=Kf(s),m=Vf(o),g=Kf(o),v=Vf(l),x=Kf(l),y=Vf(c),b=Kf(c),w={a:O,A:T,b:R,B:C,c:null,d:zO,e:zO,f:G1e,g:a_e,G:s_e,H:H1e,I:V1e,j:K1e,L:T6,m:Y1e,M:X1e,p:F,q:M,Q:HO,s:VO,S:J1e,u:Q1e,U:Z1e,V:e_e,w:t_e,W:n_e,x:null,X:null,y:r_e,Y:i_e,Z:o_e,"%":WO},j={a:A,A:W,b:G,B:Y,c:null,d:qO,e:qO,f:d_e,g:w_e,G:__e,H:l_e,I:c_e,j:u_e,L:I6,m:f_e,M:h_e,p:H,q:Q,Q:HO,s:VO,S:m_e,u:p_e,U:g_e,V:v_e,w:x_e,W:y_e,x:null,X:null,y:b_e,Y:j_e,Z:k_e,"%":WO},k={a:I,A:P,b:D,B:L,c:B,d:BO,e:BO,f:U1e,g:FO,G:LO,H:UO,I:UO,j:$1e,L:B1e,m:D1e,M:L1e,p:N,q:M1e,Q:q1e,s:W1e,S:F1e,u:P1e,U:T1e,V:O1e,w:E1e,W:I1e,x:U,X:$,y:FO,Y:LO,Z:R1e,"%":z1e};w.x=_(n,w),w.X=_(r,w),w.c=_(t,w),j.x=_(n,j),j.X=_(r,j),j.c=_(t,j);function _(X,re){return function(fe){var J=[],ye=-1,z=0,q=X.length,ae,se,be;for(fe instanceof Date||(fe=new Date(+fe));++ye<q;)X.charCodeAt(ye)===37&&(J.push(X.slice(z,ye)),(se=$O[ae=X.charAt(++ye)])!=null?ae=X.charAt(++ye):se=ae==="e"?" ":"0",(be=re[ae])&&(ae=be(fe,se)),J.push(ae),z=ye+1);return J.push(X.slice(z,ye)),J.join("")}}function S(X,re){return function(fe){var J=Hf(1900,void 0,1),ye=E(J,X,fe+="",0),z,q;if(ye!=fe.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(re&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(z=aj(Hf(J.y,0,1)),q=z.getUTCDay(),z=q>4||q===0?Px.ceil(z):Px(z),z=Vb.offset(z,(J.V-1)*7),J.y=z.getUTCFullYear(),J.m=z.getUTCMonth(),J.d=z.getUTCDate()+(J.w+6)%7):(z=rj(Hf(J.y,0,1)),q=z.getDay(),z=q>4||q===0?Ex.ceil(z):Ex(z),z=Fp.offset(z,(J.V-1)*7),J.y=z.getFullYear(),J.m=z.getMonth(),J.d=z.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),q="Z"in J?aj(Hf(J.y,0,1)).getUTCDay():rj(Hf(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(q+5)%7:J.w+J.U*7-(q+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,aj(J)):rj(J)}}function E(X,re,fe,J){for(var ye=0,z=re.length,q=fe.length,ae,se;ye<z;){if(J>=q)return-1;if(ae=re.charCodeAt(ye++),ae===37){if(ae=re.charAt(ye++),se=k[ae in $O?re.charAt(ye++):ae],!se||(J=se(X,fe,J))<0)return-1}else if(ae!=fe.charCodeAt(J++))return-1}return J}function N(X,re,fe){var J=u.exec(re.slice(fe));return J?(X.p=f.get(J[0].toLowerCase()),fe+J[0].length):-1}function I(X,re,fe){var J=m.exec(re.slice(fe));return J?(X.w=g.get(J[0].toLowerCase()),fe+J[0].length):-1}function P(X,re,fe){var J=d.exec(re.slice(fe));return J?(X.w=h.get(J[0].toLowerCase()),fe+J[0].length):-1}function D(X,re,fe){var J=y.exec(re.slice(fe));return J?(X.m=b.get(J[0].toLowerCase()),fe+J[0].length):-1}function L(X,re,fe){var J=v.exec(re.slice(fe));return J?(X.m=x.get(J[0].toLowerCase()),fe+J[0].length):-1}function B(X,re,fe){return E(X,t,re,fe)}function U(X,re,fe){return E(X,n,re,fe)}function $(X,re,fe){return E(X,r,re,fe)}function O(X){return o[X.getDay()]}function T(X){return s[X.getDay()]}function R(X){return c[X.getMonth()]}function C(X){return l[X.getMonth()]}function F(X){return a[+(X.getHours()>=12)]}function M(X){return 1+~~(X.getMonth()/3)}function A(X){return o[X.getUTCDay()]}function W(X){return s[X.getUTCDay()]}function G(X){return c[X.getUTCMonth()]}function Y(X){return l[X.getUTCMonth()]}function H(X){return a[+(X.getUTCHours()>=12)]}function Q(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var re=_(X+="",w);return re.toString=function(){return X},re},parse:function(X){var re=S(X+="",!1);return re.toString=function(){return X},re},utcFormat:function(X){var re=_(X+="",j);return re.toString=function(){return X},re},utcParse:function(X){var re=S(X+="",!0);return re.toString=function(){return X},re}}}var $O={"-":"",_:" ",0:"0"},kr=/^\s*\d+/,N1e=/^%/,C1e=/[\\^$*+?|[\]().{}]/g;function nn(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",s=a.length;return r+(s<n?new Array(n-s+1).join(t)+a:a)}function A1e(e){return e.replace(C1e,"\\$&")}function Vf(e){return new RegExp("^(?:"+e.map(A1e).join("|")+")","i")}function Kf(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function E1e(e,t,n){var r=kr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function P1e(e,t,n){var r=kr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function T1e(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function O1e(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function I1e(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function LO(e,t,n){var r=kr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function FO(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function R1e(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function M1e(e,t,n){var r=kr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function D1e(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function BO(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function $1e(e,t,n){var r=kr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function UO(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function L1e(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function F1e(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function B1e(e,t,n){var r=kr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function U1e(e,t,n){var r=kr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function z1e(e,t,n){var r=N1e.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function q1e(e,t,n){var r=kr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function W1e(e,t,n){var r=kr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function zO(e,t){return nn(e.getDate(),t,2)}function H1e(e,t){return nn(e.getHours(),t,2)}function V1e(e,t){return nn(e.getHours()%12||12,t,2)}function K1e(e,t){return nn(1+Fp.count(co(e),e),t,3)}function T6(e,t){return nn(e.getMilliseconds(),t,3)}function G1e(e,t){return T6(e,t)+"000"}function Y1e(e,t){return nn(e.getMonth()+1,t,2)}function X1e(e,t){return nn(e.getMinutes(),t,2)}function J1e(e,t){return nn(e.getSeconds(),t,2)}function Q1e(e){var t=e.getDay();return t===0?7:t}function Z1e(e,t){return nn(Kb.count(co(e)-1,e),t,2)}function O6(e){var t=e.getDay();return t>=4||t===0?Rd(e):Rd.ceil(e)}function e_e(e,t){return e=O6(e),nn(Rd.count(co(e),e)+(co(e).getDay()===4),t,2)}function t_e(e){return e.getDay()}function n_e(e,t){return nn(Ex.count(co(e)-1,e),t,2)}function r_e(e,t){return nn(e.getFullYear()%100,t,2)}function a_e(e,t){return e=O6(e),nn(e.getFullYear()%100,t,2)}function i_e(e,t){return nn(e.getFullYear()%1e4,t,4)}function s_e(e,t){var n=e.getDay();return e=n>=4||n===0?Rd(e):Rd.ceil(e),nn(e.getFullYear()%1e4,t,4)}function o_e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+nn(t/60|0,"0",2)+nn(t%60,"0",2)}function qO(e,t){return nn(e.getUTCDate(),t,2)}function l_e(e,t){return nn(e.getUTCHours(),t,2)}function c_e(e,t){return nn(e.getUTCHours()%12||12,t,2)}function u_e(e,t){return nn(1+Vb.count(uo(e),e),t,3)}function I6(e,t){return nn(e.getUTCMilliseconds(),t,3)}function d_e(e,t){return I6(e,t)+"000"}function f_e(e,t){return nn(e.getUTCMonth()+1,t,2)}function h_e(e,t){return nn(e.getUTCMinutes(),t,2)}function m_e(e,t){return nn(e.getUTCSeconds(),t,2)}function p_e(e){var t=e.getUTCDay();return t===0?7:t}function g_e(e,t){return nn(Gb.count(uo(e)-1,e),t,2)}function R6(e){var t=e.getUTCDay();return t>=4||t===0?Md(e):Md.ceil(e)}function v_e(e,t){return e=R6(e),nn(Md.count(uo(e),e)+(uo(e).getUTCDay()===4),t,2)}function x_e(e){return e.getUTCDay()}function y_e(e,t){return nn(Px.count(uo(e)-1,e),t,2)}function b_e(e,t){return nn(e.getUTCFullYear()%100,t,2)}function w_e(e,t){return e=R6(e),nn(e.getUTCFullYear()%100,t,2)}function j_e(e,t){return nn(e.getUTCFullYear()%1e4,t,4)}function __e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Md(e):Md.ceil(e),nn(e.getUTCFullYear()%1e4,t,4)}function k_e(){return"+0000"}function WO(){return"%"}function HO(e){return+e}function VO(e){return Math.floor(+e/1e3)}var gu,M6,D6;S_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function S_e(e){return gu=S1e(e),M6=gu.format,gu.parse,D6=gu.utcFormat,gu.utcParse,gu}function N_e(e){return new Date(e)}function C_e(e){return e instanceof Date?+e:+new Date(+e)}function eA(e,t,n,r,a,s,o,l,c,u){var f=BC(),d=f.invert,h=f.domain,m=u(".%L"),g=u(":%S"),v=u("%I:%M"),x=u("%I %p"),y=u("%a %d"),b=u("%b %d"),w=u("%B"),j=u("%Y");function k(_){return(c(_)<_?m:l(_)<_?g:o(_)<_?v:s(_)<_?x:r(_)<_?a(_)<_?y:b:n(_)<_?w:j)(_)}return f.invert=function(_){return new Date(d(_))},f.domain=function(_){return arguments.length?h(Array.from(_,C_e)):h().map(N_e)},f.ticks=function(_){var S=h();return e(S[0],S[S.length-1],_??10)},f.tickFormat=function(_,S){return S==null?k:u(S)},f.nice=function(_){var S=h();return(!_||typeof _.range!="function")&&(_=t(S[0],S[S.length-1],_??10)),_?h(j6(S,_)):f},f.copy=function(){return Lp(f,eA(e,t,n,r,a,s,o,l,c,u))},f}function A_e(){return yi.apply(eA(_1e,k1e,co,QC,Kb,Fp,XC,GC,oc,M6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function E_e(){return yi.apply(eA(w1e,j1e,uo,ZC,Gb,Vb,JC,YC,oc,D6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Yb(){var e=0,t=1,n,r,a,s,o=aa,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(a===0?.5:(d=(s(d)-n)*a,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=s(e=+e),r=s(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(h){var m,g;return arguments.length?([m,g]=h,o=d(m,g),u):[o(0),o(1)]}}return u.range=f(vf),u.rangeRound=f(FC),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return s=d,n=d(e),r=d(t),a=n===r?0:1/(r-n),u}}function Il(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function $6(){var e=Ol(Yb()(aa));return e.copy=function(){return Il(e,$6())},go.apply(e,arguments)}function L6(){var e=qC(Yb()).domain([1,10]);return e.copy=function(){return Il(e,L6()).base(e.base())},go.apply(e,arguments)}function F6(){var e=WC(Yb());return e.copy=function(){return Il(e,F6()).constant(e.constant())},go.apply(e,arguments)}function tA(){var e=HC(Yb());return e.copy=function(){return Il(e,tA()).exponent(e.exponent())},go.apply(e,arguments)}function P_e(){return tA.apply(null,arguments).exponent(.5)}function B6(){var e=[],t=aa;function n(r){if(r!=null&&!isNaN(r=+r))return t((Dp(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(cl),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,s)=>gje(e,s/r))},n.copy=function(){return B6(t).domain(e)},go.apply(n,arguments)}function Xb(){var e=0,t=.5,n=1,r=1,a,s,o,l,c,u=aa,f,d=!1,h;function m(v){return isNaN(v=+v)?h:(v=.5+((v=+f(v))-s)*(r*v<r*s?l:c),u(d?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,n]=v,a=f(e=+e),s=f(t=+t),o=f(n=+n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,m):[e,t,n]},m.clamp=function(v){return arguments.length?(d=!!v,m):d},m.interpolator=function(v){return arguments.length?(u=v,m):u};function g(v){return function(x){var y,b,w;return arguments.length?([y,b,w]=x,u=zje(v,[y,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=g(vf),m.rangeRound=g(FC),m.unknown=function(v){return arguments.length?(h=v,m):h},function(v){return f=v,a=v(e),s=v(t),o=v(n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,m}}function U6(){var e=Ol(Xb()(aa));return e.copy=function(){return Il(e,U6())},go.apply(e,arguments)}function z6(){var e=qC(Xb()).domain([.1,1,10]);return e.copy=function(){return Il(e,z6()).base(e.base())},go.apply(e,arguments)}function q6(){var e=WC(Xb());return e.copy=function(){return Il(e,q6()).constant(e.constant())},go.apply(e,arguments)}function nA(){var e=HC(Xb());return e.copy=function(){return Il(e,nA()).exponent(e.exponent())},go.apply(e,arguments)}function T_e(){return nA.apply(null,arguments).exponent(.5)}const KO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:wm,scaleDiverging:U6,scaleDivergingLog:z6,scaleDivergingPow:nA,scaleDivergingSqrt:T_e,scaleDivergingSymlog:q6,scaleIdentity:w6,scaleImplicit:q_,scaleLinear:Cx,scaleLog:_6,scaleOrdinal:DC,scalePoint:Sh,scalePow:VC,scaleQuantile:N6,scaleQuantize:C6,scaleRadial:S6,scaleSequential:$6,scaleSequentialLog:L6,scaleSequentialPow:tA,scaleSequentialQuantile:B6,scaleSequentialSqrt:P_e,scaleSequentialSymlog:F6,scaleSqrt:d1e,scaleSymlog:k6,scaleThreshold:A6,scaleTime:A_e,scaleUtc:E_e,tickFormat:b6},Symbol.toStringTag,{value:"Module"}));var O_e=cf;function I_e(e,t,n){for(var r=-1,a=e.length;++r<a;){var s=e[r],o=t(s);if(o!=null&&(l===void 0?o===o&&!O_e(o):n(o,l)))var l=o,c=s}return c}var W6=I_e;function R_e(e,t){return e>t}var M_e=R_e,D_e=W6,$_e=M_e,L_e=gf;function F_e(e){return e&&e.length?D_e(e,L_e,$_e):void 0}var B_e=F_e;const Jb=fn(B_e);function U_e(e,t){return e<t}var z_e=U_e,q_e=W6,W_e=z_e,H_e=gf;function V_e(e){return e&&e.length?q_e(e,H_e,W_e):void 0}var K_e=V_e;const Qb=fn(K_e);var G_e=gC,Y_e=Tl,X_e=Qz,J_e=Ea;function Q_e(e,t){var n=J_e(e)?G_e:X_e;return n(e,Y_e(t))}var Z_e=Q_e,eke=Xz,tke=Z_e;function nke(e,t){return eke(tke(e,t),1)}var rke=nke;const ake=fn(rke);var ike=TC;function ske(e,t){return ike(e,t)}var oke=ske;const rA=fn(oke);var xf=1e9,lke={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},iA,Ln=!0,gi="[DecimalError] ",xc=gi+"Invalid argument: ",aA=gi+"Exponent out of range: ",yf=Math.floor,Jl=Math.pow,cke=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,La,xr=1e7,On=7,H6=9007199254740991,Tx=yf(H6/On),it={};it.absoluteValue=it.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};it.comparedTo=it.cmp=function(e){var t,n,r,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===a?0:r>a^s.s<0?1:-1};it.decimalPlaces=it.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*On;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};it.dividedBy=it.div=function(e){return Qs(this,new this.constructor(e))};it.dividedToIntegerBy=it.idiv=function(e){var t=this,n=t.constructor;return yn(Qs(t,new n(e),0,1),n.precision)};it.equals=it.eq=function(e){return!this.cmp(e)};it.exponent=function(){return or(this)};it.greaterThan=it.gt=function(e){return this.cmp(e)>0};it.greaterThanOrEqualTo=it.gte=function(e){return this.cmp(e)>=0};it.isInteger=it.isint=function(){return this.e>this.d.length-2};it.isNegative=it.isneg=function(){return this.s<0};it.isPositive=it.ispos=function(){return this.s>0};it.isZero=function(){return this.s===0};it.lessThan=it.lt=function(e){return this.cmp(e)<0};it.lessThanOrEqualTo=it.lte=function(e){return this.cmp(e)<1};it.logarithm=it.log=function(e){var t,n=this,r=n.constructor,a=r.precision,s=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(La))throw Error(gi+"NaN");if(n.s<1)throw Error(gi+(n.s?"NaN":"-Infinity"));return n.eq(La)?new r(0):(Ln=!1,t=Qs(Nm(n,s),Nm(e,s),s),Ln=!0,yn(t,a))};it.minus=it.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?G6(t,e):V6(t,(e.s=-e.s,e))};it.modulo=it.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(gi+"NaN");return n.s?(Ln=!1,t=Qs(n,e,0,1).times(e),Ln=!0,n.minus(t)):yn(new r(n),a)};it.naturalExponential=it.exp=function(){return K6(this)};it.naturalLogarithm=it.ln=function(){return Nm(this)};it.negated=it.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};it.plus=it.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?V6(t,e):G6(t,(e.s=-e.s,e))};it.precision=it.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(xc+e);if(t=or(a)+1,r=a.d.length-1,n=r*On+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};it.squareRoot=it.sqrt=function(){var e,t,n,r,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(gi+"NaN")}for(e=or(l),Ln=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=us(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=yf((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(s=r,r=s.plus(Qs(l,s,o+2)).times(.5),us(s.d).slice(0,o)===(t=us(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(yn(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(t!="9999")break;o+=4}return Ln=!0,yn(r,n)};it.times=it.mul=function(e){var t,n,r,a,s,o,l,c,u,f=this,d=f.constructor,h=f.d,m=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,n=f.e+e.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,o=c,c=u,u=o),s=[],o=c+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=s[a]+m[r]*h[a-r-1]+t,s[a--]=l%xr|0,t=l/xr|0;s[a]=(s[a]+t)%xr|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,Ln?yn(e,d.precision):e};it.toDecimalPlaces=it.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(bs(e,0,xf),t===void 0?t=r.rounding:bs(t,0,8),yn(n,e+or(n)+1,t))};it.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=Fc(r,!0):(bs(e,0,xf),t===void 0?t=a.rounding:bs(t,0,8),r=yn(new a(r),e+1,t),n=Fc(r,!0,e+1)),n};it.toFixed=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?Fc(a):(bs(e,0,xf),t===void 0?t=s.rounding:bs(t,0,8),r=yn(new s(a),e+or(a)+1,t),n=Fc(r.abs(),!1,e+or(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};it.toInteger=it.toint=function(){var e=this,t=e.constructor;return yn(new t(e),or(e)+1,t.rounding)};it.toNumber=function(){return+this};it.toPower=it.pow=function(e){var t,n,r,a,s,o,l=this,c=l.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(La);if(l=new c(l),!l.s){if(e.s<1)throw Error(gi+"Infinity");return l}if(l.eq(La))return l;if(r=c.precision,e.eq(La))return yn(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,s=l.s,o){if((n=f<0?-f:f)<=H6){for(a=new c(La),t=Math.ceil(r/On+4),Ln=!1;n%2&&(a=a.times(l),YO(a.d,t)),n=yf(n/2),n!==0;)l=l.times(l),YO(l.d,t);return Ln=!0,e.s<0?new c(La).div(a):yn(a,r)}}else if(s<0)throw Error(gi+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Ln=!1,a=e.times(Nm(l,r+u)),Ln=!0,a=K6(a),a.s=s,a};it.toPrecision=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?(n=or(a),r=Fc(a,n<=s.toExpNeg||n>=s.toExpPos)):(bs(e,1,xf),t===void 0?t=s.rounding:bs(t,0,8),a=yn(new s(a),e,t),n=or(a),r=Fc(a,e<=n||n<=s.toExpNeg,e)),r};it.toSignificantDigits=it.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(bs(e,1,xf),t===void 0?t=r.rounding:bs(t,0,8)),yn(new r(n),e,t)};it.toString=it.valueOf=it.val=it.toJSON=it[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=or(e),n=e.constructor;return Fc(e,t<=n.toExpNeg||t>=n.toExpPos)};function V6(e,t){var n,r,a,s,o,l,c,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Ln?yn(t,d):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(r=c,s=-s,l=u.length):(r=u,a=o,l=c.length),o=Math.ceil(d/On),l=o>l?o+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/xr|0,c[s]%=xr;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Ln?yn(t,d):t}function bs(e,t,n){if(e!==~~e||e<t||e>n)throw Error(xc+e)}function us(e){var t,n,r,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)r=e[t]+"",n=On-r.length,n&&(s+=$o(n)),s+=r;o=e[t],r=o+"",n=On-r.length,n&&(s+=$o(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Qs=function(){function e(r,a){var s,o=0,l=r.length;for(r=r.slice();l--;)s=r[l]*a+o,r[l]=s%xr|0,o=s/xr|0;return o&&r.unshift(o),r}function t(r,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(r[l]!=a[l]){c=r[l]>a[l]?1:-1;break}return c}function n(r,a,s){for(var o=0;s--;)r[s]-=o,o=r[s]<a[s]?1:0,r[s]=o*xr+r[s]-a[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,s,o){var l,c,u,f,d,h,m,g,v,x,y,b,w,j,k,_,S,E,N=r.constructor,I=r.s==a.s?1:-1,P=r.d,D=a.d;if(!r.s)return new N(r);if(!a.s)throw Error(gi+"Division by zero");for(c=r.e-a.e,S=D.length,k=P.length,m=new N(I),g=m.d=[],u=0;D[u]==(P[u]||0);)++u;if(D[u]>(P[u]||0)&&--c,s==null?b=s=N.precision:o?b=s+(or(r)-or(a))+1:b=s,b<0)return new N(0);if(b=b/On+2|0,u=0,S==1)for(f=0,D=D[0],b++;(u<k||f)&&b--;u++)w=f*xr+(P[u]||0),g[u]=w/D|0,f=w%D|0;else{for(f=xr/(D[0]+1)|0,f>1&&(D=e(D,f),P=e(P,f),S=D.length,k=P.length),j=S,v=P.slice(0,S),x=v.length;x<S;)v[x++]=0;E=D.slice(),E.unshift(0),_=D[0],D[1]>=xr/2&&++_;do f=0,l=t(D,v,S,x),l<0?(y=v[0],S!=x&&(y=y*xr+(v[1]||0)),f=y/_|0,f>1?(f>=xr&&(f=xr-1),d=e(D,f),h=d.length,x=v.length,l=t(d,v,h,x),l==1&&(f--,n(d,S<h?E:D,h))):(f==0&&(l=f=1),d=D.slice()),h=d.length,h<x&&d.unshift(0),n(v,d,x),l==-1&&(x=v.length,l=t(D,v,S,x),l<1&&(f++,n(v,S<x?E:D,x))),x=v.length):l===0&&(f++,v=[0]),g[u++]=f,l&&v[0]?v[x++]=P[j]||0:(v=[P[j]],x=1);while((j++<k||v[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=c,yn(m,o?s+or(m)+1:s)}}();function K6(e,t){var n,r,a,s,o,l,c=0,u=0,f=e.constructor,d=f.precision;if(or(e)>16)throw Error(aA+or(e));if(!e.s)return new f(La);for(t==null?(Ln=!1,l=d):l=t,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(Jl(2,u))/Math.LN10*2+5|0,l+=r,n=a=s=new f(La),f.precision=l;;){if(a=yn(a.times(e),l),n=n.times(++c),o=s.plus(Qs(a,n,l)),us(o.d).slice(0,l)===us(s.d).slice(0,l)){for(;u--;)s=yn(s.times(s),l);return f.precision=d,t==null?(Ln=!0,yn(s,d)):s}s=o}}function or(e){for(var t=e.e*On,n=e.d[0];n>=10;n/=10)t++;return t}function ij(e,t,n){if(t>e.LN10.sd())throw Ln=!0,n&&(e.precision=n),Error(gi+"LN10 precision limit exceeded");return yn(new e(e.LN10),t)}function $o(e){for(var t="";e--;)t+="0";return t}function Nm(e,t){var n,r,a,s,o,l,c,u,f,d=1,h=10,m=e,g=m.d,v=m.constructor,x=v.precision;if(m.s<1)throw Error(gi+(m.s?"NaN":"-Infinity"));if(m.eq(La))return new v(0);if(t==null?(Ln=!1,u=x):u=t,m.eq(10))return t==null&&(Ln=!0),ij(v,u);if(u+=h,v.precision=u,n=us(g),r=n.charAt(0),s=or(m),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=us(m.d),r=n.charAt(0),d++;s=or(m),r>1?(m=new v("0."+n),s++):m=new v(r+"."+n.slice(1))}else return c=ij(v,u+2,x).times(s+""),m=Nm(new v(r+"."+n.slice(1)),u-h).plus(c),v.precision=x,t==null?(Ln=!0,yn(m,x)):m;for(l=o=m=Qs(m.minus(La),m.plus(La),u),f=yn(m.times(m),u),a=3;;){if(o=yn(o.times(f),u),c=l.plus(Qs(o,new v(a),u)),us(c.d).slice(0,u)===us(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(ij(v,u+2,x).times(s+""))),l=Qs(l,new v(d),u),v.precision=x,t==null?(Ln=!0,yn(l,x)):l;l=c,a+=2}}function GO(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=yf(n/On),e.d=[],r=(n+1)%On,n<0&&(r+=On),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=On;r<a;)e.d.push(+t.slice(r,r+=On));t=t.slice(r),r=On-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),Ln&&(e.e>Tx||e.e<-Tx))throw Error(aA+n)}else e.s=0,e.e=0,e.d=[0];return e}function yn(e,t,n){var r,a,s,o,l,c,u,f,d=e.d;for(o=1,s=d[0];s>=10;s/=10)o++;if(r=t-o,r<0)r+=On,a=t,u=d[f=0];else{if(f=Math.ceil((r+1)/On),s=d.length,f>=s)return e;for(u=s=d[f],o=1;s>=10;s/=10)o++;r%=On,a=r-On+o}if(n!==void 0&&(s=Jl(10,o-a-1),l=u/s%10|0,c=t<0||d[f+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?a>0?u/Jl(10,o-a):0:d[f-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return c?(s=or(e),d.length=1,t=t-s-1,d[0]=Jl(10,(On-t%On)%On),e.e=yf(-t/On)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(r==0?(d.length=f,s=1,f--):(d.length=f+1,s=Jl(10,On-r),d[f]=a>0?(u/Jl(10,o-a)%Jl(10,a)|0)*s:0),c)for(;;)if(f==0){(d[0]+=s)==xr&&(d[0]=1,++e.e);break}else{if(d[f]+=s,d[f]!=xr)break;d[f--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(Ln&&(e.e>Tx||e.e<-Tx))throw Error(aA+or(e));return e}function G6(e,t){var n,r,a,s,o,l,c,u,f,d,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ln?yn(t,m):t;if(c=e.d,d=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(f=o<0,f?(n=c,o=-o,l=d.length):(n=d,r=u,l=c.length),a=Math.max(Math.ceil(m/On),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=d.length,f=a<l,f&&(l=a),a=0;a<l;a++)if(c[a]!=d[a]){f=c[a]<d[a];break}o=0}for(f&&(n=c,c=d,d=n,t.s=-t.s),l=c.length,a=d.length-l;a>0;--a)c[l++]=0;for(a=d.length;a>o;){if(c[--a]<d[a]){for(s=a;s&&c[--s]===0;)c[s]=xr-1;--c[s],c[a]+=xr}c[a]-=d[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Ln?yn(t,m):t):new h(0)}function Fc(e,t,n){var r,a=or(e),s=us(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+$o(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+$o(-a-1)+s,n&&(r=n-o)>0&&(s+=$o(r))):a>=o?(s+=$o(a+1-o),n&&(r=n-a-1)>0&&(s=s+"."+$o(r))):((r=a+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(s+="."),s+=$o(r))),e.s<0?"-"+s:s}function YO(e,t){if(e.length>t)return e.length=t,!0}function Y6(e){var t,n,r;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(xc+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return GO(o,s.toString())}else if(typeof s!="string")throw Error(xc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,cke.test(s))GO(o,s);else throw Error(xc+s)}if(a.prototype=it,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Y6,a.config=a.set=uke,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function uke(e){if(!e||typeof e!="object")throw Error(gi+"Object expected");var t,n,r,a=["precision",1,xf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(yf(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(xc+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(xc+n+": "+r);return this}var iA=Y6(lke);La=new iA(1);const vn=iA;function dke(e){return pke(e)||mke(e)||hke(e)||fke()}function fke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hke(e,t){if(e){if(typeof e=="string")return K_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K_(e,t)}}function mke(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function pke(e){if(Array.isArray(e))return K_(e)}function K_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gke=function(t){return t},X6={"@@functional/placeholder":!0},J6=function(t){return t===X6},XO=function(t){return function n(){return arguments.length===0||arguments.length===1&&J6(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},vke=function e(t,n){return t===1?n:XO(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var o=a.filter(function(l){return l!==X6}).length;return o>=t?n.apply(void 0,a):e(t-o,XO(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=a.map(function(d){return J6(d)?c.shift():d});return n.apply(void 0,dke(f).concat(c))}))})},Zb=function(t){return vke(t.length,t)},G_=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},xke=Zb(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),yke=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return gke;var a=n.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},Y_=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},Q6=function(t){var n=null,r=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,r=t.apply(void 0,s)),r}};function bke(e){var t;return e===0?t=1:t=Math.floor(new vn(e).abs().log(10).toNumber())+1,t}function wke(e,t,n){for(var r=new vn(e),a=0,s=[];r.lt(t)&&a<1e5;)s.push(r.toNumber()),r=r.add(n),a++;return s}var jke=Zb(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),_ke=Zb(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),kke=Zb(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const e0={rangeStep:wke,getDigitCount:bke,interpolateNumber:jke,uninterpolateNumber:_ke,uninterpolateTruncation:kke};function X_(e){return Cke(e)||Nke(e)||Z6(e)||Ske()}function Ske(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nke(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Cke(e){if(Array.isArray(e))return J_(e)}function Cm(e,t){return Pke(e)||Eke(e,t)||Z6(e,t)||Ake()}function Ake(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z6(e,t){if(e){if(typeof e=="string")return J_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J_(e,t)}}function J_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Eke(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,s=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,s=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw s}}return n}}function Pke(e){if(Array.isArray(e))return e}function e8(e){var t=Cm(e,2),n=t[0],r=t[1],a=n,s=r;return n>r&&(a=r,s=n),[a,s]}function t8(e,t,n){if(e.lte(0))return new vn(0);var r=e0.getDigitCount(e.toNumber()),a=new vn(10).pow(r),s=e.div(a),o=r!==1?.05:.1,l=new vn(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new vn(Math.ceil(c))}function Tke(e,t,n){var r=1,a=new vn(e);if(!a.isint()&&n){var s=Math.abs(e);s<1?(r=new vn(10).pow(e0.getDigitCount(e)-1),a=new vn(Math.floor(a.div(r).toNumber())).mul(r)):s>1&&(a=new vn(Math.floor(e)))}else e===0?a=new vn(Math.floor((t-1)/2)):n||(a=new vn(Math.floor(e)));var o=Math.floor((t-1)/2),l=yke(xke(function(c){return a.add(new vn(c-o).mul(r)).toNumber()}),G_);return l(0,t)}function n8(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new vn(0),tickMin:new vn(0),tickMax:new vn(0)};var s=t8(new vn(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new vn(0):(o=new vn(e).add(t).div(2),o=o.sub(new vn(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new vn(t).sub(o).div(s).toNumber()),u=l+c+1;return u>n?n8(e,t,n,r,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:s,tickMin:o.sub(new vn(l).mul(s)),tickMax:o.add(new vn(c).mul(s))})}function Oke(e){var t=Cm(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=e8([n,r]),c=Cm(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(X_(G_(0,a-1).map(function(){return 1/0}))):[].concat(X_(G_(0,a-1).map(function(){return-1/0})),[f]);return n>r?Y_(d):d}if(u===f)return Tke(u,a,s);var h=n8(u,f,o,s),m=h.step,g=h.tickMin,v=h.tickMax,x=e0.rangeStep(g,v.add(new vn(.1).mul(m)),m);return n>r?Y_(x):x}function Ike(e,t){var n=Cm(e,2),r=n[0],a=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=e8([r,a]),l=Cm(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,a];if(c===u)return[c];var f=Math.max(t,2),d=t8(new vn(u).sub(c).div(f-1),s,0),h=[].concat(X_(e0.rangeStep(new vn(c),new vn(u).sub(new vn(.99).mul(d)),d)),[u]);return r>a?Y_(h):h}var Rke=Q6(Oke),Mke=Q6(Ike),Dke="Invariant failed";function Bc(e,t){throw new Error(Dke)}var $ke=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Dd(e){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dd(e)}function Ox(){return Ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ox.apply(this,arguments)}function Lke(e,t){return zke(e)||Uke(e,t)||Bke(e,t)||Fke()}function Fke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bke(e,t){if(e){if(typeof e=="string")return JO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JO(e,t)}}function JO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uke(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function zke(e){if(Array.isArray(e))return e}function qke(e,t){if(e==null)return{};var n=Wke(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Wke(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Hke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i8(r.key),r)}}function Kke(e,t,n){return t&&Vke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gke(e,t,n){return t=Ix(t),Yke(e,r8()?Reflect.construct(t,n||[],Ix(e).constructor):t.apply(e,n))}function Yke(e,t){if(t&&(Dd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xke(e)}function Xke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r8=function(){return!!e})()}function Ix(e){return Ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ix(e)}function Jke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q_(e,t)}function Q_(e,t){return Q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Q_(e,t)}function a8(e,t,n){return t=i8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i8(e){var t=Qke(e,"string");return Dd(t)=="symbol"?t:t+""}function Qke(e,t){if(Dd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Dd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t0=function(e){function t(){return Hke(this,t),Gke(this,t,arguments)}return Jke(t,e),Kke(t,[{key:"render",value:function(){var r=this.props,a=r.offset,s=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,f=r.xAxis,d=r.yAxis,h=qke(r,$ke),m=an(h,!1);this.props.direction==="x"&&f.type!=="number"&&Bc();var g=c.map(function(v){var x=u(v,l),y=x.x,b=x.y,w=x.value,j=x.errorVal;if(!j)return null;var k=[],_,S;if(Array.isArray(j)){var E=Lke(j,2);_=E[0],S=E[1]}else _=S=j;if(s==="vertical"){var N=f.scale,I=b+a,P=I+o,D=I-o,L=N(w-_),B=N(w+S);k.push({x1:B,y1:P,x2:B,y2:D}),k.push({x1:L,y1:I,x2:B,y2:I}),k.push({x1:L,y1:P,x2:L,y2:D})}else if(s==="horizontal"){var U=d.scale,$=y+a,O=$-o,T=$+o,R=U(w-_),C=U(w+S);k.push({x1:O,y1:C,x2:T,y2:C}),k.push({x1:$,y1:R,x2:$,y2:C}),k.push({x1:O,y1:R,x2:T,y2:R})}return V.createElement(br,Ox({className:"recharts-errorBar",key:"bar-".concat(k.map(function(F){return"".concat(F.x1,"-").concat(F.x2,"-").concat(F.y1,"-").concat(F.y2)}))},m),k.map(function(F){return V.createElement("line",Ox({},F,{key:"line-".concat(F.x1,"-").concat(F.x2,"-").concat(F.y1,"-").concat(F.y2)}))}))});return V.createElement(br,{className:"recharts-errorBars"},g)}}])}(V.Component);a8(t0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});a8(t0,"displayName","ErrorBar");function Am(e){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(e)}function QO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QO(Object(n),!0).forEach(function(r){Zke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Zke(e,t,n){return t=eSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eSe(e){var t=tSe(e,"string");return Am(t)=="symbol"?t:t+""}function tSe(e,t){if(Am(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s8=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,s=t.legendContent,o=Ma(n,ii);if(!o)return null;var l=ii.defaultProps,c=l!==void 0?zl(zl({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(r||[]).reduce(function(f,d){var h=d.item,m=d.props,g=m.sectors||m.data||[];return f.concat(g.map(function(v){return{type:o.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(r||[]).map(function(f){var d=f.item,h=d.type.defaultProps,m=h!==void 0?zl(zl({},h),d.props):{},g=m.dataKey,v=m.name,x=m.legendType,y=m.hide;return{inactive:y,dataKey:g,type:c.iconType||x||"square",color:sA(d),value:v||g,payload:m}}),zl(zl(zl({},c),ii.getWithHeight(o,a)),{},{payload:u,item:o})};function Em(e){"@babel/helpers - typeof";return Em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Em(e)}function ZO(e){return iSe(e)||aSe(e)||rSe(e)||nSe()}function nSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rSe(e,t){if(e){if(typeof e=="string")return Z_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z_(e,t)}}function aSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iSe(e){if(Array.isArray(e))return Z_(e)}function Z_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eI(Object(n),!0).forEach(function(r){ad(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ad(e,t,n){return t=sSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sSe(e){var t=oSe(e,"string");return Em(t)=="symbol"?t:t+""}function oSe(e,t){if(Em(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Em(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ws(e,t,n){return sn(e)||sn(t)?n:mr(t)?hi(e,t,n):Bt(t)?t(e):n}function Nh(e,t,n,r){var a=ake(e,function(l){return ws(l,t)});if(n==="number"){var s=a.filter(function(l){return qe(l)||parseFloat(l)});return s.length?[Qb(s),Jb(s)]:[1/0,-1/0]}var o=r?a.filter(function(l){return!sn(l)}):a;return o.map(function(l){return mr(l)||l instanceof Date?l:""})}var lSe=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var f=u>0?a[u-1].coordinate:a[l-1].coordinate,d=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if($i(d-f)!==$i(h-d)){var g=[];if($i(h-d)===$i(c[1]-c[0])){m=h;var v=d+c[1]-c[0];g[0]=Math.min(v,(v+f)/2),g[1]=Math.max(v,(v+f)/2)}else{m=f;var x=h+c[1]-c[0];g[0]=Math.min(d,(x+d)/2),g[1]=Math.max(d,(x+d)/2)}var y=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(t>y[0]&&t<=y[1]||t>=g[0]&&t<=g[1]){o=a[u].index;break}}else{var b=Math.min(f,h),w=Math.max(f,h);if(t>(b+d)/2&&t<=(w+d)/2){o=a[u].index;break}}}else for(var j=0;j<l;j++)if(j===0&&t<=(r[j].coordinate+r[j+1].coordinate)/2||j>0&&j<l-1&&t>(r[j].coordinate+r[j-1].coordinate)/2&&t<=(r[j].coordinate+r[j+1].coordinate)/2||j===l-1&&t>(r[j].coordinate+r[j-1].coordinate)/2){o=r[j].index;break}return o},sA=function(t){var n,r=t,a=r.type.displayName,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Vn(Vn({},t.type.defaultProps),t.props):t.props,o=s.stroke,l=s.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},cSe=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var f=s[l[c]].stackGroups,d=Object.keys(f),h=0,m=d.length;h<m;h++){var g=f[d[h]],v=g.items,x=g.cateAxisId,y=v.filter(function(S){return Xs(S.type).indexOf("Bar")>=0});if(y&&y.length){var b=y[0].type.defaultProps,w=b!==void 0?Vn(Vn({},b),y[0].props):y[0].props,j=w.barSize,k=w[x];o[k]||(o[k]=[]);var _=sn(j)?n:j;o[k].push({item:y[0],stackList:y.slice(1),barSize:sn(_)?void 0:Lc(_,r,0)})}}return o},uSe=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,s=t.sizeList,o=s===void 0?[]:s,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Lc(n,a,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,g=o.reduce(function(j,k){return j+k.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&m>0&&(h=!0,m*=.9,g=c*m);var v=(a-g)/2>>0,x={offset:v-u,size:0};f=o.reduce(function(j,k){var _={item:k.item,position:{offset:x.offset+x.size+u,size:h?m:k.barSize}},S=[].concat(ZO(j),[_]);return x=S[S.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(E){S.push({item:E,position:x})}),S},d)}else{var y=Lc(r,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var b=(a-2*y-(c-1)*u)/c;b>1&&(b>>=0);var w=l===+l?Math.min(b,l):b;f=o.reduce(function(j,k,_){var S=[].concat(ZO(j),[{item:k.item,position:{offset:y+(b+u)*_+(b-w)/2,size:w}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(E){S.push({item:E,position:S[S.length-1].position})}),S},d)}return f},dSe=function(t,n,r,a){var s=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=s8({children:s,legendWidth:c});if(u){var f=a||{},d=f.width,h=f.height,m=u.align,g=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&g==="middle")&&m!=="center"&&qe(t[m]))return Vn(Vn({},t),{},ad({},m,t[m]+(d||0)));if((v==="horizontal"||v==="vertical"&&m==="center")&&g!=="middle"&&qe(t[g]))return Vn(Vn({},t),{},ad({},g,t[g]+(h||0)))}return t},fSe=function(t,n,r){return sn(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},o8=function(t,n,r,a,s){var o=n.props.children,l=Ui(o,t0).filter(function(u){return fSe(a,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=ws(f,r);if(sn(d))return u;var h=Array.isArray(d)?[Qb(d),Jb(d)]:[d,d],m=c.reduce(function(g,v){var x=ws(f,v,0),y=h[0]-Math.abs(Array.isArray(x)?x[0]:x),b=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(y,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},hSe=function(t,n,r,a,s){var o=n.map(function(l){return o8(t,l,r,s,a)}).filter(function(l){return!sn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},l8=function(t,n,r,a,s){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&o8(t,c,u,a)||Nh(t,u,r,s)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},c8=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},u8=function(t,n,r,a){if(a)return t.map(function(c){return c.coordinate});var s,o,l=t.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(r),l},Hs=function(t,n,r){if(!t)return null;var a=t.scale,s=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?$i(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var h=s?s.indexOf(d):d;return{coordinate:a(h)+u,value:d,offset:u}});return f.filter(function(d){return!Rp(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,h){return{coordinate:a(d)+u,value:d,index:h,offset:u}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,h){return{coordinate:a(d)+u,value:s?s[d]:d,index:h,offset:u}})},sj=new WeakMap,Og=function(t,n){if(typeof n!="function")return t;sj.has(t)||sj.set(t,new WeakMap);var r=sj.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},mSe=function(t,n,r){var a=t.scale,s=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:wm(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Cx(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Sh(),realScaleType:"point"}:s==="category"?{scale:wm(),realScaleType:"band"}:{scale:Cx(),realScaleType:"linear"};if($c(a)){var c="scale".concat(Lb(a));return{scale:(KO[c]||Sh)(),realScaleType:KO[c]?c:"point"}}return Bt(a)?{scale:a}:{scale:Sh(),realScaleType:"point"}},tI=1e-4,pSe=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),s=Math.min(a[0],a[1])-tI,o=Math.max(a[0],a[1])+tI,l=t(n[0]),c=t(n[r-1]);(l<s||l>o||c<s||c>o)&&t.domain([n[0],n[r-1]])}},gSe=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},vSe=function(t,n){if(!n||n.length!==2||!qe(n[0])||!qe(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),s=[t[0],t[1]];return(!qe(t[0])||t[0]<r)&&(s[0]=r),(!qe(t[1])||t[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<r&&(s[1]=r),s},xSe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0,l=0;l<n;++l){var c=Rp(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=s,t[l][r][1]=s+c,s=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},ySe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0;o<n;++o){var l=Rp(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=s,t[o][r][1]=s+l,s=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},bSe={sign:xSe,expand:Mhe,none:Ad,silhouette:Dhe,wiggle:$he,positive:ySe},wSe=function(t,n,r){var a=n.map(function(l){return l.props.dataKey}),s=bSe[r],o=Rhe().keys(a).value(function(l,c){return+ws(l,c,0)}).order(k_).offset(s);return o(t)},jSe=function(t,n,r,a,s,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(d,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Vn(Vn({},h.type.defaultProps),h.props):h.props,v=g.stackId,x=g.hide;if(x)return d;var y=g[r],b=d[y]||{hasStack:!1,stackGroups:{}};if(mr(v)){var w=b.stackGroups[v]||{numericAxisId:r,cateAxisId:a,items:[]};w.items.push(h),b.hasStack=!0,b.stackGroups[v]=w}else b.stackGroups[$b("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[h]};return Vn(Vn({},d),{},ad({},y,b))},c),f={};return Object.keys(u).reduce(function(d,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(v,x){var y=m.stackGroups[x];return Vn(Vn({},v),{},ad({},x,{numericAxisId:r,cateAxisId:a,items:y.items,stackedData:wSe(t,y.items,s)}))},g)}return Vn(Vn({},d),{},ad({},h,m))},f)},_Se=function(t,n){var r=n.realScaleType,a=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=Rke(u,s,l);return t.domain([Qb(f),Jb(f)]),{niceTicks:f}}if(s&&a==="number"){var d=t.domain(),h=Mke(d,s,l);return{niceTicks:h}}return null},nI=function(t){var n=t.axis,r=t.ticks,a=t.offset,s=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+a:null;var c=ws(o,n.dataKey,n.domain[l]);return sn(c)?null:n.scale(c)-s/2+a},kSe=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return a<=0&&s>=0?0:s<0?s:a}return r[0]},SSe=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Vn(Vn({},t.type.defaultProps),t.props):t.props,s=a.stackId;if(mr(s)){var o=n[s];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},NSe=function(t){return t.reduce(function(n,r){return[Qb(r.concat([n[0]]).filter(qe)),Jb(r.concat([n[1]]).filter(qe))]},[1/0,-1/0])},d8=function(t,n,r){return Object.keys(t).reduce(function(a,s){var o=t[s],l=o.stackedData,c=l.reduce(function(u,f){var d=NSe(f.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},rI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ek=function(t,n,r){if(Bt(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(qe(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(rI.test(t[0])){var s=+rI.exec(t[0])[1];a[0]=n[0]-s}else Bt(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(qe(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(aI.test(t[1])){var o=+aI.exec(t[1])[1];a[1]=n[1]+o}else Bt(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},Rx=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var s=IC(n,function(d){return d.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],f=s[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},iI=function(t,n,r){return!t||!t.length||rA(t,hi(r,"type.defaultProps.domain"))?n:t},f8=function(t,n){var r=t.type.defaultProps?Vn(Vn({},t.type.defaultProps),t.props):t.props,a=r.dataKey,s=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,f=r.hide;return Vn(Vn({},an(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:s||a,color:sA(t),value:ws(n,a),type:c,payload:n,chartType:u,hide:f})};function Pm(e){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(e)}function sI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function oI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sI(Object(n),!0).forEach(function(r){CSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CSe(e,t,n){return t=ASe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ASe(e){var t=ESe(e,"string");return Pm(t)=="symbol"?t:t+""}function ESe(e,t){if(Pm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mx=Math.PI/180,PSe=function(t){return t*180/Math.PI},Pr=function(t,n,r,a){return{x:t+Math.cos(-Mx*a)*r,y:n+Math.sin(-Mx*a)*r}},TSe=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(a-o,2))},OSe=function(t,n){var r=t.x,a=t.y,s=n.cx,o=n.cy,l=TSe({x:r,y:a},{x:s,y:o});if(l<=0)return{radius:l};var c=(r-s)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:PSe(u),angleInRadian:u}},ISe=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(a,s);return{startAngle:n-o*360,endAngle:r-o*360}},RSe=function(t,n){var r=n.startAngle,a=n.endAngle,s=Math.floor(r/360),o=Math.floor(a/360),l=Math.min(s,o);return t+l*360},lI=function(t,n){var r=t.x,a=t.y,s=OSe({x:r,y:a},n),o=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=ISe(n),d=f.startAngle,h=f.endAngle,m=l,g;if(d<=h){for(;m>h;)m-=360;for(;m<d;)m+=360;g=m>=d&&m<=h}else{for(;m>d;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=d}return g?oI(oI({},n),{},{radius:o,angle:RSe(m,n)}):null};function Tm(e){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tm(e)}var MSe=["offset"];function DSe(e){return BSe(e)||FSe(e)||LSe(e)||$Se()}function $Se(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LSe(e,t){if(e){if(typeof e=="string")return tk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tk(e,t)}}function FSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BSe(e){if(Array.isArray(e))return tk(e)}function tk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function USe(e,t){if(e==null)return{};var n=zSe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zSe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function cI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cI(Object(n),!0).forEach(function(r){qSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qSe(e,t,n){return t=WSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WSe(e){var t=HSe(e,"string");return Tm(t)=="symbol"?t:t+""}function HSe(e,t){if(Tm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Tm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Om(){return Om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Om.apply(this,arguments)}var VSe=function(t){var n=t.value,r=t.formatter,a=sn(t.children)?n:t.children;return Bt(r)?r(a):a},KSe=function(t,n){var r=$i(n-t),a=Math.min(Math.abs(n-t),360);return r*a},GSe=function(t,n,r){var a=t.position,s=t.viewBox,o=t.offset,l=t.className,c=s,u=c.cx,f=c.cy,d=c.innerRadius,h=c.outerRadius,m=c.startAngle,g=c.endAngle,v=c.clockWise,x=(d+h)/2,y=KSe(m,g),b=y>=0?1:-1,w,j;a==="insideStart"?(w=m+b*o,j=v):a==="insideEnd"?(w=g-b*o,j=!v):a==="end"&&(w=g+b*o,j=v),j=y<=0?j:!j;var k=Pr(u,f,x,w),_=Pr(u,f,x,w+(j?1:-1)*359),S="M".concat(k.x,",").concat(k.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(j?0:1,`,
    `).concat(_.x,",").concat(_.y),E=sn(t.id)?$b("recharts-radial-line-"):t.id;return V.createElement("text",Om({},r,{dominantBaseline:"central",className:Zt("recharts-radial-bar-label",l)}),V.createElement("defs",null,V.createElement("path",{id:E,d:S})),V.createElement("textPath",{xlinkHref:"#".concat(E)},n))},YSe=function(t){var n=t.viewBox,r=t.offset,a=t.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,f=s.startAngle,d=s.endAngle,h=(f+d)/2;if(a==="outside"){var m=Pr(o,l,u+r,h),g=m.x,v=m.y;return{x:g,y:v,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,y=Pr(o,l,x,h),b=y.x,w=y.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},XSe=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,s=t.position,o=n,l=o.x,c=o.y,u=o.width,f=o.height,d=f>=0?1:-1,h=d*a,m=d>0?"end":"start",g=d>0?"start":"end",v=u>=0?1:-1,x=v*a,y=v>0?"end":"start",b=v>0?"start":"end";if(s==="top"){var w={x:l+u/2,y:c-d*a,textAnchor:"middle",verticalAnchor:m};return cr(cr({},w),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var j={x:l+u/2,y:c+f+h,textAnchor:"middle",verticalAnchor:g};return cr(cr({},j),r?{height:Math.max(r.y+r.height-(c+f),0),width:u}:{})}if(s==="left"){var k={x:l-x,y:c+f/2,textAnchor:y,verticalAnchor:"middle"};return cr(cr({},k),r?{width:Math.max(k.x-r.x,0),height:f}:{})}if(s==="right"){var _={x:l+u+x,y:c+f/2,textAnchor:b,verticalAnchor:"middle"};return cr(cr({},_),r?{width:Math.max(r.x+r.width-_.x,0),height:f}:{})}var S=r?{width:u,height:f}:{};return s==="insideLeft"?cr({x:l+x,y:c+f/2,textAnchor:b,verticalAnchor:"middle"},S):s==="insideRight"?cr({x:l+u-x,y:c+f/2,textAnchor:y,verticalAnchor:"middle"},S):s==="insideTop"?cr({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},S):s==="insideBottom"?cr({x:l+u/2,y:c+f-h,textAnchor:"middle",verticalAnchor:m},S):s==="insideTopLeft"?cr({x:l+x,y:c+h,textAnchor:b,verticalAnchor:g},S):s==="insideTopRight"?cr({x:l+u-x,y:c+h,textAnchor:y,verticalAnchor:g},S):s==="insideBottomLeft"?cr({x:l+x,y:c+f-h,textAnchor:b,verticalAnchor:m},S):s==="insideBottomRight"?cr({x:l+u-x,y:c+f-h,textAnchor:y,verticalAnchor:m},S):uf(s)&&(qe(s.x)||ic(s.x))&&(qe(s.y)||ic(s.y))?cr({x:l+Lc(s.x,u),y:c+Lc(s.y,f),textAnchor:"end",verticalAnchor:"end"},S):cr({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},S)},JSe=function(t){return"cx"in t&&qe(t.cx)};function Br(e){var t=e.offset,n=t===void 0?5:t,r=USe(e,MSe),a=cr({offset:n},r),s=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,f=a.className,d=f===void 0?"":f,h=a.textBreakAll;if(!s||sn(l)&&sn(c)&&!p.isValidElement(u)&&!Bt(u))return null;if(p.isValidElement(u))return p.cloneElement(u,a);var m;if(Bt(u)){if(m=p.createElement(u,a),p.isValidElement(m))return m}else m=VSe(a);var g=JSe(s),v=an(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return GSe(a,m,v);var x=g?YSe(a):XSe(a);return V.createElement(bx,Om({className:Zt("recharts-label",d)},v,x,{breakAll:h}),m)}Br.displayName="Label";var h8=function(t){var n=t.cx,r=t.cy,a=t.angle,s=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,h=t.y,m=t.top,g=t.left,v=t.width,x=t.height,y=t.clockWise,b=t.labelViewBox;if(b)return b;if(qe(v)&&qe(x)){if(qe(d)&&qe(h))return{x:d,y:h,width:v,height:x};if(qe(m)&&qe(g))return{x:m,y:g,width:v,height:x}}return qe(d)&&qe(h)?{x:d,y:h,width:0,height:0}:qe(n)&&qe(r)?{cx:n,cy:r,startAngle:s||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},QSe=function(t,n){return t?t===!0?V.createElement(Br,{key:"label-implicit",viewBox:n}):mr(t)?V.createElement(Br,{key:"label-implicit",viewBox:n,value:t}):p.isValidElement(t)?t.type===Br?p.cloneElement(t,{key:"label-implicit",viewBox:n}):V.createElement(Br,{key:"label-implicit",content:t,viewBox:n}):Bt(t)?V.createElement(Br,{key:"label-implicit",content:t,viewBox:n}):uf(t)?V.createElement(Br,Om({viewBox:n},t,{key:"label-implicit"})):null:null},ZSe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,s=h8(t),o=Ui(a,Br).map(function(c,u){return p.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return o;var l=QSe(t.label,n||s);return[l].concat(DSe(o))};Br.parseViewBox=h8;Br.renderCallByParent=ZSe;function eNe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var tNe=eNe;const nNe=fn(tNe);function Im(e){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(e)}var rNe=["valueAccessor"],aNe=["data","dataKey","clockWise","id","textBreakAll"];function iNe(e){return cNe(e)||lNe(e)||oNe(e)||sNe()}function sNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oNe(e,t){if(e){if(typeof e=="string")return nk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nk(e,t)}}function lNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cNe(e){if(Array.isArray(e))return nk(e)}function nk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dx(){return Dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dx.apply(this,arguments)}function uI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function dI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uI(Object(n),!0).forEach(function(r){uNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uNe(e,t,n){return t=dNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dNe(e){var t=fNe(e,"string");return Im(t)=="symbol"?t:t+""}function fNe(e,t){if(Im(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fI(e,t){if(e==null)return{};var n=hNe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hNe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var mNe=function(t){return Array.isArray(t.value)?nNe(t.value):t.value};function Li(e){var t=e.valueAccessor,n=t===void 0?mNe:t,r=fI(e,rNe),a=r.data,s=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=fI(r,aNe);return!a||!a.length?null:V.createElement(br,{className:"recharts-label-list"},a.map(function(f,d){var h=sn(s)?n(f,d):ws(f&&f.payload,s),m=sn(l)?{}:{id:"".concat(l,"-").concat(d)};return V.createElement(Br,Dx({},an(f,!0),u,m,{parentViewBox:f.parentViewBox,value:h,textBreakAll:c,viewBox:Br.parseViewBox(sn(o)?f:dI(dI({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}Li.displayName="LabelList";function pNe(e,t){return e?e===!0?V.createElement(Li,{key:"labelList-implicit",data:t}):V.isValidElement(e)||Bt(e)?V.createElement(Li,{key:"labelList-implicit",data:t,content:e}):uf(e)?V.createElement(Li,Dx({data:t},e,{key:"labelList-implicit"})):null:null}function gNe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=Ui(r,Li).map(function(o,l){return p.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var s=pNe(e.label,t);return[s].concat(iNe(a))}Li.renderCallByParent=gNe;function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}function rk(){return rk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rk.apply(this,arguments)}function hI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function mI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hI(Object(n),!0).forEach(function(r){vNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vNe(e,t,n){return t=xNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xNe(e){var t=yNe(e,"string");return Rm(t)=="symbol"?t:t+""}function yNe(e,t){if(Rm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bNe=function(t,n){var r=$i(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},Ig=function(t){var n=t.cx,r=t.cy,a=t.radius,s=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(l?1:-1)+a,d=Math.asin(c/f)/Mx,h=u?s:s+o*d,m=Pr(n,r,f,h),g=Pr(n,r,a,h),v=u?s-o*d:s,x=Pr(n,r,f*Math.cos(d*Mx),v);return{center:m,circleTangency:g,lineTangency:x,theta:d}},m8=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.startAngle,l=t.endAngle,c=bNe(o,l),u=o+c,f=Pr(n,r,s,o),d=Pr(n,r,s,u),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var m=Pr(n,r,a,o),g=Pr(n,r,a,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},wNe=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=$i(f-u),h=Ig({cx:n,cy:r,radius:s,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,g=h.lineTangency,v=h.theta,x=Ig({cx:n,cy:r,radius:s,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:c}),y=x.circleTangency,b=x.lineTangency,w=x.theta,j=c?Math.abs(u-f):Math.abs(u-f)-v-w;if(j<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):m8({cx:n,cy:r,innerRadius:a,outerRadius:s,startAngle:u,endAngle:f});var k="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(j>180),",").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var _=Ig({cx:n,cy:r,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=_.circleTangency,E=_.lineTangency,N=_.theta,I=Ig({cx:n,cy:r,radius:a,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),P=I.circleTangency,D=I.lineTangency,L=I.theta,B=c?Math.abs(u-f):Math.abs(u-f)-N-L;if(B<0&&o===0)return"".concat(k,"L").concat(n,",").concat(r,"Z");k+="L".concat(D.x,",").concat(D.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,"Z")}else k+="L".concat(n,",").concat(r,"Z");return k},jNe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},p8=function(t){var n=mI(mI({},jNe),t),r=n.cx,a=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,f=n.startAngle,d=n.endAngle,h=n.className;if(o<s||f===d)return null;var m=Zt("recharts-sector",h),g=o-s,v=Lc(l,g,0,!0),x;return v>0&&Math.abs(f-d)<360?x=wNe({cx:r,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(v,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):x=m8({cx:r,cy:a,innerRadius:s,outerRadius:o,startAngle:f,endAngle:d}),V.createElement("path",rk({},an(n,!0),{className:m,d:x,role:"img"}))};function Mm(e){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mm(e)}function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ak.apply(this,arguments)}function pI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function gI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pI(Object(n),!0).forEach(function(r){_Ne(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _Ne(e,t,n){return t=kNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kNe(e){var t=SNe(e,"string");return Mm(t)=="symbol"?t:t+""}function SNe(e,t){if(Mm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vI={curveBasisClosed:_he,curveBasisOpen:khe,curveBasis:jhe,curveBumpX:lhe,curveBumpY:che,curveLinearClosed:She,curveLinear:Bb,curveMonotoneX:Nhe,curveMonotoneY:Che,curveNatural:Ahe,curveStep:Ehe,curveStepAfter:The,curveStepBefore:Phe},Rg=function(t){return t.x===+t.x&&t.y===+t.y},Gf=function(t){return t.x},Yf=function(t){return t.y},NNe=function(t,n){if(Bt(t))return t;var r="curve".concat(Lb(t));return(r==="curveMonotone"||r==="curveBump")&&n?vI["".concat(r).concat(n==="vertical"?"Y":"X")]:vI[r]||Bb},CNe=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,s=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=NNe(r,l),d=u?s.filter(function(v){return Rg(v)}):s,h;if(Array.isArray(o)){var m=u?o.filter(function(v){return Rg(v)}):o,g=d.map(function(v,x){return gI(gI({},v),{},{base:m[x]})});return l==="vertical"?h=kg().y(Yf).x1(Gf).x0(function(v){return v.base.x}):h=kg().x(Gf).y1(Yf).y0(function(v){return v.base.y}),h.defined(Rg).curve(f),h(g)}return l==="vertical"&&qe(o)?h=kg().y(Yf).x1(Gf).x0(o):qe(o)?h=kg().x(Gf).y1(Yf).y0(o):h=pz().x(Gf).y(Yf),h.defined(Rg).curve(f),h(d)},xI=function(t){var n=t.className,r=t.points,a=t.path,s=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?CNe(t):a;return p.createElement("path",ak({},an(t,!1),ix(t),{className:Zt("recharts-curve",n),d:o,ref:s}))},g8={exports:{}},ANe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ENe=ANe,PNe=ENe;function v8(){}function x8(){}x8.resetWarningCache=v8;var TNe=function(){function e(r,a,s,o,l,c){if(c!==PNe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:x8,resetWarningCache:v8};return n.PropTypes=n,n};g8.exports=TNe();var ONe=g8.exports;const ln=fn(ONe);var INe=Object.getOwnPropertyNames,RNe=Object.getOwnPropertySymbols,MNe=Object.prototype.hasOwnProperty;function yI(e,t){return function(r,a,s){return e(r,a,s)&&t(r,a,s)}}function Mg(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var s=a.cache,o=s.get(n),l=s.get(r);if(o&&l)return o===r&&l===n;s.set(n,r),s.set(r,n);var c=e(n,r,a);return s.delete(n),s.delete(r),c}}function bI(e){return INe(e).concat(RNe(e))}var DNe=Object.hasOwn||function(e,t){return MNe.call(e,t)};function tu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var $Ne="__v",LNe="__o",FNe="_owner",wI=Object.getOwnPropertyDescriptor,jI=Object.keys;function BNe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function UNe(e,t){return tu(e.getTime(),t.getTime())}function zNe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function qNe(e,t){return e===t}function _I(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=t.entries(),f=!1,d=0;(l=u.next())&&!l.done;){if(a[d]){d++;continue}var h=o.value,m=l.value;if(n.equals(h[0],m[0],c,d,e,t,n)&&n.equals(h[1],m[1],h[0],m[0],e,t,n)){f=a[d]=!0;break}d++}if(!f)return!1;c++}return!0}var WNe=tu;function HNe(e,t,n){var r=jI(e),a=r.length;if(jI(t).length!==a)return!1;for(;a-- >0;)if(!y8(e,t,n,r[a]))return!1;return!0}function Xf(e,t,n){var r=bI(e),a=r.length;if(bI(t).length!==a)return!1;for(var s,o,l;a-- >0;)if(s=r[a],!y8(e,t,n,s)||(o=wI(e,s),l=wI(t,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function VNe(e,t){return tu(e.valueOf(),t.valueOf())}function KNe(e,t){return e.source===t.source&&e.flags===t.flags}function kI(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.values(),o,l;(o=s.next())&&!o.done;){for(var c=t.values(),u=!1,f=0;(l=c.next())&&!l.done;){if(!a[f]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function GNe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function YNe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function y8(e,t,n,r){return(r===FNe||r===LNe||r===$Ne)&&(e.$$typeof||t.$$typeof)?!0:DNe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var XNe="[object Arguments]",JNe="[object Boolean]",QNe="[object Date]",ZNe="[object Error]",eCe="[object Map]",tCe="[object Number]",nCe="[object Object]",rCe="[object RegExp]",aCe="[object Set]",iCe="[object String]",sCe="[object URL]",oCe=Array.isArray,SI=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,NI=Object.assign,lCe=Object.prototype.toString.call.bind(Object.prototype.toString);function cCe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,s=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,f=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,v,x){if(g===v)return!0;if(g==null||v==null)return!1;var y=typeof g;if(y!==typeof v)return!1;if(y!=="object")return y==="number"?o(g,v,x):y==="function"?a(g,v,x):!1;var b=g.constructor;if(b!==v.constructor)return!1;if(b===Object)return l(g,v,x);if(oCe(g))return t(g,v,x);if(SI!=null&&SI(g))return d(g,v,x);if(b===Date)return n(g,v,x);if(b===RegExp)return u(g,v,x);if(b===Map)return s(g,v,x);if(b===Set)return f(g,v,x);var w=lCe(g);return w===QNe?n(g,v,x):w===rCe?u(g,v,x):w===eCe?s(g,v,x):w===aCe?f(g,v,x):w===nCe?typeof g.then!="function"&&typeof v.then!="function"&&l(g,v,x):w===sCe?h(g,v,x):w===ZNe?r(g,v,x):w===XNe?l(g,v,x):w===JNe||w===tCe||w===iCe?c(g,v,x):!1}}function uCe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?Xf:BNe,areDatesEqual:UNe,areErrorsEqual:zNe,areFunctionsEqual:qNe,areMapsEqual:r?yI(_I,Xf):_I,areNumbersEqual:WNe,areObjectsEqual:r?Xf:HNe,arePrimitiveWrappersEqual:VNe,areRegExpsEqual:KNe,areSetsEqual:r?yI(kI,Xf):kI,areTypedArraysEqual:r?Xf:GNe,areUrlsEqual:YNe};if(n&&(a=NI({},a,n(a))),t){var s=Mg(a.areArraysEqual),o=Mg(a.areMapsEqual),l=Mg(a.areObjectsEqual),c=Mg(a.areSetsEqual);a=NI({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function dCe(e){return function(t,n,r,a,s,o,l){return e(t,n,l)}}function fCe(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,s=e.strict;if(r)return function(c,u){var f=r(),d=f.cache,h=d===void 0?t?new WeakMap:void 0:d,m=f.meta;return n(c,u,{cache:h,equals:a,meta:m,strict:s})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(c,u){return n(c,u,o)}}var hCe=Rl();Rl({strict:!0});Rl({circular:!0});Rl({circular:!0,strict:!0});Rl({createInternalComparator:function(){return tu}});Rl({strict:!0,createInternalComparator:function(){return tu}});Rl({circular:!0,createInternalComparator:function(){return tu}});Rl({circular:!0,createInternalComparator:function(){return tu},strict:!0});function Rl(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,s=e.strict,o=s===void 0?!1:s,l=uCe(e),c=cCe(l),u=r?r(c):dCe(c);return fCe({circular:n,comparator:c,createState:a,equals:u,strict:o})}function mCe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function CI(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(s){n<0&&(n=s),s-n>t?(e(s),n=-1):mCe(a)};requestAnimationFrame(r)}function ik(e){"@babel/helpers - typeof";return ik=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ik(e)}function pCe(e){return yCe(e)||xCe(e)||vCe(e)||gCe()}function gCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vCe(e,t){if(e){if(typeof e=="string")return AI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AI(e,t)}}function AI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yCe(e){if(Array.isArray(e))return e}function bCe(){var e={},t=function(){return null},n=!1,r=function a(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=pCe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){CI(a.bind(null,u),c);return}a(c),CI(a.bind(null,u));return}ik(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function Dm(e){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dm(e)}function EI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function PI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EI(Object(n),!0).forEach(function(r){b8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function b8(e,t,n){return t=wCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wCe(e){var t=jCe(e,"string");return Dm(t)==="symbol"?t:String(t)}function jCe(e,t){if(Dm(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Dm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _Ce=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(s){return a.includes(s)})})},kCe=function(t){return t},SCe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Ch=function(t,n){return Object.keys(n).reduce(function(r,a){return PI(PI({},r),{},b8({},a,t(a,n[a])))},{})},TI=function(t,n,r){return t.map(function(a){return"".concat(SCe(a)," ").concat(n,"ms ").concat(r)}).join(",")};function NCe(e,t){return ECe(e)||ACe(e,t)||w8(e,t)||CCe()}function CCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ACe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ECe(e){if(Array.isArray(e))return e}function PCe(e){return ICe(e)||OCe(e)||w8(e)||TCe()}function TCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w8(e,t){if(e){if(typeof e=="string")return sk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sk(e,t)}}function OCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ICe(e){if(Array.isArray(e))return sk(e)}function sk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $x=1e-4,j8=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},_8=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},OI=function(t,n){return function(r){var a=j8(t,n);return _8(a,r)}},RCe=function(t,n){return function(r){var a=j8(t,n),s=[].concat(PCe(a.map(function(o,l){return o*l}).slice(1)),[0]);return _8(s,r)}},II=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,s=0,o=1,l=1;break;case"ease":a=.25,s=.1,o=.25,l=1;break;case"ease-in":a=.42,s=0,o=1,l=1;break;case"ease-out":a=.42,s=0,o=.58,l=1;break;case"ease-in-out":a=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=NCe(u,4);a=f[0],s=f[1],o=f[2],l=f[3]}}}var d=OI(a,o),h=OI(s,l),m=RCe(a,o),g=function(y){return y>1?1:y<0?0:y},v=function(y){for(var b=y>1?1:y,w=b,j=0;j<8;++j){var k=d(w)-b,_=m(w);if(Math.abs(k-b)<$x||_<$x)return h(w);w=g(w-k/_)}return h(w)};return v.isStepper=!1,v},MCe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,s=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(f,d,h){var m=-(f-d)*r,g=h*s,v=h+(m-g)*l/1e3,x=h*l/1e3+f;return Math.abs(x-d)<$x&&Math.abs(v)<$x?[d,0]:[x,v]};return c.isStepper=!0,c.dt=l,c},DCe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return II(a);case"spring":return MCe();default:if(a.split("(")[0]==="cubic-bezier")return II(a)}return typeof a=="function"?a:null};function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}function RI(e){return FCe(e)||LCe(e)||k8(e)||$Ce()}function $Ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FCe(e){if(Array.isArray(e))return lk(e)}function MI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MI(Object(n),!0).forEach(function(r){ok(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ok(e,t,n){return t=BCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BCe(e){var t=UCe(e,"string");return $m(t)==="symbol"?t:String(t)}function UCe(e,t){if($m(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($m(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zCe(e,t){return HCe(e)||WCe(e,t)||k8(e,t)||qCe()}function qCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k8(e,t){if(e){if(typeof e=="string")return lk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lk(e,t)}}function lk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function WCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function HCe(e){if(Array.isArray(e))return e}var Lx=function(t,n,r){return t+(n-t)*r},ck=function(t){var n=t.from,r=t.to;return n!==r},VCe=function e(t,n,r){var a=Ch(function(s,o){if(ck(o)){var l=t(o.from,o.to,o.velocity),c=zCe(l,2),u=c[0],f=c[1];return Nr(Nr({},o),{},{from:u,velocity:f})}return o},n);return r<1?Ch(function(s,o){return ck(o)?Nr(Nr({},o),{},{velocity:Lx(o.velocity,a[s].velocity,r),from:Lx(o.from,a[s].from,r)}):o},n):e(t,a,r-1)};const KCe=function(e,t,n,r,a){var s=_Ce(e,t),o=s.reduce(function(x,y){return Nr(Nr({},x),{},ok({},y,[e[y],t[y]]))},{}),l=s.reduce(function(x,y){return Nr(Nr({},x),{},ok({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,f,d=function(){return null},h=function(){return Ch(function(y,b){return b.from},l)},m=function(){return!Object.values(l).filter(ck).length},g=function(y){u||(u=y);var b=y-u,w=b/n.dt;l=VCe(n,l,w),a(Nr(Nr(Nr({},e),t),h())),u=y,m()||(c=requestAnimationFrame(d))},v=function(y){f||(f=y);var b=(y-f)/r,w=Ch(function(k,_){return Lx.apply(void 0,RI(_).concat([n(b)]))},o);if(a(Nr(Nr(Nr({},e),t),w)),b<1)c=requestAnimationFrame(d);else{var j=Ch(function(k,_){return Lx.apply(void 0,RI(_).concat([n(1)]))},o);a(Nr(Nr(Nr({},e),t),j))}};return d=n.isStepper?g:v,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function $d(e){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$d(e)}var GCe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function YCe(e,t){if(e==null)return{};var n=XCe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function XCe(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function oj(e){return eAe(e)||ZCe(e)||QCe(e)||JCe()}function JCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QCe(e,t){if(e){if(typeof e=="string")return uk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uk(e,t)}}function ZCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eAe(e){if(Array.isArray(e))return uk(e)}function uk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function DI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DI(Object(n),!0).forEach(function(r){uh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uh(e,t,n){return t=S8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nAe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S8(r.key),r)}}function rAe(e,t,n){return t&&nAe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function S8(e){var t=aAe(e,"string");return $d(t)==="symbol"?t:String(t)}function aAe(e,t){if($d(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($d(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dk(e,t)}function dk(e,t){return dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},dk(e,t)}function sAe(e){var t=oAe();return function(){var r=Fx(e),a;if(t){var s=Fx(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return fk(this,a)}}function fk(e,t){if(t&&($d(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hk(e)}function hk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fx(e){return Fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fx(e)}var vl=function(e){iAe(n,e);var t=sAe(n);function n(r,a){var s;tAe(this,n),s=t.call(this,r,a);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,f=o.to,d=o.steps,h=o.children,m=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(hk(s)),s.changeStyle=s.changeStyle.bind(hk(s)),!l||m<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:f}),fk(s);if(d&&d.length)s.state={style:d[0].style};else if(u){if(typeof h=="function")return s.state={style:u},fk(s);s.state={style:c?uh({},c,u):u}}else s.state={style:{}};return s}return rAe(n,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,f=s.to,d=s.from,h=this.state.style;if(l){if(!o){var m={style:c?uh({},c,f):f};this.state&&h&&(c&&h[c]!==f||!c&&h!==f)&&this.setState(m);return}if(!(hCe(a.to,f)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=g||u?d:a.to;if(this.state&&h){var x={style:c?uh({},c,v):v};(c&&h[c]!==v||!c&&h!==v)&&this.setState(x)}this.runAnimation(_i(_i({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,l=a.to,c=a.duration,u=a.easing,f=a.begin,d=a.onAnimationEnd,h=a.onAnimationStart,m=KCe(o,l,DCe(u),c,this.changeStyle),g=function(){s.stopJSAnimation=m()};this.manager.start([h,f,g,c,d])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],f=u.style,d=u.duration,h=d===void 0?0:d,m=function(v,x,y){if(y===0)return v;var b=x.duration,w=x.easing,j=w===void 0?"ease":w,k=x.style,_=x.properties,S=x.onAnimationEnd,E=y>0?o[y-1]:x,N=_||Object.keys(k);if(typeof j=="function"||j==="spring")return[].concat(oj(v),[s.runJSAnimation.bind(s,{from:E.style,to:k,duration:b,easing:j}),b]);var I=TI(N,b,j),P=_i(_i(_i({},E.style),k),{},{transition:I});return[].concat(oj(v),[P,b,S]).filter(kCe)};return this.manager.start([c].concat(oj(o.reduce(m,[f,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=bCe());var s=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,f=a.onAnimationStart,d=a.onAnimationEnd,h=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var v=l?uh({},l,c):c,x=TI(Object.keys(v),o,u);g.start([f,s,_i(_i({},v),{},{transition:x}),o,d])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=YCe(a,GCe),u=p.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!l||u===0||o<=0)return s;var d=function(m){var g=m.props,v=g.style,x=v===void 0?{}:v,y=g.className,b=p.cloneElement(m,_i(_i({},c),{},{style:_i(_i({},x),f),className:y}));return b};return u===1?d(p.Children.only(s)):V.createElement("div",null,p.Children.map(s,function(h){return d(h)}))}}]),n}(p.PureComponent);vl.displayName="Animate";vl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};vl.propTypes={from:ln.oneOfType([ln.object,ln.string]),to:ln.oneOfType([ln.object,ln.string]),attributeName:ln.string,duration:ln.number,begin:ln.number,easing:ln.oneOfType([ln.string,ln.func]),steps:ln.arrayOf(ln.shape({duration:ln.number.isRequired,style:ln.object.isRequired,easing:ln.oneOfType([ln.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ln.func]),properties:ln.arrayOf("string"),onAnimationEnd:ln.func})),children:ln.oneOfType([ln.node,ln.func]),isActive:ln.bool,canBegin:ln.bool,onAnimationEnd:ln.func,shouldReAnimate:ln.bool,onAnimationStart:ln.func,onAnimationReStart:ln.func};function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}function Bx(){return Bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bx.apply(this,arguments)}function lAe(e,t){return fAe(e)||dAe(e,t)||uAe(e,t)||cAe()}function cAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uAe(e,t){if(e){if(typeof e=="string")return $I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $I(e,t)}}function $I(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function fAe(e){if(Array.isArray(e))return e}function LI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function FI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LI(Object(n),!0).forEach(function(r){hAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hAe(e,t,n){return t=mAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mAe(e){var t=pAe(e,"string");return Lm(t)=="symbol"?t:t+""}function pAe(e,t){if(Lm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BI=function(t,n,r,a,s){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,c=r>=0?1:-1,u=a>=0&&r>=0||a<0&&r<0?1:0,f;if(o>0&&s instanceof Array){for(var d=[0,0,0,0],h=0,m=4;h<m;h++)d[h]=s[h]>o?o:s[h];f="M".concat(t,",").concat(n+l*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(n)),f+="L ".concat(t+r-c*d[1],",").concat(n),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*d[1])),f+="L ".concat(t+r,",").concat(n+a-l*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+r-c*d[2],",").concat(n+a)),f+="L ".concat(t+c*d[3],",").concat(n+a),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*d[3])),f+="Z"}else if(o>0&&s===+s&&s>0){var g=Math.min(o,s);f="M ".concat(t,",").concat(n+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(n,`
            L `).concat(t+r-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*g,`
            L `).concat(t+r,",").concat(n+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r-c*g,",").concat(n+a,`
            L `).concat(t+c*g,",").concat(n+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*g," Z")}else f="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return f},gAe=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),f=Math.max(s,s+l),d=Math.min(o,o+c),h=Math.max(o,o+c);return r>=u&&r<=f&&a>=d&&a<=h}return!1},vAe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oA=function(t){var n=FI(FI({},vAe),t),r=p.useRef(),a=p.useState(-1),s=lAe(a,2),o=s[0],l=s[1];p.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var j=r.current.getTotalLength();j&&l(j)}catch{}},[]);var c=n.x,u=n.y,f=n.width,d=n.height,h=n.radius,m=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,y=n.isAnimationActive,b=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var w=Zt("recharts-rectangle",m);return b?V.createElement(vl,{canBegin:o>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:v,animationEasing:g,isActive:b},function(j){var k=j.width,_=j.height,S=j.x,E=j.y;return V.createElement(vl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,isActive:y,easing:g},V.createElement("path",Bx({},an(n,!0),{className:w,d:BI(S,E,k,_,h),ref:r})))}):V.createElement("path",Bx({},an(n,!0),{className:w,d:BI(c,u,f,d,h)}))};function mk(){return mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mk.apply(this,arguments)}var N8=function(t){var n=t.cx,r=t.cy,a=t.r,s=t.className,o=Zt("recharts-dot",s);return n===+n&&r===+r&&a===+a?p.createElement("circle",mk({},an(t,!1),ix(t),{className:o,cx:n,cy:r,r:a})):null};function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}var xAe=["x","y","top","left","width","height","className"];function pk(){return pk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pk.apply(this,arguments)}function UI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function yAe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UI(Object(n),!0).forEach(function(r){bAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bAe(e,t,n){return t=wAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wAe(e){var t=jAe(e,"string");return Fm(t)=="symbol"?t:t+""}function jAe(e,t){if(Fm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Ae(e,t){if(e==null)return{};var n=kAe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kAe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var SAe=function(t,n,r,a,s,o){return"M".concat(t,",").concat(s,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},NAe=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,f=t.width,d=f===void 0?0:f,h=t.height,m=h===void 0?0:h,g=t.className,v=_Ae(t,xAe),x=yAe({x:r,y:s,top:l,left:u,width:d,height:m},v);return!qe(r)||!qe(s)||!qe(d)||!qe(m)||!qe(l)||!qe(u)?null:V.createElement("path",pk({},an(x,!0),{className:Zt("recharts-cross",g),d:SAe(r,s,d,m,l,u)}))},CAe=Fz,AAe=CAe(Object.getPrototypeOf,Object),EAe=AAe,PAe=mo,TAe=EAe,OAe=po,IAe="[object Object]",RAe=Function.prototype,MAe=Object.prototype,C8=RAe.toString,DAe=MAe.hasOwnProperty,$Ae=C8.call(Object);function LAe(e){if(!OAe(e)||PAe(e)!=IAe)return!1;var t=TAe(e);if(t===null)return!0;var n=DAe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&C8.call(n)==$Ae}var FAe=LAe;const BAe=fn(FAe);var UAe=mo,zAe=po,qAe="[object Boolean]";function WAe(e){return e===!0||e===!1||zAe(e)&&UAe(e)==qAe}var HAe=WAe;const VAe=fn(HAe);function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}function Ux(){return Ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ux.apply(this,arguments)}function KAe(e,t){return JAe(e)||XAe(e,t)||YAe(e,t)||GAe()}function GAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YAe(e,t){if(e){if(typeof e=="string")return zI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zI(e,t)}}function zI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function XAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function JAe(e){if(Array.isArray(e))return e}function qI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function WI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qI(Object(n),!0).forEach(function(r){QAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QAe(e,t,n){return t=ZAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZAe(e){var t=eEe(e,"string");return Bm(t)=="symbol"?t:t+""}function eEe(e,t){if(Bm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HI=function(t,n,r,a,s){var o=r-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+s),l+="L ".concat(t+r-o/2-a,",").concat(n+s),l+="L ".concat(t,",").concat(n," Z"),l},tEe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},nEe=function(t){var n=WI(WI({},tEe),t),r=p.useRef(),a=p.useState(-1),s=KAe(a,2),o=s[0],l=s[1];p.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&l(w)}catch{}},[]);var c=n.x,u=n.y,f=n.upperWidth,d=n.lowerWidth,h=n.height,m=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,y=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var b=Zt("recharts-trapezoid",m);return y?V.createElement(vl,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:h,x:c,y:u},duration:v,animationEasing:g,isActive:y},function(w){var j=w.upperWidth,k=w.lowerWidth,_=w.height,S=w.x,E=w.y;return V.createElement(vl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,easing:g},V.createElement("path",Ux({},an(n,!0),{className:b,d:HI(S,E,j,k,_),ref:r})))}):V.createElement("g",null,V.createElement("path",Ux({},an(n,!0),{className:b,d:HI(c,u,f,d,h)})))},rEe=["option","shapeType","propTransformer","activeClassName","isActive"];function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function aEe(e,t){if(e==null)return{};var n=iEe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function iEe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function VI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VI(Object(n),!0).forEach(function(r){sEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sEe(e,t,n){return t=oEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oEe(e){var t=lEe(e,"string");return Um(t)=="symbol"?t:t+""}function lEe(e,t){if(Um(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cEe(e,t){return zx(zx({},t),e)}function uEe(e,t){return e==="symbols"}function KI(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return V.createElement(oA,n);case"trapezoid":return V.createElement(nEe,n);case"sector":return V.createElement(p8,n);case"symbols":if(uEe(t))return V.createElement(SC,n);break;default:return null}}function dEe(e){return p.isValidElement(e)?e.props:e}function fEe(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?cEe:r,s=e.activeClassName,o=s===void 0?"recharts-active-shape":s,l=e.isActive,c=aEe(e,rEe),u;if(p.isValidElement(t))u=p.cloneElement(t,zx(zx({},c),dEe(t)));else if(Bt(t))u=t(c);else if(BAe(t)&&!VAe(t)){var f=a(t,c);u=V.createElement(KI,{shapeType:n,elementProps:f})}else{var d=c;u=V.createElement(KI,{shapeType:n,elementProps:d})}return l?V.createElement(br,{className:o},u):u}function n0(e,t){return t!=null&&"trapezoids"in e.props}function r0(e,t){return t!=null&&"sectors"in e.props}function zm(e,t){return t!=null&&"points"in e.props}function hEe(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,s=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&s}function mEe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function pEe(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function gEe(e,t){var n;return n0(e,t)?n=hEe:r0(e,t)?n=mEe:zm(e,t)&&(n=pEe),n}function vEe(e,t){var n;return n0(e,t)?n="trapezoids":r0(e,t)?n="sectors":zm(e,t)&&(n="points"),n}function xEe(e,t){if(n0(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(r0(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return zm(e,t)?t.payload:{}}function yEe(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=vEe(n,t),s=xEe(n,t),o=r.filter(function(c,u){var f=rA(s,c),d=n.props[a].filter(function(g){var v=gEe(n,t);return v(g,t)}),h=n.props[a].indexOf(d[d.length-1]),m=u===h;return f&&m}),l=r.indexOf(o[o.length-1]);return l}var bEe=Math.ceil,wEe=Math.max;function jEe(e,t,n,r){for(var a=-1,s=wEe(bEe((t-e)/(n||1)),0),o=Array(s);s--;)o[r?s:++a]=e,e+=n;return o}var _Ee=jEe,kEe=a6,GI=1/0,SEe=17976931348623157e292;function NEe(e){if(!e)return e===0?e:0;if(e=kEe(e),e===GI||e===-GI){var t=e<0?-1:1;return t*SEe}return e===e?e:0}var A8=NEe,CEe=_Ee,AEe=Wb,lj=A8;function EEe(e){return function(t,n,r){return r&&typeof r!="number"&&AEe(t,n,r)&&(n=r=void 0),t=lj(t),n===void 0?(n=t,t=0):n=lj(n),r=r===void 0?t<n?1:-1:lj(r),CEe(t,n,r,e)}}var PEe=EEe,TEe=PEe,OEe=TEe(),IEe=OEe;const qx=fn(IEe);function qm(e){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qm(e)}function YI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function XI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YI(Object(n),!0).forEach(function(r){E8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function E8(e,t,n){return t=REe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function REe(e){var t=MEe(e,"string");return qm(t)=="symbol"?t:t+""}function MEe(e,t){if(qm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DEe=["Webkit","Moz","O","ms"],$Ee=function(t,n){var r=t.replace(/(\w)/,function(s){return s.toUpperCase()}),a=DEe.reduce(function(s,o){return XI(XI({},s),{},E8({},o+r,n))},{});return a[t]=n,a};function Ld(e){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ld(e)}function Wx(){return Wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wx.apply(this,arguments)}function JI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JI(Object(n),!0).forEach(function(r){Ia(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T8(r.key),r)}}function FEe(e,t,n){return t&&QI(e.prototype,t),n&&QI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function BEe(e,t,n){return t=Hx(t),UEe(e,P8()?Reflect.construct(t,n||[],Hx(e).constructor):t.apply(e,n))}function UEe(e,t){if(t&&(Ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zEe(e)}function zEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P8=function(){return!!e})()}function Hx(e){return Hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hx(e)}function qEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gk(e,t)}function gk(e,t){return gk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},gk(e,t)}function Ia(e,t,n){return t=T8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T8(e){var t=WEe(e,"string");return Ld(t)=="symbol"?t:t+""}function WEe(e,t){if(Ld(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ld(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HEe=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,s=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Sh().domain(qx(0,c)).range([s,s+o-l]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(a),scale:u,scaleValues:f}},ZI=function(t){return t.changedTouches&&!!t.changedTouches.length},Fd=function(e){function t(n){var r;return LEe(this,t),r=BEe(this,t,[n]),Ia(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),Ia(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),Ia(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,s=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:s,startIndex:l})}),r.detachDragEndListener()}),Ia(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ia(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ia(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ia(r,"handleSlideDragStart",function(a){var s=ZI(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return qEe(t,e),FEe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,s=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,d=Math.min(a,s),h=Math.max(a,s),m=t.getIndexInRange(o,d),g=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:g===f?f:g-g%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,s=a.data,o=a.tickFormatter,l=a.dataKey,c=ws(s[r],l,r);return Bt(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,s=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,h=c.startIndex,m=c.endIndex,g=c.onChange,v=r.pageX-s;v>0?v=Math.min(v,u+f-d-l,u+f-d-o):v<0&&(v=Math.max(v,u-o,u-l));var x=this.getIndex({startX:o+v,endX:l+v});(x.startIndex!==h||x.endIndex!==m)&&g&&g(x),this.setState({startX:o+v,endX:l+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var s=ZI(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],f=this.props,d=f.x,h=f.width,m=f.travellerWidth,g=f.onChange,v=f.gap,x=f.data,y={startX:this.state.startX,endX:this.state.endX},b=r.pageX-s;b>0?b=Math.min(b,d+h-m-u):b<0&&(b=Math.max(b,d-u)),y[o]=u+b;var w=this.getIndex(y),j=w.startIndex,k=w.endIndex,_=function(){var E=x.length-1;return o==="startX"&&(l>c?j%v===0:k%v===0)||l<c&&k===E||o==="endX"&&(l>c?k%v===0:j%v===0)||l>c&&k===E};this.setState(Ia(Ia({},o,u+b),"brushMoveStartX",r.pageX),function(){g&&_()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,f=this.state[a],d=l.indexOf(f);if(d!==-1){var h=d+r;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(Ia({},a,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return V.createElement("rect",{stroke:u,fill:c,x:a,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.data,u=r.children,f=r.padding,d=p.Children.only(u);return d?V.cloneElement(d,{x:a,y:s,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var s,o,l=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,h=c.traveller,m=c.ariaLabel,g=c.data,v=c.startIndex,x=c.endIndex,y=Math.max(r,this.props.x),b=cj(cj({},an(this.props,!1)),{},{x:y,y:u,width:f,height:d}),w=m||"Min value: ".concat((s=g[v])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=g[x])===null||o===void 0?void 0:o.name);return V.createElement(br,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),l.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(r,a){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,f=Math.min(r,a)+u,d=Math.max(Math.abs(a-r)-u,0);return V.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:d,height:l})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,s=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,f=this.state,d=f.startX,h=f.endX,m=5,g={pointerEvents:"none",fill:u};return V.createElement(br,{className:"recharts-brush-texts"},V.createElement(bx,Wx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-m,y:o+l/2},g),this.getTextOfTick(a)),V.createElement(bx,Wx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+c+m,y:o+l/2},g),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,a=r.data,s=r.className,o=r.children,l=r.x,c=r.y,u=r.width,f=r.height,d=r.alwaysShowText,h=this.state,m=h.startX,g=h.endX,v=h.isTextActive,x=h.isSlideMoving,y=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!qe(l)||!qe(c)||!qe(u)||!qe(f)||u<=0||f<=0)return null;var w=Zt("recharts-brush",s),j=V.Children.count(o)===1,k=$Ee("userSelect","none");return V.createElement(br,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(v||x||y||b||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,s=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(s+l/2)-1;return V.createElement(V.Fragment,null,V.createElement("rect",{x:a,y:s,width:o,height:l,fill:c,stroke:"none"}),V.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),V.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var s;return V.isValidElement(r)?s=V.cloneElement(r,a):Bt(r)?s=r(a):s=t.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(r,a){var s=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,f=r.startIndex,d=r.endIndex;if(s!==a.prevData||u!==a.prevUpdateId)return cj({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?HEe({data:s,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,a){for(var s=r.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>a?l=c:o=c}return a>=r[l]?l:o}}])}(p.PureComponent);Ia(Fd,"displayName","Brush");Ia(Fd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var VEe=OC;function KEe(e,t){var n;return VEe(e,function(r,a,s){return n=t(r,a,s),!n}),!!n}var GEe=KEe,YEe=Tz,XEe=Tl,JEe=GEe,QEe=Ea,ZEe=Wb;function ePe(e,t,n){var r=QEe(e)?YEe:JEe;return n&&ZEe(e,t,n)&&(t=void 0),r(e,XEe(t))}var tPe=ePe;const nPe=fn(tPe);var gs=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},eR=Zz;function rPe(e,t,n){t=="__proto__"&&eR?eR(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var aPe=rPe,iPe=aPe,sPe=Jz,oPe=Tl;function lPe(e,t){var n={};return t=oPe(t),sPe(e,function(r,a,s){iPe(n,a,t(r,a,s))}),n}var cPe=lPe;const uPe=fn(cPe);function dPe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var fPe=dPe,hPe=OC;function mPe(e,t){var n=!0;return hPe(e,function(r,a,s){return n=!!t(r,a,s),n}),n}var pPe=mPe,gPe=fPe,vPe=pPe,xPe=Tl,yPe=Ea,bPe=Wb;function wPe(e,t,n){var r=yPe(e)?gPe:vPe;return n&&bPe(e,t,n)&&(t=void 0),r(e,xPe(t))}var jPe=wPe;const O8=fn(jPe);var _Pe=["x","y"];function Wm(e){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(e)}function vk(){return vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vk.apply(this,arguments)}function tR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Jf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tR(Object(n),!0).forEach(function(r){kPe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kPe(e,t,n){return t=SPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SPe(e){var t=NPe(e,"string");return Wm(t)=="symbol"?t:t+""}function NPe(e,t){if(Wm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CPe(e,t){if(e==null)return{};var n=APe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function APe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function EPe(e,t){var n=e.x,r=e.y,a=CPe(e,_Pe),s="".concat(n),o=parseInt(s,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||a.height),f=parseInt(u,10),d="".concat(t.width||a.width),h=parseInt(d,10);return Jf(Jf(Jf(Jf(Jf({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:h,name:t.name,radius:t.radius})}function nR(e){return V.createElement(fEe,vk({shapeType:"rectangle",propTransformer:EPe,activeClassName:"recharts-active-bar"},e))}var PPe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var s=qe(r)||Gde(r);return s?t(r,a):(s||Bc(),n)}},TPe=["value","background"],I8;function Bd(e){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bd(e)}function OPe(e,t){if(e==null)return{};var n=IPe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function IPe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Vx(){return Vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vx.apply(this,arguments)}function rR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rR(Object(n),!0).forEach(function(r){Jo(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function RPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M8(r.key),r)}}function MPe(e,t,n){return t&&aR(e.prototype,t),n&&aR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function DPe(e,t,n){return t=Kx(t),$Pe(e,R8()?Reflect.construct(t,n||[],Kx(e).constructor):t.apply(e,n))}function $Pe(e,t){if(t&&(Bd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LPe(e)}function LPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R8=function(){return!!e})()}function Kx(e){return Kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kx(e)}function FPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xk(e,t)}function xk(e,t){return xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},xk(e,t)}function Jo(e,t,n){return t=M8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M8(e){var t=BPe(e,"string");return Bd(t)=="symbol"?t:t+""}function BPe(e,t){if(Bd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fn=function(e){function t(){var n;RPe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=DPe(this,t,[].concat(a)),Jo(n,"state",{isAnimationFinished:!1}),Jo(n,"id",$b("recharts-bar-")),Jo(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Jo(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return FPe(t,e),MPe(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,f=an(this.props,!1);return r&&r.map(function(d,h){var m=h===c,g=m?u:o,v=er(er(er({},f),d),{},{isActive:m,option:g,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return V.createElement(br,Vx({className:"recharts-bar-rectangle"},sx(a.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),V.createElement(nR,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,s=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,f=a.animationEasing,d=a.animationId,h=this.state.prevData;return V.createElement(vl,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,v=s.map(function(x,y){var b=h&&h[y];if(b){var w=mu(b.x,x.x),j=mu(b.y,x.y),k=mu(b.width,x.width),_=mu(b.height,x.height);return er(er({},x),{},{x:w(g),y:j(g),width:k(g),height:_(g)})}if(o==="horizontal"){var S=mu(0,x.height),E=S(g);return er(er({},x),{},{y:x.y+x.height-E,height:E})}var N=mu(0,x.width),I=N(g);return er(er({},x),{},{width:I})});return V.createElement(br,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,s=r.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!rA(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,s=a.data,o=a.dataKey,l=a.activeIndex,c=an(this.props.background,!1);return s.map(function(u,f){u.value;var d=u.background,h=OPe(u,TPe);if(!d)return null;var m=er(er(er(er(er({},h),{},{fill:"#eee"},d),c),sx(r.props,u,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return V.createElement(nR,Vx({key:"background-bar-".concat(f),option:r.props.background,isActive:f===l},m))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,d=Ui(f,t0);if(!d)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(x,y){var b=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:b,errorVal:ws(x,y)}},g={clipPath:r?"url(#clipPath-".concat(a,")"):null};return V.createElement(br,g,d.map(function(v){return V.cloneElement(v,{key:"error-bar-".concat(a,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,s=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,f=r.top,d=r.width,h=r.height,m=r.isAnimationActive,g=r.background,v=r.id;if(a||!s||!s.length)return null;var x=this.state.isAnimationFinished,y=Zt("recharts-bar",o),b=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,j=b||w,k=sn(v)?this.id:v;return V.createElement(br,{className:y},b||w?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(k)},V.createElement("rect",{x:b?u:u-d/2,y:w?f:f-h/2,width:b?d:d*2,height:w?h:h*2}))):null,V.createElement(br,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(k,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,k),(!m||x)&&Li.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(p.PureComponent);I8=Fn;Jo(Fn,"displayName","Bar");Jo(Fn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ll.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Jo(Fn,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,s=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,m=gSe(r,n);if(!m)return null;var g=t.layout,v=n.type.defaultProps,x=v!==void 0?er(er({},v),n.props):n.props,y=x.dataKey,b=x.children,w=x.minPointSize,j=g==="horizontal"?o:s,k=u?j.scale.domain():null,_=kSe({numericAxis:j}),S=Ui(b,s6),E=d.map(function(N,I){var P,D,L,B,U,$;u?P=vSe(u[f+I],k):(P=ws(N,y),Array.isArray(P)||(P=[_,P]));var O=PPe(w,I8.defaultProps.minPointSize)(P[1],I);if(g==="horizontal"){var T,R=[o.scale(P[0]),o.scale(P[1])],C=R[0],F=R[1];D=nI({axis:s,ticks:l,bandSize:a,offset:m.offset,entry:N,index:I}),L=(T=F??C)!==null&&T!==void 0?T:void 0,B=m.size;var M=C-F;if(U=Number.isNaN(M)?0:M,$={x:D,y:o.y,width:B,height:o.height},Math.abs(O)>0&&Math.abs(U)<Math.abs(O)){var A=$i(U||O)*(Math.abs(O)-Math.abs(U));L-=A,U+=A}}else{var W=[s.scale(P[0]),s.scale(P[1])],G=W[0],Y=W[1];if(D=G,L=nI({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:N,index:I}),B=Y-G,U=m.size,$={x:s.x,y:L,width:s.width,height:U},Math.abs(O)>0&&Math.abs(B)<Math.abs(O)){var H=$i(B||O)*(Math.abs(O)-Math.abs(B));B+=H}}return er(er(er({},N),{},{x:D,y:L,width:B,height:U,value:u?P:P[1],payload:N,background:$},S&&S[I]&&S[I].props),{},{tooltipPayload:[f8(n,N)],tooltipPosition:{x:D+B/2,y:L+U/2}})});return er({data:E,layout:g},h)});function Hm(e){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hm(e)}function UPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D8(r.key),r)}}function zPe(e,t,n){return t&&iR(e.prototype,t),n&&iR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ii(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sR(Object(n),!0).forEach(function(r){a0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a0(e,t,n){return t=D8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D8(e){var t=qPe(e,"string");return Hm(t)=="symbol"?t:t+""}function qPe(e,t){if(Hm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WPe=function(t,n,r,a,s){var o=t.width,l=t.height,c=t.layout,u=t.children,f=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},h=!!Ma(u,Fn);return f.reduce(function(m,g){var v=n[g],x=v.orientation,y=v.domain,b=v.padding,w=b===void 0?{}:b,j=v.mirror,k=v.reversed,_="".concat(x).concat(j?"Mirror":""),S,E,N,I,P;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var D=y[1]-y[0],L=1/0,B=v.categoricalDomain.sort(Jde);if(B.forEach(function(W,G){G>0&&(L=Math.min((W||0)-(B[G-1]||0),L))}),Number.isFinite(L)){var U=L/D,$=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(S=U*$/2),v.padding==="no-gap"){var O=Lc(t.barCategoryGap,U*$),T=U*$/2;S=T-O-(T-O)/$*O}}}a==="xAxis"?E=[r.left+(w.left||0)+(S||0),r.left+r.width-(w.right||0)-(S||0)]:a==="yAxis"?E=c==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(S||0),r.top+r.height-(w.bottom||0)-(S||0)]:E=v.range,k&&(E=[E[1],E[0]]);var R=mSe(v,s,h),C=R.scale,F=R.realScaleType;C.domain(y).range(E),pSe(C);var M=_Se(C,Ii(Ii({},v),{},{realScaleType:F}));a==="xAxis"?(P=x==="top"&&!j||x==="bottom"&&j,N=r.left,I=d[_]-P*v.height):a==="yAxis"&&(P=x==="left"&&!j||x==="right"&&j,N=d[_]-P*v.width,I=r.top);var A=Ii(Ii(Ii({},v),M),{},{realScaleType:F,x:N,y:I,scale:C,width:a==="xAxis"?r.width:v.width,height:a==="yAxis"?r.height:v.height});return A.bandSize=Rx(A,M),!v.hide&&a==="xAxis"?d[_]+=(P?-1:1)*A.height:v.hide||(d[_]+=(P?-1:1)*A.width),Ii(Ii({},m),{},a0({},g,A))},{})},$8=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return{x:Math.min(r,s),y:Math.min(a,o),width:Math.abs(s-r),height:Math.abs(o-a)}},HPe=function(t){var n=t.x1,r=t.y1,a=t.x2,s=t.y2;return $8({x:n,y:r},{x:a,y:s})},L8=function(){function e(t){UPe(this,e),this.scale=t}return zPe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],s=r[r.length-1];return a<=s?n>=a&&n<=s:n>=s&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();a0(L8,"EPS",1e-4);var lA=function(t){var n=Object.keys(t).reduce(function(r,a){return Ii(Ii({},r),{},a0({},a,L8.create(t[a])))},{});return Ii(Ii({},n),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return uPe(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return O8(a,function(s,o){return n[o].isInRange(s)})}})};function VPe(e){return(e%180+180)%180}var KPe=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=VPe(a),o=s*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},GPe=Tl,YPe=Mp,XPe=zb;function JPe(e){return function(t,n,r){var a=Object(t);if(!YPe(t)){var s=GPe(n);t=XPe(t),n=function(l){return s(a[l],l,a)}}var o=e(t,n,r);return o>-1?a[s?t[o]:o]:void 0}}var QPe=JPe,ZPe=A8;function eTe(e){var t=ZPe(e),n=t%1;return t===t?n?t-n:t:0}var tTe=eTe,nTe=Hz,rTe=Tl,aTe=tTe,iTe=Math.max;function sTe(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:aTe(n);return a<0&&(a=iTe(r+a,0)),nTe(e,rTe(t),a)}var oTe=sTe,lTe=QPe,cTe=oTe,uTe=lTe(cTe),dTe=uTe;const fTe=fn(dTe);var hTe=Que(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),cA=p.createContext(void 0),uA=p.createContext(void 0),F8=p.createContext(void 0),B8=p.createContext({}),U8=p.createContext(void 0),z8=p.createContext(0),q8=p.createContext(0),oR=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,s=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,f=hTe(s);return V.createElement(cA.Provider,{value:r},V.createElement(uA.Provider,{value:a},V.createElement(B8.Provider,{value:s},V.createElement(F8.Provider,{value:f},V.createElement(U8.Provider,{value:o},V.createElement(z8.Provider,{value:u},V.createElement(q8.Provider,{value:c},l)))))))},mTe=function(){return p.useContext(U8)},W8=function(t){var n=p.useContext(cA);n==null&&Bc();var r=n[t];return r==null&&Bc(),r},pTe=function(){var t=p.useContext(cA);return zo(t)},gTe=function(){var t=p.useContext(uA),n=fTe(t,function(r){return O8(r.domain,Number.isFinite)});return n||zo(t)},H8=function(t){var n=p.useContext(uA);n==null&&Bc();var r=n[t];return r==null&&Bc(),r},vTe=function(){var t=p.useContext(F8);return t},xTe=function(){return p.useContext(B8)},dA=function(){return p.useContext(q8)},fA=function(){return p.useContext(z8)};function Ud(e){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ud(e)}function yTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bTe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K8(r.key),r)}}function wTe(e,t,n){return t&&bTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jTe(e,t,n){return t=Gx(t),_Te(e,V8()?Reflect.construct(t,n||[],Gx(e).constructor):t.apply(e,n))}function _Te(e,t){if(t&&(Ud(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kTe(e)}function kTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V8=function(){return!!e})()}function Gx(e){return Gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gx(e)}function STe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yk(e,t)}function yk(e,t){return yk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},yk(e,t)}function lR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lR(Object(n),!0).forEach(function(r){hA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hA(e,t,n){return t=K8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K8(e){var t=NTe(e,"string");return Ud(t)=="symbol"?t:t+""}function NTe(e,t){if(Ud(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CTe(e,t){return TTe(e)||PTe(e,t)||ETe(e,t)||ATe()}function ATe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ETe(e,t){if(e){if(typeof e=="string")return uR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uR(e,t)}}function uR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function PTe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function TTe(e){if(Array.isArray(e))return e}function bk(){return bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bk.apply(this,arguments)}var OTe=function(t,n){var r;return V.isValidElement(t)?r=V.cloneElement(t,n):Bt(t)?r=t(n):r=V.createElement("line",bk({},n,{className:"recharts-reference-line-line"})),r},ITe=function(t,n,r,a,s,o,l,c,u){var f=s.x,d=s.y,h=s.width,m=s.height;if(r){var g=u.y,v=t.y.apply(g,{position:o});if(gs(u,"discard")&&!t.y.isInRange(v))return null;var x=[{x:f+h,y:v},{x:f,y:v}];return c==="left"?x.reverse():x}if(n){var y=u.x,b=t.x.apply(y,{position:o});if(gs(u,"discard")&&!t.x.isInRange(b))return null;var w=[{x:b,y:d+m},{x:b,y:d}];return l==="top"?w.reverse():w}if(a){var j=u.segment,k=j.map(function(_){return t.apply(_,{position:o})});return gs(u,"discard")&&nPe(k,function(_){return!t.isInRange(_)})?null:k}return null};function RTe(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=mTe(),f=W8(a),d=H8(s),h=vTe();if(!u||!h)return null;Js(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=lA({x:f.scale,y:d.scale}),g=mr(t),v=mr(n),x=r&&r.length===2,y=ITe(m,g,v,x,h,e.position,f.orientation,d.orientation,e);if(!y)return null;var b=CTe(y,2),w=b[0],j=w.x,k=w.y,_=b[1],S=_.x,E=_.y,N=gs(e,"hidden")?"url(#".concat(u,")"):void 0,I=cR(cR({clipPath:N},an(e,!0)),{},{x1:j,y1:k,x2:S,y2:E});return V.createElement(br,{className:Zt("recharts-reference-line",l)},OTe(o,I),Br.renderCallByParent(e,HPe({x1:j,y1:k,x2:S,y2:E})))}var mA=function(e){function t(){return yTe(this,t),jTe(this,t,arguments)}return STe(t,e),wTe(t,[{key:"render",value:function(){return V.createElement(RTe,this.props)}}])}(V.Component);hA(mA,"displayName","ReferenceLine");hA(mA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function wk(){return wk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wk.apply(this,arguments)}function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}function dR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dR(Object(n),!0).forEach(function(r){i0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DTe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y8(r.key),r)}}function $Te(e,t,n){return t&&DTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function LTe(e,t,n){return t=Yx(t),FTe(e,G8()?Reflect.construct(t,n||[],Yx(e).constructor):t.apply(e,n))}function FTe(e,t){if(t&&(zd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BTe(e)}function BTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G8=function(){return!!e})()}function Yx(e){return Yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yx(e)}function UTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jk(e,t)}function jk(e,t){return jk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},jk(e,t)}function i0(e,t,n){return t=Y8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y8(e){var t=zTe(e,"string");return zd(t)=="symbol"?t:t+""}function zTe(e,t){if(zd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qTe=function(t){var n=t.x,r=t.y,a=t.xAxis,s=t.yAxis,o=lA({x:a.scale,y:s.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return gs(t,"discard")&&!o.isInRange(l)?null:l},s0=function(e){function t(){return MTe(this,t),LTe(this,t,arguments)}return UTe(t,e),$Te(t,[{key:"render",value:function(){var r=this.props,a=r.x,s=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=mr(a),f=mr(s);if(Js(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=qTe(this.props);if(!d)return null;var h=d.x,m=d.y,g=this.props,v=g.shape,x=g.className,y=gs(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=fR(fR({clipPath:y},an(this.props,!0)),{},{cx:h,cy:m});return V.createElement(br,{className:Zt("recharts-reference-dot",x)},t.renderDot(v,b),Br.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(V.Component);i0(s0,"displayName","ReferenceDot");i0(s0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});i0(s0,"renderDot",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):Bt(e)?n=e(t):n=V.createElement(N8,wk({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function _k(){return _k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_k.apply(this,arguments)}function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}function hR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function mR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hR(Object(n),!0).forEach(function(r){o0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HTe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J8(r.key),r)}}function VTe(e,t,n){return t&&HTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function KTe(e,t,n){return t=Xx(t),GTe(e,X8()?Reflect.construct(t,n||[],Xx(e).constructor):t.apply(e,n))}function GTe(e,t){if(t&&(qd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YTe(e)}function YTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X8=function(){return!!e})()}function Xx(e){return Xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xx(e)}function XTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kk(e,t)}function kk(e,t){return kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},kk(e,t)}function o0(e,t,n){return t=J8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J8(e){var t=JTe(e,"string");return qd(t)=="symbol"?t:t+""}function JTe(e,t){if(qd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QTe=function(t,n,r,a,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,f=s.xAxis,d=s.yAxis;if(!f||!d)return null;var h=lA({x:f.scale,y:d.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:n?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return gs(s,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:$8(m,g)},l0=function(e){function t(){return WTe(this,t),KTe(this,t,arguments)}return XTe(t,e),VTe(t,[{key:"render",value:function(){var r=this.props,a=r.x1,s=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,f=r.clipPathId;Js(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=mr(a),h=mr(s),m=mr(o),g=mr(l),v=this.props.shape;if(!d&&!h&&!m&&!g&&!v)return null;var x=QTe(d,h,m,g,this.props);if(!x&&!v)return null;var y=gs(this.props,"hidden")?"url(#".concat(f,")"):void 0;return V.createElement(br,{className:Zt("recharts-reference-area",c)},t.renderRect(v,mR(mR({clipPath:y},an(this.props,!0)),x)),Br.renderCallByParent(this.props,x))}}])}(V.Component);o0(l0,"displayName","ReferenceArea");o0(l0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});o0(l0,"renderRect",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):Bt(e)?n=e(t):n=V.createElement(oA,_k({},t,{className:"recharts-reference-area-rect"})),n});function Q8(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function ZTe(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return KPe(r,n)}function e2e(e,t,n){var r=n==="width",a=e.x,s=e.y,o=e.width,l=e.height;return t===1?{start:r?a:s,end:r?a+o:s+l}:{start:r?a+o:s+l,end:r?a:s}}function Jx(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-a)<=0}function t2e(e,t){return Q8(e,t+1)}function n2e(e,t,n,r,a){for(var s=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,f=o,d=function(){var g=r==null?void 0:r[c];if(g===void 0)return{v:Q8(r,u)};var v=c,x,y=function(){return x===void 0&&(x=n(g,v)),x},b=g.coordinate,w=c===0||Jx(e,b,y,f,l);w||(c=0,f=o,u+=1),w&&(f=b+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=d(),h)return h.v;return[]}function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function pR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pR(Object(n),!0).forEach(function(r){r2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r2e(e,t,n){return t=a2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a2e(e){var t=i2e(e,"string");return Vm(t)=="symbol"?t:t+""}function i2e(e,t){if(Vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s2e(e,t,n,r,a){for(var s=(r||[]).slice(),o=s.length,l=t.start,c=t.end,u=function(h){var m=s[h],g,v=function(){return g===void 0&&(g=n(m,h)),g};if(h===o-1){var x=e*(m.coordinate+e*v()/2-c);s[h]=m=Lr(Lr({},m),{},{tickCoord:x>0?m.coordinate-x*e:m.coordinate})}else s[h]=m=Lr(Lr({},m),{},{tickCoord:m.coordinate});var y=Jx(e,m.tickCoord,v,l,c);y&&(c=m.tickCoord-e*(v()/2+a),s[h]=Lr(Lr({},m),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return s}function o2e(e,t,n,r,a,s){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(s){var f=r[l-1],d=n(f,l-1),h=e*(f.coordinate+e*d/2-u);o[l-1]=f=Lr(Lr({},f),{},{tickCoord:h>0?f.coordinate-h*e:f.coordinate});var m=Jx(e,f.tickCoord,function(){return d},c,u);m&&(u=f.tickCoord-e*(d/2+a),o[l-1]=Lr(Lr({},f),{},{isShow:!0}))}for(var g=s?l-1:l,v=function(b){var w=o[b],j,k=function(){return j===void 0&&(j=n(w,b)),j};if(b===0){var _=e*(w.coordinate-e*k()/2-c);o[b]=w=Lr(Lr({},w),{},{tickCoord:_<0?w.coordinate-_*e:w.coordinate})}else o[b]=w=Lr(Lr({},w),{},{tickCoord:w.coordinate});var S=Jx(e,w.tickCoord,k,c,u);S&&(c=w.tickCoord+e*(k()/2+a),o[b]=Lr(Lr({},w),{},{isShow:!0}))},x=0;x<g;x++)v(x);return o}function pA(e,t,n){var r=e.tick,a=e.ticks,s=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!a||!a.length||!r)return[];if(qe(c)||ll.isSsr)return t2e(a,typeof c=="number"&&qe(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",g=f&&m==="width"?kh(f,{fontSize:t,letterSpacing:n}):{width:0,height:0},v=function(w,j){var k=Bt(u)?u(w.value,j):w.value;return m==="width"?ZTe(kh(k,{fontSize:t,letterSpacing:n}),g,d):kh(k,{fontSize:t,letterSpacing:n})[m]},x=a.length>=2?$i(a[1].coordinate-a[0].coordinate):1,y=e2e(s,x,m);return c==="equidistantPreserveStart"?n2e(x,y,v,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=o2e(x,y,v,a,o,c==="preserveStartEnd"):h=s2e(x,y,v,a,o),h.filter(function(b){return b.isShow}))}var l2e=["viewBox"],c2e=["viewBox"],u2e=["ticks"];function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qu.apply(this,arguments)}function gR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gR(Object(n),!0).forEach(function(r){gA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uj(e,t){if(e==null)return{};var n=d2e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function d2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function f2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eq(r.key),r)}}function h2e(e,t,n){return t&&vR(e.prototype,t),n&&vR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m2e(e,t,n){return t=Qx(t),p2e(e,Z8()?Reflect.construct(t,n||[],Qx(e).constructor):t.apply(e,n))}function p2e(e,t){if(t&&(Wd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g2e(e)}function g2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z8=function(){return!!e})()}function Qx(e){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qx(e)}function v2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sk(e,t)}function Sk(e,t){return Sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Sk(e,t)}function gA(e,t,n){return t=eq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eq(e){var t=x2e(e,"string");return Wd(t)=="symbol"?t:t+""}function x2e(e,t){if(Wd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bf=function(e){function t(n){var r;return f2e(this,t),r=m2e(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return v2e(t,e),h2e(t,[{key:"shouldComponentUpdate",value:function(r,a){var s=r.viewBox,o=uj(r,l2e),l=this.props,c=l.viewBox,u=uj(l,c2e);return!nd(s,c)||!nd(o,u)||!nd(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,s=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,f=a.tickSize,d=a.mirror,h=a.tickMargin,m,g,v,x,y,b,w=d?-1:1,j=r.tickSize||f,k=qe(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=g=r.coordinate,x=o+ +!d*c,v=x-w*j,b=v-w*h,y=k;break;case"left":v=x=r.coordinate,g=s+ +!d*l,m=g-w*j,y=m-w*h,b=k;break;case"right":v=x=r.coordinate,g=s+ +d*l,m=g+w*j,y=m+w*h,b=k;break;default:m=g=r.coordinate,x=o+ +d*c,v=x+w*j,b=v+w*h,y=k;break}return{line:{x1:m,y1:v,x2:g,y2:x},tick:{x:y,y:b}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,f=r.axisLine,d=lr(lr(lr({},an(this.props,!1)),an(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);d=lr(lr({},d),{},{x1:a,y1:s+h*l,x2:a+o,y2:s+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);d=lr(lr({},d),{},{x1:a+m*o,y1:s,x2:a+m*o,y2:s+l})}return V.createElement("line",qu({},d,{className:Zt("recharts-cartesian-axis-line",hi(f,"className"))}))}},{key:"renderTicks",value:function(r,a,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,d=l.tickFormatter,h=l.unit,m=pA(lr(lr({},this.props),{},{ticks:r}),a,s),g=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),x=an(this.props,!1),y=an(f,!1),b=lr(lr({},x),{},{fill:"none"},an(c,!1)),w=m.map(function(j,k){var _=o.getTickLineCoord(j),S=_.line,E=_.tick,N=lr(lr(lr(lr({textAnchor:g,verticalAnchor:v},x),{},{stroke:"none",fill:u},y),E),{},{index:k,payload:j,visibleTicksCount:m.length,tickFormatter:d});return V.createElement(br,qu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},sx(o.props,j,k)),c&&V.createElement("line",qu({},b,S,{className:Zt("recharts-cartesian-axis-tick-line",hi(c,"className"))})),f&&t.renderTickItem(f,N,"".concat(Bt(d)?d(j.value,k):j.value).concat(h||"")))});return V.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,a=this.props,s=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var d=this.props,h=d.ticks,m=uj(d,u2e),g=h;return Bt(c)&&(g=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:V.createElement(br,{className:Zt("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},s&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Br.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,s){var o,l=Zt(a.className,"recharts-cartesian-axis-tick-value");return V.isValidElement(r)?o=V.cloneElement(r,lr(lr({},a),{},{className:l})):Bt(r)?o=r(lr(lr({},a),{},{className:l})):o=V.createElement(bx,qu({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(p.Component);gA(bf,"displayName","CartesianAxis");gA(bf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var y2e=["x1","y1","x2","y2","key"],b2e=["offset"];function Uc(e){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uc(e)}function xR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xR(Object(n),!0).forEach(function(r){w2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w2e(e,t,n){return t=j2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j2e(e){var t=_2e(e,"string");return Uc(t)=="symbol"?t:t+""}function _2e(e,t){if(Uc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Uc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lc.apply(this,arguments)}function yR(e,t){if(e==null)return{};var n=k2e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function k2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var S2e=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,c=t.ry;return V.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function tq(e,t){var n;if(V.isValidElement(e))n=V.cloneElement(e,t);else if(Bt(e))n=e(t);else{var r=t.x1,a=t.y1,s=t.x2,o=t.y2,l=t.key,c=yR(t,y2e),u=an(c,!1);u.offset;var f=yR(u,b2e);n=V.createElement("line",lc({},f,{x1:r,y1:a,x2:s,y2:o,fill:"none",key:l}))}return n}function N2e(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,s=e.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=Ur(Ur({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return tq(a,u)});return V.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function C2e(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,s=e.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=Ur(Ur({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return tq(a,u)});return V.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function A2e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,s=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==f[0]&&f.unshift(0);var d=f.map(function(h,m){var g=!f[m+1],v=g?a+o-h:f[m+1]-h;if(v<=0)return null;var x=m%t.length;return V.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:v,width:s,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function E2e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,s=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var f=u.map(function(h){return Math.round(h+s-s)}).sort(function(h,m){return h-m});s!==f[0]&&f.unshift(0);var d=f.map(function(h,m){var g=!f[m+1],v=g?s+l-h:f[m+1]-h;if(v<=0)return null;var x=m%r.length;return V.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:v,height:c,stroke:"none",fill:r[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var P2e=function(t,n){var r=t.xAxis,a=t.width,s=t.height,o=t.offset;return u8(pA(Ur(Ur(Ur({},bf.defaultProps),r),{},{ticks:Hs(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,n)},T2e=function(t,n){var r=t.yAxis,a=t.width,s=t.height,o=t.offset;return u8(pA(Ur(Ur(Ur({},bf.defaultProps),r),{},{ticks:Hs(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,n)},vu={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Nk(e){var t,n,r,a,s,o,l=dA(),c=fA(),u=xTe(),f=Ur(Ur({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:vu.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:vu.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:vu.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:vu.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:vu.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:vu.verticalFill,x:qe(e.x)?e.x:u.left,y:qe(e.y)?e.y:u.top,width:qe(e.width)?e.width:u.width,height:qe(e.height)?e.height:u.height}),d=f.x,h=f.y,m=f.width,g=f.height,v=f.syncWithTicks,x=f.horizontalValues,y=f.verticalValues,b=pTe(),w=gTe();if(!qe(m)||m<=0||!qe(g)||g<=0||!qe(d)||d!==+d||!qe(h)||h!==+h)return null;var j=f.verticalCoordinatesGenerator||P2e,k=f.horizontalCoordinatesGenerator||T2e,_=f.horizontalPoints,S=f.verticalPoints;if((!_||!_.length)&&Bt(k)){var E=x&&x.length,N=k({yAxis:w?Ur(Ur({},w),{},{ticks:E?x:w.ticks}):void 0,width:l,height:c,offset:u},E?!0:v);Js(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Uc(N),"]")),Array.isArray(N)&&(_=N)}if((!S||!S.length)&&Bt(j)){var I=y&&y.length,P=j({xAxis:b?Ur(Ur({},b),{},{ticks:I?y:b.ticks}):void 0,width:l,height:c,offset:u},I?!0:v);Js(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Uc(P),"]")),Array.isArray(P)&&(S=P)}return V.createElement("g",{className:"recharts-cartesian-grid"},V.createElement(S2e,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),V.createElement(N2e,lc({},f,{offset:u,horizontalPoints:_,xAxis:b,yAxis:w})),V.createElement(C2e,lc({},f,{offset:u,verticalPoints:S,xAxis:b,yAxis:w})),V.createElement(A2e,lc({},f,{horizontalPoints:_})),V.createElement(E2e,lc({},f,{verticalPoints:S})))}Nk.displayName="CartesianGrid";function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function O2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aq(r.key),r)}}function R2e(e,t,n){return t&&I2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function M2e(e,t,n){return t=Zx(t),D2e(e,nq()?Reflect.construct(t,n||[],Zx(e).constructor):t.apply(e,n))}function D2e(e,t){if(t&&(Hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $2e(e)}function $2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nq=function(){return!!e})()}function Zx(e){return Zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zx(e)}function L2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ck(e,t)}function Ck(e,t){return Ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ck(e,t)}function rq(e,t,n){return t=aq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aq(e){var t=F2e(e,"string");return Hd(t)=="symbol"?t:t+""}function F2e(e,t){if(Hd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ak(){return Ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ak.apply(this,arguments)}function B2e(e){var t=e.xAxisId,n=dA(),r=fA(),a=W8(t);return a==null?null:p.createElement(bf,Ak({},a,{className:Zt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Hs(o,!0)}}))}var Qr=function(e){function t(){return O2e(this,t),M2e(this,t,arguments)}return L2e(t,e),R2e(t,[{key:"render",value:function(){return p.createElement(B2e,this.props)}}])}(p.Component);rq(Qr,"displayName","XAxis");rq(Qr,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Vd(e){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vd(e)}function U2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oq(r.key),r)}}function q2e(e,t,n){return t&&z2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function W2e(e,t,n){return t=ey(t),H2e(e,iq()?Reflect.construct(t,n||[],ey(e).constructor):t.apply(e,n))}function H2e(e,t){if(t&&(Vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V2e(e)}function V2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iq=function(){return!!e})()}function ey(e){return ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ey(e)}function K2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ek(e,t)}function Ek(e,t){return Ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ek(e,t)}function sq(e,t,n){return t=oq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oq(e){var t=G2e(e,"string");return Vd(t)=="symbol"?t:t+""}function G2e(e,t){if(Vd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pk(){return Pk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pk.apply(this,arguments)}var Y2e=function(t){var n=t.yAxisId,r=dA(),a=fA(),s=H8(n);return s==null?null:p.createElement(bf,Pk({},s,{className:Zt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return Hs(l,!0)}}))},Zr=function(e){function t(){return U2e(this,t),W2e(this,t,arguments)}return K2e(t,e),q2e(t,[{key:"render",value:function(){return p.createElement(Y2e,this.props)}}])}(p.Component);sq(Zr,"displayName","YAxis");sq(Zr,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function bR(e){return Z2e(e)||Q2e(e)||J2e(e)||X2e()}function X2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J2e(e,t){if(e){if(typeof e=="string")return Tk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tk(e,t)}}function Q2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Z2e(e){if(Array.isArray(e))return Tk(e)}function Tk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ok=function(t,n,r,a,s){var o=Ui(t,mA),l=Ui(t,s0),c=[].concat(bR(o),bR(l)),u=Ui(t,l0),f="".concat(a,"Id"),d=a[0],h=n;if(c.length&&(h=c.reduce(function(v,x){if(x.props[f]===r&&gs(x.props,"extendDomain")&&qe(x.props[d])){var y=x.props[d];return[Math.min(v[0],y),Math.max(v[1],y)]}return v},h)),u.length){var m="".concat(d,"1"),g="".concat(d,"2");h=u.reduce(function(v,x){if(x.props[f]===r&&gs(x.props,"extendDomain")&&qe(x.props[m])&&qe(x.props[g])){var y=x.props[m],b=x.props[g];return[Math.min(v[0],y,b),Math.max(v[1],y,b)]}return v},h)}return s&&s.length&&(h=s.reduce(function(v,x){return qe(x)?[Math.min(v[0],x),Math.max(v[1],x)]:v},h)),h},lq={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function s(c,u,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new a(f,d||c,h),g=n?n+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,m=d.length,g=new Array(m);h<m;h++)g[h]=d[h].fn;return g},l.prototype.listenerCount=function(u){var f=n?n+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,h,m,g){var v=n?n+u:u;if(!this._events[v])return!1;var x=this._events[v],y=arguments.length,b,w;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,d),!0;case 4:return x.fn.call(x.context,f,d,h),!0;case 5:return x.fn.call(x.context,f,d,h,m),!0;case 6:return x.fn.call(x.context,f,d,h,m,g),!0}for(w=1,b=new Array(y-1);w<y;w++)b[w-1]=arguments[w];x.fn.apply(x.context,b)}else{var j=x.length,k;for(w=0;w<j;w++)switch(x[w].once&&this.removeListener(u,x[w].fn,void 0,!0),y){case 1:x[w].fn.call(x[w].context);break;case 2:x[w].fn.call(x[w].context,f);break;case 3:x[w].fn.call(x[w].context,f,d);break;case 4:x[w].fn.call(x[w].context,f,d,h);break;default:if(!b)for(k=1,b=new Array(y-1);k<y;k++)b[k-1]=arguments[k];x[w].fn.apply(x[w].context,b)}}return!0},l.prototype.on=function(u,f,d){return s(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return s(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,h){var m=n?n+u:u;if(!this._events[m])return this;if(!f)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===f&&(!h||g.once)&&(!d||g.context===d)&&o(this,m);else{for(var v=0,x=[],y=g.length;v<y;v++)(g[v].fn!==f||h&&!g[v].once||d&&g[v].context!==d)&&x.push(g[v]);x.length?this._events[m]=x.length===1?x[0]:x:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(lq);var eOe=lq.exports;const tOe=fn(eOe);var dj=new tOe,fj="recharts.syncMouseEvents";function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function nOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cq(r.key),r)}}function aOe(e,t,n){return t&&rOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hj(e,t,n){return t=cq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cq(e){var t=iOe(e,"string");return Km(t)=="symbol"?t:t+""}function iOe(e,t){if(Km(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sOe=function(){function e(){nOe(this,e),hj(this,"activeIndex",0),hj(this,"coordinateList",[]),hj(this,"layout","horizontal")}return aOe(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,s=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,f=n.offset,d=f===void 0?null:f,h=n.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=s+c+u,h=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function oOe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&qe(r)&&qe(a))return!0}return!1}function lOe(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function uq(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,s=e.endAngle,o=Pr(t,n,r,a),l=Pr(t,n,r,s);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:a,endAngle:s}}function cOe(e,t,n){var r,a,s,o;if(e==="horizontal")r=t.x,s=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,h=Pr(l,c,u,d),m=Pr(l,c,f,d);r=h.x,a=h.y,s=m.x,o=m.y}else return uq(t);return[{x:r,y:a},{x:s,y:o}]}function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function wR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Dg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wR(Object(n),!0).forEach(function(r){uOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uOe(e,t,n){return t=dOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dOe(e){var t=fOe(e,"string");return Gm(t)=="symbol"?t:t+""}function fOe(e,t){if(Gm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hOe(e){var t,n,r=e.element,a=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,h=e.chartName,m=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!s||!o||h!=="ScatterChart"&&a!=="axis")return null;var g,v=xI;if(h==="ScatterChart")g=o,v=NAe;else if(h==="BarChart")g=lOe(d,o,c,f),v=oA;else if(d==="radial"){var x=uq(o),y=x.cx,b=x.cy,w=x.radius,j=x.startAngle,k=x.endAngle;g={cx:y,cy:b,startAngle:j,endAngle:k,innerRadius:w,outerRadius:w},v=p8}else g={points:cOe(d,o,c)},v=xI;var _=Dg(Dg(Dg(Dg({stroke:"#ccc",pointerEvents:"none"},c),g),an(m,!1)),{},{payload:l,payloadIndex:u,className:Zt("recharts-tooltip-cursor",m.className)});return p.isValidElement(m)?p.cloneElement(m,_):p.createElement(v,_)}var mOe=["item"],pOe=["children","className","width","height","style","compact","title","desc"];function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}function Wu(){return Wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wu.apply(this,arguments)}function jR(e,t){return xOe(e)||vOe(e,t)||fq(e,t)||gOe()}function gOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vOe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function xOe(e){if(Array.isArray(e))return e}function _R(e,t){if(e==null)return{};var n=yOe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yOe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function bOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hq(r.key),r)}}function jOe(e,t,n){return t&&wOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _Oe(e,t,n){return t=ty(t),kOe(e,dq()?Reflect.construct(t,n||[],ty(e).constructor):t.apply(e,n))}function kOe(e,t){if(t&&(Kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SOe(e)}function SOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dq=function(){return!!e})()}function ty(e){return ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ty(e)}function NOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ik(e,t)}function Ik(e,t){return Ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ik(e,t)}function Gd(e){return EOe(e)||AOe(e)||fq(e)||COe()}function COe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fq(e,t){if(e){if(typeof e=="string")return Rk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rk(e,t)}}function AOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function EOe(e){if(Array.isArray(e))return Rk(e)}function Rk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kR(Object(n),!0).forEach(function(r){yt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yt(e,t,n){return t=hq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hq(e){var t=POe(e,"string");return Kd(t)=="symbol"?t:t+""}function POe(e,t){if(Kd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TOe={xAxis:["bottom","top"],yAxis:["left","right"]},OOe={width:"100%",height:"100%"},mq={x:0,y:0};function $g(e){return e}var IOe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},ROe=function(t,n,r,a){var s=n.find(function(f){return f&&f.index===r});if(s){if(t==="horizontal")return{x:s.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:s.coordinate};if(t==="centric"){var o=s.coordinate,l=a.radius;return pe(pe(pe({},a),Pr(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=a.angle;return pe(pe(pe({},a),Pr(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return mq},c0=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,s=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Gd(l),Gd(u)):l},[]);return o.length>0?o:t&&t.length&&qe(a)&&qe(s)?t.slice(a,s+1):[]};function pq(e){return e==="number"?[0,"auto"]:void 0}var Mk=function(t,n,r,a){var s=t.graphicalItems,o=t.tooltipAxis,l=c0(n,t);return r<0||!s||!s.length||r>=l.length?null:s.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:n;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=d===void 0?l:d;h=h_(m,o.dataKey,a)}else h=d&&d[r]||l[r];return h?[].concat(Gd(c),[f8(u,h)]):c},[])},SR=function(t,n,r,a){var s=a||{x:t.chartX,y:t.chartY},o=IOe(s,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=lSe(o,l,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,h=Mk(t,n,f,d),m=ROe(r,l,f,s);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:m}}return null},MOe=function(t,n){var r=n.axes,a=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.layout,d=t.children,h=t.stackOffset,m=c8(f,s);return r.reduce(function(g,v){var x,y=v.type.defaultProps!==void 0?pe(pe({},v.type.defaultProps),v.props):v.props,b=y.type,w=y.dataKey,j=y.allowDataOverflow,k=y.allowDuplicatedCategory,_=y.scale,S=y.ticks,E=y.includeHidden,N=y[o];if(g[N])return g;var I=c0(t.data,{graphicalItems:a.filter(function(M){var A,W=o in M.props?M.props[o]:(A=M.type.defaultProps)===null||A===void 0?void 0:A[o];return W===N}),dataStartIndex:c,dataEndIndex:u}),P=I.length,D,L,B;oOe(y.domain,j,b)&&(D=ek(y.domain,null,j),m&&(b==="number"||_!=="auto")&&(B=Nh(I,w,"category")));var U=pq(b);if(!D||D.length===0){var $,O=($=y.domain)!==null&&$!==void 0?$:U;if(w){if(D=Nh(I,w,b),b==="category"&&m){var T=Xde(D);k&&T?(L=D,D=qx(0,P)):k||(D=iI(O,D,v).reduce(function(M,A){return M.indexOf(A)>=0?M:[].concat(Gd(M),[A])},[]))}else if(b==="category")k?D=D.filter(function(M){return M!==""&&!sn(M)}):D=iI(O,D,v).reduce(function(M,A){return M.indexOf(A)>=0||A===""||sn(A)?M:[].concat(Gd(M),[A])},[]);else if(b==="number"){var R=hSe(I,a.filter(function(M){var A,W,G=o in M.props?M.props[o]:(A=M.type.defaultProps)===null||A===void 0?void 0:A[o],Y="hide"in M.props?M.props.hide:(W=M.type.defaultProps)===null||W===void 0?void 0:W.hide;return G===N&&(E||!Y)}),w,s,f);R&&(D=R)}m&&(b==="number"||_!=="auto")&&(B=Nh(I,w,"category"))}else m?D=qx(0,P):l&&l[N]&&l[N].hasStack&&b==="number"?D=h==="expand"?[0,1]:d8(l[N].stackGroups,c,u):D=l8(I,a.filter(function(M){var A=o in M.props?M.props[o]:M.type.defaultProps[o],W="hide"in M.props?M.props.hide:M.type.defaultProps.hide;return A===N&&(E||!W)}),b,f,!0);if(b==="number")D=Ok(d,D,N,s,S),O&&(D=ek(O,D,j));else if(b==="category"&&O){var C=O,F=D.every(function(M){return C.indexOf(M)>=0});F&&(D=C)}}return pe(pe({},g),{},yt({},N,pe(pe({},y),{},{axisType:s,domain:D,categoricalDomain:B,duplicateDomain:L,originalDomain:(x=y.domain)!==null&&x!==void 0?x:U,isCategorical:m,layout:f})))},{})},DOe=function(t,n){var r=n.graphicalItems,a=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.layout,d=t.children,h=c0(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=h.length,g=c8(f,s),v=-1;return r.reduce(function(x,y){var b=y.type.defaultProps!==void 0?pe(pe({},y.type.defaultProps),y.props):y.props,w=b[o],j=pq("number");if(!x[w]){v++;var k;return g?k=qx(0,m):l&&l[w]&&l[w].hasStack?(k=d8(l[w].stackGroups,c,u),k=Ok(d,k,w,s)):(k=ek(j,l8(h,r.filter(function(_){var S,E,N=o in _.props?_.props[o]:(S=_.type.defaultProps)===null||S===void 0?void 0:S[o],I="hide"in _.props?_.props.hide:(E=_.type.defaultProps)===null||E===void 0?void 0:E.hide;return N===w&&!I}),"number",f),a.defaultProps.allowDataOverflow),k=Ok(d,k,w,s)),pe(pe({},x),{},yt({},w,pe(pe({axisType:s},a.defaultProps),{},{hide:!0,orientation:hi(TOe,"".concat(s,".").concat(v%2),null),domain:k,originalDomain:j,isCategorical:g,layout:f})))}return x},{})},$Oe=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.children,d="".concat(a,"Id"),h=Ui(f,s),m={};return h&&h.length?m=MOe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=DOe(t,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},LOe=function(t){var n=zo(t),r=Hs(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:IC(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Rx(n,r)}},NR=function(t){var n=t.children,r=t.defaultShowTooltip,a=Ma(n,Fd),s=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},FOe=function(t){return!t||!t.length?!1:t.some(function(n){var r=Xs(n&&n.type);return r&&r.indexOf("Bar")>=0})},CR=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},BOe=function(t,n){var r=t.props,a=t.graphicalItems,s=t.xAxisMap,o=s===void 0?{}:s,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,f=r.height,d=r.children,h=r.margin||{},m=Ma(d,Fd),g=Ma(d,ii),v=Object.keys(c).reduce(function(k,_){var S=c[_],E=S.orientation;return!S.mirror&&!S.hide?pe(pe({},k),{},yt({},E,k[E]+S.width)):k},{left:h.left||0,right:h.right||0}),x=Object.keys(o).reduce(function(k,_){var S=o[_],E=S.orientation;return!S.mirror&&!S.hide?pe(pe({},k),{},yt({},E,hi(k,"".concat(E))+S.height)):k},{top:h.top||0,bottom:h.bottom||0}),y=pe(pe({},x),v),b=y.bottom;m&&(y.bottom+=m.props.height||Fd.defaultProps.height),g&&n&&(y=dSe(y,a,r,n));var w=u-y.left-y.right,j=f-y.top-y.bottom;return pe(pe({brushBottom:b},y),{},{width:Math.max(w,0),height:Math.max(j,0)})},UOe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},zOe=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,s=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,h=function(y,b){var w=b.graphicalItems,j=b.stackGroups,k=b.offset,_=b.updateId,S=b.dataStartIndex,E=b.dataEndIndex,N=y.barSize,I=y.layout,P=y.barGap,D=y.barCategoryGap,L=y.maxBarSize,B=CR(I),U=B.numericAxisName,$=B.cateAxisName,O=FOe(w),T=[];return w.forEach(function(R,C){var F=c0(y.data,{graphicalItems:[R],dataStartIndex:S,dataEndIndex:E}),M=R.type.defaultProps!==void 0?pe(pe({},R.type.defaultProps),R.props):R.props,A=M.dataKey,W=M.maxBarSize,G=M["".concat(U,"Id")],Y=M["".concat($,"Id")],H={},Q=c.reduce(function(ge,We){var dt=b["".concat(We.axisType,"Map")],bt=M["".concat(We.axisType,"Id")];dt&&dt[bt]||We.axisType==="zAxis"||Bc();var Et=dt[bt];return pe(pe({},ge),{},yt(yt({},We.axisType,Et),"".concat(We.axisType,"Ticks"),Hs(Et)))},H),X=Q[$],re=Q["".concat($,"Ticks")],fe=j&&j[G]&&j[G].hasStack&&SSe(R,j[G].stackGroups),J=Xs(R.type).indexOf("Bar")>=0,ye=Rx(X,re),z=[],q=O&&cSe({barSize:N,stackGroups:j,totalSize:UOe(Q,$)});if(J){var ae,se,be=sn(W)?L:W,Se=(ae=(se=Rx(X,re,!0))!==null&&se!==void 0?se:be)!==null&&ae!==void 0?ae:0;z=uSe({barGap:P,barCategoryGap:D,bandSize:Se!==ye?Se:ye,sizeList:q[Y],maxBarSize:be}),Se!==ye&&(z=z.map(function(ge){return pe(pe({},ge),{},{position:pe(pe({},ge.position),{},{offset:ge.position.offset-Se/2})})}))}var Le=R&&R.type&&R.type.getComposedData;Le&&T.push({props:pe(pe({},Le(pe(pe({},Q),{},{displayedData:F,props:y,dataKey:A,item:R,bandSize:ye,barPosition:z,offset:k,stackedData:fe,layout:I,dataStartIndex:S,dataEndIndex:E}))),{},yt(yt(yt({key:R.key||"item-".concat(C)},U,Q[U]),$,Q[$]),"animationId",_)),childIndex:lfe(R,y.children),item:R})}),T},m=function(y,b){var w=y.props,j=y.dataStartIndex,k=y.dataEndIndex,_=y.updateId;if(!ZT({props:w}))return null;var S=w.children,E=w.layout,N=w.stackOffset,I=w.data,P=w.reverseStackOrder,D=CR(E),L=D.numericAxisName,B=D.cateAxisName,U=Ui(S,r),$=jSe(I,U,"".concat(L,"Id"),"".concat(B,"Id"),N,P),O=c.reduce(function(M,A){var W="".concat(A.axisType,"Map");return pe(pe({},M),{},yt({},W,$Oe(w,pe(pe({},A),{},{graphicalItems:U,stackGroups:A.axisType===L&&$,dataStartIndex:j,dataEndIndex:k}))))},{}),T=BOe(pe(pe({},O),{},{props:w,graphicalItems:U}),b==null?void 0:b.legendBBox);Object.keys(O).forEach(function(M){O[M]=f(w,O[M],T,M.replace("Map",""),n)});var R=O["".concat(B,"Map")],C=LOe(R),F=h(w,pe(pe({},O),{},{dataStartIndex:j,dataEndIndex:k,updateId:_,graphicalItems:U,stackGroups:$,offset:T}));return pe(pe({formattedGraphicalItems:F,graphicalItems:U,offset:T,stackGroups:$},C),O)},g=function(x){function y(b){var w,j,k;return bOe(this,y),k=_Oe(this,y,[b]),yt(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),yt(k,"accessibilityManager",new sOe),yt(k,"handleLegendBBoxUpdate",function(_){if(_){var S=k.state,E=S.dataStartIndex,N=S.dataEndIndex,I=S.updateId;k.setState(pe({legendBBox:_},m({props:k.props,dataStartIndex:E,dataEndIndex:N,updateId:I},pe(pe({},k.state),{},{legendBBox:_}))))}}),yt(k,"handleReceiveSyncEvent",function(_,S,E){if(k.props.syncId===_){if(E===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(S)}}),yt(k,"handleBrushChange",function(_){var S=_.startIndex,E=_.endIndex;if(S!==k.state.dataStartIndex||E!==k.state.dataEndIndex){var N=k.state.updateId;k.setState(function(){return pe({dataStartIndex:S,dataEndIndex:E},m({props:k.props,dataStartIndex:S,dataEndIndex:E,updateId:N},k.state))}),k.triggerSyncEvent({dataStartIndex:S,dataEndIndex:E})}}),yt(k,"handleMouseEnter",function(_){var S=k.getMouseInfo(_);if(S){var E=pe(pe({},S),{},{isTooltipActive:!0});k.setState(E),k.triggerSyncEvent(E);var N=k.props.onMouseEnter;Bt(N)&&N(E,_)}}),yt(k,"triggeredAfterMouseMove",function(_){var S=k.getMouseInfo(_),E=S?pe(pe({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(E),k.triggerSyncEvent(E);var N=k.props.onMouseMove;Bt(N)&&N(E,_)}),yt(k,"handleItemMouseEnter",function(_){k.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),yt(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),yt(k,"handleMouseMove",function(_){_.persist(),k.throttleTriggeredAfterMouseMove(_)}),yt(k,"handleMouseLeave",function(_){k.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};k.setState(S),k.triggerSyncEvent(S);var E=k.props.onMouseLeave;Bt(E)&&E(S,_)}),yt(k,"handleOuterEvent",function(_){var S=ofe(_),E=hi(k.props,"".concat(S));if(S&&Bt(E)){var N,I;/.*touch.*/i.test(S)?I=k.getMouseInfo(_.changedTouches[0]):I=k.getMouseInfo(_),E((N=I)!==null&&N!==void 0?N:{},_)}}),yt(k,"handleClick",function(_){var S=k.getMouseInfo(_);if(S){var E=pe(pe({},S),{},{isTooltipActive:!0});k.setState(E),k.triggerSyncEvent(E);var N=k.props.onClick;Bt(N)&&N(E,_)}}),yt(k,"handleMouseDown",function(_){var S=k.props.onMouseDown;if(Bt(S)){var E=k.getMouseInfo(_);S(E,_)}}),yt(k,"handleMouseUp",function(_){var S=k.props.onMouseUp;if(Bt(S)){var E=k.getMouseInfo(_);S(E,_)}}),yt(k,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),yt(k,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&k.handleMouseDown(_.changedTouches[0])}),yt(k,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&k.handleMouseUp(_.changedTouches[0])}),yt(k,"handleDoubleClick",function(_){var S=k.props.onDoubleClick;if(Bt(S)){var E=k.getMouseInfo(_);S(E,_)}}),yt(k,"handleContextMenu",function(_){var S=k.props.onContextMenu;if(Bt(S)){var E=k.getMouseInfo(_);S(E,_)}}),yt(k,"triggerSyncEvent",function(_){k.props.syncId!==void 0&&dj.emit(fj,k.props.syncId,_,k.eventEmitterSymbol)}),yt(k,"applySyncEvent",function(_){var S=k.props,E=S.layout,N=S.syncMethod,I=k.state.updateId,P=_.dataStartIndex,D=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)k.setState(pe({dataStartIndex:P,dataEndIndex:D},m({props:k.props,dataStartIndex:P,dataEndIndex:D,updateId:I},k.state)));else if(_.activeTooltipIndex!==void 0){var L=_.chartX,B=_.chartY,U=_.activeTooltipIndex,$=k.state,O=$.offset,T=$.tooltipTicks;if(!O)return;if(typeof N=="function")U=N(T,_);else if(N==="value"){U=-1;for(var R=0;R<T.length;R++)if(T[R].value===_.activeLabel){U=R;break}}var C=pe(pe({},O),{},{x:O.left,y:O.top}),F=Math.min(L,C.x+C.width),M=Math.min(B,C.y+C.height),A=T[U]&&T[U].value,W=Mk(k.state,k.props.data,U),G=T[U]?{x:E==="horizontal"?T[U].coordinate:F,y:E==="horizontal"?M:T[U].coordinate}:mq;k.setState(pe(pe({},_),{},{activeLabel:A,activeCoordinate:G,activePayload:W,activeTooltipIndex:U}))}else k.setState(_)}),yt(k,"renderCursor",function(_){var S,E=k.state,N=E.isTooltipActive,I=E.activeCoordinate,P=E.activePayload,D=E.offset,L=E.activeTooltipIndex,B=E.tooltipAxisBandSize,U=k.getTooltipEventType(),$=(S=_.props.active)!==null&&S!==void 0?S:N,O=k.props.layout,T=_.key||"_recharts-cursor";return V.createElement(hOe,{key:T,activeCoordinate:I,activePayload:P,activeTooltipIndex:L,chartName:n,element:_,isActive:$,layout:O,offset:D,tooltipAxisBandSize:B,tooltipEventType:U})}),yt(k,"renderPolarAxis",function(_,S,E){var N=hi(_,"type.axisType"),I=hi(k.state,"".concat(N,"Map")),P=_.type.defaultProps,D=P!==void 0?pe(pe({},P),_.props):_.props,L=I&&I[D["".concat(N,"Id")]];return p.cloneElement(_,pe(pe({},L),{},{className:Zt(N,L.className),key:_.key||"".concat(S,"-").concat(E),ticks:Hs(L,!0)}))}),yt(k,"renderPolarGrid",function(_){var S=_.props,E=S.radialLines,N=S.polarAngles,I=S.polarRadius,P=k.state,D=P.radiusAxisMap,L=P.angleAxisMap,B=zo(D),U=zo(L),$=U.cx,O=U.cy,T=U.innerRadius,R=U.outerRadius;return p.cloneElement(_,{polarAngles:Array.isArray(N)?N:Hs(U,!0).map(function(C){return C.coordinate}),polarRadius:Array.isArray(I)?I:Hs(B,!0).map(function(C){return C.coordinate}),cx:$,cy:O,innerRadius:T,outerRadius:R,key:_.key||"polar-grid",radialLines:E})}),yt(k,"renderLegend",function(){var _=k.state.formattedGraphicalItems,S=k.props,E=S.children,N=S.width,I=S.height,P=k.props.margin||{},D=N-(P.left||0)-(P.right||0),L=s8({children:E,formattedGraphicalItems:_,legendWidth:D,legendContent:u});if(!L)return null;var B=L.item,U=_R(L,mOe);return p.cloneElement(B,pe(pe({},U),{},{chartWidth:N,chartHeight:I,margin:P,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),yt(k,"renderTooltip",function(){var _,S=k.props,E=S.children,N=S.accessibilityLayer,I=Ma(E,Qn);if(!I)return null;var P=k.state,D=P.isTooltipActive,L=P.activeCoordinate,B=P.activePayload,U=P.activeLabel,$=P.offset,O=(_=I.props.active)!==null&&_!==void 0?_:D;return p.cloneElement(I,{viewBox:pe(pe({},$),{},{x:$.left,y:$.top}),active:O,label:U,payload:O?B:[],coordinate:L,accessibilityLayer:N})}),yt(k,"renderBrush",function(_){var S=k.props,E=S.margin,N=S.data,I=k.state,P=I.offset,D=I.dataStartIndex,L=I.dataEndIndex,B=I.updateId;return p.cloneElement(_,{key:_.key||"_recharts-brush",onChange:Og(k.handleBrushChange,_.props.onChange),data:N,x:qe(_.props.x)?_.props.x:P.left,y:qe(_.props.y)?_.props.y:P.top+P.height+P.brushBottom-(E.bottom||0),width:qe(_.props.width)?_.props.width:P.width,startIndex:D,endIndex:L,updateId:"brush-".concat(B)})}),yt(k,"renderReferenceElement",function(_,S,E){if(!_)return null;var N=k,I=N.clipPathId,P=k.state,D=P.xAxisMap,L=P.yAxisMap,B=P.offset,U=_.type.defaultProps||{},$=_.props,O=$.xAxisId,T=O===void 0?U.xAxisId:O,R=$.yAxisId,C=R===void 0?U.yAxisId:R;return p.cloneElement(_,{key:_.key||"".concat(S,"-").concat(E),xAxis:D[T],yAxis:L[C],viewBox:{x:B.left,y:B.top,width:B.width,height:B.height},clipPathId:I})}),yt(k,"renderActivePoints",function(_){var S=_.item,E=_.activePoint,N=_.basePoint,I=_.childIndex,P=_.isRange,D=[],L=S.props.key,B=S.item.type.defaultProps!==void 0?pe(pe({},S.item.type.defaultProps),S.item.props):S.item.props,U=B.activeDot,$=B.dataKey,O=pe(pe({index:I,dataKey:$,cx:E.x,cy:E.y,r:4,fill:sA(S.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},an(U,!1)),ix(U));return D.push(y.renderActiveDot(U,O,"".concat(L,"-activePoint-").concat(I))),N?D.push(y.renderActiveDot(U,pe(pe({},O),{},{cx:N.x,cy:N.y}),"".concat(L,"-basePoint-").concat(I))):P&&D.push(null),D}),yt(k,"renderGraphicChild",function(_,S,E){var N=k.filterFormatItem(_,S,E);if(!N)return null;var I=k.getTooltipEventType(),P=k.state,D=P.isTooltipActive,L=P.tooltipAxis,B=P.activeTooltipIndex,U=P.activeLabel,$=k.props.children,O=Ma($,Qn),T=N.props,R=T.points,C=T.isRange,F=T.baseLine,M=N.item.type.defaultProps!==void 0?pe(pe({},N.item.type.defaultProps),N.item.props):N.item.props,A=M.activeDot,W=M.hide,G=M.activeBar,Y=M.activeShape,H=!!(!W&&D&&O&&(A||G||Y)),Q={};I!=="axis"&&O&&O.props.trigger==="click"?Q={onClick:Og(k.handleItemMouseEnter,_.props.onClick)}:I!=="axis"&&(Q={onMouseLeave:Og(k.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:Og(k.handleItemMouseEnter,_.props.onMouseEnter)});var X=p.cloneElement(_,pe(pe({},N.props),Q));function re(We){return typeof L.dataKey=="function"?L.dataKey(We.payload):null}if(H)if(B>=0){var fe,J;if(L.dataKey&&!L.allowDuplicatedCategory){var ye=typeof L.dataKey=="function"?re:"payload.".concat(L.dataKey.toString());fe=h_(R,ye,U),J=C&&F&&h_(F,ye,U)}else fe=R==null?void 0:R[B],J=C&&F&&F[B];if(Y||G){var z=_.props.activeIndex!==void 0?_.props.activeIndex:B;return[p.cloneElement(_,pe(pe(pe({},N.props),Q),{},{activeIndex:z})),null,null]}if(!sn(fe))return[X].concat(Gd(k.renderActivePoints({item:N,activePoint:fe,basePoint:J,childIndex:B,isRange:C})))}else{var q,ae=(q=k.getItemByXY(k.state.activeCoordinate))!==null&&q!==void 0?q:{graphicalItem:X},se=ae.graphicalItem,be=se.item,Se=be===void 0?_:be,Le=se.childIndex,ge=pe(pe(pe({},N.props),Q),{},{activeIndex:Le});return[p.cloneElement(Se,ge),null,null]}return C?[X,null,null]:[X,null]}),yt(k,"renderCustomized",function(_,S,E){return p.cloneElement(_,pe(pe({key:"recharts-customized-".concat(E)},k.props),k.state))}),yt(k,"renderMap",{CartesianGrid:{handler:$g,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:$g},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:$g},YAxis:{handler:$g},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:$b("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=i6(k.triggeredAfterMouseMove,(j=b.throttleDelay)!==null&&j!==void 0?j:1e3/60),k.state={},k}return NOe(y,x),jOe(y,[{key:"componentDidMount",value:function(){var w,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,j=w.children,k=w.data,_=w.height,S=w.layout,E=Ma(j,Qn);if(E){var N=E.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,P=Mk(this.state,k,N,I),D=this.state.tooltipTicks[N].coordinate,L=(this.state.offset.top+_)/2,B=S==="horizontal",U=B?{x:D,y:L}:{y:D,x:L},$=this.state.formattedGraphicalItems.find(function(T){var R=T.item;return R.type.name==="Scatter"});$&&(U=pe(pe({},U),$.props.points[N].tooltipPosition),P=$.props.points[N].tooltipPayload);var O={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:I,activePayload:P,activeCoordinate:U};this.setState(O),this.renderCursor(E),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var k,_;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(w){p_([Ma(w.children,Qn)],[Ma(this.props.children,Qn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Ma(this.props.children,Qn);if(w&&typeof w.props.shared=="boolean"){var j=w.props.shared?"axis":"item";return l.indexOf(j)>=0?j:s}return s}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var j=this.container,k=j.getBoundingClientRect(),_=Rwe(k),S={chartX:Math.round(w.pageX-_.left),chartY:Math.round(w.pageY-_.top)},E=k.width/j.offsetWidth||1,N=this.inRange(S.chartX,S.chartY,E);if(!N)return null;var I=this.state,P=I.xAxisMap,D=I.yAxisMap,L=this.getTooltipEventType(),B=SR(this.state,this.props.data,this.props.layout,N);if(L!=="axis"&&P&&D){var U=zo(P).scale,$=zo(D).scale,O=U&&U.invert?U.invert(S.chartX):null,T=$&&$.invert?$.invert(S.chartY):null;return pe(pe({},S),{},{xValue:O,yValue:T},B)}return B?pe(pe({},S),B):null}},{key:"inRange",value:function(w,j){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,S=w/k,E=j/k;if(_==="horizontal"||_==="vertical"){var N=this.state.offset,I=S>=N.left&&S<=N.left+N.width&&E>=N.top&&E<=N.top+N.height;return I?{x:S,y:E}:null}var P=this.state,D=P.angleAxisMap,L=P.radiusAxisMap;if(D&&L){var B=zo(D);return lI({x:S,y:E},B)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,j=this.getTooltipEventType(),k=Ma(w,Qn),_={};k&&j==="axis"&&(k.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=ix(this.props,this.handleOuterEvent);return pe(pe({},S),_)}},{key:"addListener",value:function(){dj.on(fj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){dj.removeListener(fj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,j,k){for(var _=this.state.formattedGraphicalItems,S=0,E=_.length;S<E;S++){var N=_[S];if(N.item===w||N.props.key===w.key||j===Xs(N.item.type)&&k===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,j=this.state.offset,k=j.left,_=j.top,S=j.height,E=j.width;return V.createElement("defs",null,V.createElement("clipPath",{id:w},V.createElement("rect",{x:k,y:_,height:S,width:E})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(j,k){var _=jR(k,2),S=_[0],E=_[1];return pe(pe({},j),{},yt({},S,E.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(j,k){var _=jR(k,2),S=_[0],E=_[1];return pe(pe({},j),{},yt({},S,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[w])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(w){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[w])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(w){var j=this.state,k=j.formattedGraphicalItems,_=j.activeItem;if(k&&k.length)for(var S=0,E=k.length;S<E;S++){var N=k[S],I=N.props,P=N.item,D=P.type.defaultProps!==void 0?pe(pe({},P.type.defaultProps),P.props):P.props,L=Xs(P.type);if(L==="Bar"){var B=(I.data||[]).find(function(T){return gAe(w,T)});if(B)return{graphicalItem:N,payload:B}}else if(L==="RadialBar"){var U=(I.data||[]).find(function(T){return lI(w,T)});if(U)return{graphicalItem:N,payload:U}}else if(n0(N,_)||r0(N,_)||zm(N,_)){var $=yEe({graphicalItem:N,activeTooltipItem:_,itemData:D.data}),O=D.activeIndex===void 0?$:D.activeIndex;return{graphicalItem:pe(pe({},N),{},{childIndex:O}),payload:zm(N,_)?D.data[$]:N.props.data[$]}}}return null}},{key:"render",value:function(){var w=this;if(!ZT(this))return null;var j=this.props,k=j.children,_=j.className,S=j.width,E=j.height,N=j.style,I=j.compact,P=j.title,D=j.desc,L=_R(j,pOe),B=an(L,!1);if(I)return V.createElement(oR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement(v_,Wu({},B,{width:S,height:E,title:P,desc:D}),this.renderClipPath(),t2(k,this.renderMap)));if(this.props.accessibilityLayer){var U,$;B.tabIndex=(U=this.props.tabIndex)!==null&&U!==void 0?U:0,B.role=($=this.props.role)!==null&&$!==void 0?$:"application",B.onKeyDown=function(T){w.accessibilityManager.keyboardEvent(T)},B.onFocus=function(){w.accessibilityManager.focus()}}var O=this.parseEventsOfWrapper();return V.createElement(oR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement("div",Wu({className:Zt("recharts-wrapper",_),style:pe({position:"relative",cursor:"default",width:S,height:E},N)},O,{ref:function(R){w.container=R}}),V.createElement(v_,Wu({},B,{width:S,height:E,title:P,desc:D,style:OOe}),this.renderClipPath(),t2(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(p.Component);yt(g,"displayName",n),yt(g,"defaultProps",pe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),yt(g,"getDerivedStateFromProps",function(x,y){var b=x.dataKey,w=x.data,j=x.children,k=x.width,_=x.height,S=x.layout,E=x.stackOffset,N=x.margin,I=y.dataStartIndex,P=y.dataEndIndex;if(y.updateId===void 0){var D=NR(x);return pe(pe(pe({},D),{},{updateId:0},m(pe(pe({props:x},D),{},{updateId:0}),y)),{},{prevDataKey:b,prevData:w,prevWidth:k,prevHeight:_,prevLayout:S,prevStackOffset:E,prevMargin:N,prevChildren:j})}if(b!==y.prevDataKey||w!==y.prevData||k!==y.prevWidth||_!==y.prevHeight||S!==y.prevLayout||E!==y.prevStackOffset||!nd(N,y.prevMargin)){var L=NR(x),B={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},U=pe(pe({},SR(y,w,S)),{},{updateId:y.updateId+1}),$=pe(pe(pe({},L),B),U);return pe(pe(pe({},$),m(pe({props:x},$),y)),{},{prevDataKey:b,prevData:w,prevWidth:k,prevHeight:_,prevLayout:S,prevStackOffset:E,prevMargin:N,prevChildren:j})}if(!p_(j,y.prevChildren)){var O,T,R,C,F=Ma(j,Fd),M=F&&(O=(T=F.props)===null||T===void 0?void 0:T.startIndex)!==null&&O!==void 0?O:I,A=F&&(R=(C=F.props)===null||C===void 0?void 0:C.endIndex)!==null&&R!==void 0?R:P,W=M!==I||A!==P,G=!sn(w),Y=G&&!W?y.updateId:y.updateId+1;return pe(pe({updateId:Y},m(pe(pe({props:x},y),{},{updateId:Y,dataStartIndex:M,dataEndIndex:A}),y)),{},{prevChildren:j,dataStartIndex:M,dataEndIndex:A})}return null}),yt(g,"renderActiveDot",function(x,y,b){var w;return p.isValidElement(x)?w=p.cloneElement(x,y):Bt(x)?w=x(y):w=V.createElement(N8,y),V.createElement(br,{className:"recharts-active-dot",key:b},w)});var v=p.forwardRef(function(y,b){return V.createElement(g,Wu({},y,{ref:b}))});return v.displayName=g.displayName,v},ti=zOe({chartName:"BarChart",GraphicalChild:Fn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Qr},{axisType:"yAxis",AxisComp:Zr}],formatAxisMap:WPe});const qOe=[{name:"Resolved by Human",value:15},{name:"Resolved by AI",value:85}],Sr=["#60a5fa","#2563eb","#1d4ed8","#10b981","#f59e0b","#ef4444"],wn=({label:e,description:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:t})})]})]});function WOe(){p.useMemo(()=>Sr.slice(0,qOe.length),[]),jr();const[e,t]=p.useState(""),[n,r]=p.useState(""),[a,s]=p.useState([]),[o,l]=p.useState(0),[c,u]=p.useState(0),[f,d]=p.useState({total:0,ai:0,rate:0,handover:0,handover_rate:0}),[h,m]=p.useState("all"),[g,v]=p.useState([]),[x,y]=p.useState([]),[b,w]=p.useState(!1),[j,k]=p.useState([]),[_,S]=p.useState([]),[E,N]=p.useState([]),[I,P]=p.useState({input:0,output:0,total:0}),[D,L]=p.useState([]),[B,U]=p.useState([]),[$,O]=p.useState([]),[T,R]=p.useState("all"),[C,F]=p.useState([]),[M,A]=p.useState(null),[W,G]=p.useState(null),[Y,H]=p.useState([]),[Q,X]=p.useState(null),re=z=>{if(!z||z.trim().length===0)return"(unspecified)";if(z.startsWith("other:"))return z.replace(/^other:/,"Other: ");switch(z){case"ambiguous":return"Ambiguous intent";case"payment":return"Payment-related";case"policy":return"Policy/compliance";default:return z}},fe=()=>{const z=new Date,q=n?new Date(n):z,ae=e?new Date(e):new Date(z.getTime()-29*24*60*60*1e3),se=new Date(Date.UTC(ae.getUTCFullYear(),ae.getUTCMonth(),ae.getUTCDate(),0,0,0)),be=new Date(Date.UTC(q.getUTCFullYear(),q.getUTCMonth(),q.getUTCDate()+1,0,0,0));return{start:se.toISOString(),end:be.toISOString()}},J=async()=>{const{start:z,end:q}=fe(),{data:ae}=await Nt.rpc("get_channel_chat_counts",{p_from:z,p_to:q});s((ae||[]).map(We=>({provider:We.provider,display_name:We.display_name,thread_count:Number(We.thread_count||0)})));const{data:se}=await Nt.rpc("get_response_time_stats",{p_from:z,p_to:q,p_channel:h!=="all"?h:null});if(se&&se.length>0){const We=se[0];l(Number(We.ai_avg||0)),u(Number(We.agent_avg||0))}const{data:be,error:Se}=await Nt.rpc("get_containment_and_handover",{p_from:z,p_to:q});if(!Se&&be&&be.length>0){const We=be[0];d({total:Number(We.total_threads||0),ai:Number(We.ai_resolved_count||0),rate:Number(We.containment_rate||0),handover:Number(We.handover_count||0),handover_rate:Number(We.handover_rate||0)})}else if(Se&&Se.code==="PGRST202"){const{data:We}=await Nt.rpc("get_containment",{p_from:z,p_to:q});let dt=0,bt=0,Et=0,te=0,me=0;if(We&&We.length>0){const Ue=We[0];dt=Number(Ue.total_threads||0),bt=Number(Ue.ai_resolved_count||0),Et=Number(Ue.rate||0)}const{data:Fe}=await Nt.rpc("get_handover_stats",{p_from:z,p_to:q}),He=(Fe||[]).reduce((Ue,he)=>Ue+Number(he.count||0),0);te=He,me=dt>0?He/dt:0,d({total:dt,ai:bt,rate:Et,handover:te,handover_rate:me})}const{data:Le}=await Nt.rpc("get_chats_timeseries",{p_from:z,p_to:q,p_channel:h!=="all"?h:null});v((Le||[]).map(We=>({bucket:We.bucket,provider:We.provider,count:Number(We.count||0)})));const{data:ge}=await Nt.rpc("get_handover_stats",{p_from:z,p_to:q});y((ge||[]).map(We=>({reason:re(We.reason)||"(unspecified)",count:Number(We.count||0),total:Number(We.total||0),rate:Number(We.rate||0)})));try{const{data:We}=await ne.from("token_usage_logs").select("made_at, prompt_tokens, completion_tokens, total_tokens, model, channel_id").gte("made_at",z).lt("made_at",q).order("made_at",{ascending:!0}),dt={},bt={};let Et=0,te=0,me=0;for(const Ue of We||[]){const he=new Date(Ue.made_at).toISOString().slice(0,10),Ot=Number(Ue.prompt_tokens||0),vt=Number(Ue.completion_tokens||0),wt=Number(Ue.total_tokens||Ot+vt);dt[he]||(dt[he]={input:0,output:0,total:0}),dt[he].input+=Ot,dt[he].output+=vt,dt[he].total+=wt;const ve=String(Ue.model||"unknown");bt[ve]=(bt[ve]||0)+wt,Et+=Ot,te+=vt,me+=wt}const Fe=Object.keys(dt).sort().map(Ue=>({day:Ue,...dt[Ue]})),He=Object.entries(bt).sort((Ue,he)=>he[1]-Ue[1]).slice(0,8).map(([Ue,he])=>({model:Ue,tokens:he}));S(Fe),N(He),P({input:Et,output:te,total:me})}catch{}try{const{data:We}=await Nt.rpc("get_handover_by_super_agent",{p_from:z,p_to:q});L((We||[]).map(te=>({super_agent_id:te.super_agent_id,super_agent_name:te.super_agent_name,human_resolved:Number(te.human_resolved||0),ai_resolved:Number(te.ai_resolved||0),handover_rate:Number(te.handover_rate||0)})));const dt=T!=="all"?T:null,[{data:bt},{data:Et}]=await Promise.all([Nt.rpc("get_handover_by_agent",{p_from:z,p_to:q,p_super_agent_id:dt}),Nt.rpc("get_agent_kpis",{p_from:z,p_to:q,p_super_agent_id:dt})]);U((bt||[]).map(te=>({agent_user_id:te.agent_user_id,agent_name:te.agent_name,super_agent_id:te.super_agent_id,human_resolved:Number(te.human_resolved||0),ai_resolved:Number(te.ai_resolved||0),handover_rate:Number(te.handover_rate||0)}))),O((Et||[]).map(te=>({agent_user_id:te.agent_user_id,agent_name:te.agent_name,resolved_count:Number(te.resolved_count||0),avg_resolution_minutes:te.avg_resolution_minutes!=null?Number(te.avg_resolution_minutes):null})))}catch{}},ye=async()=>{try{const{data:z,error:q}=await Nt.rpc("get_database_stats_detailed");if(q){console.error("Error fetching database stats:",q);return}z&&(console.log("Database stats fetched:",z.length,"tables"),F(z.map(ge=>({tablename:ge.tablename,total_size_bytes:Number(ge.total_size_bytes||0),total_size_pretty:ge.total_size_pretty||"0 bytes",table_size_bytes:Number(ge.table_size_bytes||0),table_size_pretty:ge.table_size_pretty||"0 bytes",indexes_size_bytes:Number(ge.indexes_size_bytes||0),indexes_size_pretty:ge.indexes_size_pretty||"0 bytes",row_count:Number(ge.row_count||0),dead_rows:Number(ge.dead_rows||0),sequential_scans:Number(ge.sequential_scans||0),index_scans:Number(ge.index_scans||0),table_scan_ratio:Number(ge.table_scan_ratio||0),last_vacuum:ge.last_vacuum||null,last_autovacuum:ge.last_autovacuum||null,last_analyze:ge.last_analyze||null,last_autoanalyze:ge.last_autoanalyze||null,inserts:Number(ge.inserts||0),updates:Number(ge.updates||0),deletes:Number(ge.deletes||0),hot_updates:Number(ge.hot_updates||0)}))));const{data:ae,error:se}=await Nt.rpc("get_database_overview");if(se&&console.error("Error fetching database overview:",se),ae&&ae.length>0){console.log("Database overview fetched:",ae);const ge=ae[0];A({total_size_bytes:Number(ge.total_size_bytes||0),total_size_pretty:ge.total_size_pretty||"0 bytes",data_size_bytes:Number(ge.data_size_bytes||0),data_size_pretty:ge.data_size_pretty||"0 bytes",indexes_size_bytes:Number(ge.indexes_size_bytes||0),indexes_size_pretty:ge.indexes_size_pretty||"0 bytes",total_tables:Number(ge.total_tables||0),total_rows:Number(ge.total_rows||0),total_indexes:Number(ge.total_indexes||0),total_sequences:Number(ge.total_sequences||0)})}const{data:be}=await Nt.rpc("get_database_memory_stats");if(be&&be.length>0){const ge=be[0];G({shared_buffers_hit:Number(ge.shared_buffers_hit||0),shared_buffers_read:Number(ge.shared_buffers_read||0),shared_buffers_hit_ratio:Number(ge.shared_buffers_hit_ratio||0),cache_hit_ratio:Number(ge.cache_hit_ratio||0),heap_hit_ratio:Number(ge.heap_hit_ratio||0),idx_scan_ratio:Number(ge.idx_scan_ratio||0),total_sequential_scans:Number(ge.total_sequential_scans||0),total_index_scans:Number(ge.total_index_scans||0)})}const{data:Se}=await Nt.rpc("get_index_stats");Se&&H(Se.map(ge=>({tablename:ge.tablename,indexname:ge.indexname,index_size_bytes:Number(ge.index_size_bytes||0),index_size_pretty:ge.index_size_pretty||"0 bytes",index_scans:Number(ge.index_scans||0),index_tup_reads:Number(ge.index_tup_reads||0),index_tup_fetches:Number(ge.index_tup_fetches||0),idx_blks_hit:Number(ge.idx_blks_hit||0),idx_blks_read:Number(ge.idx_blks_read||0)})));const{data:Le}=await Nt.rpc("get_database_activity");if(Le&&Le.length>0){const ge=Le[0];X({total_inserts:Number(ge.total_inserts||0),total_updates:Number(ge.total_updates||0),total_deletes:Number(ge.total_deletes||0),total_sequential_scans:Number(ge.total_sequential_scans||0),total_index_scans:Number(ge.total_index_scans||0),total_blocks_hit:Number(ge.total_blocks_hit||0),total_blocks_read:Number(ge.total_blocks_read||0),cache_hit_percentage:Number(ge.cache_hit_percentage||0)})}}catch(z){console.error("Failed to fetch database stats:",z),F([]),A(null),G(null),H([]),X(null)}};return p.useEffect(()=>{(()=>{J(),ye()})()},[e,n,h]),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Analytics"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"High-level KPIs for conversations, AI agents, and human agents."})]}),i.jsxs("div",{className:"flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"From"}),i.jsx(Ve,{type:"date",value:e,max:n||new Date().toISOString().slice(0,10),onChange:z=>{const q=z.target.value;t(q),n&&q&&q>n&&r(q)},className:"h-9 w-[180px]"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"To"}),i.jsx(Ve,{type:"date",value:n,min:e||void 0,max:new Date().toISOString().slice(0,10),onChange:z=>{const q=z.target.value;r(q),e&&q&&q<e&&t(q)},className:"h-9 w-[180px]"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Channel"}),i.jsxs(Ut,{value:h,onValueChange:async z=>{m(z);try{await Wt({action:"analytics.channel_filter",resource:"analytics",context:{channel:z}})}catch{}},children:[i.jsx(Dt,{className:"h-9 w-[180px]",children:i.jsx(Rt,{placeholder:"All"})}),i.jsxs($t,{children:[i.jsx(De,{value:"all",children:"All"}),i.jsx(De,{value:"whatsapp",children:"WhatsApp"}),i.jsx(De,{value:"web",children:"Web"}),i.jsx(De,{value:"telegram",children:"Telegram"})]})]})]}),i.jsx(Z,{variant:"outline",className:"h-9",onClick:()=>{J(),ye()},children:"Refresh"})]}),i.jsxs(pl,{defaultValue:"conversation",className:"w-full mt-4",children:[i.jsxs(so,{className:"grid w-full max-w-2xl grid-cols-5 bg-muted/50 p-1",children:[i.jsx(Gn,{value:"conversation",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("span",{children:"Conversation"})}),i.jsx(le,{children:i.jsx("p",{children:"Lihat analitik percakapan dan KPI"})})]})}),i.jsx(Gn,{value:"ai-agent",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("span",{children:"AI Agent"})}),i.jsx(le,{children:i.jsx("p",{children:"Lihat metrik kinerja agen AI"})})]})}),i.jsx(Gn,{value:"human-agent",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("span",{children:"Human Agent"})}),i.jsx(le,{children:i.jsx("p",{children:"Lihat metrik kinerja agen manusia"})})]})}),i.jsx(Gn,{value:"database",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("span",{children:"Database"})}),i.jsx(le,{children:i.jsx("p",{children:"Lihat statistik penggunaan database dan ukuran tabel"})})]})})]}),i.jsxs(Dn,{value:"conversation",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Chats",description:"Jumlah total percakapan yang terjadi dalam periode yang dipilih"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:f.total})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"AI Containment Rate",description:"Persentase percakapan yang berhasil diselesaikan oleh AI tanpa perlu intervensi manusia. Semakin tinggi semakin baik."})})}),i.jsxs(Je,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Math.round(f.rate*100),"%"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.ai," / ",f.total]}),i.jsx(Z,{variant:"outline",className:"mt-2 h-8",onClick:async()=>{w(!0);const{start:z,end:q}=fe(),{data:ae}=await Nt.rpc("get_non_contained",{p_from:z,p_to:q,p_limit:100,p_offset:0});k(ae||[])},children:"View non-contained"})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Handover Rate",description:"Persentase percakapan yang dialihkan dari AI ke agen manusia karena memerlukan intervensi manual"})})}),i.jsxs(Je,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Math.round(f.handover_rate*100),"%"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.handover," / ",f.total]})]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Chats per Channel",description:"Distribusi jumlah percakapan berdasarkan saluran komunikasi (WhatsApp, Telegram, Web Chat, dll)"})})}),i.jsx(Je,{className:"h-64",children:i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:a.map(z=>({name:z.display_name||z.provider,count:z.thread_count})),children:[i.jsx(Qr,{dataKey:"name"}),i.jsx(Zr,{}),i.jsx(Qn,{}),i.jsx(Fn,{dataKey:"count",fill:Sr[2],radius:[4,4,0,0],children:i.jsx(Li,{dataKey:"count",position:"top"})})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Chats Time Series (Asia/Jakarta)",description:"Grafik tren jumlah percakapan dari waktu ke waktu dalam zona waktu Asia/Jakarta, dikelompokkan berdasarkan saluran"})})}),i.jsx(Je,{className:"h-64",children:i.jsx(ei,{width:"100%",height:"100%",children:(()=>{const z=Array.from(new Set(g.map(se=>se.provider))),ae=Array.from(new Set(g.map(se=>se.bucket))).sort().map(se=>{var Se;const be={bucket:new Date(se).toLocaleDateString("en-US",{timeZone:"Asia/Jakarta"})};for(const Le of z)be[Le]=((Se=g.find(ge=>ge.bucket===se&&ge.provider===Le))==null?void 0:Se.count)||0;return be});return i.jsxs(ti,{data:ae,children:[i.jsx(Qr,{dataKey:"bucket"}),i.jsx(Zr,{}),i.jsx(Qn,{}),i.jsx(ii,{}),z.map((se,be)=>i.jsx(Fn,{dataKey:se,stackId:void 0,fill:Sr[be%(Sr.length-1)+1]},se))]})})()})})]})]}),i.jsxs(Dn,{value:"ai-agent",className:"space-y-6",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"AI Token Usage (by day)",description:"Penggunaan token AI per hari, menunjukkan token input (prompt) dan output (completion). Token adalah unit penggunaan untuk menghitung biaya AI"})})}),i.jsxs(Je,{className:"h-64",children:[i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:_.map(z=>({day:new Date(z.day).toLocaleDateString("en-US",{timeZone:"Asia/Jakarta"}),input:z.input,output:z.output})),children:[i.jsx(Qr,{dataKey:"day"}),i.jsx(Zr,{}),i.jsx(Qn,{}),i.jsx(ii,{}),i.jsx(Fn,{dataKey:"input",stackId:"tokens",fill:Sr[1],name:"Prompt tokens"}),i.jsx(Fn,{dataKey:"output",stackId:"tokens",fill:Sr[2],name:"Completion tokens"})]})}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Total tokens: ",I.total.toLocaleString()," (input ",I.input.toLocaleString(),", output ",I.output.toLocaleString(),")"]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Top Models by Tokens",description:"Model AI yang paling banyak menggunakan token, diurutkan berdasarkan total penggunaan. Membantu mengidentifikasi model mana yang paling banyak digunakan"})})}),i.jsx(Je,{className:"h-64",children:i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:E.map(z=>({name:z.model,tokens:z.tokens})),layout:"vertical",children:[i.jsx(Qr,{type:"number"}),i.jsx(Zr,{type:"category",dataKey:"name",width:160}),i.jsx(Qn,{}),i.jsx(Fn,{dataKey:"tokens",fill:Sr[4],radius:[0,4,4,0],children:i.jsx(Li,{dataKey:"tokens",position:"right"})})]})})})]})]}),i.jsxs(Dn,{value:"human-agent",className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Super Agent"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Filter untuk melihat metrik agen yang berada di bawah super agent tertentu. Pilih 'All' untuk melihat semua agen"})})]})]}),i.jsxs(Ut,{value:T,onValueChange:z=>R(z),children:[i.jsx(Dt,{className:"w-[220px] h-9",children:i.jsx(Rt,{placeholder:"All"})}),i.jsxs($t,{children:[i.jsx(De,{value:"all",children:"All"}),D.map(z=>i.jsx(De,{value:String(z.super_agent_id||"none"),children:z.super_agent_name||""},z.super_agent_id||"none"))]})]}),i.jsx(Z,{variant:"outline",className:"h-9",onClick:J,children:"Apply"})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Agent KPIs",description:"Key Performance Indicators untuk setiap agen manusia: jumlah percakapan yang diselesaikan dan waktu rata-rata penyelesaian (dalam menit)"})})}),i.jsx(Je,{className:"h-64",children:i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:$.map(z=>({name:z.agent_name||"",resolved:z.resolved_count,avgMin:Math.round(z.avg_resolution_minutes||0)})),children:[i.jsx(Qr,{dataKey:"name"}),i.jsx(Zr,{}),i.jsx(Qn,{}),i.jsx(ii,{}),i.jsx(Fn,{dataKey:"resolved",name:"Resolved",fill:Sr[3],radius:[4,4,0,0]}),i.jsx(Fn,{dataKey:"avgMin",name:"Avg Resolution (min)",fill:Sr[5],radius:[4,4,0,0]})]})})})]})]}),i.jsxs(Dn,{value:"database",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Database Size",description:"Total ukuran database termasuk semua tabel, indeks, dan metadata dalam format yang mudah dibaca"})})}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:(M==null?void 0:M.total_size_pretty)||"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Data: ",(M==null?void 0:M.data_size_pretty)||""," | Indexes: ",(M==null?void 0:M.indexes_size_pretty)||""]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Tables",description:"Jumlah total tabel yang ada di database public schema"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:(M==null?void 0:M.total_tables)||0})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Rows",description:"Jumlah total baris data di semua tabel database"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((M==null?void 0:M.total_rows)||0).toLocaleString()})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Indexes",description:"Jumlah total indeks yang ada di database. Indeks membantu mempercepat query"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:(M==null?void 0:M.total_indexes)||0})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Cache Hit Ratio",description:"Persentase data yang ditemukan di cache memory. Semakin tinggi semakin baik (idealnya >95%). Menunjukkan efisiensi penggunaan memory"})})}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:W?`${(W.cache_hit_ratio*100).toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Hits: ",W?W.shared_buffers_hit.toLocaleString():""," | Reads: ",W?W.shared_buffers_read.toLocaleString():""]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Index Scan Ratio",description:"Persentase scan yang menggunakan indeks dibanding sequential scan. Semakin tinggi semakin baik. Menunjukkan efektivitas indeks"})})}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:W?`${(W.idx_scan_ratio*100).toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Index: ",W?W.total_index_scans.toLocaleString():""," | Seq: ",W?W.total_sequential_scans.toLocaleString():""]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Heap Hit Ratio",description:"Persentase hit pada heap (tabel data) di cache memory. Semakin tinggi semakin baik"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:W?`${(W.heap_hit_ratio*100).toFixed(2)}%`:"Loading..."})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Inserts",description:"Jumlah total operasi INSERT yang pernah dilakukan di semua tabel"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((Q==null?void 0:Q.total_inserts)||0).toLocaleString()})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Updates",description:"Jumlah total operasi UPDATE yang pernah dilakukan di semua tabel"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((Q==null?void 0:Q.total_updates)||0).toLocaleString()})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Deletes",description:"Jumlah total operasi DELETE yang pernah dilakukan di semua tabel"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((Q==null?void 0:Q.total_deletes)||0).toLocaleString()})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Cache Hit %",description:"Persentase blok yang ditemukan di cache vs yang dibaca dari disk. Semakin tinggi semakin baik untuk performa"})})}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:Q?`${Q.cache_hit_percentage.toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Hits: ",Q?Q.total_blocks_hit.toLocaleString():""," | Reads: ",Q?Q.total_blocks_read.toLocaleString():""]})]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Table Sizes",description:"Ukuran total (termasuk indeks) untuk setiap tabel diurutkan dari yang terbesar. Membantu mengidentifikasi tabel yang memakan banyak ruang"})})}),i.jsx(Je,{className:"h-64",children:C.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:C.slice(0,10).map(z=>({name:z.tablename,size:z.total_size_bytes/1024})),layout:"vertical",children:[i.jsx(Qr,{type:"number"}),i.jsx(Zr,{type:"category",dataKey:"name",width:160}),i.jsx(Qn,{formatter:z=>`${z.toFixed(2)} KB`,labelFormatter:z=>`Table: ${z}`}),i.jsx(Fn,{dataKey:"size",fill:Sr[1],radius:[0,4,4,0],children:i.jsx(Li,{dataKey:"size",position:"right",formatter:z=>`${z.toFixed(2)} KB`})})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Row Counts by Table",description:"Jumlah baris data per tabel, diurutkan dari yang terbanyak. Menunjukkan tabel mana yang paling aktif menyimpan data"})})}),i.jsx(Je,{className:"h-64",children:C.filter(z=>z.row_count>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:C.filter(z=>z.row_count>0).slice(0,10).map(z=>({name:z.tablename,rows:z.row_count})),layout:"vertical",children:[i.jsx(Qr,{type:"number"}),i.jsx(Zr,{type:"category",dataKey:"name",width:160}),i.jsx(Qn,{}),i.jsx(Fn,{dataKey:"rows",fill:Sr[3],radius:[0,4,4,0],children:i.jsx(Li,{dataKey:"rows",position:"right"})})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Index Sizes (Top 15)",description:"Ukuran setiap indeks diurutkan dari yang terbesar. Indeks besar mungkin perlu dioptimasi"})})}),i.jsx(Je,{className:"h-64",children:Y.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:Y.slice(0,15).map(z=>({name:`${z.tablename}.${z.indexname}`.substring(0,30),size:z.index_size_bytes/1024,scans:z.index_scans})),layout:"vertical",children:[i.jsx(Qr,{type:"number"}),i.jsx(Zr,{type:"category",dataKey:"name",width:200}),i.jsx(Qn,{formatter:(z,q)=>q==="size"?`${z.toFixed(2)} KB`:z.toLocaleString(),labelFormatter:z=>`Index: ${z}`}),i.jsx(ii,{}),i.jsx(Fn,{dataKey:"size",name:"Size (KB)",fill:Sr[1],radius:[0,4,4,0]})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Table Activity (Top 10)",description:"Jumlah operasi INSERT, UPDATE, dan DELETE per tabel. Menunjukkan tabel mana yang paling aktif"})})}),i.jsx(Je,{className:"h-64",children:C.filter(z=>z.inserts+z.updates+z.deletes>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:C.filter(z=>z.inserts+z.updates+z.deletes>0).slice(0,10).map(z=>({name:z.tablename,inserts:z.inserts,updates:z.updates,deletes:z.deletes})),layout:"vertical",children:[i.jsx(Qr,{type:"number"}),i.jsx(Zr,{type:"category",dataKey:"name",width:160}),i.jsx(Qn,{}),i.jsx(ii,{}),i.jsx(Fn,{dataKey:"inserts",stackId:"activity",fill:Sr[2],name:"Inserts"}),i.jsx(Fn,{dataKey:"updates",stackId:"activity",fill:Sr[4],name:"Updates"}),i.jsx(Fn,{dataKey:"deletes",stackId:"activity",fill:Sr[5],name:"Deletes"})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Table Scan Ratios",description:"Rasio sequential scan vs index scan per tabel. Sequential scan tinggi menunjukkan perlu indeks yang lebih baik"})})}),i.jsx(Je,{className:"h-64",children:C.filter(z=>z.sequential_scans+z.index_scans>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:C.filter(z=>z.sequential_scans+z.index_scans>0).slice(0,10).map(z=>({name:z.tablename,seqRatio:Number((z.table_scan_ratio*100).toFixed(1)),idxRatio:Number(((1-z.table_scan_ratio)*100).toFixed(1))})),layout:"vertical",children:[i.jsx(Qr,{type:"number",domain:[0,100]}),i.jsx(Zr,{type:"category",dataKey:"name",width:160}),i.jsx(Qn,{formatter:z=>`${z}%`}),i.jsx(ii,{}),i.jsx(Fn,{dataKey:"seqRatio",stackId:"scan",fill:Sr[5],name:"Seq Scan %"}),i.jsx(Fn,{dataKey:"idxRatio",stackId:"scan",fill:Sr[3],name:"Index Scan %"})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Comprehensive Table Statistics",description:"Rincian lengkap setiap tabel: ukuran, baris, statistik scan, operasi DML, dan informasi maintenance"})})}),i.jsx(Je,{children:i.jsx("div",{className:"max-h-96 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2 px-2 sticky left-0 bg-background",children:"Table"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Total Size"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Rows"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Dead Rows"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Inserts"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Updates"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Deletes"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Seq Scans"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Idx Scans"}),i.jsx("th",{className:"text-left py-2 px-2",children:"Last Vacuum"})]})}),i.jsx("tbody",{children:C.slice(0,25).map(z=>i.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[i.jsx("td",{className:"py-2 px-2 font-medium sticky left-0 bg-background",children:z.tablename}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.total_size_pretty}),i.jsx("td",{className:"py-2 px-2 text-right",children:z.row_count.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.dead_rows>0?i.jsx("span",{className:"text-orange-600",children:z.dead_rows.toLocaleString()}):"0"}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.inserts.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.updates.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.deletes.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.sequential_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.index_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-left text-xs text-muted-foreground",children:z.last_vacuum?new Date(z.last_vacuum).toLocaleDateString():z.last_autovacuum?`Auto: ${new Date(z.last_autovacuum).toLocaleDateString()}`:"Never"})]},z.tablename))})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Index Statistics",description:"Statistik lengkap setiap indeks: ukuran, jumlah scan, dan performa cache. Membantu mengidentifikasi indeks yang tidak digunakan atau perlu dioptimasi"})})}),i.jsx(Je,{children:i.jsx("div",{className:"max-h-96 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2 px-2 sticky left-0 bg-background",children:"Table"}),i.jsx("th",{className:"text-left py-2 px-2",children:"Index"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Size"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Scans"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Tuples Read"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Tuples Fetched"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Cache Hits"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Cache Reads"})]})}),i.jsx("tbody",{children:Y.slice(0,30).map((z,q)=>i.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[i.jsx("td",{className:"py-2 px-2 font-medium sticky left-0 bg-background",children:z.tablename}),i.jsx("td",{className:"py-2 px-2 font-mono text-xs",children:z.indexname}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.index_size_pretty}),i.jsx("td",{className:"py-2 px-2 text-right",children:z.index_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.index_tup_reads.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.index_tup_fetches.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.idx_blks_hit.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.idx_blks_read.toLocaleString()})]},q))})]})})})]})]})]}),i.jsx(mn,{open:b,onOpenChange:w,children:i.jsxs(cn,{className:"max-w-3xl",children:[i.jsx(un,{children:i.jsx(dn,{children:"Non-contained Conversations"})}),i.jsx("div",{className:"max-h-80 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2",children:"Time"}),i.jsx("th",{className:"text-left py-2",children:"Contact"}),i.jsx("th",{className:"text-left py-2",children:"Handover Reason"}),i.jsx("th",{className:"text-left py-2",children:"Status"})]})}),i.jsx("tbody",{children:j.map(z=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-1",children:new Date(z.created_at).toLocaleString()}),i.jsx("td",{className:"py-1",children:z.contact_name}),i.jsx("td",{className:"py-1",children:z.handover_reason||"(none)"}),i.jsx("td",{className:"py-1",children:z.status})]},z.id))})]})})]})})]})}var u0="Switch",[HOe,g3e]=_r(u0),[VOe,KOe]=HOe(u0),gq=p.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=e,[h,m]=p.useState(null),g=St(t,w=>m(w)),v=p.useRef(!1),x=h?f||!!h.closest("form"):!0,[y,b]=Ca({prop:a,defaultProp:s??!1,onChange:u,caller:u0});return i.jsxs(VOe,{scope:n,checked:y,disabled:l,children:[i.jsx(Ge.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":bq(y),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:g,onClick:Ee(e.onClick,w=>{b(j=>!j),x&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),x&&i.jsx(yq,{control:h,bubbles:!v.current,name:r,value:c,checked:y,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});gq.displayName=u0;var vq="SwitchThumb",xq=p.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=KOe(vq,n);return i.jsx(Ge.span,{"data-state":bq(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});xq.displayName=vq;var GOe="SwitchBubbleInput",yq=p.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},s)=>{const o=p.useRef(null),l=St(o,s),c=aC(n),u=lN(t);return p.useEffect(()=>{const f=o.current;if(!f)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(c!==n&&m){const g=new Event("click",{bubbles:r});m.call(f,n),f.dispatchEvent(g)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});yq.displayName=GOe;function bq(e){return e?"checked":"unchecked"}var wq=gq,YOe=xq;const xl=p.forwardRef(({className:e,...t},n)=>i.jsx(wq,{className:xe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:i.jsx(YOe,{className:xe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));xl.displayName=wq.displayName;var d0="Collapsible",[XOe,jq]=_r(d0),[JOe,vA]=XOe(d0),_q=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:s,onOpenChange:o,...l}=e,[c,u]=Ca({prop:r,defaultProp:a??!1,onChange:o,caller:d0});return i.jsx(JOe,{scope:n,disabled:s,contentId:ir(),open:c,onOpenToggle:p.useCallback(()=>u(f=>!f),[u]),children:i.jsx(Ge.div,{"data-state":wA(c),"data-disabled":s?"":void 0,...l,ref:t})})});_q.displayName=d0;var kq="CollapsibleTrigger",xA=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=vA(kq,n);return i.jsx(Ge.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":wA(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:Ee(e.onClick,a.onOpenToggle)})});xA.displayName=kq;var yA="CollapsibleContent",bA=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=vA(yA,e.__scopeCollapsible);return i.jsx(pr,{present:n||a.open,children:({present:s})=>i.jsx(QOe,{...r,ref:t,present:s})})});bA.displayName=yA;var QOe=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...s}=e,o=vA(yA,n),[l,c]=p.useState(r),u=p.useRef(null),f=St(t,u),d=p.useRef(0),h=d.current,m=p.useRef(0),g=m.current,v=o.open||l,x=p.useRef(v),y=p.useRef(void 0);return p.useEffect(()=>{const b=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(b)},[]),Xn(()=>{const b=u.current;if(b){y.current=y.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const w=b.getBoundingClientRect();d.current=w.height,m.current=w.width,x.current||(b.style.transitionDuration=y.current.transitionDuration,b.style.animationName=y.current.animationName),c(r)}},[o.open,r]),i.jsx(Ge.div,{"data-state":wA(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...s,ref:f,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:v&&a})});function wA(e){return e?"open":"closed"}var Sq=_q,ZOe=xA,eIe=bA;const AR=Sq,ER=xA,PR=bA,Nq=e=>{const[t,n]=p.useState(!0),[r,a]=p.useState(!1),[s,o]=p.useState(null),[l,c]=p.useState(null),u=async()=>{try{if(n(!0),c(null),e){const{data:m,error:g}=await ne.from("ai_profiles").select("*").eq("id",e).single();if(g)throw g;m&&o(m)}else o(null)}catch(m){console.error("Error fetching AI profile:",m),c(m instanceof Error?m.message:"Failed to fetch profile")}finally{n(!1)}},f=async m=>{try{if(a(!0),c(null),s!=null&&s.id){const{error:g}=await ne.from("ai_profiles").update(m).eq("id",s.id);try{await Wt({action:"ai_profile.update",resource:"ai_profile",resourceId:s.id,context:m})}catch{}if(g)throw g}else{const{data:g,error:v}=await ne.from("ai_profiles").insert([{...m,org_id:"00000000-0000-0000-0000-000000000001"}]).select().single();if(v)throw v;g&&o(g);try{await Wt({action:"ai_profile.create",resource:"ai_profile",resourceId:(g==null?void 0:g.id)??null,context:m})}catch{}}await u()}catch(g){console.error("Error saving AI profile:",g),c(g instanceof Error?g.message:"Failed to save profile")}finally{a(!1)}},d=async m=>{try{n(!0),c(null);const{data:g,error:v}=await ne.from("ai_profiles").select("*").eq("org_id",m||"00000000-0000-0000-0000-000000000001").order("created_at",{ascending:!1});if(v)throw v;return g}catch(g){return console.error("Error fetching AI profiles:",g),c(g instanceof Error?g.message:"Failed to fetch profiles"),[]}finally{n(!1)}},h=async m=>{try{a(!0),c(null);const{error:g}=await ne.from("ai_profiles").delete().eq("id",m);try{await Wt({action:"ai_profile.delete",resource:"ai_profile",resourceId:m})}catch{}if(g)throw g}catch(g){throw console.error("Error deleting AI profile:",g),c(g instanceof Error?g.message:"Failed to delete profile"),g}finally{a(!1)}};return p.useEffect(()=>{e?u():n(!1)},[e]),{profile:s,loading:t,saving:r,error:l,fetchProfile:u,saveProfile:f,fetchAllProfiles:d,deleteProfile:h}},tIe={Conservative:.3,Balanced:.5,Creative:.7};function Cq(e,t=.5){if(!e)return t;const n=e.trim();return tIe[n]??t}const nIe="00000000-0000-0000-0000-000000000001",rIe=({welcomeMessage:e,systemPrompt:t,modelDisplay:n,profile:r,profileId:a,modelName:s,temperature:o,transfer_conditions:l})=>{const c=r==null?void 0:r.response_temperature,u=c?Cq(c,o||.5):o||.5,[f,d]=p.useState([]);p.useEffect(()=>{d([{id:"1",content:e||"Halo!  Selamat datang di Okbang Top Up Center~",sender:"ai",timestamp:new Date}])},[e]);const[h,m]=p.useState(""),[g,v]=p.useState(!1),[x,y]=p.useState(!0),[b,w]=p.useState(""),j=p.useRef(null),k=p.useRef(null);p.useEffect(()=>{(()=>{const D=Date.now(),L=Math.random().toString(36).substring(2,15),B=`session_${D}_${L}`;w(B),console.log("Generated session ID:",B)})()},[]);const _=()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)};p.useEffect(()=>{_()},[f]);const S=async()=>{if(!h.trim()||g)return;const P={id:Date.now().toString(),content:h,sender:"user",timestamp:new Date};d(D=>[...D,P]),m(""),v(!0);try{const D={message:h,model:s,temperature:u,session_id:b,timestamp:new Date().toISOString(),ai_profile_id:(r==null?void 0:r.id)||a};console.log("Sending request to API:",D);const L=await wa(Yn.ENDPOINTS.AI_AGENT.CHAT_TEST,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const B=await L.json();console.log("API Response:",B);const U={id:(Date.now()+1).toString(),content:B.output||"Sorry, I couldn't process your message.",sender:"ai",timestamp:new Date};d($=>[...$,U]),Ie.success("Message sent successfully!"),y(!0)}catch(D){console.error("Error sending message:",D),Ie.error("Failed to send message"),y(!1);const L={id:(Date.now()+1).toString(),content:"Sorry, I'm having trouble connecting right now. Please try again later.",sender:"ai",timestamp:new Date};d(B=>[...B,L])}finally{v(!1)}},E=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),S())},N=()=>{d([{id:"1",content:e||"Halo!  Selamat datang di Okbang Top Up Center~",sender:"ai",timestamp:new Date}]),Ie.info("Chat history cleared")},I=()=>{const P=Date.now(),D=Math.random().toString(36).substring(2,15),L=`session_${P}_${D}`;w(L),d([{id:"1",content:e||"Halo!  Selamat datang di Okbang Top Up Center~",sender:"ai",timestamp:new Date}]),Ie.success("Session refreshed! New session ID: "+L),console.log("New session ID:",L)};return i.jsxs(Ae,{className:"flex flex-col h-[600px] border-2 border-primary/20",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 border-b bg-primary/5",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:i.jsx(ML,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"font-medium",children:"AI Agent Chat"}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Model: ",n,"  Temp: ",c||"Legacy"," (",u,i.jsx("span",{className:`ml-2 px-1 rounded text-xs ${x?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x?"Connected":"Disconnected"})]}),b&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Session: ",b.substring(0,20),"..."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[g&&i.jsx(Gt,{className:"w-4 h-4 animate-spin"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"sm",onClick:I,"aria-label":"Refresh session",children:i.jsx(Ay,{className:"w-4 h-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Segarkan sesi"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"sm",onClick:N,"aria-label":"Clear chat history",children:i.jsx(HL,{className:"w-4 h-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Hapus riwayat chat"})})]})]})]}),i.jsxs("div",{ref:k,className:"flex-1 p-4 space-y-4 overflow-auto max-h-[400px]",children:[f.map(P=>i.jsx("div",{className:`flex ${P.sender==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${P.sender==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:P.content}),i.jsx("p",{className:"text-xs opacity-70 mt-1",children:P.timestamp.toLocaleTimeString()})]})},P.id)),g&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-muted p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{className:"text-sm",children:"AI is typing..."})]})})}),i.jsx("div",{ref:j})]}),i.jsxs("div",{className:"p-4 border-t bg-muted/30",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("textarea",{value:h,onChange:P=>m(P.target.value),onKeyPress:E,placeholder:"Type your message...",className:"flex-1 p-3 border rounded-lg text-sm resize-none focus:ring-2 focus:ring-primary/20",rows:2,disabled:g,title:g?"Please wait":void 0}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{size:"sm",onClick:S,disabled:!h.trim()||g,className:"px-4",children:i.jsx(Xh,{className:"w-4 h-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Kirim pesan ke agen AI"})})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Press Enter to send, Shift+Enter for new line"})]})]})},xu=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown",Lg=e=>e==null?"Pricing on request":`${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e>=1?2:3}).format(e)} / 1M`,aIe=({agentName:e,onBack:t,profileId:n,initialModelId:r})=>{var wo,jo,we,ot,ht;const[a,s]=p.useState("general"),[o,l]=p.useState("text"),[c,u]=p.useState({behavior:!0,welcome:!0,transfer:!1}),f=K=>{u(de=>({...de,[K]:!de[K]}))},d=!n,{hasPermission:h,hasRole:m}=jr(),{user:g}=Vr(),v=m==null?void 0:m("master_agent"),x=m==null?void 0:m("super_agent"),y=h("ai_agent_files.manage")||h("ai_agent_files.create"),b=(K,de,Ce)=>Number.isNaN(K)?de:Math.min(Ce,Math.max(de,K)),w=24e3,j=2e5,k=40,_=1e3,S=25,E=24*60,{profile:N,loading:I,saving:P,error:D,saveProfile:L}=Nq(n),[B,U]=p.useState((N==null?void 0:N.super_agent_id)??null),[$,O]=p.useState([]),[T,R]=p.useState(!1),[C,F]=p.useState(null);p.useEffect(()=>{N!=null&&N.super_agent_id?U(N.super_agent_id):x&&(g!=null&&g.id)?U(g.id):N!=null&&N.super_agent_id||U(null)},[N==null?void 0:N.super_agent_id,x,g==null?void 0:g.id]),p.useEffect(()=>{if(d&&!B)try{const K=localStorage.getItem("ai.new.super_agent_id");K&&(U(K),localStorage.removeItem("ai.new.super_agent_id"))}catch{}},[d,B]),p.useEffect(()=>{let K=!1;return(async()=>{try{R(!0),F(null);const{data:Ce,error:rt}=await Ps.from("v_human_agents").select("user_id, agent_name, email, role_name").eq("org_id",(N==null?void 0:N.org_id)??nIe).ilike("role_name","%super%");if(rt)throw rt;if(K)return;const Te=(Ce||[]).map(lt=>({id:lt.user_id,name:lt.agent_name||lt.email||String(lt.user_id).slice(0,8)}));O(Te),N!=null&&N.super_agent_id||(x&&(g!=null&&g.id)?U(g.id):Te.length===1&&!x&&v&&U(Te[0].id))}catch(Ce){K||F(Ce instanceof Error?Ce.message:"Failed to load super agents")}finally{K||R(!1)}})(),()=>{K=!0}},[N==null?void 0:N.org_id,N==null?void 0:N.super_agent_id,x,v,g==null?void 0:g.id]);const[M,A]=p.useState(d?"You are a helpful AI assistant for customer service. Be friendly, professional, and helpful. Always respond in Indonesian unless the customer speaks in another language.":(N==null?void 0:N.system_prompt)||""),[W,G]=p.useState(d?"Halo!  Selamat datang! Ada yang bisa saya bantu hari ini?":(N==null?void 0:N.welcome_message)||""),[Y,H]=p.useState(d?`Transfer to human agent when:
- Customer requests to speak with a human
- Complex technical issues arise
- Customer is dissatisfied or angry
- Payment or billing issues
- Escalation is needed`:(N==null?void 0:N.transfer_conditions)||""),[Q,X]=p.useState((N==null?void 0:N.stop_ai_after_handoff)??!0),[re,fe]=p.useState([]),[J,ye]=p.useState([]),[z,q]=p.useState(""),[ae,se]=p.useState("");p.useState(()=>{const K=(N==null?void 0:N.temperature)??.3;return Math.max(0,Math.min(1,K))});const[be,Se]=p.useState(""),[Le,ge]=p.useState(!!((N==null?void 0:N.enable_resolve)??!1)),[We,dt]=p.useState(""),[bt,Et]=p.useState(()=>b((N==null?void 0:N.read_file_limit)??3,0,S)),[te,me]=p.useState(""),[Fe,He]=p.useState((N==null?void 0:N.response_temperature)??"Balanced"),[Ue,he]=p.useState((N==null?void 0:N.message_await)??3),[Ot,vt]=p.useState(""),wt=K=>K.replace(/[^0-9]/g,""),ve=K=>{if(!K)return 0;const de=parseInt(K,10);return Number.isNaN(de)?0:de};p.useEffect(()=>{(async()=>{var de,Ce;try{const{data:rt,error:Te}=await Ps.from("ai_models").select("*").eq("is_active",!0).order("display_name",{ascending:!0});if(Te)throw Te;const lt=rt||[],Xe=lt.filter(ft=>(ft.display_name||"").toLowerCase()!=="fallback"),jt=lt.filter(ft=>(ft.display_name||"").toLowerCase()==="fallback");fe(Xe),ye(jt);const ct=(N==null?void 0:N.model_id)||r||"";z||(ct&&Xe.some(ft=>ft.id===ct)?q(ct):Xe.length>0&&q(((de=Xe[0])==null?void 0:de.id)||"")),!ae&&jt.length>0&&se(((Ce=jt[0])==null?void 0:Ce.id)||"")}catch(rt){console.error("Failed to load ai_models",rt)}})()},[N==null?void 0:N.id,r]),p.useEffect(()=>{!z&&(N!=null&&N.model_id)&&re.some(K=>K.id===N.model_id)&&q(N.model_id)},[re,N==null?void 0:N.model_id]),p.useEffect(()=>{if(!N)return;const K=N==null?void 0:N.auto_resolve_after_minutes;Se(typeof K=="number"&&!Number.isNaN(K)?K.toString():"0");const de=b((N==null?void 0:N.history_limit)??w,0,j);dt(de.toString());const Ce=b((N==null?void 0:N.context_limit)??28,0,k);me(Ce.toString());const rt=b((N==null?void 0:N.message_limit)??_,0,_);vt(rt.toString())},[N==null?void 0:N.id]);const _e=re.find(K=>K.id===z)||null,$e=p.useMemo(()=>{const K=_e==null?void 0:_e.max_context_tokens;return typeof K=="number"&&K>0?b(K,0,j):j},[_e==null?void 0:_e.max_context_tokens]),oe=p.useMemo(()=>{const K=_e==null?void 0:_e.max_context_tokens;return typeof K=="number"&&K>0?Math.max(1,Math.floor(K/1e3)):k},[_e==null?void 0:_e.max_context_tokens]);p.useEffect(()=>{if(!te)return;const K=parseInt(te,10);Number.isNaN(K)||K>oe&&me(oe.toString())},[te,oe]),p.useEffect(()=>{if(!We)return;const K=parseInt(We,10);Number.isNaN(K)||K>$e&&dt($e.toString())},[We,$e]);const Ze=K=>{const de=wt(K);if(de===""){Se("");return}const Ce=b(parseInt(de,10),0,E);Se(Ce.toString())},Ke=K=>{const de=wt(K);if(de===""){dt("");return}const Ce=b(parseInt(de,10),0,$e);dt(Ce.toString())},en=K=>{const de=wt(K);if(de===""){me("");return}const Ce=b(parseInt(de,10),0,oe);me(Ce.toString())},_t=K=>{const de=wt(K);if(de===""){vt("");return}const Ce=b(parseInt(de,10),0,_);vt(Ce.toString())},[ut,Lt]=p.useState([]),ze=p.useRef(null),[ie,Ne]=p.useState(!1),Re=async()=>{const K=(N==null?void 0:N.id)??n;if(!K)throw new Error("Please save the AI Agent first before uploading files.");let de=(N==null?void 0:N.org_id)??null;if(!de){const{data:{user:Ce}}=await Ps.auth.getUser();if(Ce){const{data:rt}=await Ps.from("org_members").select("org_id").eq("user_id",Ce.id).limit(1).maybeSingle();de=(rt==null?void 0:rt.org_id)??null}}if(!de)throw new Error("Could not determine your organization. Please re-login or contact support.");return{orgId:de,profileId:K}},et=async(K,de)=>{try{if(!y)throw new Error("You do not have permission to upload agent files.");const Ce=((K==null?void 0:K.type)||"").toLowerCase()==="application/pdf",rt=((K==null?void 0:K.name)||"").toLowerCase().endsWith(".pdf");if(!Ce&&!rt)throw new Error("Only PDF files are supported");const{orgId:Te,profileId:lt}=await Re(),Xe=await K.arrayBuffer(),jt=await crypto.subtle.digest("SHA-256",Xe),ft=Array.from(new Uint8Array(jt)).map(Cs=>Cs.toString(16).padStart(2,"0")).join(""),ca=((K==null?void 0:K.name)||"file.pdf").replace(/[^a-zA-Z0-9_.-]/g,"").replace(/\.pdf$/i,""),ua=`${ft}_${ca}.pdf`,vr=`org_${Te}/profile_${lt}/${ua}`,on=new FormData;on.append("file",K),on.append("file_name",K.name||"file.pdf"),on.append("org_id",Te),on.append("profile_id",lt),on.append("hashFile",ft);const xn=await wa(Yn.ENDPOINTS.KNOWLEDGE.FILE_UPLOAD,{method:"POST",body:on});if(!xn.ok){let Cs=`Upload failed (${xn.status})`;try{const w0=await xn.json();Cs=(w0==null?void 0:w0.message)||Cs}catch{}throw new Error(Cs)}const gt=await xn.json().catch(()=>({})),Jn=(gt==null?void 0:gt.document_id)||(gt==null?void 0:gt.documentId)||void 0,mt=String((gt==null?void 0:gt.status)||"").toLowerCase();if(mt==="duplicate"){const Cs=new Error("duplicate");throw Cs.code="DUPLICATE_CONTENT",Cs}if(mt!=="success")throw new Error(`Upload webhook returned unexpected status: ${mt||"unknown"}`);let qp=null;const{error:da}=await Ps.storage.from("ai-agent-files").upload(vr,K,{cacheControl:"31536000",contentType:"application/pdf",upsert:!1});if(da&&!(typeof(da==null?void 0:da.message)=="string"&&/exists|duplicate|409/i.test(da.message)))throw da;const{data:Fl,error:Ir}=await Ps.storage.from("ai-agent-files").createSignedUrl(vr,60*60*24*7);return!Ir&&(Fl!=null&&Fl.signedUrl)&&(qp=Fl.signedUrl),{url:qp||"",filePath:vr,documentId:Jn}}catch(Ce){throw console.error("Error uploading file to Supabase:",Ce),new Error(`Failed to upload ${K.name}: ${(Ce==null?void 0:Ce.message)||"Unknown error"}`)}},pt=async()=>{try{Ne(!0);const{orgId:K,profileId:de}=await Re(),Ce=`org_${K}/profile_${de}`,rt=`profile_${de}`,Te=async ft=>{const{data:rn,error:ca}=await Ps.storage.from("ai-agent-files").list(ft,{limit:100});return ca?[]:(rn||[]).map(ua=>({...ua,__prefix:ft}))},[lt,Xe]=await Promise.all([Te(Ce),Te(rt)]),jt=[...lt,...Xe];if(jt.length===0){Lt([]);return}const ct=[];for(const ft of jt){if(!ft||!ft.name)continue;const rn=String(ft.name);if(rn.endsWith("/")||rn===".emptyFolderPlaceholder"||rn===".emptyfolderplaceholder")continue;const ca=`${ft.__prefix}/${ft.name}`,ua=ft.metadata&&typeof ft.metadata.size<"u"?ft.metadata.size:0,vr=typeof ua=="number"?ua:Number(ua||0);let on="";const{data:xn}=await Ps.storage.from("ai-agent-files").createSignedUrl(ca,60*60*24*7);on=(xn==null?void 0:xn.signedUrl)||"",ct.push({id:Date.now()+Math.random(),name:ft.name,size:vr,uploadedAt:ft.updated_at||ft.created_at||new Date().toISOString(),status:"ready",url:on,filePath:ca})}ct.sort((ft,rn)=>new Date(rn.uploadedAt).getTime()-new Date(ft.uploadedAt).getTime()),Lt(ct)}catch(K){console.error("Failed to load knowledge files:",K)}finally{Ne(!1)}};p.useEffect(()=>{o==="file"&&pt()},[o,N==null?void 0:N.id,n]);const ee=async K=>{const de=Array.from(K.target.files||[]);if(de.length===0)return;try{await Re()}catch(Te){Ie.error((Te==null?void 0:Te.message)||"Unable to upload at this time"),ze.current&&(ze.current.value="");return}const Ce=new Date().toISOString(),rt=de.map(Te=>({id:Date.now()+Math.random(),name:Te.name,size:Te.size,uploadedAt:Ce,status:"uploading"}));Lt(Te=>[...rt,...Te]);for(let Te=0;Te<de.length;Te++){const lt=de[Te],Xe=rt[Te];try{const{url:jt,filePath:ct}=await et(lt,Xe.id);Lt(ft=>ft.map(rn=>rn.id===Xe.id?{...rn,status:"ready",url:jt,filePath:ct}:rn)),Ie.success(`${lt.name} uploaded successfully!`)}catch(jt){if(String((jt==null?void 0:jt.message)||"").toLowerCase().includes("duplicate")||(jt==null?void 0:jt.code)==="DUPLICATE_CONTENT"){Lt(ct=>ct.map(ft=>ft.id===Xe.id?{...ft,status:"ready"}:ft)),setTimeout(()=>{var ct,ft;(ft=(ct=pt())==null?void 0:ct.catch)==null||ft.call(ct,()=>{})},0),Ie.info(`${lt.name} already exists. Skipped re-upload.`);continue}Lt(ct=>ct.map(ft=>ft.id===Xe.id?{...ft,status:"failed"}:ft)),Ie.error(jt.message||`Failed to upload ${lt.name}`)}}ze.current&&(ze.current.value="")},ke=async K=>{K.preventDefault();const de=Array.from(K.dataTransfer.files||[]);if(de.length===0)return;try{await Re()}catch(Te){Ie.error((Te==null?void 0:Te.message)||"Unable to upload at this time");return}const Ce=new Date().toISOString(),rt=de.map(Te=>({id:Date.now()+Math.random(),name:Te.name,size:Te.size,uploadedAt:Ce,status:"uploading"}));Lt(Te=>[...rt,...Te]);for(let Te=0;Te<de.length;Te++){const lt=de[Te],Xe=rt[Te];try{const{url:jt,filePath:ct}=await et(lt,Xe.id);Lt(ft=>ft.map(rn=>rn.id===Xe.id?{...rn,status:"ready",url:jt,filePath:ct}:rn)),Ie.success(`${lt.name} uploaded successfully!`)}catch(jt){Lt(ct=>ct.map(ft=>ft.id===Xe.id?{...ft,status:"failed"}:ft)),Ie.error(jt.message||`Failed to upload ${lt.name}`)}}},st=K=>{K.preventDefault()},nt=async K=>{const de=ut.find(Ce=>Ce.id===K);try{const{orgId:Ce,profileId:rt}=await Re();if(de!=null&&de.filePath){const Te=await wa(Yn.ENDPOINTS.KNOWLEDGE.FILE_DELETE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({org_id:Ce,profile_id:rt,file_key:de.filePath,document_id:(de==null?void 0:de.documentId)||void 0})});if(!Te.ok){let jt=`Delete failed (${Te.status})`;try{const ct=await Te.json();jt=(ct==null?void 0:ct.message)||jt}catch{}throw new Error(jt)}let lt={};try{lt=await Te.json()}catch{}if(String((lt==null?void 0:lt.status)||"").toLowerCase()!=="deleted")throw new Error((lt==null?void 0:lt.message)||"Delete not confirmed by webhook")}Lt(Te=>Te.filter(lt=>lt.id!==K)),Ie.info(`${(de==null?void 0:de.name)||"File"} removed`)}catch(Ce){console.error("Error deleting file via webhook:",Ce),Ie.error((Ce==null?void 0:Ce.message)||"Failed to delete file")}},Ft=async K=>{try{const de=K.filePath;if(!de)throw new Error("Missing file path");const{data:Ce,error:rt}=await Ps.storage.from("ai-agent-files").createSignedUrl(de,60*60,{download:K.name||"file.pdf"});if(rt)throw rt;const Te=(Ce==null?void 0:Ce.signedUrl)||K.url||"";if(!Te)throw new Error("Unable to generate download link");const lt=document.createElement("a");lt.href=Te,lt.download=K.name||"",lt.target="_blank",lt.rel="noopener",document.body.appendChild(lt),lt.click(),lt.remove()}catch(de){Ie.error((de==null?void 0:de.message)||"Failed to download file")}},Rn=async()=>{const K=ut.filter(de=>de.filePath);if(K.length>0)try{const{orgId:de,profileId:Ce}=await Re();await Promise.all(K.map(async rt=>{try{const Te=await wa(Yn.ENDPOINTS.KNOWLEDGE.FILE_DELETE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({org_id:de,profile_id:Ce,file_key:rt.filePath,document_id:(rt==null?void 0:rt.documentId)||void 0})});if(Te.ok){let lt={};try{lt=await Te.json()}catch{}const Xe=String((lt==null?void 0:lt.status)||"").toLowerCase();Xe!=="deleted"&&console.warn("Delete webhook did not confirm deletion for",rt.filePath,Xe)}else{let lt=`Delete failed (${Te.status})`;try{const Xe=await Te.json();lt=(Xe==null?void 0:Xe.message)||lt}catch{}console.warn("Delete webhook failed for",rt.filePath,lt)}}catch(Te){console.warn("Delete webhook error for",rt.filePath,Te)}}))}catch(de){console.error("Error clearing files via webhook:",de)}Lt([]),Ie.info("All files cleared")},[Cn,An]=p.useState([{id:Date.now(),question:"",answer:""}]),[bi,Gr]=p.useState([{id:Date.now(),question:"",answer:""}]),Dl=()=>{const K={id:Date.now()+Math.random(),question:"",answer:""};An(de=>[K,...de]),Gr(de=>[JSON.parse(JSON.stringify(K)),...de])},Ns=K=>{An(de=>de.filter(Ce=>Ce.id!==K)),Gr(de=>de.filter(Ce=>Ce.id!==K))},xo=(K,de,Ce)=>{An(rt=>rt.map(Te=>Te.id===K?{...Te,[de]:Ce}:Te))},yo=K=>{const de=bi.find(Te=>Te.id===K.id),Ce=(K.question||"").trim(),rt=(K.answer||"").trim();return de?Ce!==(de.question||"").trim()||rt!==(de.answer||"").trim():Ce!==""||rt!==""},[bo,ru]=p.useState([{id:1,prompt:"Hai! Ada yang bisa saya bantu lagi?",delay:60,expanded:!1},{id:2,prompt:"Jika ada pertanyaan lain, jangan ragu untuk bertanya!",delay:120,expanded:!1}]),b0=()=>{const K={id:Date.now(),prompt:"",delay:60,expanded:!1};ru([...bo,K])},$l=K=>{ru(bo.filter(de=>de.id!==K))},_f=(K,de,Ce)=>{ru(bo.map(rt=>rt.id===K?{...rt,[de]:Ce}:rt))},Ga=K=>{ru(bo.map(de=>de.id===K?{...de,expanded:!de.expanded}:de))};p.useEffect(()=>{if(N&&!d){A(N.system_prompt||""),G(N.welcome_message||""),H(N.transfer_conditions||""),X(N.stop_ai_after_handoff),Se(String((N==null?void 0:N.auto_resolve_after_minutes)??0)),ge(!!((N==null?void 0:N.enable_resolve)??!1)),dt(String(b((N==null?void 0:N.history_limit)??w,0,j))),Et(b((N==null?void 0:N.read_file_limit)??3,0,S)),me(String(b((N==null?void 0:N.context_limit)??28,0,k))),He((N==null?void 0:N.response_temperature)??"Balanced"),he((N==null?void 0:N.message_await)??3),vt(String(b((N==null?void 0:N.message_limit)??_,0,_)));const K=N==null?void 0:N.qna;if(K&&Array.isArray(K)){const de=K.map((Ce,rt)=>({id:Date.now()+rt,question:Ce.q??Ce.question??"",answer:Ce.a??Ce.answer??""}));An(de),Gr(JSON.parse(JSON.stringify(de)))}}},[N,d]),p.useEffect(()=>{d&&Gr(JSON.parse(JSON.stringify(Cn)))},[]);const Ll=async()=>{if(!B){Ie.error("Please assign a super agent before saving this AI agent.");return}const K=b(ve(be),0,E),de=b(ve(We),0,$e),Ce=b(ve(te),0,oe),rt=b(ve(Ot),0,_),Te={system_prompt:M,welcome_message:W,transfer_conditions:Y,stop_ai_after_handoff:Q,model_id:z||null,name:e,auto_resolve_after_minutes:K,enable_resolve:Le,history_limit:de,read_file_limit:bt,context_limit:Ce,response_temperature:Fe,message_await:Ue,message_limit:rt,super_agent_id:B,qna:Cn.filter(lt=>{var Xe,jt;return((Xe=lt.question)==null?void 0:Xe.trim())||((jt=lt.answer)==null?void 0:jt.trim())}).map(({question:lt,answer:Xe})=>({q:lt.trim(),a:Xe.trim()}))};try{await L(Te),Ie.success(d?"AI agent created successfully!":"AI agent settings saved successfully!")}catch{Ie.error(d?"Failed to create AI agent":"Failed to save AI agent settings")}};return I&&!d?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Gt,{className:"w-8 h-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading AI profile..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs(Z,{variant:"ghost",size:"sm",onClick:t,className:"gap-2",children:[i.jsx(op,{className:"w-4 h-4"}),"Back"]})}),i.jsx(le,{children:i.jsx("p",{children:"Kembali ke daftar agen AI"})})]}),i.jsx("h1",{className:"text-2xl font-bold",children:e}),d?i.jsx(It,{variant:"outline",className:"text-blue-600 border-blue-600",children:"New Agent"}):N&&i.jsxs(It,{variant:"secondary",children:["Last Updated: ",new Date(N.created_at).toLocaleDateString()]})]}),D&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",D]})}),i.jsxs(pl,{value:a,onValueChange:s,children:[i.jsxs(so,{className:"grid w-full grid-cols-2 bg-muted/60 p-1 rounded-lg",children:[i.jsx(Gn,{value:"general",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:bg-muted/40 transition-colors",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Ks,{className:"w-4 h-4"}),i.jsx("span",{children:"General"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Konfigurasi pengaturan umum agen AI"})})]})}),i.jsx(Gn,{value:"knowledge",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:bg-muted/40 transition-colors",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(ov,{className:"w-4 h-4"}),i.jsx("span",{children:"Knowledge Sources"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Kelola sumber pengetahuan dan pasangan T&J"})})]})})]}),i.jsx(Dn,{value:"general",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-6",children:[i.jsxs("div",{className:"xl:col-span-3 space-y-4",children:[i.jsxs(Ae,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center text-lg font-semibold",children:e.charAt(0)}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:e}),i.jsx("p",{className:"text-muted-foreground",children:d?"New AI Agent - Configure your settings below":(N==null?void 0:N.description)||"AI Agent"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:d?"Not saved yet":`Last Updated: ${N?new Date(N.created_at).toLocaleString():"Never"}`})]})]}),i.jsxs("div",{className:"space-y-2 pt-4",children:[i.jsx("span",{className:"text-sm font-medium",children:"Assigned Super Agent"}),T?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading super agents..."}):C?i.jsx("div",{className:"text-sm text-destructive",children:C}):x&&(g!=null&&g.id)?i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-md bg-muted px-3 py-2 text-sm",children:[i.jsxs("span",{children:[" ",((wo=$.find(K=>K.id===g.id))==null?void 0:wo.name)||g.email||"You"]}),i.jsx(It,{variant:"secondary",children:"Your account"})]}):$.length===0?i.jsx("div",{className:"rounded-md border border-dashed border-muted-foreground/40 bg-muted/30 px-3 py-2 text-sm text-muted-foreground",children:"No super agents available. Create a super agent first before assigning this AI agent."}):i.jsxs(Ut,{value:B||"",onValueChange:K=>U(K),disabled:!v,children:[i.jsx(Dt,{className:"w-full",children:i.jsx(Rt,{placeholder:"Choose a super agent"})}),i.jsx($t,{className:"bg-background border z-50",children:$.map(K=>i.jsxs(De,{value:K.id,children:[" ",K.name]},K.id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Only the assigned super agent and their human agents can view and use this AI agent."})]})]}),i.jsx(Ae,{className:"p-4",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"AI Model"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Pilih model AI yang menentukan kecepatan dan kualitas respons."})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the balance between speed and intelligence for this agent."})]}),_e&&i.jsx(It,{variant:"secondary",className:"whitespace-nowrap",children:xu(_e==null?void 0:_e.provider)})]}),i.jsxs(Ut,{value:z,onValueChange:q,disabled:re.length===0,children:[i.jsx(Dt,{className:"w-full py-3",children:_e?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[(_e==null?void 0:_e.display_name)||"Custom","  ",Lg(_e==null?void 0:_e.cost_per_1m_tokens),"  ",xu(_e==null?void 0:_e.provider)]})}):i.jsx(Rt,{placeholder:"Select an AI model"})}),i.jsx($t,{className:"bg-background border z-50",children:re.map(K=>i.jsx(De,{value:K.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("span",{className:"font-semibold leading-tight",children:[(K==null?void 0:K.display_name)||"Custom","  ",Lg(K==null?void 0:K.cost_per_1m_tokens)]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:(K==null?void 0:K.description)||"No description available"}),i.jsxs("span",{className:"text-[11px] text-muted-foreground font-mono",children:[K==null?void 0:K.model_name,"  ",xu(K==null?void 0:K.provider)]})]})},K.id))})]}),re.length===0&&i.jsx("p",{className:"text-xs text-destructive mt-2",children:"No AI models available. Please contact your administrator."})]}),J.length>0&&i.jsxs("div",{className:"border-t pt-6",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Fallback Model"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Model yang digunakan secara otomatis jika model utama tidak tersedia."})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatic backup model used when primary model is unavailable."})]}),J.find(K=>K.id===ae)&&i.jsx(It,{variant:"secondary",className:"whitespace-nowrap",children:xu((jo=J.find(K=>K.id===ae))==null?void 0:jo.provider)})]}),i.jsxs(Ut,{value:ae,onValueChange:se,disabled:J.length===0,children:[i.jsx(Dt,{className:"w-full py-3",children:J.find(K=>K.id===ae)?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[((we=J.find(K=>K.id===ae))==null?void 0:we.display_name)||"Custom","  ",Lg((ot=J.find(K=>K.id===ae))==null?void 0:ot.cost_per_1m_tokens),"  ",xu((ht=J.find(K=>K.id===ae))==null?void 0:ht.provider)]})}):i.jsx(Rt,{placeholder:"Select a fallback model"})}),i.jsx($t,{className:"bg-background border z-50",children:J.map(K=>i.jsx(De,{value:K.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("span",{className:"font-semibold leading-tight",children:[(K==null?void 0:K.display_name)||"Custom","  ",Lg(K==null?void 0:K.cost_per_1m_tokens)]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:(K==null?void 0:K.description)||"No description available"}),i.jsxs("span",{className:"text-[11px] text-muted-foreground font-mono",children:[K==null?void 0:K.model_name,"  ",xu(K==null?void 0:K.provider)]})]})},K.id))})]})]})]})}),i.jsxs(Ae,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("behavior"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"AI Agent Behavior"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Konfigurasi kepribadian dan perilaku agen AI untuk menentukan cara berinteraksi dengan pelanggan"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure AI personality and behavior"})]}),i.jsx(xa,{className:`w-5 h-5 transition-transform ${c.behavior?"rotate-180":""}`})]}),c.behavior&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx($a,{className:"min-h-[120px]",value:M,onChange:K=>A(K.target.value),placeholder:d?"Define your AI's personality, behavior, and capabilities here...":"Enter system prompt..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[M.length,"/15000"]})]})]}),i.jsxs(Ae,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("welcome"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Welcome Message"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Pesan selamat datang yang dikirim otomatis kepada pelanggan saat memulai percakapan"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"First message sent to users"})]}),i.jsx(xa,{className:`w-5 h-5 transition-transform ${c.welcome?"rotate-180":""}`})]}),c.welcome&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx($a,{className:"min-h-[80px]",value:W,onChange:K=>G(K.target.value),placeholder:d?"This is the first message your AI will send to customers...":"Enter welcome message..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[W.length,"/5000"]})]})]}),i.jsxs(Ae,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("transfer"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Agent Transfer Conditions"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Kondisi yang menentukan kapan percakapan dialihkan dari agen AI ke agen manusia"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"When to transfer to human agents"})]}),i.jsx(xa,{className:`w-5 h-5 transition-transform ${c.transfer?"rotate-180":""}`})]}),c.transfer&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx($a,{className:"min-h-[80px]",value:Y,onChange:K=>H(K.target.value),placeholder:d?"Define when your AI should transfer the conversation to a human agent...":"Enter transfer conditions..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[Y.length,"/750"]})]})]}),i.jsx(Ae,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Stop AI after Handoff"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Menghentikan agen AI mengirim pesan setelah percakapan dialihkan ke agen manusia"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Stop AI from sending messages after handoff"})]}),i.jsx(xl,{checked:Q,onCheckedChange:X})]})}),i.jsx(Ae,{className:"p-6",children:i.jsxs(AR,{defaultOpen:!1,children:[i.jsxs(ER,{className:"flex w-full items-center justify-between py-1 font-medium [&[data-state=open]>svg]:rotate-180",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Additional Settings"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Pengaturan tambahan untuk konfigurasi lanjutan agen AI seperti batas riwayat, konteks, dan resolusi otomatis"})})]})]}),i.jsx(xa,{className:"w-5 h-5 transition-transform"})]}),i.jsx(PR,{className:"mt-4 data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Enable auto-resolve"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Mengaktifkan resolusi otomatis percakapan setelah waktu tertentu tanpa respons pelanggan"})})]})]}),i.jsx("div",{className:"mt-2",children:i.jsx(xl,{checked:Le,onCheckedChange:ge})})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Auto-resolve timeout (minutes)"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Waktu dalam menit sebelum percakapan secara otomatis diselesaikan (0 = nonaktif)"})})]})]}),i.jsx(Ve,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 30",value:be,onChange:K=>Ze(K.target.value),disabled:!Le,className:`mt-1 ${Le?"":"opacity-60 cursor-not-allowed bg-muted/50"}`}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Le?"Set 0 to disable auto-resolve.":"Enable Auto-resolve to edit this value."})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Conversation History (tokens)"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Batas maksimal riwayat percakapan yang dapat diingat AI (dalam token)"})})]})]}),i.jsx(Ve,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:`Max ${$e.toLocaleString()}`,value:We,onChange:K=>Ke(K.target.value),className:"mt-1"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:_e!=null&&_e.display_name?`${_e.display_name} supports up to ${$e.toLocaleString()} tokens.`:`Supports up to ${$e.toLocaleString()} tokens.`})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Context Window (K tokens)"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Batas maksimal konteks yang dapat diproses AI dalam satu respons (dalam K tokens)"})})]})]}),i.jsx(Ve,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:`Max ${oe}K`,value:te,onChange:K=>en(K.target.value),className:"mt-1"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:_e!=null&&_e.display_name?`${_e.display_name} supports up to ${oe}K tokens.`:`Supports up to ${oe}K tokens.`})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creativity Preset"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Preset kreativitas AI: Conservative (akurat), Balanced (seimbang), Creative (kreatif)"})})]})]}),i.jsxs("select",{value:Fe,onChange:K=>He(K.target.value),className:"w-full p-2 border rounded-lg mt-1",children:[i.jsx("option",{value:"Conservative",children:"Conservative"}),i.jsx("option",{value:"Balanced",children:"Balanced"}),i.jsx("option",{value:"Creative",children:"Creative"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"AI Message Cap"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Batas maksimal jumlah pesan yang dapat dikirim AI dalam satu percakapan"})})]})]}),i.jsx(Ve,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 1000",value:Ot,onChange:K=>_t(K.target.value),className:"mt-1"})]})]})})]})}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{className:"w-full",onClick:Ll,disabled:P,children:P?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"w-4 h-4 mr-2 animate-spin"}),d?"Creating...":"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ks,{className:"w-4 h-4 mr-2"}),d?"Create AI Agent":"Save AI Settings"]})})}),i.jsx(le,{children:i.jsx("p",{children:d?"Buat agen AI baru dengan pengaturan ini":"Simpan semua pengaturan saat ini"})})]})]}),i.jsx("div",{className:"xl:col-span-2",children:i.jsx(rIe,{welcomeMessage:W,systemPrompt:M,modelDisplay:(_e==null?void 0:_e.display_name)||(_e==null?void 0:_e.model_name)||"Not selected",profile:N,profileId:n,modelName:(_e==null?void 0:_e.model_name)||"",temperature:Cq(Fe),transfer_conditions:Y})})]})}),i.jsx(Dn,{value:"knowledge",className:"space-y-6",children:i.jsx(Ae,{className:"p-6",children:i.jsxs(pl,{value:o,onValueChange:l,className:"w-full",children:[i.jsxs(so,{className:"grid w-full grid-cols-3 mb-6",children:[i.jsxs(Gn,{value:"text",className:"gap-2",children:[i.jsx(WV,{className:"w-4 h-4"}),"Text"]}),i.jsxs(Gn,{value:"file",className:"gap-2",children:[i.jsx(ew,{className:"w-4 h-4"}),"File"]}),i.jsxs(Gn,{value:"qa",className:"gap-2",children:[i.jsx(Me,{className:"w-4 h-4"}),"Q&A"]})]}),i.jsxs(Dn,{value:"text",className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs(Z,{size:"sm",className:"gap-2",children:[i.jsx(KV,{className:"w-4 h-4"}),"Add"]})}),i.jsx(le,{children:i.jsx("p",{children:"Tambah item pengetahuan baru"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"outline",size:"sm",children:"Default"})}),i.jsx(le,{children:i.jsx("p",{children:"Gunakan item pengetahuan default"})})]})]}),i.jsxs("div",{className:"flex items-center gap-1 p-2 border rounded-md bg-muted/30",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(XV,{className:"w-4 h-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Batal"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(YV,{className:"w-4 h-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Ulang"})})]}),i.jsx("div",{className:"w-px h-6 bg-border mx-1"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(LV,{className:"w-4 h-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Tebal"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(HV,{className:"w-4 h-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Miring"})})]}),i.jsx("div",{className:"w-px h-6 bg-border mx-1"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(DV,{className:"w-4 h-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Rata Kiri"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(RV,{className:"w-4 h-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Rata Tengah"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx($V,{className:"w-4 h-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Rata Kanan"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(MV,{className:"w-4 h-4"})})}),i.jsx(le,{children:i.jsx("p",{children:"Rata Kiri-Kanan"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Panduan Umum: Deposit, Withdraw & Tambah Rekening"})]}),i.jsx("div",{className:"pl-6 space-y-2 text-sm",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-orange-500",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Cara Isi Saldo / Deposit"}),i.jsx("p",{className:"text-muted-foreground",children:"Lakukan transfer ke rekening tujuan yang tertera di menu DEPOSIT > REKENING TUJUAN."}),i.jsx("p",{className:"text-muted-foreground",children:"Gunakan metode ATM atau M-Banking (tidak tersedia autodebet)."}),i.jsx("p",{className:"text-muted-foreground",children:"Setelah transfer, wajib upload bukti transfer agar diproses lebih cepat."})]})]})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Khusus Bank BCA"})]}),i.jsxs("div",{className:"pl-6 text-sm text-muted-foreground",children:[i.jsx("p",{children:"Wajib menggunakan rekening BCA atas nama yang terdaftar di website."}),i.jsx("p",{children:"Tidak bisa menggunakan rekening BCA milik orang lain."})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Tambah Rekening / E-Wallet"})]}),i.jsxs("div",{className:"pl-6 text-sm text-muted-foreground",children:[i.jsx("p",{children:"Bisa menambahkan rekening atau e-wallet selama nama pemiliknya sama dengan yang sudah terdaftar."}),i.jsx("p",{children:"Akses dari halaman utama > klik menu REKENING > TAMBAH REKENING."})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("p",{children:"Minimal deposit Via Bank BCA, MANDIRI, BRI, BNI, CIMB, OCBC, BANK JAGO, & Dan Semua Jenis E-wallet adalah 5.000"}),i.jsx("p",{children:"Minimal deposit QRIS = 10.000"}),i.jsx("p",{children:"Minimal withdraw Bank & E-wallet = 50.000"}),i.jsx("p",{children:"Jika menggunakan pulsa, akan dikenakan potongan 20%"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Lupa User ID atau Password?"})]}),i.jsxs("div",{className:"pl-6 text-sm text-muted-foreground",children:[i.jsx("p",{children:"Format reset:"}),i.jsx("p",{children:"Nama Rekening :"}),i.jsx("p",{children:"Nomor Rekening :"}),i.jsx("p",{children:"Bank / E-wallet :"})]})]})]}),i.jsx("div",{className:"text-right text-xs text-muted-foreground",children:"10931 Characters"})]}),i.jsxs(Dn,{value:"website",className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Provide Link"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Provide a link to the page you want the AI to learn from."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Z,{variant:"default",size:"sm",className:"bg-muted text-foreground hover:bg-muted/80",children:"Batch Link"}),i.jsx(Z,{variant:"outline",size:"sm",children:"Single Link"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Web Link Collector"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ve,{placeholder:"Link URL",className:"flex-1"}),i.jsx(Z,{className:"bg-blue-600 hover:bg-blue-700",children:"Collect Link"})]}),i.jsxs("div",{className:"flex items-start gap-2 text-sm text-blue-600",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-600 flex items-center justify-center mt-0.5",children:i.jsx("span",{className:"text-white text-xs",children:"!"})}),i.jsxs("p",{children:["Start with URL and this tool will gather up to ",i.jsx("strong",{children:"30 unique"})," links from the site, excluding any files"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Trained Link"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"select-all",className:"rounded"}),i.jsx("label",{htmlFor:"select-all",className:"text-sm text-blue-600 cursor-pointer",children:"Select"})]}),i.jsx(Ve,{placeholder:"Search Links",className:"flex-1"})]})]})]}),i.jsxs(Dn,{value:"file",className:"space-y-6",children:[i.jsxs("div",{onDrop:y?ke:void 0,onDragOver:y?st:void 0,className:`border border-dashed rounded-lg p-6 text-center ${y?"bg-muted/30":"bg-muted/50 opacity-70"}`,children:[i.jsx("input",{ref:ze,type:"file",multiple:!0,hidden:!0,onChange:ee,disabled:!y}),i.jsx(ew,{className:"w-10 h-10 mx-auto mb-3 text-muted-foreground"}),y?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Drag & drop documents here, or"}),i.jsx(Z,{size:"sm",onClick:()=>{var K;return(K=ze.current)==null?void 0:K.click()},children:"Browse Files"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Supported: PDF"})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"You don't have permission to upload files."}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requires permission: ai_agent_files.create"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-sm font-medium",children:["Uploaded Files (",ut.length,")"]}),ut.length>0&&i.jsx(Z,{variant:"ghost",size:"sm",onClick:Rn,className:"text-red-600 hover:text-red-700",children:"Clear All"})]}),ie?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading files..."}):ut.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No files uploaded yet."}):i.jsx("div",{className:"border rounded-md divide-y",children:ut.map(K=>i.jsxs("div",{className:"flex items-center justify-between p-3",children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx("div",{className:"w-8 h-8 rounded bg-muted flex items-center justify-center",children:i.jsx(ew,{className:"w-4 h-4"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"truncate text-sm font-medium",children:K.name}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[(K.size/1024).toFixed(1)," KB  ",new Date(K.uploadedAt).toLocaleString()]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${K.status==="ready"?"bg-green-100 text-green-700":K.status==="uploading"?"bg-blue-100 text-blue-700":K.status==="processing"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:K.status==="uploading"?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Gt,{className:"w-3 h-3 animate-spin"}),"uploading"]}):K.status}),i.jsx(Z,{size:"sm",variant:"outline",onClick:()=>Ft(K),disabled:K.status==="uploading",children:"Download"}),i.jsx(Z,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>nt(K.id),disabled:K.status==="uploading",children:i.jsx(Ar,{className:"w-4 h-4"})})]})]},K.id))})]})]}),i.jsxs(Dn,{value:"qa",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Q&A Knowledge"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Add questionanswer pairs the AI can reference."})]}),i.jsxs(Z,{size:"sm",onClick:()=>{l("qa"),Dl()},className:"gap-2",children:[i.jsx(vs,{className:"w-4 h-4"}),"Add Pair"]})]}),Cn.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No Q&A pairs. Click Add Pair to create one."}):i.jsx("div",{className:"space-y-3",children:Cn.map(K=>i.jsx(Ae,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx(Ve,{placeholder:"Question",value:K.question,onChange:de=>xo(K.id,"question",de.target.value)}),i.jsx($a,{placeholder:"Answer",className:"min-h-[80px]",value:K.answer,onChange:de=>xo(K.id,"answer",de.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[yo(K)&&i.jsx(Z,{variant:"outline",size:"sm",onClick:async de=>{de.preventDefault(),de.stopPropagation(),l("qa");try{await L({qna:Cn.filter(Ce=>{var rt,Te;return((rt=Ce.question)==null?void 0:rt.trim())||((Te=Ce.answer)==null?void 0:Te.trim())}).map(({question:Ce,answer:rt})=>({q:Ce.trim(),a:rt.trim()}))}),Gr(JSON.parse(JSON.stringify(Cn))),Ie.success("Q&A saved")}catch(Ce){Ie.error((Ce==null?void 0:Ce.message)||"Failed to save Q&A")}},children:"Save"}),i.jsx(Z,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>Ns(K.id),children:i.jsx(Ar,{className:"w-4 h-4"})})]})]})},K.id))})]}),i.jsx(Dn,{value:"product",children:i.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[i.jsx(VV,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Product knowledge and catalog integration"})]})})]})})}),i.jsx(Dn,{value:"integrations",children:i.jsxs(Ae,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Integrations"}),i.jsx("p",{className:"text-muted-foreground",children:"Set up integrations with external services."})]})}),i.jsx(Dn,{value:"followups",className:"space-y-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Followups"}),i.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Tambahkan pesan Followup yang akan dikirim kepada ",i.jsx("span",{className:"text-blue-600",children:"pelanggan setelah jeda waktu tertentu"}),"."]}),i.jsx("p",{children:"Isi dengan prompt. Prompt adalah arahan yang AI akan pakai untuk menulis Followup sesuai dengan history chat dan knowledge anda."}),i.jsx("p",{children:"Anda juga bisa menulis kondisi Handoff to Agent anda di Prompt"}),i.jsx("p",{className:"text-blue-600",children:"Anda bisa mengirim gambar di followup. Klik disini untuk Upload gambar."})]})]}),i.jsx("div",{className:"space-y-4",children:bo.map((K,de)=>i.jsx(Ae,{className:"p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:"Prompt:"}),i.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>$l(K.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:i.jsx(Ar,{className:"w-4 h-4"})})]}),i.jsx($a,{value:K.prompt,onChange:Ce=>_f(K.id,"prompt",Ce.target.value),className:"min-h-[80px]",placeholder:"Enter followup message..."}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Delay (min):"}),i.jsx(Ve,{type:"number",value:K.delay,onChange:Ce=>_f(K.id,"delay",parseInt(Ce.target.value)||1),className:"w-20",min:"1"})]})}),i.jsxs(AR,{children:[i.jsxs(ER,{onClick:()=>Ga(K.id),className:"flex items-center gap-2 text-sm font-medium hover:text-primary",children:[i.jsx(xa,{className:`w-4 h-4 transition-transform ${K.expanded?"rotate-180":""}`}),"Options"]}),i.jsx(PR,{className:"pt-4 data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden",children:i.jsx("div",{className:"text-sm text-muted-foreground",children:"Additional options for this followup message can be configured here."})})]})]})},K.id))}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs(Z,{onClick:b0,className:"gap-2",children:[i.jsx(vs,{className:"w-4 h-4"}),"Add Followup"]})}),i.jsx(le,{children:i.jsx("p",{children:"Tambah pesan tindak lanjut baru"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{className:"bg-green-600 hover:bg-green-700",children:"Save Followups"})}),i.jsx(le,{children:i.jsx("p",{children:"Simpan semua pesan tindak lanjut"})})]})]})]})}),i.jsx(Dn,{value:"evaluation",children:i.jsxs(Ae,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Evaluation"}),i.jsx("p",{className:"text-muted-foreground",children:"Review AI agent performance metrics."})]})})]})]})},Fg=e=>e==null?"Pricing on request":`${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e>=1?2:3}).format(e)} / 1M`,Cu=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown",Bg="00000000-0000-0000-0000-000000000001",iIe=({agent:e,onSettings:t,onDelete:n})=>i.jsxs(Ae,{className:"p-6 text-center space-y-4 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center text-xl font-semibold text-muted-foreground",children:e.initials}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:e.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.creator}),e.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),(e.modelName||e.provider)&&i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.modelName?`Model: ${e.modelName}`:null,e.modelName&&e.provider?"  ":"",e.provider?`Provider: ${Cu(e.provider)}`:null]}),i.jsxs("div",{className:"space-y-1 mt-1",children:[i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Super Agent: ",e.superAgentName??"Unassigned"]})]})]})]}),i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Kt,{permission:"ai_profiles.update",children:i.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>t(e),children:[i.jsx(Ks,{className:"w-4 h-4"}),"Settings"]})})}),i.jsx(le,{children:i.jsx("p",{children:"Konfigurasi pengaturan agen AI"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Kt,{permission:"ai_profiles.delete",children:i.jsxs(Z,{variant:"outline",size:"sm",className:"gap-2 text-destructive hover:text-destructive",onClick:()=>n(e.id),children:[i.jsx(Ar,{className:"w-4 h-4"}),"Delete"]})})}),i.jsx(le,{children:i.jsx("p",{children:"Hapus agen AI ini"})})]})]})]}),sIe=({onClick:e})=>i.jsx(Ae,{className:"p-6 text-center space-y-4 hover:shadow-md transition-shadow bg-blue-600 text-white cursor-pointer group",onClick:e,children:i.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center group-hover:bg-white/30 transition-colors",children:i.jsx(vs,{className:"w-8 h-8"})}),i.jsx("h3",{className:"font-semibold text-lg",children:"Create New"})]})}),oIe=()=>{const[e,t]=p.useState(null),[n,r]=p.useState([]),[a,s]=p.useState(!0),[o,l]=p.useState(!1),[c,u]=p.useState(null),[f,d]=p.useState(!1),[h,m]=p.useState(""),[g,v]=p.useState("customer-service"),[x,y]=p.useState([]),[b,w]=p.useState([]),[j,k]=p.useState(!1),[_,S]=p.useState(null),[E,N]=p.useState(""),[I,P]=p.useState(""),[D,L]=p.useState(""),[B,U]=p.useState(""),[$,O]=p.useState("all"),[T,R]=p.useState("all"),[C,F]=p.useState("newest"),[M,A]=p.useState(0),[W,G]=p.useState(0),[Y,H]=p.useState(null),[Q,X]=p.useState(null),[re,fe]=p.useState(!1),J=p.useRef(!0);Vr();const{mode:ye,superAgentId:z,loading:q,error:ae}=mU(),{agents:se}=El(),[be,Se]=p.useState(!1),[Le,ge]=p.useState(null),We=oe=>oe.replace(/[%_\\]/g,Ze=>`\\${Ze}`).replace(/'/g,"''"),dt=p.useMemo(()=>{const oe=new Map;return[...x,...b].forEach(Ze=>{oe.set(Ze.id,Ze)}),oe},[x,b]),{deleteProfile:bt}=Nq(),Et=(oe,Ze,Ke)=>({id:oe.id,name:oe.name,initials:oe.name.split(" ").map(en=>en.charAt(0)).join("").toUpperCase().slice(0,2),creator:"Admin",description:oe.description||void 0,created_at:oe.created_at,modelId:oe.model_id,modelName:(Ze==null?void 0:Ze.display_name)??(Ze==null?void 0:Ze.model_name)??null,provider:(Ze==null?void 0:Ze.provider)??null,superAgentId:(oe==null?void 0:oe.super_agent_id)??null,superAgentName:Ke??null}),te=p.useCallback(async()=>{if(!q){if(ye==="none"){G(0),H(null);return}try{let oe=ne.from("ai_profiles").select("id",{count:"exact",head:!0}).eq("org_id",Bg);if(ye==="super"||ye==="agent"){if(!z){G(0),H(null);return}oe=oe.eq("super_agent_id",z)}const{count:Ze}=await oe;if(G(Ze||0),(Ze||0)>0){let Ke=ne.from("ai_profiles").select("created_at").order("created_at",{ascending:!1}).limit(1).eq("org_id",Bg);(ye==="super"||ye==="agent")&&z&&(Ke=Ke.eq("super_agent_id",z));const{data:en}=await Ke.maybeSingle();H(en?new Date(en.created_at):null)}else H(null)}catch(oe){console.error("Error fetching AI agent stats:",oe)}}},[ye,z,q]),me=p.useCallback(async()=>{if(q){s(!0);return}try{if(J.current?s(!0):l(!0),u(null),ye==="none"){J.current=!1,r([]),A(0),s(!1),l(!1),u(ae??"Tidak ada agen AI yang tersedia untuk akun ini.");return}let oe=ne.from("ai_profiles").select("*, ai_models:ai_models!ai_profiles_model_id_fkey(id, display_name, model_name, provider)",{count:"exact"}).eq("org_id",Bg);if(ye==="super"||ye==="agent"){if(!z){J.current=!1,r([]),A(0),s(!1),l(!1),u(ae??"Tidak ada agen AI yang tersedia untuk akun ini.");return}oe=oe.eq("super_agent_id",z)}if(B){const ze=We(B);oe=oe.or(`name.ilike.%${ze}%,description.ilike.%${ze}%`)}T!=="all"&&(oe=oe.eq("model_id",T)),$!=="all"&&($==="unknown"?oe=oe.or("model_id.is.null,ai_models.provider.is.null"):oe=oe.eq("ai_models.provider",$)),C==="az"?oe=oe.order("name",{ascending:!0,nullsFirst:!1}):C==="oldest"?oe=oe.order("created_at",{ascending:!0}):oe=oe.order("created_at",{ascending:!1});const{data:Ze,error:Ke,count:en}=await oe;if(Ke)throw Ke;const _t=Array.from(new Set(Ze.map(ze=>ze==null?void 0:ze.super_agent_id).filter(ze=>!!ze)));let ut=new Map;if(_t.length){const{data:ze}=await ne.from("v_human_agents").select("user_id, agent_name, email").in("user_id",_t);ze==null||ze.forEach(ie=>{const Ne=ie.agent_name||ie.email||String(ie.user_id).slice(0,8);ut.set(ie.user_id,Ne)})}A(en||0);const Lt=(Ze||[]).map(ze=>Et(ze,ze.ai_models||(ze.model_id?dt.get(ze.model_id):void 0),ut.get((ze==null?void 0:ze.super_agent_id)??"")??null));r(Lt)}catch(oe){console.error("Error fetching AI agents:",oe),u("Failed to load AI agents"),Ie.error("Failed to load AI agents"),r([]),A(0)}finally{J.current?(J.current=!1,s(!1)):l(!1)}},[B,T,$,C,dt,ye,z,q,ae]),Fe=p.useMemo(()=>{const oe=new Set;return[...x,...b].forEach(Ze=>{Ze.provider&&oe.add(Ze.provider)}),oe.add("unknown"),Array.from(oe).sort((Ze,Ke)=>Ze.localeCompare(Ke))},[x,b]),He=p.useMemo(()=>{const oe=new Map;return[...x,...b].forEach(Ze=>{oe.set(Ze.id,Ze.display_name||Ze.model_name||"Unnamed")}),Array.from(oe.entries()).sort((Ze,Ke)=>Ze[1].localeCompare(Ke[1]))},[x,b]);p.useEffect(()=>{const oe=setTimeout(()=>U(D.trim()),250);return()=>clearTimeout(oe)},[D]),p.useEffect(()=>{me()},[me]),p.useEffect(()=>{te()},[te]),p.useEffect(()=>{$!=="all"&&!Fe.includes($)&&O("all")},[$,Fe]),p.useEffect(()=>{T!=="all"&&!He.some(([oe])=>oe===T)&&R("all")},[T,He]);const Ue=oe=>{const Ze=n.find(Ke=>Ke.id===oe);Ze&&X(Ze)},he=async()=>{if(Q)try{fe(!0),await bt(Q.id),await Promise.all([me(),te()]),Ie.success(`"${Q.name}" has been deleted successfully`),X(null)}catch(oe){console.error("Error deleting agent:",oe),u("Failed to delete AI agent"),Ie.error("Failed to delete AI agent")}finally{fe(!1)}},Ot=()=>{d(!0)},vt=async()=>{var oe,Ze;if(!h.trim()){Ie.error("Please enter an AI agent name");return}if(!E){Ie.error("Please select an AI model");return}if(!Le){Ie.error("Please choose a Super Agent");return}try{const{data:Ke,error:en}=await ne.from("ai_profiles").insert([{org_id:Bg,name:h.trim(),description:null,system_prompt:"",welcome_message:"",transfer_conditions:"",stop_ai_after_handoff:!0,model_id:E,super_agent_id:Le}]).select("id, name, created_at, model_id, super_agent_id").single();if(en)throw en;const ut={id:Ke==null?void 0:Ke.id,name:(Ke==null?void 0:Ke.name)||h.trim(),initials:((Ke==null?void 0:Ke.name)||h.trim()).split(" ").map(Lt=>Lt.charAt(0)).join("").toUpperCase().slice(0,2),creator:"Admin",created_at:(Ke==null?void 0:Ke.created_at)||new Date().toISOString(),modelId:(Ke==null?void 0:Ke.model_id)||E,modelName:((oe=x.find(Lt=>Lt.id===((Ke==null?void 0:Ke.model_id)||E)))==null?void 0:oe.display_name)||void 0,provider:((Ze=x.find(Lt=>Lt.id===((Ke==null?void 0:Ke.model_id)||E)))==null?void 0:Ze.provider)||null,superAgentId:(Ke==null?void 0:Ke.super_agent_id)||Le,superAgentName:void 0};t(ut),d(!1),m(""),v("customer-service"),ge(null),Ie.success("AI agent created successfully"),me(),te()}catch(Ke){console.error("Create AI Agent failed:",Ke),Ie.error((Ke==null?void 0:Ke.message)||"Failed to create AI agent")}},wt=p.useRef(!1),ve=p.useCallback(async()=>{try{k(!0),S(null);const{data:oe,error:Ze}=await ne.from("ai_models").select("id, display_name, model_name, provider, cost_per_1m_tokens, is_active").eq("is_active",!0).order("display_name",{ascending:!0});if(Ze)throw Ze;const Ke=oe||[],en=Ke.filter(ut=>(ut.display_name||"").toLowerCase()!=="fallback"),_t=Ke.filter(ut=>(ut.display_name||"").toLowerCase()==="fallback");y(en),w(_t),wt.current||(en.length>0&&N(ut=>ut||en[0].id),_t.length>0&&P(ut=>ut||_t[0].id),wt.current=!0)}catch(oe){console.error("Error loading AI models:",oe),S("Failed to load AI models"),Ie.error("Failed to load AI models")}finally{k(!1)}},[]);if(p.useEffect(()=>{ve()},[ve]),p.useEffect(()=>{me()},[]),e)return i.jsx(aIe,{agentName:e.name,onBack:()=>{t(null),me(),te()},profileId:e.id==="new"?void 0:e.id,initialModelId:e.modelId||void 0});if(a)return i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Gt,{className:"w-8 h-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading AI agents..."})]});const _e=n.length,$e=Fe.length?Fe:[];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"AI Agents"}),i.jsxs("div",{className:"text-muted-foreground max-w-2xl mx-auto",children:[i.jsx("p",{children:"Ini adalah halaman di mana Anda dapat mengunjungi AI yang telah Anda buat sebelumnya."}),i.jsx("p",{children:"Jangan ragu untuk membuat perubahan dan membuat chatbot sebanyak yang Anda inginkan kapan saja!"})]})]}),c&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",c]}),i.jsx(Z,{variant:"outline",size:"sm",className:"mt-2",onClick:me,children:"Retry"})]}),i.jsxs("div",{className:"grid gap-3 rounded-lg border bg-card p-4 md:flex md:items-center md:justify-between",children:[i.jsxs("div",{className:"relative w-full md:w-72",children:[i.jsx(hs,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Ve,{value:D,onChange:oe=>L(oe.target.value),placeholder:"Search AI agents...",className:"pl-9"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs(Ut,{value:$,onValueChange:O,children:[i.jsx(Dt,{className:"w-[160px] bg-background border",children:i.jsx(Rt,{placeholder:"Provider"})}),i.jsxs($t,{className:"bg-background border z-50",children:[i.jsx(De,{value:"all",children:"All providers"}),$e.map(oe=>i.jsx(De,{value:oe,children:oe==="unknown"?"Unknown":Cu(oe)},oe))]})]}),i.jsxs(Ut,{value:T,onValueChange:R,children:[i.jsx(Dt,{className:"w-[160px] bg-background border",children:i.jsx(Rt,{placeholder:"AI model"})}),i.jsxs($t,{className:"bg-background border z-50",children:[i.jsx(De,{value:"all",children:"All models"}),He.map(([oe,Ze])=>i.jsx(De,{value:oe,children:Ze},oe))]})]}),i.jsxs(Ut,{value:C,onValueChange:oe=>F(oe),children:[i.jsx(Dt,{className:"w-[150px] bg-background border",children:i.jsx(Rt,{placeholder:"Sort"})}),i.jsxs($t,{className:"bg-background border z-50",children:[i.jsx(De,{value:"newest",children:"Newest first"}),i.jsx(De,{value:"oldest",children:"Oldest first"}),i.jsx(De,{value:"az",children:"Name AZ"})]})]})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",_e," of ",W," agents"]}),o&&!a&&i.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Updating list"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ae,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-primary",children:W}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total AI Agents"})]}),i.jsxs(Ae,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:_e}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Matching Filters"})]}),i.jsxs(Ae,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Y?Y.toLocaleDateString():"N/A"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Last Created"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.map(oe=>i.jsx(iIe,{agent:oe,onSettings:t,onDelete:Ue},oe.id)),i.jsx(Kt,{permission:"ai_profiles.create",children:i.jsx(sIe,{onClick:Ot})})]}),_e===0&&!a&&W===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center",children:i.jsx(vs,{className:"w-12 h-12 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No AI Agents Yet"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first AI agent to get started with automated customer support."}),i.jsxs(Z,{onClick:Ot,children:[i.jsx(vs,{className:"w-4 h-4 mr-2"}),"Create Your First AI Agent"]})]}),_e===0&&!a&&W>0&&i.jsx("div",{className:"rounded-lg border border-dashed p-6 text-center text-sm text-muted-foreground",children:"No AI agents match your current filters. Try adjusting the search or filter settings above."}),i.jsx(Kt,{permission:"ai_profiles.create",children:i.jsx(mn,{open:f,onOpenChange:d,children:i.jsxs(cn,{className:"sm:max-w-[425px]",children:[i.jsx(un,{children:i.jsx(dn,{className:"text-xl font-semibold",children:"Create New AI Agent"})}),i.jsxs("div",{className:"space-y-6 pt-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Name"}),i.jsx(Ve,{placeholder:"Enter AI name",value:h,onChange:oe=>m(oe.target.value),className:"w-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Super Agent *"}),i.jsxs(ls,{open:be,onOpenChange:Se,children:[i.jsx(cs,{asChild:!0,children:i.jsx(Z,{variant:"outline",role:"combobox",className:"w-full justify-between",children:(()=>{const oe=se.find(Ze=>Ze.primaryRole==="super_agent"&&Ze.user_id===Le);return(oe==null?void 0:oe.display_name)||(oe==null?void 0:oe.email)||Le||"Choose a super agent"})()})}),i.jsx(Di,{className:"w-[360px] p-0",children:i.jsxs(Oc,{children:[i.jsx(Ic,{placeholder:"Search super agents..."}),i.jsx(Rc,{children:"No super agents found."}),i.jsx(Mc,{children:se.filter(oe=>oe.primaryRole==="super_agent").map(oe=>i.jsx(Dc,{onSelect:()=>{ge(oe.user_id),Se(!1)},children:i.jsx("span",{className:"ml-2",children:oe.display_name||oe.email||oe.user_id.slice(0,8)})},oe.user_id))})]})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Assign a super agent who will own and manage this AI agent."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Template"}),i.jsxs(Ut,{value:g,onValueChange:v,children:[i.jsx(Dt,{className:"w-full",children:i.jsx(Rt,{placeholder:"Select a template"})}),i.jsx($t,{})]}),g==="customer-service"&&i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"and sales inquiries for your business."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"AI Model"}),i.jsxs(Ut,{value:E,onValueChange:N,disabled:j||x.length===0,children:[i.jsx(Dt,{className:"w-full py-3",children:E?(()=>{const oe=x.find(Ze=>Ze.id===E);return oe?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[oe.display_name||"Custom","  ",Fg(oe.cost_per_1m_tokens),"  ",Cu(oe.provider)]})}):i.jsx(Rt,{placeholder:j?"Loading models...":"Select an AI model"})})():i.jsx(Rt,{placeholder:j?"Loading models...":"Select an AI model"})}),i.jsx($t,{side:"bottom",align:"start",sideOffset:4,children:x.map(oe=>i.jsx(De,{value:oe.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm font-medium",children:[i.jsx("span",{children:oe.display_name||"Custom"}),i.jsx("span",{className:"text-muted-foreground",children:Fg(oe.cost_per_1m_tokens)})]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:oe.description||"No description available"}),i.jsxs("span",{className:"text-[11px] font-mono text-muted-foreground",children:[oe.model_name,"  ",Cu(oe.provider)]})]})},oe.id))})]}),_&&i.jsx("p",{className:"text-xs text-destructive",children:_})]}),b.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Fallback Model"}),i.jsxs(Ut,{value:I,onValueChange:P,disabled:j||b.length===0,children:[i.jsx(Dt,{className:"w-full py-3",children:I?(()=>{const oe=b.find(Ze=>Ze.id===I);return oe?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[oe.display_name||"Custom","  ",Fg(oe.cost_per_1m_tokens),"  ",Cu(oe.provider)]})}):i.jsx(Rt,{placeholder:j?"Loading models...":"Select a fallback model"})})():i.jsx(Rt,{placeholder:j?"Loading models...":"Select a fallback model"})}),i.jsx($t,{side:"bottom",align:"start",sideOffset:4,children:b.map(oe=>i.jsx(De,{value:oe.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm font-medium",children:[i.jsx("span",{children:oe.display_name||"Custom"}),i.jsx("span",{className:"text-muted-foreground",children:Fg(oe.cost_per_1m_tokens)})]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:oe.description||"No description available"}),i.jsxs("span",{className:"text-[11px] font-mono text-muted-foreground",children:[oe.model_name,"  ",Cu(oe.provider)]})]})},oe.id))})]})]}),i.jsx(Z,{onClick:vt,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:!h.trim()||!E||!Le,children:"Create AI Agent"})]})]})})})]}),i.jsx(gb,{open:!!Q,onOpenChange:oe=>{!oe&&!re&&X(null)},children:i.jsxs(Np,{children:[i.jsxs(Cp,{children:[i.jsx(Ep,{children:"Delete AI Agent?"}),i.jsx(Pp,{children:Q?`Are you sure you want to delete "${Q.name}"? This action cannot be undone.`:"Are you sure you want to delete this AI agent?"})]}),i.jsxs(Ap,{children:[i.jsx(Op,{disabled:re,children:"Cancel"}),i.jsx(Tp,{onClick:he,disabled:re,className:"bg-destructive hover:bg-destructive/90 focus:ring-destructive/50",children:re?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})},Aq=({className:e,...t})=>i.jsx("nav",{role:"navigation","aria-label":"pagination",className:xe("mx-auto flex w-full justify-center",e),...t});Aq.displayName="Pagination";const Eq=p.forwardRef(({className:e,...t},n)=>i.jsx("ul",{ref:n,className:xe("flex flex-row items-center gap-1",e),...t}));Eq.displayName="PaginationContent";const hv=p.forwardRef(({className:e,...t},n)=>i.jsx("li",{ref:n,className:xe("",e),...t}));hv.displayName="PaginationItem";const jA=({className:e,isActive:t,size:n="icon",...r})=>i.jsx("a",{"aria-current":t?"page":void 0,className:xe(kd({variant:t?"outline":"ghost",size:n}),e),...r});jA.displayName="PaginationLink";const Pq=({className:e,...t})=>i.jsxs(jA,{"aria-label":"Go to previous page",size:"default",className:xe("gap-1 pl-2.5",e),...t,children:[i.jsx(XS,{className:"h-4 w-4"}),i.jsx("span",{children:"Previous"})]});Pq.displayName="PaginationPrevious";const Tq=({className:e,...t})=>i.jsxs(jA,{"aria-label":"Go to next page",size:"default",className:xe("gap-1 pr-2.5",e),...t,children:[i.jsx("span",{children:"Next"}),i.jsx(Cy,{className:"h-4 w-4"})]});Tq.displayName="PaginationNext";const lIe=()=>{const[e,t]=p.useState(!1),[n,r]=p.useState(!1),[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState(!1),[f,d]=p.useState({enabled:!1,perDay:0,perMonth:0,twoFA:!1}),[h,m]=p.useState("7d"),[g,v]=p.useState("7d"),[x,y]=p.useState(null),[b,w]=p.useState(!1),[j,k]=p.useState(null),[_,S]=p.useState({}),[E,N]=p.useState(!1),[I,P]=p.useState(null),[D,L]=p.useState({name:"",email:"",role:"agent"}),[B,U]=p.useState(!1),[$,O]=p.useState(!1),[T,R]=p.useState(null),[C,F]=p.useState(!1),[M,A]=p.useState(!1),[W,G]=p.useState(null),{toast:Y}=Vc(),H=p.useRef(null),{hasPermission:Q,hasRole:X}=jr(),[re,fe]=p.useState([]),[J,ye]=p.useState([]),[z,q]=p.useState(0),[ae,se]=p.useState(0),[be,Se]=p.useState(1),[Le,ge]=p.useState(1),[We,dt]=p.useState(10),[bt,Et]=p.useState(10),[te,me]=p.useState(!1),[Fe,He]=p.useState(!1),[Ue,he]=p.useState("active"),[Ot,vt]=p.useState({}),[wt,ve]=p.useState(null),[_e,$e]=p.useState(""),[oe,Ze]=p.useState(""),[Ke,en]=p.useState("all"),[_t,ut]=p.useState("all"),[Lt,ze]=p.useState("all");p.useEffect(()=>{const we=setTimeout(()=>Ze(_e.trim()),300);return()=>clearTimeout(we)},[_e]),p.useEffect(()=>{!X(nr.MASTER_AGENT)&&D.role==="super_agent"&&L({...D,role:"agent"})},[X,D.role]);const ie=we=>we.replace(/[%_\\]/g,ot=>`\\${ot}`).replace(/'/g,"''"),Ne=D.name.trim()&&D.email.trim()&&(D.role!=="agent"||T),{agents:Re,loading:et,error:pt,fetchAgents:ee,createAgent:ke,updateAgentStatus:st,updateAgentRole:nt,deleteAgent:Ft,setEnable2FAFlagForCreate:Rn}=El();p.useEffect(()=>{pt&&pt!==H.current&&(Y({title:"Error",description:pt,variant:"destructive"}),H.current=pt),pt||(H.current=null)},[pt,Y]);const Cn=we=>{if(!we)return null;const ot=String(we).toLowerCase();return ot.includes("master")?"master_agent":ot.includes("super")?"super_agent":ot.includes("agent")?"agent":null},An=async({invited:we,page:ot,pageSize:ht,search:K,role:de,activeStatus:Ce,pendingStatus:rt})=>{try{we?He(!0):me(!0);const Te=(ot-1)*ht,lt=Te+ht-1;let Xe=ne.from("v_human_agents").select("*",{count:"exact"});const jt=K?ie(K):"";if(jt&&(Xe=Xe.or(`agent_name.ilike.%${jt}%,email.ilike.%${jt}%`)),de&&de!=="all"){const vr=de==="master_agent"?"%master%":de==="super_agent"?"%super%":"%agent%";Xe=Xe.ilike("role_name",vr)}const ct=X(nr.MASTER_AGENT);if(X(nr.SUPER_AGENT)){if(!I){we?He(!1):me(!1);return}try{let vr=ne.from("super_agent_members").select("agent_user_id").eq("super_agent_id",I);wt&&(vr=vr.eq("org_id",wt));const{data:on}=await vr,xn=[I,...(on||[]).map(gt=>String(gt.agent_user_id)).filter(Boolean)];xn.length>0?Xe=Xe.in("user_id",xn):Xe=Xe.eq("user_id",I)}catch{Xe=Xe.eq("user_id",I)}}else if(!ct){we?(ye([]),se(0),He(!1)):(fe([]),q(0),me(!1));return}we?rt==="expired"?Xe=Xe.eq("confirmation_status","expired"):rt==="invited"?Xe=Xe.or("confirmation_status.is.null,confirmation_status.eq.invited,confirmation_status.eq.pending"):Xe=Xe.or("confirmation_status.is.null,confirmation_status.neq.accepted"):(Xe=Xe.eq("confirmation_status","accepted"),Ce&&Ce!=="all"&&(Xe=Xe.eq("is_active",Ce==="active")));const{data:rn,count:ca,error:ua}=await Xe.order("agent_name",{ascending:!0}).range(Te,lt);if(ua)throw ua;if(we)ye(rn||[]),se(ca||0);else{const vr=rn||[];fe(vr),q(ca||0);try{const on=vr.filter(xn=>String((xn==null?void 0:xn.role_name)||"").toLowerCase()==="agent").map(xn=>xn.user_id);if(on.length>0){let xn=ne.from("super_agent_members").select("agent_user_id, super_agent_id").in("agent_user_id",on);wt&&(xn=xn.eq("org_id",wt));const{data:gt}=await xn,Jn={};(gt||[]).forEach(mt=>{mt!=null&&mt.agent_user_id&&(Jn[String(mt.agent_user_id)]=String(mt.super_agent_id||""))}),vt(Jn)}else vt({})}catch{vt({})}}}catch(Te){Y({title:"Error",description:(Te==null?void 0:Te.message)||"Failed to fetch agents",variant:"destructive"}),we?(ye([]),se(0)):(fe([]),q(0))}finally{we?He(!1):me(!1)}};p.useEffect(()=>{An({invited:!1,page:be,pageSize:We,search:oe,role:Ke,activeStatus:_t})},[be,We,oe,Ke,_t]),p.useEffect(()=>{be!==1&&Se(1)},[oe,Ke,_t]),p.useEffect(()=>{Ue==="pending"&&An({invited:!0,page:Le,pageSize:bt,search:oe,role:Ke,pendingStatus:Lt})},[Ue,Le,bt,oe,Ke,Lt]),p.useEffect(()=>{Ue==="pending"&&Le!==1&&ge(1)},[oe,Ke,Lt,Ue]);const bi=(we,ot,ht,K,de,Ce,rt,Te,lt)=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"rounded-lg border bg-card",children:[i.jsxs("div",{className:`grid gap-4 p-4 border-b bg-muted/50 font-medium text-sm ${Te?"grid-cols-[240px,1fr,220px,120px,160px]":"grid-cols-[240px,1fr,220px,160px,120px,120px]"}`,children:[i.jsx("div",{children:"Agent Name"}),i.jsx("div",{children:"Email"}),i.jsx("div",{children:"Role"}),!Te&&i.jsx("div",{children:"Token Usage"}),i.jsx("div",{children:"Status"}),i.jsx("div",{children:"Action"})]}),i.jsx("div",{className:"divide-y",children:ot?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Gt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Loading agents..."})]})}):we.length===0?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ZS,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),i.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["No ",Te?"Pending":"Active"," Agents"]}),i.jsx("p",{className:"text-muted-foreground",children:Te?"Invited users will appear here until they sign in.":"Create your first agent to get started."})]})}):!Te&&lt?(()=>{const Xe=gt=>String(gt||"").toLowerCase(),jt=gt=>Xe(gt.role_name).includes("master"),ct=gt=>Xe(gt.role_name).includes("super"),ft=gt=>{const Jn=Xe(gt.role_name);return Jn==="agent"||Jn==="agent_only"},rn=we.filter(jt),ca=we.filter(ct),ua=we.filter(ft),vr=Object.fromEntries(ca.map(gt=>[String(gt.user_id),gt])),on={},xn=[];for(const gt of ua){const Jn=lt[String(gt.user_id)];Jn&&vr[Jn]?(on[Jn]=on[Jn]||[]).push(gt):xn.push(gt)}return i.jsxs(i.Fragment,{children:[rn.map(gt=>{const Jn="master_agent",mt={user_id:String(gt.user_id),email:gt.email||"",display_name:gt.agent_name||gt.email||"Unknown",avatar_url:gt.avatar_url||null,timezone:null,created_at:"",roles:[Jn],primaryRole:Jn,status:gt.is_active?"Active":"Inactive",super_agent_id:null};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-blue-50/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zr,{className:"h-8 w-8",children:i.jsx(qr,{className:"text-xs bg-blue-100 text-blue-700",children:Ll(mt.display_name||"U")})}),i.jsx("span",{className:"font-medium text-blue-600",children:mt.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:mt.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(It,{className:`text-xs ${jo(mt.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Master Agent"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(_u,{children:[i.jsx(ku,{asChild:!0,children:i.jsxs(Z,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:mt.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${wo(mt.status)}`}),i.jsx("span",{className:"text-xs",children:mt.status}),mt.primaryRole!=="master_agent"&&i.jsx(xa,{className:"h-3 w-3"})]})}),i.jsxs(ec,{className:"bg-background border z-50",children:[i.jsx(Za,{onClick:()=>Ga(mt.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(Za,{onClick:()=>Ga(mt.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Kt,{permission:"users_profile.update_token_limit",children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Ns(mt),title:"Edit limits",children:i.jsx(ga,{className:"h-4 w-4"})})}),X(nr.MASTER_AGENT)&&i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>$l(mt),title:"View token usage",children:i.jsx(Of,{className:"h-4 w-4"})}),mt.primaryRole!=="master_agent"&&i.jsx(Kt,{permission:"super_agents.delete",children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{G(mt),F(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]},`master-${gt.user_id}`)}),ca.map(gt=>{const Jn="super_agent",mt={user_id:String(gt.user_id),email:gt.email||"",display_name:gt.agent_name||gt.email||"Unknown",avatar_url:gt.avatar_url||null,timezone:null,created_at:"",roles:[Jn],primaryRole:Jn,status:gt.is_active?"Active":"Inactive",super_agent_id:null},qp=on[String(gt.user_id)]||[];return i.jsxs("div",{className:"",children:[i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-green-50/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zr,{className:"h-8 w-8",children:i.jsx(qr,{className:"text-xs bg-green-100 text-green-700",children:Ll(mt.display_name||"U")})}),i.jsx("span",{className:"font-medium text-green-600",children:mt.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:mt.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(It,{className:`text-xs ${jo(mt.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Super Agent"})}),i.jsx("div",{className:"text-sm font-medium",children:E?"":(_[mt.user_id]??0).toLocaleString()}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(_u,{children:[i.jsx(ku,{asChild:!0,children:i.jsxs(Z,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:mt.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${wo(mt.status)}`}),i.jsx("span",{className:"text-xs",children:mt.status}),mt.primaryRole!=="master_agent"&&i.jsx(xa,{className:"h-3 w-3"})]})}),i.jsxs(ec,{className:"bg-background border z-50",children:[i.jsx(Za,{onClick:()=>Ga(mt.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(Za,{onClick:()=>Ga(mt.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Kt,{permission:"users_profile.update_token_limit",children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Ns(mt),title:"Edit limits",children:i.jsx(ga,{className:"h-4 w-4"})})}),X(nr.MASTER_AGENT)&&i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>$l(mt),title:"View token usage",children:i.jsx(Of,{className:"h-4 w-4"})}),mt.primaryRole!=="master_agent"&&i.jsx(Kt,{permission:"super_agents.delete",children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{G(mt),F(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]}),qp.map(da=>{const Fl="agent",Ir={user_id:String(da.user_id),email:da.email||"",display_name:da.agent_name||da.email||"Unknown",avatar_url:da.avatar_url||null,timezone:null,created_at:"",roles:[Fl],primaryRole:Fl,status:da.is_active?"Active":"Inactive",super_agent_id:mt.user_id};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-gray-50/30 pl-12",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 border-l-2 border-b-2 border-gray-300 rounded-bl"})}),i.jsx(zr,{className:"h-8 w-8",children:i.jsx(qr,{className:"text-xs bg-gray-100 text-gray-700",children:Ll(Ir.display_name||"U")})}),i.jsx("span",{className:"font-medium text-gray-600",children:Ir.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:Ir.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(It,{className:`text-xs ${jo(Ir.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Agent"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(_u,{children:[i.jsx(ku,{asChild:!0,children:i.jsxs(Z,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:Ir.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${wo(Ir.status)}`}),i.jsx("span",{className:"text-xs",children:Ir.status}),Ir.primaryRole!=="master_agent"&&i.jsx(xa,{className:"h-3 w-3"})]})}),i.jsxs(ec,{className:"bg-background border z-50",children:[i.jsx(Za,{onClick:()=>Ga(Ir.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(Za,{onClick:()=>Ga(Ir.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Kt,{permission:"users_profile.update_token_limit",children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Ns(Ir),title:"Edit limits",children:i.jsx(ga,{className:"h-4 w-4"})})}),X(nr.MASTER_AGENT)&&i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>$l(Ir),title:"View token usage",children:i.jsx(Of,{className:"h-4 w-4"})}),Ir.primaryRole!=="master_agent"&&i.jsx(Kt,{permission:"super_agents.delete",children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{G(Ir),F(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]},`agent-${da.user_id}`)})]},`super-${gt.user_id}`)}),xn.map(gt=>{const Jn="agent",mt={user_id:String(gt.user_id),email:gt.email||"",display_name:gt.agent_name||gt.email||"Unknown",avatar_url:gt.avatar_url||null,timezone:null,created_at:"",roles:[Jn],primaryRole:Jn,status:gt.is_active?"Active":"Inactive",super_agent_id:null};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-orange-50/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zr,{className:"h-8 w-8",children:i.jsx(qr,{className:"text-xs bg-orange-100 text-orange-700",children:Ll(mt.display_name||"U")})}),i.jsx("span",{className:"font-medium text-orange-600",children:mt.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:mt.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(It,{className:`text-xs ${jo(mt.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Agent (Unassigned)"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(_u,{children:[i.jsx(ku,{asChild:!0,children:i.jsxs(Z,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:mt.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${wo(mt.status)}`}),i.jsx("span",{className:"text-xs",children:mt.status}),mt.primaryRole!=="master_agent"&&i.jsx(xa,{className:"h-3 w-3"})]})}),i.jsxs(ec,{className:"bg-background border z-50",children:[i.jsx(Za,{onClick:()=>Ga(mt.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(Za,{onClick:()=>Ga(mt.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Kt,{permission:"users_profile.update_token_limit",children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Ns(mt),title:"Edit limits",children:i.jsx(ga,{className:"h-4 w-4"})})}),X(nr.MASTER_AGENT)&&i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>$l(mt),title:"View token usage",children:i.jsx(Of,{className:"h-4 w-4"})}),mt.primaryRole!=="master_agent"&&i.jsx(Kt,{permission:"super_agents.delete",children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{G(mt),F(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]},`unassigned-${gt.user_id}`)})]})})():we.map(Xe=>{const jt=Cn(Xe.role_name),ct={user_id:String(Xe.user_id),email:Xe.email||"",display_name:Xe.agent_name||Xe.email||"Unknown",avatar_url:Xe.avatar_url||null,timezone:null,created_at:"",roles:jt?[jt]:[],primaryRole:jt,status:Xe.is_active?"Active":"Inactive",super_agent_id:null},ft=String(Xe.confirmation_status||"").toLowerCase()==="expired";return i.jsxs("div",{className:`grid gap-4 p-4 items-center hover:bg-muted/30 transition-colors ${Te?"grid-cols-[240px,1fr,220px,120px,160px]":"grid-cols-[240px,1fr,220px,160px,120px,120px]"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zr,{className:"h-8 w-8",children:i.jsx(qr,{className:"text-xs",children:Ll(ct.display_name||"U")})}),i.jsx("span",{className:"font-medium",children:ct.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:ct.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(It,{className:`text-xs ${jo(ct.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:ct.primaryRole==="master_agent"?"Master Agent":ct.primaryRole==="super_agent"?"Super Agent":"Agent"})}),!Te&&i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:Te?i.jsx(It,{className:`text-xs leading-none h-6 px-2 inline-flex items-center ${ft?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:ft?"Expired":"Invited"}):i.jsxs(_u,{children:[i.jsx(ku,{asChild:!0,children:i.jsxs(Z,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:ct.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${wo(ct.status)}`}),i.jsx("span",{className:"text-xs",children:ct.status}),ct.primaryRole!=="master_agent"&&i.jsx(xa,{className:"h-3 w-3"})]})}),i.jsxs(ec,{className:"bg-background border z-50",children:[i.jsx(Za,{onClick:()=>Ga(ct.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(Za,{onClick:()=>Ga(ct.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[!Te&&i.jsx(Kt,{permission:"users_profile.update_token_limit",children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Ns(ct),title:"Edit limits",children:i.jsx(ga,{className:"h-4 w-4"})})}),X(nr.MASTER_AGENT)&&!Te&&i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>$l(ct),title:"View token usage",children:i.jsx(Of,{className:"h-4 w-4"})}),Te?i.jsxs(i.Fragment,{children:[ft&&i.jsx(Kt,{permission:"super_agents.create",children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-blue-600 hover:bg-blue-700 text-white",onClick:async()=>{try{await ne.functions.invoke("admin-create-user",{body:{email:ct.email,full_name:ct.display_name,role:ct.primaryRole||"agent",reinvite:!0}}),Y({title:"Reinvite sent",description:`${ct.email}`}),An({invited:!0,page:K,pageSize:de})}catch(rn){Y({title:"Error",description:(rn==null?void 0:rn.message)||"Failed to reinvite",variant:"destructive"})}},title:"Reinvite user",children:i.jsx(HL,{className:"h-4 w-4"})})}),ct.primaryRole!=="master_agent"&&i.jsx(Kt,{permission:"super_agents.delete",children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{G(ct),F(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]}):ct.primaryRole!=="master_agent"&&i.jsx(Kt,{permission:"super_agents.delete",children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{G(ct),F(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]},Xe.user_id)})})]}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:ht>0?i.jsxs("span",{children:["Showing ",Math.min((K-1)*de+1,ht),"",Math.min(K*de,ht)," of ",ht]}):i.jsx("span",{children:"0 results"})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx(Be,{className:"text-sm text-muted-foreground",children:"Rows"}),i.jsxs(Ut,{value:String(de),onValueChange:Xe=>rt(Number(Xe)),children:[i.jsx(Dt,{className:"h-8 w-[100px] bg-background border",children:i.jsx(Rt,{})}),i.jsxs($t,{className:"bg-background border z-50",children:[i.jsx(De,{value:"10",children:"10"}),i.jsx(De,{value:"20",children:"20"}),i.jsx(De,{value:"50",children:"50"})]})]})]}),i.jsx(Aq,{children:i.jsxs(Eq,{children:[i.jsx(hv,{children:i.jsx(Pq,{className:K<=1?"pointer-events-none opacity-50":"",onClick:()=>K>1&&Ce(K-1),href:"#"})}),i.jsx(hv,{children:i.jsxs("span",{className:"text-sm text-muted-foreground px-2",children:["Page ",K," of ",Math.max(1,Math.ceil((ht||0)/Math.max(1,de)))]})}),i.jsx(hv,{children:i.jsx(Tq,{className:K>=Math.max(1,Math.ceil((ht||0)/Math.max(1,de)))?"pointer-events-none opacity-50":"",onClick:()=>K<Math.max(1,Math.ceil((ht||0)/Math.max(1,de)))&&Ce(K+1),href:"#"})})]})})]})]})]}),Gr=async()=>{var we,ot;if(!D.name||!D.email){Y({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}if(D.role==="agent"&&!T){Y({title:"Error",description:"Please select a Super Agent for this agent",variant:"destructive"});return}try{O(!0),Rn(B);let ht=wt||null;if(!ht)try{const{data:de}=await ne.auth.getUser(),{data:Ce}=await ne.from("org_members").select("org_id").eq("user_id",((we=de==null?void 0:de.user)==null?void 0:we.id)||"").limit(1);ht=((ot=Ce==null?void 0:Ce[0])==null?void 0:ot.org_id)||null}catch{}const K=await ke({full_name:D.name,email:D.email,role:D.role,super_agent_id:D.role==="agent"&&T||null,org_id:ht});L({name:"",email:"",role:"agent"}),R(null),U(!1),t(!1),Y({title:"Success",description:"Agent created successfully"})}catch(ht){Y({title:"Error",description:ht instanceof Error?ht.message:"Failed to create agent",variant:"destructive"})}finally{O(!1)}},Dl=async we=>{var ot,ht,K;try{if((W==null?void 0:W.primaryRole)==="master_agent"||(K=(ht=(ot=re.find(de=>String(de.user_id)===we))==null?void 0:ot.role_name)==null?void 0:ht.toLowerCase)!=null&&K.call(ht).includes("master")){Y({title:"Error",description:"Master agent tidak dapat dihapus.",variant:"destructive"}),F(!1),G(null);return}A(!0),await Ft(we),Y({title:"Success",description:"Agent deleted successfully"}),F(!1),G(null),Ue==="pending"?J.length<=1&&Le>1?ge(de=>Math.max(1,de-1)):await An({invited:!0,page:Le,pageSize:bt,search:oe,role:Ke,pendingStatus:Lt}):re.length<=1&&be>1?Se(de=>Math.max(1,de-1)):await An({invited:!1,page:be,pageSize:We,search:oe,role:Ke,activeStatus:_t})}catch(de){Y({title:"Error",description:de instanceof Error?de.message:"Failed to delete agent",variant:"destructive"})}finally{A(!1)}},Ns=async we=>{try{l(we);const{data:ot,error:ht}=await ne.from("users_profile").select("token_limit_enabled, max_tokens_per_day, max_tokens_per_month, is_2fa_email_enabled").eq("user_id",we.user_id).maybeSingle();if(ht)throw ht;d({enabled:!!(ot!=null&&ot.token_limit_enabled),perDay:Number((ot==null?void 0:ot.max_tokens_per_day)??0),perMonth:Number((ot==null?void 0:ot.max_tokens_per_month)??0),twoFA:!!(ot!=null&&ot.is_2fa_email_enabled)}),r(!0)}catch(ot){Y({title:"Error",description:(ot==null?void 0:ot.message)||"Failed to load token limits",variant:"destructive"})}},xo=async()=>{if(o)try{u(!0);const{error:we}=await ne.from("users_profile").update({token_limit_enabled:f.enabled,max_tokens_per_day:Math.max(0,Math.floor(f.perDay||0)),max_tokens_per_month:Math.max(0,Math.floor(f.perMonth||0)),is_2fa_email_enabled:f.twoFA}).eq("user_id",o.user_id);if(we)throw we;Y({title:"Saved",description:"Token limits updated."}),r(!1)}catch(we){Y({title:"Error",description:(we==null?void 0:we.message)||"Failed to save token limits",variant:"destructive"})}finally{u(!1)}},yo=we=>{const ot=new Date;let ht;if(we==="this_month")ht=new Date(Date.UTC(ot.getUTCFullYear(),ot.getUTCMonth(),1,0,0,0));else{const de=we==="7d"?7:30;ht=new Date(Date.UTC(ot.getUTCFullYear(),ot.getUTCMonth(),ot.getUTCDate(),0,0,0)),ht.setUTCDate(ht.getUTCDate()-(de-1))}const K=ot;return{start:ht.toISOString(),end:K.toISOString()}},bo=async we=>{try{N(!0);const ot=b0.filter(de=>de.primaryRole==="super_agent").map(de=>de.user_id);if(ot.length===0){S({});return}let ht={};if(we==="all")try{const{data:de}=await ne.from("v_super_agent_token_usage").select("super_agent_id,total_tokens");for(const Ce of de||[]){const rt=String(Ce.super_agent_id||"");rt&&(ht[rt]=Number(Ce.total_tokens||0))}}catch{}else{const{start:de,end:Ce}=yo(we),{data:rt}=await ne.from("token_usage_logs").select("id,channel_id,total_tokens,made_at").gte("made_at",de).lt("made_at",Ce),Te=Array.from(new Set((rt||[]).map(jt=>jt.channel_id).filter(Boolean)));let lt={};if(Te.length>0){const{data:jt}=await ne.from("channels").select("id,super_agent_id").in("id",Te);lt=Object.fromEntries((jt||[]).map(ct=>[String(ct.id),String(ct.super_agent_id||"")]))}const Xe=new Set;for(const jt of rt||[]){const ct=String(jt.id);if(Xe.has(ct))continue;Xe.add(ct);const ft=String(jt.channel_id||""),rn=ft&&lt[ft]||"";rn&&(ht[rn]=(ht[rn]||0)+Number(jt.total_tokens||0))}}const K={};for(const de of ot)K[de]=ht[de]||0;S(K)}catch(ot){Y({title:"Error",description:(ot==null?void 0:ot.message)||"Failed to load usage",variant:"destructive"})}finally{N(!1)}};p.useEffect(()=>{Re.length>0&&bo(h)},[Re,h]),p.useEffect(()=>{(async()=>{var we,ot;try{const{data:ht}=await ne.auth.getUser();P(((we=ht==null?void 0:ht.user)==null?void 0:we.id)||null);try{const{data:K}=await ne.from("org_members").select("org_id").eq("user_id",((ot=ht==null?void 0:ht.user)==null?void 0:ot.id)||"").limit(1).maybeSingle();ve((K==null?void 0:K.org_id)||null)}catch{}}catch{}})()},[]),p.useEffect(()=>{I&&(An({invited:!1,page:be,pageSize:We}),Ue==="pending"&&An({invited:!0,page:Le,pageSize:bt}))},[I]);const ru=()=>X(nr.MASTER_AGENT)?Re:X(nr.SUPER_AGENT)?I?Re.filter(we=>we.primaryRole==="super_agent"&&we.user_id===I||we.primaryRole==="agent"&&we.super_agent_id===I):[]:[],b0=p.useMemo(()=>ru(),[Re,X,I]),$l=async we=>{l(we),s(!0),await _f(we.user_id,g)},_f=async(we,ot)=>{var ht;try{w(!0);const{start:K,end:de}=yo(ot),Ce=((ht=Re.find(on=>on.user_id===we))==null?void 0:ht.super_agent_id)||null,rt=Ce?Re.filter(on=>on.primaryRole==="agent"&&on.super_agent_id===Ce).map(on=>on.user_id):[we],{data:Te}=await ne.from("threads").select("id").in("assignee_user_id",rt).gte("created_at",K).lt("created_at",de),lt=(Te||[]).map(on=>on.id),[Xe,jt]=await Promise.all([lt.length>0?ne.from("token_usage_logs").select("id,total_tokens").in("thread_id",lt).gte("made_at",K).lt("made_at",de):Promise.resolve({data:[]}),ne.from("token_usage_logs").select("id,total_tokens").in("user_id",rt).gte("made_at",K).lt("made_at",de)]),ct=new Set;let ft=0;for(const on of[...Xe.data||[],...jt.data||[]]){const xn=String(on.id);ct.has(xn)||(ct.add(xn),ft+=Number(on.total_tokens||0))}y(ft);const[rn,ca,ua,vr]=await Promise.all([ne.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",K).lt("created_at",de).eq("assignee_user_id",we),ne.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",K).lt("created_at",de).eq("assigned_by_user_id",we),ne.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",K).lt("created_at",de).eq("resolved_by_user_id",we),ne.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",K).lt("created_at",de).eq("assignee_user_id",we).not("ai_handoff_at","is",null)]);k({assignedTo:rn.count||0,assignedBy:ca.count||0,resolvedBy:ua.count||0,handoverFromAI:vr.count||0})}catch(K){y(null),k(null),Y({title:"Error",description:(K==null?void 0:K.message)||"Failed to load usage",variant:"destructive"})}finally{w(!1)}},Ga=async(we,ot)=>{try{const{error:ht}=await ne.from("users_profile").update({is_active:ot==="Active"}).eq("user_id",we);if(ht)throw ht;Y({title:"Success",description:`Status changed to ${ot}`}),await ee()}catch(ht){Y({title:"Error",description:(ht==null?void 0:ht.message)||"Failed to change status",variant:"destructive"})}},Ll=we=>we.split(" ").map(ot=>ot[0]).join("").toUpperCase().slice(0,2),wo=we=>we==="Active"?"bg-green-500":"bg-gray-400",jo=we=>we==="master_agent"?"bg-blue-100 text-blue-700":we==="super_agent"?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-700";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Human Agent Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your human agents"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx(Be,{className:"text-sm text-muted-foreground",children:"Usage"}),i.jsxs(Ut,{value:h,onValueChange:async we=>{const ot=we;m(ot);try{await bo(ot)}catch{}},children:[i.jsx(Dt,{className:"h-8 w-[160px] bg-background border",children:i.jsx(Rt,{placeholder:"Range"})}),i.jsxs($t,{className:"bg-background border z-50",children:[i.jsx(De,{value:"all",children:"All time"}),i.jsx(De,{value:"7d",children:"Last 7 days"}),i.jsx(De,{value:"30d",children:"Last 30 days"}),i.jsx(De,{value:"this_month",children:"This month"})]})]})]}),i.jsx(Kt,{permission:"users_profile.create",fallback:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("span",{children:i.jsxs(Z,{className:"gap-2 bg-blue-600 text-white",disabled:!0,children:[i.jsx(vs,{className:"h-4 w-4"}),"Create Agent"]})})}),i.jsx(le,{children:i.jsx("p",{children:"You do not have permission to create agents."})})]}),children:i.jsxs(mn,{open:e,onOpenChange:t,children:[i.jsx(BN,{asChild:!0,children:i.jsxs(Z,{className:"gap-2 bg-blue-600 hover:bg-blue-700 text-white",children:[i.jsx(vs,{className:"h-4 w-4"}),"Create Agent"]})}),i.jsxs(cn,{className:"sm:max-w-md bg-background border",children:[i.jsx(un,{children:i.jsx(dn,{children:"Create New Agent"})}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"agent-name",children:["Agent Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Ve,{id:"agent-name",value:D.name,onChange:we=>L({...D,name:we.target.value}),placeholder:"Enter agent name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"agent-email",children:["Email ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Ve,{id:"agent-email",type:"email",value:D.email,onChange:we=>L({...D,email:we.target.value}),placeholder:"Enter email address"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"agent-phone",children:"Phone (Optional)"}),i.jsx(Ve,{id:"agent-phone",type:"tel",value:D.phone||"",onChange:we=>L({...D,phone:we.target.value}),placeholder:"Enter phone number"})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[i.jsx(hm,{id:"agent-2fa",checked:B,onCheckedChange:we=>U(!!we)}),i.jsx(Be,{htmlFor:"agent-2fa",className:"text-sm",children:"Enable email 2FA for this agent"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"agent-role",children:"Role"}),!X(nr.MASTER_AGENT)&&i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Hanya Master Agent yang dapat membuat Super Agent"})})]})]}),i.jsxs(Ut,{value:D.role,onValueChange:we=>L({...D,role:we}),children:[i.jsx(Dt,{className:"bg-background border",children:i.jsx(Rt,{})}),i.jsxs($t,{className:"bg-background border z-50",children:[i.jsx(De,{value:"agent",children:"Agent"}),X(nr.MASTER_AGENT)&&i.jsx(De,{value:"super_agent",children:"Super Agent"})]})]})]}),D.role==="agent"&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{children:["Attach to Super Agent ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs(Ut,{value:T||"",onValueChange:we=>R(we),children:[i.jsx(Dt,{className:"bg-background border",children:i.jsx(Rt,{placeholder:"Select Super Agent"})}),i.jsx($t,{className:"bg-background border z-50",children:Re.filter(we=>we.primaryRole==="super_agent").map(we=>i.jsx(De,{value:we.user_id,children:we.display_name||we.email},we.user_id))})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Fields marked with ",i.jsx("span",{className:"text-red-500",children:"*"})," are required."]}),D.role==="agent"&&i.jsx("p",{className:"mt-1",children:"Agents must be attached to a Super Agent."})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(Z,{onClick:Gr,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",disabled:$||!Ne,children:$?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"}),"Creating..."]}):"Create Agent"}),i.jsx(Z,{variant:"outline",onClick:()=>t(!1),className:"flex-1",disabled:$,children:"Cancel"})]})]})]})]})})]})]}),i.jsxs("div",{className:"grid gap-3 rounded-lg border bg-card p-4 md:flex md:items-center md:justify-between",children:[i.jsxs("div",{className:"relative w-full md:w-64",children:[i.jsx(hs,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Ve,{value:_e,onChange:we=>$e(we.target.value),placeholder:"Search name or email",className:"pl-9"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs(Ut,{value:Ke,onValueChange:we=>en(we),children:[i.jsx(Dt,{className:"w-[150px] bg-background border",children:i.jsx(Rt,{placeholder:"Role"})}),i.jsxs($t,{className:"bg-background border z-50",children:[i.jsx(De,{value:"all",children:"All roles"}),i.jsx(De,{value:"master_agent",children:"Master Agent"}),i.jsx(De,{value:"super_agent",children:"Super Agent"}),i.jsx(De,{value:"agent",children:"Agent"})]})]}),Ue==="pending"?i.jsxs(Ut,{value:Lt,onValueChange:we=>ze(we),children:[i.jsx(Dt,{className:"w-[150px] bg-background border",children:i.jsx(Rt,{placeholder:"Invitation status"})}),i.jsxs($t,{className:"bg-background border z-50",children:[i.jsx(De,{value:"all",children:"All invitations"}),i.jsx(De,{value:"invited",children:"Invited"}),i.jsx(De,{value:"expired",children:"Expired"})]})]}):i.jsxs(Ut,{value:_t,onValueChange:we=>ut(we),children:[i.jsx(Dt,{className:"w-[150px] bg-background border",children:i.jsx(Rt,{placeholder:"Status"})}),i.jsxs($t,{className:"bg-background border z-50",children:[i.jsx(De,{value:"all",children:"All statuses"}),i.jsx(De,{value:"active",children:"Active"}),i.jsx(De,{value:"inactive",children:"Inactive"})]})]})]})]}),i.jsxs(pl,{value:Ue,onValueChange:we=>he(we),className:"space-y-6",children:[i.jsxs(so,{className:"grid w-full max-w-md grid-cols-2",children:[i.jsxs(Gn,{value:"active",className:"gap-2",children:[i.jsx(JV,{className:"h-4 w-4"}),"Active"]}),i.jsxs(Gn,{value:"pending",className:"gap-2",children:[i.jsx(QV,{className:"h-4 w-4"}),"Pending"]})]}),i.jsx(Dn,{value:"active",className:"space-y-4",children:bi(re,te||et,z,be,We,Se,dt,!1,Ot)}),i.jsx(Dn,{value:"pending",className:"space-y-4",children:bi(J,Fe,ae,Le,bt,ge,Et,!0)})]}),i.jsx(mn,{open:C,onOpenChange:we=>{M||F(we)},children:i.jsxs(cn,{className:"sm:max-w-md bg-background border",children:[i.jsx(un,{children:i.jsx(dn,{children:"Delete Agent"})}),i.jsxs("div",{className:"space-y-3 py-2",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Are you sure you want to permanently delete ",(W==null?void 0:W.display_name)||"this agent","? This will remove their profile and role assignments. This action cannot be undone."]}),i.jsxs("div",{className:"rounded-md border p-3 bg-muted/30 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",(W==null?void 0:W.display_name)||""]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",(W==null?void 0:W.email)||""]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Role:"})," ",(W==null?void 0:W.primaryRole)||""]})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsx(Z,{variant:"destructive",className:"flex-1",onClick:()=>W&&Dl(W.user_id),disabled:M,children:M?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"}),i.jsx(Z,{variant:"outline",className:"flex-1",onClick:()=>F(!1),disabled:M,children:"Cancel"})]})]})]})}),i.jsx(mn,{open:n,onOpenChange:r,children:i.jsxs(cn,{className:"sm:max-w-md bg-background border",children:[i.jsx(un,{children:i.jsxs(dn,{children:["Token Limits",o?`  ${o.display_name||o.email}`:""]})}),i.jsxs("div",{className:"space-y-4 py-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(Be,{className:"text-sm font-medium",children:"Enable Limits"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Block token-consuming actions when exceeded."})]}),i.jsx(xl,{checked:f.enabled,onCheckedChange:we=>d({...f,enabled:!!we})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(Be,{className:"text-sm font-medium",children:"Require Email 2FA"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"User must enter a one-time code at sign-in."})]}),i.jsx(xl,{checked:f.twoFA,onCheckedChange:we=>d({...f,twoFA:!!we})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"limit-day",children:"Max Tokens / Day"}),i.jsx(Ve,{id:"limit-day",type:"number",min:0,placeholder:"0",value:f.perDay===0?"":f.perDay,onChange:we=>d({...f,perDay:Number(we.target.value||"0")})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"limit-month",children:"Max Tokens / Month"}),i.jsx(Ve,{id:"limit-month",type:"number",min:0,placeholder:"0",value:f.perMonth===0?"":f.perMonth,onChange:we=>d({...f,perMonth:Number(we.target.value||"0")})})]})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{onClick:xo,disabled:c,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:"Save"})}),i.jsx(le,{children:i.jsx("p",{children:"Simpan batas token"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"})}),i.jsx(le,{children:i.jsx("p",{children:"Batal"})})]})]})]})]})}),i.jsx(mn,{open:a,onOpenChange:s,children:i.jsxs(cn,{className:"sm:max-w-md bg-background border",children:[i.jsx(un,{children:i.jsxs(dn,{children:["Token Usage",o?`  ${o.display_name||o.email}`:""]})}),i.jsxs("div",{className:"space-y-4 py-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{children:"Timeframe"}),i.jsxs(Ut,{value:g,onValueChange:async we=>{const ot=we;v(ot),o&&await _f(o.user_id,ot)},children:[i.jsx(Dt,{className:"bg-background border",children:i.jsx(Rt,{})}),i.jsxs($t,{className:"bg-background border z-50",children:[i.jsx(De,{value:"7d",children:"Last 7 days"}),i.jsx(De,{value:"30d",children:"Last 30 days"}),i.jsx(De,{value:"this_month",children:"This month"})]})]})]}),i.jsxs("div",{className:"rounded-md border p-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tokens"}),i.jsx("div",{className:"text-2xl font-bold",children:b?"":(x==null?void 0:x.toLocaleString())??0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Assigned To Agent"}),i.jsx("div",{className:"text-xl font-semibold",children:(j==null?void 0:j.assignedTo)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Takeovers Initiated"}),i.jsx("div",{className:"text-xl font-semibold",children:(j==null?void 0:j.assignedBy)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Resolved by Agent"}),i.jsx("div",{className:"text-xl font-semibold",children:(j==null?void 0:j.resolvedBy)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"AIAgent Handovers"}),i.jsx("div",{className:"text-xl font-semibold",children:(j==null?void 0:j.handoverFromAI)??0})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"outline",onClick:()=>s(!1),children:"Close"})}),i.jsx(le,{children:i.jsx("p",{children:"Tutup"})})]})})]})]})})]})},cIe=e=>e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),TR=e=>e==="read_own"?"Own":e==="read_all"?"All":e==="read_channel_owned"?"My Channels":e==="read_collaborator"?"Collaborator":e==="read"?"Read":e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),uIe=({permissions:e,assignedPermissionIds:t,onToggle:n,isReadOnly:r=!1,className:a})=>{const[s,o]=p.useState(""),[l,c]=p.useState({}),[u,f]=p.useState(new Set),d=p.useMemo(()=>{const y={};return e.forEach(b=>{y[b.resource]||(y[b.resource]={}),y[b.resource][b.action]=b}),y},[e]),h=p.useMemo(()=>{const y=s.toLowerCase().trim();return y?Object.keys(Uu).filter(b=>b.toLowerCase().includes(y)?!0:Uu[b].some(j=>j.toLowerCase().includes(y))):Object.keys(Uu)},[s]),m=async(y,b)=>{if(!(r||u.has(y)))try{f(w=>new Set(w).add(y)),await n(y,b)}catch(w){console.error("Failed to toggle permission",w)}finally{f(w=>{const j=new Set(w);return j.delete(y),j})}},g=async(y,b)=>{if(r||l[y])return;const w=b.map(_=>{var S;return(S=d[y])==null?void 0:S[_]}).filter(_=>!!_);if(w.length===0)return;const k=!w.every(_=>t.includes(_.id));c(_=>({..._,[y]:!0}));try{const _=b.filter(L=>L==="read"||L.startsWith("read_")),S=w.filter(L=>!_.includes(L.action)),E=w.filter(L=>_.includes(L.action)),I=["read_own","read_channel_owned","read_collaborator","read_all","read"].findLast(L=>E.some(B=>B.action===L))||null,P=[];if(k){for(const L of S)t.includes(L.id)||P.push(n(L.id,!0));for(const L of E){const B=I?L.action===I:!1;t.includes(L.id)!==B&&P.push(n(L.id,B))}}else for(const L of[...S,...E])t.includes(L.id)&&P.push(n(L.id,!1));const D=5;for(let L=0;L<P.length;L+=D)await Promise.all(P.slice(L,L+D))}catch(_){console.error(`Failed to bulk toggle for ${y}`,_)}finally{c(_=>({..._,[y]:!1}))}},v=(y,b,w,j=!1)=>{var I;const k=(I=d[y])==null?void 0:I[b];if(!k)return null;const _=t.includes(k.id),S=iee(b),E=u.has(k.id)||l[y],N=w||TR(b);return i.jsxs("div",{className:xe("flex items-center justify-between p-2 rounded-md transition-colors text-sm",_?"bg-primary/5":"hover:bg-muted/50",S&&_&&"bg-red-50 dark:bg-red-950/20"),children:[i.jsx("div",{className:"flex items-center gap-2 flex-1",children:i.jsxs(Be,{htmlFor:k.id,className:xe("cursor-pointer font-medium flex items-center gap-2",S?"text-red-600 dark:text-red-400":"text-foreground"),children:[N,S&&j&&i.jsx($s,{className:"h-3 w-3 text-red-500"})]})}),i.jsx(xl,{id:k.id,checked:_,onCheckedChange:P=>m(k.id,P),disabled:r||E,className:xe(S&&_&&"data-[state=checked]:bg-red-500")})]},b)},x=(y,b)=>{const w=b.filter(E=>E==="read"||E.startsWith("read_"));if(w.length===0)return null;const k=["read_own","read_channel_owned","read_collaborator","read_all","read"].filter(E=>w.includes(E)),_=k.findLast(E=>{var I,P;const N=(P=(I=d[y])==null?void 0:I[E])==null?void 0:P.id;return N?t.includes(N):!1})||null,S=async E=>{var I,P;if(r)return;const N=[];for(const D of k){const L=(I=d[y])==null?void 0:I[D];if(!L)continue;const B=t.includes(L.id),U=E===D;B!==U&&N.push(n(L.id,U))}if(E===null)for(const D of k){const L=(P=d[y])==null?void 0:P[D];if(!L)continue;t.includes(L.id)&&N.push(n(L.id,!1))}await Promise.all(N)};return i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"inline-flex flex-wrap items-center gap-1 rounded-md border p-1 bg-muted/30",children:[i.jsx(Z,{size:"sm",variant:_===null?"default":"ghost",className:xe("h-7 text-xs"),onClick:()=>S(null),disabled:r,children:"None"}),k.map(E=>{const N=TR(E),I=y==="threads"&&(E==="read_channel_owned"||E==="read_collaborator")||y==="messages"&&E==="read_collaborator",P=y==="threads"&&E==="read_channel_owned"?"Can view threads that belong to channels assigned to this agent.":y==="threads"&&E==="read_collaborator"?"Can view threads where the user is directly involved (assignee, creator, resolver, or collaborator).":y==="messages"&&E==="read_collaborator"?"Can view messages in threads where the user is involved as collaborator or assignee.":"",D=i.jsx(Z,{size:"sm",variant:_===E?"default":"ghost",className:xe("h-7 text-xs"),onClick:()=>S(E),disabled:r,children:N},E);return I?i.jsx(O1,{children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:D}),i.jsx(le,{side:"top",children:i.jsx("div",{className:"max-w-xs text-xs",children:P})})]})},E):D})]})})};return i.jsxs("div",{className:xe("space-y-6",a),children:[i.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur pb-4 pt-2",children:i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(hs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Ve,{placeholder:"Search resources or actions...",value:s,onChange:y=>o(y.target.value),className:"pl-9 bg-background"})]})}),i.jsxs("div",{className:"columns-1 md:columns-2 xl:columns-3 gap-6 space-y-6",children:[h.map(y=>{const b=Uu[y],w=b.map(P=>{var D;return(D=d[y])==null?void 0:D[P]}).filter(Boolean);if(w.length===0)return null;const j=w.every(P=>t.includes(P==null?void 0:P.id)),k=l[y],_=b.filter(P=>{const D=pw(P);return["create","update","delete"].includes(D)}),S=b.filter(P=>pw(P)==="read"),E=b.filter(P=>pw(P)==="special"),N=S.filter(P=>P==="read"||P.startsWith("read_")),I=S.filter(P=>!N.includes(P));return i.jsx("div",{className:"break-inside-avoid mb-6",children:i.jsxs(Ae,{className:xe("h-full border-t-4 shadow-sm",j?"border-t-primary":"border-t-muted"),children:[i.jsx(tt,{className:"pb-3 bg-muted/30 pt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(Qe,{className:"text-base font-semibold flex items-center gap-2",children:[y==="security"?i.jsx(Yh,{className:"h-4 w-4 text-orange-500"}):y==="analytics"?i.jsx(hs,{className:"h-4 w-4 text-blue-500"}):i.jsx(Gs,{className:"h-4 w-4 text-muted-foreground"}),cIe(y)]}),!r&&i.jsx(Z,{variant:"ghost",size:"sm",className:"h-7 text-xs text-muted-foreground hover:text-primary",onClick:()=>g(y,b),disabled:k,children:k?"...":j?"Unselect All":"Select All"})]})}),i.jsxs(Je,{className:"pt-4 space-y-4",children:[_.length>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Manage"}),i.jsx("div",{className:"grid gap-1",children:_.map(P=>v(y,P,y==="admin_panel"&&P==="update"?"Update Settings":void 0))})]}),S.length>0&&i.jsxs("div",{className:xe(_.length>0&&"pt-2 border-t"),children:[i.jsx("div",{className:"flex items-center justify-between mb-2 mt-2",children:i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider flex items-center gap-1",children:"Access Level"})}),N.length>0&&x(y,b),I.length>0&&i.jsx("div",{className:"mt-2 grid gap-1",children:I.map(P=>v(y,P))})]}),E.length>0&&i.jsxs("div",{className:xe((_.length>0||S.length>0)&&"pt-2 border-t"),children:[i.jsx("h4",{className:"text-xs font-semibold text-orange-600/80 dark:text-orange-400/80 uppercase tracking-wider mb-2 mt-2 flex items-center gap-1",children:"Special Actions"}),i.jsx("div",{className:"grid gap-1",children:E.map(P=>{const L=v(y,P,y==="alerts"&&P==="ack"?"Acknowledge":y==="messages"&&P==="send"?"Send":void 0,!0);return y==="alerts"&&P==="ack"&&L?i.jsx(O1,{children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("div",{children:L})}),i.jsx(le,{side:"top",children:i.jsx("div",{className:"max-w-xs text-xs",children:"Mark alerts as acknowledged on behalf of this role."})})]})},P):L})})]})]})]})},y)}),h.length===0&&i.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center border-2 border-dashed rounded-lg",children:[i.jsx(hs,{className:"h-10 w-10 text-muted-foreground mb-3"}),i.jsx("h3",{className:"text-lg font-medium",children:"No matching permissions"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Try adjusting your search terms."})]})]})]})},dIe=()=>{const[e,t]=p.useState([]),[n,r]=p.useState([]),[a,s]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState(null),[f,d]=p.useState("roles"),{toast:h}=Vc(),{refreshRBAC:m,hasPermission:g,hasRole:v}=jr(),[x,y]=p.useState({}),[b,w]=p.useState(!1),[j,k]=p.useState(null),[_,S]=p.useState(""),[E,N]=p.useState(""),[I,P]=p.useState(!1),[D,L]=p.useState(!1),[B,U]=p.useState(null),[$,O]=p.useState(!1),T=(c==null?void 0:c.name)==="master_agent",R=g("roles.create"),C=g("roles.update"),F=g("roles.delete"),M=g("roles.update"),A=g("roles.update"),W=async()=>{try{l(!0);const{data:q,error:ae}=await ne.from("roles").select("*").order("name");if(ae)throw ae;t(q||[]);const{data:se,error:be}=await ne.from("permissions").select("*").order("resource",{ascending:!0});if(be)throw be;r(se||[]);const{data:Se,error:Le}=await ne.from("role_permissions").select("*");if(Le)throw Le;s(Se||[])}catch(q){console.error("Error fetching RBAC data:",q),h({title:"Error",description:"Failed to fetch permissions data",variant:"destructive"})}finally{l(!1)}};p.useEffect(()=>{W()},[]);const G=()=>{k(null),S(""),N(""),w(!0)},Y=q=>{k(q),S(q.name),N(q.description),w(!0)},H=async()=>{try{if(P(!0),j){if(!C){h({title:"Forbidden",description:"You do not have permission to update roles",variant:"destructive"});return}const{error:q}=await ne.from("roles").update({name:_,description:E}).eq("id",j.id);if(q)throw q;try{await Wt({action:"roles.update",resource:"roles",resourceId:j.id,context:{name:_}})}catch{}h({title:"Saved",description:"Role updated"})}else{if(!R){h({title:"Forbidden",description:"You do not have permission to create roles",variant:"destructive"});return}const{data:q,error:ae}=await ne.from("roles").insert([{name:_,description:E}]).select("id").single();if(ae)throw ae;try{await Wt({action:"roles.create",resource:"roles",resourceId:(q==null?void 0:q.id)??null,context:{name:_}})}catch{}h({title:"Created",description:"Role created"})}w(!1),await W()}catch{h({title:"Error",description:"Failed to save role",variant:"destructive"})}finally{P(!1)}},Q=async q=>{try{if(!F){h({title:"Forbidden",description:"You do not have permission to delete roles",variant:"destructive"});return}y(se=>({...se,[q.id]:!0})),O(!0),await ne.from("role_permissions").delete().eq("role_id",q.id),await ne.from("user_roles").delete().eq("role_id",q.id);const{error:ae}=await ne.from("roles").delete().eq("id",q.id);if(ae)throw ae;try{await Wt({action:"roles.delete",resource:"roles",resourceId:q.id})}catch{}h({title:"Deleted",description:"Role deleted"}),L(!1),U(null),await W()}catch{h({title:"Error",description:"Failed to delete role",variant:"destructive"})}finally{y(ae=>({...ae,[q.id]:!1})),O(!1)}},X=(q,ae)=>a.some(se=>se.role_id===q&&se.permission_id===ae),re=p.useRef(null),fe=()=>{re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{m().catch(()=>{})},250)},J=async(q,ae)=>{try{const se=X(q,ae),be=`${q}:${ae}`;if(y(Se=>({...Se,[be]:!0})),se){if(!A){h({title:"Forbidden",description:"You do not have permission to revoke role permissions",variant:"destructive"});return}const{error:Se}=await ne.rpc("revoke_role_permission",{p_role:q,p_perm:ae});if(Se)throw Se;s(Le=>Le.filter(ge=>!(ge.role_id===q&&ge.permission_id===ae)));try{await Wt({action:"rbac.revoke",resource:"rbac",context:{role_id:q,permission_id:ae}})}catch{}}else{if(!M){h({title:"Forbidden",description:"You do not have permission to grant role permissions",variant:"destructive"});return}const{error:Se}=await ne.rpc("grant_role_permission",{p_role:q,p_perm:ae});if(Se)throw Se;s(Le=>[...Le,{role_id:q,permission_id:ae}]);try{await Wt({action:"rbac.grant",resource:"rbac",context:{role_id:q,permission_id:ae}})}catch{}}fe(),h({title:"Success",description:`Permission ${se?"removed from":"added to"} role`})}catch(se){console.error("Error updating role permission:",se),h({title:"Error",description:"Failed to update permission",variant:"destructive"})}finally{const se=`${q}:${ae}`;y(be=>({...be,[se]:!1}))}},ye=q=>a.filter(se=>se.role_id===q).length,z=q=>q.replace("_"," ").toUpperCase();return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Role Permissions"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage role permissions"})]}),i.jsx(Kt,{permission:"roles.create",children:i.jsxs(Z,{onClick:G,children:[i.jsx(vs,{className:"h-4 w-4 mr-2"})," New Role"]})})]}),i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Gs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4 animate-pulse"}),i.jsx("p",{className:"text-muted-foreground",children:"Loading roles..."})]})})]}):f==="roles"?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Role Permissions"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage role permissions"})]}),i.jsxs(Z,{onClick:G,disabled:!R,title:R?void 0:"No permission: roles.create",children:[i.jsx(vs,{className:"h-4 w-4 mr-2"})," New Role"]})]}),i.jsxs(Ae,{className:"pt-2",children:[i.jsxs(tt,{children:[i.jsx(Qe,{children:"Roles"}),i.jsx(di,{children:"Click on a role to manage its permissions"})]}),i.jsx(Je,{children:i.jsxs(xb,{children:[i.jsx(yb,{children:i.jsxs(zs,{children:[i.jsx(Wn,{children:"Role Name"}),i.jsx(Wn,{children:"Description"}),i.jsx(Wn,{children:"Permissions"}),i.jsx(Wn,{children:"Actions"})]})}),i.jsx(bb,{children:e.map(q=>i.jsxs(zs,{children:[i.jsx(Mn,{className:"font-medium",children:i.jsx(It,{variant:"outline",children:z(q.name)})}),i.jsx(Mn,{children:q.description}),i.jsx(Mn,{children:i.jsxs(It,{variant:"secondary",children:[ye(q.id)," permissions"]})}),i.jsx(Mn,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kt,{permission:"roles.read",children:i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>{u(q),d("configure")},children:[i.jsx(Ks,{className:"h-4 w-4 mr-2"}),"Configure"]})}),i.jsx(le,{children:i.jsx("p",{children:"Konfigurasi aturan akses untuk peran ini"})})]})}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Kt,{permission:"roles.update",children:i.jsx(Z,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Y(q),"aria-label":"Edit role",children:i.jsx(ga,{className:"h-4 w-4"})})})}),i.jsx(le,{children:i.jsx("p",{children:"Edit peran ini"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Kt,{permission:"roles.delete",children:i.jsx(Z,{size:"sm",onClick:()=>{U(q),L(!0)},disabled:!!x[q.id],className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white","aria-label":"Delete role",children:i.jsx(Ar,{className:"h-4 w-4"})})})}),i.jsx(le,{children:i.jsx("p",{children:"Hapus peran ini"})})]})]})})]},q.id))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ae,{children:[i.jsxs(tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Qe,{className:"text-sm font-medium",children:"Total Roles"}),i.jsx(Gs,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),i.jsxs(Ae,{children:[i.jsxs(tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Qe,{className:"text-sm font-medium",children:"Total Permissions"}),i.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-bold",children:n.length})})]}),i.jsxs(Ae,{children:[i.jsxs(tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Qe,{className:"text-sm font-medium",children:"Resources"}),i.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-2xl font-bold",children:new Set(n.map(q=>q.resource)).size}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique resources"})]})]})]}),i.jsx(Kt,{permission:"roles.update",children:i.jsx(mn,{open:b,onOpenChange:w,children:i.jsxs(cn,{children:[i.jsx(un,{children:i.jsx(dn,{children:j?"Edit Role":"Create Role"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(Be,{htmlFor:"rname",children:"Name"}),i.jsx(Ve,{id:"rname",value:_,onChange:q=>S(q.target.value),placeholder:"e.g. Super Agent"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Be,{htmlFor:"rdesc",children:"Description"}),i.jsx(Ve,{id:"rdesc",value:E,onChange:q=>N(q.target.value),placeholder:"Optional"})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[i.jsx(Z,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),i.jsx(Z,{onClick:H,disabled:I||!_.trim()||(j?!C:!R),title:j?C?void 0:"No permission: roles.update":R?void 0:"No permission: roles.create",children:I?"Saving":"Save"})]})]})]})})}),i.jsx(Kt,{permission:"roles.delete",children:i.jsx(mn,{open:D,onOpenChange:L,children:i.jsxs(cn,{children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Delete Role"}),i.jsxs(Er,{children:["This will permanently delete the role",B?` "${z(B.name)}"`:""," and all its permissions."]})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[i.jsx(Z,{variant:"outline",onClick:()=>L(!1),disabled:$,children:"Cancel"}),i.jsx(Z,{variant:"destructive",onClick:()=>B&&Q(B),disabled:$||!F,title:F?void 0:"No permission: roles.delete",children:$?"Deleting":"Delete"})]})]})})})]}):f==="configure"&&c?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx(Z,{variant:"ghost",onClick:()=>d("roles"),className:"mb-2",children:" Back to Roles"}),i.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Configure ",z(c.name)]}),i.jsx("p",{className:"text-muted-foreground",children:c.description})]})}),T&&i.jsx(Ae,{children:i.jsxs(tt,{children:[i.jsx(Qe,{children:"Root Role"}),i.jsx(di,{children:"Master Agent is a root role with full privileges across the system."})]})}),i.jsxs("div",{className:"py-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Full Permission Matrix"}),i.jsx(uIe,{permissions:n,assignedPermissionIds:a.filter(q=>q.role_id===c.id).map(q=>q.permission_id),onToggle:async(q,ae)=>{X(c.id,q)!==ae&&await J(c.id,q)},isReadOnly:!M&&!A})]})]}):null},fIe={maxSize:100,dedupeWindow:1e3,batchWindow:100,maxBatchSize:10};class hIe{constructor(t={}){zt(this,"queue",[]);zt(this,"processing",!1);zt(this,"pendingRequests",new Map);zt(this,"config");this.config={...fIe,...t}}async enqueue(t,n={operation:"read"}){const{operation:r="read",endpoint:a,priority:s=0,dedupeKey:o}=n,l=o||this.generateDedupeKey(t,a),c=this.pendingRequests.get(l);if(c)return c;if(this.queue.length>=this.config.maxSize){this.queue.sort((g,v)=>v.priority-g.priority);const m=this.queue.pop();m&&m.reject(new Error("Request queue full"))}let u,f;const d=new Promise((m,g)=>{u=m,f=g});this.pendingRequests.set(l,d);const h={id:l,fn:t,priority:s,timestamp:Date.now(),operation:r,endpoint:a,resolve:u,reject:f};return this.queue.push(h),this.queue.sort((m,g)=>g.priority-m.priority),this.processQueue(),d.finally(()=>{this.pendingRequests.delete(l)}),d}async processQueue(){if(!(this.processing||this.queue.length===0)){this.processing=!0;try{for(;this.queue.length>0;){const t=this.getBatch();if(t.length===1){const n=t[0];try{const r=await n.fn();n.resolve(r)}catch(r){n.reject(r)}}else await Promise.allSettled(t.map(async n=>{try{const r=await n.fn();n.resolve(r)}catch(r){n.reject(r)}}))}}finally{this.processing=!1}}}getBatch(){if(this.queue.length===0)return[];const t=Date.now(),n=[],r=this.queue[0];for(let a=0;a<this.queue.length&&n.length<this.config.maxBatchSize;a++){const s=this.queue[a],o=t-s.timestamp;s.operation===r.operation&&o<=this.config.batchWindow&&(!r.endpoint||s.endpoint===r.endpoint)&&n.push(s)}return n.forEach(a=>{const s=this.queue.findIndex(o=>o.id===a.id);s>=0&&this.queue.splice(s,1)}),n}generateDedupeKey(t,n){return`${t.toString()}:${n||""}`.slice(0,100)}debounce(t,n=300,r={}){return new Promise((a,s)=>{let o=null,l=Date.now();const c=async()=>{try{const f=await this.enqueue(t,{...r,dedupeKey:`debounce:${r.endpoint||"default"}`});a(f)}catch(f){s(f)}},u=()=>{o&&clearTimeout(o),o=setTimeout(()=>{Date.now()-l>=n?c():u()},n)};u()})}getStats(){return{queueLength:this.queue.length,pendingRequests:this.pendingRequests.size,processing:this.processing}}clear(){this.queue.forEach(t=>{t.reject(new Error("Queue cleared"))}),this.queue=[],this.pendingRequests.clear()}}const OR=new hIe,IR=["#60a5fa","#2563eb","#1d4ed8","#10b981","#f59e0b","#ef4444"],Qa=({label:e,description:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:t})})]})]});function mIe(){const[e,t]=p.useState(Jt.getStats()),[n,r]=p.useState(null),[a,s]=p.useState(OR.getStats()),[o,l]=p.useState(li.getStats()),[c,u]=p.useState(0),{hasPermission:f}=jr(),[d,h]=p.useState(!1),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,b]=p.useState(!1),[w,j]=p.useState(!1),[k,_]=p.useState(!1),[S,E]=p.useState(!1),[N,I]=p.useState(!1),[P,D]=p.useState(""),[L,B]=p.useState(Jt.getConfig()),[U,$]=p.useState(Jt.getConfig()),[O,T]=p.useState(Mt.getConfig()),[R,C]=p.useState(Mt.getConfig()),[F,M]=p.useState({read:Mt.getMultiplier("read"),write:Mt.getMultiplier("write"),rpc:Mt.getMultiplier("rpc"),auth:Mt.getMultiplier("auth")});f("admin_panel.update"),p.useEffect(()=>{const se=setInterval(()=>{t(Jt.getStats()),s(OR.getStats()),l(li.getStats()),B(Jt.getConfig()),T(Mt.getConfig()),M({read:Mt.getMultiplier("read"),write:Mt.getMultiplier("write"),rpc:Mt.getMultiplier("rpc"),auth:Mt.getMultiplier("auth")})},1e3),be=()=>{t(Jt.getStats()),u(Se=>Se+1)};return Jt.on("stateChange",be),Jt.on("failure",be),Jt.on("success",be),A(),()=>{clearInterval(se),Jt.off(be)}},[]);const A=async()=>{try{const se=await _F();r(se)}catch(se){console.error("Failed to load metrics:",se)}},W=se=>{switch(se){case Kl.CLOSED:return"bg-green-100 text-green-800 border-green-200";case Kl.OPEN:return"bg-red-100 text-red-800 border-red-200";case Kl.HALF_OPEN:return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},G=se=>{switch(se){case Kl.CLOSED:return i.jsx(ih,{className:"h-5 w-5 text-green-600"});case Kl.OPEN:return i.jsx($s,{className:"h-5 w-5 text-red-600"});case Kl.HALF_OPEN:return i.jsx(cP,{className:"h-5 w-5 text-yellow-600"});default:return null}},Y=()=>{h(!0)},H=()=>{Jt.reset(),t(Jt.getStats()),u(se=>se+1),h(!1),D(" Circuit breaker berhasil direset!"),E(!0)},Q=()=>{g(!0)},X=()=>{Jt.open(),t(Jt.getStats()),u(se=>se+1),g(!1),D(" Circuit breaker telah dibuka! Semua request database akan diblokir."),E(!0)},re=()=>{x(!0)},fe=async()=>{try{await im.forceFlush(),x(!1),D(" Metrik berhasil dikirim ke database!"),E(!0)}catch(se){x(!1),D(" Gagal mengirim metrik: "+(se instanceof Error?se.message:"Unknown error")),I(!0)}},J=()=>{$(Jt.getConfig()),b(!0)},ye=()=>{Jt.updateConfig(U),B(Jt.getConfig()),b(!1),D(" Konfigurasi circuit breaker berhasil diperbarui!"),E(!0)},z=()=>{C(Mt.getConfig()),j(!0)},q=()=>{Mt.updateConfig(R),T(Mt.getConfig()),M({read:Mt.getMultiplier("read"),write:Mt.getMultiplier("write"),rpc:Mt.getMultiplier("rpc"),auth:Mt.getMultiplier("auth")}),j(!1),D(" Konfigurasi adaptive rate limiter berhasil diperbarui!"),E(!0)},ae=e.totalRequests>0?((e.totalRequests-e.failures)/e.totalRequests*100).toFixed(1):"0";return Array.from({length:10},(se,be)=>({time:new Date(Date.now()-(9-be)*6e4).toLocaleTimeString(),requests:Math.floor(Math.random()*50)+10,failures:Math.floor(Math.random()*5)})),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold",children:"Circuit Breaker Status"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor database protection and performance"})]}),i.jsxs(Z,{variant:"outline",size:"sm",onClick:A,children:[i.jsx(Ay,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Circuit State",description:"Status circuit breaker saat ini: CLOSED (normal, semua request diizinkan), OPEN (terhenti, memblokir semua request untuk melindungi database), atau HALF_OPEN (testing, mencoba menghubungkan kembali)"})})}),i.jsxs(Je,{children:[i.jsxs("div",{className:`flex items-center gap-3 px-3 py-2 rounded-md border ${W(e.state)}`,children:[G(e.state),i.jsx("span",{className:"font-semibold",children:e.state})]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Changed: ",new Date(e.stateChangedAt).toLocaleTimeString()]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Success Rate",description:"Persentase request database yang berhasil dari total request. Indikator kesehatan sistem - semakin tinggi semakin baik. Nilai rendah menunjukkan masalah potensial dengan database atau koneksi"})})}),i.jsxs(Je,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[ae,"%"]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.totalRequests-e.failures," / ",e.totalRequests," requests"]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Total Requests",description:"Jumlah total request database yang telah diproses sejak circuit breaker diinisialisasi. Termasuk request yang berhasil dan gagal"})})}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:e.totalRequests.toLocaleString()}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.failures," failures, ",e.successes," successes"]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Last Activity",description:"Waktu terakhir request database berhasil atau gagal. Membantu mengidentifikasi kapan masalah terakhir terjadi atau kapan sistem terakhir berfungsi normal"})})}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-sm",children:e.lastSuccessTime?i.jsxs("div",{children:[i.jsx("span",{className:"text-green-600",children:"Last Success:"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.lastSuccessTime).toLocaleTimeString()})]}):null}),i.jsx("div",{className:"text-sm mt-2",children:e.lastFailureTime?i.jsxs("div",{children:[i.jsx("span",{className:"text-red-600",children:"Last Failure:"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.lastFailureTime).toLocaleTimeString()})]}):null})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(mP,{className:"h-4 w-4"}),i.jsx(Qa,{label:"Request Queue",description:"Antrian request database yang menunggu untuk diproses. Membantu menangani beban tinggi dengan mengatur prioritas dan menghindari duplikasi request"})]})}),i.jsx(Je,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Queue Length:",i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Jumlah total request dalam antrian, termasuk yang menunggu dan sedang diproses"})})]}),i.jsx("span",{className:"font-semibold",children:a.queueLength})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Pending Requests:",i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Jumlah request yang menunggu untuk diproses, belum dieksekusi"})})]}),i.jsx("span",{className:"font-semibold",children:a.pendingRequests})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Processing:",i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Status apakah queue sedang memproses request atau idle"})})]}),i.jsx(It,{variant:a.processing?"default":"secondary",children:a.processing?"Yes":"No"})]})]})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Gs,{className:"h-4 w-4"}),i.jsx(Qa,{label:"Rate Limiter (Adaptive)",description:"Sistem pembatas kecepatan request adaptif yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem. Melindungi database dari traffic spike dan overload"})]})}),i.jsxs(Je,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Reads Limit:",i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(le,{children:i.jsxs("p",{children:["Batas maksimal request baca data per menit (dinamis: ",Mt.getEffectiveLimit("read")," request/menit, ",(F.read*100).toFixed(0),"% dari base ",O.baseConfig.read.limit,"). Limit menyesuaikan otomatis berdasarkan kondisi sistem"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Mt.getEffectiveLimit("read"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(F.read*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Writes Limit:",i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(le,{children:i.jsxs("p",{children:["Batas maksimal request tulis data per menit (dinamis: ",Mt.getEffectiveLimit("write")," request/menit, ",(F.write*100).toFixed(0),"% dari base ",O.baseConfig.write.limit,"). Lebih ketat dari reads karena write lebih berisiko terhadap database"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Mt.getEffectiveLimit("write"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(F.write*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["RPC Limit:",i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(le,{children:i.jsxs("p",{children:["Batas maksimal panggilan fungsi database (RPC) per menit (dinamis: ",Mt.getEffectiveLimit("rpc")," request/menit, ",(F.rpc*100).toFixed(0),"% dari base ",O.baseConfig.rpc.limit,"). Fungsi database biasanya lebih berat dari query biasa"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Mt.getEffectiveLimit("rpc"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(F.rpc*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Auth Limit:",i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(le,{children:i.jsxs("p",{children:["Batas maksimal operasi autentikasi per menit (dinamis: ",Mt.getEffectiveLimit("auth")," request/menit, ",(F.auth*100).toFixed(0),"% dari base ",O.baseConfig.auth.limit,")"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Mt.getEffectiveLimit("auth"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(F.auth*100).toFixed(0),"%)"]})]})]})]}),i.jsx("div",{className:"mt-3 pt-3 border-t text-xs text-muted-foreground",children:i.jsx("p",{children:" Limit berubah otomatis berdasarkan response time dan error rate sistem"})})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Z0,{className:"h-4 w-4"}),i.jsx(Qa,{label:"Cache",description:"Sistem penyimpanan sementara untuk hasil query database. Mengurangi beban database dengan menyimpan hasil yang sering digunakan dan meningkatkan kecepatan response"})]})}),i.jsx(Je,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Cached Entries:",i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Jumlah hasil query yang saat ini tersimpan di cache. Semakin banyak semakin baik untuk performa, selama tidak melebihi batas maksimal"})})]}),i.jsx("span",{className:"font-semibold",children:o.size})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Max Size:",i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(le,{children:i.jsx("p",{children:"Batas maksimal jumlah entry yang bisa disimpan di cache. Setelah mencapai limit, entry lama akan dihapus (LRU policy)"})})]}),i.jsx("span",{className:"font-semibold",children:o.maxSize})]}),i.jsx(Z,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>{li.clear(),l(li.getStats())},children:"Clear Cache"})]})})]})]}),n&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Operations by Type",description:"Distribusi operasi database berdasarkan jenis (read, write, RPC, auth). Membantu memahami pola penggunaan database dan mengidentifikasi jenis operasi yang paling banyak digunakan"})})}),i.jsx(Je,{className:"h-64",children:i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:Object.entries(n.operationsByType||{}).map(([se,be])=>({type:se,count:be})),children:[i.jsx(Nk,{strokeDasharray:"3 3"}),i.jsx(Qr,{dataKey:"type"}),i.jsx(Zr,{}),i.jsx(Qn,{}),i.jsx(Fn,{dataKey:"count",fill:IR[1]})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Circuit Breaker States",description:"Distribusi status circuit breaker saat operasi database dilakukan. Menunjukkan berapa banyak operasi yang terjadi pada setiap state (CLOSED, OPEN, HALF_OPEN)"})})}),i.jsx(Je,{className:"h-64",children:i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:Object.entries(n.circuitBreakerStates||{}).map(([se,be])=>({state:se,count:be})),children:[i.jsx(Nk,{strokeDasharray:"3 3"}),i.jsx(Qr,{dataKey:"state"}),i.jsx(Zr,{}),i.jsx(Qn,{}),i.jsx(Fn,{dataKey:"count",fill:IR[3]})]})})})]})]}),i.jsxs(Kt,{permission:"admin_panel.update",children:[i.jsxs(Ae,{className:"mb-4",children:[i.jsx(tt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Limit Configuration",description:"Konfigurasi threshold dan timeout untuk circuit breaker. Klik Edit untuk mengubah nilai-nilai ini"})}),i.jsxs(Z,{variant:"outline",size:"sm",onClick:J,children:[i.jsx(ga,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),i.jsx(Je,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Failure Threshold"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsxs("p",{children:["Buka circuit setelah ",L.failureThreshold," kegagalan"]})})]})]}),i.jsx(Ve,{value:L.failureThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Buka circuit setelah ",L.failureThreshold," kegagalan"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Reset Timeout (ms)"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsxs("p",{children:["Tunggu ",(L.resetTimeout/1e3).toFixed(0),"s sebelum uji pemulihan"]})})]})]}),i.jsx(Ve,{value:L.resetTimeout,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tunggu ",(L.resetTimeout/1e3).toFixed(0),"s sebelum uji pemulihan"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Success Threshold"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsxs("p",{children:["Tutup circuit setelah ",L.successThreshold," sukses"]})})]})]}),i.jsx(Ve,{value:L.successThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tutup circuit setelah ",L.successThreshold," sukses"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Monitoring Period (ms)"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsxs("p",{children:["Jendela waktu: ",(L.monitoringPeriod/1e3).toFixed(0),"s"]})})]})]}),i.jsx(Ve,{value:L.monitoringPeriod,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Jendela waktu: ",(L.monitoringPeriod/1e3).toFixed(0),"s"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Request Timeout (ms)"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsxs("p",{children:["Timeout request: ",(L.timeout/1e3).toFixed(0),"s"]})})]})]}),i.jsx(Ve,{value:L.timeout,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Timeout request: ",(L.timeout/1e3).toFixed(0),"s"]})]})]})})]}),i.jsxs(Ae,{className:"mb-4",children:[i.jsx(tt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Adaptive Rate Limiter Configuration",description:"Konfigurasi untuk adaptive rate limiter yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem. Menangani traffic spike dengan lebih baik"})}),i.jsxs(Z,{variant:"outline",size:"sm",onClick:z,children:[i.jsx(ga,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),i.jsxs(Je,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Reads Base Limit"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Limit dasar untuk operasi read. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Ve,{value:O.baseConfig.read.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Mt.getEffectiveLimit("read"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(F.read*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Writes Base Limit"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Limit dasar untuk operasi write. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Ve,{value:O.baseConfig.write.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Mt.getEffectiveLimit("write"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(F.write*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"RPC Base Limit"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Limit dasar untuk operasi RPC. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Ve,{value:O.baseConfig.rpc.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Mt.getEffectiveLimit("rpc"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(F.rpc*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Auth Base Limit"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Limit dasar untuk operasi autentikasi. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Ve,{value:O.baseConfig.auth.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Mt.getEffectiveLimit("auth"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(F.auth*100).toFixed(0),"%)"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Min Multiplier"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Multiplier minimum (misal: 0.5 = 50% dari base limit). Digunakan saat sistem dalam kondisi stres"})})]})]}),i.jsx(Ve,{value:O.minMultiplier,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Minimum: ",(O.minMultiplier*100).toFixed(0),"% dari base"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Max Multiplier"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Multiplier maksimum (misal: 2.0 = 200% dari base limit). Digunakan saat sistem dalam kondisi sehat"})})]})]}),i.jsx(Ve,{value:O.maxMultiplier,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum: ",(O.maxMultiplier*100).toFixed(0),"% dari base"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Adjustment Interval (ms)"}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Frekuensi pengecekan dan penyesuaian limit (dalam milliseconds)"})})]})]}),i.jsx(Ve,{value:O.adjustmentInterval,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Setiap ",(O.adjustmentInterval/1e3).toFixed(0)," detik"]})]})]}),i.jsx("div",{className:"mt-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:[" ",i.jsx("strong",{children:"Status:"})," Adaptive rate limiter aktif dan melindungi database. Limit akan otomatis menyesuaikan berdasarkan metrik sistem (response time, error rate)."]})})]})]}),i.jsx(Ae,{className:"mb-4 bg-blue-50 dark:bg-blue-950/10 border-blue-200 dark:border-blue-800",children:i.jsx(tt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[i.jsx(ov,{className:"h-5 w-5"}),"Dokumentasi Circuit Breaker"]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pelajari cara kerja circuit breaker dan apa yang harus dilakukan jika terjadi masalah"})]}),i.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>_(!0),children:[i.jsx(ov,{className:"h-4 w-4 mr-2"}),"Lihat Dokumentasi Circuit Breaker"]})]})})}),i.jsxs(Ae,{className:"border-red-200 dark:border-red-800",children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2 text-red-600 dark:text-red-400",children:[i.jsx(FL,{className:"h-5 w-5"}),i.jsx(Qa,{label:"Danger Zone",description:"Tindakan berbahaya yang dapat mempengaruhi seluruh aplikasi. Gunakan dengan sangat hati-hati!"})]})}),i.jsxs(Je,{children:[i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"outline",onClick:Y,children:"Reset Circuit Breaker"})}),i.jsx(le,{children:i.jsx("p",{children:"Reset semua statistik dan state circuit breaker ke kondisi awal. Menghapus riwayat kegagalan dan mengembalikan state ke CLOSED"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"destructive",onClick:Q,children:"Manually Open Circuit"})}),i.jsx(le,{children:i.jsx("p",{children:"Paksa buka circuit breaker secara manual. Akan MEMBLOKIR SEMUA REQUEST DATABASE dan menyebabkan aplikasi berhenti berfungsi. Gunakan hanya dalam keadaan darurat!"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Z,{variant:"outline",onClick:re,children:"Flush Metrics"})}),i.jsx(le,{children:i.jsx("p",{children:"Kirim semua metrik yang tertunda ke database secara paksa. Tidak berbahaya, hanya memperbarui data metrik di Supabase"})})]})]}),i.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-red-700 dark:text-red-300 font-semibold",children:[" ",i.jsx("strong",{children:"PERINGATAN KRITIS:"})," Tindakan di zona ini dapat menghentikan seluruh aplikasi dan memblokir semua operasi database. Gunakan dengan sangat hati-hati dan hanya jika benar-benar diperlukan!"]})})]})]})]}),i.jsx(mn,{open:d,onOpenChange:h,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsxs(un,{children:[i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx($s,{className:"h-5 w-5 text-orange-500"}),"Reset Circuit Breaker"]}),i.jsx(Er,{children:"Apakah Anda yakin ingin mereset circuit breaker?"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-orange-800 dark:text-orange-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-orange-700 dark:text-orange-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Menghapus semua statistik circuit breaker"}),i.jsx("li",{children:"Mereset state ke CLOSED"}),i.jsx("li",{children:"Menghapus riwayat kegagalan"})]}),i.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-3 font-semibold",children:" Tindakan ini TIDAK DAPAT DIBATALKAN!"})]})}),i.jsxs(ma,{children:[i.jsx(Z,{variant:"outline",onClick:()=>h(!1),children:"Batal"}),i.jsx(Z,{variant:"default",onClick:H,children:"Reset"})]})]})}),i.jsx(mn,{open:m,onOpenChange:g,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsxs(un,{children:[i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx($s,{className:"h-5 w-5 text-red-500"}),"Buka Circuit Breaker Secara Manual"]}),i.jsx(Er,{children:"PERINGATAN KRITIS: Tindakan ini sangat berbahaya!"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-red-800 dark:text-red-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-red-700 dark:text-red-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:i.jsx("strong",{children:"MENGHENTIKAN SEMUA REQUEST DATABASE"})}),i.jsx("li",{children:"Memblokir semua operasi aplikasi"}),i.jsx("li",{children:"Menyebabkan error pada semua fitur yang membutuhkan database"})]}),i.jsxs("div",{className:"mt-3 bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded p-2",children:[i.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 font-semibold",children:" APLIKASI AKAN BERHENTI BERFUNGSI!"}),i.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"Gunakan hanya dalam keadaan darurat atau untuk testing."})]})]})}),i.jsxs(ma,{children:[i.jsx(Z,{variant:"outline",onClick:()=>g(!1),children:"Batal"}),i.jsx(Z,{variant:"destructive",onClick:X,children:"Buka Circuit"})]})]})}),i.jsx(mn,{open:v,onOpenChange:x,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsxs(un,{children:[i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx(Z0,{className:"h-5 w-5 text-blue-500"}),"Kirim Metrik ke Database"]}),i.jsx(Er,{children:"Apakah Anda yakin ingin mengirim semua metrik yang tertunda?"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-blue-800 dark:text-blue-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Mengirim semua metrik yang tersimpan di memori ke Supabase"}),i.jsx("li",{children:"Memperbarui tabel circuit_breaker_metrics"}),i.jsx("li",{children:"Menghapus metrik dari antrian lokal"})]})]})}),i.jsxs(ma,{children:[i.jsx(Z,{variant:"outline",onClick:()=>x(!1),children:"Batal"}),i.jsx(Z,{variant:"default",onClick:fe,children:"Kirim Metrik"})]})]})}),i.jsx(mn,{open:S,onOpenChange:E,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsx(un,{children:i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx(ih,{className:"h-5 w-5 text-green-500"}),"Berhasil"]})}),i.jsx("div",{className:"py-4",children:i.jsx("p",{className:"text-sm",children:P})}),i.jsx(ma,{children:i.jsx(Z,{variant:"default",onClick:()=>E(!1),children:"Tutup"})})]})}),i.jsx(mn,{open:k,onOpenChange:_,children:i.jsxs(cn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(un,{children:[i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx(ov,{className:"h-5 w-5 text-blue-500"}),"Dokumentasi Circuit Breaker"]}),i.jsx(Er,{children:"Panduan lengkap tentang cara kerja circuit breaker dan langkah-langkah troubleshooting"})]}),i.jsxs("div",{className:"py-4 space-y-6",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Gs,{className:"h-5 w-5 text-blue-600"}),"Apa itu Circuit Breaker?"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-2",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Circuit Breaker"})," adalah mekanisme perlindungan yang mencegah kegagalan sistem database merambat ke seluruh aplikasi. Seperti sekring listrik, circuit breaker akan memutuskan koneksi sementara ketika mendeteksi terlalu banyak kegagalan, sehingga memberikan waktu untuk sistem pulih dan mencegah beban berlebih."]}),i.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"Melindungi database dari beban berlebih dan kegagalan cascade"}),i.jsx("li",{children:"Mengurangi risiko aplikasi crash saat database bermasalah"}),i.jsx("li",{children:"Memberikan waktu recovery otomatis untuk sistem"}),i.jsx("li",{children:"Monitoring dan pelaporan metrik untuk analisis"})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ga,{className:"h-5 w-5 text-blue-600"}),"Penjelasan Detail Setiap Input Circuit Breaker"]}),i.jsx("div",{className:"space-y-4",children:i.jsx("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:i.jsxs("div",{className:"text-sm space-y-4 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"1. Failure Threshold (Ambang Kegagalan)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jumlah maksimal kegagalan yang dapat terjadi dalam jendela waktu monitoring sebelum circuit breaker terbuka (OPEN)."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Failure Threshold: ",L.failureThreshold]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 5 kegagalan (range: 1 - 100)",i.jsx("br",{})," Sistem akan menghitung jumlah kegagalan dalam jendela waktu ",(L.monitoringPeriod/1e3).toFixed(0)," detik",i.jsx("br",{})," Jika mencapai ",L.failureThreshold," kegagalan atau lebih  Circuit breaker akan ",i.jsx("strong",{children:"OPEN"})," (blokir semua request)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah kegagalan cascade dengan memblokir request sebelum sistem benar-benar crash",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu rendah (1-3): Circuit breaker terlalu sensitif, sering terbuka karena error sementara",i.jsx("br",{}),"- Nilai terlalu tinggi (20+): Circuit breaker kurang responsif, database bisa overload sebelum terbuka",i.jsx("br",{}),"- Rekomendasi: 5-10 untuk aplikasi production, 3-5 untuk aplikasi kritis",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Jika threshold = ",L.failureThreshold,", dan terjadi ",L.failureThreshold," timeout/error dalam ",(L.monitoringPeriod/1e3).toFixed(0)," detik terakhir  Circuit OPEN"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"2. Reset Timeout (Waktu Tunggu Reset)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Waktu yang harus ditunggu setelah circuit breaker OPEN sebelum mencoba uji pemulihan (transisi ke HALF_OPEN)."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Reset Timeout: ",(L.resetTimeout/1e3).toFixed(0)," detik (",L.resetTimeout,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 30 detik (30000ms, range: 5s - 600s)",i.jsx("br",{})," Setelah circuit OPEN, sistem akan menunggu ",L.resetTimeout/1e3," detik sebelum mencoba uji pemulihan",i.jsx("br",{})," Setelah timeout, circuit breaker akan transisi ke ",i.jsx("strong",{children:"HALF_OPEN"})," (mengizinkan beberapa request terbatas untuk testing)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memberi waktu database untuk recovery sebelum mengizinkan request lagi",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (5-10s): Tidak cukup waktu untuk recovery, circuit langsung terbuka lagi",i.jsx("br",{}),"- Nilai terlalu panjang (300s+): Aplikasi terlalu lama tidak bisa digunakan",i.jsx("br",{}),"- Rekomendasi: 30-60 detik untuk masalah network sementara, 60-120 detik untuk masalah database serius",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Circuit OPEN  Tunggu ",L.resetTimeout/1e3," detik  Uji dengan ",L.successThreshold," request terbatas  Jika semua sukses, kembali CLOSED"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"3. Success Threshold (Ambang Keberhasilan)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jumlah minimal request yang harus berhasil berturut-turut dalam fase HALF_OPEN sebelum circuit breaker kembali CLOSED."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Success Threshold: ",L.successThreshold]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 2 sukses berturut-turut (range: 1 - 10)",i.jsx("br",{})," Setelah circuit HALF_OPEN (uji pemulihan), sistem akan mengizinkan beberapa request terbatas",i.jsx("br",{})," Jika ",L.successThreshold," request berhasil berturut-turut  Circuit breaker akan ",i.jsx("strong",{children:"CLOSED"})," (kembali normal)",i.jsx("br",{})," Jika ada 1 request gagal  Circuit breaker kembali ",i.jsx("strong",{children:"OPEN"})," (tunggu reset timeout lagi)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memastikan sistem benar-benar pulih sebelum mengizinkan semua request",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu rendah (1): Terlalu mudah kembali CLOSED, bisa langsung OPEN lagi",i.jsx("br",{}),"- Nilai terlalu tinggi (5+): Terlalu lama di HALF_OPEN, memperlambat recovery",i.jsx("br",{}),"- Rekomendasi: 2-3 untuk aplikasi production",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Circuit HALF_OPEN  Request 1 sukses  Request 2 sukses (",L.successThreshold," tercapai)  Circuit CLOSED"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"4. Monitoring Period (Jendela Waktu Monitoring)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jendela waktu (sliding window) untuk menghitung jumlah kegagalan. Hanya kegagalan dalam jendela waktu ini yang dihitung untuk menentukan apakah circuit harus terbuka."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Monitoring Period: ",(L.monitoringPeriod/1e3).toFixed(0)," detik (",L.monitoringPeriod,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 10 detik (10000ms, range: 5s - 300s)",i.jsx("br",{})," Sistem hanya menghitung kegagalan yang terjadi dalam ",(L.monitoringPeriod/1e3).toFixed(0)," detik terakhir",i.jsx("br",{})," Kegagalan yang lebih lama dari ",(L.monitoringPeriod/1e3).toFixed(0)," detik tidak dihitung (expired)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah kegagalan lama mempengaruhi keputusan saat ini, fokus pada kondisi terbaru",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (5s): Terlalu fokus pada kondisi saat ini, tidak melihat tren",i.jsx("br",{}),"- Nilai terlalu panjang (60s+): Kegagalan lama masih mempengaruhi, recovery lebih lambat",i.jsx("br",{}),"- Rekomendasi: 10-30 detik untuk balance antara responsivitas dan stabilitas",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Jika monitoring period = ",(L.monitoringPeriod/1e3).toFixed(0),"s, dan terjadi ",L.failureThreshold," kegagalan dalam ",(L.monitoringPeriod/1e3).toFixed(0)," detik terakhir  Circuit OPEN. Kegagalan yang lebih dari ",(L.monitoringPeriod/1e3).toFixed(0)," detik tidak dihitung."]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"5. Request Timeout (Waktu Maksimal Request)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Waktu maksimal yang diizinkan untuk setiap request database. Request yang melebihi timeout ini akan dianggap gagal dan dibatalkan."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Request Timeout: ",(L.timeout/1e3).toFixed(0)," detik (",L.timeout,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 10 detik (10000ms, range: 1s - 60s)",i.jsx("br",{})," Setiap request database akan dibatalkan jika melebihi ",(L.timeout/1e3).toFixed(0)," detik dan dianggap gagal",i.jsx("br",{})," Timeout ini diterapkan sebelum request mencapai database (client-side timeout)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah request yang hang/tidak merespons menumpuk dan membebani sistem",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (1-3s): Request normal bisa dianggap gagal, false positive tinggi",i.jsx("br",{}),"- Nilai terlalu panjang (30s+): Request hang akan menunggu terlalu lama, resource terbuang",i.jsx("br",{}),"- Rekomendasi:",i.jsx("br",{})," Read queries: 5-10 detik",i.jsx("br",{})," Write queries: 10-15 detik",i.jsx("br",{})," RPC/complex queries: 15-30 detik",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Request dimulai  Jika belum selesai dalam ",(L.timeout/1e3).toFixed(0)," detik  Request dibatalkan  Dianggap gagal  Dihitung untuk failure threshold"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"6. Cara Kerja Bersama-Sama"}),i.jsx("p",{className:"mt-1 mb-2",children:"Semua parameter ini bekerja bersama untuk melindungi database dengan cara yang terkoordinasi."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{className:"text-xs space-y-2",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Alur Lengkap:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Request masuk  Sistem cek ",i.jsx("strong",{children:"Request Timeout"})," (max ",(L.timeout/1e3).toFixed(0),"s)"]}),i.jsx("li",{children:"Request dieksekusi  Jika melebihi timeout  Dianggap gagal"}),i.jsxs("li",{children:["Kegagalan dicatat dalam ",i.jsx("strong",{children:"Monitoring Period"})," (",(L.monitoringPeriod/1e3).toFixed(0),"s terakhir)"]}),i.jsx("li",{children:"Sistem hitung total kegagalan dalam jendela waktu"}),i.jsxs("li",{children:["Jika mencapai ",i.jsx("strong",{children:"Failure Threshold"})," (",L.failureThreshold," kegagalan)  Circuit OPEN"]}),i.jsxs("li",{children:["Tunggu ",i.jsx("strong",{children:"Reset Timeout"})," (",(L.resetTimeout/1e3).toFixed(0),"s)  Transisi ke HALF_OPEN"]}),i.jsxs("li",{children:["Uji dengan beberapa request  Jika ",i.jsx("strong",{children:"Success Threshold"})," (",L.successThreshold," sukses) tercapai  CLOSED"]}),i.jsx("li",{children:"Jika gagal dalam HALF_OPEN  Kembali OPEN, tunggu reset timeout lagi"})]})]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-green-700 dark:text-green-300",children:[i.jsx("strong",{children:" Contoh Skenario:"}),i.jsx("br",{}),"1. 5 request gagal (timeout) dalam 10 detik  Threshold tercapai (",L.failureThreshold,")",i.jsx("br",{}),"2. Circuit OPEN  Semua request diblokir",i.jsx("br",{}),"3. Tunggu ",L.resetTimeout/1e3," detik  Database punya waktu recovery",i.jsx("br",{}),"4. Circuit HALF_OPEN  Uji dengan 2 request",i.jsx("br",{}),"5. Kedua request sukses (",L.successThreshold,")  Circuit CLOSED  Kembali normal"]})})]})})]})]})})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(mP,{className:"h-5 w-5 text-blue-600"}),"Bagaimana Circuit Breaker Bekerja?"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-blue-800 dark:text-blue-200",children:"Tiga Status Circuit Breaker:"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(ih,{className:"h-5 w-5 text-green-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"CLOSED (Tertutup)"}),i.jsx("p",{className:"text-muted-foreground",children:"Status normal. Semua request database diizinkan. Circuit breaker memantau setiap request dan menghitung kegagalan dalam jendela waktu tertentu."})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx($s,{className:"h-5 w-5 text-red-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-red-700 dark:text-red-300",children:"OPEN (Terbuka)"}),i.jsxs("p",{className:"text-muted-foreground",children:["Circuit breaker mendeteksi terlalu banyak kegagalan ( ",L.failureThreshold," dalam ",(L.monitoringPeriod/1e3).toFixed(0)," detik). Semua request database diblokir untuk melindungi sistem. Status ini akan bertahan selama ",L.resetTimeout/1e3," detik sebelum mencoba uji pemulihan."]})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(cP,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-yellow-700 dark:text-yellow-300",children:"HALF_OPEN (Setengah Terbuka)"}),i.jsxs("p",{className:"text-muted-foreground",children:["Fase uji pemulihan. Setelah ",L.resetTimeout/1e3," detik di status OPEN, circuit breaker mengizinkan beberapa request terbatas untuk mengecek apakah sistem sudah pulih. Jika ",L.successThreshold," request berhasil berturut-turut, kembali ke CLOSED. Jika gagal, kembali ke OPEN."]})]})]})]})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-purple-800 dark:text-purple-200",children:"Alur Kerja:"}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"1."}),i.jsx("span",{children:"Request database masuk  Circuit breaker memeriksa status"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"2."}),i.jsx("span",{children:"Jika CLOSED  Request diizinkan dan dimonitor"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"3."}),i.jsxs("span",{children:["Jika terjadi kegagalan  Dihitung dalam jendela waktu ",(L.monitoringPeriod/1e3).toFixed(0)," detik"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"4."}),i.jsxs("span",{children:["Jika  ",L.failureThreshold," kegagalan  Beralih ke OPEN (blokir semua request)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"5."}),i.jsxs("span",{children:["Tunggu ",L.resetTimeout/1e3," detik  Beralih ke HALF_OPEN (uji pemulihan)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"6."}),i.jsxs("span",{children:["Jika ",L.successThreshold," sukses  Kembali ke CLOSED. Jika gagal  Kembali ke OPEN"]})]})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx($s,{className:"h-5 w-5 text-orange-600"}),"Apa yang Harus Dilakukan Jika Circuit Breaker Terbuka (OPEN)?"]}),i.jsx("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 space-y-3",children:i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"1. Jangan Panik - Ini Tindakan Perlindungan Otomatis"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Circuit breaker terbuka adalah mekanisme perlindungan yang bekerja secara otomatis. Aplikasi sengaja memblokir request untuk mencegah database crash."})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"2. Identifikasi Penyebab Masalah"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Periksa kemungkinan penyebab:"}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsx("li",{children:"Database server sedang down atau overload"}),i.jsx("li",{children:"Koneksi network bermasalah"}),i.jsx("li",{children:"Query database terlalu lambat (timeout)"}),i.jsx("li",{children:"Terlalu banyak request bersamaan (adaptive rate limiter sedang mengurangi limit)"}),i.jsx("li",{children:"Masalah pada Supabase (jika menggunakan Supabase)"})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"3. Periksa Metrik dan Log"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:'Lihat bagian "Metrics Charts" untuk memahami:'}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsx("li",{children:"Jenis operasi yang paling banyak gagal (read/write/RPC)"}),i.jsx("li",{children:"Error category yang dominan (network/timeout/database)"}),i.jsx("li",{children:"Response time rata-rata sebelum circuit terbuka"})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"4. Tunggu Pemulihan Otomatis"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Circuit breaker akan otomatis mencoba uji pemulihan setelah ",L.resetTimeout/1e3," detik. Jika sistem sudah pulih, akan kembali ke status CLOSED secara otomatis."]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"5. Tindakan Manual (Jika Diperlukan)"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Jika masalah berlanjut setelah beberapa siklus recovery:"}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Reset Circuit Breaker:"})," Hapus statistik dan mulai fresh (gunakan dengan hati-hati)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Periksa Status Database:"})," Pastikan database server berjalan normal"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Hubungi Tim DevOps/Database:"})," Jika masalah bersifat infrastruktur"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Review Query Performance:"})," Optimalkan query yang lambat"]})]})]})]})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Gs,{className:"h-5 w-5 text-purple-600"}),"Adaptive Rate Limiter: Menangani Traffic Spike"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-purple-800 dark:text-purple-200",children:"Apa itu Adaptive Rate Limiter?"}),i.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:[i.jsx("strong",{children:"Adaptive Rate Limiter"})," adalah sistem pembatas kecepatan yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem database. Berbeda dengan rate limiter statis yang memiliki limit tetap, adaptive rate limiter akan:"]}),i.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Meningkatkan limit"})," saat sistem dalam kondisi sehat (response time rendah, error rate rendah)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Menurunkan limit"})," saat sistem dalam kondisi stres (response time tinggi, error rate tinggi)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Melindungi database"})," dari traffic spike dan overload dengan penyesuaian otomatis"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Mengurangi false positives"})," dengan memberikan waktu recovery sebelum circuit breaker terbuka"]})]})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-green-800 dark:text-green-200",children:"Bagaimana Menangani Traffic Spike?"}),i.jsxs("div",{className:"text-sm space-y-3",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"1. Deteksi Traffic Spike"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Saat traffic spike terjadi, database mulai lambat (response time meningkat) atau terjadi error rate tinggi. Adaptive rate limiter memantau metrik ini setiap ",O.adjustmentInterval/1e3," detik dari tabel ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:"circuit_breaker_metrics"})," di Supabase."]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"2. Penyesuaian Otomatis"}),i.jsxs("div",{className:"mt-2 space-y-2",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-2",children:[i.jsxs("strong",{className:"text-xs",children:["Sistem Sehat (Response Time < ",O.healthyLatencyThreshold,"ms, Error < 5%):"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" Limit meningkat hingga ",(O.maxMultiplier*100).toFixed(0),"% dari base limit",i.jsx("br",{})," Contoh: Reads base ",O.baseConfig.read.limit,"/min dapat naik hingga ",Math.round(O.baseConfig.read.limit*O.maxMultiplier),"/min"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-2",children:[i.jsxs("strong",{className:"text-xs",children:["Sistem Stres (Response Time > ",O.stressLatencyThreshold,"ms atau Error > 20%):"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" Limit menurun hingga ",(O.minMultiplier*100).toFixed(0),"% dari base limit",i.jsx("br",{})," Contoh: Reads base ",O.baseConfig.read.limit,"/min dapat turun hingga ",Math.round(O.baseConfig.read.limit*O.minMultiplier),"/min",i.jsx("br",{})," Memberi waktu recovery untuk database tanpa langsung memicu circuit breaker OPEN"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"3. Skenario Traffic Spike"}),i.jsxs("div",{className:"mt-2 space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"A."}),i.jsxs("div",{children:[i.jsx("strong",{children:"Spike Normal (Dapat Dihandle):"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Request melonjak  Rate limiter dengan limit adaptif menangani sebagian request  Jika masih dalam batas, semua diizinkan  Jika melebihi, request diblokir dengan HTTP 429"})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"B."}),i.jsxs("div",{children:[i.jsx("strong",{children:"Spike Besar (Database Mulai Lambat):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Response time naik di atas ",O.stressLatencyThreshold,"ms  Adaptive limiter turunkan limit secara bertahap  Memberi waktu database pulih  Mencegah circuit breaker langsung OPEN"]})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"C."}),i.jsxs("div",{children:[i.jsx("strong",{children:"DDoS/Attack:"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Ribuan request masuk  Adaptive limiter turunkan limit drastis (hingga ",(O.minMultiplier*100).toFixed(0),"%)  Sebagian besar request diblokir  Database terlindungi  Circuit breaker OPEN sebagai last resort jika masih gagal"]})]})]})]})]})]})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-3 text-red-800 dark:text-red-200",children:" Input Konfigurasi untuk Traffic Spike & DDoS Protection"}),i.jsxs("div",{className:"text-sm space-y-3 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-red-700 dark:text-red-300 text-base",children:"Input Utama untuk Perlindungan:"}),i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-red-500",children:[i.jsx("strong",{className:"text-sm text-red-700 dark:text-red-300",children:"1. Min Multiplier (PALING PENTING untuk DDoS)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Min Multiplier = ",(O.minMultiplier*100).toFixed(0),"% (range: 0.1 - 1.0)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Menentukan seberapa rendah limit dapat turun saat sistem diserang",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (0.1-0.3) = Limit turun drastis  90-70% request diblokir  ",i.jsx("strong",{children:"SANGAT EFEKTIF"}),i.jsx("br",{}),"- Nilai sedang (0.4-0.6) = Limit turun sedang  60-40% request diblokir  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Nilai tinggi (0.7-1.0) = Limit turun sedikit  30-0% request diblokir  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 0.1 - 0.3 (10-30% dari base limit)",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Base Reads = ",O.baseConfig.read.limit,"/min, Min Multiplier = ",O.minMultiplier,"  Limit minimum = ",Math.round(O.baseConfig.read.limit*O.minMultiplier),"/min saat diserang"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-orange-500",children:[i.jsx("strong",{className:"text-sm text-orange-700 dark:text-orange-300",children:"2. Stress Latency Threshold (Deteksi Serangan)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Stress Latency Threshold = ",O.stressLatencyThreshold,"ms (range: 500ms - 10000ms)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Mendeteksi kapan sistem mulai stres/overload akibat traffic spike",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (500-1000ms) = Deteksi cepat saat serangan  Limit turun cepat  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Nilai sedang (1000-2000ms) = Deteksi sedang  ",i.jsx("strong",{children:"SEIMBANG"}),i.jsx("br",{}),"- Nilai tinggi (3000ms+) = Deteksi lambat  Database bisa crash dulu  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 500-1000ms (deteksi cepat)",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Saat DDoS, response time naik cepat  Jika ",">"," ",O.stressLatencyThreshold,"ms  Sistem langsung turunkan limit"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-yellow-500",children:[i.jsx("strong",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"3. Base Limits (Garis Pertahanan Awal)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Base Limits untuk Reads/Writes/RPC/Auth",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Limit dasar sebelum penyesuaian adaptif",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Base limit rendah = Kurang request yang diizinkan  Lebih aman tapi bisa blokir user normal",i.jsx("br",{}),"- Base limit tinggi = Lebih banyak request diizinkan  Lebih toleran tapi kurang proteksi",i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"}),i.jsx("br",{}),"- Reads: 50-100/min (default: ",O.baseConfig.read.limit,"/min)",i.jsx("br",{}),"- Writes: 20-30/min (default: ",O.baseConfig.write.limit,"/min)",i.jsx("br",{}),"- RPC: 10-20/min (default: ",O.baseConfig.rpc.limit,"/min)",i.jsx("br",{}),"- Auth: 5-10/min (default: ",O.baseConfig.auth.limit,"/min)",i.jsx("br",{})," ",i.jsx("strong",{children:"Penting:"})," Base limit ini akan dikalikan dengan min multiplier saat serangan, jadi limit efektif minimum = base  min multiplier"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-blue-500",children:[i.jsx("strong",{className:"text-sm text-blue-700 dark:text-blue-300",children:"4. Adjustment Interval (Kecepatan Respons)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Adjustment Interval = ",O.adjustmentInterval/1e3,"s (range: 10s - 600s)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Seberapa sering sistem memeriksa kondisi dan menyesuaikan limit",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Interval pendek (10-30s) = Respons cepat  Limit turun cepat saat serangan  ",i.jsx("strong",{children:"SANGAT EFEKTIF"}),i.jsx("br",{}),"- Interval sedang (30-60s) = Respons seimbang  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Interval panjang (60s+) = Respons lambat  Serangan bisa damage dulu  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 10-30 detik (respons cepat)",i.jsx("br",{})," ",i.jsx("strong",{children:"Catatan:"})," Interval terlalu pendek (","<"," 10s) bisa menyebabkan limit berubah-ubah terlalu sering"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-purple-500",children:[i.jsx("strong",{className:"text-sm text-purple-700 dark:text-purple-300",children:"5. Circuit Breaker Failure Threshold (Last Resort)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Failure Threshold = ",L.failureThreshold," (range: 1-100)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Jika adaptive rate limiter tidak cukup, circuit breaker akan OPEN dan blokir SEMUA request",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (3-5) = Circuit terbuka cepat  Semua request diblokir  ",i.jsx("strong",{children:"SANGAT PROTEKTIF"}),i.jsx("br",{}),"- Nilai sedang (5-10) = Balance  ",i.jsx("strong",{children:"SEIMBANG"}),i.jsx("br",{}),"- Nilai tinggi (10+) = Circuit lambat terbuka  Database bisa crash dulu  ",i.jsx("strong",{children:"KURANG PROTEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 3-5 kegagalan dalam monitoring period",i.jsx("br",{})," ",i.jsx("strong",{children:"Penting:"})," Ini adalah lapisan terakhir - gunakan jika rate limiter tidak cukup"]})]})]})]}),i.jsxs("div",{className:"bg-red-100 dark:bg-red-950/40 border border-red-300 dark:border-red-700 rounded p-3 mt-3",children:[i.jsx("strong",{className:"text-sm text-red-800 dark:text-red-200",children:" Konfigurasi Optimal untuk DDoS Protection:"}),i.jsxs("div",{className:"text-xs mt-2 space-y-1 text-red-700 dark:text-red-300",children:[i.jsx("p",{children:"Untuk perlindungan maksimal terhadap DDoS attack, gunakan konfigurasi berikut:"}),i.jsxs("ul",{className:"list-disc list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Min Multiplier:"})," 0.1 - 0.3 (limit turun hingga 10-30% dari base)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Stress Latency Threshold:"})," 500 - 1000ms (deteksi cepat)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Adjustment Interval:"})," 10 - 30 detik (respons cepat)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Base Limits:"})," Konservatif (Reads: 50-100, Writes: 20-30, RPC: 10-20, Auth: 5-10)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Circuit Breaker Failure Threshold:"})," 3-5 (last resort protection)"]})]}),i.jsx("p",{className:"mt-2 font-semibold",children:"Dengan konfigurasi ini, saat DDoS attack terjadi:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Response time naik ",">"," ",O.stressLatencyThreshold,"ms (dalam 10-30 detik)"]}),i.jsxs("li",{children:["Adaptive limiter turunkan limit ke ",(O.minMultiplier*100).toFixed(0),"% (minimal)"]}),i.jsx("li",{children:"70-90% request diblokir dengan HTTP 429"}),i.jsx("li",{children:"Jika masih gagal, circuit breaker OPEN  100% request diblokir"}),i.jsx("li",{children:"Database terlindungi dari crash"})]})]})]})]})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-yellow-800 dark:text-yellow-200",children:"Lapisan Perlindungan Berlapis"}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"1"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Adaptive Rate Limiter (Lapisan Pertama):"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Membatasi jumlah request per menit dengan limit yang dinamis. Mencegah database overload dengan menyesuaikan limit berdasarkan kondisi sistem."})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"2"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Request Timeout (Lapisan Kedua):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Setiap request memiliki timeout maksimal ",L.timeout/1e3," detik. Request yang terlalu lama dianggap gagal dan tidak menumpuk di database."]})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"3"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Circuit Breaker (Lapisan Ketiga):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Jika tetap terjadi ",L.failureThreshold," kegagalan dalam ",(L.monitoringPeriod/1e3).toFixed(0)," detik, circuit breaker akan OPEN dan memblokir semua request untuk melindungi database sepenuhnya."]})]})]})]})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-blue-800 dark:text-blue-200",children:"Penjelasan Detail Setiap Input Konfigurasi"}),i.jsxs("div",{className:"text-sm space-y-4 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"1. Base Limits (Limit Dasar)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Limit dasar adalah jumlah maksimal request per menit yang diizinkan saat sistem dalam kondisi normal. Limit aktual akan disesuaikan otomatis berdasarkan kondisi sistem (dikalikan dengan multiplier)."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Reads Base Limit: ",O.baseConfig.read.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"READ"})," (membaca data dari database). Operasi ini termasuk SELECT queries, fetching data, dll.",i.jsx("br",{})," Operasi read biasanya lebih aman dan lebih cepat dibanding write",i.jsx("br",{})," Limit default: 100 request/menit (dapat disesuaikan 10-1000)",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(O.baseConfig.read.limit*O.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(O.baseConfig.read.limit*O.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Writes Base Limit: ",O.baseConfig.write.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"WRITE"})," (menulis/mengubah data di database). Operasi ini termasuk INSERT, UPDATE, DELETE, UPSERT.",i.jsx("br",{})," Operasi write lebih berisiko dan lebih lambat dibanding read",i.jsx("br",{})," Limit default: 30 request/menit (dapat disesuaikan 5-500)",i.jsx("br",{})," Lebih ketat dari reads karena dapat menyebabkan race condition atau data corruption jika terlalu banyak",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(O.baseConfig.write.limit*O.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(O.baseConfig.write.limit*O.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["RPC Base Limit: ",O.baseConfig.rpc.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"RPC"})," (Remote Procedure Call / fungsi database). Operasi ini termasuk panggilan fungsi PostgreSQL, stored procedures, dll.",i.jsx("br",{})," RPC biasanya lebih kompleks dan lebih berat dibanding query biasa",i.jsx("br",{})," Limit default: 20 request/menit (dapat disesuaikan 5-200)",i.jsx("br",{})," RPC sering digunakan untuk operasi batch atau analytics, jadi perlu lebih ketat",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(O.baseConfig.rpc.limit*O.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(O.baseConfig.rpc.limit*O.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Auth Base Limit: ",O.baseConfig.auth.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"AUTH"})," (autentikasi dan otorisasi). Operasi ini termasuk login, logout, refresh token, verifikasi session.",i.jsx("br",{})," Operasi auth sangat penting untuk keamanan, jadi perlu dibatasi",i.jsx("br",{})," Limit default: 10 request/menit (dapat disesuaikan 2-100)",i.jsx("br",{})," Mencegah brute force attack dan credential stuffing",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(O.baseConfig.auth.limit*O.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(O.baseConfig.auth.limit*O.minMultiplier),"/min"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"2. Multiplier Range (Rentang Pengali)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Multiplier menentukan seberapa banyak limit base dapat berubah. Sistem akan mengalikan base limit dengan multiplier saat ini untuk mendapatkan limit efektif."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Min Multiplier: ",(O.minMultiplier*100).toFixed(0),"%"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Multiplier ",i.jsx("strong",{children:"minimum"})," yang akan digunakan saat sistem dalam kondisi ",i.jsx("strong",{children:"stres"}),".",i.jsx("br",{})," Nilai: 0.5 = 50% dari base limit (default: 0.5, range: 0.1 - 1.0)",i.jsx("br",{})," Digunakan ketika: Response time > ",O.stressLatencyThreshold,"ms ATAU error rate > 20%",i.jsx("br",{})," Contoh: Jika Reads base = ",O.baseConfig.read.limit,", min multiplier = ",O.minMultiplier,", maka limit efektif minimum = ",Math.round(O.baseConfig.read.limit*O.minMultiplier),"/min",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memberi waktu recovery untuk database dengan mengurangi beban saat sistem stres, mencegah overload total"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Max Multiplier: ",(O.maxMultiplier*100).toFixed(0),"%"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Multiplier ",i.jsx("strong",{children:"maksimum"})," yang akan digunakan saat sistem dalam kondisi ",i.jsx("strong",{children:"sehat"}),".",i.jsx("br",{})," Nilai: 2.0 = 200% dari base limit (default: 2.0, range: 1.0 - 5.0)",i.jsx("br",{})," Digunakan ketika: Response time < ",O.healthyLatencyThreshold,"ms DAN error rate < 5%",i.jsx("br",{})," Contoh: Jika Reads base = ",O.baseConfig.read.limit,", max multiplier = ",O.maxMultiplier,", maka limit efektif maksimum = ",Math.round(O.baseConfig.read.limit*O.maxMultiplier),"/min",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memanfaatkan kapasitas database saat kondisi optimal, meningkatkan throughput aplikasi"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"3. Latency Thresholds (Ambang Waktu Respons)"}),i.jsx("p",{className:"mt-1 mb-2",children:'Threshold menentukan kapan sistem dianggap "sehat" atau "stres" berdasarkan waktu respons database. Sistem menggunakan threshold ini untuk memutuskan apakah harus meningkatkan atau menurunkan limit.'}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Healthy Latency Threshold: ",O.healthyLatencyThreshold,"ms"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Batas atas response time yang dianggap ",i.jsx("strong",{children:"sehat"}),". Jika response time database di bawah nilai ini, sistem akan meningkatkan limit.",i.jsx("br",{})," Default: 200ms (range: 50ms - 1000ms)",i.jsx("br",{})," Kondisi: Response time < ",O.healthyLatencyThreshold,"ms DAN error rate < 5%",i.jsx("br",{})," Aksi: Limit akan ",i.jsx("strong",{children:"naik secara bertahap"})," (maks 10% per adjustment) hingga mencapai max multiplier",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mengidentifikasi saat database dapat menangani lebih banyak request, memaksimalkan throughput",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"})," Jika database Anda biasanya sangat cepat (< 50ms), turunkan nilai ini. Jika database lambat, naikkan."]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Stress Latency Threshold: ",O.stressLatencyThreshold,"ms"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Batas bawah response time yang dianggap ",i.jsx("strong",{children:"stres"}),". Jika response time database di atas nilai ini, sistem akan menurunkan limit.",i.jsx("br",{})," Default: 1000ms (range: 500ms - 10000ms)",i.jsx("br",{})," Kondisi: Response time > ",O.stressLatencyThreshold,"ms ATAU error rate > 20%",i.jsx("br",{})," Aksi: Limit akan ",i.jsx("strong",{children:"turun secara bertahap"})," (maks 20% per adjustment) hingga mencapai min multiplier",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mengidentifikasi saat database mulai overload, mengurangi beban sebelum database benar-benar crash",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"})," Jika database Anda dapat menangani response time tinggi (> 2s), naikkan nilai ini. Jika database sensitif, turunkan."]})]}),i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:[i.jsx("strong",{children:" Catatan:"})," Jika response time di antara ",O.healthyLatencyThreshold,"ms dan ",O.stressLatencyThreshold,"ms, sistem akan perlahan mengembalikan multiplier ke 1.0 (100% dari base limit)."]})})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"4. Adjustment Interval (Interval Penyesuaian)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Interval menentukan seberapa sering sistem memeriksa metrik dan menyesuaikan limit. Sistem akan query metrik dari Supabase dan menghitung response time serta error rate untuk memutuskan apakah perlu mengubah multiplier."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Adjustment Interval: ",O.adjustmentInterval/1e3," detik (",O.adjustmentInterval,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Frekuensi pengecekan dan penyesuaian limit oleh sistem.",i.jsx("br",{})," Default: 60 detik (60000ms, range: 10s - 600s)",i.jsx("br",{})," Setiap interval, sistem akan:",i.jsx("br",{}),"1. Query metrik dari tabel ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"circuit_breaker_metrics"})," di Supabase (5 menit terakhir)",i.jsx("br",{}),"2. Hitung rata-rata response time dan error rate",i.jsx("br",{}),"3. Bandingkan dengan threshold (healthy/stress)",i.jsx("br",{}),"4. Sesuaikan multiplier untuk setiap operasi (read/write/rpc/auth)",i.jsx("br",{}),"5. Simpan multiplier baru ke localStorage dan update limit efektif",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"}),i.jsx("br",{}),"- Interval terlalu pendek: Sistem terlalu reaktif, limit berubah-ubah terlalu sering (tidak stabil)",i.jsx("br",{}),"- Interval terlalu panjang: Sistem lambat merespons perubahan kondisi (tidak efektif)",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Untuk aplikasi dengan traffic stabil: Gunakan 60-120 detik",i.jsx("br",{}),"- Untuk aplikasi dengan traffic volatile: Gunakan 30-60 detik",i.jsx("br",{}),"- Jangan kurang dari 10 detik (terlalu agresif)",i.jsx("br",{}),"- Jangan lebih dari 600 detik (terlalu lambat)"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"5. Cara Kerja Bersama-Sama"}),i.jsx("p",{className:"mt-1 mb-2",children:"Semua parameter ini bekerja bersama untuk menciptakan sistem perlindungan yang adaptif dan responsif."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{className:"text-xs",children:[i.jsx("strong",{children:"Alur Kerja:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Sistem memantau setiap request database dan mencatat metrik (response time, success/failure) ke ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"circuit_breaker_metrics"})]}),i.jsxs("li",{children:["Setiap ",O.adjustmentInterval/1e3," detik, adaptive rate limiter memeriksa metrik 5 menit terakhir"]}),i.jsx("li",{children:"Menghitung rata-rata response time dan error rate"}),i.jsxs("li",{children:["Membandingkan dengan threshold:",i.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1",children:[i.jsxs("li",{children:["Jika response time < ",O.healthyLatencyThreshold,"ms DAN error < 5%  ",i.jsx("strong",{children:"Naikkan limit"})," (max ",(O.maxMultiplier*100).toFixed(0),"%)"]}),i.jsxs("li",{children:["Jika response time > ",O.stressLatencyThreshold,"ms ATAU error > 20%  ",i.jsx("strong",{children:"Turunkan limit"})," (min ",(O.minMultiplier*100).toFixed(0),"%)"]}),i.jsxs("li",{children:["Jika di antara keduanya  ",i.jsx("strong",{children:"Kembalikan limit"})," perlahan ke 100%"]})]})]}),i.jsx("li",{children:"Update multiplier dan hitung limit efektif baru (base limit  multiplier saat ini)"}),i.jsx("li",{children:"Limit efektif baru diterapkan untuk semua request berikutnya"}),i.jsxs("li",{children:["Proses ini berulang setiap ",O.adjustmentInterval/1e3," detik"]})]})]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:[i.jsx("strong",{children:" Contoh Praktis:"}),i.jsx("br",{}),"Base Reads Limit = ",O.baseConfig.read.limit,"/min",i.jsx("br",{}),"Sistem sehat (response < ",O.healthyLatencyThreshold,"ms)  Multiplier = ",O.maxMultiplier,"  Effective Limit = ",Math.round(O.baseConfig.read.limit*O.maxMultiplier),"/min",i.jsx("br",{}),"Sistem stres (response > ",O.stressLatencyThreshold,"ms)  Multiplier = ",O.minMultiplier,"  Effective Limit = ",Math.round(O.baseConfig.read.limit*O.minMultiplier),"/min",i.jsx("br",{}),"Sistem normal  Multiplier = 1.0  Effective Limit = ",O.baseConfig.read.limit,"/min (base)"]})})]})]}),i.jsxs("p",{className:"text-xs mt-3 pt-2 border-t",children:[" ",i.jsx("strong",{children:"Tip Penting:"}),' Limit efektif saat ini dapat dilihat di bagian "Adaptive Rate Limiter Configuration" di atas. Limit akan berubah secara real-time berdasarkan kondisi sistem. Perhatikan perubahan multiplier - jika terus turun, itu berarti sistem sedang stres dan perlu perhatian.']})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Z0,{className:"h-5 w-5 text-blue-600"}),"Memahami Metrik Circuit Breaker"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Success Rate:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Persentase request yang berhasil. Nilai rendah (< 90%) menunjukkan masalah potensial dengan database atau koneksi."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Total Requests:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Jumlah total request sejak inisialisasi. Membantu memahami volume traffic aplikasi."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Operations by Type:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Distribusi operasi berdasarkan jenis (read/write/RPC/auth). Membantu mengidentifikasi jenis operasi yang paling bermasalah."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Circuit Breaker States:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Menunjukkan berapa banyak operasi yang terjadi pada setiap state. Banyak operasi di OPEN state = sistem sering bermasalah."})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ih,{className:"h-5 w-5 text-green-600"}),"Best Practices"]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4 space-y-2 text-sm",children:i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"Monitor metrik secara berkala untuk mendeteksi masalah sejak dini"}),i.jsx("li",{children:"Biarkan adaptive rate limiter bekerja otomatis - jangan sering reset manual kecuali benar-benar diperlukan"}),i.jsx("li",{children:"Jika circuit sering terbuka, pertimbangkan untuk optimasi query atau scaling database"}),i.jsx("li",{children:"Gunakan cache untuk mengurangi beban database pada query yang sering digunakan"}),i.jsx("li",{children:"Review dan sesuaikan threshold jika circuit breaker terlalu sensitif atau tidak sensitif"}),i.jsx("li",{children:"Perhatikan perubahan limit adaptive rate limiter - penurunan drastis menunjukkan sistem sedang stres"}),i.jsx("li",{children:"Dokumentasikan setiap insiden circuit breaker dan traffic spike untuk analisis tren"}),i.jsx("li",{children:"Trust the adaptive system - limit akan menyesuaikan otomatis berdasarkan kondisi sistem"})]})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ga,{className:"h-5 w-5 text-blue-600"}),"Referensi Konfigurasi"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Circuit Breaker Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Failure Threshold:"})," ",L.failureThreshold,i.jsx("p",{className:"text-xs text-muted-foreground",children:"Buka circuit setelah kegagalan ini"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Reset Timeout:"})," ",L.resetTimeout/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Tunggu sebelum uji pemulihan"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Success Threshold:"})," ",L.successThreshold,i.jsx("p",{className:"text-xs text-muted-foreground",children:"Sukses untuk tutup circuit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Monitoring Period:"})," ",L.monitoringPeriod/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Jendela waktu hitungan"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("strong",{children:"Request Timeout:"})," ",L.timeout/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Timeout maksimal per request"})]})]})]}),i.jsxs("div",{className:"pt-3 border-t",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Adaptive Rate Limiter Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Reads Base Limit:"})," ",O.baseConfig.read.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Mt.getEffectiveLimit("read"),"/min (",(F.read*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Writes Base Limit:"})," ",O.baseConfig.write.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Mt.getEffectiveLimit("write"),"/min (",(F.write*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"RPC Base Limit:"})," ",O.baseConfig.rpc.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Mt.getEffectiveLimit("rpc"),"/min (",(F.rpc*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Auth Base Limit:"})," ",O.baseConfig.auth.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Mt.getEffectiveLimit("auth"),"/min (",(F.auth*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Multiplier Range:"})," ",(O.minMultiplier*100).toFixed(0),"% - ",(O.maxMultiplier*100).toFixed(0),"%",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Range penyesuaian limit otomatis"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Adjustment Interval:"})," ",O.adjustmentInterval/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Frekuensi penyesuaian limit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Healthy Threshold:"})," < ",O.healthyLatencyThreshold,"ms",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time untuk meningkatkan limit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stress Threshold:"})," > ",O.stressLatencyThreshold,"ms",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time untuk menurunkan limit"})]})]})]})]})]})]}),i.jsx(ma,{children:i.jsx(Z,{variant:"default",onClick:()=>_(!1),children:"Tutup"})})]})}),i.jsx(mn,{open:w,onOpenChange:j,children:i.jsxs(cn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(un,{children:[i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx(ga,{className:"h-5 w-5 text-blue-500"}),"Edit Adaptive Rate Limiter Configuration"]}),i.jsx(Er,{children:"Ubah konfigurasi adaptive rate limiter. Limit akan secara otomatis menyesuaikan berdasarkan kondisi sistem."})]}),i.jsxs("div",{className:"py-4 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Base Limits (per menit)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"readLimit",children:["Reads Base Limit",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Limit dasar untuk operasi read (min: 10, max: 1000)"})})]})]}),i.jsx(Ve,{id:"readLimit",type:"number",min:10,max:1e3,value:R.baseConfig.read.limit,onChange:se=>C({...R,baseConfig:{...R.baseConfig,read:{...R.baseConfig.read,limit:parseInt(se.target.value)||100}}})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"writeLimit",children:["Writes Base Limit",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Limit dasar untuk operasi write (min: 5, max: 500)"})})]})]}),i.jsx(Ve,{id:"writeLimit",type:"number",min:5,max:500,value:R.baseConfig.write.limit,onChange:se=>C({...R,baseConfig:{...R.baseConfig,write:{...R.baseConfig.write,limit:parseInt(se.target.value)||30}}})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"rpcLimit",children:["RPC Base Limit",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Limit dasar untuk operasi RPC (min: 5, max: 200)"})})]})]}),i.jsx(Ve,{id:"rpcLimit",type:"number",min:5,max:200,value:R.baseConfig.rpc.limit,onChange:se=>C({...R,baseConfig:{...R.baseConfig,rpc:{...R.baseConfig.rpc,limit:parseInt(se.target.value)||20}}})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"authLimit",children:["Auth Base Limit",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Limit dasar untuk operasi autentikasi (min: 2, max: 100)"})})]})]}),i.jsx(Ve,{id:"authLimit",type:"number",min:2,max:100,value:R.baseConfig.auth.limit,onChange:se=>C({...R,baseConfig:{...R.baseConfig,auth:{...R.baseConfig.auth,limit:parseInt(se.target.value)||10}}})})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Adjustment Parameters"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"minMultiplier",children:["Min Multiplier",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Multiplier minimum (misal: 0.5 = 50%). Digunakan saat sistem stres (min: 0.1, max: 1.0)"})})]})]}),i.jsx(Ve,{id:"minMultiplier",type:"number",min:.1,max:1,step:.1,value:R.minMultiplier,onChange:se=>C({...R,minMultiplier:parseFloat(se.target.value)||.5})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Minimum: ",(R.minMultiplier*100).toFixed(0),"% dari base limit"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"maxMultiplier",children:["Max Multiplier",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Multiplier maksimum (misal: 2.0 = 200%). Digunakan saat sistem sehat (min: 1.0, max: 5.0)"})})]})]}),i.jsx(Ve,{id:"maxMultiplier",type:"number",min:1,max:5,step:.1,value:R.maxMultiplier,onChange:se=>C({...R,maxMultiplier:parseFloat(se.target.value)||2})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum: ",(R.maxMultiplier*100).toFixed(0),"% dari base limit"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"healthyLatency",children:["Healthy Latency Threshold (ms)",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Response time di bawah ini dianggap sehat. Sistem akan meningkatkan limit (min: 50ms, max: 1000ms)"})})]})]}),i.jsx(Ve,{id:"healthyLatency",type:"number",min:50,max:1e3,step:50,value:R.healthyLatencyThreshold,onChange:se=>C({...R,healthyLatencyThreshold:parseInt(se.target.value)||200})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"stressLatency",children:["Stress Latency Threshold (ms)",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Response time di atas ini dianggap stres. Sistem akan menurunkan limit (min: 500ms, max: 10000ms)"})})]})]}),i.jsx(Ve,{id:"stressLatency",type:"number",min:500,max:1e4,step:100,value:R.stressLatencyThreshold,onChange:se=>C({...R,stressLatencyThreshold:parseInt(se.target.value)||1e3})})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs(Be,{htmlFor:"adjustmentInterval",children:["Adjustment Interval (ms)",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Frekuensi pengecekan dan penyesuaian limit (min: 10000ms, max: 600000ms)"})})]})]}),i.jsx(Ve,{id:"adjustmentInterval",type:"number",min:1e4,max:6e5,step:1e4,value:R.adjustmentInterval,onChange:se=>C({...R,adjustmentInterval:parseInt(se.target.value)||6e4})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Setiap ",(R.adjustmentInterval/1e3).toFixed(0)," detik"]})]})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",i.jsx("strong",{children:"Tips:"})," Adaptive rate limiter secara otomatis menyesuaikan limit berdasarkan metrik sistem (response time, error rate). Saat sistem sehat, limit akan naik. Saat sistem stres, limit akan turun untuk melindungi database dari overload."]})})]}),i.jsxs(ma,{children:[i.jsx(Z,{variant:"outline",onClick:()=>j(!1),children:"Batal"}),i.jsx(Z,{variant:"default",onClick:q,children:"Simpan Perubahan"})]})]})}),i.jsx(mn,{open:y,onOpenChange:b,children:i.jsxs(cn,{className:"max-w-2xl",children:[i.jsxs(un,{children:[i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx(ga,{className:"h-5 w-5 text-blue-500"}),"Edit Circuit Breaker Configuration"]}),i.jsx(Er,{children:"Ubah threshold dan timeout untuk circuit breaker. Perubahan akan langsung diterapkan."})]}),i.jsxs("div",{className:"py-4 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"failureThreshold",children:["Failure Threshold",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Jumlah kegagalan yang diperlukan sebelum circuit breaker terbuka (min: 1, max: 100)"})})]})]}),i.jsx(Ve,{id:"failureThreshold",type:"number",min:1,max:100,value:U.failureThreshold,onChange:se=>$({...U,failureThreshold:parseInt(se.target.value)||5})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"resetTimeout",children:["Reset Timeout (milliseconds)",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Waktu tunggu sebelum mencoba pemulihan (transisi ke HALF_OPEN). Min: 5000ms, Max: 300000ms"})})]})]}),i.jsx(Ve,{id:"resetTimeout",type:"number",min:5e3,max:3e5,step:1e3,value:U.resetTimeout,onChange:se=>$({...U,resetTimeout:parseInt(se.target.value)||3e4})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(U.resetTimeout/1e3).toFixed(0)," seconds"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"successThreshold",children:["Success Threshold",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Jumlah sukses berturut-turut di HALF_OPEN untuk menutup circuit (min: 1, max: 10)"})})]})]}),i.jsx(Ve,{id:"successThreshold",type:"number",min:1,max:10,value:U.successThreshold,onChange:se=>$({...U,successThreshold:parseInt(se.target.value)||2})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"monitoringPeriod",children:["Monitoring Period (milliseconds)",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Jendela waktu untuk menghitung kegagalan. Kegagalan di luar jendela ini tidak dihitung. Min: 1000ms, Max: 60000ms"})})]})]}),i.jsx(Ve,{id:"monitoringPeriod",type:"number",min:1e3,max:6e4,step:1e3,value:U.monitoringPeriod,onChange:se=>$({...U,monitoringPeriod:parseInt(se.target.value)||1e4})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(U.monitoringPeriod/1e3).toFixed(0)," seconds"]})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs(Be,{htmlFor:"timeout",children:["Request Timeout (milliseconds)",i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(Me,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(le,{children:i.jsx("p",{children:"Timeout maksimal untuk setiap request database. Request yang melebihi waktu ini akan dianggap gagal. Min: 1000ms, Max: 60000ms"})})]})]}),i.jsx(Ve,{id:"timeout",type:"number",min:1e3,max:6e4,step:1e3,value:U.timeout,onChange:se=>$({...U,timeout:parseInt(se.target.value)||1e4})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(U.timeout/1e3).toFixed(0)," seconds"]})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",i.jsx("strong",{children:"Tips:"})," Threshold yang terlalu rendah dapat membuat circuit breaker terlalu sensitif. Threshold yang terlalu tinggi dapat menunda respons terhadap masalah database. Gunakan nilai yang sesuai dengan karakteristik aplikasi Anda."]})})]}),i.jsxs(ma,{children:[i.jsx(Z,{variant:"outline",onClick:()=>b(!1),children:"Batal"}),i.jsx(Z,{variant:"default",onClick:ye,children:"Simpan Perubahan"})]})]})}),i.jsx(mn,{open:N,onOpenChange:I,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsx(un,{children:i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx($s,{className:"h-5 w-5 text-red-500"}),"Error"]})}),i.jsx("div",{className:"py-4",children:i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:P})}),i.jsx(ma,{children:i.jsx(Z,{variant:"destructive",onClick:()=>I(!1),children:"Tutup"})})]})})]})}const Oq=p.forwardRef(({role:e,roles:t=[],requireAll:n=!1,fallback:r=null,children:a},s)=>{const{hasRole:o,hasAnyRole:l,loading:c}=jr();if(c)return null;const u=e?[e,...t]:t,f=n?u.every(h=>o(h)):l(u),d=!Array.isArray(a)&&typeof a!="string"&&typeof a!="number";return f?d?i.jsx(HS,{ref:s,children:a}):i.jsx(i.Fragment,{children:a}):i.jsx(i.Fragment,{children:r})});function pIe(){const[e,t]=gN(),{deleteMultipleContacts:n}=oC(),[r,a]=p.useState(""),[s,o]=p.useState(!1),[l,c]=p.useState(null),[u,f]=p.useState(!1),[d,h]=p.useState(90),[m,g]=p.useState(!1),[v,x]=p.useState(""),[y,b]=p.useState(null),[w,j]=p.useState(!1),[k,_]=p.useState(!1),[S,E]=p.useState(null),[N,I]=p.useState(null),[P,D]=p.useState(null),[L,B]=p.useState(null),[U,$]=p.useState(null),[O,T]=p.useState(!1),[R,C]=p.useState(!1),[F,M]=p.useState(""),A=p.useMemo(()=>Array.from(new Set(r.split(/[\s,\n]+/).map(q=>q.trim()).filter(Boolean))),[r]),W=q=>{const ae=new URLSearchParams(e);ae.set("menu",q),t(ae)},G=()=>{try{li.clear(),Ie.success("Local caches cleared")}catch{Ie.error("Failed to clear cache")}},Y=async()=>{try{const{data:{user:q}}=await ne.auth.getUser();if(!q)return null;const{data:ae}=await ne.from("org_members").select("org_id").eq("user_id",q.id).limit(1).maybeSingle();return(ae==null?void 0:ae.org_id)??null}catch{return null}},H=async()=>{try{const q=await Y();if(!q)return;const{data:ae,error:se}=await Nt.from("org_settings").select("retention_days").eq("org_id",q).maybeSingle();if(se)throw se;c((ae==null?void 0:ae.retention_days)??90),h((ae==null?void 0:ae.retention_days)??90)}catch(q){console.error("Failed to fetch retention settings:",q)}},Q=async()=>{try{const q=await Y();if(!q)return;const{data:ae,error:se}=await Nt.from("org_settings").select("ai_paused, ai_paused_reason, ai_paused_at, ai_paused_by_user_id").eq("org_id",q).maybeSingle();if(se)throw se;E(!!(ae!=null&&ae.ai_paused)),I((ae==null?void 0:ae.ai_paused_reason)??null),D((ae==null?void 0:ae.ai_paused_at)??null);const be=(ae==null?void 0:ae.ai_paused_by_user_id)??null;if(B(be),be)try{const{data:Se}=await Nt.from("users_profile").select("user_id, display_name").eq("user_id",be).maybeSingle();if(Se!=null&&Se.display_name)$(Se.display_name);else{const{data:Le}=await Nt.from("v_users").select("id, email").eq("id",be).maybeSingle();$((Le==null?void 0:Le.email)??be)}}catch{$(be)}else $(null)}catch(q){console.error("Failed to fetch AI pause status:",q)}},X=async()=>{try{T(!0);const q=await Y();if(!q)throw new Error("Unable to resolve organization");const{error:ae}=await Nt.from("org_settings").update({ai_paused:!1,ai_paused_reason:null,ai_paused_at:null,ai_paused_by_user_id:null}).eq("org_id",q);if(ae)throw ae;E(!1),I(null),D(null),B(null),$(null),Ie.success("AI auto responses resumed");try{await Wt({action:"ai.resume",resource:"org_settings"})}catch{}}catch(q){Ie.error((q==null?void 0:q.message)||"Failed to resume AI responses")}finally{T(!1)}},re=async()=>{try{T(!0);const{data:{user:q}}=await ne.auth.getUser(),ae=(q==null?void 0:q.id)??null,se=await Y();if(!se)throw new Error("Unable to resolve organization");const{error:be}=await Nt.from("org_settings").update({ai_paused:!0,ai_paused_reason:(F==null?void 0:F.trim())||null,ai_paused_at:new Date().toISOString(),ai_paused_by_user_id:ae}).eq("org_id",se);if(be)throw be;E(!0),I((F==null?void 0:F.trim())||null),D(new Date().toISOString()),B(ae),$(null),C(!1),Ie.success("AI auto responses paused");try{await Wt({action:"ai.pause",resource:"org_settings",context:{reason:(F==null?void 0:F.trim())||null}})}catch{}Q()}catch(q){Ie.error((q==null?void 0:q.message)||"Failed to pause AI responses")}finally{T(!1),M("")}},fe=async()=>{try{j(!0);const q=await Y();if(!q)throw new Error("Unable to resolve organization");const{error:ae}=await Nt.from("org_settings").update({retention_days:d}).eq("org_id",q);if(ae)throw ae;c(d),f(!1),Ie.success(`Retention period updated to ${d} days`);try{await Wt({action:"retention.update",resource:"org_settings",context:{retention_days:d}})}catch{}}catch(q){Ie.error((q==null?void 0:q.message)||"Failed to update retention settings")}finally{j(!1)}},J=async()=>{try{j(!0);const{data:q,error:ae}=await Nt.rpc("cleanup_old_chat_data",{p_days:l??90});if(ae)throw ae;b(q),Ie.success(`Cleanup completed: ${(q==null?void 0:q.threads_deleted)||0} threads, ${(q==null?void 0:q.messages_deleted)||0} messages deleted`);try{await Wt({action:"retention.cleanup",resource:"chat_data",context:q})}catch{}}catch(q){Ie.error((q==null?void 0:q.message)||"Failed to run cleanup")}finally{j(!1)}},ye=async()=>{if(!v.trim()){Ie.error("Please enter contact UUID");return}try{_(!0);const{data:q,error:ae}=await Nt.rpc("gdpr_delete_user_data",{p_contact_id:v.trim()});if(ae)throw ae;Ie.success(`GDPR deletion completed: ${(q==null?void 0:q.threads_deleted)||0} threads, ${(q==null?void 0:q.messages_deleted)||0} messages, ${(q==null?void 0:q.contact_deleted)||0} contacts deleted`),g(!1),x("");try{await Wt({action:"gdpr.delete_request",resource:"contact",resourceId:v,context:q})}catch{}}catch(q){Ie.error((q==null?void 0:q.message)||"Failed to execute GDPR deletion")}finally{_(!1)}};p.useEffect(()=>{H(),Q()},[]);const z=async()=>{if(A.length===0){Ie.error("Provide at least one contact UUID");return}if(window.confirm(`Delete ${A.length} contact(s)? This cannot be undone.`))try{o(!0),await n(A),a(""),Ie.success("Contacts deleted")}catch{Ie.error("Bulk delete failed")}finally{o(!1)}};return i.jsx(Oq,{role:nr.MASTER_AGENT,fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"Admin Panel is available to Master Agents only."}),children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Panel"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Centralized controls for master agents."})]}),i.jsx(It,{className:"bg-blue-100 text-blue-700 border-0",children:"Master Agent"})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"flex items-center gap-2",children:[i.jsx(Gs,{className:"h-4 w-4"})," Access & Management"]})}),i.jsxs(Je,{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[i.jsxs(Z,{variant:"outline",className:"justify-start",onClick:()=>W("permissions"),children:[i.jsx(VL,{className:"h-4 w-4 mr-2"})," Manage Roles & Permissions"]}),i.jsxs(Z,{variant:"outline",className:"justify-start",onClick:()=>W("humanagents"),children:[i.jsx(ZS,{className:"h-4 w-4 mr-2"})," Human Agents"]}),i.jsxs(Z,{variant:"outline",className:"justify-start",onClick:()=>W("platforms"),children:[i.jsx(WL,{className:"h-4 w-4 mr-2"})," Platforms & Integrations"]}),i.jsxs(Z,{variant:"outline",className:"justify-start",onClick:()=>W("analytics"),children:[i.jsx(DL,{className:"h-4 w-4 mr-2"})," Analytics"]}),i.jsxs(Z,{variant:"outline",className:"justify-start",onClick:()=>W("logs"),children:[i.jsx(BL,{className:"h-4 w-4 mr-2"})," Audit Logs"]}),i.jsxs(Z,{variant:"outline",className:"justify-start",onClick:()=>W("contacts"),children:[i.jsx(qL,{className:"h-4 w-4 mr-2"})," Contacts"]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"flex items-center gap-2",children:[i.jsx(Ks,{className:"h-4 w-4"})," Reliability & Circuit Breaker"]})}),i.jsx(Je,{children:i.jsx(mIe,{})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"flex items-center gap-2",children:[i.jsx(Ks,{className:"h-4 w-4"})," AI Auto Responses"]})}),i.jsxs(Je,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:"Status:"}),S?i.jsx(It,{className:"bg-red-100 text-red-700 border-0",children:"Paused"}):i.jsx(It,{className:"bg-emerald-100 text-emerald-700 border-0",children:"Active"})]}),S&&i.jsxs("div",{className:"mt-2 text-xs text-muted-foreground space-y-1",children:[N?i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Reason:"})," ",N]}):null,i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Paused"}),U?i.jsxs(i.Fragment,{children:[" by ",U]}):null,P?i.jsxs(i.Fragment,{children:[" at ",new Date(P).toLocaleString()]}):null]})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:S?i.jsxs(Z,{onClick:X,disabled:O,children:[i.jsx(UV,{className:"h-4 w-4 mr-2"})," ",O?"Resuming...":"Resume AI Responses"]}):i.jsxs(Z,{variant:"destructive",onClick:()=>C(!0),disabled:O,children:[i.jsx(BV,{className:"h-4 w-4 mr-2"})," Pause AI Responses"]})})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"When paused, AI will not auto reply across all channels until resumed."})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"flex items-center gap-2",children:[i.jsx(uP,{className:"h-4 w-4"})," Utilities"]})}),i.jsx(Je,{className:"flex flex-wrap gap-2",children:i.jsxs(Z,{variant:"outline",onClick:G,children:[i.jsx(uP,{className:"h-4 w-4 mr-2"})," Clear Local Cache"]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"flex items-center gap-2",children:"Data Retention Policy"})}),i.jsxs(Je,{className:"space-y-3",children:[i.jsx(Be,{className:"text-sm font-medium",children:"Retention Period (days)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ve,{type:"number",value:l??90,onChange:q=>h(parseInt(q.target.value)||90),className:"max-w-xs"}),i.jsx(Z,{variant:"outline",onClick:()=>{h(l??90),f(!0)},children:"Edit"})]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Current: ",l??90," days. Chats older than this will be automatically deleted."]}),i.jsx(Z,{onClick:J,disabled:w,className:"w-full",children:w?"Running Cleanup...":"Run Cleanup Now"}),y&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last cleanup: ",y.threads_deleted," threads, ",y.messages_deleted," messages, ",y.contacts_deleted," contacts"]})]})]}),i.jsxs(Ae,{className:"border-red-200",children:[i.jsx(tt,{children:i.jsx(Qe,{className:"flex items-center gap-2 text-red-700",children:"GDPR/PDPA Right to Erasure"})}),i.jsxs(Je,{className:"space-y-3",children:[i.jsx(Be,{className:"text-sm font-medium",children:"Contact ID"}),i.jsx(Ve,{placeholder:"Enter contact UUID",value:v,onChange:q=>x(q.target.value)}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Enter the contact ID (UUID) gotten from contact detail to delete all associated data permanently."}),i.jsx(Kt,{permission:"contacts.delete",children:i.jsx(Z,{variant:"destructive",onClick:()=>g(!0),disabled:!v.trim()||k,className:"w-full",children:"Delete User Data"})}),i.jsx("div",{className:"text-xs text-red-600",children:"Warning: This action permanently deletes all data and cannot be undone."})]})]})]}),i.jsx(mn,{open:u,onOpenChange:f,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Configure Data Retention"}),i.jsx(Er,{children:"Set how many days to retain chat data. Data older than this period will be automatically deleted."})]}),i.jsxs("div",{className:"py-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx(Be,{htmlFor:"retention-days",children:"Retention Period (days)"}),i.jsx(Ve,{id:"retention-days",type:"number",value:d,onChange:q=>h(parseInt(q.target.value)||90)})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Automatic cleanup runs daily at 2 AM UTC. You can also trigger manual cleanup from the main panel."})]}),i.jsxs(ma,{children:[i.jsx(Z,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),i.jsx(Z,{onClick:fe,disabled:w,children:w?"Saving...":"Save"})]})]})}),i.jsx(mn,{open:R,onOpenChange:C,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Pause AI Auto Responses"}),i.jsx(Er,{children:"This will pause all AI auto replies across all platforms. You can resume anytime."})]}),i.jsx("div",{className:"py-4 space-y-4",children:i.jsxs("div",{children:[i.jsx(Be,{htmlFor:"pause-reason",children:"Reason (optional)"}),i.jsx($a,{id:"pause-reason",placeholder:"Enter a reason for pausing (visible to admins)",value:F,onChange:q=>M(q.target.value),className:"min-h-[90px]"})]})}),i.jsxs(ma,{children:[i.jsx(Z,{variant:"outline",onClick:()=>C(!1),disabled:O,children:"Cancel"}),i.jsx(Z,{variant:"destructive",onClick:re,disabled:O,children:O?"Pausing...":"Confirm Pause"})]})]})}),i.jsx(mn,{open:m,onOpenChange:g,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Confirm GDPR Data Deletion"}),i.jsxs(Er,{children:["This action will permanently delete all data associated with contact ID: ",i.jsx("code",{className:"bg-muted px-1 rounded",children:v})]})]}),i.jsxs(ma,{children:[i.jsx(Z,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),i.jsx(Z,{variant:"destructive",onClick:ye,disabled:k,children:k?"Deleting...":"Confirm Deletion"})]})]})}),i.jsxs(Ae,{className:"border-red-200",children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"flex items-center gap-2 text-red-700",children:[i.jsx($s,{className:"h-4 w-4"})," Danger Zone"]})}),i.jsx(Je,{className:"space-y-3",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Paste contact UUIDs (comma/newline separated) to delete permanently."}),i.jsx($a,{value:r,onChange:q=>a(q.target.value),placeholder:"uuid-1, uuid-2, uuid-3",className:"min-h-[120px]"}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Parsed: ",A.length]}),i.jsx(Kt,{permission:"contacts.delete",children:i.jsxs(Z,{variant:"destructive",onClick:z,disabled:s||A.length===0,children:[i.jsx(Ar,{className:"h-4 w-4 mr-2"})," Delete ",A.length||""," Contact",A.length>1?"s":""]})})]})]})})]})]})})}function gIe(){var B,U;Vr();const[e,t]=p.useState([]),[n,r]=p.useState(20),[a,s]=p.useState(1),[o,l]=p.useState(0),[c,u]=p.useState("all"),[f,d]=p.useState("all"),[h,m]=p.useState(""),[g,v]=p.useState(""),[x,y]=p.useState([]),[b,w]=p.useState([]),[j,k]=p.useState({}),[_,S]=p.useState(!1),[E,N]=p.useState(null),I=p.useMemo(()=>({from:h?new Date(h).toISOString():null,to:g?new Date(g).toISOString():null}),[h,g]),P=async()=>{const{data:$}=await ne.from("audit_logs").select("user_id").not("user_id","is",null).limit(1e3),O=Array.from(new Set(($||[]).map(R=>R.user_id)));if(O.length>0){const{data:R}=await ne.from("v_users").select("id,email,display_name").in("id",O),C=(R||[]).map(M=>({id:M.id,email:M.email}));y(C);const F={};for(const M of R||[])F[M.id]={email:M.email,display_name:M.display_name};k(M=>({...M,...F}))}else y([]);const{data:T}=await ne.from("audit_logs").select("action").limit(1e3);w(Array.from(new Set((T||[]).map(R=>R.action))))},D=async()=>{const $=(a-1)*n,{data:O,error:T}=await ne.rpc("get_audit_logs",{p_user_id:c!=="all"?c:null,p_action:f!=="all"?f:null,p_from:I.from,p_to:I.to,p_limit:n,p_offset:$});if(!T){const R=O||[];t(R);let C=ne.from("audit_logs").select("id",{count:"exact"});c!=="all"&&(C=C.eq("user_id",c)),f!=="all"&&(C=C.eq("action",f)),I.from&&(C=C.gte("created_at",I.from)),I.to&&(C=C.lte("created_at",I.to));const{count:F}=await C;l(F||0);const A=Array.from(new Set(R.map(W=>W.user_id).filter(Boolean))).filter(W=>!j[W]);if(A.length>0){const{data:W}=await ne.from("v_users").select("id,email,display_name").in("id",A),G={};for(const Y of W||[])G[Y.id]={email:Y.email,display_name:Y.display_name};Object.keys(G).length&&k(Y=>({...Y,...G}))}}};p.useEffect(()=>{P()},[]),p.useEffect(()=>{D()},[a,n,c,f,I.from,I.to]),p.useEffect(()=>{const $=ne.channel("realtime:logs").on("postgres_changes",{event:"INSERT",schema:"public",table:"audit_logs"},O=>{const T=O.new;t(C=>[T,...C].slice(0,n));const R=T.user_id;R&&!j[R]&&ne.from("v_users").select("id,email,display_name").eq("id",R).maybeSingle().then(({data:C})=>{C&&k(F=>({...F,[C.id]:{email:C.email,display_name:C.display_name}}))}),l(C=>C+1)}).subscribe();return()=>{ne.removeChannel($)}},[n]);const L=Math.max(1,Math.ceil(o/n));return i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Logs"}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:"Filters"})}),i.jsxs(Je,{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"User"}),i.jsxs(Ut,{value:c,onValueChange:u,children:[i.jsx(Dt,{className:"h-9",children:i.jsx(Rt,{placeholder:"All"})}),i.jsxs($t,{children:[i.jsx(De,{value:"all",children:"All"}),x.map($=>i.jsx(De,{value:$.id,children:$.email},$.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"Action"}),i.jsxs(Ut,{value:f,onValueChange:d,children:[i.jsx(Dt,{className:"h-9",children:i.jsx(Rt,{placeholder:"All"})}),i.jsxs($t,{children:[i.jsx(De,{value:"all",children:"All"}),b.map($=>i.jsx(De,{value:$,children:$},$))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"From"}),i.jsx(Ve,{type:"date",value:h,onChange:$=>m($.target.value),className:"h-9"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"To"}),i.jsx(Ve,{type:"date",value:g,onChange:$=>v($.target.value),className:"h-9"})]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsxs(Ut,{value:String(n),onValueChange:$=>r(Number($)),children:[i.jsx(Dt,{className:"h-9",children:i.jsx(Rt,{placeholder:"Page size"})}),i.jsx($t,{children:[10,20,50,100].map($=>i.jsxs(De,{value:String($),children:[$," / page"]},$))})]}),i.jsx(Z,{variant:"outline",onClick:()=>{const $=e.map(O=>{var T;return{time:new Date(O.created_at).toISOString(),user:O.user_id?((T=j[O.user_id])==null?void 0:T.email)||O.user_id:"",action:O.action,resource:O.resource,resource_id:O.resource_id||"",ip:O.ip?O.ip.replace(/(\d+\.\d+\.\d+)\.\d+/,"$1.*"):"",context:JSON.stringify(QL(O.context||{}))}});OK(`logs_${new Date().toISOString()}.csv`,$)},children:"Export CSV"})]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{children:["Entries (",o,")"]})}),i.jsxs(Je,{children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(xb,{children:[i.jsx(yb,{children:i.jsxs(zs,{children:[i.jsx(Wn,{children:"Time"}),i.jsx(Wn,{children:"User"}),i.jsx(Wn,{children:"Action"}),i.jsx(Wn,{children:"Resource"}),i.jsx(Wn,{children:"Resource ID"}),i.jsx(Wn,{children:"IP"}),i.jsx(Wn,{})]})}),i.jsx(bb,{children:e.map($=>{var O,T;return i.jsxs(zs,{children:[i.jsx(Mn,{children:new Date($.created_at).toLocaleString()}),i.jsx(Mn,{children:$.user_id?((O=j[$.user_id])==null?void 0:O.display_name)||((T=j[$.user_id])==null?void 0:T.email)||$.user_id:""}),i.jsx(Mn,{children:$.action}),i.jsx(Mn,{children:$.resource}),i.jsx(Mn,{children:$.resource_id||""}),i.jsx(Mn,{children:$.ip||""}),i.jsx(Mn,{className:"text-right",children:i.jsx(Z,{variant:"outline",size:"sm",onClick:()=>{N($),S(!0)},children:"Details"})})]},$.id)})})]})}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",a," of ",L]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Z,{variant:"outline",disabled:a<=1,onClick:()=>s($=>Math.max(1,$-1)),children:"Prev"}),i.jsx(Z,{variant:"outline",disabled:a>=L,onClick:()=>s($=>Math.min(L,$+1)),children:"Next"})]})]})]})]}),i.jsx(mn,{open:_,onOpenChange:S,children:i.jsxs(cn,{className:"max-w-2xl",children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Log Details"}),i.jsx(Er,{children:E?new Date(E.created_at).toLocaleString():""})]}),E&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"User"}),i.jsx("div",{children:E.user_id?((B=j[E.user_id])==null?void 0:B.display_name)||((U=j[E.user_id])==null?void 0:U.email)||E.user_id:""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Action"}),i.jsx("div",{children:E.action})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Resource"}),i.jsx("div",{children:E.resource})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Resource ID"}),i.jsx("div",{children:E.resource_id||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"IP"}),i.jsx("div",{children:E.ip||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"User Agent"}),i.jsx("div",{className:"truncate",title:E.user_agent||void 0,children:E.user_agent||""})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Context"}),i.jsx("pre",{className:"max-h-64 overflow-auto rounded bg-muted p-3 text-xs",children:JSON.stringify(E.context??{},null,2)})]})]}),i.jsx(ma,{children:i.jsx(Z,{variant:"outline",onClick:()=>S(!1),children:"Close"})})]})})]})}const RR=({children:e})=>{var d,h,m,g;const{user:t,signOut:n}=Vr();p.useState("profile");const[r,a]=p.useState(!0),[s,o]=p.useState(!1),l=Ka(),c=(v,x)=>v?v.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2):x.substring(0,2).toUpperCase(),u=async()=>{try{await n()}catch(v){console.error("Error signing out:",v)}},f=()=>{l("/reset-password")};return i.jsxs(ls,{children:[i.jsx(cs,{asChild:!0,children:e}),i.jsx(Di,{className:"w-[300px] h-[320px] p-0 overflow-hidden",side:"left",align:"start",children:i.jsx("div",{className:"flex h-full",children:i.jsx("div",{className:"flex-1 p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(zr,{className:"h-10 w-10",children:[i.jsx(Us,{src:(d=t==null?void 0:t.user_metadata)==null?void 0:d.avatar_url,alt:((h=t==null?void 0:t.user_metadata)==null?void 0:h.full_name)||(t==null?void 0:t.email)}),i.jsx(qr,{className:"text-sm bg-blue-100 text-blue-600",children:c((m=t==null?void 0:t.user_metadata)==null?void 0:m.full_name,(t==null?void 0:t.email)||"")})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-sm font-semibold",children:((g=t==null?void 0:t.user_metadata)==null?void 0:g.full_name)||"Audit 4"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t==null?void 0:t.email})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Online Status"}),i.jsx("div",{className:"text-xs font-medium",children:"Online"})]}),i.jsx(xl,{checked:r,onCheckedChange:a,className:"scale-75"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Notifications"}),i.jsx("div",{className:"text-xs font-medium",children:"Disabled"})]}),i.jsx(xl,{checked:s,onCheckedChange:o,className:"scale-75"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium",children:"Reset Password"}),i.jsx(Z,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:f,children:i.jsx(Yh,{className:"h-3 w-3 text-muted-foreground"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium",children:"Log Out"}),i.jsx(Z,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:u,children:i.jsx(QS,{className:"h-3 w-3 text-muted-foreground"})})]})]})]})})})})]})};function vIe({icon:e,label:t,active:n=!1,onClick:r,collapsed:a,permissions:s,requireAll:o=!1,resourceAny:l=[],requiredRoles:c=[]}){const{hasAnyPermission:u,hasAllPermissions:f,hasAnyRole:d,loading:h}=jr();if(h)return null;const m=o?f(s):u(s),g=c.length===0||d(c);return!m||!g?null:i.jsxs("button",{type:"button",onClick:r,className:xe("group grid h-10 w-full grid-cols-[1.125rem,1fr] items-center rounded-md px-3 text-left text-sm transition-all duration-200 gap-2",n?"bg-blue-100 text-blue-700 border border-blue-200":"text-muted-foreground hover:bg-blue-50 hover:text-blue-600 hover:border hover:border-blue-100",a&&"grid-cols-[1.125rem,0fr]"),"aria-current":n?"page":void 0,title:a?t:void 0,children:[i.jsx(e,{className:`h-4 w-4 shrink-0 transition-colors ${n?"text-blue-600":"group-hover:text-blue-600"}`}),i.jsx("span",{className:xe("overflow-hidden whitespace-nowrap text-ellipsis transition-opacity duration-200",a&&"opacity-0 pointer-events-none"),children:t})]})}const yu=e=>{const t=Uu[e];return Array.isArray(t)?t.filter(n=>n==="read"||n.startsWith("read_")).map(n=>`${e}.${n}`):[]},Ug={admin:{key:"admin",label:"Admin Panel",icon:Ks,permissions:["admin_panel.read"],requireAll:!1,requiredRoles:[nr.MASTER_AGENT],description:"Master agent control center"},chat:{key:"chat",label:"Chat",icon:Bo,permissions:yu("threads"),requireAll:!1,description:"View and manage conversations"},analytics:{key:"analytics",label:"Analytics",icon:DL,permissions:yu("analytics"),requireAll:!1,description:"View performance metrics and insights"},logs:{key:"logs",label:"Logs",icon:BL,permissions:["audit_logs.read"],requireAll:!0,description:"View user action logs"},contacts:{key:"contacts",label:"Contacts",icon:ZS,permissions:yu("contacts"),requireAll:!1,description:"Manage customer contacts and identities"},platforms:{key:"platforms",label:"Connected Platforms",icon:WL,permissions:yu("channels"),requireAll:!1,description:"Manage connected channels and integrations"},aiagents:{key:"aiagents",label:"AI Agents",icon:ML,permissions:yu("ai_profiles"),requireAll:!1,description:"Configure and manage AI agents"},humanagents:{key:"humanagents",label:"Human Agents",icon:VL,permissions:yu("super_agents"),requireAll:!1,description:"Manage human agent assignments and roles"},permissions:{key:"permissions",label:"Permissions",icon:Gs,permissions:["roles.read"],requireAll:!0,requiredRoles:[nr.MASTER_AGENT],description:"Manage roles and permissions"}},Dk=["admin","chat","analytics","logs","contacts","platforms","aiagents","humanagents","permissions"];function xIe(){const{hasAnyPermission:e,hasAllPermissions:t,hasAnyRole:n,hasPermissionDB:r,userRoles:a,userPermissions:s,loading:o}=jr(),[l,c]=p.useState({});p.useEffect(()=>{if(o)return;let m=!1;return(async()=>{const v=await Promise.all(Dk.map(async x=>{const y=Ug[x],b=!y.requiredRoles||y.requiredRoles.length===0?!0:n(y.requiredRoles),w=await Promise.all(y.permissions.map(async k=>{const _=k.indexOf(".");if(_<0)return!1;const S=k.slice(0,_),E=k.slice(_+1);return await r(S,E)})),j=y.requireAll?w.every(Boolean):w.some(Boolean);return[x,b&&j]}));if(!m){const x={};for(const[y,b]of v)x[y]=b;c(x)}})(),()=>{m=!0}},[n,a,s,o]);const u=m=>{const g=Ug[m];if(!g)return!1;if(l[m]===!0)return!0;const v=g.requireAll?t(g.permissions):e(g.permissions),x=!g.requiredRoles||g.requiredRoles.length===0?!0:n(g.requiredRoles);return v&&x},f=()=>Dk.filter(m=>u(m));return{canAccessNavItem:u,getAccessibleNavItems:f,getDefaultNavItem:()=>{const m=f();return m.length>0?m[0]:null},getNavItem:m=>Ug[m],navigationConfig:Ug}}const zg=({step:e,title:t,description:n,emoji:r})=>i.jsxs("div",{className:"flex items-start gap-4 rounded-lg border border-border bg-card p-4 shadow-sm transition-transform hover:-translate-y-0.5",children:[i.jsx("div",{className:"text-2xl animate-float","aria-hidden":!0,children:r}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(It,{variant:"secondary",children:[e,"."]}),i.jsx("h3",{className:"text-base font-semibold text-foreground",children:t})]}),i.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n})]})]}),MR=()=>{var U,$,O,T,R;const[e,t]=p.useState("chat"),[n,r]=p.useState(!1),{user:a,signOut:s,setAccountDeactivated:o,accountDeactivated:l}=Vr();Ka();const[c,u]=gN(),{loading:f,hasRole:d}=jr(),{getDefaultNavItem:h,getNavItem:m,canAccessNavItem:g,getAccessibleNavItems:v}=xIe(),[x,y]=p.useState(!1),[b,w]=p.useState(!1),[j,k]=p.useState(null),[_,S]=p.useState(null),E="synka_ai_paused_ack",N=Dk,I=(C,F)=>{const M=new URLSearchParams(c);M.set("menu",C),u(M,F)};p.useEffect(()=>{if(f)return;const C=c.get("menu");if(C&&N.includes(C)){const F=C;if(g(F))F!==e&&t(F);else{const M=h();M&&M!==e&&(t(M),I(M,{replace:!0}))}}else if(!C){const F=h();I(F||"chat",{replace:!0})}},[c,g,h,f]),p.useEffect(()=>{if(f)return;const C=h();(!N.includes(e)||!g(e))&&C&&(t(C),I(C,{replace:!0}))},[h,g,e,N,f]);const P=async()=>{try{await s()}catch(C){console.error("Error signing out:",C)}},D=(C,F)=>C?C.split(" ").map(M=>M[0]).join("").toUpperCase().slice(0,2):F.substring(0,2).toUpperCase();p.useEffect(()=>{(async()=>{var F;try{const{data:M}=await ne.auth.getUser(),A=(F=M==null?void 0:M.user)==null?void 0:F.id;if(!A)return;const{data:W}=await ne.from("org_members").select("org_id").eq("user_id",A).limit(1).maybeSingle(),G=W==null?void 0:W.org_id;if(!G)return;const{data:Y,error:H}=await Nt.from("org_settings").select("ai_paused, ai_paused_at, ai_paused_by_user_id").eq("org_id",G).maybeSingle();if(H)throw H;const Q=!!(Y!=null&&Y.ai_paused);w(Q),k((Y==null?void 0:Y.ai_paused_at)??null);const X=Y==null?void 0:Y.ai_paused_by_user_id;if(X){let re=null;try{const{data:fe}=await Nt.from("users_profile").select("user_id, display_name").eq("user_id",X).maybeSingle();if(re=(fe==null?void 0:fe.display_name)??null,!re){const{data:J}=await Nt.from("v_users").select("id, email").eq("id",X).maybeSingle();re=(J==null?void 0:J.email)??X}}catch{re=X}S(re)}else S(null)}catch{}})()},[]),p.useEffect(()=>{b?localStorage.getItem(E)||y(!0):(localStorage.removeItem(E),y(!1))},[b]);const L=()=>{try{localStorage.setItem(E,Date.now().toString())}catch{}y(!1)},B=()=>{t("admin"),I("admin")};return l?i.jsx("div",{className:"min-h-screen bg-background text-foreground",children:i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Akun Dinonaktifkan"}),i.jsx("p",{className:"text-gray-600",children:"Akun Anda telah dinonaktifkan dan tidak dapat mengakses sistem."})]})})}):i.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[i.jsxs("div",{className:"mx-auto flex min-h-screen",children:[i.jsxs("aside",{className:`shrink-0 border-r border-sidebar-border bg-sidebar transition-all duration-300 ease-in-out ${n?"w-64":"w-[4.7rem]"} md:flex md:flex-col p-4 sticky top-0 h-screen overflow-y-auto`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[i.jsx("div",{className:"flex items-center justify-center px-2 py-3 transition-all duration-200",children:n?i.jsx("img",{src:"/synka.png",alt:"Synka",className:"h-10 w-auto object-contain transition-all duration-300 scale-125"}):i.jsx("img",{src:"/synka_logo.png",alt:"Synka Logo",className:"h-10 w-auto object-contain transition-all duration-300 scale-110"})}),i.jsx(lm,{className:"mb-4 mt-1"}),i.jsx("nav",{className:"flex flex-col gap-1 flex-1",children:v().map(C=>{const F=m(C);return i.jsx(vIe,{icon:F.icon,label:F.label,active:e===C,onClick:()=>{t(C),I(C)},collapsed:!n,permissions:F.permissions,requireAll:F.requireAll,resourceAny:F.resourceAny,requiredRoles:F.requiredRoles},C)})}),i.jsxs("div",{className:"mt-auto flex flex-col gap-1 pt-6",children:[i.jsx(lm,{className:"mb-3"}),i.jsx(RR,{children:i.jsxs("button",{type:"button",className:xe("group grid h-10 w-full grid-cols-[1.125rem,1fr] items-center rounded-md px-3 text-left text-sm transition-all duration-200 gap-2","text-muted-foreground hover:bg-blue-50 hover:text-blue-600 hover:border hover:border-blue-100",!n&&"grid-cols-[1.125rem,0fr]"),title:n?void 0:"Profile",children:[i.jsx(ZV,{className:"h-4 w-4 shrink-0 transition-colors group-hover:text-blue-600"}),i.jsx("span",{className:xe("overflow-hidden whitespace-nowrap text-ellipsis transition-opacity duration-200",!n&&"opacity-0 pointer-events-none"),children:"Profile"})]})})]})]}),i.jsxs("main",{className:"flex-1",children:[i.jsx("header",{className:"sticky top-0 z-10 border-b border-border bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:i.jsxs("div",{className:"flex items-center justify-between gap-4 px-4 py-3 md:px-8",children:[i.jsx("div",{className:"flex items-center gap-2 md:gap-3"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx(It,{className:"hidden sm:inline-flex bg-success text-success-foreground cursor-help",children:"Online"})}),i.jsx(le,{children:i.jsx("p",{children:"Status pengguna saat ini: Online"})})]}),i.jsxs("div",{className:"text-right hidden sm:block min-w-0",children:[i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("div",{className:"text-sm font-medium max-w-[28ch] truncate cursor-help",children:((U=a==null?void 0:a.user_metadata)==null?void 0:U.full_name)||"User"})}),i.jsx(le,{children:i.jsx("p",{children:"Nama lengkap pengguna"})})]}),i.jsxs(ce,{children:[i.jsx(ue,{asChild:!0,children:i.jsx("div",{className:"text-xs text-muted-foreground max-w-[32ch] truncate cursor-help",children:a==null?void 0:a.email})}),i.jsx(le,{children:i.jsx("p",{children:"Alamat email pengguna"})})]})]}),i.jsxs(_u,{children:[i.jsx(ku,{asChild:!0,children:i.jsx(Z,{variant:"ghost",className:"relative h-9 w-9 rounded-full",children:i.jsxs(zr,{className:"h-9 w-9",children:[i.jsx(Us,{src:($=a==null?void 0:a.user_metadata)==null?void 0:$.avatar_url,alt:((O=a==null?void 0:a.user_metadata)==null?void 0:O.full_name)||(a==null?void 0:a.email)}),i.jsx(qr,{className:"text-sm",children:D((T=a==null?void 0:a.user_metadata)==null?void 0:T.full_name,(a==null?void 0:a.email)||"")})]})})}),i.jsxs(ec,{className:"w-56",align:"end",forceMount:!0,children:[i.jsx(n5,{className:"font-normal",children:i.jsxs("div",{className:"flex flex-col space-y-1",children:[i.jsx("p",{className:"text-sm font-medium leading-none",children:((R=a==null?void 0:a.user_metadata)==null?void 0:R.full_name)||"User"}),i.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:a==null?void 0:a.email})]})}),i.jsx(t_,{}),i.jsx(RR,{children:i.jsxs("button",{className:"flex items-center w-full px-2 py-1.5 text-sm text-left hover:bg-accent hover:text-accent-foreground rounded-sm",children:[i.jsx(Uv,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Profile"})]})}),i.jsx(t_,{}),i.jsxs(Za,{onClick:P,children:[i.jsx(QS,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Log out"})]})]})]})]})]})}),i.jsx("section",{className:"px-4 py-6 md:px-8",children:e==="admin"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Admin Panel"}),i.jsx(pIe,{})]}):e==="chat"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Chat Inbox"}),i.jsx(rle,{})]}):e==="analytics"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Analytics Dashboard"}),i.jsx(Kt,{permission:"analytics.read",children:i.jsx(WOe,{})})]}):e==="contacts"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Contacts Management"}),i.jsx(Kt,{permission:"contacts.read",children:i.jsx(ule,{})})]}):e==="platforms"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Connected Platforms"}),i.jsx(Kt,{permission:"channels.read",children:i.jsx(ple,{})})]}):e==="aiagents"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"AI Agents"}),i.jsx(Kt,{permission:"ai_profiles.read",children:i.jsx(oIe,{})})]}):e==="humanagents"?i.jsxs(Kt,{permission:"super_agents.read",fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Human Agents."}),children:[i.jsx("h1",{className:"sr-only",children:"Human Agents"}),i.jsx(lIe,{})]}):e==="permissions"?i.jsx(Oq,{role:nr.MASTER_AGENT,fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Permissions."}),children:i.jsxs(Kt,{permission:"roles.read",children:[i.jsx("h1",{className:"sr-only",children:"Permissions"}),i.jsx(dIe,{})]})}):e==="logs"?i.jsxs(Kt,{permission:"audit_logs.read",fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Logs."}),children:[i.jsx("h1",{className:"sr-only",children:"Logs"}),i.jsx(gIe,{})]}):i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Selamat datang kembali di Synka!"}),i.jsxs("div",{className:"mt-6 grid gap-4 md:max-w-2xl",children:[i.jsx(zg,{step:1,title:"Hubungkan Platform",description:"Mulai terima pesan dari Whatsapp, IG, dan FB Anda!",emoji:""}),i.jsx(zg,{step:2,title:"Buat AI Agent",description:"Jawab pesan masuk dengan Agent AI Anda.",emoji:""}),i.jsx(zg,{step:3,title:"Undang Agen Manusia",description:"Undang tim Anda untuk membantu menjawab chat.",emoji:""}),i.jsx(zg,{step:4,title:"Konek AI Agent ke Inbox",description:"Hubungkan AI Agent dan Human Agent ke platform.",emoji:""})]}),i.jsxs("p",{className:"mt-4 text-sm text-muted-foreground",children:["Butuh bantuan lebih? ",i.jsx("a",{className:"text-brand underline underline-offset-4",href:"#",children:"Lihat Tutorial Youtube kami"})]})]})})]})]}),i.jsx(pre,{open:x,onClose:L,isMasterAgent:d(nr.MASTER_AGENT),pausedByName:_,pausedAt:j,onOpenAdminPanel:d(nr.MASTER_AGENT)?B:void 0})]})};function yIe(){var l,c,u,f;const{user:e,signOut:t}=Vr(),[n,r]=p.useState(!1),a=async()=>{r(!0);try{await t(),Ie.success("Signed out successfully")}catch{Ie.error("Failed to sign out")}finally{r(!1)}};if(!e)return null;const s=(d,h)=>d?d.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2):h.substring(0,2).toUpperCase(),o=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return i.jsxs(Ae,{className:"w-full max-w-md mx-auto",children:[i.jsxs(tt,{className:"text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsxs(zr,{className:"h-20 w-20",children:[i.jsx(Us,{src:(l=e.user_metadata)==null?void 0:l.avatar_url,alt:((c=e.user_metadata)==null?void 0:c.full_name)||e.email}),i.jsx(qr,{className:"text-lg",children:s((u=e.user_metadata)==null?void 0:u.full_name,e.email||"")})]})}),i.jsx(Qe,{className:"text-xl",children:((f=e.user_metadata)==null?void 0:f.full_name)||"User"}),i.jsx(di,{children:e.email}),i.jsx("div",{className:"flex justify-center mt-2",children:i.jsxs(It,{variant:"secondary",className:"flex items-center gap-1",children:[i.jsx(Gs,{className:"w-3 h-3"}),e.email_confirmed_at?"Verified":"Unverified"]})})]}),i.jsxs(Je,{className:"space-y-4",children:[i.jsx(lm,{}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Bv,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.email})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Gh,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Member since"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:o(e.created_at)})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Uv,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"User ID"}),i.jsxs("p",{className:"text-sm text-muted-foreground font-mono",children:[e.id.substring(0,8),"..."]})]})]})]}),i.jsx(lm,{}),i.jsxs(Z,{variant:"outline",className:"w-full",onClick:a,disabled:n,children:[i.jsx(QS,{className:"w-4 h-4 mr-2"}),n?"Signing out...":"Sign Out"]})]})]})}function bIe(){const e=Ka();return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs(Z,{variant:"ghost",onClick:()=>e("/"),className:"mb-4",children:[i.jsx(op,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your account settings and preferences"})]}),i.jsx(yIe,{})]})})}const wIe=[{id:"lowercase",test:e=>/[a-z]/.test(e),message:"Minimal 1 huruf kecil (a-z)"},{id:"uppercase",test:e=>/[A-Z]/.test(e),message:"Minimal 1 huruf besar (A-Z)"},{id:"number",test:e=>/[0-9]/.test(e),message:"Minimal 1 angka (0-9)"},{id:"symbol",test:e=>/[^A-Za-z0-9]/.test(e),message:"Minimal 1 simbol (contoh: !@#$)"},{id:"length",test:e=>e.length>=8,message:"Minimal 8 karakter"}],DR=e=>wIe.filter(t=>!t.test(e)).map(t=>t.message);function $R(){const[e,t]=p.useState(""),[n,r]=p.useState(""),[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[f,d]=p.useState(!1),[h,m]=p.useState(!1),g=Ka();p.useEffect(()=>{(async()=>{try{const j=new URL(window.location.href).searchParams.get("code");j&&await ne.auth.exchangeCodeForSession(j);const{data:{session:k}}=await ne.auth.getSession();k||u("Invalid or expired reset link. Please request a new password reset.")}catch(w){console.warn("Password setup init failed",w)}})()},[]);const v=async b=>{if(b.preventDefault(),l(!0),u(null),!e){u("Kata sandi baru belum diisi."),m(!0),l(!1);return}if(DR(e).length>0){u("Pastikan kata sandi memenuhi semua persyaratan."),m(!0),l(!1);return}if(e!==n){u("Konfirmasi kata sandi tidak sama."),l(!1);return}try{const{error:j}=await ne.auth.updateUser({password:e});if(j)throw j;try{const{data:{user:k}}=await ne.auth.getUser();k&&await ne.from("users_profile").update({password_set:!0}).eq("user_id",k.id)}catch(k){console.warn("Failed to update password_set flag:",k)}d(!0),Ie.success("Password updated successfully!");try{await ne.auth.signOut()}catch{}try{localStorage.removeItem("otpVerified"),localStorage.removeItem("otpRequired"),localStorage.removeItem("app.lastAuthEvent"),localStorage.removeItem("auth.intent")}catch{}setTimeout(()=>{g("/")},1500)}catch(j){console.error("Password reset error:",j),u(j instanceof Error?j.message:"Gagal memperbarui kata sandi."),Ie.error("Gagal memperbarui kata sandi.")}finally{l(!1)}},x=h&&e.length>0,y=p.useMemo(()=>x?DR(e):[],[e,x]);return f?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Ae,{className:"w-full max-w-md",children:[i.jsxs(tt,{className:"text-center",children:[i.jsx(Qe,{className:"text-2xl font-bold text-green-600",children:"Success!"}),i.jsx(di,{children:"Your password has been updated successfully. You will be redirected to the login page shortly."})]}),i.jsx(Je,{className:"text-center",children:i.jsx(Z,{onClick:()=>g("/"),className:"w-full",children:"Go to Login"})})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Ae,{className:"w-full max-w-md",children:[i.jsxs(tt,{className:"space-y-1",children:[i.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>g("/"),className:"absolute top-4 left-4",children:[i.jsx(op,{className:"w-4 h-4 mr-2"}),"Back to Login"]}),i.jsxs("div",{className:"text-center",children:[i.jsx(Qe,{className:"text-2xl font-bold",children:"Reset Password"}),i.jsx(di,{children:"Enter your new password below"})]})]}),i.jsxs(Je,{children:[c&&i.jsx(sm,{className:"mb-4 border-red-200 bg-red-50",children:i.jsx(om,{className:"text-red-800",children:c})}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"password",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ve,{id:"password",type:a?"text":"password",placeholder:"Enter new password",value:e,onChange:b=>{h||m(!0),t(b.target.value)},className:"pl-10 pr-10",required:!0,minLength:8}),i.jsx(Z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>s(!a),children:a?i.jsx(UL,{className:"h-4 w-4"}):i.jsx(JS,{className:"h-4 w-4"})})]}),y.length>0&&i.jsx("div",{className:"mt-2 space-y-1",children:y.map(b=>i.jsxs("p",{className:"flex items-center gap-2 text-xs text-red-600",children:[i.jsx(FL,{className:"h-3 w-3"}),b]},b))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"confirm-password",children:"Confirm New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ve,{id:"confirm-password",type:a?"text":"password",placeholder:"Confirm new password",value:n,onChange:b=>r(b.target.value),className:"pl-10",required:!0,minLength:8})]})]}),i.jsx(Z,{type:"submit",className:"w-full",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating password..."]}):"Update Password"})]})]})]})})}var jIe=Object.defineProperty,_Ie=Object.defineProperties,kIe=Object.getOwnPropertyDescriptors,ny=Object.getOwnPropertySymbols,Iq=Object.prototype.hasOwnProperty,Rq=Object.prototype.propertyIsEnumerable,LR=(e,t,n)=>t in e?jIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,SIe=(e,t)=>{for(var n in t||(t={}))Iq.call(t,n)&&LR(e,n,t[n]);if(ny)for(var n of ny(t))Rq.call(t,n)&&LR(e,n,t[n]);return e},NIe=(e,t)=>_Ie(e,kIe(t)),CIe=(e,t)=>{var n={};for(var r in e)Iq.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ny)for(var r of ny(e))t.indexOf(r)<0&&Rq.call(e,r)&&(n[r]=e[r]);return n};function AIe(e){let t=setTimeout(e,0),n=setTimeout(e,10),r=setTimeout(e,50);return[t,n,r]}function EIe(e){let t=p.useRef();return p.useEffect(()=>{t.current=e}),t.current}var PIe=18,Mq=40,TIe=`${Mq}px`,OIe=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function IIe({containerRef:e,inputRef:t,pushPasswordManagerStrategy:n,isFocused:r}){let[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(!1),f=p.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&a&&o,[a,o,n]),d=p.useCallback(()=>{let h=e.current,m=t.current;if(!h||!m||c||n==="none")return;let g=h,v=g.getBoundingClientRect().left+g.offsetWidth,x=g.getBoundingClientRect().top+g.offsetHeight/2,y=v-PIe,b=x;document.querySelectorAll(OIe).length===0&&document.elementFromPoint(y,b)===h||(s(!0),u(!0))},[e,t,c,n]);return p.useEffect(()=>{let h=e.current;if(!h||n==="none")return;function m(){let v=window.innerWidth-h.getBoundingClientRect().right;l(v>=Mq)}m();let g=setInterval(m,1e3);return()=>{clearInterval(g)}},[e,n]),p.useEffect(()=>{let h=r||document.activeElement===t.current;if(n==="none"||!h)return;let m=setTimeout(d,0),g=setTimeout(d,2e3),v=setTimeout(d,5e3),x=setTimeout(()=>{u(!0)},6e3);return()=>{clearTimeout(m),clearTimeout(g),clearTimeout(v),clearTimeout(x)}},[t,r,n,d]),{hasPWMBadge:a,willPushPWMBadge:f,PWM_BADGE_SPACE_WIDTH:TIe}}var Dq=p.createContext({}),$q=p.forwardRef((e,t)=>{var n=e,{value:r,onChange:a,maxLength:s,textAlign:o="left",pattern:l,placeholder:c,inputMode:u="numeric",onComplete:f,pushPasswordManagerStrategy:d="increase-width",pasteTransformer:h,containerClassName:m,noScriptCSSFallback:g=RIe,render:v,children:x}=n,y=CIe(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),b,w,j,k,_;let[S,E]=p.useState(typeof y.defaultValue=="string"?y.defaultValue:""),N=r??S,I=EIe(N),P=p.useCallback(z=>{a==null||a(z),E(z)},[a]),D=p.useMemo(()=>l?typeof l=="string"?new RegExp(l):l:null,[l]),L=p.useRef(null),B=p.useRef(null),U=p.useRef({value:N,onChange:P,isIOS:typeof window<"u"&&((w=(b=window==null?void 0:window.CSS)==null?void 0:b.supports)==null?void 0:w.call(b,"-webkit-touch-callout","none"))}),$=p.useRef({prev:[(j=L.current)==null?void 0:j.selectionStart,(k=L.current)==null?void 0:k.selectionEnd,(_=L.current)==null?void 0:_.selectionDirection]});p.useImperativeHandle(t,()=>L.current,[]),p.useEffect(()=>{let z=L.current,q=B.current;if(!z||!q)return;U.current.value!==z.value&&U.current.onChange(z.value),$.current.prev=[z.selectionStart,z.selectionEnd,z.selectionDirection];function ae(){if(document.activeElement!==z){M(null),W(null);return}let Se=z.selectionStart,Le=z.selectionEnd,ge=z.selectionDirection,We=z.maxLength,dt=z.value,bt=$.current.prev,Et=-1,te=-1,me;if(dt.length!==0&&Se!==null&&Le!==null){let he=Se===Le,Ot=Se===dt.length&&dt.length<We;if(he&&!Ot){let vt=Se;if(vt===0)Et=0,te=1,me="forward";else if(vt===We)Et=vt-1,te=vt,me="backward";else if(We>1&&dt.length>1){let wt=0;if(bt[0]!==null&&bt[1]!==null){me=vt<bt[1]?"backward":"forward";let ve=bt[0]===bt[1]&&bt[0]<We;me==="backward"&&!ve&&(wt=-1)}Et=wt+vt,te=wt+vt+1}}Et!==-1&&te!==-1&&Et!==te&&L.current.setSelectionRange(Et,te,me)}let Fe=Et!==-1?Et:Se,He=te!==-1?te:Le,Ue=me??ge;M(Fe),W(He),$.current.prev=[Fe,He,Ue]}if(document.addEventListener("selectionchange",ae,{capture:!0}),ae(),document.activeElement===z&&C(!0),!document.getElementById("input-otp-style")){let Se=document.createElement("style");if(Se.id="input-otp-style",document.head.appendChild(Se),Se.sheet){let Le="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Qf(Se.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Qf(Se.sheet,`[data-input-otp]:autofill { ${Le} }`),Qf(Se.sheet,`[data-input-otp]:-webkit-autofill { ${Le} }`),Qf(Se.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Qf(Se.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let se=()=>{q&&q.style.setProperty("--root-height",`${z.clientHeight}px`)};se();let be=new ResizeObserver(se);return be.observe(z),()=>{document.removeEventListener("selectionchange",ae,{capture:!0}),be.disconnect()}},[]);let[O,T]=p.useState(!1),[R,C]=p.useState(!1),[F,M]=p.useState(null),[A,W]=p.useState(null);p.useEffect(()=>{AIe(()=>{var z,q,ae,se;(z=L.current)==null||z.dispatchEvent(new Event("input"));let be=(q=L.current)==null?void 0:q.selectionStart,Se=(ae=L.current)==null?void 0:ae.selectionEnd,Le=(se=L.current)==null?void 0:se.selectionDirection;be!==null&&Se!==null&&(M(be),W(Se),$.current.prev=[be,Se,Le])})},[N,R]),p.useEffect(()=>{I!==void 0&&N!==I&&I.length<s&&N.length===s&&(f==null||f(N))},[s,f,I,N]);let G=IIe({containerRef:B,inputRef:L,pushPasswordManagerStrategy:d,isFocused:R}),Y=p.useCallback(z=>{let q=z.currentTarget.value.slice(0,s);if(q.length>0&&D&&!D.test(q)){z.preventDefault();return}typeof I=="string"&&q.length<I.length&&document.dispatchEvent(new Event("selectionchange")),P(q)},[s,P,I,D]),H=p.useCallback(()=>{var z;if(L.current){let q=Math.min(L.current.value.length,s-1),ae=L.current.value.length;(z=L.current)==null||z.setSelectionRange(q,ae),M(q),W(ae)}C(!0)},[s]),Q=p.useCallback(z=>{var q,ae;let se=L.current;if(!h&&(!U.current.isIOS||!z.clipboardData||!se))return;let be=z.clipboardData.getData("text/plain"),Se=h?h(be):be;z.preventDefault();let Le=(q=L.current)==null?void 0:q.selectionStart,ge=(ae=L.current)==null?void 0:ae.selectionEnd,We=(Le!==ge?N.slice(0,Le)+Se+N.slice(ge):N.slice(0,Le)+Se+N.slice(Le)).slice(0,s);if(We.length>0&&D&&!D.test(We))return;se.value=We,P(We);let dt=Math.min(We.length,s-1),bt=We.length;se.setSelectionRange(dt,bt),M(dt),W(bt)},[s,P,D,N]),X=p.useMemo(()=>({position:"relative",cursor:y.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[y.disabled]),re=p.useMemo(()=>({position:"absolute",inset:0,width:G.willPushPWMBadge?`calc(100% + ${G.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:G.willPushPWMBadge?`inset(0 ${G.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[G.PWM_BADGE_SPACE_WIDTH,G.willPushPWMBadge,o]),fe=p.useMemo(()=>p.createElement("input",NIe(SIe({autoComplete:y.autoComplete||"one-time-code"},y),{"data-input-otp":!0,"data-input-otp-placeholder-shown":N.length===0||void 0,"data-input-otp-mss":F,"data-input-otp-mse":A,inputMode:u,pattern:D==null?void 0:D.source,"aria-placeholder":c,style:re,maxLength:s,value:N,ref:L,onPaste:z=>{var q;Q(z),(q=y.onPaste)==null||q.call(y,z)},onChange:Y,onMouseOver:z=>{var q;T(!0),(q=y.onMouseOver)==null||q.call(y,z)},onMouseLeave:z=>{var q;T(!1),(q=y.onMouseLeave)==null||q.call(y,z)},onFocus:z=>{var q;H(),(q=y.onFocus)==null||q.call(y,z)},onBlur:z=>{var q;C(!1),(q=y.onBlur)==null||q.call(y,z)}})),[Y,H,Q,u,re,s,A,F,y,D==null?void 0:D.source,N]),J=p.useMemo(()=>({slots:Array.from({length:s}).map((z,q)=>{var ae;let se=R&&F!==null&&A!==null&&(F===A&&q===F||q>=F&&q<A),be=N[q]!==void 0?N[q]:null,Se=N[0]!==void 0?null:(ae=c==null?void 0:c[q])!=null?ae:null;return{char:be,placeholderChar:Se,isActive:se,hasFakeCaret:se&&be===null}}),isFocused:R,isHovering:!y.disabled&&O}),[R,O,s,A,F,y.disabled,N]),ye=p.useMemo(()=>v?v(J):p.createElement(Dq.Provider,{value:J},x),[x,J,v]);return p.createElement(p.Fragment,null,g!==null&&p.createElement("noscript",null,p.createElement("style",null,g)),p.createElement("div",{ref:B,"data-input-otp-container":!0,style:X,className:m},ye,p.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},fe)))});$q.displayName="Input";function Qf(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var RIe=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const Lq=p.forwardRef(({className:e,containerClassName:t,...n},r)=>i.jsx($q,{ref:r,containerClassName:xe("flex items-center gap-2 has-[:disabled]:opacity-50",t),className:xe("disabled:cursor-not-allowed",e),...n}));Lq.displayName="InputOTP";const Fq=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:xe("flex items-center",e),...t}));Fq.displayName="InputOTPGroup";const Ql=p.forwardRef(({index:e,className:t,...n},r)=>{const a=p.useContext(Dq),{char:s,hasFakeCaret:o,isActive:l}=a.slots[e];return i.jsxs("div",{ref:r,className:xe("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",l&&"z-10 ring-2 ring-ring ring-offset-background",t),...n,children:[s,o&&i.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});Ql.displayName="InputOTPSlot";const MIe=p.forwardRef(({...e},t)=>i.jsx("div",{ref:t,role:"separator",...e,children:i.jsx(qV,{})}));MIe.displayName="InputOTPSeparator";function DIe(){const e=Ka(),t=kl(),{user:n,session:r,otpRequired:a,setOtpVerified:s}=Vr(),[o,l]=p.useState(""),[c,u]=p.useState(!1),[f,d]=p.useState(!1),[h,m]=p.useState(null),[g,v]=p.useState(null),[x,y]=p.useState(!1),[b,w]=p.useState(0),[j,k]=p.useState(0);p.useEffect(()=>{v((n==null?void 0:n.email)??null),(!n||!a)&&e("/",{replace:!0});try{const N=new URL(window.location.href),I=N.searchParams.get("type"),P=!!N.searchParams.get("code"),L=(window.location.hash||"").includes("access_token=");y(I==="recovery"||P||L);const B=localStorage.getItem("otpCooldownUntil"),U=B?parseInt(B,10):0;U&&U>Date.now()&&w(U)}catch{}},[n,a,e]),p.useEffect(()=>{if(!b){k(0);return}const N=()=>{const P=Math.ceil((b-Date.now())/1e3);if(P<=0){k(0),w(0);try{localStorage.removeItem("otpCooldownUntil")}catch{}}else k(P)};N();const I=setInterval(N,1e3);return()=>clearInterval(I)},[b]);const _=async N=>{var I,P;N.preventDefault(),u(!0),m(null);try{const D=n==null?void 0:n.email,{data:L,error:B}=await ne.rpc("verify_email_2fa",{p_code:o,p_session_minutes:10,p_user:n==null?void 0:n.id});if(B)throw B;if(!L)throw new Error("Invalid code");s(!0);try{localStorage.setItem("otpVerified","true"),localStorage.removeItem("auth.intent")}catch{}if(Ie.success("Verification successful"),(((I=t==null?void 0:t.state)==null?void 0:I.intent)||null)==="recovery"||x)e("/reset-password",{replace:!0});else{const $=((P=t==null?void 0:t.state)==null?void 0:P.from)||"/";e($,{replace:!0})}}catch(D){m((D==null?void 0:D.message)||"Verification failed"),Ie.error("Verification failed")}finally{u(!1)}},S=async()=>{if(!(j>0)){d(!0);try{await ne.functions.invoke("send-2fa-login-email",{headers:r!=null&&r.access_token?{Authorization:`Bearer ${r.access_token}`}:void 0}),Ie.success("A new code was sent");const N=Date.now()+3e4;w(N);try{localStorage.setItem("otpCooldownUntil",String(N))}catch{}}catch{Ie.error("Could not resend code")}finally{d(!1)}}},E=async()=>{try{await ne.auth.signOut()}catch{}try{localStorage.removeItem("otpVerified"),localStorage.removeItem("otpRequired"),localStorage.removeItem("auth.intent"),localStorage.removeItem("otpCooldownUntil")}catch{}e("/",{replace:!0})};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Ae,{className:"w-full max-w-md",children:[i.jsxs(tt,{className:"space-y-1 text-center",children:[i.jsx(Qe,{className:"text-2xl font-bold",children:"Enter verification code"}),i.jsxs(di,{children:["We sent a 6-digit code to ",g?i.jsx("span",{className:"font-medium",children:g}):"your email","."]})]}),i.jsxs(Je,{children:[h&&i.jsx(sm,{className:"mb-4 border-red-200 bg-red-50",children:i.jsx(om,{className:"text-red-800",children:h})}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx(Lq,{maxLength:6,value:o,onChange:l,autoFocus:!0,children:i.jsxs(Fq,{children:[i.jsx(Ql,{index:0}),i.jsx(Ql,{index:1}),i.jsx(Ql,{index:2}),i.jsx(Ql,{index:3}),i.jsx(Ql,{index:4}),i.jsx(Ql,{index:5})]})})}),i.jsx(Z,{type:"submit",className:"w-full",disabled:c||o.length!==6,children:c?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify"}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsx("span",{children:"Didn't get the code?"}),i.jsx(Z,{type:"button",variant:"link",className:"px-0",onClick:S,disabled:f||j>0,children:f?"Resending...":j>0?`Resend in ${j}s`:"Resend code"})]}),i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(Z,{type:"button",variant:"ghost",onClick:E,children:"Sign out"})})]})]})]})})}function $Ie(){const e=Ka();return p.useEffect(()=>{(async()=>{try{try{const n=[];for(let a=0;a<localStorage.length;a++){const s=localStorage.key(a);s&&n.push(s)}n.forEach(a=>{try{localStorage.removeItem(a)}catch{}});const r=[];for(let a=0;a<sessionStorage.length;a++){const s=sessionStorage.key(a);s&&r.push(s)}r.forEach(a=>{try{sessionStorage.removeItem(a)}catch{}})}catch(n){console.warn("Error clearing cache:",n)}await ne.auth.signOut()}catch{}e("/",{replace:!0})})()},[e]),null}const LIe=()=>{const e=kl();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function FIe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const BIe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,UIe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,zIe={};function FR(e,t){return(zIe.jsx?UIe:BIe).test(e)}const qIe=/[ \t\n\f\r]/g;function WIe(e){return typeof e=="object"?e.type==="text"?BR(e.value):!1:BR(e)}function BR(e){return e.replace(qIe,"")===""}class Bp{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Bp.prototype.normal={};Bp.prototype.property={};Bp.prototype.space=void 0;function Bq(e,t){const n={},r={};for(const a of e)Object.assign(n,a.property),Object.assign(r,a.normal);return new Bp(n,r,t)}function $k(e){return e.toLowerCase()}class Pa{constructor(t,n){this.attribute=n,this.property=t}}Pa.prototype.attribute="";Pa.prototype.booleanish=!1;Pa.prototype.boolean=!1;Pa.prototype.commaOrSpaceSeparated=!1;Pa.prototype.commaSeparated=!1;Pa.prototype.defined=!1;Pa.prototype.mustUseProperty=!1;Pa.prototype.number=!1;Pa.prototype.overloadedBoolean=!1;Pa.prototype.property="";Pa.prototype.spaceSeparated=!1;Pa.prototype.space=void 0;let HIe=0;const Tt=nu(),tr=nu(),Lk=nu(),Oe=nu(),_n=nu(),id=nu(),Oa=nu();function nu(){return 2**++HIe}const Fk=Object.freeze(Object.defineProperty({__proto__:null,boolean:Tt,booleanish:tr,commaOrSpaceSeparated:Oa,commaSeparated:id,number:Oe,overloadedBoolean:Lk,spaceSeparated:_n},Symbol.toStringTag,{value:"Module"})),mj=Object.keys(Fk);class _A extends Pa{constructor(t,n,r,a){let s=-1;if(super(t,n),UR(this,"space",a),typeof r=="number")for(;++s<mj.length;){const o=mj[s];UR(this,mj[s],(r&Fk[o])===Fk[o])}}}_A.prototype.defined=!0;function UR(e,t,n){n&&(e[t]=n)}function wf(e){const t={},n={};for(const[r,a]of Object.entries(e.properties)){const s=new _A(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[$k(r)]=r,n[$k(s.attribute)]=r}return new Bp(t,n,e.space)}const Uq=wf({properties:{ariaActiveDescendant:null,ariaAtomic:tr,ariaAutoComplete:null,ariaBusy:tr,ariaChecked:tr,ariaColCount:Oe,ariaColIndex:Oe,ariaColSpan:Oe,ariaControls:_n,ariaCurrent:null,ariaDescribedBy:_n,ariaDetails:null,ariaDisabled:tr,ariaDropEffect:_n,ariaErrorMessage:null,ariaExpanded:tr,ariaFlowTo:_n,ariaGrabbed:tr,ariaHasPopup:null,ariaHidden:tr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:_n,ariaLevel:Oe,ariaLive:null,ariaModal:tr,ariaMultiLine:tr,ariaMultiSelectable:tr,ariaOrientation:null,ariaOwns:_n,ariaPlaceholder:null,ariaPosInSet:Oe,ariaPressed:tr,ariaReadOnly:tr,ariaRelevant:null,ariaRequired:tr,ariaRoleDescription:_n,ariaRowCount:Oe,ariaRowIndex:Oe,ariaRowSpan:Oe,ariaSelected:tr,ariaSetSize:Oe,ariaSort:null,ariaValueMax:Oe,ariaValueMin:Oe,ariaValueNow:Oe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function zq(e,t){return t in e?e[t]:t}function qq(e,t){return zq(e,t.toLowerCase())}const VIe=wf({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:id,acceptCharset:_n,accessKey:_n,action:null,allow:null,allowFullScreen:Tt,allowPaymentRequest:Tt,allowUserMedia:Tt,alt:null,as:null,async:Tt,autoCapitalize:null,autoComplete:_n,autoFocus:Tt,autoPlay:Tt,blocking:_n,capture:null,charSet:null,checked:Tt,cite:null,className:_n,cols:Oe,colSpan:null,content:null,contentEditable:tr,controls:Tt,controlsList:_n,coords:Oe|id,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Tt,defer:Tt,dir:null,dirName:null,disabled:Tt,download:Lk,draggable:tr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Tt,formTarget:null,headers:_n,height:Oe,hidden:Lk,high:Oe,href:null,hrefLang:null,htmlFor:_n,httpEquiv:_n,id:null,imageSizes:null,imageSrcSet:null,inert:Tt,inputMode:null,integrity:null,is:null,isMap:Tt,itemId:null,itemProp:_n,itemRef:_n,itemScope:Tt,itemType:_n,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Tt,low:Oe,manifest:null,max:null,maxLength:Oe,media:null,method:null,min:null,minLength:Oe,multiple:Tt,muted:Tt,name:null,nonce:null,noModule:Tt,noValidate:Tt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Tt,optimum:Oe,pattern:null,ping:_n,placeholder:null,playsInline:Tt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Tt,referrerPolicy:null,rel:_n,required:Tt,reversed:Tt,rows:Oe,rowSpan:Oe,sandbox:_n,scope:null,scoped:Tt,seamless:Tt,selected:Tt,shadowRootClonable:Tt,shadowRootDelegatesFocus:Tt,shadowRootMode:null,shape:null,size:Oe,sizes:null,slot:null,span:Oe,spellCheck:tr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Oe,step:null,style:null,tabIndex:Oe,target:null,title:null,translate:null,type:null,typeMustMatch:Tt,useMap:null,value:tr,width:Oe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:_n,axis:null,background:null,bgColor:null,border:Oe,borderColor:null,bottomMargin:Oe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Tt,declare:Tt,event:null,face:null,frame:null,frameBorder:null,hSpace:Oe,leftMargin:Oe,link:null,longDesc:null,lowSrc:null,marginHeight:Oe,marginWidth:Oe,noResize:Tt,noHref:Tt,noShade:Tt,noWrap:Tt,object:null,profile:null,prompt:null,rev:null,rightMargin:Oe,rules:null,scheme:null,scrolling:tr,standby:null,summary:null,text:null,topMargin:Oe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Oe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Tt,disableRemotePlayback:Tt,prefix:null,property:null,results:Oe,security:null,unselectable:null},space:"html",transform:qq}),KIe=wf({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Oa,accentHeight:Oe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Oe,amplitude:Oe,arabicForm:null,ascent:Oe,attributeName:null,attributeType:null,azimuth:Oe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Oe,by:null,calcMode:null,capHeight:Oe,className:_n,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Oe,diffuseConstant:Oe,direction:null,display:null,dur:null,divisor:Oe,dominantBaseline:null,download:Tt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Oe,enableBackground:null,end:null,event:null,exponent:Oe,externalResourcesRequired:null,fill:null,fillOpacity:Oe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:id,g2:id,glyphName:id,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Oe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Oe,horizOriginX:Oe,horizOriginY:Oe,id:null,ideographic:Oe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Oe,k:Oe,k1:Oe,k2:Oe,k3:Oe,k4:Oe,kernelMatrix:Oa,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Oe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Oe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Oe,overlineThickness:Oe,paintOrder:null,panose1:null,path:null,pathLength:Oe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:_n,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Oe,pointsAtY:Oe,pointsAtZ:Oe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Oa,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Oa,rev:Oa,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Oa,requiredFeatures:Oa,requiredFonts:Oa,requiredFormats:Oa,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Oe,specularExponent:Oe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Oe,strikethroughThickness:Oe,string:null,stroke:null,strokeDashArray:Oa,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Oe,strokeOpacity:Oe,strokeWidth:null,style:null,surfaceScale:Oe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Oa,tabIndex:Oe,tableValues:null,target:null,targetX:Oe,targetY:Oe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Oa,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Oe,underlineThickness:Oe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Oe,values:null,vAlphabetic:Oe,vMathematical:Oe,vectorEffect:null,vHanging:Oe,vIdeographic:Oe,version:null,vertAdvY:Oe,vertOriginX:Oe,vertOriginY:Oe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Oe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:zq}),Wq=wf({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Hq=wf({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:qq}),Vq=wf({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),GIe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},YIe=/[A-Z]/g,zR=/-[a-z]/g,XIe=/^data[-\w.:]+$/i;function JIe(e,t){const n=$k(t);let r=t,a=Pa;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&XIe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(zR,ZIe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!zR.test(s)){let o=s.replace(YIe,QIe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}a=_A}return new a(r,t)}function QIe(e){return"-"+e.toLowerCase()}function ZIe(e){return e.charAt(1).toUpperCase()}const eRe=Bq([Uq,VIe,Wq,Hq,Vq],"html"),kA=Bq([Uq,KIe,Wq,Hq,Vq],"svg");function tRe(e){return e.join(" ").trim()}var SA={},qR=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,nRe=/\n/g,rRe=/^\s*/,aRe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,iRe=/^:\s*/,sRe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,oRe=/^[;\s]*/,lRe=/^\s+|\s+$/g,cRe=`
`,WR="/",HR="*",tc="",uRe="comment",dRe="declaration",fRe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function a(g){var v=g.match(nRe);v&&(n+=v.length);var x=g.lastIndexOf(cRe);r=~x?g.length-x:r+g.length}function s(){var g={line:n,column:r};return function(v){return v.position=new o(g),u(),v}}function o(g){this.start=g,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(g){var v=new Error(t.source+":"+n+":"+r+": "+g);if(v.reason=g,v.filename=t.source,v.line=n,v.column=r,v.source=e,!t.silent)throw v}function c(g){var v=g.exec(e);if(v){var x=v[0];return a(x),e=e.slice(x.length),v}}function u(){c(rRe)}function f(g){var v;for(g=g||[];v=d();)v!==!1&&g.push(v);return g}function d(){var g=s();if(!(WR!=e.charAt(0)||HR!=e.charAt(1))){for(var v=2;tc!=e.charAt(v)&&(HR!=e.charAt(v)||WR!=e.charAt(v+1));)++v;if(v+=2,tc===e.charAt(v-1))return l("End of comment missing");var x=e.slice(2,v-2);return r+=2,a(x),e=e.slice(v),r+=2,g({type:uRe,comment:x})}}function h(){var g=s(),v=c(aRe);if(v){if(d(),!c(iRe))return l("property missing ':'");var x=c(sRe),y=g({type:dRe,property:VR(v[0].replace(qR,tc)),value:x?VR(x[0].replace(qR,tc)):tc});return c(oRe),y}}function m(){var g=[];f(g);for(var v;v=h();)v!==!1&&(g.push(v),f(g));return g}return u(),m()};function VR(e){return e?e.replace(lRe,tc):tc}var hRe=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(SA,"__esModule",{value:!0});SA.default=pRe;var mRe=hRe(fRe);function pRe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,mRe.default)(e),a=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,l=s.value;a?t(o,l,s):l&&(n=n||{},n[o]=l)}}),n}var f0={};Object.defineProperty(f0,"__esModule",{value:!0});f0.camelCase=void 0;var gRe=/^--[a-zA-Z0-9_-]+$/,vRe=/-([a-z])/g,xRe=/^[^-]+$/,yRe=/^-(webkit|moz|ms|o|khtml)-/,bRe=/^-(ms)-/,wRe=function(e){return!e||xRe.test(e)||gRe.test(e)},jRe=function(e,t){return t.toUpperCase()},KR=function(e,t){return"".concat(t,"-")},_Re=function(e,t){return t===void 0&&(t={}),wRe(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(bRe,KR):e=e.replace(yRe,KR),e.replace(vRe,jRe))};f0.camelCase=_Re;var kRe=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},SRe=kRe(SA),NRe=f0;function Bk(e,t){var n={};return!e||typeof e!="string"||(0,SRe.default)(e,function(r,a){r&&a&&(n[(0,NRe.camelCase)(r,t)]=a)}),n}Bk.default=Bk;var CRe=Bk;const ARe=fn(CRe),Kq=Gq("end"),NA=Gq("start");function Gq(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function ERe(e){const t=NA(e),n=Kq(e);if(t&&n)return{start:t,end:n}}function Ah(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?GR(e.position):"start"in e||"end"in e?GR(e):"line"in e||"column"in e?Uk(e):""}function Uk(e){return YR(e&&e.line)+":"+YR(e&&e.column)}function GR(e){return Uk(e&&e.start)+"-"+Uk(e&&e.end)}function YR(e){return e&&typeof e=="number"?e:1}class Kr extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let a="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?a=t:!s.cause&&t&&(o=!0,a=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=l?l.line:void 0,this.name=Ah(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Kr.prototype.file="";Kr.prototype.name="";Kr.prototype.reason="";Kr.prototype.message="";Kr.prototype.stack="";Kr.prototype.column=void 0;Kr.prototype.line=void 0;Kr.prototype.ancestors=void 0;Kr.prototype.cause=void 0;Kr.prototype.fatal=void 0;Kr.prototype.place=void 0;Kr.prototype.ruleId=void 0;Kr.prototype.source=void 0;const CA={}.hasOwnProperty,PRe=new Map,TRe=/[A-Z]/g,ORe=new Set(["table","tbody","thead","tfoot","tr"]),IRe=new Set(["td","th"]),Yq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function RRe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=zRe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=URe(n,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?kA:eRe,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Xq(a,e,void 0);return s&&typeof s!="string"?s:a.create(e,a.Fragment,{children:s||void 0},void 0)}function Xq(e,t,n){if(t.type==="element")return MRe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return DRe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return LRe(e,t,n);if(t.type==="mdxjsEsm")return $Re(e,t);if(t.type==="root")return FRe(e,t,n);if(t.type==="text")return BRe(e,t)}function MRe(e,t,n){const r=e.schema;let a=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(a=kA,e.schema=a),e.ancestors.push(t);const s=Qq(e,t.tagName,!1),o=qRe(e,t);let l=EA(e,t);return ORe.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!WIe(c):!0})),Jq(e,o,s,t),AA(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function DRe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Ym(e,t.position)}function $Re(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Ym(e,t.position)}function LRe(e,t,n){const r=e.schema;let a=r;t.name==="svg"&&r.space==="html"&&(a=kA,e.schema=a),e.ancestors.push(t);const s=t.name===null?e.Fragment:Qq(e,t.name,!0),o=WRe(e,t),l=EA(e,t);return Jq(e,o,s,t),AA(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function FRe(e,t,n){const r={};return AA(r,EA(e,t)),e.create(t,e.Fragment,r,n)}function BRe(e,t){return t.value}function Jq(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function AA(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function URe(e,t,n){return r;function r(a,s,o,l){const u=Array.isArray(o.children)?n:t;return l?u(s,o,l):u(s,o)}}function zRe(e,t){return n;function n(r,a,s,o){const l=Array.isArray(s.children),c=NA(r);return t(a,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function qRe(e,t){const n={};let r,a;for(a in t.properties)if(a!=="children"&&CA.call(t.properties,a)){const s=HRe(e,a,t.properties[a]);if(s){const[o,l]=s;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&IRe.has(t.tagName)?r=l:n[o]=l}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function WRe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Ym(e,t.position);else{const a=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,s=e.evaluater.evaluateExpression(l.expression)}else Ym(e,t.position);else s=r.value===null?!0:r.value;n[a]=s}return n}function EA(e,t){const n=[];let r=-1;const a=e.passKeys?new Map:PRe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const u=a.get(c)||0;o=c+"-"+u,a.set(c,u+1)}}const l=Xq(e,s,o);l!==void 0&&n.push(l)}return n}function HRe(e,t,n){const r=JIe(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?FIe(n):tRe(n)),r.property==="style"){let a=typeof n=="object"?n:VRe(e,String(n));return e.stylePropertyNameCase==="css"&&(a=KRe(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&r.space?GIe[r.property]||r.property:r.attribute,n]}}function VRe(e,t){try{return ARe(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,a=new Kr("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=Yq+"#cannot-parse-style-attribute",a}}function Qq(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let s=-1,o;for(;++s<a.length;){const l=FR(a[s])?{type:"Identifier",name:a[s]}:{type:"Literal",value:a[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}r=o}else r=FR(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const a=r.value;return CA.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(r);Ym(e)}function Ym(e,t){const n=new Kr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Yq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function KRe(e){const t={};let n;for(n in e)CA.call(e,n)&&(t[GRe(n)]=e[n]);return t}function GRe(e){let t=e.replace(TRe,YRe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function YRe(e){return"-"+e.toLowerCase()}const pj={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},XRe={};function PA(e,t){const n=XRe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Zq(e,r,a)}function Zq(e,t,n){if(JRe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return XR(e.children,t,n)}return Array.isArray(e)?XR(e,t,n):""}function XR(e,t,n){const r=[];let a=-1;for(;++a<e.length;)r[a]=Zq(e[a],t,n);return r.join("")}function JRe(e){return!!(e&&typeof e=="object")}const JR=document.createElement("i");function TA(e){const t="&"+e+";";JR.innerHTML=t;const n=JR.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function za(e,t,n,r){const a=e.length;let s=0,o;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function si(e,t){return e.length>0?(za(e,e.length,0,t),e):t}const QR={}.hasOwnProperty;function eW(e){const t={};let n=-1;for(;++n<e.length;)QRe(t,e[n]);return t}function QRe(e,t){let n;for(n in t){const a=(QR.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){QR.call(a,o)||(a[o]=[]);const l=s[o];ZRe(a[o],Array.isArray(l)?l:l?[l]:[])}}}function ZRe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);za(e,0,0,r)}function tW(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function zi(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ra=Ml(/[A-Za-z]/),Wr=Ml(/[\dA-Za-z]/),eMe=Ml(/[#-'*+\--9=?A-Z^-~]/);function ry(e){return e!==null&&(e<32||e===127)}const zk=Ml(/\d/),tMe=Ml(/[\dA-Fa-f]/),nMe=Ml(/[!-/:-@[-`{-~]/);function xt(e){return e!==null&&e<-2}function bn(e){return e!==null&&(e<0||e===32)}function Ht(e){return e===-2||e===-1||e===32}const h0=Ml(new RegExp("\\p{P}|\\p{S}","u")),zc=Ml(/\s/);function Ml(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function jf(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Wr(e.charCodeAt(n+1))&&Wr(e.charCodeAt(n+2)))a=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=e.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),a=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+a+1,o=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function Yt(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return Ht(c)?(e.enter(n),l(c)):t(c)}function l(c){return Ht(c)&&s++<a?(e.consume(c),l):(e.exit(n),t(c))}}const rMe={tokenize:aMe};function aMe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Yt(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),s(l)}function s(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return xt(l)?(e.consume(l),e.exit("chunkText"),s):(e.consume(l),o)}}const iMe={tokenize:sMe},ZR={tokenize:oMe};function sMe(e){const t=this,n=[];let r=0,a,s,o;return l;function l(w){if(r<n.length){const j=n[r];return t.containerState=j[1],e.attempt(j[0].continuation,c,u)(w)}return u(w)}function c(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&b();const j=t.events.length;let k=j,_;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){_=t.events[k][1].end;break}y(r);let S=j;for(;S<t.events.length;)t.events[S][1].end={..._},S++;return za(t.events,k+1,0,t.events.slice(j)),t.events.length=S,u(w)}return l(w)}function u(w){if(r===n.length){if(!a)return h(w);if(a.currentConstruct&&a.currentConstruct.concrete)return g(w);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ZR,f,d)(w)}function f(w){return a&&b(),y(r),h(w)}function d(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,g(w)}function h(w){return t.containerState={},e.attempt(ZR,m,g)(w)}function m(w){return r++,n.push([t.currentConstruct,t.containerState]),h(w)}function g(w){if(w===null){a&&b(),y(0),e.consume(w);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:s}),v(w)}function v(w){if(w===null){x(e.exit("chunkFlow"),!0),y(0),e.consume(w);return}return xt(w)?(e.consume(w),x(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(w),v)}function x(w,j){const k=t.sliceStream(w);if(j&&k.push(null),w.previous=s,s&&(s.next=w),s=w,a.defineSkip(w.start),a.write(k),t.parser.lazy[w.start.line]){let _=a.events.length;for(;_--;)if(a.events[_][1].start.offset<o&&(!a.events[_][1].end||a.events[_][1].end.offset>o))return;const S=t.events.length;let E=S,N,I;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){if(N){I=t.events[E][1].end;break}N=!0}for(y(r),_=S;_<t.events.length;)t.events[_][1].end={...I},_++;za(t.events,E+1,0,t.events.slice(S)),t.events.length=_}}function y(w){let j=n.length;for(;j-- >w;){const k=n[j];t.containerState=k[1],k[0].exit.call(t,e)}n.length=w}function b(){a.write([null]),s=void 0,a=void 0,t.containerState._closeFlow=void 0}}function oMe(e,t,n){return Yt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Yd(e){if(e===null||bn(e)||zc(e))return 1;if(h0(e))return 2}function m0(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const s=e[a].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const qk={name:"attention",resolveAll:lMe,tokenize:cMe};function lMe(e,t){let n=-1,r,a,s,o,l,c,u,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},h={...e[n][1].start};eM(d,-c),eM(h,c),o={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},s={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},a={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=si(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=si(u,[["enter",a,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=si(u,m0(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=si(u,[["exit",s,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,u=si(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,za(e,r-1,n-r+3,u),n=r+u.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function cMe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=Yd(r);let s;return o;function o(c){return s=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===s)return e.consume(c),l;const u=e.exit("attentionSequence"),f=Yd(c),d=!f||f===2&&a||n.includes(c),h=!a||a===2&&f||n.includes(r);return u._open=!!(s===42?d:d&&(a||!h)),u._close=!!(s===42?h:h&&(f||!d)),t(c)}}function eM(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const uMe={name:"autolink",tokenize:dMe};function dMe(e,t,n){let r=0;return a;function a(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(m){return ra(m)?(e.consume(m),o):m===64?n(m):u(m)}function o(m){return m===43||m===45||m===46||Wr(m)?(r=1,l(m)):u(m)}function l(m){return m===58?(e.consume(m),r=0,c):(m===43||m===45||m===46||Wr(m))&&r++<32?(e.consume(m),l):(r=0,u(m))}function c(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||ry(m)?n(m):(e.consume(m),c)}function u(m){return m===64?(e.consume(m),f):eMe(m)?(e.consume(m),u):n(m)}function f(m){return Wr(m)?d(m):n(m)}function d(m){return m===46?(e.consume(m),r=0,f):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):h(m)}function h(m){if((m===45||Wr(m))&&r++<63){const g=m===45?h:d;return e.consume(m),g}return n(m)}}const Up={partial:!0,tokenize:fMe};function fMe(e,t,n){return r;function r(s){return Ht(s)?Yt(e,a,"linePrefix")(s):a(s)}function a(s){return s===null||xt(s)?t(s):n(s)}}const nW={continuation:{tokenize:mMe},exit:pMe,name:"blockQuote",tokenize:hMe};function hMe(e,t,n){const r=this;return a;function a(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Ht(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function mMe(e,t,n){const r=this;return a;function a(o){return Ht(o)?Yt(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(nW,t,n)(o)}}function pMe(e){e.exit("blockQuote")}const rW={name:"characterEscape",tokenize:gMe};function gMe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),a}function a(s){return nMe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const aW={name:"characterReference",tokenize:vMe};function vMe(e,t,n){const r=this;let a=0,s,o;return l;function l(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),c}function c(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=Wr,f(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=tMe,f):(e.enter("characterReferenceValue"),s=7,o=zk,f(d))}function f(d){if(d===59&&a){const h=e.exit("characterReferenceValue");return o===Wr&&!TA(r.sliceSerialize(h))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&a++<s?(e.consume(d),f):n(d)}}const tM={partial:!0,tokenize:yMe},nM={concrete:!0,name:"codeFenced",tokenize:xMe};function xMe(e,t,n){const r=this,a={partial:!0,tokenize:k};let s=0,o=0,l;return c;function c(_){return u(_)}function u(_){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,l=_,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(_)}function f(_){return _===l?(o++,e.consume(_),f):o<3?n(_):(e.exit("codeFencedFenceSequence"),Ht(_)?Yt(e,d,"whitespace")(_):d(_))}function d(_){return _===null||xt(_)?(e.exit("codeFencedFence"),r.interrupt?t(_):e.check(tM,v,j)(_)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(_))}function h(_){return _===null||xt(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(_)):Ht(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Yt(e,m,"whitespace")(_)):_===96&&_===l?n(_):(e.consume(_),h)}function m(_){return _===null||xt(_)?d(_):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(_))}function g(_){return _===null||xt(_)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(_)):_===96&&_===l?n(_):(e.consume(_),g)}function v(_){return e.attempt(a,j,x)(_)}function x(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),y}function y(_){return s>0&&Ht(_)?Yt(e,b,"linePrefix",s+1)(_):b(_)}function b(_){return _===null||xt(_)?e.check(tM,v,j)(_):(e.enter("codeFlowValue"),w(_))}function w(_){return _===null||xt(_)?(e.exit("codeFlowValue"),b(_)):(e.consume(_),w)}function j(_){return e.exit("codeFenced"),t(_)}function k(_,S,E){let N=0;return I;function I(U){return _.enter("lineEnding"),_.consume(U),_.exit("lineEnding"),P}function P(U){return _.enter("codeFencedFence"),Ht(U)?Yt(_,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):D(U)}function D(U){return U===l?(_.enter("codeFencedFenceSequence"),L(U)):E(U)}function L(U){return U===l?(N++,_.consume(U),L):N>=o?(_.exit("codeFencedFenceSequence"),Ht(U)?Yt(_,B,"whitespace")(U):B(U)):E(U)}function B(U){return U===null||xt(U)?(_.exit("codeFencedFence"),S(U)):E(U)}}}function yMe(e,t,n){const r=this;return a;function a(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const gj={name:"codeIndented",tokenize:wMe},bMe={partial:!0,tokenize:jMe};function wMe(e,t,n){const r=this;return a;function a(u){return e.enter("codeIndented"),Yt(e,s,"linePrefix",5)(u)}function s(u){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):xt(u)?e.attempt(bMe,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||xt(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function jMe(e,t,n){const r=this;return a;function a(o){return r.parser.lazy[r.now().line]?n(o):xt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):Yt(e,s,"linePrefix",5)(o)}function s(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):xt(o)?a(o):n(o)}}const _Me={name:"codeText",previous:SMe,resolve:kMe,tokenize:NMe};function kMe(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function SMe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function NMe(e,t,n){let r=0,a,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),l(d)}function l(d){return d===96?(e.consume(d),r++,l):(e.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),c):d===96?(s=e.enter("codeTextSequence"),a=0,f(d)):xt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||xt(d)?(e.exit("codeTextData"),c(d)):(e.consume(d),u)}function f(d){return d===96?(e.consume(d),a++,f):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",u(d))}}class CMe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const a=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return r&&Zf(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Zf(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Zf(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Zf(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Zf(this.left,n.reverse())}}}function Zf(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function iW(e){const t={};let n=-1,r,a,s,o,l,c,u;const f=new CMe(e);for(;++n<f.length;){for(;n in t;)n=t[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,AMe(f,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,a=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(f.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(r[1].end={...f.get(a)[1].start},l=f.slice(a,n),l.unshift(r),f.splice(a,n-a+1,l))}}return za(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function AMe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let a=t-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let f,d,h=-1,m=n,g=0,v=0;const x=[v];for(;m;){for(;e.get(++a)[1]!==m;);s.push(a),m._tokenizer||(f=r.sliceStream(m),m.next||f.push(null),d&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=m,m=m.next}for(m=n;++h<l.length;)l[h][0]==="exit"&&l[h-1][0]==="enter"&&l[h][1].type===l[h-1][1].type&&l[h][1].start.line!==l[h][1].end.line&&(v=h+1,x.push(v),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):x.pop(),h=x.length;h--;){const y=l.slice(x[h],x[h+1]),b=s.pop();c.push([b,b+y.length-1]),e.splice(b,2,y)}for(c.reverse(),h=-1;++h<c.length;)u[g+c[h][0]]=g+c[h][1],g+=c[h][1]-c[h][0]-1;return u}const EMe={resolve:TMe,tokenize:OMe},PMe={partial:!0,tokenize:IMe};function TMe(e){return iW(e),e}function OMe(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?s(l):xt(l)?e.check(PMe,o,s)(l):(e.consume(l),a)}function s(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function IMe(e,t,n){const r=this;return a;function a(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Yt(e,s,"linePrefix")}function s(o){if(o===null||xt(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function sW(e,t,n,r,a,s,o,l,c){const u=c||Number.POSITIVE_INFINITY;let f=0;return d;function d(y){return y===60?(e.enter(r),e.enter(a),e.enter(s),e.consume(y),e.exit(s),h):y===null||y===32||y===41||ry(y)?n(y):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(y))}function h(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(a),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===62?(e.exit("chunkString"),e.exit(l),h(y)):y===null||y===60||xt(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===60||y===62||y===92?(e.consume(y),m):m(y)}function v(y){return!f&&(y===null||y===41||bn(y))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(y)):f<u&&y===40?(e.consume(y),f++,v):y===41?(e.consume(y),f--,v):y===null||y===32||y===40||ry(y)?n(y):(e.consume(y),y===92?x:v)}function x(y){return y===40||y===41||y===92?(e.consume(y),v):v(y)}}function oW(e,t,n,r,a,s){const o=this;let l=0,c;return u;function u(m){return e.enter(r),e.enter(a),e.consume(m),e.exit(a),e.enter(s),f}function f(m){return l>999||m===null||m===91||m===93&&!c||m===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(e.exit(s),e.enter(a),e.consume(m),e.exit(a),e.exit(r),t):xt(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===null||m===91||m===93||xt(m)||l++>999?(e.exit("chunkString"),f(m)):(e.consume(m),c||(c=!Ht(m)),m===92?h:d)}function h(m){return m===91||m===92||m===93?(e.consume(m),l++,d):d(m)}}function lW(e,t,n,r,a,s){let o;return l;function l(h){return h===34||h===39||h===40?(e.enter(r),e.enter(a),e.consume(h),e.exit(a),o=h===40?41:h,c):n(h)}function c(h){return h===o?(e.enter(a),e.consume(h),e.exit(a),e.exit(r),t):(e.enter(s),u(h))}function u(h){return h===o?(e.exit(s),c(o)):h===null?n(h):xt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Yt(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===o||h===null||xt(h)?(e.exit("chunkString"),u(h)):(e.consume(h),h===92?d:f)}function d(h){return h===o||h===92?(e.consume(h),f):f(h)}}function Eh(e,t){let n;return r;function r(a){return xt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):Ht(a)?Yt(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}const RMe={name:"definition",tokenize:DMe},MMe={partial:!0,tokenize:$Me};function DMe(e,t,n){const r=this;let a;return s;function s(m){return e.enter("definition"),o(m)}function o(m){return oW.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function l(m){return a=zi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),c):n(m)}function c(m){return bn(m)?Eh(e,u)(m):u(m)}function u(m){return sW(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function f(m){return e.attempt(MMe,d,d)(m)}function d(m){return Ht(m)?Yt(e,h,"whitespace")(m):h(m)}function h(m){return m===null||xt(m)?(e.exit("definition"),r.parser.defined.push(a),t(m)):n(m)}}function $Me(e,t,n){return r;function r(l){return bn(l)?Eh(e,a)(l):n(l)}function a(l){return lW(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Ht(l)?Yt(e,o,"whitespace")(l):o(l)}function o(l){return l===null||xt(l)?t(l):n(l)}}const LMe={name:"hardBreakEscape",tokenize:FMe};function FMe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),a}function a(s){return xt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const BMe={name:"headingAtx",resolve:UMe,tokenize:zMe};function UMe(e,t){let n=e.length-2,r=3,a,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},za(e,r,n-r+1,[["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t]])),e}function zMe(e,t,n){let r=0;return a;function a(f){return e.enter("atxHeading"),s(f)}function s(f){return e.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&r++<6?(e.consume(f),o):f===null||bn(f)?(e.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(e.enter("atxHeadingSequence"),c(f)):f===null||xt(f)?(e.exit("atxHeading"),t(f)):Ht(f)?Yt(e,l,"whitespace")(f):(e.enter("atxHeadingText"),u(f))}function c(f){return f===35?(e.consume(f),c):(e.exit("atxHeadingSequence"),l(f))}function u(f){return f===null||f===35||bn(f)?(e.exit("atxHeadingText"),l(f)):(e.consume(f),u)}}const qMe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],rM=["pre","script","style","textarea"],WMe={concrete:!0,name:"htmlFlow",resolveTo:KMe,tokenize:GMe},HMe={partial:!0,tokenize:XMe},VMe={partial:!0,tokenize:YMe};function KMe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function GMe(e,t,n){const r=this;let a,s,o,l,c;return u;function u(A){return f(A)}function f(A){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(A),d}function d(A){return A===33?(e.consume(A),h):A===47?(e.consume(A),s=!0,v):A===63?(e.consume(A),a=3,r.interrupt?t:C):ra(A)?(e.consume(A),o=String.fromCharCode(A),x):n(A)}function h(A){return A===45?(e.consume(A),a=2,m):A===91?(e.consume(A),a=5,l=0,g):ra(A)?(e.consume(A),a=4,r.interrupt?t:C):n(A)}function m(A){return A===45?(e.consume(A),r.interrupt?t:C):n(A)}function g(A){const W="CDATA[";return A===W.charCodeAt(l++)?(e.consume(A),l===W.length?r.interrupt?t:D:g):n(A)}function v(A){return ra(A)?(e.consume(A),o=String.fromCharCode(A),x):n(A)}function x(A){if(A===null||A===47||A===62||bn(A)){const W=A===47,G=o.toLowerCase();return!W&&!s&&rM.includes(G)?(a=1,r.interrupt?t(A):D(A)):qMe.includes(o.toLowerCase())?(a=6,W?(e.consume(A),y):r.interrupt?t(A):D(A)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(A):s?b(A):w(A))}return A===45||Wr(A)?(e.consume(A),o+=String.fromCharCode(A),x):n(A)}function y(A){return A===62?(e.consume(A),r.interrupt?t:D):n(A)}function b(A){return Ht(A)?(e.consume(A),b):I(A)}function w(A){return A===47?(e.consume(A),I):A===58||A===95||ra(A)?(e.consume(A),j):Ht(A)?(e.consume(A),w):I(A)}function j(A){return A===45||A===46||A===58||A===95||Wr(A)?(e.consume(A),j):k(A)}function k(A){return A===61?(e.consume(A),_):Ht(A)?(e.consume(A),k):w(A)}function _(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(e.consume(A),c=A,S):Ht(A)?(e.consume(A),_):E(A)}function S(A){return A===c?(e.consume(A),c=null,N):A===null||xt(A)?n(A):(e.consume(A),S)}function E(A){return A===null||A===34||A===39||A===47||A===60||A===61||A===62||A===96||bn(A)?k(A):(e.consume(A),E)}function N(A){return A===47||A===62||Ht(A)?w(A):n(A)}function I(A){return A===62?(e.consume(A),P):n(A)}function P(A){return A===null||xt(A)?D(A):Ht(A)?(e.consume(A),P):n(A)}function D(A){return A===45&&a===2?(e.consume(A),$):A===60&&a===1?(e.consume(A),O):A===62&&a===4?(e.consume(A),F):A===63&&a===3?(e.consume(A),C):A===93&&a===5?(e.consume(A),R):xt(A)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(HMe,M,L)(A)):A===null||xt(A)?(e.exit("htmlFlowData"),L(A)):(e.consume(A),D)}function L(A){return e.check(VMe,B,M)(A)}function B(A){return e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),U}function U(A){return A===null||xt(A)?L(A):(e.enter("htmlFlowData"),D(A))}function $(A){return A===45?(e.consume(A),C):D(A)}function O(A){return A===47?(e.consume(A),o="",T):D(A)}function T(A){if(A===62){const W=o.toLowerCase();return rM.includes(W)?(e.consume(A),F):D(A)}return ra(A)&&o.length<8?(e.consume(A),o+=String.fromCharCode(A),T):D(A)}function R(A){return A===93?(e.consume(A),C):D(A)}function C(A){return A===62?(e.consume(A),F):A===45&&a===2?(e.consume(A),C):D(A)}function F(A){return A===null||xt(A)?(e.exit("htmlFlowData"),M(A)):(e.consume(A),F)}function M(A){return e.exit("htmlFlow"),t(A)}}function YMe(e,t,n){const r=this;return a;function a(o){return xt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function XMe(e,t,n){return r;function r(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Up,t,n)}}const JMe={name:"htmlText",tokenize:QMe};function QMe(e,t,n){const r=this;let a,s,o;return l;function l(C){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(C),c}function c(C){return C===33?(e.consume(C),u):C===47?(e.consume(C),k):C===63?(e.consume(C),w):ra(C)?(e.consume(C),E):n(C)}function u(C){return C===45?(e.consume(C),f):C===91?(e.consume(C),s=0,g):ra(C)?(e.consume(C),b):n(C)}function f(C){return C===45?(e.consume(C),m):n(C)}function d(C){return C===null?n(C):C===45?(e.consume(C),h):xt(C)?(o=d,O(C)):(e.consume(C),d)}function h(C){return C===45?(e.consume(C),m):d(C)}function m(C){return C===62?$(C):C===45?h(C):d(C)}function g(C){const F="CDATA[";return C===F.charCodeAt(s++)?(e.consume(C),s===F.length?v:g):n(C)}function v(C){return C===null?n(C):C===93?(e.consume(C),x):xt(C)?(o=v,O(C)):(e.consume(C),v)}function x(C){return C===93?(e.consume(C),y):v(C)}function y(C){return C===62?$(C):C===93?(e.consume(C),y):v(C)}function b(C){return C===null||C===62?$(C):xt(C)?(o=b,O(C)):(e.consume(C),b)}function w(C){return C===null?n(C):C===63?(e.consume(C),j):xt(C)?(o=w,O(C)):(e.consume(C),w)}function j(C){return C===62?$(C):w(C)}function k(C){return ra(C)?(e.consume(C),_):n(C)}function _(C){return C===45||Wr(C)?(e.consume(C),_):S(C)}function S(C){return xt(C)?(o=S,O(C)):Ht(C)?(e.consume(C),S):$(C)}function E(C){return C===45||Wr(C)?(e.consume(C),E):C===47||C===62||bn(C)?N(C):n(C)}function N(C){return C===47?(e.consume(C),$):C===58||C===95||ra(C)?(e.consume(C),I):xt(C)?(o=N,O(C)):Ht(C)?(e.consume(C),N):$(C)}function I(C){return C===45||C===46||C===58||C===95||Wr(C)?(e.consume(C),I):P(C)}function P(C){return C===61?(e.consume(C),D):xt(C)?(o=P,O(C)):Ht(C)?(e.consume(C),P):N(C)}function D(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(e.consume(C),a=C,L):xt(C)?(o=D,O(C)):Ht(C)?(e.consume(C),D):(e.consume(C),B)}function L(C){return C===a?(e.consume(C),a=void 0,U):C===null?n(C):xt(C)?(o=L,O(C)):(e.consume(C),L)}function B(C){return C===null||C===34||C===39||C===60||C===61||C===96?n(C):C===47||C===62||bn(C)?N(C):(e.consume(C),B)}function U(C){return C===47||C===62||bn(C)?N(C):n(C)}function $(C){return C===62?(e.consume(C),e.exit("htmlTextData"),e.exit("htmlText"),t):n(C)}function O(C){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),T}function T(C){return Ht(C)?Yt(e,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):R(C)}function R(C){return e.enter("htmlTextData"),o(C)}}const OA={name:"labelEnd",resolveAll:nDe,resolveTo:rDe,tokenize:aDe},ZMe={tokenize:iDe},eDe={tokenize:sDe},tDe={tokenize:oDe};function nDe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const a=r.type==="labelImage"?4:2;r.type="data",t+=a}}return e.length!==n.length&&za(e,0,e.length,n),e}function rDe(e,t){let n=e.length,r=0,a,s,o,l;for(;n--;)if(a=e[n][1],s){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(s=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(o=n);const c={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},f={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=si(l,e.slice(s+1,s+r+3)),l=si(l,[["enter",f,t]]),l=si(l,m0(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),l=si(l,[["exit",f,t],e[o-2],e[o-1],["exit",u,t]]),l=si(l,e.slice(o+1)),l=si(l,[["exit",c,t]]),za(e,s,e.length,l),e}function aDe(e,t,n){const r=this;let a=r.events.length,s,o;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){s=r.events[a][1];break}return l;function l(h){return s?s._inactive?d(h):(o=r.parser.defined.includes(zi(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),c):n(h)}function c(h){return h===40?e.attempt(ZMe,f,o?f:d)(h):h===91?e.attempt(eDe,f,o?u:d)(h):o?f(h):d(h)}function u(h){return e.attempt(tDe,f,d)(h)}function f(h){return t(h)}function d(h){return s._balanced=!0,n(h)}}function iDe(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),a}function a(d){return bn(d)?Eh(e,s)(d):s(d)}function s(d){return d===41?f(d):sW(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return bn(d)?Eh(e,c)(d):f(d)}function l(d){return n(d)}function c(d){return d===34||d===39||d===40?lW(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):f(d)}function u(d){return bn(d)?Eh(e,f)(d):f(d)}function f(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function sDe(e,t,n){const r=this;return a;function a(l){return oW.call(r,e,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(zi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function oDe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),a}function a(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const lDe={name:"labelStartImage",resolveAll:OA.resolveAll,tokenize:cDe};function cDe(e,t,n){const r=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),s}function s(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const uDe={name:"labelStartLink",resolveAll:OA.resolveAll,tokenize:dDe};function dDe(e,t,n){const r=this;return a;function a(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const vj={name:"lineEnding",tokenize:fDe};function fDe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Yt(e,t,"linePrefix")}}const mv={name:"thematicBreak",tokenize:hDe};function hDe(e,t,n){let r=0,a;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return a=u,l(u)}function l(u){return u===a?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||xt(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===a?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),Ht(u)?Yt(e,l,"whitespace")(u):l(u))}}const fa={continuation:{tokenize:vDe},exit:yDe,name:"list",tokenize:gDe},mDe={partial:!0,tokenize:bDe},pDe={partial:!0,tokenize:xDe};function gDe(e,t,n){const r=this,a=r.events[r.events.length-1];let s=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return l;function l(m){const g=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:zk(m)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(mv,n,u)(m):u(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(m)}return n(m)}function c(m){return zk(m)&&++o<10?(e.consume(m),c):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),u(m)):n(m)}function u(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(Up,r.interrupt?n:f,e.attempt(mDe,h,d))}function f(m){return r.containerState.initialBlankLine=!0,s++,h(m)}function d(m){return Ht(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),h):n(m)}function h(m){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function vDe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Up,a,s);function a(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Yt(e,t,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!Ht(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(pDe,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Yt(e,e.attempt(fa,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function xDe(e,t,n){const r=this;return Yt(e,a,"listItemIndent",r.containerState.size+1);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function yDe(e){e.exit(this.containerState.type)}function bDe(e,t,n){const r=this;return Yt(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(s){const o=r.events[r.events.length-1];return!Ht(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const aM={name:"setextUnderline",resolveTo:wDe,tokenize:jDe};function wDe(e,t){let n=e.length,r,a,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",s?(e.splice(a,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function jDe(e,t,n){const r=this;let a;return s;function s(u){let f=r.events.length,d;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){d=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),a=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===a?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Ht(u)?Yt(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||xt(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const _De={tokenize:kDe};function kDe(e){const t=this,n=e.attempt(Up,r,e.attempt(this.parser.constructs.flowInitial,a,Yt(e,e.attempt(this.parser.constructs.flow,a,e.attempt(EMe,a)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const SDe={resolveAll:uW()},NDe=cW("string"),CDe=cW("text");function cW(e){return{resolveAll:uW(e==="text"?ADe:void 0),tokenize:t};function t(n){const r=this,a=this.parser.constructs[e],s=n.attempt(a,o,l);return o;function o(f){return u(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return u(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function u(f){if(f===null)return!0;const d=a[f];let h=-1;if(d)for(;++h<d.length;){const m=d[h];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function uW(e){return t;function t(n,r){let a=-1,s;for(;++a<=n.length;)s===void 0?n[a]&&n[a][1].type==="data"&&(s=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==s+2&&(n[s][1].end=n[a-1][1].end,n.splice(s+2,a-s-2),a=s+2),s=void 0);return e?e(n,r):n}}function ADe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let s=a.length,o=-1,l=0,c;for(;s--;){const u=a[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const EDe={42:fa,43:fa,45:fa,48:fa,49:fa,50:fa,51:fa,52:fa,53:fa,54:fa,55:fa,56:fa,57:fa,62:nW},PDe={91:RMe},TDe={[-2]:gj,[-1]:gj,32:gj},ODe={35:BMe,42:mv,45:[aM,mv],60:WMe,61:aM,95:mv,96:nM,126:nM},IDe={38:aW,92:rW},RDe={[-5]:vj,[-4]:vj,[-3]:vj,33:lDe,38:aW,42:qk,60:[uMe,JMe],91:uDe,92:[LMe,rW],93:OA,95:qk,96:_Me},MDe={null:[qk,SDe]},DDe={null:[42,95]},$De={null:[]},LDe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:DDe,contentInitial:PDe,disable:$De,document:EDe,flow:ODe,flowInitial:TDe,insideSpan:MDe,string:IDe,text:RDe},Symbol.toStringTag,{value:"Module"}));function FDe(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},s=[];let o=[],l=[];const c={attempt:S(k),check:S(_),consume:b,enter:w,exit:j,interrupt:S(_,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:g,parser:e,previous:null,sliceSerialize:h,sliceStream:m,write:d};let f=t.tokenize.call(u,c);return t.resolveAll&&s.push(t),u;function d(P){return o=si(o,P),x(),o[o.length-1]!==null?[]:(E(t,0),u.events=m0(s,u.events,u),u.events)}function h(P,D){return UDe(m(P),D)}function m(P){return BDe(o,P)}function g(){const{_bufferIndex:P,_index:D,line:L,column:B,offset:U}=r;return{_bufferIndex:P,_index:D,line:L,column:B,offset:U}}function v(P){a[P.line]=P.column,I()}function x(){let P;for(;r._index<o.length;){const D=o[r._index];if(typeof D=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<D.length;)y(D.charCodeAt(r._bufferIndex));else y(D)}}function y(P){f=f(P)}function b(P){xt(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,I()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=P}function w(P,D){const L=D||{};return L.type=P,L.start=g(),u.events.push(["enter",L,u]),l.push(L),L}function j(P){const D=l.pop();return D.end=g(),u.events.push(["exit",D,u]),D}function k(P,D){E(P,D.from)}function _(P,D){D.restore()}function S(P,D){return L;function L(B,U,$){let O,T,R,C;return Array.isArray(B)?M(B):"tokenize"in B?M([B]):F(B);function F(Y){return H;function H(Q){const X=Q!==null&&Y[Q],re=Q!==null&&Y.null,fe=[...Array.isArray(X)?X:X?[X]:[],...Array.isArray(re)?re:re?[re]:[]];return M(fe)(Q)}}function M(Y){return O=Y,T=0,Y.length===0?$:A(Y[T])}function A(Y){return H;function H(Q){return C=N(),R=Y,Y.partial||(u.currentConstruct=Y),Y.name&&u.parser.constructs.disable.null.includes(Y.name)?G():Y.tokenize.call(D?Object.assign(Object.create(u),D):u,c,W,G)(Q)}}function W(Y){return P(R,C),U}function G(Y){return C.restore(),++T<O.length?A(O[T]):$}}}function E(P,D){P.resolveAll&&!s.includes(P)&&s.push(P),P.resolve&&za(u.events,D,u.events.length-D,P.resolve(u.events.slice(D),u)),P.resolveTo&&(u.events=P.resolveTo(u.events,u))}function N(){const P=g(),D=u.previous,L=u.currentConstruct,B=u.events.length,U=Array.from(l);return{from:B,restore:$};function $(){r=P,u.previous=D,u.currentConstruct=L,u.events.length=B,l=U,I()}}function I(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function BDe(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,s=t.end._bufferIndex;let o;if(n===a)o=[e[n].slice(r,s)];else{if(o=e.slice(n,a),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}s>0&&o.push(e[a].slice(0,s))}return o}function UDe(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&a)continue;o=" ";break}default:o=String.fromCharCode(s)}a=s===-2,r.push(o)}return r.join("")}function zDe(e){const r={constructs:eW([LDe,...(e||{}).extensions||[]]),content:a(rMe),defined:[],document:a(iMe),flow:a(_De),lazy:{},string:a(NDe),text:a(CDe)};return r;function a(s){return o;function o(l){return FDe(r,s,l)}}}function qDe(e){for(;!iW(e););return e}const iM=/[\0\t\n\r]/g;function WDe(){let e=1,t="",n=!0,r;return a;function a(s,o,l){const c=[];let u,f,d,h,m;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(iM.lastIndex=d,u=iM.exec(s),h=u&&u.index!==void 0?u.index:s.length,m=s.charCodeAt(h),!u){t=s.slice(d);break}if(m===10&&d===h&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),d<h&&(c.push(s.slice(d,h)),e+=h-d),m){case 0:{c.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,c.push(-2);e++<f;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}d=h+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const HDe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function VDe(e){return e.replace(HDe,KDe)}function KDe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),s=a===120||a===88;return tW(n.slice(s?2:1),s?16:10)}return TA(n)||e}const dW={}.hasOwnProperty;function GDe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),YDe(n)(qDe(zDe(n).document().write(WDe()(e,t,!0))))}function YDe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Se),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(q),blockQuote:s(re),characterEscape:N,characterReference:N,codeFenced:s(fe),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(fe,o),codeText:s(J,o),codeTextData:N,data:N,codeFlowValue:N,definition:s(ye),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(z),hardBreakEscape:s(ae),hardBreakTrailing:s(ae),htmlFlow:s(se,o),htmlFlowData:N,htmlText:s(se,o),htmlTextData:N,image:s(be),label:o,link:s(Se),listItem:s(ge),listItemValue:h,listOrdered:s(Le,d),listUnordered:s(Le),paragraph:s(We),reference:A,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(q),strong:s(dt),thematicBreak:s(Et)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:X,autolinkProtocol:Q,blockQuote:c(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:Y,characterReference:H,codeFenced:c(x),codeFencedFence:v,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:I,codeIndented:c(y),codeText:c(U),codeTextData:I,data:I,definition:c(),definitionDestinationString:j,definitionLabelString:b,definitionTitleString:w,emphasis:c(),hardBreakEscape:c(D),hardBreakTrailing:c(D),htmlFlow:c(L),htmlFlowData:I,htmlText:c(B),htmlTextData:I,image:c(O),label:R,labelText:T,lineEnding:P,link:c($),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:W,resourceDestinationString:C,resourceTitleString:F,resource:M,setextHeading:c(E),setextHeadingLineSequence:S,setextHeadingText:_,strong:c(),thematicBreak:c()}};fW(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(te){let me={type:"root",children:[]};const Fe={stack:[me],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:f,data:n},He=[];let Ue=-1;for(;++Ue<te.length;)if(te[Ue][1].type==="listOrdered"||te[Ue][1].type==="listUnordered")if(te[Ue][0]==="enter")He.push(Ue);else{const he=He.pop();Ue=a(te,he,Ue)}for(Ue=-1;++Ue<te.length;){const he=t[te[Ue][0]];dW.call(he,te[Ue][1].type)&&he[te[Ue][1].type].call(Object.assign({sliceSerialize:te[Ue][2].sliceSerialize},Fe),te[Ue][1])}if(Fe.tokenStack.length>0){const he=Fe.tokenStack[Fe.tokenStack.length-1];(he[1]||sM).call(Fe,void 0,he[0])}for(me.position={start:To(te.length>0?te[0][1].start:{line:1,column:1,offset:0}),end:To(te.length>0?te[te.length-2][1].end:{line:1,column:1,offset:0})},Ue=-1;++Ue<t.transforms.length;)me=t.transforms[Ue](me)||me;return me}function a(te,me,Fe){let He=me-1,Ue=-1,he=!1,Ot,vt,wt,ve;for(;++He<=Fe;){const _e=te[He];switch(_e[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{_e[0]==="enter"?Ue++:Ue--,ve=void 0;break}case"lineEndingBlank":{_e[0]==="enter"&&(Ot&&!ve&&!Ue&&!wt&&(wt=He),ve=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ve=void 0}if(!Ue&&_e[0]==="enter"&&_e[1].type==="listItemPrefix"||Ue===-1&&_e[0]==="exit"&&(_e[1].type==="listUnordered"||_e[1].type==="listOrdered")){if(Ot){let $e=He;for(vt=void 0;$e--;){const oe=te[$e];if(oe[1].type==="lineEnding"||oe[1].type==="lineEndingBlank"){if(oe[0]==="exit")continue;vt&&(te[vt][1].type="lineEndingBlank",he=!0),oe[1].type="lineEnding",vt=$e}else if(!(oe[1].type==="linePrefix"||oe[1].type==="blockQuotePrefix"||oe[1].type==="blockQuotePrefixWhitespace"||oe[1].type==="blockQuoteMarker"||oe[1].type==="listItemIndent"))break}wt&&(!vt||wt<vt)&&(Ot._spread=!0),Ot.end=Object.assign({},vt?te[vt][1].start:_e[1].end),te.splice(vt||He,0,["exit",Ot,_e[2]]),He++,Fe++}if(_e[1].type==="listItemPrefix"){const $e={type:"listItem",_spread:!1,start:Object.assign({},_e[1].start),end:void 0};Ot=$e,te.splice(He,0,["enter",$e,_e[2]]),He++,Fe++,wt=void 0,ve=!0}}}return te[me][1]._spread=he,Fe}function s(te,me){return Fe;function Fe(He){l.call(this,te(He),He),me&&me.call(this,He)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(te,me,Fe){this.stack[this.stack.length-1].children.push(te),this.stack.push(te),this.tokenStack.push([me,Fe||void 0]),te.position={start:To(me.start),end:void 0}}function c(te){return me;function me(Fe){te&&te.call(this,Fe),u.call(this,Fe)}}function u(te,me){const Fe=this.stack.pop(),He=this.tokenStack.pop();if(He)He[0].type!==te.type&&(me?me.call(this,te,He[0]):(He[1]||sM).call(this,te,He[0]));else throw new Error("Cannot close `"+te.type+"` ("+Ah({start:te.start,end:te.end})+"): its not open");Fe.position.end=To(te.end)}function f(){return PA(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(te){if(this.data.expectingFirstListItemValue){const me=this.stack[this.stack.length-2];me.start=Number.parseInt(this.sliceSerialize(te),10),this.data.expectingFirstListItemValue=void 0}}function m(){const te=this.resume(),me=this.stack[this.stack.length-1];me.lang=te}function g(){const te=this.resume(),me=this.stack[this.stack.length-1];me.meta=te}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const te=this.resume(),me=this.stack[this.stack.length-1];me.value=te.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const te=this.resume(),me=this.stack[this.stack.length-1];me.value=te.replace(/(\r?\n|\r)$/g,"")}function b(te){const me=this.resume(),Fe=this.stack[this.stack.length-1];Fe.label=me,Fe.identifier=zi(this.sliceSerialize(te)).toLowerCase()}function w(){const te=this.resume(),me=this.stack[this.stack.length-1];me.title=te}function j(){const te=this.resume(),me=this.stack[this.stack.length-1];me.url=te}function k(te){const me=this.stack[this.stack.length-1];if(!me.depth){const Fe=this.sliceSerialize(te).length;me.depth=Fe}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function S(te){const me=this.stack[this.stack.length-1];me.depth=this.sliceSerialize(te).codePointAt(0)===61?1:2}function E(){this.data.setextHeadingSlurpLineEnding=void 0}function N(te){const Fe=this.stack[this.stack.length-1].children;let He=Fe[Fe.length-1];(!He||He.type!=="text")&&(He=bt(),He.position={start:To(te.start),end:void 0},Fe.push(He)),this.stack.push(He)}function I(te){const me=this.stack.pop();me.value+=this.sliceSerialize(te),me.position.end=To(te.end)}function P(te){const me=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Fe=me.children[me.children.length-1];Fe.position.end=To(te.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(me.type)&&(N.call(this,te),I.call(this,te))}function D(){this.data.atHardBreak=!0}function L(){const te=this.resume(),me=this.stack[this.stack.length-1];me.value=te}function B(){const te=this.resume(),me=this.stack[this.stack.length-1];me.value=te}function U(){const te=this.resume(),me=this.stack[this.stack.length-1];me.value=te}function $(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=me,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function O(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=me,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function T(te){const me=this.sliceSerialize(te),Fe=this.stack[this.stack.length-2];Fe.label=VDe(me),Fe.identifier=zi(me).toLowerCase()}function R(){const te=this.stack[this.stack.length-1],me=this.resume(),Fe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Fe.type==="link"){const He=te.children;Fe.children=He}else Fe.alt=me}function C(){const te=this.resume(),me=this.stack[this.stack.length-1];me.url=te}function F(){const te=this.resume(),me=this.stack[this.stack.length-1];me.title=te}function M(){this.data.inReference=void 0}function A(){this.data.referenceType="collapsed"}function W(te){const me=this.resume(),Fe=this.stack[this.stack.length-1];Fe.label=me,Fe.identifier=zi(this.sliceSerialize(te)).toLowerCase(),this.data.referenceType="full"}function G(te){this.data.characterReferenceType=te.type}function Y(te){const me=this.sliceSerialize(te),Fe=this.data.characterReferenceType;let He;Fe?(He=tW(me,Fe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):He=TA(me);const Ue=this.stack[this.stack.length-1];Ue.value+=He}function H(te){const me=this.stack.pop();me.position.end=To(te.end)}function Q(te){I.call(this,te);const me=this.stack[this.stack.length-1];me.url=this.sliceSerialize(te)}function X(te){I.call(this,te);const me=this.stack[this.stack.length-1];me.url="mailto:"+this.sliceSerialize(te)}function re(){return{type:"blockquote",children:[]}}function fe(){return{type:"code",lang:null,meta:null,value:""}}function J(){return{type:"inlineCode",value:""}}function ye(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function z(){return{type:"emphasis",children:[]}}function q(){return{type:"heading",depth:0,children:[]}}function ae(){return{type:"break"}}function se(){return{type:"html",value:""}}function be(){return{type:"image",title:null,url:"",alt:null}}function Se(){return{type:"link",title:null,url:"",children:[]}}function Le(te){return{type:"list",ordered:te.type==="listOrdered",start:null,spread:te._spread,children:[]}}function ge(te){return{type:"listItem",spread:te._spread,checked:null,children:[]}}function We(){return{type:"paragraph",children:[]}}function dt(){return{type:"strong",children:[]}}function bt(){return{type:"text",value:""}}function Et(){return{type:"thematicBreak"}}}function To(e){return{line:e.line,column:e.column,offset:e.offset}}function fW(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?fW(e,r):XDe(e,r)}}function XDe(e,t){let n;for(n in t)if(dW.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function sM(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ah({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ah({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ah({start:t.start,end:t.end})+") is still open")}function JDe(e){const t=this;t.parser=n;function n(r){return GDe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function QDe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function ZDe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function e$e(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function t$e(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function n$e(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function r$e(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=jf(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function a$e(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function i$e(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function hW(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const a=e.all(t),s=a[0];s&&s.type==="text"?s.value="["+s.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=r:a.push({type:"text",value:r}),a}function s$e(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return hW(e,t);const a={src:jf(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,s),e.applyData(t,s)}function o$e(e,t){const n={src:jf(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function l$e(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function c$e(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return hW(e,t);const a={href:jf(r.url||"")};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function u$e(e,t){const n={href:jf(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function d$e(e,t,n){const r=e.all(t),a=n?f$e(n):mW(t),s={},o=[];if(typeof t.checked=="boolean"){const f=r[0];let d;f&&f.type==="element"&&f.tagName==="p"?d=f:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const f=r[l];(a||l!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!a?o.push(...f.children):o.push(f)}const c=r[r.length-1];c&&(a||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function f$e(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=mW(n[r])}return t}function mW(e){const t=e.spread;return t??e.children.length>1}function h$e(e,t){const n={},r=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++a<r.length;){const o=r[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function m$e(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function p$e(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function g$e(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function v$e(e,t){const n=e.all(t),r=n.shift(),a=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),a.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=NA(t.children[1]),c=Kq(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),a.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,s),e.applyData(t,s)}function x$e(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const d=t.children[c],h={},m=o?o[c]:void 0;m&&(h.align=m);let g={type:"element",tagName:s,properties:h,children:[]};d&&(g.children=e.all(d),e.patch(d,g),g=e.applyData(d,g)),u.push(g)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,f),e.applyData(t,f)}function y$e(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const oM=9,lM=32;function b$e(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const s=[];for(;r;)s.push(cM(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return s.push(cM(t.slice(a),a>0,!1)),s.join("")}function cM(e,t,n){let r=0,a=e.length;if(t){let s=e.codePointAt(r);for(;s===oM||s===lM;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(a-1);for(;s===oM||s===lM;)a--,s=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function w$e(e,t){const n={type:"text",value:b$e(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function j$e(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const _$e={blockquote:QDe,break:ZDe,code:e$e,delete:t$e,emphasis:n$e,footnoteReference:r$e,heading:a$e,html:i$e,imageReference:s$e,image:o$e,inlineCode:l$e,linkReference:c$e,link:u$e,listItem:d$e,list:h$e,paragraph:m$e,root:p$e,strong:g$e,table:v$e,tableCell:y$e,tableRow:x$e,text:w$e,thematicBreak:j$e,toml:qg,yaml:qg,definition:qg,footnoteDefinition:qg};function qg(){}const pW=-1,p0=0,Ph=1,ay=2,IA=3,RA=4,MA=5,DA=6,gW=7,vW=8,uM=typeof self=="object"?self:globalThis,k$e=(e,t)=>{const n=(a,s)=>(e.set(s,a),a),r=a=>{if(e.has(a))return e.get(a);const[s,o]=t[a];switch(s){case p0:case pW:return n(o,a);case Ph:{const l=n([],a);for(const c of o)l.push(r(c));return l}case ay:{const l=n({},a);for(const[c,u]of o)l[r(c)]=r(u);return l}case IA:return n(new Date(o),a);case RA:{const{source:l,flags:c}=o;return n(new RegExp(l,c),a)}case MA:{const l=n(new Map,a);for(const[c,u]of o)l.set(r(c),r(u));return l}case DA:{const l=n(new Set,a);for(const c of o)l.add(r(c));return l}case gW:{const{name:l,message:c}=o;return n(new uM[l](c),a)}case vW:return n(BigInt(o),a);case"BigInt":return n(Object(BigInt(o)),a);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new uM[s](o),a)};return r},dM=e=>k$e(new Map,e)(0),bu="",{toString:S$e}={},{keys:N$e}=Object,eh=e=>{const t=typeof e;if(t!=="object"||!e)return[p0,t];const n=S$e.call(e).slice(8,-1);switch(n){case"Array":return[Ph,bu];case"Object":return[ay,bu];case"Date":return[IA,bu];case"RegExp":return[RA,bu];case"Map":return[MA,bu];case"Set":return[DA,bu];case"DataView":return[Ph,n]}return n.includes("Array")?[Ph,n]:n.includes("Error")?[gW,n]:[ay,n]},Wg=([e,t])=>e===p0&&(t==="function"||t==="symbol"),C$e=(e,t,n,r)=>{const a=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=eh(o);switch(l){case p0:{let f=o;switch(c){case"bigint":l=vW,f=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return a([pW],o)}return a([l,f],o)}case Ph:{if(c){let h=o;return c==="DataView"?h=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(h=new Uint8Array(o)),a([c,[...h]],o)}const f=[],d=a([l,f],o);for(const h of o)f.push(s(h));return d}case ay:{if(c)switch(c){case"BigInt":return a([c,o.toString()],o);case"Boolean":case"Number":case"String":return a([c,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const f=[],d=a([l,f],o);for(const h of N$e(o))(e||!Wg(eh(o[h])))&&f.push([s(h),s(o[h])]);return d}case IA:return a([l,o.toISOString()],o);case RA:{const{source:f,flags:d}=o;return a([l,{source:f,flags:d}],o)}case MA:{const f=[],d=a([l,f],o);for(const[h,m]of o)(e||!(Wg(eh(h))||Wg(eh(m))))&&f.push([s(h),s(m)]);return d}case DA:{const f=[],d=a([l,f],o);for(const h of o)(e||!Wg(eh(h)))&&f.push(s(h));return d}}const{message:u}=o;return a([l,{name:c,message:u}],o)};return s},fM=(e,{json:t,lossy:n}={})=>{const r=[];return C$e(!(t||n),!!t,new Map,r)(e),r},iy=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?dM(fM(e,t)):structuredClone(e):(e,t)=>dM(fM(e,t));function A$e(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function E$e(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function P$e(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||A$e,r=e.options.footnoteBackLabel||E$e,a=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const f=e.all(u),d=String(u.identifier).toUpperCase(),h=jf(d.toLowerCase());let m=0;const g=[],v=e.footnoteCounts.get(d);for(;v!==void 0&&++m<=v;){g.length>0&&g.push({type:"text",value:" "});let b=typeof n=="string"?n:n(c,m);typeof b=="string"&&(b={type:"text",value:b}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,m),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const x=f[f.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const b=x.children[x.children.length-1];b&&b.type==="text"?b.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...g)}else f.push(...g);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(f,!0)};e.patch(u,y),l.push(y)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...iy(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const g0=function(e){if(e==null)return R$e;if(typeof e=="function")return v0(e);if(typeof e=="object")return Array.isArray(e)?T$e(e):O$e(e);if(typeof e=="string")return I$e(e);throw new Error("Expected function, string, or object as test")};function T$e(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=g0(e[n]);return v0(r);function r(...a){let s=-1;for(;++s<t.length;)if(t[s].apply(this,a))return!0;return!1}}function O$e(e){const t=e;return v0(n);function n(r){const a=r;let s;for(s in e)if(a[s]!==t[s])return!1;return!0}}function I$e(e){return v0(t);function t(n){return n&&n.type===e}}function v0(e){return t;function t(n,r,a){return!!(M$e(n)&&e.call(this,n,typeof r=="number"?r:void 0,a||void 0))}}function R$e(){return!0}function M$e(e){return e!==null&&typeof e=="object"&&"type"in e}const xW=[],D$e=!0,Wk=!1,$$e="skip";function yW(e,t,n,r){let a;typeof t=="function"&&typeof n!="function"?(r=n,n=t):a=t;const s=g0(a),o=r?-1:1;l(e,void 0,[])();function l(c,u,f){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const m=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(m?"<"+m+">":""))+")"})}return h;function h(){let m=xW,g,v,x;if((!t||s(c,u,f[f.length-1]||void 0))&&(m=L$e(n(c,f)),m[0]===Wk))return m;if("children"in c&&c.children){const y=c;if(y.children&&m[0]!==$$e)for(v=(r?y.children.length:-1)+o,x=f.concat(y);v>-1&&v<y.children.length;){const b=y.children[v];if(g=l(b,v,x)(),g[0]===Wk)return g;v=typeof g[1]=="number"?g[1]:v+o}}return m}}}function L$e(e){return Array.isArray(e)?e:typeof e=="number"?[D$e,e]:e==null?xW:[e]}function $A(e,t,n,r){let a,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,a=n):(s=t,o=n,a=r),yW(e,s,l,a);function l(c,u){const f=u[u.length-1],d=f?f.children.indexOf(c):void 0;return o(c,d,f)}}const Hk={}.hasOwnProperty,F$e={};function B$e(e,t){const n=t||F$e,r=new Map,a=new Map,s=new Map,o={..._$e,...n.handlers},l={all:u,applyData:z$e,definitionById:r,footnoteById:a,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:U$e,wrap:W$e};return $A(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const d=f.type==="definition"?r:a,h=String(f.identifier).toUpperCase();d.has(h)||d.set(h,f)}}),l;function c(f,d){const h=f.type,m=l.handlers[h];if(Hk.call(l.handlers,h)&&m)return m(l,f,d);if(l.options.passThrough&&l.options.passThrough.includes(h)){if("children"in f){const{children:v,...x}=f,y=iy(x);return y.children=l.all(f),y}return iy(f)}return(l.options.unknownHandler||q$e)(l,f,d)}function u(f){const d=[];if("children"in f){const h=f.children;let m=-1;for(;++m<h.length;){const g=l.one(h[m],f);if(g){if(m&&h[m-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=hM(g.value)),!Array.isArray(g)&&g.type==="element")){const v=g.children[0];v&&v.type==="text"&&(v.value=hM(v.value))}Array.isArray(g)?d.push(...g):d.push(g)}}}return d}}function U$e(e,t){e.position&&(t.position=ERe(e))}function z$e(e,t){let n=t;if(e&&e.data){const r=e.data.hName,a=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,iy(s)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function q$e(e,t){const n=t.data||{},r="value"in t&&!(Hk.call(n,"hProperties")||Hk.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function W$e(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function hM(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function mM(e,t){const n=B$e(e,t),r=n.one(e,void 0),a=P$e(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return a&&s.children.push({type:"text",value:`
`},a),s}function H$e(e,t){return e&&"run"in e?async function(n,r){const a=mM(n,{file:r,...t});await e.run(a,r)}:function(n,r){return mM(n,{file:r,...e||t})}}function pM(e){if(e)throw e}var pv=Object.prototype.hasOwnProperty,bW=Object.prototype.toString,gM=Object.defineProperty,vM=Object.getOwnPropertyDescriptor,xM=function(t){return typeof Array.isArray=="function"?Array.isArray(t):bW.call(t)==="[object Array]"},yM=function(t){if(!t||bW.call(t)!=="[object Object]")return!1;var n=pv.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&pv.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var a;for(a in t);return typeof a>"u"||pv.call(t,a)},bM=function(t,n){gM&&n.name==="__proto__"?gM(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},wM=function(t,n){if(n==="__proto__")if(pv.call(t,n)){if(vM)return vM(t,n).value}else return;return t[n]},V$e=function e(){var t,n,r,a,s,o,l=arguments[0],c=1,u=arguments.length,f=!1;for(typeof l=="boolean"&&(f=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=wM(l,n),a=wM(t,n),l!==a&&(f&&a&&(yM(a)||(s=xM(a)))?(s?(s=!1,o=r&&xM(r)?r:[]):o=r&&yM(r)?r:{},bM(l,{name:n,newValue:e(f,o,a)})):typeof a<"u"&&bM(l,{name:n,newValue:a}));return l};const xj=fn(V$e);function Vk(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function K$e(){const e=[],t={run:n,use:r};return t;function n(...a){let s=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...a);function l(c,...u){const f=e[++s];let d=-1;if(c){o(c);return}for(;++d<a.length;)(u[d]===null||u[d]===void 0)&&(u[d]=a[d]);a=u,f?G$e(f,l)(...u):o(null,...u)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function G$e(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(a);try{c=e.apply(this,o)}catch(u){const f=u;if(l&&n)throw f;return a(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,a):c instanceof Error?a(c):s(c))}function a(o,...l){n||(n=!0,t(o,...l))}function s(o){a(null,o)}}const es={basename:Y$e,dirname:X$e,extname:J$e,join:Q$e,sep:"/"};function Y$e(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');zp(e);let n=0,r=-1,a=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else r<0&&(s=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else o<0&&(s=!0,o=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(r=a):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function X$e(e){if(zp(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function J$e(e){zp(e);let t=e.length,n=-1,r=0,a=-1,s=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?a<0?a=t:s!==1&&(s=1):a>-1&&(s=-1)}return a<0||n<0||s===0||s===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function Q$e(...e){let t=-1,n;for(;++t<e.length;)zp(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Z$e(n)}function Z$e(e){zp(e);const t=e.codePointAt(0)===47;let n=eLe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function eLe(e,t){let n="",r=0,a=-1,s=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(a===o-1||s===1))if(a!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),a=o,s=0;continue}}else if(n.length>0){n="",r=0,a=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function zp(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const tLe={cwd:nLe};function nLe(){return"/"}function Kk(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function rLe(e){if(typeof e=="string")e=new URL(e);else if(!Kk(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return aLe(e)}function aLe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const yj=["history","path","basename","stem","extname","dirname"];class wW{constructor(t){let n;t?Kk(t)?n={path:t}:typeof t=="string"||iLe(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":tLe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<yj.length;){const s=yj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let a;for(a in n)yj.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?es.basename(this.path):void 0}set basename(t){wj(t,"basename"),bj(t,"basename"),this.path=es.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?es.dirname(this.path):void 0}set dirname(t){jM(this.basename,"dirname"),this.path=es.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?es.extname(this.path):void 0}set extname(t){if(bj(t,"extname"),jM(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=es.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Kk(t)&&(t=rLe(t)),wj(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?es.basename(this.path,this.extname):void 0}set stem(t){wj(t,"stem"),bj(t,"stem"),this.path=es.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=void 0,a}message(t,n,r){const a=new Kr(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function bj(e,t){if(e&&e.includes(es.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+es.sep+"`")}function wj(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function jM(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function iLe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const sLe=function(e){const r=this.constructor.prototype,a=r[e],s=function(){return a.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},oLe={}.hasOwnProperty;class LA extends sLe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=K$e()}copy(){const t=new LA;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(xj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(kj("data",this.frozen),this.namespace[t]=n,this):oLe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(kj("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const a=n.call(t,...r);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Hg(t),r=this.parser||this.Parser;return jj("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),jj("process",this.parser||this.Parser),_j("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(s,o){const l=Hg(t),c=r.parse(l);r.run(c,l,function(f,d,h){if(f||!d||!h)return u(f);const m=d,g=r.stringify(m,h);uLe(g)?h.value=g:h.result=g,u(f,h)});function u(f,d){f||!d?o(f):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),jj("processSync",this.parser||this.Parser),_j("processSync",this.compiler||this.Compiler),this.process(t,a),kM("processSync","process",n),r;function a(s,o){n=!0,pM(s),r=o}}run(t,n,r){_M(t),this.freeze();const a=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,l){const c=Hg(n);a.run(t,c,u);function u(f,d,h){const m=d||t;f?l(f):o?o(m):r(void 0,m,h)}}}runSync(t,n){let r=!1,a;return this.run(t,n,s),kM("runSync","run",r),a;function s(o,l){pM(o),a=l,r=!0}}stringify(t,n){this.freeze();const r=Hg(n),a=this.compiler||this.Compiler;return _j("stringify",a),_M(t),a(t,r)}use(t,...n){const r=this.attachers,a=this.namespace;if(kj("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...d]=u;c(f,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(a.settings=xj(!0,a.settings,u.settings))}function l(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const d=u[f];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,f){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===u){h=d;break}if(h===-1)r.push([u,...f]);else if(f.length>0){let[m,...g]=f;const v=r[h][1];Vk(v)&&Vk(m)&&(m=xj(!0,v,m)),r[h]=[u,m,...g]}}}}const lLe=new LA().freeze();function jj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function _j(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function kj(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function _M(e){if(!Vk(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function kM(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Hg(e){return cLe(e)?e:new wW(e)}function cLe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function uLe(e){return typeof e=="string"||dLe(e)}function dLe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const fLe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",SM=[],NM={allowDangerousHtml:!0},hLe=/^(https?|ircs?|mailto|xmpp)$/i,mLe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function CM(e){const t=pLe(e),n=gLe(e);return vLe(t.runSync(t.parse(n),n),e)}function pLe(e){const t=e.rehypePlugins||SM,n=e.remarkPlugins||SM,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...NM}:NM;return lLe().use(JDe).use(n).use(H$e,r).use(t)}function gLe(e){const t=e.children||"",n=new wW;return typeof t=="string"&&(n.value=t),n}function vLe(e,t){const n=t.allowedElements,r=t.allowElement,a=t.components,s=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||xLe;for(const f of mLe)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+fLe+f.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),$A(e,u),RRe(e,{Fragment:i.Fragment,components:a,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function u(f,d,h){if(f.type==="raw"&&h&&typeof d=="number")return o?h.children.splice(d,1):h.children[d]={type:"text",value:f.value},d;if(f.type==="element"){let m;for(m in pj)if(Object.hasOwn(pj,m)&&Object.hasOwn(f.properties,m)){const g=f.properties[m],v=pj[m];(v===null||v.includes(f.tagName))&&(f.properties[m]=c(String(g||""),m,f))}}if(f.type==="element"){let m=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!m&&r&&typeof d=="number"&&(m=!r(f,d,h)),m&&h&&typeof d=="number")return l&&f.children?h.children.splice(d,1,...f.children):h.children.splice(d,1),d}}}function xLe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||n!==-1&&t>n||r!==-1&&t>r||hLe.test(e.slice(0,t))?e:""}function AM(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,a=n.indexOf(t);for(;a!==-1;)r++,a=n.indexOf(t,a+t.length);return r}function yLe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function bLe(e,t,n){const a=g0((n||{}).ignore||[]),s=wLe(t);let o=-1;for(;++o<s.length;)yW(e,"text",l);function l(u,f){let d=-1,h;for(;++d<f.length;){const m=f[d],g=h?h.children:void 0;if(a(m,g?g.indexOf(m):void 0,h))return;h=m}if(h)return c(u,f)}function c(u,f){const d=f[f.length-1],h=s[o][0],m=s[o][1];let g=0;const x=d.children.indexOf(u);let y=!1,b=[];h.lastIndex=0;let w=h.exec(u.value);for(;w;){const j=w.index,k={index:w.index,input:w.input,stack:[...f,u]};let _=m(...w,k);if(typeof _=="string"&&(_=_.length>0?{type:"text",value:_}:void 0),_===!1?h.lastIndex=j+1:(g!==j&&b.push({type:"text",value:u.value.slice(g,j)}),Array.isArray(_)?b.push(..._):_&&b.push(_),g=j+w[0].length,y=!0),!h.global)break;w=h.exec(u.value)}return y?(g<u.value.length&&b.push({type:"text",value:u.value.slice(g)}),d.children.splice(x,1,...b)):b=[u],x+b.length}}function wLe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const a=n[r];t.push([jLe(a[0]),_Le(a[1])])}return t}function jLe(e){return typeof e=="string"?new RegExp(yLe(e),"g"):e}function _Le(e){return typeof e=="function"?e:function(){return e}}const Sj="phrasing",Nj=["autolink","link","image","label"];function kLe(){return{transforms:[TLe],enter:{literalAutolink:NLe,literalAutolinkEmail:Cj,literalAutolinkHttp:Cj,literalAutolinkWww:Cj},exit:{literalAutolink:PLe,literalAutolinkEmail:ELe,literalAutolinkHttp:CLe,literalAutolinkWww:ALe}}}function SLe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Sj,notInConstruct:Nj},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Sj,notInConstruct:Nj},{character:":",before:"[ps]",after:"\\/",inConstruct:Sj,notInConstruct:Nj}]}}function NLe(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Cj(e){this.config.enter.autolinkProtocol.call(this,e)}function CLe(e){this.config.exit.autolinkProtocol.call(this,e)}function ALe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function ELe(e){this.config.exit.autolinkEmail.call(this,e)}function PLe(e){this.exit(e)}function TLe(e){bLe(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,OLe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),ILe]],{ignore:["link","linkReference"]})}function OLe(e,t,n,r,a){let s="";if(!jW(a)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!RLe(n)))return!1;const o=MLe(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:s+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function ILe(e,t,n,r){return!jW(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function RLe(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function MLe(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const a=AM(e,"(");let s=AM(e,")");for(;r!==-1&&a>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function jW(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||zc(n)||h0(n))&&(!t||n!==47)}_W.peek=WLe;function DLe(){this.buffer()}function $Le(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function LLe(){this.buffer()}function FLe(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function BLe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zi(this.sliceSerialize(e)).toLowerCase(),n.label=t}function ULe(e){this.exit(e)}function zLe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=zi(this.sliceSerialize(e)).toLowerCase(),n.label=t}function qLe(e){this.exit(e)}function WLe(){return"["}function _W(e,t,n,r){const a=n.createTracker(r);let s=a.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=a.move(n.safe(n.associationId(e),{after:"]",before:s})),l(),o(),s+=a.move("]"),s}function HLe(){return{enter:{gfmFootnoteCallString:DLe,gfmFootnoteCall:$Le,gfmFootnoteDefinitionLabelString:LLe,gfmFootnoteDefinition:FLe},exit:{gfmFootnoteCallString:BLe,gfmFootnoteCall:ULe,gfmFootnoteDefinitionLabelString:zLe,gfmFootnoteDefinition:qLe}}}function VLe(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:_W},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,a,s,o){const l=s.createTracker(o);let c=l.move("[^");const u=s.enter("footnoteDefinition"),f=s.enter("label");return c+=l.move(s.safe(s.associationId(r),{before:c,after:"]"})),f(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,l.current()),t?kW:KLe))),u(),c}}function KLe(e,t,n){return t===0?e:kW(e,t,n)}function kW(e,t,n){return(n?"":"    ")+e}const GLe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];SW.peek=ZLe;function YLe(){return{canContainEols:["delete"],enter:{strikethrough:JLe},exit:{strikethrough:QLe}}}function XLe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:GLe}],handlers:{delete:SW}}}function JLe(e){this.enter({type:"delete",children:[]},e)}function QLe(e){this.exit(e)}function SW(e,t,n,r){const a=n.createTracker(r),s=n.enter("strikethrough");let o=a.move("~~");return o+=n.containerPhrasing(e,{...a.current(),before:o,after:"~"}),o+=a.move("~~"),s(),o}function ZLe(){return"~"}function e4e(e){return e.length}function t4e(e,t){const n=t||{},r=(n.align||[]).concat(),a=n.stringLength||e4e,s=[],o=[],l=[],c=[];let u=0,f=-1;for(;++f<e.length;){const v=[],x=[];let y=-1;for(e[f].length>u&&(u=e[f].length);++y<e[f].length;){const b=n4e(e[f][y]);if(n.alignDelimiters!==!1){const w=a(b);x[y]=w,(c[y]===void 0||w>c[y])&&(c[y]=w)}v.push(b)}o[f]=v,l[f]=x}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<u;)s[d]=EM(r[d]);else{const v=EM(r);for(;++d<u;)s[d]=v}d=-1;const h=[],m=[];for(;++d<u;){const v=s[d];let x="",y="";v===99?(x=":",y=":"):v===108?x=":":v===114&&(y=":");let b=n.alignDelimiters===!1?1:Math.max(1,c[d]-x.length-y.length);const w=x+"-".repeat(b)+y;n.alignDelimiters!==!1&&(b=x.length+b+y.length,b>c[d]&&(c[d]=b),m[d]=b),h[d]=w}o.splice(1,0,h),l.splice(1,0,m),f=-1;const g=[];for(;++f<o.length;){const v=o[f],x=l[f];d=-1;const y=[];for(;++d<u;){const b=v[d]||"";let w="",j="";if(n.alignDelimiters!==!1){const k=c[d]-(x[d]||0),_=s[d];_===114?w=" ".repeat(k):_===99?k%2?(w=" ".repeat(k/2+.5),j=" ".repeat(k/2-.5)):(w=" ".repeat(k/2),j=w):j=" ".repeat(k)}n.delimiterStart!==!1&&!d&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&b==="")&&(n.delimiterStart!==!1||d)&&y.push(" "),n.alignDelimiters!==!1&&y.push(w),y.push(b),n.alignDelimiters!==!1&&y.push(j),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&y.push("|")}g.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return g.join(`
`)}function n4e(e){return e==null?"":String(e)}function EM(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function r4e(e,t,n,r){const a=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(e,s.current()),a4e);return a(),o}function a4e(e,t,n){return">"+(n?"":" ")+e}function i4e(e,t){return PM(e,t.inConstruct,!0)&&!PM(e,t.notInConstruct,!1)}function PM(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function TM(e,t,n,r){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&i4e(n.stack,n.unsafe[a]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function s4e(e,t){const n=String(e);let r=n.indexOf(t),a=r,s=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===a?++s>o&&(o=s):s=1,a=r+t.length,r=n.indexOf(t,a);return o}function o4e(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function l4e(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function c4e(e,t,n,r){const a=l4e(n),s=e.value||"",o=a==="`"?"GraveAccent":"Tilde";if(o4e(e,n)){const d=n.enter("codeIndented"),h=n.indentLines(s,u4e);return d(),h}const l=n.createTracker(r),c=a.repeat(Math.max(s4e(s,a)+1,3)),u=n.enter("codeFenced");let f=l.move(c);if(e.lang){const d=n.enter(`codeFencedLang${o}`);f+=l.move(n.safe(e.lang,{before:f,after:" ",encode:["`"],...l.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${o}`);f+=l.move(" "),f+=l.move(n.safe(e.meta,{before:f,after:`
`,encode:["`"],...l.current()})),d()}return f+=l.move(`
`),s&&(f+=l.move(s+`
`)),f+=l.move(c),u(),f}function u4e(e,t,n){return(n?"":"    ")+e}function FA(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function d4e(e,t,n,r){const a=FA(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),o(),u}function f4e(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Xm(e){return"&#x"+e.toString(16).toUpperCase()+";"}function sy(e,t,n){const r=Yd(e),a=Yd(t);return r===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}NW.peek=h4e;function NW(e,t,n,r){const a=f4e(n),s=n.enter("emphasis"),o=n.createTracker(r),l=o.move(a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),f=sy(r.before.charCodeAt(r.before.length-1),u,a);f.inside&&(c=Xm(u)+c.slice(1));const d=c.charCodeAt(c.length-1),h=sy(r.after.charCodeAt(0),d,a);h.inside&&(c=c.slice(0,-1)+Xm(d));const m=o.move(a);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},l+c+m}function h4e(e,t,n){return n.options.emphasis||"*"}function m4e(e,t){let n=!1;return $A(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Wk}),!!((!e.depth||e.depth<3)&&PA(e)&&(t.options.setext||n))}function p4e(e,t,n,r){const a=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(m4e(e,n)){const f=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return d(),f(),h+`
`+(a===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(a),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Xm(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u}CW.peek=g4e;function CW(e){return e.value||""}function g4e(){return"<"}AW.peek=v4e;function AW(e,t,n,r){const a=FA(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),u+=c.move(")"),o(),u}function v4e(){return"!"}EW.peek=x4e;function EW(e,t,n,r){const a=e.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!u||u!==d?c+=l.move(d+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function x4e(){return"!"}PW.peek=y4e;function PW(e,t,n){let r=e.value||"",a="`",s=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(r);)a+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return a+r+a}function y4e(){return"`"}function TW(e,t){const n=PA(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}OW.peek=b4e;function OW(e,t,n,r){const a=FA(n),s=a==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,c;if(TW(e,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(e,{before:d,after:">",...o.current()})),d+=o.move(">"),l(),n.stack=f,d}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),c(),e.title&&(c=n.enter(`title${s}`),u+=o.move(" "+a),u+=o.move(n.safe(e.title,{before:u,after:a,...o.current()})),u+=o.move(a),c()),u+=o.move(")"),l(),u}function b4e(e,t,n){return TW(e,n)?"<":"["}IW.peek=w4e;function IW(e,t,n,r){const a=e.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!u||u!==d?c+=l.move(d+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function w4e(){return"["}function BA(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function j4e(e){const t=BA(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function _4e(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function RW(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function k4e(e,t,n,r){const a=n.enter("list"),s=n.bulletCurrent;let o=e.ordered?_4e(n):BA(n);const l=e.ordered?o==="."?")":".":j4e(n);let c=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const f=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),RW(n)===o&&f){let d=-1;for(;++d<e.children.length;){const h=e.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=s,a(),u}function S4e(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function N4e(e,t,n,r){const a=S4e(n);let s=n.bulletCurrent||BA(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),f);return c(),u;function f(d,h,m){return h?(m?"":" ".repeat(o))+d:(m?s:s+" ".repeat(o-s.length))+d}}function C4e(e,t,n,r){const a=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(e,r);return s(),a(),o}const A4e=g0(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function E4e(e,t,n,r){return(e.children.some(function(o){return A4e(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function P4e(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}MW.peek=T4e;function MW(e,t,n,r){const a=P4e(n),s=n.enter("strong"),o=n.createTracker(r),l=o.move(a+a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),f=sy(r.before.charCodeAt(r.before.length-1),u,a);f.inside&&(c=Xm(u)+c.slice(1));const d=c.charCodeAt(c.length-1),h=sy(r.after.charCodeAt(0),d,a);h.inside&&(c=c.slice(0,-1)+Xm(d));const m=o.move(a+a);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},l+c+m}function T4e(e,t,n){return n.options.strong||"*"}function O4e(e,t,n,r){return n.safe(e.value,r)}function I4e(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function R4e(e,t,n){const r=(RW(n)+(n.options.ruleSpaces?" ":"")).repeat(I4e(n));return n.options.ruleSpaces?r.slice(0,-1):r}const DW={blockquote:r4e,break:TM,code:c4e,definition:d4e,emphasis:NW,hardBreak:TM,heading:p4e,html:CW,image:AW,imageReference:EW,inlineCode:PW,link:OW,linkReference:IW,list:k4e,listItem:N4e,paragraph:C4e,root:E4e,strong:MW,text:O4e,thematicBreak:R4e};function M4e(){return{enter:{table:D4e,tableData:OM,tableHeader:OM,tableRow:L4e},exit:{codeText:F4e,table:$4e,tableData:Aj,tableHeader:Aj,tableRow:Aj}}}function D4e(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function $4e(e){this.exit(e),this.data.inTable=void 0}function L4e(e){this.enter({type:"tableRow",children:[]},e)}function Aj(e){this.exit(e)}function OM(e){this.enter({type:"tableCell",children:[]},e)}function F4e(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,B4e));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function B4e(e,t){return t==="|"?t:e}function U4e(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,a=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:c,tableRow:l}};function o(m,g,v,x){return u(f(m,v,x),m.align)}function l(m,g,v,x){const y=d(m,v,x),b=u([y]);return b.slice(0,b.indexOf(`
`))}function c(m,g,v,x){const y=v.enter("tableCell"),b=v.enter("phrasing"),w=v.containerPhrasing(m,{...x,before:s,after:s});return b(),y(),w}function u(m,g){return t4e(m,{align:g,alignDelimiters:r,padding:n,stringLength:a})}function f(m,g,v){const x=m.children;let y=-1;const b=[],w=g.enter("table");for(;++y<x.length;)b[y]=d(x[y],g,v);return w(),b}function d(m,g,v){const x=m.children;let y=-1;const b=[],w=g.enter("tableRow");for(;++y<x.length;)b[y]=c(x[y],m,g,v);return w(),b}function h(m,g,v){let x=DW.inlineCode(m,g,v);return v.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function z4e(){return{exit:{taskListCheckValueChecked:IM,taskListCheckValueUnchecked:IM,paragraph:W4e}}}function q4e(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:H4e}}}function IM(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function W4e(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const a=t.children;let s=-1,o;for(;++s<a.length;){const l=a[s];if(l.type==="paragraph"){o=l;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function H4e(e,t,n,r){const a=e.children[0],s=typeof e.checked=="boolean"&&a&&a.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);s&&l.move(o);let c=DW.listItem(e,t,n,{...r,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(f){return f+o}}function V4e(){return[kLe(),HLe(),YLe(),M4e(),z4e()]}function K4e(e){return{extensions:[SLe(),VLe(e),XLe(),U4e(e),q4e()]}}const G4e={tokenize:eFe,partial:!0},$W={tokenize:tFe,partial:!0},LW={tokenize:nFe,partial:!0},FW={tokenize:rFe,partial:!0},Y4e={tokenize:aFe,partial:!0},BW={name:"wwwAutolink",tokenize:Q4e,previous:zW},UW={name:"protocolAutolink",tokenize:Z4e,previous:qW},vo={name:"emailAutolink",tokenize:J4e,previous:WW},Ss={};function X4e(){return{text:Ss}}let ql=48;for(;ql<123;)Ss[ql]=vo,ql++,ql===58?ql=65:ql===91&&(ql=97);Ss[43]=vo;Ss[45]=vo;Ss[46]=vo;Ss[95]=vo;Ss[72]=[vo,UW];Ss[104]=[vo,UW];Ss[87]=[vo,BW];Ss[119]=[vo,BW];function J4e(e,t,n){const r=this;let a,s;return o;function o(d){return!Gk(d)||!WW.call(r,r.previous)||UA(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(d))}function l(d){return Gk(d)?(e.consume(d),l):d===64?(e.consume(d),c):n(d)}function c(d){return d===46?e.check(Y4e,f,u)(d):d===45||d===95||Wr(d)?(s=!0,e.consume(d),c):f(d)}function u(d){return e.consume(d),a=!0,c}function f(d){return s&&a&&ra(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function Q4e(e,t,n){const r=this;return a;function a(o){return o!==87&&o!==119||!zW.call(r,r.previous)||UA(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(G4e,e.attempt($W,e.attempt(LW,s),n),n)(o))}function s(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function Z4e(e,t,n){const r=this;let a="",s=!1;return o;function o(d){return(d===72||d===104)&&qW.call(r,r.previous)&&!UA(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(d),e.consume(d),l):n(d)}function l(d){if(ra(d)&&a.length<5)return a+=String.fromCodePoint(d),e.consume(d),l;if(d===58){const h=a.toLowerCase();if(h==="http"||h==="https")return e.consume(d),c}return n(d)}function c(d){return d===47?(e.consume(d),s?u:(s=!0,c)):n(d)}function u(d){return d===null||ry(d)||bn(d)||zc(d)||h0(d)?n(d):e.attempt($W,e.attempt(LW,f),n)(d)}function f(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function eFe(e,t,n){let r=0;return a;function a(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),a):o===46&&r===3?(e.consume(o),s):n(o)}function s(o){return o===null?n(o):t(o)}}function tFe(e,t,n){let r,a,s;return o;function o(u){return u===46||u===95?e.check(FW,c,l)(u):u===null||bn(u)||zc(u)||u!==45&&h0(u)?c(u):(s=!0,e.consume(u),o)}function l(u){return u===95?r=!0:(a=r,r=void 0),e.consume(u),o}function c(u){return a||r||!s?n(u):t(u)}}function nFe(e,t){let n=0,r=0;return a;function a(o){return o===40?(n++,e.consume(o),a):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(FW,t,s)(o):o===null||bn(o)||zc(o)?t(o):(e.consume(o),a)}function s(o){return o===41&&r++,e.consume(o),a}}function rFe(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),s):l===93?(e.consume(l),a):l===60||l===null||bn(l)||zc(l)?t(l):n(l)}function a(l){return l===null||l===40||l===91||bn(l)||zc(l)?t(l):r(l)}function s(l){return ra(l)?o(l):n(l)}function o(l){return l===59?(e.consume(l),r):ra(l)?(e.consume(l),o):n(l)}}function aFe(e,t,n){return r;function r(s){return e.consume(s),a}function a(s){return Wr(s)?n(s):t(s)}}function zW(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||bn(e)}function qW(e){return!ra(e)}function WW(e){return!(e===47||Gk(e))}function Gk(e){return e===43||e===45||e===46||e===95||Wr(e)}function UA(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const iFe={tokenize:hFe,partial:!0};function sFe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:uFe,continuation:{tokenize:dFe},exit:fFe}},text:{91:{name:"gfmFootnoteCall",tokenize:cFe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:oFe,resolveTo:lFe}}}}function oFe(e,t,n){const r=this;let a=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;a--;){const c=r.events[a][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const u=zi(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function lFe(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function cFe(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return l;function l(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(d){if(s>999||d===93&&!o||d===null||d===91||bn(d))return n(d);if(d===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return a.includes(zi(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return bn(d)||(o=!0),s++,e.consume(d),d===92?f:u}function f(d){return d===91||d===92||d===93?(e.consume(d),s++,u):u(d)}}function uFe(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(g){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(g){return g===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):n(g)}function f(g){if(o>999||g===93&&!l||g===null||g===91||bn(g))return n(g);if(g===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return s=zi(r.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return bn(g)||(l=!0),o++,e.consume(g),g===92?d:f}function d(g){return g===91||g===92||g===93?(e.consume(g),o++,f):f(g)}function h(g){return g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),a.includes(s)||a.push(s),Yt(e,m,"gfmFootnoteDefinitionWhitespace")):n(g)}function m(g){return t(g)}}function dFe(e,t,n){return e.check(Up,t,e.attempt(iFe,t,n))}function fFe(e){e.exit("gfmFootnoteDefinition")}function hFe(e,t,n){const r=this;return Yt(e,a,"gfmFootnoteDefinitionIndent",5);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(s):n(s)}}function mFe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:a};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function a(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},d={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},h=[["enter",f,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",d,l]],m=l.parser.constructs.insideSpan.null;m&&za(h,h.length,0,m0(m,o.slice(u+1,c),l)),za(h,h.length,0,[["exit",d,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",f,l]]),za(o,u-1,c-u+3,h),c=u+h.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const u=this.previous,f=this.events;let d=0;return h;function h(g){return u===126&&f[f.length-1][1].type!=="characterEscape"?c(g):(o.enter("strikethroughSequenceTemporary"),m(g))}function m(g){const v=Yd(u);if(g===126)return d>1?c(g):(o.consume(g),d++,m);if(d<2&&!n)return c(g);const x=o.exit("strikethroughSequenceTemporary"),y=Yd(g);return x._open=!y||y===2&&!!v,x._close=!v||v===2&&!!y,l(g)}}}class pFe{constructor(){this.map=[]}add(t,n,r){gFe(this,t,n,r)}consume(t){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let a=r.pop();for(;a;){for(const s of a)t.push(s);a=r.pop()}this.map.length=0}}function gFe(e,t,n,r){let a=0;if(!(n===0&&r.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=n,e.map[a][2].push(...r);return}a+=1}e.map.push([t,n,r])}}function vFe(e,t){let n=!1;const r=[];for(;t<e.length;){const a=e[t];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function xFe(){return{flow:{null:{name:"table",tokenize:yFe,resolveAll:bFe}}}}function yFe(e,t,n){const r=this;let a=0,s=0,o;return l;function l(I){let P=r.events.length-1;for(;P>-1;){const B=r.events[P][1].type;if(B==="lineEnding"||B==="linePrefix")P--;else break}const D=P>-1?r.events[P][1].type:null,L=D==="tableHead"||D==="tableRow"?_:c;return L===_&&r.parser.lazy[r.now().line]?n(I):L(I)}function c(I){return e.enter("tableHead"),e.enter("tableRow"),u(I)}function u(I){return I===124||(o=!0,s+=1),f(I)}function f(I){return I===null?n(I):xt(I)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),m):n(I):Ht(I)?Yt(e,f,"whitespace")(I):(s+=1,o&&(o=!1,a+=1),I===124?(e.enter("tableCellDivider"),e.consume(I),e.exit("tableCellDivider"),o=!0,f):(e.enter("data"),d(I)))}function d(I){return I===null||I===124||bn(I)?(e.exit("data"),f(I)):(e.consume(I),I===92?h:d)}function h(I){return I===92||I===124?(e.consume(I),d):d(I)}function m(I){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(I):(e.enter("tableDelimiterRow"),o=!1,Ht(I)?Yt(e,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):g(I))}function g(I){return I===45||I===58?x(I):I===124?(o=!0,e.enter("tableCellDivider"),e.consume(I),e.exit("tableCellDivider"),v):k(I)}function v(I){return Ht(I)?Yt(e,x,"whitespace")(I):x(I)}function x(I){return I===58?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(I),e.exit("tableDelimiterMarker"),y):I===45?(s+=1,y(I)):I===null||xt(I)?j(I):k(I)}function y(I){return I===45?(e.enter("tableDelimiterFiller"),b(I)):k(I)}function b(I){return I===45?(e.consume(I),b):I===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(I),e.exit("tableDelimiterMarker"),w):(e.exit("tableDelimiterFiller"),w(I))}function w(I){return Ht(I)?Yt(e,j,"whitespace")(I):j(I)}function j(I){return I===124?g(I):I===null||xt(I)?!o||a!==s?k(I):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(I)):k(I)}function k(I){return n(I)}function _(I){return e.enter("tableRow"),S(I)}function S(I){return I===124?(e.enter("tableCellDivider"),e.consume(I),e.exit("tableCellDivider"),S):I===null||xt(I)?(e.exit("tableRow"),t(I)):Ht(I)?Yt(e,S,"whitespace")(I):(e.enter("data"),E(I))}function E(I){return I===null||I===124||bn(I)?(e.exit("data"),S(I)):(e.consume(I),I===92?N:E)}function N(I){return I===92||I===124?(e.consume(I),E):E(I)}}function bFe(e,t){let n=-1,r=!0,a=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,f,d;const h=new pFe;for(;++n<e.length;){const m=e[n],g=m[1];m[0]==="enter"?g.type==="tableHead"?(l=!1,c!==0&&(RM(h,t,c,u,f),f=void 0,c=0),u={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",u,t]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",f,t]])),a=g.type==="tableDelimiterRow"?2:f?3:1):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=Vg(h,t,s,a,void 0,d),s=[0,0,0,0]),o[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],d=Vg(h,t,s,a,void 0,d)),s=o,o=[s[1],n,0,0])):g.type==="tableHead"?(l=!0,c=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],d=Vg(h,t,s,a,n,d)):o[1]!==0&&(d=Vg(h,t,o,a,n,d)),a=0):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&RM(h,t,c,u,f),h.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=vFe(t.events,n))}return e}function Vg(e,t,n,r,a,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Au(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const c=Au(t.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const u=Au(t.events,n[2]),f=Au(t.events,n[3]),d={type:l,start:Object.assign({},u),end:Object.assign({},f)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const h=t.events[n[2]],m=t.events[n[3]];if(h[1].end=Object.assign({},m[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,v=n[3]-n[2]-1;e.add(g,v,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return a!==void 0&&(s.end=Object.assign({},Au(t.events,a)),e.add(a,0,[["exit",s,t]]),s=void 0),s}function RM(e,t,n,r,a){const s=[],o=Au(t.events,n);a&&(a.end=Object.assign({},o),s.push(["exit",a,t])),r.end=Object.assign({},o),s.push(["exit",r,t]),e.add(n+1,0,s)}function Au(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const wFe={name:"tasklistCheck",tokenize:_Fe};function jFe(){return{text:{91:wFe}}}function _Fe(e,t,n){const r=this;return a;function a(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),s)}function s(c){return bn(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return xt(c)?t(c):Ht(c)?e.check({tokenize:kFe},t,n)(c):n(c)}}function kFe(e,t,n){return Yt(e,r,"whitespace");function r(a){return a===null?n(a):t(a)}}function SFe(e){return eW([X4e(),sFe(),mFe(e),xFe(),jFe()])}const NFe={};function MM(e){const t=this,n=e||NFe,r=t.data(),a=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);a.push(SFe(n)),s.push(V4e()),o.push(K4e(n))}var Xi="Accordion",CFe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[zA,AFe,EFe]=ap(Xi),[x0,v3e]=_r(Xi,[EFe,jq]),qA=jq(),HW=V.forwardRef((e,t)=>{const{type:n,...r}=e,a=r,s=r;return i.jsx(zA.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?i.jsx(IFe,{...s,ref:t}):i.jsx(OFe,{...a,ref:t})})});HW.displayName=Xi;var[VW,PFe]=x0(Xi),[KW,TFe]=x0(Xi,{collapsible:!1}),OFe=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},collapsible:s=!1,...o}=e,[l,c]=Ca({prop:n,defaultProp:r??"",onChange:a,caller:Xi});return i.jsx(VW,{scope:e.__scopeAccordion,value:V.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:V.useCallback(()=>s&&c(""),[s,c]),children:i.jsx(KW,{scope:e.__scopeAccordion,collapsible:s,children:i.jsx(GW,{...o,ref:t})})})}),IFe=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},...s}=e,[o,l]=Ca({prop:n,defaultProp:r??[],onChange:a,caller:Xi}),c=V.useCallback(f=>l((d=[])=>[...d,f]),[l]),u=V.useCallback(f=>l((d=[])=>d.filter(h=>h!==f)),[l]);return i.jsx(VW,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:i.jsx(KW,{scope:e.__scopeAccordion,collapsible:!0,children:i.jsx(GW,{...s,ref:t})})})}),[RFe,y0]=x0(Xi),GW=V.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:a,orientation:s="vertical",...o}=e,l=V.useRef(null),c=St(l,t),u=AFe(n),d=of(a)==="ltr",h=Ee(e.onKeyDown,m=>{var E;if(!CFe.includes(m.key))return;const g=m.target,v=u().filter(N=>{var I;return!((I=N.ref.current)!=null&&I.disabled)}),x=v.findIndex(N=>N.ref.current===g),y=v.length;if(x===-1)return;m.preventDefault();let b=x;const w=0,j=y-1,k=()=>{b=x+1,b>j&&(b=w)},_=()=>{b=x-1,b<w&&(b=j)};switch(m.key){case"Home":b=w;break;case"End":b=j;break;case"ArrowRight":s==="horizontal"&&(d?k():_());break;case"ArrowDown":s==="vertical"&&k();break;case"ArrowLeft":s==="horizontal"&&(d?_():k());break;case"ArrowUp":s==="vertical"&&_();break}const S=b%y;(E=v[S].ref.current)==null||E.focus()});return i.jsx(RFe,{scope:n,disabled:r,direction:a,orientation:s,children:i.jsx(zA.Slot,{scope:n,children:i.jsx(Ge.div,{...o,"data-orientation":s,ref:c,onKeyDown:r?void 0:h})})})}),oy="AccordionItem",[MFe,WA]=x0(oy),YW=V.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...a}=e,s=y0(oy,n),o=PFe(oy,n),l=qA(n),c=ir(),u=r&&o.value.includes(r)||!1,f=s.disabled||e.disabled;return i.jsx(MFe,{scope:n,open:u,disabled:f,triggerId:c,children:i.jsx(Sq,{"data-orientation":s.orientation,"data-state":t9(u),...l,...a,ref:t,disabled:f,open:u,onOpenChange:d=>{d?o.onItemOpen(r):o.onItemClose(r)}})})});YW.displayName=oy;var XW="AccordionHeader",JW=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=y0(Xi,n),s=WA(XW,n);return i.jsx(Ge.h3,{"data-orientation":a.orientation,"data-state":t9(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:t})});JW.displayName=XW;var Yk="AccordionTrigger",QW=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=y0(Xi,n),s=WA(Yk,n),o=TFe(Yk,n),l=qA(n);return i.jsx(zA.ItemSlot,{scope:n,children:i.jsx(ZOe,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:s.triggerId,...l,...r,ref:t})})});QW.displayName=Yk;var ZW="AccordionContent",e9=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=y0(Xi,n),s=WA(ZW,n),o=qA(n);return i.jsx(eIe,{role:"region","aria-labelledby":s.triggerId,"data-orientation":a.orientation,...o,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});e9.displayName=ZW;function t9(e){return e?"open":"closed"}var DFe=HW,$Fe=YW,LFe=JW,n9=QW,r9=e9;const FFe=DFe,a9=p.forwardRef(({className:e,...t},n)=>i.jsx($Fe,{ref:n,className:xe("border-b",e),...t}));a9.displayName="AccordionItem";const i9=p.forwardRef(({className:e,children:t,...n},r)=>i.jsx(LFe,{className:"flex",children:i.jsxs(n9,{ref:r,className:xe("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,i.jsx(xa,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));i9.displayName=n9.displayName;const s9=p.forwardRef(({className:e,children:t,...n},r)=>i.jsx(r9,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:i.jsx("div",{className:xe("pb-4 pt-0",e),children:t})}));s9.displayName=r9.displayName;const DM=`# Change Log
# [0.1.15] FE WEB CEKAT 2025-12-19
### Database & Policies
- **Threads Update Policy**: Master agents can now resolve conversations across all environments.
  - Updated the \`threads update perm update_own\` policy to allow updates when \`is_master_agent_in_org(org_id)\` is true.
  - Applied the policy change to main, development, and backup Supabase projects and added a migration for consistency.

### Conversation Management
- **Resolved Thread Cleanup**: UI now hides take-over controls once a thread is closed.
  - Removed the takeover button and composer input when \`status === 'closed'\`, preventing accidental actions on resolved chats.

### Contacts
- **Unassigned Filter Accuracy**: Ensured the contacts list reflects only unassigned records without altering assigned data.
  - Adjusted Supabase querying and client filtering so contacts with no assigned agent (or no thread yet) display correctly.
  - Total counters and pagination now show filtered counts (e.g. \`12 of 16\`) when a handled-by filter is active.
- **Export to CSV**: Added a one-click export that downloads the current contact dataset (with latest thread info) as a CSV.
  - Includes contact fields (name, phone, email, notes, created_at) and latest thread metadata (status, handled by, channel).
- **Toolbar Cleanup**: Removed the unused Customize Columns button for a leaner toolbar experience.

# [0.1.14] FE WEB CEKAT 2025-12-18
### Platform Forms (WhatsApp / Telegram / Web)
- **Top Spacing Layout Fix**: Standardized form spacing under dialog headers for a cleaner, consistent layout across all platform setup forms.

### Telegram Platform
- **Bot Token Validation (Required)**: Added a **Validate** button beside the Telegram Bot Token field and made validation mandatory before creating a Telegram platform.
  - Create is blocked with an error until the token has been validated.
- **Token Verification via Supabase Edge Function**: Token verification now calls the Supabase Edge Function endpoint (\`/functions/v1/telegram-verify-token\`) with a strict response contract (\`{ valid: boolean }\`).
  - \`callWebhook()\` now auto-attaches Supabase auth headers for Supabase Edge Function URLs.

# [0.1.13] FE WEB CEKAT 2025-12-17
### Conversation Management
- **Date Filter Fix**: Resolved an issue where the date filter in the conversations menu would incorrectly exclude valid conversations.
  - Switched from server-side filtering on \`created_at\`/\`last_msg_at\` (which could be stale) to client-side filtering using the computed last message time.
  - Ensures the filter now perfectly matches the dates displayed in the UI, correctly showing threads active within the selected range.

# [0.1.12] FE WEB CEKAT 2025-12-14
### Human Agents UI Protection
- **Master Agent UI Safeguards**: Enhanced protection for master agent accounts in the Human Agents interface.
  - Status dropdown button is now disabled for master agents across all sections (master agents, super agents, regular agents, and pending invitations).
  - Chevron dropdown icon is conditionally hidden for master agents to provide clear visual indication that status cannot be changed.
  - Delete button is completely hidden for master agents (replacing the previous disabled button with tooltip approach) across all agent sections.
  - Applied consistent protection logic using \`primaryRole === 'master_agent'\` checks throughout the component.
  - Provides cleaner UI experience by removing non-functional controls rather than showing disabled states.

### Authentication & OTP
- **2FA Email Edge Function Update**: Updated edge function reference for login-specific 2FA emails.
  - Changed edge function call from \`send-2fa-email\` to \`send-2fa-login-email\` in \`AuthContext.tsx\` and \`Otp.tsx\`.
  - Aligns with backend function naming convention for better clarity and separation of login vs other 2FA email flows.

# [0.1.11] FE WEB CEKAT 2025-12-10
### Conversation Management
- **Status Filter Cleanup**: Removed the redundant "Resolved" option from the conversation status filter.
  - The "Closed" status now serves as the single source of truth for completed conversations.
  - Simplified the filtering logic to remove unnecessary status checks.

# [0.1.10] FE WEB CEKAT 2025-12-09
### Human Agents & Permissions
- **Create Agent Permission Gate**: Simplified and hardened the Create Agent button on the Human Agents page.
  - Button is now directly gated by \`users_profile.create\` via \`PermissionGate\`, following the same pattern as other RBAC-protected actions.
  - When the user lacks permission, the button stays visible but disabled with a clear tooltip (You do not have permission to create agents.).
  - Removed the extra client-side lookup against the \`permissions\` table and associated state (\`createPermissionKey\`, \`checkingCreatePermission\`) to reduce complexity and runtime edge cases.

### Navigation & RBAC Consistency
- **Super Agents Schema Alignment**: Updated \`PERMISSIONS_SCHEMA\` to include the full \`super_agents\` action set (\`create\`, \`update\`, \`delete\`, \`read_all\`, \`read_own\`), matching the backend \`permissions\` table.
- **Navigation Read-Gates**: Centralized navigation gating to use read scopes consistently:
  - Added a defensive \`readPerms(resource)\` helper that safely derives \`resource.read*\` keys from \`PERMISSIONS_SCHEMA\`.
  - Human Agents sidebar item now depends on any \`super_agents\` read scope (e.g. \`super_agents.read_all\` / \`super_agents.read_own\`), keeping menu visibility aligned with DB permissions.
- **useNavigation Stability**: Adjusted \`useNavigation\` to skip DB permission recomputation while RBAC is still loading, preventing transient context errors during hot reloads while keeping the existing has_perm-first behavior.

# [0.1.9] FE WEB CEKAT 2025-12-03
### AI Agents
- Replaced the browser \`confirm()\` with a first-class modal when deleting AI agents.
  - Uses the shared \`AlertDialog\` component with explicit cancel/confirm controls.
  - Shows the agent name inside the confirmation copy and blocks dismissal while the request is in flight.
  - Surfaces loader feedback and only closes when the Supabase delete succeeds.

# [0.1.8] FE WEB CEKAT 2025-12-03
### Platform Forms: Super Agent Management & Scoping
- **Explicit Super Agent Selection**: All platform forms (WhatsApp, Telegram, Web) now require explicit Super Agent selection before AI Agent selection
  - Super Agent field is now a required, selectable dropdown (previously derived from AI Agent)
  - Field appears above AI Agent selection with clear labeling and tooltips
  - Form validation prevents submission without Super Agent selection
  - Helper text explains that Super Agent can be changed independently of AI Agent

- **AI Agent Filtering by Super Agent**: Enhanced AI Agent selection with strict scoping
  - AI Agent dropdown only shows agents belonging to the selected Super Agent
  - Validation prevents selecting AI agents that don't belong to the selected Super Agent
  - Error toast notifications when attempting invalid selections
  - Form automatically resets AI Agent selection when Super Agent changes
  - Warning message displayed if selected AI Agent lacks a Super Agent assignment

- **Human Agent Scoping**: Improved human agent assignment with role-based filtering
  - Human Agent multi-select only shows agents assigned to the selected Super Agent
  - "Select All" and "Unselect All" buttons for quick agent assignment
  - Multi-select disabled until Super Agent is selected
  - Clear placeholder text indicating selection requirements
  - Consistent behavior across all platform types (WhatsApp, Telegram, Web)

- **AI Agent Creation Enhancement**: Super Agent assignment during creation
  - Super Agent selection required in AI Agent creation dialog
  - Searchable dropdown for Super Agent selection
  - Super Agent information displayed in AI Agent cards
  - Validation ensures Super Agent is selected before agent creation

### Navigation & Permissions Updates
- **Navigation Configuration**: Updated navigation items and permission mappings
  - Refined permission checks for navigation visibility
  - Enhanced role-based access control for navigation items
  - Improved database permission checks in useNavigation hook

- **Permission Schema**: Updated permissions configuration
  - Aligned permission schema with backend requirements
  - Enhanced permission categorization and validation

### Live Chat Improvements
- **Message Handling**: Enhanced message synchronization and streaming
  - Improved realtime message updates
  - Better handling of streaming responses
  - Optimized message deduplication logic
  - Enhanced user message timeout handling

### Webhook Configuration
- **Webhook Routing**: Updated webhook endpoint configuration
  - Enhanced proxy-aware routing
  - Improved endpoint resolution for different providers
  - Better error handling for webhook calls

### Technical Improvements
- **Hooks Enhancement**: Improved data fetching and scoping
  - Enhanced useAIAgents hook with better super agent scoping
  - Improved useNavigation hook with database permission checks
  - Better error handling and loading states
  - Optimized cache management

# [0.1.7] FE WEB CEKAT 2025-12-03
### RBAC & Permissions (Finalized Alignment)
- Standardized PERMISSIONS_SCHEMA to match production backend exactly:
  analytics, ai_profiles, ai_sessions, channels, contacts, contact_identities, threads, messages, ai_agent_files, admin_panel, roles, audit_logs, alerts.
- Permission Matrix UX revamp (purely permission-driven):
  - Card sections enforced per resource: Manage (create/update/delete), Access Level (read variants), Special Actions (send/ack).
  - Mutually exclusive Access Level pills; Threads uses My Channels (read_channel_owned), Collaborator, All.
  - Special actions exposed as toggles: messages.send (Send), alerts.ack (Acknowledge).
  - Select All sets Manage + Special Actions ON and selects the most permissive single read level; Unselect All resets to None.
  - Labels updated (Update Settings for admin_panel.update); consistent wording across cards.
  - Added concise tooltips for threads/messages read scopes and alerts.ack.
- Removed bundle-based Menu Access from PermissionsPage; no more ghost toggles or bundles.
- Fixed toggle handler so switches reflect intended state; role permission grant/revoke now gated by roles.update.
- Debounced RBAC refresh during bulk edits to prevent UI lag.

### Navigation & Visibility (Policy-First)
- Menu visibility now depends on DB has_perm checks; items are hidden if the user lacks any read scope for that section.
- Updated gating keys to align with schema:
  - Admin Panel: admin_panel.read (menu), admin_panel.update (controls)
  - Permissions: roles.read
  - Chat: threads.read_* (any of read_all/read_channel_owned/read_collaborator)
  - Analytics: analytics.read
  - Contacts: contacts.read_*; Platforms: channels.read_*; AI Agents: ai_profiles.read_*; Logs: audit_logs.read
- Sidebar renders only items from getAccessibleNavItems(); fixed ReferenceError by properly destructuring the hook return.
- Reduced has_perm spam: policy checks recompute only when RBAC roles/permissions change.

### Admin Panel
- Replaced legacy access_rules.configure gates:
  - Controls now use admin_panel.update; navigation uses admin_panel.read.

### Misc
- Added contact_identities to schema.
- Consistency/cleanup across labels, ordering, and spacing in Permission Matrix.

# [0.1.6] FE WEB CEKAT 2025-11-30
### Cache Management & Session Reliability
- **Comprehensive Cache Clearing on Logout**: Enhanced logout functionality to clear all cached data
  - Clears all localStorage items (including \`app.cached*\`, \`app.currentUserId\`, etc.)
  - Clears all sessionStorage items
  - Clears all Supabase auth tokens
  - Prevents stale data from persisting after logout
  - Applied to both \`AuthContext.signOut()\` and \`Logout.tsx\` page

- **localStorage-Based User ID Storage**: Improved session reliability by storing user ID in localStorage
  - User ID and email stored in localStorage as \`app.currentUserId\` and \`app.currentUserEmail\` on login
  - Added \`getCurrentUserId()\` helper function that prefers localStorage over Supabase session
  - Updated \`logAction()\` to use localStorage user_id first, then fallback to Supabase session
  - Ensures consistent user identification even when Supabase session is temporarily unavailable

### Bug Fixes
- **Merge Conflict Resolution**: Resolved merge conflict in \`useAIAgents.ts\` by combining \`scopeMode\` and \`superAgentId\` logic
- **Policy Role Fix**: Fixed \`threads_master_read\` policy to use \`authenticated\` role instead of \`public\` role
- **Cache Persistence**: Fixed issue where cached data persisted after logout, causing users to see unauthorized data

# [0.1.5] FE WEB CEKAT 2025-11-30
### Webhook & Supabase URL Consistency
- **Single Source for Supabase URL**: Exported a shared \`SUPABASE_URL\` constant from the Supabase client so all front-end integrations reference the same base URL sinstead of duplicating it.
- **Proxy Edge Function Alignment**: Updated \`WEBHOOK_CONFIG\` to derive the proxy base (\`/functions/v1/proxy-n8n\`) from the shared \`SUPABASE_URL\`, removing the old hardcoded Supabase project host and keeping proxy routing aligned with the active project.
- **WhatsApp WAHA Webhook Normalization**: Swapped the hardcoded Railway webhook host in \`WhatsAppPlatformForm\` for \`WEBHOOK_CONFIG.BASE_URL\`, ensuring WAHA sessions always post back into the currently configured webhook environment.

# [0.1.4] FE WEB CEKAT 2025-11-28
### Bug Fixes
- **PermissionsPage Duplicate Declaration Fix**: Resolved "Identifier 'permissionSearch' has already been declared" syntax error
  - Removed duplicate state declarations for \`permissionSearch\`, \`permissionResourceFilter\`, and \`permissionActionFilter\`
  - Kept the properly typed versions of these state variables
  - Fixed runtime error that prevented the Permissions page from loading

# [0.1.3] FE WEB CEKAT 2025-11-28
### AI Agent Visibility
- Agents now only see AI agents owned by their assigned super agent; a new \`useSuperAgentScope\` hook drives consistent filtering across dashboards, dropdowns, and cached data.
- The AI Agents list and helpers surface localized messaging when an agent has no supervising cluster, preventing stale cross-team data from leaking through local storage.
### Database Access Control
- Tightened the \`ai_profiles\` RLS guard so master agents retain full visibility, super agents stay scoped to their own records, and agents inherit their supervising super agents access.

# [0.1.2] FE WEB CEKAT 2025-11-26
### Platform Form Enhancements for Super Agents
- **Super Agent Field Auto-Prefill**: All platform creation forms (Telegram, WhatsApp, Web) now automatically prefill the super agent field when the current user is a super agent
  - Super agent field is automatically populated with the current user's super agent username/ID when form opens
  - Field becomes readonly (visual indication with reduced opacity) when user is a super agent
  - Helper text updated to indicate super agent is determined by current user's account for super agent users
  - Prevents super agent users from changing their own super agent assignment

- **AI Agent Filtering for Super Agents**: Enhanced platform forms to filter AI agents based on super agent role
  - Super agent users only see AI agents that belong to their account in the AI agent dropdown
  - Validation prevents selecting AI agents that don't belong to the super agent's account
  - Error toast notification shown when attempting to select invalid AI agents
  - Master agents continue to see all AI agents as before

- **Role-Based Form Behavior**: Implemented role-aware form logic across all platform types
  - Added \`useRBAC()\` hook integration to check for \`ROLES.SUPER_AGENT\` role
  - Automatic super agent ID detection from \`humanAgents\` list when form opens
  - Form reset logic preserves super agent ID for super agent users
  - Consistent behavior across Telegram, WhatsApp, and Web platform forms

### Technical Improvements
- **Component Updates**: Enhanced platform form components with role-based logic
  - Added \`useEffect\` hooks to prefill super agent field on form open
  - Integrated \`useRBAC\` context for role checking
  - Added conditional rendering and validation based on user role
  - Improved form state management to preserve super agent selection for super agent users

# [0.1.1] FE WEB CEKAT 2025-11-27
### Permissions Console
- **Regression Fix**: Reintroduced missing permission search and filter state in \`PermissionsPage\`; restores the role configuration screen and avoids the \`permissionSearch is not defined\` runtime error.
- **Master Agent Safety Rail**: Hard-blocked deletion of the Master Agent from both UI and API helpers; delete buttons are disabled with guidance and back-end guards stop any direct calls.
### UI Localization
- **Master Agent Deletion Message**: Updated the modal tooltip and toast that appear when attempting to delete a master agent; the copy now follows the latest localization requirements.

# [0.1.0] FE WEB CEKAT 2025-11-27
### FINALIZED FOR PRODUCTION
### Agent Creation UX
- **Modal-Friendly Errors**: Duplicate-email validation now surfaces purely as a toast; the Create Agent dialog stays open and no longer renders the full-page error banner, making it easy to adjust the address and resubmit.

# [0.0.49] FE WEB CEKAT 2025-11-27
### Human Agents Roster
- **Duplicate Entry Cleanup**: Adjusted role grouping logic so master agents no longer appear in both the master and agent sections of the Human Agents table; prevents a single email from showing twice and keeps assignment status accurate.

### Login & Session Guardrails
- **Refresh Spinner Fix**: Added watchdog timers around Supabase session/bootstrap calls so a stalled \`auth.getSession()\` or 2FA profile check cant trap users behind the infinite Loading screen; stale sessions now fall back to the login view within a few seconds.
- **Account Status Timeouts**: Soft-capped the account status RPC to keep token refreshes responsive even if the database briefly stops responding.

# [0.0.48] FE WEB CEKAT 2025-11-26
### RBAC & Permissions System Enhancements
- **Master Agent Root Role Treatment**: Master Agent is now treated as root role with full system privileges
  - Master Agent role is designated as root role with unrestricted access across the system
  - Permission matrix editing is disabled for Master Agent to prevent accidental permission removal
  - Root role status ensures Master Agent maintains full privileges regardless of permission configuration

- **Permission Matrix UI Updates**: Disabled permission matrix editing for Master Agent role
  - Added root role detection in PermissionsPage component (\`isRootSelected\` check)
  - Permission matrix sections (Menu Access, CRUD Permissions, Special Permissions) are disabled when configuring Master Agent
  - Added informational "Root Role" card explaining Master Agent's full privilege status
  - All permission checkboxes and bundle toggles are disabled with helpful tooltips ("Master Agent is root; matrix disabled")
  - Clear visual indication that Master Agent has full privileges and doesn't require permission configuration
  - Prevents accidental permission removal for root role through UI safeguards
  - Early return guards prevent any permission toggle operations when Master Agent is selected

### Technical Improvements
- **PermissionsPage Component**: Enhanced role configuration logic
  - Added \`isRootSelected\` state check based on role name comparison
  - Conditional rendering of root role information card
  - Disabled state applied to all permission matrix controls for Master Agent
  - Improved tooltip messaging for disabled root role controls
- **Open Conversation Navigation Fix**: Ensured contacts page button opens chat inbox
  - \`Open conversation\` now routes to chat inbox with \`menu=chat\`
  - Automatically selects the relevant contact thread when available

# [0.0.47] FE WEB CEKAT 2025-11-25
### Supabase Baseline Refresh
- **Single Source Migration**: Replaced the entire migrations stack with \`20251124230847_baseline.sql\`, capturing todays production schema so every environment can rebuild from a single, clean baseline.
- **Vector Extension Guardrails**: Ensured the baseline creates the \`vector\` extension in the \`public\` schema and updates every dependent function/column to reference the schema-qualified type.
- **Config Hardening**: Explicitly pins Supabase Storage to \`v1.31.1\` in \`supabase/config.toml\`, preventing CLI diffs from failing on missing storage migrations.

### Branch & Data Maintenance
- **Development Branch Reset**: Repaired Supabase migration history, reapplied the new baseline, and reset the \`development\` branch so it replays the trimmed migration set without legacy drift.
- **Main  Dev Data Parity**: Dumped production \`public\` + \`auth\` data and restored it into the development branch, then pruned historic test accounts to keep both environments aligned.
- **Backup Hygiene**: Ran the same user cleanup on the backup project (\`igtizjvhxgajijjjxnzi\`) to ensure the automated sync worker starts from a consistent dataset.

# [0.0.46] FE WEB CEKAT 2025-11-24
### Database Migration Hardening
- **Legacy Platform Support**: Updated the \`20250828000000_merge_platforms_into_channels.sql\` migration to add any missing \`platforms\` columns (\`display_name\`, \`website_url\`, \`status\`, \`secret_token\`, \`profile_photo_url\`, \`ai_profile_id\`) on the fly so historical environments can replay migrations without schema drift.
- **Main Branch Hotfix Migration**: Applied Supabase migration \`20250827950000_fix_platforms_schema\` on production to backfill those columns immediately, unblocking rebase operations across environments.
- **Rebase Reliability**: Re-ran the Supabase rebase workflow to verify the new safeguards; future branch syncs no longer fail on missing column errors when promoting channels data.

# [0.0.45] FE WEB CEKAT 2025-11-23
### QA Testing Guide Expansion
- **End-to-End Flow Coverage**: Expanded \`DOCUMENTATION.md\` with exhaustive step-by-step flows covering login, OTP, password reset, human/AI agent lifecycle, contacts, permissions, admin utilities, analytics, and audit logs so QA can validate every button and path without code access.
- **Button & Validation Matrix**: Documented the enabled/disabled states, confirmation dialogs, toasts, and edge-case behaviour for all primary actions (create, save, delete, export, toggle) across the application.
- **Role-Based Walkthroughs**: Added guidance on testing from master, super, and agent perspectives, including navigation expectations and restricted-card behaviour on the dashboard.

### Documentation Quality Improvements
- **Live Chat & Admin Deep Dives**: Added detailed instructions for conversation tools (notes, tags, canned responses, SLAs), AI pause/resume workflow, circuit breaker monitoring, and platform onboarding (WhatsApp, Telegram, Web).
- **Human Agent Lifecycle**: Documented invite, resend, cancellation, token limit management, usage analytics, and removal to ensure QA covers onboarding and offboarding scenarios end-to-end.
- **Changelog & Profile Flows**: Captured interactive changelog behaviour, search/filter expectations, and full profile/session management (2FA toggle, password change, device sign-out).

### Super Agent Clustering
- **AI Agent Ownership**: Introduced \`super_agent_id\` on \`ai_profiles\`, enforced via migrations and new RLS policies. Super agents only see/manage their own AI agents; master agents can reassign via settings.
- **Auto-Inherited Platform Ownership**: Platform creation/editing now derives \`channels.super_agent_id\` from the selected AI agent, eliminating manual super agent selection while keeping human-agent assignment intact.
- **Scoped Listings**: AI agent lists, stats, and platform forms filter to the current super agent automatically; agents without clusters are prevented from being used until assigned.

### Platform Assignment Guard
- **Scoped Agent Dropdowns**: When creating WhatsApp, Telegram, or Web platforms as a master agent, the human-agent selector now lists only agents assigned to the chosen super agentpreventing unassigned agents from appearing in the multi-select.

# [0.0.44] FE WEB CEKAT 2025-11-19
### Changelog Experience Revamp
- **Interactive Release Browser**: Introduced a dynamic changelog page with searchable release list, color-coded highlights, and accordion sections for each area of work.
- **Dual View Modes**: Added interactive and classic tabs so readers can switch between the immersive UI and the original Markdown in one place.
- **Automatic Highlight Extraction**: Generate summary badges from markdown bullet points to surface the most important updates per release.
- **Styling Updates**: Applied gradient backgrounds, elevated cards, and refined typography for a colorful, engaging presentation.
- **Comprehensive Documentation**: Added \`DOCUMENTATION.md\` detailing auth flows, feature modules, Supabase schema, and operational processes.

# [0.0.43] FE WEB CEKAT 2025-11-18
### AI Pause Notification System
- **New AI Paused Modal Component**: Created dedicated modal for org-wide AI pause notifications
  - Modal displays when AI responses are paused across all channels
  - Shows who paused AI and when (for master agents)
  - Different messaging for master agents vs regular agents
  - Master agents can directly navigate to Admin Panel from modal
  - Modal appears once per browser session (acknowledgment stored in localStorage)
  - Integrated into main Index page with automatic status checking

- **Org-Wide AI Pause Status Monitoring**: Enhanced AI pause state management
  - Automatic fetching of org-wide AI pause status on app load
  - Resolves paused-by user name from profile or email
  - Modal auto-dismisses when AI pause is lifted
  - Session-based acknowledgment prevents modal spam

### Conversation Page UI Improvements
- **Fixed Tab Color Styling**: Resolved issue where selected tab colors were not displaying
  - Restructured Tooltip/TabsTrigger relationship (Tooltip now inside TabsTrigger)
  - Assigned tab: Blue background and text when active
  - Unassigned tab: Red background and text when active
  - Resolved tab: Green background and text when active
  - Proper \`data-[state=active]\` attribute application from Radix UI

- **Improved Conversation Sorting**: Enhanced conversation list sorting logic
  - Removed unreplied priority sorting (now purely by latest activity)
  - Conversations sorted by \`last_msg_at\` timestamp (most recent first)
  - Fallback to \`created_at\` if \`last_msg_at\` unavailable
  - More intuitive ordering based on actual activity

- **Enhanced Timestamp Display**: Improved date/time formatting in conversation list
  - Added "Yesterday" display for messages from previous day
  - Changed date format from \`dd/MM/yy\` to \`MM/dd/yyyy\` for better clarity
  - Better hour-based calculations for relative time display
  - More accurate time representation

- **TypeScript Fixes**: Resolved type errors
  - Removed reference to non-existent \`updated_at\` field on \`ConversationWithDetails\`
  - Fixed sorting logic to use only available timestamp fields

### Code Quality Improvements
- **Conversation Hooks Cleanup**: Minor refactoring in \`useConversations\` hook
  - Code cleanup and optimization
  - Improved type safety

# [0.0.42] FE WEB CEKAT 2025-11-03
### Admin Panel & Centralized Management
- **New Admin Panel Component**: Created centralized admin control center for master agents
  - New dedicated Admin Panel page accessible via navigation (master agents only)
  - Moved data retention and GDPR controls from Analytics to Admin Panel for better organization
  - Added quick access links to all admin sections (Permissions, Human Agents, Platforms, Analytics, Logs, Contacts)
  - Integrated Circuit Breaker Status monitoring directly in admin panel
  - Added cache clearing utility for local storage cleanup
  - Bulk contact deletion interface with UUID parsing (comma/newline separated)
  - Enhanced data retention controls with manual cleanup trigger
  - GDPR/PDPA deletion interface with confirmation modals
  - All admin features consolidated in single, role-gated interface

### Webhook Infrastructure Refactoring
- **Centralized Webhook Client**: Created new \`webhookClient.ts\` for unified webhook handling
  - Automatic authentication for proxy endpoints using Supabase session tokens
  - Support for both legacy and proxy-based endpoints
  - Automatic API key injection for proxy requests
  - Consistent error handling across all webhook calls
  - \`callWebhook()\` function replaces direct \`fetch()\` calls throughout application

- **Proxy-Aware Webhook Configuration**: Major refactoring of webhook routing system
  - Introduced \`route:\` prefix system for proxy-based endpoints
  - Automatic routing to Supabase Edge Function proxy (\`proxy-n8n\`) for prefixed endpoints
  - Legacy endpoint support maintained for backward compatibility
  - Provider-specific endpoint resolution (\`resolveSendMessageEndpoint()\`)
  - Enhanced provider normalization (wa/whatsapp_cloud  whatsapp, tg/tele  telegram)
  - All platform forms (WhatsApp, Telegram) now use centralized webhook client
  - Live Chat component updated to use new webhook client

### AI Agent Enhancements
- **AI Model Selection System**: Comprehensive model management in AI Agent creation and settings
  - Model selection dropdown in AI Agent creation dialog with pricing and provider information
  - Fallback model selection for automatic failover when primary model unavailable
  - Model-specific context window and history limit validation
  - Dynamic limit calculation based on selected model capabilities
  - Enhanced model display with cost per 1M tokens, provider badges, and descriptions
  - Model filtering (regular vs fallback models) for better UX
  - Auto-selection of first available model on load

- **AI Agent Settings UI Improvements**: Enhanced settings interface with better input handling
  - Replaced numeric inputs with text inputs using \`inputMode="numeric"\` for better mobile support
  - Added input validation with clamping to model-specific maximums
  - Context window input now in "K tokens" format with model-specific limits
  - History limit shows model-specific maximums with helpful descriptions
  - Auto-resolve timeout input with proper validation (0-1440 minutes)
  - Message cap input with placeholder examples
  - Removed "AI Read File Limit" field (commented out, not in use)
  - Better label clarity: "Enable auto-resolve", "Auto-resolve timeout", "Conversation History (tokens)", "Context Window (K tokens)", "Creativity Preset", "AI Message Cap"
  - Model selection card with primary and fallback model sections
  - Real-time display of model capabilities and limits

- **AI Agent Creation Flow**: Enhanced creation process
  - Model selection required before agent creation
  - Fallback model optional selection during creation
  - Better validation and error messages
  - Improved dialog with cancel button and loading states

### Analytics Component Cleanup
- **Removed Admin Controls**: Moved data retention and GDPR controls to Admin Panel
  - Removed data retention policy card from Analytics Conversation tab
  - Removed GDPR deletion card from Analytics
  - Removed Circuit Breaker Status from Analytics (now in Admin Panel)
  - Simplified Analytics component focusing on analytics and reporting only
  - Better separation of concerns between analytics and administration

### Database & Permissions
- **New Migration**: Added \`users_profile.create\` permission
  - Created migration \`20251103_add_users_profile_create_permission.sql\`
  - Grants \`users_profile.create\` permission to \`master_agent\` and \`super_agent\` roles
  - Enables proper RBAC for user profile creation operations

### Enhanced Caching & Performance
- **Query Signature-Based Caching**: Improved cache key generation in \`supabaseProtected.ts\`
  - Added query signature serialization for more accurate cache keys
  - Cache keys now include query method signatures and arguments
  - Prevents cache collisions between similar but different queries
  - Better cache invalidation with pattern matching
  - Enhanced cache hit rates with more granular key generation

- **Cache Invalidation Improvements**: Better cache management
  - Contact deletion now invalidates related query caches
  - Thread deletion invalidates conversation caches
  - Pattern-based cache invalidation using \`defaultFallbackHandler.invalidatePattern()\`

### Conversation & Contact Management
- **Enhanced Conversation Hooks**: Improved conversation management
  - Added \`deleteThread()\` function to \`useConversations\` hook
  - Provider-aware message sending using \`resolveSendMessageEndpoint()\`
  - Better provider detection from conversation data
  - Cache invalidation on thread deletion

- **Contact Management**: Improved deletion handling
  - Enhanced bulk deletion with cache invalidation
  - Better error handling in contact operations
  - Improved cache management for contact queries

### Platform Integration Updates
- **WhatsApp Platform**: Updated to use new webhook client
  - Session creation, login QR, logout, disconnect, and delete operations use \`callWebhook()\`
  - Consistent error handling across all WhatsApp operations

- **Telegram Platform**: Updated to use new webhook client
  - Platform creation and webhook deletion use centralized webhook client
  - Better error handling and response parsing

- **Connected Platforms**: Enhanced platform management
  - All webhook calls migrated to \`callWebhook()\` function
  - Better error handling and user feedback
  - Consistent authentication across all platform operations

### Navigation & Routing
- **New Admin Panel Route**: Added admin panel to navigation
  - New "Admin Panel" navigation item (master agents only)
  - Requires \`access_rules.configure\` permission
  - Added to navigation config and routing
  - Default navigation fallback improved to handle permission-based routing

### UI/UX Improvements
- **Human Agents**: Enhanced creation dialog
  - Better validation and error messages
  - Cancel button in creation dialog
  - Improved loading states
  - Permission-based UI (disabled buttons with tooltips when permission missing)

- **Input Improvements**: Better form inputs throughout application
  - Numeric inputs use \`inputMode="numeric"\` for mobile keyboards
  - Better placeholder text and validation messages
  - Improved accessibility with proper input types

### Technical Improvements
- **Code Organization**: Better separation of concerns
  - Admin functionality centralized in Admin Panel component
  - Webhook logic centralized in webhook client
  - Better component structure and maintainability

- **Type Safety**: Enhanced TypeScript types
  - Added \`model_id\` to AIProfile interface
  - Better type definitions for webhook responses
  - Improved type safety in platform forms

- **Error Handling**: Consistent error handling
  - Unified error handling in webhook client
  - Better error messages throughout application
  - Improved user feedback with toast notifications

# [0.0.41] FE WEB CEKAT 2025-11-01
### Data Retention & GDPR Compliance
- **Data Retention Policy System**: Implemented configurable data retention with automatic cleanup
  - Added 90-day default retention policy (adjustable from 1-365 days) stored in \`org_settings\` table
  - Created \`cleanup_old_chat_data()\` PostgreSQL function for automatic deletion of old chat data
  - Scheduled daily cleanup job at 2 AM UTC via \`pg_cron\` extension
  - Respects organization-specific retention periods stored in \`org_settings.retention_days\`
  - Only deletes data older than retention period (rolling window, not everything daily)
  - Deletes old threads, messages, and orphaned contacts based on \`created_at\` timestamps
  - Supports both org-specific cleanup and global cleanup for all organizations

- **GDPR/PDPA Right to Erasure**: Implemented compliant user data deletion functionality
  - Created \`gdpr_delete_user_data()\` PostgreSQL function for permanent deletion of user data
  - Deletes all threads, messages, and contact records for a specific contact UUID
  - Validates contact belongs to requesting organization before deletion
  - Returns detailed deletion results (threads, messages, contacts deleted count)
  - Permanently removes all user-associated data in compliance with GDPR/PDPA regulations
  - Action cannot be undone with clear warning messages in UI

- **Admin Controls in Analytics**: Added data retention and GDPR controls in Conversation tab
  - Data Retention Policy card with current retention period display and edit functionality
  - Manual "Run Cleanup Now" button for immediate cleanup execution
  - GDPR/PDPA deletion card with contact UUID input field
  - Restricted to users with \`access_rules.configure\` permission (master/super agents only)
  - Real-time success/error message display for all operations
  - Last cleanup results display showing threads, messages, and contacts deleted counts

- **Database Migration**: Applied comprehensive migration for data retention features
  - Migration \`20250102_data_retention_and_gdpr.sql\` successfully applied via Supabase MCP
  - Created \`cleanup_old_chat_data()\` and \`gdpr_delete_user_data()\` functions with proper security
  - Added RLS policies for \`org_settings\` table updates restricted to master/super agents
  - Initialized default 90-day retention for all existing organizations
  - Ensured \`is_current_user_active()\` dependency function exists for RLS checks

### Contact Management Enhancements
- **Contact UUID Detail Modal**: Added master agent-only contact UUID display
  - New UUID section in contact details modal visible only to master agents
  - Displays contact UUID with copy-to-clipboard functionality
  - Includes helpful description for GDPR deletion requests and system integrations
  - Uses RBAC role check (\`hasRole('master_agent')\`) to restrict visibility
  - Styled with monospace font and muted background for clear readability
  - Badge indicator showing "Master Agent Only" restriction

### Technical Improvements
- **Supabase Integration**: Full integration with Supabase database functions
  - \`fetchRetentionSettings()\` reads from \`org_settings\` table via protected Supabase client
  - \`saveRetentionDays()\` updates retention period using upsert operation
  - \`triggerCleanup()\` calls \`cleanup_old_chat_data\` RPC function
  - \`executeGdprDeletion()\` calls \`gdpr_delete_user_data\` RPC function
  - All operations use \`protectedSupabase\` client respecting circuit breaker and RLS
  - Proper error handling and user feedback for all database operations

- **RBAC Integration**: Enhanced role-based access control for admin features
  - Permission gates around data retention and GDPR controls
  - Master agent role check for contact UUID visibility
  - Secure access control using \`useRBAC\` context hooks

### UI/UX Enhancements
- **Data Retention UI**: Comprehensive admin interface for retention management
  - Edit modal for configuring retention period (1-365 days range)
  - Visual display of current retention period with clear descriptions
  - Warning messages explaining automatic cleanup schedule
  - Success/error message toasts for user feedback

- **GDPR Deletion UI**: Secure and user-friendly deletion interface
  - Two-step confirmation process with warning modal
  - Clear indication of what will be deleted (threads, messages, contacts)
  - Contact UUID input with validation
  - Destructive button styling to indicate permanent action

### Security & Compliance
- **Data Protection**: Enhanced data protection mechanisms
  - Row Level Security (RLS) policies enforce master/super agent access only
  - Automatic cleanup respects retention periods to prevent accidental data loss
  - GDPR deletion function validates organization membership before deletion
  - All database operations use security definer functions with proper permissions

# [0.0.40] FE WEB CEKAT 2025-11-01
### Adaptive Rate Limiter Integration & DDoS Protection
- **Adaptive Rate Limiter Full Integration**: Integrated adaptive rate limiter into Supabase protection system
  - Enhanced AdaptiveRateLimiter class with getConfig() and updateConfig() methods for runtime configuration
  - Added localStorage persistence for adaptive rate limiter configuration and multipliers
  - Integrated adaptive rate limiter into supabaseProtected.ts, replacing static rate limiter for all operations
  - Implemented automatic limit adjustment based on system health metrics (response time, error rate)
  - Added query to circuit_breaker_metrics table in Supabase for real-time metrics analysis
  - Automatic adjustment loop runs every adjustment interval to update limits dynamically

- **Adaptive Rate Limiter Configuration UI**: Added comprehensive configuration interface
  - Created new "Adaptive Rate Limiter Configuration" section in Limit Configuration
  - Display base limits for all 4 operations (Reads, Writes, RPC, Auth) with current effective limits
  - Real-time display of multipliers (percentage) for each operation type
  - Show min/max multiplier, adjustment interval, and latency thresholds
  - Added "Edit" button with comprehensive modal for editing all adaptive rate limiter parameters
  - Visual status indicator showing adaptive rate limiter is active and protecting database
  - All configuration values are editable with proper validation and range limits

- **Enhanced Rate Limiter Card**: Updated to show adaptive limits
  - Changed card title to "Rate Limiter (Adaptive)" to reflect dynamic nature
  - Display effective limits (dynamically calculated) instead of static limits
  - Show multiplier percentage for each operation type
  - Real-time updates every second to reflect current adaptive limits
  - Informative tooltips explaining how adaptive limits work for traffic spike protection

- **Comprehensive Circuit Breaker Documentation Updates**: Enhanced documentation with detailed input explanations
  - Added detailed explanation section for all Circuit Breaker inputs (5 parameters)
    - Failure Threshold: When circuit opens, tips, recommendations
    - Reset Timeout: Recovery time, tips for different scenarios
    - Success Threshold: Recovery validation, recommendations
    - Monitoring Period: Sliding window explanation, impact on detection
    - Request Timeout: Timeout handling, recommendations per operation type
  - Added comprehensive explanation for all Adaptive Rate Limiter inputs (7+ parameters)
    - Base Limits: Explanation for Reads/Writes/RPC/Auth with recommendations
    - Min/Max Multiplier: How multipliers affect limits, examples with calculations
    - Latency Thresholds: Healthy vs Stress thresholds, tips for optimization
    - Adjustment Interval: How often limits adjust, recommendations for different scenarios
  - Added "How They Work Together" sections showing complete workflow for both systems

- **DDoS & Traffic Spike Protection Guide**: Added dedicated protection guide
  - Created comprehensive guide section explaining inputs specifically for DDoS protection
  - Ranked inputs by importance: Min Multiplier (most important), Stress Threshold, Base Limits, etc.
  - Detailed recommendations for each input with effectiveness ratings
  - Provided optimal configuration preset for maximum DDoS protection
  - Explained complete attack scenario flow (5-step process)
  - Visual color-coded sections for easy reference (red borders for critical inputs)

- **Documentation Improvements**: Enhanced existing documentation sections
  - Updated "Best Practices" section to include adaptive rate limiter tips
  - Enhanced "Configuration Reference" to show both Circuit Breaker and Adaptive Rate Limiter configs
  - Added effective limits display with multiplier percentages in configuration reference
  - Updated troubleshooting section to mention adaptive rate limiter as protection layer
  - All documentation now uses dynamic values from current configuration (real-time)

### Technical Improvements
- **Type System Enhancements**: Improved TypeScript type exports
  - Re-exported OperationType from adaptiveRateLimiter for better type consistency
  - Fixed import issues in CircuitBreakerStatus component
  - All types properly exported and available for external use

- **Storage Management**: Enhanced persistence system
  - Adaptive rate limiter config persists to localStorage with multipliers
  - Automatic loading of saved configuration on initialization
  - Interval ID management for proper cleanup when adjustment interval changes
  - Backward compatible with existing localStorage data

### UI/UX Enhancements
- **Configuration Visualization**: Better display of adaptive limits
  - Show both base limit and effective limit side-by-side
  - Multiplier percentage displayed with color coding (green for healthy)
  - Real-time status indicators showing system is actively protecting
  - Clear distinction between static base limits and dynamic effective limits

- **Documentation UX**: Improved documentation readability
  - Color-coded input explanations (red, orange, yellow, blue, purple borders)
  - Step-by-step workflows with numbered lists
  - Practical examples using actual configuration values
  - Tips and recommendations clearly separated from explanations
  - Warning boxes for critical information

### Performance & Security
- **DDoS Protection**: Multi-layered defense system
  - Adaptive rate limiter as first line of defense (reduces limits automatically)
  - Request timeout as second layer (cancels slow requests)
  - Circuit breaker as last resort (blocks all requests if needed)
  - Complete protection against traffic spikes and DDoS attacks

- **Smart Limit Adjustment**: Intelligent limit management
  - Limits increase when system is healthy (up to 200% of base)
  - Limits decrease when system is stressed (down to 50% of base by default)
  - Gradual adjustment prevents sudden changes (max 10% increase, 20% decrease per cycle)
  - Automatic return to normal limits when system recovers

# [0.0.39] FE WEB CEKAT 2025-11-01
### Circuit Breaker Enhancements & Documentation
- **Circuit Breaker Configuration Management**: Added comprehensive limit configuration interface for admins
  - Created "Limit Configuration" section displaying all circuit breaker thresholds (disabled by default)
  - Added "Edit" button to open configuration modal for modifying limits
  - Implemented getConfig() and updateConfig() methods in CircuitBreaker class
  - Added configuration persistence to localStorage for client-side recovery
  - Configuration values are now dynamically displayed and editable
  - Each configuration field includes descriptive tooltips explaining the purpose

- **Circuit Breaker Documentation System**: Implemented comprehensive documentation modal
  - Added documentation card section above "Danger Zone" with "Lihat Dokumentasi Circuit Breaker" button
  - Created detailed documentation modal covering:
    - What is Circuit Breaker and its purpose
    - How Circuit Breaker works (three states: CLOSED, OPEN, HALF_OPEN)
    - Step-by-step workflow with dynamic configuration values
    - What to do when circuit breaker opens (troubleshooting guide)
    - Understanding metrics and their meanings
    - Best practices for monitoring and optimization
    - Configuration reference with current values
  - All documentation content in Indonesian language with clear formatting
  - Modal is scrollable and responsive for better readability

- **Enhanced UI/UX for Circuit Breaker Analytics**: Improved user experience and safety
  - Added question mark icons (HelpCircle) beside all labels in "Limit Configuration" section
  - Each icon displays informative tooltip on hover with Indonesian descriptions
  - Reorganized admin controls into two distinct sections:
    - "Limit Configuration": For viewing and editing circuit breaker thresholds
    - "Danger Zone": For critical admin actions with enhanced warnings
  - Added tooltips to all buttons in "Danger Zone" explaining their effects
  - Enhanced visual hierarchy with color-coded sections (blue for docs, red for danger)
  - All tooltips and descriptions use dynamic values from current configuration

- **Circuit Breaker Class Improvements**: Enhanced circuit breaker functionality
  - Added getConfig() method to retrieve current configuration
  - Added updateConfig() method to modify configuration at runtime
  - Configuration is automatically saved to localStorage on update
  - Configuration is automatically loaded from localStorage on initialization
  - Maintains backward compatibility with existing circuit breaker state

### AI Agent Settings Cleanup
- **Removed Timezone Field**: Cleaned up unused timezone configuration
  - Removed timezone field from AI Agent Settings UI component
  - Dropped timezone column from ai_profiles table via database migration
  - Removed timezone state variables and related logic from frontend
  - Updated TypeScript types to remove timezone references
  - Note: timezone field in users_profile table remains unchanged (separate feature)

### Technical Improvements
- **Code Organization**: Better separation of concerns in Circuit Breaker Status component
  - Split admin controls into logical sections (Documentation, Limit Configuration, Danger Zone)
  - Improved component structure for better maintainability
  - Enhanced modal management with dedicated state variables
  - Better error handling and user feedback

### UI/UX Enhancements
- **Documentation Integration**: Added comprehensive help system
  - Documentation card with prominent call-to-action button
  - Modal-based documentation with scrollable content
  - Color-coded sections for better visual hierarchy
  - Responsive design for all screen sizes
  - Dark mode support throughout documentation modal

- **Enhanced Tooltips**: Improved user guidance
  - Question mark icons next to all configuration labels
  - Contextual tooltips explaining each configuration parameter
  - Tooltips on danger zone buttons with detailed warnings
  - All tooltips in Indonesian language for consistency


# [0.0.38] FE WEB CEKAT 2025-10-30
### Refactor Authentication & RBAC
- Removed unnecessary debug logging from authentication and RBAC components.
- Enhanced role checks within navigation for more secure access control.
- Improved account status handling to better manage user states.
- Added role-based restrictions directly in navigation configuration.
- Updated related components for improved clarity and performance.

# [0.0.37] FE WEB CEKAT 2025-10-30
### Circuit Breaker & Database Protection System
- **Comprehensive Circuit Breaker Implementation**: Implemented full-featured circuit breaker system for database protection
  - Created core CircuitBreaker class with state machine (CLOSED, OPEN, HALF_OPEN) and configurable thresholds
  - Added state persistence using localStorage for client-side recovery across page refreshes
  - Implemented event emitter pattern for real-time monitoring and state change notifications
  - Added time-windowed failure counting (10s monitoring period) with automatic state transitions

- **Rate Limiting & Request Management**: Implemented advanced rate limiting and request optimization
  - Created sliding window rate limiter with per-user and per-endpoint tracking
  - Implemented request queue with deduplication, priority handling, and debouncing
  - Added request batching for similar queries to reduce total request count
  - Created adaptive rate limiter that adjusts limits based on system health metrics

- **Enhanced Error Handling & Caching**: Implemented comprehensive error management and response caching
  - Created error classifier utility mapping Supabase error codes to categories (network, database, auth, rate limit, timeout)
  - Implemented retry logic with exponential backoff (1s, 2s, 4s, 8s max) and error-specific strategies
  - Added response caching with IndexedDB/localStorage using stale-while-revalidate pattern
  - Implemented offline mode support with write operation queuing and sync on connection restore

- **Database Analytics & Monitoring**: Added comprehensive database performance monitoring
  - Created new "Database" tab in Analytics section with detailed database statistics
  - Implemented PostgreSQL functions for database metrics (table sizes, row counts, index performance, memory stats)
  - Added real-time database activity monitoring with KPI cards and interactive charts
  - Created comprehensive table statistics view with scan ratios, vacuum timestamps, and DML operations

- **Circuit Breaker Analytics Dashboard**: Integrated circuit breaker monitoring into Analytics section
  - Added new "Circuit Breaker" tab displaying real-time status and metrics
  - Created CircuitBreakerStatus component with admin controls and visual indicators
  - Implemented metrics collection and storage in circuit_breaker_metrics table
  - Added comprehensive help tooltips with Indonesian descriptions for all labels

- **Protected Supabase Integration**: Wrapped all database operations with circuit breaker protection
  - Created protectedSupabase wrapper replacing direct Supabase calls in critical components
  - Integrated circuit breaker, rate limiting, caching, and metrics collection
  - Updated Analytics, ConversationPage, and useConversations hooks to use protected wrapper
  - Implemented graceful degradation and fallback mechanisms for failed operations

- **Admin Controls & Safety Features**: Added comprehensive admin controls with safety measures
  - Implemented custom modal dialogs replacing browser confirm/alert dialogs
  - Added confirmation popups with detailed Indonesian warnings for all admin actions
  - Created color-coded modal themes (orange for reset, red for critical actions, blue for info)
  - Added success/error feedback modals with proper error handling

### Technical Improvements
- **Performance Optimizations**: Resolved application freezing and lag issues
  - Fixed infinite loop in background cache refresh mechanism
  - Optimized metrics collection with batching and throttling (50 batch size, 30s interval)
  - Implemented caching for getUserId calls with 1-minute TTL and 500ms timeout
  - Added cooldown periods to prevent refresh storms (30s for queries, 60s for RPCs)
  - Made rate limiting more lenient for read operations to prevent blocking

- **Database Schema Updates**: Enhanced database with circuit breaker metrics
  - Created circuit_breaker_metrics table with comprehensive operation tracking
  - Added RLS policies and indexes for efficient metrics querying
  - Implemented 30-day retention policy with cleanup_old_metrics function
  - Added database analytics functions for comprehensive performance monitoring

### UI/UX Enhancements
- **Modal System**: Replaced browser dialogs with custom modal components
  - Created consistent modal design matching application theme
  - Added proper dark mode support and responsive design
  - Implemented clear visual hierarchy with icons and color coding
  - Added comprehensive warning messages in Indonesian language

- **Help System**: Enhanced user guidance throughout the application
  - Added question mark icons with tooltips to all analytics labels
  - Implemented LabelWithHelp component for consistent help integration
  - Created comprehensive Indonesian descriptions for all circuit breaker features
  - Added contextual help for admin controls and safety warnings


# [0.0.36] FE WEB CEKAT 2025-10-25
### Security & Authentication
- **Account Deactivation System**: Implemented comprehensive account deactivation blocking system
  - Added database-level RLS policies to prevent deactivated users from accessing system resources
  - Created dedicated \`/account-deactivated\` warning page with Indonesian content
  - Implemented pre-login account status validation to prevent deactivated users from authenticating
  - Added automatic redirect to warning page when deactivated account is detected
  - Enhanced security with "fail closed" approach - blocks access if account status cannot be verified

### User Experience Improvements
- **Enhanced Navigation**: Fixed navigation issues and improved user flow
  - Replaced modal-based account deactivation with dedicated warning page
  - Added "Kembali ke Halaman Login" button with complete cleanup functionality
  - Implemented localStorage clearing and user signout on account deactivation
  - Fixed infinite loading issues caused by component conflicts
  - Added loading states and prevented multiple button clicks during navigation

### Technical Improvements
- **Component Architecture**: Streamlined authentication flow components
  - Removed deprecated \`AccountDeactivatedModal\` component
  - Created dedicated \`AccountDeactivated\` page component with proper routing
  - Fixed Router context issues by restructuring component hierarchy in App.tsx
  - Enhanced error handling and timeout management for signOut operations
  - Added comprehensive debugging and logging for authentication flow

### Database & Security
- **Row Level Security (RLS)**: Enhanced database security policies
  - Updated RLS policies to include active user checks for all major tables
  - Created \`is_current_user_active()\` helper function for consistent security checks
  - Applied security policies to \`users_profile\`, \`org_members\`, \`channels\`, \`contacts\`, \`threads\`, and \`messages\` tables
  - Implemented strict access control preventing deactivated users from reading sensitive data

### Bug Fixes
- **Authentication Flow**: Resolved multiple authentication-related issues
  - Fixed flicker when logging in with deactivated accounts
  - Resolved race conditions in account status checking
  - Fixed logout button functionality by preventing account deactivation interference
  - Corrected database column name from \`is_f2a_email_enabled\` to \`is_2fa_email_enabled\`
  - Fixed CORS errors with edge function approach by implementing direct database validation

### UI/UX Enhancements
- **Account Deactivation Warning Page**: Created comprehensive user feedback system
  - Added clear Indonesian messaging explaining account deactivation
  - Implemented contact instructions for Master Agent reactivation
  - Added visual warning indicators with appropriate icons and styling
  - Created responsive design with proper loading states and button interactions

# [0.0.35] FE WEB CEKAT 2025-16-09
### Updates
- Added HCaptcha site key to .env for CAPTCHA validation.
- Enhanced Login component to include CAPTCHA verification.
- Improved ConversationPage to display channel logos.
- Updated HumanAgents component for better pagination and agent management.
- Adjusted useConversations and useHumanAgents hooks to support new fields for channel logos and agent organization.
- Implemented strict checks for super agent assignments in usePlatforms hook.

# [0.0.34] FE WEB CEKAT 2025-11-09
### Updates
### AIAgentSettings
* Added new state variables:
  * \`historyLimit\`
  * \`readFileLimit\`
  * \`contextLimit\`
  * \`responseTemperature\`
  * \`messageAwait\`
  * \`messageLimit\`
  * \`timezone\`
* Improved overall usage tracking and configurability.

### HumanAgent
* Introduced **usage range option** for better monitoring.
* Refactored **agent visibility logic** for clearer access control.
* Enhanced handling of **agent roles and statuses** for more robust management.

# [0.0.33] FE WEB CEKAT 2025-10-09
### Updates
- Update project branding, enhance chat functionality, and improve permissions management
- Added aria-labels for accessibility in chat components
- Refined URL state synchronization in ConversationPage
- Implemented sorting and editing features in Contacts
- Removed legacy policy editing from PermissionsPage
- Updated navigation permissions for better clarity

# [0.0.32] FE WEB CEKAT 2025-10-04
### Updates
- Fixed Live chat error and detail chat
- Update project branding to **Synka AI**
- Enhance **chat functionality**
- Improve **permissions management**
- Key changes include:
  - Renaming titles and meta descriptions
  - Adding a direct route to the chat inbox
  - Updating permission checks
  - Refining UI elements for better user experience

Updating permission checks

Refining UI elements for better user experience
# [0.0.31] FE WEB CEKAT 2025-10-04
### Updates
- Introduced a new endpoint \`CHAT_TEST\` for testing AI agent chat settings.
- Updated \`AIAgentSettings\` component to include profile handling and improved UI with collapsible sections for behavior, welcome message, and transfer conditions.
- Enhanced \`ChatPreview\` to support profile ID and adjusted styling for better user experience.
- Refactored platform forms to remove profile photo upload functionality.

# [0.0.30] FE WEB CEKAT 2025-10-04
### Updates
- Fix invite

# [0.0.29] FE WEB CEKAT 2025-10-04
Commit: Invite flow fixes, required field validation, form improvements
### Updates
- Invite Flow Fixes
  - Fixed invite flow to redirect users directly to password creation page instead of 2FA page
  - Added invite flow detection to skip 2FA requirements for invited users
  - Prevented duplicate 2FA emails for invited users
  - Added \`/invite\` route for proper invite handling
  - Enhanced ProtectedRoute to detect and redirect invite flows appropriately
- Form Validation Improvements
  - Made "Attach to Super Agent" field required for regular agents
  - Added visual indicators (red asterisks) for all required fields
  - Implemented real-time form validation with disabled submit button
  - Added contextual help text explaining field requirements
  - Enhanced error messages with specific validation feedback
- User Experience Enhancements
  - Submit button now disabled until all required fields are filled
  - Clear visual hierarchy distinguishing required vs optional fields
  - Real-time validation feedback as users type/select
  - Improved form accessibility with proper labeling
- Bug Fixes
  - Fixed invite users being incorrectly redirected to 2FA page
  - Resolved duplicate 2FA email sending for invited users
  - Corrected form submission logic for agent creation
  - Enhanced error handling for missing required fields

# [0.0.28] FE WEB CEKAT 2025-10-04
Commit: Auto-resolve functionality, thread timestamp fixes, audio notifications, UI improvements
### Updates
- Auto-Resolve System
  - Fixed auto-resolve functionality to work correctly with AI agents
  - Database triggers now properly set \`auto_resolve_at\` timestamp when AI responds
  - Auto-resolve function uses correct enum value \`'closed'\` instead of \`'resolved'\`
  - Periodic checking every 30 seconds for threads ready to auto-resolve
  - Real-time auto-resolve checks on message events
  - Threads auto-resolve after specified minutes of inactivity without user response
- Thread List Improvements
  - Fixed thread list to show latest message timestamp instead of first message timestamp
  - WhatsApp-style conversation sorting with unreplied threads at top
  - Real-time conversation preview updates without full list refresh
- Audio Notifications
  - Added audio notification system for new messages in opened threads
  - Two notification sounds: incoming (\`mixkit-message-pop-alert-2354.mp3\`) and outgoing (\`mixkit-long-pop-2358.wav\`)
  - Debounced notifications to prevent duplicate sounds
  - Tab visibility checks to only play sounds when tab is active
  - User controls: enable/disable audio notifications, test notification
- UI Improvements
  - Removed clock icon from chat message bubbles for cleaner appearance
  - Enhanced message streaming with better real-time updates
  - Improved conversation list performance with optimized refresh logic
- Database Schema Updates
  - Added \`channel_id\` to \`token_usage_logs\` table for better analytics
  - Added \`super_agent_id\` to \`channels\` table (moved from \`ai_profiles\`)
  - Updated RLS policies to use \`channels.super_agent_id\` for proper clustering
  - Fixed foreign key constraints and relationships
- Bug Fixes
  - Fixed page reload issues when alt+tabbing between browser tabs
  - Resolved conversation data leakage between different super agents
  - Fixed AI Agent dropdown filtering logic
  - Corrected thread timestamp display in conversation list

# [0.0.27] FE WEB CEKAT 2025-10-03
- Enabling AI Profiles fetch instead of using cache 

# [0.0.26] FE WEB CEKAT 2025-10-03
Commit: Live Chat realtime + anon policies, auto-resolve with enable flag, reopen on user reply, UI polish
### Updates
- Live Chat (Embed)
  - Messages now stream from Supabase realtime (\`public.messages\`); webhook response is ignored for content.
  - Sends \`channel_id\`, \`session_id\`, and a persistent friendly \`username\` (stored per host in localStorage). Removed \`platform_id\` from payload.
  - Ringtones wired to \`public/tones\` assets; low = \`mixkit-message-pop-alert-2354.mp3\`, high = \`mixkit-long-pop-2358.wav\`.
  - Thread lookup uses \`contacts(name)\` with \`maybeSingle()\` (fixes PGRST116 when 0 rows).
- Database (Supabase)
  - Added anon SELECT RLS for web embed:
    - \`channels\`: \`allow_public_select_web_channels\` (provider='web' and active only).
    - \`threads\`: \`public_read_web_threads\` (via web channels).
    - \`messages\`: \`public_read_web_messages\` (via web channels).
    - Fixes 401/42501 when opening standalone live chat.
  - Auto-resolve framework:
    - \`ai_profiles.auto_resolve_after_minutes\` (int) and \`enable_resolve\` (bool).
    - \`threads.auto_resolve_at\` scheduled by trigger \`set_thread_auto_resolve_after_message\` on agent/assistant replies; cleared on user replies.
    - Function \`auto_close_due_threads()\` (cron-friendly) and helper \`schedule_auto_resolve_for_open_threads()\` for backfill.
  - Auto-reopen: trigger \`reopen_thread_on_user_message\` reopens closed threads and unassigns when a new user message arrives.
- AI Agent Settings
  - Enable Auto-resolve switch added; Auto-resolve after (minutes) is disabled when switch is off.
  - Removed sending \`system_prompt\` to webhook; UI still saves prompt to profile.
- Conversations UI
  - Unreplied badge restyled (soft red background, darker red text) to match Assigned styling.

# [0.0.25] FE WEB CEKAT 2025-10-02
Commit: Human vs AI handover analytics, WAHA sessions fetch, realtime chats, Platforms loop fix, UI polish
### Updates
- Analytics (Human Agent)
  - Handover rate redefined as Human/(Human+AI) across all conversations (not only resolved).
  - Added breakdowns: by Super Agent and by Agent, with Super Agent filter.
- Database (Supabase)
  - New/updated RPCs: \`get_handover_by_super_agent\`, \`get_handover_by_agent\`, \`get_agent_kpis\`.
  - Enabled realtime by adding \`public.threads\` and \`public.messages\` to \`supabase_realtime\`.
- Platforms (WhatsApp)
  - Fetch sessions from WAHA (\`/api/sessions\` and \`/api/sessions/{name}\`); removed dependency on webhook \`/get_sessions\` calls in UI.
  - Filter sessions to selected channel; debounced refresh; fixed infinite refresh loop on Platforms page.
  - QR polling uses WAHA session endpoint; Disconnect/Delete refresh safely.
- Conversations
  - Live-updating conversation list and counts via realtime subscriptions to \`threads\` and \`messages\` (debounced).
- UI
  - Delete Channel button shows spinner + Deleting and subtle pulse while processing.
- Changelog
  - Source from root \`CHANGELOG.md\` only; removed \`public/CHANGELOG.md\`; scripts updated to skip copy.

# [0.0.24] FE WEB CEKAT 2025-09-30
### Updates
- Enhance message handling in ConversationPage and useConversations hooks.
- Optimistic UI updates for message status

# [0.0.23] FE WEB CEKAT 2025-10-02
### Updates
- Live Chat
  - New embedded-only chat page at \`/livechat/:platform_id\` with blue-white palette, gradient background, glassy card, and clearer borders.
  - Sound notifications: low note on send, high note on AI reply; ringtone-style sequences; support external audio and synthesized chimes.
  - Netlify SPA routing for \`/livechat/*\` via redirects in \`netlify.toml\` and \`public/_redirects\`.

- Connected Platforms
  - Live chat link and embed now use \`https://classy-frangollo-337599.netlify.app/livechat/{platform_id}\`.
  - Added Super Agent section (single-select; master-only). Human Agents now a searchable multi-select of regular agents only.
  - Removed Teams card. Agent chips show proper names and can be removed.

- Platform Forms (Web, WhatsApp, Telegram)
  - Enforce Super Agent selection; filter AI/Human Agents by the selected Super Agent.
  - Fixed Telegram \`useEffect\` import error; safer webhook response handling.
  - Only selected human agents are attached on create.

- Hooks and data
  - \`usePlatforms\`: join \`channel_agents\`; insert/remove on create/update; read/update \`channels.credentials.super_agent_id\`.
  - \`useAIAgents\`/\`LiveChat\`: dropped non-existent \`model\`; filter by \`super_agent_id\`.
  - \`useHumanAgents\`: include \`super_agent_id\` via \`super_agent_members\`.

- Human Agents page
  - Clustering UI to manage Super Agents  Agents & AI Agents; token totals by cluster.

- Database (Supabase)
  - New \`super_agent_members\` table (RLS) and \`ai_profiles.super_agent_id\` (NOT NULL).
  - Added \`users_profile.used_tokens\` plus \`refresh_used_tokens_for_super_agents\` function and trigger to aggregate token usage per super agent.
  - Deployed and backfilled via Supabase MCP; membership mappings added where needed.

- Fixes
  - Resolved SPA 404s for \`/livechat/*\`.
  - Fixed \`users_profile.email\` and \`ai_profiles.model\` 42703 errors.
  - Ensured agent removal updates \`channel_agents\` and access.

# [0.0.22] FE WEB CEKAT 2025-09-30
### Updates
- Fix platform creating for telegram
- Add saving functionality for selected AI agent in ConnectedPlatforms and prevent duplicate Telegram bot tokens in TelegramPlatform Form
- Enhance AI Agent Settings: Implement file upload functionality with Supabase integration, including upload progress tracking and error handling. Update UI to reflect file statuses and permissions. Add new knowledgebase endpoints for file management.
- Enhance file upload process in AIAgentSettings: pre-compute content hash for stable key, include additional metadata (storageName, storageSize, storageUpdatedAt) in upload response, and improve file validation checks.

# [0.0.21] FE WEB CEKAT 2025-09-30
### Updates
- Update CHANGELOG and enhance Analytics and HumanAgents components. 
- Added token usage tracking in Analytics with visualizations for daily usage and top models. 
- Improved token aggregation logic in HumanAgents to account for super-agent clusters.

# [0.0.20] FE WEB CEKAT 2025-09-30
### Updates
- Platform agent assignment
  - Persist selected agents on create to \`channel_agents\`; updates replace assignments.
  - Agents now only see platforms theyre assigned to; master/super see all.
  - Platforms list shows only attached human agents (no more org-wide members).

- Platform details UI
  - New Super Agent section: shows assigned super agent; single-select; editable by master agents only; stored in \`channels.credentials.super_agent_id\`.
  - Human Agent manager: chips with remove (X) + searchable multi-select to add; lists only regular agents (excludes super/master).
  - Removed unused Teams card; unified details behavior across providers.

- Telegram platform creation
  - Hits \`POST /telegram/create-platform\` (CREATE_PLATFORM) before channel insert.
  - Sends \`brand_name, display_name, description, telegram_bot_token, ai_profile_id, human_agent_ids, org_id\`.
  - Robust response handling for empty/non-JSON bodies; emits refresh after success.

- Data fetching and names
  - Human agent names prefer \`users_profile.display_name\` with fallback to \`v_users.display_name\`; email sourced from \`v_users\`.
  - Fixed error when \`users_profile.email\` was selected (column doesnt exist).

- Components
  - Added \`ui/multi-select\` (popover + search + checkbox) for multi-add of agents.

- Fixes
  - Agent chips now display the correct agent name (not internal IDs).
  - Only the agents selected during platform creation are attached (no more all agents issue).
  - Resolved Telegram JSON parse errors and \`42703 users_profile.email\` error.

# [0.0.19] FE WEB CEKAT 2025-09-23
### Updates
- Automatically switch to the Resolved tab when only closed conversations are present
- Updated Resolved tab UI to display the count of closed conversations.

# [0.0.18] FE WEB CEKAT 2025-09-20
### Updates
- Added provider tabs (WhatsApp, Telegram, Live Chat) to filter the list; auto-select first item in active tab
- Replaced black status dot with green (active) / gray (inactive) indicator

# [0.0.17] FE WEB CEKAT 2025-09-20
### Updates
- Scope data fetching and realtime to visible pages and active routes (Conversations, Human Agents, Platforms, Contacts, AI Agents, RBAC, Analytics)
- Add tab-visibility guards to avoid background fetch on tab-restore; hydrate from cache first where applicable
- Standardize React Query defaults (staleTime=60s, gc=5m, disable refetch on focus/reconnect)
- Reduce audit log verbosity: ignore refresh/update events; add 3s debounce in \`logAction\`; include current route in log context
- Analytics
  - Default to last 30 days and align to full-day UTC boundaries
  - Prevent invalid date ranges (From  To; To  From) with input min/max and clamping
  - Fetch once per change; removed duplicate initial fetch
- UI consistency: set Telegram Platform create button to blue
- Utilities: add \`isDocumentHidden\` and \`onDocumentVisible\` helpers

# [0.0.16] FE WEB CEKAT 2025-09-19
### Updates
- Enhance real-time synchronization for conversations and messages; always fetch fresh data on mount

# [0.0.15] FE WEB CEKAT 2025-09-19
### Updates
- Auth/OTP: eliminate redirect flicker by gating on \`otpEvaluated\`; \`ProtectedRoute\` and \`Otp\` now wait for evaluation; \`ResetPassword\` handles magic-link \`?code=\` with \`exchangeCodeForSession\`.
- Changelog page: render Markdown (react-markdown + GFM), Tailwind Typography, compact heading sizes; added Netlify \`public/_redirects\`; added \`prebuild\`/\`predev\` to copy root \`CHANGELOG.md\` to \`public/\`.
- Build: remove top-level await in \`main.tsx\` (wrap in async IIFE).
- Analytics (global): add graceful fallback when \`get_containment_and_handover\` is missing; improved handover reason labels; added per-user analytics (Assigned To, Takeovers Initiated, Resolved By, AIAgent Handovers).
- Human Agents:
  - Create Agent dialog with loader; 2FA enable checkbox on create; colored CTAs.
  - Add confirmation dialog with loader for deletion; wire hard delete.
  - Status changed to Active/Inactive; add \`users_profile.is_active\` column and update UI/actions.
  - Edit dialog shows Require Email 2FA switch and token limits; loads/saves \`is_2fa_email_enabled\`.
  - Role badges and submenu restyled (blue/green/gray).
- Edge Functions: \`admin-create-user\` (invite + profile + role, CORS) and \`admin-delete-user\` (hard delete auth user and related rows).
- Logging: \`logAction\` falls back to default org when \`org_id\` cannot be resolved (fixes audit log NOT NULL).
- UI theming: replaced remaining dark/black buttons with blue/green/red where appropriate.

# [0.0.14] FE WEB CEKAT 2025-09-19
### Updates
- Fix changelog is not accessible in staging

# [0.0.13] FE WEB CEKAT 2025-09-19
### Updates
- Implement OTP flow for login and enhance ProtectedRoute for OTP verification. 
- Added new Otp and Logout pages
- Updated AuthContext to manage OTP state 
- Modified Login component to handle OTP requirements.

# [0.0.12] FE WEB CEKAT 2025-09-18
### Updates
- Enhance authentication flow with local storage caching and session restoration
- Implemented local storage caching for AI agents and conversations to improve performance and reduce flicker on refresh.
- Added session restoration from local storage to ensure user authentication state is maintained across page reloads.
- Updated AuthContext to prioritize local storage for session data before reconciling with Supabase.
- Introduced a loading state management to handle UI updates more smoothly during data fetching.

# [0.0.11] FE WEB CEKAT 2025-09-17
### Updates
- Audit Logs self-read policy for non-master users.
- Added \`get_audit_logs\` RPC with server-side filters, paging, and master-only org-wide access.
- Analytics foundations: date-range controls and labeled charts; wired to secure RPCs.
- KPI RPCs: \`get_chats_timeseries\` and \`get_response_time_stats\` (avg/median/p90) with Asia/Jakarta bucketing.
- RBAC and conversation label changes now emit audit log entries.
- Analytics UI now uses new KPI RPCs with channel filter, time-series, and labeled bars.
- Containment/Handover groundwork: added \`threads.resolution\`, \`end_reason\`, \`handover_reason\`, AI auto-resolution trigger.
- Analytics RPCs: \`get_containment\` (with previous period) and \`get_handover_stats\` (reason breakdown).
- Server-side validation: handover reason now required when handover happens; added helpful indexes for analytics.
- Added \`get_non_contained\` RPC for drilldown of non-contained conversations.
- Containment/Handover dashboard cards with drilldown and reason pie chart.
- RBAC policy engine scaffold: \`rbac_policies\` table, RPCs (\`get_role_policy\`, \`put_role_policy\`, \`apply_role_policy\`), extended \`has_perm\` to honor policies.
- Role Policy editor UI (matrix) to manage per-resource actions; policy changes logged.
- Added docs/ANALYTICS_AND_LOGS.md covering RPCs, validation, and telemetry.
- Added PII sanitization tests for log CSV export.
- Added analytics time-series, containment, handover, and RBAC policy tests; basic E2E seed.
- TODO roadmap (server-validated) added for Analytics KPIs, Containment/Handover, RBAC policies, indexes, docs, and tests.
- implement OTP flow in login
- enhance ProtectedRoute for OTP verification

# [0.0.10] FE WEB CEKAT 2025-09-16
### Updates
- fix: remove duplicate import of useRBAC in ConversationPage component

# [0.0.9] FE WEB CEKAT 2025-09-16
### Updates
- Created loggings for every users, and only admin can access.
- Made Role Management for admins to setting the role.

# [0.0.8] FE WEB CEKAT 2025-09-14
### Updates
- Replaced thread participants with collaborators in the database schema.
- Implemented checks for user collaboration status on conversations.
- Enhanced thread assignment logic to ensure proper user assignment and audit fields.
- Updated UI elements for chat takeover functionality to reflect new collaborator roles.

# [0.0.7] FE WEB CEKAT 2025-09-13
### Updates
- Removed static permission constants in favor of direct string references for better alignment with database values.
- Updated components to utilize new permission string format, enhancing consistency across the application.
- Improved navigation logic to enforce permission checks when syncing active tabs, ensuring users only access permitted items.
- Streamlined permission-related code in various components, enhancing maintainability and readability.

# [0.0.6] FE WEB CEKAT 2025-09-03
### Updates
- Implement OpenAI usage tracking and enhance analytics component
- Added OpenAI API key configuration to .env for usage tracking.
- Refactored vite.config.ts to include a usage proxy plugin for fetching OpenAI usage data.
- Enhanced Analytics component to display OpenAI token usage with dynamic date range selection and improved UI elements.
- Integrated charts to visualize input, output, and total tokens over selected time ranges.
- Implemented error handling and loading states for better user experience during data fetching.

# [0.0.5] FE WEB CEKAT 2025-09-03
### Updates
- Updated PermissionNavItem and NavigationItem interfaces to use string arrays for permissions instead of PermissionName type for better flexibility.
- Modified NAVIGATION_CONFIG to replace permission constants with string representations for improved readability and consistency.
- Enhanced RBACProvider's hasPermission function to support various permission formats, including direct matches and synonyms for better user experience.
- Integrated a new PermissionsPage component into the main Index page, ensuring proper permission checks with PermissionGate.


# [0.0.4] FE WEB CEKAT 2025-09-03
### Updates
- Integrate RBAC and enhance agent management features
- Added RBACProvider to App component for role-based access control.
- Updated HumanAgents component to utilize PermissionGate for role management and agent creation.
- Refactored agent role handling to support new roles: master_agent and super_agent.
- Enhanced ConversationPage to display channel provider information for better context.
- Improved useHumanAgents hook to fetch agents from the new v_users view, streamlining data retrieval and role assignment.

# [0.0.3] FE WEB CEKAT 2025-09-03
### Updates
- Implement WhatsApp session polling and enhance deletion handling
- Added polling mechanism to check WhatsApp session status while the QR modal is open, improving user feedback on connection status.
- Introduced loading state management for channel deletion actions to prevent multiple submissions and enhance user experience.
- Removed phone number input from WhatsAppPlatformForm as per updated requirements, streamlining the form submission process.

# [0.0.2] FE WEB CEKAT 2025-09-01
### Updates
- Deleted AUTHENTICATION_SETUP.md, CHAT_SETUP.md, HUMAN_AGENTS_SETUP.md, sample_data.sql, and simple_sample_data.sql as they are no longer relevant to the current project structure.
- Updated package.json version to 0.0.1 and removed unnecessary dev dependencies from package-lock.json.
- Enhanced Login component to display the current version of the application.
- Enhanced Whatsapp channel connecting flow and validation

# [0.0.1] FE WEB CEKAT 2025-09-01
### Updates
- Enhance ClientEditProfileForm: Make company industry selection read-only for non-admin users`,$M=["from-sky-400/60 via-cyan-400/20 to-transparent border-sky-500/40","from-fuchsia-400/60 via-purple-500/20 to-transparent border-fuchsia-500/30","from-emerald-400/60 via-lime-400/20 to-transparent border-emerald-500/30","from-amber-400/60 via-orange-400/20 to-transparent border-amber-500/30","from-indigo-400/60 via-violet-500/20 to-transparent border-indigo-500/30","from-rose-400/60 via-pink-500/20 to-transparent border-rose-500/30"];function LM(e){return e.split(`
`).map(t=>t.trim()).filter(t=>/^-\s*\*\*/.test(t)).map(t=>{const n=t.match(/^-\s*\*\*(.+?)\*\*:?\s*(.*)$/);if(!n)return t.replace(/^-+\s*/,"");const[,r,a]=n;return a?`${r.trim()}  ${a.trim()}`:r.trim()})}function o9(e){var a,s;const t=e.replace(/\r/g,"").trim();if(!t)return[];const n=t.split(/\n(?=# \[)/g).map(o=>o.trim()).filter(Boolean),r=[];for(const o of n){if(o.startsWith("# Change Log")){const x=o.replace(/^# Change Log\s*/,"").trim();if(!x)continue;const y=o9(x);r.push(...y);continue}const l=o.match(/^# \[(?<version>[^\]]+)\](?<title>.*?)(?:\n|$)/);if(!(l!=null&&l.groups))continue;const c=(a=l.groups.version)==null?void 0:a.trim();if(!c)continue;const u=((s=l.groups.title)==null?void 0:s.trim())??"";let f=u||void 0,d;if(u){const x=u.match(/(\d{4}-\d{2}-\d{2})/);x&&(d=x[1],f=u.replace(x[1],"").trim()||void 0)}const h=o.slice(l[0].length).trim(),m=h?h.split(/\n(?=### )/g).map(x=>x.trim()).filter(Boolean):[],g=m.length?m.map((x,y)=>{const[b,...w]=x.split(`
`),j=b.replace(/^###\s*/,"").trim()||`Section ${y+1}`,k=w.join(`
`).trim();return{heading:j,body:k,highlights:LM(k)}}):h?[{heading:"Updates",body:h,highlights:LM(h)}]:[],v=g.flatMap(x=>x.highlights).filter(Boolean).slice(0,5);r.push({version:c,label:f,date:d,sections:g,summary:v,raw:h})}return r}const BFe={p:({children:e})=>i.jsx("p",{className:"text-sm leading-relaxed text-slate-200",children:e}),ul:({children:e})=>i.jsx("ul",{className:"space-y-2 text-sm text-slate-200",children:e}),li:({children:e})=>i.jsxs("li",{className:"relative pl-6",children:[i.jsx("span",{className:"absolute left-0 top-2 h-2 w-2 rounded-full bg-gradient-to-r from-sky-400 to-blue-500 shadow-[0_0_12px_rgba(56,189,248,0.6)]"}),i.jsx("div",{className:"space-y-1",children:e})]}),strong:({children:e})=>i.jsx("span",{className:"font-semibold text-sky-200",children:e}),code:({children:e})=>i.jsx("code",{className:"rounded-md bg-slate-900/80 px-1.5 py-0.5 text-xs text-sky-200",children:e}),a:({children:e,href:t})=>i.jsx("a",{href:t,className:"text-sky-300 underline decoration-dotted underline-offset-4 transition hover:text-sky-200",target:"_blank",rel:"noreferrer",children:e})};function UFe(){var f;const e=p.useMemo(()=>o9(DM),[]),[t,n]=p.useState(""),[r,a]=p.useState("interactive"),[s,o]=p.useState(((f=e[0])==null?void 0:f.version)??""),l=t.trim().toLowerCase(),c=p.useMemo(()=>l?e.filter(d=>[d.version,d.label??"",d.date??"",d.raw,...d.sections.map(m=>m.heading),...d.sections.map(m=>m.body)].join(" ").toLowerCase().includes(l)?!0:d.sections.some(m=>m.highlights.some(g=>g.toLowerCase().includes(l)))):e,[e,l]);p.useEffect(()=>{var h;if(!c.length){o("");return}c.some(m=>m.version===s)||o(((h=c[0])==null?void 0:h.version)??"")},[c,s]);const u=c.find(d=>d.version===s)||c[0];return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-10 text-foreground",children:i.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-6",children:[i.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[i.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-white md:text-4xl",children:"Release Notes & Progress Journal"}),i.jsx("p",{className:"mx-auto max-w-2xl text-sm text-slate-300 md:text-base",children:"Explore every release with rich summaries, vivid highlights, and interactive sections. Filter by keyword, skim highlights, or dive deep into the full notes."})]}),i.jsxs(pl,{value:r,onValueChange:d=>a(d),className:"w-full",children:[i.jsxs(so,{className:"mx-auto grid w-full max-w-xs grid-cols-2 bg-slate-900/60 p-1 shadow-inner shadow-slate-800/40",children:[i.jsx(Gn,{value:"interactive",className:"data-[state=active]:bg-sky-500/20 data-[state=active]:text-sky-100",children:"Interactive"}),i.jsx(Gn,{value:"markdown",className:"data-[state=active]:bg-slate-700/40 data-[state=active]:text-slate-100",children:"Classic"})]}),i.jsx(Dn,{value:"interactive",className:"mt-6",children:i.jsxs("div",{className:"grid gap-6 lg:grid-cols-[320px_1fr]",children:[i.jsxs(Ae,{className:"border border-white/10 bg-slate-950/60 shadow-[0_12px_40px_-24px_rgba(56,189,248,0.65)] backdrop-blur",children:[i.jsxs(tt,{className:"space-y-4",children:[i.jsxs(Qe,{className:"flex items-center gap-2 text-lg text-white",children:[i.jsx(hP,{className:"h-4 w-4 text-sky-300"}),"Releases"]}),i.jsx(di,{className:"text-xs text-slate-300",children:"Search and choose any release to explore tailored highlights and details. Recent entries glow brighter."}),i.jsxs("div",{className:"relative",children:[i.jsx(hs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),i.jsx(Ve,{placeholder:"Search versions, features, or dates...",value:t,onChange:d=>n(d.target.value),className:"bg-slate-900/70 pl-9 text-sm text-slate-100 placeholder:text-slate-400 focus-visible:ring-sky-400"})]})]}),i.jsx(Je,{className:"p-0",children:i.jsx(ob,{className:"h-[540px]",children:i.jsxs("div",{className:"flex flex-col divide-y divide-white/5",children:[c.length===0&&i.jsx("div",{className:"p-6 text-center text-sm text-slate-400",children:"No release notes match your search. Try another term."}),c.map((d,h)=>{const m=d.version===(u==null?void 0:u.version);return i.jsx("button",{onClick:()=>o(d.version),className:xe("group relative flex w-full flex-col items-start gap-3 px-5 py-4 text-left transition",m?"bg-sky-500/15":"hover:bg-slate-900/70"),children:i.jsxs("div",{className:"flex w-full items-start gap-3",children:[i.jsx("span",{className:xe("mt-2 h-2.5 w-2.5 rounded-full bg-sky-400 shadow-[0_0_12px_rgba(56,189,248,0.7)] transition-transform",m&&"scale-125")}),i.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("span",{className:"text-sm font-semibold text-slate-100",children:["v",d.version]}),d.label&&i.jsx(It,{variant:"outline",className:"border-slate-500/50 bg-slate-900/60 px-2 py-0 text-[10px] font-medium uppercase tracking-wide text-slate-300",children:d.label}),d.date&&i.jsxs("span",{className:"flex items-center gap-1 text-[11px] uppercase tracking-wide text-slate-400",children:[i.jsx(lP,{className:"h-3 w-3 text-slate-400"}),d.date]})]}),d.summary.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:d.summary.slice(0,3).map(g=>i.jsx(It,{variant:"secondary",className:"max-w-full truncate bg-sky-500/15 text-[10px] font-medium text-sky-100",title:g,children:g},g))})]})]})},d.version)})]})})})]}),i.jsx("div",{className:"space-y-6",children:u?i.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-white/10 bg-slate-950/70 p-1 shadow-[0_45px_90px_-60px_rgba(56,189,248,0.8)] backdrop-blur",children:[i.jsx("div",{className:"absolute -left-32 -top-32 h-64 w-64 rounded-full bg-sky-500/20 blur-3xl"}),i.jsx("div",{className:"absolute -bottom-24 -right-24 h-64 w-64 rounded-full bg-fuchsia-500/10 blur-3xl"}),i.jsxs("div",{className:"relative z-10 rounded-[calc(theme(borderRadius.3xl))] border border-white/10 bg-slate-950/80 px-8 py-8",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsxs(It,{className:"bg-sky-500/30 text-sky-50",children:["Version ",u.version]}),u.label&&i.jsx("h2",{className:"text-xl font-semibold text-white md:text-2xl",children:u.label}),u.date&&i.jsxs("span",{className:"flex items-center gap-1 text-sm text-slate-300",children:[i.jsx(lP,{className:"h-4 w-4 text-sky-300"}),u.date]})]}),u.summary.length>0&&i.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:u.summary.map(d=>i.jsxs(It,{variant:"outline",className:"gap-1 border-sky-400/40 bg-sky-500/15 px-3 py-1 text-[11px] font-medium text-sky-100",title:d,children:[i.jsx(hP,{className:"h-3 w-3 text-sky-200"}),i.jsx("span",{className:"max-w-[220px] truncate",children:d})]},d))}),i.jsx("div",{className:"mt-8 space-y-4",children:i.jsxs(FFe,{type:"multiple",defaultValue:u.sections.map((d,h)=>`section-${h}`),className:"space-y-4",children:[u.sections.map((d,h)=>{const m=$M[h%$M.length];return i.jsxs(a9,{value:`section-${h}`,className:xe("border border-white/5","rounded-2xl bg-slate-950/60 shadow-[0_24px_60px_-35px_rgba(56,189,248,0.55)]"),children:[i.jsxs(i9,{className:"px-6 py-5 text-left hover:no-underline data-[state=open]:bg-slate-900/60",children:[i.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:xe("h-2.5 w-2.5 rounded-full bg-gradient-to-r shadow-[0_0_12px_rgba(56,189,248,0.6)]",m)}),i.jsx("span",{className:"text-base font-semibold text-white md:text-lg",children:d.heading})]}),d.highlights.length>0&&i.jsx("p",{className:"text-xs text-slate-300 md:text-sm",children:d.highlights[0]})]}),i.jsx(fP,{className:"h-4 w-4 text-sky-300"})]}),i.jsx(s9,{className:"px-6 pb-6",children:i.jsxs("div",{className:xe("relative overflow-hidden rounded-xl border border-white/5 bg-slate-950/80 px-5 py-5","shadow-[inset_0_0_40px_-25px_rgba(56,189,248,0.75)]"),children:[i.jsx("div",{className:xe("pointer-events-none absolute inset-0 bg-gradient-to-br opacity-40",m)}),i.jsx(CM,{remarkPlugins:[MM],components:BFe,className:"relative z-10 space-y-3",children:d.body})]})})]},d.heading+h)}),u.sections.length===0&&i.jsx("p",{className:"text-sm text-slate-300",children:"No detailed sections were found for this release. Check the classic view for raw notes."})]},u.version)})]})]}):i.jsxs(Ae,{className:"border border-white/10 bg-slate-950/60 p-12 text-center text-slate-300",children:[i.jsx(Qe,{className:"text-xl text-white",children:"No entries available"}),i.jsx(di,{className:"mt-2 text-sm text-slate-300",children:"Try clearing the search filter to view release notes."})]})})]})}),i.jsx(Dn,{value:"markdown",className:"mt-6",children:i.jsxs(Ae,{className:"border border-white/10 bg-slate-950/70 shadow-[0_30px_80px_-60px_rgba(15,23,42,0.95)]",children:[i.jsxs(tt,{children:[i.jsxs(Qe,{className:"flex items-center gap-2 text-white",children:[i.jsx(fP,{className:"h-5 w-5 text-sky-300"}),"Full Markdown"]}),i.jsx(di,{className:"text-xs text-slate-300",children:"Prefer the traditional view? Browse the original changelog with full Markdown formatting."})]}),i.jsx(Je,{children:i.jsx("article",{className:"prose prose-sm max-w-none text-slate-200 dark:prose-invert prose-headings:text-white prose-a:text-sky-300 prose-strong:text-sky-200",children:i.jsx(CM,{remarkPlugins:[MM],children:DM})})})]})})]})]})})}function FM(){const{platform_id:e,platformId:t}=QX(),n=p.useMemo(()=>e||t||"unknown",[e,t]),[r,a]=p.useState([]),[s,o]=p.useState(""),[l,c]=p.useState(!1),[u,f]=p.useState(!0),[d,h]=p.useState("session_"+Date.now()),[m,g]=p.useState(null),[v,x]=p.useState(""),[y,b]=p.useState(null),[w,j]=p.useState(null),k=p.useRef(null),_=p.useRef(null),S=p.useRef(null),E=p.useRef(null),N="/tones/mixkit-message-pop-alert-2354.mp3",I="/tones/mixkit-long-pop-2358.wav",P=()=>{const C=window.AudioContext||window.webkitAudioContext;return _.current=_.current??new C,_.current},D=(C,F,M,A,W=.05,G="sine")=>{const Y=C.createOscillator(),H=C.createGain();Y.type=G,Y.frequency.value=M,H.gain.value=1e-4,Y.connect(H),H.connect(C.destination);const Q=F+A/1e3;H.gain.setValueAtTime(1e-4,F),H.gain.exponentialRampToValueAtTime(W,F+.02),H.gain.setValueAtTime(W,Math.max(F+.02,Q-.05)),H.gain.exponentialRampToValueAtTime(1e-4,Q),Y.start(F),Y.stop(Q)},L=(C,F=110,M=.06)=>{try{const A=P(),W=A.currentTime+.01;C.forEach((G,Y)=>{const H=W+Y*F/1e3,Q=F*.9;Array.isArray(G)?G.forEach(X=>D(A,H,X,Q,M,"sine")):D(A,H,G,Q,M,"triangle")})}catch{}},B=async C=>{var F,M;try{const W=(C==="low"?(F=window.chatConfig)==null?void 0:F.sendToneUrl:(M=window.chatConfig)==null?void 0:M.replyToneUrl)||(C==="low"?N:I),G=C==="low"?S.current??(S.current=new Audio(W)):E.current??(E.current=new Audio(W));return G.src!==W&&(G.src=W),G.currentTime=0,G.volume=C==="low"?.35:.45,await G.play(),!0}catch{return!1}},U=async()=>{await B("low")||L([493.88,523.25,493.88,523.25],110,.045)},$=async()=>{await B("high")||L([1046.5,1318.5,1568,[1046.5,1318.5,1568,2093]],120,.06)};p.useEffect(()=>{try{const C=typeof window<"u"?window.location.host:"unknown",F=`livechat_username_${n}_${C}`;let M="";try{M=localStorage.getItem(F)||""}catch{}if(!M){const A=["Happy","Bright","Calm","Brave","Kind","Sunny","Lucky","Cheerful","Swift","Clever"],W=["User","Visitor","Friend","Guest","Buddy","Pal","Explorer","Champion","Star","Hero"],G=A[Math.floor(Math.random()*A.length)],Y=W[Math.floor(Math.random()*W.length)],H=Math.floor(100+Math.random()*900);M=`${G} ${Y} ${H}`;try{localStorage.setItem(F,M)}catch{}}x(M)}catch{}},[n]),p.useEffect(()=>{var C;(C=k.current)==null||C.scrollIntoView({behavior:"smooth"})},[r.length]),p.useEffect(()=>{(async()=>{try{const{data:F,error:M}=await ne.from("channels").select("count").limit(1);M&&console.error("Supabase connection error:",M)}catch(F){console.error("Supabase connection test failed:",F)}})()},[]),p.useEffect(()=>()=>{w&&j(null)},[w]),p.useEffect(()=>{if(!m)return;const F=setInterval(async()=>{try{const{data:M}=await ne.from("messages").select("id, role, body, created_at").eq("thread_id",m).order("created_at",{ascending:!0});Array.isArray(M)&&a(A=>{const W=new Map;A.forEach(Y=>W.set(Y.id,Y));for(const Y of M){if(!(Y!=null&&Y.id))continue;const H=Y.role==="agent"||Y.role==="assistant"?"assistant":"user";if(H==="user")continue;const Q={id:Y.id,role:H,body:Y.body||"",at:Y.created_at||new Date().toISOString()};W.set(Q.id,Q)}const G=Array.from(W.values());return G.sort((Y,H)=>new Date(Y.at).getTime()-new Date(H.at).getTime()),G})}catch(M){console.error("Error refreshing messages:",M)}},2e3);return()=>clearInterval(F)},[m]),p.useEffect(()=>{n&&n!=="unknown"&&(async()=>{try{const{data:F,error:M}=await ne.from("channels").select("ai_profile_id").eq("id",n).maybeSingle();!M&&(F!=null&&F.ai_profile_id)&&b(F.ai_profile_id)}catch(F){console.error("Error fetching AI profile ID:",F)}})()},[n]),p.useEffect(()=>{let C=null,F=null;const M=G=>{!G||G.length===0||a(Y=>{const H=new Map;Y.forEach(X=>H.set(X.id,X));for(const X of G){if(!(X!=null&&X.id))continue;const re=X.role==="agent"||X.role==="assistant"?"assistant":"user",fe={id:X.id,role:re,body:X.body||"",at:X.created_at||new Date().toISOString()};if(re==="user"){for(const[J,ye]of H.entries())if(ye.id.startsWith("temp-")&&ye.role==="user"&&ye.body===X.body&&Math.abs(new Date(ye.at).getTime()-new Date(X.created_at).getTime())<1e4){H.delete(J);break}}if(re==="assistant"&&w){for(const[J,ye]of H.entries())if(ye.id===w){H.delete(J);break}}H.has(fe.id)||H.set(fe.id,fe)}const Q=Array.from(H.values());return Q.sort((X,re)=>new Date(X.at).getTime()-new Date(re.at).getTime()),Q})},A=async G=>{g(G);try{const{data:Y}=await ne.from("messages").select("id, role, body, created_at").eq("thread_id",G).order("created_at",{ascending:!0});Array.isArray(Y)&&M(Y)}catch{}C=ne.channel(`livechat-msgs-${G}`).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`thread_id=eq.${G}`},Y=>{const H=Y==null?void 0:Y.eventType,Q=(Y==null?void 0:Y.new)||(Y==null?void 0:Y.old);Q&&(Q==null?void 0:Q.role)!=="user"&&(((Q==null?void 0:Q.role)==="agent"||(Q==null?void 0:Q.role)==="assistant")&&M([Q]),H==="INSERT"&&(Q==null?void 0:Q.role)==="agent"&&w&&j(null))}).subscribe(),f(!1)};return(async()=>{try{const{data:G}=await ne.from("threads").select("id, contact_id, contacts(name)").eq("channel_id",n).eq("contacts.name",v).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(G!=null&&G.id){await A(G.id);return}}catch{}F=ne.channel(`livechat-threads-${n}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"threads",filter:`channel_id=eq.${n}`},async G=>{var Q,X;const Y=(Q=G==null?void 0:G.new)==null?void 0:Q.id,H=(X=G==null?void 0:G.new)==null?void 0:X.contact_id;if(!(!Y||!H))try{const{data:re}=await ne.from("contacts").select("id, name").eq("id",H).maybeSingle();re!=null&&re.name&&v&&re.name===v&&await A(Y)}catch{}}).subscribe(()=>f(!1))})(),()=>{try{C&&ne.removeChannel(C)}catch{}try{F&&ne.removeChannel(F)}catch{}}},[n,v]);const O=async()=>{const C=s.trim();if(!C)return;if(m)try{const{checkAIMessageLimit:G,autoAssignToSuperAgent:Y}=await Ys(async()=>{const{checkAIMessageLimit:Q,autoAssignToSuperAgent:X}=await import("./aiMessageLimit-CzT5SAWG.js");return{checkAIMessageLimit:Q,autoAssignToSuperAgent:X}},[]),H=await G(ne,m);if(H.isExceeded&&H.superAgentId){if((await Y(ne,m,H.superAgentId)).success){const{toast:X}=await Ys(async()=>{const{toast:re}=await Promise.resolve().then(()=>bP);return{toast:re}},void 0);X.error(`Batas pesan AI telah tercapai (${H.currentCount}/${H.limit}). Percakapan telah dialihkan ke super agent.`);return}}else if(H.isExceeded&&!H.superAgentId){const{toast:Q}=await Ys(async()=>{const{toast:X}=await Promise.resolve().then(()=>bP);return{toast:X}},void 0);Q.error(`Batas pesan AI telah tercapai (${H.currentCount}/${H.limit}). Tidak ada super agent yang tersedia untuk penanganan.`);return}}catch(G){console.error("Error checking AI message limit:",G)}o("");const F=`temp-${Date.now()}`;a(G=>[...G,{id:F,role:"user",body:C,at:new Date().toISOString()}]),U(),c(!0);const M=setTimeout(()=>{a(G=>(G.findIndex(H=>H.id===F)>=0,G))},3e3),A=`streaming-${Date.now()}`;j(A);const W=setTimeout(()=>{w===A&&(j(null),a(G=>G.map(Y=>Y.id===A?{...Y,streaming:!1,body:Y.body||"Waiting for response..."}:Y)))},1e4);try{const G={message:C,session_id:d,timestamp:new Date().toISOString(),channel_id:n,username:v||void 0,ai_profile_id:y,stream:!0};let Y=!1;try{const{data:{session:Q}}=await ne.auth.getSession();Y=!Q}catch{Y=!0}const H=await wa(Yn.ENDPOINTS.AI_AGENT.CHAT_SETTINGS,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)},{forceLegacy:Y});if(!H.ok)throw new Error(`Webhook failed ${H.status}`);if(H.body){const Q=H.body.getReader(),X=new TextDecoder;let re="";try{for(;;){const{done:fe,value:J}=await Q.read();if(fe)break;re+=X.decode(J,{stream:!0});const ye=re.split(`
`);re=ye.pop()||"";for(const z of ye)if(z.trim()!=="")try{if(z.startsWith("data: ")){const q=z.slice(6);if(q==="[DONE]"){a(se=>se.map(be=>be.id===A?{...be,streaming:!1}:be)),j(null);break}const ae=JSON.parse(q);if(ae.content||ae.delta){const se=ae.content||ae.delta;a(be=>{const Se=be.findIndex(Le=>Le.id===A);if(Se>=0){const Le=be.slice();return Le[Se]={...Le[Se],body:Le[Se].body+se},Le}else return[...be,{id:A,role:"assistant",body:se,at:new Date().toISOString(),streaming:!0}]})}}else{const q=JSON.parse(z);if(q.content||q.delta){const ae=q.content||q.delta;a(se=>{const be=se.findIndex(Se=>Se.id===A);if(be>=0){const Se=se.slice();return Se[be]={...Se[be],body:Se[be].body+ae},Se}else return[...se,{id:A,role:"assistant",body:ae,at:new Date().toISOString(),streaming:!0}]})}}}catch{a(ae=>{const se=ae.findIndex(be=>be.id===A);if(se>=0){const be=ae.slice();return be[se]={...be[se],body:be[se].body+z},be}else return[...ae,{id:A,role:"assistant",body:z,at:new Date().toISOString(),streaming:!0}]})}}}finally{Q.releaseLock()}}else try{const Q=await H.json(),X=Q.output||Q.content||Q.message||"Sorry, I couldn't process your message.";a(re=>{const fe=re.findIndex(J=>J.id===A);if(fe>=0){const J=re.slice();return J[fe]={...J[fe],body:X,streaming:!1},J}else return[...re,{id:A,role:"assistant",body:X,at:new Date().toISOString(),streaming:!1}]}),j(null)}catch(Q){console.error("Failed to parse JSON response:",Q),a(X=>[...X,{id:A,role:"assistant",body:"I'm processing your message, please wait...",at:new Date().toISOString(),streaming:!1}]),j(null)}$(),setTimeout(()=>{m&&ne.from("messages").select("id, role, body, created_at").eq("thread_id",m).order("created_at",{ascending:!0}).then(({data:Q})=>{Array.isArray(Q)&&a(X=>{const re=new Map;X.forEach(J=>re.set(J.id,J));for(const J of Q){if(!(J!=null&&J.id))continue;const ye=J.role==="agent"||J.role==="assistant"?"assistant":"user";if(ye==="user")continue;const z={id:J.id,role:ye,body:J.body||"",at:J.created_at||new Date().toISOString()};re.set(z.id,z)}const fe=Array.from(re.values());return fe.sort((J,ye)=>new Date(J.at).getTime()-new Date(ye.at).getTime()),fe})})},1e3)}catch(G){console.error("Streaming error:",G),a(Y=>Y.filter(H=>H.id!==A).concat({id:crypto.randomUUID(),role:"assistant",body:"Sorry, I'm having trouble right now. Please try again later.",at:new Date().toISOString()})),j(null),$()}finally{clearTimeout(W),clearTimeout(M),c(!1)}},T=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),O())},R=C=>new Date(C).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center",children:i.jsx("div",{className:"mx-auto w-full max-w-xl h-full",children:i.jsx(Ae,{className:"border border-blue-100 shadow-xl rounded-2xl bg-white/90 backdrop-blur",children:i.jsxs(Je,{className:"p-0",children:[i.jsx("div",{className:"flex items-center justify-between px-4 py-3 rounded-t-2xl bg-gradient-to-r from-blue-600 to-blue-500 text-white",children:i.jsx("div",{className:"text-sm font-medium tracking-wide",children:"Live Chat"})}),i.jsx(ob,{className:"h-[450px] p-4",children:i.jsxs("div",{className:"space-y-3",children:[u&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin text-blue-600"}),"Preparing chat"]}),r.map(C=>!C.body||C.streaming&&C.body.trim()===""?null:i.jsx("div",{className:`flex ${C.role==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:"max-w-[80%] space-y-1",children:[i.jsx("div",{className:`px-4 py-2 text-sm rounded-2xl shadow-sm transition-colors ${C.role==="user"?"bg-blue-600 text-white rounded-br-md":"bg-white text-slate-900 border border-blue-100 rounded-bl-md"}`,children:i.jsx("span",{className:"whitespace-pre-wrap",children:C.body})}),i.jsx("div",{className:`text-[10px] ${C.role==="user"?"text-blue-200 text-right":"text-slate-400"}`,children:R(C.at)})]})},C.id)),l&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin text-blue-600"}),"Typing"]}),i.jsx("div",{ref:k})]})}),i.jsx("div",{className:"p-3 border-t border-blue-100 rounded-b-2xl bg-blue-50/40",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ve,{placeholder:"Type a message",value:s,onChange:C=>o(C.target.value),onKeyPress:T,className:"rounded-full h-10 px-4 border-blue-200 focus-visible:ring-blue-500 placeholder:text-slate-400"}),i.jsx(Z,{onClick:O,disabled:!s.trim(),className:"rounded-full h-10 w-10 p-0 bg-blue-600 hover:bg-blue-700 text-white",children:i.jsx(Xh,{className:"h-4 w-4"})})]})})]})})})})}function zFe(){const{signOut:e}=Vr(),t=Ka(),[n,r]=p.useState(!1),a=async()=>{if(!n){r(!0);try{localStorage.clear(),e().catch(()=>{}),t("/",{replace:!0})}catch(s){console.error("AccountDeactivated: Error in handleBackToLogin:",s),t("/",{replace:!0})}finally{r(!1)}}};return i.jsx("div",{className:"min-h-screen bg-background text-foreground flex items-center justify-center p-4",children:i.jsxs(Ae,{className:"w-full max-w-md",children:[i.jsxs(tt,{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:i.jsx($s,{className:"h-8 w-8 text-red-600"})}),i.jsx(Qe,{className:"text-2xl font-bold text-red-800",children:"Akun Dinonaktifkan"})]}),i.jsx(di,{className:"text-gray-600 text-base",children:"Akun Anda telah dinonaktifkan dan tidak dapat mengakses sistem."})]}),i.jsxs(Je,{className:"space-y-6",children:[i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Bv,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Hubungi Master Agent"}),i.jsx("p",{className:"text-sm text-red-700",children:"Untuk mengaktifkan kembali akun Anda, silakan hubungi Master Agent di organisasi Anda. Mereka dapat mengaktifkan akun Anda kembali."})]})]})}),i.jsx("div",{className:"text-sm text-gray-600",children:i.jsx("p",{children:"Jika Anda yakin ini adalah kesalahan, silakan hubungi administrator sistem untuk bantuan lebih lanjut."})}),i.jsx("div",{className:"flex flex-col gap-3",children:i.jsxs(Z,{onClick:a,variant:"outline",className:"w-full",disabled:n,children:[i.jsx(op,{className:"h-4 w-4 mr-2"}),n?"Memproses...":"Kembali ke Halaman Login"]})})]})]})})}const qFe=new wX({defaultOptions:{queries:{staleTime:6e4,gcTime:5*6e4,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:1},mutations:{retry:0}}}),WFe=()=>i.jsx(_X,{client:qFe,children:i.jsx(wJ,{children:i.jsx(aee,{children:i.jsx(see,{children:i.jsxs(O1,{children:[i.jsx(DK,{}),i.jsx(a4,{}),i.jsxs(hJ,{children:[i.jsx(Ta,{path:"/",element:i.jsx(vg,{children:i.jsx(MR,{})})}),i.jsx(Ta,{path:"/chat",element:i.jsx(vg,{children:i.jsx(MR,{})})}),i.jsx(Ta,{path:"/profile",element:i.jsx(vg,{children:i.jsx(bIe,{})})}),i.jsx(Ta,{path:"/reset-password",element:i.jsx($R,{})}),i.jsx(Ta,{path:"/invite",element:i.jsx($R,{})}),i.jsx(Ta,{path:"/account-deactivated",element:i.jsx(zFe,{})}),i.jsx(Ta,{path:"/otp",element:i.jsx(vg,{children:i.jsx(DIe,{})})}),i.jsx(Ta,{path:"/logout",element:i.jsx($Ie,{})}),i.jsx(Ta,{path:"/changelog",element:i.jsx(UFe,{})}),i.jsx(Ta,{path:"/livechat/:platform_id",element:i.jsx(FM,{})}),i.jsx(Ta,{path:"/livechat/:platformId",element:i.jsx(FM,{})}),i.jsx(Ta,{path:"*",element:i.jsx(LIe,{})})]})]})})})})}),HFe="sb-yoekcpoppfudmqtvjcby-auth-token";async function VFe(){var e,t;try{const n=localStorage.getItem(HFe);if(!n)return;const r=JSON.parse(n),a=(r==null?void 0:r.access_token)||((e=r==null?void 0:r.currentSession)==null?void 0:e.access_token),s=(r==null?void 0:r.refresh_token)||((t=r==null?void 0:r.currentSession)==null?void 0:t.refresh_token);a&&s&&await ne.auth.setSession({access_token:a,refresh_token:s})}catch{}}(async()=>{try{await VFe()}catch{}oL(document.getElementById("root")).render(i.jsx(WFe,{}))})();

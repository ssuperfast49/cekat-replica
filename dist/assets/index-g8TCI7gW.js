var rH=Object.defineProperty;var pE=e=>{throw TypeError(e)};var aH=(e,t,n)=>t in e?rH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Wt=(e,t,n)=>aH(e,typeof t!="symbol"?t+"":t,n),U0=(e,t,n)=>t.has(e)||pE("Cannot "+n);var Oe=(e,t,n)=>(U0(e,t,"read from private field"),n?n.call(e):t.get(e)),sn=(e,t,n)=>t.has(e)?pE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Dt=(e,t,n,r)=>(U0(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Gr=(e,t,n)=>(U0(e,t,"access private method"),n);var sg=(e,t,n,r)=>({set _(a){Dt(e,t,a,n)},get _(){return Oe(e,t,r)}});function iH(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(r,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function sH(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var CD={exports:{}},Ex={},AD={exports:{}},Gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp=Symbol.for("react.element"),oH=Symbol.for("react.portal"),lH=Symbol.for("react.fragment"),cH=Symbol.for("react.strict_mode"),uH=Symbol.for("react.profiler"),dH=Symbol.for("react.provider"),hH=Symbol.for("react.context"),fH=Symbol.for("react.forward_ref"),mH=Symbol.for("react.suspense"),pH=Symbol.for("react.memo"),gH=Symbol.for("react.lazy"),gE=Symbol.iterator;function vH(e){return e===null||typeof e!="object"?null:(e=gE&&e[gE]||e["@@iterator"],typeof e=="function"?e:null)}var ED={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TD=Object.assign,PD={};function ch(e,t,n){this.props=e,this.context=t,this.refs=PD,this.updater=n||ED}ch.prototype.isReactComponent={};ch.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ch.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function OD(){}OD.prototype=ch.prototype;function gS(e,t,n){this.props=e,this.context=t,this.refs=PD,this.updater=n||ED}var vS=gS.prototype=new OD;vS.constructor=gS;TD(vS,ch.prototype);vS.isPureReactComponent=!0;var vE=Array.isArray,ID=Object.prototype.hasOwnProperty,yS={current:null},RD={key:!0,ref:!0,__self:!0,__source:!0};function MD(e,t,n){var r,a={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)ID.call(t,r)&&!RD.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:mp,type:e,key:s,ref:o,props:a,_owner:yS.current}}function yH(e,t){return{$$typeof:mp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function xS(e){return typeof e=="object"&&e!==null&&e.$$typeof===mp}function xH(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yE=/\/+/g;function B0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?xH(""+e.key):t.toString(36)}function cv(e,t,n,r,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case mp:case oH:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+B0(o,0):r,vE(a)?(n="",e!=null&&(n=e.replace(yE,"$&/")+"/"),cv(a,t,n,"",function(u){return u})):a!=null&&(xS(a)&&(a=yH(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(yE,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",vE(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+B0(s,l);o+=cv(s,t,n,c,a)}else if(c=vH(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+B0(s,l++),o+=cv(s,t,n,c,a);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function og(e,t,n){if(e==null)return e;var r=[],a=0;return cv(e,r,"","",function(s){return t.call(n,s,a++)}),r}function bH(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ya={current:null},uv={transition:null},wH={ReactCurrentDispatcher:ya,ReactCurrentBatchConfig:uv,ReactCurrentOwner:yS};function DD(){throw Error("act(...) is not supported in production builds of React.")}Gt.Children={map:og,forEach:function(e,t,n){og(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return og(e,function(){t++}),t},toArray:function(e){return og(e,function(t){return t})||[]},only:function(e){if(!xS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Gt.Component=ch;Gt.Fragment=lH;Gt.Profiler=uH;Gt.PureComponent=gS;Gt.StrictMode=cH;Gt.Suspense=mH;Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wH;Gt.act=DD;Gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=TD({},e.props),a=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=yS.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)ID.call(t,c)&&!RD.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:mp,type:e.type,key:a,ref:s,props:r,_owner:o}};Gt.createContext=function(e){return e={$$typeof:hH,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dH,_context:e},e.Consumer=e};Gt.createElement=MD;Gt.createFactory=function(e){var t=MD.bind(null,e);return t.type=e,t};Gt.createRef=function(){return{current:null}};Gt.forwardRef=function(e){return{$$typeof:fH,render:e}};Gt.isValidElement=xS;Gt.lazy=function(e){return{$$typeof:gH,_payload:{_status:-1,_result:e},_init:bH}};Gt.memo=function(e,t){return{$$typeof:pH,type:e,compare:t===void 0?null:t}};Gt.startTransition=function(e){var t=uv.transition;uv.transition={};try{e()}finally{uv.transition=t}};Gt.unstable_act=DD;Gt.useCallback=function(e,t){return ya.current.useCallback(e,t)};Gt.useContext=function(e){return ya.current.useContext(e)};Gt.useDebugValue=function(){};Gt.useDeferredValue=function(e){return ya.current.useDeferredValue(e)};Gt.useEffect=function(e,t){return ya.current.useEffect(e,t)};Gt.useId=function(){return ya.current.useId()};Gt.useImperativeHandle=function(e,t,n){return ya.current.useImperativeHandle(e,t,n)};Gt.useInsertionEffect=function(e,t){return ya.current.useInsertionEffect(e,t)};Gt.useLayoutEffect=function(e,t){return ya.current.useLayoutEffect(e,t)};Gt.useMemo=function(e,t){return ya.current.useMemo(e,t)};Gt.useReducer=function(e,t,n){return ya.current.useReducer(e,t,n)};Gt.useRef=function(e){return ya.current.useRef(e)};Gt.useState=function(e){return ya.current.useState(e)};Gt.useSyncExternalStore=function(e,t,n){return ya.current.useSyncExternalStore(e,t,n)};Gt.useTransition=function(){return ya.current.useTransition()};Gt.version="18.3.1";AD.exports=Gt;var p=AD.exports;const V=vn(p),bS=iH({__proto__:null,default:V},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jH=p,_H=Symbol.for("react.element"),kH=Symbol.for("react.fragment"),SH=Object.prototype.hasOwnProperty,NH=jH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CH={key:!0,ref:!0,__self:!0,__source:!0};function LD(e,t,n){var r,a={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)SH.call(t,r)&&!CH.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:_H,type:e,key:s,ref:o,props:a,_owner:NH.current}}Ex.Fragment=kH;Ex.jsx=LD;Ex.jsxs=LD;CD.exports=Ex;var i=CD.exports,$D={exports:{}},si={},FD={exports:{}},UD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,$){var A=E.length;E.push($);e:for(;0<A;){var B=A-1>>>1,R=E[B];if(0<a(R,$))E[B]=$,E[A]=R,A=B;else break e}}function n(E){return E.length===0?null:E[0]}function r(E){if(E.length===0)return null;var $=E[0],A=E.pop();if(A!==$){E[0]=A;e:for(var B=0,R=E.length,C=R>>>1;B<C;){var W=2*(B+1)-1,Q=E[W],X=W+1,Z=E[X];if(0>a(Q,A))X<R&&0>a(Z,Q)?(E[B]=Z,E[X]=A,B=X):(E[B]=Q,E[W]=A,B=W);else if(X<R&&0>a(Z,A))E[B]=Z,E[X]=A,B=X;else break e}}return $}function a(E,$){var A=E.sortIndex-$.sortIndex;return A!==0?A:E.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(E){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=E)r(u),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(u)}}function _(E){if(v=!1,b(E),!g)if(n(c)!==null)g=!0,M(k);else{var $=n(u);$!==null&&T(_,$.startTime-E)}}function k(E,$){g=!1,v&&(v=!1,y(O),O=-1),m=!0;var A=f;try{for(b($),h=n(c);h!==null&&(!(h.expirationTime>$)||E&&!S());){var B=h.callback;if(typeof B=="function"){h.callback=null,f=h.priorityLevel;var R=B(h.expirationTime<=$);$=e.unstable_now(),typeof R=="function"?h.callback=R:h===n(c)&&r(c),b($)}else r(c);h=n(c)}if(h!==null)var C=!0;else{var W=n(u);W!==null&&T(_,W.startTime-$),C=!1}return C}finally{h=null,f=A,m=!1}}var j=!1,N=null,O=-1,I=5,P=-1;function S(){return!(e.unstable_now()-P<I)}function D(){if(N!==null){var E=e.unstable_now();P=E;var $=!0;try{$=N(!0,E)}finally{$?L():(j=!1,N=null)}}else j=!1}var L;if(typeof w=="function")L=function(){w(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,F=U.port2;U.port1.onmessage=D,L=function(){F.postMessage(null)}}else L=function(){x(D,0)};function M(E){N=E,j||(j=!0,L())}function T(E,$){O=x(function(){E(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,M(k))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(E){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var A=f;f=$;try{return E()}finally{f=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,$){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var A=f;f=E;try{return $()}finally{f=A}},e.unstable_scheduleCallback=function(E,$,A){var B=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?B+A:B):A=B,E){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=A+R,E={id:d++,callback:$,priorityLevel:E,startTime:A,expirationTime:R,sortIndex:-1},A>B?(E.sortIndex=A,t(u,E),n(c)===null&&E===n(u)&&(v?(y(O),O=-1):v=!0,T(_,A-B))):(E.sortIndex=R,t(c,E),g||m||(g=!0,M(k))),E},e.unstable_shouldYield=S,e.unstable_wrapCallback=function(E){var $=f;return function(){var A=f;f=$;try{return E.apply(this,arguments)}finally{f=A}}}})(UD);FD.exports=UD;var AH=FD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EH=p,ai=AH;function Ge(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BD=new Set,Wf={};function Zc(e,t){kd(e,t),kd(e+"Capture",t)}function kd(e,t){for(Wf[e]=t,e=0;e<t.length;e++)BD.add(t[e])}var yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xj=Object.prototype.hasOwnProperty,TH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xE={},bE={};function PH(e){return Xj.call(bE,e)?!0:Xj.call(xE,e)?!1:TH.test(e)?bE[e]=!0:(xE[e]=!0,!1)}function OH(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function IH(e,t,n,r){if(t===null||typeof t>"u"||OH(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xa(e,t,n,r,a,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Wr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Wr[e]=new xa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Wr[t]=new xa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Wr[e]=new xa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Wr[e]=new xa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Wr[e]=new xa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Wr[e]=new xa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Wr[e]=new xa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Wr[e]=new xa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Wr[e]=new xa(e,5,!1,e.toLowerCase(),null,!1,!1)});var wS=/[\-:]([a-z])/g;function jS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wS,jS);Wr[t]=new xa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wS,jS);Wr[t]=new xa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wS,jS);Wr[t]=new xa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Wr[e]=new xa(e,1,!1,e.toLowerCase(),null,!1,!1)});Wr.xlinkHref=new xa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Wr[e]=new xa(e,1,!1,e.toLowerCase(),null,!0,!0)});function _S(e,t,n,r){var a=Wr.hasOwnProperty(t)?Wr[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(IH(t,n,a,r)&&(n=null),r||a===null?PH(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Eo=EH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lg=Symbol.for("react.element"),Fu=Symbol.for("react.portal"),Uu=Symbol.for("react.fragment"),kS=Symbol.for("react.strict_mode"),Jj=Symbol.for("react.profiler"),zD=Symbol.for("react.provider"),WD=Symbol.for("react.context"),SS=Symbol.for("react.forward_ref"),Qj=Symbol.for("react.suspense"),Zj=Symbol.for("react.suspense_list"),NS=Symbol.for("react.memo"),Go=Symbol.for("react.lazy"),qD=Symbol.for("react.offscreen"),wE=Symbol.iterator;function Dh(e){return e===null||typeof e!="object"?null:(e=wE&&e[wE]||e["@@iterator"],typeof e=="function"?e:null)}var Yn=Object.assign,z0;function ff(e){if(z0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z0=t&&t[1]||""}return`
`+z0+e}var W0=!1;function q0(e,t){if(!e||W0)return"";W0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=r.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{W0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ff(e):""}function RH(e){switch(e.tag){case 5:return ff(e.type);case 16:return ff("Lazy");case 13:return ff("Suspense");case 19:return ff("SuspenseList");case 0:case 2:case 15:return e=q0(e.type,!1),e;case 11:return e=q0(e.type.render,!1),e;case 1:return e=q0(e.type,!0),e;default:return""}}function e_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Uu:return"Fragment";case Fu:return"Portal";case Jj:return"Profiler";case kS:return"StrictMode";case Qj:return"Suspense";case Zj:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case WD:return(e.displayName||"Context")+".Consumer";case zD:return(e._context.displayName||"Context")+".Provider";case SS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case NS:return t=e.displayName||null,t!==null?t:e_(e.type)||"Memo";case Go:t=e._payload,e=e._init;try{return e_(e(t))}catch{}}return null}function MH(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return e_(t);case 8:return t===kS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function HD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function DH(e){var t=HD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cg(e){e._valueTracker||(e._valueTracker=DH(e))}function KD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=HD(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Rv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function t_(e,t){var n=t.checked;return Yn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function jE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=kl(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function VD(e,t){t=t.checked,t!=null&&_S(e,"checked",t,!1)}function n_(e,t){VD(e,t);var n=kl(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?r_(e,t.type,n):t.hasOwnProperty("defaultValue")&&r_(e,t.type,kl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _E(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function r_(e,t,n){(t!=="number"||Rv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var mf=Array.isArray;function td(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+kl(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function a_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ge(91));return Yn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function kE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ge(92));if(mf(n)){if(1<n.length)throw Error(Ge(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kl(n)}}function GD(e,t){var n=kl(t.value),r=kl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function SE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function YD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function i_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?YD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ug,XD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ug=ug||document.createElement("div"),ug.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ug.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LH=["Webkit","ms","Moz","O"];Object.keys(jf).forEach(function(e){LH.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jf[t]=jf[e]})});function JD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jf.hasOwnProperty(e)&&jf[e]?(""+t).trim():t+"px"}function QD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=JD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var $H=Yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function s_(e,t){if(t){if($H[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ge(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ge(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ge(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ge(62))}}function o_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l_=null;function CS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var c_=null,nd=null,rd=null;function NE(e){if(e=vp(e)){if(typeof c_!="function")throw Error(Ge(280));var t=e.stateNode;t&&(t=Rx(t),c_(e.stateNode,e.type,t))}}function ZD(e){nd?rd?rd.push(e):rd=[e]:nd=e}function eL(){if(nd){var e=nd,t=rd;if(rd=nd=null,NE(e),t)for(e=0;e<t.length;e++)NE(t[e])}}function tL(e,t){return e(t)}function nL(){}var H0=!1;function rL(e,t,n){if(H0)return e(t,n);H0=!0;try{return tL(e,t,n)}finally{H0=!1,(nd!==null||rd!==null)&&(nL(),eL())}}function Hf(e,t){var n=e.stateNode;if(n===null)return null;var r=Rx(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ge(231,t,typeof n));return n}var u_=!1;if(yo)try{var Lh={};Object.defineProperty(Lh,"passive",{get:function(){u_=!0}}),window.addEventListener("test",Lh,Lh),window.removeEventListener("test",Lh,Lh)}catch{u_=!1}function FH(e,t,n,r,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var _f=!1,Mv=null,Dv=!1,d_=null,UH={onError:function(e){_f=!0,Mv=e}};function BH(e,t,n,r,a,s,o,l,c){_f=!1,Mv=null,FH.apply(UH,arguments)}function zH(e,t,n,r,a,s,o,l,c){if(BH.apply(this,arguments),_f){if(_f){var u=Mv;_f=!1,Mv=null}else throw Error(Ge(198));Dv||(Dv=!0,d_=u)}}function eu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function aL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function CE(e){if(eu(e)!==e)throw Error(Ge(188))}function WH(e){var t=e.alternate;if(!t){if(t=eu(e),t===null)throw Error(Ge(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return CE(a),e;if(s===r)return CE(a),t;s=s.sibling}throw Error(Ge(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o)throw Error(Ge(189))}}if(n.alternate!==r)throw Error(Ge(190))}if(n.tag!==3)throw Error(Ge(188));return n.stateNode.current===n?e:t}function iL(e){return e=WH(e),e!==null?sL(e):null}function sL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sL(e);if(t!==null)return t;e=e.sibling}return null}var oL=ai.unstable_scheduleCallback,AE=ai.unstable_cancelCallback,qH=ai.unstable_shouldYield,HH=ai.unstable_requestPaint,or=ai.unstable_now,KH=ai.unstable_getCurrentPriorityLevel,AS=ai.unstable_ImmediatePriority,lL=ai.unstable_UserBlockingPriority,Lv=ai.unstable_NormalPriority,VH=ai.unstable_LowPriority,cL=ai.unstable_IdlePriority,Tx=null,Ts=null;function GH(e){if(Ts&&typeof Ts.onCommitFiberRoot=="function")try{Ts.onCommitFiberRoot(Tx,e,void 0,(e.current.flags&128)===128)}catch{}}var es=Math.clz32?Math.clz32:JH,YH=Math.log,XH=Math.LN2;function JH(e){return e>>>=0,e===0?32:31-(YH(e)/XH|0)|0}var dg=64,hg=4194304;function pf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $v(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=pf(l):(s&=o,s!==0&&(r=pf(s)))}else o=n&~a,o!==0?r=pf(o):s!==0&&(r=pf(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,s=t&-t,a>=s||a===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-es(t),a=1<<n,r|=e[n],t&=~a;return r}function QH(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZH(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-es(s),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=QH(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function h_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function uL(){var e=dg;return dg<<=1,!(dg&4194240)&&(dg=64),e}function K0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-es(t),e[t]=n}function e7(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-es(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}function ES(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-es(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bn=0;function dL(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hL,TS,fL,mL,pL,f_=!1,fg=[],hl=null,fl=null,ml=null,Kf=new Map,Vf=new Map,Jo=[],t7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EE(e,t){switch(e){case"focusin":case"focusout":hl=null;break;case"dragenter":case"dragleave":fl=null;break;case"mouseover":case"mouseout":ml=null;break;case"pointerover":case"pointerout":Kf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vf.delete(t.pointerId)}}function $h(e,t,n,r,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},t!==null&&(t=vp(t),t!==null&&TS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function n7(e,t,n,r,a){switch(t){case"focusin":return hl=$h(hl,e,t,n,r,a),!0;case"dragenter":return fl=$h(fl,e,t,n,r,a),!0;case"mouseover":return ml=$h(ml,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Kf.set(s,$h(Kf.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Vf.set(s,$h(Vf.get(s)||null,e,t,n,r,a)),!0}return!1}function gL(e){var t=mc(e.target);if(t!==null){var n=eu(t);if(n!==null){if(t=n.tag,t===13){if(t=aL(n),t!==null){e.blockedOn=t,pL(e.priority,function(){fL(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function dv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=m_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);l_=r,n.target.dispatchEvent(r),l_=null}else return t=vp(n),t!==null&&TS(t),e.blockedOn=n,!1;t.shift()}return!0}function TE(e,t,n){dv(e)&&n.delete(t)}function r7(){f_=!1,hl!==null&&dv(hl)&&(hl=null),fl!==null&&dv(fl)&&(fl=null),ml!==null&&dv(ml)&&(ml=null),Kf.forEach(TE),Vf.forEach(TE)}function Fh(e,t){e.blockedOn===t&&(e.blockedOn=null,f_||(f_=!0,ai.unstable_scheduleCallback(ai.unstable_NormalPriority,r7)))}function Gf(e){function t(a){return Fh(a,e)}if(0<fg.length){Fh(fg[0],e);for(var n=1;n<fg.length;n++){var r=fg[n];r.blockedOn===e&&(r.blockedOn=null)}}for(hl!==null&&Fh(hl,e),fl!==null&&Fh(fl,e),ml!==null&&Fh(ml,e),Kf.forEach(t),Vf.forEach(t),n=0;n<Jo.length;n++)r=Jo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Jo.length&&(n=Jo[0],n.blockedOn===null);)gL(n),n.blockedOn===null&&Jo.shift()}var ad=Eo.ReactCurrentBatchConfig,Fv=!0;function a7(e,t,n,r){var a=bn,s=ad.transition;ad.transition=null;try{bn=1,PS(e,t,n,r)}finally{bn=a,ad.transition=s}}function i7(e,t,n,r){var a=bn,s=ad.transition;ad.transition=null;try{bn=4,PS(e,t,n,r)}finally{bn=a,ad.transition=s}}function PS(e,t,n,r){if(Fv){var a=m_(e,t,n,r);if(a===null)nw(e,t,r,Uv,n),EE(e,r);else if(n7(a,e,t,n,r))r.stopPropagation();else if(EE(e,r),t&4&&-1<t7.indexOf(e)){for(;a!==null;){var s=vp(a);if(s!==null&&hL(s),s=m_(e,t,n,r),s===null&&nw(e,t,r,Uv,n),s===a)break;a=s}a!==null&&r.stopPropagation()}else nw(e,t,r,null,n)}}var Uv=null;function m_(e,t,n,r){if(Uv=null,e=CS(r),e=mc(e),e!==null)if(t=eu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=aL(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Uv=e,null}function vL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KH()){case AS:return 1;case lL:return 4;case Lv:case VH:return 16;case cL:return 536870912;default:return 16}default:return 16}}var ll=null,OS=null,hv=null;function yL(){if(hv)return hv;var e,t=OS,n=t.length,r,a="value"in ll?ll.value:ll.textContent,s=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[s-r];r++);return hv=a.slice(e,1<r?1-r:void 0)}function fv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mg(){return!0}function PE(){return!1}function oi(e){function t(n,r,a,s,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?mg:PE,this.isPropagationStopped=PE,this}return Yn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mg)},persist:function(){},isPersistent:mg}),t}var uh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},IS=oi(uh),gp=Yn({},uh,{view:0,detail:0}),s7=oi(gp),V0,G0,Uh,Px=Yn({},gp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:RS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Uh&&(Uh&&e.type==="mousemove"?(V0=e.screenX-Uh.screenX,G0=e.screenY-Uh.screenY):G0=V0=0,Uh=e),V0)},movementY:function(e){return"movementY"in e?e.movementY:G0}}),OE=oi(Px),o7=Yn({},Px,{dataTransfer:0}),l7=oi(o7),c7=Yn({},gp,{relatedTarget:0}),Y0=oi(c7),u7=Yn({},uh,{animationName:0,elapsedTime:0,pseudoElement:0}),d7=oi(u7),h7=Yn({},uh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),f7=oi(h7),m7=Yn({},uh,{data:0}),IE=oi(m7),p7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},g7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y7(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=v7[e])?!!t[e]:!1}function RS(){return y7}var x7=Yn({},gp,{key:function(e){if(e.key){var t=p7[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?g7[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:RS,charCode:function(e){return e.type==="keypress"?fv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),b7=oi(x7),w7=Yn({},Px,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RE=oi(w7),j7=Yn({},gp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:RS}),_7=oi(j7),k7=Yn({},uh,{propertyName:0,elapsedTime:0,pseudoElement:0}),S7=oi(k7),N7=Yn({},Px,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),C7=oi(N7),A7=[9,13,27,32],MS=yo&&"CompositionEvent"in window,kf=null;yo&&"documentMode"in document&&(kf=document.documentMode);var E7=yo&&"TextEvent"in window&&!kf,xL=yo&&(!MS||kf&&8<kf&&11>=kf),ME=" ",DE=!1;function bL(e,t){switch(e){case"keyup":return A7.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bu=!1;function T7(e,t){switch(e){case"compositionend":return wL(t);case"keypress":return t.which!==32?null:(DE=!0,ME);case"textInput":return e=t.data,e===ME&&DE?null:e;default:return null}}function P7(e,t){if(Bu)return e==="compositionend"||!MS&&bL(e,t)?(e=yL(),hv=OS=ll=null,Bu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xL&&t.locale!=="ko"?null:t.data;default:return null}}var O7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!O7[e.type]:t==="textarea"}function jL(e,t,n,r){ZD(r),t=Bv(t,"onChange"),0<t.length&&(n=new IS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Sf=null,Yf=null;function I7(e){IL(e,0)}function Ox(e){var t=qu(e);if(KD(t))return e}function R7(e,t){if(e==="change")return t}var _L=!1;if(yo){var X0;if(yo){var J0="oninput"in document;if(!J0){var $E=document.createElement("div");$E.setAttribute("oninput","return;"),J0=typeof $E.oninput=="function"}X0=J0}else X0=!1;_L=X0&&(!document.documentMode||9<document.documentMode)}function FE(){Sf&&(Sf.detachEvent("onpropertychange",kL),Yf=Sf=null)}function kL(e){if(e.propertyName==="value"&&Ox(Yf)){var t=[];jL(t,Yf,e,CS(e)),rL(I7,t)}}function M7(e,t,n){e==="focusin"?(FE(),Sf=t,Yf=n,Sf.attachEvent("onpropertychange",kL)):e==="focusout"&&FE()}function D7(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ox(Yf)}function L7(e,t){if(e==="click")return Ox(t)}function $7(e,t){if(e==="input"||e==="change")return Ox(t)}function F7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var is=typeof Object.is=="function"?Object.is:F7;function Xf(e,t){if(is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Xj.call(t,a)||!is(e[a],t[a]))return!1}return!0}function UE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function BE(e,t){var n=UE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=UE(n)}}function SL(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?SL(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function NL(){for(var e=window,t=Rv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Rv(e.document)}return t}function DS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function U7(e){var t=NL(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&SL(n.ownerDocument.documentElement,n)){if(r!==null&&DS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=r.end===void 0?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=BE(n,s);var o=BE(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var B7=yo&&"documentMode"in document&&11>=document.documentMode,zu=null,p_=null,Nf=null,g_=!1;function zE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;g_||zu==null||zu!==Rv(r)||(r=zu,"selectionStart"in r&&DS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Nf&&Xf(Nf,r)||(Nf=r,r=Bv(p_,"onSelect"),0<r.length&&(t=new IS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=zu)))}function pg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Wu={animationend:pg("Animation","AnimationEnd"),animationiteration:pg("Animation","AnimationIteration"),animationstart:pg("Animation","AnimationStart"),transitionend:pg("Transition","TransitionEnd")},Q0={},CL={};yo&&(CL=document.createElement("div").style,"AnimationEvent"in window||(delete Wu.animationend.animation,delete Wu.animationiteration.animation,delete Wu.animationstart.animation),"TransitionEvent"in window||delete Wu.transitionend.transition);function Ix(e){if(Q0[e])return Q0[e];if(!Wu[e])return e;var t=Wu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in CL)return Q0[e]=t[n];return e}var AL=Ix("animationend"),EL=Ix("animationiteration"),TL=Ix("animationstart"),PL=Ix("transitionend"),OL=new Map,WE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rl(e,t){OL.set(e,t),Zc(t,[e])}for(var Z0=0;Z0<WE.length;Z0++){var ew=WE[Z0],z7=ew.toLowerCase(),W7=ew[0].toUpperCase()+ew.slice(1);Rl(z7,"on"+W7)}Rl(AL,"onAnimationEnd");Rl(EL,"onAnimationIteration");Rl(TL,"onAnimationStart");Rl("dblclick","onDoubleClick");Rl("focusin","onFocus");Rl("focusout","onBlur");Rl(PL,"onTransitionEnd");kd("onMouseEnter",["mouseout","mouseover"]);kd("onMouseLeave",["mouseout","mouseover"]);kd("onPointerEnter",["pointerout","pointerover"]);kd("onPointerLeave",["pointerout","pointerover"]);Zc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q7=new Set("cancel close invalid load scroll toggle".split(" ").concat(gf));function qE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,zH(r,t,void 0,e),e.currentTarget=null}function IL(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;qE(a,l,u),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;qE(a,l,u),s=c}}}if(Dv)throw e=d_,Dv=!1,d_=null,e}function Dn(e,t){var n=t[w_];n===void 0&&(n=t[w_]=new Set);var r=e+"__bubble";n.has(r)||(RL(t,e,2,!1),n.add(r))}function tw(e,t,n){var r=0;t&&(r|=4),RL(n,e,r,t)}var gg="_reactListening"+Math.random().toString(36).slice(2);function Jf(e){if(!e[gg]){e[gg]=!0,BD.forEach(function(n){n!=="selectionchange"&&(q7.has(n)||tw(n,!1,e),tw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gg]||(t[gg]=!0,tw("selectionchange",!1,t))}}function RL(e,t,n,r){switch(vL(t)){case 1:var a=a7;break;case 4:a=i7;break;default:a=PS}n=a.bind(null,t,n,e),a=void 0,!u_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function nw(e,t,n,r,a){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=mc(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}rL(function(){var u=s,d=CS(n),h=[];e:{var f=OL.get(e);if(f!==void 0){var m=IS,g=e;switch(e){case"keypress":if(fv(n)===0)break e;case"keydown":case"keyup":m=b7;break;case"focusin":g="focus",m=Y0;break;case"focusout":g="blur",m=Y0;break;case"beforeblur":case"afterblur":m=Y0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=OE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=l7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_7;break;case AL:case EL:case TL:m=d7;break;case PL:m=S7;break;case"scroll":m=s7;break;case"wheel":m=C7;break;case"copy":case"cut":case"paste":m=f7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=RE}var v=(t&4)!==0,x=!v&&e==="scroll",y=v?f!==null?f+"Capture":null:f;v=[];for(var w=u,b;w!==null;){b=w;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,y!==null&&(_=Hf(w,y),_!=null&&v.push(Qf(w,_,b)))),x)break;w=w.return}0<v.length&&(f=new m(f,g,null,n,d),h.push({event:f,listeners:v}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==l_&&(g=n.relatedTarget||n.fromElement)&&(mc(g)||g[xo]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?mc(g):null,g!==null&&(x=eu(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=OE,_="onMouseLeave",y="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(v=RE,_="onPointerLeave",y="onPointerEnter",w="pointer"),x=m==null?f:qu(m),b=g==null?f:qu(g),f=new v(_,w+"leave",m,n,d),f.target=x,f.relatedTarget=b,_=null,mc(d)===u&&(v=new v(y,w+"enter",g,n,d),v.target=b,v.relatedTarget=x,_=v),x=_,m&&g)t:{for(v=m,y=g,w=0,b=v;b;b=pu(b))w++;for(b=0,_=y;_;_=pu(_))b++;for(;0<w-b;)v=pu(v),w--;for(;0<b-w;)y=pu(y),b--;for(;w--;){if(v===y||y!==null&&v===y.alternate)break t;v=pu(v),y=pu(y)}v=null}else v=null;m!==null&&HE(h,f,m,v,!1),g!==null&&x!==null&&HE(h,x,g,v,!0)}}e:{if(f=u?qu(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var k=R7;else if(LE(f))if(_L)k=$7;else{k=D7;var j=M7}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=L7);if(k&&(k=k(e,u))){jL(h,k,n,d);break e}j&&j(e,f,u),e==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&r_(f,"number",f.value)}switch(j=u?qu(u):window,e){case"focusin":(LE(j)||j.contentEditable==="true")&&(zu=j,p_=u,Nf=null);break;case"focusout":Nf=p_=zu=null;break;case"mousedown":g_=!0;break;case"contextmenu":case"mouseup":case"dragend":g_=!1,zE(h,n,d);break;case"selectionchange":if(B7)break;case"keydown":case"keyup":zE(h,n,d)}var N;if(MS)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Bu?bL(e,n)&&(O="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(xL&&n.locale!=="ko"&&(Bu||O!=="onCompositionStart"?O==="onCompositionEnd"&&Bu&&(N=yL()):(ll=d,OS="value"in ll?ll.value:ll.textContent,Bu=!0)),j=Bv(u,O),0<j.length&&(O=new IE(O,e,null,n,d),h.push({event:O,listeners:j}),N?O.data=N:(N=wL(n),N!==null&&(O.data=N)))),(N=E7?T7(e,n):P7(e,n))&&(u=Bv(u,"onBeforeInput"),0<u.length&&(d=new IE("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=N))}IL(h,t)})}function Qf(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bv(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Hf(e,n),s!=null&&r.unshift(Qf(e,s,a)),s=Hf(e,t),s!=null&&r.push(Qf(e,s,a))),e=e.return}return r}function pu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function HE(e,t,n,r,a){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,a?(c=Hf(n,s),c!=null&&o.unshift(Qf(n,c,l))):a||(c=Hf(n,s),c!=null&&o.push(Qf(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var H7=/\r\n?/g,K7=/\u0000|\uFFFD/g;function KE(e){return(typeof e=="string"?e:""+e).replace(H7,`
`).replace(K7,"")}function vg(e,t,n){if(t=KE(t),KE(e)!==t&&n)throw Error(Ge(425))}function zv(){}var v_=null,y_=null;function x_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var b_=typeof setTimeout=="function"?setTimeout:void 0,V7=typeof clearTimeout=="function"?clearTimeout:void 0,VE=typeof Promise=="function"?Promise:void 0,G7=typeof queueMicrotask=="function"?queueMicrotask:typeof VE<"u"?function(e){return VE.resolve(null).then(e).catch(Y7)}:b_;function Y7(e){setTimeout(function(){throw e})}function rw(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Gf(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Gf(t)}function pl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function GE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var dh=Math.random().toString(36).slice(2),ws="__reactFiber$"+dh,Zf="__reactProps$"+dh,xo="__reactContainer$"+dh,w_="__reactEvents$"+dh,X7="__reactListeners$"+dh,J7="__reactHandles$"+dh;function mc(e){var t=e[ws];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xo]||n[ws]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=GE(e);e!==null;){if(n=e[ws])return n;e=GE(e)}return t}e=n,n=e.parentNode}return null}function vp(e){return e=e[ws]||e[xo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ge(33))}function Rx(e){return e[Zf]||null}var j_=[],Hu=-1;function Ml(e){return{current:e}}function Fn(e){0>Hu||(e.current=j_[Hu],j_[Hu]=null,Hu--)}function On(e,t){Hu++,j_[Hu]=e.current,e.current=t}var Sl={},ra=Ml(Sl),Da=Ml(!1),Oc=Sl;function Sd(e,t){var n=e.type.contextTypes;if(!n)return Sl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in n)a[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function La(e){return e=e.childContextTypes,e!=null}function Wv(){Fn(Da),Fn(ra)}function YE(e,t,n){if(ra.current!==Sl)throw Error(Ge(168));On(ra,t),On(Da,n)}function ML(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Ge(108,MH(e)||"Unknown",a));return Yn({},n,r)}function qv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sl,Oc=ra.current,On(ra,e),On(Da,Da.current),!0}function XE(e,t,n){var r=e.stateNode;if(!r)throw Error(Ge(169));n?(e=ML(e,t,Oc),r.__reactInternalMemoizedMergedChildContext=e,Fn(Da),Fn(ra),On(ra,e)):Fn(Da),On(Da,n)}var Zs=null,Mx=!1,aw=!1;function DL(e){Zs===null?Zs=[e]:Zs.push(e)}function Q7(e){Mx=!0,DL(e)}function Dl(){if(!aw&&Zs!==null){aw=!0;var e=0,t=bn;try{var n=Zs;for(bn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Zs=null,Mx=!1}catch(a){throw Zs!==null&&(Zs=Zs.slice(e+1)),oL(AS,Dl),a}finally{bn=t,aw=!1}}return null}var Ku=[],Vu=0,Hv=null,Kv=0,yi=[],xi=0,Ic=null,ro=1,ao="";function tc(e,t){Ku[Vu++]=Kv,Ku[Vu++]=Hv,Hv=e,Kv=t}function LL(e,t,n){yi[xi++]=ro,yi[xi++]=ao,yi[xi++]=Ic,Ic=e;var r=ro;e=ao;var a=32-es(r)-1;r&=~(1<<a),n+=1;var s=32-es(t)+a;if(30<s){var o=a-a%5;s=(r&(1<<o)-1).toString(32),r>>=o,a-=o,ro=1<<32-es(t)+a|n<<a|r,ao=s+e}else ro=1<<s|n<<a|r,ao=e}function LS(e){e.return!==null&&(tc(e,1),LL(e,1,0))}function $S(e){for(;e===Hv;)Hv=Ku[--Vu],Ku[Vu]=null,Kv=Ku[--Vu],Ku[Vu]=null;for(;e===Ic;)Ic=yi[--xi],yi[xi]=null,ao=yi[--xi],yi[xi]=null,ro=yi[--xi],yi[xi]=null}var ti=null,ei=null,Bn=!1,Yi=null;function $L(e,t){var n=_i(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function JE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ti=e,ei=pl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ti=e,ei=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ic!==null?{id:ro,overflow:ao}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=_i(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ti=e,ei=null,!0):!1;default:return!1}}function __(e){return(e.mode&1)!==0&&(e.flags&128)===0}function k_(e){if(Bn){var t=ei;if(t){var n=t;if(!JE(e,t)){if(__(e))throw Error(Ge(418));t=pl(n.nextSibling);var r=ti;t&&JE(e,t)?$L(r,n):(e.flags=e.flags&-4097|2,Bn=!1,ti=e)}}else{if(__(e))throw Error(Ge(418));e.flags=e.flags&-4097|2,Bn=!1,ti=e}}}function QE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ti=e}function yg(e){if(e!==ti)return!1;if(!Bn)return QE(e),Bn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!x_(e.type,e.memoizedProps)),t&&(t=ei)){if(__(e))throw FL(),Error(Ge(418));for(;t;)$L(e,t),t=pl(t.nextSibling)}if(QE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ge(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ei=pl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ei=null}}else ei=ti?pl(e.stateNode.nextSibling):null;return!0}function FL(){for(var e=ei;e;)e=pl(e.nextSibling)}function Nd(){ei=ti=null,Bn=!1}function FS(e){Yi===null?Yi=[e]:Yi.push(e)}var Z7=Eo.ReactCurrentBatchConfig;function Bh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ge(309));var r=n.stateNode}if(!r)throw Error(Ge(147,e));var a=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Ge(284));if(!n._owner)throw Error(Ge(290,e))}return e}function xg(e,t){throw e=Object.prototype.toString.call(t),Error(Ge(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ZE(e){var t=e._init;return t(e._payload)}function UL(e){function t(y,w){if(e){var b=y.deletions;b===null?(y.deletions=[w],y.flags|=16):b.push(w)}}function n(y,w){if(!e)return null;for(;w!==null;)t(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function a(y,w){return y=xl(y,w),y.index=0,y.sibling=null,y}function s(y,w,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<w?(y.flags|=2,w):b):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,w,b,_){return w===null||w.tag!==6?(w=dw(b,y.mode,_),w.return=y,w):(w=a(w,b),w.return=y,w)}function c(y,w,b,_){var k=b.type;return k===Uu?d(y,w,b.props.children,_,b.key):w!==null&&(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Go&&ZE(k)===w.type)?(_=a(w,b.props),_.ref=Bh(y,w,b),_.return=y,_):(_=bv(b.type,b.key,b.props,null,y.mode,_),_.ref=Bh(y,w,b),_.return=y,_)}function u(y,w,b,_){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=hw(b,y.mode,_),w.return=y,w):(w=a(w,b.children||[]),w.return=y,w)}function d(y,w,b,_,k){return w===null||w.tag!==7?(w=Ac(b,y.mode,_,k),w.return=y,w):(w=a(w,b),w.return=y,w)}function h(y,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=dw(""+w,y.mode,b),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case lg:return b=bv(w.type,w.key,w.props,null,y.mode,b),b.ref=Bh(y,null,w),b.return=y,b;case Fu:return w=hw(w,y.mode,b),w.return=y,w;case Go:var _=w._init;return h(y,_(w._payload),b)}if(mf(w)||Dh(w))return w=Ac(w,y.mode,b,null),w.return=y,w;xg(y,w)}return null}function f(y,w,b,_){var k=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:l(y,w,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case lg:return b.key===k?c(y,w,b,_):null;case Fu:return b.key===k?u(y,w,b,_):null;case Go:return k=b._init,f(y,w,k(b._payload),_)}if(mf(b)||Dh(b))return k!==null?null:d(y,w,b,_,null);xg(y,b)}return null}function m(y,w,b,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(b)||null,l(w,y,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case lg:return y=y.get(_.key===null?b:_.key)||null,c(w,y,_,k);case Fu:return y=y.get(_.key===null?b:_.key)||null,u(w,y,_,k);case Go:var j=_._init;return m(y,w,b,j(_._payload),k)}if(mf(_)||Dh(_))return y=y.get(b)||null,d(w,y,_,k,null);xg(w,_)}return null}function g(y,w,b,_){for(var k=null,j=null,N=w,O=w=0,I=null;N!==null&&O<b.length;O++){N.index>O?(I=N,N=null):I=N.sibling;var P=f(y,N,b[O],_);if(P===null){N===null&&(N=I);break}e&&N&&P.alternate===null&&t(y,N),w=s(P,w,O),j===null?k=P:j.sibling=P,j=P,N=I}if(O===b.length)return n(y,N),Bn&&tc(y,O),k;if(N===null){for(;O<b.length;O++)N=h(y,b[O],_),N!==null&&(w=s(N,w,O),j===null?k=N:j.sibling=N,j=N);return Bn&&tc(y,O),k}for(N=r(y,N);O<b.length;O++)I=m(N,y,O,b[O],_),I!==null&&(e&&I.alternate!==null&&N.delete(I.key===null?O:I.key),w=s(I,w,O),j===null?k=I:j.sibling=I,j=I);return e&&N.forEach(function(S){return t(y,S)}),Bn&&tc(y,O),k}function v(y,w,b,_){var k=Dh(b);if(typeof k!="function")throw Error(Ge(150));if(b=k.call(b),b==null)throw Error(Ge(151));for(var j=k=null,N=w,O=w=0,I=null,P=b.next();N!==null&&!P.done;O++,P=b.next()){N.index>O?(I=N,N=null):I=N.sibling;var S=f(y,N,P.value,_);if(S===null){N===null&&(N=I);break}e&&N&&S.alternate===null&&t(y,N),w=s(S,w,O),j===null?k=S:j.sibling=S,j=S,N=I}if(P.done)return n(y,N),Bn&&tc(y,O),k;if(N===null){for(;!P.done;O++,P=b.next())P=h(y,P.value,_),P!==null&&(w=s(P,w,O),j===null?k=P:j.sibling=P,j=P);return Bn&&tc(y,O),k}for(N=r(y,N);!P.done;O++,P=b.next())P=m(N,y,O,P.value,_),P!==null&&(e&&P.alternate!==null&&N.delete(P.key===null?O:P.key),w=s(P,w,O),j===null?k=P:j.sibling=P,j=P);return e&&N.forEach(function(D){return t(y,D)}),Bn&&tc(y,O),k}function x(y,w,b,_){if(typeof b=="object"&&b!==null&&b.type===Uu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case lg:e:{for(var k=b.key,j=w;j!==null;){if(j.key===k){if(k=b.type,k===Uu){if(j.tag===7){n(y,j.sibling),w=a(j,b.props.children),w.return=y,y=w;break e}}else if(j.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Go&&ZE(k)===j.type){n(y,j.sibling),w=a(j,b.props),w.ref=Bh(y,j,b),w.return=y,y=w;break e}n(y,j);break}else t(y,j);j=j.sibling}b.type===Uu?(w=Ac(b.props.children,y.mode,_,b.key),w.return=y,y=w):(_=bv(b.type,b.key,b.props,null,y.mode,_),_.ref=Bh(y,w,b),_.return=y,y=_)}return o(y);case Fu:e:{for(j=b.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(y,w.sibling),w=a(w,b.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else t(y,w);w=w.sibling}w=hw(b,y.mode,_),w.return=y,y=w}return o(y);case Go:return j=b._init,x(y,w,j(b._payload),_)}if(mf(b))return g(y,w,b,_);if(Dh(b))return v(y,w,b,_);xg(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(y,w.sibling),w=a(w,b),w.return=y,y=w):(n(y,w),w=dw(b,y.mode,_),w.return=y,y=w),o(y)):n(y,w)}return x}var Cd=UL(!0),BL=UL(!1),Vv=Ml(null),Gv=null,Gu=null,US=null;function BS(){US=Gu=Gv=null}function zS(e){var t=Vv.current;Fn(Vv),e._currentValue=t}function S_(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function id(e,t){Gv=e,US=Gu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ia=!0),e.firstContext=null)}function Ei(e){var t=e._currentValue;if(US!==e)if(e={context:e,memoizedValue:t,next:null},Gu===null){if(Gv===null)throw Error(Ge(308));Gu=e,Gv.dependencies={lanes:0,firstContext:e}}else Gu=Gu.next=e;return t}var pc=null;function WS(e){pc===null?pc=[e]:pc.push(e)}function zL(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,WS(t)):(n.next=a.next,a.next=n),t.interleaved=n,bo(e,r)}function bo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yo=!1;function qS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WL(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gl(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,rn&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,bo(e,n)}return a=r.interleaved,a===null?(t.next=t,WS(r)):(t.next=a.next,a.next=t),r.interleaved=t,bo(e,n)}function mv(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ES(e,n)}}function eT(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?a=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?a=s=t:s=s.next=t}else a=s=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yv(e,t,n,r){var a=e.updateQueue;Yo=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var h=a.baseState;o=0,d=u=c=null,l=s;do{var f=l.lane,m=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(f=t,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(m,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,f=typeof g=="function"?g.call(m,h,f):g,f==null)break e;h=Yn({},h,f);break e;case 2:Yo=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(d===null&&(c=h),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else s===null&&(a.shared.lanes=0);Mc|=o,e.lanes=o,e.memoizedState=h}}function tT(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Ge(191,a));a.call(r)}}}var yp={},Ps=Ml(yp),em=Ml(yp),tm=Ml(yp);function gc(e){if(e===yp)throw Error(Ge(174));return e}function HS(e,t){switch(On(tm,t),On(em,e),On(Ps,yp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:i_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=i_(t,e)}Fn(Ps),On(Ps,t)}function Ad(){Fn(Ps),Fn(em),Fn(tm)}function qL(e){gc(tm.current);var t=gc(Ps.current),n=i_(t,e.type);t!==n&&(On(em,e),On(Ps,n))}function KS(e){em.current===e&&(Fn(Ps),Fn(em))}var Vn=Ml(0);function Xv(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var iw=[];function VS(){for(var e=0;e<iw.length;e++)iw[e]._workInProgressVersionPrimary=null;iw.length=0}var pv=Eo.ReactCurrentDispatcher,sw=Eo.ReactCurrentBatchConfig,Rc=0,Gn=null,br=null,Er=null,Jv=!1,Cf=!1,nm=0,eK=0;function Yr(){throw Error(Ge(321))}function GS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!is(e[n],t[n]))return!1;return!0}function YS(e,t,n,r,a,s){if(Rc=s,Gn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pv.current=e===null||e.memoizedState===null?aK:iK,e=n(r,a),Cf){s=0;do{if(Cf=!1,nm=0,25<=s)throw Error(Ge(301));s+=1,Er=br=null,t.updateQueue=null,pv.current=sK,e=n(r,a)}while(Cf)}if(pv.current=Qv,t=br!==null&&br.next!==null,Rc=0,Er=br=Gn=null,Jv=!1,t)throw Error(Ge(300));return e}function XS(){var e=nm!==0;return nm=0,e}function ps(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?Gn.memoizedState=Er=e:Er=Er.next=e,Er}function Ti(){if(br===null){var e=Gn.alternate;e=e!==null?e.memoizedState:null}else e=br.next;var t=Er===null?Gn.memoizedState:Er.next;if(t!==null)Er=t,br=e;else{if(e===null)throw Error(Ge(310));br=e,e={memoizedState:br.memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},Er===null?Gn.memoizedState=Er=e:Er=Er.next=e}return Er}function rm(e,t){return typeof t=="function"?t(e):t}function ow(e){var t=Ti(),n=t.queue;if(n===null)throw Error(Ge(311));n.lastRenderedReducer=e;var r=br,a=r.baseQueue,s=n.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}r.baseQueue=a=s,n.pending=null}if(a!==null){s=a.next,r=r.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((Rc&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Gn.lanes|=d,Mc|=d}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=l,is(r,t.memoizedState)||(Ia=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do s=a.lane,Gn.lanes|=s,Mc|=s,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function lw(e){var t=Ti(),n=t.queue;if(n===null)throw Error(Ge(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do s=e(s,o.action),o=o.next;while(o!==a);is(s,t.memoizedState)||(Ia=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function HL(){}function KL(e,t){var n=Gn,r=Ti(),a=t(),s=!is(r.memoizedState,a);if(s&&(r.memoizedState=a,Ia=!0),r=r.queue,JS(YL.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Er!==null&&Er.memoizedState.tag&1){if(n.flags|=2048,am(9,GL.bind(null,n,r,a,t),void 0,null),Pr===null)throw Error(Ge(349));Rc&30||VL(n,t,a)}return a}function VL(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Gn.updateQueue,t===null?(t={lastEffect:null,stores:null},Gn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function GL(e,t,n,r){t.value=n,t.getSnapshot=r,XL(t)&&JL(e)}function YL(e,t,n){return n(function(){XL(t)&&JL(e)})}function XL(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!is(e,n)}catch{return!0}}function JL(e){var t=bo(e,1);t!==null&&ts(t,e,1,-1)}function nT(e){var t=ps();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rm,lastRenderedState:e},t.queue=e,e=e.dispatch=rK.bind(null,Gn,e),[t.memoizedState,e]}function am(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Gn.updateQueue,t===null?(t={lastEffect:null,stores:null},Gn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function QL(){return Ti().memoizedState}function gv(e,t,n,r){var a=ps();Gn.flags|=e,a.memoizedState=am(1|t,n,void 0,r===void 0?null:r)}function Dx(e,t,n,r){var a=Ti();r=r===void 0?null:r;var s=void 0;if(br!==null){var o=br.memoizedState;if(s=o.destroy,r!==null&&GS(r,o.deps)){a.memoizedState=am(t,n,s,r);return}}Gn.flags|=e,a.memoizedState=am(1|t,n,s,r)}function rT(e,t){return gv(8390656,8,e,t)}function JS(e,t){return Dx(2048,8,e,t)}function ZL(e,t){return Dx(4,2,e,t)}function e$(e,t){return Dx(4,4,e,t)}function t$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function n$(e,t,n){return n=n!=null?n.concat([e]):null,Dx(4,4,t$.bind(null,t,e),n)}function QS(){}function r$(e,t){var n=Ti();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&GS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function a$(e,t){var n=Ti();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&GS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function i$(e,t,n){return Rc&21?(is(n,t)||(n=uL(),Gn.lanes|=n,Mc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ia=!0),e.memoizedState=n)}function tK(e,t){var n=bn;bn=n!==0&&4>n?n:4,e(!0);var r=sw.transition;sw.transition={};try{e(!1),t()}finally{bn=n,sw.transition=r}}function s$(){return Ti().memoizedState}function nK(e,t,n){var r=yl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},o$(e))l$(t,n);else if(n=zL(e,t,n,r),n!==null){var a=va();ts(n,e,r,a),c$(n,t,r)}}function rK(e,t,n){var r=yl(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(o$(e))l$(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(a.hasEagerState=!0,a.eagerState=l,is(l,o)){var c=t.interleaved;c===null?(a.next=a,WS(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=zL(e,t,a,r),n!==null&&(a=va(),ts(n,e,r,a),c$(n,t,r))}}function o$(e){var t=e.alternate;return e===Gn||t!==null&&t===Gn}function l$(e,t){Cf=Jv=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function c$(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ES(e,n)}}var Qv={readContext:Ei,useCallback:Yr,useContext:Yr,useEffect:Yr,useImperativeHandle:Yr,useInsertionEffect:Yr,useLayoutEffect:Yr,useMemo:Yr,useReducer:Yr,useRef:Yr,useState:Yr,useDebugValue:Yr,useDeferredValue:Yr,useTransition:Yr,useMutableSource:Yr,useSyncExternalStore:Yr,useId:Yr,unstable_isNewReconciler:!1},aK={readContext:Ei,useCallback:function(e,t){return ps().memoizedState=[e,t===void 0?null:t],e},useContext:Ei,useEffect:rT,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,gv(4194308,4,t$.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gv(4194308,4,e,t)},useInsertionEffect:function(e,t){return gv(4,2,e,t)},useMemo:function(e,t){var n=ps();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ps();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=nK.bind(null,Gn,e),[r.memoizedState,e]},useRef:function(e){var t=ps();return e={current:e},t.memoizedState=e},useState:nT,useDebugValue:QS,useDeferredValue:function(e){return ps().memoizedState=e},useTransition:function(){var e=nT(!1),t=e[0];return e=tK.bind(null,e[1]),ps().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Gn,a=ps();if(Bn){if(n===void 0)throw Error(Ge(407));n=n()}else{if(n=t(),Pr===null)throw Error(Ge(349));Rc&30||VL(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,rT(YL.bind(null,r,s,e),[e]),r.flags|=2048,am(9,GL.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=ps(),t=Pr.identifierPrefix;if(Bn){var n=ao,r=ro;n=(r&~(1<<32-es(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=nm++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=eK++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iK={readContext:Ei,useCallback:r$,useContext:Ei,useEffect:JS,useImperativeHandle:n$,useInsertionEffect:ZL,useLayoutEffect:e$,useMemo:a$,useReducer:ow,useRef:QL,useState:function(){return ow(rm)},useDebugValue:QS,useDeferredValue:function(e){var t=Ti();return i$(t,br.memoizedState,e)},useTransition:function(){var e=ow(rm)[0],t=Ti().memoizedState;return[e,t]},useMutableSource:HL,useSyncExternalStore:KL,useId:s$,unstable_isNewReconciler:!1},sK={readContext:Ei,useCallback:r$,useContext:Ei,useEffect:JS,useImperativeHandle:n$,useInsertionEffect:ZL,useLayoutEffect:e$,useMemo:a$,useReducer:lw,useRef:QL,useState:function(){return lw(rm)},useDebugValue:QS,useDeferredValue:function(e){var t=Ti();return br===null?t.memoizedState=e:i$(t,br.memoizedState,e)},useTransition:function(){var e=lw(rm)[0],t=Ti().memoizedState;return[e,t]},useMutableSource:HL,useSyncExternalStore:KL,useId:s$,unstable_isNewReconciler:!1};function Bi(e,t){if(e&&e.defaultProps){t=Yn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function N_(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Yn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Lx={isMounted:function(e){return(e=e._reactInternals)?eu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=va(),a=yl(e),s=uo(r,a);s.payload=t,n!=null&&(s.callback=n),t=gl(e,s,a),t!==null&&(ts(t,e,a,r),mv(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=va(),a=yl(e),s=uo(r,a);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=gl(e,s,a),t!==null&&(ts(t,e,a,r),mv(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=va(),r=yl(e),a=uo(n,r);a.tag=2,t!=null&&(a.callback=t),t=gl(e,a,r),t!==null&&(ts(t,e,r,n),mv(t,e,r))}};function aT(e,t,n,r,a,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Xf(n,r)||!Xf(a,s):!0}function u$(e,t,n){var r=!1,a=Sl,s=t.contextType;return typeof s=="object"&&s!==null?s=Ei(s):(a=La(t)?Oc:ra.current,r=t.contextTypes,s=(r=r!=null)?Sd(e,a):Sl),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lx,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function iT(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Lx.enqueueReplaceState(t,t.state,null)}function C_(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},qS(e);var s=t.contextType;typeof s=="object"&&s!==null?a.context=Ei(s):(s=La(t)?Oc:ra.current,a.context=Sd(e,s)),a.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(N_(e,t,s,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Lx.enqueueReplaceState(a,a.state,null),Yv(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ed(e,t){try{var n="",r=t;do n+=RH(r),r=r.return;while(r);var a=n}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:a,digest:null}}function cw(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function A_(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var oK=typeof WeakMap=="function"?WeakMap:Map;function d$(e,t,n){n=uo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ey||(ey=!0,$_=r),A_(e,t)},n}function h$(e,t,n){n=uo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){A_(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){A_(e,t),typeof r!="function"&&(vl===null?vl=new Set([this]):vl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function sT(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new oK;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=wK.bind(null,e,t,n),t.then(e,e))}function oT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lT(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=uo(-1,1),t.tag=2,gl(n,t,1))),n.lanes|=1),e)}var lK=Eo.ReactCurrentOwner,Ia=!1;function da(e,t,n,r){t.child=e===null?BL(t,null,n,r):Cd(t,e.child,n,r)}function cT(e,t,n,r,a){n=n.render;var s=t.ref;return id(t,a),r=YS(e,t,n,r,s,a),n=XS(),e!==null&&!Ia?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wo(e,t,a)):(Bn&&n&&LS(t),t.flags|=1,da(e,t,r,a),t.child)}function uT(e,t,n,r,a){if(e===null){var s=n.type;return typeof s=="function"&&!sN(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,f$(e,t,s,r,a)):(e=bv(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&a)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Xf,n(o,r)&&e.ref===t.ref)return wo(e,t,a)}return t.flags|=1,e=xl(s,r),e.ref=t.ref,e.return=t,t.child=e}function f$(e,t,n,r,a){if(e!==null){var s=e.memoizedProps;if(Xf(s,r)&&e.ref===t.ref)if(Ia=!1,t.pendingProps=r=s,(e.lanes&a)!==0)e.flags&131072&&(Ia=!0);else return t.lanes=e.lanes,wo(e,t,a)}return E_(e,t,n,r,a)}function m$(e,t,n){var r=t.pendingProps,a=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},On(Xu,Xa),Xa|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,On(Xu,Xa),Xa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,On(Xu,Xa),Xa|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,On(Xu,Xa),Xa|=r;return da(e,t,a,n),t.child}function p$(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function E_(e,t,n,r,a){var s=La(n)?Oc:ra.current;return s=Sd(t,s),id(t,a),n=YS(e,t,n,r,s,a),r=XS(),e!==null&&!Ia?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wo(e,t,a)):(Bn&&r&&LS(t),t.flags|=1,da(e,t,n,a),t.child)}function dT(e,t,n,r,a){if(La(n)){var s=!0;qv(t)}else s=!1;if(id(t,a),t.stateNode===null)vv(e,t),u$(t,n,r),C_(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ei(u):(u=La(n)?Oc:ra.current,u=Sd(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&iT(t,o,r,u),Yo=!1;var f=t.memoizedState;o.state=f,Yv(t,r,o,a),c=t.memoizedState,l!==r||f!==c||Da.current||Yo?(typeof d=="function"&&(N_(t,n,d,r),c=t.memoizedState),(l=Yo||aT(t,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,WL(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Bi(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ei(c):(c=La(n)?Oc:ra.current,c=Sd(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&iT(t,o,r,c),Yo=!1,f=t.memoizedState,o.state=f,Yv(t,r,o,a);var g=t.memoizedState;l!==h||f!==g||Da.current||Yo?(typeof m=="function"&&(N_(t,n,m,r),g=t.memoizedState),(u=Yo||aT(t,n,u,r,f,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return T_(e,t,n,r,s,a)}function T_(e,t,n,r,a,s){p$(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&XE(t,n,!1),wo(e,t,s);r=t.stateNode,lK.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Cd(t,e.child,null,s),t.child=Cd(t,null,l,s)):da(e,t,l,s),t.memoizedState=r.state,a&&XE(t,n,!0),t.child}function g$(e){var t=e.stateNode;t.pendingContext?YE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&YE(e,t.context,!1),HS(e,t.containerInfo)}function hT(e,t,n,r,a){return Nd(),FS(a),t.flags|=256,da(e,t,n,r),t.child}var P_={dehydrated:null,treeContext:null,retryLane:0};function O_(e){return{baseLanes:e,cachePool:null,transitions:null}}function v$(e,t,n){var r=t.pendingProps,a=Vn.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),On(Vn,a&1),e===null)return k_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ux(o,r,0,null),e=Ac(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=O_(n),t.memoizedState=P_,e):ZS(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return cK(e,t,o,r,l,a,n);if(s){s=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=xl(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=xl(l,s):(s=Ac(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?O_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=P_,r}return s=e.child,e=s.sibling,r=xl(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ZS(e,t){return t=Ux({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bg(e,t,n,r){return r!==null&&FS(r),Cd(t,e.child,null,n),e=ZS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function cK(e,t,n,r,a,s,o){if(n)return t.flags&256?(t.flags&=-257,r=cw(Error(Ge(422))),bg(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=Ux({mode:"visible",children:r.children},a,0,null),s=Ac(s,a,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Cd(t,e.child,null,o),t.child.memoizedState=O_(o),t.memoizedState=P_,s);if(!(t.mode&1))return bg(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(Ge(419)),r=cw(s,r,void 0),bg(e,t,o,r)}if(l=(o&e.childLanes)!==0,Ia||l){if(r=Pr,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,bo(e,a),ts(r,e,a,-1))}return iN(),r=cw(Error(Ge(421))),bg(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=jK.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,ei=pl(a.nextSibling),ti=t,Bn=!0,Yi=null,e!==null&&(yi[xi++]=ro,yi[xi++]=ao,yi[xi++]=Ic,ro=e.id,ao=e.overflow,Ic=t),t=ZS(t,r.children),t.flags|=4096,t)}function fT(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),S_(e.return,t,n)}function uw(e,t,n,r,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function y$(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(da(e,t,r.children,n),r=Vn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fT(e,n,t);else if(e.tag===19)fT(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(On(Vn,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Xv(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),uw(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Xv(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}uw(t,!0,n,null,s);break;case"together":uw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Mc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ge(153));if(t.child!==null){for(e=t.child,n=xl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=xl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function uK(e,t,n){switch(t.tag){case 3:g$(t),Nd();break;case 5:qL(t);break;case 1:La(t.type)&&qv(t);break;case 4:HS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;On(Vv,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(On(Vn,Vn.current&1),t.flags|=128,null):n&t.child.childLanes?v$(e,t,n):(On(Vn,Vn.current&1),e=wo(e,t,n),e!==null?e.sibling:null);On(Vn,Vn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return y$(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),On(Vn,Vn.current),r)break;return null;case 22:case 23:return t.lanes=0,m$(e,t,n)}return wo(e,t,n)}var x$,I_,b$,w$;x$=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};I_=function(){};b$=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,gc(Ps.current);var s=null;switch(n){case"input":a=t_(e,a),r=t_(e,r),s=[];break;case"select":a=Yn({},a,{value:void 0}),r=Yn({},r,{value:void 0}),s=[];break;case"textarea":a=a_(e,a),r=a_(e,r),s=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=zv)}s_(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wf.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wf.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Dn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};w$=function(e,t,n,r){n!==r&&(t.flags|=4)};function zh(e,t){if(!Bn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function dK(e,t,n){var r=t.pendingProps;switch($S(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(t),null;case 1:return La(t.type)&&Wv(),Xr(t),null;case 3:return r=t.stateNode,Ad(),Fn(Da),Fn(ra),VS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(yg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Yi!==null&&(B_(Yi),Yi=null))),I_(e,t),Xr(t),null;case 5:KS(t);var a=gc(tm.current);if(n=t.type,e!==null&&t.stateNode!=null)b$(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ge(166));return Xr(t),null}if(e=gc(Ps.current),yg(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ws]=t,r[Zf]=s,e=(t.mode&1)!==0,n){case"dialog":Dn("cancel",r),Dn("close",r);break;case"iframe":case"object":case"embed":Dn("load",r);break;case"video":case"audio":for(a=0;a<gf.length;a++)Dn(gf[a],r);break;case"source":Dn("error",r);break;case"img":case"image":case"link":Dn("error",r),Dn("load",r);break;case"details":Dn("toggle",r);break;case"input":jE(r,s),Dn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Dn("invalid",r);break;case"textarea":kE(r,s),Dn("invalid",r)}s_(n,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&vg(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&vg(r.textContent,l,e),a=["children",""+l]):Wf.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Dn("scroll",r)}switch(n){case"input":cg(r),_E(r,s,!0);break;case"textarea":cg(r),SE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=zv)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=YD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ws]=t,e[Zf]=r,x$(e,t,!1,!1),t.stateNode=e;e:{switch(o=o_(n,r),n){case"dialog":Dn("cancel",e),Dn("close",e),a=r;break;case"iframe":case"object":case"embed":Dn("load",e),a=r;break;case"video":case"audio":for(a=0;a<gf.length;a++)Dn(gf[a],e);a=r;break;case"source":Dn("error",e),a=r;break;case"img":case"image":case"link":Dn("error",e),Dn("load",e),a=r;break;case"details":Dn("toggle",e),a=r;break;case"input":jE(e,r),a=t_(e,r),Dn("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Yn({},r,{value:void 0}),Dn("invalid",e);break;case"textarea":kE(e,r),a=a_(e,r),Dn("invalid",e);break;default:a=r}s_(n,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?QD(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&XD(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&qf(e,c):typeof c=="number"&&qf(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wf.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Dn("scroll",e):c!=null&&_S(e,s,c,o))}switch(n){case"input":cg(e),_E(e,r,!1);break;case"textarea":cg(e),SE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+kl(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?td(e,!!r.multiple,s,!1):r.defaultValue!=null&&td(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=zv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xr(t),null;case 6:if(e&&t.stateNode!=null)w$(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ge(166));if(n=gc(tm.current),gc(Ps.current),yg(t)){if(r=t.stateNode,n=t.memoizedProps,r[ws]=t,(s=r.nodeValue!==n)&&(e=ti,e!==null))switch(e.tag){case 3:vg(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vg(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ws]=t,t.stateNode=r}return Xr(t),null;case 13:if(Fn(Vn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Bn&&ei!==null&&t.mode&1&&!(t.flags&128))FL(),Nd(),t.flags|=98560,s=!1;else if(s=yg(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Ge(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ge(317));s[ws]=t}else Nd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xr(t),s=!1}else Yi!==null&&(B_(Yi),Yi=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Vn.current&1?jr===0&&(jr=3):iN())),t.updateQueue!==null&&(t.flags|=4),Xr(t),null);case 4:return Ad(),I_(e,t),e===null&&Jf(t.stateNode.containerInfo),Xr(t),null;case 10:return zS(t.type._context),Xr(t),null;case 17:return La(t.type)&&Wv(),Xr(t),null;case 19:if(Fn(Vn),s=t.memoizedState,s===null)return Xr(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)zh(s,!1);else{if(jr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Xv(e),o!==null){for(t.flags|=128,zh(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return On(Vn,Vn.current&1|2),t.child}e=e.sibling}s.tail!==null&&or()>Td&&(t.flags|=128,r=!0,zh(s,!1),t.lanes=4194304)}else{if(!r)if(e=Xv(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),zh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Bn)return Xr(t),null}else 2*or()-s.renderingStartTime>Td&&n!==1073741824&&(t.flags|=128,r=!0,zh(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=or(),t.sibling=null,n=Vn.current,On(Vn,r?n&1|2:n&1),t):(Xr(t),null);case 22:case 23:return aN(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Xa&1073741824&&(Xr(t),t.subtreeFlags&6&&(t.flags|=8192)):Xr(t),null;case 24:return null;case 25:return null}throw Error(Ge(156,t.tag))}function hK(e,t){switch($S(t),t.tag){case 1:return La(t.type)&&Wv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ad(),Fn(Da),Fn(ra),VS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return KS(t),null;case 13:if(Fn(Vn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ge(340));Nd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fn(Vn),null;case 4:return Ad(),null;case 10:return zS(t.type._context),null;case 22:case 23:return aN(),null;case 24:return null;default:return null}}var wg=!1,Zr=!1,fK=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Yu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qn(e,t,r)}else n.current=null}function R_(e,t,n){try{n()}catch(r){Qn(e,t,r)}}var mT=!1;function mK(e,t){if(v_=Fv,e=NL(),DS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||a!==0&&h.nodeType!==3||(l=o+a),h!==s||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=o),f===s&&++d===r&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(y_={focusedElem:e,selectionRange:n},Fv=!1,yt=t;yt!==null;)if(t=yt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,yt=e;else for(;yt!==null;){t=yt;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Bi(t.type,v),x);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ge(163))}}catch(_){Qn(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,yt=e;break}yt=t.return}return g=mT,mT=!1,g}function Af(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,s!==void 0&&R_(t,n,s)}a=a.next}while(a!==r)}}function $x(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function M_(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function j$(e){var t=e.alternate;t!==null&&(e.alternate=null,j$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ws],delete t[Zf],delete t[w_],delete t[X7],delete t[J7])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _$(e){return e.tag===5||e.tag===3||e.tag===4}function pT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function D_(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=zv));else if(r!==4&&(e=e.child,e!==null))for(D_(e,t,n),e=e.sibling;e!==null;)D_(e,t,n),e=e.sibling}function L_(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(L_(e,t,n),e=e.sibling;e!==null;)L_(e,t,n),e=e.sibling}var $r=null,Ki=!1;function Do(e,t,n){for(n=n.child;n!==null;)k$(e,t,n),n=n.sibling}function k$(e,t,n){if(Ts&&typeof Ts.onCommitFiberUnmount=="function")try{Ts.onCommitFiberUnmount(Tx,n)}catch{}switch(n.tag){case 5:Zr||Yu(n,t);case 6:var r=$r,a=Ki;$r=null,Do(e,t,n),$r=r,Ki=a,$r!==null&&(Ki?(e=$r,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):$r.removeChild(n.stateNode));break;case 18:$r!==null&&(Ki?(e=$r,n=n.stateNode,e.nodeType===8?rw(e.parentNode,n):e.nodeType===1&&rw(e,n),Gf(e)):rw($r,n.stateNode));break;case 4:r=$r,a=Ki,$r=n.stateNode.containerInfo,Ki=!0,Do(e,t,n),$r=r,Ki=a;break;case 0:case 11:case 14:case 15:if(!Zr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&R_(n,t,o),a=a.next}while(a!==r)}Do(e,t,n);break;case 1:if(!Zr&&(Yu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Qn(n,t,l)}Do(e,t,n);break;case 21:Do(e,t,n);break;case 22:n.mode&1?(Zr=(r=Zr)||n.memoizedState!==null,Do(e,t,n),Zr=r):Do(e,t,n);break;default:Do(e,t,n)}}function gT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new fK),t.forEach(function(r){var a=_K.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Di(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:$r=l.stateNode,Ki=!1;break e;case 3:$r=l.stateNode.containerInfo,Ki=!0;break e;case 4:$r=l.stateNode.containerInfo,Ki=!0;break e}l=l.return}if($r===null)throw Error(Ge(160));k$(s,o,a),$r=null,Ki=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Qn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)S$(t,e),t=t.sibling}function S$(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Di(t,e),ms(e),r&4){try{Af(3,e,e.return),$x(3,e)}catch(v){Qn(e,e.return,v)}try{Af(5,e,e.return)}catch(v){Qn(e,e.return,v)}}break;case 1:Di(t,e),ms(e),r&512&&n!==null&&Yu(n,n.return);break;case 5:if(Di(t,e),ms(e),r&512&&n!==null&&Yu(n,n.return),e.flags&32){var a=e.stateNode;try{qf(a,"")}catch(v){Qn(e,e.return,v)}}if(r&4&&(a=e.stateNode,a!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&VD(a,s),o_(l,o);var u=o_(l,s);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?QD(a,h):d==="dangerouslySetInnerHTML"?XD(a,h):d==="children"?qf(a,h):_S(a,d,h,u)}switch(l){case"input":n_(a,s);break;case"textarea":GD(a,s);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?td(a,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?td(a,!!s.multiple,s.defaultValue,!0):td(a,!!s.multiple,s.multiple?[]:"",!1))}a[Zf]=s}catch(v){Qn(e,e.return,v)}}break;case 6:if(Di(t,e),ms(e),r&4){if(e.stateNode===null)throw Error(Ge(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(v){Qn(e,e.return,v)}}break;case 3:if(Di(t,e),ms(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gf(t.containerInfo)}catch(v){Qn(e,e.return,v)}break;case 4:Di(t,e),ms(e);break;case 13:Di(t,e),ms(e),a=e.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(nN=or())),r&4&&gT(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Zr=(u=Zr)||d,Di(t,e),Zr=u):Di(t,e),ms(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(yt=e,d=e.child;d!==null;){for(h=yt=d;yt!==null;){switch(f=yt,m=f.child,f.tag){case 0:case 11:case 14:case 15:Af(4,f,f.return);break;case 1:Yu(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Qn(r,n,v)}}break;case 5:Yu(f,f.return);break;case 22:if(f.memoizedState!==null){yT(h);continue}}m!==null?(m.return=f,yt=m):yT(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{a=h.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=JD("display",o))}catch(v){Qn(e,e.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Qn(e,e.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Di(t,e),ms(e),r&4&&gT(e);break;case 21:break;default:Di(t,e),ms(e)}}function ms(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_$(n)){var r=n;break e}n=n.return}throw Error(Ge(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(qf(a,""),r.flags&=-33);var s=pT(e);L_(e,s,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=pT(e);D_(e,l,o);break;default:throw Error(Ge(161))}}catch(c){Qn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pK(e,t,n){yt=e,N$(e)}function N$(e,t,n){for(var r=(e.mode&1)!==0;yt!==null;){var a=yt,s=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||wg;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Zr;l=wg;var u=Zr;if(wg=o,(Zr=c)&&!u)for(yt=a;yt!==null;)o=yt,c=o.child,o.tag===22&&o.memoizedState!==null?xT(a):c!==null?(c.return=o,yt=c):xT(a);for(;s!==null;)yt=s,N$(s),s=s.sibling;yt=a,wg=l,Zr=u}vT(e)}else a.subtreeFlags&8772&&s!==null?(s.return=a,yt=s):vT(e)}}function vT(e){for(;yt!==null;){var t=yt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Zr||$x(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Zr)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Bi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&tT(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}tT(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Gf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ge(163))}Zr||t.flags&512&&M_(t)}catch(f){Qn(t,t.return,f)}}if(t===e){yt=null;break}if(n=t.sibling,n!==null){n.return=t.return,yt=n;break}yt=t.return}}function yT(e){for(;yt!==null;){var t=yt;if(t===e){yt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,yt=n;break}yt=t.return}}function xT(e){for(;yt!==null;){var t=yt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$x(4,t)}catch(c){Qn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Qn(t,a,c)}}var s=t.return;try{M_(t)}catch(c){Qn(t,s,c)}break;case 5:var o=t.return;try{M_(t)}catch(c){Qn(t,o,c)}}}catch(c){Qn(t,t.return,c)}if(t===e){yt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,yt=l;break}yt=t.return}}var gK=Math.ceil,Zv=Eo.ReactCurrentDispatcher,eN=Eo.ReactCurrentOwner,Si=Eo.ReactCurrentBatchConfig,rn=0,Pr=null,dr=null,zr=0,Xa=0,Xu=Ml(0),jr=0,im=null,Mc=0,Fx=0,tN=0,Ef=null,Ca=null,nN=0,Td=1/0,Js=null,ey=!1,$_=null,vl=null,jg=!1,cl=null,ty=0,Tf=0,F_=null,yv=-1,xv=0;function va(){return rn&6?or():yv!==-1?yv:yv=or()}function yl(e){return e.mode&1?rn&2&&zr!==0?zr&-zr:Z7.transition!==null?(xv===0&&(xv=uL()),xv):(e=bn,e!==0||(e=window.event,e=e===void 0?16:vL(e.type)),e):1}function ts(e,t,n,r){if(50<Tf)throw Tf=0,F_=null,Error(Ge(185));pp(e,n,r),(!(rn&2)||e!==Pr)&&(e===Pr&&(!(rn&2)&&(Fx|=n),jr===4&&Qo(e,zr)),$a(e,r),n===1&&rn===0&&!(t.mode&1)&&(Td=or()+500,Mx&&Dl()))}function $a(e,t){var n=e.callbackNode;ZH(e,t);var r=$v(e,e===Pr?zr:0);if(r===0)n!==null&&AE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&AE(n),t===1)e.tag===0?Q7(bT.bind(null,e)):DL(bT.bind(null,e)),G7(function(){!(rn&6)&&Dl()}),n=null;else{switch(dL(r)){case 1:n=AS;break;case 4:n=lL;break;case 16:n=Lv;break;case 536870912:n=cL;break;default:n=Lv}n=R$(n,C$.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function C$(e,t){if(yv=-1,xv=0,rn&6)throw Error(Ge(327));var n=e.callbackNode;if(sd()&&e.callbackNode!==n)return null;var r=$v(e,e===Pr?zr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ny(e,r);else{t=r;var a=rn;rn|=2;var s=E$();(Pr!==e||zr!==t)&&(Js=null,Td=or()+500,Cc(e,t));do try{xK();break}catch(l){A$(e,l)}while(!0);BS(),Zv.current=s,rn=a,dr!==null?t=0:(Pr=null,zr=0,t=jr)}if(t!==0){if(t===2&&(a=h_(e),a!==0&&(r=a,t=U_(e,a))),t===1)throw n=im,Cc(e,0),Qo(e,r),$a(e,or()),n;if(t===6)Qo(e,r);else{if(a=e.current.alternate,!(r&30)&&!vK(a)&&(t=ny(e,r),t===2&&(s=h_(e),s!==0&&(r=s,t=U_(e,s))),t===1))throw n=im,Cc(e,0),Qo(e,r),$a(e,or()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Ge(345));case 2:nc(e,Ca,Js);break;case 3:if(Qo(e,r),(r&130023424)===r&&(t=nN+500-or(),10<t)){if($v(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){va(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=b_(nc.bind(null,e,Ca,Js),t);break}nc(e,Ca,Js);break;case 4:if(Qo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-es(r);s=1<<o,o=t[o],o>a&&(a=o),r&=~s}if(r=a,r=or()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gK(r/1960))-r,10<r){e.timeoutHandle=b_(nc.bind(null,e,Ca,Js),r);break}nc(e,Ca,Js);break;case 5:nc(e,Ca,Js);break;default:throw Error(Ge(329))}}}return $a(e,or()),e.callbackNode===n?C$.bind(null,e):null}function U_(e,t){var n=Ef;return e.current.memoizedState.isDehydrated&&(Cc(e,t).flags|=256),e=ny(e,t),e!==2&&(t=Ca,Ca=n,t!==null&&B_(t)),e}function B_(e){Ca===null?Ca=e:Ca.push.apply(Ca,e)}function vK(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!is(s(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Qo(e,t){for(t&=~tN,t&=~Fx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-es(t),r=1<<n;e[n]=-1,t&=~r}}function bT(e){if(rn&6)throw Error(Ge(327));sd();var t=$v(e,0);if(!(t&1))return $a(e,or()),null;var n=ny(e,t);if(e.tag!==0&&n===2){var r=h_(e);r!==0&&(t=r,n=U_(e,r))}if(n===1)throw n=im,Cc(e,0),Qo(e,t),$a(e,or()),n;if(n===6)throw Error(Ge(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nc(e,Ca,Js),$a(e,or()),null}function rN(e,t){var n=rn;rn|=1;try{return e(t)}finally{rn=n,rn===0&&(Td=or()+500,Mx&&Dl())}}function Dc(e){cl!==null&&cl.tag===0&&!(rn&6)&&sd();var t=rn;rn|=1;var n=Si.transition,r=bn;try{if(Si.transition=null,bn=1,e)return e()}finally{bn=r,Si.transition=n,rn=t,!(rn&6)&&Dl()}}function aN(){Xa=Xu.current,Fn(Xu)}function Cc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,V7(n)),dr!==null)for(n=dr.return;n!==null;){var r=n;switch($S(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wv();break;case 3:Ad(),Fn(Da),Fn(ra),VS();break;case 5:KS(r);break;case 4:Ad();break;case 13:Fn(Vn);break;case 19:Fn(Vn);break;case 10:zS(r.type._context);break;case 22:case 23:aN()}n=n.return}if(Pr=e,dr=e=xl(e.current,null),zr=Xa=t,jr=0,im=null,tN=Fx=Mc=0,Ca=Ef=null,pc!==null){for(t=0;t<pc.length;t++)if(n=pc[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=a,r.next=o}n.pending=r}pc=null}return e}function A$(e,t){do{var n=dr;try{if(BS(),pv.current=Qv,Jv){for(var r=Gn.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Jv=!1}if(Rc=0,Er=br=Gn=null,Cf=!1,nm=0,eN.current=null,n===null||n.return===null){jr=1,im=t,dr=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=zr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=oT(o);if(m!==null){m.flags&=-257,lT(m,o,l,s,t),m.mode&1&&sT(s,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){sT(s,u,t),iN();break e}c=Error(Ge(426))}}else if(Bn&&l.mode&1){var x=oT(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),lT(x,o,l,s,t),FS(Ed(c,l));break e}}s=c=Ed(c,l),jr!==4&&(jr=2),Ef===null?Ef=[s]:Ef.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=d$(s,c,t);eT(s,y);break e;case 1:l=c;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(vl===null||!vl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var _=h$(s,l,t);eT(s,_);break e}}s=s.return}while(s!==null)}P$(n)}catch(k){t=k,dr===n&&n!==null&&(dr=n=n.return);continue}break}while(!0)}function E$(){var e=Zv.current;return Zv.current=Qv,e===null?Qv:e}function iN(){(jr===0||jr===3||jr===2)&&(jr=4),Pr===null||!(Mc&268435455)&&!(Fx&268435455)||Qo(Pr,zr)}function ny(e,t){var n=rn;rn|=2;var r=E$();(Pr!==e||zr!==t)&&(Js=null,Cc(e,t));do try{yK();break}catch(a){A$(e,a)}while(!0);if(BS(),rn=n,Zv.current=r,dr!==null)throw Error(Ge(261));return Pr=null,zr=0,jr}function yK(){for(;dr!==null;)T$(dr)}function xK(){for(;dr!==null&&!qH();)T$(dr)}function T$(e){var t=I$(e.alternate,e,Xa);e.memoizedProps=e.pendingProps,t===null?P$(e):dr=t,eN.current=null}function P$(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=hK(n,t),n!==null){n.flags&=32767,dr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{jr=6,dr=null;return}}else if(n=dK(n,t,Xa),n!==null){dr=n;return}if(t=t.sibling,t!==null){dr=t;return}dr=t=e}while(t!==null);jr===0&&(jr=5)}function nc(e,t,n){var r=bn,a=Si.transition;try{Si.transition=null,bn=1,bK(e,t,n,r)}finally{Si.transition=a,bn=r}return null}function bK(e,t,n,r){do sd();while(cl!==null);if(rn&6)throw Error(Ge(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ge(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(e7(e,s),e===Pr&&(dr=Pr=null,zr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jg||(jg=!0,R$(Lv,function(){return sd(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Si.transition,Si.transition=null;var o=bn;bn=1;var l=rn;rn|=4,eN.current=null,mK(e,n),S$(n,e),U7(y_),Fv=!!v_,y_=v_=null,e.current=n,pK(n),HH(),rn=l,bn=o,Si.transition=s}else e.current=n;if(jg&&(jg=!1,cl=e,ty=a),s=e.pendingLanes,s===0&&(vl=null),GH(n.stateNode),$a(e,or()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(ey)throw ey=!1,e=$_,$_=null,e;return ty&1&&e.tag!==0&&sd(),s=e.pendingLanes,s&1?e===F_?Tf++:(Tf=0,F_=e):Tf=0,Dl(),null}function sd(){if(cl!==null){var e=dL(ty),t=Si.transition,n=bn;try{if(Si.transition=null,bn=16>e?16:e,cl===null)var r=!1;else{if(e=cl,cl=null,ty=0,rn&6)throw Error(Ge(331));var a=rn;for(rn|=4,yt=e.current;yt!==null;){var s=yt,o=s.child;if(yt.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(yt=u;yt!==null;){var d=yt;switch(d.tag){case 0:case 11:case 15:Af(8,d,s)}var h=d.child;if(h!==null)h.return=d,yt=h;else for(;yt!==null;){d=yt;var f=d.sibling,m=d.return;if(j$(d),d===u){yt=null;break}if(f!==null){f.return=m,yt=f;break}yt=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}yt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,yt=o;else e:for(;yt!==null;){if(s=yt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Af(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,yt=y;break e}yt=s.return}}var w=e.current;for(yt=w;yt!==null;){o=yt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,yt=b;else e:for(o=w;yt!==null;){if(l=yt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$x(9,l)}}catch(k){Qn(l,l.return,k)}if(l===o){yt=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,yt=_;break e}yt=l.return}}if(rn=a,Dl(),Ts&&typeof Ts.onPostCommitFiberRoot=="function")try{Ts.onPostCommitFiberRoot(Tx,e)}catch{}r=!0}return r}finally{bn=n,Si.transition=t}}return!1}function wT(e,t,n){t=Ed(n,t),t=d$(e,t,1),e=gl(e,t,1),t=va(),e!==null&&(pp(e,1,t),$a(e,t))}function Qn(e,t,n){if(e.tag===3)wT(e,e,n);else for(;t!==null;){if(t.tag===3){wT(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vl===null||!vl.has(r))){e=Ed(n,e),e=h$(t,e,1),t=gl(t,e,1),e=va(),t!==null&&(pp(t,1,e),$a(t,e));break}}t=t.return}}function wK(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=va(),e.pingedLanes|=e.suspendedLanes&n,Pr===e&&(zr&n)===n&&(jr===4||jr===3&&(zr&130023424)===zr&&500>or()-nN?Cc(e,0):tN|=n),$a(e,t)}function O$(e,t){t===0&&(e.mode&1?(t=hg,hg<<=1,!(hg&130023424)&&(hg=4194304)):t=1);var n=va();e=bo(e,t),e!==null&&(pp(e,t,n),$a(e,n))}function jK(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),O$(e,n)}function _K(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ge(314))}r!==null&&r.delete(t),O$(e,n)}var I$;I$=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Da.current)Ia=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ia=!1,uK(e,t,n);Ia=!!(e.flags&131072)}else Ia=!1,Bn&&t.flags&1048576&&LL(t,Kv,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;vv(e,t),e=t.pendingProps;var a=Sd(t,ra.current);id(t,n),a=YS(null,t,r,e,a,n);var s=XS();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,La(r)?(s=!0,qv(t)):s=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,qS(t),a.updater=Lx,t.stateNode=a,a._reactInternals=t,C_(t,r,e,n),t=T_(null,t,r,!0,s,n)):(t.tag=0,Bn&&s&&LS(t),da(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(vv(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=SK(r),e=Bi(r,e),a){case 0:t=E_(null,t,r,e,n);break e;case 1:t=dT(null,t,r,e,n);break e;case 11:t=cT(null,t,r,e,n);break e;case 14:t=uT(null,t,r,Bi(r.type,e),n);break e}throw Error(Ge(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Bi(r,a),E_(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Bi(r,a),dT(e,t,r,a,n);case 3:e:{if(g$(t),e===null)throw Error(Ge(387));r=t.pendingProps,s=t.memoizedState,a=s.element,WL(e,t),Yv(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){a=Ed(Error(Ge(423)),t),t=hT(e,t,r,n,a);break e}else if(r!==a){a=Ed(Error(Ge(424)),t),t=hT(e,t,r,n,a);break e}else for(ei=pl(t.stateNode.containerInfo.firstChild),ti=t,Bn=!0,Yi=null,n=BL(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Nd(),r===a){t=wo(e,t,n);break e}da(e,t,r,n)}t=t.child}return t;case 5:return qL(t),e===null&&k_(t),r=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,o=a.children,x_(r,a)?o=null:s!==null&&x_(r,s)&&(t.flags|=32),p$(e,t),da(e,t,o,n),t.child;case 6:return e===null&&k_(t),null;case 13:return v$(e,t,n);case 4:return HS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Cd(t,null,r,n):da(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Bi(r,a),cT(e,t,r,a,n);case 7:return da(e,t,t.pendingProps,n),t.child;case 8:return da(e,t,t.pendingProps.children,n),t.child;case 12:return da(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,On(Vv,r._currentValue),r._currentValue=o,s!==null)if(is(s.value,o)){if(s.children===a.children&&!Da.current){t=wo(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=uo(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),S_(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ge(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),S_(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}da(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,id(t,n),a=Ei(a),r=r(a),t.flags|=1,da(e,t,r,n),t.child;case 14:return r=t.type,a=Bi(r,t.pendingProps),a=Bi(r.type,a),uT(e,t,r,a,n);case 15:return f$(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Bi(r,a),vv(e,t),t.tag=1,La(r)?(e=!0,qv(t)):e=!1,id(t,n),u$(t,r,a),C_(t,r,a,n),T_(null,t,r,!0,e,n);case 19:return y$(e,t,n);case 22:return m$(e,t,n)}throw Error(Ge(156,t.tag))};function R$(e,t){return oL(e,t)}function kK(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _i(e,t,n,r){return new kK(e,t,n,r)}function sN(e){return e=e.prototype,!(!e||!e.isReactComponent)}function SK(e){if(typeof e=="function")return sN(e)?1:0;if(e!=null){if(e=e.$$typeof,e===SS)return 11;if(e===NS)return 14}return 2}function xl(e,t){var n=e.alternate;return n===null?(n=_i(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bv(e,t,n,r,a,s){var o=2;if(r=e,typeof e=="function")sN(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Uu:return Ac(n.children,a,s,t);case kS:o=8,a|=8;break;case Jj:return e=_i(12,n,t,a|2),e.elementType=Jj,e.lanes=s,e;case Qj:return e=_i(13,n,t,a),e.elementType=Qj,e.lanes=s,e;case Zj:return e=_i(19,n,t,a),e.elementType=Zj,e.lanes=s,e;case qD:return Ux(n,a,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zD:o=10;break e;case WD:o=9;break e;case SS:o=11;break e;case NS:o=14;break e;case Go:o=16,r=null;break e}throw Error(Ge(130,e==null?e:typeof e,""))}return t=_i(o,n,t,a),t.elementType=e,t.type=r,t.lanes=s,t}function Ac(e,t,n,r){return e=_i(7,e,r,t),e.lanes=n,e}function Ux(e,t,n,r){return e=_i(22,e,r,t),e.elementType=qD,e.lanes=n,e.stateNode={isHidden:!1},e}function dw(e,t,n){return e=_i(6,e,null,t),e.lanes=n,e}function hw(e,t,n){return t=_i(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function NK(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=K0(0),this.expirationTimes=K0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K0(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function oN(e,t,n,r,a,s,o,l,c){return e=new NK(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=_i(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qS(s),e}function CK(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function M$(e){if(!e)return Sl;e=e._reactInternals;e:{if(eu(e)!==e||e.tag!==1)throw Error(Ge(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(La(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ge(171))}if(e.tag===1){var n=e.type;if(La(n))return ML(e,n,t)}return t}function D$(e,t,n,r,a,s,o,l,c){return e=oN(n,r,!0,e,a,s,o,l,c),e.context=M$(null),n=e.current,r=va(),a=yl(n),s=uo(r,a),s.callback=t??null,gl(n,s,a),e.current.lanes=a,pp(e,a,r),$a(e,r),e}function Bx(e,t,n,r){var a=t.current,s=va(),o=yl(a);return n=M$(n),t.context===null?t.context=n:t.pendingContext=n,t=uo(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=gl(a,t,o),e!==null&&(ts(e,a,o,s),mv(e,a,o)),o}function ry(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function lN(e,t){jT(e,t),(e=e.alternate)&&jT(e,t)}function AK(){return null}var L$=typeof reportError=="function"?reportError:function(e){console.error(e)};function cN(e){this._internalRoot=e}zx.prototype.render=cN.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ge(409));Bx(e,t,null,null)};zx.prototype.unmount=cN.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dc(function(){Bx(null,e,null,null)}),t[xo]=null}};function zx(e){this._internalRoot=e}zx.prototype.unstable_scheduleHydration=function(e){if(e){var t=mL();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jo.length&&t!==0&&t<Jo[n].priority;n++);Jo.splice(n,0,e),n===0&&gL(e)}};function uN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _T(){}function EK(e,t,n,r,a){if(a){if(typeof r=="function"){var s=r;r=function(){var u=ry(o);s.call(u)}}var o=D$(t,r,e,0,null,!1,!1,"",_T);return e._reactRootContainer=o,e[xo]=o.current,Jf(e.nodeType===8?e.parentNode:e),Dc(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var u=ry(c);l.call(u)}}var c=oN(e,0,!1,null,null,!1,!1,"",_T);return e._reactRootContainer=c,e[xo]=c.current,Jf(e.nodeType===8?e.parentNode:e),Dc(function(){Bx(t,c,n,r)}),c}function qx(e,t,n,r,a){var s=n._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=ry(o);l.call(c)}}Bx(t,o,e,a)}else o=EK(n,t,e,a,r);return ry(o)}hL=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=pf(t.pendingLanes);n!==0&&(ES(t,n|1),$a(t,or()),!(rn&6)&&(Td=or()+500,Dl()))}break;case 13:Dc(function(){var r=bo(e,1);if(r!==null){var a=va();ts(r,e,1,a)}}),lN(e,1)}};TS=function(e){if(e.tag===13){var t=bo(e,134217728);if(t!==null){var n=va();ts(t,e,134217728,n)}lN(e,134217728)}};fL=function(e){if(e.tag===13){var t=yl(e),n=bo(e,t);if(n!==null){var r=va();ts(n,e,t,r)}lN(e,t)}};mL=function(){return bn};pL=function(e,t){var n=bn;try{return bn=e,t()}finally{bn=n}};c_=function(e,t,n){switch(t){case"input":if(n_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Rx(r);if(!a)throw Error(Ge(90));KD(r),n_(r,a)}}}break;case"textarea":GD(e,n);break;case"select":t=n.value,t!=null&&td(e,!!n.multiple,t,!1)}};tL=rN;nL=Dc;var TK={usingClientEntryPoint:!1,Events:[vp,qu,Rx,ZD,eL,rN]},Wh={findFiberByHostInstance:mc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PK={bundleType:Wh.bundleType,version:Wh.version,rendererPackageName:Wh.rendererPackageName,rendererConfig:Wh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Eo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=iL(e),e===null?null:e.stateNode},findFiberByHostInstance:Wh.findFiberByHostInstance||AK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_g.isDisabled&&_g.supportsFiber)try{Tx=_g.inject(PK),Ts=_g}catch{}}si.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TK;si.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uN(t))throw Error(Ge(200));return CK(e,t,null,n)};si.createRoot=function(e,t){if(!uN(e))throw Error(Ge(299));var n=!1,r="",a=L$;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=oN(e,1,!1,null,null,n,!1,r,a),e[xo]=t.current,Jf(e.nodeType===8?e.parentNode:e),new cN(t)};si.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ge(188)):(e=Object.keys(e).join(","),Error(Ge(268,e)));return e=iL(t),e=e===null?null:e.stateNode,e};si.flushSync=function(e){return Dc(e)};si.hydrate=function(e,t,n){if(!Wx(t))throw Error(Ge(200));return qx(null,e,t,!0,n)};si.hydrateRoot=function(e,t,n){if(!uN(e))throw Error(Ge(405));var r=n!=null&&n.hydratedSources||null,a=!1,s="",o=L$;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=D$(t,null,e,1,n??null,a,!1,s,o),e[xo]=t.current,Jf(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new zx(t)};si.render=function(e,t,n){if(!Wx(t))throw Error(Ge(200));return qx(null,e,t,!1,n)};si.unmountComponentAtNode=function(e){if(!Wx(e))throw Error(Ge(40));return e._reactRootContainer?(Dc(function(){qx(null,null,e,!1,function(){e._reactRootContainer=null,e[xo]=null})}),!0):!1};si.unstable_batchedUpdates=rN;si.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Wx(n))throw Error(Ge(200));if(e==null||e._reactInternals===void 0)throw Error(Ge(38));return qx(e,t,n,!1,r)};si.version="18.3.1-next-f1338f8080-20240426";function $$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($$)}catch(e){console.error(e)}}$$(),$D.exports=si;var tu=$D.exports;const F$=vn(tu);var U$,kT=tu;U$=kT.createRoot,kT.hydrateRoot;const OK=1,IK=1e6;let fw=0;function RK(){return fw=(fw+1)%Number.MAX_SAFE_INTEGER,fw.toString()}const mw=new Map,ST=e=>{if(mw.has(e))return;const t=setTimeout(()=>{mw.delete(e),Pf({type:"REMOVE_TOAST",toastId:e})},IK);mw.set(e,t)},MK=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,OK)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?ST(n):e.toasts.forEach(r=>{ST(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},wv=[];let jv={toasts:[]};function Pf(e){jv=MK(jv,e),wv.forEach(t=>{t(jv)})}function DK({...e}){const t=RK(),n=a=>Pf({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>Pf({type:"DISMISS_TOAST",toastId:t});return Pf({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function nu(){const[e,t]=p.useState(jv);return p.useEffect(()=>(wv.push(t),()=>{const n=wv.indexOf(t);n>-1&&wv.splice(n,1)}),[e]),{...e,toast:DK,dismiss:n=>Pf({type:"DISMISS_TOAST",toastId:n})}}function Ve(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function NT(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function jo(...e){return t=>{let n=!1;const r=e.map(a=>{const s=NT(a,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let a=0;a<r.length;a++){const s=r[a];typeof s=="function"?s():NT(e[a],null)}}}}function It(...e){return p.useCallback(jo(...e),e)}function LK(e,t){const n=p.createContext(t),r=s=>{const{children:o,...l}=s,c=p.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function a(s){const o=p.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,a]}function Ir(e,t=[]){let n=[];function r(s,o){const l=p.createContext(o),c=n.length;n=[...n,o];const u=h=>{var y;const{scope:f,children:m,...g}=h,v=((y=f==null?void 0:f[e])==null?void 0:y[c])||l,x=p.useMemo(()=>g,Object.values(g));return i.jsx(v.Provider,{value:x,children:m})};u.displayName=s+"Provider";function d(h,f){var v;const m=((v=f==null?void 0:f[e])==null?void 0:v[c])||l,g=p.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[u,d]}const a=()=>{const s=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,$K(a,...t)]}function $K(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(s)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Nl(e){const t=FK(e),n=p.forwardRef((r,a)=>{const{children:s,...o}=r,l=p.Children.toArray(s),c=l.find(UK);if(c){const u=c.props.children,d=l.map(h=>h===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:h);return i.jsx(t,{...o,ref:a,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return i.jsx(t,{...o,ref:a,children:s})});return n.displayName=`${e}.Slot`,n}var dN=Nl("Slot");function FK(e){const t=p.forwardRef((n,r)=>{const{children:a,...s}=n;if(p.isValidElement(a)){const o=zK(a),l=BK(s,a.props);return a.type!==p.Fragment&&(l.ref=r?jo(r,o):o),p.cloneElement(a,l)}return p.Children.count(a)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var B$=Symbol("radix.slottable");function z$(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=B$,t}function UK(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===B$}function BK(e,t){const n={...t};for(const r in t){const a=e[r],s=t[r];/^on[A-Z]/.test(r)?a&&s?n[r]=(...l)=>{const c=s(...l);return a(...l),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...s}:r==="className"&&(n[r]=[a,s].filter(Boolean).join(" "))}return{...e,...n}}function zK(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function xp(e){const t=e+"CollectionProvider",[n,r]=Ir(t),[a,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:x,children:y}=v,w=V.useRef(null),b=V.useRef(new Map).current;return i.jsx(a,{scope:x,itemMap:b,collectionRef:w,children:y})};o.displayName=t;const l=e+"CollectionSlot",c=Nl(l),u=V.forwardRef((v,x)=>{const{scope:y,children:w}=v,b=s(l,y),_=It(x,b.collectionRef);return i.jsx(c,{ref:_,children:w})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",f=Nl(d),m=V.forwardRef((v,x)=>{const{scope:y,children:w,...b}=v,_=V.useRef(null),k=It(x,_),j=s(d,y);return V.useEffect(()=>(j.itemMap.set(_,{ref:_,...b}),()=>void j.itemMap.delete(_))),i.jsx(f,{[h]:"",ref:k,children:w})});m.displayName=d;function g(v){const x=s(e+"CollectionConsumer",v);return V.useCallback(()=>{const w=x.collectionRef.current;if(!w)return[];const b=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((j,N)=>b.indexOf(j.ref.current)-b.indexOf(N.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},g,r]}var WK=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],lt=WK.reduce((e,t)=>{const n=Nl(`Primitive.${t}`),r=p.forwardRef((a,s)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function hN(e,t){e&&tu.flushSync(()=>e.dispatchEvent(t))}function er(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function qK(e,t=globalThis==null?void 0:globalThis.document){const n=er(e);p.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var HK="DismissableLayer",z_="dismissableLayer.update",KK="dismissableLayer.pointerDownOutside",VK="dismissableLayer.focusOutside",CT,W$=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ru=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=e,u=p.useContext(W$),[d,h]=p.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=It(t,N=>h(N)),v=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),w=d?v.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,_=w>=y,k=YK(N=>{const O=N.target,I=[...u.branches].some(P=>P.contains(O));!_||I||(a==null||a(N),o==null||o(N),N.defaultPrevented||l==null||l())},f),j=XK(N=>{const O=N.target;[...u.branches].some(P=>P.contains(O))||(s==null||s(N),o==null||o(N),N.defaultPrevented||l==null||l())},f);return qK(N=>{w===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},f),p.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(CT=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),AT(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=CT)}},[d,f,n,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),AT())},[d,u]),p.useEffect(()=>{const N=()=>m({});return document.addEventListener(z_,N),()=>document.removeEventListener(z_,N)},[]),i.jsx(lt.div,{...c,ref:g,style:{pointerEvents:b?_?"auto":"none":void 0,...e.style},onFocusCapture:Ve(e.onFocusCapture,j.onFocusCapture),onBlurCapture:Ve(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Ve(e.onPointerDownCapture,k.onPointerDownCapture)})});ru.displayName=HK;var GK="DismissableLayerBranch",q$=p.forwardRef((e,t)=>{const n=p.useContext(W$),r=p.useRef(null),a=It(t,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),i.jsx(lt.div,{...e,ref:a})});q$.displayName=GK;function YK(e,t=globalThis==null?void 0:globalThis.document){const n=er(e),r=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let c=function(){H$(KK,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function XK(e,t=globalThis==null?void 0:globalThis.document){const n=er(e),r=p.useRef(!1);return p.useEffect(()=>{const a=s=>{s.target&&!r.current&&H$(VK,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function AT(){const e=new CustomEvent(z_);document.dispatchEvent(e)}function H$(e,t,n,{discrete:r}){const a=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?hN(a,s):a.dispatchEvent(s)}var JK=ru,QK=q$,tr=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},ZK="Portal",hh=p.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,s]=p.useState(!1);tr(()=>s(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?F$.createPortal(i.jsx(lt.div,{...r,ref:t}),o):null});hh.displayName=ZK;function eV(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var kr=e=>{const{present:t,children:n}=e,r=tV(t),a=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=It(r.ref,nV(a));return typeof n=="function"||r.isPresent?p.cloneElement(a,{ref:s}):null};kr.displayName="Presence";function tV(e){const[t,n]=p.useState(),r=p.useRef(null),a=p.useRef(e),s=p.useRef("none"),o=e?"mounted":"unmounted",[l,c]=eV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=kg(r.current);s.current=l==="mounted"?u:"none"},[l]),tr(()=>{const u=r.current,d=a.current;if(d!==e){const f=s.current,m=kg(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),tr(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=m=>{const v=kg(r.current).includes(m.animationName);if(m.target===t&&v&&(c("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},f=m=>{m.target===t&&(s.current=kg(r.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function kg(e){return(e==null?void 0:e.animationName)||"none"}function nV(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var rV=bS[" useInsertionEffect ".trim().toString()]||tr;function Ua({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,s,o]=aV({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const d=p.useRef(e!==void 0);p.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=p.useCallback(d=>{var h;if(l){const f=iV(d)?d(e):d;f!==e&&((h=o.current)==null||h.call(o,f))}else s(d)},[l,e,s,o]);return[c,u]}function aV({defaultProp:e,onChange:t}){const[n,r]=p.useState(e),a=p.useRef(n),s=p.useRef(t);return rV(()=>{s.current=t},[t]),p.useEffect(()=>{var o;a.current!==n&&((o=s.current)==null||o.call(s,n),a.current=n)},[n,a]),[n,r,s]}function iV(e){return typeof e=="function"}var K$=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),sV="VisuallyHidden",Hx=p.forwardRef((e,t)=>i.jsx(lt.span,{...e,ref:t,style:{...K$,...e.style}}));Hx.displayName=sV;var oV=Hx,fN="ToastProvider",[mN,lV,cV]=xp("Toast"),[V$,G3e]=Ir("Toast",[cV]),[uV,Kx]=V$(fN),G$=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:s=50,children:o}=e,[l,c]=p.useState(null),[u,d]=p.useState(0),h=p.useRef(!1),f=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${fN}\`. Expected non-empty \`string\`.`),i.jsx(mN.Provider,{scope:t,children:i.jsx(uV,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:s,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>d(m=>m+1),[]),onToastRemove:p.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};G$.displayName=fN;var Y$="ToastViewport",dV=["F8"],W_="toast.viewportPause",q_="toast.viewportResume",X$=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=dV,label:a="Notifications ({hotkey})",...s}=e,o=Kx(Y$,n),l=lV(n),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),h=p.useRef(null),f=It(t,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;p.useEffect(()=>{const x=y=>{var b;r.length!==0&&r.every(_=>y[_]||y.code===_)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),p.useEffect(()=>{const x=c.current,y=h.current;if(g&&x&&y){const w=()=>{if(!o.isClosePausedRef.current){const j=new CustomEvent(W_);y.dispatchEvent(j),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const j=new CustomEvent(q_);y.dispatchEvent(j),o.isClosePausedRef.current=!1}},_=j=>{!x.contains(j.relatedTarget)&&b()},k=()=>{x.contains(document.activeElement)||b()};return x.addEventListener("focusin",w),x.addEventListener("focusout",_),x.addEventListener("pointermove",w),x.addEventListener("pointerleave",k),window.addEventListener("blur",w),window.addEventListener("focus",b),()=>{x.removeEventListener("focusin",w),x.removeEventListener("focusout",_),x.removeEventListener("pointermove",w),x.removeEventListener("pointerleave",k),window.removeEventListener("blur",w),window.removeEventListener("focus",b)}}},[g,o.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:x})=>{const w=l().map(b=>{const _=b.ref.current,k=[_,...kV(_)];return x==="forwards"?k:k.reverse()});return(x==="forwards"?w.reverse():w).flat()},[l]);return p.useEffect(()=>{const x=h.current;if(x){const y=w=>{var k,j,N;const b=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!b){const O=document.activeElement,I=w.shiftKey;if(w.target===x&&I){(k=u.current)==null||k.focus();return}const D=v({tabbingDirection:I?"backwards":"forwards"}),L=D.findIndex(U=>U===O);pw(D.slice(L+1))?w.preventDefault():I?(j=u.current)==null||j.focus():(N=d.current)==null||N.focus()}};return x.addEventListener("keydown",y),()=>x.removeEventListener("keydown",y)}},[l,v]),i.jsxs(QK,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&i.jsx(H_,{ref:u,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});pw(x)}}),i.jsx(mN.Slot,{scope:n,children:i.jsx(lt.ol,{tabIndex:-1,...s,ref:f})}),g&&i.jsx(H_,{ref:d,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});pw(x)}})]})});X$.displayName=Y$;var J$="ToastFocusProxy",H_=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,s=Kx(J$,n);return i.jsx(Hx,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(l))&&r()}})});H_.displayName=J$;var bp="Toast",hV="toast.swipeStart",fV="toast.swipeMove",mV="toast.swipeCancel",pV="toast.swipeEnd",Q$=p.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:s,...o}=e,[l,c]=Ua({prop:r,defaultProp:a??!0,onChange:s,caller:bp});return i.jsx(kr,{present:n||l,children:i.jsx(yV,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:er(e.onPause),onResume:er(e.onResume),onSwipeStart:Ve(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ve(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ve(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ve(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Q$.displayName=bp;var[gV,vV]=V$(bp,{onClose(){}}),yV=p.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:s,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...g}=e,v=Kx(bp,n),[x,y]=p.useState(null),w=It(t,U=>y(U)),b=p.useRef(null),_=p.useRef(null),k=a||v.duration,j=p.useRef(0),N=p.useRef(k),O=p.useRef(0),{onToastAdd:I,onToastRemove:P}=v,S=er(()=>{var F;(x==null?void 0:x.contains(document.activeElement))&&((F=v.viewport)==null||F.focus()),o()}),D=p.useCallback(U=>{!U||U===1/0||(window.clearTimeout(O.current),j.current=new Date().getTime(),O.current=window.setTimeout(S,U))},[S]);p.useEffect(()=>{const U=v.viewport;if(U){const F=()=>{D(N.current),u==null||u()},M=()=>{const T=new Date().getTime()-j.current;N.current=N.current-T,window.clearTimeout(O.current),c==null||c()};return U.addEventListener(W_,M),U.addEventListener(q_,F),()=>{U.removeEventListener(W_,M),U.removeEventListener(q_,F)}}},[v.viewport,k,c,u,D]),p.useEffect(()=>{s&&!v.isClosePausedRef.current&&D(k)},[s,k,v.isClosePausedRef,D]),p.useEffect(()=>(I(),()=>P()),[I,P]);const L=p.useMemo(()=>x?i4(x):null,[x]);return v.viewport?i.jsxs(i.Fragment,{children:[L&&i.jsx(xV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:L}),i.jsx(gV,{scope:n,onClose:S,children:tu.createPortal(i.jsx(mN.ItemSlot,{scope:n,children:i.jsx(JK,{asChild:!0,onEscapeKeyDown:Ve(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||S(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(lt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ve(e.onKeyDown,U=>{U.key==="Escape"&&(l==null||l(U.nativeEvent),U.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,S()))}),onPointerDown:Ve(e.onPointerDown,U=>{U.button===0&&(b.current={x:U.clientX,y:U.clientY})}),onPointerMove:Ve(e.onPointerMove,U=>{if(!b.current)return;const F=U.clientX-b.current.x,M=U.clientY-b.current.y,T=!!_.current,E=["left","right"].includes(v.swipeDirection),$=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,A=E?$(0,F):0,B=E?0:$(0,M),R=U.pointerType==="touch"?10:2,C={x:A,y:B},W={originalEvent:U,delta:C};T?(_.current=C,Sg(fV,h,W,{discrete:!1})):ET(C,v.swipeDirection,R)?(_.current=C,Sg(hV,d,W,{discrete:!1}),U.target.setPointerCapture(U.pointerId)):(Math.abs(F)>R||Math.abs(M)>R)&&(b.current=null)}),onPointerUp:Ve(e.onPointerUp,U=>{const F=_.current,M=U.target;if(M.hasPointerCapture(U.pointerId)&&M.releasePointerCapture(U.pointerId),_.current=null,b.current=null,F){const T=U.currentTarget,E={originalEvent:U,delta:F};ET(F,v.swipeDirection,v.swipeThreshold)?Sg(pV,m,E,{discrete:!0}):Sg(mV,f,E,{discrete:!0}),T.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),xV=e=>{const{__scopeToast:t,children:n,...r}=e,a=Kx(bp,t),[s,o]=p.useState(!1),[l,c]=p.useState(!1);return jV(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(hh,{asChild:!0,children:i.jsx(Hx,{...r,children:s&&i.jsxs(i.Fragment,{children:[a.label," ",n]})})})},bV="ToastTitle",Z$=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(lt.div,{...r,ref:t})});Z$.displayName=bV;var wV="ToastDescription",e4=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(lt.div,{...r,ref:t})});e4.displayName=wV;var t4="ToastAction",n4=p.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(a4,{altText:n,asChild:!0,children:i.jsx(pN,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${t4}\`. Expected non-empty \`string\`.`),null)});n4.displayName=t4;var r4="ToastClose",pN=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=vV(r4,n);return i.jsx(a4,{asChild:!0,children:i.jsx(lt.button,{type:"button",...r,ref:t,onClick:Ve(e.onClick,a.onClose)})})});pN.displayName=r4;var a4=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return i.jsx(lt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function i4(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),_V(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!a)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...i4(r))}}),t}function Sg(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?hN(a,s):a.dispatchEvent(s)}var ET=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),s=r>a;return t==="left"||t==="right"?s&&r>n:!s&&a>n};function jV(e=()=>{}){const t=er(e);tr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function _V(e){return e.nodeType===e.ELEMENT_NODE}function kV(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function pw(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var SV=G$,s4=X$,o4=Q$,l4=Z$,c4=e4,u4=n4,d4=pN;function h4(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=h4(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function an(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=h4(e))&&(r&&(r+=" "),r+=t);return r}const TT=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,PT=an,wp=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return PT(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:s}=t,o=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=s==null?void 0:s[u];if(d===null)return null;const f=TT(d)||TT(h);return a[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(g=>{let[v,x]=g;return Array.isArray(x)?x.includes({...s,...l}[v]):{...s,...l}[v]===x})?[...u,h,f]:u},[]);return PT(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),f4=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...CV,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:f4("lucide",a),...l},[...o.map(([u,d])=>p.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=(e,t)=>{const n=p.forwardRef(({className:r,...a},s)=>p.createElement(AV,{ref:s,iconNode:t,className:f4(`lucide-${NV(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=pt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jp=pt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=pt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=pt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=pt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=pt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=pt("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=pt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=pt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=pt("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=pt("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=pt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=pt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=pt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=pt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=pt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=pt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=pt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=pt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=pt("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=pt("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=pt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=pt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=pt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=pt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=pt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=pt("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=pt("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=pt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=pt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RV=pt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=pt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=pt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=pt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=pt("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=pt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=pt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=pt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=pt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=pt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=pt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=pt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=pt("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=pt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=pt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=pt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=pt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=pt("PlugZap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=pt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=pt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=pt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=pt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=pt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=pt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=pt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=pt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=pt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=pt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=pt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=pt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=pt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=pt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=pt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=pt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=pt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=pt("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=pt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=pt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=pt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=pt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),wN="-",zV=e=>{const t=qV(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(wN);return l[0]===""&&l.length!==1&&l.shift(),S4(l,t)||WV(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},S4=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?S4(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const s=e.join(wN);return(o=t.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},zT=/^\[(.+)\]$/,WV=e=>{if(zT.test(e)){const t=zT.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},qV=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return KV(Object.entries(e.classGroups),n).forEach(([s,o])=>{K_(o,r,s,t)}),r},K_=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const s=a===""?t:WT(t,a);s.classGroupId=n;return}if(typeof a=="function"){if(HV(a)){K_(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([s,o])=>{K_(o,WT(t,s),n,r)})})},WT=(e,t)=>{let n=e;return t.split(wN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},HV=e=>e.isThemeGetter,KV=(e,t)=>t?e.map(([n,r])=>{const a=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[t+o,l])):s);return[n,a]}):e,VV=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(s,o)=>{n.set(s,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return a(s,o),o},set(s,o){n.has(s)?n.set(s,o):a(s,o)}}},N4="!",GV=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],s=t.length,o=l=>{const c=[];let u=0,d=0,h;for(let x=0;x<l.length;x++){let y=l[x];if(u===0){if(y===a&&(r||l.slice(x,x+s)===t)){c.push(l.slice(d,x)),d=x+s;continue}if(y==="/"){h=x;continue}}y==="["?u++:y==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(N4),g=m?f.substring(1):f,v=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:o}):o},YV=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},XV=e=>({cache:VV(e.cacheSize),parseClassName:GV(e),...zV(e)}),JV=/\s+/,QV=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,s=[],o=e.trim().split(JV);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(u);let g=!!m,v=r(g?f.substring(0,m):f);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=r(f),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}const x=YV(d).join(":"),y=h?x+N4:x,w=y+v;if(s.includes(w))continue;s.push(w);const b=a(v,g);for(let _=0;_<b.length;++_){const k=b[_];s.push(y+k)}l=u+(l.length>0?" "+l:l)}return l};function ZV(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=C4(t))&&(r&&(r+=" "),r+=n);return r}const C4=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=C4(e[r]))&&(n&&(n+=" "),n+=t);return n};function eG(e,...t){let n,r,a,s=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return n=XV(u),r=n.cache.get,a=n.cache.set,s=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=QV(c,n);return a(c,d),d}return function(){return s(ZV.apply(null,arguments))}}const Mn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},A4=/^\[(?:([a-z-]+):)?(.+)\]$/i,tG=/^\d+\/\d+$/,nG=new Set(["px","full","screen"]),rG=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aG=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iG=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,sG=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oG=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ks=e=>od(e)||nG.has(e)||tG.test(e),Uo=e=>fh(e,"length",pG),od=e=>!!e&&!Number.isNaN(Number(e)),yw=e=>fh(e,"number",od),Hh=e=>!!e&&Number.isInteger(Number(e)),lG=e=>e.endsWith("%")&&od(e.slice(0,-1)),Ft=e=>A4.test(e),Bo=e=>rG.test(e),cG=new Set(["length","size","percentage"]),uG=e=>fh(e,cG,E4),dG=e=>fh(e,"position",E4),hG=new Set(["image","url"]),fG=e=>fh(e,hG,vG),mG=e=>fh(e,"",gG),Kh=()=>!0,fh=(e,t,n)=>{const r=A4.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},pG=e=>aG.test(e)&&!iG.test(e),E4=()=>!1,gG=e=>sG.test(e),vG=e=>oG.test(e),yG=()=>{const e=Mn("colors"),t=Mn("spacing"),n=Mn("blur"),r=Mn("brightness"),a=Mn("borderColor"),s=Mn("borderRadius"),o=Mn("borderSpacing"),l=Mn("borderWidth"),c=Mn("contrast"),u=Mn("grayscale"),d=Mn("hueRotate"),h=Mn("invert"),f=Mn("gap"),m=Mn("gradientColorStops"),g=Mn("gradientColorStopPositions"),v=Mn("inset"),x=Mn("margin"),y=Mn("opacity"),w=Mn("padding"),b=Mn("saturate"),_=Mn("scale"),k=Mn("sepia"),j=Mn("skew"),N=Mn("space"),O=Mn("translate"),I=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto",Ft,t],D=()=>[Ft,t],L=()=>["",Ks,Uo],U=()=>["auto",od,Ft],F=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["solid","dashed","dotted","double","none"],T=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],E=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Ft],A=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[od,Ft];return{cacheSize:500,separator:":",theme:{colors:[Kh],spacing:[Ks,Uo],blur:["none","",Bo,Ft],brightness:B(),borderColor:[e],borderRadius:["none","","full",Bo,Ft],borderSpacing:D(),borderWidth:L(),contrast:B(),grayscale:$(),hueRotate:B(),invert:$(),gap:D(),gradientColorStops:[e],gradientColorStopPositions:[lG,Uo],inset:S(),margin:S(),opacity:B(),padding:D(),saturate:B(),scale:B(),sepia:$(),skew:B(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Ft]}],container:["container"],columns:[{columns:[Bo]}],"break-after":[{"break-after":A()}],"break-before":[{"break-before":A()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...F(),Ft]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Hh,Ft]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ft]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Hh,Ft]}],"grid-cols":[{"grid-cols":[Kh]}],"col-start-end":[{col:["auto",{span:["full",Hh,Ft]},Ft]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[Kh]}],"row-start-end":[{row:["auto",{span:[Hh,Ft]},Ft]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ft]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ft]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...E()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...E(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...E(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ft,t]}],"min-w":[{"min-w":[Ft,t,"min","max","fit"]}],"max-w":[{"max-w":[Ft,t,"none","full","min","max","fit","prose",{screen:[Bo]},Bo]}],h:[{h:[Ft,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ft,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ft,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ft,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Bo,Uo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",yw]}],"font-family":[{font:[Kh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ft]}],"line-clamp":[{"line-clamp":["none",od,yw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ks,Ft]}],"list-image":[{"list-image":["none",Ft]}],"list-style-type":[{list:["none","disc","decimal",Ft]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...M(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ks,Uo]}],"underline-offset":[{"underline-offset":["auto",Ks,Ft]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ft]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ft]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...F(),dG]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",uG]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fG]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...M(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:M()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...M()]}],"outline-offset":[{"outline-offset":[Ks,Ft]}],"outline-w":[{outline:[Ks,Uo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ks,Uo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Bo,mG]}],"shadow-color":[{shadow:[Kh]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...T(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":T()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Bo,Ft]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ft]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",Ft]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ft]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Hh,Ft]}],"translate-x":[{"translate-x":[O]}],"translate-y":[{"translate-y":[O]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ft]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ft]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ft]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ks,Uo,yw]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},xG=eG(yG);function Pe(...e){return xG(an(e))}function bG(e,t){if(!t||t.length===0)return;const n=Object.keys(t[0]),r=[n.join(","),...t.map(l=>n.map(c=>{const u=l[c],d=u==null?"":String(u),h='"'+d.replace(/"/g,'""')+'"';return/[",\n]/.test(d)?h:d}).join(","))].join(`
`),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),o=URL.createObjectURL(a);s.setAttribute("href",o),s.setAttribute("download",e),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}function T4(e){if(typeof e=="string"){let t=e.replace(/([A-Z0-9._%+-]+)@([A-Z0-9.-]+)\.[A-Z]{2,}/gi,"***@***");return t=t.replace(/\b\+?\d[\d\s-]{6,}\b/g,n=>n.slice(0,Math.max(0,n.length-4)).replace(/\d/g,"*")+n.slice(-4)),t=t.replace(/(\d+\.\d+\.\d+)\.\d+/g,"$1.*"),t}if(e&&typeof e=="object"){const t=Array.isArray(e)?[]:{};for(const n of Object.keys(e))t[n]=T4(e[n]);return t}return e}function P4(e){return e?e.replace(/\*\*(.+?)\*\*/g,"$1").replace(/\*(.+?)\*/g,"$1").replace(/__(.+?)__/g,"$1").replace(/_(.+?)_/g,"$1").replace(/~~(.+?)~~/g,"$1").replace(/`(.+?)`/g,"$1").replace(/\[(.+?)\]\([^)]+\)/g,"$1").replace(/^#{1,6}\s+/gm,"").trim():""}function sy(e){if(!e)return!1;const t=e.split("?")[0].split("#")[0];return/\.(jpg|jpeg|png|webp|avif|gif|svg)$/i.test(t)?!0:[/https?:\/\/picsum\.photos\//,/https?:\/\/placehold\.co\//,/https?:\/\/via\.placeholder\.com\//].some(r=>r.test(e))}function O4(e){if(!e)return[];const t=/https?:\/\/[^\s]+/g,n=e.match(t);if(!n)return[];const r=n.map(a=>a.replace(/[.,)\]}]+$/,""));return Array.from(new Set(r))}const wG=SV,I4=p.forwardRef(({className:e,...t},n)=>i.jsx(s4,{ref:n,className:Pe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));I4.displayName=s4.displayName;const jG=wp("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),R4=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(o4,{ref:r,className:Pe(jG({variant:t}),e),...n}));R4.displayName=o4.displayName;const _G=p.forwardRef(({className:e,...t},n)=>i.jsx(u4,{ref:n,className:Pe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));_G.displayName=u4.displayName;const M4=p.forwardRef(({className:e,...t},n)=>i.jsx(d4,{ref:n,className:Pe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(Gx,{className:"h-4 w-4"})}));M4.displayName=d4.displayName;const D4=p.forwardRef(({className:e,...t},n)=>i.jsx(l4,{ref:n,className:Pe("text-sm font-semibold",e),...t}));D4.displayName=l4.displayName;const L4=p.forwardRef(({className:e,...t},n)=>i.jsx(c4,{ref:n,className:Pe("text-sm opacity-90",e),...t}));L4.displayName=c4.displayName;function kG(){const{toasts:e}=nu();return i.jsxs(wG,{children:[e.map(function({id:t,title:n,description:r,action:a,...s}){return i.jsxs(R4,{...s,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(D4,{children:n}),r&&i.jsx(L4,{children:r})]}),a,i.jsx(M4,{})]},t)}),i.jsx(I4,{})]})}var qT=["light","dark"],SG="(prefers-color-scheme: dark)",NG=p.createContext(void 0),CG={setTheme:e=>{},themes:[]},AG=()=>{var e;return(e=p.useContext(NG))!=null?e:CG};p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:s,value:o,attrs:l,nonce:c})=>{let u=s==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=a?qT.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(g,v=!1,x=!0)=>{let y=o?o[g]:g,w=v?g+"|| ''":`'${y}'`,b="";return a&&x&&!v&&qT.includes(g)&&(b+=`d.style.colorScheme = '${g}';`),n==="class"?v||y?b+=`c.add(${w})`:b+="null":y&&(b+=`d[s](n,${w})`),b},m=e?`!function(){${d}${f(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${SG}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(s,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(s,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var EG=e=>{switch(e){case"success":return OG;case"info":return RG;case"warning":return IG;case"error":return MG;default:return null}},TG=Array(12).fill(0),PG=({visible:e,className:t})=>V.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},V.createElement("div",{className:"sonner-spinner"},TG.map((n,r)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),OG=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),IG=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),RG=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),MG=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),DG=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),LG=()=>{let[e,t]=V.useState(document.hidden);return V.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},V_=1,$G=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:V_++,s=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),s?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0,s,o=r.then(async c=>{if(s=["resolve",c],V.isValidElement(c))a=!1,this.create({id:n,type:"default",message:c});else if(UG(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(s=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>s[0]==="reject"?u(s[1]):c(s[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||V_++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Sa=new $G,FG=(e,t)=>{let n=(t==null?void 0:t.id)||V_++;return Sa.addToast({title:e,...t,id:n}),n},UG=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",BG=FG,zG=()=>Sa.toasts,WG=()=>Sa.getActiveToasts(),Be=Object.assign(BG,{success:Sa.success,info:Sa.info,warning:Sa.warning,error:Sa.error,custom:Sa.custom,message:Sa.message,promise:Sa.promise,dismiss:Sa.dismiss,loading:Sa.loading},{getHistory:zG,getToasts:WG});function qG(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}qG(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Ng(e){return e.label!==void 0}var HG=3,KG="32px",VG="16px",HT=4e3,GG=356,YG=14,XG=20,JG=200;function Li(...e){return e.filter(Boolean).join(" ")}function QG(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var ZG=e=>{var t,n,r,a,s,o,l,c,u,d,h;let{invert:f,toast:m,unstyled:g,interacting:v,setHeights:x,visibleToasts:y,heights:w,index:b,toasts:_,expanded:k,removeToast:j,defaultRichColors:N,closeButton:O,style:I,cancelButtonStyle:P,actionButtonStyle:S,className:D="",descriptionClassName:L="",duration:U,position:F,gap:M,loadingIcon:T,expandByDefault:E,classNames:$,icons:A,closeButtonAriaLabel:B="Close toast",pauseWhenPageIsHidden:R}=e,[C,W]=V.useState(null),[Q,X]=V.useState(null),[Z,te]=V.useState(!1),[J,ie]=V.useState(!1),[ge,ae]=V.useState(!1),[Re,me]=V.useState(!1),[K,de]=V.useState(!1),[$e,nt]=V.useState(0),[Ye,ft]=V.useState(0),Ze=V.useRef(m.duration||U||HT),ut=V.useRef(null),ee=V.useRef(null),qe=b===0,dt=b+1<=y,se=m.type,ve=m.dismissible!==!1,oe=m.className||"",Xe=m.descriptionClassName||"",ke=V.useMemo(()=>w.findIndex(et=>et.toastId===m.id)||0,[w,m.id]),rt=V.useMemo(()=>{var et;return(et=m.closeButton)!=null?et:O},[m.closeButton,O]),bt=V.useMemo(()=>m.duration||U||HT,[m.duration,U]),ue=V.useRef(0),Se=V.useRef(0),we=V.useRef(0),Te=V.useRef(null),[je,Ee]=F.split("-"),Ue=V.useMemo(()=>w.reduce((et,Ie,Y)=>Y>=ke?et:et+Ie.height,0),[w,ke]),H=LG(),q=m.invert||f,re=se==="loading";Se.current=V.useMemo(()=>ke*M+Ue,[ke,Ue]),V.useEffect(()=>{Ze.current=bt},[bt]),V.useEffect(()=>{te(!0)},[]),V.useEffect(()=>{let et=ee.current;if(et){let Ie=et.getBoundingClientRect().height;return ft(Ie),x(Y=>[{toastId:m.id,height:Ie,position:m.position},...Y]),()=>x(Y=>Y.filter(le=>le.toastId!==m.id))}},[x,m.id]),V.useLayoutEffect(()=>{if(!Z)return;let et=ee.current,Ie=et.style.height;et.style.height="auto";let Y=et.getBoundingClientRect().height;et.style.height=Ie,ft(Y),x(le=>le.find(Fe=>Fe.toastId===m.id)?le.map(Fe=>Fe.toastId===m.id?{...Fe,height:Y}:Fe):[{toastId:m.id,height:Y,position:m.position},...le])},[Z,m.title,m.description,x,m.id]);let he=V.useCallback(()=>{ie(!0),nt(Se.current),x(et=>et.filter(Ie=>Ie.toastId!==m.id)),setTimeout(()=>{j(m)},JG)},[m,j,x,Se]);V.useEffect(()=>{if(m.promise&&se==="loading"||m.duration===1/0||m.type==="loading")return;let et;return k||v||R&&H?(()=>{if(we.current<ue.current){let Ie=new Date().getTime()-ue.current;Ze.current=Ze.current-Ie}we.current=new Date().getTime()})():Ze.current!==1/0&&(ue.current=new Date().getTime(),et=setTimeout(()=>{var Ie;(Ie=m.onAutoClose)==null||Ie.call(m,m),he()},Ze.current)),()=>clearTimeout(et)},[k,v,m,se,R,H,he]),V.useEffect(()=>{m.delete&&he()},[he,m.delete]);function Me(){var et,Ie,Y;return A!=null&&A.loading?V.createElement("div",{className:Li($==null?void 0:$.loader,(et=m==null?void 0:m.classNames)==null?void 0:et.loader,"sonner-loader"),"data-visible":se==="loading"},A.loading):T?V.createElement("div",{className:Li($==null?void 0:$.loader,(Ie=m==null?void 0:m.classNames)==null?void 0:Ie.loader,"sonner-loader"),"data-visible":se==="loading"},T):V.createElement(PG,{className:Li($==null?void 0:$.loader,(Y=m==null?void 0:m.classNames)==null?void 0:Y.loader),visible:se==="loading"})}return V.createElement("li",{tabIndex:0,ref:ee,className:Li(D,oe,$==null?void 0:$.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,$==null?void 0:$.default,$==null?void 0:$[se],(n=m==null?void 0:m.classNames)==null?void 0:n[se]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:N,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":Z,"data-promise":!!m.promise,"data-swiped":K,"data-removed":J,"data-visible":dt,"data-y-position":je,"data-x-position":Ee,"data-index":b,"data-front":qe,"data-swiping":ge,"data-dismissible":ve,"data-type":se,"data-invert":q,"data-swipe-out":Re,"data-swipe-direction":Q,"data-expanded":!!(k||E&&Z),style:{"--index":b,"--toasts-before":b,"--z-index":_.length-b,"--offset":`${J?$e:Se.current}px`,"--initial-height":E?"auto":`${Ye}px`,...I,...m.style},onDragEnd:()=>{ae(!1),W(null),Te.current=null},onPointerDown:et=>{re||!ve||(ut.current=new Date,nt(Se.current),et.target.setPointerCapture(et.pointerId),et.target.tagName!=="BUTTON"&&(ae(!0),Te.current={x:et.clientX,y:et.clientY}))},onPointerUp:()=>{var et,Ie,Y,le;if(Re||!ve)return;Te.current=null;let Fe=Number(((et=ee.current)==null?void 0:et.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Je=Number(((Ie=ee.current)==null?void 0:Ie.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),it=new Date().getTime()-((Y=ut.current)==null?void 0:Y.getTime()),Pt=C==="x"?Fe:Je,Ot=Math.abs(Pt)/it;if(Math.abs(Pt)>=XG||Ot>.11){nt(Se.current),(le=m.onDismiss)==null||le.call(m,m),X(C==="x"?Fe>0?"right":"left":Je>0?"down":"up"),he(),me(!0),de(!1);return}ae(!1),W(null)},onPointerMove:et=>{var Ie,Y,le,Fe;if(!Te.current||!ve||((Ie=window.getSelection())==null?void 0:Ie.toString().length)>0)return;let Je=et.clientY-Te.current.y,it=et.clientX-Te.current.x,Pt=(Y=e.swipeDirections)!=null?Y:QG(F);!C&&(Math.abs(it)>1||Math.abs(Je)>1)&&W(Math.abs(it)>Math.abs(Je)?"x":"y");let Ot={x:0,y:0};C==="y"?(Pt.includes("top")||Pt.includes("bottom"))&&(Pt.includes("top")&&Je<0||Pt.includes("bottom")&&Je>0)&&(Ot.y=Je):C==="x"&&(Pt.includes("left")||Pt.includes("right"))&&(Pt.includes("left")&&it<0||Pt.includes("right")&&it>0)&&(Ot.x=it),(Math.abs(Ot.x)>0||Math.abs(Ot.y)>0)&&de(!0),(le=ee.current)==null||le.style.setProperty("--swipe-amount-x",`${Ot.x}px`),(Fe=ee.current)==null||Fe.style.setProperty("--swipe-amount-y",`${Ot.y}px`)}},rt&&!m.jsx?V.createElement("button",{"aria-label":B,"data-disabled":re,"data-close-button":!0,onClick:re||!ve?()=>{}:()=>{var et;he(),(et=m.onDismiss)==null||et.call(m,m)},className:Li($==null?void 0:$.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(s=A==null?void 0:A.close)!=null?s:DG):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:V.createElement(V.Fragment,null,se||m.icon||m.promise?V.createElement("div",{"data-icon":"",className:Li($==null?void 0:$.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Me():null,m.type!=="loading"?m.icon||(A==null?void 0:A[se])||EG(se):null):null,V.createElement("div",{"data-content":"",className:Li($==null?void 0:$.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},V.createElement("div",{"data-title":"",className:Li($==null?void 0:$.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?V.createElement("div",{"data-description":"",className:Li(L,Xe,$==null?void 0:$.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&Ng(m.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:et=>{var Ie,Y;Ng(m.cancel)&&ve&&((Y=(Ie=m.cancel).onClick)==null||Y.call(Ie,et),he())},className:Li($==null?void 0:$.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&Ng(m.action)?V.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||S,onClick:et=>{var Ie,Y;Ng(m.action)&&((Y=(Ie=m.action).onClick)==null||Y.call(Ie,et),!et.defaultPrevented&&he())},className:Li($==null?void 0:$.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function KT(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function eY(e,t){let n={};return[e,t].forEach((r,a)=>{let s=a===1,o=s?"--mobile-offset":"--offset",l=s?VG:KG;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var tY=p.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:g=HG,toastOptions:v,dir:x=KT(),gap:y=YG,loadingIcon:w,icons:b,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:k}=e,[j,N]=V.useState([]),O=V.useMemo(()=>Array.from(new Set([r].concat(j.filter(R=>R.position).map(R=>R.position)))),[j,r]),[I,P]=V.useState([]),[S,D]=V.useState(!1),[L,U]=V.useState(!1),[F,M]=V.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),T=V.useRef(null),E=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=V.useRef(null),A=V.useRef(!1),B=V.useCallback(R=>{N(C=>{var W;return(W=C.find(Q=>Q.id===R.id))!=null&&W.delete||Sa.dismiss(R.id),C.filter(({id:Q})=>Q!==R.id)})},[]);return V.useEffect(()=>Sa.subscribe(R=>{if(R.dismiss){N(C=>C.map(W=>W.id===R.id?{...W,delete:!0}:W));return}setTimeout(()=>{F$.flushSync(()=>{N(C=>{let W=C.findIndex(Q=>Q.id===R.id);return W!==-1?[...C.slice(0,W),{...C[W],...R},...C.slice(W+1)]:[R,...C]})})})}),[]),V.useEffect(()=>{if(d!=="system"){M(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?M("dark"):M("light")),typeof window>"u")return;let R=window.matchMedia("(prefers-color-scheme: dark)");try{R.addEventListener("change",({matches:C})=>{M(C?"dark":"light")})}catch{R.addListener(({matches:W})=>{try{M(W?"dark":"light")}catch(Q){console.error(Q)}})}},[d]),V.useEffect(()=>{j.length<=1&&D(!1)},[j]),V.useEffect(()=>{let R=C=>{var W,Q;a.every(X=>C[X]||C.code===X)&&(D(!0),(W=T.current)==null||W.focus()),C.code==="Escape"&&(document.activeElement===T.current||(Q=T.current)!=null&&Q.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[a]),V.useEffect(()=>{if(T.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,A.current=!1)}},[T.current]),V.createElement("section",{ref:t,"aria-label":`${_} ${E}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((R,C)=>{var W;let[Q,X]=R.split("-");return j.length?V.createElement("ol",{key:R,dir:x==="auto"?KT():x,tabIndex:-1,ref:T,className:l,"data-sonner-toaster":!0,"data-theme":F,"data-y-position":Q,"data-lifted":S&&j.length>1&&!s,"data-x-position":X,style:{"--front-toast-height":`${((W=I[0])==null?void 0:W.height)||0}px`,"--width":`${GG}px`,"--gap":`${y}px`,...m,...eY(c,u)},onBlur:Z=>{A.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(A.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||A.current||(A.current=!0,$.current=Z.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{L||D(!1)},onDragEnd:()=>D(!1),onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||U(!0)},onPointerUp:()=>U(!1)},j.filter(Z=>!Z.position&&C===0||Z.position===R).map((Z,te)=>{var J,ie;return V.createElement(ZG,{key:Z.id,icons:b,index:te,toast:Z,defaultRichColors:h,duration:(J=v==null?void 0:v.duration)!=null?J:f,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:g,closeButton:(ie=v==null?void 0:v.closeButton)!=null?ie:o,interacting:L,position:R,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:B,toasts:j.filter(ge=>ge.position==Z.position),heights:I.filter(ge=>ge.position==Z.position),setHeights:P,expandByDefault:s,gap:y,loadingIcon:w,expanded:S,pauseWhenPageIsHidden:k,swipeDirections:e.swipeDirections})})):null}))});const $4=({...e})=>{const{theme:t="system"}=AG();return i.jsx(tY,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},xw=Object.freeze(Object.defineProperty({__proto__:null,Toaster:$4,toast:Be},Symbol.toStringTag,{value:"Module"}));var nY=bS[" useId ".trim().toString()]||(()=>{}),rY=0;function fr(e){const[t,n]=p.useState(nY());return tr(()=>{e||n(r=>r??String(rY++))},[e]),e||(t?`radix-${t}`:"")}const aY=["top","right","bottom","left"],Cl=Math.min,Qa=Math.max,oy=Math.round,Cg=Math.floor,Os=e=>({x:e,y:e}),iY={left:"right",right:"left",bottom:"top",top:"bottom"},sY={start:"end",end:"start"};function G_(e,t,n){return Qa(e,Cl(t,n))}function _o(e,t){return typeof e=="function"?e(t):e}function ko(e){return e.split("-")[0]}function mh(e){return e.split("-")[1]}function jN(e){return e==="x"?"y":"x"}function _N(e){return e==="y"?"height":"width"}const oY=new Set(["top","bottom"]);function _s(e){return oY.has(ko(e))?"y":"x"}function kN(e){return jN(_s(e))}function lY(e,t,n){n===void 0&&(n=!1);const r=mh(e),a=kN(e),s=_N(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=ly(o)),[o,ly(o)]}function cY(e){const t=ly(e);return[Y_(e),t,Y_(t)]}function Y_(e){return e.replace(/start|end/g,t=>sY[t])}const VT=["left","right"],GT=["right","left"],uY=["top","bottom"],dY=["bottom","top"];function hY(e,t,n){switch(e){case"top":case"bottom":return n?t?GT:VT:t?VT:GT;case"left":case"right":return t?uY:dY;default:return[]}}function fY(e,t,n,r){const a=mh(e);let s=hY(ko(e),n==="start",r);return a&&(s=s.map(o=>o+"-"+a),t&&(s=s.concat(s.map(Y_)))),s}function ly(e){return e.replace(/left|right|bottom|top/g,t=>iY[t])}function mY(e){return{top:0,right:0,bottom:0,left:0,...e}}function F4(e){return typeof e!="number"?mY(e):{top:e,right:e,bottom:e,left:e}}function cy(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function YT(e,t,n){let{reference:r,floating:a}=e;const s=_s(t),o=kN(t),l=_N(o),c=ko(t),u=s==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,f=r[l]/2-a[l]/2;let m;switch(c){case"top":m={x:d,y:r.y-a.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-a.width,y:h};break;default:m={x:r.x,y:r.y}}switch(mh(t)){case"start":m[o]-=f*(n&&u?-1:1);break;case"end":m[o]+=f*(n&&u?-1:1);break}return m}const pY=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=YT(u,r,c),f=r,m={},g=0;for(let v=0;v<l.length;v++){const{name:x,fn:y}=l[v],{x:w,y:b,data:_,reset:k}=await y({x:d,y:h,initialPlacement:r,placement:f,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=w??d,h=b??h,m={...m,[x]:{...m[x],..._}},k&&g<=50&&(g++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:d,y:h}=YT(u,f,c)),v=-1)}return{x:d,y:h,placement:f,strategy:a,middlewareData:m}};async function lm(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:s,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=_o(t,e),g=F4(m),x=l[f?h==="floating"?"reference":"floating":h],y=cy(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),w=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),_=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},k=cy(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:b,strategy:c}):w);return{top:(y.top-k.top+g.top)/_.y,bottom:(k.bottom-y.bottom+g.bottom)/_.y,left:(y.left-k.left+g.left)/_.x,right:(k.right-y.right+g.right)/_.x}}const gY=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:s,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=_o(e,t)||{};if(u==null)return{};const h=F4(d),f={x:n,y:r},m=kN(a),g=_N(m),v=await o.getDimensions(u),x=m==="y",y=x?"top":"left",w=x?"bottom":"right",b=x?"clientHeight":"clientWidth",_=s.reference[g]+s.reference[m]-f[m]-s.floating[g],k=f[m]-s.reference[m],j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=j?j[b]:0;(!N||!await(o.isElement==null?void 0:o.isElement(j)))&&(N=l.floating[b]||s.floating[g]);const O=_/2-k/2,I=N/2-v[g]/2-1,P=Cl(h[y],I),S=Cl(h[w],I),D=P,L=N-v[g]-S,U=N/2-v[g]/2+O,F=G_(D,U,L),M=!c.arrow&&mh(a)!=null&&U!==F&&s.reference[g]/2-(U<D?P:S)-v[g]/2<0,T=M?U<D?U-D:U-L:0;return{[m]:f[m]+T,data:{[m]:F,centerOffset:U-F-T,...M&&{alignmentOffset:T}},reset:M}}}),vY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...x}=_o(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ko(a),w=_s(l),b=ko(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),k=f||(b||!v?[ly(l)]:cY(l)),j=g!=="none";!f&&j&&k.push(...fY(l,v,g,_));const N=[l,...k],O=await lm(t,x),I=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(d&&I.push(O[y]),h){const U=lY(a,o,_);I.push(O[U[0]],O[U[1]])}if(P=[...P,{placement:a,overflows:I}],!I.every(U=>U<=0)){var S,D;const U=(((S=s.flip)==null?void 0:S.index)||0)+1,F=N[U];if(F&&(!(h==="alignment"?w!==_s(F):!1)||P.every(E=>E.overflows[0]>0&&_s(E.placement)===w)))return{data:{index:U,overflows:P},reset:{placement:F}};let M=(D=P.filter(T=>T.overflows[0]<=0).sort((T,E)=>T.overflows[1]-E.overflows[1])[0])==null?void 0:D.placement;if(!M)switch(m){case"bestFit":{var L;const T=(L=P.filter(E=>{if(j){const $=_s(E.placement);return $===w||$==="y"}return!0}).map(E=>[E.placement,E.overflows.filter($=>$>0).reduce(($,A)=>$+A,0)]).sort((E,$)=>E[1]-$[1])[0])==null?void 0:L[0];T&&(M=T);break}case"initialPlacement":M=l;break}if(a!==M)return{reset:{placement:M}}}return{}}}};function XT(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function JT(e){return aY.some(t=>e[t]>=0)}const yY=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=_o(e,t);switch(r){case"referenceHidden":{const s=await lm(t,{...a,elementContext:"reference"}),o=XT(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:JT(o)}}}case"escaped":{const s=await lm(t,{...a,altBoundary:!0}),o=XT(s,n.floating);return{data:{escapedOffsets:o,escaped:JT(o)}}}default:return{}}}}},U4=new Set(["left","top"]);async function xY(e,t){const{placement:n,platform:r,elements:a}=e,s=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=ko(n),l=mh(n),c=_s(n)==="y",u=U4.has(o)?-1:1,d=s&&c?-1:1,h=_o(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const bY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:s,placement:o,middlewareData:l}=t,c=await xY(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:s+c.y,data:{...c,placement:o}}}}},wY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:y,y:w}=x;return{x:y,y:w}}},...c}=_o(e,t),u={x:n,y:r},d=await lm(t,c),h=_s(ko(a)),f=jN(h);let m=u[f],g=u[h];if(s){const x=f==="y"?"top":"left",y=f==="y"?"bottom":"right",w=m+d[x],b=m-d[y];m=G_(w,m,b)}if(o){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",w=g+d[x],b=g-d[y];g=G_(w,g,b)}const v=l.fn({...t,[f]:m,[h]:g});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[f]:s,[h]:o}}}}}},jY=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:s,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=_o(e,t),d={x:n,y:r},h=_s(a),f=jN(h);let m=d[f],g=d[h];const v=_o(l,t),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const b=f==="y"?"height":"width",_=s.reference[f]-s.floating[b]+x.mainAxis,k=s.reference[f]+s.reference[b]-x.mainAxis;m<_?m=_:m>k&&(m=k)}if(u){var y,w;const b=f==="y"?"width":"height",_=U4.has(ko(a)),k=s.reference[h]-s.floating[b]+(_&&((y=o.offset)==null?void 0:y[h])||0)+(_?0:x.crossAxis),j=s.reference[h]+s.reference[b]+(_?0:((w=o.offset)==null?void 0:w[h])||0)-(_?x.crossAxis:0);g<k?g=k:g>j&&(g=j)}return{[f]:m,[h]:g}}}},_Y=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:s,platform:o,elements:l}=t,{apply:c=()=>{},...u}=_o(e,t),d=await lm(t,u),h=ko(a),f=mh(a),m=_s(a)==="y",{width:g,height:v}=s.floating;let x,y;h==="top"||h==="bottom"?(x=h,y=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=h,x=f==="end"?"top":"bottom");const w=v-d.top-d.bottom,b=g-d.left-d.right,_=Cl(v-d[x],w),k=Cl(g-d[y],b),j=!t.middlewareData.shift;let N=_,O=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(O=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=w),j&&!f){const P=Qa(d.left,0),S=Qa(d.right,0),D=Qa(d.top,0),L=Qa(d.bottom,0);m?O=g-2*(P!==0||S!==0?P+S:Qa(d.left,d.right)):N=v-2*(D!==0||L!==0?D+L:Qa(d.top,d.bottom))}await c({...t,availableWidth:O,availableHeight:N});const I=await o.getDimensions(l.floating);return g!==I.width||v!==I.height?{reset:{rects:!0}}:{}}}};function Yx(){return typeof window<"u"}function ph(e){return B4(e)?(e.nodeName||"").toLowerCase():"#document"}function ni(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Us(e){var t;return(t=(B4(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function B4(e){return Yx()?e instanceof Node||e instanceof ni(e).Node:!1}function ss(e){return Yx()?e instanceof Element||e instanceof ni(e).Element:!1}function Ds(e){return Yx()?e instanceof HTMLElement||e instanceof ni(e).HTMLElement:!1}function QT(e){return!Yx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ni(e).ShadowRoot}const kY=new Set(["inline","contents"]);function kp(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=os(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!kY.has(a)}const SY=new Set(["table","td","th"]);function NY(e){return SY.has(ph(e))}const CY=[":popover-open",":modal"];function Xx(e){return CY.some(t=>{try{return e.matches(t)}catch{return!1}})}const AY=["transform","translate","scale","rotate","perspective"],EY=["transform","translate","scale","rotate","perspective","filter"],TY=["paint","layout","strict","content"];function SN(e){const t=NN(),n=ss(e)?os(e):e;return AY.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||EY.some(r=>(n.willChange||"").includes(r))||TY.some(r=>(n.contain||"").includes(r))}function PY(e){let t=Al(e);for(;Ds(t)&&!Pd(t);){if(SN(t))return t;if(Xx(t))return null;t=Al(t)}return null}function NN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const OY=new Set(["html","body","#document"]);function Pd(e){return OY.has(ph(e))}function os(e){return ni(e).getComputedStyle(e)}function Jx(e){return ss(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Al(e){if(ph(e)==="html")return e;const t=e.assignedSlot||e.parentNode||QT(e)&&e.host||Us(e);return QT(t)?t.host:t}function z4(e){const t=Al(e);return Pd(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ds(t)&&kp(t)?t:z4(t)}function cm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=z4(e),s=a===((r=e.ownerDocument)==null?void 0:r.body),o=ni(a);if(s){const l=X_(o);return t.concat(o,o.visualViewport||[],kp(a)?a:[],l&&n?cm(l):[])}return t.concat(a,cm(a,[],n))}function X_(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function W4(e){const t=os(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Ds(e),s=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=oy(n)!==s||oy(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function CN(e){return ss(e)?e:e.contextElement}function ld(e){const t=CN(e);if(!Ds(t))return Os(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:s}=W4(t);let o=(s?oy(n.width):n.width)/r,l=(s?oy(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const IY=Os(0);function q4(e){const t=ni(e);return!NN()||!t.visualViewport?IY:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function RY(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ni(e)?!1:t}function Fc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),s=CN(e);let o=Os(1);t&&(r?ss(r)&&(o=ld(r)):o=ld(e));const l=RY(s,n,r)?q4(s):Os(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,h=a.height/o.y;if(s){const f=ni(s),m=r&&ss(r)?ni(r):r;let g=f,v=X_(g);for(;v&&r&&m!==g;){const x=ld(v),y=v.getBoundingClientRect(),w=os(v),b=y.left+(v.clientLeft+parseFloat(w.paddingLeft))*x.x,_=y.top+(v.clientTop+parseFloat(w.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,h*=x.y,c+=b,u+=_,g=ni(v),v=X_(g)}}return cy({width:d,height:h,x:c,y:u})}function AN(e,t){const n=Jx(e).scrollLeft;return t?t.left+n:Fc(Us(e)).left+n}function H4(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:AN(e,r)),s=r.top+t.scrollTop;return{x:a,y:s}}function MY(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const s=a==="fixed",o=Us(r),l=t?Xx(t.floating):!1;if(r===o||l&&s)return n;let c={scrollLeft:0,scrollTop:0},u=Os(1);const d=Os(0),h=Ds(r);if((h||!h&&!s)&&((ph(r)!=="body"||kp(o))&&(c=Jx(r)),Ds(r))){const m=Fc(r);u=ld(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!s?H4(o,c,!0):Os(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function DY(e){return Array.from(e.getClientRects())}function LY(e){const t=Us(e),n=Jx(e),r=e.ownerDocument.body,a=Qa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Qa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+AN(e);const l=-n.scrollTop;return os(r).direction==="rtl"&&(o+=Qa(t.clientWidth,r.clientWidth)-a),{width:a,height:s,x:o,y:l}}function $Y(e,t){const n=ni(e),r=Us(e),a=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){s=a.width,o=a.height;const u=NN();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:s,height:o,x:l,y:c}}const FY=new Set(["absolute","fixed"]);function UY(e,t){const n=Fc(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,s=Ds(e)?ld(e):Os(1),o=e.clientWidth*s.x,l=e.clientHeight*s.y,c=a*s.x,u=r*s.y;return{width:o,height:l,x:c,y:u}}function ZT(e,t,n){let r;if(t==="viewport")r=$Y(e,n);else if(t==="document")r=LY(Us(e));else if(ss(t))r=UY(t,n);else{const a=q4(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return cy(r)}function K4(e,t){const n=Al(e);return n===t||!ss(n)||Pd(n)?!1:os(n).position==="fixed"||K4(n,t)}function BY(e,t){const n=t.get(e);if(n)return n;let r=cm(e,[],!1).filter(l=>ss(l)&&ph(l)!=="body"),a=null;const s=os(e).position==="fixed";let o=s?Al(e):e;for(;ss(o)&&!Pd(o);){const l=os(o),c=SN(o);!c&&l.position==="fixed"&&(a=null),(s?!c&&!a:!c&&l.position==="static"&&!!a&&FY.has(a.position)||kp(o)&&!c&&K4(e,o))?r=r.filter(d=>d!==o):a=l,o=Al(o)}return t.set(e,r),r}function zY(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Xx(t)?[]:BY(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=ZT(t,d,a);return u.top=Qa(h.top,u.top),u.right=Cl(h.right,u.right),u.bottom=Cl(h.bottom,u.bottom),u.left=Qa(h.left,u.left),u},ZT(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function WY(e){const{width:t,height:n}=W4(e);return{width:t,height:n}}function qY(e,t,n){const r=Ds(t),a=Us(t),s=n==="fixed",o=Fc(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const c=Os(0);function u(){c.x=AN(a)}if(r||!r&&!s)if((ph(t)!=="body"||kp(a))&&(l=Jx(t)),r){const m=Fc(t,!0,s,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();s&&!r&&a&&u();const d=a&&!r&&!s?H4(a,l):Os(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function bw(e){return os(e).position==="static"}function eP(e,t){if(!Ds(e)||os(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Us(e)===n&&(n=n.ownerDocument.body),n}function V4(e,t){const n=ni(e);if(Xx(e))return n;if(!Ds(e)){let a=Al(e);for(;a&&!Pd(a);){if(ss(a)&&!bw(a))return a;a=Al(a)}return n}let r=eP(e,t);for(;r&&NY(r)&&bw(r);)r=eP(r,t);return r&&Pd(r)&&bw(r)&&!SN(r)?n:r||PY(e)||n}const HY=async function(e){const t=this.getOffsetParent||V4,n=this.getDimensions,r=await n(e.floating);return{reference:qY(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function KY(e){return os(e).direction==="rtl"}const VY={convertOffsetParentRelativeRectToViewportRelativeRect:MY,getDocumentElement:Us,getClippingRect:zY,getOffsetParent:V4,getElementRects:HY,getClientRects:DY,getDimensions:WY,getScale:ld,isElement:ss,isRTL:KY};function G4(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function GY(e,t){let n=null,r;const a=Us(e);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||t(),!f||!m)return;const g=Cg(h),v=Cg(a.clientWidth-(d+f)),x=Cg(a.clientHeight-(h+m)),y=Cg(d),b={rootMargin:-g+"px "+-v+"px "+-x+"px "+-y+"px",threshold:Qa(0,Cl(1,c))||1};let _=!0;function k(j){const N=j[0].intersectionRatio;if(N!==c){if(!_)return o();N?o(!1,N):r=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!G4(u,e.getBoundingClientRect())&&o(),_=!1}try{n=new IntersectionObserver(k,{...b,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,b)}n.observe(e)}return o(!0),s}function YY(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=CN(e),d=a||s?[...u?cm(u):[],...cm(t)]:[];d.forEach(y=>{a&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const h=u&&l?GY(u,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(y=>{let[w]=y;w&&w.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let g,v=c?Fc(e):null;c&&x();function x(){const y=Fc(e);v&&!G4(v,y)&&n(),v=y,g=requestAnimationFrame(x)}return n(),()=>{var y;d.forEach(w=>{a&&w.removeEventListener("scroll",n),s&&w.removeEventListener("resize",n)}),h==null||h(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const XY=bY,JY=wY,QY=vY,ZY=_Y,eX=yY,tP=gY,tX=jY,nX=(e,t,n)=>{const r=new Map,a={platform:VY,...n},s={...a.platform,_c:r};return pY(e,t,{...a,platform:s})};var rX=typeof document<"u",aX=function(){},Sv=rX?p.useLayoutEffect:aX;function uy(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!uy(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const s=a[r];if(!(s==="_owner"&&e.$$typeof)&&!uy(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Y4(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function nP(e,t){const n=Y4(e);return Math.round(t*n)/n}function ww(e){const t=p.useRef(e);return Sv(()=>{t.current=e}),t}function iX(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=p.useState(r);uy(f,r)||m(r);const[g,v]=p.useState(null),[x,y]=p.useState(null),w=p.useCallback(E=>{E!==j.current&&(j.current=E,v(E))},[]),b=p.useCallback(E=>{E!==N.current&&(N.current=E,y(E))},[]),_=s||g,k=o||x,j=p.useRef(null),N=p.useRef(null),O=p.useRef(d),I=c!=null,P=ww(c),S=ww(a),D=ww(u),L=p.useCallback(()=>{if(!j.current||!N.current)return;const E={placement:t,strategy:n,middleware:f};S.current&&(E.platform=S.current),nX(j.current,N.current,E).then($=>{const A={...$,isPositioned:D.current!==!1};U.current&&!uy(O.current,A)&&(O.current=A,tu.flushSync(()=>{h(A)}))})},[f,t,n,S,D]);Sv(()=>{u===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,h(E=>({...E,isPositioned:!1})))},[u]);const U=p.useRef(!1);Sv(()=>(U.current=!0,()=>{U.current=!1}),[]),Sv(()=>{if(_&&(j.current=_),k&&(N.current=k),_&&k){if(P.current)return P.current(_,k,L);L()}},[_,k,L,P,I]);const F=p.useMemo(()=>({reference:j,floating:N,setReference:w,setFloating:b}),[w,b]),M=p.useMemo(()=>({reference:_,floating:k}),[_,k]),T=p.useMemo(()=>{const E={position:n,left:0,top:0};if(!M.floating)return E;const $=nP(M.floating,d.x),A=nP(M.floating,d.y);return l?{...E,transform:"translate("+$+"px, "+A+"px)",...Y4(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:A}},[n,l,M.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:L,refs:F,elements:M,floatingStyles:T}),[d,L,F,M,T])}const sX=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?tP({element:r.current,padding:a}).fn(n):{}:r?tP({element:r,padding:a}).fn(n):{}}}},oX=(e,t)=>({...XY(e),options:[e,t]}),lX=(e,t)=>({...JY(e),options:[e,t]}),cX=(e,t)=>({...tX(e),options:[e,t]}),uX=(e,t)=>({...QY(e),options:[e,t]}),dX=(e,t)=>({...ZY(e),options:[e,t]}),hX=(e,t)=>({...eX(e),options:[e,t]}),fX=(e,t)=>({...sX(e),options:[e,t]});var mX="Arrow",X4=p.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...s}=e;return i.jsx(lt.svg,{...s,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});X4.displayName=mX;var pX=X4;function EN(e){const[t,n]=p.useState(void 0);return tr(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const s=a[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var TN="Popper",[J4,Ll]=Ir(TN),[gX,Q4]=J4(TN),Z4=e=>{const{__scopePopper:t,children:n}=e,[r,a]=p.useState(null);return i.jsx(gX,{scope:t,anchor:r,onAnchorChange:a,children:n})};Z4.displayName=TN;var eF="PopperAnchor",tF=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,s=Q4(eF,n),o=p.useRef(null),l=It(t,o);return p.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(lt.div,{...a,ref:l})});tF.displayName=eF;var PN="PopperContent",[vX,yX]=J4(PN),nF=p.forwardRef((e,t)=>{var Z,te,J,ie,ge,ae;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=e,x=Q4(PN,n),[y,w]=p.useState(null),b=It(t,Re=>w(Re)),[_,k]=p.useState(null),j=EN(_),N=(j==null?void 0:j.width)??0,O=(j==null?void 0:j.height)??0,I=r+(s!=="center"?"-"+s:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},S=Array.isArray(u)?u:[u],D=S.length>0,L={padding:P,boundary:S.filter(bX),altBoundary:D},{refs:U,floatingStyles:F,placement:M,isPositioned:T,middlewareData:E}=iX({strategy:"fixed",placement:I,whileElementsMounted:(...Re)=>YY(...Re,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[oX({mainAxis:a+O,alignmentAxis:o}),c&&lX({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?cX():void 0,...L}),c&&uX({...L}),dX({...L,apply:({elements:Re,rects:me,availableWidth:K,availableHeight:de})=>{const{width:$e,height:nt}=me.reference,Ye=Re.floating.style;Ye.setProperty("--radix-popper-available-width",`${K}px`),Ye.setProperty("--radix-popper-available-height",`${de}px`),Ye.setProperty("--radix-popper-anchor-width",`${$e}px`),Ye.setProperty("--radix-popper-anchor-height",`${nt}px`)}}),_&&fX({element:_,padding:l}),wX({arrowWidth:N,arrowHeight:O}),f&&hX({strategy:"referenceHidden",...L})]}),[$,A]=iF(M),B=er(g);tr(()=>{T&&(B==null||B())},[T,B]);const R=(Z=E.arrow)==null?void 0:Z.x,C=(te=E.arrow)==null?void 0:te.y,W=((J=E.arrow)==null?void 0:J.centerOffset)!==0,[Q,X]=p.useState();return tr(()=>{y&&X(window.getComputedStyle(y).zIndex)},[y]),i.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...F,transform:T?F.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[(ie=E.transformOrigin)==null?void 0:ie.x,(ge=E.transformOrigin)==null?void 0:ge.y].join(" "),...((ae=E.hide)==null?void 0:ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(vX,{scope:n,placedSide:$,onArrowChange:k,arrowX:R,arrowY:C,shouldHideArrow:W,children:i.jsx(lt.div,{"data-side":$,"data-align":A,...v,ref:b,style:{...v.style,animation:T?void 0:"none"}})})})});nF.displayName=PN;var rF="PopperArrow",xX={top:"bottom",right:"left",bottom:"top",left:"right"},aF=p.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,s=yX(rF,r),o=xX[s.placedSide];return i.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:i.jsx(pX,{...a,ref:n,style:{...a.style,display:"block"}})})});aF.displayName=rF;function bX(e){return e!==null}var wX=e=>({name:"transformOrigin",options:e,fn(t){var x,y,w;const{placement:n,rects:r,middlewareData:a}=t,o=((x=a.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=iF(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((y=a.arrow)==null?void 0:y.x)??0)+l/2,m=(((w=a.arrow)==null?void 0:w.y)??0)+c/2;let g="",v="";return u==="bottom"?(g=o?h:`${f}px`,v=`${-c}px`):u==="top"?(g=o?h:`${f}px`,v=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,v=o?h:`${m}px`):u==="left"&&(g=`${r.floating.width+c}px`,v=o?h:`${m}px`),{data:{x:g,y:v}}}});function iF(e){const[t,n="center"]=e.split("-");return[t,n]}var Qx=Z4,Sp=tF,Zx=nF,eb=aF,[tb,Y3e]=Ir("Tooltip",[Ll]),nb=Ll(),sF="TooltipProvider",jX=700,J_="tooltip.open",[_X,ON]=tb(sF),oF=e=>{const{__scopeTooltip:t,delayDuration:n=jX,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:s}=e,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(_X,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:s})};oF.displayName=sF;var um="Tooltip",[kX,rb]=tb(um),lF=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:s,disableHoverableContent:o,delayDuration:l}=e,c=ON(um,e.__scopeTooltip),u=nb(t),[d,h]=p.useState(null),f=fr(),m=p.useRef(0),g=o??c.disableHoverableContent,v=l??c.delayDuration,x=p.useRef(!1),[y,w]=Ua({prop:r,defaultProp:a??!1,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(J_))):c.onClose(),s==null||s(N)},caller:um}),b=p.useMemo(()=>y?x.current?"delayed-open":"instant-open":"closed",[y]),_=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x.current=!1,w(!0)},[w]),k=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,w(!1)},[w]),j=p.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,w(!0),m.current=0},v)},[v,w]);return p.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),i.jsx(Qx,{...u,children:i.jsx(kX,{scope:t,contentId:f,open:y,stateAttribute:b,trigger:d,onTriggerChange:h,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayedRef.current?j():_()},[c.isOpenDelayedRef,j,_]),onTriggerLeave:p.useCallback(()=>{g?k():(window.clearTimeout(m.current),m.current=0)},[k,g]),onOpen:_,onClose:k,disableHoverableContent:g,children:n})})};lF.displayName=um;var Q_="TooltipTrigger",cF=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=rb(Q_,n),s=ON(Q_,n),o=nb(n),l=p.useRef(null),c=It(t,l,a.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),h=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(Sp,{asChild:!0,...o,children:i.jsx(lt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:Ve(e.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!s.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ve(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Ve(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ve(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Ve(e.onBlur,a.onClose),onClick:Ve(e.onClick,a.onClose)})})});cF.displayName=Q_;var SX="TooltipPortal",[X3e,NX]=tb(SX,{forceMount:void 0}),Od="TooltipContent",uF=p.forwardRef((e,t)=>{const n=NX(Od,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...s}=e,o=rb(Od,e.__scopeTooltip);return i.jsx(kr,{present:r||o.open,children:o.disableHoverableContent?i.jsx(dF,{side:a,...s,ref:t}):i.jsx(CX,{side:a,...s,ref:t})})}),CX=p.forwardRef((e,t)=>{const n=rb(Od,e.__scopeTooltip),r=ON(Od,e.__scopeTooltip),a=p.useRef(null),s=It(t,a),[o,l]=p.useState(null),{trigger:c,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,f=p.useCallback(()=>{l(null),h(!1)},[h]),m=p.useCallback((g,v)=>{const x=g.currentTarget,y={x:g.clientX,y:g.clientY},w=OX(y,x.getBoundingClientRect()),b=IX(y,w),_=RX(v.getBoundingClientRect()),k=DX([...b,..._]);l(k),h(!0)},[h]);return p.useEffect(()=>()=>f(),[f]),p.useEffect(()=>{if(c&&d){const g=x=>m(x,d),v=x=>m(x,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",v)}}},[c,d,m,f]),p.useEffect(()=>{if(o){const g=v=>{const x=v.target,y={x:v.clientX,y:v.clientY},w=(c==null?void 0:c.contains(x))||(d==null?void 0:d.contains(x)),b=!MX(y,o);w?f():b&&(f(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,o,u,f]),i.jsx(dF,{...e,ref:s})}),[AX,EX]=tb(um,{isInside:!1}),TX=z$("TooltipContent"),dF=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=e,c=rb(Od,n),u=nb(n),{onClose:d}=c;return p.useEffect(()=>(document.addEventListener(J_,d),()=>document.removeEventListener(J_,d)),[d]),p.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),i.jsx(ru,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:i.jsxs(Zx,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(TX,{children:r}),i.jsx(AX,{scope:n,isInside:!0,children:i.jsx(oV,{id:c.contentId,role:"tooltip",children:a||r})})]})})});uF.displayName=Od;var hF="TooltipArrow",PX=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=nb(n);return EX(hF,n).isInside?null:i.jsx(eb,{...a,...r,ref:t})});PX.displayName=hF;function OX(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,a,s)){case s:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function IX(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function RX(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function MX(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(a=!a)}return a}function DX(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),LX(t)}function LX(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var $X=oF,FX=lF,UX=cF,fF=uF;const Z_=$X,xe=FX,be=UX,ye=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(fF,{ref:r,sideOffset:t,className:Pe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));ye.displayName=fF.displayName;var ab=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ib=typeof window>"u"||"Deno"in globalThis;function zi(){}function BX(e,t){return typeof e=="function"?e(t):e}function zX(e){return typeof e=="number"&&e>=0&&e!==1/0}function WX(e,t){return Math.max(e+(t||0)-Date.now(),0)}function e1(e,t){return typeof e=="function"?e(t):e}function qX(e,t){return typeof e=="function"?e(t):e}function rP(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:s,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==IN(o,t.options))return!1}else if(!hm(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||s&&!s(t))}function aP(e,t){const{exact:n,status:r,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(dm(t.options.mutationKey)!==dm(s))return!1}else if(!hm(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function IN(e,t){return((t==null?void 0:t.queryKeyHashFn)||dm)(e)}function dm(e){return JSON.stringify(e,(t,n)=>t1(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function hm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>hm(e[n],t[n])):!1}function mF(e,t){if(e===t)return e;const n=iP(e)&&iP(t);if(n||t1(e)&&t1(t)){const r=n?e:Object.keys(e),a=r.length,s=n?t:Object.keys(t),o=s.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=n?d:s[d];(!n&&c.has(h)||n)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,u++):(l[h]=mF(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function iP(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function t1(e){if(!sP(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!sP(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function sP(e){return Object.prototype.toString.call(e)==="[object Object]"}function HX(e){return new Promise(t=>{setTimeout(t,e)})}function KX(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?mF(e,t):t}function VX(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function GX(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var RN=Symbol();function pF(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===RN?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var wc,rl,gd,xD,YX=(xD=class extends ab{constructor(){super();sn(this,wc);sn(this,rl);sn(this,gd);Dt(this,gd,t=>{if(!ib&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Oe(this,rl)||this.setEventListener(Oe(this,gd))}onUnsubscribe(){var t;this.hasListeners()||((t=Oe(this,rl))==null||t.call(this),Dt(this,rl,void 0))}setEventListener(t){var n;Dt(this,gd,t),(n=Oe(this,rl))==null||n.call(this),Dt(this,rl,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Oe(this,wc)!==t&&(Dt(this,wc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Oe(this,wc)=="boolean"?Oe(this,wc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},wc=new WeakMap,rl=new WeakMap,gd=new WeakMap,xD),gF=new YX,vd,al,yd,bD,XX=(bD=class extends ab{constructor(){super();sn(this,vd,!0);sn(this,al);sn(this,yd);Dt(this,yd,t=>{if(!ib&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Oe(this,al)||this.setEventListener(Oe(this,yd))}onUnsubscribe(){var t;this.hasListeners()||((t=Oe(this,al))==null||t.call(this),Dt(this,al,void 0))}setEventListener(t){var n;Dt(this,yd,t),(n=Oe(this,al))==null||n.call(this),Dt(this,al,t(this.setOnline.bind(this)))}setOnline(t){Oe(this,vd)!==t&&(Dt(this,vd,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Oe(this,vd)}},vd=new WeakMap,al=new WeakMap,yd=new WeakMap,bD),dy=new XX;function JX(){let e,t;const n=new Promise((a,s)=>{e=a,t=s});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}function QX(e){return Math.min(1e3*2**e,3e4)}function vF(e){return(e??"online")==="online"?dy.isOnline():!0}var yF=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function jw(e){return e instanceof yF}function xF(e){let t=!1,n=0,r=!1,a;const s=JX(),o=v=>{var x;r||(f(new yF(v)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>gF.isFocused()&&(e.networkMode==="always"||dy.isOnline())&&e.canRun(),d=()=>vF(e.networkMode)&&e.canRun(),h=v=>{var x;r||(r=!0,(x=e.onSuccess)==null||x.call(e,v),a==null||a(),s.resolve(v))},f=v=>{var x;r||(r=!0,(x=e.onError)==null||x.call(e,v),a==null||a(),s.reject(v))},m=()=>new Promise(v=>{var x;a=y=>{(r||u())&&v(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var v;a=void 0,r||(v=e.onContinue)==null||v.call(e)}),g=()=>{if(r)return;let v;const x=n===0?e.initialPromise:void 0;try{v=x??e.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(h).catch(y=>{var j;if(r)return;const w=e.retry??(ib?0:3),b=e.retryDelay??QX,_=typeof b=="function"?b(n,y):b,k=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(t||!k){f(y);return}n++,(j=e.onFail)==null||j.call(e,n,y),HX(_).then(()=>u()?void 0:m()).then(()=>{t?f(y):g()})})};return{promise:s,cancel:o,continue:()=>(a==null||a(),s),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?g():m().then(g),s)}}var ZX=e=>setTimeout(e,0);function eJ(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=ZX;const s=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var ma=eJ(),jc,wD,bF=(wD=class{constructor(){sn(this,jc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),zX(this.gcTime)&&Dt(this,jc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ib?1/0:5*60*1e3))}clearGcTimeout(){Oe(this,jc)&&(clearTimeout(Oe(this,jc)),Dt(this,jc,void 0))}},jc=new WeakMap,wD),xd,_c,vi,kc,Jr,hp,Sc,qi,Ys,jD,tJ=(jD=class extends bF{constructor(t){super();sn(this,qi);sn(this,xd);sn(this,_c);sn(this,vi);sn(this,kc);sn(this,Jr);sn(this,hp);sn(this,Sc);Dt(this,Sc,!1),Dt(this,hp,t.defaultOptions),this.setOptions(t.options),this.observers=[],Dt(this,kc,t.client),Dt(this,vi,Oe(this,kc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Dt(this,xd,rJ(this.options)),this.state=t.state??Oe(this,xd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Oe(this,Jr))==null?void 0:t.promise}setOptions(t){this.options={...Oe(this,hp),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Oe(this,vi).remove(this)}setData(t,n){const r=KX(this.state.data,t,this.options);return Gr(this,qi,Ys).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Gr(this,qi,Ys).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=Oe(this,Jr))==null?void 0:r.promise;return(a=Oe(this,Jr))==null||a.cancel(t),n?n.then(zi).catch(zi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Oe(this,xd))}isActive(){return this.observers.some(t=>qX(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===RN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>e1(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!WX(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Oe(this,Jr))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Oe(this,Jr))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Oe(this,vi).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Oe(this,Jr)&&(Oe(this,Sc)?Oe(this,Jr).cancel({revert:!0}):Oe(this,Jr).cancelRetry()),this.scheduleGc()),Oe(this,vi).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gr(this,qi,Ys).call(this,{type:"invalidate"})}fetch(t,n){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Oe(this,Jr))return Oe(this,Jr).continueRetry(),Oe(this,Jr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,a=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(Dt(this,Sc,!0),r.signal)})},s=()=>{const f=pF(this.options,n),g=(()=>{const v={client:Oe(this,kc),queryKey:this.queryKey,meta:this.meta};return a(v),v})();return Dt(this,Sc,!1),this.options.persister?this.options.persister(f,g,this):f(g)},l=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Oe(this,kc),state:this.state,fetchFn:s};return a(f),f})();(u=this.options.behavior)==null||u.onFetch(l,this),Dt(this,_c,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Gr(this,qi,Ys).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=f=>{var m,g,v,x;jw(f)&&f.silent||Gr(this,qi,Ys).call(this,{type:"error",error:f}),jw(f)||((g=(m=Oe(this,vi).config).onError)==null||g.call(m,f,this),(x=(v=Oe(this,vi).config).onSettled)==null||x.call(v,this.state.data,f,this)),this.scheduleGc()};return Dt(this,Jr,xF({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var m,g,v,x;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(y){c(y);return}(g=(m=Oe(this,vi).config).onSuccess)==null||g.call(m,f,this),(x=(v=Oe(this,vi).config).onSettled)==null||x.call(v,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,m)=>{Gr(this,qi,Ys).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{Gr(this,qi,Ys).call(this,{type:"pause"})},onContinue:()=>{Gr(this,qi,Ys).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Oe(this,Jr).start()}},xd=new WeakMap,_c=new WeakMap,vi=new WeakMap,kc=new WeakMap,Jr=new WeakMap,hp=new WeakMap,Sc=new WeakMap,qi=new WeakSet,Ys=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...nJ(r.data,this.options),fetchMeta:t.meta??null};case"success":return Dt(this,_c,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return jw(a)&&a.revert&&Oe(this,_c)?{...Oe(this,_c),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),ma.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Oe(this,vi).notify({query:this,type:"updated",action:t})})},jD);function nJ(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vF(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function rJ(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ys,_D,aJ=(_D=class extends ab{constructor(t={}){super();sn(this,ys);this.config=t,Dt(this,ys,new Map)}build(t,n,r){const a=n.queryKey,s=n.queryHash??IN(a,n);let o=this.get(s);return o||(o=new tJ({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Oe(this,ys).has(t.queryHash)||(Oe(this,ys).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Oe(this,ys).get(t.queryHash);n&&(t.destroy(),n===t&&Oe(this,ys).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ma.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Oe(this,ys).get(t)}getAll(){return[...Oe(this,ys).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>rP(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>rP(t,r)):n}notify(t){ma.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){ma.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ma.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ys=new WeakMap,_D),xs,oa,Nc,bs,Ho,kD,iJ=(kD=class extends bF{constructor(t){super();sn(this,bs);sn(this,xs);sn(this,oa);sn(this,Nc);this.mutationId=t.mutationId,Dt(this,oa,t.mutationCache),Dt(this,xs,[]),this.state=t.state||sJ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Oe(this,xs).includes(t)||(Oe(this,xs).push(t),this.clearGcTimeout(),Oe(this,oa).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Dt(this,xs,Oe(this,xs).filter(n=>n!==t)),this.scheduleGc(),Oe(this,oa).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Oe(this,xs).length||(this.state.status==="pending"?this.scheduleGc():Oe(this,oa).remove(this))}continue(){var t;return((t=Oe(this,Nc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,l,c,u,d,h,f,m,g,v,x,y,w,b,_,k,j,N,O;const n=()=>{Gr(this,bs,Ho).call(this,{type:"continue"})};Dt(this,Nc,xF({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(I,P)=>{Gr(this,bs,Ho).call(this,{type:"failed",failureCount:I,error:P})},onPause:()=>{Gr(this,bs,Ho).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Oe(this,oa).canRun(this)}));const r=this.state.status==="pending",a=!Oe(this,Nc).canStart();try{if(r)n();else{Gr(this,bs,Ho).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(s=Oe(this,oa).config).onMutate)==null?void 0:o.call(s,t,this));const P=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));P!==this.state.context&&Gr(this,bs,Ho).call(this,{type:"pending",context:P,variables:t,isPaused:a})}const I=await Oe(this,Nc).start();return await((d=(u=Oe(this,oa).config).onSuccess)==null?void 0:d.call(u,I,t,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,I,t,this.state.context)),await((g=(m=Oe(this,oa).config).onSettled)==null?void 0:g.call(m,I,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,I,null,t,this.state.context)),Gr(this,bs,Ho).call(this,{type:"success",data:I}),I}catch(I){try{throw await((w=(y=Oe(this,oa).config).onError)==null?void 0:w.call(y,I,t,this.state.context,this)),await((_=(b=this.options).onError)==null?void 0:_.call(b,I,t,this.state.context)),await((j=(k=Oe(this,oa).config).onSettled)==null?void 0:j.call(k,void 0,I,this.state.variables,this.state.context,this)),await((O=(N=this.options).onSettled)==null?void 0:O.call(N,void 0,I,t,this.state.context)),I}finally{Gr(this,bs,Ho).call(this,{type:"error",error:I})}}finally{Oe(this,oa).runNext(this)}}},xs=new WeakMap,oa=new WeakMap,Nc=new WeakMap,bs=new WeakSet,Ho=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ma.batch(()=>{Oe(this,xs).forEach(r=>{r.onMutationUpdate(t)}),Oe(this,oa).notify({mutation:this,type:"updated",action:t})})},kD);function sJ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var no,Hi,fp,SD,oJ=(SD=class extends ab{constructor(t={}){super();sn(this,no);sn(this,Hi);sn(this,fp);this.config=t,Dt(this,no,new Set),Dt(this,Hi,new Map),Dt(this,fp,0)}build(t,n,r){const a=new iJ({mutationCache:this,mutationId:++sg(this,fp)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){Oe(this,no).add(t);const n=Ag(t);if(typeof n=="string"){const r=Oe(this,Hi).get(n);r?r.push(t):Oe(this,Hi).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Oe(this,no).delete(t)){const n=Ag(t);if(typeof n=="string"){const r=Oe(this,Hi).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&Oe(this,Hi).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Ag(t);if(typeof n=="string"){const r=Oe(this,Hi).get(n),a=r==null?void 0:r.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=Ag(t);if(typeof n=="string"){const a=(r=Oe(this,Hi).get(n))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ma.batch(()=>{Oe(this,no).forEach(t=>{this.notify({type:"removed",mutation:t})}),Oe(this,no).clear(),Oe(this,Hi).clear()})}getAll(){return Array.from(Oe(this,no))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>aP(n,r))}findAll(t={}){return this.getAll().filter(n=>aP(t,n))}notify(t){ma.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return ma.batch(()=>Promise.all(t.map(n=>n.continue().catch(zi))))}},no=new WeakMap,Hi=new WeakMap,fp=new WeakMap,SD);function Ag(e){var t;return(t=e.options.scope)==null?void 0:t.id}function oP(e){return{onFetch:(t,n)=>{var d,h,f,m,g;const r=t.options,a=(f=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((m=t.state.data)==null?void 0:m.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const x=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},y=pF(t.options,t.fetchOptions),w=async(b,_,k)=>{if(v)return Promise.reject();if(_==null&&b.pages.length)return Promise.resolve(b);const N=(()=>{const S={client:t.client,queryKey:t.queryKey,pageParam:_,direction:k?"backward":"forward",meta:t.options.meta};return x(S),S})(),O=await y(N),{maxPages:I}=t.options,P=k?GX:VX;return{pages:P(b.pages,O,I),pageParams:P(b.pageParams,_,I)}};if(a&&s.length){const b=a==="backward",_=b?lJ:lP,k={pages:s,pageParams:o},j=_(r,k);l=await w(k,j,b)}else{const b=e??s.length;do{const _=c===0?o[0]??r.initialPageParam:lP(r,l);if(c>0&&_==null)break;l=await w(l,_),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var v,x;return(x=(v=t.options).persister)==null?void 0:x.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function lP(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function lJ(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Xn,il,sl,bd,wd,ol,jd,_d,ND,cJ=(ND=class{constructor(e={}){sn(this,Xn);sn(this,il);sn(this,sl);sn(this,bd);sn(this,wd);sn(this,ol);sn(this,jd);sn(this,_d);Dt(this,Xn,e.queryCache||new aJ),Dt(this,il,e.mutationCache||new oJ),Dt(this,sl,e.defaultOptions||{}),Dt(this,bd,new Map),Dt(this,wd,new Map),Dt(this,ol,0)}mount(){sg(this,ol)._++,Oe(this,ol)===1&&(Dt(this,jd,gF.subscribe(async e=>{e&&(await this.resumePausedMutations(),Oe(this,Xn).onFocus())})),Dt(this,_d,dy.subscribe(async e=>{e&&(await this.resumePausedMutations(),Oe(this,Xn).onOnline())})))}unmount(){var e,t;sg(this,ol)._--,Oe(this,ol)===0&&((e=Oe(this,jd))==null||e.call(this),Dt(this,jd,void 0),(t=Oe(this,_d))==null||t.call(this),Dt(this,_d,void 0))}isFetching(e){return Oe(this,Xn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Oe(this,il).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Oe(this,Xn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Oe(this,Xn).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(e1(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Oe(this,Xn).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=Oe(this,Xn).get(r.queryHash),s=a==null?void 0:a.state.data,o=BX(t,s);if(o!==void 0)return Oe(this,Xn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return ma.batch(()=>Oe(this,Xn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Oe(this,Xn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Oe(this,Xn);ma.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Oe(this,Xn);return ma.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=ma.batch(()=>Oe(this,Xn).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(zi).catch(zi)}invalidateQueries(e,t={}){return ma.batch(()=>(Oe(this,Xn).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=ma.batch(()=>Oe(this,Xn).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,n);return n.throwOnError||(s=s.catch(zi)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(zi)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Oe(this,Xn).build(this,t);return n.isStaleByTime(e1(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(zi).catch(zi)}fetchInfiniteQuery(e){return e.behavior=oP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(zi).catch(zi)}ensureInfiniteQueryData(e){return e.behavior=oP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return dy.isOnline()?Oe(this,il).resumePausedMutations():Promise.resolve()}getQueryCache(){return Oe(this,Xn)}getMutationCache(){return Oe(this,il)}getDefaultOptions(){return Oe(this,sl)}setDefaultOptions(e){Dt(this,sl,e)}setQueryDefaults(e,t){Oe(this,bd).set(dm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Oe(this,bd).values()],n={};return t.forEach(r=>{hm(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){Oe(this,wd).set(dm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Oe(this,wd).values()],n={};return t.forEach(r=>{hm(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Oe(this,sl).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=IN(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===RN&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Oe(this,sl).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Oe(this,Xn).clear(),Oe(this,il).clear()}},Xn=new WeakMap,il=new WeakMap,sl=new WeakMap,bd=new WeakMap,wd=new WeakMap,ol=new WeakMap,jd=new WeakMap,_d=new WeakMap,ND),uJ=p.createContext(void 0),dJ=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(uJ.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fm(){return fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fm.apply(this,arguments)}var ul;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ul||(ul={}));const cP="popstate";function hJ(e){e===void 0&&(e={});function t(r,a){let{pathname:s,search:o,hash:l}=r.location;return n1("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:hy(a)}return mJ(t,n,null,e)}function mr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function wF(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fJ(){return Math.random().toString(36).substr(2,8)}function uP(e,t){return{usr:e.state,key:e.key,idx:t}}function n1(e,t,n,r){return n===void 0&&(n=null),fm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?gh(t):t,{state:n,key:t&&t.key||r||fJ()})}function hy(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function gh(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function mJ(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:s=!1}=r,o=a.history,l=ul.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(fm({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=ul.Pop;let x=d(),y=x==null?null:x-u;u=x,c&&c({action:l,location:v.location,delta:y})}function f(x,y){l=ul.Push;let w=n1(v.location,x,y);u=d()+1;let b=uP(w,u),_=v.createHref(w);try{o.pushState(b,"",_)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(_)}s&&c&&c({action:l,location:v.location,delta:1})}function m(x,y){l=ul.Replace;let w=n1(v.location,x,y);u=d();let b=uP(w,u),_=v.createHref(w);o.replaceState(b,"",_),s&&c&&c({action:l,location:v.location,delta:0})}function g(x){let y=a.location.origin!=="null"?a.location.origin:a.location.href,w=typeof x=="string"?x:hy(x);return w=w.replace(/ $/,"%20"),mr(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let v={get action(){return l},get location(){return e(a,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(cP,h),c=x,()=>{a.removeEventListener(cP,h),c=null}},createHref(x){return t(a,x)},createURL:g,encodeLocation(x){let y=g(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:m,go(x){return o.go(x)}};return v}var dP;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(dP||(dP={}));function pJ(e,t,n){return n===void 0&&(n="/"),gJ(e,t,n,!1)}function gJ(e,t,n,r){let a=typeof t=="string"?gh(t):t,s=MN(a.pathname||"/",n);if(s==null)return null;let o=jF(e);vJ(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=AJ(s);l=NJ(o[c],u,r)}return l}function jF(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(mr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=bl([r,c.relativePath]),d=n.concat(c);s.children&&s.children.length>0&&(mr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),jF(s.children,t,d,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:kJ(u,s.index),routesMeta:d})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of _F(s.path))a(s,o,c)}),t}function _F(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return a?[s,""]:[s];let o=_F(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function vJ(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:SJ(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const yJ=/^:[\w-]+$/,xJ=3,bJ=2,wJ=1,jJ=10,_J=-2,hP=e=>e==="*";function kJ(e,t){let n=e.split("/"),r=n.length;return n.some(hP)&&(r+=_J),t&&(r+=bJ),n.filter(a=>!hP(a)).reduce((a,s)=>a+(yJ.test(s)?xJ:s===""?wJ:jJ),r)}function SJ(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function NJ(e,t,n){let{routesMeta:r}=e,a={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=s==="/"?t:t.slice(s.length)||"/",h=fP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=fP({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:bl([s,h.pathname]),pathnameBase:OJ(bl([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=bl([s,h.pathnameBase]))}return o}function fP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=CJ(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let v=l[h]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[h];return m&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function CJ(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),wF(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function AJ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return wF(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function MN(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function EJ(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?gh(e):e;return{pathname:n?n.startsWith("/")?n:TJ(n,t):t,search:IJ(r),hash:RJ(a)}}function TJ(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function _w(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PJ(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function kF(e,t){let n=PJ(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function SF(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=gh(e):(a=fm({},e),mr(!a.pathname||!a.pathname.includes("?"),_w("?","pathname","search",a)),mr(!a.pathname||!a.pathname.includes("#"),_w("#","pathname","hash",a)),mr(!a.search||!a.search.includes("#"),_w("#","search","hash",a)));let s=e===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;a.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=EJ(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const bl=e=>e.join("/").replace(/\/\/+/g,"/"),OJ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),IJ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,RJ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function MJ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const NF=["post","put","patch","delete"];new Set(NF);const DJ=["get",...NF];new Set(DJ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mm(){return mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mm.apply(this,arguments)}const DN=p.createContext(null),LJ=p.createContext(null),au=p.createContext(null),sb=p.createContext(null),$l=p.createContext({outlet:null,matches:[],isDataRoute:!1}),CF=p.createContext(null);function $J(e,t){let{relative:n}=t===void 0?{}:t;Np()||mr(!1);let{basename:r,navigator:a}=p.useContext(au),{hash:s,pathname:o,search:l}=EF(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:bl([r,o])),a.createHref({pathname:c,search:l,hash:s})}function Np(){return p.useContext(sb)!=null}function Fl(){return Np()||mr(!1),p.useContext(sb).location}function AF(e){p.useContext(au).static||p.useLayoutEffect(e)}function li(){let{isDataRoute:e}=p.useContext($l);return e?QJ():FJ()}function FJ(){Np()||mr(!1);let e=p.useContext(DN),{basename:t,future:n,navigator:r}=p.useContext(au),{matches:a}=p.useContext($l),{pathname:s}=Fl(),o=JSON.stringify(kF(a,n.v7_relativeSplatPath)),l=p.useRef(!1);return AF(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=SF(u,JSON.parse(o),s,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:bl([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,o,s,e])}function UJ(){let{matches:e}=p.useContext($l),t=e[e.length-1];return t?t.params:{}}function EF(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=p.useContext(au),{matches:a}=p.useContext($l),{pathname:s}=Fl(),o=JSON.stringify(kF(a,r.v7_relativeSplatPath));return p.useMemo(()=>SF(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function BJ(e,t){return zJ(e,t)}function zJ(e,t,n,r){Np()||mr(!1);let{navigator:a}=p.useContext(au),{matches:s}=p.useContext($l),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Fl(),d;if(t){var h;let x=typeof t=="string"?gh(t):t;c==="/"||(h=x.pathname)!=null&&h.startsWith(c)||mr(!1),d=x}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=pJ(e,{pathname:m}),v=VJ(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:bl([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:bl([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return t&&v?p.createElement(sb.Provider,{value:{location:mm({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ul.Pop}},v):v}function WJ(){let e=JJ(),t=MJ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:a},n):null,null)}const qJ=p.createElement(WJ,null);class HJ extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement($l.Provider,{value:this.props.routeContext},p.createElement(CF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KJ(e){let{routeContext:t,match:n,children:r}=e,a=p.useContext(DN);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement($l.Provider,{value:t},r)}function VJ(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||mr(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,g=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,g=!1,v=null,x=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||qJ,c&&(u<0&&f===0?(g=!0,x=null):u===f&&(g=!0,x=h.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,f+1)),w=()=>{let b;return m?b=v:g?b=x:h.route.Component?b=p.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,p.createElement(KJ,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?p.createElement(HJ,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var TF=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(TF||{}),fy=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fy||{});function GJ(e){let t=p.useContext(DN);return t||mr(!1),t}function YJ(e){let t=p.useContext(LJ);return t||mr(!1),t}function XJ(e){let t=p.useContext($l);return t||mr(!1),t}function PF(e){let t=XJ(),n=t.matches[t.matches.length-1];return n.route.id||mr(!1),n.route.id}function JJ(){var e;let t=p.useContext(CF),n=YJ(fy.UseRouteError),r=PF(fy.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function QJ(){let{router:e}=GJ(TF.UseNavigateStable),t=PF(fy.UseNavigateStable),n=p.useRef(!1);return AF(()=>{n.current=!0}),p.useCallback(function(a,s){s===void 0&&(s={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,mm({fromRouteId:t},s)))},[e,t])}function ZJ(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Va(e){mr(!1)}function eQ(e){let{basename:t="/",children:n=null,location:r,navigationType:a=ul.Pop,navigator:s,static:o=!1,future:l}=e;Np()&&mr(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:s,static:o,future:mm({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=gh(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:g="default"}=r,v=p.useMemo(()=>{let x=MN(d,c);return x==null?null:{location:{pathname:x,search:h,hash:f,state:m,key:g},navigationType:a}},[c,d,h,f,m,g,a]);return v==null?null:p.createElement(au.Provider,{value:u},p.createElement(sb.Provider,{children:n,value:v}))}function tQ(e){let{children:t,location:n}=e;return BJ(r1(t),n)}new Promise(()=>{});function r1(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,a)=>{if(!p.isValidElement(r))return;let s=[...t,a];if(r.type===p.Fragment){n.push.apply(n,r1(r.props.children,s));return}r.type!==Va&&mr(!1),!r.props.index||!r.props.children||mr(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=r1(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function a1(){return a1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a1.apply(this,arguments)}function nQ(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function rQ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function aQ(e,t){return e.button===0&&(!t||t==="_self")&&!rQ(e)}function i1(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function iQ(e,t){let n=i1(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(s=>{n.append(a,s)})}),n}const sQ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oQ="6";try{window.__reactRouterVersion=oQ}catch{}const lQ="startTransition",mP=bS[lQ];function cQ(e){let{basename:t,children:n,future:r,window:a}=e,s=p.useRef();s.current==null&&(s.current=hJ({window:a,v5Compat:!0}));let o=s.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=p.useCallback(h=>{u&&mP?mP(()=>c(h)):c(h)},[c,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>ZJ(r),[r]),p.createElement(eQ,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const uQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dQ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hQ=p.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=nQ(t,sQ),{basename:m}=p.useContext(au),g,v=!1;if(typeof u=="string"&&dQ.test(u)&&(g=u,uQ))try{let b=new URL(window.location.href),_=u.startsWith("//")?new URL(b.protocol+u):new URL(u),k=MN(_.pathname,m);_.origin===b.origin&&k!=null?u=k+_.search+_.hash:v=!0}catch{}let x=$J(u,{relative:a}),y=fQ(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:h});function w(b){r&&r(b),b.defaultPrevented||y(b)}return p.createElement("a",a1({},f,{href:g||x,onClick:v||s?r:w,ref:n,target:c}))});var pP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(pP||(pP={}));var gP;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(gP||(gP={}));function fQ(e,t){let{target:n,replace:r,state:a,preventScrollReset:s,relative:o,viewTransition:l}=t===void 0?{}:t,c=li(),u=Fl(),d=EF(e,{relative:o});return p.useCallback(h=>{if(aQ(h,n)){h.preventDefault();let f=r!==void 0?r:hy(u)===hy(d);c(e,{replace:f,state:a,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,d,r,a,n,e,s,o,l])}function LN(e){let t=p.useRef(i1(e)),n=p.useRef(!1),r=Fl(),a=p.useMemo(()=>iQ(r.search,n.current?null:t.current),[r.search]),s=li(),o=p.useCallback((l,c)=>{const u=i1(typeof l=="function"?l(a):l);n.current=!0,s("?"+u,c)},[s,a]);return[a,o]}const mQ="modulepreload",pQ=function(e){return"/"+e},vP={},ks=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=pQ(c),c in vP)return;vP[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":mQ,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},gQ=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ks(async()=>{const{default:r}=await Promise.resolve().then(()=>vh);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class $N extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class vQ extends $N{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class yP extends $N{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class xP extends $N{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var s1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(s1||(s1={}));var yQ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class xQ{constructor(t,{headers:n={},customFetch:r,region:a=s1.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=gQ(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return yQ(this,void 0,void 0,function*(){try{const{headers:a,method:s,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(v=>{throw new vQ(v)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new yP(h);if(!h.ok)throw new xP(h);let m=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield h.json():m==="application/octet-stream"?g=yield h.blob():m==="text/event-stream"?g=h:m==="multipart/form-data"?g=yield h.formData():g=yield h.text(),{data:g,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof xP||a instanceof yP?a.context:void 0}}})}}var Ea={},FN={},ob={},Cp={},lb={},cb={},bQ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Id=bQ();const wQ=Id.fetch,OF=Id.fetch.bind(Id),IF=Id.Headers,jQ=Id.Request,_Q=Id.Response,vh=Object.freeze(Object.defineProperty({__proto__:null,Headers:IF,Request:jQ,Response:_Q,default:OF,fetch:wQ},Symbol.toStringTag,{value:"Module"})),kQ=sH(vh);var ub={};Object.defineProperty(ub,"__esModule",{value:!0});let SQ=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ub.default=SQ;var RF=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cb,"__esModule",{value:!0});const NQ=RF(kQ),CQ=RF(ub);let AQ=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=NQ.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,l,c;let u=null,d=null,h=null,f=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=y:d=JSON.parse(y))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&x&&x.length>1&&(h=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const v=await s.text();try{u=JSON.parse(v),Array.isArray(u)&&s.status===404&&(d=[],u=null,f=200,m="OK")}catch{s.status===404&&v===""?(f=204,m="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw new CQ.default(u)}return{error:u,data:d,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(a=a.catch(s=>{var o,l,c;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};cb.default=AQ;var EQ=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lb,"__esModule",{value:!0});const TQ=EQ(cb);let PQ=class extends TQ.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:s=a}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const s=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:s=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};lb.default=PQ;var OQ=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cp,"__esModule",{value:!0});const IQ=OQ(lb);let RQ=class extends IQ.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let s="";a==="plain"?s="pl":a==="phrase"?s="ph":a==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Cp.default=RQ;var MQ=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ob,"__esModule",{value:!0});const Vh=MQ(Cp);let DQ=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=n,this.schema=r,this.fetch=a}select(t,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Vh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const a="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Vh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:s=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Vh.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new Vh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Vh.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ob.default=DQ;var db={},hb={};Object.defineProperty(hb,"__esModule",{value:!0});hb.version=void 0;hb.version="0.0.0-automated";Object.defineProperty(db,"__esModule",{value:!0});db.DEFAULT_HEADERS=void 0;const LQ=hb;db.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${LQ.version}`};var MF=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(FN,"__esModule",{value:!0});const $Q=MF(ob),FQ=MF(Cp),UQ=db;let BQ=class DF{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},UQ.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new $Q.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new DF(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:s}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;r||a?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=n);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new FQ.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};FN.default=BQ;var yh=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.PostgrestError=Ea.PostgrestBuilder=Ea.PostgrestTransformBuilder=Ea.PostgrestFilterBuilder=Ea.PostgrestQueryBuilder=Ea.PostgrestClient=void 0;const LF=yh(FN);Ea.PostgrestClient=LF.default;const $F=yh(ob);Ea.PostgrestQueryBuilder=$F.default;const FF=yh(Cp);Ea.PostgrestFilterBuilder=FF.default;const UF=yh(lb);Ea.PostgrestTransformBuilder=UF.default;const BF=yh(cb);Ea.PostgrestBuilder=BF.default;const zF=yh(ub);Ea.PostgrestError=zF.default;var zQ=Ea.default={PostgrestClient:LF.default,PostgrestQueryBuilder:$F.default,PostgrestFilterBuilder:FF.default,PostgrestTransformBuilder:UF.default,PostgrestBuilder:BF.default,PostgrestError:zF.default};const{PostgrestClient:WQ,PostgrestQueryBuilder:n5e,PostgrestFilterBuilder:r5e,PostgrestTransformBuilder:a5e,PostgrestBuilder:i5e,PostgrestError:s5e}=zQ;class qQ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const HQ="2.15.1",KQ=`realtime-js/${HQ}`,VQ="1.0.0",o1=1e4,GQ=1e3,YQ=100;var If;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(If||(If={}));var yr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(yr||(yr={}));var Vi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Vi||(Vi={}));var l1;(function(e){e.websocket="websocket"})(l1||(l1={}));var uc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(uc||(uc={}));class XQ{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class WF{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var En;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(En||(En={}));const bP=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,o)=>(s[o]=JQ(o,e,t,a),s),{})},JQ=(e,t,n,r)=>{const a=t.find(l=>l.name===e),s=a==null?void 0:a.type,o=n[e];return s&&!r.includes(s)?qF(s,o):c1(o)},qF=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return tZ(t,n)}switch(e){case En.bool:return QQ(t);case En.float4:case En.float8:case En.int2:case En.int4:case En.int8:case En.numeric:case En.oid:return ZQ(t);case En.json:case En.jsonb:return eZ(t);case En.timestamp:return nZ(t);case En.abstime:case En.date:case En.daterange:case En.int4range:case En.int8range:case En.money:case En.reltime:case En.text:case En.time:case En.timestamptz:case En.timetz:case En.tsrange:case En.tstzrange:return c1(t);default:return c1(t)}},c1=e=>e,QQ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ZQ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},eZ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},tZ=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>qF(t,l))}return e},nZ=e=>typeof e=="string"?e.replace(" ","T"):e,HF=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class kw{constructor(t,n,r={},a=o1){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var wP;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(wP||(wP={}));class Rf{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Rf.syncState(this.state,a,s,o),this.pendingDiffs.forEach(c=>{this.state=Rf.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Rf.syncDiff(this.state,a,s,o),l())}),this.onJoin((a,s,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:o})}),this.onLeave((a,s,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const s=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(s,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=s[u];if(h){const f=d.map(x=>x.presence_ref),m=h.map(x=>x.presence_ref),g=d.filter(x=>m.indexOf(x.presence_ref)<0),v=h.filter(x=>f.indexOf(x.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(s,{joins:l,leaves:c},r,a)}static syncDiff(t,n,r,a){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(s,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}r(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jP;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(jP||(jP={}));var Mf;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Mf||(Mf={}));var Qs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Qs||(Qs={}));class UN{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=yr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new kw(this,Vi.join,this.params,this.timeout),this.rejoinTimer=new WF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yr.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=yr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=yr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vi.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new Rf(this),this.broadcastEndpointURL=HF(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==yr.closed){const{config:{broadcast:s,presence:o,private:l}}=this.params,c=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[Mf.PRESENCE]&&this.bindings[Mf.PRESENCE].length>0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Qs.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Qs.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket.setAuth(),f===void 0){t==null||t(Qs.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,x=[];for(let y=0;y<v;y++){const w=g[y],{filter:{event:b,schema:_,table:k,filter:j}}=w,N=f&&f[y];if(N&&N.event===b&&N.schema===_&&N.table===k&&N.filter===j)x.push(Object.assign(Object.assign({},w),{id:N.id}));else{this.unsubscribe(),this.state=yr.errored,t==null||t(Qs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Qs.SUBSCRIBED);return}}).receive("error",f=>{this.state=yr.errored,t==null||t(Qs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Qs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===yr.joined&&t===Mf.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=yr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new kw(this,Vi.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yr.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,s=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(s),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new kw(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>YQ){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,s;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Vi;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,v,x;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(m=>m.callback(f,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var g,v,x,y,w,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,k=(g=m.filter)===null||g===void 0?void 0:g.event;return _&&((v=n.ids)===null||v===void 0?void 0:v.includes(_))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const _=(w=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return _==="*"||_===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:v,table:x,commit_timestamp:y,type:w,errors:b}=g;f=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:y,eventType:w,new:{},old:{},errors:b}),this._getPayloadRecords(g))}m.callback(f,r)})}_isClosed(){return this.state===yr.closed}_isJoined(){return this.state===yr.joined}_isJoining(){return this.state===yr.joining}_isLeaving(){return this.state===yr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),s={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&UN.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Vi.close,{},t)}_onError(t){this._on(Vi.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=bP(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=bP(t.columns,t.old_record)),n}}const _P=()=>{},Eg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},rZ=[1e3,2e3,5e3,1e4],aZ=1e4,iZ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class sZ{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=o1,this.transport=null,this.heartbeatIntervalMs=Eg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_P,this.ref=0,this.reconnectTimer=null,this.logger=_P,this.conn=null,this.sendBuffer=[],this.serializer=new XQ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let s;return a?s=a:typeof fetch>"u"?s=(...o)=>ks(async()=>{const{default:l}=await Promise.resolve().then(()=>vh);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${l1.websocket}`,this.httpEndpoint=HF(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qQ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VQ}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case If.connecting:return uc.Connecting;case If.open:return uc.Open;case If.closing:return uc.Closing;default:return uc.Closed}}isConnected(){return this.connectionState()===uc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(s=>s.topic===r);if(a)return a;{const s=new UN(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:a,ref:s}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${s})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(GQ,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Eg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:s,ref:o}=n,l=o?`(${o})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Vi.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([iZ],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:KQ};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Vi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new WF(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Eg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,s,o,l,c,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:o1,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Eg.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:d=>rZ[d-1]||aZ,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(d,h)=>h(JSON.stringify(d)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class BN extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function xr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class oZ extends BN{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class u1 extends BN{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var lZ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const KF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ks(async()=>{const{default:r}=await Promise.resolve().then(()=>vh);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},cZ=()=>lZ(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ks(()=>Promise.resolve().then(()=>vh),void 0)).Response:Response}),d1=e=>{if(Array.isArray(e))return e.map(n=>d1(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=d1(r)}),t},uZ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var iu=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Sw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dZ=(e,t,n)=>iu(void 0,void 0,void 0,function*(){const r=yield cZ();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const s=e.status||500,o=(a==null?void 0:a.statusCode)||s+"";t(new oZ(Sw(a),s,o))}).catch(a=>{t(new u1(Sw(a),a))}):t(new u1(Sw(e),e))}),hZ=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(uZ(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function Ap(e,t,n,r,a,s){return iu(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,hZ(t,r,a,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>dZ(c,l,r))})})}function my(e,t,n,r){return iu(this,void 0,void 0,function*(){return Ap(e,"GET",t,n,r)})}function gs(e,t,n,r,a){return iu(this,void 0,void 0,function*(){return Ap(e,"POST",t,r,a,n)})}function h1(e,t,n,r,a){return iu(this,void 0,void 0,function*(){return Ap(e,"PUT",t,r,a,n)})}function fZ(e,t,n,r){return iu(this,void 0,void 0,function*(){return Ap(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function VF(e,t,n,r,a){return iu(this,void 0,void 0,function*(){return Ap(e,"DELETE",t,r,a,n)})}var sa=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const mZ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pZ{constructor(t,n={},r,a){this.url=t,this.headers=n,this.bucketId=r,this.fetch=KF(a)}uploadOrUpdate(t,n,r,a){return sa(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},kP),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?h1:gs)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(xr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return sa(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return sa(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:kP.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield h1(this.fetch,l.toString(),c,{headers:d});return{data:{path:s,fullPath:h.Key},error:null}}catch(c){if(xr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return sa(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const s=yield gs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new BN("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(xr(r))return{data:null,error:r};throw r}})}update(t,n,r){return sa(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return sa(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(xr(a))return{data:null,error:a};throw a}})}copy(t,n,r){return sa(this,void 0,void 0,function*(){try{return{data:{path:(yield gs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(xr(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return sa(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),s=yield gs(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(a){if(xr(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return sa(this,void 0,void 0,function*(){try{const a=yield gs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(a){if(xr(a))return{data:null,error:a};throw a}})}download(t,n){return sa(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield my(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(xr(l))return{data:null,error:l};throw l}})}info(t){return sa(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield my(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:d1(r),error:null}}catch(r){if(xr(r))return{data:null,error:r};throw r}})}exists(t){return sa(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield fZ(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(xr(r)&&r instanceof u1){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&a.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return sa(this,void 0,void 0,function*(){try{return{data:yield VF(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(xr(n))return{data:null,error:n};throw n}})}list(t,n,r){return sa(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},mZ),n),{prefix:t||""});return{data:yield gs(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(xr(a))return{data:null,error:a};throw a}})}listV2(t,n){return sa(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield gs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(xr(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const gZ="2.11.0",vZ={"X-Client-Info":`storage-js/${gZ}`};var gu=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class yZ{constructor(t,n={},r,a){const s=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},vZ),n),this.fetch=KF(r)}listBuckets(){return gu(this,void 0,void 0,function*(){try{return{data:yield my(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(xr(t))return{data:null,error:t};throw t}})}getBucket(t){return gu(this,void 0,void 0,function*(){try{return{data:yield my(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(xr(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return gu(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(xr(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return gu(this,void 0,void 0,function*(){try{return{data:yield h1(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(xr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return gu(this,void 0,void 0,function*(){try{return{data:yield gs(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(xr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return gu(this,void 0,void 0,function*(){try{return{data:yield VF(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(xr(n))return{data:null,error:n};throw n}})}}class xZ extends yZ{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new pZ(this.url,this.headers,t,this.fetch)}}const bZ="2.55.0";let yf="";typeof Deno<"u"?yf="deno":typeof document<"u"?yf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yf="react-native":yf="node";const wZ={"X-Client-Info":`supabase-js-${yf}/${bZ}`},jZ={headers:wZ},_Z={schema:"public"},kZ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},SZ={};var NZ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const CZ=e=>{let t;return e?t=e:typeof fetch>"u"?t=OF:t=fetch,(...n)=>t(...n)},AZ=()=>typeof Headers>"u"?IF:Headers,EZ=(e,t,n)=>{const r=CZ(n),a=AZ();return(s,o)=>NZ(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var TZ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function PZ(e){return e.endsWith("/")?e:e+"/"}function OZ(e,t){var n,r;const{db:a,auth:s,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>TZ(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const GF="2.71.1",Iu=30*1e3,f1=3,Nw=f1*Iu,IZ="http://localhost:9999",RZ="supabase.auth.token",MZ={"X-Client-Info":`gotrue-js/${GF}`},m1="X-Supabase-Api-Version",YF={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},DZ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,LZ=10*60*1e3;class zN extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function $t(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class $Z extends zN{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function FZ(e){return $t(e)&&e.name==="AuthApiError"}class XF extends zN{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Ul extends zN{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Ko extends Ul{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function UZ(e){return $t(e)&&e.name==="AuthSessionMissingError"}class Tg extends Ul{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Pg extends Ul{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Og extends Ul{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function BZ(e){return $t(e)&&e.name==="AuthImplicitGrantRedirectError"}class SP extends Ul{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class p1 extends Ul{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Cw(e){return $t(e)&&e.name==="AuthRetryableFetchError"}class NP extends Ul{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class g1 extends Ul{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const py="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),CP=` 	
\r=`.split(""),zZ=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<CP.length;t+=1)e[CP[t].charCodeAt(0)]=-2;for(let t=0;t<py.length;t+=1)e[py[t].charCodeAt(0)]=t;return e})();function AP(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(py[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(py[r]),t.queuedBits-=6}}function JF(e,t,n){const r=zZ[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function EP(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=o=>{HZ(o,r,n)};for(let o=0;o<e.length;o+=1)JF(e.charCodeAt(o),a,s);return t.join("")}function WZ(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function qZ(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}WZ(r,t)}}function HZ(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function KZ(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)JF(e.charCodeAt(a),n,r);return new Uint8Array(t)}function VZ(e){const t=[];return qZ(e,n=>t.push(n)),new Uint8Array(t)}function GZ(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>AP(a,n,r)),AP(null,n,r),t.join("")}function YZ(e){return Math.round(Date.now()/1e3)+e}function XZ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Fi=()=>typeof window<"u"&&typeof document<"u",Jl={tested:!1,writable:!1},QF=()=>{if(!Fi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jl.tested)return Jl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Jl.tested=!0,Jl.writable=!0}catch{Jl.tested=!0,Jl.writable=!1}return Jl.writable};function JZ(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const ZF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ks(async()=>{const{default:r}=await Promise.resolve().then(()=>vh);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},QZ=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ru=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ql=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zo=async(e,t)=>{await e.removeItem(t)};class fb{constructor(){this.promise=new fb.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}fb.promiseConstructor=Promise;function Aw(e){const t=e.split(".");if(t.length!==3)throw new g1("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!DZ.test(t[r]))throw new g1("JWT not in base64url format");return{header:JSON.parse(EP(t[0])),payload:JSON.parse(EP(t[1])),signature:KZ(t[2]),raw:{header:t[0],payload:t[1]}}}async function ZZ(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function eee(e,t){return new Promise((r,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){a(o);return}}})()})}function tee(e){return("0"+e.toString(16)).substr(-2)}function nee(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let s=0;s<56;s++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,tee).join("")}async function ree(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function aee(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await ree(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vu(e,t,n=!1){const r=nee();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Ru(e,`${t}-code-verifier`,a);const s=await aee(r);return[s,r===s?"plain":"s256"]}const iee=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function see(e){const t=e.headers.get(m1);if(!t||!t.match(iee))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function oee(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function lee(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const cee=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yu(e){if(!cee.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ew(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function TP(e){return JSON.parse(JSON.stringify(e))}var uee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const rc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dee=[502,503,504];async function PP(e){var t;if(!QZ(e))throw new p1(rc(e),0);if(dee.includes(e.status))throw new p1(rc(e),e.status);let n;try{n=await e.json()}catch(s){throw new XF(rc(s),s)}let r;const a=see(e);if(a&&a.getTime()>=YF["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new NP(rc(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ko}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new NP(rc(n),e.status,n.weak_password.reasons);throw new $Z(rc(n),e.status||500,r)}const hee=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function qt(e,t,n,r){var a;const s=Object.assign({},r==null?void 0:r.headers);s[m1]||(s[m1]=YF["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await fee(e,t,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function fee(e,t,n,r,a,s){const o=hee(t,r,a,s);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new p1(rc(c),0)}if(l.ok||await PP(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await PP(c)}}function Xs(e){var t;let n=null;vee(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=YZ(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function OP(e){const t=Xs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Zo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function mee(e){return{data:e,error:null}}function pee(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s}=e,o=uee(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function gee(e){return e}function vee(e){return e.access_token&&e.refresh_token&&e.expires_in}const Tw=["global","local","others"];var yee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class xee{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=ZF(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Tw[0]){if(Tw.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tw.join(", ")}`);try{return await qt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await qt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Zo})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=yee(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await qt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:pee,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($t(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await qt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Zo})}catch(n){if($t(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,s,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await qt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:gee});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if($t(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){yu(t);try{return await qt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Zo})}catch(n){if($t(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){yu(t);try{return await qt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Zo})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){yu(t);try{return await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Zo})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){yu(t.userId);try{const{data:n,error:r}=await qt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if($t(n))return{data:null,error:n};throw n}}async _deleteFactor(t){yu(t.userId),yu(t.id);try{return{data:await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if($t(n))return{data:null,error:n};throw n}}}function IP(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function bee(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xu={debug:!!(globalThis&&QF()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class e3 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class wee extends e3{}async function jee(e,t,n){xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),xu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw xu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new wee(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xu.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}bee();const _ee={url:IZ,storageKey:RZ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:MZ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function RP(e,t,n){return await n()}const bu={};class pm{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pm.nextInstanceID,pm.nextInstanceID+=1,this.instanceID>0&&Fi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},_ee),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new xee({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=ZF(a.fetch),this.lock=a.lock||RP,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Fi()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=jee:this.lock=RP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:QF()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=IP(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=IP(this.memoryStorage)),Fi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=bu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){bu[this.storageKey]=Object.assign(Object.assign({},bu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=bu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){bu[this.storageKey]=Object.assign(Object.assign({},bu[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${GF}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=JZ(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Fi()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),BZ(s)){const c=(t=s.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $t(n)?{error:n}:{error:new XF("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const s=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Xs}),{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if($t(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,a;try{let s;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await vu(this.storage,this.storageKey)),s=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:g},xform:Xs})}else if("phone"in t){const{phone:d,password:h,options:f}=t;s=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Xs})}else throw new Pg("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if($t(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:o,options:l}=t;n=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:OP})}else if("phone"in t){const{phone:s,password:o,options:l}=t;n=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:OP})}else throw new Pg("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Tg}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if($t(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,a,s,o,l,c,u,d,h,f,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:x,wallet:y,statement:w,options:b}=t;let _;if(Fi())if(typeof y=="object")_=y;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))_=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const k=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const j=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let N;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")N=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)N=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)g=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),v=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${k.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(a=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const j=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=j}}try{const{data:x,error:y}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:GZ(v)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Xs});if(y)throw y;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new Tg}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:y})}catch(x){if($t(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await Ql(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:s,error:o}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Xs});if(await zo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Tg}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:o})}catch(s){if($t(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:s,nonce:o}=t,l=await qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Xs}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Tg}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if($t(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,s,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await vu(this.storage,this.storageKey));const{error:h}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Pg("You must provide either an email or phone number.")}catch(l){if($t(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,s;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await qt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:Xs});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if($t(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await vu(this.storage,this.storageKey)),await qt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:mee})}catch(s){if($t(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ko;const{error:a}=await qt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if($t(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:s}=t,{error:o}=await qt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:s}=t,{data:o,error:l}=await qt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Pg("You must provide either an email or phone number and a type")}catch(n){if($t(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ql(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Nw:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Ql(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Ew()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Zo}):await this._useSession(async n=>{var r,a,s;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ko}:await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:Zo})})}catch(n){if($t(n))return UZ(n)&&(await this._removeSession(),await zo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:s}=r;if(s)throw s;if(!a.session)throw new Ko;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await vu(this.storage,this.storageKey));const{data:u,error:d}=await qt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Zo});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if($t(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ko;const n=Date.now()/1e3;let r=n,a=!0,s=null;const{payload:o}=Aw(t.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if($t(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ko;const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if($t(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Fi())throw new Og("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Og(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new SP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Og("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new SP("No code detected.");const{data:w,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!s||!l||!o||!u)throw new Og("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=Iu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:v,error:x}=await this._getUser(s);if(x)throw x;const y={provider_token:r,provider_refresh_token:a,access_token:s,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if($t(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ql(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:s}=n;if(s)return{error:s};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(FZ(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await zo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=XZ(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await vu(this.storage,this.storageKey,!0));try{return await qt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if($t(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if($t(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:a}=await this._useSession(async s=>{var o,l,c,u,d;const{data:h,error:f}=s;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await qt(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Fi()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if($t(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:s,error:o}=n;if(o)throw o;return await qt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if($t(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await eee(async a=>(a>0&&await ZZ(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await qt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Xs})),(a,s)=>{const o=200*Math.pow(2,a);return s&&Cw(s)&&Date.now()+o-r<Iu})}catch(r){if(this._debug(n,"error",r),$t(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Fi()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Ql(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Ql(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Ru(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Ew()}else if(a&&!a.user&&!a.user){const o=await Ql(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await zo(this.storage,this.storageKey+"-user"),await Ru(this.storage,this.storageKey,a)):a.user=Ew()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const s=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Nw;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Nw}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Cw(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ko;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new fb;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new Ko;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(a,"error",s),$t(s)){const o={session:null,error:s};return Cw(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ru(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const s=TP(a);await Ru(this.storage,this.storageKey,s)}else{const a=TP(n);await Ru(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await zo(this.storage,this.storageKey),await zo(this.storage,this.storageKey+"-code-verifier"),await zo(this.storage,this.storageKey+"-user"),this.userStorage&&await zo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Fi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Iu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/Iu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Iu}ms, refresh threshold is ${f1} ticks`),a<=f1&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof e3)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await vu(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);a.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;return s?{data:null,error:s}:await qt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($t(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:s,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await qt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if($t(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:l}=await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if($t(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;return s?{data:null,error:s}:await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($t(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:s}=t;if(s)return{data:null,error:s};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Aw(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+LZ>a)return r;const{data:s,error:o}=await qt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,r=s.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};r=m.session.access_token}const{header:a,payload:s,signature:o,raw:{header:l,payload:c}}=Aw(r);n!=null&&n.allowExpired||oee(s.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:a,signature:o},error:null}}const d=lee(a.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,VZ(`${l}.${c}`)))throw new g1("Invalid JWT signature");return{data:{claims:s,header:a,signature:o},error:null}}catch(r){if($t(r))return{data:null,error:r};throw r}}}pm.nextInstanceID=0;const kee=pm;class See extends kee{constructor(t){super(t)}}var Nee=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class Cee{constructor(t,n,r){var a,s,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=PZ(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:_Z,realtime:SZ,auth:Object.assign(Object.assign({},kZ),{storageKey:u}),global:jZ},h=OZ(r??{},d);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=EZ(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new WQ(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new xZ(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new xQ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Nee(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,storageKey:s,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new See({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new sZ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const t3=(e,t,n)=>new Cee(e,t,n);function Aee(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Aee()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Eee={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co",VITE_WEBHOOK_BASE_URL:"https://primary-production-376c.up.railway.app/webhook"},to=Eee??{},Tee=e=>e.replace(/\/$/,""),n3=(e,t)=>{const n=(e??"").trim();if(!n)throw new Error(`[Supabase config] Missing ${t}. Set ${t} in your environment.`);return n},El=Tee(n3(to==null?void 0:to.VITE_SUPABASE_URL,"VITE_SUPABASE_URL")),r3=n3((to==null?void 0:to.VITE_SUPABASE_ANON_KEY)??(to==null?void 0:to.VITE_SUPABASE_PUBLISHABLE_KEY),"VITE_SUPABASE_ANON_KEY (or VITE_SUPABASE_PUBLISHABLE_KEY)"),mi=t3(El,r3,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});var ac=(e=>(e.CLOSED="CLOSED",e.OPEN="OPEN",e.HALF_OPEN="HALF_OPEN",e))(ac||{});const Pee={failureThreshold:5,resetTimeout:3e4,successThreshold:2,monitoringPeriod:1e4,timeout:1e4},Oee="circuit_breaker_";class Iee{constructor(t,n={}){Wt(this,"config");Wt(this,"state");Wt(this,"failures",[]);Wt(this,"successes",0);Wt(this,"stateChangedAt");Wt(this,"lastFailureTime",null);Wt(this,"lastSuccessTime",null);Wt(this,"totalRequests",0);Wt(this,"listeners",[]);Wt(this,"storageKey");this.name=t,this.config={...Pee,...n},this.storageKey=`${Oee}${t}`,this.state=this.loadState()||"CLOSED",this.stateChangedAt=Date.now(),this.failures=[],this.loadFromStorage()}async execute(t,n){if(this.totalRequests++,!this.canExecute()){const a=new Error(`Circuit breaker is ${this.state}. Request rejected.`);throw a.circuitBreaker={state:this.state,name:this.name},a}const r=n||this.config.timeout;try{const a=new Promise((o,l)=>{setTimeout(()=>{l(new Error(`Request timeout after ${r}ms`))},r)}),s=await Promise.race([t(),a]);return this.recordSuccess(),s}catch(a){throw a instanceof Error&&a.message.includes("timeout")&&this.emitEvent({type:"timeout"}),this.recordFailure(a),a}}canExecute(){const t=Date.now();switch(this.state){case"CLOSED":return!0;case"OPEN":return t-this.stateChangedAt>=this.config.resetTimeout?(this.transitionTo("HALF_OPEN"),!0):!1;case"HALF_OPEN":return!0;default:return!1}}recordSuccess(){this.lastSuccessTime=Date.now(),this.emitEvent({type:"success"}),this.state==="HALF_OPEN"&&(this.successes++,this.successes>=this.config.successThreshold&&(this.transitionTo("CLOSED"),this.successes=0,this.failures=[])),this.saveToStorage()}recordFailure(t){const n=Date.now();this.lastFailureTime=n,this.emitEvent({type:"failure",error:t}),this.failures.push({time:n});const r=n-this.config.monitoringPeriod;this.failures=this.failures.filter(a=>a.time>r),(this.state==="CLOSED"||this.state==="HALF_OPEN")&&this.failures.length>=this.config.failureThreshold&&(this.transitionTo("OPEN"),this.successes=0),this.state==="HALF_OPEN"&&(this.transitionTo("OPEN"),this.successes=0),this.saveToStorage()}transitionTo(t){if(this.state===t)return;const n=this.state;this.state=t,this.stateChangedAt=Date.now(),this.emitEvent({type:"stateChange",from:n,to:t}),this.saveToStorage()}getStats(){return{failures:this.failures.length,successes:this.successes,state:this.state,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime,stateChangedAt:this.stateChangedAt,totalRequests:this.totalRequests}}getState(){return this.state}getConfig(){return{...this.config}}updateConfig(t){this.config={...this.config,...t};try{if(typeof localStorage<"u"){const n=localStorage.getItem(this.storageKey),r=n?JSON.parse(n):{};r.config=this.config,localStorage.setItem(this.storageKey,JSON.stringify(r))}}catch(n){console.warn("Failed to save circuit breaker config:",n)}}reset(){this.transitionTo("CLOSED"),this.failures=[],this.successes=0,this.lastFailureTime=null,this.lastSuccessTime=null,this.totalRequests=0,this.saveToStorage()}open(){this.transitionTo("OPEN")}on(t,n){this.listeners.push(n)}off(t){this.listeners=this.listeners.filter(n=>n!==t)}emitEvent(t){this.listeners.forEach(n=>{try{n(t)}catch(r){console.error("Circuit breaker event listener error:",r)}})}saveToStorage(){try{if(typeof localStorage<"u"){const t={state:this.state,stateChangedAt:this.stateChangedAt,failures:this.failures,successes:this.successes,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime,totalRequests:this.totalRequests};localStorage.setItem(this.storageKey,JSON.stringify(t))}}catch(t){console.warn("Failed to save circuit breaker state:",t)}}loadState(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t)return JSON.parse(t).state}}catch(t){console.warn("Failed to load circuit breaker state:",t)}return null}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t){const n=JSON.parse(t);n.config&&(this.config={...this.config,...n.config}),this.state=n.state||"CLOSED",this.stateChangedAt=n.stateChangedAt||Date.now(),this.failures=(n.failures||[]).filter(r=>{const a=Date.now()-this.config.monitoringPeriod;return r.time>a}),this.successes=n.successes||0,this.lastFailureTime=n.lastFailureTime||null,this.lastSuccessTime=n.lastSuccessTime||null,this.totalRequests=n.totalRequests||0,this.state==="OPEN"&&Date.now()-this.stateChangedAt>=this.config.resetTimeout&&this.transitionTo("HALF_OPEN")}}}catch(t){console.warn("Failed to load circuit breaker state:",t)}}}const nn=new Iee("database",{failureThreshold:5,resetTimeout:3e4,successThreshold:2,monitoringPeriod:1e4,timeout:1e4}),Ree=["ECONNRESET","ENOTFOUND","ETIMEDOUT","ECONNREFUSED","NetworkError"],Mee=["Timeout","ETIMEDOUT"],Dee=[500,502,503,504,429];function Wi(e){var a;const t=(e==null?void 0:e.message)||String(e),n=(e==null?void 0:e.code)||(e==null?void 0:e.error_code)||"",r=(e==null?void 0:e.status)||(e==null?void 0:e.statusCode)||((a=e==null?void 0:e.response)==null?void 0:a.status);if(Ree.some(s=>t.includes(s)||n.includes(s)||t.toLowerCase().includes("network")))return{category:"NETWORK",isRetryable:!0,retryDelay:1e3,userMessage:"Koneksi jaringan bermasalah. Mencoba lagi...",originalError:e};if(Mee.some(s=>t.includes(s)||n.includes(s)||t.toLowerCase().includes("timeout")))return{category:"TIMEOUT",isRetryable:!0,retryDelay:2e3,userMessage:"Permintaan memakan waktu terlalu lama. Mencoba lagi...",originalError:e};if(r===429||t.includes("rate limit")||t.includes("too many requests")||n==="PGRST301")return{category:"RATE_LIMIT",isRetryable:!0,retryDelay:5e3,userMessage:"Terlalu banyak permintaan. Mohon tunggu sebentar...",originalError:e};if(r===401||r===403||t.includes("JWT")||t.includes("token")||t.includes("unauthorized")||t.includes("forbidden")||n==="PGRST301"||n==="PGRST302")return{category:"AUTH_ERROR",isRetryable:!1,userMessage:"Sesi Anda telah berakhir. Silakan login kembali.",originalError:e};if(r===400||t.includes("validation")||t.includes("invalid")||t.includes("constraint")||n==="23505"||n==="23503"||n==="23514")return{category:"VALIDATION_ERROR",isRetryable:!1,userMessage:"Data yang dimasukkan tidak valid. Silakan periksa kembali.",originalError:e};if(Dee.includes(r)||n!=null&&n.startsWith("PGRST")||n!=null&&n.startsWith("P0001")||t.includes("database")||t.includes("connection")){const s=r>=500||r===429;return{category:"DATABASE_ERROR",isRetryable:s,retryDelay:s?2e3:void 0,userMessage:s?"Database sedang bermasalah. Mencoba lagi...":"Terjadi kesalahan database. Silakan coba lagi nanti.",originalError:e}}return r===404?{category:"VALIDATION_ERROR",isRetryable:!1,userMessage:"Data yang dicari tidak ditemukan.",originalError:e}:{category:"UNKNOWN",isRetryable:!0,retryDelay:1e3,userMessage:"Terjadi kesalahan. Mencoba lagi...",originalError:e}}const a3={reads:{limit:100,window:6e4},writes:{limit:30,window:6e4},rpc:{limit:20,window:6e4},auth:{limit:10,window:6e4}},Lee="rate_limit_";class v1{constructor(t="default",n={}){Wt(this,"config");Wt(this,"requests",new Map);Wt(this,"storageKey");this.name=t,this.config={...a3,...n},this.storageKey=`${Lee}${t}`,this.loadFromStorage(),typeof window<"u"&&setInterval(()=>this.cleanup(),6e4)}checkLimit(t,n,r){const a=this.getKey(t,n,r),s=Date.now(),o=this.getConfig(n);let l=this.requests.get(a)||[];const c=s-o.window;l=l.filter(v=>v.timestamp>c);const u=l.length,d=u<o.limit,h=l[0],f=h?h.timestamp+o.window:s+o.window,m=d?void 0:Math.ceil((f-s)/1e3)*1e3,g={allowed:d,remaining:Math.max(0,o.limit-u-1),resetAt:f,retryAfter:m};return d&&(l.push({timestamp:s,operation:n,endpoint:r}),this.requests.set(a,l),this.saveToStorage(a,l)),g}recordRequest(t,n,r){const a=this.getKey(t,n,r),s=Date.now();let o=this.requests.get(a)||[];o.push({timestamp:s,operation:n,endpoint:r});const l=this.getConfig(n),c=s-l.window;o=o.filter(u=>u.timestamp>c),this.requests.set(a,o),this.saveToStorage(a,o)}getUsage(t,n,r){const a=this.getKey(t,n,r),s=Date.now(),o=this.getConfig(n);let l=this.requests.get(a)||[];const c=s-o.window;l=l.filter(h=>h.timestamp>c);const u=l[0],d=u?u.timestamp+o.window:s+o.window;return{count:l.length,limit:o.limit,resetAt:d}}reset(t,n,r){if(n){const a=this.getKey(t,n,r);this.requests.delete(a),this.deleteFromStorage(a)}else{const a=t?`${t}:`:"anonymous:";for(const s of this.requests.keys())s.startsWith(a)&&(this.requests.delete(s),this.deleteFromStorage(s))}}cleanup(){const t=Date.now(),n=Math.max(this.config.reads.window,this.config.writes.window,this.config.rpc.window,this.config.auth.window),r=t-n;for(const[a,s]of this.requests.entries()){const o=s.filter(l=>l.timestamp>r);o.length===0?(this.requests.delete(a),this.deleteFromStorage(a)):o.length!==s.length&&(this.requests.set(a,o),this.saveToStorage(a,o))}}getConfig(t){return this.config[t]}getKey(t,n,r){return`${t||"anonymous"}:${n}${r?`:${r}`:""}`}saveToStorage(t,n){try{if(typeof localStorage<"u"){const r=`${this.storageKey}:${t}`,a=Date.now(),s=n.filter(o=>a-o.timestamp<6e4);localStorage.setItem(r,JSON.stringify({requests:s,savedAt:a}))}}catch(r){console.warn("Failed to save rate limit data:",r)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=Date.now(),n=`${this.storageKey}:`;for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a&&a.startsWith(n))try{const s=JSON.parse(localStorage.getItem(a)||"{}"),o=s.savedAt||0;if(t-o<3e5){const l=(s.requests||[]).filter(c=>{const u=c.operation||"read",d=this.getConfig(u);return t-c.timestamp<d.window});if(l.length>0){const c=a.replace(n,"");this.requests.set(c,l)}else localStorage.removeItem(a)}else localStorage.removeItem(a)}catch{localStorage.removeItem(a)}}}}catch(t){console.warn("Failed to load rate limit data:",t)}}deleteFromStorage(t){try{if(typeof localStorage<"u"){const n=`${this.storageKey}:${t}`;localStorage.removeItem(n)}}catch{}}}new v1("default",a3);class $ee{constructor(){Wt(this,"queue",[]);Wt(this,"batchSize",50);Wt(this,"batchInterval",3e4);Wt(this,"intervalId",null);Wt(this,"enabled",!0);Wt(this,"lastFlushTime",0);Wt(this,"flushThrottle",1e4);typeof window<"u"&&this.startBatching()}record(t){if(!this.enabled)return;this.queue.length>=1e3&&(this.queue=this.queue.slice(-500)),this.queue.push({...t,timestamp:Date.now()});const n=Date.now();this.queue.length>=this.batchSize&&n-this.lastFlushTime>=this.flushThrottle&&this.flush()}startBatching(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.flush()},this.batchInterval)}stopBatching(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}async flush(){if(this.queue.length===0)return;const t=Date.now();if(t-this.lastFlushTime<this.flushThrottle)return;const n=[...this.queue];this.queue=[],this.lastFlushTime=t;try{const{error:r}=await ce.from("circuit_breaker_metrics").insert(n.map(a=>({operation_type:a.operationType,endpoint:a.endpoint||null,user_id:a.userId||null,circuit_breaker_state:a.circuitBreakerState,success:a.success,error_category:a.errorCategory||null,response_time_ms:a.responseTimeMs,metadata:a.metadata||{}})));r&&(console.warn("Failed to send metrics:",r),this.queue.length<100&&(this.queue=[...n,...this.queue]))}catch(r){console.warn("Failed to flush metrics:",r),this.queue.length<100&&(this.queue=[...n,...this.queue])}}setEnabled(t){this.enabled=t,t?this.startBatching():(this.stopBatching(),this.queue=[])}getQueueSize(){return this.queue.length}async forceFlush(){await this.flush()}}function Pw(e,t){if(e.length===0)return 0;const n=[...e].sort((a,s)=>a-s),r=Math.ceil(t/100*n.length)-1;return n[Math.max(0,r)]}async function i3(e,t,n){try{let r=ce.from("circuit_breaker_metrics").select("*");e&&(r=r.gte("created_at",e.toISOString())),t&&(r=r.lt("created_at",t.toISOString()));const{data:a,error:s}=await r;if(s||!a)return{totalOperations:0,successRate:0,failureRate:0,avgResponseTime:0,p50ResponseTime:0,p95ResponseTime:0,p99ResponseTime:0,circuitBreakerStates:{},errorCategories:{},operationsByType:{}};const o=a.length,l=a.filter(g=>g.success).length,c=a.filter(g=>!g.success).length,u=a.map(g=>g.response_time_ms||0).filter(g=>g>0),d={},h={},f={};a.forEach(g=>{const v=g.circuit_breaker_state||"UNKNOWN";if(d[v]=(d[v]||0)+1,g.error_category){const y=g.error_category;h[y]=(h[y]||0)+1}const x=g.operation_type||"unknown";f[x]=(f[x]||0)+1});const m=u.length>0?u.reduce((g,v)=>g+v,0)/u.length:0;return{totalOperations:o,successRate:o>0?l/o:0,failureRate:o>0?c/o:0,avgResponseTime:m,p50ResponseTime:Pw(u,50),p95ResponseTime:Pw(u,95),p99ResponseTime:Pw(u,99),circuitBreakerStates:d,errorCategories:h,operationsByType:f}}catch(r){return console.error("Failed to get metrics stats:",r),{totalOperations:0,successRate:0,failureRate:0,avgResponseTime:0,p50ResponseTime:0,p95ResponseTime:0,p99ResponseTime:0,circuitBreakerStates:{},errorCategories:{},operationsByType:{}}}}const gm=new $ee,MP={baseConfig:{read:{limit:100,window:6e4},write:{limit:30,window:6e4},rpc:{limit:20,window:6e4},auth:{limit:10,window:6e4}},minMultiplier:.5,maxMultiplier:2,adjustmentInterval:6e4,healthyLatencyThreshold:200,stressLatencyThreshold:1e3};class Fee{constructor(t={}){Wt(this,"config");Wt(this,"currentMultipliers",new Map);Wt(this,"lastAdjustment",Date.now());Wt(this,"rateLimiters",new Map);Wt(this,"storageKey","adaptive_rate_limiter");Wt(this,"adjustmentIntervalId",null);this.config={...MP,...t},this.loadFromStorage(),Object.keys(this.config.baseConfig).forEach(n=>{this.currentMultipliers.has(n)||this.currentMultipliers.set(n,1)}),typeof window<"u"&&(this.adjustmentIntervalId=setInterval(()=>this.adjustLimits(),this.config.adjustmentInterval))}getLimiter(t){if(!this.rateLimiters.has(t)){const n=this.config.baseConfig[t],r=this.currentMultipliers.get(t)||1,a={limit:Math.round(n.limit*r),window:n.window};this.rateLimiters.set(t,new v1(`adaptive_${t}`,{[t]:a}))}return this.rateLimiters.get(t)}async adjustLimits(){try{const t=Date.now(),n=new Date(t-5*60*1e3),r=await this.getRecentStats(n,new Date(t));for(const a of Object.keys(this.config.baseConfig))await this.adjustOperationLimit(a,r);this.lastAdjustment=t}catch(t){console.warn("Failed to adjust rate limits:",t)}}async getRecentStats(t,n){try{const r=await i3(t,n);return{avgResponseTime:r.avgResponseTime,errorRate:r.failureRate,requestVolume:r.totalOperations}}catch{return{avgResponseTime:300,errorRate:.01,requestVolume:100}}}async adjustOperationLimit(t,n){const r=this.currentMultipliers.get(t)||1,a=this.config.baseConfig[t];let s=r;const{avgResponseTime:o,errorRate:l}=n;o<this.config.healthyLatencyThreshold&&l<.05?s=Math.min(r*1.1,this.config.maxMultiplier):o>this.config.stressLatencyThreshold||l>.2?s=Math.max(r*.8,this.config.minMultiplier):r>1?s=Math.max(r*.95,1):r<1&&(s=Math.min(r*1.05,1)),this.currentMultipliers.set(t,s);const c={limit:Math.round(a.limit*s),window:a.window};this.rateLimiters.set(t,new v1(`adaptive_${t}`,{[t]:c})),this.saveToStorage()}getMultiplier(t){return this.currentMultipliers.get(t)||1}getEffectiveLimit(t){const n=this.config.baseConfig[t],r=this.currentMultipliers.get(t)||1;return Math.round(n.limit*r)}reset(){Object.keys(this.config.baseConfig).forEach(t=>{this.currentMultipliers.set(t,1),this.rateLimiters.delete(t)}),this.saveToStorage()}getConfig(){return{...this.config}}updateConfig(t){this.config={...this.config,...t},t.adjustmentInterval&&typeof window<"u"&&(this.adjustmentIntervalId&&clearInterval(this.adjustmentIntervalId),this.adjustmentIntervalId=setInterval(()=>this.adjustLimits(),this.config.adjustmentInterval)),this.rateLimiters.clear(),this.saveToStorage()}checkLimit(t,n,r){return this.getLimiter(n).checkLimit(t,n,r)}recordRequest(t,n,r){this.getLimiter(n).recordRequest(t,n,r)}getUsage(t,n,r){return this.getLimiter(n).getUsage(t,n,r)}saveToStorage(){try{if(typeof localStorage<"u"){const t={config:this.config,multipliers:Object.fromEntries(this.currentMultipliers),lastAdjustment:this.lastAdjustment};localStorage.setItem(this.storageKey,JSON.stringify(t))}}catch(t){console.warn("Failed to save adaptive rate limiter config:",t)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t){const n=JSON.parse(t);n.config&&(this.config={...MP,...n.config}),n.multipliers&&Object.entries(n.multipliers).forEach(([r,a])=>{this.currentMultipliers.set(r,a)}),n.lastAdjustment&&(this.lastAdjustment=n.lastAdjustment)}}}catch(t){console.warn("Failed to load adaptive rate limiter config:",t)}}}const Bt=new Fee;async function s3(e,t=3,n=1e3){let r;for(let a=0;a<=t;a++)try{return await e()}catch(s){r=s;const o=Wi(s);if(!o.isRetryable||nn.getState()!=="CLOSED")throw s;if(a>=t)break;const l=Math.min(n*Math.pow(2,a),8e3),c=o.retryDelay||l;await new Promise(u=>setTimeout(u,c))}throw r}let Gh=null,Ow=0;const Uee=6e4;async function WN(e,t=!1){var r,a;const n=Date.now();if(!t&&Gh!==null&&n-Ow<Uee)return Gh;try{const s=e.auth.getSession(),o=new Promise(c=>{setTimeout(()=>c({data:{session:null}}),500)}),{data:l}=await Promise.race([s,o]);return Gh=((a=(r=l==null?void 0:l.session)==null?void 0:r.user)==null?void 0:a.id)||null,Ow=n,Gh}catch{return Gh=null,Ow=n,null}}async function o3(e,t,n,r,a=!1){if(a)return;const s=r!==void 0?r:await WN(e).catch(()=>null);if(t==="rpc"){const l=Bt.getUsage(s,t,n);if(l.count<l.limit*.9){Bt.recordRequest(s,t,n);return}const c=Bt.checkLimit(s,t,n);if(!c.allowed){const u=new Error(c.retryAfter?`Rate limit exceeded. Please wait ${Math.ceil(c.retryAfter/1e3)} seconds.`:"Rate limit exceeded. Please try again later.");throw u.code="RATE_LIMIT_EXCEEDED",u.status=429,u.retryAfter=c.retryAfter,u.category="RATE_LIMIT",u}return}const o=Bt.checkLimit(s,t,n);if(!o.allowed){const l=new Error(o.retryAfter?`Rate limit exceeded. Please wait ${Math.ceil(o.retryAfter/1e3)} seconds.`:"Rate limit exceeded. Please try again later.");throw l.code="RATE_LIMIT_EXCEEDED",l.status=429,l.retryAfter=o.retryAfter,l.category="RATE_LIMIT",l}}function y1(e){return e===void 0?"u":e===null?"n":typeof e=="function"?"f":typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"?`p:${String(e)}`:typeof e=="string"?`s:${e}`:e instanceof Date?`d:${e.toISOString()}`:Array.isArray(e)?`a:[${e.map(t=>y1(t)).join(",")}]`:typeof e=="object"?`o:{${Object.keys(e).sort().map(r=>`${r}:${y1(e[r])}`).join(",")}}`:`x:${String(e)}`}function Bee(e){return!e||e.length===0?"":e.map(t=>y1(t)).join("|")}function zee(e){if(!e)return"base";let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return Math.abs(t).toString(36)}function l3(e,t,n="read",r,a=!1,s=""){return new Proxy(e,{get(o,l){const c=o[l];let u=n;if((l==="insert"||l==="update"||l==="upsert"||l==="delete")&&(u="write"),l==="then"||l==="catch"||l==="finally"){const d=Promise.resolve(o),h=(async()=>{const f=Date.now();zee(s);const m=WN(t).catch(()=>null),g=nn.getState();try{const b=await Promise.race([m,new Promise(_=>setTimeout(()=>_(null),100))]);u==="read"?Bt.recordRequest(b,u,r):await o3(t,u,r,b)}catch(b){if(b.code==="RATE_LIMIT_EXCEEDED")throw b}let v;try{v=await nn.execute(()=>s3(async()=>await d))}catch(b){v={data:null,error:b}}const x=Date.now()-f,y=v!=null&&v.error?Wi(v.error).category:void 0,w=await m.catch(()=>null);return Promise.resolve().then(()=>{try{gm.record({operationType:u,endpoint:r,userId:w||void 0,circuitBreakerState:g,success:!(v!=null&&v.error),errorCategory:y,responseTimeMs:x,metadata:v!=null&&v.error?{error:v.error.message}:{}})}catch{}}),v})().catch(f=>{const m=Date.now()-startTime,g=Wi(f);return gm.record({operationType:u,endpoint:r,userId:userId||void 0,circuitBreakerState:circuitState,success:!1,errorCategory:g.category,responseTimeMs:m,metadata:{error:f instanceof Error?f.message:String(f)}}),f.code==="RATE_LIMIT_EXCEEDED"?{data:null,error:{message:f.message,code:"RATE_LIMIT_EXCEEDED",status:429,category:"RATE_LIMIT",retryAfter:f.retryAfter,circuitBreaker:nn.getState()}}:f&&typeof f=="object"&&("data"in f||"error"in f)?{data:f.data||null,error:{...f.error||f,message:g.userMessage,category:g.category,circuitBreaker:nn.getState()}}:{data:null,error:{...g.originalError,message:g.userMessage,category:g.category,circuitBreaker:nn.getState()}}});return(f,m)=>h[l](f,m)}return typeof c=="function"?(...d)=>{const h=c.apply(o,d),f=Bee(d),m=f?`${l}(${f})`:`${l}()`,g=s?`${s}|${m}`:m;return l3(h,t,u,r,a,g)}:c}})}function Wee(e){const t=e;return{from:n=>{const r=t.from(n);return l3(r,t,"read",n)},rpc:async(n,r,a)=>{const s=Date.now(),o=WN(t).catch(()=>null),l=nn.getState();try{try{const f=await Promise.race([o,new Promise(m=>setTimeout(()=>m(null),100))]);await o3(t,"rpc",n,f,!1)}catch(f){if(f.code==="RATE_LIMIT_EXCEEDED")throw f}const c=await nn.execute(()=>s3(async()=>await t.rpc(n,r,a))),u=Date.now()-s,d=c!=null&&c.error?Wi(c.error).category:void 0,h=await o.catch(()=>null);return Promise.resolve().then(()=>{try{gm.record({operationType:"rpc",endpoint:n,userId:h||void 0,circuitBreakerState:l,success:!(c!=null&&c.error),errorCategory:d,responseTimeMs:u,metadata:c!=null&&c.error?{error:c.error.message}:{}})}catch{}}),c}catch(c){const u=Wi(c),d=Date.now()-s,h=await o.catch(()=>null);return Promise.resolve().then(()=>{try{gm.record({operationType:"rpc",endpoint:n,userId:h||void 0,circuitBreakerState:l,success:!1,errorCategory:u.category,responseTimeMs:d,metadata:{error:c instanceof Error?c.message:String(c)}})}catch{}}),{data:null,error:{...u.originalError,message:u.userMessage,category:u.category,circuitBreaker:l}}}},auth:{getSession:async()=>{try{return await nn.execute(()=>t.auth.getSession(),5e3)}catch(n){const r=Wi(n);throw new Error(r.userMessage)}},getUser:async()=>{try{return await nn.execute(()=>t.auth.getUser(),5e3)}catch(n){const r=Wi(n);throw new Error(r.userMessage)}},signOut:async()=>{try{return await nn.execute(()=>t.auth.signOut(),5e3)}catch(n){const r=Wi(n);throw new Error(r.userMessage)}},signInWithPassword:async n=>{try{return await nn.execute(()=>t.auth.signInWithPassword(n),1e4)}catch(r){const a=Wi(r);throw new Error(a.userMessage)}},signInWithOtp:async(n,r)=>{try{return await nn.execute(()=>t.auth.signInWithOtp({email:n,options:r}),1e4)}catch(a){const s=Wi(a);throw new Error(s.userMessage)}},verifyOtp:async n=>{try{return await nn.execute(()=>t.auth.verifyOtp(n),1e4)}catch(r){const a=Wi(r);throw new Error(a.userMessage)}},onAuthStateChange:t.auth.onAuthStateChange.bind(t.auth),resetPasswordForEmail:t.auth.resetPasswordForEmail.bind(t.auth),refreshSession:t.auth.refreshSession.bind(t.auth),updateUser:t.auth.updateUser.bind(t.auth),setSession:t.auth.setSession.bind(t.auth)},storage:t.storage,channel:t.channel.bind(t),removeChannel:t.removeChannel.bind(t),removeAllChannels:t.removeAllChannels.bind(t),getChannels:t.getChannels.bind(t),getCircuitBreaker:()=>nn,getCircuitBreakerStats:()=>nn.getStats()}}const ce=mi,_t=Wee(ce);async function Jt(e){var t;try{const{action:n,resource:r,resourceId:a=null,context:s={},ip:o=null,userAgent:l=null}=e;let c=e.userId??null;if(!c)try{const h=typeof localStorage<"u"?localStorage.getItem("app.currentUserId"):null;h&&(c=h)}catch{}if(!c){const{data:h}=await ce.auth.getUser();c=((t=h==null?void 0:h.user)==null?void 0:t.id)??null}let u=e.orgId??null;if(!u&&c&&(authData!=null&&authData.user))try{const{data:h}=await ce.from("org_members").select("org_id").eq("user_id",c).limit(1).maybeSingle();u=(h==null?void 0:h.org_id)??null}catch{return}if(!u&&n==="auth.logout")return;if(!u)try{const{data:h}=await ce.from("orgs").select("id").limit(1).maybeSingle();u=(h==null?void 0:h.id)??null}catch{return}try{const h=`logAction:${n}:${r}:${c||"anon"}`,f=Date.now(),m=typeof localStorage<"u"?localStorage.getItem(h):null;if(m){const g=Number(m)||0;if(f-g<3e3)return}typeof localStorage<"u"&&localStorage.setItem(h,String(f))}catch{}if(!u)return;const{error:d}=await ce.rpc("log_action",{p_action:n,p_resource:r,p_resource_id:a,p_context:{...s,route:typeof window<"u"?window.location.pathname:null},p_ip:o,p_user_agent:l,p_org_id:u,p_user_id:c});d&&console.warn("logAction failed",d)}catch(n){console.warn("logAction threw",n)}}const c3=p.createContext(void 0);function qee({children:e}){var $;const t=li(),[n,r]=p.useState(null),[a,s]=p.useState(null),[o,l]=p.useState(!0),c=p.useRef(null),[u,d]=p.useState(!1),h=p.useMemo(()=>{try{const B=new URL(El).hostname.split(".")[0];return B?`sb-${B}-auth-token`:null}catch{return null}},[]),[f,m]=p.useState(()=>{var A;try{if(localStorage.getItem("otpVerified")==="true")return!0;const R=localStorage.getItem("app.lastAuthEvent");if(R)try{const C=JSON.parse(R),W=(A=C==null?void 0:C.user)==null?void 0:A.id;if(W)return localStorage.getItem(`otpVerified:${W}`)==="true"}catch{}return!1}catch{return!1}}),[g,v]=p.useState(!1),[x,y]=p.useState(!1),[w,b]=p.useState(!1),[_,k]=p.useState(!1),[j,N]=p.useState(0);p.useEffect(()=>{b(!1)},[n==null?void 0:n.id]);const[O,I]=p.useState(!1),P=p.useRef(null),S=p.useRef(null);p.useEffect(()=>{S.current=(n==null?void 0:n.id)??null},[n==null?void 0:n.id]);const D=p.useCallback(A=>{var B;m(A);try{const R=(B=a==null?void 0:a.user)!=null&&B.id?`otpVerified:${a.user.id}`:"otpVerified";A?(localStorage.setItem(R,"true"),localStorage.setItem("otpVerified","true")):(localStorage.removeItem(R),localStorage.removeItem("otpVerified"))}catch{}},[($=a==null?void 0:a.user)==null?void 0:$.id]),L=async A=>{var C,W;const B=(C=A==null?void 0:A.user)==null?void 0:C.id,R=j+1;if(N(R),!B)return y(!1),!0;if(_||w&&((W=A==null?void 0:A.user)==null?void 0:W.id)===(n==null?void 0:n.id))return!x;k(!0);try{const{data:Q,error:X}=await ce.from("users_profile").select("is_active").eq("user_id",B).maybeSingle();return X?(console.error("Error checking account status:",X),!x):Q?Q.is_active===!0?(y(!1),b(!0),!0):(t("/account-deactivated",{replace:!0}),!1):!x}catch(Q){return console.error("Failed to check account status",Q),!x}finally{k(!1)}},U=async A=>{var R,C,W,Q,X;const B=(R=A==null?void 0:A.user)==null?void 0:R.id;if(!B){d(!1);try{const Z=(C=A==null?void 0:A.user)!=null&&C.id?`otpRequired:${A.user.id}`:"otpRequired";localStorage.removeItem(Z)}catch{}return!1}try{const{data:Z,error:te}=await ce.from("users_profile").select("is_2fa_email_enabled").eq("user_id",B).maybeSingle();if(te)throw te;if(!Z){d(!0);try{const ie=(W=A==null?void 0:A.user)!=null&&W.id?`otpRequired:${A.user.id}`:"otpRequired";localStorage.setItem(ie,"true")}catch{}return!0}const J=(Z==null?void 0:Z.is_2fa_email_enabled)===!0;d(!!J);try{const ie=(Q=A==null?void 0:A.user)!=null&&Q.id?`otpRequired:${A.user.id}`:"otpRequired";J?localStorage.setItem(ie,"true"):localStorage.removeItem(ie)}catch{}return!!J}catch(Z){console.warn("Failed to evaluate 2FA profile flag",Z),d(!0);try{const te=(X=A==null?void 0:A.user)!=null&&X.id?`otpRequired:${A.user.id}`:"otpRequired";localStorage.setItem(te,"true")}catch{}return!0}},F=A=>{let B=!1;const R=window.setTimeout(()=>{B||v(!0)},5e3);return A.finally(()=>{B=!0,window.clearTimeout(R),v(!0)})};p.useEffect(()=>{(async()=>{var W,Q,X;l(!0),v(!1);let R=!1;const C=window.setTimeout(()=>{R=!0,l(!1),v(!0)},5e3);try{try{localStorage.removeItem("otpRequired"),localStorage.removeItem("otpVerified")}catch{}try{const ge=Object.keys(localStorage).filter(ae=>ae.startsWith("sb-")&&ae.endsWith("-auth-token"));for(const ae of ge)try{const Re=localStorage.getItem(ae);if(!Re)continue;const me=JSON.parse(Re);if(me!=null&&me.access_token&&(me!=null&&me.user)){s(me),r(me.user);break}}catch{}h?ge.filter(Re=>Re!==h).forEach(Re=>{try{localStorage.removeItem(Re)}catch{}}):localStorage.removeItem("sb-yoekcpoppfudmqtvjcby-auth-token")}catch{}const Z=await Promise.race([ce.auth.getSession().catch(()=>({data:{session:null}})),new Promise(ge=>{setTimeout(()=>ge({data:{session:null}}),4e3)})]),te=((W=Z==null?void 0:Z.data)==null?void 0:W.session)??null;s(te),r((te==null?void 0:te.user)??null);const J=await Promise.race([ce.auth.getUser().catch(()=>({data:{user:null}})),new Promise(ge=>{setTimeout(()=>ge({data:{user:null}}),4e3)})]);if(!(((Q=J==null?void 0:J.data)==null?void 0:Q.user)??null)){s(null),r(null),d(!1),D(!1),v(!0);return}if(te){if(!await Promise.race([L(te),new Promise(ae=>setTimeout(()=>ae(!0),3e3))])){s(te),r(te.user),d(!1),D(!1),v(!0),l(!1);return}s(te),r(te.user);try{(X=te.user)!=null&&X.id&&(localStorage.setItem("app.currentUserId",te.user.id),localStorage.setItem("app.currentUserEmail",te.user.email||""))}catch{}R||(window.clearTimeout(C),l(!1)),F(U(te).then(ae=>{d(!!ae)}));return}else d(!1),D(!1),v(!0)}finally{R||(window.clearTimeout(C),l(!1))}})();const{data:{subscription:B}}=ce.auth.onAuthStateChange(async(R,C)=>{var W,Q,X,Z;try{if(R==="SIGNED_IN"){const te=S.current,J=((W=C==null?void 0:C.user)==null?void 0:W.id)||null;if(!!te&&!!J&&te===J){s(C),r((C==null?void 0:C.user)??null);return}if(O){s(C),r((C==null?void 0:C.user)??null);return}if(!await Promise.race([L(C),new Promise(me=>setTimeout(()=>me(!0),3e3))])){s(C),r((C==null?void 0:C.user)??null),d(!1),D(!1),v(!0),l(!1);return}s(C),r((C==null?void 0:C.user)??null);const ae=((Q=C==null?void 0:C.user)==null?void 0:Q.id)||null;if(ae&&P.current!==ae){Jt({action:"auth.login",resource:"auth",userId:ae,context:{}}).catch(()=>{}),P.current=ae;try{localStorage.setItem("app.currentUserId",ae),localStorage.setItem("app.currentUserEmail",((X=C==null?void 0:C.user)==null?void 0:X.email)||"")}catch{}}let Re=!1;try{const me=ae?`otpVerified:${ae}`:"otpVerified";Re=localStorage.getItem(me)==="true"||localStorage.getItem("otpVerified")==="true"}catch{}D(!!Re);try{const me=(Z=C==null?void 0:C.user)!=null&&Z.id?`otpRequired:${C.user.id}`:"otpRequired";localStorage.removeItem(me)}catch{}v(!1),l(!1),F(U(C).then(me=>{var K;if(me&&!Re){const de=((K=C==null?void 0:C.user)==null?void 0:K.id)||null;de&&c.current!==de&&ce.functions.invoke("send-2fa-login-email",{headers:C!=null&&C.access_token?{Authorization:`Bearer ${C.access_token}`}:void 0}).then(()=>{c.current=de}).catch($e=>{console.warn("2FA send function failed",$e)})}d(!!me)}));try{localStorage.setItem("app.lastAuthEvent",JSON.stringify({event:R,at:Date.now(),user:(C==null?void 0:C.user)||null}))}catch{}return}if(R==="PASSWORD_RECOVERY"){try{localStorage.setItem("auth.intent","recovery")}catch{}try{if(window.location.hash){const te=new URL(window.location.href);te.hash="",window.history.replaceState({},document.title,te.toString())}}catch{}window.location.pathname!=="/reset-password"&&t("/reset-password",{replace:!0}),v(!1),F((async()=>{try{const te=await U(C);d(!!te),te&&D(!1)}catch{d(!1)}})());return}if(R==="TOKEN_REFRESHED"||R==="USER_UPDATED")return;if(R==="SIGNED_OUT"){n!=null&&n.id&&Jt({action:"auth.logout",resource:"auth",userId:n.id,context:{}}).catch(()=>{}),d(!1),D(!1),I(!1),y(!1);try{const te=[];for(let ie=0;ie<localStorage.length;ie++){const ge=localStorage.key(ie);ge&&te.push(ge)}te.forEach(ie=>{try{localStorage.removeItem(ie)}catch{}});const J=[];for(let ie=0;ie<sessionStorage.length;ie++){const ge=sessionStorage.key(ie);ge&&J.push(ge)}J.forEach(ie=>{try{sessionStorage.removeItem(ie)}catch{}})}catch(te){console.warn("Error clearing cache on sign out:",te)}}}catch{}R!=="SIGNED_IN"&&(s(C),r((C==null?void 0:C.user)??null)),v(!0),l(!1)});return()=>B.unsubscribe()},[]),p.useEffect(()=>{const A=async()=>{try{await ce.auth.getSession()}catch{}},B=()=>{try{document.visibilityState==="visible"&&A()}catch{}};window.addEventListener("focus",A),document.addEventListener("visibilitychange",B);const R=window.setInterval(()=>{try{document.visibilityState==="visible"&&ce.auth.getSession().catch(()=>{})}catch{}},4*60*1e3);return()=>{window.removeEventListener("focus",A),document.removeEventListener("visibilitychange",B);try{clearInterval(R)}catch{}}},[]);const M=p.useCallback(async()=>{try{I(!0);try{const A=[];for(let C=0;C<localStorage.length;C++){const W=localStorage.key(C);W&&A.push(W)}A.forEach(C=>{try{localStorage.removeItem(C)}catch{}});const B=[];for(let C=0;C<sessionStorage.length;C++){const W=sessionStorage.key(C);W&&B.push(W)}B.forEach(C=>{try{sessionStorage.removeItem(C)}catch{}});const R=["app.cached","app.lastAuthEvent","app.currentUserId","app.currentUserEmail","otpVerified","otpRequired","auth.intent","sb-"];Object.keys(localStorage).forEach(C=>{if(R.some(W=>C.includes(W)))try{localStorage.removeItem(C)}catch{}})}catch(A){console.warn("Error clearing cache:",A)}await ce.auth.signOut()}catch(A){console.error("Error signing out:",A)}finally{I(!1)}},[]),T=p.useCallback(async()=>{try{const{data:{user:A}}=await ce.auth.getUser();r(A)}catch(A){console.error("Error refreshing user:",A)}},[]),E=p.useMemo(()=>({user:n,session:a,loading:o,signOut:M,refreshUser:T,otpRequired:u,otpVerified:f,setOtpVerified:D,otpEvaluated:g,accountDeactivated:x,setAccountDeactivated:y}),[n,a,o,M,T,u,f,D,g,x,y]);return i.jsx(c3.Provider,{value:E,children:e})}function aa(){const e=p.useContext(c3);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const Ju={analytics:["read"],ai_profiles:["create","update","delete","read_all","read_own"],ai_sessions:["create","update","delete","read_all","read_own"],channels:["create","update","delete","read_all","read_own"],contacts:["create","update","delete","read_all","read_own"],contact_identities:["create","update","delete","read_all","read_own"],threads:["create","update","delete","read_all","read_channel_owned","read_collaborator"],messages:["create","update","delete","send","read_all","read_collaborator"],ai_agent_files:["create","read","delete"],admin_panel:["read","update"],super_agents:["create","update","delete","read_all","read_own"],users_profile:["create","update","delete","read"],roles:["create","read","update","delete"],audit_logs:["read"],alerts:["read","ack"]},Iw=e=>e==="create"?"create":e==="update"?"update":e==="delete"?"delete":e.startsWith("read")||e.startsWith("view")?"read":"special",Hee=e=>["delete","manage_2fa","configure","update_token_limit","manage"].some(n=>e.includes(n)),Kee={defaultTtl:5*60*1e3,maxSize:100,strategy:"stale-while-revalidate"},Yh="supabase_cache_",DP="1";class Vee{constructor(t={}){Wt(this,"cache",new Map);Wt(this,"config");this.config={...Kee,...t},this.loadFromStorage(),typeof window<"u"&&setInterval(()=>this.cleanup(),6e4)}get(t){const n=this.cache.get(t);if(!n)return null;const r=Date.now(),a=n.ttl||this.config.defaultTtl;return n.timestamp+a<r?(this.cache.delete(t),this.deleteFromStorage(t),null):n.data}set(t,n,r){const a={data:n,timestamp:Date.now(),ttl:r||this.config.defaultTtl,version:parseInt(DP)};if(this.cache.size>=this.config.maxSize){const s=this.findOldestEntry();s&&(this.cache.delete(s),this.deleteFromStorage(s))}this.cache.set(t,a),this.saveToStorage(t,a)}async execute(t,n,r,a){const s=r||this.config.strategy,o=this.get(t);switch(s){case"cache-first":if(o)return o;try{const l=await n();return this.set(t,l,a),l}catch(l){if(o)return o;throw l}case"network-first":try{const l=await n();return this.set(t,l,a),l}catch(l){if(o)return o;throw l}case"stale-while-revalidate":if(o)return n().then(l=>{this.set(t,l,a)}).catch(()=>{}),o;try{const l=await n();return this.set(t,l,a),l}catch(l){throw l}case"network-only":try{const l=await n();return this.set(t,l,a),l}catch(l){throw l}case"cache-only":if(o)return o;throw new Error("No cached data available");default:return await n()}}invalidate(t){this.cache.delete(t),this.deleteFromStorage(t)}invalidatePattern(t){const n=new RegExp(t);for(const r of this.cache.keys())n.test(r)&&this.invalidate(r)}clear(){this.cache.clear();try{if(typeof localStorage<"u")for(let t=localStorage.length-1;t>=0;t--){const n=localStorage.key(t);n&&n.startsWith(Yh)&&localStorage.removeItem(n)}}catch(t){console.warn("Failed to clear cache from storage:",t)}}findOldestEntry(){let t=null,n=1/0;for(const[r,a]of this.cache.entries())a.timestamp<n&&(n=a.timestamp,t=r);return t}cleanup(){const t=Date.now();for(const[n,r]of this.cache.entries()){const a=r.ttl||this.config.defaultTtl;r.timestamp+a<t&&(this.cache.delete(n),this.deleteFromStorage(n))}}saveToStorage(t,n){try{if(typeof localStorage<"u"){const r=`${Yh}${t}`;localStorage.setItem(r,JSON.stringify(n))}}catch(r){console.warn("Failed to save cache entry:",r)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=Date.now();for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);if(r&&r.startsWith(Yh))try{const s=JSON.parse(localStorage.getItem(r)||"{}");if(s.version&&s.version!==parseInt(DP)){localStorage.removeItem(r);continue}const o=s.ttl||this.config.defaultTtl;if(s.timestamp+o<t){localStorage.removeItem(r);continue}const l=r.replace(Yh,"");this.cache.set(l,s)}catch{localStorage.removeItem(r)}}}}catch(t){console.warn("Failed to load cache from storage:",t)}}deleteFromStorage(t){try{if(typeof localStorage<"u"){const n=`${Yh}${t}`;localStorage.removeItem(n)}}catch{}}getStats(){const t=Date.now(),n=Array.from(this.cache.entries()).map(([r,a])=>({key:r,age:t-a.timestamp,ttl:a.ttl||this.config.defaultTtl}));return{size:this.cache.size,maxSize:this.config.maxSize,entries:n}}}const io=new Vee;class Gee{constructor(){Wt(this,"queue",[]);Wt(this,"processing",!1);Wt(this,"maxRetries",3);Wt(this,"storageKey","offline_queue");this.loadFromStorage(),typeof window<"u"&&window.addEventListener("online",()=>{this.processQueue()})}add(t){const n={...t,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),retries:0};return this.queue.push(n),this.saveToStorage(),typeof navigator<"u"&&navigator.onLine&&this.processQueue(),n.id}async processQueue(t){if(!(this.processing||this.queue.length===0)&&t){this.processing=!0;try{const n=[...this.queue];this.queue=[];for(const r of n)try{await t(r),this.remove(r.id)}catch{r.retries++,r.retries<this.maxRetries?this.queue.push(r):(console.error("Failed to sync write operation after max retries:",r),this.remove(r.id))}this.saveToStorage()}finally{this.processing=!1}}}remove(t){this.queue=this.queue.filter(n=>n.id!==t),this.saveToStorage()}size(){return this.queue.length}clear(){this.queue=[],this.saveToStorage()}getAll(){return[...this.queue]}saveToStorage(){try{typeof localStorage<"u"&&localStorage.setItem(this.storageKey,JSON.stringify(this.queue))}catch(t){console.warn("Failed to save offline queue:",t)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);t&&(this.queue=JSON.parse(t))}}catch(t){console.warn("Failed to load offline queue:",t)}}}new Gee;const vm="app:authz-changed";function LP(){try{io.clear()}catch{}try{if(typeof localStorage>"u")return;const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&e.push(n)}for(const t of e)if(t.startsWith("app.cached"))try{localStorage.removeItem(t)}catch{}}catch{}try{const e=globalThis;e.__agentsCache&&(e.__agentsCache.data=null,e.__agentsCache.ts=0,e.__agentsCache.inFlight=null)}catch{}}function $P(e){try{if(typeof window>"u")return;window.dispatchEvent(new CustomEvent(vm,{detail:{reason:e}}))}catch{}}const u3=p.createContext(void 0);function Yee({children:e}){const{user:t,accountDeactivated:n}=aa(),[r,a]=p.useState([]),[s,o]=p.useState([]),[l,c]=p.useState(null),[u,d]=p.useState(!0),[h,f]=p.useState(null),m=(L,U)=>{const F=L.map(T=>String((T==null?void 0:T.name)??"").trim().toLowerCase()).filter(Boolean).sort().join(","),M=U.map(T=>`${String((T==null?void 0:T.resource)??"").trim().toLowerCase()}.${String((T==null?void 0:T.action)??"").trim().toLowerCase()}`).filter(T=>T!==".").sort().join(",");return`roles:${F}|perms:${M}`},g=(L,U)=>{try{const F=`app.authzFingerprint:${L}`,M=typeof localStorage<"u"?localStorage.getItem(F):null;M&&M!==U&&(LP(),$P("rbac-fingerprint-changed")),typeof localStorage<"u"&&localStorage.setItem(F,U)}catch{}},v=async(L,U)=>{try{U!=null&&U.background||d(!0),f(null);const{data:F,error:M}=await ce.from("v_current_user_permissions").select("*");if(M)throw M;const T=F||[];o(T);const{data:E,error:$}=await ce.from("user_roles").select("role_id").eq("user_id",L);if($)throw $;if(!E||E.length===0){g(L,m([],T)),a([]),c({user_id:L,roles:[],permissions:T});return}const A=E.map(Q=>Q.role_id),{data:B,error:R}=await ce.from("roles").select("*").in("id",A);if(R)throw R;const C=B||[];g(L,m(C,T)),a(C);const W=C.map(Q=>({...Q,permissions:T}));c({user_id:L,roles:W,permissions:T})}catch(F){console.error("Error fetching user RBAC:",F),f(F instanceof Error?F.message:"Failed to fetch user permissions")}finally{U!=null&&U.background||d(!1)}},x=async()=>{t!=null&&t.id&&await v(t.id,{background:!0})};p.useEffect(()=>{t!=null&&t.id&&!n?v(t.id):(a([]),o([]),c(null),d(!1))},[t==null?void 0:t.id,n]),p.useEffect(()=>{if(!(t!=null&&t.id)||n)return;const L=t.id,U=ce.channel(`rbac-user-roles:${L}`).on("postgres_changes",{event:"*",schema:"public",table:"user_roles",filter:`user_id=eq.${L}`},async()=>{LP(),$P("user_roles-realtime-change");try{await v(L,{background:!0})}catch{}}).subscribe();return()=>{try{ce.removeChannel(U)}catch{}}},[t==null?void 0:t.id,n]);const y=L=>{if(!L)return!1;if(r.some(E=>E.name==="master_agent"))return!0;const U=String(L).trim().toLowerCase();if(s.some(E=>(E.name||"").trim().toLowerCase()===U)||s.some(E=>`${E.resource}.${E.action}`.toLowerCase()===U))return!0;const T=U.indexOf(".");if(T>0){const E=U.slice(0,T),$=U.slice(T+1),B={edit:["update"],update:["edit"],remove:["delete"],delete:["remove"],send:["create"],read:["read_all","read_own","read_channel_owned","read_collaborator"],read_all:["read"]}[$]||[];if(B.length>0&&s.some(C=>B.some(W=>`${C.resource}.${C.action}`.toLowerCase()===`${E}.${W}`)))return!0}return!1},w=L=>L.some(U=>y(U)),b=L=>L.every(U=>y(U)),_=L=>r.some(U=>U.name===L),D={userRoles:r,userPermissions:s,userWithRoles:l,hasPermission:y,hasAnyPermission:w,hasAllPermissions:b,hasRole:_,hasAnyRole:L=>L.some(U=>_(U)),hasPermissionDB:async(L,U)=>{try{const{data:F,error:M}=await ce.rpc("has_perm",{p_resource:L,p_action:U});return M?(console.error("Error checking permission:",M),!1):F===!0}catch(F){return console.error("Error in hasPermissionDB:",F),!1}},can:(L,...U)=>!L||U.length===0?!1:U.every(F=>y(`${L}.${F}`)),canRead:L=>{const U=Ju[L];if(!Array.isArray(U))return!1;const F=U.filter(M=>M==="read"||M.startsWith("read_"));return F.length===0?!1:F.some(M=>y(`${L}.${M}`))},canCreate:L=>y(`${L}.create`),canUpdate:L=>y(`${L}.update`),canDelete:L=>y(`${L}.delete`),loading:u,error:h,refreshRBAC:x};return i.jsx(u3.Provider,{value:D,children:e})}function Or(){const e=p.useContext(u3);if(e===void 0)throw new Error("useRBAC must be used within an RBACProvider");return e}const d3=p.createContext(void 0),FP="chatflow-theme";function UP(){return typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Xee({children:e}){const[t,n]=p.useState(()=>{if(typeof window<"u"){const o=localStorage.getItem(FP);if(o&&["light","dark","system"].includes(o))return o}return"system"}),[r,a]=p.useState(()=>t==="system"?UP():t);p.useEffect(()=>{const o=window.document.documentElement,l=()=>{const d=t==="system"?UP():t;a(d),o.classList.remove("light","dark"),o.classList.add(d)};l();const c=window.matchMedia("(prefers-color-scheme: dark)"),u=()=>{t==="system"&&l()};return c.addEventListener("change",u),()=>c.removeEventListener("change",u)},[t]);const s=o=>{localStorage.setItem(FP,o),n(o)};return i.jsx(d3.Provider,{value:{theme:t,setTheme:s,resolvedTheme:r},children:e})}function Jee(){const e=p.useContext(d3);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const Rd=wp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ne=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},s)=>{const o=r?dN:"button";return i.jsx(o,{className:Pe(Rd({variant:t,size:n,className:e})),ref:s,...a})});ne.displayName="Button";const We=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Pe("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));We.displayName="Card";const mt=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Pe("flex flex-col space-y-1.5 p-6",e),...t}));mt.displayName="CardHeader";const ht=p.forwardRef(({className:e,...t},n)=>i.jsx("h3",{ref:n,className:Pe("text-2xl font-semibold leading-none tracking-tight",e),...t}));ht.displayName="CardTitle";const Ni=p.forwardRef(({className:e,...t},n)=>i.jsx("p",{ref:n,className:Pe("text-sm text-muted-foreground",e),...t}));Ni.displayName="CardDescription";const ct=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Pe("p-6 pt-0",e),...t}));ct.displayName="CardContent";const Qee=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Pe("flex items-center p-6 pt-0",e),...t}));Qee.displayName="CardFooter";const ot=p.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:Pe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));ot.displayName="Input";var Zee="Label",h3=p.forwardRef((e,t)=>i.jsx(lt.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));h3.displayName=Zee;var f3=h3;const ete=wp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tt=p.forwardRef(({className:e,...t},n)=>i.jsx(f3,{ref:n,className:Pe(ete(),e),...t}));tt.displayName=f3.displayName;var tte=p.createContext(void 0);function xh(e){const t=p.useContext(tte);return e||t||"ltr"}var Rw="rovingFocusGroup.onEntryFocus",nte={bubbles:!1,cancelable:!0},Ep="RovingFocusGroup",[x1,m3,rte]=xp(Ep),[ate,mb]=Ir(Ep,[rte]),[ite,ste]=ate(Ep),p3=p.forwardRef((e,t)=>i.jsx(x1.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(x1.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(ote,{...e,ref:t})})}));p3.displayName=Ep;var ote=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,f=p.useRef(null),m=It(t,f),g=xh(s),[v,x]=Ua({prop:o,defaultProp:l??null,onChange:c,caller:Ep}),[y,w]=p.useState(!1),b=er(u),_=m3(n),k=p.useRef(!1),[j,N]=p.useState(0);return p.useEffect(()=>{const O=f.current;if(O)return O.addEventListener(Rw,b),()=>O.removeEventListener(Rw,b)},[b]),i.jsx(ite,{scope:n,orientation:r,dir:g,loop:a,currentTabStopId:v,onItemFocus:p.useCallback(O=>x(O),[x]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>N(O=>O+1),[]),onFocusableItemRemove:p.useCallback(()=>N(O=>O-1),[]),children:i.jsx(lt.div,{tabIndex:y||j===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:Ve(e.onMouseDown,()=>{k.current=!0}),onFocus:Ve(e.onFocus,O=>{const I=!k.current;if(O.target===O.currentTarget&&I&&!y){const P=new CustomEvent(Rw,nte);if(O.currentTarget.dispatchEvent(P),!P.defaultPrevented){const S=_().filter(M=>M.focusable),D=S.find(M=>M.active),L=S.find(M=>M.id===v),F=[D,L,...S].filter(Boolean).map(M=>M.ref.current);y3(F,d)}}k.current=!1}),onBlur:Ve(e.onBlur,()=>w(!1))})})}),g3="RovingFocusGroupItem",v3=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:s,children:o,...l}=e,c=fr(),u=s||c,d=ste(g3,n),h=d.currentTabStopId===u,f=m3(n),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:v}=d;return p.useEffect(()=>{if(r)return m(),()=>g()},[r,m,g]),i.jsx(x1.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:i.jsx(lt.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Ve(e.onMouseDown,x=>{r?d.onItemFocus(u):x.preventDefault()}),onFocus:Ve(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Ve(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=ute(x,d.orientation,d.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let b=f().filter(_=>_.focusable).map(_=>_.ref.current);if(y==="last")b.reverse();else if(y==="prev"||y==="next"){y==="prev"&&b.reverse();const _=b.indexOf(x.currentTarget);b=d.loop?dte(b,_+1):b.slice(_+1)}setTimeout(()=>y3(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:v!=null}):o})})});v3.displayName=g3;var lte={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function cte(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ute(e,t,n){const r=cte(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return lte[r]}function y3(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function dte(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var x3=p3,b3=v3,pb="Tabs",[hte,o5e]=Ir(pb,[mb]),w3=mb(),[fte,qN]=hte(pb),j3=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=xh(l),[h,f]=Ua({prop:r,onChange:a,defaultProp:s??"",caller:pb});return i.jsx(fte,{scope:n,baseId:fr(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:i.jsx(lt.div,{dir:d,"data-orientation":o,...u,ref:t})})});j3.displayName=pb;var _3="TabsList",k3=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,s=qN(_3,n),o=w3(n);return i.jsx(x3,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:i.jsx(lt.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})});k3.displayName=_3;var S3="TabsTrigger",N3=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...s}=e,o=qN(S3,n),l=w3(n),c=E3(o.baseId,r),u=T3(o.baseId,r),d=r===o.value;return i.jsx(b3,{asChild:!0,...l,focusable:!a,active:d,children:i.jsx(lt.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...s,ref:t,onMouseDown:Ve(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Ve(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Ve(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!a&&h&&o.onValueChange(r)})})})});N3.displayName=S3;var C3="TabsContent",A3=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:s,...o}=e,l=qN(C3,n),c=E3(l.baseId,r),u=T3(l.baseId,r),d=r===l.value,h=p.useRef(d);return p.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),i.jsx(kr,{present:a||d,children:({present:f})=>i.jsx(lt.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&s})})});A3.displayName=C3;function E3(e,t){return`${e}-trigger-${t}`}function T3(e,t){return`${e}-content-${t}`}var mte=j3,P3=k3,O3=N3,I3=A3;const Uc=mte,Tl=p.forwardRef(({className:e,...t},n)=>i.jsx(P3,{ref:n,className:Pe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Tl.displayName=P3.displayName;const wr=p.forwardRef(({className:e,...t},n)=>i.jsx(O3,{ref:n,className:Pe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));wr.displayName=O3.displayName;const ir=p.forwardRef(({className:e,...t},n)=>i.jsx(I3,{ref:n,className:Pe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));ir.displayName=I3.displayName;const pte=wp("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ym=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:Pe(pte({variant:t}),e),...n}));ym.displayName="Alert";const gte=p.forwardRef(({className:e,...t},n)=>i.jsx("h5",{ref:n,className:Pe("mb-1 font-medium leading-none tracking-tight",e),...t}));gte.displayName="AlertTitle";const xm=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Pe("text-sm [&_p]:leading-relaxed",e),...t}));xm.displayName="AlertDescription";function vte({sitekey:e,onVerify:t,onExpire:n,className:r}){const a=p.useRef(null),s=p.useRef(null);return p.useEffect(()=>(new Promise(l=>{if(window.hcaptcha)return l();const c=document.createElement("script");c.src="https://js.hcaptcha.com/1/api.js",c.async=!0,c.defer=!0,c.onload=()=>l(),document.head.appendChild(c)}).then(()=>{a.current&&s.current===null&&(s.current=window.hcaptcha.render(a.current,{sitekey:e,callback:l=>t(l),"expired-callback":()=>n&&n()}))}),()=>{try{s.current!==null&&window.hcaptcha&&window.hcaptcha.remove(s.current)}catch{}}),[e]),i.jsx("div",{className:r,children:i.jsx("div",{ref:a})})}const yte="vite_react_shadcn_ts",xte="0.1.76",bte="module",wte={predev:"echo skip changelog copy",dev:"vite",prebuild:"echo skip changelog copy",build:"vite build","build:dev":"vite build --mode development",lint:"eslint .",preview:"vite preview",test:"vitest",sync:"node sync/index.js"},jte={"@hookform/resolvers":"^3.10.0","@radix-ui/react-accordion":"^1.2.11","@radix-ui/react-alert-dialog":"^1.1.14","@radix-ui/react-aspect-ratio":"^1.1.7","@radix-ui/react-avatar":"^1.1.10","@radix-ui/react-checkbox":"^1.3.2","@radix-ui/react-collapsible":"^1.1.11","@radix-ui/react-context-menu":"^2.2.15","@radix-ui/react-dialog":"^1.1.14","@radix-ui/react-dropdown-menu":"^2.1.15","@radix-ui/react-hover-card":"^1.1.14","@radix-ui/react-label":"^2.1.7","@radix-ui/react-menubar":"^1.1.15","@radix-ui/react-navigation-menu":"^1.2.13","@radix-ui/react-popover":"^1.1.14","@radix-ui/react-progress":"^1.1.7","@radix-ui/react-radio-group":"^1.3.7","@radix-ui/react-scroll-area":"^1.2.9","@radix-ui/react-select":"^2.2.5","@radix-ui/react-separator":"^1.1.7","@radix-ui/react-slider":"^1.3.5","@radix-ui/react-slot":"^1.2.3","@radix-ui/react-switch":"^1.2.5","@radix-ui/react-tabs":"^1.1.12","@radix-ui/react-toast":"^1.2.14","@radix-ui/react-toggle":"^1.1.9","@radix-ui/react-toggle-group":"^1.1.10","@radix-ui/react-tooltip":"^1.2.7","@supabase/supabase-js":"^2.55.0","@tanstack/react-query":"^5.83.0","class-variance-authority":"^0.7.1",clsx:"^2.1.1",cmdk:"^1.1.1","date-fns":"^3.6.0",dotenv:"^16.4.5","embla-carousel-react":"^8.6.0","input-otp":"^1.4.2","lucide-react":"^0.462.0","next-themes":"^0.3.0",react:"^18.3.1","react-day-picker":"^8.10.1","react-dom":"^18.3.1","react-hook-form":"^7.61.1","react-markdown":"^9.1.0","react-resizable-panels":"^2.1.9","react-router-dom":"^6.30.1",recharts:"^2.15.4","remark-breaks":"^4.0.0","remark-gfm":"^4.0.1",sonner:"^1.7.4","tailwind-merge":"^2.6.0","tailwindcss-animate":"^1.0.7",vaul:"^0.9.9",ws:"^8.18.0",zod:"^3.25.76"},_te={"@eslint/js":"^9.32.0","@tailwindcss/typography":"^0.5.16","@types/node":"^22.16.5","@types/react":"^18.3.23","@types/react-dom":"^18.3.7","@vitejs/plugin-react-swc":"^3.11.0",autoprefixer:"^10.4.21",eslint:"^9.32.0","eslint-plugin-react-hooks":"^5.2.0","eslint-plugin-react-refresh":"^0.4.20",globals:"^15.15.0",postcss:"^8.5.6",tailwindcss:"^3.4.17",typescript:"^5.8.3","typescript-eslint":"^8.38.0",vite:"^5.4.19",vitest:"^1.6.0"},Mw={name:yte,private:!0,version:xte,type:bte,scripts:wte,dependencies:jte,devDependencies:_te},R3=e=>e.replace(/\s/g,""),BP=e=>R3(e).toLowerCase();function kte({onBack:e}){const t=li(),[n,r]=p.useState("login"),[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[d,h]=p.useState(null),[f,m]=p.useState(null),[g,v]=p.useState(null),x="30583a2e-84ac-496a-8ec2-23043ae06dc0",y=!!x,w=()=>{var P,S;try{(S=(P=window==null?void 0:window.hcaptcha)==null?void 0:P.reset)==null||S.call(P)}catch{}},[b,_]=p.useState(""),[k,j]=p.useState("");p.useState(""),p.useState("");const N=async P=>{var S;if(P.preventDefault(),s(!0),u(null),v(null),!f){v("Please complete the CAPTCHA"),s(!1);return}try{const{data:D,error:L}=await ce.auth.signInWithPassword({email:b,password:k,...y&&f?{options:{captchaToken:f}}:{}});if(L)throw L;const U=(S=D.user)==null?void 0:S.id;if(U)try{const{data:F,error:M}=await ce.from("users_profile").select("is_active, is_2fa_email_enabled").eq("user_id",U).maybeSingle();if(M)throw console.error("Profile fetch error:",M),M;if(!F){await ce.auth.signOut(),u("Your account profile is missing. Please contact your Master Agent."),s(!1);return}if(F.is_active===!1){t("/account-deactivated",{replace:!0});return}const T=(F==null?void 0:F.is_2fa_email_enabled)===!0;Be.success("Login successful!"),t("/",{replace:!0});return}catch(F){console.warn("Profile fetch failed:",F),Be.success("Login successful!")}else Be.success("Login successful!");t("/",{replace:!0})}catch(D){console.error("Login error:",D),u(D instanceof Error?D.message:"Failed to login"),Be.error("Login failed"),w()}finally{s(!1)}},O=async P=>{P.preventDefault(),s(!0),u(null);try{const{error:S}=await ce.auth.resetPasswordForEmail(b,{redirectTo:`${window.location.origin}/reset-password`});if(S)throw S;h("Password reset email sent! Please check your inbox."),Be.success("Password reset email sent!")}catch(S){console.error("Password reset error:",S),u(S instanceof Error?S.message:"Failed to send reset email"),Be.error("Failed to send reset email")}finally{s(!1)}},I=()=>{u(null),h(null)};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 p-4",children:i.jsxs(We,{className:"w-full max-w-md",children:[i.jsxs(mt,{className:"space-y-1",children:[e&&i.jsxs(ne,{variant:"ghost",size:"sm",onClick:e,className:"absolute top-4 left-4",children:[i.jsx(jp,{className:"w-4 h-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"text-center",children:[i.jsx(ht,{className:"text-2xl font-bold",children:"Welcome back"}),i.jsx(Ni,{children:"Sign in to continue to Chatflow"})]})]}),i.jsx(ct,{children:i.jsxs(Uc,{value:n,onValueChange:P=>{r(P),I()},children:[i.jsxs(Tl,{className:"grid w-full grid-cols-2",children:[i.jsx(wr,{value:"login",children:"Login"}),i.jsx(wr,{value:"reset",children:"Reset"})]}),c&&i.jsx(ym,{className:"mt-4 border-red-200 bg-red-50",children:i.jsx(xm,{className:"text-red-800",children:c})}),d&&i.jsx(ym,{className:"mt-4 border-green-200 bg-green-50",children:i.jsx(xm,{className:"text-green-800",children:d})}),i.jsx(ir,{value:"login",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"login-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(ay,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(ot,{id:"login-email",type:"email",placeholder:"Enter your email",value:b,onChange:P=>_(BP(P.target.value)),onKeyDown:P=>{P.key===" "&&P.preventDefault()},className:"pl-10",required:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"login-password",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(sm,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(ot,{id:"login-password",type:o?"text":"password",placeholder:"Enter your password",value:k,onChange:P=>j(R3(P.target.value)),onKeyDown:P=>{P.key===" "&&P.preventDefault()},className:"pl-10 pr-10",required:!0}),i.jsx(ne,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?i.jsx(x4,{className:"h-4 w-4"}):i.jsx(yN,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(vte,{sitekey:x,onVerify:P=>m(P),onExpire:()=>{m(null)}}),g&&i.jsx("p",{className:"text-xs text-red-600 mt-1",children:g})]}),i.jsx(ne,{type:"submit",className:"w-full",disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx(Ht,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:i.jsxs(hQ,{to:"/changelog",className:"hover:underline",children:["v",Mw==null?void 0:Mw.version]})})]})}),i.jsx(ir,{value:"reset",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:O,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"reset-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(ay,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(ot,{id:"reset-email",type:"email",placeholder:"Enter your email",value:b,onChange:P=>_(BP(P.target.value)),onKeyDown:P=>{P.key===" "&&P.preventDefault()},className:"pl-10",required:!0})]})]}),i.jsx(ne,{type:"submit",className:"w-full",disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx(Ht,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending reset email..."]}):"Send Reset Email"})]})})]})})]})})}function Ig({children:e}){const{user:t,loading:n,otpRequired:r,otpVerified:a,otpEvaluated:s}=aa(),o=li(),l=Fl();if(p.useEffect(()=>{var u;if(!n&&s&&t){const d=l.pathname==="/otp",h=l.pathname==="/reset-password",f=l.pathname==="/invite";let m=!1;try{const g=new URL(window.location.href),v=g.searchParams.get("type"),x=g.searchParams.get("code"),y=window.location.hash||"";m=v==="invite"||x&&!y.includes("access_token=")||y.includes("type=invite")||window.location.pathname==="/invite"}catch{}if(t&&(async()=>{try{const{data:g}=await ce.from("users_profile").select("password_set").eq("user_id",t.id).single();if(g&&g.password_set===!1){setTimeout(()=>o("/reset-password",{replace:!0}),0);return}}catch{}})(),m&&!h&&!f){setTimeout(()=>o("/reset-password",{replace:!0}),0);return}if(r&&!a&&!d){let g="2fa";try{new URL(window.location.href).searchParams.get("type")==="recovery"&&(g="recovery"),(u=window.location.hash)!=null&&u.includes("access_token=")&&(g="recovery"),localStorage.getItem("auth.intent")==="recovery"&&(g="recovery")}catch{}setTimeout(()=>o("/otp",{replace:!0,state:{from:l.pathname,intent:g}}),0)}}},[t,n,s,r,a,l.pathname,o]),n)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),i.jsx("span",{children:"Loading..."})]})});if(!t)return i.jsx(kte,{});const c=l.pathname==="/otp";return t&&r&&!a&&!c?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),i.jsx("span",{children:"Redirecting"})]})}):i.jsx(i.Fragment,{children:e})}const Ste=wp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:opacity-90",secondary:"border-transparent bg-secondary text-secondary-foreground hover:opacity-90",destructive:"border-transparent bg-destructive text-destructive-foreground hover:opacity-90",outline:"text-foreground hover:opacity-90"}},defaultVariants:{variant:"default"}}),At=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,className:Pe(Ste({variant:t}),e),...n}));At.displayName="Badge";var Nte="Separator",zP="horizontal",Cte=["horizontal","vertical"],M3=p.forwardRef((e,t)=>{const{decorative:n,orientation:r=zP,...a}=e,s=Ate(r)?r:zP,l=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return i.jsx(lt.div,{"data-orientation":s,...l,...a,ref:t})});M3.displayName=Nte;function Ate(e){return Cte.includes(e)}var D3=M3;const Md=p.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>i.jsx(D3,{ref:a,decorative:n,orientation:t,className:Pe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Md.displayName=D3.displayName;var Dw=0;function gb(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??WP()),document.body.insertAdjacentElement("beforeend",e[1]??WP()),Dw++,()=>{Dw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Dw--}},[])}function WP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Lw="focusScope.autoFocusOnMount",$w="focusScope.autoFocusOnUnmount",qP={bubbles:!1,cancelable:!0},Ete="FocusScope",Tp=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...o}=e,[l,c]=p.useState(null),u=er(a),d=er(s),h=p.useRef(null),f=It(t,v=>c(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(b){if(m.paused||!l)return;const _=b.target;l.contains(_)?h.current=_:Vo(h.current,{select:!0})},x=function(b){if(m.paused||!l)return;const _=b.relatedTarget;_!==null&&(l.contains(_)||Vo(h.current,{select:!0}))},y=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&Vo(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const w=new MutationObserver(y);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),w.disconnect()}}},[r,l,m.paused]),p.useEffect(()=>{if(l){KP.add(m);const v=document.activeElement;if(!l.contains(v)){const y=new CustomEvent(Lw,qP);l.addEventListener(Lw,u),l.dispatchEvent(y),y.defaultPrevented||(Tte(Mte(L3(l)),{select:!0}),document.activeElement===v&&Vo(l))}return()=>{l.removeEventListener(Lw,u),setTimeout(()=>{const y=new CustomEvent($w,qP);l.addEventListener($w,d),l.dispatchEvent(y),y.defaultPrevented||Vo(v??document.body,{select:!0}),l.removeEventListener($w,d),KP.remove(m)},0)}}},[l,u,d,m]);const g=p.useCallback(v=>{if(!n&&!r||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const w=v.currentTarget,[b,_]=Pte(w);b&&_?!v.shiftKey&&y===_?(v.preventDefault(),n&&Vo(b,{select:!0})):v.shiftKey&&y===b&&(v.preventDefault(),n&&Vo(_,{select:!0})):y===w&&v.preventDefault()}},[n,r,m.paused]);return i.jsx(lt.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});Tp.displayName=Ete;function Tte(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Vo(r,{select:t}),document.activeElement!==n)return}function Pte(e){const t=L3(e),n=HP(t,e),r=HP(t.reverse(),e);return[n,r]}function L3(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function HP(e,t){for(const n of e)if(!Ote(n,{upTo:t}))return n}function Ote(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Ite(e){return e instanceof HTMLInputElement&&"select"in e}function Vo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Ite(e)&&t&&e.select()}}var KP=Rte();function Rte(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=VP(e,t),e.unshift(t)},remove(t){var n;e=VP(e,t),(n=e[0])==null||n.resume()}}}function VP(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Mte(e){return e.filter(t=>t.tagName!=="A")}var Dte=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},wu=new WeakMap,Rg=new WeakMap,Mg={},Fw=0,$3=function(e){return e&&(e.host||$3(e.parentNode))},Lte=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=$3(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},$te=function(e,t,n,r){var a=Lte(t,Array.isArray(e)?e:[e]);Mg[n]||(Mg[n]=new WeakMap);var s=Mg[n],o=[],l=new Set,c=new Set(a),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var m=f.getAttribute(r),g=m!==null&&m!=="false",v=(wu.get(f)||0)+1,x=(s.get(f)||0)+1;wu.set(f,v),s.set(f,x),o.push(f),v===1&&g&&Rg.set(f,!0),x===1&&f.setAttribute(n,"true"),g||f.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return d(t),l.clear(),Fw++,function(){o.forEach(function(h){var f=wu.get(h)-1,m=s.get(h)-1;wu.set(h,f),s.set(h,m),f||(Rg.has(h)||h.removeAttribute(r),Rg.delete(h)),m||h.removeAttribute(n)}),Fw--,Fw||(wu=new WeakMap,wu=new WeakMap,Rg=new WeakMap,Mg={})}},vb=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Dte(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),$te(r,a,n,"aria-hidden")):function(){return null}},js=function(){return js=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},js.apply(this,arguments)};function F3(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Fte(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,s;r<a;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var Nv="right-scroll-bar-position",Cv="width-before-scroll-bar",Ute="with-scroll-bars-hidden",Bte="--removed-body-scroll-bar-size";function Uw(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function zte(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var Wte=typeof window<"u"?p.useLayoutEffect:p.useEffect,GP=new WeakMap;function qte(e,t){var n=zte(null,function(r){return e.forEach(function(a){return Uw(a,r)})});return Wte(function(){var r=GP.get(n);if(r){var a=new Set(r),s=new Set(e),o=n.current;a.forEach(function(l){s.has(l)||Uw(l,null)}),s.forEach(function(l){a.has(l)||Uw(l,o)})}GP.set(n,e)},[e]),n}function Hte(e){return e}function Kte(e,t){t===void 0&&(t=Hte);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(s),o=n}var c=function(){var d=o;o=[],d.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return a}function Vte(e){e===void 0&&(e={});var t=Kte(null);return t.options=js({async:!0,ssr:!1},e),t}var U3=function(e){var t=e.sideCar,n=F3(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,js({},n))};U3.isSideCarExport=!0;function Gte(e,t){return e.useMedium(t),U3}var B3=Vte(),Bw=function(){},yb=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:Bw,onWheelCapture:Bw,onTouchMoveCapture:Bw}),a=r[0],s=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,m=e.noRelative,g=e.noIsolation,v=e.inert,x=e.allowPinchZoom,y=e.as,w=y===void 0?"div":y,b=e.gapMode,_=F3(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,j=qte([n,t]),N=js(js({},_),a);return p.createElement(p.Fragment,null,d&&p.createElement(k,{sideCar:B3,removeScrollBar:u,shards:h,noRelative:m,noIsolation:g,inert:v,setCallbacks:s,allowPinchZoom:!!x,lockRef:n,gapMode:b}),o?p.cloneElement(p.Children.only(l),js(js({},N),{ref:j})):p.createElement(w,js({},N,{className:c,ref:j}),l))});yb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yb.classNames={fullWidth:Cv,zeroRight:Nv};var Yte=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Xte(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Yte();return t&&e.setAttribute("nonce",t),e}function Jte(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Qte(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Zte=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Xte())&&(Jte(t,n),Qte(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ene=function(){var e=Zte();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},z3=function(){var e=ene(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},tne={left:0,top:0,right:0,gap:0},zw=function(e){return parseInt(e||"",10)||0},nne=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[zw(n),zw(r),zw(a)]},rne=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return tne;var t=nne(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},ane=z3(),cd="data-scroll-locked",ine=function(e,t,n,r){var a=e.left,s=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Ute,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(cd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Nv,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Cv,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Nv," .").concat(Nv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Cv," .").concat(Cv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(cd,`] {
    `).concat(Bte,": ").concat(l,`px;
  }
`)},YP=function(){var e=parseInt(document.body.getAttribute(cd)||"0",10);return isFinite(e)?e:0},sne=function(){p.useEffect(function(){return document.body.setAttribute(cd,(YP()+1).toString()),function(){var e=YP()-1;e<=0?document.body.removeAttribute(cd):document.body.setAttribute(cd,e.toString())}},[])},one=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;sne();var s=p.useMemo(function(){return rne(a)},[a]);return p.createElement(ane,{styles:ine(s,!t,a,n?"":"!important")})},b1=!1;if(typeof window<"u")try{var Dg=Object.defineProperty({},"passive",{get:function(){return b1=!0,!0}});window.addEventListener("test",Dg,Dg),window.removeEventListener("test",Dg,Dg)}catch{b1=!1}var ju=b1?{passive:!1}:!1,lne=function(e){return e.tagName==="TEXTAREA"},W3=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!lne(e)&&n[t]==="visible")},cne=function(e){return W3(e,"overflowY")},une=function(e){return W3(e,"overflowX")},XP=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=q3(e,r);if(a){var s=H3(e,r),o=s[1],l=s[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},dne=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},hne=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},q3=function(e,t){return e==="v"?cne(t):une(t)},H3=function(e,t){return e==="v"?dne(t):hne(t)},fne=function(e,t){return e==="h"&&t==="rtl"?-1:1},mne=function(e,t,n,r,a){var s=fne(e,window.getComputedStyle(t).direction),o=s*r,l=n.target,c=t.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var m=H3(e,l),g=m[0],v=m[1],x=m[2],y=v-x-s*g;(g||y)&&q3(e,l)&&(h+=y,f+=g);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!a)||!d&&(Math.abs(f)<1||!a))&&(u=!0),u},Lg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},JP=function(e){return[e.deltaX,e.deltaY]},QP=function(e){return e&&"current"in e?e.current:e},pne=function(e,t){return e[0]===t[0]&&e[1]===t[1]},gne=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},vne=0,_u=[];function yne(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),a=p.useState(vne++)[0],s=p.useState(z3)[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=Fte([e.lockRef.current],(e.shards||[]).map(QP),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var y=Lg(v),w=n.current,b="deltaX"in v?v.deltaX:w[0]-y[0],_="deltaY"in v?v.deltaY:w[1]-y[1],k,j=v.target,N=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in v&&N==="h"&&j.type==="range")return!1;var O=XP(N,j);if(!O)return!0;if(O?k=N:(k=N==="v"?"h":"v",O=XP(N,j)),!O)return!1;if(!r.current&&"changedTouches"in v&&(b||_)&&(r.current=k),!k)return!0;var I=r.current||k;return mne(I,x,v,I==="h"?b:_,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!_u.length||_u[_u.length-1]!==s)){var y="deltaY"in x?JP(x):Lg(x),w=t.current.filter(function(k){return k.name===x.type&&(k.target===x.target||x.target===k.shadowParent)&&pne(k.delta,y)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var b=(o.current.shards||[]).map(QP).filter(Boolean).filter(function(k){return k.contains(x.target)}),_=b.length>0?l(x,b[0]):!o.current.noIsolation;_&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,y,w){var b={name:v,delta:x,target:y,should:w,shadowParent:xne(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(_){return _!==b})},1)},[]),d=p.useCallback(function(v){n.current=Lg(v),r.current=void 0},[]),h=p.useCallback(function(v){u(v.type,JP(v),v.target,l(v,e.lockRef.current))},[]),f=p.useCallback(function(v){u(v.type,Lg(v),v.target,l(v,e.lockRef.current))},[]);p.useEffect(function(){return _u.push(s),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,ju),document.addEventListener("touchmove",c,ju),document.addEventListener("touchstart",d,ju),function(){_u=_u.filter(function(v){return v!==s}),document.removeEventListener("wheel",c,ju),document.removeEventListener("touchmove",c,ju),document.removeEventListener("touchstart",d,ju)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(s,{styles:gne(a)}):null,m?p.createElement(one,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function xne(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const bne=Gte(B3,yne);var Pp=p.forwardRef(function(e,t){return p.createElement(yb,js({},e,{ref:t,sideCar:bne}))});Pp.classNames=yb.classNames;var w1=["Enter"," "],wne=["ArrowDown","PageUp","Home"],K3=["ArrowUp","PageDown","End"],jne=[...wne,...K3],_ne={ltr:[...w1,"ArrowRight"],rtl:[...w1,"ArrowLeft"]},kne={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Op="Menu",[bm,Sne,Nne]=xp(Op),[su,V3]=Ir(Op,[Nne,Ll,mb]),xb=Ll(),G3=mb(),[Cne,ou]=su(Op),[Ane,Ip]=su(Op),Y3=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:s,modal:o=!0}=e,l=xb(t),[c,u]=p.useState(null),d=p.useRef(!1),h=er(s),f=xh(a);return p.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),i.jsx(Qx,{...l,children:i.jsx(Cne,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:u,children:i.jsx(Ane,{scope:t,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:r})})})};Y3.displayName=Op;var Ene="MenuAnchor",HN=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=xb(n);return i.jsx(Sp,{...a,...r,ref:t})});HN.displayName=Ene;var KN="MenuPortal",[Tne,X3]=su(KN,{forceMount:void 0}),J3=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,s=ou(KN,t);return i.jsx(Tne,{scope:t,forceMount:n,children:i.jsx(kr,{present:n||s.open,children:i.jsx(hh,{asChild:!0,container:a,children:r})})})};J3.displayName=KN;var Ci="MenuContent",[Pne,VN]=su(Ci),Q3=p.forwardRef((e,t)=>{const n=X3(Ci,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,s=ou(Ci,e.__scopeMenu),o=Ip(Ci,e.__scopeMenu);return i.jsx(bm.Provider,{scope:e.__scopeMenu,children:i.jsx(kr,{present:r||s.open,children:i.jsx(bm.Slot,{scope:e.__scopeMenu,children:o.modal?i.jsx(One,{...a,ref:t}):i.jsx(Ine,{...a,ref:t})})})})}),One=p.forwardRef((e,t)=>{const n=ou(Ci,e.__scopeMenu),r=p.useRef(null),a=It(t,r);return p.useEffect(()=>{const s=r.current;if(s)return vb(s)},[]),i.jsx(GN,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ve(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Ine=p.forwardRef((e,t)=>{const n=ou(Ci,e.__scopeMenu);return i.jsx(GN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Rne=Nl("MenuContent.ScrollLock"),GN=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:g,...v}=e,x=ou(Ci,n),y=Ip(Ci,n),w=xb(n),b=G3(n),_=Sne(n),[k,j]=p.useState(null),N=p.useRef(null),O=It(t,N,x.onContentChange),I=p.useRef(0),P=p.useRef(""),S=p.useRef(0),D=p.useRef(null),L=p.useRef("right"),U=p.useRef(0),F=g?Pp:p.Fragment,M=g?{as:Rne,allowPinchZoom:!0}:void 0,T=$=>{var Z,te;const A=P.current+$,B=_().filter(J=>!J.disabled),R=document.activeElement,C=(Z=B.find(J=>J.ref.current===R))==null?void 0:Z.textValue,W=B.map(J=>J.textValue),Q=Kne(W,A,C),X=(te=B.find(J=>J.textValue===Q))==null?void 0:te.ref.current;(function J(ie){P.current=ie,window.clearTimeout(I.current),ie!==""&&(I.current=window.setTimeout(()=>J(""),1e3))})(A),X&&setTimeout(()=>X.focus())};p.useEffect(()=>()=>window.clearTimeout(I.current),[]),gb();const E=p.useCallback($=>{var B,R;return L.current===((B=D.current)==null?void 0:B.side)&&Gne($,(R=D.current)==null?void 0:R.area)},[]);return i.jsx(Pne,{scope:n,searchRef:P,onItemEnter:p.useCallback($=>{E($)&&$.preventDefault()},[E]),onItemLeave:p.useCallback($=>{var A;E($)||((A=N.current)==null||A.focus(),j(null))},[E]),onTriggerLeave:p.useCallback($=>{E($)&&$.preventDefault()},[E]),pointerGraceTimerRef:S,onPointerGraceIntentChange:p.useCallback($=>{D.current=$},[]),children:i.jsx(F,{...M,children:i.jsx(Tp,{asChild:!0,trapped:a,onMountAutoFocus:Ve(s,$=>{var A;$.preventDefault(),(A=N.current)==null||A.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(ru,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:i.jsx(x3,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:j,onEntryFocus:Ve(c,$=>{y.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Zx,{role:"menu","aria-orientation":"vertical","data-state":m5(x.open),"data-radix-menu-content":"",dir:y.dir,...w,...v,ref:O,style:{outline:"none",...v.style},onKeyDown:Ve(v.onKeyDown,$=>{const B=$.target.closest("[data-radix-menu-content]")===$.currentTarget,R=$.ctrlKey||$.altKey||$.metaKey,C=$.key.length===1;B&&($.key==="Tab"&&$.preventDefault(),!R&&C&&T($.key));const W=N.current;if($.target!==W||!jne.includes($.key))return;$.preventDefault();const X=_().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);K3.includes($.key)&&X.reverse(),qne(X)}),onBlur:Ve(e.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(I.current),P.current="")}),onPointerMove:Ve(e.onPointerMove,wm($=>{const A=$.target,B=U.current!==$.clientX;if($.currentTarget.contains(A)&&B){const R=$.clientX>U.current?"right":"left";L.current=R,U.current=$.clientX}}))})})})})})})});Q3.displayName=Ci;var Mne="MenuGroup",YN=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(lt.div,{role:"group",...r,ref:t})});YN.displayName=Mne;var Dne="MenuLabel",Z3=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(lt.div,{...r,ref:t})});Z3.displayName=Dne;var gy="MenuItem",ZP="menu.itemSelect",bb=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,s=p.useRef(null),o=Ip(gy,e.__scopeMenu),l=VN(gy,e.__scopeMenu),c=It(t,s),u=p.useRef(!1),d=()=>{const h=s.current;if(!n&&h){const f=new CustomEvent(ZP,{bubbles:!0,cancelable:!0});h.addEventListener(ZP,m=>r==null?void 0:r(m),{once:!0}),hN(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(e5,{...a,ref:c,disabled:n,onClick:Ve(e.onClick,d),onPointerDown:h=>{var f;(f=e.onPointerDown)==null||f.call(e,h),u.current=!0},onPointerUp:Ve(e.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:Ve(e.onKeyDown,h=>{const f=l.searchRef.current!=="";n||f&&h.key===" "||w1.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});bb.displayName=gy;var e5=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...s}=e,o=VN(gy,n),l=G3(n),c=p.useRef(null),u=It(t,c),[d,h]=p.useState(!1),[f,m]=p.useState("");return p.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[s.children]),i.jsx(bm.ItemSlot,{scope:n,disabled:r,textValue:a??f,children:i.jsx(b3,{asChild:!0,...l,focusable:!r,children:i.jsx(lt.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:Ve(e.onPointerMove,wm(g=>{r?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ve(e.onPointerLeave,wm(g=>o.onItemLeave(g))),onFocus:Ve(e.onFocus,()=>h(!0)),onBlur:Ve(e.onBlur,()=>h(!1))})})})}),Lne="MenuCheckboxItem",t5=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return i.jsx(s5,{scope:e.__scopeMenu,checked:n,children:i.jsx(bb,{role:"menuitemcheckbox","aria-checked":vy(n)?"mixed":n,...a,ref:t,"data-state":JN(n),onSelect:Ve(a.onSelect,()=>r==null?void 0:r(vy(n)?!0:!n),{checkForDefaultPrevented:!1})})})});t5.displayName=Lne;var n5="MenuRadioGroup",[$ne,Fne]=su(n5,{value:void 0,onValueChange:()=>{}}),r5=p.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,s=er(r);return i.jsx($ne,{scope:e.__scopeMenu,value:n,onValueChange:s,children:i.jsx(YN,{...a,ref:t})})});r5.displayName=n5;var a5="MenuRadioItem",i5=p.forwardRef((e,t)=>{const{value:n,...r}=e,a=Fne(a5,e.__scopeMenu),s=n===a.value;return i.jsx(s5,{scope:e.__scopeMenu,checked:s,children:i.jsx(bb,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":JN(s),onSelect:Ve(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});i5.displayName=a5;var XN="MenuItemIndicator",[s5,Une]=su(XN,{checked:!1}),o5=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,s=Une(XN,n);return i.jsx(kr,{present:r||vy(s.checked)||s.checked===!0,children:i.jsx(lt.span,{...a,ref:t,"data-state":JN(s.checked)})})});o5.displayName=XN;var Bne="MenuSeparator",l5=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(lt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});l5.displayName=Bne;var zne="MenuArrow",c5=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=xb(n);return i.jsx(eb,{...a,...r,ref:t})});c5.displayName=zne;var Wne="MenuSub",[l5e,u5]=su(Wne),xf="MenuSubTrigger",d5=p.forwardRef((e,t)=>{const n=ou(xf,e.__scopeMenu),r=Ip(xf,e.__scopeMenu),a=u5(xf,e.__scopeMenu),s=VN(xf,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,u={__scopeMenu:e.__scopeMenu},d=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),i.jsx(HN,{asChild:!0,...u,children:i.jsx(e5,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":m5(n.open),...e,ref:jo(t,a.onTriggerChange),onClick:h=>{var f;(f=e.onClick)==null||f.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ve(e.onPointerMove,wm(h=>{s.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Ve(e.onPointerLeave,wm(h=>{var m,g;d();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const v=(g=n.content)==null?void 0:g.dataset.side,x=v==="right",y=x?-5:5,w=f[x?"left":"right"],b=f[x?"right":"left"];s.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x:w,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:w,y:f.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(h),h.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Ve(e.onKeyDown,h=>{var m;const f=s.searchRef.current!=="";e.disabled||f&&h.key===" "||_ne[r.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});d5.displayName=xf;var h5="MenuSubContent",f5=p.forwardRef((e,t)=>{const n=X3(Ci,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,s=ou(Ci,e.__scopeMenu),o=Ip(Ci,e.__scopeMenu),l=u5(h5,e.__scopeMenu),c=p.useRef(null),u=It(t,c);return i.jsx(bm.Provider,{scope:e.__scopeMenu,children:i.jsx(kr,{present:r||s.open,children:i.jsx(bm.Slot,{scope:e.__scopeMenu,children:i.jsx(GN,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Ve(e.onFocusOutside,d=>{d.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Ve(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Ve(e.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=kne[o.dir].includes(d.key);h&&f&&(s.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});f5.displayName=h5;function m5(e){return e?"open":"closed"}function vy(e){return e==="indeterminate"}function JN(e){return vy(e)?"indeterminate":e?"checked":"unchecked"}function qne(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Hne(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Kne(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let o=Hne(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function Vne(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(a=!a)}return a}function Gne(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Vne(n,t)}function wm(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Yne=Y3,Xne=HN,Jne=J3,Qne=Q3,Zne=YN,ere=Z3,tre=bb,nre=t5,rre=r5,are=i5,ire=o5,sre=l5,ore=c5,lre=d5,cre=f5,wb="DropdownMenu",[ure,c5e]=Ir(wb,[V3]),ba=V3(),[dre,p5]=ure(wb),g5=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:s,onOpenChange:o,modal:l=!0}=e,c=ba(t),u=p.useRef(null),[d,h]=Ua({prop:a,defaultProp:s??!1,onChange:o,caller:wb});return i.jsx(dre,{scope:t,triggerId:fr(),triggerRef:u,contentId:fr(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:l,children:i.jsx(Yne,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};g5.displayName=wb;var v5="DropdownMenuTrigger",y5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,s=p5(v5,n),o=ba(n);return i.jsx(Xne,{asChild:!0,...o,children:i.jsx(lt.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:jo(t,s.triggerRef),onPointerDown:Ve(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:Ve(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});y5.displayName=v5;var hre="DropdownMenuPortal",x5=e=>{const{__scopeDropdownMenu:t,...n}=e,r=ba(t);return i.jsx(Jne,{...r,...n})};x5.displayName=hre;var b5="DropdownMenuContent",w5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=p5(b5,n),s=ba(n),o=p.useRef(!1);return i.jsx(Qne,{id:a.contentId,"aria-labelledby":a.triggerId,...s,...r,ref:t,onCloseAutoFocus:Ve(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ve(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});w5.displayName=b5;var fre="DropdownMenuGroup",mre=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ba(n);return i.jsx(Zne,{...a,...r,ref:t})});mre.displayName=fre;var pre="DropdownMenuLabel",j5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ba(n);return i.jsx(ere,{...a,...r,ref:t})});j5.displayName=pre;var gre="DropdownMenuItem",_5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ba(n);return i.jsx(tre,{...a,...r,ref:t})});_5.displayName=gre;var vre="DropdownMenuCheckboxItem",k5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ba(n);return i.jsx(nre,{...a,...r,ref:t})});k5.displayName=vre;var yre="DropdownMenuRadioGroup",xre=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ba(n);return i.jsx(rre,{...a,...r,ref:t})});xre.displayName=yre;var bre="DropdownMenuRadioItem",S5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ba(n);return i.jsx(are,{...a,...r,ref:t})});S5.displayName=bre;var wre="DropdownMenuItemIndicator",N5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ba(n);return i.jsx(ire,{...a,...r,ref:t})});N5.displayName=wre;var jre="DropdownMenuSeparator",C5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ba(n);return i.jsx(sre,{...a,...r,ref:t})});C5.displayName=jre;var _re="DropdownMenuArrow",kre=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ba(n);return i.jsx(ore,{...a,...r,ref:t})});kre.displayName=_re;var Sre="DropdownMenuSubTrigger",A5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ba(n);return i.jsx(lre,{...a,...r,ref:t})});A5.displayName=Sre;var Nre="DropdownMenuSubContent",E5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=ba(n);return i.jsx(cre,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});E5.displayName=Nre;var Cre=g5,Are=y5,Ere=x5,T5=w5,P5=j5,O5=_5,I5=k5,R5=S5,M5=N5,D5=C5,L5=A5,$5=E5;const dc=Cre,hc=Are,Tre=p.forwardRef(({className:e,inset:t,children:n,...r},a)=>i.jsxs(L5,{ref:a,className:Pe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,i.jsx(_p,{className:"ml-auto h-4 w-4"})]}));Tre.displayName=L5.displayName;const Pre=p.forwardRef(({className:e,...t},n)=>i.jsx($5,{ref:n,className:Pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Pre.displayName=$5.displayName;const el=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(Ere,{children:i.jsx(T5,{ref:r,sideOffset:t,className:Pe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));el.displayName=T5.displayName;const la=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(O5,{ref:r,className:Pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));la.displayName=O5.displayName;const Ore=p.forwardRef(({className:e,children:t,checked:n,...r},a)=>i.jsxs(I5,{ref:a,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(M5,{children:i.jsx(gN,{className:"h-4 w-4"})})}),t]}));Ore.displayName=I5.displayName;const Ire=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(R5,{ref:r,className:Pe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(M5,{children:i.jsx(OV,{className:"h-2 w-2 fill-current"})})}),t]}));Ire.displayName=R5.displayName;const F5=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(P5,{ref:r,className:Pe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));F5.displayName=P5.displayName;const j1=p.forwardRef(({className:e,...t},n)=>i.jsx(D5,{ref:n,className:Pe("-mx-1 my-1 h-px bg-muted",e),...t}));j1.displayName=D5.displayName;var U5={exports:{}},B5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dd=p;function Rre(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mre=typeof Object.is=="function"?Object.is:Rre,Dre=Dd.useState,Lre=Dd.useEffect,$re=Dd.useLayoutEffect,Fre=Dd.useDebugValue;function Ure(e,t){var n=t(),r=Dre({inst:{value:n,getSnapshot:t}}),a=r[0].inst,s=r[1];return $re(function(){a.value=n,a.getSnapshot=t,Ww(a)&&s({inst:a})},[e,n,t]),Lre(function(){return Ww(a)&&s({inst:a}),e(function(){Ww(a)&&s({inst:a})})},[e]),Fre(n),n}function Ww(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mre(e,n)}catch{return!0}}function Bre(e,t){return t()}var zre=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Bre:Ure;B5.useSyncExternalStore=Dd.useSyncExternalStore!==void 0?Dd.useSyncExternalStore:zre;U5.exports=B5;var Wre=U5.exports;function qre(){return Wre.useSyncExternalStore(Hre,()=>!0,()=>!1)}function Hre(){return()=>{}}var QN="Avatar",[Kre,u5e]=Ir(QN),[Vre,z5]=Kre(QN),W5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,s]=p.useState("idle");return i.jsx(Vre,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:s,children:i.jsx(lt.span,{...r,ref:t})})});W5.displayName=QN;var q5="AvatarImage",H5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...s}=e,o=z5(q5,n),l=Gre(r,s),c=er(u=>{a(u),o.onImageLoadingStatusChange(u)});return tr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(lt.img,{...s,ref:t,src:r}):null});H5.displayName=q5;var K5="AvatarFallback",V5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,s=z5(K5,n),[o,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?i.jsx(lt.span,{...a,ref:t}):null});V5.displayName=K5;function e2(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Gre(e,{referrerPolicy:t,crossOrigin:n}){const r=qre(),a=p.useRef(null),s=r?(a.current||(a.current=new window.Image),a.current):null,[o,l]=p.useState(()=>e2(s,e));return tr(()=>{l(e2(s,e))},[s,e]),tr(()=>{const c=h=>()=>{l(h)};if(!s)return;const u=c("loaded"),d=c("error");return s.addEventListener("load",u),s.addEventListener("error",d),t&&(s.referrerPolicy=t),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",u),s.removeEventListener("error",d)}},[s,n,t]),o}var G5=W5,Y5=H5,X5=V5;const Pa=p.forwardRef(({className:e,...t},n)=>i.jsx(G5,{ref:n,className:Pe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Pa.displayName=G5.displayName;const Bc=p.forwardRef(({className:e,...t},n)=>i.jsx(Y5,{ref:n,className:Pe("aspect-square h-full w-full",e),...t}));Bc.displayName=Y5.displayName;const Oa=p.forwardRef(({className:e,...t},n)=>i.jsx(X5,{ref:n,className:Pe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Oa.displayName=X5.displayName;function J5(){const{theme:e,setTheme:t,resolvedTheme:n}=Jee();return i.jsxs(dc,{children:[i.jsx(hc,{asChild:!0,children:i.jsxs(ne,{variant:"ghost",size:"icon",className:"h-9 w-9",children:[n==="dark"?i.jsx(LT,{className:"h-4 w-4"}):i.jsx(UT,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),i.jsxs(el,{align:"end",children:[i.jsxs(la,{onClick:()=>t("light"),className:"gap-2",children:[i.jsx(UT,{className:"h-4 w-4"}),i.jsx("span",{children:"Light"}),e==="light"&&i.jsx("span",{className:"ml-auto text-xs",children:""})]}),i.jsxs(la,{onClick:()=>t("dark"),className:"gap-2",children:[i.jsx(LT,{className:"h-4 w-4"}),i.jsx("span",{children:"Dark"}),e==="dark"&&i.jsx("span",{className:"ml-auto text-xs",children:""})]}),i.jsxs(la,{onClick:()=>t("system"),className:"gap-2",children:[i.jsx(MV,{className:"h-4 w-4"}),i.jsx("span",{children:"System"}),e==="system"&&i.jsx("span",{className:"ml-auto text-xs",children:""})]})]})]})}var jb="Dialog",[Q5,Z5]=Ir(jb),[Yre,us]=Q5(jb),eU=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,d]=Ua({prop:r,defaultProp:a??!1,onChange:s,caller:jb});return i.jsx(Yre,{scope:t,triggerRef:l,contentRef:c,contentId:fr(),titleId:fr(),descriptionId:fr(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};eU.displayName=jb;var tU="DialogTrigger",nU=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=us(tU,n),s=It(t,a.triggerRef);return i.jsx(lt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":tC(a.open),...r,ref:s,onClick:Ve(e.onClick,a.onOpenToggle)})});nU.displayName=tU;var ZN="DialogPortal",[Xre,rU]=Q5(ZN,{forceMount:void 0}),aU=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,s=us(ZN,t);return i.jsx(Xre,{scope:t,forceMount:n,children:p.Children.map(r,o=>i.jsx(kr,{present:n||s.open,children:i.jsx(hh,{asChild:!0,container:a,children:o})}))})};aU.displayName=ZN;var yy="DialogOverlay",iU=p.forwardRef((e,t)=>{const n=rU(yy,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=us(yy,e.__scopeDialog);return s.modal?i.jsx(kr,{present:r||s.open,children:i.jsx(Qre,{...a,ref:t})}):null});iU.displayName=yy;var Jre=Nl("DialogOverlay.RemoveScroll"),Qre=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=us(yy,n);return i.jsx(Pp,{as:Jre,allowPinchZoom:!0,shards:[a.contentRef],children:i.jsx(lt.div,{"data-state":tC(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),zc="DialogContent",sU=p.forwardRef((e,t)=>{const n=rU(zc,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=us(zc,e.__scopeDialog);return i.jsx(kr,{present:r||s.open,children:s.modal?i.jsx(Zre,{...a,ref:t}):i.jsx(eae,{...a,ref:t})})});sU.displayName=zc;var Zre=p.forwardRef((e,t)=>{const n=us(zc,e.__scopeDialog),r=p.useRef(null),a=It(t,n.contentRef,r);return p.useEffect(()=>{const s=r.current;if(s)return vb(s)},[]),i.jsx(oU,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ve(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ve(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:Ve(e.onFocusOutside,s=>s.preventDefault())})}),eae=p.forwardRef((e,t)=>{const n=us(zc,e.__scopeDialog),r=p.useRef(!1),a=p.useRef(!1);return i.jsx(oU,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),oU=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,...o}=e,l=us(zc,n),c=p.useRef(null),u=It(t,c);return gb(),i.jsxs(i.Fragment,{children:[i.jsx(Tp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(ru,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":tC(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(nae,{titleId:l.titleId}),i.jsx(aae,{contentRef:c,descriptionId:l.descriptionId})]})]})}),eC="DialogTitle",lU=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=us(eC,n);return i.jsx(lt.h2,{id:a.titleId,...r,ref:t})});lU.displayName=eC;var cU="DialogDescription",uU=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=us(cU,n);return i.jsx(lt.p,{id:a.descriptionId,...r,ref:t})});uU.displayName=cU;var dU="DialogClose",hU=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=us(dU,n);return i.jsx(lt.button,{type:"button",...r,ref:t,onClick:Ve(e.onClick,()=>a.onOpenChange(!1))})});hU.displayName=dU;function tC(e){return e?"open":"closed"}var fU="DialogTitleWarning",[tae,mU]=LK(fU,{contentName:zc,titleName:eC,docsSlug:"dialog"}),nae=({titleId:e})=>{const t=mU(fU),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},rae="DialogDescriptionWarning",aae=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${mU(rae).contentName}}.`;return p.useEffect(()=>{var s;const a=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},nC=eU,pU=nU,rC=aU,_b=iU,kb=sU,aC=lU,iC=uU,sC=hU;const gn=nC,oC=pU,iae=rC,gU=p.forwardRef(({className:e,...t},n)=>i.jsx(_b,{ref:n,className:Pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));gU.displayName=_b.displayName;const ln=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(iae,{children:[i.jsx(gU,{}),i.jsxs(kb,{ref:r,className:Pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(sC,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Gx,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ln.displayName=kb.displayName;const cn=({className:e,...t})=>i.jsx("div",{className:Pe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});cn.displayName="DialogHeader";const Na=({className:e,...t})=>i.jsx("div",{className:Pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Na.displayName="DialogFooter";const un=p.forwardRef(({className:e,...t},n)=>i.jsx(aC,{ref:n,className:Pe("text-lg font-semibold leading-none tracking-tight",e),...t}));un.displayName=aC.displayName;const Ur=p.forwardRef(({className:e,...t},n)=>i.jsx(iC,{ref:n,className:Pe("text-sm text-muted-foreground",e),...t}));Ur.displayName=iC.displayName;function sae({open:e,onClose:t,isMasterAgent:n,pausedByName:r,pausedAt:a,onOpenAdminPanel:s}){const o=a?new Date(a).toLocaleString():null;return i.jsx(gn,{open:e,onOpenChange:l=>{l||t()},children:i.jsxs(ln,{className:"max-w-lg",children:[i.jsxs(cn,{children:[i.jsx(un,{children:"AI Replies Are Currently Paused"}),i.jsx(Ur,{children:n?i.jsxs("span",{children:["AI responses are paused across every channel. Synka will not send AI replies until you resume them in ",i.jsx("strong",{children:"Admin Panel  AI Controls"}),"."]}):i.jsx("span",{children:"A master agent paused all AI responses across every channel. Synka will not send AI replies until this setting is changed. Only a master agent can resume AI replies."})})]}),i.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[r?i.jsxs("div",{children:["Paused by: ",r]}):null,o?i.jsxs("div",{children:["At: ",o]}):null]}),i.jsxs(Na,{className:"gap-2",children:[n?i.jsx(ne,{variant:"ghost",onClick:s,children:"Open Admin Panel"}):null,i.jsx(ne,{onClick:t,children:"Got it"})]})]})})}const Fr=p.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:Pe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Fr.displayName="Textarea";function _1(e,[t,n]){return Math.min(n,Math.max(t,e))}function oae(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var lC="ScrollArea",[vU,d5e]=Ir(lC),[lae,Oi]=vU(lC),yU=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:s=600,...o}=e,[l,c]=p.useState(null),[u,d]=p.useState(null),[h,f]=p.useState(null),[m,g]=p.useState(null),[v,x]=p.useState(null),[y,w]=p.useState(0),[b,_]=p.useState(0),[k,j]=p.useState(!1),[N,O]=p.useState(!1),I=It(t,S=>c(S)),P=xh(a);return i.jsx(lae,{scope:n,type:r,dir:P,scrollHideDelay:s,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:k,onScrollbarXEnabledChange:j,scrollbarY:v,onScrollbarYChange:x,scrollbarYEnabled:N,onScrollbarYEnabledChange:O,onCornerWidthChange:w,onCornerHeightChange:_,children:i.jsx(lt.div,{dir:P,...o,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});yU.displayName=lC;var xU="ScrollAreaViewport",bU=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...s}=e,o=Oi(xU,n),l=p.useRef(null),c=It(t,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),i.jsx(lt.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});bU.displayName=xU;var Bs="ScrollAreaScrollbar",cC=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Oi(Bs,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return p.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),a.type==="hover"?i.jsx(cae,{...r,ref:t,forceMount:n}):a.type==="scroll"?i.jsx(uae,{...r,ref:t,forceMount:n}):a.type==="auto"?i.jsx(wU,{...r,ref:t,forceMount:n}):a.type==="always"?i.jsx(uC,{...r,ref:t}):null});cC.displayName=Bs;var cae=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Oi(Bs,e.__scopeScrollArea),[s,o]=p.useState(!1);return p.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),i.jsx(kr,{present:n||s,children:i.jsx(wU,{"data-state":s?"visible":"hidden",...r,ref:t})})}),uae=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Oi(Bs,e.__scopeScrollArea),s=e.orientation==="horizontal",o=Nb(()=>c("SCROLL_END"),100),[l,c]=oae("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),p.useEffect(()=>{const u=a.viewport,d=s?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const m=u[d];h!==m&&(c("SCROLL"),o()),h=m};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[a.viewport,s,c,o]),i.jsx(kr,{present:n||l!=="hidden",children:i.jsx(uC,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ve(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ve(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),wU=p.forwardRef((e,t)=>{const n=Oi(Bs,e.__scopeScrollArea),{forceMount:r,...a}=e,[s,o]=p.useState(!1),l=e.orientation==="horizontal",c=Nb(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:d)}},10);return Ld(n.viewport,c),Ld(n.content,c),i.jsx(kr,{present:r||s,children:i.jsx(uC,{"data-state":s?"visible":"hidden",...a,ref:t})})}),uC=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Oi(Bs,e.__scopeScrollArea),s=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=NU(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>s.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,m){return gae(f,o.current,l,m)}return n==="horizontal"?i.jsx(dae,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const f=a.viewport.scrollLeft,m=t2(f,l,a.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollLeft=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollLeft=h(f,a.dir))}}):n==="vertical"?i.jsx(hae,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const f=a.viewport.scrollTop,m=t2(f,l);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollTop=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollTop=h(f))}}):null}),dae=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,s=Oi(Bs,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=It(t,c,s.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(_U,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Sb(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(s.viewport){const f=s.viewport.scrollLeft+d.deltaX;e.onWheelScroll(f),AU(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:by(o.paddingLeft),paddingEnd:by(o.paddingRight)}})}})}),hae=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,s=Oi(Bs,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=It(t,c,s.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(_U,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Sb(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(s.viewport){const f=s.viewport.scrollTop+d.deltaY;e.onWheelScroll(f),AU(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:by(o.paddingTop),paddingEnd:by(o.paddingBottom)}})}})}),[fae,jU]=vU(Bs),_U=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=e,m=Oi(Bs,n),[g,v]=p.useState(null),x=It(t,I=>v(I)),y=p.useRef(null),w=p.useRef(""),b=m.viewport,_=r.content-r.viewport,k=er(d),j=er(c),N=Nb(h,10);function O(I){if(y.current){const P=I.clientX-y.current.left,S=I.clientY-y.current.top;u({x:P,y:S})}}return p.useEffect(()=>{const I=P=>{const S=P.target;(g==null?void 0:g.contains(S))&&k(P,_)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[b,g,_,k]),p.useEffect(j,[r,j]),Ld(g,N),Ld(m.content,N),i.jsx(fae,{scope:n,scrollbar:g,hasThumb:a,onThumbChange:er(s),onThumbPointerUp:er(o),onThumbPositionChange:j,onThumbPointerDown:er(l),children:i.jsx(lt.div,{...f,ref:x,style:{position:"absolute",...f.style},onPointerDown:Ve(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),y.current=g.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),O(I))}),onPointerMove:Ve(e.onPointerMove,O),onPointerUp:Ve(e.onPointerUp,I=>{const P=I.target;P.hasPointerCapture(I.pointerId)&&P.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),y.current=null})})})}),xy="ScrollAreaThumb",kU=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=jU(xy,e.__scopeScrollArea);return i.jsx(kr,{present:n||a.hasThumb,children:i.jsx(mae,{ref:t,...r})})}),mae=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,s=Oi(xy,n),o=jU(xy,n),{onThumbPositionChange:l}=o,c=It(t,h=>o.onThumbChange(h)),u=p.useRef(void 0),d=Nb(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const h=s.viewport;if(h){const f=()=>{if(d(),!u.current){const m=vae(h,l);u.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[s.viewport,d,l]),i.jsx(lt.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ve(e.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),g=h.clientX-m.left,v=h.clientY-m.top;o.onThumbPointerDown({x:g,y:v})}),onPointerUp:Ve(e.onPointerUp,o.onThumbPointerUp)})});kU.displayName=xy;var dC="ScrollAreaCorner",SU=p.forwardRef((e,t)=>{const n=Oi(dC,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(pae,{...e,ref:t}):null});SU.displayName=dC;var pae=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Oi(dC,n),[s,o]=p.useState(0),[l,c]=p.useState(0),u=!!(s&&l);return Ld(a.scrollbarX,()=>{var h;const d=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),Ld(a.scrollbarY,()=>{var h;const d=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?i.jsx(lt.div,{...r,ref:t,style:{width:s,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function by(e){return e?parseInt(e,10):0}function NU(e,t){const n=e/t;return isNaN(n)?0:n}function Sb(e){const t=NU(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function gae(e,t,n,r="ltr"){const a=Sb(n),s=a/2,o=t||s,l=a-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return CU([c,u],h)(e)}function t2(e,t,n="ltr"){const r=Sb(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-a,o=t.content-t.viewport,l=s-r,c=n==="ltr"?[0,o]:[o*-1,0],u=_1(e,c);return CU([0,o],[0,l])(u)}function CU(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function AU(e,t){return e>0&&e<t}var vae=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,l=n.top!==s.top;(o||l)&&t(),n=s,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Nb(e,t){const n=er(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Ld(e,t){const n=er(t);tr(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var EU=yU,yae=bU,xae=SU;const Cb=p.forwardRef(({className:e,children:t,viewportRef:n,...r},a)=>i.jsxs(EU,{ref:a,className:Pe("relative overflow-hidden",e),...r,children:[i.jsx(yae,{ref:n,className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(TU,{}),i.jsx(xae,{})]}));Cb.displayName=EU.displayName;const TU=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(cC,{ref:r,orientation:t,className:Pe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(kU,{className:"relative flex-1 rounded-full bg-border"})}));TU.displayName=cC.displayName;function tn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ii(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ha(e,t){const n=tn(e);return isNaN(t)?ii(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function ls(e,t){const n=tn(e);if(isNaN(t))return ii(e,NaN);if(!t)return n;const r=n.getDate(),a=ii(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const s=a.getDate();return r>=s?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}const hC=6048e5,bae=864e5;let wae={};function Rp(){return wae}function Ls(e,t){var l,c,u,d;const n=Rp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=tn(e),s=a.getDay(),o=(s<r?7:0)+s-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Wc(e){return Ls(e,{weekStartsOn:1})}function PU(e){const t=tn(e),n=t.getFullYear(),r=ii(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Wc(r),s=ii(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=Wc(s);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Pl(e){const t=tn(e);return t.setHours(0,0,0,0),t}function wy(e){const t=tn(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Ss(e,t){const n=Pl(e),r=Pl(t),a=+n-wy(n),s=+r-wy(r);return Math.round((a-s)/bae)}function jae(e){const t=PU(e),n=ii(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Wc(n)}function k1(e,t){const n=t*7;return ha(e,n)}function _ae(e,t){return ls(e,t*12)}function kae(e){let t;return e.forEach(function(n){const r=tn(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function Sae(e){let t;return e.forEach(n=>{const r=tn(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function Ra(e,t){const n=Pl(e),r=Pl(t);return+n==+r}function fC(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Nae(e){if(!fC(e)&&typeof e!="number")return!1;const t=tn(e);return!isNaN(Number(t))}function jm(e,t){const n=tn(e),r=tn(t),a=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return a*12+s}function Cae(e,t,n){const r=Ls(e,n),a=Ls(t,n),s=+r-wy(r),o=+a-wy(a);return Math.round((s-o)/hC)}function OU(e){const t=tn(e);return t.setHours(23,59,59,999),t}function mC(e){const t=tn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Fa(e){const t=tn(e);return t.setDate(1),t.setHours(0,0,0,0),t}function IU(e){const t=tn(e),n=ii(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function pC(e,t){var l,c,u,d;const n=Rp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=tn(e),s=a.getDay(),o=(s<r?-7:0)+6-(s-r);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function RU(e){return pC(e,{weekStartsOn:1})}const Aae={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Eae=(e,t,n)=>{let r;const a=Aae[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function qw(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Tae={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Pae={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Oae={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Iae={date:qw({formats:Tae,defaultWidth:"full"}),time:qw({formats:Pae,defaultWidth:"full"}),dateTime:qw({formats:Oae,defaultWidth:"full"})},Rae={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Mae=(e,t,n,r)=>Rae[e];function Xh(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const Dae={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Lae={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$ae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Fae={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Uae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Bae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zae=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Wae={ordinalNumber:zae,era:Xh({values:Dae,defaultWidth:"wide"}),quarter:Xh({values:Lae,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Xh({values:$ae,defaultWidth:"wide"}),day:Xh({values:Fae,defaultWidth:"wide"}),dayPeriod:Xh({values:Uae,defaultWidth:"wide",formattingValues:Bae,defaultFormattingWidth:"wide"})};function Jh(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Hae(l,h=>h.test(o)):qae(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function qae(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Hae(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Kae(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const Vae=/^(\d+)(th|st|nd|rd)?/i,Gae=/\d+/i,Yae={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xae={any:[/^b/i,/^(a|c)/i]},Jae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qae={any:[/1/i,/2/i,/3/i,/4/i]},Zae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},eie={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tie={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nie={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rie={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},aie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},iie={ordinalNumber:Kae({matchPattern:Vae,parsePattern:Gae,valueCallback:e=>parseInt(e,10)}),era:Jh({matchPatterns:Yae,defaultMatchWidth:"wide",parsePatterns:Xae,defaultParseWidth:"any"}),quarter:Jh({matchPatterns:Jae,defaultMatchWidth:"wide",parsePatterns:Qae,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Jh({matchPatterns:Zae,defaultMatchWidth:"wide",parsePatterns:eie,defaultParseWidth:"any"}),day:Jh({matchPatterns:tie,defaultMatchWidth:"wide",parsePatterns:nie,defaultParseWidth:"any"}),dayPeriod:Jh({matchPatterns:rie,defaultMatchWidth:"any",parsePatterns:aie,defaultParseWidth:"any"})},MU={code:"en-US",formatDistance:Eae,formatLong:Iae,formatRelative:Mae,localize:Wae,match:iie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sie(e){const t=tn(e);return Ss(t,IU(t))+1}function DU(e){const t=tn(e),n=+Wc(t)-+jae(t);return Math.round(n/hC)+1}function LU(e,t){var d,h,f,m;const n=tn(e),r=n.getFullYear(),a=Rp(),s=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(f=a.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=ii(e,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const l=Ls(o,t),c=ii(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=Ls(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function oie(e,t){var l,c,u,d;const n=Rp(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=LU(e,t),s=ii(e,0);return s.setFullYear(a,0,r),s.setHours(0,0,0,0),Ls(s,t)}function $U(e,t){const n=tn(e),r=+Ls(n,t)-+oie(n,t);return Math.round(r/hC)+1}function xn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Wo={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return xn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):xn(n+1,2)},d(e,t){return xn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return xn(e.getHours()%12||12,t.length)},H(e,t){return xn(e.getHours(),t.length)},m(e,t){return xn(e.getMinutes(),t.length)},s(e,t){return xn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return xn(a,t.length)}},ku={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},n2={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Wo.y(e,t)},Y:function(e,t,n,r){const a=LU(e,r),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return xn(o,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):xn(s,t.length)},R:function(e,t){const n=PU(e);return xn(n,t.length)},u:function(e,t){const n=e.getFullYear();return xn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return xn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return xn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Wo.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return xn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=$U(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):xn(a,t.length)},I:function(e,t,n){const r=DU(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):xn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Wo.d(e,t)},D:function(e,t,n){const r=sie(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):xn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return xn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return xn(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return xn(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=ku.noon:r===0?a=ku.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=ku.evening:r>=12?a=ku.afternoon:r>=4?a=ku.morning:a=ku.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Wo.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Wo.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):xn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):xn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Wo.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Wo.s(e,t)},S:function(e,t){return Wo.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return a2(r);case"XXXX":case"XX":return ic(r);case"XXXXX":case"XXX":default:return ic(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return a2(r);case"xxxx":case"xx":return ic(r);case"xxxxx":case"xxx":default:return ic(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+r2(r,":");case"OOOO":default:return"GMT"+ic(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+r2(r,":");case"zzzz":default:return"GMT"+ic(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return xn(r,t.length)},T:function(e,t,n){const r=e.getTime();return xn(r,t.length)}};function r2(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return s===0?n+String(a):n+String(a)+t+xn(s,2)}function a2(e,t){return e%60===0?(e>0?"-":"+")+xn(Math.abs(e)/60,2):ic(e,t)}function ic(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=xn(Math.trunc(r/60),2),s=xn(r%60,2);return n+a+t+s}const i2=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},FU=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},lie=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return i2(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",i2(r,t)).replace("{{time}}",FU(a,t))},cie={p:FU,P:lie},uie=/^D+$/,die=/^Y+$/,hie=["D","DD","YY","YYYY"];function fie(e){return uie.test(e)}function mie(e){return die.test(e)}function pie(e,t,n){const r=gie(e,t,n);if(console.warn(r),hie.includes(e))throw new RangeError(r)}function gie(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const vie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xie=/^'([^]*?)'?$/,bie=/''/g,wie=/[a-zA-Z]/;function So(e,t,n){var d,h,f,m,g,v,x,y;const r=Rp(),a=(n==null?void 0:n.locale)??r.locale??MU,s=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((v=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((y=(x=r.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??0,l=tn(e);if(!Nae(l))throw new RangeError("Invalid time value");let c=t.match(yie).map(w=>{const b=w[0];if(b==="p"||b==="P"){const _=cie[b];return _(w,a.formatLong)}return w}).join("").match(vie).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const b=w[0];if(b==="'")return{isToken:!1,value:jie(w)};if(n2[b])return{isToken:!0,value:w};if(b.match(wie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(w=>{if(!w.isToken)return w.value;const b=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&mie(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&fie(b))&&pie(b,t,String(e));const _=n2[b[0]];return _(l,b,a.localize,u)}).join("")}function jie(e){const t=e.match(xie);return t?t[1].replace(bie,"'"):e}function _ie(e){const t=tn(e),n=t.getFullYear(),r=t.getMonth(),a=ii(e,0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function kie(e){return Math.trunc(+tn(e)/1e3)}function Sie(e){const t=tn(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function Nie(e,t){return Cae(Sie(e),Fa(e),t)+1}function S1(e,t){const n=tn(e),r=tn(t);return n.getTime()>r.getTime()}function UU(e,t){const n=tn(e),r=tn(t);return+n<+r}function gC(e,t){const n=tn(e),r=tn(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Cie(e,t){const n=tn(e),r=tn(t);return n.getFullYear()===r.getFullYear()}function Hw(e,t){return ha(e,-t)}function Kw(e,t){const n=tn(e),r=n.getFullYear(),a=n.getDate(),s=ii(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const o=_ie(s);return n.setMonth(t,Math.min(a,o)),n}function s2(e,t){const n=tn(e);return isNaN(+n)?ii(e,NaN):(n.setFullYear(t),n)}var Tt=function(){return Tt=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Tt.apply(this,arguments)};function Aie(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function BU(e,t,n){for(var r=0,a=t.length,s;r<a;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Mp(e){return e.mode==="multiple"}function Dp(e){return e.mode==="range"}function Ab(e){return e.mode==="single"}var Eie={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Tie(e,t){return So(e,"LLLL y",t)}function Pie(e,t){return So(e,"d",t)}function Oie(e,t){return So(e,"LLLL",t)}function Iie(e){return"".concat(e)}function Rie(e,t){return So(e,"cccccc",t)}function Mie(e,t){return So(e,"yyyy",t)}var Die=Object.freeze({__proto__:null,formatCaption:Tie,formatDay:Pie,formatMonthCaption:Oie,formatWeekNumber:Iie,formatWeekdayName:Rie,formatYearCaption:Mie}),Lie=function(e,t,n){return So(e,"do MMMM (EEEE)",n)},$ie=function(){return"Month: "},Fie=function(){return"Go to next month"},Uie=function(){return"Go to previous month"},Bie=function(e,t){return So(e,"cccc",t)},zie=function(e){return"Week n. ".concat(e)},Wie=function(){return"Year: "},qie=Object.freeze({__proto__:null,labelDay:Lie,labelMonthDropdown:$ie,labelNext:Fie,labelPrevious:Uie,labelWeekNumber:zie,labelWeekday:Bie,labelYearDropdown:Wie});function Hie(){var e="buttons",t=Eie,n=MU,r={},a={},s=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:Die,labels:qie,locale:n,modifiersClassNames:r,modifiers:a,numberOfMonths:s,styles:o,today:l,mode:"default"}}function Kie(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,a=e.toMonth,s=e.fromDate,o=e.toDate;return r?s=Fa(r):t&&(s=new Date(t,0,1)),a?o=mC(a):n&&(o=new Date(n,11,31)),{fromDate:s?Pl(s):void 0,toDate:o?Pl(o):void 0}}var zU=p.createContext(void 0);function Vie(e){var t,n=e.initialProps,r=Hie(),a=Kie(n),s=a.fromDate,o=a.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!s||!o)&&(l="buttons");var c;(Ab(n)||Mp(n)||Dp(n))&&(c=n.onSelect);var u=Tt(Tt(Tt({},r),n),{captionLayout:l,classNames:Tt(Tt({},r.classNames),n.classNames),components:Tt({},n.components),formatters:Tt(Tt({},r.formatters),n.formatters),fromDate:s,labels:Tt(Tt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:Tt(Tt({},r.modifiers),n.modifiers),modifiersClassNames:Tt(Tt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Tt(Tt({},r.styles),n.styles),toDate:o});return i.jsx(zU.Provider,{value:u,children:e.children})}function In(){var e=p.useContext(zU);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function WU(e){var t=In(),n=t.locale,r=t.classNames,a=t.styles,s=t.formatters.formatCaption;return i.jsx("div",{className:r.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function Gie(e){return i.jsx("svg",Tt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function qU(e){var t,n,r=e.onChange,a=e.value,s=e.children,o=e.caption,l=e.className,c=e.style,u=In(),d=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:Gie;return i.jsxs("div",{className:l,style:c,children:[i.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),i.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:r,children:s}),i.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function Yie(e){var t,n=In(),r=n.fromDate,a=n.toDate,s=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});var h=[];if(Cie(r,a))for(var f=Fa(r),m=r.getMonth();m<=a.getMonth();m++)h.push(Kw(f,m));else for(var f=Fa(new Date),m=0;m<=11;m++)h.push(Kw(f,m));var g=function(x){var y=Number(x.target.value),w=Kw(Fa(e.displayMonth),y);e.onChange(w)},v=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:qU;return i.jsx(v,{name:"months","aria-label":d(),className:c.dropdown_month,style:s.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:h.map(function(x){return i.jsx("option",{value:x.getMonth(),children:l(x,{locale:o})},x.getMonth())})})}function Xie(e){var t,n=e.displayMonth,r=In(),a=r.fromDate,s=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,h=r.labels.labelYearDropdown,f=[];if(!a)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});for(var m=a.getFullYear(),g=s.getFullYear(),v=m;v<=g;v++)f.push(s2(IU(new Date),v));var x=function(w){var b=s2(Fa(n),Number(w.target.value));e.onChange(b)},y=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:qU;return i.jsx(y,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:n.getFullYear(),caption:d(n,{locale:o}),children:f.map(function(w){return i.jsx("option",{value:w.getFullYear(),children:d(w,{locale:o})},w.getFullYear())})})}function Jie(e,t){var n=p.useState(e),r=n[0],a=n[1],s=t===void 0?r:t;return[s,a]}function Qie(e){var t=e.month,n=e.defaultMonth,r=e.today,a=t||n||r||new Date,s=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&jm(s,a)<0){var u=-1*(c-1);a=ls(s,u)}return o&&jm(a,o)<0&&(a=o),Fa(a)}function Zie(){var e=In(),t=Qie(e),n=Jie(t,e.month),r=n[0],a=n[1],s=function(o){var l;if(!e.disableNavigation){var c=Fa(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,s]}function ese(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,a=Fa(e),s=Fa(ls(a,r)),o=jm(s,a),l=[],c=0;c<o;c++){var u=ls(a,c);l.push(u)}return n&&(l=l.reverse()),l}function tse(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=r?s:1,l=Fa(e);if(!n)return ls(l,o);var c=jm(n,e);if(!(c<s))return ls(l,o)}}function nse(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=r?s:1,l=Fa(e);if(!n)return ls(l,-o);var c=jm(l,n);if(!(c<=0))return ls(l,-o)}}var HU=p.createContext(void 0);function rse(e){var t=In(),n=Zie(),r=n[0],a=n[1],s=ese(r,t),o=tse(r,t),l=nse(r,t),c=function(h){return s.some(function(f){return gC(h,f)})},u=function(h,f){c(h)||(f&&UU(h,f)?a(ls(h,1+t.numberOfMonths*-1)):a(h))},d={currentMonth:r,displayMonths:s,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return i.jsx(HU.Provider,{value:d,children:e.children})}function Lp(){var e=p.useContext(HU);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function o2(e){var t,n=In(),r=n.classNames,a=n.styles,s=n.components,o=Lp().goToMonth,l=function(d){o(ls(d,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:WU,u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth});return i.jsxs("div",{className:r.caption_dropdowns,style:a.caption_dropdowns,children:[i.jsx("div",{className:r.vhidden,children:u}),i.jsx(Yie,{onChange:l,displayMonth:e.displayMonth}),i.jsx(Xie,{onChange:l,displayMonth:e.displayMonth})]})}function ase(e){return i.jsx("svg",Tt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function ise(e){return i.jsx("svg",Tt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var jy=p.forwardRef(function(e,t){var n=In(),r=n.classNames,a=n.styles,s=[r.button_reset,r.button];e.className&&s.push(e.className);var o=s.join(" "),l=Tt(Tt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),i.jsx("button",Tt({},e,{ref:t,type:"button",className:o,style:l}))});function sse(e){var t,n,r=In(),a=r.dir,s=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,h=r.components;if(!e.nextMonth&&!e.previousMonth)return i.jsx(i.Fragment,{});var f=u(e.previousMonth,{locale:s}),m=[o.nav_button,o.nav_button_previous].join(" "),g=d(e.nextMonth,{locale:s}),v=[o.nav_button,o.nav_button_next].join(" "),x=(t=h==null?void 0:h.IconRight)!==null&&t!==void 0?t:ise,y=(n=h==null?void 0:h.IconLeft)!==null&&n!==void 0?n:ase;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&i.jsx(jy,{name:"previous-month","aria-label":f,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?i.jsx(x,{className:o.nav_icon,style:l.nav_icon}):i.jsx(y,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&i.jsx(jy,{name:"next-month","aria-label":g,className:v,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?i.jsx(y,{className:o.nav_icon,style:l.nav_icon}):i.jsx(x,{className:o.nav_icon,style:l.nav_icon})})]})}function l2(e){var t=In().numberOfMonths,n=Lp(),r=n.previousMonth,a=n.nextMonth,s=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(g){return gC(e.displayMonth,g)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),h=t>1&&(u||!c),f=function(){r&&s(r)},m=function(){a&&s(a)};return i.jsx(sse,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:h,nextMonth:a,previousMonth:r,onPreviousClick:f,onNextClick:m})}function ose(e){var t,n=In(),r=n.classNames,a=n.disableNavigation,s=n.styles,o=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:WU,u;return a?u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=i.jsx(o2,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=i.jsxs(i.Fragment,{children:[i.jsx(o2,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),i.jsx(l2,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=i.jsxs(i.Fragment,{children:[i.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(l2,{displayMonth:e.displayMonth,id:e.id})]}),i.jsx("div",{className:r.caption,style:s.caption,children:u})}function lse(e){var t=In(),n=t.footer,r=t.styles,a=t.classNames.tfoot;return n?i.jsx("tfoot",{className:a,style:r.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:n})})}):i.jsx(i.Fragment,{})}function cse(e,t,n){for(var r=n?Wc(new Date):Ls(new Date,{locale:e,weekStartsOn:t}),a=[],s=0;s<7;s++){var o=ha(r,s);a.push(o)}return a}function use(){var e=In(),t=e.classNames,n=e.styles,r=e.showWeekNumber,a=e.locale,s=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=cse(a,s,o);return i.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&i.jsx("td",{style:n.head_cell,className:t.head_cell}),u.map(function(d,h){return i.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(d,{locale:a}),children:l(d,{locale:a})},h)})]})}function dse(){var e,t=In(),n=t.classNames,r=t.styles,a=t.components,s=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:use;return i.jsx("thead",{style:r.head,className:n.head,children:i.jsx(s,{})})}function hse(e){var t=In(),n=t.locale,r=t.formatters.formatDay;return i.jsx(i.Fragment,{children:r(e.date,{locale:n})})}var vC=p.createContext(void 0);function fse(e){if(!Mp(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return i.jsx(vC.Provider,{value:t,children:e.children})}return i.jsx(mse,{initialProps:e.initialProps,children:e.children})}function mse(e){var t=e.initialProps,n=e.children,r=t.selected,a=t.min,s=t.max,o=function(u,d,h){var f,m;(f=t.onDayClick)===null||f===void 0||f.call(t,u,d,h);var g=!!(d.selected&&a&&(r==null?void 0:r.length)===a);if(!g){var v=!!(!d.selected&&s&&(r==null?void 0:r.length)===s);if(!v){var x=r?BU([],r):[];if(d.selected){var y=x.findIndex(function(w){return Ra(u,w)});x.splice(y,1)}else x.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,x,u,d,h)}}},l={disabled:[]};r&&l.disabled.push(function(u){var d=s&&r.length>s-1,h=r.some(function(f){return Ra(f,u)});return!!(d&&!h)});var c={selected:r,onDayClick:o,modifiers:l};return i.jsx(vC.Provider,{value:c,children:n})}function yC(){var e=p.useContext(vC);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function pse(e,t){var n=t||{},r=n.from,a=n.to;return r&&a?Ra(a,e)&&Ra(r,e)?void 0:Ra(a,e)?{from:a,to:void 0}:Ra(r,e)?void 0:S1(r,e)?{from:e,to:a}:{from:r,to:e}:a?S1(e,a)?{from:a,to:e}:{from:e,to:a}:r?UU(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var xC=p.createContext(void 0);function gse(e){if(!Dp(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(xC.Provider,{value:t,children:e.children})}return i.jsx(vse,{initialProps:e.initialProps,children:e.children})}function vse(e){var t=e.initialProps,n=e.children,r=t.selected,a=r||{},s=a.from,o=a.to,l=t.min,c=t.max,u=function(m,g,v){var x,y;(x=t.onDayClick)===null||x===void 0||x.call(t,m,g,v);var w=pse(m,r);(y=t.onSelect)===null||y===void 0||y.call(t,w,m,g,v)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(d.range_start=[s],o?(d.range_end=[o],Ra(s,o)||(d.range_middle=[{after:s,before:o}])):d.range_end=[s]):o&&(d.range_start=[o],d.range_end=[o]),l&&(s&&!o&&d.disabled.push({after:Hw(s,l-1),before:ha(s,l-1)}),s&&o&&d.disabled.push({after:s,before:ha(s,l-1)}),!s&&o&&d.disabled.push({after:Hw(o,l-1),before:ha(o,l-1)})),c){if(s&&!o&&(d.disabled.push({before:ha(s,-c+1)}),d.disabled.push({after:ha(s,c-1)})),s&&o){var h=Ss(o,s)+1,f=c-h;d.disabled.push({before:Hw(s,f)}),d.disabled.push({after:ha(o,f)})}!s&&o&&(d.disabled.push({before:ha(o,-c+1)}),d.disabled.push({after:ha(o,c-1)}))}return i.jsx(xC.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function bC(){var e=p.useContext(xC);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Av(e){return Array.isArray(e)?BU([],e):e!==void 0?[e]:[]}function yse(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],a=n[1];t[r]=Av(a)}),t}var cs;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(cs||(cs={}));var xse=cs.Selected,Vs=cs.Disabled,bse=cs.Hidden,wse=cs.Today,Vw=cs.RangeEnd,Gw=cs.RangeMiddle,Yw=cs.RangeStart,jse=cs.Outside;function _se(e,t,n){var r,a=(r={},r[xse]=Av(e.selected),r[Vs]=Av(e.disabled),r[bse]=Av(e.hidden),r[wse]=[e.today],r[Vw]=[],r[Gw]=[],r[Yw]=[],r[jse]=[],r);return e.fromDate&&a[Vs].push({before:e.fromDate}),e.toDate&&a[Vs].push({after:e.toDate}),Mp(e)?a[Vs]=a[Vs].concat(t.modifiers[Vs]):Dp(e)&&(a[Vs]=a[Vs].concat(n.modifiers[Vs]),a[Yw]=n.modifiers[Yw],a[Gw]=n.modifiers[Gw],a[Vw]=n.modifiers[Vw]),a}var KU=p.createContext(void 0);function kse(e){var t=In(),n=yC(),r=bC(),a=_se(t,n,r),s=yse(t.modifiers),o=Tt(Tt({},a),s);return i.jsx(KU.Provider,{value:o,children:e.children})}function VU(){var e=p.useContext(KU);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Sse(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Nse(e){return!!(e&&typeof e=="object"&&"from"in e)}function Cse(e){return!!(e&&typeof e=="object"&&"after"in e)}function Ase(e){return!!(e&&typeof e=="object"&&"before"in e)}function Ese(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Tse(e,t){var n,r=t.from,a=t.to;if(r&&a){var s=Ss(a,r)<0;s&&(n=[a,r],r=n[0],a=n[1]);var o=Ss(e,r)>=0&&Ss(a,e)>=0;return o}return a?Ra(a,e):r?Ra(r,e):!1}function Pse(e){return fC(e)}function Ose(e){return Array.isArray(e)&&e.every(fC)}function Ise(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(Pse(n))return Ra(e,n);if(Ose(n))return n.includes(e);if(Nse(n))return Tse(e,n);if(Ese(n))return n.dayOfWeek.includes(e.getDay());if(Sse(n)){var r=Ss(n.before,e),a=Ss(n.after,e),s=r>0,o=a<0,l=S1(n.before,n.after);return l?o&&s:s||o}return Cse(n)?Ss(e,n.after)>0:Ase(n)?Ss(n.before,e)>0:typeof n=="function"?n(e):!1})}function wC(e,t,n){var r=Object.keys(t).reduce(function(s,o){var l=t[o];return Ise(e,l)&&s.push(o),s},[]),a={};return r.forEach(function(s){return a[s]=!0}),n&&!gC(e,n)&&(a.outside=!0),a}function Rse(e,t){for(var n=Fa(e[0]),r=mC(e[e.length-1]),a,s,o=n;o<=r;){var l=wC(o,t),c=!l.disabled&&!l.hidden;if(!c){o=ha(o,1);continue}if(l.selected)return o;l.today&&!s&&(s=o),a||(a=o),o=ha(o,1)}return s||a}var Mse=365;function GU(e,t){var n=t.moveBy,r=t.direction,a=t.context,s=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,h=a.locale,f={day:ha,week:k1,month:ls,year:_ae,startOfWeek:function(x){return a.ISOWeek?Wc(x):Ls(x,{locale:h,weekStartsOn:c})},endOfWeek:function(x){return a.ISOWeek?RU(x):pC(x,{locale:h,weekStartsOn:c})}},m=f[n](e,r==="after"?1:-1);r==="before"&&u?m=kae([u,m]):r==="after"&&d&&(m=Sae([d,m]));var g=!0;if(s){var v=wC(m,s);g=!v.disabled&&!v.hidden}return g?m:l.count>Mse?l.lastFocused:GU(m,{moveBy:n,direction:r,context:a,modifiers:s,retry:Tt(Tt({},l),{count:l.count+1})})}var YU=p.createContext(void 0);function Dse(e){var t=Lp(),n=VU(),r=p.useState(),a=r[0],s=r[1],o=p.useState(),l=o[0],c=o[1],u=Rse(t.displayMonths,n),d=a??(l&&t.isDateDisplayed(l))?l:u,h=function(){c(a),s(void 0)},f=function(x){s(x)},m=In(),g=function(x,y){if(a){var w=GU(a,{moveBy:x,direction:y,context:m,modifiers:n});Ra(a,w)||(t.goToDate(w,a),f(w))}},v={focusedDay:a,focusTarget:d,blur:h,focus:f,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return i.jsx(YU.Provider,{value:v,children:e.children})}function jC(){var e=p.useContext(YU);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Lse(e,t){var n=VU(),r=wC(e,n,t);return r}var _C=p.createContext(void 0);function $se(e){if(!Ab(e.initialProps)){var t={selected:void 0};return i.jsx(_C.Provider,{value:t,children:e.children})}return i.jsx(Fse,{initialProps:e.initialProps,children:e.children})}function Fse(e){var t=e.initialProps,n=e.children,r=function(s,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,s,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,s,s,o,l)},a={selected:t.selected,onDayClick:r};return i.jsx(_C.Provider,{value:a,children:n})}function XU(){var e=p.useContext(_C);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function Use(e,t){var n=In(),r=XU(),a=yC(),s=bC(),o=jC(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,h=o.blur,f=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,v=o.focusYearBefore,x=o.focusYearAfter,y=o.focusStartOfWeek,w=o.focusEndOfWeek,b=function(T){var E,$,A,B;Ab(n)?(E=r.onDayClick)===null||E===void 0||E.call(r,e,t,T):Mp(n)?($=a.onDayClick)===null||$===void 0||$.call(a,e,t,T):Dp(n)?(A=s.onDayClick)===null||A===void 0||A.call(s,e,t,T):(B=n.onDayClick)===null||B===void 0||B.call(n,e,t,T)},_=function(T){var E;f(e),(E=n.onDayFocus)===null||E===void 0||E.call(n,e,t,T)},k=function(T){var E;h(),(E=n.onDayBlur)===null||E===void 0||E.call(n,e,t,T)},j=function(T){var E;(E=n.onDayMouseEnter)===null||E===void 0||E.call(n,e,t,T)},N=function(T){var E;(E=n.onDayMouseLeave)===null||E===void 0||E.call(n,e,t,T)},O=function(T){var E;(E=n.onDayPointerEnter)===null||E===void 0||E.call(n,e,t,T)},I=function(T){var E;(E=n.onDayPointerLeave)===null||E===void 0||E.call(n,e,t,T)},P=function(T){var E;(E=n.onDayTouchCancel)===null||E===void 0||E.call(n,e,t,T)},S=function(T){var E;(E=n.onDayTouchEnd)===null||E===void 0||E.call(n,e,t,T)},D=function(T){var E;(E=n.onDayTouchMove)===null||E===void 0||E.call(n,e,t,T)},L=function(T){var E;(E=n.onDayTouchStart)===null||E===void 0||E.call(n,e,t,T)},U=function(T){var E;(E=n.onDayKeyUp)===null||E===void 0||E.call(n,e,t,T)},F=function(T){var E;switch(T.key){case"ArrowLeft":T.preventDefault(),T.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":T.preventDefault(),T.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":T.preventDefault(),T.stopPropagation(),u();break;case"ArrowUp":T.preventDefault(),T.stopPropagation(),d();break;case"PageUp":T.preventDefault(),T.stopPropagation(),T.shiftKey?v():m();break;case"PageDown":T.preventDefault(),T.stopPropagation(),T.shiftKey?x():g();break;case"Home":T.preventDefault(),T.stopPropagation(),y();break;case"End":T.preventDefault(),T.stopPropagation(),w();break}(E=n.onDayKeyDown)===null||E===void 0||E.call(n,e,t,T)},M={onClick:b,onFocus:_,onBlur:k,onKeyDown:F,onKeyUp:U,onMouseEnter:j,onMouseLeave:N,onPointerEnter:O,onPointerLeave:I,onTouchCancel:P,onTouchEnd:S,onTouchMove:D,onTouchStart:L};return M}function Bse(){var e=In(),t=XU(),n=yC(),r=bC(),a=Ab(e)?t.selected:Mp(e)?n.selected:Dp(e)?r.selected:void 0;return a}function zse(e){return Object.values(cs).includes(e)}function Wse(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var a=e.modifiersClassNames[r];if(a)n.push(a);else if(zse(r)){var s=e.classNames["day_".concat(r)];s&&n.push(s)}}),n}function qse(e,t){var n=Tt({},e.styles.day);return Object.keys(t).forEach(function(r){var a;n=Tt(Tt({},n),(a=e.modifiersStyles)===null||a===void 0?void 0:a[r])}),n}function Hse(e,t,n){var r,a,s,o=In(),l=jC(),c=Lse(e,t),u=Use(e,c),d=Bse(),h=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var j;c.outside||l.focusedDay&&h&&Ra(l.focusedDay,e)&&((j=n.current)===null||j===void 0||j.focus())},[l.focusedDay,e,n,h,c.outside]);var f=Wse(o,c).join(" "),m=qse(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),v=(s=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&s!==void 0?s:hse,x=i.jsx(v,{date:e,displayMonth:t,activeModifiers:c}),y={style:m,className:f,children:x,role:"gridcell"},w=l.focusTarget&&Ra(l.focusTarget,e)&&!c.outside,b=l.focusedDay&&Ra(l.focusedDay,e),_=Tt(Tt(Tt({},y),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=b||w?0:-1,r)),u),k={isButton:h,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:_,divProps:y};return k}function Kse(e){var t=p.useRef(null),n=Hse(e.date,e.displayMonth,t);return n.isHidden?i.jsx("div",{role:"gridcell"}):n.isButton?i.jsx(jy,Tt({name:"day",ref:t},n.buttonProps)):i.jsx("div",Tt({},n.divProps))}function Vse(e){var t=e.number,n=e.dates,r=In(),a=r.onWeekNumberClick,s=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!a)return i.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:d});var h=c(Number(t),{locale:l}),f=function(m){a(t,n,m)};return i.jsx(jy,{name:"week-number","aria-label":h,className:o.weeknumber,style:s.weeknumber,onClick:f,children:d})}function Gse(e){var t,n,r=In(),a=r.styles,s=r.classNames,o=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:Kse,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:Vse,d;return o&&(d=i.jsx("td",{className:s.cell,style:a.cell,children:i.jsx(u,{number:e.weekNumber,dates:e.dates})})),i.jsxs("tr",{className:s.row,style:a.row,children:[d,e.dates.map(function(h){return i.jsx("td",{className:s.cell,style:a.cell,role:"presentation",children:i.jsx(c,{displayMonth:e.displayMonth,date:h})},kie(h))})]})}function c2(e,t,n){for(var r=n!=null&&n.ISOWeek?RU(t):pC(t,n),a=n!=null&&n.ISOWeek?Wc(e):Ls(e,n),s=Ss(r,a),o=[],l=0;l<=s;l++)o.push(ha(a,l));var c=o.reduce(function(u,d){var h=n!=null&&n.ISOWeek?DU(d):$U(d,n),f=u.find(function(m){return m.weekNumber===h});return f?(f.dates.push(d),u):(u.push({weekNumber:h,dates:[d]}),u)},[]);return c}function Yse(e,t){var n=c2(Fa(e),mC(e),t);if(t!=null&&t.useFixedWeeks){var r=Nie(e,t);if(r<6){var a=n[n.length-1],s=a.dates[a.dates.length-1],o=k1(s,6-r),l=c2(k1(s,1),o,t);n.push.apply(n,l)}}return n}function Xse(e){var t,n,r,a=In(),s=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,h=a.weekStartsOn,f=a.firstWeekContainsDate,m=a.ISOWeek,g=Yse(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:s,weekStartsOn:h,firstWeekContainsDate:f}),v=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:dse,x=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:Gse,y=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:lse;return i.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&i.jsx(v,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(w){return i.jsx(x,{displayMonth:e.displayMonth,dates:w.dates,weekNumber:w.weekNumber},w.weekNumber)})}),i.jsx(y,{displayMonth:e.displayMonth})]})}function Jse(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Qse=Jse()?p.useLayoutEffect:p.useEffect,Xw=!1,Zse=0;function u2(){return"react-day-picker-".concat(++Zse)}function eoe(e){var t,n=e??(Xw?u2():null),r=p.useState(n),a=r[0],s=r[1];return Qse(function(){a===null&&s(u2())},[]),p.useEffect(function(){Xw===!1&&(Xw=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function toe(e){var t,n,r=In(),a=r.dir,s=r.classNames,o=r.styles,l=r.components,c=Lp().displayMonths,u=eoe(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,h=[s.month],f=o.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,v=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(h.push(s.caption_start),f=Tt(Tt({},f),o.caption_start)),g&&(h.push(s.caption_end),f=Tt(Tt({},f),o.caption_end)),v&&(h.push(s.caption_between),f=Tt(Tt({},f),o.caption_between));var x=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:ose;return i.jsxs("div",{className:h.join(" "),style:f,children:[i.jsx(x,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(Xse,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function noe(e){var t=In(),n=t.classNames,r=t.styles;return i.jsx("div",{className:n.months,style:r.months,children:e.children})}function roe(e){var t,n,r=e.initialProps,a=In(),s=jC(),o=Lp(),l=p.useState(!1),c=l[0],u=l[1];p.useEffect(function(){a.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[a.initialFocus,c,s.focus,s.focusTarget,s]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var h=Tt(Tt({},a.styles.root),a.style),f=Object.keys(r).filter(function(g){return g.startsWith("data-")}).reduce(function(g,v){var x;return Tt(Tt({},g),(x={},x[v]=r[v],x))},{}),m=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:noe;return i.jsx("div",Tt({className:d.join(" "),style:h,dir:a.dir,id:a.id,nonce:r.nonce,title:r.title,lang:r.lang},f,{children:i.jsx(m,{children:o.displayMonths.map(function(g,v){return i.jsx(toe,{displayIndex:v,displayMonth:g},v)})})}))}function aoe(e){var t=e.children,n=Aie(e,["children"]);return i.jsx(Vie,{initialProps:n,children:i.jsx(rse,{children:i.jsx($se,{initialProps:n,children:i.jsx(fse,{initialProps:n,children:i.jsx(gse,{initialProps:n,children:i.jsx(kse,{children:i.jsx(Dse,{children:t})})})})})})})}function ioe(e){return i.jsx(aoe,Tt({},e,{children:i.jsx(roe,{initialProps:e})}))}function _m({className:e,classNames:t,showOutsideDays:n=!0,...r}){return i.jsx(ioe,{showOutsideDays:n,className:Pe("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Pe(Rd({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Pe(Rd({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>i.jsx(vN,{className:"h-4 w-4"}),IconRight:({...a})=>i.jsx(_p,{className:"h-4 w-4"})},...r})}_m.displayName="Calendar";var Eb="Popover",[JU,h5e]=Ir(Eb,[Ll]),$p=Ll(),[soe,Bl]=JU(Eb),QU=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:s,modal:o=!1}=e,l=$p(t),c=p.useRef(null),[u,d]=p.useState(!1),[h,f]=Ua({prop:r,defaultProp:a??!1,onChange:s,caller:Eb});return i.jsx(Qx,{...l,children:i.jsx(soe,{scope:t,contentId:fr(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(m=>!m),[f]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>d(!0),[]),onCustomAnchorRemove:p.useCallback(()=>d(!1),[]),modal:o,children:n})})};QU.displayName=Eb;var ZU="PopoverAnchor",ooe=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Bl(ZU,n),s=$p(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return p.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(Sp,{...s,...r,ref:t})});ooe.displayName=ZU;var eB="PopoverTrigger",tB=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Bl(eB,n),s=$p(n),o=It(t,a.triggerRef),l=i.jsx(lt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":sB(a.open),...r,ref:o,onClick:Ve(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:i.jsx(Sp,{asChild:!0,...s,children:l})});tB.displayName=eB;var kC="PopoverPortal",[loe,coe]=JU(kC,{forceMount:void 0}),nB=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,s=Bl(kC,t);return i.jsx(loe,{scope:t,forceMount:n,children:i.jsx(kr,{present:n||s.open,children:i.jsx(hh,{asChild:!0,container:a,children:r})})})};nB.displayName=kC;var $d="PopoverContent",rB=p.forwardRef((e,t)=>{const n=coe($d,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,s=Bl($d,e.__scopePopover);return i.jsx(kr,{present:r||s.open,children:s.modal?i.jsx(doe,{...a,ref:t}):i.jsx(hoe,{...a,ref:t})})});rB.displayName=$d;var uoe=Nl("PopoverContent.RemoveScroll"),doe=p.forwardRef((e,t)=>{const n=Bl($d,e.__scopePopover),r=p.useRef(null),a=It(t,r),s=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return vb(o)},[]),i.jsx(Pp,{as:uoe,allowPinchZoom:!0,children:i.jsx(aB,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ve(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),s.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ve(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Ve(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),hoe=p.forwardRef((e,t)=>{const n=Bl($d,e.__scopePopover),r=p.useRef(!1),a=p.useRef(!1);return i.jsx(aB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),aB=p.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...h}=e,f=Bl($d,n),m=$p(n);return gb(),i.jsx(Tp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(ru,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>f.onOpenChange(!1),children:i.jsx(Zx,{"data-state":sB(f.open),role:"dialog",id:f.contentId,...m,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),iB="PopoverClose",foe=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Bl(iB,n);return i.jsx(lt.button,{type:"button",...r,ref:t,onClick:Ve(e.onClick,()=>a.onOpenChange(!1))})});foe.displayName=iB;var moe="PopoverArrow",poe=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=$p(n);return i.jsx(eb,{...a,...r,ref:t})});poe.displayName=moe;function sB(e){return e?"open":"closed"}var goe=QU,voe=tB,yoe=nB,oB=rB;const Ns=goe,Cs=voe,Ji=p.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},a)=>i.jsx(yoe,{children:i.jsx(oB,{ref:a,align:t,sideOffset:n,className:Pe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Ji.displayName=oB.displayName;function SC(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var xoe=[" ","Enter","ArrowUp","ArrowDown"],boe=[" ","Enter"],qc="Select",[Tb,Pb,woe]=xp(qc),[bh,f5e]=Ir(qc,[woe,Ll]),Ob=Ll(),[joe,zl]=bh(qc),[_oe,koe]=bh(qc),lB=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:g}=e,v=Ob(t),[x,y]=p.useState(null),[w,b]=p.useState(null),[_,k]=p.useState(!1),j=xh(u),[N,O]=Ua({prop:r,defaultProp:a??!1,onChange:s,caller:qc}),[I,P]=Ua({prop:o,defaultProp:l,onChange:c,caller:qc}),S=p.useRef(null),D=x?g||!!x.closest("form"):!0,[L,U]=p.useState(new Set),F=Array.from(L).map(M=>M.props.value).join(";");return i.jsx(Qx,{...v,children:i.jsxs(joe,{required:m,scope:t,trigger:x,onTriggerChange:y,valueNode:w,onValueNodeChange:b,valueNodeHasChildren:_,onValueNodeHasChildrenChange:k,contentId:fr(),value:I,onValueChange:P,open:N,onOpenChange:O,dir:j,triggerPointerDownPosRef:S,disabled:f,children:[i.jsx(Tb.Provider,{scope:t,children:i.jsx(_oe,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(M=>{U(T=>new Set(T).add(M))},[]),onNativeOptionRemove:p.useCallback(M=>{U(T=>{const E=new Set(T);return E.delete(M),E})},[]),children:n})}),D?i.jsxs(OB,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:I,onChange:M=>P(M.target.value),disabled:f,form:g,children:[I===void 0?i.jsx("option",{value:""}):null,Array.from(L)]},F):null]})})};lB.displayName=qc;var cB="SelectTrigger",uB=p.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,s=Ob(n),o=zl(cB,n),l=o.disabled||r,c=It(t,o.onTriggerChange),u=Pb(n),d=p.useRef("touch"),[h,f,m]=RB(v=>{const x=u().filter(b=>!b.disabled),y=x.find(b=>b.value===o.value),w=MB(x,v,y);w!==void 0&&o.onValueChange(w.value)}),g=v=>{l||(o.onOpenChange(!0),m()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return i.jsx(Sp,{asChild:!0,...s,children:i.jsx(lt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":IB(o.value)?"":void 0,...a,ref:c,onClick:Ve(a.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&g(v)}),onPointerDown:Ve(a.onPointerDown,v=>{d.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:Ve(a.onKeyDown,v=>{const x=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&f(v.key),!(x&&v.key===" ")&&xoe.includes(v.key)&&(g(),v.preventDefault())})})})});uB.displayName=cB;var dB="SelectValue",hB=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:s,placeholder:o="",...l}=e,c=zl(dB,n),{onValueNodeHasChildrenChange:u}=c,d=s!==void 0,h=It(t,c.onValueNodeChange);return tr(()=>{u(d)},[u,d]),i.jsx(lt.span,{...l,ref:h,style:{pointerEvents:"none"},children:IB(c.value)?i.jsx(i.Fragment,{children:o}):s})});hB.displayName=dB;var Soe="SelectIcon",fB=p.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return i.jsx(lt.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});fB.displayName=Soe;var Noe="SelectPortal",mB=e=>i.jsx(hh,{asChild:!0,...e});mB.displayName=Noe;var Hc="SelectContent",pB=p.forwardRef((e,t)=>{const n=zl(Hc,e.__scopeSelect),[r,a]=p.useState();if(tr(()=>{a(new DocumentFragment)},[]),!n.open){const s=r;return s?tu.createPortal(i.jsx(gB,{scope:e.__scopeSelect,children:i.jsx(Tb.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),s):null}return i.jsx(vB,{...e,ref:t})});pB.displayName=Hc;var Ui=10,[gB,Wl]=bh(Hc),Coe="SelectContentImpl",Aoe=Nl("SelectContent.RemoveScroll"),vB=p.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x,...y}=e,w=zl(Hc,n),[b,_]=p.useState(null),[k,j]=p.useState(null),N=It(t,Z=>_(Z)),[O,I]=p.useState(null),[P,S]=p.useState(null),D=Pb(n),[L,U]=p.useState(!1),F=p.useRef(!1);p.useEffect(()=>{if(b)return vb(b)},[b]),gb();const M=p.useCallback(Z=>{const[te,...J]=D().map(ae=>ae.ref.current),[ie]=J.slice(-1),ge=document.activeElement;for(const ae of Z)if(ae===ge||(ae==null||ae.scrollIntoView({block:"nearest"}),ae===te&&k&&(k.scrollTop=0),ae===ie&&k&&(k.scrollTop=k.scrollHeight),ae==null||ae.focus(),document.activeElement!==ge))return},[D,k]),T=p.useCallback(()=>M([O,b]),[M,O,b]);p.useEffect(()=>{L&&T()},[L,T]);const{onOpenChange:E,triggerPointerDownPosRef:$}=w;p.useEffect(()=>{if(b){let Z={x:0,y:0};const te=ie=>{var ge,ae;Z={x:Math.abs(Math.round(ie.pageX)-(((ge=$.current)==null?void 0:ge.x)??0)),y:Math.abs(Math.round(ie.pageY)-(((ae=$.current)==null?void 0:ae.y)??0))}},J=ie=>{Z.x<=10&&Z.y<=10?ie.preventDefault():b.contains(ie.target)||E(!1),document.removeEventListener("pointermove",te),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",te),document.addEventListener("pointerup",J,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",te),document.removeEventListener("pointerup",J,{capture:!0})}}},[b,E,$]),p.useEffect(()=>{const Z=()=>E(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[E]);const[A,B]=RB(Z=>{const te=D().filter(ge=>!ge.disabled),J=te.find(ge=>ge.ref.current===document.activeElement),ie=MB(te,Z,J);ie&&setTimeout(()=>ie.ref.current.focus())}),R=p.useCallback((Z,te,J)=>{const ie=!F.current&&!J;(w.value!==void 0&&w.value===te||ie)&&(I(Z),ie&&(F.current=!0))},[w.value]),C=p.useCallback(()=>b==null?void 0:b.focus(),[b]),W=p.useCallback((Z,te,J)=>{const ie=!F.current&&!J;(w.value!==void 0&&w.value===te||ie)&&S(Z)},[w.value]),Q=r==="popper"?N1:yB,X=Q===N1?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x}:{};return i.jsx(gB,{scope:n,content:b,viewport:k,onViewportChange:j,itemRefCallback:R,selectedItem:O,onItemLeave:C,itemTextRefCallback:W,focusSelectedItem:T,selectedItemText:P,position:r,isPositioned:L,searchRef:A,children:i.jsx(Pp,{as:Aoe,allowPinchZoom:!0,children:i.jsx(Tp,{asChild:!0,trapped:w.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:Ve(a,Z=>{var te;(te=w.trigger)==null||te.focus({preventScroll:!0}),Z.preventDefault()}),children:i.jsx(ru,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:i.jsx(Q,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:Z=>Z.preventDefault(),...y,...X,onPlaced:()=>U(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ve(y.onKeyDown,Z=>{const te=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!te&&Z.key.length===1&&B(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let ie=D().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(ie=ie.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const ge=Z.target,ae=ie.indexOf(ge);ie=ie.slice(ae+1)}setTimeout(()=>M(ie)),Z.preventDefault()}})})})})})})});vB.displayName=Coe;var Eoe="SelectItemAlignedPosition",yB=p.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,s=zl(Hc,n),o=Wl(Hc,n),[l,c]=p.useState(null),[u,d]=p.useState(null),h=It(t,N=>d(N)),f=Pb(n),m=p.useRef(!1),g=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:y,focusSelectedItem:w}=o,b=p.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&v&&x&&y){const N=s.trigger.getBoundingClientRect(),O=u.getBoundingClientRect(),I=s.valueNode.getBoundingClientRect(),P=y.getBoundingClientRect();if(s.dir!=="rtl"){const ge=P.left-O.left,ae=I.left-ge,Re=N.left-ae,me=N.width+Re,K=Math.max(me,O.width),de=window.innerWidth-Ui,$e=_1(ae,[Ui,Math.max(Ui,de-K)]);l.style.minWidth=me+"px",l.style.left=$e+"px"}else{const ge=O.right-P.right,ae=window.innerWidth-I.right-ge,Re=window.innerWidth-N.right-ae,me=N.width+Re,K=Math.max(me,O.width),de=window.innerWidth-Ui,$e=_1(ae,[Ui,Math.max(Ui,de-K)]);l.style.minWidth=me+"px",l.style.right=$e+"px"}const S=f(),D=window.innerHeight-Ui*2,L=v.scrollHeight,U=window.getComputedStyle(u),F=parseInt(U.borderTopWidth,10),M=parseInt(U.paddingTop,10),T=parseInt(U.borderBottomWidth,10),E=parseInt(U.paddingBottom,10),$=F+M+L+E+T,A=Math.min(x.offsetHeight*5,$),B=window.getComputedStyle(v),R=parseInt(B.paddingTop,10),C=parseInt(B.paddingBottom,10),W=N.top+N.height/2-Ui,Q=D-W,X=x.offsetHeight/2,Z=x.offsetTop+X,te=F+M+Z,J=$-te;if(te<=W){const ge=S.length>0&&x===S[S.length-1].ref.current;l.style.bottom="0px";const ae=u.clientHeight-v.offsetTop-v.offsetHeight,Re=Math.max(Q,X+(ge?C:0)+ae+T),me=te+Re;l.style.height=me+"px"}else{const ge=S.length>0&&x===S[0].ref.current;l.style.top="0px";const Re=Math.max(W,F+v.offsetTop+(ge?R:0)+X)+J;l.style.height=Re+"px",v.scrollTop=te-W+v.offsetTop}l.style.margin=`${Ui}px 0`,l.style.minHeight=A+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,s.trigger,s.valueNode,l,u,v,x,y,s.dir,r]);tr(()=>b(),[b]);const[_,k]=p.useState();tr(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const j=p.useCallback(N=>{N&&g.current===!0&&(b(),w==null||w(),g.current=!1)},[b,w]);return i.jsx(Poe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:j,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:i.jsx(lt.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});yB.displayName=Eoe;var Toe="SelectPopperPosition",N1=p.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Ui,...s}=e,o=Ob(n);return i.jsx(Zx,{...o,...s,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});N1.displayName=Toe;var[Poe,NC]=bh(Hc,{}),C1="SelectViewport",xB=p.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,s=Wl(C1,n),o=NC(C1,n),l=It(t,s.onViewportChange),c=p.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(Tb.Slot,{scope:n,children:i.jsx(lt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ve(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const g=window.innerHeight-Ui*2,v=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),y=Math.max(v,x);if(y<g){const w=y+m,b=Math.min(g,w),_=w-b;h.style.height=b+"px",h.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});xB.displayName=C1;var bB="SelectGroup",[Ooe,Ioe]=bh(bB),Roe=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=fr();return i.jsx(Ooe,{scope:n,id:a,children:i.jsx(lt.div,{role:"group","aria-labelledby":a,...r,ref:t})})});Roe.displayName=bB;var wB="SelectLabel",jB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Ioe(wB,n);return i.jsx(lt.div,{id:a.id,...r,ref:t})});jB.displayName=wB;var _y="SelectItem",[Moe,_B]=bh(_y),kB=p.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:s,...o}=e,l=zl(_y,n),c=Wl(_y,n),u=l.value===r,[d,h]=p.useState(s??""),[f,m]=p.useState(!1),g=It(t,w=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,w,r,a)}),v=fr(),x=p.useRef("touch"),y=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Moe,{scope:n,value:r,disabled:a,textId:v,isSelected:u,onItemTextChange:p.useCallback(w=>{h(b=>b||((w==null?void 0:w.textContent)??"").trim())},[]),children:i.jsx(Tb.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:i.jsx(lt.div,{role:"option","aria-labelledby":v,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:Ve(o.onFocus,()=>m(!0)),onBlur:Ve(o.onBlur,()=>m(!1)),onClick:Ve(o.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:Ve(o.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:Ve(o.onPointerDown,w=>{x.current=w.pointerType}),onPointerMove:Ve(o.onPointerMove,w=>{var b;x.current=w.pointerType,a?(b=c.onItemLeave)==null||b.call(c):x.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ve(o.onPointerLeave,w=>{var b;w.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:Ve(o.onKeyDown,w=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&w.key===" "||(boe.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});kB.displayName=_y;var bf="SelectItemText",SB=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...s}=e,o=zl(bf,n),l=Wl(bf,n),c=_B(bf,n),u=koe(bf,n),[d,h]=p.useState(null),f=It(t,y=>h(y),c.onItemTextChange,y=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,y,c.value,c.disabled)}),m=d==null?void 0:d.textContent,g=p.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=u;return tr(()=>(v(g),()=>x(g)),[v,x,g]),i.jsxs(i.Fragment,{children:[i.jsx(lt.span,{id:c.textId,...s,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?tu.createPortal(s.children,o.valueNode):null]})});SB.displayName=bf;var NB="SelectItemIndicator",CB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return _B(NB,n).isSelected?i.jsx(lt.span,{"aria-hidden":!0,...r,ref:t}):null});CB.displayName=NB;var A1="SelectScrollUpButton",AB=p.forwardRef((e,t)=>{const n=Wl(A1,e.__scopeSelect),r=NC(A1,e.__scopeSelect),[a,s]=p.useState(!1),o=It(t,r.onScrollButtonChange);return tr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?i.jsx(TB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});AB.displayName=A1;var E1="SelectScrollDownButton",EB=p.forwardRef((e,t)=>{const n=Wl(E1,e.__scopeSelect),r=NC(E1,e.__scopeSelect),[a,s]=p.useState(!1),o=It(t,r.onScrollButtonChange);return tr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;s(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?i.jsx(TB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});EB.displayName=E1;var TB=p.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,s=Wl("SelectScrollButton",n),o=p.useRef(null),l=Pb(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),tr(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(lt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ve(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ve(a.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ve(a.onPointerLeave,()=>{c()})})}),Doe="SelectSeparator",PB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(lt.div,{"aria-hidden":!0,...r,ref:t})});PB.displayName=Doe;var T1="SelectArrow",Loe=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Ob(n),s=zl(T1,n),o=Wl(T1,n);return s.open&&o.position==="popper"?i.jsx(eb,{...a,...r,ref:t}):null});Loe.displayName=T1;var $oe="SelectBubbleInput",OB=p.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=p.useRef(null),s=It(r,a),o=SC(t);return p.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),i.jsx(lt.select,{...n,style:{...K$,...n.style},ref:s,defaultValue:t})});OB.displayName=$oe;function IB(e){return e===""||e===void 0}function RB(e){const t=er(e),n=p.useRef(""),r=p.useRef(0),a=p.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),s=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,s]}function MB(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let o=Foe(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function Foe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Uoe=lB,DB=uB,Boe=hB,zoe=fB,Woe=mB,LB=pB,qoe=xB,$B=jB,FB=kB,Hoe=SB,Koe=CB,UB=AB,BB=EB,zB=PB;const Qt=Uoe,Kt=Boe,Yt=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(DB,{ref:r,className:Pe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(zoe,{asChild:!0,children:i.jsx(Ta,{className:"h-4 w-4 opacity-50"})})]}));Yt.displayName=DB.displayName;const WB=p.forwardRef(({className:e,...t},n)=>i.jsx(UB,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(g4,{className:"h-4 w-4"})}));WB.displayName=UB.displayName;const qB=p.forwardRef(({className:e,...t},n)=>i.jsx(BB,{ref:n,className:Pe("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(Ta,{className:"h-4 w-4"})}));qB.displayName=BB.displayName;const Xt=p.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>i.jsx(Woe,{children:i.jsxs(LB,{ref:a,className:Pe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(WB,{}),i.jsx(qoe,{className:Pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(qB,{})]})}));Xt.displayName=LB.displayName;const Voe=p.forwardRef(({className:e,...t},n)=>i.jsx($B,{ref:n,className:Pe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Voe.displayName=$B.displayName;const st=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(FB,{ref:r,className:Pe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Koe,{children:i.jsx(gN,{className:"h-4 w-4"})})}),i.jsx(Hoe,{children:t})]}));st.displayName=FB.displayName;const Goe=p.forwardRef(({className:e,...t},n)=>i.jsx(zB,{ref:n,className:Pe("-mx-1 my-1 h-px bg-muted",e),...t}));Goe.displayName=zB.displayName;var d2=1,Yoe=.9,Xoe=.8,Joe=.17,Jw=.1,Qw=.999,Qoe=.9999,Zoe=.99,ele=/[\\\/_+.#"@\[\(\{&]/,tle=/[\\\/_+.#"@\[\(\{&]/g,nle=/[\s-]/,HB=/[\s-]/g;function P1(e,t,n,r,a,s,o){if(s===t.length)return a===e.length?d2:Zoe;var l=`${a},${s}`;if(o[l]!==void 0)return o[l];for(var c=r.charAt(s),u=n.indexOf(c,a),d=0,h,f,m,g;u>=0;)h=P1(e,t,n,r,u+1,s+1,o),h>d&&(u===a?h*=d2:ele.test(e.charAt(u-1))?(h*=Xoe,m=e.slice(a,u-1).match(tle),m&&a>0&&(h*=Math.pow(Qw,m.length))):nle.test(e.charAt(u-1))?(h*=Yoe,g=e.slice(a,u-1).match(HB),g&&a>0&&(h*=Math.pow(Qw,g.length))):(h*=Joe,a>0&&(h*=Math.pow(Qw,u-a))),e.charAt(u)!==t.charAt(s)&&(h*=Qoe)),(h<Jw&&n.charAt(u-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(u-1)!==r.charAt(s))&&(f=P1(e,t,n,r,u+1,s+2,o),f*Jw>h&&(h=f*Jw)),h>d&&(d=h),u=n.indexOf(c,u+1);return o[l]=d,d}function h2(e){return e.toLowerCase().replace(HB," ")}function rle(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,P1(e,t,h2(e),h2(t),0,0,{})}var Qh='[cmdk-group=""]',Zw='[cmdk-group-items=""]',ale='[cmdk-group-heading=""]',KB='[cmdk-item=""]',f2=`${KB}:not([aria-disabled="true"])`,O1="cmdk-item-select",Mu="data-value",ile=(e,t,n)=>rle(e,t,n),VB=p.createContext(void 0),Fp=()=>p.useContext(VB),GB=p.createContext(void 0),CC=()=>p.useContext(GB),YB=p.createContext(void 0),XB=p.forwardRef((e,t)=>{let n=Du(()=>{var R,C;return{search:"",value:(C=(R=e.value)!=null?R:e.defaultValue)!=null?C:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Du(()=>new Set),a=Du(()=>new Map),s=Du(()=>new Map),o=Du(()=>new Set),l=JB(e),{label:c,children:u,value:d,onValueChange:h,filter:f,shouldFilter:m,loop:g,disablePointerSelection:v=!1,vimBindings:x=!0,...y}=e,w=fr(),b=fr(),_=fr(),k=p.useRef(null),j=gle();Kc(()=>{if(d!==void 0){let R=d.trim();n.current.value=R,N.emit()}},[d]),Kc(()=>{j(6,L)},[]);let N=p.useMemo(()=>({subscribe:R=>(o.current.add(R),()=>o.current.delete(R)),snapshot:()=>n.current,setState:(R,C,W)=>{var Q,X,Z,te;if(!Object.is(n.current[R],C)){if(n.current[R]=C,R==="search")D(),P(),j(1,S);else if(R==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let J=document.getElementById(_);J?J.focus():(Q=document.getElementById(w))==null||Q.focus()}if(j(7,()=>{var J;n.current.selectedItemId=(J=U())==null?void 0:J.id,N.emit()}),W||j(5,L),((X=l.current)==null?void 0:X.value)!==void 0){let J=C??"";(te=(Z=l.current).onValueChange)==null||te.call(Z,J);return}}N.emit()}},emit:()=>{o.current.forEach(R=>R())}}),[]),O=p.useMemo(()=>({value:(R,C,W)=>{var Q;C!==((Q=s.current.get(R))==null?void 0:Q.value)&&(s.current.set(R,{value:C,keywords:W}),n.current.filtered.items.set(R,I(C,W)),j(2,()=>{P(),N.emit()}))},item:(R,C)=>(r.current.add(R),C&&(a.current.has(C)?a.current.get(C).add(R):a.current.set(C,new Set([R]))),j(3,()=>{D(),P(),n.current.value||S(),N.emit()}),()=>{s.current.delete(R),r.current.delete(R),n.current.filtered.items.delete(R);let W=U();j(4,()=>{D(),(W==null?void 0:W.getAttribute("id"))===R&&S(),N.emit()})}),group:R=>(a.current.has(R)||a.current.set(R,new Set),()=>{s.current.delete(R),a.current.delete(R)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:w,inputId:_,labelId:b,listInnerRef:k}),[]);function I(R,C){var W,Q;let X=(Q=(W=l.current)==null?void 0:W.filter)!=null?Q:ile;return R?X(R,n.current.search,C):0}function P(){if(!n.current.search||l.current.shouldFilter===!1)return;let R=n.current.filtered.items,C=[];n.current.filtered.groups.forEach(Q=>{let X=a.current.get(Q),Z=0;X.forEach(te=>{let J=R.get(te);Z=Math.max(J,Z)}),C.push([Q,Z])});let W=k.current;F().sort((Q,X)=>{var Z,te;let J=Q.getAttribute("id"),ie=X.getAttribute("id");return((Z=R.get(ie))!=null?Z:0)-((te=R.get(J))!=null?te:0)}).forEach(Q=>{let X=Q.closest(Zw);X?X.appendChild(Q.parentElement===X?Q:Q.closest(`${Zw} > *`)):W.appendChild(Q.parentElement===W?Q:Q.closest(`${Zw} > *`))}),C.sort((Q,X)=>X[1]-Q[1]).forEach(Q=>{var X;let Z=(X=k.current)==null?void 0:X.querySelector(`${Qh}[${Mu}="${encodeURIComponent(Q[0])}"]`);Z==null||Z.parentElement.appendChild(Z)})}function S(){let R=F().find(W=>W.getAttribute("aria-disabled")!=="true"),C=R==null?void 0:R.getAttribute(Mu);N.setState("value",C||void 0)}function D(){var R,C,W,Q;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let X=0;for(let Z of r.current){let te=(C=(R=s.current.get(Z))==null?void 0:R.value)!=null?C:"",J=(Q=(W=s.current.get(Z))==null?void 0:W.keywords)!=null?Q:[],ie=I(te,J);n.current.filtered.items.set(Z,ie),ie>0&&X++}for(let[Z,te]of a.current)for(let J of te)if(n.current.filtered.items.get(J)>0){n.current.filtered.groups.add(Z);break}n.current.filtered.count=X}function L(){var R,C,W;let Q=U();Q&&(((R=Q.parentElement)==null?void 0:R.firstChild)===Q&&((W=(C=Q.closest(Qh))==null?void 0:C.querySelector(ale))==null||W.scrollIntoView({block:"nearest"})),Q.scrollIntoView({block:"nearest"}))}function U(){var R;return(R=k.current)==null?void 0:R.querySelector(`${KB}[aria-selected="true"]`)}function F(){var R;return Array.from(((R=k.current)==null?void 0:R.querySelectorAll(f2))||[])}function M(R){let C=F()[R];C&&N.setState("value",C.getAttribute(Mu))}function T(R){var C;let W=U(),Q=F(),X=Q.findIndex(te=>te===W),Z=Q[X+R];(C=l.current)!=null&&C.loop&&(Z=X+R<0?Q[Q.length-1]:X+R===Q.length?Q[0]:Q[X+R]),Z&&N.setState("value",Z.getAttribute(Mu))}function E(R){let C=U(),W=C==null?void 0:C.closest(Qh),Q;for(;W&&!Q;)W=R>0?mle(W,Qh):ple(W,Qh),Q=W==null?void 0:W.querySelector(f2);Q?N.setState("value",Q.getAttribute(Mu)):T(R)}let $=()=>M(F().length-1),A=R=>{R.preventDefault(),R.metaKey?$():R.altKey?E(1):T(1)},B=R=>{R.preventDefault(),R.metaKey?M(0):R.altKey?E(-1):T(-1)};return p.createElement(lt.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:R=>{var C;(C=y.onKeyDown)==null||C.call(y,R);let W=R.nativeEvent.isComposing||R.keyCode===229;if(!(R.defaultPrevented||W))switch(R.key){case"n":case"j":{x&&R.ctrlKey&&A(R);break}case"ArrowDown":{A(R);break}case"p":case"k":{x&&R.ctrlKey&&B(R);break}case"ArrowUp":{B(R);break}case"Home":{R.preventDefault(),M(0);break}case"End":{R.preventDefault(),$();break}case"Enter":{R.preventDefault();let Q=U();if(Q){let X=new Event(O1);Q.dispatchEvent(X)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:O.inputId,id:O.labelId,style:yle},c),Ib(e,R=>p.createElement(GB.Provider,{value:N},p.createElement(VB.Provider,{value:O},R))))}),sle=p.forwardRef((e,t)=>{var n,r;let a=fr(),s=p.useRef(null),o=p.useContext(YB),l=Fp(),c=JB(e),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;Kc(()=>{if(!u)return l.item(a,o==null?void 0:o.id)},[u]);let d=QB(a,s,[e.value,e.children,s],e.keywords),h=CC(),f=Ol(j=>j.value&&j.value===d.current),m=Ol(j=>u||l.filter()===!1?!0:j.search?j.filtered.items.get(a)>0:!0);p.useEffect(()=>{let j=s.current;if(!(!j||e.disabled))return j.addEventListener(O1,g),()=>j.removeEventListener(O1,g)},[m,e.onSelect,e.disabled]);function g(){var j,N;v(),(N=(j=c.current).onSelect)==null||N.call(j,d.current)}function v(){h.setState("value",d.current,!0)}if(!m)return null;let{disabled:x,value:y,onSelect:w,forceMount:b,keywords:_,...k}=e;return p.createElement(lt.div,{ref:jo(s,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!f,"data-disabled":!!x,"data-selected":!!f,onPointerMove:x||l.getDisablePointerSelection()?void 0:v,onClick:x?void 0:g},e.children)}),ole=p.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...s}=e,o=fr(),l=p.useRef(null),c=p.useRef(null),u=fr(),d=Fp(),h=Ol(m=>a||d.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);Kc(()=>d.group(o),[]),QB(o,l,[e.value,e.heading,c]);let f=p.useMemo(()=>({id:o,forceMount:a}),[a]);return p.createElement(lt.div,{ref:jo(l,t),...s,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&p.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),Ib(e,m=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},p.createElement(YB.Provider,{value:f},m))))}),lle=p.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=p.useRef(null),s=Ol(o=>!o.search);return!n&&!s?null:p.createElement(lt.div,{ref:jo(a,t),...r,"cmdk-separator":"",role:"separator"})}),cle=p.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,s=CC(),o=Ol(u=>u.search),l=Ol(u=>u.selectedItemId),c=Fp();return p.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),p.createElement(lt.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:u=>{a||s.setState("search",u.target.value),n==null||n(u.target.value)}})}),ule=p.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,s=p.useRef(null),o=p.useRef(null),l=Ol(u=>u.selectedItemId),c=Fp();return p.useEffect(()=>{if(o.current&&s.current){let u=o.current,d=s.current,h,f=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let m=u.offsetHeight;d.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return f.observe(u),()=>{cancelAnimationFrame(h),f.unobserve(u)}}},[]),p.createElement(lt.div,{ref:jo(s,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:c.listId},Ib(e,u=>p.createElement("div",{ref:jo(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),dle=p.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:s,container:o,...l}=e;return p.createElement(nC,{open:n,onOpenChange:r},p.createElement(rC,{container:o},p.createElement(_b,{"cmdk-overlay":"",className:a}),p.createElement(kb,{"aria-label":e.label,"cmdk-dialog":"",className:s},p.createElement(XB,{ref:t,...l}))))}),hle=p.forwardRef((e,t)=>Ol(n=>n.filtered.count===0)?p.createElement(lt.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),fle=p.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...s}=e;return p.createElement(lt.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Ib(e,o=>p.createElement("div",{"aria-hidden":!0},o)))}),Ba=Object.assign(XB,{List:ule,Item:sle,Input:cle,Group:ole,Separator:lle,Dialog:dle,Empty:hle,Loading:fle});function mle(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function ple(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function JB(e){let t=p.useRef(e);return Kc(()=>{t.current=e}),t}var Kc=typeof window>"u"?p.useEffect:p.useLayoutEffect;function Du(e){let t=p.useRef();return t.current===void 0&&(t.current=e()),t}function Ol(e){let t=CC(),n=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,n,n)}function QB(e,t,n,r=[]){let a=p.useRef(),s=Fp();return Kc(()=>{var o;let l=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():a.current}})(),c=r.map(u=>u.trim());s.value(e,l,c),(o=t.current)==null||o.setAttribute(Mu,l),a.current=l}),a}var gle=()=>{let[e,t]=p.useState(),n=Du(()=>new Map);return Kc(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function vle(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Ib({asChild:e,children:t},n){return e&&p.isValidElement(t)?p.cloneElement(vle(t),{ref:t.ref},n(t.props.children)):n(t)}var yle={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const km=p.forwardRef(({className:e,...t},n)=>i.jsx(Ba,{ref:n,className:Pe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));km.displayName=Ba.displayName;const Sm=p.forwardRef(({className:e,...t},n)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(ns,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(Ba.Input,{ref:n,className:Pe("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Sm.displayName=Ba.Input.displayName;const ZB=p.forwardRef(({className:e,...t},n)=>i.jsx(Ba.List,{ref:n,className:Pe("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));ZB.displayName=Ba.List.displayName;const Nm=p.forwardRef((e,t)=>i.jsx(Ba.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Nm.displayName=Ba.Empty.displayName;const Cm=p.forwardRef(({className:e,...t},n)=>i.jsx(Ba.Group,{ref:n,className:Pe("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Cm.displayName=Ba.Group.displayName;const xle=p.forwardRef(({className:e,...t},n)=>i.jsx(Ba.Separator,{ref:n,className:Pe("-mx-1 h-px bg-border",e),...t}));xle.displayName=Ba.Separator.displayName;const Am=p.forwardRef(({className:e,...t},n)=>i.jsx(Ba.Item,{ref:n,className:Pe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));Am.displayName=Ba.Item.displayName;let ej=!1,tj=null;function Fd(){return ej?Promise.resolve():(tj||(tj=ce.auth.getSession().then(()=>{ej=!0}).catch(()=>{ej=!0})),tj)}const ql=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null);let o=!1;const l=b=>{o=b},c=()=>{try{const b=localStorage.getItem("app.cachedAgents");if(!b)return!1;const _=JSON.parse(b);if(Array.isArray(_))return t(_),!0}catch{}return!1},u=b=>{const _=(b==null?void 0:b.filter(k=>k!=null))||[];return _.includes("master_agent")?"master_agent":_.includes("super_agent")?"super_agent":_.includes("agent")?"agent":null},d=6e4;globalThis.__agentsCache||(globalThis.__agentsCache={data:null,ts:0,inFlight:null});const h=globalThis.__agentsCache,f=b=>(b||[]).map(_=>{var N;const k=((N=_.roles)==null?void 0:N.filter(O=>O!=null))||[],j=u(_.roles||[]);return{user_id:_.id,email:_.email,display_name:_.display_name,avatar_url:_.avatar_url,timezone:_.timezone,created_at:_.created_at,roles:k,primaryRole:j,status:"Active",super_agent_id:null}}),m=async()=>(h.inFlight||(h.inFlight=(async()=>{await Fd();const{data:b,error:_}=await ce.from("v_users").select("*").order("created_at",{ascending:!1});if(_)throw _;let k=f(b||[]);try{const{data:j}=await ce.from("super_agent_members").select("agent_user_id, super_agent_id");if(j&&Array.isArray(j)){const N={};j.forEach(O=>{N[O.agent_user_id]=O.super_agent_id}),k=k.map(O=>O.primaryRole==="agent"?{...O,super_agent_id:N[O.user_id]||null}:O)}}catch{}h.data=k,h.ts=Date.now(),h.inFlight=null;try{localStorage.setItem("app.cachedAgents",JSON.stringify(k))}catch{}return k})().catch(b=>{throw h.inFlight=null,b})),h.inFlight),g=async()=>h.data&&Date.now()-h.ts<d?h.data:await m(),v=async b=>{try{r(!0),s(null),b!=null&&b.force&&(h.ts=0);const _=await g();t(_)}catch(_){console.error("Error fetching human agents:",_),s("Failed to fetch human agents"),t([])}finally{r(!1)}},x=async b=>{var _,k;try{s(null);const j=b.email.trim().toLowerCase();if(b.role==="agent"&&!b.super_agent_id)throw new Error("Agents must be assigned to a super agent before they can be created.");const{data:N,error:O}=await ce.from("v_human_agents").select("user_id, confirmation_status").ilike("email",j).maybeSingle();if(O)throw O;if(N){const D=(()=>{switch(N.confirmation_status){case"accepted":return"assigned to an active member";case"waiting":return"pending for an existing invite";case"expired":return"associated with an expired invite";default:return"in use"}})();throw new Error(`The email ${j} is already ${D}. Choose a different email or manage the existing user instead.`)}const{data:I,error:P}=await ce.functions.invoke("admin-create-user",{headers:{"x-client-origin":typeof window<"u"?window.location.origin:""},body:{email:j,full_name:b.full_name,role:b.role,super_agent_id:b.super_agent_id??null,org_id:b.org_id??null}});if(P)throw P;try{const D=(I==null?void 0:I.id)||(I==null?void 0:I.user_id)||((_=I==null?void 0:I.user)==null?void 0:_.id)||null;D&&await ce.from("users_profile").update({is_2fa_email_enabled:o}).eq("user_id",D)}catch{}await v({force:!0});try{await Jt({action:"user.create",resource:"user",resourceId:(I==null?void 0:I.id)||null,context:b})}catch{}return{id:(I==null?void 0:I.id)||(I==null?void 0:I.user_id)||((k=I==null?void 0:I.user)==null?void 0:k.id)||null}}catch(j){throw console.error("Error creating agent:",j),s(j instanceof Error?j.message:"Failed to create agent"),j}},y=async(b,_)=>{try{s(null);const{data:k,error:j}=await ce.from("roles").select("id").eq("name",_).single();if(j)throw j;const{error:N}=await ce.from("user_roles").delete().eq("user_id",b);if(N)throw N;const{error:O}=await ce.from("user_roles").insert([{user_id:b,role_id:k.id}]);if(O)throw O;await v({force:!0});try{await Jt({action:"user.update_role",resource:"user",resourceId:b,context:{role:_}})}catch{}}catch(k){throw console.error("Error updating agent role:",k),s(k instanceof Error?k.message:"Failed to update agent role"),k}},w=async b=>{try{s(null);const{data:_,error:k}=await ce.from("v_human_agents").select("role_name").eq("user_id",b).maybeSingle();if(k)throw k;if(_!=null&&_.role_name&&String(_.role_name).toLowerCase().includes("master"))throw new Error("Master agent tidak dapat dihapus.");const{error:j}=await ce.functions.invoke("admin-delete-user",{body:{user_id:b}});if(j)throw j;await v({force:!0});try{await Jt({action:"user.delete",resource:"user",resourceId:b})}catch{}}catch(_){throw console.error("Error deleting agent:",_),s(_ instanceof Error?_.message:"Failed to delete agent"),_}};return p.useEffect(()=>{c()&&r(!1),v()},[]),{agents:e,teams:[],loading:n,error:a,fetchAgents:v,fetchTeams:()=>Promise.resolve(),createAgent:x,updateAgentStatus:()=>Promise.resolve(),updateAgentRole:y,deleteAgent:w,createTeam:()=>Promise.resolve(),addAgentToTeam:()=>Promise.resolve(),removeAgentFromTeam:()=>Promise.resolve(),setEnable2FAFlagForCreate:l}},ble=({value:e,onFilterChange:t})=>{var k,j,N,O;const[n,r]=p.useState(!1),[a,s]=p.useState(),[o,l]=p.useState(),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[f,m]=p.useState([]),[g,v]=p.useState({dateRange:{},label:[],agent:"",status:"",resolvedBy:"",platformId:"",channelType:"all"}),{agents:x}=ql();p.useEffect(()=>{e&&(v(I=>({...I,...e,dateRange:e.dateRange??I.dateRange})),e.dateRange&&(s(e.dateRange.from),l(e.dateRange.to)))},[n,e==null?void 0:e.agent,e==null?void 0:e.status,e==null?void 0:e.resolvedBy,e==null?void 0:e.platformId,e==null?void 0:e.channelType,(k=e==null?void 0:e.dateRange)!=null&&k.from?e.dateRange.from.getTime():0,(j=e==null?void 0:e.dateRange)!=null&&j.to?e.dateRange.to.getTime():0]),p.useEffect(()=>{let I=!0;return(async()=>{try{const{data:S,error:D}=await _t.from("channels").select("id, display_name, provider, type").order("created_at",{ascending:!1});if(!I)return;if(D)throw D;m(S||[])}catch{if(!I)return;m([])}})(),()=>{I=!1}},[]);const y=(I,P)=>{const S={...g,[I]:P};v(S)},w=I=>{v(P=>({...P,channelType:I,platformId:""}))},b=()=>{const I={...g,dateRange:{from:a,to:o}};t(I),r(!1)},_=()=>{const I={dateRange:{},label:[],agent:"",status:"",resolvedBy:"",platformId:"",channelType:"all"};v(I),s(void 0),l(void 0),t(I)};return i.jsxs(gn,{open:n,onOpenChange:r,children:[i.jsx(oC,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(b4,{className:"h-4 w-4"})})}),i.jsxs(ln,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[i.jsx(cn,{children:i.jsx(un,{children:"Filter"})}),i.jsxs("div",{className:"grid gap-6 py-4",children:[i.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date Range"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Ns,{children:[i.jsx(Cs,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:Pe("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[i.jsx(Lc,{className:"mr-2 h-4 w-4"}),a?So(a,"dd-MM-yyyy"):"DD-MM-YYYY"]})}),i.jsx(Ji,{className:"w-auto p-0",align:"start",children:i.jsx(_m,{mode:"single",selected:a,onSelect:s,initialFocus:!0,className:"pointer-events-auto"})})]}),i.jsx("span",{className:"self-center text-muted-foreground",children:"-"}),i.jsxs(Ns,{children:[i.jsx(Cs,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:Pe("w-full justify-start text-left font-normal",!o&&"text-muted-foreground"),children:[i.jsx(Lc,{className:"mr-2 h-4 w-4"}),o?So(o,"dd-MM-yyyy"):"DD-MM-YYYY"]})}),i.jsx(Ji,{className:"w-auto p-0",align:"start",children:i.jsx(_m,{mode:"single",selected:o,onSelect:l,initialFocus:!0,className:"pointer-events-auto"})})]})]})]})}),i.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Resolved By"}),i.jsxs(Ns,{open:d,onOpenChange:h,children:[i.jsx(Cs,{asChild:!0,children:i.jsx(ne,{variant:"outline",role:"combobox",className:"w-full justify-between",children:((N=x.find(I=>I.user_id===g.resolvedBy))==null?void 0:N.display_name)||"Choose Agent"})}),i.jsx(Ji,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",sideOffset:4,children:i.jsxs(km,{children:[i.jsx(Sm,{placeholder:"Search Resolved By Agent"}),i.jsx(Nm,{children:"No agent found."}),i.jsx(Cm,{children:x.map(I=>i.jsx(Am,{onSelect:()=>{y("resolvedBy",I.user_id),h(!1)},children:i.jsx("span",{className:"ml-2",children:I.display_name||"Unknown"})},I.user_id))})]})})]})]})}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Agent"}),i.jsxs(Ns,{open:c,onOpenChange:u,children:[i.jsx(Cs,{asChild:!0,children:i.jsx(ne,{variant:"outline",role:"combobox",className:"w-full justify-between",children:((O=x.find(I=>I.user_id===g.agent))==null?void 0:O.display_name)||"Choose Agent"})}),i.jsx(Ji,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",sideOffset:4,children:i.jsxs(km,{children:[i.jsx(Sm,{placeholder:"Search Handled By Agent"}),i.jsx(Nm,{children:"No agent found."}),i.jsx(Cm,{children:x.map(I=>i.jsx(Am,{onSelect:()=>{y("agent",I.user_id),u(!1)},children:i.jsx("span",{className:"ml-2",children:I.display_name||"Unknown"})},I.user_id))})]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Channel Type"}),i.jsxs(Qt,{value:g.channelType,onValueChange:w,children:[i.jsx(Yt,{children:i.jsx(Kt,{placeholder:"All Channels"})}),i.jsxs(Xt,{children:[i.jsx(st,{value:"all",children:"All Channels"}),i.jsx(st,{value:"whatsapp",children:"WhatsApp"}),i.jsx(st,{value:"telegram",children:"Telegram"}),i.jsx(st,{value:"web",children:"Live Chat"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Platform"}),i.jsxs(Qt,{value:g.platformId,onValueChange:I=>y("platformId",I),disabled:!g.channelType||g.channelType==="all",children:[i.jsx(Yt,{children:i.jsx(Kt,{placeholder:g.channelType&&g.channelType!=="all"?"Choose Platform":"Select channel type first"})}),i.jsxs(Xt,{children:[i.jsx(st,{value:"all",children:"All Platforms"}),(()=>{const I=g.channelType&&g.channelType!=="all"?f.filter(P=>String(P.provider||"").toLowerCase()===String(g.channelType).toLowerCase()):[];return!g.channelType||g.channelType==="all"?null:I.length===0?i.jsx(st,{value:"__none",disabled:!0,children:"No platforms found for this channel type"}):I.map(P=>i.jsx(st,{value:P.id,children:P.display_name??"Unknown"},P.id))})()]})]})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),i.jsxs(Qt,{value:g.status,onValueChange:I=>y("status",I),children:[i.jsx(Yt,{children:i.jsx(Kt,{placeholder:"All Statuses"})}),i.jsxs(Xt,{children:[i.jsx(st,{value:"all",children:"All Statuses"}),i.jsx(st,{value:"open",children:"Open"}),i.jsx(st,{value:"pending",children:"Pending"}),i.jsx(st,{value:"closed",children:"Closed"})]})]})]})})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(ne,{variant:"outline",onClick:_,children:"Reset"}),i.jsx(ne,{onClick:b,children:"Apply"})]})]})]})},wle={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co",VITE_WEBHOOK_BASE_URL:"https://primary-production-376c.up.railway.app/webhook"},mo=wle??{},Su=((mo==null?void 0:mo.VITE_WEBHOOK_BASE_URL)||"https://primary-production-376c.up.railway.app/webhook").replace(/\/$/,""),jle=(mo==null?void 0:mo.VITE_WEBHOOK_PROXY_SLUG)||"proxy-n8n",m2=mo==null?void 0:mo.VITE_WEBHOOK_PROXY_BASE_URL,_le=m2?m2.replace(/\/$/,""):`${El}/functions/v1/${jle}`.replace(/\/$/,""),nj=_le,Dr="route:",p2=e=>e.startsWith("/")?e:`/${e}`,Ev=e=>e.startsWith(Dr),rj=e=>Ev(e)?e.slice(Dr.length):null,kle=e=>{try{const t=new URL(e),n=t.hostname.endsWith(".supabase.co"),a=(t.pathname||"").includes("/functions/");return n&&!a}catch{return!1}},Sn={BASE_URL:Su,LEGACY_BASE_URL:Su,PROXY_BASE_URL:nj,ROUTE_PREFIX:Dr,ENDPOINTS:{WHATSAPP:{GET_LOGIN_QR:`${Dr}session.get_login_qr`,GET_SESSIONS:"/get_sessions",LOGOUT_SESSION:`${Dr}session.logout`,CREATE_PLATFORM:"/whatsapp/create-platform",CREATE_SESSION:`${Dr}session.create`,DISCONNECT_SESSION:`${Dr}session.logout`,DELETE_SESSION:`${Dr}session.delete`},TELEGRAM:{CREATE_PLATFORM:`${Dr}telegram.create_platform`,SEND_MESSAGE:`${Dr}telegram.send_message`,DELETE_WEBHOOK:`${Dr}telegram.delete_webhook`,VERIFY_TOKEN:`${El}/functions/v1/telegram-verify-token`},AI_AGENT:{CHAT_SETTINGS:`${Dr}chat.settings`,CHAT_TEST:`${Dr}chat.test`},KNOWLEDGE:{FILE_UPLOAD:"/knowledge/file-upload-dev",FILE_DELETE:`${Dr}knowledge.file_delete`},MESSAGE:{DEFAULT:"/send-message",SEND_MESSAGE:"/send-message",WHATSAPP_SEND_MESSAGE:`${Dr}whatsapp.send_message`,TELEGRAM_SEND_MESSAGE:`${Dr}telegram.send_message`,WEB_SEND_MESSAGE:`${Dr}web.send_message`}},buildUrl:(e,t={})=>{if(!e)throw new Error("Endpoint must be provided");if(e.startsWith("http"))return e;if(Ev(e)){const n=rj(e);if(!n)throw new Error("Invalid proxy route key");return`${!!t.forceLegacy&&!kle(Su)?Su:nj}/${n}`}return`${Su}${p2(e)}`},buildTestUrl:e=>{if(Ev(e)){const n=rj(e);if(!n)throw new Error("Invalid proxy route key");return`${nj}/${n}`}return`${Su.replace("/webhook","/webhook-test")}${p2(e)}`},isProxyEndpoint:Ev,extractRouteKey:rj},e6={telegram:Sn.ENDPOINTS.MESSAGE.TELEGRAM_SEND_MESSAGE,whatsapp:Sn.ENDPOINTS.MESSAGE.WHATSAPP_SEND_MESSAGE,web:Sn.ENDPOINTS.MESSAGE.WEB_SEND_MESSAGE},t6=e=>{const t=(e||"").toLowerCase();return t==="wa"||t==="waha"||t==="whatsapp_cloud"?"whatsapp":t==="tg"||t==="tele"?"telegram":t},$g=e=>{const t=t6(e),n=e6[t]||Sn.ENDPOINTS.MESSAGE.DEFAULT;Sn.ENDPOINTS.MESSAGE.SEND_MESSAGE=n},Sle=e=>{const t=t6(e);return e6[t]||Sn.ENDPOINTS.MESSAGE.DEFAULT},Nle={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co",VITE_WEBHOOK_BASE_URL:"https://primary-production-376c.up.railway.app/webhook"},Cle=()=>{const e=Nle??{};return(e==null?void 0:e.VITE_SUPABASE_ANON_KEY)??null};async function ji(e,t={},n={}){const{forceLegacy:r=!1,skipAuth:a=!1}=n,s=Sn.buildUrl(e,{forceLegacy:r}),o=s.startsWith(Sn.PROXY_BASE_URL),l=r&&!o,c=new Headers(t.headers),u=s.startsWith(El)&&s.includes("/functions/v1/"),d=!l&&Sn.isProxyEndpoint(e)||u||o;if(d&&!a&&!c.has("Authorization"))try{const{data:{session:f}}=await ce.auth.getSession(),m=f==null?void 0:f.access_token;m&&c.set("Authorization",`Bearer ${m}`)}catch{}const h=Cle();return h&&(d||o||u||s.startsWith(El))&&!c.has("apikey")&&c.set("apikey",h),fetch(s,{...t,headers:c})}let g2=0;const Ale=1e3,Fg=(e="incoming")=>{try{if(!(localStorage.getItem("audioNotifications")!=="false")||document.visibilityState!=="visible")return;const n=Date.now();if(n-g2<Ale)return;g2=n;const r=new Audio;e==="incoming"?r.src="/tones/mixkit-message-pop-alert-2354.mp3":r.src="/tones/mixkit-long-pop-2358.wav",r.volume=.7,r.play().catch(()=>{})}catch{}},Ele=()=>{const[e,t]=p.useState([]),[n,r]=p.useState([]),[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState(null),d=p.useRef({}),[h,f]=p.useState({}),m=p.useRef(null),g=(M=400)=>{try{m.current&&(clearTimeout(m.current),m.current=null)}catch{}m.current=window.setTimeout(()=>{document.visibilityState==="visible"&&(a||y(void 0,{silent:!0}))},M)},v=M=>{const T=((M==null?void 0:M.status)||"").toLowerCase();return{assigned:!(T==="closed")&&(T==="pending"||T==="assigned"),assignee_user_id:(M==null?void 0:M.assignee_user_id)??null,handled_by_super_agent:!1}},x=(M,T)=>{t(E=>{const A=E.map(B=>{var R;if(B.id===M){const C=((R=B.channel)==null?void 0:R.super_agent_id)??B.super_agent_id??null,W=v({ai_access_enabled:B.ai_access_enabled,assigned_at:B.assigned_at,assignee_user_id:B.assignee_user_id,channel_super_agent_id:C,status:B.status,ai_handoff_at:B.ai_handoff_at??null}),Q=W.assignee_user_id?W.assignee_user_id===C?B.super_agent_name||B.assignee_name||"":B.assignee_name||"":"";return{...B,last_message_preview:((T==null?void 0:T.body)||"").toString().replace(/\s+/g," ").trim()||"",last_message_direction:(T==null?void 0:T.direction)??null,last_message_role:(T==null?void 0:T.role)??null,last_msg_at:(T==null?void 0:T.created_at)||B.last_msg_at,unreplied:(T==null?void 0:T.direction)==="in"||(T==null?void 0:T.role)==="user",assigned:W.assigned,assignee_user_id:W.assignee_user_id,assignee_name:Q,status:B.status}}return B}).sort((B,R)=>{const C=new Date(B.last_msg_at??B.created_at??0).getTime();return new Date(R.last_msg_at??R.created_at??0).getTime()-C});return console.log("Re-sorted conversations after message update"),A})},y=async(M,T={})=>{try{T.silent||s(!0),l(null),await Fd();const E=M??d.current;M&&(d.current=M,f(M));let $=_t.from("threads").select(`
          *,
          contacts(name, phone, email),
          channels!inner(display_name, type, provider, external_id, logo_url, profile_photo_url, super_agent_id),
          messages(id, body, role, direction, created_at, seq)
        `).order("last_msg_at",{ascending:!1}).order("created_at",{foreignTable:"messages",ascending:!1}).limit(1,{foreignTable:"messages"});const{dateRange:A,status:B,agent:R,resolvedBy:C,inbox:W,channelType:Q,platformId:X}=E;B&&B!=="all"&&B!==""&&($=$.eq("status",B)),R&&R!=="all"&&R!==""&&($=$.eq("assignee_user_id",R)),C&&C!=="all"&&C!==""&&($=$.eq("resolved_by_user_id",C)),W&&W!=="all"&&W!==""&&($=$.eq("channels.provider",W)),Q&&Q!=="all"&&Q!==""&&($=$.eq("channels.provider",Q)),X&&X!=="all"&&X!==""&&($=$.eq("channel_id",X));const Z=new Promise((K,de)=>{const $e=setTimeout(()=>{clearTimeout($e),de(new Error("timeout"))},8e3)}),{data:te,error:J}=await Promise.race([$,Z]);if(J)throw J;const ie=Array.from(new Set((te||[]).flatMap(K=>{var de;return[K.assigned_by_user_id,K.assignee_user_id,K.resolved_by_user_id,(de=K.channels)==null?void 0:de.super_agent_id]}).filter(Boolean)));let ge={};if(ie.length>0){const{data:K,error:de}=await _t.from("users_profile").select("user_id, display_name").in("user_id",ie);if(de)throw de;ge=Object.fromEntries((K||[]).map($e=>[$e.user_id,$e.display_name||""]))}let Re=(te||[]).map(K=>{var se,ve,oe,Xe,ke,rt,bt,ue,Se,we,Te,je,Ee,Ue,H;const de=Array.isArray(K.messages)&&K.messages.length>0?K.messages[0]:null,$e=((de==null?void 0:de.body)||"").toString().replace(/\s+/g," ").trim(),nt=(de==null?void 0:de.direction)??null,Ye=(de==null?void 0:de.role)??null,ft=nt==="in"||Ye==="user",Ze=((se=K.channels)==null?void 0:se.super_agent_id)||null,ut=v({ai_access_enabled:K.ai_access_enabled,assigned_at:K.assigned_at,assignee_user_id:K.assignee_user_id,channel_super_agent_id:Ze,status:K.status,ai_handoff_at:K.ai_handoff_at}),ee=Ze&&ge[Ze]||"",qe=ut.assignee_user_id?ut.assignee_user_id===Ze?ee:ge[ut.assignee_user_id]||"":"",dt=K.status||"open";return{...K,contact_name:((ve=K.contacts)==null?void 0:ve.name)||"Unknown Contact",contact_phone:((oe=K.contacts)==null?void 0:oe.phone)||"",contact_email:((Xe=K.contacts)==null?void 0:Xe.email)||"",channel_name:((ke=K.channels)==null?void 0:ke.display_name)||"Unknown Channel",channel_type:((rt=K.channels)==null?void 0:rt.type)||"web",channel_provider:((bt=K.channels)==null?void 0:bt.provider)||void 0,channel:{provider:(ue=K.channels)==null?void 0:ue.provider,type:(Se=K.channels)==null?void 0:Se.type,display_name:(we=K.channels)==null?void 0:we.display_name,external_id:(Te=K.channels)==null?void 0:Te.external_id,logo_url:((je=K.channels)==null?void 0:je.logo_url)||null,profile_photo_url:((Ee=K.channels)==null?void 0:Ee.profile_photo_url)||null,super_agent_id:Ze},channel_logo_url:((Ue=K.channels)==null?void 0:Ue.logo_url)||((H=K.channels)==null?void 0:H.profile_photo_url)||null,last_message_preview:$e||"",last_message_direction:nt,last_message_role:Ye,last_msg_at:(de==null?void 0:de.created_at)||K.last_msg_at,message_count:0,assigned:ut.assigned,assigned_by_name:K.assigned_by_user_id&&ge[K.assigned_by_user_id]||"",assignee_name:qe,assignee_user_id:ut.assignee_user_id,resolved_by_name:K.resolved_by_user_id&&ge[K.resolved_by_user_id]||"",ai_access_enabled:K.ai_access_enabled??!1,super_agent_id:Ze,super_agent_name:ee,status:dt,unreplied:ft}});if(A!=null&&A.from){const K=Pl(A.from).getTime();Re=Re.filter(de=>new Date(de.last_msg_at).getTime()>=K)}if(A!=null&&A.to){const K=OU(A.to).getTime();Re=Re.filter(de=>new Date(de.last_msg_at).getTime()<=K)}W&&W!=="all"&&W!==""&&(Re=Re.filter(K=>{var de;return String(K.channel_provider||((de=K.channel)==null?void 0:de.provider)||"").toLowerCase()===String(W).toLowerCase()})),Q&&Q!=="all"&&Q!==""&&(Re=Re.filter(K=>{var de;return String(K.channel_provider||((de=K.channel)==null?void 0:de.provider)||"").toLowerCase()===String(Q).toLowerCase()})),X&&X!=="all"&&X!==""&&(Re=Re.filter(K=>String(K.channel_id||"")===String(X)));const me=Re.sort((K,de)=>{const $e=new Date(K.last_msg_at??K.created_at??0).getTime();return new Date(de.last_msg_at??de.created_at??0).getTime()-$e});t(me)}catch(E){console.error("Error fetching conversations:",E),l(E instanceof Error?E.message:"Failed to fetch conversations")}finally{s(!1)}},w=M=>{M!=null&&M.id&&t(T=>{const E=T.findIndex(C=>C.id===M.id);if(E===-1)return T;const $=T[E],A=v({ai_access_enabled:M.ai_access_enabled??$.ai_access_enabled,assigned_at:M.assigned_at??$.assigned_at,status:M.status??$.status,ai_handoff_at:M.ai_handoff_at??$.ai_handoff_at??null}),B={...$,status:M.status??$.status,assignee_user_id:M.assignee_user_id??$.assignee_user_id,collaborator_user_id:M.collaborator_user_id??$.collaborator_user_id,assigned_at:M.assigned_at??$.assigned_at,resolved_at:M.resolved_at??$.resolved_at,resolved_by_user_id:M.resolved_by_user_id??$.resolved_by_user_id,ai_access_enabled:M.ai_access_enabled??$.ai_access_enabled,last_msg_at:M.last_msg_at??$.last_msg_at,assigned:A.assigned,account_id:M.account_id??$.account_id??null},R=[...T];return R[E]=B,R.sort((C,W)=>{const Q=new Date(C.last_msg_at??C.created_at??0).getTime();return new Date(W.last_msg_at??W.created_at??0).getTime()-Q}),R})},b=p.useCallback(async M=>{var T;try{l(null);const{data:E,error:$}=await ce.from("messages").select(`
          id,
          thread_id,
          direction,
          role,
          type,
          body,
          payload,
          actor_kind,
          actor_id,
          seq,
          in_reply_to,
          edited_at,
          edit_reason,
          created_at
        `).eq("thread_id",M).order("seq",{ascending:!0});if($)throw $;const{data:A}=await ce.from("threads").select(`
          contacts(name, phone, email)
        `).eq("id",M).maybeSingle(),B=((T=A==null?void 0:A.contacts)==null?void 0:T.name)||"Unknown Contact",R=(E||[]).map(C=>{var W;return{...C,contact_name:B,contact_avatar:((W=B[0])==null?void 0:W.toUpperCase())||"U"}});r(R),u(M)}catch(E){console.error("Error fetching messages:",E),l(E instanceof Error?E.message:"Failed to fetch messages")}},[]),_=async(M,T,E="assistant")=>{var $,A;try{l(null);const{data:B,error:R}=await ce.from("threads").select("channel_id, contact_id, channels(provider)").eq("id",M).single();if(R)throw R;const C={thread_id:M,direction:"out",role:E,type:"text",body:T,payload:{},actor_kind:"agent",actor_id:null},Q={id:`tmp_${Math.random().toString(36).slice(2)}`,thread_id:M,direction:"out",role:E,type:"text",body:T,payload:{},actor_kind:"agent",actor_id:null,seq:0,in_reply_to:null,edited_at:null,edit_reason:null,created_at:new Date().toISOString(),contact_name:"",contact_avatar:"A",_status:"pending"};r(ie=>[...ie,Q]);const{data:X,error:Z}=await ce.from("messages").insert([C]).select().single();if(Z)throw Z;const{data:te,error:J}=await ce.from("contacts").select("phone, external_id").eq("id",B.contact_id).single();J&&console.warn("Error fetching contact details:",J);try{const ie=e.find(ae=>ae.id===M),ge=(($=ie==null?void 0:ie.channel)==null?void 0:$.provider)||((A=B==null?void 0:B.channels)==null?void 0:A.provider);if(ge&&ge.toLowerCase()!=="web"){const ae=Sle(ge),Re={channel_id:B.channel_id,contact_id:B.contact_id,contact_phone:(te==null?void 0:te.phone)||null,external_id:(te==null?void 0:te.external_id)||null,text:T,type:"text",direction:"out",role:E},me=await ji(ae,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Re)});me.ok||console.warn("Webhook call failed:",me.status,me.statusText)}}catch(ie){console.error("Error calling webhook:",ie)}await b(M),x(M,{body:T,direction:"out",role:E,created_at:new Date().toISOString()});try{await Jt({action:"message.send",resource:"message",resourceId:(X==null?void 0:X.id)??null,context:{thread_id:M,role:E}})}catch{}return X}catch(B){throw console.error("Error sending message:",B),l(B instanceof Error?B.message:"Failed to send message"),r(R=>{const C=[...R];for(let W=C.length-1;W>=0;W--)if(C[W]._status==="pending"){C[W]._status="error";break}return C}),B}},k=async(M,T)=>{var E;try{l(null);const $={org_id:((E=(await ce.auth.getUser()).data.user)==null?void 0:E.id)||"00000000-0000-0000-0000-000000000001",contact_id:M,channel_id:T,status:"open",assignee_user_id:null},{data:A,error:B}=await ce.from("threads").insert([$]).select().single();if(B)throw B;await y(void 0,{silent:!0});try{await Jt({action:"thread.create",resource:"thread",resourceId:(A==null?void 0:A.id)??null,context:{contact_id:M,channel_id:T}})}catch{}return A}catch($){throw console.error("Error creating conversation:",$),l($ instanceof Error?$.message:"Failed to create conversation"),$}},j=async(M,T,E)=>{var $,A,B;try{l(null);const{data:R}=await ce.auth.getUser(),C=(($=R==null?void 0:R.user)==null?void 0:$.id)||null,W="pending";if((E==null?void 0:E.setAssignee)??!0){const{error:X}=await ce.rpc("takeover_thread",{p_thread_id:M});X&&console.warn("takeover_thread RPC failed; will attempt direct update",X);try{const{data:Z}=await ce.from("threads").select("assignee_user_id, status").eq("id",M).single(),te=!!(Z!=null&&Z.assignee_user_id);if((((Z==null?void 0:Z.status)||"").toLowerCase()!==W||!te)&&C){const ie={assigned_at:new Date().toISOString(),handover_reason:"other:manual_takeover",ai_access_enabled:!1,status:W};te||(ie.assignee_user_id=C,ie.assigned_by_user_id=C);const{error:ge}=await ce.from("threads").update(ie).eq("id",M);ge&&console.warn("Fallback assignment/status update failed",ge)}}catch(Z){console.warn("Failed verifying assignment state",Z)}}else{const X=new Date().toISOString(),{error:Z}=await ce.from("threads").update({collaborator_user_id:C,status:W,ai_access_enabled:!1,ai_handoff_at:X}).eq("id",M);if(Z)throw Z}try{await _t.from("threads").update({ai_access_enabled:!1}).eq("id",M)}catch{}try{const{data:X}=await ce.auth.getUser(),Z=((A=X==null?void 0:X.user)==null?void 0:A.id)||null;let te=null;if(Z){const{data:J}=await ce.from("users_profile").select("display_name").eq("user_id",Z).single();te=(J==null?void 0:J.display_name)||null}await _t.from("messages").insert([{thread_id:M,direction:null,role:"system",type:"event",body:`Conversation taken over by ${te||((B=X==null?void 0:X.user)==null?void 0:B.email)||"agent"}.`,payload:{event:"takeover",user_id:Z}}])}catch(X){console.warn("Failed to insert takeover event message",X)}await y(void 0,{silent:!0}),await b(M);try{await Jt({action:"thread.assign",resource:"thread",resourceId:M,context:{assignee_user_id:T}})}catch{}}catch(R){throw console.error("Error assigning thread:",R),l(R instanceof Error?R.message:"Failed to assign thread"),R}},N=async M=>{try{l(null);const{error:T}=await ce.from("threads").update({collaborator_user_id:null,status:"open",ai_access_enabled:!0,ai_handoff_at:null}).eq("id",M);if(T)throw T;await y(void 0,{silent:!0}),await b(M)}catch(T){throw console.error("Error clearing collaborator:",T),l(T instanceof Error?T.message:"Failed to clear collaborator"),T}},O=async(M,T)=>{var E,$;try{l(null);const{data:A}=await ce.auth.getUser(),B=((E=A==null?void 0:A.user)==null?void 0:E.id)||null,R=new Date().toISOString(),W={assignee_user_id:T,handover_reason:T?"other:manual_assign":"other:manual_unassign",ai_access_enabled:!T,ai_handoff_at:T?R:null,status:T?"pending":"open"};T?(W.assigned_by_user_id=B,W.assigned_at=R):(W.assigned_by_user_id=null,W.assigned_at=null);const{error:Q}=await ce.from("threads").update(W).eq("id",M);if(Q)throw Q;try{const X=[B,T].filter(Boolean);let Z={};if(X.length>0){const{data:ge}=await ce.from("users_profile").select("user_id, display_name").in("user_id",X);Z=Object.fromEntries((ge||[]).map(ae=>[String(ae.user_id),String(ae.display_name||"")]))}const te=B&&(Z[B]||(($=A==null?void 0:A.user)==null?void 0:$.email))||"agent",J=T?Z[T]||"agent":"",ie={thread_id:M,direction:null,role:"system",type:"event",body:"",payload:{}};T?(ie.body=`Conversation assigned to ${J} by ${te}.`,ie.payload={event:"assign",assigned_to:T,assigned_by:B}):(ie.body=`Conversation unassigned by ${te}.`,ie.payload={event:"unassign",assigned_by:B}),await _t.from("messages").insert([ie])}catch(X){console.warn("Failed to insert assign event message",X)}await y(void 0,{silent:!0}),await b(M);try{await Jt({action:"thread.assign",resource:"thread",resourceId:M,context:{assignee_user_id:T}})}catch{}}catch(A){throw console.error("Error assigning thread to user:",A),l(A instanceof Error?A.message:"Failed to assign thread"),A}},I=async M=>{var $,A,B;const{error:T,data:E}=await _t.rpc("takeover_thread",{p_thread_id:M});if(T){console.warn("takeover_thread RPC failed, falling back to direct update",T);const{data:R}=await ce.auth.getUser(),C=(($=R==null?void 0:R.user)==null?void 0:$.id)||null;if(!C)throw T;const W=new Date().toISOString(),{error:Q}=await _t.from("threads").update({collaborator_user_id:C,status:"pending",assigned_at:W,ai_access_enabled:!1}).eq("id",M);if(Q)throw Q}try{const{data:R}=await ce.auth.getUser(),C=((A=R==null?void 0:R.user)==null?void 0:A.id)||null;let W=null;if(C){const{data:Q}=await ce.from("users_profile").select("display_name").eq("user_id",C).single();W=(Q==null?void 0:Q.display_name)||null}await _t.from("messages").insert([{thread_id:M,direction:null,role:"system",type:"event",body:`Conversation taken over by ${W||((B=R==null?void 0:R.user)==null?void 0:B.email)||"agent"}.`,payload:{event:"takeover",user_id:C}}])}catch(R){console.warn("Failed to insert takeover event message",R)}return await y(void 0,{silent:!0}),await b(M),E},P=async M=>{var $,A;const{data:T,error:E}=await _t.rpc("unassign_thread",{p_thread_id:M});if(E)throw E;try{const{data:B}=await ce.auth.getUser(),R=(($=B==null?void 0:B.user)==null?void 0:$.id)||null;let C=null;if(R){const{data:W}=await ce.from("users_profile").select("display_name").eq("user_id",R).single();C=(W==null?void 0:W.display_name)||null}await _t.from("messages").insert([{thread_id:M,direction:null,role:"system",type:"event",body:`Conversation moved to Unassigned by ${C||((A=B==null?void 0:B.user)==null?void 0:A.email)||"agent"}.`,payload:{event:"unassign",user_id:R}}])}catch(B){console.warn("Failed to insert unassign event message",B)}return await y(void 0,{silent:!0}),await b(M),T},S=async(M,T)=>{try{l(null);const{error:E}=await ce.from("threads").update({collaborator_user_id:T}).eq("id",M);if(E)throw E;t($=>$.map(A=>A.id===M?{...A,collaborator_user_id:T}:A));try{await Jt({action:T?"thread.set_collaborator":"thread.clear_collaborator",resource:"thread",resourceId:M,context:{collaborator_user_id:T}})}catch{}}catch(E){throw console.error("Error updating thread collaborator:",E),l(E instanceof Error?E.message:"Failed to update collaborator"),E}},D=async(M,T)=>{try{l(null);const{error:E}=await ce.from("thread_labels").insert([{thread_id:M,label_id:T}]);if(E)throw E;try{await Jt({action:"thread.add_label",resource:"thread",resourceId:M,context:{label_id:T}})}catch{}}catch(E){throw console.error("Error adding thread label:",E),l(E instanceof Error?E.message:"Failed to add thread label"),E}},L=async(M,T)=>{try{l(null);const{error:E}=await ce.from("thread_labels").delete().eq("thread_id",M).eq("label_id",T);if(E)throw E;try{await Jt({action:"thread.remove_label",resource:"thread",resourceId:M,context:{label_id:T}})}catch{}}catch(E){throw console.error("Error removing thread label:",E),l(E instanceof Error?E.message:"Failed to remove thread label"),E}},U=async M=>{try{l(null);const{error:T}=await ce.from("threads").delete().eq("id",M);if(T)throw T;io.invalidatePattern("^query:threads"),t(E=>E.filter(A=>A.id!==M)),c===M&&(u(null),r([]));try{await Jt({action:"thread.delete",resource:"thread",resourceId:M})}catch{}await y(void 0,{silent:!0})}catch(T){throw console.error("Error deleting thread:",T),l(T instanceof Error?T.message:"Failed to delete conversation"),T}};p.useEffect(()=>{g(10)},[]),p.useEffect(()=>{const M=()=>{try{t([]),r([]),u(null),l(null)}catch{}try{g(50)}catch{}};try{window.addEventListener(vm,M)}catch{}return()=>{try{window.removeEventListener(vm,M)}catch{}}},[]);const F=async()=>{try{const{data:M,error:T}=await _t.rpc("check_and_auto_resolve_threads");if(T){console.error("Auto-resolve check failed:",T);return}M&&M.length>0&&y(void 0,{silent:!0})}catch(M){console.error("Auto-resolve check error:",M)}};return p.useEffect(()=>{const M=setInterval(()=>{document.visibilityState==="visible"&&F()},3e4);return()=>clearInterval(M)},[]),p.useEffect(()=>{const M=ce.channel("threads-realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"threads"},T=>{w(T.new),document.visibilityState==="visible"&&g(400)}).on("postgres_changes",{event:"INSERT",schema:"public",table:"threads"},T=>{document.visibilityState==="visible"&&g(300)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"threads"},()=>{document.visibilityState==="visible"&&g(300)}).subscribe();return()=>{try{ce.removeChannel(M)}catch{}}},[]),p.useEffect(()=>{const M=ce.channel("messages-realtime-for-convlist").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},T=>{const E=T.new;E&&E.direction==="in"&&document.visibilityState==="visible"?(Fg("incoming"),x(E.thread_id,E),g(100),F()):E&&(E.role==="system"||E.type==="event")&&document.visibilityState==="visible"?(Fg("incoming"),x(E.thread_id,E),g(200)):E&&E.direction==="out"&&(E.role==="agent"||E.role==="assistant")&&document.visibilityState==="visible"?(x(E.thread_id,E),g(200)):E&&E.role==="agent"&&E.direction==="out"&&document.visibilityState==="visible"&&F()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},()=>{document.visibilityState==="visible"&&g(500)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages"},()=>{document.visibilityState==="visible"&&g(300)}).subscribe();return()=>{try{ce.removeChannel(M)}catch{}try{m.current&&(clearTimeout(m.current),m.current=null)}catch{}}},[]),p.useEffect(()=>{if(!c)return;const M=setInterval(()=>{b(c)},3e4),T=ce.channel(`messages-${c}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},E=>{const $=E.new;$&&$.direction==="in"&&Fg("incoming"),r(A=>{var X,Z,te,J;if(A.some(ie=>ie.id===($==null?void 0:$.id)))return A;const R=((X=A[0])==null?void 0:X.contact_name)||"",C=((Z=A[0])==null?void 0:Z.contact_avatar)||(((J=(te=R==null?void 0:R[0])==null?void 0:te.toUpperCase)==null?void 0:J.call(te))??"U"),W={...$||{},contact_name:R,contact_avatar:C},Q=[...A,W];return Q.sort((ie,ge)=>(ie.seq??0)-(ge.seq??0)),Q})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},E=>{const $=E.new;r(A=>{const B=A.findIndex(W=>W.id===($==null?void 0:$.id));if(B<0)return A;const R={...A[B],...$||{}},C=[...A];return C[B]=R,C.sort((W,Q)=>(W.seq??0)-(Q.seq??0)),C})}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},E=>{const $=E.old||E.new,A=$==null?void 0:$.id;A&&r(B=>B.filter(R=>R.id!==A))}).subscribe(E=>{E==="CHANNEL_ERROR"&&(console.error("Error subscribing to messages for thread:",c),setTimeout(()=>{b(c)},1e3))});return()=>{clearInterval(M);try{ce.removeChannel(T)}catch{}}},[c]),p.useEffect(()=>{if(!c)return;const M=ce.channel(`thread-detail-${c}`).on("postgres_changes",{event:"*",schema:"public",table:"threads",filter:`id=eq.${c}`},()=>{document.visibilityState==="visible"&&(g(150),b(c))}).subscribe();return()=>{try{ce.removeChannel(M)}catch{}}},[c,b]),{conversations:e,messages:n,loading:a,error:o,selectedThreadId:c,fetchConversations:y,fetchMessages:b,sendMessage:_,refreshMessages:()=>{c&&b(c)},enableAudioNotifications:()=>{localStorage.setItem("audioNotifications","true")},disableAudioNotifications:()=>{localStorage.setItem("audioNotifications","false")},testAudioNotification:()=>{Fg("incoming")},createConversation:k,assignThread:j,assignThreadToUser:O,takeoverThread:I,unassignThread:P,clearCollaborator:N,setThreadCollaborator:S,addThreadLabel:D,removeThreadLabel:L,deleteThread:U,checkAutoResolve:F,activeFilters:h}},AC=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),[o,l]=p.useState(0),c=p.useRef({page:1,limit:100,searchQuery:void 0,filters:void 0}),u=async(g=1,v=100,x,y)=>{var w,b,_,k;try{c.current={page:g,limit:v,searchQuery:x,filters:y},r(!0),s(null);const j=!!(y!=null&&y.chatStatus||(w=y==null?void 0:y.dateRange)!=null&&w.from||(b=y==null?void 0:y.dateRange)!=null&&b.to||(y==null?void 0:y.handledBy)==="assigned");let N=_t.from("contacts").select(`
          id, org_id, name, email, phone, locale, notes, created_at,
          threads${j?"!inner":""}(
            id, status, created_at, assignee_user_id,
            channels(display_name, provider, type)
          )
          `,{count:"exact"}).order("created_at",{ascending:!1});if(x&&(N=N.or(`name.ilike.%${x}%,phone.ilike.%${x}%,email.ilike.%${x}%`)),y&&(y.chatStatus&&(N=N.eq("threads.status",y.chatStatus)),y.handledBy==="assigned"&&(N=N.not("threads.assignee_user_id","is",null)),(_=y.dateRange)!=null&&_.from&&(N=N.gte("threads.created_at",y.dateRange.from)),(k=y.dateRange)!=null&&k.to)){const U=y.dateRange.to.length>10?y.dateRange.to:`${y.dateRange.to}T23:59:59.999Z`;N=N.lte("threads.created_at",U)}const O=(g-1)*v,I=O+v-1;N=N.range(O,I),N=N.order("created_at",{foreignTable:"threads",ascending:!1}).limit(1,{foreignTable:"threads"});const{data:P,error:S,count:D}=await N;if(S)throw S;let L=(P||[]).map(U=>{var E,$,A;const F=(U.threads||[])[0]||null,M=((E=F==null?void 0:F.channels)==null?void 0:E.display_name)||"",T=F!=null&&F.created_at?new Date(F.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(",",""):"";return{id:U.id,org_id:U.org_id,name:U.name,email:U.email,phone:U.phone,locale:U.locale,notes:U.notes,created_at:U.created_at,labelNames:"",inbox:M,channelProvider:(($=F==null?void 0:F.channels)==null?void 0:$.provider)||null,channelType:((A=F==null?void 0:F.channels)==null?void 0:A.type)||null,chatStatus:(F==null?void 0:F.status)||"",chatCreatedAt:T,chatCreatedAtISO:(F==null?void 0:F.created_at)||null,handledBy:F!=null&&F.assignee_user_id?"assigned":"unassigned"}});y&&(L=L.filter(U=>{var F,M;if(y.chatStatus&&U.chatStatus!==y.chatStatus||y.handledBy&&U.handledBy!==y.handledBy)return!1;if((F=y.dateRange)!=null&&F.from||(M=y.dateRange)!=null&&M.to){const T=new Date(U.created_at),E=y.dateRange.from?new Date(y.dateRange.from):null,$=y.dateRange.to?new Date(y.dateRange.to):null;if(E&&T<E||$&&T>$)return!1}return!0})),t(L),l(D||0)}catch(j){console.error("Error fetching contacts:",j),s(j instanceof Error?j.message:"Failed to fetch contacts")}finally{r(!1)}},d=async g=>{try{s(null);const{data:v,error:x}=await _t.from("contacts").insert([{...g,org_id:"00000000-0000-0000-0000-000000000001"}]).select().single();if(x)throw x;await u();try{await Jt({action:"contact.create",resource:"contact",resourceId:(v==null?void 0:v.id)??null,context:g})}catch{}return v}catch(v){throw console.error("Error creating contact:",v),s(v instanceof Error?v.message:"Failed to create contact"),v}},h=async(g,v)=>{try{s(null);const{error:x}=await _t.from("contacts").update(v).eq("id",g);if(x)throw x;await u();try{await Jt({action:"contact.update",resource:"contact",resourceId:g,context:v})}catch{}}catch(x){throw console.error("Error updating contact:",x),s(x instanceof Error?x.message:"Failed to update contact"),x}},f=async g=>{try{s(null);const{error:v}=await ce.from("contacts").delete().eq("id",g);if(v)throw v;io.invalidatePattern("^query:contacts"),await u();try{await Jt({action:"contact.delete",resource:"contact",resourceId:g})}catch{}}catch(v){throw console.error("Error deleting contact:",v),s(v instanceof Error?v.message:"Failed to delete contact"),v}},m=async g=>{try{s(null);const{error:v}=await ce.from("contacts").delete().in("id",g);if(v)throw v;io.invalidatePattern("^query:contacts"),await u();try{await Jt({action:"contact.bulk_delete",resource:"contact",context:{ids:g}})}catch{}}catch(v){throw console.error("Error deleting contacts:",v),s(v instanceof Error?v.message:"Failed to delete contacts"),v}};return p.useEffect(()=>{u()},[]),p.useEffect(()=>{const g=()=>{try{t([]),l(0),s(null),r(!0)}catch{}try{const{page:v,limit:x,searchQuery:y,filters:w}=c.current;u(v,x,y,w)}catch{}};try{window.addEventListener(vm,g)}catch{}return()=>{try{window.removeEventListener(vm,g)}catch{}}},[]),{contacts:e,loading:n,error:a,totalCount:o,fetchContacts:u,createContact:d,updateContact:h,deleteContact:f,deleteMultipleContacts:m}};var n6="AlertDialog",[Tle,m5e]=Ir(n6,[Z5]),To=Z5(),r6=e=>{const{__scopeAlertDialog:t,...n}=e,r=To(t);return i.jsx(nC,{...r,...n,modal:!0})};r6.displayName=n6;var Ple="AlertDialogTrigger",a6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=To(n);return i.jsx(pU,{...a,...r,ref:t})});a6.displayName=Ple;var Ole="AlertDialogPortal",i6=e=>{const{__scopeAlertDialog:t,...n}=e,r=To(t);return i.jsx(rC,{...r,...n})};i6.displayName=Ole;var Ile="AlertDialogOverlay",s6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=To(n);return i.jsx(_b,{...a,...r,ref:t})});s6.displayName=Ile;var ud="AlertDialogContent",[Rle,Mle]=Tle(ud),Dle=z$("AlertDialogContent"),o6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,s=To(n),o=p.useRef(null),l=It(t,o),c=p.useRef(null);return i.jsx(tae,{contentName:ud,titleName:l6,docsSlug:"alert-dialog",children:i.jsx(Rle,{scope:n,cancelRef:c,children:i.jsxs(kb,{role:"alertdialog",...s,...a,ref:l,onOpenAutoFocus:Ve(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(Dle,{children:r}),i.jsx($le,{contentRef:o})]})})})});o6.displayName=ud;var l6="AlertDialogTitle",c6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=To(n);return i.jsx(aC,{...a,...r,ref:t})});c6.displayName=l6;var u6="AlertDialogDescription",d6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=To(n);return i.jsx(iC,{...a,...r,ref:t})});d6.displayName=u6;var Lle="AlertDialogAction",h6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=To(n);return i.jsx(sC,{...a,...r,ref:t})});h6.displayName=Lle;var f6="AlertDialogCancel",m6=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=Mle(f6,n),s=To(n),o=It(t,a);return i.jsx(sC,{...s,...r,ref:o})});m6.displayName=f6;var $le=({contentRef:e})=>{const t=`\`${ud}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ud}\` by passing a \`${u6}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ud}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Fle=r6,Ule=a6,Ble=i6,p6=s6,g6=o6,v6=h6,y6=m6,x6=c6,b6=d6;const Rb=Fle,zle=Ule,Wle=Ble,w6=p.forwardRef(({className:e,...t},n)=>i.jsx(p6,{className:Pe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));w6.displayName=p6.displayName;const Up=p.forwardRef(({className:e,...t},n)=>i.jsxs(Wle,{children:[i.jsx(w6,{}),i.jsx(g6,{ref:n,className:Pe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Up.displayName=g6.displayName;const Bp=({className:e,...t})=>i.jsx("div",{className:Pe("flex flex-col space-y-2 text-center sm:text-left",e),...t});Bp.displayName="AlertDialogHeader";const zp=({className:e,...t})=>i.jsx("div",{className:Pe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});zp.displayName="AlertDialogFooter";const Wp=p.forwardRef(({className:e,...t},n)=>i.jsx(x6,{ref:n,className:Pe("text-lg font-semibold",e),...t}));Wp.displayName=x6.displayName;const qp=p.forwardRef(({className:e,...t},n)=>i.jsx(b6,{ref:n,className:Pe("text-sm text-muted-foreground",e),...t}));qp.displayName=b6.displayName;const Hp=p.forwardRef(({className:e,...t},n)=>i.jsx(v6,{ref:n,className:Pe(Rd(),e),...t}));Hp.displayName=v6.displayName;const Kp=p.forwardRef(({className:e,...t},n)=>i.jsx(y6,{ref:n,className:Pe(Rd({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Kp.displayName=y6.displayName;function qle(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Hle=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Kle=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Vle={};function v2(e,t){return(Vle.jsx?Kle:Hle).test(e)}const Gle=/[ \t\n\f\r]/g;function Yle(e){return typeof e=="object"?e.type==="text"?y2(e.value):!1:y2(e)}function y2(e){return e.replace(Gle,"")===""}class Vp{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Vp.prototype.normal={};Vp.prototype.property={};Vp.prototype.space=void 0;function j6(e,t){const n={},r={};for(const a of e)Object.assign(n,a.property),Object.assign(r,a.normal);return new Vp(n,r,t)}function I1(e){return e.toLowerCase()}class za{constructor(t,n){this.attribute=n,this.property=t}}za.prototype.attribute="";za.prototype.booleanish=!1;za.prototype.boolean=!1;za.prototype.commaOrSpaceSeparated=!1;za.prototype.commaSeparated=!1;za.prototype.defined=!1;za.prototype.mustUseProperty=!1;za.prototype.number=!1;za.prototype.overloadedBoolean=!1;za.prototype.property="";za.prototype.spaceSeparated=!1;za.prototype.space=void 0;let Xle=0;const Ut=lu(),cr=lu(),R1=lu(),Qe=lu(),Tn=lu(),dd=lu(),Ga=lu();function lu(){return 2**++Xle}const M1=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ut,booleanish:cr,commaOrSpaceSeparated:Ga,commaSeparated:dd,number:Qe,overloadedBoolean:R1,spaceSeparated:Tn},Symbol.toStringTag,{value:"Module"})),aj=Object.keys(M1);class EC extends za{constructor(t,n,r,a){let s=-1;if(super(t,n),x2(this,"space",a),typeof r=="number")for(;++s<aj.length;){const o=aj[s];x2(this,aj[s],(r&M1[o])===M1[o])}}}EC.prototype.defined=!0;function x2(e,t,n){n&&(e[t]=n)}function wh(e){const t={},n={};for(const[r,a]of Object.entries(e.properties)){const s=new EC(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[I1(r)]=r,n[I1(s.attribute)]=r}return new Vp(t,n,e.space)}const _6=wh({properties:{ariaActiveDescendant:null,ariaAtomic:cr,ariaAutoComplete:null,ariaBusy:cr,ariaChecked:cr,ariaColCount:Qe,ariaColIndex:Qe,ariaColSpan:Qe,ariaControls:Tn,ariaCurrent:null,ariaDescribedBy:Tn,ariaDetails:null,ariaDisabled:cr,ariaDropEffect:Tn,ariaErrorMessage:null,ariaExpanded:cr,ariaFlowTo:Tn,ariaGrabbed:cr,ariaHasPopup:null,ariaHidden:cr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Tn,ariaLevel:Qe,ariaLive:null,ariaModal:cr,ariaMultiLine:cr,ariaMultiSelectable:cr,ariaOrientation:null,ariaOwns:Tn,ariaPlaceholder:null,ariaPosInSet:Qe,ariaPressed:cr,ariaReadOnly:cr,ariaRelevant:null,ariaRequired:cr,ariaRoleDescription:Tn,ariaRowCount:Qe,ariaRowIndex:Qe,ariaRowSpan:Qe,ariaSelected:cr,ariaSetSize:Qe,ariaSort:null,ariaValueMax:Qe,ariaValueMin:Qe,ariaValueNow:Qe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function k6(e,t){return t in e?e[t]:t}function S6(e,t){return k6(e,t.toLowerCase())}const Jle=wh({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:dd,acceptCharset:Tn,accessKey:Tn,action:null,allow:null,allowFullScreen:Ut,allowPaymentRequest:Ut,allowUserMedia:Ut,alt:null,as:null,async:Ut,autoCapitalize:null,autoComplete:Tn,autoFocus:Ut,autoPlay:Ut,blocking:Tn,capture:null,charSet:null,checked:Ut,cite:null,className:Tn,cols:Qe,colSpan:null,content:null,contentEditable:cr,controls:Ut,controlsList:Tn,coords:Qe|dd,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ut,defer:Ut,dir:null,dirName:null,disabled:Ut,download:R1,draggable:cr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ut,formTarget:null,headers:Tn,height:Qe,hidden:R1,high:Qe,href:null,hrefLang:null,htmlFor:Tn,httpEquiv:Tn,id:null,imageSizes:null,imageSrcSet:null,inert:Ut,inputMode:null,integrity:null,is:null,isMap:Ut,itemId:null,itemProp:Tn,itemRef:Tn,itemScope:Ut,itemType:Tn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ut,low:Qe,manifest:null,max:null,maxLength:Qe,media:null,method:null,min:null,minLength:Qe,multiple:Ut,muted:Ut,name:null,nonce:null,noModule:Ut,noValidate:Ut,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ut,optimum:Qe,pattern:null,ping:Tn,placeholder:null,playsInline:Ut,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ut,referrerPolicy:null,rel:Tn,required:Ut,reversed:Ut,rows:Qe,rowSpan:Qe,sandbox:Tn,scope:null,scoped:Ut,seamless:Ut,selected:Ut,shadowRootClonable:Ut,shadowRootDelegatesFocus:Ut,shadowRootMode:null,shape:null,size:Qe,sizes:null,slot:null,span:Qe,spellCheck:cr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Qe,step:null,style:null,tabIndex:Qe,target:null,title:null,translate:null,type:null,typeMustMatch:Ut,useMap:null,value:cr,width:Qe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Tn,axis:null,background:null,bgColor:null,border:Qe,borderColor:null,bottomMargin:Qe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ut,declare:Ut,event:null,face:null,frame:null,frameBorder:null,hSpace:Qe,leftMargin:Qe,link:null,longDesc:null,lowSrc:null,marginHeight:Qe,marginWidth:Qe,noResize:Ut,noHref:Ut,noShade:Ut,noWrap:Ut,object:null,profile:null,prompt:null,rev:null,rightMargin:Qe,rules:null,scheme:null,scrolling:cr,standby:null,summary:null,text:null,topMargin:Qe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Qe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ut,disableRemotePlayback:Ut,prefix:null,property:null,results:Qe,security:null,unselectable:null},space:"html",transform:S6}),Qle=wh({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ga,accentHeight:Qe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Qe,amplitude:Qe,arabicForm:null,ascent:Qe,attributeName:null,attributeType:null,azimuth:Qe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Qe,by:null,calcMode:null,capHeight:Qe,className:Tn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Qe,diffuseConstant:Qe,direction:null,display:null,dur:null,divisor:Qe,dominantBaseline:null,download:Ut,dx:null,dy:null,edgeMode:null,editable:null,elevation:Qe,enableBackground:null,end:null,event:null,exponent:Qe,externalResourcesRequired:null,fill:null,fillOpacity:Qe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:dd,g2:dd,glyphName:dd,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Qe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Qe,horizOriginX:Qe,horizOriginY:Qe,id:null,ideographic:Qe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Qe,k:Qe,k1:Qe,k2:Qe,k3:Qe,k4:Qe,kernelMatrix:Ga,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Qe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Qe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Qe,overlineThickness:Qe,paintOrder:null,panose1:null,path:null,pathLength:Qe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Tn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Qe,pointsAtY:Qe,pointsAtZ:Qe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ga,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ga,rev:Ga,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ga,requiredFeatures:Ga,requiredFonts:Ga,requiredFormats:Ga,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Qe,specularExponent:Qe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Qe,strikethroughThickness:Qe,string:null,stroke:null,strokeDashArray:Ga,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Qe,strokeOpacity:Qe,strokeWidth:null,style:null,surfaceScale:Qe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ga,tabIndex:Qe,tableValues:null,target:null,targetX:Qe,targetY:Qe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ga,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Qe,underlineThickness:Qe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Qe,values:null,vAlphabetic:Qe,vMathematical:Qe,vectorEffect:null,vHanging:Qe,vIdeographic:Qe,version:null,vertAdvY:Qe,vertOriginX:Qe,vertOriginY:Qe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Qe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:k6}),N6=wh({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),C6=wh({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:S6}),A6=wh({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),Zle={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},ece=/[A-Z]/g,b2=/-[a-z]/g,tce=/^data[-\w.:]+$/i;function nce(e,t){const n=I1(t);let r=t,a=za;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&tce.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(b2,ace);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!b2.test(s)){let o=s.replace(ece,rce);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}a=EC}return new a(r,t)}function rce(e){return"-"+e.toLowerCase()}function ace(e){return e.charAt(1).toUpperCase()}const ice=j6([_6,Jle,N6,C6,A6],"html"),TC=j6([_6,Qle,N6,C6,A6],"svg");function sce(e){return e.join(" ").trim()}var PC={},w2=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,oce=/\n/g,lce=/^\s*/,cce=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,uce=/^:\s*/,dce=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,hce=/^[;\s]*/,fce=/^\s+|\s+$/g,mce=`
`,j2="/",_2="*",fc="",pce="comment",gce="declaration",vce=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function a(g){var v=g.match(oce);v&&(n+=v.length);var x=g.lastIndexOf(mce);r=~x?g.length-x:r+g.length}function s(){var g={line:n,column:r};return function(v){return v.position=new o(g),u(),v}}function o(g){this.start=g,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(g){var v=new Error(t.source+":"+n+":"+r+": "+g);if(v.reason=g,v.filename=t.source,v.line=n,v.column=r,v.source=e,!t.silent)throw v}function c(g){var v=g.exec(e);if(v){var x=v[0];return a(x),e=e.slice(x.length),v}}function u(){c(lce)}function d(g){var v;for(g=g||[];v=h();)v!==!1&&g.push(v);return g}function h(){var g=s();if(!(j2!=e.charAt(0)||_2!=e.charAt(1))){for(var v=2;fc!=e.charAt(v)&&(_2!=e.charAt(v)||j2!=e.charAt(v+1));)++v;if(v+=2,fc===e.charAt(v-1))return l("End of comment missing");var x=e.slice(2,v-2);return r+=2,a(x),e=e.slice(v),r+=2,g({type:pce,comment:x})}}function f(){var g=s(),v=c(cce);if(v){if(h(),!c(uce))return l("property missing ':'");var x=c(dce),y=g({type:gce,property:k2(v[0].replace(w2,fc)),value:x?k2(x[0].replace(w2,fc)):fc});return c(hce),y}}function m(){var g=[];d(g);for(var v;v=f();)v!==!1&&(g.push(v),d(g));return g}return u(),m()};function k2(e){return e?e.replace(fce,fc):fc}var yce=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PC,"__esModule",{value:!0});PC.default=bce;var xce=yce(vce);function bce(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,xce.default)(e),a=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,l=s.value;a?t(o,l,s):l&&(n=n||{},n[o]=l)}}),n}var Mb={};Object.defineProperty(Mb,"__esModule",{value:!0});Mb.camelCase=void 0;var wce=/^--[a-zA-Z0-9_-]+$/,jce=/-([a-z])/g,_ce=/^[^-]+$/,kce=/^-(webkit|moz|ms|o|khtml)-/,Sce=/^-(ms)-/,Nce=function(e){return!e||_ce.test(e)||wce.test(e)},Cce=function(e,t){return t.toUpperCase()},S2=function(e,t){return"".concat(t,"-")},Ace=function(e,t){return t===void 0&&(t={}),Nce(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Sce,S2):e=e.replace(kce,S2),e.replace(jce,Cce))};Mb.camelCase=Ace;var Ece=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Tce=Ece(PC),Pce=Mb;function D1(e,t){var n={};return!e||typeof e!="string"||(0,Tce.default)(e,function(r,a){r&&a&&(n[(0,Pce.camelCase)(r,t)]=a)}),n}D1.default=D1;var Oce=D1;const Ice=vn(Oce),E6=T6("end"),OC=T6("start");function T6(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Rce(e){const t=OC(e),n=E6(e);if(t&&n)return{start:t,end:n}}function Df(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?N2(e.position):"start"in e||"end"in e?N2(e):"line"in e||"column"in e?L1(e):""}function L1(e){return C2(e&&e.line)+":"+C2(e&&e.column)}function N2(e){return L1(e&&e.start)+"-"+L1(e&&e.end)}function C2(e){return e&&typeof e=="number"?e:1}class ia extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let a="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?a=t:!s.cause&&t&&(o=!0,a=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=l?l.line:void 0,this.name=Df(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ia.prototype.file="";ia.prototype.name="";ia.prototype.reason="";ia.prototype.message="";ia.prototype.stack="";ia.prototype.column=void 0;ia.prototype.line=void 0;ia.prototype.ancestors=void 0;ia.prototype.cause=void 0;ia.prototype.fatal=void 0;ia.prototype.place=void 0;ia.prototype.ruleId=void 0;ia.prototype.source=void 0;const IC={}.hasOwnProperty,Mce=new Map,Dce=/[A-Z]/g,Lce=new Set(["table","tbody","thead","tfoot","tr"]),$ce=new Set(["td","th"]),P6="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Fce(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Vce(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Kce(n,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?TC:ice,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=O6(a,e,void 0);return s&&typeof s!="string"?s:a.create(e,a.Fragment,{children:s||void 0},void 0)}function O6(e,t,n){if(t.type==="element")return Uce(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Bce(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Wce(e,t,n);if(t.type==="mdxjsEsm")return zce(e,t);if(t.type==="root")return qce(e,t,n);if(t.type==="text")return Hce(e,t)}function Uce(e,t,n){const r=e.schema;let a=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(a=TC,e.schema=a),e.ancestors.push(t);const s=R6(e,t.tagName,!1),o=Gce(e,t);let l=MC(e,t);return Lce.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!Yle(c):!0})),I6(e,o,s,t),RC(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Bce(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Em(e,t.position)}function zce(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Em(e,t.position)}function Wce(e,t,n){const r=e.schema;let a=r;t.name==="svg"&&r.space==="html"&&(a=TC,e.schema=a),e.ancestors.push(t);const s=t.name===null?e.Fragment:R6(e,t.name,!0),o=Yce(e,t),l=MC(e,t);return I6(e,o,s,t),RC(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function qce(e,t,n){const r={};return RC(r,MC(e,t)),e.create(t,e.Fragment,r,n)}function Hce(e,t){return t.value}function I6(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function RC(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Kce(e,t,n){return r;function r(a,s,o,l){const u=Array.isArray(o.children)?n:t;return l?u(s,o,l):u(s,o)}}function Vce(e,t){return n;function n(r,a,s,o){const l=Array.isArray(s.children),c=OC(r);return t(a,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function Gce(e,t){const n={};let r,a;for(a in t.properties)if(a!=="children"&&IC.call(t.properties,a)){const s=Xce(e,a,t.properties[a]);if(s){const[o,l]=s;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&$ce.has(t.tagName)?r=l:n[o]=l}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Yce(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Em(e,t.position);else{const a=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,s=e.evaluater.evaluateExpression(l.expression)}else Em(e,t.position);else s=r.value===null?!0:r.value;n[a]=s}return n}function MC(e,t){const n=[];let r=-1;const a=e.passKeys?new Map:Mce;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const u=a.get(c)||0;o=c+"-"+u,a.set(c,u+1)}}const l=O6(e,s,o);l!==void 0&&n.push(l)}return n}function Xce(e,t,n){const r=nce(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?qle(n):sce(n)),r.property==="style"){let a=typeof n=="object"?n:Jce(e,String(n));return e.stylePropertyNameCase==="css"&&(a=Qce(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&r.space?Zle[r.property]||r.property:r.attribute,n]}}function Jce(e,t){try{return Ice(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,a=new ia("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=P6+"#cannot-parse-style-attribute",a}}function R6(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let s=-1,o;for(;++s<a.length;){const l=v2(a[s])?{type:"Identifier",name:a[s]}:{type:"Literal",value:a[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}r=o}else r=v2(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const a=r.value;return IC.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(r);Em(e)}function Em(e,t){const n=new ia("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=P6+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Qce(e){const t={};let n;for(n in e)IC.call(e,n)&&(t[Zce(n)]=e[n]);return t}function Zce(e){let t=e.replace(Dce,eue);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function eue(e){return"-"+e.toLowerCase()}const ij={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},tue={};function DC(e,t){const n=tue,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return M6(e,r,a)}function M6(e,t,n){if(nue(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return A2(e.children,t,n)}return Array.isArray(e)?A2(e,t,n):""}function A2(e,t,n){const r=[];let a=-1;for(;++a<e.length;)r[a]=M6(e[a],t,n);return r.join("")}function nue(e){return!!(e&&typeof e=="object")}const E2=document.createElement("i");function LC(e){const t="&"+e+";";E2.innerHTML=t;const n=E2.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function ri(e,t,n,r){const a=e.length;let s=0,o;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function bi(e,t){return e.length>0?(ri(e,e.length,0,t),e):t}const T2={}.hasOwnProperty;function D6(e){const t={};let n=-1;for(;++n<e.length;)rue(t,e[n]);return t}function rue(e,t){let n;for(n in t){const a=(T2.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){T2.call(a,o)||(a[o]=[]);const l=s[o];aue(a[o],Array.isArray(l)?l:l?[l]:[])}}}function aue(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);ri(e,0,0,r)}function L6(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function rs(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const pa=Hl(/[A-Za-z]/),na=Hl(/[\dA-Za-z]/),iue=Hl(/[#-'*+\--9=?A-Z^-~]/);function ky(e){return e!==null&&(e<32||e===127)}const $1=Hl(/\d/),sue=Hl(/[\dA-Fa-f]/),oue=Hl(/[!-/:-@[-`{-~]/);function kt(e){return e!==null&&e<-2}function Cn(e){return e!==null&&(e<0||e===32)}function Vt(e){return e===-2||e===-1||e===32}const Db=Hl(new RegExp("\\p{P}|\\p{S}","u")),Vc=Hl(/\s/);function Hl(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function jh(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&na(e.charCodeAt(n+1))&&na(e.charCodeAt(n+2)))a=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=e.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),a=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+a+1,o=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function en(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return Vt(c)?(e.enter(n),l(c)):t(c)}function l(c){return Vt(c)&&s++<a?(e.consume(c),l):(e.exit(n),t(c))}}const lue={tokenize:cue};function cue(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),en(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),s(l)}function s(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return kt(l)?(e.consume(l),e.exit("chunkText"),s):(e.consume(l),o)}}const uue={tokenize:due},P2={tokenize:hue};function due(e){const t=this,n=[];let r=0,a,s,o;return l;function l(b){if(r<n.length){const _=n[r];return t.containerState=_[1],e.attempt(_[0].continuation,c,u)(b)}return u(b)}function c(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&w();const _=t.events.length;let k=_,j;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){j=t.events[k][1].end;break}y(r);let N=_;for(;N<t.events.length;)t.events[N][1].end={...j},N++;return ri(t.events,k+1,0,t.events.slice(_)),t.events.length=N,u(b)}return l(b)}function u(b){if(r===n.length){if(!a)return f(b);if(a.currentConstruct&&a.currentConstruct.concrete)return g(b);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(P2,d,h)(b)}function d(b){return a&&w(),y(r),f(b)}function h(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,g(b)}function f(b){return t.containerState={},e.attempt(P2,m,g)(b)}function m(b){return r++,n.push([t.currentConstruct,t.containerState]),f(b)}function g(b){if(b===null){a&&w(),y(0),e.consume(b);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:s}),v(b)}function v(b){if(b===null){x(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return kt(b)?(e.consume(b),x(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(b),v)}function x(b,_){const k=t.sliceStream(b);if(_&&k.push(null),b.previous=s,s&&(s.next=b),s=b,a.defineSkip(b.start),a.write(k),t.parser.lazy[b.start.line]){let j=a.events.length;for(;j--;)if(a.events[j][1].start.offset<o&&(!a.events[j][1].end||a.events[j][1].end.offset>o))return;const N=t.events.length;let O=N,I,P;for(;O--;)if(t.events[O][0]==="exit"&&t.events[O][1].type==="chunkFlow"){if(I){P=t.events[O][1].end;break}I=!0}for(y(r),j=N;j<t.events.length;)t.events[j][1].end={...P},j++;ri(t.events,O+1,0,t.events.slice(N)),t.events.length=j}}function y(b){let _=n.length;for(;_-- >b;){const k=n[_];t.containerState=k[1],k[0].exit.call(t,e)}n.length=b}function w(){a.write([null]),s=void 0,a=void 0,t.containerState._closeFlow=void 0}}function hue(e,t,n){return en(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ud(e){if(e===null||Cn(e)||Vc(e))return 1;if(Db(e))return 2}function Lb(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const s=e[a].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const F1={name:"attention",resolveAll:fue,tokenize:mue};function fue(e,t){let n=-1,r,a,s,o,l,c,u,d;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const h={...e[r][1].end},f={...e[n][1].start};O2(h,-c),O2(f,c),o={type:c>1?"strongSequence":"emphasisSequence",start:h,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:f},s={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},a={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=bi(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=bi(u,[["enter",a,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=bi(u,Lb(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=bi(u,[["exit",s,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(d=2,u=bi(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):d=0,ri(e,r-1,n-r+3,u),n=r+u.length-d-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function mue(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=Ud(r);let s;return o;function o(c){return s=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===s)return e.consume(c),l;const u=e.exit("attentionSequence"),d=Ud(c),h=!d||d===2&&a||n.includes(c),f=!a||a===2&&d||n.includes(r);return u._open=!!(s===42?h:h&&(a||!f)),u._close=!!(s===42?f:f&&(d||!h)),t(c)}}function O2(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const pue={name:"autolink",tokenize:gue};function gue(e,t,n){let r=0;return a;function a(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(m){return pa(m)?(e.consume(m),o):m===64?n(m):u(m)}function o(m){return m===43||m===45||m===46||na(m)?(r=1,l(m)):u(m)}function l(m){return m===58?(e.consume(m),r=0,c):(m===43||m===45||m===46||na(m))&&r++<32?(e.consume(m),l):(r=0,u(m))}function c(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||ky(m)?n(m):(e.consume(m),c)}function u(m){return m===64?(e.consume(m),d):iue(m)?(e.consume(m),u):n(m)}function d(m){return na(m)?h(m):n(m)}function h(m){return m===46?(e.consume(m),r=0,d):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):f(m)}function f(m){if((m===45||na(m))&&r++<63){const g=m===45?f:h;return e.consume(m),g}return n(m)}}const Gp={partial:!0,tokenize:vue};function vue(e,t,n){return r;function r(s){return Vt(s)?en(e,a,"linePrefix")(s):a(s)}function a(s){return s===null||kt(s)?t(s):n(s)}}const $6={continuation:{tokenize:xue},exit:bue,name:"blockQuote",tokenize:yue};function yue(e,t,n){const r=this;return a;function a(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Vt(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function xue(e,t,n){const r=this;return a;function a(o){return Vt(o)?en(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt($6,t,n)(o)}}function bue(e){e.exit("blockQuote")}const F6={name:"characterEscape",tokenize:wue};function wue(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),a}function a(s){return oue(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const U6={name:"characterReference",tokenize:jue};function jue(e,t,n){const r=this;let a=0,s,o;return l;function l(h){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),c}function c(h){return h===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(h),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=na,d(h))}function u(h){return h===88||h===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(h),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=sue,d):(e.enter("characterReferenceValue"),s=7,o=$1,d(h))}function d(h){if(h===59&&a){const f=e.exit("characterReferenceValue");return o===na&&!LC(r.sliceSerialize(f))?n(h):(e.enter("characterReferenceMarker"),e.consume(h),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(h)&&a++<s?(e.consume(h),d):n(h)}}const I2={partial:!0,tokenize:kue},R2={concrete:!0,name:"codeFenced",tokenize:_ue};function _ue(e,t,n){const r=this,a={partial:!0,tokenize:k};let s=0,o=0,l;return c;function c(j){return u(j)}function u(j){const N=r.events[r.events.length-1];return s=N&&N[1].type==="linePrefix"?N[2].sliceSerialize(N[1],!0).length:0,l=j,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),d(j)}function d(j){return j===l?(o++,e.consume(j),d):o<3?n(j):(e.exit("codeFencedFenceSequence"),Vt(j)?en(e,h,"whitespace")(j):h(j))}function h(j){return j===null||kt(j)?(e.exit("codeFencedFence"),r.interrupt?t(j):e.check(I2,v,_)(j)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(j))}function f(j){return j===null||kt(j)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),h(j)):Vt(j)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),en(e,m,"whitespace")(j)):j===96&&j===l?n(j):(e.consume(j),f)}function m(j){return j===null||kt(j)?h(j):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(j))}function g(j){return j===null||kt(j)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),h(j)):j===96&&j===l?n(j):(e.consume(j),g)}function v(j){return e.attempt(a,_,x)(j)}function x(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),y}function y(j){return s>0&&Vt(j)?en(e,w,"linePrefix",s+1)(j):w(j)}function w(j){return j===null||kt(j)?e.check(I2,v,_)(j):(e.enter("codeFlowValue"),b(j))}function b(j){return j===null||kt(j)?(e.exit("codeFlowValue"),w(j)):(e.consume(j),b)}function _(j){return e.exit("codeFenced"),t(j)}function k(j,N,O){let I=0;return P;function P(F){return j.enter("lineEnding"),j.consume(F),j.exit("lineEnding"),S}function S(F){return j.enter("codeFencedFence"),Vt(F)?en(j,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):D(F)}function D(F){return F===l?(j.enter("codeFencedFenceSequence"),L(F)):O(F)}function L(F){return F===l?(I++,j.consume(F),L):I>=o?(j.exit("codeFencedFenceSequence"),Vt(F)?en(j,U,"whitespace")(F):U(F)):O(F)}function U(F){return F===null||kt(F)?(j.exit("codeFencedFence"),N(F)):O(F)}}}function kue(e,t,n){const r=this;return a;function a(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const sj={name:"codeIndented",tokenize:Nue},Sue={partial:!0,tokenize:Cue};function Nue(e,t,n){const r=this;return a;function a(u){return e.enter("codeIndented"),en(e,s,"linePrefix",5)(u)}function s(u){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):kt(u)?e.attempt(Sue,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||kt(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function Cue(e,t,n){const r=this;return a;function a(o){return r.parser.lazy[r.now().line]?n(o):kt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):en(e,s,"linePrefix",5)(o)}function s(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):kt(o)?a(o):n(o)}}const Aue={name:"codeText",previous:Tue,resolve:Eue,tokenize:Pue};function Eue(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function Tue(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Pue(e,t,n){let r=0,a,s;return o;function o(h){return e.enter("codeText"),e.enter("codeTextSequence"),l(h)}function l(h){return h===96?(e.consume(h),r++,l):(e.exit("codeTextSequence"),c(h))}function c(h){return h===null?n(h):h===32?(e.enter("space"),e.consume(h),e.exit("space"),c):h===96?(s=e.enter("codeTextSequence"),a=0,d(h)):kt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||kt(h)?(e.exit("codeTextData"),c(h)):(e.consume(h),u)}function d(h){return h===96?(e.consume(h),a++,d):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(h)):(s.type="codeTextData",u(h))}}class Oue{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const a=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return r&&Zh(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Zh(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Zh(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Zh(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Zh(this.left,n.reverse())}}}function Zh(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function B6(e){const t={};let n=-1,r,a,s,o,l,c,u;const d=new Oue(e);for(;++n<d.length;){for(;n in t;)n=t[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Iue(d,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,a=void 0;s--;)if(o=d.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(d.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(r[1].end={...d.get(a)[1].start},l=d.slice(a,n),l.unshift(r),d.splice(a,n-a+1,l))}}return ri(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function Iue(e,t){const n=e.get(t)[1],r=e.get(t)[2];let a=t-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let d,h,f=-1,m=n,g=0,v=0;const x=[v];for(;m;){for(;e.get(++a)[1]!==m;);s.push(a),m._tokenizer||(d=r.sliceStream(m),m.next||d.push(null),h&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=m,m=m.next}for(m=n;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(v=f+1,x.push(v),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):x.pop(),f=x.length;f--;){const y=l.slice(x[f],x[f+1]),w=s.pop();c.push([w,w+y.length-1]),e.splice(w,2,y)}for(c.reverse(),f=-1;++f<c.length;)u[g+c[f][0]]=g+c[f][1],g+=c[f][1]-c[f][0]-1;return u}const Rue={resolve:Due,tokenize:Lue},Mue={partial:!0,tokenize:$ue};function Due(e){return B6(e),e}function Lue(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?s(l):kt(l)?e.check(Mue,o,s)(l):(e.consume(l),a)}function s(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function $ue(e,t,n){const r=this;return a;function a(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),en(e,s,"linePrefix")}function s(o){if(o===null||kt(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function z6(e,t,n,r,a,s,o,l,c){const u=c||Number.POSITIVE_INFINITY;let d=0;return h;function h(y){return y===60?(e.enter(r),e.enter(a),e.enter(s),e.consume(y),e.exit(s),f):y===null||y===32||y===41||ky(y)?n(y):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(y))}function f(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(a),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===62?(e.exit("chunkString"),e.exit(l),f(y)):y===null||y===60||kt(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===60||y===62||y===92?(e.consume(y),m):m(y)}function v(y){return!d&&(y===null||y===41||Cn(y))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(y)):d<u&&y===40?(e.consume(y),d++,v):y===41?(e.consume(y),d--,v):y===null||y===32||y===40||ky(y)?n(y):(e.consume(y),y===92?x:v)}function x(y){return y===40||y===41||y===92?(e.consume(y),v):v(y)}}function W6(e,t,n,r,a,s){const o=this;let l=0,c;return u;function u(m){return e.enter(r),e.enter(a),e.consume(m),e.exit(a),e.enter(s),d}function d(m){return l>999||m===null||m===91||m===93&&!c||m===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(e.exit(s),e.enter(a),e.consume(m),e.exit(a),e.exit(r),t):kt(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===null||m===91||m===93||kt(m)||l++>999?(e.exit("chunkString"),d(m)):(e.consume(m),c||(c=!Vt(m)),m===92?f:h)}function f(m){return m===91||m===92||m===93?(e.consume(m),l++,h):h(m)}}function q6(e,t,n,r,a,s){let o;return l;function l(f){return f===34||f===39||f===40?(e.enter(r),e.enter(a),e.consume(f),e.exit(a),o=f===40?41:f,c):n(f)}function c(f){return f===o?(e.enter(a),e.consume(f),e.exit(a),e.exit(r),t):(e.enter(s),u(f))}function u(f){return f===o?(e.exit(s),c(o)):f===null?n(f):kt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),en(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===o||f===null||kt(f)?(e.exit("chunkString"),u(f)):(e.consume(f),f===92?h:d)}function h(f){return f===o||f===92?(e.consume(f),d):d(f)}}function Lf(e,t){let n;return r;function r(a){return kt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):Vt(a)?en(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}const Fue={name:"definition",tokenize:Bue},Uue={partial:!0,tokenize:zue};function Bue(e,t,n){const r=this;let a;return s;function s(m){return e.enter("definition"),o(m)}function o(m){return W6.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function l(m){return a=rs(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),c):n(m)}function c(m){return Cn(m)?Lf(e,u)(m):u(m)}function u(m){return z6(e,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function d(m){return e.attempt(Uue,h,h)(m)}function h(m){return Vt(m)?en(e,f,"whitespace")(m):f(m)}function f(m){return m===null||kt(m)?(e.exit("definition"),r.parser.defined.push(a),t(m)):n(m)}}function zue(e,t,n){return r;function r(l){return Cn(l)?Lf(e,a)(l):n(l)}function a(l){return q6(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Vt(l)?en(e,o,"whitespace")(l):o(l)}function o(l){return l===null||kt(l)?t(l):n(l)}}const Wue={name:"hardBreakEscape",tokenize:que};function que(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),a}function a(s){return kt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Hue={name:"headingAtx",resolve:Kue,tokenize:Vue};function Kue(e,t){let n=e.length-2,r=3,a,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},ri(e,r,n-r+1,[["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t]])),e}function Vue(e,t,n){let r=0;return a;function a(d){return e.enter("atxHeading"),s(d)}function s(d){return e.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(e.consume(d),o):d===null||Cn(d)?(e.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(e.enter("atxHeadingSequence"),c(d)):d===null||kt(d)?(e.exit("atxHeading"),t(d)):Vt(d)?en(e,l,"whitespace")(d):(e.enter("atxHeadingText"),u(d))}function c(d){return d===35?(e.consume(d),c):(e.exit("atxHeadingSequence"),l(d))}function u(d){return d===null||d===35||Cn(d)?(e.exit("atxHeadingText"),l(d)):(e.consume(d),u)}}const Gue=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],M2=["pre","script","style","textarea"],Yue={concrete:!0,name:"htmlFlow",resolveTo:Que,tokenize:Zue},Xue={partial:!0,tokenize:tde},Jue={partial:!0,tokenize:ede};function Que(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Zue(e,t,n){const r=this;let a,s,o,l,c;return u;function u(C){return d(C)}function d(C){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(C),h}function h(C){return C===33?(e.consume(C),f):C===47?(e.consume(C),s=!0,v):C===63?(e.consume(C),a=3,r.interrupt?t:A):pa(C)?(e.consume(C),o=String.fromCharCode(C),x):n(C)}function f(C){return C===45?(e.consume(C),a=2,m):C===91?(e.consume(C),a=5,l=0,g):pa(C)?(e.consume(C),a=4,r.interrupt?t:A):n(C)}function m(C){return C===45?(e.consume(C),r.interrupt?t:A):n(C)}function g(C){const W="CDATA[";return C===W.charCodeAt(l++)?(e.consume(C),l===W.length?r.interrupt?t:D:g):n(C)}function v(C){return pa(C)?(e.consume(C),o=String.fromCharCode(C),x):n(C)}function x(C){if(C===null||C===47||C===62||Cn(C)){const W=C===47,Q=o.toLowerCase();return!W&&!s&&M2.includes(Q)?(a=1,r.interrupt?t(C):D(C)):Gue.includes(o.toLowerCase())?(a=6,W?(e.consume(C),y):r.interrupt?t(C):D(C)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(C):s?w(C):b(C))}return C===45||na(C)?(e.consume(C),o+=String.fromCharCode(C),x):n(C)}function y(C){return C===62?(e.consume(C),r.interrupt?t:D):n(C)}function w(C){return Vt(C)?(e.consume(C),w):P(C)}function b(C){return C===47?(e.consume(C),P):C===58||C===95||pa(C)?(e.consume(C),_):Vt(C)?(e.consume(C),b):P(C)}function _(C){return C===45||C===46||C===58||C===95||na(C)?(e.consume(C),_):k(C)}function k(C){return C===61?(e.consume(C),j):Vt(C)?(e.consume(C),k):b(C)}function j(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(e.consume(C),c=C,N):Vt(C)?(e.consume(C),j):O(C)}function N(C){return C===c?(e.consume(C),c=null,I):C===null||kt(C)?n(C):(e.consume(C),N)}function O(C){return C===null||C===34||C===39||C===47||C===60||C===61||C===62||C===96||Cn(C)?k(C):(e.consume(C),O)}function I(C){return C===47||C===62||Vt(C)?b(C):n(C)}function P(C){return C===62?(e.consume(C),S):n(C)}function S(C){return C===null||kt(C)?D(C):Vt(C)?(e.consume(C),S):n(C)}function D(C){return C===45&&a===2?(e.consume(C),M):C===60&&a===1?(e.consume(C),T):C===62&&a===4?(e.consume(C),B):C===63&&a===3?(e.consume(C),A):C===93&&a===5?(e.consume(C),$):kt(C)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(Xue,R,L)(C)):C===null||kt(C)?(e.exit("htmlFlowData"),L(C)):(e.consume(C),D)}function L(C){return e.check(Jue,U,R)(C)}function U(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),F}function F(C){return C===null||kt(C)?L(C):(e.enter("htmlFlowData"),D(C))}function M(C){return C===45?(e.consume(C),A):D(C)}function T(C){return C===47?(e.consume(C),o="",E):D(C)}function E(C){if(C===62){const W=o.toLowerCase();return M2.includes(W)?(e.consume(C),B):D(C)}return pa(C)&&o.length<8?(e.consume(C),o+=String.fromCharCode(C),E):D(C)}function $(C){return C===93?(e.consume(C),A):D(C)}function A(C){return C===62?(e.consume(C),B):C===45&&a===2?(e.consume(C),A):D(C)}function B(C){return C===null||kt(C)?(e.exit("htmlFlowData"),R(C)):(e.consume(C),B)}function R(C){return e.exit("htmlFlow"),t(C)}}function ede(e,t,n){const r=this;return a;function a(o){return kt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function tde(e,t,n){return r;function r(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Gp,t,n)}}const nde={name:"htmlText",tokenize:rde};function rde(e,t,n){const r=this;let a,s,o;return l;function l(A){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(A),c}function c(A){return A===33?(e.consume(A),u):A===47?(e.consume(A),k):A===63?(e.consume(A),b):pa(A)?(e.consume(A),O):n(A)}function u(A){return A===45?(e.consume(A),d):A===91?(e.consume(A),s=0,g):pa(A)?(e.consume(A),w):n(A)}function d(A){return A===45?(e.consume(A),m):n(A)}function h(A){return A===null?n(A):A===45?(e.consume(A),f):kt(A)?(o=h,T(A)):(e.consume(A),h)}function f(A){return A===45?(e.consume(A),m):h(A)}function m(A){return A===62?M(A):A===45?f(A):h(A)}function g(A){const B="CDATA[";return A===B.charCodeAt(s++)?(e.consume(A),s===B.length?v:g):n(A)}function v(A){return A===null?n(A):A===93?(e.consume(A),x):kt(A)?(o=v,T(A)):(e.consume(A),v)}function x(A){return A===93?(e.consume(A),y):v(A)}function y(A){return A===62?M(A):A===93?(e.consume(A),y):v(A)}function w(A){return A===null||A===62?M(A):kt(A)?(o=w,T(A)):(e.consume(A),w)}function b(A){return A===null?n(A):A===63?(e.consume(A),_):kt(A)?(o=b,T(A)):(e.consume(A),b)}function _(A){return A===62?M(A):b(A)}function k(A){return pa(A)?(e.consume(A),j):n(A)}function j(A){return A===45||na(A)?(e.consume(A),j):N(A)}function N(A){return kt(A)?(o=N,T(A)):Vt(A)?(e.consume(A),N):M(A)}function O(A){return A===45||na(A)?(e.consume(A),O):A===47||A===62||Cn(A)?I(A):n(A)}function I(A){return A===47?(e.consume(A),M):A===58||A===95||pa(A)?(e.consume(A),P):kt(A)?(o=I,T(A)):Vt(A)?(e.consume(A),I):M(A)}function P(A){return A===45||A===46||A===58||A===95||na(A)?(e.consume(A),P):S(A)}function S(A){return A===61?(e.consume(A),D):kt(A)?(o=S,T(A)):Vt(A)?(e.consume(A),S):I(A)}function D(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(e.consume(A),a=A,L):kt(A)?(o=D,T(A)):Vt(A)?(e.consume(A),D):(e.consume(A),U)}function L(A){return A===a?(e.consume(A),a=void 0,F):A===null?n(A):kt(A)?(o=L,T(A)):(e.consume(A),L)}function U(A){return A===null||A===34||A===39||A===60||A===61||A===96?n(A):A===47||A===62||Cn(A)?I(A):(e.consume(A),U)}function F(A){return A===47||A===62||Cn(A)?I(A):n(A)}function M(A){return A===62?(e.consume(A),e.exit("htmlTextData"),e.exit("htmlText"),t):n(A)}function T(A){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),E}function E(A){return Vt(A)?en(e,$,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):$(A)}function $(A){return e.enter("htmlTextData"),o(A)}}const $C={name:"labelEnd",resolveAll:ode,resolveTo:lde,tokenize:cde},ade={tokenize:ude},ide={tokenize:dde},sde={tokenize:hde};function ode(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const a=r.type==="labelImage"?4:2;r.type="data",t+=a}}return e.length!==n.length&&ri(e,0,e.length,n),e}function lde(e,t){let n=e.length,r=0,a,s,o,l;for(;n--;)if(a=e[n][1],s){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(s=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(o=n);const c={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},d={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=bi(l,e.slice(s+1,s+r+3)),l=bi(l,[["enter",d,t]]),l=bi(l,Lb(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),l=bi(l,[["exit",d,t],e[o-2],e[o-1],["exit",u,t]]),l=bi(l,e.slice(o+1)),l=bi(l,[["exit",c,t]]),ri(e,s,e.length,l),e}function cde(e,t,n){const r=this;let a=r.events.length,s,o;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){s=r.events[a][1];break}return l;function l(f){return s?s._inactive?h(f):(o=r.parser.defined.includes(rs(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),c):n(f)}function c(f){return f===40?e.attempt(ade,d,o?d:h)(f):f===91?e.attempt(ide,d,o?u:h)(f):o?d(f):h(f)}function u(f){return e.attempt(sde,d,h)(f)}function d(f){return t(f)}function h(f){return s._balanced=!0,n(f)}}function ude(e,t,n){return r;function r(h){return e.enter("resource"),e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),a}function a(h){return Cn(h)?Lf(e,s)(h):s(h)}function s(h){return h===41?d(h):z6(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Cn(h)?Lf(e,c)(h):d(h)}function l(h){return n(h)}function c(h){return h===34||h===39||h===40?q6(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function u(h){return Cn(h)?Lf(e,d)(h):d(h)}function d(h){return h===41?(e.enter("resourceMarker"),e.consume(h),e.exit("resourceMarker"),e.exit("resource"),t):n(h)}}function dde(e,t,n){const r=this;return a;function a(l){return W6.call(r,e,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(rs(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function hde(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),a}function a(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const fde={name:"labelStartImage",resolveAll:$C.resolveAll,tokenize:mde};function mde(e,t,n){const r=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),s}function s(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const pde={name:"labelStartLink",resolveAll:$C.resolveAll,tokenize:gde};function gde(e,t,n){const r=this;return a;function a(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const oj={name:"lineEnding",tokenize:vde};function vde(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),en(e,t,"linePrefix")}}const Tv={name:"thematicBreak",tokenize:yde};function yde(e,t,n){let r=0,a;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return a=u,l(u)}function l(u){return u===a?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||kt(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===a?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),Vt(u)?en(e,l,"whitespace")(u):l(u))}}const ka={continuation:{tokenize:jde},exit:kde,name:"list",tokenize:wde},xde={partial:!0,tokenize:Sde},bde={partial:!0,tokenize:_de};function wde(e,t,n){const r=this,a=r.events[r.events.length-1];let s=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return l;function l(m){const g=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:$1(m)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(Tv,n,u)(m):u(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(m)}return n(m)}function c(m){return $1(m)&&++o<10?(e.consume(m),c):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),u(m)):n(m)}function u(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(Gp,r.interrupt?n:d,e.attempt(xde,f,h))}function d(m){return r.containerState.initialBlankLine=!0,s++,f(m)}function h(m){return Vt(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),f):n(m)}function f(m){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function jde(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Gp,a,s);function a(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,en(e,t,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!Vt(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(bde,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,en(e,e.attempt(ka,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function _de(e,t,n){const r=this;return en(e,a,"listItemIndent",r.containerState.size+1);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function kde(e){e.exit(this.containerState.type)}function Sde(e,t,n){const r=this;return en(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(s){const o=r.events[r.events.length-1];return!Vt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const D2={name:"setextUnderline",resolveTo:Nde,tokenize:Cde};function Nde(e,t){let n=e.length,r,a,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",s?(e.splice(a,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function Cde(e,t,n){const r=this;let a;return s;function s(u){let d=r.events.length,h;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){h=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(e.enter("setextHeadingLine"),a=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===a?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Vt(u)?en(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||kt(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const Ade={tokenize:Ede};function Ede(e){const t=this,n=e.attempt(Gp,r,e.attempt(this.parser.constructs.flowInitial,a,en(e,e.attempt(this.parser.constructs.flow,a,e.attempt(Rue,a)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Tde={resolveAll:K6()},Pde=H6("string"),Ode=H6("text");function H6(e){return{resolveAll:K6(e==="text"?Ide:void 0),tokenize:t};function t(n){const r=this,a=this.parser.constructs[e],s=n.attempt(a,o,l);return o;function o(d){return u(d)?s(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),c}function c(d){return u(d)?(n.exit("data"),s(d)):(n.consume(d),c)}function u(d){if(d===null)return!0;const h=a[d];let f=-1;if(h)for(;++f<h.length;){const m=h[f];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function K6(e){return t;function t(n,r){let a=-1,s;for(;++a<=n.length;)s===void 0?n[a]&&n[a][1].type==="data"&&(s=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==s+2&&(n[s][1].end=n[a-1][1].end,n.splice(s+2,a-s-2),a=s+2),s=void 0);return e?e(n,r):n}}function Ide(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let s=a.length,o=-1,l=0,c;for(;s--;){const u=a[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const Rde={42:ka,43:ka,45:ka,48:ka,49:ka,50:ka,51:ka,52:ka,53:ka,54:ka,55:ka,56:ka,57:ka,62:$6},Mde={91:Fue},Dde={[-2]:sj,[-1]:sj,32:sj},Lde={35:Hue,42:Tv,45:[D2,Tv],60:Yue,61:D2,95:Tv,96:R2,126:R2},$de={38:U6,92:F6},Fde={[-5]:oj,[-4]:oj,[-3]:oj,33:fde,38:U6,42:F1,60:[pue,nde],91:pde,92:[Wue,F6],93:$C,95:F1,96:Aue},Ude={null:[F1,Tde]},Bde={null:[42,95]},zde={null:[]},Wde=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Bde,contentInitial:Mde,disable:zde,document:Rde,flow:Lde,flowInitial:Dde,insideSpan:Ude,string:$de,text:Fde},Symbol.toStringTag,{value:"Module"}));function qde(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},s=[];let o=[],l=[];const c={attempt:N(k),check:N(j),consume:w,enter:b,exit:_,interrupt:N(j,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:g,parser:e,previous:null,sliceSerialize:f,sliceStream:m,write:h};let d=t.tokenize.call(u,c);return t.resolveAll&&s.push(t),u;function h(S){return o=bi(o,S),x(),o[o.length-1]!==null?[]:(O(t,0),u.events=Lb(s,u.events,u),u.events)}function f(S,D){return Kde(m(S),D)}function m(S){return Hde(o,S)}function g(){const{_bufferIndex:S,_index:D,line:L,column:U,offset:F}=r;return{_bufferIndex:S,_index:D,line:L,column:U,offset:F}}function v(S){a[S.line]=S.column,P()}function x(){let S;for(;r._index<o.length;){const D=o[r._index];if(typeof D=="string")for(S=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===S&&r._bufferIndex<D.length;)y(D.charCodeAt(r._bufferIndex));else y(D)}}function y(S){d=d(S)}function w(S){kt(S)?(r.line++,r.column=1,r.offset+=S===-3?2:1,P()):S!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=S}function b(S,D){const L=D||{};return L.type=S,L.start=g(),u.events.push(["enter",L,u]),l.push(L),L}function _(S){const D=l.pop();return D.end=g(),u.events.push(["exit",D,u]),D}function k(S,D){O(S,D.from)}function j(S,D){D.restore()}function N(S,D){return L;function L(U,F,M){let T,E,$,A;return Array.isArray(U)?R(U):"tokenize"in U?R([U]):B(U);function B(X){return Z;function Z(te){const J=te!==null&&X[te],ie=te!==null&&X.null,ge=[...Array.isArray(J)?J:J?[J]:[],...Array.isArray(ie)?ie:ie?[ie]:[]];return R(ge)(te)}}function R(X){return T=X,E=0,X.length===0?M:C(X[E])}function C(X){return Z;function Z(te){return A=I(),$=X,X.partial||(u.currentConstruct=X),X.name&&u.parser.constructs.disable.null.includes(X.name)?Q():X.tokenize.call(D?Object.assign(Object.create(u),D):u,c,W,Q)(te)}}function W(X){return S($,A),F}function Q(X){return A.restore(),++E<T.length?C(T[E]):M}}}function O(S,D){S.resolveAll&&!s.includes(S)&&s.push(S),S.resolve&&ri(u.events,D,u.events.length-D,S.resolve(u.events.slice(D),u)),S.resolveTo&&(u.events=S.resolveTo(u.events,u))}function I(){const S=g(),D=u.previous,L=u.currentConstruct,U=u.events.length,F=Array.from(l);return{from:U,restore:M};function M(){r=S,u.previous=D,u.currentConstruct=L,u.events.length=U,l=F,P()}}function P(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function Hde(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,s=t.end._bufferIndex;let o;if(n===a)o=[e[n].slice(r,s)];else{if(o=e.slice(n,a),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}s>0&&o.push(e[a].slice(0,s))}return o}function Kde(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&a)continue;o=" ";break}default:o=String.fromCharCode(s)}a=s===-2,r.push(o)}return r.join("")}function Vde(e){const r={constructs:D6([Wde,...(e||{}).extensions||[]]),content:a(lue),defined:[],document:a(uue),flow:a(Ade),lazy:{},string:a(Pde),text:a(Ode)};return r;function a(s){return o;function o(l){return qde(r,s,l)}}}function Gde(e){for(;!B6(e););return e}const L2=/[\0\t\n\r]/g;function Yde(){let e=1,t="",n=!0,r;return a;function a(s,o,l){const c=[];let u,d,h,f,m;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,t="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(L2.lastIndex=h,u=L2.exec(s),f=u&&u.index!==void 0?u.index:s.length,m=s.charCodeAt(f),!u){t=s.slice(h);break}if(m===10&&h===f&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),h<f&&(c.push(s.slice(h,f)),e+=f-h),m){case 0:{c.push(65533),e++;break}case 9:{for(d=Math.ceil(e/4)*4,c.push(-2);e++<d;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}h=f+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const Xde=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Jde(e){return e.replace(Xde,Qde)}function Qde(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),s=a===120||a===88;return L6(n.slice(s?2:1),s?16:10)}return LC(n)||e}const V6={}.hasOwnProperty;function Zde(e,t,n){return typeof t!="string"&&(n=t,t=void 0),ehe(n)(Gde(Vde(n).document().write(Yde()(e,t,!0))))}function ehe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ye),autolinkProtocol:I,autolinkEmail:I,atxHeading:s(K),blockQuote:s(ie),characterEscape:I,characterReference:I,codeFenced:s(ge),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ge,o),codeText:s(ae,o),codeTextData:I,data:I,codeFlowValue:I,definition:s(Re),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(me),hardBreakEscape:s(de),hardBreakTrailing:s(de),htmlFlow:s($e,o),htmlFlowData:I,htmlText:s($e,o),htmlTextData:I,image:s(nt),label:o,link:s(Ye),listItem:s(Ze),listItemValue:f,listOrdered:s(ft,h),listUnordered:s(ft),paragraph:s(ut),reference:C,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(K),strong:s(ee),thematicBreak:s(dt)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:J,autolinkProtocol:te,blockQuote:c(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:Q,characterReferenceMarkerNumeric:Q,characterReferenceValue:X,characterReference:Z,codeFenced:c(x),codeFencedFence:v,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:P,codeIndented:c(y),codeText:c(F),codeTextData:P,data:P,definition:c(),definitionDestinationString:_,definitionLabelString:w,definitionTitleString:b,emphasis:c(),hardBreakEscape:c(D),hardBreakTrailing:c(D),htmlFlow:c(L),htmlFlowData:P,htmlText:c(U),htmlTextData:P,image:c(T),label:$,labelText:E,lineEnding:S,link:c(M),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:W,resourceDestinationString:A,resourceTitleString:B,resource:R,setextHeading:c(O),setextHeadingLineSequence:N,setextHeadingText:j,strong:c(),thematicBreak:c()}};G6(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(se){let ve={type:"root",children:[]};const oe={stack:[ve],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:d,data:n},Xe=[];let ke=-1;for(;++ke<se.length;)if(se[ke][1].type==="listOrdered"||se[ke][1].type==="listUnordered")if(se[ke][0]==="enter")Xe.push(ke);else{const rt=Xe.pop();ke=a(se,rt,ke)}for(ke=-1;++ke<se.length;){const rt=t[se[ke][0]];V6.call(rt,se[ke][1].type)&&rt[se[ke][1].type].call(Object.assign({sliceSerialize:se[ke][2].sliceSerialize},oe),se[ke][1])}if(oe.tokenStack.length>0){const rt=oe.tokenStack[oe.tokenStack.length-1];(rt[1]||$2).call(oe,void 0,rt[0])}for(ve.position={start:qo(se.length>0?se[0][1].start:{line:1,column:1,offset:0}),end:qo(se.length>0?se[se.length-2][1].end:{line:1,column:1,offset:0})},ke=-1;++ke<t.transforms.length;)ve=t.transforms[ke](ve)||ve;return ve}function a(se,ve,oe){let Xe=ve-1,ke=-1,rt=!1,bt,ue,Se,we;for(;++Xe<=oe;){const Te=se[Xe];switch(Te[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Te[0]==="enter"?ke++:ke--,we=void 0;break}case"lineEndingBlank":{Te[0]==="enter"&&(bt&&!we&&!ke&&!Se&&(Se=Xe),we=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:we=void 0}if(!ke&&Te[0]==="enter"&&Te[1].type==="listItemPrefix"||ke===-1&&Te[0]==="exit"&&(Te[1].type==="listUnordered"||Te[1].type==="listOrdered")){if(bt){let je=Xe;for(ue=void 0;je--;){const Ee=se[je];if(Ee[1].type==="lineEnding"||Ee[1].type==="lineEndingBlank"){if(Ee[0]==="exit")continue;ue&&(se[ue][1].type="lineEndingBlank",rt=!0),Ee[1].type="lineEnding",ue=je}else if(!(Ee[1].type==="linePrefix"||Ee[1].type==="blockQuotePrefix"||Ee[1].type==="blockQuotePrefixWhitespace"||Ee[1].type==="blockQuoteMarker"||Ee[1].type==="listItemIndent"))break}Se&&(!ue||Se<ue)&&(bt._spread=!0),bt.end=Object.assign({},ue?se[ue][1].start:Te[1].end),se.splice(ue||Xe,0,["exit",bt,Te[2]]),Xe++,oe++}if(Te[1].type==="listItemPrefix"){const je={type:"listItem",_spread:!1,start:Object.assign({},Te[1].start),end:void 0};bt=je,se.splice(Xe,0,["enter",je,Te[2]]),Xe++,oe++,Se=void 0,we=!0}}}return se[ve][1]._spread=rt,oe}function s(se,ve){return oe;function oe(Xe){l.call(this,se(Xe),Xe),ve&&ve.call(this,Xe)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(se,ve,oe){this.stack[this.stack.length-1].children.push(se),this.stack.push(se),this.tokenStack.push([ve,oe||void 0]),se.position={start:qo(ve.start),end:void 0}}function c(se){return ve;function ve(oe){se&&se.call(this,oe),u.call(this,oe)}}function u(se,ve){const oe=this.stack.pop(),Xe=this.tokenStack.pop();if(Xe)Xe[0].type!==se.type&&(ve?ve.call(this,se,Xe[0]):(Xe[1]||$2).call(this,se,Xe[0]));else throw new Error("Cannot close `"+se.type+"` ("+Df({start:se.start,end:se.end})+"): its not open");oe.position.end=qo(se.end)}function d(){return DC(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(se){if(this.data.expectingFirstListItemValue){const ve=this.stack[this.stack.length-2];ve.start=Number.parseInt(this.sliceSerialize(se),10),this.data.expectingFirstListItemValue=void 0}}function m(){const se=this.resume(),ve=this.stack[this.stack.length-1];ve.lang=se}function g(){const se=this.resume(),ve=this.stack[this.stack.length-1];ve.meta=se}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const se=this.resume(),ve=this.stack[this.stack.length-1];ve.value=se.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const se=this.resume(),ve=this.stack[this.stack.length-1];ve.value=se.replace(/(\r?\n|\r)$/g,"")}function w(se){const ve=this.resume(),oe=this.stack[this.stack.length-1];oe.label=ve,oe.identifier=rs(this.sliceSerialize(se)).toLowerCase()}function b(){const se=this.resume(),ve=this.stack[this.stack.length-1];ve.title=se}function _(){const se=this.resume(),ve=this.stack[this.stack.length-1];ve.url=se}function k(se){const ve=this.stack[this.stack.length-1];if(!ve.depth){const oe=this.sliceSerialize(se).length;ve.depth=oe}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function N(se){const ve=this.stack[this.stack.length-1];ve.depth=this.sliceSerialize(se).codePointAt(0)===61?1:2}function O(){this.data.setextHeadingSlurpLineEnding=void 0}function I(se){const oe=this.stack[this.stack.length-1].children;let Xe=oe[oe.length-1];(!Xe||Xe.type!=="text")&&(Xe=qe(),Xe.position={start:qo(se.start),end:void 0},oe.push(Xe)),this.stack.push(Xe)}function P(se){const ve=this.stack.pop();ve.value+=this.sliceSerialize(se),ve.position.end=qo(se.end)}function S(se){const ve=this.stack[this.stack.length-1];if(this.data.atHardBreak){const oe=ve.children[ve.children.length-1];oe.position.end=qo(se.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ve.type)&&(I.call(this,se),P.call(this,se))}function D(){this.data.atHardBreak=!0}function L(){const se=this.resume(),ve=this.stack[this.stack.length-1];ve.value=se}function U(){const se=this.resume(),ve=this.stack[this.stack.length-1];ve.value=se}function F(){const se=this.resume(),ve=this.stack[this.stack.length-1];ve.value=se}function M(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=ve,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function T(){const se=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";se.type+="Reference",se.referenceType=ve,delete se.url,delete se.title}else delete se.identifier,delete se.label;this.data.referenceType=void 0}function E(se){const ve=this.sliceSerialize(se),oe=this.stack[this.stack.length-2];oe.label=Jde(ve),oe.identifier=rs(ve).toLowerCase()}function $(){const se=this.stack[this.stack.length-1],ve=this.resume(),oe=this.stack[this.stack.length-1];if(this.data.inReference=!0,oe.type==="link"){const Xe=se.children;oe.children=Xe}else oe.alt=ve}function A(){const se=this.resume(),ve=this.stack[this.stack.length-1];ve.url=se}function B(){const se=this.resume(),ve=this.stack[this.stack.length-1];ve.title=se}function R(){this.data.inReference=void 0}function C(){this.data.referenceType="collapsed"}function W(se){const ve=this.resume(),oe=this.stack[this.stack.length-1];oe.label=ve,oe.identifier=rs(this.sliceSerialize(se)).toLowerCase(),this.data.referenceType="full"}function Q(se){this.data.characterReferenceType=se.type}function X(se){const ve=this.sliceSerialize(se),oe=this.data.characterReferenceType;let Xe;oe?(Xe=L6(ve,oe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Xe=LC(ve);const ke=this.stack[this.stack.length-1];ke.value+=Xe}function Z(se){const ve=this.stack.pop();ve.position.end=qo(se.end)}function te(se){P.call(this,se);const ve=this.stack[this.stack.length-1];ve.url=this.sliceSerialize(se)}function J(se){P.call(this,se);const ve=this.stack[this.stack.length-1];ve.url="mailto:"+this.sliceSerialize(se)}function ie(){return{type:"blockquote",children:[]}}function ge(){return{type:"code",lang:null,meta:null,value:""}}function ae(){return{type:"inlineCode",value:""}}function Re(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function me(){return{type:"emphasis",children:[]}}function K(){return{type:"heading",depth:0,children:[]}}function de(){return{type:"break"}}function $e(){return{type:"html",value:""}}function nt(){return{type:"image",title:null,url:"",alt:null}}function Ye(){return{type:"link",title:null,url:"",children:[]}}function ft(se){return{type:"list",ordered:se.type==="listOrdered",start:null,spread:se._spread,children:[]}}function Ze(se){return{type:"listItem",spread:se._spread,checked:null,children:[]}}function ut(){return{type:"paragraph",children:[]}}function ee(){return{type:"strong",children:[]}}function qe(){return{type:"text",value:""}}function dt(){return{type:"thematicBreak"}}}function qo(e){return{line:e.line,column:e.column,offset:e.offset}}function G6(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?G6(e,r):the(e,r)}}function the(e,t){let n;for(n in t)if(V6.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function $2(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Df({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Df({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Df({start:t.start,end:t.end})+") is still open")}function nhe(e){const t=this;t.parser=n;function n(r){return Zde(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function rhe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function ahe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function ihe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function she(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ohe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function lhe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=jh(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function che(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function uhe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Y6(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const a=e.all(t),s=a[0];s&&s.type==="text"?s.value="["+s.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=r:a.push({type:"text",value:r}),a}function dhe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Y6(e,t);const a={src:jh(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,s),e.applyData(t,s)}function hhe(e,t){const n={src:jh(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function fhe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function mhe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Y6(e,t);const a={href:jh(r.url||"")};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function phe(e,t){const n={href:jh(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ghe(e,t,n){const r=e.all(t),a=n?vhe(n):X6(t),s={},o=[];if(typeof t.checked=="boolean"){const d=r[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const d=r[l];(a||l!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!a?o.push(...d.children):o.push(d)}const c=r[r.length-1];c&&(a||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function vhe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=X6(n[r])}return t}function X6(e){const t=e.spread;return t??e.children.length>1}function yhe(e,t){const n={},r=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++a<r.length;){const o=r[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function xhe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bhe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function whe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jhe(e,t){const n=e.all(t),r=n.shift(),a=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),a.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=OC(t.children[1]),c=E6(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),a.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,s),e.applyData(t,s)}function _he(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const h=t.children[c],f={},m=o?o[c]:void 0;m&&(f.align=m);let g={type:"element",tagName:s,properties:f,children:[]};h&&(g.children=e.all(h),e.patch(h,g),g=e.applyData(h,g)),u.push(g)}const d={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,d),e.applyData(t,d)}function khe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const F2=9,U2=32;function She(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const s=[];for(;r;)s.push(B2(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return s.push(B2(t.slice(a),a>0,!1)),s.join("")}function B2(e,t,n){let r=0,a=e.length;if(t){let s=e.codePointAt(r);for(;s===F2||s===U2;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(a-1);for(;s===F2||s===U2;)a--,s=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function Nhe(e,t){const n={type:"text",value:She(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Che(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Ahe={blockquote:rhe,break:ahe,code:ihe,delete:she,emphasis:ohe,footnoteReference:lhe,heading:che,html:uhe,imageReference:dhe,image:hhe,inlineCode:fhe,linkReference:mhe,link:phe,listItem:ghe,list:yhe,paragraph:xhe,root:bhe,strong:whe,table:jhe,tableCell:khe,tableRow:_he,text:Nhe,thematicBreak:Che,toml:Ug,yaml:Ug,definition:Ug,footnoteDefinition:Ug};function Ug(){}const J6=-1,$b=0,$f=1,Sy=2,FC=3,UC=4,BC=5,zC=6,Q6=7,Z6=8,z2=typeof self=="object"?self:globalThis,Ehe=(e,t)=>{const n=(a,s)=>(e.set(s,a),a),r=a=>{if(e.has(a))return e.get(a);const[s,o]=t[a];switch(s){case $b:case J6:return n(o,a);case $f:{const l=n([],a);for(const c of o)l.push(r(c));return l}case Sy:{const l=n({},a);for(const[c,u]of o)l[r(c)]=r(u);return l}case FC:return n(new Date(o),a);case UC:{const{source:l,flags:c}=o;return n(new RegExp(l,c),a)}case BC:{const l=n(new Map,a);for(const[c,u]of o)l.set(r(c),r(u));return l}case zC:{const l=n(new Set,a);for(const c of o)l.add(r(c));return l}case Q6:{const{name:l,message:c}=o;return n(new z2[l](c),a)}case Z6:return n(BigInt(o),a);case"BigInt":return n(Object(BigInt(o)),a);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new z2[s](o),a)};return r},W2=e=>Ehe(new Map,e)(0),Nu="",{toString:The}={},{keys:Phe}=Object,ef=e=>{const t=typeof e;if(t!=="object"||!e)return[$b,t];const n=The.call(e).slice(8,-1);switch(n){case"Array":return[$f,Nu];case"Object":return[Sy,Nu];case"Date":return[FC,Nu];case"RegExp":return[UC,Nu];case"Map":return[BC,Nu];case"Set":return[zC,Nu];case"DataView":return[$f,n]}return n.includes("Array")?[$f,n]:n.includes("Error")?[Q6,n]:[Sy,n]},Bg=([e,t])=>e===$b&&(t==="function"||t==="symbol"),Ohe=(e,t,n,r)=>{const a=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=ef(o);switch(l){case $b:{let d=o;switch(c){case"bigint":l=Z6,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return a([J6],o)}return a([l,d],o)}case $f:{if(c){let f=o;return c==="DataView"?f=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(f=new Uint8Array(o)),a([c,[...f]],o)}const d=[],h=a([l,d],o);for(const f of o)d.push(s(f));return h}case Sy:{if(c)switch(c){case"BigInt":return a([c,o.toString()],o);case"Boolean":case"Number":case"String":return a([c,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const d=[],h=a([l,d],o);for(const f of Phe(o))(e||!Bg(ef(o[f])))&&d.push([s(f),s(o[f])]);return h}case FC:return a([l,o.toISOString()],o);case UC:{const{source:d,flags:h}=o;return a([l,{source:d,flags:h}],o)}case BC:{const d=[],h=a([l,d],o);for(const[f,m]of o)(e||!(Bg(ef(f))||Bg(ef(m))))&&d.push([s(f),s(m)]);return h}case zC:{const d=[],h=a([l,d],o);for(const f of o)(e||!Bg(ef(f)))&&d.push(s(f));return h}}const{message:u}=o;return a([l,{name:c,message:u}],o)};return s},q2=(e,{json:t,lossy:n}={})=>{const r=[];return Ohe(!(t||n),!!t,new Map,r)(e),r},Ny=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?W2(q2(e,t)):structuredClone(e):(e,t)=>W2(q2(e,t));function Ihe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Rhe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Mhe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Ihe,r=e.options.footnoteBackLabel||Rhe,a=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const d=e.all(u),h=String(u.identifier).toUpperCase(),f=jh(h.toLowerCase());let m=0;const g=[],v=e.footnoteCounts.get(h);for(;v!==void 0&&++m<=v;){g.length>0&&g.push({type:"text",value:" "});let w=typeof n=="string"?n:n(c,m);typeof w=="string"&&(w={type:"text",value:w}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,m),className:["data-footnote-backref"]},children:Array.isArray(w)?w:[w]})}const x=d[d.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const w=x.children[x.children.length-1];w&&w.type==="text"?w.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...g)}else d.push(...g);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(d,!0)};e.patch(u,y),l.push(y)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Ny(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const Fb=function(e){if(e==null)return Fhe;if(typeof e=="function")return Ub(e);if(typeof e=="object")return Array.isArray(e)?Dhe(e):Lhe(e);if(typeof e=="string")return $he(e);throw new Error("Expected function, string, or object as test")};function Dhe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Fb(e[n]);return Ub(r);function r(...a){let s=-1;for(;++s<t.length;)if(t[s].apply(this,a))return!0;return!1}}function Lhe(e){const t=e;return Ub(n);function n(r){const a=r;let s;for(s in e)if(a[s]!==t[s])return!1;return!0}}function $he(e){return Ub(t);function t(n){return n&&n.type===e}}function Ub(e){return t;function t(n,r,a){return!!(Uhe(n)&&e.call(this,n,typeof r=="number"?r:void 0,a||void 0))}}function Fhe(){return!0}function Uhe(e){return e!==null&&typeof e=="object"&&"type"in e}const ez=[],Bhe=!0,U1=!1,zhe="skip";function tz(e,t,n,r){let a;typeof t=="function"&&typeof n!="function"?(r=n,n=t):a=t;const s=Fb(a),o=r?-1:1;l(e,void 0,[])();function l(c,u,d){const h=c&&typeof c=="object"?c:{};if(typeof h.type=="string"){const m=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(c.type+(m?"<"+m+">":""))+")"})}return f;function f(){let m=ez,g,v,x;if((!t||s(c,u,d[d.length-1]||void 0))&&(m=Whe(n(c,d)),m[0]===U1))return m;if("children"in c&&c.children){const y=c;if(y.children&&m[0]!==zhe)for(v=(r?y.children.length:-1)+o,x=d.concat(y);v>-1&&v<y.children.length;){const w=y.children[v];if(g=l(w,v,x)(),g[0]===U1)return g;v=typeof g[1]=="number"?g[1]:v+o}}return m}}}function Whe(e){return Array.isArray(e)?e:typeof e=="number"?[Bhe,e]:e==null?ez:[e]}function WC(e,t,n,r){let a,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,a=n):(s=t,o=n,a=r),tz(e,s,l,a);function l(c,u){const d=u[u.length-1],h=d?d.children.indexOf(c):void 0;return o(c,h,d)}}const B1={}.hasOwnProperty,qhe={};function Hhe(e,t){const n=t||qhe,r=new Map,a=new Map,s=new Map,o={...Ahe,...n.handlers},l={all:u,applyData:Vhe,definitionById:r,footnoteById:a,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:Khe,wrap:Yhe};return WC(e,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?r:a,f=String(d.identifier).toUpperCase();h.has(f)||h.set(f,d)}}),l;function c(d,h){const f=d.type,m=l.handlers[f];if(B1.call(l.handlers,f)&&m)return m(l,d,h);if(l.options.passThrough&&l.options.passThrough.includes(f)){if("children"in d){const{children:v,...x}=d,y=Ny(x);return y.children=l.all(d),y}return Ny(d)}return(l.options.unknownHandler||Ghe)(l,d,h)}function u(d){const h=[];if("children"in d){const f=d.children;let m=-1;for(;++m<f.length;){const g=l.one(f[m],d);if(g){if(m&&f[m-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=H2(g.value)),!Array.isArray(g)&&g.type==="element")){const v=g.children[0];v&&v.type==="text"&&(v.value=H2(v.value))}Array.isArray(g)?h.push(...g):h.push(g)}}}return h}}function Khe(e,t){e.position&&(t.position=Rce(e))}function Vhe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,a=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Ny(s)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function Ghe(e,t){const n=t.data||{},r="value"in t&&!(B1.call(n,"hProperties")||B1.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Yhe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function H2(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function K2(e,t){const n=Hhe(e,t),r=n.one(e,void 0),a=Mhe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return a&&s.children.push({type:"text",value:`
`},a),s}function Xhe(e,t){return e&&"run"in e?async function(n,r){const a=K2(n,{file:r,...t});await e.run(a,r)}:function(n,r){return K2(n,{file:r,...e||t})}}function V2(e){if(e)throw e}var Pv=Object.prototype.hasOwnProperty,nz=Object.prototype.toString,G2=Object.defineProperty,Y2=Object.getOwnPropertyDescriptor,X2=function(t){return typeof Array.isArray=="function"?Array.isArray(t):nz.call(t)==="[object Array]"},J2=function(t){if(!t||nz.call(t)!=="[object Object]")return!1;var n=Pv.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&Pv.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var a;for(a in t);return typeof a>"u"||Pv.call(t,a)},Q2=function(t,n){G2&&n.name==="__proto__"?G2(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Z2=function(t,n){if(n==="__proto__")if(Pv.call(t,n)){if(Y2)return Y2(t,n).value}else return;return t[n]},Jhe=function e(){var t,n,r,a,s,o,l=arguments[0],c=1,u=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=Z2(l,n),a=Z2(t,n),l!==a&&(d&&a&&(J2(a)||(s=X2(a)))?(s?(s=!1,o=r&&X2(r)?r:[]):o=r&&J2(r)?r:{},Q2(l,{name:n,newValue:e(d,o,a)})):typeof a<"u"&&Q2(l,{name:n,newValue:a}));return l};const lj=vn(Jhe);function z1(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Qhe(){const e=[],t={run:n,use:r};return t;function n(...a){let s=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...a);function l(c,...u){const d=e[++s];let h=-1;if(c){o(c);return}for(;++h<a.length;)(u[h]===null||u[h]===void 0)&&(u[h]=a[h]);a=u,d?Zhe(d,l)(...u):o(null,...u)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function Zhe(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(a);try{c=e.apply(this,o)}catch(u){const d=u;if(l&&n)throw d;return a(d)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,a):c instanceof Error?a(c):s(c))}function a(o,...l){n||(n=!0,t(o,...l))}function s(o){a(null,o)}}const vs={basename:efe,dirname:tfe,extname:nfe,join:rfe,sep:"/"};function efe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Yp(e);let n=0,r=-1,a=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else r<0&&(s=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else o<0&&(s=!0,o=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(r=a):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function tfe(e){if(Yp(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function nfe(e){Yp(e);let t=e.length,n=-1,r=0,a=-1,s=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?a<0?a=t:s!==1&&(s=1):a>-1&&(s=-1)}return a<0||n<0||s===0||s===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function rfe(...e){let t=-1,n;for(;++t<e.length;)Yp(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":afe(n)}function afe(e){Yp(e);const t=e.codePointAt(0)===47;let n=ife(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function ife(e,t){let n="",r=0,a=-1,s=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(a===o-1||s===1))if(a!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),a=o,s=0;continue}}else if(n.length>0){n="",r=0,a=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Yp(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const sfe={cwd:ofe};function ofe(){return"/"}function W1(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function lfe(e){if(typeof e=="string")e=new URL(e);else if(!W1(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return cfe(e)}function cfe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const cj=["history","path","basename","stem","extname","dirname"];class rz{constructor(t){let n;t?W1(t)?n={path:t}:typeof t=="string"||ufe(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":sfe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<cj.length;){const s=cj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let a;for(a in n)cj.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?vs.basename(this.path):void 0}set basename(t){dj(t,"basename"),uj(t,"basename"),this.path=vs.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?vs.dirname(this.path):void 0}set dirname(t){eO(this.basename,"dirname"),this.path=vs.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?vs.extname(this.path):void 0}set extname(t){if(uj(t,"extname"),eO(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=vs.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){W1(t)&&(t=lfe(t)),dj(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?vs.basename(this.path,this.extname):void 0}set stem(t){dj(t,"stem"),uj(t,"stem"),this.path=vs.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=void 0,a}message(t,n,r){const a=new ia(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function uj(e,t){if(e&&e.includes(vs.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+vs.sep+"`")}function dj(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function eO(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function ufe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const dfe=function(e){const r=this.constructor.prototype,a=r[e],s=function(){return a.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},hfe={}.hasOwnProperty;class qC extends dfe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Qhe()}copy(){const t=new qC;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(lj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(mj("data",this.frozen),this.namespace[t]=n,this):hfe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(mj("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const a=n.call(t,...r);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=zg(t),r=this.parser||this.Parser;return hj("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),hj("process",this.parser||this.Parser),fj("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(s,o){const l=zg(t),c=r.parse(l);r.run(c,l,function(d,h,f){if(d||!h||!f)return u(d);const m=h,g=r.stringify(m,f);pfe(g)?f.value=g:f.result=g,u(d,f)});function u(d,h){d||!h?o(d):s?s(h):n(void 0,h)}}}processSync(t){let n=!1,r;return this.freeze(),hj("processSync",this.parser||this.Parser),fj("processSync",this.compiler||this.Compiler),this.process(t,a),nO("processSync","process",n),r;function a(s,o){n=!0,V2(s),r=o}}run(t,n,r){tO(t),this.freeze();const a=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,l){const c=zg(n);a.run(t,c,u);function u(d,h,f){const m=h||t;d?l(d):o?o(m):r(void 0,m,f)}}}runSync(t,n){let r=!1,a;return this.run(t,n,s),nO("runSync","run",r),a;function s(o,l){V2(o),a=l,r=!0}}stringify(t,n){this.freeze();const r=zg(n),a=this.compiler||this.Compiler;return fj("stringify",a),tO(t),a(t,r)}use(t,...n){const r=this.attachers,a=this.namespace;if(mj("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...h]=u;c(d,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(a.settings=lj(!0,a.settings,u.settings))}function l(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const h=u[d];s(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,d){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===u){f=h;break}if(f===-1)r.push([u,...d]);else if(d.length>0){let[m,...g]=d;const v=r[f][1];z1(v)&&z1(m)&&(m=lj(!0,v,m)),r[f]=[u,m,...g]}}}}const ffe=new qC().freeze();function hj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function fj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function mj(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function tO(e){if(!z1(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function nO(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function zg(e){return mfe(e)?e:new rz(e)}function mfe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function pfe(e){return typeof e=="string"||gfe(e)}function gfe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const vfe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",rO=[],aO={allowDangerousHtml:!0},yfe=/^(https?|ircs?|mailto|xmpp)$/i,xfe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Cy(e){const t=bfe(e),n=wfe(e);return jfe(t.runSync(t.parse(n),n),e)}function bfe(e){const t=e.rehypePlugins||rO,n=e.remarkPlugins||rO,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...aO}:aO;return ffe().use(nhe).use(n).use(Xhe,r).use(t)}function wfe(e){const t=e.children||"",n=new rz;return typeof t=="string"&&(n.value=t),n}function jfe(e,t){const n=t.allowedElements,r=t.allowElement,a=t.components,s=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||_fe;for(const d of xfe)Object.hasOwn(t,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+vfe+d.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),WC(e,u),Fce(e,{Fragment:i.Fragment,components:a,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function u(d,h,f){if(d.type==="raw"&&f&&typeof h=="number")return o?f.children.splice(h,1):f.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let m;for(m in ij)if(Object.hasOwn(ij,m)&&Object.hasOwn(d.properties,m)){const g=d.properties[m],v=ij[m];(v===null||v.includes(d.tagName))&&(d.properties[m]=c(String(g||""),m,d))}}if(d.type==="element"){let m=n?!n.includes(d.tagName):s?s.includes(d.tagName):!1;if(!m&&r&&typeof h=="number"&&(m=!r(d,h,f)),m&&f&&typeof h=="number")return l&&d.children?f.children.splice(h,1,...d.children):f.children.splice(h,1),h}}}function _fe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||n!==-1&&t>n||r!==-1&&t>r||yfe.test(e.slice(0,t))?e:""}function iO(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,a=n.indexOf(t);for(;a!==-1;)r++,a=n.indexOf(t,a+t.length);return r}function kfe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function az(e,t,n){const a=Fb((n||{}).ignore||[]),s=Sfe(t);let o=-1;for(;++o<s.length;)tz(e,"text",l);function l(u,d){let h=-1,f;for(;++h<d.length;){const m=d[h],g=f?f.children:void 0;if(a(m,g?g.indexOf(m):void 0,f))return;f=m}if(f)return c(u,d)}function c(u,d){const h=d[d.length-1],f=s[o][0],m=s[o][1];let g=0;const x=h.children.indexOf(u);let y=!1,w=[];f.lastIndex=0;let b=f.exec(u.value);for(;b;){const _=b.index,k={index:b.index,input:b.input,stack:[...d,u]};let j=m(...b,k);if(typeof j=="string"&&(j=j.length>0?{type:"text",value:j}:void 0),j===!1?f.lastIndex=_+1:(g!==_&&w.push({type:"text",value:u.value.slice(g,_)}),Array.isArray(j)?w.push(...j):j&&w.push(j),g=_+b[0].length,y=!0),!f.global)break;b=f.exec(u.value)}return y?(g<u.value.length&&w.push({type:"text",value:u.value.slice(g)}),h.children.splice(x,1,...w)):w=[u],x+w.length}}function Sfe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const a=n[r];t.push([Nfe(a[0]),Cfe(a[1])])}return t}function Nfe(e){return typeof e=="string"?new RegExp(kfe(e),"g"):e}function Cfe(e){return typeof e=="function"?e:function(){return e}}const pj="phrasing",gj=["autolink","link","image","label"];function Afe(){return{transforms:[Mfe],enter:{literalAutolink:Tfe,literalAutolinkEmail:vj,literalAutolinkHttp:vj,literalAutolinkWww:vj},exit:{literalAutolink:Rfe,literalAutolinkEmail:Ife,literalAutolinkHttp:Pfe,literalAutolinkWww:Ofe}}}function Efe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:pj,notInConstruct:gj},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:pj,notInConstruct:gj},{character:":",before:"[ps]",after:"\\/",inConstruct:pj,notInConstruct:gj}]}}function Tfe(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function vj(e){this.config.enter.autolinkProtocol.call(this,e)}function Pfe(e){this.config.exit.autolinkProtocol.call(this,e)}function Ofe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Ife(e){this.config.exit.autolinkEmail.call(this,e)}function Rfe(e){this.exit(e)}function Mfe(e){az(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Dfe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Lfe]],{ignore:["link","linkReference"]})}function Dfe(e,t,n,r,a){let s="";if(!iz(a)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!$fe(n)))return!1;const o=Ffe(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:s+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function Lfe(e,t,n,r){return!iz(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function $fe(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function Ffe(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const a=iO(e,"(");let s=iO(e,")");for(;r!==-1&&a>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function iz(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Vc(n)||Db(n))&&(!t||n!==47)}sz.peek=Gfe;function Ufe(){this.buffer()}function Bfe(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function zfe(){this.buffer()}function Wfe(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function qfe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=rs(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Hfe(e){this.exit(e)}function Kfe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=rs(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Vfe(e){this.exit(e)}function Gfe(){return"["}function sz(e,t,n,r){const a=n.createTracker(r);let s=a.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=a.move(n.safe(n.associationId(e),{after:"]",before:s})),l(),o(),s+=a.move("]"),s}function Yfe(){return{enter:{gfmFootnoteCallString:Ufe,gfmFootnoteCall:Bfe,gfmFootnoteDefinitionLabelString:zfe,gfmFootnoteDefinition:Wfe},exit:{gfmFootnoteCallString:qfe,gfmFootnoteCall:Hfe,gfmFootnoteDefinitionLabelString:Kfe,gfmFootnoteDefinition:Vfe}}}function Xfe(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:sz},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,a,s,o){const l=s.createTracker(o);let c=l.move("[^");const u=s.enter("footnoteDefinition"),d=s.enter("label");return c+=l.move(s.safe(s.associationId(r),{before:c,after:"]"})),d(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,l.current()),t?oz:Jfe))),u(),c}}function Jfe(e,t,n){return t===0?e:oz(e,t,n)}function oz(e,t,n){return(n?"":"    ")+e}const Qfe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];lz.peek=rme;function Zfe(){return{canContainEols:["delete"],enter:{strikethrough:tme},exit:{strikethrough:nme}}}function eme(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Qfe}],handlers:{delete:lz}}}function tme(e){this.enter({type:"delete",children:[]},e)}function nme(e){this.exit(e)}function lz(e,t,n,r){const a=n.createTracker(r),s=n.enter("strikethrough");let o=a.move("~~");return o+=n.containerPhrasing(e,{...a.current(),before:o,after:"~"}),o+=a.move("~~"),s(),o}function rme(){return"~"}function ame(e){return e.length}function ime(e,t){const n=t||{},r=(n.align||[]).concat(),a=n.stringLength||ame,s=[],o=[],l=[],c=[];let u=0,d=-1;for(;++d<e.length;){const v=[],x=[];let y=-1;for(e[d].length>u&&(u=e[d].length);++y<e[d].length;){const w=sme(e[d][y]);if(n.alignDelimiters!==!1){const b=a(w);x[y]=b,(c[y]===void 0||b>c[y])&&(c[y]=b)}v.push(w)}o[d]=v,l[d]=x}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<u;)s[h]=sO(r[h]);else{const v=sO(r);for(;++h<u;)s[h]=v}h=-1;const f=[],m=[];for(;++h<u;){const v=s[h];let x="",y="";v===99?(x=":",y=":"):v===108?x=":":v===114&&(y=":");let w=n.alignDelimiters===!1?1:Math.max(1,c[h]-x.length-y.length);const b=x+"-".repeat(w)+y;n.alignDelimiters!==!1&&(w=x.length+w+y.length,w>c[h]&&(c[h]=w),m[h]=w),f[h]=b}o.splice(1,0,f),l.splice(1,0,m),d=-1;const g=[];for(;++d<o.length;){const v=o[d],x=l[d];h=-1;const y=[];for(;++h<u;){const w=v[h]||"";let b="",_="";if(n.alignDelimiters!==!1){const k=c[h]-(x[h]||0),j=s[h];j===114?b=" ".repeat(k):j===99?k%2?(b=" ".repeat(k/2+.5),_=" ".repeat(k/2-.5)):(b=" ".repeat(k/2),_=b):_=" ".repeat(k)}n.delimiterStart!==!1&&!h&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&w==="")&&(n.delimiterStart!==!1||h)&&y.push(" "),n.alignDelimiters!==!1&&y.push(b),y.push(w),n.alignDelimiters!==!1&&y.push(_),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||h!==u-1)&&y.push("|")}g.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return g.join(`
`)}function sme(e){return e==null?"":String(e)}function sO(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function ome(e,t,n,r){const a=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(e,s.current()),lme);return a(),o}function lme(e,t,n){return">"+(n?"":" ")+e}function cme(e,t){return oO(e,t.inConstruct,!0)&&!oO(e,t.notInConstruct,!1)}function oO(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function lO(e,t,n,r){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&cme(n.stack,n.unsafe[a]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function ume(e,t){const n=String(e);let r=n.indexOf(t),a=r,s=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===a?++s>o&&(o=s):s=1,a=r+t.length,r=n.indexOf(t,a);return o}function dme(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function hme(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function fme(e,t,n,r){const a=hme(n),s=e.value||"",o=a==="`"?"GraveAccent":"Tilde";if(dme(e,n)){const h=n.enter("codeIndented"),f=n.indentLines(s,mme);return h(),f}const l=n.createTracker(r),c=a.repeat(Math.max(ume(s,a)+1,3)),u=n.enter("codeFenced");let d=l.move(c);if(e.lang){const h=n.enter(`codeFencedLang${o}`);d+=l.move(n.safe(e.lang,{before:d,after:" ",encode:["`"],...l.current()})),h()}if(e.lang&&e.meta){const h=n.enter(`codeFencedMeta${o}`);d+=l.move(" "),d+=l.move(n.safe(e.meta,{before:d,after:`
`,encode:["`"],...l.current()})),h()}return d+=l.move(`
`),s&&(d+=l.move(s+`
`)),d+=l.move(c),u(),d}function mme(e,t,n){return(n?"":"    ")+e}function HC(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function pme(e,t,n,r){const a=HC(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),o(),u}function gme(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Tm(e){return"&#x"+e.toString(16).toUpperCase()+";"}function Ay(e,t,n){const r=Ud(e),a=Ud(t);return r===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}cz.peek=vme;function cz(e,t,n,r){const a=gme(n),s=n.enter("emphasis"),o=n.createTracker(r),l=o.move(a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),d=Ay(r.before.charCodeAt(r.before.length-1),u,a);d.inside&&(c=Tm(u)+c.slice(1));const h=c.charCodeAt(c.length-1),f=Ay(r.after.charCodeAt(0),h,a);f.inside&&(c=c.slice(0,-1)+Tm(h));const m=o.move(a);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:d.outside},l+c+m}function vme(e,t,n){return n.options.emphasis||"*"}function yme(e,t){let n=!1;return WC(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,U1}),!!((!e.depth||e.depth<3)&&DC(e)&&(t.options.setext||n))}function xme(e,t,n,r){const a=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(yme(e,n)){const d=n.enter("headingSetext"),h=n.enter("phrasing"),f=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return h(),d(),f+`
`+(a===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(a),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Tm(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u}uz.peek=bme;function uz(e){return e.value||""}function bme(){return"<"}dz.peek=wme;function dz(e,t,n,r){const a=HC(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),u+=c.move(")"),o(),u}function wme(){return"!"}hz.peek=jme;function hz(e,t,n,r){const a=e.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=d,s(),a==="full"||!u||u!==h?c+=l.move(h+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function jme(){return"!"}fz.peek=_me;function fz(e,t,n){let r=e.value||"",a="`",s=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(r);)a+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return a+r+a}function _me(){return"`"}function mz(e,t){const n=DC(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}pz.peek=kme;function pz(e,t,n,r){const a=HC(n),s=a==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,c;if(mz(e,n)){const d=n.stack;n.stack=[],l=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(e,{before:h,after:">",...o.current()})),h+=o.move(">"),l(),n.stack=d,h}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),c(),e.title&&(c=n.enter(`title${s}`),u+=o.move(" "+a),u+=o.move(n.safe(e.title,{before:u,after:a,...o.current()})),u+=o.move(a),c()),u+=o.move(")"),l(),u}function kme(e,t,n){return mz(e,n)?"<":"["}gz.peek=Sme;function gz(e,t,n,r){const a=e.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const d=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=d,s(),a==="full"||!u||u!==h?c+=l.move(h+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function Sme(){return"["}function KC(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Nme(e){const t=KC(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Cme(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function vz(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Ame(e,t,n,r){const a=n.enter("list"),s=n.bulletCurrent;let o=e.ordered?Cme(n):KC(n);const l=e.ordered?o==="."?")":".":Nme(n);let c=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const d=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&d&&(!d.children||!d.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),vz(n)===o&&d){let h=-1;for(;++h<e.children.length;){const f=e.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=s,a(),u}function Eme(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Tme(e,t,n,r){const a=Eme(n);let s=n.bulletCurrent||KC(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),d);return c(),u;function d(h,f,m){return f?(m?"":" ".repeat(o))+h:(m?s:s+" ".repeat(o-s.length))+h}}function Pme(e,t,n,r){const a=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(e,r);return s(),a(),o}const Ome=Fb(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Ime(e,t,n,r){return(e.children.some(function(o){return Ome(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function Rme(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}yz.peek=Mme;function yz(e,t,n,r){const a=Rme(n),s=n.enter("strong"),o=n.createTracker(r),l=o.move(a+a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),d=Ay(r.before.charCodeAt(r.before.length-1),u,a);d.inside&&(c=Tm(u)+c.slice(1));const h=c.charCodeAt(c.length-1),f=Ay(r.after.charCodeAt(0),h,a);f.inside&&(c=c.slice(0,-1)+Tm(h));const m=o.move(a+a);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:d.outside},l+c+m}function Mme(e,t,n){return n.options.strong||"*"}function Dme(e,t,n,r){return n.safe(e.value,r)}function Lme(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function $me(e,t,n){const r=(vz(n)+(n.options.ruleSpaces?" ":"")).repeat(Lme(n));return n.options.ruleSpaces?r.slice(0,-1):r}const xz={blockquote:ome,break:lO,code:fme,definition:pme,emphasis:cz,hardBreak:lO,heading:xme,html:uz,image:dz,imageReference:hz,inlineCode:fz,link:pz,linkReference:gz,list:Ame,listItem:Tme,paragraph:Pme,root:Ime,strong:yz,text:Dme,thematicBreak:$me};function Fme(){return{enter:{table:Ume,tableData:cO,tableHeader:cO,tableRow:zme},exit:{codeText:Wme,table:Bme,tableData:yj,tableHeader:yj,tableRow:yj}}}function Ume(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function Bme(e){this.exit(e),this.data.inTable=void 0}function zme(e){this.enter({type:"tableRow",children:[]},e)}function yj(e){this.exit(e)}function cO(e){this.enter({type:"tableCell",children:[]},e)}function Wme(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,qme));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function qme(e,t){return t==="|"?t:e}function Hme(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,a=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:c,tableRow:l}};function o(m,g,v,x){return u(d(m,v,x),m.align)}function l(m,g,v,x){const y=h(m,v,x),w=u([y]);return w.slice(0,w.indexOf(`
`))}function c(m,g,v,x){const y=v.enter("tableCell"),w=v.enter("phrasing"),b=v.containerPhrasing(m,{...x,before:s,after:s});return w(),y(),b}function u(m,g){return ime(m,{align:g,alignDelimiters:r,padding:n,stringLength:a})}function d(m,g,v){const x=m.children;let y=-1;const w=[],b=g.enter("table");for(;++y<x.length;)w[y]=h(x[y],g,v);return b(),w}function h(m,g,v){const x=m.children;let y=-1;const w=[],b=g.enter("tableRow");for(;++y<x.length;)w[y]=c(x[y],m,g,v);return b(),w}function f(m,g,v){let x=xz.inlineCode(m,g,v);return v.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function Kme(){return{exit:{taskListCheckValueChecked:uO,taskListCheckValueUnchecked:uO,paragraph:Gme}}}function Vme(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Yme}}}function uO(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Gme(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const a=t.children;let s=-1,o;for(;++s<a.length;){const l=a[s];if(l.type==="paragraph"){o=l;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function Yme(e,t,n,r){const a=e.children[0],s=typeof e.checked=="boolean"&&a&&a.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);s&&l.move(o);let c=xz.listItem(e,t,n,{...r,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(d){return d+o}}function Xme(){return[Afe(),Yfe(),Zfe(),Fme(),Kme()]}function Jme(e){return{extensions:[Efe(),Xfe(e),eme(),Hme(e),Vme()]}}const Qme={tokenize:ape,partial:!0},bz={tokenize:ipe,partial:!0},wz={tokenize:spe,partial:!0},jz={tokenize:ope,partial:!0},Zme={tokenize:lpe,partial:!0},_z={name:"wwwAutolink",tokenize:npe,previous:Sz},kz={name:"protocolAutolink",tokenize:rpe,previous:Nz},Po={name:"emailAutolink",tokenize:tpe,previous:Cz},zs={};function epe(){return{text:zs}}let Zl=48;for(;Zl<123;)zs[Zl]=Po,Zl++,Zl===58?Zl=65:Zl===91&&(Zl=97);zs[43]=Po;zs[45]=Po;zs[46]=Po;zs[95]=Po;zs[72]=[Po,kz];zs[104]=[Po,kz];zs[87]=[Po,_z];zs[119]=[Po,_z];function tpe(e,t,n){const r=this;let a,s;return o;function o(h){return!q1(h)||!Cz.call(r,r.previous)||VC(r.events)?n(h):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(h))}function l(h){return q1(h)?(e.consume(h),l):h===64?(e.consume(h),c):n(h)}function c(h){return h===46?e.check(Zme,d,u)(h):h===45||h===95||na(h)?(s=!0,e.consume(h),c):d(h)}function u(h){return e.consume(h),a=!0,c}function d(h){return s&&a&&pa(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(h)):n(h)}}function npe(e,t,n){const r=this;return a;function a(o){return o!==87&&o!==119||!Sz.call(r,r.previous)||VC(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Qme,e.attempt(bz,e.attempt(wz,s),n),n)(o))}function s(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function rpe(e,t,n){const r=this;let a="",s=!1;return o;function o(h){return(h===72||h===104)&&Nz.call(r,r.previous)&&!VC(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(h),e.consume(h),l):n(h)}function l(h){if(pa(h)&&a.length<5)return a+=String.fromCodePoint(h),e.consume(h),l;if(h===58){const f=a.toLowerCase();if(f==="http"||f==="https")return e.consume(h),c}return n(h)}function c(h){return h===47?(e.consume(h),s?u:(s=!0,c)):n(h)}function u(h){return h===null||ky(h)||Cn(h)||Vc(h)||Db(h)?n(h):e.attempt(bz,e.attempt(wz,d),n)(h)}function d(h){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(h)}}function ape(e,t,n){let r=0;return a;function a(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),a):o===46&&r===3?(e.consume(o),s):n(o)}function s(o){return o===null?n(o):t(o)}}function ipe(e,t,n){let r,a,s;return o;function o(u){return u===46||u===95?e.check(jz,c,l)(u):u===null||Cn(u)||Vc(u)||u!==45&&Db(u)?c(u):(s=!0,e.consume(u),o)}function l(u){return u===95?r=!0:(a=r,r=void 0),e.consume(u),o}function c(u){return a||r||!s?n(u):t(u)}}function spe(e,t){let n=0,r=0;return a;function a(o){return o===40?(n++,e.consume(o),a):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(jz,t,s)(o):o===null||Cn(o)||Vc(o)?t(o):(e.consume(o),a)}function s(o){return o===41&&r++,e.consume(o),a}}function ope(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),s):l===93?(e.consume(l),a):l===60||l===null||Cn(l)||Vc(l)?t(l):n(l)}function a(l){return l===null||l===40||l===91||Cn(l)||Vc(l)?t(l):r(l)}function s(l){return pa(l)?o(l):n(l)}function o(l){return l===59?(e.consume(l),r):pa(l)?(e.consume(l),o):n(l)}}function lpe(e,t,n){return r;function r(s){return e.consume(s),a}function a(s){return na(s)?n(s):t(s)}}function Sz(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Cn(e)}function Nz(e){return!pa(e)}function Cz(e){return!(e===47||q1(e))}function q1(e){return e===43||e===45||e===46||e===95||na(e)}function VC(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const cpe={tokenize:vpe,partial:!0};function upe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:mpe,continuation:{tokenize:ppe},exit:gpe}},text:{91:{name:"gfmFootnoteCall",tokenize:fpe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:dpe,resolveTo:hpe}}}}function dpe(e,t,n){const r=this;let a=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;a--;){const c=r.events[a][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const u=rs(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function hpe(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function fpe(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return l;function l(h){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),c}function c(h){return h!==94?n(h):(e.enter("gfmFootnoteCallMarker"),e.consume(h),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(h){if(s>999||h===93&&!o||h===null||h===91||Cn(h))return n(h);if(h===93){e.exit("chunkString");const f=e.exit("gfmFootnoteCallString");return a.includes(rs(r.sliceSerialize(f)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(h),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(h)}return Cn(h)||(o=!0),s++,e.consume(h),h===92?d:u}function d(h){return h===91||h===92||h===93?(e.consume(h),s++,u):u(h)}}function mpe(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(g){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(g){return g===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",d):n(g)}function d(g){if(o>999||g===93&&!l||g===null||g===91||Cn(g))return n(g);if(g===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return s=rs(r.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),f}return Cn(g)||(l=!0),o++,e.consume(g),g===92?h:d}function h(g){return g===91||g===92||g===93?(e.consume(g),o++,d):d(g)}function f(g){return g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),a.includes(s)||a.push(s),en(e,m,"gfmFootnoteDefinitionWhitespace")):n(g)}function m(g){return t(g)}}function ppe(e,t,n){return e.check(Gp,t,e.attempt(cpe,t,n))}function gpe(e){e.exit("gfmFootnoteDefinition")}function vpe(e,t,n){const r=this;return en(e,a,"gfmFootnoteDefinitionIndent",5);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(s):n(s)}}function ype(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:a};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function a(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const d={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},h={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},f=[["enter",d,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",h,l]],m=l.parser.constructs.insideSpan.null;m&&ri(f,f.length,0,Lb(m,o.slice(u+1,c),l)),ri(f,f.length,0,[["exit",h,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",d,l]]),ri(o,u-1,c-u+3,f),c=u+f.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const u=this.previous,d=this.events;let h=0;return f;function f(g){return u===126&&d[d.length-1][1].type!=="characterEscape"?c(g):(o.enter("strikethroughSequenceTemporary"),m(g))}function m(g){const v=Ud(u);if(g===126)return h>1?c(g):(o.consume(g),h++,m);if(h<2&&!n)return c(g);const x=o.exit("strikethroughSequenceTemporary"),y=Ud(g);return x._open=!y||y===2&&!!v,x._close=!v||v===2&&!!y,l(g)}}}class xpe{constructor(){this.map=[]}add(t,n,r){bpe(this,t,n,r)}consume(t){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let a=r.pop();for(;a;){for(const s of a)t.push(s);a=r.pop()}this.map.length=0}}function bpe(e,t,n,r){let a=0;if(!(n===0&&r.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=n,e.map[a][2].push(...r);return}a+=1}e.map.push([t,n,r])}}function wpe(e,t){let n=!1;const r=[];for(;t<e.length;){const a=e[t];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function jpe(){return{flow:{null:{name:"table",tokenize:_pe,resolveAll:kpe}}}}function _pe(e,t,n){const r=this;let a=0,s=0,o;return l;function l(P){let S=r.events.length-1;for(;S>-1;){const U=r.events[S][1].type;if(U==="lineEnding"||U==="linePrefix")S--;else break}const D=S>-1?r.events[S][1].type:null,L=D==="tableHead"||D==="tableRow"?j:c;return L===j&&r.parser.lazy[r.now().line]?n(P):L(P)}function c(P){return e.enter("tableHead"),e.enter("tableRow"),u(P)}function u(P){return P===124||(o=!0,s+=1),d(P)}function d(P){return P===null?n(P):kt(P)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),m):n(P):Vt(P)?en(e,d,"whitespace")(P):(s+=1,o&&(o=!1,a+=1),P===124?(e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),o=!0,d):(e.enter("data"),h(P)))}function h(P){return P===null||P===124||Cn(P)?(e.exit("data"),d(P)):(e.consume(P),P===92?f:h)}function f(P){return P===92||P===124?(e.consume(P),h):h(P)}function m(P){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(P):(e.enter("tableDelimiterRow"),o=!1,Vt(P)?en(e,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):g(P))}function g(P){return P===45||P===58?x(P):P===124?(o=!0,e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),v):k(P)}function v(P){return Vt(P)?en(e,x,"whitespace")(P):x(P)}function x(P){return P===58?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(P),e.exit("tableDelimiterMarker"),y):P===45?(s+=1,y(P)):P===null||kt(P)?_(P):k(P)}function y(P){return P===45?(e.enter("tableDelimiterFiller"),w(P)):k(P)}function w(P){return P===45?(e.consume(P),w):P===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(P),e.exit("tableDelimiterMarker"),b):(e.exit("tableDelimiterFiller"),b(P))}function b(P){return Vt(P)?en(e,_,"whitespace")(P):_(P)}function _(P){return P===124?g(P):P===null||kt(P)?!o||a!==s?k(P):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(P)):k(P)}function k(P){return n(P)}function j(P){return e.enter("tableRow"),N(P)}function N(P){return P===124?(e.enter("tableCellDivider"),e.consume(P),e.exit("tableCellDivider"),N):P===null||kt(P)?(e.exit("tableRow"),t(P)):Vt(P)?en(e,N,"whitespace")(P):(e.enter("data"),O(P))}function O(P){return P===null||P===124||Cn(P)?(e.exit("data"),N(P)):(e.consume(P),P===92?I:O)}function I(P){return P===92||P===124?(e.consume(P),O):O(P)}}function kpe(e,t){let n=-1,r=!0,a=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,d,h;const f=new xpe;for(;++n<e.length;){const m=e[n],g=m[1];m[0]==="enter"?g.type==="tableHead"?(l=!1,c!==0&&(dO(f,t,c,u,d),d=void 0,c=0),u={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},f.add(n,0,[["enter",u,t]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,h=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,d={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},f.add(n,0,[["enter",d,t]])),a=g.type==="tableDelimiterRow"?2:d?3:1):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=Wg(f,t,s,a,void 0,h),s=[0,0,0,0]),o[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],h=Wg(f,t,s,a,void 0,h)),s=o,o=[s[1],n,0,0])):g.type==="tableHead"?(l=!0,c=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],h=Wg(f,t,s,a,n,h)):o[1]!==0&&(h=Wg(f,t,o,a,n,h)),a=0):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&dO(f,t,c,u,d),f.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=wpe(t.events,n))}return e}function Wg(e,t,n,r,a,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Lu(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const c=Lu(t.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const u=Lu(t.events,n[2]),d=Lu(t.events,n[3]),h={type:l,start:Object.assign({},u),end:Object.assign({},d)};if(e.add(n[2],0,[["enter",h,t]]),r!==2){const f=t.events[n[2]],m=t.events[n[3]];if(f[1].end=Object.assign({},m[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,v=n[3]-n[2]-1;e.add(g,v,[])}}e.add(n[3]+1,0,[["exit",h,t]])}return a!==void 0&&(s.end=Object.assign({},Lu(t.events,a)),e.add(a,0,[["exit",s,t]]),s=void 0),s}function dO(e,t,n,r,a){const s=[],o=Lu(t.events,n);a&&(a.end=Object.assign({},o),s.push(["exit",a,t])),r.end=Object.assign({},o),s.push(["exit",r,t]),e.add(n+1,0,s)}function Lu(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const Spe={name:"tasklistCheck",tokenize:Cpe};function Npe(){return{text:{91:Spe}}}function Cpe(e,t,n){const r=this;return a;function a(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),s)}function s(c){return Cn(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return kt(c)?t(c):Vt(c)?e.check({tokenize:Ape},t,n)(c):n(c)}}function Ape(e,t,n){return en(e,r,"whitespace");function r(a){return a===null?n(a):t(a)}}function Epe(e){return D6([epe(),upe(),ype(e),jpe(),Npe()])}const Tpe={};function Ey(e){const t=this,n=e||Tpe,r=t.data(),a=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);a.push(Epe(n)),s.push(Xme()),o.push(Jme(n))}function Ppe(e){az(e,[/\r?\n|\r/g,Ope])}function Ope(){return{type:"break"}}function Az(){return function(e){Ppe(e)}}const Ez=({url:e,isDark:t=!1})=>{const[n,r]=p.useState(null),[a,s]=p.useState(!0),[o,l]=p.useState(!1);return p.useEffect(()=>{let c=!0;return(async()=>{try{const h=await(await fetch(`https://api.microlink.io?url=${encodeURIComponent(e)}`)).json();c&&(h.status==="success"&&h.data?r(h.data):l(!0),s(!1))}catch{c&&(l(!0),s(!1))}})(),()=>{c=!1}},[e]),a?i.jsxs("div",{className:"flex items-center gap-2 mt-2 p-3 border rounded-lg bg-black/5 animate-pulse",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin opacity-50"}),i.jsx("span",{className:"text-xs opacity-50",children:"Loading preview..."})]}):o||!n||!n.title&&!n.image?null:i.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"block mt-2 no-underline",children:i.jsxs(We,{className:`overflow-hidden transition-all hover:shadow-md ${t?"bg-blue-700/50 border-blue-400 text-white":"bg-white border-slate-200 text-slate-900"}`,children:[n.image&&i.jsx("div",{className:"w-full aspect-video overflow-hidden bg-slate-100 relative",children:i.jsx("img",{src:n.image.url,alt:n.title,className:"w-full h-full object-cover",loading:"lazy"})}),i.jsxs(ct,{className:"p-3",children:[i.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[n.logo&&i.jsx("img",{src:n.logo.url,alt:"",className:"w-4 h-4 rounded-sm"}),i.jsx("span",{className:"text-[10px] font-medium uppercase tracking-wider opacity-70",children:n.publisher||new URL(e).hostname})]}),i.jsx("h4",{className:"text-sm font-semibold line-clamp-1 mb-1",children:n.title}),n.description&&i.jsx("p",{className:"text-xs opacity-70 line-clamp-2 leading-relaxed",children:n.description})]})]})})},Ipe=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Rpe=e=>{const t=e.trim().toLowerCase();return t==="telegram"||t==="Telegram"?"Telegram":t==="whatsapp"||t==="wa"?"WhatsApp":t==="web"?"Web":e},tl=e=>{if(!e)return null;const t=String(e.status||"").toLowerCase();return t==="closed"?"done":t==="open"?"unassigned":t==="pending"||t==="assigned"?"assigned":"unassigned"},xj=e=>tl(e)==="assigned",bj=e=>tl(e)==="unassigned",qg=e=>tl(e)==="done",Mpe=24*60*60*1e3,Dpe=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t} -${n} -${r} `},Lpe=e=>{if(Number.isNaN(e.getTime()))return"";const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate()),a=n.getTime()-r.getTime(),s=Math.floor(a/Mpe);return s===0?"Today":s===1?"Yesterday":e.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})},$pe=({message:e,isLastMessage:t,highlighted:n=!1,matches:r=[],activeMatchOrder:a=-1})=>{const s=e.role==="assistant"||e.role==="agent"||e.direction==="out",o=e.role==="system"||e.type==="event"||e.type==="note",l=e.role==="assistant",c=e.role==="agent",u={a:({href:h,children:f})=>{const m=h||"";return sy(m)?i.jsx("img",{src:m,alt:"User uploaded content",className:"rounded-lg max-w-full h-auto my-2 border border-black/10 shadow-sm",loading:"lazy"}):i.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:c?"text-blue-300 font-medium underline hover:text-white":"text-blue-600 font-medium underline hover:text-blue-800",children:f})},img:({src:h,alt:f})=>i.jsx("img",{src:h,alt:f,className:"rounded-lg max-w-full h-auto my-2 border border-black/10 shadow-sm overflow-hidden",loading:"lazy"})},d=()=>{const h=e.body||"";if(!h||r.length===0)return h;const f=[...r].sort((v,x)=>v.start-x.start),m=[];let g=0;return f.forEach(({start:v,length:x},y)=>{v>g&&m.push(h.slice(g,v));const w=h.slice(v,v+x);m.push({type:"highlight",content:w,index:y}),g=v+x}),g<h.length&&m.push(h.slice(g)),m.map((v,x)=>{if(typeof v=="string")return i.jsx("span",{children:v},`seg - ${x} `);const y=v.index===a;return i.jsx("mark",{className:`rounded - sm px - 0.5 text - current text - black ${y?"bg-orange-300":"bg-yellow-200"} `,children:v.content},`highlight - ${v.index} `)})};return o?i.jsx("div",{className:"flex justify-center my-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:e.body||"System event"}),i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),i.jsx("span",{children:""}),i.jsx("span",{children:"system"})]})]})}):i.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} mb-3`,children:i.jsxs("div",{className:`flex ${s?"flex-row-reverse":"flex-row"} items-end gap-2 max-w-[85%]`,children:[i.jsxs(Pa,{className:"h-8 w-8",children:[i.jsx(Bc,{src:""}),i.jsx(Oa,{className:"text-xs",children:s?"A":e.contact_avatar})]}),i.jsxs("div",{className:`px-4 py-2 rounded-2xl text-sm shadow-sm ${c?"bg-blue-600 text-white":l?"bg-blue-100 text-blue-900":"bg-muted text-foreground"} ${n?"ring-2 ring-yellow-300":""}`,children:[r.length>0?i.jsx("p",{className:"whitespace-pre-wrap [overflow-wrap:anywhere]",children:d()}):i.jsx("div",{className:`prose prose-sm leading-normal max-w-none [overflow-wrap:anywhere] [&>*:first-child]:mt-0 [&>*:last-child]:mb-0 ${c?"text-white [&_*]:text-inherit [&_li]:marker:text-white [&_code]:text-blue-100 [&_code]:bg-blue-700":"dark:prose-invert"} `,children:i.jsx(Cy,{remarkPlugins:[Ey,Az],components:u,children:e.body||""})}),(()=>{const h=O4(e.body);return h.length===0?null:i.jsx("div",{className:"space-y-2 mt-2",children:h.map(f=>!sy(f)&&i.jsx(Ez,{url:f,isDark:c},f))})})(),i.jsxs("div",{className:`mt-1 flex items-center gap-1 text-[10px] ${c?"text-blue-100":l?"text-blue-700":"text-muted-foreground"}`,children:[i.jsx("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),s&&(e._status==="pending"?i.jsx(Ht,{className:"h-3 w-3 animate-spin","aria-label":"pending"}):t?i.jsx(EV,{className:"h-3 w-3","aria-label":"sent"}):null)]})]})]})})};function Fpe(){var Rt,jt,qn,Cr,_n,Kr,Et,Rn;const[e,t]=LN(),[n,r]=p.useState(""),[a,s]=p.useState(""),[o,l]=p.useState(null),[c,u]=p.useState("assigned"),[d,h]=p.useState(!1);p.useState(!1),p.useState(!1);const[f,m]=p.useState(""),[g,v]=p.useState(null),[x,y]=p.useState(0),w=p.useRef(null),b=p.useRef({}),_=f.trim(),{conversations:k,messages:j,loading:N,error:O,fetchConversations:I,fetchMessages:P,sendMessage:S,createConversation:D,addThreadLabel:L,removeThreadLabel:U,assignThread:F,assignThreadToUser:M,takeoverThread:T,unassignThread:E,clearCollaborator:$,deleteThread:A,setThreadCollaborator:B}=Ele();AC();const{agents:R}=ql(),{user:C}=aa(),{hasRole:W,hasPermission:Q}=Or(),X=W("master_agent"),Z=W("super_agent");W("agent");const te=X||Z;Q("messages.create");const J=(C==null?void 0:C.id)??null,[ie,ge]=p.useState(null),[ae,Re]=p.useState(!1),[me,K]=p.useState(!1),[de,$e]=p.useState(null),[nt,Ye]=p.useState(!1),ft=Q("contacts.delete"),[Ze,ut]=p.useState({}),ee=p.useRef(!1),qe=p.useRef(!1),dt=p.useMemo(()=>`chat.threadFilters.v1:${(C==null?void 0:C.id)||"anon"} `,[C==null?void 0:C.id]),[se,ve]=p.useState({}),[oe,Xe]=p.useState({}),[ke,rt]=p.useState([]),[bt,ue]=p.useState({});p.useMemo(()=>R.filter(G=>String((G==null?void 0:G.primaryRole)||"").toLowerCase()==="super_agent").map(G=>({value:G.user_id,label:G.display_name||G.email||"Unknown Agent"})),[R]);const Se=p.useMemo(()=>R.filter(G=>String((G==null?void 0:G.primaryRole)||"").toLowerCase()!=="master_agent").map(G=>({value:G.user_id,label:G.display_name||G.email||"Unknown Agent"})),[R]),we=p.useMemo(()=>Object.fromEntries(R.map(G=>[String(G.user_id),String(G.display_name||G.email||"Unknown")])),[R]),Te=p.useMemo(()=>G=>we[G]||bt[G]||G,[we,bt]),[je,Ee]=p.useState(null),Ue=p.useMemo(()=>{if(!o)return null;const G=k.find(_e=>_e.id===o);return(G==null?void 0:G.assignee_user_id)??null},[o,k]),H=p.useMemo(()=>o?(je==null?void 0:je.threadId)===o?je.userId:Ue:null,[o,je,Ue]);p.useEffect(()=>{if(!o){Ee(null);return}(je==null?void 0:je.threadId)===o&&Ue===je.userId&&Ee(null)},[o,Ue,je]),p.useEffect(()=>{if(!H){rt([]);return}let G=!0;return(async()=>{const{data:z,error:fe}=await _t.from("super_agent_members").select("agent_user_id").eq("super_agent_id",H);if(G){if(fe){console.warn("Failed to fetch super agent members",fe),rt([]);return}rt((z||[]).map(pe=>String(pe.agent_user_id)))}})(),()=>{G=!1}},[H]);const q=p.useMemo(()=>{if(!_)return[];const G=Ipe(_);return G?j.flatMap(_e=>{const z=_e.body||"";if(!z)return[];const fe=new RegExp(G,"gi"),pe=[];let Le=0,Ke;for(;(Ke=fe.exec(z))!==null;)pe.push({messageId:_e.id,start:Ke.index,length:Ke[0].length,order:Le}),Le+=1,Ke.index===fe.lastIndex&&fe.lastIndex++;return pe}):[]},[_,j]),re=p.useMemo(()=>{if(q.length===0)return{};const G=q.reduce((_e,z)=>(_e[z.messageId]||(_e[z.messageId]=[]),_e[z.messageId].push({start:z.start,length:z.length}),_e),{});return Object.values(G).forEach(_e=>{_e.sort((z,fe)=>z.start-fe.start)}),G},[q]),he=q.length,Me=he>0?q[x]:null,et=p.useMemo(()=>j.length>0?j[j.length-1].id:null,[j]),Ie=p.useMemo(()=>{const G=[];let _e=null;return j.forEach(z=>{const fe=z.created_at;if(fe){const pe=new Date(fe);if(!Number.isNaN(pe.getTime())){const Le=Dpe(pe);if(Le!==_e){const Ke=Lpe(pe);Ke&&G.push({type:"date",key:`date - ${Le} `,label:Ke}),_e=Le}}}G.push({type:"message",key:z.id,message:z})}),G},[j]),Y=G=>{const _e=(G??"").toString();return!_e||_e==="all"?"":_e},le=G=>{var _e,z;return!!((_e=G.dateRange)!=null&&_e.from||(z=G.dateRange)!=null&&z.to||Y(G.inbox)||Y(G.channelType)||Y(G.platformId)||Y(G.status)||Y(G.agent)||Y(G.resolvedBy))},Fe=G=>{var fe,pe;const _e=(fe=G.dateRange)!=null&&fe.from?G.dateRange.from.getTime():0,z=(pe=G.dateRange)!=null&&pe.to?G.dateRange.to.getTime():0;return[_e,z,Y(G.inbox),Y(G.channelType),Y(G.platformId),Y(G.status),Y(G.agent),Y(G.resolvedBy)].join("|")},Je=G=>{const _e=G.get("f_from"),z=G.get("f_to"),fe=_e?Number(_e):0,pe=z?Number(z):0,Le=fe||pe?{from:fe?new Date(fe):void 0,to:pe?new Date(pe):void 0}:void 0,Ke=Y(G.get("f_inbox")),Ne=Y(G.get("f_channelType")),De=Y(G.get("f_platformId")),St=Y(G.get("f_status")),ze=Y(G.get("f_agent")),Mt=Y(G.get("f_resolvedBy")),Nt={};return Le&&(Nt.dateRange=Le),Ke&&(Nt.inbox=Ke),Ne&&(Nt.channelType=Ne),De&&(Nt.platformId=De),St&&(Nt.status=St),ze&&(Nt.agent=ze),Mt&&(Nt.resolvedBy=Mt),Nt},it=(G,_e)=>{var fe,pe;["f_from","f_to","f_inbox","f_channelType","f_platformId","f_status","f_agent","f_resolvedBy"].forEach(Le=>G.delete(Le)),(fe=_e.dateRange)!=null&&fe.from&&G.set("f_from",String(_e.dateRange.from.getTime())),(pe=_e.dateRange)!=null&&pe.to&&G.set("f_to",String(_e.dateRange.to.getTime())),Y(_e.inbox)&&G.set("f_inbox",Y(_e.inbox)),Y(_e.channelType)&&G.set("f_channelType",Y(_e.channelType)),Y(_e.platformId)&&G.set("f_platformId",Y(_e.platformId)),Y(_e.status)&&G.set("f_status",Y(_e.status)),Y(_e.agent)&&G.set("f_agent",Y(_e.agent)),Y(_e.resolvedBy)&&G.set("f_resolvedBy",Y(_e.resolvedBy))},Pt=G=>{ut(G);try{localStorage.setItem(dt,JSON.stringify({...G,dateRange:G.dateRange?{from:G.dateRange.from?G.dateRange.from.getTime():void 0,to:G.dateRange.to?G.dateRange.to.getTime():void 0}:void 0}))}catch{}const _e=new URLSearchParams(window.location.search);it(_e,G),ee.current=!0,t(_e,{replace:!0}),setTimeout(()=>{ee.current=!1},0),I(G)};p.useEffect(()=>{y(0)},[_]),p.useEffect(()=>{he>0&&x>=he&&y(0)},[x,he]),p.useEffect(()=>{if(!_||!Me){v(null);return}v(Me.messageId);const G=b.current[Me.messageId];G&&G.scrollIntoView({behavior:"smooth",block:"center"})},[_,Me]);const Ot=()=>{he!==0&&y(G=>(G+1)%he)},Lt=()=>{he!==0&&y(G=>(G-1+he)%he)},yn=e.get("contact"),jn=e.get("thread"),nr=e.get("tab"),Wn=p.useRef(!1);p.useEffect(()=>{if(!nr||Wn.current)return;const G=nr==="resolved"?"done":nr;(G==="assigned"||G==="unassigned"||G==="done")&&G!==c&&u(G)},[nr]),p.useEffect(()=>{let G=!0;return(async()=>{try{const{data:z,error:fe}=await _t.from("channels").select("id, display_name, provider").order("created_at",{ascending:!1});if(!G)return;if(fe)throw fe;const pe={},Le={};(z||[]).forEach(Ke=>{pe[String(Ke.id)]=String(Ke.display_name||"Unknown"),Le[String(Ke.id)]=String(Ke.provider||"")}),ve(pe),Xe(Le)}catch{if(!G)return;ve({}),Xe({})}})(),()=>{G=!1}},[]),p.useEffect(()=>{if(ee.current)return;const G=Je(e);if(!qe.current&&(qe.current=!0,!le(G)))try{const fe=localStorage.getItem(dt);if(fe){const pe=JSON.parse(fe||"{}"),Le={...pe,dateRange:pe!=null&&pe.dateRange?{from:pe.dateRange.from?new Date(Number(pe.dateRange.from)):void 0,to:pe.dateRange.to?new Date(Number(pe.dateRange.to)):void 0}:void 0};ut(Le);const Ke=new URLSearchParams(window.location.search);it(Ke,Le),ee.current=!0,t(Ke,{replace:!0}),setTimeout(()=>{ee.current=!1},0),I(Le);return}}catch{}const _e=Fe(G),z=Fe(Ze);_e!==z&&(ut(G),I(G))},[e.toString(),dt]);const fn=p.useMemo(()=>[...k.filter(_e=>`${_e.contact_name} ${_e.last_message_preview} `.toLowerCase().includes(n.toLowerCase()))].sort((_e,z)=>{const fe=new Date(_e.last_msg_at??_e.created_at??0).getTime();return new Date(z.last_msg_at??z.created_at??0).getTime()-fe}),[k,n]);p.useEffect(()=>{if(d||N||k.length===0)return;const G=k.filter(fe=>xj(fe)).length,_e=k.filter(fe=>bj(fe)).length,z=k.filter(fe=>qg(fe)).length;if(c==="assigned"&&G===0&&_e>0){u("unassigned");return}if((c==="assigned"||c==="unassigned")&&G===0&&_e===0&&z>0){u("done");return}},[k,N,c,d]),p.useEffect(()=>{if(nr===c)return;const _e=new URLSearchParams(window.location.search);_e.set("tab",c),Wn.current=!0,t(_e,{replace:!0}),setTimeout(()=>{Wn.current=!1},0)},[c]),p.useEffect(()=>{var _e;if(!jn||o===jn||fn.length===0)return;const G=fn.find(z=>z.id===jn);G&&(l(G.id),u(tl(G)??"unassigned"),P(G.id),(_e=G.channel)!=null&&_e.provider&&$g(G.channel.provider))},[jn,fn,o]),p.useEffect(()=>{var _e;if(!yn||jn||o||fn.length===0)return;const G=fn.find(z=>z.contact_id===yn);G&&(l(G.id),u(tl(G)??"unassigned"),P(G.id),(_e=G.channel)!=null&&_e.provider&&$g(G.channel.provider))},[yn,fn]);const gt=p.useMemo(()=>o&&fn.find(G=>G.id===o)||null,[o,fn]),Nr=qg(gt),rr=tl(gt),qr=p.useMemo(()=>o?(gt==null?void 0:gt.collaborator_user_id)??null:null,[o,gt==null?void 0:gt.collaborator_user_id]),wa=p.useMemo(()=>o?(ie==null?void 0:ie.threadId)===o?ie.userId??null:qr:null,[o,ie,qr]);p.useEffect(()=>{const G=Array.from(new Set([...H?[H]:[],...wa?[wa]:[],...ke].filter(Boolean)));if(G.length===0)return;const _e=G.filter(pe=>!we[pe]&&!bt[pe]);if(_e.length===0)return;let z=!0;return(async()=>{try{const{data:pe,error:Le}=await _t.from("users_profile").select("user_id, display_name").in("user_id",_e);if(!z)return;if(Le)throw Le;const Ke=Object.fromEntries((pe||[]).map(Ne=>[String(Ne.user_id),String(Ne.display_name||"")]));ue(Ne=>({...Ne,...Ke}))}catch(pe){console.warn("Failed to fetch user labels",pe)}})(),()=>{z=!1}},[H,wa,ke,we,bt]);const ci=p.useMemo(()=>{if(!H)return[];const G=new Set(ke);return Se.filter(_e=>G.has(_e.value)).map(_e=>({..._e,label:Te(_e.value)}))},[Se,H,ke,Te]),ar=wa?String(wa):null;p.useMemo(()=>{const G=new Map;return ci.forEach(_e=>G.set(_e.value,_e)),ar&&!G.has(ar)&&G.set(ar,{value:ar,label:Te(ar)}),Array.from(G.values())},[ci,ar,Te]),p.useMemo(()=>!J||!ar?!1:ar===J,[ar,J]),((gt==null?void 0:gt.status)||"").toLowerCase();const lr=p.useMemo(()=>J?ar===J:!1,[J,ar]),qa=p.useMemo(()=>{if(!lr)return"Only the collaborator who took over can send messages."},[lr]);p.useEffect(()=>{if(!o){ge(null);return}(ie==null?void 0:ie.threadId)===o&&qr===ie.userId&&ge(null)},[o,qr,ie]);const Mh=async()=>{if(gt){if(!(C!=null&&C.id)){Be.error("You must be signed in to take over");return}try{await T(gt.id),ge({threadId:gt.id,userId:C.id}),Be.success("You are now assigned to this chat"),u("assigned"),await I(void 0,{silent:!0})}catch{Be.error("Failed to take over chat")}}},ja=async()=>{if(gt){if(!te){Be.error("Only master or super agents can move conversations to Unassigned");return}Re(!0);try{await E(gt.id),ge({threadId:gt.id,userId:null}),Be.success("Conversation moved to Unassigned"),u("unassigned"),await I(void 0,{silent:!0}),await P(gt.id)}catch{Be.error("Failed to move conversation to Unassigned")}finally{Re(!1)}}},fu=async()=>{if(gt){K(!0);try{const{error:G}=await _t.from("threads").update({status:"closed",ai_access_enabled:!0,ai_handoff_at:null,resolved_at:new Date().toISOString(),resolved_by_user_id:(C==null?void 0:C.id)??null,handover_reason:null}).eq("id",gt.id);if(G)throw G;try{const{data:_e}=await ce.from("users_profile").select("display_name").eq("user_id",(C==null?void 0:C.id)??"").single();await _t.from("messages").insert([{thread_id:gt.id,direction:null,role:"system",type:"event",body:`Conversation resolved by ${(_e==null?void 0:_e.display_name)||(C==null?void 0:C.email)||"agent"}.`,payload:{event:"resolve",user_id:(C==null?void 0:C.id)??null}}])}catch(_e){console.warn("Failed to insert resolve event message",_e)}Be.success("Conversation resolved"),u("done"),await I(void 0,{silent:!0}),await P(gt.id)}catch{Be.error("Failed to resolve")}finally{K(!1)}}};p.useLayoutEffect(()=>{const G=w.current;if(G)try{G.scrollTop=G.scrollHeight}catch{}},[j,o]);const Hr=async G=>{var z;const _e=fn.find(fe=>fe.id===G);(z=_e==null?void 0:_e.channel)!=null&&z.provider&&$g(_e.channel.provider),l(G);try{const fe=new URLSearchParams(window.location.search);fe.set("thread",G),_e!=null&&_e.contact_id&&fe.set("contact",_e.contact_id),t(fe,{replace:!0})}catch{}await P(G)};p.useEffect(()=>{const G=()=>c==="done"?fn.find(z=>qg(z))||null:c==="assigned"?fn.find(z=>xj(z))||null:fn.find(z=>bj(z))||null;if(!o){const z=G();z!=null&&z.id&&Hr(z.id);return}const _e=tl(gt);if(gt&&_e!==c){const z=G();z!=null&&z.id?Hr(z.id):l(null)}},[c,fn,o,gt]);const Mi=async()=>{const G=a.trim();if(!(!G||!o))try{const{checkAIMessageLimit:_e,autoAssignToSuperAgent:z}=await ks(async()=>{const{checkAIMessageLimit:pe,autoAssignToSuperAgent:Le}=await import("./aiMessageLimit-CzT5SAWG.js");return{checkAIMessageLimit:pe,autoAssignToSuperAgent:Le}},[]),fe=await _e(_t,o);if(fe.isExceeded&&fe.superAgentId){if((await z(_t,o,fe.superAgentId)).success){Be.error(`Batas pesan AI telah tercapai(${fe.currentCount} / ${fe.limit}). Percakapan telah dialihkan ke super agent dan AI access dinonaktifkan.`),await I(void 0,{silent:!0});return}}else if(fe.isExceeded&&!fe.superAgentId){Be.error(`Batas pesan AI telah tercapai(${fe.currentCount} / ${fe.limit}). Tidak ada super agent yang tersedia untuk penanganan.`);return}if(C!=null&&C.id){const{data:pe}=await ce.from("users_profile").select("token_limit_enabled, max_tokens_per_day, max_tokens_per_month").eq("user_id",C.id).maybeSingle();if(pe!=null&&pe.token_limit_enabled){const Le=new Date,Ke=new Date(Date.UTC(Le.getUTCFullYear(),Le.getUTCMonth(),Le.getUTCDate(),0,0,0)).toISOString(),Ne=new Date(Date.UTC(Le.getUTCFullYear(),Le.getUTCMonth(),1,0,0,0)).toISOString(),[{data:De},{data:St}]=await Promise.all([ce.from("token_usage_logs").select("total_tokens").eq("user_id",C.id).gte("made_at",Ke),ce.from("token_usage_logs").select("total_tokens").eq("user_id",C.id).gte("made_at",Ne)]),ze=(De||[]).reduce((Nt,Vr)=>Nt+Number(Vr.total_tokens||0),0),Mt=(St||[]).reduce((Nt,Vr)=>Nt+Number(Vr.total_tokens||0),0);if(pe.max_tokens_per_day&&ze>=pe.max_tokens_per_day){Be.error("Daily token limit reached");return}if(pe.max_tokens_per_month&&Mt>=pe.max_tokens_per_month){Be.error("Monthly token limit reached");return}}}s(""),S(o,G,"assistant")}catch{Be.error("Failed to send message")}},qs=G=>{G.key==="Enter"&&!G.shiftKey&&(G.preventDefault(),Mi())};p.useEffect(()=>{var G;(G=gt==null?void 0:gt.channel)!=null&&G.provider&&$g(gt.channel.provider)},[(Rt=gt==null?void 0:gt.channel)==null?void 0:Rt.provider]);const Ha=G=>{if(!G)return"";const _e=new Date(G),pe=(new Date().getTime()-_e.getTime())/(1e3*60*60);if(pe<24&&pe>=0)return _e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(pe>=24&&pe<48)return"Yesterday";const Le=String(_e.getMonth()+1).padStart(2,"0"),Ke=String(_e.getDate()).padStart(2,"0"),Ne=_e.getFullYear();return`${Le}/${Ke}/${Ne}`},Ka=G=>{const _e=tl(G);return _e==="done"?i.jsx(At,{className:"bg-green-100 text-green-700 border-0",children:"Done"}):_e==="assigned"?i.jsx(At,{className:"bg-blue-100 text-blue-700 border-0",children:"Assigned"}):i.jsx(At,{className:"bg-secondary text-secondary-foreground",children:"Unassigned"})},Ae=G=>{const _e=G.last_msg_at||G.updated_at||G.created_at||"";return Ha(_e)},vt=async()=>{if(de){if(!ft){Be.error("You do not have permission to delete conversations"),$e(null);return}try{Ye(!0),await A(de.id),Be.success("Conversation deleted"),o===de.id&&l(null),$e(null)}catch{Be.error("Failed to delete conversation")}finally{Ye(!1)}}},wt=G=>{if(!ft){Be.error("You do not have permission to delete conversations");return}$e(G)};return N?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ht,{className:"h-8 w-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading conversations..."})]}):O?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-red-600 mb-2",children:["Error: ",O]}),i.jsxs(ne,{onClick:()=>{I(void 0,{silent:!0})},variant:"outline",children:[i.jsx(Vx,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}):i.jsxs("div",{className:"grid w-full grid-cols-[360px_1fr_320px] h-[calc(100vh-120px)] gap-4",children:[i.jsxs("aside",{className:"rounded-lg border bg-card p-3",children:[i.jsxs("div",{className:"mb-3 pb-2 border-b flex items-center justify-between",children:[i.jsx("h2",{className:"text-sm font-medium",children:"Conversations"}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx(ble,{value:{dateRange:Ze.dateRange||{},inbox:Ze.inbox||"",label:[],agent:Ze.agent||"",status:Ze.status||"",resolvedBy:Ze.resolvedBy||"",platformId:Ze.platformId||"",channelType:Ze.channelType||"all"},onFilterChange:Pt})})]}),le(Ze)&&i.jsxs("div",{className:"mb-2 flex flex-wrap gap-1",children:[Ze.channelType&&i.jsxs(At,{variant:"secondary",children:["Channel: ",String(Ze.channelType).toLowerCase()==="web"?"Live Chat":String(Ze.channelType)]}),Ze.platformId&&i.jsxs(At,{variant:"secondary",children:["Platform: ",se[String(Ze.platformId)]||String(Ze.platformId)]}),Ze.status&&i.jsxs(At,{variant:"secondary",children:["Status: ",String(Ze.status)]}),Ze.agent&&i.jsxs(At,{variant:"secondary",children:["Agent: ",Te(String(Ze.agent))]}),Ze.resolvedBy&&i.jsxs(At,{variant:"secondary",children:["Resolved By: ",Te(String(Ze.resolvedBy))]}),(((jt=Ze.dateRange)==null?void 0:jt.from)||((qn=Ze.dateRange)==null?void 0:qn.to))&&i.jsxs(At,{variant:"secondary",children:["Date: ",(Cr=Ze.dateRange)!=null&&Cr.from?new Date(Ze.dateRange.from).toLocaleDateString():""," "," ",(_n=Ze.dateRange)!=null&&_n.to?new Date(Ze.dateRange.to).toLocaleDateString():""]}),Ze.inbox&&i.jsxs(At,{variant:"secondary",children:["Inbox: ",String(Ze.inbox)]})]}),i.jsxs("div",{className:"relative mb-3",children:[i.jsx(ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(ot,{placeholder:"Search...",value:n,onChange:G=>r(G.target.value),className:"pl-10 h-8 text-sm"})]}),(()=>{const G=fn.filter(Ne=>xj(Ne)),_e=fn.filter(Ne=>bj(Ne)),z=fn.filter(Ne=>qg(Ne)),fe=[{key:"assigned",label:"Assigned",count:G.length,className:"bg-blue-50 dark:bg-blue-950 text-blue-600 dark:text-blue-400 border-blue-500",tooltip:"Lihat percakapan yang ditugaskan ke agen"},{key:"unassigned",label:"Unassigned",count:_e.length,className:"bg-red-50 dark:bg-red-950 text-red-600 dark:text-red-400 border-red-500",tooltip:"Lihat percakapan yang menunggu penugasan"},{key:"done",label:"Done",count:z.length,className:"bg-green-50 dark:bg-green-950 text-green-600 dark:text-green-400 border-green-500",tooltip:"Lihat percakapan yang selesai"}],pe=Ne=>i.jsxs("div",{className:"h-[calc(100vh-280px)] flex items-center justify-center rounded-lg border border-dashed text-sm text-muted-foreground bg-muted/40",children:["No ",Ne," threads found"]}),Le=Ne=>i.jsx("div",{className:"space-y-1",children:Ne.map(De=>{var St,ze,Mt,Nt;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Hr(De.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===De.id?"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800":"hover:bg-muted"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(Pa,{className:"h-6 w-6",children:[i.jsx(Bc,{src:De.channel_logo_url||""}),i.jsx(Oa,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-medium truncate",children:De.contact_name}),i.jsx("p",{className:"text-xs text-muted-foreground truncate mt-1",children:P4(De.last_message_preview)||""}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Ec,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-muted-foreground truncate",children:((St=De.channel)==null?void 0:St.display_name)||((ze=De.channel)==null?void 0:ze.provider)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[130px] self-stretch justify-between",children:[i.jsxs("div",{className:"flex flex-col items-end",children:[i.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:Ae(De)}),i.jsx("div",{className:"mt-1",children:Ka(De)})]}),De.channel_provider||(Mt=De.channel)!=null&&Mt.provider?i.jsx(At,{variant:"outline",className:"h-5 px-2 text-[10px] shrink-0",children:Rpe(String(De.channel_provider||((Nt=De.channel)==null?void 0:Nt.provider)))}):i.jsx("span",{})]})]})}),!De.contact_id&&ft&&i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950",onClick:Vr=>{Vr.stopPropagation(),wt(De)},children:i.jsx(fa,{className:"h-4 w-4"})})}),i.jsx(ye,{children:i.jsx("p",{children:"Delete conversation"})})]})]},De.id)})}),Ke=()=>c==="assigned"?G.length===0?pe("assigned"):Le(G):c==="unassigned"?_e.length===0?pe("unassigned"):Le(_e):z.length===0?pe("done"):Le(z);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid w-full grid-cols-3 mb-3 bg-card",children:fe.map(Ne=>i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{type:"button",onClick:()=>{h(!0),u(Ne.key)},className:`text-xs h-8 border-b-2 transition-colors flex items-center justify-center gap-2 px-2 ${c===Ne.key?`${Ne.className}`:"text-muted-foreground border-transparent hover:bg-muted"}`,"aria-pressed":c===Ne.key,children:[Ne.key==="done"?i.jsx(vf,{className:"h-4 w-4"}):null,i.jsx("span",{children:Ne.label}),i.jsx(At,{variant:"secondary",className:"h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:Ne.count})]})}),i.jsx(ye,{children:i.jsx("p",{children:Ne.tooltip})})]},Ne.key))}),i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:Ke()})]})})(),i.jsx(Rb,{open:!!de,onOpenChange:G=>{G||$e(null)},children:i.jsxs(Up,{children:[i.jsxs(Bp,{children:[i.jsx(Wp,{children:"Delete conversation?"}),i.jsx(qp,{children:"This conversation is not linked to a saved contact. Deleting it will remove all associated messages permanently."})]}),i.jsxs(zp,{children:[i.jsx(Kp,{disabled:nt,children:"Cancel"}),i.jsx(Hp,{className:"bg-red-600 hover:bg-red-700",onClick:vt,disabled:nt,children:nt?"Deleting":"Delete"})]})]})})]}),i.jsx("article",{className:"flex min-h-[70vh] flex-col rounded-lg border bg-card",children:gt?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 border-b px-4 py-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Pa,{className:"h-10 w-10",children:[i.jsx(Bc,{src:""}),i.jsx(Oa,{className:"text-sm",children:gt.contact_name.charAt(0)})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-base font-semibold leading-tight",children:gt.contact_name}),gt.contact_phone&&i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:gt.contact_phone})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(ns,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),i.jsx(ot,{value:f,onChange:G=>m(G.target.value),placeholder:"Search messages",className:"pl-7 h-8 w-44 text-xs"})]}),_&&i.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx("span",{className:"text-xs font-medium min-w-[48px] text-right",children:he>0?`${x+1} /${he}`:"0/0"}),i.jsx(ne,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Lt,disabled:he===0,"aria-label":"Temukan sebelumnya",children:i.jsx(g4,{className:"h-4 w-4"})}),i.jsx(ne,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Ot,disabled:he===0,"aria-label":"Temukan berikutnya",children:i.jsx(Ta,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[rr==="assigned"&&te&&i.jsx(ne,{size:"sm",className:"h-8 bg-red-100 text-red-600 hover:bg-red-200 disabled:opacity-60",onClick:ja,disabled:ae,children:ae?"Moving":"Move to Unassigned"}),gt.status!=="closed"&&i.jsx(ne,{size:"sm",className:"h-8 bg-green-600 hover:bg-green-700 text-white disabled:opacity-60",onClick:fu,disabled:me,children:me?"Resolving":"Resolve"})]}),i.jsx(At,{className:rr==="done"?"bg-green-100 text-green-700 border-0":rr==="assigned"?"bg-success text-success-foreground hover:bg-success":"bg-secondary text-secondary-foreground hover:bg-secondary",children:rr==="done"?"Done":rr==="assigned"?"Assigned":"Unassigned"})]})]}),i.jsx(Cb,{viewportRef:w,className:"flex-1 p-4",children:i.jsx("div",{className:"space-y-2",children:j.length===0?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No messages yet. Start the conversation!"}):Ie.map(G=>{if(G.type==="date")return i.jsx("div",{className:"flex justify-center my-4",children:i.jsx("span",{className:"rounded-full bg-muted px-3 py-1 text-xs font-medium text-muted-foreground",children:G.label})},G.key);const _e=G.message;return i.jsx("div",{ref:z=>{b.current[_e.id]=z},children:i.jsx($pe,{message:_e,isLastMessage:_e.id===et,highlighted:g===_e.id,matches:re[_e.id]??[],activeMatchOrder:(Me==null?void 0:Me.messageId)===_e.id?Me.order:-1})},G.key)})})}),i.jsxs("div",{className:"border-t p-3 space-y-2",children:[!Nr&&wa===(C==null?void 0:C.id)&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fr,{placeholder:`Message ${gt.contact_name}...`,value:a,onChange:G=>s(G.target.value),onKeyDown:qs,className:"flex-1 min-h-[40px] max-h-[120px] resize-none py-2.5",disabled:!lr,title:qa}),i.jsx(ne,{type:"button",onClick:Mi,disabled:!a.trim()||!lr,title:qa||"Send message",children:i.jsx(om,{className:"h-4 w-4"})})]}),!Nr&&wa!==(C==null?void 0:C.id)&&i.jsx(ne,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:Mh,disabled:!(C!=null&&C.id),title:C!=null&&C.id?void 0:"You must be signed in",children:"Takeover Chat"})]})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Ec,{className:"h-12 w-12 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No conversation selected"}),i.jsx("p",{children:"Select a conversation from the sidebar to start chatting"})]})})}),i.jsx("aside",{className:"rounded-lg border bg-card p-4",children:gt?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold",children:gt.contact_name||"Unknown Contact"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Ec,{className:"h-4 w-4 text-blue-500"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(At,{variant:"outline",className:"text-xs",children:((Kr=gt.channel)==null?void 0:Kr.display_name)||((Et=gt.channel)==null?void 0:Et.provider)||"Unknown"}),((Rn=gt.channel)==null?void 0:Rn.type)&&i.jsx(At,{variant:"secondary",className:"text-xs",children:gt.channel.type})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Handled By"}),i.jsx("div",{className:"rounded-md border bg-muted/50 px-3 py-2 text-sm text-muted-foreground",children:H&&Te(H)||""})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Collaborator"}),i.jsx("div",{className:"rounded-md border bg-muted/50 px-3 py-2 text-sm text-muted-foreground",children:ar&&Te(ar)||""})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium mb-3",children:"Conversation Details"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Assigned By"}),i.jsx("span",{children:gt.assigned_by_name||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Handled By"}),i.jsx("span",{children:H&&Te(H)||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Resolved By"}),i.jsx("span",{children:gt.resolved_by_name||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"AI Handoff At"}),i.jsx("span",{children:gt.ai_handoff_at?new Date(gt.ai_handoff_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("span",{className:"text-muted-foreground shrink-0",children:"Handover Reason"}),gt.handover_reason?i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{className:"truncate max-w-[150px] text-right border-b border-dotted border-muted-foreground/50 cursor-help",children:gt.handover_reason})}),i.jsx(ye,{className:"max-w-[280px]",children:i.jsx("p",{className:"text-xs",children:gt.handover_reason})})]}):i.jsx("span",{children:""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Assigned At"}),i.jsx("span",{children:gt.assigned_at?new Date(gt.assigned_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Created At"}),i.jsx("span",{children:gt.created_at?new Date(gt.created_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Resolved At"}),i.jsx("span",{children:gt.resolved_at?new Date(gt.resolved_at).toLocaleString():""})]})]})]})]}):i.jsx("div",{className:"text-sm text-muted-foreground",children:"No conversation selected"})})]})}var Bb="Checkbox",[Upe,p5e]=Ir(Bb),[Bpe,GC]=Upe(Bb);function zpe(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:s,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[f,m]=Ua({prop:n,defaultProp:a??!1,onChange:c,caller:Bb}),[g,v]=p.useState(null),[x,y]=p.useState(null),w=p.useRef(!1),b=g?!!o||!!g.closest("form"):!0,_={checked:f,disabled:s,setChecked:m,control:g,setControl:v,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:wl(a)?!1:a,isFormControl:b,bubbleInput:x,setBubbleInput:y};return i.jsx(Bpe,{scope:t,..._,children:Wpe(h)?h(_):r})}var Tz="CheckboxTrigger",Pz=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:s,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:g}=GC(Tz,e),v=It(a,d),x=p.useRef(c);return p.useEffect(()=>{const y=s==null?void 0:s.form;if(y){const w=()=>h(x.current);return y.addEventListener("reset",w),()=>y.removeEventListener("reset",w)}},[s,h]),i.jsx(lt.button,{type:"button",role:"checkbox","aria-checked":wl(c)?"mixed":c,"aria-required":u,"data-state":Dz(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:v,onKeyDown:Ve(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:Ve(n,y=>{h(w=>wl(w)?!0:!w),g&&m&&(f.current=y.isPropagationStopped(),f.current||y.stopPropagation())})})});Pz.displayName=Tz;var YC=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:s,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return i.jsx(zpe,{__scopeCheckbox:n,checked:a,defaultChecked:s,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>i.jsxs(i.Fragment,{children:[i.jsx(Pz,{...h,ref:t,__scopeCheckbox:n}),f&&i.jsx(Mz,{__scopeCheckbox:n})]})})});YC.displayName=Bb;var Oz="CheckboxIndicator",Iz=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,s=GC(Oz,n);return i.jsx(kr,{present:r||wl(s.checked)||s.checked===!0,children:i.jsx(lt.span,{"data-state":Dz(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});Iz.displayName=Oz;var Rz="CheckboxBubbleInput",Mz=p.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:s,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:m}=GC(Rz,e),g=It(n,m),v=SC(s),x=EN(r);p.useEffect(()=>{const w=f;if(!w)return;const b=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(b,"checked").set,j=!a.current;if(v!==s&&k){const N=new Event("click",{bubbles:j});w.indeterminate=wl(s),k.call(w,wl(s)?!1:s),w.dispatchEvent(N)}},[f,v,s,a]);const y=p.useRef(wl(s)?!1:s);return i.jsx(lt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:g,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Mz.displayName=Rz;function Wpe(e){return typeof e=="function"}function wl(e){return e==="indeterminate"}function Dz(e){return wl(e)?"indeterminate":e?"checked":"unchecked"}const Bd=p.forwardRef(({className:e,...t},n)=>i.jsx(YC,{ref:n,className:Pe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(Iz,{className:Pe("flex items-center justify-center text-current"),children:i.jsx(gN,{className:"h-4 w-4"})})}));Bd.displayName=YC.displayName;const zb=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:Pe("w-full caption-bottom text-sm",e),...t})}));zb.displayName="Table";const Wb=p.forwardRef(({className:e,...t},n)=>i.jsx("thead",{ref:n,className:Pe("[&_tr]:border-b",e),...t}));Wb.displayName="TableHeader";const qb=p.forwardRef(({className:e,...t},n)=>i.jsx("tbody",{ref:n,className:Pe("[&_tr:last-child]:border-0",e),...t}));qb.displayName="TableBody";const qpe=p.forwardRef(({className:e,...t},n)=>i.jsx("tfoot",{ref:n,className:Pe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));qpe.displayName="TableFooter";const so=p.forwardRef(({className:e,...t},n)=>i.jsx("tr",{ref:n,className:Pe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));so.displayName="TableRow";const Jn=p.forwardRef(({className:e,...t},n)=>i.jsx("th",{ref:n,className:Pe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Jn.displayName="TableHead";const Un=p.forwardRef(({className:e,...t},n)=>i.jsx("td",{ref:n,className:Pe("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Un.displayName="TableCell";const Hpe=p.forwardRef(({className:e,...t},n)=>i.jsx("caption",{ref:n,className:Pe("mt-4 text-sm text-muted-foreground",e),...t}));Hpe.displayName="TableCaption";const Kpe=e=>P4(String(e??"").replace(/\s+/g," ").trim().slice(0,200))||"",Vpe=e=>{const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},Gpe=e=>{const t=e.trim().toLowerCase();return t==="telegram"||t==="Telegram"?"Telegram":t==="whatsapp"||t==="wa"?"WhatsApp":t==="web"?"Web":e};function Ype({open:e,onOpenChange:t,contact:n,onSelectThread:r}){const[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState([]),[d,h]=p.useState("");p.useEffect(()=>{if(!e||!(n!=null&&n.id))return;let g=!0;return(async()=>{try{s(!0),l(null),await Fd();const{data:x,error:y}=await _t.from("threads").select(`
            id,
            contact_id,
            channel_id,
            status,
            last_msg_at,
            created_at,
            channels!inner(id, display_name, provider, type, logo_url, profile_photo_url, external_id),
            messages(id, body, role, direction, created_at, seq)
          `).eq("contact_id",n.id).order("last_msg_at",{ascending:!1}).order("created_at",{foreignTable:"messages",ascending:!1}).limit(1,{foreignTable:"messages"});if(!g)return;if(y)throw y;const w=(x||[]).map(k=>{const j=Array.isArray(k.messages)&&k.messages.length>0?k.messages[0]:null,N=Kpe(j==null?void 0:j.body),O=(j==null?void 0:j.created_at)??k.last_msg_at??null;return{id:String(k.id),contact_id:String(k.contact_id),channel_id:String(k.channel_id),status:k.status,last_msg_at:O,created_at:String(k.created_at),channel:k.channels?{id:String(k.channels.id),display_name:k.channels.display_name??null,provider:k.channels.provider??null,type:k.channels.type??null,logo_url:k.channels.logo_url??null,profile_photo_url:k.channels.profile_photo_url??null,external_id:k.channels.external_id??null}:null,last_message_preview:N}}),b=new Map;for(const k of w)b.has(k.channel_id)||b.set(k.channel_id,k);const _=Array.from(b.values()).sort((k,j)=>{const N=new Date(k.last_msg_at??k.created_at??0).getTime();return new Date(j.last_msg_at??j.created_at??0).getTime()-N});u(_)}catch(x){if(!g)return;const y=x instanceof Error?x.message:"Failed to load conversations";l(y),u([])}finally{if(!g)return;s(!1)}})(),()=>{g=!1}},[e,n==null?void 0:n.id]);const f=p.useMemo(()=>{const g=d.trim().toLowerCase();return g?c.filter(v=>{var b,_;const x=String(((b=v.channel)==null?void 0:b.display_name)||"").toLowerCase(),y=String(((_=v.channel)==null?void 0:_.provider)||"").toLowerCase(),w=String(v.last_message_preview||"").toLowerCase();return x.includes(g)||y.includes(g)||w.includes(g)}):c},[c,d]),m=(n==null?void 0:n.name)||(n==null?void 0:n.phone)||"Contact";return i.jsx(gn,{open:e,onOpenChange:t,children:i.jsxs(ln,{className:"sm:max-w-[720px] max-h-[80vh] overflow-hidden",children:[i.jsx(cn,{children:i.jsxs(un,{className:"flex items-center gap-2 pr-10",children:[i.jsxs("span",{className:"min-w-0 truncate",children:["Conversations for ",m]}),i.jsx(At,{variant:"secondary",className:"shrink-0",children:c.length})]})}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(ns,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(ot,{value:d,onChange:g=>h(g.target.value),placeholder:"Search by channel or message",className:"pl-9",autoFocus:!0})]})}),i.jsx(Md,{}),i.jsx("div",{className:"max-h-[52vh] overflow-y-auto pr-1 pb-2",children:i.jsx("div",{className:"space-y-2 p-1 pb-2",children:a?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-sm text-muted-foreground",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin"}),"Loading conversations"]}):o?i.jsx("div",{className:"py-10 text-center text-sm text-destructive",children:o}):f.length===0?i.jsx("div",{className:"py-10 text-center text-sm text-muted-foreground",children:d.trim()?"No threads match your search.":"No conversations for this contact yet."}):f.map(g=>{var b,_;const v=((b=g.channel)==null?void 0:b.display_name)||"Channel",x=(((_=g.channel)==null?void 0:_.provider)||"").toString(),y=x?Gpe(x):"",w=g.last_msg_at||g.created_at;return i.jsxs(ne,{type:"button",variant:"ghost",className:"w-full justify-between gap-3 rounded-lg border border-border bg-card px-3 py-3 text-left hover:bg-muted/60 h-auto",onClick:()=>r(g),children:[i.jsxs("div",{className:"flex min-w-0 items-start gap-3",children:[i.jsx("div",{className:"mt-0.5 rounded-md bg-blue-600/10 p-2 text-blue-700",children:i.jsx(Ec,{className:"h-4 w-4"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"min-w-0 truncate font-medium",children:v}),i.jsx(At,{variant:g.status==="closed"?"secondary":g.status==="pending"?"outline":"default",className:"capitalize",children:g.status})]}),i.jsx("div",{className:"mt-1 line-clamp-2 text-xs text-muted-foreground",children:g.last_message_preview})]})]}),i.jsxs("div",{className:"flex shrink-0 items-center gap-2 self-stretch",children:[i.jsxs("div",{className:"flex h-full flex-col items-end justify-between",children:[i.jsx("div",{className:"text-xs text-muted-foreground whitespace-nowrap",children:Vpe(w)}),y?i.jsx(At,{variant:"outline",className:"h-5 px-2 text-[10px]",children:y}):i.jsx("span",{})]}),i.jsx(_p,{className:"h-4 w-4 text-muted-foreground"})]})]},g.id)})})}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Each channel can have only one thread for a contact (unless an admin deletes the previous thread)."})]})})}function Xpe(){var Te,je,Ee,Ue;const{hasRole:e}=Or(),t=e("master_agent");e("super_agent");const[n,r]=p.useState([]),[a,s]=p.useState(1),[o,l]=p.useState(""),[c,u]=p.useState(100),[d,h]=p.useState(null),[f,m]=p.useState(!0),[g,v]=p.useState(!1),[x,y]=p.useState({chatStatus:"",handledBy:"",dateRange:{}}),[w,b]=p.useState(!1),[_,k]=p.useState(!1),[j,N]=p.useState(!1),[O,I]=p.useState(""),[P,S]=p.useState(""),[D,L]=p.useState(""),[U,F]=p.useState(!1),[M,T]=p.useState(!1),[E,$]=p.useState(null),[A,B]=p.useState(!1),[R,C]=p.useState(null),W=li(),{hasPermission:Q}=Or(),X=Q("contacts.delete"),{contacts:Z,loading:te,error:J,totalCount:ie,fetchContacts:ge,deleteContact:ae,updateContact:Re,deleteMultipleContacts:me}=AC();p.useEffect(()=>{const H=setTimeout(()=>{ge(a,c,o,x)},300);return()=>clearTimeout(H)},[o,a,c,x]);const K=H=>{r(H?Z.map(q=>q.id):[])},de=(H,q)=>{r(q?[...n,H]:n.filter(re=>re!==H))},$e=()=>{if(n.length!==0){if(!X){Be.error("You do not have permission to delete contacts");return}k(!0)}},nt=H=>{C(H),B(!0)},Ye=H=>{if(!R)return;const q=new URLSearchParams({menu:"chat",contact:R.id,thread:H.id});B(!1),W({pathname:"/chat",search:q.toString()}),Be.success(`Opening conversation with ${R.name||"contact"}`)},ft=H=>{$(H),T(!0)},Ze=H=>{$(H),I(H.name||""),S(H.phone||""),L(H.notes||""),N(!0)},ut=async()=>{try{await me(n),r([]),k(!1),Be.success(`Successfully deleted ${n.length} contact(s)`)}catch{Be.error("Failed to delete contacts")}},ee=async()=>{if(E)try{F(!0),await Re(E.id,{name:O.trim()||null,phone:P.trim()||null,notes:D.trim()||null}),Be.success("Contact updated"),N(!1)}catch{Be.error("Failed to update contact")}finally{F(!1)}},qe=()=>{ge(a,c,o,x),Be.info("Contacts refreshed")},dt=(H,q)=>{y(re=>({...re,[H]:q}))},se=(H,q)=>{y(re=>({...re,dateRange:{...re.dateRange,[H]:q}}))},ve=()=>{y({chatStatus:"",handledBy:"",dateRange:{}})},oe=Object.values(x).some(H=>typeof H=="string"?H!=="":Object.values(H).some(q=>q!=="")),Xe=n.length===Z.length&&Z.length>0,ke=n.length>0&&n.length<Z.length,rt=H=>{d===H?m(!f):(h(H),m(!0))},bt=(()=>{if(!d)return Z;const H=[...Z];return H.sort((q,re)=>{const he=q[d],Me=re[d];if(he==null&&Me==null)return 0;if(he==null)return f?1:-1;if(Me==null)return f?-1:1;if(d==="chatCreatedAtISO"||d==="created_at"){const Y=new Date(he).getTime(),le=new Date(Me).getTime();return f?Y-le:le-Y}const et=String(he).toLowerCase(),Ie=String(Me).toLowerCase();return et<Ie?f?-1:1:et>Ie?f?1:-1:0}),H})(),ue=(()=>{let H=bt;return x.handledBy&&(H=H.filter(q=>q.handledBy===x.handledBy)),H})(),Se=ue.length,we=H=>{if(!H||H==="")return i.jsx("span",{className:"text-muted-foreground",children:""});const q=H.toLowerCase(),re=q==="open"?"bg-blue-100 text-blue-700":q==="assigned"?"bg-indigo-100 text-indigo-700":q==="pending"?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700",he=q.charAt(0).toUpperCase()+q.slice(1);return i.jsx(At,{className:`${re} border-0`,children:he})};return i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Contacts"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total Contacts: ",te?"...":`${Se.toLocaleString()} of ${ie.toLocaleString()}`]})]}),i.jsxs("div",{className:"flex gap-4 items-center justify-between",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs(Ns,{open:g,onOpenChange:v,children:[i.jsx(Cs,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:"gap-2",children:[i.jsx(b4,{className:"w-4 h-4"}),"Filter",oe&&i.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]})}),i.jsx(Ji,{className:"w-80 p-4",align:"start",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-medium",children:"Filter Contacts"}),oe&&i.jsx(ne,{variant:"ghost",size:"sm",onClick:ve,className:"h-8 px-2 text-xs",children:"Clear All"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Chat Status"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Filter berdasarkan status percakapan: Open (terbuka), Assigned (ditangani), Pending (menunggu), atau Closed (tertutup)"})})]})]}),i.jsxs(Qt,{value:x.chatStatus,onValueChange:H=>dt("chatStatus",H==="all"?"":H),children:[i.jsx(Yt,{className:"h-8",children:i.jsx(Kt,{placeholder:"All statuses"})}),i.jsxs(Xt,{children:[i.jsx(st,{value:"all",children:"All statuses"}),i.jsx(st,{value:"open",children:"Open"}),i.jsx(st,{value:"assigned",children:"Assigned"}),i.jsx(st,{value:"pending",children:"Pending"}),i.jsx(st,{value:"closed",children:"Closed"})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Handled By"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Filter berdasarkan siapa yang menangani percakapan: Assigned (ditugaskan ke agen) atau Unassigned (belum ditugaskan)"})})]})]}),i.jsxs(Qt,{value:x.handledBy||"",onValueChange:H=>dt("handledBy",H==="all"?"":H),children:[i.jsx(Yt,{className:"h-8",children:i.jsx(Kt,{placeholder:"All agents"})}),i.jsxs(Xt,{children:[i.jsx(st,{value:"all",children:"All"}),i.jsx(st,{value:"assigned",children:"Assigned"}),i.jsx(st,{value:"unassigned",children:"Unassigned"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Filter berdasarkan rentang tanggal kontak dibuat. Pilih tanggal mulai dan tanggal akhir untuk membatasi hasil pencarian"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("div",{children:i.jsx(ot,{type:"date",placeholder:"From",value:x.dateRange.from,onChange:H=>se("from",H.target.value),className:"h-8 text-xs"})}),i.jsx("div",{children:i.jsx(ot,{type:"date",placeholder:"To",value:x.dateRange.to,onChange:H=>se("to",H.target.value),className:"h-8 text-xs"})})]})]})]})]})})]}),i.jsxs("div",{className:"relative",children:[i.jsx(ns,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),i.jsx(ot,{placeholder:"Cari berdasarkan Nama atau Telepon",className:"pl-10 pr-8 w-80",value:o,onChange:H=>l(H.target.value)}),o&&i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("button",{type:"button",onClick:()=>l(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":"Clear search",children:i.jsx(Gx,{className:"h-4 w-4"})})}),i.jsx(ye,{children:i.jsx("p",{children:"Hapus pencarian"})})]})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"outline",size:"sm",onClick:qe,disabled:te,children:i.jsx(Vx,{className:`w-4 h-4 ${te?"animate-spin":""}`})})}),i.jsx(ye,{children:i.jsx("p",{children:"Segarkan daftar kontak"})})]})]}),i.jsxs("div",{className:"flex gap-2",children:[X&&i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs(ne,{variant:n.length>0?"destructive":"outline",className:n.length>0?"bg-red-600 hover:bg-red-700 text-white":"",onClick:$e,disabled:n.length===0,children:["Delete Selected (",n.length,")"]})}),i.jsx(ye,{children:i.jsx("p",{children:"Hapus kontak yang dipilih"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"outline",onClick:async()=>{try{b(!0);const{data:H,error:q}=await _t.from("contacts").select(`
                            id,
                            name,
                            phone,
                            email,
                            notes,
                            created_at,
                            threads!left(
                              status,
                              assignee_user_id,
                              created_at,
                              channels(display_name, provider, type)
                            )
                          `);if(q)throw q;const re=(H||[]).map(Y=>{var Fe,Je,it;const le=(Y.threads||[])[0]||null;return{id:Y.id,name:Y.name??"",phone:Y.phone??"",email:Y.email??"",notes:Y.notes??"",contact_created_at:Y.created_at??"",chat_status:(le==null?void 0:le.status)??"",handled_by:(le==null?void 0:le.assignee_user_id)??"",chat_channel:((Fe=le==null?void 0:le.channels)==null?void 0:Fe.display_name)??"",chat_channel_provider:((Je=le==null?void 0:le.channels)==null?void 0:Je.provider)??"",chat_channel_type:((it=le==null?void 0:le.channels)==null?void 0:it.type)??"",chat_created_at:(le==null?void 0:le.created_at)??""}}),he=[["ID","Name","Phone","Email","Notes","Contact Created At","Chat Status","Handled By","Chat Channel","Chat Channel Provider","Chat Channel Type","Chat Created At"].join(","),...re.map(Y=>{var le;return[Y.id,Y.name,Y.phone,Y.email,(le=Y.notes)==null?void 0:le.replace(/"/g,'""'),Y.contact_created_at,Y.chat_status,Y.handled_by,Y.chat_channel,Y.chat_channel_provider,Y.chat_channel_type,Y.chat_created_at].map(Fe=>`"${Fe??""}"`).join(",")})].join(`
`),Me=new Blob([he],{type:"text/csv;charset=utf-8;"}),et=URL.createObjectURL(Me),Ie=document.createElement("a");Ie.href=et,Ie.setAttribute("download",`contacts-${new Date().toISOString()}.csv`),document.body.appendChild(Ie),Ie.click(),document.body.removeChild(Ie),URL.revokeObjectURL(et),Be.success("Contacts exported to CSV")}catch(H){console.error("Failed to export contacts:",H),Be.error("Failed to export contacts")}finally{b(!1)}},disabled:w,children:w?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin"}),"Exporting..."]}):"Export"})}),i.jsx(ye,{children:i.jsx("p",{children:"Ekspor daftar kontak"})})]})]})]})]}),J&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",J]})}),i.jsx(We,{children:i.jsx(ct,{className:"p-0",children:i.jsxs(zb,{children:[i.jsx(Wb,{children:i.jsxs(so,{children:[i.jsx(Jn,{className:"w-12",children:i.jsx(Bd,{checked:Xe,onCheckedChange:K,"aria-label":"Select all contacts",className:ke?"data-[state=checked]:bg-blue-600":""})}),i.jsx(Jn,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{className:"cursor-help",children:"ACTION"})}),i.jsx(ye,{children:i.jsx("p",{children:"Aksi yang dapat dilakukan pada kontak (lihat, edit, hapus)"})})]})}),i.jsx(Jn,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>rt("name"),children:["NAME ",d==="name"?f?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Nama kontak (klik untuk mengurutkan)"})})]})}),i.jsx(Jn,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>rt("phone"),children:["PHONE ",d==="phone"?f?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Nomor telepon kontak (klik untuk mengurutkan)"})})]})}),i.jsx(Jn,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>rt("notes"),children:["NOTE ",d==="notes"?f?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Catatan atau keterangan tambahan kontak (klik untuk mengurutkan)"})})]})}),i.jsx(Jn,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>rt("inbox"),children:["CHANNEL ",d==="inbox"?f?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Saluran komunikasi kontak (klik untuk mengurutkan)"})})]})}),i.jsx(Jn,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>rt("channelType"),children:["PLATFORM ",d==="channelType"?f?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Platform komunikasi (WhatsApp, Telegram, dll) (klik untuk mengurutkan)"})})]})}),i.jsx(Jn,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>rt("chatStatus"),children:["CHAT STATUS ",d==="chatStatus"?f?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Status percakapan (Open, Pending, Closed) (klik untuk mengurutkan)"})})]})}),i.jsx(Jn,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>rt("chatCreatedAtISO"),children:["CREATED AT ",d==="chatCreatedAtISO"?f?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Tanggal dan waktu kontak dibuat (klik untuk mengurutkan)"})})]})}),i.jsx(Jn,{className:"text-xs py-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>rt("handledBy"),children:["HANDLED BY ",d==="handledBy"?f?i.jsx(Fo,{className:"h-3.5 w-3.5"}):i.jsx(Lo,{className:"h-3.5 w-3.5"}):i.jsx($o,{className:"h-3.5 w-3.5"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Agen yang menangani percakapan (klik untuk mengurutkan)"})})]})})]})}),i.jsx(qb,{children:te?i.jsx(so,{children:i.jsx(Un,{colSpan:10,className:"text-center py-8",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(Ht,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Loading contacts..."})]})})}):Z.length===0?i.jsx(so,{children:i.jsx(Un,{colSpan:10,className:"text-center py-8",children:i.jsx("div",{className:"text-muted-foreground",children:o?"No contacts found matching your search.":"No contacts found."})})}):ue.map(H=>{var q;return i.jsxs(so,{className:`hover:bg-muted/50 ${n.includes(H.id)?"bg-blue-50":""}`,children:[i.jsx(Un,{children:i.jsx(Bd,{checked:n.includes(H.id),onCheckedChange:re=>de(H.id,re),"aria-label":`Select ${H.name}`})}),i.jsx(Un,{children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-blue-600 hover:bg-blue-700 text-white","aria-label":"View detailed conversation",onClick:()=>nt(H),variant:"ghost",title:"Open conversation",children:i.jsx(Ec,{className:"h-4 w-4"})})}),i.jsx(ye,{children:"Open conversation"})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-green-600 hover:bg-green-700 text-white","aria-label":"View contact details",onClick:()=>ft(H),variant:"ghost",title:"View details",children:i.jsx(yN,{className:"h-4 w-4"})})}),i.jsx(ye,{children:"View details"})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white","aria-label":"Edit contact",onClick:()=>Ze(H),variant:"ghost",title:"Edit contact",children:i.jsx(Aa,{className:"h-4 w-4"})})}),i.jsx(ye,{children:"Edit contact"})]})]})}),i.jsx(Un,{className:"font-medium",children:i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx(Pa,{className:"h-8 w-8",children:i.jsx(Oa,{className:"text-xs",children:(q=(H.name||H.phone||"?")[0])==null?void 0:q.toUpperCase()})}),i.jsx("div",{className:"min-w-0",children:i.jsx("div",{className:"truncate",children:H.name||"Unnamed Contact"})})]})}),i.jsx(Un,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:H.phone||"-"}),H.phone&&i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{navigator.clipboard.writeText(H.phone),Be.success("Phone copied")},children:i.jsx(Of,{className:"h-3 w-3"})})}),i.jsx(ye,{children:"Copy phone"})]})]})}),i.jsx(Un,{children:H.notes?i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{className:"line-clamp-1 max-w-[260px] inline-block align-middle",children:H.notes})}),i.jsx(ye,{className:"max-w-sm",children:H.notes})]}):i.jsx("span",{className:"text-muted-foreground",children:"-"})}),i.jsx(Un,{children:H.inbox?i.jsx(At,{variant:"outline",children:H.inbox}):""}),i.jsx(Un,{children:H.channelProvider?i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(At,{variant:"secondary",className:"capitalize",children:H.channelProvider})}):i.jsx("span",{className:"text-muted-foreground",children:""})}),i.jsx(Un,{children:we(H.chatStatus)}),i.jsx(Un,{className:"font-mono text-sm whitespace-nowrap",children:H.chatCreatedAt||"-"}),i.jsx(Un,{children:H.handledBy&&H.handledBy!==""?i.jsx(At,{className:"bg-purple-100 text-purple-700 border-0",children:H.handledBy}):i.jsx("span",{className:"text-muted-foreground",children:""})})]},H.id)})})]})})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ne,{variant:"outline",size:"sm",disabled:a===1||te,onClick:()=>s(a-1),children:i.jsx(vN,{className:"w-4 h-4"})}),i.jsxs("span",{className:"text-sm",children:["Page ",i.jsx("span",{className:"font-medium",children:a})," of ",i.jsx("span",{className:"font-medium",children:Math.max(1,Math.ceil(Se/c))})]}),i.jsx(ne,{variant:"outline",size:"sm",disabled:a>=Math.ceil(Se/c)||te,onClick:()=>s(a+1),children:i.jsx(_p,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:"Items per page:"}),i.jsxs(Qt,{value:c.toString(),onValueChange:H=>u(parseInt(H)),children:[i.jsx(Yt,{className:"w-20 h-8",children:i.jsx(Kt,{})}),i.jsxs(Xt,{children:[i.jsx(st,{value:"50",children:"50"}),i.jsx(st,{value:"100",children:"100"}),i.jsx(st,{value:"200",children:"200"})]})]}),i.jsx("span",{children:"rows"})]}),i.jsxs("span",{children:["Total: ",i.jsx("span",{className:"font-medium",children:Se.toLocaleString()})]})]})]}),i.jsx(Rb,{open:_,onOpenChange:k,children:i.jsxs(Up,{children:[i.jsxs(Bp,{children:[i.jsx(Wp,{children:"Are you sure?"}),i.jsxs(qp,{children:["This action cannot be undone. This will permanently delete ",n.length," contact",n.length>1?"s":"","."]})]}),i.jsxs(zp,{children:[i.jsx(Kp,{children:"Cancel"}),i.jsxs(Hp,{onClick:ut,className:"bg-red-600 hover:bg-red-700",children:["Delete ",n.length," Contact",n.length>1?"s":""]})]})]})}),i.jsx(gn,{open:j,onOpenChange:N,children:i.jsxs(ln,{children:[i.jsx(cn,{children:i.jsx(un,{children:"Edit Contact"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(tt,{children:"Name"}),i.jsx(ot,{value:O,onChange:H=>I(H.target.value),placeholder:"Full name"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(tt,{children:"Phone"}),i.jsx(ot,{value:P,onChange:H=>S(H.target.value),placeholder:"Phone number"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(tt,{children:"Notes"}),i.jsx(Fr,{value:D,onChange:H=>L(H.target.value),placeholder:"Notes"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx(ne,{variant:"outline",onClick:()=>N(!1),disabled:U,children:"Cancel"}),i.jsx(ne,{onClick:ee,disabled:U,className:"bg-blue-600 hover:bg-blue-700",children:U?"Saving":"Save"})]})]})]})}),i.jsx(gn,{open:M,onOpenChange:T,children:i.jsxs(ln,{className:"max-w-2xl",children:[i.jsx(cn,{children:i.jsxs(un,{className:"flex items-center gap-3",children:[i.jsx(Pa,{className:"h-10 w-10",children:i.jsx(Oa,{children:((je=(Te=E==null?void 0:E.name)==null?void 0:Te[0])==null?void 0:je.toUpperCase())||((Ue=(Ee=E==null?void 0:E.phone)==null?void 0:Ee[0])==null?void 0:Ue.toUpperCase())||"?"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:(E==null?void 0:E.name)||"Unnamed Contact"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact Details"})]})]})}),E&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-sm font-medium text-muted-foreground",children:"Name"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(iy,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:E.name||"Unnamed Contact"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($V,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:E.phone||"-"}),E.phone&&i.jsx(ne,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{navigator.clipboard.writeText(E.phone),Be.success("Phone copied to clipboard")},children:i.jsx(Of,{className:"h-3 w-3"})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),i.jsx("div",{className:"p-3 bg-muted rounded-md",children:E.notes?i.jsx("p",{className:"text-sm",children:E.notes}):i.jsx("span",{className:"text-muted-foreground text-sm",children:"No notes"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-sm font-medium text-muted-foreground",children:"Label Names"}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{children:E.labelNames||"-"})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-sm font-medium text-muted-foreground",children:"Inbox"}),i.jsx("div",{className:"flex items-center gap-2",children:E.inbox?i.jsx(At,{variant:"outline",children:E.inbox}):i.jsx("span",{className:"text-muted-foreground",children:""})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-sm font-medium text-muted-foreground",children:"Chat Status"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(kv,{className:"h-4 w-4 text-muted-foreground"}),we(E.chatStatus)]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-sm font-medium text-muted-foreground",children:"Handled By"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(iy,{className:"h-4 w-4 text-muted-foreground"}),E.handledBy&&E.handledBy!==""?i.jsx(At,{className:"bg-purple-100 text-purple-700 border-0",children:E.handledBy}):i.jsx("span",{className:"text-muted-foreground",children:""})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-sm font-medium text-muted-foreground",children:"Contact Created At"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lc,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-sm",children:E.created_at?new Date(E.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"text-sm font-medium text-muted-foreground",children:"Chat Created At"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Lc,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-sm",children:E.chatCreatedAt||"-"})]})]})]}),t&&E&&i.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[i.jsxs(tt,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[i.jsx(w4,{className:"h-4 w-4"}),"Contact UUID"]}),i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-md",children:[i.jsx("code",{className:"flex-1 font-mono text-xs text-foreground break-all",children:E.id}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 flex-shrink-0",onClick:()=>{navigator.clipboard.writeText(E.id),Be.success("Contact UUID copied to clipboard")},children:i.jsx(Of,{className:"h-4 w-4"})})}),i.jsx(ye,{children:"Copy UUID"})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique identifier for this contact. Use this UUID for GDPR deletion requests or system integrations."})]}),i.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[i.jsxs(ne,{onClick:()=>nt(E),className:"flex-1",children:[i.jsx(Ec,{className:"h-4 w-4 mr-2"}),"View Conversation"]}),i.jsxs(ne,{variant:"outline",onClick:()=>Ze(E),className:"flex-1",children:[i.jsx(Aa,{className:"h-4 w-4 mr-2"}),"Edit Contact"]})]})]})]})}),i.jsx(Ype,{open:A,onOpenChange:H=>{B(H),H||C(null)},contact:R?{id:R.id,name:R.name,phone:R.phone}:null,onSelectThread:Ye})]})}const Lz=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),o=async()=>{try{r(!0),s(null);const{data:{user:h}}=await ce.auth.getUser();if(!h){t([]);return}const{data:f,error:m}=await ce.from("org_members").select("org_id").eq("user_id",h.id);if(m||!f||f.length===0){t([]);return}const g=f.map(S=>S.org_id),{data:v}=await ce.from("user_roles").select("role_id").eq("user_id",h.id);let x=!1,y=!1,w=!1;if(v&&v.length>0){const S=v.map(U=>U.role_id),{data:D}=await ce.from("roles").select("id, name").in("id",S),L=(D||[]).map(U=>(U.name||"").toLowerCase());x=L.includes("master_agent"),y=L.includes("super_agent"),w=L.includes("agent")&&!x&&!y}let b=null;if(w){const{data:S}=await ce.from("channel_agents").select("channel_id").eq("user_id",h.id);b=new Set((S||[]).map(D=>D.channel_id))}const{data:_,error:k}=await ce.from("channels").select(`
          *
        `).in("org_id",g).order("created_at",{ascending:!1});if(k){console.error("Error fetching channels:",k),s(k.message);return}const{data:j,error:N}=await ce.from("org_members").select(`
          org_id,
          user_id,
          role,
          v_users!inner (
            display_name,
            email
          )
        `).in("org_id",g);N&&console.error("Error fetching org members for platforms:",N);const O={};for(const S of j||[]){const D=S.org_id;O[D]||(O[D]=[]),O[D].push(S)}const I=(_||[]).filter(S=>b?b.has(S.id):!0),P=await Promise.all(I.map(async S=>{try{const{data:D}=await ce.from("channel_agents").select("user_id").eq("channel_id",S.id),L=(D||[]).map(M=>M.user_id);let U=[];if(L.length>0){const[M,T]=await Promise.all([ce.from("users_profile").select("user_id, display_name").in("user_id",L),ce.from("v_users").select("id, display_name, email").in("id",L)]),E=M.data||[],$=T.data||[],A={};$.forEach(B=>{A[B.id]={display_name:B.display_name,email:B.email}}),E.forEach(B=>{var R,C;A[B.user_id]={display_name:B.display_name??((R=A[B.user_id])==null?void 0:R.display_name),email:(C=A[B.user_id])==null?void 0:C.email}}),U=Object.entries(A).map(([B,R])=>({user_id:B,...R}))}const F=L.map(M=>{const T=U.find(E=>E.user_id===M||E.id===M)||{};return{user_id:M,display_name:T.display_name||(T==null?void 0:T.display_name),email:T.email}});return{...S,provider:S.provider,status:S.is_active?"active":"inactive",human_agents:F,super_agent_id:S.super_agent_id??null,credentials:(S==null?void 0:S.credentials)??null}}catch{return{...S,provider:S.provider,status:S.is_active?"active":"inactive",human_agents:[],super_agent_id:S.super_agent_id??null,credentials:(S==null?void 0:S.credentials)??null}}}));t(P)}catch(h){console.error("Error fetching platforms:",h),s("Failed to fetch platforms")}finally{r(!1)}},l=async h=>{var f;try{s(null);const{data:{user:m}}=await ce.auth.getUser();if(!m)throw new Error("User not authenticated");const{data:g,error:v}=await ce.from("org_members").select("org_id").eq("user_id",m.id).limit(1);if(v)throw v;const x=(f=g==null?void 0:g[0])==null?void 0:f.org_id;if(!x)throw new Error("User not found in any organization");if(!h.ai_profile_id)throw new Error("AI agent is required when creating a platform");const{data:y,error:w}=await ce.from("ai_profiles").select("super_agent_id").eq("id",h.ai_profile_id).single();if(w)throw w;const b=y==null?void 0:y.super_agent_id;if(!b)throw new Error("Selected AI agent does not have a super agent assigned. Please update the AI agent first.");const _=h.provider==="whatsapp"?String(h.display_name||"").toLowerCase().replace(/\s/g,""):null,{data:k,error:j}=await ce.from("channels").insert({org_id:x,display_name:h.display_name,credentials:h.provider==="whatsapp"?{waha_session_name:_}:{},provider:h.provider,type:"inbox",profile_photo_url:h.profile_photo_url,ai_profile_id:h.ai_profile_id,super_agent_id:b,is_active:!0,external_id:h.provider==="whatsapp"?_:null}).select().single();if(j)throw j;if(h.human_agent_ids&&h.human_agent_ids.length>0){const N=h.human_agent_ids.map(I=>({channel_id:k.id,user_id:I})),{error:O}=await ce.from("channel_agents").insert(N);O&&console.warn("Failed to attach channel agents on create:",O)}await o();try{await Jt({action:"channel.create",resource:"channel",resourceId:(k==null?void 0:k.id)??null,context:{...h,super_agent_id:b}})}catch{}return k}catch(m){throw console.error("Error creating platform:",m),s(m.message||"Failed to create platform"),m}},c=async(h,f)=>{try{s(null);const m={};if(typeof f.display_name<"u"&&(m.display_name=f.display_name),typeof f.profile_photo_url<"u"&&(m.profile_photo_url=f.profile_photo_url),typeof f.ai_profile_id<"u"&&(m.ai_profile_id=f.ai_profile_id,f.ai_profile_id)){const{data:g,error:v}=await ce.from("ai_profiles").select("super_agent_id").eq("id",f.ai_profile_id).single();if(v)throw v;const x=g==null?void 0:g.super_agent_id;if(!x)throw new Error("Selected AI agent does not have a super agent assigned. Please update the AI agent first.");m.super_agent_id=x}if(typeof f.provider<"u"&&(m.provider=f.provider),Object.keys(m).length>0){const{error:g}=await ce.from("channels").update(m).eq("id",h);if(g)throw g}if(f.human_agent_ids!==void 0){const{error:g}=await ce.from("channel_agents").delete().eq("channel_id",h);if(g&&console.error("Error removing human agents:",g),f.human_agent_ids.length>0){const v=f.human_agent_ids.map(y=>({channel_id:h,user_id:y})),{error:x}=await ce.from("channel_agents").insert(v);x&&console.error("Error adding human agents:",x)}}await o();try{await Jt({action:"channel.update",resource:"channel",resourceId:h,context:f})}catch{}}catch(m){throw console.error("Error updating platform:",m),s(m.message||"Failed to update platform"),m}},u=async(h,f,m)=>{const g=[/^image\//i],v=/\.(png|jpe?g|webp)$/i;if(!(g.some(b=>b.test(f.type||""))||v.test(f.name||"")))throw new Error("Only image files are allowed (PNG, JPG, WEBP).");const y=5*1024*1024;if(typeof f.size=="number"&&f.size>y)throw new Error("Image is too large. Maximum size is 5 MB.");async function w(b){try{if(typeof window>"u")return null;const _=document.createElement("img"),k=URL.createObjectURL(b);try{await new Promise((I,P)=>{_.onload=()=>I(),_.onerror=P,_.src=k})}finally{URL.revokeObjectURL(k)}const j=document.createElement("canvas");j.width=_.naturalWidth||_.width,j.height=_.naturalHeight||_.height;const N=j.getContext("2d");return N?(N.drawImage(_,0,0,j.width,j.height),await new Promise(I=>j.toBlob(P=>I(P),"image/png"))):null}catch{return null}}try{const{data:{user:b}}=await ce.auth.getUser();if(!b)throw new Error("User not authenticated");let _=m||"";if(!_){const{data:U,error:F}=await ce.from("channels").select("org_id").eq("id",h).single();if(F)throw F;_=U==null?void 0:U.org_id}if(!_)throw new Error("Missing org_id for channel");const k="channel-assets",j=`${_}/${h}/profile/avatar.png`,N=await w(f),O=N||f,I=N?"image/png":f.type||"image/*",{error:P}=await ce.storage.from(k).upload(j,O,{cacheControl:"31536000",upsert:!0,contentType:I});if(P)throw P;const{data:S}=ce.storage.from(k).getPublicUrl(j),D=S==null?void 0:S.publicUrl,{error:L}=await ce.from("channels").update({logo_url:D,profile_photo_url:D}).eq("id",h);if(L)throw L;try{await Jt({action:"channel.avatar.update",resource:"channel",resourceId:h,context:{objectPath:j}})}catch{}return D}catch(b){throw console.error("Error uploading channel avatar:",b),new Error((b==null?void 0:b.message)||"Failed to upload channel avatar")}},d=async(h,f)=>{try{const{data:{user:m}}=await ce.auth.getUser();if(!m)throw new Error("User not authenticated");let g=f||"";if(!g){const{data:w,error:b}=await ce.from("channels").select("org_id").eq("id",h).single();if(b)throw b;g=w==null?void 0:w.org_id}if(!g)throw new Error("Missing org_id for channel");const v="channel-assets",x=`${g}/${h}/profile/avatar.png`;try{await ce.storage.from(v).remove([x])}catch{}const{error:y}=await ce.from("channels").update({logo_url:null,profile_photo_url:null}).eq("id",h);if(y)throw y;try{await Jt({action:"channel.avatar.delete",resource:"channel",resourceId:h,context:{objectPath:x}})}catch{}}catch(m){throw console.error("Error deleting channel avatar:",m),new Error((m==null?void 0:m.message)||"Failed to delete channel avatar")}};return p.useEffect(()=>{o()},[]),{platforms:e,loading:n,error:a,fetchPlatforms:o,createPlatform:l,updatePlatform:c,uploadChannelAvatar:u,deleteChannelAvatar:d}},Jpe=()=>{const[e,t]=p.useState({}),[n,r]=p.useState(!1),[a,s]=p.useState(null),o=p.useCallback(async l=>{if(!l)return[];try{r(!0),s(null);const{data:c,error:u}=await ce.from("channels").select("*").eq("org_id",l).order("created_at",{ascending:!1});if(u)return s(u.message),[];const d=c||[];return t(h=>({...h,[l]:d})),d}catch(c){return s(c instanceof Error?c.message:"Failed to fetch channels"),[]}finally{r(!1)}},[]);return{channelsByOrg:e,loading:n,error:a,fetchByOrgId:o}},$z=()=>{const{user:e}=aa(),{userRoles:t,loading:n}=Or(),[r,a]=p.useState("none"),[s,o]=p.useState(null),[l,c]=p.useState(!0),[u,d]=p.useState(null),h=p.useMemo(()=>t.map(x=>((x==null?void 0:x.name)??"").toLowerCase()),[t]),f=h.includes("master_agent"),m=h.includes("super_agent"),g=h.includes("agent");return p.useEffect(()=>{let x=!0;const y=(w,b,_)=>{x&&((_==null?void 0:_.loading)!==void 0&&c(_.loading),(_==null?void 0:_.error)!==void 0&&d(_.error),a(w),o(b))};return e!=null&&e.id?n?(c(!0),()=>{x=!1}):f?(y("all",null,{loading:!1,error:null}),()=>{x=!1}):m?(y("super",e.id,{loading:!1,error:null}),()=>{x=!1}):g?(c(!0),d(null),(async()=>{try{await Fd();const{data:w,error:b}=await ce.from("super_agent_members").select("super_agent_id").eq("agent_user_id",e.id).maybeSingle();if(!x)return;if(b)throw b;const _=(w==null?void 0:w.super_agent_id)??null;_?y("agent",_,{loading:!1,error:null}):y("none",null,{loading:!1,error:"Agent belum memiliki Super Agent penanggung jawab."})}catch(w){if(!x)return;console.error("Failed to resolve agent super scope",w),y("none",null,{loading:!1,error:w instanceof Error?w.message:"Gagal memuat cakupan agen AI."})}})(),()=>{x=!1}):(h.length>0?y("all",null,{loading:!1,error:null}):c(!0),()=>{x=!1}):(y("none",null,{loading:!1,error:null}),()=>{x=!1})},[e==null?void 0:e.id,n,f,m,g,h]),{mode:r,superAgentId:s,loading:l,error:u,refresh:async()=>{if(!(e!=null&&e.id)||!g)return s;c(!0),d(null);try{await Fd();const{data:x,error:y}=await ce.from("super_agent_members").select("super_agent_id").eq("agent_user_id",e.id).maybeSingle();if(y)throw y;const w=(x==null?void 0:x.super_agent_id)??null;return w?(a("agent"),o(w)):(a("none"),o(null),d("Agent belum memiliki Super Agent penanggung jawab.")),w}catch(x){return console.error("Failed to refresh agent super scope",x),a("none"),o(null),d(x instanceof Error?x.message:"Gagal memuat cakupan agen AI."),null}finally{c(!1)}}}},Hb=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),o=p.useState({current:null})[0],{user:l}=aa(),{mode:c,superAgentId:u,loading:d,error:h}=$z(),f=p.useMemo(()=>{const g="v2",v=(l==null?void 0:l.id)??"anon";return c==="all"?`app.cachedAIAgents:${g}:${v}:all`:c==="none"?`app.cachedAIAgents:${g}:${v}:none`:`app.cachedAIAgents:${g}:${v}:${u??"none"}`},[c,u,l==null?void 0:l.id]),m=async()=>{if(!d)try{const g=`${c}:${u??"null"}`;if(o.current===g)return;if(o.current=g,r(!0),s(h??null),c==="none"){t([]);try{localStorage.setItem(f,JSON.stringify([]))}catch{}return}await Fd();const v="id, org_id, name, description, system_prompt, welcome_message, transfer_conditions, stop_ai_after_handoff, response_temperature, created_at, auto_resolve_after_minutes, enable_resolve, super_agent_id";let x=null,y=null;if(c==="super"||c==="agent"){if(!u){t([]);try{localStorage.setItem(f,JSON.stringify([]))}catch{}return}const{data:w,error:b}=await ce.from("ai_profiles").select(v).eq("super_agent_id",u).order("created_at",{ascending:!1});if(x=w,y=b,(y==null?void 0:y.code)==="42703"){const _=await ce.from("ai_profiles").select(v).order("created_at",{ascending:!1});x=_.data,y=_.error}}else{const{data:w,error:b}=await ce.from("ai_profiles").select(v).order("created_at",{ascending:!1});x=w,y=b}if(y){console.error("Error fetching AI agents:",y),s(y.message),t([]);return}t(x||[]);try{localStorage.setItem(f,JSON.stringify(x||[]))}catch{}}catch(g){console.error("Error fetching AI agents:",g),s("Failed to fetch AI agents"),t([])}finally{o.current=null,r(!1)}};return p.useEffect(()=>{if(d){r(!0);return}if(c==="none"){t([]),s(h??"Tidak ada agen AI yang tersedia untuk akun ini."),r(!1);return}try{const x=localStorage.getItem(f);if(x){const y=JSON.parse(x);Array.isArray(y)&&t(y)}}catch{}const v=setTimeout(()=>m(),50);return()=>clearTimeout(v)},[d,c,h,f]),{aiAgents:e,loading:n||d,error:a,fetchAIAgents:m,scopeMode:c,superAgentId:u}};function Kb({options:e,value:t,onChange:n,onValueChange:r,placeholder:a="Select...",disabled:s,className:o}){const[l,c]=p.useState(!1),u=new Set(t),d=g=>{n&&n(g),r&&r(g)},h=g=>{const v=new Set(u);v.has(g)?v.delete(g):v.add(g),d(Array.from(v))},f=e.filter(g=>u.has(g.value)).map(g=>g.label),m=f.length===0?a:`${f.length} selected`;return i.jsxs(Ns,{open:l,onOpenChange:c,children:[i.jsx(Cs,{asChild:!0,children:i.jsxs(ne,{type:"button",variant:"outline",role:"combobox","aria-expanded":l,disabled:s,className:Pe("justify-between w-64",o),children:[i.jsx("span",{className:"truncate text-left",children:m}),i.jsx("span",{className:"ml-2 text-muted-foreground",children:""})]})}),i.jsx(Ji,{className:"p-0 w-80",align:"start",onOpenAutoFocus:g=>g.preventDefault(),children:i.jsxs(km,{children:[i.jsx(Sm,{placeholder:"Search..."}),i.jsxs(ZB,{children:[i.jsx(Nm,{children:"No results found."}),i.jsx(Cm,{children:e.map(g=>i.jsxs(Am,{onSelect:v=>{h(g.value)},className:"cursor-pointer",children:[i.jsx("div",{className:"mr-2 flex h-4 w-4 items-center justify-center",onClick:v=>{v.preventDefault(),v.stopPropagation(),h(g.value)},children:i.jsx(Bd,{checked:u.has(g.value),onCheckedChange:()=>h(g.value)})}),i.jsx("span",{children:g.label})]},g.value))})]})]})})]})}const Qpe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co",VITE_WEBHOOK_BASE_URL:"https://primary-production-376c.up.railway.app/webhook"},hd=Qpe??{},Fz=e=>e.replace(/\/$/,""),H1=(()=>{const e=hd==null?void 0:hd.VITE_APP_ORIGIN;return e?Fz(e):"https://synkaai.netlify.app"})(),hO=e=>`${H1}/livechat/${e}`,Ov=(()=>{const e=hd==null?void 0:hd.VITE_WAHA_BASE_URL;return Fz(e||"https://waha-plus-production-97c1.up.railway.app")})(),Zpe=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=nu(),{user:s}=aa(),{hasPermission:o,hasRole:l}=Or(),{aiAgents:c,loading:u}=Hb(),{agents:d,loading:h}=ql(),[f,m]=p.useState({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[g,v]=p.useState(!1),[x,y]=p.useState(!1),[w,b]=p.useState(null),[_,k]=p.useState(null),[j,N]=p.useState(null);p.useRef(!1);const[O,I]=p.useState(!1),[P,S]=p.useState(!1),[D,L]=p.useState(null),U=o("channels.create"),F=l("super_agent");p.useEffect(()=>{e&&F&&s!=null&&s.id&&(L(s.id),m(R=>({...R,selectedAIAgent:"",selectedHumanAgents:[]})))},[e,F,s==null?void 0:s.id]),p.useMemo(()=>D&&d.find(R=>R.primaryRole==="super_agent"&&R.user_id===D)||null,[D,d]);const M=async()=>{if(!s)return null;const{data:R}=await ce.from("org_members").select("org_id").eq("user_id",s.id).single();return(R==null?void 0:R.org_id)||null},T=async()=>{try{y(!0),N(null),b(null);const R=Sn.ENDPOINTS.WHATSAPP.CREATE_SESSION,C=`${Sn.BASE_URL}/ffef6b04-3626-4f9c-8ab8-be3d9971cce3/waha`,W=(f.platformName||"default").replace(/\s/g,""),Q={name:W,start:!0,config:{metadata:{"user.id":(s==null?void 0:s.id)||"","user.email":(s==null?void 0:s.email)||""},proxy:null,debug:!1,noweb:{store:{enabled:!0,fullSync:!1}},webhooks:[{url:C,events:["message","session.status","message.reaction","message.any","message.ack","message.waiting","message.revoked","state.change","group.join","group.leave","presence.update","poll.vote","poll.vote.failed","chat.archive","call.received","call.accepted","call.rejected","label.upsert","label.deleted","label.chat.added","label.chat.deleted","engine.event"],hmac:null,retries:null,customHeaders:null}]}};try{const te=await ji(R,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)});if(!te.ok){const J=await te.text();if(te.status!==409)throw new Error(`Create session failed (${te.status}): ${J||"Unknown error"}`)}}catch(te){throw te}const X=await ji(Sn.ENDPOINTS.WHATSAPP.GET_LOGIN_QR,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:W})});if(!X.ok)throw new Error(`Request failed with status ${X.status}`);const Z=X.headers.get("content-type");if(Z&&Z.includes("image/")){const te=await X.blob(),J=URL.createObjectURL(te);return b(J),k(W),y(!1),{qr:J,sessionName:W}}else try{const te=await X.json(),J=Array.isArray(te)?te[0]:te;if(!J||!J.data||!J.mimetype)throw new Error("Invalid QR response shape");const ie=`data:${J.mimetype};base64,${J.data}`;return b(ie),k(W),y(!1),{qr:ie,sessionName:W}}catch{const J=await X.text();if(J&&J.length>0){const ie=`data:image/png;base64,${J}`;return b(ie),k(W),y(!1),{qr:ie,sessionName:W}}else throw new Error("Invalid response format")}return y(!1),null}catch(R){return N((R==null?void 0:R.message)||"Failed to generate QR"),y(!1),null}},E=async()=>{try{const C=await(async()=>{if(_&&_.trim().length>0)return _;try{const X=await M();if(!X)return"default";const{data:Z}=await ce.from("channels").select("display_name, provider").eq("org_id",X).eq("provider","whatsapp").order("created_at",{ascending:!1}).limit(1).maybeSingle();return((Z==null?void 0:Z.display_name)||"").replace(/\s/g,"")||"default"}catch{return"default"}})(),W=`${Ov}/api/sessions/${encodeURIComponent(C)}`,Q=await fetch(W,{method:"GET",headers:{"Content-Type":"application/json","x-api-key":"asd"}});if(Q.ok){const X=await Q.json();return X&&X.status==="WORKING"&&X.me&&X.me.id?(v(!0),b(null),a({title:"Success",description:"WhatsApp connected successfully!"}),!0):(v(!1),!1)}return!1}catch(R){return console.error("Error checking session status:",R),!1}};p.useEffect(()=>{if(!w||g)return;const R=setInterval(async()=>{await E()&&clearInterval(R)},5e3);return()=>clearInterval(R)},[w,g]);const $=!!(f.platformName&&f.selectedAIAgent&&D&&U),A=async()=>{try{I(!0)}finally{I(!1),m({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),v(!1),y(!1),b(null),N(null),L(null),t()}},B=async()=>{try{if(S(!0),!U){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"}),S(!1);return}if(!D||!f.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"}),S(!1);return}if(!await M())throw new Error("User not found in any organization");const C=await T(),W={...f,phoneNumber:void 0,platformType:"whatsapp",selectedSuperAgentId:D};if(await n(W),a({title:"Success",description:"Channel successfully created."}),C)try{window.dispatchEvent(new CustomEvent("open-wa-qr",{detail:{sessionName:C.sessionName,qr:C.qr}}))}catch{}try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}t(),m({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),L(null)}catch(R){console.error("Error submitting form:",R),a({title:"Error",description:R.message||"Failed to create WhatsApp platform",variant:"destructive"})}finally{S(!1)}};return i.jsx(gn,{open:e,onOpenChange:t,children:i.jsx(ln,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(cn,{children:[i.jsx(un,{children:"Setup WhatsApp Platform"}),i.jsx(Ur,{children:"Configure your new WhatsApp platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"platformName",children:"Platform Name *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama platform atau merek yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(ot,{id:"platformName",placeholder:"Enter your platform or brand name",value:f.platformName,onChange:R=>m(C=>({...C,platformName:R.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di WhatsApp Business"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:f.profilePhoto?i.jsx("img",{src:URL.createObjectURL(f.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx($c,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(ot,{id:"profilePhoto",type:"file",accept:"image/*",onChange:R=>{var W;const C=((W=R.target.files)==null?void 0:W[0])||null;m(Q=>({...Q,profilePhoto:C}))},className:"hidden"}),i.jsxs(ne,{variant:"outline",onClick:()=>{var R;return(R=document.getElementById("profilePhoto"))==null?void 0:R.click()},children:[i.jsx($c,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"description",children:"Description"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(Fr,{id:"description",placeholder:"Describe your business and what you offer",value:f.description,onChange:R=>m(C=>({...C,description:R.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-xs font-medium text-emerald-700",children:"Super Agent (1 max)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform WhatsApp ini"})})]})]}),h?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(Qt,{value:D||"",onValueChange:R=>{L(R),m(C=>({...C,selectedAIAgent:"",selectedHumanAgents:[]}))},disabled:F,children:[i.jsx(Yt,{children:i.jsx(Kt,{placeholder:"Choose a Super Agent"})}),i.jsx(Xt,{className:"bg-background border z-50",children:d.filter(R=>R.primaryRole==="super_agent").map(R=>i.jsx(st,{value:R.user_id,children:R.display_name||R.email||R.user_id.slice(0,8)},R.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform WhatsApp ini"})})]})]}),u?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Qt,{value:f.selectedAIAgent,onValueChange:R=>{const C=c.find(W=>W.id===R);if(!D){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!C||C.super_agent_id!==D){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}m(W=>({...W,selectedAIAgent:R,selectedHumanAgents:[]}))},children:[i.jsx(Yt,{children:i.jsx(Kt,{placeholder:D?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(Xt,{className:"bg-background border z-50",children:c.filter(R=>D?R.super_agent_id===D:!1).map(R=>i.jsx(st,{value:R.id,children:R.name},R.id))})]})]}),f.selectedAIAgent&&!D&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{children:"Assign Agents"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),h?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-xs font-medium",children:["Agents ",D?"":"(select an AI agent first)"]}),(()=>{const C=d.filter(W=>W.primaryRole==="agent").filter(W=>!!D&&W.super_agent_id===D).map(W=>({value:W.user_id,label:W.display_name||W.email||`Agent ${W.user_id.slice(0,8)}`}));return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kb,{options:C,value:f.selectedHumanAgents,onValueChange:W=>m(Q=>({...Q,selectedHumanAgents:W})),disabled:!D,placeholder:D?"Select human agents":"Select an AI agent first"}),i.jsx(ne,{type:"button",variant:"outline",disabled:!D||C.length===0,onClick:()=>m(W=>({...W,selectedHumanAgents:C.map(Q=>Q.value)})),children:"Select All"}),i.jsx(ne,{type:"button",variant:"ghost",disabled:!D||f.selectedHumanAgents.length===0,onClick:()=>m(W=>({...W,selectedHumanAgents:[]})),children:"Unselect All"})]})})()]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(ne,{variant:"outline",onClick:A,disabled:r||O,className:"text-blue-700 border-blue-200 hover:bg-blue-50",children:O?i.jsxs(i.Fragment,{children:[i.jsx(Ht,{className:"mr-2 h-4 w-4 animate-spin"}),"Cancelling..."]}):"Cancel"}),i.jsx(ne,{onClick:B,disabled:r||P||!$,className:"bg-blue-100 hover:bg-blue-200 text-blue-700 transition-all duration-200 hover:shadow-md active:scale-[.98]","aria-busy":r||P,children:r||P?i.jsxs(i.Fragment,{children:[i.jsx(Ht,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create WhatsApp Platform"})]})]})})})},ege=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=nu(),{user:s}=aa(),{hasPermission:o,hasRole:l}=Or(),{aiAgents:c,loading:u}=Hb(),{agents:d,loading:h}=ql(),{uploadChannelAvatar:f}=Lz(),[m,g]=p.useState({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[v,x]=p.useState(!1),[y,w]=p.useState(null),[b,_]=p.useState(!1),[k,j]=p.useState(null),N=(m.telegramBotToken||"").trim(),O=!!k&&k===N,I=o("channels.create"),P=l("super_agent");p.useEffect(()=>{e&&P&&s!=null&&s.id&&(w(s.id),g(M=>({...M,selectedAIAgent:"",selectedHumanAgents:[]})))},[e,P,s==null?void 0:s.id]);const S=p.useMemo(()=>y&&d.find(M=>M.primaryRole==="super_agent"&&M.user_id===y)||null,[y,d]),D=!!(m.displayName&&m.selectedAIAgent&&m.telegramBotToken&&y&&I&&O),L=async()=>{if(!s)return null;const{data:M}=await ce.from("org_members").select("org_id").eq("user_id",s.id).single();return(M==null?void 0:M.org_id)||null},U=async()=>{const M=(m.telegramBotToken||"").trim();if(!M){a({title:"Telegram bot token required",description:"Enter your BotFather token before validating.",variant:"destructive"});return}try{_(!0);const T=await L(),E={telegram_bot_token:M};T&&(E.org_id=T);const $=await ji(Sn.ENDPOINTS.TELEGRAM.VERIFY_TOKEN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)});let A=null;try{const R=await $.text();A=R?JSON.parse(R):null}catch{throw new Error("Token is invalid")}if(!$.ok)throw new Error("Token is invalid");if(A===null||typeof A!="object"||Array.isArray(A))throw new Error("Token is invalid");const B=A.valid;if(typeof B!="boolean")throw new Error("Token is invalid");if(B!==!0)throw new Error("Token is invalid");j(M),a({title:"Token validated",description:"Telegram bot token has been successfully verified."})}catch(T){console.error("Telegram token validation failed:",T),j(null);const E=T&&typeof T.message=="string"?T.message:"",$=String(E).toLowerCase();a({title:"Validation failed",description:$.includes("empty")||$.includes("required")?E||"Telegram bot token is required":"Token is invalid",variant:"destructive"})}finally{_(!1)}},F=async()=>{var M;try{if(v)return;if(x(!0),!I){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"}),x(!1);return}if(!y||!m.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"}),x(!1);return}if(!O){a({title:"Token validation required",description:"You must validate the Telegram bot token before creating this platform.",variant:"destructive"}),x(!1);return}const T=await L();if(!T)throw new Error("User not found in any organization");const E=(m.telegramBotToken||"").trim();if(!E)throw new Error("Telegram bot token is required");try{const{data:R}=await ce.from("channels").select("id").eq("provider","telegram").eq("external_id",E).limit(1);if(Array.isArray(R)&&R.length>0){a({title:"Duplicate token",description:"A Telegram bot with this BotFather token already exists.",variant:"destructive"}),x(!1);return}}catch{}const $={brand_name:m.displayName,display_name:m.displayName,description:m.description,telegram_bot_token:m.telegramBotToken,ai_profile_id:m.selectedAIAgent,human_agent_ids:m.selectedHumanAgents,super_agent_id:y,org_id:T,platform_type:"telegram"},A=await ji(Sn.ENDPOINTS.TELEGRAM.CREATE_PLATFORM,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});if(!A.ok)throw new Error(`Telegram webhook failed with status ${A.status}`);let B=null;try{if((A.headers.get("content-type")||"").includes("application/json"))B=await A.json();else{const C=await A.text();try{B=C?JSON.parse(C):null}catch{B={raw:C||null}}}}catch{B=null}try{if(m.profilePhoto){let R=(B==null?void 0:B.channel_id)||(B==null?void 0:B.id)||((M=B==null?void 0:B.channel)==null?void 0:M.id)||null;if(!R){const{data:C}=await ce.from("channels").select("id").eq("org_id",T).eq("provider","telegram").eq("external_id",E).limit(1).maybeSingle();R=(C==null?void 0:C.id)||null}R&&await f(R,m.profilePhoto,T)}}catch(R){console.warn("Telegram avatar upload failed:",R)}a({title:"Success",description:"Telegram channel created successfully"});try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}t(),g({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),w(null)}catch(T){console.error("Error submitting form:",T),a({title:"Error",description:T.message||"Failed to create Telegram platform",variant:"destructive"})}finally{x(!1)}};return i.jsx(gn,{open:e,onOpenChange:t,children:i.jsx(ln,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(cn,{children:[i.jsx(un,{children:"Setup Telegram Bot Platform"}),i.jsx(Ur,{children:"Configure your new Telegram bot platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"displayName",children:"Display Name *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama yang akan ditampilkan di widget chat Telegram"})})]})]}),i.jsx(ot,{id:"displayName",placeholder:"Enter the display name",value:m.displayName,onChange:M=>g(T=>({...T,displayName:M.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"description",children:"Description"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(Fr,{id:"description",placeholder:"Describe your business and what you offer",value:m.description,onChange:M=>g(T=>({...T,description:M.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di bot Telegram"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:m.profilePhoto?i.jsx("img",{src:URL.createObjectURL(m.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx($c,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(ot,{id:"profilePhoto",type:"file",accept:"image/*",onChange:M=>{var E;const T=((E=M.target.files)==null?void 0:E[0])||null;g($=>({...$,profilePhoto:T}))},className:"hidden"}),i.jsxs(ne,{variant:"outline",onClick:()=>{var M;return(M=document.getElementById("profilePhoto"))==null?void 0:M.click()},children:[i.jsx($c,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/50",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx(tt,{className:"text-sm font-medium",children:"Telegram Bot Setup"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Follow these steps to set up your Telegram bot"})]})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 1: Create a bot with BotFather"}),i.jsxs("ol",{className:"list-decimal list-inside text-xs space-y-1 ml-2",children:[i.jsx("li",{children:"Open Telegram and search for @BotFather"}),i.jsx("li",{children:"Send /newbot command"}),i.jsx("li",{children:"Choose a name for your bot (organization name)"}),i.jsx("li",{children:"Choose a username (must end with 'bot')"}),i.jsx("li",{children:"Copy the bot token provided"})]})]}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 2: Configure bot settings"}),i.jsxs("ol",{className:"list-decimal list-inside text-xs space-y-1 ml-2",children:[i.jsx("li",{children:"Send /setdescription to set bot description"}),i.jsx("li",{children:"Send /setabouttext to set about text"}),i.jsx("li",{children:"Send /setcommands to set available commands"})]})]}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 3: Enable webhook (optional)"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Your bot will automatically receive messages once connected to our platform."})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"telegramBotToken",children:"Telegram Bot Token *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Token bot Telegram yang diperoleh dari @BotFather untuk mengautentikasi bot"})})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ot,{id:"telegramBotToken",type:"password",placeholder:"1234567890:ABCdefGHIjklMNOpqrsTUVwxyz",value:m.telegramBotToken,onChange:M=>{const T=M.target.value;g(E=>({...E,telegramBotToken:T})),j(null)},className:"flex-1"}),i.jsx(ne,{type:"button",variant:O?"outline":"default",className:O?"border-emerald-600 text-emerald-700 hover:bg-emerald-50":"",onClick:U,disabled:b||!m.telegramBotToken,children:b?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin"}),"Validating"]}):"Validate"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Get this token from @BotFather on Telegram. Format: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"}),O&&i.jsx("p",{className:"text-xs text-emerald-600",children:"Bot token validated. You can now create this Telegram platform."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{children:"Super Agent *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform Telegram ini"})})]})]}),h?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(Qt,{value:y||"",onValueChange:M=>{w(M),g(T=>({...T,selectedAIAgent:"",selectedHumanAgents:[]}))},disabled:P,children:[i.jsx(Yt,{children:i.jsx(Kt,{placeholder:"Choose a Super Agent"})}),i.jsx(Xt,{className:"bg-background border z-50",children:d.filter(M=>M.primaryRole==="super_agent").map(M=>i.jsx(st,{value:M.user_id,children:M.display_name||M.email||M.user_id.slice(0,8)},M.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform Telegram ini"})})]})]}),u?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Qt,{value:m.selectedAIAgent,onValueChange:M=>{const T=c.find(E=>E.id===M);if(!y){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!T||T.super_agent_id!==y){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}g(E=>({...E,selectedAIAgent:M,selectedHumanAgents:[]}))},children:[i.jsx(Yt,{children:i.jsx(Kt,{placeholder:y?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(Xt,{className:"bg-background border z-50",children:c.filter(M=>y?M.super_agent_id===y:!1).map(M=>i.jsx(st,{value:M.id,children:M.name},M.id))})]}),y&&i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-md bg-muted px-3 py-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:"Super Agent:"}),i.jsx("span",{className:"font-medium",children:(S==null?void 0:S.display_name)||(S==null?void 0:S.email)||y.slice(0,8)})]})]}),m.selectedAIAgent&&!y&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{children:"Select Human Agents (optional)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),h?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):(()=>{const T=d.filter(E=>E.primaryRole==="agent").filter(E=>!!y&&E.super_agent_id===y).map(E=>({value:E.user_id,label:E.display_name||E.email||`Agent ${E.user_id.slice(0,8)}`}));return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kb,{options:T,value:m.selectedHumanAgents,onValueChange:E=>g($=>({...$,selectedHumanAgents:E})),disabled:!y,placeholder:y?"Select human agents":"Select an AI agent first"}),i.jsx(ne,{type:"button",variant:"outline",disabled:!y||T.length===0,onClick:()=>g(E=>({...E,selectedHumanAgents:T.map($=>$.value)})),children:"Select All"}),i.jsx(ne,{type:"button",variant:"ghost",disabled:!y||m.selectedHumanAgents.length===0,onClick:()=>g(E=>({...E,selectedHumanAgents:[]})),children:"Unselect All"})]})})()]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(ne,{variant:"outline",onClick:()=>{v||(g({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),w(null),t())},disabled:r||v,children:"Cancel"}),i.jsx(ne,{onClick:F,disabled:r||v||!D,className:"bg-blue-600 hover:bg-blue-700 text-white",children:r||v?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin"})," Creating..."]}):"Create Telegram Bot Platform"})]})]})})})},tge=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=nu(),{user:s}=aa(),{hasPermission:o,hasRole:l}=Or(),{aiAgents:c,loading:u}=Hb(),{agents:d,loading:h}=ql(),[f,m]=p.useState({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[g,v]=p.useState(!1),[x,y]=p.useState(null),w=o("channels.create"),b=l("super_agent");p.useEffect(()=>{e&&b&&s!=null&&s.id&&(y(s.id),m(O=>({...O,selectedAIAgent:"",selectedHumanAgents:[]})))},[e,b,s==null?void 0:s.id]);const _=p.useMemo(()=>x&&d.find(O=>O.primaryRole==="super_agent"&&O.user_id===x)||null,[x,d]),k=!!(f.displayName&&x&&f.selectedAIAgent&&w),j=async()=>{try{if(g)return;if(!w){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"});return}if(!x||!f.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"});return}v(!0);const O={...f,platformType:"web",selectedSuperAgentId:x};await n(O);try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}m({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),y(null),t()}catch(O){console.error("Error submitting form:",O)}finally{v(!1)}},N=()=>{g||(m({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),y(null),t())};return i.jsx(gn,{open:e,onOpenChange:t,children:i.jsx(ln,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(cn,{children:[i.jsx(un,{children:"Setup Web Live Chat Platform"}),i.jsx(Ur,{children:"Configure your new web live chat platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"description",children:"Description"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(Fr,{id:"description",placeholder:"Describe your business and what you offer",value:f.description,onChange:O=>m(I=>({...I,description:O.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di widget live chat"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:f.profilePhoto?i.jsx("img",{src:URL.createObjectURL(f.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx($c,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(ot,{id:"profilePhoto",type:"file",accept:"image/*",onChange:O=>{var P;const I=((P=O.target.files)==null?void 0:P[0])||null;m(S=>({...S,profilePhoto:I}))},className:"hidden"}),i.jsxs(ne,{variant:"outline",onClick:()=>{var O;return(O=document.getElementById("profilePhoto"))==null?void 0:O.click()},children:[i.jsx($c,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"displayName",children:"Display Name *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama yang akan ditampilkan di widget live chat"})})]})]}),i.jsx(ot,{id:"displayName",placeholder:"Name that will appear in the chat widget",value:f.displayName,onChange:O=>m(I=>({...I,displayName:O.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{children:"Super Agent *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform Live Chat ini"})})]})]}),h?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(Qt,{value:x||"",onValueChange:O=>{y(O),m(I=>({...I,selectedAIAgent:"",selectedHumanAgents:[]}))},disabled:b,children:[i.jsx(Yt,{children:i.jsx(Kt,{placeholder:"Choose a Super Agent"})}),i.jsx(Xt,{className:"bg-background border z-50",children:d.filter(O=>O.primaryRole==="super_agent").map(O=>i.jsx(st,{value:O.user_id,children:O.display_name||O.email||O.user_id.slice(0,8)},O.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform Live Chat ini"})})]})]}),u?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Qt,{value:f.selectedAIAgent,onValueChange:O=>{const I=c.find(P=>P.id===O);if(!x){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!I||I.super_agent_id!==x){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}m(P=>({...P,selectedAIAgent:O,selectedHumanAgents:[]}))},children:[i.jsx(Yt,{children:i.jsx(Kt,{placeholder:x?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(Xt,{className:"bg-background border z-50",children:c.filter(O=>x?O.super_agent_id===x:!1).map(O=>i.jsx(st,{value:O.id,children:O.name},O.id))})]}),x&&i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-md bg-muted px-3 py-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:"Super Agent:"}),i.jsx("span",{className:"font-medium",children:(_==null?void 0:_.display_name)||(_==null?void 0:_.email)||x.slice(0,8)})]})]}),f.selectedAIAgent&&!x&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{children:"Assign Agents"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),h?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-xs font-medium",children:["Agents ",x?"":"(select an AI agent first)"]}),(()=>{const I=d.filter(P=>P.primaryRole==="agent").filter(P=>!!x&&P.super_agent_id===x).map(P=>({value:P.user_id,label:P.display_name||P.email||`Agent ${P.user_id.slice(0,8)}`}));return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kb,{options:I,value:f.selectedHumanAgents,onValueChange:P=>m(S=>({...S,selectedHumanAgents:P})),disabled:!x,placeholder:x?"Select human agents":"Select an AI agent first"}),i.jsx(ne,{type:"button",variant:"outline",disabled:!x||I.length===0,onClick:()=>m(P=>({...P,selectedHumanAgents:I.map(S=>S.value)})),children:"Select All"}),i.jsx(ne,{type:"button",variant:"ghost",disabled:!x||f.selectedHumanAgents.length===0,onClick:()=>m(P=>({...P,selectedHumanAgents:[]})),children:"Unselect All"})]})})})()]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(ne,{variant:"outline",onClick:N,disabled:r||g,children:"Cancel"}),i.jsx(ne,{onClick:j,disabled:r||g||!k,children:r||g?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin"})," Creating..."]}):"Create Web Live Chat Platform"})]})]})})})},Zt=p.forwardRef(({permission:e,permissions:t=[],requireAll:n=!1,fallback:r=null,children:a,roleBypass:s=[]},o)=>{const{hasAnyPermission:l,hasAllPermissions:c,hasAnyRole:u,loading:d}=Or();if(d)return null;const h=e?[e,...t]:t,f=s.length>0?u(s):!1,m=h.length===0?!0:n?c(h):l(h),g=f||m,v=!Array.isArray(a)&&typeof a!="string"&&typeof a!="number";return g?v?i.jsx(dN,{ref:o,children:a}):i.jsx(i.Fragment,{children:a}):i.jsx(i.Fragment,{children:r})}),pn={MASTER_AGENT:"master_agent",SUPER_AGENT:"super_agent",AGENT:"agent"},nge=()=>{var Ie;const{toast:e}=nu(),{platforms:t,loading:n,error:r,createPlatform:a,fetchPlatforms:s,updatePlatform:o,uploadChannelAvatar:l,deleteChannelAvatar:c}=Lz(),{aiAgents:u,loading:d}=Hb(),{agents:h,loading:f}=ql(),{fetchByOrgId:m,channelsByOrg:g}=Jpe(),{hasRole:v}=Or(),[x,y]=p.useState(null),[w,b]=p.useState("whatsapp"),[_,k]=p.useState(""),[j,N]=p.useState(!1),[O,I]=p.useState(null),[P,S]=p.useState(!1),[D,L]=p.useState(!1),[U,F]=p.useState([]),[M,T]=p.useState(!1),[E,$]=p.useState(!1),A=p.useRef(null),[B,R]=p.useState([]),[C,W]=p.useState(!1),[Q,X]=p.useState(null),[Z,te]=p.useState(new Set),[J,ie]=p.useState(new Set),[ge,ae]=p.useState(null),[Re,me]=p.useState(null),[K,de]=p.useState(null),[$e,nt]=p.useState(!1),[Ye,ft]=p.useState(null),Ze=p.useRef(null),[ut,ee]=p.useState(!1),qe=p.useRef(null),dt=p.useRef(!1),se=p.useRef(0);p.useEffect(()=>{t.length>0&&!x&&y(t[0].id)},[t,x]),p.useEffect(()=>{u.length>0&&!_&&k(u[0].id)},[u,_]);const ve=Y=>{const le=Y==null?void 0:Y.provider;return le==="whatsapp"?"whatsapp":le==="telegram"?"telegram":"web"};p.useEffect(()=>{const Y=t.find(le=>ve(le)===w);(!x||x&&t.find(le=>le.id===x&&ve(le)!==w))&&y((Y==null?void 0:Y.id)||null)},[t,w]);const oe=t.find(Y=>Y.id===x);p.useEffect(()=>{k(oe&&(oe==null?void 0:oe.ai_profile_id)||"")},[oe==null?void 0:oe.id,oe==null?void 0:oe.ai_profile_id]),p.useEffect(()=>{const Y=Array.from(new Set(t.map(le=>le.org_id)));Y.length!==0&&Promise.resolve().then(()=>{Y.forEach(le=>{m(le)})})},[t]),p.useEffect(()=>{const Y=()=>{s()};return window.addEventListener("refresh-platforms",Y),()=>window.removeEventListener("refresh-platforms",Y)},[s]);const Xe=oe?ve(oe):null,ke=(oe==null?void 0:oe.human_agents)||[],rt=(oe==null?void 0:oe.super_agent_id)??null,bt=v("master_agent")||v("super_agent"),Se=h.filter(Y=>{const le=rt?Y.super_agent_id===rt:!0;return Y.primaryRole==="agent"&&le&&!ke.some(Fe=>Fe.user_id===Y.user_id)}).map(Y=>({value:Y.user_id,label:Y.display_name||Y.email||Y.user_id.slice(0,8)})),we=rt?u.filter(Y=>Y.super_agent_id===rt||Y.id===(oe==null?void 0:oe.ai_profile_id)):u,Te=async Y=>{if(!oe||!bt){F([]);return}if(Y.length===0){F([]);return}F(Y);try{L(!0);const le=ke.map(Je=>Je.user_id),Fe=Array.from(new Set([...le,...Y]));await o(oe.id,{human_agent_ids:Fe})}catch(le){e({title:"Failed to add agent",description:(le==null?void 0:le.message)||"Please try again",variant:"destructive"})}finally{L(!1),F([])}},je=Y=>i.jsxs(i.Fragment,{children:[i.jsxs(We,{children:[i.jsx(mt,{children:i.jsxs(ht,{className:"text-base flex items-center gap-2",children:["Super Agent",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform ini (hanya master agent yang dapat mengatur)"})})]})]})}),i.jsx(ct,{children:(()=>{const le=(oe==null?void 0:oe.super_agent_id)||null,Je=(h||[]).find(it=>it.user_id===le&&it.primaryRole==="super_agent")||null;return i.jsxs("div",{className:"text-sm space-y-2",children:[Je?i.jsxs("div",{className:"inline-flex items-center gap-2 bg-muted px-3 py-1 rounded-md",children:[" ",Je.display_name||Je.email||Je.user_id.slice(0,8)]}):i.jsx("span",{className:"text-muted-foreground",children:"No super agent assigned. Select an AI agent to link a super agent."}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Super agent assignment follows the selected AI agent. To change ownership, switch the AI agent for this platform."})]})})()})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsxs(ht,{className:"text-base flex items-center gap-2",children:["AI Agent",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform ini"})})]})]})}),i.jsx(ct,{children:d?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Qt,{value:_||"",onValueChange:async le=>{oe&&(await o(oe.id,{ai_profile_id:le||void 0}),k(le))},children:[i.jsx(Yt,{children:i.jsx(Kt,{placeholder:"Choose an AI agent"})}),i.jsx(Xt,{children:we.map(le=>i.jsxs(st,{value:le.id,children:[" ",le.name]},le.id))})]})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsxs(ht,{className:"text-base flex items-center gap-2",children:["Human Agent",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]})}),i.jsxs(ct,{children:[f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):ke.length>0?i.jsx("div",{className:"flex flex-wrap gap-2",children:ke.map(le=>i.jsxs("div",{className:"flex items-center gap-2 bg-muted px-3 py-1 rounded-md",children:[i.jsxs("span",{className:"text-sm",children:[" ",le.display_name||le.email||le.user_id]}),bt&&i.jsx(ne,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",disabled:D||!oe,onClick:async()=>{if(oe)try{L(!0);const Fe=ke.filter(Je=>Je.user_id!==le.user_id).map(Je=>Je.user_id);await o(oe.id,{human_agent_ids:Fe})}finally{L(!1)}},children:i.jsx(Gx,{className:"h-3 w-3"})})]},le.user_id))}):i.jsx("p",{className:"text-sm text-muted-foreground",children:"No agents connected"}),bt&&oe&&i.jsx("div",{className:"mt-3 flex items-center gap-2",children:i.jsx(Zt,{permission:"channel_agents.update",roleBypass:[pn.SUPER_AGENT],children:i.jsx(Kb,{options:Se,value:U,onChange:Te,placeholder:"Select human agents to add",disabled:D})})})]})]}),Y&&i.jsxs(i.Fragment,{children:[i.jsxs(We,{children:[i.jsx(mt,{children:i.jsxs(ht,{className:"text-base flex items-center gap-2",children:["Link LiveChat",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"URL untuk live chat widget yang dapat diembed di website"})})]})]})}),i.jsx(ct,{children:i.jsx("div",{className:"bg-muted p-3 rounded-md",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ot,{value:hO(String((oe==null?void 0:oe.id)||"{platform_id}")),readOnly:!0,className:"bg-background flex-1"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"outline",size:"icon",className:"h-9 w-9 shrink-0",onClick:async()=>{const le=hO(String((oe==null?void 0:oe.id)||"{platform_id}"));try{await navigator.clipboard.writeText(le),e({title:"Copied!",description:"Live chat URL copied to clipboard"})}catch{e({title:"Failed to copy",description:"Please try again",variant:"destructive"})}},children:i.jsx(Of,{className:"h-4 w-4"})})}),i.jsx(ye,{children:i.jsx("p",{children:"Copy URL"})})]})]})})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsxs(ht,{className:"text-base flex items-center gap-2",children:["Embed Code",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Kode embed untuk menambahkan widget live chat ke website"})})]})]})}),i.jsx(ct,{children:i.jsxs("div",{className:"relative",children:[i.jsx(Fr,{value:`<script>
(function(){
  // Lightweight chat embed - uses YOUR project's origin
  var w=window,d=document; if(w.chatWidgetLoaded) return; w.chatWidgetLoaded=true;
  var cfg=w.chatConfig||{}; cfg.baseUrl=cfg.baseUrl||'${H1}'; cfg.platformId=cfg.platformId||'${(oe==null?void 0:oe.id)||"{platform_id}"}';
  cfg.position=cfg.position||'bottom-right'; cfg.width=cfg.width||'360px'; cfg.height=cfg.height||'560px';
  var css='#chat-bubble{position:fixed;right:20px;bottom:20px;z-index:999999;background:#1d4ed8;color:#fff;border-radius:9999px;width:56px;height:56px;box-shadow:0 8px 20px rgba(0,0,0,.2);border:0;cursor:pointer;font-size:24px;line-height:56px;text-align:center}'+
           '#chat-panel{position:fixed;right:20px;bottom:92px;width:'+cfg.width+';height:'+cfg.height+';max-width:calc(100% - 40px);max-height:70vh;z-index:999999;box-shadow:0 10px 30px rgba(0,0,0,.25);border-radius:12px;overflow:hidden;opacity:0;transform:translateY(10px);pointer-events:none;transition:opacity .2s ease,transform .2s ease;background:#fff}'+
           '#chat-panel.open{opacity:1;transform:translateY(0);pointer-events:auto}';
  var s=d.createElement('style'); s.type='text/css'; s.appendChild(d.createTextNode(css)); d.head.appendChild(s);
  var bubble=d.createElement('button'); bubble.id='chat-bubble'; bubble.setAttribute('aria-label','Open chat'); bubble.innerHTML='';
  var panel=d.createElement('div'); panel.id='chat-panel';
  var iframe=d.createElement('iframe'); iframe.src=cfg.baseUrl+'/livechat/'+encodeURIComponent(cfg.platformId); iframe.style.width='100%'; iframe.style.height='100%'; iframe.style.border='0'; panel.appendChild(iframe);
  bubble.addEventListener('click',function(){ panel.classList.toggle('open'); });
  d.body.appendChild(bubble); d.body.appendChild(panel);
})();
<\/script>`,readOnly:!0,className:"font-mono text-xs h-48 bg-muted pr-12"}),i.jsx("div",{className:"absolute top-2 right-2",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:async()=>{const le=`<script>
(function(){
  // Lightweight chat embed - uses YOUR project's origin
  var w=window,d=document; if(w.chatWidgetLoaded) return; w.chatWidgetLoaded=true;
  var cfg=w.chatConfig||{}; cfg.baseUrl=cfg.baseUrl||'${H1}'; cfg.platformId=cfg.platformId||'${(oe==null?void 0:oe.id)||"{platform_id}"}';
  cfg.position=cfg.position||'bottom-right'; cfg.width=cfg.width||'360px'; cfg.height=cfg.height||'560px';
  var css='#chat-bubble{position:fixed;right:20px;bottom:20px;z-index:999999;background:#1d4ed8;color:#fff;border-radius:9999px;width:56px;height:56px;box-shadow:0 8px 20px rgba(0,0,0,.2);border:0;cursor:pointer;font-size:24px;line-height:56px;text-align:center}'+
           '#chat-panel{position:fixed;right:20px;bottom:92px;width:'+cfg.width+';height:'+cfg.height+';max-width:calc(100% - 40px);max-height:70vh;z-index:999999;box-shadow:0 10px 30px rgba(0,0,0,.25);border-radius:12px;overflow:hidden;opacity:0;transform:translateY(10px);pointer-events:none;transition:opacity .2s ease,transform .2s ease;background:#fff}'+
           '#chat-panel.open{opacity:1;transform:translateY(0);pointer-events:auto}';
  var s=d.createElement('style'); s.type='text/css'; s.appendChild(d.createTextNode(css)); d.head.appendChild(s);
  var bubble=d.createElement('button'); bubble.id='chat-bubble'; bubble.setAttribute('aria-label','Open chat'); bubble.innerHTML='';
  var panel=d.createElement('div'); panel.id='chat-panel';
  var iframe=d.createElement('iframe'); iframe.src=cfg.baseUrl+'/livechat/'+encodeURIComponent(cfg.platformId); iframe.style.width='100%'; iframe.style.height='100%'; iframe.style.border='0'; panel.appendChild(iframe);
  bubble.addEventListener('click',function(){ panel.classList.toggle('open'); });
  d.body.appendChild(bubble); d.body.appendChild(panel);
})();
<\/script>`;try{await navigator.clipboard.writeText(le),e({title:"Copied!",description:"Embed code copied to clipboard"})}catch{e({title:"Failed to copy",description:"Please try again",variant:"destructive"})}},children:i.jsx(Of,{className:"h-4 w-4"})})}),i.jsx(ye,{children:i.jsx("p",{children:"Copy embed code"})})]})})]})})]})]})]}),Ee=Y=>{I(Y),N(!1)},Ue=async Y=>{try{S(!0);const le={display_name:Y.displayName||Y.platformName||Y.brandName,website_url:Y.websiteUrl||void 0,business_category:Y.businessCategory||void 0,description:Y.description||void 0,ai_profile_id:Y.selectedAIAgent||void 0,provider:O||"web",human_agent_ids:Y.selectedHumanAgents},Fe=await a(le);if(Fe&&Y.profilePhoto)try{await l(Fe.id,Y.profilePhoto,Fe.org_id)}catch(Je){e({title:"Avatar upload failed",description:(Je==null?void 0:Je.message)||"Could not upload avatar",variant:"destructive"})}e({title:"Success",description:"Platform created successfully!"}),I(null)}catch(le){e({title:"Error",description:le.message||"Failed to create platform",variant:"destructive"})}finally{S(!1)}},H=p.useRef([]),q=async()=>{if(!dt.current){dt.current=!0,W(!0),X(null);try{const Y=`${Ov}/api/sessions`,le=await fetch(Y,{method:"GET",headers:{"Content-Type":"application/json","x-api-key":"asd"}});if(!le.ok)throw new Error(`Request failed with status ${le.status}`);const Fe=await le.json(),Je=Array.isArray(Fe)?Fe:[Fe];R(Je),H.current=Je,await re(Je),Date.now()>=se.current&&(se.current=Date.now()+2e3,await s())}catch(Y){X((Y==null?void 0:Y.message)||"Failed to load sessions")}finally{W(!1),dt.current=!1}}},re=async Y=>{var le,Fe,Je;try{const{data:it}=await ce.auth.getUser(),Pt=it==null?void 0:it.user;if(!Pt)return;const{data:Ot}=await ce.from("org_members").select("org_id").eq("user_id",Pt.id).limit(1),Lt=(le=Ot==null?void 0:Ot[0])==null?void 0:le.org_id;if(!Lt)return;const{data:yn}=await ce.from("channels").select("id, display_name, provider, external_id, credentials").eq("org_id",Lt).eq("provider","whatsapp");for(const jn of Y){const nr=(jn==null?void 0:jn.name)||"";if(!nr)continue;const Wn=String((jn==null?void 0:jn.status)||"").toUpperCase();let fn=((Fe=jn==null?void 0:jn.me)==null?void 0:Fe.id)||null;if(!fn&&Wn==="WORKING")try{const ar=`${Ov}/api/sessions/${encodeURIComponent(nr)}`,Mo=await fetch(ar,{method:"GET",headers:{"Content-Type":"application/json","x-api-key":"asd"}});if(Mo.ok){const lr=await Mo.json(),qa=Array.isArray(lr)?lr[0]:lr;fn=((Je=qa==null?void 0:qa.me)==null?void 0:Je.id)||fn}}catch{}const gt=Wn==="WORKING"&&!!fn,Nr=(nr||"").toLowerCase().replace(/\s/g,""),rr=(yn||[]).find(ar=>(ar.display_name||"").toLowerCase().replace(/\s/g,"")===Nr);if(!rr)continue;const qr=rr!=null&&rr.credentials&&typeof rr.credentials=="object"?rr.credentials:{},wa=nr||Nr||null,ci=fn||(rr==null?void 0:rr.external_id)||(qr==null?void 0:qr.waha_session_name)||wa;await ce.from("channels").update({is_active:gt,external_id:ci,credentials:{...qr,waha_status:(jn==null?void 0:jn.status)||null,me_id:fn,waha_session_name:(qr==null?void 0:qr.waha_session_name)||wa}}).eq("id",rr.id)}}catch(it){console.error("Failed to sync sessions to channels",it)}};p.useEffect(()=>{Xe==="whatsapp"&&qe.current!=="whatsapp"&&(qe.current="whatsapp",q()),Xe!=="whatsapp"&&(qe.current=Xe||null)},[Xe]),p.useEffect(()=>{const Y=le=>{const Fe=(le==null?void 0:le.detail)||{};me(Fe.qr||null),Fe.sessionName&&ft(Fe.sessionName),nt(!0)};return window.addEventListener("open-wa-qr",Y),()=>window.removeEventListener("open-wa-qr",Y)},[]),p.useEffect(()=>((()=>{if(!Ye||!$e)return;const le=async()=>{var Fe;try{if(!Ye)return;const Je=`${Ov}/api/sessions/${encodeURIComponent(Ye)}`,it=await fetch(Je,{method:"GET",headers:{"Content-Type":"application/json","x-api-key":"asd"}});if(!it.ok)return;const Pt=await it.json(),Ot=String((Pt==null?void 0:Pt.status)||"").toUpperCase();if(!!((Fe=Pt==null?void 0:Pt.me)!=null&&Fe.id)&&Ot==="WORKING"){nt(!1),me(null),await q();try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}e({title:"Connected",description:"WhatsApp connected successfully."})}}catch{}};le(),Ze.current=window.setInterval(le,3e3)})(),()=>{Ze.current&&(clearInterval(Ze.current),Ze.current=null)}),[$e,Ye]);const he=async Y=>{ae(Y),de(null),me(null),nt(!0),ft(Y);try{const le=await ji(Sn.ENDPOINTS.WHATSAPP.GET_LOGIN_QR,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:Y})});if(!le.ok)throw new Error(`QR request failed: ${le.status}`);const Fe=le.headers.get("content-type");if(Fe&&Fe.includes("image/")){const Je=await le.blob();me(URL.createObjectURL(Je))}else try{const Je=await le.json(),it=Array.isArray(Je)?Je[0]:Je;if(!(it!=null&&it.data)||!(it!=null&&it.mimetype))throw new Error("Invalid QR");me(`data:${it.mimetype};base64,${it.data}`)}catch{const Je=await le.text();Je&&me(`data:image/png;base64,${Je}`)}}catch(le){de((le==null?void 0:le.message)||"Failed to get QR")}finally{ae(null)}},Me=async Y=>{if(!Y)throw new Error("Missing channel");const le=ve(Y);if(le==="telegram"){const Je=await ji(Sn.ENDPOINTS.TELEGRAM.DELETE_WEBHOOK,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_id:Y.id,org_id:Y.org_id,bot_token:(Y==null?void 0:Y.external_id)||null})});if(!Je.ok){const it=await Je.text().catch(()=>"");throw new Error(it||`Telegram delete failed (${Je.status})`)}return}if(le==="whatsapp"){const Je=String((Y==null?void 0:Y.display_name)||"").replace(/\s/g,""),it=await ji(Sn.ENDPOINTS.WHATSAPP.DELETE_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_id:Y.id,org_id:Y.org_id,session_name:Je})});if(!it.ok){const Pt=await it.text().catch(()=>"");throw new Error(Pt||`WhatsApp delete failed (${it.status})`)}return}const{error:Fe}=await ce.from("channels").delete().eq("id",Y.id);if(Fe)throw Fe},et=async Y=>{var le,Fe,Je;if(Y){te(it=>new Set(it).add(Y));try{const it=await ji(Sn.ENDPOINTS.WHATSAPP.LOGOUT_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:Y})});if(!it.ok)throw new Error(`Logout failed ${it.status}`);const Pt=await ji(Sn.ENDPOINTS.WHATSAPP.DISCONNECT_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:Y})});if(!Pt.ok)throw new Error(`Disconnect failed ${Pt.status}`);const Ot=Date.now();for(;Date.now()-Ot<2e4;){await q();const Lt=((Fe=(le=H.current)==null?void 0:le.find)==null?void 0:Fe.call(le,Wn=>((Wn==null?void 0:Wn.name)||"")===Y))||null,yn=String((Lt==null?void 0:Lt.status)||"").toUpperCase(),jn=!!((Je=Lt==null?void 0:Lt.me)!=null&&Je.id);if(!(yn==="WORKING"&&jn))break;await new Promise(Wn=>setTimeout(Wn,2e3))}e({title:"Disconnected",description:`Session ${Y} disconnected`})}catch(it){X((it==null?void 0:it.message)||"Failed to disconnect session")}finally{te(it=>{const Pt=new Set(it);return Pt.delete(Y),Pt})}}};return i.jsxs("div",{className:"flex h-[calc(100vh-120px)]",children:[i.jsx("div",{className:"w-80 border-r border-border bg-card",children:i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h2",{className:"text-lg font-semibold",children:"Platforms"})}),i.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"This is where you can connect all your platforms"}),i.jsx(Uc,{value:w,onValueChange:Y=>b(Y),className:"mb-3",children:i.jsxs(Tl,{className:"grid w-full grid-cols-3 bg-muted/50 p-1",children:[i.jsx(wr,{value:"whatsapp",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"WhatsApp"})}),i.jsx(ye,{children:i.jsx("p",{children:"Kelola koneksi WhatsApp Business"})})]})}),i.jsx(wr,{value:"telegram",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"Telegram"})}),i.jsx(ye,{children:i.jsx("p",{children:"Kelola koneksi Bot Telegram"})})]})}),i.jsx(wr,{value:"web",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"Live Chat"})}),i.jsx(ye,{children:i.jsx("p",{children:"Kelola koneksi widget Live Chat"})})]})})]})}),n?i.jsx("div",{className:"space-y-2",children:[1,2,3].map(Y=>i.jsx(We,{className:"animate-pulse",children:i.jsx(ct,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]})})},Y))}):r?i.jsx("div",{className:"text-sm text-red-600 p-4",children:r}):i.jsx("div",{className:"space-y-2",children:t.filter(Y=>ve(Y)===w).length===0?i.jsx("div",{className:"text-sm text-muted-foreground p-4 text-center",children:"No platforms found. Create your first platform to get started."}):t.filter(Y=>ve(Y)===w).map(Y=>i.jsx(We,{className:`cursor-pointer transition-colors hover:bg-muted/50 ${x===Y.id?"border-primary shadow-sm":""}`,onClick:()=>y(Y.id),children:i.jsx(ct,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted flex items-center justify-center",children:Y.profile_photo_url?i.jsx("img",{src:Y.profile_photo_url,alt:Y.display_name||"Platform",className:"h-10 w-10 rounded-full object-cover"}):i.jsx("span",{className:"text-xs font-medium text-foreground/70",children:(Y.display_name||"").charAt(0)||"?"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-medium text-sm truncate",children:Y.display_name||"Unnamed Platform"}),i.jsx("p",{className:"text-[11px] text-muted-foreground capitalize",children:ve(Y)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Y.description||Y.website_url||""})]}),i.jsx("div",{className:`h-2.5 w-2.5 rounded-full ${Y.status==="active"?"bg-green-500":"bg-gray-300"}`,"aria-label":Y.status==="active"?"Active":"Inactive",title:Y.status==="active"?"Active":"Inactive"})]})})},Y.id))}),i.jsxs(gn,{open:j,onOpenChange:N,children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(oC,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:"w-full mt-4",children:[i.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Add Channel"]})})}),i.jsx(ye,{children:i.jsx("p",{children:"Tambahkan saluran atau platform baru"})})]}),i.jsxs(ln,{className:"sm:max-w-xl p-0 overflow-hidden",children:[i.jsxs(cn,{className:"p-6 pb-4",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx(un,{className:"text-lg font-semibold",children:"Platform"})}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Select the platform you wish to establish your new inbox."})]}),i.jsxs("div",{className:"px-6 pb-6",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsxs("button",{onClick:()=>Ee("whatsapp"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(kv,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"WhatsApp"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Connect your WhatsApp Business account"})]}),i.jsxs("button",{onClick:()=>Ee("web"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(MT,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"Web Live Chat"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Add live chat to your website"})]}),i.jsxs("button",{onClick:()=>Ee("telegram"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-400 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(om,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"Telegram Bot"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Connect your Telegram bot via BotFather"})]})]}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-xs text-muted-foreground",children:"More platforms coming soon"})})]})]})]}),i.jsx(Zpe,{isOpen:O==="whatsapp",onClose:()=>I(null),onSubmit:Ue,isSubmitting:P}),i.jsx(ege,{isOpen:O==="telegram",onClose:()=>I(null),onSubmit:Ue,isSubmitting:P}),i.jsx(tge,{isOpen:O==="web",onClose:()=>I(null),onSubmit:Ue,isSubmitting:P}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Add a new platform inbox"})]})}),i.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:i.jsxs("div",{className:"max-w-4xl",children:[i.jsx("div",{className:"flex items-center justify-between mb-6",children:i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:oe!=null&&oe.display_name?oe.display_name.toUpperCase():"Select Platform"}),i.jsx("p",{className:"text-muted-foreground",children:oe?oe.description||oe.website_url||"":"Choose a platform to manage"})]})}),i.jsxs("div",{className:"grid gap-6",children:[oe?oe&&i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{className:"text-base",children:"Channel Details"})}),i.jsxs(ct,{className:"space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Provider",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Jenis platform komunikasi yang digunakan (WhatsApp, Telegram, Live Chat)"})})]})]}),i.jsx("div",{className:"capitalize",children:ve(oe)})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Status",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Status koneksi platform saat ini (Aktif atau Tidak Aktif)"})})]})]}),i.jsx("div",{children:oe.status==="active"?"Active":"Inactive"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Display Name",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Nama yang ditampilkan untuk platform ini"})})]})]}),i.jsx("div",{children:oe.display_name||""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["AI Agent",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Agen AI yang ditugaskan untuk menangani percakapan di platform ini"})})]})]}),i.jsx("div",{children:((Ie=u.find(Y=>Y.id===(oe==null?void 0:oe.ai_profile_id)))==null?void 0:Ie.name)||""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Created At",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Tanggal dan waktu platform ini dibuat"})})]})]}),i.jsx("div",{children:oe.created_at?new Date(oe.created_at).toLocaleString():""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Secret Token",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Token rahasia untuk autentikasi dan keamanan platform"})})]})]}),i.jsx("div",{children:(()=>{const Y=oe==null?void 0:oe.secret_token;return Y?Y.length>8?`${Y.slice(0,4)}${Y.slice(-2)}`:"":""})()})]})]}),i.jsxs("div",{className:"rounded-lg border p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-3",children:["Channel Profile",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Kelola foto profil atau logo untuk platform ini"})})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-12 w-12 rounded-full bg-muted flex items-center justify-center overflow-hidden",children:oe!=null&&oe.profile_photo_url?i.jsx("img",{src:(oe==null?void 0:oe.profile_photo_url)||"",alt:"Avatar",className:"h-12 w-12 object-cover"}):i.jsx("span",{className:"text-xs text-foreground/70",children:((oe==null?void 0:oe.display_name)||"?").charAt(0)})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{var Y;return(Y=A.current)==null?void 0:Y.click()},disabled:!oe||M||E,children:M?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin"})," Uploading..."]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx($c,{className:"h-4 w-4"})," Upload Avatar"]})})}),i.jsx(ye,{children:i.jsx("p",{children:"Unggah foto profil atau logo untuk platform ini"})})]}),i.jsx("input",{ref:A,type:"file",accept:"image/png,image/jpeg,image/webp",className:"hidden",onChange:async Y=>{var Fe;const le=(Fe=Y.currentTarget.files)==null?void 0:Fe[0];if(!(!le||!oe))try{T(!0),await l(oe.id,le,oe.org_id),e({title:"Avatar updated"}),await s()}catch(Je){e({title:"Avatar upload failed",description:(Je==null?void 0:Je.message)||"Please try again",variant:"destructive"})}finally{T(!1);try{Y.currentTarget.value=""}catch{}}}}),!!(oe!=null&&oe.logo_url||oe!=null&&oe.profile_photo_url)&&i.jsx(ne,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",disabled:!oe||M||E,onClick:async()=>{if(oe)try{$(!0),await c(oe.id,oe.org_id),await s(),e({title:"Avatar removed"})}catch(Y){e({title:"Failed to remove avatar",description:(Y==null?void 0:Y.message)||"Please try again",variant:"destructive"})}finally{$(!1)}},children:E?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin"})," Removing..."]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(fa,{className:"h-4 w-4"})," Remove"]})})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-2 text-xs text-muted-foreground",children:["Accepted: PNG, JPG, WEBP  Max 5 MB",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Format file yang didukung: PNG, JPG, WEBP dengan ukuran maksimal 5 MB"})})]})]})]})]})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:i.jsx(kv,{className:"w-8 h-8 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Platform Selected"}),i.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:"Select a platform from the left panel to view its details, manage settings, and configure agents."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 w-full max-w-2xl",children:[i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(kv,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"WhatsApp"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect your WhatsApp business account"})]}),i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(om,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"Telegram"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Set up a Telegram bot for customer support"})]}),i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(MT,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"Live Chat"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Embed chat widget on your website"})]})]})]}),Xe==="web"&&i.jsx("div",{className:"grid gap-6",children:je(!0)}),Xe==="whatsapp"&&i.jsxs("div",{className:"grid gap-6",children:[je(!1),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{className:"text-base",children:"WhatsApp Sessions"})}),i.jsxs(ct,{children:[C&&i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading sessions..."}),Q&&i.jsx("div",{className:"text-sm text-red-600",children:Q}),!C&&!Q&&i.jsx("div",{className:"space-y-3",children:(()=>{const Y=((oe==null?void 0:oe.display_name)||"").toLowerCase().replace(/\s/g,""),le=B.filter(Fe=>((Fe==null?void 0:Fe.name)||"").toLowerCase().replace(/\s/g,"")===Y);if(le.length===0){const Fe=((oe==null?void 0:oe.display_name)||"").replace(/\s/g,"");return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"No session found for this channel."}),i.jsx(ne,{variant:"outline",className:"text-blue-600 border-blue-200 hover:bg-blue-50",size:"sm",disabled:!!ge,onClick:()=>he(Fe),children:ge===Fe?i.jsx(Ht,{className:"h-3 w-3 animate-spin"}):"Connect"})]})}return le.map((Fe,Je)=>{var gt,Nr;const it=((gt=Fe==null?void 0:Fe.me)==null?void 0:gt.id)||"",Pt=it?it.replace(/@c\.us$/,""):"",Ot=((Nr=Fe==null?void 0:Fe.me)==null?void 0:Nr.pushName)||"-",Lt=String((Fe==null?void 0:Fe.status)||"UNKNOWN").toUpperCase(),yn=(Fe==null?void 0:Fe.name)||"",jn=Z.has(yn)||J.has(yn)||ge===yn,nr=!!Pt,Wn=Lt==="SCAN_QR_CODE",fn=Lt==="WORKING"&&nr;return i.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:Ot}),i.jsx("div",{className:"text-xs text-muted-foreground",children:Wn||!nr?"Not connected":Pt})]}),i.jsx("div",{className:"flex items-center gap-2",children:fn?i.jsx(ne,{variant:"outline",size:"sm",className:"text-amber-700 border-amber-200 hover:bg-amber-50",disabled:jn,onClick:()=>et(yn),children:Z.has(yn)?i.jsx(Ht,{className:"h-3 w-3 animate-spin"}):"Disconnect"}):i.jsx(ne,{variant:"outline",className:"text-blue-600 border-blue-200 hover:bg-blue-50",size:"sm",disabled:jn,onClick:()=>he(yn),children:ge===yn?i.jsx(Ht,{className:"h-3 w-3 animate-spin"}):"Connect"})})]},Je)})})()})]})]}),i.jsx(gn,{open:$e,onOpenChange:nt,children:i.jsxs(ln,{className:"sm:max-w-md",children:[i.jsxs(cn,{children:[i.jsx(un,{children:"Connect WhatsApp"}),i.jsx(Ur,{children:"Scan this QR with your WhatsApp app to connect."})]}),K&&i.jsx("div",{className:"text-sm text-red-600",children:K}),Re?i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[i.jsx("img",{src:Re,alt:"QR",className:"w-56 h-56 rounded border"}),i.jsx(ne,{variant:"outline",onClick:()=>he(Ye||((oe==null?void 0:oe.display_name)||"").replace(/\s/g,"")),disabled:!!ge,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:ge?i.jsx(Ht,{className:"h-4 w-4 animate-spin"}):"Refresh QR"})]}):i.jsx("div",{className:"flex items-center justify-center h-60",children:i.jsx(Ht,{className:"h-6 w-6 animate-spin"})})]})})]}),Xe==="telegram"&&i.jsx("div",{className:"grid gap-6",children:je(!1)})]}),oe&&i.jsx("div",{className:"mt-8",children:i.jsxs(We,{className:"bg-red-50 border-2 border-red-200",children:[i.jsx(mt,{children:i.jsxs(ht,{className:"text-base text-red-700 flex items-center gap-2",children:["Danger Zone",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-red-600 cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Zona berbahaya untuk tindakan yang tidak dapat dibatalkan seperti menghapus platform"})})]})]})}),i.jsx(ct,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-red-700",children:"Delete this channel"}),i.jsx("div",{className:"text-xs text-red-600/80",children:"This action cannot be undone."})]}),i.jsxs(Rb,{children:[i.jsx(zle,{asChild:!0,children:i.jsx(ne,{className:"bg-red-600 hover:bg-red-700 text-white",disabled:ut,"aria-busy":ut,children:ut?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Deleting"})]}):"Delete Channel"})}),i.jsxs(Up,{children:[i.jsxs(Bp,{children:[i.jsx(Wp,{children:"Delete channel?"}),i.jsxs(qp,{children:["This will permanently delete ",(oe==null?void 0:oe.display_name)||"this channel",". This action cannot be undone."]})]}),i.jsxs(zp,{children:[i.jsx(Kp,{children:"Cancel"}),i.jsx(Hp,{className:`bg-red-600 hover:bg-red-700 text-white ${ut?"animate-pulse cursor-wait":""}`,"aria-busy":ut,disabled:ut,onClick:async()=>{if(!(!oe||ut))try{ee(!0),await Me(oe),e({title:"Deleted",description:"Channel has been deleted."}),y(null),await s()}catch(Y){e({title:"Error",description:(Y==null?void 0:Y.message)||"Failed to delete channel",variant:"destructive"})}finally{ee(!1)}},children:ut?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Deleting"})]}):"Delete"})]})]})]})]})})]})})]})})]})};var rge=Array.isArray,Wa=rge,age=typeof hr=="object"&&hr&&hr.Object===Object&&hr,Uz=age,ige=Uz,sge=typeof self=="object"&&self&&self.Object===Object&&self,oge=ige||sge||Function("return this")(),Ws=oge,lge=Ws,cge=lge.Symbol,Xp=cge,fO=Xp,Bz=Object.prototype,uge=Bz.hasOwnProperty,dge=Bz.toString,tf=fO?fO.toStringTag:void 0;function hge(e){var t=uge.call(e,tf),n=e[tf];try{e[tf]=void 0;var r=!0}catch{}var a=dge.call(e);return r&&(t?e[tf]=n:delete e[tf]),a}var fge=hge,mge=Object.prototype,pge=mge.toString;function gge(e){return pge.call(e)}var vge=gge,mO=Xp,yge=fge,xge=vge,bge="[object Null]",wge="[object Undefined]",pO=mO?mO.toStringTag:void 0;function jge(e){return e==null?e===void 0?wge:bge:pO&&pO in Object(e)?yge(e):xge(e)}var Oo=jge;function _ge(e){return e!=null&&typeof e=="object"}var Io=_ge,kge=Oo,Sge=Io,Nge="[object Symbol]";function Cge(e){return typeof e=="symbol"||Sge(e)&&kge(e)==Nge}var _h=Cge,Age=Wa,Ege=_h,Tge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Pge=/^\w*$/;function Oge(e,t){if(Age(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Ege(e)?!0:Pge.test(e)||!Tge.test(e)||t!=null&&e in Object(t)}var XC=Oge;function Ige(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Kl=Ige;const kh=vn(Kl);var Rge=Oo,Mge=Kl,Dge="[object AsyncFunction]",Lge="[object Function]",$ge="[object GeneratorFunction]",Fge="[object Proxy]";function Uge(e){if(!Mge(e))return!1;var t=Rge(e);return t==Lge||t==$ge||t==Dge||t==Fge}var JC=Uge;const zt=vn(JC);var Bge=Ws,zge=Bge["__core-js_shared__"],Wge=zge,wj=Wge,gO=function(){var e=/[^.]+$/.exec(wj&&wj.keys&&wj.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function qge(e){return!!gO&&gO in e}var Hge=qge,Kge=Function.prototype,Vge=Kge.toString;function Gge(e){if(e!=null){try{return Vge.call(e)}catch{}try{return e+""}catch{}}return""}var zz=Gge,Yge=JC,Xge=Hge,Jge=Kl,Qge=zz,Zge=/[\\^$.*+?()[\]{}|]/g,eve=/^\[object .+?Constructor\]$/,tve=Function.prototype,nve=Object.prototype,rve=tve.toString,ave=nve.hasOwnProperty,ive=RegExp("^"+rve.call(ave).replace(Zge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function sve(e){if(!Jge(e)||Xge(e))return!1;var t=Yge(e)?ive:eve;return t.test(Qge(e))}var ove=sve;function lve(e,t){return e==null?void 0:e[t]}var cve=lve,uve=ove,dve=cve;function hve(e,t){var n=dve(e,t);return uve(n)?n:void 0}var cu=hve,fve=cu,mve=fve(Object,"create"),Vb=mve,vO=Vb;function pve(){this.__data__=vO?vO(null):{},this.size=0}var gve=pve;function vve(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var yve=vve,xve=Vb,bve="__lodash_hash_undefined__",wve=Object.prototype,jve=wve.hasOwnProperty;function _ve(e){var t=this.__data__;if(xve){var n=t[e];return n===bve?void 0:n}return jve.call(t,e)?t[e]:void 0}var kve=_ve,Sve=Vb,Nve=Object.prototype,Cve=Nve.hasOwnProperty;function Ave(e){var t=this.__data__;return Sve?t[e]!==void 0:Cve.call(t,e)}var Eve=Ave,Tve=Vb,Pve="__lodash_hash_undefined__";function Ove(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Tve&&t===void 0?Pve:t,this}var Ive=Ove,Rve=gve,Mve=yve,Dve=kve,Lve=Eve,$ve=Ive;function Sh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Sh.prototype.clear=Rve;Sh.prototype.delete=Mve;Sh.prototype.get=Dve;Sh.prototype.has=Lve;Sh.prototype.set=$ve;var Fve=Sh;function Uve(){this.__data__=[],this.size=0}var Bve=Uve;function zve(e,t){return e===t||e!==e&&t!==t}var QC=zve,Wve=QC;function qve(e,t){for(var n=e.length;n--;)if(Wve(e[n][0],t))return n;return-1}var Gb=qve,Hve=Gb,Kve=Array.prototype,Vve=Kve.splice;function Gve(e){var t=this.__data__,n=Hve(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Vve.call(t,n,1),--this.size,!0}var Yve=Gve,Xve=Gb;function Jve(e){var t=this.__data__,n=Xve(t,e);return n<0?void 0:t[n][1]}var Qve=Jve,Zve=Gb;function eye(e){return Zve(this.__data__,e)>-1}var tye=eye,nye=Gb;function rye(e,t){var n=this.__data__,r=nye(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var aye=rye,iye=Bve,sye=Yve,oye=Qve,lye=tye,cye=aye;function Nh(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Nh.prototype.clear=iye;Nh.prototype.delete=sye;Nh.prototype.get=oye;Nh.prototype.has=lye;Nh.prototype.set=cye;var Yb=Nh,uye=cu,dye=Ws,hye=uye(dye,"Map"),ZC=hye,yO=Fve,fye=Yb,mye=ZC;function pye(){this.size=0,this.__data__={hash:new yO,map:new(mye||fye),string:new yO}}var gye=pye;function vye(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var yye=vye,xye=yye;function bye(e,t){var n=e.__data__;return xye(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Xb=bye,wye=Xb;function jye(e){var t=wye(this,e).delete(e);return this.size-=t?1:0,t}var _ye=jye,kye=Xb;function Sye(e){return kye(this,e).get(e)}var Nye=Sye,Cye=Xb;function Aye(e){return Cye(this,e).has(e)}var Eye=Aye,Tye=Xb;function Pye(e,t){var n=Tye(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Oye=Pye,Iye=gye,Rye=_ye,Mye=Nye,Dye=Eye,Lye=Oye;function Ch(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ch.prototype.clear=Iye;Ch.prototype.delete=Rye;Ch.prototype.get=Mye;Ch.prototype.has=Dye;Ch.prototype.set=Lye;var eA=Ch,Wz=eA,$ye="Expected a function";function tA(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError($ye);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var o=e.apply(this,r);return n.cache=s.set(a,o)||s,o};return n.cache=new(tA.Cache||Wz),n}tA.Cache=Wz;var qz=tA;const Fye=vn(qz);var Uye=qz,Bye=500;function zye(e){var t=Uye(e,function(r){return n.size===Bye&&n.clear(),r}),n=t.cache;return t}var Wye=zye,qye=Wye,Hye=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kye=/\\(\\)?/g,Vye=qye(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Hye,function(n,r,a,s){t.push(a?s.replace(Kye,"$1"):r||n)}),t}),Gye=Vye;function Yye(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var nA=Yye,xO=Xp,Xye=nA,Jye=Wa,Qye=_h,Zye=1/0,bO=xO?xO.prototype:void 0,wO=bO?bO.toString:void 0;function Hz(e){if(typeof e=="string")return e;if(Jye(e))return Xye(e,Hz)+"";if(Qye(e))return wO?wO.call(e):"";var t=e+"";return t=="0"&&1/e==-Zye?"-0":t}var exe=Hz,txe=exe;function nxe(e){return e==null?"":txe(e)}var Kz=nxe,rxe=Wa,axe=XC,ixe=Gye,sxe=Kz;function oxe(e,t){return rxe(e)?e:axe(e,t)?[e]:ixe(sxe(e))}var Vz=oxe,lxe=_h,cxe=1/0;function uxe(e){if(typeof e=="string"||lxe(e))return e;var t=e+"";return t=="0"&&1/e==-cxe?"-0":t}var Jb=uxe,dxe=Vz,hxe=Jb;function fxe(e,t){t=dxe(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[hxe(t[n++])];return n&&n==r?e:void 0}var rA=fxe,mxe=rA;function pxe(e,t,n){var r=e==null?void 0:mxe(e,t);return r===void 0?n:r}var Gz=pxe;const Ai=vn(Gz);function gxe(e){return e==null}var vxe=gxe;const hn=vn(vxe);var yxe=Oo,xxe=Wa,bxe=Io,wxe="[object String]";function jxe(e){return typeof e=="string"||!xxe(e)&&bxe(e)&&yxe(e)==wxe}var _xe=jxe;const Gc=vn(_xe);var Yz={exports:{}},wn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aA=Symbol.for("react.element"),iA=Symbol.for("react.portal"),Qb=Symbol.for("react.fragment"),Zb=Symbol.for("react.strict_mode"),e0=Symbol.for("react.profiler"),t0=Symbol.for("react.provider"),n0=Symbol.for("react.context"),kxe=Symbol.for("react.server_context"),r0=Symbol.for("react.forward_ref"),a0=Symbol.for("react.suspense"),i0=Symbol.for("react.suspense_list"),s0=Symbol.for("react.memo"),o0=Symbol.for("react.lazy"),Sxe=Symbol.for("react.offscreen"),Xz;Xz=Symbol.for("react.module.reference");function Ii(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case aA:switch(e=e.type,e){case Qb:case e0:case Zb:case a0:case i0:return e;default:switch(e=e&&e.$$typeof,e){case kxe:case n0:case r0:case o0:case s0:case t0:return e;default:return t}}case iA:return t}}}wn.ContextConsumer=n0;wn.ContextProvider=t0;wn.Element=aA;wn.ForwardRef=r0;wn.Fragment=Qb;wn.Lazy=o0;wn.Memo=s0;wn.Portal=iA;wn.Profiler=e0;wn.StrictMode=Zb;wn.Suspense=a0;wn.SuspenseList=i0;wn.isAsyncMode=function(){return!1};wn.isConcurrentMode=function(){return!1};wn.isContextConsumer=function(e){return Ii(e)===n0};wn.isContextProvider=function(e){return Ii(e)===t0};wn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===aA};wn.isForwardRef=function(e){return Ii(e)===r0};wn.isFragment=function(e){return Ii(e)===Qb};wn.isLazy=function(e){return Ii(e)===o0};wn.isMemo=function(e){return Ii(e)===s0};wn.isPortal=function(e){return Ii(e)===iA};wn.isProfiler=function(e){return Ii(e)===e0};wn.isStrictMode=function(e){return Ii(e)===Zb};wn.isSuspense=function(e){return Ii(e)===a0};wn.isSuspenseList=function(e){return Ii(e)===i0};wn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Qb||e===e0||e===Zb||e===a0||e===i0||e===Sxe||typeof e=="object"&&e!==null&&(e.$$typeof===o0||e.$$typeof===s0||e.$$typeof===t0||e.$$typeof===n0||e.$$typeof===r0||e.$$typeof===Xz||e.getModuleId!==void 0)};wn.typeOf=Ii;Yz.exports=wn;var Nxe=Yz.exports,Cxe=Oo,Axe=Io,Exe="[object Number]";function Txe(e){return typeof e=="number"||Axe(e)&&Cxe(e)==Exe}var Jz=Txe;const Pxe=vn(Jz);var Oxe=Jz;function Ixe(e){return Oxe(e)&&e!=+e}var Rxe=Ixe;const Jp=vn(Rxe);var Qi=function(t){return t===0?0:t>0?1:-1},vc=function(t){return Gc(t)&&t.indexOf("%")===t.length-1},at=function(t){return Pxe(t)&&!Jp(t)},Mxe=function(t){return hn(t)},_r=function(t){return at(t)||Gc(t)},Dxe=0,l0=function(t){var n=++Dxe;return"".concat(t||"").concat(n)},Yc=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!at(t)&&!Gc(t))return r;var s;if(vc(t)){var o=t.indexOf("%");s=n*parseFloat(t.slice(0,o))/100}else s=+t;return Jp(s)&&(s=r),a&&s>n&&(s=n),s},nl=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},Lxe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},Cu=function(t,n){return at(t)&&at(n)?function(r){return t+r*(n-t)}:function(){return n}};function K1(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):Ai(r,t))===n})}var $xe=function(t,n){return at(t)&&at(n)?t-n:Gc(t)&&Gc(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function fd(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function V1(e){"@babel/helpers - typeof";return V1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V1(e)}var Fxe=["viewBox","children"],Uxe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],jO=["points","pathLength"],jj={svg:Fxe,polygon:jO,polyline:jO},sA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ty=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(p.isValidElement(t)&&(r=t.props),!kh(r))return null;var a={};return Object.keys(r).forEach(function(s){sA.includes(s)&&(a[s]=n||function(o){return r[s](r,o)})}),a},Bxe=function(t,n,r){return function(a){return t(n,r,a),null}},Py=function(t,n,r){if(!kh(t)||V1(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(s){var o=t[s];sA.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=Bxe(o,n,r))}),a},zxe=["children"],Wxe=["children"];function _O(e,t){if(e==null)return{};var n=qxe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function qxe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var kO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},po=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},SO=null,_j=null,oA=function e(t){if(t===SO&&Array.isArray(_j))return _j;var n=[];return p.Children.forEach(t,function(r){hn(r)||(Nxe.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),_j=n,SO=t,n};function as(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return po(a)}):r=[po(t)],oA(e).forEach(function(a){var s=Ai(a,"type.displayName")||Ai(a,"type.name");r.indexOf(s)!==-1&&n.push(a)}),n}function Ja(e,t){var n=as(e,t);return n&&n[0]}var NO=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!at(r)||r<=0||!at(a)||a<=0)},Hxe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Kxe=function(t){return t&&t.type&&Gc(t.type)&&Hxe.indexOf(t.type)>=0},Vxe=function(t,n,r,a){var s,o=(s=jj==null?void 0:jj[a])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!zt(t)&&(a&&o.includes(n)||Uxe.includes(n))||r&&sA.includes(n)},dn=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(p.isValidElement(t)&&(a=t.props),!kh(a))return null;var s={};return Object.keys(a).forEach(function(o){var l;Vxe((l=a)===null||l===void 0?void 0:l[o],o,n,r)&&(s[o]=a[o])}),s},G1=function e(t,n){if(t===n)return!0;var r=p.Children.count(t);if(r!==p.Children.count(n))return!1;if(r===0)return!0;if(r===1)return CO(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var s=t[a],o=n[a];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!CO(s,o))return!1}return!0},CO=function(t,n){if(hn(t)&&hn(n))return!0;if(!hn(t)&&!hn(n)){var r=t.props||{},a=r.children,s=_O(r,zxe),o=n.props||{},l=o.children,c=_O(o,Wxe);return a&&l?fd(s,c)&&G1(a,l):!a&&!l?fd(s,c):!1}return!1},AO=function(t,n){var r=[],a={};return oA(t).forEach(function(s,o){if(Kxe(s))r.push(s);else if(s){var l=po(s.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var h=u(s,l,o);r.push(h),a[l]=!0}}}),r},Gxe=function(t){var n=t&&t.type;return n&&kO[n]?kO[n]:null},Yxe=function(t,n){return oA(n).indexOf(t)},Xxe=["children","width","height","viewBox","className","style","title","desc"];function Y1(){return Y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y1.apply(this,arguments)}function Jxe(e,t){if(e==null)return{};var n=Qxe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qxe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function X1(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,u=Jxe(e,Xxe),d=a||{width:n,height:r,x:0,y:0},h=an("recharts-surface",s);return V.createElement("svg",Y1({},dn(u,!0,"svg"),{className:h,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),V.createElement("title",null,l),V.createElement("desc",null,c),t)}var Zxe=["children","className"];function J1(){return J1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J1.apply(this,arguments)}function ebe(e,t){if(e==null)return{};var n=tbe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function tbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Tr=V.forwardRef(function(e,t){var n=e.children,r=e.className,a=ebe(e,Zxe),s=an("recharts-layer",r);return V.createElement("g",J1({className:s},dn(a,!0),{ref:t}),n)}),go=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s]};function nbe(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(a);++r<a;)s[r]=e[r+t];return s}var rbe=nbe,abe=rbe;function ibe(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:abe(e,t,n)}var sbe=ibe,obe="\\ud800-\\udfff",lbe="\\u0300-\\u036f",cbe="\\ufe20-\\ufe2f",ube="\\u20d0-\\u20ff",dbe=lbe+cbe+ube,hbe="\\ufe0e\\ufe0f",fbe="\\u200d",mbe=RegExp("["+fbe+obe+dbe+hbe+"]");function pbe(e){return mbe.test(e)}var Qz=pbe;function gbe(e){return e.split("")}var vbe=gbe,Zz="\\ud800-\\udfff",ybe="\\u0300-\\u036f",xbe="\\ufe20-\\ufe2f",bbe="\\u20d0-\\u20ff",wbe=ybe+xbe+bbe,jbe="\\ufe0e\\ufe0f",_be="["+Zz+"]",Q1="["+wbe+"]",Z1="\\ud83c[\\udffb-\\udfff]",kbe="(?:"+Q1+"|"+Z1+")",e8="[^"+Zz+"]",t8="(?:\\ud83c[\\udde6-\\uddff]){2}",n8="[\\ud800-\\udbff][\\udc00-\\udfff]",Sbe="\\u200d",r8=kbe+"?",a8="["+jbe+"]?",Nbe="(?:"+Sbe+"(?:"+[e8,t8,n8].join("|")+")"+a8+r8+")*",Cbe=a8+r8+Nbe,Abe="(?:"+[e8+Q1+"?",Q1,t8,n8,_be].join("|")+")",Ebe=RegExp(Z1+"(?="+Z1+")|"+Abe+Cbe,"g");function Tbe(e){return e.match(Ebe)||[]}var Pbe=Tbe,Obe=vbe,Ibe=Qz,Rbe=Pbe;function Mbe(e){return Ibe(e)?Rbe(e):Obe(e)}var Dbe=Mbe,Lbe=sbe,$be=Qz,Fbe=Dbe,Ube=Kz;function Bbe(e){return function(t){t=Ube(t);var n=$be(t)?Fbe(t):void 0,r=n?n[0]:t.charAt(0),a=n?Lbe(n,1).join(""):t.slice(1);return r[e]()+a}}var zbe=Bbe,Wbe=zbe,qbe=Wbe("toUpperCase"),Hbe=qbe;const c0=vn(Hbe);function Pn(e){return function(){return e}}const i8=Math.cos,Oy=Math.sin,ds=Math.sqrt,Iy=Math.PI,u0=2*Iy,ek=Math.PI,tk=2*ek,sc=1e-6,Kbe=tk-sc;function s8(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Vbe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return s8;const n=10**t;return function(r){this._+=r[0];for(let a=1,s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class Gbe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?s8:Vbe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,s,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,a,s){if(t=+t,n=+n,r=+r,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=r-t,u=a-n,d=o-t,h=l-n,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>sc)if(!(Math.abs(h*c-u*d)>sc)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,g=a-l,v=c*c+u*u,x=m*m+g*g,y=Math.sqrt(v),w=Math.sqrt(f),b=s*Math.tan((ek-Math.acos((v+f-x)/(2*y*w)))/2),_=b/w,k=b/y;Math.abs(_-1)>sc&&this._append`L${t+_*d},${n+_*h}`,this._append`A${s},${s},0,0,${+(h*m>d*g)},${this._x1=t+k*c},${this._y1=n+k*u}`}}arc(t,n,r,a,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),c=r*Math.sin(a),u=t+l,d=n+c,h=1^o,f=o?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>sc||Math.abs(this._y1-d)>sc)&&this._append`L${u},${d}`,r&&(f<0&&(f=f%tk+tk),f>Kbe?this._append`A${r},${r},0,1,${h},${t-l},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:f>sc&&this._append`A${r},${r},0,${+(f>=ek)},${h},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function lA(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Gbe(t)}function cA(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function o8(e){this._context=e}o8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function d0(e){return new o8(e)}function l8(e){return e[0]}function c8(e){return e[1]}function u8(e,t){var n=Pn(!0),r=null,a=d0,s=null,o=lA(l);e=typeof e=="function"?e:e===void 0?l8:Pn(e),t=typeof t=="function"?t:t===void 0?c8:Pn(t);function l(c){var u,d=(c=cA(c)).length,h,f=!1,m;for(r==null&&(s=a(m=o())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(h,u,c),+t(h,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Pn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Pn(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Pn(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,r!=null&&(s=a(r)),l):a},l.context=function(c){return arguments.length?(c==null?r=s=null:s=a(r=c),l):r},l}function Hg(e,t,n){var r=null,a=Pn(!0),s=null,o=d0,l=null,c=lA(u);e=typeof e=="function"?e:e===void 0?l8:Pn(+e),t=typeof t=="function"?t:Pn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?c8:Pn(+n);function u(h){var f,m,g,v=(h=cA(h)).length,x,y=!1,w,b=new Array(v),_=new Array(v);for(s==null&&(l=o(w=c())),f=0;f<=v;++f){if(!(f<v&&a(x=h[f],f,h))===y)if(y=!y)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=f-1;g>=m;--g)l.point(b[g],_[g]);l.lineEnd(),l.areaEnd()}y&&(b[f]=+e(x,f,h),_[f]=+t(x,f,h),l.point(r?+r(x,f,h):b[f],n?+n(x,f,h):_[f]))}if(w)return l=null,w+""||null}function d(){return u8().defined(a).curve(o).context(s)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:Pn(+h),r=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Pn(+h),u):e},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Pn(+h),u):r},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:Pn(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Pn(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Pn(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(h){return arguments.length?(a=typeof h=="function"?h:Pn(!!h),u):a},u.curve=function(h){return arguments.length?(o=h,s!=null&&(l=o(s)),u):o},u.context=function(h){return arguments.length?(h==null?s=l=null:l=o(s=h),u):s},u}class d8{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Ybe(e){return new d8(e,!0)}function Xbe(e){return new d8(e,!1)}const uA={draw(e,t){const n=ds(t/Iy);e.moveTo(n,0),e.arc(0,0,n,0,u0)}},Jbe={draw(e,t){const n=ds(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},h8=ds(1/3),Qbe=h8*2,Zbe={draw(e,t){const n=ds(t/Qbe),r=n*h8;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},e0e={draw(e,t){const n=ds(t),r=-n/2;e.rect(r,r,n,n)}},t0e=.8908130915292852,f8=Oy(Iy/10)/Oy(7*Iy/10),n0e=Oy(u0/10)*f8,r0e=-i8(u0/10)*f8,a0e={draw(e,t){const n=ds(t*t0e),r=n0e*n,a=r0e*n;e.moveTo(0,-n),e.lineTo(r,a);for(let s=1;s<5;++s){const o=u0*s/5,l=i8(o),c=Oy(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*a,c*r+l*a)}e.closePath()}},kj=ds(3),i0e={draw(e,t){const n=-ds(t/(kj*3));e.moveTo(0,n*2),e.lineTo(-kj*n,-n),e.lineTo(kj*n,-n),e.closePath()}},ui=-.5,di=ds(3)/2,nk=1/ds(12),s0e=(nk/2+1)*3,o0e={draw(e,t){const n=ds(t/s0e),r=n/2,a=n*nk,s=r,o=n*nk+n,l=-s,c=o;e.moveTo(r,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(ui*r-di*a,di*r+ui*a),e.lineTo(ui*s-di*o,di*s+ui*o),e.lineTo(ui*l-di*c,di*l+ui*c),e.lineTo(ui*r+di*a,ui*a-di*r),e.lineTo(ui*s+di*o,ui*o-di*s),e.lineTo(ui*l+di*c,ui*c-di*l),e.closePath()}};function l0e(e,t){let n=null,r=lA(a);e=typeof e=="function"?e:Pn(e||uA),t=typeof t=="function"?t:Pn(t===void 0?64:+t);function a(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Pn(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Pn(+s),a):t},a.context=function(s){return arguments.length?(n=s??null,a):n},a}function Ry(){}function My(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function m8(e){this._context=e}m8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:My(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:My(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function c0e(e){return new m8(e)}function p8(e){this._context=e}p8.prototype={areaStart:Ry,areaEnd:Ry,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:My(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function u0e(e){return new p8(e)}function g8(e){this._context=e}g8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:My(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function d0e(e){return new g8(e)}function v8(e){this._context=e}v8.prototype={areaStart:Ry,areaEnd:Ry,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function h0e(e){return new v8(e)}function EO(e){return e<0?-1:1}function TO(e,t,n){var r=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(s*a+o*r)/(r+a);return(EO(s)+EO(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function PO(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Sj(e,t,n){var r=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-r)/3;e._context.bezierCurveTo(r+l,a+l*t,s-l,o-l*n,s,o)}function Dy(e){this._context=e}Dy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Sj(this,this._t0,PO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Sj(this,PO(this,n=TO(this,e,t)),n);break;default:Sj(this,this._t0,n=TO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function y8(e){this._context=new x8(e)}(y8.prototype=Object.create(Dy.prototype)).point=function(e,t){Dy.prototype.point.call(this,t,e)};function x8(e){this._context=e}x8.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,s){this._context.bezierCurveTo(t,e,r,n,s,a)}};function f0e(e){return new Dy(e)}function m0e(e){return new y8(e)}function b8(e){this._context=e}b8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=OO(e),a=OO(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],a[0][s],r[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function OO(e){var t,n=e.length-1,r,a=new Array(n),s=new Array(n),o=new Array(n);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function p0e(e){return new b8(e)}function h0(e,t){this._context=e,this._t=t}h0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function g0e(e){return new h0(e,.5)}function v0e(e){return new h0(e,0)}function y0e(e){return new h0(e,1)}function zd(e,t){if((o=e.length)>1)for(var n=1,r,a,s=e[t[0]],o,l=s.length;n<o;++n)for(a=s,s=e[t[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function rk(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function x0e(e,t){return e[t]}function b0e(e){const t=[];return t.key=e,t}function w0e(){var e=Pn([]),t=rk,n=zd,r=x0e;function a(s){var o=Array.from(e.apply(this,arguments),b0e),l,c=o.length,u=-1,d;for(const h of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(h,o[l].key,u,s)]).data=h;for(l=0,d=cA(t(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Pn(Array.from(s)),a):e},a.value=function(s){return arguments.length?(r=typeof s=="function"?s:Pn(+s),a):r},a.order=function(s){return arguments.length?(t=s==null?rk:typeof s=="function"?s:Pn(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(n=s??zd,a):n},a}function j0e(e,t){if((r=e.length)>0){for(var n,r,a=0,s=e[0].length,o;a<s;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}zd(e,t)}}function _0e(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,s=r.length;n<s;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}zd(e,t)}}function k0e(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,s,o;r<s;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],h=d[r][1]||0,f=d[r-1][1]||0,m=(h-f)/2,g=0;g<l;++g){var v=e[t[g]],x=v[r][1]||0,y=v[r-1][1]||0;m+=x-y}c+=h,u+=m*h}a[r-1][1]+=a[r-1][0]=n,c&&(n-=u/c)}a[r-1][1]+=a[r-1][0]=n,zd(e,t)}}function Pm(e){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(e)}var S0e=["type","size","sizeType"];function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ak.apply(this,arguments)}function IO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function RO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IO(Object(n),!0).forEach(function(r){N0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N0e(e,t,n){return t=C0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C0e(e){var t=A0e(e,"string");return Pm(t)=="symbol"?t:t+""}function A0e(e,t){if(Pm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E0e(e,t){if(e==null)return{};var n=T0e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function T0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var w8={symbolCircle:uA,symbolCross:Jbe,symbolDiamond:Zbe,symbolSquare:e0e,symbolStar:a0e,symbolTriangle:i0e,symbolWye:o0e},P0e=Math.PI/180,O0e=function(t){var n="symbol".concat(c0(t));return w8[n]||uA},I0e=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*P0e;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},R0e=function(t,n){w8["symbol".concat(c0(t))]=n},dA=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,s=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=E0e(t,S0e),u=RO(RO({},c),{},{type:r,size:s,sizeType:l}),d=function(){var x=O0e(r),y=l0e().type(x).size(I0e(s,l,r));return y()},h=u.className,f=u.cx,m=u.cy,g=dn(u,!0);return f===+f&&m===+m&&s===+s?V.createElement("path",ak({},g,{className:an("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:d()})):null};dA.registerSymbol=R0e;function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function ik(){return ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ik.apply(this,arguments)}function MO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function M0e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(n),!0).forEach(function(r){Om(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function D0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_8(r.key),r)}}function $0e(e,t,n){return t&&L0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function F0e(e,t,n){return t=Ly(t),U0e(e,j8()?Reflect.construct(t,n||[],Ly(e).constructor):t.apply(e,n))}function U0e(e,t){if(t&&(Wd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B0e(e)}function B0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j8=function(){return!!e})()}function Ly(e){return Ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ly(e)}function z0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sk(e,t)}function sk(e,t){return sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},sk(e,t)}function Om(e,t,n){return t=_8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _8(e){var t=W0e(e,"string");return Wd(t)=="symbol"?t:t+""}function W0e(e,t){if(Wd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hi=32,hA=function(e){function t(){return D0e(this,t),F0e(this,t,arguments)}return z0e(t,e),$0e(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,s=hi/2,o=hi/6,l=hi/3,c=r.inactive?a:r.color;if(r.type==="plainline")return V.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:hi,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return V.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(hi,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return V.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(hi/8,"h").concat(hi,"v").concat(hi*3/4,"h").concat(-hi,"z"),className:"recharts-legend-icon"});if(V.isValidElement(r.legendIcon)){var u=M0e({},r);return delete u.legendIcon,V.cloneElement(r.legendIcon,u)}return V.createElement(dA,{fill:c,cx:s,cy:s,size:hi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,s=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:hi,height:hi},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,g){var v=m.formatter||c,x=an(Om(Om({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var y=zt(m.value)?null:m.value;go(!zt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=m.inactive?u:m.color;return V.createElement("li",ik({className:x,style:h,key:"legend-item-".concat(g)},Py(r.props,m,g)),V.createElement(X1,{width:o,height:o,viewBox:d,style:f},r.renderIcon(m)),V.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},v?v(y,m,g):y))})}},{key:"render",value:function(){var r=this.props,a=r.payload,s=r.layout,o=r.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return V.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(p.PureComponent);Om(hA,"displayName","Legend");Om(hA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var q0e=Yb;function H0e(){this.__data__=new q0e,this.size=0}var K0e=H0e;function V0e(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var G0e=V0e;function Y0e(e){return this.__data__.get(e)}var X0e=Y0e;function J0e(e){return this.__data__.has(e)}var Q0e=J0e,Z0e=Yb,ewe=ZC,twe=eA,nwe=200;function rwe(e,t){var n=this.__data__;if(n instanceof Z0e){var r=n.__data__;if(!ewe||r.length<nwe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new twe(r)}return n.set(e,t),this.size=n.size,this}var awe=rwe,iwe=Yb,swe=K0e,owe=G0e,lwe=X0e,cwe=Q0e,uwe=awe;function Ah(e){var t=this.__data__=new iwe(e);this.size=t.size}Ah.prototype.clear=swe;Ah.prototype.delete=owe;Ah.prototype.get=lwe;Ah.prototype.has=cwe;Ah.prototype.set=uwe;var k8=Ah,dwe="__lodash_hash_undefined__";function hwe(e){return this.__data__.set(e,dwe),this}var fwe=hwe;function mwe(e){return this.__data__.has(e)}var pwe=mwe,gwe=eA,vwe=fwe,ywe=pwe;function $y(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new gwe;++t<n;)this.add(e[t])}$y.prototype.add=$y.prototype.push=vwe;$y.prototype.has=ywe;var S8=$y;function xwe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var N8=xwe;function bwe(e,t){return e.has(t)}var C8=bwe,wwe=S8,jwe=N8,_we=C8,kwe=1,Swe=2;function Nwe(e,t,n,r,a,s){var o=n&kwe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(e),d=s.get(t);if(u&&d)return u==t&&d==e;var h=-1,f=!0,m=n&Swe?new wwe:void 0;for(s.set(e,t),s.set(t,e);++h<l;){var g=e[h],v=t[h];if(r)var x=o?r(v,g,h,t,e,s):r(g,v,h,e,t,s);if(x!==void 0){if(x)continue;f=!1;break}if(m){if(!jwe(t,function(y,w){if(!_we(m,w)&&(g===y||a(g,y,n,r,s)))return m.push(w)})){f=!1;break}}else if(!(g===v||a(g,v,n,r,s))){f=!1;break}}return s.delete(e),s.delete(t),f}var A8=Nwe,Cwe=Ws,Awe=Cwe.Uint8Array,Ewe=Awe;function Twe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var Pwe=Twe;function Owe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var fA=Owe,DO=Xp,LO=Ewe,Iwe=QC,Rwe=A8,Mwe=Pwe,Dwe=fA,Lwe=1,$we=2,Fwe="[object Boolean]",Uwe="[object Date]",Bwe="[object Error]",zwe="[object Map]",Wwe="[object Number]",qwe="[object RegExp]",Hwe="[object Set]",Kwe="[object String]",Vwe="[object Symbol]",Gwe="[object ArrayBuffer]",Ywe="[object DataView]",$O=DO?DO.prototype:void 0,Nj=$O?$O.valueOf:void 0;function Xwe(e,t,n,r,a,s,o){switch(n){case Ywe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Gwe:return!(e.byteLength!=t.byteLength||!s(new LO(e),new LO(t)));case Fwe:case Uwe:case Wwe:return Iwe(+e,+t);case Bwe:return e.name==t.name&&e.message==t.message;case qwe:case Kwe:return e==t+"";case zwe:var l=Mwe;case Hwe:var c=r&Lwe;if(l||(l=Dwe),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=$we,o.set(e,t);var d=Rwe(l(e),l(t),r,a,s,o);return o.delete(e),d;case Vwe:if(Nj)return Nj.call(e)==Nj.call(t)}return!1}var Jwe=Xwe;function Qwe(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var E8=Qwe,Zwe=E8,eje=Wa;function tje(e,t,n){var r=t(e);return eje(e)?r:Zwe(r,n(e))}var nje=tje;function rje(e,t){for(var n=-1,r=e==null?0:e.length,a=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[a++]=o)}return s}var aje=rje;function ije(){return[]}var sje=ije,oje=aje,lje=sje,cje=Object.prototype,uje=cje.propertyIsEnumerable,FO=Object.getOwnPropertySymbols,dje=FO?function(e){return e==null?[]:(e=Object(e),oje(FO(e),function(t){return uje.call(e,t)}))}:lje,hje=dje;function fje(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var mje=fje,pje=Oo,gje=Io,vje="[object Arguments]";function yje(e){return gje(e)&&pje(e)==vje}var xje=yje,UO=xje,bje=Io,T8=Object.prototype,wje=T8.hasOwnProperty,jje=T8.propertyIsEnumerable,_je=UO(function(){return arguments}())?UO:function(e){return bje(e)&&wje.call(e,"callee")&&!jje.call(e,"callee")},mA=_je,Fy={exports:{}};function kje(){return!1}var Sje=kje;Fy.exports;(function(e,t){var n=Ws,r=Sje,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(Fy,Fy.exports);var P8=Fy.exports,Nje=9007199254740991,Cje=/^(?:0|[1-9]\d*)$/;function Aje(e,t){var n=typeof e;return t=t??Nje,!!t&&(n=="number"||n!="symbol"&&Cje.test(e))&&e>-1&&e%1==0&&e<t}var pA=Aje,Eje=9007199254740991;function Tje(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Eje}var gA=Tje,Pje=Oo,Oje=gA,Ije=Io,Rje="[object Arguments]",Mje="[object Array]",Dje="[object Boolean]",Lje="[object Date]",$je="[object Error]",Fje="[object Function]",Uje="[object Map]",Bje="[object Number]",zje="[object Object]",Wje="[object RegExp]",qje="[object Set]",Hje="[object String]",Kje="[object WeakMap]",Vje="[object ArrayBuffer]",Gje="[object DataView]",Yje="[object Float32Array]",Xje="[object Float64Array]",Jje="[object Int8Array]",Qje="[object Int16Array]",Zje="[object Int32Array]",e_e="[object Uint8Array]",t_e="[object Uint8ClampedArray]",n_e="[object Uint16Array]",r_e="[object Uint32Array]",Ln={};Ln[Yje]=Ln[Xje]=Ln[Jje]=Ln[Qje]=Ln[Zje]=Ln[e_e]=Ln[t_e]=Ln[n_e]=Ln[r_e]=!0;Ln[Rje]=Ln[Mje]=Ln[Vje]=Ln[Dje]=Ln[Gje]=Ln[Lje]=Ln[$je]=Ln[Fje]=Ln[Uje]=Ln[Bje]=Ln[zje]=Ln[Wje]=Ln[qje]=Ln[Hje]=Ln[Kje]=!1;function a_e(e){return Ije(e)&&Oje(e.length)&&!!Ln[Pje(e)]}var i_e=a_e;function s_e(e){return function(t){return e(t)}}var O8=s_e,Uy={exports:{}};Uy.exports;(function(e,t){var n=Uz,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===r,o=s&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Uy,Uy.exports);var o_e=Uy.exports,l_e=i_e,c_e=O8,BO=o_e,zO=BO&&BO.isTypedArray,u_e=zO?c_e(zO):l_e,I8=u_e,d_e=mje,h_e=mA,f_e=Wa,m_e=P8,p_e=pA,g_e=I8,v_e=Object.prototype,y_e=v_e.hasOwnProperty;function x_e(e,t){var n=f_e(e),r=!n&&h_e(e),a=!n&&!r&&m_e(e),s=!n&&!r&&!a&&g_e(e),o=n||r||a||s,l=o?d_e(e.length,String):[],c=l.length;for(var u in e)(t||y_e.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||p_e(u,c)))&&l.push(u);return l}var b_e=x_e,w_e=Object.prototype;function j_e(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||w_e;return e===n}var __e=j_e;function k_e(e,t){return function(n){return e(t(n))}}var R8=k_e,S_e=R8,N_e=S_e(Object.keys,Object),C_e=N_e,A_e=__e,E_e=C_e,T_e=Object.prototype,P_e=T_e.hasOwnProperty;function O_e(e){if(!A_e(e))return E_e(e);var t=[];for(var n in Object(e))P_e.call(e,n)&&n!="constructor"&&t.push(n);return t}var I_e=O_e,R_e=JC,M_e=gA;function D_e(e){return e!=null&&M_e(e.length)&&!R_e(e)}var Qp=D_e,L_e=b_e,$_e=I_e,F_e=Qp;function U_e(e){return F_e(e)?L_e(e):$_e(e)}var f0=U_e,B_e=nje,z_e=hje,W_e=f0;function q_e(e){return B_e(e,W_e,z_e)}var H_e=q_e,WO=H_e,K_e=1,V_e=Object.prototype,G_e=V_e.hasOwnProperty;function Y_e(e,t,n,r,a,s){var o=n&K_e,l=WO(e),c=l.length,u=WO(t),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in t:G_e.call(t,f)))return!1}var m=s.get(e),g=s.get(t);if(m&&g)return m==t&&g==e;var v=!0;s.set(e,t),s.set(t,e);for(var x=o;++h<c;){f=l[h];var y=e[f],w=t[f];if(r)var b=o?r(w,y,f,t,e,s):r(y,w,f,e,t,s);if(!(b===void 0?y===w||a(y,w,n,r,s):b)){v=!1;break}x||(x=f=="constructor")}if(v&&!x){var _=e.constructor,k=t.constructor;_!=k&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof k=="function"&&k instanceof k)&&(v=!1)}return s.delete(e),s.delete(t),v}var X_e=Y_e,J_e=cu,Q_e=Ws,Z_e=J_e(Q_e,"DataView"),e1e=Z_e,t1e=cu,n1e=Ws,r1e=t1e(n1e,"Promise"),a1e=r1e,i1e=cu,s1e=Ws,o1e=i1e(s1e,"Set"),M8=o1e,l1e=cu,c1e=Ws,u1e=l1e(c1e,"WeakMap"),d1e=u1e,ok=e1e,lk=ZC,ck=a1e,uk=M8,dk=d1e,D8=Oo,Eh=zz,qO="[object Map]",h1e="[object Object]",HO="[object Promise]",KO="[object Set]",VO="[object WeakMap]",GO="[object DataView]",f1e=Eh(ok),m1e=Eh(lk),p1e=Eh(ck),g1e=Eh(uk),v1e=Eh(dk),oc=D8;(ok&&oc(new ok(new ArrayBuffer(1)))!=GO||lk&&oc(new lk)!=qO||ck&&oc(ck.resolve())!=HO||uk&&oc(new uk)!=KO||dk&&oc(new dk)!=VO)&&(oc=function(e){var t=D8(e),n=t==h1e?e.constructor:void 0,r=n?Eh(n):"";if(r)switch(r){case f1e:return GO;case m1e:return qO;case p1e:return HO;case g1e:return KO;case v1e:return VO}return t});var y1e=oc,Cj=k8,x1e=A8,b1e=Jwe,w1e=X_e,YO=y1e,XO=Wa,JO=P8,j1e=I8,_1e=1,QO="[object Arguments]",ZO="[object Array]",Kg="[object Object]",k1e=Object.prototype,eI=k1e.hasOwnProperty;function S1e(e,t,n,r,a,s){var o=XO(e),l=XO(t),c=o?ZO:YO(e),u=l?ZO:YO(t);c=c==QO?Kg:c,u=u==QO?Kg:u;var d=c==Kg,h=u==Kg,f=c==u;if(f&&JO(e)){if(!JO(t))return!1;o=!0,d=!1}if(f&&!d)return s||(s=new Cj),o||j1e(e)?x1e(e,t,n,r,a,s):b1e(e,t,c,n,r,a,s);if(!(n&_1e)){var m=d&&eI.call(e,"__wrapped__"),g=h&&eI.call(t,"__wrapped__");if(m||g){var v=m?e.value():e,x=g?t.value():t;return s||(s=new Cj),a(v,x,n,r,s)}}return f?(s||(s=new Cj),w1e(e,t,n,r,a,s)):!1}var N1e=S1e,C1e=N1e,tI=Io;function L8(e,t,n,r,a){return e===t?!0:e==null||t==null||!tI(e)&&!tI(t)?e!==e&&t!==t:C1e(e,t,n,r,L8,a)}var vA=L8,A1e=k8,E1e=vA,T1e=1,P1e=2;function O1e(e,t,n,r){var a=n.length,s=a,o=!r;if(e==null)return!s;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){l=n[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var h=new A1e;if(r)var f=r(u,d,c,e,t,h);if(!(f===void 0?E1e(d,u,T1e|P1e,r,h):f))return!1}}return!0}var I1e=O1e,R1e=Kl;function M1e(e){return e===e&&!R1e(e)}var $8=M1e,D1e=$8,L1e=f0;function $1e(e){for(var t=L1e(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,D1e(a)]}return t}var F1e=$1e;function U1e(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var F8=U1e,B1e=I1e,z1e=F1e,W1e=F8;function q1e(e){var t=z1e(e);return t.length==1&&t[0][2]?W1e(t[0][0],t[0][1]):function(n){return n===e||B1e(n,e,t)}}var H1e=q1e;function K1e(e,t){return e!=null&&t in Object(e)}var V1e=K1e,G1e=Vz,Y1e=mA,X1e=Wa,J1e=pA,Q1e=gA,Z1e=Jb;function eke(e,t,n){t=G1e(t,e);for(var r=-1,a=t.length,s=!1;++r<a;){var o=Z1e(t[r]);if(!(s=e!=null&&n(e,o)))break;e=e[o]}return s||++r!=a?s:(a=e==null?0:e.length,!!a&&Q1e(a)&&J1e(o,a)&&(X1e(e)||Y1e(e)))}var tke=eke,nke=V1e,rke=tke;function ake(e,t){return e!=null&&rke(e,t,nke)}var ike=ake,ske=vA,oke=Gz,lke=ike,cke=XC,uke=$8,dke=F8,hke=Jb,fke=1,mke=2;function pke(e,t){return cke(e)&&uke(t)?dke(hke(e),t):function(n){var r=oke(n,e);return r===void 0&&r===t?lke(n,e):ske(t,r,fke|mke)}}var gke=pke;function vke(e){return e}var Th=vke;function yke(e){return function(t){return t==null?void 0:t[e]}}var xke=yke,bke=rA;function wke(e){return function(t){return bke(t,e)}}var jke=wke,_ke=xke,kke=jke,Ske=XC,Nke=Jb;function Cke(e){return Ske(e)?_ke(Nke(e)):kke(e)}var Ake=Cke,Eke=H1e,Tke=gke,Pke=Th,Oke=Wa,Ike=Ake;function Rke(e){return typeof e=="function"?e:e==null?Pke:typeof e=="object"?Oke(e)?Tke(e[0],e[1]):Eke(e):Ike(e)}var Vl=Rke;function Mke(e,t,n,r){for(var a=e.length,s=n+(r?1:-1);r?s--:++s<a;)if(t(e[s],s,e))return s;return-1}var U8=Mke;function Dke(e){return e!==e}var Lke=Dke;function $ke(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var Fke=$ke,Uke=U8,Bke=Lke,zke=Fke;function Wke(e,t,n){return t===t?zke(e,t,n):Uke(e,Bke,n)}var qke=Wke,Hke=qke;function Kke(e,t){var n=e==null?0:e.length;return!!n&&Hke(e,t,0)>-1}var Vke=Kke;function Gke(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var Yke=Gke;function Xke(){}var Jke=Xke,Aj=M8,Qke=Jke,Zke=fA,eSe=1/0,tSe=Aj&&1/Zke(new Aj([,-0]))[1]==eSe?function(e){return new Aj(e)}:Qke,nSe=tSe,rSe=S8,aSe=Vke,iSe=Yke,sSe=C8,oSe=nSe,lSe=fA,cSe=200;function uSe(e,t,n){var r=-1,a=aSe,s=e.length,o=!0,l=[],c=l;if(n)o=!1,a=iSe;else if(s>=cSe){var u=t?null:oSe(e);if(u)return lSe(u);o=!1,a=sSe,c=new rSe}else c=t?[]:l;e:for(;++r<s;){var d=e[r],h=t?t(d):d;if(d=n||d!==0?d:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;t&&c.push(h),l.push(d)}else a(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}var dSe=uSe,hSe=Vl,fSe=dSe;function mSe(e,t){return e&&e.length?fSe(e,hSe(t)):[]}var pSe=mSe;const nI=vn(pSe);function B8(e,t,n){return t===!0?nI(e,n):zt(t)?nI(e,t):e}function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}var gSe=["ref"];function rI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Gs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rI(Object(n),!0).forEach(function(r){m0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W8(r.key),r)}}function ySe(e,t,n){return t&&aI(e.prototype,t),n&&aI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xSe(e,t,n){return t=By(t),bSe(e,z8()?Reflect.construct(t,n||[],By(e).constructor):t.apply(e,n))}function bSe(e,t){if(t&&(qd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wSe(e)}function wSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z8=function(){return!!e})()}function By(e){return By=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},By(e)}function jSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hk(e,t)}function hk(e,t){return hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},hk(e,t)}function m0(e,t,n){return t=W8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W8(e){var t=_Se(e,"string");return qd(t)=="symbol"?t:t+""}function _Se(e,t){if(qd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kSe(e,t){if(e==null)return{};var n=SSe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function SSe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function NSe(e){return e.value}function CSe(e,t){if(V.isValidElement(e))return V.cloneElement(e,t);if(typeof e=="function")return V.createElement(e,t);t.ref;var n=kSe(t,gSe);return V.createElement(hA,n)}var iI=1,wi=function(e){function t(){var n;vSe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=xSe(this,t,[].concat(a)),m0(n,"lastBoundingBox",{width:-1,height:-1}),n}return jSe(t,e),ySe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>iI||Math.abs(a.height-this.lastBoundingBox.height)>iI)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Gs({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,s=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,h,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();h={left:((u||0)-m.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();f={top:((d||0)-g.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Gs(Gs({},h),f)}},{key:"render",value:function(){var r=this,a=this.props,s=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,h=Gs(Gs({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return V.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){r.wrapperNode=m}},CSe(s,Gs(Gs({},this.props),{},{payload:B8(d,u,NSe)})))}}],[{key:"getWithHeight",value:function(r,a){var s=Gs(Gs({},this.defaultProps),r.props),o=s.layout;return o==="vertical"&&at(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(p.PureComponent);m0(wi,"displayName","Legend");m0(wi,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var sI=Xp,ASe=mA,ESe=Wa,oI=sI?sI.isConcatSpreadable:void 0;function TSe(e){return ESe(e)||ASe(e)||!!(oI&&e&&e[oI])}var PSe=TSe,OSe=E8,ISe=PSe;function q8(e,t,n,r,a){var s=-1,o=e.length;for(n||(n=ISe),a||(a=[]);++s<o;){var l=e[s];t>0&&n(l)?t>1?q8(l,t-1,n,r,a):OSe(a,l):r||(a[a.length]=l)}return a}var H8=q8;function RSe(e){return function(t,n,r){for(var a=-1,s=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++a];if(n(s[c],c,s)===!1)break}return t}}var MSe=RSe,DSe=MSe,LSe=DSe(),$Se=LSe,FSe=$Se,USe=f0;function BSe(e,t){return e&&FSe(e,t,USe)}var K8=BSe,zSe=Qp;function WSe(e,t){return function(n,r){if(n==null)return n;if(!zSe(n))return e(n,r);for(var a=n.length,s=t?a:-1,o=Object(n);(t?s--:++s<a)&&r(o[s],s,o)!==!1;);return n}}var qSe=WSe,HSe=K8,KSe=qSe,VSe=KSe(HSe),yA=VSe,GSe=yA,YSe=Qp;function XSe(e,t){var n=-1,r=YSe(e)?Array(e.length):[];return GSe(e,function(a,s,o){r[++n]=t(a,s,o)}),r}var V8=XSe;function JSe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var QSe=JSe,lI=_h;function ZSe(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,s=lI(e),o=t!==void 0,l=t===null,c=t===t,u=lI(t);if(!l&&!u&&!s&&e>t||s&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!a)return 1;if(!r&&!s&&!u&&e<t||u&&n&&a&&!r&&!s||l&&n&&a||!o&&a||!c)return-1}return 0}var eNe=ZSe,tNe=eNe;function nNe(e,t,n){for(var r=-1,a=e.criteria,s=t.criteria,o=a.length,l=n.length;++r<o;){var c=tNe(a[r],s[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return e.index-t.index}var rNe=nNe,Ej=nA,aNe=rA,iNe=Vl,sNe=V8,oNe=QSe,lNe=O8,cNe=rNe,uNe=Th,dNe=Wa;function hNe(e,t,n){t.length?t=Ej(t,function(s){return dNe(s)?function(o){return aNe(o,s.length===1?s[0]:s)}:s}):t=[uNe];var r=-1;t=Ej(t,lNe(iNe));var a=sNe(e,function(s,o,l){var c=Ej(t,function(u){return u(s)});return{criteria:c,index:++r,value:s}});return oNe(a,function(s,o){return cNe(s,o,n)})}var fNe=hNe;function mNe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var pNe=mNe,gNe=pNe,cI=Math.max;function vNe(e,t,n){return t=cI(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=cI(r.length-t,0),o=Array(s);++a<s;)o[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),gNe(e,this,l)}}var yNe=vNe;function xNe(e){return function(){return e}}var bNe=xNe,wNe=cu,jNe=function(){try{var e=wNe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),G8=jNe,_Ne=bNe,uI=G8,kNe=Th,SNe=uI?function(e,t){return uI(e,"toString",{configurable:!0,enumerable:!1,value:_Ne(t),writable:!0})}:kNe,NNe=SNe,CNe=800,ANe=16,ENe=Date.now;function TNe(e){var t=0,n=0;return function(){var r=ENe(),a=ANe-(r-n);if(n=r,a>0){if(++t>=CNe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var PNe=TNe,ONe=NNe,INe=PNe,RNe=INe(ONe),MNe=RNe,DNe=Th,LNe=yNe,$Ne=MNe;function FNe(e,t){return $Ne(LNe(e,t,DNe),e+"")}var UNe=FNe,BNe=QC,zNe=Qp,WNe=pA,qNe=Kl;function HNe(e,t,n){if(!qNe(n))return!1;var r=typeof t;return(r=="number"?zNe(n)&&WNe(t,n.length):r=="string"&&t in n)?BNe(n[t],e):!1}var p0=HNe,KNe=H8,VNe=fNe,GNe=UNe,dI=p0,YNe=GNe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&dI(e,t[0],t[1])?t=[]:n>2&&dI(t[0],t[1],t[2])&&(t=[t[0]]),VNe(e,KNe(t,1),[])}),XNe=YNe;const xA=vn(XNe);function Im(e){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(e)}function fk(){return fk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fk.apply(this,arguments)}function JNe(e,t){return tCe(e)||eCe(e,t)||ZNe(e,t)||QNe()}function QNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZNe(e,t){if(e){if(typeof e=="string")return hI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hI(e,t)}}function hI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function tCe(e){if(Array.isArray(e))return e}function fI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Tj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fI(Object(n),!0).forEach(function(r){nCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nCe(e,t,n){return t=rCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rCe(e){var t=aCe(e,"string");return Im(t)=="symbol"?t:t+""}function aCe(e,t){if(Im(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iCe(e){return Array.isArray(e)&&_r(e[0])&&_r(e[1])?e.join(" ~ "):e}var sCe=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,s=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,h=t.formatter,f=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,v=t.label,x=t.labelFormatter,y=t.accessibilityLayer,w=y===void 0?!1:y,b=function(){if(d&&d.length){var D={padding:0,margin:0},L=(f?xA(d,f):d).map(function(U,F){if(U.type==="none")return null;var M=Tj({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},l),T=U.formatter||h||iCe,E=U.value,$=U.name,A=E,B=$;if(T&&A!=null&&B!=null){var R=T(E,$,U,F,d);if(Array.isArray(R)){var C=JNe(R,2);A=C[0],B=C[1]}else A=R}return V.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:M},_r(B)?V.createElement("span",{className:"recharts-tooltip-item-name"},B):null,_r(B)?V.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,V.createElement("span",{className:"recharts-tooltip-item-value"},A),V.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return V.createElement("ul",{className:"recharts-tooltip-item-list",style:D},L)}return null},_=Tj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=Tj({margin:0},u),j=!hn(v),N=j?v:"",O=an("recharts-default-tooltip",m),I=an("recharts-tooltip-label",g);j&&x&&d!==void 0&&d!==null&&(N=x(v,d));var P=w?{role:"status","aria-live":"assertive"}:{};return V.createElement("div",fk({className:O,style:_},P),V.createElement("p",{className:I,style:k},V.isValidElement(N)?N:"".concat(N)),b())};function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}function Vg(e,t,n){return t=oCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oCe(e){var t=lCe(e,"string");return Rm(t)=="symbol"?t:t+""}function lCe(e,t){if(Rm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nf="recharts-tooltip-wrapper",cCe={visibility:"hidden"};function uCe(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return an(nf,Vg(Vg(Vg(Vg({},"".concat(nf,"-right"),at(n)&&t&&at(t.x)&&n>=t.x),"".concat(nf,"-left"),at(n)&&t&&at(t.x)&&n<t.x),"".concat(nf,"-bottom"),at(r)&&t&&at(t.y)&&r>=t.y),"".concat(nf,"-top"),at(r)&&t&&at(t.y)&&r<t.y))}function mI(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(s&&at(s[r]))return s[r];var d=n[r]-l-a,h=n[r]+a;if(t[r])return o[r]?d:h;if(o[r]){var f=d,m=c[r];return f<m?Math.max(h,c[r]):Math.max(d,c[r])}var g=h+l,v=c[r]+u;return g>v?Math.max(d,c[r]):Math.max(h,c[r])}function dCe(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function hCe(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,h;return o.height>0&&o.width>0&&n?(d=mI({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=mI({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=dCe({translateX:d,translateY:h,useTranslate3d:l})):u=cCe,{cssProperties:u,cssClasses:uCe({translateX:d,translateY:h,coordinate:n})}}function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function pI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function gI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pI(Object(n),!0).forEach(function(r){pk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X8(r.key),r)}}function pCe(e,t,n){return t&&mCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gCe(e,t,n){return t=zy(t),vCe(e,Y8()?Reflect.construct(t,n||[],zy(e).constructor):t.apply(e,n))}function vCe(e,t){if(t&&(Hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yCe(e)}function yCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y8=function(){return!!e})()}function zy(e){return zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zy(e)}function xCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mk(e,t)}function mk(e,t){return mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},mk(e,t)}function pk(e,t,n){return t=X8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X8(e){var t=bCe(e,"string");return Hd(t)=="symbol"?t:t+""}function bCe(e,t){if(Hd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vI=1,wCe=function(e){function t(){var n;fCe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=gCe(this,t,[].concat(a)),pk(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),pk(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return xCe(t,e),pCe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>vI||Math.abs(r.height-this.state.lastBoundingBox.height)>vI)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,h=a.hasPayload,f=a.isAnimationActive,m=a.offset,g=a.position,v=a.reverseDirection,x=a.useTranslate3d,y=a.viewBox,w=a.wrapperStyle,b=hCe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:g,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:y}),_=b.cssClasses,k=b.cssProperties,j=gI(gI({transition:f&&s?"transform ".concat(l,"ms ").concat(c):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&h?"visible":"hidden",position:"absolute",top:0,left:0},w);return V.createElement("div",{tabIndex:-1,className:_,style:j,ref:function(O){r.wrapperNode=O}},u)}}])}(p.PureComponent),jCe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},jl={isSsr:jCe(),get:function(t){return jl[t]},set:function(t,n){if(typeof t=="string")jl[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(a){jl[a]=t[a]})}}};function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}function yI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function xI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yI(Object(n),!0).forEach(function(r){bA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q8(r.key),r)}}function SCe(e,t,n){return t&&kCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NCe(e,t,n){return t=Wy(t),CCe(e,J8()?Reflect.construct(t,n||[],Wy(e).constructor):t.apply(e,n))}function CCe(e,t){if(t&&(Kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ACe(e)}function ACe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J8=function(){return!!e})()}function Wy(e){return Wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wy(e)}function ECe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gk(e,t)}function gk(e,t){return gk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},gk(e,t)}function bA(e,t,n){return t=Q8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q8(e){var t=TCe(e,"string");return Kd(t)=="symbol"?t:t+""}function TCe(e,t){if(Kd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PCe(e){return e.dataKey}function OCe(e,t){return V.isValidElement(e)?V.cloneElement(e,t):typeof e=="function"?V.createElement(e,t):V.createElement(sCe,t)}var sr=function(e){function t(){return _Ce(this,t),NCe(this,t,arguments)}return ECe(t,e),SCe(t,[{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,h=a.filterNull,f=a.isAnimationActive,m=a.offset,g=a.payload,v=a.payloadUniqBy,x=a.position,y=a.reverseDirection,w=a.useTranslate3d,b=a.viewBox,_=a.wrapperStyle,k=g??[];h&&k.length&&(k=B8(g.filter(function(N){return N.value!=null&&(N.hide!==!0||r.props.includeHidden)}),v,PCe));var j=k.length>0;return V.createElement(wCe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:s,coordinate:d,hasPayload:j,offset:m,position:x,reverseDirection:y,useTranslate3d:w,viewBox:b,wrapperStyle:_},OCe(u,xI(xI({},this.props),{},{payload:k})))}}])}(p.PureComponent);bA(sr,"displayName","Tooltip");bA(sr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!jl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var ICe=Ws,RCe=function(){return ICe.Date.now()},MCe=RCe,DCe=/\s/;function LCe(e){for(var t=e.length;t--&&DCe.test(e.charAt(t)););return t}var $Ce=LCe,FCe=$Ce,UCe=/^\s+/;function BCe(e){return e&&e.slice(0,FCe(e)+1).replace(UCe,"")}var zCe=BCe,WCe=zCe,bI=Kl,qCe=_h,wI=NaN,HCe=/^[-+]0x[0-9a-f]+$/i,KCe=/^0b[01]+$/i,VCe=/^0o[0-7]+$/i,GCe=parseInt;function YCe(e){if(typeof e=="number")return e;if(qCe(e))return wI;if(bI(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=bI(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=WCe(e);var n=KCe.test(e);return n||VCe.test(e)?GCe(e.slice(2),n?2:8):HCe.test(e)?wI:+e}var Z8=YCe,XCe=Kl,Pj=MCe,jI=Z8,JCe="Expected a function",QCe=Math.max,ZCe=Math.min;function eAe(e,t,n){var r,a,s,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError(JCe);t=jI(t)||0,XCe(n)&&(d=!!n.leading,h="maxWait"in n,s=h?QCe(jI(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function m(j){var N=r,O=a;return r=a=void 0,u=j,o=e.apply(O,N),o}function g(j){return u=j,l=setTimeout(y,t),d?m(j):o}function v(j){var N=j-c,O=j-u,I=t-N;return h?ZCe(I,s-O):I}function x(j){var N=j-c,O=j-u;return c===void 0||N>=t||N<0||h&&O>=s}function y(){var j=Pj();if(x(j))return w(j);l=setTimeout(y,v(j))}function w(j){return l=void 0,f&&r?m(j):(r=a=void 0,o)}function b(){l!==void 0&&clearTimeout(l),u=0,r=c=a=l=void 0}function _(){return l===void 0?o:w(Pj())}function k(){var j=Pj(),N=x(j);if(r=arguments,a=this,c=j,N){if(l===void 0)return g(c);if(h)return clearTimeout(l),l=setTimeout(y,t),m(c)}return l===void 0&&(l=setTimeout(y,t)),o}return k.cancel=b,k.flush=_,k}var tAe=eAe,nAe=tAe,rAe=Kl,aAe="Expected a function";function iAe(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(aAe);return rAe(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),nAe(e,t,{leading:r,maxWait:t,trailing:a})}var sAe=iAe;const eW=vn(sAe);function Mm(e){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mm(e)}function _I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Gg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_I(Object(n),!0).forEach(function(r){oAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_I(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oAe(e,t,n){return t=lAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lAe(e){var t=cAe(e,"string");return Mm(t)=="symbol"?t:t+""}function cAe(e,t){if(Mm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uAe(e,t){return mAe(e)||fAe(e,t)||hAe(e,t)||dAe()}function dAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hAe(e,t){if(e){if(typeof e=="string")return kI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kI(e,t)}}function kI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function mAe(e){if(Array.isArray(e))return e}var pi=p.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,s=e.width,o=s===void 0?"100%":s,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,h=e.minHeight,f=e.maxHeight,m=e.children,g=e.debounce,v=g===void 0?0:g,x=e.id,y=e.className,w=e.onResize,b=e.style,_=b===void 0?{}:b,k=p.useRef(null),j=p.useRef();j.current=w,p.useImperativeHandle(t,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var N=p.useState({containerWidth:a.width,containerHeight:a.height}),O=uAe(N,2),I=O[0],P=O[1],S=p.useCallback(function(L,U){P(function(F){var M=Math.round(L),T=Math.round(U);return F.containerWidth===M&&F.containerHeight===T?F:{containerWidth:M,containerHeight:T}})},[]);p.useEffect(function(){var L=function($){var A,B=$[0].contentRect,R=B.width,C=B.height;S(R,C),(A=j.current)===null||A===void 0||A.call(j,R,C)};v>0&&(L=eW(L,v,{trailing:!0,leading:!1}));var U=new ResizeObserver(L),F=k.current.getBoundingClientRect(),M=F.width,T=F.height;return S(M,T),U.observe(k.current),function(){U.disconnect()}},[S,v]);var D=p.useMemo(function(){var L=I.containerWidth,U=I.containerHeight;if(L<0||U<0)return null;go(vc(o)||vc(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),go(!n||n>0,"The aspect(%s) must be greater than zero.",n);var F=vc(o)?L:o,M=vc(c)?U:c;n&&n>0&&(F?M=F/n:M&&(F=M*n),f&&M>f&&(M=f)),go(F>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,F,M,o,c,d,h,n);var T=!Array.isArray(m)&&po(m.type).endsWith("Chart");return V.Children.map(m,function(E){return V.isValidElement(E)?p.cloneElement(E,Gg({width:F,height:M},T?{style:Gg({height:"100%",width:"100%",maxHeight:M,maxWidth:F},E.props.style)}:{})):E})},[n,m,c,f,h,d,I,o]);return V.createElement("div",{id:x?"".concat(x):void 0,className:an("recharts-responsive-container",y),style:Gg(Gg({},_),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:k},D)}),tW=function(t){return null};tW.displayName="Cell";function Dm(e){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dm(e)}function SI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SI(Object(n),!0).forEach(function(r){pAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pAe(e,t,n){return t=gAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gAe(e){var t=vAe(e,"string");return Dm(t)=="symbol"?t:t+""}function vAe(e,t){if(Dm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Au={widthCache:{},cacheCount:0},yAe=2e3,xAe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},NI="recharts_measurement_span";function bAe(e){var t=vk({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Ff=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||jl.isSsr)return{width:0,height:0};var r=bAe(n),a=JSON.stringify({text:t,copyStyle:r});if(Au.widthCache[a])return Au.widthCache[a];try{var s=document.getElementById(NI);s||(s=document.createElement("span"),s.setAttribute("id",NI),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=vk(vk({},xAe),r);Object.assign(s.style,o),s.textContent="".concat(t);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return Au.widthCache[a]=c,++Au.cacheCount>yAe&&(Au.cacheCount=0,Au.widthCache={}),c}catch{return{width:0,height:0}}},wAe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}function qy(e,t){return SAe(e)||kAe(e,t)||_Ae(e,t)||jAe()}function jAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Ae(e,t){if(e){if(typeof e=="string")return CI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CI(e,t)}}function CI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function SAe(e){if(Array.isArray(e))return e}function NAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,AAe(r.key),r)}}function CAe(e,t,n){return t&&AI(e.prototype,t),n&&AI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function AAe(e){var t=EAe(e,"string");return Lm(t)=="symbol"?t:t+""}function EAe(e,t){if(Lm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var EI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TAe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,PAe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nW={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},OAe=Object.keys(nW),Qu="NaN";function IAe(e,t){return e*nW[t]}var Yg=function(){function e(t,n){NAe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!TAe.test(n)&&(this.num=NaN,this.unit=""),OAe.includes(n)&&(this.num=IAe(t,n),this.unit="px")}return CAe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=PAe.exec(n))!==null&&r!==void 0?r:[],s=qy(a,3),o=s[1],l=s[2];return new e(parseFloat(o),l??"")}}])}();function rW(e){if(e.includes(Qu))return Qu;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=EI.exec(t))!==null&&n!==void 0?n:[],a=qy(r,4),s=a[1],o=a[2],l=a[3],c=Yg.parse(s??""),u=Yg.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Qu;t=t.replace(EI,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,f=(h=TI.exec(t))!==null&&h!==void 0?h:[],m=qy(f,4),g=m[1],v=m[2],x=m[3],y=Yg.parse(g??""),w=Yg.parse(x??""),b=v==="+"?y.add(w):y.subtract(w);if(b.isNaN())return Qu;t=t.replace(TI,b.toString())}return t}var PI=/\(([^()]*)\)/;function RAe(e){for(var t=e;t.includes("(");){var n=PI.exec(t),r=qy(n,2),a=r[1];t=t.replace(PI,rW(a))}return t}function MAe(e){var t=e.replace(/\s+/g,"");return t=RAe(t),t=rW(t),t}function DAe(e){try{return MAe(e)}catch{return Qu}}function Oj(e){var t=DAe(e.slice(5,-1));return t===Qu?"":t}var LAe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],$Ae=["dx","dy","angle","className","breakAll"];function yk(){return yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yk.apply(this,arguments)}function OI(e,t){if(e==null)return{};var n=FAe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function FAe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function II(e,t){return WAe(e)||zAe(e,t)||BAe(e,t)||UAe()}function UAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BAe(e,t){if(e){if(typeof e=="string")return RI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RI(e,t)}}function RI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function WAe(e){if(Array.isArray(e))return e}var aW=/[ \f\n\r\t\v\u2028\u2029]+/,iW=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var s=[];hn(n)||(r?s=n.toString().split(""):s=n.toString().split(aW));var o=s.map(function(c){return{word:c,width:Ff(c,a).width}}),l=r?0:Ff("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},qAe=function(t,n,r,a,s){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=at(o),h=l,f=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return F.reduce(function(M,T){var E=T.word,$=T.width,A=M[M.length-1];if(A&&(a==null||s||A.width+$+r<Number(a)))A.words.push(E),A.width+=$+r;else{var B={words:[E],width:$};M.push(B)}return M},[])},m=f(n),g=function(F){return F.reduce(function(M,T){return M.width>T.width?M:T})};if(!d)return m;for(var v="",x=function(F){var M=h.slice(0,F),T=iW({breakAll:u,style:c,children:M+v}).wordsWithComputedWidth,E=f(T),$=E.length>o||g(E).width>Number(a);return[$,E]},y=0,w=h.length-1,b=0,_;y<=w&&b<=h.length-1;){var k=Math.floor((y+w)/2),j=k-1,N=x(j),O=II(N,2),I=O[0],P=O[1],S=x(k),D=II(S,1),L=D[0];if(!I&&!L&&(y=k+1),I&&L&&(w=k-1),!I&&L){_=P;break}b++}return _||m},MI=function(t){var n=hn(t)?[]:t.toString().split(aW);return[{words:n}]},HAe=function(t){var n=t.width,r=t.scaleToFit,a=t.children,s=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!jl.isSsr){var c,u,d=iW({breakAll:o,children:a,style:s});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;c=h,u=f}else return MI(a);return qAe({breakAll:o,children:a,maxLines:l,style:s},c,u,n,r)}return MI(a)},DI="#808080",Hy=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,h=d===void 0?!1:d,f=t.textAnchor,m=f===void 0?"start":f,g=t.verticalAnchor,v=g===void 0?"end":g,x=t.fill,y=x===void 0?DI:x,w=OI(t,LAe),b=p.useMemo(function(){return HAe({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:h,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,h,w.style,w.width]),_=w.dx,k=w.dy,j=w.angle,N=w.className,O=w.breakAll,I=OI(w,$Ae);if(!_r(r)||!_r(s))return null;var P=r+(at(_)?_:0),S=s+(at(k)?k:0),D;switch(v){case"start":D=Oj("calc(".concat(u,")"));break;case"middle":D=Oj("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:D=Oj("calc(".concat(b.length-1," * -").concat(l,")"));break}var L=[];if(h){var U=b[0].width,F=w.width;L.push("scale(".concat((at(F)?F/U:1)/U,")"))}return j&&L.push("rotate(".concat(j,", ").concat(P,", ").concat(S,")")),L.length&&(I.transform=L.join(" ")),V.createElement("text",yk({},dn(I,!0),{x:P,y:S,className:an("recharts-text",N),textAnchor:m,fill:y.includes("url")?DI:y}),b.map(function(M,T){var E=M.words.join(O?"":" ");return V.createElement("tspan",{x:P,dy:T===0?D:l,key:"".concat(E,"-").concat(T)},E)}))};function _l(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function KAe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wA(e){let t,n,r;e.length!==2?(t=_l,n=(l,c)=>_l(e(l),c),r=(l,c)=>e(l)-c):(t=e===_l||e===KAe?e:VAe,n=e,r=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=a(l,c,u,d-1);return h>u&&r(l[h-1],c)>-r(l[h],c)?h-1:h}return{left:a,center:o,right:s}}function VAe(){return 0}function sW(e){return e===null?NaN:+e}function*GAe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const YAe=wA(_l),Zp=YAe.right;wA(sW).center;class LI extends Map{constructor(t,n=QAe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get($I(this,t))}has(t){return super.has($I(this,t))}set(t,n){return super.set(XAe(this,t),n)}delete(t){return super.delete(JAe(this,t))}}function $I({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function XAe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function JAe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function QAe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ZAe(e=_l){if(e===_l)return oW;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function oW(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const eEe=Math.sqrt(50),tEe=Math.sqrt(10),nEe=Math.sqrt(2);function Ky(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),s=r/Math.pow(10,a),o=s>=eEe?10:s>=tEe?5:s>=nEe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?Ky(e,t,n*2):[l,c,u]}function xk(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,s,o]=r?Ky(t,e,n):Ky(e,t,n);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function bk(e,t,n){return t=+t,e=+e,n=+n,Ky(e,t,n)[2]}function wk(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?bk(t,e,n):bk(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function FI(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function UI(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function lW(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?oW:ZAe(a);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(t-u*h/c+f)),g=Math.min(r,Math.floor(t+(c-u)*h/c+f));lW(e,t,m,g,a)}const s=e[t];let o=n,l=r;for(rf(e,n,t),a(e[r],s)>0&&rf(e,n,r);o<l;){for(rf(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[n],s)===0?rf(e,n,l):(++l,rf(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function rf(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function rEe(e,t,n){if(e=Float64Array.from(GAe(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return UI(e);if(t>=1)return FI(e);var r,a=(r-1)*t,s=Math.floor(a),o=FI(lW(e,s).subarray(0,s+1)),l=UI(e.subarray(s+1));return o+(l-o)*(a-s)}}function aEe(e,t,n=sW){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,s=Math.floor(a),o=+n(e[s],s,e),l=+n(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function iEe(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(a);++r<a;)s[r]=e+r*n;return s}function Ri(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ro(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const jk=Symbol("implicit");function jA(){var e=new LI,t=[],n=[],r=jk;function a(s){let o=e.get(s);if(o===void 0){if(r!==jk)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new LI;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return jA(t,n).unknown(r)},Ri.apply(a,arguments),a}function $m(){var e=jA().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,s,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function h(){var f=t().length,m=a<r,g=m?a:r,v=m?r:a;s=(v-g)/Math.max(1,f-c+u*2),l&&(s=Math.floor(s)),g+=(v-g-s*(f-c))*d,o=s*(1-c),l&&(g=Math.round(g),o=Math.round(o));var x=iEe(f).map(function(y){return g+s*y});return n(m?x.reverse():x)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([r,a]=f,r=+r,a=+a,h()):[r,a]},e.rangeRound=function(f){return[r,a]=f,r=+r,a=+a,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(f){return arguments.length?(l=!!f,h()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},e.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},e.copy=function(){return $m(t(),[r,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ri.apply(h(),arguments)}function cW(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return cW(t())},e}function Uf(){return cW($m.apply(null,arguments).paddingInner(1))}function _A(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function uW(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function eg(){}var Fm=.7,Vy=1/Fm,md="\\s*([+-]?\\d+)\\s*",Um="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Is="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sEe=/^#([0-9a-f]{3,8})$/,oEe=new RegExp(`^rgb\\(${md},${md},${md}\\)$`),lEe=new RegExp(`^rgb\\(${Is},${Is},${Is}\\)$`),cEe=new RegExp(`^rgba\\(${md},${md},${md},${Um}\\)$`),uEe=new RegExp(`^rgba\\(${Is},${Is},${Is},${Um}\\)$`),dEe=new RegExp(`^hsl\\(${Um},${Is},${Is}\\)$`),hEe=new RegExp(`^hsla\\(${Um},${Is},${Is},${Um}\\)$`),BI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_A(eg,Bm,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zI,formatHex:zI,formatHex8:fEe,formatHsl:mEe,formatRgb:WI,toString:WI});function zI(){return this.rgb().formatHex()}function fEe(){return this.rgb().formatHex8()}function mEe(){return dW(this).formatHsl()}function WI(){return this.rgb().formatRgb()}function Bm(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sEe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?qI(t):n===3?new Ma(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Xg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Xg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oEe.exec(e))?new Ma(t[1],t[2],t[3],1):(t=lEe.exec(e))?new Ma(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cEe.exec(e))?Xg(t[1],t[2],t[3],t[4]):(t=uEe.exec(e))?Xg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dEe.exec(e))?VI(t[1],t[2]/100,t[3]/100,1):(t=hEe.exec(e))?VI(t[1],t[2]/100,t[3]/100,t[4]):BI.hasOwnProperty(e)?qI(BI[e]):e==="transparent"?new Ma(NaN,NaN,NaN,0):null}function qI(e){return new Ma(e>>16&255,e>>8&255,e&255,1)}function Xg(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ma(e,t,n,r)}function pEe(e){return e instanceof eg||(e=Bm(e)),e?(e=e.rgb(),new Ma(e.r,e.g,e.b,e.opacity)):new Ma}function _k(e,t,n,r){return arguments.length===1?pEe(e):new Ma(e,t,n,r??1)}function Ma(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}_A(Ma,_k,uW(eg,{brighter(e){return e=e==null?Vy:Math.pow(Vy,e),new Ma(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fm:Math.pow(Fm,e),new Ma(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ma(Tc(this.r),Tc(this.g),Tc(this.b),Gy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:HI,formatHex:HI,formatHex8:gEe,formatRgb:KI,toString:KI}));function HI(){return`#${yc(this.r)}${yc(this.g)}${yc(this.b)}`}function gEe(){return`#${yc(this.r)}${yc(this.g)}${yc(this.b)}${yc((isNaN(this.opacity)?1:this.opacity)*255)}`}function KI(){const e=Gy(this.opacity);return`${e===1?"rgb(":"rgba("}${Tc(this.r)}, ${Tc(this.g)}, ${Tc(this.b)}${e===1?")":`, ${e})`}`}function Gy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yc(e){return e=Tc(e),(e<16?"0":"")+e.toString(16)}function VI(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Xi(e,t,n,r)}function dW(e){if(e instanceof Xi)return new Xi(e.h,e.s,e.l,e.opacity);if(e instanceof eg||(e=Bm(e)),!e)return new Xi;if(e instanceof Xi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Xi(o,l,c,e.opacity)}function vEe(e,t,n,r){return arguments.length===1?dW(e):new Xi(e,t,n,r??1)}function Xi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}_A(Xi,vEe,uW(eg,{brighter(e){return e=e==null?Vy:Math.pow(Vy,e),new Xi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fm:Math.pow(Fm,e),new Xi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Ma(Ij(e>=240?e-240:e+120,a,r),Ij(e,a,r),Ij(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Xi(GI(this.h),Jg(this.s),Jg(this.l),Gy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gy(this.opacity);return`${e===1?"hsl(":"hsla("}${GI(this.h)}, ${Jg(this.s)*100}%, ${Jg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function GI(e){return e=(e||0)%360,e<0?e+360:e}function Jg(e){return Math.max(0,Math.min(1,e||0))}function Ij(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const kA=e=>()=>e;function yEe(e,t){return function(n){return e+n*t}}function xEe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function bEe(e){return(e=+e)==1?hW:function(t,n){return n-t?xEe(t,n,e):kA(isNaN(t)?n:t)}}function hW(e,t){var n=t-e;return n?yEe(e,n):kA(isNaN(e)?t:e)}const YI=function e(t){var n=bEe(t);function r(a,s){var o=n((a=_k(a)).r,(s=_k(s)).r),l=n(a.g,s.g),c=n(a.b,s.b),u=hW(a.opacity,s.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return r.gamma=e,r}(1);function wEe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(s){for(a=0;a<n;++a)r[a]=e[a]*(1-s)+t[a]*s;return r}}function jEe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _Ee(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)a[o]=Ph(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=a[o](l);return s}}function kEe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Yy(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function SEe(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Ph(e[a],t[a]):r[a]=t[a];return function(s){for(a in n)r[a]=n[a](s);return r}}var kk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rj=new RegExp(kk.source,"g");function NEe(e){return function(){return e}}function CEe(e){return function(t){return e(t)+""}}function AEe(e,t){var n=kk.lastIndex=Rj.lastIndex=0,r,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=kk.exec(e))&&(a=Rj.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Yy(r,a)})),n=Rj.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?CEe(c[0].x):NEe(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function Ph(e,t){var n=typeof t,r;return t==null||n==="boolean"?kA(t):(n==="number"?Yy:n==="string"?(r=Bm(t))?(t=r,YI):AEe:t instanceof Bm?YI:t instanceof Date?kEe:jEe(t)?wEe:Array.isArray(t)?_Ee:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?SEe:Yy)(e,t)}function SA(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function EEe(e,t){t===void 0&&(t=e,e=Ph);for(var n=0,r=t.length-1,a=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[l](o-l)}}function TEe(e){return function(){return e}}function Xy(e){return+e}var XI=[0,1];function ga(e){return e}function Sk(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:TEe(isNaN(t)?NaN:.5)}function PEe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function OEe(e,t,n){var r=e[0],a=e[1],s=t[0],o=t[1];return a<r?(r=Sk(a,r),s=n(o,s)):(r=Sk(r,a),s=n(s,o)),function(l){return s(r(l))}}function IEe(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=Sk(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(l){var c=Zp(e,l,1,r)-1;return s[c](a[c](l))}}function tg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function g0(){var e=XI,t=XI,n=Ph,r,a,s,o=ga,l,c,u;function d(){var f=Math.min(e.length,t.length);return o!==ga&&(o=PEe(e[0],e[f-1])),l=f>2?IEe:OEe,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?s:(c||(c=l(e.map(r),t,n)))(r(o(f)))}return h.invert=function(f){return o(a((u||(u=l(t,e.map(r),Yy)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Xy),d()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=SA,d()},h.clamp=function(f){return arguments.length?(o=f?!0:ga,d()):o!==ga},h.interpolate=function(f){return arguments.length?(n=f,d()):n},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,m){return r=f,a=m,d()}}function NA(){return g0()(ga,ga)}function REe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Jy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Vd(e){return e=Jy(Math.abs(e)),e?e[1]:NaN}function MEe(e,t){return function(n,r){for(var a=n.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(a-=l,a+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function DEe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var LEe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zm(e){if(!(t=LEe.exec(e)))throw new Error("invalid format: "+e);var t;return new CA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}zm.prototype=CA.prototype;function CA(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}CA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $Ee(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var fW;function FEe(e,t){var n=Jy(e,t);if(!n)return e+"";var r=n[0],a=n[1],s=a-(fW=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Jy(e,Math.max(0,t+s-1))[0]}function JI(e,t){var n=Jy(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const QI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:REe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>JI(e*100,t),r:JI,s:FEe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ZI(e){return e}var eR=Array.prototype.map,tR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function UEe(e){var t=e.grouping===void 0||e.thousands===void 0?ZI:MEe(eR.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?ZI:DEe(eR.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=zm(h);var f=h.fill,m=h.align,g=h.sign,v=h.symbol,x=h.zero,y=h.width,w=h.comma,b=h.precision,_=h.trim,k=h.type;k==="n"?(w=!0,k="g"):QI[k]||(b===void 0&&(b=12),_=!0,k="g"),(x||f==="0"&&m==="=")&&(x=!0,f="0",m="=");var j=v==="$"?n:v==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",N=v==="$"?r:/[%p]/.test(k)?o:"",O=QI[k],I=/[defgprs%]/.test(k);b=b===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function P(S){var D=j,L=N,U,F,M;if(k==="c")L=O(S)+L,S="";else{S=+S;var T=S<0||1/S<0;if(S=isNaN(S)?c:O(Math.abs(S),b),_&&(S=$Ee(S)),T&&+S==0&&g!=="+"&&(T=!1),D=(T?g==="("?g:l:g==="-"||g==="("?"":g)+D,L=(k==="s"?tR[8+fW/3]:"")+L+(T&&g==="("?")":""),I){for(U=-1,F=S.length;++U<F;)if(M=S.charCodeAt(U),48>M||M>57){L=(M===46?a+S.slice(U+1):S.slice(U))+L,S=S.slice(0,U);break}}}w&&!x&&(S=t(S,1/0));var E=D.length+S.length+L.length,$=E<y?new Array(y-E+1).join(f):"";switch(w&&x&&(S=t($+S,$.length?y-L.length:1/0),$=""),m){case"<":S=D+S+L+$;break;case"=":S=D+$+S+L;break;case"^":S=$.slice(0,E=$.length>>1)+D+S+L+$.slice(E);break;default:S=$+D+S+L;break}return s(S)}return P.toString=function(){return h+""},P}function d(h,f){var m=u((h=zm(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(Vd(f)/3)))*3,v=Math.pow(10,-g),x=tR[8+g/3];return function(y){return m(v*y)+x}}return{format:u,formatPrefix:d}}var Qg,AA,mW;BEe({thousands:",",grouping:[3],currency:["$",""]});function BEe(e){return Qg=UEe(e),AA=Qg.format,mW=Qg.formatPrefix,Qg}function zEe(e){return Math.max(0,-Vd(Math.abs(e)))}function WEe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vd(t)/3)))*3-Vd(Math.abs(e)))}function qEe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Vd(t)-Vd(e))+1}function pW(e,t,n,r){var a=wk(e,t,n),s;switch(r=zm(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=WEe(a,o))&&(r.precision=s),mW(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=qEe(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=zEe(a))&&(r.precision=s-(r.type==="%")*2);break}}return AA(r)}function Gl(e){var t=e.domain;return e.ticks=function(n){var r=t();return xk(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return pW(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,s=r.length-1,o=r[a],l=r[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);d-- >0;){if(u=bk(o,l,n),u===c)return r[a]=o,r[s]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Qy(){var e=NA();return e.copy=function(){return tg(e,Qy())},Ri.apply(e,arguments),Gl(e)}function gW(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Xy),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return gW(e).unknown(t)},e=arguments.length?Array.from(e,Xy):[0,1],Gl(n)}function vW(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],s=e[r],o;return s<a&&(o=n,n=r,r=o,o=a,a=s,s=o),e[n]=t.floor(a),e[r]=t.ceil(s),e}function nR(e){return Math.log(e)}function rR(e){return Math.exp(e)}function HEe(e){return-Math.log(-e)}function KEe(e){return-Math.exp(-e)}function VEe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function GEe(e){return e===10?VEe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function YEe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function aR(e){return(t,n)=>-e(-t,n)}function EA(e){const t=e(nR,rR),n=t.domain;let r=10,a,s;function o(){return a=YEe(r),s=GEe(r),n()[0]<0?(a=aR(a),s=aR(s),e(HEe,KEe)):e(nR,rR),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=a(u),m=a(d),g,v;const x=l==null?10:+l;let y=[];if(!(r%1)&&m-f<x){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(g=1;g<r;++g)if(v=f<0?g/s(-f):g*s(f),!(v<u)){if(v>d)break;y.push(v)}}else for(;f<=m;++f)for(g=r-1;g>=1;--g)if(v=f>0?g/s(-f):g*s(f),!(v<u)){if(v>d)break;y.push(v)}y.length*2<x&&(y=xk(u,d,x))}else y=xk(f,m,Math.min(m-f,x)).map(s);return h?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=zm(c)).precision==null&&(c.trim=!0),c=AA(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return d=>{let h=d/s(Math.round(a(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},t.nice=()=>n(vW(n(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function yW(){const e=EA(g0()).domain([1,10]);return e.copy=()=>tg(e,yW()).base(e.base()),Ri.apply(e,arguments),e}function iR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function sR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function TA(e){var t=1,n=e(iR(t),sR(t));return n.constant=function(r){return arguments.length?e(iR(t=+r),sR(t)):t},Gl(n)}function xW(){var e=TA(g0());return e.copy=function(){return tg(e,xW()).constant(e.constant())},Ri.apply(e,arguments)}function oR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function XEe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function JEe(e){return e<0?-e*e:e*e}function PA(e){var t=e(ga,ga),n=1;function r(){return n===1?e(ga,ga):n===.5?e(XEe,JEe):e(oR(n),oR(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Gl(t)}function OA(){var e=PA(g0());return e.copy=function(){return tg(e,OA()).exponent(e.exponent())},Ri.apply(e,arguments),e}function QEe(){return OA.apply(null,arguments).exponent(.5)}function lR(e){return Math.sign(e)*e*e}function ZEe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function bW(){var e=NA(),t=[0,1],n=!1,r;function a(s){var o=ZEe(e(s));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(s){return e.invert(lR(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,Xy)).map(lR)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(n=!!s,a):n},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return bW(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Ri.apply(a,arguments),Gl(a)}function wW(){var e=[],t=[],n=[],r;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=aEe(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Zp(n,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(_l),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return wW().domain(e).range(t).unknown(r)},Ri.apply(s,arguments)}function jW(){var e=0,t=1,n=1,r=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Zp(r,c,0,n)]:s}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return jW().domain([e,t]).range(a).unknown(s)},Ri.apply(Gl(o),arguments)}function _W(){var e=[.5],t=[0,1],n,r=1;function a(s){return s!=null&&s<=s?t[Zp(e,s,0,r)]:n}return a.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return _W().domain(e).range(t).unknown(n)},Ri.apply(a,arguments)}const Mj=new Date,Dj=new Date;function Sr(e,t,n,r){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>Sr(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),n&&(a.count=(s,o)=>(Mj.setTime(+s),Dj.setTime(+o),e(Mj),e(Dj),Math.floor(n(Mj,Dj))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(r?o=>r(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const Zy=Sr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Zy.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Sr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Zy);Zy.range;const oo=1e3,ki=oo*60,lo=ki*60,No=lo*24,IA=No*7,cR=No*30,Lj=No*365,xc=Sr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*oo)},(e,t)=>(t-e)/oo,e=>e.getUTCSeconds());xc.range;const RA=Sr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oo)},(e,t)=>{e.setTime(+e+t*ki)},(e,t)=>(t-e)/ki,e=>e.getMinutes());RA.range;const MA=Sr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ki)},(e,t)=>(t-e)/ki,e=>e.getUTCMinutes());MA.range;const DA=Sr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*oo-e.getMinutes()*ki)},(e,t)=>{e.setTime(+e+t*lo)},(e,t)=>(t-e)/lo,e=>e.getHours());DA.range;const LA=Sr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*lo)},(e,t)=>(t-e)/lo,e=>e.getUTCHours());LA.range;const ng=Sr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ki)/No,e=>e.getDate()-1);ng.range;const v0=Sr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/No,e=>e.getUTCDate()-1);v0.range;const kW=Sr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/No,e=>Math.floor(e/No));kW.range;function uu(e){return Sr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ki)/IA)}const y0=uu(0),ex=uu(1),eTe=uu(2),tTe=uu(3),Gd=uu(4),nTe=uu(5),rTe=uu(6);y0.range;ex.range;eTe.range;tTe.range;Gd.range;nTe.range;rTe.range;function du(e){return Sr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/IA)}const x0=du(0),tx=du(1),aTe=du(2),iTe=du(3),Yd=du(4),sTe=du(5),oTe=du(6);x0.range;tx.range;aTe.range;iTe.range;Yd.range;sTe.range;oTe.range;const $A=Sr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());$A.range;const FA=Sr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());FA.range;const Co=Sr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Co.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Co.range;const Ao=Sr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ao.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ao.range;function SW(e,t,n,r,a,s){const o=[[xc,1,oo],[xc,5,5*oo],[xc,15,15*oo],[xc,30,30*oo],[s,1,ki],[s,5,5*ki],[s,15,15*ki],[s,30,30*ki],[a,1,lo],[a,3,3*lo],[a,6,6*lo],[a,12,12*lo],[r,1,No],[r,2,2*No],[n,1,IA],[t,1,cR],[t,3,3*cR],[e,1,Lj]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),g=m?m.range(u,+d+1):[];return f?g.reverse():g}function c(u,d,h){const f=Math.abs(d-u)/h,m=wA(([,,x])=>x).right(o,f);if(m===o.length)return e.every(wk(u/Lj,d/Lj,h));if(m===0)return Zy.every(Math.max(wk(u,d,h),1));const[g,v]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return g.every(v)}return[l,c]}const[lTe,cTe]=SW(Ao,FA,x0,kW,LA,MA),[uTe,dTe]=SW(Co,$A,y0,ng,DA,RA);function $j(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Fj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function af(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function hTe(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=sf(a),d=of(a),h=sf(s),f=of(s),m=sf(o),g=of(o),v=sf(l),x=of(l),y=sf(c),w=of(c),b={a:T,A:E,b:$,B:A,c:null,d:pR,e:pR,f:MTe,g:HTe,G:VTe,H:OTe,I:ITe,j:RTe,L:NW,m:DTe,M:LTe,p:B,q:R,Q:yR,s:xR,S:$Te,u:FTe,U:UTe,V:BTe,w:zTe,W:WTe,x:null,X:null,y:qTe,Y:KTe,Z:GTe,"%":vR},_={a:C,A:W,b:Q,B:X,c:null,d:gR,e:gR,f:QTe,g:lPe,G:uPe,H:YTe,I:XTe,j:JTe,L:AW,m:ZTe,M:ePe,p:Z,q:te,Q:yR,s:xR,S:tPe,u:nPe,U:rPe,V:aPe,w:iPe,W:sPe,x:null,X:null,y:oPe,Y:cPe,Z:dPe,"%":vR},k={a:P,A:S,b:D,B:L,c:U,d:fR,e:fR,f:ATe,g:hR,G:dR,H:mR,I:mR,j:kTe,L:CTe,m:_Te,M:STe,p:I,q:jTe,Q:TTe,s:PTe,S:NTe,u:vTe,U:yTe,V:xTe,w:gTe,W:bTe,x:F,X:M,y:hR,Y:dR,Z:wTe,"%":ETe};b.x=j(n,b),b.X=j(r,b),b.c=j(t,b),_.x=j(n,_),_.X=j(r,_),_.c=j(t,_);function j(J,ie){return function(ge){var ae=[],Re=-1,me=0,K=J.length,de,$e,nt;for(ge instanceof Date||(ge=new Date(+ge));++Re<K;)J.charCodeAt(Re)===37&&(ae.push(J.slice(me,Re)),($e=uR[de=J.charAt(++Re)])!=null?de=J.charAt(++Re):$e=de==="e"?" ":"0",(nt=ie[de])&&(de=nt(ge,$e)),ae.push(de),me=Re+1);return ae.push(J.slice(me,Re)),ae.join("")}}function N(J,ie){return function(ge){var ae=af(1900,void 0,1),Re=O(ae,J,ge+="",0),me,K;if(Re!=ge.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(ie&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(me=Fj(af(ae.y,0,1)),K=me.getUTCDay(),me=K>4||K===0?tx.ceil(me):tx(me),me=v0.offset(me,(ae.V-1)*7),ae.y=me.getUTCFullYear(),ae.m=me.getUTCMonth(),ae.d=me.getUTCDate()+(ae.w+6)%7):(me=$j(af(ae.y,0,1)),K=me.getDay(),me=K>4||K===0?ex.ceil(me):ex(me),me=ng.offset(me,(ae.V-1)*7),ae.y=me.getFullYear(),ae.m=me.getMonth(),ae.d=me.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),K="Z"in ae?Fj(af(ae.y,0,1)).getUTCDay():$j(af(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(K+5)%7:ae.w+ae.U*7-(K+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,Fj(ae)):$j(ae)}}function O(J,ie,ge,ae){for(var Re=0,me=ie.length,K=ge.length,de,$e;Re<me;){if(ae>=K)return-1;if(de=ie.charCodeAt(Re++),de===37){if(de=ie.charAt(Re++),$e=k[de in uR?ie.charAt(Re++):de],!$e||(ae=$e(J,ge,ae))<0)return-1}else if(de!=ge.charCodeAt(ae++))return-1}return ae}function I(J,ie,ge){var ae=u.exec(ie.slice(ge));return ae?(J.p=d.get(ae[0].toLowerCase()),ge+ae[0].length):-1}function P(J,ie,ge){var ae=m.exec(ie.slice(ge));return ae?(J.w=g.get(ae[0].toLowerCase()),ge+ae[0].length):-1}function S(J,ie,ge){var ae=h.exec(ie.slice(ge));return ae?(J.w=f.get(ae[0].toLowerCase()),ge+ae[0].length):-1}function D(J,ie,ge){var ae=y.exec(ie.slice(ge));return ae?(J.m=w.get(ae[0].toLowerCase()),ge+ae[0].length):-1}function L(J,ie,ge){var ae=v.exec(ie.slice(ge));return ae?(J.m=x.get(ae[0].toLowerCase()),ge+ae[0].length):-1}function U(J,ie,ge){return O(J,t,ie,ge)}function F(J,ie,ge){return O(J,n,ie,ge)}function M(J,ie,ge){return O(J,r,ie,ge)}function T(J){return o[J.getDay()]}function E(J){return s[J.getDay()]}function $(J){return c[J.getMonth()]}function A(J){return l[J.getMonth()]}function B(J){return a[+(J.getHours()>=12)]}function R(J){return 1+~~(J.getMonth()/3)}function C(J){return o[J.getUTCDay()]}function W(J){return s[J.getUTCDay()]}function Q(J){return c[J.getUTCMonth()]}function X(J){return l[J.getUTCMonth()]}function Z(J){return a[+(J.getUTCHours()>=12)]}function te(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var ie=j(J+="",b);return ie.toString=function(){return J},ie},parse:function(J){var ie=N(J+="",!1);return ie.toString=function(){return J},ie},utcFormat:function(J){var ie=j(J+="",_);return ie.toString=function(){return J},ie},utcParse:function(J){var ie=N(J+="",!0);return ie.toString=function(){return J},ie}}}var uR={"-":"",_:" ",0:"0"},Rr=/^\s*\d+/,fTe=/^%/,mTe=/[\\^$*+?|[\]().{}]/g;function on(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",s=a.length;return r+(s<n?new Array(n-s+1).join(t)+a:a)}function pTe(e){return e.replace(mTe,"\\$&")}function sf(e){return new RegExp("^(?:"+e.map(pTe).join("|")+")","i")}function of(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function gTe(e,t,n){var r=Rr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function vTe(e,t,n){var r=Rr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function yTe(e,t,n){var r=Rr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function xTe(e,t,n){var r=Rr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function bTe(e,t,n){var r=Rr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function dR(e,t,n){var r=Rr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function hR(e,t,n){var r=Rr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function wTe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jTe(e,t,n){var r=Rr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function _Te(e,t,n){var r=Rr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function fR(e,t,n){var r=Rr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function kTe(e,t,n){var r=Rr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function mR(e,t,n){var r=Rr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function STe(e,t,n){var r=Rr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function NTe(e,t,n){var r=Rr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function CTe(e,t,n){var r=Rr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ATe(e,t,n){var r=Rr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ETe(e,t,n){var r=fTe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function TTe(e,t,n){var r=Rr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function PTe(e,t,n){var r=Rr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function pR(e,t){return on(e.getDate(),t,2)}function OTe(e,t){return on(e.getHours(),t,2)}function ITe(e,t){return on(e.getHours()%12||12,t,2)}function RTe(e,t){return on(1+ng.count(Co(e),e),t,3)}function NW(e,t){return on(e.getMilliseconds(),t,3)}function MTe(e,t){return NW(e,t)+"000"}function DTe(e,t){return on(e.getMonth()+1,t,2)}function LTe(e,t){return on(e.getMinutes(),t,2)}function $Te(e,t){return on(e.getSeconds(),t,2)}function FTe(e){var t=e.getDay();return t===0?7:t}function UTe(e,t){return on(y0.count(Co(e)-1,e),t,2)}function CW(e){var t=e.getDay();return t>=4||t===0?Gd(e):Gd.ceil(e)}function BTe(e,t){return e=CW(e),on(Gd.count(Co(e),e)+(Co(e).getDay()===4),t,2)}function zTe(e){return e.getDay()}function WTe(e,t){return on(ex.count(Co(e)-1,e),t,2)}function qTe(e,t){return on(e.getFullYear()%100,t,2)}function HTe(e,t){return e=CW(e),on(e.getFullYear()%100,t,2)}function KTe(e,t){return on(e.getFullYear()%1e4,t,4)}function VTe(e,t){var n=e.getDay();return e=n>=4||n===0?Gd(e):Gd.ceil(e),on(e.getFullYear()%1e4,t,4)}function GTe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+on(t/60|0,"0",2)+on(t%60,"0",2)}function gR(e,t){return on(e.getUTCDate(),t,2)}function YTe(e,t){return on(e.getUTCHours(),t,2)}function XTe(e,t){return on(e.getUTCHours()%12||12,t,2)}function JTe(e,t){return on(1+v0.count(Ao(e),e),t,3)}function AW(e,t){return on(e.getUTCMilliseconds(),t,3)}function QTe(e,t){return AW(e,t)+"000"}function ZTe(e,t){return on(e.getUTCMonth()+1,t,2)}function ePe(e,t){return on(e.getUTCMinutes(),t,2)}function tPe(e,t){return on(e.getUTCSeconds(),t,2)}function nPe(e){var t=e.getUTCDay();return t===0?7:t}function rPe(e,t){return on(x0.count(Ao(e)-1,e),t,2)}function EW(e){var t=e.getUTCDay();return t>=4||t===0?Yd(e):Yd.ceil(e)}function aPe(e,t){return e=EW(e),on(Yd.count(Ao(e),e)+(Ao(e).getUTCDay()===4),t,2)}function iPe(e){return e.getUTCDay()}function sPe(e,t){return on(tx.count(Ao(e)-1,e),t,2)}function oPe(e,t){return on(e.getUTCFullYear()%100,t,2)}function lPe(e,t){return e=EW(e),on(e.getUTCFullYear()%100,t,2)}function cPe(e,t){return on(e.getUTCFullYear()%1e4,t,4)}function uPe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Yd(e):Yd.ceil(e),on(e.getUTCFullYear()%1e4,t,4)}function dPe(){return"+0000"}function vR(){return"%"}function yR(e){return+e}function xR(e){return Math.floor(+e/1e3)}var Eu,TW,PW;hPe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hPe(e){return Eu=hTe(e),TW=Eu.format,Eu.parse,PW=Eu.utcFormat,Eu.utcParse,Eu}function fPe(e){return new Date(e)}function mPe(e){return e instanceof Date?+e:+new Date(+e)}function UA(e,t,n,r,a,s,o,l,c,u){var d=NA(),h=d.invert,f=d.domain,m=u(".%L"),g=u(":%S"),v=u("%I:%M"),x=u("%I %p"),y=u("%a %d"),w=u("%b %d"),b=u("%B"),_=u("%Y");function k(j){return(c(j)<j?m:l(j)<j?g:o(j)<j?v:s(j)<j?x:r(j)<j?a(j)<j?y:w:n(j)<j?b:_)(j)}return d.invert=function(j){return new Date(h(j))},d.domain=function(j){return arguments.length?f(Array.from(j,mPe)):f().map(fPe)},d.ticks=function(j){var N=f();return e(N[0],N[N.length-1],j??10)},d.tickFormat=function(j,N){return N==null?k:u(N)},d.nice=function(j){var N=f();return(!j||typeof j.range!="function")&&(j=t(N[0],N[N.length-1],j??10)),j?f(vW(N,j)):d},d.copy=function(){return tg(d,UA(e,t,n,r,a,s,o,l,c,u))},d}function pPe(){return Ri.apply(UA(uTe,dTe,Co,$A,y0,ng,DA,RA,xc,TW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gPe(){return Ri.apply(UA(lTe,cTe,Ao,FA,x0,v0,LA,MA,xc,PW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function b0(){var e=0,t=1,n,r,a,s,o=ga,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(s(h)-n)*a,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,n=s(e=+e),r=s(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var m,g;return arguments.length?([m,g]=f,o=h(m,g),u):[o(0),o(1)]}}return u.range=d(Ph),u.rangeRound=d(SA),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return s=h,n=h(e),r=h(t),a=n===r?0:1/(r-n),u}}function Yl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function OW(){var e=Gl(b0()(ga));return e.copy=function(){return Yl(e,OW())},Ro.apply(e,arguments)}function IW(){var e=EA(b0()).domain([1,10]);return e.copy=function(){return Yl(e,IW()).base(e.base())},Ro.apply(e,arguments)}function RW(){var e=TA(b0());return e.copy=function(){return Yl(e,RW()).constant(e.constant())},Ro.apply(e,arguments)}function BA(){var e=PA(b0());return e.copy=function(){return Yl(e,BA()).exponent(e.exponent())},Ro.apply(e,arguments)}function vPe(){return BA.apply(null,arguments).exponent(.5)}function MW(){var e=[],t=ga;function n(r){if(r!=null&&!isNaN(r=+r))return t((Zp(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(_l),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,s)=>rEe(e,s/r))},n.copy=function(){return MW(t).domain(e)},Ro.apply(n,arguments)}function w0(){var e=0,t=.5,n=1,r=1,a,s,o,l,c,u=ga,d,h=!1,f;function m(v){return isNaN(v=+v)?f:(v=.5+((v=+d(v))-s)*(r*v<r*s?l:c),u(h?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,n]=v,a=d(e=+e),s=d(t=+t),o=d(n=+n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,m):[e,t,n]},m.clamp=function(v){return arguments.length?(h=!!v,m):h},m.interpolator=function(v){return arguments.length?(u=v,m):u};function g(v){return function(x){var y,w,b;return arguments.length?([y,w,b]=x,u=EEe(v,[y,w,b]),m):[u(0),u(.5),u(1)]}}return m.range=g(Ph),m.rangeRound=g(SA),m.unknown=function(v){return arguments.length?(f=v,m):f},function(v){return d=v,a=v(e),s=v(t),o=v(n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,m}}function DW(){var e=Gl(w0()(ga));return e.copy=function(){return Yl(e,DW())},Ro.apply(e,arguments)}function LW(){var e=EA(w0()).domain([.1,1,10]);return e.copy=function(){return Yl(e,LW()).base(e.base())},Ro.apply(e,arguments)}function $W(){var e=TA(w0());return e.copy=function(){return Yl(e,$W()).constant(e.constant())},Ro.apply(e,arguments)}function zA(){var e=PA(w0());return e.copy=function(){return Yl(e,zA()).exponent(e.exponent())},Ro.apply(e,arguments)}function yPe(){return zA.apply(null,arguments).exponent(.5)}const bR=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:$m,scaleDiverging:DW,scaleDivergingLog:LW,scaleDivergingPow:zA,scaleDivergingSqrt:yPe,scaleDivergingSymlog:$W,scaleIdentity:gW,scaleImplicit:jk,scaleLinear:Qy,scaleLog:yW,scaleOrdinal:jA,scalePoint:Uf,scalePow:OA,scaleQuantile:wW,scaleQuantize:jW,scaleRadial:bW,scaleSequential:OW,scaleSequentialLog:IW,scaleSequentialPow:BA,scaleSequentialQuantile:MW,scaleSequentialSqrt:vPe,scaleSequentialSymlog:RW,scaleSqrt:QEe,scaleSymlog:xW,scaleThreshold:_W,scaleTime:pPe,scaleUtc:gPe,tickFormat:pW},Symbol.toStringTag,{value:"Module"}));var xPe=_h;function bPe(e,t,n){for(var r=-1,a=e.length;++r<a;){var s=e[r],o=t(s);if(o!=null&&(l===void 0?o===o&&!xPe(o):n(o,l)))var l=o,c=s}return c}var FW=bPe;function wPe(e,t){return e>t}var jPe=wPe,_Pe=FW,kPe=jPe,SPe=Th;function NPe(e){return e&&e.length?_Pe(e,SPe,kPe):void 0}var CPe=NPe;const j0=vn(CPe);function APe(e,t){return e<t}var EPe=APe,TPe=FW,PPe=EPe,OPe=Th;function IPe(e){return e&&e.length?TPe(e,OPe,PPe):void 0}var RPe=IPe;const _0=vn(RPe);var MPe=nA,DPe=Vl,LPe=V8,$Pe=Wa;function FPe(e,t){var n=$Pe(e)?MPe:LPe;return n(e,DPe(t))}var UPe=FPe,BPe=H8,zPe=UPe;function WPe(e,t){return BPe(zPe(e,t),1)}var qPe=WPe;const HPe=vn(qPe);var KPe=vA;function VPe(e,t){return KPe(e,t)}var GPe=VPe;const WA=vn(GPe);var Oh=1e9,YPe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},HA,zn=!0,Pi="[DecimalError] ",Pc=Pi+"Invalid argument: ",qA=Pi+"Exponent out of range: ",Ih=Math.floor,lc=Math.pow,XPe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Za,Ar=1e7,$n=7,UW=9007199254740991,nx=Ih(UW/$n),xt={};xt.absoluteValue=xt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};xt.comparedTo=xt.cmp=function(e){var t,n,r,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===a?0:r>a^s.s<0?1:-1};xt.decimalPlaces=xt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*$n;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};xt.dividedBy=xt.div=function(e){return vo(this,new this.constructor(e))};xt.dividedToIntegerBy=xt.idiv=function(e){var t=this,n=t.constructor;return Nn(vo(t,new n(e),0,1),n.precision)};xt.equals=xt.eq=function(e){return!this.cmp(e)};xt.exponent=function(){return pr(this)};xt.greaterThan=xt.gt=function(e){return this.cmp(e)>0};xt.greaterThanOrEqualTo=xt.gte=function(e){return this.cmp(e)>=0};xt.isInteger=xt.isint=function(){return this.e>this.d.length-2};xt.isNegative=xt.isneg=function(){return this.s<0};xt.isPositive=xt.ispos=function(){return this.s>0};xt.isZero=function(){return this.s===0};xt.lessThan=xt.lt=function(e){return this.cmp(e)<0};xt.lessThanOrEqualTo=xt.lte=function(e){return this.cmp(e)<1};xt.logarithm=xt.log=function(e){var t,n=this,r=n.constructor,a=r.precision,s=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Za))throw Error(Pi+"NaN");if(n.s<1)throw Error(Pi+(n.s?"NaN":"-Infinity"));return n.eq(Za)?new r(0):(zn=!1,t=vo(Wm(n,s),Wm(e,s),s),zn=!0,Nn(t,a))};xt.minus=xt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?WW(t,e):BW(t,(e.s=-e.s,e))};xt.modulo=xt.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(Pi+"NaN");return n.s?(zn=!1,t=vo(n,e,0,1).times(e),zn=!0,n.minus(t)):Nn(new r(n),a)};xt.naturalExponential=xt.exp=function(){return zW(this)};xt.naturalLogarithm=xt.ln=function(){return Wm(this)};xt.negated=xt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};xt.plus=xt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?BW(t,e):WW(t,(e.s=-e.s,e))};xt.precision=xt.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Pc+e);if(t=pr(a)+1,r=a.d.length-1,n=r*$n+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};xt.squareRoot=xt.sqrt=function(){var e,t,n,r,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Pi+"NaN")}for(e=pr(l),zn=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=As(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Ih((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(s=r,r=s.plus(vo(l,s,o+2)).times(.5),As(s.d).slice(0,o)===(t=As(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Nn(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(t!="9999")break;o+=4}return zn=!0,Nn(r,n)};xt.times=xt.mul=function(e){var t,n,r,a,s,o,l,c,u,d=this,h=d.constructor,f=d.d,m=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,c=f.length,u=m.length,c<u&&(s=f,f=m,m=s,o=c,c=u,u=o),s=[],o=c+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=s[a]+m[r]*f[a-r-1]+t,s[a--]=l%Ar|0,t=l/Ar|0;s[a]=(s[a]+t)%Ar|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,zn?Nn(e,h.precision):e};xt.toDecimalPlaces=xt.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:($s(e,0,Oh),t===void 0?t=r.rounding:$s(t,0,8),Nn(n,e+pr(n)+1,t))};xt.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=Xc(r,!0):($s(e,0,Oh),t===void 0?t=a.rounding:$s(t,0,8),r=Nn(new a(r),e+1,t),n=Xc(r,!0,e+1)),n};xt.toFixed=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?Xc(a):($s(e,0,Oh),t===void 0?t=s.rounding:$s(t,0,8),r=Nn(new s(a),e+pr(a)+1,t),n=Xc(r.abs(),!1,e+pr(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};xt.toInteger=xt.toint=function(){var e=this,t=e.constructor;return Nn(new t(e),pr(e)+1,t.rounding)};xt.toNumber=function(){return+this};xt.toPower=xt.pow=function(e){var t,n,r,a,s,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Za);if(l=new c(l),!l.s){if(e.s<1)throw Error(Pi+"Infinity");return l}if(l.eq(Za))return l;if(r=c.precision,e.eq(Za))return Nn(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,s=l.s,o){if((n=d<0?-d:d)<=UW){for(a=new c(Za),t=Math.ceil(r/$n+4),zn=!1;n%2&&(a=a.times(l),jR(a.d,t)),n=Ih(n/2),n!==0;)l=l.times(l),jR(l.d,t);return zn=!0,e.s<0?new c(Za).div(a):Nn(a,r)}}else if(s<0)throw Error(Pi+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,zn=!1,a=e.times(Wm(l,r+u)),zn=!0,a=zW(a),a.s=s,a};xt.toPrecision=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?(n=pr(a),r=Xc(a,n<=s.toExpNeg||n>=s.toExpPos)):($s(e,1,Oh),t===void 0?t=s.rounding:$s(t,0,8),a=Nn(new s(a),e,t),n=pr(a),r=Xc(a,e<=n||n<=s.toExpNeg,e)),r};xt.toSignificantDigits=xt.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):($s(e,1,Oh),t===void 0?t=r.rounding:$s(t,0,8)),Nn(new r(n),e,t)};xt.toString=xt.valueOf=xt.val=xt.toJSON=xt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=pr(e),n=e.constructor;return Xc(e,t<=n.toExpNeg||t>=n.toExpPos)};function BW(e,t){var n,r,a,s,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),zn?Nn(t,h):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(r=c,s=-s,l=u.length):(r=u,a=o,l=c.length),o=Math.ceil(h/$n),l=o>l?o+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/Ar|0,c[s]%=Ar;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,zn?Nn(t,h):t}function $s(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Pc+e)}function As(e){var t,n,r,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)r=e[t]+"",n=$n-r.length,n&&(s+=Xo(n)),s+=r;o=e[t],r=o+"",n=$n-r.length,n&&(s+=Xo(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var vo=function(){function e(r,a){var s,o=0,l=r.length;for(r=r.slice();l--;)s=r[l]*a+o,r[l]=s%Ar|0,o=s/Ar|0;return o&&r.unshift(o),r}function t(r,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(r[l]!=a[l]){c=r[l]>a[l]?1:-1;break}return c}function n(r,a,s){for(var o=0;s--;)r[s]-=o,o=r[s]<a[s]?1:0,r[s]=o*Ar+r[s]-a[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,s,o){var l,c,u,d,h,f,m,g,v,x,y,w,b,_,k,j,N,O,I=r.constructor,P=r.s==a.s?1:-1,S=r.d,D=a.d;if(!r.s)return new I(r);if(!a.s)throw Error(Pi+"Division by zero");for(c=r.e-a.e,N=D.length,k=S.length,m=new I(P),g=m.d=[],u=0;D[u]==(S[u]||0);)++u;if(D[u]>(S[u]||0)&&--c,s==null?w=s=I.precision:o?w=s+(pr(r)-pr(a))+1:w=s,w<0)return new I(0);if(w=w/$n+2|0,u=0,N==1)for(d=0,D=D[0],w++;(u<k||d)&&w--;u++)b=d*Ar+(S[u]||0),g[u]=b/D|0,d=b%D|0;else{for(d=Ar/(D[0]+1)|0,d>1&&(D=e(D,d),S=e(S,d),N=D.length,k=S.length),_=N,v=S.slice(0,N),x=v.length;x<N;)v[x++]=0;O=D.slice(),O.unshift(0),j=D[0],D[1]>=Ar/2&&++j;do d=0,l=t(D,v,N,x),l<0?(y=v[0],N!=x&&(y=y*Ar+(v[1]||0)),d=y/j|0,d>1?(d>=Ar&&(d=Ar-1),h=e(D,d),f=h.length,x=v.length,l=t(h,v,f,x),l==1&&(d--,n(h,N<f?O:D,f))):(d==0&&(l=d=1),h=D.slice()),f=h.length,f<x&&h.unshift(0),n(v,h,x),l==-1&&(x=v.length,l=t(D,v,N,x),l<1&&(d++,n(v,N<x?O:D,x))),x=v.length):l===0&&(d++,v=[0]),g[u++]=d,l&&v[0]?v[x++]=S[_]||0:(v=[S[_]],x=1);while((_++<k||v[0]!==void 0)&&w--)}return g[0]||g.shift(),m.e=c,Nn(m,o?s+pr(m)+1:s)}}();function zW(e,t){var n,r,a,s,o,l,c=0,u=0,d=e.constructor,h=d.precision;if(pr(e)>16)throw Error(qA+pr(e));if(!e.s)return new d(Za);for(t==null?(zn=!1,l=h):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(lc(2,u))/Math.LN10*2+5|0,l+=r,n=a=s=new d(Za),d.precision=l;;){if(a=Nn(a.times(e),l),n=n.times(++c),o=s.plus(vo(a,n,l)),As(o.d).slice(0,l)===As(s.d).slice(0,l)){for(;u--;)s=Nn(s.times(s),l);return d.precision=h,t==null?(zn=!0,Nn(s,h)):s}s=o}}function pr(e){for(var t=e.e*$n,n=e.d[0];n>=10;n/=10)t++;return t}function Uj(e,t,n){if(t>e.LN10.sd())throw zn=!0,n&&(e.precision=n),Error(Pi+"LN10 precision limit exceeded");return Nn(new e(e.LN10),t)}function Xo(e){for(var t="";e--;)t+="0";return t}function Wm(e,t){var n,r,a,s,o,l,c,u,d,h=1,f=10,m=e,g=m.d,v=m.constructor,x=v.precision;if(m.s<1)throw Error(Pi+(m.s?"NaN":"-Infinity"));if(m.eq(Za))return new v(0);if(t==null?(zn=!1,u=x):u=t,m.eq(10))return t==null&&(zn=!0),Uj(v,u);if(u+=f,v.precision=u,n=As(g),r=n.charAt(0),s=pr(m),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=As(m.d),r=n.charAt(0),h++;s=pr(m),r>1?(m=new v("0."+n),s++):m=new v(r+"."+n.slice(1))}else return c=Uj(v,u+2,x).times(s+""),m=Wm(new v(r+"."+n.slice(1)),u-f).plus(c),v.precision=x,t==null?(zn=!0,Nn(m,x)):m;for(l=o=m=vo(m.minus(Za),m.plus(Za),u),d=Nn(m.times(m),u),a=3;;){if(o=Nn(o.times(d),u),c=l.plus(vo(o,new v(a),u)),As(c.d).slice(0,u)===As(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(Uj(v,u+2,x).times(s+""))),l=vo(l,new v(h),u),v.precision=x,t==null?(zn=!0,Nn(l,x)):l;l=c,a+=2}}function wR(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=Ih(n/$n),e.d=[],r=(n+1)%$n,n<0&&(r+=$n),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=$n;r<a;)e.d.push(+t.slice(r,r+=$n));t=t.slice(r),r=$n-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),zn&&(e.e>nx||e.e<-nx))throw Error(qA+n)}else e.s=0,e.e=0,e.d=[0];return e}function Nn(e,t,n){var r,a,s,o,l,c,u,d,h=e.d;for(o=1,s=h[0];s>=10;s/=10)o++;if(r=t-o,r<0)r+=$n,a=t,u=h[d=0];else{if(d=Math.ceil((r+1)/$n),s=h.length,d>=s)return e;for(u=s=h[d],o=1;s>=10;s/=10)o++;r%=$n,a=r-$n+o}if(n!==void 0&&(s=lc(10,o-a-1),l=u/s%10|0,c=t<0||h[d+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?a>0?u/lc(10,o-a):0:h[d-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(s=pr(e),h.length=1,t=t-s-1,h[0]=lc(10,($n-t%$n)%$n),e.e=Ih(-t/$n)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(r==0?(h.length=d,s=1,d--):(h.length=d+1,s=lc(10,$n-r),h[d]=a>0?(u/lc(10,o-a)%lc(10,a)|0)*s:0),c)for(;;)if(d==0){(h[0]+=s)==Ar&&(h[0]=1,++e.e);break}else{if(h[d]+=s,h[d]!=Ar)break;h[d--]=0,s=1}for(r=h.length;h[--r]===0;)h.pop();if(zn&&(e.e>nx||e.e<-nx))throw Error(qA+pr(e));return e}function WW(e,t){var n,r,a,s,o,l,c,u,d,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),zn?Nn(t,m):t;if(c=e.d,h=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=h.length):(n=h,r=u,l=c.length),a=Math.max(Math.ceil(m/$n),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=h.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}o=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(s=a;s&&c[--s]===0;)c[s]=Ar-1;--c[s],c[a]+=Ar}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,zn?Nn(t,m):t):new f(0)}function Xc(e,t,n){var r,a=pr(e),s=As(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Xo(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Xo(-a-1)+s,n&&(r=n-o)>0&&(s+=Xo(r))):a>=o?(s+=Xo(a+1-o),n&&(r=n-a-1)>0&&(s=s+"."+Xo(r))):((r=a+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(s+="."),s+=Xo(r))),e.s<0?"-"+s:s}function jR(e,t){if(e.length>t)return e.length=t,!0}function qW(e){var t,n,r;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Pc+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return wR(o,s.toString())}else if(typeof s!="string")throw Error(Pc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,XPe.test(s))wR(o,s);else throw Error(Pc+s)}if(a.prototype=xt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=qW,a.config=a.set=JPe,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function JPe(e){if(!e||typeof e!="object")throw Error(Pi+"Object expected");var t,n,r,a=["precision",1,Oh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(Ih(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(Pc+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Pc+n+": "+r);return this}var HA=qW(YPe);Za=new HA(1);const kn=HA;function QPe(e){return n2e(e)||t2e(e)||e2e(e)||ZPe()}function ZPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e2e(e,t){if(e){if(typeof e=="string")return Nk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nk(e,t)}}function t2e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function n2e(e){if(Array.isArray(e))return Nk(e)}function Nk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var r2e=function(t){return t},HW={"@@functional/placeholder":!0},KW=function(t){return t===HW},_R=function(t){return function n(){return arguments.length===0||arguments.length===1&&KW(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},a2e=function e(t,n){return t===1?n:_R(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var o=a.filter(function(l){return l!==HW}).length;return o>=t?n.apply(void 0,a):e(t-o,_R(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(h){return KW(h)?c.shift():h});return n.apply(void 0,QPe(d).concat(c))}))})},k0=function(t){return a2e(t.length,t)},Ck=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},i2e=k0(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),s2e=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return r2e;var a=n.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},Ak=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},VW=function(t){var n=null,r=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,r=t.apply(void 0,s)),r}};function o2e(e){var t;return e===0?t=1:t=Math.floor(new kn(e).abs().log(10).toNumber())+1,t}function l2e(e,t,n){for(var r=new kn(e),a=0,s=[];r.lt(t)&&a<1e5;)s.push(r.toNumber()),r=r.add(n),a++;return s}var c2e=k0(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),u2e=k0(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),d2e=k0(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const S0={rangeStep:l2e,getDigitCount:o2e,interpolateNumber:c2e,uninterpolateNumber:u2e,uninterpolateTruncation:d2e};function Ek(e){return m2e(e)||f2e(e)||GW(e)||h2e()}function h2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f2e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function m2e(e){if(Array.isArray(e))return Tk(e)}function qm(e,t){return v2e(e)||g2e(e,t)||GW(e,t)||p2e()}function p2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GW(e,t){if(e){if(typeof e=="string")return Tk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tk(e,t)}}function Tk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g2e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,s=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,s=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw s}}return n}}function v2e(e){if(Array.isArray(e))return e}function YW(e){var t=qm(e,2),n=t[0],r=t[1],a=n,s=r;return n>r&&(a=r,s=n),[a,s]}function XW(e,t,n){if(e.lte(0))return new kn(0);var r=S0.getDigitCount(e.toNumber()),a=new kn(10).pow(r),s=e.div(a),o=r!==1?.05:.1,l=new kn(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new kn(Math.ceil(c))}function y2e(e,t,n){var r=1,a=new kn(e);if(!a.isint()&&n){var s=Math.abs(e);s<1?(r=new kn(10).pow(S0.getDigitCount(e)-1),a=new kn(Math.floor(a.div(r).toNumber())).mul(r)):s>1&&(a=new kn(Math.floor(e)))}else e===0?a=new kn(Math.floor((t-1)/2)):n||(a=new kn(Math.floor(e)));var o=Math.floor((t-1)/2),l=s2e(i2e(function(c){return a.add(new kn(c-o).mul(r)).toNumber()}),Ck);return l(0,t)}function JW(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new kn(0),tickMin:new kn(0),tickMax:new kn(0)};var s=XW(new kn(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new kn(0):(o=new kn(e).add(t).div(2),o=o.sub(new kn(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new kn(t).sub(o).div(s).toNumber()),u=l+c+1;return u>n?JW(e,t,n,r,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:s,tickMin:o.sub(new kn(l).mul(s)),tickMax:o.add(new kn(c).mul(s))})}function x2e(e){var t=qm(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=YW([n,r]),c=qm(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(Ek(Ck(0,a-1).map(function(){return 1/0}))):[].concat(Ek(Ck(0,a-1).map(function(){return-1/0})),[d]);return n>r?Ak(h):h}if(u===d)return y2e(u,a,s);var f=JW(u,d,o,s),m=f.step,g=f.tickMin,v=f.tickMax,x=S0.rangeStep(g,v.add(new kn(.1).mul(m)),m);return n>r?Ak(x):x}function b2e(e,t){var n=qm(e,2),r=n[0],a=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=YW([r,a]),l=qm(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,a];if(c===u)return[c];var d=Math.max(t,2),h=XW(new kn(u).sub(c).div(d-1),s,0),f=[].concat(Ek(S0.rangeStep(new kn(c),new kn(u).sub(new kn(.99).mul(h)),h)),[u]);return r>a?Ak(f):f}var w2e=VW(x2e),j2e=VW(b2e),_2e="Invariant failed";function Jc(e,t){throw new Error(_2e)}var k2e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function rx(){return rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rx.apply(this,arguments)}function S2e(e,t){return E2e(e)||A2e(e,t)||C2e(e,t)||N2e()}function N2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C2e(e,t){if(e){if(typeof e=="string")return kR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kR(e,t)}}function kR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A2e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function E2e(e){if(Array.isArray(e))return e}function T2e(e,t){if(e==null)return{};var n=P2e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function P2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function O2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eq(r.key),r)}}function R2e(e,t,n){return t&&I2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function M2e(e,t,n){return t=ax(t),D2e(e,QW()?Reflect.construct(t,n||[],ax(e).constructor):t.apply(e,n))}function D2e(e,t){if(t&&(Xd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L2e(e)}function L2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QW=function(){return!!e})()}function ax(e){return ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ax(e)}function $2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pk(e,t)}function Pk(e,t){return Pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Pk(e,t)}function ZW(e,t,n){return t=eq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eq(e){var t=F2e(e,"string");return Xd(t)=="symbol"?t:t+""}function F2e(e,t){if(Xd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N0=function(e){function t(){return O2e(this,t),M2e(this,t,arguments)}return $2e(t,e),R2e(t,[{key:"render",value:function(){var r=this.props,a=r.offset,s=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,f=T2e(r,k2e),m=dn(f,!1);this.props.direction==="x"&&d.type!=="number"&&Jc();var g=c.map(function(v){var x=u(v,l),y=x.x,w=x.y,b=x.value,_=x.errorVal;if(!_)return null;var k=[],j,N;if(Array.isArray(_)){var O=S2e(_,2);j=O[0],N=O[1]}else j=N=_;if(s==="vertical"){var I=d.scale,P=w+a,S=P+o,D=P-o,L=I(b-j),U=I(b+N);k.push({x1:U,y1:S,x2:U,y2:D}),k.push({x1:L,y1:P,x2:U,y2:P}),k.push({x1:L,y1:S,x2:L,y2:D})}else if(s==="horizontal"){var F=h.scale,M=y+a,T=M-o,E=M+o,$=F(b-j),A=F(b+N);k.push({x1:T,y1:A,x2:E,y2:A}),k.push({x1:M,y1:$,x2:M,y2:A}),k.push({x1:T,y1:$,x2:E,y2:$})}return V.createElement(Tr,rx({className:"recharts-errorBar",key:"bar-".concat(k.map(function(B){return"".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))},m),k.map(function(B){return V.createElement("line",rx({},B,{key:"line-".concat(B.x1,"-").concat(B.x2,"-").concat(B.y1,"-").concat(B.y2)}))}))});return V.createElement(Tr,{className:"recharts-errorBars"},g)}}])}(V.Component);ZW(N0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});ZW(N0,"displayName","ErrorBar");function Hm(e){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hm(e)}function SR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ec(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SR(Object(n),!0).forEach(function(r){U2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U2e(e,t,n){return t=B2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B2e(e){var t=z2e(e,"string");return Hm(t)=="symbol"?t:t+""}function z2e(e,t){if(Hm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tq=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,s=t.legendContent,o=Ja(n,wi);if(!o)return null;var l=wi.defaultProps,c=l!==void 0?ec(ec({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(r||[]).reduce(function(d,h){var f=h.item,m=h.props,g=m.sectors||m.data||[];return d.concat(g.map(function(v){return{type:o.props.iconType||f.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(r||[]).map(function(d){var h=d.item,f=h.type.defaultProps,m=f!==void 0?ec(ec({},f),h.props):{},g=m.dataKey,v=m.name,x=m.legendType,y=m.hide;return{inactive:y,dataKey:g,type:c.iconType||x||"square",color:KA(h),value:v||g,payload:m}}),ec(ec(ec({},c),wi.getWithHeight(o,a)),{},{payload:u,item:o})};function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function NR(e){return K2e(e)||H2e(e)||q2e(e)||W2e()}function W2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q2e(e,t){if(e){if(typeof e=="string")return Ok(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ok(e,t)}}function H2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function K2e(e){if(Array.isArray(e))return Ok(e)}function Ok(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function CR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CR(Object(n),!0).forEach(function(r){pd(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pd(e,t,n){return t=V2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V2e(e){var t=G2e(e,"string");return Km(t)=="symbol"?t:t+""}function G2e(e,t){if(Km(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fs(e,t,n){return hn(e)||hn(t)?n:_r(t)?Ai(e,t,n):zt(t)?t(e):n}function Bf(e,t,n,r){var a=HPe(e,function(l){return Fs(l,t)});if(n==="number"){var s=a.filter(function(l){return at(l)||parseFloat(l)});return s.length?[_0(s),j0(s)]:[1/0,-1/0]}var o=r?a.filter(function(l){return!hn(l)}):a;return o.map(function(l){return _r(l)||l instanceof Date?l:""})}var Y2e=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,h=a[u].coordinate,f=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(Qi(h-d)!==Qi(f-h)){var g=[];if(Qi(f-h)===Qi(c[1]-c[0])){m=f;var v=h+c[1]-c[0];g[0]=Math.min(v,(v+d)/2),g[1]=Math.max(v,(v+d)/2)}else{m=d;var x=f+c[1]-c[0];g[0]=Math.min(h,(x+h)/2),g[1]=Math.max(h,(x+h)/2)}var y=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(t>y[0]&&t<=y[1]||t>=g[0]&&t<=g[1]){o=a[u].index;break}}else{var w=Math.min(d,f),b=Math.max(d,f);if(t>(w+h)/2&&t<=(b+h)/2){o=a[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(r[_].coordinate+r[_+1].coordinate)/2||_>0&&_<l-1&&t>(r[_].coordinate+r[_-1].coordinate)/2&&t<=(r[_].coordinate+r[_+1].coordinate)/2||_===l-1&&t>(r[_].coordinate+r[_-1].coordinate)/2){o=r[_].index;break}return o},KA=function(t){var n,r=t,a=r.type.displayName,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Zn(Zn({},t.type.defaultProps),t.props):t.props,o=s.stroke,l=s.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},X2e=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var d=s[l[c]].stackGroups,h=Object.keys(d),f=0,m=h.length;f<m;f++){var g=d[h[f]],v=g.items,x=g.cateAxisId,y=v.filter(function(N){return po(N.type).indexOf("Bar")>=0});if(y&&y.length){var w=y[0].type.defaultProps,b=w!==void 0?Zn(Zn({},w),y[0].props):y[0].props,_=b.barSize,k=b[x];o[k]||(o[k]=[]);var j=hn(_)?n:_;o[k].push({item:y[0],stackList:y.slice(1),barSize:hn(j)?void 0:Yc(j,r,0)})}}return o},J2e=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,s=t.sizeList,o=s===void 0?[]:s,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Yc(n,a,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,m=a/c,g=o.reduce(function(_,k){return _+k.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&m>0&&(f=!0,m*=.9,g=c*m);var v=(a-g)/2>>0,x={offset:v-u,size:0};d=o.reduce(function(_,k){var j={item:k.item,position:{offset:x.offset+x.size+u,size:f?m:k.barSize}},N=[].concat(NR(_),[j]);return x=N[N.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(O){N.push({item:O,position:x})}),N},h)}else{var y=Yc(r,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var w=(a-2*y-(c-1)*u)/c;w>1&&(w>>=0);var b=l===+l?Math.min(w,l):w;d=o.reduce(function(_,k,j){var N=[].concat(NR(_),[{item:k.item,position:{offset:y+(w+u)*j+(w-b)/2,size:b}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(O){N.push({item:O,position:N[N.length-1].position})}),N},h)}return d},Q2e=function(t,n,r,a){var s=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=tq({children:s,legendWidth:c});if(u){var d=a||{},h=d.width,f=d.height,m=u.align,g=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&g==="middle")&&m!=="center"&&at(t[m]))return Zn(Zn({},t),{},pd({},m,t[m]+(h||0)));if((v==="horizontal"||v==="vertical"&&m==="center")&&g!=="middle"&&at(t[g]))return Zn(Zn({},t),{},pd({},g,t[g]+(f||0)))}return t},Z2e=function(t,n,r){return hn(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},nq=function(t,n,r,a,s){var o=n.props.children,l=as(o,N0).filter(function(u){return Z2e(a,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var h=Fs(d,r);if(hn(h))return u;var f=Array.isArray(h)?[_0(h),j0(h)]:[h,h],m=c.reduce(function(g,v){var x=Fs(d,v,0),y=f[0]-Math.abs(Array.isArray(x)?x[0]:x),w=f[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(y,g[0]),Math.max(w,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},eOe=function(t,n,r,a,s){var o=n.map(function(l){return nq(t,l,r,s,a)}).filter(function(l){return!hn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},rq=function(t,n,r,a,s){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&nq(t,c,u,a)||Bf(t,u,r,s)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},aq=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},iq=function(t,n,r,a){if(a)return t.map(function(c){return c.coordinate});var s,o,l=t.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(r),l},co=function(t,n,r){if(!t)return null;var a=t.scale,s=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Qi(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(h){var f=s?s.indexOf(h):h;return{coordinate:a(f)+u,value:h,offset:u}});return d.filter(function(h){return!Jp(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,f){return{coordinate:a(h)+u,value:h,index:f,offset:u}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(h){return{coordinate:a(h)+u,value:h,offset:u}}):a.domain().map(function(h,f){return{coordinate:a(h)+u,value:s?s[h]:h,index:f,offset:u}})},Bj=new WeakMap,Zg=function(t,n){if(typeof n!="function")return t;Bj.has(t)||Bj.set(t,new WeakMap);var r=Bj.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},tOe=function(t,n,r){var a=t.scale,s=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:$m(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Qy(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Uf(),realScaleType:"point"}:s==="category"?{scale:$m(),realScaleType:"band"}:{scale:Qy(),realScaleType:"linear"};if(Gc(a)){var c="scale".concat(c0(a));return{scale:(bR[c]||Uf)(),realScaleType:bR[c]?c:"point"}}return zt(a)?{scale:a}:{scale:Uf(),realScaleType:"point"}},AR=1e-4,nOe=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),s=Math.min(a[0],a[1])-AR,o=Math.max(a[0],a[1])+AR,l=t(n[0]),c=t(n[r-1]);(l<s||l>o||c<s||c>o)&&t.domain([n[0],n[r-1]])}},rOe=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},aOe=function(t,n){if(!n||n.length!==2||!at(n[0])||!at(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),s=[t[0],t[1]];return(!at(t[0])||t[0]<r)&&(s[0]=r),(!at(t[1])||t[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<r&&(s[1]=r),s},iOe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0,l=0;l<n;++l){var c=Jp(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=s,t[l][r][1]=s+c,s=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},sOe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0;o<n;++o){var l=Jp(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=s,t[o][r][1]=s+l,s=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},oOe={sign:iOe,expand:j0e,none:zd,silhouette:_0e,wiggle:k0e,positive:sOe},lOe=function(t,n,r){var a=n.map(function(l){return l.props.dataKey}),s=oOe[r],o=w0e().keys(a).value(function(l,c){return+Fs(l,c,0)}).order(rk).offset(s);return o(t)},cOe=function(t,n,r,a,s,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(h,f){var m,g=(m=f.type)!==null&&m!==void 0&&m.defaultProps?Zn(Zn({},f.type.defaultProps),f.props):f.props,v=g.stackId,x=g.hide;if(x)return h;var y=g[r],w=h[y]||{hasStack:!1,stackGroups:{}};if(_r(v)){var b=w.stackGroups[v]||{numericAxisId:r,cateAxisId:a,items:[]};b.items.push(f),w.hasStack=!0,w.stackGroups[v]=b}else w.stackGroups[l0("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[f]};return Zn(Zn({},h),{},pd({},y,w))},c),d={};return Object.keys(u).reduce(function(h,f){var m=u[f];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(v,x){var y=m.stackGroups[x];return Zn(Zn({},v),{},pd({},x,{numericAxisId:r,cateAxisId:a,items:y.items,stackedData:lOe(t,y.items,s)}))},g)}return Zn(Zn({},h),{},pd({},f,m))},d)},uOe=function(t,n){var r=n.realScaleType,a=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=w2e(u,s,l);return t.domain([_0(d),j0(d)]),{niceTicks:d}}if(s&&a==="number"){var h=t.domain(),f=j2e(h,s,l);return{niceTicks:f}}return null},ER=function(t){var n=t.axis,r=t.ticks,a=t.offset,s=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+a:null;var c=Fs(o,n.dataKey,n.domain[l]);return hn(c)?null:n.scale(c)-s/2+a},dOe=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return a<=0&&s>=0?0:s<0?s:a}return r[0]},hOe=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Zn(Zn({},t.type.defaultProps),t.props):t.props,s=a.stackId;if(_r(s)){var o=n[s];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},fOe=function(t){return t.reduce(function(n,r){return[_0(r.concat([n[0]]).filter(at)),j0(r.concat([n[1]]).filter(at))]},[1/0,-1/0])},sq=function(t,n,r){return Object.keys(t).reduce(function(a,s){var o=t[s],l=o.stackedData,c=l.reduce(function(u,d){var h=fOe(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},TR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ik=function(t,n,r){if(zt(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(at(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(TR.test(t[0])){var s=+TR.exec(t[0])[1];a[0]=n[0]-s}else zt(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(at(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(PR.test(t[1])){var o=+PR.exec(t[1])[1];a[1]=n[1]+o}else zt(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},ix=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var s=xA(n,function(h){return h.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],d=s[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},OR=function(t,n,r){return!t||!t.length||WA(t,Ai(r,"type.defaultProps.domain"))?n:t},oq=function(t,n){var r=t.type.defaultProps?Zn(Zn({},t.type.defaultProps),t.props):t.props,a=r.dataKey,s=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return Zn(Zn({},dn(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:s||a,color:KA(t),value:Fs(n,a),type:c,payload:n,chartType:u,hide:d})};function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function IR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function RR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IR(Object(n),!0).forEach(function(r){mOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mOe(e,t,n){return t=pOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pOe(e){var t=gOe(e,"string");return Vm(t)=="symbol"?t:t+""}function gOe(e,t){if(Vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sx=Math.PI/180,vOe=function(t){return t*180/Math.PI},Br=function(t,n,r,a){return{x:t+Math.cos(-sx*a)*r,y:n+Math.sin(-sx*a)*r}},yOe=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(a-o,2))},xOe=function(t,n){var r=t.x,a=t.y,s=n.cx,o=n.cy,l=yOe({x:r,y:a},{x:s,y:o});if(l<=0)return{radius:l};var c=(r-s)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:vOe(u),angleInRadian:u}},bOe=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(a,s);return{startAngle:n-o*360,endAngle:r-o*360}},wOe=function(t,n){var r=n.startAngle,a=n.endAngle,s=Math.floor(r/360),o=Math.floor(a/360),l=Math.min(s,o);return t+l*360},MR=function(t,n){var r=t.x,a=t.y,s=xOe({x:r,y:a},n),o=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=bOe(n),h=d.startAngle,f=d.endAngle,m=l,g;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}return g?RR(RR({},n),{},{radius:o,angle:wOe(m,n)}):null};function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}var jOe=["offset"];function _Oe(e){return COe(e)||NOe(e)||SOe(e)||kOe()}function kOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SOe(e,t){if(e){if(typeof e=="string")return Rk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rk(e,t)}}function NOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function COe(e){if(Array.isArray(e))return Rk(e)}function Rk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function AOe(e,t){if(e==null)return{};var n=EOe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function EOe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function DR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DR(Object(n),!0).forEach(function(r){TOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TOe(e,t,n){return t=POe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function POe(e){var t=OOe(e,"string");return Gm(t)=="symbol"?t:t+""}function OOe(e,t){if(Gm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ym(){return Ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ym.apply(this,arguments)}var IOe=function(t){var n=t.value,r=t.formatter,a=hn(t.children)?n:t.children;return zt(r)?r(a):a},ROe=function(t,n){var r=Qi(n-t),a=Math.min(Math.abs(n-t),360);return r*a},MOe=function(t,n,r){var a=t.position,s=t.viewBox,o=t.offset,l=t.className,c=s,u=c.cx,d=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,g=c.endAngle,v=c.clockWise,x=(h+f)/2,y=ROe(m,g),w=y>=0?1:-1,b,_;a==="insideStart"?(b=m+w*o,_=v):a==="insideEnd"?(b=g-w*o,_=!v):a==="end"&&(b=g+w*o,_=v),_=y<=0?_:!_;var k=Br(u,d,x,b),j=Br(u,d,x,b+(_?1:-1)*359),N="M".concat(k.x,",").concat(k.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(_?0:1,`,
    `).concat(j.x,",").concat(j.y),O=hn(t.id)?l0("recharts-radial-line-"):t.id;return V.createElement("text",Ym({},r,{dominantBaseline:"central",className:an("recharts-radial-bar-label",l)}),V.createElement("defs",null,V.createElement("path",{id:O,d:N})),V.createElement("textPath",{xlinkHref:"#".concat(O)},n))},DOe=function(t){var n=t.viewBox,r=t.offset,a=t.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,h=s.endAngle,f=(d+h)/2;if(a==="outside"){var m=Br(o,l,u+r,f),g=m.x,v=m.y;return{x:g,y:v,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,y=Br(o,l,x,f),w=y.x,b=y.y;return{x:w,y:b,textAnchor:"middle",verticalAnchor:"middle"}},LOe=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,s=t.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,f=h*a,m=h>0?"end":"start",g=h>0?"start":"end",v=u>=0?1:-1,x=v*a,y=v>0?"end":"start",w=v>0?"start":"end";if(s==="top"){var b={x:l+u/2,y:c-h*a,textAnchor:"middle",verticalAnchor:m};return vr(vr({},b),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var _={x:l+u/2,y:c+d+f,textAnchor:"middle",verticalAnchor:g};return vr(vr({},_),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(s==="left"){var k={x:l-x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return vr(vr({},k),r?{width:Math.max(k.x-r.x,0),height:d}:{})}if(s==="right"){var j={x:l+u+x,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return vr(vr({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:d}:{})}var N=r?{width:u,height:d}:{};return s==="insideLeft"?vr({x:l+x,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},N):s==="insideRight"?vr({x:l+u-x,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},N):s==="insideTop"?vr({x:l+u/2,y:c+f,textAnchor:"middle",verticalAnchor:g},N):s==="insideBottom"?vr({x:l+u/2,y:c+d-f,textAnchor:"middle",verticalAnchor:m},N):s==="insideTopLeft"?vr({x:l+x,y:c+f,textAnchor:w,verticalAnchor:g},N):s==="insideTopRight"?vr({x:l+u-x,y:c+f,textAnchor:y,verticalAnchor:g},N):s==="insideBottomLeft"?vr({x:l+x,y:c+d-f,textAnchor:w,verticalAnchor:m},N):s==="insideBottomRight"?vr({x:l+u-x,y:c+d-f,textAnchor:y,verticalAnchor:m},N):kh(s)&&(at(s.x)||vc(s.x))&&(at(s.y)||vc(s.y))?vr({x:l+Yc(s.x,u),y:c+Yc(s.y,d),textAnchor:"end",verticalAnchor:"end"},N):vr({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},N)},$Oe=function(t){return"cx"in t&&at(t.cx)};function ea(e){var t=e.offset,n=t===void 0?5:t,r=AOe(e,jOe),a=vr({offset:n},r),s=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,h=d===void 0?"":d,f=a.textBreakAll;if(!s||hn(l)&&hn(c)&&!p.isValidElement(u)&&!zt(u))return null;if(p.isValidElement(u))return p.cloneElement(u,a);var m;if(zt(u)){if(m=p.createElement(u,a),p.isValidElement(m))return m}else m=IOe(a);var g=$Oe(s),v=dn(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return MOe(a,m,v);var x=g?DOe(a):LOe(a);return V.createElement(Hy,Ym({className:an("recharts-label",h)},v,x,{breakAll:f}),m)}ea.displayName="Label";var lq=function(t){var n=t.cx,r=t.cy,a=t.angle,s=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,h=t.x,f=t.y,m=t.top,g=t.left,v=t.width,x=t.height,y=t.clockWise,w=t.labelViewBox;if(w)return w;if(at(v)&&at(x)){if(at(h)&&at(f))return{x:h,y:f,width:v,height:x};if(at(m)&&at(g))return{x:m,y:g,width:v,height:x}}return at(h)&&at(f)?{x:h,y:f,width:0,height:0}:at(n)&&at(r)?{cx:n,cy:r,startAngle:s||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},FOe=function(t,n){return t?t===!0?V.createElement(ea,{key:"label-implicit",viewBox:n}):_r(t)?V.createElement(ea,{key:"label-implicit",viewBox:n,value:t}):p.isValidElement(t)?t.type===ea?p.cloneElement(t,{key:"label-implicit",viewBox:n}):V.createElement(ea,{key:"label-implicit",content:t,viewBox:n}):zt(t)?V.createElement(ea,{key:"label-implicit",content:t,viewBox:n}):kh(t)?V.createElement(ea,Ym({viewBox:n},t,{key:"label-implicit"})):null:null},UOe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,s=lq(t),o=as(a,ea).map(function(c,u){return p.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return o;var l=FOe(t.label,n||s);return[l].concat(_Oe(o))};ea.parseViewBox=lq;ea.renderCallByParent=UOe;function BOe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var zOe=BOe;const WOe=vn(zOe);function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}var qOe=["valueAccessor"],HOe=["data","dataKey","clockWise","id","textBreakAll"];function KOe(e){return XOe(e)||YOe(e)||GOe(e)||VOe()}function VOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GOe(e,t){if(e){if(typeof e=="string")return Mk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mk(e,t)}}function YOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function XOe(e){if(Array.isArray(e))return Mk(e)}function Mk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ox(){return ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ox.apply(this,arguments)}function LR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $R(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LR(Object(n),!0).forEach(function(r){JOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function JOe(e,t,n){return t=QOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QOe(e){var t=ZOe(e,"string");return Xm(t)=="symbol"?t:t+""}function ZOe(e,t){if(Xm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FR(e,t){if(e==null)return{};var n=eIe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function eIe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var tIe=function(t){return Array.isArray(t.value)?WOe(t.value):t.value};function Zi(e){var t=e.valueAccessor,n=t===void 0?tIe:t,r=FR(e,qOe),a=r.data,s=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=FR(r,HOe);return!a||!a.length?null:V.createElement(Tr,{className:"recharts-label-list"},a.map(function(d,h){var f=hn(s)?n(d,h):Fs(d&&d.payload,s),m=hn(l)?{}:{id:"".concat(l,"-").concat(h)};return V.createElement(ea,ox({},dn(d,!0),u,m,{parentViewBox:d.parentViewBox,value:f,textBreakAll:c,viewBox:ea.parseViewBox(hn(o)?d:$R($R({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Zi.displayName="LabelList";function nIe(e,t){return e?e===!0?V.createElement(Zi,{key:"labelList-implicit",data:t}):V.isValidElement(e)||zt(e)?V.createElement(Zi,{key:"labelList-implicit",data:t,content:e}):kh(e)?V.createElement(Zi,ox({data:t},e,{key:"labelList-implicit"})):null:null}function rIe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=as(r,Zi).map(function(o,l){return p.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var s=nIe(e.label,t);return[s].concat(KOe(a))}Zi.renderCallByParent=rIe;function Jm(e){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}function Dk(){return Dk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dk.apply(this,arguments)}function UR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function BR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UR(Object(n),!0).forEach(function(r){aIe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aIe(e,t,n){return t=iIe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iIe(e){var t=sIe(e,"string");return Jm(t)=="symbol"?t:t+""}function sIe(e,t){if(Jm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oIe=function(t,n){var r=Qi(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},ev=function(t){var n=t.cx,r=t.cy,a=t.radius,s=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,h=Math.asin(c/d)/sx,f=u?s:s+o*h,m=Br(n,r,d,f),g=Br(n,r,a,f),v=u?s-o*h:s,x=Br(n,r,d*Math.cos(h*sx),v);return{center:m,circleTangency:g,lineTangency:x,theta:h}},cq=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.startAngle,l=t.endAngle,c=oIe(o,l),u=o+c,d=Br(n,r,s,o),h=Br(n,r,s,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var m=Br(n,r,a,o),g=Br(n,r,a,u);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},lIe=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=Qi(d-u),f=ev({cx:n,cy:r,radius:s,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),m=f.circleTangency,g=f.lineTangency,v=f.theta,x=ev({cx:n,cy:r,radius:s,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),y=x.circleTangency,w=x.lineTangency,b=x.theta,_=c?Math.abs(u-d):Math.abs(u-d)-v-b;if(_<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):cq({cx:n,cy:r,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d});var k="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
  `);if(a>0){var j=ev({cx:n,cy:r,radius:a,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),N=j.circleTangency,O=j.lineTangency,I=j.theta,P=ev({cx:n,cy:r,radius:a,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=P.circleTangency,D=P.lineTangency,L=P.theta,U=c?Math.abs(u-d):Math.abs(u-d)-I-L;if(U<0&&o===0)return"".concat(k,"L").concat(n,",").concat(r,"Z");k+="L".concat(D.x,",").concat(D.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(U>180),",").concat(+(h>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(O.x,",").concat(O.y,"Z")}else k+="L".concat(n,",").concat(r,"Z");return k},cIe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},uq=function(t){var n=BR(BR({},cIe),t),r=n.cx,a=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,f=n.className;if(o<s||d===h)return null;var m=an("recharts-sector",f),g=o-s,v=Yc(l,g,0,!0),x;return v>0&&Math.abs(d-h)<360?x=lIe({cx:r,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(v,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):x=cq({cx:r,cy:a,innerRadius:s,outerRadius:o,startAngle:d,endAngle:h}),V.createElement("path",Dk({},dn(n,!0),{className:m,d:x,role:"img"}))};function Qm(e){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qm(e)}function Lk(){return Lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lk.apply(this,arguments)}function zR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function WR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zR(Object(n),!0).forEach(function(r){uIe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uIe(e,t,n){return t=dIe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dIe(e){var t=hIe(e,"string");return Qm(t)=="symbol"?t:t+""}function hIe(e,t){if(Qm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qR={curveBasisClosed:u0e,curveBasisOpen:d0e,curveBasis:c0e,curveBumpX:Ybe,curveBumpY:Xbe,curveLinearClosed:h0e,curveLinear:d0,curveMonotoneX:f0e,curveMonotoneY:m0e,curveNatural:p0e,curveStep:g0e,curveStepAfter:y0e,curveStepBefore:v0e},tv=function(t){return t.x===+t.x&&t.y===+t.y},lf=function(t){return t.x},cf=function(t){return t.y},fIe=function(t,n){if(zt(t))return t;var r="curve".concat(c0(t));return(r==="curveMonotone"||r==="curveBump")&&n?qR["".concat(r).concat(n==="vertical"?"Y":"X")]:qR[r]||d0},mIe=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,s=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=fIe(r,l),h=u?s.filter(function(v){return tv(v)}):s,f;if(Array.isArray(o)){var m=u?o.filter(function(v){return tv(v)}):o,g=h.map(function(v,x){return WR(WR({},v),{},{base:m[x]})});return l==="vertical"?f=Hg().y(cf).x1(lf).x0(function(v){return v.base.x}):f=Hg().x(lf).y1(cf).y0(function(v){return v.base.y}),f.defined(tv).curve(d),f(g)}return l==="vertical"&&at(o)?f=Hg().y(cf).x1(lf).x0(o):at(o)?f=Hg().x(lf).y1(cf).y0(o):f=u8().x(lf).y(cf),f.defined(tv).curve(d),f(h)},HR=function(t){var n=t.className,r=t.points,a=t.path,s=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?mIe(t):a;return p.createElement("path",Lk({},dn(t,!1),Ty(t),{className:an("recharts-curve",n),d:o,ref:s}))},dq={exports:{}},pIe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gIe=pIe,vIe=gIe;function hq(){}function fq(){}fq.resetWarningCache=hq;var yIe=function(){function e(r,a,s,o,l,c){if(c!==vIe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:fq,resetWarningCache:hq};return n.PropTypes=n,n};dq.exports=yIe();var xIe=dq.exports;const mn=vn(xIe);var bIe=Object.getOwnPropertyNames,wIe=Object.getOwnPropertySymbols,jIe=Object.prototype.hasOwnProperty;function KR(e,t){return function(r,a,s){return e(r,a,s)&&t(r,a,s)}}function nv(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var s=a.cache,o=s.get(n),l=s.get(r);if(o&&l)return o===r&&l===n;s.set(n,r),s.set(r,n);var c=e(n,r,a);return s.delete(n),s.delete(r),c}}function VR(e){return bIe(e).concat(wIe(e))}var _Ie=Object.hasOwn||function(e,t){return jIe.call(e,t)};function hu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var kIe="__v",SIe="__o",NIe="_owner",GR=Object.getOwnPropertyDescriptor,YR=Object.keys;function CIe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function AIe(e,t){return hu(e.getTime(),t.getTime())}function EIe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function TIe(e,t){return e===t}function XR(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=t.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(a[h]){h++;continue}var f=o.value,m=l.value;if(n.equals(f[0],m[0],c,h,e,t,n)&&n.equals(f[1],m[1],f[0],m[0],e,t,n)){d=a[h]=!0;break}h++}if(!d)return!1;c++}return!0}var PIe=hu;function OIe(e,t,n){var r=YR(e),a=r.length;if(YR(t).length!==a)return!1;for(;a-- >0;)if(!mq(e,t,n,r[a]))return!1;return!0}function uf(e,t,n){var r=VR(e),a=r.length;if(VR(t).length!==a)return!1;for(var s,o,l;a-- >0;)if(s=r[a],!mq(e,t,n,s)||(o=GR(e,s),l=GR(t,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function IIe(e,t){return hu(e.valueOf(),t.valueOf())}function RIe(e,t){return e.source===t.source&&e.flags===t.flags}function JR(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.values(),o,l;(o=s.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function MIe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function DIe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function mq(e,t,n,r){return(r===NIe||r===SIe||r===kIe)&&(e.$$typeof||t.$$typeof)?!0:_Ie(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var LIe="[object Arguments]",$Ie="[object Boolean]",FIe="[object Date]",UIe="[object Error]",BIe="[object Map]",zIe="[object Number]",WIe="[object Object]",qIe="[object RegExp]",HIe="[object Set]",KIe="[object String]",VIe="[object URL]",GIe=Array.isArray,QR=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,ZR=Object.assign,YIe=Object.prototype.toString.call.bind(Object.prototype.toString);function XIe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,s=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,h=e.areTypedArraysEqual,f=e.areUrlsEqual;return function(g,v,x){if(g===v)return!0;if(g==null||v==null)return!1;var y=typeof g;if(y!==typeof v)return!1;if(y!=="object")return y==="number"?o(g,v,x):y==="function"?a(g,v,x):!1;var w=g.constructor;if(w!==v.constructor)return!1;if(w===Object)return l(g,v,x);if(GIe(g))return t(g,v,x);if(QR!=null&&QR(g))return h(g,v,x);if(w===Date)return n(g,v,x);if(w===RegExp)return u(g,v,x);if(w===Map)return s(g,v,x);if(w===Set)return d(g,v,x);var b=YIe(g);return b===FIe?n(g,v,x):b===qIe?u(g,v,x):b===BIe?s(g,v,x):b===HIe?d(g,v,x):b===WIe?typeof g.then!="function"&&typeof v.then!="function"&&l(g,v,x):b===VIe?f(g,v,x):b===UIe?r(g,v,x):b===LIe?l(g,v,x):b===$Ie||b===zIe||b===KIe?c(g,v,x):!1}}function JIe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?uf:CIe,areDatesEqual:AIe,areErrorsEqual:EIe,areFunctionsEqual:TIe,areMapsEqual:r?KR(XR,uf):XR,areNumbersEqual:PIe,areObjectsEqual:r?uf:OIe,arePrimitiveWrappersEqual:IIe,areRegExpsEqual:RIe,areSetsEqual:r?KR(JR,uf):JR,areTypedArraysEqual:r?uf:MIe,areUrlsEqual:DIe};if(n&&(a=ZR({},a,n(a))),t){var s=nv(a.areArraysEqual),o=nv(a.areMapsEqual),l=nv(a.areObjectsEqual),c=nv(a.areSetsEqual);a=ZR({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function QIe(e){return function(t,n,r,a,s,o,l){return e(t,n,l)}}function ZIe(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,s=e.strict;if(r)return function(c,u){var d=r(),h=d.cache,f=h===void 0?t?new WeakMap:void 0:h,m=d.meta;return n(c,u,{cache:f,equals:a,meta:m,strict:s})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(c,u){return n(c,u,o)}}var eRe=Xl();Xl({strict:!0});Xl({circular:!0});Xl({circular:!0,strict:!0});Xl({createInternalComparator:function(){return hu}});Xl({strict:!0,createInternalComparator:function(){return hu}});Xl({circular:!0,createInternalComparator:function(){return hu}});Xl({circular:!0,createInternalComparator:function(){return hu},strict:!0});function Xl(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,s=e.strict,o=s===void 0?!1:s,l=JIe(e),c=XIe(l),u=r?r(c):QIe(c);return ZIe({circular:n,comparator:c,createState:a,equals:u,strict:o})}function tRe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function eM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(s){n<0&&(n=s),s-n>t?(e(s),n=-1):tRe(a)};requestAnimationFrame(r)}function $k(e){"@babel/helpers - typeof";return $k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$k(e)}function nRe(e){return sRe(e)||iRe(e)||aRe(e)||rRe()}function rRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aRe(e,t){if(e){if(typeof e=="string")return tM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tM(e,t)}}function tM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sRe(e){if(Array.isArray(e))return e}function oRe(){var e={},t=function(){return null},n=!1,r=function a(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=nRe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){eM(a.bind(null,u),c);return}a(c),eM(a.bind(null,u));return}$k(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function Zm(e){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(e)}function nM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function rM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nM(Object(n),!0).forEach(function(r){pq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pq(e,t,n){return t=lRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lRe(e){var t=cRe(e,"string");return Zm(t)==="symbol"?t:String(t)}function cRe(e,t){if(Zm(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uRe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(s){return a.includes(s)})})},dRe=function(t){return t},hRe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},zf=function(t,n){return Object.keys(n).reduce(function(r,a){return rM(rM({},r),{},pq({},a,t(a,n[a])))},{})},aM=function(t,n,r){return t.map(function(a){return"".concat(hRe(a)," ").concat(n,"ms ").concat(r)}).join(",")};function fRe(e,t){return gRe(e)||pRe(e,t)||gq(e,t)||mRe()}function mRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pRe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function gRe(e){if(Array.isArray(e))return e}function vRe(e){return bRe(e)||xRe(e)||gq(e)||yRe()}function yRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gq(e,t){if(e){if(typeof e=="string")return Fk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fk(e,t)}}function xRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bRe(e){if(Array.isArray(e))return Fk(e)}function Fk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lx=1e-4,vq=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},yq=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},iM=function(t,n){return function(r){var a=vq(t,n);return yq(a,r)}},wRe=function(t,n){return function(r){var a=vq(t,n),s=[].concat(vRe(a.map(function(o,l){return o*l}).slice(1)),[0]);return yq(s,r)}},sM=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,s=0,o=1,l=1;break;case"ease":a=.25,s=.1,o=.25,l=1;break;case"ease-in":a=.42,s=0,o=1,l=1;break;case"ease-out":a=.42,s=0,o=.58,l=1;break;case"ease-in-out":a=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=fRe(u,4);a=d[0],s=d[1],o=d[2],l=d[3]}}}var h=iM(a,o),f=iM(s,l),m=wRe(a,o),g=function(y){return y>1?1:y<0?0:y},v=function(y){for(var w=y>1?1:y,b=w,_=0;_<8;++_){var k=h(b)-w,j=m(b);if(Math.abs(k-w)<lx||j<lx)return f(b);b=g(b-k/j)}return f(b)};return v.isStepper=!1,v},jRe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,s=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,h,f){var m=-(d-h)*r,g=f*s,v=f+(m-g)*l/1e3,x=f*l/1e3+d;return Math.abs(x-h)<lx&&Math.abs(v)<lx?[h,0]:[x,v]};return c.isStepper=!0,c.dt=l,c},_Re=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return sM(a);case"spring":return jRe();default:if(a.split("(")[0]==="cubic-bezier")return sM(a)}return typeof a=="function"?a:null};function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}function oM(e){return NRe(e)||SRe(e)||xq(e)||kRe()}function kRe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SRe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function NRe(e){if(Array.isArray(e))return Bk(e)}function lM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lM(Object(n),!0).forEach(function(r){Uk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uk(e,t,n){return t=CRe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CRe(e){var t=ARe(e,"string");return ep(t)==="symbol"?t:String(t)}function ARe(e,t){if(ep(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ep(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ERe(e,t){return ORe(e)||PRe(e,t)||xq(e,t)||TRe()}function TRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xq(e,t){if(e){if(typeof e=="string")return Bk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bk(e,t)}}function Bk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function PRe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ORe(e){if(Array.isArray(e))return e}var cx=function(t,n,r){return t+(n-t)*r},zk=function(t){var n=t.from,r=t.to;return n!==r},IRe=function e(t,n,r){var a=zf(function(s,o){if(zk(o)){var l=t(o.from,o.to,o.velocity),c=ERe(l,2),u=c[0],d=c[1];return Lr(Lr({},o),{},{from:u,velocity:d})}return o},n);return r<1?zf(function(s,o){return zk(o)?Lr(Lr({},o),{},{velocity:cx(o.velocity,a[s].velocity,r),from:cx(o.from,a[s].from,r)}):o},n):e(t,a,r-1)};const RRe=function(e,t,n,r,a){var s=uRe(e,t),o=s.reduce(function(x,y){return Lr(Lr({},x),{},Uk({},y,[e[y],t[y]]))},{}),l=s.reduce(function(x,y){return Lr(Lr({},x),{},Uk({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,d,h=function(){return null},f=function(){return zf(function(y,w){return w.from},l)},m=function(){return!Object.values(l).filter(zk).length},g=function(y){u||(u=y);var w=y-u,b=w/n.dt;l=IRe(n,l,b),a(Lr(Lr(Lr({},e),t),f())),u=y,m()||(c=requestAnimationFrame(h))},v=function(y){d||(d=y);var w=(y-d)/r,b=zf(function(k,j){return cx.apply(void 0,oM(j).concat([n(w)]))},o);if(a(Lr(Lr(Lr({},e),t),b)),w<1)c=requestAnimationFrame(h);else{var _=zf(function(k,j){return cx.apply(void 0,oM(j).concat([n(1)]))},o);a(Lr(Lr(Lr({},e),t),_))}};return h=n.isStepper?g:v,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Jd(e){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jd(e)}var MRe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function DRe(e,t){if(e==null)return{};var n=LRe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function LRe(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function zj(e){return BRe(e)||URe(e)||FRe(e)||$Re()}function $Re(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FRe(e,t){if(e){if(typeof e=="string")return Wk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wk(e,t)}}function URe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BRe(e){if(Array.isArray(e))return Wk(e)}function Wk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cM(Object(n),!0).forEach(function(r){wf(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wf(e,t,n){return t=bq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WRe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bq(r.key),r)}}function qRe(e,t,n){return t&&WRe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bq(e){var t=HRe(e,"string");return Jd(t)==="symbol"?t:String(t)}function HRe(e,t){if(Jd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qk(e,t)}function qk(e,t){return qk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},qk(e,t)}function VRe(e){var t=GRe();return function(){var r=ux(e),a;if(t){var s=ux(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Hk(this,a)}}function Hk(e,t){if(t&&(Jd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kk(e)}function Kk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GRe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ux(e){return ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ux(e)}var Il=function(e){KRe(n,e);var t=VRe(n);function n(r,a){var s;zRe(this,n),s=t.call(this,r,a);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,f=o.children,m=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(Kk(s)),s.changeStyle=s.changeStyle.bind(Kk(s)),!l||m<=0)return s.state={style:{}},typeof f=="function"&&(s.state={style:d}),Hk(s);if(h&&h.length)s.state={style:h[0].style};else if(u){if(typeof f=="function")return s.state={style:u},Hk(s);s.state={style:c?wf({},c,u):u}}else s.state={style:{}};return s}return qRe(n,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,h=s.from,f=this.state.style;if(l){if(!o){var m={style:c?wf({},c,d):d};this.state&&f&&(c&&f[c]!==d||!c&&f!==d)&&this.setState(m);return}if(!(eRe(a.to,d)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=g||u?h:a.to;if(this.state&&f){var x={style:c?wf({},c,v):v};(c&&f[c]!==v||!c&&f!==v)&&this.setState(x)}this.runAnimation($i($i({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,h=a.onAnimationEnd,f=a.onAnimationStart,m=RRe(o,l,_Re(u),c,this.changeStyle),g=function(){s.stopJSAnimation=m()};this.manager.start([f,d,g,c,h])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,h=u.duration,f=h===void 0?0:h,m=function(v,x,y){if(y===0)return v;var w=x.duration,b=x.easing,_=b===void 0?"ease":b,k=x.style,j=x.properties,N=x.onAnimationEnd,O=y>0?o[y-1]:x,I=j||Object.keys(k);if(typeof _=="function"||_==="spring")return[].concat(zj(v),[s.runJSAnimation.bind(s,{from:O.style,to:k,duration:w,easing:_}),w]);var P=aM(I,w,_),S=$i($i($i({},O.style),k),{},{transition:P});return[].concat(zj(v),[S,w,N]).filter(dRe)};return this.manager.start([c].concat(zj(o.reduce(m,[d,Math.max(f,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=oRe());var s=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,h=a.onAnimationEnd,f=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(f.length>1){this.runStepAnimation(a);return}var v=l?wf({},l,c):c,x=aM(Object.keys(v),o,u);g.start([d,s,$i($i({},v),{},{transition:x}),o,h])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=DRe(a,MRe),u=p.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!l||u===0||o<=0)return s;var h=function(m){var g=m.props,v=g.style,x=v===void 0?{}:v,y=g.className,w=p.cloneElement(m,$i($i({},c),{},{style:$i($i({},x),d),className:y}));return w};return u===1?h(p.Children.only(s)):V.createElement("div",null,p.Children.map(s,function(f){return h(f)}))}}]),n}(p.PureComponent);Il.displayName="Animate";Il.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Il.propTypes={from:mn.oneOfType([mn.object,mn.string]),to:mn.oneOfType([mn.object,mn.string]),attributeName:mn.string,duration:mn.number,begin:mn.number,easing:mn.oneOfType([mn.string,mn.func]),steps:mn.arrayOf(mn.shape({duration:mn.number.isRequired,style:mn.object.isRequired,easing:mn.oneOfType([mn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),mn.func]),properties:mn.arrayOf("string"),onAnimationEnd:mn.func})),children:mn.oneOfType([mn.node,mn.func]),isActive:mn.bool,canBegin:mn.bool,onAnimationEnd:mn.func,shouldReAnimate:mn.bool,onAnimationStart:mn.func,onAnimationReStart:mn.func};function tp(e){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tp(e)}function dx(){return dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dx.apply(this,arguments)}function YRe(e,t){return ZRe(e)||QRe(e,t)||JRe(e,t)||XRe()}function XRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JRe(e,t){if(e){if(typeof e=="string")return uM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uM(e,t)}}function uM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function QRe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ZRe(e){if(Array.isArray(e))return e}function dM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dM(Object(n),!0).forEach(function(r){eMe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eMe(e,t,n){return t=tMe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tMe(e){var t=nMe(e,"string");return tp(t)=="symbol"?t:t+""}function nMe(e,t){if(tp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(tp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fM=function(t,n,r,a,s){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,c=r>=0?1:-1,u=a>=0&&r>=0||a<0&&r<0?1:0,d;if(o>0&&s instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=s[f]>o?o:s[f];d="M".concat(t,",").concat(n+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(t+c*h[0],",").concat(n)),d+="L ".concat(t+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*h[1])),d+="L ".concat(t+r,",").concat(n+a-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(t+r-c*h[2],",").concat(n+a)),d+="L ".concat(t+c*h[3],",").concat(n+a),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*h[3])),d+="Z"}else if(o>0&&s===+s&&s>0){var g=Math.min(o,s);d="M ".concat(t,",").concat(n+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(n,`
            L `).concat(t+r-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*g,`
            L `).concat(t+r,",").concat(n+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r-c*g,",").concat(n+a,`
            L `).concat(t+c*g,",").concat(n+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*g," Z")}else d="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return d},rMe=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),d=Math.max(s,s+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return r>=u&&r<=d&&a>=h&&a<=f}return!1},aMe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},VA=function(t){var n=hM(hM({},aMe),t),r=p.useRef(),a=p.useState(-1),s=YRe(a,2),o=s[0],l=s[1];p.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&l(_)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,f=n.radius,m=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,y=n.isAnimationActive,w=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var b=an("recharts-rectangle",m);return w?V.createElement(Il,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:v,animationEasing:g,isActive:w},function(_){var k=_.width,j=_.height,N=_.x,O=_.y;return V.createElement(Il,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,isActive:y,easing:g},V.createElement("path",dx({},dn(n,!0),{className:b,d:fM(N,O,k,j,f),ref:r})))}):V.createElement("path",dx({},dn(n,!0),{className:b,d:fM(c,u,d,h,f)}))};function Vk(){return Vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vk.apply(this,arguments)}var wq=function(t){var n=t.cx,r=t.cy,a=t.r,s=t.className,o=an("recharts-dot",s);return n===+n&&r===+r&&a===+a?p.createElement("circle",Vk({},dn(t,!1),Ty(t),{className:o,cx:n,cy:r,r:a})):null};function np(e){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},np(e)}var iMe=["x","y","top","left","width","height","className"];function Gk(){return Gk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gk.apply(this,arguments)}function mM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function sMe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mM(Object(n),!0).forEach(function(r){oMe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oMe(e,t,n){return t=lMe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lMe(e){var t=cMe(e,"string");return np(t)=="symbol"?t:t+""}function cMe(e,t){if(np(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(np(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uMe(e,t){if(e==null)return{};var n=dMe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function dMe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var hMe=function(t,n,r,a,s,o){return"M".concat(t,",").concat(s,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},fMe=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,h=d===void 0?0:d,f=t.height,m=f===void 0?0:f,g=t.className,v=uMe(t,iMe),x=sMe({x:r,y:s,top:l,left:u,width:h,height:m},v);return!at(r)||!at(s)||!at(h)||!at(m)||!at(l)||!at(u)?null:V.createElement("path",Gk({},dn(x,!0),{className:an("recharts-cross",g),d:hMe(r,s,h,m,l,u)}))},mMe=R8,pMe=mMe(Object.getPrototypeOf,Object),gMe=pMe,vMe=Oo,yMe=gMe,xMe=Io,bMe="[object Object]",wMe=Function.prototype,jMe=Object.prototype,jq=wMe.toString,_Me=jMe.hasOwnProperty,kMe=jq.call(Object);function SMe(e){if(!xMe(e)||vMe(e)!=bMe)return!1;var t=yMe(e);if(t===null)return!0;var n=_Me.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&jq.call(n)==kMe}var NMe=SMe;const CMe=vn(NMe);var AMe=Oo,EMe=Io,TMe="[object Boolean]";function PMe(e){return e===!0||e===!1||EMe(e)&&AMe(e)==TMe}var OMe=PMe;const IMe=vn(OMe);function rp(e){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(e)}function hx(){return hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hx.apply(this,arguments)}function RMe(e,t){return $Me(e)||LMe(e,t)||DMe(e,t)||MMe()}function MMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DMe(e,t){if(e){if(typeof e=="string")return pM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pM(e,t)}}function pM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function LMe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function $Me(e){if(Array.isArray(e))return e}function gM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gM(Object(n),!0).forEach(function(r){FMe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FMe(e,t,n){return t=UMe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UMe(e){var t=BMe(e,"string");return rp(t)=="symbol"?t:t+""}function BMe(e,t){if(rp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yM=function(t,n,r,a,s){var o=r-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+s),l+="L ".concat(t+r-o/2-a,",").concat(n+s),l+="L ".concat(t,",").concat(n," Z"),l},zMe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},WMe=function(t){var n=vM(vM({},zMe),t),r=p.useRef(),a=p.useState(-1),s=RMe(a,2),o=s[0],l=s[1];p.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&l(b)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,f=n.height,m=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,y=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var w=an("recharts-trapezoid",m);return y?V.createElement(Il,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:c,y:u},duration:v,animationEasing:g,isActive:y},function(b){var _=b.upperWidth,k=b.lowerWidth,j=b.height,N=b.x,O=b.y;return V.createElement(Il,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,easing:g},V.createElement("path",hx({},dn(n,!0),{className:w,d:yM(N,O,_,k,j),ref:r})))}):V.createElement("g",null,V.createElement("path",hx({},dn(n,!0),{className:w,d:yM(c,u,d,h,f)})))},qMe=["option","shapeType","propTransformer","activeClassName","isActive"];function ap(e){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ap(e)}function HMe(e,t){if(e==null)return{};var n=KMe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function KMe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function xM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xM(Object(n),!0).forEach(function(r){VMe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VMe(e,t,n){return t=GMe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GMe(e){var t=YMe(e,"string");return ap(t)=="symbol"?t:t+""}function YMe(e,t){if(ap(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ap(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XMe(e,t){return fx(fx({},t),e)}function JMe(e,t){return e==="symbols"}function bM(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return V.createElement(VA,n);case"trapezoid":return V.createElement(WMe,n);case"sector":return V.createElement(uq,n);case"symbols":if(JMe(t))return V.createElement(dA,n);break;default:return null}}function QMe(e){return p.isValidElement(e)?e.props:e}function ZMe(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?XMe:r,s=e.activeClassName,o=s===void 0?"recharts-active-shape":s,l=e.isActive,c=HMe(e,qMe),u;if(p.isValidElement(t))u=p.cloneElement(t,fx(fx({},c),QMe(t)));else if(zt(t))u=t(c);else if(CMe(t)&&!IMe(t)){var d=a(t,c);u=V.createElement(bM,{shapeType:n,elementProps:d})}else{var h=c;u=V.createElement(bM,{shapeType:n,elementProps:h})}return l?V.createElement(Tr,{className:o},u):u}function C0(e,t){return t!=null&&"trapezoids"in e.props}function A0(e,t){return t!=null&&"sectors"in e.props}function ip(e,t){return t!=null&&"points"in e.props}function eDe(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,s=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&s}function tDe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function nDe(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function rDe(e,t){var n;return C0(e,t)?n=eDe:A0(e,t)?n=tDe:ip(e,t)&&(n=nDe),n}function aDe(e,t){var n;return C0(e,t)?n="trapezoids":A0(e,t)?n="sectors":ip(e,t)&&(n="points"),n}function iDe(e,t){if(C0(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(A0(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return ip(e,t)?t.payload:{}}function sDe(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=aDe(n,t),s=iDe(n,t),o=r.filter(function(c,u){var d=WA(s,c),h=n.props[a].filter(function(g){var v=rDe(n,t);return v(g,t)}),f=n.props[a].indexOf(h[h.length-1]),m=u===f;return d&&m}),l=r.indexOf(o[o.length-1]);return l}var oDe=Math.ceil,lDe=Math.max;function cDe(e,t,n,r){for(var a=-1,s=lDe(oDe((t-e)/(n||1)),0),o=Array(s);s--;)o[r?s:++a]=e,e+=n;return o}var uDe=cDe,dDe=Z8,wM=1/0,hDe=17976931348623157e292;function fDe(e){if(!e)return e===0?e:0;if(e=dDe(e),e===wM||e===-wM){var t=e<0?-1:1;return t*hDe}return e===e?e:0}var _q=fDe,mDe=uDe,pDe=p0,Wj=_q;function gDe(e){return function(t,n,r){return r&&typeof r!="number"&&pDe(t,n,r)&&(n=r=void 0),t=Wj(t),n===void 0?(n=t,t=0):n=Wj(n),r=r===void 0?t<n?1:-1:Wj(r),mDe(t,n,r,e)}}var vDe=gDe,yDe=vDe,xDe=yDe(),bDe=xDe;const mx=vn(bDe);function sp(e){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}function jM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _M(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jM(Object(n),!0).forEach(function(r){kq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kq(e,t,n){return t=wDe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wDe(e){var t=jDe(e,"string");return sp(t)=="symbol"?t:t+""}function jDe(e,t){if(sp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(sp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _De=["Webkit","Moz","O","ms"],kDe=function(t,n){var r=t.replace(/(\w)/,function(s){return s.toUpperCase()}),a=_De.reduce(function(s,o){return _M(_M({},s),{},kq({},o+r,n))},{});return a[t]=n,a};function Qd(e){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(e)}function px(){return px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},px.apply(this,arguments)}function kM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function qj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kM(Object(n),!0).forEach(function(r){Ya(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nq(r.key),r)}}function NDe(e,t,n){return t&&SM(e.prototype,t),n&&SM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function CDe(e,t,n){return t=gx(t),ADe(e,Sq()?Reflect.construct(t,n||[],gx(e).constructor):t.apply(e,n))}function ADe(e,t){if(t&&(Qd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EDe(e)}function EDe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sq=function(){return!!e})()}function gx(e){return gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gx(e)}function TDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yk(e,t)}function Yk(e,t){return Yk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Yk(e,t)}function Ya(e,t,n){return t=Nq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nq(e){var t=PDe(e,"string");return Qd(t)=="symbol"?t:t+""}function PDe(e,t){if(Qd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ODe=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,s=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Uf().domain(mx(0,c)).range([s,s+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(a),scale:u,scaleValues:d}},NM=function(t){return t.changedTouches&&!!t.changedTouches.length},Zd=function(e){function t(n){var r;return SDe(this,t),r=CDe(this,t,[n]),Ya(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),Ya(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),Ya(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,s=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:s,startIndex:l})}),r.detachDragEndListener()}),Ya(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ya(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ya(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ya(r,"handleSlideDragStart",function(a){var s=NM(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return TDe(t,e),NDe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,s=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(a,s),f=Math.max(a,s),m=t.getIndexInRange(o,h),g=t.getIndexInRange(o,f);return{startIndex:m-m%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,s=a.data,o=a.tickFormatter,l=a.dataKey,c=Fs(s[r],l,r);return zt(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,s=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,g=c.onChange,v=r.pageX-s;v>0?v=Math.min(v,u+d-h-l,u+d-h-o):v<0&&(v=Math.max(v,u-o,u-l));var x=this.getIndex({startX:o+v,endX:l+v});(x.startIndex!==f||x.endIndex!==m)&&g&&g(x),this.setState({startX:o+v,endX:l+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var s=NM(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,h=d.x,f=d.width,m=d.travellerWidth,g=d.onChange,v=d.gap,x=d.data,y={startX:this.state.startX,endX:this.state.endX},w=r.pageX-s;w>0?w=Math.min(w,h+f-m-u):w<0&&(w=Math.max(w,h-u)),y[o]=u+w;var b=this.getIndex(y),_=b.startIndex,k=b.endIndex,j=function(){var O=x.length-1;return o==="startX"&&(l>c?_%v===0:k%v===0)||l<c&&k===O||o==="endX"&&(l>c?k%v===0:_%v===0)||l>c&&k===O};this.setState(Ya(Ya({},o,u+w),"brushMoveStartX",r.pageX),function(){g&&j()&&g(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],h=l.indexOf(d);if(h!==-1){var f=h+r;if(!(f===-1||f>=l.length)){var m=l[f];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(Ya({},a,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return V.createElement("rect",{stroke:u,fill:c,x:a,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,h=p.Children.only(u);return h?V.cloneElement(h,{x:a,y:s,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var s,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,g=c.data,v=c.startIndex,x=c.endIndex,y=Math.max(r,this.props.x),w=qj(qj({},dn(this.props,!1)),{},{x:y,y:u,width:d,height:h}),b=m||"Min value: ".concat((s=g[v])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=g[x])===null||o===void 0?void 0:o.name);return V.createElement(Tr,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),l.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,w))}},{key:"renderSlide",value:function(r,a){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(r,a)+u,h=Math.max(Math.abs(a-r)-u,0);return V.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,s=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,f=d.endX,m=5,g={pointerEvents:"none",fill:u};return V.createElement(Tr,{className:"recharts-brush-texts"},V.createElement(Hy,px({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:o+l/2},g),this.getTextOfTick(a)),V.createElement(Hy,px({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:o+l/2},g),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,a=r.data,s=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,f=this.state,m=f.startX,g=f.endX,v=f.isTextActive,x=f.isSlideMoving,y=f.isTravellerMoving,w=f.isTravellerFocused;if(!a||!a.length||!at(l)||!at(c)||!at(u)||!at(d)||u<=0||d<=0)return null;var b=an("recharts-brush",s),_=V.Children.count(o)===1,k=kDe("userSelect","none");return V.createElement(Tr,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(v||x||y||w||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,s=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(s+l/2)-1;return V.createElement(V.Fragment,null,V.createElement("rect",{x:a,y:s,width:o,height:l,fill:c,stroke:"none"}),V.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),V.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var s;return V.isValidElement(r)?s=V.cloneElement(r,a):zt(r)?s=r(a):s=t.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(r,a){var s=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(s!==a.prevData||u!==a.prevUpdateId)return qj({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?ODe({data:s,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var f=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,a){for(var s=r.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>a?l=c:o=c}return a>=r[l]?l:o}}])}(p.PureComponent);Ya(Zd,"displayName","Brush");Ya(Zd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var IDe=yA;function RDe(e,t){var n;return IDe(e,function(r,a,s){return n=t(r,a,s),!n}),!!n}var MDe=RDe,DDe=N8,LDe=Vl,$De=MDe,FDe=Wa,UDe=p0;function BDe(e,t,n){var r=FDe(e)?DDe:$De;return n&&UDe(e,t,n)&&(t=void 0),r(e,LDe(t))}var zDe=BDe;const WDe=vn(zDe);var Rs=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},CM=G8;function qDe(e,t,n){t=="__proto__"&&CM?CM(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var HDe=qDe,KDe=HDe,VDe=K8,GDe=Vl;function YDe(e,t){var n={};return t=GDe(t),VDe(e,function(r,a,s){KDe(n,a,t(r,a,s))}),n}var XDe=YDe;const JDe=vn(XDe);function QDe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var ZDe=QDe,eLe=yA;function tLe(e,t){var n=!0;return eLe(e,function(r,a,s){return n=!!t(r,a,s),n}),n}var nLe=tLe,rLe=ZDe,aLe=nLe,iLe=Vl,sLe=Wa,oLe=p0;function lLe(e,t,n){var r=sLe(e)?rLe:aLe;return n&&oLe(e,t,n)&&(t=void 0),r(e,iLe(t))}var cLe=lLe;const Cq=vn(cLe);var uLe=["x","y"];function op(e){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},op(e)}function Xk(){return Xk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xk.apply(this,arguments)}function AM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function df(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AM(Object(n),!0).forEach(function(r){dLe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dLe(e,t,n){return t=hLe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hLe(e){var t=fLe(e,"string");return op(t)=="symbol"?t:t+""}function fLe(e,t){if(op(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(op(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mLe(e,t){if(e==null)return{};var n=pLe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function pLe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function gLe(e,t){var n=e.x,r=e.y,a=mLe(e,uLe),s="".concat(n),o=parseInt(s,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),h="".concat(t.width||a.width),f=parseInt(h,10);return df(df(df(df(df({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:f,name:t.name,radius:t.radius})}function EM(e){return V.createElement(ZMe,Xk({shapeType:"rectangle",propTransformer:gLe,activeClassName:"recharts-active-bar"},e))}var vLe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var s=at(r)||Mxe(r);return s?t(r,a):(s||Jc(),n)}},yLe=["value","background"],Aq;function eh(e){"@babel/helpers - typeof";return eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eh(e)}function xLe(e,t){if(e==null)return{};var n=bLe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function bLe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vx(){return vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vx.apply(this,arguments)}function TM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TM(Object(n),!0).forEach(function(r){dl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wLe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tq(r.key),r)}}function jLe(e,t,n){return t&&PM(e.prototype,t),n&&PM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _Le(e,t,n){return t=yx(t),kLe(e,Eq()?Reflect.construct(t,n||[],yx(e).constructor):t.apply(e,n))}function kLe(e,t){if(t&&(eh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SLe(e)}function SLe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Eq=function(){return!!e})()}function yx(e){return yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yx(e)}function NLe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jk(e,t)}function Jk(e,t){return Jk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Jk(e,t)}function dl(e,t,n){return t=Tq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tq(e){var t=CLe(e,"string");return eh(t)=="symbol"?t:t+""}function CLe(e,t){if(eh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kn=function(e){function t(){var n;wLe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=_Le(this,t,[].concat(a)),dl(n,"state",{isAnimationFinished:!1}),dl(n,"id",l0("recharts-bar-")),dl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),dl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return NLe(t,e),jLe(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=dn(this.props,!1);return r&&r.map(function(h,f){var m=f===c,g=m?u:o,v=ur(ur(ur({},d),h),{},{isActive:m,option:g,index:f,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return V.createElement(Tr,vx({className:"recharts-bar-rectangle"},Py(a.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),V.createElement(EM,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,s=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,h=a.animationId,f=this.state.prevData;return V.createElement(Il,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,v=s.map(function(x,y){var w=f&&f[y];if(w){var b=Cu(w.x,x.x),_=Cu(w.y,x.y),k=Cu(w.width,x.width),j=Cu(w.height,x.height);return ur(ur({},x),{},{x:b(g),y:_(g),width:k(g),height:j(g)})}if(o==="horizontal"){var N=Cu(0,x.height),O=N(g);return ur(ur({},x),{},{y:x.y+x.height-O,height:O})}var I=Cu(0,x.width),P=I(g);return ur(ur({},x),{},{width:P})});return V.createElement(Tr,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,s=r.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!WA(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,s=a.data,o=a.dataKey,l=a.activeIndex,c=dn(this.props.background,!1);return s.map(function(u,d){u.value;var h=u.background,f=xLe(u,yLe);if(!h)return null;var m=ur(ur(ur(ur(ur({},f),{},{fill:"#eee"},h),c),Py(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return V.createElement(EM,vx({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,h=as(d,N0);if(!h)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,m=function(x,y){var w=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:w,errorVal:Fs(x,y)}},g={clipPath:r?"url(#clipPath-".concat(a,")"):null};return V.createElement(Tr,g,h.map(function(v){return V.cloneElement(v,{key:"error-bar-".concat(a,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,s=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,f=r.height,m=r.isAnimationActive,g=r.background,v=r.id;if(a||!s||!s.length)return null;var x=this.state.isAnimationFinished,y=an("recharts-bar",o),w=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,_=w||b,k=hn(v)?this.id:v;return V.createElement(Tr,{className:y},w||b?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(k)},V.createElement("rect",{x:w?u:u-h/2,y:b?d:d-f/2,width:w?h:h*2,height:b?f:f*2}))):null,V.createElement(Tr,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(k,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,k),(!m||x)&&Zi.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(p.PureComponent);Aq=Kn;dl(Kn,"displayName","Bar");dl(Kn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!jl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});dl(Kn,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,s=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,f=e.offset,m=rOe(r,n);if(!m)return null;var g=t.layout,v=n.type.defaultProps,x=v!==void 0?ur(ur({},v),n.props):n.props,y=x.dataKey,w=x.children,b=x.minPointSize,_=g==="horizontal"?o:s,k=u?_.scale.domain():null,j=dOe({numericAxis:_}),N=as(w,tW),O=h.map(function(I,P){var S,D,L,U,F,M;u?S=aOe(u[d+P],k):(S=Fs(I,y),Array.isArray(S)||(S=[j,S]));var T=vLe(b,Aq.defaultProps.minPointSize)(S[1],P);if(g==="horizontal"){var E,$=[o.scale(S[0]),o.scale(S[1])],A=$[0],B=$[1];D=ER({axis:s,ticks:l,bandSize:a,offset:m.offset,entry:I,index:P}),L=(E=B??A)!==null&&E!==void 0?E:void 0,U=m.size;var R=A-B;if(F=Number.isNaN(R)?0:R,M={x:D,y:o.y,width:U,height:o.height},Math.abs(T)>0&&Math.abs(F)<Math.abs(T)){var C=Qi(F||T)*(Math.abs(T)-Math.abs(F));L-=C,F+=C}}else{var W=[s.scale(S[0]),s.scale(S[1])],Q=W[0],X=W[1];if(D=Q,L=ER({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:I,index:P}),U=X-Q,F=m.size,M={x:s.x,y:L,width:s.width,height:F},Math.abs(T)>0&&Math.abs(U)<Math.abs(T)){var Z=Qi(U||T)*(Math.abs(T)-Math.abs(U));U+=Z}}return ur(ur(ur({},I),{},{x:D,y:L,width:U,height:F,value:u?S:S[1],payload:I,background:M},N&&N[P]&&N[P].props),{},{tooltipPayload:[oq(n,I)],tooltipPosition:{x:D+U/2,y:L+F/2}})});return ur({data:O,layout:g},f)});function lp(e){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lp(e)}function ALe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pq(r.key),r)}}function ELe(e,t,n){return t&&OM(e.prototype,t),n&&OM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function IM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IM(Object(n),!0).forEach(function(r){E0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function E0(e,t,n){return t=Pq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pq(e){var t=TLe(e,"string");return lp(t)=="symbol"?t:t+""}function TLe(e,t){if(lp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(lp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PLe=function(t,n,r,a,s){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},f=!!Ja(u,Kn);return d.reduce(function(m,g){var v=n[g],x=v.orientation,y=v.domain,w=v.padding,b=w===void 0?{}:w,_=v.mirror,k=v.reversed,j="".concat(x).concat(_?"Mirror":""),N,O,I,P,S;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var D=y[1]-y[0],L=1/0,U=v.categoricalDomain.sort($xe);if(U.forEach(function(W,Q){Q>0&&(L=Math.min((W||0)-(U[Q-1]||0),L))}),Number.isFinite(L)){var F=L/D,M=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(N=F*M/2),v.padding==="no-gap"){var T=Yc(t.barCategoryGap,F*M),E=F*M/2;N=E-T-(E-T)/M*T}}}a==="xAxis"?O=[r.left+(b.left||0)+(N||0),r.left+r.width-(b.right||0)-(N||0)]:a==="yAxis"?O=c==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(N||0),r.top+r.height-(b.bottom||0)-(N||0)]:O=v.range,k&&(O=[O[1],O[0]]);var $=tOe(v,s,f),A=$.scale,B=$.realScaleType;A.domain(y).range(O),nOe(A);var R=uOe(A,Gi(Gi({},v),{},{realScaleType:B}));a==="xAxis"?(S=x==="top"&&!_||x==="bottom"&&_,I=r.left,P=h[j]-S*v.height):a==="yAxis"&&(S=x==="left"&&!_||x==="right"&&_,I=h[j]-S*v.width,P=r.top);var C=Gi(Gi(Gi({},v),R),{},{realScaleType:B,x:I,y:P,scale:A,width:a==="xAxis"?r.width:v.width,height:a==="yAxis"?r.height:v.height});return C.bandSize=ix(C,R),!v.hide&&a==="xAxis"?h[j]+=(S?-1:1)*C.height:v.hide||(h[j]+=(S?-1:1)*C.width),Gi(Gi({},m),{},E0({},g,C))},{})},Oq=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return{x:Math.min(r,s),y:Math.min(a,o),width:Math.abs(s-r),height:Math.abs(o-a)}},OLe=function(t){var n=t.x1,r=t.y1,a=t.x2,s=t.y2;return Oq({x:n,y:r},{x:a,y:s})},Iq=function(){function e(t){ALe(this,e),this.scale=t}return ELe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],s=r[r.length-1];return a<=s?n>=a&&n<=s:n>=s&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();E0(Iq,"EPS",1e-4);var GA=function(t){var n=Object.keys(t).reduce(function(r,a){return Gi(Gi({},r),{},E0({},a,Iq.create(t[a])))},{});return Gi(Gi({},n),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return JDe(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return Cq(a,function(s,o){return n[o].isInRange(s)})}})};function ILe(e){return(e%180+180)%180}var RLe=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=ILe(a),o=s*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},MLe=Vl,DLe=Qp,LLe=f0;function $Le(e){return function(t,n,r){var a=Object(t);if(!DLe(t)){var s=MLe(n);t=LLe(t),n=function(l){return s(a[l],l,a)}}var o=e(t,n,r);return o>-1?a[s?t[o]:o]:void 0}}var FLe=$Le,ULe=_q;function BLe(e){var t=ULe(e),n=t%1;return t===t?n?t-n:t:0}var zLe=BLe,WLe=U8,qLe=Vl,HLe=zLe,KLe=Math.max;function VLe(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:HLe(n);return a<0&&(a=KLe(r+a,0)),WLe(e,qLe(t),a)}var GLe=VLe,YLe=FLe,XLe=GLe,JLe=YLe(XLe),QLe=JLe;const ZLe=vn(QLe);var e$e=Fye(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),YA=p.createContext(void 0),XA=p.createContext(void 0),Rq=p.createContext(void 0),Mq=p.createContext({}),Dq=p.createContext(void 0),Lq=p.createContext(0),$q=p.createContext(0),RM=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,s=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=e$e(s);return V.createElement(YA.Provider,{value:r},V.createElement(XA.Provider,{value:a},V.createElement(Mq.Provider,{value:s},V.createElement(Rq.Provider,{value:d},V.createElement(Dq.Provider,{value:o},V.createElement(Lq.Provider,{value:u},V.createElement($q.Provider,{value:c},l)))))))},t$e=function(){return p.useContext(Dq)},Fq=function(t){var n=p.useContext(YA);n==null&&Jc();var r=n[t];return r==null&&Jc(),r},n$e=function(){var t=p.useContext(YA);return nl(t)},r$e=function(){var t=p.useContext(XA),n=ZLe(t,function(r){return Cq(r.domain,Number.isFinite)});return n||nl(t)},Uq=function(t){var n=p.useContext(XA);n==null&&Jc();var r=n[t];return r==null&&Jc(),r},a$e=function(){var t=p.useContext(Rq);return t},i$e=function(){return p.useContext(Mq)},JA=function(){return p.useContext($q)},QA=function(){return p.useContext(Lq)};function th(e){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},th(e)}function s$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o$e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zq(r.key),r)}}function l$e(e,t,n){return t&&o$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function c$e(e,t,n){return t=xx(t),u$e(e,Bq()?Reflect.construct(t,n||[],xx(e).constructor):t.apply(e,n))}function u$e(e,t){if(t&&(th(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d$e(e)}function d$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bq=function(){return!!e})()}function xx(e){return xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xx(e)}function h$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qk(e,t)}function Qk(e,t){return Qk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Qk(e,t)}function MM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function DM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MM(Object(n),!0).forEach(function(r){ZA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZA(e,t,n){return t=zq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zq(e){var t=f$e(e,"string");return th(t)=="symbol"?t:t+""}function f$e(e,t){if(th(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(th(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m$e(e,t){return y$e(e)||v$e(e,t)||g$e(e,t)||p$e()}function p$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g$e(e,t){if(e){if(typeof e=="string")return LM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LM(e,t)}}function LM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v$e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function y$e(e){if(Array.isArray(e))return e}function Zk(){return Zk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zk.apply(this,arguments)}var x$e=function(t,n){var r;return V.isValidElement(t)?r=V.cloneElement(t,n):zt(t)?r=t(n):r=V.createElement("line",Zk({},n,{className:"recharts-reference-line-line"})),r},b$e=function(t,n,r,a,s,o,l,c,u){var d=s.x,h=s.y,f=s.width,m=s.height;if(r){var g=u.y,v=t.y.apply(g,{position:o});if(Rs(u,"discard")&&!t.y.isInRange(v))return null;var x=[{x:d+f,y:v},{x:d,y:v}];return c==="left"?x.reverse():x}if(n){var y=u.x,w=t.x.apply(y,{position:o});if(Rs(u,"discard")&&!t.x.isInRange(w))return null;var b=[{x:w,y:h+m},{x:w,y:h}];return l==="top"?b.reverse():b}if(a){var _=u.segment,k=_.map(function(j){return t.apply(j,{position:o})});return Rs(u,"discard")&&WDe(k,function(j){return!t.isInRange(j)})?null:k}return null};function w$e(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=t$e(),d=Fq(a),h=Uq(s),f=a$e();if(!u||!f)return null;go(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=GA({x:d.scale,y:h.scale}),g=_r(t),v=_r(n),x=r&&r.length===2,y=b$e(m,g,v,x,f,e.position,d.orientation,h.orientation,e);if(!y)return null;var w=m$e(y,2),b=w[0],_=b.x,k=b.y,j=w[1],N=j.x,O=j.y,I=Rs(e,"hidden")?"url(#".concat(u,")"):void 0,P=DM(DM({clipPath:I},dn(e,!0)),{},{x1:_,y1:k,x2:N,y2:O});return V.createElement(Tr,{className:an("recharts-reference-line",l)},x$e(o,P),ea.renderCallByParent(e,OLe({x1:_,y1:k,x2:N,y2:O})))}var eE=function(e){function t(){return s$e(this,t),c$e(this,t,arguments)}return h$e(t,e),l$e(t,[{key:"render",value:function(){return V.createElement(w$e,this.props)}}])}(V.Component);ZA(eE,"displayName","ReferenceLine");ZA(eE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function eS(){return eS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eS.apply(this,arguments)}function nh(e){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nh(e)}function $M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function FM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$M(Object(n),!0).forEach(function(r){T0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$M(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _$e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qq(r.key),r)}}function k$e(e,t,n){return t&&_$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function S$e(e,t,n){return t=bx(t),N$e(e,Wq()?Reflect.construct(t,n||[],bx(e).constructor):t.apply(e,n))}function N$e(e,t){if(t&&(nh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C$e(e)}function C$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wq=function(){return!!e})()}function bx(e){return bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bx(e)}function A$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tS(e,t)}function tS(e,t){return tS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},tS(e,t)}function T0(e,t,n){return t=qq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qq(e){var t=E$e(e,"string");return nh(t)=="symbol"?t:t+""}function E$e(e,t){if(nh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T$e=function(t){var n=t.x,r=t.y,a=t.xAxis,s=t.yAxis,o=GA({x:a.scale,y:s.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Rs(t,"discard")&&!o.isInRange(l)?null:l},P0=function(e){function t(){return j$e(this,t),S$e(this,t,arguments)}return A$e(t,e),k$e(t,[{key:"render",value:function(){var r=this.props,a=r.x,s=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=_r(a),d=_r(s);if(go(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=T$e(this.props);if(!h)return null;var f=h.x,m=h.y,g=this.props,v=g.shape,x=g.className,y=Rs(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=FM(FM({clipPath:y},dn(this.props,!0)),{},{cx:f,cy:m});return V.createElement(Tr,{className:an("recharts-reference-dot",x)},t.renderDot(v,w),ea.renderCallByParent(this.props,{x:f-o,y:m-o,width:2*o,height:2*o}))}}])}(V.Component);T0(P0,"displayName","ReferenceDot");T0(P0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});T0(P0,"renderDot",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):zt(e)?n=e(t):n=V.createElement(wq,eS({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function nS(){return nS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nS.apply(this,arguments)}function rh(e){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rh(e)}function UM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function BM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UM(Object(n),!0).forEach(function(r){O0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O$e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kq(r.key),r)}}function I$e(e,t,n){return t&&O$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R$e(e,t,n){return t=wx(t),M$e(e,Hq()?Reflect.construct(t,n||[],wx(e).constructor):t.apply(e,n))}function M$e(e,t){if(t&&(rh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D$e(e)}function D$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hq=function(){return!!e})()}function wx(e){return wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wx(e)}function L$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rS(e,t)}function rS(e,t){return rS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},rS(e,t)}function O0(e,t,n){return t=Kq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kq(e){var t=$$e(e,"string");return rh(t)=="symbol"?t:t+""}function $$e(e,t){if(rh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F$e=function(t,n,r,a,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,d=s.xAxis,h=s.yAxis;if(!d||!h)return null;var f=GA({x:d.scale,y:h.scale}),m={x:t?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(c,{position:"start"}):f.y.rangeMin},g={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:a?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Rs(s,"discard")&&(!f.isInRange(m)||!f.isInRange(g))?null:Oq(m,g)},I0=function(e){function t(){return P$e(this,t),R$e(this,t,arguments)}return L$e(t,e),I$e(t,[{key:"render",value:function(){var r=this.props,a=r.x1,s=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;go(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=_r(a),f=_r(s),m=_r(o),g=_r(l),v=this.props.shape;if(!h&&!f&&!m&&!g&&!v)return null;var x=F$e(h,f,m,g,this.props);if(!x&&!v)return null;var y=Rs(this.props,"hidden")?"url(#".concat(d,")"):void 0;return V.createElement(Tr,{className:an("recharts-reference-area",c)},t.renderRect(v,BM(BM({clipPath:y},dn(this.props,!0)),x)),ea.renderCallByParent(this.props,x))}}])}(V.Component);O0(I0,"displayName","ReferenceArea");O0(I0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});O0(I0,"renderRect",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):zt(e)?n=e(t):n=V.createElement(VA,nS({},t,{className:"recharts-reference-area-rect"})),n});function Vq(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function U$e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return RLe(r,n)}function B$e(e,t,n){var r=n==="width",a=e.x,s=e.y,o=e.width,l=e.height;return t===1?{start:r?a:s,end:r?a+o:s+l}:{start:r?a+o:s+l,end:r?a:s}}function jx(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-a)<=0}function z$e(e,t){return Vq(e,t+1)}function W$e(e,t,n,r,a){for(var s=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,h=function(){var g=r==null?void 0:r[c];if(g===void 0)return{v:Vq(r,u)};var v=c,x,y=function(){return x===void 0&&(x=n(g,v)),x},w=g.coordinate,b=c===0||jx(e,w,y,d,l);b||(c=0,d=o,u+=1),b&&(d=w+e*(y()/2+a),c+=u)},f;u<=s.length;)if(f=h(),f)return f.v;return[]}function cp(e){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(e)}function zM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Qr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zM(Object(n),!0).forEach(function(r){q$e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function q$e(e,t,n){return t=H$e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H$e(e){var t=K$e(e,"string");return cp(t)=="symbol"?t:t+""}function K$e(e,t){if(cp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V$e(e,t,n,r,a){for(var s=(r||[]).slice(),o=s.length,l=t.start,c=t.end,u=function(f){var m=s[f],g,v=function(){return g===void 0&&(g=n(m,f)),g};if(f===o-1){var x=e*(m.coordinate+e*v()/2-c);s[f]=m=Qr(Qr({},m),{},{tickCoord:x>0?m.coordinate-x*e:m.coordinate})}else s[f]=m=Qr(Qr({},m),{},{tickCoord:m.coordinate});var y=jx(e,m.tickCoord,v,l,c);y&&(c=m.tickCoord-e*(v()/2+a),s[f]=Qr(Qr({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function G$e(e,t,n,r,a,s){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(s){var d=r[l-1],h=n(d,l-1),f=e*(d.coordinate+e*h/2-u);o[l-1]=d=Qr(Qr({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate});var m=jx(e,d.tickCoord,function(){return h},c,u);m&&(u=d.tickCoord-e*(h/2+a),o[l-1]=Qr(Qr({},d),{},{isShow:!0}))}for(var g=s?l-1:l,v=function(w){var b=o[w],_,k=function(){return _===void 0&&(_=n(b,w)),_};if(w===0){var j=e*(b.coordinate-e*k()/2-c);o[w]=b=Qr(Qr({},b),{},{tickCoord:j<0?b.coordinate-j*e:b.coordinate})}else o[w]=b=Qr(Qr({},b),{},{tickCoord:b.coordinate});var N=jx(e,b.tickCoord,k,c,u);N&&(c=b.tickCoord+e*(k()/2+a),o[w]=Qr(Qr({},b),{},{isShow:!0}))},x=0;x<g;x++)v(x);return o}function tE(e,t,n){var r=e.tick,a=e.ticks,s=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,h=e.angle;if(!a||!a.length||!r)return[];if(at(c)||jl.isSsr)return z$e(a,typeof c=="number"&&at(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",g=d&&m==="width"?Ff(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},v=function(b,_){var k=zt(u)?u(b.value,_):b.value;return m==="width"?U$e(Ff(k,{fontSize:t,letterSpacing:n}),g,h):Ff(k,{fontSize:t,letterSpacing:n})[m]},x=a.length>=2?Qi(a[1].coordinate-a[0].coordinate):1,y=B$e(s,x,m);return c==="equidistantPreserveStart"?W$e(x,y,v,a,o):(c==="preserveStart"||c==="preserveStartEnd"?f=G$e(x,y,v,a,o,c==="preserveStartEnd"):f=V$e(x,y,v,a,o),f.filter(function(w){return w.isShow}))}var Y$e=["viewBox"],X$e=["viewBox"],J$e=["ticks"];function ah(e){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ah(e)}function Zu(){return Zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zu.apply(this,arguments)}function WM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WM(Object(n),!0).forEach(function(r){nE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hj(e,t){if(e==null)return{};var n=Q$e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Q$e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Z$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yq(r.key),r)}}function e4e(e,t,n){return t&&qM(e.prototype,t),n&&qM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function t4e(e,t,n){return t=_x(t),n4e(e,Gq()?Reflect.construct(t,n||[],_x(e).constructor):t.apply(e,n))}function n4e(e,t){if(t&&(ah(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r4e(e)}function r4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gq=function(){return!!e})()}function _x(e){return _x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_x(e)}function a4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aS(e,t)}function aS(e,t){return aS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},aS(e,t)}function nE(e,t,n){return t=Yq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yq(e){var t=i4e(e,"string");return ah(t)=="symbol"?t:t+""}function i4e(e,t){if(ah(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rh=function(e){function t(n){var r;return Z$e(this,t),r=t4e(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return a4e(t,e),e4e(t,[{key:"shouldComponentUpdate",value:function(r,a){var s=r.viewBox,o=Hj(r,Y$e),l=this.props,c=l.viewBox,u=Hj(l,X$e);return!fd(s,c)||!fd(o,u)||!fd(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,s=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,h=a.mirror,f=a.tickMargin,m,g,v,x,y,w,b=h?-1:1,_=r.tickSize||d,k=at(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=g=r.coordinate,x=o+ +!h*c,v=x-b*_,w=v-b*f,y=k;break;case"left":v=x=r.coordinate,g=s+ +!h*l,m=g-b*_,y=m-b*f,w=k;break;case"right":v=x=r.coordinate,g=s+ +h*l,m=g+b*_,y=m+b*f,w=k;break;default:m=g=r.coordinate,x=o+ +h*c,v=x+b*_,w=v+b*f,y=k;break}return{line:{x1:m,y1:v,x2:g,y2:x},tick:{x:y,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=gr(gr(gr({},dn(this.props,!1)),dn(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);h=gr(gr({},h),{},{x1:a,y1:s+f*l,x2:a+o,y2:s+f*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);h=gr(gr({},h),{},{x1:a+m*o,y1:s,x2:a+m*o,y2:s+l})}return V.createElement("line",Zu({},h,{className:an("recharts-cartesian-axis-line",Ai(d,"className"))}))}},{key:"renderTicks",value:function(r,a,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,f=l.unit,m=tE(gr(gr({},this.props),{},{ticks:r}),a,s),g=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),x=dn(this.props,!1),y=dn(d,!1),w=gr(gr({},x),{},{fill:"none"},dn(c,!1)),b=m.map(function(_,k){var j=o.getTickLineCoord(_),N=j.line,O=j.tick,I=gr(gr(gr(gr({textAnchor:g,verticalAnchor:v},x),{},{stroke:"none",fill:u},y),O),{},{index:k,payload:_,visibleTicksCount:m.length,tickFormatter:h});return V.createElement(Tr,Zu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},Py(o.props,_,k)),c&&V.createElement("line",Zu({},w,N,{className:an("recharts-cartesian-axis-tick-line",Ai(c,"className"))})),d&&t.renderTickItem(d,I,"".concat(zt(h)?h(_.value,k):_.value).concat(f||"")))});return V.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,a=this.props,s=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var h=this.props,f=h.ticks,m=Hj(h,J$e),g=f;return zt(c)&&(g=f&&f.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:V.createElement(Tr,{className:an("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},s&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),ea.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,s){var o,l=an(a.className,"recharts-cartesian-axis-tick-value");return V.isValidElement(r)?o=V.cloneElement(r,gr(gr({},a),{},{className:l})):zt(r)?o=r(gr(gr({},a),{},{className:l})):o=V.createElement(Hy,Zu({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(p.Component);nE(Rh,"displayName","CartesianAxis");nE(Rh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var s4e=["x1","y1","x2","y2","key"],o4e=["offset"];function Qc(e){"@babel/helpers - typeof";return Qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qc(e)}function HM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ta(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HM(Object(n),!0).forEach(function(r){l4e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l4e(e,t,n){return t=c4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c4e(e){var t=u4e(e,"string");return Qc(t)=="symbol"?t:t+""}function u4e(e,t){if(Qc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bc.apply(this,arguments)}function KM(e,t){if(e==null)return{};var n=d4e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function d4e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var h4e=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,c=t.ry;return V.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Xq(e,t){var n;if(V.isValidElement(e))n=V.cloneElement(e,t);else if(zt(e))n=e(t);else{var r=t.x1,a=t.y1,s=t.x2,o=t.y2,l=t.key,c=KM(t,s4e),u=dn(c,!1);u.offset;var d=KM(u,o4e);n=V.createElement("line",bc({},d,{x1:r,y1:a,x2:s,y2:o,fill:"none",key:l}))}return n}function f4e(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,s=e.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=ta(ta({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return Xq(a,u)});return V.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function m4e(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,s=e.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=ta(ta({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return Xq(a,u)});return V.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function p4e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,s=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(f){return Math.round(f+a-a)}).sort(function(f,m){return f-m});a!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var g=!d[m+1],v=g?a+o-f:d[m+1]-f;if(v<=0)return null;var x=m%t.length;return V.createElement("rect",{key:"react-".concat(m),y:f,x:r,height:v,width:s,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function g4e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,s=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(f){return Math.round(f+s-s)}).sort(function(f,m){return f-m});s!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var g=!d[m+1],v=g?s+l-f:d[m+1]-f;if(v<=0)return null;var x=m%r.length;return V.createElement("rect",{key:"react-".concat(m),x:f,y:o,width:v,height:c,stroke:"none",fill:r[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var v4e=function(t,n){var r=t.xAxis,a=t.width,s=t.height,o=t.offset;return iq(tE(ta(ta(ta({},Rh.defaultProps),r),{},{ticks:co(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,n)},y4e=function(t,n){var r=t.yAxis,a=t.width,s=t.height,o=t.offset;return iq(tE(ta(ta(ta({},Rh.defaultProps),r),{},{ticks:co(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,n)},Tu={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function iS(e){var t,n,r,a,s,o,l=JA(),c=QA(),u=i$e(),d=ta(ta({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Tu.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Tu.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Tu.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Tu.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:Tu.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Tu.verticalFill,x:at(e.x)?e.x:u.left,y:at(e.y)?e.y:u.top,width:at(e.width)?e.width:u.width,height:at(e.height)?e.height:u.height}),h=d.x,f=d.y,m=d.width,g=d.height,v=d.syncWithTicks,x=d.horizontalValues,y=d.verticalValues,w=n$e(),b=r$e();if(!at(m)||m<=0||!at(g)||g<=0||!at(h)||h!==+h||!at(f)||f!==+f)return null;var _=d.verticalCoordinatesGenerator||v4e,k=d.horizontalCoordinatesGenerator||y4e,j=d.horizontalPoints,N=d.verticalPoints;if((!j||!j.length)&&zt(k)){var O=x&&x.length,I=k({yAxis:b?ta(ta({},b),{},{ticks:O?x:b.ticks}):void 0,width:l,height:c,offset:u},O?!0:v);go(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Qc(I),"]")),Array.isArray(I)&&(j=I)}if((!N||!N.length)&&zt(_)){var P=y&&y.length,S=_({xAxis:w?ta(ta({},w),{},{ticks:P?y:w.ticks}):void 0,width:l,height:c,offset:u},P?!0:v);go(Array.isArray(S),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Qc(S),"]")),Array.isArray(S)&&(N=S)}return V.createElement("g",{className:"recharts-cartesian-grid"},V.createElement(h4e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),V.createElement(f4e,bc({},d,{offset:u,horizontalPoints:j,xAxis:w,yAxis:b})),V.createElement(m4e,bc({},d,{offset:u,verticalPoints:N,xAxis:w,yAxis:b})),V.createElement(p4e,bc({},d,{horizontalPoints:j})),V.createElement(g4e,bc({},d,{verticalPoints:N})))}iS.displayName="CartesianGrid";function ih(e){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ih(e)}function x4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b4e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zq(r.key),r)}}function w4e(e,t,n){return t&&b4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function j4e(e,t,n){return t=kx(t),_4e(e,Jq()?Reflect.construct(t,n||[],kx(e).constructor):t.apply(e,n))}function _4e(e,t){if(t&&(ih(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k4e(e)}function k4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jq=function(){return!!e})()}function kx(e){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kx(e)}function S4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sS(e,t)}function sS(e,t){return sS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},sS(e,t)}function Qq(e,t,n){return t=Zq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zq(e){var t=N4e(e,"string");return ih(t)=="symbol"?t:t+""}function N4e(e,t){if(ih(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oS(){return oS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oS.apply(this,arguments)}function C4e(e){var t=e.xAxisId,n=JA(),r=QA(),a=Fq(t);return a==null?null:p.createElement(Rh,oS({},a,{className:an("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return co(o,!0)}}))}var ca=function(e){function t(){return x4e(this,t),j4e(this,t,arguments)}return S4e(t,e),w4e(t,[{key:"render",value:function(){return p.createElement(C4e,this.props)}}])}(p.Component);Qq(ca,"displayName","XAxis");Qq(ca,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function sh(e){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sh(e)}function A4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E4e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n9(r.key),r)}}function T4e(e,t,n){return t&&E4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function P4e(e,t,n){return t=Sx(t),O4e(e,e9()?Reflect.construct(t,n||[],Sx(e).constructor):t.apply(e,n))}function O4e(e,t){if(t&&(sh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I4e(e)}function I4e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e9=function(){return!!e})()}function Sx(e){return Sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sx(e)}function R4e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lS(e,t)}function lS(e,t){return lS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},lS(e,t)}function t9(e,t,n){return t=n9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n9(e){var t=M4e(e,"string");return sh(t)=="symbol"?t:t+""}function M4e(e,t){if(sh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(sh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cS(){return cS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cS.apply(this,arguments)}var D4e=function(t){var n=t.yAxisId,r=JA(),a=QA(),s=Uq(n);return s==null?null:p.createElement(Rh,cS({},s,{className:an("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return co(l,!0)}}))},ua=function(e){function t(){return A4e(this,t),P4e(this,t,arguments)}return R4e(t,e),T4e(t,[{key:"render",value:function(){return p.createElement(D4e,this.props)}}])}(p.Component);t9(ua,"displayName","YAxis");t9(ua,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function VM(e){return U4e(e)||F4e(e)||$4e(e)||L4e()}function L4e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $4e(e,t){if(e){if(typeof e=="string")return uS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uS(e,t)}}function F4e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U4e(e){if(Array.isArray(e))return uS(e)}function uS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dS=function(t,n,r,a,s){var o=as(t,eE),l=as(t,P0),c=[].concat(VM(o),VM(l)),u=as(t,I0),d="".concat(a,"Id"),h=a[0],f=n;if(c.length&&(f=c.reduce(function(v,x){if(x.props[d]===r&&Rs(x.props,"extendDomain")&&at(x.props[h])){var y=x.props[h];return[Math.min(v[0],y),Math.max(v[1],y)]}return v},f)),u.length){var m="".concat(h,"1"),g="".concat(h,"2");f=u.reduce(function(v,x){if(x.props[d]===r&&Rs(x.props,"extendDomain")&&at(x.props[m])&&at(x.props[g])){var y=x.props[m],w=x.props[g];return[Math.min(v[0],y,w),Math.max(v[1],y,w)]}return v},f)}return s&&s.length&&(f=s.reduce(function(v,x){return at(x)?[Math.min(v[0],x),Math.max(v[1],x)]:v},f)),f},r9={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,h||c,f),g=n?n+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,g=new Array(m);f<m;f++)g[f]=h[f].fn;return g},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,g){var v=n?n+u:u;if(!this._events[v])return!1;var x=this._events[v],y=arguments.length,w,b;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,h),!0;case 4:return x.fn.call(x.context,d,h,f),!0;case 5:return x.fn.call(x.context,d,h,f,m),!0;case 6:return x.fn.call(x.context,d,h,f,m,g),!0}for(b=1,w=new Array(y-1);b<y;b++)w[b-1]=arguments[b];x.fn.apply(x.context,w)}else{var _=x.length,k;for(b=0;b<_;b++)switch(x[b].once&&this.removeListener(u,x[b].fn,void 0,!0),y){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,d);break;case 3:x[b].fn.call(x[b].context,d,h);break;case 4:x[b].fn.call(x[b].context,d,h,f);break;default:if(!w)for(k=1,w=new Array(y-1);k<y;k++)w[k-1]=arguments[k];x[b].fn.apply(x[b].context,w)}}return!0},l.prototype.on=function(u,d,h){return s(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return s(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!f||g.once)&&(!h||g.context===h)&&o(this,m);else{for(var v=0,x=[],y=g.length;v<y;v++)(g[v].fn!==d||f&&!g[v].once||h&&g[v].context!==h)&&x.push(g[v]);x.length?this._events[m]=x.length===1?x[0]:x:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(r9);var B4e=r9.exports;const z4e=vn(B4e);var Kj=new z4e,Vj="recharts.syncMouseEvents";function up(e){"@babel/helpers - typeof";return up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},up(e)}function W4e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q4e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a9(r.key),r)}}function H4e(e,t,n){return t&&q4e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gj(e,t,n){return t=a9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a9(e){var t=K4e(e,"string");return up(t)=="symbol"?t:t+""}function K4e(e,t){if(up(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(up(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var V4e=function(){function e(){W4e(this,e),Gj(this,"activeIndex",0),Gj(this,"coordinateList",[]),Gj(this,"layout","horizontal")}return H4e(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,s=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,f=n.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=s+c+u,f=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function G4e(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&at(r)&&at(a))return!0}return!1}function Y4e(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function i9(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,s=e.endAngle,o=Br(t,n,r,a),l=Br(t,n,r,s);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:a,endAngle:s}}function X4e(e,t,n){var r,a,s,o;if(e==="horizontal")r=t.x,s=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,h=t.angle,f=Br(l,c,u,h),m=Br(l,c,d,h);r=f.x,a=f.y,s=m.x,o=m.y}else return i9(t);return[{x:r,y:a},{x:s,y:o}]}function dp(e){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}function GM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function rv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GM(Object(n),!0).forEach(function(r){J4e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function J4e(e,t,n){return t=Q4e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q4e(e){var t=Z4e(e,"string");return dp(t)=="symbol"?t:t+""}function Z4e(e,t){if(dp(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(dp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eFe(e){var t,n,r=e.element,a=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,h=e.layout,f=e.chartName,m=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!s||!o||f!=="ScatterChart"&&a!=="axis")return null;var g,v=HR;if(f==="ScatterChart")g=o,v=fMe;else if(f==="BarChart")g=Y4e(h,o,c,d),v=VA;else if(h==="radial"){var x=i9(o),y=x.cx,w=x.cy,b=x.radius,_=x.startAngle,k=x.endAngle;g={cx:y,cy:w,startAngle:_,endAngle:k,innerRadius:b,outerRadius:b},v=uq}else g={points:X4e(h,o,c)},v=HR;var j=rv(rv(rv(rv({stroke:"#ccc",pointerEvents:"none"},c),g),dn(m,!1)),{},{payload:l,payloadIndex:u,className:an("recharts-tooltip-cursor",m.className)});return p.isValidElement(m)?p.cloneElement(m,j):p.createElement(v,j)}var tFe=["item"],nFe=["children","className","width","height","style","compact","title","desc"];function oh(e){"@babel/helpers - typeof";return oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oh(e)}function ed(){return ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ed.apply(this,arguments)}function YM(e,t){return iFe(e)||aFe(e,t)||o9(e,t)||rFe()}function rFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aFe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function iFe(e){if(Array.isArray(e))return e}function XM(e,t){if(e==null)return{};var n=sFe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function sFe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function oFe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lFe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l9(r.key),r)}}function cFe(e,t,n){return t&&lFe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uFe(e,t,n){return t=Nx(t),dFe(e,s9()?Reflect.construct(t,n||[],Nx(e).constructor):t.apply(e,n))}function dFe(e,t){if(t&&(oh(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hFe(e)}function hFe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s9=function(){return!!e})()}function Nx(e){return Nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nx(e)}function fFe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hS(e,t)}function hS(e,t){return hS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},hS(e,t)}function lh(e){return gFe(e)||pFe(e)||o9(e)||mFe()}function mFe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o9(e,t){if(e){if(typeof e=="string")return fS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fS(e,t)}}function pFe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gFe(e){if(Array.isArray(e))return fS(e)}function fS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function JM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JM(Object(n),!0).forEach(function(r){Ct(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ct(e,t,n){return t=l9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l9(e){var t=vFe(e,"string");return oh(t)=="symbol"?t:t+""}function vFe(e,t){if(oh(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(oh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yFe={xAxis:["bottom","top"],yAxis:["left","right"]},xFe={width:"100%",height:"100%"},c9={x:0,y:0};function av(e){return e}var bFe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},wFe=function(t,n,r,a){var s=n.find(function(d){return d&&d.index===r});if(s){if(t==="horizontal")return{x:s.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:s.coordinate};if(t==="centric"){var o=s.coordinate,l=a.radius;return Ce(Ce(Ce({},a),Br(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=a.angle;return Ce(Ce(Ce({},a),Br(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return c9},R0=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,s=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(lh(l),lh(u)):l},[]);return o.length>0?o:t&&t.length&&at(a)&&at(s)?t.slice(a,s+1):[]};function u9(e){return e==="number"?[0,"auto"]:void 0}var mS=function(t,n,r,a){var s=t.graphicalItems,o=t.tooltipAxis,l=R0(n,t);return r<0||!s||!s.length||r>=l.length?null:s.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var m=h===void 0?l:h;f=K1(m,o.dataKey,a)}else f=h&&h[r]||l[r];return f?[].concat(lh(c),[oq(u,f)]):c},[])},QM=function(t,n,r,a){var s=a||{x:t.chartX,y:t.chartY},o=bFe(s,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=Y2e(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,f=mS(t,n,d,h),m=wFe(r,l,d,s);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},jFe=function(t,n){var r=n.axes,a=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,f=t.stackOffset,m=aq(d,s);return r.reduce(function(g,v){var x,y=v.type.defaultProps!==void 0?Ce(Ce({},v.type.defaultProps),v.props):v.props,w=y.type,b=y.dataKey,_=y.allowDataOverflow,k=y.allowDuplicatedCategory,j=y.scale,N=y.ticks,O=y.includeHidden,I=y[o];if(g[I])return g;var P=R0(t.data,{graphicalItems:a.filter(function(R){var C,W=o in R.props?R.props[o]:(C=R.type.defaultProps)===null||C===void 0?void 0:C[o];return W===I}),dataStartIndex:c,dataEndIndex:u}),S=P.length,D,L,U;G4e(y.domain,_,w)&&(D=Ik(y.domain,null,_),m&&(w==="number"||j!=="auto")&&(U=Bf(P,b,"category")));var F=u9(w);if(!D||D.length===0){var M,T=(M=y.domain)!==null&&M!==void 0?M:F;if(b){if(D=Bf(P,b,w),w==="category"&&m){var E=Lxe(D);k&&E?(L=D,D=mx(0,S)):k||(D=OR(T,D,v).reduce(function(R,C){return R.indexOf(C)>=0?R:[].concat(lh(R),[C])},[]))}else if(w==="category")k?D=D.filter(function(R){return R!==""&&!hn(R)}):D=OR(T,D,v).reduce(function(R,C){return R.indexOf(C)>=0||C===""||hn(C)?R:[].concat(lh(R),[C])},[]);else if(w==="number"){var $=eOe(P,a.filter(function(R){var C,W,Q=o in R.props?R.props[o]:(C=R.type.defaultProps)===null||C===void 0?void 0:C[o],X="hide"in R.props?R.props.hide:(W=R.type.defaultProps)===null||W===void 0?void 0:W.hide;return Q===I&&(O||!X)}),b,s,d);$&&(D=$)}m&&(w==="number"||j!=="auto")&&(U=Bf(P,b,"category"))}else m?D=mx(0,S):l&&l[I]&&l[I].hasStack&&w==="number"?D=f==="expand"?[0,1]:sq(l[I].stackGroups,c,u):D=rq(P,a.filter(function(R){var C=o in R.props?R.props[o]:R.type.defaultProps[o],W="hide"in R.props?R.props.hide:R.type.defaultProps.hide;return C===I&&(O||!W)}),w,d,!0);if(w==="number")D=dS(h,D,I,s,N),T&&(D=Ik(T,D,_));else if(w==="category"&&T){var A=T,B=D.every(function(R){return A.indexOf(R)>=0});B&&(D=A)}}return Ce(Ce({},g),{},Ct({},I,Ce(Ce({},y),{},{axisType:s,domain:D,categoricalDomain:U,duplicateDomain:L,originalDomain:(x=y.domain)!==null&&x!==void 0?x:F,isCategorical:m,layout:d})))},{})},_Fe=function(t,n){var r=n.graphicalItems,a=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,f=R0(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=f.length,g=aq(d,s),v=-1;return r.reduce(function(x,y){var w=y.type.defaultProps!==void 0?Ce(Ce({},y.type.defaultProps),y.props):y.props,b=w[o],_=u9("number");if(!x[b]){v++;var k;return g?k=mx(0,m):l&&l[b]&&l[b].hasStack?(k=sq(l[b].stackGroups,c,u),k=dS(h,k,b,s)):(k=Ik(_,rq(f,r.filter(function(j){var N,O,I=o in j.props?j.props[o]:(N=j.type.defaultProps)===null||N===void 0?void 0:N[o],P="hide"in j.props?j.props.hide:(O=j.type.defaultProps)===null||O===void 0?void 0:O.hide;return I===b&&!P}),"number",d),a.defaultProps.allowDataOverflow),k=dS(h,k,b,s)),Ce(Ce({},x),{},Ct({},b,Ce(Ce({axisType:s},a.defaultProps),{},{hide:!0,orientation:Ai(yFe,"".concat(s,".").concat(v%2),null),domain:k,originalDomain:_,isCategorical:g,layout:d})))}return x},{})},kFe=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.children,h="".concat(a,"Id"),f=as(d,s),m={};return f&&f.length?m=jFe(t,{axes:f,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=_Fe(t,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},SFe=function(t){var n=nl(t),r=co(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:xA(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:ix(n,r)}},ZM=function(t){var n=t.children,r=t.defaultShowTooltip,a=Ja(n,Zd),s=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},NFe=function(t){return!t||!t.length?!1:t.some(function(n){var r=po(n&&n.type);return r&&r.indexOf("Bar")>=0})},eD=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},CFe=function(t,n){var r=t.props,a=t.graphicalItems,s=t.xAxisMap,o=s===void 0?{}:s,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,h=r.children,f=r.margin||{},m=Ja(h,Zd),g=Ja(h,wi),v=Object.keys(c).reduce(function(k,j){var N=c[j],O=N.orientation;return!N.mirror&&!N.hide?Ce(Ce({},k),{},Ct({},O,k[O]+N.width)):k},{left:f.left||0,right:f.right||0}),x=Object.keys(o).reduce(function(k,j){var N=o[j],O=N.orientation;return!N.mirror&&!N.hide?Ce(Ce({},k),{},Ct({},O,Ai(k,"".concat(O))+N.height)):k},{top:f.top||0,bottom:f.bottom||0}),y=Ce(Ce({},x),v),w=y.bottom;m&&(y.bottom+=m.props.height||Zd.defaultProps.height),g&&n&&(y=Q2e(y,a,r,n));var b=u-y.left-y.right,_=d-y.top-y.bottom;return Ce(Ce({brushBottom:w},y),{},{width:Math.max(b,0),height:Math.max(_,0)})},AFe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},EFe=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,s=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,h=t.defaultProps,f=function(y,w){var b=w.graphicalItems,_=w.stackGroups,k=w.offset,j=w.updateId,N=w.dataStartIndex,O=w.dataEndIndex,I=y.barSize,P=y.layout,S=y.barGap,D=y.barCategoryGap,L=y.maxBarSize,U=eD(P),F=U.numericAxisName,M=U.cateAxisName,T=NFe(b),E=[];return b.forEach(function($,A){var B=R0(y.data,{graphicalItems:[$],dataStartIndex:N,dataEndIndex:O}),R=$.type.defaultProps!==void 0?Ce(Ce({},$.type.defaultProps),$.props):$.props,C=R.dataKey,W=R.maxBarSize,Q=R["".concat(F,"Id")],X=R["".concat(M,"Id")],Z={},te=c.reduce(function(Ze,ut){var ee=w["".concat(ut.axisType,"Map")],qe=R["".concat(ut.axisType,"Id")];ee&&ee[qe]||ut.axisType==="zAxis"||Jc();var dt=ee[qe];return Ce(Ce({},Ze),{},Ct(Ct({},ut.axisType,dt),"".concat(ut.axisType,"Ticks"),co(dt)))},Z),J=te[M],ie=te["".concat(M,"Ticks")],ge=_&&_[Q]&&_[Q].hasStack&&hOe($,_[Q].stackGroups),ae=po($.type).indexOf("Bar")>=0,Re=ix(J,ie),me=[],K=T&&X2e({barSize:I,stackGroups:_,totalSize:AFe(te,M)});if(ae){var de,$e,nt=hn(W)?L:W,Ye=(de=($e=ix(J,ie,!0))!==null&&$e!==void 0?$e:nt)!==null&&de!==void 0?de:0;me=J2e({barGap:S,barCategoryGap:D,bandSize:Ye!==Re?Ye:Re,sizeList:K[X],maxBarSize:nt}),Ye!==Re&&(me=me.map(function(Ze){return Ce(Ce({},Ze),{},{position:Ce(Ce({},Ze.position),{},{offset:Ze.position.offset-Ye/2})})}))}var ft=$&&$.type&&$.type.getComposedData;ft&&E.push({props:Ce(Ce({},ft(Ce(Ce({},te),{},{displayedData:B,props:y,dataKey:C,item:$,bandSize:Re,barPosition:me,offset:k,stackedData:ge,layout:P,dataStartIndex:N,dataEndIndex:O}))),{},Ct(Ct(Ct({key:$.key||"item-".concat(A)},F,te[F]),M,te[M]),"animationId",j)),childIndex:Yxe($,y.children),item:$})}),E},m=function(y,w){var b=y.props,_=y.dataStartIndex,k=y.dataEndIndex,j=y.updateId;if(!NO({props:b}))return null;var N=b.children,O=b.layout,I=b.stackOffset,P=b.data,S=b.reverseStackOrder,D=eD(O),L=D.numericAxisName,U=D.cateAxisName,F=as(N,r),M=cOe(P,F,"".concat(L,"Id"),"".concat(U,"Id"),I,S),T=c.reduce(function(R,C){var W="".concat(C.axisType,"Map");return Ce(Ce({},R),{},Ct({},W,kFe(b,Ce(Ce({},C),{},{graphicalItems:F,stackGroups:C.axisType===L&&M,dataStartIndex:_,dataEndIndex:k}))))},{}),E=CFe(Ce(Ce({},T),{},{props:b,graphicalItems:F}),w==null?void 0:w.legendBBox);Object.keys(T).forEach(function(R){T[R]=d(b,T[R],E,R.replace("Map",""),n)});var $=T["".concat(U,"Map")],A=SFe($),B=f(b,Ce(Ce({},T),{},{dataStartIndex:_,dataEndIndex:k,updateId:j,graphicalItems:F,stackGroups:M,offset:E}));return Ce(Ce({formattedGraphicalItems:B,graphicalItems:F,offset:E,stackGroups:M},A),T)},g=function(x){function y(w){var b,_,k;return oFe(this,y),k=uFe(this,y,[w]),Ct(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ct(k,"accessibilityManager",new V4e),Ct(k,"handleLegendBBoxUpdate",function(j){if(j){var N=k.state,O=N.dataStartIndex,I=N.dataEndIndex,P=N.updateId;k.setState(Ce({legendBBox:j},m({props:k.props,dataStartIndex:O,dataEndIndex:I,updateId:P},Ce(Ce({},k.state),{},{legendBBox:j}))))}}),Ct(k,"handleReceiveSyncEvent",function(j,N,O){if(k.props.syncId===j){if(O===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(N)}}),Ct(k,"handleBrushChange",function(j){var N=j.startIndex,O=j.endIndex;if(N!==k.state.dataStartIndex||O!==k.state.dataEndIndex){var I=k.state.updateId;k.setState(function(){return Ce({dataStartIndex:N,dataEndIndex:O},m({props:k.props,dataStartIndex:N,dataEndIndex:O,updateId:I},k.state))}),k.triggerSyncEvent({dataStartIndex:N,dataEndIndex:O})}}),Ct(k,"handleMouseEnter",function(j){var N=k.getMouseInfo(j);if(N){var O=Ce(Ce({},N),{},{isTooltipActive:!0});k.setState(O),k.triggerSyncEvent(O);var I=k.props.onMouseEnter;zt(I)&&I(O,j)}}),Ct(k,"triggeredAfterMouseMove",function(j){var N=k.getMouseInfo(j),O=N?Ce(Ce({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(O),k.triggerSyncEvent(O);var I=k.props.onMouseMove;zt(I)&&I(O,j)}),Ct(k,"handleItemMouseEnter",function(j){k.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),Ct(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),Ct(k,"handleMouseMove",function(j){j.persist(),k.throttleTriggeredAfterMouseMove(j)}),Ct(k,"handleMouseLeave",function(j){k.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};k.setState(N),k.triggerSyncEvent(N);var O=k.props.onMouseLeave;zt(O)&&O(N,j)}),Ct(k,"handleOuterEvent",function(j){var N=Gxe(j),O=Ai(k.props,"".concat(N));if(N&&zt(O)){var I,P;/.*touch.*/i.test(N)?P=k.getMouseInfo(j.changedTouches[0]):P=k.getMouseInfo(j),O((I=P)!==null&&I!==void 0?I:{},j)}}),Ct(k,"handleClick",function(j){var N=k.getMouseInfo(j);if(N){var O=Ce(Ce({},N),{},{isTooltipActive:!0});k.setState(O),k.triggerSyncEvent(O);var I=k.props.onClick;zt(I)&&I(O,j)}}),Ct(k,"handleMouseDown",function(j){var N=k.props.onMouseDown;if(zt(N)){var O=k.getMouseInfo(j);N(O,j)}}),Ct(k,"handleMouseUp",function(j){var N=k.props.onMouseUp;if(zt(N)){var O=k.getMouseInfo(j);N(O,j)}}),Ct(k,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),Ct(k,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&k.handleMouseDown(j.changedTouches[0])}),Ct(k,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&k.handleMouseUp(j.changedTouches[0])}),Ct(k,"handleDoubleClick",function(j){var N=k.props.onDoubleClick;if(zt(N)){var O=k.getMouseInfo(j);N(O,j)}}),Ct(k,"handleContextMenu",function(j){var N=k.props.onContextMenu;if(zt(N)){var O=k.getMouseInfo(j);N(O,j)}}),Ct(k,"triggerSyncEvent",function(j){k.props.syncId!==void 0&&Kj.emit(Vj,k.props.syncId,j,k.eventEmitterSymbol)}),Ct(k,"applySyncEvent",function(j){var N=k.props,O=N.layout,I=N.syncMethod,P=k.state.updateId,S=j.dataStartIndex,D=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)k.setState(Ce({dataStartIndex:S,dataEndIndex:D},m({props:k.props,dataStartIndex:S,dataEndIndex:D,updateId:P},k.state)));else if(j.activeTooltipIndex!==void 0){var L=j.chartX,U=j.chartY,F=j.activeTooltipIndex,M=k.state,T=M.offset,E=M.tooltipTicks;if(!T)return;if(typeof I=="function")F=I(E,j);else if(I==="value"){F=-1;for(var $=0;$<E.length;$++)if(E[$].value===j.activeLabel){F=$;break}}var A=Ce(Ce({},T),{},{x:T.left,y:T.top}),B=Math.min(L,A.x+A.width),R=Math.min(U,A.y+A.height),C=E[F]&&E[F].value,W=mS(k.state,k.props.data,F),Q=E[F]?{x:O==="horizontal"?E[F].coordinate:B,y:O==="horizontal"?R:E[F].coordinate}:c9;k.setState(Ce(Ce({},j),{},{activeLabel:C,activeCoordinate:Q,activePayload:W,activeTooltipIndex:F}))}else k.setState(j)}),Ct(k,"renderCursor",function(j){var N,O=k.state,I=O.isTooltipActive,P=O.activeCoordinate,S=O.activePayload,D=O.offset,L=O.activeTooltipIndex,U=O.tooltipAxisBandSize,F=k.getTooltipEventType(),M=(N=j.props.active)!==null&&N!==void 0?N:I,T=k.props.layout,E=j.key||"_recharts-cursor";return V.createElement(eFe,{key:E,activeCoordinate:P,activePayload:S,activeTooltipIndex:L,chartName:n,element:j,isActive:M,layout:T,offset:D,tooltipAxisBandSize:U,tooltipEventType:F})}),Ct(k,"renderPolarAxis",function(j,N,O){var I=Ai(j,"type.axisType"),P=Ai(k.state,"".concat(I,"Map")),S=j.type.defaultProps,D=S!==void 0?Ce(Ce({},S),j.props):j.props,L=P&&P[D["".concat(I,"Id")]];return p.cloneElement(j,Ce(Ce({},L),{},{className:an(I,L.className),key:j.key||"".concat(N,"-").concat(O),ticks:co(L,!0)}))}),Ct(k,"renderPolarGrid",function(j){var N=j.props,O=N.radialLines,I=N.polarAngles,P=N.polarRadius,S=k.state,D=S.radiusAxisMap,L=S.angleAxisMap,U=nl(D),F=nl(L),M=F.cx,T=F.cy,E=F.innerRadius,$=F.outerRadius;return p.cloneElement(j,{polarAngles:Array.isArray(I)?I:co(F,!0).map(function(A){return A.coordinate}),polarRadius:Array.isArray(P)?P:co(U,!0).map(function(A){return A.coordinate}),cx:M,cy:T,innerRadius:E,outerRadius:$,key:j.key||"polar-grid",radialLines:O})}),Ct(k,"renderLegend",function(){var j=k.state.formattedGraphicalItems,N=k.props,O=N.children,I=N.width,P=N.height,S=k.props.margin||{},D=I-(S.left||0)-(S.right||0),L=tq({children:O,formattedGraphicalItems:j,legendWidth:D,legendContent:u});if(!L)return null;var U=L.item,F=XM(L,tFe);return p.cloneElement(U,Ce(Ce({},F),{},{chartWidth:I,chartHeight:P,margin:S,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),Ct(k,"renderTooltip",function(){var j,N=k.props,O=N.children,I=N.accessibilityLayer,P=Ja(O,sr);if(!P)return null;var S=k.state,D=S.isTooltipActive,L=S.activeCoordinate,U=S.activePayload,F=S.activeLabel,M=S.offset,T=(j=P.props.active)!==null&&j!==void 0?j:D;return p.cloneElement(P,{viewBox:Ce(Ce({},M),{},{x:M.left,y:M.top}),active:T,label:F,payload:T?U:[],coordinate:L,accessibilityLayer:I})}),Ct(k,"renderBrush",function(j){var N=k.props,O=N.margin,I=N.data,P=k.state,S=P.offset,D=P.dataStartIndex,L=P.dataEndIndex,U=P.updateId;return p.cloneElement(j,{key:j.key||"_recharts-brush",onChange:Zg(k.handleBrushChange,j.props.onChange),data:I,x:at(j.props.x)?j.props.x:S.left,y:at(j.props.y)?j.props.y:S.top+S.height+S.brushBottom-(O.bottom||0),width:at(j.props.width)?j.props.width:S.width,startIndex:D,endIndex:L,updateId:"brush-".concat(U)})}),Ct(k,"renderReferenceElement",function(j,N,O){if(!j)return null;var I=k,P=I.clipPathId,S=k.state,D=S.xAxisMap,L=S.yAxisMap,U=S.offset,F=j.type.defaultProps||{},M=j.props,T=M.xAxisId,E=T===void 0?F.xAxisId:T,$=M.yAxisId,A=$===void 0?F.yAxisId:$;return p.cloneElement(j,{key:j.key||"".concat(N,"-").concat(O),xAxis:D[E],yAxis:L[A],viewBox:{x:U.left,y:U.top,width:U.width,height:U.height},clipPathId:P})}),Ct(k,"renderActivePoints",function(j){var N=j.item,O=j.activePoint,I=j.basePoint,P=j.childIndex,S=j.isRange,D=[],L=N.props.key,U=N.item.type.defaultProps!==void 0?Ce(Ce({},N.item.type.defaultProps),N.item.props):N.item.props,F=U.activeDot,M=U.dataKey,T=Ce(Ce({index:P,dataKey:M,cx:O.x,cy:O.y,r:4,fill:KA(N.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},dn(F,!1)),Ty(F));return D.push(y.renderActiveDot(F,T,"".concat(L,"-activePoint-").concat(P))),I?D.push(y.renderActiveDot(F,Ce(Ce({},T),{},{cx:I.x,cy:I.y}),"".concat(L,"-basePoint-").concat(P))):S&&D.push(null),D}),Ct(k,"renderGraphicChild",function(j,N,O){var I=k.filterFormatItem(j,N,O);if(!I)return null;var P=k.getTooltipEventType(),S=k.state,D=S.isTooltipActive,L=S.tooltipAxis,U=S.activeTooltipIndex,F=S.activeLabel,M=k.props.children,T=Ja(M,sr),E=I.props,$=E.points,A=E.isRange,B=E.baseLine,R=I.item.type.defaultProps!==void 0?Ce(Ce({},I.item.type.defaultProps),I.item.props):I.item.props,C=R.activeDot,W=R.hide,Q=R.activeBar,X=R.activeShape,Z=!!(!W&&D&&T&&(C||Q||X)),te={};P!=="axis"&&T&&T.props.trigger==="click"?te={onClick:Zg(k.handleItemMouseEnter,j.props.onClick)}:P!=="axis"&&(te={onMouseLeave:Zg(k.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:Zg(k.handleItemMouseEnter,j.props.onMouseEnter)});var J=p.cloneElement(j,Ce(Ce({},I.props),te));function ie(ut){return typeof L.dataKey=="function"?L.dataKey(ut.payload):null}if(Z)if(U>=0){var ge,ae;if(L.dataKey&&!L.allowDuplicatedCategory){var Re=typeof L.dataKey=="function"?ie:"payload.".concat(L.dataKey.toString());ge=K1($,Re,F),ae=A&&B&&K1(B,Re,F)}else ge=$==null?void 0:$[U],ae=A&&B&&B[U];if(X||Q){var me=j.props.activeIndex!==void 0?j.props.activeIndex:U;return[p.cloneElement(j,Ce(Ce(Ce({},I.props),te),{},{activeIndex:me})),null,null]}if(!hn(ge))return[J].concat(lh(k.renderActivePoints({item:I,activePoint:ge,basePoint:ae,childIndex:U,isRange:A})))}else{var K,de=(K=k.getItemByXY(k.state.activeCoordinate))!==null&&K!==void 0?K:{graphicalItem:J},$e=de.graphicalItem,nt=$e.item,Ye=nt===void 0?j:nt,ft=$e.childIndex,Ze=Ce(Ce(Ce({},I.props),te),{},{activeIndex:ft});return[p.cloneElement(Ye,Ze),null,null]}return A?[J,null,null]:[J,null]}),Ct(k,"renderCustomized",function(j,N,O){return p.cloneElement(j,Ce(Ce({key:"recharts-customized-".concat(O)},k.props),k.state))}),Ct(k,"renderMap",{CartesianGrid:{handler:av,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:av},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:av},YAxis:{handler:av},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((b=w.id)!==null&&b!==void 0?b:l0("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=eW(k.triggeredAfterMouseMove,(_=w.throttleDelay)!==null&&_!==void 0?_:1e3/60),k.state={},k}return fFe(y,x),cFe(y,[{key:"componentDidMount",value:function(){var b,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,_=b.children,k=b.data,j=b.height,N=b.layout,O=Ja(_,sr);if(O){var I=O.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,S=mS(this.state,k,I,P),D=this.state.tooltipTicks[I].coordinate,L=(this.state.offset.top+j)/2,U=N==="horizontal",F=U?{x:D,y:L}:{y:D,x:L},M=this.state.formattedGraphicalItems.find(function(E){var $=E.item;return $.type.name==="Scatter"});M&&(F=Ce(Ce({},F),M.props.points[I].tooltipPosition),S=M.props.points[I].tooltipPayload);var T={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:P,activePayload:S,activeCoordinate:F};this.setState(T),this.renderCursor(O),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var k,j;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0}})}return null}},{key:"componentDidUpdate",value:function(b){G1([Ja(b.children,sr)],[Ja(this.props.children,sr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Ja(this.props.children,sr);if(b&&typeof b.props.shared=="boolean"){var _=b.props.shared?"axis":"item";return l.indexOf(_)>=0?_:s}return s}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var _=this.container,k=_.getBoundingClientRect(),j=wAe(k),N={chartX:Math.round(b.pageX-j.left),chartY:Math.round(b.pageY-j.top)},O=k.width/_.offsetWidth||1,I=this.inRange(N.chartX,N.chartY,O);if(!I)return null;var P=this.state,S=P.xAxisMap,D=P.yAxisMap,L=this.getTooltipEventType(),U=QM(this.state,this.props.data,this.props.layout,I);if(L!=="axis"&&S&&D){var F=nl(S).scale,M=nl(D).scale,T=F&&F.invert?F.invert(N.chartX):null,E=M&&M.invert?M.invert(N.chartY):null;return Ce(Ce({},N),{},{xValue:T,yValue:E},U)}return U?Ce(Ce({},N),U):null}},{key:"inRange",value:function(b,_){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=this.props.layout,N=b/k,O=_/k;if(j==="horizontal"||j==="vertical"){var I=this.state.offset,P=N>=I.left&&N<=I.left+I.width&&O>=I.top&&O<=I.top+I.height;return P?{x:N,y:O}:null}var S=this.state,D=S.angleAxisMap,L=S.radiusAxisMap;if(D&&L){var U=nl(D);return MR({x:N,y:O},U)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,_=this.getTooltipEventType(),k=Ja(b,sr),j={};k&&_==="axis"&&(k.props.trigger==="click"?j={onClick:this.handleClick}:j={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=Ty(this.props,this.handleOuterEvent);return Ce(Ce({},N),j)}},{key:"addListener",value:function(){Kj.on(Vj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Kj.removeListener(Vj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,_,k){for(var j=this.state.formattedGraphicalItems,N=0,O=j.length;N<O;N++){var I=j[N];if(I.item===b||I.props.key===b.key||_===po(I.item.type)&&k===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,_=this.state.offset,k=_.left,j=_.top,N=_.height,O=_.width;return V.createElement("defs",null,V.createElement("clipPath",{id:b},V.createElement("rect",{x:k,y:j,height:N,width:O})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(_,k){var j=YM(k,2),N=j[0],O=j[1];return Ce(Ce({},_),{},Ct({},N,O.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(_,k){var j=YM(k,2),N=j[0],O=j[1];return Ce(Ce({},_),{},Ct({},N,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[b])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(b){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[b])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(b){var _=this.state,k=_.formattedGraphicalItems,j=_.activeItem;if(k&&k.length)for(var N=0,O=k.length;N<O;N++){var I=k[N],P=I.props,S=I.item,D=S.type.defaultProps!==void 0?Ce(Ce({},S.type.defaultProps),S.props):S.props,L=po(S.type);if(L==="Bar"){var U=(P.data||[]).find(function(E){return rMe(b,E)});if(U)return{graphicalItem:I,payload:U}}else if(L==="RadialBar"){var F=(P.data||[]).find(function(E){return MR(b,E)});if(F)return{graphicalItem:I,payload:F}}else if(C0(I,j)||A0(I,j)||ip(I,j)){var M=sDe({graphicalItem:I,activeTooltipItem:j,itemData:D.data}),T=D.activeIndex===void 0?M:D.activeIndex;return{graphicalItem:Ce(Ce({},I),{},{childIndex:T}),payload:ip(I,j)?D.data[M]:I.props.data[M]}}}return null}},{key:"render",value:function(){var b=this;if(!NO(this))return null;var _=this.props,k=_.children,j=_.className,N=_.width,O=_.height,I=_.style,P=_.compact,S=_.title,D=_.desc,L=XM(_,nFe),U=dn(L,!1);if(P)return V.createElement(RM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement(X1,ed({},U,{width:N,height:O,title:S,desc:D}),this.renderClipPath(),AO(k,this.renderMap)));if(this.props.accessibilityLayer){var F,M;U.tabIndex=(F=this.props.tabIndex)!==null&&F!==void 0?F:0,U.role=(M=this.props.role)!==null&&M!==void 0?M:"application",U.onKeyDown=function(E){b.accessibilityManager.keyboardEvent(E)},U.onFocus=function(){b.accessibilityManager.focus()}}var T=this.parseEventsOfWrapper();return V.createElement(RM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement("div",ed({className:an("recharts-wrapper",j),style:Ce({position:"relative",cursor:"default",width:N,height:O},I)},T,{ref:function($){b.container=$}}),V.createElement(X1,ed({},U,{width:N,height:O,title:S,desc:D,style:xFe}),this.renderClipPath(),AO(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(p.Component);Ct(g,"displayName",n),Ct(g,"defaultProps",Ce({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Ct(g,"getDerivedStateFromProps",function(x,y){var w=x.dataKey,b=x.data,_=x.children,k=x.width,j=x.height,N=x.layout,O=x.stackOffset,I=x.margin,P=y.dataStartIndex,S=y.dataEndIndex;if(y.updateId===void 0){var D=ZM(x);return Ce(Ce(Ce({},D),{},{updateId:0},m(Ce(Ce({props:x},D),{},{updateId:0}),y)),{},{prevDataKey:w,prevData:b,prevWidth:k,prevHeight:j,prevLayout:N,prevStackOffset:O,prevMargin:I,prevChildren:_})}if(w!==y.prevDataKey||b!==y.prevData||k!==y.prevWidth||j!==y.prevHeight||N!==y.prevLayout||O!==y.prevStackOffset||!fd(I,y.prevMargin)){var L=ZM(x),U={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},F=Ce(Ce({},QM(y,b,N)),{},{updateId:y.updateId+1}),M=Ce(Ce(Ce({},L),U),F);return Ce(Ce(Ce({},M),m(Ce({props:x},M),y)),{},{prevDataKey:w,prevData:b,prevWidth:k,prevHeight:j,prevLayout:N,prevStackOffset:O,prevMargin:I,prevChildren:_})}if(!G1(_,y.prevChildren)){var T,E,$,A,B=Ja(_,Zd),R=B&&(T=(E=B.props)===null||E===void 0?void 0:E.startIndex)!==null&&T!==void 0?T:P,C=B&&($=(A=B.props)===null||A===void 0?void 0:A.endIndex)!==null&&$!==void 0?$:S,W=R!==P||C!==S,Q=!hn(b),X=Q&&!W?y.updateId:y.updateId+1;return Ce(Ce({updateId:X},m(Ce(Ce({props:x},y),{},{updateId:X,dataStartIndex:R,dataEndIndex:C}),y)),{},{prevChildren:_,dataStartIndex:R,dataEndIndex:C})}return null}),Ct(g,"renderActiveDot",function(x,y,w){var b;return p.isValidElement(x)?b=p.cloneElement(x,y):zt(x)?b=x(y):b=V.createElement(wq,y),V.createElement(Tr,{className:"recharts-active-dot",key:w},b)});var v=p.forwardRef(function(y,w){return V.createElement(g,ed({},y,{ref:w}))});return v.displayName=g.displayName,v},gi=EFe({chartName:"BarChart",GraphicalChild:Kn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ca},{axisType:"yAxis",AxisComp:ua}],formatAxisMap:PLe});const TFe=[{name:"Resolved by Human",value:15},{name:"Resolved by AI",value:85}],Mr=["#60a5fa","#2563eb","#1d4ed8","#10b981","#f59e0b","#ef4444"],An=({label:e,description:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:t})})]})]});function PFe(){p.useMemo(()=>Mr.slice(0,TFe.length),[]),Or();const[e,t]=p.useState(""),[n,r]=p.useState(""),[a,s]=p.useState([]),[o,l]=p.useState(0),[c,u]=p.useState(0),[d,h]=p.useState({total:0,ai:0,rate:0,handover:0,handover_rate:0}),[f,m]=p.useState("all"),[g,v]=p.useState([]),[x,y]=p.useState([]),[w,b]=p.useState(!1),[_,k]=p.useState([]),[j,N]=p.useState([]),[O,I]=p.useState([]),[P,S]=p.useState({input:0,output:0,total:0}),[D,L]=p.useState([]),[U,F]=p.useState([]),[M,T]=p.useState([]),[E,$]=p.useState("all"),[A,B]=p.useState([]),[R,C]=p.useState(null),[W,Q]=p.useState(null),[X,Z]=p.useState([]),[te,J]=p.useState(null),[ie,ge]=p.useState(void 0),[ae,Re]=p.useState(!1),me=ee=>{if(!ee||ee.trim().length===0)return"(unspecified)";if(ee.startsWith("other:"))return ee.replace(/^other:/,"Other: ");switch(ee){case"ambiguous":return"Ambiguous intent";case"payment":return"Payment-related";case"policy":return"Policy/compliance";default:return ee}},K=()=>{const ee=new Date,qe=n?new Date(n):ee,dt=e?new Date(e):new Date(ee.getTime()-29*24*60*60*1e3),se=new Date(Date.UTC(dt.getUTCFullYear(),dt.getUTCMonth(),dt.getUTCDate(),0,0,0)),ve=new Date(Date.UTC(qe.getUTCFullYear(),qe.getUTCMonth(),qe.getUTCDate()+1,0,0,0));return{start:se.toISOString(),end:ve.toISOString()}},de=async()=>{const{start:ee,end:qe}=K(),{data:dt}=await _t.rpc("get_channel_chat_counts",{p_from:ee,p_to:qe});s((dt||[]).map(rt=>({provider:rt.provider,display_name:rt.display_name,thread_count:Number(rt.thread_count||0)})));const{data:se}=await _t.rpc("get_response_time_stats",{p_from:ee,p_to:qe,p_channel:f!=="all"?f:null});if(se&&se.length>0){const rt=se[0];l(Number(rt.ai_avg||0)),u(Number(rt.agent_avg||0))}const{data:ve,error:oe}=await _t.rpc("get_containment_and_handover",{p_from:ee,p_to:qe});if(!oe&&ve&&ve.length>0){const rt=ve[0];h({total:Number(rt.total_threads||0),ai:Number(rt.ai_resolved_count||0),rate:Number(rt.containment_rate||0),handover:Number(rt.handover_count||0),handover_rate:Number(rt.handover_rate||0)})}else if(oe&&oe.code==="PGRST202"){const{data:rt}=await _t.rpc("get_containment",{p_from:ee,p_to:qe});let bt=0,ue=0,Se=0,we=0,Te=0;if(rt&&rt.length>0){const Ue=rt[0];bt=Number(Ue.total_threads||0),ue=Number(Ue.ai_resolved_count||0),Se=Number(Ue.rate||0)}const{data:je}=await _t.rpc("get_handover_stats",{p_from:ee,p_to:qe}),Ee=(je||[]).reduce((Ue,H)=>Ue+Number(H.count||0),0);we=Ee,Te=bt>0?Ee/bt:0,h({total:bt,ai:ue,rate:Se,handover:we,handover_rate:Te})}const{data:Xe}=await _t.rpc("get_chats_timeseries",{p_from:ee,p_to:qe,p_channel:f!=="all"?f:null});v((Xe||[]).map(rt=>({bucket:rt.bucket,provider:rt.provider,count:Number(rt.count||0)})));const{data:ke}=await _t.rpc("get_handover_stats",{p_from:ee,p_to:qe});y((ke||[]).map(rt=>({reason:me(rt.reason)||"(unspecified)",count:Number(rt.count||0),total:Number(rt.total||0),rate:Number(rt.rate||0)})));try{const{data:rt}=await ce.from("token_usage_logs").select("made_at, prompt_tokens, completion_tokens, total_tokens, model, channel_id").gte("made_at",ee).lt("made_at",qe).order("made_at",{ascending:!0}),bt={},ue={};let Se=0,we=0,Te=0;for(const Ue of rt||[]){const H=new Date(Ue.made_at).toISOString().slice(0,10),q=Number(Ue.prompt_tokens||0),re=Number(Ue.completion_tokens||0),he=Number(Ue.total_tokens||q+re);bt[H]||(bt[H]={input:0,output:0,total:0}),bt[H].input+=q,bt[H].output+=re,bt[H].total+=he;const Me=String(Ue.model||"unknown");ue[Me]=(ue[Me]||0)+he,Se+=q,we+=re,Te+=he}const je=Object.keys(bt).sort().map(Ue=>({day:Ue,...bt[Ue]})),Ee=Object.entries(ue).sort((Ue,H)=>H[1]-Ue[1]).slice(0,8).map(([Ue,H])=>({model:Ue,tokens:H}));N(je),I(Ee),S({input:Se,output:we,total:Te})}catch{}try{const{data:rt}=await _t.rpc("get_handover_by_super_agent",{p_from:ee,p_to:qe});L((rt||[]).map(we=>({super_agent_id:we.super_agent_id,super_agent_name:we.super_agent_name,human_resolved:Number(we.human_resolved||0),ai_resolved:Number(we.ai_resolved||0),handover_rate:Number(we.handover_rate||0)})));const bt=E!=="all"?E:null,[{data:ue},{data:Se}]=await Promise.all([_t.rpc("get_handover_by_agent",{p_from:ee,p_to:qe,p_super_agent_id:bt}),_t.rpc("get_agent_kpis",{p_from:ee,p_to:qe,p_super_agent_id:bt})]);F((ue||[]).map(we=>({agent_user_id:we.agent_user_id,agent_name:we.agent_name,super_agent_id:we.super_agent_id,human_resolved:Number(we.human_resolved||0),ai_resolved:Number(we.ai_resolved||0),handover_rate:Number(we.handover_rate||0)}))),T((Se||[]).map(we=>({agent_user_id:we.agent_user_id,agent_name:we.agent_name,resolved_count:Number(we.resolved_count||0),avg_resolution_minutes:we.avg_resolution_minutes!=null?Number(we.avg_resolution_minutes):null})))}catch{}},$e=async()=>{try{const{data:ee,error:qe}=await _t.rpc("get_database_stats_detailed");if(qe){console.error("Error fetching database stats:",qe);return}ee&&(console.log("Database stats fetched:",ee.length,"tables"),B(ee.map(ke=>({tablename:ke.tablename,total_size_bytes:Number(ke.total_size_bytes||0),total_size_pretty:ke.total_size_pretty||"0 bytes",table_size_bytes:Number(ke.table_size_bytes||0),table_size_pretty:ke.table_size_pretty||"0 bytes",indexes_size_bytes:Number(ke.indexes_size_bytes||0),indexes_size_pretty:ke.indexes_size_pretty||"0 bytes",row_count:Number(ke.row_count||0),dead_rows:Number(ke.dead_rows||0),sequential_scans:Number(ke.sequential_scans||0),index_scans:Number(ke.index_scans||0),table_scan_ratio:Number(ke.table_scan_ratio||0),last_vacuum:ke.last_vacuum||null,last_autovacuum:ke.last_autovacuum||null,last_analyze:ke.last_analyze||null,last_autoanalyze:ke.last_autoanalyze||null,inserts:Number(ke.inserts||0),updates:Number(ke.updates||0),deletes:Number(ke.deletes||0),hot_updates:Number(ke.hot_updates||0)}))));const{data:dt,error:se}=await _t.rpc("get_database_overview");if(se&&console.error("Error fetching database overview:",se),dt&&dt.length>0){console.log("Database overview fetched:",dt);const ke=dt[0];C({total_size_bytes:Number(ke.total_size_bytes||0),total_size_pretty:ke.total_size_pretty||"0 bytes",data_size_bytes:Number(ke.data_size_bytes||0),data_size_pretty:ke.data_size_pretty||"0 bytes",indexes_size_bytes:Number(ke.indexes_size_bytes||0),indexes_size_pretty:ke.indexes_size_pretty||"0 bytes",total_tables:Number(ke.total_tables||0),total_rows:Number(ke.total_rows||0),total_indexes:Number(ke.total_indexes||0),total_sequences:Number(ke.total_sequences||0)})}const{data:ve}=await _t.rpc("get_database_memory_stats");if(ve&&ve.length>0){const ke=ve[0];Q({shared_buffers_hit:Number(ke.shared_buffers_hit||0),shared_buffers_read:Number(ke.shared_buffers_read||0),shared_buffers_hit_ratio:Number(ke.shared_buffers_hit_ratio||0),cache_hit_ratio:Number(ke.cache_hit_ratio||0),heap_hit_ratio:Number(ke.heap_hit_ratio||0),idx_scan_ratio:Number(ke.idx_scan_ratio||0),total_sequential_scans:Number(ke.total_sequential_scans||0),total_index_scans:Number(ke.total_index_scans||0)})}const{data:oe}=await _t.rpc("get_index_stats");oe&&Z(oe.map(ke=>({tablename:ke.tablename,indexname:ke.indexname,index_size_bytes:Number(ke.index_size_bytes||0),index_size_pretty:ke.index_size_pretty||"0 bytes",index_scans:Number(ke.index_scans||0),index_tup_reads:Number(ke.index_tup_reads||0),index_tup_fetches:Number(ke.index_tup_fetches||0),idx_blks_hit:Number(ke.idx_blks_hit||0),idx_blks_read:Number(ke.idx_blks_read||0)})));const{data:Xe}=await _t.rpc("get_database_activity");if(Xe&&Xe.length>0){const ke=Xe[0];J({total_inserts:Number(ke.total_inserts||0),total_updates:Number(ke.total_updates||0),total_deletes:Number(ke.total_deletes||0),total_sequential_scans:Number(ke.total_sequential_scans||0),total_index_scans:Number(ke.total_index_scans||0),total_blocks_hit:Number(ke.total_blocks_hit||0),total_blocks_read:Number(ke.total_blocks_read||0),cache_hit_percentage:Number(ke.cache_hit_percentage||0)})}}catch(ee){console.error("Failed to fetch database stats:",ee),B([]),C(null),Q(null),Z([]),J(null)}},nt=ee=>ee.toISOString().slice(0,10),Ye=ee=>{if(!ee)return"";const qe=new Date(ee);return Number.isNaN(qe.getTime())?"":qe.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})},ft=p.useMemo(()=>e&&n?`${Ye(e)}  ${Ye(n)}`:e?`From ${Ye(e)}`:n?`Until ${Ye(n)}`:"Select date range",[e,n]);p.useEffect(()=>{ge(ee=>{const qe=e?new Date(e):void 0,dt=n?new Date(n):void 0;if(!qe&&!dt)return ee&&void 0;const se=ee!=null&&ee.from?ee.from.getTime():void 0,ve=ee!=null&&ee.to?ee.to.getTime():void 0,oe=qe?qe.getTime():void 0,Xe=dt?dt.getTime():void 0;return se===oe&&ve===Xe?ee:{from:qe,to:dt}})},[e,n]);const Ze=ee=>{if(ge(ee),!ee){t(""),r("");return}const qe=ee.from?nt(ee.from):"",dt=ee.to?nt(ee.to):"";t(qe),r(dt),ee.from&&ee.to&&Re(!1)},ut=()=>{ge(void 0),t(""),r(""),Re(!1)};return p.useEffect(()=>{if(ae)return;(()=>{de(),$e()})()},[e,n,f,ae]),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Analytics"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"High-level KPIs for conversations, AI agents, and human agents."})]}),i.jsxs("div",{className:"flex items-end gap-3 flex-wrap",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:"Date Range"}),i.jsxs(Ns,{open:ae,onOpenChange:Re,children:[i.jsx(Cs,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:`justify-start text-left font-normal h-9 w-[220px] ${!e&&!n?"text-muted-foreground":""}`,children:[i.jsx(Lc,{className:"mr-2 h-4 w-4"}),ft]})}),i.jsxs(Ji,{className:"w-auto min-w-[520px] p-0",align:"start",children:[i.jsx(_m,{mode:"range",numberOfMonths:2,selected:ie,defaultMonth:(ie==null?void 0:ie.from)??new Date,onSelect:Ze,disabled:ee=>ee>new Date,initialFocus:!0}),i.jsxs("div",{className:"flex items-center justify-between border-t px-3 py-2",children:[i.jsx(ne,{variant:"ghost",size:"sm",onClick:ut,children:"Clear"}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(ne,{variant:"outline",size:"sm",onClick:()=>Re(!1),disabled:!(ie!=null&&ie.from)&&!(ie!=null&&ie.to),children:"Done"})})]})]})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Channel"}),i.jsxs(Qt,{value:f,onValueChange:async ee=>{m(ee);try{await Jt({action:"analytics.channel_filter",resource:"analytics",context:{channel:ee}})}catch{}},children:[i.jsx(Yt,{className:"h-9 w-[180px]",children:i.jsx(Kt,{placeholder:"All"})}),i.jsxs(Xt,{children:[i.jsx(st,{value:"all",children:"All"}),i.jsx(st,{value:"whatsapp",children:"WhatsApp"}),i.jsx(st,{value:"web",children:"Web"}),i.jsx(st,{value:"telegram",children:"Telegram"})]})]})]}),i.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>{de(),$e()},children:"Refresh"})]}),i.jsxs(Uc,{defaultValue:"conversation",className:"w-full mt-4",children:[i.jsxs(Tl,{className:"grid w-full max-w-2xl grid-cols-5 bg-muted/50 p-1",children:[i.jsx(wr,{value:"conversation",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"Conversation"})}),i.jsx(ye,{children:i.jsx("p",{children:"Lihat analitik percakapan dan KPI"})})]})}),i.jsx(wr,{value:"ai-agent",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"AI Agent"})}),i.jsx(ye,{children:i.jsx("p",{children:"Lihat metrik kinerja agen AI"})})]})}),i.jsx(wr,{value:"human-agent",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"Human Agent"})}),i.jsx(ye,{children:i.jsx("p",{children:"Lihat metrik kinerja agen manusia"})})]})}),i.jsx(wr,{value:"database",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:"Database"})}),i.jsx(ye,{children:i.jsx("p",{children:"Lihat statistik penggunaan database dan ukuran tabel"})})]})})]}),i.jsxs(ir,{value:"conversation",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Total Chats",description:"Jumlah total percakapan yang terjadi dalam periode yang dipilih"})})}),i.jsx(ct,{children:i.jsx("div",{className:"text-2xl font-semibold",children:d.total})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"AI Containment Rate",description:"Persentase percakapan yang berhasil diselesaikan oleh AI tanpa perlu intervensi manusia. Semakin tinggi semakin baik."})})}),i.jsxs(ct,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Math.round(d.rate*100),"%"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.ai," / ",d.total]}),i.jsx(ne,{variant:"outline",className:"mt-2 h-8",onClick:async()=>{b(!0);const{start:ee,end:qe}=K(),{data:dt}=await _t.rpc("get_non_contained",{p_from:ee,p_to:qe,p_limit:100,p_offset:0});k(dt||[])},children:"View non-contained"})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Handover Rate",description:"Persentase percakapan yang dialihkan dari AI ke agen manusia karena memerlukan intervensi manual"})})}),i.jsxs(ct,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Math.round(d.handover_rate*100),"%"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.handover," / ",d.total]})]})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Chats per Channel",description:"Distribusi jumlah percakapan berdasarkan saluran komunikasi (WhatsApp, Telegram, Web Chat, dll)"})})}),i.jsx(ct,{className:"h-64",children:i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:a.map(ee=>({name:ee.display_name||ee.provider,count:ee.thread_count})),children:[i.jsx(ca,{dataKey:"name"}),i.jsx(ua,{}),i.jsx(sr,{}),i.jsx(Kn,{dataKey:"count",fill:Mr[2],radius:[4,4,0,0],children:i.jsx(Zi,{dataKey:"count",position:"top"})})]})})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Chats Time Series (Asia/Jakarta)",description:"Grafik tren jumlah percakapan dari waktu ke waktu dalam zona waktu Asia/Jakarta, dikelompokkan berdasarkan saluran"})})}),i.jsx(ct,{className:"h-64",children:i.jsx(pi,{width:"100%",height:"100%",children:(()=>{const ee=Array.from(new Set(g.map(se=>se.provider))),dt=Array.from(new Set(g.map(se=>se.bucket))).sort().map(se=>{var oe;const ve={bucket:new Date(se).toLocaleDateString("en-US",{timeZone:"Asia/Jakarta"})};for(const Xe of ee)ve[Xe]=((oe=g.find(ke=>ke.bucket===se&&ke.provider===Xe))==null?void 0:oe.count)||0;return ve});return i.jsxs(gi,{data:dt,children:[i.jsx(ca,{dataKey:"bucket"}),i.jsx(ua,{}),i.jsx(sr,{}),i.jsx(wi,{}),ee.map((se,ve)=>i.jsx(Kn,{dataKey:se,stackId:void 0,fill:Mr[ve%(Mr.length-1)+1]},se))]})})()})})]})]}),i.jsxs(ir,{value:"ai-agent",className:"space-y-6",children:[i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"AI Token Usage (by day)",description:"Penggunaan token AI per hari, menunjukkan token input (prompt) dan output (completion). Token adalah unit penggunaan untuk menghitung biaya AI"})})}),i.jsxs(ct,{className:"h-64",children:[i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:j.map(ee=>({day:new Date(ee.day).toLocaleDateString("en-US",{timeZone:"Asia/Jakarta"}),input:ee.input,output:ee.output})),children:[i.jsx(ca,{dataKey:"day"}),i.jsx(ua,{}),i.jsx(sr,{}),i.jsx(wi,{}),i.jsx(Kn,{dataKey:"input",stackId:"tokens",fill:Mr[1],name:"Prompt tokens"}),i.jsx(Kn,{dataKey:"output",stackId:"tokens",fill:Mr[2],name:"Completion tokens"})]})}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Total tokens: ",P.total.toLocaleString()," (input ",P.input.toLocaleString(),", output ",P.output.toLocaleString(),")"]})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Top Models by Tokens",description:"Model AI yang paling banyak menggunakan token, diurutkan berdasarkan total penggunaan. Membantu mengidentifikasi model mana yang paling banyak digunakan"})})}),i.jsx(ct,{className:"h-64",children:i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:O.map(ee=>({name:ee.model,tokens:ee.tokens})),layout:"vertical",children:[i.jsx(ca,{type:"number"}),i.jsx(ua,{type:"category",dataKey:"name",width:160}),i.jsx(sr,{}),i.jsx(Kn,{dataKey:"tokens",fill:Mr[4],radius:[0,4,4,0],children:i.jsx(Zi,{dataKey:"tokens",position:"right"})})]})})})]})]}),i.jsxs(ir,{value:"human-agent",className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Super Agent"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Filter untuk melihat metrik agen yang berada di bawah super agent tertentu. Pilih 'All' untuk melihat semua agen"})})]})]}),i.jsxs(Qt,{value:E,onValueChange:ee=>$(ee),children:[i.jsx(Yt,{className:"w-[220px] h-9",children:i.jsx(Kt,{placeholder:"All"})}),i.jsxs(Xt,{children:[i.jsx(st,{value:"all",children:"All"}),D.map(ee=>i.jsx(st,{value:String(ee.super_agent_id||"none"),children:ee.super_agent_name||""},ee.super_agent_id||"none"))]})]}),i.jsx(ne,{variant:"outline",className:"h-9",onClick:de,children:"Apply"})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Agent KPIs",description:"Key Performance Indicators untuk setiap agen manusia: jumlah percakapan yang diselesaikan dan waktu rata-rata penyelesaian (dalam menit)"})})}),i.jsx(ct,{className:"h-64",children:i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:M.map(ee=>({name:ee.agent_name||"",resolved:ee.resolved_count,avgMin:Math.round(ee.avg_resolution_minutes||0)})),children:[i.jsx(ca,{dataKey:"name"}),i.jsx(ua,{}),i.jsx(sr,{}),i.jsx(wi,{}),i.jsx(Kn,{dataKey:"resolved",name:"Resolved",fill:Mr[3],radius:[4,4,0,0]}),i.jsx(Kn,{dataKey:"avgMin",name:"Avg Resolution (min)",fill:Mr[5],radius:[4,4,0,0]})]})})})]})]}),i.jsxs(ir,{value:"database",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Total Database Size",description:"Total ukuran database termasuk semua tabel, indeks, dan metadata dalam format yang mudah dibaca"})})}),i.jsxs(ct,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:(R==null?void 0:R.total_size_pretty)||"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Data: ",(R==null?void 0:R.data_size_pretty)||""," | Indexes: ",(R==null?void 0:R.indexes_size_pretty)||""]})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Total Tables",description:"Jumlah total tabel yang ada di database public schema"})})}),i.jsx(ct,{children:i.jsx("div",{className:"text-2xl font-semibold",children:(R==null?void 0:R.total_tables)||0})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Total Rows",description:"Jumlah total baris data di semua tabel database"})})}),i.jsx(ct,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((R==null?void 0:R.total_rows)||0).toLocaleString()})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Total Indexes",description:"Jumlah total indeks yang ada di database. Indeks membantu mempercepat query"})})}),i.jsx(ct,{children:i.jsx("div",{className:"text-2xl font-semibold",children:(R==null?void 0:R.total_indexes)||0})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Cache Hit Ratio",description:"Persentase data yang ditemukan di cache memory. Semakin tinggi semakin baik (idealnya >95%). Menunjukkan efisiensi penggunaan memory"})})}),i.jsxs(ct,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:W?`${(W.cache_hit_ratio*100).toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Hits: ",W?W.shared_buffers_hit.toLocaleString():""," | Reads: ",W?W.shared_buffers_read.toLocaleString():""]})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Index Scan Ratio",description:"Persentase scan yang menggunakan indeks dibanding sequential scan. Semakin tinggi semakin baik. Menunjukkan efektivitas indeks"})})}),i.jsxs(ct,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:W?`${(W.idx_scan_ratio*100).toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Index: ",W?W.total_index_scans.toLocaleString():""," | Seq: ",W?W.total_sequential_scans.toLocaleString():""]})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Heap Hit Ratio",description:"Persentase hit pada heap (tabel data) di cache memory. Semakin tinggi semakin baik"})})}),i.jsx(ct,{children:i.jsx("div",{className:"text-2xl font-semibold",children:W?`${(W.heap_hit_ratio*100).toFixed(2)}%`:"Loading..."})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Total Inserts",description:"Jumlah total operasi INSERT yang pernah dilakukan di semua tabel"})})}),i.jsx(ct,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((te==null?void 0:te.total_inserts)||0).toLocaleString()})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Total Updates",description:"Jumlah total operasi UPDATE yang pernah dilakukan di semua tabel"})})}),i.jsx(ct,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((te==null?void 0:te.total_updates)||0).toLocaleString()})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Total Deletes",description:"Jumlah total operasi DELETE yang pernah dilakukan di semua tabel"})})}),i.jsx(ct,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((te==null?void 0:te.total_deletes)||0).toLocaleString()})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Cache Hit %",description:"Persentase blok yang ditemukan di cache vs yang dibaca dari disk. Semakin tinggi semakin baik untuk performa"})})}),i.jsxs(ct,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:te?`${te.cache_hit_percentage.toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Hits: ",te?te.total_blocks_hit.toLocaleString():""," | Reads: ",te?te.total_blocks_read.toLocaleString():""]})]})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Table Sizes",description:"Ukuran total (termasuk indeks) untuk setiap tabel diurutkan dari yang terbesar. Membantu mengidentifikasi tabel yang memakan banyak ruang"})})}),i.jsx(ct,{className:"h-64",children:A.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:A.slice(0,10).map(ee=>({name:ee.tablename,size:ee.total_size_bytes/1024})),layout:"vertical",children:[i.jsx(ca,{type:"number"}),i.jsx(ua,{type:"category",dataKey:"name",width:160}),i.jsx(sr,{formatter:ee=>`${ee.toFixed(2)} KB`,labelFormatter:ee=>`Table: ${ee}`}),i.jsx(Kn,{dataKey:"size",fill:Mr[1],radius:[0,4,4,0],children:i.jsx(Zi,{dataKey:"size",position:"right",formatter:ee=>`${ee.toFixed(2)} KB`})})]})})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Row Counts by Table",description:"Jumlah baris data per tabel, diurutkan dari yang terbanyak. Menunjukkan tabel mana yang paling aktif menyimpan data"})})}),i.jsx(ct,{className:"h-64",children:A.filter(ee=>ee.row_count>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:A.filter(ee=>ee.row_count>0).slice(0,10).map(ee=>({name:ee.tablename,rows:ee.row_count})),layout:"vertical",children:[i.jsx(ca,{type:"number"}),i.jsx(ua,{type:"category",dataKey:"name",width:160}),i.jsx(sr,{}),i.jsx(Kn,{dataKey:"rows",fill:Mr[3],radius:[0,4,4,0],children:i.jsx(Zi,{dataKey:"rows",position:"right"})})]})})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Index Sizes (Top 15)",description:"Ukuran setiap indeks diurutkan dari yang terbesar. Indeks besar mungkin perlu dioptimasi"})})}),i.jsx(ct,{className:"h-64",children:X.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:X.slice(0,15).map(ee=>({name:`${ee.tablename}.${ee.indexname}`.substring(0,30),size:ee.index_size_bytes/1024,scans:ee.index_scans})),layout:"vertical",children:[i.jsx(ca,{type:"number"}),i.jsx(ua,{type:"category",dataKey:"name",width:200}),i.jsx(sr,{formatter:(ee,qe)=>qe==="size"?`${ee.toFixed(2)} KB`:ee.toLocaleString(),labelFormatter:ee=>`Index: ${ee}`}),i.jsx(wi,{}),i.jsx(Kn,{dataKey:"size",name:"Size (KB)",fill:Mr[1],radius:[0,4,4,0]})]})})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Table Activity (Top 10)",description:"Jumlah operasi INSERT, UPDATE, dan DELETE per tabel. Menunjukkan tabel mana yang paling aktif"})})}),i.jsx(ct,{className:"h-64",children:A.filter(ee=>ee.inserts+ee.updates+ee.deletes>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:A.filter(ee=>ee.inserts+ee.updates+ee.deletes>0).slice(0,10).map(ee=>({name:ee.tablename,inserts:ee.inserts,updates:ee.updates,deletes:ee.deletes})),layout:"vertical",children:[i.jsx(ca,{type:"number"}),i.jsx(ua,{type:"category",dataKey:"name",width:160}),i.jsx(sr,{}),i.jsx(wi,{}),i.jsx(Kn,{dataKey:"inserts",stackId:"activity",fill:Mr[2],name:"Inserts"}),i.jsx(Kn,{dataKey:"updates",stackId:"activity",fill:Mr[4],name:"Updates"}),i.jsx(Kn,{dataKey:"deletes",stackId:"activity",fill:Mr[5],name:"Deletes"})]})})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Table Scan Ratios",description:"Rasio sequential scan vs index scan per tabel. Sequential scan tinggi menunjukkan perlu indeks yang lebih baik"})})}),i.jsx(ct,{className:"h-64",children:A.filter(ee=>ee.sequential_scans+ee.index_scans>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:A.filter(ee=>ee.sequential_scans+ee.index_scans>0).slice(0,10).map(ee=>({name:ee.tablename,seqRatio:Number((ee.table_scan_ratio*100).toFixed(1)),idxRatio:Number(((1-ee.table_scan_ratio)*100).toFixed(1))})),layout:"vertical",children:[i.jsx(ca,{type:"number",domain:[0,100]}),i.jsx(ua,{type:"category",dataKey:"name",width:160}),i.jsx(sr,{formatter:ee=>`${ee}%`}),i.jsx(wi,{}),i.jsx(Kn,{dataKey:"seqRatio",stackId:"scan",fill:Mr[5],name:"Seq Scan %"}),i.jsx(Kn,{dataKey:"idxRatio",stackId:"scan",fill:Mr[3],name:"Index Scan %"})]})})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Comprehensive Table Statistics",description:"Rincian lengkap setiap tabel: ukuran, baris, statistik scan, operasi DML, dan informasi maintenance"})})}),i.jsx(ct,{children:i.jsx("div",{className:"max-h-96 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2 px-2 sticky left-0 bg-background",children:"Table"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Total Size"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Rows"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Dead Rows"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Inserts"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Updates"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Deletes"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Seq Scans"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Idx Scans"}),i.jsx("th",{className:"text-left py-2 px-2",children:"Last Vacuum"})]})}),i.jsx("tbody",{children:A.slice(0,25).map(ee=>i.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[i.jsx("td",{className:"py-2 px-2 font-medium sticky left-0 bg-background",children:ee.tablename}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.total_size_pretty}),i.jsx("td",{className:"py-2 px-2 text-right",children:ee.row_count.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.dead_rows>0?i.jsx("span",{className:"text-orange-600",children:ee.dead_rows.toLocaleString()}):"0"}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.inserts.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.updates.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.deletes.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.sequential_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.index_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-left text-xs text-muted-foreground",children:ee.last_vacuum?new Date(ee.last_vacuum).toLocaleDateString():ee.last_autovacuum?`Auto: ${new Date(ee.last_autovacuum).toLocaleDateString()}`:"Never"})]},ee.tablename))})]})})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:i.jsx(An,{label:"Index Statistics",description:"Statistik lengkap setiap indeks: ukuran, jumlah scan, dan performa cache. Membantu mengidentifikasi indeks yang tidak digunakan atau perlu dioptimasi"})})}),i.jsx(ct,{children:i.jsx("div",{className:"max-h-96 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2 px-2 sticky left-0 bg-background",children:"Table"}),i.jsx("th",{className:"text-left py-2 px-2",children:"Index"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Size"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Scans"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Tuples Read"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Tuples Fetched"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Cache Hits"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Cache Reads"})]})}),i.jsx("tbody",{children:X.slice(0,30).map((ee,qe)=>i.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[i.jsx("td",{className:"py-2 px-2 font-medium sticky left-0 bg-background",children:ee.tablename}),i.jsx("td",{className:"py-2 px-2 font-mono text-xs",children:ee.indexname}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.index_size_pretty}),i.jsx("td",{className:"py-2 px-2 text-right",children:ee.index_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.index_tup_reads.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.index_tup_fetches.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.idx_blks_hit.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.idx_blks_read.toLocaleString()})]},qe))})]})})})]})]})]}),i.jsx(gn,{open:w,onOpenChange:b,children:i.jsxs(ln,{className:"max-w-3xl",children:[i.jsx(cn,{children:i.jsx(un,{children:"Non-contained Conversations"})}),i.jsx("div",{className:"max-h-80 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2",children:"Time"}),i.jsx("th",{className:"text-left py-2",children:"Contact"}),i.jsx("th",{className:"text-left py-2",children:"Handover Reason"}),i.jsx("th",{className:"text-left py-2",children:"Status"})]})}),i.jsx("tbody",{children:_.map(ee=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-1",children:new Date(ee.created_at).toLocaleString()}),i.jsx("td",{className:"py-1",children:ee.contact_name}),i.jsx("td",{className:"py-1",children:ee.handover_reason||"(none)"}),i.jsx("td",{className:"py-1",children:ee.status})]},ee.id))})]})})]})})]})}var M0="Switch",[OFe,g5e]=Ir(M0),[IFe,RFe]=OFe(M0),d9=p.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[f,m]=p.useState(null),g=It(t,b=>m(b)),v=p.useRef(!1),x=f?d||!!f.closest("form"):!0,[y,w]=Ua({prop:a,defaultProp:s??!1,onChange:u,caller:M0});return i.jsxs(IFe,{scope:n,checked:y,disabled:l,children:[i.jsx(lt.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":p9(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:g,onClick:Ve(e.onClick,b=>{w(_=>!_),x&&(v.current=b.isPropagationStopped(),v.current||b.stopPropagation())})}),x&&i.jsx(m9,{control:f,bubbles:!v.current,name:r,value:c,checked:y,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});d9.displayName=M0;var h9="SwitchThumb",f9=p.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=RFe(h9,n);return i.jsx(lt.span,{"data-state":p9(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});f9.displayName=h9;var MFe="SwitchBubbleInput",m9=p.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},s)=>{const o=p.useRef(null),l=It(o,s),c=SC(n),u=EN(t);return p.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&m){const g=new Event("click",{bubbles:r});m.call(d,n),d.dispatchEvent(g)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});m9.displayName=MFe;function p9(e){return e?"checked":"unchecked"}var g9=d9,DFe=f9;const Es=p.forwardRef(({className:e,...t},n)=>i.jsx(g9,{className:Pe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:i.jsx(DFe,{className:Pe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Es.displayName=g9.displayName;var D0="Collapsible",[LFe,v9]=Ir(D0),[$Fe,rE]=LFe(D0),y9=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:s,onOpenChange:o,...l}=e,[c,u]=Ua({prop:r,defaultProp:a??!1,onChange:o,caller:D0});return i.jsx($Fe,{scope:n,disabled:s,contentId:fr(),open:c,onOpenToggle:p.useCallback(()=>u(d=>!d),[u]),children:i.jsx(lt.div,{"data-state":oE(c),"data-disabled":s?"":void 0,...l,ref:t})})});y9.displayName=D0;var x9="CollapsibleTrigger",aE=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=rE(x9,n);return i.jsx(lt.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":oE(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:Ve(e.onClick,a.onOpenToggle)})});aE.displayName=x9;var iE="CollapsibleContent",sE=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=rE(iE,e.__scopeCollapsible);return i.jsx(kr,{present:n||a.open,children:({present:s})=>i.jsx(FFe,{...r,ref:t,present:s})})});sE.displayName=iE;var FFe=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...s}=e,o=rE(iE,n),[l,c]=p.useState(r),u=p.useRef(null),d=It(t,u),h=p.useRef(0),f=h.current,m=p.useRef(0),g=m.current,v=o.open||l,x=p.useRef(v),y=p.useRef(void 0);return p.useEffect(()=>{const w=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(w)},[]),tr(()=>{const w=u.current;if(w){y.current=y.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const b=w.getBoundingClientRect();h.current=b.height,m.current=b.width,x.current||(w.style.transitionDuration=y.current.transitionDuration,w.style.animationName=y.current.animationName),c(r)}},[o.open,r]),i.jsx(lt.div,{"data-state":oE(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...s,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:v&&a})});function oE(e){return e?"open":"closed"}var b9=y9,UFe=aE,BFe=sE;const tD=b9,nD=aE,rD=sE,w9=e=>{const[t,n]=p.useState(!0),[r,a]=p.useState(!1),[s,o]=p.useState(null),[l,c]=p.useState(null),u=async()=>{try{if(n(!0),c(null),e){const{data:m,error:g}=await ce.from("ai_profiles").select("*").eq("id",e).single();if(g)throw g;m&&o(m)}else o(null)}catch(m){console.error("Error fetching AI profile:",m),c(m instanceof Error?m.message:"Failed to fetch profile")}finally{n(!1)}},d=async m=>{try{if(a(!0),c(null),s!=null&&s.id){const{error:g}=await ce.from("ai_profiles").update(m).eq("id",s.id);try{await Jt({action:"ai_profile.update",resource:"ai_profile",resourceId:s.id,context:m})}catch{}if(g)throw g}else{const{data:g,error:v}=await ce.from("ai_profiles").insert([{...m,org_id:"00000000-0000-0000-0000-000000000001"}]).select().single();if(v)throw v;g&&o(g);try{await Jt({action:"ai_profile.create",resource:"ai_profile",resourceId:(g==null?void 0:g.id)??null,context:m})}catch{}}await u()}catch(g){console.error("Error saving AI profile:",g),c(g instanceof Error?g.message:"Failed to save profile")}finally{a(!1)}},h=async m=>{try{n(!0),c(null);const{data:g,error:v}=await ce.from("ai_profiles").select("*").eq("org_id",m||"00000000-0000-0000-0000-000000000001").order("created_at",{ascending:!1});if(v)throw v;return g}catch(g){return console.error("Error fetching AI profiles:",g),c(g instanceof Error?g.message:"Failed to fetch profiles"),[]}finally{n(!1)}},f=async m=>{try{a(!0),c(null);const{error:g}=await ce.from("ai_profiles").delete().eq("id",m);try{await Jt({action:"ai_profile.delete",resource:"ai_profile",resourceId:m})}catch{}if(g)throw g}catch(g){throw console.error("Error deleting AI profile:",g),c(g instanceof Error?g.message:"Failed to delete profile"),g}finally{a(!1)}};return p.useEffect(()=>{e?u():n(!1)},[e]),{profile:s,loading:t,saving:r,error:l,fetchProfile:u,saveProfile:d,fetchAllProfiles:h,deleteProfile:f}},zFe={Conservative:.3,Balanced:.5,Creative:.7};function j9(e,t=.5){if(!e)return t;const n=e.trim();return zFe[n]??t}const WFe="00000000-0000-0000-0000-000000000001",qFe=({welcomeMessage:e,systemPrompt:t,modelDisplay:n,profile:r,profileId:a,modelName:s,temperature:o,transfer_conditions:l})=>{const c=r==null?void 0:r.response_temperature,u=c?j9(c,o||.5):o||.5,[d,h]=p.useState([]);p.useEffect(()=>{h([{id:"1",content:e||(r==null?void 0:r.welcome_message)||"Halo!  Selamat datang! Ada yang bisa saya bantu hari ini?",sender:"ai",timestamp:new Date}])},[e]);const[f,m]=p.useState(""),[g,v]=p.useState(!1),[x,y]=p.useState(!0),[w,b]=p.useState(""),_=p.useRef(null),k=p.useRef(null);p.useEffect(()=>{(()=>{const D=Date.now(),L=Math.random().toString(36).substring(2,15),U=`session_${D}_${L}`;b(U),console.log("Generated session ID:",U)})()},[]);const j=()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)};p.useEffect(()=>{j()},[d]);const N=async()=>{if(!f.trim()||g)return;const S={id:Date.now().toString(),content:f,sender:"user",timestamp:new Date};h(D=>[...D,S]),m(""),v(!0);try{const D={message:f,model:s,temperature:u,session_id:w,timestamp:new Date().toISOString(),ai_profile_id:(r==null?void 0:r.id)||a};console.log("Sending request to API:",D);const L=await ji(Sn.ENDPOINTS.AI_AGENT.CHAT_TEST,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!L.ok)throw new Error(`HTTP error! status: ${L.status}`);const U=await L.json();console.log("API Response:",U);const F={id:(Date.now()+1).toString(),content:U.output||"Sorry, I couldn't process your message.",sender:"ai",timestamp:new Date};h(M=>[...M,F]),Be.success("Message sent successfully!"),y(!0)}catch(D){console.error("Error sending message:",D),Be.error("Failed to send message"),y(!1);const L={id:(Date.now()+1).toString(),content:"Sorry, I'm having trouble connecting right now. Please try again later.",sender:"ai",timestamp:new Date};h(U=>[...U,L])}finally{v(!1)}},O=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),N())},I=()=>{h([{id:"1",content:e||(r==null?void 0:r.welcome_message)||"Halo!  Selamat datang! Ada yang bisa saya bantu hari ini?",sender:"ai",timestamp:new Date}]),Be.info("Chat history cleared")},P=()=>{const S=Date.now(),D=Math.random().toString(36).substring(2,15),L=`session_${S}_${D}`;b(L),h([{id:"1",content:e||(r==null?void 0:r.welcome_message)||"Halo!  Selamat datang! Ada yang bisa saya bantu hari ini?",sender:"ai",timestamp:new Date}]),Be.success("Session refreshed! New session ID: "+L),console.log("New session ID:",L)};return i.jsxs(We,{className:"flex flex-col h-[600px] border-2 border-primary/20",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 border-b bg-primary/5",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:i.jsx(m4,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"font-medium",children:"AI Agent Chat"}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Model: ",n,"  Temp: ",c||"Legacy"," (",u,i.jsx("span",{className:`ml-2 px-1 rounded text-xs ${x?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x?"Connected":"Disconnected"})]}),w&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Session: ",w.substring(0,20),"..."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[g&&i.jsx(Ht,{className:"w-4 h-4 animate-spin"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",onClick:P,"aria-label":"Refresh session",children:i.jsx(Vx,{className:"w-4 h-4"})})}),i.jsx(ye,{children:i.jsx("p",{children:"Segarkan sesi"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",onClick:I,"aria-label":"Clear chat history",children:i.jsx(_4,{className:"w-4 h-4"})})}),i.jsx(ye,{children:i.jsx("p",{children:"Hapus riwayat chat"})})]})]})]}),i.jsxs("div",{ref:k,className:"flex-1 p-4 space-y-4 overflow-auto max-h-[400px]",children:[d.map(S=>i.jsx("div",{className:`flex ${S.sender==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${S.sender==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:S.content}),i.jsx("p",{className:"text-xs opacity-70 mt-1",children:S.timestamp.toLocaleTimeString()})]})},S.id)),g&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-muted p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ht,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{className:"text-sm",children:"AI is typing..."})]})})}),i.jsx("div",{ref:_})]}),i.jsxs("div",{className:"p-4 border-t bg-muted/30",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("textarea",{value:f,onChange:S=>m(S.target.value),onKeyPress:O,placeholder:"Type your message...",className:"flex-1 p-3 border rounded-lg text-sm resize-none focus:ring-2 focus:ring-primary/20",rows:2,disabled:g,title:g?"Please wait":void 0}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{size:"sm",onClick:N,disabled:!f.trim()||g,className:"px-4",children:i.jsx(om,{className:"w-4 h-4"})})}),i.jsx(ye,{children:i.jsx("p",{children:"Kirim pesan ke agen AI"})})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Press Enter to send, Shift+Enter for new line"})]})]})},Pu=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown",iv=e=>e==null?"Pricing on request":`${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e>=1?2:3}).format(e)} / 1M`,HFe=({agentName:e,onBack:t,profileId:n,initialModelId:r})=>{var Kr,Et,Rn,G,_e;const[a,s]=p.useState("general"),[o,l]=p.useState("text"),[c,u]=p.useState({behavior:!0,welcome:!0,transfer:!1}),[d,h]=p.useState(!n),f=z=>{u(fe=>({...fe,[z]:!fe[z]}))},m=!n,{hasPermission:g,hasRole:v}=Or(),{user:x}=aa(),y=v==null?void 0:v("master_agent"),w=v==null?void 0:v("super_agent"),b=g("ai_agent_files.manage")||g("ai_agent_files.create")||!!y||!!w,_=(z,fe,pe)=>Number.isNaN(z)?fe:Math.min(pe,Math.max(fe,z)),k=50,j=100,N=40,O=1e3,I=25,P=24*60,{profile:S,loading:D,saving:L,error:U,saveProfile:F}=w9(n),[M,T]=p.useState((S==null?void 0:S.super_agent_id)??null),[E,$]=p.useState([]),[A,B]=p.useState(!1),[R,C]=p.useState(null);p.useEffect(()=>{S!=null&&S.super_agent_id?T(S.super_agent_id):w&&(x!=null&&x.id)?T(x.id):S!=null&&S.super_agent_id||T(null)},[S==null?void 0:S.super_agent_id,w,x==null?void 0:x.id]),p.useEffect(()=>{if(m&&!M)try{const z=localStorage.getItem("ai.new.super_agent_id");z&&(T(z),localStorage.removeItem("ai.new.super_agent_id"))}catch{}},[m,M]),p.useEffect(()=>{let z=!1;return(async()=>{try{B(!0),C(null);const{data:pe,error:Le}=await mi.from("v_human_agents").select("user_id, agent_name, email, role_name").eq("org_id",(S==null?void 0:S.org_id)??WFe).ilike("role_name","%super%");if(Le)throw Le;if(z)return;const Ke=(pe||[]).map(Ne=>({id:Ne.user_id,name:Ne.agent_name||Ne.email||String(Ne.user_id).slice(0,8)}));$(Ke),S!=null&&S.super_agent_id||(w&&(x!=null&&x.id)?T(x.id):Ke.length===1&&!w&&y&&T(Ke[0].id))}catch(pe){z||C(pe instanceof Error?pe.message:"Failed to load super agents")}finally{z||B(!1)}})(),()=>{z=!0}},[S==null?void 0:S.org_id,S==null?void 0:S.super_agent_id,w,y,x==null?void 0:x.id]);const[W,Q]=p.useState(m?"You are a helpful AI assistant for customer service. Be friendly, professional, and helpful. Always respond in Indonesian unless the customer speaks in another language.":(S==null?void 0:S.system_prompt)||""),[X,Z]=p.useState(m?"Halo!  Selamat datang! Ada yang bisa saya bantu hari ini?":(S==null?void 0:S.welcome_message)||""),[te,J]=p.useState(m?`Transfer to human agent when:
- Customer requests to speak with a human
- Complex technical issues arise
- Customer is dissatisfied or angry
- Payment or billing issues
- Escalation is needed`:(S==null?void 0:S.transfer_conditions)||""),[ie,ge]=p.useState((S==null?void 0:S.stop_ai_after_handoff)??!0),[ae,Re]=p.useState([]),[me,K]=p.useState([]),[de,$e]=p.useState(""),[nt,Ye]=p.useState("");p.useState(()=>{const z=(S==null?void 0:S.temperature)??.3;return Math.max(0,Math.min(1,z))});const[ft,Ze]=p.useState(""),[ut,ee]=p.useState(!!((S==null?void 0:S.enable_resolve)??!1)),[qe,dt]=p.useState(""),[se,ve]=p.useState(()=>_((S==null?void 0:S.read_file_limit)??3,0,I)),[oe,Xe]=p.useState((S==null?void 0:S.response_temperature)??"Balanced"),[ke,rt]=p.useState((S==null?void 0:S.message_await)??3),[bt,ue]=p.useState(""),[Se,we]=p.useState(!!((S==null?void 0:S.enable_followup_message)??!1)),[Te,je]=p.useState(""),[Ee,Ue]=p.useState(!!((S==null?void 0:S.enable_followup_assigned)??!1)),[H,q]=p.useState(""),[re,he]=p.useState(m?"":(S==null?void 0:S.followup_message)||""),[Me,et]=p.useState(m?"":(S==null?void 0:S.guide_content)||""),Ie=z=>z.replace(/[^0-9]/g,""),Y=z=>{if(!z)return 0;const fe=parseInt(z,10);return Number.isNaN(fe)?0:fe};p.useEffect(()=>{(async()=>{var fe,pe;try{const{data:Le,error:Ke}=await mi.from("ai_models").select("*").eq("is_active",!0).order("display_name",{ascending:!0});if(Ke)throw Ke;const Ne=Le||[],De=Ne.filter(Mt=>(Mt.display_name||"").toLowerCase()!=="fallback"),St=Ne.filter(Mt=>(Mt.display_name||"").toLowerCase()==="fallback");Re(De),K(St);const ze=(S==null?void 0:S.model_id)||r||"";de||(ze&&De.some(Mt=>Mt.id===ze)?$e(ze):De.length>0&&$e(((fe=De[0])==null?void 0:fe.id)||"")),!nt&&St.length>0&&Ye(((pe=St[0])==null?void 0:pe.id)||"")}catch(Le){console.error("Failed to load ai_models",Le)}})()},[S==null?void 0:S.id,r]),p.useEffect(()=>{!de&&(S!=null&&S.model_id)&&ae.some(z=>z.id===S.model_id)&&$e(S.model_id)},[ae]),p.useEffect(()=>{if(!S)return;const z=S==null?void 0:S.auto_resolve_after_minutes;Ze(typeof z=="number"&&!Number.isNaN(z)?z.toString():"0");const fe=_((S==null?void 0:S.history_limit)??k,0,j);dt(fe.toString());const pe=_((S==null?void 0:S.message_limit)??O,0,O);ue(pe.toString());const Le=(S==null?void 0:S.followup_message_delay)??60;je(Le.toString());const Ke=(S==null?void 0:S.followup_delay_assigned)??60;q(Ke.toString())},[S==null?void 0:S.id]);const le=ae.find(z=>z.id===de)||null,Fe=p.useMemo(()=>{const z=le==null?void 0:le.max_context_tokens;return typeof z=="number"&&z>0?_(z,0,j):j},[le==null?void 0:le.max_context_tokens]);p.useEffect(()=>{if(!qe)return;const z=parseInt(qe,10);Number.isNaN(z)||z>Fe&&dt(Fe.toString())},[qe,Fe]);const Je=z=>{const fe=Ie(z);if(fe===""){Ze("");return}const pe=_(parseInt(fe,10),0,P);Ze(pe.toString())},it=z=>{const fe=Ie(z);if(fe===""){dt("");return}const pe=_(parseInt(fe,10),0,Fe);dt(pe.toString())},Pt=z=>{const fe=Ie(z);if(fe===""){ue("");return}const pe=_(parseInt(fe,10),0,O);ue(pe.toString())},[Ot,Lt]=p.useState([]),yn=p.useRef(null),[jn,nr]=p.useState(!1),Wn=async()=>{const z=(S==null?void 0:S.id)??n;if(!z)throw new Error("Please save the AI Agent first before uploading files.");let fe=(S==null?void 0:S.org_id)??null;if(!fe){const{data:{user:pe}}=await mi.auth.getUser();if(pe){const{data:Le}=await mi.from("org_members").select("org_id").eq("user_id",pe.id).limit(1).maybeSingle();fe=(Le==null?void 0:Le.org_id)??null}}if(!fe)throw new Error("Could not determine your organization. Please re-login or contact support.");return{orgId:fe,profileId:z}},fn=async(z,fe)=>{try{if(!b)throw new Error("You do not have permission to upload agent files.");const pe=((z==null?void 0:z.type)||"").toLowerCase()==="application/pdf",Le=((z==null?void 0:z.name)||"").toLowerCase().endsWith(".pdf");if(!pe&&!Le)throw new Error("Only PDF files are supported");const{orgId:Ke,profileId:Ne}=await Wn();let De="";try{if(typeof crypto<"u"&&crypto.subtle){const _a=await z.arrayBuffer(),fs=await crypto.subtle.digest("SHA-256",_a);De=Array.from(new Uint8Array(fs)).map(nH=>nH.toString(16).padStart(2,"0")).join("")}else{console.warn("crypto.subtle not available, using fallback hash");const _a=`${z.name}-${z.size}-${z.lastModified}-${Date.now()}`;let fs=5381;for(let ig=0;ig<_a.length;ig++)fs=(fs<<5)+fs+_a.charCodeAt(ig);De=(Math.abs(fs)+Date.now()).toString(16).padStart(64,"0")}}catch(_a){console.warn("Error computing hash, using standard fallback:",_a),De=`fallback-${Date.now()}-${Math.random().toString(36).substring(2)}`}const ze=((z==null?void 0:z.name)||"file.pdf").replace(/[^a-zA-Z0-9_.-]/g,"").replace(/\.pdf$/i,""),Mt=`${De}_${ze}.pdf`,Nt=`org_${Ke}/profile_${Ne}/${Mt}`,Vr=`${El}/storage/v1/object/ai-agent-files/${Nt}`,Hn=crypto.randomUUID(),{error:hE}=await mi.from("files").insert({id:Hn,org_id:Ke,ai_profile_id:Ne,bucket:"ai-agent-files",path:Nt,filename:z.name,mime_type:z.type||"application/pdf",byte_size:z.size,checksum:De});if(hE)throw console.error("Error inserting into public.files:",hE),new Error("Failed to record file metadata");const fE=new FormData;fE.append("file",z);const Z9={"x-file-name":z.name||"file.pdf","x-file-url":Vr,"x-org-id":Ke,"x-profile-id":Ne,"x-file-hash":De,"x-file-id":Hn},rg=await fetch(Sn.buildUrl(Sn.ENDPOINTS.KNOWLEDGE.FILE_UPLOAD),{method:"POST",headers:Z9,body:fE});if(!rg.ok){let _a=`Upload failed (${rg.status})`;try{const fs=await rg.json();_a=(fs==null?void 0:fs.message)||_a}catch{}throw new Error(_a)}const Hs=await rg.json().catch(()=>({})),eH=(Hs==null?void 0:Hs.document_id)||(Hs==null?void 0:Hs.documentId)||void 0,F0=String((Hs==null?void 0:Hs.status)||"").toLowerCase();if(F0==="duplicate"){const _a=new Error("duplicate");throw _a.code="DUPLICATE_CONTENT",_a}if(F0!=="success")throw new Error(`Upload webhook returned unexpected status: ${F0||"unknown"}`);let mE=null;const{error:mu}=await mi.storage.from("ai-agent-files").upload(Nt,z,{cacheControl:"31536000",contentType:"application/pdf",upsert:!1});if(mu&&!(typeof(mu==null?void 0:mu.message)=="string"&&/exists|duplicate|409/i.test(mu.message)))throw mu;const{data:ag,error:tH}=await mi.storage.from("ai-agent-files").createSignedUrl(Nt,60*60*24*7);return!tH&&(ag!=null&&ag.signedUrl)&&(mE=ag.signedUrl),{url:mE||"",filePath:Nt,documentId:eH,fileId:Hn}}catch(pe){throw console.error("Error uploading file to Supabase:",pe),new Error(`Failed to upload ${z.name}: ${(pe==null?void 0:pe.message)||"Unknown error"}`)}},gt=async()=>{try{nr(!0);const{orgId:z,profileId:fe}=await Wn(),{data:pe,error:Le}=await mi.from("files").select("*").eq("ai_profile_id",fe).order("created_at",{ascending:!1});if(Le)throw Le;const Ke=(pe||[]).map(Ne=>({id:Ne.id,name:Ne.filename,size:Ne.byte_size||0,uploadedAt:Ne.created_at,status:"ready",url:"",filePath:Ne.path,isEnabled:Ne.is_enabled??!0}));await Promise.all(Ke.map(async Ne=>{if(Ne.filePath){const{data:De}=await mi.storage.from("ai-agent-files").createSignedUrl(Ne.filePath,604800);De!=null&&De.signedUrl&&(Ne.url=De.signedUrl)}})),Lt(Ke)}catch(z){console.error("Failed to load knowledge files:",z)}finally{nr(!1)}},Nr=async(z,fe)=>{if(Lt(pe=>pe.map(Le=>Le.id===z?{...Le,isEnabled:!fe}:Le)),typeof z=="string")try{const{error:pe}=await mi.from("files").update({is_enabled:!fe}).eq("id",z);if(pe)throw pe}catch{Be.error("Failed to update status"),Lt(Le=>Le.map(Ke=>Ke.id===z?{...Ke,isEnabled:fe}:Ke))}};p.useEffect(()=>{o==="file"&&gt()},[o,S==null?void 0:S.id,n]);const rr=async z=>{const fe=Array.from(z.target.files||[]);if(fe.length===0)return;if(fe.length>1){Be.error("Please upload one file at a time.");return}const pe=fe.filter(Ne=>Ne.type==="application/pdf"||Ne.name.toLowerCase().endsWith(".pdf"));if(pe.length<fe.length&&Be.error("Only PDF files are supported. Some files were skipped."),pe.length===0){yn.current&&(yn.current.value="");return}try{await Wn()}catch(Ne){Be.error((Ne==null?void 0:Ne.message)||"Unable to upload at this time"),yn.current&&(yn.current.value="");return}const Le=new Date().toISOString(),Ke=pe.map(Ne=>({id:Date.now()+Math.random(),name:Ne.name,size:Ne.size,uploadedAt:Le,status:"uploading"}));Lt(Ne=>[...Ke,...Ne]);for(let Ne=0;Ne<pe.length;Ne++){const De=pe[Ne],St=Ke[Ne];try{const{url:ze,filePath:Mt,fileId:Nt}=await fn(De,St.id);Lt(Vr=>Vr.map(Hn=>Hn.id===St.id?{...Hn,status:"ready",url:ze,filePath:Mt,id:Nt||Hn.id,isEnabled:!0}:Hn)),Be.success(`${De.name} uploaded successfully!`)}catch(ze){if(String((ze==null?void 0:ze.message)||"").toLowerCase().includes("duplicate")||(ze==null?void 0:ze.code)==="DUPLICATE_CONTENT"){Lt(Mt=>Mt.map(Nt=>Nt.id===St.id?{...Nt,status:"ready"}:Nt)),setTimeout(()=>{var Mt,Nt;(Nt=(Mt=gt())==null?void 0:Mt.catch)==null||Nt.call(Mt,()=>{})},0),Be.info(`${De.name} already exists. Skipped re-upload.`);continue}Lt(Mt=>Mt.map(Nt=>Nt.id===St.id?{...Nt,status:"failed"}:Nt)),Be.error(ze.message||`Failed to upload ${De.name}`)}}yn.current&&(yn.current.value="")},qr=async z=>{z.preventDefault();const fe=Array.from(z.dataTransfer.files||[]);if(fe.length===0)return;if(fe.length>1){Be.error("Please upload one file at a time.");return}const pe=fe.filter(Ne=>Ne.type==="application/pdf"||Ne.name.toLowerCase().endsWith(".pdf"));if(pe.length<fe.length&&Be.error("Only PDF files are supported. Some files were skipped."),pe.length===0)return;try{await Wn()}catch(Ne){Be.error((Ne==null?void 0:Ne.message)||"Unable to upload at this time");return}const Le=new Date().toISOString(),Ke=pe.map(Ne=>({id:Date.now()+Math.random(),name:Ne.name,size:Ne.size,uploadedAt:Le,status:"uploading"}));Lt(Ne=>[...Ke,...Ne]);for(let Ne=0;Ne<pe.length;Ne++){const De=pe[Ne],St=Ke[Ne];try{const{url:ze,filePath:Mt}=await fn(De,St.id);Lt(Nt=>Nt.map(Vr=>Vr.id===St.id?{...Vr,status:"ready",url:ze,filePath:Mt}:Vr)),Be.success(`${De.name} uploaded successfully!`)}catch(ze){Lt(Mt=>Mt.map(Nt=>Nt.id===St.id?{...Nt,status:"failed"}:Nt)),Be.error(ze.message||`Failed to upload ${De.name}`)}}},wa=z=>{z.preventDefault()},ci=async z=>{const fe=Ot.find(pe=>pe.id===z);try{const{orgId:pe,profileId:Le}=await Wn(),Ke=new URLSearchParams({org_id:pe,profile_id:Le,file_key:(fe==null?void 0:fe.filePath)||"",file_id:String((fe==null?void 0:fe.id)||"")}),Ne=await fetch(`${Sn.buildUrl(Sn.ENDPOINTS.KNOWLEDGE.FILE_DELETE)}?${Ke.toString()}`,{method:"POST"});if(!Ne.ok){let ze=`Delete failed (${Ne.status})`;try{const Mt=await Ne.json();ze=(Mt==null?void 0:Mt.message)||ze}catch{}throw new Error(ze)}let De={};try{De=await Ne.json()}catch{}if(String((De==null?void 0:De.status)||"").toLowerCase()!=="deleted")throw new Error((De==null?void 0:De.message)||"Delete not confirmed by webhook");Lt(ze=>ze.filter(Mt=>Mt.id!==z)),Be.info(`${(fe==null?void 0:fe.name)||"File"} removed`)}catch(pe){console.error("Error deleting file via webhook:",pe),Be.error((pe==null?void 0:pe.message)||"Failed to delete file")}},ar=async z=>{try{const fe=z.filePath;if(!fe)throw new Error("Missing file path");const{data:pe,error:Le}=await mi.storage.from("ai-agent-files").createSignedUrl(fe,60*60,{download:z.name||"file.pdf"});if(Le)throw Le;const Ke=(pe==null?void 0:pe.signedUrl)||z.url||"";if(!Ke)throw new Error("Unable to generate download link");const Ne=document.createElement("a");Ne.href=Ke,Ne.download=z.name||"",Ne.target="_blank",Ne.rel="noopener",document.body.appendChild(Ne),Ne.click(),Ne.remove()}catch(fe){Be.error((fe==null?void 0:fe.message)||"Failed to download file")}},Mo=async()=>{const z=Ot.filter(fe=>fe.filePath);if(z.length>0)try{const{orgId:fe,profileId:pe}=await Wn();await Promise.all(z.map(async Le=>{try{const Ke=new URLSearchParams({org_id:fe,profile_id:pe,file_key:Le.filePath||"",file_id:String(Le.id||""),document_id:(Le==null?void 0:Le.documentId)||""}),Ne=await fetch(`${Sn.buildUrl(Sn.ENDPOINTS.KNOWLEDGE.FILE_DELETE)}?${Ke.toString()}`,{method:"POST"});if(Ne.ok){let De={};try{De=await Ne.json()}catch{}const St=String((De==null?void 0:De.status)||"").toLowerCase();St!=="deleted"&&console.warn("Delete webhook did not confirm deletion for",Le.filePath,St)}else{let De=`Delete failed (${Ne.status})`;try{const St=await Ne.json();De=(St==null?void 0:St.message)||De}catch{}console.warn("Delete webhook failed for",Le.filePath,De)}}catch(Ke){console.warn("Delete webhook error for",Le.filePath,Ke)}}))}catch(fe){console.error("Error clearing files via webhook:",fe)}Lt([]),Be.info("All files cleared")},[lr,qa]=p.useState([{id:Date.now(),question:"",answer:""}]),[Mh,ja]=p.useState([{id:Date.now(),question:"",answer:""}]),fu=()=>{const z={id:Date.now()+Math.random(),question:"",answer:""};qa(fe=>[z,...fe]),ja(fe=>[JSON.parse(JSON.stringify(z)),...fe])},Hr=z=>{qa(fe=>fe.filter(pe=>pe.id!==z)),ja(fe=>fe.filter(pe=>pe.id!==z))},Mi=(z,fe,pe)=>{qa(Le=>Le.map(Ke=>Ke.id===z?{...Ke,[fe]:pe}:Ke))},qs=z=>{const fe=Mh.find(Ke=>Ke.id===z.id),pe=(z.question||"").trim(),Le=(z.answer||"").trim();return fe?pe!==(fe.question||"").trim()||Le!==(fe.answer||"").trim():pe!==""||Le!==""},[Ha,Ka]=p.useState([{id:1,prompt:"Hai! Ada yang bisa saya bantu lagi?",delay:60,expanded:!1},{id:2,prompt:"Jika ada pertanyaan lain, jangan ragu untuk bertanya!",delay:120,expanded:!1}]),Ae=()=>{const z={id:Date.now(),prompt:"",delay:60,expanded:!1};Ka([...Ha,z])},vt=z=>{Ka(Ha.filter(fe=>fe.id!==z))},wt=(z,fe,pe)=>{Ka(Ha.map(Le=>Le.id===z?{...Le,[fe]:pe}:Le))},Rt=z=>{Ka(Ha.map(fe=>fe.id===z?{...fe,expanded:!fe.expanded}:fe))},jt=()=>{if(S&&!m){Q(S.system_prompt||""),Z(S.welcome_message||""),J(S.transfer_conditions||""),ge(S.stop_ai_after_handoff),Ze(String((S==null?void 0:S.auto_resolve_after_minutes)??0)),ee(!!((S==null?void 0:S.enable_resolve)??!1)),dt(String(_((S==null?void 0:S.history_limit)??k,0,j))),ve(_((S==null?void 0:S.read_file_limit)??3,0,I)),Xe((S==null?void 0:S.response_temperature)??"Balanced"),rt((S==null?void 0:S.message_await)??3),ue(String(_((S==null?void 0:S.message_limit)??O,0,O))),we(!!((S==null?void 0:S.enable_followup_message)??!1)),je(String((S==null?void 0:S.followup_message_delay)??60)),Ue(!!((S==null?void 0:S.enable_followup_assigned)??!1)),q(String((S==null?void 0:S.followup_delay_assigned)??60)),he(S.followup_message||"");const z=S==null?void 0:S.qna;if(z&&Array.isArray(z)){const fe=z.map((pe,Le)=>({id:Date.now()+Le,question:pe.q??pe.question??"",answer:pe.a??pe.answer??""}));qa(fe),ja(JSON.parse(JSON.stringify(fe)))}et((S==null?void 0:S.guide_content)||"")}};p.useEffect(()=>{jt()},[S,m]),p.useEffect(()=>{m&&ja(JSON.parse(JSON.stringify(lr)))},[]);const qn=async()=>{if(!M){Be.error("Please assign a super agent before saving this AI agent.");return}const z=_(Y(ft),0,P),fe=_(Y(qe),0,Fe),pe=_(Y(bt),0,O),Le=Y(Te),Ke=Y(H),Ne=(()=>{const ze=le==null?void 0:le.max_context_tokens;return typeof ze=="number"&&ze>0?Math.max(1,Math.floor(ze/1e3)):N})(),De=_(_((S==null?void 0:S.context_limit)??28,0,N),0,Ne),St={system_prompt:W,welcome_message:X,transfer_conditions:te,stop_ai_after_handoff:ie,model_id:de||null,name:e,auto_resolve_after_minutes:z,enable_resolve:ut,history_limit:fe,read_file_limit:se,context_limit:De,response_temperature:oe,message_await:ke,message_limit:pe,super_agent_id:M,enable_followup_message:Se,followup_message_delay:Le,enable_followup_assigned:Ee,followup_delay_assigned:Ke,followup_message:re,qna:lr.filter(ze=>{var Mt,Nt;return((Mt=ze.question)==null?void 0:Mt.trim())||((Nt=ze.answer)==null?void 0:Nt.trim())}).map(({question:ze,answer:Mt})=>({q:ze.trim(),a:Mt.trim()})),guide_content:Me};try{await F(St),h(!1),Be.success(m?"AI agent created successfully!":"AI agent settings saved successfully!")}catch{Be.error(m?"Failed to create AI agent":"Failed to save AI agent settings")}},Cr=async()=>{try{await F({name:e,guide_content:Me}),Be.success("Knowledge text saved")}catch(z){Be.error((z==null?void 0:z.message)||"Failed to save knowledge text")}},_n=async()=>{try{await F({name:e,qna:lr.filter(z=>{var fe,pe;return((fe=z.question)==null?void 0:fe.trim())||((pe=z.answer)==null?void 0:pe.trim())}).map(({question:z,answer:fe})=>({q:z.trim(),a:fe.trim()}))}),ja(JSON.parse(JSON.stringify(lr))),Be.success("Q&A saved")}catch(z){Be.error((z==null?void 0:z.message)||"Failed to save Q&A")}};return D&&!m?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ht,{className:"w-8 h-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading AI profile..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs(ne,{variant:"ghost",size:"sm",onClick:t,className:"gap-2",children:[i.jsx(jp,{className:"w-4 h-4"}),"Back"]})}),i.jsx(ye,{children:i.jsx("p",{children:"Kembali ke daftar agen AI"})})]}),i.jsx("h1",{className:"text-2xl font-bold",children:e}),m?i.jsx(At,{variant:"outline",className:"text-blue-600 border-blue-600",children:"New Agent"}):S&&i.jsxs(At,{variant:"secondary",children:["Last Updated: ",new Date(S.created_at).toLocaleDateString()]}),!D&&i.jsx("div",{className:"ml-auto flex items-center gap-2",children:d?i.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>{m?t():(h(!1),jt())},className:"gap-2",children:[i.jsx(fa,{className:"w-4 h-4"}),"Cancel"]}):i.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>h(!0),className:"gap-2",children:[i.jsx(LV,{className:"w-4 h-4"}),"Edit Settings"]})})]}),U&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",U]})}),i.jsxs(Uc,{value:a,onValueChange:s,children:[i.jsxs(Tl,{className:"grid w-full grid-cols-2 bg-muted/60 p-1 rounded-lg",children:[i.jsx(wr,{value:"general",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:bg-muted/40 transition-colors",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(ho,{className:"w-4 h-4"}),i.jsx("span",{children:"General"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Konfigurasi pengaturan umum agen AI"})})]})}),i.jsx(wr,{value:"knowledge",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:bg-muted/40 transition-colors",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(_v,{className:"w-4 h-4"}),i.jsx("span",{children:"Knowledge Sources"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Kelola sumber pengetahuan dan pasangan T&J"})})]})})]}),i.jsx(ir,{value:"general",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-6",children:[i.jsxs("div",{className:"xl:col-span-3 space-y-4",children:[i.jsxs(We,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center text-lg font-semibold",children:e.charAt(0)}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:e}),i.jsx("p",{className:"text-muted-foreground",children:m?"New AI Agent - Configure your settings below":(S==null?void 0:S.description)||"AI Agent"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:m?"Not saved yet":`Last Updated: ${S?new Date(S.created_at).toLocaleString():"Never"}`})]})]}),i.jsxs("div",{className:"space-y-2 pt-4",children:[i.jsx("span",{className:"text-sm font-medium",children:"Assigned Super Agent"}),A?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading super agents..."}):R?i.jsx("div",{className:"text-sm text-destructive",children:R}):w&&(x!=null&&x.id)?i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-md bg-muted px-3 py-2 text-sm",children:[i.jsxs("span",{children:[" ",((Kr=E.find(z=>z.id===x.id))==null?void 0:Kr.name)||x.email||"You"]}),i.jsx(At,{variant:"secondary",children:"Your account"})]}):E.length===0?i.jsx("div",{className:"rounded-md border border-dashed border-muted-foreground/40 bg-muted/30 px-3 py-2 text-sm text-muted-foreground",children:"No super agents available. Create a super agent first before assigning this AI agent."}):i.jsxs(Qt,{value:M||"",onValueChange:z=>T(z),disabled:!y||!d,children:[i.jsx(Yt,{className:"w-full",children:i.jsx(Kt,{placeholder:"Choose a super agent"})}),i.jsx(Xt,{className:"bg-background border z-50",children:E.map(z=>i.jsxs(st,{value:z.id,children:[" ",z.name]},z.id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Only the assigned super agent and their human agents can view and use this AI agent."})]})]}),i.jsx(We,{className:"p-4",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"AI Model"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Pilih model AI yang menentukan kecepatan dan kualitas respons."})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the balance between speed and intelligence for this agent."})]}),le&&i.jsx(At,{variant:"secondary",className:"whitespace-nowrap",children:Pu(le==null?void 0:le.provider)})]}),i.jsxs(Qt,{value:de,onValueChange:$e,disabled:ae.length===0||!d,children:[i.jsx(Yt,{className:"w-full py-3",children:le?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[(le==null?void 0:le.display_name)||"Custom","  ",iv(le==null?void 0:le.cost_per_1m_tokens),"  ",Pu(le==null?void 0:le.provider)]})}):i.jsx(Kt,{placeholder:"Select an AI model"})}),i.jsx(Xt,{className:"bg-background border z-50",children:ae.map(z=>i.jsx(st,{value:z.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("span",{className:"font-semibold leading-tight",children:[(z==null?void 0:z.display_name)||"Custom","  ",iv(z==null?void 0:z.cost_per_1m_tokens)]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:(z==null?void 0:z.description)||"No description available"}),i.jsxs("span",{className:"text-[11px] text-muted-foreground font-mono",children:[z==null?void 0:z.model_name,"  ",Pu(z==null?void 0:z.provider)]})]})},z.id))})]}),ae.length===0&&i.jsx("p",{className:"text-xs text-destructive mt-2",children:"No AI models available. Please contact your administrator."})]}),me.length>0&&i.jsxs("div",{className:"border-t pt-6",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Fallback Model"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Model yang digunakan secara otomatis jika model utama tidak tersedia."})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatic backup model used when primary model is unavailable."})]}),me.find(z=>z.id===nt)&&i.jsx(At,{variant:"secondary",className:"whitespace-nowrap",children:Pu((Et=me.find(z=>z.id===nt))==null?void 0:Et.provider)})]}),i.jsxs(Qt,{value:nt,onValueChange:Ye,disabled:me.length===0||!d,children:[i.jsx(Yt,{className:"w-full py-3",children:me.find(z=>z.id===nt)?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[((Rn=me.find(z=>z.id===nt))==null?void 0:Rn.display_name)||"Custom","  ",iv((G=me.find(z=>z.id===nt))==null?void 0:G.cost_per_1m_tokens),"  ",Pu((_e=me.find(z=>z.id===nt))==null?void 0:_e.provider)]})}):i.jsx(Kt,{placeholder:"Select a fallback model"})}),i.jsx(Xt,{className:"bg-background border z-50",children:me.map(z=>i.jsx(st,{value:z.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("span",{className:"font-semibold leading-tight",children:[(z==null?void 0:z.display_name)||"Custom","  ",iv(z==null?void 0:z.cost_per_1m_tokens)]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:(z==null?void 0:z.description)||"No description available"}),i.jsxs("span",{className:"text-[11px] text-muted-foreground font-mono",children:[z==null?void 0:z.model_name,"  ",Pu(z==null?void 0:z.provider)]})]})},z.id))})]})]})]})}),i.jsxs(We,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("behavior"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"AI Agent Behavior"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Konfigurasi kepribadian dan perilaku agen AI untuk menentukan cara berinteraksi dengan pelanggan"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure AI personality and behavior"})]}),i.jsx(Ta,{className:`w-5 h-5 transition-transform ${c.behavior?"rotate-180":""}`})]}),c.behavior&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx(Fr,{className:"min-h-[120px]",value:W,onChange:z=>Q(z.target.value),disabled:!d,placeholder:m?"Define your AI's personality, behavior, and capabilities here...":"Enter system prompt..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[W.length,"/15000"]})]})]}),i.jsxs(We,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("welcome"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Welcome Message"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Pesan selamat datang yang dikirim otomatis kepada pelanggan saat memulai percakapan"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"First message sent to users"})]}),i.jsx(Ta,{className:`w-5 h-5 transition-transform ${c.welcome?"rotate-180":""}`})]}),c.welcome&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx(Fr,{className:"min-h-[80px]",value:X,onChange:z=>Z(z.target.value),disabled:!d,placeholder:m?"This is the first message your AI will send to customers...":"Enter welcome message..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[X.length,"/5000"]}),i.jsxs("div",{className:"pt-4 border-t space-y-4",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"space-y-0.5",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Auto Follow-up Message"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Kirim pesan otomatis kedua jika tidak ada aktivitas lebih lanjut dari kedua pihak setelah waktu tertentu."})})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically nudge users after inactivity (configure separately for Unassigned and Assigned threads)"})]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium text-primary",children:"Follow-up Template"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:'Contoh: "Halo, apakah ada yang bisa saya bantu lagi? Jika tidak ada, tiket ini akan saya tutup."'})})]})]}),i.jsx(Fr,{className:"min-h-[80px]",value:re,onChange:z=>he(z.target.value),placeholder:"Enter follow-up message (shared for both Unassigned and Assigned)...",disabled:!d}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[re.length,"/5000"]})]}),i.jsxs("div",{className:"border rounded-lg p-4 space-y-4 bg-orange-50/30 dark:bg-orange-950/10",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Unassigned Threads"}),i.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-orange-100 dark:bg-orange-900/50 text-orange-700 dark:text-orange-300",children:"AI Handling"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Trigger follow-up when AI is handling the conversation"})]}),i.jsx(Es,{checked:Se,onCheckedChange:we,disabled:!d})]}),Se&&i.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium text-primary",children:"Inactivity Timeout (seconds)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Waktu dalam detik sebelum pesan tindak lanjut dikirim untuk percakapan Unassigned."})})]})]}),i.jsx(ot,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 120",value:Te,onChange:z=>je(Ie(z.target.value)),disabled:!d,className:"max-w-[200px]"})]})]}),i.jsxs("div",{className:"border rounded-lg p-4 space-y-4 bg-blue-50/30 dark:bg-blue-950/10",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Assigned Threads"}),i.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300",children:"Agent Handling"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Trigger follow-up when a human agent is handling the conversation"})]}),i.jsx(Es,{checked:Ee,onCheckedChange:Ue,disabled:!d})]}),Ee&&i.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-1 duration-200",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium text-primary",children:"Inactivity Timeout (seconds)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Waktu dalam detik sebelum pesan tindak lanjut dikirim untuk percakapan Assigned."})})]})]}),i.jsx(ot,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 300",value:H,onChange:z=>q(Ie(z.target.value)),disabled:!d,className:"max-w-[200px]"})]})]})]})]})]}),i.jsxs(We,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("transfer"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Agent Transfer Conditions"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Kondisi yang menentukan kapan percakapan dialihkan dari agen AI ke agen manusia"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"When to transfer to human agents"})]}),i.jsx(Ta,{className:`w-5 h-5 transition-transform ${c.transfer?"rotate-180":""}`})]}),c.transfer&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx(Fr,{className:"min-h-[80px]",value:te,onChange:z=>J(z.target.value),disabled:!d,placeholder:m?"Define when your AI should transfer the conversation to a human agent...":"Enter transfer conditions..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[te.length,"/750"]})]})]}),i.jsx(We,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Stop AI after Handoff"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Menghentikan agen AI mengirim pesan setelah percakapan dialihkan ke agen manusia"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Stop AI from sending messages after handoff"})]}),i.jsx(Es,{checked:ie,onCheckedChange:ge,disabled:!d})]})}),i.jsx(We,{className:"p-6",children:i.jsxs(tD,{defaultOpen:!1,children:[i.jsxs(nD,{className:"flex w-full items-center justify-between py-1 font-medium [&[data-state=open]>svg]:rotate-180",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Additional Settings"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Pengaturan tambahan untuk konfigurasi lanjutan agen AI seperti batas riwayat, konteks, dan resolusi otomatis"})})]})]}),i.jsx(Ta,{className:"w-5 h-5 transition-transform"})]}),i.jsx(rD,{className:"mt-4 data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Enable auto-resolve"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Mengaktifkan resolusi otomatis percakapan setelah waktu tertentu tanpa respons pelanggan"})})]})]}),i.jsx("div",{className:"mt-2",children:i.jsx(Es,{checked:ut,onCheckedChange:ee,disabled:!d})})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Auto-resolve timeout (minutes)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Waktu dalam menit sebelum percakapan secara otomatis diselesaikan (0 = nonaktif)"})})]})]}),i.jsx(ot,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 30",value:ft,onChange:z=>Je(z.target.value),disabled:!ut||!d,className:`mt-1 ${!ut||!d?"opacity-60 cursor-not-allowed bg-muted/50":""}`}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:ut?"Set 0 to disable auto-resolve.":"Enable Auto-resolve to edit this value."})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Conversation History (messages)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Batas maksimal jumlah pesan riwayat percakapan yang dapat diingat AI"})})]})]}),i.jsx(ot,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:`Max ${Fe}`,value:qe,onChange:z=>it(z.target.value),disabled:!d,className:"mt-1"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:`Supports up to ${Fe} messages.`})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creativity Preset"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Preset kreativitas AI: Conservative (akurat), Balanced (seimbang), Creative (kreatif)"})})]})]}),i.jsxs("select",{value:oe,onChange:z=>Xe(z.target.value),disabled:!d,className:"w-full p-2 border rounded-lg mt-1",children:[i.jsx("option",{value:"Conservative",children:"Conservative"}),i.jsx("option",{value:"Balanced",children:"Balanced"}),i.jsx("option",{value:"Creative",children:"Creative"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"AI Message Cap"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Batas maksimal jumlah pesan yang dapat dikirim AI dalam satu percakapan"})})]})]}),i.jsx(ot,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 1000",value:bt,onChange:z=>Pt(z.target.value),disabled:!d,className:"mt-1"})]})]})})]})}),d&&i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{className:"w-full",onClick:qn,disabled:L,children:L?i.jsxs(i.Fragment,{children:[i.jsx(Ht,{className:"w-4 h-4 mr-2 animate-spin"}),m?"Creating...":"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ho,{className:"w-4 h-4 mr-2"}),m?"Create AI Agent":"Save AI Settings"]})})}),i.jsx(ye,{children:i.jsx("p",{children:m?"Buat agen AI baru dengan pengaturan ini":"Simpan semua pengaturan saat ini"})})]})]}),i.jsx("div",{className:"xl:col-span-2",children:i.jsx(qFe,{welcomeMessage:X,systemPrompt:W,modelDisplay:(le==null?void 0:le.display_name)||(le==null?void 0:le.model_name)||"Not selected",profile:S,profileId:n,modelName:(le==null?void 0:le.model_name)||"",temperature:j9(oe),transfer_conditions:te})})]})}),i.jsx(ir,{value:"knowledge",className:"space-y-6",children:i.jsx(We,{className:"p-6",children:i.jsxs(Uc,{value:o,onValueChange:l,className:"w-full",children:[i.jsxs(Tl,{className:"grid w-full grid-cols-3 mb-6",children:[i.jsxs(wr,{value:"text",className:"gap-2",children:[i.jsx(RV,{className:"w-4 h-4"}),"Text"]}),i.jsxs(wr,{value:"file",className:"gap-2",children:[i.jsx(vw,{className:"w-4 h-4"}),"File"]}),i.jsxs(wr,{value:"qa",className:"gap-2",children:[i.jsx(He,{className:"w-4 h-4"}),"Q&A"]})]}),i.jsxs(ir,{value:"text",className:"space-y-4",children:[i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Knowledge Text Content"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1 mb-2",children:"Add custom knowledge text that your AI agent can reference when responding to customers."}),i.jsx(Fr,{className:"min-h-[300px] font-mono text-sm",value:Me,onChange:z=>et(z.target.value),placeholder:"Enter your knowledge content here...",disabled:!d})]})}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs(ne,{onClick:Cr,disabled:L,size:"sm",className:"gap-2",children:[i.jsx($T,{className:"w-4 h-4"}),"Save Text"]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[Me.length," Characters"]})]})]}),i.jsxs(ir,{value:"website",className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Provide Link"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Provide a link to the page you want the AI to learn from."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ne,{variant:"default",size:"sm",className:"bg-muted text-foreground hover:bg-muted/80",children:"Batch Link"}),i.jsx(ne,{variant:"outline",size:"sm",children:"Single Link"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Web Link Collector"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ot,{placeholder:"Link URL",className:"flex-1"}),i.jsx(ne,{className:"bg-blue-600 hover:bg-blue-700",children:"Collect Link"})]}),i.jsxs("div",{className:"flex items-start gap-2 text-sm text-blue-600",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-600 flex items-center justify-center mt-0.5",children:i.jsx("span",{className:"text-white text-xs",children:"!"})}),i.jsxs("p",{children:["Start with URL and this tool will gather up to ",i.jsx("strong",{children:"30 unique"})," links from the site, excluding any files"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Trained Link"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"select-all",className:"rounded"}),i.jsx("label",{htmlFor:"select-all",className:"text-sm text-blue-600 cursor-pointer",children:"Select"})]}),i.jsx(ot,{placeholder:"Search Links",className:"flex-1"})]})]})]}),i.jsxs(ir,{value:"file",className:"space-y-6",children:[i.jsxs("div",{onDrop:b&&d?qr:void 0,onDragOver:b&&d?wa:void 0,className:`border border-dashed rounded-lg p-6 text-center ${b&&d?"bg-muted/30":"bg-muted/50 opacity-70 cursor-not-allowed"}`,children:[i.jsx("input",{ref:yn,type:"file",hidden:!0,onChange:rr,disabled:!b||!d}),i.jsx(vw,{className:"w-10 h-10 mx-auto mb-3 text-muted-foreground"}),b&&d?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Drag & drop a document here, or"}),i.jsx(ne,{size:"sm",onClick:()=>{var z;return(z=yn.current)==null?void 0:z.click()},disabled:!d,children:"Browse Files"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Supported: PDF"})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:d?"You don't have permission to upload files.":"Enter edit mode to manage files."}),d&&!b&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requires permission: ai_agent_files.create"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-sm font-medium",children:["Uploaded Files (",Ot.length,")"]}),Ot.length>0&&d&&i.jsx(ne,{variant:"ghost",size:"sm",onClick:Mo,className:"text-red-600 hover:text-red-700",disabled:!d,children:"Clear All"})]}),jn?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading files..."}):Ot.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No files uploaded yet."}):i.jsx("div",{className:"border rounded-md divide-y",children:Ot.map(z=>i.jsxs("div",{className:"flex items-center justify-between p-3",children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx(Bd,{checked:z.isEnabled??!0,onCheckedChange:()=>Nr(z.id,z.isEnabled??!0),disabled:!d}),i.jsx("div",{className:"w-8 h-8 rounded bg-muted flex items-center justify-center",children:i.jsx(vw,{className:"w-4 h-4"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"truncate text-sm font-medium",children:z.name}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[(z.size/1024).toFixed(1)," KB  ",new Date(z.uploadedAt).toLocaleString()]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${z.status==="ready"?"bg-green-100 text-green-700":z.status==="uploading"?"bg-blue-100 text-blue-700":z.status==="processing"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:z.status==="uploading"?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Ht,{className:"w-3 h-3 animate-spin"}),"uploading"]}):z.status}),i.jsx(ne,{size:"sm",variant:"outline",onClick:()=>ar(z),disabled:z.status==="uploading",children:"Download"}),i.jsx(ne,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>ci(z.id),disabled:z.status==="uploading"||!d,children:i.jsx(fa,{className:"w-4 h-4"})})]})]},z.id))})]})]}),i.jsxs(ir,{value:"qa",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Q&A Knowledge"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Add questionanswer pairs the AI can reference."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ne,{size:"sm",variant:"outline",onClick:_n,disabled:L||!d,className:"gap-2",children:[i.jsx($T,{className:"w-4 h-4"}),"Save Q&A"]}),i.jsxs(ne,{size:"sm",onClick:()=>{l("qa"),fu()},className:"gap-2",disabled:!d,children:[i.jsx(Ms,{className:"w-4 h-4"}),"Add Pair"]})]})]}),lr.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No Q&A pairs. Click Add Pair to create one."}):i.jsx("div",{className:"space-y-3",children:lr.map(z=>i.jsx(We,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx(ot,{placeholder:"Question",value:z.question,onChange:fe=>Mi(z.id,"question",fe.target.value),disabled:!d}),i.jsx(Fr,{placeholder:"Answer",className:"min-h-[80px]",value:z.answer,onChange:fe=>Mi(z.id,"answer",fe.target.value),disabled:!d})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[qs(z)&&i.jsx(ne,{variant:"outline",size:"sm",onClick:async fe=>{fe.preventDefault(),fe.stopPropagation(),l("qa");try{await F({name:e,qna:lr.filter(pe=>{var Le,Ke;return((Le=pe.question)==null?void 0:Le.trim())||((Ke=pe.answer)==null?void 0:Ke.trim())}).map(({question:pe,answer:Le})=>({q:pe.trim(),a:Le.trim()}))}),ja(JSON.parse(JSON.stringify(lr))),Be.success("Q&A saved")}catch(pe){Be.error((pe==null?void 0:pe.message)||"Failed to save Q&A")}},children:"Save"}),i.jsx(ne,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>Hr(z.id),disabled:!d,children:i.jsx(fa,{className:"w-4 h-4"})})]})]})},z.id))})]}),i.jsx(ir,{value:"product",children:i.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[i.jsx(DV,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Product knowledge and catalog integration"})]})})]})})}),i.jsx(ir,{value:"integrations",children:i.jsxs(We,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Integrations"}),i.jsx("p",{className:"text-muted-foreground",children:"Set up integrations with external services."})]})}),i.jsx(ir,{value:"followups",className:"space-y-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Followups"}),i.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Tambahkan pesan Followup yang akan dikirim kepada ",i.jsx("span",{className:"text-blue-600",children:"pelanggan setelah jeda waktu tertentu"}),"."]}),i.jsx("p",{children:"Isi dengan prompt. Prompt adalah arahan yang AI akan pakai untuk menulis Followup sesuai dengan history chat dan knowledge anda."}),i.jsx("p",{children:"Anda juga bisa menulis kondisi Handoff to Agent anda di Prompt"}),i.jsx("p",{className:"text-blue-600",children:"Anda bisa mengirim gambar di followup. Klik disini untuk Upload gambar."})]})]}),i.jsx("div",{className:"space-y-4",children:Ha.map((z,fe)=>i.jsx(We,{className:"p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:"Prompt:"}),i.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>vt(z.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",disabled:!d,children:i.jsx(fa,{className:"w-4 h-4"})})]}),i.jsx(Fr,{value:z.prompt,onChange:pe=>wt(z.id,"prompt",pe.target.value),className:"min-h-[80px]",placeholder:"Enter followup message...",disabled:!d}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Delay (min):"}),i.jsx(ot,{type:"number",value:z.delay,onChange:pe=>wt(z.id,"delay",parseInt(pe.target.value)||1),className:"w-20",min:"1",disabled:!d})]})}),i.jsxs(tD,{children:[i.jsxs(nD,{onClick:()=>Rt(z.id),className:"flex items-center gap-2 text-sm font-medium hover:text-primary",children:[i.jsx(Ta,{className:`w-4 h-4 transition-transform ${z.expanded?"rotate-180":""}`}),"Options"]}),i.jsx(rD,{className:"pt-4 data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden",children:i.jsx("div",{className:"text-sm text-muted-foreground",children:"Additional options for this followup message can be configured here."})})]})]})},z.id))}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs(ne,{onClick:Ae,className:"gap-2",disabled:!d,children:[i.jsx(Ms,{className:"w-4 h-4"}),"Add Followup"]})}),i.jsx(ye,{children:i.jsx("p",{children:"Tambah pesan tindak lanjut baru"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{className:"bg-green-600 hover:bg-green-700",disabled:!d,children:"Save Followups"})}),i.jsx(ye,{children:i.jsx("p",{children:"Simpan semua pesan tindak lanjut"})})]})]})]})}),i.jsx(ir,{value:"evaluation",children:i.jsxs(We,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Evaluation"}),i.jsx("p",{className:"text-muted-foreground",children:"Review AI agent performance metrics."})]})})]})]})},sv=e=>e==null?"Pricing on request":`${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e>=1?2:3}).format(e)} / 1M`,$u=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown",ov="00000000-0000-0000-0000-000000000001",KFe=({agent:e,onSettings:t,onDelete:n})=>i.jsxs(We,{className:"p-6 text-center space-y-4 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center text-xl font-semibold text-muted-foreground",children:e.initials}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:e.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.creator}),e.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),(e.modelName||e.provider)&&i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.modelName?`Model: ${e.modelName}`:null,e.modelName&&e.provider?"  ":"",e.provider?`Provider: ${$u(e.provider)}`:null]}),i.jsxs("div",{className:"space-y-1 mt-1",children:[i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Super Agent: ",e.superAgentName??"Unassigned"]})]})]})]}),i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(Zt,{permission:"ai_profiles.update",children:i.jsxs(ne,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>t(e),children:[i.jsx(ho,{className:"w-4 h-4"}),"Settings"]})})}),i.jsx(ye,{children:i.jsx("p",{children:"Konfigurasi pengaturan agen AI"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(Zt,{permission:"ai_profiles.delete",children:i.jsxs(ne,{variant:"outline",size:"sm",className:"gap-2 text-destructive hover:text-destructive",onClick:()=>n(e.id),children:[i.jsx(fa,{className:"w-4 h-4"}),"Delete"]})})}),i.jsx(ye,{children:i.jsx("p",{children:"Hapus agen AI ini"})})]})]})]}),VFe=({onClick:e})=>i.jsx(We,{className:"p-6 text-center space-y-4 hover:shadow-md transition-shadow bg-blue-600 text-white cursor-pointer group",onClick:e,children:i.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center group-hover:bg-white/30 transition-colors",children:i.jsx(Ms,{className:"w-8 h-8"})}),i.jsx("h3",{className:"font-semibold text-lg",children:"Create New"})]})}),GFe=()=>{var Ue,H;const[e,t]=p.useState(null),[n,r]=p.useState([]),[a,s]=p.useState(!0),[o,l]=p.useState(!1),[c,u]=p.useState(null),[d,h]=p.useState(!1),[f,m]=p.useState(""),[g,v]=p.useState("customer-service"),[x,y]=p.useState([]),[w,b]=p.useState([]),[_,k]=p.useState(!1),[j,N]=p.useState(null),[O,I]=p.useState(""),[P,S]=p.useState(""),[D,L]=p.useState(""),[U,F]=p.useState(""),[M,T]=p.useState("all"),[E,$]=p.useState("all"),[A,B]=p.useState("newest"),[R,C]=p.useState(0),[W,Q]=p.useState(0),[X,Z]=p.useState(null),[te,J]=p.useState(null),[ie,ge]=p.useState(!1),ae=p.useRef(!0);aa();const{mode:Re,superAgentId:me,loading:K,error:de}=$z(),{agents:$e}=ql(),[nt,Ye]=p.useState(!1),[ft,Ze]=p.useState(null),ut=Re==="super"&&!!me,ee=q=>q.replace(/[%_\\]/g,re=>`\\${re}`).replace(/'/g,"''"),qe=p.useMemo(()=>{const q=new Map;return[...x,...w].forEach(re=>{q.set(re.id,re)}),q},[x,w]),{deleteProfile:dt}=w9(),se=(q,re,he)=>({id:q.id,name:q.name,initials:q.name.split(" ").map(Me=>Me.charAt(0)).join("").toUpperCase().slice(0,2),creator:"Admin",description:q.description||void 0,created_at:q.created_at,model:(q==null?void 0:q.model_id)??null,modelName:(re==null?void 0:re.display_name)??(re==null?void 0:re.model_name)??null,provider:(re==null?void 0:re.provider)??null,superAgentId:(q==null?void 0:q.super_agent_id)??null,superAgentName:he??null}),ve=p.useCallback(async()=>{if(!K){if(Re==="none"){Q(0),Z(null);return}try{let q=ce.from("ai_profiles").select("id",{count:"exact",head:!0}).eq("org_id",ov);if(Re==="super"||Re==="agent"){if(!me){Q(0),Z(null);return}q=q.eq("super_agent_id",me)}const{count:re}=await q;if(Q(re||0),(re||0)>0){let he=ce.from("ai_profiles").select("created_at").order("created_at",{ascending:!1}).limit(1).eq("org_id",ov);(Re==="super"||Re==="agent")&&me&&(he=he.eq("super_agent_id",me));const{data:Me}=await he.maybeSingle();Z(Me?new Date(Me.created_at):null)}else Z(null)}catch(q){console.error("Error fetching AI agent stats:",q)}}},[Re,me,K]),oe=p.useCallback(async()=>{if(K){s(!0);return}try{if(ae.current?s(!0):l(!0),u(null),Re==="none"){ae.current=!1,r([]),C(0),s(!1),l(!1),u(de??"Tidak ada agen AI yang tersedia untuk akun ini.");return}let q=ce.from("ai_profiles").select("*, ai_models:ai_models!ai_profiles_model_id_fkey(id, display_name, model_name, provider)",{count:"exact"}).eq("org_id",ov);if(Re==="super"||Re==="agent"){if(!me){ae.current=!1,r([]),C(0),s(!1),l(!1),u(de??"Tidak ada agen AI yang tersedia untuk akun ini.");return}q=q.eq("super_agent_id",me)}if(U){const le=ee(U);q=q.or(`name.ilike.%${le}%,description.ilike.%${le}%`)}E!=="all"&&(q=q.eq("model",E)),M!=="all"&&(M==="unknown"?q=q.or("model.is.null,ai_models.provider.is.null"):q=q.eq("ai_models.provider",M)),A==="az"?q=q.order("name",{ascending:!0,nullsFirst:!1}):A==="oldest"?q=q.order("created_at",{ascending:!0}):q=q.order("created_at",{ascending:!1});const{data:re,error:he,count:Me}=await q;if(he)throw he;const et=Array.from(new Set(re.map(le=>le==null?void 0:le.super_agent_id).filter(le=>!!le)));let Ie=new Map;if(et.length){const{data:le}=await ce.from("v_human_agents").select("user_id, agent_name, email").in("user_id",et);le==null||le.forEach(Fe=>{const Je=Fe.agent_name||Fe.email||String(Fe.user_id).slice(0,8);Ie.set(Fe.user_id,Je)})}C(Me||0);const Y=(re||[]).map(le=>se(le,le.ai_models||(le.model?qe.get(le.model):void 0),Ie.get(le.super_agent_id??"")??null));r(Y)}catch(q){console.error("Error fetching AI agents:",q),u("Failed to load AI agents"),Be.error("Failed to load AI agents"),r([]),C(0)}finally{ae.current?(ae.current=!1,s(!1)):l(!1)}},[U,E,M,A,qe,Re,me,K,de]);p.useEffect(()=>{ut&&me&&(Ze(me),Ye(!1))},[ut,me]);const Xe=p.useMemo(()=>{const q=new Set;return[...x,...w].forEach(re=>{re.provider&&q.add(re.provider)}),q.add("unknown"),Array.from(q).sort((re,he)=>re.localeCompare(he))},[x,w]),ke=p.useMemo(()=>{const q=new Map;return[...x,...w].forEach(re=>{q.set(re.id,re.display_name||re.model_name||"Unnamed")}),Array.from(q.entries()).sort((re,he)=>re[1].localeCompare(he[1]))},[x,w]);p.useEffect(()=>{const q=setTimeout(()=>F(D.trim()),250);return()=>clearTimeout(q)},[D]),p.useEffect(()=>{oe()},[oe]),p.useEffect(()=>{ve()},[ve]),p.useEffect(()=>{M!=="all"&&!Xe.includes(M)&&T("all")},[M,Xe]),p.useEffect(()=>{E!=="all"&&!ke.some(([q])=>q===E)&&$("all")},[E,ke]);const rt=q=>{const re=n.find(he=>he.id===q);re&&J(re)},bt=async()=>{if(te)try{ge(!0),await dt(te.id),await Promise.all([oe(),ve()]),Be.success(`"${te.name}" has been deleted successfully`),J(null)}catch(q){console.error("Error deleting agent:",q),u("Failed to delete AI agent"),Be.error("Failed to delete AI agent")}finally{ge(!1)}},ue=()=>{h(!0)},Se=async()=>{var q,re;if(!f.trim()){Be.error("Please enter an AI agent name");return}if(!O){Be.error("Please select an AI model");return}if(!ft){Be.error("Please choose a Super Agent");return}try{const{data:he,error:Me}=await ce.from("ai_profiles").insert([{org_id:ov,name:f.trim(),description:null,system_prompt:"",welcome_message:"",transfer_conditions:"",stop_ai_after_handoff:!0,model_id:O,super_agent_id:ft}]).select("id, name, created_at, model_id, super_agent_id").single();if(Me)throw Me;if(!he)throw new Error("No data returned from insert");const Ie={id:he==null?void 0:he.id,name:he.name||f.trim(),initials:((he==null?void 0:he.name)||f.trim()).split(" ").map(Y=>Y.charAt(0)).join("").toUpperCase().slice(0,2),creator:"Admin",created_at:(he==null?void 0:he.created_at)||new Date().toISOString(),model:(he==null?void 0:he.model_id)||O,modelName:((q=x.find(Y=>Y.id===((he==null?void 0:he.model_id)||O)))==null?void 0:q.display_name)||void 0,provider:((re=x.find(Y=>Y.id===((he==null?void 0:he.model_id)||O)))==null?void 0:re.provider)||null,superAgentId:(he==null?void 0:he.super_agent_id)||ft,superAgentName:void 0};t(Ie),h(!1),m(""),v("customer-service"),Ze(null),Be.success("AI agent created successfully"),oe(),ve()}catch(he){console.error("Create AI Agent failed:",he),Be.error((he==null?void 0:he.message)||"Failed to create AI agent")}},we=p.useRef(!1),Te=p.useCallback(async()=>{try{k(!0),N(null);const{data:q,error:re}=await ce.from("ai_models").select("id, display_name, model_name, provider, cost_per_1m_tokens, is_active").eq("is_active",!0).order("display_name",{ascending:!0});if(re)throw re;const he=q||[],Me=he.filter(Ie=>(Ie.display_name||"").toLowerCase()!=="fallback"),et=he.filter(Ie=>(Ie.display_name||"").toLowerCase()==="fallback");y(Me),b(et),we.current||(Me.length>0&&I(Ie=>Ie||Me[0].id),et.length>0&&S(Ie=>Ie||et[0].id),we.current=!0)}catch(q){console.error("Error loading AI models:",q),N("Failed to load AI models"),Be.error("Failed to load AI models")}finally{k(!1)}},[]);if(p.useEffect(()=>{Te()},[Te]),p.useEffect(()=>{oe()},[]),e)return i.jsx(HFe,{agentName:e.name,onBack:()=>{t(null),oe(),ve()},profileId:e.id==="new"?void 0:e.id,initialModelId:e.model||void 0});if(a)return i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Ht,{className:"w-8 h-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading AI agents..."})]});const je=n.length,Ee=Xe.length?Xe:[];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"AI Agents"}),i.jsxs("div",{className:"text-muted-foreground max-w-2xl mx-auto",children:[i.jsx("p",{children:"Ini adalah halaman di mana Anda dapat mengunjungi AI yang telah Anda buat sebelumnya."}),i.jsx("p",{children:"Jangan ragu untuk membuat perubahan dan membuat chatbot sebanyak yang Anda inginkan kapan saja!"})]})]}),c&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",c]}),i.jsx(ne,{variant:"outline",size:"sm",className:"mt-2",onClick:oe,children:"Retry"})]}),i.jsxs("div",{className:"grid gap-3 rounded-lg border bg-card p-4 md:flex md:items-center md:justify-between",children:[i.jsxs("div",{className:"relative w-full md:w-72",children:[i.jsx(ns,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(ot,{value:D,onChange:q=>L(q.target.value),placeholder:"Search AI agents...",className:"pl-9"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs(Qt,{value:M,onValueChange:T,children:[i.jsx(Yt,{className:"w-[160px] bg-background border",children:i.jsx(Kt,{placeholder:"Provider"})}),i.jsxs(Xt,{className:"bg-background border z-50",children:[i.jsx(st,{value:"all",children:"All providers"}),Ee.map(q=>i.jsx(st,{value:q,children:q==="unknown"?"Unknown":$u(q)},q))]})]}),i.jsxs(Qt,{value:E,onValueChange:$,children:[i.jsx(Yt,{className:"w-[160px] bg-background border",children:i.jsx(Kt,{placeholder:"AI model"})}),i.jsxs(Xt,{className:"bg-background border z-50",children:[i.jsx(st,{value:"all",children:"All models"}),ke.map(([q,re])=>i.jsx(st,{value:q,children:re},q))]})]}),i.jsxs(Qt,{value:A,onValueChange:q=>B(q),children:[i.jsx(Yt,{className:"w-[150px] bg-background border",children:i.jsx(Kt,{placeholder:"Sort"})}),i.jsxs(Xt,{className:"bg-background border z-50",children:[i.jsx(st,{value:"newest",children:"Newest first"}),i.jsx(st,{value:"oldest",children:"Oldest first"}),i.jsx(st,{value:"az",children:"Name AZ"})]})]})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",je," of ",W," agents"]}),o&&!a&&i.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Updating list"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(We,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-primary",children:W}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total AI Agents"})]}),i.jsxs(We,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:je}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Matching Filters"})]}),i.jsxs(We,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:X?X.toLocaleDateString():"N/A"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Last Created"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.map(q=>i.jsx(KFe,{agent:q,onSettings:t,onDelete:rt},q.id)),i.jsx(Zt,{permission:"ai_profiles.create",children:i.jsx(VFe,{onClick:ue})})]}),je===0&&!a&&W===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center",children:i.jsx(Ms,{className:"w-12 h-12 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No AI Agents Yet"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first AI agent to get started with automated customer support."}),i.jsxs(ne,{onClick:ue,children:[i.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Create Your First AI Agent"]})]}),je===0&&!a&&W>0&&i.jsx("div",{className:"rounded-lg border border-dashed p-6 text-center text-sm text-muted-foreground",children:"No AI agents match your current filters. Try adjusting the search or filter settings above."}),i.jsx(Zt,{permission:"ai_profiles.create",children:i.jsx(gn,{open:d,onOpenChange:h,children:i.jsxs(ln,{className:"sm:max-w-[425px]",children:[i.jsx(cn,{children:i.jsx(un,{className:"text-xl font-semibold",children:"Create New AI Agent"})}),i.jsxs("div",{className:"space-y-6 pt-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Name"}),i.jsx(ot,{placeholder:"Enter AI name",value:f,onChange:q=>m(q.target.value),className:"w-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Super Agent *"}),ut?i.jsx(ot,{readOnly:!0,disabled:!0,value:((Ue=$e.find(q=>q.user_id===me))==null?void 0:Ue.display_name)||((H=$e.find(q=>q.user_id===me))==null?void 0:H.email)||me||"Current super agent",className:"w-full"}):i.jsxs(Ns,{open:nt,onOpenChange:Ye,children:[i.jsx(Cs,{asChild:!0,children:i.jsx(ne,{variant:"outline",role:"combobox",className:"w-full justify-between",children:(()=>{const q=$e.find(re=>re.primaryRole==="super_agent"&&re.user_id===ft);return(q==null?void 0:q.display_name)||(q==null?void 0:q.email)||ft||"Choose a super agent"})()})}),i.jsx(Ji,{className:"w-[360px] p-0",children:i.jsxs(km,{children:[i.jsx(Sm,{placeholder:"Search super agents..."}),i.jsx(Nm,{children:"No super agents found."}),i.jsx(Cm,{children:$e.filter(q=>q.primaryRole==="super_agent").map(q=>i.jsx(Am,{onSelect:()=>{Ze(q.user_id),Ye(!1)},children:i.jsx("span",{className:"ml-2",children:q.display_name||q.email||q.user_id.slice(0,8)})},q.user_id))})]})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Super agents can only create AI Agents for themselves."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Template"}),i.jsxs(Qt,{value:g,onValueChange:v,children:[i.jsx(Yt,{className:"w-full",children:i.jsx(Kt,{placeholder:"Select a template"})}),i.jsx(Xt,{})]}),g==="customer-service"&&i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"and sales inquiries for your business."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"AI Model"}),i.jsxs(Qt,{value:O,onValueChange:I,disabled:_||x.length===0,children:[i.jsx(Yt,{className:"w-full py-3",children:O?(()=>{const q=x.find(re=>re.id===O);return q?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[q.display_name||"Custom","  ",sv(q.cost_per_1m_tokens),"  ",$u(q.provider)]})}):i.jsx(Kt,{placeholder:_?"Loading models...":"Select an AI model"})})():i.jsx(Kt,{placeholder:_?"Loading models...":"Select an AI model"})}),i.jsx(Xt,{side:"bottom",align:"start",sideOffset:4,children:x.map(q=>i.jsx(st,{value:q.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm font-medium",children:[i.jsx("span",{children:q.display_name||"Custom"}),i.jsx("span",{className:"text-muted-foreground",children:sv(q.cost_per_1m_tokens)})]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:q.description||"No description available"}),i.jsxs("span",{className:"text-[11px] font-mono text-muted-foreground",children:[q.model_name,"  ",$u(q.provider)]})]})},q.id))})]}),j&&i.jsx("p",{className:"text-xs text-destructive",children:j})]}),w.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Fallback Model"}),i.jsxs(Qt,{value:P,onValueChange:S,disabled:_||w.length===0,children:[i.jsx(Yt,{className:"w-full py-3",children:P?(()=>{const q=w.find(re=>re.id===P);return q?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[q.display_name||"Custom","  ",sv(q.cost_per_1m_tokens),"  ",$u(q.provider)]})}):i.jsx(Kt,{placeholder:_?"Loading models...":"Select a fallback model"})})():i.jsx(Kt,{placeholder:_?"Loading models...":"Select a fallback model"})}),i.jsx(Xt,{side:"bottom",align:"start",sideOffset:4,children:w.map(q=>i.jsx(st,{value:q.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm font-medium",children:[i.jsx("span",{children:q.display_name||"Custom"}),i.jsx("span",{className:"text-muted-foreground",children:sv(q.cost_per_1m_tokens)})]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:q.description||"No description available"}),i.jsxs("span",{className:"text-[11px] font-mono text-muted-foreground",children:[q.model_name,"  ",$u(q.provider)]})]})},q.id))})]})]}),i.jsx(ne,{onClick:Se,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:!f.trim()||!O||!ft,children:"Create AI Agent"})]})]})})})]}),i.jsx(Rb,{open:!!te,onOpenChange:q=>{!q&&!ie&&J(null)},children:i.jsxs(Up,{children:[i.jsxs(Bp,{children:[i.jsx(Wp,{children:"Delete AI Agent?"}),i.jsx(qp,{children:te?`Are you sure you want to delete "${te.name}"? This action cannot be undone.`:"Are you sure you want to delete this AI agent?"})]}),i.jsxs(zp,{children:[i.jsx(Kp,{disabled:ie,children:"Cancel"}),i.jsx(Hp,{onClick:bt,disabled:ie,className:"bg-destructive hover:bg-destructive/90 focus:ring-destructive/50",children:ie?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Ht,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})},_9=({className:e,...t})=>i.jsx("nav",{role:"navigation","aria-label":"pagination",className:Pe("mx-auto flex w-full justify-center",e),...t});_9.displayName="Pagination";const k9=p.forwardRef(({className:e,...t},n)=>i.jsx("ul",{ref:n,className:Pe("flex flex-row items-center gap-1",e),...t}));k9.displayName="PaginationContent";const Iv=p.forwardRef(({className:e,...t},n)=>i.jsx("li",{ref:n,className:Pe("",e),...t}));Iv.displayName="PaginationItem";const lE=({className:e,isActive:t,size:n="icon",...r})=>i.jsx("a",{"aria-current":t?"page":void 0,className:Pe(Rd({variant:t?"outline":"ghost",size:n}),e),...r});lE.displayName="PaginationLink";const S9=({className:e,...t})=>i.jsxs(lE,{"aria-label":"Go to previous page",size:"default",className:Pe("gap-1 pl-2.5",e),...t,children:[i.jsx(vN,{className:"h-4 w-4"}),i.jsx("span",{children:"Previous"})]});S9.displayName="PaginationPrevious";const N9=({className:e,...t})=>i.jsxs(lE,{"aria-label":"Go to next page",size:"default",className:Pe("gap-1 pr-2.5",e),...t,children:[i.jsx("span",{children:"Next"}),i.jsx(_p,{className:"h-4 w-4"})]});N9.displayName="PaginationNext";const YFe=e=>e.replace(/\s/g,"").toLowerCase(),aD=()=>{const[e,t]=p.useState(!1),[n,r]=p.useState(!1),[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState(!1),[d,h]=p.useState({enabled:!1,perDay:0,perMonth:0,twoFA:!1}),[f,m]=p.useState("7d"),[g,v]=p.useState("7d"),[x,y]=p.useState(null),[w,b]=p.useState(!1),[_,k]=p.useState(null),[j,N]=p.useState({}),[O,I]=p.useState(!1),[P,S]=p.useState(null),[D,L]=p.useState({name:"",email:"",role:"agent"}),[U,F]=p.useState(!1),[M,T]=p.useState(!1),[E,$]=p.useState(null),[A,B]=p.useState(!1),[R,C]=p.useState(!1),[W,Q]=p.useState(null),{toast:X}=nu(),Z=p.useRef(null),{hasPermission:te,hasRole:J}=Or();J(pn.MASTER_AGENT);const ie=J(pn.SUPER_AGENT),ge=[pn.MASTER_AGENT,pn.SUPER_AGENT],[ae,Re]=p.useState([]),[me,K]=p.useState([]),[de,$e]=p.useState(0),[nt,Ye]=p.useState(0),[ft,Ze]=p.useState(1),[ut,ee]=p.useState(1),[qe,dt]=p.useState(10),[se,ve]=p.useState(10),[oe,Xe]=p.useState(!1),[ke,rt]=p.useState(!1),[bt,ue]=p.useState("active"),[Se,we]=p.useState({}),[Te,je]=p.useState(null),[Ee,Ue]=p.useState(""),[H,q]=p.useState(""),[re,he]=p.useState("all"),[Me,et]=p.useState("all"),[Ie,Y]=p.useState("all"),le=J(pn.SUPER_AGENT)&&!J(pn.MASTER_AGENT);p.useEffect(()=>{const Ae=setTimeout(()=>q(Ee.trim()),300);return()=>clearTimeout(Ae)},[Ee]),p.useEffect(()=>{ie&&bt!=="active"&&ue("active")},[ie,bt]),p.useEffect(()=>{!J(pn.MASTER_AGENT)&&D.role==="super_agent"&&L({...D,role:"agent"})},[J,D.role]);const Fe=Ae=>Ae.replace(/[%_\\]/g,vt=>`\\${vt}`).replace(/'/g,"''"),Je=D.name.trim()&&D.email.trim()&&(D.role!=="agent"||E),{agents:it,loading:Pt,error:Ot,fetchAgents:Lt,createAgent:yn,updateAgentStatus:jn,updateAgentRole:nr,deleteAgent:Wn,setEnable2FAFlagForCreate:fn}=ql();p.useEffect(()=>{Ot&&Ot!==Z.current&&(X({title:"Error",description:Ot,variant:"destructive"}),Z.current=Ot),Ot||(Z.current=null)},[Ot,X]);const gt=Ae=>{if(!Ae)return null;const vt=String(Ae).toLowerCase();return vt.includes("master")?"master_agent":vt.includes("super")?"super_agent":vt.includes("agent")?"agent":null},Nr=async({invited:Ae,page:vt,pageSize:wt,search:Rt,role:jt,activeStatus:qn,pendingStatus:Cr})=>{try{Ae?rt(!0):Xe(!0);const _n=(vt-1)*wt,Kr=_n+wt-1;let Et=ce.from("v_human_agents").select("*",{count:"exact"});const Rn=Rt?Fe(Rt):"";if(Rn&&(Et=Et.or(`agent_name.ilike.%${Rn}%,email.ilike.%${Rn}%`)),jt&&jt!=="all"){const Le=jt==="master_agent"?"%master%":jt==="super_agent"?"%super%":"%agent%";Et=Et.ilike("role_name",Le)}const G=J(pn.MASTER_AGENT);if(J(pn.SUPER_AGENT)){if(!P){Ae?rt(!1):Xe(!1);return}try{let Le=ce.from("super_agent_members").select("agent_user_id").eq("super_agent_id",P);Te&&(Le=Le.eq("org_id",Te));const{data:Ke}=await Le,Ne=[P,...(Ke||[]).map(De=>String(De.agent_user_id)).filter(Boolean)];Ne.length>0?Et=Et.in("user_id",Ne):Et=Et.eq("user_id",P)}catch{Et=Et.eq("user_id",P)}}else if(!G){Ae?(K([]),Ye(0),rt(!1)):(Re([]),$e(0),Xe(!1));return}Ae?Cr==="expired"?Et=Et.eq("confirmation_status","expired"):Cr==="invited"?Et=Et.or("confirmation_status.is.null,confirmation_status.eq.invited,confirmation_status.eq.pending"):Et=Et.or("confirmation_status.is.null,confirmation_status.neq.accepted"):(Et=Et.eq("confirmation_status","accepted"),qn&&qn!=="all"&&(Et=Et.eq("is_active",qn==="active")));const{data:z,count:fe,error:pe}=await Et.order("agent_name",{ascending:!0}).range(_n,Kr);if(pe)throw pe;if(Ae)K(z||[]),Ye(fe||0);else{const Le=z||[];Re(Le),$e(fe||0);try{const Ke=Le.filter(Ne=>String((Ne==null?void 0:Ne.role_name)||"").toLowerCase()==="agent").map(Ne=>Ne.user_id);if(Ke.length>0){let Ne=ce.from("super_agent_members").select("agent_user_id, super_agent_id").in("agent_user_id",Ke);Te&&(Ne=Ne.eq("org_id",Te));const{data:De}=await Ne,St={};(De||[]).forEach(ze=>{ze!=null&&ze.agent_user_id&&(St[String(ze.agent_user_id)]=String(ze.super_agent_id||""))}),we(St)}else we({})}catch{we({})}}}catch(_n){X({title:"Error",description:(_n==null?void 0:_n.message)||"Failed to fetch agents",variant:"destructive"}),Ae?(K([]),Ye(0)):(Re([]),$e(0))}finally{Ae?rt(!1):Xe(!1)}};p.useEffect(()=>{Nr({invited:!1,page:ft,pageSize:qe,search:H,role:re,activeStatus:Me})},[ft,qe,H,re,Me]),p.useEffect(()=>{ft!==1&&Ze(1)},[H,re,Me]),p.useEffect(()=>{bt==="pending"&&Nr({invited:!0,page:ut,pageSize:se,search:H,role:re,pendingStatus:Ie})},[bt,ut,se,H,re,Ie]),p.useEffect(()=>{bt==="pending"&&ut!==1&&ee(1)},[H,re,Ie,bt]);const rr=(Ae,vt,wt,Rt,jt,qn,Cr,_n,Kr)=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"rounded-lg border bg-card",children:[i.jsxs("div",{className:`grid gap-4 p-4 border-b bg-muted/50 font-medium text-sm ${_n?"grid-cols-[240px,1fr,220px,120px,160px]":"grid-cols-[240px,1fr,220px,160px,120px,120px]"}`,children:[i.jsx("div",{children:"Agent Name"}),i.jsx("div",{children:"Email"}),i.jsx("div",{children:"Role"}),!_n&&i.jsx("div",{children:"Token Usage"}),i.jsx("div",{children:"Status"}),i.jsx("div",{children:"Action"})]}),i.jsx("div",{className:"divide-y",children:vt?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Ht,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Loading agents..."})]})}):Ae.length===0?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(bN,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),i.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["No ",_n?"Pending":"Active"," Agents"]}),i.jsx("p",{className:"text-muted-foreground",children:_n?"Invited users will appear here until they sign in.":"Create your first agent to get started."})]})}):!_n&&Kr?(()=>{const Et=De=>String(De||"").toLowerCase(),Rn=De=>Et(De.role_name).includes("master"),G=De=>Et(De.role_name).includes("super"),_e=De=>{const St=Et(De.role_name);return St==="agent"||St==="agent_only"},z=Ae.filter(Rn),fe=Ae.filter(G),pe=Ae.filter(_e),Le=Object.fromEntries(fe.map(De=>[String(De.user_id),De])),Ke={},Ne=[];for(const De of pe){const St=Kr[String(De.user_id)];St&&Le[St]?(Ke[St]=Ke[St]||[]).push(De):Ne.push(De)}return i.jsxs(i.Fragment,{children:[z.map(De=>{const St="master_agent",ze={user_id:String(De.user_id),email:De.email||"",display_name:De.agent_name||De.email||"Unknown",avatar_url:De.avatar_url||null,timezone:null,created_at:"",roles:[St],primaryRole:St,status:De.is_active?"Active":"Inactive",super_agent_id:null};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-blue-50/30 dark:bg-transparent",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Pa,{className:"h-8 w-8",children:i.jsx(Oa,{className:"text-xs bg-blue-100 text-blue-700",children:Mi(ze.display_name||"U")})}),i.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:ze.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:ze.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(At,{className:`text-xs ${Ha(ze.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Master Agent"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(dc,{children:[i.jsx(hc,{asChild:!0,children:i.jsxs(ne,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:ze.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${qs(ze.status)}`}),i.jsx("span",{className:"text-xs",children:ze.status}),ze.primaryRole!=="master_agent"&&i.jsx(Ta,{className:"h-3 w-3"})]})}),i.jsxs(el,{className:"bg-background border z-50",children:[i.jsx(la,{onClick:()=>Hr(ze.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(la,{onClick:()=>Hr(ze.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Zt,{permission:"users_profile.update_token_limit",roleBypass:ge,children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>ci(ze),title:"Edit limits",children:i.jsx(Aa,{className:"h-4 w-4"})})}),J(pn.MASTER_AGENT)&&i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>ja(ze),title:"View token usage",children:i.jsx(qh,{className:"h-4 w-4"})}),Ka(ze)&&i.jsx(Zt,{permission:"super_agents.delete",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Q(ze),B(!0)},children:i.jsx(fa,{className:"h-4 w-4"})})})]})]},`master-${De.user_id}`)}),fe.map(De=>{const St="super_agent",ze={user_id:String(De.user_id),email:De.email||"",display_name:De.agent_name||De.email||"Unknown",avatar_url:De.avatar_url||null,timezone:null,created_at:"",roles:[St],primaryRole:St,status:De.is_active?"Active":"Inactive",super_agent_id:null},Mt=Ke[String(De.user_id)]||[];return i.jsxs("div",{className:"",children:[i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-green-50/30 dark:bg-transparent",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Pa,{className:"h-8 w-8",children:i.jsx(Oa,{className:"text-xs bg-green-100 text-green-700",children:Mi(ze.display_name||"U")})}),i.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:ze.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:ze.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(At,{className:`text-xs ${Ha(ze.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Super Agent"})}),i.jsx("div",{className:"text-sm font-medium",children:O?"":(j[ze.user_id]??0).toLocaleString()}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(dc,{children:[i.jsx(hc,{asChild:!0,children:i.jsxs(ne,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:ze.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${qs(ze.status)}`}),i.jsx("span",{className:"text-xs",children:ze.status}),ze.primaryRole!=="master_agent"&&i.jsx(Ta,{className:"h-3 w-3"})]})}),i.jsxs(el,{className:"bg-background border z-50",children:[i.jsx(la,{onClick:()=>Hr(ze.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(la,{onClick:()=>Hr(ze.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Zt,{permission:"users_profile.update_token_limit",roleBypass:ge,children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>ci(ze),title:"Edit limits",children:i.jsx(Aa,{className:"h-4 w-4"})})}),J(pn.MASTER_AGENT)&&i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>ja(ze),title:"View token usage",children:i.jsx(qh,{className:"h-4 w-4"})}),Ka(ze)&&i.jsx(Zt,{permission:"super_agents.delete",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Q(ze),B(!0)},children:i.jsx(fa,{className:"h-4 w-4"})})})]})]}),Mt.map(Nt=>{const Vr="agent",Hn={user_id:String(Nt.user_id),email:Nt.email||"",display_name:Nt.agent_name||Nt.email||"Unknown",avatar_url:Nt.avatar_url||null,timezone:null,created_at:"",roles:[Vr],primaryRole:Vr,status:Nt.is_active?"Active":"Inactive",super_agent_id:ze.user_id};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-gray-50/30 dark:bg-transparent pl-12",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 border-l-2 border-b-2 border-gray-300 rounded-bl"})}),i.jsx(Pa,{className:"h-8 w-8",children:i.jsx(Oa,{className:"text-xs bg-gray-100 text-gray-700",children:Mi(Hn.display_name||"U")})}),i.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:Hn.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:Hn.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(At,{className:`text-xs ${Ha(Hn.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Agent"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(dc,{children:[i.jsx(hc,{asChild:!0,children:i.jsxs(ne,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:Hn.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${qs(Hn.status)}`}),i.jsx("span",{className:"text-xs",children:Hn.status}),Hn.primaryRole!=="master_agent"&&i.jsx(Ta,{className:"h-3 w-3"})]})}),i.jsxs(el,{className:"bg-background border z-50",children:[i.jsx(la,{onClick:()=>Hr(Hn.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(la,{onClick:()=>Hr(Hn.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Zt,{permission:"users_profile.update_token_limit",roleBypass:ge,children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>ci(Hn),title:"Edit limits",children:i.jsx(Aa,{className:"h-4 w-4"})})}),J(pn.MASTER_AGENT)&&i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>ja(Hn),title:"View token usage",children:i.jsx(qh,{className:"h-4 w-4"})}),Ka(Hn)&&i.jsx(Zt,{permission:"super_agents.delete",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Q(Hn),B(!0)},children:i.jsx(fa,{className:"h-4 w-4"})})})]})]},`agent-${Nt.user_id}`)})]},`super-${De.user_id}`)}),Ne.map(De=>{const St="agent",ze={user_id:String(De.user_id),email:De.email||"",display_name:De.agent_name||De.email||"Unknown",avatar_url:De.avatar_url||null,timezone:null,created_at:"",roles:[St],primaryRole:St,status:De.is_active?"Active":"Inactive",super_agent_id:null};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-orange-50/30 dark:bg-transparent",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Pa,{className:"h-8 w-8",children:i.jsx(Oa,{className:"text-xs bg-orange-100 text-orange-700",children:Mi(ze.display_name||"U")})}),i.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:ze.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:ze.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(At,{className:`text-xs ${Ha(ze.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Agent (Unassigned)"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(dc,{children:[i.jsx(hc,{asChild:!0,children:i.jsxs(ne,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:ze.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${qs(ze.status)}`}),i.jsx("span",{className:"text-xs",children:ze.status}),ze.primaryRole!=="master_agent"&&i.jsx(Ta,{className:"h-3 w-3"})]})}),i.jsxs(el,{className:"bg-background border z-50",children:[i.jsx(la,{onClick:()=>Hr(ze.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(la,{onClick:()=>Hr(ze.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Zt,{permission:"users_profile.update_token_limit",roleBypass:ge,children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>ci(ze),title:"Edit limits",children:i.jsx(Aa,{className:"h-4 w-4"})})}),J(pn.MASTER_AGENT)&&i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>ja(ze),title:"View token usage",children:i.jsx(qh,{className:"h-4 w-4"})}),Ka(ze)&&i.jsx(Zt,{permission:"super_agents.delete",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Q(ze),B(!0)},children:i.jsx(fa,{className:"h-4 w-4"})})})]})]},`unassigned-${De.user_id}`)})]})})():Ae.map(Et=>{const Rn=gt(Et.role_name),G={user_id:String(Et.user_id),email:Et.email||"",display_name:Et.agent_name||Et.email||"Unknown",avatar_url:Et.avatar_url||null,timezone:null,created_at:"",roles:Rn?[Rn]:[],primaryRole:Rn,status:Et.is_active?"Active":"Inactive",super_agent_id:null},_e=String(Et.confirmation_status||"").toLowerCase()==="expired";return i.jsxs("div",{className:`grid gap-4 p-4 items-center hover:bg-muted/30 transition-colors ${_n?"grid-cols-[240px,1fr,220px,120px,160px]":"grid-cols-[240px,1fr,220px,160px,120px,120px]"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Pa,{className:"h-8 w-8",children:i.jsx(Oa,{className:"text-xs",children:Mi(G.display_name||"U")})}),i.jsx("span",{className:"font-medium",children:G.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:G.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(At,{className:`text-xs ${Ha(G.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:G.primaryRole==="master_agent"?"Master Agent":G.primaryRole==="super_agent"?"Super Agent":"Agent"})}),!_n&&i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:_n?i.jsx(At,{className:`text-xs leading-none h-6 px-2 inline-flex items-center ${_e?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:_e?"Expired":"Invited"}):i.jsxs(dc,{children:[i.jsx(hc,{asChild:!0,children:i.jsxs(ne,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:G.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${qs(G.status)}`}),i.jsx("span",{className:"text-xs",children:G.status}),G.primaryRole!=="master_agent"&&i.jsx(Ta,{className:"h-3 w-3"})]})}),i.jsxs(el,{className:"bg-background border z-50",children:[i.jsx(la,{onClick:()=>Hr(G.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(la,{onClick:()=>Hr(G.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[!_n&&i.jsx(Zt,{permission:"users_profile.update_token_limit",roleBypass:ge,children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>ci(G),title:"Edit limits",children:i.jsx(Aa,{className:"h-4 w-4"})})}),J(pn.MASTER_AGENT)&&!_n&&i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>ja(G),title:"View token usage",children:i.jsx(qh,{className:"h-4 w-4"})}),_n?i.jsxs(i.Fragment,{children:[_e&&i.jsx(Zt,{permission:"super_agents.create",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-blue-600 hover:bg-blue-700 text-white",onClick:async()=>{try{await ce.functions.invoke("admin-create-user",{body:{email:G.email,full_name:G.display_name,role:G.primaryRole||"agent",reinvite:!0}}),X({title:"Reinvite sent",description:`${G.email}`}),Nr({invited:!0,page:Rt,pageSize:jt})}catch(z){X({title:"Error",description:(z==null?void 0:z.message)||"Failed to reinvite",variant:"destructive"})}},title:"Reinvite user",children:i.jsx(_4,{className:"h-4 w-4"})})}),Ka(G)&&i.jsx(Zt,{permission:"super_agents.delete",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Q(G),B(!0)},children:i.jsx(fa,{className:"h-4 w-4"})})})]}):Ka(G)&&i.jsx(Zt,{permission:"super_agents.delete",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Q(G),B(!0)},children:i.jsx(fa,{className:"h-4 w-4"})})})]})]},Et.user_id)})})]}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:wt>0?i.jsxs("span",{children:["Showing ",Math.min((Rt-1)*jt+1,wt),"",Math.min(Rt*jt,wt)," of ",wt]}):i.jsx("span",{children:"0 results"})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx(tt,{className:"text-sm text-muted-foreground",children:"Rows"}),i.jsxs(Qt,{value:String(jt),onValueChange:Et=>Cr(Number(Et)),children:[i.jsx(Yt,{className:"h-8 w-[100px] bg-background border",children:i.jsx(Kt,{})}),i.jsxs(Xt,{className:"bg-background border z-50",children:[i.jsx(st,{value:"10",children:"10"}),i.jsx(st,{value:"20",children:"20"}),i.jsx(st,{value:"50",children:"50"})]})]})]}),i.jsx(_9,{children:i.jsxs(k9,{children:[i.jsx(Iv,{children:i.jsx(S9,{className:Rt<=1?"pointer-events-none opacity-50":"",onClick:()=>Rt>1&&qn(Rt-1),href:"#"})}),i.jsx(Iv,{children:i.jsxs("span",{className:"text-sm text-muted-foreground px-2",children:["Page ",Rt," of ",Math.max(1,Math.ceil((wt||0)/Math.max(1,jt)))]})}),i.jsx(Iv,{children:i.jsx(N9,{className:Rt>=Math.max(1,Math.ceil((wt||0)/Math.max(1,jt)))?"pointer-events-none opacity-50":"",onClick:()=>Rt<Math.max(1,Math.ceil((wt||0)/Math.max(1,jt)))&&qn(Rt+1),href:"#"})})]})})]})]})]}),qr=async()=>{var Ae,vt;if(!D.name||!D.email){X({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}if(D.role==="agent"&&!E){X({title:"Error",description:"Please select a Super Agent for this agent",variant:"destructive"});return}try{T(!0),fn(U);let wt=Te||null;if(!wt)try{const{data:jt}=await ce.auth.getUser(),{data:qn}=await ce.from("org_members").select("org_id").eq("user_id",((Ae=jt==null?void 0:jt.user)==null?void 0:Ae.id)||"").limit(1);wt=((vt=qn==null?void 0:qn[0])==null?void 0:vt.org_id)||null}catch{}const Rt=await yn({full_name:D.name,email:D.email,role:D.role,super_agent_id:D.role==="agent"&&E||null,org_id:wt});L({name:"",email:"",role:"agent"}),$(null),F(!1),t(!1),X({title:"Success",description:"Agent created successfully"})}catch(wt){X({title:"Error",description:wt instanceof Error?wt.message:"Failed to create agent",variant:"destructive"})}finally{T(!1)}},wa=async Ae=>{var vt,wt,Rt;try{if((W==null?void 0:W.primaryRole)==="master_agent"||(Rt=(wt=(vt=ae.find(jt=>String(jt.user_id)===Ae))==null?void 0:vt.role_name)==null?void 0:wt.toLowerCase)!=null&&Rt.call(wt).includes("master")){X({title:"Error",description:"Master agent tidak dapat dihapus.",variant:"destructive"}),B(!1),Q(null);return}C(!0),await Wn(Ae),X({title:"Success",description:"Agent deleted successfully"}),B(!1),Q(null),bt==="pending"?me.length<=1&&ut>1?ee(jt=>Math.max(1,jt-1)):await Nr({invited:!0,page:ut,pageSize:se,search:H,role:re,pendingStatus:Ie}):ae.length<=1&&ft>1?Ze(jt=>Math.max(1,jt-1)):await Nr({invited:!1,page:ft,pageSize:qe,search:H,role:re,activeStatus:Me})}catch(jt){X({title:"Error",description:jt instanceof Error?jt.message:"Failed to delete agent",variant:"destructive"})}finally{C(!1)}},ci=async Ae=>{try{l(Ae);const{data:vt,error:wt}=await ce.from("users_profile").select("token_limit_enabled, max_tokens_per_day, max_tokens_per_month, is_2fa_email_enabled").eq("user_id",Ae.user_id).maybeSingle();if(wt)throw wt;h({enabled:!!(vt!=null&&vt.token_limit_enabled),perDay:Number((vt==null?void 0:vt.max_tokens_per_day)??0),perMonth:Number((vt==null?void 0:vt.max_tokens_per_month)??0),twoFA:!!(vt!=null&&vt.is_2fa_email_enabled)}),r(!0)}catch(vt){X({title:"Error",description:(vt==null?void 0:vt.message)||"Failed to load token limits",variant:"destructive"})}},ar=async()=>{if(o)try{u(!0);const{error:Ae}=await ce.from("users_profile").update({token_limit_enabled:d.enabled,max_tokens_per_day:Math.max(0,Math.floor(d.perDay||0)),max_tokens_per_month:Math.max(0,Math.floor(d.perMonth||0)),is_2fa_email_enabled:d.twoFA}).eq("user_id",o.user_id);if(Ae)throw Ae;X({title:"Saved",description:"Token limits updated."}),r(!1)}catch(Ae){X({title:"Error",description:(Ae==null?void 0:Ae.message)||"Failed to save token limits",variant:"destructive"})}finally{u(!1)}},Mo=Ae=>{const vt=new Date;let wt;if(Ae==="this_month")wt=new Date(Date.UTC(vt.getUTCFullYear(),vt.getUTCMonth(),1,0,0,0));else{const jt=Ae==="7d"?7:30;wt=new Date(Date.UTC(vt.getUTCFullYear(),vt.getUTCMonth(),vt.getUTCDate(),0,0,0)),wt.setUTCDate(wt.getUTCDate()-(jt-1))}const Rt=vt;return{start:wt.toISOString(),end:Rt.toISOString()}},lr=async Ae=>{try{I(!0);const vt=Mh.filter(jt=>jt.primaryRole==="super_agent").map(jt=>jt.user_id);if(vt.length===0){N({});return}let wt={};if(Ae==="all")try{const{data:jt}=await ce.from("v_super_agent_token_usage").select("super_agent_id,total_tokens");for(const qn of jt||[]){const Cr=String(qn.super_agent_id||"");Cr&&(wt[Cr]=Number(qn.total_tokens||0))}}catch{}else{const{start:jt,end:qn}=Mo(Ae),{data:Cr}=await ce.from("token_usage_logs").select("id,channel_id,total_tokens,made_at").gte("made_at",jt).lt("made_at",qn),_n=Array.from(new Set((Cr||[]).map(Rn=>Rn.channel_id).filter(Boolean)));let Kr={};if(_n.length>0){const{data:Rn}=await ce.from("channels").select("id,super_agent_id").in("id",_n);Kr=Object.fromEntries((Rn||[]).map(G=>[String(G.id),String(G.super_agent_id||"")]))}const Et=new Set;for(const Rn of Cr||[]){const G=String(Rn.id);if(Et.has(G))continue;Et.add(G);const _e=String(Rn.channel_id||""),z=_e&&Kr[_e]||"";z&&(wt[z]=(wt[z]||0)+Number(Rn.total_tokens||0))}}const Rt={};for(const jt of vt)Rt[jt]=wt[jt]||0;N(Rt)}catch(vt){X({title:"Error",description:(vt==null?void 0:vt.message)||"Failed to load usage",variant:"destructive"})}finally{I(!1)}};p.useEffect(()=>{it.length>0&&lr(f)},[it,f]),p.useEffect(()=>{(async()=>{var Ae,vt;try{const{data:wt}=await ce.auth.getUser();S(((Ae=wt==null?void 0:wt.user)==null?void 0:Ae.id)||null);try{const{data:Rt}=await ce.from("org_members").select("org_id").eq("user_id",((vt=wt==null?void 0:wt.user)==null?void 0:vt.id)||"").limit(1).maybeSingle();je((Rt==null?void 0:Rt.org_id)||null)}catch{}}catch{}})()},[]),p.useEffect(()=>{P&&(Nr({invited:!1,page:ft,pageSize:qe}),bt==="pending"&&Nr({invited:!0,page:ut,pageSize:se}))},[P]);const qa=()=>J(pn.MASTER_AGENT)?it:J(pn.SUPER_AGENT)?P?it.filter(Ae=>Ae.primaryRole==="super_agent"&&Ae.user_id===P||Ae.primaryRole==="agent"&&Ae.super_agent_id===P):[]:[],Mh=p.useMemo(()=>qa(),[it,J,P]),ja=async Ae=>{l(Ae),s(!0),await fu(Ae.user_id,g)},fu=async(Ae,vt)=>{var wt;try{b(!0);const{start:Rt,end:jt}=Mo(vt),qn=((wt=it.find(Ke=>Ke.user_id===Ae))==null?void 0:wt.super_agent_id)||null,Cr=qn?it.filter(Ke=>Ke.primaryRole==="agent"&&Ke.super_agent_id===qn).map(Ke=>Ke.user_id):[Ae],{data:_n}=await ce.from("threads").select("id").in("assignee_user_id",Cr).gte("created_at",Rt).lt("created_at",jt),Kr=(_n||[]).map(Ke=>Ke.id),[Et,Rn]=await Promise.all([Kr.length>0?ce.from("token_usage_logs").select("id,total_tokens").in("thread_id",Kr).gte("made_at",Rt).lt("made_at",jt):Promise.resolve({data:[]}),ce.from("token_usage_logs").select("id,total_tokens").in("user_id",Cr).gte("made_at",Rt).lt("made_at",jt)]),G=new Set;let _e=0;for(const Ke of[...Et.data||[],...Rn.data||[]]){const Ne=String(Ke.id);G.has(Ne)||(G.add(Ne),_e+=Number(Ke.total_tokens||0))}y(_e);const[z,fe,pe,Le]=await Promise.all([ce.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",Rt).lt("created_at",jt).eq("assignee_user_id",Ae),ce.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",Rt).lt("created_at",jt).eq("assigned_by_user_id",Ae),ce.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",Rt).lt("created_at",jt).eq("resolved_by_user_id",Ae),ce.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",Rt).lt("created_at",jt).eq("assignee_user_id",Ae).not("ai_handoff_at","is",null)]);k({assignedTo:z.count||0,assignedBy:fe.count||0,resolvedBy:pe.count||0,handoverFromAI:Le.count||0})}catch(Rt){y(null),k(null),X({title:"Error",description:(Rt==null?void 0:Rt.message)||"Failed to load usage",variant:"destructive"})}finally{b(!1)}},Hr=async(Ae,vt)=>{try{const{error:wt}=await ce.from("users_profile").update({is_active:vt==="Active"}).eq("user_id",Ae);if(wt)throw wt;X({title:"Success",description:`Status changed to ${vt}`}),await Lt()}catch(wt){X({title:"Error",description:(wt==null?void 0:wt.message)||"Failed to change status",variant:"destructive"})}},Mi=Ae=>Ae.split(" ").map(vt=>vt[0]).join("").toUpperCase().slice(0,2),qs=Ae=>Ae==="Active"?"bg-green-500":"bg-gray-400",Ha=Ae=>Ae==="master_agent"?"bg-blue-100 text-blue-700":Ae==="super_agent"?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-700",Ka=Ae=>!(!Ae||Ae.primaryRole==="master_agent"||le&&P&&Ae.user_id===P);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Human Agent Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your human agents"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx(tt,{className:"text-sm text-muted-foreground",children:"Usage"}),i.jsxs(Qt,{value:f,onValueChange:async Ae=>{const vt=Ae;m(vt);try{await lr(vt)}catch{}},children:[i.jsx(Yt,{className:"h-8 w-[160px] bg-background border",children:i.jsx(Kt,{placeholder:"Range"})}),i.jsxs(Xt,{className:"bg-background border z-50",children:[i.jsx(st,{value:"all",children:"All time"}),i.jsx(st,{value:"7d",children:"Last 7 days"}),i.jsx(st,{value:"30d",children:"Last 30 days"}),i.jsx(st,{value:"this_month",children:"This month"})]})]})]}),!ie&&i.jsx(Zt,{permission:"users_profile.create",fallback:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("span",{children:i.jsxs(ne,{className:"gap-2 bg-blue-600 text-white",disabled:!0,children:[i.jsx(Ms,{className:"h-4 w-4"}),"Create Agent"]})})}),i.jsx(ye,{children:i.jsx("p",{children:"You do not have permission to create agents."})})]}),children:i.jsxs(gn,{open:e,onOpenChange:t,children:[i.jsx(oC,{asChild:!0,children:i.jsxs(ne,{className:"gap-2 bg-blue-600 hover:bg-blue-700 text-white",children:[i.jsx(Ms,{className:"h-4 w-4"}),"Create Agent"]})}),i.jsxs(ln,{className:"sm:max-w-md bg-background border",children:[i.jsx(cn,{children:i.jsx(un,{children:"Create New Agent"})}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"agent-name",children:["Agent Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(ot,{id:"agent-name",value:D.name,onChange:Ae=>L({...D,name:Ae.target.value}),placeholder:"Enter agent name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"agent-email",children:["Email ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(ot,{id:"agent-email",type:"email",value:D.email,onChange:Ae=>L({...D,email:YFe(Ae.target.value)}),onKeyDown:Ae=>{Ae.key===" "&&Ae.preventDefault()},placeholder:"Enter email address"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"agent-phone",children:"Phone (Optional)"}),i.jsx(ot,{id:"agent-phone",type:"tel",value:D.phone||"",onChange:Ae=>L({...D,phone:Ae.target.value}),placeholder:"Enter phone number"})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[i.jsx(Bd,{id:"agent-2fa",checked:U,onCheckedChange:Ae=>F(!!Ae)}),i.jsx(tt,{htmlFor:"agent-2fa",className:"text-sm",children:"Enable email 2FA for this agent"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tt,{htmlFor:"agent-role",children:"Role"}),!J(pn.MASTER_AGENT)&&i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Hanya Master Agent yang dapat membuat Super Agent"})})]})]}),i.jsxs(Qt,{value:D.role,onValueChange:Ae=>L({...D,role:Ae}),children:[i.jsx(Yt,{className:"bg-background border",children:i.jsx(Kt,{})}),i.jsxs(Xt,{className:"bg-background border z-50",children:[i.jsx(st,{value:"agent",children:"Agent"}),J(pn.MASTER_AGENT)&&i.jsx(st,{value:"super_agent",children:"Super Agent"})]})]})]}),D.role==="agent"&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{children:["Attach to Super Agent ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs(Qt,{value:E||"",onValueChange:Ae=>$(Ae),children:[i.jsx(Yt,{className:"bg-background border",children:i.jsx(Kt,{placeholder:"Select Super Agent"})}),i.jsx(Xt,{className:"bg-background border z-50",children:it.filter(Ae=>Ae.primaryRole==="super_agent").map(Ae=>i.jsx(st,{value:Ae.user_id,children:Ae.display_name||Ae.email},Ae.user_id))})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Fields marked with ",i.jsx("span",{className:"text-red-500",children:"*"})," are required."]}),D.role==="agent"&&i.jsx("p",{className:"mt-1",children:"Agents must be attached to a Super Agent."})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(ne,{onClick:qr,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",disabled:M||!Je,children:M?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin"}),"Creating..."]}):"Create Agent"}),i.jsx(ne,{variant:"outline",onClick:()=>t(!1),className:"flex-1",disabled:M,children:"Cancel"})]})]})]})]})})]})]}),i.jsxs("div",{className:"grid gap-3 rounded-lg border bg-card p-4 md:flex md:items-center md:justify-between",children:[i.jsxs("div",{className:"relative w-full md:w-64",children:[i.jsx(ns,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(ot,{value:Ee,onChange:Ae=>Ue(Ae.target.value),placeholder:"Search name or email",className:"pl-9"})]}),!ie&&i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs(Qt,{value:re,onValueChange:Ae=>he(Ae),children:[i.jsx(Yt,{className:"w-[150px] bg-background border",children:i.jsx(Kt,{placeholder:"Role"})}),i.jsxs(Xt,{className:"bg-background border z-50",children:[i.jsx(st,{value:"all",children:"All roles"}),i.jsx(st,{value:"master_agent",children:"Master Agent"}),i.jsx(st,{value:"super_agent",children:"Super Agent"}),i.jsx(st,{value:"agent",children:"Agent"})]})]}),bt==="pending"?i.jsxs(Qt,{value:Ie,onValueChange:Ae=>Y(Ae),children:[i.jsx(Yt,{className:"w-[150px] bg-background border",children:i.jsx(Kt,{placeholder:"Invitation status"})}),i.jsxs(Xt,{className:"bg-background border z-50",children:[i.jsx(st,{value:"all",children:"All invitations"}),i.jsx(st,{value:"invited",children:"Invited"}),i.jsx(st,{value:"expired",children:"Expired"})]})]}):i.jsxs(Qt,{value:Me,onValueChange:Ae=>et(Ae),children:[i.jsx(Yt,{className:"w-[150px] bg-background border",children:i.jsx(Kt,{placeholder:"Status"})}),i.jsxs(Xt,{className:"bg-background border z-50",children:[i.jsx(st,{value:"all",children:"All statuses"}),i.jsx(st,{value:"active",children:"Active"}),i.jsx(st,{value:"inactive",children:"Inactive"})]})]})]})]}),i.jsxs(Uc,{value:bt,onValueChange:Ae=>ue(Ae),className:"space-y-6",children:[i.jsxs(Tl,{className:`grid w-full max-w-md ${ie?"grid-cols-1":"grid-cols-2"}`,children:[i.jsxs(wr,{value:"active",className:"gap-2",children:[i.jsx(FV,{className:"h-4 w-4"}),"Active"]}),!ie&&i.jsxs(wr,{value:"pending",className:"gap-2",children:[i.jsx(UV,{className:"h-4 w-4"}),"Pending"]})]}),i.jsx(ir,{value:"active",className:"space-y-4",children:rr(ae,oe||Pt,de,ft,qe,Ze,dt,!1,Se)}),!ie&&i.jsx(ir,{value:"pending",className:"space-y-4",children:rr(me,ke,nt,ut,se,ee,ve,!0)})]}),i.jsx(gn,{open:A,onOpenChange:Ae=>{R||B(Ae)},children:i.jsxs(ln,{className:"sm:max-w-md bg-background border",children:[i.jsx(cn,{children:i.jsx(un,{children:"Delete Agent"})}),i.jsxs("div",{className:"space-y-3 py-2",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Are you sure you want to permanently delete ",(W==null?void 0:W.display_name)||"this agent","? This will remove their profile and role assignments. This action cannot be undone."]}),i.jsxs("div",{className:"rounded-md border p-3 bg-muted/30 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",(W==null?void 0:W.display_name)||""]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",(W==null?void 0:W.email)||""]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Role:"})," ",(W==null?void 0:W.primaryRole)||""]})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsx(ne,{variant:"destructive",className:"flex-1",onClick:()=>W&&wa(W.user_id),disabled:R,children:R?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"}),i.jsx(ne,{variant:"outline",className:"flex-1",onClick:()=>B(!1),disabled:R,children:"Cancel"})]})]})]})}),i.jsx(gn,{open:n,onOpenChange:r,children:i.jsxs(ln,{className:"sm:max-w-md bg-background border",children:[i.jsx(cn,{children:i.jsxs(un,{children:["Token Limits",o?`  ${o.display_name||o.email}`:""]})}),i.jsxs("div",{className:"space-y-4 py-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(tt,{className:"text-sm font-medium",children:"Enable Limits"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Block token-consuming actions when exceeded."})]}),i.jsx(Es,{checked:d.enabled,onCheckedChange:Ae=>h({...d,enabled:!!Ae})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(tt,{className:"text-sm font-medium",children:"Require Email 2FA"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"User must enter a one-time code at sign-in."})]}),i.jsx(Es,{checked:d.twoFA,onCheckedChange:Ae=>h({...d,twoFA:!!Ae})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"limit-day",children:"Max Tokens / Day"}),i.jsx(ot,{id:"limit-day",type:"number",min:0,placeholder:"0",value:d.perDay===0?"":d.perDay,onChange:Ae=>h({...d,perDay:Number(Ae.target.value||"0")})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"limit-month",children:"Max Tokens / Month"}),i.jsx(ot,{id:"limit-month",type:"number",min:0,placeholder:"0",value:d.perMonth===0?"":d.perMonth,onChange:Ae=>h({...d,perMonth:Number(Ae.target.value||"0")})})]})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{onClick:ar,disabled:c,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:"Save"})}),i.jsx(ye,{children:i.jsx("p",{children:"Simpan batas token"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"})}),i.jsx(ye,{children:i.jsx("p",{children:"Batal"})})]})]})]})]})}),i.jsx(gn,{open:a,onOpenChange:s,children:i.jsxs(ln,{className:"sm:max-w-md bg-background border",children:[i.jsx(cn,{children:i.jsxs(un,{children:["Token Usage",o?`  ${o.display_name||o.email}`:""]})}),i.jsxs("div",{className:"space-y-4 py-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{children:"Timeframe"}),i.jsxs(Qt,{value:g,onValueChange:async Ae=>{const vt=Ae;v(vt),o&&await fu(o.user_id,vt)},children:[i.jsx(Yt,{className:"bg-background border",children:i.jsx(Kt,{})}),i.jsxs(Xt,{className:"bg-background border z-50",children:[i.jsx(st,{value:"7d",children:"Last 7 days"}),i.jsx(st,{value:"30d",children:"Last 30 days"}),i.jsx(st,{value:"this_month",children:"This month"})]})]})]}),i.jsxs("div",{className:"rounded-md border p-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tokens"}),i.jsx("div",{className:"text-2xl font-bold",children:w?"":(x==null?void 0:x.toLocaleString())??0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Assigned To Agent"}),i.jsx("div",{className:"text-xl font-semibold",children:(_==null?void 0:_.assignedTo)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Takeovers Initiated"}),i.jsx("div",{className:"text-xl font-semibold",children:(_==null?void 0:_.assignedBy)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Resolved by Agent"}),i.jsx("div",{className:"text-xl font-semibold",children:(_==null?void 0:_.resolvedBy)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"AIAgent Handovers"}),i.jsx("div",{className:"text-xl font-semibold",children:(_==null?void 0:_.handoverFromAI)??0})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"outline",onClick:()=>s(!1),children:"Close"})}),i.jsx(ye,{children:i.jsx("p",{children:"Tutup"})})]})})]})]})})]})},XFe=e=>e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),iD=e=>e==="read_own"?"Own":e==="read_all"?"All":e==="read_channel_owned"?"My Channels":e==="read_collaborator"?"Collaborator":e==="read"?"Read":e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),JFe=({permissions:e,assignedPermissionIds:t,onToggle:n,isReadOnly:r=!1,className:a})=>{const[s,o]=p.useState(""),[l,c]=p.useState({}),[u,d]=p.useState(new Set),h=p.useMemo(()=>{const y={};return e.forEach(w=>{y[w.resource]||(y[w.resource]={}),y[w.resource][w.action]=w}),y},[e]),f=p.useMemo(()=>{const y=s.toLowerCase().trim();return y?Object.keys(Ju).filter(w=>w.toLowerCase().includes(y)?!0:Ju[w].some(_=>_.toLowerCase().includes(y))):Object.keys(Ju)},[s]),m=async(y,w)=>{if(!(r||u.has(y)))try{d(b=>new Set(b).add(y)),await n(y,w)}catch(b){console.error("Failed to toggle permission",b)}finally{d(b=>{const _=new Set(b);return _.delete(y),_})}},g=async(y,w)=>{if(r||l[y])return;const b=w.map(j=>{var N;return(N=h[y])==null?void 0:N[j]}).filter(j=>!!j);if(b.length===0)return;const k=!b.every(j=>t.includes(j.id));c(j=>({...j,[y]:!0}));try{const j=w.filter(L=>L==="read"||L.startsWith("read_")),N=b.filter(L=>!j.includes(L.action)),O=b.filter(L=>j.includes(L.action)),P=["read_own","read_channel_owned","read_collaborator","read_all","read"].findLast(L=>O.some(U=>U.action===L))||null,S=[];if(k){for(const L of N)t.includes(L.id)||S.push(n(L.id,!0));for(const L of O){const U=P?L.action===P:!1;t.includes(L.id)!==U&&S.push(n(L.id,U))}}else for(const L of[...N,...O])t.includes(L.id)&&S.push(n(L.id,!1));const D=5;for(let L=0;L<S.length;L+=D)await Promise.all(S.slice(L,L+D))}catch(j){console.error(`Failed to bulk toggle for ${y}`,j)}finally{c(j=>({...j,[y]:!1}))}},v=(y,w,b,_=!1)=>{var P;const k=(P=h[y])==null?void 0:P[w];if(!k)return null;const j=t.includes(k.id),N=Hee(w),O=u.has(k.id)||l[y],I=b||iD(w);return i.jsxs("div",{className:Pe("flex items-center justify-between p-2 rounded-md transition-colors text-sm",j?"bg-primary/5":"hover:bg-muted/50",N&&j&&"bg-red-50 dark:bg-red-950/20"),children:[i.jsx("div",{className:"flex items-center gap-2 flex-1",children:i.jsxs(tt,{htmlFor:k.id,className:Pe("cursor-pointer font-medium flex items-center gap-2",N?"text-red-600 dark:text-red-400":"text-foreground"),children:[I,N&&_&&i.jsx(eo,{className:"h-3 w-3 text-red-500"})]})}),i.jsx(Es,{id:k.id,checked:j,onCheckedChange:S=>m(k.id,S),disabled:r||O,className:Pe(N&&j&&"data-[state=checked]:bg-red-500")})]},w)},x=(y,w)=>{const b=w.filter(O=>O==="read"||O.startsWith("read_"));if(b.length===0)return null;const k=["read_own","read_channel_owned","read_collaborator","read_all","read"].filter(O=>b.includes(O)),j=k.findLast(O=>{var P,S;const I=(S=(P=h[y])==null?void 0:P[O])==null?void 0:S.id;return I?t.includes(I):!1})||null,N=async O=>{var P,S;if(r)return;const I=[];for(const D of k){const L=(P=h[y])==null?void 0:P[D];if(!L)continue;const U=t.includes(L.id),F=O===D;U!==F&&I.push(n(L.id,F))}if(O===null)for(const D of k){const L=(S=h[y])==null?void 0:S[D];if(!L)continue;t.includes(L.id)&&I.push(n(L.id,!1))}await Promise.all(I)};return i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"inline-flex flex-wrap items-center gap-1 rounded-md border p-1 bg-muted/30",children:[i.jsx(ne,{size:"sm",variant:j===null?"default":"ghost",className:Pe("h-7 text-xs"),onClick:()=>N(null),disabled:r,children:"None"}),k.map(O=>{const I=iD(O),P=y==="threads"&&(O==="read_channel_owned"||O==="read_collaborator")||y==="messages"&&O==="read_collaborator",S=y==="threads"&&O==="read_channel_owned"?"Can view threads that belong to channels assigned to this agent.":y==="threads"&&O==="read_collaborator"?"Can view threads where the user is directly involved (assignee, creator, resolver, or collaborator).":y==="messages"&&O==="read_collaborator"?"Can view messages in threads where the user is involved as collaborator or assignee.":"",D=i.jsx(ne,{size:"sm",variant:j===O?"default":"ghost",className:Pe("h-7 text-xs"),onClick:()=>N(O),disabled:r,children:I},O);return P?i.jsx(Z_,{children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:D}),i.jsx(ye,{side:"top",children:i.jsx("div",{className:"max-w-xs text-xs",children:S})})]})},O):D})]})})};return i.jsxs("div",{className:Pe("space-y-6",a),children:[i.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur pb-4 pt-2",children:i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(ns,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(ot,{placeholder:"Search resources or actions...",value:s,onChange:y=>o(y.target.value),className:"pl-9 bg-background"})]})}),i.jsxs("div",{className:"columns-1 md:columns-2 xl:columns-3 gap-6 space-y-6",children:[f.map(y=>{const w=Ju[y],b=w.map(S=>{var D;return(D=h[y])==null?void 0:D[S]}).filter(Boolean);if(b.length===0)return null;const _=b.every(S=>t.includes(S==null?void 0:S.id)),k=l[y],j=w.filter(S=>{const D=Iw(S);return["create","update","delete"].includes(D)}),N=w.filter(S=>Iw(S)==="read"),O=w.filter(S=>Iw(S)==="special"),I=N.filter(S=>S==="read"||S.startsWith("read_")),P=N.filter(S=>!I.includes(S));return i.jsx("div",{className:"break-inside-avoid mb-6",children:i.jsxs(We,{className:Pe("h-full border-t-4 shadow-sm",_?"border-t-primary":"border-t-muted"),children:[i.jsx(mt,{className:"pb-3 bg-muted/30 pt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(ht,{className:"text-base font-semibold flex items-center gap-2",children:[y==="security"?i.jsx(sm,{className:"h-4 w-4 text-orange-500"}):y==="analytics"?i.jsx(ns,{className:"h-4 w-4 text-blue-500"}):i.jsx(fo,{className:"h-4 w-4 text-muted-foreground"}),XFe(y)]}),!r&&i.jsx(ne,{variant:"ghost",size:"sm",className:"h-7 text-xs text-muted-foreground hover:text-primary",onClick:()=>g(y,w),disabled:k,children:k?"...":_?"Unselect All":"Select All"})]})}),i.jsxs(ct,{className:"pt-4 space-y-4",children:[j.length>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Manage"}),i.jsx("div",{className:"grid gap-1",children:j.map(S=>v(y,S,y==="admin_panel"&&S==="update"?"Update Settings":void 0))})]}),N.length>0&&i.jsxs("div",{className:Pe(j.length>0&&"pt-2 border-t"),children:[i.jsx("div",{className:"flex items-center justify-between mb-2 mt-2",children:i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider flex items-center gap-1",children:"Access Level"})}),I.length>0&&x(y,w),P.length>0&&i.jsx("div",{className:"mt-2 grid gap-1",children:P.map(S=>v(y,S))})]}),O.length>0&&i.jsxs("div",{className:Pe((j.length>0||N.length>0)&&"pt-2 border-t"),children:[i.jsx("h4",{className:"text-xs font-semibold text-orange-600/80 dark:text-orange-400/80 uppercase tracking-wider mb-2 mt-2 flex items-center gap-1",children:"Special Actions"}),i.jsx("div",{className:"grid gap-1",children:O.map(S=>{const L=v(y,S,y==="alerts"&&S==="ack"?"Acknowledge":y==="messages"&&S==="send"?"Send":void 0,!0);return y==="alerts"&&S==="ack"&&L?i.jsx(Z_,{children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("div",{children:L})}),i.jsx(ye,{side:"top",children:i.jsx("div",{className:"max-w-xs text-xs",children:"Mark alerts as acknowledged on behalf of this role."})})]})},S):L})})]})]})]})},y)}),f.length===0&&i.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center border-2 border-dashed rounded-lg",children:[i.jsx(ns,{className:"h-10 w-10 text-muted-foreground mb-3"}),i.jsx("h3",{className:"text-lg font-medium",children:"No matching permissions"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Try adjusting your search terms."})]})]})]})},QFe=()=>{const[e,t]=p.useState([]),[n,r]=p.useState([]),[a,s]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState(null),[d,h]=p.useState("roles"),{toast:f}=nu(),{refreshRBAC:m,hasPermission:g,hasRole:v}=Or(),[x,y]=p.useState({}),[w,b]=p.useState(!1),[_,k]=p.useState(null),[j,N]=p.useState(""),[O,I]=p.useState(""),[P,S]=p.useState(!1),[D,L]=p.useState(!1),[U,F]=p.useState(null),[M,T]=p.useState(!1),E=(c==null?void 0:c.name)==="master_agent",$=g("roles.create"),A=g("roles.update"),B=g("roles.delete"),R=g("roles.update"),C=g("roles.update"),W=async()=>{try{l(!0);const{data:K,error:de}=await ce.from("roles").select("*").order("name");if(de)throw de;t(K||[]);const{data:$e,error:nt}=await ce.from("permissions").select("*").order("resource",{ascending:!0});if(nt)throw nt;r($e||[]);const{data:Ye,error:ft}=await ce.from("role_permissions").select("*");if(ft)throw ft;s(Ye||[])}catch(K){console.error("Error fetching RBAC data:",K),f({title:"Error",description:"Failed to fetch permissions data",variant:"destructive"})}finally{l(!1)}};p.useEffect(()=>{W()},[]);const Q=()=>{k(null),N(""),I(""),b(!0)},X=K=>{k(K),N(K.name),I(K.description),b(!0)},Z=async()=>{try{if(S(!0),_){if(!A){f({title:"Forbidden",description:"You do not have permission to update roles",variant:"destructive"});return}const{error:K}=await ce.from("roles").update({name:j,description:O}).eq("id",_.id);if(K)throw K;try{await Jt({action:"roles.update",resource:"roles",resourceId:_.id,context:{name:j}})}catch{}f({title:"Saved",description:"Role updated"})}else{if(!$){f({title:"Forbidden",description:"You do not have permission to create roles",variant:"destructive"});return}const{data:K,error:de}=await ce.from("roles").insert([{name:j,description:O}]).select("id").single();if(de)throw de;try{await Jt({action:"roles.create",resource:"roles",resourceId:(K==null?void 0:K.id)??null,context:{name:j}})}catch{}f({title:"Created",description:"Role created"})}b(!1),await W()}catch{f({title:"Error",description:"Failed to save role",variant:"destructive"})}finally{S(!1)}},te=async K=>{try{if(!B){f({title:"Forbidden",description:"You do not have permission to delete roles",variant:"destructive"});return}y($e=>({...$e,[K.id]:!0})),T(!0),await ce.from("role_permissions").delete().eq("role_id",K.id),await ce.from("user_roles").delete().eq("role_id",K.id);const{error:de}=await ce.from("roles").delete().eq("id",K.id);if(de)throw de;try{await Jt({action:"roles.delete",resource:"roles",resourceId:K.id})}catch{}f({title:"Deleted",description:"Role deleted"}),L(!1),F(null),await W()}catch{f({title:"Error",description:"Failed to delete role",variant:"destructive"})}finally{y(de=>({...de,[K.id]:!1})),T(!1)}},J=(K,de)=>a.some($e=>$e.role_id===K&&$e.permission_id===de),ie=p.useRef(null),ge=()=>{ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{m().catch(()=>{})},250)},ae=async(K,de)=>{try{const $e=J(K,de),nt=`${K}:${de}`;if(y(Ye=>({...Ye,[nt]:!0})),$e){if(!C){f({title:"Forbidden",description:"You do not have permission to revoke role permissions",variant:"destructive"});return}const{error:Ye}=await ce.rpc("revoke_role_permission",{p_role:K,p_perm:de});if(Ye)throw Ye;s(ft=>ft.filter(Ze=>!(Ze.role_id===K&&Ze.permission_id===de)));try{await Jt({action:"rbac.revoke",resource:"rbac",context:{role_id:K,permission_id:de}})}catch{}}else{if(!R){f({title:"Forbidden",description:"You do not have permission to grant role permissions",variant:"destructive"});return}const{error:Ye}=await ce.rpc("grant_role_permission",{p_role:K,p_perm:de});if(Ye)throw Ye;s(ft=>[...ft,{role_id:K,permission_id:de}]);try{await Jt({action:"rbac.grant",resource:"rbac",context:{role_id:K,permission_id:de}})}catch{}}ge(),f({title:"Success",description:`Permission ${$e?"removed from":"added to"} role`})}catch($e){console.error("Error updating role permission:",$e),f({title:"Error",description:"Failed to update permission",variant:"destructive"})}finally{const $e=`${K}:${de}`;y(nt=>({...nt,[$e]:!1}))}},Re=K=>a.filter($e=>$e.role_id===K).length,me=K=>K.replace("_"," ").toUpperCase();return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Role Permissions"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage role permissions"})]}),i.jsx(Zt,{permission:"roles.create",children:i.jsxs(ne,{onClick:Q,children:[i.jsx(Ms,{className:"h-4 w-4 mr-2"})," New Role"]})})]}),i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(fo,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4 animate-pulse"}),i.jsx("p",{className:"text-muted-foreground",children:"Loading roles..."})]})})]}):d==="roles"?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Role Permissions"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage role permissions"})]}),i.jsxs(ne,{onClick:Q,disabled:!$,title:$?void 0:"No permission: roles.create",children:[i.jsx(Ms,{className:"h-4 w-4 mr-2"})," New Role"]})]}),i.jsxs(We,{className:"pt-2",children:[i.jsxs(mt,{children:[i.jsx(ht,{children:"Roles"}),i.jsx(Ni,{children:"Click on a role to manage its permissions"})]}),i.jsx(ct,{children:i.jsxs(zb,{children:[i.jsx(Wb,{children:i.jsxs(so,{children:[i.jsx(Jn,{children:"Role Name"}),i.jsx(Jn,{children:"Description"}),i.jsx(Jn,{children:"Permissions"}),i.jsx(Jn,{children:"Actions"})]})}),i.jsx(qb,{children:e.map(K=>i.jsxs(so,{children:[i.jsx(Un,{className:"font-medium",children:i.jsx(At,{variant:"outline",children:me(K.name)})}),i.jsx(Un,{children:K.description}),i.jsx(Un,{children:i.jsxs(At,{variant:"secondary",children:[Re(K.id)," permissions"]})}),i.jsx(Un,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zt,{permission:"roles.read",children:i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{u(K),h("configure")},children:[i.jsx(ho,{className:"h-4 w-4 mr-2"}),"Configure"]})}),i.jsx(ye,{children:i.jsx("p",{children:"Konfigurasi aturan akses untuk peran ini"})})]})}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(Zt,{permission:"roles.update",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>X(K),"aria-label":"Edit role",children:i.jsx(Aa,{className:"h-4 w-4"})})})}),i.jsx(ye,{children:i.jsx("p",{children:"Edit peran ini"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(Zt,{permission:"roles.delete",children:i.jsx(ne,{size:"sm",onClick:()=>{F(K),L(!0)},disabled:!!x[K.id],className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white","aria-label":"Delete role",children:i.jsx(fa,{className:"h-4 w-4"})})})}),i.jsx(ye,{children:i.jsx("p",{children:"Hapus peran ini"})})]})]})})]},K.id))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(We,{children:[i.jsxs(mt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ht,{className:"text-sm font-medium",children:"Total Roles"}),i.jsx(fo,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ct,{children:i.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),i.jsxs(We,{children:[i.jsxs(mt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ht,{className:"text-sm font-medium",children:"Total Permissions"}),i.jsx(ho,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(ct,{children:i.jsx("div",{className:"text-2xl font-bold",children:n.length})})]}),i.jsxs(We,{children:[i.jsxs(mt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ht,{className:"text-sm font-medium",children:"Resources"}),i.jsx(ho,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(ct,{children:[i.jsx("div",{className:"text-2xl font-bold",children:new Set(n.map(K=>K.resource)).size}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique resources"})]})]})]}),i.jsx(Zt,{permission:"roles.update",children:i.jsx(gn,{open:w,onOpenChange:b,children:i.jsxs(ln,{children:[i.jsx(cn,{children:i.jsx(un,{children:_?"Edit Role":"Create Role"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(tt,{htmlFor:"rname",children:"Name"}),i.jsx(ot,{id:"rname",value:j,onChange:K=>N(K.target.value),placeholder:"e.g. Super Agent"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(tt,{htmlFor:"rdesc",children:"Description"}),i.jsx(ot,{id:"rdesc",value:O,onChange:K=>I(K.target.value),placeholder:"Optional"})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[i.jsx(ne,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),i.jsx(ne,{onClick:Z,disabled:P||!j.trim()||(_?!A:!$),title:_?A?void 0:"No permission: roles.update":$?void 0:"No permission: roles.create",children:P?"Saving":"Save"})]})]})]})})}),i.jsx(Zt,{permission:"roles.delete",children:i.jsx(gn,{open:D,onOpenChange:L,children:i.jsxs(ln,{children:[i.jsxs(cn,{children:[i.jsx(un,{children:"Delete Role"}),i.jsxs(Ur,{children:["This will permanently delete the role",U?` "${me(U.name)}"`:""," and all its permissions."]})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[i.jsx(ne,{variant:"outline",onClick:()=>L(!1),disabled:M,children:"Cancel"}),i.jsx(ne,{variant:"destructive",onClick:()=>U&&te(U),disabled:M||!B,title:B?void 0:"No permission: roles.delete",children:M?"Deleting":"Delete"})]})]})})})]}):d==="configure"&&c?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx(ne,{variant:"ghost",onClick:()=>h("roles"),className:"mb-2",children:" Back to Roles"}),i.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Configure ",me(c.name)]}),i.jsx("p",{className:"text-muted-foreground",children:c.description})]})}),E&&i.jsx(We,{children:i.jsxs(mt,{children:[i.jsx(ht,{children:"Root Role"}),i.jsx(Ni,{children:"Master Agent is a root role with full privileges across the system."})]})}),i.jsxs("div",{className:"py-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Full Permission Matrix"}),i.jsx(JFe,{permissions:n,assignedPermissionIds:a.filter(K=>K.role_id===c.id).map(K=>K.permission_id),onToggle:async(K,de)=>{J(c.id,K)!==de&&await ae(c.id,K)},isReadOnly:!R&&!C})]})]}):null},ZFe={maxSize:100,dedupeWindow:1e3,batchWindow:100,maxBatchSize:10};class e3e{constructor(t={}){Wt(this,"queue",[]);Wt(this,"processing",!1);Wt(this,"pendingRequests",new Map);Wt(this,"config");this.config={...ZFe,...t}}async enqueue(t,n={operation:"read"}){const{operation:r="read",endpoint:a,priority:s=0,dedupeKey:o}=n,l=o||this.generateDedupeKey(t,a),c=this.pendingRequests.get(l);if(c)return c;if(this.queue.length>=this.config.maxSize){this.queue.sort((g,v)=>v.priority-g.priority);const m=this.queue.pop();m&&m.reject(new Error("Request queue full"))}let u,d;const h=new Promise((m,g)=>{u=m,d=g});this.pendingRequests.set(l,h);const f={id:l,fn:t,priority:s,timestamp:Date.now(),operation:r,endpoint:a,resolve:u,reject:d};return this.queue.push(f),this.queue.sort((m,g)=>g.priority-m.priority),this.processQueue(),h.finally(()=>{this.pendingRequests.delete(l)}),h}async processQueue(){if(!(this.processing||this.queue.length===0)){this.processing=!0;try{for(;this.queue.length>0;){const t=this.getBatch();if(t.length===1){const n=t[0];try{const r=await n.fn();n.resolve(r)}catch(r){n.reject(r)}}else await Promise.allSettled(t.map(async n=>{try{const r=await n.fn();n.resolve(r)}catch(r){n.reject(r)}}))}}finally{this.processing=!1}}}getBatch(){if(this.queue.length===0)return[];const t=Date.now(),n=[],r=this.queue[0];for(let a=0;a<this.queue.length&&n.length<this.config.maxBatchSize;a++){const s=this.queue[a],o=t-s.timestamp;s.operation===r.operation&&o<=this.config.batchWindow&&(!r.endpoint||s.endpoint===r.endpoint)&&n.push(s)}return n.forEach(a=>{const s=this.queue.findIndex(o=>o.id===a.id);s>=0&&this.queue.splice(s,1)}),n}generateDedupeKey(t,n){return`${t.toString()}:${n||""}`.slice(0,100)}debounce(t,n=300,r={}){return new Promise((a,s)=>{let o=null,l=Date.now();const c=async()=>{try{const d=await this.enqueue(t,{...r,dedupeKey:`debounce:${r.endpoint||"default"}`});a(d)}catch(d){s(d)}},u=()=>{o&&clearTimeout(o),o=setTimeout(()=>{Date.now()-l>=n?c():u()},n)};u()})}getStats(){return{queueLength:this.queue.length,pendingRequests:this.pendingRequests.size,processing:this.processing}}clear(){this.queue.forEach(t=>{t.reject(new Error("Queue cleared"))}),this.queue=[],this.pendingRequests.clear()}}const sD=new e3e,oD=["#60a5fa","#2563eb","#1d4ed8","#10b981","#f59e0b","#ef4444"],fi=({label:e,description:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:t})})]})]});function t3e(){const[e,t]=p.useState(nn.getStats()),[n,r]=p.useState(null),[a,s]=p.useState(sD.getStats()),[o,l]=p.useState(io.getStats()),[c,u]=p.useState(0),{hasPermission:d}=Or(),[h,f]=p.useState(!1),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,w]=p.useState(!1),[b,_]=p.useState(!1),[k,j]=p.useState(!1),[N,O]=p.useState(!1),[I,P]=p.useState(!1),[S,D]=p.useState(""),[L,U]=p.useState(nn.getConfig()),[F,M]=p.useState(nn.getConfig()),[T,E]=p.useState(Bt.getConfig()),[$,A]=p.useState(Bt.getConfig()),B=H=>Number.isFinite(H)?H.toFixed(3).replace(/\.?0+$/,""):"",[R,C]=p.useState(()=>B(Bt.getConfig().minMultiplier)),[W,Q]=p.useState(()=>B(Bt.getConfig().maxMultiplier)),[X,Z]=p.useState({read:Bt.getMultiplier("read"),write:Bt.getMultiplier("write"),rpc:Bt.getMultiplier("rpc"),auth:Bt.getMultiplier("auth")});d("admin_panel.update"),p.useEffect(()=>{const H=setInterval(()=>{t(nn.getStats()),s(sD.getStats()),l(io.getStats()),U(nn.getConfig()),E(Bt.getConfig()),Z({read:Bt.getMultiplier("read"),write:Bt.getMultiplier("write"),rpc:Bt.getMultiplier("rpc"),auth:Bt.getMultiplier("auth")})},1e3),q=()=>{t(nn.getStats()),u(re=>re+1)};return nn.on("stateChange",q),nn.on("failure",q),nn.on("success",q),te(),()=>{clearInterval(H),nn.off(q)}},[]);const te=async()=>{try{const H=await i3();r(H)}catch(H){console.error("Failed to load metrics:",H)}},J=H=>{switch(H){case ac.CLOSED:return"bg-green-100 text-green-800 border-green-200";case ac.OPEN:return"bg-red-100 text-red-800 border-red-200";case ac.HALF_OPEN:return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ie=H=>{switch(H){case ac.CLOSED:return i.jsx(vf,{className:"h-5 w-5 text-green-600"});case ac.OPEN:return i.jsx(eo,{className:"h-5 w-5 text-red-600"});case ac.HALF_OPEN:return i.jsx(IT,{className:"h-5 w-5 text-yellow-600"});default:return null}},ge=()=>{f(!0)},ae=()=>{nn.reset(),t(nn.getStats()),u(H=>H+1),f(!1),D(" Circuit breaker berhasil direset!"),O(!0)},Re=()=>{g(!0)},me=()=>{nn.open(),t(nn.getStats()),u(H=>H+1),g(!1),D(" Circuit breaker telah dibuka! Semua request database akan diblokir."),O(!0)},K=()=>{x(!0)},de=async()=>{try{await gm.forceFlush(),x(!1),D(" Metrik berhasil dikirim ke database!"),O(!0)}catch(H){x(!1),D(" Gagal mengirim metrik: "+(H instanceof Error?H.message:"Unknown error")),P(!0)}},$e=()=>{M(nn.getConfig()),w(!0)},nt=()=>{nn.updateConfig(F),U(nn.getConfig()),w(!1),D(" Konfigurasi circuit breaker berhasil diperbarui!"),O(!0)},Ye=()=>{const H=Bt.getConfig();A(H),C(B(H.minMultiplier)),Q(B(H.maxMultiplier)),_(!0)},ft=()=>{Bt.updateConfig($),E(Bt.getConfig()),Z({read:Bt.getMultiplier("read"),write:Bt.getMultiplier("write"),rpc:Bt.getMultiplier("rpc"),auth:Bt.getMultiplier("auth")}),_(!1),D(" Konfigurasi adaptive rate limiter berhasil diperbarui!"),O(!0)},Ze=e.totalRequests>0?((e.totalRequests-e.failures)/e.totalRequests*100).toFixed(1):"0",ut=$.baseConfig.read.limit,ee=$.baseConfig.write.limit,qe=$.baseConfig.rpc.limit,dt=$.baseConfig.auth.limit,se=$.minMultiplier,ve=$.maxMultiplier,oe=$.healthyLatencyThreshold,Xe=$.stressLatencyThreshold,ke=$.adjustmentInterval,rt=Number.isFinite(ut)&&ut>=10&&ut<=1e3,bt=Number.isFinite(ee)&&ee>=5&&ee<=500,ue=Number.isFinite(qe)&&qe>=5&&qe<=200,Se=Number.isFinite(dt)&&dt>=2&&dt<=100,we=Number.isFinite(se)&&se>=.1&&se<=1,Te=Number.isFinite(ve)&&ve>=1&&ve<=5,je=Number.isFinite(oe)&&oe>=50&&oe<=1e3,Ee=Number.isFinite(Xe)&&Xe>=500&&Xe<=1e4,Ue=Number.isFinite(ke)&&ke>=1e4&&ke<=6e5;return Array.from({length:10},(H,q)=>({time:new Date(Date.now()-(9-q)*6e4).toLocaleTimeString(),requests:Math.floor(Math.random()*50)+10,failures:Math.floor(Math.random()*5)})),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold",children:"Circuit Breaker Status"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor database protection and performance"})]}),i.jsxs(ne,{variant:"outline",size:"sm",onClick:te,children:[i.jsx(Vx,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{className:"text-sm font-medium",children:i.jsx(fi,{label:"Circuit State",description:"Status circuit breaker saat ini: CLOSED (normal, semua request diizinkan), OPEN (terhenti, memblokir semua request untuk melindungi database), atau HALF_OPEN (testing, mencoba menghubungkan kembali)"})})}),i.jsxs(ct,{children:[i.jsxs("div",{className:`flex items-center gap-3 px-3 py-2 rounded-md border ${J(e.state)}`,children:[ie(e.state),i.jsx("span",{className:"font-semibold",children:e.state})]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Changed: ",new Date(e.stateChangedAt).toLocaleTimeString()]})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{className:"text-sm font-medium",children:i.jsx(fi,{label:"Success Rate",description:"Persentase request database yang berhasil dari total request. Indikator kesehatan sistem - semakin tinggi semakin baik. Nilai rendah menunjukkan masalah potensial dengan database atau koneksi"})})}),i.jsxs(ct,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Ze,"%"]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.totalRequests-e.failures," / ",e.totalRequests," requests"]})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{className:"text-sm font-medium",children:i.jsx(fi,{label:"Total Requests",description:"Jumlah total request database yang telah diproses sejak circuit breaker diinisialisasi. Termasuk request yang berhasil dan gagal"})})}),i.jsxs(ct,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:e.totalRequests.toLocaleString()}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.failures," failures, ",e.successes," successes"]})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{className:"text-sm font-medium",children:i.jsx(fi,{label:"Last Activity",description:"Waktu terakhir request database berhasil atau gagal. Membantu mengidentifikasi kapan masalah terakhir terjadi atau kapan sistem terakhir berfungsi normal"})})}),i.jsxs(ct,{children:[i.jsx("div",{className:"text-sm",children:e.lastSuccessTime?i.jsxs("div",{children:[i.jsx("span",{className:"text-green-600",children:"Last Success:"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.lastSuccessTime).toLocaleTimeString()})]}):null}),i.jsx("div",{className:"text-sm mt-2",children:e.lastFailureTime?i.jsxs("div",{children:[i.jsx("span",{className:"text-red-600",children:"Last Failure:"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.lastFailureTime).toLocaleTimeString()})]}):null})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(We,{children:[i.jsx(mt,{children:i.jsxs(ht,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(BT,{className:"h-4 w-4"}),i.jsx(fi,{label:"Request Queue",description:"Antrian request database yang menunggu untuk diproses. Membantu menangani beban tinggi dengan mengatur prioritas dan menghindari duplikasi request"})]})}),i.jsx(ct,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Queue Length:",i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Jumlah total request dalam antrian, termasuk yang menunggu dan sedang diproses"})})]}),i.jsx("span",{className:"font-semibold",children:a.queueLength})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Pending Requests:",i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Jumlah request yang menunggu untuk diproses, belum dieksekusi"})})]}),i.jsx("span",{className:"font-semibold",children:a.pendingRequests})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Processing:",i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Status apakah queue sedang memproses request atau idle"})})]}),i.jsx(At,{variant:a.processing?"default":"secondary",children:a.processing?"Yes":"No"})]})]})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsxs(ht,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(fo,{className:"h-4 w-4"}),i.jsx(fi,{label:"Rate Limiter (Adaptive)",description:"Sistem pembatas kecepatan request adaptif yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem. Melindungi database dari traffic spike dan overload"})]})}),i.jsxs(ct,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Reads Limit:",i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ye,{children:i.jsxs("p",{children:["Batas maksimal request baca data per menit (dinamis: ",Bt.getEffectiveLimit("read")," request/menit, ",(X.read*100).toFixed(0),"% dari base ",T.baseConfig.read.limit,"). Limit menyesuaikan otomatis berdasarkan kondisi sistem"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Bt.getEffectiveLimit("read"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(X.read*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Writes Limit:",i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ye,{children:i.jsxs("p",{children:["Batas maksimal request tulis data per menit (dinamis: ",Bt.getEffectiveLimit("write")," request/menit, ",(X.write*100).toFixed(0),"% dari base ",T.baseConfig.write.limit,"). Lebih ketat dari reads karena write lebih berisiko terhadap database"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Bt.getEffectiveLimit("write"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(X.write*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["RPC Limit:",i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ye,{children:i.jsxs("p",{children:["Batas maksimal panggilan fungsi database (RPC) per menit (dinamis: ",Bt.getEffectiveLimit("rpc")," request/menit, ",(X.rpc*100).toFixed(0),"% dari base ",T.baseConfig.rpc.limit,"). Fungsi database biasanya lebih berat dari query biasa"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Bt.getEffectiveLimit("rpc"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(X.rpc*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Auth Limit:",i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ye,{children:i.jsxs("p",{children:["Batas maksimal operasi autentikasi per menit (dinamis: ",Bt.getEffectiveLimit("auth")," request/menit, ",(X.auth*100).toFixed(0),"% dari base ",T.baseConfig.auth.limit,")"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Bt.getEffectiveLimit("auth"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(X.auth*100).toFixed(0),"%)"]})]})]})]}),i.jsx("div",{className:"mt-3 pt-3 border-t text-xs text-muted-foreground",children:i.jsx("p",{children:" Limit berubah otomatis berdasarkan response time dan error rate sistem"})})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsxs(ht,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(gw,{className:"h-4 w-4"}),i.jsx(fi,{label:"Cache",description:"Sistem penyimpanan sementara untuk hasil query database. Mengurangi beban database dengan menyimpan hasil yang sering digunakan dan meningkatkan kecepatan response"})]})}),i.jsx(ct,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Cached Entries:",i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Jumlah hasil query yang saat ini tersimpan di cache. Semakin banyak semakin baik untuk performa, selama tidak melebihi batas maksimal"})})]}),i.jsx("span",{className:"font-semibold",children:o.size})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Max Size:",i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ye,{children:i.jsx("p",{children:"Batas maksimal jumlah entry yang bisa disimpan di cache. Setelah mencapai limit, entry lama akan dihapus (LRU policy)"})})]}),i.jsx("span",{className:"font-semibold",children:o.maxSize})]}),i.jsx(ne,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>{io.clear(),l(io.getStats())},children:"Clear Cache"})]})})]})]}),n&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{className:"text-sm font-medium",children:i.jsx(fi,{label:"Operations by Type",description:"Distribusi operasi database berdasarkan jenis (read, write, RPC, auth). Membantu memahami pola penggunaan database dan mengidentifikasi jenis operasi yang paling banyak digunakan"})})}),i.jsx(ct,{className:"h-64",children:i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:Object.entries(n.operationsByType||{}).map(([H,q])=>({type:H,count:q})),children:[i.jsx(iS,{strokeDasharray:"3 3"}),i.jsx(ca,{dataKey:"type"}),i.jsx(ua,{}),i.jsx(sr,{}),i.jsx(Kn,{dataKey:"count",fill:oD[1]})]})})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{className:"text-sm font-medium",children:i.jsx(fi,{label:"Circuit Breaker States",description:"Distribusi status circuit breaker saat operasi database dilakukan. Menunjukkan berapa banyak operasi yang terjadi pada setiap state (CLOSED, OPEN, HALF_OPEN)"})})}),i.jsx(ct,{className:"h-64",children:i.jsx(pi,{width:"100%",height:"100%",children:i.jsxs(gi,{data:Object.entries(n.circuitBreakerStates||{}).map(([H,q])=>({state:H,count:q})),children:[i.jsx(iS,{strokeDasharray:"3 3"}),i.jsx(ca,{dataKey:"state"}),i.jsx(ua,{}),i.jsx(sr,{}),i.jsx(Kn,{dataKey:"count",fill:oD[3]})]})})})]})]}),i.jsxs(Zt,{permission:"admin_panel.update",children:[i.jsxs(We,{className:"mb-4",children:[i.jsx(mt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ht,{className:"text-sm font-medium",children:i.jsx(fi,{label:"Limit Configuration",description:"Konfigurasi threshold dan timeout untuk circuit breaker. Klik Edit untuk mengubah nilai-nilai ini"})}),i.jsxs(ne,{variant:"outline",size:"sm",onClick:$e,children:[i.jsx(Aa,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),i.jsx(ct,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"Failure Threshold"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsxs("p",{children:["Buka circuit setelah ",L.failureThreshold," kegagalan"]})})]})]}),i.jsx(ot,{value:L.failureThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Buka circuit setelah ",L.failureThreshold," kegagalan"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"Reset Timeout (ms)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsxs("p",{children:["Tunggu ",(L.resetTimeout/1e3).toFixed(0),"s sebelum uji pemulihan"]})})]})]}),i.jsx(ot,{value:L.resetTimeout,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tunggu ",(L.resetTimeout/1e3).toFixed(0),"s sebelum uji pemulihan"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"Success Threshold"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsxs("p",{children:["Tutup circuit setelah ",L.successThreshold," sukses"]})})]})]}),i.jsx(ot,{value:L.successThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tutup circuit setelah ",L.successThreshold," sukses"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"Monitoring Period (ms)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsxs("p",{children:["Jendela waktu: ",(L.monitoringPeriod/1e3).toFixed(0),"s"]})})]})]}),i.jsx(ot,{value:L.monitoringPeriod,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Jendela waktu: ",(L.monitoringPeriod/1e3).toFixed(0),"s"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"Request Timeout (ms)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsxs("p",{children:["Timeout request: ",(L.timeout/1e3).toFixed(0),"s"]})})]})]}),i.jsx(ot,{value:L.timeout,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Timeout request: ",(L.timeout/1e3).toFixed(0),"s"]})]})]})})]}),i.jsxs(We,{className:"mb-4",children:[i.jsx(mt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(ht,{className:"text-sm font-medium",children:i.jsx(fi,{label:"Adaptive Rate Limiter Configuration",description:"Konfigurasi untuk adaptive rate limiter yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem. Menangani traffic spike dengan lebih baik"})}),i.jsxs(ne,{variant:"outline",size:"sm",onClick:Ye,children:[i.jsx(Aa,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),i.jsxs(ct,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"Reads Base Limit"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Limit dasar untuk operasi read. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(ot,{value:T.baseConfig.read.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Bt.getEffectiveLimit("read"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(X.read*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"Writes Base Limit"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Limit dasar untuk operasi write. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(ot,{value:T.baseConfig.write.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Bt.getEffectiveLimit("write"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(X.write*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"RPC Base Limit"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Limit dasar untuk operasi RPC. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(ot,{value:T.baseConfig.rpc.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Bt.getEffectiveLimit("rpc"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(X.rpc*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"Auth Base Limit"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Limit dasar untuk operasi autentikasi. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(ot,{value:T.baseConfig.auth.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Bt.getEffectiveLimit("auth"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(X.auth*100).toFixed(0),"%)"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 pt-4 border-t",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"Min Multiplier"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Multiplier minimum (misal: 0.5 = 50% dari base limit). Digunakan saat sistem dalam kondisi stres"})})]})]}),i.jsx(ot,{value:T.minMultiplier,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Minimum: ",(T.minMultiplier*100).toFixed(0),"% dari base"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"Max Multiplier"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Multiplier maksimum (misal: 2.0 = 200% dari base limit). Digunakan saat sistem dalam kondisi sehat"})})]})]}),i.jsx(ot,{value:T.maxMultiplier,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum: ",(T.maxMultiplier*100).toFixed(0),"% dari base"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"Healthy Latency Threshold (ms)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Response time di bawah ini dianggap sehat. Sistem akan meningkatkan limit (min: 50ms, max: 1000ms)"})})]})]}),i.jsx(ot,{value:T.healthyLatencyThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(T.healthyLatencyThreshold/1e3).toFixed(1)," seconds"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"Stress Latency Threshold (ms)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Response time di atas ini dianggap stres. Sistem akan menurunkan limit (min: 500ms, max: 10000ms)"})})]})]}),i.jsx(ot,{value:T.stressLatencyThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(T.stressLatencyThreshold/1e3).toFixed(1)," seconds"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tt,{className:"text-xs text-muted-foreground",children:"Adjustment Interval (ms)"}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Frekuensi pengecekan dan penyesuaian limit (dalam milliseconds)"})})]})]}),i.jsx(ot,{value:T.adjustmentInterval,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Setiap ",(T.adjustmentInterval/1e3).toFixed(0)," detik"]})]})]}),i.jsx("div",{className:"mt-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:[" ",i.jsx("strong",{children:"Status:"})," Adaptive rate limiter aktif dan melindungi database. Limit akan otomatis menyesuaikan berdasarkan metrik sistem (response time, error rate)."]})})]})]}),i.jsx(We,{className:"mb-4 bg-blue-50 dark:bg-blue-950/10 border-blue-200 dark:border-blue-800",children:i.jsx(mt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs(ht,{className:"text-sm font-medium flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[i.jsx(_v,{className:"h-5 w-5"}),"Dokumentasi Circuit Breaker"]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pelajari cara kerja circuit breaker dan apa yang harus dilakukan jika terjadi masalah"})]}),i.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>j(!0),children:[i.jsx(_v,{className:"h-4 w-4 mr-2"}),"Lihat Dokumentasi Circuit Breaker"]})]})})}),i.jsxs(We,{className:"border-red-200 dark:border-red-800",children:[i.jsx(mt,{children:i.jsxs(ht,{className:"text-sm font-medium flex items-center gap-2 text-red-600 dark:text-red-400",children:[i.jsx(v4,{className:"h-5 w-5"}),i.jsx(fi,{label:"Danger Zone",description:"Tindakan berbahaya yang dapat mempengaruhi seluruh aplikasi. Gunakan dengan sangat hati-hati!"})]})}),i.jsxs(ct,{children:[i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"outline",onClick:ge,children:"Reset Circuit Breaker"})}),i.jsx(ye,{children:i.jsx("p",{children:"Reset semua statistik dan state circuit breaker ke kondisi awal. Menghapus riwayat kegagalan dan mengembalikan state ke CLOSED"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"destructive",onClick:Re,children:"Manually Open Circuit"})}),i.jsx(ye,{children:i.jsx("p",{children:"Paksa buka circuit breaker secara manual. Akan MEMBLOKIR SEMUA REQUEST DATABASE dan menyebabkan aplikasi berhenti berfungsi. Gunakan hanya dalam keadaan darurat!"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(ne,{variant:"outline",onClick:K,children:"Flush Metrics"})}),i.jsx(ye,{children:i.jsx("p",{children:"Kirim semua metrik yang tertunda ke database secara paksa. Tidak berbahaya, hanya memperbarui data metrik di Supabase"})})]})]}),i.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-red-700 dark:text-red-300 font-semibold",children:[" ",i.jsx("strong",{children:"PERINGATAN KRITIS:"})," Tindakan di zona ini dapat menghentikan seluruh aplikasi dan memblokir semua operasi database. Gunakan dengan sangat hati-hati dan hanya jika benar-benar diperlukan!"]})})]})]})]}),i.jsx(gn,{open:h,onOpenChange:f,children:i.jsxs(ln,{className:"max-w-md",children:[i.jsxs(cn,{children:[i.jsxs(un,{className:"flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-orange-500"}),"Reset Circuit Breaker"]}),i.jsx(Ur,{children:"Apakah Anda yakin ingin mereset circuit breaker?"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-orange-800 dark:text-orange-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-orange-700 dark:text-orange-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Menghapus semua statistik circuit breaker"}),i.jsx("li",{children:"Mereset state ke CLOSED"}),i.jsx("li",{children:"Menghapus riwayat kegagalan"})]}),i.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-3 font-semibold",children:" Tindakan ini TIDAK DAPAT DIBATALKAN!"})]})}),i.jsxs(Na,{children:[i.jsx(ne,{variant:"outline",onClick:()=>f(!1),children:"Batal"}),i.jsx(ne,{variant:"default",onClick:ae,children:"Reset"})]})]})}),i.jsx(gn,{open:m,onOpenChange:g,children:i.jsxs(ln,{className:"max-w-md",children:[i.jsxs(cn,{children:[i.jsxs(un,{className:"flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-red-500"}),"Buka Circuit Breaker Secara Manual"]}),i.jsx(Ur,{children:"PERINGATAN KRITIS: Tindakan ini sangat berbahaya!"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-red-800 dark:text-red-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-red-700 dark:text-red-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:i.jsx("strong",{children:"MENGHENTIKAN SEMUA REQUEST DATABASE"})}),i.jsx("li",{children:"Memblokir semua operasi aplikasi"}),i.jsx("li",{children:"Menyebabkan error pada semua fitur yang membutuhkan database"})]}),i.jsxs("div",{className:"mt-3 bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded p-2",children:[i.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 font-semibold",children:" APLIKASI AKAN BERHENTI BERFUNGSI!"}),i.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"Gunakan hanya dalam keadaan darurat atau untuk testing."})]})]})}),i.jsxs(Na,{children:[i.jsx(ne,{variant:"outline",onClick:()=>g(!1),children:"Batal"}),i.jsx(ne,{variant:"destructive",onClick:me,children:"Buka Circuit"})]})]})}),i.jsx(gn,{open:v,onOpenChange:x,children:i.jsxs(ln,{className:"max-w-md",children:[i.jsxs(cn,{children:[i.jsxs(un,{className:"flex items-center gap-2",children:[i.jsx(gw,{className:"h-5 w-5 text-blue-500"}),"Kirim Metrik ke Database"]}),i.jsx(Ur,{children:"Apakah Anda yakin ingin mengirim semua metrik yang tertunda?"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-blue-800 dark:text-blue-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Mengirim semua metrik yang tersimpan di memori ke Supabase"}),i.jsx("li",{children:"Memperbarui tabel circuit_breaker_metrics"}),i.jsx("li",{children:"Menghapus metrik dari antrian lokal"})]})]})}),i.jsxs(Na,{children:[i.jsx(ne,{variant:"outline",onClick:()=>x(!1),children:"Batal"}),i.jsx(ne,{variant:"default",onClick:de,children:"Kirim Metrik"})]})]})}),i.jsx(gn,{open:N,onOpenChange:O,children:i.jsxs(ln,{className:"max-w-md",children:[i.jsx(cn,{children:i.jsxs(un,{className:"flex items-center gap-2",children:[i.jsx(vf,{className:"h-5 w-5 text-green-500"}),"Berhasil"]})}),i.jsx("div",{className:"py-4",children:i.jsx("p",{className:"text-sm",children:S})}),i.jsx(Na,{children:i.jsx(ne,{variant:"default",onClick:()=>O(!1),children:"Tutup"})})]})}),i.jsx(gn,{open:k,onOpenChange:j,children:i.jsxs(ln,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(cn,{children:[i.jsxs(un,{className:"flex items-center gap-2",children:[i.jsx(_v,{className:"h-5 w-5 text-blue-500"}),"Dokumentasi Circuit Breaker"]}),i.jsx(Ur,{children:"Panduan lengkap tentang cara kerja circuit breaker dan langkah-langkah troubleshooting"})]}),i.jsxs("div",{className:"py-4 space-y-6",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(fo,{className:"h-5 w-5 text-blue-600"}),"Apa itu Circuit Breaker?"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-2",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Circuit Breaker"})," adalah mekanisme perlindungan yang mencegah kegagalan sistem database merambat ke seluruh aplikasi. Seperti sekring listrik, circuit breaker akan memutuskan koneksi sementara ketika mendeteksi terlalu banyak kegagalan, sehingga memberikan waktu untuk sistem pulih dan mencegah beban berlebih."]}),i.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"Melindungi database dari beban berlebih dan kegagalan cascade"}),i.jsx("li",{children:"Mengurangi risiko aplikasi crash saat database bermasalah"}),i.jsx("li",{children:"Memberikan waktu recovery otomatis untuk sistem"}),i.jsx("li",{children:"Monitoring dan pelaporan metrik untuk analisis"})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Aa,{className:"h-5 w-5 text-blue-600"}),"Penjelasan Detail Setiap Input Circuit Breaker"]}),i.jsx("div",{className:"space-y-4",children:i.jsx("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:i.jsxs("div",{className:"text-sm space-y-4 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"1. Failure Threshold (Ambang Kegagalan)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jumlah maksimal kegagalan yang dapat terjadi dalam jendela waktu monitoring sebelum circuit breaker terbuka (OPEN)."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Failure Threshold: ",L.failureThreshold]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 5 kegagalan (range: 1 - 100)",i.jsx("br",{})," Sistem akan menghitung jumlah kegagalan dalam jendela waktu ",(L.monitoringPeriod/1e3).toFixed(0)," detik",i.jsx("br",{})," Jika mencapai ",L.failureThreshold," kegagalan atau lebih  Circuit breaker akan ",i.jsx("strong",{children:"OPEN"})," (blokir semua request)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah kegagalan cascade dengan memblokir request sebelum sistem benar-benar crash",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu rendah (1-3): Circuit breaker terlalu sensitif, sering terbuka karena error sementara",i.jsx("br",{}),"- Nilai terlalu tinggi (20+): Circuit breaker kurang responsif, database bisa overload sebelum terbuka",i.jsx("br",{}),"- Rekomendasi: 5-10 untuk aplikasi production, 3-5 untuk aplikasi kritis",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Jika threshold = ",L.failureThreshold,", dan terjadi ",L.failureThreshold," timeout/error dalam ",(L.monitoringPeriod/1e3).toFixed(0)," detik terakhir  Circuit OPEN"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"2. Reset Timeout (Waktu Tunggu Reset)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Waktu yang harus ditunggu setelah circuit breaker OPEN sebelum mencoba uji pemulihan (transisi ke HALF_OPEN)."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Reset Timeout: ",(L.resetTimeout/1e3).toFixed(0)," detik (",L.resetTimeout,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 30 detik (30000ms, range: 5s - 600s)",i.jsx("br",{})," Setelah circuit OPEN, sistem akan menunggu ",L.resetTimeout/1e3," detik sebelum mencoba uji pemulihan",i.jsx("br",{})," Setelah timeout, circuit breaker akan transisi ke ",i.jsx("strong",{children:"HALF_OPEN"})," (mengizinkan beberapa request terbatas untuk testing)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memberi waktu database untuk recovery sebelum mengizinkan request lagi",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (5-10s): Tidak cukup waktu untuk recovery, circuit langsung terbuka lagi",i.jsx("br",{}),"- Nilai terlalu panjang (300s+): Aplikasi terlalu lama tidak bisa digunakan",i.jsx("br",{}),"- Rekomendasi: 30-60 detik untuk masalah network sementara, 60-120 detik untuk masalah database serius",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Circuit OPEN  Tunggu ",L.resetTimeout/1e3," detik  Uji dengan ",L.successThreshold," request terbatas  Jika semua sukses, kembali CLOSED"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"3. Success Threshold (Ambang Keberhasilan)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jumlah minimal request yang harus berhasil berturut-turut dalam fase HALF_OPEN sebelum circuit breaker kembali CLOSED."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Success Threshold: ",L.successThreshold]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 2 sukses berturut-turut (range: 1 - 10)",i.jsx("br",{})," Setelah circuit HALF_OPEN (uji pemulihan), sistem akan mengizinkan beberapa request terbatas",i.jsx("br",{})," Jika ",L.successThreshold," request berhasil berturut-turut  Circuit breaker akan ",i.jsx("strong",{children:"CLOSED"})," (kembali normal)",i.jsx("br",{})," Jika ada 1 request gagal  Circuit breaker kembali ",i.jsx("strong",{children:"OPEN"})," (tunggu reset timeout lagi)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memastikan sistem benar-benar pulih sebelum mengizinkan semua request",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu rendah (1): Terlalu mudah kembali CLOSED, bisa langsung OPEN lagi",i.jsx("br",{}),"- Nilai terlalu tinggi (5+): Terlalu lama di HALF_OPEN, memperlambat recovery",i.jsx("br",{}),"- Rekomendasi: 2-3 untuk aplikasi production",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Circuit HALF_OPEN  Request 1 sukses  Request 2 sukses (",L.successThreshold," tercapai)  Circuit CLOSED"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"4. Monitoring Period (Jendela Waktu Monitoring)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jendela waktu (sliding window) untuk menghitung jumlah kegagalan. Hanya kegagalan dalam jendela waktu ini yang dihitung untuk menentukan apakah circuit harus terbuka."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Monitoring Period: ",(L.monitoringPeriod/1e3).toFixed(0)," detik (",L.monitoringPeriod,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 10 detik (10000ms, range: 5s - 300s)",i.jsx("br",{})," Sistem hanya menghitung kegagalan yang terjadi dalam ",(L.monitoringPeriod/1e3).toFixed(0)," detik terakhir",i.jsx("br",{})," Kegagalan yang lebih lama dari ",(L.monitoringPeriod/1e3).toFixed(0)," detik tidak dihitung (expired)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah kegagalan lama mempengaruhi keputusan saat ini, fokus pada kondisi terbaru",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (5s): Terlalu fokus pada kondisi saat ini, tidak melihat tren",i.jsx("br",{}),"- Nilai terlalu panjang (60s+): Kegagalan lama masih mempengaruhi, recovery lebih lambat",i.jsx("br",{}),"- Rekomendasi: 10-30 detik untuk balance antara responsivitas dan stabilitas",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Jika monitoring period = ",(L.monitoringPeriod/1e3).toFixed(0),"s, dan terjadi ",L.failureThreshold," kegagalan dalam ",(L.monitoringPeriod/1e3).toFixed(0)," detik terakhir  Circuit OPEN. Kegagalan yang lebih dari ",(L.monitoringPeriod/1e3).toFixed(0)," detik tidak dihitung."]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"5. Request Timeout (Waktu Maksimal Request)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Waktu maksimal yang diizinkan untuk setiap request database. Request yang melebihi timeout ini akan dianggap gagal dan dibatalkan."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Request Timeout: ",(L.timeout/1e3).toFixed(0)," detik (",L.timeout,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 10 detik (10000ms, range: 1s - 60s)",i.jsx("br",{})," Setiap request database akan dibatalkan jika melebihi ",(L.timeout/1e3).toFixed(0)," detik dan dianggap gagal",i.jsx("br",{})," Timeout ini diterapkan sebelum request mencapai database (client-side timeout)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah request yang hang/tidak merespons menumpuk dan membebani sistem",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (1-3s): Request normal bisa dianggap gagal, false positive tinggi",i.jsx("br",{}),"- Nilai terlalu panjang (30s+): Request hang akan menunggu terlalu lama, resource terbuang",i.jsx("br",{}),"- Rekomendasi:",i.jsx("br",{})," Read queries: 5-10 detik",i.jsx("br",{})," Write queries: 10-15 detik",i.jsx("br",{})," RPC/complex queries: 15-30 detik",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Request dimulai  Jika belum selesai dalam ",(L.timeout/1e3).toFixed(0)," detik  Request dibatalkan  Dianggap gagal  Dihitung untuk failure threshold"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"6. Cara Kerja Bersama-Sama"}),i.jsx("p",{className:"mt-1 mb-2",children:"Semua parameter ini bekerja bersama untuk melindungi database dengan cara yang terkoordinasi."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{className:"text-xs space-y-2",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Alur Lengkap:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Request masuk  Sistem cek ",i.jsx("strong",{children:"Request Timeout"})," (max ",(L.timeout/1e3).toFixed(0),"s)"]}),i.jsx("li",{children:"Request dieksekusi  Jika melebihi timeout  Dianggap gagal"}),i.jsxs("li",{children:["Kegagalan dicatat dalam ",i.jsx("strong",{children:"Monitoring Period"})," (",(L.monitoringPeriod/1e3).toFixed(0),"s terakhir)"]}),i.jsx("li",{children:"Sistem hitung total kegagalan dalam jendela waktu"}),i.jsxs("li",{children:["Jika mencapai ",i.jsx("strong",{children:"Failure Threshold"})," (",L.failureThreshold," kegagalan)  Circuit OPEN"]}),i.jsxs("li",{children:["Tunggu ",i.jsx("strong",{children:"Reset Timeout"})," (",(L.resetTimeout/1e3).toFixed(0),"s)  Transisi ke HALF_OPEN"]}),i.jsxs("li",{children:["Uji dengan beberapa request  Jika ",i.jsx("strong",{children:"Success Threshold"})," (",L.successThreshold," sukses) tercapai  CLOSED"]}),i.jsx("li",{children:"Jika gagal dalam HALF_OPEN  Kembali OPEN, tunggu reset timeout lagi"})]})]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-green-700 dark:text-green-300",children:[i.jsx("strong",{children:" Contoh Skenario:"}),i.jsx("br",{}),"1. 5 request gagal (timeout) dalam 10 detik  Threshold tercapai (",L.failureThreshold,")",i.jsx("br",{}),"2. Circuit OPEN  Semua request diblokir",i.jsx("br",{}),"3. Tunggu ",L.resetTimeout/1e3," detik  Database punya waktu recovery",i.jsx("br",{}),"4. Circuit HALF_OPEN  Uji dengan 2 request",i.jsx("br",{}),"5. Kedua request sukses (",L.successThreshold,")  Circuit CLOSED  Kembali normal"]})})]})})]})]})})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(BT,{className:"h-5 w-5 text-blue-600"}),"Bagaimana Circuit Breaker Bekerja?"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-blue-800 dark:text-blue-200",children:"Tiga Status Circuit Breaker:"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(vf,{className:"h-5 w-5 text-green-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"CLOSED (Tertutup)"}),i.jsx("p",{className:"text-muted-foreground",children:"Status normal. Semua request database diizinkan. Circuit breaker memantau setiap request dan menghitung kegagalan dalam jendela waktu tertentu."})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(eo,{className:"h-5 w-5 text-red-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-red-700 dark:text-red-300",children:"OPEN (Terbuka)"}),i.jsxs("p",{className:"text-muted-foreground",children:["Circuit breaker mendeteksi terlalu banyak kegagalan ( ",L.failureThreshold," dalam ",(L.monitoringPeriod/1e3).toFixed(0)," detik). Semua request database diblokir untuk melindungi sistem. Status ini akan bertahan selama ",L.resetTimeout/1e3," detik sebelum mencoba uji pemulihan."]})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(IT,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-yellow-700 dark:text-yellow-300",children:"HALF_OPEN (Setengah Terbuka)"}),i.jsxs("p",{className:"text-muted-foreground",children:["Fase uji pemulihan. Setelah ",L.resetTimeout/1e3," detik di status OPEN, circuit breaker mengizinkan beberapa request terbatas untuk mengecek apakah sistem sudah pulih. Jika ",L.successThreshold," request berhasil berturut-turut, kembali ke CLOSED. Jika gagal, kembali ke OPEN."]})]})]})]})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-purple-800 dark:text-purple-200",children:"Alur Kerja:"}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"1."}),i.jsx("span",{children:"Request database masuk  Circuit breaker memeriksa status"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"2."}),i.jsx("span",{children:"Jika CLOSED  Request diizinkan dan dimonitor"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"3."}),i.jsxs("span",{children:["Jika terjadi kegagalan  Dihitung dalam jendela waktu ",(L.monitoringPeriod/1e3).toFixed(0)," detik"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"4."}),i.jsxs("span",{children:["Jika  ",L.failureThreshold," kegagalan  Beralih ke OPEN (blokir semua request)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"5."}),i.jsxs("span",{children:["Tunggu ",L.resetTimeout/1e3," detik  Beralih ke HALF_OPEN (uji pemulihan)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"6."}),i.jsxs("span",{children:["Jika ",L.successThreshold," sukses  Kembali ke CLOSED. Jika gagal  Kembali ke OPEN"]})]})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-orange-600"}),"Apa yang Harus Dilakukan Jika Circuit Breaker Terbuka (OPEN)?"]}),i.jsx("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 space-y-3",children:i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"1. Jangan Panik - Ini Tindakan Perlindungan Otomatis"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Circuit breaker terbuka adalah mekanisme perlindungan yang bekerja secara otomatis. Aplikasi sengaja memblokir request untuk mencegah database crash."})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"2. Identifikasi Penyebab Masalah"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Periksa kemungkinan penyebab:"}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsx("li",{children:"Database server sedang down atau overload"}),i.jsx("li",{children:"Koneksi network bermasalah"}),i.jsx("li",{children:"Query database terlalu lambat (timeout)"}),i.jsx("li",{children:"Terlalu banyak request bersamaan (adaptive rate limiter sedang mengurangi limit)"}),i.jsx("li",{children:"Masalah pada Supabase (jika menggunakan Supabase)"})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"3. Periksa Metrik dan Log"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:'Lihat bagian "Metrics Charts" untuk memahami:'}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsx("li",{children:"Jenis operasi yang paling banyak gagal (read/write/RPC)"}),i.jsx("li",{children:"Error category yang dominan (network/timeout/database)"}),i.jsx("li",{children:"Response time rata-rata sebelum circuit terbuka"})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"4. Tunggu Pemulihan Otomatis"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Circuit breaker akan otomatis mencoba uji pemulihan setelah ",L.resetTimeout/1e3," detik. Jika sistem sudah pulih, akan kembali ke status CLOSED secara otomatis."]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"5. Tindakan Manual (Jika Diperlukan)"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Jika masalah berlanjut setelah beberapa siklus recovery:"}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Reset Circuit Breaker:"})," Hapus statistik dan mulai fresh (gunakan dengan hati-hati)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Periksa Status Database:"})," Pastikan database server berjalan normal"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Hubungi Tim DevOps/Database:"})," Jika masalah bersifat infrastruktur"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Review Query Performance:"})," Optimalkan query yang lambat"]})]})]})]})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(fo,{className:"h-5 w-5 text-purple-600"}),"Adaptive Rate Limiter: Menangani Traffic Spike"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-purple-800 dark:text-purple-200",children:"Apa itu Adaptive Rate Limiter?"}),i.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:[i.jsx("strong",{children:"Adaptive Rate Limiter"})," adalah sistem pembatas kecepatan yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem database. Berbeda dengan rate limiter statis yang memiliki limit tetap, adaptive rate limiter akan:"]}),i.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Meningkatkan limit"})," saat sistem dalam kondisi sehat (response time rendah, error rate rendah)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Menurunkan limit"})," saat sistem dalam kondisi stres (response time tinggi, error rate tinggi)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Melindungi database"})," dari traffic spike dan overload dengan penyesuaian otomatis"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Mengurangi false positives"})," dengan memberikan waktu recovery sebelum circuit breaker terbuka"]})]})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-green-800 dark:text-green-200",children:"Bagaimana Menangani Traffic Spike?"}),i.jsxs("div",{className:"text-sm space-y-3",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"1. Deteksi Traffic Spike"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Saat traffic spike terjadi, database mulai lambat (response time meningkat) atau terjadi error rate tinggi. Adaptive rate limiter memantau metrik ini setiap ",T.adjustmentInterval/1e3," detik dari tabel ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:"circuit_breaker_metrics"})," di Supabase."]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"2. Penyesuaian Otomatis"}),i.jsxs("div",{className:"mt-2 space-y-2",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-2",children:[i.jsxs("strong",{className:"text-xs",children:["Sistem Sehat (Response Time < ",T.healthyLatencyThreshold,"ms, Error < 5%):"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" Limit meningkat hingga ",(T.maxMultiplier*100).toFixed(0),"% dari base limit",i.jsx("br",{})," Contoh: Reads base ",T.baseConfig.read.limit,"/min dapat naik hingga ",Math.round(T.baseConfig.read.limit*T.maxMultiplier),"/min"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-2",children:[i.jsxs("strong",{className:"text-xs",children:["Sistem Stres (Response Time > ",T.stressLatencyThreshold,"ms atau Error > 20%):"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" Limit menurun hingga ",(T.minMultiplier*100).toFixed(0),"% dari base limit",i.jsx("br",{})," Contoh: Reads base ",T.baseConfig.read.limit,"/min dapat turun hingga ",Math.round(T.baseConfig.read.limit*T.minMultiplier),"/min",i.jsx("br",{})," Memberi waktu recovery untuk database tanpa langsung memicu circuit breaker OPEN"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"3. Skenario Traffic Spike"}),i.jsxs("div",{className:"mt-2 space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"A."}),i.jsxs("div",{children:[i.jsx("strong",{children:"Spike Normal (Dapat Dihandle):"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Request melonjak  Rate limiter dengan limit adaptif menangani sebagian request  Jika masih dalam batas, semua diizinkan  Jika melebihi, request diblokir dengan HTTP 429"})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"B."}),i.jsxs("div",{children:[i.jsx("strong",{children:"Spike Besar (Database Mulai Lambat):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Response time naik di atas ",T.stressLatencyThreshold,"ms  Adaptive limiter turunkan limit secara bertahap  Memberi waktu database pulih  Mencegah circuit breaker langsung OPEN"]})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"C."}),i.jsxs("div",{children:[i.jsx("strong",{children:"DDoS/Attack:"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Ribuan request masuk  Adaptive limiter turunkan limit drastis (hingga ",(T.minMultiplier*100).toFixed(0),"%)  Sebagian besar request diblokir  Database terlindungi  Circuit breaker OPEN sebagai last resort jika masih gagal"]})]})]})]})]})]})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-3 text-red-800 dark:text-red-200",children:" Input Konfigurasi untuk Traffic Spike & DDoS Protection"}),i.jsxs("div",{className:"text-sm space-y-3 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-red-700 dark:text-red-300 text-base",children:"Input Utama untuk Perlindungan:"}),i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-red-500",children:[i.jsx("strong",{className:"text-sm text-red-700 dark:text-red-300",children:"1. Min Multiplier (PALING PENTING untuk DDoS)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Min Multiplier = ",(T.minMultiplier*100).toFixed(0),"% (range: 0.1 - 1.0)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Menentukan seberapa rendah limit dapat turun saat sistem diserang",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (0.1-0.3) = Limit turun drastis  90-70% request diblokir  ",i.jsx("strong",{children:"SANGAT EFEKTIF"}),i.jsx("br",{}),"- Nilai sedang (0.4-0.6) = Limit turun sedang  60-40% request diblokir  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Nilai tinggi (0.7-1.0) = Limit turun sedikit  30-0% request diblokir  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 0.1 - 0.3 (10-30% dari base limit)",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Base Reads = ",T.baseConfig.read.limit,"/min, Min Multiplier = ",T.minMultiplier,"  Limit minimum = ",Math.round(T.baseConfig.read.limit*T.minMultiplier),"/min saat diserang"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-orange-500",children:[i.jsx("strong",{className:"text-sm text-orange-700 dark:text-orange-300",children:"2. Stress Latency Threshold (Deteksi Serangan)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Stress Latency Threshold = ",T.stressLatencyThreshold,"ms (range: 500ms - 10000ms)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Mendeteksi kapan sistem mulai stres/overload akibat traffic spike",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (500-1000ms) = Deteksi cepat saat serangan  Limit turun cepat  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Nilai sedang (1000-2000ms) = Deteksi sedang  ",i.jsx("strong",{children:"SEIMBANG"}),i.jsx("br",{}),"- Nilai tinggi (3000ms+) = Deteksi lambat  Database bisa crash dulu  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 500-1000ms (deteksi cepat)",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Saat DDoS, response time naik cepat  Jika ",">"," ",T.stressLatencyThreshold,"ms  Sistem langsung turunkan limit"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-yellow-500",children:[i.jsx("strong",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"3. Base Limits (Garis Pertahanan Awal)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Base Limits untuk Reads/Writes/RPC/Auth",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Limit dasar sebelum penyesuaian adaptif",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Base limit rendah = Kurang request yang diizinkan  Lebih aman tapi bisa blokir user normal",i.jsx("br",{}),"- Base limit tinggi = Lebih banyak request diizinkan  Lebih toleran tapi kurang proteksi",i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"}),i.jsx("br",{}),"- Reads: 50-100/min (default: ",T.baseConfig.read.limit,"/min)",i.jsx("br",{}),"- Writes: 20-30/min (default: ",T.baseConfig.write.limit,"/min)",i.jsx("br",{}),"- RPC: 10-20/min (default: ",T.baseConfig.rpc.limit,"/min)",i.jsx("br",{}),"- Auth: 5-10/min (default: ",T.baseConfig.auth.limit,"/min)",i.jsx("br",{})," ",i.jsx("strong",{children:"Penting:"})," Base limit ini akan dikalikan dengan min multiplier saat serangan, jadi limit efektif minimum = base  min multiplier"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-blue-500",children:[i.jsx("strong",{className:"text-sm text-blue-700 dark:text-blue-300",children:"4. Adjustment Interval (Kecepatan Respons)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Adjustment Interval = ",T.adjustmentInterval/1e3,"s (range: 10s - 600s)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Seberapa sering sistem memeriksa kondisi dan menyesuaikan limit",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Interval pendek (10-30s) = Respons cepat  Limit turun cepat saat serangan  ",i.jsx("strong",{children:"SANGAT EFEKTIF"}),i.jsx("br",{}),"- Interval sedang (30-60s) = Respons seimbang  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Interval panjang (60s+) = Respons lambat  Serangan bisa damage dulu  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 10-30 detik (respons cepat)",i.jsx("br",{})," ",i.jsx("strong",{children:"Catatan:"})," Interval terlalu pendek (","<"," 10s) bisa menyebabkan limit berubah-ubah terlalu sering"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-purple-500",children:[i.jsx("strong",{className:"text-sm text-purple-700 dark:text-purple-300",children:"5. Circuit Breaker Failure Threshold (Last Resort)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Failure Threshold = ",L.failureThreshold," (range: 1-100)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Jika adaptive rate limiter tidak cukup, circuit breaker akan OPEN dan blokir SEMUA request",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (3-5) = Circuit terbuka cepat  Semua request diblokir  ",i.jsx("strong",{children:"SANGAT PROTEKTIF"}),i.jsx("br",{}),"- Nilai sedang (5-10) = Balance  ",i.jsx("strong",{children:"SEIMBANG"}),i.jsx("br",{}),"- Nilai tinggi (10+) = Circuit lambat terbuka  Database bisa crash dulu  ",i.jsx("strong",{children:"KURANG PROTEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 3-5 kegagalan dalam monitoring period",i.jsx("br",{})," ",i.jsx("strong",{children:"Penting:"})," Ini adalah lapisan terakhir - gunakan jika rate limiter tidak cukup"]})]})]})]}),i.jsxs("div",{className:"bg-red-100 dark:bg-red-950/40 border border-red-300 dark:border-red-700 rounded p-3 mt-3",children:[i.jsx("strong",{className:"text-sm text-red-800 dark:text-red-200",children:" Konfigurasi Optimal untuk DDoS Protection:"}),i.jsxs("div",{className:"text-xs mt-2 space-y-1 text-red-700 dark:text-red-300",children:[i.jsx("p",{children:"Untuk perlindungan maksimal terhadap DDoS attack, gunakan konfigurasi berikut:"}),i.jsxs("ul",{className:"list-disc list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Min Multiplier:"})," 0.1 - 0.3 (limit turun hingga 10-30% dari base)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Stress Latency Threshold:"})," 500 - 1000ms (deteksi cepat)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Adjustment Interval:"})," 10 - 30 detik (respons cepat)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Base Limits:"})," Konservatif (Reads: 50-100, Writes: 20-30, RPC: 10-20, Auth: 5-10)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Circuit Breaker Failure Threshold:"})," 3-5 (last resort protection)"]})]}),i.jsx("p",{className:"mt-2 font-semibold",children:"Dengan konfigurasi ini, saat DDoS attack terjadi:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Response time naik ",">"," ",T.stressLatencyThreshold,"ms (dalam 10-30 detik)"]}),i.jsxs("li",{children:["Adaptive limiter turunkan limit ke ",(T.minMultiplier*100).toFixed(0),"% (minimal)"]}),i.jsx("li",{children:"70-90% request diblokir dengan HTTP 429"}),i.jsx("li",{children:"Jika masih gagal, circuit breaker OPEN  100% request diblokir"}),i.jsx("li",{children:"Database terlindungi dari crash"})]})]})]})]})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-yellow-800 dark:text-yellow-200",children:"Lapisan Perlindungan Berlapis"}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"1"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Adaptive Rate Limiter (Lapisan Pertama):"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Membatasi jumlah request per menit dengan limit yang dinamis. Mencegah database overload dengan menyesuaikan limit berdasarkan kondisi sistem."})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"2"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Request Timeout (Lapisan Kedua):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Setiap request memiliki timeout maksimal ",L.timeout/1e3," detik. Request yang terlalu lama dianggap gagal dan tidak menumpuk di database."]})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"3"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Circuit Breaker (Lapisan Ketiga):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Jika tetap terjadi ",L.failureThreshold," kegagalan dalam ",(L.monitoringPeriod/1e3).toFixed(0)," detik, circuit breaker akan OPEN dan memblokir semua request untuk melindungi database sepenuhnya."]})]})]})]})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-blue-800 dark:text-blue-200",children:"Penjelasan Detail Setiap Input Konfigurasi"}),i.jsxs("div",{className:"text-sm space-y-4 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"1. Base Limits (Limit Dasar)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Limit dasar adalah jumlah maksimal request per menit yang diizinkan saat sistem dalam kondisi normal. Limit aktual akan disesuaikan otomatis berdasarkan kondisi sistem (dikalikan dengan multiplier)."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Reads Base Limit: ",T.baseConfig.read.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"READ"})," (membaca data dari database). Operasi ini termasuk SELECT queries, fetching data, dll.",i.jsx("br",{})," Operasi read biasanya lebih aman dan lebih cepat dibanding write",i.jsx("br",{})," Limit default: 100 request/menit (dapat disesuaikan 10-1000)",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(T.baseConfig.read.limit*T.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(T.baseConfig.read.limit*T.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Writes Base Limit: ",T.baseConfig.write.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"WRITE"})," (menulis/mengubah data di database). Operasi ini termasuk INSERT, UPDATE, DELETE, UPSERT.",i.jsx("br",{})," Operasi write lebih berisiko dan lebih lambat dibanding read",i.jsx("br",{})," Limit default: 30 request/menit (dapat disesuaikan 5-500)",i.jsx("br",{})," Lebih ketat dari reads karena dapat menyebabkan race condition atau data corruption jika terlalu banyak",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(T.baseConfig.write.limit*T.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(T.baseConfig.write.limit*T.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["RPC Base Limit: ",T.baseConfig.rpc.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"RPC"})," (Remote Procedure Call / fungsi database). Operasi ini termasuk panggilan fungsi PostgreSQL, stored procedures, dll.",i.jsx("br",{})," RPC biasanya lebih kompleks dan lebih berat dibanding query biasa",i.jsx("br",{})," Limit default: 20 request/menit (dapat disesuaikan 5-200)",i.jsx("br",{})," RPC sering digunakan untuk operasi batch atau analytics, jadi perlu lebih ketat",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(T.baseConfig.rpc.limit*T.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(T.baseConfig.rpc.limit*T.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Auth Base Limit: ",T.baseConfig.auth.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"AUTH"})," (autentikasi dan otorisasi). Operasi ini termasuk login, logout, refresh token, verifikasi session.",i.jsx("br",{})," Operasi auth sangat penting untuk keamanan, jadi perlu dibatasi",i.jsx("br",{})," Limit default: 10 request/menit (dapat disesuaikan 2-100)",i.jsx("br",{})," Mencegah brute force attack dan credential stuffing",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(T.baseConfig.auth.limit*T.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(T.baseConfig.auth.limit*T.minMultiplier),"/min"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"2. Multiplier Range (Rentang Pengali)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Multiplier menentukan seberapa banyak limit base dapat berubah. Sistem akan mengalikan base limit dengan multiplier saat ini untuk mendapatkan limit efektif."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Min Multiplier: ",(T.minMultiplier*100).toFixed(0),"%"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Multiplier ",i.jsx("strong",{children:"minimum"})," yang akan digunakan saat sistem dalam kondisi ",i.jsx("strong",{children:"stres"}),".",i.jsx("br",{})," Nilai: 0.5 = 50% dari base limit (default: 0.5, range: 0.1 - 1.0)",i.jsx("br",{})," Digunakan ketika: Response time > ",T.stressLatencyThreshold,"ms ATAU error rate > 20%",i.jsx("br",{})," Contoh: Jika Reads base = ",T.baseConfig.read.limit,", min multiplier = ",T.minMultiplier,", maka limit efektif minimum = ",Math.round(T.baseConfig.read.limit*T.minMultiplier),"/min",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memberi waktu recovery untuk database dengan mengurangi beban saat sistem stres, mencegah overload total"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Max Multiplier: ",(T.maxMultiplier*100).toFixed(0),"%"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Multiplier ",i.jsx("strong",{children:"maksimum"})," yang akan digunakan saat sistem dalam kondisi ",i.jsx("strong",{children:"sehat"}),".",i.jsx("br",{})," Nilai: 2.0 = 200% dari base limit (default: 2.0, range: 1.0 - 5.0)",i.jsx("br",{})," Digunakan ketika: Response time < ",T.healthyLatencyThreshold,"ms DAN error rate < 5%",i.jsx("br",{})," Contoh: Jika Reads base = ",T.baseConfig.read.limit,", max multiplier = ",T.maxMultiplier,", maka limit efektif maksimum = ",Math.round(T.baseConfig.read.limit*T.maxMultiplier),"/min",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memanfaatkan kapasitas database saat kondisi optimal, meningkatkan throughput aplikasi"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"3. Latency Thresholds (Ambang Waktu Respons)"}),i.jsx("p",{className:"mt-1 mb-2",children:'Threshold menentukan kapan sistem dianggap "sehat" atau "stres" berdasarkan waktu respons database. Sistem menggunakan threshold ini untuk memutuskan apakah harus meningkatkan atau menurunkan limit.'}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Healthy Latency Threshold: ",T.healthyLatencyThreshold,"ms"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Batas atas response time yang dianggap ",i.jsx("strong",{children:"sehat"}),". Jika response time database di bawah nilai ini, sistem akan meningkatkan limit.",i.jsx("br",{})," Default: 200ms (range: 50ms - 1000ms)",i.jsx("br",{})," Kondisi: Response time < ",T.healthyLatencyThreshold,"ms DAN error rate < 5%",i.jsx("br",{})," Aksi: Limit akan ",i.jsx("strong",{children:"naik secara bertahap"})," (maks 10% per adjustment) hingga mencapai max multiplier",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mengidentifikasi saat database dapat menangani lebih banyak request, memaksimalkan throughput",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"})," Jika database Anda biasanya sangat cepat (< 50ms), turunkan nilai ini. Jika database lambat, naikkan."]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Stress Latency Threshold: ",T.stressLatencyThreshold,"ms"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Batas bawah response time yang dianggap ",i.jsx("strong",{children:"stres"}),". Jika response time database di atas nilai ini, sistem akan menurunkan limit.",i.jsx("br",{})," Default: 1000ms (range: 500ms - 10000ms)",i.jsx("br",{})," Kondisi: Response time > ",T.stressLatencyThreshold,"ms ATAU error rate > 20%",i.jsx("br",{})," Aksi: Limit akan ",i.jsx("strong",{children:"turun secara bertahap"})," (maks 20% per adjustment) hingga mencapai min multiplier",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mengidentifikasi saat database mulai overload, mengurangi beban sebelum database benar-benar crash",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"})," Jika database Anda dapat menangani response time tinggi (> 2s), naikkan nilai ini. Jika database sensitif, turunkan."]})]}),i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:[i.jsx("strong",{children:" Catatan:"})," Jika response time di antara ",T.healthyLatencyThreshold,"ms dan ",T.stressLatencyThreshold,"ms, sistem akan perlahan mengembalikan multiplier ke 1.0 (100% dari base limit)."]})})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"4. Adjustment Interval (Interval Penyesuaian)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Interval menentukan seberapa sering sistem memeriksa metrik dan menyesuaikan limit. Sistem akan query metrik dari Supabase dan menghitung response time serta error rate untuk memutuskan apakah perlu mengubah multiplier."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Adjustment Interval: ",T.adjustmentInterval/1e3," detik (",T.adjustmentInterval,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Frekuensi pengecekan dan penyesuaian limit oleh sistem.",i.jsx("br",{})," Default: 60 detik (60000ms, range: 10s - 600s)",i.jsx("br",{})," Setiap interval, sistem akan:",i.jsx("br",{}),"1. Query metrik dari tabel ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"circuit_breaker_metrics"})," di Supabase (5 menit terakhir)",i.jsx("br",{}),"2. Hitung rata-rata response time dan error rate",i.jsx("br",{}),"3. Bandingkan dengan threshold (healthy/stress)",i.jsx("br",{}),"4. Sesuaikan multiplier untuk setiap operasi (read/write/rpc/auth)",i.jsx("br",{}),"5. Simpan multiplier baru ke localStorage dan update limit efektif",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"}),i.jsx("br",{}),"- Interval terlalu pendek: Sistem terlalu reaktif, limit berubah-ubah terlalu sering (tidak stabil)",i.jsx("br",{}),"- Interval terlalu panjang: Sistem lambat merespons perubahan kondisi (tidak efektif)",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Untuk aplikasi dengan traffic stabil: Gunakan 60-120 detik",i.jsx("br",{}),"- Untuk aplikasi dengan traffic volatile: Gunakan 30-60 detik",i.jsx("br",{}),"- Jangan kurang dari 10 detik (terlalu agresif)",i.jsx("br",{}),"- Jangan lebih dari 600 detik (terlalu lambat)"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"5. Cara Kerja Bersama-Sama"}),i.jsx("p",{className:"mt-1 mb-2",children:"Semua parameter ini bekerja bersama untuk menciptakan sistem perlindungan yang adaptif dan responsif."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{className:"text-xs",children:[i.jsx("strong",{children:"Alur Kerja:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Sistem memantau setiap request database dan mencatat metrik (response time, success/failure) ke ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"circuit_breaker_metrics"})]}),i.jsxs("li",{children:["Setiap ",T.adjustmentInterval/1e3," detik, adaptive rate limiter memeriksa metrik 5 menit terakhir"]}),i.jsx("li",{children:"Menghitung rata-rata response time dan error rate"}),i.jsxs("li",{children:["Membandingkan dengan threshold:",i.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1",children:[i.jsxs("li",{children:["Jika response time < ",T.healthyLatencyThreshold,"ms DAN error < 5%  ",i.jsx("strong",{children:"Naikkan limit"})," (max ",(T.maxMultiplier*100).toFixed(0),"%)"]}),i.jsxs("li",{children:["Jika response time > ",T.stressLatencyThreshold,"ms ATAU error > 20%  ",i.jsx("strong",{children:"Turunkan limit"})," (min ",(T.minMultiplier*100).toFixed(0),"%)"]}),i.jsxs("li",{children:["Jika di antara keduanya  ",i.jsx("strong",{children:"Kembalikan limit"})," perlahan ke 100%"]})]})]}),i.jsx("li",{children:"Update multiplier dan hitung limit efektif baru (base limit  multiplier saat ini)"}),i.jsx("li",{children:"Limit efektif baru diterapkan untuk semua request berikutnya"}),i.jsxs("li",{children:["Proses ini berulang setiap ",T.adjustmentInterval/1e3," detik"]})]})]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:[i.jsx("strong",{children:" Contoh Praktis:"}),i.jsx("br",{}),"Base Reads Limit = ",T.baseConfig.read.limit,"/min",i.jsx("br",{}),"Sistem sehat (response < ",T.healthyLatencyThreshold,"ms)  Multiplier = ",T.maxMultiplier,"  Effective Limit = ",Math.round(T.baseConfig.read.limit*T.maxMultiplier),"/min",i.jsx("br",{}),"Sistem stres (response > ",T.stressLatencyThreshold,"ms)  Multiplier = ",T.minMultiplier,"  Effective Limit = ",Math.round(T.baseConfig.read.limit*T.minMultiplier),"/min",i.jsx("br",{}),"Sistem normal  Multiplier = 1.0  Effective Limit = ",T.baseConfig.read.limit,"/min (base)"]})})]})]}),i.jsxs("p",{className:"text-xs mt-3 pt-2 border-t",children:[" ",i.jsx("strong",{children:"Tip Penting:"}),' Limit efektif saat ini dapat dilihat di bagian "Adaptive Rate Limiter Configuration" di atas. Limit akan berubah secara real-time berdasarkan kondisi sistem. Perhatikan perubahan multiplier - jika terus turun, itu berarti sistem sedang stres dan perlu perhatian.']})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(gw,{className:"h-5 w-5 text-blue-600"}),"Memahami Metrik Circuit Breaker"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Success Rate:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Persentase request yang berhasil. Nilai rendah (< 90%) menunjukkan masalah potensial dengan database atau koneksi."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Total Requests:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Jumlah total request sejak inisialisasi. Membantu memahami volume traffic aplikasi."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Operations by Type:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Distribusi operasi berdasarkan jenis (read/write/RPC/auth). Membantu mengidentifikasi jenis operasi yang paling bermasalah."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Circuit Breaker States:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Menunjukkan berapa banyak operasi yang terjadi pada setiap state. Banyak operasi di OPEN state = sistem sering bermasalah."})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(vf,{className:"h-5 w-5 text-green-600"}),"Best Practices"]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4 space-y-2 text-sm",children:i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"Monitor metrik secara berkala untuk mendeteksi masalah sejak dini"}),i.jsx("li",{children:"Biarkan adaptive rate limiter bekerja otomatis - jangan sering reset manual kecuali benar-benar diperlukan"}),i.jsx("li",{children:"Jika circuit sering terbuka, pertimbangkan untuk optimasi query atau scaling database"}),i.jsx("li",{children:"Gunakan cache untuk mengurangi beban database pada query yang sering digunakan"}),i.jsx("li",{children:"Review dan sesuaikan threshold jika circuit breaker terlalu sensitif atau tidak sensitif"}),i.jsx("li",{children:"Perhatikan perubahan limit adaptive rate limiter - penurunan drastis menunjukkan sistem sedang stres"}),i.jsx("li",{children:"Dokumentasikan setiap insiden circuit breaker dan traffic spike untuk analisis tren"}),i.jsx("li",{children:"Trust the adaptive system - limit akan menyesuaikan otomatis berdasarkan kondisi sistem"})]})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Aa,{className:"h-5 w-5 text-blue-600"}),"Referensi Konfigurasi"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Circuit Breaker Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Failure Threshold:"})," ",L.failureThreshold,i.jsx("p",{className:"text-xs text-muted-foreground",children:"Buka circuit setelah kegagalan ini"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Reset Timeout:"})," ",L.resetTimeout/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Tunggu sebelum uji pemulihan"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Success Threshold:"})," ",L.successThreshold,i.jsx("p",{className:"text-xs text-muted-foreground",children:"Sukses untuk tutup circuit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Monitoring Period:"})," ",L.monitoringPeriod/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Jendela waktu hitungan"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("strong",{children:"Request Timeout:"})," ",L.timeout/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Timeout maksimal per request"})]})]})]}),i.jsxs("div",{className:"pt-3 border-t",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Adaptive Rate Limiter Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Reads Base Limit:"})," ",T.baseConfig.read.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Bt.getEffectiveLimit("read"),"/min (",(X.read*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Writes Base Limit:"})," ",T.baseConfig.write.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Bt.getEffectiveLimit("write"),"/min (",(X.write*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"RPC Base Limit:"})," ",T.baseConfig.rpc.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Bt.getEffectiveLimit("rpc"),"/min (",(X.rpc*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Auth Base Limit:"})," ",T.baseConfig.auth.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Bt.getEffectiveLimit("auth"),"/min (",(X.auth*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Multiplier Range:"})," ",(T.minMultiplier*100).toFixed(0),"% - ",(T.maxMultiplier*100).toFixed(0),"%",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Range penyesuaian limit otomatis"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Adjustment Interval:"})," ",T.adjustmentInterval/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Frekuensi penyesuaian limit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Healthy Threshold:"})," < ",T.healthyLatencyThreshold,"ms",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time untuk meningkatkan limit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stress Threshold:"})," > ",T.stressLatencyThreshold,"ms",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time untuk menurunkan limit"})]})]})]})]})]})]}),i.jsx(Na,{children:i.jsx(ne,{variant:"default",onClick:()=>j(!1),children:"Tutup"})})]})}),i.jsx(gn,{open:b,onOpenChange:_,children:i.jsxs(ln,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(cn,{children:[i.jsxs(un,{className:"flex items-center gap-2",children:[i.jsx(Aa,{className:"h-5 w-5 text-blue-500"}),"Edit Adaptive Rate Limiter Configuration"]}),i.jsx(Ur,{children:"Ubah konfigurasi adaptive rate limiter. Limit akan secara otomatis menyesuaikan berdasarkan kondisi sistem."})]}),i.jsxs("div",{className:"py-4 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Base Limits (per menit)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"readLimit",children:["Reads Base Limit",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{side:"right",align:"start",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi read (min: 10, max: 1000)"})})]})]}),i.jsx(ot,{id:"readLimit",inputMode:"numeric",pattern:"[0-9]*",min:10,max:1e3,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(ut)?ut:"",onChange:H=>{const q=H.target.value.replace(/\D/g,"");A(re=>{if(q==="")return{...re,baseConfig:{...re.baseConfig,read:{...re.baseConfig.read,limit:NaN}}};const he=parseInt(q,10);if(!Number.isFinite(he))return{...re,baseConfig:{...re.baseConfig,read:{...re.baseConfig.read,limit:NaN}}};const Me=Math.min(1e3,he);return{...re,baseConfig:{...re.baseConfig,read:{...re.baseConfig.read,limit:Me}}}})}}),!rt&&i.jsx("p",{className:"text-xs text-red-500",children:"Reads base limit must be between 10 and 1000 requests per minute."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"writeLimit",children:["Writes Base Limit",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{side:"left",align:"end",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi write (min: 5, max: 500)"})})]})]}),i.jsx(ot,{id:"writeLimit",inputMode:"numeric",pattern:"[0-9]*",min:5,max:500,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(ee)?ee:"",onChange:H=>{const q=H.target.value.replace(/\D/g,"");A(re=>{if(q==="")return{...re,baseConfig:{...re.baseConfig,write:{...re.baseConfig.write,limit:NaN}}};const he=parseInt(q,10);if(!Number.isFinite(he))return{...re,baseConfig:{...re.baseConfig,write:{...re.baseConfig.write,limit:NaN}}};const Me=Math.min(500,he);return{...re,baseConfig:{...re.baseConfig,write:{...re.baseConfig.write,limit:Me}}}})}}),!bt&&i.jsx("p",{className:"text-xs text-red-500",children:"Writes base limit must be between 5 and 500 requests per minute."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"rpcLimit",children:["RPC Base Limit",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{side:"right",align:"start",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi RPC (min: 5, max: 200)"})})]})]}),i.jsx(ot,{id:"rpcLimit",inputMode:"numeric",pattern:"[0-9]*",min:5,max:200,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(qe)?qe:"",onChange:H=>{const q=H.target.value.replace(/\D/g,"");A(re=>{if(q==="")return{...re,baseConfig:{...re.baseConfig,rpc:{...re.baseConfig.rpc,limit:NaN}}};const he=parseInt(q,10);if(!Number.isFinite(he))return{...re,baseConfig:{...re.baseConfig,rpc:{...re.baseConfig.rpc,limit:NaN}}};const Me=Math.min(200,he);return{...re,baseConfig:{...re.baseConfig,rpc:{...re.baseConfig.rpc,limit:Me}}}})}}),!ue&&i.jsx("p",{className:"text-xs text-red-500",children:"RPC base limit must be between 5 and 200 requests per minute."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"authLimit",children:["Auth Base Limit",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{side:"left",align:"end",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi autentikasi (min: 2, max: 100)"})})]})]}),i.jsx(ot,{id:"authLimit",inputMode:"numeric",pattern:"[0-9]*",min:2,max:100,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(dt)?dt:"",onChange:H=>{const q=H.target.value.replace(/\D/g,"");A(re=>{if(q==="")return{...re,baseConfig:{...re.baseConfig,auth:{...re.baseConfig.auth,limit:NaN}}};const he=parseInt(q,10);if(!Number.isFinite(he))return{...re,baseConfig:{...re.baseConfig,auth:{...re.baseConfig.auth,limit:NaN}}};const Me=Math.min(100,he);return{...re,baseConfig:{...re.baseConfig,auth:{...re.baseConfig.auth,limit:Me}}}})}}),!Se&&i.jsx("p",{className:"text-xs text-red-500",children:"Auth base limit must be between 2 and 100 requests per minute."})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Adjustment Parameters"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"minMultiplier",children:["Min Multiplier",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{side:"right",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Multiplier minimum (misal: 0.5 = 50%). Digunakan saat sistem stres (min: 0.1, max: 1.0)"})})]})]}),i.jsx(ot,{id:"minMultiplier",inputMode:"decimal",pattern:"^[0-9]*[.]?[0-9]*$",min:.1,max:1,step:.1,onKeyDown:H=>{["e","E","+","-"].includes(H.key)&&H.preventDefault()},value:R,onChange:H=>{var et;let q=H.target.value.replace(/[^0-9.]/g,"");if((((et=q.match(/\./g))==null?void 0:et.length)??0)>1)return;if(q.startsWith(".")&&(q=`0${q}`),q.includes(".")){const[Ie,Y]=q.split("."),le=(Y??"").slice(0,3);q=`${Ie}.${le}`}if(q===""||q==="."){C(""),A(Ie=>({...Ie,minMultiplier:NaN}));return}const re=parseFloat(q);if(!Number.isFinite(re)){C(""),A(Ie=>({...Ie,minMultiplier:NaN}));return}const he=Math.min(1,re),Me=re>he?he.toFixed(3).replace(/\.?0+$/,""):q;C(Me),A(Ie=>({...Ie,minMultiplier:parseFloat(Me)}))}}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Minimum:"," ",Number.isFinite(se)?`${(se*100).toFixed(0)}% dari base limit`:"Enter a minimum multiplier value"]}),!we&&i.jsx("p",{className:"text-xs text-red-500",children:"Min multiplier must be between 0.1 and 1.0."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"maxMultiplier",children:["Max Multiplier",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{side:"left",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Multiplier maksimum (misal: 2.0 = 200%). Digunakan saat sistem sehat (min: 1.0, max: 5.0)"})})]})]}),i.jsx(ot,{id:"maxMultiplier",inputMode:"decimal",pattern:"^[0-9]*[.]?[0-9]*$",min:1,max:5,step:.1,onKeyDown:H=>{["e","E","+","-"].includes(H.key)&&H.preventDefault()},value:W,onChange:H=>{var et;let q=H.target.value.replace(/[^0-9.]/g,"");if((((et=q.match(/\./g))==null?void 0:et.length)??0)>1)return;if(q.startsWith(".")&&(q=`0${q}`),q.includes(".")){const[Ie,Y]=q.split("."),le=(Y??"").slice(0,3);q=`${Ie}.${le}`}if(q===""||q==="."){Q(""),A(Ie=>({...Ie,maxMultiplier:NaN}));return}const re=parseFloat(q);if(!Number.isFinite(re)){Q(""),A(Ie=>({...Ie,maxMultiplier:NaN}));return}const he=Math.min(5,re),Me=re>he?he.toFixed(3).replace(/\.?0+$/,""):q;Q(Me),A(Ie=>({...Ie,maxMultiplier:parseFloat(Me)}))}}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum:"," ",Number.isFinite(ve)?`${(ve*100).toFixed(0)}% dari base limit`:"Enter a maximum multiplier value"]}),!Te&&i.jsx("p",{className:"text-xs text-red-500",children:"Max multiplier must be between 1.0 and 5.0."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"healthyLatency",children:["Healthy Latency Threshold (ms)",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{side:"right",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Response time di bawah ini dianggap sehat. Sistem akan meningkatkan limit (min: 50ms, max: 1000ms)"})})]})]}),i.jsx(ot,{id:"healthyLatency",inputMode:"numeric",pattern:"[0-9]*",min:50,max:1e3,step:50,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(oe)?oe:"",onChange:H=>{const q=H.target.value.replace(/\D/g,"");A(re=>{if(q==="")return{...re,healthyLatencyThreshold:NaN};const he=parseInt(q,10);if(!Number.isFinite(he))return{...re,healthyLatencyThreshold:NaN};const Me=Math.min(1e3,he);return{...re,healthyLatencyThreshold:Me}})}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(oe)?`${(oe/1e3).toFixed(1)} seconds`:"Enter a value between 50 and 1000 milliseconds"}),!je&&i.jsx("p",{className:"text-xs text-red-500",children:"Healthy latency threshold must be between 50 and 1000 milliseconds."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"stressLatency",children:["Stress Latency Threshold (ms)",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{side:"left",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Response time di atas ini dianggap stres. Sistem akan menurunkan limit (min: 500ms, max: 10000ms)"})})]})]}),i.jsx(ot,{id:"stressLatency",inputMode:"numeric",pattern:"[0-9]*",min:500,max:1e4,step:100,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(Xe)?Xe:"",onChange:H=>{const q=H.target.value.replace(/\D/g,"");A(re=>{if(q==="")return{...re,stressLatencyThreshold:NaN};const he=parseInt(q,10);if(!Number.isFinite(he))return{...re,stressLatencyThreshold:NaN};const Me=Math.min(1e4,he);return{...re,stressLatencyThreshold:Me}})}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(Xe)?`${(Xe/1e3).toFixed(1)} seconds`:"Enter a value between 500 and 10000 milliseconds"}),!Ee&&i.jsx("p",{className:"text-xs text-red-500",children:"Stress latency threshold must be between 500 and 10000 milliseconds."})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs(tt,{htmlFor:"adjustmentInterval",children:["Adjustment Interval (ms)",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{side:"right",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Frekuensi pengecekan dan penyesuaian limit (min: 10000ms, max: 600000ms)"})})]})]}),i.jsx(ot,{id:"adjustmentInterval",inputMode:"numeric",pattern:"[0-9]*",min:1e4,max:6e5,step:1e4,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(ke)?ke:"",onChange:H=>{const q=H.target.value.replace(/\D/g,"");A(re=>{if(q==="")return{...re,adjustmentInterval:NaN};const he=parseInt(q,10);if(!Number.isFinite(he))return{...re,adjustmentInterval:NaN};const Me=Math.min(6e5,he);return{...re,adjustmentInterval:Me}})}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(ke)?`Setiap ${(ke/1e3).toFixed(0)} detik`:"Enter an interval between 10000 and 600000 milliseconds."}),!Ue&&i.jsx("p",{className:"text-xs text-red-500",children:"Adjustment interval must be between 10000 and 600000 milliseconds."})]})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",i.jsx("strong",{children:"Tips:"})," Adaptive rate limiter secara otomatis menyesuaikan limit berdasarkan metrik sistem (response time, error rate). Saat sistem sehat, limit akan naik. Saat sistem stres, limit akan turun untuk melindungi database dari overload."]})})]}),i.jsxs(Na,{children:[i.jsx(ne,{variant:"outline",onClick:()=>_(!1),children:"Batal"}),i.jsx(ne,{variant:"default",onClick:ft,disabled:!rt||!bt||!ue||!Se||!we||!Te||!je||!Ee||!Ue,children:"Simpan Perubahan"})]})]})}),i.jsx(gn,{open:y,onOpenChange:w,children:i.jsxs(ln,{className:"max-w-2xl",children:[i.jsxs(cn,{children:[i.jsxs(un,{className:"flex items-center gap-2",children:[i.jsx(Aa,{className:"h-5 w-5 text-blue-500"}),"Edit Circuit Breaker Configuration"]}),i.jsx(Ur,{children:"Ubah threshold dan timeout untuk circuit breaker. Perubahan akan langsung diterapkan."})]}),i.jsxs("div",{className:"py-4 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"failureThreshold",children:["Failure Threshold",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Jumlah kegagalan yang diperlukan sebelum circuit breaker terbuka (min: 1, max: 100)"})})]})]}),i.jsx(ot,{id:"failureThreshold",inputMode:"numeric",pattern:"[0-9]*",min:1,max:100,value:Number.isFinite(F.failureThreshold)?F.failureThreshold:"",onChange:H=>{const q=H.target.value.replace(/\D/g,"");if(q===""){M(he=>({...he,failureThreshold:1}));return}const re=Math.min(100,Math.max(1,parseInt(q,10)));M(he=>({...he,failureThreshold:re}))}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"resetTimeout",children:["Reset Timeout (milliseconds)",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Waktu tunggu sebelum mencoba pemulihan (transisi ke HALF_OPEN). Min: 10000ms, Max: 300000ms"})})]})]}),i.jsx(ot,{id:"resetTimeout",inputMode:"numeric",pattern:"[0-9]*",min:1e4,max:3e5,step:1e3,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(F.resetTimeout)?F.resetTimeout:"",onChange:H=>{const q=H.target.value.replace(/\D/g,"");if(q===""){M(he=>({...he,resetTimeout:NaN}));return}const re=parseInt(q,10);if(!Number.isFinite(re)){M(he=>({...he,resetTimeout:NaN}));return}M(he=>({...he,resetTimeout:re}))}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(F.resetTimeout)?`${(F.resetTimeout/1e3).toFixed(0)} seconds`:"Enter a value between 10000 and 300000"}),Number.isFinite(F.resetTimeout)&&F.resetTimeout<1e4&&i.jsx("p",{className:"text-xs text-red-500",children:"Minimum reset timeout is 10000 milliseconds (10 seconds)."}),Number.isFinite(F.resetTimeout)&&F.resetTimeout>3e5&&i.jsx("p",{className:"text-xs text-red-500",children:"Maximum reset timeout is 300000 milliseconds."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"successThreshold",children:["Success Threshold",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Jumlah sukses berturut-turut di HALF_OPEN untuk menutup circuit (min: 1, max: 10)"})})]})]}),i.jsx(ot,{id:"successThreshold",inputMode:"numeric",pattern:"[0-9]*",min:1,max:10,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(F.successThreshold)?F.successThreshold:"",onChange:H=>{const q=H.target.value.replace(/\D/g,"");if(q===""){M(Me=>({...Me,successThreshold:NaN}));return}const re=parseInt(q,10);if(!Number.isFinite(re)){M(Me=>({...Me,successThreshold:NaN}));return}const he=Math.min(10,Math.max(1,re));M(Me=>({...Me,successThreshold:he}))}}),(!Number.isFinite(F.successThreshold)||F.successThreshold<1||F.successThreshold>10)&&i.jsx("p",{className:"text-xs text-red-500",children:"Success threshold must be a number between 1 and 10."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(tt,{htmlFor:"monitoringPeriod",children:["Monitoring Period (milliseconds)",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Jendela waktu untuk menghitung kegagalan. Kegagalan di luar jendela ini tidak dihitung. Min: 1000ms, Max: 60000ms"})})]})]}),i.jsx(ot,{id:"monitoringPeriod",inputMode:"numeric",pattern:"[0-9]*",min:1e3,max:6e4,step:1e3,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(F.monitoringPeriod)?F.monitoringPeriod:"",onChange:H=>{const q=H.target.value.replace(/\D/g,"");if(q===""){M(he=>({...he,monitoringPeriod:NaN}));return}const re=parseInt(q,10);if(!Number.isFinite(re)){M(he=>({...he,monitoringPeriod:NaN}));return}M(he=>({...he,monitoringPeriod:re}))}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(F.monitoringPeriod)?`${(F.monitoringPeriod/1e3).toFixed(0)} seconds`:"Enter a value between 1000 and 60000"}),Number.isFinite(F.monitoringPeriod)&&F.monitoringPeriod<1e3&&i.jsx("p",{className:"text-xs text-red-500",children:"Minimum monitoring period is 1000 milliseconds (1 second)."}),Number.isFinite(F.monitoringPeriod)&&F.monitoringPeriod>6e4&&i.jsx("p",{className:"text-xs text-red-500",children:"Maximum monitoring period is 60000 milliseconds (60 seconds)."})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs(tt,{htmlFor:"timeout",children:["Request Timeout (milliseconds)",i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(He,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ye,{children:i.jsx("p",{children:"Timeout maksimal untuk setiap request database. Request yang melebihi waktu ini akan dianggap gagal. Min: 1000ms, Max: 60000ms"})})]})]}),i.jsx(ot,{id:"timeout",inputMode:"numeric",pattern:"[0-9]*",min:1e3,max:6e4,step:1e3,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(F.timeout)?F.timeout:"",onChange:H=>{const q=H.target.value.replace(/\D/g,"");if(q===""){M(Me=>({...Me,timeout:NaN}));return}const re=parseInt(q,10);if(!Number.isFinite(re)){M(Me=>({...Me,timeout:NaN}));return}const he=Math.min(6e4,re);M(Me=>({...Me,timeout:he}))}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(F.timeout)?`${(F.timeout/1e3).toFixed(0)} seconds`:"Enter a value between 1000 and 60000"}),Number.isFinite(F.timeout)&&F.timeout<1e3&&i.jsx("p",{className:"text-xs text-red-500",children:"Minimum request timeout is 1000 milliseconds (1 second)."})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",i.jsx("strong",{children:"Tips:"})," Threshold yang terlalu rendah dapat membuat circuit breaker terlalu sensitif. Threshold yang terlalu tinggi dapat menunda respons terhadap masalah database. Gunakan nilai yang sesuai dengan karakteristik aplikasi Anda."]})})]}),i.jsxs(Na,{children:[i.jsx(ne,{variant:"outline",onClick:()=>w(!1),children:"Batal"}),i.jsx(ne,{variant:"default",onClick:nt,disabled:!Number.isFinite(F.resetTimeout)||F.resetTimeout<1e4||F.resetTimeout>3e5||!Number.isFinite(F.failureThreshold)||F.failureThreshold<1||F.failureThreshold>100||!Number.isFinite(F.successThreshold)||F.successThreshold<1||F.successThreshold>10||!Number.isFinite(F.monitoringPeriod)||F.monitoringPeriod<1e3||F.monitoringPeriod>6e4||!Number.isFinite(F.timeout)||F.timeout<1e3||F.timeout>6e4||!rt||!bt||!ue||!Se||!we||!Te||!je||!Ee||!Ue,children:"Simpan Perubahan"})]})]})}),i.jsx(gn,{open:I,onOpenChange:P,children:i.jsxs(ln,{className:"max-w-md",children:[i.jsx(cn,{children:i.jsxs(un,{className:"flex items-center gap-2",children:[i.jsx(eo,{className:"h-5 w-5 text-red-500"}),"Error"]})}),i.jsx("div",{className:"py-4",children:i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:S})}),i.jsx(Na,{children:i.jsx(ne,{variant:"destructive",onClick:()=>P(!1),children:"Tutup"})})]})})]})}const C9=p.forwardRef(({role:e,roles:t=[],requireAll:n=!1,fallback:r=null,children:a},s)=>{const{hasRole:o,hasAnyRole:l,loading:c}=Or();if(c)return null;const u=e?[e,...t]:t,d=n?u.every(f=>o(f)):l(u),h=!Array.isArray(a)&&typeof a!="string"&&typeof a!="number";return d?h?i.jsx(dN,{ref:s,children:a}):i.jsx(i.Fragment,{children:a}):i.jsx(i.Fragment,{children:r})});function n3e(){const[e,t]=LN(),{deleteMultipleContacts:n}=AC(),[r,a]=p.useState(""),[s,o]=p.useState(!1),[l,c]=p.useState(null),[u,d]=p.useState(!1),[h,f]=p.useState(90),[m,g]=p.useState(!1),[v,x]=p.useState(""),[y,w]=p.useState(null),[b,_]=p.useState(!1),[k,j]=p.useState(!1),[N,O]=p.useState(null),[I,P]=p.useState(null),[S,D]=p.useState(null),[L,U]=p.useState(null),[F,M]=p.useState(null),[T,E]=p.useState(!1),[$,A]=p.useState(!1),[B,R]=p.useState(""),C=p.useMemo(()=>Array.from(new Set(r.split(/[\s,\n]+/).map(K=>K.trim()).filter(Boolean))),[r]),W=K=>{const de=new URLSearchParams(e);de.set("menu",K),t(de)},Q=()=>{try{io.clear(),Be.success("Local caches cleared")}catch{Be.error("Failed to clear cache")}},X=async()=>{try{const{data:{user:K}}=await ce.auth.getUser();if(!K)return null;const{data:de}=await ce.from("org_members").select("org_id").eq("user_id",K.id).limit(1).maybeSingle();return(de==null?void 0:de.org_id)??null}catch{return null}},Z=async()=>{try{const K=await X();if(!K)return;const{data:de,error:$e}=await _t.from("org_settings").select("retention_days").eq("org_id",K).maybeSingle();if($e)throw $e;c((de==null?void 0:de.retention_days)??90),f((de==null?void 0:de.retention_days)??90)}catch(K){console.error("Failed to fetch retention settings:",K)}},te=async()=>{try{const K=await X();if(!K)return;const{data:de,error:$e}=await _t.from("org_settings").select("ai_paused, ai_paused_reason, ai_paused_at, ai_paused_by_user_id").eq("org_id",K).maybeSingle();if($e)throw $e;O(!!(de!=null&&de.ai_paused)),P((de==null?void 0:de.ai_paused_reason)??null),D((de==null?void 0:de.ai_paused_at)??null);const nt=(de==null?void 0:de.ai_paused_by_user_id)??null;if(U(nt),nt)try{const{data:Ye}=await _t.from("users_profile").select("user_id, display_name").eq("user_id",nt).maybeSingle();if(Ye!=null&&Ye.display_name)M(Ye.display_name);else{const{data:ft}=await _t.from("v_users").select("id, email").eq("id",nt).maybeSingle();M((ft==null?void 0:ft.email)??nt)}}catch{M(nt)}else M(null)}catch(K){console.error("Failed to fetch AI pause status:",K)}},J=async()=>{try{E(!0);const K=await X();if(!K)throw new Error("Unable to resolve organization");const{error:de}=await _t.from("org_settings").update({ai_paused:!1,ai_paused_reason:null,ai_paused_at:null,ai_paused_by_user_id:null}).eq("org_id",K);if(de)throw de;O(!1),P(null),D(null),U(null),M(null),Be.success("AI auto responses resumed");try{await Jt({action:"ai.resume",resource:"org_settings"})}catch{}}catch(K){Be.error((K==null?void 0:K.message)||"Failed to resume AI responses")}finally{E(!1)}},ie=async()=>{try{E(!0);const{data:{user:K}}=await ce.auth.getUser(),de=(K==null?void 0:K.id)??null,$e=await X();if(!$e)throw new Error("Unable to resolve organization");const{error:nt}=await _t.from("org_settings").update({ai_paused:!0,ai_paused_reason:(B==null?void 0:B.trim())||null,ai_paused_at:new Date().toISOString(),ai_paused_by_user_id:de}).eq("org_id",$e);if(nt)throw nt;O(!0),P((B==null?void 0:B.trim())||null),D(new Date().toISOString()),U(de),M(null),A(!1),Be.success("AI auto responses paused");try{await Jt({action:"ai.pause",resource:"org_settings",context:{reason:(B==null?void 0:B.trim())||null}})}catch{}te()}catch(K){Be.error((K==null?void 0:K.message)||"Failed to pause AI responses")}finally{E(!1),R("")}},ge=async()=>{try{_(!0);const K=await X();if(!K)throw new Error("Unable to resolve organization");const{error:de}=await _t.from("org_settings").update({retention_days:h}).eq("org_id",K);if(de)throw de;c(h),d(!1),Be.success(`Retention period updated to ${h} days`);try{await Jt({action:"retention.update",resource:"org_settings",context:{retention_days:h}})}catch{}}catch(K){Be.error((K==null?void 0:K.message)||"Failed to update retention settings")}finally{_(!1)}},ae=async()=>{try{_(!0);const{data:K,error:de}=await _t.rpc("cleanup_old_chat_data",{p_days:l??90});if(de)throw de;w(K),Be.success(`Cleanup completed: ${(K==null?void 0:K.threads_deleted)||0} threads, ${(K==null?void 0:K.messages_deleted)||0} messages deleted`);try{await Jt({action:"retention.cleanup",resource:"chat_data",context:K})}catch{}}catch(K){Be.error((K==null?void 0:K.message)||"Failed to run cleanup")}finally{_(!1)}},Re=async()=>{if(!v.trim()){Be.error("Please enter contact UUID");return}try{j(!0);const{data:K,error:de}=await _t.rpc("gdpr_delete_user_data",{p_contact_id:v.trim()});if(de)throw de;Be.success(`GDPR deletion completed: ${(K==null?void 0:K.threads_deleted)||0} threads, ${(K==null?void 0:K.messages_deleted)||0} messages, ${(K==null?void 0:K.contact_deleted)||0} contacts deleted`),g(!1),x("");try{await Jt({action:"gdpr.delete_request",resource:"contact",resourceId:v,context:K})}catch{}}catch(K){Be.error((K==null?void 0:K.message)||"Failed to execute GDPR deletion")}finally{j(!1)}};p.useEffect(()=>{Z(),te()},[]);const me=async()=>{if(C.length===0){Be.error("Provide at least one contact UUID");return}if(window.confirm(`Delete ${C.length} contact(s)? This cannot be undone.`))try{o(!0),await n(C),a(""),Be.success("Contacts deleted")}catch{Be.error("Bulk delete failed")}finally{o(!1)}};return i.jsx(C9,{role:pn.MASTER_AGENT,fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"Admin Panel is available to Master Agents only."}),children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Panel"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Centralized controls for master agents."})]}),i.jsx(At,{className:"bg-blue-100 text-blue-700 border-0",children:"Master Agent"})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsxs(ht,{className:"flex items-center gap-2",children:[i.jsx(fo,{className:"h-4 w-4"})," Access & Management"]})}),i.jsxs(ct,{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[i.jsxs(ne,{variant:"outline",className:"justify-start",onClick:()=>W("permissions"),children:[i.jsx(k4,{className:"h-4 w-4 mr-2"})," Manage Roles & Permissions"]}),i.jsxs(ne,{variant:"outline",className:"justify-start",onClick:()=>W("humanagents"),children:[i.jsx(bN,{className:"h-4 w-4 mr-2"})," Human Agents"]}),i.jsxs(ne,{variant:"outline",className:"justify-start",onClick:()=>W("platforms"),children:[i.jsx(j4,{className:"h-4 w-4 mr-2"})," Platforms & Integrations"]}),i.jsxs(ne,{variant:"outline",className:"justify-start",onClick:()=>W("analytics"),children:[i.jsx(p4,{className:"h-4 w-4 mr-2"})," Analytics"]}),i.jsxs(ne,{variant:"outline",className:"justify-start",onClick:()=>W("logs"),children:[i.jsx(y4,{className:"h-4 w-4 mr-2"})," Audit Logs"]}),i.jsxs(ne,{variant:"outline",className:"justify-start",onClick:()=>W("contacts"),children:[i.jsx(w4,{className:"h-4 w-4 mr-2"})," Contacts"]})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsxs(ht,{className:"flex items-center gap-2",children:[i.jsx(ho,{className:"h-4 w-4"})," Reliability & Circuit Breaker"]})}),i.jsx(ct,{children:i.jsx(t3e,{})})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsxs(ht,{className:"flex items-center gap-2",children:[i.jsx(ho,{className:"h-4 w-4"})," AI Auto Responses"]})}),i.jsxs(ct,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:"Status:"}),N?i.jsx(At,{className:"bg-red-100 text-red-700 border-0",children:"Paused"}):i.jsx(At,{className:"bg-emerald-100 text-emerald-700 border-0",children:"Active"})]}),N&&i.jsxs("div",{className:"mt-2 text-xs text-muted-foreground space-y-1",children:[I?i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Reason:"})," ",I]}):null,i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Paused"}),F?i.jsxs(i.Fragment,{children:[" by ",F]}):null,S?i.jsxs(i.Fragment,{children:[" at ",new Date(S).toLocaleString()]}):null]})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:N?i.jsxs(ne,{onClick:J,disabled:T,children:[i.jsx(PV,{className:"h-4 w-4 mr-2"})," ",T?"Resuming...":"Resume AI Responses"]}):i.jsxs(ne,{variant:"destructive",onClick:()=>A(!0),disabled:T,children:[i.jsx(TV,{className:"h-4 w-4 mr-2"})," Pause AI Responses"]})})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"When paused, AI will not auto reply across all channels until resumed."})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsxs(ht,{className:"flex items-center gap-2",children:[i.jsx(RT,{className:"h-4 w-4"})," Utilities"]})}),i.jsx(ct,{className:"flex flex-wrap gap-2",children:i.jsxs(ne,{variant:"outline",onClick:Q,children:[i.jsx(RT,{className:"h-4 w-4 mr-2"})," Clear Local Cache"]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{className:"flex items-center gap-2",children:"Data Retention Policy"})}),i.jsxs(ct,{className:"space-y-3",children:[i.jsx(tt,{className:"text-sm font-medium",children:"Retention Period (days)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ot,{type:"number",value:l??90,onChange:K=>f(parseInt(K.target.value)||90),className:"max-w-xs"}),i.jsx(ne,{variant:"outline",onClick:()=>{f(l??90),d(!0)},children:"Edit"})]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Current: ",l??90," days. Chats older than this will be automatically deleted."]}),i.jsx(ne,{onClick:ae,disabled:b,className:"w-full",children:b?"Running Cleanup...":"Run Cleanup Now"}),y&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last cleanup: ",y.threads_deleted," threads, ",y.messages_deleted," messages, ",y.contacts_deleted," contacts"]})]})]}),i.jsxs(We,{className:"border-red-200",children:[i.jsx(mt,{children:i.jsx(ht,{className:"flex items-center gap-2 text-red-700",children:"GDPR/PDPA Right to Erasure"})}),i.jsxs(ct,{className:"space-y-3",children:[i.jsx(tt,{className:"text-sm font-medium",children:"Contact ID"}),i.jsx(ot,{placeholder:"Enter contact UUID",value:v,onChange:K=>x(K.target.value)}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Enter the contact ID (UUID) gotten from contact detail to delete all associated data permanently."}),i.jsx(Zt,{permission:"contacts.delete",children:i.jsx(ne,{variant:"destructive",onClick:()=>g(!0),disabled:!v.trim()||k,className:"w-full",children:"Delete User Data"})}),i.jsx("div",{className:"text-xs text-red-600",children:"Warning: This action permanently deletes all data and cannot be undone."})]})]})]}),i.jsx(gn,{open:u,onOpenChange:d,children:i.jsxs(ln,{className:"max-w-md",children:[i.jsxs(cn,{children:[i.jsx(un,{children:"Configure Data Retention"}),i.jsx(Ur,{children:"Set how many days to retain chat data. Data older than this period will be automatically deleted."})]}),i.jsxs("div",{className:"py-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx(tt,{htmlFor:"retention-days",children:"Retention Period (days)"}),i.jsx(ot,{id:"retention-days",type:"number",value:h,onChange:K=>f(parseInt(K.target.value)||90)})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Automatic cleanup runs daily at 2 AM UTC. You can also trigger manual cleanup from the main panel."})]}),i.jsxs(Na,{children:[i.jsx(ne,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),i.jsx(ne,{onClick:ge,disabled:b,children:b?"Saving...":"Save"})]})]})}),i.jsx(gn,{open:$,onOpenChange:A,children:i.jsxs(ln,{className:"max-w-md",children:[i.jsxs(cn,{children:[i.jsx(un,{children:"Pause AI Auto Responses"}),i.jsx(Ur,{children:"This will pause all AI auto replies across all platforms. You can resume anytime."})]}),i.jsx("div",{className:"py-4 space-y-4",children:i.jsxs("div",{children:[i.jsx(tt,{htmlFor:"pause-reason",children:"Reason (optional)"}),i.jsx(Fr,{id:"pause-reason",placeholder:"Enter a reason for pausing (visible to admins)",value:B,onChange:K=>R(K.target.value),className:"min-h-[90px]"})]})}),i.jsxs(Na,{children:[i.jsx(ne,{variant:"outline",onClick:()=>A(!1),disabled:T,children:"Cancel"}),i.jsx(ne,{variant:"destructive",onClick:ie,disabled:T,children:T?"Pausing...":"Confirm Pause"})]})]})}),i.jsx(gn,{open:m,onOpenChange:g,children:i.jsxs(ln,{className:"max-w-md",children:[i.jsxs(cn,{children:[i.jsx(un,{children:"Confirm GDPR Data Deletion"}),i.jsxs(Ur,{children:["This action will permanently delete all data associated with contact ID: ",i.jsx("code",{className:"bg-muted px-1 rounded",children:v})]})]}),i.jsxs(Na,{children:[i.jsx(ne,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),i.jsx(ne,{variant:"destructive",onClick:Re,disabled:k,children:k?"Deleting...":"Confirm Deletion"})]})]})}),i.jsxs(We,{className:"border-red-200",children:[i.jsx(mt,{children:i.jsxs(ht,{className:"flex items-center gap-2 text-red-700",children:[i.jsx(eo,{className:"h-4 w-4"})," Danger Zone"]})}),i.jsx(ct,{className:"space-y-3",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Paste contact UUIDs (comma/newline separated) to delete permanently."}),i.jsx(Fr,{value:r,onChange:K=>a(K.target.value),placeholder:"uuid-1, uuid-2, uuid-3",className:"min-h-[120px]"}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Parsed: ",C.length]}),i.jsx(Zt,{permission:"contacts.delete",children:i.jsxs(ne,{variant:"destructive",onClick:me,disabled:s||C.length===0,children:[i.jsx(fa,{className:"h-4 w-4 mr-2"})," Delete ",C.length||""," Contact",C.length>1?"s":""]})})]})]})})]})]})})}function r3e(){var M,T;aa();const[e,t]=p.useState([]),[n,r]=p.useState(20),[a,s]=p.useState(1),[o,l]=p.useState(0),[c,u]=p.useState("all"),[d,h]=p.useState("all"),[f,m]=p.useState(),[g,v]=p.useState([]),[x,y]=p.useState([]),[w,b]=p.useState({}),[_,k]=p.useState(!1),[j,N]=p.useState(null),[O,I]=p.useState(null),[P,S]=p.useState(!1),D=p.useMemo(()=>{if(!(f!=null&&f.from)||!(f!=null&&f.to))return{from:null,to:null};const E=Pl(f.from).toISOString(),$=OU(f.to).toISOString();return{from:E,to:$}},[f]),L=async()=>{const{data:E}=await ce.from("audit_logs").select("user_id").not("user_id","is",null).limit(1e3),$=Array.from(new Set((E||[]).map(B=>B.user_id)));if($.length>0){const{data:B}=await ce.from("v_users").select("id,email,display_name").in("id",$),R=(B||[]).map(W=>({id:W.id,email:W.email}));v(R);const C={};for(const W of B||[])C[W.id]={email:W.email,display_name:W.display_name};b(W=>({...W,...C}))}else v([]);const{data:A}=await ce.from("audit_logs").select("action").limit(1e3);y(Array.from(new Set((A||[]).map(B=>B.action))))},U=async()=>{const E=(a-1)*n,{data:$,error:A}=await ce.rpc("get_audit_logs",{p_user_id:c!=="all"?c:null,p_action:d!=="all"?d:null,p_from:D.from,p_to:D.to,p_limit:n,p_offset:E});if(!A){const B=$||[];t(B);let R=ce.from("audit_logs").select("id",{count:"exact"});c!=="all"&&(R=R.eq("user_id",c)),d!=="all"&&(R=R.eq("action",d)),D.from&&(R=R.gte("created_at",D.from)),D.to&&(R=R.lte("created_at",D.to));const{count:C}=await R;l(C||0);const Q=Array.from(new Set(B.map(X=>X.user_id).filter(Boolean))).filter(X=>!w[X]);if(Q.length>0){const{data:X}=await ce.from("v_users").select("id,email,display_name").in("id",Q),Z={};for(const te of X||[])Z[te.id]={email:te.email,display_name:te.display_name};Object.keys(Z).length&&b(te=>({...te,...Z}))}}};p.useEffect(()=>{L()},[]),p.useEffect(()=>{if(f!=null&&f.from&&!(f!=null&&f.to)){I("Select both a start date and an end date to filter logs.");return}if(f!=null&&f.to&&!(f!=null&&f.from)){m({from:f.to,to:f.to}),I(null);return}I(null)},[f]),p.useEffect(()=>{U()},[a,n,c,d,D.from,D.to]),p.useEffect(()=>{const E=ce.channel("realtime:logs").on("postgres_changes",{event:"INSERT",schema:"public",table:"audit_logs"},$=>{const A=$.new;t(R=>[A,...R].slice(0,n));const B=A.user_id;B&&!w[B]&&ce.from("v_users").select("id,email,display_name").eq("id",B).maybeSingle().then(({data:R})=>{R&&b(C=>({...C,[R.id]:{email:R.email,display_name:R.display_name}}))}),l(R=>R+1)}).subscribe();return()=>{ce.removeChannel(E)}},[n]);const F=Math.max(1,Math.ceil(o/n));return i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Logs"}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsx(ht,{children:"Filters"})}),i.jsxs(ct,{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"User"}),i.jsxs(Qt,{value:c,onValueChange:u,children:[i.jsx(Yt,{className:"h-9",children:i.jsx(Kt,{placeholder:"All"})}),i.jsxs(Xt,{children:[i.jsx(st,{value:"all",children:"All"}),g.map(E=>i.jsx(st,{value:E.id,children:E.email},E.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"Action"}),i.jsxs(Qt,{value:d,onValueChange:h,children:[i.jsx(Yt,{className:"h-9",children:i.jsx(Kt,{placeholder:"All"})}),i.jsxs(Xt,{children:[i.jsx(st,{value:"all",children:"All"}),x.map(E=>i.jsx(st,{value:E,children:E},E))]})]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"text-xs text-muted-foreground block mb-1",children:"Date Range"}),i.jsxs(Ns,{open:P,onOpenChange:E=>S(E),children:[i.jsx(Cs,{asChild:!0,onClick:()=>S(!0),children:i.jsxs(ne,{variant:"outline",className:Pe("justify-start text-left font-normal h-9 w-full",!(f!=null&&f.from)&&!(f!=null&&f.to)&&"text-muted-foreground"),children:[i.jsx(Lc,{className:"mr-2 h-4 w-4"}),f!=null&&f.from&&(f!=null&&f.to)?`${f.from.toLocaleDateString()}  ${f.to.toLocaleDateString()}`:"Select date range"]})}),i.jsx(Ji,{className:"w-auto min-w-[560px] p-0",align:"start",children:i.jsx(_m,{initialFocus:!0,mode:"range",defaultMonth:f==null?void 0:f.from,selected:f,onSelect:E=>{m(E),E!=null&&E.from&&(E!=null&&E.to)&&S(!1)},numberOfMonths:2})})]}),O?i.jsx("p",{className:"text-xs text-destructive mt-1",children:O}):null]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsxs(Qt,{value:String(n),onValueChange:E=>r(Number(E)),children:[i.jsx(Yt,{className:"h-9",children:i.jsx(Kt,{placeholder:"Page size"})}),i.jsx(Xt,{children:[10,20,50,100].map(E=>i.jsxs(st,{value:String(E),children:[E," / page"]},E))})]}),i.jsx(ne,{variant:"outline",onClick:()=>{const E=e.map($=>{var A;return{time:new Date($.created_at).toISOString(),user:$.user_id?((A=w[$.user_id])==null?void 0:A.email)||$.user_id:"",action:$.action,resource:$.resource,resource_id:$.resource_id||"",ip:$.ip?$.ip.replace(/(\d+\.\d+\.\d+)\.\d+/,"$1.*"):"",context:JSON.stringify(T4($.context||{}))}});bG(`logs_${new Date().toISOString()}.csv`,E)},children:"Export CSV"})]})]})]}),i.jsxs(We,{children:[i.jsx(mt,{children:i.jsxs(ht,{children:["Entries (",o,")"]})}),i.jsxs(ct,{children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(zb,{children:[i.jsx(Wb,{children:i.jsxs(so,{children:[i.jsx(Jn,{children:"Time"}),i.jsx(Jn,{children:"User"}),i.jsx(Jn,{children:"Action"}),i.jsx(Jn,{children:"Resource"}),i.jsx(Jn,{children:"Resource ID"}),i.jsx(Jn,{children:"IP"}),i.jsx(Jn,{})]})}),i.jsx(qb,{children:e.map(E=>{var $,A;return i.jsxs(so,{children:[i.jsx(Un,{children:new Date(E.created_at).toLocaleString()}),i.jsx(Un,{children:E.user_id?(($=w[E.user_id])==null?void 0:$.display_name)||((A=w[E.user_id])==null?void 0:A.email)||E.user_id:""}),i.jsx(Un,{children:E.action}),i.jsx(Un,{children:E.resource}),i.jsx(Un,{children:E.resource_id||""}),i.jsx(Un,{children:E.ip||""}),i.jsx(Un,{className:"text-right",children:i.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{N(E),k(!0)},children:"Details"})})]},E.id)})})]})}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",a," of ",F]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ne,{variant:"outline",disabled:a<=1,onClick:()=>s(E=>Math.max(1,E-1)),children:"Prev"}),i.jsx(ne,{variant:"outline",disabled:a>=F,onClick:()=>s(E=>Math.min(F,E+1)),children:"Next"})]})]})]})]}),i.jsx(gn,{open:_,onOpenChange:k,children:i.jsxs(ln,{className:"max-w-2xl",children:[i.jsxs(cn,{children:[i.jsx(un,{children:"Log Details"}),i.jsx(Ur,{children:j?new Date(j.created_at).toLocaleString():""})]}),j&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"User"}),i.jsx("div",{children:j.user_id?((M=w[j.user_id])==null?void 0:M.display_name)||((T=w[j.user_id])==null?void 0:T.email)||j.user_id:""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Action"}),i.jsx("div",{children:j.action})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Resource"}),i.jsx("div",{children:j.resource})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Resource ID"}),i.jsx("div",{children:j.resource_id||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"IP"}),i.jsx("div",{children:j.ip||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"User Agent"}),i.jsx("div",{className:"truncate",title:j.user_agent||void 0,children:j.user_agent||""})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Context"}),i.jsx("pre",{className:"max-h-64 overflow-auto rounded bg-muted p-3 text-xs",children:JSON.stringify(j.context??{},null,2)})]})]}),i.jsx(Na,{children:i.jsx(ne,{variant:"outline",onClick:()=>k(!1),children:"Close"})})]})})]})}const lD=({children:e})=>{var h,f,m,g;const{user:t,signOut:n}=aa();p.useState("profile");const[r,a]=p.useState(!0),[s,o]=p.useState(!1),l=li(),c=(v,x)=>v?v.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2):x.substring(0,2).toUpperCase(),u=async()=>{try{await n()}catch(v){console.error("Error signing out:",v)}},d=()=>{l("/reset-password")};return i.jsxs(Ns,{children:[i.jsx(Cs,{asChild:!0,children:e}),i.jsx(Ji,{className:"w-[300px] h-[320px] p-0 overflow-hidden",side:"left",align:"start",children:i.jsx("div",{className:"flex h-full",children:i.jsx("div",{className:"flex-1 p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Pa,{className:"h-10 w-10",children:[i.jsx(Bc,{src:(h=t==null?void 0:t.user_metadata)==null?void 0:h.avatar_url,alt:((f=t==null?void 0:t.user_metadata)==null?void 0:f.full_name)||(t==null?void 0:t.email)}),i.jsx(Oa,{className:"text-sm bg-blue-100 text-blue-600",children:c((m=t==null?void 0:t.user_metadata)==null?void 0:m.full_name,(t==null?void 0:t.email)||"")})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-sm font-semibold",children:((g=t==null?void 0:t.user_metadata)==null?void 0:g.full_name)||"Audit 4"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t==null?void 0:t.email})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Online Status"}),i.jsx("div",{className:"text-xs font-medium",children:"Online"})]}),i.jsx(Es,{checked:r,onCheckedChange:a,className:"scale-75"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Notifications"}),i.jsx("div",{className:"text-xs font-medium",children:"Disabled"})]}),i.jsx(Es,{checked:s,onCheckedChange:o,className:"scale-75"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium",children:"Reset Password"}),i.jsx(ne,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:d,children:i.jsx(sm,{className:"h-3 w-3 text-muted-foreground"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium",children:"Log Out"}),i.jsx(ne,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:u,children:i.jsx(xN,{className:"h-3 w-3 text-muted-foreground"})})]})]})]})})})})]})};function a3e({icon:e,label:t,active:n=!1,onClick:r,collapsed:a,permissions:s,requireAll:o=!1,resourceAny:l=[],requiredRoles:c=[],roleBypass:u=[]}){const{hasAnyPermission:d,hasAllPermissions:h,hasAnyRole:f,loading:m}=Or();if(m)return null;const g=o?h(s):d(s),v=c.length===0||f(c);return!(u.length>0&&f(u))&&(!g||!v)?null:i.jsxs("button",{type:"button",onClick:r,className:Pe("group grid h-10 w-full grid-cols-[1.125rem,1fr] items-center rounded-md px-3 text-left text-sm transition-all duration-200 gap-2",n?"bg-blue-100 text-blue-700 border border-blue-200":"text-muted-foreground hover:bg-blue-50 hover:text-blue-600 hover:border hover:border-blue-100",a&&"grid-cols-[1.125rem,0fr]"),"aria-current":n?"page":void 0,title:a?t:void 0,children:[i.jsx(e,{className:`h-4 w-4 shrink-0 transition-colors ${n?"text-blue-600":"group-hover:text-blue-600"}`}),i.jsx("span",{className:Pe("overflow-hidden whitespace-nowrap text-ellipsis transition-opacity duration-200",a&&"opacity-0 pointer-events-none"),children:t})]})}const Ou=e=>{const t=Ju[e];return Array.isArray(t)?t.filter(n=>n==="read"||n.startsWith("read_")).map(n=>`${e}.${n}`):[]},Yj={admin:{key:"admin",label:"Admin Panel",icon:ho,permissions:["admin_panel.read"],requireAll:!1,requiredRoles:[pn.MASTER_AGENT],description:"Master agent control center"},chat:{key:"chat",label:"Chat",icon:Ec,permissions:Ou("threads"),requireAll:!1,description:"View and manage conversations"},analytics:{key:"analytics",label:"Analytics",icon:p4,permissions:Ou("analytics"),requireAll:!1,description:"View performance metrics and insights"},logs:{key:"logs",label:"Logs",icon:y4,permissions:["audit_logs.read"],requireAll:!0,description:"View user action logs"},contacts:{key:"contacts",label:"Contacts",icon:bN,permissions:Ou("contacts"),requireAll:!1,description:"Manage customer contacts and identities"},platforms:{key:"platforms",label:"Connected Platforms",icon:j4,permissions:Ou("channels"),requireAll:!1,description:"Manage connected channels and integrations"},aiagents:{key:"aiagents",label:"AI Agents",icon:m4,permissions:Ou("ai_profiles"),requireAll:!1,description:"Configure and manage AI agents",forbiddenRoles:[pn.AGENT]},humanagents:{key:"humanagents",label:"Human Agents",icon:k4,permissions:Ou("super_agents"),requireAll:!1,roleBypass:[pn.MASTER_AGENT,pn.SUPER_AGENT],description:"Manage human agent assignments and roles"},permissions:{key:"permissions",label:"Permissions",icon:fo,permissions:["roles.read"],requireAll:!0,requiredRoles:[pn.MASTER_AGENT],description:"Manage roles and permissions"}},A9=["admin","chat","analytics","logs","contacts","platforms","aiagents","humanagents","permissions"];function i3e(){const{hasAnyPermission:e,hasAllPermissions:t,hasAnyRole:n,userRoles:r,userPermissions:a}=Or(),s=u=>{const d=Yj[u];return!d||(Array.isArray(d.forbiddenRoles)&&d.forbiddenRoles.length>0?n(d.forbiddenRoles):!1)?!1:(Array.isArray(d.roleBypass)&&d.roleBypass.length>0?n(d.roleBypass):!1)?!0:(d.permissions.length===0?!0:d.requireAll?t(d.permissions):e(d.permissions))?!d.requiredRoles||d.requiredRoles.length===0?!0:n(d.requiredRoles):!1},o=()=>A9.filter(u=>s(u));return{canAccessNavItem:s,getAccessibleNavItems:o,getDefaultNavItem:()=>{const u=o();return u.length>0?u[0]:null},getNavItem:u=>Yj[u],navigationConfig:Yj}}const lv=({step:e,title:t,description:n,emoji:r})=>i.jsxs("div",{className:"flex items-start gap-4 rounded-lg border border-border bg-card p-4 shadow-sm transition-transform hover:-translate-y-0.5",children:[i.jsx("div",{className:"text-2xl animate-float","aria-hidden":!0,children:r}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(At,{variant:"secondary",children:[e,"."]}),i.jsx("h3",{className:"text-base font-semibold text-foreground",children:t})]}),i.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n})]})]}),cD=()=>{var M,T,E,$,A;const[e,t]=p.useState("chat"),[n,r]=p.useState(!1),{user:a,signOut:s,setAccountDeactivated:o,accountDeactivated:l}=aa();li();const[c,u]=LN(),{loading:d,hasRole:h}=Or(),{getDefaultNavItem:f,getNavItem:m,canAccessNavItem:g,getAccessibleNavItems:v}=i3e(),[x,y]=p.useState(!1),[w,b]=p.useState(!1),[_,k]=p.useState(null),[j,N]=p.useState(null),O="synka_ai_paused_ack",I=A9,P=(B,R)=>{const C=new URLSearchParams(c);C.set("menu",B),u(C,R)};p.useEffect(()=>{if(d)return;const B=c.get("menu");if(B&&I.includes(B)){const R=B;if(g(R))R!==e&&t(R);else{const C=f();C&&C!==e&&(t(C),P(C,{replace:!0}))}}else if(!B){const R=f();P(R||"chat",{replace:!0})}},[c,g,f,d]),p.useEffect(()=>{if(d)return;const B=f();(!I.includes(e)||!g(e))&&B&&(t(B),P(B,{replace:!0}))},[f,g,e,I,d]);const S=async()=>{try{await s()}catch(B){console.error("Error signing out:",B)}},D=(B,R)=>B?B.split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2):R.substring(0,2).toUpperCase();p.useEffect(()=>{(async()=>{var R;try{const{data:C}=await ce.auth.getUser(),W=(R=C==null?void 0:C.user)==null?void 0:R.id;if(!W)return;const{data:Q}=await ce.from("org_members").select("org_id").eq("user_id",W).limit(1).maybeSingle(),X=Q==null?void 0:Q.org_id;if(!X)return;const{data:Z,error:te}=await _t.from("org_settings").select("ai_paused, ai_paused_at, ai_paused_by_user_id").eq("org_id",X).maybeSingle();if(te)throw te;const J=!!(Z!=null&&Z.ai_paused);b(J),k((Z==null?void 0:Z.ai_paused_at)??null);const ie=Z==null?void 0:Z.ai_paused_by_user_id;if(ie){let ge=null;try{const{data:ae}=await _t.from("users_profile").select("user_id, display_name").eq("user_id",ie).maybeSingle();if(ge=(ae==null?void 0:ae.display_name)??null,!ge){const{data:Re}=await _t.from("v_users").select("id, email").eq("id",ie).maybeSingle();ge=(Re==null?void 0:Re.email)??ie}}catch{ge=ie}N(ge)}else N(null)}catch{}})()},[]),p.useEffect(()=>{w?localStorage.getItem(O)||y(!0):(localStorage.removeItem(O),y(!1))},[w]);const L=()=>{try{localStorage.setItem(O,Date.now().toString())}catch{}y(!1)},U=()=>{t("admin"),P("admin")},F=h(pn.MASTER_AGENT)||h(pn.SUPER_AGENT);return l?i.jsx("div",{className:"min-h-screen bg-background text-foreground",children:i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Akun Dinonaktifkan"}),i.jsx("p",{className:"text-gray-600",children:"Akun Anda telah dinonaktifkan dan tidak dapat mengakses sistem."})]})})}):i.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[i.jsxs("div",{className:"mx-auto flex min-h-screen",children:[i.jsxs("aside",{className:`shrink-0 border-r border-sidebar-border bg-sidebar transition-all duration-300 ease-in-out ${n?"w-64":"w-[4.7rem]"} md:flex md:flex-col p-4 sticky top-0 h-screen overflow-y-auto`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[i.jsx("div",{className:"flex items-center justify-center px-2 py-3 transition-all duration-200",children:n?i.jsx("img",{src:"/synka.png",alt:"Synka",className:"h-10 w-auto object-contain transition-all duration-300 scale-125"}):i.jsx("img",{src:"/synka_logo.png",alt:"Synka Logo",className:"h-10 w-auto object-contain transition-all duration-300 scale-110"})}),i.jsx(Md,{className:"mb-4 mt-1"}),i.jsx("nav",{className:"flex flex-col gap-1 flex-1",children:v().map(B=>{const R=m(B);return i.jsx(a3e,{icon:R.icon,label:R.label,active:e===B,onClick:()=>{t(B),P(B)},collapsed:!n,permissions:R.permissions,requireAll:R.requireAll,resourceAny:R.resourceAny,requiredRoles:R.requiredRoles,roleBypass:R.roleBypass},B)})}),i.jsxs("div",{className:"mt-auto flex flex-col gap-1 pt-6",children:[i.jsx(Md,{className:"mb-3"}),i.jsx(lD,{children:i.jsxs("button",{type:"button",className:Pe("group grid h-10 w-full grid-cols-[1.125rem,1fr] items-center rounded-md px-3 text-left text-sm transition-all duration-200 gap-2","text-muted-foreground hover:bg-blue-50 hover:text-blue-600 hover:border hover:border-blue-100",!n&&"grid-cols-[1.125rem,0fr]"),title:n?void 0:"Profile",children:[i.jsx(BV,{className:"h-4 w-4 shrink-0 transition-colors group-hover:text-blue-600"}),i.jsx("span",{className:Pe("overflow-hidden whitespace-nowrap text-ellipsis transition-opacity duration-200",!n&&"opacity-0 pointer-events-none"),children:"Profile"})]})})]})]}),i.jsxs("main",{className:"flex-1",children:[i.jsx("header",{className:"sticky top-0 z-10 border-b border-border bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:i.jsxs("div",{className:"flex items-center justify-between gap-4 px-4 py-3 md:px-8",children:[i.jsx("div",{className:"flex items-center gap-2 md:gap-3"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx(At,{className:"hidden sm:inline-flex bg-success text-success-foreground cursor-help",children:"Online"})}),i.jsx(ye,{children:i.jsx("p",{children:"Status pengguna saat ini: Online"})})]}),i.jsx(J5,{}),i.jsxs("div",{className:"text-right hidden sm:block min-w-0",children:[i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("div",{className:"text-sm font-medium max-w-[28ch] truncate cursor-help",children:((M=a==null?void 0:a.user_metadata)==null?void 0:M.full_name)||"User"})}),i.jsx(ye,{children:i.jsx("p",{children:"Nama lengkap pengguna"})})]}),i.jsxs(xe,{children:[i.jsx(be,{asChild:!0,children:i.jsx("div",{className:"text-xs text-muted-foreground max-w-[32ch] truncate cursor-help",children:a==null?void 0:a.email})}),i.jsx(ye,{children:i.jsx("p",{children:"Alamat email pengguna"})})]})]}),i.jsxs(dc,{children:[i.jsx(hc,{asChild:!0,children:i.jsx(ne,{variant:"ghost",className:"relative h-9 w-9 rounded-full",children:i.jsxs(Pa,{className:"h-9 w-9",children:[i.jsx(Bc,{src:(T=a==null?void 0:a.user_metadata)==null?void 0:T.avatar_url,alt:((E=a==null?void 0:a.user_metadata)==null?void 0:E.full_name)||(a==null?void 0:a.email)}),i.jsx(Oa,{className:"text-sm",children:D(($=a==null?void 0:a.user_metadata)==null?void 0:$.full_name,(a==null?void 0:a.email)||"")})]})})}),i.jsxs(el,{className:"w-56",align:"end",forceMount:!0,children:[i.jsx(F5,{className:"font-normal",children:i.jsxs("div",{className:"flex flex-col space-y-1",children:[i.jsx("p",{className:"text-sm font-medium leading-none",children:((A=a==null?void 0:a.user_metadata)==null?void 0:A.full_name)||"User"}),i.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:a==null?void 0:a.email})]})}),i.jsx(j1,{}),i.jsx(lD,{children:i.jsxs("button",{className:"flex items-center w-full px-2 py-1.5 text-sm text-left hover:bg-accent hover:text-accent-foreground rounded-sm",children:[i.jsx(iy,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Profile"})]})}),i.jsx(j1,{}),i.jsxs(la,{onClick:S,children:[i.jsx(xN,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Log out"})]})]})]})]})]})}),i.jsx("section",{className:"px-4 py-6 md:px-8",children:e==="admin"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Admin Panel"}),i.jsx(n3e,{})]}):e==="chat"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Chat Inbox"}),i.jsx(Fpe,{})]}):e==="analytics"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Analytics Dashboard"}),i.jsx(Zt,{permission:"analytics.read",children:i.jsx(PFe,{})})]}):e==="contacts"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Contacts Management"}),i.jsx(Zt,{permission:"contacts.read",children:i.jsx(Xpe,{})})]}):e==="platforms"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Connected Platforms"}),i.jsx(Zt,{permission:"channels.read",children:i.jsx(nge,{})})]}):e==="aiagents"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"AI Agents"}),i.jsx(Zt,{permission:"ai_profiles.read",children:i.jsx(GFe,{})})]}):e==="humanagents"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Human Agents"}),F?i.jsx(aD,{}):i.jsx(Zt,{permission:"super_agents.read",fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Human Agents."}),children:i.jsx(aD,{})})]}):e==="permissions"?i.jsx(C9,{role:pn.MASTER_AGENT,fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Permissions."}),children:i.jsxs(Zt,{permission:"roles.read",children:[i.jsx("h1",{className:"sr-only",children:"Permissions"}),i.jsx(QFe,{})]})}):e==="logs"?i.jsxs(Zt,{permission:"audit_logs.read",fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Logs."}),children:[i.jsx("h1",{className:"sr-only",children:"Logs"}),i.jsx(r3e,{})]}):i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Selamat datang kembali di Synka!"}),i.jsxs("div",{className:"mt-6 grid gap-4 md:max-w-2xl",children:[i.jsx(lv,{step:1,title:"Hubungkan Platform",description:"Mulai terima pesan dari Whatsapp, IG, dan FB Anda!",emoji:""}),i.jsx(lv,{step:2,title:"Buat AI Agent",description:"Jawab pesan masuk dengan Agent AI Anda.",emoji:""}),i.jsx(lv,{step:3,title:"Undang Agen Manusia",description:"Undang tim Anda untuk membantu menjawab chat.",emoji:""}),i.jsx(lv,{step:4,title:"Konek AI Agent ke Inbox",description:"Hubungkan AI Agent dan Human Agent ke platform.",emoji:""})]}),i.jsxs("p",{className:"mt-4 text-sm text-muted-foreground",children:["Butuh bantuan lebih? ",i.jsx("a",{className:"text-brand underline underline-offset-4",href:"#",children:"Lihat Tutorial Youtube kami"})]})]})})]})]}),i.jsx(sae,{open:x,onClose:L,isMasterAgent:h(pn.MASTER_AGENT),pausedByName:j,pausedAt:_,onOpenAdminPanel:h(pn.MASTER_AGENT)?U:void 0})]})};function s3e(){var l,c,u,d;const{user:e,signOut:t}=aa(),[n,r]=p.useState(!1),a=async()=>{r(!0);try{await t(),Be.success("Signed out successfully")}catch{Be.error("Failed to sign out")}finally{r(!1)}};if(!e)return null;const s=(h,f)=>h?h.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2):f.substring(0,2).toUpperCase(),o=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return i.jsxs(We,{className:"w-full max-w-md mx-auto",children:[i.jsxs(mt,{className:"text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsxs(Pa,{className:"h-20 w-20",children:[i.jsx(Bc,{src:(l=e.user_metadata)==null?void 0:l.avatar_url,alt:((c=e.user_metadata)==null?void 0:c.full_name)||e.email}),i.jsx(Oa,{className:"text-lg",children:s((u=e.user_metadata)==null?void 0:u.full_name,e.email||"")})]})}),i.jsx(ht,{className:"text-xl",children:((d=e.user_metadata)==null?void 0:d.full_name)||"User"}),i.jsx(Ni,{children:e.email}),i.jsx("div",{className:"flex justify-center mt-2",children:i.jsxs(At,{variant:"secondary",className:"flex items-center gap-1",children:[i.jsx(fo,{className:"w-3 h-3"}),e.email_confirmed_at?"Verified":"Unverified"]})})]}),i.jsxs(ct,{className:"space-y-4",children:[i.jsx(Md,{}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ay,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.email})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Lc,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Member since"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:o(e.created_at)})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(iy,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"User ID"}),i.jsxs("p",{className:"text-sm text-muted-foreground font-mono",children:[e.id.substring(0,8),"..."]})]})]})]}),i.jsx(Md,{}),i.jsxs(ne,{variant:"outline",className:"w-full",onClick:a,disabled:n,children:[i.jsx(xN,{className:"w-4 h-4 mr-2"}),n?"Signing out...":"Sign Out"]})]})]})}function o3e(){const e=li();return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs(ne,{variant:"ghost",onClick:()=>e("/"),children:[i.jsx(jp,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),i.jsx(J5,{})]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Profile"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage your account settings and preferences"})]}),i.jsx(s3e,{})]})})}const uD=e=>e.replace(/\s/g,""),l3e=[{id:"lowercase",test:e=>/[a-z]/.test(e),message:"Minimal 1 huruf kecil (a-z)"},{id:"uppercase",test:e=>/[A-Z]/.test(e),message:"Minimal 1 huruf besar (A-Z)"},{id:"number",test:e=>/[0-9]/.test(e),message:"Minimal 1 angka (0-9)"},{id:"symbol",test:e=>/[^A-Za-z0-9]/.test(e),message:"Minimal 1 simbol (contoh: !@#$)"},{id:"length",test:e=>e.length>=8,message:"Minimal 8 karakter"}],dD=e=>l3e.filter(t=>!t.test(e)).map(t=>t.message);function hD(){const[e,t]=p.useState(""),[n,r]=p.useState(""),[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[d,h]=p.useState(!1),[f,m]=p.useState(!1),g=li();p.useEffect(()=>{(async()=>{try{const _=new URL(window.location.href).searchParams.get("code");_&&await ce.auth.exchangeCodeForSession(_);const{data:{session:k}}=await ce.auth.getSession();k||u("Invalid or expired reset link. Please request a new password reset.")}catch(b){console.warn("Password setup init failed",b)}})()},[]);const v=async w=>{if(w.preventDefault(),l(!0),u(null),!e){u("Kata sandi baru belum diisi."),m(!0),l(!1);return}if(dD(e).length>0){u("Pastikan kata sandi memenuhi semua persyaratan."),m(!0),l(!1);return}if(e!==n){u("Konfirmasi kata sandi tidak sama."),l(!1);return}try{const{error:_}=await ce.auth.updateUser({password:e});if(_)throw _;try{const{data:{user:k}}=await ce.auth.getUser();k&&await ce.from("users_profile").update({password_set:!0}).eq("user_id",k.id)}catch(k){console.warn("Failed to update password_set flag:",k)}h(!0),Be.success("Password updated successfully!");try{await ce.auth.signOut()}catch{}try{localStorage.removeItem("otpVerified"),localStorage.removeItem("otpRequired"),localStorage.removeItem("app.lastAuthEvent"),localStorage.removeItem("auth.intent")}catch{}setTimeout(()=>{g("/")},1500)}catch(_){console.error("Password reset error:",_),u(_ instanceof Error?_.message:"Gagal memperbarui kata sandi."),Be.error("Gagal memperbarui kata sandi.")}finally{l(!1)}},x=f&&e.length>0,y=p.useMemo(()=>x?dD(e):[],[e,x]);return d?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 p-4",children:i.jsxs(We,{className:"w-full max-w-md",children:[i.jsxs(mt,{className:"text-center",children:[i.jsx(ht,{className:"text-2xl font-bold text-green-600",children:"Success!"}),i.jsx(Ni,{children:"Your password has been updated successfully. You will be redirected to the login page shortly."})]}),i.jsx(ct,{className:"text-center",children:i.jsx(ne,{onClick:()=>g("/"),className:"w-full",children:"Go to Login"})})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 p-4",children:i.jsxs(We,{className:"w-full max-w-md",children:[i.jsxs(mt,{className:"space-y-1",children:[i.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>g("/"),className:"absolute top-4 left-4",children:[i.jsx(jp,{className:"w-4 h-4 mr-2"}),"Back to Login"]}),i.jsxs("div",{className:"text-center",children:[i.jsx(ht,{className:"text-2xl font-bold",children:"Reset Password"}),i.jsx(Ni,{children:"Enter your new password below"})]})]}),i.jsxs(ct,{children:[c&&i.jsx(ym,{className:"mb-4 border-red-200 bg-red-50",children:i.jsx(xm,{className:"text-red-800",children:c})}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"password",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(sm,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(ot,{id:"password",type:a?"text":"password",placeholder:"Enter new password",value:e,onChange:w=>{f||m(!0),t(uD(w.target.value))},onKeyDown:w=>{w.key===" "&&w.preventDefault()},className:"pl-10 pr-10",required:!0,minLength:8}),i.jsx(ne,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>s(!a),children:a?i.jsx(x4,{className:"h-4 w-4"}):i.jsx(yN,{className:"h-4 w-4"})})]}),y.length>0&&i.jsx("div",{className:"mt-2 space-y-1",children:y.map(w=>i.jsxs("p",{className:"flex items-center gap-2 text-xs text-red-600",children:[i.jsx(v4,{className:"h-3 w-3"}),w]},w))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{htmlFor:"confirm-password",children:"Confirm New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(sm,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(ot,{id:"confirm-password",type:a?"text":"password",placeholder:"Confirm new password",value:n,onChange:w=>r(uD(w.target.value)),onKeyDown:w=>{w.key===" "&&w.preventDefault()},className:"pl-10",required:!0,minLength:8})]})]}),i.jsx(ne,{type:"submit",className:"w-full",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx(Ht,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating password..."]}):"Update Password"})]})]})]})})}var c3e=Object.defineProperty,u3e=Object.defineProperties,d3e=Object.getOwnPropertyDescriptors,Cx=Object.getOwnPropertySymbols,E9=Object.prototype.hasOwnProperty,T9=Object.prototype.propertyIsEnumerable,fD=(e,t,n)=>t in e?c3e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h3e=(e,t)=>{for(var n in t||(t={}))E9.call(t,n)&&fD(e,n,t[n]);if(Cx)for(var n of Cx(t))T9.call(t,n)&&fD(e,n,t[n]);return e},f3e=(e,t)=>u3e(e,d3e(t)),m3e=(e,t)=>{var n={};for(var r in e)E9.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Cx)for(var r of Cx(e))t.indexOf(r)<0&&T9.call(e,r)&&(n[r]=e[r]);return n};function p3e(e){let t=setTimeout(e,0),n=setTimeout(e,10),r=setTimeout(e,50);return[t,n,r]}function g3e(e){let t=p.useRef();return p.useEffect(()=>{t.current=e}),t.current}var v3e=18,P9=40,y3e=`${P9}px`,x3e=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function b3e({containerRef:e,inputRef:t,pushPasswordManagerStrategy:n,isFocused:r}){let[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(!1),d=p.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&a&&o,[a,o,n]),h=p.useCallback(()=>{let f=e.current,m=t.current;if(!f||!m||c||n==="none")return;let g=f,v=g.getBoundingClientRect().left+g.offsetWidth,x=g.getBoundingClientRect().top+g.offsetHeight/2,y=v-v3e,w=x;document.querySelectorAll(x3e).length===0&&document.elementFromPoint(y,w)===f||(s(!0),u(!0))},[e,t,c,n]);return p.useEffect(()=>{let f=e.current;if(!f||n==="none")return;function m(){let v=window.innerWidth-f.getBoundingClientRect().right;l(v>=P9)}m();let g=setInterval(m,1e3);return()=>{clearInterval(g)}},[e,n]),p.useEffect(()=>{let f=r||document.activeElement===t.current;if(n==="none"||!f)return;let m=setTimeout(h,0),g=setTimeout(h,2e3),v=setTimeout(h,5e3),x=setTimeout(()=>{u(!0)},6e3);return()=>{clearTimeout(m),clearTimeout(g),clearTimeout(v),clearTimeout(x)}},[t,r,n,h]),{hasPWMBadge:a,willPushPWMBadge:d,PWM_BADGE_SPACE_WIDTH:y3e}}var O9=p.createContext({}),I9=p.forwardRef((e,t)=>{var n=e,{value:r,onChange:a,maxLength:s,textAlign:o="left",pattern:l,placeholder:c,inputMode:u="numeric",onComplete:d,pushPasswordManagerStrategy:h="increase-width",pasteTransformer:f,containerClassName:m,noScriptCSSFallback:g=w3e,render:v,children:x}=n,y=m3e(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),w,b,_,k,j;let[N,O]=p.useState(typeof y.defaultValue=="string"?y.defaultValue:""),I=r??N,P=g3e(I),S=p.useCallback(me=>{a==null||a(me),O(me)},[a]),D=p.useMemo(()=>l?typeof l=="string"?new RegExp(l):l:null,[l]),L=p.useRef(null),U=p.useRef(null),F=p.useRef({value:I,onChange:S,isIOS:typeof window<"u"&&((b=(w=window==null?void 0:window.CSS)==null?void 0:w.supports)==null?void 0:b.call(w,"-webkit-touch-callout","none"))}),M=p.useRef({prev:[(_=L.current)==null?void 0:_.selectionStart,(k=L.current)==null?void 0:k.selectionEnd,(j=L.current)==null?void 0:j.selectionDirection]});p.useImperativeHandle(t,()=>L.current,[]),p.useEffect(()=>{let me=L.current,K=U.current;if(!me||!K)return;F.current.value!==me.value&&F.current.onChange(me.value),M.current.prev=[me.selectionStart,me.selectionEnd,me.selectionDirection];function de(){if(document.activeElement!==me){R(null),W(null);return}let Ye=me.selectionStart,ft=me.selectionEnd,Ze=me.selectionDirection,ut=me.maxLength,ee=me.value,qe=M.current.prev,dt=-1,se=-1,ve;if(ee.length!==0&&Ye!==null&&ft!==null){let rt=Ye===ft,bt=Ye===ee.length&&ee.length<ut;if(rt&&!bt){let ue=Ye;if(ue===0)dt=0,se=1,ve="forward";else if(ue===ut)dt=ue-1,se=ue,ve="backward";else if(ut>1&&ee.length>1){let Se=0;if(qe[0]!==null&&qe[1]!==null){ve=ue<qe[1]?"backward":"forward";let we=qe[0]===qe[1]&&qe[0]<ut;ve==="backward"&&!we&&(Se=-1)}dt=Se+ue,se=Se+ue+1}}dt!==-1&&se!==-1&&dt!==se&&L.current.setSelectionRange(dt,se,ve)}let oe=dt!==-1?dt:Ye,Xe=se!==-1?se:ft,ke=ve??Ze;R(oe),W(Xe),M.current.prev=[oe,Xe,ke]}if(document.addEventListener("selectionchange",de,{capture:!0}),de(),document.activeElement===me&&A(!0),!document.getElementById("input-otp-style")){let Ye=document.createElement("style");if(Ye.id="input-otp-style",document.head.appendChild(Ye),Ye.sheet){let ft="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";hf(Ye.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),hf(Ye.sheet,`[data-input-otp]:autofill { ${ft} }`),hf(Ye.sheet,`[data-input-otp]:-webkit-autofill { ${ft} }`),hf(Ye.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),hf(Ye.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let $e=()=>{K&&K.style.setProperty("--root-height",`${me.clientHeight}px`)};$e();let nt=new ResizeObserver($e);return nt.observe(me),()=>{document.removeEventListener("selectionchange",de,{capture:!0}),nt.disconnect()}},[]);let[T,E]=p.useState(!1),[$,A]=p.useState(!1),[B,R]=p.useState(null),[C,W]=p.useState(null);p.useEffect(()=>{p3e(()=>{var me,K,de,$e;(me=L.current)==null||me.dispatchEvent(new Event("input"));let nt=(K=L.current)==null?void 0:K.selectionStart,Ye=(de=L.current)==null?void 0:de.selectionEnd,ft=($e=L.current)==null?void 0:$e.selectionDirection;nt!==null&&Ye!==null&&(R(nt),W(Ye),M.current.prev=[nt,Ye,ft])})},[I,$]),p.useEffect(()=>{P!==void 0&&I!==P&&P.length<s&&I.length===s&&(d==null||d(I))},[s,d,P,I]);let Q=b3e({containerRef:U,inputRef:L,pushPasswordManagerStrategy:h,isFocused:$}),X=p.useCallback(me=>{let K=me.currentTarget.value.slice(0,s);if(K.length>0&&D&&!D.test(K)){me.preventDefault();return}typeof P=="string"&&K.length<P.length&&document.dispatchEvent(new Event("selectionchange")),S(K)},[s,S,P,D]),Z=p.useCallback(()=>{var me;if(L.current){let K=Math.min(L.current.value.length,s-1),de=L.current.value.length;(me=L.current)==null||me.setSelectionRange(K,de),R(K),W(de)}A(!0)},[s]),te=p.useCallback(me=>{var K,de;let $e=L.current;if(!f&&(!F.current.isIOS||!me.clipboardData||!$e))return;let nt=me.clipboardData.getData("text/plain"),Ye=f?f(nt):nt;me.preventDefault();let ft=(K=L.current)==null?void 0:K.selectionStart,Ze=(de=L.current)==null?void 0:de.selectionEnd,ut=(ft!==Ze?I.slice(0,ft)+Ye+I.slice(Ze):I.slice(0,ft)+Ye+I.slice(ft)).slice(0,s);if(ut.length>0&&D&&!D.test(ut))return;$e.value=ut,S(ut);let ee=Math.min(ut.length,s-1),qe=ut.length;$e.setSelectionRange(ee,qe),R(ee),W(qe)},[s,S,D,I]),J=p.useMemo(()=>({position:"relative",cursor:y.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[y.disabled]),ie=p.useMemo(()=>({position:"absolute",inset:0,width:Q.willPushPWMBadge?`calc(100% + ${Q.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:Q.willPushPWMBadge?`inset(0 ${Q.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Q.PWM_BADGE_SPACE_WIDTH,Q.willPushPWMBadge,o]),ge=p.useMemo(()=>p.createElement("input",f3e(h3e({autoComplete:y.autoComplete||"one-time-code"},y),{"data-input-otp":!0,"data-input-otp-placeholder-shown":I.length===0||void 0,"data-input-otp-mss":B,"data-input-otp-mse":C,inputMode:u,pattern:D==null?void 0:D.source,"aria-placeholder":c,style:ie,maxLength:s,value:I,ref:L,onPaste:me=>{var K;te(me),(K=y.onPaste)==null||K.call(y,me)},onChange:X,onMouseOver:me=>{var K;E(!0),(K=y.onMouseOver)==null||K.call(y,me)},onMouseLeave:me=>{var K;E(!1),(K=y.onMouseLeave)==null||K.call(y,me)},onFocus:me=>{var K;Z(),(K=y.onFocus)==null||K.call(y,me)},onBlur:me=>{var K;A(!1),(K=y.onBlur)==null||K.call(y,me)}})),[X,Z,te,u,ie,s,C,B,y,D==null?void 0:D.source,I]),ae=p.useMemo(()=>({slots:Array.from({length:s}).map((me,K)=>{var de;let $e=$&&B!==null&&C!==null&&(B===C&&K===B||K>=B&&K<C),nt=I[K]!==void 0?I[K]:null,Ye=I[0]!==void 0?null:(de=c==null?void 0:c[K])!=null?de:null;return{char:nt,placeholderChar:Ye,isActive:$e,hasFakeCaret:$e&&nt===null}}),isFocused:$,isHovering:!y.disabled&&T}),[$,T,s,C,B,y.disabled,I]),Re=p.useMemo(()=>v?v(ae):p.createElement(O9.Provider,{value:ae},x),[x,ae,v]);return p.createElement(p.Fragment,null,g!==null&&p.createElement("noscript",null,p.createElement("style",null,g)),p.createElement("div",{ref:U,"data-input-otp-container":!0,style:J,className:m},Re,p.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ge)))});I9.displayName="Input";function hf(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var w3e=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const R9=p.forwardRef(({className:e,containerClassName:t,...n},r)=>i.jsx(I9,{ref:r,containerClassName:Pe("flex items-center gap-2 has-[:disabled]:opacity-50",t),className:Pe("disabled:cursor-not-allowed",e),...n}));R9.displayName="InputOTP";const M9=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Pe("flex items-center",e),...t}));M9.displayName="InputOTPGroup";const cc=p.forwardRef(({index:e,className:t,...n},r)=>{const a=p.useContext(O9),{char:s,hasFakeCaret:o,isActive:l}=a.slots[e];return i.jsxs("div",{ref:r,className:Pe("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",l&&"z-10 ring-2 ring-ring ring-offset-background",t),...n,children:[s,o&&i.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});cc.displayName="InputOTPSlot";const j3e=p.forwardRef(({...e},t)=>i.jsx("div",{ref:t,role:"separator",...e,children:i.jsx(IV,{})}));j3e.displayName="InputOTPSeparator";function _3e(){const e=li(),t=Fl(),{user:n,session:r,otpRequired:a,setOtpVerified:s}=aa(),[o,l]=p.useState(""),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[f,m]=p.useState(null),[g,v]=p.useState(null),[x,y]=p.useState(!1),[w,b]=p.useState(0),[_,k]=p.useState(0);p.useEffect(()=>{v((n==null?void 0:n.email)??null),(!n||!a)&&e("/",{replace:!0});try{const I=new URL(window.location.href),P=I.searchParams.get("type"),S=!!I.searchParams.get("code"),L=(window.location.hash||"").includes("access_token=");y(P==="recovery"||S||L);const U=localStorage.getItem("otpCooldownUntil"),F=U?parseInt(U,10):0;F&&F>Date.now()&&b(F)}catch{}},[n,a,e]),p.useEffect(()=>{if(!w){k(0);return}const I=()=>{const S=Math.ceil((w-Date.now())/1e3);if(S<=0){k(0),b(0);try{localStorage.removeItem("otpCooldownUntil")}catch{}}else k(S)};I();const P=setInterval(I,1e3);return()=>clearInterval(P)},[w]);const j=async I=>{var P,S;I.preventDefault(),u(!0),m(null);try{const D=n==null?void 0:n.email,{data:L,error:U}=await ce.rpc("verify_email_2fa",{p_code:o,p_session_minutes:10,p_user:n==null?void 0:n.id});if(U)throw U;if(!L)throw new Error("Invalid code");s(!0);try{localStorage.setItem("otpVerified","true"),localStorage.removeItem("auth.intent")}catch{}if(Be.success("Verification successful"),(((P=t==null?void 0:t.state)==null?void 0:P.intent)||null)==="recovery"||x)e("/reset-password",{replace:!0});else{const M=((S=t==null?void 0:t.state)==null?void 0:S.from)||"/";e(M,{replace:!0})}}catch(D){m((D==null?void 0:D.message)||"Verification failed"),Be.error("Verification failed")}finally{u(!1)}},N=async()=>{if(!(_>0)){h(!0);try{await ce.functions.invoke("send-2fa-login-email",{headers:r!=null&&r.access_token?{Authorization:`Bearer ${r.access_token}`}:void 0}),Be.success("A new code was sent");const I=Date.now()+3e4;b(I);try{localStorage.setItem("otpCooldownUntil",String(I))}catch{}}catch{Be.error("Could not resend code")}finally{h(!1)}}},O=async()=>{try{await ce.auth.signOut()}catch{}try{localStorage.removeItem("otpVerified"),localStorage.removeItem("otpRequired"),localStorage.removeItem("auth.intent"),localStorage.removeItem("otpCooldownUntil")}catch{}e("/",{replace:!0})};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 p-4",children:i.jsxs(We,{className:"w-full max-w-md",children:[i.jsxs(mt,{className:"space-y-1 text-center",children:[i.jsx(ht,{className:"text-2xl font-bold",children:"Enter verification code"}),i.jsxs(Ni,{children:["We sent a 6-digit code to ",g?i.jsx("span",{className:"font-medium",children:g}):"your email","."]})]}),i.jsxs(ct,{children:[f&&i.jsx(ym,{className:"mb-4 border-red-200 bg-red-50",children:i.jsx(xm,{className:"text-red-800",children:f})}),i.jsxs("form",{onSubmit:j,className:"space-y-6",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx(R9,{maxLength:6,value:o,onChange:l,autoFocus:!0,children:i.jsxs(M9,{children:[i.jsx(cc,{index:0}),i.jsx(cc,{index:1}),i.jsx(cc,{index:2}),i.jsx(cc,{index:3}),i.jsx(cc,{index:4}),i.jsx(cc,{index:5})]})})}),i.jsx(ne,{type:"submit",className:"w-full",disabled:c||o.length!==6,children:c?i.jsxs(i.Fragment,{children:[i.jsx(Ht,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify"}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsx("span",{children:"Didn't get the code?"}),i.jsx(ne,{type:"button",variant:"link",className:"px-0",onClick:N,disabled:d||_>0,children:d?"Resending...":_>0?`Resend in ${_}s`:"Resend code"})]}),i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(ne,{type:"button",variant:"ghost",onClick:O,children:"Sign out"})})]})]})]})})}function k3e(){const e=li();return p.useEffect(()=>{(async()=>{try{try{const n=[];for(let a=0;a<localStorage.length;a++){const s=localStorage.key(a);s&&n.push(s)}n.forEach(a=>{try{localStorage.removeItem(a)}catch{}});const r=[];for(let a=0;a<sessionStorage.length;a++){const s=sessionStorage.key(a);s&&r.push(s)}r.forEach(a=>{try{sessionStorage.removeItem(a)}catch{}})}catch(n){console.warn("Error clearing cache:",n)}await ce.auth.signOut()}catch{}e("/",{replace:!0})})()},[e]),null}const S3e=()=>{const e=Fl();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};var hs="Accordion",N3e=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[cE,C3e,A3e]=xp(hs),[L0,v5e]=Ir(hs,[A3e,v9]),uE=v9(),D9=V.forwardRef((e,t)=>{const{type:n,...r}=e,a=r,s=r;return i.jsx(cE.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?i.jsx(O3e,{...s,ref:t}):i.jsx(P3e,{...a,ref:t})})});D9.displayName=hs;var[L9,E3e]=L0(hs),[$9,T3e]=L0(hs,{collapsible:!1}),P3e=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},collapsible:s=!1,...o}=e,[l,c]=Ua({prop:n,defaultProp:r??"",onChange:a,caller:hs});return i.jsx(L9,{scope:e.__scopeAccordion,value:V.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:V.useCallback(()=>s&&c(""),[s,c]),children:i.jsx($9,{scope:e.__scopeAccordion,collapsible:s,children:i.jsx(F9,{...o,ref:t})})})}),O3e=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},...s}=e,[o,l]=Ua({prop:n,defaultProp:r??[],onChange:a,caller:hs}),c=V.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=V.useCallback(d=>l((h=[])=>h.filter(f=>f!==d)),[l]);return i.jsx(L9,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:i.jsx($9,{scope:e.__scopeAccordion,collapsible:!0,children:i.jsx(F9,{...s,ref:t})})})}),[I3e,$0]=L0(hs),F9=V.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:a,orientation:s="vertical",...o}=e,l=V.useRef(null),c=It(l,t),u=C3e(n),h=xh(a)==="ltr",f=Ve(e.onKeyDown,m=>{var O;if(!N3e.includes(m.key))return;const g=m.target,v=u().filter(I=>{var P;return!((P=I.ref.current)!=null&&P.disabled)}),x=v.findIndex(I=>I.ref.current===g),y=v.length;if(x===-1)return;m.preventDefault();let w=x;const b=0,_=y-1,k=()=>{w=x+1,w>_&&(w=b)},j=()=>{w=x-1,w<b&&(w=_)};switch(m.key){case"Home":w=b;break;case"End":w=_;break;case"ArrowRight":s==="horizontal"&&(h?k():j());break;case"ArrowDown":s==="vertical"&&k();break;case"ArrowLeft":s==="horizontal"&&(h?j():k());break;case"ArrowUp":s==="vertical"&&j();break}const N=w%y;(O=v[N].ref.current)==null||O.focus()});return i.jsx(I3e,{scope:n,disabled:r,direction:a,orientation:s,children:i.jsx(cE.Slot,{scope:n,children:i.jsx(lt.div,{...o,"data-orientation":s,ref:c,onKeyDown:r?void 0:f})})})}),Ax="AccordionItem",[R3e,dE]=L0(Ax),U9=V.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...a}=e,s=$0(Ax,n),o=E3e(Ax,n),l=uE(n),c=fr(),u=r&&o.value.includes(r)||!1,d=s.disabled||e.disabled;return i.jsx(R3e,{scope:n,open:u,disabled:d,triggerId:c,children:i.jsx(b9,{"data-orientation":s.orientation,"data-state":K9(u),...l,...a,ref:t,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(r):o.onItemClose(r)}})})});U9.displayName=Ax;var B9="AccordionHeader",z9=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=$0(hs,n),s=dE(B9,n);return i.jsx(lt.h3,{"data-orientation":a.orientation,"data-state":K9(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:t})});z9.displayName=B9;var pS="AccordionTrigger",W9=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=$0(hs,n),s=dE(pS,n),o=T3e(pS,n),l=uE(n);return i.jsx(cE.ItemSlot,{scope:n,children:i.jsx(UFe,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:s.triggerId,...l,...r,ref:t})})});W9.displayName=pS;var q9="AccordionContent",H9=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=$0(hs,n),s=dE(q9,n),o=uE(n);return i.jsx(BFe,{role:"region","aria-labelledby":s.triggerId,"data-orientation":a.orientation,...o,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});H9.displayName=q9;function K9(e){return e?"open":"closed"}var M3e=D9,D3e=U9,L3e=z9,V9=W9,G9=H9;const $3e=M3e,Y9=p.forwardRef(({className:e,...t},n)=>i.jsx(D3e,{ref:n,className:Pe("border-b",e),...t}));Y9.displayName="AccordionItem";const X9=p.forwardRef(({className:e,children:t,...n},r)=>i.jsx(L3e,{className:"flex",children:i.jsxs(V9,{ref:r,className:Pe("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,i.jsx(Ta,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));X9.displayName=V9.displayName;const J9=p.forwardRef(({className:e,children:t,...n},r)=>i.jsx(G9,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:i.jsx("div",{className:Pe("pb-4 pt-0",e),children:t})}));J9.displayName=G9.displayName;const mD=`# Change Log\r
\r
# [0.1.77] BE/DB CEKAT 2026-02-09\r
### Follow-up Message Automation\r
- **Status Filter Fix**: Follow-up messages now only trigger for **Unassigned** (status = \`open\`) threads.\r
  - Follow-ups will NOT be scheduled when a thread is Assigned (\`pending\`) or Done (\`closed\`).\r
  - Clears any pending follow-up when thread status changes from open.\r
  - Migration: \`supabase/migrations/20260209192200_followup_only_open_threads.sql\`\r
  - Updated: \`supabase/functions/process-followups/index.ts\`\r
\r
# [0.1.76] FE WEB CEKAT 2026-02-06\r
\r
### Chat UI Improvements\r
\r
- **Handover Reason Display**: Added "Handover Reason" field to the Conversation Details panel.\r
  - Displays the reason for agent handover (e.g., from AI to human).\r
  - Includes text truncation and a tooltip for long reasons to preserve layout.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
- **Move to Unassigned Logic**:\r
  - Unassigning a thread now explicitly clears \`ai_handoff_at\` and \`handover_reason\` fields to ensure a clean state.\r
  - Updated: \`supabase/migrations/20260206163000_update_unassign_thread_clear_handover.sql\`\r
\r
# [0.1.75] BE/DB CEKAT 2026-02-04\r
\r
### Follow-up Message Automation\r
\r
- **Fix Conflict Error**: Fixed conflict error in AI Agent Settings.\r
\r
# [0.1.74] BE/DB CEKAT 2026-02-04\r
\r
### Follow-up Message Automation\r
\r
- **Backend Implementation**: Added automated follow-up message system that sends a configured message to users who haven't replied after a set delay.\r
  - New \`followup_at\` and \`is_followup_sent\` columns on \`threads\` table.\r
  - Database trigger (\`handle_followup_scheduling\`) automatically schedules/cancels follow-ups based on message activity.\r
  - Edge Function (\`process-followups\`) runs every minute via \`pg_cron\` to send due messages.\r
- **Safeguards**:\r
  - Follow-ups only trigger after confirmed user engagement (ignores empty/Welcome-only threads).\r
  - Ignores "test" messages to prevent false positives during development.\r
  - Updates: \`supabase/migrations/20260202200000_add_followup_scheduling_logic.sql\`, \`supabase/migrations/20260203160000_refine_followup_trigger.sql\`, \`supabase/functions/process-followups/index.ts\`\r
\r
# [0.1.73] FE WEB CEKAT 2026-02-03\r
\r
### Chat UI Improvements\r
\r
- **Dark Mode Visibility**: Fixed an issue where user messages appeared with black text on dark backgrounds by adding \`dark:prose-invert\` for proper contrast inversion.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
### Human Agent Settings\r
\r
- **Dark Mode Table Styling**: Removed incorrect white backgrounds from nested agent rows (super agents, unassigned agents) in dark mode and improved text contrast for better readability.\r
  - Updated: \`src/components/humanagents/HumanAgents.tsx\`\r
\r
# [0.1.72] FE WEB CEKAT 2026-02-02\r
\r
### AI Agent Settings\r
\r
- **Granular Save Controls**: Added separate Save buttons for Knowledge Text and Q&A sections, improving the workflow for managing knowledge sources.\r
  - Added "Save Text" button to the Text tab.\r
  - Added "Save Q&A" button to the Q&A tab.\r
  - Updated: \`src/components/aiagents/AIAgentSettings.tsx\`\r
\r
### Configuration\r
\r
- **App Origin Update**: Updated the default production \`APP_ORIGIN\` to \`synkaai.netlify.app\` for accurate deep linking and embeds.\r
  - Updated: \`src/config/urls.ts\`\r
\r
# [0.1.71] FE WEB CEKAT 2026-02-02\r
\r
### Chat UI Improvements\r
\r
- **Multi-Link Previews**: Messages containing multiple URLs now render individual preview cards for each unique link.\r
- **Improved Image Detection**: Image URLs without standard extensions (like \`picsum.photos\`) are now correctly identified and rendered as images directly.\r
- **Centralized Link Logic**: Moved link detection and URL extraction to shared utilities in \`src/lib/utils.ts\` for consistency.\r
  - Updated: \`src/pages/LiveChat.tsx\`, \`src/components/chat/ConversationPage.tsx\`, \`src/lib/utils.ts\`\r
\r
# [0.1.70] FE WEB CEKAT 2026-02-02\r
\r
### Live Chat Improvements\r
\r
- **Message Deduplication Removed**: Intentionally removed the 2000ms window deduplication guard in the LiveChat widget to allow identical messages to be visible in the UI.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
\r
# [0.1.69] FE WEB CEKAT 2026-02-02\r
\r
### Chat UI Improvements\r
\r
- **Markdown & Multi-line Support**:\r
  - Full markdown support using \`ReactMarkdown\` with \`remark-gfm\`.\r
  - Added \`remark-breaks\` to ensure single newlines (Shift+Enter) are preserved in chat bubbles.\r
  - Upgraded chat inputs to multi-line \`Textarea\` with \`Shift+Enter\` for new lines and \`Enter\` to send.\r
- **Rich Media & Link Previews**:\r
  - **Auto-Image Detection**: Links to images (.jpg, .png, etc.) now render directly in the chat.\r
  - **Rich Previews**: Website links now display a rich preview card with title, description, and site image (WhatsApp-style).\r
- **Layout & Style Refinement**:\r
  - **Smart Wrapping**: Prevents overflow by breaking long strings (like base64) while keeping natural words together.\r
  - **Aesthetics**: Restored premium \`rounded-2xl\` bubbles and \`px-4 py-2\` padding.\r
  - **Bug Fixes**: Restored sidebar tab layouts, fixed corrupted Tailwind classes, and improved system message centering.\r
  - Updated: \`src/pages/LiveChat.tsx\`, \`src/components/chat/ConversationPage.tsx\`, \`src/components/chat/LinkPreview.tsx\`, \`src/components/chat/ContactThreadPickerDialog.tsx\`, \`src/lib/utils.ts\`\r
\r
# [0.1.68] FE WEB CEKAT 2026-01-30\r
\r
### WhatsApp (WAHA) Integration\r
\r
- **Connect Button for Empty Sessions**: Added a Connect button when no WhatsApp session is found for a channel.\r
  - Previously only showed "No session found for this channel." text without any action button.\r
  - Users can now initiate WhatsApp connection directly from the empty state.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
\r
# [0.1.67] FE WEB CEKAT 2026-01-30\r
\r
### WhatsApp (WAHA) Integration\r
\r
- **API Authentication Header**: Added \`x-api-key\` header to all WAHA API requests for authentication.\r
  - All fetch calls to \`WAHA_BASE_URL\` now include \`x-api-key: "asd"\` in request headers.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\` (3 locations: session list, session details, QR polling)\r
  - Updated: \`src/components/platforms/WhatsAppPlatformForm.tsx\` (1 location: session status check)\r
\r
# [0.1.66] FE WEB CEKAT 2026-01-28\r
\r
### AI Agent Knowledge Sources\r
\r
- **Simplified File Management**: Migrated knowledge sources to a unified \`files\` table architecture, removing complex intermediary tables.\r
  - Enabled simpler toggling of file availability for AI agents via \`is_enabled\` flag.\r
  - Added direct file toggle controls (Checkbox) in the Knowledge > File list.\r
  - Improved retrieval performance by indexing documents directly to \`file_id\`.\r
  - Updated: \`supabase/migrations/20260126000000_knowledge_sources_v1.sql\`, \`src/components/aiagents/AIAgentSettings.tsx\`\r
\r
### Authentication & User Management\r
\r
- **Account Status Guard**: Implemented immediate account status check after login.\r
  - Users with \`is_active: false\` profile status are now instantly redirected to \`/account-deactivated\` upon sign-in.\r
  - Updated: \`src/components/auth/Login.tsx\`\r
\r
# [0.1.65] FE WEB CEKAT 2026-01-24\r
\r
### Dark Mode Support\r
\r
- **Application-Wide Dark Mode**: Implemented comprehensive dark mode theming across the application\r
  - Created \`ThemeContext\` (\`src/contexts/ThemeContext.tsx\`) for managing theme state (light/dark/system)\r
  - Added \`ThemeToggle\` component (\`src/components/ThemeToggle.tsx\`) with dropdown for Light/Dark/System options\r
  - Theme preference persists to localStorage and respects system preference when set to "System"\r
  - Added ThemeToggle to main header (\`src/pages/Index.tsx\`) next to Online badge for easy access\r
  - Added ThemeToggle to Profile page (\`src/pages/Profile.tsx\`) as secondary access point\r
  - Wrapped app with \`ThemeProvider\` in \`App.tsx\` for global theme context\r
\r
- **Conversations Sidebar Dark Mode Fix**: Fixed hardcoded light colors that broke dark mode\r
  - Updated tab buttons (Assigned/Unassigned/Done) with dark mode alternatives (\`dark:bg-blue-950\`, \`dark:bg-red-950\`, \`dark:bg-green-950\`)\r
  - Changed conversation list item styles to use \`dark:\` variants for hover and selected states\r
  - Replaced hardcoded \`text-gray-600\`/\`text-gray-500\` with theme-aware \`text-muted-foreground\`\r
  - Fixed tab container background from \`bg-white\` to \`bg-card\`\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
### AI Agent Settings\r
\r
- **Dynamic Guide Content**: Replaced hardcoded "Panduan Umum" with customizable knowledge text\r
  - Added \`guide_content\` (TEXT) column to \`ai_profiles\` table for storing custom guide text\r
  - Added \`history_limit\` (INTEGER) column for message-count based history limit\r
  - Created migration: \`supabase/migrations/20260124000000_add_guide_content_history_limit.sql\`\r
  - Updated \`AIProfile\` TypeScript interface in \`src/hooks/useAIProfiles.ts\`\r
  - Updated Supabase types in \`src/integrations/supabase/types.ts\`\r
\r
- **Message-Based History Limit**: Changed conversation history from token-based to message-based\r
  - Updated \`HISTORY_PRACTICAL_MAX\` (50 messages) and \`HISTORY_HARD_MAX\` (100 messages)\r
  - Changed UI labels, tooltips, and helper text from "tokens" to "messages"\r
  - Updated: \`src/components/aiagents/AIAgentSettings.tsx\`\r
\r
- **Knowledge Sources UI Cleanup**: Simplified the Text tab interface\r
  - Removed non-functional "Add" and "Default" buttons\r
  - Removed decorative formatting toolbar (Undo/Redo/Bold/Italic/Alignment buttons)\r
  - Kept simple textarea for Knowledge Text Content that saves with main Save button\r
  - Updated: \`src/components/aiagents/AIAgentSettings.tsx\`\r
\r
# [0.1.64] FE WEB CEKAT 2026-01-22\r
\r
### AI Agent Management\r
\r
- **Enhanced AI Agent Creation & Editing UI**: Improved interface with better organization and validation\r
  - Separated AI Agent creation into dedicated dialog with enhanced form layout\r
  - Added comprehensive model selection system with pricing and provider information\r
  - Implemented fallback model selection for automatic failover when primary model unavailable\r
  - Updated model display with cost per 1M tokens, provider badges, and descriptions\r
  - Improved AI Agent Settings with better input handling and validation\r
  - Updated: \`src/components/aiagents/AIAgents.tsx\`, \`src/components/aiagents/AIAgentSettings.tsx\`\r
  - Updated: \`src/hooks/useAIProfiles.ts\`\r
\r
### Supabase Integration\r
\r
- **Type System Updates**: Enhanced type definitions for AI profiles and database integration\r
  - Added \`model_id\` and \`fallback_model_id\` fields to AI profile types\r
  - Updated type definitions to match database schema changes\r
  - Improved type safety across AI agent operations\r
  - Updated: \`src/integrations/supabase/types.ts\`\r
\r
### Webhook Configuration\r
\r
- **Webhook URL Enhancements**: Improved webhook payload structure and URL handling\r
  - Enhanced webhook configuration with better URL construction\r
  - Updated webhook payload format for file uploads\r
  - Improved error handling and validation\r
  - Updated: \`src/config/webhook.ts\`\r
\r
# [0.1.63] FE WEB CEKAT 2026-01-22\r
\r
### AI Agent Knowledge Files\r
\r
- **PDF Upload Reliability**: Fixed \`crypto.subtle.digest\` crash in non-secure contexts by adding fallback hash generation using file metadata.\r
  - Primary: SHA-256 via Web Crypto API when available\r
  - Fallback: DJB2-like hash from file name/size/timestamp for non-HTTPS contexts\r
  - Updated: \`src/components/aiagents/AIAgentSettings.tsx\`\r
- **Early PDF Validation**: Files are now validated as PDFs before entering the upload queue; non-PDF files are rejected with a toast error.\r
  - Updated: \`src/components/aiagents/AIAgentSettings.tsx\`\r
- **Webhook Payload Enhancement**: File upload webhook now includes \`file_url\` (Supabase storage path) dynamically constructed from \`SUPABASE_URL\`.\r
  - Updated: \`src/components/aiagents/AIAgentSettings.tsx\`\r
\r
### Development Environment\r
\r
- **HTTPS Enabled in Dev**: Vite dev server now runs with \`https: true\`, enabling Web Crypto API support and aligning dev with production security context.\r
  - Updated: \`vite.config.ts\`\r
\r
# [0.1.62] FE WEB CEKAT 2026-01-18\r
\r
### Connected Platforms\r
\r
- **Fixed chat takeover AI still has access to reply**: Added the variable change of ai_access_enabled to false when taking over whatsapp chat.\r
\r
# [0.1.61] FE WEB CEKAT 2026-01-18\r
\r
### Connected Platforms\r
\r
- **Removed toLowerCase for session_name**: Session names are now preserved with their original casing when sent to WhatsApp API endpoints, maintaining case-sensitive session identifiers.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
\r
# [0.1.60] FE WEB CEKAT 2026-01-15\r
\r
### Chat Filter\r
\r
- **Removed redundant inbox filter**: Filter modal drops the inbox selector since channel type already scopes conversations, keeping the dialog lean.\r
  - Updated: \`src/components/chat/ChatFilter.tsx\`\r
\r
# [0.1.59] FE WEB CEKAT 2026-01-15\r
\r
### Supabase\r
\r
- Reopen on inbound messages now clears \`collaborator_user_id\` so reopened/unassigned conversations have no collaborator. Migration: \`20260115124500_reopen_clear_collaborator.sql\`.\r
\r
# [0.1.58] FE WEB CEKAT 2026-01-15\r
\r
### Contacts\r
\r
- **Removed per-row delete button**: Contacts list no longer shows the single-contact delete action; bulk multi-select delete now covers this flow for master/super agents.\r
  - Updated: \`src/components/contacts/Contacts.tsx\`\r
- **Handled-by filter cleanup**: Filter uses a truthy check instead of comparing to an empty string, keeping TS types aligned while filtering assigned vs unassigned contacts.\r
  - Updated: \`src/components/contacts/Contacts.tsx\`\r
\r
# [0.1.57]  FE WEB CEKAT 2026-01-15\r
\r
### Supabase\r
\r
- Removed main-only public/anon policies on \`job\`, \`job_run_details\`, and \`storage.objects\` to match development. Migration: \`20260115123000_remove_extra_public_policies.sql\`.\r
\r
# [0.1.56] FE WEB CEKAT 2026-01-15\r
\r
### Supabase\r
\r
- **takeover_thread matches dev**: returns the updated thread, sets \`collaborator_user_id\`, \`status='pending'\`, keeps \`assigned_at\` if present. Migration: \`20260115120000_align_functions.sql\`.\r
- **reopen_thread_on_user_message matches dev**: reopens closed threads without clearing handled-by fields. Migration: \`20260115120000_align_functions.sql\`.\r
\r
# [0.1.55] FE WEB CEKAT 2026-01-15\r
\r
### Supabase (main aligned to development)\r
\r
- **Trigger parity**: Removed main-only thread triggers and added the channel super-agent sync trigger (\`tr_update_contacts_threads_on_channel_super_agent_change\`) to mirror development. New migration: \`20260115113000_align_triggers.sql\`.\r
- **Function parity**: Added missing \`unassign_thread\` SECURITY DEFINER function to main. New migration: \`20260115114000_add_unassign_thread.sql\`.\r
\r
# [0.1.54] FE WEB CEKAT 2026-01-15\r
\r
### Supabase (schema & RLS alignment)\r
\r
- **Contacts owned by super agents**: Added \`contacts.super_agent_id\`, backfilled from channel ownership, dropped \`channel_id\`, and rewrote contacts RLS to super-agent scope. New migration: \`20260115100000_contacts_super_agent.sql\`.\r
- **Scope-based RLS**: Introduced helper functions (\`can_access_super_scope\`, \`can_access_channel_scope\`, \`can_access_message_scope\`) and replaced channels/threads/messages policies with scope-based, account-aware, and web-widget rules. New migration: \`20260115103000_scope_based_policies.sql\`.\r
- **Audit/channel agents RLS parity**: Tightened \`audit_logs\` to permission-based read and simplified \`channel_agents\` to a single authenticated policy. New migration: \`20260115110000_audit_logs_channel_agents_policies.sql\`.\r
\r
# [0.1.53] FE WEB CEKAT 2026-01-15\r
\r
### Live Chat\r
\r
- **Late-arriving user rows replace optimistics**: If the backend inserts the real user message after the AI reply, the message now replaces its optimistic twin instead of showing twice, eliminating double Hello bubbles.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Commit**: \`fix: livechat dedupe optimistic user messages\`\r
\r
# [0.1.52] FE WEB CEKAT 2026-01-14\r
\r
### Conversations & Assignment Flow\r
\r
- **Unassign keeps handled-by, clears collaborator**: Moving a chat to Unassigned now only nulls \`collaborator_user_id\`, reopens AI, and keeps the handled-by assignee intact while placing the thread in the Unassigned tab.\r
  - Updated: \`src/hooks/useConversations.ts\`, \`src/components/chat/ConversationPage.tsx\`\r
- **Takeover sets collaborator**: Takeover without reassignment now sets \`collaborator_user_id\` to the agent who took over, without touching handled-by.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
- **Commit**: \`chore: unassign clears collaborator only; takeover sets collaborator; lock collaborator replies\`\r
\r
# [0.1.51] FE WEB CEKAT 2026-01-15\r
\r
### Conversations & System Events\r
\r
- **System logs for assignment actions**: Takeover, Move to Unassigned, and Resolve now add system \`event\` messages to the thread timeline with actor details, keeping the audit trail visible in chat.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
\r
# [0.1.50] FE WEB CEKAT 2026-01-14\r
\r
### Conversations & Ownership\r
\r
- **Collaborators are now read-only**: The sidebar shows the current collaborator label while only Takeover Chat reclaims the slot; the select was removed to enforce the one-collaborator invariant.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Takeover/Unassign RPCs respect status**: \`takeover_thread\`/\`unassign_thread\` now only swap \`collaborator_user_id\` / status/assigned_at, and the frontend trusts the returned \`status\` so Move to Unassigned stays open after refresh.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
- **RPC definitions and constraints**: Supabase migration adds status/collaborator invariants plus SECURITY DEFINER RPCs (\`takeover_thread\`, \`unassign_thread\`) that preserve \`assignee_user_id\` while updating collaborators.\r
  - Updated: \`supabase/migrations/20260114090000_thread_collab_takeover.sql\`\r
\r
# [0.1.49] FE WEB CEKAT 2026-01-13\r
\r
### Add delete button in contacts\r
\r
- **Added button for delete contact**: button delete contact is available for role master agent and super agent.\r
\r
# [0.1.48] FE WEB CEKAT 2026-01-13\r
\r
### Conversation Ownership\r
\r
- **Handled By now respects real assignees**: \`computeAssignmentState\` keeps the \`assignee_user_id\` if the thread is assigned, so \`ConversationPage\` can show the handlers display name again instead of rendering .\r
  - Updated: \`src/hooks/useConversations.ts\`\r
\r
### Platform Ownership\r
\r
- **Super-agent scoped human/AI selection**: The Connected Platforms sidebar only lists human agents and AI profiles that belong to the channels assigned super agent while keeping the already selected options visible, keeping ownership aligned across collaborators and bots.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
\r
# [0.1.46] FE WEB CEKAT 2026-01-13\r
\r
### Live Chat\r
\r
- **Stable account names**: Friendly username is now stored per \`account_id\` (localStorage) instead of per session, so the same account cant generate multiple display names across sessions.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Supabase types parity**: \`threads\` types include \`account_id\` to match the schema and avoid TS errors on account-based queries.\r
  - Updated: \`src/integrations/supabase/types.ts\`\r
- **Commit**: \`chore: bind livechat name to account and fix threads types\`\r
\r
# [0.1.45] FE WEB CEKAT 2026-01-13\r
\r
### Live Chat & Types\r
\r
- **Account-scoped attach only**: Live chat now only attaches to threads that match the current \`account_id\`/session and no longer reuses stored thread IDs; if none exist, it waits for an external creator (e.g., n8n) rather than auto-creating.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Supabase types parity**: Added \`account_id\` to the \`threads\` types to match the schema changes and avoid TS errors on account-based selects.\r
  - Updated: \`src/integrations/supabase/types.ts\`\r
- **Commit**: \`chore: livechat account attach only & fix supabase types\`\r
\r
# [0.1.44] FE WEB CEKAT 2026-01-13\r
\r
### WhatsApp / n8n Proxy Hardening\r
\r
- **Session disconnect via proxy-n8n**: WhatsApp disconnect now calls the \`session.logout\` proxy route (no legacy Railways) before disconnecting, matching the n8n route table.\r
- **Scoped polling on disconnect**: Only WhatsApp sessions are refreshed during disconnect polling, using a fresh \`sessionsRef\` to avoid stale state; no broad platform refresh.\r
- **Spam-proof delete**: Danger zone delete button is guarded by the in-flight flag to prevent repeated clicks while deletion is in progress.\r
\r
### Supabase (live chat reference)\r
\r
- **Account-scoped anon access**: Policies persisted in migrations (\`20260113000001\`, \`20260113000002\`) enforce \`account_id\` + \`x-account-id\` for threads/messages; legacy null-account fallback removed. Anonymous users cannot fetch other accounts threads or messages.\r
- **Edge function routing**: \`proxy-n8n\` is the path for WhatsApp session actions; \`session.disconnect\` route added to n8n route table; \`DISCONNECT_SESSION\` now points to \`session.logout\`.\r
\r
# [0.1.43] FE WEB CEKAT 2026-01-13\r
\r
### Live Chat (Account-scoped reuse)\r
\r
- **One thread per account (frontend & DB guard)**: Live chat now reads \`account_id\` from \`localStorage\` and reuses/reopens the existing thread for that account/channel (falls back to session/alias if no account). Added \`account_id\` column plus a unique index on \`(channel_id, account_id)\` when set to prevent duplicate threads.\r
  - Updated: \`src/pages/LiveChat.tsx\`, \`src/hooks/useConversations.ts\`\r
  - New: \`supabase/migrations/20260113000001_add_account_id_to_threads.sql\`\r
- **Anonymous: new thread per cleared storage**: If local/session storage is empty, a fresh \`account_id\` is generated per channel and legacy thread auto-attach is disabled, so each new browser/cleared storage starts a new thread.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
  \r
### Live Chat (anon account-id hardening)\r
\r
- **Fetch-only on load (no auto-create)**: Live chat no longer creates threads on refresh; it only attaches to existing threads that match the current \`account_id\` (and session). Threads are expected to be created externally (e.g., n8n) and delivered via realtime or subsequent fetch.\r
- **Thread reuse by account only**: Stored thread reuse was removed; lookup now requires account/session match (no name fallback when account_id exists).\r
- **Headers for anon RLS**: The live chat Supabase client sends \`x-account-id\` for all requests so anon RLS policies apply.\r
\r
### Supabase (migration/reference)\r
\r
- **account_id column & unique index**: Added \`account_id\` to \`public.threads\` and a unique index \`(channel_id, account_id)\` when \`account_id\` is set (\`supabase/migrations/20260113000001_add_account_id_to_threads.sql\`).\r
- **Edge function auth**: \`proxy-n8n\` redeployed with \`verify_jwt=false\` to allow anonymous calls (still HMAC-signs to n8n).\r
- **RLS (anon by account_id)**:\r
  - Threads: \`anon_threads_by_account\` (SELECT) and \`anon_threads_insert_by_account\` (INSERT) require \`account_id\` = \`x-account-id\`.\r
  - Messages: \`anon_messages_by_account\` (SELECT) and \`anon_messages_insert_by_account\` (INSERT) require parent thread \`account_id\` = \`x-account-id\`.\r
  - Channels: \`anon_channels_web_minimal\` allows anon SELECT on web channels to read minimal metadata.\r
  - Legacy null-account fallback policies were removed; anon access now hinges on matching \`account_id\`.\r
\r
# [0.1.42] FE WEB CEKAT 2026-01-13\r
\r
### Conversations & Assignment Flow\r
\r
- **Realtime tab-safe updates**: Thread status/assignee changes now patch the conversation list via realtime updates without needing a manual refresh; tabs stay put even when counts change underneath.\r
  - Updated: \`src/hooks/useConversations.ts\`, \`src/components/chat/ConversationPage.tsx\`\r
- **Tab UX hardening**: Tabs remain clickable/selectable even when empty; user-selected tabs no longer auto-bounce when counts shift.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Resolve re-enables AI**: Resolving a conversation now flips \`ai_access_enabled\` back on and clears \`ai_handoff_at\` so AI can respond immediately after resolution.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
# [0.1.41] FE WEB CEKAT 2026-01-12\r
\r
- **Thread controls respect roles & stay real-time**: Move to Unassigned now only renders and functions for master/super agents (regular agents get  toast if they try), and the focused conversation keeps subscribing to its thread plus calling \`fetchMessages\` in a stable hook so status changes surface instantly.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
- **Super agents can edit platform human agents**: The human-agent multi-select inside platform details now bypasses the \`channel_agents.update\` gate for \`super_agent\` roles so they can add/remove collaborators without an extra permission.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
\r
# [0.1.40] FE WEB CEKAT 2026-01-12\r
\r
### Conversations & Assignment Flow\r
\r
- **Correct tab mapping for statuses**: Assigned now strictly maps to \`status === "pending"\` while Unassigned maps to \`status === "open"\` so the sidebar tally matches the database truth, and the legacy \`assigned\` enum is only treated as assigned for backward compatibility.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Render unassigned threads as open**: Assignment-sensitive logic now only considers a thread assigned when an assignee (or similar signal) exists; a bare \`pending\` status without an assignee rewrites to \`open\`, ensuring those rows appear under the Unassigned tab.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
\r
# [0.1.39] FE WEB CEKAT 2026-01-11\r
\r
### Conversations & Assignment Flow\r
\r
- **Takeover preserves handled by**: Takeover chat action now only changes thread status from "pending" (Unassigned) to "assigned", without modifying the "Handled By" field. This ensures the original super agent assignment is preserved regardless of who takes over the conversation.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
- **Conditional assignee updates**: Added \`setAssignee\` option to \`assignThread\` function for explicit assignment control. Takeover always uses \`setAssignee: false\` to preserve existing assignments.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
\r
### UI/UX Improvements\r
\r
- **Login form cleanup**: Removed redundant UI text elements from login form (one-time code message and forgot password link) to streamline the authentication interface.\r
  - Updated: \`src/components/auth/Login.tsx\`\r
\r
# [0.1.38] FE WEB CEKAT 2026-01-11\r
\r
### Conversations & Assignment Flow\r
\r
- **Inline status controls**: Assigned threads now show a Move to Unassigned button next to Resolve, keeping status transitions and the list state in sync without page refreshes.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
- **Server-truth status updates**: Removed optimistic status toggles (and stopped writing the unsupported \`'assigned'\` enum) so moving or taking over a single thread no longer makes other rows flicker; UI now waits for Supabase to confirm before updating.\r
- **Takeover preserves handled-by**: Regular agents now claim chats without overwriting the super agents Handled By field; only masters/supers promote themselves while collaborators simply flip the status and log the event.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
\r
# [0.1.37] FE WEB CEKAT 2026-01-11\r
\r
### Conversations & Assignment Flow\r
\r
- Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Takeover scoped to Unassigned**: The Takeover Chat CTA now renders only when a thread is truly in the Unassigned state, preventing accidental reassignment attempts from other tabs.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Role-based composer rules**: Collaborators (when theyre the logged-in user), super agents, and master agents now get the message composer even on unassigned threads, while other agents still see the takeover prompt until they claim the chat.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Hide master agents from selectors**: Master agents can still act on any thread, but they no longer appear in the Handled By or Collaborator dropdowns to avoid accidental assignment to all-powerful accounts.\r
\r
# [0.1.36] FE WEB CEKAT 2026-01-11\r
\r
### Conversations & Assignment Flow\r
\r
- **Three-state workflow overhaul**: Replaced the legacy status heuristic with an explicit \`Assigned / Unassigned / Done\` flow that keys off \`status\` plus the presence of a collaborator. Counts, badges, tab filters, and auto-selection now stay in sync with the new rules and never fall back to the deprecated multi-collaborator state.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
- **Collaborator switch stability**: Guarded the URL/thread synchronization logic so picking a collaborator no longer triggers a rapid tab flip that spammed list/message fetches.\r
\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
### Collaboration Data Model & Permissions\r
\r
- **Single-column collaborator model**: Added a migration that backfills \`threads.collaborator_user_id\`, rewires all RLS policies to reference that column, and drops the obsolete \`thread_collaborators\` table plus its triggers.\r
  - New: \`supabase/migrations/20260110_remove_thread_collaborators.sql\`\r
  - Updated: \`supabase/migrations/permissions_update_and_policies_updates.sql\`, \`supabase/migrations/20251124230847_baseline.sql\`, \`supabase/schema.sql\`, \`sync/tables.config.json\`\r
- **Typed API parity**: Regenerated Supabase types so the frontend integrations include the new \`collaborator_user_id\` field and foreign key metadata.\r
  - Updated: \`src/integrations/supabase/types.ts\`\r
\r
### Navigation & RBAC\r
\r
- **Hide AI Agents for regular agents**: Sidebar configuration now outright hides the AI Agents menu when the signed-in user only has the \`agent\` role, preventing them from entering AI profile management.\r
  - Updated: \`src/config/navigation.ts\`, \`src/hooks/useNavigation.ts\`\r
\r
# [0.1.35] FE WEB CEKAT 2026-01-10\r
\r
### Housekeeping\r
\r
- **Line-ending normalization (no logic changes)**: Synchronized CRLF/LF on chat/contact pages and hooks to keep diffs clean without altering runtime behavior.\r
  - Touched: \`src/components/chat/ConversationPage.tsx\`, \`src/components/contacts/Contacts.tsx\`, \`src/hooks/useContacts.ts\`, \`src/hooks/useConversations.ts\`, \`src/pages/LiveChat.tsx\`\r
- **Migration formatting**: Tidied whitespace in the \`thread_status\` enum migration to match our SQL formatting conventions.\r
  - Updated: \`supabase/migrations/20260109000000_add_assigned_thread_status.sql\`\r
\r
# [0.1.34] FE WEB CEKAT 2026-01-09\r
\r
### Live Chat & Messaging\r
\r
- **Realtime Message Recovery**: Fixed a bug where customer messages (role: 'user') were filtered out of the realtime feed, ensuring the chat window correctly updates when messages are persisted to the database.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Smart Message Deduplication**: Added a client-side deduplication pass that prevents "double bubbles" when both an optimistic send and a database insert arrive near-simultaneously (2-second window).\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Resilient Thread Attachment**: Relaxed the thread lookup logic so the widget gracefully falls back to the most recent channel activity if a session-id match isn't immediately foundno more hanging on "Waiting for response".\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
\r
### Assignment & Status Management\r
\r
- **Thread Status Enum Extension**: Added a new \`assigned\` value to the database \`thread_status\` enum to properly distinguish between new inquiries and those handled by a super agent or human.\r
  - New: \`supabase/migrations/20260109000000_add_assigned_thread_status.sql\`\r
- **Automated Assignment Flow**: Threads now automatically transition to \`assigned\` status when a bot hands off or a super agent is linked to the platform, while remaining in \`open\` for fresh inquiries.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
- **Enum Safety Fallback**: Added a catch for Supabase error \`22P02\` so the app gracefully falls back to \`open\` status if the new \`assigned\` enum value hasn't been applied to the database yet.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
- **Handled-By Display Logic**: Refactored the UI to show the platform's super agent as the default handler for bot-managed threads without incorrectly flagging them as "Assigned" until a real handoff occurs.\r
  - Updated: \`src/hooks/useConversations.ts\`\r
\r
### UI/UX Polish\r
\r
- **Silent Background Refresh**: Implemented a "silent" fetch mode for conversation lists that bypasses global loading states, eliminating the screen "blinking" effect when sending messages or receiving updates.\r
  - Updated: \`src/hooks/useConversations.ts\`, \`src/components/chat/ConversationPage.tsx\`\r
- **Toaster Cleanup**: Removed redundant "Message sent successfully" notifications to reduce UI clutter, keeping toasts reserved for actual errors or critical events.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
- **Enhanced Contact Filtering**: Surfaced the new \`assigned\` status in the Contacts view with proper badge coloring and filter support.\r
  - Updated: \`src/components/contacts/Contacts.tsx\`, \`src/hooks/useContacts.ts\`\r
- **Live Chat Realtime Resync**: Added a lightweight catch-up mechanism that rehydrates conversations if the Supabase realtime channel drops or the tab wakes from suspensionno constant polling required.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **New Thread Subscription Fix**: Realtime subscriptions now hydrate newly created live chat threads immediately without requiring a manual refresh.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Queued Catch-Up Requests**: Ensures live chat queues multiple background fetches when the first message creates a thread so the AI reply appears without manual reloads, retries the AI webhook on transient failures, and preserves message order for streaming replies.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Session-Scoped Live Chat Threads**: Persist the live chat thread per browser session and only attach to threads created for the current session username, so concurrent visitors no longer see mixed conversations.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Streaming Placeholder Cleanup**: Replace temporary assistant bubbles with the persisted Supabase message as soon as it arrives, preventing the UI from flickering or reordering when replies land.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Thread Restore Fallbacks**: If Supabase hasn't stamped a \`session_id\`, the live chat gracefully falls back to the contact alias when restoring or attaching to a threadno more blank states or scrolling jumps.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Realtime Catch-Up Safety Net**: After each API send, the widget aggressively refetches the thread so AI replies render even if realtime events arrive late.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
\r
# [0.1.33] FE WEB CEKAT 2026-01-08\r
\r
### Conversations\r
\r
- **Role-aware Message Composer**: Chat input now enables whenever a user has \`messages.create\`, is a master/super agent, is the current handled-by assignee, or is the selected collaboratorensuring the right people can reply without manual overrides.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
# [0.1.32] FE WEB CEKAT 2026-01-08\r
\r
### Platform Management\r
\r
- **Live Chat Link Quality-of-Life**: Added copy-to-clipboard buttons with toast feedback for both the live chat URL and embed snippet so teammates can drop links/widgets faster without selecting text manually.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
\r
### Navigation & RBAC\r
\r
- **Guaranteed Human Agents Menu for Supervisors**: Super agents now always see the Human Agents sidebar item (role bypass) and can open the roster even if their read permissions are still syncing.\r
  - Updated: \`src/config/navigation.ts\`, \`src/hooks/useNavigation.ts\`, \`src/components/navigation/PermissionNavItem.tsx\`, \`src/pages/Index.tsx\`\r
\r
### Human Agent Management\r
\r
- **Super Agent Focused View**: When a super agent opens the roster the Create button and Pending tab disappear, role/status filters are hidden, and all action buttons (status, limits, delete) are automatically allowed for members in their own cluster thanks to the new \`roleBypass\` helper.\r
  - Updated: \`src/components/humanagents/HumanAgents.tsx\`, \`src/components/rbac/PermissionGate.tsx\`\r
\r
### Conversation Sidebar\r
\r
- **Handled By Read-Only**: The Handled By field is now display-only, preventing mid-conversation reassignment from the info pane while still showing who currently owns the thread.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
# [0.1.31] FE WEB CEKAT 2026-01-08\r
\r
- **Live Chat Realtime-Only Sync**: Removed the 2-second polling loop from the live chat widget so updates rely solely on Supabase realtime subsciptions, cutting unnecessary network and memory usage.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
\r
# [0.1.30] FE WEB CEKAT 2026-01-07\r
\r
### Platform Management\r
\r
- **Live Chat Takeover Notices**: System takeover events now render as toast notifications instead of chat bubbles, keeping conversation history clean while still informing customers.\r
  - Updated: \`src/pages/LiveChat.tsx\`\r
- **Human Agent Assignment UX**: Selecting agents in platform edit autosaves immediately; no more extra click to add collaborators.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
- **Header Cleanup**: Removed redundant save/delete buttons from platform edit header; autosave flow handles updates and delete remains available in the existing danger zone.\r
  - Updated: \`src/components/platforms/ConnectedPlatforms.tsx\`\r
\r
# [0.1.29] FE WEB CEKAT 2026-01-07\r
\r
### Conversation Management\r
\r
- **Single Collaborator Restriction**: Changed Collaborators field from multi-select to single-select, allowing only one collaborator per thread.\r
  - Replaced \`SearchableMultiSelect\` with \`SearchableSelect\` component for collaborator selection.\r
  - When a new collaborator is selected, it automatically replaces any existing collaborator for that thread.\r
  - Collaborator field supports clearing selection to remove the collaborator entirely.\r
  - Existing threads with multiple collaborators are automatically trimmed to a single collaborator when accessed.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
- **Role-Based Takeover Chat Button**: Implemented role-based access control for the "Takeover Chat" button.\r
  - **Master agents and super agents**: Takeover button is always enabled (when thread is unassigned).\r
  - **Regular agents**: Takeover button is only enabled when no collaborator exists for the thread.\r
  - Regular agents see a disabled button with tooltip explanation when a collaborator is already assigned.\r
  - Prevents regular agents from taking over conversations that already have a collaborator assigned.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
# [0.1.28] FE WEB CEKAT 2026-01-07\r
\r
### Security & Data Access Control\r
\r
- **Super Agent Data Isolation**: Implemented Row Level Security (RLS) policies to ensure super agents can only view their own data in platform creation forms.\r
  - Secured \`v_users\` view to prevent data leakage by removing direct access to \`auth.users\` table.\r
  - View now anchors on \`users_profile\` table with proper RLS enforcement, ensuring super agents only see their own profile.\r
  - Master agents retain full visibility to all users within their organization via \`is_master_agent_in_org()\` function.\r
  - Database migration applied to enforce RLS policies at the database level for true security (not just frontend filtering).\r
\r
### Platform Creation Forms\r
\r
- **Auto-Select Super Agent for Super Agent Users**: Enhanced platform creation forms (Telegram, WhatsApp, Web) to automatically select and lock the Super Agent dropdown when the current user is a super agent.\r
  - Super Agent field is automatically populated with the current user's ID when form opens for super agent users.\r
  - Field becomes read-only (disabled) with visual indication when user is a super agent, preventing them from changing their own assignment.\r
  - Helper text updated to indicate that super agent is automatically determined by the current user's account for super agent users.\r
  - Master agents continue to see and can select from all available super agents in the dropdown.\r
  - Updated: \`src/components/platforms/TelegramPlatformForm.tsx\`, \`src/components/platforms/WebPlatformForm.tsx\`, \`src/components/platforms/WhatsAppPlatformForm.tsx\`\r
\r
# [0.1.27] FE WEB CEKAT 2026-01-02\r
\r
### Conversation Management\r
\r
- **Handled By Clearing**: Users can now remove super agent assignments from conversations using a clear button in the "Handled By" selector.\r
  - Added \`allowClear\` prop to \`SearchableSelect\` component with inline clear button (X icon) that appears when a value is selected.\r
  - "Handled By" selector in conversation sidebar now supports clearing assignments, allowing conversations to be unassigned.\r
  - Updated \`assignThreadToUser\` function to accept \`null\` for unassigning conversations, properly clearing assignment metadata and creating "conversation unassigned" system event messages.\r
  - When clearing "Handled By", all collaborators are automatically removed to maintain data consistency.\r
  - Updated: \`src/components/ui/searchable-select.tsx\`, \`src/components/chat/ConversationPage.tsx\`, \`src/hooks/useConversations.ts\`\r
- **Resolved Thread Read-Only Controls**: Closed conversations now lock their "Handled By" and collaborator selectors.\r
  - \`SearchableSelect\` and \`SearchableMultiSelect\` honor the disabled state (no clear button, no chip removal) when a thread is resolved.\r
  - Collaborator add/remove handlers bail early for resolved threads to prevent accidental edits.\r
  - Updated: \`src/components/ui/searchable-select.tsx\`, \`src/components/chat/ConversationPage.tsx\`\r
\r
# [0.1.26] FE WEB CEKAT 2026-01-01\r
\r
### Supabase Configuration\r
\r
- **Env-only credentials**: \`src/config/supabase.ts\` now reads \`VITE_SUPABASE_URL\` and \`VITE_SUPABASE_ANON_KEY\` (or \`VITE_SUPABASE_PUBLISHABLE_KEY\`) directly from the environment, with clear error messages when either is missing.\r
- **Removed baked-in keys**: Any hardcoded DEV/PROD URLs or anonymous keys have been removed, eliminating mismatched-session logouts when the production build refreshes.\r
- **Commit:** \`chore: document proxy routing updates\`  aligned the config with environment-driven credentials and documented the change.\r
\r
# [0.1.25] FE WEB CEKAT 2025-12-30\r
\r
### Webhook Routing & Live Chat\r
\r
- **Proxy-aware production routing**: \`src/config/webhook.ts\` now prefers Supabase Edge proxy routes while still allowing explicit overrides and legacy fallbacks, ensuring production hits \`proxy-n8n\` even when \`VITE_WEBHOOK_BASE_URL\` is set to your Supabase host.\r
- **Client auth resilience**: \`src/lib/webhookClient.ts\` attempts to attach a session token when available but no longer blocks calls if the viewer lacks one, so widget traffic still reaches the proxy (and surfaces 401s when the function enforces auth).\r
- **Env guidance**: Documented the required \`VITE_SUPABASE_ANON_KEY\` in \`src/config/supabase.ts\` so deployments fail fast if keys are missing, and restored custom-domain detection so \`api.cssuper.com\` resolves to the production Supabase key when the variable is omitted.\r
- **Commit:** \`chore: document proxy routing updates\`  removed hardcoded Supabase fallbacks so \`src/config/supabase.ts\` now reads only the environment-provided URL/key, preventing prod refresh logouts caused by mismatched credentials.\r
\r
### Live Chat\r
\r
- **Streaming order stability**: \`src/pages/LiveChat.tsx\` now tracks a monotonic render order so assistant replies consistently appear beneath the triggering user message without requiring a refresh.\r
- **Proxy-first webhook**: The Live Chat send flow always calls the Supabase \`proxy-n8n\` function before falling back to the legacy webhook, so both production and development environments continue to hit the proxy listener.\r
\r
# [0.1.24] FE WEB CEKAT 2025-12-30\r
\r
### Contacts  Conversations (Multi-Thread Support)\r
\r
- **Thread Picker for Open conversation**: Contacts now open a thread/channel picker instead of jumping directly to \`/chat\` by contact, solving ambiguity when a contact has multiple threads across channels.\r
  - New component: \`src/components/chat/ContactThreadPickerDialog.tsx\`\r
  - Updated: \`src/components/contacts/Contacts.tsx\` now opens the picker and navigates with \`menu=chat&contact=<id>&thread=<id>\`\r
\r
### Conversations: Deterministic Thread Selection\r
\r
- **URL-based thread deep link**: \`ConversationPage\` now supports \`thread=<threadId>\` and prioritizes it over \`contact=<contactId>\`, ensuring the correct thread opens even when the same contact has multiple channel threads.\r
  - Clicking a conversation updates the URL (\`thread\` + \`contact\`) so navigation is stable and shareable.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
### Conversations UI\r
\r
- **Platform tags**: Conversation rows now show provider badges (e.g. Telegram/Web/WhatsApp) for clearer channel context.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
### Thread Picker UI Polish\r
\r
- **Better list layout**: Improved thread list rendering to avoid clipped/trimmed rows and to pin the platform chip to the bottom-right of each row (timestamp top-right).\r
  - Updated: \`src/components/chat/ContactThreadPickerDialog.tsx\`\r
\r
# [0.1.23] FE WEB CEKAT 2025-12-29\r
\r
### Authentication & User Management\r
\r
- **Whitespace-Free Email & Password Inputs**: Login, reset-password, and agent creation forms now strip spaces and force lowercase emails while blocking space characters in passwords, preventing accidental invalid credentials.\r
  - \`src/components/auth/Login.tsx\` sanitizes email input across login, reset, and (future) signup tabs and blocks whitespace in password fields.\r
  - \`src/pages/ResetPassword.tsx\` applies the same input guards to new/confirm password fields.\r
  - \`src/components/humanagents/HumanAgents.tsx\` normalizes emails when creating agents to avoid duplicate entries caused by casing or trailing spaces.\r
\r
### Conversations\r
\r
- **WhatsApp-Style Day Separators**: Chat threads display \`Today\`, \`Yesterday\`, or a formatted date badge between message clusters, making timelines easier to scan.\r
  - Implemented in \`src/components/chat/ConversationPage.tsx\` with memoized grouping so the list stays performant.\r
\r
### Analytics\r
\r
- **Unified Date Range Picker**: Replaced separate \`From\`/\`To\` inputs with a single range calendar that mirrors the contacts page behavior and keeps queries bounded to today.\r
  - \`src/components/analytics/Analytics.tsx\` stores normalized \`YYYY-MM-DD\` strings and offers a quick Clear action.\r
- **Stable Refresh Logic**: Prevented stale data by delaying metric/database fetches until the user finishes selecting the range (popover closes), ensuring the latest \`from/to\` pair drives every refresh.\r
\r
# [0.1.22] FE WEB CEKAT 2025-12-24\r
\r
### Authentication & Environment\r
\r
- **Supabase Config Hardening**: Prevented Invalid API key errors in Netlify preview/dev deploys caused by URL/key mismatches.\r
  - \`src/config/supabase.ts\` now infers dev/prod pairing from the Supabase URL host when only one override is provided.\r
  - Defaults to a dev-safe target unless the URL clearly points to \`api.cssuper.com\`.\r
  - Still supports explicit \`VITE_SUPABASE_URL\` and \`VITE_SUPABASE_ANON_KEY\` overrides.\r
\r
### Platforms (WhatsApp)\r
\r
- **Delete Webhook Payload**: When deleting WhatsApp channels, the webhook call now includes the channel identifier.\r
  - \`DELETE_SESSION\` payload now sends \`channel_id\` and \`org_id\` alongside \`session_name\` for reliable backend cleanup.\r
\r
- **External ID Consistency**: WhatsApp channels now maintain a stable external identifier across lifecycle states.\r
  - On create, WhatsApp channels set \`external_id\` to the normalized WAHA session name and store \`credentials.waha_session_name\`.\r
  - WAHA session sync now upgrades \`external_id\` to the real WhatsApp \`me.id\` (e.g. \`628...@c.us\`) once available, and never wipes it back to null.\r
  - Added a fallback lookup to \`GET /api/sessions/{name}\` when the WAHA list endpoint does not include \`me.id\`.\r
  - Standardized WAHA session naming to \`toLowerCase().replace(/\\s/g,'')\` for consistent matching.\r
\r
# [0.1.21] FE WEB CEKAT 2025-12-24\r
\r
### Circuit Breaker Settings\r
\r
- **Date Range Validation**: Updated chat date filter to require both "From" and "To" values before applying.\r
  - Prevents half-filled date ranges from running and warns users when only one side is selected.\r
  - Disallows selecting an end date earlier than the start date and keeps calendars constrained to valid ranges.\r
- **Audit Log Date Filter Guardrails**: Logs page now requires selecting both "From" and "To" dates and constrains pickers to valid ranges.\r
  - Displays inline guidance when only one side of the range is provided.\r
  - Ensures backend queries use start/end-of-day boundaries for inclusive day filtering.\r
  - Replaced separate date inputs with a single range calendar so start and end dates are chosen together.\r
\r
# [0.1.20] FE WEB CEKAT 2025-12-24\r
\r
### Conversations: Filter UX & Correctness\r
\r
- **Channel Type Filter Fixed**: Channel Type now correctly filters threads at the query level.\r
  - Updated \`useConversations\` to use an inner join (\`channels!inner(...)\`) so \`channels.provider\` filters actually constrain \`threads\` results (PostgREST behavior).\r
  - Added defensive client-side filtering for \`channelType\`, \`inbox\`, and \`platformId\` to ensure consistent UI results.\r
\r
- **Persistent Applied Filters**: Applied filters now persist and are shareable.\r
  - Filters are serialized into URL query params (\`f_*\`) so refresh/back/forward retains the exact filtered view.\r
  - If URL has no filter params, the last applied filters are restored from localStorage (per-user key).\r
\r
- **Visible Active Filters**: Users can now see whats currently applied.\r
  - \`ConversationPage\` renders active filter badges under the Conversations header (Channel, Platform, Status, Agent, Resolved By, Date, Inbox).\r
  - \`ChatFilter\` modal is now controlled via a \`value\` prop so reopening the modal shows the currently applied values.\r
\r
### Configuration & Environment Management\r
\r
- **Centralized URL Configuration**: Created comprehensive URL and environment configuration system\r
  - New \`src/config/urls.ts\` centralizes all app base URLs (APP_ORIGIN, WAHA_BASE_URL) with environment-aware defaults\r
  - New \`src/config/supabase.ts\` centralizes Supabase URL and key configuration with automatic dev/prod switching\r
  - Production app origin now defaults to \`https://synkaai.netlify.app\` (even in dev) for consistent LiveChat links\r
  - Supabase URL automatically switches: DEV  \`bkynymyhbfrhvwxqqttk.supabase.co\`, PROD  \`api.cssuper.com\`\r
  - All configuration supports \`VITE_*\` environment variable overrides for flexible deployment\r
  - Removed all hardcoded Netlify and Supabase URLs from components\r
\r
- **Platform URL Updates**: Updated all platform-related URLs to use centralized configuration\r
  - \`ConnectedPlatforms.tsx\` now uses \`APP_ORIGIN\` and \`livechatUrl()\` helper instead of hardcoded URLs\r
  - LiveChat embed code now uses configurable \`APP_ORIGIN\` instead of hardcoded domain\r
  - \`WhatsAppPlatformForm.tsx\` uses \`WAHA_BASE_URL\` from config instead of hardcoded Railway URL\r
  - All platform forms now reference single source of truth for base URLs\r
\r
### AI Agent Settings Cleanup\r
\r
- **Removed Context Window Field**: Removed "Context Window (K tokens)" from Additional Settings UI\r
  - Field no longer visible or editable in AI Agent Settings interface\r
  - Removed all related state variables (\`contextLimitInput\`, \`contextLimitMax\`)\r
  - Removed input handler (\`handleContextLimitChange\`) and validation logic\r
  - Save logic still automatically persists safe default value (existing value or 28K tokens, clamped to model capability)\r
  - Ensures database writes continue to work without breaking changes\r
\r
### Conversation Filtering\r
\r
- **Removed Pipeline Status Filter**: Cleaned up thread filter interface\r
  - Removed "Pipeline Status" dropdown from chat filter dialog\r
  - Removed \`pipelineStatus\` from filter state and type definitions\r
  - Removed \`pipeline_status\` query filtering from \`useConversations\` hook\r
  - Simplified filter UI with cleaner, more focused options\r
\r
### Technical Improvements\r
\r
- **Code Organization**: Improved maintainability and consistency\r
  - Single source of truth for all environment-specific URLs\r
  - Consistent configuration pattern across all services\r
  - Better separation of concerns between UI and configuration\r
  - Enhanced type safety with centralized config exports\r
\r
# [0.1.19] FE WEB CEKAT 2025-12-24\r
\r
### Circuit Breaker Settings\r
\r
- **Robust Numeric Validation**: Reset timeout, monitoring period, request timeout, and threshold fields now accept temporary clears but enforce min/max bounds before saving.\r
  - Inline error messages and disabled save state prevent invalid submissions.\r
  - Inputs strip non-numeric characters, block scientific notation, and clamp values to their allowed ranges.\r
- **Latency Feedback**: Healthy and stress latency controls show live seconds previews, clarifying millisecond inputs.\r
- **Tooltip Refinement**: Repositioned tooltips to render beside their triggers, preventing clipping inside the modal.\r
\r
### Adaptive Rate Limiter Configuration\r
\r
- **Precision Controls**: Base limits and multiplier inputs now sanitize numeric entry, limit decimals to three places, and sync their raw display strings with validated state.\r
- **Validation Guardrails**: All adaptive fields surface inline errors and keep the save button disabled until values fall within allowed ranges.\r
- **Enhanced Summary**: Read-only configuration card now surfaces latency thresholds (with seconds) alongside existing multiplier and interval details.\r
- **Modal Tooltips**: Every helper tooltip aligns left/right relative to its column, ensuring full visibility within the dialog.\r
\r
# [0.1.18] FE WEB CEKAT 2025-12-24\r
\r
### Bug Fixes\r
\r
- **Fixed Platform Filter Not Finding Channels**: Resolved critical bug where selecting a channel type (Telegram, WhatsApp, Web) would show no platforms.\r
  - Changed platform filtering from \`channels.type\` to \`channels.provider\` to match actual database schema.\r
  - In database, \`channels.provider\` contains transport values (\`telegram\`, \`web\`, \`whatsapp\`) while \`channels.type\` contains implementation details (\`bot\`, \`inbox\`).\r
  - Updated both \`ChatFilter.tsx\` (UI filtering) and \`useConversations.ts\` (query filtering) to use \`channels.provider\`.\r
  - Telegram and other channel types now correctly display their platforms when selected.\r
\r
### Conversation Management\r
\r
- **Hierarchical Channel Type  Platform Filter**: Enhanced chat filter with parent-child filter relationship.\r
  - Platform filter now requires Channel Type selection first (Platform dropdown disabled until Channel Type is chosen).\r
  - Placeholder text changes to "Select channel type first" when Channel Type is not selected.\r
  - Changing Channel Type automatically clears Platform selection to prevent stale selections.\r
  - Improved UX with clear dependency indication between filters.\r
\r
- **Empty State for Platform Filter**: Added user-friendly empty state handling.\r
  - When selected Channel Type has no matching platforms, dropdown shows disabled option: "No platforms found for this channel type".\r
  - Prevents confusion when no results are available for a selected channel type.\r
  - Platform display simplified to show only \`display_name\` without provider/type suffix for cleaner UI.\r
\r
# [0.1.17] FE WEB CEKAT 2025-12-22\r
\r
### Bug Fixes\r
\r
- **Fixed Stale Data Persistence After Role Changes**: Resolved critical issue where threads and contacts persisted in the UI after role changes in the database.\r
  - Removed localStorage caching for threads (\`app.cachedConversations\`) to prevent stale data from persisting after authorization changes.\r
  - Disabled query caching for authorization-sensitive operations (threads, contacts) in \`protectedSupabase\` wrapper to ensure fresh data on role changes.\r
  - Threads and contacts now immediately clear and refetch when user roles change, preventing unauthorized data from being displayed.\r
  - Fixed issue where changing a user's role from \`master_agent\` to \`super_agent\` (or vice versa) in the database would not immediately reflect in the UI.\r
\r
### Technical Improvements\r
\r
- **Realtime Role Change Detection**: Implemented comprehensive authorization change detection system.\r
  - Added realtime subscription to \`user_roles\` table in \`RBACContext\` to detect role changes for the current user.\r
  - Created \`authz.ts\` utility module for centralized authorization change handling and cache invalidation.\r
  - Implemented event-based system (\`authzChanged\` event) to notify hooks when authorization changes occur.\r
  - \`useConversations\` and \`useContacts\` hooks now listen for authorization changes and automatically reset state + refetch data.\r
  - Ensures UI always reflects current user permissions without requiring manual refresh or logout/login.\r
\r
- **Cache Invalidation Strategy**: Enhanced cache management for authorization-sensitive data.\r
  - Authorization changes now trigger comprehensive cache clearing (localStorage, query cache, fallback handler).\r
  - Removed role-agnostic caching that could serve stale results after permission changes.\r
  - All authorization-sensitive queries now bypass cache to ensure data accuracy.\r
  - Improved security by preventing cached data from persisting after role downgrades.\r
\r
# [0.1.16] FE WEB CEKAT 2025-12-20\r
\r
### UI Components\r
\r
- **SearchableSelect Component**: Added a new reusable searchable single-select dropdown component.\r
  - Provides searchable dropdown functionality with keyboard navigation support.\r
  - Includes proper accessibility attributes and visual feedback for selected items.\r
  - Used for improved agent assignment interface in conversation management.\r
\r
- **SearchableMultiSelect Component**: Added a new reusable searchable multi-select component.\r
  - Supports selecting multiple items with badge display for selected values.\r
  - Includes add/remove callbacks for granular control over selection changes.\r
  - Displays selected items as removable badges with clear visual indicators.\r
\r
### Conversation Management\r
\r
- **Enhanced Agent Assignment UI**: Replaced popover-based assignment interface with searchable select components.\r
  - "Handled By" field now uses \`SearchableSelect\` for improved searchability and UX.\r
  - Streamlined assignment flow with better visual feedback and state management.\r
  - Added optimistic UI updates with proper state synchronization.\r
\r
- **Improved Collaborator Management**: Enhanced thread collaborator interface with multi-select support.\r
  - Replaced popover-based collaborator addition with \`SearchableMultiSelect\` component.\r
  - Collaborator list now displays as removable badges for better visibility.\r
  - Added support for super agent member filtering - only members of the assigned super agent can be added as collaborators.\r
  - Collaborator selection is disabled until a "Handled By" agent is assigned.\r
  - Automatic fetching of super agent members when an agent is assigned.\r
\r
- **Manual Thread Assignment**: Added \`assignThreadToUser\` function for supervisor-level thread reassignment.\r
  - Allows supervisors to manually assign conversations to specific users.\r
  - Automatically creates system event messages when assignments occur.\r
  - Updates thread metadata including \`assigned_by_user_id\`, \`assigned_at\`, and \`handover_reason\`.\r
  - Disables AI access when manually assigned (\`ai_access_enabled: false\`).\r
\r
- **User Label Resolution**: Improved user display name resolution for agents and collaborators.\r
  - Fetches user profile data for agents not present in the human agents list.\r
  - Caches user labels to avoid redundant API calls.\r
  - Provides fallback display names when profile data is unavailable.\r
\r
### Bug Fixes\r
\r
- **Fixed Handled By State Leak**: Resolved critical bug where assigning a thread to an agent would incorrectly show that agent as assigned to all other threads.\r
  - Scoped \`handledByOverride\` state to specific thread IDs instead of using global state.\r
  - Optimistic UI updates now only apply to the thread being assigned, preventing state leakage when navigating between conversations.\r
  - Fixed issue where changing "Handled By" for one thread would temporarily display the same value for all threads until server refresh.\r
\r
# [0.1.15] FE WEB CEKAT 2025-12-19\r
\r
### Database & Policies\r
\r
- **Threads Update Policy**: Master agents can now resolve conversations across all environments.\r
  - Updated the \`threads update perm update_own\` policy to allow updates when \`is_master_agent_in_org(org_id)\` is true.\r
  - Applied the policy change to main, development, and backup Supabase projects and added a migration for consistency.\r
\r
### Conversation Management\r
\r
- **Resolved Thread Cleanup**: UI now hides take-over controls once a thread is closed.\r
  - Removed the takeover button and composer input when \`status === 'closed'\`, preventing accidental actions on resolved chats.\r
\r
### Contacts\r
\r
- **Unassigned Filter Accuracy**: Ensured the contacts list reflects only unassigned records without altering assigned data.\r
  - Adjusted Supabase querying and client filtering so contacts with no assigned agent (or no thread yet) display correctly.\r
  - Total counters and pagination now show filtered counts (e.g. \`12 of 16\`) when a handled-by filter is active.\r
- **Export to CSV**: Added a one-click export that downloads the current contact dataset (with latest thread info) as a CSV.\r
  - Includes contact fields (name, phone, email, notes, created_at) and latest thread metadata (status, handled by, channel).\r
- **Toolbar Cleanup**: Removed the unused Customize Columns button for a leaner toolbar experience.\r
\r
# [0.1.14] FE WEB CEKAT 2025-12-18\r
\r
### Platform Forms (WhatsApp / Telegram / Web)\r
\r
- **Top Spacing Layout Fix**: Standardized form spacing under dialog headers for a cleaner, consistent layout across all platform setup forms.\r
\r
### Telegram Platform\r
\r
- **Bot Token Validation (Required)**: Added a **Validate** button beside the Telegram Bot Token field and made validation mandatory before creating a Telegram platform.\r
  - Create is blocked with an error until the token has been validated.\r
- **Token Verification via Supabase Edge Function**: Token verification now calls the Supabase Edge Function endpoint (\`/functions/v1/telegram-verify-token\`) with a strict response contract (\`{ valid: boolean }\`).\r
  - \`callWebhook()\` now auto-attaches Supabase auth headers for Supabase Edge Function URLs.\r
\r
# [0.1.13] FE WEB CEKAT 2025-12-17\r
\r
### Conversation Management\r
\r
- **Date Filter Fix**: Resolved an issue where the date filter in the conversations menu would incorrectly exclude valid conversations.\r
  - Switched from server-side filtering on \`created_at\`/\`last_msg_at\` (which could be stale) to client-side filtering using the computed last message time.\r
  - Ensures the filter now perfectly matches the dates displayed in the UI, correctly showing threads active within the selected range.\r
\r
# [0.1.12] FE WEB CEKAT 2025-12-14\r
\r
### Human Agents UI Protection\r
\r
- **Master Agent UI Safeguards**: Enhanced protection for master agent accounts in the Human Agents interface.\r
  - Status dropdown button is now disabled for master agents across all sections (master agents, super agents, regular agents, and pending invitations).\r
  - Chevron dropdown icon is conditionally hidden for master agents to provide clear visual indication that status cannot be changed.\r
  - Delete button is completely hidden for master agents (replacing the previous disabled button with tooltip approach) across all agent sections.\r
  - Applied consistent protection logic using \`primaryRole === 'master_agent'\` checks throughout the component.\r
  - Provides cleaner UI experience by removing non-functional controls rather than showing disabled states.\r
\r
### Authentication & OTP\r
\r
- **2FA Email Edge Function Update**: Updated edge function reference for login-specific 2FA emails.\r
  - Changed edge function call from \`send-2fa-email\` to \`send-2fa-login-email\` in \`AuthContext.tsx\` and \`Otp.tsx\`.\r
  - Aligns with backend function naming convention for better clarity and separation of login vs other 2FA email flows.\r
\r
# [0.1.11] FE WEB CEKAT 2025-12-10\r
\r
### Conversation Management\r
\r
- **Status Filter Cleanup**: Removed the redundant "Resolved" option from the conversation status filter.\r
  - The "Closed" status now serves as the single source of truth for completed conversations.\r
  - Simplified the filtering logic to remove unnecessary status checks.\r
\r
# [0.1.10] FE WEB CEKAT 2025-12-09\r
\r
### Human Agents & Permissions\r
\r
- **Create Agent Permission Gate**: Simplified and hardened the Create Agent button on the Human Agents page.\r
  - Button is now directly gated by \`users_profile.create\` via \`PermissionGate\`, following the same pattern as other RBAC-protected actions.\r
  - When the user lacks permission, the button stays visible but disabled with a clear tooltip (You do not have permission to create agents.).\r
  - Removed the extra client-side lookup against the \`permissions\` table and associated state (\`createPermissionKey\`, \`checkingCreatePermission\`) to reduce complexity and runtime edge cases.\r
\r
### Navigation & RBAC Consistency\r
\r
- **Super Agents Schema Alignment**: Updated \`PERMISSIONS_SCHEMA\` to include the full \`super_agents\` action set (\`create\`, \`update\`, \`delete\`, \`read_all\`, \`read_own\`), matching the backend \`permissions\` table.\r
- **Navigation Read-Gates**: Centralized navigation gating to use read scopes consistently:\r
  - Added a defensive \`readPerms(resource)\` helper that safely derives \`resource.read*\` keys from \`PERMISSIONS_SCHEMA\`.\r
  - Human Agents sidebar item now depends on any \`super_agents\` read scope (e.g. \`super_agents.read_all\` / \`super_agents.read_own\`), keeping menu visibility aligned with DB permissions.\r
- **useNavigation Stability**: Adjusted \`useNavigation\` to skip DB permission recomputation while RBAC is still loading, preventing transient context errors during hot reloads while keeping the existing has_perm-first behavior.\r
\r
# [0.1.9] FE WEB CEKAT 2025-12-03\r
\r
### AI Agents\r
\r
- Replaced the browser \`confirm()\` with a first-class modal when deleting AI agents.\r
  - Uses the shared \`AlertDialog\` component with explicit cancel/confirm controls.\r
  - Shows the agent name inside the confirmation copy and blocks dismissal while the request is in flight.\r
  - Surfaces loader feedback and only closes when the Supabase delete succeeds.\r
\r
# [0.1.8] FE WEB CEKAT 2025-12-03\r
\r
### Platform Forms: Super Agent Management & Scoping\r
\r
- **Explicit Super Agent Selection**: All platform forms (WhatsApp, Telegram, Web) now require explicit Super Agent selection before AI Agent selection\r
  - Super Agent field is now a required, selectable dropdown (previously derived from AI Agent)\r
  - Field appears above AI Agent selection with clear labeling and tooltips\r
  - Form validation prevents submission without Super Agent selection\r
  - Helper text explains that Super Agent can be changed independently of AI Agent\r
\r
- **AI Agent Filtering by Super Agent**: Enhanced AI Agent selection with strict scoping\r
  - AI Agent dropdown only shows agents belonging to the selected Super Agent\r
  - Validation prevents selecting AI agents that don't belong to the selected Super Agent\r
  - Error toast notifications when attempting invalid selections\r
  - Form automatically resets AI Agent selection when Super Agent changes\r
  - Warning message displayed if selected AI Agent lacks a Super Agent assignment\r
\r
- **Human Agent Scoping**: Improved human agent assignment with role-based filtering\r
  - Human Agent multi-select only shows agents assigned to the selected Super Agent\r
  - "Select All" and "Unselect All" buttons for quick agent assignment\r
  - Multi-select disabled until Super Agent is selected\r
  - Clear placeholder text indicating selection requirements\r
  - Consistent behavior across all platform types (WhatsApp, Telegram, Web)\r
\r
- **AI Agent Creation Enhancement**: Super Agent assignment during creation\r
  - Super Agent selection required in AI Agent creation dialog\r
  - Searchable dropdown for Super Agent selection\r
  - Super Agent information displayed in AI Agent cards\r
  - Validation ensures Super Agent is selected before agent creation\r
\r
### Navigation & Permissions Updates\r
\r
- **Navigation Configuration**: Updated navigation items and permission mappings\r
  - Refined permission checks for navigation visibility\r
  - Enhanced role-based access control for navigation items\r
  - Improved database permission checks in useNavigation hook\r
\r
- **Permission Schema**: Updated permissions configuration\r
  - Aligned permission schema with backend requirements\r
  - Enhanced permission categorization and validation\r
\r
### Live Chat Improvements\r
\r
- **Message Handling**: Enhanced message synchronization and streaming\r
  - Improved realtime message updates\r
  - Better handling of streaming responses\r
  - Optimized message deduplication logic\r
  - Enhanced user message timeout handling\r
\r
### Webhook Configuration\r
\r
- **Webhook Routing**: Updated webhook endpoint configuration\r
  - Enhanced proxy-aware routing\r
  - Improved endpoint resolution for different providers\r
  - Better error handling for webhook calls\r
\r
### Technical Improvements\r
\r
- **Hooks Enhancement**: Improved data fetching and scoping\r
  - Enhanced useAIAgents hook with better super agent scoping\r
  - Improved useNavigation hook with database permission checks\r
  - Better error handling and loading states\r
  - Optimized cache management\r
\r
# [0.1.7] FE WEB CEKAT 2025-12-03\r
\r
### RBAC & Permissions (Finalized Alignment)\r
\r
- Standardized PERMISSIONS_SCHEMA to match production backend exactly:\r
  analytics, ai_profiles, ai_sessions, channels, contacts, contact_identities, threads, messages, ai_agent_files, admin_panel, roles, audit_logs, alerts.\r
- Permission Matrix UX revamp (purely permission-driven):\r
  - Card sections enforced per resource: Manage (create/update/delete), Access Level (read variants), Special Actions (send/ack).\r
  - Mutually exclusive Access Level pills; Threads uses My Channels (read_channel_owned), Collaborator, All.\r
  - Special actions exposed as toggles: messages.send (Send), alerts.ack (Acknowledge).\r
  - Select All sets Manage + Special Actions ON and selects the most permissive single read level; Unselect All resets to None.\r
  - Labels updated (Update Settings for admin_panel.update); consistent wording across cards.\r
  - Added concise tooltips for threads/messages read scopes and alerts.ack.\r
- Removed bundle-based Menu Access from PermissionsPage; no more ghost toggles or bundles.\r
- Fixed toggle handler so switches reflect intended state; role permission grant/revoke now gated by roles.update.\r
- Debounced RBAC refresh during bulk edits to prevent UI lag.\r
\r
### Navigation & Visibility (Policy-First)\r
\r
- Menu visibility now depends on DB has_perm checks; items are hidden if the user lacks any read scope for that section.\r
- Updated gating keys to align with schema:\r
  - Admin Panel: admin_panel.read (menu), admin_panel.update (controls)\r
  - Permissions: roles.read\r
  - Chat: threads.read_* (any of read_all/read_channel_owned/read_collaborator)\r
  - Analytics: analytics.read\r
  - Contacts: contacts.read_*; Platforms: channels.read_*; AI Agents: ai_profiles.read_*; Logs: audit_logs.read\r
- Sidebar renders only items from getAccessibleNavItems(); fixed ReferenceError by properly destructuring the hook return.\r
- Reduced has_perm spam: policy checks recompute only when RBAC roles/permissions change.\r
\r
### Admin Panel\r
\r
- Replaced legacy access_rules.configure gates:\r
  - Controls now use admin_panel.update; navigation uses admin_panel.read.\r
\r
### Misc\r
\r
- Added contact_identities to schema.\r
- Consistency/cleanup across labels, ordering, and spacing in Permission Matrix.\r
\r
# [0.1.6] FE WEB CEKAT 2025-11-30\r
\r
### Cache Management & Session Reliability\r
\r
- **Comprehensive Cache Clearing on Logout**: Enhanced logout functionality to clear all cached data\r
  - Clears all localStorage items (including \`app.cached*\`, \`app.currentUserId\`, etc.)\r
  - Clears all sessionStorage items\r
  - Clears all Supabase auth tokens\r
  - Prevents stale data from persisting after logout\r
  - Applied to both \`AuthContext.signOut()\` and \`Logout.tsx\` page\r
\r
- **localStorage-Based User ID Storage**: Improved session reliability by storing user ID in localStorage\r
  - User ID and email stored in localStorage as \`app.currentUserId\` and \`app.currentUserEmail\` on login\r
  - Added \`getCurrentUserId()\` helper function that prefers localStorage over Supabase session\r
  - Updated \`logAction()\` to use localStorage user_id first, then fallback to Supabase session\r
  - Ensures consistent user identification even when Supabase session is temporarily unavailable\r
\r
### Bug Fixes\r
\r
- **Merge Conflict Resolution**: Resolved merge conflict in \`useAIAgents.ts\` by combining \`scopeMode\` and \`superAgentId\` logic\r
- **Policy Role Fix**: Fixed \`threads_master_read\` policy to use \`authenticated\` role instead of \`public\` role\r
- **Cache Persistence**: Fixed issue where cached data persisted after logout, causing users to see unauthorized data\r
\r
# [0.1.5] FE WEB CEKAT 2025-11-30\r
\r
### Webhook & Supabase URL Consistency\r
\r
- **Single Source for Supabase URL**: Exported a shared \`SUPABASE_URL\` constant from the Supabase client so all front-end integrations reference the same base URL sinstead of duplicating it.\r
- **Proxy Edge Function Alignment**: Updated \`WEBHOOK_CONFIG\` to derive the proxy base (\`/functions/v1/proxy-n8n\`) from the shared \`SUPABASE_URL\`, removing the old hardcoded Supabase project host and keeping proxy routing aligned with the active project.\r
- **WhatsApp WAHA Webhook Normalization**: Swapped the hardcoded Railway webhook host in \`WhatsAppPlatformForm\` for \`WEBHOOK_CONFIG.BASE_URL\`, ensuring WAHA sessions always post back into the currently configured webhook environment.\r
\r
# [0.1.4] FE WEB CEKAT 2025-11-28\r
\r
### Bug Fixes\r
\r
- **PermissionsPage Duplicate Declaration Fix**: Resolved "Identifier 'permissionSearch' has already been declared" syntax error\r
  - Removed duplicate state declarations for \`permissionSearch\`, \`permissionResourceFilter\`, and \`permissionActionFilter\`\r
  - Kept the properly typed versions of these state variables\r
  - Fixed runtime error that prevented the Permissions page from loading\r
\r
# [0.1.3] FE WEB CEKAT 2025-11-28\r
\r
### AI Agent Visibility\r
\r
- Agents now only see AI agents owned by their assigned super agent; a new \`useSuperAgentScope\` hook drives consistent filtering across dashboards, dropdowns, and cached data.\r
- The AI Agents list and helpers surface localized messaging when an agent has no supervising cluster, preventing stale cross-team data from leaking through local storage.\r
\r
### Database Access Control\r
\r
- Tightened the \`ai_profiles\` RLS guard so master agents retain full visibility, super agents stay scoped to their own records, and agents inherit their supervising super agents access.\r
\r
# [0.1.2] FE WEB CEKAT 2025-11-26\r
\r
### Platform Form Enhancements for Super Agents\r
\r
- **Super Agent Field Auto-Prefill**: All platform creation forms (Telegram, WhatsApp, Web) now automatically prefill the super agent field when the current user is a super agent\r
  - Super agent field is automatically populated with the current user's super agent username/ID when form opens\r
  - Field becomes readonly (visual indication with reduced opacity) when user is a super agent\r
  - Helper text updated to indicate super agent is determined by current user's account for super agent users\r
  - Prevents super agent users from changing their own super agent assignment\r
\r
- **AI Agent Filtering for Super Agents**: Enhanced platform forms to filter AI agents based on super agent role\r
  - Super agent users only see AI agents that belong to their account in the AI agent dropdown\r
  - Validation prevents selecting AI agents that don't belong to the super agent's account\r
  - Error toast notification shown when attempting to select invalid AI agents\r
  - Master agents continue to see all AI agents as before\r
\r
- **Role-Based Form Behavior**: Implemented role-aware form logic across all platform types\r
  - Added \`useRBAC()\` hook integration to check for \`ROLES.SUPER_AGENT\` role\r
  - Automatic super agent ID detection from \`humanAgents\` list when form opens\r
  - Form reset logic preserves super agent ID for super agent users\r
  - Consistent behavior across Telegram, WhatsApp, and Web platform forms\r
\r
### Technical Improvements\r
\r
- **Component Updates**: Enhanced platform form components with role-based logic\r
  - Added \`useEffect\` hooks to prefill super agent field on form open\r
  - Integrated \`useRBAC\` context for role checking\r
  - Added conditional rendering and validation based on user role\r
  - Improved form state management to preserve super agent selection for super agent users\r
\r
# [0.1.1] FE WEB CEKAT 2025-11-27\r
\r
### Permissions Console\r
\r
- **Regression Fix**: Reintroduced missing permission search and filter state in \`PermissionsPage\`; restores the role configuration screen and avoids the \`permissionSearch is not defined\` runtime error.\r
- **Master Agent Safety Rail**: Hard-blocked deletion of the Master Agent from both UI and API helpers; delete buttons are disabled with guidance and back-end guards stop any direct calls.\r
\r
### UI Localization\r
\r
- **Master Agent Deletion Message**: Updated the modal tooltip and toast that appear when attempting to delete a master agent; the copy now follows the latest localization requirements.\r
\r
# [0.1.0] FE WEB CEKAT 2025-11-27\r
\r
### FINALIZED FOR PRODUCTION\r
\r
### Agent Creation UX\r
\r
- **Modal-Friendly Errors**: Duplicate-email validation now surfaces purely as a toast; the Create Agent dialog stays open and no longer renders the full-page error banner, making it easy to adjust the address and resubmit.\r
\r
# [0.0.49] FE WEB CEKAT 2025-11-27\r
\r
### Human Agents Roster\r
\r
- **Duplicate Entry Cleanup**: Adjusted role grouping logic so master agents no longer appear in both the master and agent sections of the Human Agents table; prevents a single email from showing twice and keeps assignment status accurate.\r
\r
### Login & Session Guardrails\r
\r
- **Refresh Spinner Fix**: Added watchdog timers around Supabase session/bootstrap calls so a stalled \`auth.getSession()\` or 2FA profile check cant trap users behind the infinite Loading screen; stale sessions now fall back to the login view within a few seconds.\r
- **Account Status Timeouts**: Soft-capped the account status RPC to keep token refreshes responsive even if the database briefly stops responding.\r
\r
# [0.0.48] FE WEB CEKAT 2025-11-26\r
\r
### RBAC & Permissions System Enhancements\r
\r
- **Master Agent Root Role Treatment**: Master Agent is now treated as root role with full system privileges\r
  - Master Agent role is designated as root role with unrestricted access across the system\r
  - Permission matrix editing is disabled for Master Agent to prevent accidental permission removal\r
  - Root role status ensures Master Agent maintains full privileges regardless of permission configuration\r
\r
- **Permission Matrix UI Updates**: Disabled permission matrix editing for Master Agent role\r
  - Added root role detection in PermissionsPage component (\`isRootSelected\` check)\r
  - Permission matrix sections (Menu Access, CRUD Permissions, Special Permissions) are disabled when configuring Master Agent\r
  - Added informational "Root Role" card explaining Master Agent's full privilege status\r
  - All permission checkboxes and bundle toggles are disabled with helpful tooltips ("Master Agent is root; matrix disabled")\r
  - Clear visual indication that Master Agent has full privileges and doesn't require permission configuration\r
  - Prevents accidental permission removal for root role through UI safeguards\r
  - Early return guards prevent any permission toggle operations when Master Agent is selected\r
\r
### Technical Improvements\r
\r
- **PermissionsPage Component**: Enhanced role configuration logic\r
  - Added \`isRootSelected\` state check based on role name comparison\r
  - Conditional rendering of root role information card\r
  - Disabled state applied to all permission matrix controls for Master Agent\r
  - Improved tooltip messaging for disabled root role controls\r
- **Open Conversation Navigation Fix**: Ensured contacts page button opens chat inbox\r
  - \`Open conversation\` now routes to chat inbox with \`menu=chat\`\r
  - Automatically selects the relevant contact thread when available\r
\r
# [0.0.47] FE WEB CEKAT 2025-11-25\r
\r
### Supabase Baseline Refresh\r
\r
- **Single Source Migration**: Replaced the entire migrations stack with \`20251124230847_baseline.sql\`, capturing todays production schema so every environment can rebuild from a single, clean baseline.\r
- **Vector Extension Guardrails**: Ensured the baseline creates the \`vector\` extension in the \`public\` schema and updates every dependent function/column to reference the schema-qualified type.\r
- **Config Hardening**: Explicitly pins Supabase Storage to \`v1.31.1\` in \`supabase/config.toml\`, preventing CLI diffs from failing on missing storage migrations.\r
\r
### Branch & Data Maintenance\r
\r
- **Development Branch Reset**: Repaired Supabase migration history, reapplied the new baseline, and reset the \`development\` branch so it replays the trimmed migration set without legacy drift.\r
- **Main  Dev Data Parity**: Dumped production \`public\` + \`auth\` data and restored it into the development branch, then pruned historic test accounts to keep both environments aligned.\r
- **Backup Hygiene**: Ran the same user cleanup on the backup project (\`igtizjvhxgajijjjxnzi\`) to ensure the automated sync worker starts from a consistent dataset.\r
\r
# [0.0.46] FE WEB CEKAT 2025-11-24\r
\r
### Database Migration Hardening\r
\r
- **Legacy Platform Support**: Updated the \`20250828000000_merge_platforms_into_channels.sql\` migration to add any missing \`platforms\` columns (\`display_name\`, \`website_url\`, \`status\`, \`secret_token\`, \`profile_photo_url\`, \`ai_profile_id\`) on the fly so historical environments can replay migrations without schema drift.\r
- **Main Branch Hotfix Migration**: Applied Supabase migration \`20250827950000_fix_platforms_schema\` on production to backfill those columns immediately, unblocking rebase operations across environments.\r
- **Rebase Reliability**: Re-ran the Supabase rebase workflow to verify the new safeguards; future branch syncs no longer fail on missing column errors when promoting channels data.\r
\r
# [0.0.45] FE WEB CEKAT 2025-11-23\r
\r
### QA Testing Guide Expansion\r
\r
- **End-to-End Flow Coverage**: Expanded \`DOCUMENTATION.md\` with exhaustive step-by-step flows covering login, OTP, password reset, human/AI agent lifecycle, contacts, permissions, admin utilities, analytics, and audit logs so QA can validate every button and path without code access.\r
- **Button & Validation Matrix**: Documented the enabled/disabled states, confirmation dialogs, toasts, and edge-case behaviour for all primary actions (create, save, delete, export, toggle) across the application.\r
- **Role-Based Walkthroughs**: Added guidance on testing from master, super, and agent perspectives, including navigation expectations and restricted-card behaviour on the dashboard.\r
\r
### Documentation Quality Improvements\r
\r
- **Live Chat & Admin Deep Dives**: Added detailed instructions for conversation tools (notes, tags, canned responses, SLAs), AI pause/resume workflow, circuit breaker monitoring, and platform onboarding (WhatsApp, Telegram, Web).\r
- **Human Agent Lifecycle**: Documented invite, resend, cancellation, token limit management, usage analytics, and removal to ensure QA covers onboarding and offboarding scenarios end-to-end.\r
- **Changelog & Profile Flows**: Captured interactive changelog behaviour, search/filter expectations, and full profile/session management (2FA toggle, password change, device sign-out).\r
\r
### Super Agent Clustering\r
\r
- **AI Agent Ownership**: Introduced \`super_agent_id\` on \`ai_profiles\`, enforced via migrations and new RLS policies. Super agents only see/manage their own AI agents; master agents can reassign via settings.\r
- **Auto-Inherited Platform Ownership**: Platform creation/editing now derives \`channels.super_agent_id\` from the selected AI agent, eliminating manual super agent selection while keeping human-agent assignment intact.\r
- **Scoped Listings**: AI agent lists, stats, and platform forms filter to the current super agent automatically; agents without clusters are prevented from being used until assigned.\r
\r
### Platform Assignment Guard\r
\r
- **Scoped Agent Dropdowns**: When creating WhatsApp, Telegram, or Web platforms as a master agent, the human-agent selector now lists only agents assigned to the chosen super agentpreventing unassigned agents from appearing in the multi-select.\r
\r
# [0.0.44] FE WEB CEKAT 2025-11-19\r
\r
### Changelog Experience Revamp\r
\r
- **Interactive Release Browser**: Introduced a dynamic changelog page with searchable release list, color-coded highlights, and accordion sections for each area of work.\r
- **Dual View Modes**: Added interactive and classic tabs so readers can switch between the immersive UI and the original Markdown in one place.\r
- **Automatic Highlight Extraction**: Generate summary badges from markdown bullet points to surface the most important updates per release.\r
- **Styling Updates**: Applied gradient backgrounds, elevated cards, and refined typography for a colorful, engaging presentation.\r
- **Comprehensive Documentation**: Added \`DOCUMENTATION.md\` detailing auth flows, feature modules, Supabase schema, and operational processes.\r
\r
# [0.0.43] FE WEB CEKAT 2025-11-18\r
\r
### AI Pause Notification System\r
\r
- **New AI Paused Modal Component**: Created dedicated modal for org-wide AI pause notifications\r
  - Modal displays when AI responses are paused across all channels\r
  - Shows who paused AI and when (for master agents)\r
  - Different messaging for master agents vs regular agents\r
  - Master agents can directly navigate to Admin Panel from modal\r
  - Modal appears once per browser session (acknowledgment stored in localStorage)\r
  - Integrated into main Index page with automatic status checking\r
\r
- **Org-Wide AI Pause Status Monitoring**: Enhanced AI pause state management\r
  - Automatic fetching of org-wide AI pause status on app load\r
  - Resolves paused-by user name from profile or email\r
  - Modal auto-dismisses when AI pause is lifted\r
  - Session-based acknowledgment prevents modal spam\r
\r
### Conversation Page UI Improvements\r
\r
- **Fixed Tab Color Styling**: Resolved issue where selected tab colors were not displaying\r
  - Restructured Tooltip/TabsTrigger relationship (Tooltip now inside TabsTrigger)\r
  - Assigned tab: Blue background and text when active\r
  - Unassigned tab: Red background and text when active\r
  - Resolved tab: Green background and text when active\r
  - Proper \`data-[state=active]\` attribute application from Radix UI\r
\r
- **Improved Conversation Sorting**: Enhanced conversation list sorting logic\r
  - Removed unreplied priority sorting (now purely by latest activity)\r
  - Conversations sorted by \`last_msg_at\` timestamp (most recent first)\r
  - Fallback to \`created_at\` if \`last_msg_at\` unavailable\r
  - More intuitive ordering based on actual activity\r
\r
- **Enhanced Timestamp Display**: Improved date/time formatting in conversation list\r
  - Added "Yesterday" display for messages from previous day\r
  - Changed date format from \`dd/MM/yy\` to \`MM/dd/yyyy\` for better clarity\r
  - Better hour-based calculations for relative time display\r
  - More accurate time representation\r
\r
- **TypeScript Fixes**: Resolved type errors\r
  - Removed reference to non-existent \`updated_at\` field on \`ConversationWithDetails\`\r
  - Fixed sorting logic to use only available timestamp fields\r
\r
### Code Quality Improvements\r
\r
- **Conversation Hooks Cleanup**: Minor refactoring in \`useConversations\` hook\r
  - Code cleanup and optimization\r
  - Improved type safety\r
\r
# [0.0.42] FE WEB CEKAT 2025-11-03\r
\r
### Admin Panel & Centralized Management\r
\r
- **New Admin Panel Component**: Created centralized admin control center for master agents\r
  - New dedicated Admin Panel page accessible via navigation (master agents only)\r
  - Moved data retention and GDPR controls from Analytics to Admin Panel for better organization\r
  - Added quick access links to all admin sections (Permissions, Human Agents, Platforms, Analytics, Logs, Contacts)\r
  - Integrated Circuit Breaker Status monitoring directly in admin panel\r
  - Added cache clearing utility for local storage cleanup\r
  - Bulk contact deletion interface with UUID parsing (comma/newline separated)\r
  - Enhanced data retention controls with manual cleanup trigger\r
  - GDPR/PDPA deletion interface with confirmation modals\r
  - All admin features consolidated in single, role-gated interface\r
\r
### Webhook Infrastructure Refactoring\r
\r
- **Centralized Webhook Client**: Created new \`webhookClient.ts\` for unified webhook handling\r
  - Automatic authentication for proxy endpoints using Supabase session tokens\r
  - Support for both legacy and proxy-based endpoints\r
  - Automatic API key injection for proxy requests\r
  - Consistent error handling across all webhook calls\r
  - \`callWebhook()\` function replaces direct \`fetch()\` calls throughout application\r
\r
- **Proxy-Aware Webhook Configuration**: Major refactoring of webhook routing system\r
  - Introduced \`route:\` prefix system for proxy-based endpoints\r
  - Automatic routing to Supabase Edge Function proxy (\`proxy-n8n\`) for prefixed endpoints\r
  - Legacy endpoint support maintained for backward compatibility\r
  - Provider-specific endpoint resolution (\`resolveSendMessageEndpoint()\`)\r
  - Enhanced provider normalization (wa/whatsapp_cloud  whatsapp, tg/tele  telegram)\r
  - All platform forms (WhatsApp, Telegram) now use centralized webhook client\r
  - Live Chat component updated to use new webhook client\r
\r
### AI Agent Enhancements\r
\r
- **AI Model Selection System**: Comprehensive model management in AI Agent creation and settings\r
  - Model selection dropdown in AI Agent creation dialog with pricing and provider information\r
  - Fallback model selection for automatic failover when primary model unavailable\r
  - Model-specific context window and history limit validation\r
  - Dynamic limit calculation based on selected model capabilities\r
  - Enhanced model display with cost per 1M tokens, provider badges, and descriptions\r
  - Model filtering (regular vs fallback models) for better UX\r
  - Auto-selection of first available model on load\r
\r
- **AI Agent Settings UI Improvements**: Enhanced settings interface with better input handling\r
  - Replaced numeric inputs with text inputs using \`inputMode="numeric"\` for better mobile support\r
  - Added input validation with clamping to model-specific maximums\r
  - Context window input now in "K tokens" format with model-specific limits\r
  - History limit shows model-specific maximums with helpful descriptions\r
  - Auto-resolve timeout input with proper validation (0-1440 minutes)\r
  - Message cap input with placeholder examples\r
  - Removed "AI Read File Limit" field (commented out, not in use)\r
  - Better label clarity: "Enable auto-resolve", "Auto-resolve timeout", "Conversation History (tokens)", "Context Window (K tokens)", "Creativity Preset", "AI Message Cap"\r
  - Model selection card with primary and fallback model sections\r
  - Real-time display of model capabilities and limits\r
\r
- **AI Agent Creation Flow**: Enhanced creation process\r
  - Model selection required before agent creation\r
  - Fallback model optional selection during creation\r
  - Better validation and error messages\r
  - Improved dialog with cancel button and loading states\r
\r
### Analytics Component Cleanup\r
\r
- **Removed Admin Controls**: Moved data retention and GDPR controls to Admin Panel\r
  - Removed data retention policy card from Analytics Conversation tab\r
  - Removed GDPR deletion card from Analytics\r
  - Removed Circuit Breaker Status from Analytics (now in Admin Panel)\r
  - Simplified Analytics component focusing on analytics and reporting only\r
  - Better separation of concerns between analytics and administration\r
\r
### Database & Permissions\r
\r
- **New Migration**: Added \`users_profile.create\` permission\r
  - Created migration \`20251103_add_users_profile_create_permission.sql\`\r
  - Grants \`users_profile.create\` permission to \`master_agent\` and \`super_agent\` roles\r
  - Enables proper RBAC for user profile creation operations\r
\r
### Enhanced Caching & Performance\r
\r
- **Query Signature-Based Caching**: Improved cache key generation in \`supabaseProtected.ts\`\r
  - Added query signature serialization for more accurate cache keys\r
  - Cache keys now include query method signatures and arguments\r
  - Prevents cache collisions between similar but different queries\r
  - Better cache invalidation with pattern matching\r
  - Enhanced cache hit rates with more granular key generation\r
\r
- **Cache Invalidation Improvements**: Better cache management\r
  - Contact deletion now invalidates related query caches\r
  - Thread deletion invalidates conversation caches\r
  - Pattern-based cache invalidation using \`defaultFallbackHandler.invalidatePattern()\`\r
\r
### Conversation & Contact Management\r
\r
- **Enhanced Conversation Hooks**: Improved conversation management\r
  - Added \`deleteThread()\` function to \`useConversations\` hook\r
  - Provider-aware message sending using \`resolveSendMessageEndpoint()\`\r
  - Better provider detection from conversation data\r
  - Cache invalidation on thread deletion\r
\r
- **Contact Management**: Improved deletion handling\r
  - Enhanced bulk deletion with cache invalidation\r
  - Better error handling in contact operations\r
  - Improved cache management for contact queries\r
\r
### Platform Integration Updates\r
\r
- **WhatsApp Platform**: Updated to use new webhook client\r
  - Session creation, login QR, logout, disconnect, and delete operations use \`callWebhook()\`\r
  - Consistent error handling across all WhatsApp operations\r
\r
- **Telegram Platform**: Updated to use new webhook client\r
  - Platform creation and webhook deletion use centralized webhook client\r
  - Better error handling and response parsing\r
\r
- **Connected Platforms**: Enhanced platform management\r
  - All webhook calls migrated to \`callWebhook()\` function\r
  - Better error handling and user feedback\r
  - Consistent authentication across all platform operations\r
\r
### Navigation & Routing\r
\r
- **New Admin Panel Route**: Added admin panel to navigation\r
  - New "Admin Panel" navigation item (master agents only)\r
  - Requires \`access_rules.configure\` permission\r
  - Added to navigation config and routing\r
  - Default navigation fallback improved to handle permission-based routing\r
\r
### UI/UX Improvements\r
\r
- **Human Agents**: Enhanced creation dialog\r
  - Better validation and error messages\r
  - Cancel button in creation dialog\r
  - Improved loading states\r
  - Permission-based UI (disabled buttons with tooltips when permission missing)\r
\r
- **Input Improvements**: Better form inputs throughout application\r
  - Numeric inputs use \`inputMode="numeric"\` for mobile keyboards\r
  - Better placeholder text and validation messages\r
  - Improved accessibility with proper input types\r
\r
### Technical Improvements\r
\r
- **Code Organization**: Better separation of concerns\r
  - Admin functionality centralized in Admin Panel component\r
  - Webhook logic centralized in webhook client\r
  - Better component structure and maintainability\r
\r
- **Type Safety**: Enhanced TypeScript types\r
  - Added \`model_id\` to AIProfile interface\r
  - Better type definitions for webhook responses\r
  - Improved type safety in platform forms\r
\r
- **Error Handling**: Consistent error handling\r
  - Unified error handling in webhook client\r
  - Better error messages throughout application\r
  - Improved user feedback with toast notifications\r
\r
# [0.0.41] FE WEB CEKAT 2025-11-01\r
\r
### Data Retention & GDPR Compliance\r
\r
- **Data Retention Policy System**: Implemented configurable data retention with automatic cleanup\r
  - Added 90-day default retention policy (adjustable from 1-365 days) stored in \`org_settings\` table\r
  - Created \`cleanup_old_chat_data()\` PostgreSQL function for automatic deletion of old chat data\r
  - Scheduled daily cleanup job at 2 AM UTC via \`pg_cron\` extension\r
  - Respects organization-specific retention periods stored in \`org_settings.retention_days\`\r
  - Only deletes data older than retention period (rolling window, not everything daily)\r
  - Deletes old threads, messages, and orphaned contacts based on \`created_at\` timestamps\r
  - Supports both org-specific cleanup and global cleanup for all organizations\r
\r
- **GDPR/PDPA Right to Erasure**: Implemented compliant user data deletion functionality\r
  - Created \`gdpr_delete_user_data()\` PostgreSQL function for permanent deletion of user data\r
  - Deletes all threads, messages, and contact records for a specific contact UUID\r
  - Validates contact belongs to requesting organization before deletion\r
  - Returns detailed deletion results (threads, messages, contacts deleted count)\r
  - Permanently removes all user-associated data in compliance with GDPR/PDPA regulations\r
  - Action cannot be undone with clear warning messages in UI\r
\r
- **Admin Controls in Analytics**: Added data retention and GDPR controls in Conversation tab\r
  - Data Retention Policy card with current retention period display and edit functionality\r
  - Manual "Run Cleanup Now" button for immediate cleanup execution\r
  - GDPR/PDPA deletion card with contact UUID input field\r
  - Restricted to users with \`access_rules.configure\` permission (master/super agents only)\r
  - Real-time success/error message display for all operations\r
  - Last cleanup results display showing threads, messages, and contacts deleted counts\r
\r
- **Database Migration**: Applied comprehensive migration for data retention features\r
  - Migration \`20250102_data_retention_and_gdpr.sql\` successfully applied via Supabase MCP\r
  - Created \`cleanup_old_chat_data()\` and \`gdpr_delete_user_data()\` functions with proper security\r
  - Added RLS policies for \`org_settings\` table updates restricted to master/super agents\r
  - Initialized default 90-day retention for all existing organizations\r
  - Ensured \`is_current_user_active()\` dependency function exists for RLS checks\r
\r
### Contact Management Enhancements\r
\r
- **Contact UUID Detail Modal**: Added master agent-only contact UUID display\r
  - New UUID section in contact details modal visible only to master agents\r
  - Displays contact UUID with copy-to-clipboard functionality\r
  - Includes helpful description for GDPR deletion requests and system integrations\r
  - Uses RBAC role check (\`hasRole('master_agent')\`) to restrict visibility\r
  - Styled with monospace font and muted background for clear readability\r
  - Badge indicator showing "Master Agent Only" restriction\r
\r
### Technical Improvements\r
\r
- **Supabase Integration**: Full integration with Supabase database functions\r
  - \`fetchRetentionSettings()\` reads from \`org_settings\` table via protected Supabase client\r
  - \`saveRetentionDays()\` updates retention period using upsert operation\r
  - \`triggerCleanup()\` calls \`cleanup_old_chat_data\` RPC function\r
  - \`executeGdprDeletion()\` calls \`gdpr_delete_user_data\` RPC function\r
  - All operations use \`protectedSupabase\` client respecting circuit breaker and RLS\r
  - Proper error handling and user feedback for all database operations\r
\r
- **RBAC Integration**: Enhanced role-based access control for admin features\r
  - Permission gates around data retention and GDPR controls\r
  - Master agent role check for contact UUID visibility\r
  - Secure access control using \`useRBAC\` context hooks\r
\r
### UI/UX Enhancements\r
\r
- **Data Retention UI**: Comprehensive admin interface for retention management\r
  - Edit modal for configuring retention period (1-365 days range)\r
  - Visual display of current retention period with clear descriptions\r
  - Warning messages explaining automatic cleanup schedule\r
  - Success/error message toasts for user feedback\r
\r
- **GDPR Deletion UI**: Secure and user-friendly deletion interface\r
  - Two-step confirmation process with warning modal\r
  - Clear indication of what will be deleted (threads, messages, contacts)\r
  - Contact UUID input with validation\r
  - Destructive button styling to indicate permanent action\r
\r
### Security & Compliance\r
\r
- **Data Protection**: Enhanced data protection mechanisms\r
  - Row Level Security (RLS) policies enforce master/super agent access only\r
  - Automatic cleanup respects retention periods to prevent accidental data loss\r
  - GDPR deletion function validates organization membership before deletion\r
  - All database operations use security definer functions with proper permissions\r
\r
# [0.0.40] FE WEB CEKAT 2025-11-01\r
\r
### Adaptive Rate Limiter Integration & DDoS Protection\r
\r
- **Adaptive Rate Limiter Full Integration**: Integrated adaptive rate limiter into Supabase protection system\r
  - Enhanced AdaptiveRateLimiter class with getConfig() and updateConfig() methods for runtime configuration\r
  - Added localStorage persistence for adaptive rate limiter configuration and multipliers\r
  - Integrated adaptive rate limiter into supabaseProtected.ts, replacing static rate limiter for all operations\r
  - Implemented automatic limit adjustment based on system health metrics (response time, error rate)\r
  - Added query to circuit_breaker_metrics table in Supabase for real-time metrics analysis\r
  - Automatic adjustment loop runs every adjustment interval to update limits dynamically\r
\r
- **Adaptive Rate Limiter Configuration UI**: Added comprehensive configuration interface\r
  - Created new "Adaptive Rate Limiter Configuration" section in Limit Configuration\r
  - Display base limits for all 4 operations (Reads, Writes, RPC, Auth) with current effective limits\r
  - Real-time display of multipliers (percentage) for each operation type\r
  - Show min/max multiplier, adjustment interval, and latency thresholds\r
  - Added "Edit" button with comprehensive modal for editing all adaptive rate limiter parameters\r
  - Visual status indicator showing adaptive rate limiter is active and protecting database\r
  - All configuration values are editable with proper validation and range limits\r
\r
- **Enhanced Rate Limiter Card**: Updated to show adaptive limits\r
  - Changed card title to "Rate Limiter (Adaptive)" to reflect dynamic nature\r
  - Display effective limits (dynamically calculated) instead of static limits\r
  - Show multiplier percentage for each operation type\r
  - Real-time updates every second to reflect current adaptive limits\r
  - Informative tooltips explaining how adaptive limits work for traffic spike protection\r
\r
- **Comprehensive Circuit Breaker Documentation Updates**: Enhanced documentation with detailed input explanations\r
  - Added detailed explanation section for all Circuit Breaker inputs (5 parameters)\r
    - Failure Threshold: When circuit opens, tips, recommendations\r
    - Reset Timeout: Recovery time, tips for different scenarios\r
    - Success Threshold: Recovery validation, recommendations\r
    - Monitoring Period: Sliding window explanation, impact on detection\r
    - Request Timeout: Timeout handling, recommendations per operation type\r
  - Added comprehensive explanation for all Adaptive Rate Limiter inputs (7+ parameters)\r
    - Base Limits: Explanation for Reads/Writes/RPC/Auth with recommendations\r
    - Min/Max Multiplier: How multipliers affect limits, examples with calculations\r
    - Latency Thresholds: Healthy vs Stress thresholds, tips for optimization\r
    - Adjustment Interval: How often limits adjust, recommendations for different scenarios\r
  - Added "How They Work Together" sections showing complete workflow for both systems\r
\r
- **DDoS & Traffic Spike Protection Guide**: Added dedicated protection guide\r
  - Created comprehensive guide section explaining inputs specifically for DDoS protection\r
  - Ranked inputs by importance: Min Multiplier (most important), Stress Threshold, Base Limits, etc.\r
  - Detailed recommendations for each input with effectiveness ratings\r
  - Provided optimal configuration preset for maximum DDoS protection\r
  - Explained complete attack scenario flow (5-step process)\r
  - Visual color-coded sections for easy reference (red borders for critical inputs)\r
\r
- **Documentation Improvements**: Enhanced existing documentation sections\r
  - Updated "Best Practices" section to include adaptive rate limiter tips\r
  - Enhanced "Configuration Reference" to show both Circuit Breaker and Adaptive Rate Limiter configs\r
  - Added effective limits display with multiplier percentages in configuration reference\r
  - Updated troubleshooting section to mention adaptive rate limiter as protection layer\r
  - All documentation now uses dynamic values from current configuration (real-time)\r
\r
### Technical Improvements\r
\r
- **Type System Enhancements**: Improved TypeScript type exports\r
  - Re-exported OperationType from adaptiveRateLimiter for better type consistency\r
  - Fixed import issues in CircuitBreakerStatus component\r
  - All types properly exported and available for external use\r
\r
- **Storage Management**: Enhanced persistence system\r
  - Adaptive rate limiter config persists to localStorage with multipliers\r
  - Automatic loading of saved configuration on initialization\r
  - Interval ID management for proper cleanup when adjustment interval changes\r
  - Backward compatible with existing localStorage data\r
\r
### UI/UX Enhancements\r
\r
- **Configuration Visualization**: Better display of adaptive limits\r
  - Show both base limit and effective limit side-by-side\r
  - Multiplier percentage displayed with color coding (green for healthy)\r
  - Real-time status indicators showing system is actively protecting\r
  - Clear distinction between static base limits and dynamic effective limits\r
\r
- **Documentation UX**: Improved documentation readability\r
  - Color-coded input explanations (red, orange, yellow, blue, purple borders)\r
  - Step-by-step workflows with numbered lists\r
  - Practical examples using actual configuration values\r
  - Tips and recommendations clearly separated from explanations\r
  - Warning boxes for critical information\r
\r
### Performance & Security\r
\r
- **DDoS Protection**: Multi-layered defense system\r
  - Adaptive rate limiter as first line of defense (reduces limits automatically)\r
  - Request timeout as second layer (cancels slow requests)\r
  - Circuit breaker as last resort (blocks all requests if needed)\r
  - Complete protection against traffic spikes and DDoS attacks\r
\r
- **Smart Limit Adjustment**: Intelligent limit management\r
  - Limits increase when system is healthy (up to 200% of base)\r
  - Limits decrease when system is stressed (down to 50% of base by default)\r
  - Gradual adjustment prevents sudden changes (max 10% increase, 20% decrease per cycle)\r
  - Automatic return to normal limits when system recovers\r
\r
# [0.0.39] FE WEB CEKAT 2025-11-01\r
\r
### Circuit Breaker Enhancements & Documentation\r
\r
- **Circuit Breaker Configuration Management**: Added comprehensive limit configuration interface for admins\r
  - Created "Limit Configuration" section displaying all circuit breaker thresholds (disabled by default)\r
  - Added "Edit" button to open configuration modal for modifying limits\r
  - Implemented getConfig() and updateConfig() methods in CircuitBreaker class\r
  - Added configuration persistence to localStorage for client-side recovery\r
  - Configuration values are now dynamically displayed and editable\r
  - Each configuration field includes descriptive tooltips explaining the purpose\r
\r
- **Circuit Breaker Documentation System**: Implemented comprehensive documentation modal\r
  - Added documentation card section above "Danger Zone" with "Lihat Dokumentasi Circuit Breaker" button\r
  - Created detailed documentation modal covering:\r
    - What is Circuit Breaker and its purpose\r
    - How Circuit Breaker works (three states: CLOSED, OPEN, HALF_OPEN)\r
    - Step-by-step workflow with dynamic configuration values\r
    - What to do when circuit breaker opens (troubleshooting guide)\r
    - Understanding metrics and their meanings\r
    - Best practices for monitoring and optimization\r
    - Configuration reference with current values\r
  - All documentation content in Indonesian language with clear formatting\r
  - Modal is scrollable and responsive for better readability\r
\r
- **Enhanced UI/UX for Circuit Breaker Analytics**: Improved user experience and safety\r
  - Added question mark icons (HelpCircle) beside all labels in "Limit Configuration" section\r
  - Each icon displays informative tooltip on hover with Indonesian descriptions\r
  - Reorganized admin controls into two distinct sections:\r
    - "Limit Configuration": For viewing and editing circuit breaker thresholds\r
    - "Danger Zone": For critical admin actions with enhanced warnings\r
  - Added tooltips to all buttons in "Danger Zone" explaining their effects\r
  - Enhanced visual hierarchy with color-coded sections (blue for docs, red for danger)\r
  - All tooltips and descriptions use dynamic values from current configuration\r
\r
- **Circuit Breaker Class Improvements**: Enhanced circuit breaker functionality\r
  - Added getConfig() method to retrieve current configuration\r
  - Added updateConfig() method to modify configuration at runtime\r
  - Configuration is automatically saved to localStorage on update\r
  - Configuration is automatically loaded from localStorage on initialization\r
  - Maintains backward compatibility with existing circuit breaker state\r
\r
### AI Agent Settings Cleanup\r
\r
- **Removed Timezone Field**: Cleaned up unused timezone configuration\r
  - Removed timezone field from AI Agent Settings UI component\r
  - Dropped timezone column from ai_profiles table via database migration\r
  - Removed timezone state variables and related logic from frontend\r
  - Updated TypeScript types to remove timezone references\r
  - Note: timezone field in users_profile table remains unchanged (separate feature)\r
\r
### Technical Improvements\r
\r
- **Code Organization**: Better separation of concerns in Circuit Breaker Status component\r
  - Split admin controls into logical sections (Documentation, Limit Configuration, Danger Zone)\r
  - Improved component structure for better maintainability\r
  - Enhanced modal management with dedicated state variables\r
  - Better error handling and user feedback\r
\r
### UI/UX Enhancements\r
\r
- **Documentation Integration**: Added comprehensive help system\r
  - Documentation card with prominent call-to-action button\r
  - Modal-based documentation with scrollable content\r
  - Color-coded sections for better visual hierarchy\r
  - Responsive design for all screen sizes\r
  - Dark mode support throughout documentation modal\r
\r
- **Enhanced Tooltips**: Improved user guidance\r
  - Question mark icons next to all configuration labels\r
  - Contextual tooltips explaining each configuration parameter\r
  - Tooltips on danger zone buttons with detailed warnings\r
  - All tooltips in Indonesian language for consistency\r
\r
# [0.0.38] FE WEB CEKAT 2025-10-30\r
\r
### Refactor Authentication & RBAC\r
\r
- Removed unnecessary debug logging from authentication and RBAC components.\r
- Enhanced role checks within navigation for more secure access control.\r
- Improved account status handling to better manage user states.\r
- Added role-based restrictions directly in navigation configuration.\r
- Updated related components for improved clarity and performance.\r
\r
# [0.0.37] FE WEB CEKAT 2025-10-30\r
\r
### Circuit Breaker & Database Protection System\r
\r
- **Comprehensive Circuit Breaker Implementation**: Implemented full-featured circuit breaker system for database protection\r
  - Created core CircuitBreaker class with state machine (CLOSED, OPEN, HALF_OPEN) and configurable thresholds\r
  - Added state persistence using localStorage for client-side recovery across page refreshes\r
  - Implemented event emitter pattern for real-time monitoring and state change notifications\r
  - Added time-windowed failure counting (10s monitoring period) with automatic state transitions\r
\r
- **Rate Limiting & Request Management**: Implemented advanced rate limiting and request optimization\r
  - Created sliding window rate limiter with per-user and per-endpoint tracking\r
  - Implemented request queue with deduplication, priority handling, and debouncing\r
  - Added request batching for similar queries to reduce total request count\r
  - Created adaptive rate limiter that adjusts limits based on system health metrics\r
\r
- **Enhanced Error Handling & Caching**: Implemented comprehensive error management and response caching\r
  - Created error classifier utility mapping Supabase error codes to categories (network, database, auth, rate limit, timeout)\r
  - Implemented retry logic with exponential backoff (1s, 2s, 4s, 8s max) and error-specific strategies\r
  - Added response caching with IndexedDB/localStorage using stale-while-revalidate pattern\r
  - Implemented offline mode support with write operation queuing and sync on connection restore\r
\r
- **Database Analytics & Monitoring**: Added comprehensive database performance monitoring\r
  - Created new "Database" tab in Analytics section with detailed database statistics\r
  - Implemented PostgreSQL functions for database metrics (table sizes, row counts, index performance, memory stats)\r
  - Added real-time database activity monitoring with KPI cards and interactive charts\r
  - Created comprehensive table statistics view with scan ratios, vacuum timestamps, and DML operations\r
\r
- **Circuit Breaker Analytics Dashboard**: Integrated circuit breaker monitoring into Analytics section\r
  - Added new "Circuit Breaker" tab displaying real-time status and metrics\r
  - Created CircuitBreakerStatus component with admin controls and visual indicators\r
  - Implemented metrics collection and storage in circuit_breaker_metrics table\r
  - Added comprehensive help tooltips with Indonesian descriptions for all labels\r
\r
- **Protected Supabase Integration**: Wrapped all database operations with circuit breaker protection\r
  - Created protectedSupabase wrapper replacing direct Supabase calls in critical components\r
  - Integrated circuit breaker, rate limiting, caching, and metrics collection\r
  - Updated Analytics, ConversationPage, and useConversations hooks to use protected wrapper\r
  - Implemented graceful degradation and fallback mechanisms for failed operations\r
\r
- **Admin Controls & Safety Features**: Added comprehensive admin controls with safety measures\r
  - Implemented custom modal dialogs replacing browser confirm/alert dialogs\r
  - Added confirmation popups with detailed Indonesian warnings for all admin actions\r
  - Created color-coded modal themes (orange for reset, red for critical actions, blue for info)\r
  - Added success/error feedback modals with proper error handling\r
\r
### Technical Improvements\r
\r
- **Performance Optimizations**: Resolved application freezing and lag issues\r
  - Fixed infinite loop in background cache refresh mechanism\r
  - Optimized metrics collection with batching and throttling (50 batch size, 30s interval)\r
  - Implemented caching for getUserId calls with 1-minute TTL and 500ms timeout\r
  - Added cooldown periods to prevent refresh storms (30s for queries, 60s for RPCs)\r
  - Made rate limiting more lenient for read operations to prevent blocking\r
\r
- **Database Schema Updates**: Enhanced database with circuit breaker metrics\r
  - Created circuit_breaker_metrics table with comprehensive operation tracking\r
  - Added RLS policies and indexes for efficient metrics querying\r
  - Implemented 30-day retention policy with cleanup_old_metrics function\r
  - Added database analytics functions for comprehensive performance monitoring\r
\r
### UI/UX Enhancements\r
\r
- **Modal System**: Replaced browser dialogs with custom modal components\r
  - Created consistent modal design matching application theme\r
  - Added proper dark mode support and responsive design\r
  - Implemented clear visual hierarchy with icons and color coding\r
  - Added comprehensive warning messages in Indonesian language\r
\r
- **Help System**: Enhanced user guidance throughout the application\r
  - Added question mark icons with tooltips to all analytics labels\r
  - Implemented LabelWithHelp component for consistent help integration\r
  - Created comprehensive Indonesian descriptions for all circuit breaker features\r
  - Added contextual help for admin controls and safety warnings\r
\r
# [0.0.36] FE WEB CEKAT 2025-10-25\r
\r
### Security & Authentication\r
\r
- **Account Deactivation System**: Implemented comprehensive account deactivation blocking system\r
  - Added database-level RLS policies to prevent deactivated users from accessing system resources\r
  - Created dedicated \`/account-deactivated\` warning page with Indonesian content\r
  - Implemented pre-login account status validation to prevent deactivated users from authenticating\r
  - Added automatic redirect to warning page when deactivated account is detected\r
  - Enhanced security with "fail closed" approach - blocks access if account status cannot be verified\r
\r
### User Experience Improvements\r
\r
- **Enhanced Navigation**: Fixed navigation issues and improved user flow\r
  - Replaced modal-based account deactivation with dedicated warning page\r
  - Added "Kembali ke Halaman Login" button with complete cleanup functionality\r
  - Implemented localStorage clearing and user signout on account deactivation\r
  - Fixed infinite loading issues caused by component conflicts\r
  - Added loading states and prevented multiple button clicks during navigation\r
\r
### Technical Improvements\r
\r
- **Component Architecture**: Streamlined authentication flow components\r
  - Removed deprecated \`AccountDeactivatedModal\` component\r
  - Created dedicated \`AccountDeactivated\` page component with proper routing\r
  - Fixed Router context issues by restructuring component hierarchy in App.tsx\r
  - Enhanced error handling and timeout management for signOut operations\r
  - Added comprehensive debugging and logging for authentication flow\r
\r
### Database & Security\r
\r
- **Row Level Security (RLS)**: Enhanced database security policies\r
  - Updated RLS policies to include active user checks for all major tables\r
  - Created \`is_current_user_active()\` helper function for consistent security checks\r
  - Applied security policies to \`users_profile\`, \`org_members\`, \`channels\`, \`contacts\`, \`threads\`, and \`messages\` tables\r
  - Implemented strict access control preventing deactivated users from reading sensitive data\r
\r
### Bug Fixes\r
\r
- **Authentication Flow**: Resolved multiple authentication-related issues\r
  - Fixed flicker when logging in with deactivated accounts\r
  - Resolved race conditions in account status checking\r
  - Fixed logout button functionality by preventing account deactivation interference\r
  - Corrected database column name from \`is_f2a_email_enabled\` to \`is_2fa_email_enabled\`\r
  - Fixed CORS errors with edge function approach by implementing direct database validation\r
\r
### UI/UX Enhancements\r
\r
- **Account Deactivation Warning Page**: Created comprehensive user feedback system\r
  - Added clear Indonesian messaging explaining account deactivation\r
  - Implemented contact instructions for Master Agent reactivation\r
  - Added visual warning indicators with appropriate icons and styling\r
  - Created responsive design with proper loading states and button interactions\r
\r
# [0.0.35] FE WEB CEKAT 2025-16-09\r
\r
### Updates\r
\r
- Added HCaptcha site key to .env for CAPTCHA validation.\r
- Enhanced Login component to include CAPTCHA verification.\r
- Improved ConversationPage to display channel logos.\r
- Updated HumanAgents component for better pagination and agent management.\r
- Adjusted useConversations and useHumanAgents hooks to support new fields for channel logos and agent organization.\r
- Implemented strict checks for super agent assignments in usePlatforms hook.\r
\r
# [0.0.34] FE WEB CEKAT 2025-11-09\r
\r
### Updates\r
\r
### AIAgentSettings\r
\r
- Added new state variables:\r
  - \`historyLimit\`\r
  - \`readFileLimit\`\r
  - \`contextLimit\`\r
  - \`responseTemperature\`\r
  - \`messageAwait\`\r
  - \`messageLimit\`\r
  - \`timezone\`\r
\r
- Improved overall usage tracking and configurability.\r
\r
### HumanAgent\r
\r
- Introduced **usage range option** for better monitoring.\r
\r
- Refactored **agent visibility logic** for clearer access control.\r
- Enhanced handling of **agent roles and statuses** for more robust management.\r
\r
# [0.0.33] FE WEB CEKAT 2025-10-09\r
\r
### Updates\r
\r
- Update project branding, enhance chat functionality, and improve permissions management\r
- Added aria-labels for accessibility in chat components\r
- Refined URL state synchronization in ConversationPage\r
- Implemented sorting and editing features in Contacts\r
- Removed legacy policy editing from PermissionsPage\r
- Updated navigation permissions for better clarity\r
\r
# [0.0.32] FE WEB CEKAT 2025-10-04\r
\r
### Updates\r
\r
- Fixed Live chat error and detail chat\r
- Update project branding to **Synka AI**\r
- Enhance **chat functionality**\r
- Improve **permissions management**\r
- Key changes include:\r
  - Renaming titles and meta descriptions\r
  - Adding a direct route to the chat inbox\r
  - Updating permission checks\r
  - Refining UI elements for better user experience\r
\r
Updating permission checks\r
\r
Refining UI elements for better user experience\r
\r
# [0.0.31] FE WEB CEKAT 2025-10-04\r
\r
### Updates\r
\r
- Introduced a new endpoint \`CHAT_TEST\` for testing AI agent chat settings.\r
- Updated \`AIAgentSettings\` component to include profile handling and improved UI with collapsible sections for behavior, welcome message, and transfer conditions.\r
- Enhanced \`ChatPreview\` to support profile ID and adjusted styling for better user experience.\r
- Refactored platform forms to remove profile photo upload functionality.\r
\r
# [0.0.30] FE WEB CEKAT 2025-10-04\r
\r
### Updates\r
\r
- Fix invite\r
\r
# [0.0.29] FE WEB CEKAT 2025-10-04\r
\r
Commit: Invite flow fixes, required field validation, form improvements\r
\r
### Updates\r
\r
- Invite Flow Fixes\r
  - Fixed invite flow to redirect users directly to password creation page instead of 2FA page\r
  - Added invite flow detection to skip 2FA requirements for invited users\r
  - Prevented duplicate 2FA emails for invited users\r
  - Added \`/invite\` route for proper invite handling\r
  - Enhanced ProtectedRoute to detect and redirect invite flows appropriately\r
- Form Validation Improvements\r
  - Made "Attach to Super Agent" field required for regular agents\r
  - Added visual indicators (red asterisks) for all required fields\r
  - Implemented real-time form validation with disabled submit button\r
  - Added contextual help text explaining field requirements\r
  - Enhanced error messages with specific validation feedback\r
- User Experience Enhancements\r
  - Submit button now disabled until all required fields are filled\r
  - Clear visual hierarchy distinguishing required vs optional fields\r
  - Real-time validation feedback as users type/select\r
  - Improved form accessibility with proper labeling\r
- Bug Fixes\r
  - Fixed invite users being incorrectly redirected to 2FA page\r
  - Resolved duplicate 2FA email sending for invited users\r
  - Corrected form submission logic for agent creation\r
  - Enhanced error handling for missing required fields\r
\r
# [0.0.28] FE WEB CEKAT 2025-10-04\r
\r
Commit: Auto-resolve functionality, thread timestamp fixes, audio notifications, UI improvements\r
\r
### Updates\r
\r
- Auto-Resolve System\r
  - Fixed auto-resolve functionality to work correctly with AI agents\r
  - Database triggers now properly set \`auto_resolve_at\` timestamp when AI responds\r
  - Auto-resolve function uses correct enum value \`'closed'\` instead of \`'resolved'\`\r
  - Periodic checking every 30 seconds for threads ready to auto-resolve\r
  - Real-time auto-resolve checks on message events\r
  - Threads auto-resolve after specified minutes of inactivity without user response\r
- Thread List Improvements\r
  - Fixed thread list to show latest message timestamp instead of first message timestamp\r
  - WhatsApp-style conversation sorting with unreplied threads at top\r
  - Real-time conversation preview updates without full list refresh\r
- Audio Notifications\r
  - Added audio notification system for new messages in opened threads\r
  - Two notification sounds: incoming (\`mixkit-message-pop-alert-2354.mp3\`) and outgoing (\`mixkit-long-pop-2358.wav\`)\r
  - Debounced notifications to prevent duplicate sounds\r
  - Tab visibility checks to only play sounds when tab is active\r
  - User controls: enable/disable audio notifications, test notification\r
- UI Improvements\r
  - Removed clock icon from chat message bubbles for cleaner appearance\r
  - Enhanced message streaming with better real-time updates\r
  - Improved conversation list performance with optimized refresh logic\r
- Database Schema Updates\r
  - Added \`channel_id\` to \`token_usage_logs\` table for better analytics\r
  - Added \`super_agent_id\` to \`channels\` table (moved from \`ai_profiles\`)\r
  - Updated RLS policies to use \`channels.super_agent_id\` for proper clustering\r
  - Fixed foreign key constraints and relationships\r
- Bug Fixes\r
  - Fixed page reload issues when alt+tabbing between browser tabs\r
  - Resolved conversation data leakage between different super agents\r
  - Fixed AI Agent dropdown filtering logic\r
  - Corrected thread timestamp display in conversation list\r
\r
# [0.0.27] FE WEB CEKAT 2025-10-03\r
\r
- Enabling AI Profiles fetch instead of using cache\r
\r
# [0.0.26] FE WEB CEKAT 2025-10-03\r
\r
Commit: Live Chat realtime + anon policies, auto-resolve with enable flag, reopen on user reply, UI polish\r
\r
### Updates\r
\r
- Live Chat (Embed)\r
  - Messages now stream from Supabase realtime (\`public.messages\`); webhook response is ignored for content.\r
  - Sends \`channel_id\`, \`session_id\`, and a persistent friendly \`username\` (stored per host in localStorage). Removed \`platform_id\` from payload.\r
  - Ringtones wired to \`public/tones\` assets; low = \`mixkit-message-pop-alert-2354.mp3\`, high = \`mixkit-long-pop-2358.wav\`.\r
  - Thread lookup uses \`contacts(name)\` with \`maybeSingle()\` (fixes PGRST116 when 0 rows).\r
- Database (Supabase)\r
  - Added anon SELECT RLS for web embed:\r
    - \`channels\`: \`allow_public_select_web_channels\` (provider='web' and active only).\r
    - \`threads\`: \`public_read_web_threads\` (via web channels).\r
    - \`messages\`: \`public_read_web_messages\` (via web channels).\r
    - Fixes 401/42501 when opening standalone live chat.\r
  - Auto-resolve framework:\r
    - \`ai_profiles.auto_resolve_after_minutes\` (int) and \`enable_resolve\` (bool).\r
    - \`threads.auto_resolve_at\` scheduled by trigger \`set_thread_auto_resolve_after_message\` on agent/assistant replies; cleared on user replies.\r
    - Function \`auto_close_due_threads()\` (cron-friendly) and helper \`schedule_auto_resolve_for_open_threads()\` for backfill.\r
  - Auto-reopen: trigger \`reopen_thread_on_user_message\` reopens closed threads and unassigns when a new user message arrives.\r
- AI Agent Settings\r
  - Enable Auto-resolve switch added; Auto-resolve after (minutes) is disabled when switch is off.\r
  - Removed sending \`system_prompt\` to webhook; UI still saves prompt to profile.\r
- Conversations UI\r
  - Unreplied badge restyled (soft red background, darker red text) to match Assigned styling.\r
\r
# [0.0.25] FE WEB CEKAT 2025-10-02\r
\r
Commit: Human vs AI handover analytics, WAHA sessions fetch, realtime chats, Platforms loop fix, UI polish\r
\r
### Updates\r
\r
- Analytics (Human Agent)\r
  - Handover rate redefined as Human/(Human+AI) across all conversations (not only resolved).\r
  - Added breakdowns: by Super Agent and by Agent, with Super Agent filter.\r
- Database (Supabase)\r
  - New/updated RPCs: \`get_handover_by_super_agent\`, \`get_handover_by_agent\`, \`get_agent_kpis\`.\r
  - Enabled realtime by adding \`public.threads\` and \`public.messages\` to \`supabase_realtime\`.\r
- Platforms (WhatsApp)\r
  - Fetch sessions from WAHA (\`/api/sessions\` and \`/api/sessions/{name}\`); removed dependency on webhook \`/get_sessions\` calls in UI.\r
  - Filter sessions to selected channel; debounced refresh; fixed infinite refresh loop on Platforms page.\r
  - QR polling uses WAHA session endpoint; Disconnect/Delete refresh safely.\r
- Conversations\r
  - Live-updating conversation list and counts via realtime subscriptions to \`threads\` and \`messages\` (debounced).\r
- UI\r
  - Delete Channel button shows spinner + Deleting and subtle pulse while processing.\r
- Changelog\r
  - Source from root \`CHANGELOG.md\` only; removed \`public/CHANGELOG.md\`; scripts updated to skip copy.\r
\r
# [0.0.24] FE WEB CEKAT 2025-09-30\r
\r
### Updates\r
\r
- Enhance message handling in ConversationPage and useConversations hooks.\r
- Optimistic UI updates for message status\r
\r
# [0.0.23] FE WEB CEKAT 2025-10-02\r
\r
### Updates\r
\r
- Live Chat\r
  - New embedded-only chat page at \`/livechat/:platform_id\` with blue-white palette, gradient background, glassy card, and clearer borders.\r
  - Sound notifications: low note on send, high note on AI reply; ringtone-style sequences; support external audio and synthesized chimes.\r
  - Netlify SPA routing for \`/livechat/*\` via redirects in \`netlify.toml\` and \`public/_redirects\`.\r
\r
- Connected Platforms\r
  - Live chat link and embed now use \`https://synkaai.netlify.app/livechat/{platform_id}\`.\r
  - Added Super Agent section (single-select; master-only). Human Agents now a searchable multi-select of regular agents only.\r
  - Removed Teams card. Agent chips show proper names and can be removed.\r
\r
- Platform Forms (Web, WhatsApp, Telegram)\r
  - Enforce Super Agent selection; filter AI/Human Agents by the selected Super Agent.\r
  - Fixed Telegram \`useEffect\` import error; safer webhook response handling.\r
  - Only selected human agents are attached on create.\r
\r
- Hooks and data\r
  - \`usePlatforms\`: join \`channel_agents\`; insert/remove on create/update; read/update \`channels.credentials.super_agent_id\`.\r
  - \`useAIAgents\`/\`LiveChat\`: dropped non-existent \`model\`; filter by \`super_agent_id\`.\r
  - \`useHumanAgents\`: include \`super_agent_id\` via \`super_agent_members\`.\r
\r
- Human Agents page\r
  - Clustering UI to manage Super Agents  Agents & AI Agents; token totals by cluster.\r
\r
- Database (Supabase)\r
  - New \`super_agent_members\` table (RLS) and \`ai_profiles.super_agent_id\` (NOT NULL).\r
  - Added \`users_profile.used_tokens\` plus \`refresh_used_tokens_for_super_agents\` function and trigger to aggregate token usage per super agent.\r
  - Deployed and backfilled via Supabase MCP; membership mappings added where needed.\r
\r
- Fixes\r
  - Resolved SPA 404s for \`/livechat/*\`.\r
  - Fixed \`users_profile.email\` and \`ai_profiles.model\` 42703 errors.\r
  - Ensured agent removal updates \`channel_agents\` and access.\r
\r
# [0.0.22] FE WEB CEKAT 2025-09-30\r
\r
### Updates\r
\r
- Fix platform creating for telegram\r
- Add saving functionality for selected AI agent in ConnectedPlatforms and prevent duplicate Telegram bot tokens in TelegramPlatform Form\r
- Enhance AI Agent Settings: Implement file upload functionality with Supabase integration, including upload progress tracking and error handling. Update UI to reflect file statuses and permissions. Add new knowledgebase endpoints for file management.\r
- Enhance file upload process in AIAgentSettings: pre-compute content hash for stable key, include additional metadata (storageName, storageSize, storageUpdatedAt) in upload response, and improve file validation checks.\r
\r
# [0.0.21] FE WEB CEKAT 2025-09-30\r
\r
### Updates\r
\r
- Update CHANGELOG and enhance Analytics and HumanAgents components.\r
- Added token usage tracking in Analytics with visualizations for daily usage and top models.\r
- Improved token aggregation logic in HumanAgents to account for super-agent clusters.\r
\r
# [0.0.20] FE WEB CEKAT 2025-09-30\r
\r
### Updates\r
\r
- Platform agent assignment\r
  - Persist selected agents on create to \`channel_agents\`; updates replace assignments.\r
  - Agents now only see platforms theyre assigned to; master/super see all.\r
  - Platforms list shows only attached human agents (no more org-wide members).\r
\r
- Platform details UI\r
  - New Super Agent section: shows assigned super agent; single-select; editable by master agents only; stored in \`channels.credentials.super_agent_id\`.\r
  - Human Agent manager: chips with remove (X) + searchable multi-select to add; lists only regular agents (excludes super/master).\r
  - Removed unused Teams card; unified details behavior across providers.\r
\r
- Telegram platform creation\r
  - Hits \`POST /telegram/create-platform\` (CREATE_PLATFORM) before channel insert.\r
  - Sends \`brand_name, display_name, description, telegram_bot_token, ai_profile_id, human_agent_ids, org_id\`.\r
  - Robust response handling for empty/non-JSON bodies; emits refresh after success.\r
\r
- Data fetching and names\r
  - Human agent names prefer \`users_profile.display_name\` with fallback to \`v_users.display_name\`; email sourced from \`v_users\`.\r
  - Fixed error when \`users_profile.email\` was selected (column doesnt exist).\r
\r
- Components\r
  - Added \`ui/multi-select\` (popover + search + checkbox) for multi-add of agents.\r
\r
- Fixes\r
  - Agent chips now display the correct agent name (not internal IDs).\r
  - Only the agents selected during platform creation are attached (no more all agents issue).\r
  - Resolved Telegram JSON parse errors and \`42703 users_profile.email\` error.\r
\r
# [0.0.19] FE WEB CEKAT 2025-09-23\r
\r
### Updates\r
\r
- Automatically switch to the Resolved tab when only closed conversations are present\r
- Updated Resolved tab UI to display the count of closed conversations.\r
\r
# [0.0.18] FE WEB CEKAT 2025-09-20\r
\r
### Updates\r
\r
- Added provider tabs (WhatsApp, Telegram, Live Chat) to filter the list; auto-select first item in active tab\r
- Replaced black status dot with green (active) / gray (inactive) indicator\r
\r
# [0.0.17] FE WEB CEKAT 2025-09-20\r
\r
### Updates\r
\r
- Scope data fetching and realtime to visible pages and active routes (Conversations, Human Agents, Platforms, Contacts, AI Agents, RBAC, Analytics)\r
- Add tab-visibility guards to avoid background fetch on tab-restore; hydrate from cache first where applicable\r
- Standardize React Query defaults (staleTime=60s, gc=5m, disable refetch on focus/reconnect)\r
- Reduce audit log verbosity: ignore refresh/update events; add 3s debounce in \`logAction\`; include current route in log context\r
- Analytics\r
  - Default to last 30 days and align to full-day UTC boundaries\r
  - Prevent invalid date ranges (From  To; To  From) with input min/max and clamping\r
  - Fetch once per change; removed duplicate initial fetch\r
- UI consistency: set Telegram Platform create button to blue\r
- Utilities: add \`isDocumentHidden\` and \`onDocumentVisible\` helpers\r
\r
# [0.0.16] FE WEB CEKAT 2025-09-19\r
\r
### Updates\r
\r
- Enhance real-time synchronization for conversations and messages; always fetch fresh data on mount\r
\r
# [0.0.15] FE WEB CEKAT 2025-09-19\r
\r
### Updates\r
\r
- Auth/OTP: eliminate redirect flicker by gating on \`otpEvaluated\`; \`ProtectedRoute\` and \`Otp\` now wait for evaluation; \`ResetPassword\` handles magic-link \`?code=\` with \`exchangeCodeForSession\`.\r
- Changelog page: render Markdown (react-markdown + GFM), Tailwind Typography, compact heading sizes; added Netlify \`public/_redirects\`; added \`prebuild\`/\`predev\` to copy root \`CHANGELOG.md\` to \`public/\`.\r
- Build: remove top-level await in \`main.tsx\` (wrap in async IIFE).\r
- Analytics (global): add graceful fallback when \`get_containment_and_handover\` is missing; improved handover reason labels; added per-user analytics (Assigned To, Takeovers Initiated, Resolved By, AIAgent Handovers).\r
- Human Agents:\r
  - Create Agent dialog with loader; 2FA enable checkbox on create; colored CTAs.\r
  - Add confirmation dialog with loader for deletion; wire hard delete.\r
  - Status changed to Active/Inactive; add \`users_profile.is_active\` column and update UI/actions.\r
  - Edit dialog shows Require Email 2FA switch and token limits; loads/saves \`is_2fa_email_enabled\`.\r
  - Role badges and submenu restyled (blue/green/gray).\r
- Edge Functions: \`admin-create-user\` (invite + profile + role, CORS) and \`admin-delete-user\` (hard delete auth user and related rows).\r
- Logging: \`logAction\` falls back to default org when \`org_id\` cannot be resolved (fixes audit log NOT NULL).\r
- UI theming: replaced remaining dark/black buttons with blue/green/red where appropriate.\r
\r
# [0.0.14] FE WEB CEKAT 2025-09-19\r
\r
### Updates\r
\r
- Fix changelog is not accessible in staging\r
\r
# [0.0.13] FE WEB CEKAT 2025-09-19\r
\r
### Updates\r
\r
- Implement OTP flow for login and enhance ProtectedRoute for OTP verification.\r
- Added new Otp and Logout pages\r
- Updated AuthContext to manage OTP state\r
- Modified Login component to handle OTP requirements.\r
\r
# [0.0.12] FE WEB CEKAT 2025-09-18\r
\r
### Updates\r
\r
- Enhance authentication flow with local storage caching and session restoration\r
- Implemented local storage caching for AI agents and conversations to improve performance and reduce flicker on refresh.\r
- Added session restoration from local storage to ensure user authentication state is maintained across page reloads.\r
- Updated AuthContext to prioritize local storage for session data before reconciling with Supabase.\r
- Introduced a loading state management to handle UI updates more smoothly during data fetching.\r
\r
# [0.0.11] FE WEB CEKAT 2025-09-17\r
\r
### Updates\r
\r
- Audit Logs self-read policy for non-master users.\r
- Added \`get_audit_logs\` RPC with server-side filters, paging, and master-only org-wide access.\r
- Analytics foundations: date-range controls and labeled charts; wired to secure RPCs.\r
- KPI RPCs: \`get_chats_timeseries\` and \`get_response_time_stats\` (avg/median/p90) with Asia/Jakarta bucketing.\r
- RBAC and conversation label changes now emit audit log entries.\r
- Analytics UI now uses new KPI RPCs with channel filter, time-series, and labeled bars.\r
- Containment/Handover groundwork: added \`threads.resolution\`, \`end_reason\`, \`handover_reason\`, AI auto-resolution trigger.\r
- Analytics RPCs: \`get_containment\` (with previous period) and \`get_handover_stats\` (reason breakdown).\r
- Server-side validation: handover reason now required when handover happens; added helpful indexes for analytics.\r
- Added \`get_non_contained\` RPC for drilldown of non-contained conversations.\r
- Containment/Handover dashboard cards with drilldown and reason pie chart.\r
- RBAC policy engine scaffold: \`rbac_policies\` table, RPCs (\`get_role_policy\`, \`put_role_policy\`, \`apply_role_policy\`), extended \`has_perm\` to honor policies.\r
- Role Policy editor UI (matrix) to manage per-resource actions; policy changes logged.\r
- Added docs/ANALYTICS_AND_LOGS.md covering RPCs, validation, and telemetry.\r
- Added PII sanitization tests for log CSV export.\r
- Added analytics time-series, containment, handover, and RBAC policy tests; basic E2E seed.\r
- TODO roadmap (server-validated) added for Analytics KPIs, Containment/Handover, RBAC policies, indexes, docs, and tests.\r
- implement OTP flow in login\r
- enhance ProtectedRoute for OTP verification\r
\r
# [0.0.10] FE WEB CEKAT 2025-09-16\r
\r
### Updates\r
\r
- fix: remove duplicate import of useRBAC in ConversationPage component\r
\r
# [0.0.9] FE WEB CEKAT 2025-09-16\r
\r
### Updates\r
\r
- Created loggings for every users, and only admin can access.\r
- Made Role Management for admins to setting the role.\r
\r
# [0.0.8] FE WEB CEKAT 2025-09-14\r
\r
### Updates\r
\r
- Replaced thread participants with collaborators in the database schema.\r
- Implemented checks for user collaboration status on conversations.\r
- Enhanced thread assignment logic to ensure proper user assignment and audit fields.\r
- Updated UI elements for chat takeover functionality to reflect new collaborator roles.\r
\r
# [0.0.7] FE WEB CEKAT 2025-09-13\r
\r
### Updates\r
\r
- Removed static permission constants in favor of direct string references for better alignment with database values.\r
- Updated components to utilize new permission string format, enhancing consistency across the application.\r
- Improved navigation logic to enforce permission checks when syncing active tabs, ensuring users only access permitted items.\r
- Streamlined permission-related code in various components, enhancing maintainability and readability.\r
\r
# [0.0.6] FE WEB CEKAT 2025-09-03\r
\r
### Updates\r
\r
- Implement OpenAI usage tracking and enhance analytics component\r
- Added OpenAI API key configuration to .env for usage tracking.\r
- Refactored vite.config.ts to include a usage proxy plugin for fetching OpenAI usage data.\r
- Enhanced Analytics component to display OpenAI token usage with dynamic date range selection and improved UI elements.\r
- Integrated charts to visualize input, output, and total tokens over selected time ranges.\r
- Implemented error handling and loading states for better user experience during data fetching.\r
\r
# [0.0.5] FE WEB CEKAT 2025-09-03\r
\r
### Updates\r
\r
- Updated PermissionNavItem and NavigationItem interfaces to use string arrays for permissions instead of PermissionName type for better flexibility.\r
- Modified NAVIGATION_CONFIG to replace permission constants with string representations for improved readability and consistency.\r
- Enhanced RBACProvider's hasPermission function to support various permission formats, including direct matches and synonyms for better user experience.\r
- Integrated a new PermissionsPage component into the main Index page, ensuring proper permission checks with PermissionGate.\r
\r
# [0.0.4] FE WEB CEKAT 2025-09-03\r
\r
### Updates\r
\r
- Integrate RBAC and enhance agent management features\r
- Added RBACProvider to App component for role-based access control.\r
- Updated HumanAgents component to utilize PermissionGate for role management and agent creation.\r
- Refactored agent role handling to support new roles: master_agent and super_agent.\r
- Enhanced ConversationPage to display channel provider information for better context.\r
- Improved useHumanAgents hook to fetch agents from the new v_users view, streamlining data retrieval and role assignment.\r
\r
# [0.0.3] FE WEB CEKAT 2025-09-03\r
\r
### Updates\r
\r
- Implement WhatsApp session polling and enhance deletion handling\r
- Added polling mechanism to check WhatsApp session status while the QR modal is open, improving user feedback on connection status.\r
- Introduced loading state management for channel deletion actions to prevent multiple submissions and enhance user experience.\r
- Removed phone number input from WhatsAppPlatformForm as per updated requirements, streamlining the form submission process.\r
\r
# [0.0.2] FE WEB CEKAT 2025-09-01\r
\r
### Updates\r
\r
- Deleted AUTHENTICATION_SETUP.md, CHAT_SETUP.md, HUMAN_AGENTS_SETUP.md, sample_data.sql, and simple_sample_data.sql as they are no longer relevant to the current project structure.\r
- Updated package.json version to 0.0.1 and removed unnecessary dev dependencies from package-lock.json.\r
- Enhanced Login component to display the current version of the application.\r
- Enhanced Whatsapp channel connecting flow and validation\r
\r
# [0.0.1] FE WEB CEKAT 2025-09-01\r
\r
### Updates\r
\r
- Enhance ClientEditProfileForm: Make company industry selection read-only for non-admin users\r
`,pD=["from-sky-400/60 via-cyan-400/20 to-transparent border-sky-500/40","from-fuchsia-400/60 via-purple-500/20 to-transparent border-fuchsia-500/30","from-emerald-400/60 via-lime-400/20 to-transparent border-emerald-500/30","from-amber-400/60 via-orange-400/20 to-transparent border-amber-500/30","from-indigo-400/60 via-violet-500/20 to-transparent border-indigo-500/30","from-rose-400/60 via-pink-500/20 to-transparent border-rose-500/30"];function gD(e){return e.split(`
`).map(t=>t.trim()).filter(t=>/^-\s*\*\*/.test(t)).map(t=>{const n=t.match(/^-\s*\*\*(.+?)\*\*:?\s*(.*)$/);if(!n)return t.replace(/^-+\s*/,"");const[,r,a]=n;return a?`${r.trim()}  ${a.trim()}`:r.trim()})}function Q9(e){var a,s;const t=e.replace(/\r/g,"").trim();if(!t)return[];const n=t.split(/\n(?=# \[)/g).map(o=>o.trim()).filter(Boolean),r=[];for(const o of n){if(o.startsWith("# Change Log")){const x=o.replace(/^# Change Log\s*/,"").trim();if(!x)continue;const y=Q9(x);r.push(...y);continue}const l=o.match(/^# \[(?<version>[^\]]+)\](?<title>.*?)(?:\n|$)/);if(!(l!=null&&l.groups))continue;const c=(a=l.groups.version)==null?void 0:a.trim();if(!c)continue;const u=((s=l.groups.title)==null?void 0:s.trim())??"";let d=u||void 0,h;if(u){const x=u.match(/(\d{4}-\d{2}-\d{2})/);x&&(h=x[1],d=u.replace(x[1],"").trim()||void 0)}const f=o.slice(l[0].length).trim(),m=f?f.split(/\n(?=### )/g).map(x=>x.trim()).filter(Boolean):[],g=m.length?m.map((x,y)=>{const[w,...b]=x.split(`
`),_=w.replace(/^###\s*/,"").trim()||`Section ${y+1}`,k=b.join(`
`).trim();return{heading:_,body:k,highlights:gD(k)}}):f?[{heading:"Updates",body:f,highlights:gD(f)}]:[],v=g.flatMap(x=>x.highlights).filter(Boolean).slice(0,5);r.push({version:c,label:d,date:h,sections:g,summary:v,raw:f})}return r}const F3e={p:({children:e})=>i.jsx("p",{className:"text-sm leading-relaxed text-slate-200",children:e}),ul:({children:e})=>i.jsx("ul",{className:"space-y-2 text-sm text-slate-200",children:e}),li:({children:e})=>i.jsxs("li",{className:"relative pl-6",children:[i.jsx("span",{className:"absolute left-0 top-2 h-2 w-2 rounded-full bg-gradient-to-r from-sky-400 to-blue-500 shadow-[0_0_12px_rgba(56,189,248,0.6)]"}),i.jsx("div",{className:"space-y-1",children:e})]}),strong:({children:e})=>i.jsx("span",{className:"font-semibold text-sky-200",children:e}),code:({children:e})=>i.jsx("code",{className:"rounded-md bg-slate-900/80 px-1.5 py-0.5 text-xs text-sky-200",children:e}),a:({children:e,href:t})=>i.jsx("a",{href:t,className:"text-sky-300 underline decoration-dotted underline-offset-4 transition hover:text-sky-200",target:"_blank",rel:"noreferrer",children:e})};function U3e(){var d;const e=p.useMemo(()=>Q9(mD),[]),[t,n]=p.useState(""),[r,a]=p.useState("interactive"),[s,o]=p.useState(((d=e[0])==null?void 0:d.version)??""),l=t.trim().toLowerCase(),c=p.useMemo(()=>l?e.filter(h=>[h.version,h.label??"",h.date??"",h.raw,...h.sections.map(m=>m.heading),...h.sections.map(m=>m.body)].join(" ").toLowerCase().includes(l)?!0:h.sections.some(m=>m.highlights.some(g=>g.toLowerCase().includes(l)))):e,[e,l]);p.useEffect(()=>{var f;if(!c.length){o("");return}c.some(m=>m.version===s)||o(((f=c[0])==null?void 0:f.version)??"")},[c,s]);const u=c.find(h=>h.version===s)||c[0];return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-10 text-foreground",children:i.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-6",children:[i.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[i.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-white md:text-4xl",children:"Release Notes & Progress Journal"}),i.jsx("p",{className:"mx-auto max-w-2xl text-sm text-slate-300 md:text-base",children:"Explore every release with rich summaries, vivid highlights, and interactive sections. Filter by keyword, skim highlights, or dive deep into the full notes."})]}),i.jsxs(Uc,{value:r,onValueChange:h=>a(h),className:"w-full",children:[i.jsxs(Tl,{className:"mx-auto grid w-full max-w-xs grid-cols-2 bg-slate-900/60 p-1 shadow-inner shadow-slate-800/40",children:[i.jsx(wr,{value:"interactive",className:"data-[state=active]:bg-sky-500/20 data-[state=active]:text-sky-100",children:"Interactive"}),i.jsx(wr,{value:"markdown",className:"data-[state=active]:bg-slate-700/40 data-[state=active]:text-slate-100",children:"Classic"})]}),i.jsx(ir,{value:"interactive",className:"mt-6",children:i.jsxs("div",{className:"grid gap-6 lg:grid-cols-[320px_1fr]",children:[i.jsxs(We,{className:"border border-white/10 bg-slate-950/60 shadow-[0_12px_40px_-24px_rgba(56,189,248,0.65)] backdrop-blur",children:[i.jsxs(mt,{className:"space-y-4",children:[i.jsxs(ht,{className:"flex items-center gap-2 text-lg text-white",children:[i.jsx(FT,{className:"h-4 w-4 text-sky-300"}),"Releases"]}),i.jsx(Ni,{className:"text-xs text-slate-300",children:"Search and choose any release to explore tailored highlights and details. Recent entries glow brighter."}),i.jsxs("div",{className:"relative",children:[i.jsx(ns,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),i.jsx(ot,{placeholder:"Search versions, features, or dates...",value:t,onChange:h=>n(h.target.value),className:"bg-slate-900/70 pl-9 text-sm text-slate-100 placeholder:text-slate-400 focus-visible:ring-sky-400"})]})]}),i.jsx(ct,{className:"p-0",children:i.jsx(Cb,{className:"h-[540px]",children:i.jsxs("div",{className:"flex flex-col divide-y divide-white/5",children:[c.length===0&&i.jsx("div",{className:"p-6 text-center text-sm text-slate-400",children:"No release notes match your search. Try another term."}),c.map((h,f)=>{const m=h.version===(u==null?void 0:u.version);return i.jsx("button",{onClick:()=>o(h.version),className:Pe("group relative flex w-full flex-col items-start gap-3 px-5 py-4 text-left transition",m?"bg-sky-500/15":"hover:bg-slate-900/70"),children:i.jsxs("div",{className:"flex w-full items-start gap-3",children:[i.jsx("span",{className:Pe("mt-2 h-2.5 w-2.5 rounded-full bg-sky-400 shadow-[0_0_12px_rgba(56,189,248,0.7)] transition-transform",m&&"scale-125")}),i.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("span",{className:"text-sm font-semibold text-slate-100",children:["v",h.version]}),h.label&&i.jsx(At,{variant:"outline",className:"border-slate-500/50 bg-slate-900/60 px-2 py-0 text-[10px] font-medium uppercase tracking-wide text-slate-300",children:h.label}),h.date&&i.jsxs("span",{className:"flex items-center gap-1 text-[11px] uppercase tracking-wide text-slate-400",children:[i.jsx(OT,{className:"h-3 w-3 text-slate-400"}),h.date]})]}),h.summary.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:h.summary.slice(0,3).map(g=>i.jsx(At,{variant:"secondary",className:"max-w-full truncate bg-sky-500/15 text-[10px] font-medium text-sky-100",title:g,children:g},g))})]})]})},h.version)})]})})})]}),i.jsx("div",{className:"space-y-6",children:u?i.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-white/10 bg-slate-950/70 p-1 shadow-[0_45px_90px_-60px_rgba(56,189,248,0.8)] backdrop-blur",children:[i.jsx("div",{className:"absolute -left-32 -top-32 h-64 w-64 rounded-full bg-sky-500/20 blur-3xl"}),i.jsx("div",{className:"absolute -bottom-24 -right-24 h-64 w-64 rounded-full bg-fuchsia-500/10 blur-3xl"}),i.jsxs("div",{className:"relative z-10 rounded-[calc(theme(borderRadius.3xl))] border border-white/10 bg-slate-950/80 px-8 py-8",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsxs(At,{className:"bg-sky-500/30 text-sky-50",children:["Version ",u.version]}),u.label&&i.jsx("h2",{className:"text-xl font-semibold text-white md:text-2xl",children:u.label}),u.date&&i.jsxs("span",{className:"flex items-center gap-1 text-sm text-slate-300",children:[i.jsx(OT,{className:"h-4 w-4 text-sky-300"}),u.date]})]}),u.summary.length>0&&i.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:u.summary.map(h=>i.jsxs(At,{variant:"outline",className:"gap-1 border-sky-400/40 bg-sky-500/15 px-3 py-1 text-[11px] font-medium text-sky-100",title:h,children:[i.jsx(FT,{className:"h-3 w-3 text-sky-200"}),i.jsx("span",{className:"max-w-[220px] truncate",children:h})]},h))}),i.jsx("div",{className:"mt-8 space-y-4",children:i.jsxs($3e,{type:"multiple",defaultValue:u.sections.map((h,f)=>`section-${f}`),className:"space-y-4",children:[u.sections.map((h,f)=>{const m=pD[f%pD.length];return i.jsxs(Y9,{value:`section-${f}`,className:Pe("border border-white/5","rounded-2xl bg-slate-950/60 shadow-[0_24px_60px_-35px_rgba(56,189,248,0.55)]"),children:[i.jsxs(X9,{className:"px-6 py-5 text-left hover:no-underline data-[state=open]:bg-slate-900/60",children:[i.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:Pe("h-2.5 w-2.5 rounded-full bg-gradient-to-r shadow-[0_0_12px_rgba(56,189,248,0.6)]",m)}),i.jsx("span",{className:"text-base font-semibold text-white md:text-lg",children:h.heading})]}),h.highlights.length>0&&i.jsx("p",{className:"text-xs text-slate-300 md:text-sm",children:h.highlights[0]})]}),i.jsx(DT,{className:"h-4 w-4 text-sky-300"})]}),i.jsx(J9,{className:"px-6 pb-6",children:i.jsxs("div",{className:Pe("relative overflow-hidden rounded-xl border border-white/5 bg-slate-950/80 px-5 py-5","shadow-[inset_0_0_40px_-25px_rgba(56,189,248,0.75)]"),children:[i.jsx("div",{className:Pe("pointer-events-none absolute inset-0 bg-gradient-to-br opacity-40",m)}),i.jsx(Cy,{remarkPlugins:[Ey],components:F3e,className:"relative z-10 space-y-3",children:h.body})]})})]},h.heading+f)}),u.sections.length===0&&i.jsx("p",{className:"text-sm text-slate-300",children:"No detailed sections were found for this release. Check the classic view for raw notes."})]},u.version)})]})]}):i.jsxs(We,{className:"border border-white/10 bg-slate-950/60 p-12 text-center text-slate-300",children:[i.jsx(ht,{className:"text-xl text-white",children:"No entries available"}),i.jsx(Ni,{className:"mt-2 text-sm text-slate-300",children:"Try clearing the search filter to view release notes."})]})})]})}),i.jsx(ir,{value:"markdown",className:"mt-6",children:i.jsxs(We,{className:"border border-white/10 bg-slate-950/70 shadow-[0_30px_80px_-60px_rgba(15,23,42,0.95)]",children:[i.jsxs(mt,{children:[i.jsxs(ht,{className:"flex items-center gap-2 text-white",children:[i.jsx(DT,{className:"h-5 w-5 text-sky-300"}),"Full Markdown"]}),i.jsx(Ni,{className:"text-xs text-slate-300",children:"Prefer the traditional view? Browse the original changelog with full Markdown formatting."})]}),i.jsx(ct,{children:i.jsx("article",{className:"prose prose-sm max-w-none text-slate-200 dark:prose-invert prose-headings:text-white prose-a:text-sky-300 prose-strong:text-sky-200",children:i.jsx(Cy,{remarkPlugins:[Ey],children:mD})})})]})})]})]})})}const B3e=1e3,vD=3;function yD(){const{platform_id:e,platformId:t}=UJ(),n=p.useMemo(()=>e||t||"unknown",[e,t]),[r,a]=p.useState([]),[s,o]=p.useState(""),[l,c]=p.useState(!1),[u,d]=p.useState(!0),[h,f]=p.useState(()=>{if(typeof window>"u")return null;const ue=window.localStorage,Se=`livechat_account_${window.location.pathname}`,we=["user_id","userId","account_id","accountId"];for(const Ee of we){const Ue=ue.getItem(Ee);if(Ue)return Ue}const Te=ue.getItem(Se);if(Te)return Te;const je=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`anon_${Date.now()}_${Math.random().toString(36).slice(2,10)}`;try{ue.setItem(Se,je)}catch{}return je}),[m,g]=p.useState(()=>{if(typeof window>"u")return`session_${Date.now()}_${Math.random().toString(36).slice(2,8)}`;const ue=`livechat_session_${e||t||"unknown"}`,Se=window.sessionStorage.getItem(ue);if(Se)return Se;const we=`session_${Date.now()}_${Math.random().toString(36).slice(2,8)}`;return window.sessionStorage.setItem(ue,we),we}),v=p.useMemo(()=>t3(El,r3,{auth:{persistSession:!1,autoRefreshToken:!1},global:{headers:h?{"x-account-id":h}:void 0}}),[h]),[x,y]=p.useState(null),[w,b]=p.useState(""),[_,k]=p.useState(null),[j,N]=p.useState(null),O=p.useRef(0),I=p.useRef(new Set),P=p.useRef(!1),S=p.useRef([]),D=p.useRef(null),L=p.useRef(null),U=p.useRef(null),F=p.useRef(null),M=p.useRef(null),T=p.useRef(!1),E=p.useRef(!1),$=p.useRef(null),A=p.useRef([]),B=()=>++O.current,R=(ue,Se)=>{var Te;const we=(((Te=ue[ue.length-1])==null?void 0:Te.order)??0)+1;return[...ue,{...Se,order:we}]},C=ue=>{var H;const Se=U.current;if(!Se)return ue;const we=ue.findIndex(q=>q.id===Se);if(we<=-1)return ue;const Te=L.current;if(!Te)return ue;const je=ue.findIndex(q=>q.id===Te);if(je===-1||je>we)return ue;const Ee=ue.slice(),[Ue]=Ee.splice(we,1);return Ee.push(Ue),Ee[Ee.length-1].order=(((H=Ee[Ee.length-2])==null?void 0:H.order)??0)+1,Ee},W=(ue,Se)=>{Se&&a(we=>{var Ee;const Te=we.findIndex(Ue=>Ue.id===ue);if(Te>=0){const Ue=we.slice(),H=Ue[Te];return Ue[Te]={...H,body:(H.body||"")+Se,streaming:!0,order:H.order||B()},Ue}const je={id:ue,role:"assistant",body:Se,at:ft(),order:((Ee=we[we.length-1])==null?void 0:Ee.order)??0,streaming:!0};return C(R(we,je))})},Q=(ue,Se)=>{a(we=>{var Ee;const Te=we.findIndex(Ue=>Ue.id===ue);if(Te>=0){const Ue=we.slice(),H=Ue[Te];return Ue[Te]={...H,body:Se!==void 0?Se:H.body,streaming:!1},Ue}if(Se===void 0)return we;const je={id:ue,role:"assistant",body:Se,at:ft(),order:((Ee=we[we.length-1])==null?void 0:Ee.order)??0,streaming:!1};return C(R(we,je))}),N(null),U.current=null},X=null;p.useEffect(()=>{M.current=X},[X]),p.useEffect(()=>{if(typeof window>"u")return;const ue=`livechat_session_${n}`,Se=window.sessionStorage.getItem(ue);if(Se&&Se!==m){g(Se);return}if(!Se){const we=`session_${Date.now()}_${Math.random().toString(36).slice(2,8)}`;window.sessionStorage.setItem(ue,we),g(we)}},[n]);const Z=p.useRef(null),te=p.useRef(null),J=p.useRef(null),ie=p.useRef(null),ge="/tones/mixkit-message-pop-alert-2354.mp3",ae="/tones/mixkit-long-pop-2358.wav",Re=()=>{const ue=window.AudioContext||window.webkitAudioContext;return te.current=te.current??new ue,te.current},me=(ue,Se,we,Te,je=.05,Ee="sine")=>{const Ue=ue.createOscillator(),H=ue.createGain();Ue.type=Ee,Ue.frequency.value=we,H.gain.value=1e-4,Ue.connect(H),H.connect(ue.destination);const q=Se+Te/1e3;H.gain.setValueAtTime(1e-4,Se),H.gain.exponentialRampToValueAtTime(je,Se+.02),H.gain.setValueAtTime(je,Math.max(Se+.02,q-.05)),H.gain.exponentialRampToValueAtTime(1e-4,q),Ue.start(Se),Ue.stop(q)},K=(ue,Se=110,we=.06)=>{try{const Te=Re(),je=Te.currentTime+.01;ue.forEach((Ee,Ue)=>{const H=je+Ue*Se/1e3,q=Se*.9;Array.isArray(Ee)?Ee.forEach(re=>me(Te,H,re,q,we,"sine")):me(Te,H,Ee,q,we,"triangle")})}catch{}},de=async ue=>{var Se,we;try{const je=(ue==="low"?(Se=window.chatConfig)==null?void 0:Se.sendToneUrl:(we=window.chatConfig)==null?void 0:we.replyToneUrl)||(ue==="low"?ge:ae),Ee=ue==="low"?J.current??(J.current=new Audio(je)):ie.current??(ie.current=new Audio(je));return Ee.src!==je&&(Ee.src=je),Ee.currentTime=0,Ee.volume=ue==="low"?.35:.45,await Ee.play(),!0}catch{return!1}},$e=async()=>{await de("low")||K([493.88,523.25,493.88,523.25],110,.045)},nt=async()=>{await de("high")||K([1046.5,1318.5,1568,[1046.5,1318.5,1568,2093]],120,.06)},Ye=ue=>{if(!(ue!=null&&ue.id)||I.current.has(ue.id)||(I.current.add(ue.id),!P.current))return;const Se=String(ue.body||"").trim();Se&&ks(async()=>{const{toast:we}=await Promise.resolve().then(()=>xw);return{toast:we}},void 0).then(({toast:we})=>{we.info(Se,{duration:3500})}).catch(()=>{})},ft=()=>new Date(Date.now()+1).toISOString(),Ze=()=>{S.current.length>0&&(S.current.forEach(ue=>{try{clearTimeout(ue)}catch{}}),S.current=[])},ut=async(ue,Se)=>{if(!ue)return;const{data:we}=await v.from("messages").select("id, role, body, created_at").eq("thread_id",ue).order("created_at",{ascending:!0});Array.isArray(we)&&Se(we)},ee=(ue,Se,we)=>{if(Ze(),!ue){T.current=!0;return}S.current=we.map(Te=>window.setTimeout(async()=>{try{await ut(ue,Se)}catch(je){console.error("[LiveChat] catch-up failed",je)}},Te))};p.useEffect(()=>{try{const ue=!!h,Se=typeof window<"u"?ue?window.localStorage:window.sessionStorage:null;if(!Se)return;const we=ue?`livechat_username_${n}_acct_${h}`:`livechat_username_${n}_${m}`;let Te="";try{Te=Se.getItem(we)||""}catch{}if(!Te){const je=["Happy","Bright","Calm","Brave","Kind","Sunny","Lucky","Cheerful","Swift","Clever"],Ee=["User","Visitor","Friend","Guest","Buddy","Pal","Explorer","Champion","Star","Hero"],Ue=je[Math.floor(Math.random()*je.length)],H=Ee[Math.floor(Math.random()*Ee.length)],q=Math.floor(100+Math.random()*900);Te=`${Ue} ${H} ${q}`;try{Se.setItem(we,Te)}catch{}}b(Te)}catch{}},[n,m,h]),p.useEffect(()=>{var ue;(ue=Z.current)==null||ue.scrollIntoView({behavior:"smooth"})},[r.length]),p.useEffect(()=>{D.current=x,x||Ze(),x&&T.current&&(T.current=!1,ee(x,qe,[0]))},[x]),p.useEffect(()=>{const ue=()=>{document.visibilityState==="visible"&&ee(D.current,qe,[0])};return document.addEventListener("visibilitychange",ue),()=>{document.removeEventListener("visibilitychange",ue)}},[]),p.useEffect(()=>()=>Ze(),[]),p.useEffect(()=>()=>{j&&(N(null),L.current=null)},[j]),p.useEffect(()=>{n&&n!=="unknown"&&(async()=>{try{const{data:Se,error:we}=await v.from("channels").select("ai_profile_id").eq("id",n).maybeSingle();!we&&(Se!=null&&Se.ai_profile_id)&&k(Se.ai_profile_id)}catch(Se){console.error("Error fetching AI profile ID:",Se)}})()},[n]);const qe=p.useCallback(ue=>{!ue||ue.length===0||a(Se=>{const we=new Map;Se.forEach(Ee=>we.set(Ee.id,Ee));let Te=!1;for(const Ee of ue){if(!(Ee!=null&&Ee.id))continue;if(Ee.role==="system"){Ye(Ee);continue}const Ue=Ee.role==="agent"||Ee.role==="assistant"?"assistant":"user";let H=null;if(Ue==="assistant"&&L.current){for(const[Me,et]of we.entries())if(et.id===L.current){H=et.order,we.delete(Me),L.current=null,Te=!0;break}}if(Ue==="user"){const Me=new Date(Ee.created_at||Date.now()).getTime();let et=null,Ie=null,Y=Number.POSITIVE_INFINITY;for(const[le,Fe]of we.entries()){if(!le.startsWith("temp-")||Fe.role!=="user"||(Fe.body||"").trim()!==(Ee.body||"").trim())continue;const Je=new Date(Fe.at).getTime(),it=Number.isFinite(Je)?Math.abs(Me-Je):0;it<Y&&(Y=it,et=le,Ie=Fe.order??null)}et&&(H=Ie,we.delete(et),U.current=null,Te=!0)}const q=we.get(Ee.id),re=Ee.created_at||new Date().toISOString(),he=Ee.body||"";if(q)q.body!==he&&(q.body=he,Te=!0),q.at!==re&&(q.at=re,Te=!0),Ue==="assistant"&&q.streaming&&(q.streaming=!1,Te=!0);else{const Me={id:Ee.id,role:Ue,body:he,at:re,order:H??B()};we.set(Me.id,Me),Te=!0}}const je=Array.from(we.values());if(je.sort((Ee,Ue)=>Ee.order-Ue.order),!Te&&je.length===Se.length){let Ee=!0;for(let Ue=0;Ue<je.length;Ue+=1){const H=je[Ue],q=Se[Ue];if(H!==q){Ee=!1;break}}if(Ee)return Se}return je})},[]),dt=p.useCallback(()=>{A.current.length!==0&&(A.current.forEach(ue=>{try{clearTimeout(ue)}catch{}}),A.current=[])},[]),se=p.useCallback(async()=>{if(!n)return null;try{const{data:ue}=await v.from("threads").select("id, created_at, additional_data, assignee_user_id, status, account_id, resolved_at, resolved_by_user_id, contacts(name)").eq("channel_id",n).order("last_msg_at",{ascending:!1}).order("created_at",{ascending:!1}).limit(50);if(!ue)return null;const Se=$.current,we=ue.find(je=>{var he;const Ee=je==null?void 0:je.additional_data,Ue=h?(je==null?void 0:je.account_id)===h||(Ee==null?void 0:Ee.account_id)===h:!1,H=m?(Ee==null?void 0:Ee.session_id)===m:!1,q=((he=je==null?void 0:je.contacts)==null?void 0:he.name)||"",re=w?q.trim().toLowerCase()===w.trim().toLowerCase():!1;if(h){if(!(Ue||H))return!1}else if(!(H||re))return!1;if(Se){const Me=je!=null&&je.created_at?new Date(je.created_at).getTime():0,et=new Date(Se.startedAt).getTime()-15e3;if(Me&&Me<et)return!1;const Ie=Se.alias.trim().toLowerCase()===q.trim().toLowerCase();if(h){if(!H&&!Ue)return!1}else if(!Ie&&!H&&!Ue)return!1}return!0});return we!=null&&we.id?we:ue.find(je=>{var Ee;return!(je!=null&&je.account_id)&&!((Ee=je==null?void 0:je.additional_data)!=null&&Ee.account_id)})??null}catch(ue){return console.warn("[LiveChat] findThreadForCurrentSession failed",ue),null}},[n,m,w,h,v]),ve=p.useCallback(async ue=>{const Se=((ue==null?void 0:ue.status)||"").toString().toLowerCase();if(!(Se==="closed"||Se==="done"||Se==="resolved")||!(ue!=null&&ue.id))return(ue==null?void 0:ue.id)||null;try{const{error:Te}=await v.from("threads").update({status:"pending",assignee_user_id:null,resolved_at:null,resolved_by_user_id:null}).eq("id",ue.id);if(Te)throw Te;return ue.id}catch(Te){return console.warn("[LiveChat] failed to reopen resolved thread",Te),(ue==null?void 0:ue.id)||null}},[]),oe=p.useCallback((ue=[])=>{dt(),ue.length&&(A.current=ue.map(Se=>window.setTimeout(async()=>{var Te;if(!E.current||D.current)return;const we=await se();if(we!=null&&we.id)try{const je=await ve(we);je&&await((Te=F.current)==null?void 0:Te.call(F,je))}catch(je){console.warn("[LiveChat] retry attach failed",je)}},Se)))},[dt,se,ve]);p.useEffect(()=>()=>dt(),[dt]),p.useEffect(()=>{let ue=null,Se=null;const we=async je=>{if(D.current===je&&ue){E.current=!1,ee(je,qe,[0,1200]);return}if(ue){try{v.removeChannel(ue)}catch{}ue=null}y(Ee=>Ee===je?Ee:je),D.current=je,E.current=!1,$.current=null,dt(),I.current=new Set,P.current=!1,Ze();try{const{data:Ee}=await v.from("messages").select("id, role, body, created_at").eq("thread_id",je).order("created_at",{ascending:!0});Array.isArray(Ee)&&qe(Ee);const Ue=H=>v.channel(`livechat-msgs-${H}`).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`thread_id=eq.${H}`},q=>{const re=q==null?void 0:q.eventType,he=(q==null?void 0:q.new)||(q==null?void 0:q.old);if(he){if((he==null?void 0:he.role)==="system"){Ye(he);return}re!=="DELETE"&&((he==null?void 0:he.role)==="user"||(he==null?void 0:he.role)==="agent"||(he==null?void 0:he.role)==="assistant")&&qe([he])}}).subscribe(q=>{if(q==="SUBSCRIBED")P.current=!0;else if(q==="CHANNEL_ERROR"||q==="TIMED_OUT"){if(console.warn("[LiveChat] realtime channel status",q),ee(D.current,qe,[0,1500]),ue)try{v.removeChannel(ue)}catch{}ue=Ue(H)}});ue=Ue(je),ee(je,qe,[0,800,2e3,5e3,1e4])}finally{P.current=!0,d(!1)}};return F.current=we,(async()=>{const je=await se();if(je!=null&&je.id){const Ee=await ve(je);Ee&&await we(Ee);return}d(!1),E.current=!1})(),Se=v.channel(`livechat-threads-${n}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"threads",filter:`channel_id=eq.${n}`},async je=>{var q,re,he;const Ee=(q=je==null?void 0:je.new)==null?void 0:q.id;if(!Ee||Ee===D.current)return;const Ue=(he=(re=je==null?void 0:je.new)==null?void 0:re.additional_data)==null?void 0:he.session_id;if(!(Ue&&Ue===m)){try{const Me=await se();if(Me!=null&&Me.id){const et=await ve(Me);et&&await we(et)}}catch(Me){console.warn("[LiveChat] failed to attach from realtime (non-session match)",Me)}return}try{const Me=await ve(je==null?void 0:je.new);await we(Me||Ee)}catch(Me){console.warn("[LiveChat] failed to attach from realtime",Me)}}).subscribe(()=>d(!1)),()=>{try{ue&&v.removeChannel(ue)}catch{}try{Se&&v.removeChannel(Se)}catch{}F.current=null}},[n,m,w,qe,se,ve,h]);const Xe=async()=>{var Ee,Ue;const ue=s.trim();if(!ue)return;const Se=new Date().toISOString();if(!D.current)try{const H=await se();if(H!=null&&H.id){const q=await ve(H);q&&await((Ee=F.current)==null?void 0:Ee.call(F,q))}}catch(H){console.warn("[LiveChat] failed to attach existing thread before send",H)}if(D.current||(E.current=!0,$.current={alias:w,startedAt:new Date().toISOString()},oe([0,300,900,2e3])),x)try{const{checkAIMessageLimit:H,autoAssignToSuperAgent:q}=await ks(async()=>{const{checkAIMessageLimit:he,autoAssignToSuperAgent:Me}=await import("./aiMessageLimit-CzT5SAWG.js");return{checkAIMessageLimit:he,autoAssignToSuperAgent:Me}},[]),re=await H(v,x);if(re.isExceeded&&re.superAgentId){if((await q(v,x,re.superAgentId)).success){const{toast:Me}=await ks(async()=>{const{toast:et}=await Promise.resolve().then(()=>xw);return{toast:et}},void 0);Me.error(`Batas pesan AI telah tercapai (${re.currentCount}/${re.limit}). Percakapan telah dialihkan ke super agent.`);return}}else if(re.isExceeded&&!re.superAgentId){const{toast:he}=await ks(async()=>{const{toast:Me}=await Promise.resolve().then(()=>xw);return{toast:Me}},void 0);he.error(`Batas pesan AI telah tercapai (${re.currentCount}/${re.limit}). Tidak ada super agent yang tersedia untuk penanganan.`);return}}catch(H){console.error("Error checking AI message limit:",H)}o("");const we=`temp-${Date.now()}`;a(H=>[...H,{id:we,role:"user",body:ue,at:Se,order:B()}]),U.current=we,$e(),c(!0);const Te=setTimeout(()=>{a(H=>(H.findIndex(re=>re.id===we)>=0,H))},3e3),je=`streaming-${Date.now()}`;N(je),L.current=je;try{const H={message:ue,session_id:m,account_id:h||void 0,timestamp:Se,channel_id:n,username:w||void 0,ai_profile_id:_,stream:!0};let q=0,re=null,he=null;for(;q<vD;){try{re=await ji(Sn.ENDPOINTS.AI_AGENT.CHAT_SETTINGS,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)},{forceLegacy:q>0})}catch(Ie){console.warn("[LiveChat] proxy webhook call failed",Ie),re=null}if(re&&re.ok)break;he=(re==null?void 0:re.status)??null,q+=1,q<vD&&await new Promise(Ie=>setTimeout(Ie,B3e))}if(!re.ok){const Ie=he?` (proxy status ${he})`:"";throw new Error(`Webhook failed ${re.status}${Ie}`)}let Me=null;try{const Ie=await se();Ie!=null&&Ie.id?(Me=await ve(Ie)||Ie.id,D.current!==Me&&await((Ue=F.current)==null?void 0:Ue.call(F,Me))):E.current&&!D.current&&oe([400,1200,2500,5e3,8e3])}catch(Ie){console.warn("[LiveChat] failed to attach thread after send",Ie)}const et=Me??D.current;if(ee(et,qe,[0,600,1800,4e3,9e3,15e3]),re.body){const Ie=re.body.getReader(),Y=new TextDecoder;let le="";try{for(;;){const{done:Fe,value:Je}=await Ie.read();if(Fe)break;le+=Y.decode(Je,{stream:!0});const it=le.split(`
`);le=it.pop()||"";for(const Pt of it)if(Pt.trim()!=="")try{if(Pt.startsWith("data: ")){const Ot=Pt.slice(6);if(Ot==="[DONE]"){Q(je);break}const Lt=JSON.parse(Ot);(Lt.content||Lt.delta)&&W(je,Lt.content||Lt.delta)}else{const Ot=JSON.parse(Pt);(Ot.content||Ot.delta)&&W(je,Ot.content||Ot.delta)}}catch{W(je,Pt)}}}finally{Ie.releaseLock()}}else try{const Ie=await re.json(),Y=Ie.output||Ie.content||Ie.message||"Sorry, I couldn't process your message.";Q(je,Y)}catch(Ie){console.error("Failed to parse JSON response:",Ie),Q(je,"I'm processing your message, please wait...")}nt(),setTimeout(()=>{x&&v.from("messages").select("id, role, body, created_at").eq("thread_id",x).order("created_at",{ascending:!0}).then(({data:Ie})=>{Array.isArray(Ie)&&a(Y=>{const le=new Map;Y.forEach(Je=>le.set(Je.id,Je));for(const Je of Ie){if(!(Je!=null&&Je.id))continue;if(Je.role==="system"){Ye(Je);continue}const it=Je.role==="agent"||Je.role==="assistant"?"assistant":"user";let Pt=null;if(it==="user")continue;const Ot=le.get(Je.id),Lt=Ot??{id:Je.id,role:it,body:Je.body||"",at:Je.created_at||new Date().toISOString(),order:B()};Ot||(Lt.body=Je.body||"",Lt.at=Je.created_at||new Date().toISOString());const yn=L.current;if(yn){for(const[jn,nr]of le.entries())if(nr.id===yn){Pt=nr.order,le.delete(jn),L.current=null;break}}Ot||(Lt.order=Pt??Lt.order),le.set(Lt.id,Lt)}const Fe=Array.from(le.values());return Fe.sort((Je,it)=>Je.order-it.order),Fe})})},1e3)}catch(H){console.error("Streaming error:",H),Q(je,"Sorry, I'm having trouble right now. Please try again later."),E.current=!1,nt()}finally{clearTimeout(Te),c(!1)}},ke=ue=>{ue.key==="Enter"&&!ue.shiftKey&&(ue.preventDefault(),Xe())},rt=p.useMemo(()=>[...r].sort((ue,Se)=>ue.order-Se.order),[r]),bt=ue=>new Date(ue).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center",children:i.jsx("div",{className:"mx-auto w-full max-w-xl h-full",children:i.jsx(We,{className:"border border-blue-100 shadow-xl rounded-2xl bg-white/90 backdrop-blur",children:i.jsxs(ct,{className:"p-0",children:[i.jsx("div",{className:"flex items-center justify-between px-4 py-3 rounded-t-2xl bg-gradient-to-r from-blue-600 to-blue-500 text-white",children:i.jsx("div",{className:"text-sm font-medium tracking-wide",children:"Live Chat"})}),i.jsx(Cb,{className:"h-[450px] p-4",children:i.jsxs("div",{className:"space-y-3",children:[u&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin text-blue-600"}),"Preparing chat"]}),rt.map(ue=>{if(!ue.body||ue.streaming&&ue.body.trim()==="")return null;const Se={a:({href:we,children:Te})=>{const je=we||"";return sy(je)?i.jsx("img",{src:je,alt:"User uploaded content",className:"rounded-lg max-w-full h-auto my-2 border border-black/10 shadow-sm",loading:"lazy"}):i.jsx("a",{href:je,target:"_blank",rel:"noopener noreferrer",className:ue.role==="user"?"text-blue-300 font-medium underline hover:text-white":"text-blue-600 font-medium underline hover:text-blue-800",children:Te})},img:({src:we,alt:Te})=>i.jsx("img",{src:we,alt:Te,className:"rounded-lg max-w-full h-auto my-2 border border-black/10 shadow-sm overflow-hidden",loading:"lazy"})};return i.jsx("div",{className:`flex ${ue.role==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:"max-w-[80%] space-y-1",children:[i.jsxs("div",{className:`px-4 py-2 text-sm rounded-2xl shadow-sm transition-colors ${ue.role==="user"?"bg-blue-600 text-white rounded-br-md":"bg-white text-slate-900 border border-blue-100 rounded-bl-md"}`,children:[i.jsx("div",{className:`prose prose-sm leading-normal max-w-none [overflow-wrap:anywhere] [&>*:first-child]:mt-0 [&>*:last-child]:mb-0 ${ue.role==="user"?"text-white [&_*]:text-inherit [&_li]:marker:text-white [&_code]:text-blue-100 [&_code]:bg-blue-700":""}`,children:i.jsx(Cy,{remarkPlugins:[Ey,Az],components:Se,children:ue.body})}),(()=>{const we=O4(ue.body);return we.length===0?null:i.jsx("div",{className:"space-y-2 mt-2",children:we.map(Te=>!sy(Te)&&i.jsx(Ez,{url:Te,isDark:ue.role==="user"},Te))})})()]}),i.jsx("div",{className:`text-[10px] ${ue.role==="user"?"text-blue-200 text-right":"text-slate-400"}`,children:bt(ue.at)})]})},ue.id)}),l&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(Ht,{className:"h-4 w-4 animate-spin text-blue-600"}),"Typing"]}),i.jsx("div",{ref:Z})]})}),i.jsx("div",{className:"p-3 border-t border-blue-100 rounded-b-2xl bg-blue-50/40",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fr,{placeholder:"Type a message",value:s,onChange:ue=>o(ue.target.value),onKeyDown:ke,className:"rounded-xl min-h-[40px] max-h-[120px] resize-none px-4 py-2 border-blue-200 focus-visible:ring-blue-500 placeholder:text-slate-400 bg-white text-slate-900"}),i.jsx(ne,{onClick:Xe,disabled:!s.trim(),className:"rounded-full h-10 w-10 p-0 bg-blue-600 hover:bg-blue-700 text-white",children:i.jsx(om,{className:"h-4 w-4"})})]})})]})})})})}function z3e(){const{signOut:e}=aa(),t=li(),[n,r]=p.useState(!1),a=async()=>{if(!n){r(!0);try{localStorage.clear(),e().catch(()=>{}),t("/",{replace:!0})}catch(s){console.error("AccountDeactivated: Error in handleBackToLogin:",s),t("/",{replace:!0})}finally{r(!1)}}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 p-4",children:i.jsxs(We,{className:"w-full max-w-md",children:[i.jsxs(mt,{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:i.jsx(eo,{className:"h-8 w-8 text-red-600"})}),i.jsx(ht,{className:"text-2xl font-bold text-red-800",children:"Akun Dinonaktifkan"})]}),i.jsx(Ni,{className:"text-muted-foreground text-base",children:"Akun Anda telah dinonaktifkan dan tidak dapat mengakses sistem."})]}),i.jsxs(ct,{className:"space-y-6",children:[i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(ay,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Hubungi Master Agent"}),i.jsx("p",{className:"text-sm text-red-700",children:"Untuk mengaktifkan kembali akun Anda, silakan hubungi Master Agent di organisasi Anda. Mereka dapat mengaktifkan akun Anda kembali."})]})]})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:i.jsx("p",{children:"Jika Anda yakin ini adalah kesalahan, silakan hubungi administrator sistem untuk bantuan lebih lanjut."})}),i.jsx("div",{className:"flex flex-col gap-3",children:i.jsxs(ne,{onClick:a,variant:"outline",className:"w-full",disabled:n,children:[i.jsx(jp,{className:"h-4 w-4 mr-2"}),n?"Memproses...":"Kembali ke Halaman Login"]})})]})]})})}const W3e=new cJ({defaultOptions:{queries:{staleTime:6e4,gcTime:5*6e4,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:1},mutations:{retry:0}}}),q3e=()=>i.jsx(dJ,{client:W3e,children:i.jsx(Xee,{children:i.jsx(cQ,{children:i.jsx(qee,{children:i.jsx(Yee,{children:i.jsxs(Z_,{children:[i.jsx(kG,{}),i.jsx($4,{}),i.jsxs(tQ,{children:[i.jsx(Va,{path:"/",element:i.jsx(Ig,{children:i.jsx(cD,{})})}),i.jsx(Va,{path:"/chat",element:i.jsx(Ig,{children:i.jsx(cD,{})})}),i.jsx(Va,{path:"/profile",element:i.jsx(Ig,{children:i.jsx(o3e,{})})}),i.jsx(Va,{path:"/reset-password",element:i.jsx(hD,{})}),i.jsx(Va,{path:"/invite",element:i.jsx(hD,{})}),i.jsx(Va,{path:"/account-deactivated",element:i.jsx(z3e,{})}),i.jsx(Va,{path:"/otp",element:i.jsx(Ig,{children:i.jsx(_3e,{})})}),i.jsx(Va,{path:"/logout",element:i.jsx(k3e,{})}),i.jsx(Va,{path:"/changelog",element:i.jsx(U3e,{})}),i.jsx(Va,{path:"/livechat/:platform_id",element:i.jsx(yD,{})}),i.jsx(Va,{path:"/livechat/:platformId",element:i.jsx(yD,{})}),i.jsx(Va,{path:"*",element:i.jsx(S3e,{})})]})]})})})})})}),H3e="sb-yoekcpoppfudmqtvjcby-auth-token";async function K3e(){var e,t;try{const n=localStorage.getItem(H3e);if(!n)return;const r=JSON.parse(n),a=(r==null?void 0:r.access_token)||((e=r==null?void 0:r.currentSession)==null?void 0:e.access_token),s=(r==null?void 0:r.refresh_token)||((t=r==null?void 0:r.currentSession)==null?void 0:t.refresh_token);a&&s&&await ce.auth.setSession({access_token:a,refresh_token:s})}catch{}}(async()=>{try{await K3e()}catch{}U$(document.getElementById("root")).render(i.jsx(q3e,{}))})();

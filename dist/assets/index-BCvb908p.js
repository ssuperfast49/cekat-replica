var b9=Object.defineProperty;var XA=e=>{throw TypeError(e)};var w9=(e,t,n)=>t in e?b9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Mt=(e,t,n)=>w9(e,typeof t!="symbol"?t+"":t,n),S0=(e,t,n)=>t.has(e)||XA("Cannot "+n);var Ne=(e,t,n)=>(S0(e,t,"read from private field"),n?n.call(e):t.get(e)),Qt=(e,t,n)=>t.has(e)?XA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Nt=(e,t,n,r)=>(S0(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Lr=(e,t,n)=>(S0(e,t,"access private method"),n);var Kp=(e,t,n,r)=>({set _(a){Nt(e,t,a,n)},get _(){return Ne(e,t,r)}});function j9(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(r,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var nr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function un(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _9(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var rD={exports:{}},hy={},aD={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp=Symbol.for("react.element"),k9=Symbol.for("react.portal"),S9=Symbol.for("react.fragment"),N9=Symbol.for("react.strict_mode"),C9=Symbol.for("react.profiler"),A9=Symbol.for("react.provider"),E9=Symbol.for("react.context"),P9=Symbol.for("react.forward_ref"),T9=Symbol.for("react.suspense"),O9=Symbol.for("react.memo"),I9=Symbol.for("react.lazy"),JA=Symbol.iterator;function R9(e){return e===null||typeof e!="object"?null:(e=JA&&e[JA]||e["@@iterator"],typeof e=="function"?e:null)}var iD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sD=Object.assign,oD={};function nf(e,t,n){this.props=e,this.context=t,this.refs=oD,this.updater=n||iD}nf.prototype.isReactComponent={};nf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lD(){}lD.prototype=nf.prototype;function Zk(e,t,n){this.props=e,this.context=t,this.refs=oD,this.updater=n||iD}var eS=Zk.prototype=new lD;eS.constructor=Zk;sD(eS,nf.prototype);eS.isPureReactComponent=!0;var QA=Array.isArray,cD=Object.prototype.hasOwnProperty,tS={current:null},uD={key:!0,ref:!0,__self:!0,__source:!0};function dD(e,t,n){var r,a={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)cD.call(t,r)&&!uD.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:rp,type:e,key:s,ref:o,props:a,_owner:tS.current}}function M9(e,t){return{$$typeof:rp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function nS(e){return typeof e=="object"&&e!==null&&e.$$typeof===rp}function D9(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ZA=/\/+/g;function N0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?D9(""+e.key):t.toString(36)}function Jg(e,t,n,r,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case rp:case k9:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+N0(o,0):r,QA(a)?(n="",e!=null&&(n=e.replace(ZA,"$&/")+"/"),Jg(a,t,n,"",function(u){return u})):a!=null&&(nS(a)&&(a=M9(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(ZA,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",QA(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+N0(s,l);o+=Jg(s,t,n,c,a)}else if(c=R9(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+N0(s,l++),o+=Jg(s,t,n,c,a);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Gp(e,t,n){if(e==null)return e;var r=[],a=0;return Jg(e,r,"","",function(s){return t.call(n,s,a++)}),r}function $9(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ca={current:null},Qg={transition:null},L9={ReactCurrentDispatcher:ca,ReactCurrentBatchConfig:Qg,ReactCurrentOwner:tS};function fD(){throw Error("act(...) is not supported in production builds of React.")}Ut.Children={map:Gp,forEach:function(e,t,n){Gp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Gp(e,function(){t++}),t},toArray:function(e){return Gp(e,function(t){return t})||[]},only:function(e){if(!nS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ut.Component=nf;Ut.Fragment=S9;Ut.Profiler=C9;Ut.PureComponent=Zk;Ut.StrictMode=N9;Ut.Suspense=T9;Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L9;Ut.act=fD;Ut.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sD({},e.props),a=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=tS.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)cD.call(t,c)&&!uD.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:rp,type:e.type,key:a,ref:s,props:r,_owner:o}};Ut.createContext=function(e){return e={$$typeof:E9,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:A9,_context:e},e.Consumer=e};Ut.createElement=dD;Ut.createFactory=function(e){var t=dD.bind(null,e);return t.type=e,t};Ut.createRef=function(){return{current:null}};Ut.forwardRef=function(e){return{$$typeof:P9,render:e}};Ut.isValidElement=nS;Ut.lazy=function(e){return{$$typeof:I9,_payload:{_status:-1,_result:e},_init:$9}};Ut.memo=function(e,t){return{$$typeof:O9,type:e,compare:t===void 0?null:t}};Ut.startTransition=function(e){var t=Qg.transition;Qg.transition={};try{e()}finally{Qg.transition=t}};Ut.unstable_act=fD;Ut.useCallback=function(e,t){return ca.current.useCallback(e,t)};Ut.useContext=function(e){return ca.current.useContext(e)};Ut.useDebugValue=function(){};Ut.useDeferredValue=function(e){return ca.current.useDeferredValue(e)};Ut.useEffect=function(e,t){return ca.current.useEffect(e,t)};Ut.useId=function(){return ca.current.useId()};Ut.useImperativeHandle=function(e,t,n){return ca.current.useImperativeHandle(e,t,n)};Ut.useInsertionEffect=function(e,t){return ca.current.useInsertionEffect(e,t)};Ut.useLayoutEffect=function(e,t){return ca.current.useLayoutEffect(e,t)};Ut.useMemo=function(e,t){return ca.current.useMemo(e,t)};Ut.useReducer=function(e,t,n){return ca.current.useReducer(e,t,n)};Ut.useRef=function(e){return ca.current.useRef(e)};Ut.useState=function(e){return ca.current.useState(e)};Ut.useSyncExternalStore=function(e,t,n){return ca.current.useSyncExternalStore(e,t,n)};Ut.useTransition=function(){return ca.current.useTransition()};Ut.version="18.3.1";aD.exports=Ut;var p=aD.exports;const Y=un(p),rS=j9({__proto__:null,default:Y},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F9=p,B9=Symbol.for("react.element"),U9=Symbol.for("react.fragment"),z9=Object.prototype.hasOwnProperty,q9=F9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,W9={key:!0,ref:!0,__self:!0,__source:!0};function hD(e,t,n){var r,a={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)z9.call(t,r)&&!W9.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:B9,type:e,key:s,ref:o,props:a,_owner:q9.current}}hy.Fragment=U9;hy.jsx=hD;hy.jsxs=hD;rD.exports=hy;var i=rD.exports,mD={exports:{}},Xa={},pD={exports:{}},gD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,F){var C=O.length;O.push(F);e:for(;0<C;){var z=C-1>>>1,I=O[z];if(0<a(I,F))O[z]=F,O[C]=I,C=z;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var F=O[0],C=O.pop();if(C!==F){O[0]=C;e:for(var z=0,I=O.length,$=I>>>1;z<$;){var K=2*(z+1)-1,X=O[K],V=K+1,W=O[V];if(0>a(X,C))V<I&&0>a(W,X)?(O[z]=W,O[V]=C,z=V):(O[z]=X,O[K]=C,z=K);else if(V<I&&0>a(W,C))O[z]=W,O[V]=C,z=V;else break e}}return F}function a(O,F){var C=O.sortIndex-F.sortIndex;return C!==0?C:O.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,d=null,h=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=O)r(u),F.sortIndex=F.expirationTime,t(c,F);else break;F=n(u)}}function k(O){if(v=!1,w(O),!g)if(n(c)!==null)g=!0,U(j);else{var F=n(u);F!==null&&L(k,F.startTime-O)}}function j(O,F){g=!1,v&&(v=!1,y(T),T=-1),m=!0;var C=h;try{for(w(F),d=n(c);d!==null&&(!(d.expirationTime>F)||O&&!D());){var z=d.callback;if(typeof z=="function"){d.callback=null,h=d.priorityLevel;var I=z(d.expirationTime<=F);F=e.unstable_now(),typeof I=="function"?d.callback=I:d===n(c)&&r(c),w(F)}else r(c);d=n(c)}if(d!==null)var $=!0;else{var K=n(u);K!==null&&L(k,K.startTime-F),$=!1}return $}finally{d=null,h=C,m=!1}}var _=!1,S=null,T=-1,N=5,A=-1;function D(){return!(e.unstable_now()-A<N)}function B(){if(S!==null){var O=e.unstable_now();A=O;var F=!0;try{F=S(!0,O)}finally{F?E():(_=!1,S=null)}}else _=!1}var E;if(typeof b=="function")E=function(){b(B)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,P=R.port2;R.port1.onmessage=B,E=function(){P.postMessage(null)}}else E=function(){x(B,0)};function U(O){S=O,_||(_=!0,E())}function L(O,F){T=x(function(){O(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,U(j))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var C=h;h=F;try{return O()}finally{h=C}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,F){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var C=h;h=O;try{return F()}finally{h=C}},e.unstable_scheduleCallback=function(O,F,C){var z=e.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?z+C:z):C=z,O){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=C+I,O={id:f++,callback:F,priorityLevel:O,startTime:C,expirationTime:I,sortIndex:-1},C>z?(O.sortIndex=C,t(u,O),n(c)===null&&O===n(u)&&(v?(y(T),T=-1):v=!0,L(k,C-z))):(O.sortIndex=I,t(c,O),g||m||(g=!0,U(j))),O},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(O){var F=h;return function(){var C=h;h=F;try{return O.apply(this,arguments)}finally{h=C}}}})(gD);pD.exports=gD;var H9=pD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V9=p,Ga=H9;function Re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vD=new Set,Dh={};function Vc(e,t){xd(e,t),xd(e+"Capture",t)}function xd(e,t){for(Dh[e]=t,e=0;e<t.length;e++)vD.add(t[e])}var co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oj=Object.prototype.hasOwnProperty,K9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eE={},tE={};function G9(e){return Oj.call(tE,e)?!0:Oj.call(eE,e)?!1:K9.test(e)?tE[e]=!0:(eE[e]=!0,!1)}function Y9(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function X9(e,t,n,r){if(t===null||typeof t>"u"||Y9(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ua(e,t,n,r,a,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Or={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Or[e]=new ua(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Or[t]=new ua(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Or[e]=new ua(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Or[e]=new ua(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Or[e]=new ua(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Or[e]=new ua(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Or[e]=new ua(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Or[e]=new ua(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Or[e]=new ua(e,5,!1,e.toLowerCase(),null,!1,!1)});var aS=/[\-:]([a-z])/g;function iS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(aS,iS);Or[t]=new ua(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(aS,iS);Or[t]=new ua(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(aS,iS);Or[t]=new ua(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Or[e]=new ua(e,1,!1,e.toLowerCase(),null,!1,!1)});Or.xlinkHref=new ua("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Or[e]=new ua(e,1,!1,e.toLowerCase(),null,!0,!0)});function sS(e,t,n,r){var a=Or.hasOwnProperty(t)?Or[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(X9(t,n,a,r)&&(n=null),r||a===null?G9(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var jo=V9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yp=Symbol.for("react.element"),Tu=Symbol.for("react.portal"),Ou=Symbol.for("react.fragment"),oS=Symbol.for("react.strict_mode"),Ij=Symbol.for("react.profiler"),xD=Symbol.for("react.provider"),yD=Symbol.for("react.context"),lS=Symbol.for("react.forward_ref"),Rj=Symbol.for("react.suspense"),Mj=Symbol.for("react.suspense_list"),cS=Symbol.for("react.memo"),Uo=Symbol.for("react.lazy"),bD=Symbol.for("react.offscreen"),nE=Symbol.iterator;function Ef(e){return e===null||typeof e!="object"?null:(e=nE&&e[nE]||e["@@iterator"],typeof e=="function"?e:null)}var Fn=Object.assign,C0;function sh(e){if(C0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);C0=t&&t[1]||""}return`
`+C0+e}var A0=!1;function E0(e,t){if(!e||A0)return"";A0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=r.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{A0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?sh(e):""}function J9(e){switch(e.tag){case 5:return sh(e.type);case 16:return sh("Lazy");case 13:return sh("Suspense");case 19:return sh("SuspenseList");case 0:case 2:case 15:return e=E0(e.type,!1),e;case 11:return e=E0(e.type.render,!1),e;case 1:return e=E0(e.type,!0),e;default:return""}}function Dj(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ou:return"Fragment";case Tu:return"Portal";case Ij:return"Profiler";case oS:return"StrictMode";case Rj:return"Suspense";case Mj:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yD:return(e.displayName||"Context")+".Consumer";case xD:return(e._context.displayName||"Context")+".Provider";case lS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case cS:return t=e.displayName||null,t!==null?t:Dj(e.type)||"Memo";case Uo:t=e._payload,e=e._init;try{return Dj(e(t))}catch{}}return null}function Q9(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Dj(t);case 8:return t===oS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Z9(e){var t=wD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xp(e){e._valueTracker||(e._valueTracker=Z9(e))}function jD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=wD(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function wv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $j(e,t){var n=t.checked;return Fn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=pl(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _D(e,t){t=t.checked,t!=null&&sS(e,"checked",t,!1)}function Lj(e,t){_D(e,t);var n=pl(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fj(e,t.type,n):t.hasOwnProperty("defaultValue")&&Fj(e,t.type,pl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function aE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Fj(e,t,n){(t!=="number"||wv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var oh=Array.isArray;function Ku(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+pl(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Bj(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Re(91));return Fn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function iE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Re(92));if(oh(n)){if(1<n.length)throw Error(Re(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:pl(n)}}function kD(e,t){var n=pl(t.value),r=pl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function SD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uj(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?SD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jp,ND=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Jp=Jp||document.createElement("div"),Jp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $h(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eH=["Webkit","ms","Moz","O"];Object.keys(gh).forEach(function(e){eH.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gh[t]=gh[e]})});function CD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gh.hasOwnProperty(e)&&gh[e]?(""+t).trim():t+"px"}function AD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=CD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var tH=Fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zj(e,t){if(t){if(tH[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Re(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Re(62))}}function qj(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wj=null;function uS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hj=null,Gu=null,Yu=null;function oE(e){if(e=sp(e)){if(typeof Hj!="function")throw Error(Re(280));var t=e.stateNode;t&&(t=xy(t),Hj(e.stateNode,e.type,t))}}function ED(e){Gu?Yu?Yu.push(e):Yu=[e]:Gu=e}function PD(){if(Gu){var e=Gu,t=Yu;if(Yu=Gu=null,oE(e),t)for(e=0;e<t.length;e++)oE(t[e])}}function TD(e,t){return e(t)}function OD(){}var P0=!1;function ID(e,t,n){if(P0)return e(t,n);P0=!0;try{return TD(e,t,n)}finally{P0=!1,(Gu!==null||Yu!==null)&&(OD(),PD())}}function Lh(e,t){var n=e.stateNode;if(n===null)return null;var r=xy(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Re(231,t,typeof n));return n}var Vj=!1;if(co)try{var Pf={};Object.defineProperty(Pf,"passive",{get:function(){Vj=!0}}),window.addEventListener("test",Pf,Pf),window.removeEventListener("test",Pf,Pf)}catch{Vj=!1}function nH(e,t,n,r,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var vh=!1,jv=null,_v=!1,Kj=null,rH={onError:function(e){vh=!0,jv=e}};function aH(e,t,n,r,a,s,o,l,c){vh=!1,jv=null,nH.apply(rH,arguments)}function iH(e,t,n,r,a,s,o,l,c){if(aH.apply(this,arguments),vh){if(vh){var u=jv;vh=!1,jv=null}else throw Error(Re(198));_v||(_v=!0,Kj=u)}}function Kc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function RD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lE(e){if(Kc(e)!==e)throw Error(Re(188))}function sH(e){var t=e.alternate;if(!t){if(t=Kc(e),t===null)throw Error(Re(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return lE(a),e;if(s===r)return lE(a),t;s=s.sibling}throw Error(Re(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o)throw Error(Re(189))}}if(n.alternate!==r)throw Error(Re(190))}if(n.tag!==3)throw Error(Re(188));return n.stateNode.current===n?e:t}function MD(e){return e=sH(e),e!==null?DD(e):null}function DD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=DD(e);if(t!==null)return t;e=e.sibling}return null}var $D=Ga.unstable_scheduleCallback,cE=Ga.unstable_cancelCallback,oH=Ga.unstable_shouldYield,lH=Ga.unstable_requestPaint,Jn=Ga.unstable_now,cH=Ga.unstable_getCurrentPriorityLevel,dS=Ga.unstable_ImmediatePriority,LD=Ga.unstable_UserBlockingPriority,kv=Ga.unstable_NormalPriority,uH=Ga.unstable_LowPriority,FD=Ga.unstable_IdlePriority,my=null,_s=null;function dH(e){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(my,e,void 0,(e.current.flags&128)===128)}catch{}}var Yi=Math.clz32?Math.clz32:mH,fH=Math.log,hH=Math.LN2;function mH(e){return e>>>=0,e===0?32:31-(fH(e)/hH|0)|0}var Qp=64,Zp=4194304;function lh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Sv(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=lh(l):(s&=o,s!==0&&(r=lh(s)))}else o=n&~a,o!==0?r=lh(o):s!==0&&(r=lh(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,s=t&-t,a>=s||a===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Yi(t),a=1<<n,r|=e[n],t&=~a;return r}function pH(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gH(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Yi(s),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=pH(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function Gj(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function BD(){var e=Qp;return Qp<<=1,!(Qp&4194240)&&(Qp=64),e}function T0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ap(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yi(t),e[t]=n}function vH(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Yi(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}function fS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Yi(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var hn=0;function UD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var zD,hS,qD,WD,HD,Yj=!1,eg=[],rl=null,al=null,il=null,Fh=new Map,Bh=new Map,Wo=[],xH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uE(e,t){switch(e){case"focusin":case"focusout":rl=null;break;case"dragenter":case"dragleave":al=null;break;case"mouseover":case"mouseout":il=null;break;case"pointerover":case"pointerout":Fh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bh.delete(t.pointerId)}}function Tf(e,t,n,r,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},t!==null&&(t=sp(t),t!==null&&hS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function yH(e,t,n,r,a){switch(t){case"focusin":return rl=Tf(rl,e,t,n,r,a),!0;case"dragenter":return al=Tf(al,e,t,n,r,a),!0;case"mouseover":return il=Tf(il,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Fh.set(s,Tf(Fh.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Bh.set(s,Tf(Bh.get(s)||null,e,t,n,r,a)),!0}return!1}function VD(e){var t=ic(e.target);if(t!==null){var n=Kc(t);if(n!==null){if(t=n.tag,t===13){if(t=RD(n),t!==null){e.blockedOn=t,HD(e.priority,function(){qD(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xj(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Wj=r,n.target.dispatchEvent(r),Wj=null}else return t=sp(n),t!==null&&hS(t),e.blockedOn=n,!1;t.shift()}return!0}function dE(e,t,n){Zg(e)&&n.delete(t)}function bH(){Yj=!1,rl!==null&&Zg(rl)&&(rl=null),al!==null&&Zg(al)&&(al=null),il!==null&&Zg(il)&&(il=null),Fh.forEach(dE),Bh.forEach(dE)}function Of(e,t){e.blockedOn===t&&(e.blockedOn=null,Yj||(Yj=!0,Ga.unstable_scheduleCallback(Ga.unstable_NormalPriority,bH)))}function Uh(e){function t(a){return Of(a,e)}if(0<eg.length){Of(eg[0],e);for(var n=1;n<eg.length;n++){var r=eg[n];r.blockedOn===e&&(r.blockedOn=null)}}for(rl!==null&&Of(rl,e),al!==null&&Of(al,e),il!==null&&Of(il,e),Fh.forEach(t),Bh.forEach(t),n=0;n<Wo.length;n++)r=Wo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Wo.length&&(n=Wo[0],n.blockedOn===null);)VD(n),n.blockedOn===null&&Wo.shift()}var Xu=jo.ReactCurrentBatchConfig,Nv=!0;function wH(e,t,n,r){var a=hn,s=Xu.transition;Xu.transition=null;try{hn=1,mS(e,t,n,r)}finally{hn=a,Xu.transition=s}}function jH(e,t,n,r){var a=hn,s=Xu.transition;Xu.transition=null;try{hn=4,mS(e,t,n,r)}finally{hn=a,Xu.transition=s}}function mS(e,t,n,r){if(Nv){var a=Xj(e,t,n,r);if(a===null)U0(e,t,r,Cv,n),uE(e,r);else if(yH(a,e,t,n,r))r.stopPropagation();else if(uE(e,r),t&4&&-1<xH.indexOf(e)){for(;a!==null;){var s=sp(a);if(s!==null&&zD(s),s=Xj(e,t,n,r),s===null&&U0(e,t,r,Cv,n),s===a)break;a=s}a!==null&&r.stopPropagation()}else U0(e,t,r,null,n)}}var Cv=null;function Xj(e,t,n,r){if(Cv=null,e=uS(r),e=ic(e),e!==null)if(t=Kc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=RD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Cv=e,null}function KD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cH()){case dS:return 1;case LD:return 4;case kv:case uH:return 16;case FD:return 536870912;default:return 16}default:return 16}}var Zo=null,pS=null,ev=null;function GD(){if(ev)return ev;var e,t=pS,n=t.length,r,a="value"in Zo?Zo.value:Zo.textContent,s=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[s-r];r++);return ev=a.slice(e,1<r?1-r:void 0)}function tv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tg(){return!0}function fE(){return!1}function Ja(e){function t(n,r,a,s,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tg:fE,this.isPropagationStopped=fE,this}return Fn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tg)},persist:function(){},isPersistent:tg}),t}var rf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gS=Ja(rf),ip=Fn({},rf,{view:0,detail:0}),_H=Ja(ip),O0,I0,If,py=Fn({},ip,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==If&&(If&&e.type==="mousemove"?(O0=e.screenX-If.screenX,I0=e.screenY-If.screenY):I0=O0=0,If=e),O0)},movementY:function(e){return"movementY"in e?e.movementY:I0}}),hE=Ja(py),kH=Fn({},py,{dataTransfer:0}),SH=Ja(kH),NH=Fn({},ip,{relatedTarget:0}),R0=Ja(NH),CH=Fn({},rf,{animationName:0,elapsedTime:0,pseudoElement:0}),AH=Ja(CH),EH=Fn({},rf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),PH=Ja(EH),TH=Fn({},rf,{data:0}),mE=Ja(TH),OH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RH[e])?!!t[e]:!1}function vS(){return MH}var DH=Fn({},ip,{key:function(e){if(e.key){var t=OH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?IH[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vS,charCode:function(e){return e.type==="keypress"?tv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$H=Ja(DH),LH=Fn({},py,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pE=Ja(LH),FH=Fn({},ip,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vS}),BH=Ja(FH),UH=Fn({},rf,{propertyName:0,elapsedTime:0,pseudoElement:0}),zH=Ja(UH),qH=Fn({},py,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),WH=Ja(qH),HH=[9,13,27,32],xS=co&&"CompositionEvent"in window,xh=null;co&&"documentMode"in document&&(xh=document.documentMode);var VH=co&&"TextEvent"in window&&!xh,YD=co&&(!xS||xh&&8<xh&&11>=xh),gE=" ",vE=!1;function XD(e,t){switch(e){case"keyup":return HH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Iu=!1;function KH(e,t){switch(e){case"compositionend":return JD(t);case"keypress":return t.which!==32?null:(vE=!0,gE);case"textInput":return e=t.data,e===gE&&vE?null:e;default:return null}}function GH(e,t){if(Iu)return e==="compositionend"||!xS&&XD(e,t)?(e=GD(),ev=pS=Zo=null,Iu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return YD&&t.locale!=="ko"?null:t.data;default:return null}}var YH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!YH[e.type]:t==="textarea"}function QD(e,t,n,r){ED(r),t=Av(t,"onChange"),0<t.length&&(n=new gS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var yh=null,zh=null;function XH(e){c$(e,0)}function gy(e){var t=Du(e);if(jD(t))return e}function JH(e,t){if(e==="change")return t}var ZD=!1;if(co){var M0;if(co){var D0="oninput"in document;if(!D0){var yE=document.createElement("div");yE.setAttribute("oninput","return;"),D0=typeof yE.oninput=="function"}M0=D0}else M0=!1;ZD=M0&&(!document.documentMode||9<document.documentMode)}function bE(){yh&&(yh.detachEvent("onpropertychange",e$),zh=yh=null)}function e$(e){if(e.propertyName==="value"&&gy(zh)){var t=[];QD(t,zh,e,uS(e)),ID(XH,t)}}function QH(e,t,n){e==="focusin"?(bE(),yh=t,zh=n,yh.attachEvent("onpropertychange",e$)):e==="focusout"&&bE()}function ZH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gy(zh)}function e7(e,t){if(e==="click")return gy(t)}function t7(e,t){if(e==="input"||e==="change")return gy(t)}function n7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var es=typeof Object.is=="function"?Object.is:n7;function qh(e,t){if(es(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Oj.call(t,a)||!es(e[a],t[a]))return!1}return!0}function wE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jE(e,t){var n=wE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wE(n)}}function t$(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?t$(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function n$(){for(var e=window,t=wv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=wv(e.document)}return t}function yS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function r7(e){var t=n$(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&t$(n.ownerDocument.documentElement,n)){if(r!==null&&yS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=r.end===void 0?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=jE(n,s);var o=jE(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var a7=co&&"documentMode"in document&&11>=document.documentMode,Ru=null,Jj=null,bh=null,Qj=!1;function _E(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qj||Ru==null||Ru!==wv(r)||(r=Ru,"selectionStart"in r&&yS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),bh&&qh(bh,r)||(bh=r,r=Av(Jj,"onSelect"),0<r.length&&(t=new gS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ru)))}function ng(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Mu={animationend:ng("Animation","AnimationEnd"),animationiteration:ng("Animation","AnimationIteration"),animationstart:ng("Animation","AnimationStart"),transitionend:ng("Transition","TransitionEnd")},$0={},r$={};co&&(r$=document.createElement("div").style,"AnimationEvent"in window||(delete Mu.animationend.animation,delete Mu.animationiteration.animation,delete Mu.animationstart.animation),"TransitionEvent"in window||delete Mu.transitionend.transition);function vy(e){if($0[e])return $0[e];if(!Mu[e])return e;var t=Mu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in r$)return $0[e]=t[n];return e}var a$=vy("animationend"),i$=vy("animationiteration"),s$=vy("animationstart"),o$=vy("transitionend"),l$=new Map,kE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sl(e,t){l$.set(e,t),Vc(t,[e])}for(var L0=0;L0<kE.length;L0++){var F0=kE[L0],i7=F0.toLowerCase(),s7=F0[0].toUpperCase()+F0.slice(1);Sl(i7,"on"+s7)}Sl(a$,"onAnimationEnd");Sl(i$,"onAnimationIteration");Sl(s$,"onAnimationStart");Sl("dblclick","onDoubleClick");Sl("focusin","onFocus");Sl("focusout","onBlur");Sl(o$,"onTransitionEnd");xd("onMouseEnter",["mouseout","mouseover"]);xd("onMouseLeave",["mouseout","mouseover"]);xd("onPointerEnter",["pointerout","pointerover"]);xd("onPointerLeave",["pointerout","pointerover"]);Vc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o7=new Set("cancel close invalid load scroll toggle".split(" ").concat(ch));function SE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,iH(r,t,void 0,e),e.currentTarget=null}function c$(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;SE(a,l,u),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;SE(a,l,u),s=c}}}if(_v)throw e=Kj,_v=!1,Kj=null,e}function Sn(e,t){var n=t[r1];n===void 0&&(n=t[r1]=new Set);var r=e+"__bubble";n.has(r)||(u$(t,e,2,!1),n.add(r))}function B0(e,t,n){var r=0;t&&(r|=4),u$(n,e,r,t)}var rg="_reactListening"+Math.random().toString(36).slice(2);function Wh(e){if(!e[rg]){e[rg]=!0,vD.forEach(function(n){n!=="selectionchange"&&(o7.has(n)||B0(n,!1,e),B0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[rg]||(t[rg]=!0,B0("selectionchange",!1,t))}}function u$(e,t,n,r){switch(KD(t)){case 1:var a=wH;break;case 4:a=jH;break;default:a=mS}n=a.bind(null,t,n,e),a=void 0,!Vj||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function U0(e,t,n,r,a){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=ic(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}ID(function(){var u=s,f=uS(n),d=[];e:{var h=l$.get(e);if(h!==void 0){var m=gS,g=e;switch(e){case"keypress":if(tv(n)===0)break e;case"keydown":case"keyup":m=$H;break;case"focusin":g="focus",m=R0;break;case"focusout":g="blur",m=R0;break;case"beforeblur":case"afterblur":m=R0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=hE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=SH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=BH;break;case a$:case i$:case s$:m=AH;break;case o$:m=zH;break;case"scroll":m=_H;break;case"wheel":m=WH;break;case"copy":case"cut":case"paste":m=PH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=pE}var v=(t&4)!==0,x=!v&&e==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var b=u,w;b!==null;){w=b;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,y!==null&&(k=Lh(b,y),k!=null&&v.push(Hh(b,k,w)))),x)break;b=b.return}0<v.length&&(h=new m(h,g,null,n,f),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==Wj&&(g=n.relatedTarget||n.fromElement)&&(ic(g)||g[uo]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?ic(g):null,g!==null&&(x=Kc(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=hE,k="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=pE,k="onPointerLeave",y="onPointerEnter",b="pointer"),x=m==null?h:Du(m),w=g==null?h:Du(g),h=new v(k,b+"leave",m,n,f),h.target=x,h.relatedTarget=w,k=null,ic(f)===u&&(v=new v(y,b+"enter",g,n,f),v.target=w,v.relatedTarget=x,k=v),x=k,m&&g)t:{for(v=m,y=g,b=0,w=v;w;w=su(w))b++;for(w=0,k=y;k;k=su(k))w++;for(;0<b-w;)v=su(v),b--;for(;0<w-b;)y=su(y),w--;for(;b--;){if(v===y||y!==null&&v===y.alternate)break t;v=su(v),y=su(y)}v=null}else v=null;m!==null&&NE(d,h,m,v,!1),g!==null&&x!==null&&NE(d,x,g,v,!0)}}e:{if(h=u?Du(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=JH;else if(xE(h))if(ZD)j=t7;else{j=ZH;var _=QH}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=e7);if(j&&(j=j(e,u))){QD(d,j,n,f);break e}_&&_(e,h,u),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&Fj(h,"number",h.value)}switch(_=u?Du(u):window,e){case"focusin":(xE(_)||_.contentEditable==="true")&&(Ru=_,Jj=u,bh=null);break;case"focusout":bh=Jj=Ru=null;break;case"mousedown":Qj=!0;break;case"contextmenu":case"mouseup":case"dragend":Qj=!1,_E(d,n,f);break;case"selectionchange":if(a7)break;case"keydown":case"keyup":_E(d,n,f)}var S;if(xS)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Iu?XD(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(YD&&n.locale!=="ko"&&(Iu||T!=="onCompositionStart"?T==="onCompositionEnd"&&Iu&&(S=GD()):(Zo=f,pS="value"in Zo?Zo.value:Zo.textContent,Iu=!0)),_=Av(u,T),0<_.length&&(T=new mE(T,e,null,n,f),d.push({event:T,listeners:_}),S?T.data=S:(S=JD(n),S!==null&&(T.data=S)))),(S=VH?KH(e,n):GH(e,n))&&(u=Av(u,"onBeforeInput"),0<u.length&&(f=new mE("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=S))}c$(d,t)})}function Hh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Av(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Lh(e,n),s!=null&&r.unshift(Hh(e,s,a)),s=Lh(e,t),s!=null&&r.push(Hh(e,s,a))),e=e.return}return r}function su(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function NE(e,t,n,r,a){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,a?(c=Lh(n,s),c!=null&&o.unshift(Hh(n,c,l))):a||(c=Lh(n,s),c!=null&&o.push(Hh(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var l7=/\r\n?/g,c7=/\u0000|\uFFFD/g;function CE(e){return(typeof e=="string"?e:""+e).replace(l7,`
`).replace(c7,"")}function ag(e,t,n){if(t=CE(t),CE(e)!==t&&n)throw Error(Re(425))}function Ev(){}var Zj=null,e1=null;function t1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var n1=typeof setTimeout=="function"?setTimeout:void 0,u7=typeof clearTimeout=="function"?clearTimeout:void 0,AE=typeof Promise=="function"?Promise:void 0,d7=typeof queueMicrotask=="function"?queueMicrotask:typeof AE<"u"?function(e){return AE.resolve(null).then(e).catch(f7)}:n1;function f7(e){setTimeout(function(){throw e})}function z0(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Uh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Uh(t)}function sl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function EE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var af=Math.random().toString(36).slice(2),xs="__reactFiber$"+af,Vh="__reactProps$"+af,uo="__reactContainer$"+af,r1="__reactEvents$"+af,h7="__reactListeners$"+af,m7="__reactHandles$"+af;function ic(e){var t=e[xs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[uo]||n[xs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=EE(e);e!==null;){if(n=e[xs])return n;e=EE(e)}return t}e=n,n=e.parentNode}return null}function sp(e){return e=e[xs]||e[uo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Du(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Re(33))}function xy(e){return e[Vh]||null}var a1=[],$u=-1;function Nl(e){return{current:e}}function An(e){0>$u||(e.current=a1[$u],a1[$u]=null,$u--)}function jn(e,t){$u++,a1[$u]=e.current,e.current=t}var gl={},Yr=Nl(gl),Na=Nl(!1),jc=gl;function yd(e,t){var n=e.type.contextTypes;if(!n)return gl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in n)a[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ca(e){return e=e.childContextTypes,e!=null}function Pv(){An(Na),An(Yr)}function PE(e,t,n){if(Yr.current!==gl)throw Error(Re(168));jn(Yr,t),jn(Na,n)}function d$(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Re(108,Q9(e)||"Unknown",a));return Fn({},n,r)}function Tv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gl,jc=Yr.current,jn(Yr,e),jn(Na,Na.current),!0}function TE(e,t,n){var r=e.stateNode;if(!r)throw Error(Re(169));n?(e=d$(e,t,jc),r.__reactInternalMemoizedMergedChildContext=e,An(Na),An(Yr),jn(Yr,e)):An(Na),jn(Na,n)}var Ws=null,yy=!1,q0=!1;function f$(e){Ws===null?Ws=[e]:Ws.push(e)}function p7(e){yy=!0,f$(e)}function Cl(){if(!q0&&Ws!==null){q0=!0;var e=0,t=hn;try{var n=Ws;for(hn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ws=null,yy=!1}catch(a){throw Ws!==null&&(Ws=Ws.slice(e+1)),$D(dS,Cl),a}finally{hn=t,q0=!1}}return null}var Lu=[],Fu=0,Ov=null,Iv=0,li=[],ci=0,_c=null,Gs=1,Ys="";function Kl(e,t){Lu[Fu++]=Iv,Lu[Fu++]=Ov,Ov=e,Iv=t}function h$(e,t,n){li[ci++]=Gs,li[ci++]=Ys,li[ci++]=_c,_c=e;var r=Gs;e=Ys;var a=32-Yi(r)-1;r&=~(1<<a),n+=1;var s=32-Yi(t)+a;if(30<s){var o=a-a%5;s=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Gs=1<<32-Yi(t)+a|n<<a|r,Ys=s+e}else Gs=1<<s|n<<a|r,Ys=e}function bS(e){e.return!==null&&(Kl(e,1),h$(e,1,0))}function wS(e){for(;e===Ov;)Ov=Lu[--Fu],Lu[Fu]=null,Iv=Lu[--Fu],Lu[Fu]=null;for(;e===_c;)_c=li[--ci],li[ci]=null,Ys=li[--ci],li[ci]=null,Gs=li[--ci],li[ci]=null}var Ha=null,qa=null,Rn=!1,Hi=null;function m$(e,t){var n=fi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function OE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ha=e,qa=sl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ha=e,qa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=_c!==null?{id:Gs,overflow:Ys}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=fi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ha=e,qa=null,!0):!1;default:return!1}}function i1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function s1(e){if(Rn){var t=qa;if(t){var n=t;if(!OE(e,t)){if(i1(e))throw Error(Re(418));t=sl(n.nextSibling);var r=Ha;t&&OE(e,t)?m$(r,n):(e.flags=e.flags&-4097|2,Rn=!1,Ha=e)}}else{if(i1(e))throw Error(Re(418));e.flags=e.flags&-4097|2,Rn=!1,Ha=e}}}function IE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ha=e}function ig(e){if(e!==Ha)return!1;if(!Rn)return IE(e),Rn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!t1(e.type,e.memoizedProps)),t&&(t=qa)){if(i1(e))throw p$(),Error(Re(418));for(;t;)m$(e,t),t=sl(t.nextSibling)}if(IE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){qa=sl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}qa=null}}else qa=Ha?sl(e.stateNode.nextSibling):null;return!0}function p$(){for(var e=qa;e;)e=sl(e.nextSibling)}function bd(){qa=Ha=null,Rn=!1}function jS(e){Hi===null?Hi=[e]:Hi.push(e)}var g7=jo.ReactCurrentBatchConfig;function Rf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Re(309));var r=n.stateNode}if(!r)throw Error(Re(147,e));var a=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Re(284));if(!n._owner)throw Error(Re(290,e))}return e}function sg(e,t){throw e=Object.prototype.toString.call(t),Error(Re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function RE(e){var t=e._init;return t(e._payload)}function g$(e){function t(y,b){if(e){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function a(y,b){return y=ul(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,b,w,k){return b===null||b.tag!==6?(b=X0(w,y.mode,k),b.return=y,b):(b=a(b,w),b.return=y,b)}function c(y,b,w,k){var j=w.type;return j===Ou?f(y,b,w.props.children,k,w.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Uo&&RE(j)===b.type)?(k=a(b,w.props),k.ref=Rf(y,b,w),k.return=y,k):(k=lv(w.type,w.key,w.props,null,y.mode,k),k.ref=Rf(y,b,w),k.return=y,k)}function u(y,b,w,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=J0(w,y.mode,k),b.return=y,b):(b=a(b,w.children||[]),b.return=y,b)}function f(y,b,w,k,j){return b===null||b.tag!==7?(b=yc(w,y.mode,k,j),b.return=y,b):(b=a(b,w),b.return=y,b)}function d(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=X0(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Yp:return w=lv(b.type,b.key,b.props,null,y.mode,w),w.ref=Rf(y,null,b),w.return=y,w;case Tu:return b=J0(b,y.mode,w),b.return=y,b;case Uo:var k=b._init;return d(y,k(b._payload),w)}if(oh(b)||Ef(b))return b=yc(b,y.mode,w,null),b.return=y,b;sg(y,b)}return null}function h(y,b,w,k){var j=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(y,b,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yp:return w.key===j?c(y,b,w,k):null;case Tu:return w.key===j?u(y,b,w,k):null;case Uo:return j=w._init,h(y,b,j(w._payload),k)}if(oh(w)||Ef(w))return j!==null?null:f(y,b,w,k,null);sg(y,w)}return null}function m(y,b,w,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(w)||null,l(b,y,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Yp:return y=y.get(k.key===null?w:k.key)||null,c(b,y,k,j);case Tu:return y=y.get(k.key===null?w:k.key)||null,u(b,y,k,j);case Uo:var _=k._init;return m(y,b,w,_(k._payload),j)}if(oh(k)||Ef(k))return y=y.get(w)||null,f(b,y,k,j,null);sg(b,k)}return null}function g(y,b,w,k){for(var j=null,_=null,S=b,T=b=0,N=null;S!==null&&T<w.length;T++){S.index>T?(N=S,S=null):N=S.sibling;var A=h(y,S,w[T],k);if(A===null){S===null&&(S=N);break}e&&S&&A.alternate===null&&t(y,S),b=s(A,b,T),_===null?j=A:_.sibling=A,_=A,S=N}if(T===w.length)return n(y,S),Rn&&Kl(y,T),j;if(S===null){for(;T<w.length;T++)S=d(y,w[T],k),S!==null&&(b=s(S,b,T),_===null?j=S:_.sibling=S,_=S);return Rn&&Kl(y,T),j}for(S=r(y,S);T<w.length;T++)N=m(S,y,T,w[T],k),N!==null&&(e&&N.alternate!==null&&S.delete(N.key===null?T:N.key),b=s(N,b,T),_===null?j=N:_.sibling=N,_=N);return e&&S.forEach(function(D){return t(y,D)}),Rn&&Kl(y,T),j}function v(y,b,w,k){var j=Ef(w);if(typeof j!="function")throw Error(Re(150));if(w=j.call(w),w==null)throw Error(Re(151));for(var _=j=null,S=b,T=b=0,N=null,A=w.next();S!==null&&!A.done;T++,A=w.next()){S.index>T?(N=S,S=null):N=S.sibling;var D=h(y,S,A.value,k);if(D===null){S===null&&(S=N);break}e&&S&&D.alternate===null&&t(y,S),b=s(D,b,T),_===null?j=D:_.sibling=D,_=D,S=N}if(A.done)return n(y,S),Rn&&Kl(y,T),j;if(S===null){for(;!A.done;T++,A=w.next())A=d(y,A.value,k),A!==null&&(b=s(A,b,T),_===null?j=A:_.sibling=A,_=A);return Rn&&Kl(y,T),j}for(S=r(y,S);!A.done;T++,A=w.next())A=m(S,y,T,A.value,k),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?T:A.key),b=s(A,b,T),_===null?j=A:_.sibling=A,_=A);return e&&S.forEach(function(B){return t(y,B)}),Rn&&Kl(y,T),j}function x(y,b,w,k){if(typeof w=="object"&&w!==null&&w.type===Ou&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Yp:e:{for(var j=w.key,_=b;_!==null;){if(_.key===j){if(j=w.type,j===Ou){if(_.tag===7){n(y,_.sibling),b=a(_,w.props.children),b.return=y,y=b;break e}}else if(_.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Uo&&RE(j)===_.type){n(y,_.sibling),b=a(_,w.props),b.ref=Rf(y,_,w),b.return=y,y=b;break e}n(y,_);break}else t(y,_);_=_.sibling}w.type===Ou?(b=yc(w.props.children,y.mode,k,w.key),b.return=y,y=b):(k=lv(w.type,w.key,w.props,null,y.mode,k),k.ref=Rf(y,b,w),k.return=y,y=k)}return o(y);case Tu:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(y,b.sibling),b=a(b,w.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else t(y,b);b=b.sibling}b=J0(w,y.mode,k),b.return=y,y=b}return o(y);case Uo:return _=w._init,x(y,b,_(w._payload),k)}if(oh(w))return g(y,b,w,k);if(Ef(w))return v(y,b,w,k);sg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(y,b.sibling),b=a(b,w),b.return=y,y=b):(n(y,b),b=X0(w,y.mode,k),b.return=y,y=b),o(y)):n(y,b)}return x}var wd=g$(!0),v$=g$(!1),Rv=Nl(null),Mv=null,Bu=null,_S=null;function kS(){_S=Bu=Mv=null}function SS(e){var t=Rv.current;An(Rv),e._currentValue=t}function o1(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ju(e,t){Mv=e,_S=Bu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ja=!0),e.firstContext=null)}function bi(e){var t=e._currentValue;if(_S!==e)if(e={context:e,memoizedValue:t,next:null},Bu===null){if(Mv===null)throw Error(Re(308));Bu=e,Mv.dependencies={lanes:0,firstContext:e}}else Bu=Bu.next=e;return t}var sc=null;function NS(e){sc===null?sc=[e]:sc.push(e)}function x$(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,NS(t)):(n.next=a.next,a.next=n),t.interleaved=n,fo(e,r)}function fo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var zo=!1;function CS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function y$(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function no(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ol(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Yt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,fo(e,n)}return a=r.interleaved,a===null?(t.next=t,NS(r)):(t.next=a.next,a.next=t),r.interleaved=t,fo(e,n)}function nv(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fS(e,n)}}function ME(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?a=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?a=s=t:s=s.next=t}else a=s=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Dv(e,t,n,r){var a=e.updateQueue;zo=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(s!==null){var d=a.baseState;o=0,f=u=c=null,l=s;do{var h=l.lane,m=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(h=t,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=Fn({},d,h);break e;case 2:zo=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=m,c=d):f=f.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(f===null&&(c=d),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else s===null&&(a.shared.lanes=0);Sc|=o,e.lanes=o,e.memoizedState=d}}function DE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Re(191,a));a.call(r)}}}var op={},ks=Nl(op),Kh=Nl(op),Gh=Nl(op);function oc(e){if(e===op)throw Error(Re(174));return e}function AS(e,t){switch(jn(Gh,t),jn(Kh,e),jn(ks,op),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Uj(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Uj(t,e)}An(ks),jn(ks,t)}function jd(){An(ks),An(Kh),An(Gh)}function b$(e){oc(Gh.current);var t=oc(ks.current),n=Uj(t,e.type);t!==n&&(jn(Kh,e),jn(ks,n))}function ES(e){Kh.current===e&&(An(ks),An(Kh))}var $n=Nl(0);function $v(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var W0=[];function PS(){for(var e=0;e<W0.length;e++)W0[e]._workInProgressVersionPrimary=null;W0.length=0}var rv=jo.ReactCurrentDispatcher,H0=jo.ReactCurrentBatchConfig,kc=0,Ln=null,dr=null,vr=null,Lv=!1,wh=!1,Yh=0,v7=0;function Fr(){throw Error(Re(321))}function TS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!es(e[n],t[n]))return!1;return!0}function OS(e,t,n,r,a,s){if(kc=s,Ln=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rv.current=e===null||e.memoizedState===null?w7:j7,e=n(r,a),wh){s=0;do{if(wh=!1,Yh=0,25<=s)throw Error(Re(301));s+=1,vr=dr=null,t.updateQueue=null,rv.current=_7,e=n(r,a)}while(wh)}if(rv.current=Fv,t=dr!==null&&dr.next!==null,kc=0,vr=dr=Ln=null,Lv=!1,t)throw Error(Re(300));return e}function IS(){var e=Yh!==0;return Yh=0,e}function fs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?Ln.memoizedState=vr=e:vr=vr.next=e,vr}function wi(){if(dr===null){var e=Ln.alternate;e=e!==null?e.memoizedState:null}else e=dr.next;var t=vr===null?Ln.memoizedState:vr.next;if(t!==null)vr=t,dr=e;else{if(e===null)throw Error(Re(310));dr=e,e={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},vr===null?Ln.memoizedState=vr=e:vr=vr.next=e}return vr}function Xh(e,t){return typeof t=="function"?t(e):t}function V0(e){var t=wi(),n=t.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=e;var r=dr,a=r.baseQueue,s=n.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}r.baseQueue=a=s,n.pending=null}if(a!==null){s=a.next,r=r.baseState;var l=o=null,c=null,u=s;do{var f=u.lane;if((kc&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=r):c=c.next=d,Ln.lanes|=f,Sc|=f}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=l,es(r,t.memoizedState)||(ja=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do s=a.lane,Ln.lanes|=s,Sc|=s,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function K0(e){var t=wi(),n=t.queue;if(n===null)throw Error(Re(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do s=e(s,o.action),o=o.next;while(o!==a);es(s,t.memoizedState)||(ja=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function w$(){}function j$(e,t){var n=Ln,r=wi(),a=t(),s=!es(r.memoizedState,a);if(s&&(r.memoizedState=a,ja=!0),r=r.queue,RS(S$.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||vr!==null&&vr.memoizedState.tag&1){if(n.flags|=2048,Jh(9,k$.bind(null,n,r,a,t),void 0,null),yr===null)throw Error(Re(349));kc&30||_$(n,t,a)}return a}function _$(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ln.updateQueue,t===null?(t={lastEffect:null,stores:null},Ln.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function k$(e,t,n,r){t.value=n,t.getSnapshot=r,N$(t)&&C$(e)}function S$(e,t,n){return n(function(){N$(t)&&C$(e)})}function N$(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!es(e,n)}catch{return!0}}function C$(e){var t=fo(e,1);t!==null&&Xi(t,e,1,-1)}function $E(e){var t=fs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xh,lastRenderedState:e},t.queue=e,e=e.dispatch=b7.bind(null,Ln,e),[t.memoizedState,e]}function Jh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ln.updateQueue,t===null?(t={lastEffect:null,stores:null},Ln.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function A$(){return wi().memoizedState}function av(e,t,n,r){var a=fs();Ln.flags|=e,a.memoizedState=Jh(1|t,n,void 0,r===void 0?null:r)}function by(e,t,n,r){var a=wi();r=r===void 0?null:r;var s=void 0;if(dr!==null){var o=dr.memoizedState;if(s=o.destroy,r!==null&&TS(r,o.deps)){a.memoizedState=Jh(t,n,s,r);return}}Ln.flags|=e,a.memoizedState=Jh(1|t,n,s,r)}function LE(e,t){return av(8390656,8,e,t)}function RS(e,t){return by(2048,8,e,t)}function E$(e,t){return by(4,2,e,t)}function P$(e,t){return by(4,4,e,t)}function T$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function O$(e,t,n){return n=n!=null?n.concat([e]):null,by(4,4,T$.bind(null,t,e),n)}function MS(){}function I$(e,t){var n=wi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&TS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function R$(e,t){var n=wi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&TS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function M$(e,t,n){return kc&21?(es(n,t)||(n=BD(),Ln.lanes|=n,Sc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ja=!0),e.memoizedState=n)}function x7(e,t){var n=hn;hn=n!==0&&4>n?n:4,e(!0);var r=H0.transition;H0.transition={};try{e(!1),t()}finally{hn=n,H0.transition=r}}function D$(){return wi().memoizedState}function y7(e,t,n){var r=cl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$$(e))L$(t,n);else if(n=x$(e,t,n,r),n!==null){var a=la();Xi(n,e,r,a),F$(n,t,r)}}function b7(e,t,n){var r=cl(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($$(e))L$(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(a.hasEagerState=!0,a.eagerState=l,es(l,o)){var c=t.interleaved;c===null?(a.next=a,NS(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=x$(e,t,a,r),n!==null&&(a=la(),Xi(n,e,r,a),F$(n,t,r))}}function $$(e){var t=e.alternate;return e===Ln||t!==null&&t===Ln}function L$(e,t){wh=Lv=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function F$(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fS(e,n)}}var Fv={readContext:bi,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useInsertionEffect:Fr,useLayoutEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useMutableSource:Fr,useSyncExternalStore:Fr,useId:Fr,unstable_isNewReconciler:!1},w7={readContext:bi,useCallback:function(e,t){return fs().memoizedState=[e,t===void 0?null:t],e},useContext:bi,useEffect:LE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,av(4194308,4,T$.bind(null,t,e),n)},useLayoutEffect:function(e,t){return av(4194308,4,e,t)},useInsertionEffect:function(e,t){return av(4,2,e,t)},useMemo:function(e,t){var n=fs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=fs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=y7.bind(null,Ln,e),[r.memoizedState,e]},useRef:function(e){var t=fs();return e={current:e},t.memoizedState=e},useState:$E,useDebugValue:MS,useDeferredValue:function(e){return fs().memoizedState=e},useTransition:function(){var e=$E(!1),t=e[0];return e=x7.bind(null,e[1]),fs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ln,a=fs();if(Rn){if(n===void 0)throw Error(Re(407));n=n()}else{if(n=t(),yr===null)throw Error(Re(349));kc&30||_$(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,LE(S$.bind(null,r,s,e),[e]),r.flags|=2048,Jh(9,k$.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=fs(),t=yr.identifierPrefix;if(Rn){var n=Ys,r=Gs;n=(r&~(1<<32-Yi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Yh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=v7++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},j7={readContext:bi,useCallback:I$,useContext:bi,useEffect:RS,useImperativeHandle:O$,useInsertionEffect:E$,useLayoutEffect:P$,useMemo:R$,useReducer:V0,useRef:A$,useState:function(){return V0(Xh)},useDebugValue:MS,useDeferredValue:function(e){var t=wi();return M$(t,dr.memoizedState,e)},useTransition:function(){var e=V0(Xh)[0],t=wi().memoizedState;return[e,t]},useMutableSource:w$,useSyncExternalStore:j$,useId:D$,unstable_isNewReconciler:!1},_7={readContext:bi,useCallback:I$,useContext:bi,useEffect:RS,useImperativeHandle:O$,useInsertionEffect:E$,useLayoutEffect:P$,useMemo:R$,useReducer:K0,useRef:A$,useState:function(){return K0(Xh)},useDebugValue:MS,useDeferredValue:function(e){var t=wi();return dr===null?t.memoizedState=e:M$(t,dr.memoizedState,e)},useTransition:function(){var e=K0(Xh)[0],t=wi().memoizedState;return[e,t]},useMutableSource:w$,useSyncExternalStore:j$,useId:D$,unstable_isNewReconciler:!1};function $i(e,t){if(e&&e.defaultProps){t=Fn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function l1(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Fn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var wy={isMounted:function(e){return(e=e._reactInternals)?Kc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=la(),a=cl(e),s=no(r,a);s.payload=t,n!=null&&(s.callback=n),t=ol(e,s,a),t!==null&&(Xi(t,e,a,r),nv(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=la(),a=cl(e),s=no(r,a);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=ol(e,s,a),t!==null&&(Xi(t,e,a,r),nv(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=la(),r=cl(e),a=no(n,r);a.tag=2,t!=null&&(a.callback=t),t=ol(e,a,r),t!==null&&(Xi(t,e,r,n),nv(t,e,r))}};function FE(e,t,n,r,a,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!qh(n,r)||!qh(a,s):!0}function B$(e,t,n){var r=!1,a=gl,s=t.contextType;return typeof s=="object"&&s!==null?s=bi(s):(a=Ca(t)?jc:Yr.current,r=t.contextTypes,s=(r=r!=null)?yd(e,a):gl),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wy,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function BE(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wy.enqueueReplaceState(t,t.state,null)}function c1(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},CS(e);var s=t.contextType;typeof s=="object"&&s!==null?a.context=bi(s):(s=Ca(t)?jc:Yr.current,a.context=yd(e,s)),a.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(l1(e,t,s,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&wy.enqueueReplaceState(a,a.state,null),Dv(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function _d(e,t){try{var n="",r=t;do n+=J9(r),r=r.return;while(r);var a=n}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:a,digest:null}}function G0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function u1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var k7=typeof WeakMap=="function"?WeakMap:Map;function U$(e,t,n){n=no(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Uv||(Uv=!0,b1=r),u1(e,t)},n}function z$(e,t,n){n=no(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){u1(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){u1(e,t),typeof r!="function"&&(ll===null?ll=new Set([this]):ll.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function UE(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new k7;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=L7.bind(null,e,t,n),t.then(e,e))}function zE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qE(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=no(-1,1),t.tag=2,ol(n,t,1))),n.lanes|=1),e)}var S7=jo.ReactCurrentOwner,ja=!1;function ra(e,t,n,r){t.child=e===null?v$(t,null,n,r):wd(t,e.child,n,r)}function WE(e,t,n,r,a){n=n.render;var s=t.ref;return Ju(t,a),r=OS(e,t,n,r,s,a),n=IS(),e!==null&&!ja?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ho(e,t,a)):(Rn&&n&&bS(t),t.flags|=1,ra(e,t,r,a),t.child)}function HE(e,t,n,r,a){if(e===null){var s=n.type;return typeof s=="function"&&!qS(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,q$(e,t,s,r,a)):(e=lv(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&a)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:qh,n(o,r)&&e.ref===t.ref)return ho(e,t,a)}return t.flags|=1,e=ul(s,r),e.ref=t.ref,e.return=t,t.child=e}function q$(e,t,n,r,a){if(e!==null){var s=e.memoizedProps;if(qh(s,r)&&e.ref===t.ref)if(ja=!1,t.pendingProps=r=s,(e.lanes&a)!==0)e.flags&131072&&(ja=!0);else return t.lanes=e.lanes,ho(e,t,a)}return d1(e,t,n,r,a)}function W$(e,t,n){var r=t.pendingProps,a=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},jn(zu,La),La|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,jn(zu,La),La|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,jn(zu,La),La|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,jn(zu,La),La|=r;return ra(e,t,a,n),t.child}function H$(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function d1(e,t,n,r,a){var s=Ca(n)?jc:Yr.current;return s=yd(t,s),Ju(t,a),n=OS(e,t,n,r,s,a),r=IS(),e!==null&&!ja?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ho(e,t,a)):(Rn&&r&&bS(t),t.flags|=1,ra(e,t,n,a),t.child)}function VE(e,t,n,r,a){if(Ca(n)){var s=!0;Tv(t)}else s=!1;if(Ju(t,a),t.stateNode===null)iv(e,t),B$(t,n,r),c1(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=bi(u):(u=Ca(n)?jc:Yr.current,u=yd(t,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&BE(t,o,r,u),zo=!1;var h=t.memoizedState;o.state=h,Dv(t,r,o,a),c=t.memoizedState,l!==r||h!==c||Na.current||zo?(typeof f=="function"&&(l1(t,n,f,r),c=t.memoizedState),(l=zo||FE(t,n,l,r,h,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,y$(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:$i(t.type,l),o.props=u,d=t.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=bi(c):(c=Ca(n)?jc:Yr.current,c=yd(t,c));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==c)&&BE(t,o,r,c),zo=!1,h=t.memoizedState,o.state=h,Dv(t,r,o,a);var g=t.memoizedState;l!==d||h!==g||Na.current||zo?(typeof m=="function"&&(l1(t,n,m,r),g=t.memoizedState),(u=zo||FE(t,n,u,r,h,g,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return f1(e,t,n,r,s,a)}function f1(e,t,n,r,a,s){H$(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&TE(t,n,!1),ho(e,t,s);r=t.stateNode,S7.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=wd(t,e.child,null,s),t.child=wd(t,null,l,s)):ra(e,t,l,s),t.memoizedState=r.state,a&&TE(t,n,!0),t.child}function V$(e){var t=e.stateNode;t.pendingContext?PE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&PE(e,t.context,!1),AS(e,t.containerInfo)}function KE(e,t,n,r,a){return bd(),jS(a),t.flags|=256,ra(e,t,n,r),t.child}var h1={dehydrated:null,treeContext:null,retryLane:0};function m1(e){return{baseLanes:e,cachePool:null,transitions:null}}function K$(e,t,n){var r=t.pendingProps,a=$n.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),jn($n,a&1),e===null)return s1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ky(o,r,0,null),e=yc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=m1(n),t.memoizedState=h1,e):DS(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return N7(e,t,o,r,l,a,n);if(s){s=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=ul(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=ul(l,s):(s=yc(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?m1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=h1,r}return s=e.child,e=s.sibling,r=ul(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function DS(e,t){return t=ky({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function og(e,t,n,r){return r!==null&&jS(r),wd(t,e.child,null,n),e=DS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function N7(e,t,n,r,a,s,o){if(n)return t.flags&256?(t.flags&=-257,r=G0(Error(Re(422))),og(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=ky({mode:"visible",children:r.children},a,0,null),s=yc(s,a,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&wd(t,e.child,null,o),t.child.memoizedState=m1(o),t.memoizedState=h1,s);if(!(t.mode&1))return og(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(Re(419)),r=G0(s,r,void 0),og(e,t,o,r)}if(l=(o&e.childLanes)!==0,ja||l){if(r=yr,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,fo(e,a),Xi(r,e,a,-1))}return zS(),r=G0(Error(Re(421))),og(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=F7.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,qa=sl(a.nextSibling),Ha=t,Rn=!0,Hi=null,e!==null&&(li[ci++]=Gs,li[ci++]=Ys,li[ci++]=_c,Gs=e.id,Ys=e.overflow,_c=t),t=DS(t,r.children),t.flags|=4096,t)}function GE(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),o1(e.return,t,n)}function Y0(e,t,n,r,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function G$(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(ra(e,t,r.children,n),r=$n.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&GE(e,n,t);else if(e.tag===19)GE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(jn($n,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&$v(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Y0(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&$v(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Y0(t,!0,n,null,s);break;case"together":Y0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function iv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ho(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Sc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Re(153));if(t.child!==null){for(e=t.child,n=ul(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ul(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function C7(e,t,n){switch(t.tag){case 3:V$(t),bd();break;case 5:b$(t);break;case 1:Ca(t.type)&&Tv(t);break;case 4:AS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;jn(Rv,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(jn($n,$n.current&1),t.flags|=128,null):n&t.child.childLanes?K$(e,t,n):(jn($n,$n.current&1),e=ho(e,t,n),e!==null?e.sibling:null);jn($n,$n.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return G$(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),jn($n,$n.current),r)break;return null;case 22:case 23:return t.lanes=0,W$(e,t,n)}return ho(e,t,n)}var Y$,p1,X$,J$;Y$=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};p1=function(){};X$=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,oc(ks.current);var s=null;switch(n){case"input":a=$j(e,a),r=$j(e,r),s=[];break;case"select":a=Fn({},a,{value:void 0}),r=Fn({},r,{value:void 0}),s=[];break;case"textarea":a=Bj(e,a),r=Bj(e,r),s=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ev)}zj(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Dh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Dh.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Sn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};J$=function(e,t,n,r){n!==r&&(t.flags|=4)};function Mf(e,t){if(!Rn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Br(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function A7(e,t,n){var r=t.pendingProps;switch(wS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(t),null;case 1:return Ca(t.type)&&Pv(),Br(t),null;case 3:return r=t.stateNode,jd(),An(Na),An(Yr),PS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ig(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Hi!==null&&(_1(Hi),Hi=null))),p1(e,t),Br(t),null;case 5:ES(t);var a=oc(Gh.current);if(n=t.type,e!==null&&t.stateNode!=null)X$(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Re(166));return Br(t),null}if(e=oc(ks.current),ig(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[xs]=t,r[Vh]=s,e=(t.mode&1)!==0,n){case"dialog":Sn("cancel",r),Sn("close",r);break;case"iframe":case"object":case"embed":Sn("load",r);break;case"video":case"audio":for(a=0;a<ch.length;a++)Sn(ch[a],r);break;case"source":Sn("error",r);break;case"img":case"image":case"link":Sn("error",r),Sn("load",r);break;case"details":Sn("toggle",r);break;case"input":rE(r,s),Sn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Sn("invalid",r);break;case"textarea":iE(r,s),Sn("invalid",r)}zj(n,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ag(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ag(r.textContent,l,e),a=["children",""+l]):Dh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Sn("scroll",r)}switch(n){case"input":Xp(r),aE(r,s,!0);break;case"textarea":Xp(r),sE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ev)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=SD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[xs]=t,e[Vh]=r,Y$(e,t,!1,!1),t.stateNode=e;e:{switch(o=qj(n,r),n){case"dialog":Sn("cancel",e),Sn("close",e),a=r;break;case"iframe":case"object":case"embed":Sn("load",e),a=r;break;case"video":case"audio":for(a=0;a<ch.length;a++)Sn(ch[a],e);a=r;break;case"source":Sn("error",e),a=r;break;case"img":case"image":case"link":Sn("error",e),Sn("load",e),a=r;break;case"details":Sn("toggle",e),a=r;break;case"input":rE(e,r),a=$j(e,r),Sn("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Fn({},r,{value:void 0}),Sn("invalid",e);break;case"textarea":iE(e,r),a=Bj(e,r),Sn("invalid",e);break;default:a=r}zj(n,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?AD(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ND(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&$h(e,c):typeof c=="number"&&$h(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Dh.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Sn("scroll",e):c!=null&&sS(e,s,c,o))}switch(n){case"input":Xp(e),aE(e,r,!1);break;case"textarea":Xp(e),sE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+pl(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Ku(e,!!r.multiple,s,!1):r.defaultValue!=null&&Ku(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ev)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Br(t),null;case 6:if(e&&t.stateNode!=null)J$(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Re(166));if(n=oc(Gh.current),oc(ks.current),ig(t)){if(r=t.stateNode,n=t.memoizedProps,r[xs]=t,(s=r.nodeValue!==n)&&(e=Ha,e!==null))switch(e.tag){case 3:ag(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ag(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xs]=t,t.stateNode=r}return Br(t),null;case 13:if(An($n),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Rn&&qa!==null&&t.mode&1&&!(t.flags&128))p$(),bd(),t.flags|=98560,s=!1;else if(s=ig(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Re(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Re(317));s[xs]=t}else bd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Br(t),s=!1}else Hi!==null&&(_1(Hi),Hi=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||$n.current&1?fr===0&&(fr=3):zS())),t.updateQueue!==null&&(t.flags|=4),Br(t),null);case 4:return jd(),p1(e,t),e===null&&Wh(t.stateNode.containerInfo),Br(t),null;case 10:return SS(t.type._context),Br(t),null;case 17:return Ca(t.type)&&Pv(),Br(t),null;case 19:if(An($n),s=t.memoizedState,s===null)return Br(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Mf(s,!1);else{if(fr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=$v(e),o!==null){for(t.flags|=128,Mf(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return jn($n,$n.current&1|2),t.child}e=e.sibling}s.tail!==null&&Jn()>kd&&(t.flags|=128,r=!0,Mf(s,!1),t.lanes=4194304)}else{if(!r)if(e=$v(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Mf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Rn)return Br(t),null}else 2*Jn()-s.renderingStartTime>kd&&n!==1073741824&&(t.flags|=128,r=!0,Mf(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Jn(),t.sibling=null,n=$n.current,jn($n,r?n&1|2:n&1),t):(Br(t),null);case 22:case 23:return US(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?La&1073741824&&(Br(t),t.subtreeFlags&6&&(t.flags|=8192)):Br(t),null;case 24:return null;case 25:return null}throw Error(Re(156,t.tag))}function E7(e,t){switch(wS(t),t.tag){case 1:return Ca(t.type)&&Pv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jd(),An(Na),An(Yr),PS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ES(t),null;case 13:if(An($n),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Re(340));bd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return An($n),null;case 4:return jd(),null;case 10:return SS(t.type._context),null;case 22:case 23:return US(),null;case 24:return null;default:return null}}var lg=!1,qr=!1,P7=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Uu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qn(e,t,r)}else n.current=null}function g1(e,t,n){try{n()}catch(r){qn(e,t,r)}}var YE=!1;function T7(e,t){if(Zj=Nv,e=n$(),yS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var m;d!==n||a!==0&&d.nodeType!==3||(l=o+a),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===e)break t;if(h===n&&++u===a&&(l=o),h===s&&++f===r&&(c=o),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(e1={focusedElem:e,selectionRange:n},Nv=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){t=nt;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:$i(t.type,v),x);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(k){qn(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}return g=YE,YE=!1,g}function jh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,s!==void 0&&g1(t,n,s)}a=a.next}while(a!==r)}}function jy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function v1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Q$(e){var t=e.alternate;t!==null&&(e.alternate=null,Q$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[xs],delete t[Vh],delete t[r1],delete t[h7],delete t[m7])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Z$(e){return e.tag===5||e.tag===3||e.tag===4}function XE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Z$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function x1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ev));else if(r!==4&&(e=e.child,e!==null))for(x1(e,t,n),e=e.sibling;e!==null;)x1(e,t,n),e=e.sibling}function y1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(y1(e,t,n),e=e.sibling;e!==null;)y1(e,t,n),e=e.sibling}var Cr=null,zi=!1;function Eo(e,t,n){for(n=n.child;n!==null;)eL(e,t,n),n=n.sibling}function eL(e,t,n){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(my,n)}catch{}switch(n.tag){case 5:qr||Uu(n,t);case 6:var r=Cr,a=zi;Cr=null,Eo(e,t,n),Cr=r,zi=a,Cr!==null&&(zi?(e=Cr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Cr.removeChild(n.stateNode));break;case 18:Cr!==null&&(zi?(e=Cr,n=n.stateNode,e.nodeType===8?z0(e.parentNode,n):e.nodeType===1&&z0(e,n),Uh(e)):z0(Cr,n.stateNode));break;case 4:r=Cr,a=zi,Cr=n.stateNode.containerInfo,zi=!0,Eo(e,t,n),Cr=r,zi=a;break;case 0:case 11:case 14:case 15:if(!qr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&g1(n,t,o),a=a.next}while(a!==r)}Eo(e,t,n);break;case 1:if(!qr&&(Uu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){qn(n,t,l)}Eo(e,t,n);break;case 21:Eo(e,t,n);break;case 22:n.mode&1?(qr=(r=qr)||n.memoizedState!==null,Eo(e,t,n),qr=r):Eo(e,t,n);break;default:Eo(e,t,n)}}function JE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new P7),t.forEach(function(r){var a=B7.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Oi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Cr=l.stateNode,zi=!1;break e;case 3:Cr=l.stateNode.containerInfo,zi=!0;break e;case 4:Cr=l.stateNode.containerInfo,zi=!0;break e}l=l.return}if(Cr===null)throw Error(Re(160));eL(s,o,a),Cr=null,zi=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){qn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tL(t,e),t=t.sibling}function tL(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Oi(t,e),us(e),r&4){try{jh(3,e,e.return),jy(3,e)}catch(v){qn(e,e.return,v)}try{jh(5,e,e.return)}catch(v){qn(e,e.return,v)}}break;case 1:Oi(t,e),us(e),r&512&&n!==null&&Uu(n,n.return);break;case 5:if(Oi(t,e),us(e),r&512&&n!==null&&Uu(n,n.return),e.flags&32){var a=e.stateNode;try{$h(a,"")}catch(v){qn(e,e.return,v)}}if(r&4&&(a=e.stateNode,a!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&_D(a,s),qj(l,o);var u=qj(l,s);for(o=0;o<c.length;o+=2){var f=c[o],d=c[o+1];f==="style"?AD(a,d):f==="dangerouslySetInnerHTML"?ND(a,d):f==="children"?$h(a,d):sS(a,f,d,u)}switch(l){case"input":Lj(a,s);break;case"textarea":kD(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ku(a,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?Ku(a,!!s.multiple,s.defaultValue,!0):Ku(a,!!s.multiple,s.multiple?[]:"",!1))}a[Vh]=s}catch(v){qn(e,e.return,v)}}break;case 6:if(Oi(t,e),us(e),r&4){if(e.stateNode===null)throw Error(Re(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(v){qn(e,e.return,v)}}break;case 3:if(Oi(t,e),us(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Uh(t.containerInfo)}catch(v){qn(e,e.return,v)}break;case 4:Oi(t,e),us(e);break;case 13:Oi(t,e),us(e),a=e.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(FS=Jn())),r&4&&JE(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(qr=(u=qr)||f,Oi(t,e),qr=u):Oi(t,e),us(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(nt=e,f=e.child;f!==null;){for(d=nt=f;nt!==null;){switch(h=nt,m=h.child,h.tag){case 0:case 11:case 14:case 15:jh(4,h,h.return);break;case 1:Uu(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){qn(r,n,v)}}break;case 5:Uu(h,h.return);break;case 22:if(h.memoizedState!==null){ZE(d);continue}}m!==null?(m.return=h,nt=m):ZE(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{a=d.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=CD("display",o))}catch(v){qn(e,e.return,v)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){qn(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Oi(t,e),us(e),r&4&&JE(e);break;case 21:break;default:Oi(t,e),us(e)}}function us(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Z$(n)){var r=n;break e}n=n.return}throw Error(Re(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&($h(a,""),r.flags&=-33);var s=XE(e);y1(e,s,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=XE(e);x1(e,l,o);break;default:throw Error(Re(161))}}catch(c){qn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function O7(e,t,n){nt=e,nL(e)}function nL(e,t,n){for(var r=(e.mode&1)!==0;nt!==null;){var a=nt,s=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||lg;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||qr;l=lg;var u=qr;if(lg=o,(qr=c)&&!u)for(nt=a;nt!==null;)o=nt,c=o.child,o.tag===22&&o.memoizedState!==null?eP(a):c!==null?(c.return=o,nt=c):eP(a);for(;s!==null;)nt=s,nL(s),s=s.sibling;nt=a,lg=l,qr=u}QE(e)}else a.subtreeFlags&8772&&s!==null?(s.return=a,nt=s):QE(e)}}function QE(e){for(;nt!==null;){var t=nt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qr||jy(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!qr)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:$i(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&DE(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}DE(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Uh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}qr||t.flags&512&&v1(t)}catch(h){qn(t,t.return,h)}}if(t===e){nt=null;break}if(n=t.sibling,n!==null){n.return=t.return,nt=n;break}nt=t.return}}function ZE(e){for(;nt!==null;){var t=nt;if(t===e){nt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,nt=n;break}nt=t.return}}function eP(e){for(;nt!==null;){var t=nt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{jy(4,t)}catch(c){qn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){qn(t,a,c)}}var s=t.return;try{v1(t)}catch(c){qn(t,s,c)}break;case 5:var o=t.return;try{v1(t)}catch(c){qn(t,o,c)}}}catch(c){qn(t,t.return,c)}if(t===e){nt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,nt=l;break}nt=t.return}}var I7=Math.ceil,Bv=jo.ReactCurrentDispatcher,$S=jo.ReactCurrentOwner,gi=jo.ReactCurrentBatchConfig,Yt=0,yr=null,tr=null,Tr=0,La=0,zu=Nl(0),fr=0,Qh=null,Sc=0,_y=0,LS=0,_h=null,xa=null,FS=0,kd=1/0,zs=null,Uv=!1,b1=null,ll=null,cg=!1,el=null,zv=0,kh=0,w1=null,sv=-1,ov=0;function la(){return Yt&6?Jn():sv!==-1?sv:sv=Jn()}function cl(e){return e.mode&1?Yt&2&&Tr!==0?Tr&-Tr:g7.transition!==null?(ov===0&&(ov=BD()),ov):(e=hn,e!==0||(e=window.event,e=e===void 0?16:KD(e.type)),e):1}function Xi(e,t,n,r){if(50<kh)throw kh=0,w1=null,Error(Re(185));ap(e,n,r),(!(Yt&2)||e!==yr)&&(e===yr&&(!(Yt&2)&&(_y|=n),fr===4&&Ho(e,Tr)),Aa(e,r),n===1&&Yt===0&&!(t.mode&1)&&(kd=Jn()+500,yy&&Cl()))}function Aa(e,t){var n=e.callbackNode;gH(e,t);var r=Sv(e,e===yr?Tr:0);if(r===0)n!==null&&cE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&cE(n),t===1)e.tag===0?p7(tP.bind(null,e)):f$(tP.bind(null,e)),d7(function(){!(Yt&6)&&Cl()}),n=null;else{switch(UD(r)){case 1:n=dS;break;case 4:n=LD;break;case 16:n=kv;break;case 536870912:n=FD;break;default:n=kv}n=uL(n,rL.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rL(e,t){if(sv=-1,ov=0,Yt&6)throw Error(Re(327));var n=e.callbackNode;if(Qu()&&e.callbackNode!==n)return null;var r=Sv(e,e===yr?Tr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=qv(e,r);else{t=r;var a=Yt;Yt|=2;var s=iL();(yr!==e||Tr!==t)&&(zs=null,kd=Jn()+500,xc(e,t));do try{D7();break}catch(l){aL(e,l)}while(!0);kS(),Bv.current=s,Yt=a,tr!==null?t=0:(yr=null,Tr=0,t=fr)}if(t!==0){if(t===2&&(a=Gj(e),a!==0&&(r=a,t=j1(e,a))),t===1)throw n=Qh,xc(e,0),Ho(e,r),Aa(e,Jn()),n;if(t===6)Ho(e,r);else{if(a=e.current.alternate,!(r&30)&&!R7(a)&&(t=qv(e,r),t===2&&(s=Gj(e),s!==0&&(r=s,t=j1(e,s))),t===1))throw n=Qh,xc(e,0),Ho(e,r),Aa(e,Jn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Re(345));case 2:Gl(e,xa,zs);break;case 3:if(Ho(e,r),(r&130023424)===r&&(t=FS+500-Jn(),10<t)){if(Sv(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){la(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=n1(Gl.bind(null,e,xa,zs),t);break}Gl(e,xa,zs);break;case 4:if(Ho(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Yi(r);s=1<<o,o=t[o],o>a&&(a=o),r&=~s}if(r=a,r=Jn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*I7(r/1960))-r,10<r){e.timeoutHandle=n1(Gl.bind(null,e,xa,zs),r);break}Gl(e,xa,zs);break;case 5:Gl(e,xa,zs);break;default:throw Error(Re(329))}}}return Aa(e,Jn()),e.callbackNode===n?rL.bind(null,e):null}function j1(e,t){var n=_h;return e.current.memoizedState.isDehydrated&&(xc(e,t).flags|=256),e=qv(e,t),e!==2&&(t=xa,xa=n,t!==null&&_1(t)),e}function _1(e){xa===null?xa=e:xa.push.apply(xa,e)}function R7(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!es(s(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ho(e,t){for(t&=~LS,t&=~_y,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Yi(t),r=1<<n;e[n]=-1,t&=~r}}function tP(e){if(Yt&6)throw Error(Re(327));Qu();var t=Sv(e,0);if(!(t&1))return Aa(e,Jn()),null;var n=qv(e,t);if(e.tag!==0&&n===2){var r=Gj(e);r!==0&&(t=r,n=j1(e,r))}if(n===1)throw n=Qh,xc(e,0),Ho(e,t),Aa(e,Jn()),n;if(n===6)throw Error(Re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gl(e,xa,zs),Aa(e,Jn()),null}function BS(e,t){var n=Yt;Yt|=1;try{return e(t)}finally{Yt=n,Yt===0&&(kd=Jn()+500,yy&&Cl())}}function Nc(e){el!==null&&el.tag===0&&!(Yt&6)&&Qu();var t=Yt;Yt|=1;var n=gi.transition,r=hn;try{if(gi.transition=null,hn=1,e)return e()}finally{hn=r,gi.transition=n,Yt=t,!(Yt&6)&&Cl()}}function US(){La=zu.current,An(zu)}function xc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,u7(n)),tr!==null)for(n=tr.return;n!==null;){var r=n;switch(wS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pv();break;case 3:jd(),An(Na),An(Yr),PS();break;case 5:ES(r);break;case 4:jd();break;case 13:An($n);break;case 19:An($n);break;case 10:SS(r.type._context);break;case 22:case 23:US()}n=n.return}if(yr=e,tr=e=ul(e.current,null),Tr=La=t,fr=0,Qh=null,LS=_y=Sc=0,xa=_h=null,sc!==null){for(t=0;t<sc.length;t++)if(n=sc[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=a,r.next=o}n.pending=r}sc=null}return e}function aL(e,t){do{var n=tr;try{if(kS(),rv.current=Fv,Lv){for(var r=Ln.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Lv=!1}if(kc=0,vr=dr=Ln=null,wh=!1,Yh=0,$S.current=null,n===null||n.return===null){fr=1,Qh=t,tr=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Tr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=zE(o);if(m!==null){m.flags&=-257,qE(m,o,l,s,t),m.mode&1&&UE(s,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){UE(s,u,t),zS();break e}c=Error(Re(426))}}else if(Rn&&l.mode&1){var x=zE(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),qE(x,o,l,s,t),jS(_d(c,l));break e}}s=c=_d(c,l),fr!==4&&(fr=2),_h===null?_h=[s]:_h.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=U$(s,c,t);ME(s,y);break e;case 1:l=c;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ll===null||!ll.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var k=z$(s,l,t);ME(s,k);break e}}s=s.return}while(s!==null)}oL(n)}catch(j){t=j,tr===n&&n!==null&&(tr=n=n.return);continue}break}while(!0)}function iL(){var e=Bv.current;return Bv.current=Fv,e===null?Fv:e}function zS(){(fr===0||fr===3||fr===2)&&(fr=4),yr===null||!(Sc&268435455)&&!(_y&268435455)||Ho(yr,Tr)}function qv(e,t){var n=Yt;Yt|=2;var r=iL();(yr!==e||Tr!==t)&&(zs=null,xc(e,t));do try{M7();break}catch(a){aL(e,a)}while(!0);if(kS(),Yt=n,Bv.current=r,tr!==null)throw Error(Re(261));return yr=null,Tr=0,fr}function M7(){for(;tr!==null;)sL(tr)}function D7(){for(;tr!==null&&!oH();)sL(tr)}function sL(e){var t=cL(e.alternate,e,La);e.memoizedProps=e.pendingProps,t===null?oL(e):tr=t,$S.current=null}function oL(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=E7(n,t),n!==null){n.flags&=32767,tr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{fr=6,tr=null;return}}else if(n=A7(n,t,La),n!==null){tr=n;return}if(t=t.sibling,t!==null){tr=t;return}tr=t=e}while(t!==null);fr===0&&(fr=5)}function Gl(e,t,n){var r=hn,a=gi.transition;try{gi.transition=null,hn=1,$7(e,t,n,r)}finally{gi.transition=a,hn=r}return null}function $7(e,t,n,r){do Qu();while(el!==null);if(Yt&6)throw Error(Re(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Re(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(vH(e,s),e===yr&&(tr=yr=null,Tr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||cg||(cg=!0,uL(kv,function(){return Qu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gi.transition,gi.transition=null;var o=hn;hn=1;var l=Yt;Yt|=4,$S.current=null,T7(e,n),tL(n,e),r7(e1),Nv=!!Zj,e1=Zj=null,e.current=n,O7(n),lH(),Yt=l,hn=o,gi.transition=s}else e.current=n;if(cg&&(cg=!1,el=e,zv=a),s=e.pendingLanes,s===0&&(ll=null),dH(n.stateNode),Aa(e,Jn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Uv)throw Uv=!1,e=b1,b1=null,e;return zv&1&&e.tag!==0&&Qu(),s=e.pendingLanes,s&1?e===w1?kh++:(kh=0,w1=e):kh=0,Cl(),null}function Qu(){if(el!==null){var e=UD(zv),t=gi.transition,n=hn;try{if(gi.transition=null,hn=16>e?16:e,el===null)var r=!1;else{if(e=el,el=null,zv=0,Yt&6)throw Error(Re(331));var a=Yt;for(Yt|=4,nt=e.current;nt!==null;){var s=nt,o=s.child;if(nt.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(nt=u;nt!==null;){var f=nt;switch(f.tag){case 0:case 11:case 15:jh(8,f,s)}var d=f.child;if(d!==null)d.return=f,nt=d;else for(;nt!==null;){f=nt;var h=f.sibling,m=f.return;if(Q$(f),f===u){nt=null;break}if(h!==null){h.return=m,nt=h;break}nt=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}nt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,nt=o;else e:for(;nt!==null;){if(s=nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:jh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,nt=y;break e}nt=s.return}}var b=e.current;for(nt=b;nt!==null;){o=nt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,nt=w;else e:for(o=b;nt!==null;){if(l=nt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:jy(9,l)}}catch(j){qn(l,l.return,j)}if(l===o){nt=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,nt=k;break e}nt=l.return}}if(Yt=a,Cl(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(my,e)}catch{}r=!0}return r}finally{hn=n,gi.transition=t}}return!1}function nP(e,t,n){t=_d(n,t),t=U$(e,t,1),e=ol(e,t,1),t=la(),e!==null&&(ap(e,1,t),Aa(e,t))}function qn(e,t,n){if(e.tag===3)nP(e,e,n);else for(;t!==null;){if(t.tag===3){nP(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ll===null||!ll.has(r))){e=_d(n,e),e=z$(t,e,1),t=ol(t,e,1),e=la(),t!==null&&(ap(t,1,e),Aa(t,e));break}}t=t.return}}function L7(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=la(),e.pingedLanes|=e.suspendedLanes&n,yr===e&&(Tr&n)===n&&(fr===4||fr===3&&(Tr&130023424)===Tr&&500>Jn()-FS?xc(e,0):LS|=n),Aa(e,t)}function lL(e,t){t===0&&(e.mode&1?(t=Zp,Zp<<=1,!(Zp&130023424)&&(Zp=4194304)):t=1);var n=la();e=fo(e,t),e!==null&&(ap(e,t,n),Aa(e,n))}function F7(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lL(e,n)}function B7(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Re(314))}r!==null&&r.delete(t),lL(e,n)}var cL;cL=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Na.current)ja=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ja=!1,C7(e,t,n);ja=!!(e.flags&131072)}else ja=!1,Rn&&t.flags&1048576&&h$(t,Iv,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;iv(e,t),e=t.pendingProps;var a=yd(t,Yr.current);Ju(t,n),a=OS(null,t,r,e,a,n);var s=IS();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ca(r)?(s=!0,Tv(t)):s=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,CS(t),a.updater=wy,t.stateNode=a,a._reactInternals=t,c1(t,r,e,n),t=f1(null,t,r,!0,s,n)):(t.tag=0,Rn&&s&&bS(t),ra(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(iv(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=z7(r),e=$i(r,e),a){case 0:t=d1(null,t,r,e,n);break e;case 1:t=VE(null,t,r,e,n);break e;case 11:t=WE(null,t,r,e,n);break e;case 14:t=HE(null,t,r,$i(r.type,e),n);break e}throw Error(Re(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:$i(r,a),d1(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:$i(r,a),VE(e,t,r,a,n);case 3:e:{if(V$(t),e===null)throw Error(Re(387));r=t.pendingProps,s=t.memoizedState,a=s.element,y$(e,t),Dv(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){a=_d(Error(Re(423)),t),t=KE(e,t,r,n,a);break e}else if(r!==a){a=_d(Error(Re(424)),t),t=KE(e,t,r,n,a);break e}else for(qa=sl(t.stateNode.containerInfo.firstChild),Ha=t,Rn=!0,Hi=null,n=v$(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bd(),r===a){t=ho(e,t,n);break e}ra(e,t,r,n)}t=t.child}return t;case 5:return b$(t),e===null&&s1(t),r=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,o=a.children,t1(r,a)?o=null:s!==null&&t1(r,s)&&(t.flags|=32),H$(e,t),ra(e,t,o,n),t.child;case 6:return e===null&&s1(t),null;case 13:return K$(e,t,n);case 4:return AS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=wd(t,null,r,n):ra(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:$i(r,a),WE(e,t,r,a,n);case 7:return ra(e,t,t.pendingProps,n),t.child;case 8:return ra(e,t,t.pendingProps.children,n),t.child;case 12:return ra(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,jn(Rv,r._currentValue),r._currentValue=o,s!==null)if(es(s.value,o)){if(s.children===a.children&&!Na.current){t=ho(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=no(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),o1(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Re(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),o1(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ra(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ju(t,n),a=bi(a),r=r(a),t.flags|=1,ra(e,t,r,n),t.child;case 14:return r=t.type,a=$i(r,t.pendingProps),a=$i(r.type,a),HE(e,t,r,a,n);case 15:return q$(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:$i(r,a),iv(e,t),t.tag=1,Ca(r)?(e=!0,Tv(t)):e=!1,Ju(t,n),B$(t,r,a),c1(t,r,a,n),f1(null,t,r,!0,e,n);case 19:return G$(e,t,n);case 22:return W$(e,t,n)}throw Error(Re(156,t.tag))};function uL(e,t){return $D(e,t)}function U7(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(e,t,n,r){return new U7(e,t,n,r)}function qS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function z7(e){if(typeof e=="function")return qS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===lS)return 11;if(e===cS)return 14}return 2}function ul(e,t){var n=e.alternate;return n===null?(n=fi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function lv(e,t,n,r,a,s){var o=2;if(r=e,typeof e=="function")qS(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ou:return yc(n.children,a,s,t);case oS:o=8,a|=8;break;case Ij:return e=fi(12,n,t,a|2),e.elementType=Ij,e.lanes=s,e;case Rj:return e=fi(13,n,t,a),e.elementType=Rj,e.lanes=s,e;case Mj:return e=fi(19,n,t,a),e.elementType=Mj,e.lanes=s,e;case bD:return ky(n,a,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xD:o=10;break e;case yD:o=9;break e;case lS:o=11;break e;case cS:o=14;break e;case Uo:o=16,r=null;break e}throw Error(Re(130,e==null?e:typeof e,""))}return t=fi(o,n,t,a),t.elementType=e,t.type=r,t.lanes=s,t}function yc(e,t,n,r){return e=fi(7,e,r,t),e.lanes=n,e}function ky(e,t,n,r){return e=fi(22,e,r,t),e.elementType=bD,e.lanes=n,e.stateNode={isHidden:!1},e}function X0(e,t,n){return e=fi(6,e,null,t),e.lanes=n,e}function J0(e,t,n){return t=fi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function q7(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=T0(0),this.expirationTimes=T0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=T0(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function WS(e,t,n,r,a,s,o,l,c){return e=new q7(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=fi(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},CS(s),e}function W7(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function dL(e){if(!e)return gl;e=e._reactInternals;e:{if(Kc(e)!==e||e.tag!==1)throw Error(Re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ca(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Re(171))}if(e.tag===1){var n=e.type;if(Ca(n))return d$(e,n,t)}return t}function fL(e,t,n,r,a,s,o,l,c){return e=WS(n,r,!0,e,a,s,o,l,c),e.context=dL(null),n=e.current,r=la(),a=cl(n),s=no(r,a),s.callback=t??null,ol(n,s,a),e.current.lanes=a,ap(e,a,r),Aa(e,r),e}function Sy(e,t,n,r){var a=t.current,s=la(),o=cl(a);return n=dL(n),t.context===null?t.context=n:t.pendingContext=n,t=no(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ol(a,t,o),e!==null&&(Xi(e,a,o,s),nv(e,a,o)),o}function Wv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rP(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function HS(e,t){rP(e,t),(e=e.alternate)&&rP(e,t)}function H7(){return null}var hL=typeof reportError=="function"?reportError:function(e){console.error(e)};function VS(e){this._internalRoot=e}Ny.prototype.render=VS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Re(409));Sy(e,t,null,null)};Ny.prototype.unmount=VS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nc(function(){Sy(null,e,null,null)}),t[uo]=null}};function Ny(e){this._internalRoot=e}Ny.prototype.unstable_scheduleHydration=function(e){if(e){var t=WD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wo.length&&t!==0&&t<Wo[n].priority;n++);Wo.splice(n,0,e),n===0&&VD(e)}};function KS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Cy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function aP(){}function V7(e,t,n,r,a){if(a){if(typeof r=="function"){var s=r;r=function(){var u=Wv(o);s.call(u)}}var o=fL(t,r,e,0,null,!1,!1,"",aP);return e._reactRootContainer=o,e[uo]=o.current,Wh(e.nodeType===8?e.parentNode:e),Nc(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var u=Wv(c);l.call(u)}}var c=WS(e,0,!1,null,null,!1,!1,"",aP);return e._reactRootContainer=c,e[uo]=c.current,Wh(e.nodeType===8?e.parentNode:e),Nc(function(){Sy(t,c,n,r)}),c}function Ay(e,t,n,r,a){var s=n._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=Wv(o);l.call(c)}}Sy(t,o,e,a)}else o=V7(n,t,e,a,r);return Wv(o)}zD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=lh(t.pendingLanes);n!==0&&(fS(t,n|1),Aa(t,Jn()),!(Yt&6)&&(kd=Jn()+500,Cl()))}break;case 13:Nc(function(){var r=fo(e,1);if(r!==null){var a=la();Xi(r,e,1,a)}}),HS(e,1)}};hS=function(e){if(e.tag===13){var t=fo(e,134217728);if(t!==null){var n=la();Xi(t,e,134217728,n)}HS(e,134217728)}};qD=function(e){if(e.tag===13){var t=cl(e),n=fo(e,t);if(n!==null){var r=la();Xi(n,e,t,r)}HS(e,t)}};WD=function(){return hn};HD=function(e,t){var n=hn;try{return hn=e,t()}finally{hn=n}};Hj=function(e,t,n){switch(t){case"input":if(Lj(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=xy(r);if(!a)throw Error(Re(90));jD(r),Lj(r,a)}}}break;case"textarea":kD(e,n);break;case"select":t=n.value,t!=null&&Ku(e,!!n.multiple,t,!1)}};TD=BS;OD=Nc;var K7={usingClientEntryPoint:!1,Events:[sp,Du,xy,ED,PD,BS]},Df={findFiberByHostInstance:ic,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},G7={bundleType:Df.bundleType,version:Df.version,rendererPackageName:Df.rendererPackageName,rendererConfig:Df.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=MD(e),e===null?null:e.stateNode},findFiberByHostInstance:Df.findFiberByHostInstance||H7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ug=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ug.isDisabled&&ug.supportsFiber)try{my=ug.inject(G7),_s=ug}catch{}}Xa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K7;Xa.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!KS(t))throw Error(Re(200));return W7(e,t,null,n)};Xa.createRoot=function(e,t){if(!KS(e))throw Error(Re(299));var n=!1,r="",a=hL;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=WS(e,1,!1,null,null,n,!1,r,a),e[uo]=t.current,Wh(e.nodeType===8?e.parentNode:e),new VS(t)};Xa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Re(188)):(e=Object.keys(e).join(","),Error(Re(268,e)));return e=MD(t),e=e===null?null:e.stateNode,e};Xa.flushSync=function(e){return Nc(e)};Xa.hydrate=function(e,t,n){if(!Cy(t))throw Error(Re(200));return Ay(null,e,t,!0,n)};Xa.hydrateRoot=function(e,t,n){if(!KS(e))throw Error(Re(405));var r=n!=null&&n.hydratedSources||null,a=!1,s="",o=hL;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=fL(t,null,e,1,n??null,a,!1,s,o),e[uo]=t.current,Wh(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Ny(t)};Xa.render=function(e,t,n){if(!Cy(t))throw Error(Re(200));return Ay(null,e,t,!1,n)};Xa.unmountComponentAtNode=function(e){if(!Cy(e))throw Error(Re(40));return e._reactRootContainer?(Nc(function(){Ay(null,null,e,!1,function(){e._reactRootContainer=null,e[uo]=null})}),!0):!1};Xa.unstable_batchedUpdates=BS;Xa.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Cy(n))throw Error(Re(200));if(e==null||e._reactInternals===void 0)throw Error(Re(38));return Ay(e,t,n,!1,r)};Xa.version="18.3.1-next-f1338f8080-20240426";function mL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mL)}catch(e){console.error(e)}}mL(),mD.exports=Xa;var Gc=mD.exports;const pL=un(Gc);var gL,iP=Gc;gL=iP.createRoot,iP.hydrateRoot;const Y7=1,X7=1e6;let Q0=0;function J7(){return Q0=(Q0+1)%Number.MAX_SAFE_INTEGER,Q0.toString()}const Z0=new Map,sP=e=>{if(Z0.has(e))return;const t=setTimeout(()=>{Z0.delete(e),Sh({type:"REMOVE_TOAST",toastId:e})},X7);Z0.set(e,t)},Q7=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Y7)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?sP(n):e.toasts.forEach(r=>{sP(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},cv=[];let uv={toasts:[]};function Sh(e){uv=Q7(uv,e),cv.forEach(t=>{t(uv)})}function Z7({...e}){const t=J7(),n=a=>Sh({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>Sh({type:"DISMISS_TOAST",toastId:t});return Sh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function Yc(){const[e,t]=p.useState(uv);return p.useEffect(()=>(cv.push(t),()=>{const n=cv.indexOf(t);n>-1&&cv.splice(n,1)}),[e]),{...e,toast:Z7,dismiss:n=>Sh({type:"DISMISS_TOAST",toastId:n})}}function Ie(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function oP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function mo(...e){return t=>{let n=!1;const r=e.map(a=>{const s=oP(a,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let a=0;a<r.length;a++){const s=r[a];typeof s=="function"?s():oP(e[a],null)}}}}function St(...e){return p.useCallback(mo(...e),e)}function eV(e,t){const n=p.createContext(t),r=s=>{const{children:o,...l}=s,c=p.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function a(s){const o=p.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,a]}function wr(e,t=[]){let n=[];function r(s,o){const l=p.createContext(o),c=n.length;n=[...n,o];const u=d=>{var y;const{scope:h,children:m,...g}=d,v=((y=h==null?void 0:h[e])==null?void 0:y[c])||l,x=p.useMemo(()=>g,Object.values(g));return i.jsx(v.Provider,{value:x,children:m})};u.displayName=s+"Provider";function f(d,h){var v;const m=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,g=p.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,f]}const a=()=>{const s=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,tV(a,...t)]}function tV(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const d=c(s)[`__scope${u}`];return{...l,...d}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function vl(e){const t=nV(e),n=p.forwardRef((r,a)=>{const{children:s,...o}=r,l=p.Children.toArray(s),c=l.find(rV);if(c){const u=c.props.children,f=l.map(d=>d===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:d);return i.jsx(t,{...o,ref:a,children:p.isValidElement(u)?p.cloneElement(u,void 0,f):null})}return i.jsx(t,{...o,ref:a,children:s})});return n.displayName=`${e}.Slot`,n}var GS=vl("Slot");function nV(e){const t=p.forwardRef((n,r)=>{const{children:a,...s}=n;if(p.isValidElement(a)){const o=iV(a),l=aV(s,a.props);return a.type!==p.Fragment&&(l.ref=r?mo(r,o):o),p.cloneElement(a,l)}return p.Children.count(a)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var vL=Symbol("radix.slottable");function xL(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=vL,t}function rV(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===vL}function aV(e,t){const n={...t};for(const r in t){const a=e[r],s=t[r];/^on[A-Z]/.test(r)?a&&s?n[r]=(...l)=>{const c=s(...l);return a(...l),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...s}:r==="className"&&(n[r]=[a,s].filter(Boolean).join(" "))}return{...e,...n}}function iV(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function lp(e){const t=e+"CollectionProvider",[n,r]=wr(t),[a,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:x,children:y}=v,b=Y.useRef(null),w=Y.useRef(new Map).current;return i.jsx(a,{scope:x,itemMap:w,collectionRef:b,children:y})};o.displayName=t;const l=e+"CollectionSlot",c=vl(l),u=Y.forwardRef((v,x)=>{const{scope:y,children:b}=v,w=s(l,y),k=St(x,w.collectionRef);return i.jsx(c,{ref:k,children:b})});u.displayName=l;const f=e+"CollectionItemSlot",d="data-radix-collection-item",h=vl(f),m=Y.forwardRef((v,x)=>{const{scope:y,children:b,...w}=v,k=Y.useRef(null),j=St(x,k),_=s(f,y);return Y.useEffect(()=>(_.itemMap.set(k,{ref:k,...w}),()=>void _.itemMap.delete(k))),i.jsx(h,{[d]:"",ref:j,children:b})});m.displayName=f;function g(v){const x=s(e+"CollectionConsumer",v);return Y.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((_,S)=>w.indexOf(_.ref.current)-w.indexOf(S.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},g,r]}var sV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ye=sV.reduce((e,t)=>{const n=vl(`Primitive.${t}`),r=p.forwardRef((a,s)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function YS(e,t){e&&Gc.flushSync(()=>e.dispatchEvent(t))}function Hn(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function oV(e,t=globalThis==null?void 0:globalThis.document){const n=Hn(e);p.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var lV="DismissableLayer",k1="dismissableLayer.update",cV="dismissableLayer.pointerDownOutside",uV="dismissableLayer.focusOutside",lP,yL=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Xc=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=e,u=p.useContext(yL),[f,d]=p.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=St(t,S=>d(S)),v=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),b=f?v.indexOf(f):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,k=b>=y,j=fV(S=>{const T=S.target,N=[...u.branches].some(A=>A.contains(T));!k||N||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},h),_=hV(S=>{const T=S.target;[...u.branches].some(A=>A.contains(T))||(s==null||s(S),o==null||o(S),S.defaultPrevented||l==null||l())},h);return oV(S=>{b===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},h),p.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(lP=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),cP(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=lP)}},[f,h,n,u]),p.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),cP())},[f,u]),p.useEffect(()=>{const S=()=>m({});return document.addEventListener(k1,S),()=>document.removeEventListener(k1,S)},[]),i.jsx(Ye.div,{...c,ref:g,style:{pointerEvents:w?k?"auto":"none":void 0,...e.style},onFocusCapture:Ie(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Ie(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Ie(e.onPointerDownCapture,j.onPointerDownCapture)})});Xc.displayName=lV;var dV="DismissableLayerBranch",bL=p.forwardRef((e,t)=>{const n=p.useContext(yL),r=p.useRef(null),a=St(t,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),i.jsx(Ye.div,{...e,ref:a})});bL.displayName=dV;function fV(e,t=globalThis==null?void 0:globalThis.document){const n=Hn(e),r=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let c=function(){wL(cV,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function hV(e,t=globalThis==null?void 0:globalThis.document){const n=Hn(e),r=p.useRef(!1);return p.useEffect(()=>{const a=s=>{s.target&&!r.current&&wL(uV,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function cP(){const e=new CustomEvent(k1);document.dispatchEvent(e)}function wL(e,t,n,{discrete:r}){const a=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?YS(a,s):a.dispatchEvent(s)}var mV=Xc,pV=bL,Gn=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},gV="Portal",sf=p.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,s]=p.useState(!1);Gn(()=>s(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?pL.createPortal(i.jsx(Ye.div,{...r,ref:t}),o):null});sf.displayName=gV;function vV(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var mr=e=>{const{present:t,children:n}=e,r=xV(t),a=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=St(r.ref,yV(a));return typeof n=="function"||r.isPresent?p.cloneElement(a,{ref:s}):null};mr.displayName="Presence";function xV(e){const[t,n]=p.useState(),r=p.useRef(null),a=p.useRef(e),s=p.useRef("none"),o=e?"mounted":"unmounted",[l,c]=vV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=dg(r.current);s.current=l==="mounted"?u:"none"},[l]),Gn(()=>{const u=r.current,f=a.current;if(f!==e){const h=s.current,m=dg(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Gn(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,d=m=>{const v=dg(r.current).includes(m.animationName);if(m.target===t&&v&&(c("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},h=m=>{m.target===t&&(s.current=dg(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function dg(e){return(e==null?void 0:e.animationName)||"none"}function yV(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var bV=rS[" useInsertionEffect ".trim().toString()]||Gn;function Pa({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,s,o]=wV({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const f=p.useRef(e!==void 0);p.useEffect(()=>{const d=f.current;d!==l&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const u=p.useCallback(f=>{var d;if(l){const h=jV(f)?f(e):f;h!==e&&((d=o.current)==null||d.call(o,h))}else s(f)},[l,e,s,o]);return[c,u]}function wV({defaultProp:e,onChange:t}){const[n,r]=p.useState(e),a=p.useRef(n),s=p.useRef(t);return bV(()=>{s.current=t},[t]),p.useEffect(()=>{var o;a.current!==n&&((o=s.current)==null||o.call(s,n),a.current=n)},[n,a]),[n,r,s]}function jV(e){return typeof e=="function"}var jL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),_V="VisuallyHidden",Ey=p.forwardRef((e,t)=>i.jsx(Ye.span,{...e,ref:t,style:{...jL,...e.style}}));Ey.displayName=_V;var kV=Ey,XS="ToastProvider",[JS,SV,NV]=lp("Toast"),[_L,k3e]=wr("Toast",[NV]),[CV,Py]=_L(XS),kL=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:s=50,children:o}=e,[l,c]=p.useState(null),[u,f]=p.useState(0),d=p.useRef(!1),h=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${XS}\`. Expected non-empty \`string\`.`),i.jsx(JS.Provider,{scope:t,children:i.jsx(CV,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:s,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>f(m=>m+1),[]),onToastRemove:p.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};kL.displayName=XS;var SL="ToastViewport",AV=["F8"],S1="toast.viewportPause",N1="toast.viewportResume",NL=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=AV,label:a="Notifications ({hotkey})",...s}=e,o=Py(SL,n),l=SV(n),c=p.useRef(null),u=p.useRef(null),f=p.useRef(null),d=p.useRef(null),h=St(t,d,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;p.useEffect(()=>{const x=y=>{var w;r.length!==0&&r.every(k=>y[k]||y.code===k)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),p.useEffect(()=>{const x=c.current,y=d.current;if(g&&x&&y){const b=()=>{if(!o.isClosePausedRef.current){const _=new CustomEvent(S1);y.dispatchEvent(_),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const _=new CustomEvent(N1);y.dispatchEvent(_),o.isClosePausedRef.current=!1}},k=_=>{!x.contains(_.relatedTarget)&&w()},j=()=>{x.contains(document.activeElement)||w()};return x.addEventListener("focusin",b),x.addEventListener("focusout",k),x.addEventListener("pointermove",b),x.addEventListener("pointerleave",j),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{x.removeEventListener("focusin",b),x.removeEventListener("focusout",k),x.removeEventListener("pointermove",b),x.removeEventListener("pointerleave",j),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:x})=>{const b=l().map(w=>{const k=w.ref.current,j=[k,...UV(k)];return x==="forwards"?j:j.reverse()});return(x==="forwards"?b.reverse():b).flat()},[l]);return p.useEffect(()=>{const x=d.current;if(x){const y=b=>{var j,_,S;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const T=document.activeElement,N=b.shiftKey;if(b.target===x&&N){(j=u.current)==null||j.focus();return}const B=v({tabbingDirection:N?"backwards":"forwards"}),E=B.findIndex(R=>R===T);ew(B.slice(E+1))?b.preventDefault():N?(_=u.current)==null||_.focus():(S=f.current)==null||S.focus()}};return x.addEventListener("keydown",y),()=>x.removeEventListener("keydown",y)}},[l,v]),i.jsxs(pV,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&i.jsx(C1,{ref:u,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});ew(x)}}),i.jsx(JS.Slot,{scope:n,children:i.jsx(Ye.ol,{tabIndex:-1,...s,ref:h})}),g&&i.jsx(C1,{ref:f,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});ew(x)}})]})});NL.displayName=SL;var CL="ToastFocusProxy",C1=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,s=Py(CL,n);return i.jsx(Ey,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(l))&&r()}})});C1.displayName=CL;var cp="Toast",EV="toast.swipeStart",PV="toast.swipeMove",TV="toast.swipeCancel",OV="toast.swipeEnd",AL=p.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:s,...o}=e,[l,c]=Pa({prop:r,defaultProp:a??!0,onChange:s,caller:cp});return i.jsx(mr,{present:n||l,children:i.jsx(MV,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Hn(e.onPause),onResume:Hn(e.onResume),onSwipeStart:Ie(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ie(e.onSwipeMove,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Ie(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ie(e.onSwipeEnd,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});AL.displayName=cp;var[IV,RV]=_L(cp,{onClose(){}}),MV=p.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:s,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:m,...g}=e,v=Py(cp,n),[x,y]=p.useState(null),b=St(t,R=>y(R)),w=p.useRef(null),k=p.useRef(null),j=a||v.duration,_=p.useRef(0),S=p.useRef(j),T=p.useRef(0),{onToastAdd:N,onToastRemove:A}=v,D=Hn(()=>{var P;(x==null?void 0:x.contains(document.activeElement))&&((P=v.viewport)==null||P.focus()),o()}),B=p.useCallback(R=>{!R||R===1/0||(window.clearTimeout(T.current),_.current=new Date().getTime(),T.current=window.setTimeout(D,R))},[D]);p.useEffect(()=>{const R=v.viewport;if(R){const P=()=>{B(S.current),u==null||u()},U=()=>{const L=new Date().getTime()-_.current;S.current=S.current-L,window.clearTimeout(T.current),c==null||c()};return R.addEventListener(S1,U),R.addEventListener(N1,P),()=>{R.removeEventListener(S1,U),R.removeEventListener(N1,P)}}},[v.viewport,j,c,u,B]),p.useEffect(()=>{s&&!v.isClosePausedRef.current&&B(j)},[s,j,v.isClosePausedRef,B]),p.useEffect(()=>(N(),()=>A()),[N,A]);const E=p.useMemo(()=>x?ML(x):null,[x]);return v.viewport?i.jsxs(i.Fragment,{children:[E&&i.jsx(DV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:E}),i.jsx(IV,{scope:n,onClose:D,children:Gc.createPortal(i.jsx(JS.ItemSlot,{scope:n,children:i.jsx(mV,{asChild:!0,onEscapeKeyDown:Ie(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||D(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Ye.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ie(e.onKeyDown,R=>{R.key==="Escape"&&(l==null||l(R.nativeEvent),R.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:Ie(e.onPointerDown,R=>{R.button===0&&(w.current={x:R.clientX,y:R.clientY})}),onPointerMove:Ie(e.onPointerMove,R=>{if(!w.current)return;const P=R.clientX-w.current.x,U=R.clientY-w.current.y,L=!!k.current,O=["left","right"].includes(v.swipeDirection),F=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,C=O?F(0,P):0,z=O?0:F(0,U),I=R.pointerType==="touch"?10:2,$={x:C,y:z},K={originalEvent:R,delta:$};L?(k.current=$,fg(PV,d,K,{discrete:!1})):uP($,v.swipeDirection,I)?(k.current=$,fg(EV,f,K,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs(P)>I||Math.abs(U)>I)&&(w.current=null)}),onPointerUp:Ie(e.onPointerUp,R=>{const P=k.current,U=R.target;if(U.hasPointerCapture(R.pointerId)&&U.releasePointerCapture(R.pointerId),k.current=null,w.current=null,P){const L=R.currentTarget,O={originalEvent:R,delta:P};uP(P,v.swipeDirection,v.swipeThreshold)?fg(OV,m,O,{discrete:!0}):fg(TV,h,O,{discrete:!0}),L.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),DV=e=>{const{__scopeToast:t,children:n,...r}=e,a=Py(cp,t),[s,o]=p.useState(!1),[l,c]=p.useState(!1);return FV(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(sf,{asChild:!0,children:i.jsx(Ey,{...r,children:s&&i.jsxs(i.Fragment,{children:[a.label," ",n]})})})},$V="ToastTitle",EL=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Ye.div,{...r,ref:t})});EL.displayName=$V;var LV="ToastDescription",PL=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Ye.div,{...r,ref:t})});PL.displayName=LV;var TL="ToastAction",OL=p.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(RL,{altText:n,asChild:!0,children:i.jsx(QS,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${TL}\`. Expected non-empty \`string\`.`),null)});OL.displayName=TL;var IL="ToastClose",QS=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=RV(IL,n);return i.jsx(RL,{asChild:!0,children:i.jsx(Ye.button,{type:"button",...r,ref:t,onClick:Ie(e.onClick,a.onClose)})})});QS.displayName=IL;var RL=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return i.jsx(Ye.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function ML(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),BV(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!a)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...ML(r))}}),t}function fg(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?YS(a,s):a.dispatchEvent(s)}var uP=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),s=r>a;return t==="left"||t==="right"?s&&r>n:!s&&a>n};function FV(e=()=>{}){const t=Hn(e);Gn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function BV(e){return e.nodeType===e.ELEMENT_NODE}function UV(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ew(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var zV=kL,DL=NL,$L=AL,LL=EL,FL=PL,BL=OL,UL=QS;function zL(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=zL(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Xt(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=zL(e))&&(r&&(r+=" "),r+=t);return r}const dP=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,fP=Xt,up=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return fP(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:s}=t,o=Object.keys(a).map(u=>{const f=n==null?void 0:n[u],d=s==null?void 0:s[u];if(f===null)return null;const h=dP(f)||dP(d);return a[u][h]}),l=n&&Object.entries(n).reduce((u,f)=>{let[d,h]=f;return h===void 0||(u[d]=h),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:d,className:h,...m}=f;return Object.entries(m).every(g=>{let[v,x]=g;return Array.isArray(x)?x.includes({...s,...l}[v]):{...s,...l}[v]===x})?[...u,d,h]:u},[]);return fP(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qL=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...WV,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:qL("lucide",a),...l},[...o.map(([u,f])=>p.createElement(u,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(e,t)=>{const n=p.forwardRef(({className:r,...a},s)=>p.createElement(HV,{ref:s,iconNode:t,className:qL(`lucide-${qV(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=Xe("AlignCenter",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=Xe("AlignJustify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=Xe("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=Xe("AlignRight",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=Xe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=Xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Xe("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=Xe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=Xe("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=Xe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=Xe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=Xe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=Xe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=Xe("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=Xe("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=Xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=Xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=Xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=Xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=Xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=Xe("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=Xe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=Xe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=Xe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=Xe("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=Xe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=Xe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=Xe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=Xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=Xe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=Xe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=Xe("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=Xe("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=Xe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=Xe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=Xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=Xe("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=Xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=Xe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rK=Xe("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=Xe("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=Xe("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=Xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Xe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=Xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=Xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Xe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=Xe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aK=Xe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=Xe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=Xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=Xe("PlugZap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=Xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oK=Xe("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=Xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=Xe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=Xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=Xe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=Xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=Xe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=Xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=Xe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=Xe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=Xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Xe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lK=Xe("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=Xe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cK=Xe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uK=Xe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dK=Xe("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=Xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=Xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=Xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=Xe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),rN="-",fK=e=>{const t=mK(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(rN);return l[0]===""&&l.length!==1&&l.shift(),n4(l,t)||hK(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},n4=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?n4(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const s=e.join(rN);return(o=t.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},bP=/^\[(.+)\]$/,hK=e=>{if(bP.test(e)){const t=bP.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},mK=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return gK(Object.entries(e.classGroups),n).forEach(([s,o])=>{A1(o,r,s,t)}),r},A1=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const s=a===""?t:wP(t,a);s.classGroupId=n;return}if(typeof a=="function"){if(pK(a)){A1(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([s,o])=>{A1(o,wP(t,s),n,r)})})},wP=(e,t)=>{let n=e;return t.split(rN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},pK=e=>e.isThemeGetter,gK=(e,t)=>t?e.map(([n,r])=>{const a=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[t+o,l])):s);return[n,a]}):e,vK=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(s,o)=>{n.set(s,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return a(s,o),o},set(s,o){n.has(s)?n.set(s,o):a(s,o)}}},r4="!",xK=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],s=t.length,o=l=>{const c=[];let u=0,f=0,d;for(let x=0;x<l.length;x++){let y=l[x];if(u===0){if(y===a&&(r||l.slice(x,x+s)===t)){c.push(l.slice(f,x)),f=x+s;continue}if(y==="/"){d=x;continue}}y==="["?u++:y==="]"&&u--}const h=c.length===0?l:l.substring(f),m=h.startsWith(r4),g=m?h.substring(1):h,v=d&&d>f?d-f:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:o}):o},yK=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},bK=e=>({cache:vK(e.cacheSize),parseClassName:xK(e),...fK(e)}),wK=/\s+/,jK=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,s=[],o=e.trim().split(wK);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:f,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:m}=n(u);let g=!!m,v=r(g?h.substring(0,m):h);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=r(h),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}const x=yK(f).join(":"),y=d?x+r4:x,b=y+v;if(s.includes(b))continue;s.push(b);const w=a(v,g);for(let k=0;k<w.length;++k){const j=w[k];s.push(y+j)}l=u+(l.length>0?" "+l:l)}return l};function _K(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=a4(t))&&(r&&(r+=" "),r+=n);return r}const a4=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=a4(e[r]))&&(n&&(n+=" "),n+=t);return n};function kK(e,...t){let n,r,a,s=o;function o(c){const u=t.reduce((f,d)=>d(f),e());return n=bK(u),r=n.cache.get,a=n.cache.set,s=l,l(c)}function l(c){const u=r(c);if(u)return u;const f=jK(c,n);return a(c,f),f}return function(){return s(_K.apply(null,arguments))}}const kn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},i4=/^\[(?:([a-z-]+):)?(.+)\]$/i,SK=/^\d+\/\d+$/,NK=new Set(["px","full","screen"]),CK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,AK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,EK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,PK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,TK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$s=e=>Zu(e)||NK.has(e)||SK.test(e),Io=e=>of(e,"length",FK),Zu=e=>!!e&&!Number.isNaN(Number(e)),aw=e=>of(e,"number",Zu),Lf=e=>!!e&&Number.isInteger(Number(e)),OK=e=>e.endsWith("%")&&Zu(e.slice(0,-1)),Et=e=>i4.test(e),Ro=e=>CK.test(e),IK=new Set(["length","size","percentage"]),RK=e=>of(e,IK,s4),MK=e=>of(e,"position",s4),DK=new Set(["image","url"]),$K=e=>of(e,DK,UK),LK=e=>of(e,"",BK),Ff=()=>!0,of=(e,t,n)=>{const r=i4.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},FK=e=>AK.test(e)&&!EK.test(e),s4=()=>!1,BK=e=>PK.test(e),UK=e=>TK.test(e),zK=()=>{const e=kn("colors"),t=kn("spacing"),n=kn("blur"),r=kn("brightness"),a=kn("borderColor"),s=kn("borderRadius"),o=kn("borderSpacing"),l=kn("borderWidth"),c=kn("contrast"),u=kn("grayscale"),f=kn("hueRotate"),d=kn("invert"),h=kn("gap"),m=kn("gradientColorStops"),g=kn("gradientColorStopPositions"),v=kn("inset"),x=kn("margin"),y=kn("opacity"),b=kn("padding"),w=kn("saturate"),k=kn("scale"),j=kn("sepia"),_=kn("skew"),S=kn("space"),T=kn("translate"),N=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",Et,t],B=()=>[Et,t],E=()=>["",$s,Io],R=()=>["auto",Zu,Et],P=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",Et],C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[Zu,Et];return{cacheSize:500,separator:":",theme:{colors:[Ff],spacing:[$s,Io],blur:["none","",Ro,Et],brightness:z(),borderColor:[e],borderRadius:["none","","full",Ro,Et],borderSpacing:B(),borderWidth:E(),contrast:z(),grayscale:F(),hueRotate:z(),invert:F(),gap:B(),gradientColorStops:[e],gradientColorStopPositions:[OK,Io],inset:D(),margin:D(),opacity:z(),padding:B(),saturate:z(),scale:z(),sepia:F(),skew:z(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",Et]}],container:["container"],columns:[{columns:[Ro]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...P(),Et]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Lf,Et]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Et]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Lf,Et]}],"grid-cols":[{"grid-cols":[Ff]}],"col-start-end":[{col:["auto",{span:["full",Lf,Et]},Et]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[Ff]}],"row-start-end":[{row:["auto",{span:[Lf,Et]},Et]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Et]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Et]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Et,t]}],"min-w":[{"min-w":[Et,t,"min","max","fit"]}],"max-w":[{"max-w":[Et,t,"none","full","min","max","fit","prose",{screen:[Ro]},Ro]}],h:[{h:[Et,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Et,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Et,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Et,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ro,Io]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",aw]}],"font-family":[{font:[Ff]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Et]}],"line-clamp":[{"line-clamp":["none",Zu,aw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$s,Et]}],"list-image":[{"list-image":["none",Et]}],"list-style-type":[{list:["none","disc","decimal",Et]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",$s,Io]}],"underline-offset":[{"underline-offset":["auto",$s,Et]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Et]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Et]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...P(),MK]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",RK]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},$K]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:U()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[$s,Et]}],"outline-w":[{outline:[$s,Io]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[$s,Io]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ro,LK]}],"shadow-color":[{shadow:[Ff]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ro,Et]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Et]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",Et]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",Et]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Lf,Et]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Et]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Et]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Et]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[$s,Io,aw]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},qK=kK(zK);function ke(...e){return qK(Xt(e))}function WK(e,t){if(!t||t.length===0)return;const n=Object.keys(t[0]),r=[n.join(","),...t.map(l=>n.map(c=>{const u=l[c],f=u==null?"":String(u),d='"'+f.replace(/"/g,'""')+'"';return/[",\n]/.test(f)?d:f}).join(","))].join(`
`),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),o=URL.createObjectURL(a);s.setAttribute("href",o),s.setAttribute("download",e),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}function o4(e){if(typeof e=="string"){let t=e.replace(/([A-Z0-9._%+-]+)@([A-Z0-9.-]+)\.[A-Z]{2,}/gi,"***@***");return t=t.replace(/\b\+?\d[\d\s-]{6,}\b/g,n=>n.slice(0,Math.max(0,n.length-4)).replace(/\d/g,"*")+n.slice(-4)),t=t.replace(/(\d+\.\d+\.\d+)\.\d+/g,"$1.*"),t}if(e&&typeof e=="object"){const t=Array.isArray(e)?[]:{};for(const n of Object.keys(e))t[n]=o4(e[n]);return t}return e}const HK=zV,l4=p.forwardRef(({className:e,...t},n)=>i.jsx(DL,{ref:n,className:ke("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));l4.displayName=DL.displayName;const VK=up("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),c4=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx($L,{ref:r,className:ke(VK({variant:t}),e),...n}));c4.displayName=$L.displayName;const KK=p.forwardRef(({className:e,...t},n)=>i.jsx(BL,{ref:n,className:ke("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));KK.displayName=BL.displayName;const u4=p.forwardRef(({className:e,...t},n)=>i.jsx(UL,{ref:n,className:ke("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(hp,{className:"h-4 w-4"})}));u4.displayName=UL.displayName;const d4=p.forwardRef(({className:e,...t},n)=>i.jsx(LL,{ref:n,className:ke("text-sm font-semibold",e),...t}));d4.displayName=LL.displayName;const f4=p.forwardRef(({className:e,...t},n)=>i.jsx(FL,{ref:n,className:ke("text-sm opacity-90",e),...t}));f4.displayName=FL.displayName;function GK(){const{toasts:e}=Yc();return i.jsxs(HK,{children:[e.map(function({id:t,title:n,description:r,action:a,...s}){return i.jsxs(c4,{...s,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(d4,{children:n}),r&&i.jsx(f4,{children:r})]}),a,i.jsx(u4,{})]},t)}),i.jsx(l4,{})]})}var jP=["light","dark"],YK="(prefers-color-scheme: dark)",XK=p.createContext(void 0),JK={setTheme:e=>{},themes:[]},QK=()=>{var e;return(e=p.useContext(XK))!=null?e:JK};p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:s,value:o,attrs:l,nonce:c})=>{let u=s==="system",f=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=a?jP.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,v=!1,x=!0)=>{let y=o?o[g]:g,b=v?g+"|| ''":`'${y}'`,w="";return a&&x&&!v&&jP.includes(g)&&(w+=`d.style.colorScheme = '${g}';`),n==="class"?v||y?w+=`c.add(${b})`:w+="null":y&&(w+=`d[s](n,${b})`),w},m=e?`!function(){${f}${h(e)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${YK}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${u?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var ZK=e=>{switch(e){case"success":return nG;case"info":return aG;case"warning":return rG;case"error":return iG;default:return null}},eG=Array(12).fill(0),tG=({visible:e,className:t})=>Y.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Y.createElement("div",{className:"sonner-spinner"},eG.map((n,r)=>Y.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),nG=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),rG=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),aG=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),iG=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Y.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),sG=Y.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Y.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),oG=()=>{let[e,t]=Y.useState(document.hidden);return Y.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},E1=1,lG=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:E1++,s=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),s?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0,s,o=r.then(async c=>{if(s=["resolve",c],Y.isValidElement(c))a=!1,this.create({id:n,type:"default",message:c});else if(uG(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:f})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:f})}}).catch(async c=>{if(s=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:f})}}).finally(()=>{var c;a&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>s[0]==="reject"?u(s[1]):c(s[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||E1++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ga=new lG,cG=(e,t)=>{let n=(t==null?void 0:t.id)||E1++;return ga.addToast({title:e,...t,id:n}),n},uG=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",dG=cG,fG=()=>ga.toasts,hG=()=>ga.getActiveToasts(),Le=Object.assign(dG,{success:ga.success,info:ga.info,warning:ga.warning,error:ga.error,custom:ga.custom,message:ga.message,promise:ga.promise,dismiss:ga.dismiss,loading:ga.loading},{getHistory:fG,getToasts:hG});function mG(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}mG(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function hg(e){return e.label!==void 0}var pG=3,gG="32px",vG="16px",_P=4e3,xG=356,yG=14,bG=20,wG=200;function Ii(...e){return e.filter(Boolean).join(" ")}function jG(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var _G=e=>{var t,n,r,a,s,o,l,c,u,f,d;let{invert:h,toast:m,unstyled:g,interacting:v,setHeights:x,visibleToasts:y,heights:b,index:w,toasts:k,expanded:j,removeToast:_,defaultRichColors:S,closeButton:T,style:N,cancelButtonStyle:A,actionButtonStyle:D,className:B="",descriptionClassName:E="",duration:R,position:P,gap:U,loadingIcon:L,expandByDefault:O,classNames:F,icons:C,closeButtonAriaLabel:z="Close toast",pauseWhenPageIsHidden:I}=e,[$,K]=Y.useState(null),[X,V]=Y.useState(null),[W,ae]=Y.useState(!1),[G,le]=Y.useState(!1),[se,Q]=Y.useState(!1),[_e,xe]=Y.useState(!1),[J,fe]=Y.useState(!1),[Ce,Te]=Y.useState(0),[Ee,ze]=Y.useState(0),gt=Y.useRef(m.duration||R||_P),ut=Y.useRef(null),ee=Y.useRef(null),We=w===0,st=w+1<=y,oe=m.type,ve=m.dismissible!==!1,De=m.className||"",Me=m.descriptionClassName||"",Z=Y.useMemo(()=>b.findIndex(te=>te.toastId===m.id)||0,[b,m.id]),Be=Y.useMemo(()=>{var te;return(te=m.closeButton)!=null?te:T},[m.closeButton,T]),xt=Y.useMemo(()=>m.duration||R||_P,[m.duration,R]),yt=Y.useRef(0),He=Y.useRef(0),lt=Y.useRef(0),mt=Y.useRef(null),[en,ue]=P.split("-"),Pe=Y.useMemo(()=>b.reduce((te,ye,Se)=>Se>=Z?te:te+ye.height,0),[b,Z]),H=oG(),we=m.invert||h,ge=oe==="loading";He.current=Y.useMemo(()=>Z*U+Pe,[Z,Pe]),Y.useEffect(()=>{gt.current=xt},[xt]),Y.useEffect(()=>{ae(!0)},[]),Y.useEffect(()=>{let te=ee.current;if(te){let ye=te.getBoundingClientRect().height;return ze(ye),x(Se=>[{toastId:m.id,height:ye,position:m.position},...Se]),()=>x(Se=>Se.filter(Ae=>Ae.toastId!==m.id))}},[x,m.id]),Y.useLayoutEffect(()=>{if(!W)return;let te=ee.current,ye=te.style.height;te.style.height="auto";let Se=te.getBoundingClientRect().height;te.style.height=ye,ze(Se),x(Ae=>Ae.find(dt=>dt.toastId===m.id)?Ae.map(dt=>dt.toastId===m.id?{...dt,height:Se}:dt):[{toastId:m.id,height:Se,position:m.position},...Ae])},[W,m.title,m.description,x,m.id]);let Ue=Y.useCallback(()=>{le(!0),Te(He.current),x(te=>te.filter(ye=>ye.toastId!==m.id)),setTimeout(()=>{_(m)},wG)},[m,_,x,He]);Y.useEffect(()=>{if(m.promise&&oe==="loading"||m.duration===1/0||m.type==="loading")return;let te;return j||v||I&&H?(()=>{if(lt.current<yt.current){let ye=new Date().getTime()-yt.current;gt.current=gt.current-ye}lt.current=new Date().getTime()})():gt.current!==1/0&&(yt.current=new Date().getTime(),te=setTimeout(()=>{var ye;(ye=m.onAutoClose)==null||ye.call(m,m),Ue()},gt.current)),()=>clearTimeout(te)},[j,v,m,oe,I,H,Ue]),Y.useEffect(()=>{m.delete&&Ue()},[Ue,m.delete]);function tt(){var te,ye,Se;return C!=null&&C.loading?Y.createElement("div",{className:Ii(F==null?void 0:F.loader,(te=m==null?void 0:m.classNames)==null?void 0:te.loader,"sonner-loader"),"data-visible":oe==="loading"},C.loading):L?Y.createElement("div",{className:Ii(F==null?void 0:F.loader,(ye=m==null?void 0:m.classNames)==null?void 0:ye.loader,"sonner-loader"),"data-visible":oe==="loading"},L):Y.createElement(tG,{className:Ii(F==null?void 0:F.loader,(Se=m==null?void 0:m.classNames)==null?void 0:Se.loader),visible:oe==="loading"})}return Y.createElement("li",{tabIndex:0,ref:ee,className:Ii(B,De,F==null?void 0:F.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,F==null?void 0:F.default,F==null?void 0:F[oe],(n=m==null?void 0:m.classNames)==null?void 0:n[oe]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:S,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":W,"data-promise":!!m.promise,"data-swiped":J,"data-removed":G,"data-visible":st,"data-y-position":en,"data-x-position":ue,"data-index":w,"data-front":We,"data-swiping":se,"data-dismissible":ve,"data-type":oe,"data-invert":we,"data-swipe-out":_e,"data-swipe-direction":X,"data-expanded":!!(j||O&&W),style:{"--index":w,"--toasts-before":w,"--z-index":k.length-w,"--offset":`${G?Ce:He.current}px`,"--initial-height":O?"auto":`${Ee}px`,...N,...m.style},onDragEnd:()=>{Q(!1),K(null),mt.current=null},onPointerDown:te=>{ge||!ve||(ut.current=new Date,Te(He.current),te.target.setPointerCapture(te.pointerId),te.target.tagName!=="BUTTON"&&(Q(!0),mt.current={x:te.clientX,y:te.clientY}))},onPointerUp:()=>{var te,ye,Se,Ae;if(_e||!ve)return;mt.current=null;let dt=Number(((te=ee.current)==null?void 0:te.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),At=Number(((ye=ee.current)==null?void 0:ye.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),dn=new Date().getTime()-((Se=ut.current)==null?void 0:Se.getTime()),Jt=$==="x"?dt:At,Ht=Math.abs(Jt)/dn;if(Math.abs(Jt)>=bG||Ht>.11){Te(He.current),(Ae=m.onDismiss)==null||Ae.call(m,m),V($==="x"?dt>0?"right":"left":At>0?"down":"up"),Ue(),xe(!0),fe(!1);return}Q(!1),K(null)},onPointerMove:te=>{var ye,Se,Ae,dt;if(!mt.current||!ve||((ye=window.getSelection())==null?void 0:ye.toString().length)>0)return;let At=te.clientY-mt.current.y,dn=te.clientX-mt.current.x,Jt=(Se=e.swipeDirections)!=null?Se:jG(P);!$&&(Math.abs(dn)>1||Math.abs(At)>1)&&K(Math.abs(dn)>Math.abs(At)?"x":"y");let Ht={x:0,y:0};$==="y"?(Jt.includes("top")||Jt.includes("bottom"))&&(Jt.includes("top")&&At<0||Jt.includes("bottom")&&At>0)&&(Ht.y=At):$==="x"&&(Jt.includes("left")||Jt.includes("right"))&&(Jt.includes("left")&&dn<0||Jt.includes("right")&&dn>0)&&(Ht.x=dn),(Math.abs(Ht.x)>0||Math.abs(Ht.y)>0)&&fe(!0),(Ae=ee.current)==null||Ae.style.setProperty("--swipe-amount-x",`${Ht.x}px`),(dt=ee.current)==null||dt.style.setProperty("--swipe-amount-y",`${Ht.y}px`)}},Be&&!m.jsx?Y.createElement("button",{"aria-label":z,"data-disabled":ge,"data-close-button":!0,onClick:ge||!ve?()=>{}:()=>{var te;Ue(),(te=m.onDismiss)==null||te.call(m,m)},className:Ii(F==null?void 0:F.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(s=C==null?void 0:C.close)!=null?s:sG):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Y.createElement(Y.Fragment,null,oe||m.icon||m.promise?Y.createElement("div",{"data-icon":"",className:Ii(F==null?void 0:F.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||tt():null,m.type!=="loading"?m.icon||(C==null?void 0:C[oe])||ZK(oe):null):null,Y.createElement("div",{"data-content":"",className:Ii(F==null?void 0:F.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},Y.createElement("div",{"data-title":"",className:Ii(F==null?void 0:F.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?Y.createElement("div",{"data-description":"",className:Ii(E,Me,F==null?void 0:F.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&hg(m.cancel)?Y.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||A,onClick:te=>{var ye,Se;hg(m.cancel)&&ve&&((Se=(ye=m.cancel).onClick)==null||Se.call(ye,te),Ue())},className:Ii(F==null?void 0:F.cancelButton,(f=m==null?void 0:m.classNames)==null?void 0:f.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&hg(m.action)?Y.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||D,onClick:te=>{var ye,Se;hg(m.action)&&((Se=(ye=m.action).onClick)==null||Se.call(ye,te),!te.defaultPrevented&&Ue())},className:Ii(F==null?void 0:F.actionButton,(d=m==null?void 0:m.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function kP(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function kG(e,t){let n={};return[e,t].forEach((r,a)=>{let s=a===1,o=s?"--mobile-offset":"--offset",l=s?vG:gG;function c(u){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var SG=p.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:c,mobileOffset:u,theme:f="light",richColors:d,duration:h,style:m,visibleToasts:g=pG,toastOptions:v,dir:x=kP(),gap:y=yG,loadingIcon:b,icons:w,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:j}=e,[_,S]=Y.useState([]),T=Y.useMemo(()=>Array.from(new Set([r].concat(_.filter(I=>I.position).map(I=>I.position)))),[_,r]),[N,A]=Y.useState([]),[D,B]=Y.useState(!1),[E,R]=Y.useState(!1),[P,U]=Y.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=Y.useRef(null),O=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=Y.useRef(null),C=Y.useRef(!1),z=Y.useCallback(I=>{S($=>{var K;return(K=$.find(X=>X.id===I.id))!=null&&K.delete||ga.dismiss(I.id),$.filter(({id:X})=>X!==I.id)})},[]);return Y.useEffect(()=>ga.subscribe(I=>{if(I.dismiss){S($=>$.map(K=>K.id===I.id?{...K,delete:!0}:K));return}setTimeout(()=>{pL.flushSync(()=>{S($=>{let K=$.findIndex(X=>X.id===I.id);return K!==-1?[...$.slice(0,K),{...$[K],...I},...$.slice(K+1)]:[I,...$]})})})}),[]),Y.useEffect(()=>{if(f!=="system"){U(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let I=window.matchMedia("(prefers-color-scheme: dark)");try{I.addEventListener("change",({matches:$})=>{U($?"dark":"light")})}catch{I.addListener(({matches:K})=>{try{U(K?"dark":"light")}catch(X){console.error(X)}})}},[f]),Y.useEffect(()=>{_.length<=1&&B(!1)},[_]),Y.useEffect(()=>{let I=$=>{var K,X;a.every(V=>$[V]||$.code===V)&&(B(!0),(K=L.current)==null||K.focus()),$.code==="Escape"&&(document.activeElement===L.current||(X=L.current)!=null&&X.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",I),()=>document.removeEventListener("keydown",I)},[a]),Y.useEffect(()=>{if(L.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,C.current=!1)}},[L.current]),Y.createElement("section",{ref:t,"aria-label":`${k} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((I,$)=>{var K;let[X,V]=I.split("-");return _.length?Y.createElement("ol",{key:I,dir:x==="auto"?kP():x,tabIndex:-1,ref:L,className:l,"data-sonner-toaster":!0,"data-theme":P,"data-y-position":X,"data-lifted":D&&_.length>1&&!s,"data-x-position":V,style:{"--front-toast-height":`${((K=N[0])==null?void 0:K.height)||0}px`,"--width":`${xG}px`,"--gap":`${y}px`,...m,...kG(c,u)},onBlur:W=>{C.current&&!W.currentTarget.contains(W.relatedTarget)&&(C.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||C.current||(C.current=!0,F.current=W.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{E||B(!1)},onDragEnd:()=>B(!1),onPointerDown:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||R(!0)},onPointerUp:()=>R(!1)},_.filter(W=>!W.position&&$===0||W.position===I).map((W,ae)=>{var G,le;return Y.createElement(_G,{key:W.id,icons:w,index:ae,toast:W,defaultRichColors:d,duration:(G=v==null?void 0:v.duration)!=null?G:h,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:g,closeButton:(le=v==null?void 0:v.closeButton)!=null?le:o,interacting:E,position:I,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:z,toasts:_.filter(se=>se.position==W.position),heights:N.filter(se=>se.position==W.position),setHeights:A,expandByDefault:s,gap:y,loadingIcon:b,expanded:D,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const h4=({...e})=>{const{theme:t="system"}=QK();return i.jsx(SG,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},SP=Object.freeze(Object.defineProperty({__proto__:null,Toaster:h4,toast:Le},Symbol.toStringTag,{value:"Module"}));var NG=rS[" useId ".trim().toString()]||(()=>{}),CG=0;function rr(e){const[t,n]=p.useState(NG());return Gn(()=>{e||n(r=>r??String(CG++))},[e]),e||(t?`radix-${t}`:"")}const AG=["top","right","bottom","left"],xl=Math.min,Ba=Math.max,Kv=Math.round,mg=Math.floor,Ss=e=>({x:e,y:e}),EG={left:"right",right:"left",bottom:"top",top:"bottom"},PG={start:"end",end:"start"};function P1(e,t,n){return Ba(e,xl(t,n))}function po(e,t){return typeof e=="function"?e(t):e}function go(e){return e.split("-")[0]}function lf(e){return e.split("-")[1]}function aN(e){return e==="x"?"y":"x"}function iN(e){return e==="y"?"height":"width"}const TG=new Set(["top","bottom"]);function bs(e){return TG.has(go(e))?"y":"x"}function sN(e){return aN(bs(e))}function OG(e,t,n){n===void 0&&(n=!1);const r=lf(e),a=sN(e),s=iN(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Gv(o)),[o,Gv(o)]}function IG(e){const t=Gv(e);return[T1(e),t,T1(t)]}function T1(e){return e.replace(/start|end/g,t=>PG[t])}const NP=["left","right"],CP=["right","left"],RG=["top","bottom"],MG=["bottom","top"];function DG(e,t,n){switch(e){case"top":case"bottom":return n?t?CP:NP:t?NP:CP;case"left":case"right":return t?RG:MG;default:return[]}}function $G(e,t,n,r){const a=lf(e);let s=DG(go(e),n==="start",r);return a&&(s=s.map(o=>o+"-"+a),t&&(s=s.concat(s.map(T1)))),s}function Gv(e){return e.replace(/left|right|bottom|top/g,t=>EG[t])}function LG(e){return{top:0,right:0,bottom:0,left:0,...e}}function m4(e){return typeof e!="number"?LG(e):{top:e,right:e,bottom:e,left:e}}function Yv(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function AP(e,t,n){let{reference:r,floating:a}=e;const s=bs(t),o=sN(t),l=iN(o),c=go(t),u=s==="y",f=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,h=r[l]/2-a[l]/2;let m;switch(c){case"top":m={x:f,y:r.y-a.height};break;case"bottom":m={x:f,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-a.width,y:d};break;default:m={x:r.x,y:r.y}}switch(lf(t)){case"start":m[o]-=h*(n&&u?-1:1);break;case"end":m[o]+=h*(n&&u?-1:1);break}return m}const FG=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:d}=AP(u,r,c),h=r,m={},g=0;for(let v=0;v<l.length;v++){const{name:x,fn:y}=l[v],{x:b,y:w,data:k,reset:j}=await y({x:f,y:d,initialPlacement:r,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});f=b??f,d=w??d,m={...m,[x]:{...m[x],...k}},j&&g<=50&&(g++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:f,y:d}=AP(u,h,c)),v=-1)}return{x:f,y:d,placement:h,strategy:a,middlewareData:m}};async function tm(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:s,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=po(t,e),g=m4(m),x=l[h?d==="floating"?"reference":"floating":d],y=Yv(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),b=d==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),k=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},j=Yv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(y.top-j.top+g.top)/k.y,bottom:(j.bottom-y.bottom+g.bottom)/k.y,left:(y.left-j.left+g.left)/k.x,right:(j.right-y.right+g.right)/k.x}}const BG=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:s,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=po(e,t)||{};if(u==null)return{};const d=m4(f),h={x:n,y:r},m=sN(a),g=iN(m),v=await o.getDimensions(u),x=m==="y",y=x?"top":"left",b=x?"bottom":"right",w=x?"clientHeight":"clientWidth",k=s.reference[g]+s.reference[m]-h[m]-s.floating[g],j=h[m]-s.reference[m],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=_?_[w]:0;(!S||!await(o.isElement==null?void 0:o.isElement(_)))&&(S=l.floating[w]||s.floating[g]);const T=k/2-j/2,N=S/2-v[g]/2-1,A=xl(d[y],N),D=xl(d[b],N),B=A,E=S-v[g]-D,R=S/2-v[g]/2+T,P=P1(B,R,E),U=!c.arrow&&lf(a)!=null&&R!==P&&s.reference[g]/2-(R<B?A:D)-v[g]/2<0,L=U?R<B?R-B:R-E:0;return{[m]:h[m]+L,data:{[m]:P,centerOffset:R-P-L,...U&&{alignmentOffset:L}},reset:U}}}),UG=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...x}=po(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=go(a),b=bs(l),w=go(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=h||(w||!v?[Gv(l)]:IG(l)),_=g!=="none";!h&&_&&j.push(...$G(l,v,g,k));const S=[l,...j],T=await tm(t,x),N=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&N.push(T[y]),d){const R=OG(a,o,k);N.push(T[R[0]],T[R[1]])}if(A=[...A,{placement:a,overflows:N}],!N.every(R=>R<=0)){var D,B;const R=(((D=s.flip)==null?void 0:D.index)||0)+1,P=S[R];if(P&&(!(d==="alignment"?b!==bs(P):!1)||A.every(O=>O.overflows[0]>0&&bs(O.placement)===b)))return{data:{index:R,overflows:A},reset:{placement:P}};let U=(B=A.filter(L=>L.overflows[0]<=0).sort((L,O)=>L.overflows[1]-O.overflows[1])[0])==null?void 0:B.placement;if(!U)switch(m){case"bestFit":{var E;const L=(E=A.filter(O=>{if(_){const F=bs(O.placement);return F===b||F==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(F=>F>0).reduce((F,C)=>F+C,0)]).sort((O,F)=>O[1]-F[1])[0])==null?void 0:E[0];L&&(U=L);break}case"initialPlacement":U=l;break}if(a!==U)return{reset:{placement:U}}}return{}}}};function EP(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function PP(e){return AG.some(t=>e[t]>=0)}const zG=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=po(e,t);switch(r){case"referenceHidden":{const s=await tm(t,{...a,elementContext:"reference"}),o=EP(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:PP(o)}}}case"escaped":{const s=await tm(t,{...a,altBoundary:!0}),o=EP(s,n.floating);return{data:{escapedOffsets:o,escaped:PP(o)}}}default:return{}}}}},p4=new Set(["left","top"]);async function qG(e,t){const{placement:n,platform:r,elements:a}=e,s=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=go(n),l=lf(n),c=bs(n)==="y",u=p4.has(o)?-1:1,f=s&&c?-1:1,d=po(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*f,y:h*u}:{x:h*u,y:m*f}}const WG=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:s,placement:o,middlewareData:l}=t,c=await qG(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:s+c.y,data:{...c,placement:o}}}}},HG=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:y,y:b}=x;return{x:y,y:b}}},...c}=po(e,t),u={x:n,y:r},f=await tm(t,c),d=bs(go(a)),h=aN(d);let m=u[h],g=u[d];if(s){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=m+f[x],w=m-f[y];m=P1(b,m,w)}if(o){const x=d==="y"?"top":"left",y=d==="y"?"bottom":"right",b=g+f[x],w=g-f[y];g=P1(b,g,w)}const v=l.fn({...t,[h]:m,[d]:g});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:s,[d]:o}}}}}},VG=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:s,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=po(e,t),f={x:n,y:r},d=bs(a),h=aN(d);let m=f[h],g=f[d];const v=po(l,t),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=h==="y"?"height":"width",k=s.reference[h]-s.floating[w]+x.mainAxis,j=s.reference[h]+s.reference[w]-x.mainAxis;m<k?m=k:m>j&&(m=j)}if(u){var y,b;const w=h==="y"?"width":"height",k=p4.has(go(a)),j=s.reference[d]-s.floating[w]+(k&&((y=o.offset)==null?void 0:y[d])||0)+(k?0:x.crossAxis),_=s.reference[d]+s.reference[w]+(k?0:((b=o.offset)==null?void 0:b[d])||0)-(k?x.crossAxis:0);g<j?g=j:g>_&&(g=_)}return{[h]:m,[d]:g}}}},KG=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:s,platform:o,elements:l}=t,{apply:c=()=>{},...u}=po(e,t),f=await tm(t,u),d=go(a),h=lf(a),m=bs(a)==="y",{width:g,height:v}=s.floating;let x,y;d==="top"||d==="bottom"?(x=d,y=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=d,x=h==="end"?"top":"bottom");const b=v-f.top-f.bottom,w=g-f.left-f.right,k=xl(v-f[x],b),j=xl(g-f[y],w),_=!t.middlewareData.shift;let S=k,T=j;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(S=b),_&&!h){const A=Ba(f.left,0),D=Ba(f.right,0),B=Ba(f.top,0),E=Ba(f.bottom,0);m?T=g-2*(A!==0||D!==0?A+D:Ba(f.left,f.right)):S=v-2*(B!==0||E!==0?B+E:Ba(f.top,f.bottom))}await c({...t,availableWidth:T,availableHeight:S});const N=await o.getDimensions(l.floating);return g!==N.width||v!==N.height?{reset:{rects:!0}}:{}}}};function Iy(){return typeof window<"u"}function cf(e){return g4(e)?(e.nodeName||"").toLowerCase():"#document"}function Va(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Is(e){var t;return(t=(g4(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function g4(e){return Iy()?e instanceof Node||e instanceof Va(e).Node:!1}function ts(e){return Iy()?e instanceof Element||e instanceof Va(e).Element:!1}function Es(e){return Iy()?e instanceof HTMLElement||e instanceof Va(e).HTMLElement:!1}function TP(e){return!Iy()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Va(e).ShadowRoot}const GG=new Set(["inline","contents"]);function mp(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=ns(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!GG.has(a)}const YG=new Set(["table","td","th"]);function XG(e){return YG.has(cf(e))}const JG=[":popover-open",":modal"];function Ry(e){return JG.some(t=>{try{return e.matches(t)}catch{return!1}})}const QG=["transform","translate","scale","rotate","perspective"],ZG=["transform","translate","scale","rotate","perspective","filter"],eY=["paint","layout","strict","content"];function oN(e){const t=lN(),n=ts(e)?ns(e):e;return QG.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||ZG.some(r=>(n.willChange||"").includes(r))||eY.some(r=>(n.contain||"").includes(r))}function tY(e){let t=yl(e);for(;Es(t)&&!Sd(t);){if(oN(t))return t;if(Ry(t))return null;t=yl(t)}return null}function lN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const nY=new Set(["html","body","#document"]);function Sd(e){return nY.has(cf(e))}function ns(e){return Va(e).getComputedStyle(e)}function My(e){return ts(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function yl(e){if(cf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||TP(e)&&e.host||Is(e);return TP(t)?t.host:t}function v4(e){const t=yl(e);return Sd(t)?e.ownerDocument?e.ownerDocument.body:e.body:Es(t)&&mp(t)?t:v4(t)}function nm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=v4(e),s=a===((r=e.ownerDocument)==null?void 0:r.body),o=Va(a);if(s){const l=O1(o);return t.concat(o,o.visualViewport||[],mp(a)?a:[],l&&n?nm(l):[])}return t.concat(a,nm(a,[],n))}function O1(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function x4(e){const t=ns(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Es(e),s=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=Kv(n)!==s||Kv(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function cN(e){return ts(e)?e:e.contextElement}function ed(e){const t=cN(e);if(!Es(t))return Ss(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:s}=x4(t);let o=(s?Kv(n.width):n.width)/r,l=(s?Kv(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const rY=Ss(0);function y4(e){const t=Va(e);return!lN()||!t.visualViewport?rY:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function aY(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Va(e)?!1:t}function Ec(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),s=cN(e);let o=Ss(1);t&&(r?ts(r)&&(o=ed(r)):o=ed(e));const l=aY(s,n,r)?y4(s):Ss(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,f=a.width/o.x,d=a.height/o.y;if(s){const h=Va(s),m=r&&ts(r)?Va(r):r;let g=h,v=O1(g);for(;v&&r&&m!==g;){const x=ed(v),y=v.getBoundingClientRect(),b=ns(v),w=y.left+(v.clientLeft+parseFloat(b.paddingLeft))*x.x,k=y.top+(v.clientTop+parseFloat(b.paddingTop))*x.y;c*=x.x,u*=x.y,f*=x.x,d*=x.y,c+=w,u+=k,g=Va(v),v=O1(g)}}return Yv({width:f,height:d,x:c,y:u})}function uN(e,t){const n=My(e).scrollLeft;return t?t.left+n:Ec(Is(e)).left+n}function b4(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:uN(e,r)),s=r.top+t.scrollTop;return{x:a,y:s}}function iY(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const s=a==="fixed",o=Is(r),l=t?Ry(t.floating):!1;if(r===o||l&&s)return n;let c={scrollLeft:0,scrollTop:0},u=Ss(1);const f=Ss(0),d=Es(r);if((d||!d&&!s)&&((cf(r)!=="body"||mp(o))&&(c=My(r)),Es(r))){const m=Ec(r);u=ed(r),f.x=m.x+r.clientLeft,f.y=m.y+r.clientTop}const h=o&&!d&&!s?b4(o,c,!0):Ss(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+h.x,y:n.y*u.y-c.scrollTop*u.y+f.y+h.y}}function sY(e){return Array.from(e.getClientRects())}function oY(e){const t=Is(e),n=My(e),r=e.ownerDocument.body,a=Ba(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Ba(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+uN(e);const l=-n.scrollTop;return ns(r).direction==="rtl"&&(o+=Ba(t.clientWidth,r.clientWidth)-a),{width:a,height:s,x:o,y:l}}function lY(e,t){const n=Va(e),r=Is(e),a=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){s=a.width,o=a.height;const u=lN();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:s,height:o,x:l,y:c}}const cY=new Set(["absolute","fixed"]);function uY(e,t){const n=Ec(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,s=Es(e)?ed(e):Ss(1),o=e.clientWidth*s.x,l=e.clientHeight*s.y,c=a*s.x,u=r*s.y;return{width:o,height:l,x:c,y:u}}function OP(e,t,n){let r;if(t==="viewport")r=lY(e,n);else if(t==="document")r=oY(Is(e));else if(ts(t))r=uY(t,n);else{const a=y4(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Yv(r)}function w4(e,t){const n=yl(e);return n===t||!ts(n)||Sd(n)?!1:ns(n).position==="fixed"||w4(n,t)}function dY(e,t){const n=t.get(e);if(n)return n;let r=nm(e,[],!1).filter(l=>ts(l)&&cf(l)!=="body"),a=null;const s=ns(e).position==="fixed";let o=s?yl(e):e;for(;ts(o)&&!Sd(o);){const l=ns(o),c=oN(o);!c&&l.position==="fixed"&&(a=null),(s?!c&&!a:!c&&l.position==="static"&&!!a&&cY.has(a.position)||mp(o)&&!c&&w4(e,o))?r=r.filter(f=>f!==o):a=l,o=yl(o)}return t.set(e,r),r}function fY(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Ry(t)?[]:dY(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,f)=>{const d=OP(t,f,a);return u.top=Ba(d.top,u.top),u.right=xl(d.right,u.right),u.bottom=xl(d.bottom,u.bottom),u.left=Ba(d.left,u.left),u},OP(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function hY(e){const{width:t,height:n}=x4(e);return{width:t,height:n}}function mY(e,t,n){const r=Es(t),a=Is(t),s=n==="fixed",o=Ec(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const c=Ss(0);function u(){c.x=uN(a)}if(r||!r&&!s)if((cf(t)!=="body"||mp(a))&&(l=My(t)),r){const m=Ec(t,!0,s,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();s&&!r&&a&&u();const f=a&&!r&&!s?b4(a,l):Ss(0),d=o.left+l.scrollLeft-c.x-f.x,h=o.top+l.scrollTop-c.y-f.y;return{x:d,y:h,width:o.width,height:o.height}}function iw(e){return ns(e).position==="static"}function IP(e,t){if(!Es(e)||ns(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Is(e)===n&&(n=n.ownerDocument.body),n}function j4(e,t){const n=Va(e);if(Ry(e))return n;if(!Es(e)){let a=yl(e);for(;a&&!Sd(a);){if(ts(a)&&!iw(a))return a;a=yl(a)}return n}let r=IP(e,t);for(;r&&XG(r)&&iw(r);)r=IP(r,t);return r&&Sd(r)&&iw(r)&&!oN(r)?n:r||tY(e)||n}const pY=async function(e){const t=this.getOffsetParent||j4,n=this.getDimensions,r=await n(e.floating);return{reference:mY(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function gY(e){return ns(e).direction==="rtl"}const vY={convertOffsetParentRelativeRectToViewportRelativeRect:iY,getDocumentElement:Is,getClippingRect:fY,getOffsetParent:j4,getElementRects:pY,getClientRects:sY,getDimensions:hY,getScale:ed,isElement:ts,isRTL:gY};function _4(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function xY(e,t){let n=null,r;const a=Is(e);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=e.getBoundingClientRect(),{left:f,top:d,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=mg(d),v=mg(a.clientWidth-(f+h)),x=mg(a.clientHeight-(d+m)),y=mg(f),w={rootMargin:-g+"px "+-v+"px "+-x+"px "+-y+"px",threshold:Ba(0,xl(1,c))||1};let k=!0;function j(_){const S=_[0].intersectionRatio;if(S!==c){if(!k)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!_4(u,e.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{n=new IntersectionObserver(j,w)}n.observe(e)}return o(!0),s}function yY(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=cN(e),f=a||s?[...u?nm(u):[],...nm(t)]:[];f.forEach(y=>{a&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=u&&l?xY(u,n):null;let h=-1,m=null;o&&(m=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let g,v=c?Ec(e):null;c&&x();function x(){const y=Ec(e);v&&!_4(v,y)&&n(),v=y,g=requestAnimationFrame(x)}return n(),()=>{var y;f.forEach(b=>{a&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d==null||d(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const bY=WG,wY=HG,jY=UG,_Y=KG,kY=zG,RP=BG,SY=VG,NY=(e,t,n)=>{const r=new Map,a={platform:vY,...n},s={...a.platform,_c:r};return FG(e,t,{...a,platform:s})};var CY=typeof document<"u",AY=function(){},hv=CY?p.useLayoutEffect:AY;function Xv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Xv(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const s=a[r];if(!(s==="_owner"&&e.$$typeof)&&!Xv(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function k4(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function MP(e,t){const n=k4(e);return Math.round(t*n)/n}function sw(e){const t=p.useRef(e);return hv(()=>{t.current=e}),t}function EY(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,d]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(r);Xv(h,r)||m(r);const[g,v]=p.useState(null),[x,y]=p.useState(null),b=p.useCallback(O=>{O!==_.current&&(_.current=O,v(O))},[]),w=p.useCallback(O=>{O!==S.current&&(S.current=O,y(O))},[]),k=s||g,j=o||x,_=p.useRef(null),S=p.useRef(null),T=p.useRef(f),N=c!=null,A=sw(c),D=sw(a),B=sw(u),E=p.useCallback(()=>{if(!_.current||!S.current)return;const O={placement:t,strategy:n,middleware:h};D.current&&(O.platform=D.current),NY(_.current,S.current,O).then(F=>{const C={...F,isPositioned:B.current!==!1};R.current&&!Xv(T.current,C)&&(T.current=C,Gc.flushSync(()=>{d(C)}))})},[h,t,n,D,B]);hv(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(O=>({...O,isPositioned:!1})))},[u]);const R=p.useRef(!1);hv(()=>(R.current=!0,()=>{R.current=!1}),[]),hv(()=>{if(k&&(_.current=k),j&&(S.current=j),k&&j){if(A.current)return A.current(k,j,E);E()}},[k,j,E,A,N]);const P=p.useMemo(()=>({reference:_,floating:S,setReference:b,setFloating:w}),[b,w]),U=p.useMemo(()=>({reference:k,floating:j}),[k,j]),L=p.useMemo(()=>{const O={position:n,left:0,top:0};if(!U.floating)return O;const F=MP(U.floating,f.x),C=MP(U.floating,f.y);return l?{...O,transform:"translate("+F+"px, "+C+"px)",...k4(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:C}},[n,l,U.floating,f.x,f.y]);return p.useMemo(()=>({...f,update:E,refs:P,elements:U,floatingStyles:L}),[f,E,P,U,L])}const PY=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?RP({element:r.current,padding:a}).fn(n):{}:r?RP({element:r,padding:a}).fn(n):{}}}},TY=(e,t)=>({...bY(e),options:[e,t]}),OY=(e,t)=>({...wY(e),options:[e,t]}),IY=(e,t)=>({...SY(e),options:[e,t]}),RY=(e,t)=>({...jY(e),options:[e,t]}),MY=(e,t)=>({..._Y(e),options:[e,t]}),DY=(e,t)=>({...kY(e),options:[e,t]}),$Y=(e,t)=>({...PY(e),options:[e,t]});var LY="Arrow",S4=p.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...s}=e;return i.jsx(Ye.svg,{...s,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});S4.displayName=LY;var FY=S4;function dN(e){const[t,n]=p.useState(void 0);return Gn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const s=a[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var fN="Popper",[N4,Al]=wr(fN),[BY,C4]=N4(fN),A4=e=>{const{__scopePopper:t,children:n}=e,[r,a]=p.useState(null);return i.jsx(BY,{scope:t,anchor:r,onAnchorChange:a,children:n})};A4.displayName=fN;var E4="PopperAnchor",P4=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,s=C4(E4,n),o=p.useRef(null),l=St(t,o);return p.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(Ye.div,{...a,ref:l})});P4.displayName=E4;var hN="PopperContent",[UY,zY]=N4(hN),T4=p.forwardRef((e,t)=>{var W,ae,G,le,se,Q;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=e,x=C4(hN,n),[y,b]=p.useState(null),w=St(t,_e=>b(_e)),[k,j]=p.useState(null),_=dN(k),S=(_==null?void 0:_.width)??0,T=(_==null?void 0:_.height)??0,N=r+(s!=="center"?"-"+s:""),A=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},D=Array.isArray(u)?u:[u],B=D.length>0,E={padding:A,boundary:D.filter(WY),altBoundary:B},{refs:R,floatingStyles:P,placement:U,isPositioned:L,middlewareData:O}=EY({strategy:"fixed",placement:N,whileElementsMounted:(..._e)=>yY(..._e,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[TY({mainAxis:a+T,alignmentAxis:o}),c&&OY({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?IY():void 0,...E}),c&&RY({...E}),MY({...E,apply:({elements:_e,rects:xe,availableWidth:J,availableHeight:fe})=>{const{width:Ce,height:Te}=xe.reference,Ee=_e.floating.style;Ee.setProperty("--radix-popper-available-width",`${J}px`),Ee.setProperty("--radix-popper-available-height",`${fe}px`),Ee.setProperty("--radix-popper-anchor-width",`${Ce}px`),Ee.setProperty("--radix-popper-anchor-height",`${Te}px`)}}),k&&$Y({element:k,padding:l}),HY({arrowWidth:S,arrowHeight:T}),h&&DY({strategy:"referenceHidden",...E})]}),[F,C]=R4(U),z=Hn(g);Gn(()=>{L&&(z==null||z())},[L,z]);const I=(W=O.arrow)==null?void 0:W.x,$=(ae=O.arrow)==null?void 0:ae.y,K=((G=O.arrow)==null?void 0:G.centerOffset)!==0,[X,V]=p.useState();return Gn(()=>{y&&V(window.getComputedStyle(y).zIndex)},[y]),i.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...P,transform:L?P.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:X,"--radix-popper-transform-origin":[(le=O.transformOrigin)==null?void 0:le.x,(se=O.transformOrigin)==null?void 0:se.y].join(" "),...((Q=O.hide)==null?void 0:Q.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(UY,{scope:n,placedSide:F,onArrowChange:j,arrowX:I,arrowY:$,shouldHideArrow:K,children:i.jsx(Ye.div,{"data-side":F,"data-align":C,...v,ref:w,style:{...v.style,animation:L?void 0:"none"}})})})});T4.displayName=hN;var O4="PopperArrow",qY={top:"bottom",right:"left",bottom:"top",left:"right"},I4=p.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,s=zY(O4,r),o=qY[s.placedSide];return i.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:i.jsx(FY,{...a,ref:n,style:{...a.style,display:"block"}})})});I4.displayName=O4;function WY(e){return e!==null}var HY=e=>({name:"transformOrigin",options:e,fn(t){var x,y,b;const{placement:n,rects:r,middlewareData:a}=t,o=((x=a.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,f]=R4(n),d={start:"0%",center:"50%",end:"100%"}[f],h=(((y=a.arrow)==null?void 0:y.x)??0)+l/2,m=(((b=a.arrow)==null?void 0:b.y)??0)+c/2;let g="",v="";return u==="bottom"?(g=o?d:`${h}px`,v=`${-c}px`):u==="top"?(g=o?d:`${h}px`,v=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,v=o?d:`${m}px`):u==="left"&&(g=`${r.floating.width+c}px`,v=o?d:`${m}px`),{data:{x:g,y:v}}}});function R4(e){const[t,n="center"]=e.split("-");return[t,n]}var Dy=A4,pp=P4,$y=T4,Ly=I4,[Fy,S3e]=wr("Tooltip",[Al]),By=Al(),M4="TooltipProvider",VY=700,I1="tooltip.open",[KY,mN]=Fy(M4),D4=e=>{const{__scopeTooltip:t,delayDuration:n=VY,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:s}=e,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(KY,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:s})};D4.displayName=M4;var rm="Tooltip",[GY,Uy]=Fy(rm),$4=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:s,disableHoverableContent:o,delayDuration:l}=e,c=mN(rm,e.__scopeTooltip),u=By(t),[f,d]=p.useState(null),h=rr(),m=p.useRef(0),g=o??c.disableHoverableContent,v=l??c.delayDuration,x=p.useRef(!1),[y,b]=Pa({prop:r,defaultProp:a??!1,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(I1))):c.onClose(),s==null||s(S)},caller:rm}),w=p.useMemo(()=>y?x.current?"delayed-open":"instant-open":"closed",[y]),k=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x.current=!1,b(!0)},[b]),j=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b(!1)},[b]),_=p.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,b(!0),m.current=0},v)},[v,b]);return p.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),i.jsx(Dy,{...u,children:i.jsx(GY,{scope:t,contentId:h,open:y,stateAttribute:w,trigger:f,onTriggerChange:d,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayedRef.current?_():k()},[c.isOpenDelayedRef,_,k]),onTriggerLeave:p.useCallback(()=>{g?j():(window.clearTimeout(m.current),m.current=0)},[j,g]),onOpen:k,onClose:j,disableHoverableContent:g,children:n})})};$4.displayName=rm;var R1="TooltipTrigger",L4=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Uy(R1,n),s=mN(R1,n),o=By(n),l=p.useRef(null),c=St(t,l,a.onTriggerChange),u=p.useRef(!1),f=p.useRef(!1),d=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),i.jsx(pp,{asChild:!0,...o,children:i.jsx(Ye.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:Ie(e.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!s.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:Ie(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:Ie(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ie(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Ie(e.onBlur,a.onClose),onClick:Ie(e.onClick,a.onClose)})})});L4.displayName=R1;var YY="TooltipPortal",[N3e,XY]=Fy(YY,{forceMount:void 0}),Nd="TooltipContent",F4=p.forwardRef((e,t)=>{const n=XY(Nd,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...s}=e,o=Uy(Nd,e.__scopeTooltip);return i.jsx(mr,{present:r||o.open,children:o.disableHoverableContent?i.jsx(B4,{side:a,...s,ref:t}):i.jsx(JY,{side:a,...s,ref:t})})}),JY=p.forwardRef((e,t)=>{const n=Uy(Nd,e.__scopeTooltip),r=mN(Nd,e.__scopeTooltip),a=p.useRef(null),s=St(t,a),[o,l]=p.useState(null),{trigger:c,onClose:u}=n,f=a.current,{onPointerInTransitChange:d}=r,h=p.useCallback(()=>{l(null),d(!1)},[d]),m=p.useCallback((g,v)=>{const x=g.currentTarget,y={x:g.clientX,y:g.clientY},b=nX(y,x.getBoundingClientRect()),w=rX(y,b),k=aX(v.getBoundingClientRect()),j=sX([...w,...k]);l(j),d(!0)},[d]);return p.useEffect(()=>()=>h(),[h]),p.useEffect(()=>{if(c&&f){const g=x=>m(x,f),v=x=>m(x,c);return c.addEventListener("pointerleave",g),f.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",g),f.removeEventListener("pointerleave",v)}}},[c,f,m,h]),p.useEffect(()=>{if(o){const g=v=>{const x=v.target,y={x:v.clientX,y:v.clientY},b=(c==null?void 0:c.contains(x))||(f==null?void 0:f.contains(x)),w=!iX(y,o);b?h():w&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,f,o,u,h]),i.jsx(B4,{...e,ref:s})}),[QY,ZY]=Fy(rm,{isInside:!1}),eX=xL("TooltipContent"),B4=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=e,c=Uy(Nd,n),u=By(n),{onClose:f}=c;return p.useEffect(()=>(document.addEventListener(I1,f),()=>document.removeEventListener(I1,f)),[f]),p.useEffect(()=>{if(c.trigger){const d=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&f()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,f]),i.jsx(Xc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:f,children:i.jsxs($y,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(eX,{children:r}),i.jsx(QY,{scope:n,isInside:!0,children:i.jsx(kV,{id:c.contentId,role:"tooltip",children:a||r})})]})})});F4.displayName=Nd;var U4="TooltipArrow",tX=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=By(n);return ZY(U4,n).isInside?null:i.jsx(Ly,{...a,...r,ref:t})});tX.displayName=U4;function nX(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,a,s)){case s:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function rX(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function aX(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function iX(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,f=l.y,d=c.x,h=c.y;f>r!=h>r&&n<(d-u)*(r-f)/(h-f)+u&&(a=!a)}return a}function sX(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),oX(t)}function oX(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var lX=D4,cX=$4,uX=L4,z4=F4;const M1=lX,me=cX,pe=uX,he=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(z4,{ref:r,sideOffset:t,className:ke("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));he.displayName=z4.displayName;var zy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},qy=typeof window>"u"||"Deno"in globalThis;function Li(){}function dX(e,t){return typeof e=="function"?e(t):e}function fX(e){return typeof e=="number"&&e>=0&&e!==1/0}function hX(e,t){return Math.max(e+(t||0)-Date.now(),0)}function D1(e,t){return typeof e=="function"?e(t):e}function mX(e,t){return typeof e=="function"?e(t):e}function DP(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:s,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==pN(o,t.options))return!1}else if(!im(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||s&&!s(t))}function $P(e,t){const{exact:n,status:r,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(am(t.options.mutationKey)!==am(s))return!1}else if(!im(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function pN(e,t){return((t==null?void 0:t.queryKeyHashFn)||am)(e)}function am(e){return JSON.stringify(e,(t,n)=>$1(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function im(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>im(e[n],t[n])):!1}function q4(e,t){if(e===t)return e;const n=LP(e)&&LP(t);if(n||$1(e)&&$1(t)){const r=n?e:Object.keys(e),a=r.length,s=n?t:Object.keys(t),o=s.length,l=n?[]:{},c=new Set(r);let u=0;for(let f=0;f<o;f++){const d=n?f:s[f];(!n&&c.has(d)||n)&&e[d]===void 0&&t[d]===void 0?(l[d]=void 0,u++):(l[d]=q4(e[d],t[d]),l[d]===e[d]&&e[d]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function LP(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function $1(e){if(!FP(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!FP(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function FP(e){return Object.prototype.toString.call(e)==="[object Object]"}function pX(e){return new Promise(t=>{setTimeout(t,e)})}function gX(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?q4(e,t):t}function vX(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function xX(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var gN=Symbol();function W4(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===gN?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var fc,Go,ud,YM,yX=(YM=class extends zy{constructor(){super();Qt(this,fc);Qt(this,Go);Qt(this,ud);Nt(this,ud,t=>{if(!qy&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Ne(this,Go)||this.setEventListener(Ne(this,ud))}onUnsubscribe(){var t;this.hasListeners()||((t=Ne(this,Go))==null||t.call(this),Nt(this,Go,void 0))}setEventListener(t){var n;Nt(this,ud,t),(n=Ne(this,Go))==null||n.call(this),Nt(this,Go,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Ne(this,fc)!==t&&(Nt(this,fc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Ne(this,fc)=="boolean"?Ne(this,fc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},fc=new WeakMap,Go=new WeakMap,ud=new WeakMap,YM),H4=new yX,dd,Yo,fd,XM,bX=(XM=class extends zy{constructor(){super();Qt(this,dd,!0);Qt(this,Yo);Qt(this,fd);Nt(this,fd,t=>{if(!qy&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Ne(this,Yo)||this.setEventListener(Ne(this,fd))}onUnsubscribe(){var t;this.hasListeners()||((t=Ne(this,Yo))==null||t.call(this),Nt(this,Yo,void 0))}setEventListener(t){var n;Nt(this,fd,t),(n=Ne(this,Yo))==null||n.call(this),Nt(this,Yo,t(this.setOnline.bind(this)))}setOnline(t){Ne(this,dd)!==t&&(Nt(this,dd,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Ne(this,dd)}},dd=new WeakMap,Yo=new WeakMap,fd=new WeakMap,XM),Jv=new bX;function wX(){let e,t;const n=new Promise((a,s)=>{e=a,t=s});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}function jX(e){return Math.min(1e3*2**e,3e4)}function V4(e){return(e??"online")==="online"?Jv.isOnline():!0}var K4=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ow(e){return e instanceof K4}function G4(e){let t=!1,n=0,r=!1,a;const s=wX(),o=v=>{var x;r||(h(new K4(v)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>H4.isFocused()&&(e.networkMode==="always"||Jv.isOnline())&&e.canRun(),f=()=>V4(e.networkMode)&&e.canRun(),d=v=>{var x;r||(r=!0,(x=e.onSuccess)==null||x.call(e,v),a==null||a(),s.resolve(v))},h=v=>{var x;r||(r=!0,(x=e.onError)==null||x.call(e,v),a==null||a(),s.reject(v))},m=()=>new Promise(v=>{var x;a=y=>{(r||u())&&v(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var v;a=void 0,r||(v=e.onContinue)==null||v.call(e)}),g=()=>{if(r)return;let v;const x=n===0?e.initialPromise:void 0;try{v=x??e.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(d).catch(y=>{var _;if(r)return;const b=e.retry??(qy?0:3),w=e.retryDelay??jX,k=typeof w=="function"?w(n,y):w,j=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(t||!j){h(y);return}n++,(_=e.onFail)==null||_.call(e,n,y),pX(k).then(()=>u()?void 0:m()).then(()=>{t?h(y):g()})})};return{promise:s,cancel:o,continue:()=>(a==null||a(),s),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?g():m().then(g),s)}}var _X=e=>setTimeout(e,0);function kX(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=_X;const s=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var ia=kX(),hc,JM,Y4=(JM=class{constructor(){Qt(this,hc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fX(this.gcTime)&&Nt(this,hc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(qy?1/0:5*60*1e3))}clearGcTimeout(){Ne(this,hc)&&(clearTimeout(Ne(this,hc)),Nt(this,hc,void 0))}},hc=new WeakMap,JM),hd,mc,oi,pc,Ur,tp,gc,Bi,Bs,QM,SX=(QM=class extends Y4{constructor(t){super();Qt(this,Bi);Qt(this,hd);Qt(this,mc);Qt(this,oi);Qt(this,pc);Qt(this,Ur);Qt(this,tp);Qt(this,gc);Nt(this,gc,!1),Nt(this,tp,t.defaultOptions),this.setOptions(t.options),this.observers=[],Nt(this,pc,t.client),Nt(this,oi,Ne(this,pc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Nt(this,hd,CX(this.options)),this.state=t.state??Ne(this,hd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ne(this,Ur))==null?void 0:t.promise}setOptions(t){this.options={...Ne(this,tp),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ne(this,oi).remove(this)}setData(t,n){const r=gX(this.state.data,t,this.options);return Lr(this,Bi,Bs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Lr(this,Bi,Bs).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=Ne(this,Ur))==null?void 0:r.promise;return(a=Ne(this,Ur))==null||a.cancel(t),n?n.then(Li).catch(Li):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ne(this,hd))}isActive(){return this.observers.some(t=>mX(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===gN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>D1(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!hX(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Ne(this,Ur))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Ne(this,Ur))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ne(this,oi).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Ne(this,Ur)&&(Ne(this,gc)?Ne(this,Ur).cancel({revert:!0}):Ne(this,Ur).cancelRetry()),this.scheduleGc()),Ne(this,oi).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Lr(this,Bi,Bs).call(this,{type:"invalidate"})}fetch(t,n){var u,f,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Ne(this,Ur))return Ne(this,Ur).continueRetry(),Ne(this,Ur).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Nt(this,gc,!0),r.signal)})},s=()=>{const h=W4(this.options,n),g=(()=>{const v={client:Ne(this,pc),queryKey:this.queryKey,meta:this.meta};return a(v),v})();return Nt(this,gc,!1),this.options.persister?this.options.persister(h,g,this):h(g)},l=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Ne(this,pc),state:this.state,fetchFn:s};return a(h),h})();(u=this.options.behavior)==null||u.onFetch(l,this),Nt(this,mc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Lr(this,Bi,Bs).call(this,{type:"fetch",meta:(d=l.fetchOptions)==null?void 0:d.meta});const c=h=>{var m,g,v,x;ow(h)&&h.silent||Lr(this,Bi,Bs).call(this,{type:"error",error:h}),ow(h)||((g=(m=Ne(this,oi).config).onError)==null||g.call(m,h,this),(x=(v=Ne(this,oi).config).onSettled)==null||x.call(v,this.state.data,h,this)),this.scheduleGc()};return Nt(this,Ur,G4({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var m,g,v,x;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(g=(m=Ne(this,oi).config).onSuccess)==null||g.call(m,h,this),(x=(v=Ne(this,oi).config).onSettled)==null||x.call(v,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,m)=>{Lr(this,Bi,Bs).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{Lr(this,Bi,Bs).call(this,{type:"pause"})},onContinue:()=>{Lr(this,Bi,Bs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Ne(this,Ur).start()}},hd=new WeakMap,mc=new WeakMap,oi=new WeakMap,pc=new WeakMap,Ur=new WeakMap,tp=new WeakMap,gc=new WeakMap,Bi=new WeakSet,Bs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...NX(r.data,this.options),fetchMeta:t.meta??null};case"success":return Nt(this,mc,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return ow(a)&&a.revert&&Ne(this,mc)?{...Ne(this,mc),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),ia.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Ne(this,oi).notify({query:this,type:"updated",action:t})})},QM);function NX(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:V4(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function CX(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ps,ZM,AX=(ZM=class extends zy{constructor(t={}){super();Qt(this,ps);this.config=t,Nt(this,ps,new Map)}build(t,n,r){const a=n.queryKey,s=n.queryHash??pN(a,n);let o=this.get(s);return o||(o=new SX({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Ne(this,ps).has(t.queryHash)||(Ne(this,ps).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Ne(this,ps).get(t.queryHash);n&&(t.destroy(),n===t&&Ne(this,ps).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ia.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ne(this,ps).get(t)}getAll(){return[...Ne(this,ps).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>DP(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>DP(t,r)):n}notify(t){ia.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){ia.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ia.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ps=new WeakMap,ZM),gs,ea,vc,vs,Lo,eD,EX=(eD=class extends Y4{constructor(t){super();Qt(this,vs);Qt(this,gs);Qt(this,ea);Qt(this,vc);this.mutationId=t.mutationId,Nt(this,ea,t.mutationCache),Nt(this,gs,[]),this.state=t.state||PX(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ne(this,gs).includes(t)||(Ne(this,gs).push(t),this.clearGcTimeout(),Ne(this,ea).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Nt(this,gs,Ne(this,gs).filter(n=>n!==t)),this.scheduleGc(),Ne(this,ea).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ne(this,gs).length||(this.state.status==="pending"?this.scheduleGc():Ne(this,ea).remove(this))}continue(){var t;return((t=Ne(this,vc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,l,c,u,f,d,h,m,g,v,x,y,b,w,k,j,_,S,T;const n=()=>{Lr(this,vs,Lo).call(this,{type:"continue"})};Nt(this,vc,G4({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(N,A)=>{Lr(this,vs,Lo).call(this,{type:"failed",failureCount:N,error:A})},onPause:()=>{Lr(this,vs,Lo).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ne(this,ea).canRun(this)}));const r=this.state.status==="pending",a=!Ne(this,vc).canStart();try{if(r)n();else{Lr(this,vs,Lo).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(s=Ne(this,ea).config).onMutate)==null?void 0:o.call(s,t,this));const A=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));A!==this.state.context&&Lr(this,vs,Lo).call(this,{type:"pending",context:A,variables:t,isPaused:a})}const N=await Ne(this,vc).start();return await((f=(u=Ne(this,ea).config).onSuccess)==null?void 0:f.call(u,N,t,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,N,t,this.state.context)),await((g=(m=Ne(this,ea).config).onSettled)==null?void 0:g.call(m,N,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,N,null,t,this.state.context)),Lr(this,vs,Lo).call(this,{type:"success",data:N}),N}catch(N){try{throw await((b=(y=Ne(this,ea).config).onError)==null?void 0:b.call(y,N,t,this.state.context,this)),await((k=(w=this.options).onError)==null?void 0:k.call(w,N,t,this.state.context)),await((_=(j=Ne(this,ea).config).onSettled)==null?void 0:_.call(j,void 0,N,this.state.variables,this.state.context,this)),await((T=(S=this.options).onSettled)==null?void 0:T.call(S,void 0,N,t,this.state.context)),N}finally{Lr(this,vs,Lo).call(this,{type:"error",error:N})}}finally{Ne(this,ea).runNext(this)}}},gs=new WeakMap,ea=new WeakMap,vc=new WeakMap,vs=new WeakSet,Lo=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ia.batch(()=>{Ne(this,gs).forEach(r=>{r.onMutationUpdate(t)}),Ne(this,ea).notify({mutation:this,type:"updated",action:t})})},eD);function PX(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Vs,Ui,np,tD,TX=(tD=class extends zy{constructor(t={}){super();Qt(this,Vs);Qt(this,Ui);Qt(this,np);this.config=t,Nt(this,Vs,new Set),Nt(this,Ui,new Map),Nt(this,np,0)}build(t,n,r){const a=new EX({mutationCache:this,mutationId:++Kp(this,np)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){Ne(this,Vs).add(t);const n=pg(t);if(typeof n=="string"){const r=Ne(this,Ui).get(n);r?r.push(t):Ne(this,Ui).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ne(this,Vs).delete(t)){const n=pg(t);if(typeof n=="string"){const r=Ne(this,Ui).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&Ne(this,Ui).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=pg(t);if(typeof n=="string"){const r=Ne(this,Ui).get(n),a=r==null?void 0:r.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=pg(t);if(typeof n=="string"){const a=(r=Ne(this,Ui).get(n))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ia.batch(()=>{Ne(this,Vs).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ne(this,Vs).clear(),Ne(this,Ui).clear()})}getAll(){return Array.from(Ne(this,Vs))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>$P(n,r))}findAll(t={}){return this.getAll().filter(n=>$P(t,n))}notify(t){ia.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return ia.batch(()=>Promise.all(t.map(n=>n.continue().catch(Li))))}},Vs=new WeakMap,Ui=new WeakMap,np=new WeakMap,tD);function pg(e){var t;return(t=e.options.scope)==null?void 0:t.id}function BP(e){return{onFetch:(t,n)=>{var f,d,h,m,g;const r=t.options,a=(h=(d=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,s=((m=t.state.data)==null?void 0:m.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const x=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},y=W4(t.options,t.fetchOptions),b=async(w,k,j)=>{if(v)return Promise.reject();if(k==null&&w.pages.length)return Promise.resolve(w);const S=(()=>{const D={client:t.client,queryKey:t.queryKey,pageParam:k,direction:j?"backward":"forward",meta:t.options.meta};return x(D),D})(),T=await y(S),{maxPages:N}=t.options,A=j?xX:vX;return{pages:A(w.pages,T,N),pageParams:A(w.pageParams,k,N)}};if(a&&s.length){const w=a==="backward",k=w?OX:UP,j={pages:s,pageParams:o},_=k(r,j);l=await b(j,_,w)}else{const w=e??s.length;do{const k=c===0?o[0]??r.initialPageParam:UP(r,l);if(c>0&&k==null)break;l=await b(l,k),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var v,x;return(x=(v=t.options).persister)==null?void 0:x.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function UP(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function OX(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Un,Xo,Jo,md,pd,Qo,gd,vd,nD,IX=(nD=class{constructor(e={}){Qt(this,Un);Qt(this,Xo);Qt(this,Jo);Qt(this,md);Qt(this,pd);Qt(this,Qo);Qt(this,gd);Qt(this,vd);Nt(this,Un,e.queryCache||new AX),Nt(this,Xo,e.mutationCache||new TX),Nt(this,Jo,e.defaultOptions||{}),Nt(this,md,new Map),Nt(this,pd,new Map),Nt(this,Qo,0)}mount(){Kp(this,Qo)._++,Ne(this,Qo)===1&&(Nt(this,gd,H4.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ne(this,Un).onFocus())})),Nt(this,vd,Jv.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ne(this,Un).onOnline())})))}unmount(){var e,t;Kp(this,Qo)._--,Ne(this,Qo)===0&&((e=Ne(this,gd))==null||e.call(this),Nt(this,gd,void 0),(t=Ne(this,vd))==null||t.call(this),Nt(this,vd,void 0))}isFetching(e){return Ne(this,Un).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ne(this,Xo).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Ne(this,Un).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Ne(this,Un).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(D1(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Ne(this,Un).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=Ne(this,Un).get(r.queryHash),s=a==null?void 0:a.state.data,o=dX(t,s);if(o!==void 0)return Ne(this,Un).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return ia.batch(()=>Ne(this,Un).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Ne(this,Un).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Ne(this,Un);ia.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Ne(this,Un);return ia.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=ia.batch(()=>Ne(this,Un).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(Li).catch(Li)}invalidateQueries(e,t={}){return ia.batch(()=>(Ne(this,Un).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=ia.batch(()=>Ne(this,Un).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,n);return n.throwOnError||(s=s.catch(Li)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Li)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Ne(this,Un).build(this,t);return n.isStaleByTime(D1(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Li).catch(Li)}fetchInfiniteQuery(e){return e.behavior=BP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Li).catch(Li)}ensureInfiniteQueryData(e){return e.behavior=BP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Jv.isOnline()?Ne(this,Xo).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ne(this,Un)}getMutationCache(){return Ne(this,Xo)}getDefaultOptions(){return Ne(this,Jo)}setDefaultOptions(e){Nt(this,Jo,e)}setQueryDefaults(e,t){Ne(this,md).set(am(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ne(this,md).values()],n={};return t.forEach(r=>{im(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){Ne(this,pd).set(am(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ne(this,pd).values()],n={};return t.forEach(r=>{im(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ne(this,Jo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=pN(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===gN&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ne(this,Jo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ne(this,Un).clear(),Ne(this,Xo).clear()}},Un=new WeakMap,Xo=new WeakMap,Jo=new WeakMap,md=new WeakMap,pd=new WeakMap,Qo=new WeakMap,gd=new WeakMap,vd=new WeakMap,nD),RX=p.createContext(void 0),MX=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(RX.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sm(){return sm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sm.apply(this,arguments)}var tl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(tl||(tl={}));const zP="popstate";function DX(e){e===void 0&&(e={});function t(r,a){let{pathname:s,search:o,hash:l}=r.location;return L1("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Qv(a)}return LX(t,n,null,e)}function ar(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function X4(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $X(){return Math.random().toString(36).substr(2,8)}function qP(e,t){return{usr:e.state,key:e.key,idx:t}}function L1(e,t,n,r){return n===void 0&&(n=null),sm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?uf(t):t,{state:n,key:t&&t.key||r||$X()})}function Qv(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function uf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function LX(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:s=!1}=r,o=a.history,l=tl.Pop,c=null,u=f();u==null&&(u=0,o.replaceState(sm({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function d(){l=tl.Pop;let x=f(),y=x==null?null:x-u;u=x,c&&c({action:l,location:v.location,delta:y})}function h(x,y){l=tl.Push;let b=L1(v.location,x,y);u=f()+1;let w=qP(b,u),k=v.createHref(b);try{o.pushState(w,"",k)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(k)}s&&c&&c({action:l,location:v.location,delta:1})}function m(x,y){l=tl.Replace;let b=L1(v.location,x,y);u=f();let w=qP(b,u),k=v.createHref(b);o.replaceState(w,"",k),s&&c&&c({action:l,location:v.location,delta:0})}function g(x){let y=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof x=="string"?x:Qv(x);return b=b.replace(/ $/,"%20"),ar(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let v={get action(){return l},get location(){return e(a,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(zP,d),c=x,()=>{a.removeEventListener(zP,d),c=null}},createHref(x){return t(a,x)},createURL:g,encodeLocation(x){let y=g(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(x){return o.go(x)}};return v}var WP;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(WP||(WP={}));function FX(e,t,n){return n===void 0&&(n="/"),BX(e,t,n,!1)}function BX(e,t,n,r){let a=typeof t=="string"?uf(t):t,s=vN(a.pathname||"/",n);if(s==null)return null;let o=J4(e);UX(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=QX(s);l=XX(o[c],u,r)}return l}function J4(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(ar(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=dl([r,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(ar(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),J4(s.children,t,f,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:GX(u,s.index),routesMeta:f})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of Q4(s.path))a(s,o,c)}),t}function Q4(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return a?[s,""]:[s];let o=Q4(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function UX(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:YX(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const zX=/^:[\w-]+$/,qX=3,WX=2,HX=1,VX=10,KX=-2,HP=e=>e==="*";function GX(e,t){let n=e.split("/"),r=n.length;return n.some(HP)&&(r+=KX),t&&(r+=WX),n.filter(a=>!HP(a)).reduce((a,s)=>a+(zX.test(s)?qX:s===""?HX:VX),r)}function YX(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function XX(e,t,n){let{routesMeta:r}=e,a={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,f=s==="/"?t:t.slice(s.length)||"/",d=VP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=VP({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!d)return null;Object.assign(a,d.params),o.push({params:a,pathname:dl([s,d.pathname]),pathnameBase:nJ(dl([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=dl([s,d.pathnameBase]))}return o}function VP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=JX(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((u,f,d)=>{let{paramName:h,isOptional:m}=f;if(h==="*"){let v=l[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[d];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function JX(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),X4(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function QX(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return X4(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function vN(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function ZX(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?uf(e):e;return{pathname:n?n.startsWith("/")?n:eJ(n,t):t,search:rJ(r),hash:aJ(a)}}function eJ(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function lw(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tJ(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Z4(e,t){let n=tJ(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function eF(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=uf(e):(a=sm({},e),ar(!a.pathname||!a.pathname.includes("?"),lw("?","pathname","search",a)),ar(!a.pathname||!a.pathname.includes("#"),lw("#","pathname","hash",a)),ar(!a.search||!a.search.includes("#"),lw("#","search","hash",a)));let s=e===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;a.pathname=h.join("/")}l=d>=0?t[d]:"/"}let c=ZX(a,l),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const dl=e=>e.join("/").replace(/\/\/+/g,"/"),nJ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),rJ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,aJ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function iJ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const tF=["post","put","patch","delete"];new Set(tF);const sJ=["get",...tF];new Set(sJ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function om(){return om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},om.apply(this,arguments)}const xN=p.createContext(null),oJ=p.createContext(null),Jc=p.createContext(null),Wy=p.createContext(null),El=p.createContext({outlet:null,matches:[],isDataRoute:!1}),nF=p.createContext(null);function lJ(e,t){let{relative:n}=t===void 0?{}:t;gp()||ar(!1);let{basename:r,navigator:a}=p.useContext(Jc),{hash:s,pathname:o,search:l}=aF(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:dl([r,o])),a.createHref({pathname:c,search:l,hash:s})}function gp(){return p.useContext(Wy)!=null}function Pl(){return gp()||ar(!1),p.useContext(Wy).location}function rF(e){p.useContext(Jc).static||p.useLayoutEffect(e)}function Qa(){let{isDataRoute:e}=p.useContext(El);return e?jJ():cJ()}function cJ(){gp()||ar(!1);let e=p.useContext(xN),{basename:t,future:n,navigator:r}=p.useContext(Jc),{matches:a}=p.useContext(El),{pathname:s}=Pl(),o=JSON.stringify(Z4(a,n.v7_relativeSplatPath)),l=p.useRef(!1);return rF(()=>{l.current=!0}),p.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=eF(u,JSON.parse(o),s,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:dl([t,d.pathname])),(f.replace?r.replace:r.push)(d,f.state,f)},[t,r,o,s,e])}function uJ(){let{matches:e}=p.useContext(El),t=e[e.length-1];return t?t.params:{}}function aF(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=p.useContext(Jc),{matches:a}=p.useContext(El),{pathname:s}=Pl(),o=JSON.stringify(Z4(a,r.v7_relativeSplatPath));return p.useMemo(()=>eF(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function dJ(e,t){return fJ(e,t)}function fJ(e,t,n,r){gp()||ar(!1);let{navigator:a}=p.useContext(Jc),{matches:s}=p.useContext(El),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Pl(),f;if(t){var d;let x=typeof t=="string"?uf(t):t;c==="/"||(d=x.pathname)!=null&&d.startsWith(c)||ar(!1),f=x}else f=u;let h=f.pathname||"/",m=h;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=FX(e,{pathname:m}),v=vJ(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:dl([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:dl([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return t&&v?p.createElement(Wy.Provider,{value:{location:om({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:tl.Pop}},v):v}function hJ(){let e=wJ(),t=iJ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:a},n):null,null)}const mJ=p.createElement(hJ,null);class pJ extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement(El.Provider,{value:this.props.routeContext},p.createElement(nF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gJ(e){let{routeContext:t,match:n,children:r}=e,a=p.useContext(xN);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(El.Provider,{value:t},r)}function vJ(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let f=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);f>=0||ar(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:m}=n,g=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,d,h)=>{let m,g=!1,v=null,x=null;n&&(m=l&&d.route.id?l[d.route.id]:void 0,v=d.route.errorElement||mJ,c&&(u<0&&h===0?(g=!0,x=null):u===h&&(g=!0,x=d.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,h+1)),b=()=>{let w;return m?w=v:g?w=x:d.route.Component?w=p.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=f,p.createElement(gJ,{match:d,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?p.createElement(pJ,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var iF=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(iF||{}),Zv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Zv||{});function xJ(e){let t=p.useContext(xN);return t||ar(!1),t}function yJ(e){let t=p.useContext(oJ);return t||ar(!1),t}function bJ(e){let t=p.useContext(El);return t||ar(!1),t}function sF(e){let t=bJ(),n=t.matches[t.matches.length-1];return n.route.id||ar(!1),n.route.id}function wJ(){var e;let t=p.useContext(nF),n=yJ(Zv.UseRouteError),r=sF(Zv.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function jJ(){let{router:e}=xJ(iF.UseNavigateStable),t=sF(Zv.UseNavigateStable),n=p.useRef(!1);return rF(()=>{n.current=!0}),p.useCallback(function(a,s){s===void 0&&(s={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,om({fromRouteId:t},s)))},[e,t])}function _J(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ma(e){ar(!1)}function kJ(e){let{basename:t="/",children:n=null,location:r,navigationType:a=tl.Pop,navigator:s,static:o=!1,future:l}=e;gp()&&ar(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:s,static:o,future:om({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=uf(r));let{pathname:f="/",search:d="",hash:h="",state:m=null,key:g="default"}=r,v=p.useMemo(()=>{let x=vN(f,c);return x==null?null:{location:{pathname:x,search:d,hash:h,state:m,key:g},navigationType:a}},[c,f,d,h,m,g,a]);return v==null?null:p.createElement(Jc.Provider,{value:u},p.createElement(Wy.Provider,{children:n,value:v}))}function SJ(e){let{children:t,location:n}=e;return dJ(F1(t),n)}new Promise(()=>{});function F1(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,a)=>{if(!p.isValidElement(r))return;let s=[...t,a];if(r.type===p.Fragment){n.push.apply(n,F1(r.props.children,s));return}r.type!==Ma&&ar(!1),!r.props.index||!r.props.children||ar(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=F1(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function B1(){return B1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B1.apply(this,arguments)}function NJ(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function CJ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function AJ(e,t){return e.button===0&&(!t||t==="_self")&&!CJ(e)}function U1(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function EJ(e,t){let n=U1(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(s=>{n.append(a,s)})}),n}const PJ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],TJ="6";try{window.__reactRouterVersion=TJ}catch{}const OJ="startTransition",KP=rS[OJ];function IJ(e){let{basename:t,children:n,future:r,window:a}=e,s=p.useRef();s.current==null&&(s.current=DX({window:a,v5Compat:!0}));let o=s.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},f=p.useCallback(d=>{u&&KP?KP(()=>c(d)):c(d)},[c,u]);return p.useLayoutEffect(()=>o.listen(f),[o,f]),p.useEffect(()=>_J(r),[r]),p.createElement(kJ,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const RJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",MJ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GP=p.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:f,viewTransition:d}=t,h=NJ(t,PJ),{basename:m}=p.useContext(Jc),g,v=!1;if(typeof u=="string"&&MJ.test(u)&&(g=u,RJ))try{let w=new URL(window.location.href),k=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=vN(k.pathname,m);k.origin===w.origin&&j!=null?u=j+k.search+k.hash:v=!0}catch{}let x=lJ(u,{relative:a}),y=DJ(u,{replace:o,state:l,target:c,preventScrollReset:f,relative:a,viewTransition:d});function b(w){r&&r(w),w.defaultPrevented||y(w)}return p.createElement("a",B1({},h,{href:g||x,onClick:v||s?r:b,ref:n,target:c}))});var YP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(YP||(YP={}));var XP;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(XP||(XP={}));function DJ(e,t){let{target:n,replace:r,state:a,preventScrollReset:s,relative:o,viewTransition:l}=t===void 0?{}:t,c=Qa(),u=Pl(),f=aF(e,{relative:o});return p.useCallback(d=>{if(AJ(d,n)){d.preventDefault();let h=r!==void 0?r:Qv(u)===Qv(f);c(e,{replace:h,state:a,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,f,r,a,n,e,s,o,l])}function yN(e){let t=p.useRef(U1(e)),n=p.useRef(!1),r=Pl(),a=p.useMemo(()=>EJ(r.search,n.current?null:t.current),[r.search]),s=Qa(),o=p.useCallback((l,c)=>{const u=U1(typeof l=="function"?l(a):l);n.current=!0,s("?"+u,c)},[s,a]);return[a,o]}const $J="modulepreload",LJ=function(e){return"/"+e},JP={},io=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=LJ(c),c in JP)return;JP[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":$J,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},FJ=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>io(async()=>{const{default:r}=await Promise.resolve().then(()=>df);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class bN extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class BJ extends bN{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class QP extends bN{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ZP extends bN{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var z1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(z1||(z1={}));var UJ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class zJ{constructor(t,{headers:n={},customFetch:r,region:a=z1.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=FJ(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return UJ(this,void 0,void 0,function*(){try{const{headers:a,method:s,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let f;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(l["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(l["Content-Type"]="application/json",f=JSON.stringify(o)));const d=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:f}).catch(v=>{throw new BJ(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new QP(d);if(!d.ok)throw new ZP(d);let m=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield d.json():m==="application/octet-stream"?g=yield d.blob():m==="text/event-stream"?g=d:m==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null,response:d}}catch(a){return{data:null,error:a,response:a instanceof ZP||a instanceof QP?a.context:void 0}}})}}var ba={},wN={},Hy={},vp={},Vy={},Ky={},qJ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Cd=qJ();const WJ=Cd.fetch,oF=Cd.fetch.bind(Cd),lF=Cd.Headers,HJ=Cd.Request,VJ=Cd.Response,df=Object.freeze(Object.defineProperty({__proto__:null,Headers:lF,Request:HJ,Response:VJ,default:oF,fetch:WJ},Symbol.toStringTag,{value:"Module"})),KJ=_9(df);var Gy={};Object.defineProperty(Gy,"__esModule",{value:!0});let GJ=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Gy.default=GJ;var cF=nr&&nr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ky,"__esModule",{value:!0});const YJ=cF(KJ),XJ=cF(Gy);let JJ=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=YJ.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,l,c;let u=null,f=null,d=null,h=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=y:f=JSON.parse(y))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,d=null,h=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const v=await s.text();try{u=JSON.parse(v),Array.isArray(u)&&s.status===404&&(f=[],u=null,h=200,m="OK")}catch{s.status===404&&v===""?(h=204,m="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,m="OK"),u&&this.shouldThrowOnError)throw new XJ.default(u)}return{error:u,data:f,count:d,status:h,statusText:m}});return this.shouldThrowOnError||(a=a.catch(s=>{var o,l,c;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};Ky.default=JJ;var QJ=nr&&nr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vy,"__esModule",{value:!0});const ZJ=QJ(Ky);let eQ=class extends ZJ.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:s=a}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const s=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:s=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Vy.default=eQ;var tQ=nr&&nr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vp,"__esModule",{value:!0});const nQ=tQ(Vy);let rQ=class extends nQ.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let s="";a==="plain"?s="pl":a==="phrase"?s="ph":a==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};vp.default=rQ;var aQ=nr&&nr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hy,"__esModule",{value:!0});const Bf=aQ(vp);let iQ=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=n,this.schema=r,this.fetch=a}select(t,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Bf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const a="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Bf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:s=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new Bf.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new Bf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Bf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Hy.default=iQ;var Yy={},Xy={};Object.defineProperty(Xy,"__esModule",{value:!0});Xy.version=void 0;Xy.version="0.0.0-automated";Object.defineProperty(Yy,"__esModule",{value:!0});Yy.DEFAULT_HEADERS=void 0;const sQ=Xy;Yy.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${sQ.version}`};var uF=nr&&nr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wN,"__esModule",{value:!0});const oQ=uF(Hy),lQ=uF(vp),cQ=Yy;let uQ=class dF{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},cQ.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new oQ.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new dF(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:s}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;r||a?(o=r?"HEAD":"GET",Object.entries(n).filter(([f,d])=>d!==void 0).map(([f,d])=>[f,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([f,d])=>{l.searchParams.append(f,d)})):(o="POST",c=n);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new lQ.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};wN.default=uQ;var ff=nr&&nr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ba,"__esModule",{value:!0});ba.PostgrestError=ba.PostgrestBuilder=ba.PostgrestTransformBuilder=ba.PostgrestFilterBuilder=ba.PostgrestQueryBuilder=ba.PostgrestClient=void 0;const fF=ff(wN);ba.PostgrestClient=fF.default;const hF=ff(Hy);ba.PostgrestQueryBuilder=hF.default;const mF=ff(vp);ba.PostgrestFilterBuilder=mF.default;const pF=ff(Vy);ba.PostgrestTransformBuilder=pF.default;const gF=ff(Ky);ba.PostgrestBuilder=gF.default;const vF=ff(Gy);ba.PostgrestError=vF.default;var dQ=ba.default={PostgrestClient:fF.default,PostgrestQueryBuilder:hF.default,PostgrestFilterBuilder:mF.default,PostgrestTransformBuilder:pF.default,PostgrestBuilder:gF.default,PostgrestError:vF.default};const{PostgrestClient:fQ,PostgrestQueryBuilder:O3e,PostgrestFilterBuilder:I3e,PostgrestTransformBuilder:R3e,PostgrestBuilder:M3e,PostgrestError:D3e}=dQ;class hQ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const mQ="2.15.1",pQ=`realtime-js/${mQ}`,gQ="1.0.0",q1=1e4,vQ=1e3,xQ=100;var Nh;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Nh||(Nh={}));var cr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(cr||(cr={}));var qi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(qi||(qi={}));var W1;(function(e){e.websocket="websocket"})(W1||(W1={}));var nc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(nc||(nc={}));class yQ{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class xF{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var yn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(yn||(yn={}));const eT=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,o)=>(s[o]=bQ(o,e,t,a),s),{})},bQ=(e,t,n,r)=>{const a=t.find(l=>l.name===e),s=a==null?void 0:a.type,o=n[e];return s&&!r.includes(s)?yF(s,o):H1(o)},yF=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return kQ(t,n)}switch(e){case yn.bool:return wQ(t);case yn.float4:case yn.float8:case yn.int2:case yn.int4:case yn.int8:case yn.numeric:case yn.oid:return jQ(t);case yn.json:case yn.jsonb:return _Q(t);case yn.timestamp:return SQ(t);case yn.abstime:case yn.date:case yn.daterange:case yn.int4range:case yn.int8range:case yn.money:case yn.reltime:case yn.text:case yn.time:case yn.timestamptz:case yn.timetz:case yn.tsrange:case yn.tstzrange:return H1(t);default:return H1(t)}},H1=e=>e,wQ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},jQ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},_Q=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},kQ=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>yF(t,l))}return e},SQ=e=>typeof e=="string"?e.replace(" ","T"):e,bF=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class cw{constructor(t,n,r={},a=q1){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var tT;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(tT||(tT={}));class Ch{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ch.syncState(this.state,a,s,o),this.pendingDiffs.forEach(c=>{this.state=Ch.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ch.syncDiff(this.state,a,s,o),l())}),this.onJoin((a,s,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:o})}),this.onLeave((a,s,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const s=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(s,(u,f)=>{o[u]||(c[u]=f)}),this.map(o,(u,f)=>{const d=s[u];if(d){const h=f.map(x=>x.presence_ref),m=d.map(x=>x.presence_ref),g=f.filter(x=>m.indexOf(x.presence_ref)<0),v=d.filter(x=>h.indexOf(x.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=f}),this.syncDiff(s,{joins:l,leaves:c},r,a)}static syncDiff(t,n,r,a){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(s,(l,c)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),f.length>0){const d=t[l].map(m=>m.presence_ref),h=f.filter(m=>d.indexOf(m.presence_ref)<0);t[l].unshift(...h)}r(l,f,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const f=c.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nT;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(nT||(nT={}));var Ah;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ah||(Ah={}));var qs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(qs||(qs={}));class jN{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=cr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new cw(this,qi.join,this.params,this.timeout),this.rejoinTimer=new xF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=cr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=cr.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=cr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=cr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=cr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qi.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new Ch(this),this.broadcastEndpointURL=bF(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==cr.closed){const{config:{broadcast:s,presence:o,private:l}}=this.params,c=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[Ah.PRESENCE]&&this.bindings[Ah.PRESENCE].length>0,f={},d={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(qs.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(qs.CLOSED)),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var m;if(this.socket.setAuth(),h===void 0){t==null||t(qs.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,x=[];for(let y=0;y<v;y++){const b=g[y],{filter:{event:w,schema:k,table:j,filter:_}}=b,S=h&&h[y];if(S&&S.event===w&&S.schema===k&&S.table===j&&S.filter===_)x.push(Object.assign(Object.assign({},b),{id:S.id}));else{this.unsubscribe(),this.state=cr.errored,t==null||t(qs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(qs.SUBSCRIBED);return}}).receive("error",h=>{this.state=cr.errored,t==null||t(qs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(qs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===cr.joined&&t===Ah.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=cr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new cw(this,qi.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=cr.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,s=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(s),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new cw(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>xQ){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,s;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:f}=qi;if(r&&[l,c,u,f].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,v,x;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(m=>m.callback(h,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var g,v,x,y,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const k=m.id,j=(g=m.filter)===null||g===void 0?void 0:g.event;return k&&((v=n.ids)===null||v===void 0?void 0:v.includes(k))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const k=(b=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return k==="*"||k===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:x,commit_timestamp:y,type:b,errors:w}=g;h=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:y,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(h,r)})}_isClosed(){return this.state===cr.closed}_isJoined(){return this.state===cr.joined}_isJoining(){return this.state===cr.joining}_isLeaving(){return this.state===cr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),s={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&jN.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(qi.close,{},t)}_onError(t){this._on(qi.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=cr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=eT(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=eT(t.columns,t.old_record)),n}}const rT=()=>{},gg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},NQ=[1e3,2e3,5e3,1e4],CQ=1e4,AQ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class EQ{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=q1,this.transport=null,this.heartbeatIntervalMs=gg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rT,this.ref=0,this.reconnectTimer=null,this.logger=rT,this.conn=null,this.sendBuffer=[],this.serializer=new yQ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let s;return a?s=a:typeof fetch>"u"?s=(...o)=>io(async()=>{const{default:l}=await Promise.resolve().then(()=>df);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${W1.websocket}`,this.httpEndpoint=bF(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hQ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gQ}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Nh.connecting:return nc.Connecting;case Nh.open:return nc.Open;case Nh.closing:return nc.Closing;default:return nc.Closed}}isConnected(){return this.connectionState()===nc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(s=>s.topic===r);if(a)return a;{const s=new jN(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:a,ref:s}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${s})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(vQ,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},gg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:s,ref:o}=n,l=o?`(${o})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(qi.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([AQ],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:pQ};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(qi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new xF(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,s,o,l,c,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:q1,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:gg.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:f=>NQ[f-1]||CQ,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(f,d)=>d(JSON.stringify(f)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class _N extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ur(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class PQ extends _N{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class V1 extends _N{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var TQ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const wF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>io(async()=>{const{default:r}=await Promise.resolve().then(()=>df);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},OQ=()=>TQ(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield io(()=>Promise.resolve().then(()=>df),void 0)).Response:Response}),K1=e=>{if(Array.isArray(e))return e.map(n=>K1(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=K1(r)}),t},IQ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Qc=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const uw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),RQ=(e,t,n)=>Qc(void 0,void 0,void 0,function*(){const r=yield OQ();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const s=e.status||500,o=(a==null?void 0:a.statusCode)||s+"";t(new PQ(uw(a),s,o))}).catch(a=>{t(new V1(uw(a),a))}):t(new V1(uw(e),e))}),MQ=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(IQ(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function xp(e,t,n,r,a,s){return Qc(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,MQ(t,r,a,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>RQ(c,l,r))})})}function ex(e,t,n,r){return Qc(this,void 0,void 0,function*(){return xp(e,"GET",t,n,r)})}function hs(e,t,n,r,a){return Qc(this,void 0,void 0,function*(){return xp(e,"POST",t,r,a,n)})}function G1(e,t,n,r,a){return Qc(this,void 0,void 0,function*(){return xp(e,"PUT",t,r,a,n)})}function DQ(e,t,n,r){return Qc(this,void 0,void 0,function*(){return xp(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function jF(e,t,n,r,a){return Qc(this,void 0,void 0,function*(){return xp(e,"DELETE",t,r,a,n)})}var Qr=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const $Q={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},aT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class LQ{constructor(t,n={},r,a){this.url=t,this.headers=n,this.bucketId=r,this.fetch=wF(a)}uploadOrUpdate(t,n,r,a){return Qr(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},aT),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),d=yield(t=="PUT"?G1:hs)(this.fetch,`${this.url}/object/${f}`,s,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(ur(s))return{data:null,error:s};throw s}})}upload(t,n,r){return Qr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return Qr(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:aT.upsert},a),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const d=yield G1(this.fetch,l.toString(),c,{headers:f});return{data:{path:s,fullPath:d.Key},error:null}}catch(c){if(ur(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Qr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const s=yield hs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new _N("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(ur(r))return{data:null,error:r};throw r}})}update(t,n,r){return Qr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Qr(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(ur(a))return{data:null,error:a};throw a}})}copy(t,n,r){return Qr(this,void 0,void 0,function*(){try{return{data:{path:(yield hs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(ur(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return Qr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),s=yield hs(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(a){if(ur(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return Qr(this,void 0,void 0,function*(){try{const a=yield hs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(a){if(ur(a))return{data:null,error:a};throw a}})}download(t,n){return Qr(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield ex(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ur(l))return{data:null,error:l};throw l}})}info(t){return Qr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield ex(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:K1(r),error:null}}catch(r){if(ur(r))return{data:null,error:r};throw r}})}exists(t){return Qr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield DQ(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ur(r)&&r instanceof V1){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&a.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Qr(this,void 0,void 0,function*(){try{return{data:yield jF(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(ur(n))return{data:null,error:n};throw n}})}list(t,n,r){return Qr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},$Q),n),{prefix:t||""});return{data:yield hs(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(ur(a))return{data:null,error:a};throw a}})}listV2(t,n){return Qr(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield hs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(ur(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const FQ="2.11.0",BQ={"X-Client-Info":`storage-js/${FQ}`};var ou=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class UQ{constructor(t,n={},r,a){const s=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},BQ),n),this.fetch=wF(r)}listBuckets(){return ou(this,void 0,void 0,function*(){try{return{data:yield ex(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ur(t))return{data:null,error:t};throw t}})}getBucket(t){return ou(this,void 0,void 0,function*(){try{return{data:yield ex(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(ur(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return ou(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ur(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return ou(this,void 0,void 0,function*(){try{return{data:yield G1(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ur(r))return{data:null,error:r};throw r}})}emptyBucket(t){return ou(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ur(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ou(this,void 0,void 0,function*(){try{return{data:yield jF(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(ur(n))return{data:null,error:n};throw n}})}}class zQ extends UQ{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new LQ(this.url,this.headers,t,this.fetch)}}const qQ="2.55.0";let dh="";typeof Deno<"u"?dh="deno":typeof document<"u"?dh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dh="react-native":dh="node";const WQ={"X-Client-Info":`supabase-js-${dh}/${qQ}`},HQ={headers:WQ},VQ={schema:"public"},KQ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},GQ={};var YQ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const XQ=e=>{let t;return e?t=e:typeof fetch>"u"?t=oF:t=fetch,(...n)=>t(...n)},JQ=()=>typeof Headers>"u"?lF:Headers,QQ=(e,t,n)=>{const r=XQ(n),a=JQ();return(s,o)=>YQ(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var ZQ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function eZ(e){return e.endsWith("/")?e:e+"/"}function tZ(e,t){var n,r;const{db:a,auth:s,realtime:o,global:l}=e,{db:c,auth:u,realtime:f,global:d}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},f),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>ZQ(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const _F="2.71.1",_u=30*1e3,Y1=3,dw=Y1*_u,nZ="http://localhost:9999",rZ="supabase.auth.token",aZ={"X-Client-Info":`gotrue-js/${_F}`},X1="X-Supabase-Api-Version",kF={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iZ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,sZ=10*60*1e3;class kN extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ct(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class oZ extends kN{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function lZ(e){return Ct(e)&&e.name==="AuthApiError"}class SF extends kN{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Tl extends kN{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Fo extends Tl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function cZ(e){return Ct(e)&&e.name==="AuthSessionMissingError"}class vg extends Tl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xg extends Tl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class yg extends Tl{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function uZ(e){return Ct(e)&&e.name==="AuthImplicitGrantRedirectError"}class iT extends Tl{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class J1 extends Tl{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function fw(e){return Ct(e)&&e.name==="AuthRetryableFetchError"}class sT extends Tl{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Q1 extends Tl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const tx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oT=` 	
\r=`.split(""),dZ=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<oT.length;t+=1)e[oT[t].charCodeAt(0)]=-2;for(let t=0;t<tx.length;t+=1)e[tx[t].charCodeAt(0)]=t;return e})();function lT(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(tx[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(tx[r]),t.queuedBits-=6}}function NF(e,t,n){const r=dZ[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function cT(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=o=>{mZ(o,r,n)};for(let o=0;o<e.length;o+=1)NF(e.charCodeAt(o),a,s);return t.join("")}function fZ(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function hZ(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}fZ(r,t)}}function mZ(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function pZ(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)NF(e.charCodeAt(a),n,r);return new Uint8Array(t)}function gZ(e){const t=[];return hZ(e,n=>t.push(n)),new Uint8Array(t)}function vZ(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>lT(a,n,r)),lT(null,n,r),t.join("")}function xZ(e){return Math.round(Date.now()/1e3)+e}function yZ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Mi=()=>typeof window<"u"&&typeof document<"u",ql={tested:!1,writable:!1},CF=()=>{if(!Mi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ql.tested)return ql.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ql.tested=!0,ql.writable=!0}catch{ql.tested=!0,ql.writable=!1}return ql.writable};function bZ(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const AF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>io(async()=>{const{default:r}=await Promise.resolve().then(()=>df);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},wZ=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ku=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Wl=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Mo=async(e,t)=>{await e.removeItem(t)};class Jy{constructor(){this.promise=new Jy.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Jy.promiseConstructor=Promise;function hw(e){const t=e.split(".");if(t.length!==3)throw new Q1("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!iZ.test(t[r]))throw new Q1("JWT not in base64url format");return{header:JSON.parse(cT(t[0])),payload:JSON.parse(cT(t[1])),signature:pZ(t[2]),raw:{header:t[0],payload:t[1]}}}async function jZ(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function _Z(e,t){return new Promise((r,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){a(o);return}}})()})}function kZ(e){return("0"+e.toString(16)).substr(-2)}function SZ(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let s=0;s<56;s++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,kZ).join("")}async function NZ(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function CZ(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await NZ(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function lu(e,t,n=!1){const r=SZ();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await ku(e,`${t}-code-verifier`,a);const s=await CZ(r);return[s,r===s?"plain":"s256"]}const AZ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function EZ(e){const t=e.headers.get(X1);if(!t||!t.match(AZ))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function PZ(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function TZ(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const OZ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function cu(e){if(!OZ.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function mw(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function uT(e){return JSON.parse(JSON.stringify(e))}var IZ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Yl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),RZ=[502,503,504];async function dT(e){var t;if(!wZ(e))throw new J1(Yl(e),0);if(RZ.includes(e.status))throw new J1(Yl(e),e.status);let n;try{n=await e.json()}catch(s){throw new SF(Yl(s),s)}let r;const a=EZ(e);if(a&&a.getTime()>=kF["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new sT(Yl(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Fo}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new sT(Yl(n),e.status,n.weak_password.reasons);throw new oZ(Yl(n),e.status||500,r)}const MZ=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function Dt(e,t,n,r){var a;const s=Object.assign({},r==null?void 0:r.headers);s[X1]||(s[X1]=kF["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await DZ(e,t,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function DZ(e,t,n,r,a,s){const o=MZ(t,r,a,s);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new J1(Yl(c),0)}if(l.ok||await dT(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await dT(c)}}function Us(e){var t;let n=null;BZ(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=xZ(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function fT(e){const t=Us(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Vo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function $Z(e){return{data:e,error:null}}function LZ(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s}=e,o=IZ(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function FZ(e){return e}function BZ(e){return e.access_token&&e.refresh_token&&e.expires_in}const pw=["global","local","others"];var UZ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class zZ{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=AF(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=pw[0]){if(pw.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pw.join(", ")}`);try{return await Dt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ct(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Vo})}catch(r){if(Ct(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=UZ(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:LZ,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ct(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Dt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Vo})}catch(n){if(Ct(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,s,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await Dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:FZ});if(f.error)throw f.error;const d=await f.json(),h=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(Ct(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){cu(t);try{return await Dt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Vo})}catch(n){if(Ct(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){cu(t);try{return await Dt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Vo})}catch(r){if(Ct(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){cu(t);try{return await Dt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Vo})}catch(r){if(Ct(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){cu(t.userId);try{const{data:n,error:r}=await Dt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(Ct(n))return{data:null,error:n};throw n}}async _deleteFactor(t){cu(t.userId),cu(t.id);try{return{data:await Dt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ct(n))return{data:null,error:n};throw n}}}function hT(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function qZ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const uu={debug:!!(globalThis&&CF()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class EF extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class WZ extends EF{}async function HZ(e,t,n){uu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),uu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){uu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{uu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw uu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new WZ(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(uu.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}qZ();const VZ={url:nZ,storageKey:rZ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aZ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mT(e,t,n){return await n()}const du={};class lm{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=lm.nextInstanceID,lm.nextInstanceID+=1,this.instanceID>0&&Mi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},VZ),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new zZ({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=AF(a.fetch),this.lock=a.lock||mT,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Mi()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=HZ:this.lock=mT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:CF()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=hT(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=hT(this.memoryStorage)),Mi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=du[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){du[this.storageKey]=Object.assign(Object.assign({},du[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=du[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){du[this.storageKey]=Object.assign(Object.assign({},du[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${_F}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=bZ(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Mi()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),uZ(s)){const c=(t=s.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ct(n)?{error:n}:{error:new SF("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const s=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Us}),{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Ct(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,a;try{let s;if("email"in t){const{email:f,password:d,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await lu(this.storage,this.storageKey)),s=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:f,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:Us})}else if("phone"in t){const{phone:f,password:d,options:h}=t;s=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Us})}else throw new xg("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Ct(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:o,options:l}=t;n=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fT})}else if("phone"in t){const{phone:s,password:o,options:l}=t;n=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fT})}else throw new xg("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new vg}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(Ct(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,a,s,o,l,c,u,f,d,h,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:x,wallet:y,statement:b,options:w}=t;let k;if(Mi())if(typeof y=="object")k=y;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))k=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=y}const j=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const _=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),b?{statement:b}:null));let S;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")S=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)S=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),v=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((d=(f=w==null?void 0:w.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...w.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const _=await k.signMessage(new TextEncoder().encode(g),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=_}}try{const{data:x,error:y}=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:vZ(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Us});if(y)throw y;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new vg}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:y})}catch(x){if(Ct(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await Wl(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:s,error:o}=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Us});if(await Mo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new vg}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:o})}catch(s){if(Ct(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:s,nonce:o}=t,l=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Us}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new vg}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(Ct(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,s,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await lu(this.storage,this.storageKey));const{error:d}=await Dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:f}=await Dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new xg("You must provide either an email or phone number.")}catch(l){if(Ct(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,s;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:Us});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Ct(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await lu(this.storage,this.storageKey)),await Dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:$Z})}catch(s){if(Ct(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Fo;const{error:a}=await Dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Ct(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:s}=t,{error:o}=await Dt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:s}=t,{data:o,error:l}=await Dt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new xg("You must provide either an email or phone number and a type")}catch(n){if(Ct(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Wl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<dw:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Wl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=mw()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,f)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,f))})}return{data:{session:t},error:null}}const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Vo}):await this._useSession(async n=>{var r,a,s;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fo}:await Dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:Vo})})}catch(n){if(Ct(n))return cZ(n)&&(await this._removeSession(),await Mo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:s}=r;if(s)throw s;if(!a.session)throw new Fo;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await lu(this.storage,this.storageKey));const{data:u,error:f}=await Dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Vo});if(f)throw f;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ct(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fo;const n=Date.now()/1e3;let r=n,a=!0,s=null;const{payload:o}=hw(t.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Ct(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Fo;const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ct(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Mi())throw new yg("No browser detected.");if(t.error||t.error_description||t.error_code)throw new yg(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new iT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yg("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new iT("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!s||!l||!o||!u)throw new yg("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(l);let h=f+d;c&&(h=parseInt(c));const m=h-f;m*1e3<=_u&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const g=h-d;f-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,f):f-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,f);const{data:v,error:x}=await this._getUser(s);if(x)throw x;const y={provider_token:r,provider_refresh_token:a,access_token:s,expires_in:d,expires_at:h,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if(Ct(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Wl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:s}=n;if(s)return{error:s};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(lZ(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Mo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=yZ(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await lu(this.storage,this.storageKey,!0));try{return await Dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Ct(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ct(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:a}=await this._useSession(async s=>{var o,l,c,u,f;const{data:d,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Dt(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(a)throw a;return Mi()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ct(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:s,error:o}=n;if(o)throw o;return await Dt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Ct(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await _Z(async a=>(a>0&&await jZ(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Us})),(a,s)=>{const o=200*Math.pow(2,a);return s&&fw(s)&&Date.now()+o-r<_u})}catch(r){if(this._debug(n,"error",r),Ct(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Mi()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Wl(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Wl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await ku(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:mw()}else if(a&&!a.user&&!a.user){const o=await Wl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Mo(this.storage,this.storageKey+"-user"),await ku(this.storage,this.storageKey,a)):a.user=mw()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const s=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<dw;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${dw}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),fw(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Fo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Jy;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new Fo;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(a,"error",s),Ct(s)){const o={session:null,error:s};return fw(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ku(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const s=uT(a);await ku(this.storage,this.storageKey,s)}else{const a=uT(n);await ku(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Mo(this.storage,this.storageKey),await Mo(this.storage,this.storageKey+"-code-verifier"),await Mo(this.storage,this.storageKey+"-user"),this.userStorage&&await Mo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Mi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),_u);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/_u);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${_u}ms, refresh threshold is ${Y1} ticks`),a<=Y1&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof EF)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Mi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await lu(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);a.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;return s?{data:null,error:s}:await Dt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ct(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:s,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Dt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Ct(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:l}=await Dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Ct(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;return s?{data:null,error:s}:await Dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ct(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:s}=t;if(s)return{data:null,error:s};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=hw(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const f=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+sZ>a)return r;const{data:s,error:o}=await Dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,r=s.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};r=m.session.access_token}const{header:a,payload:s,signature:o,raw:{header:l,payload:c}}=hw(r);n!=null&&n.allowExpired||PZ(s.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:a,signature:o},error:null}}const f=TZ(a.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,o,gZ(`${l}.${c}`)))throw new Q1("Invalid JWT signature");return{data:{claims:s,header:a,signature:o},error:null}}catch(r){if(Ct(r))return{data:null,error:r};throw r}}}lm.nextInstanceID=0;const KZ=lm;class GZ extends KZ{constructor(t){super(t)}}var YZ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class XZ{constructor(t,n,r){var a,s,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=eZ(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:VQ,realtime:GQ,auth:Object.assign(Object.assign({},KQ),{storageKey:u}),global:HQ},d=tZ(r??{},f);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=QQ(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new fQ(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new zQ(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new zJ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return YZ(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,storageKey:s,flowType:o,lock:l,debug:c},u,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new GZ({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,flowType:o,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new EQ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const JZ=(e,t,n)=>new XZ(e,t,n);function QZ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}QZ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ZZ={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co"},td=ZZ??{},eee="https://bkynymyhbfrhvwxqqttk.supabase.co",tee="https://api.cssuper.com",nee="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",ree="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRncm14bGJudXR4cGV3Zm1vZmR4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5MDY0NzgsImV4cCI6MjA3MDQ4MjQ3OH0.ijDctaGPXK3Ce9uao72YaaYCX9fpPFZGpmrsWp9IfU8",aee=e=>e.replace(/\/$/,""),Z1=td==null?void 0:td.VITE_SUPABASE_URL,iee=td==null?void 0:td.VITE_SUPABASE_ANON_KEY,PF=e=>aee(e.trim()),see=e=>{const t=PF(e);return t.includes("api.cssuper.com")?"prod":(t.includes("bkynymyhbfrhvwxqqttk.supabase.co"),"dev")};let SN="dev";Z1&&(SN=see(Z1));const oee=SN==="prod"?tee:eee,lee=SN==="prod"?ree:nee,Qy=PF(Z1||oee),cee=(iee||lee).trim(),ds=JZ(Qy,cee,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});var Xl=(e=>(e.CLOSED="CLOSED",e.OPEN="OPEN",e.HALF_OPEN="HALF_OPEN",e))(Xl||{});const uee={failureThreshold:5,resetTimeout:3e4,successThreshold:2,monitoringPeriod:1e4,timeout:1e4},dee="circuit_breaker_";class fee{constructor(t,n={}){Mt(this,"config");Mt(this,"state");Mt(this,"failures",[]);Mt(this,"successes",0);Mt(this,"stateChangedAt");Mt(this,"lastFailureTime",null);Mt(this,"lastSuccessTime",null);Mt(this,"totalRequests",0);Mt(this,"listeners",[]);Mt(this,"storageKey");this.name=t,this.config={...uee,...n},this.storageKey=`${dee}${t}`,this.state=this.loadState()||"CLOSED",this.stateChangedAt=Date.now(),this.failures=[],this.loadFromStorage()}async execute(t,n){if(this.totalRequests++,!this.canExecute()){const a=new Error(`Circuit breaker is ${this.state}. Request rejected.`);throw a.circuitBreaker={state:this.state,name:this.name},a}const r=n||this.config.timeout;try{const a=new Promise((o,l)=>{setTimeout(()=>{l(new Error(`Request timeout after ${r}ms`))},r)}),s=await Promise.race([t(),a]);return this.recordSuccess(),s}catch(a){throw a instanceof Error&&a.message.includes("timeout")&&this.emitEvent({type:"timeout"}),this.recordFailure(a),a}}canExecute(){const t=Date.now();switch(this.state){case"CLOSED":return!0;case"OPEN":return t-this.stateChangedAt>=this.config.resetTimeout?(this.transitionTo("HALF_OPEN"),!0):!1;case"HALF_OPEN":return!0;default:return!1}}recordSuccess(){this.lastSuccessTime=Date.now(),this.emitEvent({type:"success"}),this.state==="HALF_OPEN"&&(this.successes++,this.successes>=this.config.successThreshold&&(this.transitionTo("CLOSED"),this.successes=0,this.failures=[])),this.saveToStorage()}recordFailure(t){const n=Date.now();this.lastFailureTime=n,this.emitEvent({type:"failure",error:t}),this.failures.push({time:n});const r=n-this.config.monitoringPeriod;this.failures=this.failures.filter(a=>a.time>r),(this.state==="CLOSED"||this.state==="HALF_OPEN")&&this.failures.length>=this.config.failureThreshold&&(this.transitionTo("OPEN"),this.successes=0),this.state==="HALF_OPEN"&&(this.transitionTo("OPEN"),this.successes=0),this.saveToStorage()}transitionTo(t){if(this.state===t)return;const n=this.state;this.state=t,this.stateChangedAt=Date.now(),this.emitEvent({type:"stateChange",from:n,to:t}),this.saveToStorage()}getStats(){return{failures:this.failures.length,successes:this.successes,state:this.state,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime,stateChangedAt:this.stateChangedAt,totalRequests:this.totalRequests}}getState(){return this.state}getConfig(){return{...this.config}}updateConfig(t){this.config={...this.config,...t};try{if(typeof localStorage<"u"){const n=localStorage.getItem(this.storageKey),r=n?JSON.parse(n):{};r.config=this.config,localStorage.setItem(this.storageKey,JSON.stringify(r))}}catch(n){console.warn("Failed to save circuit breaker config:",n)}}reset(){this.transitionTo("CLOSED"),this.failures=[],this.successes=0,this.lastFailureTime=null,this.lastSuccessTime=null,this.totalRequests=0,this.saveToStorage()}open(){this.transitionTo("OPEN")}on(t,n){this.listeners.push(n)}off(t){this.listeners=this.listeners.filter(n=>n!==t)}emitEvent(t){this.listeners.forEach(n=>{try{n(t)}catch(r){console.error("Circuit breaker event listener error:",r)}})}saveToStorage(){try{if(typeof localStorage<"u"){const t={state:this.state,stateChangedAt:this.stateChangedAt,failures:this.failures,successes:this.successes,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime,totalRequests:this.totalRequests};localStorage.setItem(this.storageKey,JSON.stringify(t))}}catch(t){console.warn("Failed to save circuit breaker state:",t)}}loadState(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t)return JSON.parse(t).state}}catch(t){console.warn("Failed to load circuit breaker state:",t)}return null}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t){const n=JSON.parse(t);n.config&&(this.config={...this.config,...n.config}),this.state=n.state||"CLOSED",this.stateChangedAt=n.stateChangedAt||Date.now(),this.failures=(n.failures||[]).filter(r=>{const a=Date.now()-this.config.monitoringPeriod;return r.time>a}),this.successes=n.successes||0,this.lastFailureTime=n.lastFailureTime||null,this.lastSuccessTime=n.lastSuccessTime||null,this.totalRequests=n.totalRequests||0,this.state==="OPEN"&&Date.now()-this.stateChangedAt>=this.config.resetTimeout&&this.transitionTo("HALF_OPEN")}}}catch(t){console.warn("Failed to load circuit breaker state:",t)}}}const Gt=new fee("database",{failureThreshold:5,resetTimeout:3e4,successThreshold:2,monitoringPeriod:1e4,timeout:1e4}),hee=["ECONNRESET","ENOTFOUND","ETIMEDOUT","ECONNREFUSED","NetworkError"],mee=["Timeout","ETIMEDOUT"],pee=[500,502,503,504,429];function Fi(e){var a;const t=(e==null?void 0:e.message)||String(e),n=(e==null?void 0:e.code)||(e==null?void 0:e.error_code)||"",r=(e==null?void 0:e.status)||(e==null?void 0:e.statusCode)||((a=e==null?void 0:e.response)==null?void 0:a.status);if(hee.some(s=>t.includes(s)||n.includes(s)||t.toLowerCase().includes("network")))return{category:"NETWORK",isRetryable:!0,retryDelay:1e3,userMessage:"Koneksi jaringan bermasalah. Mencoba lagi...",originalError:e};if(mee.some(s=>t.includes(s)||n.includes(s)||t.toLowerCase().includes("timeout")))return{category:"TIMEOUT",isRetryable:!0,retryDelay:2e3,userMessage:"Permintaan memakan waktu terlalu lama. Mencoba lagi...",originalError:e};if(r===429||t.includes("rate limit")||t.includes("too many requests")||n==="PGRST301")return{category:"RATE_LIMIT",isRetryable:!0,retryDelay:5e3,userMessage:"Terlalu banyak permintaan. Mohon tunggu sebentar...",originalError:e};if(r===401||r===403||t.includes("JWT")||t.includes("token")||t.includes("unauthorized")||t.includes("forbidden")||n==="PGRST301"||n==="PGRST302")return{category:"AUTH_ERROR",isRetryable:!1,userMessage:"Sesi Anda telah berakhir. Silakan login kembali.",originalError:e};if(r===400||t.includes("validation")||t.includes("invalid")||t.includes("constraint")||n==="23505"||n==="23503"||n==="23514")return{category:"VALIDATION_ERROR",isRetryable:!1,userMessage:"Data yang dimasukkan tidak valid. Silakan periksa kembali.",originalError:e};if(pee.includes(r)||n!=null&&n.startsWith("PGRST")||n!=null&&n.startsWith("P0001")||t.includes("database")||t.includes("connection")){const s=r>=500||r===429;return{category:"DATABASE_ERROR",isRetryable:s,retryDelay:s?2e3:void 0,userMessage:s?"Database sedang bermasalah. Mencoba lagi...":"Terjadi kesalahan database. Silakan coba lagi nanti.",originalError:e}}return r===404?{category:"VALIDATION_ERROR",isRetryable:!1,userMessage:"Data yang dicari tidak ditemukan.",originalError:e}:{category:"UNKNOWN",isRetryable:!0,retryDelay:1e3,userMessage:"Terjadi kesalahan. Mencoba lagi...",originalError:e}}const TF={reads:{limit:100,window:6e4},writes:{limit:30,window:6e4},rpc:{limit:20,window:6e4},auth:{limit:10,window:6e4}},gee="rate_limit_";class e_{constructor(t="default",n={}){Mt(this,"config");Mt(this,"requests",new Map);Mt(this,"storageKey");this.name=t,this.config={...TF,...n},this.storageKey=`${gee}${t}`,this.loadFromStorage(),typeof window<"u"&&setInterval(()=>this.cleanup(),6e4)}checkLimit(t,n,r){const a=this.getKey(t,n,r),s=Date.now(),o=this.getConfig(n);let l=this.requests.get(a)||[];const c=s-o.window;l=l.filter(v=>v.timestamp>c);const u=l.length,f=u<o.limit,d=l[0],h=d?d.timestamp+o.window:s+o.window,m=f?void 0:Math.ceil((h-s)/1e3)*1e3,g={allowed:f,remaining:Math.max(0,o.limit-u-1),resetAt:h,retryAfter:m};return f&&(l.push({timestamp:s,operation:n,endpoint:r}),this.requests.set(a,l),this.saveToStorage(a,l)),g}recordRequest(t,n,r){const a=this.getKey(t,n,r),s=Date.now();let o=this.requests.get(a)||[];o.push({timestamp:s,operation:n,endpoint:r});const l=this.getConfig(n),c=s-l.window;o=o.filter(u=>u.timestamp>c),this.requests.set(a,o),this.saveToStorage(a,o)}getUsage(t,n,r){const a=this.getKey(t,n,r),s=Date.now(),o=this.getConfig(n);let l=this.requests.get(a)||[];const c=s-o.window;l=l.filter(d=>d.timestamp>c);const u=l[0],f=u?u.timestamp+o.window:s+o.window;return{count:l.length,limit:o.limit,resetAt:f}}reset(t,n,r){if(n){const a=this.getKey(t,n,r);this.requests.delete(a),this.deleteFromStorage(a)}else{const a=t?`${t}:`:"anonymous:";for(const s of this.requests.keys())s.startsWith(a)&&(this.requests.delete(s),this.deleteFromStorage(s))}}cleanup(){const t=Date.now(),n=Math.max(this.config.reads.window,this.config.writes.window,this.config.rpc.window,this.config.auth.window),r=t-n;for(const[a,s]of this.requests.entries()){const o=s.filter(l=>l.timestamp>r);o.length===0?(this.requests.delete(a),this.deleteFromStorage(a)):o.length!==s.length&&(this.requests.set(a,o),this.saveToStorage(a,o))}}getConfig(t){return this.config[t]}getKey(t,n,r){return`${t||"anonymous"}:${n}${r?`:${r}`:""}`}saveToStorage(t,n){try{if(typeof localStorage<"u"){const r=`${this.storageKey}:${t}`,a=Date.now(),s=n.filter(o=>a-o.timestamp<6e4);localStorage.setItem(r,JSON.stringify({requests:s,savedAt:a}))}}catch(r){console.warn("Failed to save rate limit data:",r)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=Date.now(),n=`${this.storageKey}:`;for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a&&a.startsWith(n))try{const s=JSON.parse(localStorage.getItem(a)||"{}"),o=s.savedAt||0;if(t-o<3e5){const l=(s.requests||[]).filter(c=>{const u=c.operation||"read",f=this.getConfig(u);return t-c.timestamp<f.window});if(l.length>0){const c=a.replace(n,"");this.requests.set(c,l)}else localStorage.removeItem(a)}else localStorage.removeItem(a)}catch{localStorage.removeItem(a)}}}}catch(t){console.warn("Failed to load rate limit data:",t)}}deleteFromStorage(t){try{if(typeof localStorage<"u"){const n=`${this.storageKey}:${t}`;localStorage.removeItem(n)}}catch{}}}new e_("default",TF);class vee{constructor(){Mt(this,"queue",[]);Mt(this,"batchSize",50);Mt(this,"batchInterval",3e4);Mt(this,"intervalId",null);Mt(this,"enabled",!0);Mt(this,"lastFlushTime",0);Mt(this,"flushThrottle",1e4);typeof window<"u"&&this.startBatching()}record(t){if(!this.enabled)return;this.queue.length>=1e3&&(this.queue=this.queue.slice(-500)),this.queue.push({...t,timestamp:Date.now()});const n=Date.now();this.queue.length>=this.batchSize&&n-this.lastFlushTime>=this.flushThrottle&&this.flush()}startBatching(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.flush()},this.batchInterval)}stopBatching(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}async flush(){if(this.queue.length===0)return;const t=Date.now();if(t-this.lastFlushTime<this.flushThrottle)return;const n=[...this.queue];this.queue=[],this.lastFlushTime=t;try{const{error:r}=await ie.from("circuit_breaker_metrics").insert(n.map(a=>({operation_type:a.operationType,endpoint:a.endpoint||null,user_id:a.userId||null,circuit_breaker_state:a.circuitBreakerState,success:a.success,error_category:a.errorCategory||null,response_time_ms:a.responseTimeMs,metadata:a.metadata||{}})));r&&(console.warn("Failed to send metrics:",r),this.queue.length<100&&(this.queue=[...n,...this.queue]))}catch(r){console.warn("Failed to flush metrics:",r),this.queue.length<100&&(this.queue=[...n,...this.queue])}}setEnabled(t){this.enabled=t,t?this.startBatching():(this.stopBatching(),this.queue=[])}getQueueSize(){return this.queue.length}async forceFlush(){await this.flush()}}function gw(e,t){if(e.length===0)return 0;const n=[...e].sort((a,s)=>a-s),r=Math.ceil(t/100*n.length)-1;return n[Math.max(0,r)]}async function OF(e,t,n){try{let r=ie.from("circuit_breaker_metrics").select("*");e&&(r=r.gte("created_at",e.toISOString())),t&&(r=r.lt("created_at",t.toISOString()));const{data:a,error:s}=await r;if(s||!a)return{totalOperations:0,successRate:0,failureRate:0,avgResponseTime:0,p50ResponseTime:0,p95ResponseTime:0,p99ResponseTime:0,circuitBreakerStates:{},errorCategories:{},operationsByType:{}};const o=a.length,l=a.filter(g=>g.success).length,c=a.filter(g=>!g.success).length,u=a.map(g=>g.response_time_ms||0).filter(g=>g>0),f={},d={},h={};a.forEach(g=>{const v=g.circuit_breaker_state||"UNKNOWN";if(f[v]=(f[v]||0)+1,g.error_category){const y=g.error_category;d[y]=(d[y]||0)+1}const x=g.operation_type||"unknown";h[x]=(h[x]||0)+1});const m=u.length>0?u.reduce((g,v)=>g+v,0)/u.length:0;return{totalOperations:o,successRate:o>0?l/o:0,failureRate:o>0?c/o:0,avgResponseTime:m,p50ResponseTime:gw(u,50),p95ResponseTime:gw(u,95),p99ResponseTime:gw(u,99),circuitBreakerStates:f,errorCategories:d,operationsByType:h}}catch(r){return console.error("Failed to get metrics stats:",r),{totalOperations:0,successRate:0,failureRate:0,avgResponseTime:0,p50ResponseTime:0,p95ResponseTime:0,p99ResponseTime:0,circuitBreakerStates:{},errorCategories:{},operationsByType:{}}}}const cm=new vee,pT={baseConfig:{read:{limit:100,window:6e4},write:{limit:30,window:6e4},rpc:{limit:20,window:6e4},auth:{limit:10,window:6e4}},minMultiplier:.5,maxMultiplier:2,adjustmentInterval:6e4,healthyLatencyThreshold:200,stressLatencyThreshold:1e3};class xee{constructor(t={}){Mt(this,"config");Mt(this,"currentMultipliers",new Map);Mt(this,"lastAdjustment",Date.now());Mt(this,"rateLimiters",new Map);Mt(this,"storageKey","adaptive_rate_limiter");Mt(this,"adjustmentIntervalId",null);this.config={...pT,...t},this.loadFromStorage(),Object.keys(this.config.baseConfig).forEach(n=>{this.currentMultipliers.has(n)||this.currentMultipliers.set(n,1)}),typeof window<"u"&&(this.adjustmentIntervalId=setInterval(()=>this.adjustLimits(),this.config.adjustmentInterval))}getLimiter(t){if(!this.rateLimiters.has(t)){const n=this.config.baseConfig[t],r=this.currentMultipliers.get(t)||1,a={limit:Math.round(n.limit*r),window:n.window};this.rateLimiters.set(t,new e_(`adaptive_${t}`,{[t]:a}))}return this.rateLimiters.get(t)}async adjustLimits(){try{const t=Date.now(),n=new Date(t-5*60*1e3),r=await this.getRecentStats(n,new Date(t));for(const a of Object.keys(this.config.baseConfig))await this.adjustOperationLimit(a,r);this.lastAdjustment=t}catch(t){console.warn("Failed to adjust rate limits:",t)}}async getRecentStats(t,n){try{const r=await OF(t,n);return{avgResponseTime:r.avgResponseTime,errorRate:r.failureRate,requestVolume:r.totalOperations}}catch{return{avgResponseTime:300,errorRate:.01,requestVolume:100}}}async adjustOperationLimit(t,n){const r=this.currentMultipliers.get(t)||1,a=this.config.baseConfig[t];let s=r;const{avgResponseTime:o,errorRate:l}=n;o<this.config.healthyLatencyThreshold&&l<.05?s=Math.min(r*1.1,this.config.maxMultiplier):o>this.config.stressLatencyThreshold||l>.2?s=Math.max(r*.8,this.config.minMultiplier):r>1?s=Math.max(r*.95,1):r<1&&(s=Math.min(r*1.05,1)),this.currentMultipliers.set(t,s);const c={limit:Math.round(a.limit*s),window:a.window};this.rateLimiters.set(t,new e_(`adaptive_${t}`,{[t]:c})),this.saveToStorage()}getMultiplier(t){return this.currentMultipliers.get(t)||1}getEffectiveLimit(t){const n=this.config.baseConfig[t],r=this.currentMultipliers.get(t)||1;return Math.round(n.limit*r)}reset(){Object.keys(this.config.baseConfig).forEach(t=>{this.currentMultipliers.set(t,1),this.rateLimiters.delete(t)}),this.saveToStorage()}getConfig(){return{...this.config}}updateConfig(t){this.config={...this.config,...t},t.adjustmentInterval&&typeof window<"u"&&(this.adjustmentIntervalId&&clearInterval(this.adjustmentIntervalId),this.adjustmentIntervalId=setInterval(()=>this.adjustLimits(),this.config.adjustmentInterval)),this.rateLimiters.clear(),this.saveToStorage()}checkLimit(t,n,r){return this.getLimiter(n).checkLimit(t,n,r)}recordRequest(t,n,r){this.getLimiter(n).recordRequest(t,n,r)}getUsage(t,n,r){return this.getLimiter(n).getUsage(t,n,r)}saveToStorage(){try{if(typeof localStorage<"u"){const t={config:this.config,multipliers:Object.fromEntries(this.currentMultipliers),lastAdjustment:this.lastAdjustment};localStorage.setItem(this.storageKey,JSON.stringify(t))}}catch(t){console.warn("Failed to save adaptive rate limiter config:",t)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t){const n=JSON.parse(t);n.config&&(this.config={...pT,...n.config}),n.multipliers&&Object.entries(n.multipliers).forEach(([r,a])=>{this.currentMultipliers.set(r,a)}),n.lastAdjustment&&(this.lastAdjustment=n.lastAdjustment)}}}catch(t){console.warn("Failed to load adaptive rate limiter config:",t)}}}const Tt=new xee;async function IF(e,t=3,n=1e3){let r;for(let a=0;a<=t;a++)try{return await e()}catch(s){r=s;const o=Fi(s);if(!o.isRetryable||Gt.getState()!=="CLOSED")throw s;if(a>=t)break;const l=Math.min(n*Math.pow(2,a),8e3),c=o.retryDelay||l;await new Promise(u=>setTimeout(u,c))}throw r}let Uf=null,vw=0;const yee=6e4;async function NN(e,t=!1){var r,a;const n=Date.now();if(!t&&Uf!==null&&n-vw<yee)return Uf;try{const s=e.auth.getSession(),o=new Promise(c=>{setTimeout(()=>c({data:{session:null}}),500)}),{data:l}=await Promise.race([s,o]);return Uf=((a=(r=l==null?void 0:l.session)==null?void 0:r.user)==null?void 0:a.id)||null,vw=n,Uf}catch{return Uf=null,vw=n,null}}async function RF(e,t,n,r,a=!1){if(a)return;const s=r!==void 0?r:await NN(e).catch(()=>null);if(t==="rpc"){const l=Tt.getUsage(s,t,n);if(l.count<l.limit*.9){Tt.recordRequest(s,t,n);return}const c=Tt.checkLimit(s,t,n);if(!c.allowed){const u=new Error(c.retryAfter?`Rate limit exceeded. Please wait ${Math.ceil(c.retryAfter/1e3)} seconds.`:"Rate limit exceeded. Please try again later.");throw u.code="RATE_LIMIT_EXCEEDED",u.status=429,u.retryAfter=c.retryAfter,u.category="RATE_LIMIT",u}return}const o=Tt.checkLimit(s,t,n);if(!o.allowed){const l=new Error(o.retryAfter?`Rate limit exceeded. Please wait ${Math.ceil(o.retryAfter/1e3)} seconds.`:"Rate limit exceeded. Please try again later.");throw l.code="RATE_LIMIT_EXCEEDED",l.status=429,l.retryAfter=o.retryAfter,l.category="RATE_LIMIT",l}}function t_(e){return e===void 0?"u":e===null?"n":typeof e=="function"?"f":typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"?`p:${String(e)}`:typeof e=="string"?`s:${e}`:e instanceof Date?`d:${e.toISOString()}`:Array.isArray(e)?`a:[${e.map(t=>t_(t)).join(",")}]`:typeof e=="object"?`o:{${Object.keys(e).sort().map(r=>`${r}:${t_(e[r])}`).join(",")}}`:`x:${String(e)}`}function bee(e){return!e||e.length===0?"":e.map(t=>t_(t)).join("|")}function wee(e){if(!e)return"base";let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return Math.abs(t).toString(36)}function MF(e,t,n="read",r,a=!1,s=""){return new Proxy(e,{get(o,l){const c=o[l];let u=n;if((l==="insert"||l==="update"||l==="upsert"||l==="delete")&&(u="write"),l==="then"||l==="catch"||l==="finally"){const f=Promise.resolve(o),d=(async()=>{const h=Date.now();wee(s);const m=NN(t).catch(()=>null),g=Gt.getState();try{const w=await Promise.race([m,new Promise(k=>setTimeout(()=>k(null),100))]);u==="read"?Tt.recordRequest(w,u,r):await RF(t,u,r,w)}catch(w){if(w.code==="RATE_LIMIT_EXCEEDED")throw w}let v;try{v=await Gt.execute(()=>IF(async()=>await f))}catch(w){v={data:null,error:w}}const x=Date.now()-h,y=v!=null&&v.error?Fi(v.error).category:void 0,b=await m.catch(()=>null);return Promise.resolve().then(()=>{try{cm.record({operationType:u,endpoint:r,userId:b||void 0,circuitBreakerState:g,success:!(v!=null&&v.error),errorCategory:y,responseTimeMs:x,metadata:v!=null&&v.error?{error:v.error.message}:{}})}catch{}}),v})().catch(h=>{const m=Date.now()-startTime,g=Fi(h);return cm.record({operationType:u,endpoint:r,userId:userId||void 0,circuitBreakerState:circuitState,success:!1,errorCategory:g.category,responseTimeMs:m,metadata:{error:h instanceof Error?h.message:String(h)}}),h.code==="RATE_LIMIT_EXCEEDED"?{data:null,error:{message:h.message,code:"RATE_LIMIT_EXCEEDED",status:429,category:"RATE_LIMIT",retryAfter:h.retryAfter,circuitBreaker:Gt.getState()}}:h&&typeof h=="object"&&("data"in h||"error"in h)?{data:h.data||null,error:{...h.error||h,message:g.userMessage,category:g.category,circuitBreaker:Gt.getState()}}:{data:null,error:{...g.originalError,message:g.userMessage,category:g.category,circuitBreaker:Gt.getState()}}});return(h,m)=>d[l](h,m)}return typeof c=="function"?(...f)=>{const d=c.apply(o,f),h=bee(f),m=h?`${l}(${h})`:`${l}()`,g=s?`${s}|${m}`:m;return MF(d,t,u,r,a,g)}:c}})}function jee(e){const t=e;return{from:n=>{const r=t.from(n);return MF(r,t,"read",n)},rpc:async(n,r,a)=>{const s=Date.now(),o=NN(t).catch(()=>null),l=Gt.getState();try{try{const h=await Promise.race([o,new Promise(m=>setTimeout(()=>m(null),100))]);await RF(t,"rpc",n,h,!1)}catch(h){if(h.code==="RATE_LIMIT_EXCEEDED")throw h}const c=await Gt.execute(()=>IF(async()=>await t.rpc(n,r,a))),u=Date.now()-s,f=c!=null&&c.error?Fi(c.error).category:void 0,d=await o.catch(()=>null);return Promise.resolve().then(()=>{try{cm.record({operationType:"rpc",endpoint:n,userId:d||void 0,circuitBreakerState:l,success:!(c!=null&&c.error),errorCategory:f,responseTimeMs:u,metadata:c!=null&&c.error?{error:c.error.message}:{}})}catch{}}),c}catch(c){const u=Fi(c),f=Date.now()-s,d=await o.catch(()=>null);return Promise.resolve().then(()=>{try{cm.record({operationType:"rpc",endpoint:n,userId:d||void 0,circuitBreakerState:l,success:!1,errorCategory:u.category,responseTimeMs:f,metadata:{error:c instanceof Error?c.message:String(c)}})}catch{}}),{data:null,error:{...u.originalError,message:u.userMessage,category:u.category,circuitBreaker:l}}}},auth:{getSession:async()=>{try{return await Gt.execute(()=>t.auth.getSession(),5e3)}catch(n){const r=Fi(n);throw new Error(r.userMessage)}},getUser:async()=>{try{return await Gt.execute(()=>t.auth.getUser(),5e3)}catch(n){const r=Fi(n);throw new Error(r.userMessage)}},signOut:async()=>{try{return await Gt.execute(()=>t.auth.signOut(),5e3)}catch(n){const r=Fi(n);throw new Error(r.userMessage)}},signInWithPassword:async n=>{try{return await Gt.execute(()=>t.auth.signInWithPassword(n),1e4)}catch(r){const a=Fi(r);throw new Error(a.userMessage)}},signInWithOtp:async(n,r)=>{try{return await Gt.execute(()=>t.auth.signInWithOtp({email:n,options:r}),1e4)}catch(a){const s=Fi(a);throw new Error(s.userMessage)}},verifyOtp:async n=>{try{return await Gt.execute(()=>t.auth.verifyOtp(n),1e4)}catch(r){const a=Fi(r);throw new Error(a.userMessage)}},onAuthStateChange:t.auth.onAuthStateChange.bind(t.auth),resetPasswordForEmail:t.auth.resetPasswordForEmail.bind(t.auth),refreshSession:t.auth.refreshSession.bind(t.auth),updateUser:t.auth.updateUser.bind(t.auth),setSession:t.auth.setSession.bind(t.auth)},storage:t.storage,channel:t.channel.bind(t),removeChannel:t.removeChannel.bind(t),removeAllChannels:t.removeAllChannels.bind(t),getChannels:t.getChannels.bind(t),getCircuitBreaker:()=>Gt,getCircuitBreakerStats:()=>Gt.getStats()}}const ie=ds,wt=jee(ie);async function $t(e){var t;try{const{action:n,resource:r,resourceId:a=null,context:s={},ip:o=null,userAgent:l=null}=e;let c=e.userId??null;if(!c)try{const d=typeof localStorage<"u"?localStorage.getItem("app.currentUserId"):null;d&&(c=d)}catch{}if(!c){const{data:d}=await ie.auth.getUser();c=((t=d==null?void 0:d.user)==null?void 0:t.id)??null}let u=e.orgId??null;if(!u&&c&&(authData!=null&&authData.user))try{const{data:d}=await ie.from("org_members").select("org_id").eq("user_id",c).limit(1).maybeSingle();u=(d==null?void 0:d.org_id)??null}catch{return}if(!u&&n==="auth.logout")return;if(!u)try{const{data:d}=await ie.from("orgs").select("id").limit(1).maybeSingle();u=(d==null?void 0:d.id)??null}catch{return}try{const d=`logAction:${n}:${r}:${c||"anon"}`,h=Date.now(),m=typeof localStorage<"u"?localStorage.getItem(d):null;if(m){const g=Number(m)||0;if(h-g<3e3)return}typeof localStorage<"u"&&localStorage.setItem(d,String(h))}catch{}if(!u)return;const{error:f}=await ie.rpc("log_action",{p_action:n,p_resource:r,p_resource_id:a,p_context:{...s,route:typeof window<"u"?window.location.pathname:null},p_ip:o,p_user_agent:l,p_org_id:u,p_user_id:c});f&&console.warn("logAction failed",f)}catch(n){console.warn("logAction threw",n)}}const DF=p.createContext(void 0);function _ee({children:e}){var O;const t=Qa(),[n,r]=p.useState(null),[a,s]=p.useState(null),[o,l]=p.useState(!0),c=p.useRef(null),[u,f]=p.useState(!1),[d,h]=p.useState(()=>{var F;try{if(localStorage.getItem("otpVerified")==="true")return!0;const z=localStorage.getItem("app.lastAuthEvent");if(z)try{const I=JSON.parse(z),$=(F=I==null?void 0:I.user)==null?void 0:F.id;if($)return localStorage.getItem(`otpVerified:${$}`)==="true"}catch{}return!1}catch{return!1}}),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,b]=p.useState(!1),[w,k]=p.useState(!1),[j,_]=p.useState(0);p.useEffect(()=>{b(!1)},[n==null?void 0:n.id]);const[S,T]=p.useState(!1),N=p.useRef(null),A=p.useRef(null);p.useEffect(()=>{A.current=(n==null?void 0:n.id)??null},[n==null?void 0:n.id]);const D=p.useCallback(F=>{var C;h(F);try{const z=(C=a==null?void 0:a.user)!=null&&C.id?`otpVerified:${a.user.id}`:"otpVerified";F?(localStorage.setItem(z,"true"),localStorage.setItem("otpVerified","true")):(localStorage.removeItem(z),localStorage.removeItem("otpVerified"))}catch{}},[(O=a==null?void 0:a.user)==null?void 0:O.id]),B=async F=>{var I,$;const C=(I=F==null?void 0:F.user)==null?void 0:I.id,z=j+1;if(_(z),!C)return x(!1),!0;if(w||y&&(($=F==null?void 0:F.user)==null?void 0:$.id)===(n==null?void 0:n.id))return!v;k(!0);try{const{data:K,error:X}=await ie.from("users_profile").select("is_active").eq("user_id",C).maybeSingle();return X?(console.error("Error checking account status:",X),!v):K?K.is_active===!0?(x(!1),b(!0),!0):(t("/account-deactivated",{replace:!0}),!1):!v}catch(K){return console.error("Failed to check account status",K),!v}finally{k(!1)}},E=async F=>{var z,I,$,K,X;const C=(z=F==null?void 0:F.user)==null?void 0:z.id;if(!C){f(!1);try{const V=(I=F==null?void 0:F.user)!=null&&I.id?`otpRequired:${F.user.id}`:"otpRequired";localStorage.removeItem(V)}catch{}return!1}try{const{data:V,error:W}=await ie.from("users_profile").select("is_2fa_email_enabled").eq("user_id",C).maybeSingle();if(W)throw W;if(!V){f(!0);try{const G=($=F==null?void 0:F.user)!=null&&$.id?`otpRequired:${F.user.id}`:"otpRequired";localStorage.setItem(G,"true")}catch{}return!0}const ae=(V==null?void 0:V.is_2fa_email_enabled)===!0;f(!!ae);try{const G=(K=F==null?void 0:F.user)!=null&&K.id?`otpRequired:${F.user.id}`:"otpRequired";ae?localStorage.setItem(G,"true"):localStorage.removeItem(G)}catch{}return!!ae}catch(V){console.warn("Failed to evaluate 2FA profile flag",V),f(!0);try{const W=(X=F==null?void 0:F.user)!=null&&X.id?`otpRequired:${F.user.id}`:"otpRequired";localStorage.setItem(W,"true")}catch{}return!0}},R=F=>{let C=!1;const z=window.setTimeout(()=>{C||g(!0)},5e3);return F.finally(()=>{C=!0,window.clearTimeout(z),g(!0)})};p.useEffect(()=>{(async()=>{var $,K,X;l(!0),g(!1);let z=!1;const I=window.setTimeout(()=>{z=!0,l(!1),g(!0)},5e3);try{try{localStorage.removeItem("otpRequired"),localStorage.removeItem("otpVerified")}catch{}try{const le=Object.keys(localStorage).filter(se=>se.startsWith("sb-")&&se.endsWith("-auth-token"));for(const se of le)try{const Q=localStorage.getItem(se);if(!Q)continue;const _e=JSON.parse(Q);if(_e!=null&&_e.access_token&&(_e!=null&&_e.user)){s(_e),r(_e.user);break}}catch{}localStorage.removeItem("sb-tgrmxlbnutxpewfmofdx-auth-token"),localStorage.removeItem("sb-yoekcpoppfudmqtvjcby-auth-token")}catch{}const V=await Promise.race([ie.auth.getSession().catch(()=>({data:{session:null}})),new Promise(le=>{setTimeout(()=>le({data:{session:null}}),4e3)})]),W=(($=V==null?void 0:V.data)==null?void 0:$.session)??null;s(W),r((W==null?void 0:W.user)??null);const ae=await Promise.race([ie.auth.getUser().catch(()=>({data:{user:null}})),new Promise(le=>{setTimeout(()=>le({data:{user:null}}),4e3)})]);if(!(((K=ae==null?void 0:ae.data)==null?void 0:K.user)??null)){s(null),r(null),f(!1),D(!1),g(!0);return}if(W){if(!await Promise.race([B(W),new Promise(se=>setTimeout(()=>se(!0),3e3))])){s(W),r(W.user),f(!1),D(!1),g(!0),l(!1);return}s(W),r(W.user);try{(X=W.user)!=null&&X.id&&(localStorage.setItem("app.currentUserId",W.user.id),localStorage.setItem("app.currentUserEmail",W.user.email||""))}catch{}z||(window.clearTimeout(I),l(!1)),R(E(W).then(se=>{f(!!se)}));return}else f(!1),D(!1),g(!0)}finally{z||(window.clearTimeout(I),l(!1))}})();const{data:{subscription:C}}=ie.auth.onAuthStateChange(async(z,I)=>{var $,K,X,V;try{if(z==="SIGNED_IN"){const W=A.current,ae=(($=I==null?void 0:I.user)==null?void 0:$.id)||null;if(!!W&&!!ae&&W===ae){s(I),r((I==null?void 0:I.user)??null);return}if(S){s(I),r((I==null?void 0:I.user)??null);return}if(!await Promise.race([B(I),new Promise(_e=>setTimeout(()=>_e(!0),3e3))])){s(I),r((I==null?void 0:I.user)??null),f(!1),D(!1),g(!0),l(!1);return}s(I),r((I==null?void 0:I.user)??null);const se=((K=I==null?void 0:I.user)==null?void 0:K.id)||null;if(se&&N.current!==se){$t({action:"auth.login",resource:"auth",userId:se,context:{}}).catch(()=>{}),N.current=se;try{localStorage.setItem("app.currentUserId",se),localStorage.setItem("app.currentUserEmail",((X=I==null?void 0:I.user)==null?void 0:X.email)||"")}catch{}}let Q=!1;try{const _e=se?`otpVerified:${se}`:"otpVerified";Q=localStorage.getItem(_e)==="true"||localStorage.getItem("otpVerified")==="true"}catch{}D(!!Q);try{const _e=(V=I==null?void 0:I.user)!=null&&V.id?`otpRequired:${I.user.id}`:"otpRequired";localStorage.removeItem(_e)}catch{}g(!1),l(!1),R(E(I).then(_e=>{var xe;if(_e&&!Q){const J=((xe=I==null?void 0:I.user)==null?void 0:xe.id)||null;J&&c.current!==J&&ie.functions.invoke("send-2fa-login-email",{headers:I!=null&&I.access_token?{Authorization:`Bearer ${I.access_token}`}:void 0}).then(()=>{c.current=J}).catch(fe=>{console.warn("2FA send function failed",fe)})}f(!!_e)}));try{localStorage.setItem("app.lastAuthEvent",JSON.stringify({event:z,at:Date.now(),user:(I==null?void 0:I.user)||null}))}catch{}return}if(z==="PASSWORD_RECOVERY"){try{localStorage.setItem("auth.intent","recovery")}catch{}try{if(window.location.hash){const W=new URL(window.location.href);W.hash="",window.history.replaceState({},document.title,W.toString())}}catch{}window.location.pathname!=="/reset-password"&&t("/reset-password",{replace:!0}),g(!1),R((async()=>{try{const W=await E(I);f(!!W),W&&D(!1)}catch{f(!1)}})());return}if(z==="TOKEN_REFRESHED"||z==="USER_UPDATED")return;if(z==="SIGNED_OUT"){n!=null&&n.id&&$t({action:"auth.logout",resource:"auth",userId:n.id,context:{}}).catch(()=>{}),f(!1),D(!1),T(!1),x(!1);try{const W=[];for(let G=0;G<localStorage.length;G++){const le=localStorage.key(G);le&&W.push(le)}W.forEach(G=>{try{localStorage.removeItem(G)}catch{}});const ae=[];for(let G=0;G<sessionStorage.length;G++){const le=sessionStorage.key(G);le&&ae.push(le)}ae.forEach(G=>{try{sessionStorage.removeItem(G)}catch{}})}catch(W){console.warn("Error clearing cache on sign out:",W)}}}catch{}z!=="SIGNED_IN"&&(s(I),r((I==null?void 0:I.user)??null)),g(!0),l(!1)});return()=>C.unsubscribe()},[]),p.useEffect(()=>{const F=async()=>{try{await ie.auth.getSession()}catch{}},C=()=>{try{document.visibilityState==="visible"&&F()}catch{}};window.addEventListener("focus",F),document.addEventListener("visibilitychange",C);const z=window.setInterval(()=>{try{document.visibilityState==="visible"&&ie.auth.getSession().catch(()=>{})}catch{}},4*60*1e3);return()=>{window.removeEventListener("focus",F),document.removeEventListener("visibilitychange",C);try{clearInterval(z)}catch{}}},[]);const P=p.useCallback(async()=>{try{T(!0);try{const F=[];for(let I=0;I<localStorage.length;I++){const $=localStorage.key(I);$&&F.push($)}F.forEach(I=>{try{localStorage.removeItem(I)}catch{}});const C=[];for(let I=0;I<sessionStorage.length;I++){const $=sessionStorage.key(I);$&&C.push($)}C.forEach(I=>{try{sessionStorage.removeItem(I)}catch{}});const z=["app.cached","app.lastAuthEvent","app.currentUserId","app.currentUserEmail","otpVerified","otpRequired","auth.intent","sb-"];Object.keys(localStorage).forEach(I=>{if(z.some($=>I.includes($)))try{localStorage.removeItem(I)}catch{}})}catch(F){console.warn("Error clearing cache:",F)}await ie.auth.signOut()}catch(F){console.error("Error signing out:",F)}finally{T(!1)}},[]),U=p.useCallback(async()=>{try{const{data:{user:F}}=await ie.auth.getUser();r(F)}catch(F){console.error("Error refreshing user:",F)}},[]),L=p.useMemo(()=>({user:n,session:a,loading:o,signOut:P,refreshUser:U,otpRequired:u,otpVerified:d,setOtpVerified:D,otpEvaluated:m,accountDeactivated:v,setAccountDeactivated:x}),[n,a,o,P,U,u,d,D,m,v,x]);return i.jsx(DF.Provider,{value:L,children:e})}function Xr(){const e=p.useContext(DF);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const qu={analytics:["read"],ai_profiles:["create","update","delete","read_all","read_own"],ai_sessions:["create","update","delete","read_all","read_own"],channels:["create","update","delete","read_all","read_own"],contacts:["create","update","delete","read_all","read_own"],contact_identities:["create","update","delete","read_all","read_own"],threads:["create","update","delete","read_all","read_channel_owned","read_collaborator"],messages:["create","update","delete","send","read_all","read_collaborator"],ai_agent_files:["create","read","delete"],admin_panel:["read","update"],super_agents:["create","update","delete","read_all","read_own"],users_profile:["create","update","delete","read"],roles:["create","read","update","delete"],audit_logs:["read"],alerts:["read","ack"]},xw=e=>e==="create"?"create":e==="update"?"update":e==="delete"?"delete":e.startsWith("read")||e.startsWith("view")?"read":"special",kee=e=>["delete","manage_2fa","configure","update_token_limit","manage"].some(n=>e.includes(n)),See={defaultTtl:5*60*1e3,maxSize:100,strategy:"stale-while-revalidate"},zf="supabase_cache_",gT="1";class Nee{constructor(t={}){Mt(this,"cache",new Map);Mt(this,"config");this.config={...See,...t},this.loadFromStorage(),typeof window<"u"&&setInterval(()=>this.cleanup(),6e4)}get(t){const n=this.cache.get(t);if(!n)return null;const r=Date.now(),a=n.ttl||this.config.defaultTtl;return n.timestamp+a<r?(this.cache.delete(t),this.deleteFromStorage(t),null):n.data}set(t,n,r){const a={data:n,timestamp:Date.now(),ttl:r||this.config.defaultTtl,version:parseInt(gT)};if(this.cache.size>=this.config.maxSize){const s=this.findOldestEntry();s&&(this.cache.delete(s),this.deleteFromStorage(s))}this.cache.set(t,a),this.saveToStorage(t,a)}async execute(t,n,r,a){const s=r||this.config.strategy,o=this.get(t);switch(s){case"cache-first":if(o)return o;try{const l=await n();return this.set(t,l,a),l}catch(l){if(o)return o;throw l}case"network-first":try{const l=await n();return this.set(t,l,a),l}catch(l){if(o)return o;throw l}case"stale-while-revalidate":if(o)return n().then(l=>{this.set(t,l,a)}).catch(()=>{}),o;try{const l=await n();return this.set(t,l,a),l}catch(l){throw l}case"network-only":try{const l=await n();return this.set(t,l,a),l}catch(l){throw l}case"cache-only":if(o)return o;throw new Error("No cached data available");default:return await n()}}invalidate(t){this.cache.delete(t),this.deleteFromStorage(t)}invalidatePattern(t){const n=new RegExp(t);for(const r of this.cache.keys())n.test(r)&&this.invalidate(r)}clear(){this.cache.clear();try{if(typeof localStorage<"u")for(let t=localStorage.length-1;t>=0;t--){const n=localStorage.key(t);n&&n.startsWith(zf)&&localStorage.removeItem(n)}}catch(t){console.warn("Failed to clear cache from storage:",t)}}findOldestEntry(){let t=null,n=1/0;for(const[r,a]of this.cache.entries())a.timestamp<n&&(n=a.timestamp,t=r);return t}cleanup(){const t=Date.now();for(const[n,r]of this.cache.entries()){const a=r.ttl||this.config.defaultTtl;r.timestamp+a<t&&(this.cache.delete(n),this.deleteFromStorage(n))}}saveToStorage(t,n){try{if(typeof localStorage<"u"){const r=`${zf}${t}`;localStorage.setItem(r,JSON.stringify(n))}}catch(r){console.warn("Failed to save cache entry:",r)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=Date.now();for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);if(r&&r.startsWith(zf))try{const s=JSON.parse(localStorage.getItem(r)||"{}");if(s.version&&s.version!==parseInt(gT)){localStorage.removeItem(r);continue}const o=s.ttl||this.config.defaultTtl;if(s.timestamp+o<t){localStorage.removeItem(r);continue}const l=r.replace(zf,"");this.cache.set(l,s)}catch{localStorage.removeItem(r)}}}}catch(t){console.warn("Failed to load cache from storage:",t)}}deleteFromStorage(t){try{if(typeof localStorage<"u"){const n=`${zf}${t}`;localStorage.removeItem(n)}}catch{}}getStats(){const t=Date.now(),n=Array.from(this.cache.entries()).map(([r,a])=>({key:r,age:t-a.timestamp,ttl:a.ttl||this.config.defaultTtl}));return{size:this.cache.size,maxSize:this.config.maxSize,entries:n}}}const Xs=new Nee;class Cee{constructor(){Mt(this,"queue",[]);Mt(this,"processing",!1);Mt(this,"maxRetries",3);Mt(this,"storageKey","offline_queue");this.loadFromStorage(),typeof window<"u"&&window.addEventListener("online",()=>{this.processQueue()})}add(t){const n={...t,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),retries:0};return this.queue.push(n),this.saveToStorage(),typeof navigator<"u"&&navigator.onLine&&this.processQueue(),n.id}async processQueue(t){if(!(this.processing||this.queue.length===0)&&t){this.processing=!0;try{const n=[...this.queue];this.queue=[];for(const r of n)try{await t(r),this.remove(r.id)}catch{r.retries++,r.retries<this.maxRetries?this.queue.push(r):(console.error("Failed to sync write operation after max retries:",r),this.remove(r.id))}this.saveToStorage()}finally{this.processing=!1}}}remove(t){this.queue=this.queue.filter(n=>n.id!==t),this.saveToStorage()}size(){return this.queue.length}clear(){this.queue=[],this.saveToStorage()}getAll(){return[...this.queue]}saveToStorage(){try{typeof localStorage<"u"&&localStorage.setItem(this.storageKey,JSON.stringify(this.queue))}catch(t){console.warn("Failed to save offline queue:",t)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);t&&(this.queue=JSON.parse(t))}}catch(t){console.warn("Failed to load offline queue:",t)}}}new Cee;const um="app:authz-changed";function vT(){try{Xs.clear()}catch{}try{if(typeof localStorage>"u")return;const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&e.push(n)}for(const t of e)if(t.startsWith("app.cached"))try{localStorage.removeItem(t)}catch{}}catch{}try{const e=globalThis;e.__agentsCache&&(e.__agentsCache.data=null,e.__agentsCache.ts=0,e.__agentsCache.inFlight=null)}catch{}}function xT(e){try{if(typeof window>"u")return;window.dispatchEvent(new CustomEvent(um,{detail:{reason:e}}))}catch{}}const $F=p.createContext(void 0);function Aee({children:e}){const{user:t,accountDeactivated:n}=Xr(),[r,a]=p.useState([]),[s,o]=p.useState([]),[l,c]=p.useState(null),[u,f]=p.useState(!0),[d,h]=p.useState(null),m=(E,R)=>{const P=E.map(L=>String((L==null?void 0:L.name)??"").trim().toLowerCase()).filter(Boolean).sort().join(","),U=R.map(L=>`${String((L==null?void 0:L.resource)??"").trim().toLowerCase()}.${String((L==null?void 0:L.action)??"").trim().toLowerCase()}`).filter(L=>L!==".").sort().join(",");return`roles:${P}|perms:${U}`},g=(E,R)=>{try{const P=`app.authzFingerprint:${E}`,U=typeof localStorage<"u"?localStorage.getItem(P):null;U&&U!==R&&(vT(),xT("rbac-fingerprint-changed")),typeof localStorage<"u"&&localStorage.setItem(P,R)}catch{}},v=async(E,R)=>{try{R!=null&&R.background||f(!0),h(null);const{data:P,error:U}=await ie.from("v_current_user_permissions").select("*");if(U)throw U;const L=P||[];o(L);const{data:O,error:F}=await ie.from("user_roles").select("role_id").eq("user_id",E);if(F)throw F;if(!O||O.length===0){g(E,m([],L)),a([]),c({user_id:E,roles:[],permissions:L});return}const C=O.map(X=>X.role_id),{data:z,error:I}=await ie.from("roles").select("*").in("id",C);if(I)throw I;const $=z||[];g(E,m($,L)),a($);const K=$.map(X=>({...X,permissions:L}));c({user_id:E,roles:K,permissions:L})}catch(P){console.error("Error fetching user RBAC:",P),h(P instanceof Error?P.message:"Failed to fetch user permissions")}finally{R!=null&&R.background||f(!1)}},x=async()=>{t!=null&&t.id&&await v(t.id,{background:!0})};p.useEffect(()=>{t!=null&&t.id&&!n?v(t.id):(a([]),o([]),c(null),f(!1))},[t==null?void 0:t.id,n]),p.useEffect(()=>{if(!(t!=null&&t.id)||n)return;const E=t.id,R=ie.channel(`rbac-user-roles:${E}`).on("postgres_changes",{event:"*",schema:"public",table:"user_roles",filter:`user_id=eq.${E}`},async()=>{vT(),xT("user_roles-realtime-change");try{await v(E,{background:!0})}catch{}}).subscribe();return()=>{try{ie.removeChannel(R)}catch{}}},[t==null?void 0:t.id,n]);const y=E=>{if(!E)return!1;if(r.some(O=>O.name==="master_agent"))return!0;const R=String(E).trim().toLowerCase();if(s.some(O=>(O.name||"").trim().toLowerCase()===R)||s.some(O=>`${O.resource}.${O.action}`.toLowerCase()===R))return!0;const L=R.indexOf(".");if(L>0){const O=R.slice(0,L),F=R.slice(L+1),z={edit:["update"],update:["edit"],remove:["delete"],delete:["remove"],send:["create"],read:["read_all","read_own","read_channel_owned","read_collaborator"],read_all:["read"]}[F]||[];if(z.length>0&&s.some($=>z.some(K=>`${$.resource}.${$.action}`.toLowerCase()===`${O}.${K}`)))return!0}return!1},b=E=>E.some(R=>y(R)),w=E=>E.every(R=>y(R)),k=E=>r.some(R=>R.name===E),B={userRoles:r,userPermissions:s,userWithRoles:l,hasPermission:y,hasAnyPermission:b,hasAllPermissions:w,hasRole:k,hasAnyRole:E=>E.some(R=>k(R)),hasPermissionDB:async(E,R)=>{try{const{data:P,error:U}=await ie.rpc("has_perm",{p_resource:E,p_action:R});return U?(console.error("Error checking permission:",U),!1):P===!0}catch(P){return console.error("Error in hasPermissionDB:",P),!1}},can:(E,...R)=>!E||R.length===0?!1:R.every(P=>y(`${E}.${P}`)),canRead:E=>{const R=qu[E];if(!Array.isArray(R))return!1;const P=R.filter(U=>U==="read"||U.startsWith("read_"));return P.length===0?!1:P.some(U=>y(`${E}.${U}`))},canCreate:E=>y(`${E}.create`),canUpdate:E=>y(`${E}.update`),canDelete:E=>y(`${E}.delete`),loading:u,error:d,refreshRBAC:x};return i.jsx($F.Provider,{value:B,children:e})}function br(){const e=p.useContext($F);if(e===void 0)throw new Error("useRBAC must be used within an RBACProvider");return e}const Ad=up("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ne=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},s)=>{const o=r?GS:"button";return i.jsx(o,{className:ke(Ad({variant:t,size:n,className:e})),ref:s,...a})});ne.displayName="Button";const Oe=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ke("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Oe.displayName="Card";const et=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ke("flex flex-col space-y-1.5 p-6",e),...t}));et.displayName="CardHeader";const Ze=p.forwardRef(({className:e,...t},n)=>i.jsx("h3",{ref:n,className:ke("text-2xl font-semibold leading-none tracking-tight",e),...t}));Ze.displayName="CardTitle";const vi=p.forwardRef(({className:e,...t},n)=>i.jsx("p",{ref:n,className:ke("text-sm text-muted-foreground",e),...t}));vi.displayName="CardDescription";const Qe=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ke("p-6 pt-0",e),...t}));Qe.displayName="CardContent";const Eee=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ke("flex items-center p-6 pt-0",e),...t}));Eee.displayName="CardFooter";const Je=p.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:ke("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Je.displayName="Input";var Pee="Label",LF=p.forwardRef((e,t)=>i.jsx(Ye.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));LF.displayName=Pee;var FF=LF;const Tee=up("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),qe=p.forwardRef(({className:e,...t},n)=>i.jsx(FF,{ref:n,className:ke(Tee(),e),...t}));qe.displayName=FF.displayName;var Oee=p.createContext(void 0);function hf(e){const t=p.useContext(Oee);return e||t||"ltr"}var yw="rovingFocusGroup.onEntryFocus",Iee={bubbles:!1,cancelable:!0},yp="RovingFocusGroup",[n_,BF,Ree]=lp(yp),[Mee,Zy]=wr(yp,[Ree]),[Dee,$ee]=Mee(yp),UF=p.forwardRef((e,t)=>i.jsx(n_.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(n_.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Lee,{...e,ref:t})})}));UF.displayName=yp;var Lee=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...d}=e,h=p.useRef(null),m=St(t,h),g=hf(s),[v,x]=Pa({prop:o,defaultProp:l??null,onChange:c,caller:yp}),[y,b]=p.useState(!1),w=Hn(u),k=BF(n),j=p.useRef(!1),[_,S]=p.useState(0);return p.useEffect(()=>{const T=h.current;if(T)return T.addEventListener(yw,w),()=>T.removeEventListener(yw,w)},[w]),i.jsx(Dee,{scope:n,orientation:r,dir:g,loop:a,currentTabStopId:v,onItemFocus:p.useCallback(T=>x(T),[x]),onItemShiftTab:p.useCallback(()=>b(!0),[]),onFocusableItemAdd:p.useCallback(()=>S(T=>T+1),[]),onFocusableItemRemove:p.useCallback(()=>S(T=>T-1),[]),children:i.jsx(Ye.div,{tabIndex:y||_===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:Ie(e.onMouseDown,()=>{j.current=!0}),onFocus:Ie(e.onFocus,T=>{const N=!j.current;if(T.target===T.currentTarget&&N&&!y){const A=new CustomEvent(yw,Iee);if(T.currentTarget.dispatchEvent(A),!A.defaultPrevented){const D=k().filter(U=>U.focusable),B=D.find(U=>U.active),E=D.find(U=>U.id===v),P=[B,E,...D].filter(Boolean).map(U=>U.ref.current);WF(P,f)}}j.current=!1}),onBlur:Ie(e.onBlur,()=>b(!1))})})}),zF="RovingFocusGroupItem",qF=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:s,children:o,...l}=e,c=rr(),u=s||c,f=$ee(zF,n),d=f.currentTabStopId===u,h=BF(n),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:v}=f;return p.useEffect(()=>{if(r)return m(),()=>g()},[r,m,g]),i.jsx(n_.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:i.jsx(Ye.span,{tabIndex:d?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:Ie(e.onMouseDown,x=>{r?f.onItemFocus(u):x.preventDefault()}),onFocus:Ie(e.onFocus,()=>f.onItemFocus(u)),onKeyDown:Ie(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=Uee(x,f.orientation,f.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let w=h().filter(k=>k.focusable).map(k=>k.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const k=w.indexOf(x.currentTarget);w=f.loop?zee(w,k+1):w.slice(k+1)}setTimeout(()=>WF(w))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:v!=null}):o})})});qF.displayName=zF;var Fee={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Bee(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Uee(e,t,n){const r=Bee(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Fee[r]}function WF(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function zee(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var HF=UF,VF=qF,eb="Tabs",[qee,$3e]=wr(eb,[Zy]),KF=Zy(),[Wee,CN]=qee(eb),GF=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=hf(l),[d,h]=Pa({prop:r,onChange:a,defaultProp:s??"",caller:eb});return i.jsx(Wee,{scope:n,baseId:rr(),value:d,onValueChange:h,orientation:o,dir:f,activationMode:c,children:i.jsx(Ye.div,{dir:f,"data-orientation":o,...u,ref:t})})});GF.displayName=eb;var YF="TabsList",XF=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,s=CN(YF,n),o=KF(n);return i.jsx(HF,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:i.jsx(Ye.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})});XF.displayName=YF;var JF="TabsTrigger",QF=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...s}=e,o=CN(JF,n),l=KF(n),c=t3(o.baseId,r),u=n3(o.baseId,r),f=r===o.value;return i.jsx(VF,{asChild:!0,...l,focusable:!a,active:f,children:i.jsx(Ye.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...s,ref:t,onMouseDown:Ie(e.onMouseDown,d=>{!a&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Ie(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Ie(e.onFocus,()=>{const d=o.activationMode!=="manual";!f&&!a&&d&&o.onValueChange(r)})})})});QF.displayName=JF;var ZF="TabsContent",e3=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:s,...o}=e,l=CN(ZF,n),c=t3(l.baseId,r),u=n3(l.baseId,r),f=r===l.value,d=p.useRef(f);return p.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),i.jsx(mr,{present:a||f,children:({present:h})=>i.jsx(Ye.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});e3.displayName=ZF;function t3(e,t){return`${e}-trigger-${t}`}function n3(e,t){return`${e}-content-${t}`}var Hee=GF,r3=XF,a3=QF,i3=e3;const bl=Hee,vo=p.forwardRef(({className:e,...t},n)=>i.jsx(r3,{ref:n,className:ke("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));vo.displayName=r3.displayName;const Vn=p.forwardRef(({className:e,...t},n)=>i.jsx(a3,{ref:n,className:ke("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Vn.displayName=a3.displayName;const In=p.forwardRef(({className:e,...t},n)=>i.jsx(i3,{ref:n,className:ke("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));In.displayName=i3.displayName;const Vee=up("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),dm=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:ke(Vee({variant:t}),e),...n}));dm.displayName="Alert";const Kee=p.forwardRef(({className:e,...t},n)=>i.jsx("h5",{ref:n,className:ke("mb-1 font-medium leading-none tracking-tight",e),...t}));Kee.displayName="AlertTitle";const fm=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ke("text-sm [&_p]:leading-relaxed",e),...t}));fm.displayName="AlertDescription";function Gee({sitekey:e,onVerify:t,onExpire:n,className:r}){const a=p.useRef(null),s=p.useRef(null);return p.useEffect(()=>(new Promise(l=>{if(window.hcaptcha)return l();const c=document.createElement("script");c.src="https://js.hcaptcha.com/1/api.js",c.async=!0,c.defer=!0,c.onload=()=>l(),document.head.appendChild(c)}).then(()=>{a.current&&s.current===null&&(s.current=window.hcaptcha.render(a.current,{sitekey:e,callback:l=>t(l),"expired-callback":()=>n&&n()}))}),()=>{try{s.current!==null&&window.hcaptcha&&window.hcaptcha.remove(s.current)}catch{}}),[e]),i.jsx("div",{className:r,children:i.jsx("div",{ref:a})})}const Yee="vite_react_shadcn_ts",Xee="0.1.16",Jee="module",Qee={predev:"echo skip changelog copy",dev:"vite",prebuild:"echo skip changelog copy",build:"vite build","build:dev":"vite build --mode development",lint:"eslint .",preview:"vite preview",test:"vitest",sync:"node sync/index.js"},Zee={"@hookform/resolvers":"^3.10.0","@radix-ui/react-accordion":"^1.2.11","@radix-ui/react-alert-dialog":"^1.1.14","@radix-ui/react-aspect-ratio":"^1.1.7","@radix-ui/react-avatar":"^1.1.10","@radix-ui/react-checkbox":"^1.3.2","@radix-ui/react-collapsible":"^1.1.11","@radix-ui/react-context-menu":"^2.2.15","@radix-ui/react-dialog":"^1.1.14","@radix-ui/react-dropdown-menu":"^2.1.15","@radix-ui/react-hover-card":"^1.1.14","@radix-ui/react-label":"^2.1.7","@radix-ui/react-menubar":"^1.1.15","@radix-ui/react-navigation-menu":"^1.2.13","@radix-ui/react-popover":"^1.1.14","@radix-ui/react-progress":"^1.1.7","@radix-ui/react-radio-group":"^1.3.7","@radix-ui/react-scroll-area":"^1.2.9","@radix-ui/react-select":"^2.2.5","@radix-ui/react-separator":"^1.1.7","@radix-ui/react-slider":"^1.3.5","@radix-ui/react-slot":"^1.2.3","@radix-ui/react-switch":"^1.2.5","@radix-ui/react-tabs":"^1.1.12","@radix-ui/react-toast":"^1.2.14","@radix-ui/react-toggle":"^1.1.9","@radix-ui/react-toggle-group":"^1.1.10","@radix-ui/react-tooltip":"^1.2.7","@supabase/supabase-js":"^2.55.0","@tanstack/react-query":"^5.83.0","class-variance-authority":"^0.7.1",clsx:"^2.1.1",cmdk:"^1.1.1","date-fns":"^3.6.0","embla-carousel-react":"^8.6.0","input-otp":"^1.4.2","lucide-react":"^0.462.0","next-themes":"^0.3.0",react:"^18.3.1","react-day-picker":"^8.10.1","react-dom":"^18.3.1","react-hook-form":"^7.61.1","react-markdown":"^9.1.0","react-resizable-panels":"^2.1.9","react-router-dom":"^6.30.1",recharts:"^2.15.4","remark-gfm":"^4.0.1",sonner:"^1.7.4",dotenv:"^16.4.5","tailwind-merge":"^2.6.0","tailwindcss-animate":"^1.0.7",vaul:"^0.9.9",ws:"^8.18.0",zod:"^3.25.76"},ete={"@eslint/js":"^9.32.0","@tailwindcss/typography":"^0.5.16","@types/node":"^22.16.5","@types/react":"^18.3.23","@types/react-dom":"^18.3.7","@vitejs/plugin-react-swc":"^3.11.0",autoprefixer:"^10.4.21",eslint:"^9.32.0","eslint-plugin-react-hooks":"^5.2.0","eslint-plugin-react-refresh":"^0.4.20",globals:"^15.15.0",postcss:"^8.5.6",tailwindcss:"^3.4.17",typescript:"^5.8.3","typescript-eslint":"^8.38.0",vite:"^5.4.19",vitest:"^1.6.0"},bw={name:Yee,private:!0,version:Xee,type:Jee,scripts:Qee,dependencies:Zee,devDependencies:ete},s3=e=>e.replace(/\s/g,""),yT=e=>s3(e).toLowerCase();function tte({onBack:e}){const t=Qa(),[n,r]=p.useState("login"),[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[f,d]=p.useState(null),[h,m]=p.useState(null),[g,v]=p.useState(null),x="30583a2e-84ac-496a-8ec2-23043ae06dc0",y=!!x,b=()=>{var A,D;try{(D=(A=window==null?void 0:window.hcaptcha)==null?void 0:A.reset)==null||D.call(A)}catch{}},[w,k]=p.useState(""),[j,_]=p.useState("");p.useState(""),p.useState("");const S=async A=>{var D;if(A.preventDefault(),s(!0),u(null),v(null),!h){v("Please complete the CAPTCHA"),s(!1);return}try{const{data:B,error:E}=await ie.auth.signInWithPassword({email:w,password:j,...y&&h?{options:{captchaToken:h}}:{}});if(E)throw E;const R=(D=B.user)==null?void 0:D.id;if(R)try{const{data:P,error:U}=await ie.from("users_profile").select("is_active, is_2fa_email_enabled").eq("user_id",R).maybeSingle();if(U)throw console.error("Profile fetch error:",U),U;if(!P){await ie.auth.signOut(),u("Your account profile is missing. Please contact your Master Agent."),s(!1);return}if(P.is_active===!1){t("/account-deactivated",{replace:!0});return}const L=(P==null?void 0:P.is_2fa_email_enabled)===!0;Le.success("Login successful!"),t("/",{replace:!0});return}catch(P){console.warn("Profile fetch failed:",P),Le.success("Login successful!")}else Le.success("Login successful!");t("/",{replace:!0})}catch(B){console.error("Login error:",B),u(B instanceof Error?B.message:"Failed to login"),Le.error("Login failed"),b()}finally{s(!1)}},T=async A=>{A.preventDefault(),s(!0),u(null);try{const{error:D}=await ie.auth.resetPasswordForEmail(w,{redirectTo:`${window.location.origin}/reset-password`});if(D)throw D;d("Password reset email sent! Please check your inbox."),Le.success("Password reset email sent!")}catch(D){console.error("Password reset error:",D),u(D instanceof Error?D.message:"Failed to send reset email"),Le.error("Failed to send reset email")}finally{s(!1)}},N=()=>{u(null),d(null)};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Oe,{className:"w-full max-w-md",children:[i.jsxs(et,{className:"space-y-1",children:[e&&i.jsxs(ne,{variant:"ghost",size:"sm",onClick:e,className:"absolute top-4 left-4",children:[i.jsx(dp,{className:"w-4 h-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"text-center",children:[i.jsx(Ze,{className:"text-2xl font-bold",children:"Welcome back"}),i.jsx(vi,{children:"Sign in to continue to Chatflow"})]})]}),i.jsx(Qe,{children:i.jsxs(bl,{value:n,onValueChange:A=>{r(A),N()},children:[i.jsxs(vo,{className:"grid w-full grid-cols-2",children:[i.jsx(Vn,{value:"login",children:"Login"}),i.jsx(Vn,{value:"reset",children:"Reset"})]}),c&&i.jsx(dm,{className:"mt-4 border-red-200 bg-red-50",children:i.jsx(fm,{className:"text-red-800",children:c})}),f&&i.jsx(dm,{className:"mt-4 border-green-200 bg-green-50",children:i.jsx(fm,{className:"text-green-800",children:f})}),i.jsx(In,{value:"login",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:S,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"login-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Hv,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Je,{id:"login-email",type:"email",placeholder:"Enter your email",value:w,onChange:A=>k(yT(A.target.value)),onKeyDown:A=>{A.key===" "&&A.preventDefault()},className:"pl-10",required:!0})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Well send a one-time code after login."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"login-password",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Zh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Je,{id:"login-password",type:o?"text":"password",placeholder:"Enter your password",value:j,onChange:A=>_(s3(A.target.value)),onKeyDown:A=>{A.key===" "&&A.preventDefault()},className:"pl-10 pr-10",required:!0}),i.jsx(ne,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?i.jsx(XL,{className:"h-4 w-4"}):i.jsx(eN,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"flex items-center justify-end text-xs",children:i.jsx(GP,{to:"/reset-password",className:"hover:underline",children:"Forgot password?"})})]}),i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(Gee,{sitekey:x,onVerify:A=>m(A),onExpire:()=>{m(null)}}),g&&i.jsx("p",{className:"text-xs text-red-600 mt-1",children:g})]}),i.jsx(ne,{type:"submit",className:"w-full",disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:i.jsxs(GP,{to:"/changelog",className:"hover:underline",children:["v",bw==null?void 0:bw.version]})})]})}),i.jsx(In,{value:"reset",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"reset-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Hv,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Je,{id:"reset-email",type:"email",placeholder:"Enter your email",value:w,onChange:A=>k(yT(A.target.value)),onKeyDown:A=>{A.key===" "&&A.preventDefault()},className:"pl-10",required:!0})]})]}),i.jsx(ne,{type:"submit",className:"w-full",disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending reset email..."]}):"Send Reset Email"})]})})]})})]})})}function bg({children:e}){const{user:t,loading:n,otpRequired:r,otpVerified:a,otpEvaluated:s}=Xr(),o=Qa(),l=Pl();if(p.useEffect(()=>{var u;if(!n&&s&&t){const f=l.pathname==="/otp",d=l.pathname==="/reset-password",h=l.pathname==="/invite";let m=!1;try{const g=new URL(window.location.href),v=g.searchParams.get("type"),x=g.searchParams.get("code"),y=window.location.hash||"";m=v==="invite"||x&&!y.includes("access_token=")||y.includes("type=invite")||window.location.pathname==="/invite"}catch{}if(t&&(async()=>{try{const{data:g}=await ie.from("users_profile").select("password_set").eq("user_id",t.id).single();if(g&&g.password_set===!1){setTimeout(()=>o("/reset-password",{replace:!0}),0);return}}catch{}})(),m&&!d&&!h){setTimeout(()=>o("/reset-password",{replace:!0}),0);return}if(r&&!a&&!f){let g="2fa";try{new URL(window.location.href).searchParams.get("type")==="recovery"&&(g="recovery"),(u=window.location.hash)!=null&&u.includes("access_token=")&&(g="recovery"),localStorage.getItem("auth.intent")==="recovery"&&(g="recovery")}catch{}setTimeout(()=>o("/otp",{replace:!0,state:{from:l.pathname,intent:g}}),0)}}},[t,n,s,r,a,l.pathname,o]),n)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),i.jsx("span",{children:"Loading..."})]})});if(!t)return i.jsx(tte,{});const c=l.pathname==="/otp";return t&&r&&!a&&!c?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),i.jsx("span",{children:"Redirecting"})]})}):i.jsx(i.Fragment,{children:e})}const nte=up("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:opacity-90",secondary:"border-transparent bg-secondary text-secondary-foreground hover:opacity-90",destructive:"border-transparent bg-destructive text-destructive-foreground hover:opacity-90",outline:"text-foreground hover:opacity-90"}},defaultVariants:{variant:"default"}}),vt=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,className:ke(nte({variant:t}),e),...n}));vt.displayName="Badge";var rte="Separator",bT="horizontal",ate=["horizontal","vertical"],o3=p.forwardRef((e,t)=>{const{decorative:n,orientation:r=bT,...a}=e,s=ite(r)?r:bT,l=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return i.jsx(Ye.div,{"data-orientation":s,...l,...a,ref:t})});o3.displayName=rte;function ite(e){return ate.includes(e)}var l3=o3;const Ed=p.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>i.jsx(l3,{ref:a,decorative:n,orientation:t,className:ke("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Ed.displayName=l3.displayName;var ww=0;function tb(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??wT()),document.body.insertAdjacentElement("beforeend",e[1]??wT()),ww++,()=>{ww===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ww--}},[])}function wT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var jw="focusScope.autoFocusOnMount",_w="focusScope.autoFocusOnUnmount",jT={bubbles:!1,cancelable:!0},ste="FocusScope",bp=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...o}=e,[l,c]=p.useState(null),u=Hn(a),f=Hn(s),d=p.useRef(null),h=St(t,v=>c(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(w){if(m.paused||!l)return;const k=w.target;l.contains(k)?d.current=k:Bo(d.current,{select:!0})},x=function(w){if(m.paused||!l)return;const k=w.relatedTarget;k!==null&&(l.contains(k)||Bo(d.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&Bo(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const b=new MutationObserver(y);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),b.disconnect()}}},[r,l,m.paused]),p.useEffect(()=>{if(l){kT.add(m);const v=document.activeElement;if(!l.contains(v)){const y=new CustomEvent(jw,jT);l.addEventListener(jw,u),l.dispatchEvent(y),y.defaultPrevented||(ote(fte(c3(l)),{select:!0}),document.activeElement===v&&Bo(l))}return()=>{l.removeEventListener(jw,u),setTimeout(()=>{const y=new CustomEvent(_w,jT);l.addEventListener(_w,f),l.dispatchEvent(y),y.defaultPrevented||Bo(v??document.body,{select:!0}),l.removeEventListener(_w,f),kT.remove(m)},0)}}},[l,u,f,m]);const g=p.useCallback(v=>{if(!n&&!r||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const b=v.currentTarget,[w,k]=lte(b);w&&k?!v.shiftKey&&y===k?(v.preventDefault(),n&&Bo(w,{select:!0})):v.shiftKey&&y===w&&(v.preventDefault(),n&&Bo(k,{select:!0})):y===b&&v.preventDefault()}},[n,r,m.paused]);return i.jsx(Ye.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});bp.displayName=ste;function ote(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Bo(r,{select:t}),document.activeElement!==n)return}function lte(e){const t=c3(e),n=_T(t,e),r=_T(t.reverse(),e);return[n,r]}function c3(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function _T(e,t){for(const n of e)if(!cte(n,{upTo:t}))return n}function cte(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ute(e){return e instanceof HTMLInputElement&&"select"in e}function Bo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&ute(e)&&t&&e.select()}}var kT=dte();function dte(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=ST(e,t),e.unshift(t)},remove(t){var n;e=ST(e,t),(n=e[0])==null||n.resume()}}}function ST(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function fte(e){return e.filter(t=>t.tagName!=="A")}var hte=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},fu=new WeakMap,wg=new WeakMap,jg={},kw=0,u3=function(e){return e&&(e.host||u3(e.parentNode))},mte=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=u3(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},pte=function(e,t,n,r){var a=mte(t,Array.isArray(e)?e:[e]);jg[n]||(jg[n]=new WeakMap);var s=jg[n],o=[],l=new Set,c=new Set(a),u=function(d){!d||l.has(d)||(l.add(d),u(d.parentNode))};a.forEach(u);var f=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(l.has(h))f(h);else try{var m=h.getAttribute(r),g=m!==null&&m!=="false",v=(fu.get(h)||0)+1,x=(s.get(h)||0)+1;fu.set(h,v),s.set(h,x),o.push(h),v===1&&g&&wg.set(h,!0),x===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return f(t),l.clear(),kw++,function(){o.forEach(function(d){var h=fu.get(d)-1,m=s.get(d)-1;fu.set(d,h),s.set(d,m),h||(wg.has(d)||d.removeAttribute(r),wg.delete(d)),m||d.removeAttribute(n)}),kw--,kw||(fu=new WeakMap,fu=new WeakMap,wg=new WeakMap,jg={})}},nb=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=hte(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),pte(r,a,n,"aria-hidden")):function(){return null}},ys=function(){return ys=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ys.apply(this,arguments)};function d3(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function gte(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,s;r<a;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var mv="right-scroll-bar-position",pv="width-before-scroll-bar",vte="with-scroll-bars-hidden",xte="--removed-body-scroll-bar-size";function Sw(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function yte(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var bte=typeof window<"u"?p.useLayoutEffect:p.useEffect,NT=new WeakMap;function wte(e,t){var n=yte(null,function(r){return e.forEach(function(a){return Sw(a,r)})});return bte(function(){var r=NT.get(n);if(r){var a=new Set(r),s=new Set(e),o=n.current;a.forEach(function(l){s.has(l)||Sw(l,null)}),s.forEach(function(l){a.has(l)||Sw(l,o)})}NT.set(n,e)},[e]),n}function jte(e){return e}function _te(e,t){t===void 0&&(t=jte);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(s),o=n}var c=function(){var f=o;o=[],f.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){o.push(f),u()},filter:function(f){return o=o.filter(f),n}}}};return a}function kte(e){e===void 0&&(e={});var t=_te(null);return t.options=ys({async:!0,ssr:!1},e),t}var f3=function(e){var t=e.sideCar,n=d3(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,ys({},n))};f3.isSideCarExport=!0;function Ste(e,t){return e.useMedium(t),f3}var h3=kte(),Nw=function(){},rb=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:Nw,onWheelCapture:Nw,onTouchMoveCapture:Nw}),a=r[0],s=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,m=e.noRelative,g=e.noIsolation,v=e.inert,x=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,w=e.gapMode,k=d3(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,_=wte([n,t]),S=ys(ys({},k),a);return p.createElement(p.Fragment,null,f&&p.createElement(j,{sideCar:h3,removeScrollBar:u,shards:d,noRelative:m,noIsolation:g,inert:v,setCallbacks:s,allowPinchZoom:!!x,lockRef:n,gapMode:w}),o?p.cloneElement(p.Children.only(l),ys(ys({},S),{ref:_})):p.createElement(b,ys({},S,{className:c,ref:_}),l))});rb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rb.classNames={fullWidth:pv,zeroRight:mv};var Nte=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Cte(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Nte();return t&&e.setAttribute("nonce",t),e}function Ate(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Ete(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Pte=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Cte())&&(Ate(t,n),Ete(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Tte=function(){var e=Pte();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},m3=function(){var e=Tte(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Ote={left:0,top:0,right:0,gap:0},Cw=function(e){return parseInt(e||"",10)||0},Ite=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Cw(n),Cw(r),Cw(a)]},Rte=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ote;var t=Ite(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Mte=m3(),nd="data-scroll-locked",Dte=function(e,t,n,r){var a=e.left,s=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(vte,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(nd,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(mv,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(pv,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(mv," .").concat(mv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(pv," .").concat(pv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(nd,`] {
    `).concat(xte,": ").concat(l,`px;
  }
`)},CT=function(){var e=parseInt(document.body.getAttribute(nd)||"0",10);return isFinite(e)?e:0},$te=function(){p.useEffect(function(){return document.body.setAttribute(nd,(CT()+1).toString()),function(){var e=CT()-1;e<=0?document.body.removeAttribute(nd):document.body.setAttribute(nd,e.toString())}},[])},Lte=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;$te();var s=p.useMemo(function(){return Rte(a)},[a]);return p.createElement(Mte,{styles:Dte(s,!t,a,n?"":"!important")})},r_=!1;if(typeof window<"u")try{var _g=Object.defineProperty({},"passive",{get:function(){return r_=!0,!0}});window.addEventListener("test",_g,_g),window.removeEventListener("test",_g,_g)}catch{r_=!1}var hu=r_?{passive:!1}:!1,Fte=function(e){return e.tagName==="TEXTAREA"},p3=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Fte(e)&&n[t]==="visible")},Bte=function(e){return p3(e,"overflowY")},Ute=function(e){return p3(e,"overflowX")},AT=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=g3(e,r);if(a){var s=v3(e,r),o=s[1],l=s[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},zte=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},qte=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},g3=function(e,t){return e==="v"?Bte(t):Ute(t)},v3=function(e,t){return e==="v"?zte(t):qte(t)},Wte=function(e,t){return e==="h"&&t==="rtl"?-1:1},Hte=function(e,t,n,r,a){var s=Wte(e,window.getComputedStyle(t).direction),o=s*r,l=n.target,c=t.contains(l),u=!1,f=o>0,d=0,h=0;do{if(!l)break;var m=v3(e,l),g=m[0],v=m[1],x=m[2],y=v-x-s*g;(g||y)&&g3(e,l)&&(d+=y,h+=g);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(d)<1||!a)||!f&&(Math.abs(h)<1||!a))&&(u=!0),u},kg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ET=function(e){return[e.deltaX,e.deltaY]},PT=function(e){return e&&"current"in e?e.current:e},Vte=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Kte=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Gte=0,mu=[];function Yte(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),a=p.useState(Gte++)[0],s=p.useState(m3)[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=gte([e.lockRef.current],(e.shards||[]).map(PT),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var y=kg(v),b=n.current,w="deltaX"in v?v.deltaX:b[0]-y[0],k="deltaY"in v?v.deltaY:b[1]-y[1],j,_=v.target,S=Math.abs(w)>Math.abs(k)?"h":"v";if("touches"in v&&S==="h"&&_.type==="range")return!1;var T=AT(S,_);if(!T)return!0;if(T?j=S:(j=S==="v"?"h":"v",T=AT(S,_)),!T)return!1;if(!r.current&&"changedTouches"in v&&(w||k)&&(r.current=j),!j)return!0;var N=r.current||j;return Hte(N,x,v,N==="h"?w:k,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!mu.length||mu[mu.length-1]!==s)){var y="deltaY"in x?ET(x):kg(x),b=t.current.filter(function(j){return j.name===x.type&&(j.target===x.target||x.target===j.shadowParent)&&Vte(j.delta,y)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(PT).filter(Boolean).filter(function(j){return j.contains(x.target)}),k=w.length>0?l(x,w[0]):!o.current.noIsolation;k&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,y,b){var w={name:v,delta:x,target:y,should:b,shadowParent:Xte(y)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(k){return k!==w})},1)},[]),f=p.useCallback(function(v){n.current=kg(v),r.current=void 0},[]),d=p.useCallback(function(v){u(v.type,ET(v),v.target,l(v,e.lockRef.current))},[]),h=p.useCallback(function(v){u(v.type,kg(v),v.target,l(v,e.lockRef.current))},[]);p.useEffect(function(){return mu.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,hu),document.addEventListener("touchmove",c,hu),document.addEventListener("touchstart",f,hu),function(){mu=mu.filter(function(v){return v!==s}),document.removeEventListener("wheel",c,hu),document.removeEventListener("touchmove",c,hu),document.removeEventListener("touchstart",f,hu)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(s,{styles:Kte(a)}):null,m?p.createElement(Lte,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Xte(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Jte=Ste(h3,Yte);var wp=p.forwardRef(function(e,t){return p.createElement(rb,ys({},e,{ref:t,sideCar:Jte}))});wp.classNames=rb.classNames;var a_=["Enter"," "],Qte=["ArrowDown","PageUp","Home"],x3=["ArrowUp","PageDown","End"],Zte=[...Qte,...x3],ene={ltr:[...a_,"ArrowRight"],rtl:[...a_,"ArrowLeft"]},tne={ltr:["ArrowLeft"],rtl:["ArrowRight"]},jp="Menu",[hm,nne,rne]=lp(jp),[Zc,y3]=wr(jp,[rne,Al,Zy]),ab=Al(),b3=Zy(),[ane,eu]=Zc(jp),[ine,_p]=Zc(jp),w3=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:s,modal:o=!0}=e,l=ab(t),[c,u]=p.useState(null),f=p.useRef(!1),d=Hn(s),h=hf(a);return p.useEffect(()=>{const m=()=>{f.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>f.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),i.jsx(Dy,{...l,children:i.jsx(ane,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:u,children:i.jsx(ine,{scope:t,onClose:p.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:h,modal:o,children:r})})})};w3.displayName=jp;var sne="MenuAnchor",AN=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=ab(n);return i.jsx(pp,{...a,...r,ref:t})});AN.displayName=sne;var EN="MenuPortal",[one,j3]=Zc(EN,{forceMount:void 0}),_3=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,s=eu(EN,t);return i.jsx(one,{scope:t,forceMount:n,children:i.jsx(mr,{present:n||s.open,children:i.jsx(sf,{asChild:!0,container:a,children:r})})})};_3.displayName=EN;var xi="MenuContent",[lne,PN]=Zc(xi),k3=p.forwardRef((e,t)=>{const n=j3(xi,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,s=eu(xi,e.__scopeMenu),o=_p(xi,e.__scopeMenu);return i.jsx(hm.Provider,{scope:e.__scopeMenu,children:i.jsx(mr,{present:r||s.open,children:i.jsx(hm.Slot,{scope:e.__scopeMenu,children:o.modal?i.jsx(cne,{...a,ref:t}):i.jsx(une,{...a,ref:t})})})})}),cne=p.forwardRef((e,t)=>{const n=eu(xi,e.__scopeMenu),r=p.useRef(null),a=St(t,r);return p.useEffect(()=>{const s=r.current;if(s)return nb(s)},[]),i.jsx(TN,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ie(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),une=p.forwardRef((e,t)=>{const n=eu(xi,e.__scopeMenu);return i.jsx(TN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),dne=vl("MenuContent.ScrollLock"),TN=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...v}=e,x=eu(xi,n),y=_p(xi,n),b=ab(n),w=b3(n),k=nne(n),[j,_]=p.useState(null),S=p.useRef(null),T=St(t,S,x.onContentChange),N=p.useRef(0),A=p.useRef(""),D=p.useRef(0),B=p.useRef(null),E=p.useRef("right"),R=p.useRef(0),P=g?wp:p.Fragment,U=g?{as:dne,allowPinchZoom:!0}:void 0,L=F=>{var W,ae;const C=A.current+F,z=k().filter(G=>!G.disabled),I=document.activeElement,$=(W=z.find(G=>G.ref.current===I))==null?void 0:W.textValue,K=z.map(G=>G.textValue),X=_ne(K,C,$),V=(ae=z.find(G=>G.textValue===X))==null?void 0:ae.ref.current;(function G(le){A.current=le,window.clearTimeout(N.current),le!==""&&(N.current=window.setTimeout(()=>G(""),1e3))})(C),V&&setTimeout(()=>V.focus())};p.useEffect(()=>()=>window.clearTimeout(N.current),[]),tb();const O=p.useCallback(F=>{var z,I;return E.current===((z=B.current)==null?void 0:z.side)&&Sne(F,(I=B.current)==null?void 0:I.area)},[]);return i.jsx(lne,{scope:n,searchRef:A,onItemEnter:p.useCallback(F=>{O(F)&&F.preventDefault()},[O]),onItemLeave:p.useCallback(F=>{var C;O(F)||((C=S.current)==null||C.focus(),_(null))},[O]),onTriggerLeave:p.useCallback(F=>{O(F)&&F.preventDefault()},[O]),pointerGraceTimerRef:D,onPointerGraceIntentChange:p.useCallback(F=>{B.current=F},[]),children:i.jsx(P,{...U,children:i.jsx(bp,{asChild:!0,trapped:a,onMountAutoFocus:Ie(s,F=>{var C;F.preventDefault(),(C=S.current)==null||C.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(Xc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:i.jsx(HF,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:_,onEntryFocus:Ie(c,F=>{y.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx($y,{role:"menu","aria-orientation":"vertical","data-state":B3(x.open),"data-radix-menu-content":"",dir:y.dir,...b,...v,ref:T,style:{outline:"none",...v.style},onKeyDown:Ie(v.onKeyDown,F=>{const z=F.target.closest("[data-radix-menu-content]")===F.currentTarget,I=F.ctrlKey||F.altKey||F.metaKey,$=F.key.length===1;z&&(F.key==="Tab"&&F.preventDefault(),!I&&$&&L(F.key));const K=S.current;if(F.target!==K||!Zte.includes(F.key))return;F.preventDefault();const V=k().filter(W=>!W.disabled).map(W=>W.ref.current);x3.includes(F.key)&&V.reverse(),wne(V)}),onBlur:Ie(e.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(N.current),A.current="")}),onPointerMove:Ie(e.onPointerMove,mm(F=>{const C=F.target,z=R.current!==F.clientX;if(F.currentTarget.contains(C)&&z){const I=F.clientX>R.current?"right":"left";E.current=I,R.current=F.clientX}}))})})})})})})});k3.displayName=xi;var fne="MenuGroup",ON=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Ye.div,{role:"group",...r,ref:t})});ON.displayName=fne;var hne="MenuLabel",S3=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Ye.div,{...r,ref:t})});S3.displayName=hne;var nx="MenuItem",TT="menu.itemSelect",ib=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,s=p.useRef(null),o=_p(nx,e.__scopeMenu),l=PN(nx,e.__scopeMenu),c=St(t,s),u=p.useRef(!1),f=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(TT,{bubbles:!0,cancelable:!0});d.addEventListener(TT,m=>r==null?void 0:r(m),{once:!0}),YS(d,h),h.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(N3,{...a,ref:c,disabled:n,onClick:Ie(e.onClick,f),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),u.current=!0},onPointerUp:Ie(e.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:Ie(e.onKeyDown,d=>{const h=l.searchRef.current!=="";n||h&&d.key===" "||a_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});ib.displayName=nx;var N3=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...s}=e,o=PN(nx,n),l=b3(n),c=p.useRef(null),u=St(t,c),[f,d]=p.useState(!1),[h,m]=p.useState("");return p.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[s.children]),i.jsx(hm.ItemSlot,{scope:n,disabled:r,textValue:a??h,children:i.jsx(VF,{asChild:!0,...l,focusable:!r,children:i.jsx(Ye.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:Ie(e.onPointerMove,mm(g=>{r?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ie(e.onPointerLeave,mm(g=>o.onItemLeave(g))),onFocus:Ie(e.onFocus,()=>d(!0)),onBlur:Ie(e.onBlur,()=>d(!1))})})})}),mne="MenuCheckboxItem",C3=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return i.jsx(O3,{scope:e.__scopeMenu,checked:n,children:i.jsx(ib,{role:"menuitemcheckbox","aria-checked":rx(n)?"mixed":n,...a,ref:t,"data-state":RN(n),onSelect:Ie(a.onSelect,()=>r==null?void 0:r(rx(n)?!0:!n),{checkForDefaultPrevented:!1})})})});C3.displayName=mne;var A3="MenuRadioGroup",[pne,gne]=Zc(A3,{value:void 0,onValueChange:()=>{}}),E3=p.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,s=Hn(r);return i.jsx(pne,{scope:e.__scopeMenu,value:n,onValueChange:s,children:i.jsx(ON,{...a,ref:t})})});E3.displayName=A3;var P3="MenuRadioItem",T3=p.forwardRef((e,t)=>{const{value:n,...r}=e,a=gne(P3,e.__scopeMenu),s=n===a.value;return i.jsx(O3,{scope:e.__scopeMenu,checked:s,children:i.jsx(ib,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":RN(s),onSelect:Ie(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});T3.displayName=P3;var IN="MenuItemIndicator",[O3,vne]=Zc(IN,{checked:!1}),I3=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,s=vne(IN,n);return i.jsx(mr,{present:r||rx(s.checked)||s.checked===!0,children:i.jsx(Ye.span,{...a,ref:t,"data-state":RN(s.checked)})})});I3.displayName=IN;var xne="MenuSeparator",R3=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Ye.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});R3.displayName=xne;var yne="MenuArrow",M3=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=ab(n);return i.jsx(Ly,{...a,...r,ref:t})});M3.displayName=yne;var bne="MenuSub",[L3e,D3]=Zc(bne),fh="MenuSubTrigger",$3=p.forwardRef((e,t)=>{const n=eu(fh,e.__scopeMenu),r=_p(fh,e.__scopeMenu),a=D3(fh,e.__scopeMenu),s=PN(fh,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,u={__scopeMenu:e.__scopeMenu},f=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>f,[f]),p.useEffect(()=>{const d=l.current;return()=>{window.clearTimeout(d),c(null)}},[l,c]),i.jsx(AN,{asChild:!0,...u,children:i.jsx(N3,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":B3(n.open),...e,ref:mo(t,a.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ie(e.onPointerMove,mm(d=>{s.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ie(e.onPointerLeave,mm(d=>{var m,g;f();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(g=n.content)==null?void 0:g.dataset.side,x=v==="right",y=x?-5:5,b=h[x?"left":"right"],w=h[x?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:b,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:b,y:h.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Ie(e.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";e.disabled||h&&d.key===" "||ene[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});$3.displayName=fh;var L3="MenuSubContent",F3=p.forwardRef((e,t)=>{const n=j3(xi,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,s=eu(xi,e.__scopeMenu),o=_p(xi,e.__scopeMenu),l=D3(L3,e.__scopeMenu),c=p.useRef(null),u=St(t,c);return i.jsx(hm.Provider,{scope:e.__scopeMenu,children:i.jsx(mr,{present:r||s.open,children:i.jsx(hm.Slot,{scope:e.__scopeMenu,children:i.jsx(TN,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var d;o.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ie(e.onFocusOutside,f=>{f.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Ie(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ie(e.onKeyDown,f=>{var m;const d=f.currentTarget.contains(f.target),h=tne[o.dir].includes(f.key);d&&h&&(s.onOpenChange(!1),(m=l.trigger)==null||m.focus(),f.preventDefault())})})})})})});F3.displayName=L3;function B3(e){return e?"open":"closed"}function rx(e){return e==="indeterminate"}function RN(e){return rx(e)?"indeterminate":e?"checked":"unchecked"}function wne(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function jne(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function _ne(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let o=jne(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function kne(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,f=l.y,d=c.x,h=c.y;f>r!=h>r&&n<(d-u)*(r-f)/(h-f)+u&&(a=!a)}return a}function Sne(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return kne(n,t)}function mm(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Nne=w3,Cne=AN,Ane=_3,Ene=k3,Pne=ON,Tne=S3,One=ib,Ine=C3,Rne=E3,Mne=T3,Dne=I3,$ne=R3,Lne=M3,Fne=$3,Bne=F3,sb="DropdownMenu",[Une,F3e]=wr(sb,[y3]),da=y3(),[zne,U3]=Une(sb),z3=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:s,onOpenChange:o,modal:l=!0}=e,c=da(t),u=p.useRef(null),[f,d]=Pa({prop:a,defaultProp:s??!1,onChange:o,caller:sb});return i.jsx(zne,{scope:t,triggerId:rr(),triggerRef:u,contentId:rr(),open:f,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:l,children:i.jsx(Nne,{...c,open:f,onOpenChange:d,dir:r,modal:l,children:n})})};z3.displayName=sb;var q3="DropdownMenuTrigger",W3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,s=U3(q3,n),o=da(n);return i.jsx(Cne,{asChild:!0,...o,children:i.jsx(Ye.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:mo(t,s.triggerRef),onPointerDown:Ie(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:Ie(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});W3.displayName=q3;var qne="DropdownMenuPortal",H3=e=>{const{__scopeDropdownMenu:t,...n}=e,r=da(t);return i.jsx(Ane,{...r,...n})};H3.displayName=qne;var V3="DropdownMenuContent",K3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=U3(V3,n),s=da(n),o=p.useRef(!1);return i.jsx(Ene,{id:a.contentId,"aria-labelledby":a.triggerId,...s,...r,ref:t,onCloseAutoFocus:Ie(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ie(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,f=c.button===2||u;(!a.modal||f)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});K3.displayName=V3;var Wne="DropdownMenuGroup",Hne=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=da(n);return i.jsx(Pne,{...a,...r,ref:t})});Hne.displayName=Wne;var Vne="DropdownMenuLabel",G3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=da(n);return i.jsx(Tne,{...a,...r,ref:t})});G3.displayName=Vne;var Kne="DropdownMenuItem",Y3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=da(n);return i.jsx(One,{...a,...r,ref:t})});Y3.displayName=Kne;var Gne="DropdownMenuCheckboxItem",X3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=da(n);return i.jsx(Ine,{...a,...r,ref:t})});X3.displayName=Gne;var Yne="DropdownMenuRadioGroup",Xne=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=da(n);return i.jsx(Rne,{...a,...r,ref:t})});Xne.displayName=Yne;var Jne="DropdownMenuRadioItem",J3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=da(n);return i.jsx(Mne,{...a,...r,ref:t})});J3.displayName=Jne;var Qne="DropdownMenuItemIndicator",Q3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=da(n);return i.jsx(Dne,{...a,...r,ref:t})});Q3.displayName=Qne;var Zne="DropdownMenuSeparator",Z3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=da(n);return i.jsx($ne,{...a,...r,ref:t})});Z3.displayName=Zne;var ere="DropdownMenuArrow",tre=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=da(n);return i.jsx(Lne,{...a,...r,ref:t})});tre.displayName=ere;var nre="DropdownMenuSubTrigger",e5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=da(n);return i.jsx(Fne,{...a,...r,ref:t})});e5.displayName=nre;var rre="DropdownMenuSubContent",t5=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=da(n);return i.jsx(Bne,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});t5.displayName=rre;var are=z3,ire=W3,sre=H3,n5=K3,r5=G3,a5=Y3,i5=X3,s5=J3,o5=Q3,l5=Z3,c5=e5,u5=t5;const Su=are,Nu=ire,ore=p.forwardRef(({className:e,inset:t,children:n,...r},a)=>i.jsxs(c5,{ref:a,className:ke("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,i.jsx(fp,{className:"ml-auto h-4 w-4"})]}));ore.displayName=c5.displayName;const lre=p.forwardRef(({className:e,...t},n)=>i.jsx(u5,{ref:n,className:ke("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));lre.displayName=u5.displayName;const rc=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(sre,{children:i.jsx(n5,{ref:r,sideOffset:t,className:ke("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));rc.displayName=n5.displayName;const ai=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(a5,{ref:r,className:ke("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));ai.displayName=a5.displayName;const cre=p.forwardRef(({className:e,children:t,checked:n,...r},a)=>i.jsxs(i5,{ref:a,className:ke("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(o5,{children:i.jsx(Ty,{className:"h-4 w-4"})})}),t]}));cre.displayName=i5.displayName;const ure=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(s5,{ref:r,className:ke("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(o5,{children:i.jsx(eK,{className:"h-2 w-2 fill-current"})})}),t]}));ure.displayName=s5.displayName;const d5=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(r5,{ref:r,className:ke("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));d5.displayName=r5.displayName;const i_=p.forwardRef(({className:e,...t},n)=>i.jsx(l5,{ref:n,className:ke("-mx-1 my-1 h-px bg-muted",e),...t}));i_.displayName=l5.displayName;var f5={exports:{}},h5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pd=p;function dre(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fre=typeof Object.is=="function"?Object.is:dre,hre=Pd.useState,mre=Pd.useEffect,pre=Pd.useLayoutEffect,gre=Pd.useDebugValue;function vre(e,t){var n=t(),r=hre({inst:{value:n,getSnapshot:t}}),a=r[0].inst,s=r[1];return pre(function(){a.value=n,a.getSnapshot=t,Aw(a)&&s({inst:a})},[e,n,t]),mre(function(){return Aw(a)&&s({inst:a}),e(function(){Aw(a)&&s({inst:a})})},[e]),gre(n),n}function Aw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fre(e,n)}catch{return!0}}function xre(e,t){return t()}var yre=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?xre:vre;h5.useSyncExternalStore=Pd.useSyncExternalStore!==void 0?Pd.useSyncExternalStore:yre;f5.exports=h5;var bre=f5.exports;function wre(){return bre.useSyncExternalStore(jre,()=>!0,()=>!1)}function jre(){return()=>{}}var MN="Avatar",[_re,B3e]=wr(MN),[kre,m5]=_re(MN),p5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,s]=p.useState("idle");return i.jsx(kre,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:s,children:i.jsx(Ye.span,{...r,ref:t})})});p5.displayName=MN;var g5="AvatarImage",v5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...s}=e,o=m5(g5,n),l=Sre(r,s),c=Hn(u=>{a(u),o.onImageLoadingStatusChange(u)});return Gn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(Ye.img,{...s,ref:t,src:r}):null});v5.displayName=g5;var x5="AvatarFallback",y5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,s=m5(x5,n),[o,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?i.jsx(Ye.span,{...a,ref:t}):null});y5.displayName=x5;function OT(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Sre(e,{referrerPolicy:t,crossOrigin:n}){const r=wre(),a=p.useRef(null),s=r?(a.current||(a.current=new window.Image),a.current):null,[o,l]=p.useState(()=>OT(s,e));return Gn(()=>{l(OT(s,e))},[s,e]),Gn(()=>{const c=d=>()=>{l(d)};if(!s)return;const u=c("loaded"),f=c("error");return s.addEventListener("load",u),s.addEventListener("error",f),t&&(s.referrerPolicy=t),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",u),s.removeEventListener("error",f)}},[s,n,t]),o}var b5=p5,w5=v5,j5=y5;const Vr=p.forwardRef(({className:e,...t},n)=>i.jsx(b5,{ref:n,className:ke("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Vr.displayName=b5.displayName;const Js=p.forwardRef(({className:e,...t},n)=>i.jsx(w5,{ref:n,className:ke("aspect-square h-full w-full",e),...t}));Js.displayName=w5.displayName;const Kr=p.forwardRef(({className:e,...t},n)=>i.jsx(j5,{ref:n,className:ke("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Kr.displayName=j5.displayName;var ob="Dialog",[_5,k5]=wr(ob),[Nre,is]=_5(ob),S5=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,f]=Pa({prop:r,defaultProp:a??!1,onChange:s,caller:ob});return i.jsx(Nre,{scope:t,triggerRef:l,contentRef:c,contentId:rr(),titleId:rr(),descriptionId:rr(),open:u,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(d=>!d),[f]),modal:o,children:n})};S5.displayName=ob;var N5="DialogTrigger",C5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(N5,n),s=St(t,a.triggerRef);return i.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":LN(a.open),...r,ref:s,onClick:Ie(e.onClick,a.onOpenToggle)})});C5.displayName=N5;var DN="DialogPortal",[Cre,A5]=_5(DN,{forceMount:void 0}),E5=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,s=is(DN,t);return i.jsx(Cre,{scope:t,forceMount:n,children:p.Children.map(r,o=>i.jsx(mr,{present:n||s.open,children:i.jsx(sf,{asChild:!0,container:a,children:o})}))})};E5.displayName=DN;var ax="DialogOverlay",P5=p.forwardRef((e,t)=>{const n=A5(ax,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=is(ax,e.__scopeDialog);return s.modal?i.jsx(mr,{present:r||s.open,children:i.jsx(Ere,{...a,ref:t})}):null});P5.displayName=ax;var Are=vl("DialogOverlay.RemoveScroll"),Ere=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(ax,n);return i.jsx(wp,{as:Are,allowPinchZoom:!0,shards:[a.contentRef],children:i.jsx(Ye.div,{"data-state":LN(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Pc="DialogContent",T5=p.forwardRef((e,t)=>{const n=A5(Pc,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=is(Pc,e.__scopeDialog);return i.jsx(mr,{present:r||s.open,children:s.modal?i.jsx(Pre,{...a,ref:t}):i.jsx(Tre,{...a,ref:t})})});T5.displayName=Pc;var Pre=p.forwardRef((e,t)=>{const n=is(Pc,e.__scopeDialog),r=p.useRef(null),a=St(t,n.contentRef,r);return p.useEffect(()=>{const s=r.current;if(s)return nb(s)},[]),i.jsx(O5,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ie(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:Ie(e.onFocusOutside,s=>s.preventDefault())})}),Tre=p.forwardRef((e,t)=>{const n=is(Pc,e.__scopeDialog),r=p.useRef(!1),a=p.useRef(!1);return i.jsx(O5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),O5=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,...o}=e,l=is(Pc,n),c=p.useRef(null),u=St(t,c);return tb(),i.jsxs(i.Fragment,{children:[i.jsx(bp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(Xc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":LN(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Ire,{titleId:l.titleId}),i.jsx(Mre,{contentRef:c,descriptionId:l.descriptionId})]})]})}),$N="DialogTitle",I5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is($N,n);return i.jsx(Ye.h2,{id:a.titleId,...r,ref:t})});I5.displayName=$N;var R5="DialogDescription",M5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(R5,n);return i.jsx(Ye.p,{id:a.descriptionId,...r,ref:t})});M5.displayName=R5;var D5="DialogClose",$5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(D5,n);return i.jsx(Ye.button,{type:"button",...r,ref:t,onClick:Ie(e.onClick,()=>a.onOpenChange(!1))})});$5.displayName=D5;function LN(e){return e?"open":"closed"}var L5="DialogTitleWarning",[Ore,F5]=eV(L5,{contentName:Pc,titleName:$N,docsSlug:"dialog"}),Ire=({titleId:e})=>{const t=F5(L5),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Rre="DialogDescriptionWarning",Mre=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${F5(Rre).contentName}}.`;return p.useEffect(()=>{var s;const a=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},FN=S5,B5=C5,BN=E5,lb=P5,cb=T5,UN=I5,zN=M5,qN=$5;const cn=FN,WN=B5,Dre=BN,U5=p.forwardRef(({className:e,...t},n)=>i.jsx(lb,{ref:n,className:ke("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));U5.displayName=lb.displayName;const nn=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(Dre,{children:[i.jsx(U5,{}),i.jsxs(cb,{ref:r,className:ke("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(qN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(hp,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));nn.displayName=cb.displayName;const rn=({className:e,...t})=>i.jsx("div",{className:ke("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});rn.displayName="DialogHeader";const va=({className:e,...t})=>i.jsx("div",{className:ke("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});va.displayName="DialogFooter";const an=p.forwardRef(({className:e,...t},n)=>i.jsx(UN,{ref:n,className:ke("text-lg font-semibold leading-none tracking-tight",e),...t}));an.displayName=UN.displayName;const Er=p.forwardRef(({className:e,...t},n)=>i.jsx(zN,{ref:n,className:ke("text-sm text-muted-foreground",e),...t}));Er.displayName=zN.displayName;function $re({open:e,onClose:t,isMasterAgent:n,pausedByName:r,pausedAt:a,onOpenAdminPanel:s}){const o=a?new Date(a).toLocaleString():null;return i.jsx(cn,{open:e,onOpenChange:l=>{l||t()},children:i.jsxs(nn,{className:"max-w-lg",children:[i.jsxs(rn,{children:[i.jsx(an,{children:"AI Replies Are Currently Paused"}),i.jsx(Er,{children:n?i.jsxs("span",{children:["AI responses are paused across every channel. Synka will not send AI replies until you resume them in ",i.jsx("strong",{children:"Admin Panel  AI Controls"}),"."]}):i.jsx("span",{children:"A master agent paused all AI responses across every channel. Synka will not send AI replies until this setting is changed. Only a master agent can resume AI replies."})})]}),i.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[r?i.jsxs("div",{children:["Paused by: ",r]}):null,o?i.jsxs("div",{children:["At: ",o]}):null]}),i.jsxs(va,{className:"gap-2",children:[n?i.jsx(ne,{variant:"ghost",onClick:s,children:"Open Admin Panel"}):null,i.jsx(ne,{onClick:t,children:"Got it"})]})]})})}function s_(e,[t,n]){return Math.min(n,Math.max(t,e))}function Lre(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var HN="ScrollArea",[z5,U3e]=wr(HN),[Fre,_i]=z5(HN),q5=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:s=600,...o}=e,[l,c]=p.useState(null),[u,f]=p.useState(null),[d,h]=p.useState(null),[m,g]=p.useState(null),[v,x]=p.useState(null),[y,b]=p.useState(0),[w,k]=p.useState(0),[j,_]=p.useState(!1),[S,T]=p.useState(!1),N=St(t,D=>c(D)),A=hf(a);return i.jsx(Fre,{scope:n,type:r,dir:A,scrollHideDelay:s,scrollArea:l,viewport:u,onViewportChange:f,content:d,onContentChange:h,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:j,onScrollbarXEnabledChange:_,scrollbarY:v,onScrollbarYChange:x,scrollbarYEnabled:S,onScrollbarYEnabledChange:T,onCornerWidthChange:b,onCornerHeightChange:k,children:i.jsx(Ye.div,{dir:A,...o,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});q5.displayName=HN;var W5="ScrollAreaViewport",H5=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...s}=e,o=_i(W5,n),l=p.useRef(null),c=St(t,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),i.jsx(Ye.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});H5.displayName=W5;var Rs="ScrollAreaScrollbar",VN=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=_i(Rs,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return p.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),a.type==="hover"?i.jsx(Bre,{...r,ref:t,forceMount:n}):a.type==="scroll"?i.jsx(Ure,{...r,ref:t,forceMount:n}):a.type==="auto"?i.jsx(V5,{...r,ref:t,forceMount:n}):a.type==="always"?i.jsx(KN,{...r,ref:t}):null});VN.displayName=Rs;var Bre=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=_i(Rs,e.__scopeScrollArea),[s,o]=p.useState(!1);return p.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},f=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),i.jsx(mr,{present:n||s,children:i.jsx(V5,{"data-state":s?"visible":"hidden",...r,ref:t})})}),Ure=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=_i(Rs,e.__scopeScrollArea),s=e.orientation==="horizontal",o=db(()=>c("SCROLL_END"),100),[l,c]=Lre("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),p.useEffect(()=>{const u=a.viewport,f=s?"scrollLeft":"scrollTop";if(u){let d=u[f];const h=()=>{const m=u[f];d!==m&&(c("SCROLL"),o()),d=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,s,c,o]),i.jsx(mr,{present:n||l!=="hidden",children:i.jsx(KN,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ie(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ie(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),V5=p.forwardRef((e,t)=>{const n=_i(Rs,e.__scopeScrollArea),{forceMount:r,...a}=e,[s,o]=p.useState(!1),l=e.orientation==="horizontal",c=db(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:f)}},10);return Td(n.viewport,c),Td(n.content,c),i.jsx(mr,{present:r||s,children:i.jsx(KN,{"data-state":s?"visible":"hidden",...a,ref:t})})}),KN=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=_i(Rs,e.__scopeScrollArea),s=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=J5(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function d(h,m){return Kre(h,o.current,l,m)}return n==="horizontal"?i.jsx(zre,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollLeft,m=IT(h,l,a.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=d(h,a.dir))}}):n==="vertical"?i.jsx(qre,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollTop,m=IT(h,l);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=d(h))}}):null}),zre=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,s=_i(Rs,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=St(t,c,s.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(G5,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ub(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),Z5(h,d)&&f.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:sx(o.paddingLeft),paddingEnd:sx(o.paddingRight)}})}})}),qre=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,s=_i(Rs,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=St(t,c,s.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(G5,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ub(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),Z5(h,d)&&f.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:sx(o.paddingTop),paddingEnd:sx(o.paddingBottom)}})}})}),[Wre,K5]=z5(Rs),G5=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:d,...h}=e,m=_i(Rs,n),[g,v]=p.useState(null),x=St(t,N=>v(N)),y=p.useRef(null),b=p.useRef(""),w=m.viewport,k=r.content-r.viewport,j=Hn(f),_=Hn(c),S=db(d,10);function T(N){if(y.current){const A=N.clientX-y.current.left,D=N.clientY-y.current.top;u({x:A,y:D})}}return p.useEffect(()=>{const N=A=>{const D=A.target;(g==null?void 0:g.contains(D))&&j(A,k)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[w,g,k,j]),p.useEffect(_,[r,_]),Td(g,S),Td(m.content,S),i.jsx(Wre,{scope:n,scrollbar:g,hasThumb:a,onThumbChange:Hn(s),onThumbPointerUp:Hn(o),onThumbPositionChange:_,onThumbPointerDown:Hn(l),children:i.jsx(Ye.div,{...h,ref:x,style:{position:"absolute",...h.style},onPointerDown:Ie(e.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),y.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),T(N))}),onPointerMove:Ie(e.onPointerMove,T),onPointerUp:Ie(e.onPointerUp,N=>{const A=N.target;A.hasPointerCapture(N.pointerId)&&A.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=b.current,m.viewport&&(m.viewport.style.scrollBehavior=""),y.current=null})})})}),ix="ScrollAreaThumb",Y5=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=K5(ix,e.__scopeScrollArea);return i.jsx(mr,{present:n||a.hasThumb,children:i.jsx(Hre,{ref:t,...r})})}),Hre=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,s=_i(ix,n),o=K5(ix,n),{onThumbPositionChange:l}=o,c=St(t,d=>o.onThumbChange(d)),u=p.useRef(void 0),f=db(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const d=s.viewport;if(d){const h=()=>{if(f(),!u.current){const m=Gre(d,l);u.current=m,l()}};return l(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,f,l]),i.jsx(Ye.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ie(e.onPointerDownCapture,d=>{const m=d.target.getBoundingClientRect(),g=d.clientX-m.left,v=d.clientY-m.top;o.onThumbPointerDown({x:g,y:v})}),onPointerUp:Ie(e.onPointerUp,o.onThumbPointerUp)})});Y5.displayName=ix;var GN="ScrollAreaCorner",X5=p.forwardRef((e,t)=>{const n=_i(GN,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(Vre,{...e,ref:t}):null});X5.displayName=GN;var Vre=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=_i(GN,n),[s,o]=p.useState(0),[l,c]=p.useState(0),u=!!(s&&l);return Td(a.scrollbarX,()=>{var d;const f=((d=a.scrollbarX)==null?void 0:d.offsetHeight)||0;a.onCornerHeightChange(f),c(f)}),Td(a.scrollbarY,()=>{var d;const f=((d=a.scrollbarY)==null?void 0:d.offsetWidth)||0;a.onCornerWidthChange(f),o(f)}),u?i.jsx(Ye.div,{...r,ref:t,style:{width:s,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function sx(e){return e?parseInt(e,10):0}function J5(e,t){const n=e/t;return isNaN(n)?0:n}function ub(e){const t=J5(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Kre(e,t,n,r="ltr"){const a=ub(n),s=a/2,o=t||s,l=a-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,d=r==="ltr"?[0,f]:[f*-1,0];return Q5([c,u],d)(e)}function IT(e,t,n="ltr"){const r=ub(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-a,o=t.content-t.viewport,l=s-r,c=n==="ltr"?[0,o]:[o*-1,0],u=s_(e,c);return Q5([0,o],[0,l])(u)}function Q5(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Z5(e,t){return e>0&&e<t}var Gre=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,l=n.top!==s.top;(o||l)&&t(),n=s,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function db(e,t){const n=Hn(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Td(e,t){const n=Hn(t);Gn(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var eB=q5,Yre=H5,Xre=X5;const fb=p.forwardRef(({className:e,children:t,viewportRef:n,...r},a)=>i.jsxs(eB,{ref:a,className:ke("relative overflow-hidden",e),...r,children:[i.jsx(Yre,{ref:n,className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(tB,{}),i.jsx(Xre,{})]}));fb.displayName=eB.displayName;const tB=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(VN,{ref:r,orientation:t,className:ke("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(Y5,{className:"relative flex-1 rounded-full bg-border"})}));tB.displayName=VN.displayName;function Kt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ya(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function aa(e,t){const n=Kt(e);return isNaN(t)?Ya(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function rs(e,t){const n=Kt(e);if(isNaN(t))return Ya(e,NaN);if(!t)return n;const r=n.getDate(),a=Ya(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const s=a.getDate();return r>=s?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}const YN=6048e5,Jre=864e5;let Qre={};function kp(){return Qre}function Ps(e,t){var l,c,u,f;const n=kp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,a=Kt(e),s=a.getDay(),o=(s<r?7:0)+s-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Tc(e){return Ps(e,{weekStartsOn:1})}function nB(e){const t=Kt(e),n=t.getFullYear(),r=Ya(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Tc(r),s=Ya(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=Tc(s);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function wl(e){const t=Kt(e);return t.setHours(0,0,0,0),t}function ox(e){const t=Kt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function ws(e,t){const n=wl(e),r=wl(t),a=+n-ox(n),s=+r-ox(r);return Math.round((a-s)/Jre)}function Zre(e){const t=nB(e),n=Ya(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Tc(n)}function o_(e,t){const n=t*7;return aa(e,n)}function eae(e,t){return rs(e,t*12)}function tae(e){let t;return e.forEach(function(n){const r=Kt(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function nae(e){let t;return e.forEach(n=>{const r=Kt(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function _a(e,t){const n=wl(e),r=wl(t);return+n==+r}function XN(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function rae(e){if(!XN(e)&&typeof e!="number")return!1;const t=Kt(e);return!isNaN(Number(t))}function pm(e,t){const n=Kt(e),r=Kt(t),a=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return a*12+s}function aae(e,t,n){const r=Ps(e,n),a=Ps(t,n),s=+r-ox(r),o=+a-ox(a);return Math.round((s-o)/YN)}function rB(e){const t=Kt(e);return t.setHours(23,59,59,999),t}function JN(e){const t=Kt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Ea(e){const t=Kt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function aB(e){const t=Kt(e),n=Ya(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function QN(e,t){var l,c,u,f;const n=kp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,a=Kt(e),s=a.getDay(),o=(s<r?-7:0)+6-(s-r);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function iB(e){return QN(e,{weekStartsOn:1})}const iae={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},sae=(e,t,n)=>{let r;const a=iae[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Ew(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const oae={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},lae={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},cae={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uae={date:Ew({formats:oae,defaultWidth:"full"}),time:Ew({formats:lae,defaultWidth:"full"}),dateTime:Ew({formats:cae,defaultWidth:"full"})},dae={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fae=(e,t,n,r)=>dae[e];function qf(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const hae={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},mae={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},pae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},gae={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},vae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},yae=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},bae={ordinalNumber:yae,era:qf({values:hae,defaultWidth:"wide"}),quarter:qf({values:mae,defaultWidth:"wide",argumentCallback:e=>e-1}),month:qf({values:pae,defaultWidth:"wide"}),day:qf({values:gae,defaultWidth:"wide"}),dayPeriod:qf({values:vae,defaultWidth:"wide",formattingValues:xae,defaultFormattingWidth:"wide"})};function Wf(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?jae(l,d=>d.test(o)):wae(l,d=>d.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const f=t.slice(o.length);return{value:u,rest:f}}}function wae(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function jae(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function _ae(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const kae=/^(\d+)(th|st|nd|rd)?/i,Sae=/\d+/i,Nae={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Cae={any:[/^b/i,/^(a|c)/i]},Aae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Eae={any:[/1/i,/2/i,/3/i,/4/i]},Pae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Tae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Oae={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Iae={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Rae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Mae={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Dae={ordinalNumber:_ae({matchPattern:kae,parsePattern:Sae,valueCallback:e=>parseInt(e,10)}),era:Wf({matchPatterns:Nae,defaultMatchWidth:"wide",parsePatterns:Cae,defaultParseWidth:"any"}),quarter:Wf({matchPatterns:Aae,defaultMatchWidth:"wide",parsePatterns:Eae,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Wf({matchPatterns:Pae,defaultMatchWidth:"wide",parsePatterns:Tae,defaultParseWidth:"any"}),day:Wf({matchPatterns:Oae,defaultMatchWidth:"wide",parsePatterns:Iae,defaultParseWidth:"any"}),dayPeriod:Wf({matchPatterns:Rae,defaultMatchWidth:"any",parsePatterns:Mae,defaultParseWidth:"any"})},sB={code:"en-US",formatDistance:sae,formatLong:uae,formatRelative:fae,localize:bae,match:Dae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function $ae(e){const t=Kt(e);return ws(t,aB(t))+1}function oB(e){const t=Kt(e),n=+Tc(t)-+Zre(t);return Math.round(n/YN)+1}function lB(e,t){var f,d,h,m;const n=Kt(e),r=n.getFullYear(),a=kp(),s=(t==null?void 0:t.firstWeekContainsDate)??((d=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=Ya(e,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const l=Ps(o,t),c=Ya(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=Ps(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function Lae(e,t){var l,c,u,f;const n=kp(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,a=lB(e,t),s=Ya(e,0);return s.setFullYear(a,0,r),s.setHours(0,0,0,0),Ps(s,t)}function cB(e,t){const n=Kt(e),r=+Ps(n,t)-+Lae(n,t);return Math.round(r/YN)+1}function fn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Do={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return fn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):fn(n+1,2)},d(e,t){return fn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return fn(e.getHours()%12||12,t.length)},H(e,t){return fn(e.getHours(),t.length)},m(e,t){return fn(e.getMinutes(),t.length)},s(e,t){return fn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return fn(a,t.length)}},pu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},RT={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Do.y(e,t)},Y:function(e,t,n,r){const a=lB(e,r),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return fn(o,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):fn(s,t.length)},R:function(e,t){const n=nB(e);return fn(n,t.length)},u:function(e,t){const n=e.getFullYear();return fn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return fn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return fn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Do.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return fn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=cB(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):fn(a,t.length)},I:function(e,t,n){const r=oB(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):fn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Do.d(e,t)},D:function(e,t,n){const r=$ae(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):fn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return fn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return fn(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return fn(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=pu.noon:r===0?a=pu.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=pu.evening:r>=12?a=pu.afternoon:r>=4?a=pu.morning:a=pu.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Do.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Do.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):fn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):fn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Do.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Do.s(e,t)},S:function(e,t){return Do.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return DT(r);case"XXXX":case"XX":return Jl(r);case"XXXXX":case"XXX":default:return Jl(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return DT(r);case"xxxx":case"xx":return Jl(r);case"xxxxx":case"xxx":default:return Jl(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+MT(r,":");case"OOOO":default:return"GMT"+Jl(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+MT(r,":");case"zzzz":default:return"GMT"+Jl(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return fn(r,t.length)},T:function(e,t,n){const r=e.getTime();return fn(r,t.length)}};function MT(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return s===0?n+String(a):n+String(a)+t+fn(s,2)}function DT(e,t){return e%60===0?(e>0?"-":"+")+fn(Math.abs(e)/60,2):Jl(e,t)}function Jl(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=fn(Math.trunc(r/60),2),s=fn(r%60,2);return n+a+t+s}const $T=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},uB=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Fae=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return $T(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",$T(r,t)).replace("{{time}}",uB(a,t))},Bae={p:uB,P:Fae},Uae=/^D+$/,zae=/^Y+$/,qae=["D","DD","YY","YYYY"];function Wae(e){return Uae.test(e)}function Hae(e){return zae.test(e)}function Vae(e,t,n){const r=Kae(e,t,n);if(console.warn(r),qae.includes(e))throw new RangeError(r)}function Kae(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Gae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Yae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Xae=/^'([^]*?)'?$/,Jae=/''/g,Qae=/[a-zA-Z]/;function xo(e,t,n){var f,d,h,m,g,v,x,y;const r=kp(),a=(n==null?void 0:n.locale)??r.locale??sB,s=(n==null?void 0:n.firstWeekContainsDate)??((d=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((v=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((y=(x=r.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??0,l=Kt(e);if(!rae(l))throw new RangeError("Invalid time value");let c=t.match(Yae).map(b=>{const w=b[0];if(w==="p"||w==="P"){const k=Bae[w];return k(b,a.formatLong)}return b}).join("").match(Gae).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const w=b[0];if(w==="'")return{isToken:!1,value:Zae(b)};if(RT[w])return{isToken:!0,value:b};if(w.match(Qae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:b}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(b=>{if(!b.isToken)return b.value;const w=b.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Hae(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Wae(w))&&Vae(w,t,String(e));const k=RT[w[0]];return k(l,w,a.localize,u)}).join("")}function Zae(e){const t=e.match(Xae);return t?t[1].replace(Jae,"'"):e}function eie(e){const t=Kt(e),n=t.getFullYear(),r=t.getMonth(),a=Ya(e,0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function tie(e){return Math.trunc(+Kt(e)/1e3)}function nie(e){const t=Kt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function rie(e,t){return aae(nie(e),Ea(e),t)+1}function l_(e,t){const n=Kt(e),r=Kt(t);return n.getTime()>r.getTime()}function dB(e,t){const n=Kt(e),r=Kt(t);return+n<+r}function ZN(e,t){const n=Kt(e),r=Kt(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function aie(e,t){const n=Kt(e),r=Kt(t);return n.getFullYear()===r.getFullYear()}function Pw(e,t){return aa(e,-t)}function Tw(e,t){const n=Kt(e),r=n.getFullYear(),a=n.getDate(),s=Ya(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const o=eie(s);return n.setMonth(t,Math.min(a,o)),n}function LT(e,t){const n=Kt(e);return isNaN(+n)?Ya(e,NaN):(n.setFullYear(t),n)}var kt=function(){return kt=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},kt.apply(this,arguments)};function iie(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function fB(e,t,n){for(var r=0,a=t.length,s;r<a;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Sp(e){return e.mode==="multiple"}function Np(e){return e.mode==="range"}function hb(e){return e.mode==="single"}var sie={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function oie(e,t){return xo(e,"LLLL y",t)}function lie(e,t){return xo(e,"d",t)}function cie(e,t){return xo(e,"LLLL",t)}function uie(e){return"".concat(e)}function die(e,t){return xo(e,"cccccc",t)}function fie(e,t){return xo(e,"yyyy",t)}var hie=Object.freeze({__proto__:null,formatCaption:oie,formatDay:lie,formatMonthCaption:cie,formatWeekNumber:uie,formatWeekdayName:die,formatYearCaption:fie}),mie=function(e,t,n){return xo(e,"do MMMM (EEEE)",n)},pie=function(){return"Month: "},gie=function(){return"Go to next month"},vie=function(){return"Go to previous month"},xie=function(e,t){return xo(e,"cccc",t)},yie=function(e){return"Week n. ".concat(e)},bie=function(){return"Year: "},wie=Object.freeze({__proto__:null,labelDay:mie,labelMonthDropdown:pie,labelNext:gie,labelPrevious:vie,labelWeekNumber:yie,labelWeekday:xie,labelYearDropdown:bie});function jie(){var e="buttons",t=sie,n=sB,r={},a={},s=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:hie,labels:wie,locale:n,modifiersClassNames:r,modifiers:a,numberOfMonths:s,styles:o,today:l,mode:"default"}}function _ie(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,a=e.toMonth,s=e.fromDate,o=e.toDate;return r?s=Ea(r):t&&(s=new Date(t,0,1)),a?o=JN(a):n&&(o=new Date(n,11,31)),{fromDate:s?wl(s):void 0,toDate:o?wl(o):void 0}}var hB=p.createContext(void 0);function kie(e){var t,n=e.initialProps,r=jie(),a=_ie(n),s=a.fromDate,o=a.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!s||!o)&&(l="buttons");var c;(hb(n)||Sp(n)||Np(n))&&(c=n.onSelect);var u=kt(kt(kt({},r),n),{captionLayout:l,classNames:kt(kt({},r.classNames),n.classNames),components:kt({},n.components),formatters:kt(kt({},r.formatters),n.formatters),fromDate:s,labels:kt(kt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:kt(kt({},r.modifiers),n.modifiers),modifiersClassNames:kt(kt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:kt(kt({},r.styles),n.styles),toDate:o});return i.jsx(hB.Provider,{value:u,children:e.children})}function _n(){var e=p.useContext(hB);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function mB(e){var t=_n(),n=t.locale,r=t.classNames,a=t.styles,s=t.formatters.formatCaption;return i.jsx("div",{className:r.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function Sie(e){return i.jsx("svg",kt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function pB(e){var t,n,r=e.onChange,a=e.value,s=e.children,o=e.caption,l=e.className,c=e.style,u=_n(),f=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:Sie;return i.jsxs("div",{className:l,style:c,children:[i.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),i.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:r,children:s}),i.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(f,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function Nie(e){var t,n=_n(),r=n.fromDate,a=n.toDate,s=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,f=n.labels.labelMonthDropdown;if(!r)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});var d=[];if(aie(r,a))for(var h=Ea(r),m=r.getMonth();m<=a.getMonth();m++)d.push(Tw(h,m));else for(var h=Ea(new Date),m=0;m<=11;m++)d.push(Tw(h,m));var g=function(x){var y=Number(x.target.value),b=Tw(Ea(e.displayMonth),y);e.onChange(b)},v=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:pB;return i.jsx(v,{name:"months","aria-label":f(),className:c.dropdown_month,style:s.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:d.map(function(x){return i.jsx("option",{value:x.getMonth(),children:l(x,{locale:o})},x.getMonth())})})}function Cie(e){var t,n=e.displayMonth,r=_n(),a=r.fromDate,s=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,f=r.formatters.formatYearCaption,d=r.labels.labelYearDropdown,h=[];if(!a)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});for(var m=a.getFullYear(),g=s.getFullYear(),v=m;v<=g;v++)h.push(LT(aB(new Date),v));var x=function(b){var w=LT(Ea(n),Number(b.target.value));e.onChange(w)},y=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:pB;return i.jsx(y,{name:"years","aria-label":d(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:n.getFullYear(),caption:f(n,{locale:o}),children:h.map(function(b){return i.jsx("option",{value:b.getFullYear(),children:f(b,{locale:o})},b.getFullYear())})})}function Aie(e,t){var n=p.useState(e),r=n[0],a=n[1],s=t===void 0?r:t;return[s,a]}function Eie(e){var t=e.month,n=e.defaultMonth,r=e.today,a=t||n||r||new Date,s=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&pm(s,a)<0){var u=-1*(c-1);a=rs(s,u)}return o&&pm(a,o)<0&&(a=o),Ea(a)}function Pie(){var e=_n(),t=Eie(e),n=Aie(t,e.month),r=n[0],a=n[1],s=function(o){var l;if(!e.disableNavigation){var c=Ea(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,s]}function Tie(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,a=Ea(e),s=Ea(rs(a,r)),o=pm(s,a),l=[],c=0;c<o;c++){var u=rs(a,c);l.push(u)}return n&&(l=l.reverse()),l}function Oie(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=r?s:1,l=Ea(e);if(!n)return rs(l,o);var c=pm(n,e);if(!(c<s))return rs(l,o)}}function Iie(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=r?s:1,l=Ea(e);if(!n)return rs(l,-o);var c=pm(l,n);if(!(c<=0))return rs(l,-o)}}var gB=p.createContext(void 0);function Rie(e){var t=_n(),n=Pie(),r=n[0],a=n[1],s=Tie(r,t),o=Oie(r,t),l=Iie(r,t),c=function(d){return s.some(function(h){return ZN(d,h)})},u=function(d,h){c(d)||(h&&dB(d,h)?a(rs(d,1+t.numberOfMonths*-1)):a(d))},f={currentMonth:r,displayMonths:s,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return i.jsx(gB.Provider,{value:f,children:e.children})}function Cp(){var e=p.useContext(gB);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function FT(e){var t,n=_n(),r=n.classNames,a=n.styles,s=n.components,o=Cp().goToMonth,l=function(f){o(rs(f,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:mB,u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth});return i.jsxs("div",{className:r.caption_dropdowns,style:a.caption_dropdowns,children:[i.jsx("div",{className:r.vhidden,children:u}),i.jsx(Nie,{onChange:l,displayMonth:e.displayMonth}),i.jsx(Cie,{onChange:l,displayMonth:e.displayMonth})]})}function Mie(e){return i.jsx("svg",kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Die(e){return i.jsx("svg",kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var lx=p.forwardRef(function(e,t){var n=_n(),r=n.classNames,a=n.styles,s=[r.button_reset,r.button];e.className&&s.push(e.className);var o=s.join(" "),l=kt(kt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),i.jsx("button",kt({},e,{ref:t,type:"button",className:o,style:l}))});function $ie(e){var t,n,r=_n(),a=r.dir,s=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,f=c.labelNext,d=r.components;if(!e.nextMonth&&!e.previousMonth)return i.jsx(i.Fragment,{});var h=u(e.previousMonth,{locale:s}),m=[o.nav_button,o.nav_button_previous].join(" "),g=f(e.nextMonth,{locale:s}),v=[o.nav_button,o.nav_button_next].join(" "),x=(t=d==null?void 0:d.IconRight)!==null&&t!==void 0?t:Die,y=(n=d==null?void 0:d.IconLeft)!==null&&n!==void 0?n:Mie;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&i.jsx(lx,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?i.jsx(x,{className:o.nav_icon,style:l.nav_icon}):i.jsx(y,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&i.jsx(lx,{name:"next-month","aria-label":g,className:v,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?i.jsx(y,{className:o.nav_icon,style:l.nav_icon}):i.jsx(x,{className:o.nav_icon,style:l.nav_icon})})]})}function BT(e){var t=_n().numberOfMonths,n=Cp(),r=n.previousMonth,a=n.nextMonth,s=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(g){return ZN(e.displayMonth,g)}),c=l===0,u=l===o.length-1,f=t>1&&(c||!u),d=t>1&&(u||!c),h=function(){r&&s(r)},m=function(){a&&s(a)};return i.jsx($ie,{displayMonth:e.displayMonth,hideNext:f,hidePrevious:d,nextMonth:a,previousMonth:r,onPreviousClick:h,onNextClick:m})}function Lie(e){var t,n=_n(),r=n.classNames,a=n.disableNavigation,s=n.styles,o=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:mB,u;return a?u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=i.jsx(FT,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=i.jsxs(i.Fragment,{children:[i.jsx(FT,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),i.jsx(BT,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=i.jsxs(i.Fragment,{children:[i.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(BT,{displayMonth:e.displayMonth,id:e.id})]}),i.jsx("div",{className:r.caption,style:s.caption,children:u})}function Fie(e){var t=_n(),n=t.footer,r=t.styles,a=t.classNames.tfoot;return n?i.jsx("tfoot",{className:a,style:r.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:n})})}):i.jsx(i.Fragment,{})}function Bie(e,t,n){for(var r=n?Tc(new Date):Ps(new Date,{locale:e,weekStartsOn:t}),a=[],s=0;s<7;s++){var o=aa(r,s);a.push(o)}return a}function Uie(){var e=_n(),t=e.classNames,n=e.styles,r=e.showWeekNumber,a=e.locale,s=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=Bie(a,s,o);return i.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&i.jsx("td",{style:n.head_cell,className:t.head_cell}),u.map(function(f,d){return i.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(f,{locale:a}),children:l(f,{locale:a})},d)})]})}function zie(){var e,t=_n(),n=t.classNames,r=t.styles,a=t.components,s=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:Uie;return i.jsx("thead",{style:r.head,className:n.head,children:i.jsx(s,{})})}function qie(e){var t=_n(),n=t.locale,r=t.formatters.formatDay;return i.jsx(i.Fragment,{children:r(e.date,{locale:n})})}var eC=p.createContext(void 0);function Wie(e){if(!Sp(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return i.jsx(eC.Provider,{value:t,children:e.children})}return i.jsx(Hie,{initialProps:e.initialProps,children:e.children})}function Hie(e){var t=e.initialProps,n=e.children,r=t.selected,a=t.min,s=t.max,o=function(u,f,d){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,f,d);var g=!!(f.selected&&a&&(r==null?void 0:r.length)===a);if(!g){var v=!!(!f.selected&&s&&(r==null?void 0:r.length)===s);if(!v){var x=r?fB([],r):[];if(f.selected){var y=x.findIndex(function(b){return _a(u,b)});x.splice(y,1)}else x.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,x,u,f,d)}}},l={disabled:[]};r&&l.disabled.push(function(u){var f=s&&r.length>s-1,d=r.some(function(h){return _a(h,u)});return!!(f&&!d)});var c={selected:r,onDayClick:o,modifiers:l};return i.jsx(eC.Provider,{value:c,children:n})}function tC(){var e=p.useContext(eC);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Vie(e,t){var n=t||{},r=n.from,a=n.to;return r&&a?_a(a,e)&&_a(r,e)?void 0:_a(a,e)?{from:a,to:void 0}:_a(r,e)?void 0:l_(r,e)?{from:e,to:a}:{from:r,to:e}:a?l_(e,a)?{from:a,to:e}:{from:e,to:a}:r?dB(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var nC=p.createContext(void 0);function Kie(e){if(!Np(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(nC.Provider,{value:t,children:e.children})}return i.jsx(Gie,{initialProps:e.initialProps,children:e.children})}function Gie(e){var t=e.initialProps,n=e.children,r=t.selected,a=r||{},s=a.from,o=a.to,l=t.min,c=t.max,u=function(m,g,v){var x,y;(x=t.onDayClick)===null||x===void 0||x.call(t,m,g,v);var b=Vie(m,r);(y=t.onSelect)===null||y===void 0||y.call(t,b,m,g,v)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(f.range_start=[s],o?(f.range_end=[o],_a(s,o)||(f.range_middle=[{after:s,before:o}])):f.range_end=[s]):o&&(f.range_start=[o],f.range_end=[o]),l&&(s&&!o&&f.disabled.push({after:Pw(s,l-1),before:aa(s,l-1)}),s&&o&&f.disabled.push({after:s,before:aa(s,l-1)}),!s&&o&&f.disabled.push({after:Pw(o,l-1),before:aa(o,l-1)})),c){if(s&&!o&&(f.disabled.push({before:aa(s,-c+1)}),f.disabled.push({after:aa(s,c-1)})),s&&o){var d=ws(o,s)+1,h=c-d;f.disabled.push({before:Pw(s,h)}),f.disabled.push({after:aa(o,h)})}!s&&o&&(f.disabled.push({before:aa(o,-c+1)}),f.disabled.push({after:aa(o,c-1)}))}return i.jsx(nC.Provider,{value:{selected:r,onDayClick:u,modifiers:f},children:n})}function rC(){var e=p.useContext(nC);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function gv(e){return Array.isArray(e)?fB([],e):e!==void 0?[e]:[]}function Yie(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],a=n[1];t[r]=gv(a)}),t}var as;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(as||(as={}));var Xie=as.Selected,Ls=as.Disabled,Jie=as.Hidden,Qie=as.Today,Ow=as.RangeEnd,Iw=as.RangeMiddle,Rw=as.RangeStart,Zie=as.Outside;function ese(e,t,n){var r,a=(r={},r[Xie]=gv(e.selected),r[Ls]=gv(e.disabled),r[Jie]=gv(e.hidden),r[Qie]=[e.today],r[Ow]=[],r[Iw]=[],r[Rw]=[],r[Zie]=[],r);return e.fromDate&&a[Ls].push({before:e.fromDate}),e.toDate&&a[Ls].push({after:e.toDate}),Sp(e)?a[Ls]=a[Ls].concat(t.modifiers[Ls]):Np(e)&&(a[Ls]=a[Ls].concat(n.modifiers[Ls]),a[Rw]=n.modifiers[Rw],a[Iw]=n.modifiers[Iw],a[Ow]=n.modifiers[Ow]),a}var vB=p.createContext(void 0);function tse(e){var t=_n(),n=tC(),r=rC(),a=ese(t,n,r),s=Yie(t.modifiers),o=kt(kt({},a),s);return i.jsx(vB.Provider,{value:o,children:e.children})}function xB(){var e=p.useContext(vB);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function nse(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function rse(e){return!!(e&&typeof e=="object"&&"from"in e)}function ase(e){return!!(e&&typeof e=="object"&&"after"in e)}function ise(e){return!!(e&&typeof e=="object"&&"before"in e)}function sse(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function ose(e,t){var n,r=t.from,a=t.to;if(r&&a){var s=ws(a,r)<0;s&&(n=[a,r],r=n[0],a=n[1]);var o=ws(e,r)>=0&&ws(a,e)>=0;return o}return a?_a(a,e):r?_a(r,e):!1}function lse(e){return XN(e)}function cse(e){return Array.isArray(e)&&e.every(XN)}function use(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(lse(n))return _a(e,n);if(cse(n))return n.includes(e);if(rse(n))return ose(e,n);if(sse(n))return n.dayOfWeek.includes(e.getDay());if(nse(n)){var r=ws(n.before,e),a=ws(n.after,e),s=r>0,o=a<0,l=l_(n.before,n.after);return l?o&&s:s||o}return ase(n)?ws(e,n.after)>0:ise(n)?ws(n.before,e)>0:typeof n=="function"?n(e):!1})}function aC(e,t,n){var r=Object.keys(t).reduce(function(s,o){var l=t[o];return use(e,l)&&s.push(o),s},[]),a={};return r.forEach(function(s){return a[s]=!0}),n&&!ZN(e,n)&&(a.outside=!0),a}function dse(e,t){for(var n=Ea(e[0]),r=JN(e[e.length-1]),a,s,o=n;o<=r;){var l=aC(o,t),c=!l.disabled&&!l.hidden;if(!c){o=aa(o,1);continue}if(l.selected)return o;l.today&&!s&&(s=o),a||(a=o),o=aa(o,1)}return s||a}var fse=365;function yB(e,t){var n=t.moveBy,r=t.direction,a=t.context,s=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,f=a.toDate,d=a.locale,h={day:aa,week:o_,month:rs,year:eae,startOfWeek:function(x){return a.ISOWeek?Tc(x):Ps(x,{locale:d,weekStartsOn:c})},endOfWeek:function(x){return a.ISOWeek?iB(x):QN(x,{locale:d,weekStartsOn:c})}},m=h[n](e,r==="after"?1:-1);r==="before"&&u?m=tae([u,m]):r==="after"&&f&&(m=nae([f,m]));var g=!0;if(s){var v=aC(m,s);g=!v.disabled&&!v.hidden}return g?m:l.count>fse?l.lastFocused:yB(m,{moveBy:n,direction:r,context:a,modifiers:s,retry:kt(kt({},l),{count:l.count+1})})}var bB=p.createContext(void 0);function hse(e){var t=Cp(),n=xB(),r=p.useState(),a=r[0],s=r[1],o=p.useState(),l=o[0],c=o[1],u=dse(t.displayMonths,n),f=a??(l&&t.isDateDisplayed(l))?l:u,d=function(){c(a),s(void 0)},h=function(x){s(x)},m=_n(),g=function(x,y){if(a){var b=yB(a,{moveBy:x,direction:y,context:m,modifiers:n});_a(a,b)||(t.goToDate(b,a),h(b))}},v={focusedDay:a,focusTarget:f,blur:d,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return i.jsx(bB.Provider,{value:v,children:e.children})}function iC(){var e=p.useContext(bB);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function mse(e,t){var n=xB(),r=aC(e,n,t);return r}var sC=p.createContext(void 0);function pse(e){if(!hb(e.initialProps)){var t={selected:void 0};return i.jsx(sC.Provider,{value:t,children:e.children})}return i.jsx(gse,{initialProps:e.initialProps,children:e.children})}function gse(e){var t=e.initialProps,n=e.children,r=function(s,o,l){var c,u,f;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,s,o,l);return}(f=t.onSelect)===null||f===void 0||f.call(t,s,s,o,l)},a={selected:t.selected,onDayClick:r};return i.jsx(sC.Provider,{value:a,children:n})}function wB(){var e=p.useContext(sC);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function vse(e,t){var n=_n(),r=wB(),a=tC(),s=rC(),o=iC(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,f=o.focusWeekBefore,d=o.blur,h=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,v=o.focusYearBefore,x=o.focusYearAfter,y=o.focusStartOfWeek,b=o.focusEndOfWeek,w=function(L){var O,F,C,z;hb(n)?(O=r.onDayClick)===null||O===void 0||O.call(r,e,t,L):Sp(n)?(F=a.onDayClick)===null||F===void 0||F.call(a,e,t,L):Np(n)?(C=s.onDayClick)===null||C===void 0||C.call(s,e,t,L):(z=n.onDayClick)===null||z===void 0||z.call(n,e,t,L)},k=function(L){var O;h(e),(O=n.onDayFocus)===null||O===void 0||O.call(n,e,t,L)},j=function(L){var O;d(),(O=n.onDayBlur)===null||O===void 0||O.call(n,e,t,L)},_=function(L){var O;(O=n.onDayMouseEnter)===null||O===void 0||O.call(n,e,t,L)},S=function(L){var O;(O=n.onDayMouseLeave)===null||O===void 0||O.call(n,e,t,L)},T=function(L){var O;(O=n.onDayPointerEnter)===null||O===void 0||O.call(n,e,t,L)},N=function(L){var O;(O=n.onDayPointerLeave)===null||O===void 0||O.call(n,e,t,L)},A=function(L){var O;(O=n.onDayTouchCancel)===null||O===void 0||O.call(n,e,t,L)},D=function(L){var O;(O=n.onDayTouchEnd)===null||O===void 0||O.call(n,e,t,L)},B=function(L){var O;(O=n.onDayTouchMove)===null||O===void 0||O.call(n,e,t,L)},E=function(L){var O;(O=n.onDayTouchStart)===null||O===void 0||O.call(n,e,t,L)},R=function(L){var O;(O=n.onDayKeyUp)===null||O===void 0||O.call(n,e,t,L)},P=function(L){var O;switch(L.key){case"ArrowLeft":L.preventDefault(),L.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":L.preventDefault(),L.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":L.preventDefault(),L.stopPropagation(),u();break;case"ArrowUp":L.preventDefault(),L.stopPropagation(),f();break;case"PageUp":L.preventDefault(),L.stopPropagation(),L.shiftKey?v():m();break;case"PageDown":L.preventDefault(),L.stopPropagation(),L.shiftKey?x():g();break;case"Home":L.preventDefault(),L.stopPropagation(),y();break;case"End":L.preventDefault(),L.stopPropagation(),b();break}(O=n.onDayKeyDown)===null||O===void 0||O.call(n,e,t,L)},U={onClick:w,onFocus:k,onBlur:j,onKeyDown:P,onKeyUp:R,onMouseEnter:_,onMouseLeave:S,onPointerEnter:T,onPointerLeave:N,onTouchCancel:A,onTouchEnd:D,onTouchMove:B,onTouchStart:E};return U}function xse(){var e=_n(),t=wB(),n=tC(),r=rC(),a=hb(e)?t.selected:Sp(e)?n.selected:Np(e)?r.selected:void 0;return a}function yse(e){return Object.values(as).includes(e)}function bse(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var a=e.modifiersClassNames[r];if(a)n.push(a);else if(yse(r)){var s=e.classNames["day_".concat(r)];s&&n.push(s)}}),n}function wse(e,t){var n=kt({},e.styles.day);return Object.keys(t).forEach(function(r){var a;n=kt(kt({},n),(a=e.modifiersStyles)===null||a===void 0?void 0:a[r])}),n}function jse(e,t,n){var r,a,s,o=_n(),l=iC(),c=mse(e,t),u=vse(e,c),f=xse(),d=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var _;c.outside||l.focusedDay&&d&&_a(l.focusedDay,e)&&((_=n.current)===null||_===void 0||_.focus())},[l.focusedDay,e,n,d,c.outside]);var h=bse(o,c).join(" "),m=wse(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),v=(s=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&s!==void 0?s:qie,x=i.jsx(v,{date:e,displayMonth:t,activeModifiers:c}),y={style:m,className:h,children:x,role:"gridcell"},b=l.focusTarget&&_a(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&_a(l.focusedDay,e),k=kt(kt(kt({},y),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=w||b?0:-1,r)),u),j={isButton:d,isHidden:g,activeModifiers:c,selectedDays:f,buttonProps:k,divProps:y};return j}function _se(e){var t=p.useRef(null),n=jse(e.date,e.displayMonth,t);return n.isHidden?i.jsx("div",{role:"gridcell"}):n.isButton?i.jsx(lx,kt({name:"day",ref:t},n.buttonProps)):i.jsx("div",kt({},n.divProps))}function kse(e){var t=e.number,n=e.dates,r=_n(),a=r.onWeekNumberClick,s=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,f=u(Number(t),{locale:l});if(!a)return i.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:f});var d=c(Number(t),{locale:l}),h=function(m){a(t,n,m)};return i.jsx(lx,{name:"week-number","aria-label":d,className:o.weeknumber,style:s.weeknumber,onClick:h,children:f})}function Sse(e){var t,n,r=_n(),a=r.styles,s=r.classNames,o=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:_se,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:kse,f;return o&&(f=i.jsx("td",{className:s.cell,style:a.cell,children:i.jsx(u,{number:e.weekNumber,dates:e.dates})})),i.jsxs("tr",{className:s.row,style:a.row,children:[f,e.dates.map(function(d){return i.jsx("td",{className:s.cell,style:a.cell,role:"presentation",children:i.jsx(c,{displayMonth:e.displayMonth,date:d})},tie(d))})]})}function UT(e,t,n){for(var r=n!=null&&n.ISOWeek?iB(t):QN(t,n),a=n!=null&&n.ISOWeek?Tc(e):Ps(e,n),s=ws(r,a),o=[],l=0;l<=s;l++)o.push(aa(a,l));var c=o.reduce(function(u,f){var d=n!=null&&n.ISOWeek?oB(f):cB(f,n),h=u.find(function(m){return m.weekNumber===d});return h?(h.dates.push(f),u):(u.push({weekNumber:d,dates:[f]}),u)},[]);return c}function Nse(e,t){var n=UT(Ea(e),JN(e),t);if(t!=null&&t.useFixedWeeks){var r=rie(e,t);if(r<6){var a=n[n.length-1],s=a.dates[a.dates.length-1],o=o_(s,6-r),l=UT(o_(s,1),o,t);n.push.apply(n,l)}}return n}function Cse(e){var t,n,r,a=_n(),s=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,f=a.components,d=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,g=Nse(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:s,weekStartsOn:d,firstWeekContainsDate:h}),v=(t=f==null?void 0:f.Head)!==null&&t!==void 0?t:zie,x=(n=f==null?void 0:f.Row)!==null&&n!==void 0?n:Sse,y=(r=f==null?void 0:f.Footer)!==null&&r!==void 0?r:Fie;return i.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&i.jsx(v,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(b){return i.jsx(x,{displayMonth:e.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),i.jsx(y,{displayMonth:e.displayMonth})]})}function Ase(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Ese=Ase()?p.useLayoutEffect:p.useEffect,Mw=!1,Pse=0;function zT(){return"react-day-picker-".concat(++Pse)}function Tse(e){var t,n=e??(Mw?zT():null),r=p.useState(n),a=r[0],s=r[1];return Ese(function(){a===null&&s(zT())},[]),p.useEffect(function(){Mw===!1&&(Mw=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function Ose(e){var t,n,r=_n(),a=r.dir,s=r.classNames,o=r.styles,l=r.components,c=Cp().displayMonths,u=Tse(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,d=[s.month],h=o.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,v=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(d.push(s.caption_start),h=kt(kt({},h),o.caption_start)),g&&(d.push(s.caption_end),h=kt(kt({},h),o.caption_end)),v&&(d.push(s.caption_between),h=kt(kt({},h),o.caption_between));var x=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:Lie;return i.jsxs("div",{className:d.join(" "),style:h,children:[i.jsx(x,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(Cse,{id:f,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function Ise(e){var t=_n(),n=t.classNames,r=t.styles;return i.jsx("div",{className:n.months,style:r.months,children:e.children})}function Rse(e){var t,n,r=e.initialProps,a=_n(),s=iC(),o=Cp(),l=p.useState(!1),c=l[0],u=l[1];p.useEffect(function(){a.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[a.initialFocus,c,s.focus,s.focusTarget,s]);var f=[a.classNames.root,a.className];a.numberOfMonths>1&&f.push(a.classNames.multiple_months),a.showWeekNumber&&f.push(a.classNames.with_weeknumber);var d=kt(kt({},a.styles.root),a.style),h=Object.keys(r).filter(function(g){return g.startsWith("data-")}).reduce(function(g,v){var x;return kt(kt({},g),(x={},x[v]=r[v],x))},{}),m=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:Ise;return i.jsx("div",kt({className:f.join(" "),style:d,dir:a.dir,id:a.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:i.jsx(m,{children:o.displayMonths.map(function(g,v){return i.jsx(Ose,{displayIndex:v,displayMonth:g},v)})})}))}function Mse(e){var t=e.children,n=iie(e,["children"]);return i.jsx(kie,{initialProps:n,children:i.jsx(Rie,{children:i.jsx(pse,{initialProps:n,children:i.jsx(Wie,{initialProps:n,children:i.jsx(Kie,{initialProps:n,children:i.jsx(tse,{children:i.jsx(hse,{children:t})})})})})})})}function Dse(e){return i.jsx(Mse,kt({},e,{children:i.jsx(Rse,{initialProps:e})}))}function gm({className:e,classNames:t,showOutsideDays:n=!0,...r}){return i.jsx(Dse,{showOutsideDays:n,className:ke("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ke(Ad({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ke(Ad({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>i.jsx(ZS,{className:"h-4 w-4"}),IconRight:({...a})=>i.jsx(fp,{className:"h-4 w-4"})},...r})}gm.displayName="Calendar";var mb="Popover",[jB,z3e]=wr(mb,[Al]),Ap=Al(),[$se,Ol]=jB(mb),_B=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:s,modal:o=!1}=e,l=Ap(t),c=p.useRef(null),[u,f]=p.useState(!1),[d,h]=Pa({prop:r,defaultProp:a??!1,onChange:s,caller:mb});return i.jsx(Dy,{...l,children:i.jsx($se,{scope:t,contentId:rr(),triggerRef:c,open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>f(!0),[]),onCustomAnchorRemove:p.useCallback(()=>f(!1),[]),modal:o,children:n})})};_B.displayName=mb;var kB="PopoverAnchor",Lse=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Ol(kB,n),s=Ap(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return p.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(pp,{...s,...r,ref:t})});Lse.displayName=kB;var SB="PopoverTrigger",NB=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Ol(SB,n),s=Ap(n),o=St(t,a.triggerRef),l=i.jsx(Ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":TB(a.open),...r,ref:o,onClick:Ie(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:i.jsx(pp,{asChild:!0,...s,children:l})});NB.displayName=SB;var oC="PopoverPortal",[Fse,Bse]=jB(oC,{forceMount:void 0}),CB=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,s=Ol(oC,t);return i.jsx(Fse,{scope:t,forceMount:n,children:i.jsx(mr,{present:n||s.open,children:i.jsx(sf,{asChild:!0,container:a,children:r})})})};CB.displayName=oC;var Od="PopoverContent",AB=p.forwardRef((e,t)=>{const n=Bse(Od,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,s=Ol(Od,e.__scopePopover);return i.jsx(mr,{present:r||s.open,children:s.modal?i.jsx(zse,{...a,ref:t}):i.jsx(qse,{...a,ref:t})})});AB.displayName=Od;var Use=vl("PopoverContent.RemoveScroll"),zse=p.forwardRef((e,t)=>{const n=Ol(Od,e.__scopePopover),r=p.useRef(null),a=St(t,r),s=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return nb(o)},[]),i.jsx(wp,{as:Use,allowPinchZoom:!0,children:i.jsx(EB,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),s.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ie(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Ie(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),qse=p.forwardRef((e,t)=>{const n=Ol(Od,e.__scopePopover),r=p.useRef(!1),a=p.useRef(!1);return i.jsx(EB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),EB=p.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:f,...d}=e,h=Ol(Od,n),m=Ap(n);return tb(),i.jsx(bp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(Xc,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:i.jsx($y,{"data-state":TB(h.open),role:"dialog",id:h.contentId,...m,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),PB="PopoverClose",Wse=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Ol(PB,n);return i.jsx(Ye.button,{type:"button",...r,ref:t,onClick:Ie(e.onClick,()=>a.onOpenChange(!1))})});Wse.displayName=PB;var Hse="PopoverArrow",Vse=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Ap(n);return i.jsx(Ly,{...a,...r,ref:t})});Vse.displayName=Hse;function TB(e){return e?"open":"closed"}var Kse=_B,Gse=NB,Yse=CB,OB=AB;const hi=Kse,mi=Gse,Wa=p.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},a)=>i.jsx(Yse,{children:i.jsx(OB,{ref:a,align:t,sideOffset:n,className:ke("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Wa.displayName=OB.displayName;function lC(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Xse=[" ","Enter","ArrowUp","ArrowDown"],Jse=[" ","Enter"],Oc="Select",[pb,gb,Qse]=lp(Oc),[mf,q3e]=wr(Oc,[Qse,Al]),vb=Al(),[Zse,Il]=mf(Oc),[eoe,toe]=mf(Oc),IB=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:d,disabled:h,required:m,form:g}=e,v=vb(t),[x,y]=p.useState(null),[b,w]=p.useState(null),[k,j]=p.useState(!1),_=hf(u),[S,T]=Pa({prop:r,defaultProp:a??!1,onChange:s,caller:Oc}),[N,A]=Pa({prop:o,defaultProp:l,onChange:c,caller:Oc}),D=p.useRef(null),B=x?g||!!x.closest("form"):!0,[E,R]=p.useState(new Set),P=Array.from(E).map(U=>U.props.value).join(";");return i.jsx(Dy,{...v,children:i.jsxs(Zse,{required:m,scope:t,trigger:x,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:k,onValueNodeHasChildrenChange:j,contentId:rr(),value:N,onValueChange:A,open:S,onOpenChange:T,dir:_,triggerPointerDownPosRef:D,disabled:h,children:[i.jsx(pb.Provider,{scope:t,children:i.jsx(eoe,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(U=>{R(L=>new Set(L).add(U))},[]),onNativeOptionRemove:p.useCallback(U=>{R(L=>{const O=new Set(L);return O.delete(U),O})},[]),children:n})}),B?i.jsxs(rU,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:d,value:N,onChange:U=>A(U.target.value),disabled:h,form:g,children:[N===void 0?i.jsx("option",{value:""}):null,Array.from(E)]},P):null]})})};IB.displayName=Oc;var RB="SelectTrigger",MB=p.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,s=vb(n),o=Il(RB,n),l=o.disabled||r,c=St(t,o.onTriggerChange),u=gb(n),f=p.useRef("touch"),[d,h,m]=iU(v=>{const x=u().filter(w=>!w.disabled),y=x.find(w=>w.value===o.value),b=sU(x,v,y);b!==void 0&&o.onValueChange(b.value)}),g=v=>{l||(o.onOpenChange(!0),m()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return i.jsx(pp,{asChild:!0,...s,children:i.jsx(Ye.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":aU(o.value)?"":void 0,...a,ref:c,onClick:Ie(a.onClick,v=>{v.currentTarget.focus(),f.current!=="mouse"&&g(v)}),onPointerDown:Ie(a.onPointerDown,v=>{f.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:Ie(a.onKeyDown,v=>{const x=d.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(x&&v.key===" ")&&Xse.includes(v.key)&&(g(),v.preventDefault())})})})});MB.displayName=RB;var DB="SelectValue",$B=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:s,placeholder:o="",...l}=e,c=Il(DB,n),{onValueNodeHasChildrenChange:u}=c,f=s!==void 0,d=St(t,c.onValueNodeChange);return Gn(()=>{u(f)},[u,f]),i.jsx(Ye.span,{...l,ref:d,style:{pointerEvents:"none"},children:aU(c.value)?i.jsx(i.Fragment,{children:o}):s})});$B.displayName=DB;var noe="SelectIcon",LB=p.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return i.jsx(Ye.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});LB.displayName=noe;var roe="SelectPortal",FB=e=>i.jsx(sf,{asChild:!0,...e});FB.displayName=roe;var Ic="SelectContent",BB=p.forwardRef((e,t)=>{const n=Il(Ic,e.__scopeSelect),[r,a]=p.useState();if(Gn(()=>{a(new DocumentFragment)},[]),!n.open){const s=r;return s?Gc.createPortal(i.jsx(UB,{scope:e.__scopeSelect,children:i.jsx(pb.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),s):null}return i.jsx(zB,{...e,ref:t})});BB.displayName=Ic;var Di=10,[UB,Rl]=mf(Ic),aoe="SelectContentImpl",ioe=vl("SelectContent.RemoveScroll"),zB=p.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x,...y}=e,b=Il(Ic,n),[w,k]=p.useState(null),[j,_]=p.useState(null),S=St(t,W=>k(W)),[T,N]=p.useState(null),[A,D]=p.useState(null),B=gb(n),[E,R]=p.useState(!1),P=p.useRef(!1);p.useEffect(()=>{if(w)return nb(w)},[w]),tb();const U=p.useCallback(W=>{const[ae,...G]=B().map(Q=>Q.ref.current),[le]=G.slice(-1),se=document.activeElement;for(const Q of W)if(Q===se||(Q==null||Q.scrollIntoView({block:"nearest"}),Q===ae&&j&&(j.scrollTop=0),Q===le&&j&&(j.scrollTop=j.scrollHeight),Q==null||Q.focus(),document.activeElement!==se))return},[B,j]),L=p.useCallback(()=>U([T,w]),[U,T,w]);p.useEffect(()=>{E&&L()},[E,L]);const{onOpenChange:O,triggerPointerDownPosRef:F}=b;p.useEffect(()=>{if(w){let W={x:0,y:0};const ae=le=>{var se,Q;W={x:Math.abs(Math.round(le.pageX)-(((se=F.current)==null?void 0:se.x)??0)),y:Math.abs(Math.round(le.pageY)-(((Q=F.current)==null?void 0:Q.y)??0))}},G=le=>{W.x<=10&&W.y<=10?le.preventDefault():w.contains(le.target)||O(!1),document.removeEventListener("pointermove",ae),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",ae),document.addEventListener("pointerup",G,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ae),document.removeEventListener("pointerup",G,{capture:!0})}}},[w,O,F]),p.useEffect(()=>{const W=()=>O(!1);return window.addEventListener("blur",W),window.addEventListener("resize",W),()=>{window.removeEventListener("blur",W),window.removeEventListener("resize",W)}},[O]);const[C,z]=iU(W=>{const ae=B().filter(se=>!se.disabled),G=ae.find(se=>se.ref.current===document.activeElement),le=sU(ae,W,G);le&&setTimeout(()=>le.ref.current.focus())}),I=p.useCallback((W,ae,G)=>{const le=!P.current&&!G;(b.value!==void 0&&b.value===ae||le)&&(N(W),le&&(P.current=!0))},[b.value]),$=p.useCallback(()=>w==null?void 0:w.focus(),[w]),K=p.useCallback((W,ae,G)=>{const le=!P.current&&!G;(b.value!==void 0&&b.value===ae||le)&&D(W)},[b.value]),X=r==="popper"?c_:qB,V=X===c_?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x}:{};return i.jsx(UB,{scope:n,content:w,viewport:j,onViewportChange:_,itemRefCallback:I,selectedItem:T,onItemLeave:$,itemTextRefCallback:K,focusSelectedItem:L,selectedItemText:A,position:r,isPositioned:E,searchRef:C,children:i.jsx(wp,{as:ioe,allowPinchZoom:!0,children:i.jsx(bp,{asChild:!0,trapped:b.open,onMountAutoFocus:W=>{W.preventDefault()},onUnmountAutoFocus:Ie(a,W=>{var ae;(ae=b.trigger)==null||ae.focus({preventScroll:!0}),W.preventDefault()}),children:i.jsx(Xc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:W=>W.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:i.jsx(X,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:W=>W.preventDefault(),...y,...V,onPlaced:()=>R(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ie(y.onKeyDown,W=>{const ae=W.ctrlKey||W.altKey||W.metaKey;if(W.key==="Tab"&&W.preventDefault(),!ae&&W.key.length===1&&z(W.key),["ArrowUp","ArrowDown","Home","End"].includes(W.key)){let le=B().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(W.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(W.key)){const se=W.target,Q=le.indexOf(se);le=le.slice(Q+1)}setTimeout(()=>U(le)),W.preventDefault()}})})})})})})});zB.displayName=aoe;var soe="SelectItemAlignedPosition",qB=p.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,s=Il(Ic,n),o=Rl(Ic,n),[l,c]=p.useState(null),[u,f]=p.useState(null),d=St(t,S=>f(S)),h=gb(n),m=p.useRef(!1),g=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:y,focusSelectedItem:b}=o,w=p.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&v&&x&&y){const S=s.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),N=s.valueNode.getBoundingClientRect(),A=y.getBoundingClientRect();if(s.dir!=="rtl"){const se=A.left-T.left,Q=N.left-se,_e=S.left-Q,xe=S.width+_e,J=Math.max(xe,T.width),fe=window.innerWidth-Di,Ce=s_(Q,[Di,Math.max(Di,fe-J)]);l.style.minWidth=xe+"px",l.style.left=Ce+"px"}else{const se=T.right-A.right,Q=window.innerWidth-N.right-se,_e=window.innerWidth-S.right-Q,xe=S.width+_e,J=Math.max(xe,T.width),fe=window.innerWidth-Di,Ce=s_(Q,[Di,Math.max(Di,fe-J)]);l.style.minWidth=xe+"px",l.style.right=Ce+"px"}const D=h(),B=window.innerHeight-Di*2,E=v.scrollHeight,R=window.getComputedStyle(u),P=parseInt(R.borderTopWidth,10),U=parseInt(R.paddingTop,10),L=parseInt(R.borderBottomWidth,10),O=parseInt(R.paddingBottom,10),F=P+U+E+O+L,C=Math.min(x.offsetHeight*5,F),z=window.getComputedStyle(v),I=parseInt(z.paddingTop,10),$=parseInt(z.paddingBottom,10),K=S.top+S.height/2-Di,X=B-K,V=x.offsetHeight/2,W=x.offsetTop+V,ae=P+U+W,G=F-ae;if(ae<=K){const se=D.length>0&&x===D[D.length-1].ref.current;l.style.bottom="0px";const Q=u.clientHeight-v.offsetTop-v.offsetHeight,_e=Math.max(X,V+(se?$:0)+Q+L),xe=ae+_e;l.style.height=xe+"px"}else{const se=D.length>0&&x===D[0].ref.current;l.style.top="0px";const _e=Math.max(K,P+v.offsetTop+(se?I:0)+V)+G;l.style.height=_e+"px",v.scrollTop=ae-K+v.offsetTop}l.style.margin=`${Di}px 0`,l.style.minHeight=C+"px",l.style.maxHeight=B+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,l,u,v,x,y,s.dir,r]);Gn(()=>w(),[w]);const[k,j]=p.useState();Gn(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const _=p.useCallback(S=>{S&&g.current===!0&&(w(),b==null||b(),g.current=!1)},[w,b]);return i.jsx(loe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:_,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:i.jsx(Ye.div,{...a,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});qB.displayName=soe;var ooe="SelectPopperPosition",c_=p.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Di,...s}=e,o=vb(n);return i.jsx($y,{...o,...s,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});c_.displayName=ooe;var[loe,cC]=mf(Ic,{}),u_="SelectViewport",WB=p.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,s=Rl(u_,n),o=cC(u_,n),l=St(t,s.onViewportChange),c=p.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(pb.Slot,{scope:n,children:i.jsx(Ye.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ie(a.onScroll,u=>{const f=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){const m=Math.abs(c.current-f.scrollTop);if(m>0){const g=window.innerHeight-Di*2,v=parseFloat(d.style.minHeight),x=parseFloat(d.style.height),y=Math.max(v,x);if(y<g){const b=y+m,w=Math.min(g,b),k=b-w;d.style.height=w+"px",d.style.bottom==="0px"&&(f.scrollTop=k>0?k:0,d.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});WB.displayName=u_;var HB="SelectGroup",[coe,uoe]=mf(HB),doe=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=rr();return i.jsx(coe,{scope:n,id:a,children:i.jsx(Ye.div,{role:"group","aria-labelledby":a,...r,ref:t})})});doe.displayName=HB;var VB="SelectLabel",KB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=uoe(VB,n);return i.jsx(Ye.div,{id:a.id,...r,ref:t})});KB.displayName=VB;var cx="SelectItem",[foe,GB]=mf(cx),YB=p.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:s,...o}=e,l=Il(cx,n),c=Rl(cx,n),u=l.value===r,[f,d]=p.useState(s??""),[h,m]=p.useState(!1),g=St(t,b=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,b,r,a)}),v=rr(),x=p.useRef("touch"),y=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(foe,{scope:n,value:r,disabled:a,textId:v,isSelected:u,onItemTextChange:p.useCallback(b=>{d(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:i.jsx(pb.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:i.jsx(Ye.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:Ie(o.onFocus,()=>m(!0)),onBlur:Ie(o.onBlur,()=>m(!1)),onClick:Ie(o.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:Ie(o.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:Ie(o.onPointerDown,b=>{x.current=b.pointerType}),onPointerMove:Ie(o.onPointerMove,b=>{var w;x.current=b.pointerType,a?(w=c.onItemLeave)==null||w.call(c):x.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ie(o.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Ie(o.onKeyDown,b=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&b.key===" "||(Jse.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});YB.displayName=cx;var hh="SelectItemText",XB=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...s}=e,o=Il(hh,n),l=Rl(hh,n),c=GB(hh,n),u=toe(hh,n),[f,d]=p.useState(null),h=St(t,y=>d(y),c.onItemTextChange,y=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,y,c.value,c.disabled)}),m=f==null?void 0:f.textContent,g=p.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=u;return Gn(()=>(v(g),()=>x(g)),[v,x,g]),i.jsxs(i.Fragment,{children:[i.jsx(Ye.span,{id:c.textId,...s,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Gc.createPortal(s.children,o.valueNode):null]})});XB.displayName=hh;var JB="SelectItemIndicator",QB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return GB(JB,n).isSelected?i.jsx(Ye.span,{"aria-hidden":!0,...r,ref:t}):null});QB.displayName=JB;var d_="SelectScrollUpButton",ZB=p.forwardRef((e,t)=>{const n=Rl(d_,e.__scopeSelect),r=cC(d_,e.__scopeSelect),[a,s]=p.useState(!1),o=St(t,r.onScrollButtonChange);return Gn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?i.jsx(tU,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});ZB.displayName=d_;var f_="SelectScrollDownButton",eU=p.forwardRef((e,t)=>{const n=Rl(f_,e.__scopeSelect),r=cC(f_,e.__scopeSelect),[a,s]=p.useState(!1),o=St(t,r.onScrollButtonChange);return Gn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;s(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?i.jsx(tU,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});eU.displayName=f_;var tU=p.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,s=Rl("SelectScrollButton",n),o=p.useRef(null),l=gb(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Gn(()=>{var f;const u=l().find(d=>d.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),i.jsx(Ye.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ie(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ie(a.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ie(a.onPointerLeave,()=>{c()})})}),hoe="SelectSeparator",nU=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(Ye.div,{"aria-hidden":!0,...r,ref:t})});nU.displayName=hoe;var h_="SelectArrow",moe=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=vb(n),s=Il(h_,n),o=Rl(h_,n);return s.open&&o.position==="popper"?i.jsx(Ly,{...a,...r,ref:t}):null});moe.displayName=h_;var poe="SelectBubbleInput",rU=p.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=p.useRef(null),s=St(r,a),o=lC(t);return p.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&f){const d=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(d)}},[o,t]),i.jsx(Ye.select,{...n,style:{...jL,...n.style},ref:s,defaultValue:t})});rU.displayName=poe;function aU(e){return e===""||e===void 0}function iU(e){const t=Hn(e),n=p.useRef(""),r=p.useRef(0),a=p.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),s=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,s]}function sU(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let o=goe(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function goe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var voe=IB,oU=MB,xoe=$B,yoe=LB,boe=FB,lU=BB,woe=WB,cU=KB,uU=YB,joe=XB,_oe=QB,dU=ZB,fU=eU,hU=nU;const qt=voe,It=xoe,Lt=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(oU,{ref:r,className:ke("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(yoe,{asChild:!0,children:i.jsx(wa,{className:"h-4 w-4 opacity-50"})})]}));Lt.displayName=oU.displayName;const mU=p.forwardRef(({className:e,...t},n)=>i.jsx(dU,{ref:n,className:ke("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(VL,{className:"h-4 w-4"})}));mU.displayName=dU.displayName;const pU=p.forwardRef(({className:e,...t},n)=>i.jsx(fU,{ref:n,className:ke("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(wa,{className:"h-4 w-4"})}));pU.displayName=fU.displayName;const Ft=p.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>i.jsx(boe,{children:i.jsxs(lU,{ref:a,className:ke("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(mU,{}),i.jsx(woe,{className:ke("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(pU,{})]})}));Ft.displayName=lU.displayName;const koe=p.forwardRef(({className:e,...t},n)=>i.jsx(cU,{ref:n,className:ke("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));koe.displayName=cU.displayName;const Ge=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(uU,{ref:r,className:ke("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(_oe,{children:i.jsx(Ty,{className:"h-4 w-4"})})}),i.jsx(joe,{children:t})]}));Ge.displayName=uU.displayName;const Soe=p.forwardRef(({className:e,...t},n)=>i.jsx(hU,{ref:n,className:ke("-mx-1 my-1 h-px bg-muted",e),...t}));Soe.displayName=hU.displayName;var qT=1,Noe=.9,Coe=.8,Aoe=.17,Dw=.1,$w=.999,Eoe=.9999,Poe=.99,Toe=/[\\\/_+.#"@\[\(\{&]/,Ooe=/[\\\/_+.#"@\[\(\{&]/g,Ioe=/[\s-]/,gU=/[\s-]/g;function m_(e,t,n,r,a,s,o){if(s===t.length)return a===e.length?qT:Poe;var l=`${a},${s}`;if(o[l]!==void 0)return o[l];for(var c=r.charAt(s),u=n.indexOf(c,a),f=0,d,h,m,g;u>=0;)d=m_(e,t,n,r,u+1,s+1,o),d>f&&(u===a?d*=qT:Toe.test(e.charAt(u-1))?(d*=Coe,m=e.slice(a,u-1).match(Ooe),m&&a>0&&(d*=Math.pow($w,m.length))):Ioe.test(e.charAt(u-1))?(d*=Noe,g=e.slice(a,u-1).match(gU),g&&a>0&&(d*=Math.pow($w,g.length))):(d*=Aoe,a>0&&(d*=Math.pow($w,u-a))),e.charAt(u)!==t.charAt(s)&&(d*=Eoe)),(d<Dw&&n.charAt(u-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(u-1)!==r.charAt(s))&&(h=m_(e,t,n,r,u+1,s+2,o),h*Dw>d&&(d=h*Dw)),d>f&&(f=d),u=n.indexOf(c,u+1);return o[l]=f,f}function WT(e){return e.toLowerCase().replace(gU," ")}function Roe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,m_(e,t,WT(e),WT(t),0,0,{})}var Hf='[cmdk-group=""]',Lw='[cmdk-group-items=""]',Moe='[cmdk-group-heading=""]',vU='[cmdk-item=""]',HT=`${vU}:not([aria-disabled="true"])`,p_="cmdk-item-select",Cu="data-value",Doe=(e,t,n)=>Roe(e,t,n),xU=p.createContext(void 0),Ep=()=>p.useContext(xU),yU=p.createContext(void 0),uC=()=>p.useContext(yU),bU=p.createContext(void 0),wU=p.forwardRef((e,t)=>{let n=Au(()=>{var I,$;return{search:"",value:($=(I=e.value)!=null?I:e.defaultValue)!=null?$:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Au(()=>new Set),a=Au(()=>new Map),s=Au(()=>new Map),o=Au(()=>new Set),l=jU(e),{label:c,children:u,value:f,onValueChange:d,filter:h,shouldFilter:m,loop:g,disablePointerSelection:v=!1,vimBindings:x=!0,...y}=e,b=rr(),w=rr(),k=rr(),j=p.useRef(null),_=Koe();Rc(()=>{if(f!==void 0){let I=f.trim();n.current.value=I,S.emit()}},[f]),Rc(()=>{_(6,E)},[]);let S=p.useMemo(()=>({subscribe:I=>(o.current.add(I),()=>o.current.delete(I)),snapshot:()=>n.current,setState:(I,$,K)=>{var X,V,W,ae;if(!Object.is(n.current[I],$)){if(n.current[I]=$,I==="search")B(),A(),_(1,D);else if(I==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let G=document.getElementById(k);G?G.focus():(X=document.getElementById(b))==null||X.focus()}if(_(7,()=>{var G;n.current.selectedItemId=(G=R())==null?void 0:G.id,S.emit()}),K||_(5,E),((V=l.current)==null?void 0:V.value)!==void 0){let G=$??"";(ae=(W=l.current).onValueChange)==null||ae.call(W,G);return}}S.emit()}},emit:()=>{o.current.forEach(I=>I())}}),[]),T=p.useMemo(()=>({value:(I,$,K)=>{var X;$!==((X=s.current.get(I))==null?void 0:X.value)&&(s.current.set(I,{value:$,keywords:K}),n.current.filtered.items.set(I,N($,K)),_(2,()=>{A(),S.emit()}))},item:(I,$)=>(r.current.add(I),$&&(a.current.has($)?a.current.get($).add(I):a.current.set($,new Set([I]))),_(3,()=>{B(),A(),n.current.value||D(),S.emit()}),()=>{s.current.delete(I),r.current.delete(I),n.current.filtered.items.delete(I);let K=R();_(4,()=>{B(),(K==null?void 0:K.getAttribute("id"))===I&&D(),S.emit()})}),group:I=>(a.current.has(I)||a.current.set(I,new Set),()=>{s.current.delete(I),a.current.delete(I)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:b,inputId:k,labelId:w,listInnerRef:j}),[]);function N(I,$){var K,X;let V=(X=(K=l.current)==null?void 0:K.filter)!=null?X:Doe;return I?V(I,n.current.search,$):0}function A(){if(!n.current.search||l.current.shouldFilter===!1)return;let I=n.current.filtered.items,$=[];n.current.filtered.groups.forEach(X=>{let V=a.current.get(X),W=0;V.forEach(ae=>{let G=I.get(ae);W=Math.max(G,W)}),$.push([X,W])});let K=j.current;P().sort((X,V)=>{var W,ae;let G=X.getAttribute("id"),le=V.getAttribute("id");return((W=I.get(le))!=null?W:0)-((ae=I.get(G))!=null?ae:0)}).forEach(X=>{let V=X.closest(Lw);V?V.appendChild(X.parentElement===V?X:X.closest(`${Lw} > *`)):K.appendChild(X.parentElement===K?X:X.closest(`${Lw} > *`))}),$.sort((X,V)=>V[1]-X[1]).forEach(X=>{var V;let W=(V=j.current)==null?void 0:V.querySelector(`${Hf}[${Cu}="${encodeURIComponent(X[0])}"]`);W==null||W.parentElement.appendChild(W)})}function D(){let I=P().find(K=>K.getAttribute("aria-disabled")!=="true"),$=I==null?void 0:I.getAttribute(Cu);S.setState("value",$||void 0)}function B(){var I,$,K,X;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let V=0;for(let W of r.current){let ae=($=(I=s.current.get(W))==null?void 0:I.value)!=null?$:"",G=(X=(K=s.current.get(W))==null?void 0:K.keywords)!=null?X:[],le=N(ae,G);n.current.filtered.items.set(W,le),le>0&&V++}for(let[W,ae]of a.current)for(let G of ae)if(n.current.filtered.items.get(G)>0){n.current.filtered.groups.add(W);break}n.current.filtered.count=V}function E(){var I,$,K;let X=R();X&&(((I=X.parentElement)==null?void 0:I.firstChild)===X&&((K=($=X.closest(Hf))==null?void 0:$.querySelector(Moe))==null||K.scrollIntoView({block:"nearest"})),X.scrollIntoView({block:"nearest"}))}function R(){var I;return(I=j.current)==null?void 0:I.querySelector(`${vU}[aria-selected="true"]`)}function P(){var I;return Array.from(((I=j.current)==null?void 0:I.querySelectorAll(HT))||[])}function U(I){let $=P()[I];$&&S.setState("value",$.getAttribute(Cu))}function L(I){var $;let K=R(),X=P(),V=X.findIndex(ae=>ae===K),W=X[V+I];($=l.current)!=null&&$.loop&&(W=V+I<0?X[X.length-1]:V+I===X.length?X[0]:X[V+I]),W&&S.setState("value",W.getAttribute(Cu))}function O(I){let $=R(),K=$==null?void 0:$.closest(Hf),X;for(;K&&!X;)K=I>0?Hoe(K,Hf):Voe(K,Hf),X=K==null?void 0:K.querySelector(HT);X?S.setState("value",X.getAttribute(Cu)):L(I)}let F=()=>U(P().length-1),C=I=>{I.preventDefault(),I.metaKey?F():I.altKey?O(1):L(1)},z=I=>{I.preventDefault(),I.metaKey?U(0):I.altKey?O(-1):L(-1)};return p.createElement(Ye.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:I=>{var $;($=y.onKeyDown)==null||$.call(y,I);let K=I.nativeEvent.isComposing||I.keyCode===229;if(!(I.defaultPrevented||K))switch(I.key){case"n":case"j":{x&&I.ctrlKey&&C(I);break}case"ArrowDown":{C(I);break}case"p":case"k":{x&&I.ctrlKey&&z(I);break}case"ArrowUp":{z(I);break}case"Home":{I.preventDefault(),U(0);break}case"End":{I.preventDefault(),F();break}case"Enter":{I.preventDefault();let X=R();if(X){let V=new Event(p_);X.dispatchEvent(V)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:T.inputId,id:T.labelId,style:Yoe},c),xb(e,I=>p.createElement(yU.Provider,{value:S},p.createElement(xU.Provider,{value:T},I))))}),$oe=p.forwardRef((e,t)=>{var n,r;let a=rr(),s=p.useRef(null),o=p.useContext(bU),l=Ep(),c=jU(e),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;Rc(()=>{if(!u)return l.item(a,o==null?void 0:o.id)},[u]);let f=_U(a,s,[e.value,e.children,s],e.keywords),d=uC(),h=jl(_=>_.value&&_.value===f.current),m=jl(_=>u||l.filter()===!1?!0:_.search?_.filtered.items.get(a)>0:!0);p.useEffect(()=>{let _=s.current;if(!(!_||e.disabled))return _.addEventListener(p_,g),()=>_.removeEventListener(p_,g)},[m,e.onSelect,e.disabled]);function g(){var _,S;v(),(S=(_=c.current).onSelect)==null||S.call(_,f.current)}function v(){d.setState("value",f.current,!0)}if(!m)return null;let{disabled:x,value:y,onSelect:b,forceMount:w,keywords:k,...j}=e;return p.createElement(Ye.div,{ref:mo(s,t),...j,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!h,"data-disabled":!!x,"data-selected":!!h,onPointerMove:x||l.getDisablePointerSelection()?void 0:v,onClick:x?void 0:g},e.children)}),Loe=p.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...s}=e,o=rr(),l=p.useRef(null),c=p.useRef(null),u=rr(),f=Ep(),d=jl(m=>a||f.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);Rc(()=>f.group(o),[]),_U(o,l,[e.value,e.heading,c]);let h=p.useMemo(()=>({id:o,forceMount:a}),[a]);return p.createElement(Ye.div,{ref:mo(l,t),...s,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&p.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),xb(e,m=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},p.createElement(bU.Provider,{value:h},m))))}),Foe=p.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=p.useRef(null),s=jl(o=>!o.search);return!n&&!s?null:p.createElement(Ye.div,{ref:mo(a,t),...r,"cmdk-separator":"",role:"separator"})}),Boe=p.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,s=uC(),o=jl(u=>u.search),l=jl(u=>u.selectedItemId),c=Ep();return p.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),p.createElement(Ye.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:u=>{a||s.setState("search",u.target.value),n==null||n(u.target.value)}})}),Uoe=p.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,s=p.useRef(null),o=p.useRef(null),l=jl(u=>u.selectedItemId),c=Ep();return p.useEffect(()=>{if(o.current&&s.current){let u=o.current,f=s.current,d,h=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let m=u.offsetHeight;f.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return h.observe(u),()=>{cancelAnimationFrame(d),h.unobserve(u)}}},[]),p.createElement(Ye.div,{ref:mo(s,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:c.listId},xb(e,u=>p.createElement("div",{ref:mo(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),zoe=p.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:s,container:o,...l}=e;return p.createElement(FN,{open:n,onOpenChange:r},p.createElement(BN,{container:o},p.createElement(lb,{"cmdk-overlay":"",className:a}),p.createElement(cb,{"aria-label":e.label,"cmdk-dialog":"",className:s},p.createElement(wU,{ref:t,...l}))))}),qoe=p.forwardRef((e,t)=>jl(n=>n.filtered.count===0)?p.createElement(Ye.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Woe=p.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...s}=e;return p.createElement(Ye.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},xb(e,o=>p.createElement("div",{"aria-hidden":!0},o)))}),Ta=Object.assign(wU,{List:Uoe,Item:$oe,Input:Boe,Group:Loe,Separator:Foe,Dialog:zoe,Empty:qoe,Loading:Woe});function Hoe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Voe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function jU(e){let t=p.useRef(e);return Rc(()=>{t.current=e}),t}var Rc=typeof window>"u"?p.useEffect:p.useLayoutEffect;function Au(e){let t=p.useRef();return t.current===void 0&&(t.current=e()),t}function jl(e){let t=uC(),n=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,n,n)}function _U(e,t,n,r=[]){let a=p.useRef(),s=Ep();return Rc(()=>{var o;let l=(()=>{var u;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(u=f.current.textContent)==null?void 0:u.trim():a.current}})(),c=r.map(u=>u.trim());s.value(e,l,c),(o=t.current)==null||o.setAttribute(Cu,l),a.current=l}),a}var Koe=()=>{let[e,t]=p.useState(),n=Au(()=>new Map);return Rc(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function Goe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function xb({asChild:e,children:t},n){return e&&p.isValidElement(t)?p.cloneElement(Goe(t),{ref:t.ref},n(t.props.children)):n(t)}var Yoe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Mc=p.forwardRef(({className:e,...t},n)=>i.jsx(Ta,{ref:n,className:ke("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Mc.displayName=Ta.displayName;const Dc=p.forwardRef(({className:e,...t},n)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(Ji,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(Ta.Input,{ref:n,className:ke("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Dc.displayName=Ta.Input.displayName;const yb=p.forwardRef(({className:e,...t},n)=>i.jsx(Ta.List,{ref:n,className:ke("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));yb.displayName=Ta.List.displayName;const $c=p.forwardRef((e,t)=>i.jsx(Ta.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));$c.displayName=Ta.Empty.displayName;const Lc=p.forwardRef(({className:e,...t},n)=>i.jsx(Ta.Group,{ref:n,className:ke("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Lc.displayName=Ta.Group.displayName;const Xoe=p.forwardRef(({className:e,...t},n)=>i.jsx(Ta.Separator,{ref:n,className:ke("-mx-1 h-px bg-border",e),...t}));Xoe.displayName=Ta.Separator.displayName;const Fc=p.forwardRef(({className:e,...t},n)=>i.jsx(Ta.Item,{ref:n,className:ke("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));Fc.displayName=Ta.Item.displayName;let Fw=!1,Bw=null;function Id(){return Fw?Promise.resolve():(Bw||(Bw=ie.auth.getSession().then(()=>{Fw=!0}).catch(()=>{Fw=!0})),Bw)}const Ml=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null);let o=!1;const l=w=>{o=w},c=()=>{try{const w=localStorage.getItem("app.cachedAgents");if(!w)return!1;const k=JSON.parse(w);if(Array.isArray(k))return t(k),!0}catch{}return!1},u=w=>{const k=(w==null?void 0:w.filter(j=>j!=null))||[];return k.includes("master_agent")?"master_agent":k.includes("super_agent")?"super_agent":k.includes("agent")?"agent":null},f=6e4;globalThis.__agentsCache||(globalThis.__agentsCache={data:null,ts:0,inFlight:null});const d=globalThis.__agentsCache,h=w=>(w||[]).map(k=>{var S;const j=((S=k.roles)==null?void 0:S.filter(T=>T!=null))||[],_=u(k.roles||[]);return{user_id:k.id,email:k.email,display_name:k.display_name,avatar_url:k.avatar_url,timezone:k.timezone,created_at:k.created_at,roles:j,primaryRole:_,status:"Active",super_agent_id:null}}),m=async()=>(d.inFlight||(d.inFlight=(async()=>{await Id();const{data:w,error:k}=await ie.from("v_users").select("*").order("created_at",{ascending:!1});if(k)throw k;let j=h(w||[]);try{const{data:_}=await ie.from("super_agent_members").select("agent_user_id, super_agent_id");if(_&&Array.isArray(_)){const S={};_.forEach(T=>{S[T.agent_user_id]=T.super_agent_id}),j=j.map(T=>T.primaryRole==="agent"?{...T,super_agent_id:S[T.user_id]||null}:T)}}catch{}d.data=j,d.ts=Date.now(),d.inFlight=null;try{localStorage.setItem("app.cachedAgents",JSON.stringify(j))}catch{}return j})().catch(w=>{throw d.inFlight=null,w})),d.inFlight),g=async()=>d.data&&Date.now()-d.ts<f?d.data:await m(),v=async w=>{try{r(!0),s(null),w!=null&&w.force&&(d.ts=0);const k=await g();t(k)}catch(k){console.error("Error fetching human agents:",k),s("Failed to fetch human agents"),t([])}finally{r(!1)}},x=async w=>{var k,j;try{s(null);const _=w.email.trim().toLowerCase();if(w.role==="agent"&&!w.super_agent_id)throw new Error("Agents must be assigned to a super agent before they can be created.");const{data:S,error:T}=await ie.from("v_human_agents").select("user_id, confirmation_status").ilike("email",_).maybeSingle();if(T)throw T;if(S){const B=(()=>{switch(S.confirmation_status){case"accepted":return"assigned to an active member";case"waiting":return"pending for an existing invite";case"expired":return"associated with an expired invite";default:return"in use"}})();throw new Error(`The email ${_} is already ${B}. Choose a different email or manage the existing user instead.`)}const{data:N,error:A}=await ie.functions.invoke("admin-create-user",{headers:{"x-client-origin":typeof window<"u"?window.location.origin:""},body:{email:_,full_name:w.full_name,role:w.role,super_agent_id:w.super_agent_id??null,org_id:w.org_id??null}});if(A)throw A;try{const B=(N==null?void 0:N.id)||(N==null?void 0:N.user_id)||((k=N==null?void 0:N.user)==null?void 0:k.id)||null;B&&await ie.from("users_profile").update({is_2fa_email_enabled:o}).eq("user_id",B)}catch{}await v({force:!0});try{await $t({action:"user.create",resource:"user",resourceId:(N==null?void 0:N.id)||null,context:w})}catch{}return{id:(N==null?void 0:N.id)||(N==null?void 0:N.user_id)||((j=N==null?void 0:N.user)==null?void 0:j.id)||null}}catch(_){throw console.error("Error creating agent:",_),s(_ instanceof Error?_.message:"Failed to create agent"),_}},y=async(w,k)=>{try{s(null);const{data:j,error:_}=await ie.from("roles").select("id").eq("name",k).single();if(_)throw _;const{error:S}=await ie.from("user_roles").delete().eq("user_id",w);if(S)throw S;const{error:T}=await ie.from("user_roles").insert([{user_id:w,role_id:j.id}]);if(T)throw T;await v({force:!0});try{await $t({action:"user.update_role",resource:"user",resourceId:w,context:{role:k}})}catch{}}catch(j){throw console.error("Error updating agent role:",j),s(j instanceof Error?j.message:"Failed to update agent role"),j}},b=async w=>{try{s(null);const{data:k,error:j}=await ie.from("v_human_agents").select("role_name").eq("user_id",w).maybeSingle();if(j)throw j;if(k!=null&&k.role_name&&String(k.role_name).toLowerCase().includes("master"))throw new Error("Master agent tidak dapat dihapus.");const{error:_}=await ie.functions.invoke("admin-delete-user",{body:{user_id:w}});if(_)throw _;await v({force:!0});try{await $t({action:"user.delete",resource:"user",resourceId:w})}catch{}}catch(k){throw console.error("Error deleting agent:",k),s(k instanceof Error?k.message:"Failed to delete agent"),k}};return p.useEffect(()=>{c()&&r(!1),v()},[]),{agents:e,teams:[],loading:n,error:a,fetchAgents:v,fetchTeams:()=>Promise.resolve(),createAgent:x,updateAgentStatus:()=>Promise.resolve(),updateAgentRole:y,deleteAgent:b,createTeam:()=>Promise.resolve(),addAgentToTeam:()=>Promise.resolve(),removeAgentFromTeam:()=>Promise.resolve(),setEnable2FAFlagForCreate:l}},Joe=({value:e,onFilterChange:t})=>{var j,_,S,T;const[n,r]=p.useState(!1),[a,s]=p.useState(),[o,l]=p.useState(),[c,u]=p.useState(!1),[f,d]=p.useState(!1),[h,m]=p.useState([]),[g,v]=p.useState({dateRange:{},inbox:"",label:[],agent:"",status:"",resolvedBy:"",platformId:"",channelType:"all"}),{agents:x}=Ml();p.useEffect(()=>{e&&(v(N=>({...N,...e,dateRange:e.dateRange??N.dateRange})),e.dateRange&&(s(e.dateRange.from),l(e.dateRange.to)))},[n,e==null?void 0:e.inbox,e==null?void 0:e.agent,e==null?void 0:e.status,e==null?void 0:e.resolvedBy,e==null?void 0:e.platformId,e==null?void 0:e.channelType,(j=e==null?void 0:e.dateRange)!=null&&j.from?e.dateRange.from.getTime():0,(_=e==null?void 0:e.dateRange)!=null&&_.to?e.dateRange.to.getTime():0]),p.useEffect(()=>{let N=!0;return(async()=>{try{const{data:D,error:B}=await wt.from("channels").select("id, display_name, provider, type").order("created_at",{ascending:!1});if(!N)return;if(B)throw B;m(D||[])}catch{if(!N)return;m([])}})(),()=>{N=!1}},[]);const y=(N,A)=>{const D={...g,[N]:A};v(D)},b=N=>{v(A=>({...A,channelType:N,platformId:""}))},w=()=>{const N={...g,dateRange:{from:a,to:o}};t(N),r(!1)},k=()=>{const N={dateRange:{},inbox:"",label:[],agent:"",status:"",resolvedBy:"",platformId:"",channelType:"all"};v(N),s(void 0),l(void 0),t(N)};return i.jsxs(cn,{open:n,onOpenChange:r,children:[i.jsx(WN,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(JL,{className:"h-4 w-4"})})}),i.jsxs(nn,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[i.jsx(rn,{children:i.jsx(an,{children:"Filter"})}),i.jsxs("div",{className:"grid gap-6 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date Range"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(hi,{children:[i.jsx(mi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:ke("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[i.jsx(Cc,{className:"mr-2 h-4 w-4"}),a?xo(a,"dd-MM-yyyy"):"DD-MM-YYYY"]})}),i.jsx(Wa,{className:"w-auto p-0",align:"start",children:i.jsx(gm,{mode:"single",selected:a,onSelect:s,initialFocus:!0,className:"pointer-events-auto"})})]}),i.jsx("span",{className:"self-center text-muted-foreground",children:"-"}),i.jsxs(hi,{children:[i.jsx(mi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:ke("w-full justify-start text-left font-normal",!o&&"text-muted-foreground"),children:[i.jsx(Cc,{className:"mr-2 h-4 w-4"}),o?xo(o,"dd-MM-yyyy"):"DD-MM-YYYY"]})}),i.jsx(Wa,{className:"w-auto p-0",align:"start",children:i.jsx(gm,{mode:"single",selected:o,onSelect:l,initialFocus:!0,className:"pointer-events-auto"})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Inbox"}),i.jsxs(qt,{value:g.inbox,onValueChange:N=>y("inbox",N),children:[i.jsx(Lt,{children:i.jsx(It,{placeholder:"All Inbox"})}),i.jsxs(Ft,{children:[i.jsx(Ge,{value:"all",children:"All Inbox"}),i.jsx(Ge,{value:"whatsapp",children:"WhatsApp"}),i.jsx(Ge,{value:"telegram",children:"Telegram"}),i.jsx(Ge,{value:"email",children:"Email"})]})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Resolved By"}),i.jsxs(hi,{open:f,onOpenChange:d,children:[i.jsx(mi,{asChild:!0,children:i.jsx(ne,{variant:"outline",role:"combobox",className:"w-full justify-between",children:((S=x.find(N=>N.user_id===g.resolvedBy))==null?void 0:S.display_name)||"Choose Agent"})}),i.jsx(Wa,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",sideOffset:4,children:i.jsxs(Mc,{children:[i.jsx(Dc,{placeholder:"Search Resolved By Agent"}),i.jsx($c,{children:"No agent found."}),i.jsx(Lc,{children:x.map(N=>i.jsx(Fc,{onSelect:()=>{y("resolvedBy",N.user_id),d(!1)},children:i.jsx("span",{className:"ml-2",children:N.display_name||"Unknown"})},N.user_id))})]})})]})]})}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Agent"}),i.jsxs(hi,{open:c,onOpenChange:u,children:[i.jsx(mi,{asChild:!0,children:i.jsx(ne,{variant:"outline",role:"combobox",className:"w-full justify-between",children:((T=x.find(N=>N.user_id===g.agent))==null?void 0:T.display_name)||"Choose Agent"})}),i.jsx(Wa,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",sideOffset:4,children:i.jsxs(Mc,{children:[i.jsx(Dc,{placeholder:"Search Handled By Agent"}),i.jsx($c,{children:"No agent found."}),i.jsx(Lc,{children:x.map(N=>i.jsx(Fc,{onSelect:()=>{y("agent",N.user_id),u(!1)},children:i.jsx("span",{className:"ml-2",children:N.display_name||"Unknown"})},N.user_id))})]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Channel Type"}),i.jsxs(qt,{value:g.channelType,onValueChange:b,children:[i.jsx(Lt,{children:i.jsx(It,{placeholder:"All Channels"})}),i.jsxs(Ft,{children:[i.jsx(Ge,{value:"all",children:"All Channels"}),i.jsx(Ge,{value:"whatsapp",children:"WhatsApp"}),i.jsx(Ge,{value:"telegram",children:"Telegram"}),i.jsx(Ge,{value:"web",children:"Live Chat"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Platform"}),i.jsxs(qt,{value:g.platformId,onValueChange:N=>y("platformId",N),disabled:!g.channelType||g.channelType==="all",children:[i.jsx(Lt,{children:i.jsx(It,{placeholder:g.channelType&&g.channelType!=="all"?"Choose Platform":"Select channel type first"})}),i.jsxs(Ft,{children:[i.jsx(Ge,{value:"all",children:"All Platforms"}),(()=>{const N=g.channelType&&g.channelType!=="all"?h.filter(A=>String(A.provider||"").toLowerCase()===String(g.channelType).toLowerCase()):[];return!g.channelType||g.channelType==="all"?null:N.length===0?i.jsx(Ge,{value:"__none",disabled:!0,children:"No platforms found for this channel type"}):N.map(A=>i.jsx(Ge,{value:A.id,children:A.display_name??"Unknown"},A.id))})()]})]})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),i.jsxs(qt,{value:g.status,onValueChange:N=>y("status",N),children:[i.jsx(Lt,{children:i.jsx(It,{placeholder:"All Statuses"})}),i.jsxs(Ft,{children:[i.jsx(Ge,{value:"all",children:"All Statuses"}),i.jsx(Ge,{value:"open",children:"Open"}),i.jsx(Ge,{value:"pending",children:"Pending"}),i.jsx(Ge,{value:"closed",children:"Closed"})]})]})]})})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(ne,{variant:"outline",onClick:k,children:"Reset"}),i.jsx(ne,{onClick:w,children:"Apply"})]})]})]})},Qoe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co"},rd=Qoe??{},Vf=((rd==null?void 0:rd.VITE_WEBHOOK_BASE_URL)||"https://primary-production-376c.up.railway.app/webhook").replace(/\/$/,""),Zoe=(rd==null?void 0:rd.VITE_WEBHOOK_PROXY_SLUG)||"proxy-n8n",Uw=`${Qy}/functions/v1/${Zoe}`.replace(/\/$/,""),Zr="route:",VT=e=>e.startsWith("/")?e:`/${e}`,mh=e=>e.startsWith(Zr),Sg=e=>mh(e)?e.slice(Zr.length):null,Kn={BASE_URL:Vf,LEGACY_BASE_URL:Vf,PROXY_BASE_URL:Uw,ROUTE_PREFIX:Zr,ENDPOINTS:{WHATSAPP:{GET_LOGIN_QR:`${Zr}session.get_login_qr`,GET_SESSIONS:"/get_sessions",LOGOUT_SESSION:`${Zr}session.logout`,CREATE_PLATFORM:"/whatsapp/create-platform",CREATE_SESSION:`${Zr}session.create`,DISCONNECT_SESSION:"/disconnect_session",DELETE_SESSION:`${Zr}session.delete`},TELEGRAM:{CREATE_PLATFORM:`${Zr}telegram.create_platform`,SEND_MESSAGE:`${Zr}telegram.send_message`,DELETE_WEBHOOK:`${Zr}telegram.delete_webhook`,VERIFY_TOKEN:`${Qy}/functions/v1/telegram-verify-token`},AI_AGENT:{CHAT_SETTINGS:`${Zr}chat.settings`,CHAT_TEST:`${Zr}chat.test`},KNOWLEDGE:{FILE_UPLOAD:"/knowledge/file-upload-dev",FILE_DELETE:"/knowledge/file-delete-dev"},MESSAGE:{DEFAULT:"/send-message",SEND_MESSAGE:"/send-message",WHATSAPP_SEND_MESSAGE:`${Zr}whatsapp.send_message`,TELEGRAM_SEND_MESSAGE:`${Zr}telegram.send_message`,WEB_SEND_MESSAGE:`${Zr}web.send_message`}},buildUrl:(e,t={})=>{if(!e)throw new Error("Endpoint must be provided");if(e.startsWith("http"))return e;if(!t.forceLegacy&&mh(e)){const n=Sg(e);if(!n)throw new Error("Invalid proxy route key");return`${Uw}/${n}`}if(t.forceLegacy&&mh(e)){const n=Sg(e);if(!n)throw new Error("Invalid proxy route key");return`${Vf}/${n}`}return`${Vf}${VT(e)}`},buildTestUrl:e=>{if(mh(e)){const n=Sg(e);if(!n)throw new Error("Invalid proxy route key");return`${Uw}/${n}`}return`${Vf.replace("/webhook","/webhook-test")}${VT(e)}`},isProxyEndpoint:mh,extractRouteKey:Sg},kU={telegram:Kn.ENDPOINTS.MESSAGE.TELEGRAM_SEND_MESSAGE,whatsapp:Kn.ENDPOINTS.MESSAGE.WHATSAPP_SEND_MESSAGE,web:Kn.ENDPOINTS.MESSAGE.WEB_SEND_MESSAGE},SU=e=>{const t=(e||"").toLowerCase();return t==="wa"||t==="waha"||t==="whatsapp_cloud"?"whatsapp":t==="tg"||t==="tele"?"telegram":t},Ng=e=>{const t=SU(e),n=kU[t]||Kn.ENDPOINTS.MESSAGE.DEFAULT;Kn.ENDPOINTS.MESSAGE.SEND_MESSAGE=n},ele=e=>{const t=SU(e);return kU[t]||Kn.ENDPOINTS.MESSAGE.DEFAULT},tle={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co"},nle=()=>{const e=tle??{};return(e==null?void 0:e.VITE_SUPABASE_ANON_KEY)??null};async function ka(e,t={},n={}){const{forceLegacy:r=!1,skipAuth:a=!1}=n,s=Kn.buildUrl(e,{forceLegacy:r}),o=new Headers(t.headers),l=s.startsWith(Qy)&&s.includes("/functions/v1/");if((!r&&Kn.isProxyEndpoint(e)||l)&&!a&&!o.has("Authorization")){const{data:{session:u}}=await ie.auth.getSession(),f=u==null?void 0:u.access_token;if(!f)throw new Error("Unable to call webhook without an active Supabase session");o.set("Authorization",`Bearer ${f}`);const d=nle();d&&!o.has("apikey")&&o.set("apikey",d)}return fetch(s,{...t,headers:o})}let KT=0;const rle=1e3,Cg=(e="incoming")=>{try{if(!(localStorage.getItem("audioNotifications")!=="false")||document.visibilityState!=="visible")return;const n=Date.now();if(n-KT<rle)return;KT=n;const r=new Audio;e==="incoming"?r.src="/tones/mixkit-message-pop-alert-2354.mp3":r.src="/tones/mixkit-long-pop-2358.wav",r.volume=.7,r.play().catch(()=>{})}catch{}},ale=()=>{const[e,t]=p.useState([]),[n,r]=p.useState([]),[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState(null),f=p.useRef({}),[d,h]=p.useState({}),m=p.useRef(null),g=(E=400)=>{try{m.current&&(clearTimeout(m.current),m.current=null)}catch{}m.current=window.setTimeout(()=>{document.visibilityState==="visible"&&(a||x())},E)},v=(E,R)=>{t(P=>{const L=P.map(O=>O.id===E?{...O,last_message_preview:((R==null?void 0:R.body)||"").toString().replace(/\s+/g," ").trim()||"",last_message_direction:(R==null?void 0:R.direction)??null,last_message_role:(R==null?void 0:R.role)??null,last_msg_at:(R==null?void 0:R.created_at)||O.last_msg_at,unreplied:(R==null?void 0:R.direction)==="in"||(R==null?void 0:R.role)==="user"}:O).sort((O,F)=>{const C=new Date(O.last_msg_at??O.created_at??0).getTime();return new Date(F.last_msg_at??F.created_at??0).getTime()-C});return console.log("Re-sorted conversations after message update"),L})},x=async E=>{try{s(!0),l(null),await Id();const R=E??f.current;E&&(f.current=E,h(E));let P=wt.from("threads").select(`
          *,
          contacts(name, phone, email),
          channels!inner(display_name, type, provider, external_id, logo_url, profile_photo_url),
          messages(id, body, role, direction, created_at, seq)
        `).order("last_msg_at",{ascending:!1}).order("created_at",{foreignTable:"messages",ascending:!1}).limit(1,{foreignTable:"messages"});const{dateRange:U,status:L,agent:O,resolvedBy:F,inbox:C,channelType:z,platformId:I}=R;L&&L!=="all"&&L!==""&&(P=P.eq("status",L)),O&&O!=="all"&&O!==""&&(P=P.eq("assignee_user_id",O)),F&&F!=="all"&&F!==""&&(P=P.eq("resolved_by_user_id",F)),C&&C!=="all"&&C!==""&&(P=P.eq("channels.provider",C)),z&&z!=="all"&&z!==""&&(P=P.eq("channels.provider",z)),I&&I!=="all"&&I!==""&&(P=P.eq("channel_id",I));const $=new Promise((se,Q)=>{const _e=setTimeout(()=>{clearTimeout(_e),Q(new Error("timeout"))},8e3)}),{data:K,error:X}=await Promise.race([P,$]);if(X)throw X;const V=Array.from(new Set((K||[]).flatMap(se=>[se.assigned_by_user_id,se.assignee_user_id,se.resolved_by_user_id]).filter(Boolean)));let W={};if(V.length>0){const{data:se,error:Q}=await wt.from("users_profile").select("user_id, display_name").in("user_id",V);if(Q)throw Q;W=Object.fromEntries((se||[]).map(_e=>[_e.user_id,_e.display_name||""]))}let G=(K||[]).map(se=>{var Ce,Te,Ee,ze,gt,ut,ee,We,st,oe,ve,De,Me,Z;const Q=Array.isArray(se.messages)&&se.messages.length>0?se.messages[0]:null,_e=((Q==null?void 0:Q.body)||"").toString().replace(/\s+/g," ").trim(),xe=(Q==null?void 0:Q.direction)??null,J=(Q==null?void 0:Q.role)??null,fe=xe==="in"||J==="user";return{...se,contact_name:((Ce=se.contacts)==null?void 0:Ce.name)||"Unknown Contact",contact_phone:((Te=se.contacts)==null?void 0:Te.phone)||"",contact_email:((Ee=se.contacts)==null?void 0:Ee.email)||"",channel_name:((ze=se.channels)==null?void 0:ze.display_name)||"Unknown Channel",channel_type:((gt=se.channels)==null?void 0:gt.type)||"web",channel_provider:((ut=se.channels)==null?void 0:ut.provider)||void 0,channel:{provider:(ee=se.channels)==null?void 0:ee.provider,type:(We=se.channels)==null?void 0:We.type,display_name:(st=se.channels)==null?void 0:st.display_name,external_id:(oe=se.channels)==null?void 0:oe.external_id,logo_url:((ve=se.channels)==null?void 0:ve.logo_url)||null,profile_photo_url:((De=se.channels)==null?void 0:De.profile_photo_url)||null},channel_logo_url:((Me=se.channels)==null?void 0:Me.logo_url)||((Z=se.channels)==null?void 0:Z.profile_photo_url)||null,last_message_preview:_e||"",last_message_direction:xe,last_message_role:J,last_msg_at:(Q==null?void 0:Q.created_at)||se.last_msg_at,message_count:0,assigned:!!se.assignee_user_id,assigned_by_name:se.assigned_by_user_id&&W[se.assigned_by_user_id]||"",assignee_name:se.assignee_user_id&&W[se.assignee_user_id]||"",resolved_by_name:se.resolved_by_user_id&&W[se.resolved_by_user_id]||"",unreplied:fe}});if(U!=null&&U.from){const se=wl(U.from).getTime();G=G.filter(Q=>new Date(Q.last_msg_at).getTime()>=se)}if(U!=null&&U.to){const se=rB(U.to).getTime();G=G.filter(Q=>new Date(Q.last_msg_at).getTime()<=se)}C&&C!=="all"&&C!==""&&(G=G.filter(se=>{var Q;return String(se.channel_provider||((Q=se.channel)==null?void 0:Q.provider)||"").toLowerCase()===String(C).toLowerCase()})),z&&z!=="all"&&z!==""&&(G=G.filter(se=>{var Q;return String(se.channel_provider||((Q=se.channel)==null?void 0:Q.provider)||"").toLowerCase()===String(z).toLowerCase()})),I&&I!=="all"&&I!==""&&(G=G.filter(se=>String(se.channel_id||"")===String(I)));const le=G.sort((se,Q)=>{const _e=new Date(se.last_msg_at??se.created_at??0).getTime();return new Date(Q.last_msg_at??Q.created_at??0).getTime()-_e});t(le)}catch(R){console.error("Error fetching conversations:",R),l(R instanceof Error?R.message:"Failed to fetch conversations")}finally{s(!1)}},y=async E=>{var R;try{l(null);const{data:P,error:U}=await ie.from("messages").select(`
          id,
          thread_id,
          direction,
          role,
          type,
          body,
          payload,
          actor_kind,
          actor_id,
          seq,
          in_reply_to,
          edited_at,
          edit_reason,
          created_at
        `).eq("thread_id",E).order("seq",{ascending:!0});if(U)throw U;const{data:L}=await ie.from("threads").select(`
          contacts(name, phone, email)
        `).eq("id",E).maybeSingle(),O=((R=L==null?void 0:L.contacts)==null?void 0:R.name)||"Unknown Contact",F=(P||[]).map(C=>{var z;return{...C,contact_name:O,contact_avatar:((z=O[0])==null?void 0:z.toUpperCase())||"U"}});r(F),u(E)}catch(P){console.error("Error fetching messages:",P),l(P instanceof Error?P.message:"Failed to fetch messages")}},b=async(E,R,P="assistant")=>{var U,L;try{l(null);const{data:O,error:F}=await ie.from("threads").select("channel_id, contact_id, channels(provider)").eq("id",E).single();if(F)throw F;const C={thread_id:E,direction:"out",role:P,type:"text",body:R,payload:{},actor_kind:"agent",actor_id:null},I={id:`tmp_${Math.random().toString(36).slice(2)}`,thread_id:E,direction:"out",role:P,type:"text",body:R,payload:{},actor_kind:"agent",actor_id:null,seq:0,in_reply_to:null,edited_at:null,edit_reason:null,created_at:new Date().toISOString(),contact_name:"",contact_avatar:"A",_status:"pending"};r(W=>[...W,I]);const{data:$,error:K}=await ie.from("messages").insert([C]).select().single();if(K)throw K;const{data:X,error:V}=await ie.from("contacts").select("phone, external_id").eq("id",O.contact_id).single();V&&console.warn("Error fetching contact details:",V);try{const W=e.find(Q=>Q.id===E),ae=((U=W==null?void 0:W.channel)==null?void 0:U.provider)||((L=O==null?void 0:O.channels)==null?void 0:L.provider),G=ele(ae),le={channel_id:O.channel_id,contact_id:O.contact_id,contact_phone:(X==null?void 0:X.phone)||null,external_id:(X==null?void 0:X.external_id)||null,text:R,type:"text",direction:"out",role:P},se=await ka(G,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(le)});se.ok||console.warn("Webhook call failed:",se.status,se.statusText)}catch(W){console.error("Error calling webhook:",W)}await y(E),v(E,{body:R,direction:"out",role:P,created_at:new Date().toISOString()});try{await $t({action:"message.send",resource:"message",resourceId:($==null?void 0:$.id)??null,context:{thread_id:E,role:P}})}catch{}return $}catch(O){throw console.error("Error sending message:",O),l(O instanceof Error?O.message:"Failed to send message"),r(F=>{const C=[...F];for(let z=C.length-1;z>=0;z--)if(C[z]._status==="pending"){C[z]._status="error";break}return C}),O}},w=async(E,R)=>{var P;try{l(null);const U={org_id:((P=(await ie.auth.getUser()).data.user)==null?void 0:P.id)||"00000000-0000-0000-0000-000000000001",contact_id:E,channel_id:R,status:"open",assignee_user_id:null},{data:L,error:O}=await ie.from("threads").insert([U]).select().single();if(O)throw O;await x();try{await $t({action:"thread.create",resource:"thread",resourceId:(L==null?void 0:L.id)??null,context:{contact_id:E,channel_id:R}})}catch{}return L}catch(U){throw console.error("Error creating conversation:",U),l(U instanceof Error?U.message:"Failed to create conversation"),U}},k=async(E,R)=>{try{l(null);const{error:P}=await ie.from("threads").update({status:R}).eq("id",E);if(P)throw P;await x();try{await $t({action:"thread.update_status",resource:"thread",resourceId:E,context:{status:R}})}catch{}}catch(P){throw console.error("Error updating thread status:",P),l(P instanceof Error?P.message:"Failed to update thread status"),P}},j=async(E,R)=>{var P,U,L;try{l(null);const{error:O}=await ie.rpc("takeover_thread",{p_thread_id:E});O&&console.warn("takeover_thread RPC failed; will attempt direct update",O);const{data:F}=await ie.auth.getUser(),C=((P=F==null?void 0:F.user)==null?void 0:P.id)||null;try{const{data:z}=await ie.from("threads").select("assignee_user_id").eq("id",E).single();if(!!!(z!=null&&z.assignee_user_id)&&C){const{error:$}=await ie.from("threads").update({assignee_user_id:C,assigned_by_user_id:C,assigned_at:new Date().toISOString(),handover_reason:"other:manual_takeover",ai_access_enabled:!1}).eq("id",E);$&&console.warn("Fallback assignment update failed",$)}}catch(z){console.warn("Failed verifying assignment state",z)}try{await wt.from("threads").update({ai_access_enabled:!1}).eq("id",E)}catch{}try{const{data:z}=await ie.auth.getUser(),I=((U=z==null?void 0:z.user)==null?void 0:U.id)||null;let $=null;if(I){const{data:K}=await ie.from("users_profile").select("display_name").eq("user_id",I).single();$=(K==null?void 0:K.display_name)||null}await wt.from("messages").insert([{thread_id:E,direction:null,role:"system",type:"event",body:`Conversation taken over by ${$||((L=z==null?void 0:z.user)==null?void 0:L.email)||"agent"}.`,payload:{event:"takeover",user_id:I}}])}catch(z){console.warn("Failed to insert takeover event message",z)}await x(),await y(E);try{await $t({action:"thread.assign",resource:"thread",resourceId:E,context:{assignee_user_id:R}})}catch{}}catch(O){throw console.error("Error assigning thread:",O),l(O instanceof Error?O.message:"Failed to assign thread"),O}},_=async(E,R)=>{var P,U;try{l(null);const{data:L}=await ie.auth.getUser(),O=((P=L==null?void 0:L.user)==null?void 0:P.id)||null,F=new Date().toISOString(),{error:C}=await ie.from("threads").update({assignee_user_id:R,assigned_by_user_id:O,assigned_at:F,handover_reason:"other:manual_assign",ai_access_enabled:!1}).eq("id",E);if(C)throw C;try{const z=[O,R].filter(Boolean);let I={};if(z.length>0){const{data:X}=await ie.from("users_profile").select("user_id, display_name").in("user_id",z);I=Object.fromEntries((X||[]).map(V=>[String(V.user_id),String(V.display_name||"")]))}const $=O&&(I[O]||((U=L==null?void 0:L.user)==null?void 0:U.email))||"agent",K=I[R]||"agent";await wt.from("messages").insert([{thread_id:E,direction:null,role:"system",type:"event",body:`Conversation assigned to ${K} by ${$}.`,payload:{event:"assign",assigned_to:R,assigned_by:O}}])}catch(z){console.warn("Failed to insert assign event message",z)}await x(),await y(E);try{await $t({action:"thread.assign",resource:"thread",resourceId:E,context:{assignee_user_id:R}})}catch{}}catch(L){throw console.error("Error assigning thread to user:",L),l(L instanceof Error?L.message:"Failed to assign thread"),L}},S=async(E,R)=>{try{l(null);const{error:P}=await ie.from("thread_collaborators").insert([{thread_id:E,user_id:R}]);if(P)throw P;try{await $t({action:"thread.add_participant",resource:"thread",resourceId:E,context:{user_id:R}})}catch{}}catch(P){throw console.error("Error adding thread participant:",P),l(P instanceof Error?P.message:"Failed to add thread participant"),P}},T=async(E,R)=>{try{l(null);const{error:P}=await ie.from("thread_collaborators").delete().eq("thread_id",E).eq("user_id",R);if(P)throw P;try{await $t({action:"thread.remove_participant",resource:"thread",resourceId:E,context:{user_id:R}})}catch{}}catch(P){throw console.error("Error removing thread participant:",P),l(P instanceof Error?P.message:"Failed to remove thread participant"),P}},N=async(E,R)=>{try{l(null);const{error:P}=await ie.from("thread_labels").insert([{thread_id:E,label_id:R}]);if(P)throw P;try{await $t({action:"thread.add_label",resource:"thread",resourceId:E,context:{label_id:R}})}catch{}}catch(P){throw console.error("Error adding thread label:",P),l(P instanceof Error?P.message:"Failed to add thread label"),P}},A=async(E,R)=>{try{l(null);const{error:P}=await ie.from("thread_labels").delete().eq("thread_id",E).eq("label_id",R);if(P)throw P;try{await $t({action:"thread.remove_label",resource:"thread",resourceId:E,context:{label_id:R}})}catch{}}catch(P){throw console.error("Error removing thread label:",P),l(P instanceof Error?P.message:"Failed to remove thread label"),P}},D=async E=>{try{l(null);const{error:R}=await ie.from("threads").delete().eq("id",E);if(R)throw R;Xs.invalidatePattern("^query:threads"),t(P=>P.filter(L=>L.id!==E)),c===E&&(u(null),r([]));try{await $t({action:"thread.delete",resource:"thread",resourceId:E})}catch{}await x()}catch(R){throw console.error("Error deleting thread:",R),l(R instanceof Error?R.message:"Failed to delete conversation"),R}};p.useEffect(()=>{g(10)},[]),p.useEffect(()=>{const E=()=>{try{t([]),r([]),u(null),l(null)}catch{}try{g(50)}catch{}};try{window.addEventListener(um,E)}catch{}return()=>{try{window.removeEventListener(um,E)}catch{}}},[]);const B=async()=>{try{const{data:E,error:R}=await wt.rpc("check_and_auto_resolve_threads");if(R){console.error("Auto-resolve check failed:",R);return}E&&E.length>0&&x()}catch(E){console.error("Auto-resolve check error:",E)}};return p.useEffect(()=>{const E=setInterval(()=>{document.visibilityState==="visible"&&B()},3e4);return()=>clearInterval(E)},[]),p.useEffect(()=>{const E=ie.channel("threads-realtime").on("postgres_changes",{event:"*",schema:"public",table:"threads"},()=>{document.visibilityState==="visible"&&g(200)}).subscribe();return()=>{try{ie.removeChannel(E)}catch{}}},[]),p.useEffect(()=>{const E=ie.channel("messages-realtime-for-convlist").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},R=>{const P=R.new;P&&P.direction==="in"&&document.visibilityState==="visible"?(Cg("incoming"),v(P.thread_id,P),g(100),B()):P&&(P.role==="system"||P.type==="event")&&document.visibilityState==="visible"?(Cg("incoming"),v(P.thread_id,P),g(200)):P&&P.direction==="out"&&(P.role==="agent"||P.role==="assistant")&&document.visibilityState==="visible"?(v(P.thread_id,P),g(200)):P&&P.role==="agent"&&P.direction==="out"&&document.visibilityState==="visible"&&B()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},()=>{document.visibilityState==="visible"&&g(500)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages"},()=>{document.visibilityState==="visible"&&g(300)}).subscribe();return()=>{try{ie.removeChannel(E)}catch{}try{m.current&&(clearTimeout(m.current),m.current=null)}catch{}}},[]),p.useEffect(()=>{if(!c)return;const E=setInterval(()=>{y(c)},3e4),R=ie.channel(`messages-${c}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},P=>{const U=P.new;U&&U.direction==="in"&&Cg("incoming"),r(L=>{var $,K,X,V;if(L.some(W=>W.id===(U==null?void 0:U.id)))return L;const F=(($=L[0])==null?void 0:$.contact_name)||"",C=((K=L[0])==null?void 0:K.contact_avatar)||(((V=(X=F==null?void 0:F[0])==null?void 0:X.toUpperCase)==null?void 0:V.call(X))??"U"),z={...U||{},contact_name:F,contact_avatar:C},I=[...L,z];return I.sort((W,ae)=>(W.seq??0)-(ae.seq??0)),I})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},P=>{const U=P.new;r(L=>{const O=L.findIndex(z=>z.id===(U==null?void 0:U.id));if(O<0)return L;const F={...L[O],...U||{}},C=[...L];return C[O]=F,C.sort((z,I)=>(z.seq??0)-(I.seq??0)),C})}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},P=>{const U=P.old||P.new,L=U==null?void 0:U.id;L&&r(O=>O.filter(F=>F.id!==L))}).subscribe(P=>{P==="CHANNEL_ERROR"&&(console.error("Error subscribing to messages for thread:",c),setTimeout(()=>{y(c)},1e3))});return()=>{clearInterval(E);try{ie.removeChannel(R)}catch{}}},[c]),{conversations:e,messages:n,loading:a,error:o,selectedThreadId:c,fetchConversations:x,fetchMessages:y,sendMessage:b,refreshMessages:()=>{c&&y(c)},enableAudioNotifications:()=>{localStorage.setItem("audioNotifications","true")},disableAudioNotifications:()=>{localStorage.setItem("audioNotifications","false")},testAudioNotification:()=>{Cg("incoming")},createConversation:w,updateThreadStatus:k,assignThread:j,assignThreadToUser:_,addThreadParticipant:S,removeThreadParticipant:T,addThreadLabel:N,removeThreadLabel:A,deleteThread:D,checkAutoResolve:B,activeFilters:d}},dC=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),[o,l]=p.useState(0),c=p.useRef({page:1,limit:100,searchQuery:void 0,filters:void 0}),u=async(g=1,v=100,x,y)=>{var b,w,k,j;try{c.current={page:g,limit:v,searchQuery:x,filters:y},r(!0),s(null);const _=!!(y!=null&&y.chatStatus||(b=y==null?void 0:y.dateRange)!=null&&b.from||(w=y==null?void 0:y.dateRange)!=null&&w.to||(y==null?void 0:y.handledBy)==="assigned");let S=wt.from("contacts").select(`
          id, org_id, name, email, phone, locale, notes, created_at,
          threads${_?"!inner":""}(
            id, status, created_at, assignee_user_id,
            channels(display_name, provider, type)
          )
          `,{count:"exact"}).order("created_at",{ascending:!1});if(x&&(S=S.or(`name.ilike.%${x}%,phone.ilike.%${x}%,email.ilike.%${x}%`)),y&&(y.chatStatus&&(S=S.eq("threads.status",y.chatStatus)),y.handledBy==="assigned"&&(S=S.not("threads.assignee_user_id","is",null)),(k=y.dateRange)!=null&&k.from&&(S=S.gte("threads.created_at",y.dateRange.from)),(j=y.dateRange)!=null&&j.to)){const R=y.dateRange.to.length>10?y.dateRange.to:`${y.dateRange.to}T23:59:59.999Z`;S=S.lte("threads.created_at",R)}const T=(g-1)*v,N=T+v-1;S=S.range(T,N),S=S.order("created_at",{foreignTable:"threads",ascending:!1}).limit(1,{foreignTable:"threads"});const{data:A,error:D,count:B}=await S;if(D)throw D;let E=(A||[]).map(R=>{var O,F,C;const P=(R.threads||[])[0]||null,U=((O=P==null?void 0:P.channels)==null?void 0:O.display_name)||"",L=P!=null&&P.created_at?new Date(P.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(",",""):"";return{id:R.id,org_id:R.org_id,name:R.name,email:R.email,phone:R.phone,locale:R.locale,notes:R.notes,created_at:R.created_at,labelNames:"",inbox:U,channelProvider:((F=P==null?void 0:P.channels)==null?void 0:F.provider)||null,channelType:((C=P==null?void 0:P.channels)==null?void 0:C.type)||null,chatStatus:(P==null?void 0:P.status)||"",chatCreatedAt:L,chatCreatedAtISO:(P==null?void 0:P.created_at)||null,handledBy:P!=null&&P.assignee_user_id?"assigned":"unassigned"}});y&&(E=E.filter(R=>{var P,U;if(y.chatStatus&&R.chatStatus!==y.chatStatus||y.handledBy&&R.handledBy!==y.handledBy)return!1;if((P=y.dateRange)!=null&&P.from||(U=y.dateRange)!=null&&U.to){const L=new Date(R.created_at),O=y.dateRange.from?new Date(y.dateRange.from):null,F=y.dateRange.to?new Date(y.dateRange.to):null;if(O&&L<O||F&&L>F)return!1}return!0})),t(E),l(B||0)}catch(_){console.error("Error fetching contacts:",_),s(_ instanceof Error?_.message:"Failed to fetch contacts")}finally{r(!1)}},f=async g=>{try{s(null);const{data:v,error:x}=await wt.from("contacts").insert([{...g,org_id:"00000000-0000-0000-0000-000000000001"}]).select().single();if(x)throw x;await u();try{await $t({action:"contact.create",resource:"contact",resourceId:(v==null?void 0:v.id)??null,context:g})}catch{}return v}catch(v){throw console.error("Error creating contact:",v),s(v instanceof Error?v.message:"Failed to create contact"),v}},d=async(g,v)=>{try{s(null);const{error:x}=await wt.from("contacts").update(v).eq("id",g);if(x)throw x;await u();try{await $t({action:"contact.update",resource:"contact",resourceId:g,context:v})}catch{}}catch(x){throw console.error("Error updating contact:",x),s(x instanceof Error?x.message:"Failed to update contact"),x}},h=async g=>{try{s(null);const{error:v}=await ie.from("contacts").delete().eq("id",g);if(v)throw v;Xs.invalidatePattern("^query:contacts"),await u();try{await $t({action:"contact.delete",resource:"contact",resourceId:g})}catch{}}catch(v){throw console.error("Error deleting contact:",v),s(v instanceof Error?v.message:"Failed to delete contact"),v}},m=async g=>{try{s(null);const{error:v}=await ie.from("contacts").delete().in("id",g);if(v)throw v;Xs.invalidatePattern("^query:contacts"),await u();try{await $t({action:"contact.bulk_delete",resource:"contact",context:{ids:g}})}catch{}}catch(v){throw console.error("Error deleting contacts:",v),s(v instanceof Error?v.message:"Failed to delete contacts"),v}};return p.useEffect(()=>{u()},[]),p.useEffect(()=>{const g=()=>{try{t([]),l(0),s(null),r(!0)}catch{}try{const{page:v,limit:x,searchQuery:y,filters:b}=c.current;u(v,x,y,b)}catch{}};try{window.addEventListener(um,g)}catch{}return()=>{try{window.removeEventListener(um,g)}catch{}}},[]),{contacts:e,loading:n,error:a,totalCount:o,fetchContacts:u,createContact:f,updateContact:d,deleteContact:h,deleteMultipleContacts:m}},er={MASTER_AGENT:"master_agent",SUPER_AGENT:"super_agent",AGENT:"agent"},Wt=p.forwardRef(({permission:e,permissions:t=[],requireAll:n=!1,fallback:r=null,children:a},s)=>{const{hasAnyPermission:o,hasAllPermissions:l,loading:c}=br();if(c)return null;const u=e?[e,...t]:t,f=n?l(u):o(u),d=!Array.isArray(a)&&typeof a!="string"&&typeof a!="number";return f?d?i.jsx(GS,{ref:s,children:a}):i.jsx(i.Fragment,{children:a}):i.jsx(i.Fragment,{children:r})});var NU="AlertDialog",[ile,W3e]=wr(NU,[k5]),_o=k5(),CU=e=>{const{__scopeAlertDialog:t,...n}=e,r=_o(t);return i.jsx(FN,{...r,...n,modal:!0})};CU.displayName=NU;var sle="AlertDialogTrigger",AU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=_o(n);return i.jsx(B5,{...a,...r,ref:t})});AU.displayName=sle;var ole="AlertDialogPortal",EU=e=>{const{__scopeAlertDialog:t,...n}=e,r=_o(t);return i.jsx(BN,{...r,...n})};EU.displayName=ole;var lle="AlertDialogOverlay",PU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=_o(n);return i.jsx(lb,{...a,...r,ref:t})});PU.displayName=lle;var ad="AlertDialogContent",[cle,ule]=ile(ad),dle=xL("AlertDialogContent"),TU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,s=_o(n),o=p.useRef(null),l=St(t,o),c=p.useRef(null);return i.jsx(Ore,{contentName:ad,titleName:OU,docsSlug:"alert-dialog",children:i.jsx(cle,{scope:n,cancelRef:c,children:i.jsxs(cb,{role:"alertdialog",...s,...a,ref:l,onOpenAutoFocus:Ie(a.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(dle,{children:r}),i.jsx(hle,{contentRef:o})]})})})});TU.displayName=ad;var OU="AlertDialogTitle",IU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=_o(n);return i.jsx(UN,{...a,...r,ref:t})});IU.displayName=OU;var RU="AlertDialogDescription",MU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=_o(n);return i.jsx(zN,{...a,...r,ref:t})});MU.displayName=RU;var fle="AlertDialogAction",DU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=_o(n);return i.jsx(qN,{...a,...r,ref:t})});DU.displayName=fle;var $U="AlertDialogCancel",LU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=ule($U,n),s=_o(n),o=St(t,a);return i.jsx(qN,{...s,...r,ref:o})});LU.displayName=$U;var hle=({contentRef:e})=>{const t=`\`${ad}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ad}\` by passing a \`${RU}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ad}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},mle=CU,ple=AU,gle=EU,FU=PU,BU=TU,UU=DU,zU=LU,qU=IU,WU=MU;const bb=mle,vle=ple,xle=gle,HU=p.forwardRef(({className:e,...t},n)=>i.jsx(FU,{className:ke("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));HU.displayName=FU.displayName;const Pp=p.forwardRef(({className:e,...t},n)=>i.jsxs(xle,{children:[i.jsx(HU,{}),i.jsx(BU,{ref:n,className:ke("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Pp.displayName=BU.displayName;const Tp=({className:e,...t})=>i.jsx("div",{className:ke("flex flex-col space-y-2 text-center sm:text-left",e),...t});Tp.displayName="AlertDialogHeader";const Op=({className:e,...t})=>i.jsx("div",{className:ke("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Op.displayName="AlertDialogFooter";const Ip=p.forwardRef(({className:e,...t},n)=>i.jsx(qU,{ref:n,className:ke("text-lg font-semibold",e),...t}));Ip.displayName=qU.displayName;const Rp=p.forwardRef(({className:e,...t},n)=>i.jsx(WU,{ref:n,className:ke("text-sm text-muted-foreground",e),...t}));Rp.displayName=WU.displayName;const Mp=p.forwardRef(({className:e,...t},n)=>i.jsx(UU,{ref:n,className:ke(Ad(),e),...t}));Mp.displayName=UU.displayName;const Dp=p.forwardRef(({className:e,...t},n)=>i.jsx(zU,{ref:n,className:ke(Ad({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Dp.displayName=zU.displayName;function yle({options:e,value:t,onChange:n,placeholder:r="Select...",searchPlaceholder:a="Search...",className:s,disabled:o=!1}){const[l,c]=p.useState(!1),u=p.useMemo(()=>{var f;return(f=e.find(d=>d.value===t))==null?void 0:f.label},[e,t]);return i.jsxs(hi,{open:l,onOpenChange:c,children:[i.jsx(mi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",role:"combobox","aria-expanded":l,className:ke("w-full justify-between font-normal",!t&&"text-muted-foreground",s),disabled:o,children:[i.jsx("span",{className:"truncate",children:t?u:r}),i.jsx(KL,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(Wa,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:i.jsxs(Mc,{children:[i.jsx(Dc,{placeholder:a}),i.jsxs(yb,{children:[i.jsx($c,{children:"No results found."}),i.jsx(Lc,{children:e.map(f=>i.jsxs(Fc,{value:f.label,onSelect:()=>{n(f.value),c(!1)},children:[i.jsx(Ty,{className:ke("mr-2 h-4 w-4",t===f.value?"opacity-100":"opacity-0")}),f.label]},f.value))})]})]})})]})}function ble({options:e,value:t=[],onChange:n,onAdd:r,onRemove:a,placeholder:s="Select...",searchPlaceholder:o="Search...",className:l,disabled:c=!1}){const[u,f]=p.useState(!1),d=p.useMemo(()=>t.map(v=>e.find(x=>x.value===v)||{value:v,label:v}),[t,e]),h=p.useMemo(()=>e.filter(v=>!t.includes(v.value)),[e,t]),m=v=>{if(t.includes(v))return;const x=[...t,v];n(x),r==null||r(v),f(!1)},g=v=>{const x=t.filter(y=>y!==v);n(x),a==null||a(v)};return i.jsxs("div",{className:ke("flex flex-col gap-2",l),children:[d.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-1",children:d.map(v=>i.jsxs(vt,{variant:"secondary",className:"pr-1 py-1 flex items-center gap-1",children:[v.label,i.jsxs("button",{type:"button",className:"ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2 hover:bg-muted",onClick:x=>{x.preventDefault(),g(v.value)},disabled:c,children:[i.jsx(hp,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"}),i.jsxs("span",{className:"sr-only",children:["Remove ",v.label]})]})]},v.value))}),i.jsxs(hi,{open:u,onOpenChange:f,children:[i.jsx(mi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",role:"combobox","aria-expanded":u,className:"w-full justify-between font-normal text-muted-foreground",disabled:c,children:[i.jsx("span",{children:s}),i.jsx(KL,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(Wa,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:i.jsxs(Mc,{children:[i.jsx(Dc,{placeholder:o}),i.jsxs(yb,{children:[i.jsx($c,{children:"No results found."}),i.jsx(Lc,{children:h.map(v=>i.jsx(Fc,{value:v.label,onSelect:()=>m(v.value),children:v.label},v.value))})]})]})})]})]})}const wle=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),zw=e=>{const t=e.trim().toLowerCase();return t==="telegram"||t==="tele"?"Tele":t==="whatsapp"||t==="wa"?"WhatsApp":t==="web"?"Web":e},jle=24*60*60*1e3,_le=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`},kle=e=>{if(Number.isNaN(e.getTime()))return"";const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate()),a=n.getTime()-r.getTime(),s=Math.floor(a/jle);return s===0?"Today":s===1?"Yesterday":e.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})},Sle=({message:e,isLastMessage:t,highlighted:n=!1,matches:r=[],activeMatchOrder:a=-1})=>{const s=e.role==="assistant"||e.role==="agent"||e.direction==="out",o=e.role==="system"||e.type==="event"||e.type==="note",l=e.role==="assistant",c=e.role==="agent",u=()=>{const f=e.body||"";if(!f||r.length===0)return f;const d=[...r].sort((g,v)=>g.start-v.start),h=[];let m=0;return d.forEach(({start:g,length:v},x)=>{g>m&&h.push(f.slice(m,g));const y=f.slice(g,g+v);h.push({type:"highlight",content:y,index:x}),m=g+v}),m<f.length&&h.push(f.slice(m)),h.map((g,v)=>{if(typeof g=="string")return i.jsx("span",{children:g},`seg-${v}`);const x=g.index===a;return i.jsx("mark",{className:`rounded-sm px-0.5 text-current text-black ${x?"bg-orange-300":"bg-yellow-200"}`,children:g.content},`highlight-${g.index}`)})};return o?i.jsx("div",{className:"flex justify-center my-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:e.body||"System event"}),i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),i.jsx("span",{children:""}),i.jsx("span",{children:"system"})]})]})}):i.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} mb-3`,children:i.jsxs("div",{className:`flex ${s?"flex-row-reverse":"flex-row"} items-end gap-2 max-w-[75%]`,children:[i.jsxs(Vr,{className:"h-8 w-8",children:[i.jsx(Js,{src:""}),i.jsx(Kr,{className:"text-xs",children:s?"A":e.contact_avatar})]}),i.jsxs("div",{className:`rounded-lg px-3 py-2 text-sm shadow-sm ${c?"bg-blue-600 text-white":l?"bg-blue-100 text-blue-900":"bg-muted text-foreground"} ${n?"ring-2 ring-yellow-300":""}`,children:[i.jsx("p",{className:"whitespace-pre-wrap",children:u()}),i.jsxs("div",{className:`mt-1 flex items-center gap-1 text-[10px] ${c?"text-blue-100":l?"text-blue-700":"text-muted-foreground"}`,children:[i.jsx("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),s&&(e._status==="pending"?i.jsx(zt,{className:"h-3 w-3 animate-spin","aria-label":"pending"}):t?i.jsx(JV,{className:"h-3 w-3","aria-label":"sent"}):null)]})]})]})})};function Nle(){var Ni,ls,cs,Ci,Ao,Mr,Ai,Ei;const[e,t]=yN(),[n,r]=p.useState(""),[a,s]=p.useState(""),[o,l]=p.useState(null),[c,u]=p.useState("assigned");p.useState(!1),p.useState(!1);const[f,d]=p.useState(""),[h,m]=p.useState(null),[g,v]=p.useState(0),x=p.useRef(null),y=p.useRef({}),b=f.trim(),{conversations:w,messages:k,loading:j,error:_,fetchConversations:S,fetchMessages:T,sendMessage:N,createConversation:A,addThreadParticipant:D,removeThreadParticipant:B,addThreadLabel:E,removeThreadLabel:R,assignThread:P,assignThreadToUser:U,deleteThread:L}=ale();dC();const{agents:O}=Ml(),{user:F}=Xr(),{hasRole:C,hasPermission:z}=br(),[I,$]=p.useState(!1),[K,X]=p.useState(null),[V,W]=p.useState(!1),ae=z("contacts.delete"),[G,le]=p.useState({}),se=p.useRef(!1),Q=p.useRef(!1),_e=p.useMemo(()=>`chat.threadFilters.v1:${(F==null?void 0:F.id)||"anon"}`,[F==null?void 0:F.id]),[xe,J]=p.useState({}),[fe,Ce]=p.useState({}),[Te,Ee]=p.useState([]),[ze,gt]=p.useState(null),[ut,ee]=p.useState([]),[We,st]=p.useState({}),oe=p.useMemo(()=>O.filter(M=>String((M==null?void 0:M.primaryRole)||"").toLowerCase()==="super_agent").map(M=>({value:M.user_id,label:M.display_name||M.email||"Unknown Agent"})),[O]),ve=p.useMemo(()=>O.map(M=>({value:M.user_id,label:M.display_name||M.email||"Unknown Agent"})),[O]),De=p.useMemo(()=>Object.fromEntries(O.map(M=>[String(M.user_id),String(M.display_name||M.email||"Unknown")])),[O]),Me=p.useMemo(()=>M=>De[M]||We[M]||M,[De,We]),Z=p.useMemo(()=>{if(!o)return null;const M=w.find(q=>q.id===o);return(M==null?void 0:M.assignee_user_id)??null},[o,w]),Be=p.useMemo(()=>o?(ze==null?void 0:ze.threadId)===o?ze.userId:Z:null,[o,ze,Z]);p.useEffect(()=>{if(!o){gt(null);return}(ze==null?void 0:ze.threadId)===o&&Z===ze.userId&&gt(null)},[o,Z,ze]),p.useEffect(()=>{if(!Be){ee([]);return}let M=!0;return(async()=>{const{data:re,error:ce}=await wt.from("super_agent_members").select("agent_user_id").eq("super_agent_id",Be);if(M){if(ce){console.warn("Failed to fetch super agent members",ce),ee([]);return}ee((re||[]).map(de=>String(de.agent_user_id)))}})(),()=>{M=!1}},[Be]),p.useEffect(()=>{const M=Array.from(new Set([...Be?[Be]:[],...Te,...ut].filter(Boolean)));if(M.length===0)return;const q=M.filter(de=>!De[de]&&!We[de]);if(q.length===0)return;let re=!0;return(async()=>{try{const{data:de,error:be}=await wt.from("users_profile").select("user_id, display_name").in("user_id",q);if(!re)return;if(be)throw be;const Ve=Object.fromEntries((de||[]).map(ot=>[String(ot.user_id),String(ot.display_name||"")]));st(ot=>({...ot,...Ve}))}catch(de){console.warn("Failed to fetch user labels",de)}})(),()=>{re=!1}},[Be,Te,ut,De,We]);const xt=p.useMemo(()=>{if(!Be)return[];const M=new Set(ut);return ve.filter(q=>M.has(q.value)).map(q=>({...q,label:Me(q.value)}))},[ve,Be,ut,Me]),yt=p.useMemo(()=>{const M=new Map;return xt.forEach(q=>M.set(q.value,q)),Te.forEach(q=>{M.has(q)||M.set(q,{value:q,label:Me(q)})}),Array.from(M.values())},[xt,Te,Me]);p.useEffect(()=>{if(!o){Ee([]);return}let M=!0;return(async()=>{const{data:re}=await wt.from("thread_collaborators").select("user_id").eq("thread_id",o);M&&re&&Ee(re.map(ce=>ce.user_id))})(),()=>{M=!1}},[o]);const He=async M=>{if(o)try{await D(o,M),Ee(q=>[...q,M]),Le.success("Collaborator added")}catch{}},lt=async M=>{if(o)try{await B(o,M),Ee(q=>q.filter(re=>re!==M)),Le.success("Collaborator removed")}catch{}},mt=p.useMemo(()=>{if(!b)return[];const M=wle(b);return M?k.flatMap(q=>{const re=q.body||"";if(!re)return[];const ce=new RegExp(M,"gi"),de=[];let be=0,Ve;for(;(Ve=ce.exec(re))!==null;)de.push({messageId:q.id,start:Ve.index,length:Ve[0].length,order:be}),be+=1,Ve.index===ce.lastIndex&&ce.lastIndex++;return de}):[]},[b,k]),en=p.useMemo(()=>{if(mt.length===0)return{};const M=mt.reduce((q,re)=>(q[re.messageId]||(q[re.messageId]=[]),q[re.messageId].push({start:re.start,length:re.length}),q),{});return Object.values(M).forEach(q=>{q.sort((re,ce)=>re.start-ce.start)}),M},[mt]),ue=mt.length,Pe=ue>0?mt[g]:null,H=p.useMemo(()=>k.length>0?k[k.length-1].id:null,[k]),we=p.useMemo(()=>{const M=[];let q=null;return k.forEach(re=>{const ce=re.created_at;if(ce){const de=new Date(ce);if(!Number.isNaN(de.getTime())){const be=_le(de);if(be!==q){const Ve=kle(de);Ve&&M.push({type:"date",key:`date-${be}`,label:Ve}),q=be}}}M.push({type:"message",key:re.id,message:re})}),M},[k]),ge=M=>{const q=(M??"").toString();return!q||q==="all"?"":q},Ue=M=>{var q,re;return!!((q=M.dateRange)!=null&&q.from||(re=M.dateRange)!=null&&re.to||ge(M.inbox)||ge(M.channelType)||ge(M.platformId)||ge(M.status)||ge(M.agent)||ge(M.resolvedBy))},tt=M=>{var ce,de;const q=(ce=M.dateRange)!=null&&ce.from?M.dateRange.from.getTime():0,re=(de=M.dateRange)!=null&&de.to?M.dateRange.to.getTime():0;return[q,re,ge(M.inbox),ge(M.channelType),ge(M.platformId),ge(M.status),ge(M.agent),ge(M.resolvedBy)].join("|")},te=M=>{const q=M.get("f_from"),re=M.get("f_to"),ce=q?Number(q):0,de=re?Number(re):0,be=ce||de?{from:ce?new Date(ce):void 0,to:de?new Date(de):void 0}:void 0,Ve=ge(M.get("f_inbox")),ot=ge(M.get("f_channelType")),ft=ge(M.get("f_platformId")),ct=ge(M.get("f_status")),at=ge(M.get("f_agent")),tn=ge(M.get("f_resolvedBy")),ht={};return be&&(ht.dateRange=be),Ve&&(ht.inbox=Ve),ot&&(ht.channelType=ot),ft&&(ht.platformId=ft),ct&&(ht.status=ct),at&&(ht.agent=at),tn&&(ht.resolvedBy=tn),ht},ye=(M,q)=>{var ce,de;["f_from","f_to","f_inbox","f_channelType","f_platformId","f_status","f_agent","f_resolvedBy"].forEach(be=>M.delete(be)),(ce=q.dateRange)!=null&&ce.from&&M.set("f_from",String(q.dateRange.from.getTime())),(de=q.dateRange)!=null&&de.to&&M.set("f_to",String(q.dateRange.to.getTime())),ge(q.inbox)&&M.set("f_inbox",ge(q.inbox)),ge(q.channelType)&&M.set("f_channelType",ge(q.channelType)),ge(q.platformId)&&M.set("f_platformId",ge(q.platformId)),ge(q.status)&&M.set("f_status",ge(q.status)),ge(q.agent)&&M.set("f_agent",ge(q.agent)),ge(q.resolvedBy)&&M.set("f_resolvedBy",ge(q.resolvedBy))},Se=M=>{le(M);try{localStorage.setItem(_e,JSON.stringify({...M,dateRange:M.dateRange?{from:M.dateRange.from?M.dateRange.from.getTime():void 0,to:M.dateRange.to?M.dateRange.to.getTime():void 0}:void 0}))}catch{}const q=new URLSearchParams(window.location.search);ye(q,M),se.current=!0,t(q,{replace:!0}),setTimeout(()=>{se.current=!1},0),S(M)};p.useEffect(()=>{v(0)},[b]),p.useEffect(()=>{ue>0&&g>=ue&&v(0)},[g,ue]),p.useEffect(()=>{if(!b||!Pe){m(null);return}m(Pe.messageId);const M=y.current[Pe.messageId];M&&M.scrollIntoView({behavior:"smooth",block:"center"})},[b,Pe]);const Ae=()=>{ue!==0&&v(M=>(M+1)%ue)},dt=()=>{ue!==0&&v(M=>(M-1+ue)%ue)},At=e.get("contact"),dn=e.get("thread"),Jt=e.get("tab"),Ht=p.useRef(!1);p.useEffect(()=>{Jt&&(Ht.current||(Jt==="assigned"||Jt==="unassigned"||Jt==="resolved")&&Jt!==c&&u(Jt))},[Jt]),p.useEffect(()=>{let M=!0;return(async()=>{try{const{data:re,error:ce}=await wt.from("channels").select("id, display_name, provider").order("created_at",{ascending:!1});if(!M)return;if(ce)throw ce;const de={},be={};(re||[]).forEach(Ve=>{de[String(Ve.id)]=String(Ve.display_name||"Unknown"),be[String(Ve.id)]=String(Ve.provider||"")}),J(de),Ce(be)}catch{if(!M)return;J({}),Ce({})}})(),()=>{M=!1}},[]),p.useEffect(()=>{if(se.current)return;const M=te(e);if(!Q.current&&(Q.current=!0,!Ue(M)))try{const ce=localStorage.getItem(_e);if(ce){const de=JSON.parse(ce||"{}"),be={...de,dateRange:de!=null&&de.dateRange?{from:de.dateRange.from?new Date(Number(de.dateRange.from)):void 0,to:de.dateRange.to?new Date(Number(de.dateRange.to)):void 0}:void 0};le(be);const Ve=new URLSearchParams(window.location.search);ye(Ve,be),se.current=!0,t(Ve,{replace:!0}),setTimeout(()=>{se.current=!1},0),S(be);return}}catch{}const q=tt(M),re=tt(G);q!==re&&(le(M),S(M))},[e.toString(),_e]);const Rt=p.useMemo(()=>[...w.filter(q=>`${q.contact_name} ${q.last_message_preview}`.toLowerCase().includes(n.toLowerCase()))].sort((q,re)=>{const ce=new Date(q.last_msg_at??q.created_at??0).getTime();return new Date(re.last_msg_at??re.created_at??0).getTime()-ce}),[w,n]);p.useEffect(()=>{if(j||w.length===0)return;const M=w.filter(ce=>ce.status!=="closed"&&ce.assigned).length,q=w.filter(ce=>ce.status!=="closed"&&!ce.assigned).length,re=w.filter(ce=>ce.status==="closed").length;if(c==="assigned"&&M===0&&q>0){u("unassigned");return}if((c==="assigned"||c==="unassigned")&&M===0&&q===0&&re>0){u("resolved");return}},[w,j,c]),p.useEffect(()=>{if(Jt===c)return;const q=new URLSearchParams(window.location.search);q.set("tab",c),Ht.current=!0,t(q,{replace:!0}),setTimeout(()=>{Ht.current=!1},0)},[c]),p.useEffect(()=>{var q;if(!dn||Rt.length===0)return;const M=Rt.find(re=>re.id===dn);M&&(l(M.id),M.status==="closed"?u("resolved"):u(M.assigned?"assigned":"unassigned"),T(M.id),(q=M.channel)!=null&&q.provider&&Ng(M.channel.provider))},[dn,Rt]),p.useEffect(()=>{var q;if(!At||dn||o||Rt.length===0)return;const M=Rt.find(re=>re.contact_id===At);M&&(l(M.id),M.status==="closed"?u("resolved"):u(M.assigned?"assigned":"unassigned"),T(M.id),(q=M.channel)!=null&&q.provider&&Ng(M.channel.provider))},[At,Rt]);const it=p.useMemo(()=>o&&Rt.find(M=>M.id===o)||null,[o,Rt]);p.useEffect(()=>{(async()=>{try{if(!(it!=null&&it.id)||!(F!=null&&F.id)){$(!1);return}const{data:q,error:re}=await wt.from("thread_collaborators").select("user_id").eq("thread_id",it.id).eq("user_id",F.id).limit(1);if(re)throw re;$(!!q&&q.length>0)}catch(q){console.warn("Failed to check collaborator status",q),$(!1)}})()},[it==null?void 0:it.id,F==null?void 0:F.id]);const fa=async()=>{if(it){if(!(F!=null&&F.id)){Le.error("You must be signed in to take over");return}try{const M=C(er.MASTER_AGENT)||C(er.SUPER_AGENT);if(!I)if(M)try{const{data:q}=await wt.from("thread_collaborators").select("user_id").eq("thread_id",it.id).eq("user_id",F.id).limit(1);(!q||q.length===0)&&await D(it.id,F.id),$(!0)}catch(q){console.warn("Failed to ensure collaborator before takeover",q),Le.error("Please join as collaborator before taking over");return}else{Le.error("Please join as collaborator before taking over");return}await P(it.id,F.id),Le.success("You are now assigned to this chat"),u("assigned"),await S()}catch{Le.error("Failed to take over chat")}}};p.useLayoutEffect(()=>{const M=x.current;if(M)try{M.scrollTop=M.scrollHeight}catch{}},[k,o]);const Ir=async M=>{var re;const q=Rt.find(ce=>ce.id===M);(re=q==null?void 0:q.channel)!=null&&re.provider&&Ng(q.channel.provider),l(M);try{const ce=new URLSearchParams(window.location.search);ce.set("thread",M),q!=null&&q.contact_id&&ce.set("contact",q.contact_id),t(ce,{replace:!0})}catch{}await T(M)},_r=async()=>{const M=a.trim();if(!(!M||!o))try{const{checkAIMessageLimit:q,autoAssignToSuperAgent:re}=await io(async()=>{const{checkAIMessageLimit:de,autoAssignToSuperAgent:be}=await import("./aiMessageLimit-CzT5SAWG.js");return{checkAIMessageLimit:de,autoAssignToSuperAgent:be}},[]),ce=await q(wt,o);if(ce.isExceeded&&ce.superAgentId){if((await re(wt,o,ce.superAgentId)).success){Le.error(`Batas pesan AI telah tercapai (${ce.currentCount}/${ce.limit}). Percakapan telah dialihkan ke super agent dan AI access dinonaktifkan.`),await S();return}}else if(ce.isExceeded&&!ce.superAgentId){Le.error(`Batas pesan AI telah tercapai (${ce.currentCount}/${ce.limit}). Tidak ada super agent yang tersedia untuk penanganan.`);return}if(F!=null&&F.id){const{data:de}=await ie.from("users_profile").select("token_limit_enabled, max_tokens_per_day, max_tokens_per_month").eq("user_id",F.id).maybeSingle();if(de!=null&&de.token_limit_enabled){const be=new Date,Ve=new Date(Date.UTC(be.getUTCFullYear(),be.getUTCMonth(),be.getUTCDate(),0,0,0)).toISOString(),ot=new Date(Date.UTC(be.getUTCFullYear(),be.getUTCMonth(),1,0,0,0)).toISOString(),[{data:ft},{data:ct}]=await Promise.all([ie.from("token_usage_logs").select("total_tokens").eq("user_id",F.id).gte("made_at",Ve),ie.from("token_usage_logs").select("total_tokens").eq("user_id",F.id).gte("made_at",ot)]),at=(ft||[]).reduce((ht,Bn)=>ht+Number(Bn.total_tokens||0),0),tn=(ct||[]).reduce((ht,Bn)=>ht+Number(Bn.total_tokens||0),0);if(de.max_tokens_per_day&&at>=de.max_tokens_per_day){Le.error("Daily token limit reached");return}if(de.max_tokens_per_month&&tn>=de.max_tokens_per_month){Le.error("Monthly token limit reached");return}}}s(""),N(o,M,"assistant"),Le.success("Message sent successfully")}catch{Le.error("Failed to send message")}},Ra=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),_r())};p.useEffect(()=>{var M;(M=it==null?void 0:it.channel)!=null&&M.provider&&Ng(it.channel.provider)},[(Ni=it==null?void 0:it.channel)==null?void 0:Ni.provider]);const Rr=M=>{if(!M)return"";const q=new Date(M),de=(new Date().getTime()-q.getTime())/(1e3*60*60);if(de<24&&de>=0)return q.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(de>=24&&de<48)return"Yesterday";const be=String(q.getMonth()+1).padStart(2,"0"),Ve=String(q.getDate()).padStart(2,"0"),ot=q.getFullYear();return`${be}/${Ve}/${ot}`},sr=M=>M.status==="closed"?i.jsx(vt,{className:"bg-green-100 text-green-700 border-0",children:"Resolved"}):i.jsx(vt,{className:M.assigned?"bg-blue-100 text-blue-700 border-0":"bg-secondary text-secondary-foreground",children:M.assigned?"Assigned":"Unassigned"}),kr=M=>{const q=M.last_msg_at||M.updated_at||M.created_at||"";return Rr(q)},zl=async()=>{if(K){if(!ae){Le.error("You do not have permission to delete conversations"),X(null);return}try{W(!0),await L(K.id),Le.success("Conversation deleted"),o===K.id&&l(null),X(null)}catch{Le.error("Failed to delete conversation")}finally{W(!1)}}},Za=M=>{if(!ae){Le.error("You do not have permission to delete conversations");return}X(M)};return j?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(zt,{className:"h-8 w-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading conversations..."})]}):_?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-red-600 mb-2",children:["Error: ",_]}),i.jsxs(ne,{onClick:()=>{S()},variant:"outline",children:[i.jsx(Oy,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}):i.jsxs("div",{className:"grid w-full grid-cols-[360px_1fr_320px] h-[calc(100vh-120px)] gap-4",children:[i.jsxs("aside",{className:"rounded-lg border bg-card p-3",children:[i.jsxs("div",{className:"mb-3 pb-2 border-b flex items-center justify-between",children:[i.jsx("h2",{className:"text-sm font-medium",children:"Conversations"}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx(Joe,{value:{dateRange:G.dateRange||{},inbox:G.inbox||"",label:[],agent:G.agent||"",status:G.status||"",resolvedBy:G.resolvedBy||"",platformId:G.platformId||"",channelType:G.channelType||"all"},onFilterChange:Se})})]}),Ue(G)&&i.jsxs("div",{className:"mb-2 flex flex-wrap gap-1",children:[G.channelType&&i.jsxs(vt,{variant:"secondary",children:["Channel: ",String(G.channelType).toLowerCase()==="web"?"Live Chat":String(G.channelType)]}),G.platformId&&i.jsxs(vt,{variant:"secondary",children:["Platform: ",xe[String(G.platformId)]||String(G.platformId)]}),G.status&&i.jsxs(vt,{variant:"secondary",children:["Status: ",String(G.status)]}),G.agent&&i.jsxs(vt,{variant:"secondary",children:["Agent: ",Me(String(G.agent))]}),G.resolvedBy&&i.jsxs(vt,{variant:"secondary",children:["Resolved By: ",Me(String(G.resolvedBy))]}),(((ls=G.dateRange)==null?void 0:ls.from)||((cs=G.dateRange)==null?void 0:cs.to))&&i.jsxs(vt,{variant:"secondary",children:["Date: ",(Ci=G.dateRange)!=null&&Ci.from?new Date(G.dateRange.from).toLocaleDateString():""," "," ",(Ao=G.dateRange)!=null&&Ao.to?new Date(G.dateRange.to).toLocaleDateString():""]}),G.inbox&&i.jsxs(vt,{variant:"secondary",children:["Inbox: ",String(G.inbox)]})]}),i.jsxs("div",{className:"relative mb-3",children:[i.jsx(Ji,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(Je,{placeholder:"Search...",value:n,onChange:M=>r(M.target.value),className:"pl-10 h-8 text-sm"})]}),i.jsxs(bl,{value:c,onValueChange:M=>{M!==c&&u(M)},className:"w-full",children:[i.jsxs(vo,{className:"grid w-full grid-cols-[1fr_1fr_auto] mb-3 bg-white",children:[i.jsx(Vn,{value:"assigned",className:"text-xs border-b-2 border-transparent data-[state=active]:bg-blue-50 data-[state=active]:text-blue-600 data-[state=active]:border-blue-500",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("span",{className:"flex items-center",children:["Assigned",i.jsx(vt,{variant:"secondary",className:"ml-2 h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:Rt.filter(M=>M.status!=="closed"&&M.assigned).length})]})}),i.jsx(he,{children:i.jsx("p",{children:"Lihat percakapan yang ditugaskan ke agen"})})]})}),i.jsx(Vn,{value:"unassigned",className:"text-xs border-b-2 border-transparent data-[state=active]:bg-red-50 data-[state=active]:text-red-600 data-[state=active]:border-red-500",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("span",{className:"flex items-center",children:["Unassigned",i.jsx(vt,{variant:"secondary",className:"ml-2 h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:Rt.filter(M=>M.status!=="closed"&&!M.assigned).length})]})}),i.jsx(he,{children:i.jsx("p",{children:"Lihat percakapan yang menunggu penugasan"})})]})}),i.jsx(Vn,{value:"resolved",className:"justify-self-end h-8 px-2 rounded-full border-b-2 border-transparent data-[state=active]:bg-green-50 data-[state=active]:text-green-600 data-[state=active]:border-green-500","aria-label":"Resolved",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(uh,{className:"h-4 w-4"}),i.jsx(vt,{variant:"secondary",className:"h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:Rt.filter(M=>M.status==="closed").length})]})}),i.jsx(he,{children:i.jsx("p",{children:"Lihat percakapan yang telah diselesaikan"})})]})})]}),i.jsx(In,{value:"assigned",className:"mt-0",children:i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:i.jsx("div",{className:"space-y-1",children:Rt.filter(M=>M.status!=="closed"&&M.assigned).map(M=>{var q,re,ce,de;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Ir(M.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===M.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(Vr,{className:"h-6 w-6",children:[i.jsx(Js,{src:M.channel_logo_url||""}),i.jsx(Kr,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-medium truncate",children:M.contact_name}),i.jsx("p",{className:"text-xs text-gray-600 truncate mt-1",children:M.last_message_preview||""}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Ks,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:((q=M.channel)==null?void 0:q.display_name)||((re=M.channel)==null?void 0:re.provider)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[130px] self-stretch justify-between",children:[i.jsxs("div",{className:"flex flex-col items-end",children:[i.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:kr(M)}),i.jsx("div",{className:"mt-1",children:sr(M)})]}),M.channel_provider||(ce=M.channel)!=null&&ce.provider?i.jsx(vt,{variant:"outline",className:"h-5 px-2 text-[10px] shrink-0",children:zw(String(M.channel_provider||((de=M.channel)==null?void 0:de.provider)))}):i.jsx("span",{})]})]})}),!M.contact_id&&ae&&i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:be=>{be.stopPropagation(),Za(M)},children:i.jsx(Ar,{className:"h-4 w-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Delete conversation"})})]})]},M.id)})})})}),i.jsx(In,{value:"unassigned",className:"mt-0",children:i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:i.jsx("div",{className:"space-y-1",children:Rt.filter(M=>M.status!=="closed"&&!M.assigned).map(M=>{var q,re,ce,de;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Ir(M.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===M.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(Vr,{className:"h-6 w-6",children:[i.jsx(Js,{src:""}),i.jsx(Kr,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-semibold truncate",children:M.contact_name}),i.jsx("p",{className:"text-xs text-gray-600 truncate",children:M.last_message_preview}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Ks,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:((q=M.channel)==null?void 0:q.display_name)||((re=M.channel)==null?void 0:re.provider)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[130px] self-stretch justify-between",children:[i.jsxs("div",{className:"flex flex-col items-end",children:[i.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:kr(M)}),i.jsx("div",{className:"mt-1",children:sr(M)})]}),M.channel_provider||(ce=M.channel)!=null&&ce.provider?i.jsx(vt,{variant:"outline",className:"h-5 px-2 text-[10px] shrink-0",children:zw(String(M.channel_provider||((de=M.channel)==null?void 0:de.provider)))}):i.jsx("span",{})]})]})}),!M.contact_id&&ae&&i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:be=>{be.stopPropagation(),Za(M)},children:i.jsx(Ar,{className:"h-4 w-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Delete conversation"})})]})]},M.id)})})})}),i.jsx(In,{value:"resolved",className:"mt-0",children:i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:i.jsx("div",{className:"space-y-1",children:Rt.filter(M=>M.status==="closed").map(M=>{var q,re,ce;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Ir(M.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===M.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(Vr,{className:"h-6 w-6",children:[i.jsx(Js,{src:""}),i.jsx(Kr,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-semibold truncate",children:M.contact_name}),i.jsx("p",{className:"text-xs text-gray-600 truncate",children:M.last_message_preview}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Ks,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:((q=M.channel)==null?void 0:q.display_name)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[130px] self-stretch justify-between",children:[i.jsxs("div",{className:"flex flex-col items-end",children:[i.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:kr(M)}),i.jsx("div",{className:"mt-1",children:sr(M)})]}),M.channel_provider||(re=M.channel)!=null&&re.provider?i.jsx(vt,{variant:"outline",className:"h-5 px-2 text-[10px] shrink-0",children:zw(String(M.channel_provider||((ce=M.channel)==null?void 0:ce.provider)))}):i.jsx("span",{})]})]})}),!M.contact_id&&ae&&i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:de=>{de.stopPropagation(),Za(M)},children:i.jsx(Ar,{className:"h-4 w-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Delete conversation"})})]})]},M.id)})})})})]}),i.jsx(bb,{open:!!K,onOpenChange:M=>{M||X(null)},children:i.jsxs(Pp,{children:[i.jsxs(Tp,{children:[i.jsx(Ip,{children:"Delete conversation?"}),i.jsx(Rp,{children:"This conversation is not linked to a saved contact. Deleting it will remove all associated messages permanently."})]}),i.jsxs(Op,{children:[i.jsx(Dp,{disabled:V,children:"Cancel"}),i.jsx(Mp,{className:"bg-red-600 hover:bg-red-700",onClick:zl,disabled:V,children:V?"Deleting":"Delete"})]})]})})]}),i.jsx("article",{className:"flex min-h-[70vh] flex-col rounded-lg border bg-card",children:it?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 border-b px-4 py-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Vr,{className:"h-10 w-10",children:[i.jsx(Js,{src:""}),i.jsx(Kr,{className:"text-sm",children:it.contact_name.charAt(0)})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-base font-semibold leading-tight",children:it.contact_name}),it.contact_phone&&i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:it.contact_phone})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Ji,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),i.jsx(Je,{value:f,onChange:M=>d(M.target.value),placeholder:"Search messages",className:"pl-7 h-8 w-44 text-xs"})]}),b&&i.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx("span",{className:"text-xs font-medium min-w-[48px] text-right",children:ue>0?`${g+1}/${ue}`:"0/0"}),i.jsx(ne,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:dt,disabled:ue===0,"aria-label":"Temukan sebelumnya",children:i.jsx(VL,{className:"h-4 w-4"})}),i.jsx(ne,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Ae,disabled:ue===0,"aria-label":"Temukan berikutnya",children:i.jsx(wa,{className:"h-4 w-4"})})]})]}),it.status!=="closed"&&i.jsx(ne,{size:"sm",className:"h-8 bg-green-600 hover:bg-green-700 text-white disabled:opacity-60",onClick:async()=>{if(it.status==="closed")return;const{error:M}=await wt.from("threads").update({status:"closed",resolved_at:new Date().toISOString(),resolved_by_user_id:(F==null?void 0:F.id)??null,handover_reason:null}).eq("id",it.id);M?Le.error("Failed to resolve"):(Le.success("Conversation resolved"),await S(),u("resolved"))},children:"Resolve"}),i.jsx(vt,{className:it.assigned?"bg-success text-success-foreground hover:bg-success":"bg-secondary text-secondary-foreground hover:bg-secondary",children:it.assigned?"Assigned":"Unassigned"})]})]}),i.jsx(fb,{viewportRef:x,className:"flex-1 p-4",children:i.jsx("div",{className:"space-y-2",children:k.length===0?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No messages yet. Start the conversation!"}):we.map(M=>{if(M.type==="date")return i.jsx("div",{className:"flex justify-center my-4",children:i.jsx("span",{className:"rounded-full bg-muted px-3 py-1 text-xs font-medium text-muted-foreground",children:M.label})},M.key);const q=M.message;return i.jsx("div",{ref:re=>{y.current[q.id]=re},children:i.jsx(Sle,{message:q,isLastMessage:q.id===H,highlighted:h===q.id,matches:en[q.id]??[],activeMatchOrder:(Pe==null?void 0:Pe.messageId)===q.id?Pe.order:-1})},M.key)})})}),i.jsx("div",{className:"border-t p-3",children:it.status!=="closed"&&(it.assigned?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{placeholder:`Message ${it.contact_name}...`,value:a,onChange:M=>s(M.target.value),onKeyDown:Ra,className:"flex-1",disabled:!z("messages.create")}),i.jsx(ne,{type:"button",onClick:_r,disabled:!a.trim()||!z("messages.create"),title:z("messages.create")?"Send message":"No permission to send messages","aria-label":"Send message",children:i.jsx(em,{className:"h-4 w-4"})})]}):i.jsx(Wt,{permission:"threads.update",children:i.jsx(ne,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:fa,disabled:!(F!=null&&F.id),children:"Takeover Chat"})}))})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Ks,{className:"h-12 w-12 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No conversation selected"}),i.jsx("p",{children:"Select a conversation from the sidebar to start chatting"})]})})}),i.jsx("aside",{className:"rounded-lg border bg-card p-4",children:it?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold",children:it.contact_name||"Unknown Contact"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Ks,{className:"h-4 w-4 text-blue-500"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(vt,{variant:"outline",className:"text-xs",children:((Mr=it.channel)==null?void 0:Mr.display_name)||((Ai=it.channel)==null?void 0:Ai.provider)||"Unknown"}),((Ei=it.channel)==null?void 0:Ei.type)&&i.jsx(vt,{variant:"secondary",className:"text-xs",children:it.channel.type})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Handled By"}),i.jsx(yle,{options:oe,value:Be,onChange:async M=>{if(it){try{const q=it.id,re=M;Ee([]);try{const ce=new Set([re,(F==null?void 0:F.id)||""].filter(Boolean)),{data:de}=await wt.from("thread_collaborators").select("user_id").eq("thread_id",q),Ve=(de||[]).map(ot=>String(ot.user_id)).filter(ot=>!ce.has(ot));Ve.length>0&&await wt.from("thread_collaborators").delete().eq("thread_id",q).in("user_id",Ve)}catch(ce){console.warn("Failed to clear collaborators on handled-by change",ce)}}catch{}gt({threadId:it.id,userId:M}),await U(it.id,M)}},placeholder:"Assign Agent",searchPlaceholder:"Search agent...",className:"w-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Collaborators"}),i.jsx(ble,{options:yt,value:Te,onChange:()=>{},onAdd:He,onRemove:lt,placeholder:Be?"Add Collaborator":"Select handled by first",searchPlaceholder:"Search agent...",className:"w-full",disabled:!Be})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium mb-3",children:"Conversation Details"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Assigned By"}),i.jsx("span",{children:it.assigned_by_name||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Handled By"}),i.jsx("span",{children:Be&&Me(Be)||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Resolved By"}),i.jsx("span",{children:it.resolved_by_name||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"AI Handoff At"}),i.jsx("span",{children:it.ai_handoff_at?new Date(it.ai_handoff_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Assigned At"}),i.jsx("span",{children:it.assigned_at?new Date(it.assigned_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Created At"}),i.jsx("span",{children:it.created_at?new Date(it.created_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Resolved At"}),i.jsx("span",{children:it.resolved_at?new Date(it.resolved_at).toLocaleString():""})]})]})]})]}):i.jsx("div",{className:"text-sm text-muted-foreground",children:"No conversation selected"})})]})}var wb="Checkbox",[Cle,H3e]=wr(wb),[Ale,fC]=Cle(wb);function Ele(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:s,form:o,name:l,onCheckedChange:c,required:u,value:f="on",internal_do_not_use_render:d}=e,[h,m]=Pa({prop:n,defaultProp:a??!1,onChange:c,caller:wb}),[g,v]=p.useState(null),[x,y]=p.useState(null),b=p.useRef(!1),w=g?!!o||!!g.closest("form"):!0,k={checked:h,disabled:s,setChecked:m,control:g,setControl:v,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:fl(a)?!1:a,isFormControl:w,bubbleInput:x,setBubbleInput:y};return i.jsx(Ale,{scope:t,...k,children:Ple(d)?d(k):r})}var VU="CheckboxTrigger",KU=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:s,value:o,disabled:l,checked:c,required:u,setControl:f,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=fC(VU,e),v=St(a,f),x=p.useRef(c);return p.useEffect(()=>{const y=s==null?void 0:s.form;if(y){const b=()=>d(x.current);return y.addEventListener("reset",b),()=>y.removeEventListener("reset",b)}},[s,d]),i.jsx(Ye.button,{type:"button",role:"checkbox","aria-checked":fl(c)?"mixed":c,"aria-required":u,"data-state":QU(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:v,onKeyDown:Ie(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:Ie(n,y=>{d(b=>fl(b)?!0:!b),g&&m&&(h.current=y.isPropagationStopped(),h.current||y.stopPropagation())})})});KU.displayName=VU;var hC=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:s,required:o,disabled:l,value:c,onCheckedChange:u,form:f,...d}=e;return i.jsx(Ele,{__scopeCheckbox:n,checked:a,defaultChecked:s,disabled:l,required:o,onCheckedChange:u,name:r,form:f,value:c,internal_do_not_use_render:({isFormControl:h})=>i.jsxs(i.Fragment,{children:[i.jsx(KU,{...d,ref:t,__scopeCheckbox:n}),h&&i.jsx(JU,{__scopeCheckbox:n})]})})});hC.displayName=wb;var GU="CheckboxIndicator",YU=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,s=fC(GU,n);return i.jsx(mr,{present:r||fl(s.checked)||s.checked===!0,children:i.jsx(Ye.span,{"data-state":QU(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});YU.displayName=GU;var XU="CheckboxBubbleInput",JU=p.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:s,defaultChecked:o,required:l,disabled:c,name:u,value:f,form:d,bubbleInput:h,setBubbleInput:m}=fC(XU,e),g=St(n,m),v=lC(s),x=dN(r);p.useEffect(()=>{const b=h;if(!b)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set,_=!a.current;if(v!==s&&j){const S=new Event("click",{bubbles:_});b.indeterminate=fl(s),j.call(b,fl(s)?!1:s),b.dispatchEvent(S)}},[h,v,s,a]);const y=p.useRef(fl(s)?!1:s);return i.jsx(Ye.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:l,disabled:c,name:u,value:f,form:d,...t,tabIndex:-1,ref:g,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});JU.displayName=XU;function Ple(e){return typeof e=="function"}function fl(e){return e==="indeterminate"}function QU(e){return fl(e)?"indeterminate":e?"checked":"unchecked"}const vm=p.forwardRef(({className:e,...t},n)=>i.jsx(hC,{ref:n,className:ke("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(YU,{className:ke("flex items-center justify-center text-current"),children:i.jsx(Ty,{className:"h-4 w-4"})})}));vm.displayName=hC.displayName;const jb=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:ke("w-full caption-bottom text-sm",e),...t})}));jb.displayName="Table";const _b=p.forwardRef(({className:e,...t},n)=>i.jsx("thead",{ref:n,className:ke("[&_tr]:border-b",e),...t}));_b.displayName="TableHeader";const kb=p.forwardRef(({className:e,...t},n)=>i.jsx("tbody",{ref:n,className:ke("[&_tr:last-child]:border-0",e),...t}));kb.displayName="TableBody";const Tle=p.forwardRef(({className:e,...t},n)=>i.jsx("tfoot",{ref:n,className:ke("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Tle.displayName="TableFooter";const Qs=p.forwardRef(({className:e,...t},n)=>i.jsx("tr",{ref:n,className:ke("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Qs.displayName="TableRow";const zn=p.forwardRef(({className:e,...t},n)=>i.jsx("th",{ref:n,className:ke("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));zn.displayName="TableHead";const On=p.forwardRef(({className:e,...t},n)=>i.jsx("td",{ref:n,className:ke("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));On.displayName="TableCell";const Ole=p.forwardRef(({className:e,...t},n)=>i.jsx("caption",{ref:n,className:ke("mt-4 text-sm text-muted-foreground",e),...t}));Ole.displayName="TableCaption";const Ua=p.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:ke("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Ua.displayName="Textarea";const Ile=e=>String(e??"").replace(/\s+/g," ").trim().slice(0,200)||"",Rle=e=>{const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})},Mle=e=>{const t=e.trim().toLowerCase();return t==="telegram"||t==="tele"?"Tele":t==="whatsapp"||t==="wa"?"WhatsApp":t==="web"?"Web":e};function Dle({open:e,onOpenChange:t,contact:n,onSelectThread:r}){const[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState([]),[f,d]=p.useState("");p.useEffect(()=>{if(!e||!(n!=null&&n.id))return;let g=!0;return(async()=>{try{s(!0),l(null),await Id();const{data:x,error:y}=await wt.from("threads").select(`
            id,
            contact_id,
            channel_id,
            status,
            last_msg_at,
            created_at,
            channels!inner(id, display_name, provider, type, logo_url, profile_photo_url, external_id),
            messages(id, body, role, direction, created_at, seq)
          `).eq("contact_id",n.id).order("last_msg_at",{ascending:!1}).order("created_at",{foreignTable:"messages",ascending:!1}).limit(1,{foreignTable:"messages"});if(!g)return;if(y)throw y;const b=(x||[]).map(j=>{const _=Array.isArray(j.messages)&&j.messages.length>0?j.messages[0]:null,S=Ile(_==null?void 0:_.body),T=(_==null?void 0:_.created_at)??j.last_msg_at??null;return{id:String(j.id),contact_id:String(j.contact_id),channel_id:String(j.channel_id),status:j.status,last_msg_at:T,created_at:String(j.created_at),channel:j.channels?{id:String(j.channels.id),display_name:j.channels.display_name??null,provider:j.channels.provider??null,type:j.channels.type??null,logo_url:j.channels.logo_url??null,profile_photo_url:j.channels.profile_photo_url??null,external_id:j.channels.external_id??null}:null,last_message_preview:S}}),w=new Map;for(const j of b)w.has(j.channel_id)||w.set(j.channel_id,j);const k=Array.from(w.values()).sort((j,_)=>{const S=new Date(j.last_msg_at??j.created_at??0).getTime();return new Date(_.last_msg_at??_.created_at??0).getTime()-S});u(k)}catch(x){if(!g)return;const y=x instanceof Error?x.message:"Failed to load conversations";l(y),u([])}finally{if(!g)return;s(!1)}})(),()=>{g=!1}},[e,n==null?void 0:n.id]);const h=p.useMemo(()=>{const g=f.trim().toLowerCase();return g?c.filter(v=>{var w,k;const x=String(((w=v.channel)==null?void 0:w.display_name)||"").toLowerCase(),y=String(((k=v.channel)==null?void 0:k.provider)||"").toLowerCase(),b=String(v.last_message_preview||"").toLowerCase();return x.includes(g)||y.includes(g)||b.includes(g)}):c},[c,f]),m=(n==null?void 0:n.name)||(n==null?void 0:n.phone)||"Contact";return i.jsx(cn,{open:e,onOpenChange:t,children:i.jsxs(nn,{className:"sm:max-w-[720px] max-h-[80vh] overflow-hidden",children:[i.jsx(rn,{children:i.jsxs(an,{className:"flex items-center gap-2 pr-10",children:[i.jsxs("span",{className:"min-w-0 truncate",children:["Conversations for ",m]}),i.jsx(vt,{variant:"secondary",className:"shrink-0",children:c.length})]})}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ji,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Je,{value:f,onChange:g=>d(g.target.value),placeholder:"Search by channel or message",className:"pl-9",autoFocus:!0})]})}),i.jsx(Ed,{}),i.jsx("div",{className:"max-h-[52vh] overflow-y-auto pr-1 pb-2",children:i.jsx("div",{className:"space-y-2 p-1 pb-2",children:a?i.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-sm text-muted-foreground",children:[i.jsx(zt,{className:"h-4 w-4 animate-spin"}),"Loading conversations"]}):o?i.jsx("div",{className:"py-10 text-center text-sm text-destructive",children:o}):h.length===0?i.jsx("div",{className:"py-10 text-center text-sm text-muted-foreground",children:f.trim()?"No threads match your search.":"No conversations for this contact yet."}):h.map(g=>{var w,k;const v=((w=g.channel)==null?void 0:w.display_name)||"Channel",x=(((k=g.channel)==null?void 0:k.provider)||"").toString(),y=x?Mle(x):"",b=g.last_msg_at||g.created_at;return i.jsxs(ne,{type:"button",variant:"ghost",className:"w-full justify-between gap-3 rounded-lg border border-border bg-card px-3 py-3 text-left hover:bg-muted/60 h-auto",onClick:()=>r(g),children:[i.jsxs("div",{className:"flex min-w-0 items-start gap-3",children:[i.jsx("div",{className:"mt-0.5 rounded-md bg-blue-600/10 p-2 text-blue-700",children:i.jsx(Ks,{className:"h-4 w-4"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"min-w-0 truncate font-medium",children:v}),i.jsx(vt,{variant:g.status==="closed"?"secondary":g.status==="pending"?"outline":"default",className:"capitalize",children:g.status})]}),i.jsx("div",{className:"mt-1 line-clamp-2 text-xs text-muted-foreground",children:g.last_message_preview})]})]}),i.jsxs("div",{className:"flex shrink-0 items-center gap-2 self-stretch",children:[i.jsxs("div",{className:"flex h-full flex-col items-end justify-between",children:[i.jsx("div",{className:"text-xs text-muted-foreground whitespace-nowrap",children:Rle(b)}),y?i.jsx(vt,{variant:"outline",className:"h-5 px-2 text-[10px]",children:y}):i.jsx("span",{})]}),i.jsx(fp,{className:"h-4 w-4 text-muted-foreground"})]})]},g.id)})})}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Each channel can have only one thread for a contact (unless an admin deletes the previous thread)."})]})})}function $le(){var mt,en,ue,Pe;const{hasRole:e}=br(),t=e("master_agent"),[n,r]=p.useState([]),[a,s]=p.useState(1),[o,l]=p.useState(""),[c,u]=p.useState(100),[f,d]=p.useState(null),[h,m]=p.useState(!0),[g,v]=p.useState(!1),[x,y]=p.useState({chatStatus:"",handledBy:"",dateRange:{}}),[b,w]=p.useState(!1),[k,j]=p.useState(!1),[_,S]=p.useState(!1),[T,N]=p.useState(""),[A,D]=p.useState(""),[B,E]=p.useState(""),[R,P]=p.useState(!1),[U,L]=p.useState(!1),[O,F]=p.useState(null),[C,z]=p.useState(!1),[I,$]=p.useState(null),K=Qa(),{hasPermission:X}=br(),V=X("contacts.delete"),{contacts:W,loading:ae,error:G,totalCount:le,fetchContacts:se,deleteContact:Q,updateContact:_e,deleteMultipleContacts:xe}=dC();p.useEffect(()=>{const H=setTimeout(()=>{se(a,c,o,x)},300);return()=>clearTimeout(H)},[o,a,c,x]);const J=H=>{r(H?W.map(we=>we.id):[])},fe=(H,we)=>{r(we?[...n,H]:n.filter(ge=>ge!==H))},Ce=()=>{if(n.length!==0){if(!V){Le.error("You do not have permission to delete contacts");return}j(!0)}},Te=H=>{$(H),z(!0)},Ee=H=>{if(!I)return;const we=new URLSearchParams({menu:"chat",contact:I.id,thread:H.id});z(!1),K({pathname:"/chat",search:we.toString()}),Le.success(`Opening conversation with ${I.name||"contact"}`)},ze=H=>{F(H),L(!0)},gt=H=>{F(H),N(H.name||""),D(H.phone||""),E(H.notes||""),S(!0)},ut=async()=>{try{await xe(n),r([]),j(!1),Le.success(`Successfully deleted ${n.length} contact(s)`)}catch{Le.error("Failed to delete contacts")}},ee=async()=>{if(O)try{P(!0),await _e(O.id,{name:T.trim()||null,phone:A.trim()||null,notes:B.trim()||null}),Le.success("Contact updated"),S(!1)}catch{Le.error("Failed to update contact")}finally{P(!1)}},We=()=>{se(a,c,o,x),Le.info("Contacts refreshed")},st=(H,we)=>{y(ge=>({...ge,[H]:we}))},oe=(H,we)=>{y(ge=>({...ge,dateRange:{...ge.dateRange,[H]:we}}))},ve=()=>{y({chatStatus:"",handledBy:"",dateRange:{}})},De=Object.values(x).some(H=>typeof H=="string"?H!=="":Object.values(H).some(we=>we!=="")),Me=n.length===W.length&&W.length>0,Z=n.length>0&&n.length<W.length,Be=H=>{f===H?m(!h):(d(H),m(!0))},xt=(()=>{if(!f)return W;const H=[...W];return H.sort((we,ge)=>{const Ue=we[f],tt=ge[f];if(Ue==null&&tt==null)return 0;if(Ue==null)return h?1:-1;if(tt==null)return h?-1:1;if(f==="chatCreatedAtISO"||f==="created_at"){const Se=new Date(Ue).getTime(),Ae=new Date(tt).getTime();return h?Se-Ae:Ae-Se}const te=String(Ue).toLowerCase(),ye=String(tt).toLowerCase();return te<ye?h?-1:1:te>ye?h?1:-1:0}),H})(),yt=(()=>{let H=xt;return x.handledBy&&x.handledBy!==""&&(H=H.filter(we=>we.handledBy===x.handledBy)),H})(),He=yt.length,lt=H=>{if(!H||H==="")return i.jsx("span",{className:"text-muted-foreground",children:""});const we=H==="open"?"bg-blue-100 text-blue-700":H==="pending"?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700";return i.jsx(vt,{className:`${we} border-0`,children:H})};return i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Contacts"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total Contacts: ",ae?"...":`${He.toLocaleString()} of ${le.toLocaleString()}`]})]}),i.jsxs("div",{className:"flex gap-4 items-center justify-between",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs(hi,{open:g,onOpenChange:v,children:[i.jsx(mi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:"gap-2",children:[i.jsx(JL,{className:"w-4 h-4"}),"Filter",De&&i.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]})}),i.jsx(Wa,{className:"w-80 p-4",align:"start",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-medium",children:"Filter Contacts"}),De&&i.jsx(ne,{variant:"ghost",size:"sm",onClick:ve,className:"h-8 px-2 text-xs",children:"Clear All"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Chat Status"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Filter berdasarkan status percakapan: Open (terbuka), Pending (menunggu), atau Closed (tertutup)"})})]})]}),i.jsxs(qt,{value:x.chatStatus,onValueChange:H=>st("chatStatus",H==="all"?"":H),children:[i.jsx(Lt,{className:"h-8",children:i.jsx(It,{placeholder:"All statuses"})}),i.jsxs(Ft,{children:[i.jsx(Ge,{value:"all",children:"All statuses"}),i.jsx(Ge,{value:"open",children:"Open"}),i.jsx(Ge,{value:"pending",children:"Pending"}),i.jsx(Ge,{value:"closed",children:"Closed"})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Handled By"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Filter berdasarkan siapa yang menangani percakapan: Assigned (ditugaskan ke agen) atau Unassigned (belum ditugaskan)"})})]})]}),i.jsxs(qt,{value:x.handledBy||"",onValueChange:H=>st("handledBy",H==="all"?"":H),children:[i.jsx(Lt,{className:"h-8",children:i.jsx(It,{placeholder:"All agents"})}),i.jsxs(Ft,{children:[i.jsx(Ge,{value:"all",children:"All"}),i.jsx(Ge,{value:"assigned",children:"Assigned"}),i.jsx(Ge,{value:"unassigned",children:"Unassigned"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Filter berdasarkan rentang tanggal kontak dibuat. Pilih tanggal mulai dan tanggal akhir untuk membatasi hasil pencarian"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("div",{children:i.jsx(Je,{type:"date",placeholder:"From",value:x.dateRange.from,onChange:H=>oe("from",H.target.value),className:"h-8 text-xs"})}),i.jsx("div",{children:i.jsx(Je,{type:"date",placeholder:"To",value:x.dateRange.to,onChange:H=>oe("to",H.target.value),className:"h-8 text-xs"})})]})]})]})]})})]}),i.jsxs("div",{className:"relative",children:[i.jsx(Ji,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),i.jsx(Je,{placeholder:"Cari berdasarkan Nama atau Telepon",className:"pl-10 pr-8 w-80",value:o,onChange:H=>l(H.target.value)}),o&&i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("button",{type:"button",onClick:()=>l(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":"Clear search",children:i.jsx(hp,{className:"h-4 w-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Hapus pencarian"})})]})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"outline",size:"sm",onClick:We,disabled:ae,children:i.jsx(Oy,{className:`w-4 h-4 ${ae?"animate-spin":""}`})})}),i.jsx(he,{children:i.jsx("p",{children:"Segarkan daftar kontak"})})]})]}),i.jsxs("div",{className:"flex gap-2",children:[V&&i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs(ne,{variant:n.length>0?"destructive":"outline",className:n.length>0?"bg-red-600 hover:bg-red-700 text-white":"",onClick:Ce,disabled:n.length===0,children:["Delete Selected (",n.length,")"]})}),i.jsx(he,{children:i.jsx("p",{children:"Hapus kontak yang dipilih"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"outline",onClick:async()=>{try{w(!0);const{data:H,error:we}=await wt.from("contacts").select(`
                            id,
                            name,
                            phone,
                            email,
                            notes,
                            created_at,
                            threads!left(
                              status,
                              assignee_user_id,
                              created_at,
                              channels(display_name, provider, type)
                            )
                          `);if(we)throw we;const ge=(H||[]).map(Se=>{var dt,At,dn;const Ae=(Se.threads||[])[0]||null;return{id:Se.id,name:Se.name??"",phone:Se.phone??"",email:Se.email??"",notes:Se.notes??"",contact_created_at:Se.created_at??"",chat_status:(Ae==null?void 0:Ae.status)??"",handled_by:(Ae==null?void 0:Ae.assignee_user_id)??"",chat_channel:((dt=Ae==null?void 0:Ae.channels)==null?void 0:dt.display_name)??"",chat_channel_provider:((At=Ae==null?void 0:Ae.channels)==null?void 0:At.provider)??"",chat_channel_type:((dn=Ae==null?void 0:Ae.channels)==null?void 0:dn.type)??"",chat_created_at:(Ae==null?void 0:Ae.created_at)??""}}),Ue=[["ID","Name","Phone","Email","Notes","Contact Created At","Chat Status","Handled By","Chat Channel","Chat Channel Provider","Chat Channel Type","Chat Created At"].join(","),...ge.map(Se=>{var Ae;return[Se.id,Se.name,Se.phone,Se.email,(Ae=Se.notes)==null?void 0:Ae.replace(/"/g,'""'),Se.contact_created_at,Se.chat_status,Se.handled_by,Se.chat_channel,Se.chat_channel_provider,Se.chat_channel_type,Se.chat_created_at].map(dt=>`"${dt??""}"`).join(",")})].join(`
`),tt=new Blob([Ue],{type:"text/csv;charset=utf-8;"}),te=URL.createObjectURL(tt),ye=document.createElement("a");ye.href=te,ye.setAttribute("download",`contacts-${new Date().toISOString()}.csv`),document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),URL.revokeObjectURL(te),Le.success("Contacts exported to CSV")}catch(H){console.error("Failed to export contacts:",H),Le.error("Failed to export contacts")}finally{w(!1)}},disabled:b,children:b?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"h-4 w-4 animate-spin"}),"Exporting..."]}):"Export"})}),i.jsx(he,{children:i.jsx("p",{children:"Ekspor daftar kontak"})})]})]})]})]}),G&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",G]})}),i.jsx(Oe,{children:i.jsx(Qe,{className:"p-0",children:i.jsxs(jb,{children:[i.jsx(_b,{children:i.jsxs(Qs,{children:[i.jsx(zn,{className:"w-12",children:i.jsx(vm,{checked:Me,onCheckedChange:J,"aria-label":"Select all contacts",className:Z?"data-[state=checked]:bg-blue-600":""})}),i.jsx(zn,{className:"text-xs py-2",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("span",{className:"cursor-help",children:"ACTION"})}),i.jsx(he,{children:i.jsx("p",{children:"Aksi yang dapat dilakukan pada kontak (lihat, edit, hapus)"})})]})}),i.jsx(zn,{className:"text-xs py-2",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Be("name"),children:["NAME ",f==="name"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Nama kontak (klik untuk mengurutkan)"})})]})}),i.jsx(zn,{className:"text-xs py-2",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Be("phone"),children:["PHONE ",f==="phone"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Nomor telepon kontak (klik untuk mengurutkan)"})})]})}),i.jsx(zn,{className:"text-xs py-2",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Be("notes"),children:["NOTE ",f==="notes"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Catatan atau keterangan tambahan kontak (klik untuk mengurutkan)"})})]})}),i.jsx(zn,{className:"text-xs py-2",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Be("inbox"),children:["CHANNEL ",f==="inbox"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Saluran komunikasi kontak (klik untuk mengurutkan)"})})]})}),i.jsx(zn,{className:"text-xs py-2",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Be("channelType"),children:["PLATFORM ",f==="channelType"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Platform komunikasi (WhatsApp, Telegram, dll) (klik untuk mengurutkan)"})})]})}),i.jsx(zn,{className:"text-xs py-2",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Be("chatStatus"),children:["CHAT STATUS ",f==="chatStatus"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Status percakapan (Open, Pending, Closed) (klik untuk mengurutkan)"})})]})}),i.jsx(zn,{className:"text-xs py-2",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Be("chatCreatedAtISO"),children:["CREATED AT ",f==="chatCreatedAtISO"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Tanggal dan waktu kontak dibuat (klik untuk mengurutkan)"})})]})}),i.jsx(zn,{className:"text-xs py-2",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>Be("handledBy"),children:["HANDLED BY ",f==="handledBy"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Agen yang menangani percakapan (klik untuk mengurutkan)"})})]})})]})}),i.jsx(kb,{children:ae?i.jsx(Qs,{children:i.jsx(On,{colSpan:10,className:"text-center py-8",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(zt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Loading contacts..."})]})})}):W.length===0?i.jsx(Qs,{children:i.jsx(On,{colSpan:10,className:"text-center py-8",children:i.jsx("div",{className:"text-muted-foreground",children:o?"No contacts found matching your search.":"No contacts found."})})}):yt.map(H=>{var we;return i.jsxs(Qs,{className:`hover:bg-muted/50 ${n.includes(H.id)?"bg-blue-50":""}`,children:[i.jsx(On,{children:i.jsx(vm,{checked:n.includes(H.id),onCheckedChange:ge=>fe(H.id,ge),"aria-label":`Select ${H.name}`})}),i.jsx(On,{children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-blue-600 hover:bg-blue-700 text-white","aria-label":"View detailed conversation",onClick:()=>Te(H),variant:"ghost",title:"Open conversation",children:i.jsx(Ks,{className:"h-4 w-4"})})}),i.jsx(he,{children:"Open conversation"})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-green-600 hover:bg-green-700 text-white","aria-label":"View contact details",onClick:()=>ze(H),variant:"ghost",title:"View details",children:i.jsx(eN,{className:"h-4 w-4"})})}),i.jsx(he,{children:"View details"})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white","aria-label":"Edit contact",onClick:()=>gt(H),variant:"ghost",title:"Edit contact",children:i.jsx(ya,{className:"h-4 w-4"})})}),i.jsx(he,{children:"Edit contact"})]})]})}),i.jsx(On,{className:"font-medium",children:i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx(Vr,{className:"h-8 w-8",children:i.jsx(Kr,{className:"text-xs",children:(we=(H.name||H.phone||"?")[0])==null?void 0:we.toUpperCase()})}),i.jsx("div",{className:"min-w-0",children:i.jsx("div",{className:"truncate",children:H.name||"Unnamed Contact"})})]})}),i.jsx(On,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:H.phone||"-"}),H.phone&&i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{navigator.clipboard.writeText(H.phone),Le.success("Phone copied")},children:i.jsx(tw,{className:"h-3 w-3"})})}),i.jsx(he,{children:"Copy phone"})]})]})}),i.jsx(On,{children:H.notes?i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("span",{className:"line-clamp-1 max-w-[260px] inline-block align-middle",children:H.notes})}),i.jsx(he,{className:"max-w-sm",children:H.notes})]}):i.jsx("span",{className:"text-muted-foreground",children:"-"})}),i.jsx(On,{children:H.inbox?i.jsx(vt,{variant:"outline",children:H.inbox}):""}),i.jsx(On,{children:H.channelProvider?i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(vt,{variant:"secondary",className:"capitalize",children:H.channelProvider})}):i.jsx("span",{className:"text-muted-foreground",children:""})}),i.jsx(On,{children:lt(H.chatStatus)}),i.jsx(On,{className:"font-mono text-sm whitespace-nowrap",children:H.chatCreatedAt||"-"}),i.jsx(On,{children:H.handledBy&&H.handledBy!==""?i.jsx(vt,{className:"bg-purple-100 text-purple-700 border-0",children:H.handledBy}):i.jsx("span",{className:"text-muted-foreground",children:""})})]},H.id)})})]})})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(ne,{variant:"outline",size:"sm",disabled:a===1||ae,onClick:()=>s(a-1),children:i.jsx(ZS,{className:"w-4 h-4"})}),i.jsxs("span",{className:"text-sm",children:["Page ",i.jsx("span",{className:"font-medium",children:a})," of ",i.jsx("span",{className:"font-medium",children:Math.max(1,Math.ceil(He/c))})]}),i.jsx(ne,{variant:"outline",size:"sm",disabled:a>=Math.ceil(He/c)||ae,onClick:()=>s(a+1),children:i.jsx(fp,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:"Items per page:"}),i.jsxs(qt,{value:c.toString(),onValueChange:H=>u(parseInt(H)),children:[i.jsx(Lt,{className:"w-20 h-8",children:i.jsx(It,{})}),i.jsxs(Ft,{children:[i.jsx(Ge,{value:"50",children:"50"}),i.jsx(Ge,{value:"100",children:"100"}),i.jsx(Ge,{value:"200",children:"200"})]})]}),i.jsx("span",{children:"rows"})]}),i.jsxs("span",{children:["Total: ",i.jsx("span",{className:"font-medium",children:He.toLocaleString()})]})]})]}),i.jsx(bb,{open:k,onOpenChange:j,children:i.jsxs(Pp,{children:[i.jsxs(Tp,{children:[i.jsx(Ip,{children:"Are you sure?"}),i.jsxs(Rp,{children:["This action cannot be undone. This will permanently delete ",n.length," contact",n.length>1?"s":"","."]})]}),i.jsxs(Op,{children:[i.jsx(Dp,{children:"Cancel"}),i.jsxs(Mp,{onClick:ut,className:"bg-red-600 hover:bg-red-700",children:["Delete ",n.length," Contact",n.length>1?"s":""]})]})]})}),i.jsx(cn,{open:_,onOpenChange:S,children:i.jsxs(nn,{children:[i.jsx(rn,{children:i.jsx(an,{children:"Edit Contact"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(qe,{children:"Name"}),i.jsx(Je,{value:T,onChange:H=>N(H.target.value),placeholder:"Full name"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(qe,{children:"Phone"}),i.jsx(Je,{value:A,onChange:H=>D(H.target.value),placeholder:"Phone number"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(qe,{children:"Notes"}),i.jsx(Ua,{value:B,onChange:H=>E(H.target.value),placeholder:"Notes"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx(ne,{variant:"outline",onClick:()=>S(!1),disabled:R,children:"Cancel"}),i.jsx(ne,{onClick:ee,disabled:R,className:"bg-blue-600 hover:bg-blue-700",children:R?"Saving":"Save"})]})]})]})}),i.jsx(cn,{open:U,onOpenChange:L,children:i.jsxs(nn,{className:"max-w-2xl",children:[i.jsx(rn,{children:i.jsxs(an,{className:"flex items-center gap-3",children:[i.jsx(Vr,{className:"h-10 w-10",children:i.jsx(Kr,{children:((en=(mt=O==null?void 0:O.name)==null?void 0:mt[0])==null?void 0:en.toUpperCase())||((Pe=(ue=O==null?void 0:O.phone)==null?void 0:ue[0])==null?void 0:Pe.toUpperCase())||"?"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:(O==null?void 0:O.name)||"Unnamed Contact"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact Details"})]})]})}),O&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Name"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vv,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:O.name||"Unnamed Contact"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(sK,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:O.phone||"-"}),O.phone&&i.jsx(ne,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{navigator.clipboard.writeText(O.phone),Le.success("Phone copied to clipboard")},children:i.jsx(tw,{className:"h-3 w-3"})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),i.jsx("div",{className:"p-3 bg-muted rounded-md",children:O.notes?i.jsx("p",{className:"text-sm",children:O.notes}):i.jsx("span",{className:"text-muted-foreground text-sm",children:"No notes"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Label Names"}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{children:O.labelNames||"-"})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Inbox"}),i.jsx("div",{className:"flex items-center gap-2",children:O.inbox?i.jsx(vt,{variant:"outline",children:O.inbox}):i.jsx("span",{className:"text-muted-foreground",children:""})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Chat Status"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fv,{className:"h-4 w-4 text-muted-foreground"}),lt(O.chatStatus)]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Handled By"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vv,{className:"h-4 w-4 text-muted-foreground"}),O.handledBy&&O.handledBy!==""?i.jsx(vt,{className:"bg-purple-100 text-purple-700 border-0",children:O.handledBy}):i.jsx("span",{className:"text-muted-foreground",children:""})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Contact Created At"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Cc,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-sm",children:O.created_at?new Date(O.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Chat Created At"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Cc,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-sm",children:O.chatCreatedAt||"-"})]})]})]}),t&&O&&i.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[i.jsxs(qe,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[i.jsx(QL,{className:"h-4 w-4"}),"Contact UUID"]}),i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-md",children:[i.jsx("code",{className:"flex-1 font-mono text-xs text-foreground break-all",children:O.id}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 flex-shrink-0",onClick:()=>{navigator.clipboard.writeText(O.id),Le.success("Contact UUID copied to clipboard")},children:i.jsx(tw,{className:"h-4 w-4"})})}),i.jsx(he,{children:"Copy UUID"})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique identifier for this contact. Use this UUID for GDPR deletion requests or system integrations."})]}),i.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[i.jsxs(ne,{onClick:()=>Te(O),className:"flex-1",children:[i.jsx(Ks,{className:"h-4 w-4 mr-2"}),"View Conversation"]}),i.jsxs(ne,{variant:"outline",onClick:()=>gt(O),className:"flex-1",children:[i.jsx(ya,{className:"h-4 w-4 mr-2"}),"Edit Contact"]})]})]})]})}),i.jsx(Dle,{open:C,onOpenChange:H=>{z(H),H||$(null)},contact:I?{id:I.id,name:I.name,phone:I.phone}:null,onSelectThread:Ee})]})}const ZU=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),o=async()=>{try{r(!0),s(null);const{data:{user:d}}=await ie.auth.getUser();if(!d){t([]);return}const{data:h,error:m}=await ie.from("org_members").select("org_id").eq("user_id",d.id);if(m||!h||h.length===0){t([]);return}const g=h.map(D=>D.org_id),{data:v}=await ie.from("user_roles").select("role_id").eq("user_id",d.id);let x=!1,y=!1,b=!1;if(v&&v.length>0){const D=v.map(R=>R.role_id),{data:B}=await ie.from("roles").select("id, name").in("id",D),E=(B||[]).map(R=>(R.name||"").toLowerCase());x=E.includes("master_agent"),y=E.includes("super_agent"),b=E.includes("agent")&&!x&&!y}let w=null;if(b){const{data:D}=await ie.from("channel_agents").select("channel_id").eq("user_id",d.id);w=new Set((D||[]).map(B=>B.channel_id))}const{data:k,error:j}=await ie.from("channels").select(`
          *
        `).in("org_id",g).order("created_at",{ascending:!1});if(j){console.error("Error fetching channels:",j),s(j.message);return}const{data:_,error:S}=await ie.from("org_members").select(`
          org_id,
          user_id,
          role,
          v_users!inner (
            display_name,
            email
          )
        `).in("org_id",g);S&&console.error("Error fetching org members for platforms:",S);const T={};for(const D of _||[]){const B=D.org_id;T[B]||(T[B]=[]),T[B].push(D)}const N=(k||[]).filter(D=>w?w.has(D.id):!0),A=await Promise.all(N.map(async D=>{try{const{data:B}=await ie.from("channel_agents").select("user_id").eq("channel_id",D.id),E=(B||[]).map(U=>U.user_id);let R=[];if(E.length>0){const[U,L]=await Promise.all([ie.from("users_profile").select("user_id, display_name").in("user_id",E),ie.from("v_users").select("id, display_name, email").in("id",E)]),O=U.data||[],F=L.data||[],C={};F.forEach(z=>{C[z.id]={display_name:z.display_name,email:z.email}}),O.forEach(z=>{var I,$;C[z.user_id]={display_name:z.display_name??((I=C[z.user_id])==null?void 0:I.display_name),email:($=C[z.user_id])==null?void 0:$.email}}),R=Object.entries(C).map(([z,I])=>({user_id:z,...I}))}const P=E.map(U=>{const L=R.find(O=>O.user_id===U||O.id===U)||{};return{user_id:U,display_name:L.display_name||(L==null?void 0:L.display_name),email:L.email}});return{...D,provider:D.provider,status:D.is_active?"active":"inactive",human_agents:P,super_agent_id:D.super_agent_id??null,credentials:(D==null?void 0:D.credentials)??null}}catch{return{...D,provider:D.provider,status:D.is_active?"active":"inactive",human_agents:[],super_agent_id:D.super_agent_id??null,credentials:(D==null?void 0:D.credentials)??null}}}));t(A)}catch(d){console.error("Error fetching platforms:",d),s("Failed to fetch platforms")}finally{r(!1)}},l=async d=>{var h;try{s(null);const{data:{user:m}}=await ie.auth.getUser();if(!m)throw new Error("User not authenticated");const{data:g,error:v}=await ie.from("org_members").select("org_id").eq("user_id",m.id).limit(1);if(v)throw v;const x=(h=g==null?void 0:g[0])==null?void 0:h.org_id;if(!x)throw new Error("User not found in any organization");if(!d.ai_profile_id)throw new Error("AI agent is required when creating a platform");const{data:y,error:b}=await ie.from("ai_profiles").select("super_agent_id").eq("id",d.ai_profile_id).single();if(b)throw b;const w=y==null?void 0:y.super_agent_id;if(!w)throw new Error("Selected AI agent does not have a super agent assigned. Please update the AI agent first.");const k=d.provider==="whatsapp"?String(d.display_name||"").toLowerCase().replace(/\s/g,""):null,{data:j,error:_}=await ie.from("channels").insert({org_id:x,display_name:d.display_name,credentials:d.provider==="whatsapp"?{waha_session_name:k}:{},provider:d.provider,type:"inbox",profile_photo_url:d.profile_photo_url,ai_profile_id:d.ai_profile_id,super_agent_id:w,is_active:!0,external_id:d.provider==="whatsapp"?k:null}).select().single();if(_)throw _;if(d.human_agent_ids&&d.human_agent_ids.length>0){const S=d.human_agent_ids.map(N=>({channel_id:j.id,user_id:N})),{error:T}=await ie.from("channel_agents").insert(S);T&&console.warn("Failed to attach channel agents on create:",T)}await o();try{await $t({action:"channel.create",resource:"channel",resourceId:(j==null?void 0:j.id)??null,context:{...d,super_agent_id:w}})}catch{}return j}catch(m){throw console.error("Error creating platform:",m),s(m.message||"Failed to create platform"),m}},c=async(d,h)=>{try{s(null);const m={};if(typeof h.display_name<"u"&&(m.display_name=h.display_name),typeof h.profile_photo_url<"u"&&(m.profile_photo_url=h.profile_photo_url),typeof h.ai_profile_id<"u"&&(m.ai_profile_id=h.ai_profile_id,h.ai_profile_id)){const{data:g,error:v}=await ie.from("ai_profiles").select("super_agent_id").eq("id",h.ai_profile_id).single();if(v)throw v;const x=g==null?void 0:g.super_agent_id;if(!x)throw new Error("Selected AI agent does not have a super agent assigned. Please update the AI agent first.");m.super_agent_id=x}if(typeof h.provider<"u"&&(m.provider=h.provider),Object.keys(m).length>0){const{error:g}=await ie.from("channels").update(m).eq("id",d);if(g)throw g}if(h.human_agent_ids!==void 0){const{error:g}=await ie.from("channel_agents").delete().eq("channel_id",d);if(g&&console.error("Error removing human agents:",g),h.human_agent_ids.length>0){const v=h.human_agent_ids.map(y=>({channel_id:d,user_id:y})),{error:x}=await ie.from("channel_agents").insert(v);x&&console.error("Error adding human agents:",x)}}await o();try{await $t({action:"channel.update",resource:"channel",resourceId:d,context:h})}catch{}}catch(m){throw console.error("Error updating platform:",m),s(m.message||"Failed to update platform"),m}},u=async(d,h,m)=>{const g=[/^image\//i],v=/\.(png|jpe?g|webp)$/i;if(!(g.some(w=>w.test(h.type||""))||v.test(h.name||"")))throw new Error("Only image files are allowed (PNG, JPG, WEBP).");const y=5*1024*1024;if(typeof h.size=="number"&&h.size>y)throw new Error("Image is too large. Maximum size is 5 MB.");async function b(w){try{if(typeof window>"u")return null;const k=document.createElement("img"),j=URL.createObjectURL(w);try{await new Promise((N,A)=>{k.onload=()=>N(),k.onerror=A,k.src=j})}finally{URL.revokeObjectURL(j)}const _=document.createElement("canvas");_.width=k.naturalWidth||k.width,_.height=k.naturalHeight||k.height;const S=_.getContext("2d");return S?(S.drawImage(k,0,0,_.width,_.height),await new Promise(N=>_.toBlob(A=>N(A),"image/png"))):null}catch{return null}}try{const{data:{user:w}}=await ie.auth.getUser();if(!w)throw new Error("User not authenticated");let k=m||"";if(!k){const{data:R,error:P}=await ie.from("channels").select("org_id").eq("id",d).single();if(P)throw P;k=R==null?void 0:R.org_id}if(!k)throw new Error("Missing org_id for channel");const j="channel-assets",_=`${k}/${d}/profile/avatar.png`,S=await b(h),T=S||h,N=S?"image/png":h.type||"image/*",{error:A}=await ie.storage.from(j).upload(_,T,{cacheControl:"31536000",upsert:!0,contentType:N});if(A)throw A;const{data:D}=ie.storage.from(j).getPublicUrl(_),B=D==null?void 0:D.publicUrl,{error:E}=await ie.from("channels").update({logo_url:B,profile_photo_url:B}).eq("id",d);if(E)throw E;try{await $t({action:"channel.avatar.update",resource:"channel",resourceId:d,context:{objectPath:_}})}catch{}return B}catch(w){throw console.error("Error uploading channel avatar:",w),new Error((w==null?void 0:w.message)||"Failed to upload channel avatar")}},f=async(d,h)=>{try{const{data:{user:m}}=await ie.auth.getUser();if(!m)throw new Error("User not authenticated");let g=h||"";if(!g){const{data:b,error:w}=await ie.from("channels").select("org_id").eq("id",d).single();if(w)throw w;g=b==null?void 0:b.org_id}if(!g)throw new Error("Missing org_id for channel");const v="channel-assets",x=`${g}/${d}/profile/avatar.png`;try{await ie.storage.from(v).remove([x])}catch{}const{error:y}=await ie.from("channels").update({logo_url:null,profile_photo_url:null}).eq("id",d);if(y)throw y;try{await $t({action:"channel.avatar.delete",resource:"channel",resourceId:d,context:{objectPath:x}})}catch{}}catch(m){throw console.error("Error deleting channel avatar:",m),new Error((m==null?void 0:m.message)||"Failed to delete channel avatar")}};return p.useEffect(()=>{o()},[]),{platforms:e,loading:n,error:a,fetchPlatforms:o,createPlatform:l,updatePlatform:c,uploadChannelAvatar:u,deleteChannelAvatar:f}},Lle=()=>{const[e,t]=p.useState({}),[n,r]=p.useState(!1),[a,s]=p.useState(null),o=p.useCallback(async l=>{if(!l)return[];try{r(!0),s(null);const{data:c,error:u}=await ie.from("channels").select("*").eq("org_id",l).order("created_at",{ascending:!1});if(u)return s(u.message),[];const f=c||[];return t(d=>({...d,[l]:f})),f}catch(c){return s(c instanceof Error?c.message:"Failed to fetch channels"),[]}finally{r(!1)}},[]);return{channelsByOrg:e,loading:n,error:a,fetchByOrgId:o}},ez=()=>{const{user:e}=Xr(),{userRoles:t,loading:n}=br(),[r,a]=p.useState("none"),[s,o]=p.useState(null),[l,c]=p.useState(!0),[u,f]=p.useState(null),d=p.useMemo(()=>t.map(x=>((x==null?void 0:x.name)??"").toLowerCase()),[t]),h=d.includes("master_agent"),m=d.includes("super_agent"),g=d.includes("agent");return p.useEffect(()=>{let x=!0;const y=(b,w,k)=>{x&&((k==null?void 0:k.loading)!==void 0&&c(k.loading),(k==null?void 0:k.error)!==void 0&&f(k.error),a(b),o(w))};return e!=null&&e.id?n?(c(!0),()=>{x=!1}):h?(y("all",null,{loading:!1,error:null}),()=>{x=!1}):m?(y("super",e.id,{loading:!1,error:null}),()=>{x=!1}):g?(c(!0),f(null),(async()=>{try{await Id();const{data:b,error:w}=await ie.from("super_agent_members").select("super_agent_id").eq("agent_user_id",e.id).maybeSingle();if(!x)return;if(w)throw w;const k=(b==null?void 0:b.super_agent_id)??null;k?y("agent",k,{loading:!1,error:null}):y("none",null,{loading:!1,error:"Agent belum memiliki Super Agent penanggung jawab."})}catch(b){if(!x)return;console.error("Failed to resolve agent super scope",b),y("none",null,{loading:!1,error:b instanceof Error?b.message:"Gagal memuat cakupan agen AI."})}})(),()=>{x=!1}):(d.length>0?y("all",null,{loading:!1,error:null}):c(!0),()=>{x=!1}):(y("none",null,{loading:!1,error:null}),()=>{x=!1})},[e==null?void 0:e.id,n,h,m,g,d]),{mode:r,superAgentId:s,loading:l,error:u,refresh:async()=>{if(!(e!=null&&e.id)||!g)return s;c(!0),f(null);try{await Id();const{data:x,error:y}=await ie.from("super_agent_members").select("super_agent_id").eq("agent_user_id",e.id).maybeSingle();if(y)throw y;const b=(x==null?void 0:x.super_agent_id)??null;return b?(a("agent"),o(b)):(a("none"),o(null),f("Agent belum memiliki Super Agent penanggung jawab.")),b}catch(x){return console.error("Failed to refresh agent super scope",x),a("none"),o(null),f(x instanceof Error?x.message:"Gagal memuat cakupan agen AI."),null}finally{c(!1)}}}},Sb=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),o=p.useState({current:null})[0],{user:l}=Xr(),{mode:c,superAgentId:u,loading:f,error:d}=ez(),h=p.useMemo(()=>{const g="v2",v=(l==null?void 0:l.id)??"anon";return c==="all"?`app.cachedAIAgents:${g}:${v}:all`:c==="none"?`app.cachedAIAgents:${g}:${v}:none`:`app.cachedAIAgents:${g}:${v}:${u??"none"}`},[c,u,l==null?void 0:l.id]),m=async()=>{if(!f)try{const g=`${c}:${u??"null"}`;if(o.current===g)return;if(o.current=g,r(!0),s(d??null),c==="none"){t([]);try{localStorage.setItem(h,JSON.stringify([]))}catch{}return}await Id();const v="id, org_id, name, description, system_prompt, welcome_message, transfer_conditions, stop_ai_after_handoff, response_temperature, created_at, auto_resolve_after_minutes, enable_resolve, super_agent_id";let x=null,y=null;if(c==="super"||c==="agent"){if(!u){t([]);try{localStorage.setItem(h,JSON.stringify([]))}catch{}return}const{data:b,error:w}=await ie.from("ai_profiles").select(v).eq("super_agent_id",u).order("created_at",{ascending:!1});if(x=b,y=w,(y==null?void 0:y.code)==="42703"){const k=await ie.from("ai_profiles").select(v).order("created_at",{ascending:!1});x=k.data,y=k.error}}else{const{data:b,error:w}=await ie.from("ai_profiles").select(v).order("created_at",{ascending:!1});x=b,y=w}if(y){console.error("Error fetching AI agents:",y),s(y.message),t([]);return}t(x||[]);try{localStorage.setItem(h,JSON.stringify(x||[]))}catch{}}catch(g){console.error("Error fetching AI agents:",g),s("Failed to fetch AI agents"),t([])}finally{o.current=null,r(!1)}};return p.useEffect(()=>{if(f){r(!0);return}if(c==="none"){t([]),s(d??"Tidak ada agen AI yang tersedia untuk akun ini."),r(!1);return}try{const x=localStorage.getItem(h);if(x){const y=JSON.parse(x);Array.isArray(y)&&t(y)}}catch{}const v=setTimeout(()=>m(),50);return()=>clearTimeout(v)},[f,c,d,h]),{aiAgents:e,loading:n||f,error:a,fetchAIAgents:m,scopeMode:c,superAgentId:u}};function Nb({options:e,value:t,onChange:n,onValueChange:r,placeholder:a="Select...",disabled:s,className:o}){const[l,c]=p.useState(!1),u=new Set(t),f=g=>{n&&n(g),r&&r(g)},d=g=>{const v=new Set(u);v.has(g)?v.delete(g):v.add(g),f(Array.from(v))},h=e.filter(g=>u.has(g.value)).map(g=>g.label),m=h.length===0?a:`${h.length} selected`;return i.jsxs(hi,{open:l,onOpenChange:c,children:[i.jsx(mi,{asChild:!0,children:i.jsxs(ne,{type:"button",variant:"outline",role:"combobox","aria-expanded":l,disabled:s,className:ke("justify-between w-64",o),children:[i.jsx("span",{className:"truncate text-left",children:m}),i.jsx("span",{className:"ml-2 text-muted-foreground",children:""})]})}),i.jsx(Wa,{className:"p-0 w-80",align:"start",onOpenAutoFocus:g=>g.preventDefault(),children:i.jsxs(Mc,{children:[i.jsx(Dc,{placeholder:"Search..."}),i.jsxs(yb,{children:[i.jsx($c,{children:"No results found."}),i.jsx(Lc,{children:e.map(g=>i.jsxs(Fc,{onSelect:v=>{d(g.value)},className:"cursor-pointer",children:[i.jsx("div",{className:"mr-2 flex h-4 w-4 items-center justify-center",onClick:v=>{v.preventDefault(),v.stopPropagation(),d(g.value)},children:i.jsx(vm,{checked:u.has(g.value),onCheckedChange:()=>d(g.value)})}),i.jsx("span",{children:g.label})]},g.value))})]})]})})]})}const Fle={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co"},id=Fle??{},tz=e=>e.replace(/\/$/,""),nz=(()=>{const e=id==null?void 0:id.VITE_APP_ORIGIN;return e?tz(e):"https://synkaai.netlify.app"})(),Ble=e=>`${nz}/livechat/${e}`,vv=(()=>{const e=id==null?void 0:id.VITE_WAHA_BASE_URL;return tz(e||"https://waha-plus-production-97c1.up.railway.app")})(),Ule=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=Yc(),{user:s}=Xr(),{hasPermission:o}=br(),{aiAgents:l,loading:c}=Sb(),{agents:u,loading:f}=Ml(),[d,h]=p.useState({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,b]=p.useState(null),[w,k]=p.useState(null),[j,_]=p.useState(null);p.useRef(!1);const[S,T]=p.useState(!1),[N,A]=p.useState(!1),[D,B]=p.useState(null),E=o("channels.create");p.useMemo(()=>D&&u.find(C=>C.primaryRole==="super_agent"&&C.user_id===D)||null,[D,u]);const R=async()=>{if(!s)return null;const{data:C}=await ie.from("org_members").select("org_id").eq("user_id",s.id).single();return(C==null?void 0:C.org_id)||null},P=async()=>{try{x(!0),_(null),b(null);const C=Kn.ENDPOINTS.WHATSAPP.CREATE_SESSION,z=`${Kn.BASE_URL}/ffef6b04-3626-4f9c-8ab8-be3d9971cce3/waha`,I=(d.platformName||"default").replace(/\s/g,""),$={name:I,start:!0,config:{metadata:{"user.id":(s==null?void 0:s.id)||"","user.email":(s==null?void 0:s.email)||""},proxy:null,debug:!1,noweb:{store:{enabled:!0,fullSync:!1}},webhooks:[{url:z,events:["message","session.status","message.reaction","message.any","message.ack","message.waiting","message.revoked","state.change","group.join","group.leave","presence.update","poll.vote","poll.vote.failed","chat.archive","call.received","call.accepted","call.rejected","label.upsert","label.deleted","label.chat.added","label.chat.deleted","engine.event"],hmac:null,retries:null,customHeaders:null}]}};try{const V=await ka(C,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)});if(!V.ok){const W=await V.text();if(V.status!==409)throw new Error(`Create session failed (${V.status}): ${W||"Unknown error"}`)}}catch(V){throw V}const K=await ka(Kn.ENDPOINTS.WHATSAPP.GET_LOGIN_QR,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:I})});if(!K.ok)throw new Error(`Request failed with status ${K.status}`);const X=K.headers.get("content-type");if(X&&X.includes("image/")){const V=await K.blob(),W=URL.createObjectURL(V);return b(W),k(I),x(!1),{qr:W,sessionName:I}}else try{const V=await K.json(),W=Array.isArray(V)?V[0]:V;if(!W||!W.data||!W.mimetype)throw new Error("Invalid QR response shape");const ae=`data:${W.mimetype};base64,${W.data}`;return b(ae),k(I),x(!1),{qr:ae,sessionName:I}}catch{const W=await K.text();if(W&&W.length>0){const ae=`data:image/png;base64,${W}`;return b(ae),k(I),x(!1),{qr:ae,sessionName:I}}else throw new Error("Invalid response format")}return x(!1),null}catch(C){return _((C==null?void 0:C.message)||"Failed to generate QR"),x(!1),null}},U=async()=>{try{const z=await(async()=>{if(w&&w.trim().length>0)return w;try{const K=await R();if(!K)return"default";const{data:X}=await ie.from("channels").select("display_name, provider").eq("org_id",K).eq("provider","whatsapp").order("created_at",{ascending:!1}).limit(1).maybeSingle();return((X==null?void 0:X.display_name)||"").replace(/\s/g,"")||"default"}catch{return"default"}})(),I=`${vv}/api/sessions/${encodeURIComponent(z)}`,$=await fetch(I,{method:"GET",headers:{"Content-Type":"application/json"}});if($.ok){const K=await $.json();return K&&K.status==="WORKING"&&K.me&&K.me.id?(g(!0),b(null),a({title:"Success",description:"WhatsApp connected successfully!"}),!0):(g(!1),!1)}return!1}catch(C){return console.error("Error checking session status:",C),!1}};p.useEffect(()=>{if(!y||m)return;const C=setInterval(async()=>{await U()&&clearInterval(C)},5e3);return()=>clearInterval(C)},[y,m]);const L=!!(d.platformName&&d.selectedAIAgent&&D&&E),O=async()=>{try{T(!0)}finally{T(!1),h({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),g(!1),x(!1),b(null),_(null),B(null),t()}},F=async()=>{try{if(A(!0),!E){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"}),A(!1);return}if(!D||!d.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"}),A(!1);return}if(!await R())throw new Error("User not found in any organization");const z=await P(),I={...d,phoneNumber:void 0,platformType:"whatsapp",selectedSuperAgentId:D};if(await n(I),a({title:"Success",description:"Channel successfully created."}),z)try{window.dispatchEvent(new CustomEvent("open-wa-qr",{detail:{sessionName:z.sessionName,qr:z.qr}}))}catch{}try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}t(),h({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),B(null)}catch(C){console.error("Error submitting form:",C),a({title:"Error",description:C.message||"Failed to create WhatsApp platform",variant:"destructive"})}finally{A(!1)}};return i.jsx(cn,{open:e,onOpenChange:t,children:i.jsx(nn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(rn,{children:[i.jsx(an,{children:"Setup WhatsApp Platform"}),i.jsx(Er,{children:"Configure your new WhatsApp platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"platformName",children:"Platform Name *"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama platform atau merek yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(Je,{id:"platformName",placeholder:"Enter your platform or brand name",value:d.platformName,onChange:C=>h(z=>({...z,platformName:C.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di WhatsApp Business"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:d.profilePhoto?i.jsx("img",{src:URL.createObjectURL(d.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx(Ac,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Je,{id:"profilePhoto",type:"file",accept:"image/*",onChange:C=>{var I;const z=((I=C.target.files)==null?void 0:I[0])||null;h($=>({...$,profilePhoto:z}))},className:"hidden"}),i.jsxs(ne,{variant:"outline",onClick:()=>{var C;return(C=document.getElementById("profilePhoto"))==null?void 0:C.click()},children:[i.jsx(Ac,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"description",children:"Description"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(Ua,{id:"description",placeholder:"Describe your business and what you offer",value:d.description,onChange:C=>h(z=>({...z,description:C.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-xs font-medium text-emerald-700",children:"Super Agent (1 max)"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform WhatsApp ini"})})]})]}),f?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(qt,{value:D||"",onValueChange:C=>{B(C),h(z=>({...z,selectedAIAgent:"",selectedHumanAgents:[]}))},children:[i.jsx(Lt,{children:i.jsx(It,{placeholder:"Choose a Super Agent"})}),i.jsx(Ft,{className:"bg-background border z-50",children:u.filter(C=>C.primaryRole==="super_agent").map(C=>i.jsx(Ge,{value:C.user_id,children:C.display_name||C.email||C.user_id.slice(0,8)},C.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform WhatsApp ini"})})]})]}),c?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(qt,{value:d.selectedAIAgent,onValueChange:C=>{const z=l.find(I=>I.id===C);if(!D){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!z||z.super_agent_id!==D){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}h(I=>({...I,selectedAIAgent:C,selectedHumanAgents:[]}))},children:[i.jsx(Lt,{children:i.jsx(It,{placeholder:D?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(Ft,{className:"bg-background border z-50",children:l.filter(C=>D?C.super_agent_id===D:!1).map(C=>i.jsx(Ge,{value:C.id,children:C.name},C.id))})]})]}),d.selectedAIAgent&&!D&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{children:"Assign Agents"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-xs font-medium",children:["Agents ",D?"":"(select an AI agent first)"]}),(()=>{const z=u.filter(I=>I.primaryRole==="agent").filter(I=>!!D&&I.super_agent_id===D).map(I=>({value:I.user_id,label:I.display_name||I.email||`Agent ${I.user_id.slice(0,8)}`}));return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Nb,{options:z,value:d.selectedHumanAgents,onValueChange:I=>h($=>({...$,selectedHumanAgents:I})),disabled:!D,placeholder:D?"Select human agents":"Select an AI agent first"}),i.jsx(ne,{type:"button",variant:"outline",disabled:!D||z.length===0,onClick:()=>h(I=>({...I,selectedHumanAgents:z.map($=>$.value)})),children:"Select All"}),i.jsx(ne,{type:"button",variant:"ghost",disabled:!D||d.selectedHumanAgents.length===0,onClick:()=>h(I=>({...I,selectedHumanAgents:[]})),children:"Unselect All"})]})})()]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(ne,{variant:"outline",onClick:O,disabled:r||S,className:"text-blue-700 border-blue-200 hover:bg-blue-50",children:S?i.jsxs(i.Fragment,{children:[i.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"Cancelling..."]}):"Cancel"}),i.jsx(ne,{onClick:F,disabled:r||N||!L,className:"bg-blue-100 hover:bg-blue-200 text-blue-700 transition-all duration-200 hover:shadow-md active:scale-[.98]","aria-busy":r||N,children:r||N?i.jsxs(i.Fragment,{children:[i.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create WhatsApp Platform"})]})]})})})},zle=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=Yc(),{user:s}=Xr(),{hasPermission:o}=br(),{aiAgents:l,loading:c}=Sb(),{agents:u,loading:f}=Ml(),{uploadChannelAvatar:d}=ZU(),[h,m]=p.useState({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[g,v]=p.useState(!1),[x,y]=p.useState(null),[b,w]=p.useState(!1),[k,j]=p.useState(null),_=(h.telegramBotToken||"").trim(),S=!!k&&k===_,T=o("channels.create"),N=p.useMemo(()=>x&&u.find(R=>R.primaryRole==="super_agent"&&R.user_id===x)||null,[x,u]),A=!!(h.displayName&&h.selectedAIAgent&&h.telegramBotToken&&x&&T&&S),D=async()=>{if(!s)return null;const{data:R}=await ie.from("org_members").select("org_id").eq("user_id",s.id).single();return(R==null?void 0:R.org_id)||null},B=async()=>{const R=(h.telegramBotToken||"").trim();if(!R){a({title:"Telegram bot token required",description:"Enter your BotFather token before validating.",variant:"destructive"});return}try{w(!0);const P=await D(),U={telegram_bot_token:R};P&&(U.org_id=P);const L=await ka(Kn.ENDPOINTS.TELEGRAM.VERIFY_TOKEN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)});let O=null;try{const C=await L.text();O=C?JSON.parse(C):null}catch{throw new Error("Token is invalid")}if(!L.ok)throw new Error("Token is invalid");if(O===null||typeof O!="object"||Array.isArray(O))throw new Error("Token is invalid");const F=O.valid;if(typeof F!="boolean")throw new Error("Token is invalid");if(F!==!0)throw new Error("Token is invalid");j(R),a({title:"Token validated",description:"Telegram bot token has been successfully verified."})}catch(P){console.error("Telegram token validation failed:",P),j(null);const U=P&&typeof P.message=="string"?P.message:"",L=String(U).toLowerCase();a({title:"Validation failed",description:L.includes("empty")||L.includes("required")?U||"Telegram bot token is required":"Token is invalid",variant:"destructive"})}finally{w(!1)}},E=async()=>{var R;try{if(g)return;if(v(!0),!T){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"}),v(!1);return}if(!x||!h.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"}),v(!1);return}if(!S){a({title:"Token validation required",description:"You must validate the Telegram bot token before creating this platform.",variant:"destructive"}),v(!1);return}const P=await D();if(!P)throw new Error("User not found in any organization");const U=(h.telegramBotToken||"").trim();if(!U)throw new Error("Telegram bot token is required");try{const{data:C}=await ie.from("channels").select("id").eq("provider","telegram").eq("external_id",U).limit(1);if(Array.isArray(C)&&C.length>0){a({title:"Duplicate token",description:"A Telegram bot with this BotFather token already exists.",variant:"destructive"}),v(!1);return}}catch{}const L={brand_name:h.displayName,display_name:h.displayName,description:h.description,telegram_bot_token:h.telegramBotToken,ai_profile_id:h.selectedAIAgent,human_agent_ids:h.selectedHumanAgents,super_agent_id:x,org_id:P,platform_type:"telegram"},O=await ka(Kn.ENDPOINTS.TELEGRAM.CREATE_PLATFORM,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!O.ok)throw new Error(`Telegram webhook failed with status ${O.status}`);let F=null;try{if((O.headers.get("content-type")||"").includes("application/json"))F=await O.json();else{const z=await O.text();try{F=z?JSON.parse(z):null}catch{F={raw:z||null}}}}catch{F=null}try{if(h.profilePhoto){let C=(F==null?void 0:F.channel_id)||(F==null?void 0:F.id)||((R=F==null?void 0:F.channel)==null?void 0:R.id)||null;if(!C){const{data:z}=await ie.from("channels").select("id").eq("org_id",P).eq("provider","telegram").eq("external_id",U).limit(1).maybeSingle();C=(z==null?void 0:z.id)||null}C&&await d(C,h.profilePhoto,P)}}catch(C){console.warn("Telegram avatar upload failed:",C)}a({title:"Success",description:"Telegram channel created successfully"});try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}t(),m({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),y(null)}catch(P){console.error("Error submitting form:",P),a({title:"Error",description:P.message||"Failed to create Telegram platform",variant:"destructive"})}finally{v(!1)}};return i.jsx(cn,{open:e,onOpenChange:t,children:i.jsx(nn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(rn,{children:[i.jsx(an,{children:"Setup Telegram Bot Platform"}),i.jsx(Er,{children:"Configure your new Telegram bot platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"displayName",children:"Display Name *"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama yang akan ditampilkan di widget chat Telegram"})})]})]}),i.jsx(Je,{id:"displayName",placeholder:"Enter the display name",value:h.displayName,onChange:R=>m(P=>({...P,displayName:R.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"description",children:"Description"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(Ua,{id:"description",placeholder:"Describe your business and what you offer",value:h.description,onChange:R=>m(P=>({...P,description:R.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di bot Telegram"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:h.profilePhoto?i.jsx("img",{src:URL.createObjectURL(h.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx(Ac,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Je,{id:"profilePhoto",type:"file",accept:"image/*",onChange:R=>{var U;const P=((U=R.target.files)==null?void 0:U[0])||null;m(L=>({...L,profilePhoto:P}))},className:"hidden"}),i.jsxs(ne,{variant:"outline",onClick:()=>{var R;return(R=document.getElementById("profilePhoto"))==null?void 0:R.click()},children:[i.jsx(Ac,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/50",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx(qe,{className:"text-sm font-medium",children:"Telegram Bot Setup"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Follow these steps to set up your Telegram bot"})]})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 1: Create a bot with BotFather"}),i.jsxs("ol",{className:"list-decimal list-inside text-xs space-y-1 ml-2",children:[i.jsx("li",{children:"Open Telegram and search for @BotFather"}),i.jsx("li",{children:"Send /newbot command"}),i.jsx("li",{children:"Choose a name for your bot (organization name)"}),i.jsx("li",{children:"Choose a username (must end with 'bot')"}),i.jsx("li",{children:"Copy the bot token provided"})]})]}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 2: Configure bot settings"}),i.jsxs("ol",{className:"list-decimal list-inside text-xs space-y-1 ml-2",children:[i.jsx("li",{children:"Send /setdescription to set bot description"}),i.jsx("li",{children:"Send /setabouttext to set about text"}),i.jsx("li",{children:"Send /setcommands to set available commands"})]})]}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 3: Enable webhook (optional)"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Your bot will automatically receive messages once connected to our platform."})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"telegramBotToken",children:"Telegram Bot Token *"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Token bot Telegram yang diperoleh dari @BotFather untuk mengautentikasi bot"})})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{id:"telegramBotToken",type:"password",placeholder:"1234567890:ABCdefGHIjklMNOpqrsTUVwxyz",value:h.telegramBotToken,onChange:R=>{const P=R.target.value;m(U=>({...U,telegramBotToken:P})),j(null)},className:"flex-1"}),i.jsx(ne,{type:"button",variant:S?"outline":"default",className:S?"border-emerald-600 text-emerald-700 hover:bg-emerald-50":"",onClick:B,disabled:b||!h.telegramBotToken,children:b?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(zt,{className:"h-4 w-4 animate-spin"}),"Validating"]}):"Validate"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Get this token from @BotFather on Telegram. Format: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"}),S&&i.jsx("p",{className:"text-xs text-emerald-600",children:"Bot token validated. You can now create this Telegram platform."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{children:"Super Agent *"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform Telegram ini"})})]})]}),f?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(qt,{value:x||"",onValueChange:R=>{y(R),m(P=>({...P,selectedAIAgent:"",selectedHumanAgents:[]}))},children:[i.jsx(Lt,{children:i.jsx(It,{placeholder:"Choose a Super Agent"})}),i.jsx(Ft,{className:"bg-background border z-50",children:u.filter(R=>R.primaryRole==="super_agent").map(R=>i.jsx(Ge,{value:R.user_id,children:R.display_name||R.email||R.user_id.slice(0,8)},R.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform Telegram ini"})})]})]}),c?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(qt,{value:h.selectedAIAgent,onValueChange:R=>{const P=l.find(U=>U.id===R);if(!x){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!P||P.super_agent_id!==x){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}m(U=>({...U,selectedAIAgent:R,selectedHumanAgents:[]}))},children:[i.jsx(Lt,{children:i.jsx(It,{placeholder:x?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(Ft,{className:"bg-background border z-50",children:l.filter(R=>x?R.super_agent_id===x:!1).map(R=>i.jsx(Ge,{value:R.id,children:R.name},R.id))})]}),x&&i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-md bg-muted px-3 py-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:"Super Agent:"}),i.jsx("span",{className:"font-medium",children:(N==null?void 0:N.display_name)||(N==null?void 0:N.email)||x.slice(0,8)})]})]}),h.selectedAIAgent&&!x&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{children:"Select Human Agents (optional)"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):(()=>{const P=u.filter(U=>U.primaryRole==="agent").filter(U=>!!x&&U.super_agent_id===x).map(U=>({value:U.user_id,label:U.display_name||U.email||`Agent ${U.user_id.slice(0,8)}`}));return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Nb,{options:P,value:h.selectedHumanAgents,onValueChange:U=>m(L=>({...L,selectedHumanAgents:U})),disabled:!x,placeholder:x?"Select human agents":"Select an AI agent first"}),i.jsx(ne,{type:"button",variant:"outline",disabled:!x||P.length===0,onClick:()=>m(U=>({...U,selectedHumanAgents:P.map(L=>L.value)})),children:"Select All"}),i.jsx(ne,{type:"button",variant:"ghost",disabled:!x||h.selectedHumanAgents.length===0,onClick:()=>m(U=>({...U,selectedHumanAgents:[]})),children:"Unselect All"})]})})()]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(ne,{variant:"outline",onClick:()=>{g||(m({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),y(null),t())},disabled:r||g,children:"Cancel"}),i.jsx(ne,{onClick:E,disabled:r||g||!A,className:"bg-blue-600 hover:bg-blue-700 text-white",children:r||g?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(zt,{className:"h-4 w-4 animate-spin"})," Creating..."]}):"Create Telegram Bot Platform"})]})]})})})},qle=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=Yc();Xr();const{hasPermission:s}=br(),{aiAgents:o,loading:l}=Sb(),{agents:c,loading:u}=Ml(),[f,d]=p.useState({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[h,m]=p.useState(!1),[g,v]=p.useState(null),x=s("channels.create"),y=p.useMemo(()=>g&&c.find(j=>j.primaryRole==="super_agent"&&j.user_id===g)||null,[g,c]),b=!!(f.displayName&&g&&f.selectedAIAgent&&x),w=async()=>{try{if(h)return;if(!x){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"});return}if(!g||!f.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"});return}m(!0);const j={...f,platformType:"web",selectedSuperAgentId:g};await n(j);try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}d({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),v(null),t()}catch(j){console.error("Error submitting form:",j)}finally{m(!1)}},k=()=>{h||(d({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),v(null),t())};return i.jsx(cn,{open:e,onOpenChange:t,children:i.jsx(nn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(rn,{children:[i.jsx(an,{children:"Setup Web Live Chat Platform"}),i.jsx(Er,{children:"Configure your new web live chat platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"description",children:"Description"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(Ua,{id:"description",placeholder:"Describe your business and what you offer",value:f.description,onChange:j=>d(_=>({..._,description:j.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di widget live chat"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:f.profilePhoto?i.jsx("img",{src:URL.createObjectURL(f.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx(Ac,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Je,{id:"profilePhoto",type:"file",accept:"image/*",onChange:j=>{var S;const _=((S=j.target.files)==null?void 0:S[0])||null;d(T=>({...T,profilePhoto:_}))},className:"hidden"}),i.jsxs(ne,{variant:"outline",onClick:()=>{var j;return(j=document.getElementById("profilePhoto"))==null?void 0:j.click()},children:[i.jsx(Ac,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"displayName",children:"Display Name *"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama yang akan ditampilkan di widget live chat"})})]})]}),i.jsx(Je,{id:"displayName",placeholder:"Name that will appear in the chat widget",value:f.displayName,onChange:j=>d(_=>({..._,displayName:j.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{children:"Super Agent *"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform Live Chat ini"})})]})]}),u?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(qt,{value:g||"",onValueChange:j=>{v(j),d(_=>({..._,selectedAIAgent:"",selectedHumanAgents:[]}))},children:[i.jsx(Lt,{children:i.jsx(It,{placeholder:"Choose a Super Agent"})}),i.jsx(Ft,{className:"bg-background border z-50",children:c.filter(j=>j.primaryRole==="super_agent").map(j=>i.jsx(Ge,{value:j.user_id,children:j.display_name||j.email||j.user_id.slice(0,8)},j.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform Live Chat ini"})})]})]}),l?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(qt,{value:f.selectedAIAgent,onValueChange:j=>{const _=o.find(S=>S.id===j);if(!g){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!_||_.super_agent_id!==g){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}d(S=>({...S,selectedAIAgent:j,selectedHumanAgents:[]}))},children:[i.jsx(Lt,{children:i.jsx(It,{placeholder:g?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(Ft,{className:"bg-background border z-50",children:o.filter(j=>g?j.super_agent_id===g:!1).map(j=>i.jsx(Ge,{value:j.id,children:j.name},j.id))})]}),g&&i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-md bg-muted px-3 py-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:"Super Agent:"}),i.jsx("span",{className:"font-medium",children:(y==null?void 0:y.display_name)||(y==null?void 0:y.email)||g.slice(0,8)})]})]}),f.selectedAIAgent&&!g&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{children:"Assign Agents"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),u?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-xs font-medium",children:["Agents ",g?"":"(select an AI agent first)"]}),(()=>{const _=c.filter(S=>S.primaryRole==="agent").filter(S=>!!g&&S.super_agent_id===g).map(S=>({value:S.user_id,label:S.display_name||S.email||`Agent ${S.user_id.slice(0,8)}`}));return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Nb,{options:_,value:f.selectedHumanAgents,onValueChange:S=>d(T=>({...T,selectedHumanAgents:S})),disabled:!g,placeholder:g?"Select human agents":"Select an AI agent first"}),i.jsx(ne,{type:"button",variant:"outline",disabled:!g||_.length===0,onClick:()=>d(S=>({...S,selectedHumanAgents:_.map(T=>T.value)})),children:"Select All"}),i.jsx(ne,{type:"button",variant:"ghost",disabled:!g||f.selectedHumanAgents.length===0,onClick:()=>d(S=>({...S,selectedHumanAgents:[]})),children:"Unselect All"})]})})})()]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(ne,{variant:"outline",onClick:k,disabled:r||h,children:"Cancel"}),i.jsx(ne,{onClick:w,disabled:r||h||!b,children:r||h?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(zt,{className:"h-4 w-4 animate-spin"})," Creating..."]}):"Create Web Live Chat Platform"})]})]})})})},Wle=()=>{var tt;const{toast:e}=Yc(),{platforms:t,loading:n,error:r,createPlatform:a,fetchPlatforms:s,updatePlatform:o,uploadChannelAvatar:l,deleteChannelAvatar:c}=ZU(),{aiAgents:u,loading:f}=Sb(),{agents:d,loading:h}=Ml(),{fetchByOrgId:m,channelsByOrg:g}=Lle(),{hasRole:v}=br(),[x,y]=p.useState(null),[b,w]=p.useState("whatsapp"),[k,j]=p.useState(""),[_,S]=p.useState(!1),[T,N]=p.useState(null),[A,D]=p.useState(!1),[B,E]=p.useState(!1),[R,P]=p.useState([]),[U,L]=p.useState(!1),[O,F]=p.useState(!1),[C,z]=p.useState(!1),I=p.useRef(null),[$,K]=p.useState([]),[X,V]=p.useState(!1),[W,ae]=p.useState(null),[G,le]=p.useState(new Set),[se,Q]=p.useState(new Set),[_e,xe]=p.useState(null),[J,fe]=p.useState(null),[Ce,Te]=p.useState(null),[Ee,ze]=p.useState(!1),[gt,ut]=p.useState(null),ee=p.useRef(null),[We,st]=p.useState(!1),oe=p.useRef(null),ve=p.useRef(!1),De=p.useRef(0);p.useEffect(()=>{t.length>0&&!x&&y(t[0].id)},[t,x]),p.useEffect(()=>{u.length>0&&!k&&j(u[0].id)},[u,k]);const Me=te=>{const ye=te==null?void 0:te.provider;return ye==="whatsapp"?"whatsapp":ye==="telegram"?"telegram":"web"};p.useEffect(()=>{const te=t.find(ye=>Me(ye)===b);(!x||x&&t.find(ye=>ye.id===x&&Me(ye)!==b))&&y((te==null?void 0:te.id)||null)},[t,b]);const Z=t.find(te=>te.id===x);p.useEffect(()=>{j(Z&&(Z==null?void 0:Z.ai_profile_id)||"")},[Z==null?void 0:Z.id,Z==null?void 0:Z.ai_profile_id]),p.useEffect(()=>{const te=Array.from(new Set(t.map(ye=>ye.org_id)));te.length!==0&&Promise.resolve().then(()=>{te.forEach(ye=>{m(ye)})})},[t]),p.useEffect(()=>{const te=()=>{s()};return window.addEventListener("refresh-platforms",te),()=>window.removeEventListener("refresh-platforms",te)},[s]);const Be=Z?Me(Z):null,xt=(Z==null?void 0:Z.human_agents)||[],yt=v("master_agent")||v("super_agent"),lt=d.filter(te=>te.primaryRole==="agent"&&!xt.some(ye=>ye.user_id===te.user_id)).map(te=>({value:te.user_id,label:te.display_name||te.email||te.user_id.slice(0,8)})),mt=te=>i.jsxs(i.Fragment,{children:[i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsxs(Ze,{className:"text-base flex items-center gap-2",children:["AI Agent",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform ini"})})]})]})}),i.jsx(Qe,{children:f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(qt,{value:k||"",onValueChange:async ye=>{Z&&(await o(Z.id,{ai_profile_id:ye||void 0}),j(ye))},children:[i.jsx(Lt,{children:i.jsx(It,{placeholder:"Choose an AI agent"})}),i.jsx(Ft,{children:u.map(ye=>i.jsxs(Ge,{value:ye.id,children:[" ",ye.name]},ye.id))})]})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsxs(Ze,{className:"text-base flex items-center gap-2",children:["Super Agent",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform ini (hanya master agent yang dapat mengatur)"})})]})]})}),i.jsx(Qe,{children:(()=>{const ye=(Z==null?void 0:Z.super_agent_id)||null,Ae=(d||[]).find(dt=>dt.user_id===ye&&dt.primaryRole==="super_agent")||null;return i.jsxs("div",{className:"text-sm space-y-2",children:[Ae?i.jsxs("div",{className:"inline-flex items-center gap-2 bg-muted px-3 py-1 rounded-md",children:[" ",Ae.display_name||Ae.email||Ae.user_id.slice(0,8)]}):i.jsx("span",{className:"text-muted-foreground",children:"No super agent assigned. Select an AI agent to link a super agent."}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Super agent assignment follows the selected AI agent. To change ownership, switch the AI agent for this platform."})]})})()})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsxs(Ze,{className:"text-base flex items-center gap-2",children:["Human Agent",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]})}),i.jsxs(Qe,{children:[h?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):xt.length>0?i.jsx("div",{className:"flex flex-wrap gap-2",children:xt.map(ye=>i.jsxs("div",{className:"flex items-center gap-2 bg-muted px-3 py-1 rounded-md",children:[i.jsxs("span",{className:"text-sm",children:[" ",ye.display_name||ye.email||ye.user_id]}),yt&&i.jsx(ne,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",disabled:B||!Z,onClick:async()=>{if(Z)try{E(!0);const Se=xt.filter(Ae=>Ae.user_id!==ye.user_id).map(Ae=>Ae.user_id);await o(Z.id,{human_agent_ids:Se})}finally{E(!1)}},children:i.jsx(hp,{className:"h-3 w-3"})})]},ye.user_id))}):i.jsx("p",{className:"text-sm text-muted-foreground",children:"No agents connected"}),yt&&Z&&i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsx(Nb,{options:lt,value:R,onChange:P,placeholder:"Select human agents to add"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Wt,{permission:"channel_agents.update",children:i.jsx(ne,{variant:"outline",disabled:B||R.length===0,onClick:async()=>{if(Z)try{E(!0);const ye=xt.map(Ae=>Ae.user_id),Se=Array.from(new Set([...ye,...R]));await o(Z.id,{human_agent_ids:Se}),P([])}finally{E(!1)}},children:"Add selected"})})}),i.jsx(he,{children:i.jsx("p",{children:"Tambahkan agen manusia yang dipilih ke platform ini"})})]})]})]})]}),te&&i.jsxs(i.Fragment,{children:[i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsxs(Ze,{className:"text-base flex items-center gap-2",children:["Link LiveChat",i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground"})]})}),i.jsx(Qe,{children:i.jsx("div",{className:"bg-muted p-3 rounded-md",children:i.jsx(Je,{value:Ble(String((Z==null?void 0:Z.id)||"{platform_id}")),readOnly:!0,className:"bg-background"})})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsxs(Ze,{className:"text-base flex items-center gap-2",children:["Embed Code",i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground"})]})}),i.jsx(Qe,{children:i.jsx(Ua,{value:`<script>
(function(){
  // Lightweight chat embed - uses YOUR project's origin
  var w=window,d=document; if(w.chatWidgetLoaded) return; w.chatWidgetLoaded=true;
  var cfg=w.chatConfig||{}; cfg.baseUrl=cfg.baseUrl||'${nz}'; cfg.platformId=cfg.platformId||'${(Z==null?void 0:Z.id)||"{platform_id}"}';
  cfg.position=cfg.position||'bottom-right'; cfg.width=cfg.width||'360px'; cfg.height=cfg.height||'560px';
  var css='#chat-bubble{position:fixed;right:20px;bottom:20px;z-index:999999;background:#1d4ed8;color:#fff;border-radius:9999px;width:56px;height:56px;box-shadow:0 8px 20px rgba(0,0,0,.2);border:0;cursor:pointer;font-size:24px;line-height:56px;text-align:center}'+
           '#chat-panel{position:fixed;right:20px;bottom:92px;width:'+cfg.width+';height:'+cfg.height+';max-width:calc(100% - 40px);max-height:70vh;z-index:999999;box-shadow:0 10px 30px rgba(0,0,0,.25);border-radius:12px;overflow:hidden;opacity:0;transform:translateY(10px);pointer-events:none;transition:opacity .2s ease,transform .2s ease;background:#fff}'+
           '#chat-panel.open{opacity:1;transform:translateY(0);pointer-events:auto}';
  var s=d.createElement('style'); s.type='text/css'; s.appendChild(d.createTextNode(css)); d.head.appendChild(s);
  var bubble=d.createElement('button'); bubble.id='chat-bubble'; bubble.setAttribute('aria-label','Open chat'); bubble.innerHTML='';
  var panel=d.createElement('div'); panel.id='chat-panel';
  var iframe=d.createElement('iframe'); iframe.src=cfg.baseUrl+'/livechat/'+encodeURIComponent(cfg.platformId); iframe.style.width='100%'; iframe.style.height='100%'; iframe.style.border='0'; panel.appendChild(iframe);
  bubble.addEventListener('click',function(){ panel.classList.toggle('open'); });
  d.body.appendChild(bubble); d.body.appendChild(panel);
})();
<\/script>`,readOnly:!0,className:"font-mono text-xs h-48 bg-muted"})})]})]})]}),en=te=>{N(te),S(!1)},ue=async te=>{try{D(!0);const ye={display_name:te.displayName||te.platformName||te.brandName,website_url:te.websiteUrl||void 0,business_category:te.businessCategory||void 0,description:te.description||void 0,ai_profile_id:te.selectedAIAgent||void 0,provider:T||"web",human_agent_ids:te.selectedHumanAgents},Se=await a(ye);if(Se&&te.profilePhoto)try{await l(Se.id,te.profilePhoto,Se.org_id)}catch(Ae){e({title:"Avatar upload failed",description:(Ae==null?void 0:Ae.message)||"Could not upload avatar",variant:"destructive"})}e({title:"Success",description:"Platform created successfully!"}),N(null)}catch(ye){e({title:"Error",description:ye.message||"Failed to create platform",variant:"destructive"})}finally{D(!1)}},Pe=async()=>{if(!ve.current){ve.current=!0,V(!0),ae(null);try{const te=`${vv}/api/sessions`,ye=await fetch(te,{method:"GET",headers:{"Content-Type":"application/json"}});if(!ye.ok)throw new Error(`Request failed with status ${ye.status}`);const Se=await ye.json(),Ae=Array.isArray(Se)?Se:[Se];K(Ae),await H(Ae),Date.now()>=De.current&&(De.current=Date.now()+2e3,await s())}catch(te){ae((te==null?void 0:te.message)||"Failed to load sessions")}finally{V(!1),ve.current=!1}}},H=async te=>{var ye,Se,Ae;try{const{data:dt}=await ie.auth.getUser(),At=dt==null?void 0:dt.user;if(!At)return;const{data:dn}=await ie.from("org_members").select("org_id").eq("user_id",At.id).limit(1),Jt=(ye=dn==null?void 0:dn[0])==null?void 0:ye.org_id;if(!Jt)return;const{data:Ht}=await ie.from("channels").select("id, display_name, provider, external_id, credentials").eq("org_id",Jt).eq("provider","whatsapp");for(const Rt of te){const it=(Rt==null?void 0:Rt.name)||"";if(!it)continue;const fa=String((Rt==null?void 0:Rt.status)||"").toUpperCase();let Ir=((Se=Rt==null?void 0:Rt.me)==null?void 0:Se.id)||null;if(!Ir&&fa==="WORKING")try{const Za=`${vv}/api/sessions/${encodeURIComponent(it)}`,Ni=await fetch(Za,{method:"GET",headers:{"Content-Type":"application/json"}});if(Ni.ok){const ls=await Ni.json(),cs=Array.isArray(ls)?ls[0]:ls;Ir=((Ae=cs==null?void 0:cs.me)==null?void 0:Ae.id)||Ir}}catch{}const _r=fa==="WORKING"&&!!Ir,Ra=(it||"").toLowerCase().replace(/\s/g,""),Rr=(Ht||[]).find(Za=>(Za.display_name||"").toLowerCase().replace(/\s/g,"")===Ra);if(!Rr)continue;const sr=Rr!=null&&Rr.credentials&&typeof Rr.credentials=="object"?Rr.credentials:{},kr=it||Ra||null,zl=Ir||(Rr==null?void 0:Rr.external_id)||(sr==null?void 0:sr.waha_session_name)||kr;await ie.from("channels").update({is_active:_r,external_id:zl,credentials:{...sr,waha_status:(Rt==null?void 0:Rt.status)||null,me_id:Ir,waha_session_name:(sr==null?void 0:sr.waha_session_name)||kr}}).eq("id",Rr.id)}}catch(dt){console.error("Failed to sync sessions to channels",dt)}};p.useEffect(()=>{Be==="whatsapp"&&oe.current!=="whatsapp"&&(oe.current="whatsapp",Pe()),Be!=="whatsapp"&&(oe.current=Be||null)},[Be]),p.useEffect(()=>{const te=ye=>{const Se=(ye==null?void 0:ye.detail)||{};fe(Se.qr||null),Se.sessionName&&ut(Se.sessionName),ze(!0)};return window.addEventListener("open-wa-qr",te),()=>window.removeEventListener("open-wa-qr",te)},[]),p.useEffect(()=>((()=>{if(!gt||!Ee)return;const ye=async()=>{var Se;try{if(!gt)return;const Ae=`${vv}/api/sessions/${encodeURIComponent(gt)}`,dt=await fetch(Ae,{method:"GET",headers:{"Content-Type":"application/json"}});if(!dt.ok)return;const At=await dt.json(),dn=String((At==null?void 0:At.status)||"").toUpperCase();if(!!((Se=At==null?void 0:At.me)!=null&&Se.id)&&dn==="WORKING"){ze(!1),fe(null),await Pe();try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}e({title:"Connected",description:"WhatsApp connected successfully."})}}catch{}};ye(),ee.current=window.setInterval(ye,3e3)})(),()=>{ee.current&&(clearInterval(ee.current),ee.current=null)}),[Ee,gt]);const we=async te=>{xe(te),Te(null),fe(null),ze(!0),ut(te);try{const ye=await ka(Kn.ENDPOINTS.WHATSAPP.GET_LOGIN_QR,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:te})});if(!ye.ok)throw new Error(`QR request failed: ${ye.status}`);const Se=ye.headers.get("content-type");if(Se&&Se.includes("image/")){const Ae=await ye.blob();fe(URL.createObjectURL(Ae))}else try{const Ae=await ye.json(),dt=Array.isArray(Ae)?Ae[0]:Ae;if(!(dt!=null&&dt.data)||!(dt!=null&&dt.mimetype))throw new Error("Invalid QR");fe(`data:${dt.mimetype};base64,${dt.data}`)}catch{const Ae=await ye.text();Ae&&fe(`data:image/png;base64,${Ae}`)}}catch(ye){Te((ye==null?void 0:ye.message)||"Failed to get QR")}finally{xe(null)}},ge=async te=>{if(!te)throw new Error("Missing channel");const ye=Me(te);if(ye==="telegram"){const Ae=await ka(Kn.ENDPOINTS.TELEGRAM.DELETE_WEBHOOK,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_id:te.id,org_id:te.org_id,bot_token:(te==null?void 0:te.external_id)||null})});if(!Ae.ok){const dt=await Ae.text().catch(()=>"");throw new Error(dt||`Telegram delete failed (${Ae.status})`)}return}if(ye==="whatsapp"){const Ae=String((te==null?void 0:te.display_name)||"").toLowerCase().replace(/\s/g,""),dt=await ka(Kn.ENDPOINTS.WHATSAPP.DELETE_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_id:te.id,org_id:te.org_id,session_name:Ae})});if(!dt.ok){const At=await dt.text().catch(()=>"");throw new Error(At||`WhatsApp delete failed (${dt.status})`)}return}const{error:Se}=await ie.from("channels").delete().eq("id",te.id);if(Se)throw Se},Ue=async te=>{var ye;if(te){le(Se=>new Set(Se).add(te));try{const Se=await ka(Kn.ENDPOINTS.WHATSAPP.DISCONNECT_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:te})});if(!Se.ok)throw new Error(`Disconnect failed ${Se.status}`);const Ae=Date.now();for(;Date.now()-Ae<2e4;){await Pe();const dt=$.find(Ht=>(Ht.name||"")===te),At=String((dt==null?void 0:dt.status)||"").toUpperCase(),dn=!!((ye=dt==null?void 0:dt.me)!=null&&ye.id);if(!(At==="WORKING"&&dn))break;await new Promise(Ht=>setTimeout(Ht,2e3))}e({title:"Disconnected",description:`Session ${te} disconnected`})}catch(Se){ae((Se==null?void 0:Se.message)||"Failed to disconnect session")}finally{le(Se=>{const Ae=new Set(Se);return Ae.delete(te),Ae})}}};return i.jsxs("div",{className:"flex h-[calc(100vh-120px)]",children:[i.jsx("div",{className:"w-80 border-r border-border bg-card",children:i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h2",{className:"text-lg font-semibold",children:"Platforms"})}),i.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"This is where you can connect all your platforms"}),i.jsx(bl,{value:b,onValueChange:te=>w(te),className:"mb-3",children:i.jsxs(vo,{className:"grid w-full grid-cols-3 bg-muted/50 p-1",children:[i.jsx(Vn,{value:"whatsapp",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("span",{children:"WhatsApp"})}),i.jsx(he,{children:i.jsx("p",{children:"Kelola koneksi WhatsApp Business"})})]})}),i.jsx(Vn,{value:"telegram",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("span",{children:"Telegram"})}),i.jsx(he,{children:i.jsx("p",{children:"Kelola koneksi Bot Telegram"})})]})}),i.jsx(Vn,{value:"web",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("span",{children:"Live Chat"})}),i.jsx(he,{children:i.jsx("p",{children:"Kelola koneksi widget Live Chat"})})]})})]})}),n?i.jsx("div",{className:"space-y-2",children:[1,2,3].map(te=>i.jsx(Oe,{className:"animate-pulse",children:i.jsx(Qe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]})})},te))}):r?i.jsx("div",{className:"text-sm text-red-600 p-4",children:r}):i.jsx("div",{className:"space-y-2",children:t.filter(te=>Me(te)===b).length===0?i.jsx("div",{className:"text-sm text-muted-foreground p-4 text-center",children:"No platforms found. Create your first platform to get started."}):t.filter(te=>Me(te)===b).map(te=>i.jsx(Oe,{className:`cursor-pointer transition-colors hover:bg-muted/50 ${x===te.id?"border-primary shadow-sm":""}`,onClick:()=>y(te.id),children:i.jsx(Qe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted flex items-center justify-center",children:te.profile_photo_url?i.jsx("img",{src:te.profile_photo_url,alt:te.display_name||"Platform",className:"h-10 w-10 rounded-full object-cover"}):i.jsx("span",{className:"text-xs font-medium text-foreground/70",children:(te.display_name||"").charAt(0)||"?"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-medium text-sm truncate",children:te.display_name||"Unnamed Platform"}),i.jsx("p",{className:"text-[11px] text-muted-foreground capitalize",children:Me(te)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:te.description||te.website_url||""})]}),i.jsx("div",{className:`h-2.5 w-2.5 rounded-full ${te.status==="active"?"bg-green-500":"bg-gray-300"}`,"aria-label":te.status==="active"?"Active":"Inactive",title:te.status==="active"?"Active":"Inactive"})]})})},te.id))}),i.jsxs(cn,{open:_,onOpenChange:S,children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(WN,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:"w-full mt-4",children:[i.jsx(As,{className:"h-4 w-4 mr-2"}),"Add Channel"]})})}),i.jsx(he,{children:i.jsx("p",{children:"Tambahkan saluran atau platform baru"})})]}),i.jsxs(nn,{className:"sm:max-w-xl p-0 overflow-hidden",children:[i.jsxs(rn,{className:"p-6 pb-4",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx(an,{className:"text-lg font-semibold",children:"Platform"})}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Select the platform you wish to establish your new inbox."})]}),i.jsxs("div",{className:"px-6 pb-6",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsxs("button",{onClick:()=>en("whatsapp"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(fv,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"WhatsApp"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Connect your WhatsApp Business account"})]}),i.jsxs("button",{onClick:()=>en("web"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(gP,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"Web Live Chat"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Add live chat to your website"})]}),i.jsxs("button",{onClick:()=>en("telegram"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-400 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(em,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"Telegram Bot"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Connect your Telegram bot via BotFather"})]})]}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-xs text-muted-foreground",children:"More platforms coming soon"})})]})]})]}),i.jsx(Ule,{isOpen:T==="whatsapp",onClose:()=>N(null),onSubmit:ue,isSubmitting:A}),i.jsx(zle,{isOpen:T==="telegram",onClose:()=>N(null),onSubmit:ue,isSubmitting:A}),i.jsx(qle,{isOpen:T==="web",onClose:()=>N(null),onSubmit:ue,isSubmitting:A}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Add a new platform inbox"})]})}),i.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:i.jsxs("div",{className:"max-w-4xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:Z!=null&&Z.display_name?Z.display_name.toUpperCase():"Select Platform"}),i.jsx("p",{className:"text-muted-foreground",children:Z?Z.description||Z.website_url||"":"Choose a platform to manage"})]}),i.jsx("div",{className:"flex gap-2",children:Z&&i.jsxs(i.Fragment,{children:[i.jsx(ne,{variant:"outline",size:"sm",disabled:U||!k||k===(Z==null?void 0:Z.ai_profile_id),onClick:async()=>{if(Z)try{L(!0);const te={};if(k&&k!==(Z==null?void 0:Z.ai_profile_id)&&(te.ai_profile_id=k),Object.keys(te).length===0){e({title:"No changes",description:"There are no changes to save."});return}await o(Z.id,te),e({title:"Saved",description:"Platform settings updated."});try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}await s()}catch(te){e({title:"Error",description:(te==null?void 0:te.message)||"Failed to save platform",variant:"destructive"})}finally{L(!1)}},children:U?i.jsx(zt,{className:"h-4 w-4 animate-spin"}):"Save"}),i.jsx(ne,{variant:"outline",size:"sm",disabled:We,onClick:async()=>{if(Z)try{st(!0),await ge(Z),e({title:"Deleted",description:"Channel has been deleted."}),y(null),await s()}catch(te){e({title:"Error",description:(te==null?void 0:te.message)||"Failed to delete channel",variant:"destructive"})}finally{st(!1)}},children:We?i.jsx(zt,{className:"h-4 w-4 animate-spin"}):i.jsx(Ar,{className:"h-4 w-4"})})]})})]}),i.jsxs("div",{className:"grid gap-6",children:[Z?Z&&i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{className:"text-base",children:"Channel Details"})}),i.jsxs(Qe,{className:"space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Provider",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Jenis platform komunikasi yang digunakan (WhatsApp, Telegram, Live Chat)"})})]})]}),i.jsx("div",{className:"capitalize",children:Me(Z)})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Status",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Status koneksi platform saat ini (Aktif atau Tidak Aktif)"})})]})]}),i.jsx("div",{children:Z.status==="active"?"Active":"Inactive"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Display Name",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Nama yang ditampilkan untuk platform ini"})})]})]}),i.jsx("div",{children:Z.display_name||""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["AI Agent",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Agen AI yang ditugaskan untuk menangani percakapan di platform ini"})})]})]}),i.jsx("div",{children:((tt=u.find(te=>te.id===(Z==null?void 0:Z.ai_profile_id)))==null?void 0:tt.name)||""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Created At",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Tanggal dan waktu platform ini dibuat"})})]})]}),i.jsx("div",{children:Z.created_at?new Date(Z.created_at).toLocaleString():""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Secret Token",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Token rahasia untuk autentikasi dan keamanan platform"})})]})]}),i.jsx("div",{children:(()=>{const te=Z==null?void 0:Z.secret_token;return te?te.length>8?`${te.slice(0,4)}${te.slice(-2)}`:"":""})()})]})]}),i.jsxs("div",{className:"rounded-lg border p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-3",children:["Channel Profile",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Kelola foto profil atau logo untuk platform ini"})})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-12 w-12 rounded-full bg-muted flex items-center justify-center overflow-hidden",children:Z!=null&&Z.profile_photo_url?i.jsx("img",{src:(Z==null?void 0:Z.profile_photo_url)||"",alt:"Avatar",className:"h-12 w-12 object-cover"}):i.jsx("span",{className:"text-xs text-foreground/70",children:((Z==null?void 0:Z.display_name)||"?").charAt(0)})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{var te;return(te=I.current)==null?void 0:te.click()},disabled:!Z||O||C,children:O?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(zt,{className:"h-4 w-4 animate-spin"})," Uploading..."]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ac,{className:"h-4 w-4"})," Upload Avatar"]})})}),i.jsx(he,{children:i.jsx("p",{children:"Unggah foto profil atau logo untuk platform ini"})})]}),i.jsx("input",{ref:I,type:"file",accept:"image/png,image/jpeg,image/webp",className:"hidden",onChange:async te=>{var Se;const ye=(Se=te.currentTarget.files)==null?void 0:Se[0];if(!(!ye||!Z))try{F(!0),await l(Z.id,ye,Z.org_id),e({title:"Avatar updated"}),await s()}catch(Ae){e({title:"Avatar upload failed",description:(Ae==null?void 0:Ae.message)||"Please try again",variant:"destructive"})}finally{F(!1);try{te.currentTarget.value=""}catch{}}}}),!!(Z!=null&&Z.logo_url||Z!=null&&Z.profile_photo_url)&&i.jsx(ne,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",disabled:!Z||O||C,onClick:async()=>{if(Z)try{z(!0),await c(Z.id,Z.org_id),await s(),e({title:"Avatar removed"})}catch(te){e({title:"Failed to remove avatar",description:(te==null?void 0:te.message)||"Please try again",variant:"destructive"})}finally{z(!1)}},children:C?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(zt,{className:"h-4 w-4 animate-spin"})," Removing..."]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ar,{className:"h-4 w-4"})," Remove"]})})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-2 text-xs text-muted-foreground",children:["Accepted: PNG, JPG, WEBP  Max 5 MB",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Format file yang didukung: PNG, JPG, WEBP dengan ukuran maksimal 5 MB"})})]})]})]})]})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:i.jsx(fv,{className:"w-8 h-8 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Platform Selected"}),i.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:"Select a platform from the left panel to view its details, manage settings, and configure agents."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 w-full max-w-2xl",children:[i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(fv,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"WhatsApp"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect your WhatsApp business account"})]}),i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(em,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"Telegram"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Set up a Telegram bot for customer support"})]}),i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(gP,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"Live Chat"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Embed chat widget on your website"})]})]})]}),Be==="web"&&i.jsx("div",{className:"grid gap-6",children:mt(!0)}),Be==="whatsapp"&&i.jsxs("div",{className:"grid gap-6",children:[mt(!1),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{className:"text-base",children:"WhatsApp Sessions"})}),i.jsxs(Qe,{children:[X&&i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading sessions..."}),W&&i.jsx("div",{className:"text-sm text-red-600",children:W}),!X&&!W&&i.jsx("div",{className:"space-y-3",children:(()=>{const te=((Z==null?void 0:Z.display_name)||"").toLowerCase().replace(/\s/g,""),ye=$.filter(Se=>((Se==null?void 0:Se.name)||"").toLowerCase().replace(/\s/g,"")===te);return ye.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No session found for this channel."}):ye.map((Se,Ae)=>{var _r,Ra;const dt=((_r=Se==null?void 0:Se.me)==null?void 0:_r.id)||"",At=dt?dt.replace(/@c\.us$/,""):"",dn=((Ra=Se==null?void 0:Se.me)==null?void 0:Ra.pushName)||"-",Jt=String((Se==null?void 0:Se.status)||"UNKNOWN").toUpperCase(),Ht=(Se==null?void 0:Se.name)||"",Rt=G.has(Ht)||se.has(Ht)||_e===Ht,it=!!At,fa=Jt==="SCAN_QR_CODE",Ir=Jt==="WORKING"&&it;return i.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:dn}),i.jsx("div",{className:"text-xs text-muted-foreground",children:fa||!it?"Not connected":At})]}),i.jsx("div",{className:"flex items-center gap-2",children:Ir?i.jsx(ne,{variant:"outline",size:"sm",className:"text-amber-700 border-amber-200 hover:bg-amber-50",disabled:Rt,onClick:()=>Ue(Ht),children:G.has(Ht)?i.jsx(zt,{className:"h-3 w-3 animate-spin"}):"Disconnect"}):i.jsx(ne,{variant:"outline",className:"text-blue-600 border-blue-200 hover:bg-blue-50",size:"sm",disabled:Rt,onClick:()=>we(Ht),children:_e===Ht?i.jsx(zt,{className:"h-3 w-3 animate-spin"}):"Connect"})})]},Ae)})})()})]})]}),i.jsx(cn,{open:Ee,onOpenChange:ze,children:i.jsxs(nn,{className:"sm:max-w-md",children:[i.jsxs(rn,{children:[i.jsx(an,{children:"Connect WhatsApp"}),i.jsx(Er,{children:"Scan this QR with your WhatsApp app to connect."})]}),Ce&&i.jsx("div",{className:"text-sm text-red-600",children:Ce}),J?i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[i.jsx("img",{src:J,alt:"QR",className:"w-56 h-56 rounded border"}),i.jsx(ne,{variant:"outline",onClick:()=>we(gt||((Z==null?void 0:Z.display_name)||"").replace(/\s/g,"")),disabled:!!_e,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:_e?i.jsx(zt,{className:"h-4 w-4 animate-spin"}):"Refresh QR"})]}):i.jsx("div",{className:"flex items-center justify-center h-60",children:i.jsx(zt,{className:"h-6 w-6 animate-spin"})})]})})]}),Be==="telegram"&&i.jsx("div",{className:"grid gap-6",children:mt(!1)})]}),Z&&i.jsx("div",{className:"mt-8",children:i.jsxs(Oe,{className:"bg-red-50 border-2 border-red-200",children:[i.jsx(et,{children:i.jsxs(Ze,{className:"text-base text-red-700 flex items-center gap-2",children:["Danger Zone",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-red-600 cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Zona berbahaya untuk tindakan yang tidak dapat dibatalkan seperti menghapus platform"})})]})]})}),i.jsx(Qe,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-red-700",children:"Delete this channel"}),i.jsx("div",{className:"text-xs text-red-600/80",children:"This action cannot be undone."})]}),i.jsxs(bb,{children:[i.jsx(vle,{asChild:!0,children:i.jsx(ne,{className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Channel"})}),i.jsxs(Pp,{children:[i.jsxs(Tp,{children:[i.jsx(Ip,{children:"Delete channel?"}),i.jsxs(Rp,{children:["This will permanently delete ",(Z==null?void 0:Z.display_name)||"this channel",". This action cannot be undone."]})]}),i.jsxs(Op,{children:[i.jsx(Dp,{children:"Cancel"}),i.jsx(Mp,{className:`bg-red-600 hover:bg-red-700 text-white ${We?"animate-pulse cursor-wait":""}`,"aria-busy":We,disabled:We,onClick:async()=>{if(Z)try{st(!0),await ge(Z),e({title:"Deleted",description:"Channel has been deleted."}),y(null),await s()}catch(te){e({title:"Error",description:(te==null?void 0:te.message)||"Failed to delete channel",variant:"destructive"})}finally{st(!1)}},children:We?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(zt,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Deleting"})]}):"Delete"})]})]})]})]})})]})})]})})]})};var Hle=Array.isArray,Oa=Hle,Vle=typeof nr=="object"&&nr&&nr.Object===Object&&nr,rz=Vle,Kle=rz,Gle=typeof self=="object"&&self&&self.Object===Object&&self,Yle=Kle||Gle||Function("return this")(),Ms=Yle,Xle=Ms,Jle=Xle.Symbol,$p=Jle,GT=$p,az=Object.prototype,Qle=az.hasOwnProperty,Zle=az.toString,Kf=GT?GT.toStringTag:void 0;function ece(e){var t=Qle.call(e,Kf),n=e[Kf];try{e[Kf]=void 0;var r=!0}catch{}var a=Zle.call(e);return r&&(t?e[Kf]=n:delete e[Kf]),a}var tce=ece,nce=Object.prototype,rce=nce.toString;function ace(e){return rce.call(e)}var ice=ace,YT=$p,sce=tce,oce=ice,lce="[object Null]",cce="[object Undefined]",XT=YT?YT.toStringTag:void 0;function uce(e){return e==null?e===void 0?cce:lce:XT&&XT in Object(e)?sce(e):oce(e)}var ko=uce;function dce(e){return e!=null&&typeof e=="object"}var So=dce,fce=ko,hce=So,mce="[object Symbol]";function pce(e){return typeof e=="symbol"||hce(e)&&fce(e)==mce}var pf=pce,gce=Oa,vce=pf,xce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yce=/^\w*$/;function bce(e,t){if(gce(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||vce(e)?!0:yce.test(e)||!xce.test(e)||t!=null&&e in Object(t)}var mC=bce;function wce(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Dl=wce;const gf=un(Dl);var jce=ko,_ce=Dl,kce="[object AsyncFunction]",Sce="[object Function]",Nce="[object GeneratorFunction]",Cce="[object Proxy]";function Ace(e){if(!_ce(e))return!1;var t=jce(e);return t==Sce||t==Nce||t==kce||t==Cce}var pC=Ace;const Ot=un(pC);var Ece=Ms,Pce=Ece["__core-js_shared__"],Tce=Pce,qw=Tce,JT=function(){var e=/[^.]+$/.exec(qw&&qw.keys&&qw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Oce(e){return!!JT&&JT in e}var Ice=Oce,Rce=Function.prototype,Mce=Rce.toString;function Dce(e){if(e!=null){try{return Mce.call(e)}catch{}try{return e+""}catch{}}return""}var iz=Dce,$ce=pC,Lce=Ice,Fce=Dl,Bce=iz,Uce=/[\\^$.*+?()[\]{}|]/g,zce=/^\[object .+?Constructor\]$/,qce=Function.prototype,Wce=Object.prototype,Hce=qce.toString,Vce=Wce.hasOwnProperty,Kce=RegExp("^"+Hce.call(Vce).replace(Uce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Gce(e){if(!Fce(e)||Lce(e))return!1;var t=$ce(e)?Kce:zce;return t.test(Bce(e))}var Yce=Gce;function Xce(e,t){return e==null?void 0:e[t]}var Jce=Xce,Qce=Yce,Zce=Jce;function eue(e,t){var n=Zce(e,t);return Qce(n)?n:void 0}var tu=eue,tue=tu,nue=tue(Object,"create"),Cb=nue,QT=Cb;function rue(){this.__data__=QT?QT(null):{},this.size=0}var aue=rue;function iue(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var sue=iue,oue=Cb,lue="__lodash_hash_undefined__",cue=Object.prototype,uue=cue.hasOwnProperty;function due(e){var t=this.__data__;if(oue){var n=t[e];return n===lue?void 0:n}return uue.call(t,e)?t[e]:void 0}var fue=due,hue=Cb,mue=Object.prototype,pue=mue.hasOwnProperty;function gue(e){var t=this.__data__;return hue?t[e]!==void 0:pue.call(t,e)}var vue=gue,xue=Cb,yue="__lodash_hash_undefined__";function bue(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=xue&&t===void 0?yue:t,this}var wue=bue,jue=aue,_ue=sue,kue=fue,Sue=vue,Nue=wue;function vf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}vf.prototype.clear=jue;vf.prototype.delete=_ue;vf.prototype.get=kue;vf.prototype.has=Sue;vf.prototype.set=Nue;var Cue=vf;function Aue(){this.__data__=[],this.size=0}var Eue=Aue;function Pue(e,t){return e===t||e!==e&&t!==t}var gC=Pue,Tue=gC;function Oue(e,t){for(var n=e.length;n--;)if(Tue(e[n][0],t))return n;return-1}var Ab=Oue,Iue=Ab,Rue=Array.prototype,Mue=Rue.splice;function Due(e){var t=this.__data__,n=Iue(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Mue.call(t,n,1),--this.size,!0}var $ue=Due,Lue=Ab;function Fue(e){var t=this.__data__,n=Lue(t,e);return n<0?void 0:t[n][1]}var Bue=Fue,Uue=Ab;function zue(e){return Uue(this.__data__,e)>-1}var que=zue,Wue=Ab;function Hue(e,t){var n=this.__data__,r=Wue(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Vue=Hue,Kue=Eue,Gue=$ue,Yue=Bue,Xue=que,Jue=Vue;function xf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}xf.prototype.clear=Kue;xf.prototype.delete=Gue;xf.prototype.get=Yue;xf.prototype.has=Xue;xf.prototype.set=Jue;var Eb=xf,Que=tu,Zue=Ms,ede=Que(Zue,"Map"),vC=ede,ZT=Cue,tde=Eb,nde=vC;function rde(){this.size=0,this.__data__={hash:new ZT,map:new(nde||tde),string:new ZT}}var ade=rde;function ide(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var sde=ide,ode=sde;function lde(e,t){var n=e.__data__;return ode(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Pb=lde,cde=Pb;function ude(e){var t=cde(this,e).delete(e);return this.size-=t?1:0,t}var dde=ude,fde=Pb;function hde(e){return fde(this,e).get(e)}var mde=hde,pde=Pb;function gde(e){return pde(this,e).has(e)}var vde=gde,xde=Pb;function yde(e,t){var n=xde(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var bde=yde,wde=ade,jde=dde,_de=mde,kde=vde,Sde=bde;function yf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}yf.prototype.clear=wde;yf.prototype.delete=jde;yf.prototype.get=_de;yf.prototype.has=kde;yf.prototype.set=Sde;var xC=yf,sz=xC,Nde="Expected a function";function yC(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Nde);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var o=e.apply(this,r);return n.cache=s.set(a,o)||s,o};return n.cache=new(yC.Cache||sz),n}yC.Cache=sz;var oz=yC;const Cde=un(oz);var Ade=oz,Ede=500;function Pde(e){var t=Ade(e,function(r){return n.size===Ede&&n.clear(),r}),n=t.cache;return t}var Tde=Pde,Ode=Tde,Ide=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rde=/\\(\\)?/g,Mde=Ode(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ide,function(n,r,a,s){t.push(a?s.replace(Rde,"$1"):r||n)}),t}),Dde=Mde;function $de(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var bC=$de,e2=$p,Lde=bC,Fde=Oa,Bde=pf,Ude=1/0,t2=e2?e2.prototype:void 0,n2=t2?t2.toString:void 0;function lz(e){if(typeof e=="string")return e;if(Fde(e))return Lde(e,lz)+"";if(Bde(e))return n2?n2.call(e):"";var t=e+"";return t=="0"&&1/e==-Ude?"-0":t}var zde=lz,qde=zde;function Wde(e){return e==null?"":qde(e)}var cz=Wde,Hde=Oa,Vde=mC,Kde=Dde,Gde=cz;function Yde(e,t){return Hde(e)?e:Vde(e,t)?[e]:Kde(Gde(e))}var uz=Yde,Xde=pf,Jde=1/0;function Qde(e){if(typeof e=="string"||Xde(e))return e;var t=e+"";return t=="0"&&1/e==-Jde?"-0":t}var Tb=Qde,Zde=uz,efe=Tb;function tfe(e,t){t=Zde(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[efe(t[n++])];return n&&n==r?e:void 0}var wC=tfe,nfe=wC;function rfe(e,t,n){var r=e==null?void 0:nfe(e,t);return r===void 0?n:r}var dz=rfe;const yi=un(dz);function afe(e){return e==null}var ife=afe;const on=un(ife);var sfe=ko,ofe=Oa,lfe=So,cfe="[object String]";function ufe(e){return typeof e=="string"||!ofe(e)&&lfe(e)&&sfe(e)==cfe}var dfe=ufe;const Bc=un(dfe);var fz={exports:{}},mn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jC=Symbol.for("react.element"),_C=Symbol.for("react.portal"),Ob=Symbol.for("react.fragment"),Ib=Symbol.for("react.strict_mode"),Rb=Symbol.for("react.profiler"),Mb=Symbol.for("react.provider"),Db=Symbol.for("react.context"),ffe=Symbol.for("react.server_context"),$b=Symbol.for("react.forward_ref"),Lb=Symbol.for("react.suspense"),Fb=Symbol.for("react.suspense_list"),Bb=Symbol.for("react.memo"),Ub=Symbol.for("react.lazy"),hfe=Symbol.for("react.offscreen"),hz;hz=Symbol.for("react.module.reference");function ki(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case jC:switch(e=e.type,e){case Ob:case Rb:case Ib:case Lb:case Fb:return e;default:switch(e=e&&e.$$typeof,e){case ffe:case Db:case $b:case Ub:case Bb:case Mb:return e;default:return t}}case _C:return t}}}mn.ContextConsumer=Db;mn.ContextProvider=Mb;mn.Element=jC;mn.ForwardRef=$b;mn.Fragment=Ob;mn.Lazy=Ub;mn.Memo=Bb;mn.Portal=_C;mn.Profiler=Rb;mn.StrictMode=Ib;mn.Suspense=Lb;mn.SuspenseList=Fb;mn.isAsyncMode=function(){return!1};mn.isConcurrentMode=function(){return!1};mn.isContextConsumer=function(e){return ki(e)===Db};mn.isContextProvider=function(e){return ki(e)===Mb};mn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===jC};mn.isForwardRef=function(e){return ki(e)===$b};mn.isFragment=function(e){return ki(e)===Ob};mn.isLazy=function(e){return ki(e)===Ub};mn.isMemo=function(e){return ki(e)===Bb};mn.isPortal=function(e){return ki(e)===_C};mn.isProfiler=function(e){return ki(e)===Rb};mn.isStrictMode=function(e){return ki(e)===Ib};mn.isSuspense=function(e){return ki(e)===Lb};mn.isSuspenseList=function(e){return ki(e)===Fb};mn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ob||e===Rb||e===Ib||e===Lb||e===Fb||e===hfe||typeof e=="object"&&e!==null&&(e.$$typeof===Ub||e.$$typeof===Bb||e.$$typeof===Mb||e.$$typeof===Db||e.$$typeof===$b||e.$$typeof===hz||e.getModuleId!==void 0)};mn.typeOf=ki;fz.exports=mn;var mfe=fz.exports,pfe=ko,gfe=So,vfe="[object Number]";function xfe(e){return typeof e=="number"||gfe(e)&&pfe(e)==vfe}var mz=xfe;const yfe=un(mz);var bfe=mz;function wfe(e){return bfe(e)&&e!=+e}var jfe=wfe;const Lp=un(jfe);var Ki=function(t){return t===0?0:t>0?1:-1},lc=function(t){return Bc(t)&&t.indexOf("%")===t.length-1},Ke=function(t){return yfe(t)&&!Lp(t)},_fe=function(t){return on(t)},hr=function(t){return Ke(t)||Bc(t)},kfe=0,zb=function(t){var n=++kfe;return"".concat(t||"").concat(n)},Uc=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ke(t)&&!Bc(t))return r;var s;if(lc(t)){var o=t.indexOf("%");s=n*parseFloat(t.slice(0,o))/100}else s=+t;return Lp(s)&&(s=r),a&&s>n&&(s=n),s},Ko=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},Sfe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},gu=function(t,n){return Ke(t)&&Ke(n)?function(r){return t+r*(n-t)}:function(){return n}};function g_(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):yi(r,t))===n})}var Nfe=function(t,n){return Ke(t)&&Ke(n)?t-n:Bc(t)&&Bc(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function sd(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function v_(e){"@babel/helpers - typeof";return v_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v_(e)}var Cfe=["viewBox","children"],Afe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],r2=["points","pathLength"],Ww={svg:Cfe,polygon:r2,polyline:r2},kC=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ux=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(p.isValidElement(t)&&(r=t.props),!gf(r))return null;var a={};return Object.keys(r).forEach(function(s){kC.includes(s)&&(a[s]=n||function(o){return r[s](r,o)})}),a},Efe=function(t,n,r){return function(a){return t(n,r,a),null}},dx=function(t,n,r){if(!gf(t)||v_(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(s){var o=t[s];kC.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=Efe(o,n,r))}),a},Pfe=["children"],Tfe=["children"];function a2(e,t){if(e==null)return{};var n=Ofe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ofe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var i2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},so=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},s2=null,Hw=null,SC=function e(t){if(t===s2&&Array.isArray(Hw))return Hw;var n=[];return p.Children.forEach(t,function(r){on(r)||(mfe.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),Hw=n,s2=t,n};function Qi(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return so(a)}):r=[so(t)],SC(e).forEach(function(a){var s=yi(a,"type.displayName")||yi(a,"type.name");r.indexOf(s)!==-1&&n.push(a)}),n}function Fa(e,t){var n=Qi(e,t);return n&&n[0]}var o2=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!Ke(r)||r<=0||!Ke(a)||a<=0)},Ife=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Rfe=function(t){return t&&t.type&&Bc(t.type)&&Ife.indexOf(t.type)>=0},Mfe=function(t,n,r,a){var s,o=(s=Ww==null?void 0:Ww[a])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Ot(t)&&(a&&o.includes(n)||Afe.includes(n))||r&&kC.includes(n)},sn=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(p.isValidElement(t)&&(a=t.props),!gf(a))return null;var s={};return Object.keys(a).forEach(function(o){var l;Mfe((l=a)===null||l===void 0?void 0:l[o],o,n,r)&&(s[o]=a[o])}),s},x_=function e(t,n){if(t===n)return!0;var r=p.Children.count(t);if(r!==p.Children.count(n))return!1;if(r===0)return!0;if(r===1)return l2(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var s=t[a],o=n[a];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!l2(s,o))return!1}return!0},l2=function(t,n){if(on(t)&&on(n))return!0;if(!on(t)&&!on(n)){var r=t.props||{},a=r.children,s=a2(r,Pfe),o=n.props||{},l=o.children,c=a2(o,Tfe);return a&&l?sd(s,c)&&x_(a,l):!a&&!l?sd(s,c):!1}return!1},c2=function(t,n){var r=[],a={};return SC(t).forEach(function(s,o){if(Rfe(s))r.push(s);else if(s){var l=so(s.type),c=n[l]||{},u=c.handler,f=c.once;if(u&&(!f||!a[l])){var d=u(s,l,o);r.push(d),a[l]=!0}}}),r},Dfe=function(t){var n=t&&t.type;return n&&i2[n]?i2[n]:null},$fe=function(t,n){return SC(n).indexOf(t)},Lfe=["children","width","height","viewBox","className","style","title","desc"];function y_(){return y_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y_.apply(this,arguments)}function Ffe(e,t){if(e==null)return{};var n=Bfe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Bfe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function b_(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,u=Ffe(e,Lfe),f=a||{width:n,height:r,x:0,y:0},d=Xt("recharts-surface",s);return Y.createElement("svg",y_({},sn(u,!0,"svg"),{className:d,width:n,height:r,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),Y.createElement("title",null,l),Y.createElement("desc",null,c),t)}var Ufe=["children","className"];function w_(){return w_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w_.apply(this,arguments)}function zfe(e,t){if(e==null)return{};var n=qfe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function qfe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var xr=Y.forwardRef(function(e,t){var n=e.children,r=e.className,a=zfe(e,Ufe),s=Xt("recharts-layer",r);return Y.createElement("g",w_({className:s},sn(a,!0),{ref:t}),n)}),oo=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s]};function Wfe(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(a);++r<a;)s[r]=e[r+t];return s}var Hfe=Wfe,Vfe=Hfe;function Kfe(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:Vfe(e,t,n)}var Gfe=Kfe,Yfe="\\ud800-\\udfff",Xfe="\\u0300-\\u036f",Jfe="\\ufe20-\\ufe2f",Qfe="\\u20d0-\\u20ff",Zfe=Xfe+Jfe+Qfe,ehe="\\ufe0e\\ufe0f",the="\\u200d",nhe=RegExp("["+the+Yfe+Zfe+ehe+"]");function rhe(e){return nhe.test(e)}var pz=rhe;function ahe(e){return e.split("")}var ihe=ahe,gz="\\ud800-\\udfff",she="\\u0300-\\u036f",ohe="\\ufe20-\\ufe2f",lhe="\\u20d0-\\u20ff",che=she+ohe+lhe,uhe="\\ufe0e\\ufe0f",dhe="["+gz+"]",j_="["+che+"]",__="\\ud83c[\\udffb-\\udfff]",fhe="(?:"+j_+"|"+__+")",vz="[^"+gz+"]",xz="(?:\\ud83c[\\udde6-\\uddff]){2}",yz="[\\ud800-\\udbff][\\udc00-\\udfff]",hhe="\\u200d",bz=fhe+"?",wz="["+uhe+"]?",mhe="(?:"+hhe+"(?:"+[vz,xz,yz].join("|")+")"+wz+bz+")*",phe=wz+bz+mhe,ghe="(?:"+[vz+j_+"?",j_,xz,yz,dhe].join("|")+")",vhe=RegExp(__+"(?="+__+")|"+ghe+phe,"g");function xhe(e){return e.match(vhe)||[]}var yhe=xhe,bhe=ihe,whe=pz,jhe=yhe;function _he(e){return whe(e)?jhe(e):bhe(e)}var khe=_he,She=Gfe,Nhe=pz,Che=khe,Ahe=cz;function Ehe(e){return function(t){t=Ahe(t);var n=Nhe(t)?Che(t):void 0,r=n?n[0]:t.charAt(0),a=n?She(n,1).join(""):t.slice(1);return r[e]()+a}}var Phe=Ehe,The=Phe,Ohe=The("toUpperCase"),Ihe=Ohe;const qb=un(Ihe);function wn(e){return function(){return e}}const jz=Math.cos,fx=Math.sin,ss=Math.sqrt,hx=Math.PI,Wb=2*hx,k_=Math.PI,S_=2*k_,Ql=1e-6,Rhe=S_-Ql;function _z(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Mhe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return _z;const n=10**t;return function(r){this._+=r[0];for(let a=1,s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class Dhe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?_z:Mhe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,s,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,a,s){if(t=+t,n=+n,r=+r,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=r-t,u=a-n,f=o-t,d=l-n,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>Ql)if(!(Math.abs(d*c-u*f)>Ql)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,g=a-l,v=c*c+u*u,x=m*m+g*g,y=Math.sqrt(v),b=Math.sqrt(h),w=s*Math.tan((k_-Math.acos((v+h-x)/(2*y*b)))/2),k=w/b,j=w/y;Math.abs(k-1)>Ql&&this._append`L${t+k*f},${n+k*d}`,this._append`A${s},${s},0,0,${+(d*m>f*g)},${this._x1=t+j*c},${this._y1=n+j*u}`}}arc(t,n,r,a,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),c=r*Math.sin(a),u=t+l,f=n+c,d=1^o,h=o?a-s:s-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Ql||Math.abs(this._y1-f)>Ql)&&this._append`L${u},${f}`,r&&(h<0&&(h=h%S_+S_),h>Rhe?this._append`A${r},${r},0,1,${d},${t-l},${n-c}A${r},${r},0,1,${d},${this._x1=u},${this._y1=f}`:h>Ql&&this._append`A${r},${r},0,${+(h>=k_)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function NC(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Dhe(t)}function CC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function kz(e){this._context=e}kz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Hb(e){return new kz(e)}function Sz(e){return e[0]}function Nz(e){return e[1]}function Cz(e,t){var n=wn(!0),r=null,a=Hb,s=null,o=NC(l);e=typeof e=="function"?e:e===void 0?Sz:wn(e),t=typeof t=="function"?t:t===void 0?Nz:wn(t);function l(c){var u,f=(c=CC(c)).length,d,h=!1,m;for(r==null&&(s=a(m=o())),u=0;u<=f;++u)!(u<f&&n(d=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(d,u,c),+t(d,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:wn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:wn(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:wn(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,r!=null&&(s=a(r)),l):a},l.context=function(c){return arguments.length?(c==null?r=s=null:s=a(r=c),l):r},l}function Ag(e,t,n){var r=null,a=wn(!0),s=null,o=Hb,l=null,c=NC(u);e=typeof e=="function"?e:e===void 0?Sz:wn(+e),t=typeof t=="function"?t:wn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Nz:wn(+n);function u(d){var h,m,g,v=(d=CC(d)).length,x,y=!1,b,w=new Array(v),k=new Array(v);for(s==null&&(l=o(b=c())),h=0;h<=v;++h){if(!(h<v&&a(x=d[h],h,d))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(w[g],k[g]);l.lineEnd(),l.areaEnd()}y&&(w[h]=+e(x,h,d),k[h]=+t(x,h,d),l.point(r?+r(x,h,d):w[h],n?+n(x,h,d):k[h]))}if(b)return l=null,b+""||null}function f(){return Cz().defined(a).curve(o).context(s)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:wn(+d),r=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:wn(+d),u):e},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:wn(+d),u):r},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:wn(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:wn(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:wn(+d),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:wn(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,s!=null&&(l=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=l=null:l=o(s=d),u):s},u}class Az{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function $he(e){return new Az(e,!0)}function Lhe(e){return new Az(e,!1)}const AC={draw(e,t){const n=ss(t/hx);e.moveTo(n,0),e.arc(0,0,n,0,Wb)}},Fhe={draw(e,t){const n=ss(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Ez=ss(1/3),Bhe=Ez*2,Uhe={draw(e,t){const n=ss(t/Bhe),r=n*Ez;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},zhe={draw(e,t){const n=ss(t),r=-n/2;e.rect(r,r,n,n)}},qhe=.8908130915292852,Pz=fx(hx/10)/fx(7*hx/10),Whe=fx(Wb/10)*Pz,Hhe=-jz(Wb/10)*Pz,Vhe={draw(e,t){const n=ss(t*qhe),r=Whe*n,a=Hhe*n;e.moveTo(0,-n),e.lineTo(r,a);for(let s=1;s<5;++s){const o=Wb*s/5,l=jz(o),c=fx(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*a,c*r+l*a)}e.closePath()}},Vw=ss(3),Khe={draw(e,t){const n=-ss(t/(Vw*3));e.moveTo(0,n*2),e.lineTo(-Vw*n,-n),e.lineTo(Vw*n,-n),e.closePath()}},ei=-.5,ti=ss(3)/2,N_=1/ss(12),Ghe=(N_/2+1)*3,Yhe={draw(e,t){const n=ss(t/Ghe),r=n/2,a=n*N_,s=r,o=n*N_+n,l=-s,c=o;e.moveTo(r,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(ei*r-ti*a,ti*r+ei*a),e.lineTo(ei*s-ti*o,ti*s+ei*o),e.lineTo(ei*l-ti*c,ti*l+ei*c),e.lineTo(ei*r+ti*a,ei*a-ti*r),e.lineTo(ei*s+ti*o,ei*o-ti*s),e.lineTo(ei*l+ti*c,ei*c-ti*l),e.closePath()}};function Xhe(e,t){let n=null,r=NC(a);e=typeof e=="function"?e:wn(e||AC),t=typeof t=="function"?t:wn(t===void 0?64:+t);function a(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:wn(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:wn(+s),a):t},a.context=function(s){return arguments.length?(n=s??null,a):n},a}function mx(){}function px(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Tz(e){this._context=e}Tz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:px(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:px(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Jhe(e){return new Tz(e)}function Oz(e){this._context=e}Oz.prototype={areaStart:mx,areaEnd:mx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:px(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Qhe(e){return new Oz(e)}function Iz(e){this._context=e}Iz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:px(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zhe(e){return new Iz(e)}function Rz(e){this._context=e}Rz.prototype={areaStart:mx,areaEnd:mx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function eme(e){return new Rz(e)}function u2(e){return e<0?-1:1}function d2(e,t,n){var r=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(s*a+o*r)/(r+a);return(u2(s)+u2(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function f2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Kw(e,t,n){var r=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-r)/3;e._context.bezierCurveTo(r+l,a+l*t,s-l,o-l*n,s,o)}function gx(e){this._context=e}gx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Kw(this,this._t0,f2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Kw(this,f2(this,n=d2(this,e,t)),n);break;default:Kw(this,this._t0,n=d2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Mz(e){this._context=new Dz(e)}(Mz.prototype=Object.create(gx.prototype)).point=function(e,t){gx.prototype.point.call(this,t,e)};function Dz(e){this._context=e}Dz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,s){this._context.bezierCurveTo(t,e,r,n,s,a)}};function tme(e){return new gx(e)}function nme(e){return new Mz(e)}function $z(e){this._context=e}$z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=h2(e),a=h2(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],a[0][s],r[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function h2(e){var t,n=e.length-1,r,a=new Array(n),s=new Array(n),o=new Array(n);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function rme(e){return new $z(e)}function Vb(e,t){this._context=e,this._t=t}Vb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ame(e){return new Vb(e,.5)}function ime(e){return new Vb(e,0)}function sme(e){return new Vb(e,1)}function Rd(e,t){if((o=e.length)>1)for(var n=1,r,a,s=e[t[0]],o,l=s.length;n<o;++n)for(a=s,s=e[t[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function C_(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function ome(e,t){return e[t]}function lme(e){const t=[];return t.key=e,t}function cme(){var e=wn([]),t=C_,n=Rd,r=ome;function a(s){var o=Array.from(e.apply(this,arguments),lme),l,c=o.length,u=-1,f;for(const d of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(d,o[l].key,u,s)]).data=d;for(l=0,f=CC(t(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:wn(Array.from(s)),a):e},a.value=function(s){return arguments.length?(r=typeof s=="function"?s:wn(+s),a):r},a.order=function(s){return arguments.length?(t=s==null?C_:typeof s=="function"?s:wn(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(n=s??Rd,a):n},a}function ume(e,t){if((r=e.length)>0){for(var n,r,a=0,s=e[0].length,o;a<s;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}Rd(e,t)}}function dme(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,s=r.length;n<s;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}Rd(e,t)}}function fme(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,s,o;r<s;++r){for(var l=0,c=0,u=0;l<o;++l){for(var f=e[t[l]],d=f[r][1]||0,h=f[r-1][1]||0,m=(d-h)/2,g=0;g<l;++g){var v=e[t[g]],x=v[r][1]||0,y=v[r-1][1]||0;m+=x-y}c+=d,u+=m*d}a[r-1][1]+=a[r-1][0]=n,c&&(n-=u/c)}a[r-1][1]+=a[r-1][0]=n,Rd(e,t)}}function xm(e){"@babel/helpers - typeof";return xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xm(e)}var hme=["type","size","sizeType"];function A_(){return A_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A_.apply(this,arguments)}function m2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function p2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m2(Object(n),!0).forEach(function(r){mme(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mme(e,t,n){return t=pme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pme(e){var t=gme(e,"string");return xm(t)=="symbol"?t:t+""}function gme(e,t){if(xm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vme(e,t){if(e==null)return{};var n=xme(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xme(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Lz={symbolCircle:AC,symbolCross:Fhe,symbolDiamond:Uhe,symbolSquare:zhe,symbolStar:Vhe,symbolTriangle:Khe,symbolWye:Yhe},yme=Math.PI/180,bme=function(t){var n="symbol".concat(qb(t));return Lz[n]||AC},wme=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*yme;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},jme=function(t,n){Lz["symbol".concat(qb(t))]=n},EC=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,s=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=vme(t,hme),u=p2(p2({},c),{},{type:r,size:s,sizeType:l}),f=function(){var x=bme(r),y=Xhe().type(x).size(wme(s,l,r));return y()},d=u.className,h=u.cx,m=u.cy,g=sn(u,!0);return h===+h&&m===+m&&s===+s?Y.createElement("path",A_({},g,{className:Xt("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(m,")"),d:f()})):null};EC.registerSymbol=jme;function Md(e){"@babel/helpers - typeof";return Md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Md(e)}function E_(){return E_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E_.apply(this,arguments)}function g2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _me(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g2(Object(n),!0).forEach(function(r){ym(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Bz(r.key),r)}}function Nme(e,t,n){return t&&Sme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cme(e,t,n){return t=vx(t),Ame(e,Fz()?Reflect.construct(t,n||[],vx(e).constructor):t.apply(e,n))}function Ame(e,t){if(t&&(Md(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eme(e)}function Eme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Fz=function(){return!!e})()}function vx(e){return vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vx(e)}function Pme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P_(e,t)}function P_(e,t){return P_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},P_(e,t)}function ym(e,t,n){return t=Bz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bz(e){var t=Tme(e,"string");return Md(t)=="symbol"?t:t+""}function Tme(e,t){if(Md(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Md(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ni=32,PC=function(e){function t(){return kme(this,t),Cme(this,t,arguments)}return Pme(t,e),Nme(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,s=ni/2,o=ni/6,l=ni/3,c=r.inactive?a:r.color;if(r.type==="plainline")return Y.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:ni,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return Y.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(ni,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return Y.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ni/8,"h").concat(ni,"v").concat(ni*3/4,"h").concat(-ni,"z"),className:"recharts-legend-icon"});if(Y.isValidElement(r.legendIcon)){var u=_me({},r);return delete u.legendIcon,Y.cloneElement(r.legendIcon,u)}return Y.createElement(EC,{fill:c,cx:s,cy:s,size:ni,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,s=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:ni,height:ni},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,g){var v=m.formatter||c,x=Xt(ym(ym({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var y=Ot(m.value)?null:m.value;oo(!Ot(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return Y.createElement("li",E_({className:x,style:d,key:"legend-item-".concat(g)},dx(r.props,m,g)),Y.createElement(b_,{width:o,height:o,viewBox:f,style:h},r.renderIcon(m)),Y.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},v?v(y,m,g):y))})}},{key:"render",value:function(){var r=this.props,a=r.payload,s=r.layout,o=r.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return Y.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(p.PureComponent);ym(PC,"displayName","Legend");ym(PC,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Ome=Eb;function Ime(){this.__data__=new Ome,this.size=0}var Rme=Ime;function Mme(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Dme=Mme;function $me(e){return this.__data__.get(e)}var Lme=$me;function Fme(e){return this.__data__.has(e)}var Bme=Fme,Ume=Eb,zme=vC,qme=xC,Wme=200;function Hme(e,t){var n=this.__data__;if(n instanceof Ume){var r=n.__data__;if(!zme||r.length<Wme-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qme(r)}return n.set(e,t),this.size=n.size,this}var Vme=Hme,Kme=Eb,Gme=Rme,Yme=Dme,Xme=Lme,Jme=Bme,Qme=Vme;function bf(e){var t=this.__data__=new Kme(e);this.size=t.size}bf.prototype.clear=Gme;bf.prototype.delete=Yme;bf.prototype.get=Xme;bf.prototype.has=Jme;bf.prototype.set=Qme;var Uz=bf,Zme="__lodash_hash_undefined__";function epe(e){return this.__data__.set(e,Zme),this}var tpe=epe;function npe(e){return this.__data__.has(e)}var rpe=npe,ape=xC,ipe=tpe,spe=rpe;function xx(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new ape;++t<n;)this.add(e[t])}xx.prototype.add=xx.prototype.push=ipe;xx.prototype.has=spe;var zz=xx;function ope(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var qz=ope;function lpe(e,t){return e.has(t)}var Wz=lpe,cpe=zz,upe=qz,dpe=Wz,fpe=1,hpe=2;function mpe(e,t,n,r,a,s){var o=n&fpe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(e),f=s.get(t);if(u&&f)return u==t&&f==e;var d=-1,h=!0,m=n&hpe?new cpe:void 0;for(s.set(e,t),s.set(t,e);++d<l;){var g=e[d],v=t[d];if(r)var x=o?r(v,g,d,t,e,s):r(g,v,d,e,t,s);if(x!==void 0){if(x)continue;h=!1;break}if(m){if(!upe(t,function(y,b){if(!dpe(m,b)&&(g===y||a(g,y,n,r,s)))return m.push(b)})){h=!1;break}}else if(!(g===v||a(g,v,n,r,s))){h=!1;break}}return s.delete(e),s.delete(t),h}var Hz=mpe,ppe=Ms,gpe=ppe.Uint8Array,vpe=gpe;function xpe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var ype=xpe;function bpe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var TC=bpe,v2=$p,x2=vpe,wpe=gC,jpe=Hz,_pe=ype,kpe=TC,Spe=1,Npe=2,Cpe="[object Boolean]",Ape="[object Date]",Epe="[object Error]",Ppe="[object Map]",Tpe="[object Number]",Ope="[object RegExp]",Ipe="[object Set]",Rpe="[object String]",Mpe="[object Symbol]",Dpe="[object ArrayBuffer]",$pe="[object DataView]",y2=v2?v2.prototype:void 0,Gw=y2?y2.valueOf:void 0;function Lpe(e,t,n,r,a,s,o){switch(n){case $pe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Dpe:return!(e.byteLength!=t.byteLength||!s(new x2(e),new x2(t)));case Cpe:case Ape:case Tpe:return wpe(+e,+t);case Epe:return e.name==t.name&&e.message==t.message;case Ope:case Rpe:return e==t+"";case Ppe:var l=_pe;case Ipe:var c=r&Spe;if(l||(l=kpe),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=Npe,o.set(e,t);var f=jpe(l(e),l(t),r,a,s,o);return o.delete(e),f;case Mpe:if(Gw)return Gw.call(e)==Gw.call(t)}return!1}var Fpe=Lpe;function Bpe(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var Vz=Bpe,Upe=Vz,zpe=Oa;function qpe(e,t,n){var r=t(e);return zpe(e)?r:Upe(r,n(e))}var Wpe=qpe;function Hpe(e,t){for(var n=-1,r=e==null?0:e.length,a=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[a++]=o)}return s}var Vpe=Hpe;function Kpe(){return[]}var Gpe=Kpe,Ype=Vpe,Xpe=Gpe,Jpe=Object.prototype,Qpe=Jpe.propertyIsEnumerable,b2=Object.getOwnPropertySymbols,Zpe=b2?function(e){return e==null?[]:(e=Object(e),Ype(b2(e),function(t){return Qpe.call(e,t)}))}:Xpe,ege=Zpe;function tge(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var nge=tge,rge=ko,age=So,ige="[object Arguments]";function sge(e){return age(e)&&rge(e)==ige}var oge=sge,w2=oge,lge=So,Kz=Object.prototype,cge=Kz.hasOwnProperty,uge=Kz.propertyIsEnumerable,dge=w2(function(){return arguments}())?w2:function(e){return lge(e)&&cge.call(e,"callee")&&!uge.call(e,"callee")},OC=dge,yx={exports:{}};function fge(){return!1}var hge=fge;yx.exports;(function(e,t){var n=Ms,r=hge,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(yx,yx.exports);var Gz=yx.exports,mge=9007199254740991,pge=/^(?:0|[1-9]\d*)$/;function gge(e,t){var n=typeof e;return t=t??mge,!!t&&(n=="number"||n!="symbol"&&pge.test(e))&&e>-1&&e%1==0&&e<t}var IC=gge,vge=9007199254740991;function xge(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=vge}var RC=xge,yge=ko,bge=RC,wge=So,jge="[object Arguments]",_ge="[object Array]",kge="[object Boolean]",Sge="[object Date]",Nge="[object Error]",Cge="[object Function]",Age="[object Map]",Ege="[object Number]",Pge="[object Object]",Tge="[object RegExp]",Oge="[object Set]",Ige="[object String]",Rge="[object WeakMap]",Mge="[object ArrayBuffer]",Dge="[object DataView]",$ge="[object Float32Array]",Lge="[object Float64Array]",Fge="[object Int8Array]",Bge="[object Int16Array]",Uge="[object Int32Array]",zge="[object Uint8Array]",qge="[object Uint8ClampedArray]",Wge="[object Uint16Array]",Hge="[object Uint32Array]",Nn={};Nn[$ge]=Nn[Lge]=Nn[Fge]=Nn[Bge]=Nn[Uge]=Nn[zge]=Nn[qge]=Nn[Wge]=Nn[Hge]=!0;Nn[jge]=Nn[_ge]=Nn[Mge]=Nn[kge]=Nn[Dge]=Nn[Sge]=Nn[Nge]=Nn[Cge]=Nn[Age]=Nn[Ege]=Nn[Pge]=Nn[Tge]=Nn[Oge]=Nn[Ige]=Nn[Rge]=!1;function Vge(e){return wge(e)&&bge(e.length)&&!!Nn[yge(e)]}var Kge=Vge;function Gge(e){return function(t){return e(t)}}var Yz=Gge,bx={exports:{}};bx.exports;(function(e,t){var n=rz,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===r,o=s&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(bx,bx.exports);var Yge=bx.exports,Xge=Kge,Jge=Yz,j2=Yge,_2=j2&&j2.isTypedArray,Qge=_2?Jge(_2):Xge,Xz=Qge,Zge=nge,eve=OC,tve=Oa,nve=Gz,rve=IC,ave=Xz,ive=Object.prototype,sve=ive.hasOwnProperty;function ove(e,t){var n=tve(e),r=!n&&eve(e),a=!n&&!r&&nve(e),s=!n&&!r&&!a&&ave(e),o=n||r||a||s,l=o?Zge(e.length,String):[],c=l.length;for(var u in e)(t||sve.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||rve(u,c)))&&l.push(u);return l}var lve=ove,cve=Object.prototype;function uve(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||cve;return e===n}var dve=uve;function fve(e,t){return function(n){return e(t(n))}}var Jz=fve,hve=Jz,mve=hve(Object.keys,Object),pve=mve,gve=dve,vve=pve,xve=Object.prototype,yve=xve.hasOwnProperty;function bve(e){if(!gve(e))return vve(e);var t=[];for(var n in Object(e))yve.call(e,n)&&n!="constructor"&&t.push(n);return t}var wve=bve,jve=pC,_ve=RC;function kve(e){return e!=null&&_ve(e.length)&&!jve(e)}var Fp=kve,Sve=lve,Nve=wve,Cve=Fp;function Ave(e){return Cve(e)?Sve(e):Nve(e)}var Kb=Ave,Eve=Wpe,Pve=ege,Tve=Kb;function Ove(e){return Eve(e,Tve,Pve)}var Ive=Ove,k2=Ive,Rve=1,Mve=Object.prototype,Dve=Mve.hasOwnProperty;function $ve(e,t,n,r,a,s){var o=n&Rve,l=k2(e),c=l.length,u=k2(t),f=u.length;if(c!=f&&!o)return!1;for(var d=c;d--;){var h=l[d];if(!(o?h in t:Dve.call(t,h)))return!1}var m=s.get(e),g=s.get(t);if(m&&g)return m==t&&g==e;var v=!0;s.set(e,t),s.set(t,e);for(var x=o;++d<c;){h=l[d];var y=e[h],b=t[h];if(r)var w=o?r(b,y,h,t,e,s):r(y,b,h,e,t,s);if(!(w===void 0?y===b||a(y,b,n,r,s):w)){v=!1;break}x||(x=h=="constructor")}if(v&&!x){var k=e.constructor,j=t.constructor;k!=j&&"constructor"in e&&"constructor"in t&&!(typeof k=="function"&&k instanceof k&&typeof j=="function"&&j instanceof j)&&(v=!1)}return s.delete(e),s.delete(t),v}var Lve=$ve,Fve=tu,Bve=Ms,Uve=Fve(Bve,"DataView"),zve=Uve,qve=tu,Wve=Ms,Hve=qve(Wve,"Promise"),Vve=Hve,Kve=tu,Gve=Ms,Yve=Kve(Gve,"Set"),Qz=Yve,Xve=tu,Jve=Ms,Qve=Xve(Jve,"WeakMap"),Zve=Qve,T_=zve,O_=vC,I_=Vve,R_=Qz,M_=Zve,Zz=ko,wf=iz,S2="[object Map]",exe="[object Object]",N2="[object Promise]",C2="[object Set]",A2="[object WeakMap]",E2="[object DataView]",txe=wf(T_),nxe=wf(O_),rxe=wf(I_),axe=wf(R_),ixe=wf(M_),Zl=Zz;(T_&&Zl(new T_(new ArrayBuffer(1)))!=E2||O_&&Zl(new O_)!=S2||I_&&Zl(I_.resolve())!=N2||R_&&Zl(new R_)!=C2||M_&&Zl(new M_)!=A2)&&(Zl=function(e){var t=Zz(e),n=t==exe?e.constructor:void 0,r=n?wf(n):"";if(r)switch(r){case txe:return E2;case nxe:return S2;case rxe:return N2;case axe:return C2;case ixe:return A2}return t});var sxe=Zl,Yw=Uz,oxe=Hz,lxe=Fpe,cxe=Lve,P2=sxe,T2=Oa,O2=Gz,uxe=Xz,dxe=1,I2="[object Arguments]",R2="[object Array]",Eg="[object Object]",fxe=Object.prototype,M2=fxe.hasOwnProperty;function hxe(e,t,n,r,a,s){var o=T2(e),l=T2(t),c=o?R2:P2(e),u=l?R2:P2(t);c=c==I2?Eg:c,u=u==I2?Eg:u;var f=c==Eg,d=u==Eg,h=c==u;if(h&&O2(e)){if(!O2(t))return!1;o=!0,f=!1}if(h&&!f)return s||(s=new Yw),o||uxe(e)?oxe(e,t,n,r,a,s):lxe(e,t,c,n,r,a,s);if(!(n&dxe)){var m=f&&M2.call(e,"__wrapped__"),g=d&&M2.call(t,"__wrapped__");if(m||g){var v=m?e.value():e,x=g?t.value():t;return s||(s=new Yw),a(v,x,n,r,s)}}return h?(s||(s=new Yw),cxe(e,t,n,r,a,s)):!1}var mxe=hxe,pxe=mxe,D2=So;function e6(e,t,n,r,a){return e===t?!0:e==null||t==null||!D2(e)&&!D2(t)?e!==e&&t!==t:pxe(e,t,n,r,e6,a)}var MC=e6,gxe=Uz,vxe=MC,xxe=1,yxe=2;function bxe(e,t,n,r){var a=n.length,s=a,o=!r;if(e==null)return!s;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){l=n[a];var c=l[0],u=e[c],f=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var d=new gxe;if(r)var h=r(u,f,c,e,t,d);if(!(h===void 0?vxe(f,u,xxe|yxe,r,d):h))return!1}}return!0}var wxe=bxe,jxe=Dl;function _xe(e){return e===e&&!jxe(e)}var t6=_xe,kxe=t6,Sxe=Kb;function Nxe(e){for(var t=Sxe(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,kxe(a)]}return t}var Cxe=Nxe;function Axe(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var n6=Axe,Exe=wxe,Pxe=Cxe,Txe=n6;function Oxe(e){var t=Pxe(e);return t.length==1&&t[0][2]?Txe(t[0][0],t[0][1]):function(n){return n===e||Exe(n,e,t)}}var Ixe=Oxe;function Rxe(e,t){return e!=null&&t in Object(e)}var Mxe=Rxe,Dxe=uz,$xe=OC,Lxe=Oa,Fxe=IC,Bxe=RC,Uxe=Tb;function zxe(e,t,n){t=Dxe(t,e);for(var r=-1,a=t.length,s=!1;++r<a;){var o=Uxe(t[r]);if(!(s=e!=null&&n(e,o)))break;e=e[o]}return s||++r!=a?s:(a=e==null?0:e.length,!!a&&Bxe(a)&&Fxe(o,a)&&(Lxe(e)||$xe(e)))}var qxe=zxe,Wxe=Mxe,Hxe=qxe;function Vxe(e,t){return e!=null&&Hxe(e,t,Wxe)}var Kxe=Vxe,Gxe=MC,Yxe=dz,Xxe=Kxe,Jxe=mC,Qxe=t6,Zxe=n6,eye=Tb,tye=1,nye=2;function rye(e,t){return Jxe(e)&&Qxe(t)?Zxe(eye(e),t):function(n){var r=Yxe(n,e);return r===void 0&&r===t?Xxe(n,e):Gxe(t,r,tye|nye)}}var aye=rye;function iye(e){return e}var jf=iye;function sye(e){return function(t){return t==null?void 0:t[e]}}var oye=sye,lye=wC;function cye(e){return function(t){return lye(t,e)}}var uye=cye,dye=oye,fye=uye,hye=mC,mye=Tb;function pye(e){return hye(e)?dye(mye(e)):fye(e)}var gye=pye,vye=Ixe,xye=aye,yye=jf,bye=Oa,wye=gye;function jye(e){return typeof e=="function"?e:e==null?yye:typeof e=="object"?bye(e)?xye(e[0],e[1]):vye(e):wye(e)}var $l=jye;function _ye(e,t,n,r){for(var a=e.length,s=n+(r?1:-1);r?s--:++s<a;)if(t(e[s],s,e))return s;return-1}var r6=_ye;function kye(e){return e!==e}var Sye=kye;function Nye(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var Cye=Nye,Aye=r6,Eye=Sye,Pye=Cye;function Tye(e,t,n){return t===t?Pye(e,t,n):Aye(e,Eye,n)}var Oye=Tye,Iye=Oye;function Rye(e,t){var n=e==null?0:e.length;return!!n&&Iye(e,t,0)>-1}var Mye=Rye;function Dye(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var $ye=Dye;function Lye(){}var Fye=Lye,Xw=Qz,Bye=Fye,Uye=TC,zye=1/0,qye=Xw&&1/Uye(new Xw([,-0]))[1]==zye?function(e){return new Xw(e)}:Bye,Wye=qye,Hye=zz,Vye=Mye,Kye=$ye,Gye=Wz,Yye=Wye,Xye=TC,Jye=200;function Qye(e,t,n){var r=-1,a=Vye,s=e.length,o=!0,l=[],c=l;if(n)o=!1,a=Kye;else if(s>=Jye){var u=t?null:Yye(e);if(u)return Xye(u);o=!1,a=Gye,c=new Hye}else c=t?[]:l;e:for(;++r<s;){var f=e[r],d=t?t(f):f;if(f=n||f!==0?f:0,o&&d===d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),l.push(f)}else a(c,d,n)||(c!==l&&c.push(d),l.push(f))}return l}var Zye=Qye,ebe=$l,tbe=Zye;function nbe(e,t){return e&&e.length?tbe(e,ebe(t)):[]}var rbe=nbe;const $2=un(rbe);function a6(e,t,n){return t===!0?$2(e,n):Ot(t)?$2(e,t):e}function Dd(e){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dd(e)}var abe=["ref"];function L2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Fs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L2(Object(n),!0).forEach(function(r){Gb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ibe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s6(r.key),r)}}function sbe(e,t,n){return t&&F2(e.prototype,t),n&&F2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function obe(e,t,n){return t=wx(t),lbe(e,i6()?Reflect.construct(t,n||[],wx(e).constructor):t.apply(e,n))}function lbe(e,t){if(t&&(Dd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cbe(e)}function cbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i6=function(){return!!e})()}function wx(e){return wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wx(e)}function ube(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D_(e,t)}function D_(e,t){return D_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},D_(e,t)}function Gb(e,t,n){return t=s6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s6(e){var t=dbe(e,"string");return Dd(t)=="symbol"?t:t+""}function dbe(e,t){if(Dd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Dd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fbe(e,t){if(e==null)return{};var n=hbe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function mbe(e){return e.value}function pbe(e,t){if(Y.isValidElement(e))return Y.cloneElement(e,t);if(typeof e=="function")return Y.createElement(e,t);t.ref;var n=fbe(t,abe);return Y.createElement(PC,n)}var B2=1,ui=function(e){function t(){var n;ibe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=obe(this,t,[].concat(a)),Gb(n,"lastBoundingBox",{width:-1,height:-1}),n}return ube(t,e),sbe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>B2||Math.abs(a.height-this.lastBoundingBox.height)>B2)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Fs({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,s=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,f=a.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();d={left:((u||0)-m.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((f||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Fs(Fs({},d),h)}},{key:"render",value:function(){var r=this,a=this.props,s=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,d=Fs(Fs({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Y.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(m){r.wrapperNode=m}},pbe(s,Fs(Fs({},this.props),{},{payload:a6(f,u,mbe)})))}}],[{key:"getWithHeight",value:function(r,a){var s=Fs(Fs({},this.defaultProps),r.props),o=s.layout;return o==="vertical"&&Ke(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(p.PureComponent);Gb(ui,"displayName","Legend");Gb(ui,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var U2=$p,gbe=OC,vbe=Oa,z2=U2?U2.isConcatSpreadable:void 0;function xbe(e){return vbe(e)||gbe(e)||!!(z2&&e&&e[z2])}var ybe=xbe,bbe=Vz,wbe=ybe;function o6(e,t,n,r,a){var s=-1,o=e.length;for(n||(n=wbe),a||(a=[]);++s<o;){var l=e[s];t>0&&n(l)?t>1?o6(l,t-1,n,r,a):bbe(a,l):r||(a[a.length]=l)}return a}var l6=o6;function jbe(e){return function(t,n,r){for(var a=-1,s=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++a];if(n(s[c],c,s)===!1)break}return t}}var _be=jbe,kbe=_be,Sbe=kbe(),Nbe=Sbe,Cbe=Nbe,Abe=Kb;function Ebe(e,t){return e&&Cbe(e,t,Abe)}var c6=Ebe,Pbe=Fp;function Tbe(e,t){return function(n,r){if(n==null)return n;if(!Pbe(n))return e(n,r);for(var a=n.length,s=t?a:-1,o=Object(n);(t?s--:++s<a)&&r(o[s],s,o)!==!1;);return n}}var Obe=Tbe,Ibe=c6,Rbe=Obe,Mbe=Rbe(Ibe),DC=Mbe,Dbe=DC,$be=Fp;function Lbe(e,t){var n=-1,r=$be(e)?Array(e.length):[];return Dbe(e,function(a,s,o){r[++n]=t(a,s,o)}),r}var u6=Lbe;function Fbe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Bbe=Fbe,q2=pf;function Ube(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,s=q2(e),o=t!==void 0,l=t===null,c=t===t,u=q2(t);if(!l&&!u&&!s&&e>t||s&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!a)return 1;if(!r&&!s&&!u&&e<t||u&&n&&a&&!r&&!s||l&&n&&a||!o&&a||!c)return-1}return 0}var zbe=Ube,qbe=zbe;function Wbe(e,t,n){for(var r=-1,a=e.criteria,s=t.criteria,o=a.length,l=n.length;++r<o;){var c=qbe(a[r],s[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return e.index-t.index}var Hbe=Wbe,Jw=bC,Vbe=wC,Kbe=$l,Gbe=u6,Ybe=Bbe,Xbe=Yz,Jbe=Hbe,Qbe=jf,Zbe=Oa;function e0e(e,t,n){t.length?t=Jw(t,function(s){return Zbe(s)?function(o){return Vbe(o,s.length===1?s[0]:s)}:s}):t=[Qbe];var r=-1;t=Jw(t,Xbe(Kbe));var a=Gbe(e,function(s,o,l){var c=Jw(t,function(u){return u(s)});return{criteria:c,index:++r,value:s}});return Ybe(a,function(s,o){return Jbe(s,o,n)})}var t0e=e0e;function n0e(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var r0e=n0e,a0e=r0e,W2=Math.max;function i0e(e,t,n){return t=W2(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=W2(r.length-t,0),o=Array(s);++a<s;)o[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),a0e(e,this,l)}}var s0e=i0e;function o0e(e){return function(){return e}}var l0e=o0e,c0e=tu,u0e=function(){try{var e=c0e(Object,"defineProperty");return e({},"",{}),e}catch{}}(),d6=u0e,d0e=l0e,H2=d6,f0e=jf,h0e=H2?function(e,t){return H2(e,"toString",{configurable:!0,enumerable:!1,value:d0e(t),writable:!0})}:f0e,m0e=h0e,p0e=800,g0e=16,v0e=Date.now;function x0e(e){var t=0,n=0;return function(){var r=v0e(),a=g0e-(r-n);if(n=r,a>0){if(++t>=p0e)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var y0e=x0e,b0e=m0e,w0e=y0e,j0e=w0e(b0e),_0e=j0e,k0e=jf,S0e=s0e,N0e=_0e;function C0e(e,t){return N0e(S0e(e,t,k0e),e+"")}var A0e=C0e,E0e=gC,P0e=Fp,T0e=IC,O0e=Dl;function I0e(e,t,n){if(!O0e(n))return!1;var r=typeof t;return(r=="number"?P0e(n)&&T0e(t,n.length):r=="string"&&t in n)?E0e(n[t],e):!1}var Yb=I0e,R0e=l6,M0e=t0e,D0e=A0e,V2=Yb,$0e=D0e(function(e,t){if(e==null)return[];var n=t.length;return n>1&&V2(e,t[0],t[1])?t=[]:n>2&&V2(t[0],t[1],t[2])&&(t=[t[0]]),M0e(e,R0e(t,1),[])}),L0e=$0e;const $C=un(L0e);function bm(e){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(e)}function $_(){return $_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$_.apply(this,arguments)}function F0e(e,t){return q0e(e)||z0e(e,t)||U0e(e,t)||B0e()}function B0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U0e(e,t){if(e){if(typeof e=="string")return K2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K2(e,t)}}function K2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function q0e(e){if(Array.isArray(e))return e}function G2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Qw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G2(Object(n),!0).forEach(function(r){W0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W0e(e,t,n){return t=H0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H0e(e){var t=V0e(e,"string");return bm(t)=="symbol"?t:t+""}function V0e(e,t){if(bm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K0e(e){return Array.isArray(e)&&hr(e[0])&&hr(e[1])?e.join(" ~ "):e}var G0e=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,s=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,d=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,v=t.label,x=t.labelFormatter,y=t.accessibilityLayer,b=y===void 0?!1:y,w=function(){if(f&&f.length){var B={padding:0,margin:0},E=(h?$C(f,h):f).map(function(R,P){if(R.type==="none")return null;var U=Qw({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},l),L=R.formatter||d||K0e,O=R.value,F=R.name,C=O,z=F;if(L&&C!=null&&z!=null){var I=L(O,F,R,P,f);if(Array.isArray(I)){var $=F0e(I,2);C=$[0],z=$[1]}else C=I}return Y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:U},hr(z)?Y.createElement("span",{className:"recharts-tooltip-item-name"},z):null,hr(z)?Y.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Y.createElement("span",{className:"recharts-tooltip-item-value"},C),Y.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return Y.createElement("ul",{className:"recharts-tooltip-item-list",style:B},E)}return null},k=Qw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),j=Qw({margin:0},u),_=!on(v),S=_?v:"",T=Xt("recharts-default-tooltip",m),N=Xt("recharts-tooltip-label",g);_&&x&&f!==void 0&&f!==null&&(S=x(v,f));var A=b?{role:"status","aria-live":"assertive"}:{};return Y.createElement("div",$_({className:T,style:k},A),Y.createElement("p",{className:N,style:j},Y.isValidElement(S)?S:"".concat(S)),w())};function wm(e){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wm(e)}function Pg(e,t,n){return t=Y0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y0e(e){var t=X0e(e,"string");return wm(t)=="symbol"?t:t+""}function X0e(e,t){if(wm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gf="recharts-tooltip-wrapper",J0e={visibility:"hidden"};function Q0e(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Xt(Gf,Pg(Pg(Pg(Pg({},"".concat(Gf,"-right"),Ke(n)&&t&&Ke(t.x)&&n>=t.x),"".concat(Gf,"-left"),Ke(n)&&t&&Ke(t.x)&&n<t.x),"".concat(Gf,"-bottom"),Ke(r)&&t&&Ke(t.y)&&r>=t.y),"".concat(Gf,"-top"),Ke(r)&&t&&Ke(t.y)&&r<t.y))}function Y2(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(s&&Ke(s[r]))return s[r];var f=n[r]-l-a,d=n[r]+a;if(t[r])return o[r]?f:d;if(o[r]){var h=f,m=c[r];return h<m?Math.max(d,c[r]):Math.max(f,c[r])}var g=d+l,v=c[r]+u;return g>v?Math.max(f,c[r]):Math.max(d,c[r])}function Z0e(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function ewe(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,f,d;return o.height>0&&o.width>0&&n?(f=Y2({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=Y2({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=Z0e({translateX:f,translateY:d,useTranslate3d:l})):u=J0e,{cssProperties:u,cssClasses:Q0e({translateX:f,translateY:d,coordinate:n})}}function $d(e){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$d(e)}function X2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function J2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X2(Object(n),!0).forEach(function(r){F_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function twe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h6(r.key),r)}}function rwe(e,t,n){return t&&nwe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function awe(e,t,n){return t=jx(t),iwe(e,f6()?Reflect.construct(t,n||[],jx(e).constructor):t.apply(e,n))}function iwe(e,t){if(t&&($d(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return swe(e)}function swe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f6=function(){return!!e})()}function jx(e){return jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jx(e)}function owe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L_(e,t)}function L_(e,t){return L_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},L_(e,t)}function F_(e,t,n){return t=h6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h6(e){var t=lwe(e,"string");return $d(t)=="symbol"?t:t+""}function lwe(e,t){if($d(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($d(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q2=1,cwe=function(e){function t(){var n;twe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=awe(this,t,[].concat(a)),F_(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),F_(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),n}return owe(t,e),rwe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>Q2||Math.abs(r.height-this.state.lastBoundingBox.height)>Q2)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,f=a.coordinate,d=a.hasPayload,h=a.isAnimationActive,m=a.offset,g=a.position,v=a.reverseDirection,x=a.useTranslate3d,y=a.viewBox,b=a.wrapperStyle,w=ewe({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:m,position:g,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:y}),k=w.cssClasses,j=w.cssProperties,_=J2(J2({transition:h&&s?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},b);return Y.createElement("div",{tabIndex:-1,className:k,style:_,ref:function(T){r.wrapperNode=T}},u)}}])}(p.PureComponent),uwe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},hl={isSsr:uwe(),get:function(t){return hl[t]},set:function(t,n){if(typeof t=="string")hl[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(a){hl[a]=t[a]})}}};function Ld(e){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ld(e)}function Z2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function eO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z2(Object(n),!0).forEach(function(r){LC(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p6(r.key),r)}}function hwe(e,t,n){return t&&fwe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mwe(e,t,n){return t=_x(t),pwe(e,m6()?Reflect.construct(t,n||[],_x(e).constructor):t.apply(e,n))}function pwe(e,t){if(t&&(Ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gwe(e)}function gwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m6=function(){return!!e})()}function _x(e){return _x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_x(e)}function vwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B_(e,t)}function B_(e,t){return B_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},B_(e,t)}function LC(e,t,n){return t=p6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p6(e){var t=xwe(e,"string");return Ld(t)=="symbol"?t:t+""}function xwe(e,t){if(Ld(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ld(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ywe(e){return e.dataKey}function bwe(e,t){return Y.isValidElement(e)?Y.cloneElement(e,t):typeof e=="function"?Y.createElement(e,t):Y.createElement(G0e,t)}var Xn=function(e){function t(){return dwe(this,t),mwe(this,t,arguments)}return vwe(t,e),hwe(t,[{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,f=a.coordinate,d=a.filterNull,h=a.isAnimationActive,m=a.offset,g=a.payload,v=a.payloadUniqBy,x=a.position,y=a.reverseDirection,b=a.useTranslate3d,w=a.viewBox,k=a.wrapperStyle,j=g??[];d&&j.length&&(j=a6(g.filter(function(S){return S.value!=null&&(S.hide!==!0||r.props.includeHidden)}),v,ywe));var _=j.length>0;return Y.createElement(cwe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:s,coordinate:f,hasPayload:_,offset:m,position:x,reverseDirection:y,useTranslate3d:b,viewBox:w,wrapperStyle:k},bwe(u,eO(eO({},this.props),{},{payload:j})))}}])}(p.PureComponent);LC(Xn,"displayName","Tooltip");LC(Xn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!hl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var wwe=Ms,jwe=function(){return wwe.Date.now()},_we=jwe,kwe=/\s/;function Swe(e){for(var t=e.length;t--&&kwe.test(e.charAt(t)););return t}var Nwe=Swe,Cwe=Nwe,Awe=/^\s+/;function Ewe(e){return e&&e.slice(0,Cwe(e)+1).replace(Awe,"")}var Pwe=Ewe,Twe=Pwe,tO=Dl,Owe=pf,nO=NaN,Iwe=/^[-+]0x[0-9a-f]+$/i,Rwe=/^0b[01]+$/i,Mwe=/^0o[0-7]+$/i,Dwe=parseInt;function $we(e){if(typeof e=="number")return e;if(Owe(e))return nO;if(tO(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=tO(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Twe(e);var n=Rwe.test(e);return n||Mwe.test(e)?Dwe(e.slice(2),n?2:8):Iwe.test(e)?nO:+e}var g6=$we,Lwe=Dl,Zw=_we,rO=g6,Fwe="Expected a function",Bwe=Math.max,Uwe=Math.min;function zwe(e,t,n){var r,a,s,o,l,c,u=0,f=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(Fwe);t=rO(t)||0,Lwe(n)&&(f=!!n.leading,d="maxWait"in n,s=d?Bwe(rO(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h);function m(_){var S=r,T=a;return r=a=void 0,u=_,o=e.apply(T,S),o}function g(_){return u=_,l=setTimeout(y,t),f?m(_):o}function v(_){var S=_-c,T=_-u,N=t-S;return d?Uwe(N,s-T):N}function x(_){var S=_-c,T=_-u;return c===void 0||S>=t||S<0||d&&T>=s}function y(){var _=Zw();if(x(_))return b(_);l=setTimeout(y,v(_))}function b(_){return l=void 0,h&&r?m(_):(r=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,r=c=a=l=void 0}function k(){return l===void 0?o:b(Zw())}function j(){var _=Zw(),S=x(_);if(r=arguments,a=this,c=_,S){if(l===void 0)return g(c);if(d)return clearTimeout(l),l=setTimeout(y,t),m(c)}return l===void 0&&(l=setTimeout(y,t)),o}return j.cancel=w,j.flush=k,j}var qwe=zwe,Wwe=qwe,Hwe=Dl,Vwe="Expected a function";function Kwe(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(Vwe);return Hwe(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Wwe(e,t,{leading:r,maxWait:t,trailing:a})}var Gwe=Kwe;const v6=un(Gwe);function jm(e){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jm(e)}function aO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Tg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(n),!0).forEach(function(r){Ywe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ywe(e,t,n){return t=Xwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xwe(e){var t=Jwe(e,"string");return jm(t)=="symbol"?t:t+""}function Jwe(e,t){if(jm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qwe(e,t){return nje(e)||tje(e,t)||eje(e,t)||Zwe()}function Zwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eje(e,t){if(e){if(typeof e=="string")return iO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iO(e,t)}}function iO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function nje(e){if(Array.isArray(e))return e}var ii=p.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,s=e.width,o=s===void 0?"100%":s,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,v=g===void 0?0:g,x=e.id,y=e.className,b=e.onResize,w=e.style,k=w===void 0?{}:w,j=p.useRef(null),_=p.useRef();_.current=b,p.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var S=p.useState({containerWidth:a.width,containerHeight:a.height}),T=Qwe(S,2),N=T[0],A=T[1],D=p.useCallback(function(E,R){A(function(P){var U=Math.round(E),L=Math.round(R);return P.containerWidth===U&&P.containerHeight===L?P:{containerWidth:U,containerHeight:L}})},[]);p.useEffect(function(){var E=function(F){var C,z=F[0].contentRect,I=z.width,$=z.height;D(I,$),(C=_.current)===null||C===void 0||C.call(_,I,$)};v>0&&(E=v6(E,v,{trailing:!0,leading:!1}));var R=new ResizeObserver(E),P=j.current.getBoundingClientRect(),U=P.width,L=P.height;return D(U,L),R.observe(j.current),function(){R.disconnect()}},[D,v]);var B=p.useMemo(function(){var E=N.containerWidth,R=N.containerHeight;if(E<0||R<0)return null;oo(lc(o)||lc(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),oo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var P=lc(o)?E:o,U=lc(c)?R:c;n&&n>0&&(P?U=P/n:U&&(P=U*n),h&&U>h&&(U=h)),oo(P>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,U,o,c,f,d,n);var L=!Array.isArray(m)&&so(m.type).endsWith("Chart");return Y.Children.map(m,function(O){return Y.isValidElement(O)?p.cloneElement(O,Tg({width:P,height:U},L?{style:Tg({height:"100%",width:"100%",maxHeight:U,maxWidth:P},O.props.style)}:{})):O})},[n,m,c,h,d,f,N,o]);return Y.createElement("div",{id:x?"".concat(x):void 0,className:Xt("recharts-responsive-container",y),style:Tg(Tg({},k),{},{width:o,height:c,minWidth:f,minHeight:d,maxHeight:h}),ref:j},B)}),x6=function(t){return null};x6.displayName="Cell";function _m(e){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_m(e)}function sO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function U_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sO(Object(n),!0).forEach(function(r){rje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rje(e,t,n){return t=aje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aje(e){var t=ije(e,"string");return _m(t)=="symbol"?t:t+""}function ije(e,t){if(_m(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vu={widthCache:{},cacheCount:0},sje=2e3,oje={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},oO="recharts_measurement_span";function lje(e){var t=U_({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Eh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||hl.isSsr)return{width:0,height:0};var r=lje(n),a=JSON.stringify({text:t,copyStyle:r});if(vu.widthCache[a])return vu.widthCache[a];try{var s=document.getElementById(oO);s||(s=document.createElement("span"),s.setAttribute("id",oO),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=U_(U_({},oje),r);Object.assign(s.style,o),s.textContent="".concat(t);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return vu.widthCache[a]=c,++vu.cacheCount>sje&&(vu.cacheCount=0,vu.widthCache={}),c}catch{return{width:0,height:0}}},cje=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function km(e){"@babel/helpers - typeof";return km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},km(e)}function kx(e,t){return hje(e)||fje(e,t)||dje(e,t)||uje()}function uje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dje(e,t){if(e){if(typeof e=="string")return lO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lO(e,t)}}function lO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function hje(e){if(Array.isArray(e))return e}function mje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gje(r.key),r)}}function pje(e,t,n){return t&&cO(e.prototype,t),n&&cO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gje(e){var t=vje(e,"string");return km(t)=="symbol"?t:t+""}function vje(e,t){if(km(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var uO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xje=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,yje=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,y6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},bje=Object.keys(y6),Wu="NaN";function wje(e,t){return e*y6[t]}var Og=function(){function e(t,n){mje(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!xje.test(n)&&(this.num=NaN,this.unit=""),bje.includes(n)&&(this.num=wje(t,n),this.unit="px")}return pje(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=yje.exec(n))!==null&&r!==void 0?r:[],s=kx(a,3),o=s[1],l=s[2];return new e(parseFloat(o),l??"")}}])}();function b6(e){if(e.includes(Wu))return Wu;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=uO.exec(t))!==null&&n!==void 0?n:[],a=kx(r,4),s=a[1],o=a[2],l=a[3],c=Og.parse(s??""),u=Og.parse(l??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Wu;t=t.replace(uO,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,h=(d=dO.exec(t))!==null&&d!==void 0?d:[],m=kx(h,4),g=m[1],v=m[2],x=m[3],y=Og.parse(g??""),b=Og.parse(x??""),w=v==="+"?y.add(b):y.subtract(b);if(w.isNaN())return Wu;t=t.replace(dO,w.toString())}return t}var fO=/\(([^()]*)\)/;function jje(e){for(var t=e;t.includes("(");){var n=fO.exec(t),r=kx(n,2),a=r[1];t=t.replace(fO,b6(a))}return t}function _je(e){var t=e.replace(/\s+/g,"");return t=jje(t),t=b6(t),t}function kje(e){try{return _je(e)}catch{return Wu}}function ej(e){var t=kje(e.slice(5,-1));return t===Wu?"":t}var Sje=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Nje=["dx","dy","angle","className","breakAll"];function z_(){return z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z_.apply(this,arguments)}function hO(e,t){if(e==null)return{};var n=Cje(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Cje(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function mO(e,t){return Tje(e)||Pje(e,t)||Eje(e,t)||Aje()}function Aje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eje(e,t){if(e){if(typeof e=="string")return pO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pO(e,t)}}function pO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Tje(e){if(Array.isArray(e))return e}var w6=/[ \f\n\r\t\v\u2028\u2029]+/,j6=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var s=[];on(n)||(r?s=n.toString().split(""):s=n.toString().split(w6));var o=s.map(function(c){return{word:c,width:Eh(c,a).width}}),l=r?0:Eh("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Oje=function(t,n,r,a,s){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,f=Ke(o),d=l,h=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce(function(U,L){var O=L.word,F=L.width,C=U[U.length-1];if(C&&(a==null||s||C.width+F+r<Number(a)))C.words.push(O),C.width+=F+r;else{var z={words:[O],width:F};U.push(z)}return U},[])},m=h(n),g=function(P){return P.reduce(function(U,L){return U.width>L.width?U:L})};if(!f)return m;for(var v="",x=function(P){var U=d.slice(0,P),L=j6({breakAll:u,style:c,children:U+v}).wordsWithComputedWidth,O=h(L),F=O.length>o||g(O).width>Number(a);return[F,O]},y=0,b=d.length-1,w=0,k;y<=b&&w<=d.length-1;){var j=Math.floor((y+b)/2),_=j-1,S=x(_),T=mO(S,2),N=T[0],A=T[1],D=x(j),B=mO(D,1),E=B[0];if(!N&&!E&&(y=j+1),N&&E&&(b=j-1),!N&&E){k=A;break}w++}return k||m},gO=function(t){var n=on(t)?[]:t.toString().split(w6);return[{words:n}]},Ije=function(t){var n=t.width,r=t.scaleToFit,a=t.children,s=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!hl.isSsr){var c,u,f=j6({breakAll:o,children:a,style:s});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;c=d,u=h}else return gO(a);return Oje({breakAll:o,children:a,maxLines:l,style:s},c,u,n,r)}return gO(a)},vO="#808080",Sx=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,d=f===void 0?!1:f,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,v=g===void 0?"end":g,x=t.fill,y=x===void 0?vO:x,b=hO(t,Sje),w=p.useMemo(function(){return Ije({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:d,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,d,b.style,b.width]),k=b.dx,j=b.dy,_=b.angle,S=b.className,T=b.breakAll,N=hO(b,Nje);if(!hr(r)||!hr(s))return null;var A=r+(Ke(k)?k:0),D=s+(Ke(j)?j:0),B;switch(v){case"start":B=ej("calc(".concat(u,")"));break;case"middle":B=ej("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:B=ej("calc(".concat(w.length-1," * -").concat(l,")"));break}var E=[];if(d){var R=w[0].width,P=b.width;E.push("scale(".concat((Ke(P)?P/R:1)/R,")"))}return _&&E.push("rotate(".concat(_,", ").concat(A,", ").concat(D,")")),E.length&&(N.transform=E.join(" ")),Y.createElement("text",z_({},sn(N,!0),{x:A,y:D,className:Xt("recharts-text",S),textAnchor:m,fill:y.includes("url")?vO:y}),w.map(function(U,L){var O=U.words.join(T?"":" ");return Y.createElement("tspan",{x:A,dy:L===0?B:l,key:"".concat(O,"-").concat(L)},O)}))};function ml(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Rje(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function FC(e){let t,n,r;e.length!==2?(t=ml,n=(l,c)=>ml(e(l),c),r=(l,c)=>e(l)-c):(t=e===ml||e===Rje?e:Mje,n=e,r=e);function a(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;n(l[d],c)<0?u=d+1:f=d}while(u<f)}return u}function s(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;n(l[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function o(l,c,u=0,f=l.length){const d=a(l,c,u,f-1);return d>u&&r(l[d-1],c)>-r(l[d],c)?d-1:d}return{left:a,center:o,right:s}}function Mje(){return 0}function _6(e){return e===null?NaN:+e}function*Dje(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const $je=FC(ml),Bp=$je.right;FC(_6).center;class xO extends Map{constructor(t,n=Bje){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(yO(this,t))}has(t){return super.has(yO(this,t))}set(t,n){return super.set(Lje(this,t),n)}delete(t){return super.delete(Fje(this,t))}}function yO({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Lje({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Fje({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Bje(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Uje(e=ml){if(e===ml)return k6;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function k6(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const zje=Math.sqrt(50),qje=Math.sqrt(10),Wje=Math.sqrt(2);function Nx(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),s=r/Math.pow(10,a),o=s>=zje?10:s>=qje?5:s>=Wje?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?Nx(e,t,n*2):[l,c,u]}function q_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,s,o]=r?Nx(t,e,n):Nx(e,t,n);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function W_(e,t,n){return t=+t,e=+e,n=+n,Nx(e,t,n)[2]}function H_(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?W_(t,e,n):W_(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function bO(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function wO(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function S6(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?k6:Uje(a);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,f=Math.log(c),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(t-u*d/c+h)),g=Math.min(r,Math.floor(t+(c-u)*d/c+h));S6(e,t,m,g,a)}const s=e[t];let o=n,l=r;for(Yf(e,n,t),a(e[r],s)>0&&Yf(e,n,r);o<l;){for(Yf(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[n],s)===0?Yf(e,n,l):(++l,Yf(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function Yf(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Hje(e,t,n){if(e=Float64Array.from(Dje(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return wO(e);if(t>=1)return bO(e);var r,a=(r-1)*t,s=Math.floor(a),o=bO(S6(e,s).subarray(0,s+1)),l=wO(e.subarray(s+1));return o+(l-o)*(a-s)}}function Vje(e,t,n=_6){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,s=Math.floor(a),o=+n(e[s],s,e),l=+n(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function Kje(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(a);++r<a;)s[r]=e+r*n;return s}function Si(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function No(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const V_=Symbol("implicit");function BC(){var e=new xO,t=[],n=[],r=V_;function a(s){let o=e.get(s);if(o===void 0){if(r!==V_)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new xO;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return BC(t,n).unknown(r)},Si.apply(a,arguments),a}function Sm(){var e=BC().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,s,o,l=!1,c=0,u=0,f=.5;delete e.unknown;function d(){var h=t().length,m=a<r,g=m?a:r,v=m?r:a;s=(v-g)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),g+=(v-g-s*(h-c))*f,o=s*(1-c),l&&(g=Math.round(g),o=Math.round(o));var x=Kje(h).map(function(y){return g+s*y});return n(m?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([r,a]=h,r=+r,a=+a,d()):[r,a]},e.rangeRound=function(h){return[r,a]=h,r=+r,a=+a,l=!0,d()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,d()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),d()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),d()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.copy=function(){return Sm(t(),[r,a]).round(l).paddingInner(c).paddingOuter(u).align(f)},Si.apply(d(),arguments)}function N6(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return N6(t())},e}function Ph(){return N6(Sm.apply(null,arguments).paddingInner(1))}function UC(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function C6(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Up(){}var Nm=.7,Cx=1/Nm,od="\\s*([+-]?\\d+)\\s*",Cm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ns="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gje=/^#([0-9a-f]{3,8})$/,Yje=new RegExp(`^rgb\\(${od},${od},${od}\\)$`),Xje=new RegExp(`^rgb\\(${Ns},${Ns},${Ns}\\)$`),Jje=new RegExp(`^rgba\\(${od},${od},${od},${Cm}\\)$`),Qje=new RegExp(`^rgba\\(${Ns},${Ns},${Ns},${Cm}\\)$`),Zje=new RegExp(`^hsl\\(${Cm},${Ns},${Ns}\\)$`),e1e=new RegExp(`^hsla\\(${Cm},${Ns},${Ns},${Cm}\\)$`),jO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};UC(Up,Am,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_O,formatHex:_O,formatHex8:t1e,formatHsl:n1e,formatRgb:kO,toString:kO});function _O(){return this.rgb().formatHex()}function t1e(){return this.rgb().formatHex8()}function n1e(){return A6(this).formatHsl()}function kO(){return this.rgb().formatRgb()}function Am(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Gje.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?SO(t):n===3?new Sa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ig(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ig(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Yje.exec(e))?new Sa(t[1],t[2],t[3],1):(t=Xje.exec(e))?new Sa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Jje.exec(e))?Ig(t[1],t[2],t[3],t[4]):(t=Qje.exec(e))?Ig(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Zje.exec(e))?AO(t[1],t[2]/100,t[3]/100,1):(t=e1e.exec(e))?AO(t[1],t[2]/100,t[3]/100,t[4]):jO.hasOwnProperty(e)?SO(jO[e]):e==="transparent"?new Sa(NaN,NaN,NaN,0):null}function SO(e){return new Sa(e>>16&255,e>>8&255,e&255,1)}function Ig(e,t,n,r){return r<=0&&(e=t=n=NaN),new Sa(e,t,n,r)}function r1e(e){return e instanceof Up||(e=Am(e)),e?(e=e.rgb(),new Sa(e.r,e.g,e.b,e.opacity)):new Sa}function K_(e,t,n,r){return arguments.length===1?r1e(e):new Sa(e,t,n,r??1)}function Sa(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}UC(Sa,K_,C6(Up,{brighter(e){return e=e==null?Cx:Math.pow(Cx,e),new Sa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Nm:Math.pow(Nm,e),new Sa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Sa(bc(this.r),bc(this.g),bc(this.b),Ax(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:NO,formatHex:NO,formatHex8:a1e,formatRgb:CO,toString:CO}));function NO(){return`#${cc(this.r)}${cc(this.g)}${cc(this.b)}`}function a1e(){return`#${cc(this.r)}${cc(this.g)}${cc(this.b)}${cc((isNaN(this.opacity)?1:this.opacity)*255)}`}function CO(){const e=Ax(this.opacity);return`${e===1?"rgb(":"rgba("}${bc(this.r)}, ${bc(this.g)}, ${bc(this.b)}${e===1?")":`, ${e})`}`}function Ax(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function bc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function cc(e){return e=bc(e),(e<16?"0":"")+e.toString(16)}function AO(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Vi(e,t,n,r)}function A6(e){if(e instanceof Vi)return new Vi(e.h,e.s,e.l,e.opacity);if(e instanceof Up||(e=Am(e)),!e)return new Vi;if(e instanceof Vi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Vi(o,l,c,e.opacity)}function i1e(e,t,n,r){return arguments.length===1?A6(e):new Vi(e,t,n,r??1)}function Vi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}UC(Vi,i1e,C6(Up,{brighter(e){return e=e==null?Cx:Math.pow(Cx,e),new Vi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nm:Math.pow(Nm,e),new Vi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Sa(tj(e>=240?e-240:e+120,a,r),tj(e,a,r),tj(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Vi(EO(this.h),Rg(this.s),Rg(this.l),Ax(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ax(this.opacity);return`${e===1?"hsl(":"hsla("}${EO(this.h)}, ${Rg(this.s)*100}%, ${Rg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function EO(e){return e=(e||0)%360,e<0?e+360:e}function Rg(e){return Math.max(0,Math.min(1,e||0))}function tj(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const zC=e=>()=>e;function s1e(e,t){return function(n){return e+n*t}}function o1e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function l1e(e){return(e=+e)==1?E6:function(t,n){return n-t?o1e(t,n,e):zC(isNaN(t)?n:t)}}function E6(e,t){var n=t-e;return n?s1e(e,n):zC(isNaN(e)?t:e)}const PO=function e(t){var n=l1e(t);function r(a,s){var o=n((a=K_(a)).r,(s=K_(s)).r),l=n(a.g,s.g),c=n(a.b,s.b),u=E6(a.opacity,s.opacity);return function(f){return a.r=o(f),a.g=l(f),a.b=c(f),a.opacity=u(f),a+""}}return r.gamma=e,r}(1);function c1e(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(s){for(a=0;a<n;++a)r[a]=e[a]*(1-s)+t[a]*s;return r}}function u1e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function d1e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)a[o]=_f(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=a[o](l);return s}}function f1e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ex(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function h1e(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=_f(e[a],t[a]):r[a]=t[a];return function(s){for(a in n)r[a]=n[a](s);return r}}var G_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nj=new RegExp(G_.source,"g");function m1e(e){return function(){return e}}function p1e(e){return function(t){return e(t)+""}}function g1e(e,t){var n=G_.lastIndex=nj.lastIndex=0,r,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=G_.exec(e))&&(a=nj.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Ex(r,a)})),n=nj.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?p1e(c[0].x):m1e(t):(t=c.length,function(u){for(var f=0,d;f<t;++f)l[(d=c[f]).i]=d.x(u);return l.join("")})}function _f(e,t){var n=typeof t,r;return t==null||n==="boolean"?zC(t):(n==="number"?Ex:n==="string"?(r=Am(t))?(t=r,PO):g1e:t instanceof Am?PO:t instanceof Date?f1e:u1e(t)?c1e:Array.isArray(t)?d1e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?h1e:Ex)(e,t)}function qC(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function v1e(e,t){t===void 0&&(t=e,e=_f);for(var n=0,r=t.length-1,a=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[l](o-l)}}function x1e(e){return function(){return e}}function Px(e){return+e}var TO=[0,1];function oa(e){return e}function Y_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:x1e(isNaN(t)?NaN:.5)}function y1e(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function b1e(e,t,n){var r=e[0],a=e[1],s=t[0],o=t[1];return a<r?(r=Y_(a,r),s=n(o,s)):(r=Y_(r,a),s=n(s,o)),function(l){return s(r(l))}}function w1e(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=Y_(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(l){var c=Bp(e,l,1,r)-1;return s[c](a[c](l))}}function zp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Xb(){var e=TO,t=TO,n=_f,r,a,s,o=oa,l,c,u;function f(){var h=Math.min(e.length,t.length);return o!==oa&&(o=y1e(e[0],e[h-1])),l=h>2?w1e:b1e,c=u=null,d}function d(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(r),t,n)))(r(o(h)))}return d.invert=function(h){return o(a((u||(u=l(t,e.map(r),Ex)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,Px),f()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),n=qC,f()},d.clamp=function(h){return arguments.length?(o=h?!0:oa,f()):o!==oa},d.interpolate=function(h){return arguments.length?(n=h,f()):n},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,m){return r=h,a=m,f()}}function WC(){return Xb()(oa,oa)}function j1e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Tx(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Fd(e){return e=Tx(Math.abs(e)),e?e[1]:NaN}function _1e(e,t){return function(n,r){for(var a=n.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(a-=l,a+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function k1e(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var S1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Em(e){if(!(t=S1e.exec(e)))throw new Error("invalid format: "+e);var t;return new HC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Em.prototype=HC.prototype;function HC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}HC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function N1e(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var P6;function C1e(e,t){var n=Tx(e,t);if(!n)return e+"";var r=n[0],a=n[1],s=a-(P6=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Tx(e,Math.max(0,t+s-1))[0]}function OO(e,t){var n=Tx(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const IO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:j1e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>OO(e*100,t),r:OO,s:C1e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function RO(e){return e}var MO=Array.prototype.map,DO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function A1e(e){var t=e.grouping===void 0||e.thousands===void 0?RO:_1e(MO.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?RO:k1e(MO.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Em(d);var h=d.fill,m=d.align,g=d.sign,v=d.symbol,x=d.zero,y=d.width,b=d.comma,w=d.precision,k=d.trim,j=d.type;j==="n"?(b=!0,j="g"):IO[j]||(w===void 0&&(w=12),k=!0,j="g"),(x||h==="0"&&m==="=")&&(x=!0,h="0",m="=");var _=v==="$"?n:v==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",S=v==="$"?r:/[%p]/.test(j)?o:"",T=IO[j],N=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function A(D){var B=_,E=S,R,P,U;if(j==="c")E=T(D)+E,D="";else{D=+D;var L=D<0||1/D<0;if(D=isNaN(D)?c:T(Math.abs(D),w),k&&(D=N1e(D)),L&&+D==0&&g!=="+"&&(L=!1),B=(L?g==="("?g:l:g==="-"||g==="("?"":g)+B,E=(j==="s"?DO[8+P6/3]:"")+E+(L&&g==="("?")":""),N){for(R=-1,P=D.length;++R<P;)if(U=D.charCodeAt(R),48>U||U>57){E=(U===46?a+D.slice(R+1):D.slice(R))+E,D=D.slice(0,R);break}}}b&&!x&&(D=t(D,1/0));var O=B.length+D.length+E.length,F=O<y?new Array(y-O+1).join(h):"";switch(b&&x&&(D=t(F+D,F.length?y-E.length:1/0),F=""),m){case"<":D=B+D+E+F;break;case"=":D=B+F+D+E;break;case"^":D=F.slice(0,O=F.length>>1)+B+D+E+F.slice(O);break;default:D=F+B+D+E;break}return s(D)}return A.toString=function(){return d+""},A}function f(d,h){var m=u((d=Em(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(Fd(h)/3)))*3,v=Math.pow(10,-g),x=DO[8+g/3];return function(y){return m(v*y)+x}}return{format:u,formatPrefix:f}}var Mg,VC,T6;E1e({thousands:",",grouping:[3],currency:["$",""]});function E1e(e){return Mg=A1e(e),VC=Mg.format,T6=Mg.formatPrefix,Mg}function P1e(e){return Math.max(0,-Fd(Math.abs(e)))}function T1e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fd(t)/3)))*3-Fd(Math.abs(e)))}function O1e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Fd(t)-Fd(e))+1}function O6(e,t,n,r){var a=H_(e,t,n),s;switch(r=Em(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=T1e(a,o))&&(r.precision=s),T6(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=O1e(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=P1e(a))&&(r.precision=s-(r.type==="%")*2);break}}return VC(r)}function Ll(e){var t=e.domain;return e.ticks=function(n){var r=t();return q_(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return O6(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,s=r.length-1,o=r[a],l=r[s],c,u,f=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);f-- >0;){if(u=W_(o,l,n),u===c)return r[a]=o,r[s]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Ox(){var e=WC();return e.copy=function(){return zp(e,Ox())},Si.apply(e,arguments),Ll(e)}function I6(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Px),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return I6(e).unknown(t)},e=arguments.length?Array.from(e,Px):[0,1],Ll(n)}function R6(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],s=e[r],o;return s<a&&(o=n,n=r,r=o,o=a,a=s,s=o),e[n]=t.floor(a),e[r]=t.ceil(s),e}function $O(e){return Math.log(e)}function LO(e){return Math.exp(e)}function I1e(e){return-Math.log(-e)}function R1e(e){return-Math.exp(-e)}function M1e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function D1e(e){return e===10?M1e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function $1e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function FO(e){return(t,n)=>-e(-t,n)}function KC(e){const t=e($O,LO),n=t.domain;let r=10,a,s;function o(){return a=$1e(r),s=D1e(r),n()[0]<0?(a=FO(a),s=FO(s),e(I1e,R1e)):e($O,LO),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let h=a(u),m=a(f),g,v;const x=l==null?10:+l;let y=[];if(!(r%1)&&m-h<x){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<r;++g)if(v=h<0?g/s(-h):g*s(h),!(v<u)){if(v>f)break;y.push(v)}}else for(;h<=m;++h)for(g=r-1;g>=1;--g)if(v=h>0?g/s(-h):g*s(h),!(v<u)){if(v>f)break;y.push(v)}y.length*2<x&&(y=q_(u,f,x))}else y=q_(h,m,Math.min(m-h,x)).map(s);return d?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Em(c)).precision==null&&(c.trim=!0),c=VC(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return f=>{let d=f/s(Math.round(a(f)));return d*r<r-.5&&(d*=r),d<=u?c(f):""}},t.nice=()=>n(R6(n(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function M6(){const e=KC(Xb()).domain([1,10]);return e.copy=()=>zp(e,M6()).base(e.base()),Si.apply(e,arguments),e}function BO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function UO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function GC(e){var t=1,n=e(BO(t),UO(t));return n.constant=function(r){return arguments.length?e(BO(t=+r),UO(t)):t},Ll(n)}function D6(){var e=GC(Xb());return e.copy=function(){return zp(e,D6()).constant(e.constant())},Si.apply(e,arguments)}function zO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function L1e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function F1e(e){return e<0?-e*e:e*e}function YC(e){var t=e(oa,oa),n=1;function r(){return n===1?e(oa,oa):n===.5?e(L1e,F1e):e(zO(n),zO(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Ll(t)}function XC(){var e=YC(Xb());return e.copy=function(){return zp(e,XC()).exponent(e.exponent())},Si.apply(e,arguments),e}function B1e(){return XC.apply(null,arguments).exponent(.5)}function qO(e){return Math.sign(e)*e*e}function U1e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function $6(){var e=WC(),t=[0,1],n=!1,r;function a(s){var o=U1e(e(s));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(s){return e.invert(qO(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,Px)).map(qO)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(n=!!s,a):n},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return $6(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Si.apply(a,arguments),Ll(a)}function L6(){var e=[],t=[],n=[],r;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=Vje(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Bp(n,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ml),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return L6().domain(e).range(t).unknown(r)},Si.apply(s,arguments)}function F6(){var e=0,t=1,n=1,r=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Bp(r,c,0,n)]:s}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return F6().domain([e,t]).range(a).unknown(s)},Si.apply(Ll(o),arguments)}function B6(){var e=[.5],t=[0,1],n,r=1;function a(s){return s!=null&&s<=s?t[Bp(e,s,0,r)]:n}return a.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return B6().domain(e).range(t).unknown(n)},Si.apply(a,arguments)}const rj=new Date,aj=new Date;function pr(e,t,n,r){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>pr(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),n&&(a.count=(s,o)=>(rj.setTime(+s),aj.setTime(+o),e(rj),e(aj),Math.floor(n(rj,aj))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(r?o=>r(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const Ix=pr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ix.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?pr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ix);Ix.range;const Zs=1e3,pi=Zs*60,eo=pi*60,yo=eo*24,JC=yo*7,WO=yo*30,ij=yo*365,uc=pr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Zs)},(e,t)=>(t-e)/Zs,e=>e.getUTCSeconds());uc.range;const QC=pr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zs)},(e,t)=>{e.setTime(+e+t*pi)},(e,t)=>(t-e)/pi,e=>e.getMinutes());QC.range;const ZC=pr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*pi)},(e,t)=>(t-e)/pi,e=>e.getUTCMinutes());ZC.range;const eA=pr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zs-e.getMinutes()*pi)},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getHours());eA.range;const tA=pr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*eo)},(e,t)=>(t-e)/eo,e=>e.getUTCHours());tA.range;const qp=pr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*pi)/yo,e=>e.getDate()-1);qp.range;const Jb=pr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yo,e=>e.getUTCDate()-1);Jb.range;const U6=pr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/yo,e=>Math.floor(e/yo));U6.range;function nu(e){return pr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*pi)/JC)}const Qb=nu(0),Rx=nu(1),z1e=nu(2),q1e=nu(3),Bd=nu(4),W1e=nu(5),H1e=nu(6);Qb.range;Rx.range;z1e.range;q1e.range;Bd.range;W1e.range;H1e.range;function ru(e){return pr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/JC)}const Zb=ru(0),Mx=ru(1),V1e=ru(2),K1e=ru(3),Ud=ru(4),G1e=ru(5),Y1e=ru(6);Zb.range;Mx.range;V1e.range;K1e.range;Ud.range;G1e.range;Y1e.range;const nA=pr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());nA.range;const rA=pr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());rA.range;const bo=pr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());bo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});bo.range;const wo=pr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());wo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});wo.range;function z6(e,t,n,r,a,s){const o=[[uc,1,Zs],[uc,5,5*Zs],[uc,15,15*Zs],[uc,30,30*Zs],[s,1,pi],[s,5,5*pi],[s,15,15*pi],[s,30,30*pi],[a,1,eo],[a,3,3*eo],[a,6,6*eo],[a,12,12*eo],[r,1,yo],[r,2,2*yo],[n,1,JC],[t,1,WO],[t,3,3*WO],[e,1,ij]];function l(u,f,d){const h=f<u;h&&([u,f]=[f,u]);const m=d&&typeof d.range=="function"?d:c(u,f,d),g=m?m.range(u,+f+1):[];return h?g.reverse():g}function c(u,f,d){const h=Math.abs(f-u)/d,m=FC(([,,x])=>x).right(o,h);if(m===o.length)return e.every(H_(u/ij,f/ij,d));if(m===0)return Ix.every(Math.max(H_(u,f,d),1));const[g,v]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(v)}return[l,c]}const[X1e,J1e]=z6(wo,rA,Zb,U6,tA,ZC),[Q1e,Z1e]=z6(bo,nA,Qb,qp,eA,QC);function sj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function oj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Xf(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function e_e(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Jf(a),f=Qf(a),d=Jf(s),h=Qf(s),m=Jf(o),g=Qf(o),v=Jf(l),x=Qf(l),y=Jf(c),b=Qf(c),w={a:L,A:O,b:F,B:C,c:null,d:XO,e:XO,f:__e,g:I_e,G:M_e,H:b_e,I:w_e,j:j_e,L:q6,m:k_e,M:S_e,p:z,q:I,Q:ZO,s:eI,S:N_e,u:C_e,U:A_e,V:E_e,w:P_e,W:T_e,x:null,X:null,y:O_e,Y:R_e,Z:D_e,"%":QO},k={a:$,A:K,b:X,B:V,c:null,d:JO,e:JO,f:B_e,g:X_e,G:Q_e,H:$_e,I:L_e,j:F_e,L:H6,m:U_e,M:z_e,p:W,q:ae,Q:ZO,s:eI,S:q_e,u:W_e,U:H_e,V:V_e,w:K_e,W:G_e,x:null,X:null,y:Y_e,Y:J_e,Z:Z_e,"%":QO},j={a:A,A:D,b:B,B:E,c:R,d:GO,e:GO,f:g_e,g:KO,G:VO,H:YO,I:YO,j:f_e,L:p_e,m:d_e,M:h_e,p:N,q:u_e,Q:x_e,s:y_e,S:m_e,u:i_e,U:s_e,V:o_e,w:a_e,W:l_e,x:P,X:U,y:KO,Y:VO,Z:c_e,"%":v_e};w.x=_(n,w),w.X=_(r,w),w.c=_(t,w),k.x=_(n,k),k.X=_(r,k),k.c=_(t,k);function _(G,le){return function(se){var Q=[],_e=-1,xe=0,J=G.length,fe,Ce,Te;for(se instanceof Date||(se=new Date(+se));++_e<J;)G.charCodeAt(_e)===37&&(Q.push(G.slice(xe,_e)),(Ce=HO[fe=G.charAt(++_e)])!=null?fe=G.charAt(++_e):Ce=fe==="e"?" ":"0",(Te=le[fe])&&(fe=Te(se,Ce)),Q.push(fe),xe=_e+1);return Q.push(G.slice(xe,_e)),Q.join("")}}function S(G,le){return function(se){var Q=Xf(1900,void 0,1),_e=T(Q,G,se+="",0),xe,J;if(_e!=se.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(le&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(xe=oj(Xf(Q.y,0,1)),J=xe.getUTCDay(),xe=J>4||J===0?Mx.ceil(xe):Mx(xe),xe=Jb.offset(xe,(Q.V-1)*7),Q.y=xe.getUTCFullYear(),Q.m=xe.getUTCMonth(),Q.d=xe.getUTCDate()+(Q.w+6)%7):(xe=sj(Xf(Q.y,0,1)),J=xe.getDay(),xe=J>4||J===0?Rx.ceil(xe):Rx(xe),xe=qp.offset(xe,(Q.V-1)*7),Q.y=xe.getFullYear(),Q.m=xe.getMonth(),Q.d=xe.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),J="Z"in Q?oj(Xf(Q.y,0,1)).getUTCDay():sj(Xf(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(J+5)%7:Q.w+Q.U*7-(J+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,oj(Q)):sj(Q)}}function T(G,le,se,Q){for(var _e=0,xe=le.length,J=se.length,fe,Ce;_e<xe;){if(Q>=J)return-1;if(fe=le.charCodeAt(_e++),fe===37){if(fe=le.charAt(_e++),Ce=j[fe in HO?le.charAt(_e++):fe],!Ce||(Q=Ce(G,se,Q))<0)return-1}else if(fe!=se.charCodeAt(Q++))return-1}return Q}function N(G,le,se){var Q=u.exec(le.slice(se));return Q?(G.p=f.get(Q[0].toLowerCase()),se+Q[0].length):-1}function A(G,le,se){var Q=m.exec(le.slice(se));return Q?(G.w=g.get(Q[0].toLowerCase()),se+Q[0].length):-1}function D(G,le,se){var Q=d.exec(le.slice(se));return Q?(G.w=h.get(Q[0].toLowerCase()),se+Q[0].length):-1}function B(G,le,se){var Q=y.exec(le.slice(se));return Q?(G.m=b.get(Q[0].toLowerCase()),se+Q[0].length):-1}function E(G,le,se){var Q=v.exec(le.slice(se));return Q?(G.m=x.get(Q[0].toLowerCase()),se+Q[0].length):-1}function R(G,le,se){return T(G,t,le,se)}function P(G,le,se){return T(G,n,le,se)}function U(G,le,se){return T(G,r,le,se)}function L(G){return o[G.getDay()]}function O(G){return s[G.getDay()]}function F(G){return c[G.getMonth()]}function C(G){return l[G.getMonth()]}function z(G){return a[+(G.getHours()>=12)]}function I(G){return 1+~~(G.getMonth()/3)}function $(G){return o[G.getUTCDay()]}function K(G){return s[G.getUTCDay()]}function X(G){return c[G.getUTCMonth()]}function V(G){return l[G.getUTCMonth()]}function W(G){return a[+(G.getUTCHours()>=12)]}function ae(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var le=_(G+="",w);return le.toString=function(){return G},le},parse:function(G){var le=S(G+="",!1);return le.toString=function(){return G},le},utcFormat:function(G){var le=_(G+="",k);return le.toString=function(){return G},le},utcParse:function(G){var le=S(G+="",!0);return le.toString=function(){return G},le}}}var HO={"-":"",_:" ",0:"0"},jr=/^\s*\d+/,t_e=/^%/,n_e=/[\\^$*+?|[\]().{}]/g;function Zt(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",s=a.length;return r+(s<n?new Array(n-s+1).join(t)+a:a)}function r_e(e){return e.replace(n_e,"\\$&")}function Jf(e){return new RegExp("^(?:"+e.map(r_e).join("|")+")","i")}function Qf(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function a_e(e,t,n){var r=jr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function i_e(e,t,n){var r=jr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function s_e(e,t,n){var r=jr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function o_e(e,t,n){var r=jr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function l_e(e,t,n){var r=jr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function VO(e,t,n){var r=jr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function KO(e,t,n){var r=jr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function c_e(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function u_e(e,t,n){var r=jr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function d_e(e,t,n){var r=jr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function GO(e,t,n){var r=jr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function f_e(e,t,n){var r=jr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function YO(e,t,n){var r=jr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function h_e(e,t,n){var r=jr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function m_e(e,t,n){var r=jr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function p_e(e,t,n){var r=jr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function g_e(e,t,n){var r=jr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function v_e(e,t,n){var r=t_e.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function x_e(e,t,n){var r=jr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function y_e(e,t,n){var r=jr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function XO(e,t){return Zt(e.getDate(),t,2)}function b_e(e,t){return Zt(e.getHours(),t,2)}function w_e(e,t){return Zt(e.getHours()%12||12,t,2)}function j_e(e,t){return Zt(1+qp.count(bo(e),e),t,3)}function q6(e,t){return Zt(e.getMilliseconds(),t,3)}function __e(e,t){return q6(e,t)+"000"}function k_e(e,t){return Zt(e.getMonth()+1,t,2)}function S_e(e,t){return Zt(e.getMinutes(),t,2)}function N_e(e,t){return Zt(e.getSeconds(),t,2)}function C_e(e){var t=e.getDay();return t===0?7:t}function A_e(e,t){return Zt(Qb.count(bo(e)-1,e),t,2)}function W6(e){var t=e.getDay();return t>=4||t===0?Bd(e):Bd.ceil(e)}function E_e(e,t){return e=W6(e),Zt(Bd.count(bo(e),e)+(bo(e).getDay()===4),t,2)}function P_e(e){return e.getDay()}function T_e(e,t){return Zt(Rx.count(bo(e)-1,e),t,2)}function O_e(e,t){return Zt(e.getFullYear()%100,t,2)}function I_e(e,t){return e=W6(e),Zt(e.getFullYear()%100,t,2)}function R_e(e,t){return Zt(e.getFullYear()%1e4,t,4)}function M_e(e,t){var n=e.getDay();return e=n>=4||n===0?Bd(e):Bd.ceil(e),Zt(e.getFullYear()%1e4,t,4)}function D_e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Zt(t/60|0,"0",2)+Zt(t%60,"0",2)}function JO(e,t){return Zt(e.getUTCDate(),t,2)}function $_e(e,t){return Zt(e.getUTCHours(),t,2)}function L_e(e,t){return Zt(e.getUTCHours()%12||12,t,2)}function F_e(e,t){return Zt(1+Jb.count(wo(e),e),t,3)}function H6(e,t){return Zt(e.getUTCMilliseconds(),t,3)}function B_e(e,t){return H6(e,t)+"000"}function U_e(e,t){return Zt(e.getUTCMonth()+1,t,2)}function z_e(e,t){return Zt(e.getUTCMinutes(),t,2)}function q_e(e,t){return Zt(e.getUTCSeconds(),t,2)}function W_e(e){var t=e.getUTCDay();return t===0?7:t}function H_e(e,t){return Zt(Zb.count(wo(e)-1,e),t,2)}function V6(e){var t=e.getUTCDay();return t>=4||t===0?Ud(e):Ud.ceil(e)}function V_e(e,t){return e=V6(e),Zt(Ud.count(wo(e),e)+(wo(e).getUTCDay()===4),t,2)}function K_e(e){return e.getUTCDay()}function G_e(e,t){return Zt(Mx.count(wo(e)-1,e),t,2)}function Y_e(e,t){return Zt(e.getUTCFullYear()%100,t,2)}function X_e(e,t){return e=V6(e),Zt(e.getUTCFullYear()%100,t,2)}function J_e(e,t){return Zt(e.getUTCFullYear()%1e4,t,4)}function Q_e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ud(e):Ud.ceil(e),Zt(e.getUTCFullYear()%1e4,t,4)}function Z_e(){return"+0000"}function QO(){return"%"}function ZO(e){return+e}function eI(e){return Math.floor(+e/1e3)}var xu,K6,G6;eke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function eke(e){return xu=e_e(e),K6=xu.format,xu.parse,G6=xu.utcFormat,xu.utcParse,xu}function tke(e){return new Date(e)}function nke(e){return e instanceof Date?+e:+new Date(+e)}function aA(e,t,n,r,a,s,o,l,c,u){var f=WC(),d=f.invert,h=f.domain,m=u(".%L"),g=u(":%S"),v=u("%I:%M"),x=u("%I %p"),y=u("%a %d"),b=u("%b %d"),w=u("%B"),k=u("%Y");function j(_){return(c(_)<_?m:l(_)<_?g:o(_)<_?v:s(_)<_?x:r(_)<_?a(_)<_?y:b:n(_)<_?w:k)(_)}return f.invert=function(_){return new Date(d(_))},f.domain=function(_){return arguments.length?h(Array.from(_,nke)):h().map(tke)},f.ticks=function(_){var S=h();return e(S[0],S[S.length-1],_??10)},f.tickFormat=function(_,S){return S==null?j:u(S)},f.nice=function(_){var S=h();return(!_||typeof _.range!="function")&&(_=t(S[0],S[S.length-1],_??10)),_?h(R6(S,_)):f},f.copy=function(){return zp(f,aA(e,t,n,r,a,s,o,l,c,u))},f}function rke(){return Si.apply(aA(Q1e,Z1e,bo,nA,Qb,qp,eA,QC,uc,K6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ake(){return Si.apply(aA(X1e,J1e,wo,rA,Zb,Jb,tA,ZC,uc,G6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function e0(){var e=0,t=1,n,r,a,s,o=oa,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(a===0?.5:(d=(s(d)-n)*a,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=s(e=+e),r=s(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(h){var m,g;return arguments.length?([m,g]=h,o=d(m,g),u):[o(0),o(1)]}}return u.range=f(_f),u.rangeRound=f(qC),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return s=d,n=d(e),r=d(t),a=n===r?0:1/(r-n),u}}function Fl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Y6(){var e=Ll(e0()(oa));return e.copy=function(){return Fl(e,Y6())},No.apply(e,arguments)}function X6(){var e=KC(e0()).domain([1,10]);return e.copy=function(){return Fl(e,X6()).base(e.base())},No.apply(e,arguments)}function J6(){var e=GC(e0());return e.copy=function(){return Fl(e,J6()).constant(e.constant())},No.apply(e,arguments)}function iA(){var e=YC(e0());return e.copy=function(){return Fl(e,iA()).exponent(e.exponent())},No.apply(e,arguments)}function ike(){return iA.apply(null,arguments).exponent(.5)}function Q6(){var e=[],t=oa;function n(r){if(r!=null&&!isNaN(r=+r))return t((Bp(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ml),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,s)=>Hje(e,s/r))},n.copy=function(){return Q6(t).domain(e)},No.apply(n,arguments)}function t0(){var e=0,t=.5,n=1,r=1,a,s,o,l,c,u=oa,f,d=!1,h;function m(v){return isNaN(v=+v)?h:(v=.5+((v=+f(v))-s)*(r*v<r*s?l:c),u(d?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,n]=v,a=f(e=+e),s=f(t=+t),o=f(n=+n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,m):[e,t,n]},m.clamp=function(v){return arguments.length?(d=!!v,m):d},m.interpolator=function(v){return arguments.length?(u=v,m):u};function g(v){return function(x){var y,b,w;return arguments.length?([y,b,w]=x,u=v1e(v,[y,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=g(_f),m.rangeRound=g(qC),m.unknown=function(v){return arguments.length?(h=v,m):h},function(v){return f=v,a=v(e),s=v(t),o=v(n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,m}}function Z6(){var e=Ll(t0()(oa));return e.copy=function(){return Fl(e,Z6())},No.apply(e,arguments)}function e8(){var e=KC(t0()).domain([.1,1,10]);return e.copy=function(){return Fl(e,e8()).base(e.base())},No.apply(e,arguments)}function t8(){var e=GC(t0());return e.copy=function(){return Fl(e,t8()).constant(e.constant())},No.apply(e,arguments)}function sA(){var e=YC(t0());return e.copy=function(){return Fl(e,sA()).exponent(e.exponent())},No.apply(e,arguments)}function ske(){return sA.apply(null,arguments).exponent(.5)}const tI=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Sm,scaleDiverging:Z6,scaleDivergingLog:e8,scaleDivergingPow:sA,scaleDivergingSqrt:ske,scaleDivergingSymlog:t8,scaleIdentity:I6,scaleImplicit:V_,scaleLinear:Ox,scaleLog:M6,scaleOrdinal:BC,scalePoint:Ph,scalePow:XC,scaleQuantile:L6,scaleQuantize:F6,scaleRadial:$6,scaleSequential:Y6,scaleSequentialLog:X6,scaleSequentialPow:iA,scaleSequentialQuantile:Q6,scaleSequentialSqrt:ike,scaleSequentialSymlog:J6,scaleSqrt:B1e,scaleSymlog:D6,scaleThreshold:B6,scaleTime:rke,scaleUtc:ake,tickFormat:O6},Symbol.toStringTag,{value:"Module"}));var oke=pf;function lke(e,t,n){for(var r=-1,a=e.length;++r<a;){var s=e[r],o=t(s);if(o!=null&&(l===void 0?o===o&&!oke(o):n(o,l)))var l=o,c=s}return c}var n8=lke;function cke(e,t){return e>t}var uke=cke,dke=n8,fke=uke,hke=jf;function mke(e){return e&&e.length?dke(e,hke,fke):void 0}var pke=mke;const n0=un(pke);function gke(e,t){return e<t}var vke=gke,xke=n8,yke=vke,bke=jf;function wke(e){return e&&e.length?xke(e,bke,yke):void 0}var jke=wke;const r0=un(jke);var _ke=bC,kke=$l,Ske=u6,Nke=Oa;function Cke(e,t){var n=Nke(e)?_ke:Ske;return n(e,kke(t))}var Ake=Cke,Eke=l6,Pke=Ake;function Tke(e,t){return Eke(Pke(e,t),1)}var Oke=Tke;const Ike=un(Oke);var Rke=MC;function Mke(e,t){return Rke(e,t)}var Dke=Mke;const oA=un(Dke);var kf=1e9,$ke={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},cA,Mn=!0,ji="[DecimalError] ",wc=ji+"Invalid argument: ",lA=ji+"Exponent out of range: ",Sf=Math.floor,ec=Math.pow,Lke=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,za,gr=1e7,Cn=7,r8=9007199254740991,Dx=Sf(r8/Cn),rt={};rt.absoluteValue=rt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};rt.comparedTo=rt.cmp=function(e){var t,n,r,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===a?0:r>a^s.s<0?1:-1};rt.decimalPlaces=rt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Cn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};rt.dividedBy=rt.div=function(e){return lo(this,new this.constructor(e))};rt.dividedToIntegerBy=rt.idiv=function(e){var t=this,n=t.constructor;return gn(lo(t,new n(e),0,1),n.precision)};rt.equals=rt.eq=function(e){return!this.cmp(e)};rt.exponent=function(){return ir(this)};rt.greaterThan=rt.gt=function(e){return this.cmp(e)>0};rt.greaterThanOrEqualTo=rt.gte=function(e){return this.cmp(e)>=0};rt.isInteger=rt.isint=function(){return this.e>this.d.length-2};rt.isNegative=rt.isneg=function(){return this.s<0};rt.isPositive=rt.ispos=function(){return this.s>0};rt.isZero=function(){return this.s===0};rt.lessThan=rt.lt=function(e){return this.cmp(e)<0};rt.lessThanOrEqualTo=rt.lte=function(e){return this.cmp(e)<1};rt.logarithm=rt.log=function(e){var t,n=this,r=n.constructor,a=r.precision,s=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(za))throw Error(ji+"NaN");if(n.s<1)throw Error(ji+(n.s?"NaN":"-Infinity"));return n.eq(za)?new r(0):(Mn=!1,t=lo(Pm(n,s),Pm(e,s),s),Mn=!0,gn(t,a))};rt.minus=rt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?s8(t,e):a8(t,(e.s=-e.s,e))};rt.modulo=rt.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(ji+"NaN");return n.s?(Mn=!1,t=lo(n,e,0,1).times(e),Mn=!0,n.minus(t)):gn(new r(n),a)};rt.naturalExponential=rt.exp=function(){return i8(this)};rt.naturalLogarithm=rt.ln=function(){return Pm(this)};rt.negated=rt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};rt.plus=rt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?a8(t,e):s8(t,(e.s=-e.s,e))};rt.precision=rt.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(wc+e);if(t=ir(a)+1,r=a.d.length-1,n=r*Cn+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};rt.squareRoot=rt.sqrt=function(){var e,t,n,r,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ji+"NaN")}for(e=ir(l),Mn=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=js(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Sf((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(s=r,r=s.plus(lo(l,s,o+2)).times(.5),js(s.d).slice(0,o)===(t=js(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(gn(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(t!="9999")break;o+=4}return Mn=!0,gn(r,n)};rt.times=rt.mul=function(e){var t,n,r,a,s,o,l,c,u,f=this,d=f.constructor,h=f.d,m=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,n=f.e+e.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,o=c,c=u,u=o),s=[],o=c+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=s[a]+m[r]*h[a-r-1]+t,s[a--]=l%gr|0,t=l/gr|0;s[a]=(s[a]+t)%gr|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,Mn?gn(e,d.precision):e};rt.toDecimalPlaces=rt.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ts(e,0,kf),t===void 0?t=r.rounding:Ts(t,0,8),gn(n,e+ir(n)+1,t))};rt.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=zc(r,!0):(Ts(e,0,kf),t===void 0?t=a.rounding:Ts(t,0,8),r=gn(new a(r),e+1,t),n=zc(r,!0,e+1)),n};rt.toFixed=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?zc(a):(Ts(e,0,kf),t===void 0?t=s.rounding:Ts(t,0,8),r=gn(new s(a),e+ir(a)+1,t),n=zc(r.abs(),!1,e+ir(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};rt.toInteger=rt.toint=function(){var e=this,t=e.constructor;return gn(new t(e),ir(e)+1,t.rounding)};rt.toNumber=function(){return+this};rt.toPower=rt.pow=function(e){var t,n,r,a,s,o,l=this,c=l.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(za);if(l=new c(l),!l.s){if(e.s<1)throw Error(ji+"Infinity");return l}if(l.eq(za))return l;if(r=c.precision,e.eq(za))return gn(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,s=l.s,o){if((n=f<0?-f:f)<=r8){for(a=new c(za),t=Math.ceil(r/Cn+4),Mn=!1;n%2&&(a=a.times(l),rI(a.d,t)),n=Sf(n/2),n!==0;)l=l.times(l),rI(l.d,t);return Mn=!0,e.s<0?new c(za).div(a):gn(a,r)}}else if(s<0)throw Error(ji+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Mn=!1,a=e.times(Pm(l,r+u)),Mn=!0,a=i8(a),a.s=s,a};rt.toPrecision=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?(n=ir(a),r=zc(a,n<=s.toExpNeg||n>=s.toExpPos)):(Ts(e,1,kf),t===void 0?t=s.rounding:Ts(t,0,8),a=gn(new s(a),e,t),n=ir(a),r=zc(a,e<=n||n<=s.toExpNeg,e)),r};rt.toSignificantDigits=rt.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ts(e,1,kf),t===void 0?t=r.rounding:Ts(t,0,8)),gn(new r(n),e,t)};rt.toString=rt.valueOf=rt.val=rt.toJSON=rt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ir(e),n=e.constructor;return zc(e,t<=n.toExpNeg||t>=n.toExpPos)};function a8(e,t){var n,r,a,s,o,l,c,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Mn?gn(t,d):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(r=c,s=-s,l=u.length):(r=u,a=o,l=c.length),o=Math.ceil(d/Cn),l=o>l?o+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/gr|0,c[s]%=gr;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Mn?gn(t,d):t}function Ts(e,t,n){if(e!==~~e||e<t||e>n)throw Error(wc+e)}function js(e){var t,n,r,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)r=e[t]+"",n=Cn-r.length,n&&(s+=qo(n)),s+=r;o=e[t],r=o+"",n=Cn-r.length,n&&(s+=qo(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var lo=function(){function e(r,a){var s,o=0,l=r.length;for(r=r.slice();l--;)s=r[l]*a+o,r[l]=s%gr|0,o=s/gr|0;return o&&r.unshift(o),r}function t(r,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(r[l]!=a[l]){c=r[l]>a[l]?1:-1;break}return c}function n(r,a,s){for(var o=0;s--;)r[s]-=o,o=r[s]<a[s]?1:0,r[s]=o*gr+r[s]-a[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,s,o){var l,c,u,f,d,h,m,g,v,x,y,b,w,k,j,_,S,T,N=r.constructor,A=r.s==a.s?1:-1,D=r.d,B=a.d;if(!r.s)return new N(r);if(!a.s)throw Error(ji+"Division by zero");for(c=r.e-a.e,S=B.length,j=D.length,m=new N(A),g=m.d=[],u=0;B[u]==(D[u]||0);)++u;if(B[u]>(D[u]||0)&&--c,s==null?b=s=N.precision:o?b=s+(ir(r)-ir(a))+1:b=s,b<0)return new N(0);if(b=b/Cn+2|0,u=0,S==1)for(f=0,B=B[0],b++;(u<j||f)&&b--;u++)w=f*gr+(D[u]||0),g[u]=w/B|0,f=w%B|0;else{for(f=gr/(B[0]+1)|0,f>1&&(B=e(B,f),D=e(D,f),S=B.length,j=D.length),k=S,v=D.slice(0,S),x=v.length;x<S;)v[x++]=0;T=B.slice(),T.unshift(0),_=B[0],B[1]>=gr/2&&++_;do f=0,l=t(B,v,S,x),l<0?(y=v[0],S!=x&&(y=y*gr+(v[1]||0)),f=y/_|0,f>1?(f>=gr&&(f=gr-1),d=e(B,f),h=d.length,x=v.length,l=t(d,v,h,x),l==1&&(f--,n(d,S<h?T:B,h))):(f==0&&(l=f=1),d=B.slice()),h=d.length,h<x&&d.unshift(0),n(v,d,x),l==-1&&(x=v.length,l=t(B,v,S,x),l<1&&(f++,n(v,S<x?T:B,x))),x=v.length):l===0&&(f++,v=[0]),g[u++]=f,l&&v[0]?v[x++]=D[k]||0:(v=[D[k]],x=1);while((k++<j||v[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=c,gn(m,o?s+ir(m)+1:s)}}();function i8(e,t){var n,r,a,s,o,l,c=0,u=0,f=e.constructor,d=f.precision;if(ir(e)>16)throw Error(lA+ir(e));if(!e.s)return new f(za);for(t==null?(Mn=!1,l=d):l=t,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(ec(2,u))/Math.LN10*2+5|0,l+=r,n=a=s=new f(za),f.precision=l;;){if(a=gn(a.times(e),l),n=n.times(++c),o=s.plus(lo(a,n,l)),js(o.d).slice(0,l)===js(s.d).slice(0,l)){for(;u--;)s=gn(s.times(s),l);return f.precision=d,t==null?(Mn=!0,gn(s,d)):s}s=o}}function ir(e){for(var t=e.e*Cn,n=e.d[0];n>=10;n/=10)t++;return t}function lj(e,t,n){if(t>e.LN10.sd())throw Mn=!0,n&&(e.precision=n),Error(ji+"LN10 precision limit exceeded");return gn(new e(e.LN10),t)}function qo(e){for(var t="";e--;)t+="0";return t}function Pm(e,t){var n,r,a,s,o,l,c,u,f,d=1,h=10,m=e,g=m.d,v=m.constructor,x=v.precision;if(m.s<1)throw Error(ji+(m.s?"NaN":"-Infinity"));if(m.eq(za))return new v(0);if(t==null?(Mn=!1,u=x):u=t,m.eq(10))return t==null&&(Mn=!0),lj(v,u);if(u+=h,v.precision=u,n=js(g),r=n.charAt(0),s=ir(m),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=js(m.d),r=n.charAt(0),d++;s=ir(m),r>1?(m=new v("0."+n),s++):m=new v(r+"."+n.slice(1))}else return c=lj(v,u+2,x).times(s+""),m=Pm(new v(r+"."+n.slice(1)),u-h).plus(c),v.precision=x,t==null?(Mn=!0,gn(m,x)):m;for(l=o=m=lo(m.minus(za),m.plus(za),u),f=gn(m.times(m),u),a=3;;){if(o=gn(o.times(f),u),c=l.plus(lo(o,new v(a),u)),js(c.d).slice(0,u)===js(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(lj(v,u+2,x).times(s+""))),l=lo(l,new v(d),u),v.precision=x,t==null?(Mn=!0,gn(l,x)):l;l=c,a+=2}}function nI(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=Sf(n/Cn),e.d=[],r=(n+1)%Cn,n<0&&(r+=Cn),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=Cn;r<a;)e.d.push(+t.slice(r,r+=Cn));t=t.slice(r),r=Cn-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),Mn&&(e.e>Dx||e.e<-Dx))throw Error(lA+n)}else e.s=0,e.e=0,e.d=[0];return e}function gn(e,t,n){var r,a,s,o,l,c,u,f,d=e.d;for(o=1,s=d[0];s>=10;s/=10)o++;if(r=t-o,r<0)r+=Cn,a=t,u=d[f=0];else{if(f=Math.ceil((r+1)/Cn),s=d.length,f>=s)return e;for(u=s=d[f],o=1;s>=10;s/=10)o++;r%=Cn,a=r-Cn+o}if(n!==void 0&&(s=ec(10,o-a-1),l=u/s%10|0,c=t<0||d[f+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?a>0?u/ec(10,o-a):0:d[f-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return c?(s=ir(e),d.length=1,t=t-s-1,d[0]=ec(10,(Cn-t%Cn)%Cn),e.e=Sf(-t/Cn)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(r==0?(d.length=f,s=1,f--):(d.length=f+1,s=ec(10,Cn-r),d[f]=a>0?(u/ec(10,o-a)%ec(10,a)|0)*s:0),c)for(;;)if(f==0){(d[0]+=s)==gr&&(d[0]=1,++e.e);break}else{if(d[f]+=s,d[f]!=gr)break;d[f--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(Mn&&(e.e>Dx||e.e<-Dx))throw Error(lA+ir(e));return e}function s8(e,t){var n,r,a,s,o,l,c,u,f,d,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Mn?gn(t,m):t;if(c=e.d,d=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(f=o<0,f?(n=c,o=-o,l=d.length):(n=d,r=u,l=c.length),a=Math.max(Math.ceil(m/Cn),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=d.length,f=a<l,f&&(l=a),a=0;a<l;a++)if(c[a]!=d[a]){f=c[a]<d[a];break}o=0}for(f&&(n=c,c=d,d=n,t.s=-t.s),l=c.length,a=d.length-l;a>0;--a)c[l++]=0;for(a=d.length;a>o;){if(c[--a]<d[a]){for(s=a;s&&c[--s]===0;)c[s]=gr-1;--c[s],c[a]+=gr}c[a]-=d[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Mn?gn(t,m):t):new h(0)}function zc(e,t,n){var r,a=ir(e),s=js(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+qo(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+qo(-a-1)+s,n&&(r=n-o)>0&&(s+=qo(r))):a>=o?(s+=qo(a+1-o),n&&(r=n-a-1)>0&&(s=s+"."+qo(r))):((r=a+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(s+="."),s+=qo(r))),e.s<0?"-"+s:s}function rI(e,t){if(e.length>t)return e.length=t,!0}function o8(e){var t,n,r;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(wc+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return nI(o,s.toString())}else if(typeof s!="string")throw Error(wc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,Lke.test(s))nI(o,s);else throw Error(wc+s)}if(a.prototype=rt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=o8,a.config=a.set=Fke,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function Fke(e){if(!e||typeof e!="object")throw Error(ji+"Object expected");var t,n,r,a=["precision",1,kf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(Sf(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(wc+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(wc+n+": "+r);return this}var cA=o8($ke);za=new cA(1);const pn=cA;function Bke(e){return Wke(e)||qke(e)||zke(e)||Uke()}function Uke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zke(e,t){if(e){if(typeof e=="string")return X_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X_(e,t)}}function qke(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Wke(e){if(Array.isArray(e))return X_(e)}function X_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hke=function(t){return t},l8={"@@functional/placeholder":!0},c8=function(t){return t===l8},aI=function(t){return function n(){return arguments.length===0||arguments.length===1&&c8(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Vke=function e(t,n){return t===1?n:aI(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var o=a.filter(function(l){return l!==l8}).length;return o>=t?n.apply(void 0,a):e(t-o,aI(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=a.map(function(d){return c8(d)?c.shift():d});return n.apply(void 0,Bke(f).concat(c))}))})},a0=function(t){return Vke(t.length,t)},J_=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},Kke=a0(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),Gke=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return Hke;var a=n.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},Q_=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},u8=function(t){var n=null,r=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,r=t.apply(void 0,s)),r}};function Yke(e){var t;return e===0?t=1:t=Math.floor(new pn(e).abs().log(10).toNumber())+1,t}function Xke(e,t,n){for(var r=new pn(e),a=0,s=[];r.lt(t)&&a<1e5;)s.push(r.toNumber()),r=r.add(n),a++;return s}var Jke=a0(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),Qke=a0(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),Zke=a0(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const i0={rangeStep:Xke,getDigitCount:Yke,interpolateNumber:Jke,uninterpolateNumber:Qke,uninterpolateTruncation:Zke};function Z_(e){return nSe(e)||tSe(e)||d8(e)||eSe()}function eSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tSe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function nSe(e){if(Array.isArray(e))return ek(e)}function Tm(e,t){return iSe(e)||aSe(e,t)||d8(e,t)||rSe()}function rSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d8(e,t){if(e){if(typeof e=="string")return ek(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ek(e,t)}}function ek(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aSe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,s=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,s=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw s}}return n}}function iSe(e){if(Array.isArray(e))return e}function f8(e){var t=Tm(e,2),n=t[0],r=t[1],a=n,s=r;return n>r&&(a=r,s=n),[a,s]}function h8(e,t,n){if(e.lte(0))return new pn(0);var r=i0.getDigitCount(e.toNumber()),a=new pn(10).pow(r),s=e.div(a),o=r!==1?.05:.1,l=new pn(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new pn(Math.ceil(c))}function sSe(e,t,n){var r=1,a=new pn(e);if(!a.isint()&&n){var s=Math.abs(e);s<1?(r=new pn(10).pow(i0.getDigitCount(e)-1),a=new pn(Math.floor(a.div(r).toNumber())).mul(r)):s>1&&(a=new pn(Math.floor(e)))}else e===0?a=new pn(Math.floor((t-1)/2)):n||(a=new pn(Math.floor(e)));var o=Math.floor((t-1)/2),l=Gke(Kke(function(c){return a.add(new pn(c-o).mul(r)).toNumber()}),J_);return l(0,t)}function m8(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new pn(0),tickMin:new pn(0),tickMax:new pn(0)};var s=h8(new pn(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new pn(0):(o=new pn(e).add(t).div(2),o=o.sub(new pn(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new pn(t).sub(o).div(s).toNumber()),u=l+c+1;return u>n?m8(e,t,n,r,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:s,tickMin:o.sub(new pn(l).mul(s)),tickMax:o.add(new pn(c).mul(s))})}function oSe(e){var t=Tm(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=f8([n,r]),c=Tm(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(Z_(J_(0,a-1).map(function(){return 1/0}))):[].concat(Z_(J_(0,a-1).map(function(){return-1/0})),[f]);return n>r?Q_(d):d}if(u===f)return sSe(u,a,s);var h=m8(u,f,o,s),m=h.step,g=h.tickMin,v=h.tickMax,x=i0.rangeStep(g,v.add(new pn(.1).mul(m)),m);return n>r?Q_(x):x}function lSe(e,t){var n=Tm(e,2),r=n[0],a=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=f8([r,a]),l=Tm(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,a];if(c===u)return[c];var f=Math.max(t,2),d=h8(new pn(u).sub(c).div(f-1),s,0),h=[].concat(Z_(i0.rangeStep(new pn(c),new pn(u).sub(new pn(.99).mul(d)),d)),[u]);return r>a?Q_(h):h}var cSe=u8(oSe),uSe=u8(lSe),dSe="Invariant failed";function qc(e,t){throw new Error(dSe)}var fSe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}function $x(){return $x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$x.apply(this,arguments)}function hSe(e,t){return vSe(e)||gSe(e,t)||pSe(e,t)||mSe()}function mSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pSe(e,t){if(e){if(typeof e=="string")return iI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iI(e,t)}}function iI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gSe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function vSe(e){if(Array.isArray(e))return e}function xSe(e,t){if(e==null)return{};var n=ySe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ySe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function bSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wSe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v8(r.key),r)}}function jSe(e,t,n){return t&&wSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _Se(e,t,n){return t=Lx(t),kSe(e,p8()?Reflect.construct(t,n||[],Lx(e).constructor):t.apply(e,n))}function kSe(e,t){if(t&&(zd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SSe(e)}function SSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p8=function(){return!!e})()}function Lx(e){return Lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lx(e)}function NSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tk(e,t)}function tk(e,t){return tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},tk(e,t)}function g8(e,t,n){return t=v8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v8(e){var t=CSe(e,"string");return zd(t)=="symbol"?t:t+""}function CSe(e,t){if(zd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s0=function(e){function t(){return bSe(this,t),_Se(this,t,arguments)}return NSe(t,e),jSe(t,[{key:"render",value:function(){var r=this.props,a=r.offset,s=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,f=r.xAxis,d=r.yAxis,h=xSe(r,fSe),m=sn(h,!1);this.props.direction==="x"&&f.type!=="number"&&qc();var g=c.map(function(v){var x=u(v,l),y=x.x,b=x.y,w=x.value,k=x.errorVal;if(!k)return null;var j=[],_,S;if(Array.isArray(k)){var T=hSe(k,2);_=T[0],S=T[1]}else _=S=k;if(s==="vertical"){var N=f.scale,A=b+a,D=A+o,B=A-o,E=N(w-_),R=N(w+S);j.push({x1:R,y1:D,x2:R,y2:B}),j.push({x1:E,y1:A,x2:R,y2:A}),j.push({x1:E,y1:D,x2:E,y2:B})}else if(s==="horizontal"){var P=d.scale,U=y+a,L=U-o,O=U+o,F=P(w-_),C=P(w+S);j.push({x1:L,y1:C,x2:O,y2:C}),j.push({x1:U,y1:F,x2:U,y2:C}),j.push({x1:L,y1:F,x2:O,y2:F})}return Y.createElement(xr,$x({className:"recharts-errorBar",key:"bar-".concat(j.map(function(z){return"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))},m),j.map(function(z){return Y.createElement("line",$x({},z,{key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))}))});return Y.createElement(xr,{className:"recharts-errorBars"},g)}}])}(Y.Component);g8(s0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});g8(s0,"displayName","ErrorBar");function Om(e){"@babel/helpers - typeof";return Om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Om(e)}function sI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Hl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sI(Object(n),!0).forEach(function(r){ASe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ASe(e,t,n){return t=ESe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ESe(e){var t=PSe(e,"string");return Om(t)=="symbol"?t:t+""}function PSe(e,t){if(Om(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x8=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,s=t.legendContent,o=Fa(n,ui);if(!o)return null;var l=ui.defaultProps,c=l!==void 0?Hl(Hl({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(r||[]).reduce(function(f,d){var h=d.item,m=d.props,g=m.sectors||m.data||[];return f.concat(g.map(function(v){return{type:o.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(r||[]).map(function(f){var d=f.item,h=d.type.defaultProps,m=h!==void 0?Hl(Hl({},h),d.props):{},g=m.dataKey,v=m.name,x=m.legendType,y=m.hide;return{inactive:y,dataKey:g,type:c.iconType||x||"square",color:uA(d),value:v||g,payload:m}}),Hl(Hl(Hl({},c),ui.getWithHeight(o,a)),{},{payload:u,item:o})};function Im(e){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(e)}function oI(e){return RSe(e)||ISe(e)||OSe(e)||TSe()}function TSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OSe(e,t){if(e){if(typeof e=="string")return nk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nk(e,t)}}function ISe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RSe(e){if(Array.isArray(e))return nk(e)}function nk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lI(Object(n),!0).forEach(function(r){ld(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ld(e,t,n){return t=MSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MSe(e){var t=DSe(e,"string");return Im(t)=="symbol"?t:t+""}function DSe(e,t){if(Im(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Os(e,t,n){return on(e)||on(t)?n:hr(t)?yi(e,t,n):Ot(t)?t(e):n}function Th(e,t,n,r){var a=Ike(e,function(l){return Os(l,t)});if(n==="number"){var s=a.filter(function(l){return Ke(l)||parseFloat(l)});return s.length?[r0(s),n0(s)]:[1/0,-1/0]}var o=r?a.filter(function(l){return!on(l)}):a;return o.map(function(l){return hr(l)||l instanceof Date?l:""})}var $Se=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var f=u>0?a[u-1].coordinate:a[l-1].coordinate,d=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(Ki(d-f)!==Ki(h-d)){var g=[];if(Ki(h-d)===Ki(c[1]-c[0])){m=h;var v=d+c[1]-c[0];g[0]=Math.min(v,(v+f)/2),g[1]=Math.max(v,(v+f)/2)}else{m=f;var x=h+c[1]-c[0];g[0]=Math.min(d,(x+d)/2),g[1]=Math.max(d,(x+d)/2)}var y=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(t>y[0]&&t<=y[1]||t>=g[0]&&t<=g[1]){o=a[u].index;break}}else{var b=Math.min(f,h),w=Math.max(f,h);if(t>(b+d)/2&&t<=(w+d)/2){o=a[u].index;break}}}else for(var k=0;k<l;k++)if(k===0&&t<=(r[k].coordinate+r[k+1].coordinate)/2||k>0&&k<l-1&&t>(r[k].coordinate+r[k-1].coordinate)/2&&t<=(r[k].coordinate+r[k+1].coordinate)/2||k===l-1&&t>(r[k].coordinate+r[k-1].coordinate)/2){o=r[k].index;break}return o},uA=function(t){var n,r=t,a=r.type.displayName,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Wn(Wn({},t.type.defaultProps),t.props):t.props,o=s.stroke,l=s.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},LSe=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var f=s[l[c]].stackGroups,d=Object.keys(f),h=0,m=d.length;h<m;h++){var g=f[d[h]],v=g.items,x=g.cateAxisId,y=v.filter(function(S){return so(S.type).indexOf("Bar")>=0});if(y&&y.length){var b=y[0].type.defaultProps,w=b!==void 0?Wn(Wn({},b),y[0].props):y[0].props,k=w.barSize,j=w[x];o[j]||(o[j]=[]);var _=on(k)?n:k;o[j].push({item:y[0],stackList:y.slice(1),barSize:on(_)?void 0:Uc(_,r,0)})}}return o},FSe=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,s=t.sizeList,o=s===void 0?[]:s,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Uc(n,a,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,g=o.reduce(function(k,j){return k+j.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&m>0&&(h=!0,m*=.9,g=c*m);var v=(a-g)/2>>0,x={offset:v-u,size:0};f=o.reduce(function(k,j){var _={item:j.item,position:{offset:x.offset+x.size+u,size:h?m:j.barSize}},S=[].concat(oI(k),[_]);return x=S[S.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(T){S.push({item:T,position:x})}),S},d)}else{var y=Uc(r,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var b=(a-2*y-(c-1)*u)/c;b>1&&(b>>=0);var w=l===+l?Math.min(b,l):b;f=o.reduce(function(k,j,_){var S=[].concat(oI(k),[{item:j.item,position:{offset:y+(b+u)*_+(b-w)/2,size:w}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(T){S.push({item:T,position:S[S.length-1].position})}),S},d)}return f},BSe=function(t,n,r,a){var s=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=x8({children:s,legendWidth:c});if(u){var f=a||{},d=f.width,h=f.height,m=u.align,g=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&g==="middle")&&m!=="center"&&Ke(t[m]))return Wn(Wn({},t),{},ld({},m,t[m]+(d||0)));if((v==="horizontal"||v==="vertical"&&m==="center")&&g!=="middle"&&Ke(t[g]))return Wn(Wn({},t),{},ld({},g,t[g]+(h||0)))}return t},USe=function(t,n,r){return on(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},y8=function(t,n,r,a,s){var o=n.props.children,l=Qi(o,s0).filter(function(u){return USe(a,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=Os(f,r);if(on(d))return u;var h=Array.isArray(d)?[r0(d),n0(d)]:[d,d],m=c.reduce(function(g,v){var x=Os(f,v,0),y=h[0]-Math.abs(Array.isArray(x)?x[0]:x),b=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(y,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},zSe=function(t,n,r,a,s){var o=n.map(function(l){return y8(t,l,r,s,a)}).filter(function(l){return!on(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},b8=function(t,n,r,a,s){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&y8(t,c,u,a)||Th(t,u,r,s)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},w8=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},j8=function(t,n,r,a){if(a)return t.map(function(c){return c.coordinate});var s,o,l=t.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(r),l},to=function(t,n,r){if(!t)return null;var a=t.scale,s=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ki(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var h=s?s.indexOf(d):d;return{coordinate:a(h)+u,value:d,offset:u}});return f.filter(function(d){return!Lp(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,h){return{coordinate:a(d)+u,value:d,index:h,offset:u}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,h){return{coordinate:a(d)+u,value:s?s[d]:d,index:h,offset:u}})},cj=new WeakMap,Dg=function(t,n){if(typeof n!="function")return t;cj.has(t)||cj.set(t,new WeakMap);var r=cj.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},qSe=function(t,n,r){var a=t.scale,s=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Sm(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Ox(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Ph(),realScaleType:"point"}:s==="category"?{scale:Sm(),realScaleType:"band"}:{scale:Ox(),realScaleType:"linear"};if(Bc(a)){var c="scale".concat(qb(a));return{scale:(tI[c]||Ph)(),realScaleType:tI[c]?c:"point"}}return Ot(a)?{scale:a}:{scale:Ph(),realScaleType:"point"}},cI=1e-4,WSe=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),s=Math.min(a[0],a[1])-cI,o=Math.max(a[0],a[1])+cI,l=t(n[0]),c=t(n[r-1]);(l<s||l>o||c<s||c>o)&&t.domain([n[0],n[r-1]])}},HSe=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},VSe=function(t,n){if(!n||n.length!==2||!Ke(n[0])||!Ke(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),s=[t[0],t[1]];return(!Ke(t[0])||t[0]<r)&&(s[0]=r),(!Ke(t[1])||t[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<r&&(s[1]=r),s},KSe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0,l=0;l<n;++l){var c=Lp(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=s,t[l][r][1]=s+c,s=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},GSe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0;o<n;++o){var l=Lp(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=s,t[o][r][1]=s+l,s=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},YSe={sign:KSe,expand:ume,none:Rd,silhouette:dme,wiggle:fme,positive:GSe},XSe=function(t,n,r){var a=n.map(function(l){return l.props.dataKey}),s=YSe[r],o=cme().keys(a).value(function(l,c){return+Os(l,c,0)}).order(C_).offset(s);return o(t)},JSe=function(t,n,r,a,s,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(d,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Wn(Wn({},h.type.defaultProps),h.props):h.props,v=g.stackId,x=g.hide;if(x)return d;var y=g[r],b=d[y]||{hasStack:!1,stackGroups:{}};if(hr(v)){var w=b.stackGroups[v]||{numericAxisId:r,cateAxisId:a,items:[]};w.items.push(h),b.hasStack=!0,b.stackGroups[v]=w}else b.stackGroups[zb("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[h]};return Wn(Wn({},d),{},ld({},y,b))},c),f={};return Object.keys(u).reduce(function(d,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(v,x){var y=m.stackGroups[x];return Wn(Wn({},v),{},ld({},x,{numericAxisId:r,cateAxisId:a,items:y.items,stackedData:XSe(t,y.items,s)}))},g)}return Wn(Wn({},d),{},ld({},h,m))},f)},QSe=function(t,n){var r=n.realScaleType,a=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=cSe(u,s,l);return t.domain([r0(f),n0(f)]),{niceTicks:f}}if(s&&a==="number"){var d=t.domain(),h=uSe(d,s,l);return{niceTicks:h}}return null},uI=function(t){var n=t.axis,r=t.ticks,a=t.offset,s=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+a:null;var c=Os(o,n.dataKey,n.domain[l]);return on(c)?null:n.scale(c)-s/2+a},ZSe=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return a<=0&&s>=0?0:s<0?s:a}return r[0]},eNe=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Wn(Wn({},t.type.defaultProps),t.props):t.props,s=a.stackId;if(hr(s)){var o=n[s];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},tNe=function(t){return t.reduce(function(n,r){return[r0(r.concat([n[0]]).filter(Ke)),n0(r.concat([n[1]]).filter(Ke))]},[1/0,-1/0])},_8=function(t,n,r){return Object.keys(t).reduce(function(a,s){var o=t[s],l=o.stackedData,c=l.reduce(function(u,f){var d=tNe(f.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},dI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rk=function(t,n,r){if(Ot(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(Ke(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(dI.test(t[0])){var s=+dI.exec(t[0])[1];a[0]=n[0]-s}else Ot(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(Ke(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(fI.test(t[1])){var o=+fI.exec(t[1])[1];a[1]=n[1]+o}else Ot(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},Fx=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var s=$C(n,function(d){return d.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],f=s[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},hI=function(t,n,r){return!t||!t.length||oA(t,yi(r,"type.defaultProps.domain"))?n:t},k8=function(t,n){var r=t.type.defaultProps?Wn(Wn({},t.type.defaultProps),t.props):t.props,a=r.dataKey,s=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,f=r.hide;return Wn(Wn({},sn(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:s||a,color:uA(t),value:Os(n,a),type:c,payload:n,chartType:u,hide:f})};function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}function mI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mI(Object(n),!0).forEach(function(r){nNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nNe(e,t,n){return t=rNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rNe(e){var t=aNe(e,"string");return Rm(t)=="symbol"?t:t+""}function aNe(e,t){if(Rm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bx=Math.PI/180,iNe=function(t){return t*180/Math.PI},Pr=function(t,n,r,a){return{x:t+Math.cos(-Bx*a)*r,y:n+Math.sin(-Bx*a)*r}},sNe=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(a-o,2))},oNe=function(t,n){var r=t.x,a=t.y,s=n.cx,o=n.cy,l=sNe({x:r,y:a},{x:s,y:o});if(l<=0)return{radius:l};var c=(r-s)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:iNe(u),angleInRadian:u}},lNe=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(a,s);return{startAngle:n-o*360,endAngle:r-o*360}},cNe=function(t,n){var r=n.startAngle,a=n.endAngle,s=Math.floor(r/360),o=Math.floor(a/360),l=Math.min(s,o);return t+l*360},gI=function(t,n){var r=t.x,a=t.y,s=oNe({x:r,y:a},n),o=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=lNe(n),d=f.startAngle,h=f.endAngle,m=l,g;if(d<=h){for(;m>h;)m-=360;for(;m<d;)m+=360;g=m>=d&&m<=h}else{for(;m>d;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=d}return g?pI(pI({},n),{},{radius:o,angle:cNe(m,n)}):null};function Mm(e){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mm(e)}var uNe=["offset"];function dNe(e){return pNe(e)||mNe(e)||hNe(e)||fNe()}function fNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hNe(e,t){if(e){if(typeof e=="string")return ak(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ak(e,t)}}function mNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pNe(e){if(Array.isArray(e))return ak(e)}function ak(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gNe(e,t){if(e==null)return{};var n=vNe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function vNe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vI(Object(n),!0).forEach(function(r){xNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xNe(e,t,n){return t=yNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yNe(e){var t=bNe(e,"string");return Mm(t)=="symbol"?t:t+""}function bNe(e,t){if(Mm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dm(){return Dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dm.apply(this,arguments)}var wNe=function(t){var n=t.value,r=t.formatter,a=on(t.children)?n:t.children;return Ot(r)?r(a):a},jNe=function(t,n){var r=Ki(n-t),a=Math.min(Math.abs(n-t),360);return r*a},_Ne=function(t,n,r){var a=t.position,s=t.viewBox,o=t.offset,l=t.className,c=s,u=c.cx,f=c.cy,d=c.innerRadius,h=c.outerRadius,m=c.startAngle,g=c.endAngle,v=c.clockWise,x=(d+h)/2,y=jNe(m,g),b=y>=0?1:-1,w,k;a==="insideStart"?(w=m+b*o,k=v):a==="insideEnd"?(w=g-b*o,k=!v):a==="end"&&(w=g+b*o,k=v),k=y<=0?k:!k;var j=Pr(u,f,x,w),_=Pr(u,f,x,w+(k?1:-1)*359),S="M".concat(j.x,",").concat(j.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(k?0:1,`,
    `).concat(_.x,",").concat(_.y),T=on(t.id)?zb("recharts-radial-line-"):t.id;return Y.createElement("text",Dm({},r,{dominantBaseline:"central",className:Xt("recharts-radial-bar-label",l)}),Y.createElement("defs",null,Y.createElement("path",{id:T,d:S})),Y.createElement("textPath",{xlinkHref:"#".concat(T)},n))},kNe=function(t){var n=t.viewBox,r=t.offset,a=t.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,f=s.startAngle,d=s.endAngle,h=(f+d)/2;if(a==="outside"){var m=Pr(o,l,u+r,h),g=m.x,v=m.y;return{x:g,y:v,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,y=Pr(o,l,x,h),b=y.x,w=y.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},SNe=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,s=t.position,o=n,l=o.x,c=o.y,u=o.width,f=o.height,d=f>=0?1:-1,h=d*a,m=d>0?"end":"start",g=d>0?"start":"end",v=u>=0?1:-1,x=v*a,y=v>0?"end":"start",b=v>0?"start":"end";if(s==="top"){var w={x:l+u/2,y:c-d*a,textAnchor:"middle",verticalAnchor:m};return lr(lr({},w),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var k={x:l+u/2,y:c+f+h,textAnchor:"middle",verticalAnchor:g};return lr(lr({},k),r?{height:Math.max(r.y+r.height-(c+f),0),width:u}:{})}if(s==="left"){var j={x:l-x,y:c+f/2,textAnchor:y,verticalAnchor:"middle"};return lr(lr({},j),r?{width:Math.max(j.x-r.x,0),height:f}:{})}if(s==="right"){var _={x:l+u+x,y:c+f/2,textAnchor:b,verticalAnchor:"middle"};return lr(lr({},_),r?{width:Math.max(r.x+r.width-_.x,0),height:f}:{})}var S=r?{width:u,height:f}:{};return s==="insideLeft"?lr({x:l+x,y:c+f/2,textAnchor:b,verticalAnchor:"middle"},S):s==="insideRight"?lr({x:l+u-x,y:c+f/2,textAnchor:y,verticalAnchor:"middle"},S):s==="insideTop"?lr({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},S):s==="insideBottom"?lr({x:l+u/2,y:c+f-h,textAnchor:"middle",verticalAnchor:m},S):s==="insideTopLeft"?lr({x:l+x,y:c+h,textAnchor:b,verticalAnchor:g},S):s==="insideTopRight"?lr({x:l+u-x,y:c+h,textAnchor:y,verticalAnchor:g},S):s==="insideBottomLeft"?lr({x:l+x,y:c+f-h,textAnchor:b,verticalAnchor:m},S):s==="insideBottomRight"?lr({x:l+u-x,y:c+f-h,textAnchor:y,verticalAnchor:m},S):gf(s)&&(Ke(s.x)||lc(s.x))&&(Ke(s.y)||lc(s.y))?lr({x:l+Uc(s.x,u),y:c+Uc(s.y,f),textAnchor:"end",verticalAnchor:"end"},S):lr({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},S)},NNe=function(t){return"cx"in t&&Ke(t.cx)};function Wr(e){var t=e.offset,n=t===void 0?5:t,r=gNe(e,uNe),a=lr({offset:n},r),s=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,f=a.className,d=f===void 0?"":f,h=a.textBreakAll;if(!s||on(l)&&on(c)&&!p.isValidElement(u)&&!Ot(u))return null;if(p.isValidElement(u))return p.cloneElement(u,a);var m;if(Ot(u)){if(m=p.createElement(u,a),p.isValidElement(m))return m}else m=wNe(a);var g=NNe(s),v=sn(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return _Ne(a,m,v);var x=g?kNe(a):SNe(a);return Y.createElement(Sx,Dm({className:Xt("recharts-label",d)},v,x,{breakAll:h}),m)}Wr.displayName="Label";var S8=function(t){var n=t.cx,r=t.cy,a=t.angle,s=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,h=t.y,m=t.top,g=t.left,v=t.width,x=t.height,y=t.clockWise,b=t.labelViewBox;if(b)return b;if(Ke(v)&&Ke(x)){if(Ke(d)&&Ke(h))return{x:d,y:h,width:v,height:x};if(Ke(m)&&Ke(g))return{x:m,y:g,width:v,height:x}}return Ke(d)&&Ke(h)?{x:d,y:h,width:0,height:0}:Ke(n)&&Ke(r)?{cx:n,cy:r,startAngle:s||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},CNe=function(t,n){return t?t===!0?Y.createElement(Wr,{key:"label-implicit",viewBox:n}):hr(t)?Y.createElement(Wr,{key:"label-implicit",viewBox:n,value:t}):p.isValidElement(t)?t.type===Wr?p.cloneElement(t,{key:"label-implicit",viewBox:n}):Y.createElement(Wr,{key:"label-implicit",content:t,viewBox:n}):Ot(t)?Y.createElement(Wr,{key:"label-implicit",content:t,viewBox:n}):gf(t)?Y.createElement(Wr,Dm({viewBox:n},t,{key:"label-implicit"})):null:null},ANe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,s=S8(t),o=Qi(a,Wr).map(function(c,u){return p.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return o;var l=CNe(t.label,n||s);return[l].concat(dNe(o))};Wr.parseViewBox=S8;Wr.renderCallByParent=ANe;function ENe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var PNe=ENe;const TNe=un(PNe);function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}var ONe=["valueAccessor"],INe=["data","dataKey","clockWise","id","textBreakAll"];function RNe(e){return LNe(e)||$Ne(e)||DNe(e)||MNe()}function MNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DNe(e,t){if(e){if(typeof e=="string")return ik(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ik(e,t)}}function $Ne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function LNe(e){if(Array.isArray(e))return ik(e)}function ik(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ux(){return Ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ux.apply(this,arguments)}function xI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function yI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xI(Object(n),!0).forEach(function(r){FNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FNe(e,t,n){return t=BNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BNe(e){var t=UNe(e,"string");return $m(t)=="symbol"?t:t+""}function UNe(e,t){if($m(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bI(e,t){if(e==null)return{};var n=zNe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zNe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var qNe=function(t){return Array.isArray(t.value)?TNe(t.value):t.value};function Gi(e){var t=e.valueAccessor,n=t===void 0?qNe:t,r=bI(e,ONe),a=r.data,s=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=bI(r,INe);return!a||!a.length?null:Y.createElement(xr,{className:"recharts-label-list"},a.map(function(f,d){var h=on(s)?n(f,d):Os(f&&f.payload,s),m=on(l)?{}:{id:"".concat(l,"-").concat(d)};return Y.createElement(Wr,Ux({},sn(f,!0),u,m,{parentViewBox:f.parentViewBox,value:h,textBreakAll:c,viewBox:Wr.parseViewBox(on(o)?f:yI(yI({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}Gi.displayName="LabelList";function WNe(e,t){return e?e===!0?Y.createElement(Gi,{key:"labelList-implicit",data:t}):Y.isValidElement(e)||Ot(e)?Y.createElement(Gi,{key:"labelList-implicit",data:t,content:e}):gf(e)?Y.createElement(Gi,Ux({data:t},e,{key:"labelList-implicit"})):null:null}function HNe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=Qi(r,Gi).map(function(o,l){return p.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var s=WNe(e.label,t);return[s].concat(RNe(a))}Gi.renderCallByParent=HNe;function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}function sk(){return sk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sk.apply(this,arguments)}function wI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function jI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wI(Object(n),!0).forEach(function(r){VNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VNe(e,t,n){return t=KNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KNe(e){var t=GNe(e,"string");return Lm(t)=="symbol"?t:t+""}function GNe(e,t){if(Lm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YNe=function(t,n){var r=Ki(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},$g=function(t){var n=t.cx,r=t.cy,a=t.radius,s=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(l?1:-1)+a,d=Math.asin(c/f)/Bx,h=u?s:s+o*d,m=Pr(n,r,f,h),g=Pr(n,r,a,h),v=u?s-o*d:s,x=Pr(n,r,f*Math.cos(d*Bx),v);return{center:m,circleTangency:g,lineTangency:x,theta:d}},N8=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.startAngle,l=t.endAngle,c=YNe(o,l),u=o+c,f=Pr(n,r,s,o),d=Pr(n,r,s,u),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var m=Pr(n,r,a,o),g=Pr(n,r,a,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},XNe=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Ki(f-u),h=$g({cx:n,cy:r,radius:s,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,g=h.lineTangency,v=h.theta,x=$g({cx:n,cy:r,radius:s,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:c}),y=x.circleTangency,b=x.lineTangency,w=x.theta,k=c?Math.abs(u-f):Math.abs(u-f)-v-w;if(k<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):N8({cx:n,cy:r,innerRadius:a,outerRadius:s,startAngle:u,endAngle:f});var j="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(k>180),",").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var _=$g({cx:n,cy:r,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=_.circleTangency,T=_.lineTangency,N=_.theta,A=$g({cx:n,cy:r,radius:a,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),D=A.circleTangency,B=A.lineTangency,E=A.theta,R=c?Math.abs(u-f):Math.abs(u-f)-N-E;if(R<0&&o===0)return"".concat(j,"L").concat(n,",").concat(r,"Z");j+="L".concat(B.x,",").concat(B.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(R>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,"Z")}else j+="L".concat(n,",").concat(r,"Z");return j},JNe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},C8=function(t){var n=jI(jI({},JNe),t),r=n.cx,a=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,f=n.startAngle,d=n.endAngle,h=n.className;if(o<s||f===d)return null;var m=Xt("recharts-sector",h),g=o-s,v=Uc(l,g,0,!0),x;return v>0&&Math.abs(f-d)<360?x=XNe({cx:r,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(v,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):x=N8({cx:r,cy:a,innerRadius:s,outerRadius:o,startAngle:f,endAngle:d}),Y.createElement("path",sk({},sn(n,!0),{className:m,d:x,role:"img"}))};function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}function ok(){return ok=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ok.apply(this,arguments)}function _I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function kI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_I(Object(n),!0).forEach(function(r){QNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_I(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QNe(e,t,n){return t=ZNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZNe(e){var t=eCe(e,"string");return Fm(t)=="symbol"?t:t+""}function eCe(e,t){if(Fm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SI={curveBasisClosed:Qhe,curveBasisOpen:Zhe,curveBasis:Jhe,curveBumpX:$he,curveBumpY:Lhe,curveLinearClosed:eme,curveLinear:Hb,curveMonotoneX:tme,curveMonotoneY:nme,curveNatural:rme,curveStep:ame,curveStepAfter:sme,curveStepBefore:ime},Lg=function(t){return t.x===+t.x&&t.y===+t.y},Zf=function(t){return t.x},eh=function(t){return t.y},tCe=function(t,n){if(Ot(t))return t;var r="curve".concat(qb(t));return(r==="curveMonotone"||r==="curveBump")&&n?SI["".concat(r).concat(n==="vertical"?"Y":"X")]:SI[r]||Hb},nCe=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,s=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=tCe(r,l),d=u?s.filter(function(v){return Lg(v)}):s,h;if(Array.isArray(o)){var m=u?o.filter(function(v){return Lg(v)}):o,g=d.map(function(v,x){return kI(kI({},v),{},{base:m[x]})});return l==="vertical"?h=Ag().y(eh).x1(Zf).x0(function(v){return v.base.x}):h=Ag().x(Zf).y1(eh).y0(function(v){return v.base.y}),h.defined(Lg).curve(f),h(g)}return l==="vertical"&&Ke(o)?h=Ag().y(eh).x1(Zf).x0(o):Ke(o)?h=Ag().x(Zf).y1(eh).y0(o):h=Cz().x(Zf).y(eh),h.defined(Lg).curve(f),h(d)},NI=function(t){var n=t.className,r=t.points,a=t.path,s=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?nCe(t):a;return p.createElement("path",ok({},sn(t,!1),ux(t),{className:Xt("recharts-curve",n),d:o,ref:s}))},A8={exports:{}},rCe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",aCe=rCe,iCe=aCe;function E8(){}function P8(){}P8.resetWarningCache=E8;var sCe=function(){function e(r,a,s,o,l,c){if(c!==iCe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:P8,resetWarningCache:E8};return n.PropTypes=n,n};A8.exports=sCe();var oCe=A8.exports;const ln=un(oCe);var lCe=Object.getOwnPropertyNames,cCe=Object.getOwnPropertySymbols,uCe=Object.prototype.hasOwnProperty;function CI(e,t){return function(r,a,s){return e(r,a,s)&&t(r,a,s)}}function Fg(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var s=a.cache,o=s.get(n),l=s.get(r);if(o&&l)return o===r&&l===n;s.set(n,r),s.set(r,n);var c=e(n,r,a);return s.delete(n),s.delete(r),c}}function AI(e){return lCe(e).concat(cCe(e))}var dCe=Object.hasOwn||function(e,t){return uCe.call(e,t)};function au(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var fCe="__v",hCe="__o",mCe="_owner",EI=Object.getOwnPropertyDescriptor,PI=Object.keys;function pCe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function gCe(e,t){return au(e.getTime(),t.getTime())}function vCe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function xCe(e,t){return e===t}function TI(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=t.entries(),f=!1,d=0;(l=u.next())&&!l.done;){if(a[d]){d++;continue}var h=o.value,m=l.value;if(n.equals(h[0],m[0],c,d,e,t,n)&&n.equals(h[1],m[1],h[0],m[0],e,t,n)){f=a[d]=!0;break}d++}if(!f)return!1;c++}return!0}var yCe=au;function bCe(e,t,n){var r=PI(e),a=r.length;if(PI(t).length!==a)return!1;for(;a-- >0;)if(!T8(e,t,n,r[a]))return!1;return!0}function th(e,t,n){var r=AI(e),a=r.length;if(AI(t).length!==a)return!1;for(var s,o,l;a-- >0;)if(s=r[a],!T8(e,t,n,s)||(o=EI(e,s),l=EI(t,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function wCe(e,t){return au(e.valueOf(),t.valueOf())}function jCe(e,t){return e.source===t.source&&e.flags===t.flags}function OI(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.values(),o,l;(o=s.next())&&!o.done;){for(var c=t.values(),u=!1,f=0;(l=c.next())&&!l.done;){if(!a[f]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function _Ce(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function kCe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function T8(e,t,n,r){return(r===mCe||r===hCe||r===fCe)&&(e.$$typeof||t.$$typeof)?!0:dCe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var SCe="[object Arguments]",NCe="[object Boolean]",CCe="[object Date]",ACe="[object Error]",ECe="[object Map]",PCe="[object Number]",TCe="[object Object]",OCe="[object RegExp]",ICe="[object Set]",RCe="[object String]",MCe="[object URL]",DCe=Array.isArray,II=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,RI=Object.assign,$Ce=Object.prototype.toString.call.bind(Object.prototype.toString);function LCe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,s=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,f=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,v,x){if(g===v)return!0;if(g==null||v==null)return!1;var y=typeof g;if(y!==typeof v)return!1;if(y!=="object")return y==="number"?o(g,v,x):y==="function"?a(g,v,x):!1;var b=g.constructor;if(b!==v.constructor)return!1;if(b===Object)return l(g,v,x);if(DCe(g))return t(g,v,x);if(II!=null&&II(g))return d(g,v,x);if(b===Date)return n(g,v,x);if(b===RegExp)return u(g,v,x);if(b===Map)return s(g,v,x);if(b===Set)return f(g,v,x);var w=$Ce(g);return w===CCe?n(g,v,x):w===OCe?u(g,v,x):w===ECe?s(g,v,x):w===ICe?f(g,v,x):w===TCe?typeof g.then!="function"&&typeof v.then!="function"&&l(g,v,x):w===MCe?h(g,v,x):w===ACe?r(g,v,x):w===SCe?l(g,v,x):w===NCe||w===PCe||w===RCe?c(g,v,x):!1}}function FCe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?th:pCe,areDatesEqual:gCe,areErrorsEqual:vCe,areFunctionsEqual:xCe,areMapsEqual:r?CI(TI,th):TI,areNumbersEqual:yCe,areObjectsEqual:r?th:bCe,arePrimitiveWrappersEqual:wCe,areRegExpsEqual:jCe,areSetsEqual:r?CI(OI,th):OI,areTypedArraysEqual:r?th:_Ce,areUrlsEqual:kCe};if(n&&(a=RI({},a,n(a))),t){var s=Fg(a.areArraysEqual),o=Fg(a.areMapsEqual),l=Fg(a.areObjectsEqual),c=Fg(a.areSetsEqual);a=RI({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function BCe(e){return function(t,n,r,a,s,o,l){return e(t,n,l)}}function UCe(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,s=e.strict;if(r)return function(c,u){var f=r(),d=f.cache,h=d===void 0?t?new WeakMap:void 0:d,m=f.meta;return n(c,u,{cache:h,equals:a,meta:m,strict:s})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(c,u){return n(c,u,o)}}var zCe=Bl();Bl({strict:!0});Bl({circular:!0});Bl({circular:!0,strict:!0});Bl({createInternalComparator:function(){return au}});Bl({strict:!0,createInternalComparator:function(){return au}});Bl({circular:!0,createInternalComparator:function(){return au}});Bl({circular:!0,createInternalComparator:function(){return au},strict:!0});function Bl(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,s=e.strict,o=s===void 0?!1:s,l=FCe(e),c=LCe(l),u=r?r(c):BCe(c);return UCe({circular:n,comparator:c,createState:a,equals:u,strict:o})}function qCe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function MI(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(s){n<0&&(n=s),s-n>t?(e(s),n=-1):qCe(a)};requestAnimationFrame(r)}function lk(e){"@babel/helpers - typeof";return lk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lk(e)}function WCe(e){return GCe(e)||KCe(e)||VCe(e)||HCe()}function HCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VCe(e,t){if(e){if(typeof e=="string")return DI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DI(e,t)}}function DI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function KCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function GCe(e){if(Array.isArray(e))return e}function YCe(){var e={},t=function(){return null},n=!1,r=function a(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=WCe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){MI(a.bind(null,u),c);return}a(c),MI(a.bind(null,u));return}lk(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}function $I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function LI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$I(Object(n),!0).forEach(function(r){O8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$I(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O8(e,t,n){return t=XCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XCe(e){var t=JCe(e,"string");return Bm(t)==="symbol"?t:String(t)}function JCe(e,t){if(Bm(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QCe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(s){return a.includes(s)})})},ZCe=function(t){return t},eAe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Oh=function(t,n){return Object.keys(n).reduce(function(r,a){return LI(LI({},r),{},O8({},a,t(a,n[a])))},{})},FI=function(t,n,r){return t.map(function(a){return"".concat(eAe(a)," ").concat(n,"ms ").concat(r)}).join(",")};function tAe(e,t){return aAe(e)||rAe(e,t)||I8(e,t)||nAe()}function nAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function aAe(e){if(Array.isArray(e))return e}function iAe(e){return lAe(e)||oAe(e)||I8(e)||sAe()}function sAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I8(e,t){if(e){if(typeof e=="string")return ck(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ck(e,t)}}function oAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lAe(e){if(Array.isArray(e))return ck(e)}function ck(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zx=1e-4,R8=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},M8=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},BI=function(t,n){return function(r){var a=R8(t,n);return M8(a,r)}},cAe=function(t,n){return function(r){var a=R8(t,n),s=[].concat(iAe(a.map(function(o,l){return o*l}).slice(1)),[0]);return M8(s,r)}},UI=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,s=0,o=1,l=1;break;case"ease":a=.25,s=.1,o=.25,l=1;break;case"ease-in":a=.42,s=0,o=1,l=1;break;case"ease-out":a=.42,s=0,o=.58,l=1;break;case"ease-in-out":a=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=tAe(u,4);a=f[0],s=f[1],o=f[2],l=f[3]}}}var d=BI(a,o),h=BI(s,l),m=cAe(a,o),g=function(y){return y>1?1:y<0?0:y},v=function(y){for(var b=y>1?1:y,w=b,k=0;k<8;++k){var j=d(w)-b,_=m(w);if(Math.abs(j-b)<zx||_<zx)return h(w);w=g(w-j/_)}return h(w)};return v.isStepper=!1,v},uAe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,s=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(f,d,h){var m=-(f-d)*r,g=h*s,v=h+(m-g)*l/1e3,x=h*l/1e3+f;return Math.abs(x-d)<zx&&Math.abs(v)<zx?[d,0]:[x,v]};return c.isStepper=!0,c.dt=l,c},dAe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return UI(a);case"spring":return uAe();default:if(a.split("(")[0]==="cubic-bezier")return UI(a)}return typeof a=="function"?a:null};function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function zI(e){return mAe(e)||hAe(e)||D8(e)||fAe()}function fAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mAe(e){if(Array.isArray(e))return dk(e)}function qI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qI(Object(n),!0).forEach(function(r){uk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uk(e,t,n){return t=pAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pAe(e){var t=gAe(e,"string");return Um(t)==="symbol"?t:String(t)}function gAe(e,t){if(Um(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Um(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vAe(e,t){return bAe(e)||yAe(e,t)||D8(e,t)||xAe()}function xAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D8(e,t){if(e){if(typeof e=="string")return dk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dk(e,t)}}function dk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function bAe(e){if(Array.isArray(e))return e}var qx=function(t,n,r){return t+(n-t)*r},fk=function(t){var n=t.from,r=t.to;return n!==r},wAe=function e(t,n,r){var a=Oh(function(s,o){if(fk(o)){var l=t(o.from,o.to,o.velocity),c=vAe(l,2),u=c[0],f=c[1];return Nr(Nr({},o),{},{from:u,velocity:f})}return o},n);return r<1?Oh(function(s,o){return fk(o)?Nr(Nr({},o),{},{velocity:qx(o.velocity,a[s].velocity,r),from:qx(o.from,a[s].from,r)}):o},n):e(t,a,r-1)};const jAe=function(e,t,n,r,a){var s=QCe(e,t),o=s.reduce(function(x,y){return Nr(Nr({},x),{},uk({},y,[e[y],t[y]]))},{}),l=s.reduce(function(x,y){return Nr(Nr({},x),{},uk({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,f,d=function(){return null},h=function(){return Oh(function(y,b){return b.from},l)},m=function(){return!Object.values(l).filter(fk).length},g=function(y){u||(u=y);var b=y-u,w=b/n.dt;l=wAe(n,l,w),a(Nr(Nr(Nr({},e),t),h())),u=y,m()||(c=requestAnimationFrame(d))},v=function(y){f||(f=y);var b=(y-f)/r,w=Oh(function(j,_){return qx.apply(void 0,zI(_).concat([n(b)]))},o);if(a(Nr(Nr(Nr({},e),t),w)),b<1)c=requestAnimationFrame(d);else{var k=Oh(function(j,_){return qx.apply(void 0,zI(_).concat([n(1)]))},o);a(Nr(Nr(Nr({},e),t),k))}};return d=n.isStepper?g:v,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}var _Ae=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function kAe(e,t){if(e==null)return{};var n=SAe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function SAe(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function uj(e){return EAe(e)||AAe(e)||CAe(e)||NAe()}function NAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CAe(e,t){if(e){if(typeof e=="string")return hk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hk(e,t)}}function AAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function EAe(e){if(Array.isArray(e))return hk(e)}function hk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function WI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ri(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WI(Object(n),!0).forEach(function(r){ph(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ph(e,t,n){return t=$8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TAe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$8(r.key),r)}}function OAe(e,t,n){return t&&TAe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $8(e){var t=IAe(e,"string");return qd(t)==="symbol"?t:String(t)}function IAe(e,t){if(qd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mk(e,t)}function mk(e,t){return mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},mk(e,t)}function MAe(e){var t=DAe();return function(){var r=Wx(e),a;if(t){var s=Wx(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return pk(this,a)}}function pk(e,t){if(t&&(qd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gk(e)}function gk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wx(e){return Wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wx(e)}var _l=function(e){RAe(n,e);var t=MAe(n);function n(r,a){var s;PAe(this,n),s=t.call(this,r,a);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,f=o.to,d=o.steps,h=o.children,m=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(gk(s)),s.changeStyle=s.changeStyle.bind(gk(s)),!l||m<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:f}),pk(s);if(d&&d.length)s.state={style:d[0].style};else if(u){if(typeof h=="function")return s.state={style:u},pk(s);s.state={style:c?ph({},c,u):u}}else s.state={style:{}};return s}return OAe(n,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,f=s.to,d=s.from,h=this.state.style;if(l){if(!o){var m={style:c?ph({},c,f):f};this.state&&h&&(c&&h[c]!==f||!c&&h!==f)&&this.setState(m);return}if(!(zCe(a.to,f)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=g||u?d:a.to;if(this.state&&h){var x={style:c?ph({},c,v):v};(c&&h[c]!==v||!c&&h!==v)&&this.setState(x)}this.runAnimation(Ri(Ri({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,l=a.to,c=a.duration,u=a.easing,f=a.begin,d=a.onAnimationEnd,h=a.onAnimationStart,m=jAe(o,l,dAe(u),c,this.changeStyle),g=function(){s.stopJSAnimation=m()};this.manager.start([h,f,g,c,d])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],f=u.style,d=u.duration,h=d===void 0?0:d,m=function(v,x,y){if(y===0)return v;var b=x.duration,w=x.easing,k=w===void 0?"ease":w,j=x.style,_=x.properties,S=x.onAnimationEnd,T=y>0?o[y-1]:x,N=_||Object.keys(j);if(typeof k=="function"||k==="spring")return[].concat(uj(v),[s.runJSAnimation.bind(s,{from:T.style,to:j,duration:b,easing:k}),b]);var A=FI(N,b,k),D=Ri(Ri(Ri({},T.style),j),{},{transition:A});return[].concat(uj(v),[D,b,S]).filter(ZCe)};return this.manager.start([c].concat(uj(o.reduce(m,[f,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=YCe());var s=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,f=a.onAnimationStart,d=a.onAnimationEnd,h=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var v=l?ph({},l,c):c,x=FI(Object.keys(v),o,u);g.start([f,s,Ri(Ri({},v),{},{transition:x}),o,d])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=kAe(a,_Ae),u=p.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!l||u===0||o<=0)return s;var d=function(m){var g=m.props,v=g.style,x=v===void 0?{}:v,y=g.className,b=p.cloneElement(m,Ri(Ri({},c),{},{style:Ri(Ri({},x),f),className:y}));return b};return u===1?d(p.Children.only(s)):Y.createElement("div",null,p.Children.map(s,function(h){return d(h)}))}}]),n}(p.PureComponent);_l.displayName="Animate";_l.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};_l.propTypes={from:ln.oneOfType([ln.object,ln.string]),to:ln.oneOfType([ln.object,ln.string]),attributeName:ln.string,duration:ln.number,begin:ln.number,easing:ln.oneOfType([ln.string,ln.func]),steps:ln.arrayOf(ln.shape({duration:ln.number.isRequired,style:ln.object.isRequired,easing:ln.oneOfType([ln.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ln.func]),properties:ln.arrayOf("string"),onAnimationEnd:ln.func})),children:ln.oneOfType([ln.node,ln.func]),isActive:ln.bool,canBegin:ln.bool,onAnimationEnd:ln.func,shouldReAnimate:ln.bool,onAnimationStart:ln.func,onAnimationReStart:ln.func};function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}function Hx(){return Hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hx.apply(this,arguments)}function $Ae(e,t){return UAe(e)||BAe(e,t)||FAe(e,t)||LAe()}function LAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FAe(e,t){if(e){if(typeof e=="string")return HI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HI(e,t)}}function HI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function BAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function UAe(e){if(Array.isArray(e))return e}function VI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function KI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VI(Object(n),!0).forEach(function(r){zAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zAe(e,t,n){return t=qAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qAe(e){var t=WAe(e,"string");return zm(t)=="symbol"?t:t+""}function WAe(e,t){if(zm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GI=function(t,n,r,a,s){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,c=r>=0?1:-1,u=a>=0&&r>=0||a<0&&r<0?1:0,f;if(o>0&&s instanceof Array){for(var d=[0,0,0,0],h=0,m=4;h<m;h++)d[h]=s[h]>o?o:s[h];f="M".concat(t,",").concat(n+l*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(n)),f+="L ".concat(t+r-c*d[1],",").concat(n),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*d[1])),f+="L ".concat(t+r,",").concat(n+a-l*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+r-c*d[2],",").concat(n+a)),f+="L ".concat(t+c*d[3],",").concat(n+a),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*d[3])),f+="Z"}else if(o>0&&s===+s&&s>0){var g=Math.min(o,s);f="M ".concat(t,",").concat(n+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(n,`
            L `).concat(t+r-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*g,`
            L `).concat(t+r,",").concat(n+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r-c*g,",").concat(n+a,`
            L `).concat(t+c*g,",").concat(n+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*g," Z")}else f="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return f},HAe=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),f=Math.max(s,s+l),d=Math.min(o,o+c),h=Math.max(o,o+c);return r>=u&&r<=f&&a>=d&&a<=h}return!1},VAe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},dA=function(t){var n=KI(KI({},VAe),t),r=p.useRef(),a=p.useState(-1),s=$Ae(a,2),o=s[0],l=s[1];p.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var k=r.current.getTotalLength();k&&l(k)}catch{}},[]);var c=n.x,u=n.y,f=n.width,d=n.height,h=n.radius,m=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,y=n.isAnimationActive,b=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var w=Xt("recharts-rectangle",m);return b?Y.createElement(_l,{canBegin:o>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:v,animationEasing:g,isActive:b},function(k){var j=k.width,_=k.height,S=k.x,T=k.y;return Y.createElement(_l,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,isActive:y,easing:g},Y.createElement("path",Hx({},sn(n,!0),{className:w,d:GI(S,T,j,_,h),ref:r})))}):Y.createElement("path",Hx({},sn(n,!0),{className:w,d:GI(c,u,f,d,h)}))};function vk(){return vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vk.apply(this,arguments)}var L8=function(t){var n=t.cx,r=t.cy,a=t.r,s=t.className,o=Xt("recharts-dot",s);return n===+n&&r===+r&&a===+a?p.createElement("circle",vk({},sn(t,!1),ux(t),{className:o,cx:n,cy:r,r:a})):null};function qm(e){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qm(e)}var KAe=["x","y","top","left","width","height","className"];function xk(){return xk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xk.apply(this,arguments)}function YI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function GAe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YI(Object(n),!0).forEach(function(r){YAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YAe(e,t,n){return t=XAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XAe(e){var t=JAe(e,"string");return qm(t)=="symbol"?t:t+""}function JAe(e,t){if(qm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QAe(e,t){if(e==null)return{};var n=ZAe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ZAe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var eEe=function(t,n,r,a,s,o){return"M".concat(t,",").concat(s,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},tEe=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,f=t.width,d=f===void 0?0:f,h=t.height,m=h===void 0?0:h,g=t.className,v=QAe(t,KAe),x=GAe({x:r,y:s,top:l,left:u,width:d,height:m},v);return!Ke(r)||!Ke(s)||!Ke(d)||!Ke(m)||!Ke(l)||!Ke(u)?null:Y.createElement("path",xk({},sn(x,!0),{className:Xt("recharts-cross",g),d:eEe(r,s,d,m,l,u)}))},nEe=Jz,rEe=nEe(Object.getPrototypeOf,Object),aEe=rEe,iEe=ko,sEe=aEe,oEe=So,lEe="[object Object]",cEe=Function.prototype,uEe=Object.prototype,F8=cEe.toString,dEe=uEe.hasOwnProperty,fEe=F8.call(Object);function hEe(e){if(!oEe(e)||iEe(e)!=lEe)return!1;var t=sEe(e);if(t===null)return!0;var n=dEe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&F8.call(n)==fEe}var mEe=hEe;const pEe=un(mEe);var gEe=ko,vEe=So,xEe="[object Boolean]";function yEe(e){return e===!0||e===!1||vEe(e)&&gEe(e)==xEe}var bEe=yEe;const wEe=un(bEe);function Wm(e){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(e)}function Vx(){return Vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vx.apply(this,arguments)}function jEe(e,t){return NEe(e)||SEe(e,t)||kEe(e,t)||_Ee()}function _Ee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kEe(e,t){if(e){if(typeof e=="string")return XI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XI(e,t)}}function XI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function SEe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function NEe(e){if(Array.isArray(e))return e}function JI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function QI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JI(Object(n),!0).forEach(function(r){CEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function CEe(e,t,n){return t=AEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AEe(e){var t=EEe(e,"string");return Wm(t)=="symbol"?t:t+""}function EEe(e,t){if(Wm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZI=function(t,n,r,a,s){var o=r-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+s),l+="L ".concat(t+r-o/2-a,",").concat(n+s),l+="L ".concat(t,",").concat(n," Z"),l},PEe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TEe=function(t){var n=QI(QI({},PEe),t),r=p.useRef(),a=p.useState(-1),s=jEe(a,2),o=s[0],l=s[1];p.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&l(w)}catch{}},[]);var c=n.x,u=n.y,f=n.upperWidth,d=n.lowerWidth,h=n.height,m=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,y=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var b=Xt("recharts-trapezoid",m);return y?Y.createElement(_l,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:h,x:c,y:u},duration:v,animationEasing:g,isActive:y},function(w){var k=w.upperWidth,j=w.lowerWidth,_=w.height,S=w.x,T=w.y;return Y.createElement(_l,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,easing:g},Y.createElement("path",Vx({},sn(n,!0),{className:b,d:ZI(S,T,k,j,_),ref:r})))}):Y.createElement("g",null,Y.createElement("path",Vx({},sn(n,!0),{className:b,d:ZI(c,u,f,d,h)})))},OEe=["option","shapeType","propTransformer","activeClassName","isActive"];function Hm(e){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hm(e)}function IEe(e,t){if(e==null)return{};var n=REe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function REe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function eR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Kx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eR(Object(n),!0).forEach(function(r){MEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MEe(e,t,n){return t=DEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DEe(e){var t=$Ee(e,"string");return Hm(t)=="symbol"?t:t+""}function $Ee(e,t){if(Hm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LEe(e,t){return Kx(Kx({},t),e)}function FEe(e,t){return e==="symbols"}function tR(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return Y.createElement(dA,n);case"trapezoid":return Y.createElement(TEe,n);case"sector":return Y.createElement(C8,n);case"symbols":if(FEe(t))return Y.createElement(EC,n);break;default:return null}}function BEe(e){return p.isValidElement(e)?e.props:e}function UEe(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?LEe:r,s=e.activeClassName,o=s===void 0?"recharts-active-shape":s,l=e.isActive,c=IEe(e,OEe),u;if(p.isValidElement(t))u=p.cloneElement(t,Kx(Kx({},c),BEe(t)));else if(Ot(t))u=t(c);else if(pEe(t)&&!wEe(t)){var f=a(t,c);u=Y.createElement(tR,{shapeType:n,elementProps:f})}else{var d=c;u=Y.createElement(tR,{shapeType:n,elementProps:d})}return l?Y.createElement(xr,{className:o},u):u}function o0(e,t){return t!=null&&"trapezoids"in e.props}function l0(e,t){return t!=null&&"sectors"in e.props}function Vm(e,t){return t!=null&&"points"in e.props}function zEe(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,s=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&s}function qEe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function WEe(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function HEe(e,t){var n;return o0(e,t)?n=zEe:l0(e,t)?n=qEe:Vm(e,t)&&(n=WEe),n}function VEe(e,t){var n;return o0(e,t)?n="trapezoids":l0(e,t)?n="sectors":Vm(e,t)&&(n="points"),n}function KEe(e,t){if(o0(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(l0(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Vm(e,t)?t.payload:{}}function GEe(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=VEe(n,t),s=KEe(n,t),o=r.filter(function(c,u){var f=oA(s,c),d=n.props[a].filter(function(g){var v=HEe(n,t);return v(g,t)}),h=n.props[a].indexOf(d[d.length-1]),m=u===h;return f&&m}),l=r.indexOf(o[o.length-1]);return l}var YEe=Math.ceil,XEe=Math.max;function JEe(e,t,n,r){for(var a=-1,s=XEe(YEe((t-e)/(n||1)),0),o=Array(s);s--;)o[r?s:++a]=e,e+=n;return o}var QEe=JEe,ZEe=g6,nR=1/0,ePe=17976931348623157e292;function tPe(e){if(!e)return e===0?e:0;if(e=ZEe(e),e===nR||e===-nR){var t=e<0?-1:1;return t*ePe}return e===e?e:0}var B8=tPe,nPe=QEe,rPe=Yb,dj=B8;function aPe(e){return function(t,n,r){return r&&typeof r!="number"&&rPe(t,n,r)&&(n=r=void 0),t=dj(t),n===void 0?(n=t,t=0):n=dj(n),r=r===void 0?t<n?1:-1:dj(r),nPe(t,n,r,e)}}var iPe=aPe,sPe=iPe,oPe=sPe(),lPe=oPe;const Gx=un(lPe);function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function rR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function aR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rR(Object(n),!0).forEach(function(r){U8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U8(e,t,n){return t=cPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cPe(e){var t=uPe(e,"string");return Km(t)=="symbol"?t:t+""}function uPe(e,t){if(Km(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dPe=["Webkit","Moz","O","ms"],fPe=function(t,n){var r=t.replace(/(\w)/,function(s){return s.toUpperCase()}),a=dPe.reduce(function(s,o){return aR(aR({},s),{},U8({},o+r,n))},{});return a[t]=n,a};function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function Yx(){return Yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yx.apply(this,arguments)}function iR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iR(Object(n),!0).forEach(function(r){$a(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q8(r.key),r)}}function mPe(e,t,n){return t&&sR(e.prototype,t),n&&sR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pPe(e,t,n){return t=Xx(t),gPe(e,z8()?Reflect.construct(t,n||[],Xx(e).constructor):t.apply(e,n))}function gPe(e,t){if(t&&(Wd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vPe(e)}function vPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z8=function(){return!!e})()}function Xx(e){return Xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xx(e)}function xPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yk(e,t)}function yk(e,t){return yk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},yk(e,t)}function $a(e,t,n){return t=q8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q8(e){var t=yPe(e,"string");return Wd(t)=="symbol"?t:t+""}function yPe(e,t){if(Wd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bPe=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,s=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Ph().domain(Gx(0,c)).range([s,s+o-l]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(a),scale:u,scaleValues:f}},oR=function(t){return t.changedTouches&&!!t.changedTouches.length},Hd=function(e){function t(n){var r;return hPe(this,t),r=pPe(this,t,[n]),$a(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),$a(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),$a(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,s=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:s,startIndex:l})}),r.detachDragEndListener()}),$a(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),$a(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),$a(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),$a(r,"handleSlideDragStart",function(a){var s=oR(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return xPe(t,e),mPe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,s=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,d=Math.min(a,s),h=Math.max(a,s),m=t.getIndexInRange(o,d),g=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:g===f?f:g-g%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,s=a.data,o=a.tickFormatter,l=a.dataKey,c=Os(s[r],l,r);return Ot(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,s=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,h=c.startIndex,m=c.endIndex,g=c.onChange,v=r.pageX-s;v>0?v=Math.min(v,u+f-d-l,u+f-d-o):v<0&&(v=Math.max(v,u-o,u-l));var x=this.getIndex({startX:o+v,endX:l+v});(x.startIndex!==h||x.endIndex!==m)&&g&&g(x),this.setState({startX:o+v,endX:l+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var s=oR(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],f=this.props,d=f.x,h=f.width,m=f.travellerWidth,g=f.onChange,v=f.gap,x=f.data,y={startX:this.state.startX,endX:this.state.endX},b=r.pageX-s;b>0?b=Math.min(b,d+h-m-u):b<0&&(b=Math.max(b,d-u)),y[o]=u+b;var w=this.getIndex(y),k=w.startIndex,j=w.endIndex,_=function(){var T=x.length-1;return o==="startX"&&(l>c?k%v===0:j%v===0)||l<c&&j===T||o==="endX"&&(l>c?j%v===0:k%v===0)||l>c&&j===T};this.setState($a($a({},o,u+b),"brushMoveStartX",r.pageX),function(){g&&_()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,f=this.state[a],d=l.indexOf(f);if(d!==-1){var h=d+r;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState($a({},a,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return Y.createElement("rect",{stroke:u,fill:c,x:a,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.data,u=r.children,f=r.padding,d=p.Children.only(u);return d?Y.cloneElement(d,{x:a,y:s,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var s,o,l=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,h=c.traveller,m=c.ariaLabel,g=c.data,v=c.startIndex,x=c.endIndex,y=Math.max(r,this.props.x),b=fj(fj({},sn(this.props,!1)),{},{x:y,y:u,width:f,height:d}),w=m||"Min value: ".concat((s=g[v])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=g[x])===null||o===void 0?void 0:o.name);return Y.createElement(xr,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(r,a){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,f=Math.min(r,a)+u,d=Math.max(Math.abs(a-r)-u,0);return Y.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:d,height:l})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,s=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,f=this.state,d=f.startX,h=f.endX,m=5,g={pointerEvents:"none",fill:u};return Y.createElement(xr,{className:"recharts-brush-texts"},Y.createElement(Sx,Yx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-m,y:o+l/2},g),this.getTextOfTick(a)),Y.createElement(Sx,Yx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+c+m,y:o+l/2},g),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,a=r.data,s=r.className,o=r.children,l=r.x,c=r.y,u=r.width,f=r.height,d=r.alwaysShowText,h=this.state,m=h.startX,g=h.endX,v=h.isTextActive,x=h.isSlideMoving,y=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!Ke(l)||!Ke(c)||!Ke(u)||!Ke(f)||u<=0||f<=0)return null;var w=Xt("recharts-brush",s),k=Y.Children.count(o)===1,j=fPe("userSelect","none");return Y.createElement(xr,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),k&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(v||x||y||b||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,s=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(s+l/2)-1;return Y.createElement(Y.Fragment,null,Y.createElement("rect",{x:a,y:s,width:o,height:l,fill:c,stroke:"none"}),Y.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),Y.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var s;return Y.isValidElement(r)?s=Y.cloneElement(r,a):Ot(r)?s=r(a):s=t.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(r,a){var s=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,f=r.startIndex,d=r.endIndex;if(s!==a.prevData||u!==a.prevUpdateId)return fj({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?bPe({data:s,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,a){for(var s=r.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>a?l=c:o=c}return a>=r[l]?l:o}}])}(p.PureComponent);$a(Hd,"displayName","Brush");$a(Hd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var wPe=DC;function jPe(e,t){var n;return wPe(e,function(r,a,s){return n=t(r,a,s),!n}),!!n}var _Pe=jPe,kPe=qz,SPe=$l,NPe=_Pe,CPe=Oa,APe=Yb;function EPe(e,t,n){var r=CPe(e)?kPe:NPe;return n&&APe(e,t,n)&&(t=void 0),r(e,SPe(t))}var PPe=EPe;const TPe=un(PPe);var Cs=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},lR=d6;function OPe(e,t,n){t=="__proto__"&&lR?lR(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var IPe=OPe,RPe=IPe,MPe=c6,DPe=$l;function $Pe(e,t){var n={};return t=DPe(t),MPe(e,function(r,a,s){RPe(n,a,t(r,a,s))}),n}var LPe=$Pe;const FPe=un(LPe);function BPe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var UPe=BPe,zPe=DC;function qPe(e,t){var n=!0;return zPe(e,function(r,a,s){return n=!!t(r,a,s),n}),n}var WPe=qPe,HPe=UPe,VPe=WPe,KPe=$l,GPe=Oa,YPe=Yb;function XPe(e,t,n){var r=GPe(e)?HPe:VPe;return n&&YPe(e,t,n)&&(t=void 0),r(e,KPe(t))}var JPe=XPe;const W8=un(JPe);var QPe=["x","y"];function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function bk(){return bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bk.apply(this,arguments)}function cR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function nh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cR(Object(n),!0).forEach(function(r){ZPe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZPe(e,t,n){return t=eTe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eTe(e){var t=tTe(e,"string");return Gm(t)=="symbol"?t:t+""}function tTe(e,t){if(Gm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nTe(e,t){if(e==null)return{};var n=rTe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function rTe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function aTe(e,t){var n=e.x,r=e.y,a=nTe(e,QPe),s="".concat(n),o=parseInt(s,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||a.height),f=parseInt(u,10),d="".concat(t.width||a.width),h=parseInt(d,10);return nh(nh(nh(nh(nh({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:h,name:t.name,radius:t.radius})}function uR(e){return Y.createElement(UEe,bk({shapeType:"rectangle",propTransformer:aTe,activeClassName:"recharts-active-bar"},e))}var iTe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var s=Ke(r)||_fe(r);return s?t(r,a):(s||qc(),n)}},sTe=["value","background"],H8;function Vd(e){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vd(e)}function oTe(e,t){if(e==null)return{};var n=lTe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lTe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Jx(){return Jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jx.apply(this,arguments)}function dR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dR(Object(n),!0).forEach(function(r){nl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K8(r.key),r)}}function uTe(e,t,n){return t&&fR(e.prototype,t),n&&fR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dTe(e,t,n){return t=Qx(t),fTe(e,V8()?Reflect.construct(t,n||[],Qx(e).constructor):t.apply(e,n))}function fTe(e,t){if(t&&(Vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hTe(e)}function hTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V8=function(){return!!e})()}function Qx(e){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qx(e)}function mTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wk(e,t)}function wk(e,t){return wk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},wk(e,t)}function nl(e,t,n){return t=K8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K8(e){var t=pTe(e,"string");return Vd(t)=="symbol"?t:t+""}function pTe(e,t){if(Vd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dn=function(e){function t(){var n;cTe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=dTe(this,t,[].concat(a)),nl(n,"state",{isAnimationFinished:!1}),nl(n,"id",zb("recharts-bar-")),nl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),nl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return mTe(t,e),uTe(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,f=sn(this.props,!1);return r&&r.map(function(d,h){var m=h===c,g=m?u:o,v=Qn(Qn(Qn({},f),d),{},{isActive:m,option:g,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Y.createElement(xr,Jx({className:"recharts-bar-rectangle"},dx(a.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),Y.createElement(uR,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,s=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,f=a.animationEasing,d=a.animationId,h=this.state.prevData;return Y.createElement(_l,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,v=s.map(function(x,y){var b=h&&h[y];if(b){var w=gu(b.x,x.x),k=gu(b.y,x.y),j=gu(b.width,x.width),_=gu(b.height,x.height);return Qn(Qn({},x),{},{x:w(g),y:k(g),width:j(g),height:_(g)})}if(o==="horizontal"){var S=gu(0,x.height),T=S(g);return Qn(Qn({},x),{},{y:x.y+x.height-T,height:T})}var N=gu(0,x.width),A=N(g);return Qn(Qn({},x),{},{width:A})});return Y.createElement(xr,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,s=r.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!oA(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,s=a.data,o=a.dataKey,l=a.activeIndex,c=sn(this.props.background,!1);return s.map(function(u,f){u.value;var d=u.background,h=oTe(u,sTe);if(!d)return null;var m=Qn(Qn(Qn(Qn(Qn({},h),{},{fill:"#eee"},d),c),dx(r.props,u,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return Y.createElement(uR,Jx({key:"background-bar-".concat(f),option:r.props.background,isActive:f===l},m))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,d=Qi(f,s0);if(!d)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(x,y){var b=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:b,errorVal:Os(x,y)}},g={clipPath:r?"url(#clipPath-".concat(a,")"):null};return Y.createElement(xr,g,d.map(function(v){return Y.cloneElement(v,{key:"error-bar-".concat(a,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,s=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,f=r.top,d=r.width,h=r.height,m=r.isAnimationActive,g=r.background,v=r.id;if(a||!s||!s.length)return null;var x=this.state.isAnimationFinished,y=Xt("recharts-bar",o),b=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,k=b||w,j=on(v)?this.id:v;return Y.createElement(xr,{className:y},b||w?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(j)},Y.createElement("rect",{x:b?u:u-d/2,y:w?f:f-h/2,width:b?d:d*2,height:w?h:h*2}))):null,Y.createElement(xr,{className:"recharts-bar-rectangles",clipPath:k?"url(#clipPath-".concat(j,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(k,j),(!m||x)&&Gi.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(p.PureComponent);H8=Dn;nl(Dn,"displayName","Bar");nl(Dn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!hl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});nl(Dn,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,s=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,m=HSe(r,n);if(!m)return null;var g=t.layout,v=n.type.defaultProps,x=v!==void 0?Qn(Qn({},v),n.props):n.props,y=x.dataKey,b=x.children,w=x.minPointSize,k=g==="horizontal"?o:s,j=u?k.scale.domain():null,_=ZSe({numericAxis:k}),S=Qi(b,x6),T=d.map(function(N,A){var D,B,E,R,P,U;u?D=VSe(u[f+A],j):(D=Os(N,y),Array.isArray(D)||(D=[_,D]));var L=iTe(w,H8.defaultProps.minPointSize)(D[1],A);if(g==="horizontal"){var O,F=[o.scale(D[0]),o.scale(D[1])],C=F[0],z=F[1];B=uI({axis:s,ticks:l,bandSize:a,offset:m.offset,entry:N,index:A}),E=(O=z??C)!==null&&O!==void 0?O:void 0,R=m.size;var I=C-z;if(P=Number.isNaN(I)?0:I,U={x:B,y:o.y,width:R,height:o.height},Math.abs(L)>0&&Math.abs(P)<Math.abs(L)){var $=Ki(P||L)*(Math.abs(L)-Math.abs(P));E-=$,P+=$}}else{var K=[s.scale(D[0]),s.scale(D[1])],X=K[0],V=K[1];if(B=X,E=uI({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:N,index:A}),R=V-X,P=m.size,U={x:s.x,y:E,width:s.width,height:P},Math.abs(L)>0&&Math.abs(R)<Math.abs(L)){var W=Ki(R||L)*(Math.abs(L)-Math.abs(R));R+=W}}return Qn(Qn(Qn({},N),{},{x:B,y:E,width:R,height:P,value:u?D:D[1],payload:N,background:U},S&&S[A]&&S[A].props),{},{tooltipPayload:[k8(n,N)],tooltipPosition:{x:B+R/2,y:E+P/2}})});return Qn({data:T,layout:g},h)});function Ym(e){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ym(e)}function gTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G8(r.key),r)}}function vTe(e,t,n){return t&&hR(e.prototype,t),n&&hR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mR(Object(n),!0).forEach(function(r){c0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c0(e,t,n){return t=G8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G8(e){var t=xTe(e,"string");return Ym(t)=="symbol"?t:t+""}function xTe(e,t){if(Ym(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yTe=function(t,n,r,a,s){var o=t.width,l=t.height,c=t.layout,u=t.children,f=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},h=!!Fa(u,Dn);return f.reduce(function(m,g){var v=n[g],x=v.orientation,y=v.domain,b=v.padding,w=b===void 0?{}:b,k=v.mirror,j=v.reversed,_="".concat(x).concat(k?"Mirror":""),S,T,N,A,D;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var B=y[1]-y[0],E=1/0,R=v.categoricalDomain.sort(Nfe);if(R.forEach(function(K,X){X>0&&(E=Math.min((K||0)-(R[X-1]||0),E))}),Number.isFinite(E)){var P=E/B,U=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(S=P*U/2),v.padding==="no-gap"){var L=Uc(t.barCategoryGap,P*U),O=P*U/2;S=O-L-(O-L)/U*L}}}a==="xAxis"?T=[r.left+(w.left||0)+(S||0),r.left+r.width-(w.right||0)-(S||0)]:a==="yAxis"?T=c==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(S||0),r.top+r.height-(w.bottom||0)-(S||0)]:T=v.range,j&&(T=[T[1],T[0]]);var F=qSe(v,s,h),C=F.scale,z=F.realScaleType;C.domain(y).range(T),WSe(C);var I=QSe(C,Wi(Wi({},v),{},{realScaleType:z}));a==="xAxis"?(D=x==="top"&&!k||x==="bottom"&&k,N=r.left,A=d[_]-D*v.height):a==="yAxis"&&(D=x==="left"&&!k||x==="right"&&k,N=d[_]-D*v.width,A=r.top);var $=Wi(Wi(Wi({},v),I),{},{realScaleType:z,x:N,y:A,scale:C,width:a==="xAxis"?r.width:v.width,height:a==="yAxis"?r.height:v.height});return $.bandSize=Fx($,I),!v.hide&&a==="xAxis"?d[_]+=(D?-1:1)*$.height:v.hide||(d[_]+=(D?-1:1)*$.width),Wi(Wi({},m),{},c0({},g,$))},{})},Y8=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return{x:Math.min(r,s),y:Math.min(a,o),width:Math.abs(s-r),height:Math.abs(o-a)}},bTe=function(t){var n=t.x1,r=t.y1,a=t.x2,s=t.y2;return Y8({x:n,y:r},{x:a,y:s})},X8=function(){function e(t){gTe(this,e),this.scale=t}return vTe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],s=r[r.length-1];return a<=s?n>=a&&n<=s:n>=s&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();c0(X8,"EPS",1e-4);var fA=function(t){var n=Object.keys(t).reduce(function(r,a){return Wi(Wi({},r),{},c0({},a,X8.create(t[a])))},{});return Wi(Wi({},n),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return FPe(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return W8(a,function(s,o){return n[o].isInRange(s)})}})};function wTe(e){return(e%180+180)%180}var jTe=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=wTe(a),o=s*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},_Te=$l,kTe=Fp,STe=Kb;function NTe(e){return function(t,n,r){var a=Object(t);if(!kTe(t)){var s=_Te(n);t=STe(t),n=function(l){return s(a[l],l,a)}}var o=e(t,n,r);return o>-1?a[s?t[o]:o]:void 0}}var CTe=NTe,ATe=B8;function ETe(e){var t=ATe(e),n=t%1;return t===t?n?t-n:t:0}var PTe=ETe,TTe=r6,OTe=$l,ITe=PTe,RTe=Math.max;function MTe(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:ITe(n);return a<0&&(a=RTe(r+a,0)),TTe(e,OTe(t),a)}var DTe=MTe,$Te=CTe,LTe=DTe,FTe=$Te(LTe),BTe=FTe;const UTe=un(BTe);var zTe=Cde(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),hA=p.createContext(void 0),mA=p.createContext(void 0),J8=p.createContext(void 0),Q8=p.createContext({}),Z8=p.createContext(void 0),eq=p.createContext(0),tq=p.createContext(0),pR=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,s=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,f=zTe(s);return Y.createElement(hA.Provider,{value:r},Y.createElement(mA.Provider,{value:a},Y.createElement(Q8.Provider,{value:s},Y.createElement(J8.Provider,{value:f},Y.createElement(Z8.Provider,{value:o},Y.createElement(eq.Provider,{value:u},Y.createElement(tq.Provider,{value:c},l)))))))},qTe=function(){return p.useContext(Z8)},nq=function(t){var n=p.useContext(hA);n==null&&qc();var r=n[t];return r==null&&qc(),r},WTe=function(){var t=p.useContext(hA);return Ko(t)},HTe=function(){var t=p.useContext(mA),n=UTe(t,function(r){return W8(r.domain,Number.isFinite)});return n||Ko(t)},rq=function(t){var n=p.useContext(mA);n==null&&qc();var r=n[t];return r==null&&qc(),r},VTe=function(){var t=p.useContext(J8);return t},KTe=function(){return p.useContext(Q8)},pA=function(){return p.useContext(tq)},gA=function(){return p.useContext(eq)};function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}function GTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YTe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,iq(r.key),r)}}function XTe(e,t,n){return t&&YTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function JTe(e,t,n){return t=Zx(t),QTe(e,aq()?Reflect.construct(t,n||[],Zx(e).constructor):t.apply(e,n))}function QTe(e,t){if(t&&(Kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZTe(e)}function ZTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aq=function(){return!!e})()}function Zx(e){return Zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zx(e)}function e2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jk(e,t)}function jk(e,t){return jk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},jk(e,t)}function gR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gR(Object(n),!0).forEach(function(r){vA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vA(e,t,n){return t=iq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iq(e){var t=t2e(e,"string");return Kd(t)=="symbol"?t:t+""}function t2e(e,t){if(Kd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n2e(e,t){return s2e(e)||i2e(e,t)||a2e(e,t)||r2e()}function r2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a2e(e,t){if(e){if(typeof e=="string")return xR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xR(e,t)}}function xR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i2e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function s2e(e){if(Array.isArray(e))return e}function _k(){return _k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_k.apply(this,arguments)}var o2e=function(t,n){var r;return Y.isValidElement(t)?r=Y.cloneElement(t,n):Ot(t)?r=t(n):r=Y.createElement("line",_k({},n,{className:"recharts-reference-line-line"})),r},l2e=function(t,n,r,a,s,o,l,c,u){var f=s.x,d=s.y,h=s.width,m=s.height;if(r){var g=u.y,v=t.y.apply(g,{position:o});if(Cs(u,"discard")&&!t.y.isInRange(v))return null;var x=[{x:f+h,y:v},{x:f,y:v}];return c==="left"?x.reverse():x}if(n){var y=u.x,b=t.x.apply(y,{position:o});if(Cs(u,"discard")&&!t.x.isInRange(b))return null;var w=[{x:b,y:d+m},{x:b,y:d}];return l==="top"?w.reverse():w}if(a){var k=u.segment,j=k.map(function(_){return t.apply(_,{position:o})});return Cs(u,"discard")&&TPe(j,function(_){return!t.isInRange(_)})?null:j}return null};function c2e(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=qTe(),f=nq(a),d=rq(s),h=VTe();if(!u||!h)return null;oo(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=fA({x:f.scale,y:d.scale}),g=hr(t),v=hr(n),x=r&&r.length===2,y=l2e(m,g,v,x,h,e.position,f.orientation,d.orientation,e);if(!y)return null;var b=n2e(y,2),w=b[0],k=w.x,j=w.y,_=b[1],S=_.x,T=_.y,N=Cs(e,"hidden")?"url(#".concat(u,")"):void 0,A=vR(vR({clipPath:N},sn(e,!0)),{},{x1:k,y1:j,x2:S,y2:T});return Y.createElement(xr,{className:Xt("recharts-reference-line",l)},o2e(o,A),Wr.renderCallByParent(e,bTe({x1:k,y1:j,x2:S,y2:T})))}var xA=function(e){function t(){return GTe(this,t),JTe(this,t,arguments)}return e2e(t,e),XTe(t,[{key:"render",value:function(){return Y.createElement(c2e,this.props)}}])}(Y.Component);vA(xA,"displayName","ReferenceLine");vA(xA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function kk(){return kk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kk.apply(this,arguments)}function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}function yR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function bR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yR(Object(n),!0).forEach(function(r){u0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oq(r.key),r)}}function f2e(e,t,n){return t&&d2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function h2e(e,t,n){return t=ey(t),m2e(e,sq()?Reflect.construct(t,n||[],ey(e).constructor):t.apply(e,n))}function m2e(e,t){if(t&&(Gd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p2e(e)}function p2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sq=function(){return!!e})()}function ey(e){return ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ey(e)}function g2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sk(e,t)}function Sk(e,t){return Sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Sk(e,t)}function u0(e,t,n){return t=oq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oq(e){var t=v2e(e,"string");return Gd(t)=="symbol"?t:t+""}function v2e(e,t){if(Gd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x2e=function(t){var n=t.x,r=t.y,a=t.xAxis,s=t.yAxis,o=fA({x:a.scale,y:s.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Cs(t,"discard")&&!o.isInRange(l)?null:l},d0=function(e){function t(){return u2e(this,t),h2e(this,t,arguments)}return g2e(t,e),f2e(t,[{key:"render",value:function(){var r=this.props,a=r.x,s=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=hr(a),f=hr(s);if(oo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=x2e(this.props);if(!d)return null;var h=d.x,m=d.y,g=this.props,v=g.shape,x=g.className,y=Cs(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=bR(bR({clipPath:y},sn(this.props,!0)),{},{cx:h,cy:m});return Y.createElement(xr,{className:Xt("recharts-reference-dot",x)},t.renderDot(v,b),Wr.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(Y.Component);u0(d0,"displayName","ReferenceDot");u0(d0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});u0(d0,"renderDot",function(e,t){var n;return Y.isValidElement(e)?n=Y.cloneElement(e,t):Ot(e)?n=e(t):n=Y.createElement(L8,kk({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function Nk(){return Nk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nk.apply(this,arguments)}function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function wR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function jR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wR(Object(n),!0).forEach(function(r){f0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function y2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cq(r.key),r)}}function w2e(e,t,n){return t&&b2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function j2e(e,t,n){return t=ty(t),_2e(e,lq()?Reflect.construct(t,n||[],ty(e).constructor):t.apply(e,n))}function _2e(e,t){if(t&&(Yd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k2e(e)}function k2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lq=function(){return!!e})()}function ty(e){return ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ty(e)}function S2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ck(e,t)}function Ck(e,t){return Ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ck(e,t)}function f0(e,t,n){return t=cq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cq(e){var t=N2e(e,"string");return Yd(t)=="symbol"?t:t+""}function N2e(e,t){if(Yd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C2e=function(t,n,r,a,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,f=s.xAxis,d=s.yAxis;if(!f||!d)return null;var h=fA({x:f.scale,y:d.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:n?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Cs(s,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:Y8(m,g)},h0=function(e){function t(){return y2e(this,t),j2e(this,t,arguments)}return S2e(t,e),w2e(t,[{key:"render",value:function(){var r=this.props,a=r.x1,s=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,f=r.clipPathId;oo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=hr(a),h=hr(s),m=hr(o),g=hr(l),v=this.props.shape;if(!d&&!h&&!m&&!g&&!v)return null;var x=C2e(d,h,m,g,this.props);if(!x&&!v)return null;var y=Cs(this.props,"hidden")?"url(#".concat(f,")"):void 0;return Y.createElement(xr,{className:Xt("recharts-reference-area",c)},t.renderRect(v,jR(jR({clipPath:y},sn(this.props,!0)),x)),Wr.renderCallByParent(this.props,x))}}])}(Y.Component);f0(h0,"displayName","ReferenceArea");f0(h0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});f0(h0,"renderRect",function(e,t){var n;return Y.isValidElement(e)?n=Y.cloneElement(e,t):Ot(e)?n=e(t):n=Y.createElement(dA,Nk({},t,{className:"recharts-reference-area-rect"})),n});function uq(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function A2e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return jTe(r,n)}function E2e(e,t,n){var r=n==="width",a=e.x,s=e.y,o=e.width,l=e.height;return t===1?{start:r?a:s,end:r?a+o:s+l}:{start:r?a+o:s+l,end:r?a:s}}function ny(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-a)<=0}function P2e(e,t){return uq(e,t+1)}function T2e(e,t,n,r,a){for(var s=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,f=o,d=function(){var g=r==null?void 0:r[c];if(g===void 0)return{v:uq(r,u)};var v=c,x,y=function(){return x===void 0&&(x=n(g,v)),x},b=g.coordinate,w=c===0||ny(e,b,y,f,l);w||(c=0,f=o,u+=1),w&&(f=b+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=d(),h)return h.v;return[]}function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}function _R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_R(Object(n),!0).forEach(function(r){O2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_R(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O2e(e,t,n){return t=I2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I2e(e){var t=R2e(e,"string");return Xm(t)=="symbol"?t:t+""}function R2e(e,t){if(Xm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M2e(e,t,n,r,a){for(var s=(r||[]).slice(),o=s.length,l=t.start,c=t.end,u=function(h){var m=s[h],g,v=function(){return g===void 0&&(g=n(m,h)),g};if(h===o-1){var x=e*(m.coordinate+e*v()/2-c);s[h]=m=zr(zr({},m),{},{tickCoord:x>0?m.coordinate-x*e:m.coordinate})}else s[h]=m=zr(zr({},m),{},{tickCoord:m.coordinate});var y=ny(e,m.tickCoord,v,l,c);y&&(c=m.tickCoord-e*(v()/2+a),s[h]=zr(zr({},m),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return s}function D2e(e,t,n,r,a,s){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(s){var f=r[l-1],d=n(f,l-1),h=e*(f.coordinate+e*d/2-u);o[l-1]=f=zr(zr({},f),{},{tickCoord:h>0?f.coordinate-h*e:f.coordinate});var m=ny(e,f.tickCoord,function(){return d},c,u);m&&(u=f.tickCoord-e*(d/2+a),o[l-1]=zr(zr({},f),{},{isShow:!0}))}for(var g=s?l-1:l,v=function(b){var w=o[b],k,j=function(){return k===void 0&&(k=n(w,b)),k};if(b===0){var _=e*(w.coordinate-e*j()/2-c);o[b]=w=zr(zr({},w),{},{tickCoord:_<0?w.coordinate-_*e:w.coordinate})}else o[b]=w=zr(zr({},w),{},{tickCoord:w.coordinate});var S=ny(e,w.tickCoord,j,c,u);S&&(c=w.tickCoord+e*(j()/2+a),o[b]=zr(zr({},w),{},{isShow:!0}))},x=0;x<g;x++)v(x);return o}function yA(e,t,n){var r=e.tick,a=e.ticks,s=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!a||!a.length||!r)return[];if(Ke(c)||hl.isSsr)return P2e(a,typeof c=="number"&&Ke(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",g=f&&m==="width"?Eh(f,{fontSize:t,letterSpacing:n}):{width:0,height:0},v=function(w,k){var j=Ot(u)?u(w.value,k):w.value;return m==="width"?A2e(Eh(j,{fontSize:t,letterSpacing:n}),g,d):Eh(j,{fontSize:t,letterSpacing:n})[m]},x=a.length>=2?Ki(a[1].coordinate-a[0].coordinate):1,y=E2e(s,x,m);return c==="equidistantPreserveStart"?T2e(x,y,v,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=D2e(x,y,v,a,o,c==="preserveStartEnd"):h=M2e(x,y,v,a,o),h.filter(function(b){return b.isShow}))}var $2e=["viewBox"],L2e=["viewBox"],F2e=["ticks"];function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function Hu(){return Hu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hu.apply(this,arguments)}function kR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kR(Object(n),!0).forEach(function(r){bA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hj(e,t){if(e==null)return{};var n=B2e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function B2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function U2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fq(r.key),r)}}function z2e(e,t,n){return t&&SR(e.prototype,t),n&&SR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function q2e(e,t,n){return t=ry(t),W2e(e,dq()?Reflect.construct(t,n||[],ry(e).constructor):t.apply(e,n))}function W2e(e,t){if(t&&(Xd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H2e(e)}function H2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dq=function(){return!!e})()}function ry(e){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ry(e)}function V2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ak(e,t)}function Ak(e,t){return Ak=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ak(e,t)}function bA(e,t,n){return t=fq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fq(e){var t=K2e(e,"string");return Xd(t)=="symbol"?t:t+""}function K2e(e,t){if(Xd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nf=function(e){function t(n){var r;return U2e(this,t),r=q2e(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return V2e(t,e),z2e(t,[{key:"shouldComponentUpdate",value:function(r,a){var s=r.viewBox,o=hj(r,$2e),l=this.props,c=l.viewBox,u=hj(l,L2e);return!sd(s,c)||!sd(o,u)||!sd(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,s=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,f=a.tickSize,d=a.mirror,h=a.tickMargin,m,g,v,x,y,b,w=d?-1:1,k=r.tickSize||f,j=Ke(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=g=r.coordinate,x=o+ +!d*c,v=x-w*k,b=v-w*h,y=j;break;case"left":v=x=r.coordinate,g=s+ +!d*l,m=g-w*k,y=m-w*h,b=j;break;case"right":v=x=r.coordinate,g=s+ +d*l,m=g+w*k,y=m+w*h,b=j;break;default:m=g=r.coordinate,x=o+ +d*c,v=x+w*k,b=v+w*h,y=j;break}return{line:{x1:m,y1:v,x2:g,y2:x},tick:{x:y,y:b}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,f=r.axisLine,d=or(or(or({},sn(this.props,!1)),sn(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);d=or(or({},d),{},{x1:a,y1:s+h*l,x2:a+o,y2:s+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);d=or(or({},d),{},{x1:a+m*o,y1:s,x2:a+m*o,y2:s+l})}return Y.createElement("line",Hu({},d,{className:Xt("recharts-cartesian-axis-line",yi(f,"className"))}))}},{key:"renderTicks",value:function(r,a,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,d=l.tickFormatter,h=l.unit,m=yA(or(or({},this.props),{},{ticks:r}),a,s),g=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),x=sn(this.props,!1),y=sn(f,!1),b=or(or({},x),{},{fill:"none"},sn(c,!1)),w=m.map(function(k,j){var _=o.getTickLineCoord(k),S=_.line,T=_.tick,N=or(or(or(or({textAnchor:g,verticalAnchor:v},x),{},{stroke:"none",fill:u},y),T),{},{index:j,payload:k,visibleTicksCount:m.length,tickFormatter:d});return Y.createElement(xr,Hu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(k.value,"-").concat(k.coordinate,"-").concat(k.tickCoord)},dx(o.props,k,j)),c&&Y.createElement("line",Hu({},b,S,{className:Xt("recharts-cartesian-axis-tick-line",yi(c,"className"))})),f&&t.renderTickItem(f,N,"".concat(Ot(d)?d(k.value,j):k.value).concat(h||"")))});return Y.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,a=this.props,s=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var d=this.props,h=d.ticks,m=hj(d,F2e),g=h;return Ot(c)&&(g=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:Y.createElement(xr,{className:Xt("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},s&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Wr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,s){var o,l=Xt(a.className,"recharts-cartesian-axis-tick-value");return Y.isValidElement(r)?o=Y.cloneElement(r,or(or({},a),{},{className:l})):Ot(r)?o=r(or(or({},a),{},{className:l})):o=Y.createElement(Sx,Hu({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(p.Component);bA(Nf,"displayName","CartesianAxis");bA(Nf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var G2e=["x1","y1","x2","y2","key"],Y2e=["offset"];function Wc(e){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wc(e)}function NR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NR(Object(n),!0).forEach(function(r){X2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X2e(e,t,n){return t=J2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J2e(e){var t=Q2e(e,"string");return Wc(t)=="symbol"?t:t+""}function Q2e(e,t){if(Wc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dc(){return dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dc.apply(this,arguments)}function CR(e,t){if(e==null)return{};var n=Z2e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Z2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var eOe=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,c=t.ry;return Y.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function hq(e,t){var n;if(Y.isValidElement(e))n=Y.cloneElement(e,t);else if(Ot(e))n=e(t);else{var r=t.x1,a=t.y1,s=t.x2,o=t.y2,l=t.key,c=CR(t,G2e),u=sn(c,!1);u.offset;var f=CR(u,Y2e);n=Y.createElement("line",dc({},f,{x1:r,y1:a,x2:s,y2:o,fill:"none",key:l}))}return n}function tOe(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,s=e.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=Hr(Hr({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return hq(a,u)});return Y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function nOe(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,s=e.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=Hr(Hr({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return hq(a,u)});return Y.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function rOe(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,s=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==f[0]&&f.unshift(0);var d=f.map(function(h,m){var g=!f[m+1],v=g?a+o-h:f[m+1]-h;if(v<=0)return null;var x=m%t.length;return Y.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:v,width:s,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function aOe(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,s=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var f=u.map(function(h){return Math.round(h+s-s)}).sort(function(h,m){return h-m});s!==f[0]&&f.unshift(0);var d=f.map(function(h,m){var g=!f[m+1],v=g?s+l-h:f[m+1]-h;if(v<=0)return null;var x=m%r.length;return Y.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:v,height:c,stroke:"none",fill:r[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var iOe=function(t,n){var r=t.xAxis,a=t.width,s=t.height,o=t.offset;return j8(yA(Hr(Hr(Hr({},Nf.defaultProps),r),{},{ticks:to(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,n)},sOe=function(t,n){var r=t.yAxis,a=t.width,s=t.height,o=t.offset;return j8(yA(Hr(Hr(Hr({},Nf.defaultProps),r),{},{ticks:to(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,n)},yu={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ek(e){var t,n,r,a,s,o,l=pA(),c=gA(),u=KTe(),f=Hr(Hr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:yu.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:yu.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:yu.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:yu.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:yu.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:yu.verticalFill,x:Ke(e.x)?e.x:u.left,y:Ke(e.y)?e.y:u.top,width:Ke(e.width)?e.width:u.width,height:Ke(e.height)?e.height:u.height}),d=f.x,h=f.y,m=f.width,g=f.height,v=f.syncWithTicks,x=f.horizontalValues,y=f.verticalValues,b=WTe(),w=HTe();if(!Ke(m)||m<=0||!Ke(g)||g<=0||!Ke(d)||d!==+d||!Ke(h)||h!==+h)return null;var k=f.verticalCoordinatesGenerator||iOe,j=f.horizontalCoordinatesGenerator||sOe,_=f.horizontalPoints,S=f.verticalPoints;if((!_||!_.length)&&Ot(j)){var T=x&&x.length,N=j({yAxis:w?Hr(Hr({},w),{},{ticks:T?x:w.ticks}):void 0,width:l,height:c,offset:u},T?!0:v);oo(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Wc(N),"]")),Array.isArray(N)&&(_=N)}if((!S||!S.length)&&Ot(k)){var A=y&&y.length,D=k({xAxis:b?Hr(Hr({},b),{},{ticks:A?y:b.ticks}):void 0,width:l,height:c,offset:u},A?!0:v);oo(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Wc(D),"]")),Array.isArray(D)&&(S=D)}return Y.createElement("g",{className:"recharts-cartesian-grid"},Y.createElement(eOe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),Y.createElement(tOe,dc({},f,{offset:u,horizontalPoints:_,xAxis:b,yAxis:w})),Y.createElement(nOe,dc({},f,{offset:u,verticalPoints:S,xAxis:b,yAxis:w})),Y.createElement(rOe,dc({},f,{horizontalPoints:_})),Y.createElement(aOe,dc({},f,{verticalPoints:S})))}Ek.displayName="CartesianGrid";function Jd(e){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jd(e)}function oOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gq(r.key),r)}}function cOe(e,t,n){return t&&lOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uOe(e,t,n){return t=ay(t),dOe(e,mq()?Reflect.construct(t,n||[],ay(e).constructor):t.apply(e,n))}function dOe(e,t){if(t&&(Jd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fOe(e)}function fOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mq=function(){return!!e})()}function ay(e){return ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ay(e)}function hOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pk(e,t)}function Pk(e,t){return Pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Pk(e,t)}function pq(e,t,n){return t=gq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gq(e){var t=mOe(e,"string");return Jd(t)=="symbol"?t:t+""}function mOe(e,t){if(Jd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tk(){return Tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tk.apply(this,arguments)}function pOe(e){var t=e.xAxisId,n=pA(),r=gA(),a=nq(t);return a==null?null:p.createElement(Nf,Tk({},a,{className:Xt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return to(o,!0)}}))}var ta=function(e){function t(){return oOe(this,t),uOe(this,t,arguments)}return hOe(t,e),cOe(t,[{key:"render",value:function(){return p.createElement(pOe,this.props)}}])}(p.Component);pq(ta,"displayName","XAxis");pq(ta,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Qd(e){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(e)}function gOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yq(r.key),r)}}function xOe(e,t,n){return t&&vOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yOe(e,t,n){return t=iy(t),bOe(e,vq()?Reflect.construct(t,n||[],iy(e).constructor):t.apply(e,n))}function bOe(e,t){if(t&&(Qd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wOe(e)}function wOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vq=function(){return!!e})()}function iy(e){return iy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iy(e)}function jOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ok(e,t)}function Ok(e,t){return Ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ok(e,t)}function xq(e,t,n){return t=yq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yq(e){var t=_Oe(e,"string");return Qd(t)=="symbol"?t:t+""}function _Oe(e,t){if(Qd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ik(){return Ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ik.apply(this,arguments)}var kOe=function(t){var n=t.yAxisId,r=pA(),a=gA(),s=rq(n);return s==null?null:p.createElement(Nf,Ik({},s,{className:Xt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return to(l,!0)}}))},na=function(e){function t(){return gOe(this,t),yOe(this,t,arguments)}return jOe(t,e),xOe(t,[{key:"render",value:function(){return p.createElement(kOe,this.props)}}])}(p.Component);xq(na,"displayName","YAxis");xq(na,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function AR(e){return AOe(e)||COe(e)||NOe(e)||SOe()}function SOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NOe(e,t){if(e){if(typeof e=="string")return Rk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rk(e,t)}}function COe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AOe(e){if(Array.isArray(e))return Rk(e)}function Rk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mk=function(t,n,r,a,s){var o=Qi(t,xA),l=Qi(t,d0),c=[].concat(AR(o),AR(l)),u=Qi(t,h0),f="".concat(a,"Id"),d=a[0],h=n;if(c.length&&(h=c.reduce(function(v,x){if(x.props[f]===r&&Cs(x.props,"extendDomain")&&Ke(x.props[d])){var y=x.props[d];return[Math.min(v[0],y),Math.max(v[1],y)]}return v},h)),u.length){var m="".concat(d,"1"),g="".concat(d,"2");h=u.reduce(function(v,x){if(x.props[f]===r&&Cs(x.props,"extendDomain")&&Ke(x.props[m])&&Ke(x.props[g])){var y=x.props[m],b=x.props[g];return[Math.min(v[0],y,b),Math.max(v[1],y,b)]}return v},h)}return s&&s.length&&(h=s.reduce(function(v,x){return Ke(x)?[Math.min(v[0],x),Math.max(v[1],x)]:v},h)),h},bq={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function s(c,u,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new a(f,d||c,h),g=n?n+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,m=d.length,g=new Array(m);h<m;h++)g[h]=d[h].fn;return g},l.prototype.listenerCount=function(u){var f=n?n+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,h,m,g){var v=n?n+u:u;if(!this._events[v])return!1;var x=this._events[v],y=arguments.length,b,w;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,d),!0;case 4:return x.fn.call(x.context,f,d,h),!0;case 5:return x.fn.call(x.context,f,d,h,m),!0;case 6:return x.fn.call(x.context,f,d,h,m,g),!0}for(w=1,b=new Array(y-1);w<y;w++)b[w-1]=arguments[w];x.fn.apply(x.context,b)}else{var k=x.length,j;for(w=0;w<k;w++)switch(x[w].once&&this.removeListener(u,x[w].fn,void 0,!0),y){case 1:x[w].fn.call(x[w].context);break;case 2:x[w].fn.call(x[w].context,f);break;case 3:x[w].fn.call(x[w].context,f,d);break;case 4:x[w].fn.call(x[w].context,f,d,h);break;default:if(!b)for(j=1,b=new Array(y-1);j<y;j++)b[j-1]=arguments[j];x[w].fn.apply(x[w].context,b)}}return!0},l.prototype.on=function(u,f,d){return s(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return s(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,h){var m=n?n+u:u;if(!this._events[m])return this;if(!f)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===f&&(!h||g.once)&&(!d||g.context===d)&&o(this,m);else{for(var v=0,x=[],y=g.length;v<y;v++)(g[v].fn!==f||h&&!g[v].once||d&&g[v].context!==d)&&x.push(g[v]);x.length?this._events[m]=x.length===1?x[0]:x:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(bq);var EOe=bq.exports;const POe=un(EOe);var mj=new POe,pj="recharts.syncMouseEvents";function Jm(e){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}function TOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wq(r.key),r)}}function IOe(e,t,n){return t&&OOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gj(e,t,n){return t=wq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wq(e){var t=ROe(e,"string");return Jm(t)=="symbol"?t:t+""}function ROe(e,t){if(Jm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var MOe=function(){function e(){TOe(this,e),gj(this,"activeIndex",0),gj(this,"coordinateList",[]),gj(this,"layout","horizontal")}return IOe(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,s=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,f=n.offset,d=f===void 0?null:f,h=n.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=s+c+u,h=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function DOe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&Ke(r)&&Ke(a))return!0}return!1}function $Oe(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function jq(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,s=e.endAngle,o=Pr(t,n,r,a),l=Pr(t,n,r,s);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:a,endAngle:s}}function LOe(e,t,n){var r,a,s,o;if(e==="horizontal")r=t.x,s=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,h=Pr(l,c,u,d),m=Pr(l,c,f,d);r=h.x,a=h.y,s=m.x,o=m.y}else return jq(t);return[{x:r,y:a},{x:s,y:o}]}function Qm(e){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qm(e)}function ER(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Bg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ER(Object(n),!0).forEach(function(r){FOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ER(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FOe(e,t,n){return t=BOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function BOe(e){var t=UOe(e,"string");return Qm(t)=="symbol"?t:t+""}function UOe(e,t){if(Qm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zOe(e){var t,n,r=e.element,a=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,h=e.chartName,m=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!s||!o||h!=="ScatterChart"&&a!=="axis")return null;var g,v=NI;if(h==="ScatterChart")g=o,v=tEe;else if(h==="BarChart")g=$Oe(d,o,c,f),v=dA;else if(d==="radial"){var x=jq(o),y=x.cx,b=x.cy,w=x.radius,k=x.startAngle,j=x.endAngle;g={cx:y,cy:b,startAngle:k,endAngle:j,innerRadius:w,outerRadius:w},v=C8}else g={points:LOe(d,o,c)},v=NI;var _=Bg(Bg(Bg(Bg({stroke:"#ccc",pointerEvents:"none"},c),g),sn(m,!1)),{},{payload:l,payloadIndex:u,className:Xt("recharts-tooltip-cursor",m.className)});return p.isValidElement(m)?p.cloneElement(m,_):p.createElement(v,_)}var qOe=["item"],WOe=["children","className","width","height","style","compact","title","desc"];function Zd(e){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zd(e)}function Vu(){return Vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vu.apply(this,arguments)}function PR(e,t){return KOe(e)||VOe(e,t)||kq(e,t)||HOe()}function HOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VOe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function KOe(e){if(Array.isArray(e))return e}function TR(e,t){if(e==null)return{};var n=GOe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function GOe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function YOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sq(r.key),r)}}function JOe(e,t,n){return t&&XOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function QOe(e,t,n){return t=sy(t),ZOe(e,_q()?Reflect.construct(t,n||[],sy(e).constructor):t.apply(e,n))}function ZOe(e,t){if(t&&(Zd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eIe(e)}function eIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_q=function(){return!!e})()}function sy(e){return sy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sy(e)}function tIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dk(e,t)}function Dk(e,t){return Dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Dk(e,t)}function ef(e){return aIe(e)||rIe(e)||kq(e)||nIe()}function nIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kq(e,t){if(e){if(typeof e=="string")return $k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $k(e,t)}}function rIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function aIe(e){if(Array.isArray(e))return $k(e)}function $k(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function OR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OR(Object(n),!0).forEach(function(r){_t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _t(e,t,n){return t=Sq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sq(e){var t=iIe(e,"string");return Zd(t)=="symbol"?t:t+""}function iIe(e,t){if(Zd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sIe={xAxis:["bottom","top"],yAxis:["left","right"]},oIe={width:"100%",height:"100%"},Nq={x:0,y:0};function Ug(e){return e}var lIe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},cIe=function(t,n,r,a){var s=n.find(function(f){return f&&f.index===r});if(s){if(t==="horizontal")return{x:s.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:s.coordinate};if(t==="centric"){var o=s.coordinate,l=a.radius;return je(je(je({},a),Pr(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=a.angle;return je(je(je({},a),Pr(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return Nq},m0=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,s=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(ef(l),ef(u)):l},[]);return o.length>0?o:t&&t.length&&Ke(a)&&Ke(s)?t.slice(a,s+1):[]};function Cq(e){return e==="number"?[0,"auto"]:void 0}var Lk=function(t,n,r,a){var s=t.graphicalItems,o=t.tooltipAxis,l=m0(n,t);return r<0||!s||!s.length||r>=l.length?null:s.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:n;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=d===void 0?l:d;h=g_(m,o.dataKey,a)}else h=d&&d[r]||l[r];return h?[].concat(ef(c),[k8(u,h)]):c},[])},IR=function(t,n,r,a){var s=a||{x:t.chartX,y:t.chartY},o=lIe(s,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=$Se(o,l,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,h=Lk(t,n,f,d),m=cIe(r,l,f,s);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:m}}return null},uIe=function(t,n){var r=n.axes,a=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.layout,d=t.children,h=t.stackOffset,m=w8(f,s);return r.reduce(function(g,v){var x,y=v.type.defaultProps!==void 0?je(je({},v.type.defaultProps),v.props):v.props,b=y.type,w=y.dataKey,k=y.allowDataOverflow,j=y.allowDuplicatedCategory,_=y.scale,S=y.ticks,T=y.includeHidden,N=y[o];if(g[N])return g;var A=m0(t.data,{graphicalItems:a.filter(function(I){var $,K=o in I.props?I.props[o]:($=I.type.defaultProps)===null||$===void 0?void 0:$[o];return K===N}),dataStartIndex:c,dataEndIndex:u}),D=A.length,B,E,R;DOe(y.domain,k,b)&&(B=rk(y.domain,null,k),m&&(b==="number"||_!=="auto")&&(R=Th(A,w,"category")));var P=Cq(b);if(!B||B.length===0){var U,L=(U=y.domain)!==null&&U!==void 0?U:P;if(w){if(B=Th(A,w,b),b==="category"&&m){var O=Sfe(B);j&&O?(E=B,B=Gx(0,D)):j||(B=hI(L,B,v).reduce(function(I,$){return I.indexOf($)>=0?I:[].concat(ef(I),[$])},[]))}else if(b==="category")j?B=B.filter(function(I){return I!==""&&!on(I)}):B=hI(L,B,v).reduce(function(I,$){return I.indexOf($)>=0||$===""||on($)?I:[].concat(ef(I),[$])},[]);else if(b==="number"){var F=zSe(A,a.filter(function(I){var $,K,X=o in I.props?I.props[o]:($=I.type.defaultProps)===null||$===void 0?void 0:$[o],V="hide"in I.props?I.props.hide:(K=I.type.defaultProps)===null||K===void 0?void 0:K.hide;return X===N&&(T||!V)}),w,s,f);F&&(B=F)}m&&(b==="number"||_!=="auto")&&(R=Th(A,w,"category"))}else m?B=Gx(0,D):l&&l[N]&&l[N].hasStack&&b==="number"?B=h==="expand"?[0,1]:_8(l[N].stackGroups,c,u):B=b8(A,a.filter(function(I){var $=o in I.props?I.props[o]:I.type.defaultProps[o],K="hide"in I.props?I.props.hide:I.type.defaultProps.hide;return $===N&&(T||!K)}),b,f,!0);if(b==="number")B=Mk(d,B,N,s,S),L&&(B=rk(L,B,k));else if(b==="category"&&L){var C=L,z=B.every(function(I){return C.indexOf(I)>=0});z&&(B=C)}}return je(je({},g),{},_t({},N,je(je({},y),{},{axisType:s,domain:B,categoricalDomain:R,duplicateDomain:E,originalDomain:(x=y.domain)!==null&&x!==void 0?x:P,isCategorical:m,layout:f})))},{})},dIe=function(t,n){var r=n.graphicalItems,a=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.layout,d=t.children,h=m0(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=h.length,g=w8(f,s),v=-1;return r.reduce(function(x,y){var b=y.type.defaultProps!==void 0?je(je({},y.type.defaultProps),y.props):y.props,w=b[o],k=Cq("number");if(!x[w]){v++;var j;return g?j=Gx(0,m):l&&l[w]&&l[w].hasStack?(j=_8(l[w].stackGroups,c,u),j=Mk(d,j,w,s)):(j=rk(k,b8(h,r.filter(function(_){var S,T,N=o in _.props?_.props[o]:(S=_.type.defaultProps)===null||S===void 0?void 0:S[o],A="hide"in _.props?_.props.hide:(T=_.type.defaultProps)===null||T===void 0?void 0:T.hide;return N===w&&!A}),"number",f),a.defaultProps.allowDataOverflow),j=Mk(d,j,w,s)),je(je({},x),{},_t({},w,je(je({axisType:s},a.defaultProps),{},{hide:!0,orientation:yi(sIe,"".concat(s,".").concat(v%2),null),domain:j,originalDomain:k,isCategorical:g,layout:f})))}return x},{})},fIe=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.children,d="".concat(a,"Id"),h=Qi(f,s),m={};return h&&h.length?m=uIe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=dIe(t,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},hIe=function(t){var n=Ko(t),r=to(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:$C(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Fx(n,r)}},RR=function(t){var n=t.children,r=t.defaultShowTooltip,a=Fa(n,Hd),s=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},mIe=function(t){return!t||!t.length?!1:t.some(function(n){var r=so(n&&n.type);return r&&r.indexOf("Bar")>=0})},MR=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},pIe=function(t,n){var r=t.props,a=t.graphicalItems,s=t.xAxisMap,o=s===void 0?{}:s,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,f=r.height,d=r.children,h=r.margin||{},m=Fa(d,Hd),g=Fa(d,ui),v=Object.keys(c).reduce(function(j,_){var S=c[_],T=S.orientation;return!S.mirror&&!S.hide?je(je({},j),{},_t({},T,j[T]+S.width)):j},{left:h.left||0,right:h.right||0}),x=Object.keys(o).reduce(function(j,_){var S=o[_],T=S.orientation;return!S.mirror&&!S.hide?je(je({},j),{},_t({},T,yi(j,"".concat(T))+S.height)):j},{top:h.top||0,bottom:h.bottom||0}),y=je(je({},x),v),b=y.bottom;m&&(y.bottom+=m.props.height||Hd.defaultProps.height),g&&n&&(y=BSe(y,a,r,n));var w=u-y.left-y.right,k=f-y.top-y.bottom;return je(je({brushBottom:b},y),{},{width:Math.max(w,0),height:Math.max(k,0)})},gIe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},vIe=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,s=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,h=function(y,b){var w=b.graphicalItems,k=b.stackGroups,j=b.offset,_=b.updateId,S=b.dataStartIndex,T=b.dataEndIndex,N=y.barSize,A=y.layout,D=y.barGap,B=y.barCategoryGap,E=y.maxBarSize,R=MR(A),P=R.numericAxisName,U=R.cateAxisName,L=mIe(w),O=[];return w.forEach(function(F,C){var z=m0(y.data,{graphicalItems:[F],dataStartIndex:S,dataEndIndex:T}),I=F.type.defaultProps!==void 0?je(je({},F.type.defaultProps),F.props):F.props,$=I.dataKey,K=I.maxBarSize,X=I["".concat(P,"Id")],V=I["".concat(U,"Id")],W={},ae=c.reduce(function(gt,ut){var ee=b["".concat(ut.axisType,"Map")],We=I["".concat(ut.axisType,"Id")];ee&&ee[We]||ut.axisType==="zAxis"||qc();var st=ee[We];return je(je({},gt),{},_t(_t({},ut.axisType,st),"".concat(ut.axisType,"Ticks"),to(st)))},W),G=ae[U],le=ae["".concat(U,"Ticks")],se=k&&k[X]&&k[X].hasStack&&eNe(F,k[X].stackGroups),Q=so(F.type).indexOf("Bar")>=0,_e=Fx(G,le),xe=[],J=L&&LSe({barSize:N,stackGroups:k,totalSize:gIe(ae,U)});if(Q){var fe,Ce,Te=on(K)?E:K,Ee=(fe=(Ce=Fx(G,le,!0))!==null&&Ce!==void 0?Ce:Te)!==null&&fe!==void 0?fe:0;xe=FSe({barGap:D,barCategoryGap:B,bandSize:Ee!==_e?Ee:_e,sizeList:J[V],maxBarSize:Te}),Ee!==_e&&(xe=xe.map(function(gt){return je(je({},gt),{},{position:je(je({},gt.position),{},{offset:gt.position.offset-Ee/2})})}))}var ze=F&&F.type&&F.type.getComposedData;ze&&O.push({props:je(je({},ze(je(je({},ae),{},{displayedData:z,props:y,dataKey:$,item:F,bandSize:_e,barPosition:xe,offset:j,stackedData:se,layout:A,dataStartIndex:S,dataEndIndex:T}))),{},_t(_t(_t({key:F.key||"item-".concat(C)},P,ae[P]),U,ae[U]),"animationId",_)),childIndex:$fe(F,y.children),item:F})}),O},m=function(y,b){var w=y.props,k=y.dataStartIndex,j=y.dataEndIndex,_=y.updateId;if(!o2({props:w}))return null;var S=w.children,T=w.layout,N=w.stackOffset,A=w.data,D=w.reverseStackOrder,B=MR(T),E=B.numericAxisName,R=B.cateAxisName,P=Qi(S,r),U=JSe(A,P,"".concat(E,"Id"),"".concat(R,"Id"),N,D),L=c.reduce(function(I,$){var K="".concat($.axisType,"Map");return je(je({},I),{},_t({},K,fIe(w,je(je({},$),{},{graphicalItems:P,stackGroups:$.axisType===E&&U,dataStartIndex:k,dataEndIndex:j}))))},{}),O=pIe(je(je({},L),{},{props:w,graphicalItems:P}),b==null?void 0:b.legendBBox);Object.keys(L).forEach(function(I){L[I]=f(w,L[I],O,I.replace("Map",""),n)});var F=L["".concat(R,"Map")],C=hIe(F),z=h(w,je(je({},L),{},{dataStartIndex:k,dataEndIndex:j,updateId:_,graphicalItems:P,stackGroups:U,offset:O}));return je(je({formattedGraphicalItems:z,graphicalItems:P,offset:O,stackGroups:U},C),L)},g=function(x){function y(b){var w,k,j;return YOe(this,y),j=QOe(this,y,[b]),_t(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),_t(j,"accessibilityManager",new MOe),_t(j,"handleLegendBBoxUpdate",function(_){if(_){var S=j.state,T=S.dataStartIndex,N=S.dataEndIndex,A=S.updateId;j.setState(je({legendBBox:_},m({props:j.props,dataStartIndex:T,dataEndIndex:N,updateId:A},je(je({},j.state),{},{legendBBox:_}))))}}),_t(j,"handleReceiveSyncEvent",function(_,S,T){if(j.props.syncId===_){if(T===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(S)}}),_t(j,"handleBrushChange",function(_){var S=_.startIndex,T=_.endIndex;if(S!==j.state.dataStartIndex||T!==j.state.dataEndIndex){var N=j.state.updateId;j.setState(function(){return je({dataStartIndex:S,dataEndIndex:T},m({props:j.props,dataStartIndex:S,dataEndIndex:T,updateId:N},j.state))}),j.triggerSyncEvent({dataStartIndex:S,dataEndIndex:T})}}),_t(j,"handleMouseEnter",function(_){var S=j.getMouseInfo(_);if(S){var T=je(je({},S),{},{isTooltipActive:!0});j.setState(T),j.triggerSyncEvent(T);var N=j.props.onMouseEnter;Ot(N)&&N(T,_)}}),_t(j,"triggeredAfterMouseMove",function(_){var S=j.getMouseInfo(_),T=S?je(je({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(T),j.triggerSyncEvent(T);var N=j.props.onMouseMove;Ot(N)&&N(T,_)}),_t(j,"handleItemMouseEnter",function(_){j.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),_t(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),_t(j,"handleMouseMove",function(_){_.persist(),j.throttleTriggeredAfterMouseMove(_)}),_t(j,"handleMouseLeave",function(_){j.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};j.setState(S),j.triggerSyncEvent(S);var T=j.props.onMouseLeave;Ot(T)&&T(S,_)}),_t(j,"handleOuterEvent",function(_){var S=Dfe(_),T=yi(j.props,"".concat(S));if(S&&Ot(T)){var N,A;/.*touch.*/i.test(S)?A=j.getMouseInfo(_.changedTouches[0]):A=j.getMouseInfo(_),T((N=A)!==null&&N!==void 0?N:{},_)}}),_t(j,"handleClick",function(_){var S=j.getMouseInfo(_);if(S){var T=je(je({},S),{},{isTooltipActive:!0});j.setState(T),j.triggerSyncEvent(T);var N=j.props.onClick;Ot(N)&&N(T,_)}}),_t(j,"handleMouseDown",function(_){var S=j.props.onMouseDown;if(Ot(S)){var T=j.getMouseInfo(_);S(T,_)}}),_t(j,"handleMouseUp",function(_){var S=j.props.onMouseUp;if(Ot(S)){var T=j.getMouseInfo(_);S(T,_)}}),_t(j,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),_t(j,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&j.handleMouseDown(_.changedTouches[0])}),_t(j,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&j.handleMouseUp(_.changedTouches[0])}),_t(j,"handleDoubleClick",function(_){var S=j.props.onDoubleClick;if(Ot(S)){var T=j.getMouseInfo(_);S(T,_)}}),_t(j,"handleContextMenu",function(_){var S=j.props.onContextMenu;if(Ot(S)){var T=j.getMouseInfo(_);S(T,_)}}),_t(j,"triggerSyncEvent",function(_){j.props.syncId!==void 0&&mj.emit(pj,j.props.syncId,_,j.eventEmitterSymbol)}),_t(j,"applySyncEvent",function(_){var S=j.props,T=S.layout,N=S.syncMethod,A=j.state.updateId,D=_.dataStartIndex,B=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)j.setState(je({dataStartIndex:D,dataEndIndex:B},m({props:j.props,dataStartIndex:D,dataEndIndex:B,updateId:A},j.state)));else if(_.activeTooltipIndex!==void 0){var E=_.chartX,R=_.chartY,P=_.activeTooltipIndex,U=j.state,L=U.offset,O=U.tooltipTicks;if(!L)return;if(typeof N=="function")P=N(O,_);else if(N==="value"){P=-1;for(var F=0;F<O.length;F++)if(O[F].value===_.activeLabel){P=F;break}}var C=je(je({},L),{},{x:L.left,y:L.top}),z=Math.min(E,C.x+C.width),I=Math.min(R,C.y+C.height),$=O[P]&&O[P].value,K=Lk(j.state,j.props.data,P),X=O[P]?{x:T==="horizontal"?O[P].coordinate:z,y:T==="horizontal"?I:O[P].coordinate}:Nq;j.setState(je(je({},_),{},{activeLabel:$,activeCoordinate:X,activePayload:K,activeTooltipIndex:P}))}else j.setState(_)}),_t(j,"renderCursor",function(_){var S,T=j.state,N=T.isTooltipActive,A=T.activeCoordinate,D=T.activePayload,B=T.offset,E=T.activeTooltipIndex,R=T.tooltipAxisBandSize,P=j.getTooltipEventType(),U=(S=_.props.active)!==null&&S!==void 0?S:N,L=j.props.layout,O=_.key||"_recharts-cursor";return Y.createElement(zOe,{key:O,activeCoordinate:A,activePayload:D,activeTooltipIndex:E,chartName:n,element:_,isActive:U,layout:L,offset:B,tooltipAxisBandSize:R,tooltipEventType:P})}),_t(j,"renderPolarAxis",function(_,S,T){var N=yi(_,"type.axisType"),A=yi(j.state,"".concat(N,"Map")),D=_.type.defaultProps,B=D!==void 0?je(je({},D),_.props):_.props,E=A&&A[B["".concat(N,"Id")]];return p.cloneElement(_,je(je({},E),{},{className:Xt(N,E.className),key:_.key||"".concat(S,"-").concat(T),ticks:to(E,!0)}))}),_t(j,"renderPolarGrid",function(_){var S=_.props,T=S.radialLines,N=S.polarAngles,A=S.polarRadius,D=j.state,B=D.radiusAxisMap,E=D.angleAxisMap,R=Ko(B),P=Ko(E),U=P.cx,L=P.cy,O=P.innerRadius,F=P.outerRadius;return p.cloneElement(_,{polarAngles:Array.isArray(N)?N:to(P,!0).map(function(C){return C.coordinate}),polarRadius:Array.isArray(A)?A:to(R,!0).map(function(C){return C.coordinate}),cx:U,cy:L,innerRadius:O,outerRadius:F,key:_.key||"polar-grid",radialLines:T})}),_t(j,"renderLegend",function(){var _=j.state.formattedGraphicalItems,S=j.props,T=S.children,N=S.width,A=S.height,D=j.props.margin||{},B=N-(D.left||0)-(D.right||0),E=x8({children:T,formattedGraphicalItems:_,legendWidth:B,legendContent:u});if(!E)return null;var R=E.item,P=TR(E,qOe);return p.cloneElement(R,je(je({},P),{},{chartWidth:N,chartHeight:A,margin:D,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),_t(j,"renderTooltip",function(){var _,S=j.props,T=S.children,N=S.accessibilityLayer,A=Fa(T,Xn);if(!A)return null;var D=j.state,B=D.isTooltipActive,E=D.activeCoordinate,R=D.activePayload,P=D.activeLabel,U=D.offset,L=(_=A.props.active)!==null&&_!==void 0?_:B;return p.cloneElement(A,{viewBox:je(je({},U),{},{x:U.left,y:U.top}),active:L,label:P,payload:L?R:[],coordinate:E,accessibilityLayer:N})}),_t(j,"renderBrush",function(_){var S=j.props,T=S.margin,N=S.data,A=j.state,D=A.offset,B=A.dataStartIndex,E=A.dataEndIndex,R=A.updateId;return p.cloneElement(_,{key:_.key||"_recharts-brush",onChange:Dg(j.handleBrushChange,_.props.onChange),data:N,x:Ke(_.props.x)?_.props.x:D.left,y:Ke(_.props.y)?_.props.y:D.top+D.height+D.brushBottom-(T.bottom||0),width:Ke(_.props.width)?_.props.width:D.width,startIndex:B,endIndex:E,updateId:"brush-".concat(R)})}),_t(j,"renderReferenceElement",function(_,S,T){if(!_)return null;var N=j,A=N.clipPathId,D=j.state,B=D.xAxisMap,E=D.yAxisMap,R=D.offset,P=_.type.defaultProps||{},U=_.props,L=U.xAxisId,O=L===void 0?P.xAxisId:L,F=U.yAxisId,C=F===void 0?P.yAxisId:F;return p.cloneElement(_,{key:_.key||"".concat(S,"-").concat(T),xAxis:B[O],yAxis:E[C],viewBox:{x:R.left,y:R.top,width:R.width,height:R.height},clipPathId:A})}),_t(j,"renderActivePoints",function(_){var S=_.item,T=_.activePoint,N=_.basePoint,A=_.childIndex,D=_.isRange,B=[],E=S.props.key,R=S.item.type.defaultProps!==void 0?je(je({},S.item.type.defaultProps),S.item.props):S.item.props,P=R.activeDot,U=R.dataKey,L=je(je({index:A,dataKey:U,cx:T.x,cy:T.y,r:4,fill:uA(S.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},sn(P,!1)),ux(P));return B.push(y.renderActiveDot(P,L,"".concat(E,"-activePoint-").concat(A))),N?B.push(y.renderActiveDot(P,je(je({},L),{},{cx:N.x,cy:N.y}),"".concat(E,"-basePoint-").concat(A))):D&&B.push(null),B}),_t(j,"renderGraphicChild",function(_,S,T){var N=j.filterFormatItem(_,S,T);if(!N)return null;var A=j.getTooltipEventType(),D=j.state,B=D.isTooltipActive,E=D.tooltipAxis,R=D.activeTooltipIndex,P=D.activeLabel,U=j.props.children,L=Fa(U,Xn),O=N.props,F=O.points,C=O.isRange,z=O.baseLine,I=N.item.type.defaultProps!==void 0?je(je({},N.item.type.defaultProps),N.item.props):N.item.props,$=I.activeDot,K=I.hide,X=I.activeBar,V=I.activeShape,W=!!(!K&&B&&L&&($||X||V)),ae={};A!=="axis"&&L&&L.props.trigger==="click"?ae={onClick:Dg(j.handleItemMouseEnter,_.props.onClick)}:A!=="axis"&&(ae={onMouseLeave:Dg(j.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:Dg(j.handleItemMouseEnter,_.props.onMouseEnter)});var G=p.cloneElement(_,je(je({},N.props),ae));function le(ut){return typeof E.dataKey=="function"?E.dataKey(ut.payload):null}if(W)if(R>=0){var se,Q;if(E.dataKey&&!E.allowDuplicatedCategory){var _e=typeof E.dataKey=="function"?le:"payload.".concat(E.dataKey.toString());se=g_(F,_e,P),Q=C&&z&&g_(z,_e,P)}else se=F==null?void 0:F[R],Q=C&&z&&z[R];if(V||X){var xe=_.props.activeIndex!==void 0?_.props.activeIndex:R;return[p.cloneElement(_,je(je(je({},N.props),ae),{},{activeIndex:xe})),null,null]}if(!on(se))return[G].concat(ef(j.renderActivePoints({item:N,activePoint:se,basePoint:Q,childIndex:R,isRange:C})))}else{var J,fe=(J=j.getItemByXY(j.state.activeCoordinate))!==null&&J!==void 0?J:{graphicalItem:G},Ce=fe.graphicalItem,Te=Ce.item,Ee=Te===void 0?_:Te,ze=Ce.childIndex,gt=je(je(je({},N.props),ae),{},{activeIndex:ze});return[p.cloneElement(Ee,gt),null,null]}return C?[G,null,null]:[G,null]}),_t(j,"renderCustomized",function(_,S,T){return p.cloneElement(_,je(je({key:"recharts-customized-".concat(T)},j.props),j.state))}),_t(j,"renderMap",{CartesianGrid:{handler:Ug,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:Ug},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:Ug},YAxis:{handler:Ug},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:zb("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=v6(j.triggeredAfterMouseMove,(k=b.throttleDelay)!==null&&k!==void 0?k:1e3/60),j.state={},j}return tIe(y,x),JOe(y,[{key:"componentDidMount",value:function(){var w,k;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,k=w.children,j=w.data,_=w.height,S=w.layout,T=Fa(k,Xn);if(T){var N=T.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var A=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,D=Lk(this.state,j,N,A),B=this.state.tooltipTicks[N].coordinate,E=(this.state.offset.top+_)/2,R=S==="horizontal",P=R?{x:B,y:E}:{y:B,x:E},U=this.state.formattedGraphicalItems.find(function(O){var F=O.item;return F.type.name==="Scatter"});U&&(P=je(je({},P),U.props.points[N].tooltipPosition),D=U.props.points[N].tooltipPayload);var L={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:A,activePayload:D,activeCoordinate:P};this.setState(L),this.renderCursor(T),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,k){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==k.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var j,_;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(w){x_([Fa(w.children,Xn)],[Fa(this.props.children,Xn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Fa(this.props.children,Xn);if(w&&typeof w.props.shared=="boolean"){var k=w.props.shared?"axis":"item";return l.indexOf(k)>=0?k:s}return s}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var k=this.container,j=k.getBoundingClientRect(),_=cje(j),S={chartX:Math.round(w.pageX-_.left),chartY:Math.round(w.pageY-_.top)},T=j.width/k.offsetWidth||1,N=this.inRange(S.chartX,S.chartY,T);if(!N)return null;var A=this.state,D=A.xAxisMap,B=A.yAxisMap,E=this.getTooltipEventType(),R=IR(this.state,this.props.data,this.props.layout,N);if(E!=="axis"&&D&&B){var P=Ko(D).scale,U=Ko(B).scale,L=P&&P.invert?P.invert(S.chartX):null,O=U&&U.invert?U.invert(S.chartY):null;return je(je({},S),{},{xValue:L,yValue:O},R)}return R?je(je({},S),R):null}},{key:"inRange",value:function(w,k){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,S=w/j,T=k/j;if(_==="horizontal"||_==="vertical"){var N=this.state.offset,A=S>=N.left&&S<=N.left+N.width&&T>=N.top&&T<=N.top+N.height;return A?{x:S,y:T}:null}var D=this.state,B=D.angleAxisMap,E=D.radiusAxisMap;if(B&&E){var R=Ko(B);return gI({x:S,y:T},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,k=this.getTooltipEventType(),j=Fa(w,Xn),_={};j&&k==="axis"&&(j.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=ux(this.props,this.handleOuterEvent);return je(je({},S),_)}},{key:"addListener",value:function(){mj.on(pj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){mj.removeListener(pj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,k,j){for(var _=this.state.formattedGraphicalItems,S=0,T=_.length;S<T;S++){var N=_[S];if(N.item===w||N.props.key===w.key||k===so(N.item.type)&&j===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,k=this.state.offset,j=k.left,_=k.top,S=k.height,T=k.width;return Y.createElement("defs",null,Y.createElement("clipPath",{id:w},Y.createElement("rect",{x:j,y:_,height:S,width:T})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(k,j){var _=PR(j,2),S=_[0],T=_[1];return je(je({},k),{},_t({},S,T.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(k,j){var _=PR(j,2),S=_[0],T=_[1];return je(je({},k),{},_t({},S,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var k;return(k=this.state.xAxisMap)===null||k===void 0||(k=k[w])===null||k===void 0?void 0:k.scale}},{key:"getYScaleByAxisId",value:function(w){var k;return(k=this.state.yAxisMap)===null||k===void 0||(k=k[w])===null||k===void 0?void 0:k.scale}},{key:"getItemByXY",value:function(w){var k=this.state,j=k.formattedGraphicalItems,_=k.activeItem;if(j&&j.length)for(var S=0,T=j.length;S<T;S++){var N=j[S],A=N.props,D=N.item,B=D.type.defaultProps!==void 0?je(je({},D.type.defaultProps),D.props):D.props,E=so(D.type);if(E==="Bar"){var R=(A.data||[]).find(function(O){return HAe(w,O)});if(R)return{graphicalItem:N,payload:R}}else if(E==="RadialBar"){var P=(A.data||[]).find(function(O){return gI(w,O)});if(P)return{graphicalItem:N,payload:P}}else if(o0(N,_)||l0(N,_)||Vm(N,_)){var U=GEe({graphicalItem:N,activeTooltipItem:_,itemData:B.data}),L=B.activeIndex===void 0?U:B.activeIndex;return{graphicalItem:je(je({},N),{},{childIndex:L}),payload:Vm(N,_)?B.data[U]:N.props.data[U]}}}return null}},{key:"render",value:function(){var w=this;if(!o2(this))return null;var k=this.props,j=k.children,_=k.className,S=k.width,T=k.height,N=k.style,A=k.compact,D=k.title,B=k.desc,E=TR(k,WOe),R=sn(E,!1);if(A)return Y.createElement(pR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement(b_,Vu({},R,{width:S,height:T,title:D,desc:B}),this.renderClipPath(),c2(j,this.renderMap)));if(this.props.accessibilityLayer){var P,U;R.tabIndex=(P=this.props.tabIndex)!==null&&P!==void 0?P:0,R.role=(U=this.props.role)!==null&&U!==void 0?U:"application",R.onKeyDown=function(O){w.accessibilityManager.keyboardEvent(O)},R.onFocus=function(){w.accessibilityManager.focus()}}var L=this.parseEventsOfWrapper();return Y.createElement(pR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement("div",Vu({className:Xt("recharts-wrapper",_),style:je({position:"relative",cursor:"default",width:S,height:T},N)},L,{ref:function(F){w.container=F}}),Y.createElement(b_,Vu({},R,{width:S,height:T,title:D,desc:B,style:oIe}),this.renderClipPath(),c2(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(p.Component);_t(g,"displayName",n),_t(g,"defaultProps",je({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),_t(g,"getDerivedStateFromProps",function(x,y){var b=x.dataKey,w=x.data,k=x.children,j=x.width,_=x.height,S=x.layout,T=x.stackOffset,N=x.margin,A=y.dataStartIndex,D=y.dataEndIndex;if(y.updateId===void 0){var B=RR(x);return je(je(je({},B),{},{updateId:0},m(je(je({props:x},B),{},{updateId:0}),y)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:_,prevLayout:S,prevStackOffset:T,prevMargin:N,prevChildren:k})}if(b!==y.prevDataKey||w!==y.prevData||j!==y.prevWidth||_!==y.prevHeight||S!==y.prevLayout||T!==y.prevStackOffset||!sd(N,y.prevMargin)){var E=RR(x),R={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},P=je(je({},IR(y,w,S)),{},{updateId:y.updateId+1}),U=je(je(je({},E),R),P);return je(je(je({},U),m(je({props:x},U),y)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:_,prevLayout:S,prevStackOffset:T,prevMargin:N,prevChildren:k})}if(!x_(k,y.prevChildren)){var L,O,F,C,z=Fa(k,Hd),I=z&&(L=(O=z.props)===null||O===void 0?void 0:O.startIndex)!==null&&L!==void 0?L:A,$=z&&(F=(C=z.props)===null||C===void 0?void 0:C.endIndex)!==null&&F!==void 0?F:D,K=I!==A||$!==D,X=!on(w),V=X&&!K?y.updateId:y.updateId+1;return je(je({updateId:V},m(je(je({props:x},y),{},{updateId:V,dataStartIndex:I,dataEndIndex:$}),y)),{},{prevChildren:k,dataStartIndex:I,dataEndIndex:$})}return null}),_t(g,"renderActiveDot",function(x,y,b){var w;return p.isValidElement(x)?w=p.cloneElement(x,y):Ot(x)?w=x(y):w=Y.createElement(L8,y),Y.createElement(xr,{className:"recharts-active-dot",key:b},w)});var v=p.forwardRef(function(y,b){return Y.createElement(g,Vu({},y,{ref:b}))});return v.displayName=g.displayName,v},si=vIe({chartName:"BarChart",GraphicalChild:Dn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ta},{axisType:"yAxis",AxisComp:na}],formatAxisMap:yTe});const xIe=[{name:"Resolved by Human",value:15},{name:"Resolved by AI",value:85}],Sr=["#60a5fa","#2563eb","#1d4ed8","#10b981","#f59e0b","#ef4444"],xn=({label:e,description:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:t})})]})]});function yIe(){p.useMemo(()=>Sr.slice(0,xIe.length),[]),br();const[e,t]=p.useState(""),[n,r]=p.useState(""),[a,s]=p.useState([]),[o,l]=p.useState(0),[c,u]=p.useState(0),[f,d]=p.useState({total:0,ai:0,rate:0,handover:0,handover_rate:0}),[h,m]=p.useState("all"),[g,v]=p.useState([]),[x,y]=p.useState([]),[b,w]=p.useState(!1),[k,j]=p.useState([]),[_,S]=p.useState([]),[T,N]=p.useState([]),[A,D]=p.useState({input:0,output:0,total:0}),[B,E]=p.useState([]),[R,P]=p.useState([]),[U,L]=p.useState([]),[O,F]=p.useState("all"),[C,z]=p.useState([]),[I,$]=p.useState(null),[K,X]=p.useState(null),[V,W]=p.useState([]),[ae,G]=p.useState(null),[le,se]=p.useState(void 0),[Q,_e]=p.useState(!1),xe=ee=>{if(!ee||ee.trim().length===0)return"(unspecified)";if(ee.startsWith("other:"))return ee.replace(/^other:/,"Other: ");switch(ee){case"ambiguous":return"Ambiguous intent";case"payment":return"Payment-related";case"policy":return"Policy/compliance";default:return ee}},J=()=>{const ee=new Date,We=n?new Date(n):ee,st=e?new Date(e):new Date(ee.getTime()-29*24*60*60*1e3),oe=new Date(Date.UTC(st.getUTCFullYear(),st.getUTCMonth(),st.getUTCDate(),0,0,0)),ve=new Date(Date.UTC(We.getUTCFullYear(),We.getUTCMonth(),We.getUTCDate()+1,0,0,0));return{start:oe.toISOString(),end:ve.toISOString()}},fe=async()=>{const{start:ee,end:We}=J(),{data:st}=await wt.rpc("get_channel_chat_counts",{p_from:ee,p_to:We});s((st||[]).map(Be=>({provider:Be.provider,display_name:Be.display_name,thread_count:Number(Be.thread_count||0)})));const{data:oe}=await wt.rpc("get_response_time_stats",{p_from:ee,p_to:We,p_channel:h!=="all"?h:null});if(oe&&oe.length>0){const Be=oe[0];l(Number(Be.ai_avg||0)),u(Number(Be.agent_avg||0))}const{data:ve,error:De}=await wt.rpc("get_containment_and_handover",{p_from:ee,p_to:We});if(!De&&ve&&ve.length>0){const Be=ve[0];d({total:Number(Be.total_threads||0),ai:Number(Be.ai_resolved_count||0),rate:Number(Be.containment_rate||0),handover:Number(Be.handover_count||0),handover_rate:Number(Be.handover_rate||0)})}else if(De&&De.code==="PGRST202"){const{data:Be}=await wt.rpc("get_containment",{p_from:ee,p_to:We});let xt=0,yt=0,He=0,lt=0,mt=0;if(Be&&Be.length>0){const Pe=Be[0];xt=Number(Pe.total_threads||0),yt=Number(Pe.ai_resolved_count||0),He=Number(Pe.rate||0)}const{data:en}=await wt.rpc("get_handover_stats",{p_from:ee,p_to:We}),ue=(en||[]).reduce((Pe,H)=>Pe+Number(H.count||0),0);lt=ue,mt=xt>0?ue/xt:0,d({total:xt,ai:yt,rate:He,handover:lt,handover_rate:mt})}const{data:Me}=await wt.rpc("get_chats_timeseries",{p_from:ee,p_to:We,p_channel:h!=="all"?h:null});v((Me||[]).map(Be=>({bucket:Be.bucket,provider:Be.provider,count:Number(Be.count||0)})));const{data:Z}=await wt.rpc("get_handover_stats",{p_from:ee,p_to:We});y((Z||[]).map(Be=>({reason:xe(Be.reason)||"(unspecified)",count:Number(Be.count||0),total:Number(Be.total||0),rate:Number(Be.rate||0)})));try{const{data:Be}=await ie.from("token_usage_logs").select("made_at, prompt_tokens, completion_tokens, total_tokens, model, channel_id").gte("made_at",ee).lt("made_at",We).order("made_at",{ascending:!0}),xt={},yt={};let He=0,lt=0,mt=0;for(const Pe of Be||[]){const H=new Date(Pe.made_at).toISOString().slice(0,10),we=Number(Pe.prompt_tokens||0),ge=Number(Pe.completion_tokens||0),Ue=Number(Pe.total_tokens||we+ge);xt[H]||(xt[H]={input:0,output:0,total:0}),xt[H].input+=we,xt[H].output+=ge,xt[H].total+=Ue;const tt=String(Pe.model||"unknown");yt[tt]=(yt[tt]||0)+Ue,He+=we,lt+=ge,mt+=Ue}const en=Object.keys(xt).sort().map(Pe=>({day:Pe,...xt[Pe]})),ue=Object.entries(yt).sort((Pe,H)=>H[1]-Pe[1]).slice(0,8).map(([Pe,H])=>({model:Pe,tokens:H}));S(en),N(ue),D({input:He,output:lt,total:mt})}catch{}try{const{data:Be}=await wt.rpc("get_handover_by_super_agent",{p_from:ee,p_to:We});E((Be||[]).map(lt=>({super_agent_id:lt.super_agent_id,super_agent_name:lt.super_agent_name,human_resolved:Number(lt.human_resolved||0),ai_resolved:Number(lt.ai_resolved||0),handover_rate:Number(lt.handover_rate||0)})));const xt=O!=="all"?O:null,[{data:yt},{data:He}]=await Promise.all([wt.rpc("get_handover_by_agent",{p_from:ee,p_to:We,p_super_agent_id:xt}),wt.rpc("get_agent_kpis",{p_from:ee,p_to:We,p_super_agent_id:xt})]);P((yt||[]).map(lt=>({agent_user_id:lt.agent_user_id,agent_name:lt.agent_name,super_agent_id:lt.super_agent_id,human_resolved:Number(lt.human_resolved||0),ai_resolved:Number(lt.ai_resolved||0),handover_rate:Number(lt.handover_rate||0)}))),L((He||[]).map(lt=>({agent_user_id:lt.agent_user_id,agent_name:lt.agent_name,resolved_count:Number(lt.resolved_count||0),avg_resolution_minutes:lt.avg_resolution_minutes!=null?Number(lt.avg_resolution_minutes):null})))}catch{}},Ce=async()=>{try{const{data:ee,error:We}=await wt.rpc("get_database_stats_detailed");if(We){console.error("Error fetching database stats:",We);return}ee&&(console.log("Database stats fetched:",ee.length,"tables"),z(ee.map(Z=>({tablename:Z.tablename,total_size_bytes:Number(Z.total_size_bytes||0),total_size_pretty:Z.total_size_pretty||"0 bytes",table_size_bytes:Number(Z.table_size_bytes||0),table_size_pretty:Z.table_size_pretty||"0 bytes",indexes_size_bytes:Number(Z.indexes_size_bytes||0),indexes_size_pretty:Z.indexes_size_pretty||"0 bytes",row_count:Number(Z.row_count||0),dead_rows:Number(Z.dead_rows||0),sequential_scans:Number(Z.sequential_scans||0),index_scans:Number(Z.index_scans||0),table_scan_ratio:Number(Z.table_scan_ratio||0),last_vacuum:Z.last_vacuum||null,last_autovacuum:Z.last_autovacuum||null,last_analyze:Z.last_analyze||null,last_autoanalyze:Z.last_autoanalyze||null,inserts:Number(Z.inserts||0),updates:Number(Z.updates||0),deletes:Number(Z.deletes||0),hot_updates:Number(Z.hot_updates||0)}))));const{data:st,error:oe}=await wt.rpc("get_database_overview");if(oe&&console.error("Error fetching database overview:",oe),st&&st.length>0){console.log("Database overview fetched:",st);const Z=st[0];$({total_size_bytes:Number(Z.total_size_bytes||0),total_size_pretty:Z.total_size_pretty||"0 bytes",data_size_bytes:Number(Z.data_size_bytes||0),data_size_pretty:Z.data_size_pretty||"0 bytes",indexes_size_bytes:Number(Z.indexes_size_bytes||0),indexes_size_pretty:Z.indexes_size_pretty||"0 bytes",total_tables:Number(Z.total_tables||0),total_rows:Number(Z.total_rows||0),total_indexes:Number(Z.total_indexes||0),total_sequences:Number(Z.total_sequences||0)})}const{data:ve}=await wt.rpc("get_database_memory_stats");if(ve&&ve.length>0){const Z=ve[0];X({shared_buffers_hit:Number(Z.shared_buffers_hit||0),shared_buffers_read:Number(Z.shared_buffers_read||0),shared_buffers_hit_ratio:Number(Z.shared_buffers_hit_ratio||0),cache_hit_ratio:Number(Z.cache_hit_ratio||0),heap_hit_ratio:Number(Z.heap_hit_ratio||0),idx_scan_ratio:Number(Z.idx_scan_ratio||0),total_sequential_scans:Number(Z.total_sequential_scans||0),total_index_scans:Number(Z.total_index_scans||0)})}const{data:De}=await wt.rpc("get_index_stats");De&&W(De.map(Z=>({tablename:Z.tablename,indexname:Z.indexname,index_size_bytes:Number(Z.index_size_bytes||0),index_size_pretty:Z.index_size_pretty||"0 bytes",index_scans:Number(Z.index_scans||0),index_tup_reads:Number(Z.index_tup_reads||0),index_tup_fetches:Number(Z.index_tup_fetches||0),idx_blks_hit:Number(Z.idx_blks_hit||0),idx_blks_read:Number(Z.idx_blks_read||0)})));const{data:Me}=await wt.rpc("get_database_activity");if(Me&&Me.length>0){const Z=Me[0];G({total_inserts:Number(Z.total_inserts||0),total_updates:Number(Z.total_updates||0),total_deletes:Number(Z.total_deletes||0),total_sequential_scans:Number(Z.total_sequential_scans||0),total_index_scans:Number(Z.total_index_scans||0),total_blocks_hit:Number(Z.total_blocks_hit||0),total_blocks_read:Number(Z.total_blocks_read||0),cache_hit_percentage:Number(Z.cache_hit_percentage||0)})}}catch(ee){console.error("Failed to fetch database stats:",ee),z([]),$(null),X(null),W([]),G(null)}},Te=ee=>ee.toISOString().slice(0,10),Ee=ee=>{if(!ee)return"";const We=new Date(ee);return Number.isNaN(We.getTime())?"":We.toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})},ze=p.useMemo(()=>e&&n?`${Ee(e)}  ${Ee(n)}`:e?`From ${Ee(e)}`:n?`Until ${Ee(n)}`:"Select date range",[e,n]);p.useEffect(()=>{se(ee=>{const We=e?new Date(e):void 0,st=n?new Date(n):void 0;if(!We&&!st)return ee&&void 0;const oe=ee!=null&&ee.from?ee.from.getTime():void 0,ve=ee!=null&&ee.to?ee.to.getTime():void 0,De=We?We.getTime():void 0,Me=st?st.getTime():void 0;return oe===De&&ve===Me?ee:{from:We,to:st}})},[e,n]);const gt=ee=>{if(se(ee),!ee){t(""),r("");return}const We=ee.from?Te(ee.from):"",st=ee.to?Te(ee.to):"";t(We),r(st),ee.from&&ee.to&&_e(!1)},ut=()=>{se(void 0),t(""),r(""),_e(!1)};return p.useEffect(()=>{if(Q)return;(()=>{fe(),Ce()})()},[e,n,h,Q]),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Analytics"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"High-level KPIs for conversations, AI agents, and human agents."})]}),i.jsxs("div",{className:"flex items-end gap-3 flex-wrap",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-xs text-muted-foreground mb-1",children:"Date Range"}),i.jsxs(hi,{open:Q,onOpenChange:_e,children:[i.jsx(mi,{asChild:!0,children:i.jsxs(ne,{variant:"outline",className:`justify-start text-left font-normal h-9 w-[220px] ${!e&&!n?"text-muted-foreground":""}`,children:[i.jsx(Cc,{className:"mr-2 h-4 w-4"}),ze]})}),i.jsxs(Wa,{className:"w-auto min-w-[520px] p-0",align:"start",children:[i.jsx(gm,{mode:"range",numberOfMonths:2,selected:le,defaultMonth:(le==null?void 0:le.from)??new Date,onSelect:gt,disabled:ee=>ee>new Date,initialFocus:!0}),i.jsxs("div",{className:"flex items-center justify-between border-t px-3 py-2",children:[i.jsx(ne,{variant:"ghost",size:"sm",onClick:ut,children:"Clear"}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(ne,{variant:"outline",size:"sm",onClick:()=>_e(!1),disabled:!(le!=null&&le.from)&&!(le!=null&&le.to),children:"Done"})})]})]})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Channel"}),i.jsxs(qt,{value:h,onValueChange:async ee=>{m(ee);try{await $t({action:"analytics.channel_filter",resource:"analytics",context:{channel:ee}})}catch{}},children:[i.jsx(Lt,{className:"h-9 w-[180px]",children:i.jsx(It,{placeholder:"All"})}),i.jsxs(Ft,{children:[i.jsx(Ge,{value:"all",children:"All"}),i.jsx(Ge,{value:"whatsapp",children:"WhatsApp"}),i.jsx(Ge,{value:"web",children:"Web"}),i.jsx(Ge,{value:"telegram",children:"Telegram"})]})]})]}),i.jsx(ne,{variant:"outline",className:"h-9",onClick:()=>{fe(),Ce()},children:"Refresh"})]}),i.jsxs(bl,{defaultValue:"conversation",className:"w-full mt-4",children:[i.jsxs(vo,{className:"grid w-full max-w-2xl grid-cols-5 bg-muted/50 p-1",children:[i.jsx(Vn,{value:"conversation",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("span",{children:"Conversation"})}),i.jsx(he,{children:i.jsx("p",{children:"Lihat analitik percakapan dan KPI"})})]})}),i.jsx(Vn,{value:"ai-agent",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("span",{children:"AI Agent"})}),i.jsx(he,{children:i.jsx("p",{children:"Lihat metrik kinerja agen AI"})})]})}),i.jsx(Vn,{value:"human-agent",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("span",{children:"Human Agent"})}),i.jsx(he,{children:i.jsx("p",{children:"Lihat metrik kinerja agen manusia"})})]})}),i.jsx(Vn,{value:"database",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("span",{children:"Database"})}),i.jsx(he,{children:i.jsx("p",{children:"Lihat statistik penggunaan database dan ukuran tabel"})})]})})]}),i.jsxs(In,{value:"conversation",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Total Chats",description:"Jumlah total percakapan yang terjadi dalam periode yang dipilih"})})}),i.jsx(Qe,{children:i.jsx("div",{className:"text-2xl font-semibold",children:f.total})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"AI Containment Rate",description:"Persentase percakapan yang berhasil diselesaikan oleh AI tanpa perlu intervensi manusia. Semakin tinggi semakin baik."})})}),i.jsxs(Qe,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Math.round(f.rate*100),"%"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.ai," / ",f.total]}),i.jsx(ne,{variant:"outline",className:"mt-2 h-8",onClick:async()=>{w(!0);const{start:ee,end:We}=J(),{data:st}=await wt.rpc("get_non_contained",{p_from:ee,p_to:We,p_limit:100,p_offset:0});j(st||[])},children:"View non-contained"})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Handover Rate",description:"Persentase percakapan yang dialihkan dari AI ke agen manusia karena memerlukan intervensi manual"})})}),i.jsxs(Qe,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Math.round(f.handover_rate*100),"%"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.handover," / ",f.total]})]})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Chats per Channel",description:"Distribusi jumlah percakapan berdasarkan saluran komunikasi (WhatsApp, Telegram, Web Chat, dll)"})})}),i.jsx(Qe,{className:"h-64",children:i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:a.map(ee=>({name:ee.display_name||ee.provider,count:ee.thread_count})),children:[i.jsx(ta,{dataKey:"name"}),i.jsx(na,{}),i.jsx(Xn,{}),i.jsx(Dn,{dataKey:"count",fill:Sr[2],radius:[4,4,0,0],children:i.jsx(Gi,{dataKey:"count",position:"top"})})]})})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Chats Time Series (Asia/Jakarta)",description:"Grafik tren jumlah percakapan dari waktu ke waktu dalam zona waktu Asia/Jakarta, dikelompokkan berdasarkan saluran"})})}),i.jsx(Qe,{className:"h-64",children:i.jsx(ii,{width:"100%",height:"100%",children:(()=>{const ee=Array.from(new Set(g.map(oe=>oe.provider))),st=Array.from(new Set(g.map(oe=>oe.bucket))).sort().map(oe=>{var De;const ve={bucket:new Date(oe).toLocaleDateString("en-US",{timeZone:"Asia/Jakarta"})};for(const Me of ee)ve[Me]=((De=g.find(Z=>Z.bucket===oe&&Z.provider===Me))==null?void 0:De.count)||0;return ve});return i.jsxs(si,{data:st,children:[i.jsx(ta,{dataKey:"bucket"}),i.jsx(na,{}),i.jsx(Xn,{}),i.jsx(ui,{}),ee.map((oe,ve)=>i.jsx(Dn,{dataKey:oe,stackId:void 0,fill:Sr[ve%(Sr.length-1)+1]},oe))]})})()})})]})]}),i.jsxs(In,{value:"ai-agent",className:"space-y-6",children:[i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"AI Token Usage (by day)",description:"Penggunaan token AI per hari, menunjukkan token input (prompt) dan output (completion). Token adalah unit penggunaan untuk menghitung biaya AI"})})}),i.jsxs(Qe,{className:"h-64",children:[i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:_.map(ee=>({day:new Date(ee.day).toLocaleDateString("en-US",{timeZone:"Asia/Jakarta"}),input:ee.input,output:ee.output})),children:[i.jsx(ta,{dataKey:"day"}),i.jsx(na,{}),i.jsx(Xn,{}),i.jsx(ui,{}),i.jsx(Dn,{dataKey:"input",stackId:"tokens",fill:Sr[1],name:"Prompt tokens"}),i.jsx(Dn,{dataKey:"output",stackId:"tokens",fill:Sr[2],name:"Completion tokens"})]})}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Total tokens: ",A.total.toLocaleString()," (input ",A.input.toLocaleString(),", output ",A.output.toLocaleString(),")"]})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Top Models by Tokens",description:"Model AI yang paling banyak menggunakan token, diurutkan berdasarkan total penggunaan. Membantu mengidentifikasi model mana yang paling banyak digunakan"})})}),i.jsx(Qe,{className:"h-64",children:i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:T.map(ee=>({name:ee.model,tokens:ee.tokens})),layout:"vertical",children:[i.jsx(ta,{type:"number"}),i.jsx(na,{type:"category",dataKey:"name",width:160}),i.jsx(Xn,{}),i.jsx(Dn,{dataKey:"tokens",fill:Sr[4],radius:[0,4,4,0],children:i.jsx(Gi,{dataKey:"tokens",position:"right"})})]})})})]})]}),i.jsxs(In,{value:"human-agent",className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Super Agent"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Filter untuk melihat metrik agen yang berada di bawah super agent tertentu. Pilih 'All' untuk melihat semua agen"})})]})]}),i.jsxs(qt,{value:O,onValueChange:ee=>F(ee),children:[i.jsx(Lt,{className:"w-[220px] h-9",children:i.jsx(It,{placeholder:"All"})}),i.jsxs(Ft,{children:[i.jsx(Ge,{value:"all",children:"All"}),B.map(ee=>i.jsx(Ge,{value:String(ee.super_agent_id||"none"),children:ee.super_agent_name||""},ee.super_agent_id||"none"))]})]}),i.jsx(ne,{variant:"outline",className:"h-9",onClick:fe,children:"Apply"})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Agent KPIs",description:"Key Performance Indicators untuk setiap agen manusia: jumlah percakapan yang diselesaikan dan waktu rata-rata penyelesaian (dalam menit)"})})}),i.jsx(Qe,{className:"h-64",children:i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:U.map(ee=>({name:ee.agent_name||"",resolved:ee.resolved_count,avgMin:Math.round(ee.avg_resolution_minutes||0)})),children:[i.jsx(ta,{dataKey:"name"}),i.jsx(na,{}),i.jsx(Xn,{}),i.jsx(ui,{}),i.jsx(Dn,{dataKey:"resolved",name:"Resolved",fill:Sr[3],radius:[4,4,0,0]}),i.jsx(Dn,{dataKey:"avgMin",name:"Avg Resolution (min)",fill:Sr[5],radius:[4,4,0,0]})]})})})]})]}),i.jsxs(In,{value:"database",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Total Database Size",description:"Total ukuran database termasuk semua tabel, indeks, dan metadata dalam format yang mudah dibaca"})})}),i.jsxs(Qe,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:(I==null?void 0:I.total_size_pretty)||"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Data: ",(I==null?void 0:I.data_size_pretty)||""," | Indexes: ",(I==null?void 0:I.indexes_size_pretty)||""]})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Total Tables",description:"Jumlah total tabel yang ada di database public schema"})})}),i.jsx(Qe,{children:i.jsx("div",{className:"text-2xl font-semibold",children:(I==null?void 0:I.total_tables)||0})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Total Rows",description:"Jumlah total baris data di semua tabel database"})})}),i.jsx(Qe,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((I==null?void 0:I.total_rows)||0).toLocaleString()})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Total Indexes",description:"Jumlah total indeks yang ada di database. Indeks membantu mempercepat query"})})}),i.jsx(Qe,{children:i.jsx("div",{className:"text-2xl font-semibold",children:(I==null?void 0:I.total_indexes)||0})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Cache Hit Ratio",description:"Persentase data yang ditemukan di cache memory. Semakin tinggi semakin baik (idealnya >95%). Menunjukkan efisiensi penggunaan memory"})})}),i.jsxs(Qe,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:K?`${(K.cache_hit_ratio*100).toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Hits: ",K?K.shared_buffers_hit.toLocaleString():""," | Reads: ",K?K.shared_buffers_read.toLocaleString():""]})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Index Scan Ratio",description:"Persentase scan yang menggunakan indeks dibanding sequential scan. Semakin tinggi semakin baik. Menunjukkan efektivitas indeks"})})}),i.jsxs(Qe,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:K?`${(K.idx_scan_ratio*100).toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Index: ",K?K.total_index_scans.toLocaleString():""," | Seq: ",K?K.total_sequential_scans.toLocaleString():""]})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Heap Hit Ratio",description:"Persentase hit pada heap (tabel data) di cache memory. Semakin tinggi semakin baik"})})}),i.jsx(Qe,{children:i.jsx("div",{className:"text-2xl font-semibold",children:K?`${(K.heap_hit_ratio*100).toFixed(2)}%`:"Loading..."})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Total Inserts",description:"Jumlah total operasi INSERT yang pernah dilakukan di semua tabel"})})}),i.jsx(Qe,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((ae==null?void 0:ae.total_inserts)||0).toLocaleString()})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Total Updates",description:"Jumlah total operasi UPDATE yang pernah dilakukan di semua tabel"})})}),i.jsx(Qe,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((ae==null?void 0:ae.total_updates)||0).toLocaleString()})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Total Deletes",description:"Jumlah total operasi DELETE yang pernah dilakukan di semua tabel"})})}),i.jsx(Qe,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((ae==null?void 0:ae.total_deletes)||0).toLocaleString()})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Cache Hit %",description:"Persentase blok yang ditemukan di cache vs yang dibaca dari disk. Semakin tinggi semakin baik untuk performa"})})}),i.jsxs(Qe,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:ae?`${ae.cache_hit_percentage.toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Hits: ",ae?ae.total_blocks_hit.toLocaleString():""," | Reads: ",ae?ae.total_blocks_read.toLocaleString():""]})]})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Table Sizes",description:"Ukuran total (termasuk indeks) untuk setiap tabel diurutkan dari yang terbesar. Membantu mengidentifikasi tabel yang memakan banyak ruang"})})}),i.jsx(Qe,{className:"h-64",children:C.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:C.slice(0,10).map(ee=>({name:ee.tablename,size:ee.total_size_bytes/1024})),layout:"vertical",children:[i.jsx(ta,{type:"number"}),i.jsx(na,{type:"category",dataKey:"name",width:160}),i.jsx(Xn,{formatter:ee=>`${ee.toFixed(2)} KB`,labelFormatter:ee=>`Table: ${ee}`}),i.jsx(Dn,{dataKey:"size",fill:Sr[1],radius:[0,4,4,0],children:i.jsx(Gi,{dataKey:"size",position:"right",formatter:ee=>`${ee.toFixed(2)} KB`})})]})})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Row Counts by Table",description:"Jumlah baris data per tabel, diurutkan dari yang terbanyak. Menunjukkan tabel mana yang paling aktif menyimpan data"})})}),i.jsx(Qe,{className:"h-64",children:C.filter(ee=>ee.row_count>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:C.filter(ee=>ee.row_count>0).slice(0,10).map(ee=>({name:ee.tablename,rows:ee.row_count})),layout:"vertical",children:[i.jsx(ta,{type:"number"}),i.jsx(na,{type:"category",dataKey:"name",width:160}),i.jsx(Xn,{}),i.jsx(Dn,{dataKey:"rows",fill:Sr[3],radius:[0,4,4,0],children:i.jsx(Gi,{dataKey:"rows",position:"right"})})]})})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Index Sizes (Top 15)",description:"Ukuran setiap indeks diurutkan dari yang terbesar. Indeks besar mungkin perlu dioptimasi"})})}),i.jsx(Qe,{className:"h-64",children:V.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:V.slice(0,15).map(ee=>({name:`${ee.tablename}.${ee.indexname}`.substring(0,30),size:ee.index_size_bytes/1024,scans:ee.index_scans})),layout:"vertical",children:[i.jsx(ta,{type:"number"}),i.jsx(na,{type:"category",dataKey:"name",width:200}),i.jsx(Xn,{formatter:(ee,We)=>We==="size"?`${ee.toFixed(2)} KB`:ee.toLocaleString(),labelFormatter:ee=>`Index: ${ee}`}),i.jsx(ui,{}),i.jsx(Dn,{dataKey:"size",name:"Size (KB)",fill:Sr[1],radius:[0,4,4,0]})]})})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Table Activity (Top 10)",description:"Jumlah operasi INSERT, UPDATE, dan DELETE per tabel. Menunjukkan tabel mana yang paling aktif"})})}),i.jsx(Qe,{className:"h-64",children:C.filter(ee=>ee.inserts+ee.updates+ee.deletes>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:C.filter(ee=>ee.inserts+ee.updates+ee.deletes>0).slice(0,10).map(ee=>({name:ee.tablename,inserts:ee.inserts,updates:ee.updates,deletes:ee.deletes})),layout:"vertical",children:[i.jsx(ta,{type:"number"}),i.jsx(na,{type:"category",dataKey:"name",width:160}),i.jsx(Xn,{}),i.jsx(ui,{}),i.jsx(Dn,{dataKey:"inserts",stackId:"activity",fill:Sr[2],name:"Inserts"}),i.jsx(Dn,{dataKey:"updates",stackId:"activity",fill:Sr[4],name:"Updates"}),i.jsx(Dn,{dataKey:"deletes",stackId:"activity",fill:Sr[5],name:"Deletes"})]})})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Table Scan Ratios",description:"Rasio sequential scan vs index scan per tabel. Sequential scan tinggi menunjukkan perlu indeks yang lebih baik"})})}),i.jsx(Qe,{className:"h-64",children:C.filter(ee=>ee.sequential_scans+ee.index_scans>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:C.filter(ee=>ee.sequential_scans+ee.index_scans>0).slice(0,10).map(ee=>({name:ee.tablename,seqRatio:Number((ee.table_scan_ratio*100).toFixed(1)),idxRatio:Number(((1-ee.table_scan_ratio)*100).toFixed(1))})),layout:"vertical",children:[i.jsx(ta,{type:"number",domain:[0,100]}),i.jsx(na,{type:"category",dataKey:"name",width:160}),i.jsx(Xn,{formatter:ee=>`${ee}%`}),i.jsx(ui,{}),i.jsx(Dn,{dataKey:"seqRatio",stackId:"scan",fill:Sr[5],name:"Seq Scan %"}),i.jsx(Dn,{dataKey:"idxRatio",stackId:"scan",fill:Sr[3],name:"Index Scan %"})]})})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Comprehensive Table Statistics",description:"Rincian lengkap setiap tabel: ukuran, baris, statistik scan, operasi DML, dan informasi maintenance"})})}),i.jsx(Qe,{children:i.jsx("div",{className:"max-h-96 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2 px-2 sticky left-0 bg-background",children:"Table"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Total Size"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Rows"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Dead Rows"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Inserts"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Updates"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Deletes"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Seq Scans"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Idx Scans"}),i.jsx("th",{className:"text-left py-2 px-2",children:"Last Vacuum"})]})}),i.jsx("tbody",{children:C.slice(0,25).map(ee=>i.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[i.jsx("td",{className:"py-2 px-2 font-medium sticky left-0 bg-background",children:ee.tablename}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.total_size_pretty}),i.jsx("td",{className:"py-2 px-2 text-right",children:ee.row_count.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.dead_rows>0?i.jsx("span",{className:"text-orange-600",children:ee.dead_rows.toLocaleString()}):"0"}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.inserts.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.updates.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.deletes.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.sequential_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.index_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-left text-xs text-muted-foreground",children:ee.last_vacuum?new Date(ee.last_vacuum).toLocaleDateString():ee.last_autovacuum?`Auto: ${new Date(ee.last_autovacuum).toLocaleDateString()}`:"Never"})]},ee.tablename))})]})})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:i.jsx(xn,{label:"Index Statistics",description:"Statistik lengkap setiap indeks: ukuran, jumlah scan, dan performa cache. Membantu mengidentifikasi indeks yang tidak digunakan atau perlu dioptimasi"})})}),i.jsx(Qe,{children:i.jsx("div",{className:"max-h-96 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2 px-2 sticky left-0 bg-background",children:"Table"}),i.jsx("th",{className:"text-left py-2 px-2",children:"Index"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Size"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Scans"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Tuples Read"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Tuples Fetched"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Cache Hits"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Cache Reads"})]})}),i.jsx("tbody",{children:V.slice(0,30).map((ee,We)=>i.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[i.jsx("td",{className:"py-2 px-2 font-medium sticky left-0 bg-background",children:ee.tablename}),i.jsx("td",{className:"py-2 px-2 font-mono text-xs",children:ee.indexname}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.index_size_pretty}),i.jsx("td",{className:"py-2 px-2 text-right",children:ee.index_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.index_tup_reads.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.index_tup_fetches.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.idx_blks_hit.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:ee.idx_blks_read.toLocaleString()})]},We))})]})})})]})]})]}),i.jsx(cn,{open:b,onOpenChange:w,children:i.jsxs(nn,{className:"max-w-3xl",children:[i.jsx(rn,{children:i.jsx(an,{children:"Non-contained Conversations"})}),i.jsx("div",{className:"max-h-80 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2",children:"Time"}),i.jsx("th",{className:"text-left py-2",children:"Contact"}),i.jsx("th",{className:"text-left py-2",children:"Handover Reason"}),i.jsx("th",{className:"text-left py-2",children:"Status"})]})}),i.jsx("tbody",{children:k.map(ee=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-1",children:new Date(ee.created_at).toLocaleString()}),i.jsx("td",{className:"py-1",children:ee.contact_name}),i.jsx("td",{className:"py-1",children:ee.handover_reason||"(none)"}),i.jsx("td",{className:"py-1",children:ee.status})]},ee.id))})]})})]})})]})}var p0="Switch",[bIe,V3e]=wr(p0),[wIe,jIe]=bIe(p0),Aq=p.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=e,[h,m]=p.useState(null),g=St(t,w=>m(w)),v=p.useRef(!1),x=h?f||!!h.closest("form"):!0,[y,b]=Pa({prop:a,defaultProp:s??!1,onChange:u,caller:p0});return i.jsxs(wIe,{scope:n,checked:y,disabled:l,children:[i.jsx(Ye.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":Oq(y),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:g,onClick:Ie(e.onClick,w=>{b(k=>!k),x&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),x&&i.jsx(Tq,{control:h,bubbles:!v.current,name:r,value:c,checked:y,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});Aq.displayName=p0;var Eq="SwitchThumb",Pq=p.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=jIe(Eq,n);return i.jsx(Ye.span,{"data-state":Oq(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});Pq.displayName=Eq;var _Ie="SwitchBubbleInput",Tq=p.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},s)=>{const o=p.useRef(null),l=St(o,s),c=lC(n),u=dN(t);return p.useEffect(()=>{const f=o.current;if(!f)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(c!==n&&m){const g=new Event("click",{bubbles:r});m.call(f,n),f.dispatchEvent(g)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Tq.displayName=_Ie;function Oq(e){return e?"checked":"unchecked"}var Iq=Aq,kIe=Pq;const kl=p.forwardRef(({className:e,...t},n)=>i.jsx(Iq,{className:ke("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:i.jsx(kIe,{className:ke("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));kl.displayName=Iq.displayName;var g0="Collapsible",[SIe,Rq]=wr(g0),[NIe,wA]=SIe(g0),Mq=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:s,onOpenChange:o,...l}=e,[c,u]=Pa({prop:r,defaultProp:a??!1,onChange:o,caller:g0});return i.jsx(NIe,{scope:n,disabled:s,contentId:rr(),open:c,onOpenToggle:p.useCallback(()=>u(f=>!f),[u]),children:i.jsx(Ye.div,{"data-state":SA(c),"data-disabled":s?"":void 0,...l,ref:t})})});Mq.displayName=g0;var Dq="CollapsibleTrigger",jA=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=wA(Dq,n);return i.jsx(Ye.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":SA(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:Ie(e.onClick,a.onOpenToggle)})});jA.displayName=Dq;var _A="CollapsibleContent",kA=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=wA(_A,e.__scopeCollapsible);return i.jsx(mr,{present:n||a.open,children:({present:s})=>i.jsx(CIe,{...r,ref:t,present:s})})});kA.displayName=_A;var CIe=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...s}=e,o=wA(_A,n),[l,c]=p.useState(r),u=p.useRef(null),f=St(t,u),d=p.useRef(0),h=d.current,m=p.useRef(0),g=m.current,v=o.open||l,x=p.useRef(v),y=p.useRef(void 0);return p.useEffect(()=>{const b=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(b)},[]),Gn(()=>{const b=u.current;if(b){y.current=y.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const w=b.getBoundingClientRect();d.current=w.height,m.current=w.width,x.current||(b.style.transitionDuration=y.current.transitionDuration,b.style.animationName=y.current.animationName),c(r)}},[o.open,r]),i.jsx(Ye.div,{"data-state":SA(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...s,ref:f,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:v&&a})});function SA(e){return e?"open":"closed"}var $q=Mq,AIe=jA,EIe=kA;const DR=$q,$R=jA,LR=kA,Lq=e=>{const[t,n]=p.useState(!0),[r,a]=p.useState(!1),[s,o]=p.useState(null),[l,c]=p.useState(null),u=async()=>{try{if(n(!0),c(null),e){const{data:m,error:g}=await ie.from("ai_profiles").select("*").eq("id",e).single();if(g)throw g;m&&o(m)}else o(null)}catch(m){console.error("Error fetching AI profile:",m),c(m instanceof Error?m.message:"Failed to fetch profile")}finally{n(!1)}},f=async m=>{try{if(a(!0),c(null),s!=null&&s.id){const{error:g}=await ie.from("ai_profiles").update(m).eq("id",s.id);try{await $t({action:"ai_profile.update",resource:"ai_profile",resourceId:s.id,context:m})}catch{}if(g)throw g}else{const{data:g,error:v}=await ie.from("ai_profiles").insert([{...m,org_id:"00000000-0000-0000-0000-000000000001"}]).select().single();if(v)throw v;g&&o(g);try{await $t({action:"ai_profile.create",resource:"ai_profile",resourceId:(g==null?void 0:g.id)??null,context:m})}catch{}}await u()}catch(g){console.error("Error saving AI profile:",g),c(g instanceof Error?g.message:"Failed to save profile")}finally{a(!1)}},d=async m=>{try{n(!0),c(null);const{data:g,error:v}=await ie.from("ai_profiles").select("*").eq("org_id",m||"00000000-0000-0000-0000-000000000001").order("created_at",{ascending:!1});if(v)throw v;return g}catch(g){return console.error("Error fetching AI profiles:",g),c(g instanceof Error?g.message:"Failed to fetch profiles"),[]}finally{n(!1)}},h=async m=>{try{a(!0),c(null);const{error:g}=await ie.from("ai_profiles").delete().eq("id",m);try{await $t({action:"ai_profile.delete",resource:"ai_profile",resourceId:m})}catch{}if(g)throw g}catch(g){throw console.error("Error deleting AI profile:",g),c(g instanceof Error?g.message:"Failed to delete profile"),g}finally{a(!1)}};return p.useEffect(()=>{e?u():n(!1)},[e]),{profile:s,loading:t,saving:r,error:l,fetchProfile:u,saveProfile:f,fetchAllProfiles:d,deleteProfile:h}},PIe={Conservative:.3,Balanced:.5,Creative:.7};function Fq(e,t=.5){if(!e)return t;const n=e.trim();return PIe[n]??t}const TIe="00000000-0000-0000-0000-000000000001",OIe=({welcomeMessage:e,systemPrompt:t,modelDisplay:n,profile:r,profileId:a,modelName:s,temperature:o,transfer_conditions:l})=>{const c=r==null?void 0:r.response_temperature,u=c?Fq(c,o||.5):o||.5,[f,d]=p.useState([]);p.useEffect(()=>{d([{id:"1",content:e||"Halo!  Selamat datang di Okbang Top Up Center~",sender:"ai",timestamp:new Date}])},[e]);const[h,m]=p.useState(""),[g,v]=p.useState(!1),[x,y]=p.useState(!0),[b,w]=p.useState(""),k=p.useRef(null),j=p.useRef(null);p.useEffect(()=>{(()=>{const B=Date.now(),E=Math.random().toString(36).substring(2,15),R=`session_${B}_${E}`;w(R),console.log("Generated session ID:",R)})()},[]);const _=()=>{j.current&&(j.current.scrollTop=j.current.scrollHeight)};p.useEffect(()=>{_()},[f]);const S=async()=>{if(!h.trim()||g)return;const D={id:Date.now().toString(),content:h,sender:"user",timestamp:new Date};d(B=>[...B,D]),m(""),v(!0);try{const B={message:h,model:s,temperature:u,session_id:b,timestamp:new Date().toISOString(),ai_profile_id:(r==null?void 0:r.id)||a};console.log("Sending request to API:",B);const E=await ka(Kn.ENDPOINTS.AI_AGENT.CHAT_TEST,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});if(!E.ok)throw new Error(`HTTP error! status: ${E.status}`);const R=await E.json();console.log("API Response:",R);const P={id:(Date.now()+1).toString(),content:R.output||"Sorry, I couldn't process your message.",sender:"ai",timestamp:new Date};d(U=>[...U,P]),Le.success("Message sent successfully!"),y(!0)}catch(B){console.error("Error sending message:",B),Le.error("Failed to send message"),y(!1);const E={id:(Date.now()+1).toString(),content:"Sorry, I'm having trouble connecting right now. Please try again later.",sender:"ai",timestamp:new Date};d(R=>[...R,E])}finally{v(!1)}},T=D=>{D.key==="Enter"&&!D.shiftKey&&(D.preventDefault(),S())},N=()=>{d([{id:"1",content:e||"Halo!  Selamat datang di Okbang Top Up Center~",sender:"ai",timestamp:new Date}]),Le.info("Chat history cleared")},A=()=>{const D=Date.now(),B=Math.random().toString(36).substring(2,15),E=`session_${D}_${B}`;w(E),d([{id:"1",content:e||"Halo!  Selamat datang di Okbang Top Up Center~",sender:"ai",timestamp:new Date}]),Le.success("Session refreshed! New session ID: "+E),console.log("New session ID:",E)};return i.jsxs(Oe,{className:"flex flex-col h-[600px] border-2 border-primary/20",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 border-b bg-primary/5",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:i.jsx(WL,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"font-medium",children:"AI Agent Chat"}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Model: ",n,"  Temp: ",c||"Legacy"," (",u,i.jsx("span",{className:`ml-2 px-1 rounded text-xs ${x?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x?"Connected":"Disconnected"})]}),b&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Session: ",b.substring(0,20),"..."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[g&&i.jsx(zt,{className:"w-4 h-4 animate-spin"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",onClick:A,"aria-label":"Refresh session",children:i.jsx(Oy,{className:"w-4 h-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Segarkan sesi"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",onClick:N,"aria-label":"Clear chat history",children:i.jsx(e4,{className:"w-4 h-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Hapus riwayat chat"})})]})]})]}),i.jsxs("div",{ref:j,className:"flex-1 p-4 space-y-4 overflow-auto max-h-[400px]",children:[f.map(D=>i.jsx("div",{className:`flex ${D.sender==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${D.sender==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:D.content}),i.jsx("p",{className:"text-xs opacity-70 mt-1",children:D.timestamp.toLocaleTimeString()})]})},D.id)),g&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-muted p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{className:"text-sm",children:"AI is typing..."})]})})}),i.jsx("div",{ref:k})]}),i.jsxs("div",{className:"p-4 border-t bg-muted/30",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("textarea",{value:h,onChange:D=>m(D.target.value),onKeyPress:T,placeholder:"Type your message...",className:"flex-1 p-3 border rounded-lg text-sm resize-none focus:ring-2 focus:ring-primary/20",rows:2,disabled:g,title:g?"Please wait":void 0}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{size:"sm",onClick:S,disabled:!h.trim()||g,className:"px-4",children:i.jsx(em,{className:"w-4 h-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Kirim pesan ke agen AI"})})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Press Enter to send, Shift+Enter for new line"})]})]})},bu=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown",zg=e=>e==null?"Pricing on request":`${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e>=1?2:3}).format(e)} / 1M`,IIe=({agentName:e,onBack:t,profileId:n,initialModelId:r})=>{var Ci,Ao,Mr,Ai,Ei;const[a,s]=p.useState("general"),[o,l]=p.useState("text"),[c,u]=p.useState({behavior:!0,welcome:!0,transfer:!1}),f=M=>{u(q=>({...q,[M]:!q[M]}))},d=!n,{hasPermission:h,hasRole:m}=br(),{user:g}=Xr(),v=m==null?void 0:m("master_agent"),x=m==null?void 0:m("super_agent"),y=h("ai_agent_files.manage")||h("ai_agent_files.create"),b=(M,q,re)=>Number.isNaN(M)?q:Math.min(re,Math.max(q,M)),w=24e3,k=2e5,j=40,_=1e3,S=25,T=24*60,{profile:N,loading:A,saving:D,error:B,saveProfile:E}=Lq(n),[R,P]=p.useState((N==null?void 0:N.super_agent_id)??null),[U,L]=p.useState([]),[O,F]=p.useState(!1),[C,z]=p.useState(null);p.useEffect(()=>{N!=null&&N.super_agent_id?P(N.super_agent_id):x&&(g!=null&&g.id)?P(g.id):N!=null&&N.super_agent_id||P(null)},[N==null?void 0:N.super_agent_id,x,g==null?void 0:g.id]),p.useEffect(()=>{if(d&&!R)try{const M=localStorage.getItem("ai.new.super_agent_id");M&&(P(M),localStorage.removeItem("ai.new.super_agent_id"))}catch{}},[d,R]),p.useEffect(()=>{let M=!1;return(async()=>{try{F(!0),z(null);const{data:re,error:ce}=await ds.from("v_human_agents").select("user_id, agent_name, email, role_name").eq("org_id",(N==null?void 0:N.org_id)??TIe).ilike("role_name","%super%");if(ce)throw ce;if(M)return;const de=(re||[]).map(be=>({id:be.user_id,name:be.agent_name||be.email||String(be.user_id).slice(0,8)}));L(de),N!=null&&N.super_agent_id||(x&&(g!=null&&g.id)?P(g.id):de.length===1&&!x&&v&&P(de[0].id))}catch(re){M||z(re instanceof Error?re.message:"Failed to load super agents")}finally{M||F(!1)}})(),()=>{M=!0}},[N==null?void 0:N.org_id,N==null?void 0:N.super_agent_id,x,v,g==null?void 0:g.id]);const[I,$]=p.useState(d?"You are a helpful AI assistant for customer service. Be friendly, professional, and helpful. Always respond in Indonesian unless the customer speaks in another language.":(N==null?void 0:N.system_prompt)||""),[K,X]=p.useState(d?"Halo!  Selamat datang! Ada yang bisa saya bantu hari ini?":(N==null?void 0:N.welcome_message)||""),[V,W]=p.useState(d?`Transfer to human agent when:
- Customer requests to speak with a human
- Complex technical issues arise
- Customer is dissatisfied or angry
- Payment or billing issues
- Escalation is needed`:(N==null?void 0:N.transfer_conditions)||""),[ae,G]=p.useState((N==null?void 0:N.stop_ai_after_handoff)??!0),[le,se]=p.useState([]),[Q,_e]=p.useState([]),[xe,J]=p.useState(""),[fe,Ce]=p.useState("");p.useState(()=>{const M=(N==null?void 0:N.temperature)??.3;return Math.max(0,Math.min(1,M))});const[Te,Ee]=p.useState(""),[ze,gt]=p.useState(!!((N==null?void 0:N.enable_resolve)??!1)),[ut,ee]=p.useState(""),[We,st]=p.useState(()=>b((N==null?void 0:N.read_file_limit)??3,0,S)),[oe,ve]=p.useState((N==null?void 0:N.response_temperature)??"Balanced"),[De,Me]=p.useState((N==null?void 0:N.message_await)??3),[Z,Be]=p.useState(""),xt=M=>M.replace(/[^0-9]/g,""),yt=M=>{if(!M)return 0;const q=parseInt(M,10);return Number.isNaN(q)?0:q};p.useEffect(()=>{(async()=>{var q,re;try{const{data:ce,error:de}=await ds.from("ai_models").select("*").eq("is_active",!0).order("display_name",{ascending:!0});if(de)throw de;const be=ce||[],Ve=be.filter(ct=>(ct.display_name||"").toLowerCase()!=="fallback"),ot=be.filter(ct=>(ct.display_name||"").toLowerCase()==="fallback");se(Ve),_e(ot);const ft=(N==null?void 0:N.model_id)||r||"";xe||(ft&&Ve.some(ct=>ct.id===ft)?J(ft):Ve.length>0&&J(((q=Ve[0])==null?void 0:q.id)||"")),!fe&&ot.length>0&&Ce(((re=ot[0])==null?void 0:re.id)||"")}catch(ce){console.error("Failed to load ai_models",ce)}})()},[N==null?void 0:N.id,r]),p.useEffect(()=>{!xe&&(N!=null&&N.model_id)&&le.some(M=>M.id===N.model_id)&&J(N.model_id)},[le,N==null?void 0:N.model_id]),p.useEffect(()=>{if(!N)return;const M=N==null?void 0:N.auto_resolve_after_minutes;Ee(typeof M=="number"&&!Number.isNaN(M)?M.toString():"0");const q=b((N==null?void 0:N.history_limit)??w,0,k);ee(q.toString());const re=b((N==null?void 0:N.message_limit)??_,0,_);Be(re.toString())},[N==null?void 0:N.id]);const He=le.find(M=>M.id===xe)||null,lt=p.useMemo(()=>{const M=He==null?void 0:He.max_context_tokens;return typeof M=="number"&&M>0?b(M,0,k):k},[He==null?void 0:He.max_context_tokens]);p.useEffect(()=>{if(!ut)return;const M=parseInt(ut,10);Number.isNaN(M)||M>lt&&ee(lt.toString())},[ut,lt]);const mt=M=>{const q=xt(M);if(q===""){Ee("");return}const re=b(parseInt(q,10),0,T);Ee(re.toString())},en=M=>{const q=xt(M);if(q===""){ee("");return}const re=b(parseInt(q,10),0,lt);ee(re.toString())},ue=M=>{const q=xt(M);if(q===""){Be("");return}const re=b(parseInt(q,10),0,_);Be(re.toString())},[Pe,H]=p.useState([]),we=p.useRef(null),[ge,Ue]=p.useState(!1),tt=async()=>{const M=(N==null?void 0:N.id)??n;if(!M)throw new Error("Please save the AI Agent first before uploading files.");let q=(N==null?void 0:N.org_id)??null;if(!q){const{data:{user:re}}=await ds.auth.getUser();if(re){const{data:ce}=await ds.from("org_members").select("org_id").eq("user_id",re.id).limit(1).maybeSingle();q=(ce==null?void 0:ce.org_id)??null}}if(!q)throw new Error("Could not determine your organization. Please re-login or contact support.");return{orgId:q,profileId:M}},te=async(M,q)=>{try{if(!y)throw new Error("You do not have permission to upload agent files.");const re=((M==null?void 0:M.type)||"").toLowerCase()==="application/pdf",ce=((M==null?void 0:M.name)||"").toLowerCase().endsWith(".pdf");if(!re&&!ce)throw new Error("Only PDF files are supported");const{orgId:de,profileId:be}=await tt(),Ve=await M.arrayBuffer(),ot=await crypto.subtle.digest("SHA-256",Ve),ct=Array.from(new Uint8Array(ot)).map(Pi=>Pi.toString(16).padStart(2,"0")).join(""),tn=((M==null?void 0:M.name)||"file.pdf").replace(/[^a-zA-Z0-9_.-]/g,"").replace(/\.pdf$/i,""),ht=`${ct}_${tn}.pdf`,Bn=`org_${de}/profile_${be}/${ht}`,En=new FormData;En.append("file",M),En.append("file_name",M.name||"file.pdf"),En.append("org_id",de),En.append("profile_id",be),En.append("hashFile",ct);const Dr=await ka(Kn.ENDPOINTS.KNOWLEDGE.FILE_UPLOAD,{method:"POST",body:En});if(!Dr.ok){let Pi=`Upload failed (${Dr.status})`;try{const Ti=await Dr.json();Pi=(Ti==null?void 0:Ti.message)||Pi}catch{}throw new Error(Pi)}const $r=await Dr.json().catch(()=>({})),ha=($r==null?void 0:$r.document_id)||($r==null?void 0:$r.documentId)||void 0,Pn=String(($r==null?void 0:$r.status)||"").toLowerCase();if(Pn==="duplicate"){const Pi=new Error("duplicate");throw Pi.code="DUPLICATE_CONTENT",Pi}if(Pn!=="success")throw new Error(`Upload webhook returned unexpected status: ${Pn||"unknown"}`);let Yn=null;const{error:jt}=await ds.storage.from("ai-agent-files").upload(Bn,M,{cacheControl:"31536000",contentType:"application/pdf",upsert:!1});if(jt&&!(typeof(jt==null?void 0:jt.message)=="string"&&/exists|duplicate|409/i.test(jt.message)))throw jt;const{data:Tn,error:pt}=await ds.storage.from("ai-agent-files").createSignedUrl(Bn,60*60*24*7);return!pt&&(Tn!=null&&Tn.signedUrl)&&(Yn=Tn.signedUrl),{url:Yn||"",filePath:Bn,documentId:ha}}catch(re){throw console.error("Error uploading file to Supabase:",re),new Error(`Failed to upload ${M.name}: ${(re==null?void 0:re.message)||"Unknown error"}`)}},ye=async()=>{try{Ue(!0);const{orgId:M,profileId:q}=await tt(),re=`org_${M}/profile_${q}`,ce=`profile_${q}`,de=async ct=>{const{data:at,error:tn}=await ds.storage.from("ai-agent-files").list(ct,{limit:100});return tn?[]:(at||[]).map(ht=>({...ht,__prefix:ct}))},[be,Ve]=await Promise.all([de(re),de(ce)]),ot=[...be,...Ve];if(ot.length===0){H([]);return}const ft=[];for(const ct of ot){if(!ct||!ct.name)continue;const at=String(ct.name);if(at.endsWith("/")||at===".emptyFolderPlaceholder"||at===".emptyfolderplaceholder")continue;const tn=`${ct.__prefix}/${ct.name}`,ht=ct.metadata&&typeof ct.metadata.size<"u"?ct.metadata.size:0,Bn=typeof ht=="number"?ht:Number(ht||0);let En="";const{data:Dr}=await ds.storage.from("ai-agent-files").createSignedUrl(tn,60*60*24*7);En=(Dr==null?void 0:Dr.signedUrl)||"",ft.push({id:Date.now()+Math.random(),name:ct.name,size:Bn,uploadedAt:ct.updated_at||ct.created_at||new Date().toISOString(),status:"ready",url:En,filePath:tn})}ft.sort((ct,at)=>new Date(at.uploadedAt).getTime()-new Date(ct.uploadedAt).getTime()),H(ft)}catch(M){console.error("Failed to load knowledge files:",M)}finally{Ue(!1)}};p.useEffect(()=>{o==="file"&&ye()},[o,N==null?void 0:N.id,n]);const Se=async M=>{const q=Array.from(M.target.files||[]);if(q.length===0)return;try{await tt()}catch(de){Le.error((de==null?void 0:de.message)||"Unable to upload at this time"),we.current&&(we.current.value="");return}const re=new Date().toISOString(),ce=q.map(de=>({id:Date.now()+Math.random(),name:de.name,size:de.size,uploadedAt:re,status:"uploading"}));H(de=>[...ce,...de]);for(let de=0;de<q.length;de++){const be=q[de],Ve=ce[de];try{const{url:ot,filePath:ft}=await te(be,Ve.id);H(ct=>ct.map(at=>at.id===Ve.id?{...at,status:"ready",url:ot,filePath:ft}:at)),Le.success(`${be.name} uploaded successfully!`)}catch(ot){if(String((ot==null?void 0:ot.message)||"").toLowerCase().includes("duplicate")||(ot==null?void 0:ot.code)==="DUPLICATE_CONTENT"){H(ft=>ft.map(ct=>ct.id===Ve.id?{...ct,status:"ready"}:ct)),setTimeout(()=>{var ft,ct;(ct=(ft=ye())==null?void 0:ft.catch)==null||ct.call(ft,()=>{})},0),Le.info(`${be.name} already exists. Skipped re-upload.`);continue}H(ft=>ft.map(ct=>ct.id===Ve.id?{...ct,status:"failed"}:ct)),Le.error(ot.message||`Failed to upload ${be.name}`)}}we.current&&(we.current.value="")},Ae=async M=>{M.preventDefault();const q=Array.from(M.dataTransfer.files||[]);if(q.length===0)return;try{await tt()}catch(de){Le.error((de==null?void 0:de.message)||"Unable to upload at this time");return}const re=new Date().toISOString(),ce=q.map(de=>({id:Date.now()+Math.random(),name:de.name,size:de.size,uploadedAt:re,status:"uploading"}));H(de=>[...ce,...de]);for(let de=0;de<q.length;de++){const be=q[de],Ve=ce[de];try{const{url:ot,filePath:ft}=await te(be,Ve.id);H(ct=>ct.map(at=>at.id===Ve.id?{...at,status:"ready",url:ot,filePath:ft}:at)),Le.success(`${be.name} uploaded successfully!`)}catch(ot){H(ft=>ft.map(ct=>ct.id===Ve.id?{...ct,status:"failed"}:ct)),Le.error(ot.message||`Failed to upload ${be.name}`)}}},dt=M=>{M.preventDefault()},At=async M=>{const q=Pe.find(re=>re.id===M);try{const{orgId:re,profileId:ce}=await tt();if(q!=null&&q.filePath){const de=await ka(Kn.ENDPOINTS.KNOWLEDGE.FILE_DELETE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({org_id:re,profile_id:ce,file_key:q.filePath,document_id:(q==null?void 0:q.documentId)||void 0})});if(!de.ok){let ot=`Delete failed (${de.status})`;try{const ft=await de.json();ot=(ft==null?void 0:ft.message)||ot}catch{}throw new Error(ot)}let be={};try{be=await de.json()}catch{}if(String((be==null?void 0:be.status)||"").toLowerCase()!=="deleted")throw new Error((be==null?void 0:be.message)||"Delete not confirmed by webhook")}H(de=>de.filter(be=>be.id!==M)),Le.info(`${(q==null?void 0:q.name)||"File"} removed`)}catch(re){console.error("Error deleting file via webhook:",re),Le.error((re==null?void 0:re.message)||"Failed to delete file")}},dn=async M=>{try{const q=M.filePath;if(!q)throw new Error("Missing file path");const{data:re,error:ce}=await ds.storage.from("ai-agent-files").createSignedUrl(q,60*60,{download:M.name||"file.pdf"});if(ce)throw ce;const de=(re==null?void 0:re.signedUrl)||M.url||"";if(!de)throw new Error("Unable to generate download link");const be=document.createElement("a");be.href=de,be.download=M.name||"",be.target="_blank",be.rel="noopener",document.body.appendChild(be),be.click(),be.remove()}catch(q){Le.error((q==null?void 0:q.message)||"Failed to download file")}},Jt=async()=>{const M=Pe.filter(q=>q.filePath);if(M.length>0)try{const{orgId:q,profileId:re}=await tt();await Promise.all(M.map(async ce=>{try{const de=await ka(Kn.ENDPOINTS.KNOWLEDGE.FILE_DELETE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({org_id:q,profile_id:re,file_key:ce.filePath,document_id:(ce==null?void 0:ce.documentId)||void 0})});if(de.ok){let be={};try{be=await de.json()}catch{}const Ve=String((be==null?void 0:be.status)||"").toLowerCase();Ve!=="deleted"&&console.warn("Delete webhook did not confirm deletion for",ce.filePath,Ve)}else{let be=`Delete failed (${de.status})`;try{const Ve=await de.json();be=(Ve==null?void 0:Ve.message)||be}catch{}console.warn("Delete webhook failed for",ce.filePath,be)}}catch(de){console.warn("Delete webhook error for",ce.filePath,de)}}))}catch(q){console.error("Error clearing files via webhook:",q)}H([]),Le.info("All files cleared")},[Ht,Rt]=p.useState([{id:Date.now(),question:"",answer:""}]),[it,fa]=p.useState([{id:Date.now(),question:"",answer:""}]),Ir=()=>{const M={id:Date.now()+Math.random(),question:"",answer:""};Rt(q=>[M,...q]),fa(q=>[JSON.parse(JSON.stringify(M)),...q])},_r=M=>{Rt(q=>q.filter(re=>re.id!==M)),fa(q=>q.filter(re=>re.id!==M))},Ra=(M,q,re)=>{Rt(ce=>ce.map(de=>de.id===M?{...de,[q]:re}:de))},Rr=M=>{const q=it.find(de=>de.id===M.id),re=(M.question||"").trim(),ce=(M.answer||"").trim();return q?re!==(q.question||"").trim()||ce!==(q.answer||"").trim():re!==""||ce!==""},[sr,kr]=p.useState([{id:1,prompt:"Hai! Ada yang bisa saya bantu lagi?",delay:60,expanded:!1},{id:2,prompt:"Jika ada pertanyaan lain, jangan ragu untuk bertanya!",delay:120,expanded:!1}]),zl=()=>{const M={id:Date.now(),prompt:"",delay:60,expanded:!1};kr([...sr,M])},Za=M=>{kr(sr.filter(q=>q.id!==M))},Ni=(M,q,re)=>{kr(sr.map(ce=>ce.id===M?{...ce,[q]:re}:ce))},ls=M=>{kr(sr.map(q=>q.id===M?{...q,expanded:!q.expanded}:q))};p.useEffect(()=>{if(N&&!d){$(N.system_prompt||""),X(N.welcome_message||""),W(N.transfer_conditions||""),G(N.stop_ai_after_handoff),Ee(String((N==null?void 0:N.auto_resolve_after_minutes)??0)),gt(!!((N==null?void 0:N.enable_resolve)??!1)),ee(String(b((N==null?void 0:N.history_limit)??w,0,k))),st(b((N==null?void 0:N.read_file_limit)??3,0,S)),ve((N==null?void 0:N.response_temperature)??"Balanced"),Me((N==null?void 0:N.message_await)??3),Be(String(b((N==null?void 0:N.message_limit)??_,0,_)));const M=N==null?void 0:N.qna;if(M&&Array.isArray(M)){const q=M.map((re,ce)=>({id:Date.now()+ce,question:re.q??re.question??"",answer:re.a??re.answer??""}));Rt(q),fa(JSON.parse(JSON.stringify(q)))}}},[N,d]),p.useEffect(()=>{d&&fa(JSON.parse(JSON.stringify(Ht)))},[]);const cs=async()=>{if(!R){Le.error("Please assign a super agent before saving this AI agent.");return}const M=b(yt(Te),0,T),q=b(yt(ut),0,lt),re=b(yt(Z),0,_),ce=(()=>{const Ve=He==null?void 0:He.max_context_tokens;return typeof Ve=="number"&&Ve>0?Math.max(1,Math.floor(Ve/1e3)):j})(),de=b(b((N==null?void 0:N.context_limit)??28,0,j),0,ce),be={system_prompt:I,welcome_message:K,transfer_conditions:V,stop_ai_after_handoff:ae,model_id:xe||null,name:e,auto_resolve_after_minutes:M,enable_resolve:ze,history_limit:q,read_file_limit:We,context_limit:de,response_temperature:oe,message_await:De,message_limit:re,super_agent_id:R,qna:Ht.filter(Ve=>{var ot,ft;return((ot=Ve.question)==null?void 0:ot.trim())||((ft=Ve.answer)==null?void 0:ft.trim())}).map(({question:Ve,answer:ot})=>({q:Ve.trim(),a:ot.trim()}))};try{await E(be),Le.success(d?"AI agent created successfully!":"AI agent settings saved successfully!")}catch{Le.error(d?"Failed to create AI agent":"Failed to save AI agent settings")}};return A&&!d?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(zt,{className:"w-8 h-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading AI profile..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs(ne,{variant:"ghost",size:"sm",onClick:t,className:"gap-2",children:[i.jsx(dp,{className:"w-4 h-4"}),"Back"]})}),i.jsx(he,{children:i.jsx("p",{children:"Kembali ke daftar agen AI"})})]}),i.jsx("h1",{className:"text-2xl font-bold",children:e}),d?i.jsx(vt,{variant:"outline",className:"text-blue-600 border-blue-600",children:"New Agent"}):N&&i.jsxs(vt,{variant:"secondary",children:["Last Updated: ",new Date(N.created_at).toLocaleDateString()]})]}),B&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",B]})}),i.jsxs(bl,{value:a,onValueChange:s,children:[i.jsxs(vo,{className:"grid w-full grid-cols-2 bg-muted/60 p-1 rounded-lg",children:[i.jsx(Vn,{value:"general",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:bg-muted/40 transition-colors",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(ro,{className:"w-4 h-4"}),i.jsx("span",{children:"General"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Konfigurasi pengaturan umum agen AI"})})]})}),i.jsx(Vn,{value:"knowledge",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:bg-muted/40 transition-colors",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(dv,{className:"w-4 h-4"}),i.jsx("span",{children:"Knowledge Sources"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Kelola sumber pengetahuan dan pasangan T&J"})})]})})]}),i.jsx(In,{value:"general",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-6",children:[i.jsxs("div",{className:"xl:col-span-3 space-y-4",children:[i.jsxs(Oe,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center text-lg font-semibold",children:e.charAt(0)}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:e}),i.jsx("p",{className:"text-muted-foreground",children:d?"New AI Agent - Configure your settings below":(N==null?void 0:N.description)||"AI Agent"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:d?"Not saved yet":`Last Updated: ${N?new Date(N.created_at).toLocaleString():"Never"}`})]})]}),i.jsxs("div",{className:"space-y-2 pt-4",children:[i.jsx("span",{className:"text-sm font-medium",children:"Assigned Super Agent"}),O?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading super agents..."}):C?i.jsx("div",{className:"text-sm text-destructive",children:C}):x&&(g!=null&&g.id)?i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-md bg-muted px-3 py-2 text-sm",children:[i.jsxs("span",{children:[" ",((Ci=U.find(M=>M.id===g.id))==null?void 0:Ci.name)||g.email||"You"]}),i.jsx(vt,{variant:"secondary",children:"Your account"})]}):U.length===0?i.jsx("div",{className:"rounded-md border border-dashed border-muted-foreground/40 bg-muted/30 px-3 py-2 text-sm text-muted-foreground",children:"No super agents available. Create a super agent first before assigning this AI agent."}):i.jsxs(qt,{value:R||"",onValueChange:M=>P(M),disabled:!v,children:[i.jsx(Lt,{className:"w-full",children:i.jsx(It,{placeholder:"Choose a super agent"})}),i.jsx(Ft,{className:"bg-background border z-50",children:U.map(M=>i.jsxs(Ge,{value:M.id,children:[" ",M.name]},M.id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Only the assigned super agent and their human agents can view and use this AI agent."})]})]}),i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"AI Model"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Pilih model AI yang menentukan kecepatan dan kualitas respons."})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the balance between speed and intelligence for this agent."})]}),He&&i.jsx(vt,{variant:"secondary",className:"whitespace-nowrap",children:bu(He==null?void 0:He.provider)})]}),i.jsxs(qt,{value:xe,onValueChange:J,disabled:le.length===0,children:[i.jsx(Lt,{className:"w-full py-3",children:He?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[(He==null?void 0:He.display_name)||"Custom","  ",zg(He==null?void 0:He.cost_per_1m_tokens),"  ",bu(He==null?void 0:He.provider)]})}):i.jsx(It,{placeholder:"Select an AI model"})}),i.jsx(Ft,{className:"bg-background border z-50",children:le.map(M=>i.jsx(Ge,{value:M.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("span",{className:"font-semibold leading-tight",children:[(M==null?void 0:M.display_name)||"Custom","  ",zg(M==null?void 0:M.cost_per_1m_tokens)]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:(M==null?void 0:M.description)||"No description available"}),i.jsxs("span",{className:"text-[11px] text-muted-foreground font-mono",children:[M==null?void 0:M.model_name,"  ",bu(M==null?void 0:M.provider)]})]})},M.id))})]}),le.length===0&&i.jsx("p",{className:"text-xs text-destructive mt-2",children:"No AI models available. Please contact your administrator."})]}),Q.length>0&&i.jsxs("div",{className:"border-t pt-6",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Fallback Model"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Model yang digunakan secara otomatis jika model utama tidak tersedia."})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatic backup model used when primary model is unavailable."})]}),Q.find(M=>M.id===fe)&&i.jsx(vt,{variant:"secondary",className:"whitespace-nowrap",children:bu((Ao=Q.find(M=>M.id===fe))==null?void 0:Ao.provider)})]}),i.jsxs(qt,{value:fe,onValueChange:Ce,disabled:Q.length===0,children:[i.jsx(Lt,{className:"w-full py-3",children:Q.find(M=>M.id===fe)?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[((Mr=Q.find(M=>M.id===fe))==null?void 0:Mr.display_name)||"Custom","  ",zg((Ai=Q.find(M=>M.id===fe))==null?void 0:Ai.cost_per_1m_tokens),"  ",bu((Ei=Q.find(M=>M.id===fe))==null?void 0:Ei.provider)]})}):i.jsx(It,{placeholder:"Select a fallback model"})}),i.jsx(Ft,{className:"bg-background border z-50",children:Q.map(M=>i.jsx(Ge,{value:M.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("span",{className:"font-semibold leading-tight",children:[(M==null?void 0:M.display_name)||"Custom","  ",zg(M==null?void 0:M.cost_per_1m_tokens)]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:(M==null?void 0:M.description)||"No description available"}),i.jsxs("span",{className:"text-[11px] text-muted-foreground font-mono",children:[M==null?void 0:M.model_name,"  ",bu(M==null?void 0:M.provider)]})]})},M.id))})]})]})]})}),i.jsxs(Oe,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("behavior"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"AI Agent Behavior"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Konfigurasi kepribadian dan perilaku agen AI untuk menentukan cara berinteraksi dengan pelanggan"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure AI personality and behavior"})]}),i.jsx(wa,{className:`w-5 h-5 transition-transform ${c.behavior?"rotate-180":""}`})]}),c.behavior&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx(Ua,{className:"min-h-[120px]",value:I,onChange:M=>$(M.target.value),placeholder:d?"Define your AI's personality, behavior, and capabilities here...":"Enter system prompt..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[I.length,"/15000"]})]})]}),i.jsxs(Oe,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("welcome"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Welcome Message"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Pesan selamat datang yang dikirim otomatis kepada pelanggan saat memulai percakapan"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"First message sent to users"})]}),i.jsx(wa,{className:`w-5 h-5 transition-transform ${c.welcome?"rotate-180":""}`})]}),c.welcome&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx(Ua,{className:"min-h-[80px]",value:K,onChange:M=>X(M.target.value),placeholder:d?"This is the first message your AI will send to customers...":"Enter welcome message..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[K.length,"/5000"]})]})]}),i.jsxs(Oe,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("transfer"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Agent Transfer Conditions"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Kondisi yang menentukan kapan percakapan dialihkan dari agen AI ke agen manusia"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"When to transfer to human agents"})]}),i.jsx(wa,{className:`w-5 h-5 transition-transform ${c.transfer?"rotate-180":""}`})]}),c.transfer&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx(Ua,{className:"min-h-[80px]",value:V,onChange:M=>W(M.target.value),placeholder:d?"Define when your AI should transfer the conversation to a human agent...":"Enter transfer conditions..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[V.length,"/750"]})]})]}),i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Stop AI after Handoff"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Menghentikan agen AI mengirim pesan setelah percakapan dialihkan ke agen manusia"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Stop AI from sending messages after handoff"})]}),i.jsx(kl,{checked:ae,onCheckedChange:G})]})}),i.jsx(Oe,{className:"p-6",children:i.jsxs(DR,{defaultOpen:!1,children:[i.jsxs($R,{className:"flex w-full items-center justify-between py-1 font-medium [&[data-state=open]>svg]:rotate-180",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Additional Settings"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Pengaturan tambahan untuk konfigurasi lanjutan agen AI seperti batas riwayat, konteks, dan resolusi otomatis"})})]})]}),i.jsx(wa,{className:"w-5 h-5 transition-transform"})]}),i.jsx(LR,{className:"mt-4 data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Enable auto-resolve"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Mengaktifkan resolusi otomatis percakapan setelah waktu tertentu tanpa respons pelanggan"})})]})]}),i.jsx("div",{className:"mt-2",children:i.jsx(kl,{checked:ze,onCheckedChange:gt})})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Auto-resolve timeout (minutes)"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Waktu dalam menit sebelum percakapan secara otomatis diselesaikan (0 = nonaktif)"})})]})]}),i.jsx(Je,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 30",value:Te,onChange:M=>mt(M.target.value),disabled:!ze,className:`mt-1 ${ze?"":"opacity-60 cursor-not-allowed bg-muted/50"}`}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:ze?"Set 0 to disable auto-resolve.":"Enable Auto-resolve to edit this value."})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Conversation History (tokens)"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Batas maksimal riwayat percakapan yang dapat diingat AI (dalam token)"})})]})]}),i.jsx(Je,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:`Max ${lt.toLocaleString()}`,value:ut,onChange:M=>en(M.target.value),className:"mt-1"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:He!=null&&He.display_name?`${He.display_name} supports up to ${lt.toLocaleString()} tokens.`:`Supports up to ${lt.toLocaleString()} tokens.`})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creativity Preset"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Preset kreativitas AI: Conservative (akurat), Balanced (seimbang), Creative (kreatif)"})})]})]}),i.jsxs("select",{value:oe,onChange:M=>ve(M.target.value),className:"w-full p-2 border rounded-lg mt-1",children:[i.jsx("option",{value:"Conservative",children:"Conservative"}),i.jsx("option",{value:"Balanced",children:"Balanced"}),i.jsx("option",{value:"Creative",children:"Creative"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"AI Message Cap"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Batas maksimal jumlah pesan yang dapat dikirim AI dalam satu percakapan"})})]})]}),i.jsx(Je,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 1000",value:Z,onChange:M=>ue(M.target.value),className:"mt-1"})]})]})})]})}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{className:"w-full",onClick:cs,disabled:D,children:D?i.jsxs(i.Fragment,{children:[i.jsx(zt,{className:"w-4 h-4 mr-2 animate-spin"}),d?"Creating...":"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ro,{className:"w-4 h-4 mr-2"}),d?"Create AI Agent":"Save AI Settings"]})})}),i.jsx(he,{children:i.jsx("p",{children:d?"Buat agen AI baru dengan pengaturan ini":"Simpan semua pengaturan saat ini"})})]})]}),i.jsx("div",{className:"xl:col-span-2",children:i.jsx(OIe,{welcomeMessage:K,systemPrompt:I,modelDisplay:(He==null?void 0:He.display_name)||(He==null?void 0:He.model_name)||"Not selected",profile:N,profileId:n,modelName:(He==null?void 0:He.model_name)||"",temperature:Fq(oe),transfer_conditions:V})})]})}),i.jsx(In,{value:"knowledge",className:"space-y-6",children:i.jsx(Oe,{className:"p-6",children:i.jsxs(bl,{value:o,onValueChange:l,className:"w-full",children:[i.jsxs(vo,{className:"grid w-full grid-cols-3 mb-6",children:[i.jsxs(Vn,{value:"text",className:"gap-2",children:[i.jsx(nK,{className:"w-4 h-4"}),"Text"]}),i.jsxs(Vn,{value:"file",className:"gap-2",children:[i.jsx(rw,{className:"w-4 h-4"}),"File"]}),i.jsxs(Vn,{value:"qa",className:"gap-2",children:[i.jsx(Fe,{className:"w-4 h-4"}),"Q&A"]})]}),i.jsxs(In,{value:"text",className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs(ne,{size:"sm",className:"gap-2",children:[i.jsx(iK,{className:"w-4 h-4"}),"Add"]})}),i.jsx(he,{children:i.jsx("p",{children:"Tambah item pengetahuan baru"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"outline",size:"sm",children:"Default"})}),i.jsx(he,{children:i.jsx("p",{children:"Gunakan item pengetahuan default"})})]})]}),i.jsxs("div",{className:"flex items-center gap-1 p-2 border rounded-md bg-muted/30",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(lK,{className:"w-4 h-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Batal"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(oK,{className:"w-4 h-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Ulang"})})]}),i.jsx("div",{className:"w-px h-6 bg-border mx-1"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(XV,{className:"w-4 h-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Tebal"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(rK,{className:"w-4 h-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Miring"})})]}),i.jsx("div",{className:"w-px h-6 bg-border mx-1"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(GV,{className:"w-4 h-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Rata Kiri"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(VV,{className:"w-4 h-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Rata Tengah"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(YV,{className:"w-4 h-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Rata Kanan"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(KV,{className:"w-4 h-4"})})}),i.jsx(he,{children:i.jsx("p",{children:"Rata Kiri-Kanan"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Panduan Umum: Deposit, Withdraw & Tambah Rekening"})]}),i.jsx("div",{className:"pl-6 space-y-2 text-sm",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-orange-500",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Cara Isi Saldo / Deposit"}),i.jsx("p",{className:"text-muted-foreground",children:"Lakukan transfer ke rekening tujuan yang tertera di menu DEPOSIT > REKENING TUJUAN."}),i.jsx("p",{className:"text-muted-foreground",children:"Gunakan metode ATM atau M-Banking (tidak tersedia autodebet)."}),i.jsx("p",{className:"text-muted-foreground",children:"Setelah transfer, wajib upload bukti transfer agar diproses lebih cepat."})]})]})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Khusus Bank BCA"})]}),i.jsxs("div",{className:"pl-6 text-sm text-muted-foreground",children:[i.jsx("p",{children:"Wajib menggunakan rekening BCA atas nama yang terdaftar di website."}),i.jsx("p",{children:"Tidak bisa menggunakan rekening BCA milik orang lain."})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Tambah Rekening / E-Wallet"})]}),i.jsxs("div",{className:"pl-6 text-sm text-muted-foreground",children:[i.jsx("p",{children:"Bisa menambahkan rekening atau e-wallet selama nama pemiliknya sama dengan yang sudah terdaftar."}),i.jsx("p",{children:"Akses dari halaman utama > klik menu REKENING > TAMBAH REKENING."})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("p",{children:"Minimal deposit Via Bank BCA, MANDIRI, BRI, BNI, CIMB, OCBC, BANK JAGO, & Dan Semua Jenis E-wallet adalah 5.000"}),i.jsx("p",{children:"Minimal deposit QRIS = 10.000"}),i.jsx("p",{children:"Minimal withdraw Bank & E-wallet = 50.000"}),i.jsx("p",{children:"Jika menggunakan pulsa, akan dikenakan potongan 20%"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Lupa User ID atau Password?"})]}),i.jsxs("div",{className:"pl-6 text-sm text-muted-foreground",children:[i.jsx("p",{children:"Format reset:"}),i.jsx("p",{children:"Nama Rekening :"}),i.jsx("p",{children:"Nomor Rekening :"}),i.jsx("p",{children:"Bank / E-wallet :"})]})]})]}),i.jsx("div",{className:"text-right text-xs text-muted-foreground",children:"10931 Characters"})]}),i.jsxs(In,{value:"website",className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Provide Link"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Provide a link to the page you want the AI to learn from."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ne,{variant:"default",size:"sm",className:"bg-muted text-foreground hover:bg-muted/80",children:"Batch Link"}),i.jsx(ne,{variant:"outline",size:"sm",children:"Single Link"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Web Link Collector"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Je,{placeholder:"Link URL",className:"flex-1"}),i.jsx(ne,{className:"bg-blue-600 hover:bg-blue-700",children:"Collect Link"})]}),i.jsxs("div",{className:"flex items-start gap-2 text-sm text-blue-600",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-600 flex items-center justify-center mt-0.5",children:i.jsx("span",{className:"text-white text-xs",children:"!"})}),i.jsxs("p",{children:["Start with URL and this tool will gather up to ",i.jsx("strong",{children:"30 unique"})," links from the site, excluding any files"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Trained Link"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"select-all",className:"rounded"}),i.jsx("label",{htmlFor:"select-all",className:"text-sm text-blue-600 cursor-pointer",children:"Select"})]}),i.jsx(Je,{placeholder:"Search Links",className:"flex-1"})]})]})]}),i.jsxs(In,{value:"file",className:"space-y-6",children:[i.jsxs("div",{onDrop:y?Ae:void 0,onDragOver:y?dt:void 0,className:`border border-dashed rounded-lg p-6 text-center ${y?"bg-muted/30":"bg-muted/50 opacity-70"}`,children:[i.jsx("input",{ref:we,type:"file",multiple:!0,hidden:!0,onChange:Se,disabled:!y}),i.jsx(rw,{className:"w-10 h-10 mx-auto mb-3 text-muted-foreground"}),y?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Drag & drop documents here, or"}),i.jsx(ne,{size:"sm",onClick:()=>{var M;return(M=we.current)==null?void 0:M.click()},children:"Browse Files"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Supported: PDF"})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"You don't have permission to upload files."}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requires permission: ai_agent_files.create"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-sm font-medium",children:["Uploaded Files (",Pe.length,")"]}),Pe.length>0&&i.jsx(ne,{variant:"ghost",size:"sm",onClick:Jt,className:"text-red-600 hover:text-red-700",children:"Clear All"})]}),ge?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading files..."}):Pe.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No files uploaded yet."}):i.jsx("div",{className:"border rounded-md divide-y",children:Pe.map(M=>i.jsxs("div",{className:"flex items-center justify-between p-3",children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx("div",{className:"w-8 h-8 rounded bg-muted flex items-center justify-center",children:i.jsx(rw,{className:"w-4 h-4"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"truncate text-sm font-medium",children:M.name}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[(M.size/1024).toFixed(1)," KB  ",new Date(M.uploadedAt).toLocaleString()]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${M.status==="ready"?"bg-green-100 text-green-700":M.status==="uploading"?"bg-blue-100 text-blue-700":M.status==="processing"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:M.status==="uploading"?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(zt,{className:"w-3 h-3 animate-spin"}),"uploading"]}):M.status}),i.jsx(ne,{size:"sm",variant:"outline",onClick:()=>dn(M),disabled:M.status==="uploading",children:"Download"}),i.jsx(ne,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>At(M.id),disabled:M.status==="uploading",children:i.jsx(Ar,{className:"w-4 h-4"})})]})]},M.id))})]})]}),i.jsxs(In,{value:"qa",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Q&A Knowledge"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Add questionanswer pairs the AI can reference."})]}),i.jsxs(ne,{size:"sm",onClick:()=>{l("qa"),Ir()},className:"gap-2",children:[i.jsx(As,{className:"w-4 h-4"}),"Add Pair"]})]}),Ht.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No Q&A pairs. Click Add Pair to create one."}):i.jsx("div",{className:"space-y-3",children:Ht.map(M=>i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx(Je,{placeholder:"Question",value:M.question,onChange:q=>Ra(M.id,"question",q.target.value)}),i.jsx(Ua,{placeholder:"Answer",className:"min-h-[80px]",value:M.answer,onChange:q=>Ra(M.id,"answer",q.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[Rr(M)&&i.jsx(ne,{variant:"outline",size:"sm",onClick:async q=>{q.preventDefault(),q.stopPropagation(),l("qa");try{await E({qna:Ht.filter(re=>{var ce,de;return((ce=re.question)==null?void 0:ce.trim())||((de=re.answer)==null?void 0:de.trim())}).map(({question:re,answer:ce})=>({q:re.trim(),a:ce.trim()}))}),fa(JSON.parse(JSON.stringify(Ht))),Le.success("Q&A saved")}catch(re){Le.error((re==null?void 0:re.message)||"Failed to save Q&A")}},children:"Save"}),i.jsx(ne,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>_r(M.id),children:i.jsx(Ar,{className:"w-4 h-4"})})]})]})},M.id))})]}),i.jsx(In,{value:"product",children:i.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[i.jsx(aK,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Product knowledge and catalog integration"})]})})]})})}),i.jsx(In,{value:"integrations",children:i.jsxs(Oe,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Integrations"}),i.jsx("p",{className:"text-muted-foreground",children:"Set up integrations with external services."})]})}),i.jsx(In,{value:"followups",className:"space-y-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Followups"}),i.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Tambahkan pesan Followup yang akan dikirim kepada ",i.jsx("span",{className:"text-blue-600",children:"pelanggan setelah jeda waktu tertentu"}),"."]}),i.jsx("p",{children:"Isi dengan prompt. Prompt adalah arahan yang AI akan pakai untuk menulis Followup sesuai dengan history chat dan knowledge anda."}),i.jsx("p",{children:"Anda juga bisa menulis kondisi Handoff to Agent anda di Prompt"}),i.jsx("p",{className:"text-blue-600",children:"Anda bisa mengirim gambar di followup. Klik disini untuk Upload gambar."})]})]}),i.jsx("div",{className:"space-y-4",children:sr.map((M,q)=>i.jsx(Oe,{className:"p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:"Prompt:"}),i.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>Za(M.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:i.jsx(Ar,{className:"w-4 h-4"})})]}),i.jsx(Ua,{value:M.prompt,onChange:re=>Ni(M.id,"prompt",re.target.value),className:"min-h-[80px]",placeholder:"Enter followup message..."}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Delay (min):"}),i.jsx(Je,{type:"number",value:M.delay,onChange:re=>Ni(M.id,"delay",parseInt(re.target.value)||1),className:"w-20",min:"1"})]})}),i.jsxs(DR,{children:[i.jsxs($R,{onClick:()=>ls(M.id),className:"flex items-center gap-2 text-sm font-medium hover:text-primary",children:[i.jsx(wa,{className:`w-4 h-4 transition-transform ${M.expanded?"rotate-180":""}`}),"Options"]}),i.jsx(LR,{className:"pt-4 data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden",children:i.jsx("div",{className:"text-sm text-muted-foreground",children:"Additional options for this followup message can be configured here."})})]})]})},M.id))}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs(ne,{onClick:zl,className:"gap-2",children:[i.jsx(As,{className:"w-4 h-4"}),"Add Followup"]})}),i.jsx(he,{children:i.jsx("p",{children:"Tambah pesan tindak lanjut baru"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{className:"bg-green-600 hover:bg-green-700",children:"Save Followups"})}),i.jsx(he,{children:i.jsx("p",{children:"Simpan semua pesan tindak lanjut"})})]})]})]})}),i.jsx(In,{value:"evaluation",children:i.jsxs(Oe,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Evaluation"}),i.jsx("p",{className:"text-muted-foreground",children:"Review AI agent performance metrics."})]})})]})]})},qg=e=>e==null?"Pricing on request":`${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e>=1?2:3}).format(e)} / 1M`,Eu=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown",Wg="00000000-0000-0000-0000-000000000001",RIe=({agent:e,onSettings:t,onDelete:n})=>i.jsxs(Oe,{className:"p-6 text-center space-y-4 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center text-xl font-semibold text-muted-foreground",children:e.initials}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:e.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.creator}),e.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),(e.modelName||e.provider)&&i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.modelName?`Model: ${e.modelName}`:null,e.modelName&&e.provider?"  ":"",e.provider?`Provider: ${Eu(e.provider)}`:null]}),i.jsxs("div",{className:"space-y-1 mt-1",children:[i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Super Agent: ",e.superAgentName??"Unassigned"]})]})]})]}),i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Wt,{permission:"ai_profiles.update",children:i.jsxs(ne,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>t(e),children:[i.jsx(ro,{className:"w-4 h-4"}),"Settings"]})})}),i.jsx(he,{children:i.jsx("p",{children:"Konfigurasi pengaturan agen AI"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Wt,{permission:"ai_profiles.delete",children:i.jsxs(ne,{variant:"outline",size:"sm",className:"gap-2 text-destructive hover:text-destructive",onClick:()=>n(e.id),children:[i.jsx(Ar,{className:"w-4 h-4"}),"Delete"]})})}),i.jsx(he,{children:i.jsx("p",{children:"Hapus agen AI ini"})})]})]})]}),MIe=({onClick:e})=>i.jsx(Oe,{className:"p-6 text-center space-y-4 hover:shadow-md transition-shadow bg-blue-600 text-white cursor-pointer group",onClick:e,children:i.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center group-hover:bg-white/30 transition-colors",children:i.jsx(As,{className:"w-8 h-8"})}),i.jsx("h3",{className:"font-semibold text-lg",children:"Create New"})]})}),DIe=()=>{const[e,t]=p.useState(null),[n,r]=p.useState([]),[a,s]=p.useState(!0),[o,l]=p.useState(!1),[c,u]=p.useState(null),[f,d]=p.useState(!1),[h,m]=p.useState(""),[g,v]=p.useState("customer-service"),[x,y]=p.useState([]),[b,w]=p.useState([]),[k,j]=p.useState(!1),[_,S]=p.useState(null),[T,N]=p.useState(""),[A,D]=p.useState(""),[B,E]=p.useState(""),[R,P]=p.useState(""),[U,L]=p.useState("all"),[O,F]=p.useState("all"),[C,z]=p.useState("newest"),[I,$]=p.useState(0),[K,X]=p.useState(0),[V,W]=p.useState(null),[ae,G]=p.useState(null),[le,se]=p.useState(!1),Q=p.useRef(!0);Xr();const{mode:_e,superAgentId:xe,loading:J,error:fe}=ez(),{agents:Ce}=Ml(),[Te,Ee]=p.useState(!1),[ze,gt]=p.useState(null),ut=ue=>ue.replace(/[%_\\]/g,Pe=>`\\${Pe}`).replace(/'/g,"''"),ee=p.useMemo(()=>{const ue=new Map;return[...x,...b].forEach(Pe=>{ue.set(Pe.id,Pe)}),ue},[x,b]),{deleteProfile:We}=Lq(),st=(ue,Pe,H)=>({id:ue.id,name:ue.name,initials:ue.name.split(" ").map(we=>we.charAt(0)).join("").toUpperCase().slice(0,2),creator:"Admin",description:ue.description||void 0,created_at:ue.created_at,modelId:ue.model_id,modelName:(Pe==null?void 0:Pe.display_name)??(Pe==null?void 0:Pe.model_name)??null,provider:(Pe==null?void 0:Pe.provider)??null,superAgentId:(ue==null?void 0:ue.super_agent_id)??null,superAgentName:H??null}),oe=p.useCallback(async()=>{if(!J){if(_e==="none"){X(0),W(null);return}try{let ue=ie.from("ai_profiles").select("id",{count:"exact",head:!0}).eq("org_id",Wg);if(_e==="super"||_e==="agent"){if(!xe){X(0),W(null);return}ue=ue.eq("super_agent_id",xe)}const{count:Pe}=await ue;if(X(Pe||0),(Pe||0)>0){let H=ie.from("ai_profiles").select("created_at").order("created_at",{ascending:!1}).limit(1).eq("org_id",Wg);(_e==="super"||_e==="agent")&&xe&&(H=H.eq("super_agent_id",xe));const{data:we}=await H.maybeSingle();W(we?new Date(we.created_at):null)}else W(null)}catch(ue){console.error("Error fetching AI agent stats:",ue)}}},[_e,xe,J]),ve=p.useCallback(async()=>{if(J){s(!0);return}try{if(Q.current?s(!0):l(!0),u(null),_e==="none"){Q.current=!1,r([]),$(0),s(!1),l(!1),u(fe??"Tidak ada agen AI yang tersedia untuk akun ini.");return}let ue=ie.from("ai_profiles").select("*, ai_models:ai_models!ai_profiles_model_id_fkey(id, display_name, model_name, provider)",{count:"exact"}).eq("org_id",Wg);if(_e==="super"||_e==="agent"){if(!xe){Q.current=!1,r([]),$(0),s(!1),l(!1),u(fe??"Tidak ada agen AI yang tersedia untuk akun ini.");return}ue=ue.eq("super_agent_id",xe)}if(R){const te=ut(R);ue=ue.or(`name.ilike.%${te}%,description.ilike.%${te}%`)}O!=="all"&&(ue=ue.eq("model_id",O)),U!=="all"&&(U==="unknown"?ue=ue.or("model_id.is.null,ai_models.provider.is.null"):ue=ue.eq("ai_models.provider",U)),C==="az"?ue=ue.order("name",{ascending:!0,nullsFirst:!1}):C==="oldest"?ue=ue.order("created_at",{ascending:!0}):ue=ue.order("created_at",{ascending:!1});const{data:Pe,error:H,count:we}=await ue;if(H)throw H;const ge=Array.from(new Set(Pe.map(te=>te==null?void 0:te.super_agent_id).filter(te=>!!te)));let Ue=new Map;if(ge.length){const{data:te}=await ie.from("v_human_agents").select("user_id, agent_name, email").in("user_id",ge);te==null||te.forEach(ye=>{const Se=ye.agent_name||ye.email||String(ye.user_id).slice(0,8);Ue.set(ye.user_id,Se)})}$(we||0);const tt=(Pe||[]).map(te=>st(te,te.ai_models||(te.model_id?ee.get(te.model_id):void 0),Ue.get((te==null?void 0:te.super_agent_id)??"")??null));r(tt)}catch(ue){console.error("Error fetching AI agents:",ue),u("Failed to load AI agents"),Le.error("Failed to load AI agents"),r([]),$(0)}finally{Q.current?(Q.current=!1,s(!1)):l(!1)}},[R,O,U,C,ee,_e,xe,J,fe]),De=p.useMemo(()=>{const ue=new Set;return[...x,...b].forEach(Pe=>{Pe.provider&&ue.add(Pe.provider)}),ue.add("unknown"),Array.from(ue).sort((Pe,H)=>Pe.localeCompare(H))},[x,b]),Me=p.useMemo(()=>{const ue=new Map;return[...x,...b].forEach(Pe=>{ue.set(Pe.id,Pe.display_name||Pe.model_name||"Unnamed")}),Array.from(ue.entries()).sort((Pe,H)=>Pe[1].localeCompare(H[1]))},[x,b]);p.useEffect(()=>{const ue=setTimeout(()=>P(B.trim()),250);return()=>clearTimeout(ue)},[B]),p.useEffect(()=>{ve()},[ve]),p.useEffect(()=>{oe()},[oe]),p.useEffect(()=>{U!=="all"&&!De.includes(U)&&L("all")},[U,De]),p.useEffect(()=>{O!=="all"&&!Me.some(([ue])=>ue===O)&&F("all")},[O,Me]);const Z=ue=>{const Pe=n.find(H=>H.id===ue);Pe&&G(Pe)},Be=async()=>{if(ae)try{se(!0),await We(ae.id),await Promise.all([ve(),oe()]),Le.success(`"${ae.name}" has been deleted successfully`),G(null)}catch(ue){console.error("Error deleting agent:",ue),u("Failed to delete AI agent"),Le.error("Failed to delete AI agent")}finally{se(!1)}},xt=()=>{d(!0)},yt=async()=>{var ue,Pe;if(!h.trim()){Le.error("Please enter an AI agent name");return}if(!T){Le.error("Please select an AI model");return}if(!ze){Le.error("Please choose a Super Agent");return}try{const{data:H,error:we}=await ie.from("ai_profiles").insert([{org_id:Wg,name:h.trim(),description:null,system_prompt:"",welcome_message:"",transfer_conditions:"",stop_ai_after_handoff:!0,model_id:T,super_agent_id:ze}]).select("id, name, created_at, model_id, super_agent_id").single();if(we)throw we;const Ue={id:H==null?void 0:H.id,name:(H==null?void 0:H.name)||h.trim(),initials:((H==null?void 0:H.name)||h.trim()).split(" ").map(tt=>tt.charAt(0)).join("").toUpperCase().slice(0,2),creator:"Admin",created_at:(H==null?void 0:H.created_at)||new Date().toISOString(),modelId:(H==null?void 0:H.model_id)||T,modelName:((ue=x.find(tt=>tt.id===((H==null?void 0:H.model_id)||T)))==null?void 0:ue.display_name)||void 0,provider:((Pe=x.find(tt=>tt.id===((H==null?void 0:H.model_id)||T)))==null?void 0:Pe.provider)||null,superAgentId:(H==null?void 0:H.super_agent_id)||ze,superAgentName:void 0};t(Ue),d(!1),m(""),v("customer-service"),gt(null),Le.success("AI agent created successfully"),ve(),oe()}catch(H){console.error("Create AI Agent failed:",H),Le.error((H==null?void 0:H.message)||"Failed to create AI agent")}},He=p.useRef(!1),lt=p.useCallback(async()=>{try{j(!0),S(null);const{data:ue,error:Pe}=await ie.from("ai_models").select("id, display_name, model_name, provider, cost_per_1m_tokens, is_active").eq("is_active",!0).order("display_name",{ascending:!0});if(Pe)throw Pe;const H=ue||[],we=H.filter(Ue=>(Ue.display_name||"").toLowerCase()!=="fallback"),ge=H.filter(Ue=>(Ue.display_name||"").toLowerCase()==="fallback");y(we),w(ge),He.current||(we.length>0&&N(Ue=>Ue||we[0].id),ge.length>0&&D(Ue=>Ue||ge[0].id),He.current=!0)}catch(ue){console.error("Error loading AI models:",ue),S("Failed to load AI models"),Le.error("Failed to load AI models")}finally{j(!1)}},[]);if(p.useEffect(()=>{lt()},[lt]),p.useEffect(()=>{ve()},[]),e)return i.jsx(IIe,{agentName:e.name,onBack:()=>{t(null),ve(),oe()},profileId:e.id==="new"?void 0:e.id,initialModelId:e.modelId||void 0});if(a)return i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(zt,{className:"w-8 h-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading AI agents..."})]});const mt=n.length,en=De.length?De:[];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"AI Agents"}),i.jsxs("div",{className:"text-muted-foreground max-w-2xl mx-auto",children:[i.jsx("p",{children:"Ini adalah halaman di mana Anda dapat mengunjungi AI yang telah Anda buat sebelumnya."}),i.jsx("p",{children:"Jangan ragu untuk membuat perubahan dan membuat chatbot sebanyak yang Anda inginkan kapan saja!"})]})]}),c&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",c]}),i.jsx(ne,{variant:"outline",size:"sm",className:"mt-2",onClick:ve,children:"Retry"})]}),i.jsxs("div",{className:"grid gap-3 rounded-lg border bg-card p-4 md:flex md:items-center md:justify-between",children:[i.jsxs("div",{className:"relative w-full md:w-72",children:[i.jsx(Ji,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Je,{value:B,onChange:ue=>E(ue.target.value),placeholder:"Search AI agents...",className:"pl-9"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs(qt,{value:U,onValueChange:L,children:[i.jsx(Lt,{className:"w-[160px] bg-background border",children:i.jsx(It,{placeholder:"Provider"})}),i.jsxs(Ft,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"all",children:"All providers"}),en.map(ue=>i.jsx(Ge,{value:ue,children:ue==="unknown"?"Unknown":Eu(ue)},ue))]})]}),i.jsxs(qt,{value:O,onValueChange:F,children:[i.jsx(Lt,{className:"w-[160px] bg-background border",children:i.jsx(It,{placeholder:"AI model"})}),i.jsxs(Ft,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"all",children:"All models"}),Me.map(([ue,Pe])=>i.jsx(Ge,{value:ue,children:Pe},ue))]})]}),i.jsxs(qt,{value:C,onValueChange:ue=>z(ue),children:[i.jsx(Lt,{className:"w-[150px] bg-background border",children:i.jsx(It,{placeholder:"Sort"})}),i.jsxs(Ft,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"newest",children:"Newest first"}),i.jsx(Ge,{value:"oldest",children:"Oldest first"}),i.jsx(Ge,{value:"az",children:"Name AZ"})]})]})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",mt," of ",K," agents"]}),o&&!a&&i.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[i.jsx(zt,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Updating list"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Oe,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-primary",children:K}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total AI Agents"})]}),i.jsxs(Oe,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:mt}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Matching Filters"})]}),i.jsxs(Oe,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:V?V.toLocaleDateString():"N/A"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Last Created"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.map(ue=>i.jsx(RIe,{agent:ue,onSettings:t,onDelete:Z},ue.id)),i.jsx(Wt,{permission:"ai_profiles.create",children:i.jsx(MIe,{onClick:xt})})]}),mt===0&&!a&&K===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center",children:i.jsx(As,{className:"w-12 h-12 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No AI Agents Yet"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first AI agent to get started with automated customer support."}),i.jsxs(ne,{onClick:xt,children:[i.jsx(As,{className:"w-4 h-4 mr-2"}),"Create Your First AI Agent"]})]}),mt===0&&!a&&K>0&&i.jsx("div",{className:"rounded-lg border border-dashed p-6 text-center text-sm text-muted-foreground",children:"No AI agents match your current filters. Try adjusting the search or filter settings above."}),i.jsx(Wt,{permission:"ai_profiles.create",children:i.jsx(cn,{open:f,onOpenChange:d,children:i.jsxs(nn,{className:"sm:max-w-[425px]",children:[i.jsx(rn,{children:i.jsx(an,{className:"text-xl font-semibold",children:"Create New AI Agent"})}),i.jsxs("div",{className:"space-y-6 pt-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Name"}),i.jsx(Je,{placeholder:"Enter AI name",value:h,onChange:ue=>m(ue.target.value),className:"w-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Super Agent *"}),i.jsxs(hi,{open:Te,onOpenChange:Ee,children:[i.jsx(mi,{asChild:!0,children:i.jsx(ne,{variant:"outline",role:"combobox",className:"w-full justify-between",children:(()=>{const ue=Ce.find(Pe=>Pe.primaryRole==="super_agent"&&Pe.user_id===ze);return(ue==null?void 0:ue.display_name)||(ue==null?void 0:ue.email)||ze||"Choose a super agent"})()})}),i.jsx(Wa,{className:"w-[360px] p-0",children:i.jsxs(Mc,{children:[i.jsx(Dc,{placeholder:"Search super agents..."}),i.jsx($c,{children:"No super agents found."}),i.jsx(Lc,{children:Ce.filter(ue=>ue.primaryRole==="super_agent").map(ue=>i.jsx(Fc,{onSelect:()=>{gt(ue.user_id),Ee(!1)},children:i.jsx("span",{className:"ml-2",children:ue.display_name||ue.email||ue.user_id.slice(0,8)})},ue.user_id))})]})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Assign a super agent who will own and manage this AI agent."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Template"}),i.jsxs(qt,{value:g,onValueChange:v,children:[i.jsx(Lt,{className:"w-full",children:i.jsx(It,{placeholder:"Select a template"})}),i.jsx(Ft,{})]}),g==="customer-service"&&i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"and sales inquiries for your business."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"AI Model"}),i.jsxs(qt,{value:T,onValueChange:N,disabled:k||x.length===0,children:[i.jsx(Lt,{className:"w-full py-3",children:T?(()=>{const ue=x.find(Pe=>Pe.id===T);return ue?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[ue.display_name||"Custom","  ",qg(ue.cost_per_1m_tokens),"  ",Eu(ue.provider)]})}):i.jsx(It,{placeholder:k?"Loading models...":"Select an AI model"})})():i.jsx(It,{placeholder:k?"Loading models...":"Select an AI model"})}),i.jsx(Ft,{side:"bottom",align:"start",sideOffset:4,children:x.map(ue=>i.jsx(Ge,{value:ue.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm font-medium",children:[i.jsx("span",{children:ue.display_name||"Custom"}),i.jsx("span",{className:"text-muted-foreground",children:qg(ue.cost_per_1m_tokens)})]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:ue.description||"No description available"}),i.jsxs("span",{className:"text-[11px] font-mono text-muted-foreground",children:[ue.model_name,"  ",Eu(ue.provider)]})]})},ue.id))})]}),_&&i.jsx("p",{className:"text-xs text-destructive",children:_})]}),b.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Fallback Model"}),i.jsxs(qt,{value:A,onValueChange:D,disabled:k||b.length===0,children:[i.jsx(Lt,{className:"w-full py-3",children:A?(()=>{const ue=b.find(Pe=>Pe.id===A);return ue?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[ue.display_name||"Custom","  ",qg(ue.cost_per_1m_tokens),"  ",Eu(ue.provider)]})}):i.jsx(It,{placeholder:k?"Loading models...":"Select a fallback model"})})():i.jsx(It,{placeholder:k?"Loading models...":"Select a fallback model"})}),i.jsx(Ft,{side:"bottom",align:"start",sideOffset:4,children:b.map(ue=>i.jsx(Ge,{value:ue.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm font-medium",children:[i.jsx("span",{children:ue.display_name||"Custom"}),i.jsx("span",{className:"text-muted-foreground",children:qg(ue.cost_per_1m_tokens)})]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:ue.description||"No description available"}),i.jsxs("span",{className:"text-[11px] font-mono text-muted-foreground",children:[ue.model_name,"  ",Eu(ue.provider)]})]})},ue.id))})]})]}),i.jsx(ne,{onClick:yt,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:!h.trim()||!T||!ze,children:"Create AI Agent"})]})]})})})]}),i.jsx(bb,{open:!!ae,onOpenChange:ue=>{!ue&&!le&&G(null)},children:i.jsxs(Pp,{children:[i.jsxs(Tp,{children:[i.jsx(Ip,{children:"Delete AI Agent?"}),i.jsx(Rp,{children:ae?`Are you sure you want to delete "${ae.name}"? This action cannot be undone.`:"Are you sure you want to delete this AI agent?"})]}),i.jsxs(Op,{children:[i.jsx(Dp,{disabled:le,children:"Cancel"}),i.jsx(Mp,{onClick:Be,disabled:le,className:"bg-destructive hover:bg-destructive/90 focus:ring-destructive/50",children:le?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(zt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})},Bq=({className:e,...t})=>i.jsx("nav",{role:"navigation","aria-label":"pagination",className:ke("mx-auto flex w-full justify-center",e),...t});Bq.displayName="Pagination";const Uq=p.forwardRef(({className:e,...t},n)=>i.jsx("ul",{ref:n,className:ke("flex flex-row items-center gap-1",e),...t}));Uq.displayName="PaginationContent";const xv=p.forwardRef(({className:e,...t},n)=>i.jsx("li",{ref:n,className:ke("",e),...t}));xv.displayName="PaginationItem";const NA=({className:e,isActive:t,size:n="icon",...r})=>i.jsx("a",{"aria-current":t?"page":void 0,className:ke(Ad({variant:t?"outline":"ghost",size:n}),e),...r});NA.displayName="PaginationLink";const zq=({className:e,...t})=>i.jsxs(NA,{"aria-label":"Go to previous page",size:"default",className:ke("gap-1 pl-2.5",e),...t,children:[i.jsx(ZS,{className:"h-4 w-4"}),i.jsx("span",{children:"Previous"})]});zq.displayName="PaginationPrevious";const qq=({className:e,...t})=>i.jsxs(NA,{"aria-label":"Go to next page",size:"default",className:ke("gap-1 pr-2.5",e),...t,children:[i.jsx("span",{children:"Next"}),i.jsx(fp,{className:"h-4 w-4"})]});qq.displayName="PaginationNext";const $Ie=e=>e.replace(/\s/g,"").toLowerCase(),LIe=()=>{const[e,t]=p.useState(!1),[n,r]=p.useState(!1),[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState(!1),[f,d]=p.useState({enabled:!1,perDay:0,perMonth:0,twoFA:!1}),[h,m]=p.useState("7d"),[g,v]=p.useState("7d"),[x,y]=p.useState(null),[b,w]=p.useState(!1),[k,j]=p.useState(null),[_,S]=p.useState({}),[T,N]=p.useState(!1),[A,D]=p.useState(null),[B,E]=p.useState({name:"",email:"",role:"agent"}),[R,P]=p.useState(!1),[U,L]=p.useState(!1),[O,F]=p.useState(null),[C,z]=p.useState(!1),[I,$]=p.useState(!1),[K,X]=p.useState(null),{toast:V}=Yc(),W=p.useRef(null),{hasPermission:ae,hasRole:G}=br(),[le,se]=p.useState([]),[Q,_e]=p.useState([]),[xe,J]=p.useState(0),[fe,Ce]=p.useState(0),[Te,Ee]=p.useState(1),[ze,gt]=p.useState(1),[ut,ee]=p.useState(10),[We,st]=p.useState(10),[oe,ve]=p.useState(!1),[De,Me]=p.useState(!1),[Z,Be]=p.useState("active"),[xt,yt]=p.useState({}),[He,lt]=p.useState(null),[mt,en]=p.useState(""),[ue,Pe]=p.useState(""),[H,we]=p.useState("all"),[ge,Ue]=p.useState("all"),[tt,te]=p.useState("all");p.useEffect(()=>{const q=setTimeout(()=>Pe(mt.trim()),300);return()=>clearTimeout(q)},[mt]),p.useEffect(()=>{!G(er.MASTER_AGENT)&&B.role==="super_agent"&&E({...B,role:"agent"})},[G,B.role]);const ye=q=>q.replace(/[%_\\]/g,re=>`\\${re}`).replace(/'/g,"''"),Se=B.name.trim()&&B.email.trim()&&(B.role!=="agent"||O),{agents:Ae,loading:dt,error:At,fetchAgents:dn,createAgent:Jt,updateAgentStatus:Ht,updateAgentRole:Rt,deleteAgent:it,setEnable2FAFlagForCreate:fa}=Ml();p.useEffect(()=>{At&&At!==W.current&&(V({title:"Error",description:At,variant:"destructive"}),W.current=At),At||(W.current=null)},[At,V]);const Ir=q=>{if(!q)return null;const re=String(q).toLowerCase();return re.includes("master")?"master_agent":re.includes("super")?"super_agent":re.includes("agent")?"agent":null},_r=async({invited:q,page:re,pageSize:ce,search:de,role:be,activeStatus:Ve,pendingStatus:ot})=>{try{q?Me(!0):ve(!0);const ft=(re-1)*ce,ct=ft+ce-1;let at=ie.from("v_human_agents").select("*",{count:"exact"});const tn=de?ye(de):"";if(tn&&(at=at.or(`agent_name.ilike.%${tn}%,email.ilike.%${tn}%`)),be&&be!=="all"){const ha=be==="master_agent"?"%master%":be==="super_agent"?"%super%":"%agent%";at=at.ilike("role_name",ha)}const ht=G(er.MASTER_AGENT);if(G(er.SUPER_AGENT)){if(!A){q?Me(!1):ve(!1);return}try{let ha=ie.from("super_agent_members").select("agent_user_id").eq("super_agent_id",A);He&&(ha=ha.eq("org_id",He));const{data:Pn}=await ha,Yn=[A,...(Pn||[]).map(jt=>String(jt.agent_user_id)).filter(Boolean)];Yn.length>0?at=at.in("user_id",Yn):at=at.eq("user_id",A)}catch{at=at.eq("user_id",A)}}else if(!ht){q?(_e([]),Ce(0),Me(!1)):(se([]),J(0),ve(!1));return}q?ot==="expired"?at=at.eq("confirmation_status","expired"):ot==="invited"?at=at.or("confirmation_status.is.null,confirmation_status.eq.invited,confirmation_status.eq.pending"):at=at.or("confirmation_status.is.null,confirmation_status.neq.accepted"):(at=at.eq("confirmation_status","accepted"),Ve&&Ve!=="all"&&(at=at.eq("is_active",Ve==="active")));const{data:En,count:Dr,error:$r}=await at.order("agent_name",{ascending:!0}).range(ft,ct);if($r)throw $r;if(q)_e(En||[]),Ce(Dr||0);else{const ha=En||[];se(ha),J(Dr||0);try{const Pn=ha.filter(Yn=>String((Yn==null?void 0:Yn.role_name)||"").toLowerCase()==="agent").map(Yn=>Yn.user_id);if(Pn.length>0){let Yn=ie.from("super_agent_members").select("agent_user_id, super_agent_id").in("agent_user_id",Pn);He&&(Yn=Yn.eq("org_id",He));const{data:jt}=await Yn,Tn={};(jt||[]).forEach(pt=>{pt!=null&&pt.agent_user_id&&(Tn[String(pt.agent_user_id)]=String(pt.super_agent_id||""))}),yt(Tn)}else yt({})}catch{yt({})}}}catch(ft){V({title:"Error",description:(ft==null?void 0:ft.message)||"Failed to fetch agents",variant:"destructive"}),q?(_e([]),Ce(0)):(se([]),J(0))}finally{q?Me(!1):ve(!1)}};p.useEffect(()=>{_r({invited:!1,page:Te,pageSize:ut,search:ue,role:H,activeStatus:ge})},[Te,ut,ue,H,ge]),p.useEffect(()=>{Te!==1&&Ee(1)},[ue,H,ge]),p.useEffect(()=>{Z==="pending"&&_r({invited:!0,page:ze,pageSize:We,search:ue,role:H,pendingStatus:tt})},[Z,ze,We,ue,H,tt]),p.useEffect(()=>{Z==="pending"&&ze!==1&&gt(1)},[ue,H,tt,Z]);const Ra=(q,re,ce,de,be,Ve,ot,ft,ct)=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"rounded-lg border bg-card",children:[i.jsxs("div",{className:`grid gap-4 p-4 border-b bg-muted/50 font-medium text-sm ${ft?"grid-cols-[240px,1fr,220px,120px,160px]":"grid-cols-[240px,1fr,220px,160px,120px,120px]"}`,children:[i.jsx("div",{children:"Agent Name"}),i.jsx("div",{children:"Email"}),i.jsx("div",{children:"Role"}),!ft&&i.jsx("div",{children:"Token Usage"}),i.jsx("div",{children:"Status"}),i.jsx("div",{children:"Action"})]}),i.jsx("div",{className:"divide-y",children:re?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(zt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Loading agents..."})]})}):q.length===0?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(nN,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),i.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["No ",ft?"Pending":"Active"," Agents"]}),i.jsx("p",{className:"text-muted-foreground",children:ft?"Invited users will appear here until they sign in.":"Create your first agent to get started."})]})}):!ft&&ct?(()=>{const at=jt=>String(jt||"").toLowerCase(),tn=jt=>at(jt.role_name).includes("master"),ht=jt=>at(jt.role_name).includes("super"),Bn=jt=>{const Tn=at(jt.role_name);return Tn==="agent"||Tn==="agent_only"},En=q.filter(tn),Dr=q.filter(ht),$r=q.filter(Bn),ha=Object.fromEntries(Dr.map(jt=>[String(jt.user_id),jt])),Pn={},Yn=[];for(const jt of $r){const Tn=ct[String(jt.user_id)];Tn&&ha[Tn]?(Pn[Tn]=Pn[Tn]||[]).push(jt):Yn.push(jt)}return i.jsxs(i.Fragment,{children:[En.map(jt=>{const Tn="master_agent",pt={user_id:String(jt.user_id),email:jt.email||"",display_name:jt.agent_name||jt.email||"Unknown",avatar_url:jt.avatar_url||null,timezone:null,created_at:"",roles:[Tn],primaryRole:Tn,status:jt.is_active?"Active":"Inactive",super_agent_id:null};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-blue-50/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Vr,{className:"h-8 w-8",children:i.jsx(Kr,{className:"text-xs bg-blue-100 text-blue-700",children:Ai(pt.display_name||"U")})}),i.jsx("span",{className:"font-medium text-blue-600",children:pt.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:pt.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(vt,{className:`text-xs ${M(pt.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Master Agent"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(Su,{children:[i.jsx(Nu,{asChild:!0,children:i.jsxs(ne,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:pt.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${Ei(pt.status)}`}),i.jsx("span",{className:"text-xs",children:pt.status}),pt.primaryRole!=="master_agent"&&i.jsx(wa,{className:"h-3 w-3"})]})}),i.jsxs(rc,{className:"bg-background border z-50",children:[i.jsx(ai,{onClick:()=>Mr(pt.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ai,{onClick:()=>Mr(pt.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Wt,{permission:"users_profile.update_token_limit",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>kr(pt),title:"Edit limits",children:i.jsx(ya,{className:"h-4 w-4"})})}),G(er.MASTER_AGENT)&&i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>Ci(pt),title:"View token usage",children:i.jsx($f,{className:"h-4 w-4"})}),pt.primaryRole!=="master_agent"&&i.jsx(Wt,{permission:"super_agents.delete",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{X(pt),z(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]},`master-${jt.user_id}`)}),Dr.map(jt=>{const Tn="super_agent",pt={user_id:String(jt.user_id),email:jt.email||"",display_name:jt.agent_name||jt.email||"Unknown",avatar_url:jt.avatar_url||null,timezone:null,created_at:"",roles:[Tn],primaryRole:Tn,status:jt.is_active?"Active":"Inactive",super_agent_id:null},Pi=Pn[String(jt.user_id)]||[];return i.jsxs("div",{className:"",children:[i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-green-50/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Vr,{className:"h-8 w-8",children:i.jsx(Kr,{className:"text-xs bg-green-100 text-green-700",children:Ai(pt.display_name||"U")})}),i.jsx("span",{className:"font-medium text-green-600",children:pt.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:pt.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(vt,{className:`text-xs ${M(pt.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Super Agent"})}),i.jsx("div",{className:"text-sm font-medium",children:T?"":(_[pt.user_id]??0).toLocaleString()}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(Su,{children:[i.jsx(Nu,{asChild:!0,children:i.jsxs(ne,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:pt.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${Ei(pt.status)}`}),i.jsx("span",{className:"text-xs",children:pt.status}),pt.primaryRole!=="master_agent"&&i.jsx(wa,{className:"h-3 w-3"})]})}),i.jsxs(rc,{className:"bg-background border z-50",children:[i.jsx(ai,{onClick:()=>Mr(pt.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ai,{onClick:()=>Mr(pt.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Wt,{permission:"users_profile.update_token_limit",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>kr(pt),title:"Edit limits",children:i.jsx(ya,{className:"h-4 w-4"})})}),G(er.MASTER_AGENT)&&i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>Ci(pt),title:"View token usage",children:i.jsx($f,{className:"h-4 w-4"})}),pt.primaryRole!=="master_agent"&&i.jsx(Wt,{permission:"super_agents.delete",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{X(pt),z(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]}),Pi.map(Ti=>{const YA="agent",ma={user_id:String(Ti.user_id),email:Ti.email||"",display_name:Ti.agent_name||Ti.email||"Unknown",avatar_url:Ti.avatar_url||null,timezone:null,created_at:"",roles:[YA],primaryRole:YA,status:Ti.is_active?"Active":"Inactive",super_agent_id:pt.user_id};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-gray-50/30 pl-12",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 border-l-2 border-b-2 border-gray-300 rounded-bl"})}),i.jsx(Vr,{className:"h-8 w-8",children:i.jsx(Kr,{className:"text-xs bg-gray-100 text-gray-700",children:Ai(ma.display_name||"U")})}),i.jsx("span",{className:"font-medium text-gray-600",children:ma.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:ma.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(vt,{className:`text-xs ${M(ma.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Agent"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(Su,{children:[i.jsx(Nu,{asChild:!0,children:i.jsxs(ne,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:ma.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${Ei(ma.status)}`}),i.jsx("span",{className:"text-xs",children:ma.status}),ma.primaryRole!=="master_agent"&&i.jsx(wa,{className:"h-3 w-3"})]})}),i.jsxs(rc,{className:"bg-background border z-50",children:[i.jsx(ai,{onClick:()=>Mr(ma.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ai,{onClick:()=>Mr(ma.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Wt,{permission:"users_profile.update_token_limit",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>kr(ma),title:"Edit limits",children:i.jsx(ya,{className:"h-4 w-4"})})}),G(er.MASTER_AGENT)&&i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>Ci(ma),title:"View token usage",children:i.jsx($f,{className:"h-4 w-4"})}),ma.primaryRole!=="master_agent"&&i.jsx(Wt,{permission:"super_agents.delete",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{X(ma),z(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]},`agent-${Ti.user_id}`)})]},`super-${jt.user_id}`)}),Yn.map(jt=>{const Tn="agent",pt={user_id:String(jt.user_id),email:jt.email||"",display_name:jt.agent_name||jt.email||"Unknown",avatar_url:jt.avatar_url||null,timezone:null,created_at:"",roles:[Tn],primaryRole:Tn,status:jt.is_active?"Active":"Inactive",super_agent_id:null};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-orange-50/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Vr,{className:"h-8 w-8",children:i.jsx(Kr,{className:"text-xs bg-orange-100 text-orange-700",children:Ai(pt.display_name||"U")})}),i.jsx("span",{className:"font-medium text-orange-600",children:pt.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:pt.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(vt,{className:`text-xs ${M(pt.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Agent (Unassigned)"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(Su,{children:[i.jsx(Nu,{asChild:!0,children:i.jsxs(ne,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:pt.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${Ei(pt.status)}`}),i.jsx("span",{className:"text-xs",children:pt.status}),pt.primaryRole!=="master_agent"&&i.jsx(wa,{className:"h-3 w-3"})]})}),i.jsxs(rc,{className:"bg-background border z-50",children:[i.jsx(ai,{onClick:()=>Mr(pt.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ai,{onClick:()=>Mr(pt.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Wt,{permission:"users_profile.update_token_limit",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>kr(pt),title:"Edit limits",children:i.jsx(ya,{className:"h-4 w-4"})})}),G(er.MASTER_AGENT)&&i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>Ci(pt),title:"View token usage",children:i.jsx($f,{className:"h-4 w-4"})}),pt.primaryRole!=="master_agent"&&i.jsx(Wt,{permission:"super_agents.delete",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{X(pt),z(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]},`unassigned-${jt.user_id}`)})]})})():q.map(at=>{const tn=Ir(at.role_name),ht={user_id:String(at.user_id),email:at.email||"",display_name:at.agent_name||at.email||"Unknown",avatar_url:at.avatar_url||null,timezone:null,created_at:"",roles:tn?[tn]:[],primaryRole:tn,status:at.is_active?"Active":"Inactive",super_agent_id:null},Bn=String(at.confirmation_status||"").toLowerCase()==="expired";return i.jsxs("div",{className:`grid gap-4 p-4 items-center hover:bg-muted/30 transition-colors ${ft?"grid-cols-[240px,1fr,220px,120px,160px]":"grid-cols-[240px,1fr,220px,160px,120px,120px]"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Vr,{className:"h-8 w-8",children:i.jsx(Kr,{className:"text-xs",children:Ai(ht.display_name||"U")})}),i.jsx("span",{className:"font-medium",children:ht.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:ht.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(vt,{className:`text-xs ${M(ht.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:ht.primaryRole==="master_agent"?"Master Agent":ht.primaryRole==="super_agent"?"Super Agent":"Agent"})}),!ft&&i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:ft?i.jsx(vt,{className:`text-xs leading-none h-6 px-2 inline-flex items-center ${Bn?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:Bn?"Expired":"Invited"}):i.jsxs(Su,{children:[i.jsx(Nu,{asChild:!0,children:i.jsxs(ne,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:ht.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${Ei(ht.status)}`}),i.jsx("span",{className:"text-xs",children:ht.status}),ht.primaryRole!=="master_agent"&&i.jsx(wa,{className:"h-3 w-3"})]})}),i.jsxs(rc,{className:"bg-background border z-50",children:[i.jsx(ai,{onClick:()=>Mr(ht.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ai,{onClick:()=>Mr(ht.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[!ft&&i.jsx(Wt,{permission:"users_profile.update_token_limit",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>kr(ht),title:"Edit limits",children:i.jsx(ya,{className:"h-4 w-4"})})}),G(er.MASTER_AGENT)&&!ft&&i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>Ci(ht),title:"View token usage",children:i.jsx($f,{className:"h-4 w-4"})}),ft?i.jsxs(i.Fragment,{children:[Bn&&i.jsx(Wt,{permission:"super_agents.create",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-blue-600 hover:bg-blue-700 text-white",onClick:async()=>{try{await ie.functions.invoke("admin-create-user",{body:{email:ht.email,full_name:ht.display_name,role:ht.primaryRole||"agent",reinvite:!0}}),V({title:"Reinvite sent",description:`${ht.email}`}),_r({invited:!0,page:de,pageSize:be})}catch(En){V({title:"Error",description:(En==null?void 0:En.message)||"Failed to reinvite",variant:"destructive"})}},title:"Reinvite user",children:i.jsx(e4,{className:"h-4 w-4"})})}),ht.primaryRole!=="master_agent"&&i.jsx(Wt,{permission:"super_agents.delete",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{X(ht),z(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]}):ht.primaryRole!=="master_agent"&&i.jsx(Wt,{permission:"super_agents.delete",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{X(ht),z(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]},at.user_id)})})]}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:ce>0?i.jsxs("span",{children:["Showing ",Math.min((de-1)*be+1,ce),"",Math.min(de*be,ce)," of ",ce]}):i.jsx("span",{children:"0 results"})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx(qe,{className:"text-sm text-muted-foreground",children:"Rows"}),i.jsxs(qt,{value:String(be),onValueChange:at=>ot(Number(at)),children:[i.jsx(Lt,{className:"h-8 w-[100px] bg-background border",children:i.jsx(It,{})}),i.jsxs(Ft,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"10",children:"10"}),i.jsx(Ge,{value:"20",children:"20"}),i.jsx(Ge,{value:"50",children:"50"})]})]})]}),i.jsx(Bq,{children:i.jsxs(Uq,{children:[i.jsx(xv,{children:i.jsx(zq,{className:de<=1?"pointer-events-none opacity-50":"",onClick:()=>de>1&&Ve(de-1),href:"#"})}),i.jsx(xv,{children:i.jsxs("span",{className:"text-sm text-muted-foreground px-2",children:["Page ",de," of ",Math.max(1,Math.ceil((ce||0)/Math.max(1,be)))]})}),i.jsx(xv,{children:i.jsx(qq,{className:de>=Math.max(1,Math.ceil((ce||0)/Math.max(1,be)))?"pointer-events-none opacity-50":"",onClick:()=>de<Math.max(1,Math.ceil((ce||0)/Math.max(1,be)))&&Ve(de+1),href:"#"})})]})})]})]})]}),Rr=async()=>{var q,re;if(!B.name||!B.email){V({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}if(B.role==="agent"&&!O){V({title:"Error",description:"Please select a Super Agent for this agent",variant:"destructive"});return}try{L(!0),fa(R);let ce=He||null;if(!ce)try{const{data:be}=await ie.auth.getUser(),{data:Ve}=await ie.from("org_members").select("org_id").eq("user_id",((q=be==null?void 0:be.user)==null?void 0:q.id)||"").limit(1);ce=((re=Ve==null?void 0:Ve[0])==null?void 0:re.org_id)||null}catch{}const de=await Jt({full_name:B.name,email:B.email,role:B.role,super_agent_id:B.role==="agent"&&O||null,org_id:ce});E({name:"",email:"",role:"agent"}),F(null),P(!1),t(!1),V({title:"Success",description:"Agent created successfully"})}catch(ce){V({title:"Error",description:ce instanceof Error?ce.message:"Failed to create agent",variant:"destructive"})}finally{L(!1)}},sr=async q=>{var re,ce,de;try{if((K==null?void 0:K.primaryRole)==="master_agent"||(de=(ce=(re=le.find(be=>String(be.user_id)===q))==null?void 0:re.role_name)==null?void 0:ce.toLowerCase)!=null&&de.call(ce).includes("master")){V({title:"Error",description:"Master agent tidak dapat dihapus.",variant:"destructive"}),z(!1),X(null);return}$(!0),await it(q),V({title:"Success",description:"Agent deleted successfully"}),z(!1),X(null),Z==="pending"?Q.length<=1&&ze>1?gt(be=>Math.max(1,be-1)):await _r({invited:!0,page:ze,pageSize:We,search:ue,role:H,pendingStatus:tt}):le.length<=1&&Te>1?Ee(be=>Math.max(1,be-1)):await _r({invited:!1,page:Te,pageSize:ut,search:ue,role:H,activeStatus:ge})}catch(be){V({title:"Error",description:be instanceof Error?be.message:"Failed to delete agent",variant:"destructive"})}finally{$(!1)}},kr=async q=>{try{l(q);const{data:re,error:ce}=await ie.from("users_profile").select("token_limit_enabled, max_tokens_per_day, max_tokens_per_month, is_2fa_email_enabled").eq("user_id",q.user_id).maybeSingle();if(ce)throw ce;d({enabled:!!(re!=null&&re.token_limit_enabled),perDay:Number((re==null?void 0:re.max_tokens_per_day)??0),perMonth:Number((re==null?void 0:re.max_tokens_per_month)??0),twoFA:!!(re!=null&&re.is_2fa_email_enabled)}),r(!0)}catch(re){V({title:"Error",description:(re==null?void 0:re.message)||"Failed to load token limits",variant:"destructive"})}},zl=async()=>{if(o)try{u(!0);const{error:q}=await ie.from("users_profile").update({token_limit_enabled:f.enabled,max_tokens_per_day:Math.max(0,Math.floor(f.perDay||0)),max_tokens_per_month:Math.max(0,Math.floor(f.perMonth||0)),is_2fa_email_enabled:f.twoFA}).eq("user_id",o.user_id);if(q)throw q;V({title:"Saved",description:"Token limits updated."}),r(!1)}catch(q){V({title:"Error",description:(q==null?void 0:q.message)||"Failed to save token limits",variant:"destructive"})}finally{u(!1)}},Za=q=>{const re=new Date;let ce;if(q==="this_month")ce=new Date(Date.UTC(re.getUTCFullYear(),re.getUTCMonth(),1,0,0,0));else{const be=q==="7d"?7:30;ce=new Date(Date.UTC(re.getUTCFullYear(),re.getUTCMonth(),re.getUTCDate(),0,0,0)),ce.setUTCDate(ce.getUTCDate()-(be-1))}const de=re;return{start:ce.toISOString(),end:de.toISOString()}},Ni=async q=>{try{N(!0);const re=cs.filter(be=>be.primaryRole==="super_agent").map(be=>be.user_id);if(re.length===0){S({});return}let ce={};if(q==="all")try{const{data:be}=await ie.from("v_super_agent_token_usage").select("super_agent_id,total_tokens");for(const Ve of be||[]){const ot=String(Ve.super_agent_id||"");ot&&(ce[ot]=Number(Ve.total_tokens||0))}}catch{}else{const{start:be,end:Ve}=Za(q),{data:ot}=await ie.from("token_usage_logs").select("id,channel_id,total_tokens,made_at").gte("made_at",be).lt("made_at",Ve),ft=Array.from(new Set((ot||[]).map(tn=>tn.channel_id).filter(Boolean)));let ct={};if(ft.length>0){const{data:tn}=await ie.from("channels").select("id,super_agent_id").in("id",ft);ct=Object.fromEntries((tn||[]).map(ht=>[String(ht.id),String(ht.super_agent_id||"")]))}const at=new Set;for(const tn of ot||[]){const ht=String(tn.id);if(at.has(ht))continue;at.add(ht);const Bn=String(tn.channel_id||""),En=Bn&&ct[Bn]||"";En&&(ce[En]=(ce[En]||0)+Number(tn.total_tokens||0))}}const de={};for(const be of re)de[be]=ce[be]||0;S(de)}catch(re){V({title:"Error",description:(re==null?void 0:re.message)||"Failed to load usage",variant:"destructive"})}finally{N(!1)}};p.useEffect(()=>{Ae.length>0&&Ni(h)},[Ae,h]),p.useEffect(()=>{(async()=>{var q,re;try{const{data:ce}=await ie.auth.getUser();D(((q=ce==null?void 0:ce.user)==null?void 0:q.id)||null);try{const{data:de}=await ie.from("org_members").select("org_id").eq("user_id",((re=ce==null?void 0:ce.user)==null?void 0:re.id)||"").limit(1).maybeSingle();lt((de==null?void 0:de.org_id)||null)}catch{}}catch{}})()},[]),p.useEffect(()=>{A&&(_r({invited:!1,page:Te,pageSize:ut}),Z==="pending"&&_r({invited:!0,page:ze,pageSize:We}))},[A]);const ls=()=>G(er.MASTER_AGENT)?Ae:G(er.SUPER_AGENT)?A?Ae.filter(q=>q.primaryRole==="super_agent"&&q.user_id===A||q.primaryRole==="agent"&&q.super_agent_id===A):[]:[],cs=p.useMemo(()=>ls(),[Ae,G,A]),Ci=async q=>{l(q),s(!0),await Ao(q.user_id,g)},Ao=async(q,re)=>{var ce;try{w(!0);const{start:de,end:be}=Za(re),Ve=((ce=Ae.find(Pn=>Pn.user_id===q))==null?void 0:ce.super_agent_id)||null,ot=Ve?Ae.filter(Pn=>Pn.primaryRole==="agent"&&Pn.super_agent_id===Ve).map(Pn=>Pn.user_id):[q],{data:ft}=await ie.from("threads").select("id").in("assignee_user_id",ot).gte("created_at",de).lt("created_at",be),ct=(ft||[]).map(Pn=>Pn.id),[at,tn]=await Promise.all([ct.length>0?ie.from("token_usage_logs").select("id,total_tokens").in("thread_id",ct).gte("made_at",de).lt("made_at",be):Promise.resolve({data:[]}),ie.from("token_usage_logs").select("id,total_tokens").in("user_id",ot).gte("made_at",de).lt("made_at",be)]),ht=new Set;let Bn=0;for(const Pn of[...at.data||[],...tn.data||[]]){const Yn=String(Pn.id);ht.has(Yn)||(ht.add(Yn),Bn+=Number(Pn.total_tokens||0))}y(Bn);const[En,Dr,$r,ha]=await Promise.all([ie.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",de).lt("created_at",be).eq("assignee_user_id",q),ie.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",de).lt("created_at",be).eq("assigned_by_user_id",q),ie.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",de).lt("created_at",be).eq("resolved_by_user_id",q),ie.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",de).lt("created_at",be).eq("assignee_user_id",q).not("ai_handoff_at","is",null)]);j({assignedTo:En.count||0,assignedBy:Dr.count||0,resolvedBy:$r.count||0,handoverFromAI:ha.count||0})}catch(de){y(null),j(null),V({title:"Error",description:(de==null?void 0:de.message)||"Failed to load usage",variant:"destructive"})}finally{w(!1)}},Mr=async(q,re)=>{try{const{error:ce}=await ie.from("users_profile").update({is_active:re==="Active"}).eq("user_id",q);if(ce)throw ce;V({title:"Success",description:`Status changed to ${re}`}),await dn()}catch(ce){V({title:"Error",description:(ce==null?void 0:ce.message)||"Failed to change status",variant:"destructive"})}},Ai=q=>q.split(" ").map(re=>re[0]).join("").toUpperCase().slice(0,2),Ei=q=>q==="Active"?"bg-green-500":"bg-gray-400",M=q=>q==="master_agent"?"bg-blue-100 text-blue-700":q==="super_agent"?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-700";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Human Agent Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your human agents"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx(qe,{className:"text-sm text-muted-foreground",children:"Usage"}),i.jsxs(qt,{value:h,onValueChange:async q=>{const re=q;m(re);try{await Ni(re)}catch{}},children:[i.jsx(Lt,{className:"h-8 w-[160px] bg-background border",children:i.jsx(It,{placeholder:"Range"})}),i.jsxs(Ft,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"all",children:"All time"}),i.jsx(Ge,{value:"7d",children:"Last 7 days"}),i.jsx(Ge,{value:"30d",children:"Last 30 days"}),i.jsx(Ge,{value:"this_month",children:"This month"})]})]})]}),i.jsx(Wt,{permission:"users_profile.create",fallback:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("span",{children:i.jsxs(ne,{className:"gap-2 bg-blue-600 text-white",disabled:!0,children:[i.jsx(As,{className:"h-4 w-4"}),"Create Agent"]})})}),i.jsx(he,{children:i.jsx("p",{children:"You do not have permission to create agents."})})]}),children:i.jsxs(cn,{open:e,onOpenChange:t,children:[i.jsx(WN,{asChild:!0,children:i.jsxs(ne,{className:"gap-2 bg-blue-600 hover:bg-blue-700 text-white",children:[i.jsx(As,{className:"h-4 w-4"}),"Create Agent"]})}),i.jsxs(nn,{className:"sm:max-w-md bg-background border",children:[i.jsx(rn,{children:i.jsx(an,{children:"Create New Agent"})}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"agent-name",children:["Agent Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Je,{id:"agent-name",value:B.name,onChange:q=>E({...B,name:q.target.value}),placeholder:"Enter agent name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"agent-email",children:["Email ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Je,{id:"agent-email",type:"email",value:B.email,onChange:q=>E({...B,email:$Ie(q.target.value)}),onKeyDown:q=>{q.key===" "&&q.preventDefault()},placeholder:"Enter email address"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"agent-phone",children:"Phone (Optional)"}),i.jsx(Je,{id:"agent-phone",type:"tel",value:B.phone||"",onChange:q=>E({...B,phone:q.target.value}),placeholder:"Enter phone number"})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[i.jsx(vm,{id:"agent-2fa",checked:R,onCheckedChange:q=>P(!!q)}),i.jsx(qe,{htmlFor:"agent-2fa",className:"text-sm",children:"Enable email 2FA for this agent"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"agent-role",children:"Role"}),!G(er.MASTER_AGENT)&&i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Hanya Master Agent yang dapat membuat Super Agent"})})]})]}),i.jsxs(qt,{value:B.role,onValueChange:q=>E({...B,role:q}),children:[i.jsx(Lt,{className:"bg-background border",children:i.jsx(It,{})}),i.jsxs(Ft,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"agent",children:"Agent"}),G(er.MASTER_AGENT)&&i.jsx(Ge,{value:"super_agent",children:"Super Agent"})]})]})]}),B.role==="agent"&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{children:["Attach to Super Agent ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs(qt,{value:O||"",onValueChange:q=>F(q),children:[i.jsx(Lt,{className:"bg-background border",children:i.jsx(It,{placeholder:"Select Super Agent"})}),i.jsx(Ft,{className:"bg-background border z-50",children:Ae.filter(q=>q.primaryRole==="super_agent").map(q=>i.jsx(Ge,{value:q.user_id,children:q.display_name||q.email},q.user_id))})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Fields marked with ",i.jsx("span",{className:"text-red-500",children:"*"})," are required."]}),B.role==="agent"&&i.jsx("p",{className:"mt-1",children:"Agents must be attached to a Super Agent."})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(ne,{onClick:Rr,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",disabled:U||!Se,children:U?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(zt,{className:"h-4 w-4 animate-spin"}),"Creating..."]}):"Create Agent"}),i.jsx(ne,{variant:"outline",onClick:()=>t(!1),className:"flex-1",disabled:U,children:"Cancel"})]})]})]})]})})]})]}),i.jsxs("div",{className:"grid gap-3 rounded-lg border bg-card p-4 md:flex md:items-center md:justify-between",children:[i.jsxs("div",{className:"relative w-full md:w-64",children:[i.jsx(Ji,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Je,{value:mt,onChange:q=>en(q.target.value),placeholder:"Search name or email",className:"pl-9"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs(qt,{value:H,onValueChange:q=>we(q),children:[i.jsx(Lt,{className:"w-[150px] bg-background border",children:i.jsx(It,{placeholder:"Role"})}),i.jsxs(Ft,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"all",children:"All roles"}),i.jsx(Ge,{value:"master_agent",children:"Master Agent"}),i.jsx(Ge,{value:"super_agent",children:"Super Agent"}),i.jsx(Ge,{value:"agent",children:"Agent"})]})]}),Z==="pending"?i.jsxs(qt,{value:tt,onValueChange:q=>te(q),children:[i.jsx(Lt,{className:"w-[150px] bg-background border",children:i.jsx(It,{placeholder:"Invitation status"})}),i.jsxs(Ft,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"all",children:"All invitations"}),i.jsx(Ge,{value:"invited",children:"Invited"}),i.jsx(Ge,{value:"expired",children:"Expired"})]})]}):i.jsxs(qt,{value:ge,onValueChange:q=>Ue(q),children:[i.jsx(Lt,{className:"w-[150px] bg-background border",children:i.jsx(It,{placeholder:"Status"})}),i.jsxs(Ft,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"all",children:"All statuses"}),i.jsx(Ge,{value:"active",children:"Active"}),i.jsx(Ge,{value:"inactive",children:"Inactive"})]})]})]})]}),i.jsxs(bl,{value:Z,onValueChange:q=>Be(q),className:"space-y-6",children:[i.jsxs(vo,{className:"grid w-full max-w-md grid-cols-2",children:[i.jsxs(Vn,{value:"active",className:"gap-2",children:[i.jsx(cK,{className:"h-4 w-4"}),"Active"]}),i.jsxs(Vn,{value:"pending",className:"gap-2",children:[i.jsx(uK,{className:"h-4 w-4"}),"Pending"]})]}),i.jsx(In,{value:"active",className:"space-y-4",children:Ra(le,oe||dt,xe,Te,ut,Ee,ee,!1,xt)}),i.jsx(In,{value:"pending",className:"space-y-4",children:Ra(Q,De,fe,ze,We,gt,st,!0)})]}),i.jsx(cn,{open:C,onOpenChange:q=>{I||z(q)},children:i.jsxs(nn,{className:"sm:max-w-md bg-background border",children:[i.jsx(rn,{children:i.jsx(an,{children:"Delete Agent"})}),i.jsxs("div",{className:"space-y-3 py-2",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Are you sure you want to permanently delete ",(K==null?void 0:K.display_name)||"this agent","? This will remove their profile and role assignments. This action cannot be undone."]}),i.jsxs("div",{className:"rounded-md border p-3 bg-muted/30 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",(K==null?void 0:K.display_name)||""]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",(K==null?void 0:K.email)||""]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Role:"})," ",(K==null?void 0:K.primaryRole)||""]})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsx(ne,{variant:"destructive",className:"flex-1",onClick:()=>K&&sr(K.user_id),disabled:I,children:I?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(zt,{className:"h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"}),i.jsx(ne,{variant:"outline",className:"flex-1",onClick:()=>z(!1),disabled:I,children:"Cancel"})]})]})]})}),i.jsx(cn,{open:n,onOpenChange:r,children:i.jsxs(nn,{className:"sm:max-w-md bg-background border",children:[i.jsx(rn,{children:i.jsxs(an,{children:["Token Limits",o?`  ${o.display_name||o.email}`:""]})}),i.jsxs("div",{className:"space-y-4 py-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(qe,{className:"text-sm font-medium",children:"Enable Limits"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Block token-consuming actions when exceeded."})]}),i.jsx(kl,{checked:f.enabled,onCheckedChange:q=>d({...f,enabled:!!q})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(qe,{className:"text-sm font-medium",children:"Require Email 2FA"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"User must enter a one-time code at sign-in."})]}),i.jsx(kl,{checked:f.twoFA,onCheckedChange:q=>d({...f,twoFA:!!q})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"limit-day",children:"Max Tokens / Day"}),i.jsx(Je,{id:"limit-day",type:"number",min:0,placeholder:"0",value:f.perDay===0?"":f.perDay,onChange:q=>d({...f,perDay:Number(q.target.value||"0")})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"limit-month",children:"Max Tokens / Month"}),i.jsx(Je,{id:"limit-month",type:"number",min:0,placeholder:"0",value:f.perMonth===0?"":f.perMonth,onChange:q=>d({...f,perMonth:Number(q.target.value||"0")})})]})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{onClick:zl,disabled:c,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:"Save"})}),i.jsx(he,{children:i.jsx("p",{children:"Simpan batas token"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"})}),i.jsx(he,{children:i.jsx("p",{children:"Batal"})})]})]})]})]})}),i.jsx(cn,{open:a,onOpenChange:s,children:i.jsxs(nn,{className:"sm:max-w-md bg-background border",children:[i.jsx(rn,{children:i.jsxs(an,{children:["Token Usage",o?`  ${o.display_name||o.email}`:""]})}),i.jsxs("div",{className:"space-y-4 py-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{children:"Timeframe"}),i.jsxs(qt,{value:g,onValueChange:async q=>{const re=q;v(re),o&&await Ao(o.user_id,re)},children:[i.jsx(Lt,{className:"bg-background border",children:i.jsx(It,{})}),i.jsxs(Ft,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"7d",children:"Last 7 days"}),i.jsx(Ge,{value:"30d",children:"Last 30 days"}),i.jsx(Ge,{value:"this_month",children:"This month"})]})]})]}),i.jsxs("div",{className:"rounded-md border p-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tokens"}),i.jsx("div",{className:"text-2xl font-bold",children:b?"":(x==null?void 0:x.toLocaleString())??0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Assigned To Agent"}),i.jsx("div",{className:"text-xl font-semibold",children:(k==null?void 0:k.assignedTo)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Takeovers Initiated"}),i.jsx("div",{className:"text-xl font-semibold",children:(k==null?void 0:k.assignedBy)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Resolved by Agent"}),i.jsx("div",{className:"text-xl font-semibold",children:(k==null?void 0:k.resolvedBy)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"AIAgent Handovers"}),i.jsx("div",{className:"text-xl font-semibold",children:(k==null?void 0:k.handoverFromAI)??0})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"outline",onClick:()=>s(!1),children:"Close"})}),i.jsx(he,{children:i.jsx("p",{children:"Tutup"})})]})})]})]})})]})},FIe=e=>e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),FR=e=>e==="read_own"?"Own":e==="read_all"?"All":e==="read_channel_owned"?"My Channels":e==="read_collaborator"?"Collaborator":e==="read"?"Read":e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),BIe=({permissions:e,assignedPermissionIds:t,onToggle:n,isReadOnly:r=!1,className:a})=>{const[s,o]=p.useState(""),[l,c]=p.useState({}),[u,f]=p.useState(new Set),d=p.useMemo(()=>{const y={};return e.forEach(b=>{y[b.resource]||(y[b.resource]={}),y[b.resource][b.action]=b}),y},[e]),h=p.useMemo(()=>{const y=s.toLowerCase().trim();return y?Object.keys(qu).filter(b=>b.toLowerCase().includes(y)?!0:qu[b].some(k=>k.toLowerCase().includes(y))):Object.keys(qu)},[s]),m=async(y,b)=>{if(!(r||u.has(y)))try{f(w=>new Set(w).add(y)),await n(y,b)}catch(w){console.error("Failed to toggle permission",w)}finally{f(w=>{const k=new Set(w);return k.delete(y),k})}},g=async(y,b)=>{if(r||l[y])return;const w=b.map(_=>{var S;return(S=d[y])==null?void 0:S[_]}).filter(_=>!!_);if(w.length===0)return;const j=!w.every(_=>t.includes(_.id));c(_=>({..._,[y]:!0}));try{const _=b.filter(E=>E==="read"||E.startsWith("read_")),S=w.filter(E=>!_.includes(E.action)),T=w.filter(E=>_.includes(E.action)),A=["read_own","read_channel_owned","read_collaborator","read_all","read"].findLast(E=>T.some(R=>R.action===E))||null,D=[];if(j){for(const E of S)t.includes(E.id)||D.push(n(E.id,!0));for(const E of T){const R=A?E.action===A:!1;t.includes(E.id)!==R&&D.push(n(E.id,R))}}else for(const E of[...S,...T])t.includes(E.id)&&D.push(n(E.id,!1));const B=5;for(let E=0;E<D.length;E+=B)await Promise.all(D.slice(E,E+B))}catch(_){console.error(`Failed to bulk toggle for ${y}`,_)}finally{c(_=>({..._,[y]:!1}))}},v=(y,b,w,k=!1)=>{var A;const j=(A=d[y])==null?void 0:A[b];if(!j)return null;const _=t.includes(j.id),S=kee(b),T=u.has(j.id)||l[y],N=w||FR(b);return i.jsxs("div",{className:ke("flex items-center justify-between p-2 rounded-md transition-colors text-sm",_?"bg-primary/5":"hover:bg-muted/50",S&&_&&"bg-red-50 dark:bg-red-950/20"),children:[i.jsx("div",{className:"flex items-center gap-2 flex-1",children:i.jsxs(qe,{htmlFor:j.id,className:ke("cursor-pointer font-medium flex items-center gap-2",S?"text-red-600 dark:text-red-400":"text-foreground"),children:[N,S&&k&&i.jsx(Hs,{className:"h-3 w-3 text-red-500"})]})}),i.jsx(kl,{id:j.id,checked:_,onCheckedChange:D=>m(j.id,D),disabled:r||T,className:ke(S&&_&&"data-[state=checked]:bg-red-500")})]},b)},x=(y,b)=>{const w=b.filter(T=>T==="read"||T.startsWith("read_"));if(w.length===0)return null;const j=["read_own","read_channel_owned","read_collaborator","read_all","read"].filter(T=>w.includes(T)),_=j.findLast(T=>{var A,D;const N=(D=(A=d[y])==null?void 0:A[T])==null?void 0:D.id;return N?t.includes(N):!1})||null,S=async T=>{var A,D;if(r)return;const N=[];for(const B of j){const E=(A=d[y])==null?void 0:A[B];if(!E)continue;const R=t.includes(E.id),P=T===B;R!==P&&N.push(n(E.id,P))}if(T===null)for(const B of j){const E=(D=d[y])==null?void 0:D[B];if(!E)continue;t.includes(E.id)&&N.push(n(E.id,!1))}await Promise.all(N)};return i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"inline-flex flex-wrap items-center gap-1 rounded-md border p-1 bg-muted/30",children:[i.jsx(ne,{size:"sm",variant:_===null?"default":"ghost",className:ke("h-7 text-xs"),onClick:()=>S(null),disabled:r,children:"None"}),j.map(T=>{const N=FR(T),A=y==="threads"&&(T==="read_channel_owned"||T==="read_collaborator")||y==="messages"&&T==="read_collaborator",D=y==="threads"&&T==="read_channel_owned"?"Can view threads that belong to channels assigned to this agent.":y==="threads"&&T==="read_collaborator"?"Can view threads where the user is directly involved (assignee, creator, resolver, or collaborator).":y==="messages"&&T==="read_collaborator"?"Can view messages in threads where the user is involved as collaborator or assignee.":"",B=i.jsx(ne,{size:"sm",variant:_===T?"default":"ghost",className:ke("h-7 text-xs"),onClick:()=>S(T),disabled:r,children:N},T);return A?i.jsx(M1,{children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:B}),i.jsx(he,{side:"top",children:i.jsx("div",{className:"max-w-xs text-xs",children:D})})]})},T):B})]})})};return i.jsxs("div",{className:ke("space-y-6",a),children:[i.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur pb-4 pt-2",children:i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(Ji,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Je,{placeholder:"Search resources or actions...",value:s,onChange:y=>o(y.target.value),className:"pl-9 bg-background"})]})}),i.jsxs("div",{className:"columns-1 md:columns-2 xl:columns-3 gap-6 space-y-6",children:[h.map(y=>{const b=qu[y],w=b.map(D=>{var B;return(B=d[y])==null?void 0:B[D]}).filter(Boolean);if(w.length===0)return null;const k=w.every(D=>t.includes(D==null?void 0:D.id)),j=l[y],_=b.filter(D=>{const B=xw(D);return["create","update","delete"].includes(B)}),S=b.filter(D=>xw(D)==="read"),T=b.filter(D=>xw(D)==="special"),N=S.filter(D=>D==="read"||D.startsWith("read_")),A=S.filter(D=>!N.includes(D));return i.jsx("div",{className:"break-inside-avoid mb-6",children:i.jsxs(Oe,{className:ke("h-full border-t-4 shadow-sm",k?"border-t-primary":"border-t-muted"),children:[i.jsx(et,{className:"pb-3 bg-muted/30 pt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(Ze,{className:"text-base font-semibold flex items-center gap-2",children:[y==="security"?i.jsx(Zh,{className:"h-4 w-4 text-orange-500"}):y==="analytics"?i.jsx(Ji,{className:"h-4 w-4 text-blue-500"}):i.jsx(ao,{className:"h-4 w-4 text-muted-foreground"}),FIe(y)]}),!r&&i.jsx(ne,{variant:"ghost",size:"sm",className:"h-7 text-xs text-muted-foreground hover:text-primary",onClick:()=>g(y,b),disabled:j,children:j?"...":k?"Unselect All":"Select All"})]})}),i.jsxs(Qe,{className:"pt-4 space-y-4",children:[_.length>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Manage"}),i.jsx("div",{className:"grid gap-1",children:_.map(D=>v(y,D,y==="admin_panel"&&D==="update"?"Update Settings":void 0))})]}),S.length>0&&i.jsxs("div",{className:ke(_.length>0&&"pt-2 border-t"),children:[i.jsx("div",{className:"flex items-center justify-between mb-2 mt-2",children:i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider flex items-center gap-1",children:"Access Level"})}),N.length>0&&x(y,b),A.length>0&&i.jsx("div",{className:"mt-2 grid gap-1",children:A.map(D=>v(y,D))})]}),T.length>0&&i.jsxs("div",{className:ke((_.length>0||S.length>0)&&"pt-2 border-t"),children:[i.jsx("h4",{className:"text-xs font-semibold text-orange-600/80 dark:text-orange-400/80 uppercase tracking-wider mb-2 mt-2 flex items-center gap-1",children:"Special Actions"}),i.jsx("div",{className:"grid gap-1",children:T.map(D=>{const E=v(y,D,y==="alerts"&&D==="ack"?"Acknowledge":y==="messages"&&D==="send"?"Send":void 0,!0);return y==="alerts"&&D==="ack"&&E?i.jsx(M1,{children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("div",{children:E})}),i.jsx(he,{side:"top",children:i.jsx("div",{className:"max-w-xs text-xs",children:"Mark alerts as acknowledged on behalf of this role."})})]})},D):E})})]})]})]})},y)}),h.length===0&&i.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center border-2 border-dashed rounded-lg",children:[i.jsx(Ji,{className:"h-10 w-10 text-muted-foreground mb-3"}),i.jsx("h3",{className:"text-lg font-medium",children:"No matching permissions"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Try adjusting your search terms."})]})]})]})},UIe=()=>{const[e,t]=p.useState([]),[n,r]=p.useState([]),[a,s]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState(null),[f,d]=p.useState("roles"),{toast:h}=Yc(),{refreshRBAC:m,hasPermission:g,hasRole:v}=br(),[x,y]=p.useState({}),[b,w]=p.useState(!1),[k,j]=p.useState(null),[_,S]=p.useState(""),[T,N]=p.useState(""),[A,D]=p.useState(!1),[B,E]=p.useState(!1),[R,P]=p.useState(null),[U,L]=p.useState(!1),O=(c==null?void 0:c.name)==="master_agent",F=g("roles.create"),C=g("roles.update"),z=g("roles.delete"),I=g("roles.update"),$=g("roles.update"),K=async()=>{try{l(!0);const{data:J,error:fe}=await ie.from("roles").select("*").order("name");if(fe)throw fe;t(J||[]);const{data:Ce,error:Te}=await ie.from("permissions").select("*").order("resource",{ascending:!0});if(Te)throw Te;r(Ce||[]);const{data:Ee,error:ze}=await ie.from("role_permissions").select("*");if(ze)throw ze;s(Ee||[])}catch(J){console.error("Error fetching RBAC data:",J),h({title:"Error",description:"Failed to fetch permissions data",variant:"destructive"})}finally{l(!1)}};p.useEffect(()=>{K()},[]);const X=()=>{j(null),S(""),N(""),w(!0)},V=J=>{j(J),S(J.name),N(J.description),w(!0)},W=async()=>{try{if(D(!0),k){if(!C){h({title:"Forbidden",description:"You do not have permission to update roles",variant:"destructive"});return}const{error:J}=await ie.from("roles").update({name:_,description:T}).eq("id",k.id);if(J)throw J;try{await $t({action:"roles.update",resource:"roles",resourceId:k.id,context:{name:_}})}catch{}h({title:"Saved",description:"Role updated"})}else{if(!F){h({title:"Forbidden",description:"You do not have permission to create roles",variant:"destructive"});return}const{data:J,error:fe}=await ie.from("roles").insert([{name:_,description:T}]).select("id").single();if(fe)throw fe;try{await $t({action:"roles.create",resource:"roles",resourceId:(J==null?void 0:J.id)??null,context:{name:_}})}catch{}h({title:"Created",description:"Role created"})}w(!1),await K()}catch{h({title:"Error",description:"Failed to save role",variant:"destructive"})}finally{D(!1)}},ae=async J=>{try{if(!z){h({title:"Forbidden",description:"You do not have permission to delete roles",variant:"destructive"});return}y(Ce=>({...Ce,[J.id]:!0})),L(!0),await ie.from("role_permissions").delete().eq("role_id",J.id),await ie.from("user_roles").delete().eq("role_id",J.id);const{error:fe}=await ie.from("roles").delete().eq("id",J.id);if(fe)throw fe;try{await $t({action:"roles.delete",resource:"roles",resourceId:J.id})}catch{}h({title:"Deleted",description:"Role deleted"}),E(!1),P(null),await K()}catch{h({title:"Error",description:"Failed to delete role",variant:"destructive"})}finally{y(fe=>({...fe,[J.id]:!1})),L(!1)}},G=(J,fe)=>a.some(Ce=>Ce.role_id===J&&Ce.permission_id===fe),le=p.useRef(null),se=()=>{le.current&&clearTimeout(le.current),le.current=setTimeout(()=>{m().catch(()=>{})},250)},Q=async(J,fe)=>{try{const Ce=G(J,fe),Te=`${J}:${fe}`;if(y(Ee=>({...Ee,[Te]:!0})),Ce){if(!$){h({title:"Forbidden",description:"You do not have permission to revoke role permissions",variant:"destructive"});return}const{error:Ee}=await ie.rpc("revoke_role_permission",{p_role:J,p_perm:fe});if(Ee)throw Ee;s(ze=>ze.filter(gt=>!(gt.role_id===J&&gt.permission_id===fe)));try{await $t({action:"rbac.revoke",resource:"rbac",context:{role_id:J,permission_id:fe}})}catch{}}else{if(!I){h({title:"Forbidden",description:"You do not have permission to grant role permissions",variant:"destructive"});return}const{error:Ee}=await ie.rpc("grant_role_permission",{p_role:J,p_perm:fe});if(Ee)throw Ee;s(ze=>[...ze,{role_id:J,permission_id:fe}]);try{await $t({action:"rbac.grant",resource:"rbac",context:{role_id:J,permission_id:fe}})}catch{}}se(),h({title:"Success",description:`Permission ${Ce?"removed from":"added to"} role`})}catch(Ce){console.error("Error updating role permission:",Ce),h({title:"Error",description:"Failed to update permission",variant:"destructive"})}finally{const Ce=`${J}:${fe}`;y(Te=>({...Te,[Ce]:!1}))}},_e=J=>a.filter(Ce=>Ce.role_id===J).length,xe=J=>J.replace("_"," ").toUpperCase();return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Role Permissions"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage role permissions"})]}),i.jsx(Wt,{permission:"roles.create",children:i.jsxs(ne,{onClick:X,children:[i.jsx(As,{className:"h-4 w-4 mr-2"})," New Role"]})})]}),i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ao,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4 animate-pulse"}),i.jsx("p",{className:"text-muted-foreground",children:"Loading roles..."})]})})]}):f==="roles"?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Role Permissions"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage role permissions"})]}),i.jsxs(ne,{onClick:X,disabled:!F,title:F?void 0:"No permission: roles.create",children:[i.jsx(As,{className:"h-4 w-4 mr-2"})," New Role"]})]}),i.jsxs(Oe,{className:"pt-2",children:[i.jsxs(et,{children:[i.jsx(Ze,{children:"Roles"}),i.jsx(vi,{children:"Click on a role to manage its permissions"})]}),i.jsx(Qe,{children:i.jsxs(jb,{children:[i.jsx(_b,{children:i.jsxs(Qs,{children:[i.jsx(zn,{children:"Role Name"}),i.jsx(zn,{children:"Description"}),i.jsx(zn,{children:"Permissions"}),i.jsx(zn,{children:"Actions"})]})}),i.jsx(kb,{children:e.map(J=>i.jsxs(Qs,{children:[i.jsx(On,{className:"font-medium",children:i.jsx(vt,{variant:"outline",children:xe(J.name)})}),i.jsx(On,{children:J.description}),i.jsx(On,{children:i.jsxs(vt,{variant:"secondary",children:[_e(J.id)," permissions"]})}),i.jsx(On,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wt,{permission:"roles.read",children:i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{u(J),d("configure")},children:[i.jsx(ro,{className:"h-4 w-4 mr-2"}),"Configure"]})}),i.jsx(he,{children:i.jsx("p",{children:"Konfigurasi aturan akses untuk peran ini"})})]})}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Wt,{permission:"roles.update",children:i.jsx(ne,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>V(J),"aria-label":"Edit role",children:i.jsx(ya,{className:"h-4 w-4"})})})}),i.jsx(he,{children:i.jsx("p",{children:"Edit peran ini"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Wt,{permission:"roles.delete",children:i.jsx(ne,{size:"sm",onClick:()=>{P(J),E(!0)},disabled:!!x[J.id],className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white","aria-label":"Delete role",children:i.jsx(Ar,{className:"h-4 w-4"})})})}),i.jsx(he,{children:i.jsx("p",{children:"Hapus peran ini"})})]})]})})]},J.id))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Oe,{children:[i.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Ze,{className:"text-sm font-medium",children:"Total Roles"}),i.jsx(ao,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(Qe,{children:i.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),i.jsxs(Oe,{children:[i.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Ze,{className:"text-sm font-medium",children:"Total Permissions"}),i.jsx(ro,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(Qe,{children:i.jsx("div",{className:"text-2xl font-bold",children:n.length})})]}),i.jsxs(Oe,{children:[i.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Ze,{className:"text-sm font-medium",children:"Resources"}),i.jsx(ro,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Qe,{children:[i.jsx("div",{className:"text-2xl font-bold",children:new Set(n.map(J=>J.resource)).size}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique resources"})]})]})]}),i.jsx(Wt,{permission:"roles.update",children:i.jsx(cn,{open:b,onOpenChange:w,children:i.jsxs(nn,{children:[i.jsx(rn,{children:i.jsx(an,{children:k?"Edit Role":"Create Role"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(qe,{htmlFor:"rname",children:"Name"}),i.jsx(Je,{id:"rname",value:_,onChange:J=>S(J.target.value),placeholder:"e.g. Super Agent"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(qe,{htmlFor:"rdesc",children:"Description"}),i.jsx(Je,{id:"rdesc",value:T,onChange:J=>N(J.target.value),placeholder:"Optional"})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[i.jsx(ne,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),i.jsx(ne,{onClick:W,disabled:A||!_.trim()||(k?!C:!F),title:k?C?void 0:"No permission: roles.update":F?void 0:"No permission: roles.create",children:A?"Saving":"Save"})]})]})]})})}),i.jsx(Wt,{permission:"roles.delete",children:i.jsx(cn,{open:B,onOpenChange:E,children:i.jsxs(nn,{children:[i.jsxs(rn,{children:[i.jsx(an,{children:"Delete Role"}),i.jsxs(Er,{children:["This will permanently delete the role",R?` "${xe(R.name)}"`:""," and all its permissions."]})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[i.jsx(ne,{variant:"outline",onClick:()=>E(!1),disabled:U,children:"Cancel"}),i.jsx(ne,{variant:"destructive",onClick:()=>R&&ae(R),disabled:U||!z,title:z?void 0:"No permission: roles.delete",children:U?"Deleting":"Delete"})]})]})})})]}):f==="configure"&&c?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx(ne,{variant:"ghost",onClick:()=>d("roles"),className:"mb-2",children:" Back to Roles"}),i.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Configure ",xe(c.name)]}),i.jsx("p",{className:"text-muted-foreground",children:c.description})]})}),O&&i.jsx(Oe,{children:i.jsxs(et,{children:[i.jsx(Ze,{children:"Root Role"}),i.jsx(vi,{children:"Master Agent is a root role with full privileges across the system."})]})}),i.jsxs("div",{className:"py-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Full Permission Matrix"}),i.jsx(BIe,{permissions:n,assignedPermissionIds:a.filter(J=>J.role_id===c.id).map(J=>J.permission_id),onToggle:async(J,fe)=>{G(c.id,J)!==fe&&await Q(c.id,J)},isReadOnly:!I&&!$})]})]}):null},zIe={maxSize:100,dedupeWindow:1e3,batchWindow:100,maxBatchSize:10};class qIe{constructor(t={}){Mt(this,"queue",[]);Mt(this,"processing",!1);Mt(this,"pendingRequests",new Map);Mt(this,"config");this.config={...zIe,...t}}async enqueue(t,n={operation:"read"}){const{operation:r="read",endpoint:a,priority:s=0,dedupeKey:o}=n,l=o||this.generateDedupeKey(t,a),c=this.pendingRequests.get(l);if(c)return c;if(this.queue.length>=this.config.maxSize){this.queue.sort((g,v)=>v.priority-g.priority);const m=this.queue.pop();m&&m.reject(new Error("Request queue full"))}let u,f;const d=new Promise((m,g)=>{u=m,f=g});this.pendingRequests.set(l,d);const h={id:l,fn:t,priority:s,timestamp:Date.now(),operation:r,endpoint:a,resolve:u,reject:f};return this.queue.push(h),this.queue.sort((m,g)=>g.priority-m.priority),this.processQueue(),d.finally(()=>{this.pendingRequests.delete(l)}),d}async processQueue(){if(!(this.processing||this.queue.length===0)){this.processing=!0;try{for(;this.queue.length>0;){const t=this.getBatch();if(t.length===1){const n=t[0];try{const r=await n.fn();n.resolve(r)}catch(r){n.reject(r)}}else await Promise.allSettled(t.map(async n=>{try{const r=await n.fn();n.resolve(r)}catch(r){n.reject(r)}}))}}finally{this.processing=!1}}}getBatch(){if(this.queue.length===0)return[];const t=Date.now(),n=[],r=this.queue[0];for(let a=0;a<this.queue.length&&n.length<this.config.maxBatchSize;a++){const s=this.queue[a],o=t-s.timestamp;s.operation===r.operation&&o<=this.config.batchWindow&&(!r.endpoint||s.endpoint===r.endpoint)&&n.push(s)}return n.forEach(a=>{const s=this.queue.findIndex(o=>o.id===a.id);s>=0&&this.queue.splice(s,1)}),n}generateDedupeKey(t,n){return`${t.toString()}:${n||""}`.slice(0,100)}debounce(t,n=300,r={}){return new Promise((a,s)=>{let o=null,l=Date.now();const c=async()=>{try{const f=await this.enqueue(t,{...r,dedupeKey:`debounce:${r.endpoint||"default"}`});a(f)}catch(f){s(f)}},u=()=>{o&&clearTimeout(o),o=setTimeout(()=>{Date.now()-l>=n?c():u()},n)};u()})}getStats(){return{queueLength:this.queue.length,pendingRequests:this.pendingRequests.size,processing:this.processing}}clear(){this.queue.forEach(t=>{t.reject(new Error("Queue cleared"))}),this.queue=[],this.pendingRequests.clear()}}const BR=new qIe,UR=["#60a5fa","#2563eb","#1d4ed8","#10b981","#f59e0b","#ef4444"],ri=({label:e,description:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:t})})]})]});function WIe(){const[e,t]=p.useState(Gt.getStats()),[n,r]=p.useState(null),[a,s]=p.useState(BR.getStats()),[o,l]=p.useState(Xs.getStats()),[c,u]=p.useState(0),{hasPermission:f}=br(),[d,h]=p.useState(!1),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,b]=p.useState(!1),[w,k]=p.useState(!1),[j,_]=p.useState(!1),[S,T]=p.useState(!1),[N,A]=p.useState(!1),[D,B]=p.useState(""),[E,R]=p.useState(Gt.getConfig()),[P,U]=p.useState(Gt.getConfig()),[L,O]=p.useState(Tt.getConfig()),[F,C]=p.useState(Tt.getConfig()),z=H=>Number.isFinite(H)?H.toFixed(3).replace(/\.?0+$/,""):"",[I,$]=p.useState(()=>z(Tt.getConfig().minMultiplier)),[K,X]=p.useState(()=>z(Tt.getConfig().maxMultiplier)),[V,W]=p.useState({read:Tt.getMultiplier("read"),write:Tt.getMultiplier("write"),rpc:Tt.getMultiplier("rpc"),auth:Tt.getMultiplier("auth")});f("admin_panel.update"),p.useEffect(()=>{const H=setInterval(()=>{t(Gt.getStats()),s(BR.getStats()),l(Xs.getStats()),R(Gt.getConfig()),O(Tt.getConfig()),W({read:Tt.getMultiplier("read"),write:Tt.getMultiplier("write"),rpc:Tt.getMultiplier("rpc"),auth:Tt.getMultiplier("auth")})},1e3),we=()=>{t(Gt.getStats()),u(ge=>ge+1)};return Gt.on("stateChange",we),Gt.on("failure",we),Gt.on("success",we),ae(),()=>{clearInterval(H),Gt.off(we)}},[]);const ae=async()=>{try{const H=await OF();r(H)}catch(H){console.error("Failed to load metrics:",H)}},G=H=>{switch(H){case Xl.CLOSED:return"bg-green-100 text-green-800 border-green-200";case Xl.OPEN:return"bg-red-100 text-red-800 border-red-200";case Xl.HALF_OPEN:return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},le=H=>{switch(H){case Xl.CLOSED:return i.jsx(uh,{className:"h-5 w-5 text-green-600"});case Xl.OPEN:return i.jsx(Hs,{className:"h-5 w-5 text-red-600"});case Xl.HALF_OPEN:return i.jsx(mP,{className:"h-5 w-5 text-yellow-600"});default:return null}},se=()=>{h(!0)},Q=()=>{Gt.reset(),t(Gt.getStats()),u(H=>H+1),h(!1),B(" Circuit breaker berhasil direset!"),T(!0)},_e=()=>{g(!0)},xe=()=>{Gt.open(),t(Gt.getStats()),u(H=>H+1),g(!1),B(" Circuit breaker telah dibuka! Semua request database akan diblokir."),T(!0)},J=()=>{x(!0)},fe=async()=>{try{await cm.forceFlush(),x(!1),B(" Metrik berhasil dikirim ke database!"),T(!0)}catch(H){x(!1),B(" Gagal mengirim metrik: "+(H instanceof Error?H.message:"Unknown error")),A(!0)}},Ce=()=>{U(Gt.getConfig()),b(!0)},Te=()=>{Gt.updateConfig(P),R(Gt.getConfig()),b(!1),B(" Konfigurasi circuit breaker berhasil diperbarui!"),T(!0)},Ee=()=>{const H=Tt.getConfig();C(H),$(z(H.minMultiplier)),X(z(H.maxMultiplier)),k(!0)},ze=()=>{Tt.updateConfig(F),O(Tt.getConfig()),W({read:Tt.getMultiplier("read"),write:Tt.getMultiplier("write"),rpc:Tt.getMultiplier("rpc"),auth:Tt.getMultiplier("auth")}),k(!1),B(" Konfigurasi adaptive rate limiter berhasil diperbarui!"),T(!0)},gt=e.totalRequests>0?((e.totalRequests-e.failures)/e.totalRequests*100).toFixed(1):"0",ut=F.baseConfig.read.limit,ee=F.baseConfig.write.limit,We=F.baseConfig.rpc.limit,st=F.baseConfig.auth.limit,oe=F.minMultiplier,ve=F.maxMultiplier,De=F.healthyLatencyThreshold,Me=F.stressLatencyThreshold,Z=F.adjustmentInterval,Be=Number.isFinite(ut)&&ut>=10&&ut<=1e3,xt=Number.isFinite(ee)&&ee>=5&&ee<=500,yt=Number.isFinite(We)&&We>=5&&We<=200,He=Number.isFinite(st)&&st>=2&&st<=100,lt=Number.isFinite(oe)&&oe>=.1&&oe<=1,mt=Number.isFinite(ve)&&ve>=1&&ve<=5,en=Number.isFinite(De)&&De>=50&&De<=1e3,ue=Number.isFinite(Me)&&Me>=500&&Me<=1e4,Pe=Number.isFinite(Z)&&Z>=1e4&&Z<=6e5;return Array.from({length:10},(H,we)=>({time:new Date(Date.now()-(9-we)*6e4).toLocaleTimeString(),requests:Math.floor(Math.random()*50)+10,failures:Math.floor(Math.random()*5)})),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold",children:"Circuit Breaker Status"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor database protection and performance"})]}),i.jsxs(ne,{variant:"outline",size:"sm",onClick:ae,children:[i.jsx(Oy,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Circuit State",description:"Status circuit breaker saat ini: CLOSED (normal, semua request diizinkan), OPEN (terhenti, memblokir semua request untuk melindungi database), atau HALF_OPEN (testing, mencoba menghubungkan kembali)"})})}),i.jsxs(Qe,{children:[i.jsxs("div",{className:`flex items-center gap-3 px-3 py-2 rounded-md border ${G(e.state)}`,children:[le(e.state),i.jsx("span",{className:"font-semibold",children:e.state})]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Changed: ",new Date(e.stateChangedAt).toLocaleTimeString()]})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Success Rate",description:"Persentase request database yang berhasil dari total request. Indikator kesehatan sistem - semakin tinggi semakin baik. Nilai rendah menunjukkan masalah potensial dengan database atau koneksi"})})}),i.jsxs(Qe,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[gt,"%"]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.totalRequests-e.failures," / ",e.totalRequests," requests"]})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Total Requests",description:"Jumlah total request database yang telah diproses sejak circuit breaker diinisialisasi. Termasuk request yang berhasil dan gagal"})})}),i.jsxs(Qe,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:e.totalRequests.toLocaleString()}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.failures," failures, ",e.successes," successes"]})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Last Activity",description:"Waktu terakhir request database berhasil atau gagal. Membantu mengidentifikasi kapan masalah terakhir terjadi atau kapan sistem terakhir berfungsi normal"})})}),i.jsxs(Qe,{children:[i.jsx("div",{className:"text-sm",children:e.lastSuccessTime?i.jsxs("div",{children:[i.jsx("span",{className:"text-green-600",children:"Last Success:"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.lastSuccessTime).toLocaleTimeString()})]}):null}),i.jsx("div",{className:"text-sm mt-2",children:e.lastFailureTime?i.jsxs("div",{children:[i.jsx("span",{className:"text-red-600",children:"Last Failure:"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.lastFailureTime).toLocaleTimeString()})]}):null})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsxs(Ze,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(yP,{className:"h-4 w-4"}),i.jsx(ri,{label:"Request Queue",description:"Antrian request database yang menunggu untuk diproses. Membantu menangani beban tinggi dengan mengatur prioritas dan menghindari duplikasi request"})]})}),i.jsx(Qe,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Queue Length:",i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Jumlah total request dalam antrian, termasuk yang menunggu dan sedang diproses"})})]}),i.jsx("span",{className:"font-semibold",children:a.queueLength})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Pending Requests:",i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Jumlah request yang menunggu untuk diproses, belum dieksekusi"})})]}),i.jsx("span",{className:"font-semibold",children:a.pendingRequests})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Processing:",i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Status apakah queue sedang memproses request atau idle"})})]}),i.jsx(vt,{variant:a.processing?"default":"secondary",children:a.processing?"Yes":"No"})]})]})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsxs(Ze,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ao,{className:"h-4 w-4"}),i.jsx(ri,{label:"Rate Limiter (Adaptive)",description:"Sistem pembatas kecepatan request adaptif yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem. Melindungi database dari traffic spike dan overload"})]})}),i.jsxs(Qe,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Reads Limit:",i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(he,{children:i.jsxs("p",{children:["Batas maksimal request baca data per menit (dinamis: ",Tt.getEffectiveLimit("read")," request/menit, ",(V.read*100).toFixed(0),"% dari base ",L.baseConfig.read.limit,"). Limit menyesuaikan otomatis berdasarkan kondisi sistem"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Tt.getEffectiveLimit("read"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(V.read*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Writes Limit:",i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(he,{children:i.jsxs("p",{children:["Batas maksimal request tulis data per menit (dinamis: ",Tt.getEffectiveLimit("write")," request/menit, ",(V.write*100).toFixed(0),"% dari base ",L.baseConfig.write.limit,"). Lebih ketat dari reads karena write lebih berisiko terhadap database"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Tt.getEffectiveLimit("write"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(V.write*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["RPC Limit:",i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(he,{children:i.jsxs("p",{children:["Batas maksimal panggilan fungsi database (RPC) per menit (dinamis: ",Tt.getEffectiveLimit("rpc")," request/menit, ",(V.rpc*100).toFixed(0),"% dari base ",L.baseConfig.rpc.limit,"). Fungsi database biasanya lebih berat dari query biasa"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Tt.getEffectiveLimit("rpc"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(V.rpc*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Auth Limit:",i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(he,{children:i.jsxs("p",{children:["Batas maksimal operasi autentikasi per menit (dinamis: ",Tt.getEffectiveLimit("auth")," request/menit, ",(V.auth*100).toFixed(0),"% dari base ",L.baseConfig.auth.limit,")"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Tt.getEffectiveLimit("auth"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(V.auth*100).toFixed(0),"%)"]})]})]})]}),i.jsx("div",{className:"mt-3 pt-3 border-t text-xs text-muted-foreground",children:i.jsx("p",{children:" Limit berubah otomatis berdasarkan response time dan error rate sistem"})})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsxs(Ze,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(nw,{className:"h-4 w-4"}),i.jsx(ri,{label:"Cache",description:"Sistem penyimpanan sementara untuk hasil query database. Mengurangi beban database dengan menyimpan hasil yang sering digunakan dan meningkatkan kecepatan response"})]})}),i.jsx(Qe,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Cached Entries:",i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Jumlah hasil query yang saat ini tersimpan di cache. Semakin banyak semakin baik untuk performa, selama tidak melebihi batas maksimal"})})]}),i.jsx("span",{className:"font-semibold",children:o.size})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Max Size:",i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(he,{children:i.jsx("p",{children:"Batas maksimal jumlah entry yang bisa disimpan di cache. Setelah mencapai limit, entry lama akan dihapus (LRU policy)"})})]}),i.jsx("span",{className:"font-semibold",children:o.maxSize})]}),i.jsx(ne,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>{Xs.clear(),l(Xs.getStats())},children:"Clear Cache"})]})})]})]}),n&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Operations by Type",description:"Distribusi operasi database berdasarkan jenis (read, write, RPC, auth). Membantu memahami pola penggunaan database dan mengidentifikasi jenis operasi yang paling banyak digunakan"})})}),i.jsx(Qe,{className:"h-64",children:i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:Object.entries(n.operationsByType||{}).map(([H,we])=>({type:H,count:we})),children:[i.jsx(Ek,{strokeDasharray:"3 3"}),i.jsx(ta,{dataKey:"type"}),i.jsx(na,{}),i.jsx(Xn,{}),i.jsx(Dn,{dataKey:"count",fill:UR[1]})]})})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Circuit Breaker States",description:"Distribusi status circuit breaker saat operasi database dilakukan. Menunjukkan berapa banyak operasi yang terjadi pada setiap state (CLOSED, OPEN, HALF_OPEN)"})})}),i.jsx(Qe,{className:"h-64",children:i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:Object.entries(n.circuitBreakerStates||{}).map(([H,we])=>({state:H,count:we})),children:[i.jsx(Ek,{strokeDasharray:"3 3"}),i.jsx(ta,{dataKey:"state"}),i.jsx(na,{}),i.jsx(Xn,{}),i.jsx(Dn,{dataKey:"count",fill:UR[3]})]})})})]})]}),i.jsxs(Wt,{permission:"admin_panel.update",children:[i.jsxs(Oe,{className:"mb-4",children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Ze,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Limit Configuration",description:"Konfigurasi threshold dan timeout untuk circuit breaker. Klik Edit untuk mengubah nilai-nilai ini"})}),i.jsxs(ne,{variant:"outline",size:"sm",onClick:Ce,children:[i.jsx(ya,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),i.jsx(Qe,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Failure Threshold"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsxs("p",{children:["Buka circuit setelah ",E.failureThreshold," kegagalan"]})})]})]}),i.jsx(Je,{value:E.failureThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Buka circuit setelah ",E.failureThreshold," kegagalan"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Reset Timeout (ms)"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsxs("p",{children:["Tunggu ",(E.resetTimeout/1e3).toFixed(0),"s sebelum uji pemulihan"]})})]})]}),i.jsx(Je,{value:E.resetTimeout,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tunggu ",(E.resetTimeout/1e3).toFixed(0),"s sebelum uji pemulihan"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Success Threshold"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsxs("p",{children:["Tutup circuit setelah ",E.successThreshold," sukses"]})})]})]}),i.jsx(Je,{value:E.successThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tutup circuit setelah ",E.successThreshold," sukses"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Monitoring Period (ms)"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsxs("p",{children:["Jendela waktu: ",(E.monitoringPeriod/1e3).toFixed(0),"s"]})})]})]}),i.jsx(Je,{value:E.monitoringPeriod,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Jendela waktu: ",(E.monitoringPeriod/1e3).toFixed(0),"s"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Request Timeout (ms)"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsxs("p",{children:["Timeout request: ",(E.timeout/1e3).toFixed(0),"s"]})})]})]}),i.jsx(Je,{value:E.timeout,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Timeout request: ",(E.timeout/1e3).toFixed(0),"s"]})]})]})})]}),i.jsxs(Oe,{className:"mb-4",children:[i.jsx(et,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Ze,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Adaptive Rate Limiter Configuration",description:"Konfigurasi untuk adaptive rate limiter yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem. Menangani traffic spike dengan lebih baik"})}),i.jsxs(ne,{variant:"outline",size:"sm",onClick:Ee,children:[i.jsx(ya,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),i.jsxs(Qe,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Reads Base Limit"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Limit dasar untuk operasi read. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Je,{value:L.baseConfig.read.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Tt.getEffectiveLimit("read"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(V.read*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Writes Base Limit"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Limit dasar untuk operasi write. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Je,{value:L.baseConfig.write.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Tt.getEffectiveLimit("write"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(V.write*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"RPC Base Limit"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Limit dasar untuk operasi RPC. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Je,{value:L.baseConfig.rpc.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Tt.getEffectiveLimit("rpc"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(V.rpc*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Auth Base Limit"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Limit dasar untuk operasi autentikasi. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Je,{value:L.baseConfig.auth.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Tt.getEffectiveLimit("auth"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(V.auth*100).toFixed(0),"%)"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 pt-4 border-t",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Min Multiplier"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Multiplier minimum (misal: 0.5 = 50% dari base limit). Digunakan saat sistem dalam kondisi stres"})})]})]}),i.jsx(Je,{value:L.minMultiplier,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Minimum: ",(L.minMultiplier*100).toFixed(0),"% dari base"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Max Multiplier"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Multiplier maksimum (misal: 2.0 = 200% dari base limit). Digunakan saat sistem dalam kondisi sehat"})})]})]}),i.jsx(Je,{value:L.maxMultiplier,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum: ",(L.maxMultiplier*100).toFixed(0),"% dari base"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Healthy Latency Threshold (ms)"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Response time di bawah ini dianggap sehat. Sistem akan meningkatkan limit (min: 50ms, max: 1000ms)"})})]})]}),i.jsx(Je,{value:L.healthyLatencyThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(L.healthyLatencyThreshold/1e3).toFixed(1)," seconds"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Stress Latency Threshold (ms)"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Response time di atas ini dianggap stres. Sistem akan menurunkan limit (min: 500ms, max: 10000ms)"})})]})]}),i.jsx(Je,{value:L.stressLatencyThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(L.stressLatencyThreshold/1e3).toFixed(1)," seconds"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Adjustment Interval (ms)"}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Frekuensi pengecekan dan penyesuaian limit (dalam milliseconds)"})})]})]}),i.jsx(Je,{value:L.adjustmentInterval,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Setiap ",(L.adjustmentInterval/1e3).toFixed(0)," detik"]})]})]}),i.jsx("div",{className:"mt-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:[" ",i.jsx("strong",{children:"Status:"})," Adaptive rate limiter aktif dan melindungi database. Limit akan otomatis menyesuaikan berdasarkan metrik sistem (response time, error rate)."]})})]})]}),i.jsx(Oe,{className:"mb-4 bg-blue-50 dark:bg-blue-950/10 border-blue-200 dark:border-blue-800",children:i.jsx(et,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs(Ze,{className:"text-sm font-medium flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[i.jsx(dv,{className:"h-5 w-5"}),"Dokumentasi Circuit Breaker"]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pelajari cara kerja circuit breaker dan apa yang harus dilakukan jika terjadi masalah"})]}),i.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>_(!0),children:[i.jsx(dv,{className:"h-4 w-4 mr-2"}),"Lihat Dokumentasi Circuit Breaker"]})]})})}),i.jsxs(Oe,{className:"border-red-200 dark:border-red-800",children:[i.jsx(et,{children:i.jsxs(Ze,{className:"text-sm font-medium flex items-center gap-2 text-red-600 dark:text-red-400",children:[i.jsx(GL,{className:"h-5 w-5"}),i.jsx(ri,{label:"Danger Zone",description:"Tindakan berbahaya yang dapat mempengaruhi seluruh aplikasi. Gunakan dengan sangat hati-hati!"})]})}),i.jsxs(Qe,{children:[i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"outline",onClick:se,children:"Reset Circuit Breaker"})}),i.jsx(he,{children:i.jsx("p",{children:"Reset semua statistik dan state circuit breaker ke kondisi awal. Menghapus riwayat kegagalan dan mengembalikan state ke CLOSED"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"destructive",onClick:_e,children:"Manually Open Circuit"})}),i.jsx(he,{children:i.jsx("p",{children:"Paksa buka circuit breaker secara manual. Akan MEMBLOKIR SEMUA REQUEST DATABASE dan menyebabkan aplikasi berhenti berfungsi. Gunakan hanya dalam keadaan darurat!"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(ne,{variant:"outline",onClick:J,children:"Flush Metrics"})}),i.jsx(he,{children:i.jsx("p",{children:"Kirim semua metrik yang tertunda ke database secara paksa. Tidak berbahaya, hanya memperbarui data metrik di Supabase"})})]})]}),i.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-red-700 dark:text-red-300 font-semibold",children:[" ",i.jsx("strong",{children:"PERINGATAN KRITIS:"})," Tindakan di zona ini dapat menghentikan seluruh aplikasi dan memblokir semua operasi database. Gunakan dengan sangat hati-hati dan hanya jika benar-benar diperlukan!"]})})]})]})]}),i.jsx(cn,{open:d,onOpenChange:h,children:i.jsxs(nn,{className:"max-w-md",children:[i.jsxs(rn,{children:[i.jsxs(an,{className:"flex items-center gap-2",children:[i.jsx(Hs,{className:"h-5 w-5 text-orange-500"}),"Reset Circuit Breaker"]}),i.jsx(Er,{children:"Apakah Anda yakin ingin mereset circuit breaker?"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-orange-800 dark:text-orange-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-orange-700 dark:text-orange-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Menghapus semua statistik circuit breaker"}),i.jsx("li",{children:"Mereset state ke CLOSED"}),i.jsx("li",{children:"Menghapus riwayat kegagalan"})]}),i.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-3 font-semibold",children:" Tindakan ini TIDAK DAPAT DIBATALKAN!"})]})}),i.jsxs(va,{children:[i.jsx(ne,{variant:"outline",onClick:()=>h(!1),children:"Batal"}),i.jsx(ne,{variant:"default",onClick:Q,children:"Reset"})]})]})}),i.jsx(cn,{open:m,onOpenChange:g,children:i.jsxs(nn,{className:"max-w-md",children:[i.jsxs(rn,{children:[i.jsxs(an,{className:"flex items-center gap-2",children:[i.jsx(Hs,{className:"h-5 w-5 text-red-500"}),"Buka Circuit Breaker Secara Manual"]}),i.jsx(Er,{children:"PERINGATAN KRITIS: Tindakan ini sangat berbahaya!"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-red-800 dark:text-red-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-red-700 dark:text-red-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:i.jsx("strong",{children:"MENGHENTIKAN SEMUA REQUEST DATABASE"})}),i.jsx("li",{children:"Memblokir semua operasi aplikasi"}),i.jsx("li",{children:"Menyebabkan error pada semua fitur yang membutuhkan database"})]}),i.jsxs("div",{className:"mt-3 bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded p-2",children:[i.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 font-semibold",children:" APLIKASI AKAN BERHENTI BERFUNGSI!"}),i.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"Gunakan hanya dalam keadaan darurat atau untuk testing."})]})]})}),i.jsxs(va,{children:[i.jsx(ne,{variant:"outline",onClick:()=>g(!1),children:"Batal"}),i.jsx(ne,{variant:"destructive",onClick:xe,children:"Buka Circuit"})]})]})}),i.jsx(cn,{open:v,onOpenChange:x,children:i.jsxs(nn,{className:"max-w-md",children:[i.jsxs(rn,{children:[i.jsxs(an,{className:"flex items-center gap-2",children:[i.jsx(nw,{className:"h-5 w-5 text-blue-500"}),"Kirim Metrik ke Database"]}),i.jsx(Er,{children:"Apakah Anda yakin ingin mengirim semua metrik yang tertunda?"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-blue-800 dark:text-blue-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Mengirim semua metrik yang tersimpan di memori ke Supabase"}),i.jsx("li",{children:"Memperbarui tabel circuit_breaker_metrics"}),i.jsx("li",{children:"Menghapus metrik dari antrian lokal"})]})]})}),i.jsxs(va,{children:[i.jsx(ne,{variant:"outline",onClick:()=>x(!1),children:"Batal"}),i.jsx(ne,{variant:"default",onClick:fe,children:"Kirim Metrik"})]})]})}),i.jsx(cn,{open:S,onOpenChange:T,children:i.jsxs(nn,{className:"max-w-md",children:[i.jsx(rn,{children:i.jsxs(an,{className:"flex items-center gap-2",children:[i.jsx(uh,{className:"h-5 w-5 text-green-500"}),"Berhasil"]})}),i.jsx("div",{className:"py-4",children:i.jsx("p",{className:"text-sm",children:D})}),i.jsx(va,{children:i.jsx(ne,{variant:"default",onClick:()=>T(!1),children:"Tutup"})})]})}),i.jsx(cn,{open:j,onOpenChange:_,children:i.jsxs(nn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(rn,{children:[i.jsxs(an,{className:"flex items-center gap-2",children:[i.jsx(dv,{className:"h-5 w-5 text-blue-500"}),"Dokumentasi Circuit Breaker"]}),i.jsx(Er,{children:"Panduan lengkap tentang cara kerja circuit breaker dan langkah-langkah troubleshooting"})]}),i.jsxs("div",{className:"py-4 space-y-6",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ao,{className:"h-5 w-5 text-blue-600"}),"Apa itu Circuit Breaker?"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-2",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Circuit Breaker"})," adalah mekanisme perlindungan yang mencegah kegagalan sistem database merambat ke seluruh aplikasi. Seperti sekring listrik, circuit breaker akan memutuskan koneksi sementara ketika mendeteksi terlalu banyak kegagalan, sehingga memberikan waktu untuk sistem pulih dan mencegah beban berlebih."]}),i.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"Melindungi database dari beban berlebih dan kegagalan cascade"}),i.jsx("li",{children:"Mengurangi risiko aplikasi crash saat database bermasalah"}),i.jsx("li",{children:"Memberikan waktu recovery otomatis untuk sistem"}),i.jsx("li",{children:"Monitoring dan pelaporan metrik untuk analisis"})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ya,{className:"h-5 w-5 text-blue-600"}),"Penjelasan Detail Setiap Input Circuit Breaker"]}),i.jsx("div",{className:"space-y-4",children:i.jsx("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:i.jsxs("div",{className:"text-sm space-y-4 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"1. Failure Threshold (Ambang Kegagalan)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jumlah maksimal kegagalan yang dapat terjadi dalam jendela waktu monitoring sebelum circuit breaker terbuka (OPEN)."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Failure Threshold: ",E.failureThreshold]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 5 kegagalan (range: 1 - 100)",i.jsx("br",{})," Sistem akan menghitung jumlah kegagalan dalam jendela waktu ",(E.monitoringPeriod/1e3).toFixed(0)," detik",i.jsx("br",{})," Jika mencapai ",E.failureThreshold," kegagalan atau lebih  Circuit breaker akan ",i.jsx("strong",{children:"OPEN"})," (blokir semua request)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah kegagalan cascade dengan memblokir request sebelum sistem benar-benar crash",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu rendah (1-3): Circuit breaker terlalu sensitif, sering terbuka karena error sementara",i.jsx("br",{}),"- Nilai terlalu tinggi (20+): Circuit breaker kurang responsif, database bisa overload sebelum terbuka",i.jsx("br",{}),"- Rekomendasi: 5-10 untuk aplikasi production, 3-5 untuk aplikasi kritis",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Jika threshold = ",E.failureThreshold,", dan terjadi ",E.failureThreshold," timeout/error dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik terakhir  Circuit OPEN"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"2. Reset Timeout (Waktu Tunggu Reset)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Waktu yang harus ditunggu setelah circuit breaker OPEN sebelum mencoba uji pemulihan (transisi ke HALF_OPEN)."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Reset Timeout: ",(E.resetTimeout/1e3).toFixed(0)," detik (",E.resetTimeout,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 30 detik (30000ms, range: 5s - 600s)",i.jsx("br",{})," Setelah circuit OPEN, sistem akan menunggu ",E.resetTimeout/1e3," detik sebelum mencoba uji pemulihan",i.jsx("br",{})," Setelah timeout, circuit breaker akan transisi ke ",i.jsx("strong",{children:"HALF_OPEN"})," (mengizinkan beberapa request terbatas untuk testing)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memberi waktu database untuk recovery sebelum mengizinkan request lagi",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (5-10s): Tidak cukup waktu untuk recovery, circuit langsung terbuka lagi",i.jsx("br",{}),"- Nilai terlalu panjang (300s+): Aplikasi terlalu lama tidak bisa digunakan",i.jsx("br",{}),"- Rekomendasi: 30-60 detik untuk masalah network sementara, 60-120 detik untuk masalah database serius",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Circuit OPEN  Tunggu ",E.resetTimeout/1e3," detik  Uji dengan ",E.successThreshold," request terbatas  Jika semua sukses, kembali CLOSED"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"3. Success Threshold (Ambang Keberhasilan)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jumlah minimal request yang harus berhasil berturut-turut dalam fase HALF_OPEN sebelum circuit breaker kembali CLOSED."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Success Threshold: ",E.successThreshold]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 2 sukses berturut-turut (range: 1 - 10)",i.jsx("br",{})," Setelah circuit HALF_OPEN (uji pemulihan), sistem akan mengizinkan beberapa request terbatas",i.jsx("br",{})," Jika ",E.successThreshold," request berhasil berturut-turut  Circuit breaker akan ",i.jsx("strong",{children:"CLOSED"})," (kembali normal)",i.jsx("br",{})," Jika ada 1 request gagal  Circuit breaker kembali ",i.jsx("strong",{children:"OPEN"})," (tunggu reset timeout lagi)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memastikan sistem benar-benar pulih sebelum mengizinkan semua request",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu rendah (1): Terlalu mudah kembali CLOSED, bisa langsung OPEN lagi",i.jsx("br",{}),"- Nilai terlalu tinggi (5+): Terlalu lama di HALF_OPEN, memperlambat recovery",i.jsx("br",{}),"- Rekomendasi: 2-3 untuk aplikasi production",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Circuit HALF_OPEN  Request 1 sukses  Request 2 sukses (",E.successThreshold," tercapai)  Circuit CLOSED"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"4. Monitoring Period (Jendela Waktu Monitoring)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jendela waktu (sliding window) untuk menghitung jumlah kegagalan. Hanya kegagalan dalam jendela waktu ini yang dihitung untuk menentukan apakah circuit harus terbuka."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Monitoring Period: ",(E.monitoringPeriod/1e3).toFixed(0)," detik (",E.monitoringPeriod,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 10 detik (10000ms, range: 5s - 300s)",i.jsx("br",{})," Sistem hanya menghitung kegagalan yang terjadi dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik terakhir",i.jsx("br",{})," Kegagalan yang lebih lama dari ",(E.monitoringPeriod/1e3).toFixed(0)," detik tidak dihitung (expired)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah kegagalan lama mempengaruhi keputusan saat ini, fokus pada kondisi terbaru",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (5s): Terlalu fokus pada kondisi saat ini, tidak melihat tren",i.jsx("br",{}),"- Nilai terlalu panjang (60s+): Kegagalan lama masih mempengaruhi, recovery lebih lambat",i.jsx("br",{}),"- Rekomendasi: 10-30 detik untuk balance antara responsivitas dan stabilitas",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Jika monitoring period = ",(E.monitoringPeriod/1e3).toFixed(0),"s, dan terjadi ",E.failureThreshold," kegagalan dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik terakhir  Circuit OPEN. Kegagalan yang lebih dari ",(E.monitoringPeriod/1e3).toFixed(0)," detik tidak dihitung."]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"5. Request Timeout (Waktu Maksimal Request)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Waktu maksimal yang diizinkan untuk setiap request database. Request yang melebihi timeout ini akan dianggap gagal dan dibatalkan."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Request Timeout: ",(E.timeout/1e3).toFixed(0)," detik (",E.timeout,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 10 detik (10000ms, range: 1s - 60s)",i.jsx("br",{})," Setiap request database akan dibatalkan jika melebihi ",(E.timeout/1e3).toFixed(0)," detik dan dianggap gagal",i.jsx("br",{})," Timeout ini diterapkan sebelum request mencapai database (client-side timeout)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah request yang hang/tidak merespons menumpuk dan membebani sistem",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (1-3s): Request normal bisa dianggap gagal, false positive tinggi",i.jsx("br",{}),"- Nilai terlalu panjang (30s+): Request hang akan menunggu terlalu lama, resource terbuang",i.jsx("br",{}),"- Rekomendasi:",i.jsx("br",{})," Read queries: 5-10 detik",i.jsx("br",{})," Write queries: 10-15 detik",i.jsx("br",{})," RPC/complex queries: 15-30 detik",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Request dimulai  Jika belum selesai dalam ",(E.timeout/1e3).toFixed(0)," detik  Request dibatalkan  Dianggap gagal  Dihitung untuk failure threshold"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"6. Cara Kerja Bersama-Sama"}),i.jsx("p",{className:"mt-1 mb-2",children:"Semua parameter ini bekerja bersama untuk melindungi database dengan cara yang terkoordinasi."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{className:"text-xs space-y-2",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Alur Lengkap:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Request masuk  Sistem cek ",i.jsx("strong",{children:"Request Timeout"})," (max ",(E.timeout/1e3).toFixed(0),"s)"]}),i.jsx("li",{children:"Request dieksekusi  Jika melebihi timeout  Dianggap gagal"}),i.jsxs("li",{children:["Kegagalan dicatat dalam ",i.jsx("strong",{children:"Monitoring Period"})," (",(E.monitoringPeriod/1e3).toFixed(0),"s terakhir)"]}),i.jsx("li",{children:"Sistem hitung total kegagalan dalam jendela waktu"}),i.jsxs("li",{children:["Jika mencapai ",i.jsx("strong",{children:"Failure Threshold"})," (",E.failureThreshold," kegagalan)  Circuit OPEN"]}),i.jsxs("li",{children:["Tunggu ",i.jsx("strong",{children:"Reset Timeout"})," (",(E.resetTimeout/1e3).toFixed(0),"s)  Transisi ke HALF_OPEN"]}),i.jsxs("li",{children:["Uji dengan beberapa request  Jika ",i.jsx("strong",{children:"Success Threshold"})," (",E.successThreshold," sukses) tercapai  CLOSED"]}),i.jsx("li",{children:"Jika gagal dalam HALF_OPEN  Kembali OPEN, tunggu reset timeout lagi"})]})]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-green-700 dark:text-green-300",children:[i.jsx("strong",{children:" Contoh Skenario:"}),i.jsx("br",{}),"1. 5 request gagal (timeout) dalam 10 detik  Threshold tercapai (",E.failureThreshold,")",i.jsx("br",{}),"2. Circuit OPEN  Semua request diblokir",i.jsx("br",{}),"3. Tunggu ",E.resetTimeout/1e3," detik  Database punya waktu recovery",i.jsx("br",{}),"4. Circuit HALF_OPEN  Uji dengan 2 request",i.jsx("br",{}),"5. Kedua request sukses (",E.successThreshold,")  Circuit CLOSED  Kembali normal"]})})]})})]})]})})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(yP,{className:"h-5 w-5 text-blue-600"}),"Bagaimana Circuit Breaker Bekerja?"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-blue-800 dark:text-blue-200",children:"Tiga Status Circuit Breaker:"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(uh,{className:"h-5 w-5 text-green-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"CLOSED (Tertutup)"}),i.jsx("p",{className:"text-muted-foreground",children:"Status normal. Semua request database diizinkan. Circuit breaker memantau setiap request dan menghitung kegagalan dalam jendela waktu tertentu."})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Hs,{className:"h-5 w-5 text-red-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-red-700 dark:text-red-300",children:"OPEN (Terbuka)"}),i.jsxs("p",{className:"text-muted-foreground",children:["Circuit breaker mendeteksi terlalu banyak kegagalan ( ",E.failureThreshold," dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik). Semua request database diblokir untuk melindungi sistem. Status ini akan bertahan selama ",E.resetTimeout/1e3," detik sebelum mencoba uji pemulihan."]})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(mP,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-yellow-700 dark:text-yellow-300",children:"HALF_OPEN (Setengah Terbuka)"}),i.jsxs("p",{className:"text-muted-foreground",children:["Fase uji pemulihan. Setelah ",E.resetTimeout/1e3," detik di status OPEN, circuit breaker mengizinkan beberapa request terbatas untuk mengecek apakah sistem sudah pulih. Jika ",E.successThreshold," request berhasil berturut-turut, kembali ke CLOSED. Jika gagal, kembali ke OPEN."]})]})]})]})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-purple-800 dark:text-purple-200",children:"Alur Kerja:"}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"1."}),i.jsx("span",{children:"Request database masuk  Circuit breaker memeriksa status"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"2."}),i.jsx("span",{children:"Jika CLOSED  Request diizinkan dan dimonitor"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"3."}),i.jsxs("span",{children:["Jika terjadi kegagalan  Dihitung dalam jendela waktu ",(E.monitoringPeriod/1e3).toFixed(0)," detik"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"4."}),i.jsxs("span",{children:["Jika  ",E.failureThreshold," kegagalan  Beralih ke OPEN (blokir semua request)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"5."}),i.jsxs("span",{children:["Tunggu ",E.resetTimeout/1e3," detik  Beralih ke HALF_OPEN (uji pemulihan)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"6."}),i.jsxs("span",{children:["Jika ",E.successThreshold," sukses  Kembali ke CLOSED. Jika gagal  Kembali ke OPEN"]})]})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Hs,{className:"h-5 w-5 text-orange-600"}),"Apa yang Harus Dilakukan Jika Circuit Breaker Terbuka (OPEN)?"]}),i.jsx("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 space-y-3",children:i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"1. Jangan Panik - Ini Tindakan Perlindungan Otomatis"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Circuit breaker terbuka adalah mekanisme perlindungan yang bekerja secara otomatis. Aplikasi sengaja memblokir request untuk mencegah database crash."})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"2. Identifikasi Penyebab Masalah"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Periksa kemungkinan penyebab:"}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsx("li",{children:"Database server sedang down atau overload"}),i.jsx("li",{children:"Koneksi network bermasalah"}),i.jsx("li",{children:"Query database terlalu lambat (timeout)"}),i.jsx("li",{children:"Terlalu banyak request bersamaan (adaptive rate limiter sedang mengurangi limit)"}),i.jsx("li",{children:"Masalah pada Supabase (jika menggunakan Supabase)"})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"3. Periksa Metrik dan Log"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:'Lihat bagian "Metrics Charts" untuk memahami:'}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsx("li",{children:"Jenis operasi yang paling banyak gagal (read/write/RPC)"}),i.jsx("li",{children:"Error category yang dominan (network/timeout/database)"}),i.jsx("li",{children:"Response time rata-rata sebelum circuit terbuka"})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"4. Tunggu Pemulihan Otomatis"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Circuit breaker akan otomatis mencoba uji pemulihan setelah ",E.resetTimeout/1e3," detik. Jika sistem sudah pulih, akan kembali ke status CLOSED secara otomatis."]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"5. Tindakan Manual (Jika Diperlukan)"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Jika masalah berlanjut setelah beberapa siklus recovery:"}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Reset Circuit Breaker:"})," Hapus statistik dan mulai fresh (gunakan dengan hati-hati)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Periksa Status Database:"})," Pastikan database server berjalan normal"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Hubungi Tim DevOps/Database:"})," Jika masalah bersifat infrastruktur"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Review Query Performance:"})," Optimalkan query yang lambat"]})]})]})]})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ao,{className:"h-5 w-5 text-purple-600"}),"Adaptive Rate Limiter: Menangani Traffic Spike"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-purple-800 dark:text-purple-200",children:"Apa itu Adaptive Rate Limiter?"}),i.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:[i.jsx("strong",{children:"Adaptive Rate Limiter"})," adalah sistem pembatas kecepatan yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem database. Berbeda dengan rate limiter statis yang memiliki limit tetap, adaptive rate limiter akan:"]}),i.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Meningkatkan limit"})," saat sistem dalam kondisi sehat (response time rendah, error rate rendah)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Menurunkan limit"})," saat sistem dalam kondisi stres (response time tinggi, error rate tinggi)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Melindungi database"})," dari traffic spike dan overload dengan penyesuaian otomatis"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Mengurangi false positives"})," dengan memberikan waktu recovery sebelum circuit breaker terbuka"]})]})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-green-800 dark:text-green-200",children:"Bagaimana Menangani Traffic Spike?"}),i.jsxs("div",{className:"text-sm space-y-3",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"1. Deteksi Traffic Spike"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Saat traffic spike terjadi, database mulai lambat (response time meningkat) atau terjadi error rate tinggi. Adaptive rate limiter memantau metrik ini setiap ",L.adjustmentInterval/1e3," detik dari tabel ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:"circuit_breaker_metrics"})," di Supabase."]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"2. Penyesuaian Otomatis"}),i.jsxs("div",{className:"mt-2 space-y-2",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-2",children:[i.jsxs("strong",{className:"text-xs",children:["Sistem Sehat (Response Time < ",L.healthyLatencyThreshold,"ms, Error < 5%):"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" Limit meningkat hingga ",(L.maxMultiplier*100).toFixed(0),"% dari base limit",i.jsx("br",{})," Contoh: Reads base ",L.baseConfig.read.limit,"/min dapat naik hingga ",Math.round(L.baseConfig.read.limit*L.maxMultiplier),"/min"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-2",children:[i.jsxs("strong",{className:"text-xs",children:["Sistem Stres (Response Time > ",L.stressLatencyThreshold,"ms atau Error > 20%):"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" Limit menurun hingga ",(L.minMultiplier*100).toFixed(0),"% dari base limit",i.jsx("br",{})," Contoh: Reads base ",L.baseConfig.read.limit,"/min dapat turun hingga ",Math.round(L.baseConfig.read.limit*L.minMultiplier),"/min",i.jsx("br",{})," Memberi waktu recovery untuk database tanpa langsung memicu circuit breaker OPEN"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"3. Skenario Traffic Spike"}),i.jsxs("div",{className:"mt-2 space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"A."}),i.jsxs("div",{children:[i.jsx("strong",{children:"Spike Normal (Dapat Dihandle):"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Request melonjak  Rate limiter dengan limit adaptif menangani sebagian request  Jika masih dalam batas, semua diizinkan  Jika melebihi, request diblokir dengan HTTP 429"})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"B."}),i.jsxs("div",{children:[i.jsx("strong",{children:"Spike Besar (Database Mulai Lambat):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Response time naik di atas ",L.stressLatencyThreshold,"ms  Adaptive limiter turunkan limit secara bertahap  Memberi waktu database pulih  Mencegah circuit breaker langsung OPEN"]})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"C."}),i.jsxs("div",{children:[i.jsx("strong",{children:"DDoS/Attack:"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Ribuan request masuk  Adaptive limiter turunkan limit drastis (hingga ",(L.minMultiplier*100).toFixed(0),"%)  Sebagian besar request diblokir  Database terlindungi  Circuit breaker OPEN sebagai last resort jika masih gagal"]})]})]})]})]})]})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-3 text-red-800 dark:text-red-200",children:" Input Konfigurasi untuk Traffic Spike & DDoS Protection"}),i.jsxs("div",{className:"text-sm space-y-3 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-red-700 dark:text-red-300 text-base",children:"Input Utama untuk Perlindungan:"}),i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-red-500",children:[i.jsx("strong",{className:"text-sm text-red-700 dark:text-red-300",children:"1. Min Multiplier (PALING PENTING untuk DDoS)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Min Multiplier = ",(L.minMultiplier*100).toFixed(0),"% (range: 0.1 - 1.0)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Menentukan seberapa rendah limit dapat turun saat sistem diserang",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (0.1-0.3) = Limit turun drastis  90-70% request diblokir  ",i.jsx("strong",{children:"SANGAT EFEKTIF"}),i.jsx("br",{}),"- Nilai sedang (0.4-0.6) = Limit turun sedang  60-40% request diblokir  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Nilai tinggi (0.7-1.0) = Limit turun sedikit  30-0% request diblokir  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 0.1 - 0.3 (10-30% dari base limit)",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Base Reads = ",L.baseConfig.read.limit,"/min, Min Multiplier = ",L.minMultiplier,"  Limit minimum = ",Math.round(L.baseConfig.read.limit*L.minMultiplier),"/min saat diserang"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-orange-500",children:[i.jsx("strong",{className:"text-sm text-orange-700 dark:text-orange-300",children:"2. Stress Latency Threshold (Deteksi Serangan)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Stress Latency Threshold = ",L.stressLatencyThreshold,"ms (range: 500ms - 10000ms)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Mendeteksi kapan sistem mulai stres/overload akibat traffic spike",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (500-1000ms) = Deteksi cepat saat serangan  Limit turun cepat  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Nilai sedang (1000-2000ms) = Deteksi sedang  ",i.jsx("strong",{children:"SEIMBANG"}),i.jsx("br",{}),"- Nilai tinggi (3000ms+) = Deteksi lambat  Database bisa crash dulu  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 500-1000ms (deteksi cepat)",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Saat DDoS, response time naik cepat  Jika ",">"," ",L.stressLatencyThreshold,"ms  Sistem langsung turunkan limit"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-yellow-500",children:[i.jsx("strong",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"3. Base Limits (Garis Pertahanan Awal)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Base Limits untuk Reads/Writes/RPC/Auth",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Limit dasar sebelum penyesuaian adaptif",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Base limit rendah = Kurang request yang diizinkan  Lebih aman tapi bisa blokir user normal",i.jsx("br",{}),"- Base limit tinggi = Lebih banyak request diizinkan  Lebih toleran tapi kurang proteksi",i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"}),i.jsx("br",{}),"- Reads: 50-100/min (default: ",L.baseConfig.read.limit,"/min)",i.jsx("br",{}),"- Writes: 20-30/min (default: ",L.baseConfig.write.limit,"/min)",i.jsx("br",{}),"- RPC: 10-20/min (default: ",L.baseConfig.rpc.limit,"/min)",i.jsx("br",{}),"- Auth: 5-10/min (default: ",L.baseConfig.auth.limit,"/min)",i.jsx("br",{})," ",i.jsx("strong",{children:"Penting:"})," Base limit ini akan dikalikan dengan min multiplier saat serangan, jadi limit efektif minimum = base  min multiplier"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-blue-500",children:[i.jsx("strong",{className:"text-sm text-blue-700 dark:text-blue-300",children:"4. Adjustment Interval (Kecepatan Respons)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Adjustment Interval = ",L.adjustmentInterval/1e3,"s (range: 10s - 600s)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Seberapa sering sistem memeriksa kondisi dan menyesuaikan limit",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Interval pendek (10-30s) = Respons cepat  Limit turun cepat saat serangan  ",i.jsx("strong",{children:"SANGAT EFEKTIF"}),i.jsx("br",{}),"- Interval sedang (30-60s) = Respons seimbang  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Interval panjang (60s+) = Respons lambat  Serangan bisa damage dulu  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 10-30 detik (respons cepat)",i.jsx("br",{})," ",i.jsx("strong",{children:"Catatan:"})," Interval terlalu pendek (","<"," 10s) bisa menyebabkan limit berubah-ubah terlalu sering"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-purple-500",children:[i.jsx("strong",{className:"text-sm text-purple-700 dark:text-purple-300",children:"5. Circuit Breaker Failure Threshold (Last Resort)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Failure Threshold = ",E.failureThreshold," (range: 1-100)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Jika adaptive rate limiter tidak cukup, circuit breaker akan OPEN dan blokir SEMUA request",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (3-5) = Circuit terbuka cepat  Semua request diblokir  ",i.jsx("strong",{children:"SANGAT PROTEKTIF"}),i.jsx("br",{}),"- Nilai sedang (5-10) = Balance  ",i.jsx("strong",{children:"SEIMBANG"}),i.jsx("br",{}),"- Nilai tinggi (10+) = Circuit lambat terbuka  Database bisa crash dulu  ",i.jsx("strong",{children:"KURANG PROTEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 3-5 kegagalan dalam monitoring period",i.jsx("br",{})," ",i.jsx("strong",{children:"Penting:"})," Ini adalah lapisan terakhir - gunakan jika rate limiter tidak cukup"]})]})]})]}),i.jsxs("div",{className:"bg-red-100 dark:bg-red-950/40 border border-red-300 dark:border-red-700 rounded p-3 mt-3",children:[i.jsx("strong",{className:"text-sm text-red-800 dark:text-red-200",children:" Konfigurasi Optimal untuk DDoS Protection:"}),i.jsxs("div",{className:"text-xs mt-2 space-y-1 text-red-700 dark:text-red-300",children:[i.jsx("p",{children:"Untuk perlindungan maksimal terhadap DDoS attack, gunakan konfigurasi berikut:"}),i.jsxs("ul",{className:"list-disc list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Min Multiplier:"})," 0.1 - 0.3 (limit turun hingga 10-30% dari base)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Stress Latency Threshold:"})," 500 - 1000ms (deteksi cepat)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Adjustment Interval:"})," 10 - 30 detik (respons cepat)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Base Limits:"})," Konservatif (Reads: 50-100, Writes: 20-30, RPC: 10-20, Auth: 5-10)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Circuit Breaker Failure Threshold:"})," 3-5 (last resort protection)"]})]}),i.jsx("p",{className:"mt-2 font-semibold",children:"Dengan konfigurasi ini, saat DDoS attack terjadi:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Response time naik ",">"," ",L.stressLatencyThreshold,"ms (dalam 10-30 detik)"]}),i.jsxs("li",{children:["Adaptive limiter turunkan limit ke ",(L.minMultiplier*100).toFixed(0),"% (minimal)"]}),i.jsx("li",{children:"70-90% request diblokir dengan HTTP 429"}),i.jsx("li",{children:"Jika masih gagal, circuit breaker OPEN  100% request diblokir"}),i.jsx("li",{children:"Database terlindungi dari crash"})]})]})]})]})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-yellow-800 dark:text-yellow-200",children:"Lapisan Perlindungan Berlapis"}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"1"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Adaptive Rate Limiter (Lapisan Pertama):"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Membatasi jumlah request per menit dengan limit yang dinamis. Mencegah database overload dengan menyesuaikan limit berdasarkan kondisi sistem."})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"2"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Request Timeout (Lapisan Kedua):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Setiap request memiliki timeout maksimal ",E.timeout/1e3," detik. Request yang terlalu lama dianggap gagal dan tidak menumpuk di database."]})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"3"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Circuit Breaker (Lapisan Ketiga):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Jika tetap terjadi ",E.failureThreshold," kegagalan dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik, circuit breaker akan OPEN dan memblokir semua request untuk melindungi database sepenuhnya."]})]})]})]})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-blue-800 dark:text-blue-200",children:"Penjelasan Detail Setiap Input Konfigurasi"}),i.jsxs("div",{className:"text-sm space-y-4 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"1. Base Limits (Limit Dasar)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Limit dasar adalah jumlah maksimal request per menit yang diizinkan saat sistem dalam kondisi normal. Limit aktual akan disesuaikan otomatis berdasarkan kondisi sistem (dikalikan dengan multiplier)."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Reads Base Limit: ",L.baseConfig.read.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"READ"})," (membaca data dari database). Operasi ini termasuk SELECT queries, fetching data, dll.",i.jsx("br",{})," Operasi read biasanya lebih aman dan lebih cepat dibanding write",i.jsx("br",{})," Limit default: 100 request/menit (dapat disesuaikan 10-1000)",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(L.baseConfig.read.limit*L.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(L.baseConfig.read.limit*L.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Writes Base Limit: ",L.baseConfig.write.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"WRITE"})," (menulis/mengubah data di database). Operasi ini termasuk INSERT, UPDATE, DELETE, UPSERT.",i.jsx("br",{})," Operasi write lebih berisiko dan lebih lambat dibanding read",i.jsx("br",{})," Limit default: 30 request/menit (dapat disesuaikan 5-500)",i.jsx("br",{})," Lebih ketat dari reads karena dapat menyebabkan race condition atau data corruption jika terlalu banyak",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(L.baseConfig.write.limit*L.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(L.baseConfig.write.limit*L.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["RPC Base Limit: ",L.baseConfig.rpc.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"RPC"})," (Remote Procedure Call / fungsi database). Operasi ini termasuk panggilan fungsi PostgreSQL, stored procedures, dll.",i.jsx("br",{})," RPC biasanya lebih kompleks dan lebih berat dibanding query biasa",i.jsx("br",{})," Limit default: 20 request/menit (dapat disesuaikan 5-200)",i.jsx("br",{})," RPC sering digunakan untuk operasi batch atau analytics, jadi perlu lebih ketat",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(L.baseConfig.rpc.limit*L.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(L.baseConfig.rpc.limit*L.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Auth Base Limit: ",L.baseConfig.auth.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"AUTH"})," (autentikasi dan otorisasi). Operasi ini termasuk login, logout, refresh token, verifikasi session.",i.jsx("br",{})," Operasi auth sangat penting untuk keamanan, jadi perlu dibatasi",i.jsx("br",{})," Limit default: 10 request/menit (dapat disesuaikan 2-100)",i.jsx("br",{})," Mencegah brute force attack dan credential stuffing",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(L.baseConfig.auth.limit*L.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(L.baseConfig.auth.limit*L.minMultiplier),"/min"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"2. Multiplier Range (Rentang Pengali)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Multiplier menentukan seberapa banyak limit base dapat berubah. Sistem akan mengalikan base limit dengan multiplier saat ini untuk mendapatkan limit efektif."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Min Multiplier: ",(L.minMultiplier*100).toFixed(0),"%"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Multiplier ",i.jsx("strong",{children:"minimum"})," yang akan digunakan saat sistem dalam kondisi ",i.jsx("strong",{children:"stres"}),".",i.jsx("br",{})," Nilai: 0.5 = 50% dari base limit (default: 0.5, range: 0.1 - 1.0)",i.jsx("br",{})," Digunakan ketika: Response time > ",L.stressLatencyThreshold,"ms ATAU error rate > 20%",i.jsx("br",{})," Contoh: Jika Reads base = ",L.baseConfig.read.limit,", min multiplier = ",L.minMultiplier,", maka limit efektif minimum = ",Math.round(L.baseConfig.read.limit*L.minMultiplier),"/min",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memberi waktu recovery untuk database dengan mengurangi beban saat sistem stres, mencegah overload total"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Max Multiplier: ",(L.maxMultiplier*100).toFixed(0),"%"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Multiplier ",i.jsx("strong",{children:"maksimum"})," yang akan digunakan saat sistem dalam kondisi ",i.jsx("strong",{children:"sehat"}),".",i.jsx("br",{})," Nilai: 2.0 = 200% dari base limit (default: 2.0, range: 1.0 - 5.0)",i.jsx("br",{})," Digunakan ketika: Response time < ",L.healthyLatencyThreshold,"ms DAN error rate < 5%",i.jsx("br",{})," Contoh: Jika Reads base = ",L.baseConfig.read.limit,", max multiplier = ",L.maxMultiplier,", maka limit efektif maksimum = ",Math.round(L.baseConfig.read.limit*L.maxMultiplier),"/min",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memanfaatkan kapasitas database saat kondisi optimal, meningkatkan throughput aplikasi"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"3. Latency Thresholds (Ambang Waktu Respons)"}),i.jsx("p",{className:"mt-1 mb-2",children:'Threshold menentukan kapan sistem dianggap "sehat" atau "stres" berdasarkan waktu respons database. Sistem menggunakan threshold ini untuk memutuskan apakah harus meningkatkan atau menurunkan limit.'}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Healthy Latency Threshold: ",L.healthyLatencyThreshold,"ms"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Batas atas response time yang dianggap ",i.jsx("strong",{children:"sehat"}),". Jika response time database di bawah nilai ini, sistem akan meningkatkan limit.",i.jsx("br",{})," Default: 200ms (range: 50ms - 1000ms)",i.jsx("br",{})," Kondisi: Response time < ",L.healthyLatencyThreshold,"ms DAN error rate < 5%",i.jsx("br",{})," Aksi: Limit akan ",i.jsx("strong",{children:"naik secara bertahap"})," (maks 10% per adjustment) hingga mencapai max multiplier",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mengidentifikasi saat database dapat menangani lebih banyak request, memaksimalkan throughput",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"})," Jika database Anda biasanya sangat cepat (< 50ms), turunkan nilai ini. Jika database lambat, naikkan."]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Stress Latency Threshold: ",L.stressLatencyThreshold,"ms"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Batas bawah response time yang dianggap ",i.jsx("strong",{children:"stres"}),". Jika response time database di atas nilai ini, sistem akan menurunkan limit.",i.jsx("br",{})," Default: 1000ms (range: 500ms - 10000ms)",i.jsx("br",{})," Kondisi: Response time > ",L.stressLatencyThreshold,"ms ATAU error rate > 20%",i.jsx("br",{})," Aksi: Limit akan ",i.jsx("strong",{children:"turun secara bertahap"})," (maks 20% per adjustment) hingga mencapai min multiplier",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mengidentifikasi saat database mulai overload, mengurangi beban sebelum database benar-benar crash",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"})," Jika database Anda dapat menangani response time tinggi (> 2s), naikkan nilai ini. Jika database sensitif, turunkan."]})]}),i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:[i.jsx("strong",{children:" Catatan:"})," Jika response time di antara ",L.healthyLatencyThreshold,"ms dan ",L.stressLatencyThreshold,"ms, sistem akan perlahan mengembalikan multiplier ke 1.0 (100% dari base limit)."]})})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"4. Adjustment Interval (Interval Penyesuaian)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Interval menentukan seberapa sering sistem memeriksa metrik dan menyesuaikan limit. Sistem akan query metrik dari Supabase dan menghitung response time serta error rate untuk memutuskan apakah perlu mengubah multiplier."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Adjustment Interval: ",L.adjustmentInterval/1e3," detik (",L.adjustmentInterval,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Frekuensi pengecekan dan penyesuaian limit oleh sistem.",i.jsx("br",{})," Default: 60 detik (60000ms, range: 10s - 600s)",i.jsx("br",{})," Setiap interval, sistem akan:",i.jsx("br",{}),"1. Query metrik dari tabel ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"circuit_breaker_metrics"})," di Supabase (5 menit terakhir)",i.jsx("br",{}),"2. Hitung rata-rata response time dan error rate",i.jsx("br",{}),"3. Bandingkan dengan threshold (healthy/stress)",i.jsx("br",{}),"4. Sesuaikan multiplier untuk setiap operasi (read/write/rpc/auth)",i.jsx("br",{}),"5. Simpan multiplier baru ke localStorage dan update limit efektif",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"}),i.jsx("br",{}),"- Interval terlalu pendek: Sistem terlalu reaktif, limit berubah-ubah terlalu sering (tidak stabil)",i.jsx("br",{}),"- Interval terlalu panjang: Sistem lambat merespons perubahan kondisi (tidak efektif)",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Untuk aplikasi dengan traffic stabil: Gunakan 60-120 detik",i.jsx("br",{}),"- Untuk aplikasi dengan traffic volatile: Gunakan 30-60 detik",i.jsx("br",{}),"- Jangan kurang dari 10 detik (terlalu agresif)",i.jsx("br",{}),"- Jangan lebih dari 600 detik (terlalu lambat)"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"5. Cara Kerja Bersama-Sama"}),i.jsx("p",{className:"mt-1 mb-2",children:"Semua parameter ini bekerja bersama untuk menciptakan sistem perlindungan yang adaptif dan responsif."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{className:"text-xs",children:[i.jsx("strong",{children:"Alur Kerja:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Sistem memantau setiap request database dan mencatat metrik (response time, success/failure) ke ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"circuit_breaker_metrics"})]}),i.jsxs("li",{children:["Setiap ",L.adjustmentInterval/1e3," detik, adaptive rate limiter memeriksa metrik 5 menit terakhir"]}),i.jsx("li",{children:"Menghitung rata-rata response time dan error rate"}),i.jsxs("li",{children:["Membandingkan dengan threshold:",i.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1",children:[i.jsxs("li",{children:["Jika response time < ",L.healthyLatencyThreshold,"ms DAN error < 5%  ",i.jsx("strong",{children:"Naikkan limit"})," (max ",(L.maxMultiplier*100).toFixed(0),"%)"]}),i.jsxs("li",{children:["Jika response time > ",L.stressLatencyThreshold,"ms ATAU error > 20%  ",i.jsx("strong",{children:"Turunkan limit"})," (min ",(L.minMultiplier*100).toFixed(0),"%)"]}),i.jsxs("li",{children:["Jika di antara keduanya  ",i.jsx("strong",{children:"Kembalikan limit"})," perlahan ke 100%"]})]})]}),i.jsx("li",{children:"Update multiplier dan hitung limit efektif baru (base limit  multiplier saat ini)"}),i.jsx("li",{children:"Limit efektif baru diterapkan untuk semua request berikutnya"}),i.jsxs("li",{children:["Proses ini berulang setiap ",L.adjustmentInterval/1e3," detik"]})]})]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:[i.jsx("strong",{children:" Contoh Praktis:"}),i.jsx("br",{}),"Base Reads Limit = ",L.baseConfig.read.limit,"/min",i.jsx("br",{}),"Sistem sehat (response < ",L.healthyLatencyThreshold,"ms)  Multiplier = ",L.maxMultiplier,"  Effective Limit = ",Math.round(L.baseConfig.read.limit*L.maxMultiplier),"/min",i.jsx("br",{}),"Sistem stres (response > ",L.stressLatencyThreshold,"ms)  Multiplier = ",L.minMultiplier,"  Effective Limit = ",Math.round(L.baseConfig.read.limit*L.minMultiplier),"/min",i.jsx("br",{}),"Sistem normal  Multiplier = 1.0  Effective Limit = ",L.baseConfig.read.limit,"/min (base)"]})})]})]}),i.jsxs("p",{className:"text-xs mt-3 pt-2 border-t",children:[" ",i.jsx("strong",{children:"Tip Penting:"}),' Limit efektif saat ini dapat dilihat di bagian "Adaptive Rate Limiter Configuration" di atas. Limit akan berubah secara real-time berdasarkan kondisi sistem. Perhatikan perubahan multiplier - jika terus turun, itu berarti sistem sedang stres dan perlu perhatian.']})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(nw,{className:"h-5 w-5 text-blue-600"}),"Memahami Metrik Circuit Breaker"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Success Rate:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Persentase request yang berhasil. Nilai rendah (< 90%) menunjukkan masalah potensial dengan database atau koneksi."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Total Requests:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Jumlah total request sejak inisialisasi. Membantu memahami volume traffic aplikasi."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Operations by Type:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Distribusi operasi berdasarkan jenis (read/write/RPC/auth). Membantu mengidentifikasi jenis operasi yang paling bermasalah."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Circuit Breaker States:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Menunjukkan berapa banyak operasi yang terjadi pada setiap state. Banyak operasi di OPEN state = sistem sering bermasalah."})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(uh,{className:"h-5 w-5 text-green-600"}),"Best Practices"]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4 space-y-2 text-sm",children:i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"Monitor metrik secara berkala untuk mendeteksi masalah sejak dini"}),i.jsx("li",{children:"Biarkan adaptive rate limiter bekerja otomatis - jangan sering reset manual kecuali benar-benar diperlukan"}),i.jsx("li",{children:"Jika circuit sering terbuka, pertimbangkan untuk optimasi query atau scaling database"}),i.jsx("li",{children:"Gunakan cache untuk mengurangi beban database pada query yang sering digunakan"}),i.jsx("li",{children:"Review dan sesuaikan threshold jika circuit breaker terlalu sensitif atau tidak sensitif"}),i.jsx("li",{children:"Perhatikan perubahan limit adaptive rate limiter - penurunan drastis menunjukkan sistem sedang stres"}),i.jsx("li",{children:"Dokumentasikan setiap insiden circuit breaker dan traffic spike untuk analisis tren"}),i.jsx("li",{children:"Trust the adaptive system - limit akan menyesuaikan otomatis berdasarkan kondisi sistem"})]})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ya,{className:"h-5 w-5 text-blue-600"}),"Referensi Konfigurasi"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Circuit Breaker Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Failure Threshold:"})," ",E.failureThreshold,i.jsx("p",{className:"text-xs text-muted-foreground",children:"Buka circuit setelah kegagalan ini"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Reset Timeout:"})," ",E.resetTimeout/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Tunggu sebelum uji pemulihan"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Success Threshold:"})," ",E.successThreshold,i.jsx("p",{className:"text-xs text-muted-foreground",children:"Sukses untuk tutup circuit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Monitoring Period:"})," ",E.monitoringPeriod/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Jendela waktu hitungan"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("strong",{children:"Request Timeout:"})," ",E.timeout/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Timeout maksimal per request"})]})]})]}),i.jsxs("div",{className:"pt-3 border-t",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Adaptive Rate Limiter Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Reads Base Limit:"})," ",L.baseConfig.read.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Tt.getEffectiveLimit("read"),"/min (",(V.read*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Writes Base Limit:"})," ",L.baseConfig.write.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Tt.getEffectiveLimit("write"),"/min (",(V.write*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"RPC Base Limit:"})," ",L.baseConfig.rpc.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Tt.getEffectiveLimit("rpc"),"/min (",(V.rpc*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Auth Base Limit:"})," ",L.baseConfig.auth.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Tt.getEffectiveLimit("auth"),"/min (",(V.auth*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Multiplier Range:"})," ",(L.minMultiplier*100).toFixed(0),"% - ",(L.maxMultiplier*100).toFixed(0),"%",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Range penyesuaian limit otomatis"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Adjustment Interval:"})," ",L.adjustmentInterval/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Frekuensi penyesuaian limit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Healthy Threshold:"})," < ",L.healthyLatencyThreshold,"ms",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time untuk meningkatkan limit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stress Threshold:"})," > ",L.stressLatencyThreshold,"ms",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time untuk menurunkan limit"})]})]})]})]})]})]}),i.jsx(va,{children:i.jsx(ne,{variant:"default",onClick:()=>_(!1),children:"Tutup"})})]})}),i.jsx(cn,{open:w,onOpenChange:k,children:i.jsxs(nn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(rn,{children:[i.jsxs(an,{className:"flex items-center gap-2",children:[i.jsx(ya,{className:"h-5 w-5 text-blue-500"}),"Edit Adaptive Rate Limiter Configuration"]}),i.jsx(Er,{children:"Ubah konfigurasi adaptive rate limiter. Limit akan secara otomatis menyesuaikan berdasarkan kondisi sistem."})]}),i.jsxs("div",{className:"py-4 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Base Limits (per menit)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"readLimit",children:["Reads Base Limit",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{side:"right",align:"start",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi read (min: 10, max: 1000)"})})]})]}),i.jsx(Je,{id:"readLimit",inputMode:"numeric",pattern:"[0-9]*",min:10,max:1e3,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(ut)?ut:"",onChange:H=>{const we=H.target.value.replace(/\D/g,"");C(ge=>{if(we==="")return{...ge,baseConfig:{...ge.baseConfig,read:{...ge.baseConfig.read,limit:NaN}}};const Ue=parseInt(we,10);if(!Number.isFinite(Ue))return{...ge,baseConfig:{...ge.baseConfig,read:{...ge.baseConfig.read,limit:NaN}}};const tt=Math.min(1e3,Ue);return{...ge,baseConfig:{...ge.baseConfig,read:{...ge.baseConfig.read,limit:tt}}}})}}),!Be&&i.jsx("p",{className:"text-xs text-red-500",children:"Reads base limit must be between 10 and 1000 requests per minute."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"writeLimit",children:["Writes Base Limit",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{side:"left",align:"end",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi write (min: 5, max: 500)"})})]})]}),i.jsx(Je,{id:"writeLimit",inputMode:"numeric",pattern:"[0-9]*",min:5,max:500,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(ee)?ee:"",onChange:H=>{const we=H.target.value.replace(/\D/g,"");C(ge=>{if(we==="")return{...ge,baseConfig:{...ge.baseConfig,write:{...ge.baseConfig.write,limit:NaN}}};const Ue=parseInt(we,10);if(!Number.isFinite(Ue))return{...ge,baseConfig:{...ge.baseConfig,write:{...ge.baseConfig.write,limit:NaN}}};const tt=Math.min(500,Ue);return{...ge,baseConfig:{...ge.baseConfig,write:{...ge.baseConfig.write,limit:tt}}}})}}),!xt&&i.jsx("p",{className:"text-xs text-red-500",children:"Writes base limit must be between 5 and 500 requests per minute."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"rpcLimit",children:["RPC Base Limit",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{side:"right",align:"start",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi RPC (min: 5, max: 200)"})})]})]}),i.jsx(Je,{id:"rpcLimit",inputMode:"numeric",pattern:"[0-9]*",min:5,max:200,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(We)?We:"",onChange:H=>{const we=H.target.value.replace(/\D/g,"");C(ge=>{if(we==="")return{...ge,baseConfig:{...ge.baseConfig,rpc:{...ge.baseConfig.rpc,limit:NaN}}};const Ue=parseInt(we,10);if(!Number.isFinite(Ue))return{...ge,baseConfig:{...ge.baseConfig,rpc:{...ge.baseConfig.rpc,limit:NaN}}};const tt=Math.min(200,Ue);return{...ge,baseConfig:{...ge.baseConfig,rpc:{...ge.baseConfig.rpc,limit:tt}}}})}}),!yt&&i.jsx("p",{className:"text-xs text-red-500",children:"RPC base limit must be between 5 and 200 requests per minute."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"authLimit",children:["Auth Base Limit",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{side:"left",align:"end",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi autentikasi (min: 2, max: 100)"})})]})]}),i.jsx(Je,{id:"authLimit",inputMode:"numeric",pattern:"[0-9]*",min:2,max:100,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(st)?st:"",onChange:H=>{const we=H.target.value.replace(/\D/g,"");C(ge=>{if(we==="")return{...ge,baseConfig:{...ge.baseConfig,auth:{...ge.baseConfig.auth,limit:NaN}}};const Ue=parseInt(we,10);if(!Number.isFinite(Ue))return{...ge,baseConfig:{...ge.baseConfig,auth:{...ge.baseConfig.auth,limit:NaN}}};const tt=Math.min(100,Ue);return{...ge,baseConfig:{...ge.baseConfig,auth:{...ge.baseConfig.auth,limit:tt}}}})}}),!He&&i.jsx("p",{className:"text-xs text-red-500",children:"Auth base limit must be between 2 and 100 requests per minute."})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Adjustment Parameters"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"minMultiplier",children:["Min Multiplier",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{side:"right",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Multiplier minimum (misal: 0.5 = 50%). Digunakan saat sistem stres (min: 0.1, max: 1.0)"})})]})]}),i.jsx(Je,{id:"minMultiplier",inputMode:"decimal",pattern:"^[0-9]*[.]?[0-9]*$",min:.1,max:1,step:.1,onKeyDown:H=>{["e","E","+","-"].includes(H.key)&&H.preventDefault()},value:I,onChange:H=>{var te;let we=H.target.value.replace(/[^0-9.]/g,"");if((((te=we.match(/\./g))==null?void 0:te.length)??0)>1)return;if(we.startsWith(".")&&(we=`0${we}`),we.includes(".")){const[ye,Se]=we.split("."),Ae=(Se??"").slice(0,3);we=`${ye}.${Ae}`}if(we===""||we==="."){$(""),C(ye=>({...ye,minMultiplier:NaN}));return}const ge=parseFloat(we);if(!Number.isFinite(ge)){$(""),C(ye=>({...ye,minMultiplier:NaN}));return}const Ue=Math.min(1,ge),tt=ge>Ue?Ue.toFixed(3).replace(/\.?0+$/,""):we;$(tt),C(ye=>({...ye,minMultiplier:parseFloat(tt)}))}}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Minimum:"," ",Number.isFinite(oe)?`${(oe*100).toFixed(0)}% dari base limit`:"Enter a minimum multiplier value"]}),!lt&&i.jsx("p",{className:"text-xs text-red-500",children:"Min multiplier must be between 0.1 and 1.0."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"maxMultiplier",children:["Max Multiplier",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{side:"left",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Multiplier maksimum (misal: 2.0 = 200%). Digunakan saat sistem sehat (min: 1.0, max: 5.0)"})})]})]}),i.jsx(Je,{id:"maxMultiplier",inputMode:"decimal",pattern:"^[0-9]*[.]?[0-9]*$",min:1,max:5,step:.1,onKeyDown:H=>{["e","E","+","-"].includes(H.key)&&H.preventDefault()},value:K,onChange:H=>{var te;let we=H.target.value.replace(/[^0-9.]/g,"");if((((te=we.match(/\./g))==null?void 0:te.length)??0)>1)return;if(we.startsWith(".")&&(we=`0${we}`),we.includes(".")){const[ye,Se]=we.split("."),Ae=(Se??"").slice(0,3);we=`${ye}.${Ae}`}if(we===""||we==="."){X(""),C(ye=>({...ye,maxMultiplier:NaN}));return}const ge=parseFloat(we);if(!Number.isFinite(ge)){X(""),C(ye=>({...ye,maxMultiplier:NaN}));return}const Ue=Math.min(5,ge),tt=ge>Ue?Ue.toFixed(3).replace(/\.?0+$/,""):we;X(tt),C(ye=>({...ye,maxMultiplier:parseFloat(tt)}))}}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum:"," ",Number.isFinite(ve)?`${(ve*100).toFixed(0)}% dari base limit`:"Enter a maximum multiplier value"]}),!mt&&i.jsx("p",{className:"text-xs text-red-500",children:"Max multiplier must be between 1.0 and 5.0."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"healthyLatency",children:["Healthy Latency Threshold (ms)",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{side:"right",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Response time di bawah ini dianggap sehat. Sistem akan meningkatkan limit (min: 50ms, max: 1000ms)"})})]})]}),i.jsx(Je,{id:"healthyLatency",inputMode:"numeric",pattern:"[0-9]*",min:50,max:1e3,step:50,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(De)?De:"",onChange:H=>{const we=H.target.value.replace(/\D/g,"");C(ge=>{if(we==="")return{...ge,healthyLatencyThreshold:NaN};const Ue=parseInt(we,10);if(!Number.isFinite(Ue))return{...ge,healthyLatencyThreshold:NaN};const tt=Math.min(1e3,Ue);return{...ge,healthyLatencyThreshold:tt}})}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(De)?`${(De/1e3).toFixed(1)} seconds`:"Enter a value between 50 and 1000 milliseconds"}),!en&&i.jsx("p",{className:"text-xs text-red-500",children:"Healthy latency threshold must be between 50 and 1000 milliseconds."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"stressLatency",children:["Stress Latency Threshold (ms)",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{side:"left",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Response time di atas ini dianggap stres. Sistem akan menurunkan limit (min: 500ms, max: 10000ms)"})})]})]}),i.jsx(Je,{id:"stressLatency",inputMode:"numeric",pattern:"[0-9]*",min:500,max:1e4,step:100,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(Me)?Me:"",onChange:H=>{const we=H.target.value.replace(/\D/g,"");C(ge=>{if(we==="")return{...ge,stressLatencyThreshold:NaN};const Ue=parseInt(we,10);if(!Number.isFinite(Ue))return{...ge,stressLatencyThreshold:NaN};const tt=Math.min(1e4,Ue);return{...ge,stressLatencyThreshold:tt}})}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(Me)?`${(Me/1e3).toFixed(1)} seconds`:"Enter a value between 500 and 10000 milliseconds"}),!ue&&i.jsx("p",{className:"text-xs text-red-500",children:"Stress latency threshold must be between 500 and 10000 milliseconds."})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs(qe,{htmlFor:"adjustmentInterval",children:["Adjustment Interval (ms)",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{side:"right",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Frekuensi pengecekan dan penyesuaian limit (min: 10000ms, max: 600000ms)"})})]})]}),i.jsx(Je,{id:"adjustmentInterval",inputMode:"numeric",pattern:"[0-9]*",min:1e4,max:6e5,step:1e4,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(Z)?Z:"",onChange:H=>{const we=H.target.value.replace(/\D/g,"");C(ge=>{if(we==="")return{...ge,adjustmentInterval:NaN};const Ue=parseInt(we,10);if(!Number.isFinite(Ue))return{...ge,adjustmentInterval:NaN};const tt=Math.min(6e5,Ue);return{...ge,adjustmentInterval:tt}})}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(Z)?`Setiap ${(Z/1e3).toFixed(0)} detik`:"Enter an interval between 10000 and 600000 milliseconds."}),!Pe&&i.jsx("p",{className:"text-xs text-red-500",children:"Adjustment interval must be between 10000 and 600000 milliseconds."})]})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",i.jsx("strong",{children:"Tips:"})," Adaptive rate limiter secara otomatis menyesuaikan limit berdasarkan metrik sistem (response time, error rate). Saat sistem sehat, limit akan naik. Saat sistem stres, limit akan turun untuk melindungi database dari overload."]})})]}),i.jsxs(va,{children:[i.jsx(ne,{variant:"outline",onClick:()=>k(!1),children:"Batal"}),i.jsx(ne,{variant:"default",onClick:ze,disabled:!Be||!xt||!yt||!He||!lt||!mt||!en||!ue||!Pe,children:"Simpan Perubahan"})]})]})}),i.jsx(cn,{open:y,onOpenChange:b,children:i.jsxs(nn,{className:"max-w-2xl",children:[i.jsxs(rn,{children:[i.jsxs(an,{className:"flex items-center gap-2",children:[i.jsx(ya,{className:"h-5 w-5 text-blue-500"}),"Edit Circuit Breaker Configuration"]}),i.jsx(Er,{children:"Ubah threshold dan timeout untuk circuit breaker. Perubahan akan langsung diterapkan."})]}),i.jsxs("div",{className:"py-4 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"failureThreshold",children:["Failure Threshold",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Jumlah kegagalan yang diperlukan sebelum circuit breaker terbuka (min: 1, max: 100)"})})]})]}),i.jsx(Je,{id:"failureThreshold",inputMode:"numeric",pattern:"[0-9]*",min:1,max:100,value:Number.isFinite(P.failureThreshold)?P.failureThreshold:"",onChange:H=>{const we=H.target.value.replace(/\D/g,"");if(we===""){U(Ue=>({...Ue,failureThreshold:1}));return}const ge=Math.min(100,Math.max(1,parseInt(we,10)));U(Ue=>({...Ue,failureThreshold:ge}))}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"resetTimeout",children:["Reset Timeout (milliseconds)",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Waktu tunggu sebelum mencoba pemulihan (transisi ke HALF_OPEN). Min: 10000ms, Max: 300000ms"})})]})]}),i.jsx(Je,{id:"resetTimeout",inputMode:"numeric",pattern:"[0-9]*",min:1e4,max:3e5,step:1e3,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(P.resetTimeout)?P.resetTimeout:"",onChange:H=>{const we=H.target.value.replace(/\D/g,"");if(we===""){U(Ue=>({...Ue,resetTimeout:NaN}));return}const ge=parseInt(we,10);if(!Number.isFinite(ge)){U(Ue=>({...Ue,resetTimeout:NaN}));return}U(Ue=>({...Ue,resetTimeout:ge}))}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(P.resetTimeout)?`${(P.resetTimeout/1e3).toFixed(0)} seconds`:"Enter a value between 10000 and 300000"}),Number.isFinite(P.resetTimeout)&&P.resetTimeout<1e4&&i.jsx("p",{className:"text-xs text-red-500",children:"Minimum reset timeout is 10000 milliseconds (10 seconds)."}),Number.isFinite(P.resetTimeout)&&P.resetTimeout>3e5&&i.jsx("p",{className:"text-xs text-red-500",children:"Maximum reset timeout is 300000 milliseconds."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"successThreshold",children:["Success Threshold",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Jumlah sukses berturut-turut di HALF_OPEN untuk menutup circuit (min: 1, max: 10)"})})]})]}),i.jsx(Je,{id:"successThreshold",inputMode:"numeric",pattern:"[0-9]*",min:1,max:10,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(P.successThreshold)?P.successThreshold:"",onChange:H=>{const we=H.target.value.replace(/\D/g,"");if(we===""){U(tt=>({...tt,successThreshold:NaN}));return}const ge=parseInt(we,10);if(!Number.isFinite(ge)){U(tt=>({...tt,successThreshold:NaN}));return}const Ue=Math.min(10,Math.max(1,ge));U(tt=>({...tt,successThreshold:Ue}))}}),(!Number.isFinite(P.successThreshold)||P.successThreshold<1||P.successThreshold>10)&&i.jsx("p",{className:"text-xs text-red-500",children:"Success threshold must be a number between 1 and 10."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"monitoringPeriod",children:["Monitoring Period (milliseconds)",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Jendela waktu untuk menghitung kegagalan. Kegagalan di luar jendela ini tidak dihitung. Min: 1000ms, Max: 60000ms"})})]})]}),i.jsx(Je,{id:"monitoringPeriod",inputMode:"numeric",pattern:"[0-9]*",min:1e3,max:6e4,step:1e3,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(P.monitoringPeriod)?P.monitoringPeriod:"",onChange:H=>{const we=H.target.value.replace(/\D/g,"");if(we===""){U(Ue=>({...Ue,monitoringPeriod:NaN}));return}const ge=parseInt(we,10);if(!Number.isFinite(ge)){U(Ue=>({...Ue,monitoringPeriod:NaN}));return}U(Ue=>({...Ue,monitoringPeriod:ge}))}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(P.monitoringPeriod)?`${(P.monitoringPeriod/1e3).toFixed(0)} seconds`:"Enter a value between 1000 and 60000"}),Number.isFinite(P.monitoringPeriod)&&P.monitoringPeriod<1e3&&i.jsx("p",{className:"text-xs text-red-500",children:"Minimum monitoring period is 1000 milliseconds (1 second)."}),Number.isFinite(P.monitoringPeriod)&&P.monitoringPeriod>6e4&&i.jsx("p",{className:"text-xs text-red-500",children:"Maximum monitoring period is 60000 milliseconds (60 seconds)."})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs(qe,{htmlFor:"timeout",children:["Request Timeout (milliseconds)",i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(Fe,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(he,{children:i.jsx("p",{children:"Timeout maksimal untuk setiap request database. Request yang melebihi waktu ini akan dianggap gagal. Min: 1000ms, Max: 60000ms"})})]})]}),i.jsx(Je,{id:"timeout",inputMode:"numeric",pattern:"[0-9]*",min:1e3,max:6e4,step:1e3,onKeyDown:H=>{["e","E","+","-","."].includes(H.key)&&H.preventDefault()},value:Number.isFinite(P.timeout)?P.timeout:"",onChange:H=>{const we=H.target.value.replace(/\D/g,"");if(we===""){U(tt=>({...tt,timeout:NaN}));return}const ge=parseInt(we,10);if(!Number.isFinite(ge)){U(tt=>({...tt,timeout:NaN}));return}const Ue=Math.min(6e4,ge);U(tt=>({...tt,timeout:Ue}))}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(P.timeout)?`${(P.timeout/1e3).toFixed(0)} seconds`:"Enter a value between 1000 and 60000"}),Number.isFinite(P.timeout)&&P.timeout<1e3&&i.jsx("p",{className:"text-xs text-red-500",children:"Minimum request timeout is 1000 milliseconds (1 second)."})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",i.jsx("strong",{children:"Tips:"})," Threshold yang terlalu rendah dapat membuat circuit breaker terlalu sensitif. Threshold yang terlalu tinggi dapat menunda respons terhadap masalah database. Gunakan nilai yang sesuai dengan karakteristik aplikasi Anda."]})})]}),i.jsxs(va,{children:[i.jsx(ne,{variant:"outline",onClick:()=>b(!1),children:"Batal"}),i.jsx(ne,{variant:"default",onClick:Te,disabled:!Number.isFinite(P.resetTimeout)||P.resetTimeout<1e4||P.resetTimeout>3e5||!Number.isFinite(P.failureThreshold)||P.failureThreshold<1||P.failureThreshold>100||!Number.isFinite(P.successThreshold)||P.successThreshold<1||P.successThreshold>10||!Number.isFinite(P.monitoringPeriod)||P.monitoringPeriod<1e3||P.monitoringPeriod>6e4||!Number.isFinite(P.timeout)||P.timeout<1e3||P.timeout>6e4||!Be||!xt||!yt||!He||!lt||!mt||!en||!ue||!Pe,children:"Simpan Perubahan"})]})]})}),i.jsx(cn,{open:N,onOpenChange:A,children:i.jsxs(nn,{className:"max-w-md",children:[i.jsx(rn,{children:i.jsxs(an,{className:"flex items-center gap-2",children:[i.jsx(Hs,{className:"h-5 w-5 text-red-500"}),"Error"]})}),i.jsx("div",{className:"py-4",children:i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:D})}),i.jsx(va,{children:i.jsx(ne,{variant:"destructive",onClick:()=>A(!1),children:"Tutup"})})]})})]})}const Wq=p.forwardRef(({role:e,roles:t=[],requireAll:n=!1,fallback:r=null,children:a},s)=>{const{hasRole:o,hasAnyRole:l,loading:c}=br();if(c)return null;const u=e?[e,...t]:t,f=n?u.every(h=>o(h)):l(u),d=!Array.isArray(a)&&typeof a!="string"&&typeof a!="number";return f?d?i.jsx(GS,{ref:s,children:a}):i.jsx(i.Fragment,{children:a}):i.jsx(i.Fragment,{children:r})});function HIe(){const[e,t]=yN(),{deleteMultipleContacts:n}=dC(),[r,a]=p.useState(""),[s,o]=p.useState(!1),[l,c]=p.useState(null),[u,f]=p.useState(!1),[d,h]=p.useState(90),[m,g]=p.useState(!1),[v,x]=p.useState(""),[y,b]=p.useState(null),[w,k]=p.useState(!1),[j,_]=p.useState(!1),[S,T]=p.useState(null),[N,A]=p.useState(null),[D,B]=p.useState(null),[E,R]=p.useState(null),[P,U]=p.useState(null),[L,O]=p.useState(!1),[F,C]=p.useState(!1),[z,I]=p.useState(""),$=p.useMemo(()=>Array.from(new Set(r.split(/[\s,\n]+/).map(J=>J.trim()).filter(Boolean))),[r]),K=J=>{const fe=new URLSearchParams(e);fe.set("menu",J),t(fe)},X=()=>{try{Xs.clear(),Le.success("Local caches cleared")}catch{Le.error("Failed to clear cache")}},V=async()=>{try{const{data:{user:J}}=await ie.auth.getUser();if(!J)return null;const{data:fe}=await ie.from("org_members").select("org_id").eq("user_id",J.id).limit(1).maybeSingle();return(fe==null?void 0:fe.org_id)??null}catch{return null}},W=async()=>{try{const J=await V();if(!J)return;const{data:fe,error:Ce}=await wt.from("org_settings").select("retention_days").eq("org_id",J).maybeSingle();if(Ce)throw Ce;c((fe==null?void 0:fe.retention_days)??90),h((fe==null?void 0:fe.retention_days)??90)}catch(J){console.error("Failed to fetch retention settings:",J)}},ae=async()=>{try{const J=await V();if(!J)return;const{data:fe,error:Ce}=await wt.from("org_settings").select("ai_paused, ai_paused_reason, ai_paused_at, ai_paused_by_user_id").eq("org_id",J).maybeSingle();if(Ce)throw Ce;T(!!(fe!=null&&fe.ai_paused)),A((fe==null?void 0:fe.ai_paused_reason)??null),B((fe==null?void 0:fe.ai_paused_at)??null);const Te=(fe==null?void 0:fe.ai_paused_by_user_id)??null;if(R(Te),Te)try{const{data:Ee}=await wt.from("users_profile").select("user_id, display_name").eq("user_id",Te).maybeSingle();if(Ee!=null&&Ee.display_name)U(Ee.display_name);else{const{data:ze}=await wt.from("v_users").select("id, email").eq("id",Te).maybeSingle();U((ze==null?void 0:ze.email)??Te)}}catch{U(Te)}else U(null)}catch(J){console.error("Failed to fetch AI pause status:",J)}},G=async()=>{try{O(!0);const J=await V();if(!J)throw new Error("Unable to resolve organization");const{error:fe}=await wt.from("org_settings").update({ai_paused:!1,ai_paused_reason:null,ai_paused_at:null,ai_paused_by_user_id:null}).eq("org_id",J);if(fe)throw fe;T(!1),A(null),B(null),R(null),U(null),Le.success("AI auto responses resumed");try{await $t({action:"ai.resume",resource:"org_settings"})}catch{}}catch(J){Le.error((J==null?void 0:J.message)||"Failed to resume AI responses")}finally{O(!1)}},le=async()=>{try{O(!0);const{data:{user:J}}=await ie.auth.getUser(),fe=(J==null?void 0:J.id)??null,Ce=await V();if(!Ce)throw new Error("Unable to resolve organization");const{error:Te}=await wt.from("org_settings").update({ai_paused:!0,ai_paused_reason:(z==null?void 0:z.trim())||null,ai_paused_at:new Date().toISOString(),ai_paused_by_user_id:fe}).eq("org_id",Ce);if(Te)throw Te;T(!0),A((z==null?void 0:z.trim())||null),B(new Date().toISOString()),R(fe),U(null),C(!1),Le.success("AI auto responses paused");try{await $t({action:"ai.pause",resource:"org_settings",context:{reason:(z==null?void 0:z.trim())||null}})}catch{}ae()}catch(J){Le.error((J==null?void 0:J.message)||"Failed to pause AI responses")}finally{O(!1),I("")}},se=async()=>{try{k(!0);const J=await V();if(!J)throw new Error("Unable to resolve organization");const{error:fe}=await wt.from("org_settings").update({retention_days:d}).eq("org_id",J);if(fe)throw fe;c(d),f(!1),Le.success(`Retention period updated to ${d} days`);try{await $t({action:"retention.update",resource:"org_settings",context:{retention_days:d}})}catch{}}catch(J){Le.error((J==null?void 0:J.message)||"Failed to update retention settings")}finally{k(!1)}},Q=async()=>{try{k(!0);const{data:J,error:fe}=await wt.rpc("cleanup_old_chat_data",{p_days:l??90});if(fe)throw fe;b(J),Le.success(`Cleanup completed: ${(J==null?void 0:J.threads_deleted)||0} threads, ${(J==null?void 0:J.messages_deleted)||0} messages deleted`);try{await $t({action:"retention.cleanup",resource:"chat_data",context:J})}catch{}}catch(J){Le.error((J==null?void 0:J.message)||"Failed to run cleanup")}finally{k(!1)}},_e=async()=>{if(!v.trim()){Le.error("Please enter contact UUID");return}try{_(!0);const{data:J,error:fe}=await wt.rpc("gdpr_delete_user_data",{p_contact_id:v.trim()});if(fe)throw fe;Le.success(`GDPR deletion completed: ${(J==null?void 0:J.threads_deleted)||0} threads, ${(J==null?void 0:J.messages_deleted)||0} messages, ${(J==null?void 0:J.contact_deleted)||0} contacts deleted`),g(!1),x("");try{await $t({action:"gdpr.delete_request",resource:"contact",resourceId:v,context:J})}catch{}}catch(J){Le.error((J==null?void 0:J.message)||"Failed to execute GDPR deletion")}finally{_(!1)}};p.useEffect(()=>{W(),ae()},[]);const xe=async()=>{if($.length===0){Le.error("Provide at least one contact UUID");return}if(window.confirm(`Delete ${$.length} contact(s)? This cannot be undone.`))try{o(!0),await n($),a(""),Le.success("Contacts deleted")}catch{Le.error("Bulk delete failed")}finally{o(!1)}};return i.jsx(Wq,{role:er.MASTER_AGENT,fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"Admin Panel is available to Master Agents only."}),children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Panel"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Centralized controls for master agents."})]}),i.jsx(vt,{className:"bg-blue-100 text-blue-700 border-0",children:"Master Agent"})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsxs(Ze,{className:"flex items-center gap-2",children:[i.jsx(ao,{className:"h-4 w-4"})," Access & Management"]})}),i.jsxs(Qe,{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[i.jsxs(ne,{variant:"outline",className:"justify-start",onClick:()=>K("permissions"),children:[i.jsx(t4,{className:"h-4 w-4 mr-2"})," Manage Roles & Permissions"]}),i.jsxs(ne,{variant:"outline",className:"justify-start",onClick:()=>K("humanagents"),children:[i.jsx(nN,{className:"h-4 w-4 mr-2"})," Human Agents"]}),i.jsxs(ne,{variant:"outline",className:"justify-start",onClick:()=>K("platforms"),children:[i.jsx(ZL,{className:"h-4 w-4 mr-2"})," Platforms & Integrations"]}),i.jsxs(ne,{variant:"outline",className:"justify-start",onClick:()=>K("analytics"),children:[i.jsx(HL,{className:"h-4 w-4 mr-2"})," Analytics"]}),i.jsxs(ne,{variant:"outline",className:"justify-start",onClick:()=>K("logs"),children:[i.jsx(YL,{className:"h-4 w-4 mr-2"})," Audit Logs"]}),i.jsxs(ne,{variant:"outline",className:"justify-start",onClick:()=>K("contacts"),children:[i.jsx(QL,{className:"h-4 w-4 mr-2"})," Contacts"]})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsxs(Ze,{className:"flex items-center gap-2",children:[i.jsx(ro,{className:"h-4 w-4"})," Reliability & Circuit Breaker"]})}),i.jsx(Qe,{children:i.jsx(WIe,{})})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsxs(Ze,{className:"flex items-center gap-2",children:[i.jsx(ro,{className:"h-4 w-4"})," AI Auto Responses"]})}),i.jsxs(Qe,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:"Status:"}),S?i.jsx(vt,{className:"bg-red-100 text-red-700 border-0",children:"Paused"}):i.jsx(vt,{className:"bg-emerald-100 text-emerald-700 border-0",children:"Active"})]}),S&&i.jsxs("div",{className:"mt-2 text-xs text-muted-foreground space-y-1",children:[N?i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Reason:"})," ",N]}):null,i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Paused"}),P?i.jsxs(i.Fragment,{children:[" by ",P]}):null,D?i.jsxs(i.Fragment,{children:[" at ",new Date(D).toLocaleString()]}):null]})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:S?i.jsxs(ne,{onClick:G,disabled:L,children:[i.jsx(ZV,{className:"h-4 w-4 mr-2"})," ",L?"Resuming...":"Resume AI Responses"]}):i.jsxs(ne,{variant:"destructive",onClick:()=>C(!0),disabled:L,children:[i.jsx(QV,{className:"h-4 w-4 mr-2"})," Pause AI Responses"]})})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"When paused, AI will not auto reply across all channels until resumed."})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsxs(Ze,{className:"flex items-center gap-2",children:[i.jsx(pP,{className:"h-4 w-4"})," Utilities"]})}),i.jsx(Qe,{className:"flex flex-wrap gap-2",children:i.jsxs(ne,{variant:"outline",onClick:X,children:[i.jsx(pP,{className:"h-4 w-4 mr-2"})," Clear Local Cache"]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{className:"flex items-center gap-2",children:"Data Retention Policy"})}),i.jsxs(Qe,{className:"space-y-3",children:[i.jsx(qe,{className:"text-sm font-medium",children:"Retention Period (days)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{type:"number",value:l??90,onChange:J=>h(parseInt(J.target.value)||90),className:"max-w-xs"}),i.jsx(ne,{variant:"outline",onClick:()=>{h(l??90),f(!0)},children:"Edit"})]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Current: ",l??90," days. Chats older than this will be automatically deleted."]}),i.jsx(ne,{onClick:Q,disabled:w,className:"w-full",children:w?"Running Cleanup...":"Run Cleanup Now"}),y&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last cleanup: ",y.threads_deleted," threads, ",y.messages_deleted," messages, ",y.contacts_deleted," contacts"]})]})]}),i.jsxs(Oe,{className:"border-red-200",children:[i.jsx(et,{children:i.jsx(Ze,{className:"flex items-center gap-2 text-red-700",children:"GDPR/PDPA Right to Erasure"})}),i.jsxs(Qe,{className:"space-y-3",children:[i.jsx(qe,{className:"text-sm font-medium",children:"Contact ID"}),i.jsx(Je,{placeholder:"Enter contact UUID",value:v,onChange:J=>x(J.target.value)}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Enter the contact ID (UUID) gotten from contact detail to delete all associated data permanently."}),i.jsx(Wt,{permission:"contacts.delete",children:i.jsx(ne,{variant:"destructive",onClick:()=>g(!0),disabled:!v.trim()||j,className:"w-full",children:"Delete User Data"})}),i.jsx("div",{className:"text-xs text-red-600",children:"Warning: This action permanently deletes all data and cannot be undone."})]})]})]}),i.jsx(cn,{open:u,onOpenChange:f,children:i.jsxs(nn,{className:"max-w-md",children:[i.jsxs(rn,{children:[i.jsx(an,{children:"Configure Data Retention"}),i.jsx(Er,{children:"Set how many days to retain chat data. Data older than this period will be automatically deleted."})]}),i.jsxs("div",{className:"py-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx(qe,{htmlFor:"retention-days",children:"Retention Period (days)"}),i.jsx(Je,{id:"retention-days",type:"number",value:d,onChange:J=>h(parseInt(J.target.value)||90)})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Automatic cleanup runs daily at 2 AM UTC. You can also trigger manual cleanup from the main panel."})]}),i.jsxs(va,{children:[i.jsx(ne,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),i.jsx(ne,{onClick:se,disabled:w,children:w?"Saving...":"Save"})]})]})}),i.jsx(cn,{open:F,onOpenChange:C,children:i.jsxs(nn,{className:"max-w-md",children:[i.jsxs(rn,{children:[i.jsx(an,{children:"Pause AI Auto Responses"}),i.jsx(Er,{children:"This will pause all AI auto replies across all platforms. You can resume anytime."})]}),i.jsx("div",{className:"py-4 space-y-4",children:i.jsxs("div",{children:[i.jsx(qe,{htmlFor:"pause-reason",children:"Reason (optional)"}),i.jsx(Ua,{id:"pause-reason",placeholder:"Enter a reason for pausing (visible to admins)",value:z,onChange:J=>I(J.target.value),className:"min-h-[90px]"})]})}),i.jsxs(va,{children:[i.jsx(ne,{variant:"outline",onClick:()=>C(!1),disabled:L,children:"Cancel"}),i.jsx(ne,{variant:"destructive",onClick:le,disabled:L,children:L?"Pausing...":"Confirm Pause"})]})]})}),i.jsx(cn,{open:m,onOpenChange:g,children:i.jsxs(nn,{className:"max-w-md",children:[i.jsxs(rn,{children:[i.jsx(an,{children:"Confirm GDPR Data Deletion"}),i.jsxs(Er,{children:["This action will permanently delete all data associated with contact ID: ",i.jsx("code",{className:"bg-muted px-1 rounded",children:v})]})]}),i.jsxs(va,{children:[i.jsx(ne,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),i.jsx(ne,{variant:"destructive",onClick:_e,disabled:j,children:j?"Deleting...":"Confirm Deletion"})]})]})}),i.jsxs(Oe,{className:"border-red-200",children:[i.jsx(et,{children:i.jsxs(Ze,{className:"flex items-center gap-2 text-red-700",children:[i.jsx(Hs,{className:"h-4 w-4"})," Danger Zone"]})}),i.jsx(Qe,{className:"space-y-3",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Paste contact UUIDs (comma/newline separated) to delete permanently."}),i.jsx(Ua,{value:r,onChange:J=>a(J.target.value),placeholder:"uuid-1, uuid-2, uuid-3",className:"min-h-[120px]"}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Parsed: ",$.length]}),i.jsx(Wt,{permission:"contacts.delete",children:i.jsxs(ne,{variant:"destructive",onClick:xe,disabled:s||$.length===0,children:[i.jsx(Ar,{className:"h-4 w-4 mr-2"})," Delete ",$.length||""," Contact",$.length>1?"s":""]})})]})]})})]})]})})}function VIe(){var U,L;Xr();const[e,t]=p.useState([]),[n,r]=p.useState(20),[a,s]=p.useState(1),[o,l]=p.useState(0),[c,u]=p.useState("all"),[f,d]=p.useState("all"),[h,m]=p.useState(),[g,v]=p.useState([]),[x,y]=p.useState([]),[b,w]=p.useState({}),[k,j]=p.useState(!1),[_,S]=p.useState(null),[T,N]=p.useState(null),[A,D]=p.useState(!1),B=p.useMemo(()=>{if(!(h!=null&&h.from)||!(h!=null&&h.to))return{from:null,to:null};const O=wl(h.from).toISOString(),F=rB(h.to).toISOString();return{from:O,to:F}},[h]),E=async()=>{const{data:O}=await ie.from("audit_logs").select("user_id").not("user_id","is",null).limit(1e3),F=Array.from(new Set((O||[]).map(z=>z.user_id)));if(F.length>0){const{data:z}=await ie.from("v_users").select("id,email,display_name").in("id",F),I=(z||[]).map(K=>({id:K.id,email:K.email}));v(I);const $={};for(const K of z||[])$[K.id]={email:K.email,display_name:K.display_name};w(K=>({...K,...$}))}else v([]);const{data:C}=await ie.from("audit_logs").select("action").limit(1e3);y(Array.from(new Set((C||[]).map(z=>z.action))))},R=async()=>{const O=(a-1)*n,{data:F,error:C}=await ie.rpc("get_audit_logs",{p_user_id:c!=="all"?c:null,p_action:f!=="all"?f:null,p_from:B.from,p_to:B.to,p_limit:n,p_offset:O});if(!C){const z=F||[];t(z);let I=ie.from("audit_logs").select("id",{count:"exact"});c!=="all"&&(I=I.eq("user_id",c)),f!=="all"&&(I=I.eq("action",f)),B.from&&(I=I.gte("created_at",B.from)),B.to&&(I=I.lte("created_at",B.to));const{count:$}=await I;l($||0);const X=Array.from(new Set(z.map(V=>V.user_id).filter(Boolean))).filter(V=>!b[V]);if(X.length>0){const{data:V}=await ie.from("v_users").select("id,email,display_name").in("id",X),W={};for(const ae of V||[])W[ae.id]={email:ae.email,display_name:ae.display_name};Object.keys(W).length&&w(ae=>({...ae,...W}))}}};p.useEffect(()=>{E()},[]),p.useEffect(()=>{if(h!=null&&h.from&&!(h!=null&&h.to)){N("Select both a start date and an end date to filter logs.");return}if(h!=null&&h.to&&!(h!=null&&h.from)){m({from:h.to,to:h.to}),N(null);return}N(null)},[h]),p.useEffect(()=>{R()},[a,n,c,f,B.from,B.to]),p.useEffect(()=>{const O=ie.channel("realtime:logs").on("postgres_changes",{event:"INSERT",schema:"public",table:"audit_logs"},F=>{const C=F.new;t(I=>[C,...I].slice(0,n));const z=C.user_id;z&&!b[z]&&ie.from("v_users").select("id,email,display_name").eq("id",z).maybeSingle().then(({data:I})=>{I&&w($=>({...$,[I.id]:{email:I.email,display_name:I.display_name}}))}),l(I=>I+1)}).subscribe();return()=>{ie.removeChannel(O)}},[n]);const P=Math.max(1,Math.ceil(o/n));return i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Logs"}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsx(Ze,{children:"Filters"})}),i.jsxs(Qe,{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"User"}),i.jsxs(qt,{value:c,onValueChange:u,children:[i.jsx(Lt,{className:"h-9",children:i.jsx(It,{placeholder:"All"})}),i.jsxs(Ft,{children:[i.jsx(Ge,{value:"all",children:"All"}),g.map(O=>i.jsx(Ge,{value:O.id,children:O.email},O.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"Action"}),i.jsxs(qt,{value:f,onValueChange:d,children:[i.jsx(Lt,{className:"h-9",children:i.jsx(It,{placeholder:"All"})}),i.jsxs(Ft,{children:[i.jsx(Ge,{value:"all",children:"All"}),x.map(O=>i.jsx(Ge,{value:O,children:O},O))]})]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"text-xs text-muted-foreground block mb-1",children:"Date Range"}),i.jsxs(hi,{open:A,onOpenChange:O=>D(O),children:[i.jsx(mi,{asChild:!0,onClick:()=>D(!0),children:i.jsxs(ne,{variant:"outline",className:ke("justify-start text-left font-normal h-9 w-full",!(h!=null&&h.from)&&!(h!=null&&h.to)&&"text-muted-foreground"),children:[i.jsx(Cc,{className:"mr-2 h-4 w-4"}),h!=null&&h.from&&(h!=null&&h.to)?`${h.from.toLocaleDateString()}  ${h.to.toLocaleDateString()}`:"Select date range"]})}),i.jsx(Wa,{className:"w-auto min-w-[560px] p-0",align:"start",children:i.jsx(gm,{initialFocus:!0,mode:"range",defaultMonth:h==null?void 0:h.from,selected:h,onSelect:O=>{m(O),O!=null&&O.from&&(O!=null&&O.to)&&D(!1)},numberOfMonths:2})})]}),T?i.jsx("p",{className:"text-xs text-destructive mt-1",children:T}):null]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsxs(qt,{value:String(n),onValueChange:O=>r(Number(O)),children:[i.jsx(Lt,{className:"h-9",children:i.jsx(It,{placeholder:"Page size"})}),i.jsx(Ft,{children:[10,20,50,100].map(O=>i.jsxs(Ge,{value:String(O),children:[O," / page"]},O))})]}),i.jsx(ne,{variant:"outline",onClick:()=>{const O=e.map(F=>{var C;return{time:new Date(F.created_at).toISOString(),user:F.user_id?((C=b[F.user_id])==null?void 0:C.email)||F.user_id:"",action:F.action,resource:F.resource,resource_id:F.resource_id||"",ip:F.ip?F.ip.replace(/(\d+\.\d+\.\d+)\.\d+/,"$1.*"):"",context:JSON.stringify(o4(F.context||{}))}});WK(`logs_${new Date().toISOString()}.csv`,O)},children:"Export CSV"})]})]})]}),i.jsxs(Oe,{children:[i.jsx(et,{children:i.jsxs(Ze,{children:["Entries (",o,")"]})}),i.jsxs(Qe,{children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(jb,{children:[i.jsx(_b,{children:i.jsxs(Qs,{children:[i.jsx(zn,{children:"Time"}),i.jsx(zn,{children:"User"}),i.jsx(zn,{children:"Action"}),i.jsx(zn,{children:"Resource"}),i.jsx(zn,{children:"Resource ID"}),i.jsx(zn,{children:"IP"}),i.jsx(zn,{})]})}),i.jsx(kb,{children:e.map(O=>{var F,C;return i.jsxs(Qs,{children:[i.jsx(On,{children:new Date(O.created_at).toLocaleString()}),i.jsx(On,{children:O.user_id?((F=b[O.user_id])==null?void 0:F.display_name)||((C=b[O.user_id])==null?void 0:C.email)||O.user_id:""}),i.jsx(On,{children:O.action}),i.jsx(On,{children:O.resource}),i.jsx(On,{children:O.resource_id||""}),i.jsx(On,{children:O.ip||""}),i.jsx(On,{className:"text-right",children:i.jsx(ne,{variant:"outline",size:"sm",onClick:()=>{S(O),j(!0)},children:"Details"})})]},O.id)})})]})}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",a," of ",P]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ne,{variant:"outline",disabled:a<=1,onClick:()=>s(O=>Math.max(1,O-1)),children:"Prev"}),i.jsx(ne,{variant:"outline",disabled:a>=P,onClick:()=>s(O=>Math.min(P,O+1)),children:"Next"})]})]})]})]}),i.jsx(cn,{open:k,onOpenChange:j,children:i.jsxs(nn,{className:"max-w-2xl",children:[i.jsxs(rn,{children:[i.jsx(an,{children:"Log Details"}),i.jsx(Er,{children:_?new Date(_.created_at).toLocaleString():""})]}),_&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"User"}),i.jsx("div",{children:_.user_id?((U=b[_.user_id])==null?void 0:U.display_name)||((L=b[_.user_id])==null?void 0:L.email)||_.user_id:""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Action"}),i.jsx("div",{children:_.action})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Resource"}),i.jsx("div",{children:_.resource})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Resource ID"}),i.jsx("div",{children:_.resource_id||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"IP"}),i.jsx("div",{children:_.ip||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"User Agent"}),i.jsx("div",{className:"truncate",title:_.user_agent||void 0,children:_.user_agent||""})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Context"}),i.jsx("pre",{className:"max-h-64 overflow-auto rounded bg-muted p-3 text-xs",children:JSON.stringify(_.context??{},null,2)})]})]}),i.jsx(va,{children:i.jsx(ne,{variant:"outline",onClick:()=>j(!1),children:"Close"})})]})})]})}const zR=({children:e})=>{var d,h,m,g;const{user:t,signOut:n}=Xr();p.useState("profile");const[r,a]=p.useState(!0),[s,o]=p.useState(!1),l=Qa(),c=(v,x)=>v?v.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2):x.substring(0,2).toUpperCase(),u=async()=>{try{await n()}catch(v){console.error("Error signing out:",v)}},f=()=>{l("/reset-password")};return i.jsxs(hi,{children:[i.jsx(mi,{asChild:!0,children:e}),i.jsx(Wa,{className:"w-[300px] h-[320px] p-0 overflow-hidden",side:"left",align:"start",children:i.jsx("div",{className:"flex h-full",children:i.jsx("div",{className:"flex-1 p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Vr,{className:"h-10 w-10",children:[i.jsx(Js,{src:(d=t==null?void 0:t.user_metadata)==null?void 0:d.avatar_url,alt:((h=t==null?void 0:t.user_metadata)==null?void 0:h.full_name)||(t==null?void 0:t.email)}),i.jsx(Kr,{className:"text-sm bg-blue-100 text-blue-600",children:c((m=t==null?void 0:t.user_metadata)==null?void 0:m.full_name,(t==null?void 0:t.email)||"")})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-sm font-semibold",children:((g=t==null?void 0:t.user_metadata)==null?void 0:g.full_name)||"Audit 4"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t==null?void 0:t.email})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Online Status"}),i.jsx("div",{className:"text-xs font-medium",children:"Online"})]}),i.jsx(kl,{checked:r,onCheckedChange:a,className:"scale-75"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Notifications"}),i.jsx("div",{className:"text-xs font-medium",children:"Disabled"})]}),i.jsx(kl,{checked:s,onCheckedChange:o,className:"scale-75"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium",children:"Reset Password"}),i.jsx(ne,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:f,children:i.jsx(Zh,{className:"h-3 w-3 text-muted-foreground"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium",children:"Log Out"}),i.jsx(ne,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:u,children:i.jsx(tN,{className:"h-3 w-3 text-muted-foreground"})})]})]})]})})})})]})};function KIe({icon:e,label:t,active:n=!1,onClick:r,collapsed:a,permissions:s,requireAll:o=!1,resourceAny:l=[],requiredRoles:c=[]}){const{hasAnyPermission:u,hasAllPermissions:f,hasAnyRole:d,loading:h}=br();if(h)return null;const m=o?f(s):u(s),g=c.length===0||d(c);return!m||!g?null:i.jsxs("button",{type:"button",onClick:r,className:ke("group grid h-10 w-full grid-cols-[1.125rem,1fr] items-center rounded-md px-3 text-left text-sm transition-all duration-200 gap-2",n?"bg-blue-100 text-blue-700 border border-blue-200":"text-muted-foreground hover:bg-blue-50 hover:text-blue-600 hover:border hover:border-blue-100",a&&"grid-cols-[1.125rem,0fr]"),"aria-current":n?"page":void 0,title:a?t:void 0,children:[i.jsx(e,{className:`h-4 w-4 shrink-0 transition-colors ${n?"text-blue-600":"group-hover:text-blue-600"}`}),i.jsx("span",{className:ke("overflow-hidden whitespace-nowrap text-ellipsis transition-opacity duration-200",a&&"opacity-0 pointer-events-none"),children:t})]})}const wu=e=>{const t=qu[e];return Array.isArray(t)?t.filter(n=>n==="read"||n.startsWith("read_")).map(n=>`${e}.${n}`):[]},Hg={admin:{key:"admin",label:"Admin Panel",icon:ro,permissions:["admin_panel.read"],requireAll:!1,requiredRoles:[er.MASTER_AGENT],description:"Master agent control center"},chat:{key:"chat",label:"Chat",icon:Ks,permissions:wu("threads"),requireAll:!1,description:"View and manage conversations"},analytics:{key:"analytics",label:"Analytics",icon:HL,permissions:wu("analytics"),requireAll:!1,description:"View performance metrics and insights"},logs:{key:"logs",label:"Logs",icon:YL,permissions:["audit_logs.read"],requireAll:!0,description:"View user action logs"},contacts:{key:"contacts",label:"Contacts",icon:nN,permissions:wu("contacts"),requireAll:!1,description:"Manage customer contacts and identities"},platforms:{key:"platforms",label:"Connected Platforms",icon:ZL,permissions:wu("channels"),requireAll:!1,description:"Manage connected channels and integrations"},aiagents:{key:"aiagents",label:"AI Agents",icon:WL,permissions:wu("ai_profiles"),requireAll:!1,description:"Configure and manage AI agents"},humanagents:{key:"humanagents",label:"Human Agents",icon:t4,permissions:wu("super_agents"),requireAll:!1,description:"Manage human agent assignments and roles"},permissions:{key:"permissions",label:"Permissions",icon:ao,permissions:["roles.read"],requireAll:!0,requiredRoles:[er.MASTER_AGENT],description:"Manage roles and permissions"}},Fk=["admin","chat","analytics","logs","contacts","platforms","aiagents","humanagents","permissions"];function GIe(){const{hasAnyPermission:e,hasAllPermissions:t,hasAnyRole:n,hasPermissionDB:r,userRoles:a,userPermissions:s,loading:o}=br(),[l,c]=p.useState({});p.useEffect(()=>{if(o)return;let m=!1;return(async()=>{const v=await Promise.all(Fk.map(async x=>{const y=Hg[x],b=!y.requiredRoles||y.requiredRoles.length===0?!0:n(y.requiredRoles),w=await Promise.all(y.permissions.map(async j=>{const _=j.indexOf(".");if(_<0)return!1;const S=j.slice(0,_),T=j.slice(_+1);return await r(S,T)})),k=y.requireAll?w.every(Boolean):w.some(Boolean);return[x,b&&k]}));if(!m){const x={};for(const[y,b]of v)x[y]=b;c(x)}})(),()=>{m=!0}},[n,a,s,o]);const u=m=>{const g=Hg[m];if(!g)return!1;if(l[m]===!0)return!0;const v=g.requireAll?t(g.permissions):e(g.permissions),x=!g.requiredRoles||g.requiredRoles.length===0?!0:n(g.requiredRoles);return v&&x},f=()=>Fk.filter(m=>u(m));return{canAccessNavItem:u,getAccessibleNavItems:f,getDefaultNavItem:()=>{const m=f();return m.length>0?m[0]:null},getNavItem:m=>Hg[m],navigationConfig:Hg}}const Vg=({step:e,title:t,description:n,emoji:r})=>i.jsxs("div",{className:"flex items-start gap-4 rounded-lg border border-border bg-card p-4 shadow-sm transition-transform hover:-translate-y-0.5",children:[i.jsx("div",{className:"text-2xl animate-float","aria-hidden":!0,children:r}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(vt,{variant:"secondary",children:[e,"."]}),i.jsx("h3",{className:"text-base font-semibold text-foreground",children:t})]}),i.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n})]})]}),qR=()=>{var P,U,L,O,F;const[e,t]=p.useState("chat"),[n,r]=p.useState(!1),{user:a,signOut:s,setAccountDeactivated:o,accountDeactivated:l}=Xr();Qa();const[c,u]=yN(),{loading:f,hasRole:d}=br(),{getDefaultNavItem:h,getNavItem:m,canAccessNavItem:g,getAccessibleNavItems:v}=GIe(),[x,y]=p.useState(!1),[b,w]=p.useState(!1),[k,j]=p.useState(null),[_,S]=p.useState(null),T="synka_ai_paused_ack",N=Fk,A=(C,z)=>{const I=new URLSearchParams(c);I.set("menu",C),u(I,z)};p.useEffect(()=>{if(f)return;const C=c.get("menu");if(C&&N.includes(C)){const z=C;if(g(z))z!==e&&t(z);else{const I=h();I&&I!==e&&(t(I),A(I,{replace:!0}))}}else if(!C){const z=h();A(z||"chat",{replace:!0})}},[c,g,h,f]),p.useEffect(()=>{if(f)return;const C=h();(!N.includes(e)||!g(e))&&C&&(t(C),A(C,{replace:!0}))},[h,g,e,N,f]);const D=async()=>{try{await s()}catch(C){console.error("Error signing out:",C)}},B=(C,z)=>C?C.split(" ").map(I=>I[0]).join("").toUpperCase().slice(0,2):z.substring(0,2).toUpperCase();p.useEffect(()=>{(async()=>{var z;try{const{data:I}=await ie.auth.getUser(),$=(z=I==null?void 0:I.user)==null?void 0:z.id;if(!$)return;const{data:K}=await ie.from("org_members").select("org_id").eq("user_id",$).limit(1).maybeSingle(),X=K==null?void 0:K.org_id;if(!X)return;const{data:V,error:W}=await wt.from("org_settings").select("ai_paused, ai_paused_at, ai_paused_by_user_id").eq("org_id",X).maybeSingle();if(W)throw W;const ae=!!(V!=null&&V.ai_paused);w(ae),j((V==null?void 0:V.ai_paused_at)??null);const G=V==null?void 0:V.ai_paused_by_user_id;if(G){let le=null;try{const{data:se}=await wt.from("users_profile").select("user_id, display_name").eq("user_id",G).maybeSingle();if(le=(se==null?void 0:se.display_name)??null,!le){const{data:Q}=await wt.from("v_users").select("id, email").eq("id",G).maybeSingle();le=(Q==null?void 0:Q.email)??G}}catch{le=G}S(le)}else S(null)}catch{}})()},[]),p.useEffect(()=>{b?localStorage.getItem(T)||y(!0):(localStorage.removeItem(T),y(!1))},[b]);const E=()=>{try{localStorage.setItem(T,Date.now().toString())}catch{}y(!1)},R=()=>{t("admin"),A("admin")};return l?i.jsx("div",{className:"min-h-screen bg-background text-foreground",children:i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Akun Dinonaktifkan"}),i.jsx("p",{className:"text-gray-600",children:"Akun Anda telah dinonaktifkan dan tidak dapat mengakses sistem."})]})})}):i.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[i.jsxs("div",{className:"mx-auto flex min-h-screen",children:[i.jsxs("aside",{className:`shrink-0 border-r border-sidebar-border bg-sidebar transition-all duration-300 ease-in-out ${n?"w-64":"w-[4.7rem]"} md:flex md:flex-col p-4 sticky top-0 h-screen overflow-y-auto`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[i.jsx("div",{className:"flex items-center justify-center px-2 py-3 transition-all duration-200",children:n?i.jsx("img",{src:"/synka.png",alt:"Synka",className:"h-10 w-auto object-contain transition-all duration-300 scale-125"}):i.jsx("img",{src:"/synka_logo.png",alt:"Synka Logo",className:"h-10 w-auto object-contain transition-all duration-300 scale-110"})}),i.jsx(Ed,{className:"mb-4 mt-1"}),i.jsx("nav",{className:"flex flex-col gap-1 flex-1",children:v().map(C=>{const z=m(C);return i.jsx(KIe,{icon:z.icon,label:z.label,active:e===C,onClick:()=>{t(C),A(C)},collapsed:!n,permissions:z.permissions,requireAll:z.requireAll,resourceAny:z.resourceAny,requiredRoles:z.requiredRoles},C)})}),i.jsxs("div",{className:"mt-auto flex flex-col gap-1 pt-6",children:[i.jsx(Ed,{className:"mb-3"}),i.jsx(zR,{children:i.jsxs("button",{type:"button",className:ke("group grid h-10 w-full grid-cols-[1.125rem,1fr] items-center rounded-md px-3 text-left text-sm transition-all duration-200 gap-2","text-muted-foreground hover:bg-blue-50 hover:text-blue-600 hover:border hover:border-blue-100",!n&&"grid-cols-[1.125rem,0fr]"),title:n?void 0:"Profile",children:[i.jsx(dK,{className:"h-4 w-4 shrink-0 transition-colors group-hover:text-blue-600"}),i.jsx("span",{className:ke("overflow-hidden whitespace-nowrap text-ellipsis transition-opacity duration-200",!n&&"opacity-0 pointer-events-none"),children:"Profile"})]})})]})]}),i.jsxs("main",{className:"flex-1",children:[i.jsx("header",{className:"sticky top-0 z-10 border-b border-border bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:i.jsxs("div",{className:"flex items-center justify-between gap-4 px-4 py-3 md:px-8",children:[i.jsx("div",{className:"flex items-center gap-2 md:gap-3"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx(vt,{className:"hidden sm:inline-flex bg-success text-success-foreground cursor-help",children:"Online"})}),i.jsx(he,{children:i.jsx("p",{children:"Status pengguna saat ini: Online"})})]}),i.jsxs("div",{className:"text-right hidden sm:block min-w-0",children:[i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("div",{className:"text-sm font-medium max-w-[28ch] truncate cursor-help",children:((P=a==null?void 0:a.user_metadata)==null?void 0:P.full_name)||"User"})}),i.jsx(he,{children:i.jsx("p",{children:"Nama lengkap pengguna"})})]}),i.jsxs(me,{children:[i.jsx(pe,{asChild:!0,children:i.jsx("div",{className:"text-xs text-muted-foreground max-w-[32ch] truncate cursor-help",children:a==null?void 0:a.email})}),i.jsx(he,{children:i.jsx("p",{children:"Alamat email pengguna"})})]})]}),i.jsxs(Su,{children:[i.jsx(Nu,{asChild:!0,children:i.jsx(ne,{variant:"ghost",className:"relative h-9 w-9 rounded-full",children:i.jsxs(Vr,{className:"h-9 w-9",children:[i.jsx(Js,{src:(U=a==null?void 0:a.user_metadata)==null?void 0:U.avatar_url,alt:((L=a==null?void 0:a.user_metadata)==null?void 0:L.full_name)||(a==null?void 0:a.email)}),i.jsx(Kr,{className:"text-sm",children:B((O=a==null?void 0:a.user_metadata)==null?void 0:O.full_name,(a==null?void 0:a.email)||"")})]})})}),i.jsxs(rc,{className:"w-56",align:"end",forceMount:!0,children:[i.jsx(d5,{className:"font-normal",children:i.jsxs("div",{className:"flex flex-col space-y-1",children:[i.jsx("p",{className:"text-sm font-medium leading-none",children:((F=a==null?void 0:a.user_metadata)==null?void 0:F.full_name)||"User"}),i.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:a==null?void 0:a.email})]})}),i.jsx(i_,{}),i.jsx(zR,{children:i.jsxs("button",{className:"flex items-center w-full px-2 py-1.5 text-sm text-left hover:bg-accent hover:text-accent-foreground rounded-sm",children:[i.jsx(Vv,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Profile"})]})}),i.jsx(i_,{}),i.jsxs(ai,{onClick:D,children:[i.jsx(tN,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Log out"})]})]})]})]})]})}),i.jsx("section",{className:"px-4 py-6 md:px-8",children:e==="admin"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Admin Panel"}),i.jsx(HIe,{})]}):e==="chat"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Chat Inbox"}),i.jsx(Nle,{})]}):e==="analytics"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Analytics Dashboard"}),i.jsx(Wt,{permission:"analytics.read",children:i.jsx(yIe,{})})]}):e==="contacts"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Contacts Management"}),i.jsx(Wt,{permission:"contacts.read",children:i.jsx($le,{})})]}):e==="platforms"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Connected Platforms"}),i.jsx(Wt,{permission:"channels.read",children:i.jsx(Wle,{})})]}):e==="aiagents"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"AI Agents"}),i.jsx(Wt,{permission:"ai_profiles.read",children:i.jsx(DIe,{})})]}):e==="humanagents"?i.jsxs(Wt,{permission:"super_agents.read",fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Human Agents."}),children:[i.jsx("h1",{className:"sr-only",children:"Human Agents"}),i.jsx(LIe,{})]}):e==="permissions"?i.jsx(Wq,{role:er.MASTER_AGENT,fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Permissions."}),children:i.jsxs(Wt,{permission:"roles.read",children:[i.jsx("h1",{className:"sr-only",children:"Permissions"}),i.jsx(UIe,{})]})}):e==="logs"?i.jsxs(Wt,{permission:"audit_logs.read",fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Logs."}),children:[i.jsx("h1",{className:"sr-only",children:"Logs"}),i.jsx(VIe,{})]}):i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Selamat datang kembali di Synka!"}),i.jsxs("div",{className:"mt-6 grid gap-4 md:max-w-2xl",children:[i.jsx(Vg,{step:1,title:"Hubungkan Platform",description:"Mulai terima pesan dari Whatsapp, IG, dan FB Anda!",emoji:""}),i.jsx(Vg,{step:2,title:"Buat AI Agent",description:"Jawab pesan masuk dengan Agent AI Anda.",emoji:""}),i.jsx(Vg,{step:3,title:"Undang Agen Manusia",description:"Undang tim Anda untuk membantu menjawab chat.",emoji:""}),i.jsx(Vg,{step:4,title:"Konek AI Agent ke Inbox",description:"Hubungkan AI Agent dan Human Agent ke platform.",emoji:""})]}),i.jsxs("p",{className:"mt-4 text-sm text-muted-foreground",children:["Butuh bantuan lebih? ",i.jsx("a",{className:"text-brand underline underline-offset-4",href:"#",children:"Lihat Tutorial Youtube kami"})]})]})})]})]}),i.jsx($re,{open:x,onClose:E,isMasterAgent:d(er.MASTER_AGENT),pausedByName:_,pausedAt:k,onOpenAdminPanel:d(er.MASTER_AGENT)?R:void 0})]})};function YIe(){var l,c,u,f;const{user:e,signOut:t}=Xr(),[n,r]=p.useState(!1),a=async()=>{r(!0);try{await t(),Le.success("Signed out successfully")}catch{Le.error("Failed to sign out")}finally{r(!1)}};if(!e)return null;const s=(d,h)=>d?d.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2):h.substring(0,2).toUpperCase(),o=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return i.jsxs(Oe,{className:"w-full max-w-md mx-auto",children:[i.jsxs(et,{className:"text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsxs(Vr,{className:"h-20 w-20",children:[i.jsx(Js,{src:(l=e.user_metadata)==null?void 0:l.avatar_url,alt:((c=e.user_metadata)==null?void 0:c.full_name)||e.email}),i.jsx(Kr,{className:"text-lg",children:s((u=e.user_metadata)==null?void 0:u.full_name,e.email||"")})]})}),i.jsx(Ze,{className:"text-xl",children:((f=e.user_metadata)==null?void 0:f.full_name)||"User"}),i.jsx(vi,{children:e.email}),i.jsx("div",{className:"flex justify-center mt-2",children:i.jsxs(vt,{variant:"secondary",className:"flex items-center gap-1",children:[i.jsx(ao,{className:"w-3 h-3"}),e.email_confirmed_at?"Verified":"Unverified"]})})]}),i.jsxs(Qe,{className:"space-y-4",children:[i.jsx(Ed,{}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Hv,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.email})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Cc,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Member since"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:o(e.created_at)})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Vv,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"User ID"}),i.jsxs("p",{className:"text-sm text-muted-foreground font-mono",children:[e.id.substring(0,8),"..."]})]})]})]}),i.jsx(Ed,{}),i.jsxs(ne,{variant:"outline",className:"w-full",onClick:a,disabled:n,children:[i.jsx(tN,{className:"w-4 h-4 mr-2"}),n?"Signing out...":"Sign Out"]})]})]})}function XIe(){const e=Qa();return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs(ne,{variant:"ghost",onClick:()=>e("/"),className:"mb-4",children:[i.jsx(dp,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your account settings and preferences"})]}),i.jsx(YIe,{})]})})}const WR=e=>e.replace(/\s/g,""),JIe=[{id:"lowercase",test:e=>/[a-z]/.test(e),message:"Minimal 1 huruf kecil (a-z)"},{id:"uppercase",test:e=>/[A-Z]/.test(e),message:"Minimal 1 huruf besar (A-Z)"},{id:"number",test:e=>/[0-9]/.test(e),message:"Minimal 1 angka (0-9)"},{id:"symbol",test:e=>/[^A-Za-z0-9]/.test(e),message:"Minimal 1 simbol (contoh: !@#$)"},{id:"length",test:e=>e.length>=8,message:"Minimal 8 karakter"}],HR=e=>JIe.filter(t=>!t.test(e)).map(t=>t.message);function VR(){const[e,t]=p.useState(""),[n,r]=p.useState(""),[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[f,d]=p.useState(!1),[h,m]=p.useState(!1),g=Qa();p.useEffect(()=>{(async()=>{try{const k=new URL(window.location.href).searchParams.get("code");k&&await ie.auth.exchangeCodeForSession(k);const{data:{session:j}}=await ie.auth.getSession();j||u("Invalid or expired reset link. Please request a new password reset.")}catch(w){console.warn("Password setup init failed",w)}})()},[]);const v=async b=>{if(b.preventDefault(),l(!0),u(null),!e){u("Kata sandi baru belum diisi."),m(!0),l(!1);return}if(HR(e).length>0){u("Pastikan kata sandi memenuhi semua persyaratan."),m(!0),l(!1);return}if(e!==n){u("Konfirmasi kata sandi tidak sama."),l(!1);return}try{const{error:k}=await ie.auth.updateUser({password:e});if(k)throw k;try{const{data:{user:j}}=await ie.auth.getUser();j&&await ie.from("users_profile").update({password_set:!0}).eq("user_id",j.id)}catch(j){console.warn("Failed to update password_set flag:",j)}d(!0),Le.success("Password updated successfully!");try{await ie.auth.signOut()}catch{}try{localStorage.removeItem("otpVerified"),localStorage.removeItem("otpRequired"),localStorage.removeItem("app.lastAuthEvent"),localStorage.removeItem("auth.intent")}catch{}setTimeout(()=>{g("/")},1500)}catch(k){console.error("Password reset error:",k),u(k instanceof Error?k.message:"Gagal memperbarui kata sandi."),Le.error("Gagal memperbarui kata sandi.")}finally{l(!1)}},x=h&&e.length>0,y=p.useMemo(()=>x?HR(e):[],[e,x]);return f?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Oe,{className:"w-full max-w-md",children:[i.jsxs(et,{className:"text-center",children:[i.jsx(Ze,{className:"text-2xl font-bold text-green-600",children:"Success!"}),i.jsx(vi,{children:"Your password has been updated successfully. You will be redirected to the login page shortly."})]}),i.jsx(Qe,{className:"text-center",children:i.jsx(ne,{onClick:()=>g("/"),className:"w-full",children:"Go to Login"})})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Oe,{className:"w-full max-w-md",children:[i.jsxs(et,{className:"space-y-1",children:[i.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>g("/"),className:"absolute top-4 left-4",children:[i.jsx(dp,{className:"w-4 h-4 mr-2"}),"Back to Login"]}),i.jsxs("div",{className:"text-center",children:[i.jsx(Ze,{className:"text-2xl font-bold",children:"Reset Password"}),i.jsx(vi,{children:"Enter your new password below"})]})]}),i.jsxs(Qe,{children:[c&&i.jsx(dm,{className:"mb-4 border-red-200 bg-red-50",children:i.jsx(fm,{className:"text-red-800",children:c})}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"password",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Zh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Je,{id:"password",type:a?"text":"password",placeholder:"Enter new password",value:e,onChange:b=>{h||m(!0),t(WR(b.target.value))},onKeyDown:b=>{b.key===" "&&b.preventDefault()},className:"pl-10 pr-10",required:!0,minLength:8}),i.jsx(ne,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>s(!a),children:a?i.jsx(XL,{className:"h-4 w-4"}):i.jsx(eN,{className:"h-4 w-4"})})]}),y.length>0&&i.jsx("div",{className:"mt-2 space-y-1",children:y.map(b=>i.jsxs("p",{className:"flex items-center gap-2 text-xs text-red-600",children:[i.jsx(GL,{className:"h-3 w-3"}),b]},b))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"confirm-password",children:"Confirm New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Zh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Je,{id:"confirm-password",type:a?"text":"password",placeholder:"Confirm new password",value:n,onChange:b=>r(WR(b.target.value)),onKeyDown:b=>{b.key===" "&&b.preventDefault()},className:"pl-10",required:!0,minLength:8})]})]}),i.jsx(ne,{type:"submit",className:"w-full",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating password..."]}):"Update Password"})]})]})]})})}var QIe=Object.defineProperty,ZIe=Object.defineProperties,eRe=Object.getOwnPropertyDescriptors,oy=Object.getOwnPropertySymbols,Hq=Object.prototype.hasOwnProperty,Vq=Object.prototype.propertyIsEnumerable,KR=(e,t,n)=>t in e?QIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tRe=(e,t)=>{for(var n in t||(t={}))Hq.call(t,n)&&KR(e,n,t[n]);if(oy)for(var n of oy(t))Vq.call(t,n)&&KR(e,n,t[n]);return e},nRe=(e,t)=>ZIe(e,eRe(t)),rRe=(e,t)=>{var n={};for(var r in e)Hq.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oy)for(var r of oy(e))t.indexOf(r)<0&&Vq.call(e,r)&&(n[r]=e[r]);return n};function aRe(e){let t=setTimeout(e,0),n=setTimeout(e,10),r=setTimeout(e,50);return[t,n,r]}function iRe(e){let t=p.useRef();return p.useEffect(()=>{t.current=e}),t.current}var sRe=18,Kq=40,oRe=`${Kq}px`,lRe=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function cRe({containerRef:e,inputRef:t,pushPasswordManagerStrategy:n,isFocused:r}){let[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(!1),f=p.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&a&&o,[a,o,n]),d=p.useCallback(()=>{let h=e.current,m=t.current;if(!h||!m||c||n==="none")return;let g=h,v=g.getBoundingClientRect().left+g.offsetWidth,x=g.getBoundingClientRect().top+g.offsetHeight/2,y=v-sRe,b=x;document.querySelectorAll(lRe).length===0&&document.elementFromPoint(y,b)===h||(s(!0),u(!0))},[e,t,c,n]);return p.useEffect(()=>{let h=e.current;if(!h||n==="none")return;function m(){let v=window.innerWidth-h.getBoundingClientRect().right;l(v>=Kq)}m();let g=setInterval(m,1e3);return()=>{clearInterval(g)}},[e,n]),p.useEffect(()=>{let h=r||document.activeElement===t.current;if(n==="none"||!h)return;let m=setTimeout(d,0),g=setTimeout(d,2e3),v=setTimeout(d,5e3),x=setTimeout(()=>{u(!0)},6e3);return()=>{clearTimeout(m),clearTimeout(g),clearTimeout(v),clearTimeout(x)}},[t,r,n,d]),{hasPWMBadge:a,willPushPWMBadge:f,PWM_BADGE_SPACE_WIDTH:oRe}}var Gq=p.createContext({}),Yq=p.forwardRef((e,t)=>{var n=e,{value:r,onChange:a,maxLength:s,textAlign:o="left",pattern:l,placeholder:c,inputMode:u="numeric",onComplete:f,pushPasswordManagerStrategy:d="increase-width",pasteTransformer:h,containerClassName:m,noScriptCSSFallback:g=uRe,render:v,children:x}=n,y=rRe(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),b,w,k,j,_;let[S,T]=p.useState(typeof y.defaultValue=="string"?y.defaultValue:""),N=r??S,A=iRe(N),D=p.useCallback(xe=>{a==null||a(xe),T(xe)},[a]),B=p.useMemo(()=>l?typeof l=="string"?new RegExp(l):l:null,[l]),E=p.useRef(null),R=p.useRef(null),P=p.useRef({value:N,onChange:D,isIOS:typeof window<"u"&&((w=(b=window==null?void 0:window.CSS)==null?void 0:b.supports)==null?void 0:w.call(b,"-webkit-touch-callout","none"))}),U=p.useRef({prev:[(k=E.current)==null?void 0:k.selectionStart,(j=E.current)==null?void 0:j.selectionEnd,(_=E.current)==null?void 0:_.selectionDirection]});p.useImperativeHandle(t,()=>E.current,[]),p.useEffect(()=>{let xe=E.current,J=R.current;if(!xe||!J)return;P.current.value!==xe.value&&P.current.onChange(xe.value),U.current.prev=[xe.selectionStart,xe.selectionEnd,xe.selectionDirection];function fe(){if(document.activeElement!==xe){I(null),K(null);return}let Ee=xe.selectionStart,ze=xe.selectionEnd,gt=xe.selectionDirection,ut=xe.maxLength,ee=xe.value,We=U.current.prev,st=-1,oe=-1,ve;if(ee.length!==0&&Ee!==null&&ze!==null){let Be=Ee===ze,xt=Ee===ee.length&&ee.length<ut;if(Be&&!xt){let yt=Ee;if(yt===0)st=0,oe=1,ve="forward";else if(yt===ut)st=yt-1,oe=yt,ve="backward";else if(ut>1&&ee.length>1){let He=0;if(We[0]!==null&&We[1]!==null){ve=yt<We[1]?"backward":"forward";let lt=We[0]===We[1]&&We[0]<ut;ve==="backward"&&!lt&&(He=-1)}st=He+yt,oe=He+yt+1}}st!==-1&&oe!==-1&&st!==oe&&E.current.setSelectionRange(st,oe,ve)}let De=st!==-1?st:Ee,Me=oe!==-1?oe:ze,Z=ve??gt;I(De),K(Me),U.current.prev=[De,Me,Z]}if(document.addEventListener("selectionchange",fe,{capture:!0}),fe(),document.activeElement===xe&&C(!0),!document.getElementById("input-otp-style")){let Ee=document.createElement("style");if(Ee.id="input-otp-style",document.head.appendChild(Ee),Ee.sheet){let ze="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";rh(Ee.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),rh(Ee.sheet,`[data-input-otp]:autofill { ${ze} }`),rh(Ee.sheet,`[data-input-otp]:-webkit-autofill { ${ze} }`),rh(Ee.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),rh(Ee.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Ce=()=>{J&&J.style.setProperty("--root-height",`${xe.clientHeight}px`)};Ce();let Te=new ResizeObserver(Ce);return Te.observe(xe),()=>{document.removeEventListener("selectionchange",fe,{capture:!0}),Te.disconnect()}},[]);let[L,O]=p.useState(!1),[F,C]=p.useState(!1),[z,I]=p.useState(null),[$,K]=p.useState(null);p.useEffect(()=>{aRe(()=>{var xe,J,fe,Ce;(xe=E.current)==null||xe.dispatchEvent(new Event("input"));let Te=(J=E.current)==null?void 0:J.selectionStart,Ee=(fe=E.current)==null?void 0:fe.selectionEnd,ze=(Ce=E.current)==null?void 0:Ce.selectionDirection;Te!==null&&Ee!==null&&(I(Te),K(Ee),U.current.prev=[Te,Ee,ze])})},[N,F]),p.useEffect(()=>{A!==void 0&&N!==A&&A.length<s&&N.length===s&&(f==null||f(N))},[s,f,A,N]);let X=cRe({containerRef:R,inputRef:E,pushPasswordManagerStrategy:d,isFocused:F}),V=p.useCallback(xe=>{let J=xe.currentTarget.value.slice(0,s);if(J.length>0&&B&&!B.test(J)){xe.preventDefault();return}typeof A=="string"&&J.length<A.length&&document.dispatchEvent(new Event("selectionchange")),D(J)},[s,D,A,B]),W=p.useCallback(()=>{var xe;if(E.current){let J=Math.min(E.current.value.length,s-1),fe=E.current.value.length;(xe=E.current)==null||xe.setSelectionRange(J,fe),I(J),K(fe)}C(!0)},[s]),ae=p.useCallback(xe=>{var J,fe;let Ce=E.current;if(!h&&(!P.current.isIOS||!xe.clipboardData||!Ce))return;let Te=xe.clipboardData.getData("text/plain"),Ee=h?h(Te):Te;xe.preventDefault();let ze=(J=E.current)==null?void 0:J.selectionStart,gt=(fe=E.current)==null?void 0:fe.selectionEnd,ut=(ze!==gt?N.slice(0,ze)+Ee+N.slice(gt):N.slice(0,ze)+Ee+N.slice(ze)).slice(0,s);if(ut.length>0&&B&&!B.test(ut))return;Ce.value=ut,D(ut);let ee=Math.min(ut.length,s-1),We=ut.length;Ce.setSelectionRange(ee,We),I(ee),K(We)},[s,D,B,N]),G=p.useMemo(()=>({position:"relative",cursor:y.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[y.disabled]),le=p.useMemo(()=>({position:"absolute",inset:0,width:X.willPushPWMBadge?`calc(100% + ${X.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:X.willPushPWMBadge?`inset(0 ${X.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[X.PWM_BADGE_SPACE_WIDTH,X.willPushPWMBadge,o]),se=p.useMemo(()=>p.createElement("input",nRe(tRe({autoComplete:y.autoComplete||"one-time-code"},y),{"data-input-otp":!0,"data-input-otp-placeholder-shown":N.length===0||void 0,"data-input-otp-mss":z,"data-input-otp-mse":$,inputMode:u,pattern:B==null?void 0:B.source,"aria-placeholder":c,style:le,maxLength:s,value:N,ref:E,onPaste:xe=>{var J;ae(xe),(J=y.onPaste)==null||J.call(y,xe)},onChange:V,onMouseOver:xe=>{var J;O(!0),(J=y.onMouseOver)==null||J.call(y,xe)},onMouseLeave:xe=>{var J;O(!1),(J=y.onMouseLeave)==null||J.call(y,xe)},onFocus:xe=>{var J;W(),(J=y.onFocus)==null||J.call(y,xe)},onBlur:xe=>{var J;C(!1),(J=y.onBlur)==null||J.call(y,xe)}})),[V,W,ae,u,le,s,$,z,y,B==null?void 0:B.source,N]),Q=p.useMemo(()=>({slots:Array.from({length:s}).map((xe,J)=>{var fe;let Ce=F&&z!==null&&$!==null&&(z===$&&J===z||J>=z&&J<$),Te=N[J]!==void 0?N[J]:null,Ee=N[0]!==void 0?null:(fe=c==null?void 0:c[J])!=null?fe:null;return{char:Te,placeholderChar:Ee,isActive:Ce,hasFakeCaret:Ce&&Te===null}}),isFocused:F,isHovering:!y.disabled&&L}),[F,L,s,$,z,y.disabled,N]),_e=p.useMemo(()=>v?v(Q):p.createElement(Gq.Provider,{value:Q},x),[x,Q,v]);return p.createElement(p.Fragment,null,g!==null&&p.createElement("noscript",null,p.createElement("style",null,g)),p.createElement("div",{ref:R,"data-input-otp-container":!0,style:G,className:m},_e,p.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},se)))});Yq.displayName="Input";function rh(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var uRe=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const Xq=p.forwardRef(({className:e,containerClassName:t,...n},r)=>i.jsx(Yq,{ref:r,containerClassName:ke("flex items-center gap-2 has-[:disabled]:opacity-50",t),className:ke("disabled:cursor-not-allowed",e),...n}));Xq.displayName="InputOTP";const Jq=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ke("flex items-center",e),...t}));Jq.displayName="InputOTPGroup";const tc=p.forwardRef(({index:e,className:t,...n},r)=>{const a=p.useContext(Gq),{char:s,hasFakeCaret:o,isActive:l}=a.slots[e];return i.jsxs("div",{ref:r,className:ke("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",l&&"z-10 ring-2 ring-ring ring-offset-background",t),...n,children:[s,o&&i.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});tc.displayName="InputOTPSlot";const dRe=p.forwardRef(({...e},t)=>i.jsx("div",{ref:t,role:"separator",...e,children:i.jsx(tK,{})}));dRe.displayName="InputOTPSeparator";function fRe(){const e=Qa(),t=Pl(),{user:n,session:r,otpRequired:a,setOtpVerified:s}=Xr(),[o,l]=p.useState(""),[c,u]=p.useState(!1),[f,d]=p.useState(!1),[h,m]=p.useState(null),[g,v]=p.useState(null),[x,y]=p.useState(!1),[b,w]=p.useState(0),[k,j]=p.useState(0);p.useEffect(()=>{v((n==null?void 0:n.email)??null),(!n||!a)&&e("/",{replace:!0});try{const N=new URL(window.location.href),A=N.searchParams.get("type"),D=!!N.searchParams.get("code"),E=(window.location.hash||"").includes("access_token=");y(A==="recovery"||D||E);const R=localStorage.getItem("otpCooldownUntil"),P=R?parseInt(R,10):0;P&&P>Date.now()&&w(P)}catch{}},[n,a,e]),p.useEffect(()=>{if(!b){j(0);return}const N=()=>{const D=Math.ceil((b-Date.now())/1e3);if(D<=0){j(0),w(0);try{localStorage.removeItem("otpCooldownUntil")}catch{}}else j(D)};N();const A=setInterval(N,1e3);return()=>clearInterval(A)},[b]);const _=async N=>{var A,D;N.preventDefault(),u(!0),m(null);try{const B=n==null?void 0:n.email,{data:E,error:R}=await ie.rpc("verify_email_2fa",{p_code:o,p_session_minutes:10,p_user:n==null?void 0:n.id});if(R)throw R;if(!E)throw new Error("Invalid code");s(!0);try{localStorage.setItem("otpVerified","true"),localStorage.removeItem("auth.intent")}catch{}if(Le.success("Verification successful"),(((A=t==null?void 0:t.state)==null?void 0:A.intent)||null)==="recovery"||x)e("/reset-password",{replace:!0});else{const U=((D=t==null?void 0:t.state)==null?void 0:D.from)||"/";e(U,{replace:!0})}}catch(B){m((B==null?void 0:B.message)||"Verification failed"),Le.error("Verification failed")}finally{u(!1)}},S=async()=>{if(!(k>0)){d(!0);try{await ie.functions.invoke("send-2fa-login-email",{headers:r!=null&&r.access_token?{Authorization:`Bearer ${r.access_token}`}:void 0}),Le.success("A new code was sent");const N=Date.now()+3e4;w(N);try{localStorage.setItem("otpCooldownUntil",String(N))}catch{}}catch{Le.error("Could not resend code")}finally{d(!1)}}},T=async()=>{try{await ie.auth.signOut()}catch{}try{localStorage.removeItem("otpVerified"),localStorage.removeItem("otpRequired"),localStorage.removeItem("auth.intent"),localStorage.removeItem("otpCooldownUntil")}catch{}e("/",{replace:!0})};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Oe,{className:"w-full max-w-md",children:[i.jsxs(et,{className:"space-y-1 text-center",children:[i.jsx(Ze,{className:"text-2xl font-bold",children:"Enter verification code"}),i.jsxs(vi,{children:["We sent a 6-digit code to ",g?i.jsx("span",{className:"font-medium",children:g}):"your email","."]})]}),i.jsxs(Qe,{children:[h&&i.jsx(dm,{className:"mb-4 border-red-200 bg-red-50",children:i.jsx(fm,{className:"text-red-800",children:h})}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx(Xq,{maxLength:6,value:o,onChange:l,autoFocus:!0,children:i.jsxs(Jq,{children:[i.jsx(tc,{index:0}),i.jsx(tc,{index:1}),i.jsx(tc,{index:2}),i.jsx(tc,{index:3}),i.jsx(tc,{index:4}),i.jsx(tc,{index:5})]})})}),i.jsx(ne,{type:"submit",className:"w-full",disabled:c||o.length!==6,children:c?i.jsxs(i.Fragment,{children:[i.jsx(zt,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify"}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsx("span",{children:"Didn't get the code?"}),i.jsx(ne,{type:"button",variant:"link",className:"px-0",onClick:S,disabled:f||k>0,children:f?"Resending...":k>0?`Resend in ${k}s`:"Resend code"})]}),i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(ne,{type:"button",variant:"ghost",onClick:T,children:"Sign out"})})]})]})]})})}function hRe(){const e=Qa();return p.useEffect(()=>{(async()=>{try{try{const n=[];for(let a=0;a<localStorage.length;a++){const s=localStorage.key(a);s&&n.push(s)}n.forEach(a=>{try{localStorage.removeItem(a)}catch{}});const r=[];for(let a=0;a<sessionStorage.length;a++){const s=sessionStorage.key(a);s&&r.push(s)}r.forEach(a=>{try{sessionStorage.removeItem(a)}catch{}})}catch(n){console.warn("Error clearing cache:",n)}await ie.auth.signOut()}catch{}e("/",{replace:!0})})()},[e]),null}const mRe=()=>{const e=Pl();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function pRe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const gRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,vRe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,xRe={};function GR(e,t){return(xRe.jsx?vRe:gRe).test(e)}const yRe=/[ \t\n\f\r]/g;function bRe(e){return typeof e=="object"?e.type==="text"?YR(e.value):!1:YR(e)}function YR(e){return e.replace(yRe,"")===""}class Wp{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Wp.prototype.normal={};Wp.prototype.property={};Wp.prototype.space=void 0;function Qq(e,t){const n={},r={};for(const a of e)Object.assign(n,a.property),Object.assign(r,a.normal);return new Wp(n,r,t)}function Bk(e){return e.toLowerCase()}class Ia{constructor(t,n){this.attribute=n,this.property=t}}Ia.prototype.attribute="";Ia.prototype.booleanish=!1;Ia.prototype.boolean=!1;Ia.prototype.commaOrSpaceSeparated=!1;Ia.prototype.commaSeparated=!1;Ia.prototype.defined=!1;Ia.prototype.mustUseProperty=!1;Ia.prototype.number=!1;Ia.prototype.overloadedBoolean=!1;Ia.prototype.property="";Ia.prototype.spaceSeparated=!1;Ia.prototype.space=void 0;let wRe=0;const Pt=iu(),Zn=iu(),Uk=iu(),$e=iu(),bn=iu(),cd=iu(),Da=iu();function iu(){return 2**++wRe}const zk=Object.freeze(Object.defineProperty({__proto__:null,boolean:Pt,booleanish:Zn,commaOrSpaceSeparated:Da,commaSeparated:cd,number:$e,overloadedBoolean:Uk,spaceSeparated:bn},Symbol.toStringTag,{value:"Module"})),vj=Object.keys(zk);class CA extends Ia{constructor(t,n,r,a){let s=-1;if(super(t,n),XR(this,"space",a),typeof r=="number")for(;++s<vj.length;){const o=vj[s];XR(this,vj[s],(r&zk[o])===zk[o])}}}CA.prototype.defined=!0;function XR(e,t,n){n&&(e[t]=n)}function Cf(e){const t={},n={};for(const[r,a]of Object.entries(e.properties)){const s=new CA(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Bk(r)]=r,n[Bk(s.attribute)]=r}return new Wp(t,n,e.space)}const Zq=Cf({properties:{ariaActiveDescendant:null,ariaAtomic:Zn,ariaAutoComplete:null,ariaBusy:Zn,ariaChecked:Zn,ariaColCount:$e,ariaColIndex:$e,ariaColSpan:$e,ariaControls:bn,ariaCurrent:null,ariaDescribedBy:bn,ariaDetails:null,ariaDisabled:Zn,ariaDropEffect:bn,ariaErrorMessage:null,ariaExpanded:Zn,ariaFlowTo:bn,ariaGrabbed:Zn,ariaHasPopup:null,ariaHidden:Zn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:bn,ariaLevel:$e,ariaLive:null,ariaModal:Zn,ariaMultiLine:Zn,ariaMultiSelectable:Zn,ariaOrientation:null,ariaOwns:bn,ariaPlaceholder:null,ariaPosInSet:$e,ariaPressed:Zn,ariaReadOnly:Zn,ariaRelevant:null,ariaRequired:Zn,ariaRoleDescription:bn,ariaRowCount:$e,ariaRowIndex:$e,ariaRowSpan:$e,ariaSelected:Zn,ariaSetSize:$e,ariaSort:null,ariaValueMax:$e,ariaValueMin:$e,ariaValueNow:$e,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function eW(e,t){return t in e?e[t]:t}function tW(e,t){return eW(e,t.toLowerCase())}const jRe=Cf({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:cd,acceptCharset:bn,accessKey:bn,action:null,allow:null,allowFullScreen:Pt,allowPaymentRequest:Pt,allowUserMedia:Pt,alt:null,as:null,async:Pt,autoCapitalize:null,autoComplete:bn,autoFocus:Pt,autoPlay:Pt,blocking:bn,capture:null,charSet:null,checked:Pt,cite:null,className:bn,cols:$e,colSpan:null,content:null,contentEditable:Zn,controls:Pt,controlsList:bn,coords:$e|cd,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Pt,defer:Pt,dir:null,dirName:null,disabled:Pt,download:Uk,draggable:Zn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Pt,formTarget:null,headers:bn,height:$e,hidden:Uk,high:$e,href:null,hrefLang:null,htmlFor:bn,httpEquiv:bn,id:null,imageSizes:null,imageSrcSet:null,inert:Pt,inputMode:null,integrity:null,is:null,isMap:Pt,itemId:null,itemProp:bn,itemRef:bn,itemScope:Pt,itemType:bn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Pt,low:$e,manifest:null,max:null,maxLength:$e,media:null,method:null,min:null,minLength:$e,multiple:Pt,muted:Pt,name:null,nonce:null,noModule:Pt,noValidate:Pt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Pt,optimum:$e,pattern:null,ping:bn,placeholder:null,playsInline:Pt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Pt,referrerPolicy:null,rel:bn,required:Pt,reversed:Pt,rows:$e,rowSpan:$e,sandbox:bn,scope:null,scoped:Pt,seamless:Pt,selected:Pt,shadowRootClonable:Pt,shadowRootDelegatesFocus:Pt,shadowRootMode:null,shape:null,size:$e,sizes:null,slot:null,span:$e,spellCheck:Zn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:$e,step:null,style:null,tabIndex:$e,target:null,title:null,translate:null,type:null,typeMustMatch:Pt,useMap:null,value:Zn,width:$e,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:bn,axis:null,background:null,bgColor:null,border:$e,borderColor:null,bottomMargin:$e,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Pt,declare:Pt,event:null,face:null,frame:null,frameBorder:null,hSpace:$e,leftMargin:$e,link:null,longDesc:null,lowSrc:null,marginHeight:$e,marginWidth:$e,noResize:Pt,noHref:Pt,noShade:Pt,noWrap:Pt,object:null,profile:null,prompt:null,rev:null,rightMargin:$e,rules:null,scheme:null,scrolling:Zn,standby:null,summary:null,text:null,topMargin:$e,valueType:null,version:null,vAlign:null,vLink:null,vSpace:$e,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Pt,disableRemotePlayback:Pt,prefix:null,property:null,results:$e,security:null,unselectable:null},space:"html",transform:tW}),_Re=Cf({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Da,accentHeight:$e,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:$e,amplitude:$e,arabicForm:null,ascent:$e,attributeName:null,attributeType:null,azimuth:$e,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:$e,by:null,calcMode:null,capHeight:$e,className:bn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:$e,diffuseConstant:$e,direction:null,display:null,dur:null,divisor:$e,dominantBaseline:null,download:Pt,dx:null,dy:null,edgeMode:null,editable:null,elevation:$e,enableBackground:null,end:null,event:null,exponent:$e,externalResourcesRequired:null,fill:null,fillOpacity:$e,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:cd,g2:cd,glyphName:cd,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:$e,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:$e,horizOriginX:$e,horizOriginY:$e,id:null,ideographic:$e,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:$e,k:$e,k1:$e,k2:$e,k3:$e,k4:$e,kernelMatrix:Da,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:$e,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:$e,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:$e,overlineThickness:$e,paintOrder:null,panose1:null,path:null,pathLength:$e,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:bn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:$e,pointsAtY:$e,pointsAtZ:$e,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Da,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Da,rev:Da,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Da,requiredFeatures:Da,requiredFonts:Da,requiredFormats:Da,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:$e,specularExponent:$e,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:$e,strikethroughThickness:$e,string:null,stroke:null,strokeDashArray:Da,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:$e,strokeOpacity:$e,strokeWidth:null,style:null,surfaceScale:$e,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Da,tabIndex:$e,tableValues:null,target:null,targetX:$e,targetY:$e,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Da,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:$e,underlineThickness:$e,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:$e,values:null,vAlphabetic:$e,vMathematical:$e,vectorEffect:null,vHanging:$e,vIdeographic:$e,version:null,vertAdvY:$e,vertOriginX:$e,vertOriginY:$e,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:$e,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:eW}),nW=Cf({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),rW=Cf({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:tW}),aW=Cf({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),kRe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},SRe=/[A-Z]/g,JR=/-[a-z]/g,NRe=/^data[-\w.:]+$/i;function CRe(e,t){const n=Bk(t);let r=t,a=Ia;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&NRe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(JR,ERe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!JR.test(s)){let o=s.replace(SRe,ARe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}a=CA}return new a(r,t)}function ARe(e){return"-"+e.toLowerCase()}function ERe(e){return e.charAt(1).toUpperCase()}const PRe=Qq([Zq,jRe,nW,rW,aW],"html"),AA=Qq([Zq,_Re,nW,rW,aW],"svg");function TRe(e){return e.join(" ").trim()}var EA={},QR=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,ORe=/\n/g,IRe=/^\s*/,RRe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,MRe=/^:\s*/,DRe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,$Re=/^[;\s]*/,LRe=/^\s+|\s+$/g,FRe=`
`,ZR="/",eM="*",ac="",BRe="comment",URe="declaration",zRe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function a(g){var v=g.match(ORe);v&&(n+=v.length);var x=g.lastIndexOf(FRe);r=~x?g.length-x:r+g.length}function s(){var g={line:n,column:r};return function(v){return v.position=new o(g),u(),v}}function o(g){this.start=g,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(g){var v=new Error(t.source+":"+n+":"+r+": "+g);if(v.reason=g,v.filename=t.source,v.line=n,v.column=r,v.source=e,!t.silent)throw v}function c(g){var v=g.exec(e);if(v){var x=v[0];return a(x),e=e.slice(x.length),v}}function u(){c(IRe)}function f(g){var v;for(g=g||[];v=d();)v!==!1&&g.push(v);return g}function d(){var g=s();if(!(ZR!=e.charAt(0)||eM!=e.charAt(1))){for(var v=2;ac!=e.charAt(v)&&(eM!=e.charAt(v)||ZR!=e.charAt(v+1));)++v;if(v+=2,ac===e.charAt(v-1))return l("End of comment missing");var x=e.slice(2,v-2);return r+=2,a(x),e=e.slice(v),r+=2,g({type:BRe,comment:x})}}function h(){var g=s(),v=c(RRe);if(v){if(d(),!c(MRe))return l("property missing ':'");var x=c(DRe),y=g({type:URe,property:tM(v[0].replace(QR,ac)),value:x?tM(x[0].replace(QR,ac)):ac});return c($Re),y}}function m(){var g=[];f(g);for(var v;v=h();)v!==!1&&(g.push(v),f(g));return g}return u(),m()};function tM(e){return e?e.replace(LRe,ac):ac}var qRe=nr&&nr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(EA,"__esModule",{value:!0});EA.default=HRe;var WRe=qRe(zRe);function HRe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,WRe.default)(e),a=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,l=s.value;a?t(o,l,s):l&&(n=n||{},n[o]=l)}}),n}var v0={};Object.defineProperty(v0,"__esModule",{value:!0});v0.camelCase=void 0;var VRe=/^--[a-zA-Z0-9_-]+$/,KRe=/-([a-z])/g,GRe=/^[^-]+$/,YRe=/^-(webkit|moz|ms|o|khtml)-/,XRe=/^-(ms)-/,JRe=function(e){return!e||GRe.test(e)||VRe.test(e)},QRe=function(e,t){return t.toUpperCase()},nM=function(e,t){return"".concat(t,"-")},ZRe=function(e,t){return t===void 0&&(t={}),JRe(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(XRe,nM):e=e.replace(YRe,nM),e.replace(KRe,QRe))};v0.camelCase=ZRe;var eMe=nr&&nr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},tMe=eMe(EA),nMe=v0;function qk(e,t){var n={};return!e||typeof e!="string"||(0,tMe.default)(e,function(r,a){r&&a&&(n[(0,nMe.camelCase)(r,t)]=a)}),n}qk.default=qk;var rMe=qk;const aMe=un(rMe),iW=sW("end"),PA=sW("start");function sW(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function iMe(e){const t=PA(e),n=iW(e);if(t&&n)return{start:t,end:n}}function Ih(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?rM(e.position):"start"in e||"end"in e?rM(e):"line"in e||"column"in e?Wk(e):""}function Wk(e){return aM(e&&e.line)+":"+aM(e&&e.column)}function rM(e){return Wk(e&&e.start)+"-"+Wk(e&&e.end)}function aM(e){return e&&typeof e=="number"?e:1}class Jr extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let a="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?a=t:!s.cause&&t&&(o=!0,a=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=l?l.line:void 0,this.name=Ih(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Jr.prototype.file="";Jr.prototype.name="";Jr.prototype.reason="";Jr.prototype.message="";Jr.prototype.stack="";Jr.prototype.column=void 0;Jr.prototype.line=void 0;Jr.prototype.ancestors=void 0;Jr.prototype.cause=void 0;Jr.prototype.fatal=void 0;Jr.prototype.place=void 0;Jr.prototype.ruleId=void 0;Jr.prototype.source=void 0;const TA={}.hasOwnProperty,sMe=new Map,oMe=/[A-Z]/g,lMe=new Set(["table","tbody","thead","tfoot","tr"]),cMe=new Set(["td","th"]),oW="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function uMe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=xMe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=vMe(n,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?AA:PRe,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=lW(a,e,void 0);return s&&typeof s!="string"?s:a.create(e,a.Fragment,{children:s||void 0},void 0)}function lW(e,t,n){if(t.type==="element")return dMe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return fMe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return mMe(e,t,n);if(t.type==="mdxjsEsm")return hMe(e,t);if(t.type==="root")return pMe(e,t,n);if(t.type==="text")return gMe(e,t)}function dMe(e,t,n){const r=e.schema;let a=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(a=AA,e.schema=a),e.ancestors.push(t);const s=uW(e,t.tagName,!1),o=yMe(e,t);let l=IA(e,t);return lMe.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!bRe(c):!0})),cW(e,o,s,t),OA(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function fMe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Zm(e,t.position)}function hMe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Zm(e,t.position)}function mMe(e,t,n){const r=e.schema;let a=r;t.name==="svg"&&r.space==="html"&&(a=AA,e.schema=a),e.ancestors.push(t);const s=t.name===null?e.Fragment:uW(e,t.name,!0),o=bMe(e,t),l=IA(e,t);return cW(e,o,s,t),OA(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function pMe(e,t,n){const r={};return OA(r,IA(e,t)),e.create(t,e.Fragment,r,n)}function gMe(e,t){return t.value}function cW(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function OA(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function vMe(e,t,n){return r;function r(a,s,o,l){const u=Array.isArray(o.children)?n:t;return l?u(s,o,l):u(s,o)}}function xMe(e,t){return n;function n(r,a,s,o){const l=Array.isArray(s.children),c=PA(r);return t(a,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function yMe(e,t){const n={};let r,a;for(a in t.properties)if(a!=="children"&&TA.call(t.properties,a)){const s=wMe(e,a,t.properties[a]);if(s){const[o,l]=s;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&cMe.has(t.tagName)?r=l:n[o]=l}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function bMe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Zm(e,t.position);else{const a=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,s=e.evaluater.evaluateExpression(l.expression)}else Zm(e,t.position);else s=r.value===null?!0:r.value;n[a]=s}return n}function IA(e,t){const n=[];let r=-1;const a=e.passKeys?new Map:sMe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const u=a.get(c)||0;o=c+"-"+u,a.set(c,u+1)}}const l=lW(e,s,o);l!==void 0&&n.push(l)}return n}function wMe(e,t,n){const r=CRe(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?pRe(n):TRe(n)),r.property==="style"){let a=typeof n=="object"?n:jMe(e,String(n));return e.stylePropertyNameCase==="css"&&(a=_Me(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&r.space?kRe[r.property]||r.property:r.attribute,n]}}function jMe(e,t){try{return aMe(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,a=new Jr("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=oW+"#cannot-parse-style-attribute",a}}function uW(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let s=-1,o;for(;++s<a.length;){const l=GR(a[s])?{type:"Identifier",name:a[s]}:{type:"Literal",value:a[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}r=o}else r=GR(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const a=r.value;return TA.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(r);Zm(e)}function Zm(e,t){const n=new Jr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=oW+"#cannot-handle-mdx-estrees-without-createevaluater",n}function _Me(e){const t={};let n;for(n in e)TA.call(e,n)&&(t[kMe(n)]=e[n]);return t}function kMe(e){let t=e.replace(oMe,SMe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function SMe(e){return"-"+e.toLowerCase()}const xj={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},NMe={};function RA(e,t){const n=NMe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return dW(e,r,a)}function dW(e,t,n){if(CMe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return iM(e.children,t,n)}return Array.isArray(e)?iM(e,t,n):""}function iM(e,t,n){const r=[];let a=-1;for(;++a<e.length;)r[a]=dW(e[a],t,n);return r.join("")}function CMe(e){return!!(e&&typeof e=="object")}const sM=document.createElement("i");function MA(e){const t="&"+e+";";sM.innerHTML=t;const n=sM.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Ka(e,t,n,r){const a=e.length;let s=0,o;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function di(e,t){return e.length>0?(Ka(e,e.length,0,t),e):t}const oM={}.hasOwnProperty;function fW(e){const t={};let n=-1;for(;++n<e.length;)AMe(t,e[n]);return t}function AMe(e,t){let n;for(n in t){const a=(oM.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){oM.call(a,o)||(a[o]=[]);const l=s[o];EMe(a[o],Array.isArray(l)?l:l?[l]:[])}}}function EMe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ka(e,0,0,r)}function hW(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Zi(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const sa=Ul(/[A-Za-z]/),Gr=Ul(/[\dA-Za-z]/),PMe=Ul(/[#-'*+\--9=?A-Z^-~]/);function ly(e){return e!==null&&(e<32||e===127)}const Hk=Ul(/\d/),TMe=Ul(/[\dA-Fa-f]/),OMe=Ul(/[!-/:-@[-`{-~]/);function bt(e){return e!==null&&e<-2}function vn(e){return e!==null&&(e<0||e===32)}function Bt(e){return e===-2||e===-1||e===32}const x0=Ul(new RegExp("\\p{P}|\\p{S}","u")),Hc=Ul(/\s/);function Ul(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Af(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Gr(e.charCodeAt(n+1))&&Gr(e.charCodeAt(n+2)))a=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=e.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),a=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+a+1,o=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function Vt(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return Bt(c)?(e.enter(n),l(c)):t(c)}function l(c){return Bt(c)&&s++<a?(e.consume(c),l):(e.exit(n),t(c))}}const IMe={tokenize:RMe};function RMe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Vt(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),s(l)}function s(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return bt(l)?(e.consume(l),e.exit("chunkText"),s):(e.consume(l),o)}}const MMe={tokenize:DMe},lM={tokenize:$Me};function DMe(e){const t=this,n=[];let r=0,a,s,o;return l;function l(w){if(r<n.length){const k=n[r];return t.containerState=k[1],e.attempt(k[0].continuation,c,u)(w)}return u(w)}function c(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&b();const k=t.events.length;let j=k,_;for(;j--;)if(t.events[j][0]==="exit"&&t.events[j][1].type==="chunkFlow"){_=t.events[j][1].end;break}y(r);let S=k;for(;S<t.events.length;)t.events[S][1].end={..._},S++;return Ka(t.events,j+1,0,t.events.slice(k)),t.events.length=S,u(w)}return l(w)}function u(w){if(r===n.length){if(!a)return h(w);if(a.currentConstruct&&a.currentConstruct.concrete)return g(w);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(lM,f,d)(w)}function f(w){return a&&b(),y(r),h(w)}function d(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,g(w)}function h(w){return t.containerState={},e.attempt(lM,m,g)(w)}function m(w){return r++,n.push([t.currentConstruct,t.containerState]),h(w)}function g(w){if(w===null){a&&b(),y(0),e.consume(w);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:s}),v(w)}function v(w){if(w===null){x(e.exit("chunkFlow"),!0),y(0),e.consume(w);return}return bt(w)?(e.consume(w),x(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(w),v)}function x(w,k){const j=t.sliceStream(w);if(k&&j.push(null),w.previous=s,s&&(s.next=w),s=w,a.defineSkip(w.start),a.write(j),t.parser.lazy[w.start.line]){let _=a.events.length;for(;_--;)if(a.events[_][1].start.offset<o&&(!a.events[_][1].end||a.events[_][1].end.offset>o))return;const S=t.events.length;let T=S,N,A;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(N){A=t.events[T][1].end;break}N=!0}for(y(r),_=S;_<t.events.length;)t.events[_][1].end={...A},_++;Ka(t.events,T+1,0,t.events.slice(S)),t.events.length=_}}function y(w){let k=n.length;for(;k-- >w;){const j=n[k];t.containerState=j[1],j[0].exit.call(t,e)}n.length=w}function b(){a.write([null]),s=void 0,a=void 0,t.containerState._closeFlow=void 0}}function $Me(e,t,n){return Vt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function tf(e){if(e===null||vn(e)||Hc(e))return 1;if(x0(e))return 2}function y0(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const s=e[a].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const Vk={name:"attention",resolveAll:LMe,tokenize:FMe};function LMe(e,t){let n=-1,r,a,s,o,l,c,u,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},h={...e[n][1].start};cM(d,-c),cM(h,c),o={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},s={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},a={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=di(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=di(u,[["enter",a,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=di(u,y0(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=di(u,[["exit",s,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,u=di(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,Ka(e,r-1,n-r+3,u),n=r+u.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function FMe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=tf(r);let s;return o;function o(c){return s=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===s)return e.consume(c),l;const u=e.exit("attentionSequence"),f=tf(c),d=!f||f===2&&a||n.includes(c),h=!a||a===2&&f||n.includes(r);return u._open=!!(s===42?d:d&&(a||!h)),u._close=!!(s===42?h:h&&(f||!d)),t(c)}}function cM(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const BMe={name:"autolink",tokenize:UMe};function UMe(e,t,n){let r=0;return a;function a(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(m){return sa(m)?(e.consume(m),o):m===64?n(m):u(m)}function o(m){return m===43||m===45||m===46||Gr(m)?(r=1,l(m)):u(m)}function l(m){return m===58?(e.consume(m),r=0,c):(m===43||m===45||m===46||Gr(m))&&r++<32?(e.consume(m),l):(r=0,u(m))}function c(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||ly(m)?n(m):(e.consume(m),c)}function u(m){return m===64?(e.consume(m),f):PMe(m)?(e.consume(m),u):n(m)}function f(m){return Gr(m)?d(m):n(m)}function d(m){return m===46?(e.consume(m),r=0,f):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):h(m)}function h(m){if((m===45||Gr(m))&&r++<63){const g=m===45?h:d;return e.consume(m),g}return n(m)}}const Hp={partial:!0,tokenize:zMe};function zMe(e,t,n){return r;function r(s){return Bt(s)?Vt(e,a,"linePrefix")(s):a(s)}function a(s){return s===null||bt(s)?t(s):n(s)}}const mW={continuation:{tokenize:WMe},exit:HMe,name:"blockQuote",tokenize:qMe};function qMe(e,t,n){const r=this;return a;function a(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Bt(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function WMe(e,t,n){const r=this;return a;function a(o){return Bt(o)?Vt(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(mW,t,n)(o)}}function HMe(e){e.exit("blockQuote")}const pW={name:"characterEscape",tokenize:VMe};function VMe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),a}function a(s){return OMe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const gW={name:"characterReference",tokenize:KMe};function KMe(e,t,n){const r=this;let a=0,s,o;return l;function l(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),c}function c(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=Gr,f(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=TMe,f):(e.enter("characterReferenceValue"),s=7,o=Hk,f(d))}function f(d){if(d===59&&a){const h=e.exit("characterReferenceValue");return o===Gr&&!MA(r.sliceSerialize(h))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&a++<s?(e.consume(d),f):n(d)}}const uM={partial:!0,tokenize:YMe},dM={concrete:!0,name:"codeFenced",tokenize:GMe};function GMe(e,t,n){const r=this,a={partial:!0,tokenize:j};let s=0,o=0,l;return c;function c(_){return u(_)}function u(_){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,l=_,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(_)}function f(_){return _===l?(o++,e.consume(_),f):o<3?n(_):(e.exit("codeFencedFenceSequence"),Bt(_)?Vt(e,d,"whitespace")(_):d(_))}function d(_){return _===null||bt(_)?(e.exit("codeFencedFence"),r.interrupt?t(_):e.check(uM,v,k)(_)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(_))}function h(_){return _===null||bt(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(_)):Bt(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Vt(e,m,"whitespace")(_)):_===96&&_===l?n(_):(e.consume(_),h)}function m(_){return _===null||bt(_)?d(_):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(_))}function g(_){return _===null||bt(_)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(_)):_===96&&_===l?n(_):(e.consume(_),g)}function v(_){return e.attempt(a,k,x)(_)}function x(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),y}function y(_){return s>0&&Bt(_)?Vt(e,b,"linePrefix",s+1)(_):b(_)}function b(_){return _===null||bt(_)?e.check(uM,v,k)(_):(e.enter("codeFlowValue"),w(_))}function w(_){return _===null||bt(_)?(e.exit("codeFlowValue"),b(_)):(e.consume(_),w)}function k(_){return e.exit("codeFenced"),t(_)}function j(_,S,T){let N=0;return A;function A(P){return _.enter("lineEnding"),_.consume(P),_.exit("lineEnding"),D}function D(P){return _.enter("codeFencedFence"),Bt(P)?Vt(_,B,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):B(P)}function B(P){return P===l?(_.enter("codeFencedFenceSequence"),E(P)):T(P)}function E(P){return P===l?(N++,_.consume(P),E):N>=o?(_.exit("codeFencedFenceSequence"),Bt(P)?Vt(_,R,"whitespace")(P):R(P)):T(P)}function R(P){return P===null||bt(P)?(_.exit("codeFencedFence"),S(P)):T(P)}}}function YMe(e,t,n){const r=this;return a;function a(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const yj={name:"codeIndented",tokenize:JMe},XMe={partial:!0,tokenize:QMe};function JMe(e,t,n){const r=this;return a;function a(u){return e.enter("codeIndented"),Vt(e,s,"linePrefix",5)(u)}function s(u){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):bt(u)?e.attempt(XMe,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||bt(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function QMe(e,t,n){const r=this;return a;function a(o){return r.parser.lazy[r.now().line]?n(o):bt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):Vt(e,s,"linePrefix",5)(o)}function s(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):bt(o)?a(o):n(o)}}const ZMe={name:"codeText",previous:tDe,resolve:eDe,tokenize:nDe};function eDe(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function tDe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function nDe(e,t,n){let r=0,a,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),l(d)}function l(d){return d===96?(e.consume(d),r++,l):(e.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),c):d===96?(s=e.enter("codeTextSequence"),a=0,f(d)):bt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||bt(d)?(e.exit("codeTextData"),c(d)):(e.consume(d),u)}function f(d){return d===96?(e.consume(d),a++,f):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",u(d))}}class rDe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const a=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return r&&ah(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ah(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ah(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);ah(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ah(this.left,n.reverse())}}}function ah(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function vW(e){const t={};let n=-1,r,a,s,o,l,c,u;const f=new rDe(e);for(;++n<f.length;){for(;n in t;)n=t[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,aDe(f,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,a=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(f.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(r[1].end={...f.get(a)[1].start},l=f.slice(a,n),l.unshift(r),f.splice(a,n-a+1,l))}}return Ka(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function aDe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let a=t-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let f,d,h=-1,m=n,g=0,v=0;const x=[v];for(;m;){for(;e.get(++a)[1]!==m;);s.push(a),m._tokenizer||(f=r.sliceStream(m),m.next||f.push(null),d&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=m,m=m.next}for(m=n;++h<l.length;)l[h][0]==="exit"&&l[h-1][0]==="enter"&&l[h][1].type===l[h-1][1].type&&l[h][1].start.line!==l[h][1].end.line&&(v=h+1,x.push(v),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):x.pop(),h=x.length;h--;){const y=l.slice(x[h],x[h+1]),b=s.pop();c.push([b,b+y.length-1]),e.splice(b,2,y)}for(c.reverse(),h=-1;++h<c.length;)u[g+c[h][0]]=g+c[h][1],g+=c[h][1]-c[h][0]-1;return u}const iDe={resolve:oDe,tokenize:lDe},sDe={partial:!0,tokenize:cDe};function oDe(e){return vW(e),e}function lDe(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?s(l):bt(l)?e.check(sDe,o,s)(l):(e.consume(l),a)}function s(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function cDe(e,t,n){const r=this;return a;function a(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Vt(e,s,"linePrefix")}function s(o){if(o===null||bt(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function xW(e,t,n,r,a,s,o,l,c){const u=c||Number.POSITIVE_INFINITY;let f=0;return d;function d(y){return y===60?(e.enter(r),e.enter(a),e.enter(s),e.consume(y),e.exit(s),h):y===null||y===32||y===41||ly(y)?n(y):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(y))}function h(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(a),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===62?(e.exit("chunkString"),e.exit(l),h(y)):y===null||y===60||bt(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===60||y===62||y===92?(e.consume(y),m):m(y)}function v(y){return!f&&(y===null||y===41||vn(y))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(y)):f<u&&y===40?(e.consume(y),f++,v):y===41?(e.consume(y),f--,v):y===null||y===32||y===40||ly(y)?n(y):(e.consume(y),y===92?x:v)}function x(y){return y===40||y===41||y===92?(e.consume(y),v):v(y)}}function yW(e,t,n,r,a,s){const o=this;let l=0,c;return u;function u(m){return e.enter(r),e.enter(a),e.consume(m),e.exit(a),e.enter(s),f}function f(m){return l>999||m===null||m===91||m===93&&!c||m===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(e.exit(s),e.enter(a),e.consume(m),e.exit(a),e.exit(r),t):bt(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===null||m===91||m===93||bt(m)||l++>999?(e.exit("chunkString"),f(m)):(e.consume(m),c||(c=!Bt(m)),m===92?h:d)}function h(m){return m===91||m===92||m===93?(e.consume(m),l++,d):d(m)}}function bW(e,t,n,r,a,s){let o;return l;function l(h){return h===34||h===39||h===40?(e.enter(r),e.enter(a),e.consume(h),e.exit(a),o=h===40?41:h,c):n(h)}function c(h){return h===o?(e.enter(a),e.consume(h),e.exit(a),e.exit(r),t):(e.enter(s),u(h))}function u(h){return h===o?(e.exit(s),c(o)):h===null?n(h):bt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Vt(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===o||h===null||bt(h)?(e.exit("chunkString"),u(h)):(e.consume(h),h===92?d:f)}function d(h){return h===o||h===92?(e.consume(h),f):f(h)}}function Rh(e,t){let n;return r;function r(a){return bt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):Bt(a)?Vt(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}const uDe={name:"definition",tokenize:fDe},dDe={partial:!0,tokenize:hDe};function fDe(e,t,n){const r=this;let a;return s;function s(m){return e.enter("definition"),o(m)}function o(m){return yW.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function l(m){return a=Zi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),c):n(m)}function c(m){return vn(m)?Rh(e,u)(m):u(m)}function u(m){return xW(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function f(m){return e.attempt(dDe,d,d)(m)}function d(m){return Bt(m)?Vt(e,h,"whitespace")(m):h(m)}function h(m){return m===null||bt(m)?(e.exit("definition"),r.parser.defined.push(a),t(m)):n(m)}}function hDe(e,t,n){return r;function r(l){return vn(l)?Rh(e,a)(l):n(l)}function a(l){return bW(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Bt(l)?Vt(e,o,"whitespace")(l):o(l)}function o(l){return l===null||bt(l)?t(l):n(l)}}const mDe={name:"hardBreakEscape",tokenize:pDe};function pDe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),a}function a(s){return bt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const gDe={name:"headingAtx",resolve:vDe,tokenize:xDe};function vDe(e,t){let n=e.length-2,r=3,a,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ka(e,r,n-r+1,[["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t]])),e}function xDe(e,t,n){let r=0;return a;function a(f){return e.enter("atxHeading"),s(f)}function s(f){return e.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&r++<6?(e.consume(f),o):f===null||vn(f)?(e.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(e.enter("atxHeadingSequence"),c(f)):f===null||bt(f)?(e.exit("atxHeading"),t(f)):Bt(f)?Vt(e,l,"whitespace")(f):(e.enter("atxHeadingText"),u(f))}function c(f){return f===35?(e.consume(f),c):(e.exit("atxHeadingSequence"),l(f))}function u(f){return f===null||f===35||vn(f)?(e.exit("atxHeadingText"),l(f)):(e.consume(f),u)}}const yDe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],fM=["pre","script","style","textarea"],bDe={concrete:!0,name:"htmlFlow",resolveTo:_De,tokenize:kDe},wDe={partial:!0,tokenize:NDe},jDe={partial:!0,tokenize:SDe};function _De(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function kDe(e,t,n){const r=this;let a,s,o,l,c;return u;function u($){return f($)}function f($){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume($),d}function d($){return $===33?(e.consume($),h):$===47?(e.consume($),s=!0,v):$===63?(e.consume($),a=3,r.interrupt?t:C):sa($)?(e.consume($),o=String.fromCharCode($),x):n($)}function h($){return $===45?(e.consume($),a=2,m):$===91?(e.consume($),a=5,l=0,g):sa($)?(e.consume($),a=4,r.interrupt?t:C):n($)}function m($){return $===45?(e.consume($),r.interrupt?t:C):n($)}function g($){const K="CDATA[";return $===K.charCodeAt(l++)?(e.consume($),l===K.length?r.interrupt?t:B:g):n($)}function v($){return sa($)?(e.consume($),o=String.fromCharCode($),x):n($)}function x($){if($===null||$===47||$===62||vn($)){const K=$===47,X=o.toLowerCase();return!K&&!s&&fM.includes(X)?(a=1,r.interrupt?t($):B($)):yDe.includes(o.toLowerCase())?(a=6,K?(e.consume($),y):r.interrupt?t($):B($)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n($):s?b($):w($))}return $===45||Gr($)?(e.consume($),o+=String.fromCharCode($),x):n($)}function y($){return $===62?(e.consume($),r.interrupt?t:B):n($)}function b($){return Bt($)?(e.consume($),b):A($)}function w($){return $===47?(e.consume($),A):$===58||$===95||sa($)?(e.consume($),k):Bt($)?(e.consume($),w):A($)}function k($){return $===45||$===46||$===58||$===95||Gr($)?(e.consume($),k):j($)}function j($){return $===61?(e.consume($),_):Bt($)?(e.consume($),j):w($)}function _($){return $===null||$===60||$===61||$===62||$===96?n($):$===34||$===39?(e.consume($),c=$,S):Bt($)?(e.consume($),_):T($)}function S($){return $===c?(e.consume($),c=null,N):$===null||bt($)?n($):(e.consume($),S)}function T($){return $===null||$===34||$===39||$===47||$===60||$===61||$===62||$===96||vn($)?j($):(e.consume($),T)}function N($){return $===47||$===62||Bt($)?w($):n($)}function A($){return $===62?(e.consume($),D):n($)}function D($){return $===null||bt($)?B($):Bt($)?(e.consume($),D):n($)}function B($){return $===45&&a===2?(e.consume($),U):$===60&&a===1?(e.consume($),L):$===62&&a===4?(e.consume($),z):$===63&&a===3?(e.consume($),C):$===93&&a===5?(e.consume($),F):bt($)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(wDe,I,E)($)):$===null||bt($)?(e.exit("htmlFlowData"),E($)):(e.consume($),B)}function E($){return e.check(jDe,R,I)($)}function R($){return e.enter("lineEnding"),e.consume($),e.exit("lineEnding"),P}function P($){return $===null||bt($)?E($):(e.enter("htmlFlowData"),B($))}function U($){return $===45?(e.consume($),C):B($)}function L($){return $===47?(e.consume($),o="",O):B($)}function O($){if($===62){const K=o.toLowerCase();return fM.includes(K)?(e.consume($),z):B($)}return sa($)&&o.length<8?(e.consume($),o+=String.fromCharCode($),O):B($)}function F($){return $===93?(e.consume($),C):B($)}function C($){return $===62?(e.consume($),z):$===45&&a===2?(e.consume($),C):B($)}function z($){return $===null||bt($)?(e.exit("htmlFlowData"),I($)):(e.consume($),z)}function I($){return e.exit("htmlFlow"),t($)}}function SDe(e,t,n){const r=this;return a;function a(o){return bt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function NDe(e,t,n){return r;function r(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(Hp,t,n)}}const CDe={name:"htmlText",tokenize:ADe};function ADe(e,t,n){const r=this;let a,s,o;return l;function l(C){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(C),c}function c(C){return C===33?(e.consume(C),u):C===47?(e.consume(C),j):C===63?(e.consume(C),w):sa(C)?(e.consume(C),T):n(C)}function u(C){return C===45?(e.consume(C),f):C===91?(e.consume(C),s=0,g):sa(C)?(e.consume(C),b):n(C)}function f(C){return C===45?(e.consume(C),m):n(C)}function d(C){return C===null?n(C):C===45?(e.consume(C),h):bt(C)?(o=d,L(C)):(e.consume(C),d)}function h(C){return C===45?(e.consume(C),m):d(C)}function m(C){return C===62?U(C):C===45?h(C):d(C)}function g(C){const z="CDATA[";return C===z.charCodeAt(s++)?(e.consume(C),s===z.length?v:g):n(C)}function v(C){return C===null?n(C):C===93?(e.consume(C),x):bt(C)?(o=v,L(C)):(e.consume(C),v)}function x(C){return C===93?(e.consume(C),y):v(C)}function y(C){return C===62?U(C):C===93?(e.consume(C),y):v(C)}function b(C){return C===null||C===62?U(C):bt(C)?(o=b,L(C)):(e.consume(C),b)}function w(C){return C===null?n(C):C===63?(e.consume(C),k):bt(C)?(o=w,L(C)):(e.consume(C),w)}function k(C){return C===62?U(C):w(C)}function j(C){return sa(C)?(e.consume(C),_):n(C)}function _(C){return C===45||Gr(C)?(e.consume(C),_):S(C)}function S(C){return bt(C)?(o=S,L(C)):Bt(C)?(e.consume(C),S):U(C)}function T(C){return C===45||Gr(C)?(e.consume(C),T):C===47||C===62||vn(C)?N(C):n(C)}function N(C){return C===47?(e.consume(C),U):C===58||C===95||sa(C)?(e.consume(C),A):bt(C)?(o=N,L(C)):Bt(C)?(e.consume(C),N):U(C)}function A(C){return C===45||C===46||C===58||C===95||Gr(C)?(e.consume(C),A):D(C)}function D(C){return C===61?(e.consume(C),B):bt(C)?(o=D,L(C)):Bt(C)?(e.consume(C),D):N(C)}function B(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(e.consume(C),a=C,E):bt(C)?(o=B,L(C)):Bt(C)?(e.consume(C),B):(e.consume(C),R)}function E(C){return C===a?(e.consume(C),a=void 0,P):C===null?n(C):bt(C)?(o=E,L(C)):(e.consume(C),E)}function R(C){return C===null||C===34||C===39||C===60||C===61||C===96?n(C):C===47||C===62||vn(C)?N(C):(e.consume(C),R)}function P(C){return C===47||C===62||vn(C)?N(C):n(C)}function U(C){return C===62?(e.consume(C),e.exit("htmlTextData"),e.exit("htmlText"),t):n(C)}function L(C){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),O}function O(C){return Bt(C)?Vt(e,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):F(C)}function F(C){return e.enter("htmlTextData"),o(C)}}const DA={name:"labelEnd",resolveAll:ODe,resolveTo:IDe,tokenize:RDe},EDe={tokenize:MDe},PDe={tokenize:DDe},TDe={tokenize:$De};function ODe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const a=r.type==="labelImage"?4:2;r.type="data",t+=a}}return e.length!==n.length&&Ka(e,0,e.length,n),e}function IDe(e,t){let n=e.length,r=0,a,s,o,l;for(;n--;)if(a=e[n][1],s){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(s=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(o=n);const c={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},f={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=di(l,e.slice(s+1,s+r+3)),l=di(l,[["enter",f,t]]),l=di(l,y0(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),l=di(l,[["exit",f,t],e[o-2],e[o-1],["exit",u,t]]),l=di(l,e.slice(o+1)),l=di(l,[["exit",c,t]]),Ka(e,s,e.length,l),e}function RDe(e,t,n){const r=this;let a=r.events.length,s,o;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){s=r.events[a][1];break}return l;function l(h){return s?s._inactive?d(h):(o=r.parser.defined.includes(Zi(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),c):n(h)}function c(h){return h===40?e.attempt(EDe,f,o?f:d)(h):h===91?e.attempt(PDe,f,o?u:d)(h):o?f(h):d(h)}function u(h){return e.attempt(TDe,f,d)(h)}function f(h){return t(h)}function d(h){return s._balanced=!0,n(h)}}function MDe(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),a}function a(d){return vn(d)?Rh(e,s)(d):s(d)}function s(d){return d===41?f(d):xW(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return vn(d)?Rh(e,c)(d):f(d)}function l(d){return n(d)}function c(d){return d===34||d===39||d===40?bW(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):f(d)}function u(d){return vn(d)?Rh(e,f)(d):f(d)}function f(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function DDe(e,t,n){const r=this;return a;function a(l){return yW.call(r,e,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(Zi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function $De(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),a}function a(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const LDe={name:"labelStartImage",resolveAll:DA.resolveAll,tokenize:FDe};function FDe(e,t,n){const r=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),s}function s(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const BDe={name:"labelStartLink",resolveAll:DA.resolveAll,tokenize:UDe};function UDe(e,t,n){const r=this;return a;function a(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const bj={name:"lineEnding",tokenize:zDe};function zDe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Vt(e,t,"linePrefix")}}const yv={name:"thematicBreak",tokenize:qDe};function qDe(e,t,n){let r=0,a;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return a=u,l(u)}function l(u){return u===a?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||bt(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===a?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),Bt(u)?Vt(e,l,"whitespace")(u):l(u))}}const pa={continuation:{tokenize:KDe},exit:YDe,name:"list",tokenize:VDe},WDe={partial:!0,tokenize:XDe},HDe={partial:!0,tokenize:GDe};function VDe(e,t,n){const r=this,a=r.events[r.events.length-1];let s=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return l;function l(m){const g=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:Hk(m)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(yv,n,u)(m):u(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(m)}return n(m)}function c(m){return Hk(m)&&++o<10?(e.consume(m),c):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),u(m)):n(m)}function u(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(Hp,r.interrupt?n:f,e.attempt(WDe,h,d))}function f(m){return r.containerState.initialBlankLine=!0,s++,h(m)}function d(m){return Bt(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),h):n(m)}function h(m){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function KDe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Hp,a,s);function a(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Vt(e,t,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!Bt(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(HDe,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Vt(e,e.attempt(pa,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function GDe(e,t,n){const r=this;return Vt(e,a,"listItemIndent",r.containerState.size+1);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function YDe(e){e.exit(this.containerState.type)}function XDe(e,t,n){const r=this;return Vt(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(s){const o=r.events[r.events.length-1];return!Bt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const hM={name:"setextUnderline",resolveTo:JDe,tokenize:QDe};function JDe(e,t){let n=e.length,r,a,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",s?(e.splice(a,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function QDe(e,t,n){const r=this;let a;return s;function s(u){let f=r.events.length,d;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){d=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),a=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===a?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Bt(u)?Vt(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||bt(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const ZDe={tokenize:e$e};function e$e(e){const t=this,n=e.attempt(Hp,r,e.attempt(this.parser.constructs.flowInitial,a,Vt(e,e.attempt(this.parser.constructs.flow,a,e.attempt(iDe,a)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const t$e={resolveAll:jW()},n$e=wW("string"),r$e=wW("text");function wW(e){return{resolveAll:jW(e==="text"?a$e:void 0),tokenize:t};function t(n){const r=this,a=this.parser.constructs[e],s=n.attempt(a,o,l);return o;function o(f){return u(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return u(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function u(f){if(f===null)return!0;const d=a[f];let h=-1;if(d)for(;++h<d.length;){const m=d[h];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function jW(e){return t;function t(n,r){let a=-1,s;for(;++a<=n.length;)s===void 0?n[a]&&n[a][1].type==="data"&&(s=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==s+2&&(n[s][1].end=n[a-1][1].end,n.splice(s+2,a-s-2),a=s+2),s=void 0);return e?e(n,r):n}}function a$e(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let s=a.length,o=-1,l=0,c;for(;s--;){const u=a[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const i$e={42:pa,43:pa,45:pa,48:pa,49:pa,50:pa,51:pa,52:pa,53:pa,54:pa,55:pa,56:pa,57:pa,62:mW},s$e={91:uDe},o$e={[-2]:yj,[-1]:yj,32:yj},l$e={35:gDe,42:yv,45:[hM,yv],60:bDe,61:hM,95:yv,96:dM,126:dM},c$e={38:gW,92:pW},u$e={[-5]:bj,[-4]:bj,[-3]:bj,33:LDe,38:gW,42:Vk,60:[BMe,CDe],91:BDe,92:[mDe,pW],93:DA,95:Vk,96:ZMe},d$e={null:[Vk,t$e]},f$e={null:[42,95]},h$e={null:[]},m$e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:f$e,contentInitial:s$e,disable:h$e,document:i$e,flow:l$e,flowInitial:o$e,insideSpan:d$e,string:c$e,text:u$e},Symbol.toStringTag,{value:"Module"}));function p$e(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},s=[];let o=[],l=[];const c={attempt:S(j),check:S(_),consume:b,enter:w,exit:k,interrupt:S(_,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:g,parser:e,previous:null,sliceSerialize:h,sliceStream:m,write:d};let f=t.tokenize.call(u,c);return t.resolveAll&&s.push(t),u;function d(D){return o=di(o,D),x(),o[o.length-1]!==null?[]:(T(t,0),u.events=y0(s,u.events,u),u.events)}function h(D,B){return v$e(m(D),B)}function m(D){return g$e(o,D)}function g(){const{_bufferIndex:D,_index:B,line:E,column:R,offset:P}=r;return{_bufferIndex:D,_index:B,line:E,column:R,offset:P}}function v(D){a[D.line]=D.column,A()}function x(){let D;for(;r._index<o.length;){const B=o[r._index];if(typeof B=="string")for(D=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===D&&r._bufferIndex<B.length;)y(B.charCodeAt(r._bufferIndex));else y(B)}}function y(D){f=f(D)}function b(D){bt(D)?(r.line++,r.column=1,r.offset+=D===-3?2:1,A()):D!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=D}function w(D,B){const E=B||{};return E.type=D,E.start=g(),u.events.push(["enter",E,u]),l.push(E),E}function k(D){const B=l.pop();return B.end=g(),u.events.push(["exit",B,u]),B}function j(D,B){T(D,B.from)}function _(D,B){B.restore()}function S(D,B){return E;function E(R,P,U){let L,O,F,C;return Array.isArray(R)?I(R):"tokenize"in R?I([R]):z(R);function z(V){return W;function W(ae){const G=ae!==null&&V[ae],le=ae!==null&&V.null,se=[...Array.isArray(G)?G:G?[G]:[],...Array.isArray(le)?le:le?[le]:[]];return I(se)(ae)}}function I(V){return L=V,O=0,V.length===0?U:$(V[O])}function $(V){return W;function W(ae){return C=N(),F=V,V.partial||(u.currentConstruct=V),V.name&&u.parser.constructs.disable.null.includes(V.name)?X():V.tokenize.call(B?Object.assign(Object.create(u),B):u,c,K,X)(ae)}}function K(V){return D(F,C),P}function X(V){return C.restore(),++O<L.length?$(L[O]):U}}}function T(D,B){D.resolveAll&&!s.includes(D)&&s.push(D),D.resolve&&Ka(u.events,B,u.events.length-B,D.resolve(u.events.slice(B),u)),D.resolveTo&&(u.events=D.resolveTo(u.events,u))}function N(){const D=g(),B=u.previous,E=u.currentConstruct,R=u.events.length,P=Array.from(l);return{from:R,restore:U};function U(){r=D,u.previous=B,u.currentConstruct=E,u.events.length=R,l=P,A()}}function A(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function g$e(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,s=t.end._bufferIndex;let o;if(n===a)o=[e[n].slice(r,s)];else{if(o=e.slice(n,a),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}s>0&&o.push(e[a].slice(0,s))}return o}function v$e(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&a)continue;o=" ";break}default:o=String.fromCharCode(s)}a=s===-2,r.push(o)}return r.join("")}function x$e(e){const r={constructs:fW([m$e,...(e||{}).extensions||[]]),content:a(IMe),defined:[],document:a(MMe),flow:a(ZDe),lazy:{},string:a(n$e),text:a(r$e)};return r;function a(s){return o;function o(l){return p$e(r,s,l)}}}function y$e(e){for(;!vW(e););return e}const mM=/[\0\t\n\r]/g;function b$e(){let e=1,t="",n=!0,r;return a;function a(s,o,l){const c=[];let u,f,d,h,m;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(mM.lastIndex=d,u=mM.exec(s),h=u&&u.index!==void 0?u.index:s.length,m=s.charCodeAt(h),!u){t=s.slice(d);break}if(m===10&&d===h&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),d<h&&(c.push(s.slice(d,h)),e+=h-d),m){case 0:{c.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,c.push(-2);e++<f;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}d=h+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const w$e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function j$e(e){return e.replace(w$e,_$e)}function _$e(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),s=a===120||a===88;return hW(n.slice(s?2:1),s?16:10)}return MA(n)||e}const _W={}.hasOwnProperty;function k$e(e,t,n){return typeof t!="string"&&(n=t,t=void 0),S$e(n)(y$e(x$e(n).document().write(b$e()(e,t,!0))))}function S$e(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ee),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(J),blockQuote:s(le),characterEscape:N,characterReference:N,codeFenced:s(se),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(se,o),codeText:s(Q,o),codeTextData:N,data:N,codeFlowValue:N,definition:s(_e),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(xe),hardBreakEscape:s(fe),hardBreakTrailing:s(fe),htmlFlow:s(Ce,o),htmlFlowData:N,htmlText:s(Ce,o),htmlTextData:N,image:s(Te),label:o,link:s(Ee),listItem:s(gt),listItemValue:h,listOrdered:s(ze,d),listUnordered:s(ze),paragraph:s(ut),reference:$,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(J),strong:s(ee),thematicBreak:s(st)},exit:{atxHeading:c(),atxHeadingSequence:j,autolink:c(),autolinkEmail:G,autolinkProtocol:ae,blockQuote:c(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:X,characterReferenceMarkerNumeric:X,characterReferenceValue:V,characterReference:W,codeFenced:c(x),codeFencedFence:v,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:A,codeIndented:c(y),codeText:c(P),codeTextData:A,data:A,definition:c(),definitionDestinationString:k,definitionLabelString:b,definitionTitleString:w,emphasis:c(),hardBreakEscape:c(B),hardBreakTrailing:c(B),htmlFlow:c(E),htmlFlowData:A,htmlText:c(R),htmlTextData:A,image:c(L),label:F,labelText:O,lineEnding:D,link:c(U),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:K,resourceDestinationString:C,resourceTitleString:z,resource:I,setextHeading:c(T),setextHeadingLineSequence:S,setextHeadingText:_,strong:c(),thematicBreak:c()}};kW(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(oe){let ve={type:"root",children:[]};const De={stack:[ve],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:f,data:n},Me=[];let Z=-1;for(;++Z<oe.length;)if(oe[Z][1].type==="listOrdered"||oe[Z][1].type==="listUnordered")if(oe[Z][0]==="enter")Me.push(Z);else{const Be=Me.pop();Z=a(oe,Be,Z)}for(Z=-1;++Z<oe.length;){const Be=t[oe[Z][0]];_W.call(Be,oe[Z][1].type)&&Be[oe[Z][1].type].call(Object.assign({sliceSerialize:oe[Z][2].sliceSerialize},De),oe[Z][1])}if(De.tokenStack.length>0){const Be=De.tokenStack[De.tokenStack.length-1];(Be[1]||pM).call(De,void 0,Be[0])}for(ve.position={start:$o(oe.length>0?oe[0][1].start:{line:1,column:1,offset:0}),end:$o(oe.length>0?oe[oe.length-2][1].end:{line:1,column:1,offset:0})},Z=-1;++Z<t.transforms.length;)ve=t.transforms[Z](ve)||ve;return ve}function a(oe,ve,De){let Me=ve-1,Z=-1,Be=!1,xt,yt,He,lt;for(;++Me<=De;){const mt=oe[Me];switch(mt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{mt[0]==="enter"?Z++:Z--,lt=void 0;break}case"lineEndingBlank":{mt[0]==="enter"&&(xt&&!lt&&!Z&&!He&&(He=Me),lt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:lt=void 0}if(!Z&&mt[0]==="enter"&&mt[1].type==="listItemPrefix"||Z===-1&&mt[0]==="exit"&&(mt[1].type==="listUnordered"||mt[1].type==="listOrdered")){if(xt){let en=Me;for(yt=void 0;en--;){const ue=oe[en];if(ue[1].type==="lineEnding"||ue[1].type==="lineEndingBlank"){if(ue[0]==="exit")continue;yt&&(oe[yt][1].type="lineEndingBlank",Be=!0),ue[1].type="lineEnding",yt=en}else if(!(ue[1].type==="linePrefix"||ue[1].type==="blockQuotePrefix"||ue[1].type==="blockQuotePrefixWhitespace"||ue[1].type==="blockQuoteMarker"||ue[1].type==="listItemIndent"))break}He&&(!yt||He<yt)&&(xt._spread=!0),xt.end=Object.assign({},yt?oe[yt][1].start:mt[1].end),oe.splice(yt||Me,0,["exit",xt,mt[2]]),Me++,De++}if(mt[1].type==="listItemPrefix"){const en={type:"listItem",_spread:!1,start:Object.assign({},mt[1].start),end:void 0};xt=en,oe.splice(Me,0,["enter",en,mt[2]]),Me++,De++,He=void 0,lt=!0}}}return oe[ve][1]._spread=Be,De}function s(oe,ve){return De;function De(Me){l.call(this,oe(Me),Me),ve&&ve.call(this,Me)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(oe,ve,De){this.stack[this.stack.length-1].children.push(oe),this.stack.push(oe),this.tokenStack.push([ve,De||void 0]),oe.position={start:$o(ve.start),end:void 0}}function c(oe){return ve;function ve(De){oe&&oe.call(this,De),u.call(this,De)}}function u(oe,ve){const De=this.stack.pop(),Me=this.tokenStack.pop();if(Me)Me[0].type!==oe.type&&(ve?ve.call(this,oe,Me[0]):(Me[1]||pM).call(this,oe,Me[0]));else throw new Error("Cannot close `"+oe.type+"` ("+Ih({start:oe.start,end:oe.end})+"): its not open");De.position.end=$o(oe.end)}function f(){return RA(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(oe){if(this.data.expectingFirstListItemValue){const ve=this.stack[this.stack.length-2];ve.start=Number.parseInt(this.sliceSerialize(oe),10),this.data.expectingFirstListItemValue=void 0}}function m(){const oe=this.resume(),ve=this.stack[this.stack.length-1];ve.lang=oe}function g(){const oe=this.resume(),ve=this.stack[this.stack.length-1];ve.meta=oe}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const oe=this.resume(),ve=this.stack[this.stack.length-1];ve.value=oe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const oe=this.resume(),ve=this.stack[this.stack.length-1];ve.value=oe.replace(/(\r?\n|\r)$/g,"")}function b(oe){const ve=this.resume(),De=this.stack[this.stack.length-1];De.label=ve,De.identifier=Zi(this.sliceSerialize(oe)).toLowerCase()}function w(){const oe=this.resume(),ve=this.stack[this.stack.length-1];ve.title=oe}function k(){const oe=this.resume(),ve=this.stack[this.stack.length-1];ve.url=oe}function j(oe){const ve=this.stack[this.stack.length-1];if(!ve.depth){const De=this.sliceSerialize(oe).length;ve.depth=De}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function S(oe){const ve=this.stack[this.stack.length-1];ve.depth=this.sliceSerialize(oe).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function N(oe){const De=this.stack[this.stack.length-1].children;let Me=De[De.length-1];(!Me||Me.type!=="text")&&(Me=We(),Me.position={start:$o(oe.start),end:void 0},De.push(Me)),this.stack.push(Me)}function A(oe){const ve=this.stack.pop();ve.value+=this.sliceSerialize(oe),ve.position.end=$o(oe.end)}function D(oe){const ve=this.stack[this.stack.length-1];if(this.data.atHardBreak){const De=ve.children[ve.children.length-1];De.position.end=$o(oe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ve.type)&&(N.call(this,oe),A.call(this,oe))}function B(){this.data.atHardBreak=!0}function E(){const oe=this.resume(),ve=this.stack[this.stack.length-1];ve.value=oe}function R(){const oe=this.resume(),ve=this.stack[this.stack.length-1];ve.value=oe}function P(){const oe=this.resume(),ve=this.stack[this.stack.length-1];ve.value=oe}function U(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=ve,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function L(){const oe=this.stack[this.stack.length-1];if(this.data.inReference){const ve=this.data.referenceType||"shortcut";oe.type+="Reference",oe.referenceType=ve,delete oe.url,delete oe.title}else delete oe.identifier,delete oe.label;this.data.referenceType=void 0}function O(oe){const ve=this.sliceSerialize(oe),De=this.stack[this.stack.length-2];De.label=j$e(ve),De.identifier=Zi(ve).toLowerCase()}function F(){const oe=this.stack[this.stack.length-1],ve=this.resume(),De=this.stack[this.stack.length-1];if(this.data.inReference=!0,De.type==="link"){const Me=oe.children;De.children=Me}else De.alt=ve}function C(){const oe=this.resume(),ve=this.stack[this.stack.length-1];ve.url=oe}function z(){const oe=this.resume(),ve=this.stack[this.stack.length-1];ve.title=oe}function I(){this.data.inReference=void 0}function $(){this.data.referenceType="collapsed"}function K(oe){const ve=this.resume(),De=this.stack[this.stack.length-1];De.label=ve,De.identifier=Zi(this.sliceSerialize(oe)).toLowerCase(),this.data.referenceType="full"}function X(oe){this.data.characterReferenceType=oe.type}function V(oe){const ve=this.sliceSerialize(oe),De=this.data.characterReferenceType;let Me;De?(Me=hW(ve,De==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Me=MA(ve);const Z=this.stack[this.stack.length-1];Z.value+=Me}function W(oe){const ve=this.stack.pop();ve.position.end=$o(oe.end)}function ae(oe){A.call(this,oe);const ve=this.stack[this.stack.length-1];ve.url=this.sliceSerialize(oe)}function G(oe){A.call(this,oe);const ve=this.stack[this.stack.length-1];ve.url="mailto:"+this.sliceSerialize(oe)}function le(){return{type:"blockquote",children:[]}}function se(){return{type:"code",lang:null,meta:null,value:""}}function Q(){return{type:"inlineCode",value:""}}function _e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function xe(){return{type:"emphasis",children:[]}}function J(){return{type:"heading",depth:0,children:[]}}function fe(){return{type:"break"}}function Ce(){return{type:"html",value:""}}function Te(){return{type:"image",title:null,url:"",alt:null}}function Ee(){return{type:"link",title:null,url:"",children:[]}}function ze(oe){return{type:"list",ordered:oe.type==="listOrdered",start:null,spread:oe._spread,children:[]}}function gt(oe){return{type:"listItem",spread:oe._spread,checked:null,children:[]}}function ut(){return{type:"paragraph",children:[]}}function ee(){return{type:"strong",children:[]}}function We(){return{type:"text",value:""}}function st(){return{type:"thematicBreak"}}}function $o(e){return{line:e.line,column:e.column,offset:e.offset}}function kW(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?kW(e,r):N$e(e,r)}}function N$e(e,t){let n;for(n in t)if(_W.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function pM(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ih({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ih({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ih({start:t.start,end:t.end})+") is still open")}function C$e(e){const t=this;t.parser=n;function n(r){return k$e(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function A$e(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function E$e(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function P$e(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function T$e(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function O$e(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function I$e(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=Af(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function R$e(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function M$e(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function SW(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const a=e.all(t),s=a[0];s&&s.type==="text"?s.value="["+s.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=r:a.push({type:"text",value:r}),a}function D$e(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return SW(e,t);const a={src:Af(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,s),e.applyData(t,s)}function $$e(e,t){const n={src:Af(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function L$e(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function F$e(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return SW(e,t);const a={href:Af(r.url||"")};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function B$e(e,t){const n={href:Af(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function U$e(e,t,n){const r=e.all(t),a=n?z$e(n):NW(t),s={},o=[];if(typeof t.checked=="boolean"){const f=r[0];let d;f&&f.type==="element"&&f.tagName==="p"?d=f:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const f=r[l];(a||l!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!a?o.push(...f.children):o.push(f)}const c=r[r.length-1];c&&(a||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function z$e(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=NW(n[r])}return t}function NW(e){const t=e.spread;return t??e.children.length>1}function q$e(e,t){const n={},r=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++a<r.length;){const o=r[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function W$e(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function H$e(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function V$e(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function K$e(e,t){const n=e.all(t),r=n.shift(),a=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),a.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=PA(t.children[1]),c=iW(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),a.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,s),e.applyData(t,s)}function G$e(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const d=t.children[c],h={},m=o?o[c]:void 0;m&&(h.align=m);let g={type:"element",tagName:s,properties:h,children:[]};d&&(g.children=e.all(d),e.patch(d,g),g=e.applyData(d,g)),u.push(g)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,f),e.applyData(t,f)}function Y$e(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const gM=9,vM=32;function X$e(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const s=[];for(;r;)s.push(xM(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return s.push(xM(t.slice(a),a>0,!1)),s.join("")}function xM(e,t,n){let r=0,a=e.length;if(t){let s=e.codePointAt(r);for(;s===gM||s===vM;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(a-1);for(;s===gM||s===vM;)a--,s=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function J$e(e,t){const n={type:"text",value:X$e(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Q$e(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Z$e={blockquote:A$e,break:E$e,code:P$e,delete:T$e,emphasis:O$e,footnoteReference:I$e,heading:R$e,html:M$e,imageReference:D$e,image:$$e,inlineCode:L$e,linkReference:F$e,link:B$e,listItem:U$e,list:q$e,paragraph:W$e,root:H$e,strong:V$e,table:K$e,tableCell:Y$e,tableRow:G$e,text:J$e,thematicBreak:Q$e,toml:Kg,yaml:Kg,definition:Kg,footnoteDefinition:Kg};function Kg(){}const CW=-1,b0=0,Mh=1,cy=2,$A=3,LA=4,FA=5,BA=6,AW=7,EW=8,yM=typeof self=="object"?self:globalThis,eLe=(e,t)=>{const n=(a,s)=>(e.set(s,a),a),r=a=>{if(e.has(a))return e.get(a);const[s,o]=t[a];switch(s){case b0:case CW:return n(o,a);case Mh:{const l=n([],a);for(const c of o)l.push(r(c));return l}case cy:{const l=n({},a);for(const[c,u]of o)l[r(c)]=r(u);return l}case $A:return n(new Date(o),a);case LA:{const{source:l,flags:c}=o;return n(new RegExp(l,c),a)}case FA:{const l=n(new Map,a);for(const[c,u]of o)l.set(r(c),r(u));return l}case BA:{const l=n(new Set,a);for(const c of o)l.add(r(c));return l}case AW:{const{name:l,message:c}=o;return n(new yM[l](c),a)}case EW:return n(BigInt(o),a);case"BigInt":return n(Object(BigInt(o)),a);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new yM[s](o),a)};return r},bM=e=>eLe(new Map,e)(0),ju="",{toString:tLe}={},{keys:nLe}=Object,ih=e=>{const t=typeof e;if(t!=="object"||!e)return[b0,t];const n=tLe.call(e).slice(8,-1);switch(n){case"Array":return[Mh,ju];case"Object":return[cy,ju];case"Date":return[$A,ju];case"RegExp":return[LA,ju];case"Map":return[FA,ju];case"Set":return[BA,ju];case"DataView":return[Mh,n]}return n.includes("Array")?[Mh,n]:n.includes("Error")?[AW,n]:[cy,n]},Gg=([e,t])=>e===b0&&(t==="function"||t==="symbol"),rLe=(e,t,n,r)=>{const a=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=ih(o);switch(l){case b0:{let f=o;switch(c){case"bigint":l=EW,f=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return a([CW],o)}return a([l,f],o)}case Mh:{if(c){let h=o;return c==="DataView"?h=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(h=new Uint8Array(o)),a([c,[...h]],o)}const f=[],d=a([l,f],o);for(const h of o)f.push(s(h));return d}case cy:{if(c)switch(c){case"BigInt":return a([c,o.toString()],o);case"Boolean":case"Number":case"String":return a([c,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const f=[],d=a([l,f],o);for(const h of nLe(o))(e||!Gg(ih(o[h])))&&f.push([s(h),s(o[h])]);return d}case $A:return a([l,o.toISOString()],o);case LA:{const{source:f,flags:d}=o;return a([l,{source:f,flags:d}],o)}case FA:{const f=[],d=a([l,f],o);for(const[h,m]of o)(e||!(Gg(ih(h))||Gg(ih(m))))&&f.push([s(h),s(m)]);return d}case BA:{const f=[],d=a([l,f],o);for(const h of o)(e||!Gg(ih(h)))&&f.push(s(h));return d}}const{message:u}=o;return a([l,{name:c,message:u}],o)};return s},wM=(e,{json:t,lossy:n}={})=>{const r=[];return rLe(!(t||n),!!t,new Map,r)(e),r},uy=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?bM(wM(e,t)):structuredClone(e):(e,t)=>bM(wM(e,t));function aLe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function iLe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function sLe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||aLe,r=e.options.footnoteBackLabel||iLe,a=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const f=e.all(u),d=String(u.identifier).toUpperCase(),h=Af(d.toLowerCase());let m=0;const g=[],v=e.footnoteCounts.get(d);for(;v!==void 0&&++m<=v;){g.length>0&&g.push({type:"text",value:" "});let b=typeof n=="string"?n:n(c,m);typeof b=="string"&&(b={type:"text",value:b}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,m),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const x=f[f.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const b=x.children[x.children.length-1];b&&b.type==="text"?b.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...g)}else f.push(...g);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(f,!0)};e.patch(u,y),l.push(y)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...uy(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const w0=function(e){if(e==null)return uLe;if(typeof e=="function")return j0(e);if(typeof e=="object")return Array.isArray(e)?oLe(e):lLe(e);if(typeof e=="string")return cLe(e);throw new Error("Expected function, string, or object as test")};function oLe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=w0(e[n]);return j0(r);function r(...a){let s=-1;for(;++s<t.length;)if(t[s].apply(this,a))return!0;return!1}}function lLe(e){const t=e;return j0(n);function n(r){const a=r;let s;for(s in e)if(a[s]!==t[s])return!1;return!0}}function cLe(e){return j0(t);function t(n){return n&&n.type===e}}function j0(e){return t;function t(n,r,a){return!!(dLe(n)&&e.call(this,n,typeof r=="number"?r:void 0,a||void 0))}}function uLe(){return!0}function dLe(e){return e!==null&&typeof e=="object"&&"type"in e}const PW=[],fLe=!0,Kk=!1,hLe="skip";function TW(e,t,n,r){let a;typeof t=="function"&&typeof n!="function"?(r=n,n=t):a=t;const s=w0(a),o=r?-1:1;l(e,void 0,[])();function l(c,u,f){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const m=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(m?"<"+m+">":""))+")"})}return h;function h(){let m=PW,g,v,x;if((!t||s(c,u,f[f.length-1]||void 0))&&(m=mLe(n(c,f)),m[0]===Kk))return m;if("children"in c&&c.children){const y=c;if(y.children&&m[0]!==hLe)for(v=(r?y.children.length:-1)+o,x=f.concat(y);v>-1&&v<y.children.length;){const b=y.children[v];if(g=l(b,v,x)(),g[0]===Kk)return g;v=typeof g[1]=="number"?g[1]:v+o}}return m}}}function mLe(e){return Array.isArray(e)?e:typeof e=="number"?[fLe,e]:e==null?PW:[e]}function UA(e,t,n,r){let a,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,a=n):(s=t,o=n,a=r),TW(e,s,l,a);function l(c,u){const f=u[u.length-1],d=f?f.children.indexOf(c):void 0;return o(c,d,f)}}const Gk={}.hasOwnProperty,pLe={};function gLe(e,t){const n=t||pLe,r=new Map,a=new Map,s=new Map,o={...Z$e,...n.handlers},l={all:u,applyData:xLe,definitionById:r,footnoteById:a,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:vLe,wrap:bLe};return UA(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const d=f.type==="definition"?r:a,h=String(f.identifier).toUpperCase();d.has(h)||d.set(h,f)}}),l;function c(f,d){const h=f.type,m=l.handlers[h];if(Gk.call(l.handlers,h)&&m)return m(l,f,d);if(l.options.passThrough&&l.options.passThrough.includes(h)){if("children"in f){const{children:v,...x}=f,y=uy(x);return y.children=l.all(f),y}return uy(f)}return(l.options.unknownHandler||yLe)(l,f,d)}function u(f){const d=[];if("children"in f){const h=f.children;let m=-1;for(;++m<h.length;){const g=l.one(h[m],f);if(g){if(m&&h[m-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=jM(g.value)),!Array.isArray(g)&&g.type==="element")){const v=g.children[0];v&&v.type==="text"&&(v.value=jM(v.value))}Array.isArray(g)?d.push(...g):d.push(g)}}}return d}}function vLe(e,t){e.position&&(t.position=iMe(e))}function xLe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,a=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,uy(s)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function yLe(e,t){const n=t.data||{},r="value"in t&&!(Gk.call(n,"hProperties")||Gk.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function bLe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function jM(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function _M(e,t){const n=gLe(e,t),r=n.one(e,void 0),a=sLe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return a&&s.children.push({type:"text",value:`
`},a),s}function wLe(e,t){return e&&"run"in e?async function(n,r){const a=_M(n,{file:r,...t});await e.run(a,r)}:function(n,r){return _M(n,{file:r,...e||t})}}function kM(e){if(e)throw e}var bv=Object.prototype.hasOwnProperty,OW=Object.prototype.toString,SM=Object.defineProperty,NM=Object.getOwnPropertyDescriptor,CM=function(t){return typeof Array.isArray=="function"?Array.isArray(t):OW.call(t)==="[object Array]"},AM=function(t){if(!t||OW.call(t)!=="[object Object]")return!1;var n=bv.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&bv.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var a;for(a in t);return typeof a>"u"||bv.call(t,a)},EM=function(t,n){SM&&n.name==="__proto__"?SM(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},PM=function(t,n){if(n==="__proto__")if(bv.call(t,n)){if(NM)return NM(t,n).value}else return;return t[n]},jLe=function e(){var t,n,r,a,s,o,l=arguments[0],c=1,u=arguments.length,f=!1;for(typeof l=="boolean"&&(f=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=PM(l,n),a=PM(t,n),l!==a&&(f&&a&&(AM(a)||(s=CM(a)))?(s?(s=!1,o=r&&CM(r)?r:[]):o=r&&AM(r)?r:{},EM(l,{name:n,newValue:e(f,o,a)})):typeof a<"u"&&EM(l,{name:n,newValue:a}));return l};const wj=un(jLe);function Yk(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function _Le(){const e=[],t={run:n,use:r};return t;function n(...a){let s=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...a);function l(c,...u){const f=e[++s];let d=-1;if(c){o(c);return}for(;++d<a.length;)(u[d]===null||u[d]===void 0)&&(u[d]=a[d]);a=u,f?kLe(f,l)(...u):o(null,...u)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function kLe(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(a);try{c=e.apply(this,o)}catch(u){const f=u;if(l&&n)throw f;return a(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,a):c instanceof Error?a(c):s(c))}function a(o,...l){n||(n=!0,t(o,...l))}function s(o){a(null,o)}}const ms={basename:SLe,dirname:NLe,extname:CLe,join:ALe,sep:"/"};function SLe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Vp(e);let n=0,r=-1,a=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else r<0&&(s=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else o<0&&(s=!0,o=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(r=a):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function NLe(e){if(Vp(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function CLe(e){Vp(e);let t=e.length,n=-1,r=0,a=-1,s=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?a<0?a=t:s!==1&&(s=1):a>-1&&(s=-1)}return a<0||n<0||s===0||s===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function ALe(...e){let t=-1,n;for(;++t<e.length;)Vp(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":ELe(n)}function ELe(e){Vp(e);const t=e.codePointAt(0)===47;let n=PLe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function PLe(e,t){let n="",r=0,a=-1,s=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(a===o-1||s===1))if(a!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),a=o,s=0;continue}}else if(n.length>0){n="",r=0,a=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Vp(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const TLe={cwd:OLe};function OLe(){return"/"}function Xk(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function ILe(e){if(typeof e=="string")e=new URL(e);else if(!Xk(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return RLe(e)}function RLe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const jj=["history","path","basename","stem","extname","dirname"];class IW{constructor(t){let n;t?Xk(t)?n={path:t}:typeof t=="string"||MLe(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":TLe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<jj.length;){const s=jj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let a;for(a in n)jj.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?ms.basename(this.path):void 0}set basename(t){kj(t,"basename"),_j(t,"basename"),this.path=ms.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?ms.dirname(this.path):void 0}set dirname(t){TM(this.basename,"dirname"),this.path=ms.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?ms.extname(this.path):void 0}set extname(t){if(_j(t,"extname"),TM(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ms.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Xk(t)&&(t=ILe(t)),kj(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?ms.basename(this.path,this.extname):void 0}set stem(t){kj(t,"stem"),_j(t,"stem"),this.path=ms.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=void 0,a}message(t,n,r){const a=new Jr(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function _j(e,t){if(e&&e.includes(ms.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ms.sep+"`")}function kj(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function TM(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function MLe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const DLe=function(e){const r=this.constructor.prototype,a=r[e],s=function(){return a.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},$Le={}.hasOwnProperty;class zA extends DLe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=_Le()}copy(){const t=new zA;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(wj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Cj("data",this.frozen),this.namespace[t]=n,this):$Le.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Cj("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const a=n.call(t,...r);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Yg(t),r=this.parser||this.Parser;return Sj("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Sj("process",this.parser||this.Parser),Nj("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(s,o){const l=Yg(t),c=r.parse(l);r.run(c,l,function(f,d,h){if(f||!d||!h)return u(f);const m=d,g=r.stringify(m,h);BLe(g)?h.value=g:h.result=g,u(f,h)});function u(f,d){f||!d?o(f):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),Sj("processSync",this.parser||this.Parser),Nj("processSync",this.compiler||this.Compiler),this.process(t,a),IM("processSync","process",n),r;function a(s,o){n=!0,kM(s),r=o}}run(t,n,r){OM(t),this.freeze();const a=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,l){const c=Yg(n);a.run(t,c,u);function u(f,d,h){const m=d||t;f?l(f):o?o(m):r(void 0,m,h)}}}runSync(t,n){let r=!1,a;return this.run(t,n,s),IM("runSync","run",r),a;function s(o,l){kM(o),a=l,r=!0}}stringify(t,n){this.freeze();const r=Yg(n),a=this.compiler||this.Compiler;return Nj("stringify",a),OM(t),a(t,r)}use(t,...n){const r=this.attachers,a=this.namespace;if(Cj("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...d]=u;c(f,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(a.settings=wj(!0,a.settings,u.settings))}function l(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const d=u[f];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,f){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===u){h=d;break}if(h===-1)r.push([u,...f]);else if(f.length>0){let[m,...g]=f;const v=r[h][1];Yk(v)&&Yk(m)&&(m=wj(!0,v,m)),r[h]=[u,m,...g]}}}}const LLe=new zA().freeze();function Sj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Nj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Cj(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function OM(e){if(!Yk(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function IM(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Yg(e){return FLe(e)?e:new IW(e)}function FLe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function BLe(e){return typeof e=="string"||ULe(e)}function ULe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const zLe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",RM=[],MM={allowDangerousHtml:!0},qLe=/^(https?|ircs?|mailto|xmpp)$/i,WLe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function DM(e){const t=HLe(e),n=VLe(e);return KLe(t.runSync(t.parse(n),n),e)}function HLe(e){const t=e.rehypePlugins||RM,n=e.remarkPlugins||RM,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...MM}:MM;return LLe().use(C$e).use(n).use(wLe,r).use(t)}function VLe(e){const t=e.children||"",n=new IW;return typeof t=="string"&&(n.value=t),n}function KLe(e,t){const n=t.allowedElements,r=t.allowElement,a=t.components,s=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||GLe;for(const f of WLe)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+zLe+f.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),UA(e,u),uMe(e,{Fragment:i.Fragment,components:a,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function u(f,d,h){if(f.type==="raw"&&h&&typeof d=="number")return o?h.children.splice(d,1):h.children[d]={type:"text",value:f.value},d;if(f.type==="element"){let m;for(m in xj)if(Object.hasOwn(xj,m)&&Object.hasOwn(f.properties,m)){const g=f.properties[m],v=xj[m];(v===null||v.includes(f.tagName))&&(f.properties[m]=c(String(g||""),m,f))}}if(f.type==="element"){let m=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!m&&r&&typeof d=="number"&&(m=!r(f,d,h)),m&&h&&typeof d=="number")return l&&f.children?h.children.splice(d,1,...f.children):h.children.splice(d,1),d}}}function GLe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||n!==-1&&t>n||r!==-1&&t>r||qLe.test(e.slice(0,t))?e:""}function $M(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,a=n.indexOf(t);for(;a!==-1;)r++,a=n.indexOf(t,a+t.length);return r}function YLe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function XLe(e,t,n){const a=w0((n||{}).ignore||[]),s=JLe(t);let o=-1;for(;++o<s.length;)TW(e,"text",l);function l(u,f){let d=-1,h;for(;++d<f.length;){const m=f[d],g=h?h.children:void 0;if(a(m,g?g.indexOf(m):void 0,h))return;h=m}if(h)return c(u,f)}function c(u,f){const d=f[f.length-1],h=s[o][0],m=s[o][1];let g=0;const x=d.children.indexOf(u);let y=!1,b=[];h.lastIndex=0;let w=h.exec(u.value);for(;w;){const k=w.index,j={index:w.index,input:w.input,stack:[...f,u]};let _=m(...w,j);if(typeof _=="string"&&(_=_.length>0?{type:"text",value:_}:void 0),_===!1?h.lastIndex=k+1:(g!==k&&b.push({type:"text",value:u.value.slice(g,k)}),Array.isArray(_)?b.push(..._):_&&b.push(_),g=k+w[0].length,y=!0),!h.global)break;w=h.exec(u.value)}return y?(g<u.value.length&&b.push({type:"text",value:u.value.slice(g)}),d.children.splice(x,1,...b)):b=[u],x+b.length}}function JLe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const a=n[r];t.push([QLe(a[0]),ZLe(a[1])])}return t}function QLe(e){return typeof e=="string"?new RegExp(YLe(e),"g"):e}function ZLe(e){return typeof e=="function"?e:function(){return e}}const Aj="phrasing",Ej=["autolink","link","image","label"];function e4e(){return{transforms:[o4e],enter:{literalAutolink:n4e,literalAutolinkEmail:Pj,literalAutolinkHttp:Pj,literalAutolinkWww:Pj},exit:{literalAutolink:s4e,literalAutolinkEmail:i4e,literalAutolinkHttp:r4e,literalAutolinkWww:a4e}}}function t4e(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Aj,notInConstruct:Ej},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Aj,notInConstruct:Ej},{character:":",before:"[ps]",after:"\\/",inConstruct:Aj,notInConstruct:Ej}]}}function n4e(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Pj(e){this.config.enter.autolinkProtocol.call(this,e)}function r4e(e){this.config.exit.autolinkProtocol.call(this,e)}function a4e(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function i4e(e){this.config.exit.autolinkEmail.call(this,e)}function s4e(e){this.exit(e)}function o4e(e){XLe(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,l4e],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),c4e]],{ignore:["link","linkReference"]})}function l4e(e,t,n,r,a){let s="";if(!RW(a)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!u4e(n)))return!1;const o=d4e(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:s+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function c4e(e,t,n,r){return!RW(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function u4e(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function d4e(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const a=$M(e,"(");let s=$M(e,")");for(;r!==-1&&a>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function RW(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Hc(n)||x0(n))&&(!t||n!==47)}MW.peek=b4e;function f4e(){this.buffer()}function h4e(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function m4e(){this.buffer()}function p4e(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function g4e(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Zi(this.sliceSerialize(e)).toLowerCase(),n.label=t}function v4e(e){this.exit(e)}function x4e(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Zi(this.sliceSerialize(e)).toLowerCase(),n.label=t}function y4e(e){this.exit(e)}function b4e(){return"["}function MW(e,t,n,r){const a=n.createTracker(r);let s=a.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=a.move(n.safe(n.associationId(e),{after:"]",before:s})),l(),o(),s+=a.move("]"),s}function w4e(){return{enter:{gfmFootnoteCallString:f4e,gfmFootnoteCall:h4e,gfmFootnoteDefinitionLabelString:m4e,gfmFootnoteDefinition:p4e},exit:{gfmFootnoteCallString:g4e,gfmFootnoteCall:v4e,gfmFootnoteDefinitionLabelString:x4e,gfmFootnoteDefinition:y4e}}}function j4e(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:MW},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,a,s,o){const l=s.createTracker(o);let c=l.move("[^");const u=s.enter("footnoteDefinition"),f=s.enter("label");return c+=l.move(s.safe(s.associationId(r),{before:c,after:"]"})),f(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,l.current()),t?DW:_4e))),u(),c}}function _4e(e,t,n){return t===0?e:DW(e,t,n)}function DW(e,t,n){return(n?"":"    ")+e}const k4e=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];$W.peek=E4e;function S4e(){return{canContainEols:["delete"],enter:{strikethrough:C4e},exit:{strikethrough:A4e}}}function N4e(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:k4e}],handlers:{delete:$W}}}function C4e(e){this.enter({type:"delete",children:[]},e)}function A4e(e){this.exit(e)}function $W(e,t,n,r){const a=n.createTracker(r),s=n.enter("strikethrough");let o=a.move("~~");return o+=n.containerPhrasing(e,{...a.current(),before:o,after:"~"}),o+=a.move("~~"),s(),o}function E4e(){return"~"}function P4e(e){return e.length}function T4e(e,t){const n=t||{},r=(n.align||[]).concat(),a=n.stringLength||P4e,s=[],o=[],l=[],c=[];let u=0,f=-1;for(;++f<e.length;){const v=[],x=[];let y=-1;for(e[f].length>u&&(u=e[f].length);++y<e[f].length;){const b=O4e(e[f][y]);if(n.alignDelimiters!==!1){const w=a(b);x[y]=w,(c[y]===void 0||w>c[y])&&(c[y]=w)}v.push(b)}o[f]=v,l[f]=x}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<u;)s[d]=LM(r[d]);else{const v=LM(r);for(;++d<u;)s[d]=v}d=-1;const h=[],m=[];for(;++d<u;){const v=s[d];let x="",y="";v===99?(x=":",y=":"):v===108?x=":":v===114&&(y=":");let b=n.alignDelimiters===!1?1:Math.max(1,c[d]-x.length-y.length);const w=x+"-".repeat(b)+y;n.alignDelimiters!==!1&&(b=x.length+b+y.length,b>c[d]&&(c[d]=b),m[d]=b),h[d]=w}o.splice(1,0,h),l.splice(1,0,m),f=-1;const g=[];for(;++f<o.length;){const v=o[f],x=l[f];d=-1;const y=[];for(;++d<u;){const b=v[d]||"";let w="",k="";if(n.alignDelimiters!==!1){const j=c[d]-(x[d]||0),_=s[d];_===114?w=" ".repeat(j):_===99?j%2?(w=" ".repeat(j/2+.5),k=" ".repeat(j/2-.5)):(w=" ".repeat(j/2),k=w):k=" ".repeat(j)}n.delimiterStart!==!1&&!d&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&b==="")&&(n.delimiterStart!==!1||d)&&y.push(" "),n.alignDelimiters!==!1&&y.push(w),y.push(b),n.alignDelimiters!==!1&&y.push(k),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&y.push("|")}g.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return g.join(`
`)}function O4e(e){return e==null?"":String(e)}function LM(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function I4e(e,t,n,r){const a=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(e,s.current()),R4e);return a(),o}function R4e(e,t,n){return">"+(n?"":" ")+e}function M4e(e,t){return FM(e,t.inConstruct,!0)&&!FM(e,t.notInConstruct,!1)}function FM(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function BM(e,t,n,r){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&M4e(n.stack,n.unsafe[a]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function D4e(e,t){const n=String(e);let r=n.indexOf(t),a=r,s=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===a?++s>o&&(o=s):s=1,a=r+t.length,r=n.indexOf(t,a);return o}function $4e(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function L4e(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function F4e(e,t,n,r){const a=L4e(n),s=e.value||"",o=a==="`"?"GraveAccent":"Tilde";if($4e(e,n)){const d=n.enter("codeIndented"),h=n.indentLines(s,B4e);return d(),h}const l=n.createTracker(r),c=a.repeat(Math.max(D4e(s,a)+1,3)),u=n.enter("codeFenced");let f=l.move(c);if(e.lang){const d=n.enter(`codeFencedLang${o}`);f+=l.move(n.safe(e.lang,{before:f,after:" ",encode:["`"],...l.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${o}`);f+=l.move(" "),f+=l.move(n.safe(e.meta,{before:f,after:`
`,encode:["`"],...l.current()})),d()}return f+=l.move(`
`),s&&(f+=l.move(s+`
`)),f+=l.move(c),u(),f}function B4e(e,t,n){return(n?"":"    ")+e}function qA(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function U4e(e,t,n,r){const a=qA(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),o(),u}function z4e(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function ep(e){return"&#x"+e.toString(16).toUpperCase()+";"}function dy(e,t,n){const r=tf(e),a=tf(t);return r===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}LW.peek=q4e;function LW(e,t,n,r){const a=z4e(n),s=n.enter("emphasis"),o=n.createTracker(r),l=o.move(a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),f=dy(r.before.charCodeAt(r.before.length-1),u,a);f.inside&&(c=ep(u)+c.slice(1));const d=c.charCodeAt(c.length-1),h=dy(r.after.charCodeAt(0),d,a);h.inside&&(c=c.slice(0,-1)+ep(d));const m=o.move(a);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},l+c+m}function q4e(e,t,n){return n.options.emphasis||"*"}function W4e(e,t){let n=!1;return UA(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Kk}),!!((!e.depth||e.depth<3)&&RA(e)&&(t.options.setext||n))}function H4e(e,t,n,r){const a=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(W4e(e,n)){const f=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return d(),f(),h+`
`+(a===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(a),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=ep(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u}FW.peek=V4e;function FW(e){return e.value||""}function V4e(){return"<"}BW.peek=K4e;function BW(e,t,n,r){const a=qA(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),u+=c.move(")"),o(),u}function K4e(){return"!"}UW.peek=G4e;function UW(e,t,n,r){const a=e.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!u||u!==d?c+=l.move(d+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function G4e(){return"!"}zW.peek=Y4e;function zW(e,t,n){let r=e.value||"",a="`",s=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(r);)a+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return a+r+a}function Y4e(){return"`"}function qW(e,t){const n=RA(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}WW.peek=X4e;function WW(e,t,n,r){const a=qA(n),s=a==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,c;if(qW(e,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(e,{before:d,after:">",...o.current()})),d+=o.move(">"),l(),n.stack=f,d}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),c(),e.title&&(c=n.enter(`title${s}`),u+=o.move(" "+a),u+=o.move(n.safe(e.title,{before:u,after:a,...o.current()})),u+=o.move(a),c()),u+=o.move(")"),l(),u}function X4e(e,t,n){return qW(e,n)?"<":"["}HW.peek=J4e;function HW(e,t,n,r){const a=e.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!u||u!==d?c+=l.move(d+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function J4e(){return"["}function WA(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Q4e(e){const t=WA(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Z4e(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function VW(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function eFe(e,t,n,r){const a=n.enter("list"),s=n.bulletCurrent;let o=e.ordered?Z4e(n):WA(n);const l=e.ordered?o==="."?")":".":Q4e(n);let c=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const f=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),VW(n)===o&&f){let d=-1;for(;++d<e.children.length;){const h=e.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=s,a(),u}function tFe(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function nFe(e,t,n,r){const a=tFe(n);let s=n.bulletCurrent||WA(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),f);return c(),u;function f(d,h,m){return h?(m?"":" ".repeat(o))+d:(m?s:s+" ".repeat(o-s.length))+d}}function rFe(e,t,n,r){const a=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(e,r);return s(),a(),o}const aFe=w0(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function iFe(e,t,n,r){return(e.children.some(function(o){return aFe(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function sFe(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}KW.peek=oFe;function KW(e,t,n,r){const a=sFe(n),s=n.enter("strong"),o=n.createTracker(r),l=o.move(a+a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),f=dy(r.before.charCodeAt(r.before.length-1),u,a);f.inside&&(c=ep(u)+c.slice(1));const d=c.charCodeAt(c.length-1),h=dy(r.after.charCodeAt(0),d,a);h.inside&&(c=c.slice(0,-1)+ep(d));const m=o.move(a+a);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},l+c+m}function oFe(e,t,n){return n.options.strong||"*"}function lFe(e,t,n,r){return n.safe(e.value,r)}function cFe(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function uFe(e,t,n){const r=(VW(n)+(n.options.ruleSpaces?" ":"")).repeat(cFe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const GW={blockquote:I4e,break:BM,code:F4e,definition:U4e,emphasis:LW,hardBreak:BM,heading:H4e,html:FW,image:BW,imageReference:UW,inlineCode:zW,link:WW,linkReference:HW,list:eFe,listItem:nFe,paragraph:rFe,root:iFe,strong:KW,text:lFe,thematicBreak:uFe};function dFe(){return{enter:{table:fFe,tableData:UM,tableHeader:UM,tableRow:mFe},exit:{codeText:pFe,table:hFe,tableData:Tj,tableHeader:Tj,tableRow:Tj}}}function fFe(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function hFe(e){this.exit(e),this.data.inTable=void 0}function mFe(e){this.enter({type:"tableRow",children:[]},e)}function Tj(e){this.exit(e)}function UM(e){this.enter({type:"tableCell",children:[]},e)}function pFe(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,gFe));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function gFe(e,t){return t==="|"?t:e}function vFe(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,a=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:c,tableRow:l}};function o(m,g,v,x){return u(f(m,v,x),m.align)}function l(m,g,v,x){const y=d(m,v,x),b=u([y]);return b.slice(0,b.indexOf(`
`))}function c(m,g,v,x){const y=v.enter("tableCell"),b=v.enter("phrasing"),w=v.containerPhrasing(m,{...x,before:s,after:s});return b(),y(),w}function u(m,g){return T4e(m,{align:g,alignDelimiters:r,padding:n,stringLength:a})}function f(m,g,v){const x=m.children;let y=-1;const b=[],w=g.enter("table");for(;++y<x.length;)b[y]=d(x[y],g,v);return w(),b}function d(m,g,v){const x=m.children;let y=-1;const b=[],w=g.enter("tableRow");for(;++y<x.length;)b[y]=c(x[y],m,g,v);return w(),b}function h(m,g,v){let x=GW.inlineCode(m,g,v);return v.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function xFe(){return{exit:{taskListCheckValueChecked:zM,taskListCheckValueUnchecked:zM,paragraph:bFe}}}function yFe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:wFe}}}function zM(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function bFe(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const a=t.children;let s=-1,o;for(;++s<a.length;){const l=a[s];if(l.type==="paragraph"){o=l;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function wFe(e,t,n,r){const a=e.children[0],s=typeof e.checked=="boolean"&&a&&a.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);s&&l.move(o);let c=GW.listItem(e,t,n,{...r,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(f){return f+o}}function jFe(){return[e4e(),w4e(),S4e(),dFe(),xFe()]}function _Fe(e){return{extensions:[t4e(),j4e(e),N4e(),vFe(e),yFe()]}}const kFe={tokenize:PFe,partial:!0},YW={tokenize:TFe,partial:!0},XW={tokenize:OFe,partial:!0},JW={tokenize:IFe,partial:!0},SFe={tokenize:RFe,partial:!0},QW={name:"wwwAutolink",tokenize:AFe,previous:e9},ZW={name:"protocolAutolink",tokenize:EFe,previous:t9},Co={name:"emailAutolink",tokenize:CFe,previous:n9},Ds={};function NFe(){return{text:Ds}}let Vl=48;for(;Vl<123;)Ds[Vl]=Co,Vl++,Vl===58?Vl=65:Vl===91&&(Vl=97);Ds[43]=Co;Ds[45]=Co;Ds[46]=Co;Ds[95]=Co;Ds[72]=[Co,ZW];Ds[104]=[Co,ZW];Ds[87]=[Co,QW];Ds[119]=[Co,QW];function CFe(e,t,n){const r=this;let a,s;return o;function o(d){return!Jk(d)||!n9.call(r,r.previous)||HA(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(d))}function l(d){return Jk(d)?(e.consume(d),l):d===64?(e.consume(d),c):n(d)}function c(d){return d===46?e.check(SFe,f,u)(d):d===45||d===95||Gr(d)?(s=!0,e.consume(d),c):f(d)}function u(d){return e.consume(d),a=!0,c}function f(d){return s&&a&&sa(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function AFe(e,t,n){const r=this;return a;function a(o){return o!==87&&o!==119||!e9.call(r,r.previous)||HA(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(kFe,e.attempt(YW,e.attempt(XW,s),n),n)(o))}function s(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function EFe(e,t,n){const r=this;let a="",s=!1;return o;function o(d){return(d===72||d===104)&&t9.call(r,r.previous)&&!HA(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(d),e.consume(d),l):n(d)}function l(d){if(sa(d)&&a.length<5)return a+=String.fromCodePoint(d),e.consume(d),l;if(d===58){const h=a.toLowerCase();if(h==="http"||h==="https")return e.consume(d),c}return n(d)}function c(d){return d===47?(e.consume(d),s?u:(s=!0,c)):n(d)}function u(d){return d===null||ly(d)||vn(d)||Hc(d)||x0(d)?n(d):e.attempt(YW,e.attempt(XW,f),n)(d)}function f(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function PFe(e,t,n){let r=0;return a;function a(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),a):o===46&&r===3?(e.consume(o),s):n(o)}function s(o){return o===null?n(o):t(o)}}function TFe(e,t,n){let r,a,s;return o;function o(u){return u===46||u===95?e.check(JW,c,l)(u):u===null||vn(u)||Hc(u)||u!==45&&x0(u)?c(u):(s=!0,e.consume(u),o)}function l(u){return u===95?r=!0:(a=r,r=void 0),e.consume(u),o}function c(u){return a||r||!s?n(u):t(u)}}function OFe(e,t){let n=0,r=0;return a;function a(o){return o===40?(n++,e.consume(o),a):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(JW,t,s)(o):o===null||vn(o)||Hc(o)?t(o):(e.consume(o),a)}function s(o){return o===41&&r++,e.consume(o),a}}function IFe(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),s):l===93?(e.consume(l),a):l===60||l===null||vn(l)||Hc(l)?t(l):n(l)}function a(l){return l===null||l===40||l===91||vn(l)||Hc(l)?t(l):r(l)}function s(l){return sa(l)?o(l):n(l)}function o(l){return l===59?(e.consume(l),r):sa(l)?(e.consume(l),o):n(l)}}function RFe(e,t,n){return r;function r(s){return e.consume(s),a}function a(s){return Gr(s)?n(s):t(s)}}function e9(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||vn(e)}function t9(e){return!sa(e)}function n9(e){return!(e===47||Jk(e))}function Jk(e){return e===43||e===45||e===46||e===95||Gr(e)}function HA(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const MFe={tokenize:qFe,partial:!0};function DFe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:BFe,continuation:{tokenize:UFe},exit:zFe}},text:{91:{name:"gfmFootnoteCall",tokenize:FFe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:$Fe,resolveTo:LFe}}}}function $Fe(e,t,n){const r=this;let a=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;a--;){const c=r.events[a][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const u=Zi(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function LFe(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function FFe(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return l;function l(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(d){if(s>999||d===93&&!o||d===null||d===91||vn(d))return n(d);if(d===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return a.includes(Zi(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return vn(d)||(o=!0),s++,e.consume(d),d===92?f:u}function f(d){return d===91||d===92||d===93?(e.consume(d),s++,u):u(d)}}function BFe(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(g){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(g){return g===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):n(g)}function f(g){if(o>999||g===93&&!l||g===null||g===91||vn(g))return n(g);if(g===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return s=Zi(r.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return vn(g)||(l=!0),o++,e.consume(g),g===92?d:f}function d(g){return g===91||g===92||g===93?(e.consume(g),o++,f):f(g)}function h(g){return g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),a.includes(s)||a.push(s),Vt(e,m,"gfmFootnoteDefinitionWhitespace")):n(g)}function m(g){return t(g)}}function UFe(e,t,n){return e.check(Hp,t,e.attempt(MFe,t,n))}function zFe(e){e.exit("gfmFootnoteDefinition")}function qFe(e,t,n){const r=this;return Vt(e,a,"gfmFootnoteDefinitionIndent",5);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(s):n(s)}}function WFe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:a};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function a(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},d={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},h=[["enter",f,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",d,l]],m=l.parser.constructs.insideSpan.null;m&&Ka(h,h.length,0,y0(m,o.slice(u+1,c),l)),Ka(h,h.length,0,[["exit",d,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",f,l]]),Ka(o,u-1,c-u+3,h),c=u+h.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const u=this.previous,f=this.events;let d=0;return h;function h(g){return u===126&&f[f.length-1][1].type!=="characterEscape"?c(g):(o.enter("strikethroughSequenceTemporary"),m(g))}function m(g){const v=tf(u);if(g===126)return d>1?c(g):(o.consume(g),d++,m);if(d<2&&!n)return c(g);const x=o.exit("strikethroughSequenceTemporary"),y=tf(g);return x._open=!y||y===2&&!!v,x._close=!v||v===2&&!!y,l(g)}}}class HFe{constructor(){this.map=[]}add(t,n,r){VFe(this,t,n,r)}consume(t){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let a=r.pop();for(;a;){for(const s of a)t.push(s);a=r.pop()}this.map.length=0}}function VFe(e,t,n,r){let a=0;if(!(n===0&&r.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=n,e.map[a][2].push(...r);return}a+=1}e.map.push([t,n,r])}}function KFe(e,t){let n=!1;const r=[];for(;t<e.length;){const a=e[t];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function GFe(){return{flow:{null:{name:"table",tokenize:YFe,resolveAll:XFe}}}}function YFe(e,t,n){const r=this;let a=0,s=0,o;return l;function l(A){let D=r.events.length-1;for(;D>-1;){const R=r.events[D][1].type;if(R==="lineEnding"||R==="linePrefix")D--;else break}const B=D>-1?r.events[D][1].type:null,E=B==="tableHead"||B==="tableRow"?_:c;return E===_&&r.parser.lazy[r.now().line]?n(A):E(A)}function c(A){return e.enter("tableHead"),e.enter("tableRow"),u(A)}function u(A){return A===124||(o=!0,s+=1),f(A)}function f(A){return A===null?n(A):bt(A)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(A),e.exit("lineEnding"),m):n(A):Bt(A)?Vt(e,f,"whitespace")(A):(s+=1,o&&(o=!1,a+=1),A===124?(e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),o=!0,f):(e.enter("data"),d(A)))}function d(A){return A===null||A===124||vn(A)?(e.exit("data"),f(A)):(e.consume(A),A===92?h:d)}function h(A){return A===92||A===124?(e.consume(A),d):d(A)}function m(A){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(A):(e.enter("tableDelimiterRow"),o=!1,Bt(A)?Vt(e,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):g(A))}function g(A){return A===45||A===58?x(A):A===124?(o=!0,e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),v):j(A)}function v(A){return Bt(A)?Vt(e,x,"whitespace")(A):x(A)}function x(A){return A===58?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(A),e.exit("tableDelimiterMarker"),y):A===45?(s+=1,y(A)):A===null||bt(A)?k(A):j(A)}function y(A){return A===45?(e.enter("tableDelimiterFiller"),b(A)):j(A)}function b(A){return A===45?(e.consume(A),b):A===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(A),e.exit("tableDelimiterMarker"),w):(e.exit("tableDelimiterFiller"),w(A))}function w(A){return Bt(A)?Vt(e,k,"whitespace")(A):k(A)}function k(A){return A===124?g(A):A===null||bt(A)?!o||a!==s?j(A):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(A)):j(A)}function j(A){return n(A)}function _(A){return e.enter("tableRow"),S(A)}function S(A){return A===124?(e.enter("tableCellDivider"),e.consume(A),e.exit("tableCellDivider"),S):A===null||bt(A)?(e.exit("tableRow"),t(A)):Bt(A)?Vt(e,S,"whitespace")(A):(e.enter("data"),T(A))}function T(A){return A===null||A===124||vn(A)?(e.exit("data"),S(A)):(e.consume(A),A===92?N:T)}function N(A){return A===92||A===124?(e.consume(A),T):T(A)}}function XFe(e,t){let n=-1,r=!0,a=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,f,d;const h=new HFe;for(;++n<e.length;){const m=e[n],g=m[1];m[0]==="enter"?g.type==="tableHead"?(l=!1,c!==0&&(qM(h,t,c,u,f),f=void 0,c=0),u={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",u,t]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",f,t]])),a=g.type==="tableDelimiterRow"?2:f?3:1):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=Xg(h,t,s,a,void 0,d),s=[0,0,0,0]),o[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],d=Xg(h,t,s,a,void 0,d)),s=o,o=[s[1],n,0,0])):g.type==="tableHead"?(l=!0,c=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],d=Xg(h,t,s,a,n,d)):o[1]!==0&&(d=Xg(h,t,o,a,n,d)),a=0):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&qM(h,t,c,u,f),h.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=KFe(t.events,n))}return e}function Xg(e,t,n,r,a,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Pu(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const c=Pu(t.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const u=Pu(t.events,n[2]),f=Pu(t.events,n[3]),d={type:l,start:Object.assign({},u),end:Object.assign({},f)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const h=t.events[n[2]],m=t.events[n[3]];if(h[1].end=Object.assign({},m[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,v=n[3]-n[2]-1;e.add(g,v,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return a!==void 0&&(s.end=Object.assign({},Pu(t.events,a)),e.add(a,0,[["exit",s,t]]),s=void 0),s}function qM(e,t,n,r,a){const s=[],o=Pu(t.events,n);a&&(a.end=Object.assign({},o),s.push(["exit",a,t])),r.end=Object.assign({},o),s.push(["exit",r,t]),e.add(n+1,0,s)}function Pu(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const JFe={name:"tasklistCheck",tokenize:ZFe};function QFe(){return{text:{91:JFe}}}function ZFe(e,t,n){const r=this;return a;function a(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),s)}function s(c){return vn(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return bt(c)?t(c):Bt(c)?e.check({tokenize:e3e},t,n)(c):n(c)}}function e3e(e,t,n){return Vt(e,r,"whitespace");function r(a){return a===null?n(a):t(a)}}function t3e(e){return fW([NFe(),DFe(),WFe(e),GFe(),QFe()])}const n3e={};function WM(e){const t=this,n=e||n3e,r=t.data(),a=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);a.push(t3e(n)),s.push(jFe()),o.push(_Fe(n))}var os="Accordion",r3e=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[VA,a3e,i3e]=lp(os),[_0,K3e]=wr(os,[i3e,Rq]),KA=Rq(),r9=Y.forwardRef((e,t)=>{const{type:n,...r}=e,a=r,s=r;return i.jsx(VA.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?i.jsx(c3e,{...s,ref:t}):i.jsx(l3e,{...a,ref:t})})});r9.displayName=os;var[a9,s3e]=_0(os),[i9,o3e]=_0(os,{collapsible:!1}),l3e=Y.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},collapsible:s=!1,...o}=e,[l,c]=Pa({prop:n,defaultProp:r??"",onChange:a,caller:os});return i.jsx(a9,{scope:e.__scopeAccordion,value:Y.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:Y.useCallback(()=>s&&c(""),[s,c]),children:i.jsx(i9,{scope:e.__scopeAccordion,collapsible:s,children:i.jsx(s9,{...o,ref:t})})})}),c3e=Y.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},...s}=e,[o,l]=Pa({prop:n,defaultProp:r??[],onChange:a,caller:os}),c=Y.useCallback(f=>l((d=[])=>[...d,f]),[l]),u=Y.useCallback(f=>l((d=[])=>d.filter(h=>h!==f)),[l]);return i.jsx(a9,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:i.jsx(i9,{scope:e.__scopeAccordion,collapsible:!0,children:i.jsx(s9,{...s,ref:t})})})}),[u3e,k0]=_0(os),s9=Y.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:a,orientation:s="vertical",...o}=e,l=Y.useRef(null),c=St(l,t),u=a3e(n),d=hf(a)==="ltr",h=Ie(e.onKeyDown,m=>{var T;if(!r3e.includes(m.key))return;const g=m.target,v=u().filter(N=>{var A;return!((A=N.ref.current)!=null&&A.disabled)}),x=v.findIndex(N=>N.ref.current===g),y=v.length;if(x===-1)return;m.preventDefault();let b=x;const w=0,k=y-1,j=()=>{b=x+1,b>k&&(b=w)},_=()=>{b=x-1,b<w&&(b=k)};switch(m.key){case"Home":b=w;break;case"End":b=k;break;case"ArrowRight":s==="horizontal"&&(d?j():_());break;case"ArrowDown":s==="vertical"&&j();break;case"ArrowLeft":s==="horizontal"&&(d?_():j());break;case"ArrowUp":s==="vertical"&&_();break}const S=b%y;(T=v[S].ref.current)==null||T.focus()});return i.jsx(u3e,{scope:n,disabled:r,direction:a,orientation:s,children:i.jsx(VA.Slot,{scope:n,children:i.jsx(Ye.div,{...o,"data-orientation":s,ref:c,onKeyDown:r?void 0:h})})})}),fy="AccordionItem",[d3e,GA]=_0(fy),o9=Y.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...a}=e,s=k0(fy,n),o=s3e(fy,n),l=KA(n),c=rr(),u=r&&o.value.includes(r)||!1,f=s.disabled||e.disabled;return i.jsx(d3e,{scope:n,open:u,disabled:f,triggerId:c,children:i.jsx($q,{"data-orientation":s.orientation,"data-state":h9(u),...l,...a,ref:t,disabled:f,open:u,onOpenChange:d=>{d?o.onItemOpen(r):o.onItemClose(r)}})})});o9.displayName=fy;var l9="AccordionHeader",c9=Y.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=k0(os,n),s=GA(l9,n);return i.jsx(Ye.h3,{"data-orientation":a.orientation,"data-state":h9(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:t})});c9.displayName=l9;var Qk="AccordionTrigger",u9=Y.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=k0(os,n),s=GA(Qk,n),o=o3e(Qk,n),l=KA(n);return i.jsx(VA.ItemSlot,{scope:n,children:i.jsx(AIe,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:s.triggerId,...l,...r,ref:t})})});u9.displayName=Qk;var d9="AccordionContent",f9=Y.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=k0(os,n),s=GA(d9,n),o=KA(n);return i.jsx(EIe,{role:"region","aria-labelledby":s.triggerId,"data-orientation":a.orientation,...o,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});f9.displayName=d9;function h9(e){return e?"open":"closed"}var f3e=r9,h3e=o9,m3e=c9,m9=u9,p9=f9;const p3e=f3e,g9=p.forwardRef(({className:e,...t},n)=>i.jsx(h3e,{ref:n,className:ke("border-b",e),...t}));g9.displayName="AccordionItem";const v9=p.forwardRef(({className:e,children:t,...n},r)=>i.jsx(m3e,{className:"flex",children:i.jsxs(m9,{ref:r,className:ke("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,i.jsx(wa,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));v9.displayName=m9.displayName;const x9=p.forwardRef(({className:e,children:t,...n},r)=>i.jsx(p9,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:i.jsx("div",{className:ke("pb-4 pt-0",e),children:t})}));x9.displayName=p9.displayName;const HM=`# Change Log\r
# [0.1.24] FE WEB CEKAT 2025-12-30\r
### Contacts  Conversations (Multi-Thread Support)\r
- **Thread Picker for Open conversation**: Contacts now open a thread/channel picker instead of jumping directly to \`/chat\` by contact, solving ambiguity when a contact has multiple threads across channels.\r
  - New component: \`src/components/chat/ContactThreadPickerDialog.tsx\`\r
  - Updated: \`src/components/contacts/Contacts.tsx\` now opens the picker and navigates with \`menu=chat&contact=<id>&thread=<id>\`\r
\r
### Conversations: Deterministic Thread Selection\r
- **URL-based thread deep link**: \`ConversationPage\` now supports \`thread=<threadId>\` and prioritizes it over \`contact=<contactId>\`, ensuring the correct thread opens even when the same contact has multiple channel threads.\r
  - Clicking a conversation updates the URL (\`thread\` + \`contact\`) so navigation is stable and shareable.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
### Conversations UI\r
- **Platform tags**: Conversation rows now show provider badges (e.g. Telegram/Web/WhatsApp) for clearer channel context.\r
  - Updated: \`src/components/chat/ConversationPage.tsx\`\r
\r
### Thread Picker UI Polish\r
- **Better list layout**: Improved thread list rendering to avoid clipped/trimmed rows and to pin the platform chip to the bottom-right of each row (timestamp top-right).\r
  - Updated: \`src/components/chat/ContactThreadPickerDialog.tsx\`\r
\r
# [0.1.23] FE WEB CEKAT 2025-12-29\r
### Authentication & User Management\r
- **Whitespace-Free Email & Password Inputs**: Login, reset-password, and agent creation forms now strip spaces and force lowercase emails while blocking space characters in passwords, preventing accidental invalid credentials.\r
  - \`src/components/auth/Login.tsx\` sanitizes email input across login, reset, and (future) signup tabs and blocks whitespace in password fields.\r
  - \`src/pages/ResetPassword.tsx\` applies the same input guards to new/confirm password fields.\r
  - \`src/components/humanagents/HumanAgents.tsx\` normalizes emails when creating agents to avoid duplicate entries caused by casing or trailing spaces.\r
\r
### Conversations\r
- **WhatsApp-Style Day Separators**: Chat threads display \`Today\`, \`Yesterday\`, or a formatted date badge between message clusters, making timelines easier to scan.\r
  - Implemented in \`src/components/chat/ConversationPage.tsx\` with memoized grouping so the list stays performant.\r
\r
### Analytics\r
- **Unified Date Range Picker**: Replaced separate \`From\`/\`To\` inputs with a single range calendar that mirrors the contacts page behavior and keeps queries bounded to today.\r
  - \`src/components/analytics/Analytics.tsx\` stores normalized \`YYYY-MM-DD\` strings and offers a quick Clear action.\r
- **Stable Refresh Logic**: Prevented stale data by delaying metric/database fetches until the user finishes selecting the range (popover closes), ensuring the latest \`from/to\` pair drives every refresh.\r
\r
# [0.1.22] FE WEB CEKAT 2025-12-24\r
### Authentication & Environment\r
- **Supabase Config Hardening**: Prevented Invalid API key errors in Netlify preview/dev deploys caused by URL/key mismatches.\r
  - \`src/config/supabase.ts\` now infers dev/prod pairing from the Supabase URL host when only one override is provided.\r
  - Defaults to a dev-safe target unless the URL clearly points to \`api.cssuper.com\`.\r
  - Still supports explicit \`VITE_SUPABASE_URL\` and \`VITE_SUPABASE_ANON_KEY\` overrides.\r
\r
### Platforms (WhatsApp)\r
- **Delete Webhook Payload**: When deleting WhatsApp channels, the webhook call now includes the channel identifier.\r
  - \`DELETE_SESSION\` payload now sends \`channel_id\` and \`org_id\` alongside \`session_name\` for reliable backend cleanup.\r
\r
- **External ID Consistency**: WhatsApp channels now maintain a stable external identifier across lifecycle states.\r
  - On create, WhatsApp channels set \`external_id\` to the normalized WAHA session name and store \`credentials.waha_session_name\`.\r
  - WAHA session sync now upgrades \`external_id\` to the real WhatsApp \`me.id\` (e.g. \`628...@c.us\`) once available, and never wipes it back to null.\r
  - Added a fallback lookup to \`GET /api/sessions/{name}\` when the WAHA list endpoint does not include \`me.id\`.\r
  - Standardized WAHA session naming to \`toLowerCase().replace(/\\s/g,'')\` for consistent matching.\r
# [0.1.21] FE WEB CEKAT 2025-12-24\r
### Circuit Breaker Settings\r
- **Date Range Validation**: Updated chat date filter to require both "From" and "To" values before applying.\r
  - Prevents half-filled date ranges from running and warns users when only one side is selected.\r
  - Disallows selecting an end date earlier than the start date and keeps calendars constrained to valid ranges.\r
- **Audit Log Date Filter Guardrails**: Logs page now requires selecting both "From" and "To" dates and constrains pickers to valid ranges.\r
  - Displays inline guidance when only one side of the range is provided.\r
  - Ensures backend queries use start/end-of-day boundaries for inclusive day filtering.\r
  - Replaced separate date inputs with a single range calendar so start and end dates are chosen together.\r
\r
# [0.1.20] FE WEB CEKAT 2025-12-24\r
### Conversations: Filter UX & Correctness\r
- **Channel Type Filter Fixed**: Channel Type now correctly filters threads at the query level.\r
  - Updated \`useConversations\` to use an inner join (\`channels!inner(...)\`) so \`channels.provider\` filters actually constrain \`threads\` results (PostgREST behavior).\r
  - Added defensive client-side filtering for \`channelType\`, \`inbox\`, and \`platformId\` to ensure consistent UI results.\r
\r
- **Persistent Applied Filters**: Applied filters now persist and are shareable.\r
  - Filters are serialized into URL query params (\`f_*\`) so refresh/back/forward retains the exact filtered view.\r
  - If URL has no filter params, the last applied filters are restored from localStorage (per-user key).\r
\r
- **Visible Active Filters**: Users can now see whats currently applied.\r
  - \`ConversationPage\` renders active filter badges under the Conversations header (Channel, Platform, Status, Agent, Resolved By, Date, Inbox).\r
  - \`ChatFilter\` modal is now controlled via a \`value\` prop so reopening the modal shows the currently applied values.\r
\r
### Configuration & Environment Management\r
- **Centralized URL Configuration**: Created comprehensive URL and environment configuration system\r
  - New \`src/config/urls.ts\` centralizes all app base URLs (APP_ORIGIN, WAHA_BASE_URL) with environment-aware defaults\r
  - New \`src/config/supabase.ts\` centralizes Supabase URL and key configuration with automatic dev/prod switching\r
  - Production app origin now defaults to \`https://synkaai.netlify.app\` (even in dev) for consistent LiveChat links\r
  - Supabase URL automatically switches: DEV  \`bkynymyhbfrhvwxqqttk.supabase.co\`, PROD  \`api.cssuper.com\`\r
  - All configuration supports \`VITE_*\` environment variable overrides for flexible deployment\r
  - Removed all hardcoded Netlify and Supabase URLs from components\r
\r
- **Platform URL Updates**: Updated all platform-related URLs to use centralized configuration\r
  - \`ConnectedPlatforms.tsx\` now uses \`APP_ORIGIN\` and \`livechatUrl()\` helper instead of hardcoded URLs\r
  - LiveChat embed code now uses configurable \`APP_ORIGIN\` instead of hardcoded domain\r
  - \`WhatsAppPlatformForm.tsx\` uses \`WAHA_BASE_URL\` from config instead of hardcoded Railway URL\r
  - All platform forms now reference single source of truth for base URLs\r
\r
### AI Agent Settings Cleanup\r
- **Removed Context Window Field**: Removed "Context Window (K tokens)" from Additional Settings UI\r
  - Field no longer visible or editable in AI Agent Settings interface\r
  - Removed all related state variables (\`contextLimitInput\`, \`contextLimitMax\`)\r
  - Removed input handler (\`handleContextLimitChange\`) and validation logic\r
  - Save logic still automatically persists safe default value (existing value or 28K tokens, clamped to model capability)\r
  - Ensures database writes continue to work without breaking changes\r
\r
### Conversation Filtering\r
- **Removed Pipeline Status Filter**: Cleaned up thread filter interface\r
  - Removed "Pipeline Status" dropdown from chat filter dialog\r
  - Removed \`pipelineStatus\` from filter state and type definitions\r
  - Removed \`pipeline_status\` query filtering from \`useConversations\` hook\r
  - Simplified filter UI with cleaner, more focused options\r
\r
### Technical Improvements\r
- **Code Organization**: Improved maintainability and consistency\r
  - Single source of truth for all environment-specific URLs\r
  - Consistent configuration pattern across all services\r
  - Better separation of concerns between UI and configuration\r
  - Enhanced type safety with centralized config exports\r
\r
# [0.1.19] FE WEB CEKAT 2025-12-24\r
### Circuit Breaker Settings\r
- **Robust Numeric Validation**: Reset timeout, monitoring period, request timeout, and threshold fields now accept temporary clears but enforce min/max bounds before saving.\r
  - Inline error messages and disabled save state prevent invalid submissions.\r
  - Inputs strip non-numeric characters, block scientific notation, and clamp values to their allowed ranges.\r
- **Latency Feedback**: Healthy and stress latency controls show live seconds previews, clarifying millisecond inputs.\r
- **Tooltip Refinement**: Repositioned tooltips to render beside their triggers, preventing clipping inside the modal.\r
\r
### Adaptive Rate Limiter Configuration\r
- **Precision Controls**: Base limits and multiplier inputs now sanitize numeric entry, limit decimals to three places, and sync their raw display strings with validated state.\r
- **Validation Guardrails**: All adaptive fields surface inline errors and keep the save button disabled until values fall within allowed ranges.\r
- **Enhanced Summary**: Read-only configuration card now surfaces latency thresholds (with seconds) alongside existing multiplier and interval details.\r
- **Modal Tooltips**: Every helper tooltip aligns left/right relative to its column, ensuring full visibility within the dialog.\r
\r
# [0.1.18] FE WEB CEKAT 2025-12-24\r
### Bug Fixes\r
- **Fixed Platform Filter Not Finding Channels**: Resolved critical bug where selecting a channel type (Telegram, WhatsApp, Web) would show no platforms.\r
  - Changed platform filtering from \`channels.type\` to \`channels.provider\` to match actual database schema.\r
  - In database, \`channels.provider\` contains transport values (\`telegram\`, \`web\`, \`whatsapp\`) while \`channels.type\` contains implementation details (\`bot\`, \`inbox\`).\r
  - Updated both \`ChatFilter.tsx\` (UI filtering) and \`useConversations.ts\` (query filtering) to use \`channels.provider\`.\r
  - Telegram and other channel types now correctly display their platforms when selected.\r
\r
### Conversation Management\r
- **Hierarchical Channel Type  Platform Filter**: Enhanced chat filter with parent-child filter relationship.\r
  - Platform filter now requires Channel Type selection first (Platform dropdown disabled until Channel Type is chosen).\r
  - Placeholder text changes to "Select channel type first" when Channel Type is not selected.\r
  - Changing Channel Type automatically clears Platform selection to prevent stale selections.\r
  - Improved UX with clear dependency indication between filters.\r
\r
- **Empty State for Platform Filter**: Added user-friendly empty state handling.\r
  - When selected Channel Type has no matching platforms, dropdown shows disabled option: "No platforms found for this channel type".\r
  - Prevents confusion when no results are available for a selected channel type.\r
  - Platform display simplified to show only \`display_name\` without provider/type suffix for cleaner UI.\r
\r
# [0.1.17] FE WEB CEKAT 2025-12-22\r
### Bug Fixes\r
- **Fixed Stale Data Persistence After Role Changes**: Resolved critical issue where threads and contacts persisted in the UI after role changes in the database.\r
  - Removed localStorage caching for threads (\`app.cachedConversations\`) to prevent stale data from persisting after authorization changes.\r
  - Disabled query caching for authorization-sensitive operations (threads, contacts) in \`protectedSupabase\` wrapper to ensure fresh data on role changes.\r
  - Threads and contacts now immediately clear and refetch when user roles change, preventing unauthorized data from being displayed.\r
  - Fixed issue where changing a user's role from \`master_agent\` to \`super_agent\` (or vice versa) in the database would not immediately reflect in the UI.\r
\r
### Technical Improvements\r
- **Realtime Role Change Detection**: Implemented comprehensive authorization change detection system.\r
  - Added realtime subscription to \`user_roles\` table in \`RBACContext\` to detect role changes for the current user.\r
  - Created \`authz.ts\` utility module for centralized authorization change handling and cache invalidation.\r
  - Implemented event-based system (\`authzChanged\` event) to notify hooks when authorization changes occur.\r
  - \`useConversations\` and \`useContacts\` hooks now listen for authorization changes and automatically reset state + refetch data.\r
  - Ensures UI always reflects current user permissions without requiring manual refresh or logout/login.\r
\r
- **Cache Invalidation Strategy**: Enhanced cache management for authorization-sensitive data.\r
  - Authorization changes now trigger comprehensive cache clearing (localStorage, query cache, fallback handler).\r
  - Removed role-agnostic caching that could serve stale results after permission changes.\r
  - All authorization-sensitive queries now bypass cache to ensure data accuracy.\r
  - Improved security by preventing cached data from persisting after role downgrades.\r
\r
# [0.1.16] FE WEB CEKAT 2025-12-20\r
### UI Components\r
- **SearchableSelect Component**: Added a new reusable searchable single-select dropdown component.\r
  - Provides searchable dropdown functionality with keyboard navigation support.\r
  - Includes proper accessibility attributes and visual feedback for selected items.\r
  - Used for improved agent assignment interface in conversation management.\r
\r
- **SearchableMultiSelect Component**: Added a new reusable searchable multi-select component.\r
  - Supports selecting multiple items with badge display for selected values.\r
  - Includes add/remove callbacks for granular control over selection changes.\r
  - Displays selected items as removable badges with clear visual indicators.\r
\r
### Conversation Management\r
- **Enhanced Agent Assignment UI**: Replaced popover-based assignment interface with searchable select components.\r
  - "Handled By" field now uses \`SearchableSelect\` for improved searchability and UX.\r
  - Streamlined assignment flow with better visual feedback and state management.\r
  - Added optimistic UI updates with proper state synchronization.\r
\r
- **Improved Collaborator Management**: Enhanced thread collaborator interface with multi-select support.\r
  - Replaced popover-based collaborator addition with \`SearchableMultiSelect\` component.\r
  - Collaborator list now displays as removable badges for better visibility.\r
  - Added support for super agent member filtering - only members of the assigned super agent can be added as collaborators.\r
  - Collaborator selection is disabled until a "Handled By" agent is assigned.\r
  - Automatic fetching of super agent members when an agent is assigned.\r
\r
- **Manual Thread Assignment**: Added \`assignThreadToUser\` function for supervisor-level thread reassignment.\r
  - Allows supervisors to manually assign conversations to specific users.\r
  - Automatically creates system event messages when assignments occur.\r
  - Updates thread metadata including \`assigned_by_user_id\`, \`assigned_at\`, and \`handover_reason\`.\r
  - Disables AI access when manually assigned (\`ai_access_enabled: false\`).\r
\r
- **User Label Resolution**: Improved user display name resolution for agents and collaborators.\r
  - Fetches user profile data for agents not present in the human agents list.\r
  - Caches user labels to avoid redundant API calls.\r
  - Provides fallback display names when profile data is unavailable.\r
\r
### Bug Fixes\r
- **Fixed Handled By State Leak**: Resolved critical bug where assigning a thread to an agent would incorrectly show that agent as assigned to all other threads.\r
  - Scoped \`handledByOverride\` state to specific thread IDs instead of using global state.\r
  - Optimistic UI updates now only apply to the thread being assigned, preventing state leakage when navigating between conversations.\r
  - Fixed issue where changing "Handled By" for one thread would temporarily display the same value for all threads until server refresh.\r
\r
# [0.1.15] FE WEB CEKAT 2025-12-19\r
### Database & Policies\r
- **Threads Update Policy**: Master agents can now resolve conversations across all environments.\r
  - Updated the \`threads update perm update_own\` policy to allow updates when \`is_master_agent_in_org(org_id)\` is true.\r
  - Applied the policy change to main, development, and backup Supabase projects and added a migration for consistency.\r
\r
### Conversation Management\r
- **Resolved Thread Cleanup**: UI now hides take-over controls once a thread is closed.\r
  - Removed the takeover button and composer input when \`status === 'closed'\`, preventing accidental actions on resolved chats.\r
\r
### Contacts\r
- **Unassigned Filter Accuracy**: Ensured the contacts list reflects only unassigned records without altering assigned data.\r
  - Adjusted Supabase querying and client filtering so contacts with no assigned agent (or no thread yet) display correctly.\r
  - Total counters and pagination now show filtered counts (e.g. \`12 of 16\`) when a handled-by filter is active.\r
- **Export to CSV**: Added a one-click export that downloads the current contact dataset (with latest thread info) as a CSV.\r
  - Includes contact fields (name, phone, email, notes, created_at) and latest thread metadata (status, handled by, channel).\r
- **Toolbar Cleanup**: Removed the unused Customize Columns button for a leaner toolbar experience.\r
\r
# [0.1.14] FE WEB CEKAT 2025-12-18\r
### Platform Forms (WhatsApp / Telegram / Web)\r
- **Top Spacing Layout Fix**: Standardized form spacing under dialog headers for a cleaner, consistent layout across all platform setup forms.\r
\r
### Telegram Platform\r
- **Bot Token Validation (Required)**: Added a **Validate** button beside the Telegram Bot Token field and made validation mandatory before creating a Telegram platform.\r
  - Create is blocked with an error until the token has been validated.\r
- **Token Verification via Supabase Edge Function**: Token verification now calls the Supabase Edge Function endpoint (\`/functions/v1/telegram-verify-token\`) with a strict response contract (\`{ valid: boolean }\`).\r
  - \`callWebhook()\` now auto-attaches Supabase auth headers for Supabase Edge Function URLs.\r
\r
# [0.1.13] FE WEB CEKAT 2025-12-17\r
### Conversation Management\r
- **Date Filter Fix**: Resolved an issue where the date filter in the conversations menu would incorrectly exclude valid conversations.\r
  - Switched from server-side filtering on \`created_at\`/\`last_msg_at\` (which could be stale) to client-side filtering using the computed last message time.\r
  - Ensures the filter now perfectly matches the dates displayed in the UI, correctly showing threads active within the selected range.\r
\r
# [0.1.12] FE WEB CEKAT 2025-12-14\r
### Human Agents UI Protection\r
- **Master Agent UI Safeguards**: Enhanced protection for master agent accounts in the Human Agents interface.\r
  - Status dropdown button is now disabled for master agents across all sections (master agents, super agents, regular agents, and pending invitations).\r
  - Chevron dropdown icon is conditionally hidden for master agents to provide clear visual indication that status cannot be changed.\r
  - Delete button is completely hidden for master agents (replacing the previous disabled button with tooltip approach) across all agent sections.\r
  - Applied consistent protection logic using \`primaryRole === 'master_agent'\` checks throughout the component.\r
  - Provides cleaner UI experience by removing non-functional controls rather than showing disabled states.\r
\r
### Authentication & OTP\r
- **2FA Email Edge Function Update**: Updated edge function reference for login-specific 2FA emails.\r
  - Changed edge function call from \`send-2fa-email\` to \`send-2fa-login-email\` in \`AuthContext.tsx\` and \`Otp.tsx\`.\r
  - Aligns with backend function naming convention for better clarity and separation of login vs other 2FA email flows.\r
\r
# [0.1.11] FE WEB CEKAT 2025-12-10\r
### Conversation Management\r
- **Status Filter Cleanup**: Removed the redundant "Resolved" option from the conversation status filter.\r
  - The "Closed" status now serves as the single source of truth for completed conversations.\r
  - Simplified the filtering logic to remove unnecessary status checks.\r
\r
# [0.1.10] FE WEB CEKAT 2025-12-09\r
### Human Agents & Permissions\r
- **Create Agent Permission Gate**: Simplified and hardened the Create Agent button on the Human Agents page.\r
  - Button is now directly gated by \`users_profile.create\` via \`PermissionGate\`, following the same pattern as other RBAC-protected actions.\r
  - When the user lacks permission, the button stays visible but disabled with a clear tooltip (You do not have permission to create agents.).\r
  - Removed the extra client-side lookup against the \`permissions\` table and associated state (\`createPermissionKey\`, \`checkingCreatePermission\`) to reduce complexity and runtime edge cases.\r
\r
### Navigation & RBAC Consistency\r
- **Super Agents Schema Alignment**: Updated \`PERMISSIONS_SCHEMA\` to include the full \`super_agents\` action set (\`create\`, \`update\`, \`delete\`, \`read_all\`, \`read_own\`), matching the backend \`permissions\` table.\r
- **Navigation Read-Gates**: Centralized navigation gating to use read scopes consistently:\r
  - Added a defensive \`readPerms(resource)\` helper that safely derives \`resource.read*\` keys from \`PERMISSIONS_SCHEMA\`.\r
  - Human Agents sidebar item now depends on any \`super_agents\` read scope (e.g. \`super_agents.read_all\` / \`super_agents.read_own\`), keeping menu visibility aligned with DB permissions.\r
- **useNavigation Stability**: Adjusted \`useNavigation\` to skip DB permission recomputation while RBAC is still loading, preventing transient context errors during hot reloads while keeping the existing has_perm-first behavior.\r
\r
# [0.1.9] FE WEB CEKAT 2025-12-03\r
### AI Agents\r
- Replaced the browser \`confirm()\` with a first-class modal when deleting AI agents.\r
  - Uses the shared \`AlertDialog\` component with explicit cancel/confirm controls.\r
  - Shows the agent name inside the confirmation copy and blocks dismissal while the request is in flight.\r
  - Surfaces loader feedback and only closes when the Supabase delete succeeds.\r
\r
# [0.1.8] FE WEB CEKAT 2025-12-03\r
### Platform Forms: Super Agent Management & Scoping\r
- **Explicit Super Agent Selection**: All platform forms (WhatsApp, Telegram, Web) now require explicit Super Agent selection before AI Agent selection\r
  - Super Agent field is now a required, selectable dropdown (previously derived from AI Agent)\r
  - Field appears above AI Agent selection with clear labeling and tooltips\r
  - Form validation prevents submission without Super Agent selection\r
  - Helper text explains that Super Agent can be changed independently of AI Agent\r
\r
- **AI Agent Filtering by Super Agent**: Enhanced AI Agent selection with strict scoping\r
  - AI Agent dropdown only shows agents belonging to the selected Super Agent\r
  - Validation prevents selecting AI agents that don't belong to the selected Super Agent\r
  - Error toast notifications when attempting invalid selections\r
  - Form automatically resets AI Agent selection when Super Agent changes\r
  - Warning message displayed if selected AI Agent lacks a Super Agent assignment\r
\r
- **Human Agent Scoping**: Improved human agent assignment with role-based filtering\r
  - Human Agent multi-select only shows agents assigned to the selected Super Agent\r
  - "Select All" and "Unselect All" buttons for quick agent assignment\r
  - Multi-select disabled until Super Agent is selected\r
  - Clear placeholder text indicating selection requirements\r
  - Consistent behavior across all platform types (WhatsApp, Telegram, Web)\r
\r
- **AI Agent Creation Enhancement**: Super Agent assignment during creation\r
  - Super Agent selection required in AI Agent creation dialog\r
  - Searchable dropdown for Super Agent selection\r
  - Super Agent information displayed in AI Agent cards\r
  - Validation ensures Super Agent is selected before agent creation\r
\r
### Navigation & Permissions Updates\r
- **Navigation Configuration**: Updated navigation items and permission mappings\r
  - Refined permission checks for navigation visibility\r
  - Enhanced role-based access control for navigation items\r
  - Improved database permission checks in useNavigation hook\r
\r
- **Permission Schema**: Updated permissions configuration\r
  - Aligned permission schema with backend requirements\r
  - Enhanced permission categorization and validation\r
\r
### Live Chat Improvements\r
- **Message Handling**: Enhanced message synchronization and streaming\r
  - Improved realtime message updates\r
  - Better handling of streaming responses\r
  - Optimized message deduplication logic\r
  - Enhanced user message timeout handling\r
\r
### Webhook Configuration\r
- **Webhook Routing**: Updated webhook endpoint configuration\r
  - Enhanced proxy-aware routing\r
  - Improved endpoint resolution for different providers\r
  - Better error handling for webhook calls\r
\r
### Technical Improvements\r
- **Hooks Enhancement**: Improved data fetching and scoping\r
  - Enhanced useAIAgents hook with better super agent scoping\r
  - Improved useNavigation hook with database permission checks\r
  - Better error handling and loading states\r
  - Optimized cache management\r
\r
# [0.1.7] FE WEB CEKAT 2025-12-03\r
### RBAC & Permissions (Finalized Alignment)\r
- Standardized PERMISSIONS_SCHEMA to match production backend exactly:\r
  analytics, ai_profiles, ai_sessions, channels, contacts, contact_identities, threads, messages, ai_agent_files, admin_panel, roles, audit_logs, alerts.\r
- Permission Matrix UX revamp (purely permission-driven):\r
  - Card sections enforced per resource: Manage (create/update/delete), Access Level (read variants), Special Actions (send/ack).\r
  - Mutually exclusive Access Level pills; Threads uses My Channels (read_channel_owned), Collaborator, All.\r
  - Special actions exposed as toggles: messages.send (Send), alerts.ack (Acknowledge).\r
  - Select All sets Manage + Special Actions ON and selects the most permissive single read level; Unselect All resets to None.\r
  - Labels updated (Update Settings for admin_panel.update); consistent wording across cards.\r
  - Added concise tooltips for threads/messages read scopes and alerts.ack.\r
- Removed bundle-based Menu Access from PermissionsPage; no more ghost toggles or bundles.\r
- Fixed toggle handler so switches reflect intended state; role permission grant/revoke now gated by roles.update.\r
- Debounced RBAC refresh during bulk edits to prevent UI lag.\r
\r
### Navigation & Visibility (Policy-First)\r
- Menu visibility now depends on DB has_perm checks; items are hidden if the user lacks any read scope for that section.\r
- Updated gating keys to align with schema:\r
  - Admin Panel: admin_panel.read (menu), admin_panel.update (controls)\r
  - Permissions: roles.read\r
  - Chat: threads.read_* (any of read_all/read_channel_owned/read_collaborator)\r
  - Analytics: analytics.read\r
  - Contacts: contacts.read_*; Platforms: channels.read_*; AI Agents: ai_profiles.read_*; Logs: audit_logs.read\r
- Sidebar renders only items from getAccessibleNavItems(); fixed ReferenceError by properly destructuring the hook return.\r
- Reduced has_perm spam: policy checks recompute only when RBAC roles/permissions change.\r
\r
### Admin Panel\r
- Replaced legacy access_rules.configure gates:\r
  - Controls now use admin_panel.update; navigation uses admin_panel.read.\r
\r
### Misc\r
- Added contact_identities to schema.\r
- Consistency/cleanup across labels, ordering, and spacing in Permission Matrix.\r
\r
# [0.1.6] FE WEB CEKAT 2025-11-30\r
### Cache Management & Session Reliability\r
- **Comprehensive Cache Clearing on Logout**: Enhanced logout functionality to clear all cached data\r
  - Clears all localStorage items (including \`app.cached*\`, \`app.currentUserId\`, etc.)\r
  - Clears all sessionStorage items\r
  - Clears all Supabase auth tokens\r
  - Prevents stale data from persisting after logout\r
  - Applied to both \`AuthContext.signOut()\` and \`Logout.tsx\` page\r
\r
- **localStorage-Based User ID Storage**: Improved session reliability by storing user ID in localStorage\r
  - User ID and email stored in localStorage as \`app.currentUserId\` and \`app.currentUserEmail\` on login\r
  - Added \`getCurrentUserId()\` helper function that prefers localStorage over Supabase session\r
  - Updated \`logAction()\` to use localStorage user_id first, then fallback to Supabase session\r
  - Ensures consistent user identification even when Supabase session is temporarily unavailable\r
\r
### Bug Fixes\r
- **Merge Conflict Resolution**: Resolved merge conflict in \`useAIAgents.ts\` by combining \`scopeMode\` and \`superAgentId\` logic\r
- **Policy Role Fix**: Fixed \`threads_master_read\` policy to use \`authenticated\` role instead of \`public\` role\r
- **Cache Persistence**: Fixed issue where cached data persisted after logout, causing users to see unauthorized data\r
\r
# [0.1.5] FE WEB CEKAT 2025-11-30\r
### Webhook & Supabase URL Consistency\r
- **Single Source for Supabase URL**: Exported a shared \`SUPABASE_URL\` constant from the Supabase client so all front-end integrations reference the same base URL sinstead of duplicating it.\r
- **Proxy Edge Function Alignment**: Updated \`WEBHOOK_CONFIG\` to derive the proxy base (\`/functions/v1/proxy-n8n\`) from the shared \`SUPABASE_URL\`, removing the old hardcoded Supabase project host and keeping proxy routing aligned with the active project.\r
- **WhatsApp WAHA Webhook Normalization**: Swapped the hardcoded Railway webhook host in \`WhatsAppPlatformForm\` for \`WEBHOOK_CONFIG.BASE_URL\`, ensuring WAHA sessions always post back into the currently configured webhook environment.\r
\r
# [0.1.4] FE WEB CEKAT 2025-11-28\r
### Bug Fixes\r
- **PermissionsPage Duplicate Declaration Fix**: Resolved "Identifier 'permissionSearch' has already been declared" syntax error\r
  - Removed duplicate state declarations for \`permissionSearch\`, \`permissionResourceFilter\`, and \`permissionActionFilter\`\r
  - Kept the properly typed versions of these state variables\r
  - Fixed runtime error that prevented the Permissions page from loading\r
\r
# [0.1.3] FE WEB CEKAT 2025-11-28\r
### AI Agent Visibility\r
- Agents now only see AI agents owned by their assigned super agent; a new \`useSuperAgentScope\` hook drives consistent filtering across dashboards, dropdowns, and cached data.\r
- The AI Agents list and helpers surface localized messaging when an agent has no supervising cluster, preventing stale cross-team data from leaking through local storage.\r
### Database Access Control\r
- Tightened the \`ai_profiles\` RLS guard so master agents retain full visibility, super agents stay scoped to their own records, and agents inherit their supervising super agents access.\r
\r
# [0.1.2] FE WEB CEKAT 2025-11-26\r
### Platform Form Enhancements for Super Agents\r
- **Super Agent Field Auto-Prefill**: All platform creation forms (Telegram, WhatsApp, Web) now automatically prefill the super agent field when the current user is a super agent\r
  - Super agent field is automatically populated with the current user's super agent username/ID when form opens\r
  - Field becomes readonly (visual indication with reduced opacity) when user is a super agent\r
  - Helper text updated to indicate super agent is determined by current user's account for super agent users\r
  - Prevents super agent users from changing their own super agent assignment\r
\r
- **AI Agent Filtering for Super Agents**: Enhanced platform forms to filter AI agents based on super agent role\r
  - Super agent users only see AI agents that belong to their account in the AI agent dropdown\r
  - Validation prevents selecting AI agents that don't belong to the super agent's account\r
  - Error toast notification shown when attempting to select invalid AI agents\r
  - Master agents continue to see all AI agents as before\r
\r
- **Role-Based Form Behavior**: Implemented role-aware form logic across all platform types\r
  - Added \`useRBAC()\` hook integration to check for \`ROLES.SUPER_AGENT\` role\r
  - Automatic super agent ID detection from \`humanAgents\` list when form opens\r
  - Form reset logic preserves super agent ID for super agent users\r
  - Consistent behavior across Telegram, WhatsApp, and Web platform forms\r
\r
### Technical Improvements\r
- **Component Updates**: Enhanced platform form components with role-based logic\r
  - Added \`useEffect\` hooks to prefill super agent field on form open\r
  - Integrated \`useRBAC\` context for role checking\r
  - Added conditional rendering and validation based on user role\r
  - Improved form state management to preserve super agent selection for super agent users\r
\r
# [0.1.1] FE WEB CEKAT 2025-11-27\r
### Permissions Console\r
- **Regression Fix**: Reintroduced missing permission search and filter state in \`PermissionsPage\`; restores the role configuration screen and avoids the \`permissionSearch is not defined\` runtime error.\r
- **Master Agent Safety Rail**: Hard-blocked deletion of the Master Agent from both UI and API helpers; delete buttons are disabled with guidance and back-end guards stop any direct calls.\r
### UI Localization\r
- **Master Agent Deletion Message**: Updated the modal tooltip and toast that appear when attempting to delete a master agent; the copy now follows the latest localization requirements.\r
\r
# [0.1.0] FE WEB CEKAT 2025-11-27\r
### FINALIZED FOR PRODUCTION\r
### Agent Creation UX\r
- **Modal-Friendly Errors**: Duplicate-email validation now surfaces purely as a toast; the Create Agent dialog stays open and no longer renders the full-page error banner, making it easy to adjust the address and resubmit.\r
\r
# [0.0.49] FE WEB CEKAT 2025-11-27\r
### Human Agents Roster\r
- **Duplicate Entry Cleanup**: Adjusted role grouping logic so master agents no longer appear in both the master and agent sections of the Human Agents table; prevents a single email from showing twice and keeps assignment status accurate.\r
\r
### Login & Session Guardrails\r
- **Refresh Spinner Fix**: Added watchdog timers around Supabase session/bootstrap calls so a stalled \`auth.getSession()\` or 2FA profile check cant trap users behind the infinite Loading screen; stale sessions now fall back to the login view within a few seconds.\r
- **Account Status Timeouts**: Soft-capped the account status RPC to keep token refreshes responsive even if the database briefly stops responding.\r
\r
# [0.0.48] FE WEB CEKAT 2025-11-26\r
### RBAC & Permissions System Enhancements\r
- **Master Agent Root Role Treatment**: Master Agent is now treated as root role with full system privileges\r
  - Master Agent role is designated as root role with unrestricted access across the system\r
  - Permission matrix editing is disabled for Master Agent to prevent accidental permission removal\r
  - Root role status ensures Master Agent maintains full privileges regardless of permission configuration\r
\r
- **Permission Matrix UI Updates**: Disabled permission matrix editing for Master Agent role\r
  - Added root role detection in PermissionsPage component (\`isRootSelected\` check)\r
  - Permission matrix sections (Menu Access, CRUD Permissions, Special Permissions) are disabled when configuring Master Agent\r
  - Added informational "Root Role" card explaining Master Agent's full privilege status\r
  - All permission checkboxes and bundle toggles are disabled with helpful tooltips ("Master Agent is root; matrix disabled")\r
  - Clear visual indication that Master Agent has full privileges and doesn't require permission configuration\r
  - Prevents accidental permission removal for root role through UI safeguards\r
  - Early return guards prevent any permission toggle operations when Master Agent is selected\r
\r
### Technical Improvements\r
- **PermissionsPage Component**: Enhanced role configuration logic\r
  - Added \`isRootSelected\` state check based on role name comparison\r
  - Conditional rendering of root role information card\r
  - Disabled state applied to all permission matrix controls for Master Agent\r
  - Improved tooltip messaging for disabled root role controls\r
- **Open Conversation Navigation Fix**: Ensured contacts page button opens chat inbox\r
  - \`Open conversation\` now routes to chat inbox with \`menu=chat\`\r
  - Automatically selects the relevant contact thread when available\r
\r
# [0.0.47] FE WEB CEKAT 2025-11-25\r
### Supabase Baseline Refresh\r
- **Single Source Migration**: Replaced the entire migrations stack with \`20251124230847_baseline.sql\`, capturing todays production schema so every environment can rebuild from a single, clean baseline.\r
- **Vector Extension Guardrails**: Ensured the baseline creates the \`vector\` extension in the \`public\` schema and updates every dependent function/column to reference the schema-qualified type.\r
- **Config Hardening**: Explicitly pins Supabase Storage to \`v1.31.1\` in \`supabase/config.toml\`, preventing CLI diffs from failing on missing storage migrations.\r
\r
### Branch & Data Maintenance\r
- **Development Branch Reset**: Repaired Supabase migration history, reapplied the new baseline, and reset the \`development\` branch so it replays the trimmed migration set without legacy drift.\r
- **Main  Dev Data Parity**: Dumped production \`public\` + \`auth\` data and restored it into the development branch, then pruned historic test accounts to keep both environments aligned.\r
- **Backup Hygiene**: Ran the same user cleanup on the backup project (\`igtizjvhxgajijjjxnzi\`) to ensure the automated sync worker starts from a consistent dataset.\r
\r
# [0.0.46] FE WEB CEKAT 2025-11-24\r
### Database Migration Hardening\r
- **Legacy Platform Support**: Updated the \`20250828000000_merge_platforms_into_channels.sql\` migration to add any missing \`platforms\` columns (\`display_name\`, \`website_url\`, \`status\`, \`secret_token\`, \`profile_photo_url\`, \`ai_profile_id\`) on the fly so historical environments can replay migrations without schema drift.\r
- **Main Branch Hotfix Migration**: Applied Supabase migration \`20250827950000_fix_platforms_schema\` on production to backfill those columns immediately, unblocking rebase operations across environments.\r
- **Rebase Reliability**: Re-ran the Supabase rebase workflow to verify the new safeguards; future branch syncs no longer fail on missing column errors when promoting channels data.\r
\r
# [0.0.45] FE WEB CEKAT 2025-11-23\r
### QA Testing Guide Expansion\r
- **End-to-End Flow Coverage**: Expanded \`DOCUMENTATION.md\` with exhaustive step-by-step flows covering login, OTP, password reset, human/AI agent lifecycle, contacts, permissions, admin utilities, analytics, and audit logs so QA can validate every button and path without code access.\r
- **Button & Validation Matrix**: Documented the enabled/disabled states, confirmation dialogs, toasts, and edge-case behaviour for all primary actions (create, save, delete, export, toggle) across the application.\r
- **Role-Based Walkthroughs**: Added guidance on testing from master, super, and agent perspectives, including navigation expectations and restricted-card behaviour on the dashboard.\r
\r
### Documentation Quality Improvements\r
- **Live Chat & Admin Deep Dives**: Added detailed instructions for conversation tools (notes, tags, canned responses, SLAs), AI pause/resume workflow, circuit breaker monitoring, and platform onboarding (WhatsApp, Telegram, Web).\r
- **Human Agent Lifecycle**: Documented invite, resend, cancellation, token limit management, usage analytics, and removal to ensure QA covers onboarding and offboarding scenarios end-to-end.\r
- **Changelog & Profile Flows**: Captured interactive changelog behaviour, search/filter expectations, and full profile/session management (2FA toggle, password change, device sign-out).\r
\r
### Super Agent Clustering\r
- **AI Agent Ownership**: Introduced \`super_agent_id\` on \`ai_profiles\`, enforced via migrations and new RLS policies. Super agents only see/manage their own AI agents; master agents can reassign via settings.\r
- **Auto-Inherited Platform Ownership**: Platform creation/editing now derives \`channels.super_agent_id\` from the selected AI agent, eliminating manual super agent selection while keeping human-agent assignment intact.\r
- **Scoped Listings**: AI agent lists, stats, and platform forms filter to the current super agent automatically; agents without clusters are prevented from being used until assigned.\r
\r
### Platform Assignment Guard\r
- **Scoped Agent Dropdowns**: When creating WhatsApp, Telegram, or Web platforms as a master agent, the human-agent selector now lists only agents assigned to the chosen super agentpreventing unassigned agents from appearing in the multi-select.\r
\r
# [0.0.44] FE WEB CEKAT 2025-11-19\r
### Changelog Experience Revamp\r
- **Interactive Release Browser**: Introduced a dynamic changelog page with searchable release list, color-coded highlights, and accordion sections for each area of work.\r
- **Dual View Modes**: Added interactive and classic tabs so readers can switch between the immersive UI and the original Markdown in one place.\r
- **Automatic Highlight Extraction**: Generate summary badges from markdown bullet points to surface the most important updates per release.\r
- **Styling Updates**: Applied gradient backgrounds, elevated cards, and refined typography for a colorful, engaging presentation.\r
- **Comprehensive Documentation**: Added \`DOCUMENTATION.md\` detailing auth flows, feature modules, Supabase schema, and operational processes.\r
\r
# [0.0.43] FE WEB CEKAT 2025-11-18\r
### AI Pause Notification System\r
- **New AI Paused Modal Component**: Created dedicated modal for org-wide AI pause notifications\r
  - Modal displays when AI responses are paused across all channels\r
  - Shows who paused AI and when (for master agents)\r
  - Different messaging for master agents vs regular agents\r
  - Master agents can directly navigate to Admin Panel from modal\r
  - Modal appears once per browser session (acknowledgment stored in localStorage)\r
  - Integrated into main Index page with automatic status checking\r
\r
- **Org-Wide AI Pause Status Monitoring**: Enhanced AI pause state management\r
  - Automatic fetching of org-wide AI pause status on app load\r
  - Resolves paused-by user name from profile or email\r
  - Modal auto-dismisses when AI pause is lifted\r
  - Session-based acknowledgment prevents modal spam\r
\r
### Conversation Page UI Improvements\r
- **Fixed Tab Color Styling**: Resolved issue where selected tab colors were not displaying\r
  - Restructured Tooltip/TabsTrigger relationship (Tooltip now inside TabsTrigger)\r
  - Assigned tab: Blue background and text when active\r
  - Unassigned tab: Red background and text when active\r
  - Resolved tab: Green background and text when active\r
  - Proper \`data-[state=active]\` attribute application from Radix UI\r
\r
- **Improved Conversation Sorting**: Enhanced conversation list sorting logic\r
  - Removed unreplied priority sorting (now purely by latest activity)\r
  - Conversations sorted by \`last_msg_at\` timestamp (most recent first)\r
  - Fallback to \`created_at\` if \`last_msg_at\` unavailable\r
  - More intuitive ordering based on actual activity\r
\r
- **Enhanced Timestamp Display**: Improved date/time formatting in conversation list\r
  - Added "Yesterday" display for messages from previous day\r
  - Changed date format from \`dd/MM/yy\` to \`MM/dd/yyyy\` for better clarity\r
  - Better hour-based calculations for relative time display\r
  - More accurate time representation\r
\r
- **TypeScript Fixes**: Resolved type errors\r
  - Removed reference to non-existent \`updated_at\` field on \`ConversationWithDetails\`\r
  - Fixed sorting logic to use only available timestamp fields\r
\r
### Code Quality Improvements\r
- **Conversation Hooks Cleanup**: Minor refactoring in \`useConversations\` hook\r
  - Code cleanup and optimization\r
  - Improved type safety\r
\r
# [0.0.42] FE WEB CEKAT 2025-11-03\r
### Admin Panel & Centralized Management\r
- **New Admin Panel Component**: Created centralized admin control center for master agents\r
  - New dedicated Admin Panel page accessible via navigation (master agents only)\r
  - Moved data retention and GDPR controls from Analytics to Admin Panel for better organization\r
  - Added quick access links to all admin sections (Permissions, Human Agents, Platforms, Analytics, Logs, Contacts)\r
  - Integrated Circuit Breaker Status monitoring directly in admin panel\r
  - Added cache clearing utility for local storage cleanup\r
  - Bulk contact deletion interface with UUID parsing (comma/newline separated)\r
  - Enhanced data retention controls with manual cleanup trigger\r
  - GDPR/PDPA deletion interface with confirmation modals\r
  - All admin features consolidated in single, role-gated interface\r
\r
### Webhook Infrastructure Refactoring\r
- **Centralized Webhook Client**: Created new \`webhookClient.ts\` for unified webhook handling\r
  - Automatic authentication for proxy endpoints using Supabase session tokens\r
  - Support for both legacy and proxy-based endpoints\r
  - Automatic API key injection for proxy requests\r
  - Consistent error handling across all webhook calls\r
  - \`callWebhook()\` function replaces direct \`fetch()\` calls throughout application\r
\r
- **Proxy-Aware Webhook Configuration**: Major refactoring of webhook routing system\r
  - Introduced \`route:\` prefix system for proxy-based endpoints\r
  - Automatic routing to Supabase Edge Function proxy (\`proxy-n8n\`) for prefixed endpoints\r
  - Legacy endpoint support maintained for backward compatibility\r
  - Provider-specific endpoint resolution (\`resolveSendMessageEndpoint()\`)\r
  - Enhanced provider normalization (wa/whatsapp_cloud  whatsapp, tg/tele  telegram)\r
  - All platform forms (WhatsApp, Telegram) now use centralized webhook client\r
  - Live Chat component updated to use new webhook client\r
\r
### AI Agent Enhancements\r
- **AI Model Selection System**: Comprehensive model management in AI Agent creation and settings\r
  - Model selection dropdown in AI Agent creation dialog with pricing and provider information\r
  - Fallback model selection for automatic failover when primary model unavailable\r
  - Model-specific context window and history limit validation\r
  - Dynamic limit calculation based on selected model capabilities\r
  - Enhanced model display with cost per 1M tokens, provider badges, and descriptions\r
  - Model filtering (regular vs fallback models) for better UX\r
  - Auto-selection of first available model on load\r
\r
- **AI Agent Settings UI Improvements**: Enhanced settings interface with better input handling\r
  - Replaced numeric inputs with text inputs using \`inputMode="numeric"\` for better mobile support\r
  - Added input validation with clamping to model-specific maximums\r
  - Context window input now in "K tokens" format with model-specific limits\r
  - History limit shows model-specific maximums with helpful descriptions\r
  - Auto-resolve timeout input with proper validation (0-1440 minutes)\r
  - Message cap input with placeholder examples\r
  - Removed "AI Read File Limit" field (commented out, not in use)\r
  - Better label clarity: "Enable auto-resolve", "Auto-resolve timeout", "Conversation History (tokens)", "Context Window (K tokens)", "Creativity Preset", "AI Message Cap"\r
  - Model selection card with primary and fallback model sections\r
  - Real-time display of model capabilities and limits\r
\r
- **AI Agent Creation Flow**: Enhanced creation process\r
  - Model selection required before agent creation\r
  - Fallback model optional selection during creation\r
  - Better validation and error messages\r
  - Improved dialog with cancel button and loading states\r
\r
### Analytics Component Cleanup\r
- **Removed Admin Controls**: Moved data retention and GDPR controls to Admin Panel\r
  - Removed data retention policy card from Analytics Conversation tab\r
  - Removed GDPR deletion card from Analytics\r
  - Removed Circuit Breaker Status from Analytics (now in Admin Panel)\r
  - Simplified Analytics component focusing on analytics and reporting only\r
  - Better separation of concerns between analytics and administration\r
\r
### Database & Permissions\r
- **New Migration**: Added \`users_profile.create\` permission\r
  - Created migration \`20251103_add_users_profile_create_permission.sql\`\r
  - Grants \`users_profile.create\` permission to \`master_agent\` and \`super_agent\` roles\r
  - Enables proper RBAC for user profile creation operations\r
\r
### Enhanced Caching & Performance\r
- **Query Signature-Based Caching**: Improved cache key generation in \`supabaseProtected.ts\`\r
  - Added query signature serialization for more accurate cache keys\r
  - Cache keys now include query method signatures and arguments\r
  - Prevents cache collisions between similar but different queries\r
  - Better cache invalidation with pattern matching\r
  - Enhanced cache hit rates with more granular key generation\r
\r
- **Cache Invalidation Improvements**: Better cache management\r
  - Contact deletion now invalidates related query caches\r
  - Thread deletion invalidates conversation caches\r
  - Pattern-based cache invalidation using \`defaultFallbackHandler.invalidatePattern()\`\r
\r
### Conversation & Contact Management\r
- **Enhanced Conversation Hooks**: Improved conversation management\r
  - Added \`deleteThread()\` function to \`useConversations\` hook\r
  - Provider-aware message sending using \`resolveSendMessageEndpoint()\`\r
  - Better provider detection from conversation data\r
  - Cache invalidation on thread deletion\r
\r
- **Contact Management**: Improved deletion handling\r
  - Enhanced bulk deletion with cache invalidation\r
  - Better error handling in contact operations\r
  - Improved cache management for contact queries\r
\r
### Platform Integration Updates\r
- **WhatsApp Platform**: Updated to use new webhook client\r
  - Session creation, login QR, logout, disconnect, and delete operations use \`callWebhook()\`\r
  - Consistent error handling across all WhatsApp operations\r
\r
- **Telegram Platform**: Updated to use new webhook client\r
  - Platform creation and webhook deletion use centralized webhook client\r
  - Better error handling and response parsing\r
\r
- **Connected Platforms**: Enhanced platform management\r
  - All webhook calls migrated to \`callWebhook()\` function\r
  - Better error handling and user feedback\r
  - Consistent authentication across all platform operations\r
\r
### Navigation & Routing\r
- **New Admin Panel Route**: Added admin panel to navigation\r
  - New "Admin Panel" navigation item (master agents only)\r
  - Requires \`access_rules.configure\` permission\r
  - Added to navigation config and routing\r
  - Default navigation fallback improved to handle permission-based routing\r
\r
### UI/UX Improvements\r
- **Human Agents**: Enhanced creation dialog\r
  - Better validation and error messages\r
  - Cancel button in creation dialog\r
  - Improved loading states\r
  - Permission-based UI (disabled buttons with tooltips when permission missing)\r
\r
- **Input Improvements**: Better form inputs throughout application\r
  - Numeric inputs use \`inputMode="numeric"\` for mobile keyboards\r
  - Better placeholder text and validation messages\r
  - Improved accessibility with proper input types\r
\r
### Technical Improvements\r
- **Code Organization**: Better separation of concerns\r
  - Admin functionality centralized in Admin Panel component\r
  - Webhook logic centralized in webhook client\r
  - Better component structure and maintainability\r
\r
- **Type Safety**: Enhanced TypeScript types\r
  - Added \`model_id\` to AIProfile interface\r
  - Better type definitions for webhook responses\r
  - Improved type safety in platform forms\r
\r
- **Error Handling**: Consistent error handling\r
  - Unified error handling in webhook client\r
  - Better error messages throughout application\r
  - Improved user feedback with toast notifications\r
\r
# [0.0.41] FE WEB CEKAT 2025-11-01\r
### Data Retention & GDPR Compliance\r
- **Data Retention Policy System**: Implemented configurable data retention with automatic cleanup\r
  - Added 90-day default retention policy (adjustable from 1-365 days) stored in \`org_settings\` table\r
  - Created \`cleanup_old_chat_data()\` PostgreSQL function for automatic deletion of old chat data\r
  - Scheduled daily cleanup job at 2 AM UTC via \`pg_cron\` extension\r
  - Respects organization-specific retention periods stored in \`org_settings.retention_days\`\r
  - Only deletes data older than retention period (rolling window, not everything daily)\r
  - Deletes old threads, messages, and orphaned contacts based on \`created_at\` timestamps\r
  - Supports both org-specific cleanup and global cleanup for all organizations\r
\r
- **GDPR/PDPA Right to Erasure**: Implemented compliant user data deletion functionality\r
  - Created \`gdpr_delete_user_data()\` PostgreSQL function for permanent deletion of user data\r
  - Deletes all threads, messages, and contact records for a specific contact UUID\r
  - Validates contact belongs to requesting organization before deletion\r
  - Returns detailed deletion results (threads, messages, contacts deleted count)\r
  - Permanently removes all user-associated data in compliance with GDPR/PDPA regulations\r
  - Action cannot be undone with clear warning messages in UI\r
\r
- **Admin Controls in Analytics**: Added data retention and GDPR controls in Conversation tab\r
  - Data Retention Policy card with current retention period display and edit functionality\r
  - Manual "Run Cleanup Now" button for immediate cleanup execution\r
  - GDPR/PDPA deletion card with contact UUID input field\r
  - Restricted to users with \`access_rules.configure\` permission (master/super agents only)\r
  - Real-time success/error message display for all operations\r
  - Last cleanup results display showing threads, messages, and contacts deleted counts\r
\r
- **Database Migration**: Applied comprehensive migration for data retention features\r
  - Migration \`20250102_data_retention_and_gdpr.sql\` successfully applied via Supabase MCP\r
  - Created \`cleanup_old_chat_data()\` and \`gdpr_delete_user_data()\` functions with proper security\r
  - Added RLS policies for \`org_settings\` table updates restricted to master/super agents\r
  - Initialized default 90-day retention for all existing organizations\r
  - Ensured \`is_current_user_active()\` dependency function exists for RLS checks\r
\r
### Contact Management Enhancements\r
- **Contact UUID Detail Modal**: Added master agent-only contact UUID display\r
  - New UUID section in contact details modal visible only to master agents\r
  - Displays contact UUID with copy-to-clipboard functionality\r
  - Includes helpful description for GDPR deletion requests and system integrations\r
  - Uses RBAC role check (\`hasRole('master_agent')\`) to restrict visibility\r
  - Styled with monospace font and muted background for clear readability\r
  - Badge indicator showing "Master Agent Only" restriction\r
\r
### Technical Improvements\r
- **Supabase Integration**: Full integration with Supabase database functions\r
  - \`fetchRetentionSettings()\` reads from \`org_settings\` table via protected Supabase client\r
  - \`saveRetentionDays()\` updates retention period using upsert operation\r
  - \`triggerCleanup()\` calls \`cleanup_old_chat_data\` RPC function\r
  - \`executeGdprDeletion()\` calls \`gdpr_delete_user_data\` RPC function\r
  - All operations use \`protectedSupabase\` client respecting circuit breaker and RLS\r
  - Proper error handling and user feedback for all database operations\r
\r
- **RBAC Integration**: Enhanced role-based access control for admin features\r
  - Permission gates around data retention and GDPR controls\r
  - Master agent role check for contact UUID visibility\r
  - Secure access control using \`useRBAC\` context hooks\r
\r
### UI/UX Enhancements\r
- **Data Retention UI**: Comprehensive admin interface for retention management\r
  - Edit modal for configuring retention period (1-365 days range)\r
  - Visual display of current retention period with clear descriptions\r
  - Warning messages explaining automatic cleanup schedule\r
  - Success/error message toasts for user feedback\r
\r
- **GDPR Deletion UI**: Secure and user-friendly deletion interface\r
  - Two-step confirmation process with warning modal\r
  - Clear indication of what will be deleted (threads, messages, contacts)\r
  - Contact UUID input with validation\r
  - Destructive button styling to indicate permanent action\r
\r
### Security & Compliance\r
- **Data Protection**: Enhanced data protection mechanisms\r
  - Row Level Security (RLS) policies enforce master/super agent access only\r
  - Automatic cleanup respects retention periods to prevent accidental data loss\r
  - GDPR deletion function validates organization membership before deletion\r
  - All database operations use security definer functions with proper permissions\r
\r
# [0.0.40] FE WEB CEKAT 2025-11-01\r
### Adaptive Rate Limiter Integration & DDoS Protection\r
- **Adaptive Rate Limiter Full Integration**: Integrated adaptive rate limiter into Supabase protection system\r
  - Enhanced AdaptiveRateLimiter class with getConfig() and updateConfig() methods for runtime configuration\r
  - Added localStorage persistence for adaptive rate limiter configuration and multipliers\r
  - Integrated adaptive rate limiter into supabaseProtected.ts, replacing static rate limiter for all operations\r
  - Implemented automatic limit adjustment based on system health metrics (response time, error rate)\r
  - Added query to circuit_breaker_metrics table in Supabase for real-time metrics analysis\r
  - Automatic adjustment loop runs every adjustment interval to update limits dynamically\r
\r
- **Adaptive Rate Limiter Configuration UI**: Added comprehensive configuration interface\r
  - Created new "Adaptive Rate Limiter Configuration" section in Limit Configuration\r
  - Display base limits for all 4 operations (Reads, Writes, RPC, Auth) with current effective limits\r
  - Real-time display of multipliers (percentage) for each operation type\r
  - Show min/max multiplier, adjustment interval, and latency thresholds\r
  - Added "Edit" button with comprehensive modal for editing all adaptive rate limiter parameters\r
  - Visual status indicator showing adaptive rate limiter is active and protecting database\r
  - All configuration values are editable with proper validation and range limits\r
\r
- **Enhanced Rate Limiter Card**: Updated to show adaptive limits\r
  - Changed card title to "Rate Limiter (Adaptive)" to reflect dynamic nature\r
  - Display effective limits (dynamically calculated) instead of static limits\r
  - Show multiplier percentage for each operation type\r
  - Real-time updates every second to reflect current adaptive limits\r
  - Informative tooltips explaining how adaptive limits work for traffic spike protection\r
\r
- **Comprehensive Circuit Breaker Documentation Updates**: Enhanced documentation with detailed input explanations\r
  - Added detailed explanation section for all Circuit Breaker inputs (5 parameters)\r
    - Failure Threshold: When circuit opens, tips, recommendations\r
    - Reset Timeout: Recovery time, tips for different scenarios\r
    - Success Threshold: Recovery validation, recommendations\r
    - Monitoring Period: Sliding window explanation, impact on detection\r
    - Request Timeout: Timeout handling, recommendations per operation type\r
  - Added comprehensive explanation for all Adaptive Rate Limiter inputs (7+ parameters)\r
    - Base Limits: Explanation for Reads/Writes/RPC/Auth with recommendations\r
    - Min/Max Multiplier: How multipliers affect limits, examples with calculations\r
    - Latency Thresholds: Healthy vs Stress thresholds, tips for optimization\r
    - Adjustment Interval: How often limits adjust, recommendations for different scenarios\r
  - Added "How They Work Together" sections showing complete workflow for both systems\r
\r
- **DDoS & Traffic Spike Protection Guide**: Added dedicated protection guide\r
  - Created comprehensive guide section explaining inputs specifically for DDoS protection\r
  - Ranked inputs by importance: Min Multiplier (most important), Stress Threshold, Base Limits, etc.\r
  - Detailed recommendations for each input with effectiveness ratings\r
  - Provided optimal configuration preset for maximum DDoS protection\r
  - Explained complete attack scenario flow (5-step process)\r
  - Visual color-coded sections for easy reference (red borders for critical inputs)\r
\r
- **Documentation Improvements**: Enhanced existing documentation sections\r
  - Updated "Best Practices" section to include adaptive rate limiter tips\r
  - Enhanced "Configuration Reference" to show both Circuit Breaker and Adaptive Rate Limiter configs\r
  - Added effective limits display with multiplier percentages in configuration reference\r
  - Updated troubleshooting section to mention adaptive rate limiter as protection layer\r
  - All documentation now uses dynamic values from current configuration (real-time)\r
\r
### Technical Improvements\r
- **Type System Enhancements**: Improved TypeScript type exports\r
  - Re-exported OperationType from adaptiveRateLimiter for better type consistency\r
  - Fixed import issues in CircuitBreakerStatus component\r
  - All types properly exported and available for external use\r
\r
- **Storage Management**: Enhanced persistence system\r
  - Adaptive rate limiter config persists to localStorage with multipliers\r
  - Automatic loading of saved configuration on initialization\r
  - Interval ID management for proper cleanup when adjustment interval changes\r
  - Backward compatible with existing localStorage data\r
\r
### UI/UX Enhancements\r
- **Configuration Visualization**: Better display of adaptive limits\r
  - Show both base limit and effective limit side-by-side\r
  - Multiplier percentage displayed with color coding (green for healthy)\r
  - Real-time status indicators showing system is actively protecting\r
  - Clear distinction between static base limits and dynamic effective limits\r
\r
- **Documentation UX**: Improved documentation readability\r
  - Color-coded input explanations (red, orange, yellow, blue, purple borders)\r
  - Step-by-step workflows with numbered lists\r
  - Practical examples using actual configuration values\r
  - Tips and recommendations clearly separated from explanations\r
  - Warning boxes for critical information\r
\r
### Performance & Security\r
- **DDoS Protection**: Multi-layered defense system\r
  - Adaptive rate limiter as first line of defense (reduces limits automatically)\r
  - Request timeout as second layer (cancels slow requests)\r
  - Circuit breaker as last resort (blocks all requests if needed)\r
  - Complete protection against traffic spikes and DDoS attacks\r
\r
- **Smart Limit Adjustment**: Intelligent limit management\r
  - Limits increase when system is healthy (up to 200% of base)\r
  - Limits decrease when system is stressed (down to 50% of base by default)\r
  - Gradual adjustment prevents sudden changes (max 10% increase, 20% decrease per cycle)\r
  - Automatic return to normal limits when system recovers\r
\r
# [0.0.39] FE WEB CEKAT 2025-11-01\r
### Circuit Breaker Enhancements & Documentation\r
- **Circuit Breaker Configuration Management**: Added comprehensive limit configuration interface for admins\r
  - Created "Limit Configuration" section displaying all circuit breaker thresholds (disabled by default)\r
  - Added "Edit" button to open configuration modal for modifying limits\r
  - Implemented getConfig() and updateConfig() methods in CircuitBreaker class\r
  - Added configuration persistence to localStorage for client-side recovery\r
  - Configuration values are now dynamically displayed and editable\r
  - Each configuration field includes descriptive tooltips explaining the purpose\r
\r
- **Circuit Breaker Documentation System**: Implemented comprehensive documentation modal\r
  - Added documentation card section above "Danger Zone" with "Lihat Dokumentasi Circuit Breaker" button\r
  - Created detailed documentation modal covering:\r
    - What is Circuit Breaker and its purpose\r
    - How Circuit Breaker works (three states: CLOSED, OPEN, HALF_OPEN)\r
    - Step-by-step workflow with dynamic configuration values\r
    - What to do when circuit breaker opens (troubleshooting guide)\r
    - Understanding metrics and their meanings\r
    - Best practices for monitoring and optimization\r
    - Configuration reference with current values\r
  - All documentation content in Indonesian language with clear formatting\r
  - Modal is scrollable and responsive for better readability\r
\r
- **Enhanced UI/UX for Circuit Breaker Analytics**: Improved user experience and safety\r
  - Added question mark icons (HelpCircle) beside all labels in "Limit Configuration" section\r
  - Each icon displays informative tooltip on hover with Indonesian descriptions\r
  - Reorganized admin controls into two distinct sections:\r
    - "Limit Configuration": For viewing and editing circuit breaker thresholds\r
    - "Danger Zone": For critical admin actions with enhanced warnings\r
  - Added tooltips to all buttons in "Danger Zone" explaining their effects\r
  - Enhanced visual hierarchy with color-coded sections (blue for docs, red for danger)\r
  - All tooltips and descriptions use dynamic values from current configuration\r
\r
- **Circuit Breaker Class Improvements**: Enhanced circuit breaker functionality\r
  - Added getConfig() method to retrieve current configuration\r
  - Added updateConfig() method to modify configuration at runtime\r
  - Configuration is automatically saved to localStorage on update\r
  - Configuration is automatically loaded from localStorage on initialization\r
  - Maintains backward compatibility with existing circuit breaker state\r
\r
### AI Agent Settings Cleanup\r
- **Removed Timezone Field**: Cleaned up unused timezone configuration\r
  - Removed timezone field from AI Agent Settings UI component\r
  - Dropped timezone column from ai_profiles table via database migration\r
  - Removed timezone state variables and related logic from frontend\r
  - Updated TypeScript types to remove timezone references\r
  - Note: timezone field in users_profile table remains unchanged (separate feature)\r
\r
### Technical Improvements\r
- **Code Organization**: Better separation of concerns in Circuit Breaker Status component\r
  - Split admin controls into logical sections (Documentation, Limit Configuration, Danger Zone)\r
  - Improved component structure for better maintainability\r
  - Enhanced modal management with dedicated state variables\r
  - Better error handling and user feedback\r
\r
### UI/UX Enhancements\r
- **Documentation Integration**: Added comprehensive help system\r
  - Documentation card with prominent call-to-action button\r
  - Modal-based documentation with scrollable content\r
  - Color-coded sections for better visual hierarchy\r
  - Responsive design for all screen sizes\r
  - Dark mode support throughout documentation modal\r
\r
- **Enhanced Tooltips**: Improved user guidance\r
  - Question mark icons next to all configuration labels\r
  - Contextual tooltips explaining each configuration parameter\r
  - Tooltips on danger zone buttons with detailed warnings\r
  - All tooltips in Indonesian language for consistency\r
\r
\r
# [0.0.38] FE WEB CEKAT 2025-10-30\r
### Refactor Authentication & RBAC\r
- Removed unnecessary debug logging from authentication and RBAC components.\r
- Enhanced role checks within navigation for more secure access control.\r
- Improved account status handling to better manage user states.\r
- Added role-based restrictions directly in navigation configuration.\r
- Updated related components for improved clarity and performance.\r
\r
# [0.0.37] FE WEB CEKAT 2025-10-30\r
### Circuit Breaker & Database Protection System\r
- **Comprehensive Circuit Breaker Implementation**: Implemented full-featured circuit breaker system for database protection\r
  - Created core CircuitBreaker class with state machine (CLOSED, OPEN, HALF_OPEN) and configurable thresholds\r
  - Added state persistence using localStorage for client-side recovery across page refreshes\r
  - Implemented event emitter pattern for real-time monitoring and state change notifications\r
  - Added time-windowed failure counting (10s monitoring period) with automatic state transitions\r
\r
- **Rate Limiting & Request Management**: Implemented advanced rate limiting and request optimization\r
  - Created sliding window rate limiter with per-user and per-endpoint tracking\r
  - Implemented request queue with deduplication, priority handling, and debouncing\r
  - Added request batching for similar queries to reduce total request count\r
  - Created adaptive rate limiter that adjusts limits based on system health metrics\r
\r
- **Enhanced Error Handling & Caching**: Implemented comprehensive error management and response caching\r
  - Created error classifier utility mapping Supabase error codes to categories (network, database, auth, rate limit, timeout)\r
  - Implemented retry logic with exponential backoff (1s, 2s, 4s, 8s max) and error-specific strategies\r
  - Added response caching with IndexedDB/localStorage using stale-while-revalidate pattern\r
  - Implemented offline mode support with write operation queuing and sync on connection restore\r
\r
- **Database Analytics & Monitoring**: Added comprehensive database performance monitoring\r
  - Created new "Database" tab in Analytics section with detailed database statistics\r
  - Implemented PostgreSQL functions for database metrics (table sizes, row counts, index performance, memory stats)\r
  - Added real-time database activity monitoring with KPI cards and interactive charts\r
  - Created comprehensive table statistics view with scan ratios, vacuum timestamps, and DML operations\r
\r
- **Circuit Breaker Analytics Dashboard**: Integrated circuit breaker monitoring into Analytics section\r
  - Added new "Circuit Breaker" tab displaying real-time status and metrics\r
  - Created CircuitBreakerStatus component with admin controls and visual indicators\r
  - Implemented metrics collection and storage in circuit_breaker_metrics table\r
  - Added comprehensive help tooltips with Indonesian descriptions for all labels\r
\r
- **Protected Supabase Integration**: Wrapped all database operations with circuit breaker protection\r
  - Created protectedSupabase wrapper replacing direct Supabase calls in critical components\r
  - Integrated circuit breaker, rate limiting, caching, and metrics collection\r
  - Updated Analytics, ConversationPage, and useConversations hooks to use protected wrapper\r
  - Implemented graceful degradation and fallback mechanisms for failed operations\r
\r
- **Admin Controls & Safety Features**: Added comprehensive admin controls with safety measures\r
  - Implemented custom modal dialogs replacing browser confirm/alert dialogs\r
  - Added confirmation popups with detailed Indonesian warnings for all admin actions\r
  - Created color-coded modal themes (orange for reset, red for critical actions, blue for info)\r
  - Added success/error feedback modals with proper error handling\r
\r
### Technical Improvements\r
- **Performance Optimizations**: Resolved application freezing and lag issues\r
  - Fixed infinite loop in background cache refresh mechanism\r
  - Optimized metrics collection with batching and throttling (50 batch size, 30s interval)\r
  - Implemented caching for getUserId calls with 1-minute TTL and 500ms timeout\r
  - Added cooldown periods to prevent refresh storms (30s for queries, 60s for RPCs)\r
  - Made rate limiting more lenient for read operations to prevent blocking\r
\r
- **Database Schema Updates**: Enhanced database with circuit breaker metrics\r
  - Created circuit_breaker_metrics table with comprehensive operation tracking\r
  - Added RLS policies and indexes for efficient metrics querying\r
  - Implemented 30-day retention policy with cleanup_old_metrics function\r
  - Added database analytics functions for comprehensive performance monitoring\r
\r
### UI/UX Enhancements\r
- **Modal System**: Replaced browser dialogs with custom modal components\r
  - Created consistent modal design matching application theme\r
  - Added proper dark mode support and responsive design\r
  - Implemented clear visual hierarchy with icons and color coding\r
  - Added comprehensive warning messages in Indonesian language\r
\r
- **Help System**: Enhanced user guidance throughout the application\r
  - Added question mark icons with tooltips to all analytics labels\r
  - Implemented LabelWithHelp component for consistent help integration\r
  - Created comprehensive Indonesian descriptions for all circuit breaker features\r
  - Added contextual help for admin controls and safety warnings\r
\r
\r
# [0.0.36] FE WEB CEKAT 2025-10-25\r
### Security & Authentication\r
- **Account Deactivation System**: Implemented comprehensive account deactivation blocking system\r
  - Added database-level RLS policies to prevent deactivated users from accessing system resources\r
  - Created dedicated \`/account-deactivated\` warning page with Indonesian content\r
  - Implemented pre-login account status validation to prevent deactivated users from authenticating\r
  - Added automatic redirect to warning page when deactivated account is detected\r
  - Enhanced security with "fail closed" approach - blocks access if account status cannot be verified\r
\r
### User Experience Improvements\r
- **Enhanced Navigation**: Fixed navigation issues and improved user flow\r
  - Replaced modal-based account deactivation with dedicated warning page\r
  - Added "Kembali ke Halaman Login" button with complete cleanup functionality\r
  - Implemented localStorage clearing and user signout on account deactivation\r
  - Fixed infinite loading issues caused by component conflicts\r
  - Added loading states and prevented multiple button clicks during navigation\r
\r
### Technical Improvements\r
- **Component Architecture**: Streamlined authentication flow components\r
  - Removed deprecated \`AccountDeactivatedModal\` component\r
  - Created dedicated \`AccountDeactivated\` page component with proper routing\r
  - Fixed Router context issues by restructuring component hierarchy in App.tsx\r
  - Enhanced error handling and timeout management for signOut operations\r
  - Added comprehensive debugging and logging for authentication flow\r
\r
### Database & Security\r
- **Row Level Security (RLS)**: Enhanced database security policies\r
  - Updated RLS policies to include active user checks for all major tables\r
  - Created \`is_current_user_active()\` helper function for consistent security checks\r
  - Applied security policies to \`users_profile\`, \`org_members\`, \`channels\`, \`contacts\`, \`threads\`, and \`messages\` tables\r
  - Implemented strict access control preventing deactivated users from reading sensitive data\r
\r
### Bug Fixes\r
- **Authentication Flow**: Resolved multiple authentication-related issues\r
  - Fixed flicker when logging in with deactivated accounts\r
  - Resolved race conditions in account status checking\r
  - Fixed logout button functionality by preventing account deactivation interference\r
  - Corrected database column name from \`is_f2a_email_enabled\` to \`is_2fa_email_enabled\`\r
  - Fixed CORS errors with edge function approach by implementing direct database validation\r
\r
### UI/UX Enhancements\r
- **Account Deactivation Warning Page**: Created comprehensive user feedback system\r
  - Added clear Indonesian messaging explaining account deactivation\r
  - Implemented contact instructions for Master Agent reactivation\r
  - Added visual warning indicators with appropriate icons and styling\r
  - Created responsive design with proper loading states and button interactions\r
\r
# [0.0.35] FE WEB CEKAT 2025-16-09\r
### Updates\r
- Added HCaptcha site key to .env for CAPTCHA validation.\r
- Enhanced Login component to include CAPTCHA verification.\r
- Improved ConversationPage to display channel logos.\r
- Updated HumanAgents component for better pagination and agent management.\r
- Adjusted useConversations and useHumanAgents hooks to support new fields for channel logos and agent organization.\r
- Implemented strict checks for super agent assignments in usePlatforms hook.\r
\r
# [0.0.34] FE WEB CEKAT 2025-11-09\r
### Updates\r
### AIAgentSettings\r
* Added new state variables:\r
  * \`historyLimit\`\r
  * \`readFileLimit\`\r
  * \`contextLimit\`\r
  * \`responseTemperature\`\r
  * \`messageAwait\`\r
  * \`messageLimit\`\r
  * \`timezone\`\r
* Improved overall usage tracking and configurability.\r
\r
### HumanAgent\r
* Introduced **usage range option** for better monitoring.\r
* Refactored **agent visibility logic** for clearer access control.\r
* Enhanced handling of **agent roles and statuses** for more robust management.\r
\r
# [0.0.33] FE WEB CEKAT 2025-10-09\r
### Updates\r
- Update project branding, enhance chat functionality, and improve permissions management\r
- Added aria-labels for accessibility in chat components\r
- Refined URL state synchronization in ConversationPage\r
- Implemented sorting and editing features in Contacts\r
- Removed legacy policy editing from PermissionsPage\r
- Updated navigation permissions for better clarity\r
\r
# [0.0.32] FE WEB CEKAT 2025-10-04\r
### Updates\r
- Fixed Live chat error and detail chat\r
- Update project branding to **Synka AI**\r
- Enhance **chat functionality**\r
- Improve **permissions management**\r
- Key changes include:\r
  - Renaming titles and meta descriptions\r
  - Adding a direct route to the chat inbox\r
  - Updating permission checks\r
  - Refining UI elements for better user experience\r
\r
Updating permission checks\r
\r
Refining UI elements for better user experience\r
# [0.0.31] FE WEB CEKAT 2025-10-04\r
### Updates\r
- Introduced a new endpoint \`CHAT_TEST\` for testing AI agent chat settings.\r
- Updated \`AIAgentSettings\` component to include profile handling and improved UI with collapsible sections for behavior, welcome message, and transfer conditions.\r
- Enhanced \`ChatPreview\` to support profile ID and adjusted styling for better user experience.\r
- Refactored platform forms to remove profile photo upload functionality.\r
\r
# [0.0.30] FE WEB CEKAT 2025-10-04\r
### Updates\r
- Fix invite\r
\r
# [0.0.29] FE WEB CEKAT 2025-10-04\r
Commit: Invite flow fixes, required field validation, form improvements\r
### Updates\r
- Invite Flow Fixes\r
  - Fixed invite flow to redirect users directly to password creation page instead of 2FA page\r
  - Added invite flow detection to skip 2FA requirements for invited users\r
  - Prevented duplicate 2FA emails for invited users\r
  - Added \`/invite\` route for proper invite handling\r
  - Enhanced ProtectedRoute to detect and redirect invite flows appropriately\r
- Form Validation Improvements\r
  - Made "Attach to Super Agent" field required for regular agents\r
  - Added visual indicators (red asterisks) for all required fields\r
  - Implemented real-time form validation with disabled submit button\r
  - Added contextual help text explaining field requirements\r
  - Enhanced error messages with specific validation feedback\r
- User Experience Enhancements\r
  - Submit button now disabled until all required fields are filled\r
  - Clear visual hierarchy distinguishing required vs optional fields\r
  - Real-time validation feedback as users type/select\r
  - Improved form accessibility with proper labeling\r
- Bug Fixes\r
  - Fixed invite users being incorrectly redirected to 2FA page\r
  - Resolved duplicate 2FA email sending for invited users\r
  - Corrected form submission logic for agent creation\r
  - Enhanced error handling for missing required fields\r
\r
# [0.0.28] FE WEB CEKAT 2025-10-04\r
Commit: Auto-resolve functionality, thread timestamp fixes, audio notifications, UI improvements\r
### Updates\r
- Auto-Resolve System\r
  - Fixed auto-resolve functionality to work correctly with AI agents\r
  - Database triggers now properly set \`auto_resolve_at\` timestamp when AI responds\r
  - Auto-resolve function uses correct enum value \`'closed'\` instead of \`'resolved'\`\r
  - Periodic checking every 30 seconds for threads ready to auto-resolve\r
  - Real-time auto-resolve checks on message events\r
  - Threads auto-resolve after specified minutes of inactivity without user response\r
- Thread List Improvements\r
  - Fixed thread list to show latest message timestamp instead of first message timestamp\r
  - WhatsApp-style conversation sorting with unreplied threads at top\r
  - Real-time conversation preview updates without full list refresh\r
- Audio Notifications\r
  - Added audio notification system for new messages in opened threads\r
  - Two notification sounds: incoming (\`mixkit-message-pop-alert-2354.mp3\`) and outgoing (\`mixkit-long-pop-2358.wav\`)\r
  - Debounced notifications to prevent duplicate sounds\r
  - Tab visibility checks to only play sounds when tab is active\r
  - User controls: enable/disable audio notifications, test notification\r
- UI Improvements\r
  - Removed clock icon from chat message bubbles for cleaner appearance\r
  - Enhanced message streaming with better real-time updates\r
  - Improved conversation list performance with optimized refresh logic\r
- Database Schema Updates\r
  - Added \`channel_id\` to \`token_usage_logs\` table for better analytics\r
  - Added \`super_agent_id\` to \`channels\` table (moved from \`ai_profiles\`)\r
  - Updated RLS policies to use \`channels.super_agent_id\` for proper clustering\r
  - Fixed foreign key constraints and relationships\r
- Bug Fixes\r
  - Fixed page reload issues when alt+tabbing between browser tabs\r
  - Resolved conversation data leakage between different super agents\r
  - Fixed AI Agent dropdown filtering logic\r
  - Corrected thread timestamp display in conversation list\r
\r
# [0.0.27] FE WEB CEKAT 2025-10-03\r
- Enabling AI Profiles fetch instead of using cache \r
\r
# [0.0.26] FE WEB CEKAT 2025-10-03\r
Commit: Live Chat realtime + anon policies, auto-resolve with enable flag, reopen on user reply, UI polish\r
### Updates\r
- Live Chat (Embed)\r
  - Messages now stream from Supabase realtime (\`public.messages\`); webhook response is ignored for content.\r
  - Sends \`channel_id\`, \`session_id\`, and a persistent friendly \`username\` (stored per host in localStorage). Removed \`platform_id\` from payload.\r
  - Ringtones wired to \`public/tones\` assets; low = \`mixkit-message-pop-alert-2354.mp3\`, high = \`mixkit-long-pop-2358.wav\`.\r
  - Thread lookup uses \`contacts(name)\` with \`maybeSingle()\` (fixes PGRST116 when 0 rows).\r
- Database (Supabase)\r
  - Added anon SELECT RLS for web embed:\r
    - \`channels\`: \`allow_public_select_web_channels\` (provider='web' and active only).\r
    - \`threads\`: \`public_read_web_threads\` (via web channels).\r
    - \`messages\`: \`public_read_web_messages\` (via web channels).\r
    - Fixes 401/42501 when opening standalone live chat.\r
  - Auto-resolve framework:\r
    - \`ai_profiles.auto_resolve_after_minutes\` (int) and \`enable_resolve\` (bool).\r
    - \`threads.auto_resolve_at\` scheduled by trigger \`set_thread_auto_resolve_after_message\` on agent/assistant replies; cleared on user replies.\r
    - Function \`auto_close_due_threads()\` (cron-friendly) and helper \`schedule_auto_resolve_for_open_threads()\` for backfill.\r
  - Auto-reopen: trigger \`reopen_thread_on_user_message\` reopens closed threads and unassigns when a new user message arrives.\r
- AI Agent Settings\r
  - Enable Auto-resolve switch added; Auto-resolve after (minutes) is disabled when switch is off.\r
  - Removed sending \`system_prompt\` to webhook; UI still saves prompt to profile.\r
- Conversations UI\r
  - Unreplied badge restyled (soft red background, darker red text) to match Assigned styling.\r
\r
# [0.0.25] FE WEB CEKAT 2025-10-02\r
Commit: Human vs AI handover analytics, WAHA sessions fetch, realtime chats, Platforms loop fix, UI polish\r
### Updates\r
- Analytics (Human Agent)\r
  - Handover rate redefined as Human/(Human+AI) across all conversations (not only resolved).\r
  - Added breakdowns: by Super Agent and by Agent, with Super Agent filter.\r
- Database (Supabase)\r
  - New/updated RPCs: \`get_handover_by_super_agent\`, \`get_handover_by_agent\`, \`get_agent_kpis\`.\r
  - Enabled realtime by adding \`public.threads\` and \`public.messages\` to \`supabase_realtime\`.\r
- Platforms (WhatsApp)\r
  - Fetch sessions from WAHA (\`/api/sessions\` and \`/api/sessions/{name}\`); removed dependency on webhook \`/get_sessions\` calls in UI.\r
  - Filter sessions to selected channel; debounced refresh; fixed infinite refresh loop on Platforms page.\r
  - QR polling uses WAHA session endpoint; Disconnect/Delete refresh safely.\r
- Conversations\r
  - Live-updating conversation list and counts via realtime subscriptions to \`threads\` and \`messages\` (debounced).\r
- UI\r
  - Delete Channel button shows spinner + Deleting and subtle pulse while processing.\r
- Changelog\r
  - Source from root \`CHANGELOG.md\` only; removed \`public/CHANGELOG.md\`; scripts updated to skip copy.\r
\r
# [0.0.24] FE WEB CEKAT 2025-09-30\r
### Updates\r
- Enhance message handling in ConversationPage and useConversations hooks.\r
- Optimistic UI updates for message status\r
\r
# [0.0.23] FE WEB CEKAT 2025-10-02\r
### Updates\r
- Live Chat\r
  - New embedded-only chat page at \`/livechat/:platform_id\` with blue-white palette, gradient background, glassy card, and clearer borders.\r
  - Sound notifications: low note on send, high note on AI reply; ringtone-style sequences; support external audio and synthesized chimes.\r
  - Netlify SPA routing for \`/livechat/*\` via redirects in \`netlify.toml\` and \`public/_redirects\`.\r
\r
- Connected Platforms\r
  - Live chat link and embed now use \`https://synkaai.netlify.app/livechat/{platform_id}\`.\r
  - Added Super Agent section (single-select; master-only). Human Agents now a searchable multi-select of regular agents only.\r
  - Removed Teams card. Agent chips show proper names and can be removed.\r
\r
- Platform Forms (Web, WhatsApp, Telegram)\r
  - Enforce Super Agent selection; filter AI/Human Agents by the selected Super Agent.\r
  - Fixed Telegram \`useEffect\` import error; safer webhook response handling.\r
  - Only selected human agents are attached on create.\r
\r
- Hooks and data\r
  - \`usePlatforms\`: join \`channel_agents\`; insert/remove on create/update; read/update \`channels.credentials.super_agent_id\`.\r
  - \`useAIAgents\`/\`LiveChat\`: dropped non-existent \`model\`; filter by \`super_agent_id\`.\r
  - \`useHumanAgents\`: include \`super_agent_id\` via \`super_agent_members\`.\r
\r
- Human Agents page\r
  - Clustering UI to manage Super Agents  Agents & AI Agents; token totals by cluster.\r
\r
- Database (Supabase)\r
  - New \`super_agent_members\` table (RLS) and \`ai_profiles.super_agent_id\` (NOT NULL).\r
  - Added \`users_profile.used_tokens\` plus \`refresh_used_tokens_for_super_agents\` function and trigger to aggregate token usage per super agent.\r
  - Deployed and backfilled via Supabase MCP; membership mappings added where needed.\r
\r
- Fixes\r
  - Resolved SPA 404s for \`/livechat/*\`.\r
  - Fixed \`users_profile.email\` and \`ai_profiles.model\` 42703 errors.\r
  - Ensured agent removal updates \`channel_agents\` and access.\r
\r
# [0.0.22] FE WEB CEKAT 2025-09-30\r
### Updates\r
- Fix platform creating for telegram\r
- Add saving functionality for selected AI agent in ConnectedPlatforms and prevent duplicate Telegram bot tokens in TelegramPlatform Form\r
- Enhance AI Agent Settings: Implement file upload functionality with Supabase integration, including upload progress tracking and error handling. Update UI to reflect file statuses and permissions. Add new knowledgebase endpoints for file management.\r
- Enhance file upload process in AIAgentSettings: pre-compute content hash for stable key, include additional metadata (storageName, storageSize, storageUpdatedAt) in upload response, and improve file validation checks.\r
\r
# [0.0.21] FE WEB CEKAT 2025-09-30\r
### Updates\r
- Update CHANGELOG and enhance Analytics and HumanAgents components. \r
- Added token usage tracking in Analytics with visualizations for daily usage and top models. \r
- Improved token aggregation logic in HumanAgents to account for super-agent clusters.\r
\r
# [0.0.20] FE WEB CEKAT 2025-09-30\r
### Updates\r
- Platform agent assignment\r
  - Persist selected agents on create to \`channel_agents\`; updates replace assignments.\r
  - Agents now only see platforms theyre assigned to; master/super see all.\r
  - Platforms list shows only attached human agents (no more org-wide members).\r
\r
- Platform details UI\r
  - New Super Agent section: shows assigned super agent; single-select; editable by master agents only; stored in \`channels.credentials.super_agent_id\`.\r
  - Human Agent manager: chips with remove (X) + searchable multi-select to add; lists only regular agents (excludes super/master).\r
  - Removed unused Teams card; unified details behavior across providers.\r
\r
- Telegram platform creation\r
  - Hits \`POST /telegram/create-platform\` (CREATE_PLATFORM) before channel insert.\r
  - Sends \`brand_name, display_name, description, telegram_bot_token, ai_profile_id, human_agent_ids, org_id\`.\r
  - Robust response handling for empty/non-JSON bodies; emits refresh after success.\r
\r
- Data fetching and names\r
  - Human agent names prefer \`users_profile.display_name\` with fallback to \`v_users.display_name\`; email sourced from \`v_users\`.\r
  - Fixed error when \`users_profile.email\` was selected (column doesnt exist).\r
\r
- Components\r
  - Added \`ui/multi-select\` (popover + search + checkbox) for multi-add of agents.\r
\r
- Fixes\r
  - Agent chips now display the correct agent name (not internal IDs).\r
  - Only the agents selected during platform creation are attached (no more all agents issue).\r
  - Resolved Telegram JSON parse errors and \`42703 users_profile.email\` error.\r
\r
# [0.0.19] FE WEB CEKAT 2025-09-23\r
### Updates\r
- Automatically switch to the Resolved tab when only closed conversations are present\r
- Updated Resolved tab UI to display the count of closed conversations.\r
\r
# [0.0.18] FE WEB CEKAT 2025-09-20\r
### Updates\r
- Added provider tabs (WhatsApp, Telegram, Live Chat) to filter the list; auto-select first item in active tab\r
- Replaced black status dot with green (active) / gray (inactive) indicator\r
\r
# [0.0.17] FE WEB CEKAT 2025-09-20\r
### Updates\r
- Scope data fetching and realtime to visible pages and active routes (Conversations, Human Agents, Platforms, Contacts, AI Agents, RBAC, Analytics)\r
- Add tab-visibility guards to avoid background fetch on tab-restore; hydrate from cache first where applicable\r
- Standardize React Query defaults (staleTime=60s, gc=5m, disable refetch on focus/reconnect)\r
- Reduce audit log verbosity: ignore refresh/update events; add 3s debounce in \`logAction\`; include current route in log context\r
- Analytics\r
  - Default to last 30 days and align to full-day UTC boundaries\r
  - Prevent invalid date ranges (From  To; To  From) with input min/max and clamping\r
  - Fetch once per change; removed duplicate initial fetch\r
- UI consistency: set Telegram Platform create button to blue\r
- Utilities: add \`isDocumentHidden\` and \`onDocumentVisible\` helpers\r
\r
# [0.0.16] FE WEB CEKAT 2025-09-19\r
### Updates\r
- Enhance real-time synchronization for conversations and messages; always fetch fresh data on mount\r
\r
# [0.0.15] FE WEB CEKAT 2025-09-19\r
### Updates\r
- Auth/OTP: eliminate redirect flicker by gating on \`otpEvaluated\`; \`ProtectedRoute\` and \`Otp\` now wait for evaluation; \`ResetPassword\` handles magic-link \`?code=\` with \`exchangeCodeForSession\`.\r
- Changelog page: render Markdown (react-markdown + GFM), Tailwind Typography, compact heading sizes; added Netlify \`public/_redirects\`; added \`prebuild\`/\`predev\` to copy root \`CHANGELOG.md\` to \`public/\`.\r
- Build: remove top-level await in \`main.tsx\` (wrap in async IIFE).\r
- Analytics (global): add graceful fallback when \`get_containment_and_handover\` is missing; improved handover reason labels; added per-user analytics (Assigned To, Takeovers Initiated, Resolved By, AIAgent Handovers).\r
- Human Agents:\r
  - Create Agent dialog with loader; 2FA enable checkbox on create; colored CTAs.\r
  - Add confirmation dialog with loader for deletion; wire hard delete.\r
  - Status changed to Active/Inactive; add \`users_profile.is_active\` column and update UI/actions.\r
  - Edit dialog shows Require Email 2FA switch and token limits; loads/saves \`is_2fa_email_enabled\`.\r
  - Role badges and submenu restyled (blue/green/gray).\r
- Edge Functions: \`admin-create-user\` (invite + profile + role, CORS) and \`admin-delete-user\` (hard delete auth user and related rows).\r
- Logging: \`logAction\` falls back to default org when \`org_id\` cannot be resolved (fixes audit log NOT NULL).\r
- UI theming: replaced remaining dark/black buttons with blue/green/red where appropriate.\r
\r
# [0.0.14] FE WEB CEKAT 2025-09-19\r
### Updates\r
- Fix changelog is not accessible in staging\r
\r
# [0.0.13] FE WEB CEKAT 2025-09-19\r
### Updates\r
- Implement OTP flow for login and enhance ProtectedRoute for OTP verification. \r
- Added new Otp and Logout pages\r
- Updated AuthContext to manage OTP state \r
- Modified Login component to handle OTP requirements.\r
\r
# [0.0.12] FE WEB CEKAT 2025-09-18\r
### Updates\r
- Enhance authentication flow with local storage caching and session restoration\r
- Implemented local storage caching for AI agents and conversations to improve performance and reduce flicker on refresh.\r
- Added session restoration from local storage to ensure user authentication state is maintained across page reloads.\r
- Updated AuthContext to prioritize local storage for session data before reconciling with Supabase.\r
- Introduced a loading state management to handle UI updates more smoothly during data fetching.\r
\r
# [0.0.11] FE WEB CEKAT 2025-09-17\r
### Updates\r
- Audit Logs self-read policy for non-master users.\r
- Added \`get_audit_logs\` RPC with server-side filters, paging, and master-only org-wide access.\r
- Analytics foundations: date-range controls and labeled charts; wired to secure RPCs.\r
- KPI RPCs: \`get_chats_timeseries\` and \`get_response_time_stats\` (avg/median/p90) with Asia/Jakarta bucketing.\r
- RBAC and conversation label changes now emit audit log entries.\r
- Analytics UI now uses new KPI RPCs with channel filter, time-series, and labeled bars.\r
- Containment/Handover groundwork: added \`threads.resolution\`, \`end_reason\`, \`handover_reason\`, AI auto-resolution trigger.\r
- Analytics RPCs: \`get_containment\` (with previous period) and \`get_handover_stats\` (reason breakdown).\r
- Server-side validation: handover reason now required when handover happens; added helpful indexes for analytics.\r
- Added \`get_non_contained\` RPC for drilldown of non-contained conversations.\r
- Containment/Handover dashboard cards with drilldown and reason pie chart.\r
- RBAC policy engine scaffold: \`rbac_policies\` table, RPCs (\`get_role_policy\`, \`put_role_policy\`, \`apply_role_policy\`), extended \`has_perm\` to honor policies.\r
- Role Policy editor UI (matrix) to manage per-resource actions; policy changes logged.\r
- Added docs/ANALYTICS_AND_LOGS.md covering RPCs, validation, and telemetry.\r
- Added PII sanitization tests for log CSV export.\r
- Added analytics time-series, containment, handover, and RBAC policy tests; basic E2E seed.\r
- TODO roadmap (server-validated) added for Analytics KPIs, Containment/Handover, RBAC policies, indexes, docs, and tests.\r
- implement OTP flow in login\r
- enhance ProtectedRoute for OTP verification\r
\r
# [0.0.10] FE WEB CEKAT 2025-09-16\r
### Updates\r
- fix: remove duplicate import of useRBAC in ConversationPage component\r
\r
# [0.0.9] FE WEB CEKAT 2025-09-16\r
### Updates\r
- Created loggings for every users, and only admin can access.\r
- Made Role Management for admins to setting the role.\r
\r
# [0.0.8] FE WEB CEKAT 2025-09-14\r
### Updates\r
- Replaced thread participants with collaborators in the database schema.\r
- Implemented checks for user collaboration status on conversations.\r
- Enhanced thread assignment logic to ensure proper user assignment and audit fields.\r
- Updated UI elements for chat takeover functionality to reflect new collaborator roles.\r
\r
# [0.0.7] FE WEB CEKAT 2025-09-13\r
### Updates\r
- Removed static permission constants in favor of direct string references for better alignment with database values.\r
- Updated components to utilize new permission string format, enhancing consistency across the application.\r
- Improved navigation logic to enforce permission checks when syncing active tabs, ensuring users only access permitted items.\r
- Streamlined permission-related code in various components, enhancing maintainability and readability.\r
\r
# [0.0.6] FE WEB CEKAT 2025-09-03\r
### Updates\r
- Implement OpenAI usage tracking and enhance analytics component\r
- Added OpenAI API key configuration to .env for usage tracking.\r
- Refactored vite.config.ts to include a usage proxy plugin for fetching OpenAI usage data.\r
- Enhanced Analytics component to display OpenAI token usage with dynamic date range selection and improved UI elements.\r
- Integrated charts to visualize input, output, and total tokens over selected time ranges.\r
- Implemented error handling and loading states for better user experience during data fetching.\r
\r
# [0.0.5] FE WEB CEKAT 2025-09-03\r
### Updates\r
- Updated PermissionNavItem and NavigationItem interfaces to use string arrays for permissions instead of PermissionName type for better flexibility.\r
- Modified NAVIGATION_CONFIG to replace permission constants with string representations for improved readability and consistency.\r
- Enhanced RBACProvider's hasPermission function to support various permission formats, including direct matches and synonyms for better user experience.\r
- Integrated a new PermissionsPage component into the main Index page, ensuring proper permission checks with PermissionGate.\r
\r
\r
# [0.0.4] FE WEB CEKAT 2025-09-03\r
### Updates\r
- Integrate RBAC and enhance agent management features\r
- Added RBACProvider to App component for role-based access control.\r
- Updated HumanAgents component to utilize PermissionGate for role management and agent creation.\r
- Refactored agent role handling to support new roles: master_agent and super_agent.\r
- Enhanced ConversationPage to display channel provider information for better context.\r
- Improved useHumanAgents hook to fetch agents from the new v_users view, streamlining data retrieval and role assignment.\r
\r
# [0.0.3] FE WEB CEKAT 2025-09-03\r
### Updates\r
- Implement WhatsApp session polling and enhance deletion handling\r
- Added polling mechanism to check WhatsApp session status while the QR modal is open, improving user feedback on connection status.\r
- Introduced loading state management for channel deletion actions to prevent multiple submissions and enhance user experience.\r
- Removed phone number input from WhatsAppPlatformForm as per updated requirements, streamlining the form submission process.\r
\r
# [0.0.2] FE WEB CEKAT 2025-09-01\r
### Updates\r
- Deleted AUTHENTICATION_SETUP.md, CHAT_SETUP.md, HUMAN_AGENTS_SETUP.md, sample_data.sql, and simple_sample_data.sql as they are no longer relevant to the current project structure.\r
- Updated package.json version to 0.0.1 and removed unnecessary dev dependencies from package-lock.json.\r
- Enhanced Login component to display the current version of the application.\r
- Enhanced Whatsapp channel connecting flow and validation\r
\r
# [0.0.1] FE WEB CEKAT 2025-09-01\r
### Updates\r
- Enhance ClientEditProfileForm: Make company industry selection read-only for non-admin users`,VM=["from-sky-400/60 via-cyan-400/20 to-transparent border-sky-500/40","from-fuchsia-400/60 via-purple-500/20 to-transparent border-fuchsia-500/30","from-emerald-400/60 via-lime-400/20 to-transparent border-emerald-500/30","from-amber-400/60 via-orange-400/20 to-transparent border-amber-500/30","from-indigo-400/60 via-violet-500/20 to-transparent border-indigo-500/30","from-rose-400/60 via-pink-500/20 to-transparent border-rose-500/30"];function KM(e){return e.split(`
`).map(t=>t.trim()).filter(t=>/^-\s*\*\*/.test(t)).map(t=>{const n=t.match(/^-\s*\*\*(.+?)\*\*:?\s*(.*)$/);if(!n)return t.replace(/^-+\s*/,"");const[,r,a]=n;return a?`${r.trim()}  ${a.trim()}`:r.trim()})}function y9(e){var a,s;const t=e.replace(/\r/g,"").trim();if(!t)return[];const n=t.split(/\n(?=# \[)/g).map(o=>o.trim()).filter(Boolean),r=[];for(const o of n){if(o.startsWith("# Change Log")){const x=o.replace(/^# Change Log\s*/,"").trim();if(!x)continue;const y=y9(x);r.push(...y);continue}const l=o.match(/^# \[(?<version>[^\]]+)\](?<title>.*?)(?:\n|$)/);if(!(l!=null&&l.groups))continue;const c=(a=l.groups.version)==null?void 0:a.trim();if(!c)continue;const u=((s=l.groups.title)==null?void 0:s.trim())??"";let f=u||void 0,d;if(u){const x=u.match(/(\d{4}-\d{2}-\d{2})/);x&&(d=x[1],f=u.replace(x[1],"").trim()||void 0)}const h=o.slice(l[0].length).trim(),m=h?h.split(/\n(?=### )/g).map(x=>x.trim()).filter(Boolean):[],g=m.length?m.map((x,y)=>{const[b,...w]=x.split(`
`),k=b.replace(/^###\s*/,"").trim()||`Section ${y+1}`,j=w.join(`
`).trim();return{heading:k,body:j,highlights:KM(j)}}):h?[{heading:"Updates",body:h,highlights:KM(h)}]:[],v=g.flatMap(x=>x.highlights).filter(Boolean).slice(0,5);r.push({version:c,label:f,date:d,sections:g,summary:v,raw:h})}return r}const g3e={p:({children:e})=>i.jsx("p",{className:"text-sm leading-relaxed text-slate-200",children:e}),ul:({children:e})=>i.jsx("ul",{className:"space-y-2 text-sm text-slate-200",children:e}),li:({children:e})=>i.jsxs("li",{className:"relative pl-6",children:[i.jsx("span",{className:"absolute left-0 top-2 h-2 w-2 rounded-full bg-gradient-to-r from-sky-400 to-blue-500 shadow-[0_0_12px_rgba(56,189,248,0.6)]"}),i.jsx("div",{className:"space-y-1",children:e})]}),strong:({children:e})=>i.jsx("span",{className:"font-semibold text-sky-200",children:e}),code:({children:e})=>i.jsx("code",{className:"rounded-md bg-slate-900/80 px-1.5 py-0.5 text-xs text-sky-200",children:e}),a:({children:e,href:t})=>i.jsx("a",{href:t,className:"text-sky-300 underline decoration-dotted underline-offset-4 transition hover:text-sky-200",target:"_blank",rel:"noreferrer",children:e})};function v3e(){var f;const e=p.useMemo(()=>y9(HM),[]),[t,n]=p.useState(""),[r,a]=p.useState("interactive"),[s,o]=p.useState(((f=e[0])==null?void 0:f.version)??""),l=t.trim().toLowerCase(),c=p.useMemo(()=>l?e.filter(d=>[d.version,d.label??"",d.date??"",d.raw,...d.sections.map(m=>m.heading),...d.sections.map(m=>m.body)].join(" ").toLowerCase().includes(l)?!0:d.sections.some(m=>m.highlights.some(g=>g.toLowerCase().includes(l)))):e,[e,l]);p.useEffect(()=>{var h;if(!c.length){o("");return}c.some(m=>m.version===s)||o(((h=c[0])==null?void 0:h.version)??"")},[c,s]);const u=c.find(d=>d.version===s)||c[0];return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-10 text-foreground",children:i.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-6",children:[i.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[i.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-white md:text-4xl",children:"Release Notes & Progress Journal"}),i.jsx("p",{className:"mx-auto max-w-2xl text-sm text-slate-300 md:text-base",children:"Explore every release with rich summaries, vivid highlights, and interactive sections. Filter by keyword, skim highlights, or dive deep into the full notes."})]}),i.jsxs(bl,{value:r,onValueChange:d=>a(d),className:"w-full",children:[i.jsxs(vo,{className:"mx-auto grid w-full max-w-xs grid-cols-2 bg-slate-900/60 p-1 shadow-inner shadow-slate-800/40",children:[i.jsx(Vn,{value:"interactive",className:"data-[state=active]:bg-sky-500/20 data-[state=active]:text-sky-100",children:"Interactive"}),i.jsx(Vn,{value:"markdown",className:"data-[state=active]:bg-slate-700/40 data-[state=active]:text-slate-100",children:"Classic"})]}),i.jsx(In,{value:"interactive",className:"mt-6",children:i.jsxs("div",{className:"grid gap-6 lg:grid-cols-[320px_1fr]",children:[i.jsxs(Oe,{className:"border border-white/10 bg-slate-950/60 shadow-[0_12px_40px_-24px_rgba(56,189,248,0.65)] backdrop-blur",children:[i.jsxs(et,{className:"space-y-4",children:[i.jsxs(Ze,{className:"flex items-center gap-2 text-lg text-white",children:[i.jsx(xP,{className:"h-4 w-4 text-sky-300"}),"Releases"]}),i.jsx(vi,{className:"text-xs text-slate-300",children:"Search and choose any release to explore tailored highlights and details. Recent entries glow brighter."}),i.jsxs("div",{className:"relative",children:[i.jsx(Ji,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),i.jsx(Je,{placeholder:"Search versions, features, or dates...",value:t,onChange:d=>n(d.target.value),className:"bg-slate-900/70 pl-9 text-sm text-slate-100 placeholder:text-slate-400 focus-visible:ring-sky-400"})]})]}),i.jsx(Qe,{className:"p-0",children:i.jsx(fb,{className:"h-[540px]",children:i.jsxs("div",{className:"flex flex-col divide-y divide-white/5",children:[c.length===0&&i.jsx("div",{className:"p-6 text-center text-sm text-slate-400",children:"No release notes match your search. Try another term."}),c.map((d,h)=>{const m=d.version===(u==null?void 0:u.version);return i.jsx("button",{onClick:()=>o(d.version),className:ke("group relative flex w-full flex-col items-start gap-3 px-5 py-4 text-left transition",m?"bg-sky-500/15":"hover:bg-slate-900/70"),children:i.jsxs("div",{className:"flex w-full items-start gap-3",children:[i.jsx("span",{className:ke("mt-2 h-2.5 w-2.5 rounded-full bg-sky-400 shadow-[0_0_12px_rgba(56,189,248,0.7)] transition-transform",m&&"scale-125")}),i.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("span",{className:"text-sm font-semibold text-slate-100",children:["v",d.version]}),d.label&&i.jsx(vt,{variant:"outline",className:"border-slate-500/50 bg-slate-900/60 px-2 py-0 text-[10px] font-medium uppercase tracking-wide text-slate-300",children:d.label}),d.date&&i.jsxs("span",{className:"flex items-center gap-1 text-[11px] uppercase tracking-wide text-slate-400",children:[i.jsx(hP,{className:"h-3 w-3 text-slate-400"}),d.date]})]}),d.summary.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:d.summary.slice(0,3).map(g=>i.jsx(vt,{variant:"secondary",className:"max-w-full truncate bg-sky-500/15 text-[10px] font-medium text-sky-100",title:g,children:g},g))})]})]})},d.version)})]})})})]}),i.jsx("div",{className:"space-y-6",children:u?i.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-white/10 bg-slate-950/70 p-1 shadow-[0_45px_90px_-60px_rgba(56,189,248,0.8)] backdrop-blur",children:[i.jsx("div",{className:"absolute -left-32 -top-32 h-64 w-64 rounded-full bg-sky-500/20 blur-3xl"}),i.jsx("div",{className:"absolute -bottom-24 -right-24 h-64 w-64 rounded-full bg-fuchsia-500/10 blur-3xl"}),i.jsxs("div",{className:"relative z-10 rounded-[calc(theme(borderRadius.3xl))] border border-white/10 bg-slate-950/80 px-8 py-8",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsxs(vt,{className:"bg-sky-500/30 text-sky-50",children:["Version ",u.version]}),u.label&&i.jsx("h2",{className:"text-xl font-semibold text-white md:text-2xl",children:u.label}),u.date&&i.jsxs("span",{className:"flex items-center gap-1 text-sm text-slate-300",children:[i.jsx(hP,{className:"h-4 w-4 text-sky-300"}),u.date]})]}),u.summary.length>0&&i.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:u.summary.map(d=>i.jsxs(vt,{variant:"outline",className:"gap-1 border-sky-400/40 bg-sky-500/15 px-3 py-1 text-[11px] font-medium text-sky-100",title:d,children:[i.jsx(xP,{className:"h-3 w-3 text-sky-200"}),i.jsx("span",{className:"max-w-[220px] truncate",children:d})]},d))}),i.jsx("div",{className:"mt-8 space-y-4",children:i.jsxs(p3e,{type:"multiple",defaultValue:u.sections.map((d,h)=>`section-${h}`),className:"space-y-4",children:[u.sections.map((d,h)=>{const m=VM[h%VM.length];return i.jsxs(g9,{value:`section-${h}`,className:ke("border border-white/5","rounded-2xl bg-slate-950/60 shadow-[0_24px_60px_-35px_rgba(56,189,248,0.55)]"),children:[i.jsxs(v9,{className:"px-6 py-5 text-left hover:no-underline data-[state=open]:bg-slate-900/60",children:[i.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:ke("h-2.5 w-2.5 rounded-full bg-gradient-to-r shadow-[0_0_12px_rgba(56,189,248,0.6)]",m)}),i.jsx("span",{className:"text-base font-semibold text-white md:text-lg",children:d.heading})]}),d.highlights.length>0&&i.jsx("p",{className:"text-xs text-slate-300 md:text-sm",children:d.highlights[0]})]}),i.jsx(vP,{className:"h-4 w-4 text-sky-300"})]}),i.jsx(x9,{className:"px-6 pb-6",children:i.jsxs("div",{className:ke("relative overflow-hidden rounded-xl border border-white/5 bg-slate-950/80 px-5 py-5","shadow-[inset_0_0_40px_-25px_rgba(56,189,248,0.75)]"),children:[i.jsx("div",{className:ke("pointer-events-none absolute inset-0 bg-gradient-to-br opacity-40",m)}),i.jsx(DM,{remarkPlugins:[WM],components:g3e,className:"relative z-10 space-y-3",children:d.body})]})})]},d.heading+h)}),u.sections.length===0&&i.jsx("p",{className:"text-sm text-slate-300",children:"No detailed sections were found for this release. Check the classic view for raw notes."})]},u.version)})]})]}):i.jsxs(Oe,{className:"border border-white/10 bg-slate-950/60 p-12 text-center text-slate-300",children:[i.jsx(Ze,{className:"text-xl text-white",children:"No entries available"}),i.jsx(vi,{className:"mt-2 text-sm text-slate-300",children:"Try clearing the search filter to view release notes."})]})})]})}),i.jsx(In,{value:"markdown",className:"mt-6",children:i.jsxs(Oe,{className:"border border-white/10 bg-slate-950/70 shadow-[0_30px_80px_-60px_rgba(15,23,42,0.95)]",children:[i.jsxs(et,{children:[i.jsxs(Ze,{className:"flex items-center gap-2 text-white",children:[i.jsx(vP,{className:"h-5 w-5 text-sky-300"}),"Full Markdown"]}),i.jsx(vi,{className:"text-xs text-slate-300",children:"Prefer the traditional view? Browse the original changelog with full Markdown formatting."})]}),i.jsx(Qe,{children:i.jsx("article",{className:"prose prose-sm max-w-none text-slate-200 dark:prose-invert prose-headings:text-white prose-a:text-sky-300 prose-strong:text-sky-200",children:i.jsx(DM,{remarkPlugins:[WM],children:HM})})})]})})]})]})})}function GM(){const{platform_id:e,platformId:t}=uJ(),n=p.useMemo(()=>e||t||"unknown",[e,t]),[r,a]=p.useState([]),[s,o]=p.useState(""),[l,c]=p.useState(!1),[u,f]=p.useState(!0),[d,h]=p.useState("session_"+Date.now()),[m,g]=p.useState(null),[v,x]=p.useState(""),[y,b]=p.useState(null),[w,k]=p.useState(null),j=p.useRef(null),_=p.useRef(null),S=p.useRef(null),T=p.useRef(null),N="/tones/mixkit-message-pop-alert-2354.mp3",A="/tones/mixkit-long-pop-2358.wav",D=()=>{const C=window.AudioContext||window.webkitAudioContext;return _.current=_.current??new C,_.current},B=(C,z,I,$,K=.05,X="sine")=>{const V=C.createOscillator(),W=C.createGain();V.type=X,V.frequency.value=I,W.gain.value=1e-4,V.connect(W),W.connect(C.destination);const ae=z+$/1e3;W.gain.setValueAtTime(1e-4,z),W.gain.exponentialRampToValueAtTime(K,z+.02),W.gain.setValueAtTime(K,Math.max(z+.02,ae-.05)),W.gain.exponentialRampToValueAtTime(1e-4,ae),V.start(z),V.stop(ae)},E=(C,z=110,I=.06)=>{try{const $=D(),K=$.currentTime+.01;C.forEach((X,V)=>{const W=K+V*z/1e3,ae=z*.9;Array.isArray(X)?X.forEach(G=>B($,W,G,ae,I,"sine")):B($,W,X,ae,I,"triangle")})}catch{}},R=async C=>{var z,I;try{const K=(C==="low"?(z=window.chatConfig)==null?void 0:z.sendToneUrl:(I=window.chatConfig)==null?void 0:I.replyToneUrl)||(C==="low"?N:A),X=C==="low"?S.current??(S.current=new Audio(K)):T.current??(T.current=new Audio(K));return X.src!==K&&(X.src=K),X.currentTime=0,X.volume=C==="low"?.35:.45,await X.play(),!0}catch{return!1}},P=async()=>{await R("low")||E([493.88,523.25,493.88,523.25],110,.045)},U=async()=>{await R("high")||E([1046.5,1318.5,1568,[1046.5,1318.5,1568,2093]],120,.06)};p.useEffect(()=>{try{const C=typeof window<"u"?window.location.host:"unknown",z=`livechat_username_${n}_${C}`;let I="";try{I=localStorage.getItem(z)||""}catch{}if(!I){const $=["Happy","Bright","Calm","Brave","Kind","Sunny","Lucky","Cheerful","Swift","Clever"],K=["User","Visitor","Friend","Guest","Buddy","Pal","Explorer","Champion","Star","Hero"],X=$[Math.floor(Math.random()*$.length)],V=K[Math.floor(Math.random()*K.length)],W=Math.floor(100+Math.random()*900);I=`${X} ${V} ${W}`;try{localStorage.setItem(z,I)}catch{}}x(I)}catch{}},[n]),p.useEffect(()=>{var C;(C=j.current)==null||C.scrollIntoView({behavior:"smooth"})},[r.length]),p.useEffect(()=>{(async()=>{try{const{data:z,error:I}=await ie.from("channels").select("count").limit(1);I&&console.error("Supabase connection error:",I)}catch(z){console.error("Supabase connection test failed:",z)}})()},[]),p.useEffect(()=>()=>{w&&k(null)},[w]),p.useEffect(()=>{if(!m)return;const z=setInterval(async()=>{try{const{data:I}=await ie.from("messages").select("id, role, body, created_at").eq("thread_id",m).order("created_at",{ascending:!0});Array.isArray(I)&&a($=>{const K=new Map;$.forEach(V=>K.set(V.id,V));for(const V of I){if(!(V!=null&&V.id))continue;const W=V.role==="agent"||V.role==="assistant"?"assistant":"user";if(W==="user")continue;const ae={id:V.id,role:W,body:V.body||"",at:V.created_at||new Date().toISOString()};K.set(ae.id,ae)}const X=Array.from(K.values());return X.sort((V,W)=>new Date(V.at).getTime()-new Date(W.at).getTime()),X})}catch(I){console.error("Error refreshing messages:",I)}},2e3);return()=>clearInterval(z)},[m]),p.useEffect(()=>{n&&n!=="unknown"&&(async()=>{try{const{data:z,error:I}=await ie.from("channels").select("ai_profile_id").eq("id",n).maybeSingle();!I&&(z!=null&&z.ai_profile_id)&&b(z.ai_profile_id)}catch(z){console.error("Error fetching AI profile ID:",z)}})()},[n]),p.useEffect(()=>{let C=null,z=null;const I=X=>{!X||X.length===0||a(V=>{const W=new Map;V.forEach(G=>W.set(G.id,G));for(const G of X){if(!(G!=null&&G.id))continue;const le=G.role==="agent"||G.role==="assistant"?"assistant":"user",se={id:G.id,role:le,body:G.body||"",at:G.created_at||new Date().toISOString()};if(le==="user"){for(const[Q,_e]of W.entries())if(_e.id.startsWith("temp-")&&_e.role==="user"&&_e.body===G.body&&Math.abs(new Date(_e.at).getTime()-new Date(G.created_at).getTime())<1e4){W.delete(Q);break}}if(le==="assistant"&&w){for(const[Q,_e]of W.entries())if(_e.id===w){W.delete(Q);break}}W.has(se.id)||W.set(se.id,se)}const ae=Array.from(W.values());return ae.sort((G,le)=>new Date(G.at).getTime()-new Date(le.at).getTime()),ae})},$=async X=>{g(X);try{const{data:V}=await ie.from("messages").select("id, role, body, created_at").eq("thread_id",X).order("created_at",{ascending:!0});Array.isArray(V)&&I(V)}catch{}C=ie.channel(`livechat-msgs-${X}`).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`thread_id=eq.${X}`},V=>{const W=V==null?void 0:V.eventType,ae=(V==null?void 0:V.new)||(V==null?void 0:V.old);ae&&(ae==null?void 0:ae.role)!=="user"&&(((ae==null?void 0:ae.role)==="agent"||(ae==null?void 0:ae.role)==="assistant")&&I([ae]),W==="INSERT"&&(ae==null?void 0:ae.role)==="agent"&&w&&k(null))}).subscribe(),f(!1)};return(async()=>{try{const{data:X}=await ie.from("threads").select("id, contact_id, contacts(name)").eq("channel_id",n).eq("contacts.name",v).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(X!=null&&X.id){await $(X.id);return}}catch{}z=ie.channel(`livechat-threads-${n}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"threads",filter:`channel_id=eq.${n}`},async X=>{var ae,G;const V=(ae=X==null?void 0:X.new)==null?void 0:ae.id,W=(G=X==null?void 0:X.new)==null?void 0:G.contact_id;if(!(!V||!W))try{const{data:le}=await ie.from("contacts").select("id, name").eq("id",W).maybeSingle();le!=null&&le.name&&v&&le.name===v&&await $(V)}catch{}}).subscribe(()=>f(!1))})(),()=>{try{C&&ie.removeChannel(C)}catch{}try{z&&ie.removeChannel(z)}catch{}}},[n,v]);const L=async()=>{const C=s.trim();if(!C)return;if(m)try{const{checkAIMessageLimit:X,autoAssignToSuperAgent:V}=await io(async()=>{const{checkAIMessageLimit:ae,autoAssignToSuperAgent:G}=await import("./aiMessageLimit-CzT5SAWG.js");return{checkAIMessageLimit:ae,autoAssignToSuperAgent:G}},[]),W=await X(ie,m);if(W.isExceeded&&W.superAgentId){if((await V(ie,m,W.superAgentId)).success){const{toast:G}=await io(async()=>{const{toast:le}=await Promise.resolve().then(()=>SP);return{toast:le}},void 0);G.error(`Batas pesan AI telah tercapai (${W.currentCount}/${W.limit}). Percakapan telah dialihkan ke super agent.`);return}}else if(W.isExceeded&&!W.superAgentId){const{toast:ae}=await io(async()=>{const{toast:G}=await Promise.resolve().then(()=>SP);return{toast:G}},void 0);ae.error(`Batas pesan AI telah tercapai (${W.currentCount}/${W.limit}). Tidak ada super agent yang tersedia untuk penanganan.`);return}}catch(X){console.error("Error checking AI message limit:",X)}o("");const z=`temp-${Date.now()}`;a(X=>[...X,{id:z,role:"user",body:C,at:new Date().toISOString()}]),P(),c(!0);const I=setTimeout(()=>{a(X=>(X.findIndex(W=>W.id===z)>=0,X))},3e3),$=`streaming-${Date.now()}`;k($);const K=setTimeout(()=>{w===$&&(k(null),a(X=>X.map(V=>V.id===$?{...V,streaming:!1,body:V.body||"Waiting for response..."}:V)))},1e4);try{const X={message:C,session_id:d,timestamp:new Date().toISOString(),channel_id:n,username:v||void 0,ai_profile_id:y,stream:!0};let V=!1;try{const{data:{session:ae}}=await ie.auth.getSession();V=!ae}catch{V=!0}const W=await ka(Kn.ENDPOINTS.AI_AGENT.CHAT_SETTINGS,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)},{forceLegacy:V});if(!W.ok)throw new Error(`Webhook failed ${W.status}`);if(W.body){const ae=W.body.getReader(),G=new TextDecoder;let le="";try{for(;;){const{done:se,value:Q}=await ae.read();if(se)break;le+=G.decode(Q,{stream:!0});const _e=le.split(`
`);le=_e.pop()||"";for(const xe of _e)if(xe.trim()!=="")try{if(xe.startsWith("data: ")){const J=xe.slice(6);if(J==="[DONE]"){a(Ce=>Ce.map(Te=>Te.id===$?{...Te,streaming:!1}:Te)),k(null);break}const fe=JSON.parse(J);if(fe.content||fe.delta){const Ce=fe.content||fe.delta;a(Te=>{const Ee=Te.findIndex(ze=>ze.id===$);if(Ee>=0){const ze=Te.slice();return ze[Ee]={...ze[Ee],body:ze[Ee].body+Ce},ze}else return[...Te,{id:$,role:"assistant",body:Ce,at:new Date().toISOString(),streaming:!0}]})}}else{const J=JSON.parse(xe);if(J.content||J.delta){const fe=J.content||J.delta;a(Ce=>{const Te=Ce.findIndex(Ee=>Ee.id===$);if(Te>=0){const Ee=Ce.slice();return Ee[Te]={...Ee[Te],body:Ee[Te].body+fe},Ee}else return[...Ce,{id:$,role:"assistant",body:fe,at:new Date().toISOString(),streaming:!0}]})}}}catch{a(fe=>{const Ce=fe.findIndex(Te=>Te.id===$);if(Ce>=0){const Te=fe.slice();return Te[Ce]={...Te[Ce],body:Te[Ce].body+xe},Te}else return[...fe,{id:$,role:"assistant",body:xe,at:new Date().toISOString(),streaming:!0}]})}}}finally{ae.releaseLock()}}else try{const ae=await W.json(),G=ae.output||ae.content||ae.message||"Sorry, I couldn't process your message.";a(le=>{const se=le.findIndex(Q=>Q.id===$);if(se>=0){const Q=le.slice();return Q[se]={...Q[se],body:G,streaming:!1},Q}else return[...le,{id:$,role:"assistant",body:G,at:new Date().toISOString(),streaming:!1}]}),k(null)}catch(ae){console.error("Failed to parse JSON response:",ae),a(G=>[...G,{id:$,role:"assistant",body:"I'm processing your message, please wait...",at:new Date().toISOString(),streaming:!1}]),k(null)}U(),setTimeout(()=>{m&&ie.from("messages").select("id, role, body, created_at").eq("thread_id",m).order("created_at",{ascending:!0}).then(({data:ae})=>{Array.isArray(ae)&&a(G=>{const le=new Map;G.forEach(Q=>le.set(Q.id,Q));for(const Q of ae){if(!(Q!=null&&Q.id))continue;const _e=Q.role==="agent"||Q.role==="assistant"?"assistant":"user";if(_e==="user")continue;const xe={id:Q.id,role:_e,body:Q.body||"",at:Q.created_at||new Date().toISOString()};le.set(xe.id,xe)}const se=Array.from(le.values());return se.sort((Q,_e)=>new Date(Q.at).getTime()-new Date(_e.at).getTime()),se})})},1e3)}catch(X){console.error("Streaming error:",X),a(V=>V.filter(W=>W.id!==$).concat({id:crypto.randomUUID(),role:"assistant",body:"Sorry, I'm having trouble right now. Please try again later.",at:new Date().toISOString()})),k(null),U()}finally{clearTimeout(K),clearTimeout(I),c(!1)}},O=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),L())},F=C=>new Date(C).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center",children:i.jsx("div",{className:"mx-auto w-full max-w-xl h-full",children:i.jsx(Oe,{className:"border border-blue-100 shadow-xl rounded-2xl bg-white/90 backdrop-blur",children:i.jsxs(Qe,{className:"p-0",children:[i.jsx("div",{className:"flex items-center justify-between px-4 py-3 rounded-t-2xl bg-gradient-to-r from-blue-600 to-blue-500 text-white",children:i.jsx("div",{className:"text-sm font-medium tracking-wide",children:"Live Chat"})}),i.jsx(fb,{className:"h-[450px] p-4",children:i.jsxs("div",{className:"space-y-3",children:[u&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(zt,{className:"h-4 w-4 animate-spin text-blue-600"}),"Preparing chat"]}),r.map(C=>!C.body||C.streaming&&C.body.trim()===""?null:i.jsx("div",{className:`flex ${C.role==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:"max-w-[80%] space-y-1",children:[i.jsx("div",{className:`px-4 py-2 text-sm rounded-2xl shadow-sm transition-colors ${C.role==="user"?"bg-blue-600 text-white rounded-br-md":"bg-white text-slate-900 border border-blue-100 rounded-bl-md"}`,children:i.jsx("span",{className:"whitespace-pre-wrap",children:C.body})}),i.jsx("div",{className:`text-[10px] ${C.role==="user"?"text-blue-200 text-right":"text-slate-400"}`,children:F(C.at)})]})},C.id)),l&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(zt,{className:"h-4 w-4 animate-spin text-blue-600"}),"Typing"]}),i.jsx("div",{ref:j})]})}),i.jsx("div",{className:"p-3 border-t border-blue-100 rounded-b-2xl bg-blue-50/40",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Je,{placeholder:"Type a message",value:s,onChange:C=>o(C.target.value),onKeyPress:O,className:"rounded-full h-10 px-4 border-blue-200 focus-visible:ring-blue-500 placeholder:text-slate-400"}),i.jsx(ne,{onClick:L,disabled:!s.trim(),className:"rounded-full h-10 w-10 p-0 bg-blue-600 hover:bg-blue-700 text-white",children:i.jsx(em,{className:"h-4 w-4"})})]})})]})})})})}function x3e(){const{signOut:e}=Xr(),t=Qa(),[n,r]=p.useState(!1),a=async()=>{if(!n){r(!0);try{localStorage.clear(),e().catch(()=>{}),t("/",{replace:!0})}catch(s){console.error("AccountDeactivated: Error in handleBackToLogin:",s),t("/",{replace:!0})}finally{r(!1)}}};return i.jsx("div",{className:"min-h-screen bg-background text-foreground flex items-center justify-center p-4",children:i.jsxs(Oe,{className:"w-full max-w-md",children:[i.jsxs(et,{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:i.jsx(Hs,{className:"h-8 w-8 text-red-600"})}),i.jsx(Ze,{className:"text-2xl font-bold text-red-800",children:"Akun Dinonaktifkan"})]}),i.jsx(vi,{className:"text-gray-600 text-base",children:"Akun Anda telah dinonaktifkan dan tidak dapat mengakses sistem."})]}),i.jsxs(Qe,{className:"space-y-6",children:[i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Hv,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Hubungi Master Agent"}),i.jsx("p",{className:"text-sm text-red-700",children:"Untuk mengaktifkan kembali akun Anda, silakan hubungi Master Agent di organisasi Anda. Mereka dapat mengaktifkan akun Anda kembali."})]})]})}),i.jsx("div",{className:"text-sm text-gray-600",children:i.jsx("p",{children:"Jika Anda yakin ini adalah kesalahan, silakan hubungi administrator sistem untuk bantuan lebih lanjut."})}),i.jsx("div",{className:"flex flex-col gap-3",children:i.jsxs(ne,{onClick:a,variant:"outline",className:"w-full",disabled:n,children:[i.jsx(dp,{className:"h-4 w-4 mr-2"}),n?"Memproses...":"Kembali ke Halaman Login"]})})]})]})})}const y3e=new IX({defaultOptions:{queries:{staleTime:6e4,gcTime:5*6e4,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:1},mutations:{retry:0}}}),b3e=()=>i.jsx(MX,{client:y3e,children:i.jsx(IJ,{children:i.jsx(_ee,{children:i.jsx(Aee,{children:i.jsxs(M1,{children:[i.jsx(GK,{}),i.jsx(h4,{}),i.jsxs(SJ,{children:[i.jsx(Ma,{path:"/",element:i.jsx(bg,{children:i.jsx(qR,{})})}),i.jsx(Ma,{path:"/chat",element:i.jsx(bg,{children:i.jsx(qR,{})})}),i.jsx(Ma,{path:"/profile",element:i.jsx(bg,{children:i.jsx(XIe,{})})}),i.jsx(Ma,{path:"/reset-password",element:i.jsx(VR,{})}),i.jsx(Ma,{path:"/invite",element:i.jsx(VR,{})}),i.jsx(Ma,{path:"/account-deactivated",element:i.jsx(x3e,{})}),i.jsx(Ma,{path:"/otp",element:i.jsx(bg,{children:i.jsx(fRe,{})})}),i.jsx(Ma,{path:"/logout",element:i.jsx(hRe,{})}),i.jsx(Ma,{path:"/changelog",element:i.jsx(v3e,{})}),i.jsx(Ma,{path:"/livechat/:platform_id",element:i.jsx(GM,{})}),i.jsx(Ma,{path:"/livechat/:platformId",element:i.jsx(GM,{})}),i.jsx(Ma,{path:"*",element:i.jsx(mRe,{})})]})]})})})})}),w3e="sb-yoekcpoppfudmqtvjcby-auth-token";async function j3e(){var e,t;try{const n=localStorage.getItem(w3e);if(!n)return;const r=JSON.parse(n),a=(r==null?void 0:r.access_token)||((e=r==null?void 0:r.currentSession)==null?void 0:e.access_token),s=(r==null?void 0:r.refresh_token)||((t=r==null?void 0:r.currentSession)==null?void 0:t.refresh_token);a&&s&&await ie.auth.setSession({access_token:a,refresh_token:s})}catch{}}(async()=>{try{await j3e()}catch{}gL(document.getElementById("root")).render(i.jsx(b3e,{}))})();

var u9=Object.defineProperty;var VA=e=>{throw TypeError(e)};var d9=(e,t,n)=>t in e?u9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zt=(e,t,n)=>d9(e,typeof t!="symbol"?t+"":t,n),_0=(e,t,n)=>t.has(e)||VA("Cannot "+n);var je=(e,t,n)=>(_0(e,t,"read from private field"),n?n.call(e):t.get(e)),tn=(e,t,n)=>t.has(e)?VA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ct=(e,t,n,r)=>(_0(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Rr=(e,t,n)=>(_0(e,t,"access private method"),n);var Hp=(e,t,n,r)=>({set _(a){Ct(e,t,a,n)},get _(){return je(e,t,r)}});function f9(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(r,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h9(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var JM={exports:{}},cy={},QM={exports:{}},Vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ep=Symbol.for("react.element"),m9=Symbol.for("react.portal"),p9=Symbol.for("react.fragment"),g9=Symbol.for("react.strict_mode"),v9=Symbol.for("react.profiler"),x9=Symbol.for("react.provider"),y9=Symbol.for("react.context"),b9=Symbol.for("react.forward_ref"),w9=Symbol.for("react.suspense"),j9=Symbol.for("react.memo"),_9=Symbol.for("react.lazy"),KA=Symbol.iterator;function k9(e){return e===null||typeof e!="object"?null:(e=KA&&e[KA]||e["@@iterator"],typeof e=="function"?e:null)}var ZM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eD=Object.assign,tD={};function Xd(e,t,n){this.props=e,this.context=t,this.refs=tD,this.updater=n||ZM}Xd.prototype.isReactComponent={};Xd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function nD(){}nD.prototype=Xd.prototype;function Jk(e,t,n){this.props=e,this.context=t,this.refs=tD,this.updater=n||ZM}var Qk=Jk.prototype=new nD;Qk.constructor=Jk;eD(Qk,Xd.prototype);Qk.isPureReactComponent=!0;var GA=Array.isArray,rD=Object.prototype.hasOwnProperty,Zk={current:null},aD={key:!0,ref:!0,__self:!0,__source:!0};function iD(e,t,n){var r,a={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)rD.call(t,r)&&!aD.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:ep,type:e,key:s,ref:o,props:a,_owner:Zk.current}}function S9(e,t){return{$$typeof:ep,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function eS(e){return typeof e=="object"&&e!==null&&e.$$typeof===ep}function N9(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var YA=/\/+/g;function k0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?N9(""+e.key):t.toString(36)}function Gg(e,t,n,r,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ep:case m9:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+k0(o,0):r,GA(a)?(n="",e!=null&&(n=e.replace(YA,"$&/")+"/"),Gg(a,t,n,"",function(u){return u})):a!=null&&(eS(a)&&(a=S9(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(YA,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",GA(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+k0(s,l);o+=Gg(s,t,n,c,a)}else if(c=k9(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+k0(s,l++),o+=Gg(s,t,n,c,a);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Vp(e,t,n){if(e==null)return e;var r=[],a=0;return Gg(e,r,"","",function(s){return t.call(n,s,a++)}),r}function C9(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var sa={current:null},Yg={transition:null},A9={ReactCurrentDispatcher:sa,ReactCurrentBatchConfig:Yg,ReactCurrentOwner:Zk};function sD(){throw Error("act(...) is not supported in production builds of React.")}Vt.Children={map:Vp,forEach:function(e,t,n){Vp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Vp(e,function(){t++}),t},toArray:function(e){return Vp(e,function(t){return t})||[]},only:function(e){if(!eS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Vt.Component=Xd;Vt.Fragment=p9;Vt.Profiler=v9;Vt.PureComponent=Jk;Vt.StrictMode=g9;Vt.Suspense=w9;Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A9;Vt.act=sD;Vt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=eD({},e.props),a=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Zk.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)rD.call(t,c)&&!aD.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ep,type:e.type,key:a,ref:s,props:r,_owner:o}};Vt.createContext=function(e){return e={$$typeof:y9,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:x9,_context:e},e.Consumer=e};Vt.createElement=iD;Vt.createFactory=function(e){var t=iD.bind(null,e);return t.type=e,t};Vt.createRef=function(){return{current:null}};Vt.forwardRef=function(e){return{$$typeof:b9,render:e}};Vt.isValidElement=eS;Vt.lazy=function(e){return{$$typeof:_9,_payload:{_status:-1,_result:e},_init:C9}};Vt.memo=function(e,t){return{$$typeof:j9,type:e,compare:t===void 0?null:t}};Vt.startTransition=function(e){var t=Yg.transition;Yg.transition={};try{e()}finally{Yg.transition=t}};Vt.unstable_act=sD;Vt.useCallback=function(e,t){return sa.current.useCallback(e,t)};Vt.useContext=function(e){return sa.current.useContext(e)};Vt.useDebugValue=function(){};Vt.useDeferredValue=function(e){return sa.current.useDeferredValue(e)};Vt.useEffect=function(e,t){return sa.current.useEffect(e,t)};Vt.useId=function(){return sa.current.useId()};Vt.useImperativeHandle=function(e,t,n){return sa.current.useImperativeHandle(e,t,n)};Vt.useInsertionEffect=function(e,t){return sa.current.useInsertionEffect(e,t)};Vt.useLayoutEffect=function(e,t){return sa.current.useLayoutEffect(e,t)};Vt.useMemo=function(e,t){return sa.current.useMemo(e,t)};Vt.useReducer=function(e,t,n){return sa.current.useReducer(e,t,n)};Vt.useRef=function(e){return sa.current.useRef(e)};Vt.useState=function(e){return sa.current.useState(e)};Vt.useSyncExternalStore=function(e,t,n){return sa.current.useSyncExternalStore(e,t,n)};Vt.useTransition=function(){return sa.current.useTransition()};Vt.version="18.3.1";QM.exports=Vt;var p=QM.exports;const V=fn(p),tS=f9({__proto__:null,default:V},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E9=p,P9=Symbol.for("react.element"),T9=Symbol.for("react.fragment"),O9=Object.prototype.hasOwnProperty,I9=E9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R9={key:!0,ref:!0,__self:!0,__source:!0};function oD(e,t,n){var r,a={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)O9.call(t,r)&&!R9.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:P9,type:e,key:s,ref:o,props:a,_owner:I9.current}}cy.Fragment=T9;cy.jsx=oD;cy.jsxs=oD;JM.exports=cy;var i=JM.exports,lD={exports:{}},Ha={},cD={exports:{}},uD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,$){var C=L.length;L.push($);e:for(;0<C;){var U=C-1>>>1,D=L[U];if(0<a(D,$))L[U]=$,L[C]=D,C=U;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var $=L[0],C=L.pop();if(C!==$){L[0]=C;e:for(var U=0,D=L.length,P=D>>>1;U<P;){var H=2*(U+1)-1,G=L[H],Y=H+1,W=L[Y];if(0>a(G,C))Y<D&&0>a(W,G)?(L[U]=W,L[Y]=C,U=Y):(L[U]=G,L[H]=C,U=H);else if(Y<D&&0>a(W,C))L[U]=W,L[Y]=C,U=Y;else break e}}return $}function a(L,$){var C=L.sortIndex-$.sortIndex;return C!==0?C:L.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,d=null,h=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=L)r(u),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(u)}}function j(L){if(v=!1,w(L),!g)if(n(c)!==null)g=!0,B(k);else{var $=n(u);$!==null&&R(j,$.startTime-L)}}function k(L,$){g=!1,v&&(v=!1,y(A),A=-1),m=!0;var C=h;try{for(w($),d=n(c);d!==null&&(!(d.expirationTime>$)||L&&!I());){var U=d.callback;if(typeof U=="function"){d.callback=null,h=d.priorityLevel;var D=U(d.expirationTime<=$);$=e.unstable_now(),typeof D=="function"?d.callback=D:d===n(c)&&r(c),w($)}else r(c);d=n(c)}if(d!==null)var P=!0;else{var H=n(u);H!==null&&R(j,H.startTime-$),P=!1}return P}finally{d=null,h=C,m=!1}}var _=!1,S=null,A=-1,N=5,T=-1;function I(){return!(e.unstable_now()-T<N)}function F(){if(S!==null){var L=e.unstable_now();T=L;var $=!0;try{$=S(!0,L)}finally{$?E():(_=!1,S=null)}}else _=!1}var E;if(typeof b=="function")E=function(){b(F)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,M=O.port2;O.port1.onmessage=F,E=function(){M.postMessage(null)}}else E=function(){x(F,0)};function B(L){S=L,_||(_=!0,E())}function R(L,$){A=x(function(){L(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,B(k))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(L){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var C=h;h=$;try{return L()}finally{h=C}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,$){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var C=h;h=L;try{return $()}finally{h=C}},e.unstable_scheduleCallback=function(L,$,C){var U=e.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?U+C:U):C=U,L){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=C+D,L={id:f++,callback:$,priorityLevel:L,startTime:C,expirationTime:D,sortIndex:-1},C>U?(L.sortIndex=C,t(u,L),n(c)===null&&L===n(u)&&(v?(y(A),A=-1):v=!0,R(j,C-U))):(L.sortIndex=D,t(c,L),g||m||(g=!0,B(k))),L},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(L){var $=h;return function(){var C=h;h=$;try{return L.apply(this,arguments)}finally{h=C}}}})(uD);cD.exports=uD;var M9=cD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D9=p,qa=M9;function Pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dD=new Set,Th={};function qc(e,t){md(e,t),md(e+"Capture",t)}function md(e,t){for(Th[e]=t,e=0;e<t.length;e++)dD.add(t[e])}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pj=Object.prototype.hasOwnProperty,$9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XA={},JA={};function L9(e){return Pj.call(JA,e)?!0:Pj.call(XA,e)?!1:$9.test(e)?JA[e]=!0:(XA[e]=!0,!1)}function F9(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function B9(e,t,n,r){if(t===null||typeof t>"u"||F9(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function oa(e,t,n,r,a,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Or={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Or[e]=new oa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Or[t]=new oa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Or[e]=new oa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Or[e]=new oa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Or[e]=new oa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Or[e]=new oa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Or[e]=new oa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Or[e]=new oa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Or[e]=new oa(e,5,!1,e.toLowerCase(),null,!1,!1)});var nS=/[\-:]([a-z])/g;function rS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(nS,rS);Or[t]=new oa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(nS,rS);Or[t]=new oa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(nS,rS);Or[t]=new oa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Or[e]=new oa(e,1,!1,e.toLowerCase(),null,!1,!1)});Or.xlinkHref=new oa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Or[e]=new oa(e,1,!1,e.toLowerCase(),null,!0,!0)});function aS(e,t,n,r){var a=Or.hasOwnProperty(t)?Or[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(B9(t,n,a,r)&&(n=null),r||a===null?L9(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var fo=D9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kp=Symbol.for("react.element"),Eu=Symbol.for("react.portal"),Pu=Symbol.for("react.fragment"),iS=Symbol.for("react.strict_mode"),Tj=Symbol.for("react.profiler"),fD=Symbol.for("react.provider"),hD=Symbol.for("react.context"),sS=Symbol.for("react.forward_ref"),Oj=Symbol.for("react.suspense"),Ij=Symbol.for("react.suspense_list"),oS=Symbol.for("react.memo"),Mo=Symbol.for("react.lazy"),mD=Symbol.for("react.offscreen"),QA=Symbol.iterator;function kf(e){return e===null||typeof e!="object"?null:(e=QA&&e[QA]||e["@@iterator"],typeof e=="function"?e:null)}var zn=Object.assign,S0;function th(e){if(S0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);S0=t&&t[1]||""}return`
`+S0+e}var N0=!1;function C0(e,t){if(!e||N0)return"";N0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=r.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{N0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?th(e):""}function U9(e){switch(e.tag){case 5:return th(e.type);case 16:return th("Lazy");case 13:return th("Suspense");case 19:return th("SuspenseList");case 0:case 2:case 15:return e=C0(e.type,!1),e;case 11:return e=C0(e.type.render,!1),e;case 1:return e=C0(e.type,!0),e;default:return""}}function Rj(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pu:return"Fragment";case Eu:return"Portal";case Tj:return"Profiler";case iS:return"StrictMode";case Oj:return"Suspense";case Ij:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case hD:return(e.displayName||"Context")+".Consumer";case fD:return(e._context.displayName||"Context")+".Provider";case sS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case oS:return t=e.displayName||null,t!==null?t:Rj(e.type)||"Memo";case Mo:t=e._payload,e=e._init;try{return Rj(e(t))}catch{}}return null}function z9(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rj(t);case 8:return t===iS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ul(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function q9(e){var t=pD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gp(e){e._valueTracker||(e._valueTracker=q9(e))}function gD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=pD(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function vv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Mj(e,t){var n=t.checked;return zn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ZA(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ul(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function vD(e,t){t=t.checked,t!=null&&aS(e,"checked",t,!1)}function Dj(e,t){vD(e,t);var n=ul(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$j(e,t.type,n):t.hasOwnProperty("defaultValue")&&$j(e,t.type,ul(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function eE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function $j(e,t,n){(t!=="number"||vv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var nh=Array.isArray;function Hu(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ul(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Lj(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pe(91));return zn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Pe(92));if(nh(n)){if(1<n.length)throw Error(Pe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ul(n)}}function xD(e,t){var n=ul(t.value),r=ul(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function nE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function yD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fj(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?yD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yp,bD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yp=Yp||document.createElement("div"),Yp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Oh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var dh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W9=["Webkit","ms","Moz","O"];Object.keys(dh).forEach(function(e){W9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dh[t]=dh[e]})});function wD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||dh.hasOwnProperty(e)&&dh[e]?(""+t).trim():t+"px"}function jD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=wD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var H9=zn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bj(e,t){if(t){if(H9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pe(62))}}function Uj(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zj=null;function lS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qj=null,Vu=null,Ku=null;function rE(e){if(e=rp(e)){if(typeof qj!="function")throw Error(Pe(280));var t=e.stateNode;t&&(t=my(t),qj(e.stateNode,e.type,t))}}function _D(e){Vu?Ku?Ku.push(e):Ku=[e]:Vu=e}function kD(){if(Vu){var e=Vu,t=Ku;if(Ku=Vu=null,rE(e),t)for(e=0;e<t.length;e++)rE(t[e])}}function SD(e,t){return e(t)}function ND(){}var A0=!1;function CD(e,t,n){if(A0)return e(t,n);A0=!0;try{return SD(e,t,n)}finally{A0=!1,(Vu!==null||Ku!==null)&&(ND(),kD())}}function Ih(e,t){var n=e.stateNode;if(n===null)return null;var r=my(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Pe(231,t,typeof n));return n}var Wj=!1;if(Zs)try{var Sf={};Object.defineProperty(Sf,"passive",{get:function(){Wj=!0}}),window.addEventListener("test",Sf,Sf),window.removeEventListener("test",Sf,Sf)}catch{Wj=!1}function V9(e,t,n,r,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var fh=!1,xv=null,yv=!1,Hj=null,K9={onError:function(e){fh=!0,xv=e}};function G9(e,t,n,r,a,s,o,l,c){fh=!1,xv=null,V9.apply(K9,arguments)}function Y9(e,t,n,r,a,s,o,l,c){if(G9.apply(this,arguments),fh){if(fh){var u=xv;fh=!1,xv=null}else throw Error(Pe(198));yv||(yv=!0,Hj=u)}}function Wc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function AD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function aE(e){if(Wc(e)!==e)throw Error(Pe(188))}function X9(e){var t=e.alternate;if(!t){if(t=Wc(e),t===null)throw Error(Pe(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return aE(a),e;if(s===r)return aE(a),t;s=s.sibling}throw Error(Pe(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o)throw Error(Pe(189))}}if(n.alternate!==r)throw Error(Pe(190))}if(n.tag!==3)throw Error(Pe(188));return n.stateNode.current===n?e:t}function ED(e){return e=X9(e),e!==null?PD(e):null}function PD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=PD(e);if(t!==null)return t;e=e.sibling}return null}var TD=qa.unstable_scheduleCallback,iE=qa.unstable_cancelCallback,J9=qa.unstable_shouldYield,Q9=qa.unstable_requestPaint,Zn=qa.unstable_now,Z9=qa.unstable_getCurrentPriorityLevel,cS=qa.unstable_ImmediatePriority,OD=qa.unstable_UserBlockingPriority,bv=qa.unstable_NormalPriority,eH=qa.unstable_LowPriority,ID=qa.unstable_IdlePriority,uy=null,us=null;function tH(e){if(us&&typeof us.onCommitFiberRoot=="function")try{us.onCommitFiberRoot(uy,e,void 0,(e.current.flags&128)===128)}catch{}}var Li=Math.clz32?Math.clz32:aH,nH=Math.log,rH=Math.LN2;function aH(e){return e>>>=0,e===0?32:31-(nH(e)/rH|0)|0}var Xp=64,Jp=4194304;function rh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wv(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=rh(l):(s&=o,s!==0&&(r=rh(s)))}else o=n&~a,o!==0?r=rh(o):s!==0&&(r=rh(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,s=t&-t,a>=s||a===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Li(t),a=1<<n,r|=e[n],t&=~a;return r}function iH(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sH(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Li(s),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=iH(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function Vj(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function RD(){var e=Xp;return Xp<<=1,!(Xp&4194240)&&(Xp=64),e}function E0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Li(t),e[t]=n}function oH(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Li(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}function uS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Li(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var pn=0;function MD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var DD,dS,$D,LD,FD,Kj=!1,Qp=[],Qo=null,Zo=null,el=null,Rh=new Map,Mh=new Map,Lo=[],lH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sE(e,t){switch(e){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":el=null;break;case"pointerover":case"pointerout":Rh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mh.delete(t.pointerId)}}function Nf(e,t,n,r,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},t!==null&&(t=rp(t),t!==null&&dS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function cH(e,t,n,r,a){switch(t){case"focusin":return Qo=Nf(Qo,e,t,n,r,a),!0;case"dragenter":return Zo=Nf(Zo,e,t,n,r,a),!0;case"mouseover":return el=Nf(el,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Rh.set(s,Nf(Rh.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Mh.set(s,Nf(Mh.get(s)||null,e,t,n,r,a)),!0}return!1}function BD(e){var t=nc(e.target);if(t!==null){var n=Wc(t);if(n!==null){if(t=n.tag,t===13){if(t=AD(n),t!==null){e.blockedOn=t,FD(e.priority,function(){$D(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gj(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);zj=r,n.target.dispatchEvent(r),zj=null}else return t=rp(n),t!==null&&dS(t),e.blockedOn=n,!1;t.shift()}return!0}function oE(e,t,n){Xg(e)&&n.delete(t)}function uH(){Kj=!1,Qo!==null&&Xg(Qo)&&(Qo=null),Zo!==null&&Xg(Zo)&&(Zo=null),el!==null&&Xg(el)&&(el=null),Rh.forEach(oE),Mh.forEach(oE)}function Cf(e,t){e.blockedOn===t&&(e.blockedOn=null,Kj||(Kj=!0,qa.unstable_scheduleCallback(qa.unstable_NormalPriority,uH)))}function Dh(e){function t(a){return Cf(a,e)}if(0<Qp.length){Cf(Qp[0],e);for(var n=1;n<Qp.length;n++){var r=Qp[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Qo!==null&&Cf(Qo,e),Zo!==null&&Cf(Zo,e),el!==null&&Cf(el,e),Rh.forEach(t),Mh.forEach(t),n=0;n<Lo.length;n++)r=Lo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Lo.length&&(n=Lo[0],n.blockedOn===null);)BD(n),n.blockedOn===null&&Lo.shift()}var Gu=fo.ReactCurrentBatchConfig,jv=!0;function dH(e,t,n,r){var a=pn,s=Gu.transition;Gu.transition=null;try{pn=1,fS(e,t,n,r)}finally{pn=a,Gu.transition=s}}function fH(e,t,n,r){var a=pn,s=Gu.transition;Gu.transition=null;try{pn=4,fS(e,t,n,r)}finally{pn=a,Gu.transition=s}}function fS(e,t,n,r){if(jv){var a=Gj(e,t,n,r);if(a===null)F0(e,t,r,_v,n),sE(e,r);else if(cH(a,e,t,n,r))r.stopPropagation();else if(sE(e,r),t&4&&-1<lH.indexOf(e)){for(;a!==null;){var s=rp(a);if(s!==null&&DD(s),s=Gj(e,t,n,r),s===null&&F0(e,t,r,_v,n),s===a)break;a=s}a!==null&&r.stopPropagation()}else F0(e,t,r,null,n)}}var _v=null;function Gj(e,t,n,r){if(_v=null,e=lS(r),e=nc(e),e!==null)if(t=Wc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=AD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _v=e,null}function UD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Z9()){case cS:return 1;case OD:return 4;case bv:case eH:return 16;case ID:return 536870912;default:return 16}default:return 16}}var Go=null,hS=null,Jg=null;function zD(){if(Jg)return Jg;var e,t=hS,n=t.length,r,a="value"in Go?Go.value:Go.textContent,s=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[s-r];r++);return Jg=a.slice(e,1<r?1-r:void 0)}function Qg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zp(){return!0}function lE(){return!1}function Va(e){function t(n,r,a,s,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zp:lE,this.isPropagationStopped=lE,this}return zn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zp)},persist:function(){},isPersistent:Zp}),t}var Jd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mS=Va(Jd),np=zn({},Jd,{view:0,detail:0}),hH=Va(np),P0,T0,Af,dy=zn({},np,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Af&&(Af&&e.type==="mousemove"?(P0=e.screenX-Af.screenX,T0=e.screenY-Af.screenY):T0=P0=0,Af=e),P0)},movementY:function(e){return"movementY"in e?e.movementY:T0}}),cE=Va(dy),mH=zn({},dy,{dataTransfer:0}),pH=Va(mH),gH=zn({},np,{relatedTarget:0}),O0=Va(gH),vH=zn({},Jd,{animationName:0,elapsedTime:0,pseudoElement:0}),xH=Va(vH),yH=zn({},Jd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bH=Va(yH),wH=zn({},Jd,{data:0}),uE=Va(wH),jH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_H={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kH[e])?!!t[e]:!1}function pS(){return SH}var NH=zn({},np,{key:function(e){if(e.key){var t=jH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_H[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pS,charCode:function(e){return e.type==="keypress"?Qg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),CH=Va(NH),AH=zn({},dy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dE=Va(AH),EH=zn({},np,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pS}),PH=Va(EH),TH=zn({},Jd,{propertyName:0,elapsedTime:0,pseudoElement:0}),OH=Va(TH),IH=zn({},dy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),RH=Va(IH),MH=[9,13,27,32],gS=Zs&&"CompositionEvent"in window,hh=null;Zs&&"documentMode"in document&&(hh=document.documentMode);var DH=Zs&&"TextEvent"in window&&!hh,qD=Zs&&(!gS||hh&&8<hh&&11>=hh),fE=" ",hE=!1;function WD(e,t){switch(e){case"keyup":return MH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Tu=!1;function $H(e,t){switch(e){case"compositionend":return HD(t);case"keypress":return t.which!==32?null:(hE=!0,fE);case"textInput":return e=t.data,e===fE&&hE?null:e;default:return null}}function LH(e,t){if(Tu)return e==="compositionend"||!gS&&WD(e,t)?(e=zD(),Jg=hS=Go=null,Tu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qD&&t.locale!=="ko"?null:t.data;default:return null}}var FH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!FH[e.type]:t==="textarea"}function VD(e,t,n,r){_D(r),t=kv(t,"onChange"),0<t.length&&(n=new mS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var mh=null,$h=null;function BH(e){r$(e,0)}function fy(e){var t=Ru(e);if(gD(t))return e}function UH(e,t){if(e==="change")return t}var KD=!1;if(Zs){var I0;if(Zs){var R0="oninput"in document;if(!R0){var pE=document.createElement("div");pE.setAttribute("oninput","return;"),R0=typeof pE.oninput=="function"}I0=R0}else I0=!1;KD=I0&&(!document.documentMode||9<document.documentMode)}function gE(){mh&&(mh.detachEvent("onpropertychange",GD),$h=mh=null)}function GD(e){if(e.propertyName==="value"&&fy($h)){var t=[];VD(t,$h,e,lS(e)),CD(BH,t)}}function zH(e,t,n){e==="focusin"?(gE(),mh=t,$h=n,mh.attachEvent("onpropertychange",GD)):e==="focusout"&&gE()}function qH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fy($h)}function WH(e,t){if(e==="click")return fy(t)}function HH(e,t){if(e==="input"||e==="change")return fy(t)}function VH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zi=typeof Object.is=="function"?Object.is:VH;function Lh(e,t){if(zi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Pj.call(t,a)||!zi(e[a],t[a]))return!1}return!0}function vE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xE(e,t){var n=vE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vE(n)}}function YD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?YD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function XD(){for(var e=window,t=vv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=vv(e.document)}return t}function vS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function KH(e){var t=XD(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&YD(n.ownerDocument.documentElement,n)){if(r!==null&&vS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=r.end===void 0?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=xE(n,s);var o=xE(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var GH=Zs&&"documentMode"in document&&11>=document.documentMode,Ou=null,Yj=null,ph=null,Xj=!1;function yE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xj||Ou==null||Ou!==vv(r)||(r=Ou,"selectionStart"in r&&vS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ph&&Lh(ph,r)||(ph=r,r=kv(Yj,"onSelect"),0<r.length&&(t=new mS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ou)))}function eg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Iu={animationend:eg("Animation","AnimationEnd"),animationiteration:eg("Animation","AnimationIteration"),animationstart:eg("Animation","AnimationStart"),transitionend:eg("Transition","TransitionEnd")},M0={},JD={};Zs&&(JD=document.createElement("div").style,"AnimationEvent"in window||(delete Iu.animationend.animation,delete Iu.animationiteration.animation,delete Iu.animationstart.animation),"TransitionEvent"in window||delete Iu.transitionend.transition);function hy(e){if(M0[e])return M0[e];if(!Iu[e])return e;var t=Iu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in JD)return M0[e]=t[n];return e}var QD=hy("animationend"),ZD=hy("animationiteration"),e$=hy("animationstart"),t$=hy("transitionend"),n$=new Map,bE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yl(e,t){n$.set(e,t),qc(t,[e])}for(var D0=0;D0<bE.length;D0++){var $0=bE[D0],YH=$0.toLowerCase(),XH=$0[0].toUpperCase()+$0.slice(1);yl(YH,"on"+XH)}yl(QD,"onAnimationEnd");yl(ZD,"onAnimationIteration");yl(e$,"onAnimationStart");yl("dblclick","onDoubleClick");yl("focusin","onFocus");yl("focusout","onBlur");yl(t$,"onTransitionEnd");md("onMouseEnter",["mouseout","mouseover"]);md("onMouseLeave",["mouseout","mouseover"]);md("onPointerEnter",["pointerout","pointerover"]);md("onPointerLeave",["pointerout","pointerover"]);qc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qc("onBeforeInput",["compositionend","keypress","textInput","paste"]);qc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ah="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JH=new Set("cancel close invalid load scroll toggle".split(" ").concat(ah));function wE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Y9(r,t,void 0,e),e.currentTarget=null}function r$(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;wE(a,l,u),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;wE(a,l,u),s=c}}}if(yv)throw e=Hj,yv=!1,Hj=null,e}function Pn(e,t){var n=t[t1];n===void 0&&(n=t[t1]=new Set);var r=e+"__bubble";n.has(r)||(a$(t,e,2,!1),n.add(r))}function L0(e,t,n){var r=0;t&&(r|=4),a$(n,e,r,t)}var tg="_reactListening"+Math.random().toString(36).slice(2);function Fh(e){if(!e[tg]){e[tg]=!0,dD.forEach(function(n){n!=="selectionchange"&&(JH.has(n)||L0(n,!1,e),L0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tg]||(t[tg]=!0,L0("selectionchange",!1,t))}}function a$(e,t,n,r){switch(UD(t)){case 1:var a=dH;break;case 4:a=fH;break;default:a=fS}n=a.bind(null,t,n,e),a=void 0,!Wj||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function F0(e,t,n,r,a){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=nc(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}CD(function(){var u=s,f=lS(n),d=[];e:{var h=n$.get(e);if(h!==void 0){var m=mS,g=e;switch(e){case"keypress":if(Qg(n)===0)break e;case"keydown":case"keyup":m=CH;break;case"focusin":g="focus",m=O0;break;case"focusout":g="blur",m=O0;break;case"beforeblur":case"afterblur":m=O0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=cE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=pH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=PH;break;case QD:case ZD:case e$:m=xH;break;case t$:m=OH;break;case"scroll":m=hH;break;case"wheel":m=RH;break;case"copy":case"cut":case"paste":m=bH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=dE}var v=(t&4)!==0,x=!v&&e==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var b=u,w;b!==null;){w=b;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,y!==null&&(j=Ih(b,y),j!=null&&v.push(Bh(b,j,w)))),x)break;b=b.return}0<v.length&&(h=new m(h,g,null,n,f),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==zj&&(g=n.relatedTarget||n.fromElement)&&(nc(g)||g[eo]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?nc(g):null,g!==null&&(x=Wc(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=cE,j="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=dE,j="onPointerLeave",y="onPointerEnter",b="pointer"),x=m==null?h:Ru(m),w=g==null?h:Ru(g),h=new v(j,b+"leave",m,n,f),h.target=x,h.relatedTarget=w,j=null,nc(f)===u&&(v=new v(y,b+"enter",g,n,f),v.target=w,v.relatedTarget=x,j=v),x=j,m&&g)t:{for(v=m,y=g,b=0,w=v;w;w=au(w))b++;for(w=0,j=y;j;j=au(j))w++;for(;0<b-w;)v=au(v),b--;for(;0<w-b;)y=au(y),w--;for(;b--;){if(v===y||y!==null&&v===y.alternate)break t;v=au(v),y=au(y)}v=null}else v=null;m!==null&&jE(d,h,m,v,!1),g!==null&&x!==null&&jE(d,x,g,v,!0)}}e:{if(h=u?Ru(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var k=UH;else if(mE(h))if(KD)k=HH;else{k=qH;var _=zH}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=WH);if(k&&(k=k(e,u))){VD(d,k,n,f);break e}_&&_(e,h,u),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&$j(h,"number",h.value)}switch(_=u?Ru(u):window,e){case"focusin":(mE(_)||_.contentEditable==="true")&&(Ou=_,Yj=u,ph=null);break;case"focusout":ph=Yj=Ou=null;break;case"mousedown":Xj=!0;break;case"contextmenu":case"mouseup":case"dragend":Xj=!1,yE(d,n,f);break;case"selectionchange":if(GH)break;case"keydown":case"keyup":yE(d,n,f)}var S;if(gS)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Tu?WD(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(qD&&n.locale!=="ko"&&(Tu||A!=="onCompositionStart"?A==="onCompositionEnd"&&Tu&&(S=zD()):(Go=f,hS="value"in Go?Go.value:Go.textContent,Tu=!0)),_=kv(u,A),0<_.length&&(A=new uE(A,e,null,n,f),d.push({event:A,listeners:_}),S?A.data=S:(S=HD(n),S!==null&&(A.data=S)))),(S=DH?$H(e,n):LH(e,n))&&(u=kv(u,"onBeforeInput"),0<u.length&&(f=new uE("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=S))}r$(d,t)})}function Bh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function kv(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Ih(e,n),s!=null&&r.unshift(Bh(e,s,a)),s=Ih(e,t),s!=null&&r.push(Bh(e,s,a))),e=e.return}return r}function au(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function jE(e,t,n,r,a){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,a?(c=Ih(n,s),c!=null&&o.unshift(Bh(n,c,l))):a||(c=Ih(n,s),c!=null&&o.push(Bh(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var QH=/\r\n?/g,ZH=/\u0000|\uFFFD/g;function _E(e){return(typeof e=="string"?e:""+e).replace(QH,`
`).replace(ZH,"")}function ng(e,t,n){if(t=_E(t),_E(e)!==t&&n)throw Error(Pe(425))}function Sv(){}var Jj=null,Qj=null;function Zj(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var e1=typeof setTimeout=="function"?setTimeout:void 0,e7=typeof clearTimeout=="function"?clearTimeout:void 0,kE=typeof Promise=="function"?Promise:void 0,t7=typeof queueMicrotask=="function"?queueMicrotask:typeof kE<"u"?function(e){return kE.resolve(null).then(e).catch(n7)}:e1;function n7(e){setTimeout(function(){throw e})}function B0(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Dh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Dh(t)}function tl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function SE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Qd=Math.random().toString(36).slice(2),rs="__reactFiber$"+Qd,Uh="__reactProps$"+Qd,eo="__reactContainer$"+Qd,t1="__reactEvents$"+Qd,r7="__reactListeners$"+Qd,a7="__reactHandles$"+Qd;function nc(e){var t=e[rs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[eo]||n[rs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=SE(e);e!==null;){if(n=e[rs])return n;e=SE(e)}return t}e=n,n=e.parentNode}return null}function rp(e){return e=e[rs]||e[eo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ru(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pe(33))}function my(e){return e[Uh]||null}var n1=[],Mu=-1;function bl(e){return{current:e}}function In(e){0>Mu||(e.current=n1[Mu],n1[Mu]=null,Mu--)}function Sn(e,t){Mu++,n1[Mu]=e.current,e.current=t}var dl={},Hr=bl(dl),_a=bl(!1),yc=dl;function pd(e,t){var n=e.type.contextTypes;if(!n)return dl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in n)a[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ka(e){return e=e.childContextTypes,e!=null}function Nv(){In(_a),In(Hr)}function NE(e,t,n){if(Hr.current!==dl)throw Error(Pe(168));Sn(Hr,t),Sn(_a,n)}function i$(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Pe(108,z9(e)||"Unknown",a));return zn({},n,r)}function Cv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dl,yc=Hr.current,Sn(Hr,e),Sn(_a,_a.current),!0}function CE(e,t,n){var r=e.stateNode;if(!r)throw Error(Pe(169));n?(e=i$(e,t,yc),r.__reactInternalMemoizedMergedChildContext=e,In(_a),In(Hr),Sn(Hr,e)):In(_a),Sn(_a,n)}var Ms=null,py=!1,U0=!1;function s$(e){Ms===null?Ms=[e]:Ms.push(e)}function i7(e){py=!0,s$(e)}function wl(){if(!U0&&Ms!==null){U0=!0;var e=0,t=pn;try{var n=Ms;for(pn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ms=null,py=!1}catch(a){throw Ms!==null&&(Ms=Ms.slice(e+1)),TD(cS,wl),a}finally{pn=t,U0=!1}}return null}var Du=[],$u=0,Av=null,Ev=0,ri=[],ai=0,bc=null,Ls=1,Fs="";function Wl(e,t){Du[$u++]=Ev,Du[$u++]=Av,Av=e,Ev=t}function o$(e,t,n){ri[ai++]=Ls,ri[ai++]=Fs,ri[ai++]=bc,bc=e;var r=Ls;e=Fs;var a=32-Li(r)-1;r&=~(1<<a),n+=1;var s=32-Li(t)+a;if(30<s){var o=a-a%5;s=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ls=1<<32-Li(t)+a|n<<a|r,Fs=s+e}else Ls=1<<s|n<<a|r,Fs=e}function xS(e){e.return!==null&&(Wl(e,1),o$(e,1,0))}function yS(e){for(;e===Av;)Av=Du[--$u],Du[$u]=null,Ev=Du[--$u],Du[$u]=null;for(;e===bc;)bc=ri[--ai],ri[ai]=null,Fs=ri[--ai],ri[ai]=null,Ls=ri[--ai],ri[ai]=null}var Ba=null,Fa=null,$n=!1,Ii=null;function l$(e,t){var n=oi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function AE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ba=e,Fa=tl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ba=e,Fa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=bc!==null?{id:Ls,overflow:Fs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=oi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ba=e,Fa=null,!0):!1;default:return!1}}function r1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function a1(e){if($n){var t=Fa;if(t){var n=t;if(!AE(e,t)){if(r1(e))throw Error(Pe(418));t=tl(n.nextSibling);var r=Ba;t&&AE(e,t)?l$(r,n):(e.flags=e.flags&-4097|2,$n=!1,Ba=e)}}else{if(r1(e))throw Error(Pe(418));e.flags=e.flags&-4097|2,$n=!1,Ba=e}}}function EE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ba=e}function rg(e){if(e!==Ba)return!1;if(!$n)return EE(e),$n=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zj(e.type,e.memoizedProps)),t&&(t=Fa)){if(r1(e))throw c$(),Error(Pe(418));for(;t;)l$(e,t),t=tl(t.nextSibling)}if(EE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Fa=tl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Fa=null}}else Fa=Ba?tl(e.stateNode.nextSibling):null;return!0}function c$(){for(var e=Fa;e;)e=tl(e.nextSibling)}function gd(){Fa=Ba=null,$n=!1}function bS(e){Ii===null?Ii=[e]:Ii.push(e)}var s7=fo.ReactCurrentBatchConfig;function Ef(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Pe(309));var r=n.stateNode}if(!r)throw Error(Pe(147,e));var a=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Pe(284));if(!n._owner)throw Error(Pe(290,e))}return e}function ag(e,t){throw e=Object.prototype.toString.call(t),Error(Pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function PE(e){var t=e._init;return t(e._payload)}function u$(e){function t(y,b){if(e){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function a(y,b){return y=il(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,b,w,j){return b===null||b.tag!==6?(b=G0(w,y.mode,j),b.return=y,b):(b=a(b,w),b.return=y,b)}function c(y,b,w,j){var k=w.type;return k===Pu?f(y,b,w.props.children,j,w.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Mo&&PE(k)===b.type)?(j=a(b,w.props),j.ref=Ef(y,b,w),j.return=y,j):(j=iv(w.type,w.key,w.props,null,y.mode,j),j.ref=Ef(y,b,w),j.return=y,j)}function u(y,b,w,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=Y0(w,y.mode,j),b.return=y,b):(b=a(b,w.children||[]),b.return=y,b)}function f(y,b,w,j,k){return b===null||b.tag!==7?(b=gc(w,y.mode,j,k),b.return=y,b):(b=a(b,w),b.return=y,b)}function d(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=G0(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Kp:return w=iv(b.type,b.key,b.props,null,y.mode,w),w.ref=Ef(y,null,b),w.return=y,w;case Eu:return b=Y0(b,y.mode,w),b.return=y,b;case Mo:var j=b._init;return d(y,j(b._payload),w)}if(nh(b)||kf(b))return b=gc(b,y.mode,w,null),b.return=y,b;ag(y,b)}return null}function h(y,b,w,j){var k=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:l(y,b,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Kp:return w.key===k?c(y,b,w,j):null;case Eu:return w.key===k?u(y,b,w,j):null;case Mo:return k=w._init,h(y,b,k(w._payload),j)}if(nh(w)||kf(w))return k!==null?null:f(y,b,w,j,null);ag(y,w)}return null}function m(y,b,w,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return y=y.get(w)||null,l(b,y,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Kp:return y=y.get(j.key===null?w:j.key)||null,c(b,y,j,k);case Eu:return y=y.get(j.key===null?w:j.key)||null,u(b,y,j,k);case Mo:var _=j._init;return m(y,b,w,_(j._payload),k)}if(nh(j)||kf(j))return y=y.get(w)||null,f(b,y,j,k,null);ag(b,j)}return null}function g(y,b,w,j){for(var k=null,_=null,S=b,A=b=0,N=null;S!==null&&A<w.length;A++){S.index>A?(N=S,S=null):N=S.sibling;var T=h(y,S,w[A],j);if(T===null){S===null&&(S=N);break}e&&S&&T.alternate===null&&t(y,S),b=s(T,b,A),_===null?k=T:_.sibling=T,_=T,S=N}if(A===w.length)return n(y,S),$n&&Wl(y,A),k;if(S===null){for(;A<w.length;A++)S=d(y,w[A],j),S!==null&&(b=s(S,b,A),_===null?k=S:_.sibling=S,_=S);return $n&&Wl(y,A),k}for(S=r(y,S);A<w.length;A++)N=m(S,y,A,w[A],j),N!==null&&(e&&N.alternate!==null&&S.delete(N.key===null?A:N.key),b=s(N,b,A),_===null?k=N:_.sibling=N,_=N);return e&&S.forEach(function(I){return t(y,I)}),$n&&Wl(y,A),k}function v(y,b,w,j){var k=kf(w);if(typeof k!="function")throw Error(Pe(150));if(w=k.call(w),w==null)throw Error(Pe(151));for(var _=k=null,S=b,A=b=0,N=null,T=w.next();S!==null&&!T.done;A++,T=w.next()){S.index>A?(N=S,S=null):N=S.sibling;var I=h(y,S,T.value,j);if(I===null){S===null&&(S=N);break}e&&S&&I.alternate===null&&t(y,S),b=s(I,b,A),_===null?k=I:_.sibling=I,_=I,S=N}if(T.done)return n(y,S),$n&&Wl(y,A),k;if(S===null){for(;!T.done;A++,T=w.next())T=d(y,T.value,j),T!==null&&(b=s(T,b,A),_===null?k=T:_.sibling=T,_=T);return $n&&Wl(y,A),k}for(S=r(y,S);!T.done;A++,T=w.next())T=m(S,y,A,T.value,j),T!==null&&(e&&T.alternate!==null&&S.delete(T.key===null?A:T.key),b=s(T,b,A),_===null?k=T:_.sibling=T,_=T);return e&&S.forEach(function(F){return t(y,F)}),$n&&Wl(y,A),k}function x(y,b,w,j){if(typeof w=="object"&&w!==null&&w.type===Pu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Kp:e:{for(var k=w.key,_=b;_!==null;){if(_.key===k){if(k=w.type,k===Pu){if(_.tag===7){n(y,_.sibling),b=a(_,w.props.children),b.return=y,y=b;break e}}else if(_.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Mo&&PE(k)===_.type){n(y,_.sibling),b=a(_,w.props),b.ref=Ef(y,_,w),b.return=y,y=b;break e}n(y,_);break}else t(y,_);_=_.sibling}w.type===Pu?(b=gc(w.props.children,y.mode,j,w.key),b.return=y,y=b):(j=iv(w.type,w.key,w.props,null,y.mode,j),j.ref=Ef(y,b,w),j.return=y,y=j)}return o(y);case Eu:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(y,b.sibling),b=a(b,w.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else t(y,b);b=b.sibling}b=Y0(w,y.mode,j),b.return=y,y=b}return o(y);case Mo:return _=w._init,x(y,b,_(w._payload),j)}if(nh(w))return g(y,b,w,j);if(kf(w))return v(y,b,w,j);ag(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(y,b.sibling),b=a(b,w),b.return=y,y=b):(n(y,b),b=G0(w,y.mode,j),b.return=y,y=b),o(y)):n(y,b)}return x}var vd=u$(!0),d$=u$(!1),Pv=bl(null),Tv=null,Lu=null,wS=null;function jS(){wS=Lu=Tv=null}function _S(e){var t=Pv.current;In(Pv),e._currentValue=t}function i1(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yu(e,t){Tv=e,wS=Lu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ya=!0),e.firstContext=null)}function hi(e){var t=e._currentValue;if(wS!==e)if(e={context:e,memoizedValue:t,next:null},Lu===null){if(Tv===null)throw Error(Pe(308));Lu=e,Tv.dependencies={lanes:0,firstContext:e}}else Lu=Lu.next=e;return t}var rc=null;function kS(e){rc===null?rc=[e]:rc.push(e)}function f$(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,kS(t)):(n.next=a.next,a.next=n),t.interleaved=n,to(e,r)}function to(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Do=!1;function SS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function h$(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function nl(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Qt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,to(e,n)}return a=r.interleaved,a===null?(t.next=t,kS(r)):(t.next=a.next,a.next=t),r.interleaved=t,to(e,n)}function Zg(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uS(e,n)}}function TE(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?a=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?a=s=t:s=s.next=t}else a=s=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ov(e,t,n,r){var a=e.updateQueue;Do=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(s!==null){var d=a.baseState;o=0,f=u=c=null,l=s;do{var h=l.lane,m=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(h=t,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=zn({},d,h);break e;case 2:Do=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=m,c=d):f=f.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(f===null&&(c=d),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else s===null&&(a.shared.lanes=0);jc|=o,e.lanes=o,e.memoizedState=d}}function OE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Pe(191,a));a.call(r)}}}var ap={},ds=bl(ap),zh=bl(ap),qh=bl(ap);function ac(e){if(e===ap)throw Error(Pe(174));return e}function NS(e,t){switch(Sn(qh,t),Sn(zh,e),Sn(ds,ap),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fj(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Fj(t,e)}In(ds),Sn(ds,t)}function xd(){In(ds),In(zh),In(qh)}function m$(e){ac(qh.current);var t=ac(ds.current),n=Fj(t,e.type);t!==n&&(Sn(zh,e),Sn(ds,n))}function CS(e){zh.current===e&&(In(ds),In(zh))}var Bn=bl(0);function Iv(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var z0=[];function AS(){for(var e=0;e<z0.length;e++)z0[e]._workInProgressVersionPrimary=null;z0.length=0}var ev=fo.ReactCurrentDispatcher,q0=fo.ReactCurrentBatchConfig,wc=0,Un=null,fr=null,yr=null,Rv=!1,gh=!1,Wh=0,o7=0;function Mr(){throw Error(Pe(321))}function ES(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zi(e[n],t[n]))return!1;return!0}function PS(e,t,n,r,a,s){if(wc=s,Un=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ev.current=e===null||e.memoizedState===null?d7:f7,e=n(r,a),gh){s=0;do{if(gh=!1,Wh=0,25<=s)throw Error(Pe(301));s+=1,yr=fr=null,t.updateQueue=null,ev.current=h7,e=n(r,a)}while(gh)}if(ev.current=Mv,t=fr!==null&&fr.next!==null,wc=0,yr=fr=Un=null,Rv=!1,t)throw Error(Pe(300));return e}function TS(){var e=Wh!==0;return Wh=0,e}function Ji(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yr===null?Un.memoizedState=yr=e:yr=yr.next=e,yr}function mi(){if(fr===null){var e=Un.alternate;e=e!==null?e.memoizedState:null}else e=fr.next;var t=yr===null?Un.memoizedState:yr.next;if(t!==null)yr=t,fr=e;else{if(e===null)throw Error(Pe(310));fr=e,e={memoizedState:fr.memoizedState,baseState:fr.baseState,baseQueue:fr.baseQueue,queue:fr.queue,next:null},yr===null?Un.memoizedState=yr=e:yr=yr.next=e}return yr}function Hh(e,t){return typeof t=="function"?t(e):t}function W0(e){var t=mi(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var r=fr,a=r.baseQueue,s=n.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}r.baseQueue=a=s,n.pending=null}if(a!==null){s=a.next,r=r.baseState;var l=o=null,c=null,u=s;do{var f=u.lane;if((wc&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=r):c=c.next=d,Un.lanes|=f,jc|=f}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=l,zi(r,t.memoizedState)||(ya=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do s=a.lane,Un.lanes|=s,jc|=s,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function H0(e){var t=mi(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do s=e(s,o.action),o=o.next;while(o!==a);zi(s,t.memoizedState)||(ya=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function p$(){}function g$(e,t){var n=Un,r=mi(),a=t(),s=!zi(r.memoizedState,a);if(s&&(r.memoizedState=a,ya=!0),r=r.queue,OS(y$.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||yr!==null&&yr.memoizedState.tag&1){if(n.flags|=2048,Vh(9,x$.bind(null,n,r,a,t),void 0,null),wr===null)throw Error(Pe(349));wc&30||v$(n,t,a)}return a}function v$(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Un.updateQueue,t===null?(t={lastEffect:null,stores:null},Un.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function x$(e,t,n,r){t.value=n,t.getSnapshot=r,b$(t)&&w$(e)}function y$(e,t,n){return n(function(){b$(t)&&w$(e)})}function b$(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zi(e,n)}catch{return!0}}function w$(e){var t=to(e,1);t!==null&&Fi(t,e,1,-1)}function IE(e){var t=Ji();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hh,lastRenderedState:e},t.queue=e,e=e.dispatch=u7.bind(null,Un,e),[t.memoizedState,e]}function Vh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Un.updateQueue,t===null?(t={lastEffect:null,stores:null},Un.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function j$(){return mi().memoizedState}function tv(e,t,n,r){var a=Ji();Un.flags|=e,a.memoizedState=Vh(1|t,n,void 0,r===void 0?null:r)}function gy(e,t,n,r){var a=mi();r=r===void 0?null:r;var s=void 0;if(fr!==null){var o=fr.memoizedState;if(s=o.destroy,r!==null&&ES(r,o.deps)){a.memoizedState=Vh(t,n,s,r);return}}Un.flags|=e,a.memoizedState=Vh(1|t,n,s,r)}function RE(e,t){return tv(8390656,8,e,t)}function OS(e,t){return gy(2048,8,e,t)}function _$(e,t){return gy(4,2,e,t)}function k$(e,t){return gy(4,4,e,t)}function S$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function N$(e,t,n){return n=n!=null?n.concat([e]):null,gy(4,4,S$.bind(null,t,e),n)}function IS(){}function C$(e,t){var n=mi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ES(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function A$(e,t){var n=mi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ES(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function E$(e,t,n){return wc&21?(zi(n,t)||(n=RD(),Un.lanes|=n,jc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ya=!0),e.memoizedState=n)}function l7(e,t){var n=pn;pn=n!==0&&4>n?n:4,e(!0);var r=q0.transition;q0.transition={};try{e(!1),t()}finally{pn=n,q0.transition=r}}function P$(){return mi().memoizedState}function c7(e,t,n){var r=al(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},T$(e))O$(t,n);else if(n=f$(e,t,n,r),n!==null){var a=ia();Fi(n,e,r,a),I$(n,t,r)}}function u7(e,t,n){var r=al(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(T$(e))O$(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(a.hasEagerState=!0,a.eagerState=l,zi(l,o)){var c=t.interleaved;c===null?(a.next=a,kS(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=f$(e,t,a,r),n!==null&&(a=ia(),Fi(n,e,r,a),I$(n,t,r))}}function T$(e){var t=e.alternate;return e===Un||t!==null&&t===Un}function O$(e,t){gh=Rv=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function I$(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uS(e,n)}}var Mv={readContext:hi,useCallback:Mr,useContext:Mr,useEffect:Mr,useImperativeHandle:Mr,useInsertionEffect:Mr,useLayoutEffect:Mr,useMemo:Mr,useReducer:Mr,useRef:Mr,useState:Mr,useDebugValue:Mr,useDeferredValue:Mr,useTransition:Mr,useMutableSource:Mr,useSyncExternalStore:Mr,useId:Mr,unstable_isNewReconciler:!1},d7={readContext:hi,useCallback:function(e,t){return Ji().memoizedState=[e,t===void 0?null:t],e},useContext:hi,useEffect:RE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,tv(4194308,4,S$.bind(null,t,e),n)},useLayoutEffect:function(e,t){return tv(4194308,4,e,t)},useInsertionEffect:function(e,t){return tv(4,2,e,t)},useMemo:function(e,t){var n=Ji();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ji();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=c7.bind(null,Un,e),[r.memoizedState,e]},useRef:function(e){var t=Ji();return e={current:e},t.memoizedState=e},useState:IE,useDebugValue:IS,useDeferredValue:function(e){return Ji().memoizedState=e},useTransition:function(){var e=IE(!1),t=e[0];return e=l7.bind(null,e[1]),Ji().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Un,a=Ji();if($n){if(n===void 0)throw Error(Pe(407));n=n()}else{if(n=t(),wr===null)throw Error(Pe(349));wc&30||v$(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,RE(y$.bind(null,r,s,e),[e]),r.flags|=2048,Vh(9,x$.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ji(),t=wr.identifierPrefix;if($n){var n=Fs,r=Ls;n=(r&~(1<<32-Li(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Wh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=o7++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},f7={readContext:hi,useCallback:C$,useContext:hi,useEffect:OS,useImperativeHandle:N$,useInsertionEffect:_$,useLayoutEffect:k$,useMemo:A$,useReducer:W0,useRef:j$,useState:function(){return W0(Hh)},useDebugValue:IS,useDeferredValue:function(e){var t=mi();return E$(t,fr.memoizedState,e)},useTransition:function(){var e=W0(Hh)[0],t=mi().memoizedState;return[e,t]},useMutableSource:p$,useSyncExternalStore:g$,useId:P$,unstable_isNewReconciler:!1},h7={readContext:hi,useCallback:C$,useContext:hi,useEffect:OS,useImperativeHandle:N$,useInsertionEffect:_$,useLayoutEffect:k$,useMemo:A$,useReducer:H0,useRef:j$,useState:function(){return H0(Hh)},useDebugValue:IS,useDeferredValue:function(e){var t=mi();return fr===null?t.memoizedState=e:E$(t,fr.memoizedState,e)},useTransition:function(){var e=H0(Hh)[0],t=mi().memoizedState;return[e,t]},useMutableSource:p$,useSyncExternalStore:g$,useId:P$,unstable_isNewReconciler:!1};function Si(e,t){if(e&&e.defaultProps){t=zn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function s1(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:zn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vy={isMounted:function(e){return(e=e._reactInternals)?Wc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ia(),a=al(e),s=Vs(r,a);s.payload=t,n!=null&&(s.callback=n),t=nl(e,s,a),t!==null&&(Fi(t,e,a,r),Zg(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ia(),a=al(e),s=Vs(r,a);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=nl(e,s,a),t!==null&&(Fi(t,e,a,r),Zg(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ia(),r=al(e),a=Vs(n,r);a.tag=2,t!=null&&(a.callback=t),t=nl(e,a,r),t!==null&&(Fi(t,e,r,n),Zg(t,e,r))}};function ME(e,t,n,r,a,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Lh(n,r)||!Lh(a,s):!0}function R$(e,t,n){var r=!1,a=dl,s=t.contextType;return typeof s=="object"&&s!==null?s=hi(s):(a=ka(t)?yc:Hr.current,r=t.contextTypes,s=(r=r!=null)?pd(e,a):dl),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vy,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function DE(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vy.enqueueReplaceState(t,t.state,null)}function o1(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},SS(e);var s=t.contextType;typeof s=="object"&&s!==null?a.context=hi(s):(s=ka(t)?yc:Hr.current,a.context=pd(e,s)),a.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(s1(e,t,s,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&vy.enqueueReplaceState(a,a.state,null),Ov(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function yd(e,t){try{var n="",r=t;do n+=U9(r),r=r.return;while(r);var a=n}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:a,digest:null}}function V0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function l1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var m7=typeof WeakMap=="function"?WeakMap:Map;function M$(e,t,n){n=Vs(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$v||($v=!0,x1=r),l1(e,t)},n}function D$(e,t,n){n=Vs(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){l1(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){l1(e,t),typeof r!="function"&&(rl===null?rl=new Set([this]):rl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function $E(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new m7;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=A7.bind(null,e,t,n),t.then(e,e))}function LE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function FE(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vs(-1,1),t.tag=2,nl(n,t,1))),n.lanes|=1),e)}var p7=fo.ReactCurrentOwner,ya=!1;function ea(e,t,n,r){t.child=e===null?d$(t,null,n,r):vd(t,e.child,n,r)}function BE(e,t,n,r,a){n=n.render;var s=t.ref;return Yu(t,a),r=PS(e,t,n,r,s,a),n=TS(),e!==null&&!ya?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,no(e,t,a)):($n&&n&&xS(t),t.flags|=1,ea(e,t,r,a),t.child)}function UE(e,t,n,r,a){if(e===null){var s=n.type;return typeof s=="function"&&!US(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,$$(e,t,s,r,a)):(e=iv(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&a)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Lh,n(o,r)&&e.ref===t.ref)return no(e,t,a)}return t.flags|=1,e=il(s,r),e.ref=t.ref,e.return=t,t.child=e}function $$(e,t,n,r,a){if(e!==null){var s=e.memoizedProps;if(Lh(s,r)&&e.ref===t.ref)if(ya=!1,t.pendingProps=r=s,(e.lanes&a)!==0)e.flags&131072&&(ya=!0);else return t.lanes=e.lanes,no(e,t,a)}return c1(e,t,n,r,a)}function L$(e,t,n){var r=t.pendingProps,a=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sn(Bu,Ra),Ra|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sn(Bu,Ra),Ra|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Sn(Bu,Ra),Ra|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Sn(Bu,Ra),Ra|=r;return ea(e,t,a,n),t.child}function F$(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function c1(e,t,n,r,a){var s=ka(n)?yc:Hr.current;return s=pd(t,s),Yu(t,a),n=PS(e,t,n,r,s,a),r=TS(),e!==null&&!ya?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,no(e,t,a)):($n&&r&&xS(t),t.flags|=1,ea(e,t,n,a),t.child)}function zE(e,t,n,r,a){if(ka(n)){var s=!0;Cv(t)}else s=!1;if(Yu(t,a),t.stateNode===null)nv(e,t),R$(t,n,r),o1(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=hi(u):(u=ka(n)?yc:Hr.current,u=pd(t,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&DE(t,o,r,u),Do=!1;var h=t.memoizedState;o.state=h,Ov(t,r,o,a),c=t.memoizedState,l!==r||h!==c||_a.current||Do?(typeof f=="function"&&(s1(t,n,f,r),c=t.memoizedState),(l=Do||ME(t,n,l,r,h,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,h$(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Si(t.type,l),o.props=u,d=t.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=hi(c):(c=ka(n)?yc:Hr.current,c=pd(t,c));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==c)&&DE(t,o,r,c),Do=!1,h=t.memoizedState,o.state=h,Ov(t,r,o,a);var g=t.memoizedState;l!==d||h!==g||_a.current||Do?(typeof m=="function"&&(s1(t,n,m,r),g=t.memoizedState),(u=Do||ME(t,n,u,r,h,g,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return u1(e,t,n,r,s,a)}function u1(e,t,n,r,a,s){F$(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&CE(t,n,!1),no(e,t,s);r=t.stateNode,p7.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=vd(t,e.child,null,s),t.child=vd(t,null,l,s)):ea(e,t,l,s),t.memoizedState=r.state,a&&CE(t,n,!0),t.child}function B$(e){var t=e.stateNode;t.pendingContext?NE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&NE(e,t.context,!1),NS(e,t.containerInfo)}function qE(e,t,n,r,a){return gd(),bS(a),t.flags|=256,ea(e,t,n,r),t.child}var d1={dehydrated:null,treeContext:null,retryLane:0};function f1(e){return{baseLanes:e,cachePool:null,transitions:null}}function U$(e,t,n){var r=t.pendingProps,a=Bn.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Sn(Bn,a&1),e===null)return a1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=by(o,r,0,null),e=gc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=f1(n),t.memoizedState=d1,e):RS(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return g7(e,t,o,r,l,a,n);if(s){s=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=il(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=il(l,s):(s=gc(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?f1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=d1,r}return s=e.child,e=s.sibling,r=il(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function RS(e,t){return t=by({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ig(e,t,n,r){return r!==null&&bS(r),vd(t,e.child,null,n),e=RS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function g7(e,t,n,r,a,s,o){if(n)return t.flags&256?(t.flags&=-257,r=V0(Error(Pe(422))),ig(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=by({mode:"visible",children:r.children},a,0,null),s=gc(s,a,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&vd(t,e.child,null,o),t.child.memoizedState=f1(o),t.memoizedState=d1,s);if(!(t.mode&1))return ig(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(Pe(419)),r=V0(s,r,void 0),ig(e,t,o,r)}if(l=(o&e.childLanes)!==0,ya||l){if(r=wr,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,to(e,a),Fi(r,e,a,-1))}return BS(),r=V0(Error(Pe(421))),ig(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=E7.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,Fa=tl(a.nextSibling),Ba=t,$n=!0,Ii=null,e!==null&&(ri[ai++]=Ls,ri[ai++]=Fs,ri[ai++]=bc,Ls=e.id,Fs=e.overflow,bc=t),t=RS(t,r.children),t.flags|=4096,t)}function WE(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),i1(e.return,t,n)}function K0(e,t,n,r,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function z$(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(ea(e,t,r.children,n),r=Bn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&WE(e,n,t);else if(e.tag===19)WE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Sn(Bn,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Iv(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),K0(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Iv(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}K0(t,!0,n,null,s);break;case"together":K0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function no(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pe(153));if(t.child!==null){for(e=t.child,n=il(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=il(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function v7(e,t,n){switch(t.tag){case 3:B$(t),gd();break;case 5:m$(t);break;case 1:ka(t.type)&&Cv(t);break;case 4:NS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Sn(Pv,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Sn(Bn,Bn.current&1),t.flags|=128,null):n&t.child.childLanes?U$(e,t,n):(Sn(Bn,Bn.current&1),e=no(e,t,n),e!==null?e.sibling:null);Sn(Bn,Bn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return z$(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sn(Bn,Bn.current),r)break;return null;case 22:case 23:return t.lanes=0,L$(e,t,n)}return no(e,t,n)}var q$,h1,W$,H$;q$=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};h1=function(){};W$=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ac(ds.current);var s=null;switch(n){case"input":a=Mj(e,a),r=Mj(e,r),s=[];break;case"select":a=zn({},a,{value:void 0}),r=zn({},r,{value:void 0}),s=[];break;case"textarea":a=Lj(e,a),r=Lj(e,r),s=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Sv)}Bj(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Th.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Th.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Pn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};H$=function(e,t,n,r){n!==r&&(t.flags|=4)};function Pf(e,t){if(!$n)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Dr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function x7(e,t,n){var r=t.pendingProps;switch(yS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(t),null;case 1:return ka(t.type)&&Nv(),Dr(t),null;case 3:return r=t.stateNode,xd(),In(_a),In(Hr),AS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(rg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ii!==null&&(w1(Ii),Ii=null))),h1(e,t),Dr(t),null;case 5:CS(t);var a=ac(qh.current);if(n=t.type,e!==null&&t.stateNode!=null)W$(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Pe(166));return Dr(t),null}if(e=ac(ds.current),rg(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[rs]=t,r[Uh]=s,e=(t.mode&1)!==0,n){case"dialog":Pn("cancel",r),Pn("close",r);break;case"iframe":case"object":case"embed":Pn("load",r);break;case"video":case"audio":for(a=0;a<ah.length;a++)Pn(ah[a],r);break;case"source":Pn("error",r);break;case"img":case"image":case"link":Pn("error",r),Pn("load",r);break;case"details":Pn("toggle",r);break;case"input":ZA(r,s),Pn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pn("invalid",r);break;case"textarea":tE(r,s),Pn("invalid",r)}Bj(n,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ng(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ng(r.textContent,l,e),a=["children",""+l]):Th.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Pn("scroll",r)}switch(n){case"input":Gp(r),eE(r,s,!0);break;case"textarea":Gp(r),nE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Sv)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=yD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[rs]=t,e[Uh]=r,q$(e,t,!1,!1),t.stateNode=e;e:{switch(o=Uj(n,r),n){case"dialog":Pn("cancel",e),Pn("close",e),a=r;break;case"iframe":case"object":case"embed":Pn("load",e),a=r;break;case"video":case"audio":for(a=0;a<ah.length;a++)Pn(ah[a],e);a=r;break;case"source":Pn("error",e),a=r;break;case"img":case"image":case"link":Pn("error",e),Pn("load",e),a=r;break;case"details":Pn("toggle",e),a=r;break;case"input":ZA(e,r),a=Mj(e,r),Pn("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=zn({},r,{value:void 0}),Pn("invalid",e);break;case"textarea":tE(e,r),a=Lj(e,r),Pn("invalid",e);break;default:a=r}Bj(n,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?jD(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&bD(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Oh(e,c):typeof c=="number"&&Oh(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Th.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Pn("scroll",e):c!=null&&aS(e,s,c,o))}switch(n){case"input":Gp(e),eE(e,r,!1);break;case"textarea":Gp(e),nE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ul(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Hu(e,!!r.multiple,s,!1):r.defaultValue!=null&&Hu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Sv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Dr(t),null;case 6:if(e&&t.stateNode!=null)H$(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Pe(166));if(n=ac(qh.current),ac(ds.current),rg(t)){if(r=t.stateNode,n=t.memoizedProps,r[rs]=t,(s=r.nodeValue!==n)&&(e=Ba,e!==null))switch(e.tag){case 3:ng(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ng(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rs]=t,t.stateNode=r}return Dr(t),null;case 13:if(In(Bn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($n&&Fa!==null&&t.mode&1&&!(t.flags&128))c$(),gd(),t.flags|=98560,s=!1;else if(s=rg(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Pe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Pe(317));s[rs]=t}else gd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Dr(t),s=!1}else Ii!==null&&(w1(Ii),Ii=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Bn.current&1?hr===0&&(hr=3):BS())),t.updateQueue!==null&&(t.flags|=4),Dr(t),null);case 4:return xd(),h1(e,t),e===null&&Fh(t.stateNode.containerInfo),Dr(t),null;case 10:return _S(t.type._context),Dr(t),null;case 17:return ka(t.type)&&Nv(),Dr(t),null;case 19:if(In(Bn),s=t.memoizedState,s===null)return Dr(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Pf(s,!1);else{if(hr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Iv(e),o!==null){for(t.flags|=128,Pf(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Sn(Bn,Bn.current&1|2),t.child}e=e.sibling}s.tail!==null&&Zn()>bd&&(t.flags|=128,r=!0,Pf(s,!1),t.lanes=4194304)}else{if(!r)if(e=Iv(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Pf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!$n)return Dr(t),null}else 2*Zn()-s.renderingStartTime>bd&&n!==1073741824&&(t.flags|=128,r=!0,Pf(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Zn(),t.sibling=null,n=Bn.current,Sn(Bn,r?n&1|2:n&1),t):(Dr(t),null);case 22:case 23:return FS(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ra&1073741824&&(Dr(t),t.subtreeFlags&6&&(t.flags|=8192)):Dr(t),null;case 24:return null;case 25:return null}throw Error(Pe(156,t.tag))}function y7(e,t){switch(yS(t),t.tag){case 1:return ka(t.type)&&Nv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xd(),In(_a),In(Hr),AS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return CS(t),null;case 13:if(In(Bn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pe(340));gd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return In(Bn),null;case 4:return xd(),null;case 10:return _S(t.type._context),null;case 22:case 23:return FS(),null;case 24:return null;default:return null}}var sg=!1,Fr=!1,b7=typeof WeakSet=="function"?WeakSet:Set,at=null;function Fu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Hn(e,t,r)}else n.current=null}function m1(e,t,n){try{n()}catch(r){Hn(e,t,r)}}var HE=!1;function w7(e,t){if(Jj=jv,e=XD(),vS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var m;d!==n||a!==0&&d.nodeType!==3||(l=o+a),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===e)break t;if(h===n&&++u===a&&(l=o),h===s&&++f===r&&(c=o),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qj={focusedElem:e,selectionRange:n},jv=!1,at=t;at!==null;)if(t=at,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,at=e;else for(;at!==null;){t=at;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Si(t.type,v),x);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pe(163))}}catch(j){Hn(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,at=e;break}at=t.return}return g=HE,HE=!1,g}function vh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,s!==void 0&&m1(t,n,s)}a=a.next}while(a!==r)}}function xy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function p1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function V$(e){var t=e.alternate;t!==null&&(e.alternate=null,V$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rs],delete t[Uh],delete t[t1],delete t[r7],delete t[a7])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function K$(e){return e.tag===5||e.tag===3||e.tag===4}function VE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||K$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function g1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Sv));else if(r!==4&&(e=e.child,e!==null))for(g1(e,t,n),e=e.sibling;e!==null;)g1(e,t,n),e=e.sibling}function v1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(v1(e,t,n),e=e.sibling;e!==null;)v1(e,t,n),e=e.sibling}var Cr=null,Pi=!1;function _o(e,t,n){for(n=n.child;n!==null;)G$(e,t,n),n=n.sibling}function G$(e,t,n){if(us&&typeof us.onCommitFiberUnmount=="function")try{us.onCommitFiberUnmount(uy,n)}catch{}switch(n.tag){case 5:Fr||Fu(n,t);case 6:var r=Cr,a=Pi;Cr=null,_o(e,t,n),Cr=r,Pi=a,Cr!==null&&(Pi?(e=Cr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Cr.removeChild(n.stateNode));break;case 18:Cr!==null&&(Pi?(e=Cr,n=n.stateNode,e.nodeType===8?B0(e.parentNode,n):e.nodeType===1&&B0(e,n),Dh(e)):B0(Cr,n.stateNode));break;case 4:r=Cr,a=Pi,Cr=n.stateNode.containerInfo,Pi=!0,_o(e,t,n),Cr=r,Pi=a;break;case 0:case 11:case 14:case 15:if(!Fr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&m1(n,t,o),a=a.next}while(a!==r)}_o(e,t,n);break;case 1:if(!Fr&&(Fu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Hn(n,t,l)}_o(e,t,n);break;case 21:_o(e,t,n);break;case 22:n.mode&1?(Fr=(r=Fr)||n.memoizedState!==null,_o(e,t,n),Fr=r):_o(e,t,n);break;default:_o(e,t,n)}}function KE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new b7),t.forEach(function(r){var a=P7.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function bi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Cr=l.stateNode,Pi=!1;break e;case 3:Cr=l.stateNode.containerInfo,Pi=!0;break e;case 4:Cr=l.stateNode.containerInfo,Pi=!0;break e}l=l.return}if(Cr===null)throw Error(Pe(160));G$(s,o,a),Cr=null,Pi=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Hn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Y$(t,e),t=t.sibling}function Y$(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bi(t,e),Xi(e),r&4){try{vh(3,e,e.return),xy(3,e)}catch(v){Hn(e,e.return,v)}try{vh(5,e,e.return)}catch(v){Hn(e,e.return,v)}}break;case 1:bi(t,e),Xi(e),r&512&&n!==null&&Fu(n,n.return);break;case 5:if(bi(t,e),Xi(e),r&512&&n!==null&&Fu(n,n.return),e.flags&32){var a=e.stateNode;try{Oh(a,"")}catch(v){Hn(e,e.return,v)}}if(r&4&&(a=e.stateNode,a!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&vD(a,s),Uj(l,o);var u=Uj(l,s);for(o=0;o<c.length;o+=2){var f=c[o],d=c[o+1];f==="style"?jD(a,d):f==="dangerouslySetInnerHTML"?bD(a,d):f==="children"?Oh(a,d):aS(a,f,d,u)}switch(l){case"input":Dj(a,s);break;case"textarea":xD(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Hu(a,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?Hu(a,!!s.multiple,s.defaultValue,!0):Hu(a,!!s.multiple,s.multiple?[]:"",!1))}a[Uh]=s}catch(v){Hn(e,e.return,v)}}break;case 6:if(bi(t,e),Xi(e),r&4){if(e.stateNode===null)throw Error(Pe(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(v){Hn(e,e.return,v)}}break;case 3:if(bi(t,e),Xi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Dh(t.containerInfo)}catch(v){Hn(e,e.return,v)}break;case 4:bi(t,e),Xi(e);break;case 13:bi(t,e),Xi(e),a=e.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||($S=Zn())),r&4&&KE(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(Fr=(u=Fr)||f,bi(t,e),Fr=u):bi(t,e),Xi(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(at=e,f=e.child;f!==null;){for(d=at=f;at!==null;){switch(h=at,m=h.child,h.tag){case 0:case 11:case 14:case 15:vh(4,h,h.return);break;case 1:Fu(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Hn(r,n,v)}}break;case 5:Fu(h,h.return);break;case 22:if(h.memoizedState!==null){YE(d);continue}}m!==null?(m.return=h,at=m):YE(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{a=d.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=wD("display",o))}catch(v){Hn(e,e.return,v)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){Hn(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bi(t,e),Xi(e),r&4&&KE(e);break;case 21:break;default:bi(t,e),Xi(e)}}function Xi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(K$(n)){var r=n;break e}n=n.return}throw Error(Pe(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Oh(a,""),r.flags&=-33);var s=VE(e);v1(e,s,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=VE(e);g1(e,l,o);break;default:throw Error(Pe(161))}}catch(c){Hn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function j7(e,t,n){at=e,X$(e)}function X$(e,t,n){for(var r=(e.mode&1)!==0;at!==null;){var a=at,s=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||sg;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Fr;l=sg;var u=Fr;if(sg=o,(Fr=c)&&!u)for(at=a;at!==null;)o=at,c=o.child,o.tag===22&&o.memoizedState!==null?XE(a):c!==null?(c.return=o,at=c):XE(a);for(;s!==null;)at=s,X$(s),s=s.sibling;at=a,sg=l,Fr=u}GE(e)}else a.subtreeFlags&8772&&s!==null?(s.return=a,at=s):GE(e)}}function GE(e){for(;at!==null;){var t=at;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Fr||xy(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Fr)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Si(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&OE(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}OE(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Dh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pe(163))}Fr||t.flags&512&&p1(t)}catch(h){Hn(t,t.return,h)}}if(t===e){at=null;break}if(n=t.sibling,n!==null){n.return=t.return,at=n;break}at=t.return}}function YE(e){for(;at!==null;){var t=at;if(t===e){at=null;break}var n=t.sibling;if(n!==null){n.return=t.return,at=n;break}at=t.return}}function XE(e){for(;at!==null;){var t=at;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xy(4,t)}catch(c){Hn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Hn(t,a,c)}}var s=t.return;try{p1(t)}catch(c){Hn(t,s,c)}break;case 5:var o=t.return;try{p1(t)}catch(c){Hn(t,o,c)}}}catch(c){Hn(t,t.return,c)}if(t===e){at=null;break}var l=t.sibling;if(l!==null){l.return=t.return,at=l;break}at=t.return}}var _7=Math.ceil,Dv=fo.ReactCurrentDispatcher,MS=fo.ReactCurrentOwner,ci=fo.ReactCurrentBatchConfig,Qt=0,wr=null,rr=null,Tr=0,Ra=0,Bu=bl(0),hr=0,Kh=null,jc=0,yy=0,DS=0,xh=null,pa=null,$S=0,bd=1/0,Is=null,$v=!1,x1=null,rl=null,og=!1,Yo=null,Lv=0,yh=0,y1=null,rv=-1,av=0;function ia(){return Qt&6?Zn():rv!==-1?rv:rv=Zn()}function al(e){return e.mode&1?Qt&2&&Tr!==0?Tr&-Tr:s7.transition!==null?(av===0&&(av=RD()),av):(e=pn,e!==0||(e=window.event,e=e===void 0?16:UD(e.type)),e):1}function Fi(e,t,n,r){if(50<yh)throw yh=0,y1=null,Error(Pe(185));tp(e,n,r),(!(Qt&2)||e!==wr)&&(e===wr&&(!(Qt&2)&&(yy|=n),hr===4&&Fo(e,Tr)),Sa(e,r),n===1&&Qt===0&&!(t.mode&1)&&(bd=Zn()+500,py&&wl()))}function Sa(e,t){var n=e.callbackNode;sH(e,t);var r=wv(e,e===wr?Tr:0);if(r===0)n!==null&&iE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&iE(n),t===1)e.tag===0?i7(JE.bind(null,e)):s$(JE.bind(null,e)),t7(function(){!(Qt&6)&&wl()}),n=null;else{switch(MD(r)){case 1:n=cS;break;case 4:n=OD;break;case 16:n=bv;break;case 536870912:n=ID;break;default:n=bv}n=aL(n,J$.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function J$(e,t){if(rv=-1,av=0,Qt&6)throw Error(Pe(327));var n=e.callbackNode;if(Xu()&&e.callbackNode!==n)return null;var r=wv(e,e===wr?Tr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Fv(e,r);else{t=r;var a=Qt;Qt|=2;var s=Z$();(wr!==e||Tr!==t)&&(Is=null,bd=Zn()+500,pc(e,t));do try{N7();break}catch(l){Q$(e,l)}while(!0);jS(),Dv.current=s,Qt=a,rr!==null?t=0:(wr=null,Tr=0,t=hr)}if(t!==0){if(t===2&&(a=Vj(e),a!==0&&(r=a,t=b1(e,a))),t===1)throw n=Kh,pc(e,0),Fo(e,r),Sa(e,Zn()),n;if(t===6)Fo(e,r);else{if(a=e.current.alternate,!(r&30)&&!k7(a)&&(t=Fv(e,r),t===2&&(s=Vj(e),s!==0&&(r=s,t=b1(e,s))),t===1))throw n=Kh,pc(e,0),Fo(e,r),Sa(e,Zn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Pe(345));case 2:Hl(e,pa,Is);break;case 3:if(Fo(e,r),(r&130023424)===r&&(t=$S+500-Zn(),10<t)){if(wv(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){ia(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=e1(Hl.bind(null,e,pa,Is),t);break}Hl(e,pa,Is);break;case 4:if(Fo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Li(r);s=1<<o,o=t[o],o>a&&(a=o),r&=~s}if(r=a,r=Zn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_7(r/1960))-r,10<r){e.timeoutHandle=e1(Hl.bind(null,e,pa,Is),r);break}Hl(e,pa,Is);break;case 5:Hl(e,pa,Is);break;default:throw Error(Pe(329))}}}return Sa(e,Zn()),e.callbackNode===n?J$.bind(null,e):null}function b1(e,t){var n=xh;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),e=Fv(e,t),e!==2&&(t=pa,pa=n,t!==null&&w1(t)),e}function w1(e){pa===null?pa=e:pa.push.apply(pa,e)}function k7(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!zi(s(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fo(e,t){for(t&=~DS,t&=~yy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Li(t),r=1<<n;e[n]=-1,t&=~r}}function JE(e){if(Qt&6)throw Error(Pe(327));Xu();var t=wv(e,0);if(!(t&1))return Sa(e,Zn()),null;var n=Fv(e,t);if(e.tag!==0&&n===2){var r=Vj(e);r!==0&&(t=r,n=b1(e,r))}if(n===1)throw n=Kh,pc(e,0),Fo(e,t),Sa(e,Zn()),n;if(n===6)throw Error(Pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hl(e,pa,Is),Sa(e,Zn()),null}function LS(e,t){var n=Qt;Qt|=1;try{return e(t)}finally{Qt=n,Qt===0&&(bd=Zn()+500,py&&wl())}}function _c(e){Yo!==null&&Yo.tag===0&&!(Qt&6)&&Xu();var t=Qt;Qt|=1;var n=ci.transition,r=pn;try{if(ci.transition=null,pn=1,e)return e()}finally{pn=r,ci.transition=n,Qt=t,!(Qt&6)&&wl()}}function FS(){Ra=Bu.current,In(Bu)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,e7(n)),rr!==null)for(n=rr.return;n!==null;){var r=n;switch(yS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nv();break;case 3:xd(),In(_a),In(Hr),AS();break;case 5:CS(r);break;case 4:xd();break;case 13:In(Bn);break;case 19:In(Bn);break;case 10:_S(r.type._context);break;case 22:case 23:FS()}n=n.return}if(wr=e,rr=e=il(e.current,null),Tr=Ra=t,hr=0,Kh=null,DS=yy=jc=0,pa=xh=null,rc!==null){for(t=0;t<rc.length;t++)if(n=rc[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=a,r.next=o}n.pending=r}rc=null}return e}function Q$(e,t){do{var n=rr;try{if(jS(),ev.current=Mv,Rv){for(var r=Un.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Rv=!1}if(wc=0,yr=fr=Un=null,gh=!1,Wh=0,MS.current=null,n===null||n.return===null){hr=1,Kh=t,rr=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Tr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=LE(o);if(m!==null){m.flags&=-257,FE(m,o,l,s,t),m.mode&1&&$E(s,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){$E(s,u,t),BS();break e}c=Error(Pe(426))}}else if($n&&l.mode&1){var x=LE(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),FE(x,o,l,s,t),bS(yd(c,l));break e}}s=c=yd(c,l),hr!==4&&(hr=2),xh===null?xh=[s]:xh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=M$(s,c,t);TE(s,y);break e;case 1:l=c;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(rl===null||!rl.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var j=D$(s,l,t);TE(s,j);break e}}s=s.return}while(s!==null)}tL(n)}catch(k){t=k,rr===n&&n!==null&&(rr=n=n.return);continue}break}while(!0)}function Z$(){var e=Dv.current;return Dv.current=Mv,e===null?Mv:e}function BS(){(hr===0||hr===3||hr===2)&&(hr=4),wr===null||!(jc&268435455)&&!(yy&268435455)||Fo(wr,Tr)}function Fv(e,t){var n=Qt;Qt|=2;var r=Z$();(wr!==e||Tr!==t)&&(Is=null,pc(e,t));do try{S7();break}catch(a){Q$(e,a)}while(!0);if(jS(),Qt=n,Dv.current=r,rr!==null)throw Error(Pe(261));return wr=null,Tr=0,hr}function S7(){for(;rr!==null;)eL(rr)}function N7(){for(;rr!==null&&!J9();)eL(rr)}function eL(e){var t=rL(e.alternate,e,Ra);e.memoizedProps=e.pendingProps,t===null?tL(e):rr=t,MS.current=null}function tL(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=y7(n,t),n!==null){n.flags&=32767,rr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{hr=6,rr=null;return}}else if(n=x7(n,t,Ra),n!==null){rr=n;return}if(t=t.sibling,t!==null){rr=t;return}rr=t=e}while(t!==null);hr===0&&(hr=5)}function Hl(e,t,n){var r=pn,a=ci.transition;try{ci.transition=null,pn=1,C7(e,t,n,r)}finally{ci.transition=a,pn=r}return null}function C7(e,t,n,r){do Xu();while(Yo!==null);if(Qt&6)throw Error(Pe(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Pe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(oH(e,s),e===wr&&(rr=wr=null,Tr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||og||(og=!0,aL(bv,function(){return Xu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ci.transition,ci.transition=null;var o=pn;pn=1;var l=Qt;Qt|=4,MS.current=null,w7(e,n),Y$(n,e),KH(Qj),jv=!!Jj,Qj=Jj=null,e.current=n,j7(n),Q9(),Qt=l,pn=o,ci.transition=s}else e.current=n;if(og&&(og=!1,Yo=e,Lv=a),s=e.pendingLanes,s===0&&(rl=null),tH(n.stateNode),Sa(e,Zn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if($v)throw $v=!1,e=x1,x1=null,e;return Lv&1&&e.tag!==0&&Xu(),s=e.pendingLanes,s&1?e===y1?yh++:(yh=0,y1=e):yh=0,wl(),null}function Xu(){if(Yo!==null){var e=MD(Lv),t=ci.transition,n=pn;try{if(ci.transition=null,pn=16>e?16:e,Yo===null)var r=!1;else{if(e=Yo,Yo=null,Lv=0,Qt&6)throw Error(Pe(331));var a=Qt;for(Qt|=4,at=e.current;at!==null;){var s=at,o=s.child;if(at.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(at=u;at!==null;){var f=at;switch(f.tag){case 0:case 11:case 15:vh(8,f,s)}var d=f.child;if(d!==null)d.return=f,at=d;else for(;at!==null;){f=at;var h=f.sibling,m=f.return;if(V$(f),f===u){at=null;break}if(h!==null){h.return=m,at=h;break}at=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}at=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,at=o;else e:for(;at!==null;){if(s=at,s.flags&2048)switch(s.tag){case 0:case 11:case 15:vh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,at=y;break e}at=s.return}}var b=e.current;for(at=b;at!==null;){o=at;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,at=w;else e:for(o=b;at!==null;){if(l=at,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xy(9,l)}}catch(k){Hn(l,l.return,k)}if(l===o){at=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,at=j;break e}at=l.return}}if(Qt=a,wl(),us&&typeof us.onPostCommitFiberRoot=="function")try{us.onPostCommitFiberRoot(uy,e)}catch{}r=!0}return r}finally{pn=n,ci.transition=t}}return!1}function QE(e,t,n){t=yd(n,t),t=M$(e,t,1),e=nl(e,t,1),t=ia(),e!==null&&(tp(e,1,t),Sa(e,t))}function Hn(e,t,n){if(e.tag===3)QE(e,e,n);else for(;t!==null;){if(t.tag===3){QE(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rl===null||!rl.has(r))){e=yd(n,e),e=D$(t,e,1),t=nl(t,e,1),e=ia(),t!==null&&(tp(t,1,e),Sa(t,e));break}}t=t.return}}function A7(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ia(),e.pingedLanes|=e.suspendedLanes&n,wr===e&&(Tr&n)===n&&(hr===4||hr===3&&(Tr&130023424)===Tr&&500>Zn()-$S?pc(e,0):DS|=n),Sa(e,t)}function nL(e,t){t===0&&(e.mode&1?(t=Jp,Jp<<=1,!(Jp&130023424)&&(Jp=4194304)):t=1);var n=ia();e=to(e,t),e!==null&&(tp(e,t,n),Sa(e,n))}function E7(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),nL(e,n)}function P7(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Pe(314))}r!==null&&r.delete(t),nL(e,n)}var rL;rL=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_a.current)ya=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ya=!1,v7(e,t,n);ya=!!(e.flags&131072)}else ya=!1,$n&&t.flags&1048576&&o$(t,Ev,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;nv(e,t),e=t.pendingProps;var a=pd(t,Hr.current);Yu(t,n),a=PS(null,t,r,e,a,n);var s=TS();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ka(r)?(s=!0,Cv(t)):s=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,SS(t),a.updater=vy,t.stateNode=a,a._reactInternals=t,o1(t,r,e,n),t=u1(null,t,r,!0,s,n)):(t.tag=0,$n&&s&&xS(t),ea(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(nv(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=O7(r),e=Si(r,e),a){case 0:t=c1(null,t,r,e,n);break e;case 1:t=zE(null,t,r,e,n);break e;case 11:t=BE(null,t,r,e,n);break e;case 14:t=UE(null,t,r,Si(r.type,e),n);break e}throw Error(Pe(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Si(r,a),c1(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Si(r,a),zE(e,t,r,a,n);case 3:e:{if(B$(t),e===null)throw Error(Pe(387));r=t.pendingProps,s=t.memoizedState,a=s.element,h$(e,t),Ov(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){a=yd(Error(Pe(423)),t),t=qE(e,t,r,n,a);break e}else if(r!==a){a=yd(Error(Pe(424)),t),t=qE(e,t,r,n,a);break e}else for(Fa=tl(t.stateNode.containerInfo.firstChild),Ba=t,$n=!0,Ii=null,n=d$(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gd(),r===a){t=no(e,t,n);break e}ea(e,t,r,n)}t=t.child}return t;case 5:return m$(t),e===null&&a1(t),r=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,o=a.children,Zj(r,a)?o=null:s!==null&&Zj(r,s)&&(t.flags|=32),F$(e,t),ea(e,t,o,n),t.child;case 6:return e===null&&a1(t),null;case 13:return U$(e,t,n);case 4:return NS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=vd(t,null,r,n):ea(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Si(r,a),BE(e,t,r,a,n);case 7:return ea(e,t,t.pendingProps,n),t.child;case 8:return ea(e,t,t.pendingProps.children,n),t.child;case 12:return ea(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,Sn(Pv,r._currentValue),r._currentValue=o,s!==null)if(zi(s.value,o)){if(s.children===a.children&&!_a.current){t=no(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Vs(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),i1(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Pe(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),i1(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ea(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Yu(t,n),a=hi(a),r=r(a),t.flags|=1,ea(e,t,r,n),t.child;case 14:return r=t.type,a=Si(r,t.pendingProps),a=Si(r.type,a),UE(e,t,r,a,n);case 15:return $$(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Si(r,a),nv(e,t),t.tag=1,ka(r)?(e=!0,Cv(t)):e=!1,Yu(t,n),R$(t,r,a),o1(t,r,a,n),u1(null,t,r,!0,e,n);case 19:return z$(e,t,n);case 22:return L$(e,t,n)}throw Error(Pe(156,t.tag))};function aL(e,t){return TD(e,t)}function T7(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oi(e,t,n,r){return new T7(e,t,n,r)}function US(e){return e=e.prototype,!(!e||!e.isReactComponent)}function O7(e){if(typeof e=="function")return US(e)?1:0;if(e!=null){if(e=e.$$typeof,e===sS)return 11;if(e===oS)return 14}return 2}function il(e,t){var n=e.alternate;return n===null?(n=oi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function iv(e,t,n,r,a,s){var o=2;if(r=e,typeof e=="function")US(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Pu:return gc(n.children,a,s,t);case iS:o=8,a|=8;break;case Tj:return e=oi(12,n,t,a|2),e.elementType=Tj,e.lanes=s,e;case Oj:return e=oi(13,n,t,a),e.elementType=Oj,e.lanes=s,e;case Ij:return e=oi(19,n,t,a),e.elementType=Ij,e.lanes=s,e;case mD:return by(n,a,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fD:o=10;break e;case hD:o=9;break e;case sS:o=11;break e;case oS:o=14;break e;case Mo:o=16,r=null;break e}throw Error(Pe(130,e==null?e:typeof e,""))}return t=oi(o,n,t,a),t.elementType=e,t.type=r,t.lanes=s,t}function gc(e,t,n,r){return e=oi(7,e,r,t),e.lanes=n,e}function by(e,t,n,r){return e=oi(22,e,r,t),e.elementType=mD,e.lanes=n,e.stateNode={isHidden:!1},e}function G0(e,t,n){return e=oi(6,e,null,t),e.lanes=n,e}function Y0(e,t,n){return t=oi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function I7(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=E0(0),this.expirationTimes=E0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E0(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function zS(e,t,n,r,a,s,o,l,c){return e=new I7(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=oi(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},SS(s),e}function R7(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Eu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function iL(e){if(!e)return dl;e=e._reactInternals;e:{if(Wc(e)!==e||e.tag!==1)throw Error(Pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ka(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pe(171))}if(e.tag===1){var n=e.type;if(ka(n))return i$(e,n,t)}return t}function sL(e,t,n,r,a,s,o,l,c){return e=zS(n,r,!0,e,a,s,o,l,c),e.context=iL(null),n=e.current,r=ia(),a=al(n),s=Vs(r,a),s.callback=t??null,nl(n,s,a),e.current.lanes=a,tp(e,a,r),Sa(e,r),e}function wy(e,t,n,r){var a=t.current,s=ia(),o=al(a);return n=iL(n),t.context===null?t.context=n:t.pendingContext=n,t=Vs(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=nl(a,t,o),e!==null&&(Fi(e,a,o,s),Zg(e,a,o)),o}function Bv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ZE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qS(e,t){ZE(e,t),(e=e.alternate)&&ZE(e,t)}function M7(){return null}var oL=typeof reportError=="function"?reportError:function(e){console.error(e)};function WS(e){this._internalRoot=e}jy.prototype.render=WS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pe(409));wy(e,t,null,null)};jy.prototype.unmount=WS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_c(function(){wy(null,e,null,null)}),t[eo]=null}};function jy(e){this._internalRoot=e}jy.prototype.unstable_scheduleHydration=function(e){if(e){var t=LD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lo.length&&t!==0&&t<Lo[n].priority;n++);Lo.splice(n,0,e),n===0&&BD(e)}};function HS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _y(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function eP(){}function D7(e,t,n,r,a){if(a){if(typeof r=="function"){var s=r;r=function(){var u=Bv(o);s.call(u)}}var o=sL(t,r,e,0,null,!1,!1,"",eP);return e._reactRootContainer=o,e[eo]=o.current,Fh(e.nodeType===8?e.parentNode:e),_c(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var u=Bv(c);l.call(u)}}var c=zS(e,0,!1,null,null,!1,!1,"",eP);return e._reactRootContainer=c,e[eo]=c.current,Fh(e.nodeType===8?e.parentNode:e),_c(function(){wy(t,c,n,r)}),c}function ky(e,t,n,r,a){var s=n._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=Bv(o);l.call(c)}}wy(t,o,e,a)}else o=D7(n,t,e,a,r);return Bv(o)}DD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=rh(t.pendingLanes);n!==0&&(uS(t,n|1),Sa(t,Zn()),!(Qt&6)&&(bd=Zn()+500,wl()))}break;case 13:_c(function(){var r=to(e,1);if(r!==null){var a=ia();Fi(r,e,1,a)}}),qS(e,1)}};dS=function(e){if(e.tag===13){var t=to(e,134217728);if(t!==null){var n=ia();Fi(t,e,134217728,n)}qS(e,134217728)}};$D=function(e){if(e.tag===13){var t=al(e),n=to(e,t);if(n!==null){var r=ia();Fi(n,e,t,r)}qS(e,t)}};LD=function(){return pn};FD=function(e,t){var n=pn;try{return pn=e,t()}finally{pn=n}};qj=function(e,t,n){switch(t){case"input":if(Dj(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=my(r);if(!a)throw Error(Pe(90));gD(r),Dj(r,a)}}}break;case"textarea":xD(e,n);break;case"select":t=n.value,t!=null&&Hu(e,!!n.multiple,t,!1)}};SD=LS;ND=_c;var $7={usingClientEntryPoint:!1,Events:[rp,Ru,my,_D,kD,LS]},Tf={findFiberByHostInstance:nc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L7={bundleType:Tf.bundleType,version:Tf.version,rendererPackageName:Tf.rendererPackageName,rendererConfig:Tf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ED(e),e===null?null:e.stateNode},findFiberByHostInstance:Tf.findFiberByHostInstance||M7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lg.isDisabled&&lg.supportsFiber)try{uy=lg.inject(L7),us=lg}catch{}}Ha.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$7;Ha.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!HS(t))throw Error(Pe(200));return R7(e,t,null,n)};Ha.createRoot=function(e,t){if(!HS(e))throw Error(Pe(299));var n=!1,r="",a=oL;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=zS(e,1,!1,null,null,n,!1,r,a),e[eo]=t.current,Fh(e.nodeType===8?e.parentNode:e),new WS(t)};Ha.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pe(188)):(e=Object.keys(e).join(","),Error(Pe(268,e)));return e=ED(t),e=e===null?null:e.stateNode,e};Ha.flushSync=function(e){return _c(e)};Ha.hydrate=function(e,t,n){if(!_y(t))throw Error(Pe(200));return ky(null,e,t,!0,n)};Ha.hydrateRoot=function(e,t,n){if(!HS(e))throw Error(Pe(405));var r=n!=null&&n.hydratedSources||null,a=!1,s="",o=oL;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=sL(t,null,e,1,n??null,a,!1,s,o),e[eo]=t.current,Fh(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new jy(t)};Ha.render=function(e,t,n){if(!_y(t))throw Error(Pe(200));return ky(null,e,t,!1,n)};Ha.unmountComponentAtNode=function(e){if(!_y(e))throw Error(Pe(40));return e._reactRootContainer?(_c(function(){ky(null,null,e,!1,function(){e._reactRootContainer=null,e[eo]=null})}),!0):!1};Ha.unstable_batchedUpdates=LS;Ha.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!_y(n))throw Error(Pe(200));if(e==null||e._reactInternals===void 0)throw Error(Pe(38));return ky(e,t,n,!1,r)};Ha.version="18.3.1-next-f1338f8080-20240426";function lL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lL)}catch(e){console.error(e)}}lL(),lD.exports=Ha;var Hc=lD.exports;const cL=fn(Hc);var uL,tP=Hc;uL=tP.createRoot,tP.hydrateRoot;const F7=1,B7=1e6;let X0=0;function U7(){return X0=(X0+1)%Number.MAX_SAFE_INTEGER,X0.toString()}const J0=new Map,nP=e=>{if(J0.has(e))return;const t=setTimeout(()=>{J0.delete(e),bh({type:"REMOVE_TOAST",toastId:e})},B7);J0.set(e,t)},z7=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,F7)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?nP(n):e.toasts.forEach(r=>{nP(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},sv=[];let ov={toasts:[]};function bh(e){ov=z7(ov,e),sv.forEach(t=>{t(ov)})}function q7({...e}){const t=U7(),n=a=>bh({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>bh({type:"DISMISS_TOAST",toastId:t});return bh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function Vc(){const[e,t]=p.useState(ov);return p.useEffect(()=>(sv.push(t),()=>{const n=sv.indexOf(t);n>-1&&sv.splice(n,1)}),[e]),{...e,toast:q7,dismiss:n=>bh({type:"DISMISS_TOAST",toastId:n})}}function Ee(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function rP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ro(...e){return t=>{let n=!1;const r=e.map(a=>{const s=rP(a,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let a=0;a<r.length;a++){const s=r[a];typeof s=="function"?s():rP(e[a],null)}}}}function St(...e){return p.useCallback(ro(...e),e)}function W7(e,t){const n=p.createContext(t),r=s=>{const{children:o,...l}=s,c=p.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function a(s){const o=p.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,a]}function _r(e,t=[]){let n=[];function r(s,o){const l=p.createContext(o),c=n.length;n=[...n,o];const u=d=>{var y;const{scope:h,children:m,...g}=d,v=((y=h==null?void 0:h[e])==null?void 0:y[c])||l,x=p.useMemo(()=>g,Object.values(g));return i.jsx(v.Provider,{value:x,children:m})};u.displayName=s+"Provider";function f(d,h){var v;const m=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,g=p.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,f]}const a=()=>{const s=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,H7(a,...t)]}function H7(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const d=c(s)[`__scope${u}`];return{...l,...d}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function fl(e){const t=V7(e),n=p.forwardRef((r,a)=>{const{children:s,...o}=r,l=p.Children.toArray(s),c=l.find(K7);if(c){const u=c.props.children,f=l.map(d=>d===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:d);return i.jsx(t,{...o,ref:a,children:p.isValidElement(u)?p.cloneElement(u,void 0,f):null})}return i.jsx(t,{...o,ref:a,children:s})});return n.displayName=`${e}.Slot`,n}var VS=fl("Slot");function V7(e){const t=p.forwardRef((n,r)=>{const{children:a,...s}=n;if(p.isValidElement(a)){const o=Y7(a),l=G7(s,a.props);return a.type!==p.Fragment&&(l.ref=r?ro(r,o):o),p.cloneElement(a,l)}return p.Children.count(a)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var dL=Symbol("radix.slottable");function fL(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=dL,t}function K7(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===dL}function G7(e,t){const n={...t};for(const r in t){const a=e[r],s=t[r];/^on[A-Z]/.test(r)?a&&s?n[r]=(...l)=>{const c=s(...l);return a(...l),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...s}:r==="className"&&(n[r]=[a,s].filter(Boolean).join(" "))}return{...e,...n}}function Y7(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function ip(e){const t=e+"CollectionProvider",[n,r]=_r(t),[a,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:x,children:y}=v,b=V.useRef(null),w=V.useRef(new Map).current;return i.jsx(a,{scope:x,itemMap:w,collectionRef:b,children:y})};o.displayName=t;const l=e+"CollectionSlot",c=fl(l),u=V.forwardRef((v,x)=>{const{scope:y,children:b}=v,w=s(l,y),j=St(x,w.collectionRef);return i.jsx(c,{ref:j,children:b})});u.displayName=l;const f=e+"CollectionItemSlot",d="data-radix-collection-item",h=fl(f),m=V.forwardRef((v,x)=>{const{scope:y,children:b,...w}=v,j=V.useRef(null),k=St(x,j),_=s(f,y);return V.useEffect(()=>(_.itemMap.set(j,{ref:j,...w}),()=>void _.itemMap.delete(j))),i.jsx(h,{[d]:"",ref:k,children:b})});m.displayName=f;function g(v){const x=s(e+"CollectionConsumer",v);return V.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((_,S)=>w.indexOf(_.ref.current)-w.indexOf(S.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},g,r]}var X7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ge=X7.reduce((e,t)=>{const n=fl(`Primitive.${t}`),r=p.forwardRef((a,s)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function KS(e,t){e&&Hc.flushSync(()=>e.dispatchEvent(t))}function Kn(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function J7(e,t=globalThis==null?void 0:globalThis.document){const n=Kn(e);p.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Q7="DismissableLayer",j1="dismissableLayer.update",Z7="dismissableLayer.pointerDownOutside",eV="dismissableLayer.focusOutside",aP,hL=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Kc=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=e,u=p.useContext(hL),[f,d]=p.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=St(t,S=>d(S)),v=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),b=f?v.indexOf(f):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,j=b>=y,k=nV(S=>{const A=S.target,N=[...u.branches].some(T=>T.contains(A));!j||N||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},h),_=rV(S=>{const A=S.target;[...u.branches].some(T=>T.contains(A))||(s==null||s(S),o==null||o(S),S.defaultPrevented||l==null||l())},h);return J7(S=>{b===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},h),p.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(aP=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),iP(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=aP)}},[f,h,n,u]),p.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),iP())},[f,u]),p.useEffect(()=>{const S=()=>m({});return document.addEventListener(j1,S),()=>document.removeEventListener(j1,S)},[]),i.jsx(Ge.div,{...c,ref:g,style:{pointerEvents:w?j?"auto":"none":void 0,...e.style},onFocusCapture:Ee(e.onFocusCapture,_.onFocusCapture),onBlurCapture:Ee(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Ee(e.onPointerDownCapture,k.onPointerDownCapture)})});Kc.displayName=Q7;var tV="DismissableLayerBranch",mL=p.forwardRef((e,t)=>{const n=p.useContext(hL),r=p.useRef(null),a=St(t,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),i.jsx(Ge.div,{...e,ref:a})});mL.displayName=tV;function nV(e,t=globalThis==null?void 0:globalThis.document){const n=Kn(e),r=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let c=function(){pL(Z7,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function rV(e,t=globalThis==null?void 0:globalThis.document){const n=Kn(e),r=p.useRef(!1);return p.useEffect(()=>{const a=s=>{s.target&&!r.current&&pL(eV,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function iP(){const e=new CustomEvent(j1);document.dispatchEvent(e)}function pL(e,t,n,{discrete:r}){const a=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?KS(a,s):a.dispatchEvent(s)}var aV=Kc,iV=mL,Xn=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},sV="Portal",Zd=p.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,s]=p.useState(!1);Xn(()=>s(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?cL.createPortal(i.jsx(Ge.div,{...r,ref:t}),o):null});Zd.displayName=sV;function oV(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var pr=e=>{const{present:t,children:n}=e,r=lV(t),a=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=St(r.ref,cV(a));return typeof n=="function"||r.isPresent?p.cloneElement(a,{ref:s}):null};pr.displayName="Presence";function lV(e){const[t,n]=p.useState(),r=p.useRef(null),a=p.useRef(e),s=p.useRef("none"),o=e?"mounted":"unmounted",[l,c]=oV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=cg(r.current);s.current=l==="mounted"?u:"none"},[l]),Xn(()=>{const u=r.current,f=a.current;if(f!==e){const h=s.current,m=cg(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Xn(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,d=m=>{const v=cg(r.current).includes(m.animationName);if(m.target===t&&v&&(c("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},h=m=>{m.target===t&&(s.current=cg(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function cg(e){return(e==null?void 0:e.animationName)||"none"}function cV(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var uV=tS[" useInsertionEffect ".trim().toString()]||Xn;function Ca({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,s,o]=dV({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const f=p.useRef(e!==void 0);p.useEffect(()=>{const d=f.current;d!==l&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const u=p.useCallback(f=>{var d;if(l){const h=fV(f)?f(e):f;h!==e&&((d=o.current)==null||d.call(o,h))}else s(f)},[l,e,s,o]);return[c,u]}function dV({defaultProp:e,onChange:t}){const[n,r]=p.useState(e),a=p.useRef(n),s=p.useRef(t);return uV(()=>{s.current=t},[t]),p.useEffect(()=>{var o;a.current!==n&&((o=s.current)==null||o.call(s,n),a.current=n)},[n,a]),[n,r,s]}function fV(e){return typeof e=="function"}var gL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hV="VisuallyHidden",Sy=p.forwardRef((e,t)=>i.jsx(Ge.span,{...e,ref:t,style:{...gL,...e.style}}));Sy.displayName=hV;var mV=Sy,GS="ToastProvider",[YS,pV,gV]=ip("Toast"),[vL,XFe]=_r("Toast",[gV]),[vV,Ny]=vL(GS),xL=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:s=50,children:o}=e,[l,c]=p.useState(null),[u,f]=p.useState(0),d=p.useRef(!1),h=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${GS}\`. Expected non-empty \`string\`.`),i.jsx(YS.Provider,{scope:t,children:i.jsx(vV,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:s,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>f(m=>m+1),[]),onToastRemove:p.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};xL.displayName=GS;var yL="ToastViewport",xV=["F8"],_1="toast.viewportPause",k1="toast.viewportResume",bL=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=xV,label:a="Notifications ({hotkey})",...s}=e,o=Ny(yL,n),l=pV(n),c=p.useRef(null),u=p.useRef(null),f=p.useRef(null),d=p.useRef(null),h=St(t,d,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;p.useEffect(()=>{const x=y=>{var w;r.length!==0&&r.every(j=>y[j]||y.code===j)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),p.useEffect(()=>{const x=c.current,y=d.current;if(g&&x&&y){const b=()=>{if(!o.isClosePausedRef.current){const _=new CustomEvent(_1);y.dispatchEvent(_),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const _=new CustomEvent(k1);y.dispatchEvent(_),o.isClosePausedRef.current=!1}},j=_=>{!x.contains(_.relatedTarget)&&w()},k=()=>{x.contains(document.activeElement)||w()};return x.addEventListener("focusin",b),x.addEventListener("focusout",j),x.addEventListener("pointermove",b),x.addEventListener("pointerleave",k),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{x.removeEventListener("focusin",b),x.removeEventListener("focusout",j),x.removeEventListener("pointermove",b),x.removeEventListener("pointerleave",k),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:x})=>{const b=l().map(w=>{const j=w.ref.current,k=[j,...TV(j)];return x==="forwards"?k:k.reverse()});return(x==="forwards"?b.reverse():b).flat()},[l]);return p.useEffect(()=>{const x=d.current;if(x){const y=b=>{var k,_,S;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const A=document.activeElement,N=b.shiftKey;if(b.target===x&&N){(k=u.current)==null||k.focus();return}const F=v({tabbingDirection:N?"backwards":"forwards"}),E=F.findIndex(O=>O===A);Q0(F.slice(E+1))?b.preventDefault():N?(_=u.current)==null||_.focus():(S=f.current)==null||S.focus()}};return x.addEventListener("keydown",y),()=>x.removeEventListener("keydown",y)}},[l,v]),i.jsxs(iV,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&i.jsx(S1,{ref:u,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});Q0(x)}}),i.jsx(YS.Slot,{scope:n,children:i.jsx(Ge.ol,{tabIndex:-1,...s,ref:h})}),g&&i.jsx(S1,{ref:f,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});Q0(x)}})]})});bL.displayName=yL;var wL="ToastFocusProxy",S1=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,s=Ny(wL,n);return i.jsx(Sy,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(l))&&r()}})});S1.displayName=wL;var sp="Toast",yV="toast.swipeStart",bV="toast.swipeMove",wV="toast.swipeCancel",jV="toast.swipeEnd",jL=p.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:s,...o}=e,[l,c]=Ca({prop:r,defaultProp:a??!0,onChange:s,caller:sp});return i.jsx(pr,{present:n||l,children:i.jsx(SV,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Kn(e.onPause),onResume:Kn(e.onResume),onSwipeStart:Ee(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ee(e.onSwipeMove,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:Ee(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ee(e.onSwipeEnd,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});jL.displayName=sp;var[_V,kV]=vL(sp,{onClose(){}}),SV=p.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:s,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:m,...g}=e,v=Ny(sp,n),[x,y]=p.useState(null),b=St(t,O=>y(O)),w=p.useRef(null),j=p.useRef(null),k=a||v.duration,_=p.useRef(0),S=p.useRef(k),A=p.useRef(0),{onToastAdd:N,onToastRemove:T}=v,I=Kn(()=>{var M;(x==null?void 0:x.contains(document.activeElement))&&((M=v.viewport)==null||M.focus()),o()}),F=p.useCallback(O=>{!O||O===1/0||(window.clearTimeout(A.current),_.current=new Date().getTime(),A.current=window.setTimeout(I,O))},[I]);p.useEffect(()=>{const O=v.viewport;if(O){const M=()=>{F(S.current),u==null||u()},B=()=>{const R=new Date().getTime()-_.current;S.current=S.current-R,window.clearTimeout(A.current),c==null||c()};return O.addEventListener(_1,B),O.addEventListener(k1,M),()=>{O.removeEventListener(_1,B),O.removeEventListener(k1,M)}}},[v.viewport,k,c,u,F]),p.useEffect(()=>{s&&!v.isClosePausedRef.current&&F(k)},[s,k,v.isClosePausedRef,F]),p.useEffect(()=>(N(),()=>T()),[N,T]);const E=p.useMemo(()=>x?EL(x):null,[x]);return v.viewport?i.jsxs(i.Fragment,{children:[E&&i.jsx(NV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:E}),i.jsx(_V,{scope:n,onClose:I,children:Hc.createPortal(i.jsx(YS.ItemSlot,{scope:n,children:i.jsx(aV,{asChild:!0,onEscapeKeyDown:Ee(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||I(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Ge.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ee(e.onKeyDown,O=>{O.key==="Escape"&&(l==null||l(O.nativeEvent),O.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:Ee(e.onPointerDown,O=>{O.button===0&&(w.current={x:O.clientX,y:O.clientY})}),onPointerMove:Ee(e.onPointerMove,O=>{if(!w.current)return;const M=O.clientX-w.current.x,B=O.clientY-w.current.y,R=!!j.current,L=["left","right"].includes(v.swipeDirection),$=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,C=L?$(0,M):0,U=L?0:$(0,B),D=O.pointerType==="touch"?10:2,P={x:C,y:U},H={originalEvent:O,delta:P};R?(j.current=P,ug(bV,d,H,{discrete:!1})):sP(P,v.swipeDirection,D)?(j.current=P,ug(yV,f,H,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(M)>D||Math.abs(B)>D)&&(w.current=null)}),onPointerUp:Ee(e.onPointerUp,O=>{const M=j.current,B=O.target;if(B.hasPointerCapture(O.pointerId)&&B.releasePointerCapture(O.pointerId),j.current=null,w.current=null,M){const R=O.currentTarget,L={originalEvent:O,delta:M};sP(M,v.swipeDirection,v.swipeThreshold)?ug(jV,m,L,{discrete:!0}):ug(wV,h,L,{discrete:!0}),R.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),NV=e=>{const{__scopeToast:t,children:n,...r}=e,a=Ny(sp,t),[s,o]=p.useState(!1),[l,c]=p.useState(!1);return EV(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Zd,{asChild:!0,children:i.jsx(Sy,{...r,children:s&&i.jsxs(i.Fragment,{children:[a.label," ",n]})})})},CV="ToastTitle",_L=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Ge.div,{...r,ref:t})});_L.displayName=CV;var AV="ToastDescription",kL=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Ge.div,{...r,ref:t})});kL.displayName=AV;var SL="ToastAction",NL=p.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(AL,{altText:n,asChild:!0,children:i.jsx(XS,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${SL}\`. Expected non-empty \`string\`.`),null)});NL.displayName=SL;var CL="ToastClose",XS=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=kV(CL,n);return i.jsx(AL,{asChild:!0,children:i.jsx(Ge.button,{type:"button",...r,ref:t,onClick:Ee(e.onClick,a.onClose)})})});XS.displayName=CL;var AL=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return i.jsx(Ge.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function EL(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),PV(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!a)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...EL(r))}}),t}function ug(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?KS(a,s):a.dispatchEvent(s)}var sP=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),s=r>a;return t==="left"||t==="right"?s&&r>n:!s&&a>n};function EV(e=()=>{}){const t=Kn(e);Xn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function PV(e){return e.nodeType===e.ELEMENT_NODE}function TV(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Q0(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var OV=xL,PL=bL,TL=jL,OL=_L,IL=kL,RL=NL,ML=XS;function DL(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=DL(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Zt(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=DL(e))&&(r&&(r+=" "),r+=t);return r}const oP=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,lP=Zt,op=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return lP(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:s}=t,o=Object.keys(a).map(u=>{const f=n==null?void 0:n[u],d=s==null?void 0:s[u];if(f===null)return null;const h=oP(f)||oP(d);return a[u][h]}),l=n&&Object.entries(n).reduce((u,f)=>{let[d,h]=f;return h===void 0||(u[d]=h),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:d,className:h,...m}=f;return Object.entries(m).every(g=>{let[v,x]=g;return Array.isArray(x)?x.includes({...s,...l}[v]):{...s,...l}[v]===x})?[...u,d,h]:u},[]);return lP(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$L=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MV=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...RV,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:$L("lucide",a),...l},[...o.map(([u,f])=>p.createElement(u,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=(e,t)=>{const n=p.forwardRef(({className:r,...a},s)=>p.createElement(MV,{ref:s,iconNode:t,className:$L(`lucide-${IV(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=Ye("AlignCenter",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=Ye("AlignJustify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=Ye("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=Ye("AlignRight",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Ye("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=Ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=Ye("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=Ye("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=Ye("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Ye("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=Ye("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=Ye("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=Ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=Ye("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=Ye("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=Ye("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=Ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=Ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=Ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=Ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=Ye("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=Ye("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=Ye("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=Ye("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=Ye("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=Ye("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=Ye("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=Ye("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=Ye("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=Ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=Ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=Ye("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=Ye("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=Ye("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=Ye("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=Ye("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=Ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=Ye("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=Ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=Ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=Ye("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=Ye("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=Ye("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=Ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=Ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=Ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=Ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=Ye("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=Ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=Ye("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=Ye("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=Ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=Ye("PlugZap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=Ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=Ye("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=Ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=Ye("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=Ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Ye("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=Ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=Ye("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=Ye("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=Ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=Ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=Ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=Ye("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=Ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=Ye("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=Ye("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=Ye("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=Ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=Ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=Ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=Ye("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),tN="-",nK=e=>{const t=aK(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(tN);return l[0]===""&&l.length!==1&&l.shift(),XL(l,t)||rK(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},XL=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?XL(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const s=e.join(tN);return(o=t.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},gP=/^\[(.+)\]$/,rK=e=>{if(gP.test(e)){const t=gP.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},aK=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return sK(Object.entries(e.classGroups),n).forEach(([s,o])=>{N1(o,r,s,t)}),r},N1=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const s=a===""?t:vP(t,a);s.classGroupId=n;return}if(typeof a=="function"){if(iK(a)){N1(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([s,o])=>{N1(o,vP(t,s),n,r)})})},vP=(e,t)=>{let n=e;return t.split(tN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},iK=e=>e.isThemeGetter,sK=(e,t)=>t?e.map(([n,r])=>{const a=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[t+o,l])):s);return[n,a]}):e,oK=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(s,o)=>{n.set(s,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return a(s,o),o},set(s,o){n.has(s)?n.set(s,o):a(s,o)}}},JL="!",lK=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],s=t.length,o=l=>{const c=[];let u=0,f=0,d;for(let x=0;x<l.length;x++){let y=l[x];if(u===0){if(y===a&&(r||l.slice(x,x+s)===t)){c.push(l.slice(f,x)),f=x+s;continue}if(y==="/"){d=x;continue}}y==="["?u++:y==="]"&&u--}const h=c.length===0?l:l.substring(f),m=h.startsWith(JL),g=m?h.substring(1):h,v=d&&d>f?d-f:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:o}):o},cK=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},uK=e=>({cache:oK(e.cacheSize),parseClassName:lK(e),...nK(e)}),dK=/\s+/,fK=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,s=[],o=e.trim().split(dK);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:f,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:m}=n(u);let g=!!m,v=r(g?h.substring(0,m):h);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=r(h),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}const x=cK(f).join(":"),y=d?x+JL:x,b=y+v;if(s.includes(b))continue;s.push(b);const w=a(v,g);for(let j=0;j<w.length;++j){const k=w[j];s.push(y+k)}l=u+(l.length>0?" "+l:l)}return l};function hK(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=QL(t))&&(r&&(r+=" "),r+=n);return r}const QL=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=QL(e[r]))&&(n&&(n+=" "),n+=t);return n};function mK(e,...t){let n,r,a,s=o;function o(c){const u=t.reduce((f,d)=>d(f),e());return n=uK(u),r=n.cache.get,a=n.cache.set,s=l,l(c)}function l(c){const u=r(c);if(u)return u;const f=fK(c,n);return a(c,f),f}return function(){return s(hK.apply(null,arguments))}}const En=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},ZL=/^\[(?:([a-z-]+):)?(.+)\]$/i,pK=/^\d+\/\d+$/,gK=new Set(["px","full","screen"]),vK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,wK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Cs=e=>Ju(e)||gK.has(e)||pK.test(e),Co=e=>ef(e,"length",EK),Ju=e=>!!e&&!Number.isNaN(Number(e)),nw=e=>ef(e,"number",Ju),If=e=>!!e&&Number.isInteger(Number(e)),jK=e=>e.endsWith("%")&&Ju(e.slice(0,-1)),Pt=e=>ZL.test(e),Ao=e=>vK.test(e),_K=new Set(["length","size","percentage"]),kK=e=>ef(e,_K,e4),SK=e=>ef(e,"position",e4),NK=new Set(["image","url"]),CK=e=>ef(e,NK,TK),AK=e=>ef(e,"",PK),Rf=()=>!0,ef=(e,t,n)=>{const r=ZL.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},EK=e=>xK.test(e)&&!yK.test(e),e4=()=>!1,PK=e=>bK.test(e),TK=e=>wK.test(e),OK=()=>{const e=En("colors"),t=En("spacing"),n=En("blur"),r=En("brightness"),a=En("borderColor"),s=En("borderRadius"),o=En("borderSpacing"),l=En("borderWidth"),c=En("contrast"),u=En("grayscale"),f=En("hueRotate"),d=En("invert"),h=En("gap"),m=En("gradientColorStops"),g=En("gradientColorStopPositions"),v=En("inset"),x=En("margin"),y=En("opacity"),b=En("padding"),w=En("saturate"),j=En("scale"),k=En("sepia"),_=En("skew"),S=En("space"),A=En("translate"),N=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",Pt,t],F=()=>[Pt,t],E=()=>["",Cs,Co],O=()=>["auto",Ju,Pt],M=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],R=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",Pt],C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[Ju,Pt];return{cacheSize:500,separator:":",theme:{colors:[Rf],spacing:[Cs,Co],blur:["none","",Ao,Pt],brightness:U(),borderColor:[e],borderRadius:["none","","full",Ao,Pt],borderSpacing:F(),borderWidth:E(),contrast:U(),grayscale:$(),hueRotate:U(),invert:$(),gap:F(),gradientColorStops:[e],gradientColorStopPositions:[jK,Co],inset:I(),margin:I(),opacity:U(),padding:F(),saturate:U(),scale:U(),sepia:$(),skew:U(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Pt]}],container:["container"],columns:[{columns:[Ao]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...M(),Pt]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",If,Pt]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Pt]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",If,Pt]}],"grid-cols":[{"grid-cols":[Rf]}],"col-start-end":[{col:["auto",{span:["full",If,Pt]},Pt]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Rf]}],"row-start-end":[{row:["auto",{span:[If,Pt]},Pt]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Pt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Pt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Pt,t]}],"min-w":[{"min-w":[Pt,t,"min","max","fit"]}],"max-w":[{"max-w":[Pt,t,"none","full","min","max","fit","prose",{screen:[Ao]},Ao]}],h:[{h:[Pt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Pt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Pt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Pt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ao,Co]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nw]}],"font-family":[{font:[Rf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Pt]}],"line-clamp":[{"line-clamp":["none",Ju,nw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Cs,Pt]}],"list-image":[{"list-image":["none",Pt]}],"list-style-type":[{list:["none","disc","decimal",Pt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Cs,Co]}],"underline-offset":[{"underline-offset":["auto",Cs,Pt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Pt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Pt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...M(),SK]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",kK]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},CK]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:B()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[Cs,Pt]}],"outline-w":[{outline:[Cs,Co]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Cs,Co]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ao,AK]}],"shadow-color":[{shadow:[Rf]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...R(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":R()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ao,Pt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Pt]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",Pt]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",Pt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[If,Pt]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Pt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Pt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Pt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Cs,Co,nw]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},IK=mK(OK);function ye(...e){return IK(Zt(e))}function RK(e,t){if(!t||t.length===0)return;const n=Object.keys(t[0]),r=[n.join(","),...t.map(l=>n.map(c=>{const u=l[c],f=u==null?"":String(u),d='"'+f.replace(/"/g,'""')+'"';return/[",\n]/.test(f)?d:f}).join(","))].join(`
`),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),o=URL.createObjectURL(a);s.setAttribute("href",o),s.setAttribute("download",e),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}function t4(e){if(typeof e=="string"){let t=e.replace(/([A-Z0-9._%+-]+)@([A-Z0-9.-]+)\.[A-Z]{2,}/gi,"***@***");return t=t.replace(/\b\+?\d[\d\s-]{6,}\b/g,n=>n.slice(0,Math.max(0,n.length-4)).replace(/\d/g,"*")+n.slice(-4)),t=t.replace(/(\d+\.\d+\.\d+)\.\d+/g,"$1.*"),t}if(e&&typeof e=="object"){const t=Array.isArray(e)?[]:{};for(const n of Object.keys(e))t[n]=t4(e[n]);return t}return e}const MK=OV,n4=p.forwardRef(({className:e,...t},n)=>i.jsx(PL,{ref:n,className:ye("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));n4.displayName=PL.displayName;const DK=op("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),r4=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(TL,{ref:r,className:ye(DK({variant:t}),e),...n}));r4.displayName=TL.displayName;const $K=p.forwardRef(({className:e,...t},n)=>i.jsx(RL,{ref:n,className:ye("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));$K.displayName=RL.displayName;const a4=p.forwardRef(({className:e,...t},n)=>i.jsx(ML,{ref:n,className:ye("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(cp,{className:"h-4 w-4"})}));a4.displayName=ML.displayName;const i4=p.forwardRef(({className:e,...t},n)=>i.jsx(OL,{ref:n,className:ye("text-sm font-semibold",e),...t}));i4.displayName=OL.displayName;const s4=p.forwardRef(({className:e,...t},n)=>i.jsx(IL,{ref:n,className:ye("text-sm opacity-90",e),...t}));s4.displayName=IL.displayName;function LK(){const{toasts:e}=Vc();return i.jsxs(MK,{children:[e.map(function({id:t,title:n,description:r,action:a,...s}){return i.jsxs(r4,{...s,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(i4,{children:n}),r&&i.jsx(s4,{children:r})]}),a,i.jsx(a4,{})]},t)}),i.jsx(n4,{})]})}var xP=["light","dark"],FK="(prefers-color-scheme: dark)",BK=p.createContext(void 0),UK={setTheme:e=>{},themes:[]},zK=()=>{var e;return(e=p.useContext(BK))!=null?e:UK};p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:s,value:o,attrs:l,nonce:c})=>{let u=s==="system",f=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=a?xP.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,v=!1,x=!0)=>{let y=o?o[g]:g,b=v?g+"|| ''":`'${y}'`,w="";return a&&x&&!v&&xP.includes(g)&&(w+=`d.style.colorScheme = '${g}';`),n==="class"?v||y?w+=`c.add(${b})`:w+="null":y&&(w+=`d[s](n,${b})`),w},m=e?`!function(){${f}${h(e)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${FK}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${u?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var qK=e=>{switch(e){case"success":return VK;case"info":return GK;case"warning":return KK;case"error":return YK;default:return null}},WK=Array(12).fill(0),HK=({visible:e,className:t})=>V.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},V.createElement("div",{className:"sonner-spinner"},WK.map((n,r)=>V.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),VK=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),KK=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),GK=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),YK=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},V.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),XK=V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),JK=()=>{let[e,t]=V.useState(document.hidden);return V.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},C1=1,QK=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:C1++,s=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),s?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0,s,o=r.then(async c=>{if(s=["resolve",c],V.isValidElement(c))a=!1,this.create({id:n,type:"default",message:c});else if(eG(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:f})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:f})}}).catch(async c=>{if(s=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:f})}}).finally(()=>{var c;a&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>s[0]==="reject"?u(s[1]):c(s[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||C1++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ha=new QK,ZK=(e,t)=>{let n=(t==null?void 0:t.id)||C1++;return ha.addToast({title:e,...t,id:n}),n},eG=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",tG=ZK,nG=()=>ha.toasts,rG=()=>ha.getActiveToasts(),Ie=Object.assign(tG,{success:ha.success,info:ha.info,warning:ha.warning,error:ha.error,custom:ha.custom,message:ha.message,promise:ha.promise,dismiss:ha.dismiss,loading:ha.loading},{getHistory:nG,getToasts:rG});function aG(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}aG(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function dg(e){return e.label!==void 0}var iG=3,sG="32px",oG="16px",yP=4e3,lG=356,cG=14,uG=20,dG=200;function wi(...e){return e.filter(Boolean).join(" ")}function fG(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var hG=e=>{var t,n,r,a,s,o,l,c,u,f,d;let{invert:h,toast:m,unstyled:g,interacting:v,setHeights:x,visibleToasts:y,heights:b,index:w,toasts:j,expanded:k,removeToast:_,defaultRichColors:S,closeButton:A,style:N,cancelButtonStyle:T,actionButtonStyle:I,className:F="",descriptionClassName:E="",duration:O,position:M,gap:B,loadingIcon:R,expandByDefault:L,classNames:$,icons:C,closeButtonAriaLabel:U="Close toast",pauseWhenPageIsHidden:D}=e,[P,H]=V.useState(null),[G,Y]=V.useState(null),[W,ee]=V.useState(!1),[X,ae]=V.useState(!1),[re,J]=V.useState(!1),[ve,z]=V.useState(!1),[q,ie]=V.useState(!1),[oe,be]=V.useState(0),[Se,Le]=V.useState(0),ge=V.useRef(m.duration||O||yP),We=V.useRef(null),dt=V.useRef(null),yt=w===0,Et=w+1<=y,te=m.type,me=m.dismissible!==!1,Fe=m.className||"",He=m.descriptionClassName||"",Ue=V.useMemo(()=>b.findIndex(ze=>ze.toastId===m.id)||0,[b,m.id]),he=V.useMemo(()=>{var ze;return(ze=m.closeButton)!=null?ze:A},[m.closeButton,A]),Ut=V.useMemo(()=>m.duration||O||yP,[m.duration,O]),bt=V.useRef(0),wt=V.useRef(0),xe=V.useRef(0),_e=V.useRef(null),[Me,le]=M.split("-"),Ze=V.useMemo(()=>b.reduce((ze,se,Ne)=>Ne>=Ue?ze:ze+se.height,0),[b,Ue]),Ke=JK(),en=m.invert||h,_t=te==="loading";wt.current=V.useMemo(()=>Ue*B+Ze,[Ue,Ze]),V.useEffect(()=>{ge.current=Ut},[Ut]),V.useEffect(()=>{ee(!0)},[]),V.useEffect(()=>{let ze=dt.current;if(ze){let se=ze.getBoundingClientRect().height;return Le(se),x(Ne=>[{toastId:m.id,height:se,position:m.position},...Ne]),()=>x(Ne=>Ne.filter(Re=>Re.toastId!==m.id))}},[x,m.id]),V.useLayoutEffect(()=>{if(!W)return;let ze=dt.current,se=ze.style.height;ze.style.height="auto";let Ne=ze.getBoundingClientRect().height;ze.style.height=se,Le(Ne),x(Re=>Re.find(et=>et.toastId===m.id)?Re.map(et=>et.toastId===m.id?{...et,height:Ne}:et):[{toastId:m.id,height:Ne,position:m.position},...Re])},[W,m.title,m.description,x,m.id]);let ut=V.useCallback(()=>{ae(!0),be(wt.current),x(ze=>ze.filter(se=>se.toastId!==m.id)),setTimeout(()=>{_(m)},dG)},[m,_,x,wt]);V.useEffect(()=>{if(m.promise&&te==="loading"||m.duration===1/0||m.type==="loading")return;let ze;return k||v||D&&Ke?(()=>{if(xe.current<bt.current){let se=new Date().getTime()-bt.current;ge.current=ge.current-se}xe.current=new Date().getTime()})():ge.current!==1/0&&(bt.current=new Date().getTime(),ze=setTimeout(()=>{var se;(se=m.onAutoClose)==null||se.call(m,m),ut()},ge.current)),()=>clearTimeout(ze)},[k,v,m,te,D,Ke,ut]),V.useEffect(()=>{m.delete&&ut()},[ut,m.delete]);function $t(){var ze,se,Ne;return C!=null&&C.loading?V.createElement("div",{className:wi($==null?void 0:$.loader,(ze=m==null?void 0:m.classNames)==null?void 0:ze.loader,"sonner-loader"),"data-visible":te==="loading"},C.loading):R?V.createElement("div",{className:wi($==null?void 0:$.loader,(se=m==null?void 0:m.classNames)==null?void 0:se.loader,"sonner-loader"),"data-visible":te==="loading"},R):V.createElement(HK,{className:wi($==null?void 0:$.loader,(Ne=m==null?void 0:m.classNames)==null?void 0:Ne.loader),visible:te==="loading"})}return V.createElement("li",{tabIndex:0,ref:dt,className:wi(F,Fe,$==null?void 0:$.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,$==null?void 0:$.default,$==null?void 0:$[te],(n=m==null?void 0:m.classNames)==null?void 0:n[te]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:S,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":W,"data-promise":!!m.promise,"data-swiped":q,"data-removed":X,"data-visible":Et,"data-y-position":Me,"data-x-position":le,"data-index":w,"data-front":yt,"data-swiping":re,"data-dismissible":me,"data-type":te,"data-invert":en,"data-swipe-out":ve,"data-swipe-direction":G,"data-expanded":!!(k||L&&W),style:{"--index":w,"--toasts-before":w,"--z-index":j.length-w,"--offset":`${X?oe:wt.current}px`,"--initial-height":L?"auto":`${Se}px`,...N,...m.style},onDragEnd:()=>{J(!1),H(null),_e.current=null},onPointerDown:ze=>{_t||!me||(We.current=new Date,be(wt.current),ze.target.setPointerCapture(ze.pointerId),ze.target.tagName!=="BUTTON"&&(J(!0),_e.current={x:ze.clientX,y:ze.clientY}))},onPointerUp:()=>{var ze,se,Ne,Re;if(ve||!me)return;_e.current=null;let et=Number(((ze=dt.current)==null?void 0:ze.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),pt=Number(((se=dt.current)==null?void 0:se.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Z=new Date().getTime()-((Ne=We.current)==null?void 0:Ne.getTime()),ke=P==="x"?et:pt,st=Math.abs(ke)/Z;if(Math.abs(ke)>=uG||st>.11){be(wt.current),(Re=m.onDismiss)==null||Re.call(m,m),Y(P==="x"?et>0?"right":"left":pt>0?"down":"up"),ut(),z(!0),ie(!1);return}J(!1),H(null)},onPointerMove:ze=>{var se,Ne,Re,et;if(!_e.current||!me||((se=window.getSelection())==null?void 0:se.toString().length)>0)return;let pt=ze.clientY-_e.current.y,Z=ze.clientX-_e.current.x,ke=(Ne=e.swipeDirections)!=null?Ne:fG(M);!P&&(Math.abs(Z)>1||Math.abs(pt)>1)&&H(Math.abs(Z)>Math.abs(pt)?"x":"y");let st={x:0,y:0};P==="y"?(ke.includes("top")||ke.includes("bottom"))&&(ke.includes("top")&&pt<0||ke.includes("bottom")&&pt>0)&&(st.y=pt):P==="x"&&(ke.includes("left")||ke.includes("right"))&&(ke.includes("left")&&Z<0||ke.includes("right")&&Z>0)&&(st.x=Z),(Math.abs(st.x)>0||Math.abs(st.y)>0)&&ie(!0),(Re=dt.current)==null||Re.style.setProperty("--swipe-amount-x",`${st.x}px`),(et=dt.current)==null||et.style.setProperty("--swipe-amount-y",`${st.y}px`)}},he&&!m.jsx?V.createElement("button",{"aria-label":U,"data-disabled":_t,"data-close-button":!0,onClick:_t||!me?()=>{}:()=>{var ze;ut(),(ze=m.onDismiss)==null||ze.call(m,m)},className:wi($==null?void 0:$.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(s=C==null?void 0:C.close)!=null?s:XK):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:V.createElement(V.Fragment,null,te||m.icon||m.promise?V.createElement("div",{"data-icon":"",className:wi($==null?void 0:$.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||$t():null,m.type!=="loading"?m.icon||(C==null?void 0:C[te])||qK(te):null):null,V.createElement("div",{"data-content":"",className:wi($==null?void 0:$.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},V.createElement("div",{"data-title":"",className:wi($==null?void 0:$.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?V.createElement("div",{"data-description":"",className:wi(E,He,$==null?void 0:$.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&dg(m.cancel)?V.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||T,onClick:ze=>{var se,Ne;dg(m.cancel)&&me&&((Ne=(se=m.cancel).onClick)==null||Ne.call(se,ze),ut())},className:wi($==null?void 0:$.cancelButton,(f=m==null?void 0:m.classNames)==null?void 0:f.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&dg(m.action)?V.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||I,onClick:ze=>{var se,Ne;dg(m.action)&&((Ne=(se=m.action).onClick)==null||Ne.call(se,ze),!ze.defaultPrevented&&ut())},className:wi($==null?void 0:$.actionButton,(d=m==null?void 0:m.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function bP(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function mG(e,t){let n={};return[e,t].forEach((r,a)=>{let s=a===1,o=s?"--mobile-offset":"--offset",l=s?oG:sG;function c(u){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var pG=p.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:c,mobileOffset:u,theme:f="light",richColors:d,duration:h,style:m,visibleToasts:g=iG,toastOptions:v,dir:x=bP(),gap:y=cG,loadingIcon:b,icons:w,containerAriaLabel:j="Notifications",pauseWhenPageIsHidden:k}=e,[_,S]=V.useState([]),A=V.useMemo(()=>Array.from(new Set([r].concat(_.filter(D=>D.position).map(D=>D.position)))),[_,r]),[N,T]=V.useState([]),[I,F]=V.useState(!1),[E,O]=V.useState(!1),[M,B]=V.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),R=V.useRef(null),L=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=V.useRef(null),C=V.useRef(!1),U=V.useCallback(D=>{S(P=>{var H;return(H=P.find(G=>G.id===D.id))!=null&&H.delete||ha.dismiss(D.id),P.filter(({id:G})=>G!==D.id)})},[]);return V.useEffect(()=>ha.subscribe(D=>{if(D.dismiss){S(P=>P.map(H=>H.id===D.id?{...H,delete:!0}:H));return}setTimeout(()=>{cL.flushSync(()=>{S(P=>{let H=P.findIndex(G=>G.id===D.id);return H!==-1?[...P.slice(0,H),{...P[H],...D},...P.slice(H+1)]:[D,...P]})})})}),[]),V.useEffect(()=>{if(f!=="system"){B(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;let D=window.matchMedia("(prefers-color-scheme: dark)");try{D.addEventListener("change",({matches:P})=>{B(P?"dark":"light")})}catch{D.addListener(({matches:H})=>{try{B(H?"dark":"light")}catch(G){console.error(G)}})}},[f]),V.useEffect(()=>{_.length<=1&&F(!1)},[_]),V.useEffect(()=>{let D=P=>{var H,G;a.every(Y=>P[Y]||P.code===Y)&&(F(!0),(H=R.current)==null||H.focus()),P.code==="Escape"&&(document.activeElement===R.current||(G=R.current)!=null&&G.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[a]),V.useEffect(()=>{if(R.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,C.current=!1)}},[R.current]),V.createElement("section",{ref:t,"aria-label":`${j} ${L}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((D,P)=>{var H;let[G,Y]=D.split("-");return _.length?V.createElement("ol",{key:D,dir:x==="auto"?bP():x,tabIndex:-1,ref:R,className:l,"data-sonner-toaster":!0,"data-theme":M,"data-y-position":G,"data-lifted":I&&_.length>1&&!s,"data-x-position":Y,style:{"--front-toast-height":`${((H=N[0])==null?void 0:H.height)||0}px`,"--width":`${lG}px`,"--gap":`${y}px`,...m,...mG(c,u)},onBlur:W=>{C.current&&!W.currentTarget.contains(W.relatedTarget)&&(C.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||C.current||(C.current=!0,$.current=W.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{E||F(!1)},onDragEnd:()=>F(!1),onPointerDown:W=>{W.target instanceof HTMLElement&&W.target.dataset.dismissible==="false"||O(!0)},onPointerUp:()=>O(!1)},_.filter(W=>!W.position&&P===0||W.position===D).map((W,ee)=>{var X,ae;return V.createElement(hG,{key:W.id,icons:w,index:ee,toast:W,defaultRichColors:d,duration:(X=v==null?void 0:v.duration)!=null?X:h,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:g,closeButton:(ae=v==null?void 0:v.closeButton)!=null?ae:o,interacting:E,position:D,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:U,toasts:_.filter(re=>re.position==W.position),heights:N.filter(re=>re.position==W.position),setHeights:T,expandByDefault:s,gap:y,loadingIcon:b,expanded:I,pauseWhenPageIsHidden:k,swipeDirections:e.swipeDirections})})):null}))});const o4=({...e})=>{const{theme:t="system"}=zK();return i.jsx(pG,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},wP=Object.freeze(Object.defineProperty({__proto__:null,Toaster:o4,toast:Ie},Symbol.toStringTag,{value:"Module"}));var gG=tS[" useId ".trim().toString()]||(()=>{}),vG=0;function ir(e){const[t,n]=p.useState(gG());return Xn(()=>{e||n(r=>r??String(vG++))},[e]),e||(t?`radix-${t}`:"")}const xG=["top","right","bottom","left"],hl=Math.min,Da=Math.max,qv=Math.round,fg=Math.floor,hs=e=>({x:e,y:e}),yG={left:"right",right:"left",bottom:"top",top:"bottom"},bG={start:"end",end:"start"};function A1(e,t,n){return Da(e,hl(t,n))}function ao(e,t){return typeof e=="function"?e(t):e}function io(e){return e.split("-")[0]}function tf(e){return e.split("-")[1]}function nN(e){return e==="x"?"y":"x"}function rN(e){return e==="y"?"height":"width"}const wG=new Set(["top","bottom"]);function is(e){return wG.has(io(e))?"y":"x"}function aN(e){return nN(is(e))}function jG(e,t,n){n===void 0&&(n=!1);const r=tf(e),a=aN(e),s=rN(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Wv(o)),[o,Wv(o)]}function _G(e){const t=Wv(e);return[E1(e),t,E1(t)]}function E1(e){return e.replace(/start|end/g,t=>bG[t])}const jP=["left","right"],_P=["right","left"],kG=["top","bottom"],SG=["bottom","top"];function NG(e,t,n){switch(e){case"top":case"bottom":return n?t?_P:jP:t?jP:_P;case"left":case"right":return t?kG:SG;default:return[]}}function CG(e,t,n,r){const a=tf(e);let s=NG(io(e),n==="start",r);return a&&(s=s.map(o=>o+"-"+a),t&&(s=s.concat(s.map(E1)))),s}function Wv(e){return e.replace(/left|right|bottom|top/g,t=>yG[t])}function AG(e){return{top:0,right:0,bottom:0,left:0,...e}}function l4(e){return typeof e!="number"?AG(e):{top:e,right:e,bottom:e,left:e}}function Hv(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function kP(e,t,n){let{reference:r,floating:a}=e;const s=is(t),o=aN(t),l=rN(o),c=io(t),u=s==="y",f=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,h=r[l]/2-a[l]/2;let m;switch(c){case"top":m={x:f,y:r.y-a.height};break;case"bottom":m={x:f,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-a.width,y:d};break;default:m={x:r.x,y:r.y}}switch(tf(t)){case"start":m[o]-=h*(n&&u?-1:1);break;case"end":m[o]+=h*(n&&u?-1:1);break}return m}const EG=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:d}=kP(u,r,c),h=r,m={},g=0;for(let v=0;v<l.length;v++){const{name:x,fn:y}=l[v],{x:b,y:w,data:j,reset:k}=await y({x:f,y:d,initialPlacement:r,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});f=b??f,d=w??d,m={...m,[x]:{...m[x],...j}},k&&g<=50&&(g++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:f,y:d}=kP(u,h,c)),v=-1)}return{x:f,y:d,placement:h,strategy:a,middlewareData:m}};async function Jh(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:s,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=ao(t,e),g=l4(m),x=l[h?d==="floating"?"reference":"floating":d],y=Hv(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),b=d==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),j=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},k=Hv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(y.top-k.top+g.top)/j.y,bottom:(k.bottom-y.bottom+g.bottom)/j.y,left:(y.left-k.left+g.left)/j.x,right:(k.right-y.right+g.right)/j.x}}const PG=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:s,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=ao(e,t)||{};if(u==null)return{};const d=l4(f),h={x:n,y:r},m=aN(a),g=rN(m),v=await o.getDimensions(u),x=m==="y",y=x?"top":"left",b=x?"bottom":"right",w=x?"clientHeight":"clientWidth",j=s.reference[g]+s.reference[m]-h[m]-s.floating[g],k=h[m]-s.reference[m],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=_?_[w]:0;(!S||!await(o.isElement==null?void 0:o.isElement(_)))&&(S=l.floating[w]||s.floating[g]);const A=j/2-k/2,N=S/2-v[g]/2-1,T=hl(d[y],N),I=hl(d[b],N),F=T,E=S-v[g]-I,O=S/2-v[g]/2+A,M=A1(F,O,E),B=!c.arrow&&tf(a)!=null&&O!==M&&s.reference[g]/2-(O<F?T:I)-v[g]/2<0,R=B?O<F?O-F:O-E:0;return{[m]:h[m]+R,data:{[m]:M,centerOffset:O-M-R,...B&&{alignmentOffset:R}},reset:B}}}),TG=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...x}=ao(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=io(a),b=is(l),w=io(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),k=h||(w||!v?[Wv(l)]:_G(l)),_=g!=="none";!h&&_&&k.push(...CG(l,v,g,j));const S=[l,...k],A=await Jh(t,x),N=[];let T=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&N.push(A[y]),d){const O=jG(a,o,j);N.push(A[O[0]],A[O[1]])}if(T=[...T,{placement:a,overflows:N}],!N.every(O=>O<=0)){var I,F;const O=(((I=s.flip)==null?void 0:I.index)||0)+1,M=S[O];if(M&&(!(d==="alignment"?b!==is(M):!1)||T.every(L=>L.overflows[0]>0&&is(L.placement)===b)))return{data:{index:O,overflows:T},reset:{placement:M}};let B=(F=T.filter(R=>R.overflows[0]<=0).sort((R,L)=>R.overflows[1]-L.overflows[1])[0])==null?void 0:F.placement;if(!B)switch(m){case"bestFit":{var E;const R=(E=T.filter(L=>{if(_){const $=is(L.placement);return $===b||$==="y"}return!0}).map(L=>[L.placement,L.overflows.filter($=>$>0).reduce(($,C)=>$+C,0)]).sort((L,$)=>L[1]-$[1])[0])==null?void 0:E[0];R&&(B=R);break}case"initialPlacement":B=l;break}if(a!==B)return{reset:{placement:B}}}return{}}}};function SP(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function NP(e){return xG.some(t=>e[t]>=0)}const OG=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=ao(e,t);switch(r){case"referenceHidden":{const s=await Jh(t,{...a,elementContext:"reference"}),o=SP(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:NP(o)}}}case"escaped":{const s=await Jh(t,{...a,altBoundary:!0}),o=SP(s,n.floating);return{data:{escapedOffsets:o,escaped:NP(o)}}}default:return{}}}}},c4=new Set(["left","top"]);async function IG(e,t){const{placement:n,platform:r,elements:a}=e,s=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=io(n),l=tf(n),c=is(n)==="y",u=c4.has(o)?-1:1,f=s&&c?-1:1,d=ao(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*f,y:h*u}:{x:h*u,y:m*f}}const RG=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:s,placement:o,middlewareData:l}=t,c=await IG(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:s+c.y,data:{...c,placement:o}}}}},MG=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:y,y:b}=x;return{x:y,y:b}}},...c}=ao(e,t),u={x:n,y:r},f=await Jh(t,c),d=is(io(a)),h=nN(d);let m=u[h],g=u[d];if(s){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=m+f[x],w=m-f[y];m=A1(b,m,w)}if(o){const x=d==="y"?"top":"left",y=d==="y"?"bottom":"right",b=g+f[x],w=g-f[y];g=A1(b,g,w)}const v=l.fn({...t,[h]:m,[d]:g});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:s,[d]:o}}}}}},DG=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:s,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ao(e,t),f={x:n,y:r},d=is(a),h=nN(d);let m=f[h],g=f[d];const v=ao(l,t),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=h==="y"?"height":"width",j=s.reference[h]-s.floating[w]+x.mainAxis,k=s.reference[h]+s.reference[w]-x.mainAxis;m<j?m=j:m>k&&(m=k)}if(u){var y,b;const w=h==="y"?"width":"height",j=c4.has(io(a)),k=s.reference[d]-s.floating[w]+(j&&((y=o.offset)==null?void 0:y[d])||0)+(j?0:x.crossAxis),_=s.reference[d]+s.reference[w]+(j?0:((b=o.offset)==null?void 0:b[d])||0)-(j?x.crossAxis:0);g<k?g=k:g>_&&(g=_)}return{[h]:m,[d]:g}}}},$G=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:s,platform:o,elements:l}=t,{apply:c=()=>{},...u}=ao(e,t),f=await Jh(t,u),d=io(a),h=tf(a),m=is(a)==="y",{width:g,height:v}=s.floating;let x,y;d==="top"||d==="bottom"?(x=d,y=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=d,x=h==="end"?"top":"bottom");const b=v-f.top-f.bottom,w=g-f.left-f.right,j=hl(v-f[x],b),k=hl(g-f[y],w),_=!t.middlewareData.shift;let S=j,A=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(S=b),_&&!h){const T=Da(f.left,0),I=Da(f.right,0),F=Da(f.top,0),E=Da(f.bottom,0);m?A=g-2*(T!==0||I!==0?T+I:Da(f.left,f.right)):S=v-2*(F!==0||E!==0?F+E:Da(f.top,f.bottom))}await c({...t,availableWidth:A,availableHeight:S});const N=await o.getDimensions(l.floating);return g!==N.width||v!==N.height?{reset:{rects:!0}}:{}}}};function Py(){return typeof window<"u"}function nf(e){return u4(e)?(e.nodeName||"").toLowerCase():"#document"}function Ua(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ws(e){var t;return(t=(u4(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function u4(e){return Py()?e instanceof Node||e instanceof Ua(e).Node:!1}function qi(e){return Py()?e instanceof Element||e instanceof Ua(e).Element:!1}function vs(e){return Py()?e instanceof HTMLElement||e instanceof Ua(e).HTMLElement:!1}function CP(e){return!Py()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ua(e).ShadowRoot}const LG=new Set(["inline","contents"]);function up(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Wi(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!LG.has(a)}const FG=new Set(["table","td","th"]);function BG(e){return FG.has(nf(e))}const UG=[":popover-open",":modal"];function Ty(e){return UG.some(t=>{try{return e.matches(t)}catch{return!1}})}const zG=["transform","translate","scale","rotate","perspective"],qG=["transform","translate","scale","rotate","perspective","filter"],WG=["paint","layout","strict","content"];function iN(e){const t=sN(),n=qi(e)?Wi(e):e;return zG.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||qG.some(r=>(n.willChange||"").includes(r))||WG.some(r=>(n.contain||"").includes(r))}function HG(e){let t=ml(e);for(;vs(t)&&!wd(t);){if(iN(t))return t;if(Ty(t))return null;t=ml(t)}return null}function sN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const VG=new Set(["html","body","#document"]);function wd(e){return VG.has(nf(e))}function Wi(e){return Ua(e).getComputedStyle(e)}function Oy(e){return qi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ml(e){if(nf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||CP(e)&&e.host||ws(e);return CP(t)?t.host:t}function d4(e){const t=ml(e);return wd(t)?e.ownerDocument?e.ownerDocument.body:e.body:vs(t)&&up(t)?t:d4(t)}function Qh(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=d4(e),s=a===((r=e.ownerDocument)==null?void 0:r.body),o=Ua(a);if(s){const l=P1(o);return t.concat(o,o.visualViewport||[],up(a)?a:[],l&&n?Qh(l):[])}return t.concat(a,Qh(a,[],n))}function P1(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function f4(e){const t=Wi(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=vs(e),s=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=qv(n)!==s||qv(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function oN(e){return qi(e)?e:e.contextElement}function Qu(e){const t=oN(e);if(!vs(t))return hs(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:s}=f4(t);let o=(s?qv(n.width):n.width)/r,l=(s?qv(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const KG=hs(0);function h4(e){const t=Ua(e);return!sN()||!t.visualViewport?KG:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function GG(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ua(e)?!1:t}function Sc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),s=oN(e);let o=hs(1);t&&(r?qi(r)&&(o=Qu(r)):o=Qu(e));const l=GG(s,n,r)?h4(s):hs(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,f=a.width/o.x,d=a.height/o.y;if(s){const h=Ua(s),m=r&&qi(r)?Ua(r):r;let g=h,v=P1(g);for(;v&&r&&m!==g;){const x=Qu(v),y=v.getBoundingClientRect(),b=Wi(v),w=y.left+(v.clientLeft+parseFloat(b.paddingLeft))*x.x,j=y.top+(v.clientTop+parseFloat(b.paddingTop))*x.y;c*=x.x,u*=x.y,f*=x.x,d*=x.y,c+=w,u+=j,g=Ua(v),v=P1(g)}}return Hv({width:f,height:d,x:c,y:u})}function lN(e,t){const n=Oy(e).scrollLeft;return t?t.left+n:Sc(ws(e)).left+n}function m4(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:lN(e,r)),s=r.top+t.scrollTop;return{x:a,y:s}}function YG(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const s=a==="fixed",o=ws(r),l=t?Ty(t.floating):!1;if(r===o||l&&s)return n;let c={scrollLeft:0,scrollTop:0},u=hs(1);const f=hs(0),d=vs(r);if((d||!d&&!s)&&((nf(r)!=="body"||up(o))&&(c=Oy(r)),vs(r))){const m=Sc(r);u=Qu(r),f.x=m.x+r.clientLeft,f.y=m.y+r.clientTop}const h=o&&!d&&!s?m4(o,c,!0):hs(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+h.x,y:n.y*u.y-c.scrollTop*u.y+f.y+h.y}}function XG(e){return Array.from(e.getClientRects())}function JG(e){const t=ws(e),n=Oy(e),r=e.ownerDocument.body,a=Da(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Da(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+lN(e);const l=-n.scrollTop;return Wi(r).direction==="rtl"&&(o+=Da(t.clientWidth,r.clientWidth)-a),{width:a,height:s,x:o,y:l}}function QG(e,t){const n=Ua(e),r=ws(e),a=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){s=a.width,o=a.height;const u=sN();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:s,height:o,x:l,y:c}}const ZG=new Set(["absolute","fixed"]);function eY(e,t){const n=Sc(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,s=vs(e)?Qu(e):hs(1),o=e.clientWidth*s.x,l=e.clientHeight*s.y,c=a*s.x,u=r*s.y;return{width:o,height:l,x:c,y:u}}function AP(e,t,n){let r;if(t==="viewport")r=QG(e,n);else if(t==="document")r=JG(ws(e));else if(qi(t))r=eY(t,n);else{const a=h4(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Hv(r)}function p4(e,t){const n=ml(e);return n===t||!qi(n)||wd(n)?!1:Wi(n).position==="fixed"||p4(n,t)}function tY(e,t){const n=t.get(e);if(n)return n;let r=Qh(e,[],!1).filter(l=>qi(l)&&nf(l)!=="body"),a=null;const s=Wi(e).position==="fixed";let o=s?ml(e):e;for(;qi(o)&&!wd(o);){const l=Wi(o),c=iN(o);!c&&l.position==="fixed"&&(a=null),(s?!c&&!a:!c&&l.position==="static"&&!!a&&ZG.has(a.position)||up(o)&&!c&&p4(e,o))?r=r.filter(f=>f!==o):a=l,o=ml(o)}return t.set(e,r),r}function nY(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Ty(t)?[]:tY(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,f)=>{const d=AP(t,f,a);return u.top=Da(d.top,u.top),u.right=hl(d.right,u.right),u.bottom=hl(d.bottom,u.bottom),u.left=Da(d.left,u.left),u},AP(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function rY(e){const{width:t,height:n}=f4(e);return{width:t,height:n}}function aY(e,t,n){const r=vs(t),a=ws(t),s=n==="fixed",o=Sc(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const c=hs(0);function u(){c.x=lN(a)}if(r||!r&&!s)if((nf(t)!=="body"||up(a))&&(l=Oy(t)),r){const m=Sc(t,!0,s,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();s&&!r&&a&&u();const f=a&&!r&&!s?m4(a,l):hs(0),d=o.left+l.scrollLeft-c.x-f.x,h=o.top+l.scrollTop-c.y-f.y;return{x:d,y:h,width:o.width,height:o.height}}function rw(e){return Wi(e).position==="static"}function EP(e,t){if(!vs(e)||Wi(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ws(e)===n&&(n=n.ownerDocument.body),n}function g4(e,t){const n=Ua(e);if(Ty(e))return n;if(!vs(e)){let a=ml(e);for(;a&&!wd(a);){if(qi(a)&&!rw(a))return a;a=ml(a)}return n}let r=EP(e,t);for(;r&&BG(r)&&rw(r);)r=EP(r,t);return r&&wd(r)&&rw(r)&&!iN(r)?n:r||HG(e)||n}const iY=async function(e){const t=this.getOffsetParent||g4,n=this.getDimensions,r=await n(e.floating);return{reference:aY(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function sY(e){return Wi(e).direction==="rtl"}const oY={convertOffsetParentRelativeRectToViewportRelativeRect:YG,getDocumentElement:ws,getClippingRect:nY,getOffsetParent:g4,getElementRects:iY,getClientRects:XG,getDimensions:rY,getScale:Qu,isElement:qi,isRTL:sY};function v4(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function lY(e,t){let n=null,r;const a=ws(e);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=e.getBoundingClientRect(),{left:f,top:d,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=fg(d),v=fg(a.clientWidth-(f+h)),x=fg(a.clientHeight-(d+m)),y=fg(f),w={rootMargin:-g+"px "+-v+"px "+-x+"px "+-y+"px",threshold:Da(0,hl(1,c))||1};let j=!0;function k(_){const S=_[0].intersectionRatio;if(S!==c){if(!j)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!v4(u,e.getBoundingClientRect())&&o(),j=!1}try{n=new IntersectionObserver(k,{...w,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,w)}n.observe(e)}return o(!0),s}function cY(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=oN(e),f=a||s?[...u?Qh(u):[],...Qh(t)]:[];f.forEach(y=>{a&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=u&&l?lY(u,n):null;let h=-1,m=null;o&&(m=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let g,v=c?Sc(e):null;c&&x();function x(){const y=Sc(e);v&&!v4(v,y)&&n(),v=y,g=requestAnimationFrame(x)}return n(),()=>{var y;f.forEach(b=>{a&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d==null||d(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const uY=RG,dY=MG,fY=TG,hY=$G,mY=OG,PP=PG,pY=DG,gY=(e,t,n)=>{const r=new Map,a={platform:oY,...n},s={...a.platform,_c:r};return EG(e,t,{...a,platform:s})};var vY=typeof document<"u",xY=function(){},uv=vY?p.useLayoutEffect:xY;function Vv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Vv(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const s=a[r];if(!(s==="_owner"&&e.$$typeof)&&!Vv(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function x4(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function TP(e,t){const n=x4(e);return Math.round(t*n)/n}function aw(e){const t=p.useRef(e);return uv(()=>{t.current=e}),t}function yY(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,d]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(r);Vv(h,r)||m(r);const[g,v]=p.useState(null),[x,y]=p.useState(null),b=p.useCallback(L=>{L!==_.current&&(_.current=L,v(L))},[]),w=p.useCallback(L=>{L!==S.current&&(S.current=L,y(L))},[]),j=s||g,k=o||x,_=p.useRef(null),S=p.useRef(null),A=p.useRef(f),N=c!=null,T=aw(c),I=aw(a),F=aw(u),E=p.useCallback(()=>{if(!_.current||!S.current)return;const L={placement:t,strategy:n,middleware:h};I.current&&(L.platform=I.current),gY(_.current,S.current,L).then($=>{const C={...$,isPositioned:F.current!==!1};O.current&&!Vv(A.current,C)&&(A.current=C,Hc.flushSync(()=>{d(C)}))})},[h,t,n,I,F]);uv(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,d(L=>({...L,isPositioned:!1})))},[u]);const O=p.useRef(!1);uv(()=>(O.current=!0,()=>{O.current=!1}),[]),uv(()=>{if(j&&(_.current=j),k&&(S.current=k),j&&k){if(T.current)return T.current(j,k,E);E()}},[j,k,E,T,N]);const M=p.useMemo(()=>({reference:_,floating:S,setReference:b,setFloating:w}),[b,w]),B=p.useMemo(()=>({reference:j,floating:k}),[j,k]),R=p.useMemo(()=>{const L={position:n,left:0,top:0};if(!B.floating)return L;const $=TP(B.floating,f.x),C=TP(B.floating,f.y);return l?{...L,transform:"translate("+$+"px, "+C+"px)",...x4(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:C}},[n,l,B.floating,f.x,f.y]);return p.useMemo(()=>({...f,update:E,refs:M,elements:B,floatingStyles:R}),[f,E,M,B,R])}const bY=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?PP({element:r.current,padding:a}).fn(n):{}:r?PP({element:r,padding:a}).fn(n):{}}}},wY=(e,t)=>({...uY(e),options:[e,t]}),jY=(e,t)=>({...dY(e),options:[e,t]}),_Y=(e,t)=>({...pY(e),options:[e,t]}),kY=(e,t)=>({...fY(e),options:[e,t]}),SY=(e,t)=>({...hY(e),options:[e,t]}),NY=(e,t)=>({...mY(e),options:[e,t]}),CY=(e,t)=>({...bY(e),options:[e,t]});var AY="Arrow",y4=p.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...s}=e;return i.jsx(Ge.svg,{...s,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});y4.displayName=AY;var EY=y4;function cN(e){const[t,n]=p.useState(void 0);return Xn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const s=a[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var uN="Popper",[b4,jl]=_r(uN),[PY,w4]=b4(uN),j4=e=>{const{__scopePopper:t,children:n}=e,[r,a]=p.useState(null);return i.jsx(PY,{scope:t,anchor:r,onAnchorChange:a,children:n})};j4.displayName=uN;var _4="PopperAnchor",k4=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,s=w4(_4,n),o=p.useRef(null),l=St(t,o);return p.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(Ge.div,{...a,ref:l})});k4.displayName=_4;var dN="PopperContent",[TY,OY]=b4(dN),S4=p.forwardRef((e,t)=>{var W,ee,X,ae,re,J;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=e,x=w4(dN,n),[y,b]=p.useState(null),w=St(t,ve=>b(ve)),[j,k]=p.useState(null),_=cN(j),S=(_==null?void 0:_.width)??0,A=(_==null?void 0:_.height)??0,N=r+(s!=="center"?"-"+s:""),T=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},I=Array.isArray(u)?u:[u],F=I.length>0,E={padding:T,boundary:I.filter(RY),altBoundary:F},{refs:O,floatingStyles:M,placement:B,isPositioned:R,middlewareData:L}=yY({strategy:"fixed",placement:N,whileElementsMounted:(...ve)=>cY(...ve,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[wY({mainAxis:a+A,alignmentAxis:o}),c&&jY({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?_Y():void 0,...E}),c&&kY({...E}),SY({...E,apply:({elements:ve,rects:z,availableWidth:q,availableHeight:ie})=>{const{width:oe,height:be}=z.reference,Se=ve.floating.style;Se.setProperty("--radix-popper-available-width",`${q}px`),Se.setProperty("--radix-popper-available-height",`${ie}px`),Se.setProperty("--radix-popper-anchor-width",`${oe}px`),Se.setProperty("--radix-popper-anchor-height",`${be}px`)}}),j&&CY({element:j,padding:l}),MY({arrowWidth:S,arrowHeight:A}),h&&NY({strategy:"referenceHidden",...E})]}),[$,C]=A4(B),U=Kn(g);Xn(()=>{R&&(U==null||U())},[R,U]);const D=(W=L.arrow)==null?void 0:W.x,P=(ee=L.arrow)==null?void 0:ee.y,H=((X=L.arrow)==null?void 0:X.centerOffset)!==0,[G,Y]=p.useState();return Xn(()=>{y&&Y(window.getComputedStyle(y).zIndex)},[y]),i.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:R?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:G,"--radix-popper-transform-origin":[(ae=L.transformOrigin)==null?void 0:ae.x,(re=L.transformOrigin)==null?void 0:re.y].join(" "),...((J=L.hide)==null?void 0:J.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(TY,{scope:n,placedSide:$,onArrowChange:k,arrowX:D,arrowY:P,shouldHideArrow:H,children:i.jsx(Ge.div,{"data-side":$,"data-align":C,...v,ref:w,style:{...v.style,animation:R?void 0:"none"}})})})});S4.displayName=dN;var N4="PopperArrow",IY={top:"bottom",right:"left",bottom:"top",left:"right"},C4=p.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,s=OY(N4,r),o=IY[s.placedSide];return i.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:i.jsx(EY,{...a,ref:n,style:{...a.style,display:"block"}})})});C4.displayName=N4;function RY(e){return e!==null}var MY=e=>({name:"transformOrigin",options:e,fn(t){var x,y,b;const{placement:n,rects:r,middlewareData:a}=t,o=((x=a.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,f]=A4(n),d={start:"0%",center:"50%",end:"100%"}[f],h=(((y=a.arrow)==null?void 0:y.x)??0)+l/2,m=(((b=a.arrow)==null?void 0:b.y)??0)+c/2;let g="",v="";return u==="bottom"?(g=o?d:`${h}px`,v=`${-c}px`):u==="top"?(g=o?d:`${h}px`,v=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,v=o?d:`${m}px`):u==="left"&&(g=`${r.floating.width+c}px`,v=o?d:`${m}px`),{data:{x:g,y:v}}}});function A4(e){const[t,n="center"]=e.split("-");return[t,n]}var Iy=j4,dp=k4,Ry=S4,My=C4,[Dy,JFe]=_r("Tooltip",[jl]),$y=jl(),E4="TooltipProvider",DY=700,T1="tooltip.open",[$Y,fN]=Dy(E4),P4=e=>{const{__scopeTooltip:t,delayDuration:n=DY,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:s}=e,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx($Y,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:s})};P4.displayName=E4;var Zh="Tooltip",[LY,Ly]=Dy(Zh),T4=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:s,disableHoverableContent:o,delayDuration:l}=e,c=fN(Zh,e.__scopeTooltip),u=$y(t),[f,d]=p.useState(null),h=ir(),m=p.useRef(0),g=o??c.disableHoverableContent,v=l??c.delayDuration,x=p.useRef(!1),[y,b]=Ca({prop:r,defaultProp:a??!1,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(T1))):c.onClose(),s==null||s(S)},caller:Zh}),w=p.useMemo(()=>y?x.current?"delayed-open":"instant-open":"closed",[y]),j=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x.current=!1,b(!0)},[b]),k=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b(!1)},[b]),_=p.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,b(!0),m.current=0},v)},[v,b]);return p.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),i.jsx(Iy,{...u,children:i.jsx(LY,{scope:t,contentId:h,open:y,stateAttribute:w,trigger:f,onTriggerChange:d,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayedRef.current?_():j()},[c.isOpenDelayedRef,_,j]),onTriggerLeave:p.useCallback(()=>{g?k():(window.clearTimeout(m.current),m.current=0)},[k,g]),onOpen:j,onClose:k,disableHoverableContent:g,children:n})})};T4.displayName=Zh;var O1="TooltipTrigger",O4=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Ly(O1,n),s=fN(O1,n),o=$y(n),l=p.useRef(null),c=St(t,l,a.onTriggerChange),u=p.useRef(!1),f=p.useRef(!1),d=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),i.jsx(dp,{asChild:!0,...o,children:i.jsx(Ge.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:Ee(e.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!s.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:Ee(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:Ee(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:Ee(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Ee(e.onBlur,a.onClose),onClick:Ee(e.onClick,a.onClose)})})});O4.displayName=O1;var FY="TooltipPortal",[QFe,BY]=Dy(FY,{forceMount:void 0}),jd="TooltipContent",I4=p.forwardRef((e,t)=>{const n=BY(jd,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...s}=e,o=Ly(jd,e.__scopeTooltip);return i.jsx(pr,{present:r||o.open,children:o.disableHoverableContent?i.jsx(R4,{side:a,...s,ref:t}):i.jsx(UY,{side:a,...s,ref:t})})}),UY=p.forwardRef((e,t)=>{const n=Ly(jd,e.__scopeTooltip),r=fN(jd,e.__scopeTooltip),a=p.useRef(null),s=St(t,a),[o,l]=p.useState(null),{trigger:c,onClose:u}=n,f=a.current,{onPointerInTransitChange:d}=r,h=p.useCallback(()=>{l(null),d(!1)},[d]),m=p.useCallback((g,v)=>{const x=g.currentTarget,y={x:g.clientX,y:g.clientY},b=VY(y,x.getBoundingClientRect()),w=KY(y,b),j=GY(v.getBoundingClientRect()),k=XY([...w,...j]);l(k),d(!0)},[d]);return p.useEffect(()=>()=>h(),[h]),p.useEffect(()=>{if(c&&f){const g=x=>m(x,f),v=x=>m(x,c);return c.addEventListener("pointerleave",g),f.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",g),f.removeEventListener("pointerleave",v)}}},[c,f,m,h]),p.useEffect(()=>{if(o){const g=v=>{const x=v.target,y={x:v.clientX,y:v.clientY},b=(c==null?void 0:c.contains(x))||(f==null?void 0:f.contains(x)),w=!YY(y,o);b?h():w&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,f,o,u,h]),i.jsx(R4,{...e,ref:s})}),[zY,qY]=Dy(Zh,{isInside:!1}),WY=fL("TooltipContent"),R4=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=e,c=Ly(jd,n),u=$y(n),{onClose:f}=c;return p.useEffect(()=>(document.addEventListener(T1,f),()=>document.removeEventListener(T1,f)),[f]),p.useEffect(()=>{if(c.trigger){const d=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&f()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,f]),i.jsx(Kc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:f,children:i.jsxs(Ry,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(WY,{children:r}),i.jsx(zY,{scope:n,isInside:!0,children:i.jsx(mV,{id:c.contentId,role:"tooltip",children:a||r})})]})})});I4.displayName=jd;var M4="TooltipArrow",HY=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=$y(n);return qY(M4,n).isInside?null:i.jsx(My,{...a,...r,ref:t})});HY.displayName=M4;function VY(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,a,s)){case s:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function KY(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function GY(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function YY(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,f=l.y,d=c.x,h=c.y;f>r!=h>r&&n<(d-u)*(r-f)/(h-f)+u&&(a=!a)}return a}function XY(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),JY(t)}function JY(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var QY=P4,ZY=T4,eX=O4,D4=I4;const I1=QY,ue=ZY,de=eX,ce=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(D4,{ref:r,sideOffset:t,className:ye("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));ce.displayName=D4.displayName;var Fy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},By=typeof window>"u"||"Deno"in globalThis;function Ni(){}function tX(e,t){return typeof e=="function"?e(t):e}function nX(e){return typeof e=="number"&&e>=0&&e!==1/0}function rX(e,t){return Math.max(e+(t||0)-Date.now(),0)}function R1(e,t){return typeof e=="function"?e(t):e}function aX(e,t){return typeof e=="function"?e(t):e}function OP(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:s,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==hN(o,t.options))return!1}else if(!tm(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||s&&!s(t))}function IP(e,t){const{exact:n,status:r,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(em(t.options.mutationKey)!==em(s))return!1}else if(!tm(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function hN(e,t){return((t==null?void 0:t.queryKeyHashFn)||em)(e)}function em(e){return JSON.stringify(e,(t,n)=>M1(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function tm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>tm(e[n],t[n])):!1}function $4(e,t){if(e===t)return e;const n=RP(e)&&RP(t);if(n||M1(e)&&M1(t)){const r=n?e:Object.keys(e),a=r.length,s=n?t:Object.keys(t),o=s.length,l=n?[]:{},c=new Set(r);let u=0;for(let f=0;f<o;f++){const d=n?f:s[f];(!n&&c.has(d)||n)&&e[d]===void 0&&t[d]===void 0?(l[d]=void 0,u++):(l[d]=$4(e[d],t[d]),l[d]===e[d]&&e[d]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function RP(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function M1(e){if(!MP(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!MP(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function MP(e){return Object.prototype.toString.call(e)==="[object Object]"}function iX(e){return new Promise(t=>{setTimeout(t,e)})}function sX(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?$4(e,t):t}function oX(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function lX(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var mN=Symbol();function L4(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===mN?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var cc,qo,sd,qM,cX=(qM=class extends Fy{constructor(){super();tn(this,cc);tn(this,qo);tn(this,sd);Ct(this,sd,t=>{if(!By&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){je(this,qo)||this.setEventListener(je(this,sd))}onUnsubscribe(){var t;this.hasListeners()||((t=je(this,qo))==null||t.call(this),Ct(this,qo,void 0))}setEventListener(t){var n;Ct(this,sd,t),(n=je(this,qo))==null||n.call(this),Ct(this,qo,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){je(this,cc)!==t&&(Ct(this,cc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof je(this,cc)=="boolean"?je(this,cc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},cc=new WeakMap,qo=new WeakMap,sd=new WeakMap,qM),F4=new cX,od,Wo,ld,WM,uX=(WM=class extends Fy{constructor(){super();tn(this,od,!0);tn(this,Wo);tn(this,ld);Ct(this,ld,t=>{if(!By&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){je(this,Wo)||this.setEventListener(je(this,ld))}onUnsubscribe(){var t;this.hasListeners()||((t=je(this,Wo))==null||t.call(this),Ct(this,Wo,void 0))}setEventListener(t){var n;Ct(this,ld,t),(n=je(this,Wo))==null||n.call(this),Ct(this,Wo,t(this.setOnline.bind(this)))}setOnline(t){je(this,od)!==t&&(Ct(this,od,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return je(this,od)}},od=new WeakMap,Wo=new WeakMap,ld=new WeakMap,WM),Kv=new uX;function dX(){let e,t;const n=new Promise((a,s)=>{e=a,t=s});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}function fX(e){return Math.min(1e3*2**e,3e4)}function B4(e){return(e??"online")==="online"?Kv.isOnline():!0}var U4=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function iw(e){return e instanceof U4}function z4(e){let t=!1,n=0,r=!1,a;const s=dX(),o=v=>{var x;r||(h(new U4(v)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>F4.isFocused()&&(e.networkMode==="always"||Kv.isOnline())&&e.canRun(),f=()=>B4(e.networkMode)&&e.canRun(),d=v=>{var x;r||(r=!0,(x=e.onSuccess)==null||x.call(e,v),a==null||a(),s.resolve(v))},h=v=>{var x;r||(r=!0,(x=e.onError)==null||x.call(e,v),a==null||a(),s.reject(v))},m=()=>new Promise(v=>{var x;a=y=>{(r||u())&&v(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var v;a=void 0,r||(v=e.onContinue)==null||v.call(e)}),g=()=>{if(r)return;let v;const x=n===0?e.initialPromise:void 0;try{v=x??e.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(d).catch(y=>{var _;if(r)return;const b=e.retry??(By?0:3),w=e.retryDelay??fX,j=typeof w=="function"?w(n,y):w,k=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(t||!k){h(y);return}n++,(_=e.onFail)==null||_.call(e,n,y),iX(j).then(()=>u()?void 0:m()).then(()=>{t?h(y):g()})})};return{promise:s,cancel:o,continue:()=>(a==null||a(),s),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?g():m().then(g),s)}}var hX=e=>setTimeout(e,0);function mX(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=hX;const s=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var na=mX(),uc,HM,q4=(HM=class{constructor(){tn(this,uc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nX(this.gcTime)&&Ct(this,uc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(By?1/0:5*60*1e3))}clearGcTimeout(){je(this,uc)&&(clearTimeout(je(this,uc)),Ct(this,uc,void 0))}},uc=new WeakMap,HM),cd,dc,ni,fc,$r,Qm,hc,Ai,Ts,VM,pX=(VM=class extends q4{constructor(t){super();tn(this,Ai);tn(this,cd);tn(this,dc);tn(this,ni);tn(this,fc);tn(this,$r);tn(this,Qm);tn(this,hc);Ct(this,hc,!1),Ct(this,Qm,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ct(this,fc,t.client),Ct(this,ni,je(this,fc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ct(this,cd,vX(this.options)),this.state=t.state??je(this,cd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=je(this,$r))==null?void 0:t.promise}setOptions(t){this.options={...je(this,Qm),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&je(this,ni).remove(this)}setData(t,n){const r=sX(this.state.data,t,this.options);return Rr(this,Ai,Ts).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Rr(this,Ai,Ts).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=je(this,$r))==null?void 0:r.promise;return(a=je(this,$r))==null||a.cancel(t),n?n.then(Ni).catch(Ni):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(je(this,cd))}isActive(){return this.observers.some(t=>aX(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===mN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>R1(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!rX(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=je(this,$r))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=je(this,$r))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),je(this,ni).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(je(this,$r)&&(je(this,hc)?je(this,$r).cancel({revert:!0}):je(this,$r).cancelRetry()),this.scheduleGc()),je(this,ni).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Rr(this,Ai,Ts).call(this,{type:"invalidate"})}fetch(t,n){var u,f,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(je(this,$r))return je(this,$r).continueRetry(),je(this,$r).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(Ct(this,hc,!0),r.signal)})},s=()=>{const h=L4(this.options,n),g=(()=>{const v={client:je(this,fc),queryKey:this.queryKey,meta:this.meta};return a(v),v})();return Ct(this,hc,!1),this.options.persister?this.options.persister(h,g,this):h(g)},l=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:je(this,fc),state:this.state,fetchFn:s};return a(h),h})();(u=this.options.behavior)==null||u.onFetch(l,this),Ct(this,dc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Rr(this,Ai,Ts).call(this,{type:"fetch",meta:(d=l.fetchOptions)==null?void 0:d.meta});const c=h=>{var m,g,v,x;iw(h)&&h.silent||Rr(this,Ai,Ts).call(this,{type:"error",error:h}),iw(h)||((g=(m=je(this,ni).config).onError)==null||g.call(m,h,this),(x=(v=je(this,ni).config).onSettled)==null||x.call(v,this.state.data,h,this)),this.scheduleGc()};return Ct(this,$r,z4({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var m,g,v,x;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(g=(m=je(this,ni).config).onSuccess)==null||g.call(m,h,this),(x=(v=je(this,ni).config).onSettled)==null||x.call(v,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,m)=>{Rr(this,Ai,Ts).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{Rr(this,Ai,Ts).call(this,{type:"pause"})},onContinue:()=>{Rr(this,Ai,Ts).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),je(this,$r).start()}},cd=new WeakMap,dc=new WeakMap,ni=new WeakMap,fc=new WeakMap,$r=new WeakMap,Qm=new WeakMap,hc=new WeakMap,Ai=new WeakSet,Ts=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...gX(r.data,this.options),fetchMeta:t.meta??null};case"success":return Ct(this,dc,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return iw(a)&&a.revert&&je(this,dc)?{...je(this,dc),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),na.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),je(this,ni).notify({query:this,type:"updated",action:t})})},VM);function gX(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:B4(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function vX(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var es,KM,xX=(KM=class extends Fy{constructor(t={}){super();tn(this,es);this.config=t,Ct(this,es,new Map)}build(t,n,r){const a=n.queryKey,s=n.queryHash??hN(a,n);let o=this.get(s);return o||(o=new pX({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){je(this,es).has(t.queryHash)||(je(this,es).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=je(this,es).get(t.queryHash);n&&(t.destroy(),n===t&&je(this,es).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){na.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return je(this,es).get(t)}getAll(){return[...je(this,es).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>OP(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>OP(t,r)):n}notify(t){na.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){na.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){na.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},es=new WeakMap,KM),ts,Jr,mc,ns,Oo,GM,yX=(GM=class extends q4{constructor(t){super();tn(this,ns);tn(this,ts);tn(this,Jr);tn(this,mc);this.mutationId=t.mutationId,Ct(this,Jr,t.mutationCache),Ct(this,ts,[]),this.state=t.state||bX(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){je(this,ts).includes(t)||(je(this,ts).push(t),this.clearGcTimeout(),je(this,Jr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ct(this,ts,je(this,ts).filter(n=>n!==t)),this.scheduleGc(),je(this,Jr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){je(this,ts).length||(this.state.status==="pending"?this.scheduleGc():je(this,Jr).remove(this))}continue(){var t;return((t=je(this,mc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,l,c,u,f,d,h,m,g,v,x,y,b,w,j,k,_,S,A;const n=()=>{Rr(this,ns,Oo).call(this,{type:"continue"})};Ct(this,mc,z4({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(N,T)=>{Rr(this,ns,Oo).call(this,{type:"failed",failureCount:N,error:T})},onPause:()=>{Rr(this,ns,Oo).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>je(this,Jr).canRun(this)}));const r=this.state.status==="pending",a=!je(this,mc).canStart();try{if(r)n();else{Rr(this,ns,Oo).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(s=je(this,Jr).config).onMutate)==null?void 0:o.call(s,t,this));const T=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));T!==this.state.context&&Rr(this,ns,Oo).call(this,{type:"pending",context:T,variables:t,isPaused:a})}const N=await je(this,mc).start();return await((f=(u=je(this,Jr).config).onSuccess)==null?void 0:f.call(u,N,t,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,N,t,this.state.context)),await((g=(m=je(this,Jr).config).onSettled)==null?void 0:g.call(m,N,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,N,null,t,this.state.context)),Rr(this,ns,Oo).call(this,{type:"success",data:N}),N}catch(N){try{throw await((b=(y=je(this,Jr).config).onError)==null?void 0:b.call(y,N,t,this.state.context,this)),await((j=(w=this.options).onError)==null?void 0:j.call(w,N,t,this.state.context)),await((_=(k=je(this,Jr).config).onSettled)==null?void 0:_.call(k,void 0,N,this.state.variables,this.state.context,this)),await((A=(S=this.options).onSettled)==null?void 0:A.call(S,void 0,N,t,this.state.context)),N}finally{Rr(this,ns,Oo).call(this,{type:"error",error:N})}}finally{je(this,Jr).runNext(this)}}},ts=new WeakMap,Jr=new WeakMap,mc=new WeakMap,ns=new WeakSet,Oo=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),na.batch(()=>{je(this,ts).forEach(r=>{r.onMutationUpdate(t)}),je(this,Jr).notify({mutation:this,type:"updated",action:t})})},GM);function bX(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $s,Ei,Zm,YM,wX=(YM=class extends Fy{constructor(t={}){super();tn(this,$s);tn(this,Ei);tn(this,Zm);this.config=t,Ct(this,$s,new Set),Ct(this,Ei,new Map),Ct(this,Zm,0)}build(t,n,r){const a=new yX({mutationCache:this,mutationId:++Hp(this,Zm)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){je(this,$s).add(t);const n=hg(t);if(typeof n=="string"){const r=je(this,Ei).get(n);r?r.push(t):je(this,Ei).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(je(this,$s).delete(t)){const n=hg(t);if(typeof n=="string"){const r=je(this,Ei).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&je(this,Ei).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=hg(t);if(typeof n=="string"){const r=je(this,Ei).get(n),a=r==null?void 0:r.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=hg(t);if(typeof n=="string"){const a=(r=je(this,Ei).get(n))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){na.batch(()=>{je(this,$s).forEach(t=>{this.notify({type:"removed",mutation:t})}),je(this,$s).clear(),je(this,Ei).clear()})}getAll(){return Array.from(je(this,$s))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>IP(n,r))}findAll(t={}){return this.getAll().filter(n=>IP(t,n))}notify(t){na.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return na.batch(()=>Promise.all(t.map(n=>n.continue().catch(Ni))))}},$s=new WeakMap,Ei=new WeakMap,Zm=new WeakMap,YM);function hg(e){var t;return(t=e.options.scope)==null?void 0:t.id}function DP(e){return{onFetch:(t,n)=>{var f,d,h,m,g;const r=t.options,a=(h=(d=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,s=((m=t.state.data)==null?void 0:m.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const x=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},y=L4(t.options,t.fetchOptions),b=async(w,j,k)=>{if(v)return Promise.reject();if(j==null&&w.pages.length)return Promise.resolve(w);const S=(()=>{const I={client:t.client,queryKey:t.queryKey,pageParam:j,direction:k?"backward":"forward",meta:t.options.meta};return x(I),I})(),A=await y(S),{maxPages:N}=t.options,T=k?lX:oX;return{pages:T(w.pages,A,N),pageParams:T(w.pageParams,j,N)}};if(a&&s.length){const w=a==="backward",j=w?jX:$P,k={pages:s,pageParams:o},_=j(r,k);l=await b(k,_,w)}else{const w=e??s.length;do{const j=c===0?o[0]??r.initialPageParam:$P(r,l);if(c>0&&j==null)break;l=await b(l,j),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var v,x;return(x=(v=t.options).persister)==null?void 0:x.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function $P(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function jX(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var qn,Ho,Vo,ud,dd,Ko,fd,hd,XM,_X=(XM=class{constructor(e={}){tn(this,qn);tn(this,Ho);tn(this,Vo);tn(this,ud);tn(this,dd);tn(this,Ko);tn(this,fd);tn(this,hd);Ct(this,qn,e.queryCache||new xX),Ct(this,Ho,e.mutationCache||new wX),Ct(this,Vo,e.defaultOptions||{}),Ct(this,ud,new Map),Ct(this,dd,new Map),Ct(this,Ko,0)}mount(){Hp(this,Ko)._++,je(this,Ko)===1&&(Ct(this,fd,F4.subscribe(async e=>{e&&(await this.resumePausedMutations(),je(this,qn).onFocus())})),Ct(this,hd,Kv.subscribe(async e=>{e&&(await this.resumePausedMutations(),je(this,qn).onOnline())})))}unmount(){var e,t;Hp(this,Ko)._--,je(this,Ko)===0&&((e=je(this,fd))==null||e.call(this),Ct(this,fd,void 0),(t=je(this,hd))==null||t.call(this),Ct(this,hd,void 0))}isFetching(e){return je(this,qn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return je(this,Ho).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=je(this,qn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=je(this,qn).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(R1(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return je(this,qn).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=je(this,qn).get(r.queryHash),s=a==null?void 0:a.state.data,o=tX(t,s);if(o!==void 0)return je(this,qn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return na.batch(()=>je(this,qn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=je(this,qn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=je(this,qn);na.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=je(this,qn);return na.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=na.batch(()=>je(this,qn).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(Ni).catch(Ni)}invalidateQueries(e,t={}){return na.batch(()=>(je(this,qn).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=na.batch(()=>je(this,qn).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,n);return n.throwOnError||(s=s.catch(Ni)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Ni)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=je(this,qn).build(this,t);return n.isStaleByTime(R1(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ni).catch(Ni)}fetchInfiniteQuery(e){return e.behavior=DP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ni).catch(Ni)}ensureInfiniteQueryData(e){return e.behavior=DP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Kv.isOnline()?je(this,Ho).resumePausedMutations():Promise.resolve()}getQueryCache(){return je(this,qn)}getMutationCache(){return je(this,Ho)}getDefaultOptions(){return je(this,Vo)}setDefaultOptions(e){Ct(this,Vo,e)}setQueryDefaults(e,t){je(this,ud).set(em(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...je(this,ud).values()],n={};return t.forEach(r=>{tm(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){je(this,dd).set(em(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...je(this,dd).values()],n={};return t.forEach(r=>{tm(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...je(this,Vo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=hN(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===mN&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...je(this,Vo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){je(this,qn).clear(),je(this,Ho).clear()}},qn=new WeakMap,Ho=new WeakMap,Vo=new WeakMap,ud=new WeakMap,dd=new WeakMap,Ko=new WeakMap,fd=new WeakMap,hd=new WeakMap,XM),kX=p.createContext(void 0),SX=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(kX.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nm(){return nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nm.apply(this,arguments)}var Xo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Xo||(Xo={}));const LP="popstate";function NX(e){e===void 0&&(e={});function t(r,a){let{pathname:s,search:o,hash:l}=r.location;return D1("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Gv(a)}return AX(t,n,null,e)}function sr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function W4(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function CX(){return Math.random().toString(36).substr(2,8)}function FP(e,t){return{usr:e.state,key:e.key,idx:t}}function D1(e,t,n,r){return n===void 0&&(n=null),nm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?rf(t):t,{state:n,key:t&&t.key||r||CX()})}function Gv(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function rf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function AX(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:s=!1}=r,o=a.history,l=Xo.Pop,c=null,u=f();u==null&&(u=0,o.replaceState(nm({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function d(){l=Xo.Pop;let x=f(),y=x==null?null:x-u;u=x,c&&c({action:l,location:v.location,delta:y})}function h(x,y){l=Xo.Push;let b=D1(v.location,x,y);u=f()+1;let w=FP(b,u),j=v.createHref(b);try{o.pushState(w,"",j)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;a.location.assign(j)}s&&c&&c({action:l,location:v.location,delta:1})}function m(x,y){l=Xo.Replace;let b=D1(v.location,x,y);u=f();let w=FP(b,u),j=v.createHref(b);o.replaceState(w,"",j),s&&c&&c({action:l,location:v.location,delta:0})}function g(x){let y=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof x=="string"?x:Gv(x);return b=b.replace(/ $/,"%20"),sr(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let v={get action(){return l},get location(){return e(a,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(LP,d),c=x,()=>{a.removeEventListener(LP,d),c=null}},createHref(x){return t(a,x)},createURL:g,encodeLocation(x){let y=g(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(x){return o.go(x)}};return v}var BP;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(BP||(BP={}));function EX(e,t,n){return n===void 0&&(n="/"),PX(e,t,n,!1)}function PX(e,t,n,r){let a=typeof t=="string"?rf(t):t,s=pN(a.pathname||"/",n);if(s==null)return null;let o=H4(e);TX(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=zX(s);l=BX(o[c],u,r)}return l}function H4(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(sr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=sl([r,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(sr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),H4(s.children,t,f,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:LX(u,s.index),routesMeta:f})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of V4(s.path))a(s,o,c)}),t}function V4(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return a?[s,""]:[s];let o=V4(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function TX(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:FX(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const OX=/^:[\w-]+$/,IX=3,RX=2,MX=1,DX=10,$X=-2,UP=e=>e==="*";function LX(e,t){let n=e.split("/"),r=n.length;return n.some(UP)&&(r+=$X),t&&(r+=RX),n.filter(a=>!UP(a)).reduce((a,s)=>a+(OX.test(s)?IX:s===""?MX:DX),r)}function FX(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function BX(e,t,n){let{routesMeta:r}=e,a={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,f=s==="/"?t:t.slice(s.length)||"/",d=zP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=zP({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!d)return null;Object.assign(a,d.params),o.push({params:a,pathname:sl([s,d.pathname]),pathnameBase:VX(sl([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=sl([s,d.pathnameBase]))}return o}function zP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=UX(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((u,f,d)=>{let{paramName:h,isOptional:m}=f;if(h==="*"){let v=l[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[d];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function UX(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),W4(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function zX(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return W4(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function pN(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function qX(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?rf(e):e;return{pathname:n?n.startsWith("/")?n:WX(n,t):t,search:KX(r),hash:GX(a)}}function WX(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function sw(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HX(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function K4(e,t){let n=HX(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function G4(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=rf(e):(a=nm({},e),sr(!a.pathname||!a.pathname.includes("?"),sw("?","pathname","search",a)),sr(!a.pathname||!a.pathname.includes("#"),sw("#","pathname","hash",a)),sr(!a.search||!a.search.includes("#"),sw("#","search","hash",a)));let s=e===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;a.pathname=h.join("/")}l=d>=0?t[d]:"/"}let c=qX(a,l),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const sl=e=>e.join("/").replace(/\/\/+/g,"/"),VX=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),KX=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,GX=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function YX(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Y4=["post","put","patch","delete"];new Set(Y4);const XX=["get",...Y4];new Set(XX);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rm(){return rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rm.apply(this,arguments)}const gN=p.createContext(null),JX=p.createContext(null),Gc=p.createContext(null),Uy=p.createContext(null),_l=p.createContext({outlet:null,matches:[],isDataRoute:!1}),X4=p.createContext(null);function QX(e,t){let{relative:n}=t===void 0?{}:t;fp()||sr(!1);let{basename:r,navigator:a}=p.useContext(Gc),{hash:s,pathname:o,search:l}=Q4(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:sl([r,o])),a.createHref({pathname:c,search:l,hash:s})}function fp(){return p.useContext(Uy)!=null}function kl(){return fp()||sr(!1),p.useContext(Uy).location}function J4(e){p.useContext(Gc).static||p.useLayoutEffect(e)}function Ka(){let{isDataRoute:e}=p.useContext(_l);return e?fJ():ZX()}function ZX(){fp()||sr(!1);let e=p.useContext(gN),{basename:t,future:n,navigator:r}=p.useContext(Gc),{matches:a}=p.useContext(_l),{pathname:s}=kl(),o=JSON.stringify(K4(a,n.v7_relativeSplatPath)),l=p.useRef(!1);return J4(()=>{l.current=!0}),p.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=G4(u,JSON.parse(o),s,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:sl([t,d.pathname])),(f.replace?r.replace:r.push)(d,f.state,f)},[t,r,o,s,e])}function eJ(){let{matches:e}=p.useContext(_l),t=e[e.length-1];return t?t.params:{}}function Q4(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=p.useContext(Gc),{matches:a}=p.useContext(_l),{pathname:s}=kl(),o=JSON.stringify(K4(a,r.v7_relativeSplatPath));return p.useMemo(()=>G4(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function tJ(e,t){return nJ(e,t)}function nJ(e,t,n,r){fp()||sr(!1);let{navigator:a}=p.useContext(Gc),{matches:s}=p.useContext(_l),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=kl(),f;if(t){var d;let x=typeof t=="string"?rf(t):t;c==="/"||(d=x.pathname)!=null&&d.startsWith(c)||sr(!1),f=x}else f=u;let h=f.pathname||"/",m=h;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=EX(e,{pathname:m}),v=oJ(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:sl([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:sl([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return t&&v?p.createElement(Uy.Provider,{value:{location:rm({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Xo.Pop}},v):v}function rJ(){let e=dJ(),t=YX(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:a},n):null,null)}const aJ=p.createElement(rJ,null);class iJ extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement(_l.Provider,{value:this.props.routeContext},p.createElement(X4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sJ(e){let{routeContext:t,match:n,children:r}=e,a=p.useContext(gN);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(_l.Provider,{value:t},r)}function oJ(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let f=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);f>=0||sr(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:m}=n,g=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,d,h)=>{let m,g=!1,v=null,x=null;n&&(m=l&&d.route.id?l[d.route.id]:void 0,v=d.route.errorElement||aJ,c&&(u<0&&h===0?(g=!0,x=null):u===h&&(g=!0,x=d.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,h+1)),b=()=>{let w;return m?w=v:g?w=x:d.route.Component?w=p.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=f,p.createElement(sJ,{match:d,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?p.createElement(iJ,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var Z4=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Z4||{}),Yv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Yv||{});function lJ(e){let t=p.useContext(gN);return t||sr(!1),t}function cJ(e){let t=p.useContext(JX);return t||sr(!1),t}function uJ(e){let t=p.useContext(_l);return t||sr(!1),t}function eF(e){let t=uJ(),n=t.matches[t.matches.length-1];return n.route.id||sr(!1),n.route.id}function dJ(){var e;let t=p.useContext(X4),n=cJ(Yv.UseRouteError),r=eF(Yv.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function fJ(){let{router:e}=lJ(Z4.UseNavigateStable),t=eF(Yv.UseNavigateStable),n=p.useRef(!1);return J4(()=>{n.current=!0}),p.useCallback(function(a,s){s===void 0&&(s={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,rm({fromRouteId:t},s)))},[e,t])}function hJ(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ta(e){sr(!1)}function mJ(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Xo.Pop,navigator:s,static:o=!1,future:l}=e;fp()&&sr(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:s,static:o,future:rm({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=rf(r));let{pathname:f="/",search:d="",hash:h="",state:m=null,key:g="default"}=r,v=p.useMemo(()=>{let x=pN(f,c);return x==null?null:{location:{pathname:x,search:d,hash:h,state:m,key:g},navigationType:a}},[c,f,d,h,m,g,a]);return v==null?null:p.createElement(Gc.Provider,{value:u},p.createElement(Uy.Provider,{children:n,value:v}))}function pJ(e){let{children:t,location:n}=e;return tJ($1(t),n)}new Promise(()=>{});function $1(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,a)=>{if(!p.isValidElement(r))return;let s=[...t,a];if(r.type===p.Fragment){n.push.apply(n,$1(r.props.children,s));return}r.type!==Ta&&sr(!1),!r.props.index||!r.props.children||sr(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=$1(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function L1(){return L1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L1.apply(this,arguments)}function gJ(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function vJ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function xJ(e,t){return e.button===0&&(!t||t==="_self")&&!vJ(e)}function F1(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function yJ(e,t){let n=F1(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(s=>{n.append(a,s)})}),n}const bJ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wJ="6";try{window.__reactRouterVersion=wJ}catch{}const jJ="startTransition",qP=tS[jJ];function _J(e){let{basename:t,children:n,future:r,window:a}=e,s=p.useRef();s.current==null&&(s.current=NX({window:a,v5Compat:!0}));let o=s.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},f=p.useCallback(d=>{u&&qP?qP(()=>c(d)):c(d)},[c,u]);return p.useLayoutEffect(()=>o.listen(f),[o,f]),p.useEffect(()=>hJ(r),[r]),p.createElement(mJ,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const kJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SJ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WP=p.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:f,viewTransition:d}=t,h=gJ(t,bJ),{basename:m}=p.useContext(Gc),g,v=!1;if(typeof u=="string"&&SJ.test(u)&&(g=u,kJ))try{let w=new URL(window.location.href),j=u.startsWith("//")?new URL(w.protocol+u):new URL(u),k=pN(j.pathname,m);j.origin===w.origin&&k!=null?u=k+j.search+j.hash:v=!0}catch{}let x=QX(u,{relative:a}),y=NJ(u,{replace:o,state:l,target:c,preventScrollReset:f,relative:a,viewTransition:d});function b(w){r&&r(w),w.defaultPrevented||y(w)}return p.createElement("a",L1({},h,{href:g||x,onClick:v||s?r:b,ref:n,target:c}))});var HP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(HP||(HP={}));var VP;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(VP||(VP={}));function NJ(e,t){let{target:n,replace:r,state:a,preventScrollReset:s,relative:o,viewTransition:l}=t===void 0?{}:t,c=Ka(),u=kl(),f=Q4(e,{relative:o});return p.useCallback(d=>{if(xJ(d,n)){d.preventDefault();let h=r!==void 0?r:Gv(u)===Gv(f);c(e,{replace:h,state:a,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,f,r,a,n,e,s,o,l])}function vN(e){let t=p.useRef(F1(e)),n=p.useRef(!1),r=kl(),a=p.useMemo(()=>yJ(r.search,n.current?null:t.current),[r.search]),s=Ka(),o=p.useCallback((l,c)=>{const u=F1(typeof l=="function"?l(a):l);n.current=!0,s("?"+u,c)},[s,a]);return[a,o]}const CJ="modulepreload",AJ=function(e){return"/"+e},KP={},Ys=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=AJ(c),c in KP)return;KP[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":CJ,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},EJ=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ys(async()=>{const{default:r}=await Promise.resolve().then(()=>af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class xN extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class PJ extends xN{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class GP extends xN{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class YP extends xN{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var B1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(B1||(B1={}));var TJ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class OJ{constructor(t,{headers:n={},customFetch:r,region:a=B1.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=EJ(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return TJ(this,void 0,void 0,function*(){try{const{headers:a,method:s,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let f;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(l["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(l["Content-Type"]="application/json",f=JSON.stringify(o)));const d=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:f}).catch(v=>{throw new PJ(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new GP(d);if(!d.ok)throw new YP(d);let m=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield d.json():m==="application/octet-stream"?g=yield d.blob():m==="text/event-stream"?g=d:m==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null,response:d}}catch(a){return{data:null,error:a,response:a instanceof YP||a instanceof GP?a.context:void 0}}})}}var va={},yN={},zy={},hp={},qy={},Wy={},IJ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_d=IJ();const RJ=_d.fetch,tF=_d.fetch.bind(_d),nF=_d.Headers,MJ=_d.Request,DJ=_d.Response,af=Object.freeze(Object.defineProperty({__proto__:null,Headers:nF,Request:MJ,Response:DJ,default:tF,fetch:RJ},Symbol.toStringTag,{value:"Module"})),$J=h9(af);var Hy={};Object.defineProperty(Hy,"__esModule",{value:!0});let LJ=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Hy.default=LJ;var rF=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wy,"__esModule",{value:!0});const FJ=rF($J),BJ=rF(Hy);let UJ=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=FJ.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,l,c;let u=null,f=null,d=null,h=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=y:f=JSON.parse(y))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,d=null,h=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const v=await s.text();try{u=JSON.parse(v),Array.isArray(u)&&s.status===404&&(f=[],u=null,h=200,m="OK")}catch{s.status===404&&v===""?(h=204,m="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,m="OK"),u&&this.shouldThrowOnError)throw new BJ.default(u)}return{error:u,data:f,count:d,status:h,statusText:m}});return this.shouldThrowOnError||(a=a.catch(s=>{var o,l,c;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};Wy.default=UJ;var zJ=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qy,"__esModule",{value:!0});const qJ=zJ(Wy);let WJ=class extends qJ.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:s=a}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const s=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:s=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};qy.default=WJ;var HJ=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hp,"__esModule",{value:!0});const VJ=HJ(qy);let KJ=class extends VJ.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let s="";a==="plain"?s="pl":a==="phrase"?s="ph":a==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};hp.default=KJ;var GJ=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zy,"__esModule",{value:!0});const Mf=GJ(hp);let YJ=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=n,this.schema=r,this.fetch=a}select(t,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Mf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const a="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Mf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:s=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new Mf.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new Mf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Mf.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};zy.default=YJ;var Vy={},Ky={};Object.defineProperty(Ky,"__esModule",{value:!0});Ky.version=void 0;Ky.version="0.0.0-automated";Object.defineProperty(Vy,"__esModule",{value:!0});Vy.DEFAULT_HEADERS=void 0;const XJ=Ky;Vy.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${XJ.version}`};var aF=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yN,"__esModule",{value:!0});const JJ=aF(zy),QJ=aF(hp),ZJ=Vy;let eQ=class iF{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},ZJ.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new JJ.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new iF(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:s}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;r||a?(o=r?"HEAD":"GET",Object.entries(n).filter(([f,d])=>d!==void 0).map(([f,d])=>[f,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([f,d])=>{l.searchParams.append(f,d)})):(o="POST",c=n);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new QJ.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};yN.default=eQ;var sf=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(va,"__esModule",{value:!0});va.PostgrestError=va.PostgrestBuilder=va.PostgrestTransformBuilder=va.PostgrestFilterBuilder=va.PostgrestQueryBuilder=va.PostgrestClient=void 0;const sF=sf(yN);va.PostgrestClient=sF.default;const oF=sf(zy);va.PostgrestQueryBuilder=oF.default;const lF=sf(hp);va.PostgrestFilterBuilder=lF.default;const cF=sf(qy);va.PostgrestTransformBuilder=cF.default;const uF=sf(Wy);va.PostgrestBuilder=uF.default;const dF=sf(Hy);va.PostgrestError=dF.default;var tQ=va.default={PostgrestClient:sF.default,PostgrestQueryBuilder:oF.default,PostgrestFilterBuilder:lF.default,PostgrestTransformBuilder:cF.default,PostgrestBuilder:uF.default,PostgrestError:dF.default};const{PostgrestClient:nQ,PostgrestQueryBuilder:a3e,PostgrestFilterBuilder:i3e,PostgrestTransformBuilder:s3e,PostgrestBuilder:o3e,PostgrestError:l3e}=tQ;class rQ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const aQ="2.15.1",iQ=`realtime-js/${aQ}`,sQ="1.0.0",U1=1e4,oQ=1e3,lQ=100;var wh;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(wh||(wh={}));var ur;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ur||(ur={}));var Ti;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ti||(Ti={}));var z1;(function(e){e.websocket="websocket"})(z1||(z1={}));var Zl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Zl||(Zl={}));class cQ{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class fF{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var jn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(jn||(jn={}));const XP=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,o)=>(s[o]=uQ(o,e,t,a),s),{})},uQ=(e,t,n,r)=>{const a=t.find(l=>l.name===e),s=a==null?void 0:a.type,o=n[e];return s&&!r.includes(s)?hF(s,o):q1(o)},hF=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return mQ(t,n)}switch(e){case jn.bool:return dQ(t);case jn.float4:case jn.float8:case jn.int2:case jn.int4:case jn.int8:case jn.numeric:case jn.oid:return fQ(t);case jn.json:case jn.jsonb:return hQ(t);case jn.timestamp:return pQ(t);case jn.abstime:case jn.date:case jn.daterange:case jn.int4range:case jn.int8range:case jn.money:case jn.reltime:case jn.text:case jn.time:case jn.timestamptz:case jn.timetz:case jn.tsrange:case jn.tstzrange:return q1(t);default:return q1(t)}},q1=e=>e,dQ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},fQ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},hQ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},mQ=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>hF(t,l))}return e},pQ=e=>typeof e=="string"?e.replace(" ","T"):e,mF=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ow{constructor(t,n,r={},a=U1){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var JP;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(JP||(JP={}));class jh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=jh.syncState(this.state,a,s,o),this.pendingDiffs.forEach(c=>{this.state=jh.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=jh.syncDiff(this.state,a,s,o),l())}),this.onJoin((a,s,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:o})}),this.onLeave((a,s,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const s=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(s,(u,f)=>{o[u]||(c[u]=f)}),this.map(o,(u,f)=>{const d=s[u];if(d){const h=f.map(x=>x.presence_ref),m=d.map(x=>x.presence_ref),g=f.filter(x=>m.indexOf(x.presence_ref)<0),v=d.filter(x=>h.indexOf(x.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=f}),this.syncDiff(s,{joins:l,leaves:c},r,a)}static syncDiff(t,n,r,a){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(s,(l,c)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),f.length>0){const d=t[l].map(m=>m.presence_ref),h=f.filter(m=>d.indexOf(m.presence_ref)<0);t[l].unshift(...h)}r(l,f,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const f=c.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var QP;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(QP||(QP={}));var _h;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(_h||(_h={}));var Rs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Rs||(Rs={}));class bN{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ur.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ow(this,Ti.join,this.params,this.timeout),this.rejoinTimer=new fF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ur.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ur.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ti.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new jh(this),this.broadcastEndpointURL=mF(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ur.closed){const{config:{broadcast:s,presence:o,private:l}}=this.params,c=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[_h.PRESENCE]&&this.bindings[_h.PRESENCE].length>0,f={},d={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(Rs.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(Rs.CLOSED)),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var m;if(this.socket.setAuth(),h===void 0){t==null||t(Rs.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,x=[];for(let y=0;y<v;y++){const b=g[y],{filter:{event:w,schema:j,table:k,filter:_}}=b,S=h&&h[y];if(S&&S.event===w&&S.schema===j&&S.table===k&&S.filter===_)x.push(Object.assign(Object.assign({},b),{id:S.id}));else{this.unsubscribe(),this.state=ur.errored,t==null||t(Rs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Rs.SUBSCRIBED);return}}).receive("error",h=>{this.state=ur.errored,t==null||t(Rs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Rs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ur.joined&&t===_h.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ur.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ti.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new ow(this,Ti.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ur.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,s=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(s),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new ow(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>lQ){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,s;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:f}=Ti;if(r&&[l,c,u,f].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,v,x;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(m=>m.callback(h,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var g,v,x,y,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const j=m.id,k=(g=m.filter)===null||g===void 0?void 0:g.event;return j&&((v=n.ids)===null||v===void 0?void 0:v.includes(j))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const j=(b=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return j==="*"||j===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:x,commit_timestamp:y,type:b,errors:w}=g;h=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:y,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(h,r)})}_isClosed(){return this.state===ur.closed}_isJoined(){return this.state===ur.joined}_isJoining(){return this.state===ur.joining}_isLeaving(){return this.state===ur.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),s={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&bN.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ti.close,{},t)}_onError(t){this._on(Ti.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ur.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=XP(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=XP(t.columns,t.old_record)),n}}const ZP=()=>{},mg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},gQ=[1e3,2e3,5e3,1e4],vQ=1e4,xQ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yQ{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=U1,this.transport=null,this.heartbeatIntervalMs=mg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ZP,this.ref=0,this.reconnectTimer=null,this.logger=ZP,this.conn=null,this.sendBuffer=[],this.serializer=new cQ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let s;return a?s=a:typeof fetch>"u"?s=(...o)=>Ys(async()=>{const{default:l}=await Promise.resolve().then(()=>af);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${z1.websocket}`,this.httpEndpoint=mF(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rQ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sQ}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case wh.connecting:return Zl.Connecting;case wh.open:return Zl.Open;case wh.closing:return Zl.Closing;default:return Zl.Closed}}isConnected(){return this.connectionState()===Zl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(s=>s.topic===r);if(a)return a;{const s=new bN(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:a,ref:s}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${s})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(oQ,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},mg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:s,ref:o}=n,l=o?`(${o})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ti.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([xQ],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:iQ};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Ti.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new fF(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},mg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,s,o,l,c,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:U1,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:mg.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:f=>gQ[f-1]||vQ,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(f,d)=>d(JSON.stringify(f)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class wN extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function dr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class bQ extends wN{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class W1 extends wN{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var wQ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const pF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ys(async()=>{const{default:r}=await Promise.resolve().then(()=>af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},jQ=()=>wQ(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ys(()=>Promise.resolve().then(()=>af),void 0)).Response:Response}),H1=e=>{if(Array.isArray(e))return e.map(n=>H1(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=H1(r)}),t},_Q=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Yc=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const lw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),kQ=(e,t,n)=>Yc(void 0,void 0,void 0,function*(){const r=yield jQ();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const s=e.status||500,o=(a==null?void 0:a.statusCode)||s+"";t(new bQ(lw(a),s,o))}).catch(a=>{t(new W1(lw(a),a))}):t(new W1(lw(e),e))}),SQ=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(_Q(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function mp(e,t,n,r,a,s){return Yc(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,SQ(t,r,a,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>kQ(c,l,r))})})}function Xv(e,t,n,r){return Yc(this,void 0,void 0,function*(){return mp(e,"GET",t,n,r)})}function Qi(e,t,n,r,a){return Yc(this,void 0,void 0,function*(){return mp(e,"POST",t,r,a,n)})}function V1(e,t,n,r,a){return Yc(this,void 0,void 0,function*(){return mp(e,"PUT",t,r,a,n)})}function NQ(e,t,n,r){return Yc(this,void 0,void 0,function*(){return mp(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function gF(e,t,n,r,a){return Yc(this,void 0,void 0,function*(){return mp(e,"DELETE",t,r,a,n)})}var Yr=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const CQ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},eT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class AQ{constructor(t,n={},r,a){this.url=t,this.headers=n,this.bucketId=r,this.fetch=pF(a)}uploadOrUpdate(t,n,r,a){return Yr(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},eT),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),d=yield(t=="PUT"?V1:Qi)(this.fetch,`${this.url}/object/${f}`,s,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(dr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return Yr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return Yr(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:eT.upsert},a),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const d=yield V1(this.fetch,l.toString(),c,{headers:f});return{data:{path:s,fullPath:d.Key},error:null}}catch(c){if(dr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Yr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const s=yield Qi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new wN("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}update(t,n,r){return Yr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Yr(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}copy(t,n,r){return Yr(this,void 0,void 0,function*(){try{return{data:{path:(yield Qi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return Yr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),s=yield Qi(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return Yr(this,void 0,void 0,function*(){try{const a=yield Qi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}download(t,n){return Yr(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Xv(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(dr(l))return{data:null,error:l};throw l}})}info(t){return Yr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Xv(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:H1(r),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}exists(t){return Yr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield NQ(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(dr(r)&&r instanceof W1){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&a.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Yr(this,void 0,void 0,function*(){try{return{data:yield gF(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}list(t,n,r){return Yr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},CQ),n),{prefix:t||""});return{data:yield Qi(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}listV2(t,n){return Yr(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield Qi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const EQ="2.11.0",PQ={"X-Client-Info":`storage-js/${EQ}`};var iu=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class TQ{constructor(t,n={},r,a){const s=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},PQ),n),this.fetch=pF(r)}listBuckets(){return iu(this,void 0,void 0,function*(){try{return{data:yield Xv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(dr(t))return{data:null,error:t};throw t}})}getBucket(t){return iu(this,void 0,void 0,function*(){try{return{data:yield Xv(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return iu(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return iu(this,void 0,void 0,function*(){try{return{data:yield V1(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return iu(this,void 0,void 0,function*(){try{return{data:yield Qi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return iu(this,void 0,void 0,function*(){try{return{data:yield gF(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}}class OQ extends TQ{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new AQ(this.url,this.headers,t,this.fetch)}}const IQ="2.55.0";let sh="";typeof Deno<"u"?sh="deno":typeof document<"u"?sh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?sh="react-native":sh="node";const RQ={"X-Client-Info":`supabase-js-${sh}/${IQ}`},MQ={headers:RQ},DQ={schema:"public"},$Q={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},LQ={};var FQ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const BQ=e=>{let t;return e?t=e:typeof fetch>"u"?t=tF:t=fetch,(...n)=>t(...n)},UQ=()=>typeof Headers>"u"?nF:Headers,zQ=(e,t,n)=>{const r=BQ(n),a=UQ();return(s,o)=>FQ(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var qQ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function WQ(e){return e.endsWith("/")?e:e+"/"}function HQ(e,t){var n,r;const{db:a,auth:s,realtime:o,global:l}=e,{db:c,auth:u,realtime:f,global:d}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},f),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>qQ(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const vF="2.71.1",wu=30*1e3,K1=3,cw=K1*wu,VQ="http://localhost:9999",KQ="supabase.auth.token",GQ={"X-Client-Info":`gotrue-js/${vF}`},G1="X-Supabase-Api-Version",xF={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},YQ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,XQ=10*60*1e3;class jN extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function At(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class JQ extends jN{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function QQ(e){return At(e)&&e.name==="AuthApiError"}class yF extends jN{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Sl extends jN{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Io extends Sl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ZQ(e){return At(e)&&e.name==="AuthSessionMissingError"}class pg extends Sl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gg extends Sl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class vg extends Sl{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function eZ(e){return At(e)&&e.name==="AuthImplicitGrantRedirectError"}class tT extends Sl{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Y1 extends Sl{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function uw(e){return At(e)&&e.name==="AuthRetryableFetchError"}class nT extends Sl{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class X1 extends Sl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Jv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rT=` 	
\r=`.split(""),tZ=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<rT.length;t+=1)e[rT[t].charCodeAt(0)]=-2;for(let t=0;t<Jv.length;t+=1)e[Jv[t].charCodeAt(0)]=t;return e})();function aT(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Jv[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Jv[r]),t.queuedBits-=6}}function bF(e,t,n){const r=tZ[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function iT(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=o=>{aZ(o,r,n)};for(let o=0;o<e.length;o+=1)bF(e.charCodeAt(o),a,s);return t.join("")}function nZ(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function rZ(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}nZ(r,t)}}function aZ(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function iZ(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)bF(e.charCodeAt(a),n,r);return new Uint8Array(t)}function sZ(e){const t=[];return rZ(e,n=>t.push(n)),new Uint8Array(t)}function oZ(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>aT(a,n,r)),aT(null,n,r),t.join("")}function lZ(e){return Math.round(Date.now()/1e3)+e}function cZ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const _i=()=>typeof window<"u"&&typeof document<"u",Bl={tested:!1,writable:!1},wF=()=>{if(!_i())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Bl.tested)return Bl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Bl.tested=!0,Bl.writable=!0}catch{Bl.tested=!0,Bl.writable=!1}return Bl.writable};function uZ(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const jF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Ys(async()=>{const{default:r}=await Promise.resolve().then(()=>af);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},dZ=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ju=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ul=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Eo=async(e,t)=>{await e.removeItem(t)};class Gy{constructor(){this.promise=new Gy.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Gy.promiseConstructor=Promise;function dw(e){const t=e.split(".");if(t.length!==3)throw new X1("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!YQ.test(t[r]))throw new X1("JWT not in base64url format");return{header:JSON.parse(iT(t[0])),payload:JSON.parse(iT(t[1])),signature:iZ(t[2]),raw:{header:t[0],payload:t[1]}}}async function fZ(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function hZ(e,t){return new Promise((r,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){a(o);return}}})()})}function mZ(e){return("0"+e.toString(16)).substr(-2)}function pZ(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let s=0;s<56;s++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,mZ).join("")}async function gZ(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function vZ(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await gZ(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function su(e,t,n=!1){const r=pZ();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await ju(e,`${t}-code-verifier`,a);const s=await vZ(r);return[s,r===s?"plain":"s256"]}const xZ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yZ(e){const t=e.headers.get(G1);if(!t||!t.match(xZ))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function bZ(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function wZ(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const jZ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ou(e){if(!jZ.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fw(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sT(e){return JSON.parse(JSON.stringify(e))}var _Z=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Vl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),kZ=[502,503,504];async function oT(e){var t;if(!dZ(e))throw new Y1(Vl(e),0);if(kZ.includes(e.status))throw new Y1(Vl(e),e.status);let n;try{n=await e.json()}catch(s){throw new yF(Vl(s),s)}let r;const a=yZ(e);if(a&&a.getTime()>=xF["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new nT(Vl(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Io}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new nT(Vl(n),e.status,n.weak_password.reasons);throw new JQ(Vl(n),e.status||500,r)}const SZ=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function qt(e,t,n,r){var a;const s=Object.assign({},r==null?void 0:r.headers);s[G1]||(s[G1]=xF["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await NZ(e,t,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function NZ(e,t,n,r,a,s){const o=SZ(t,r,a,s);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new Y1(Vl(c),0)}if(l.ok||await oT(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await oT(c)}}function Os(e){var t;let n=null;PZ(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=lZ(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function lT(e){const t=Os(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Uo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function CZ(e){return{data:e,error:null}}function AZ(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s}=e,o=_Z(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function EZ(e){return e}function PZ(e){return e.access_token&&e.refresh_token&&e.expires_in}const hw=["global","local","others"];var TZ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class OZ{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=jF(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=hw[0]){if(hw.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hw.join(", ")}`);try{return await qt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await qt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Uo})}catch(r){if(At(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=TZ(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await qt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:AZ,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(At(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await qt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Uo})}catch(n){if(At(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,s,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await qt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:EZ});if(f.error)throw f.error;const d=await f.json(),h=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(At(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ou(t);try{return await qt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Uo})}catch(n){if(At(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ou(t);try{return await qt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Uo})}catch(r){if(At(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){ou(t);try{return await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Uo})}catch(r){if(At(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){ou(t.userId);try{const{data:n,error:r}=await qt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(At(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ou(t.userId),ou(t.id);try{return{data:await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}}}function cT(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function IZ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const lu={debug:!!(globalThis&&wF()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _F extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class RZ extends _F{}async function MZ(e,t,n){lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),lu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new RZ(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(lu.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}IZ();const DZ={url:VQ,storageKey:KQ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:GQ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function uT(e,t,n){return await n()}const cu={};class am{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=am.nextInstanceID,am.nextInstanceID+=1,this.instanceID>0&&_i()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},DZ),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new OZ({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=jF(a.fetch),this.lock=a.lock||uT,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:_i()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=MZ:this.lock=uT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:wF()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=cT(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=cT(this.memoryStorage)),_i()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=cu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){cu[this.storageKey]=Object.assign(Object.assign({},cu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=cu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){cu[this.storageKey]=Object.assign(Object.assign({},cu[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vF}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=uZ(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),_i()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),eZ(s)){const c=(t=s.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return At(n)?{error:n}:{error:new yF("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const s=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Os}),{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(At(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,a;try{let s;if("email"in t){const{email:f,password:d,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await su(this.storage,this.storageKey)),s=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:f,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:Os})}else if("phone"in t){const{phone:f,password:d,options:h}=t;s=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Os})}else throw new gg("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(At(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:o,options:l}=t;n=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:lT})}else if("phone"in t){const{phone:s,password:o,options:l}=t;n=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:lT})}else throw new gg("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new pg}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(At(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,a,s,o,l,c,u,f,d,h,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:x,wallet:y,statement:b,options:w}=t;let j;if(_i())if(typeof y=="object")j=y;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))j=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=y}const k=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const _=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),b?{statement:b}:null));let S;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")S=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)S=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),v=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${k.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(a=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((d=(f=w==null?void 0:w.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...w.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const _=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=_}}try{const{data:x,error:y}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:oZ(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Os});if(y)throw y;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new pg}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:y})}catch(x){if(At(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await Ul(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:s,error:o}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Os});if(await Eo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new pg}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:o})}catch(s){if(At(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:s,nonce:o}=t,l=await qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Os}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new pg}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(At(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,s,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await su(this.storage,this.storageKey));const{error:d}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:f}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new gg("You must provide either an email or phone number.")}catch(l){if(At(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,s;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await qt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:Os});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(At(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await su(this.storage,this.storageKey)),await qt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:CZ})}catch(s){if(At(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Io;const{error:a}=await qt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(At(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:s}=t,{error:o}=await qt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:s}=t,{data:o,error:l}=await qt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new gg("You must provide either an email or phone number and a type")}catch(n){if(At(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ul(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<cw:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Ul(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=fw()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,f)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,f))})}return{data:{session:t},error:null}}const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Uo}):await this._useSession(async n=>{var r,a,s;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Io}:await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:Uo})})}catch(n){if(At(n))return ZQ(n)&&(await this._removeSession(),await Eo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:s}=r;if(s)throw s;if(!a.session)throw new Io;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await su(this.storage,this.storageKey));const{data:u,error:f}=await qt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Uo});if(f)throw f;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(At(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Io;const n=Date.now()/1e3;let r=n,a=!0,s=null;const{payload:o}=dw(t.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(At(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Io;const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(At(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!_i())throw new vg("No browser detected.");if(t.error||t.error_description||t.error_code)throw new vg(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new tT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vg("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new tT("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!s||!l||!o||!u)throw new vg("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(l);let h=f+d;c&&(h=parseInt(c));const m=h-f;m*1e3<=wu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const g=h-d;f-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,f):f-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,f);const{data:v,error:x}=await this._getUser(s);if(x)throw x;const y={provider_token:r,provider_refresh_token:a,access_token:s,expires_in:d,expires_at:h,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if(At(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ul(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:s}=n;if(s)return{error:s};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(QQ(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Eo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=cZ(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await su(this.storage,this.storageKey,!0));try{return await qt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(At(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:a}=await this._useSession(async s=>{var o,l,c,u,f;const{data:d,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await qt(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(a)throw a;return _i()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(At(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:s,error:o}=n;if(o)throw o;return await qt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(At(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await hZ(async a=>(a>0&&await fZ(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await qt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Os})),(a,s)=>{const o=200*Math.pow(2,a);return s&&uw(s)&&Date.now()+o-r<wu})}catch(r){if(this._debug(n,"error",r),At(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),_i()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Ul(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Ul(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await ju(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:fw()}else if(a&&!a.user&&!a.user){const o=await Ul(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Eo(this.storage,this.storageKey+"-user"),await ju(this.storage,this.storageKey,a)):a.user=fw()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const s=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<cw;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${cw}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),uw(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Io;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Gy;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new Io;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(a,"error",s),At(s)){const o={session:null,error:s};return uw(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ju(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const s=sT(a);await ju(this.storage,this.storageKey,s)}else{const a=sT(n);await ju(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Eo(this.storage,this.storageKey),await Eo(this.storage,this.storageKey+"-code-verifier"),await Eo(this.storage,this.storageKey+"-user"),this.userStorage&&await Eo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&_i()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),wu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/wu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${wu}ms, refresh threshold is ${K1} ticks`),a<=K1&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof _F)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_i()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await su(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);a.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;return s?{data:null,error:s}:await qt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(At(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:s,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await qt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(At(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:l}=await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(At(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;return s?{data:null,error:s}:await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(At(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:s}=t;if(s)return{data:null,error:s};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=dw(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const f=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+XQ>a)return r;const{data:s,error:o}=await qt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,r=s.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};r=m.session.access_token}const{header:a,payload:s,signature:o,raw:{header:l,payload:c}}=dw(r);n!=null&&n.allowExpired||bZ(s.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:a,signature:o},error:null}}const f=wZ(a.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,o,sZ(`${l}.${c}`)))throw new X1("Invalid JWT signature");return{data:{claims:s,header:a,signature:o},error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}}}am.nextInstanceID=0;const $Z=am;class LZ extends $Z{constructor(t){super(t)}}var FZ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class BZ{constructor(t,n,r){var a,s,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=WQ(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:DQ,realtime:LQ,auth:Object.assign(Object.assign({},$Q),{storageKey:u}),global:MQ},d=HQ(r??{},f);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=zQ(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new nQ(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new OQ(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new OJ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return FZ(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,storageKey:s,flowType:o,lock:l,debug:c},u,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new LZ({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,flowType:o,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new yQ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const kF=(e,t,n)=>new BZ(e,t,n);function UZ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}UZ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Kl=(e=>(e.CLOSED="CLOSED",e.OPEN="OPEN",e.HALF_OPEN="HALF_OPEN",e))(Kl||{});const zZ={failureThreshold:5,resetTimeout:3e4,successThreshold:2,monitoringPeriod:1e4,timeout:1e4},qZ="circuit_breaker_";class WZ{constructor(t,n={}){zt(this,"config");zt(this,"state");zt(this,"failures",[]);zt(this,"successes",0);zt(this,"stateChangedAt");zt(this,"lastFailureTime",null);zt(this,"lastSuccessTime",null);zt(this,"totalRequests",0);zt(this,"listeners",[]);zt(this,"storageKey");this.name=t,this.config={...zZ,...n},this.storageKey=`${qZ}${t}`,this.state=this.loadState()||"CLOSED",this.stateChangedAt=Date.now(),this.failures=[],this.loadFromStorage()}async execute(t,n){if(this.totalRequests++,!this.canExecute()){const a=new Error(`Circuit breaker is ${this.state}. Request rejected.`);throw a.circuitBreaker={state:this.state,name:this.name},a}const r=n||this.config.timeout;try{const a=new Promise((o,l)=>{setTimeout(()=>{l(new Error(`Request timeout after ${r}ms`))},r)}),s=await Promise.race([t(),a]);return this.recordSuccess(),s}catch(a){throw a instanceof Error&&a.message.includes("timeout")&&this.emitEvent({type:"timeout"}),this.recordFailure(a),a}}canExecute(){const t=Date.now();switch(this.state){case"CLOSED":return!0;case"OPEN":return t-this.stateChangedAt>=this.config.resetTimeout?(this.transitionTo("HALF_OPEN"),!0):!1;case"HALF_OPEN":return!0;default:return!1}}recordSuccess(){this.lastSuccessTime=Date.now(),this.emitEvent({type:"success"}),this.state==="HALF_OPEN"&&(this.successes++,this.successes>=this.config.successThreshold&&(this.transitionTo("CLOSED"),this.successes=0,this.failures=[])),this.saveToStorage()}recordFailure(t){const n=Date.now();this.lastFailureTime=n,this.emitEvent({type:"failure",error:t}),this.failures.push({time:n});const r=n-this.config.monitoringPeriod;this.failures=this.failures.filter(a=>a.time>r),(this.state==="CLOSED"||this.state==="HALF_OPEN")&&this.failures.length>=this.config.failureThreshold&&(this.transitionTo("OPEN"),this.successes=0),this.state==="HALF_OPEN"&&(this.transitionTo("OPEN"),this.successes=0),this.saveToStorage()}transitionTo(t){if(this.state===t)return;const n=this.state;this.state=t,this.stateChangedAt=Date.now(),this.emitEvent({type:"stateChange",from:n,to:t}),this.saveToStorage()}getStats(){return{failures:this.failures.length,successes:this.successes,state:this.state,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime,stateChangedAt:this.stateChangedAt,totalRequests:this.totalRequests}}getState(){return this.state}getConfig(){return{...this.config}}updateConfig(t){this.config={...this.config,...t};try{if(typeof localStorage<"u"){const n=localStorage.getItem(this.storageKey),r=n?JSON.parse(n):{};r.config=this.config,localStorage.setItem(this.storageKey,JSON.stringify(r))}}catch(n){console.warn("Failed to save circuit breaker config:",n)}}reset(){this.transitionTo("CLOSED"),this.failures=[],this.successes=0,this.lastFailureTime=null,this.lastSuccessTime=null,this.totalRequests=0,this.saveToStorage()}open(){this.transitionTo("OPEN")}on(t,n){this.listeners.push(n)}off(t){this.listeners=this.listeners.filter(n=>n!==t)}emitEvent(t){this.listeners.forEach(n=>{try{n(t)}catch(r){console.error("Circuit breaker event listener error:",r)}})}saveToStorage(){try{if(typeof localStorage<"u"){const t={state:this.state,stateChangedAt:this.stateChangedAt,failures:this.failures,successes:this.successes,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime,totalRequests:this.totalRequests};localStorage.setItem(this.storageKey,JSON.stringify(t))}}catch(t){console.warn("Failed to save circuit breaker state:",t)}}loadState(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t)return JSON.parse(t).state}}catch(t){console.warn("Failed to load circuit breaker state:",t)}return null}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t){const n=JSON.parse(t);n.config&&(this.config={...this.config,...n.config}),this.state=n.state||"CLOSED",this.stateChangedAt=n.stateChangedAt||Date.now(),this.failures=(n.failures||[]).filter(r=>{const a=Date.now()-this.config.monitoringPeriod;return r.time>a}),this.successes=n.successes||0,this.lastFailureTime=n.lastFailureTime||null,this.lastSuccessTime=n.lastSuccessTime||null,this.totalRequests=n.totalRequests||0,this.state==="OPEN"&&Date.now()-this.stateChangedAt>=this.config.resetTimeout&&this.transitionTo("HALF_OPEN")}}}catch(t){console.warn("Failed to load circuit breaker state:",t)}}}const Jt=new WZ("database",{failureThreshold:5,resetTimeout:3e4,successThreshold:2,monitoringPeriod:1e4,timeout:1e4}),HZ=["ECONNRESET","ENOTFOUND","ETIMEDOUT","ECONNREFUSED","NetworkError"],VZ=["Timeout","ETIMEDOUT"],KZ=[500,502,503,504,429];function Ci(e){var a;const t=(e==null?void 0:e.message)||String(e),n=(e==null?void 0:e.code)||(e==null?void 0:e.error_code)||"",r=(e==null?void 0:e.status)||(e==null?void 0:e.statusCode)||((a=e==null?void 0:e.response)==null?void 0:a.status);if(HZ.some(s=>t.includes(s)||n.includes(s)||t.toLowerCase().includes("network")))return{category:"NETWORK",isRetryable:!0,retryDelay:1e3,userMessage:"Koneksi jaringan bermasalah. Mencoba lagi...",originalError:e};if(VZ.some(s=>t.includes(s)||n.includes(s)||t.toLowerCase().includes("timeout")))return{category:"TIMEOUT",isRetryable:!0,retryDelay:2e3,userMessage:"Permintaan memakan waktu terlalu lama. Mencoba lagi...",originalError:e};if(r===429||t.includes("rate limit")||t.includes("too many requests")||n==="PGRST301")return{category:"RATE_LIMIT",isRetryable:!0,retryDelay:5e3,userMessage:"Terlalu banyak permintaan. Mohon tunggu sebentar...",originalError:e};if(r===401||r===403||t.includes("JWT")||t.includes("token")||t.includes("unauthorized")||t.includes("forbidden")||n==="PGRST301"||n==="PGRST302")return{category:"AUTH_ERROR",isRetryable:!1,userMessage:"Sesi Anda telah berakhir. Silakan login kembali.",originalError:e};if(r===400||t.includes("validation")||t.includes("invalid")||t.includes("constraint")||n==="23505"||n==="23503"||n==="23514")return{category:"VALIDATION_ERROR",isRetryable:!1,userMessage:"Data yang dimasukkan tidak valid. Silakan periksa kembali.",originalError:e};if(KZ.includes(r)||n!=null&&n.startsWith("PGRST")||n!=null&&n.startsWith("P0001")||t.includes("database")||t.includes("connection")){const s=r>=500||r===429;return{category:"DATABASE_ERROR",isRetryable:s,retryDelay:s?2e3:void 0,userMessage:s?"Database sedang bermasalah. Mencoba lagi...":"Terjadi kesalahan database. Silakan coba lagi nanti.",originalError:e}}return r===404?{category:"VALIDATION_ERROR",isRetryable:!1,userMessage:"Data yang dicari tidak ditemukan.",originalError:e}:{category:"UNKNOWN",isRetryable:!0,retryDelay:1e3,userMessage:"Terjadi kesalahan. Mencoba lagi...",originalError:e}}const SF={reads:{limit:100,window:6e4},writes:{limit:30,window:6e4},rpc:{limit:20,window:6e4},auth:{limit:10,window:6e4}},GZ="rate_limit_";class J1{constructor(t="default",n={}){zt(this,"config");zt(this,"requests",new Map);zt(this,"storageKey");this.name=t,this.config={...SF,...n},this.storageKey=`${GZ}${t}`,this.loadFromStorage(),typeof window<"u"&&setInterval(()=>this.cleanup(),6e4)}checkLimit(t,n,r){const a=this.getKey(t,n,r),s=Date.now(),o=this.getConfig(n);let l=this.requests.get(a)||[];const c=s-o.window;l=l.filter(v=>v.timestamp>c);const u=l.length,f=u<o.limit,d=l[0],h=d?d.timestamp+o.window:s+o.window,m=f?void 0:Math.ceil((h-s)/1e3)*1e3,g={allowed:f,remaining:Math.max(0,o.limit-u-1),resetAt:h,retryAfter:m};return f&&(l.push({timestamp:s,operation:n,endpoint:r}),this.requests.set(a,l),this.saveToStorage(a,l)),g}recordRequest(t,n,r){const a=this.getKey(t,n,r),s=Date.now();let o=this.requests.get(a)||[];o.push({timestamp:s,operation:n,endpoint:r});const l=this.getConfig(n),c=s-l.window;o=o.filter(u=>u.timestamp>c),this.requests.set(a,o),this.saveToStorage(a,o)}getUsage(t,n,r){const a=this.getKey(t,n,r),s=Date.now(),o=this.getConfig(n);let l=this.requests.get(a)||[];const c=s-o.window;l=l.filter(d=>d.timestamp>c);const u=l[0],f=u?u.timestamp+o.window:s+o.window;return{count:l.length,limit:o.limit,resetAt:f}}reset(t,n,r){if(n){const a=this.getKey(t,n,r);this.requests.delete(a),this.deleteFromStorage(a)}else{const a=t?`${t}:`:"anonymous:";for(const s of this.requests.keys())s.startsWith(a)&&(this.requests.delete(s),this.deleteFromStorage(s))}}cleanup(){const t=Date.now(),n=Math.max(this.config.reads.window,this.config.writes.window,this.config.rpc.window,this.config.auth.window),r=t-n;for(const[a,s]of this.requests.entries()){const o=s.filter(l=>l.timestamp>r);o.length===0?(this.requests.delete(a),this.deleteFromStorage(a)):o.length!==s.length&&(this.requests.set(a,o),this.saveToStorage(a,o))}}getConfig(t){return this.config[t]}getKey(t,n,r){return`${t||"anonymous"}:${n}${r?`:${r}`:""}`}saveToStorage(t,n){try{if(typeof localStorage<"u"){const r=`${this.storageKey}:${t}`,a=Date.now(),s=n.filter(o=>a-o.timestamp<6e4);localStorage.setItem(r,JSON.stringify({requests:s,savedAt:a}))}}catch(r){console.warn("Failed to save rate limit data:",r)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=Date.now(),n=`${this.storageKey}:`;for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a&&a.startsWith(n))try{const s=JSON.parse(localStorage.getItem(a)||"{}"),o=s.savedAt||0;if(t-o<3e5){const l=(s.requests||[]).filter(c=>{const u=c.operation||"read",f=this.getConfig(u);return t-c.timestamp<f.window});if(l.length>0){const c=a.replace(n,"");this.requests.set(c,l)}else localStorage.removeItem(a)}else localStorage.removeItem(a)}catch{localStorage.removeItem(a)}}}}catch(t){console.warn("Failed to load rate limit data:",t)}}deleteFromStorage(t){try{if(typeof localStorage<"u"){const n=`${this.storageKey}:${t}`;localStorage.removeItem(n)}}catch{}}}new J1("default",SF);class YZ{constructor(){zt(this,"queue",[]);zt(this,"batchSize",50);zt(this,"batchInterval",3e4);zt(this,"intervalId",null);zt(this,"enabled",!0);zt(this,"lastFlushTime",0);zt(this,"flushThrottle",1e4);typeof window<"u"&&this.startBatching()}record(t){if(!this.enabled)return;this.queue.length>=1e3&&(this.queue=this.queue.slice(-500)),this.queue.push({...t,timestamp:Date.now()});const n=Date.now();this.queue.length>=this.batchSize&&n-this.lastFlushTime>=this.flushThrottle&&this.flush()}startBatching(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.flush()},this.batchInterval)}stopBatching(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}async flush(){if(this.queue.length===0)return;const t=Date.now();if(t-this.lastFlushTime<this.flushThrottle)return;const n=[...this.queue];this.queue=[],this.lastFlushTime=t;try{const{error:r}=await ne.from("circuit_breaker_metrics").insert(n.map(a=>({operation_type:a.operationType,endpoint:a.endpoint||null,user_id:a.userId||null,circuit_breaker_state:a.circuitBreakerState,success:a.success,error_category:a.errorCategory||null,response_time_ms:a.responseTimeMs,metadata:a.metadata||{}})));r&&(console.warn("Failed to send metrics:",r),this.queue.length<100&&(this.queue=[...n,...this.queue]))}catch(r){console.warn("Failed to flush metrics:",r),this.queue.length<100&&(this.queue=[...n,...this.queue])}}setEnabled(t){this.enabled=t,t?this.startBatching():(this.stopBatching(),this.queue=[])}getQueueSize(){return this.queue.length}async forceFlush(){await this.flush()}}function mw(e,t){if(e.length===0)return 0;const n=[...e].sort((a,s)=>a-s),r=Math.ceil(t/100*n.length)-1;return n[Math.max(0,r)]}async function NF(e,t,n){try{let r=ne.from("circuit_breaker_metrics").select("*");e&&(r=r.gte("created_at",e.toISOString())),t&&(r=r.lt("created_at",t.toISOString()));const{data:a,error:s}=await r;if(s||!a)return{totalOperations:0,successRate:0,failureRate:0,avgResponseTime:0,p50ResponseTime:0,p95ResponseTime:0,p99ResponseTime:0,circuitBreakerStates:{},errorCategories:{},operationsByType:{}};const o=a.length,l=a.filter(g=>g.success).length,c=a.filter(g=>!g.success).length,u=a.map(g=>g.response_time_ms||0).filter(g=>g>0),f={},d={},h={};a.forEach(g=>{const v=g.circuit_breaker_state||"UNKNOWN";if(f[v]=(f[v]||0)+1,g.error_category){const y=g.error_category;d[y]=(d[y]||0)+1}const x=g.operation_type||"unknown";h[x]=(h[x]||0)+1});const m=u.length>0?u.reduce((g,v)=>g+v,0)/u.length:0;return{totalOperations:o,successRate:o>0?l/o:0,failureRate:o>0?c/o:0,avgResponseTime:m,p50ResponseTime:mw(u,50),p95ResponseTime:mw(u,95),p99ResponseTime:mw(u,99),circuitBreakerStates:f,errorCategories:d,operationsByType:h}}catch(r){return console.error("Failed to get metrics stats:",r),{totalOperations:0,successRate:0,failureRate:0,avgResponseTime:0,p50ResponseTime:0,p95ResponseTime:0,p99ResponseTime:0,circuitBreakerStates:{},errorCategories:{},operationsByType:{}}}}const im=new YZ,dT={baseConfig:{read:{limit:100,window:6e4},write:{limit:30,window:6e4},rpc:{limit:20,window:6e4},auth:{limit:10,window:6e4}},minMultiplier:.5,maxMultiplier:2,adjustmentInterval:6e4,healthyLatencyThreshold:200,stressLatencyThreshold:1e3};class XZ{constructor(t={}){zt(this,"config");zt(this,"currentMultipliers",new Map);zt(this,"lastAdjustment",Date.now());zt(this,"rateLimiters",new Map);zt(this,"storageKey","adaptive_rate_limiter");zt(this,"adjustmentIntervalId",null);this.config={...dT,...t},this.loadFromStorage(),Object.keys(this.config.baseConfig).forEach(n=>{this.currentMultipliers.has(n)||this.currentMultipliers.set(n,1)}),typeof window<"u"&&(this.adjustmentIntervalId=setInterval(()=>this.adjustLimits(),this.config.adjustmentInterval))}getLimiter(t){if(!this.rateLimiters.has(t)){const n=this.config.baseConfig[t],r=this.currentMultipliers.get(t)||1,a={limit:Math.round(n.limit*r),window:n.window};this.rateLimiters.set(t,new J1(`adaptive_${t}`,{[t]:a}))}return this.rateLimiters.get(t)}async adjustLimits(){try{const t=Date.now(),n=new Date(t-5*60*1e3),r=await this.getRecentStats(n,new Date(t));for(const a of Object.keys(this.config.baseConfig))await this.adjustOperationLimit(a,r);this.lastAdjustment=t}catch(t){console.warn("Failed to adjust rate limits:",t)}}async getRecentStats(t,n){try{const r=await NF(t,n);return{avgResponseTime:r.avgResponseTime,errorRate:r.failureRate,requestVolume:r.totalOperations}}catch{return{avgResponseTime:300,errorRate:.01,requestVolume:100}}}async adjustOperationLimit(t,n){const r=this.currentMultipliers.get(t)||1,a=this.config.baseConfig[t];let s=r;const{avgResponseTime:o,errorRate:l}=n;o<this.config.healthyLatencyThreshold&&l<.05?s=Math.min(r*1.1,this.config.maxMultiplier):o>this.config.stressLatencyThreshold||l>.2?s=Math.max(r*.8,this.config.minMultiplier):r>1?s=Math.max(r*.95,1):r<1&&(s=Math.min(r*1.05,1)),this.currentMultipliers.set(t,s);const c={limit:Math.round(a.limit*s),window:a.window};this.rateLimiters.set(t,new J1(`adaptive_${t}`,{[t]:c})),this.saveToStorage()}getMultiplier(t){return this.currentMultipliers.get(t)||1}getEffectiveLimit(t){const n=this.config.baseConfig[t],r=this.currentMultipliers.get(t)||1;return Math.round(n.limit*r)}reset(){Object.keys(this.config.baseConfig).forEach(t=>{this.currentMultipliers.set(t,1),this.rateLimiters.delete(t)}),this.saveToStorage()}getConfig(){return{...this.config}}updateConfig(t){this.config={...this.config,...t},t.adjustmentInterval&&typeof window<"u"&&(this.adjustmentIntervalId&&clearInterval(this.adjustmentIntervalId),this.adjustmentIntervalId=setInterval(()=>this.adjustLimits(),this.config.adjustmentInterval)),this.rateLimiters.clear(),this.saveToStorage()}checkLimit(t,n,r){return this.getLimiter(n).checkLimit(t,n,r)}recordRequest(t,n,r){this.getLimiter(n).recordRequest(t,n,r)}getUsage(t,n,r){return this.getLimiter(n).getUsage(t,n,r)}saveToStorage(){try{if(typeof localStorage<"u"){const t={config:this.config,multipliers:Object.fromEntries(this.currentMultipliers),lastAdjustment:this.lastAdjustment};localStorage.setItem(this.storageKey,JSON.stringify(t))}}catch(t){console.warn("Failed to save adaptive rate limiter config:",t)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t){const n=JSON.parse(t);n.config&&(this.config={...dT,...n.config}),n.multipliers&&Object.entries(n.multipliers).forEach(([r,a])=>{this.currentMultipliers.set(r,a)}),n.lastAdjustment&&(this.lastAdjustment=n.lastAdjustment)}}}catch(t){console.warn("Failed to load adaptive rate limiter config:",t)}}}const Rt=new XZ;async function CF(e,t=3,n=1e3){let r;for(let a=0;a<=t;a++)try{return await e()}catch(s){r=s;const o=Ci(s);if(!o.isRetryable||Jt.getState()!=="CLOSED")throw s;if(a>=t)break;const l=Math.min(n*Math.pow(2,a),8e3),c=o.retryDelay||l;await new Promise(u=>setTimeout(u,c))}throw r}let Df=null,pw=0;const JZ=6e4;async function _N(e,t=!1){var r,a;const n=Date.now();if(!t&&Df!==null&&n-pw<JZ)return Df;try{const s=e.auth.getSession(),o=new Promise(c=>{setTimeout(()=>c({data:{session:null}}),500)}),{data:l}=await Promise.race([s,o]);return Df=((a=(r=l==null?void 0:l.session)==null?void 0:r.user)==null?void 0:a.id)||null,pw=n,Df}catch{return Df=null,pw=n,null}}async function AF(e,t,n,r,a=!1){if(a)return;const s=r!==void 0?r:await _N(e).catch(()=>null);if(t==="rpc"){const l=Rt.getUsage(s,t,n);if(l.count<l.limit*.9){Rt.recordRequest(s,t,n);return}const c=Rt.checkLimit(s,t,n);if(!c.allowed){const u=new Error(c.retryAfter?`Rate limit exceeded. Please wait ${Math.ceil(c.retryAfter/1e3)} seconds.`:"Rate limit exceeded. Please try again later.");throw u.code="RATE_LIMIT_EXCEEDED",u.status=429,u.retryAfter=c.retryAfter,u.category="RATE_LIMIT",u}return}const o=Rt.checkLimit(s,t,n);if(!o.allowed){const l=new Error(o.retryAfter?`Rate limit exceeded. Please wait ${Math.ceil(o.retryAfter/1e3)} seconds.`:"Rate limit exceeded. Please try again later.");throw l.code="RATE_LIMIT_EXCEEDED",l.status=429,l.retryAfter=o.retryAfter,l.category="RATE_LIMIT",l}}function Q1(e){return e===void 0?"u":e===null?"n":typeof e=="function"?"f":typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"?`p:${String(e)}`:typeof e=="string"?`s:${e}`:e instanceof Date?`d:${e.toISOString()}`:Array.isArray(e)?`a:[${e.map(t=>Q1(t)).join(",")}]`:typeof e=="object"?`o:{${Object.keys(e).sort().map(r=>`${r}:${Q1(e[r])}`).join(",")}}`:`x:${String(e)}`}function QZ(e){return!e||e.length===0?"":e.map(t=>Q1(t)).join("|")}function ZZ(e){if(!e)return"base";let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return Math.abs(t).toString(36)}function EF(e,t,n="read",r,a=!1,s=""){return new Proxy(e,{get(o,l){const c=o[l];let u=n;if((l==="insert"||l==="update"||l==="upsert"||l==="delete")&&(u="write"),l==="then"||l==="catch"||l==="finally"){const f=Promise.resolve(o),d=(async()=>{const h=Date.now();ZZ(s);const m=_N(t).catch(()=>null),g=Jt.getState();try{const w=await Promise.race([m,new Promise(j=>setTimeout(()=>j(null),100))]);u==="read"?Rt.recordRequest(w,u,r):await AF(t,u,r,w)}catch(w){if(w.code==="RATE_LIMIT_EXCEEDED")throw w}let v;try{v=await Jt.execute(()=>CF(async()=>await f))}catch(w){v={data:null,error:w}}const x=Date.now()-h,y=v!=null&&v.error?Ci(v.error).category:void 0,b=await m.catch(()=>null);return Promise.resolve().then(()=>{try{im.record({operationType:u,endpoint:r,userId:b||void 0,circuitBreakerState:g,success:!(v!=null&&v.error),errorCategory:y,responseTimeMs:x,metadata:v!=null&&v.error?{error:v.error.message}:{}})}catch{}}),v})().catch(h=>{const m=Date.now()-startTime,g=Ci(h);return im.record({operationType:u,endpoint:r,userId:userId||void 0,circuitBreakerState:circuitState,success:!1,errorCategory:g.category,responseTimeMs:m,metadata:{error:h instanceof Error?h.message:String(h)}}),h.code==="RATE_LIMIT_EXCEEDED"?{data:null,error:{message:h.message,code:"RATE_LIMIT_EXCEEDED",status:429,category:"RATE_LIMIT",retryAfter:h.retryAfter,circuitBreaker:Jt.getState()}}:h&&typeof h=="object"&&("data"in h||"error"in h)?{data:h.data||null,error:{...h.error||h,message:g.userMessage,category:g.category,circuitBreaker:Jt.getState()}}:{data:null,error:{...g.originalError,message:g.userMessage,category:g.category,circuitBreaker:Jt.getState()}}});return(h,m)=>d[l](h,m)}return typeof c=="function"?(...f)=>{const d=c.apply(o,f),h=QZ(f),m=h?`${l}(${h})`:`${l}()`,g=s?`${s}|${m}`:m;return EF(d,t,u,r,a,g)}:c}})}function eee(e){const t=e;return{from:n=>{const r=t.from(n);return EF(r,t,"read",n)},rpc:async(n,r,a)=>{const s=Date.now(),o=_N(t).catch(()=>null),l=Jt.getState();try{try{const h=await Promise.race([o,new Promise(m=>setTimeout(()=>m(null),100))]);await AF(t,"rpc",n,h,!1)}catch(h){if(h.code==="RATE_LIMIT_EXCEEDED")throw h}const c=await Jt.execute(()=>CF(async()=>await t.rpc(n,r,a))),u=Date.now()-s,f=c!=null&&c.error?Ci(c.error).category:void 0,d=await o.catch(()=>null);return Promise.resolve().then(()=>{try{im.record({operationType:"rpc",endpoint:n,userId:d||void 0,circuitBreakerState:l,success:!(c!=null&&c.error),errorCategory:f,responseTimeMs:u,metadata:c!=null&&c.error?{error:c.error.message}:{}})}catch{}}),c}catch(c){const u=Ci(c),f=Date.now()-s,d=await o.catch(()=>null);return Promise.resolve().then(()=>{try{im.record({operationType:"rpc",endpoint:n,userId:d||void 0,circuitBreakerState:l,success:!1,errorCategory:u.category,responseTimeMs:f,metadata:{error:c instanceof Error?c.message:String(c)}})}catch{}}),{data:null,error:{...u.originalError,message:u.userMessage,category:u.category,circuitBreaker:l}}}},auth:{getSession:async()=>{try{return await Jt.execute(()=>t.auth.getSession(),5e3)}catch(n){const r=Ci(n);throw new Error(r.userMessage)}},getUser:async()=>{try{return await Jt.execute(()=>t.auth.getUser(),5e3)}catch(n){const r=Ci(n);throw new Error(r.userMessage)}},signOut:async()=>{try{return await Jt.execute(()=>t.auth.signOut(),5e3)}catch(n){const r=Ci(n);throw new Error(r.userMessage)}},signInWithPassword:async n=>{try{return await Jt.execute(()=>t.auth.signInWithPassword(n),1e4)}catch(r){const a=Ci(r);throw new Error(a.userMessage)}},signInWithOtp:async(n,r)=>{try{return await Jt.execute(()=>t.auth.signInWithOtp({email:n,options:r}),1e4)}catch(a){const s=Ci(a);throw new Error(s.userMessage)}},verifyOtp:async n=>{try{return await Jt.execute(()=>t.auth.verifyOtp(n),1e4)}catch(r){const a=Ci(r);throw new Error(a.userMessage)}},onAuthStateChange:t.auth.onAuthStateChange.bind(t.auth),resetPasswordForEmail:t.auth.resetPasswordForEmail.bind(t.auth),refreshSession:t.auth.refreshSession.bind(t.auth),updateUser:t.auth.updateUser.bind(t.auth),setSession:t.auth.setSession.bind(t.auth)},storage:t.storage,channel:t.channel.bind(t),removeChannel:t.removeChannel.bind(t),removeAllChannels:t.removeAllChannels.bind(t),getChannels:t.getChannels.bind(t),getCircuitBreaker:()=>Jt,getCircuitBreakerStats:()=>Jt.getStats()}}const tee="https://bkynymyhbfrhvwxqqttk.supabase.co",nee="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",ne=kF(tee,nee),Nt=eee(ne);async function Wt(e){var t;try{const{action:n,resource:r,resourceId:a=null,context:s={},ip:o=null,userAgent:l=null}=e;let c=e.userId??null;if(!c)try{const d=typeof localStorage<"u"?localStorage.getItem("app.currentUserId"):null;d&&(c=d)}catch{}if(!c){const{data:d}=await ne.auth.getUser();c=((t=d==null?void 0:d.user)==null?void 0:t.id)??null}let u=e.orgId??null;if(!u&&c&&(authData!=null&&authData.user))try{const{data:d}=await ne.from("org_members").select("org_id").eq("user_id",c).limit(1).maybeSingle();u=(d==null?void 0:d.org_id)??null}catch{return}if(!u&&n==="auth.logout")return;if(!u)try{const{data:d}=await ne.from("orgs").select("id").limit(1).maybeSingle();u=(d==null?void 0:d.id)??null}catch{return}try{const d=`logAction:${n}:${r}:${c||"anon"}`,h=Date.now(),m=typeof localStorage<"u"?localStorage.getItem(d):null;if(m){const g=Number(m)||0;if(h-g<3e3)return}typeof localStorage<"u"&&localStorage.setItem(d,String(h))}catch{}if(!u)return;const{error:f}=await ne.rpc("log_action",{p_action:n,p_resource:r,p_resource_id:a,p_context:{...s,route:typeof window<"u"?window.location.pathname:null},p_ip:o,p_user_agent:l,p_org_id:u,p_user_id:c});f&&console.warn("logAction failed",f)}catch(n){console.warn("logAction threw",n)}}const PF=p.createContext(void 0);function ree({children:e}){var L;const t=Ka(),[n,r]=p.useState(null),[a,s]=p.useState(null),[o,l]=p.useState(!0),c=p.useRef(null),[u,f]=p.useState(!1),[d,h]=p.useState(()=>{var $;try{if(localStorage.getItem("otpVerified")==="true")return!0;const U=localStorage.getItem("app.lastAuthEvent");if(U)try{const D=JSON.parse(U),P=($=D==null?void 0:D.user)==null?void 0:$.id;if(P)return localStorage.getItem(`otpVerified:${P}`)==="true"}catch{}return!1}catch{return!1}}),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,b]=p.useState(!1),[w,j]=p.useState(!1),[k,_]=p.useState(0);p.useEffect(()=>{b(!1)},[n==null?void 0:n.id]);const[S,A]=p.useState(!1),N=p.useRef(null),T=p.useRef(null);p.useEffect(()=>{T.current=(n==null?void 0:n.id)??null},[n==null?void 0:n.id]);const I=p.useCallback($=>{var C;h($);try{const U=(C=a==null?void 0:a.user)!=null&&C.id?`otpVerified:${a.user.id}`:"otpVerified";$?(localStorage.setItem(U,"true"),localStorage.setItem("otpVerified","true")):(localStorage.removeItem(U),localStorage.removeItem("otpVerified"))}catch{}},[(L=a==null?void 0:a.user)==null?void 0:L.id]),F=async $=>{var D,P;const C=(D=$==null?void 0:$.user)==null?void 0:D.id,U=k+1;if(_(U),!C)return x(!1),!0;if(w||y&&((P=$==null?void 0:$.user)==null?void 0:P.id)===(n==null?void 0:n.id))return!v;j(!0);try{const{data:H,error:G}=await ne.from("users_profile").select("is_active").eq("user_id",C).maybeSingle();return G?(console.error("Error checking account status:",G),!v):H?H.is_active===!0?(x(!1),b(!0),!0):(t("/account-deactivated",{replace:!0}),!1):!v}catch(H){return console.error("Failed to check account status",H),!v}finally{j(!1)}},E=async $=>{var U,D,P,H,G;const C=(U=$==null?void 0:$.user)==null?void 0:U.id;if(!C){f(!1);try{const Y=(D=$==null?void 0:$.user)!=null&&D.id?`otpRequired:${$.user.id}`:"otpRequired";localStorage.removeItem(Y)}catch{}return!1}try{const{data:Y,error:W}=await ne.from("users_profile").select("is_2fa_email_enabled").eq("user_id",C).maybeSingle();if(W)throw W;if(!Y){f(!0);try{const X=(P=$==null?void 0:$.user)!=null&&P.id?`otpRequired:${$.user.id}`:"otpRequired";localStorage.setItem(X,"true")}catch{}return!0}const ee=(Y==null?void 0:Y.is_2fa_email_enabled)===!0;f(!!ee);try{const X=(H=$==null?void 0:$.user)!=null&&H.id?`otpRequired:${$.user.id}`:"otpRequired";ee?localStorage.setItem(X,"true"):localStorage.removeItem(X)}catch{}return!!ee}catch(Y){console.warn("Failed to evaluate 2FA profile flag",Y),f(!0);try{const W=(G=$==null?void 0:$.user)!=null&&G.id?`otpRequired:${$.user.id}`:"otpRequired";localStorage.setItem(W,"true")}catch{}return!0}},O=$=>{let C=!1;const U=window.setTimeout(()=>{C||g(!0)},5e3);return $.finally(()=>{C=!0,window.clearTimeout(U),g(!0)})};p.useEffect(()=>{(async()=>{var P,H,G;l(!0),g(!1);let U=!1;const D=window.setTimeout(()=>{U=!0,l(!1),g(!0)},5e3);try{try{localStorage.removeItem("otpRequired"),localStorage.removeItem("otpVerified")}catch{}try{const ae=Object.keys(localStorage).filter(re=>re.startsWith("sb-")&&re.endsWith("-auth-token"));for(const re of ae)try{const J=localStorage.getItem(re);if(!J)continue;const ve=JSON.parse(J);if(ve!=null&&ve.access_token&&(ve!=null&&ve.user)){s(ve),r(ve.user);break}}catch{}localStorage.removeItem("sb-tgrmxlbnutxpewfmofdx-auth-token"),localStorage.removeItem("sb-yoekcpoppfudmqtvjcby-auth-token")}catch{}const Y=await Promise.race([ne.auth.getSession().catch(()=>({data:{session:null}})),new Promise(ae=>{setTimeout(()=>ae({data:{session:null}}),4e3)})]),W=((P=Y==null?void 0:Y.data)==null?void 0:P.session)??null;s(W),r((W==null?void 0:W.user)??null);const ee=await Promise.race([ne.auth.getUser().catch(()=>({data:{user:null}})),new Promise(ae=>{setTimeout(()=>ae({data:{user:null}}),4e3)})]);if(!(((H=ee==null?void 0:ee.data)==null?void 0:H.user)??null)){s(null),r(null),f(!1),I(!1),g(!0);return}if(W){if(!await Promise.race([F(W),new Promise(re=>setTimeout(()=>re(!0),3e3))])){s(W),r(W.user),f(!1),I(!1),g(!0),l(!1);return}s(W),r(W.user);try{(G=W.user)!=null&&G.id&&(localStorage.setItem("app.currentUserId",W.user.id),localStorage.setItem("app.currentUserEmail",W.user.email||""))}catch{}U||(window.clearTimeout(D),l(!1)),O(E(W).then(re=>{f(!!re)}));return}else f(!1),I(!1),g(!0)}finally{U||(window.clearTimeout(D),l(!1))}})();const{data:{subscription:C}}=ne.auth.onAuthStateChange(async(U,D)=>{var P,H,G,Y;try{if(U==="SIGNED_IN"){const W=T.current,ee=((P=D==null?void 0:D.user)==null?void 0:P.id)||null;if(!!W&&!!ee&&W===ee){s(D),r((D==null?void 0:D.user)??null);return}if(S){s(D),r((D==null?void 0:D.user)??null);return}if(!await Promise.race([F(D),new Promise(ve=>setTimeout(()=>ve(!0),3e3))])){s(D),r((D==null?void 0:D.user)??null),f(!1),I(!1),g(!0),l(!1);return}s(D),r((D==null?void 0:D.user)??null);const re=((H=D==null?void 0:D.user)==null?void 0:H.id)||null;if(re&&N.current!==re){Wt({action:"auth.login",resource:"auth",userId:re,context:{}}).catch(()=>{}),N.current=re;try{localStorage.setItem("app.currentUserId",re),localStorage.setItem("app.currentUserEmail",((G=D==null?void 0:D.user)==null?void 0:G.email)||"")}catch{}}let J=!1;try{const ve=re?`otpVerified:${re}`:"otpVerified";J=localStorage.getItem(ve)==="true"||localStorage.getItem("otpVerified")==="true"}catch{}I(!!J);try{const ve=(Y=D==null?void 0:D.user)!=null&&Y.id?`otpRequired:${D.user.id}`:"otpRequired";localStorage.removeItem(ve)}catch{}g(!1),l(!1),O(E(D).then(ve=>{var z;if(ve&&!J){const q=((z=D==null?void 0:D.user)==null?void 0:z.id)||null;q&&c.current!==q&&ne.functions.invoke("send-2fa-login-email",{headers:D!=null&&D.access_token?{Authorization:`Bearer ${D.access_token}`}:void 0}).then(()=>{c.current=q}).catch(ie=>{console.warn("2FA send function failed",ie)})}f(!!ve)}));try{localStorage.setItem("app.lastAuthEvent",JSON.stringify({event:U,at:Date.now(),user:(D==null?void 0:D.user)||null}))}catch{}return}if(U==="PASSWORD_RECOVERY"){try{localStorage.setItem("auth.intent","recovery")}catch{}try{if(window.location.hash){const W=new URL(window.location.href);W.hash="",window.history.replaceState({},document.title,W.toString())}}catch{}window.location.pathname!=="/reset-password"&&t("/reset-password",{replace:!0}),g(!1),O((async()=>{try{const W=await E(D);f(!!W),W&&I(!1)}catch{f(!1)}})());return}if(U==="TOKEN_REFRESHED"||U==="USER_UPDATED")return;if(U==="SIGNED_OUT"){n!=null&&n.id&&Wt({action:"auth.logout",resource:"auth",userId:n.id,context:{}}).catch(()=>{}),f(!1),I(!1),A(!1),x(!1);try{const W=[];for(let X=0;X<localStorage.length;X++){const ae=localStorage.key(X);ae&&W.push(ae)}W.forEach(X=>{try{localStorage.removeItem(X)}catch{}});const ee=[];for(let X=0;X<sessionStorage.length;X++){const ae=sessionStorage.key(X);ae&&ee.push(ae)}ee.forEach(X=>{try{sessionStorage.removeItem(X)}catch{}})}catch(W){console.warn("Error clearing cache on sign out:",W)}}}catch{}U!=="SIGNED_IN"&&(s(D),r((D==null?void 0:D.user)??null)),g(!0),l(!1)});return()=>C.unsubscribe()},[]),p.useEffect(()=>{const $=async()=>{try{await ne.auth.getSession()}catch{}},C=()=>{try{document.visibilityState==="visible"&&$()}catch{}};window.addEventListener("focus",$),document.addEventListener("visibilitychange",C);const U=window.setInterval(()=>{try{document.visibilityState==="visible"&&ne.auth.getSession().catch(()=>{})}catch{}},4*60*1e3);return()=>{window.removeEventListener("focus",$),document.removeEventListener("visibilitychange",C);try{clearInterval(U)}catch{}}},[]);const M=p.useCallback(async()=>{try{A(!0);try{const $=[];for(let D=0;D<localStorage.length;D++){const P=localStorage.key(D);P&&$.push(P)}$.forEach(D=>{try{localStorage.removeItem(D)}catch{}});const C=[];for(let D=0;D<sessionStorage.length;D++){const P=sessionStorage.key(D);P&&C.push(P)}C.forEach(D=>{try{sessionStorage.removeItem(D)}catch{}});const U=["app.cached","app.lastAuthEvent","app.currentUserId","app.currentUserEmail","otpVerified","otpRequired","auth.intent","sb-"];Object.keys(localStorage).forEach(D=>{if(U.some(P=>D.includes(P)))try{localStorage.removeItem(D)}catch{}})}catch($){console.warn("Error clearing cache:",$)}await ne.auth.signOut()}catch($){console.error("Error signing out:",$)}finally{A(!1)}},[]),B=p.useCallback(async()=>{try{const{data:{user:$}}=await ne.auth.getUser();r($)}catch($){console.error("Error refreshing user:",$)}},[]),R=p.useMemo(()=>({user:n,session:a,loading:o,signOut:M,refreshUser:B,otpRequired:u,otpVerified:d,setOtpVerified:I,otpEvaluated:m,accountDeactivated:v,setAccountDeactivated:x}),[n,a,o,M,B,u,d,I,m,v,x]);return i.jsx(PF.Provider,{value:R,children:e})}function Vr(){const e=p.useContext(PF);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const Uu={analytics:["read"],ai_profiles:["create","update","delete","read_all","read_own"],ai_sessions:["create","update","delete","read_all","read_own"],channels:["create","update","delete","read_all","read_own"],contacts:["create","update","delete","read_all","read_own"],contact_identities:["create","update","delete","read_all","read_own"],threads:["create","update","delete","read_all","read_channel_owned","read_collaborator"],messages:["create","update","delete","send","read_all","read_collaborator"],ai_agent_files:["create","read","delete"],admin_panel:["read","update"],super_agents:["create","update","delete","read_all","read_own"],users_profile:["create","update","delete","read"],roles:["create","read","update","delete"],audit_logs:["read"],alerts:["read","ack"]},gw=e=>e==="create"?"create":e==="update"?"update":e==="delete"?"delete":e.startsWith("read")||e.startsWith("view")?"read":"special",aee=e=>["delete","manage_2fa","configure","update_token_limit","manage"].some(n=>e.includes(n)),iee={defaultTtl:5*60*1e3,maxSize:100,strategy:"stale-while-revalidate"},$f="supabase_cache_",fT="1";class see{constructor(t={}){zt(this,"cache",new Map);zt(this,"config");this.config={...iee,...t},this.loadFromStorage(),typeof window<"u"&&setInterval(()=>this.cleanup(),6e4)}get(t){const n=this.cache.get(t);if(!n)return null;const r=Date.now(),a=n.ttl||this.config.defaultTtl;return n.timestamp+a<r?(this.cache.delete(t),this.deleteFromStorage(t),null):n.data}set(t,n,r){const a={data:n,timestamp:Date.now(),ttl:r||this.config.defaultTtl,version:parseInt(fT)};if(this.cache.size>=this.config.maxSize){const s=this.findOldestEntry();s&&(this.cache.delete(s),this.deleteFromStorage(s))}this.cache.set(t,a),this.saveToStorage(t,a)}async execute(t,n,r,a){const s=r||this.config.strategy,o=this.get(t);switch(s){case"cache-first":if(o)return o;try{const l=await n();return this.set(t,l,a),l}catch(l){if(o)return o;throw l}case"network-first":try{const l=await n();return this.set(t,l,a),l}catch(l){if(o)return o;throw l}case"stale-while-revalidate":if(o)return n().then(l=>{this.set(t,l,a)}).catch(()=>{}),o;try{const l=await n();return this.set(t,l,a),l}catch(l){throw l}case"network-only":try{const l=await n();return this.set(t,l,a),l}catch(l){throw l}case"cache-only":if(o)return o;throw new Error("No cached data available");default:return await n()}}invalidate(t){this.cache.delete(t),this.deleteFromStorage(t)}invalidatePattern(t){const n=new RegExp(t);for(const r of this.cache.keys())n.test(r)&&this.invalidate(r)}clear(){this.cache.clear();try{if(typeof localStorage<"u")for(let t=localStorage.length-1;t>=0;t--){const n=localStorage.key(t);n&&n.startsWith($f)&&localStorage.removeItem(n)}}catch(t){console.warn("Failed to clear cache from storage:",t)}}findOldestEntry(){let t=null,n=1/0;for(const[r,a]of this.cache.entries())a.timestamp<n&&(n=a.timestamp,t=r);return t}cleanup(){const t=Date.now();for(const[n,r]of this.cache.entries()){const a=r.ttl||this.config.defaultTtl;r.timestamp+a<t&&(this.cache.delete(n),this.deleteFromStorage(n))}}saveToStorage(t,n){try{if(typeof localStorage<"u"){const r=`${$f}${t}`;localStorage.setItem(r,JSON.stringify(n))}}catch(r){console.warn("Failed to save cache entry:",r)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=Date.now();for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);if(r&&r.startsWith($f))try{const s=JSON.parse(localStorage.getItem(r)||"{}");if(s.version&&s.version!==parseInt(fT)){localStorage.removeItem(r);continue}const o=s.ttl||this.config.defaultTtl;if(s.timestamp+o<t){localStorage.removeItem(r);continue}const l=r.replace($f,"");this.cache.set(l,s)}catch{localStorage.removeItem(r)}}}}catch(t){console.warn("Failed to load cache from storage:",t)}}deleteFromStorage(t){try{if(typeof localStorage<"u"){const n=`${$f}${t}`;localStorage.removeItem(n)}}catch{}}getStats(){const t=Date.now(),n=Array.from(this.cache.entries()).map(([r,a])=>({key:r,age:t-a.timestamp,ttl:a.ttl||this.config.defaultTtl}));return{size:this.cache.size,maxSize:this.config.maxSize,entries:n}}}const Bs=new see;class oee{constructor(){zt(this,"queue",[]);zt(this,"processing",!1);zt(this,"maxRetries",3);zt(this,"storageKey","offline_queue");this.loadFromStorage(),typeof window<"u"&&window.addEventListener("online",()=>{this.processQueue()})}add(t){const n={...t,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),retries:0};return this.queue.push(n),this.saveToStorage(),typeof navigator<"u"&&navigator.onLine&&this.processQueue(),n.id}async processQueue(t){if(!(this.processing||this.queue.length===0)&&t){this.processing=!0;try{const n=[...this.queue];this.queue=[];for(const r of n)try{await t(r),this.remove(r.id)}catch{r.retries++,r.retries<this.maxRetries?this.queue.push(r):(console.error("Failed to sync write operation after max retries:",r),this.remove(r.id))}this.saveToStorage()}finally{this.processing=!1}}}remove(t){this.queue=this.queue.filter(n=>n.id!==t),this.saveToStorage()}size(){return this.queue.length}clear(){this.queue=[],this.saveToStorage()}getAll(){return[...this.queue]}saveToStorage(){try{typeof localStorage<"u"&&localStorage.setItem(this.storageKey,JSON.stringify(this.queue))}catch(t){console.warn("Failed to save offline queue:",t)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);t&&(this.queue=JSON.parse(t))}}catch(t){console.warn("Failed to load offline queue:",t)}}}new oee;const sm="app:authz-changed";function hT(){try{Bs.clear()}catch{}try{if(typeof localStorage>"u")return;const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&e.push(n)}for(const t of e)if(t.startsWith("app.cached"))try{localStorage.removeItem(t)}catch{}}catch{}try{const e=globalThis;e.__agentsCache&&(e.__agentsCache.data=null,e.__agentsCache.ts=0,e.__agentsCache.inFlight=null)}catch{}}function mT(e){try{if(typeof window>"u")return;window.dispatchEvent(new CustomEvent(sm,{detail:{reason:e}}))}catch{}}const TF=p.createContext(void 0);function lee({children:e}){const{user:t,accountDeactivated:n}=Vr(),[r,a]=p.useState([]),[s,o]=p.useState([]),[l,c]=p.useState(null),[u,f]=p.useState(!0),[d,h]=p.useState(null),m=(E,O)=>{const M=E.map(R=>String((R==null?void 0:R.name)??"").trim().toLowerCase()).filter(Boolean).sort().join(","),B=O.map(R=>`${String((R==null?void 0:R.resource)??"").trim().toLowerCase()}.${String((R==null?void 0:R.action)??"").trim().toLowerCase()}`).filter(R=>R!==".").sort().join(",");return`roles:${M}|perms:${B}`},g=(E,O)=>{try{const M=`app.authzFingerprint:${E}`,B=typeof localStorage<"u"?localStorage.getItem(M):null;B&&B!==O&&(hT(),mT("rbac-fingerprint-changed")),typeof localStorage<"u"&&localStorage.setItem(M,O)}catch{}},v=async(E,O)=>{try{O!=null&&O.background||f(!0),h(null);const{data:M,error:B}=await ne.from("v_current_user_permissions").select("*");if(B)throw B;const R=M||[];o(R);const{data:L,error:$}=await ne.from("user_roles").select("role_id").eq("user_id",E);if($)throw $;if(!L||L.length===0){g(E,m([],R)),a([]),c({user_id:E,roles:[],permissions:R});return}const C=L.map(G=>G.role_id),{data:U,error:D}=await ne.from("roles").select("*").in("id",C);if(D)throw D;const P=U||[];g(E,m(P,R)),a(P);const H=P.map(G=>({...G,permissions:R}));c({user_id:E,roles:H,permissions:R})}catch(M){console.error("Error fetching user RBAC:",M),h(M instanceof Error?M.message:"Failed to fetch user permissions")}finally{O!=null&&O.background||f(!1)}},x=async()=>{t!=null&&t.id&&await v(t.id,{background:!0})};p.useEffect(()=>{t!=null&&t.id&&!n?v(t.id):(a([]),o([]),c(null),f(!1))},[t==null?void 0:t.id,n]),p.useEffect(()=>{if(!(t!=null&&t.id)||n)return;const E=t.id,O=ne.channel(`rbac-user-roles:${E}`).on("postgres_changes",{event:"*",schema:"public",table:"user_roles",filter:`user_id=eq.${E}`},async()=>{hT(),mT("user_roles-realtime-change");try{await v(E,{background:!0})}catch{}}).subscribe();return()=>{try{ne.removeChannel(O)}catch{}}},[t==null?void 0:t.id,n]);const y=E=>{if(!E)return!1;if(r.some(L=>L.name==="master_agent"))return!0;const O=String(E).trim().toLowerCase();if(s.some(L=>(L.name||"").trim().toLowerCase()===O)||s.some(L=>`${L.resource}.${L.action}`.toLowerCase()===O))return!0;const R=O.indexOf(".");if(R>0){const L=O.slice(0,R),$=O.slice(R+1),U={edit:["update"],update:["edit"],remove:["delete"],delete:["remove"],send:["create"],read:["read_all","read_own","read_channel_owned","read_collaborator"],read_all:["read"]}[$]||[];if(U.length>0&&s.some(P=>U.some(H=>`${P.resource}.${P.action}`.toLowerCase()===`${L}.${H}`)))return!0}return!1},b=E=>E.some(O=>y(O)),w=E=>E.every(O=>y(O)),j=E=>r.some(O=>O.name===E),F={userRoles:r,userPermissions:s,userWithRoles:l,hasPermission:y,hasAnyPermission:b,hasAllPermissions:w,hasRole:j,hasAnyRole:E=>E.some(O=>j(O)),hasPermissionDB:async(E,O)=>{try{const{data:M,error:B}=await ne.rpc("has_perm",{p_resource:E,p_action:O});return B?(console.error("Error checking permission:",B),!1):M===!0}catch(M){return console.error("Error in hasPermissionDB:",M),!1}},can:(E,...O)=>!E||O.length===0?!1:O.every(M=>y(`${E}.${M}`)),canRead:E=>{const O=Uu[E];if(!Array.isArray(O))return!1;const M=O.filter(B=>B==="read"||B.startsWith("read_"));return M.length===0?!1:M.some(B=>y(`${E}.${B}`))},canCreate:E=>y(`${E}.create`),canUpdate:E=>y(`${E}.update`),canDelete:E=>y(`${E}.delete`),loading:u,error:d,refreshRBAC:x};return i.jsx(TF.Provider,{value:F,children:e})}function jr(){const e=p.useContext(TF);if(e===void 0)throw new Error("useRBAC must be used within an RBACProvider");return e}const kd=op("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Q=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},s)=>{const o=r?VS:"button";return i.jsx(o,{className:ye(kd({variant:t,size:n,className:e})),ref:s,...a})});Q.displayName="Button";const Ae=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ye("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Ae.displayName="Card";const tt=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ye("flex flex-col space-y-1.5 p-6",e),...t}));tt.displayName="CardHeader";const Qe=p.forwardRef(({className:e,...t},n)=>i.jsx("h3",{ref:n,className:ye("text-2xl font-semibold leading-none tracking-tight",e),...t}));Qe.displayName="CardTitle";const ui=p.forwardRef(({className:e,...t},n)=>i.jsx("p",{ref:n,className:ye("text-sm text-muted-foreground",e),...t}));ui.displayName="CardDescription";const Je=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ye("p-6 pt-0",e),...t}));Je.displayName="CardContent";const cee=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ye("flex items-center p-6 pt-0",e),...t}));cee.displayName="CardFooter";const Ve=p.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:ye("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Ve.displayName="Input";var uee="Label",OF=p.forwardRef((e,t)=>i.jsx(Ge.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));OF.displayName=uee;var IF=OF;const dee=op("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Be=p.forwardRef(({className:e,...t},n)=>i.jsx(IF,{ref:n,className:ye(dee(),e),...t}));Be.displayName=IF.displayName;var fee=p.createContext(void 0);function of(e){const t=p.useContext(fee);return e||t||"ltr"}var vw="rovingFocusGroup.onEntryFocus",hee={bubbles:!1,cancelable:!0},pp="RovingFocusGroup",[Z1,RF,mee]=ip(pp),[pee,Yy]=_r(pp,[mee]),[gee,vee]=pee(pp),MF=p.forwardRef((e,t)=>i.jsx(Z1.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Z1.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(xee,{...e,ref:t})})}));MF.displayName=pp;var xee=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...d}=e,h=p.useRef(null),m=St(t,h),g=of(s),[v,x]=Ca({prop:o,defaultProp:l??null,onChange:c,caller:pp}),[y,b]=p.useState(!1),w=Kn(u),j=RF(n),k=p.useRef(!1),[_,S]=p.useState(0);return p.useEffect(()=>{const A=h.current;if(A)return A.addEventListener(vw,w),()=>A.removeEventListener(vw,w)},[w]),i.jsx(gee,{scope:n,orientation:r,dir:g,loop:a,currentTabStopId:v,onItemFocus:p.useCallback(A=>x(A),[x]),onItemShiftTab:p.useCallback(()=>b(!0),[]),onFocusableItemAdd:p.useCallback(()=>S(A=>A+1),[]),onFocusableItemRemove:p.useCallback(()=>S(A=>A-1),[]),children:i.jsx(Ge.div,{tabIndex:y||_===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:Ee(e.onMouseDown,()=>{k.current=!0}),onFocus:Ee(e.onFocus,A=>{const N=!k.current;if(A.target===A.currentTarget&&N&&!y){const T=new CustomEvent(vw,hee);if(A.currentTarget.dispatchEvent(T),!T.defaultPrevented){const I=j().filter(B=>B.focusable),F=I.find(B=>B.active),E=I.find(B=>B.id===v),M=[F,E,...I].filter(Boolean).map(B=>B.ref.current);LF(M,f)}}k.current=!1}),onBlur:Ee(e.onBlur,()=>b(!1))})})}),DF="RovingFocusGroupItem",$F=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:s,children:o,...l}=e,c=ir(),u=s||c,f=vee(DF,n),d=f.currentTabStopId===u,h=RF(n),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:v}=f;return p.useEffect(()=>{if(r)return m(),()=>g()},[r,m,g]),i.jsx(Z1.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:i.jsx(Ge.span,{tabIndex:d?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:Ee(e.onMouseDown,x=>{r?f.onItemFocus(u):x.preventDefault()}),onFocus:Ee(e.onFocus,()=>f.onItemFocus(u)),onKeyDown:Ee(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=wee(x,f.orientation,f.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let w=h().filter(j=>j.focusable).map(j=>j.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const j=w.indexOf(x.currentTarget);w=f.loop?jee(w,j+1):w.slice(j+1)}setTimeout(()=>LF(w))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:v!=null}):o})})});$F.displayName=DF;var yee={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function bee(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function wee(e,t,n){const r=bee(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return yee[r]}function LF(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function jee(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var FF=MF,BF=$F,Xy="Tabs",[_ee,c3e]=_r(Xy,[Yy]),UF=Yy(),[kee,kN]=_ee(Xy),zF=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=of(l),[d,h]=Ca({prop:r,onChange:a,defaultProp:s??"",caller:Xy});return i.jsx(kee,{scope:n,baseId:ir(),value:d,onValueChange:h,orientation:o,dir:f,activationMode:c,children:i.jsx(Ge.div,{dir:f,"data-orientation":o,...u,ref:t})})});zF.displayName=Xy;var qF="TabsList",WF=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,s=kN(qF,n),o=UF(n);return i.jsx(FF,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:i.jsx(Ge.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})});WF.displayName=qF;var HF="TabsTrigger",VF=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...s}=e,o=kN(HF,n),l=UF(n),c=YF(o.baseId,r),u=XF(o.baseId,r),f=r===o.value;return i.jsx(BF,{asChild:!0,...l,focusable:!a,active:f,children:i.jsx(Ge.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...s,ref:t,onMouseDown:Ee(e.onMouseDown,d=>{!a&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:Ee(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:Ee(e.onFocus,()=>{const d=o.activationMode!=="manual";!f&&!a&&d&&o.onValueChange(r)})})})});VF.displayName=HF;var KF="TabsContent",GF=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:s,...o}=e,l=kN(KF,n),c=YF(l.baseId,r),u=XF(l.baseId,r),f=r===l.value,d=p.useRef(f);return p.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),i.jsx(pr,{present:a||f,children:({present:h})=>i.jsx(Ge.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});GF.displayName=KF;function YF(e,t){return`${e}-trigger-${t}`}function XF(e,t){return`${e}-content-${t}`}var See=zF,JF=WF,QF=VF,ZF=GF;const pl=See,so=p.forwardRef(({className:e,...t},n)=>i.jsx(JF,{ref:n,className:ye("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));so.displayName=JF.displayName;const Gn=p.forwardRef(({className:e,...t},n)=>i.jsx(QF,{ref:n,className:ye("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Gn.displayName=QF.displayName;const Dn=p.forwardRef(({className:e,...t},n)=>i.jsx(ZF,{ref:n,className:ye("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Dn.displayName=ZF.displayName;const Nee=op("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),om=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:ye(Nee({variant:t}),e),...n}));om.displayName="Alert";const Cee=p.forwardRef(({className:e,...t},n)=>i.jsx("h5",{ref:n,className:ye("mb-1 font-medium leading-none tracking-tight",e),...t}));Cee.displayName="AlertTitle";const lm=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ye("text-sm [&_p]:leading-relaxed",e),...t}));lm.displayName="AlertDescription";function Aee({sitekey:e,onVerify:t,onExpire:n,className:r}){const a=p.useRef(null),s=p.useRef(null);return p.useEffect(()=>(new Promise(l=>{if(window.hcaptcha)return l();const c=document.createElement("script");c.src="https://js.hcaptcha.com/1/api.js",c.async=!0,c.defer=!0,c.onload=()=>l(),document.head.appendChild(c)}).then(()=>{a.current&&s.current===null&&(s.current=window.hcaptcha.render(a.current,{sitekey:e,callback:l=>t(l),"expired-callback":()=>n&&n()}))}),()=>{try{s.current!==null&&window.hcaptcha&&window.hcaptcha.remove(s.current)}catch{}}),[e]),i.jsx("div",{className:r,children:i.jsx("div",{ref:a})})}const Eee="vite_react_shadcn_ts",Pee="0.1.15",Tee="module",Oee={predev:"echo skip changelog copy",dev:"vite",prebuild:"echo skip changelog copy",build:"vite build","build:dev":"vite build --mode development",lint:"eslint .",preview:"vite preview",test:"vitest",sync:"node sync/index.js"},Iee={"@hookform/resolvers":"^3.10.0","@radix-ui/react-accordion":"^1.2.11","@radix-ui/react-alert-dialog":"^1.1.14","@radix-ui/react-aspect-ratio":"^1.1.7","@radix-ui/react-avatar":"^1.1.10","@radix-ui/react-checkbox":"^1.3.2","@radix-ui/react-collapsible":"^1.1.11","@radix-ui/react-context-menu":"^2.2.15","@radix-ui/react-dialog":"^1.1.14","@radix-ui/react-dropdown-menu":"^2.1.15","@radix-ui/react-hover-card":"^1.1.14","@radix-ui/react-label":"^2.1.7","@radix-ui/react-menubar":"^1.1.15","@radix-ui/react-navigation-menu":"^1.2.13","@radix-ui/react-popover":"^1.1.14","@radix-ui/react-progress":"^1.1.7","@radix-ui/react-radio-group":"^1.3.7","@radix-ui/react-scroll-area":"^1.2.9","@radix-ui/react-select":"^2.2.5","@radix-ui/react-separator":"^1.1.7","@radix-ui/react-slider":"^1.3.5","@radix-ui/react-slot":"^1.2.3","@radix-ui/react-switch":"^1.2.5","@radix-ui/react-tabs":"^1.1.12","@radix-ui/react-toast":"^1.2.14","@radix-ui/react-toggle":"^1.1.9","@radix-ui/react-toggle-group":"^1.1.10","@radix-ui/react-tooltip":"^1.2.7","@supabase/supabase-js":"^2.55.0","@tanstack/react-query":"^5.83.0","class-variance-authority":"^0.7.1",clsx:"^2.1.1",cmdk:"^1.1.1","date-fns":"^3.6.0","embla-carousel-react":"^8.6.0","input-otp":"^1.4.2","lucide-react":"^0.462.0","next-themes":"^0.3.0",react:"^18.3.1","react-day-picker":"^8.10.1","react-dom":"^18.3.1","react-hook-form":"^7.61.1","react-markdown":"^9.1.0","react-resizable-panels":"^2.1.9","react-router-dom":"^6.30.1",recharts:"^2.15.4","remark-gfm":"^4.0.1",sonner:"^1.7.4",dotenv:"^16.4.5","tailwind-merge":"^2.6.0","tailwindcss-animate":"^1.0.7",vaul:"^0.9.9",ws:"^8.18.0",zod:"^3.25.76"},Ree={"@eslint/js":"^9.32.0","@tailwindcss/typography":"^0.5.16","@types/node":"^22.16.5","@types/react":"^18.3.23","@types/react-dom":"^18.3.7","@vitejs/plugin-react-swc":"^3.11.0",autoprefixer:"^10.4.21",eslint:"^9.32.0","eslint-plugin-react-hooks":"^5.2.0","eslint-plugin-react-refresh":"^0.4.20",globals:"^15.15.0",postcss:"^8.5.6",tailwindcss:"^3.4.17",typescript:"^5.8.3","typescript-eslint":"^8.38.0",vite:"^5.4.19",vitest:"^1.6.0"},xw={name:Eee,private:!0,version:Pee,type:Tee,scripts:Oee,dependencies:Iee,devDependencies:Ree};function Mee({onBack:e}){const t=Ka(),[n,r]=p.useState("login"),[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[f,d]=p.useState(null),[h,m]=p.useState(null),[g,v]=p.useState(null),x="30583a2e-84ac-496a-8ec2-23043ae06dc0",y=!!x,b=()=>{var T,I;try{(I=(T=window==null?void 0:window.hcaptcha)==null?void 0:T.reset)==null||I.call(T)}catch{}},[w,j]=p.useState(""),[k,_]=p.useState("");p.useState(""),p.useState("");const S=async T=>{var I;if(T.preventDefault(),s(!0),u(null),v(null),!h){v("Please complete the CAPTCHA"),s(!1);return}try{const{data:F,error:E}=await ne.auth.signInWithPassword({email:w,password:k,...y&&h?{options:{captchaToken:h}}:{}});if(E)throw E;const O=(I=F.user)==null?void 0:I.id;if(O)try{const{data:M,error:B}=await ne.from("users_profile").select("is_active, is_2fa_email_enabled").eq("user_id",O).maybeSingle();if(B)throw console.error("Profile fetch error:",B),B;if(!M){await ne.auth.signOut(),u("Your account profile is missing. Please contact your Master Agent."),s(!1);return}if(M.is_active===!1){t("/account-deactivated",{replace:!0});return}const R=(M==null?void 0:M.is_2fa_email_enabled)===!0;Ie.success("Login successful!"),t("/",{replace:!0});return}catch(M){console.warn("Profile fetch failed:",M),Ie.success("Login successful!")}else Ie.success("Login successful!");t("/",{replace:!0})}catch(F){console.error("Login error:",F),u(F instanceof Error?F.message:"Failed to login"),Ie.error("Login failed"),b()}finally{s(!1)}},A=async T=>{T.preventDefault(),s(!0),u(null);try{const{error:I}=await ne.auth.resetPasswordForEmail(w,{redirectTo:`${window.location.origin}/reset-password`});if(I)throw I;d("Password reset email sent! Please check your inbox."),Ie.success("Password reset email sent!")}catch(I){console.error("Password reset error:",I),u(I instanceof Error?I.message:"Failed to send reset email"),Ie.error("Failed to send reset email")}finally{s(!1)}},N=()=>{u(null),d(null)};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Ae,{className:"w-full max-w-md",children:[i.jsxs(tt,{className:"space-y-1",children:[e&&i.jsxs(Q,{variant:"ghost",size:"sm",onClick:e,className:"absolute top-4 left-4",children:[i.jsx(lp,{className:"w-4 h-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"text-center",children:[i.jsx(Qe,{className:"text-2xl font-bold",children:"Welcome back"}),i.jsx(ui,{children:"Sign in to continue to Chatflow"})]})]}),i.jsx(Je,{children:i.jsxs(pl,{value:n,onValueChange:T=>{r(T),N()},children:[i.jsxs(so,{className:"grid w-full grid-cols-2",children:[i.jsx(Gn,{value:"login",children:"Login"}),i.jsx(Gn,{value:"reset",children:"Reset"})]}),c&&i.jsx(om,{className:"mt-4 border-red-200 bg-red-50",children:i.jsx(lm,{className:"text-red-800",children:c})}),f&&i.jsx(om,{className:"mt-4 border-green-200 bg-green-50",children:i.jsx(lm,{className:"text-green-800",children:f})}),i.jsx(Dn,{value:"login",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:S,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"login-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Uv,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ve,{id:"login-email",type:"email",placeholder:"Enter your email",value:w,onChange:T=>j(T.target.value),className:"pl-10",required:!0})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Well send a one-time code after login."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"login-password",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ve,{id:"login-password",type:o?"text":"password",placeholder:"Enter your password",value:k,onChange:T=>_(T.target.value),className:"pl-10 pr-10",required:!0}),i.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?i.jsx(WL,{className:"h-4 w-4"}):i.jsx(QS,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"flex items-center justify-end text-xs",children:i.jsx(WP,{to:"/reset-password",className:"hover:underline",children:"Forgot password?"})})]}),i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(Aee,{sitekey:x,onVerify:T=>m(T),onExpire:()=>{m(null)}}),g&&i.jsx("p",{className:"text-xs text-red-600 mt-1",children:g})]}),i.jsx(Q,{type:"submit",className:"w-full",disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:i.jsxs(WP,{to:"/changelog",className:"hover:underline",children:["v",xw==null?void 0:xw.version]})})]})}),i.jsx(Dn,{value:"reset",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:A,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"reset-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Uv,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ve,{id:"reset-email",type:"email",placeholder:"Enter your email",value:w,onChange:T=>j(T.target.value),className:"pl-10",required:!0})]})]}),i.jsx(Q,{type:"submit",className:"w-full",disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending reset email..."]}):"Send Reset Email"})]})})]})})]})})}function xg({children:e}){const{user:t,loading:n,otpRequired:r,otpVerified:a,otpEvaluated:s}=Vr(),o=Ka(),l=kl();if(p.useEffect(()=>{var u;if(!n&&s&&t){const f=l.pathname==="/otp",d=l.pathname==="/reset-password",h=l.pathname==="/invite";let m=!1;try{const g=new URL(window.location.href),v=g.searchParams.get("type"),x=g.searchParams.get("code"),y=window.location.hash||"";m=v==="invite"||x&&!y.includes("access_token=")||y.includes("type=invite")||window.location.pathname==="/invite"}catch{}if(t&&(async()=>{try{const{data:g}=await ne.from("users_profile").select("password_set").eq("user_id",t.id).single();if(g&&g.password_set===!1){setTimeout(()=>o("/reset-password",{replace:!0}),0);return}}catch{}})(),m&&!d&&!h){setTimeout(()=>o("/reset-password",{replace:!0}),0);return}if(r&&!a&&!f){let g="2fa";try{new URL(window.location.href).searchParams.get("type")==="recovery"&&(g="recovery"),(u=window.location.hash)!=null&&u.includes("access_token=")&&(g="recovery"),localStorage.getItem("auth.intent")==="recovery"&&(g="recovery")}catch{}setTimeout(()=>o("/otp",{replace:!0,state:{from:l.pathname,intent:g}}),0)}}},[t,n,s,r,a,l.pathname,o]),n)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),i.jsx("span",{children:"Loading..."})]})});if(!t)return i.jsx(Mee,{});const c=l.pathname==="/otp";return t&&r&&!a&&!c?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),i.jsx("span",{children:"Redirecting"})]})}):i.jsx(i.Fragment,{children:e})}const Dee=op("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:opacity-90",secondary:"border-transparent bg-secondary text-secondary-foreground hover:opacity-90",destructive:"border-transparent bg-destructive text-destructive-foreground hover:opacity-90",outline:"text-foreground hover:opacity-90"}},defaultVariants:{variant:"default"}}),Ot=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,className:ye(Dee({variant:t}),e),...n}));Ot.displayName="Badge";var $ee="Separator",pT="horizontal",Lee=["horizontal","vertical"],e3=p.forwardRef((e,t)=>{const{decorative:n,orientation:r=pT,...a}=e,s=Fee(r)?r:pT,l=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return i.jsx(Ge.div,{"data-orientation":s,...l,...a,ref:t})});e3.displayName=$ee;function Fee(e){return Lee.includes(e)}var t3=e3;const cm=p.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>i.jsx(t3,{ref:a,decorative:n,orientation:t,className:ye("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));cm.displayName=t3.displayName;var yw=0;function Jy(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??gT()),document.body.insertAdjacentElement("beforeend",e[1]??gT()),yw++,()=>{yw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),yw--}},[])}function gT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var bw="focusScope.autoFocusOnMount",ww="focusScope.autoFocusOnUnmount",vT={bubbles:!1,cancelable:!0},Bee="FocusScope",gp=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...o}=e,[l,c]=p.useState(null),u=Kn(a),f=Kn(s),d=p.useRef(null),h=St(t,v=>c(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(w){if(m.paused||!l)return;const j=w.target;l.contains(j)?d.current=j:Ro(d.current,{select:!0})},x=function(w){if(m.paused||!l)return;const j=w.relatedTarget;j!==null&&(l.contains(j)||Ro(d.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&Ro(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const b=new MutationObserver(y);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),b.disconnect()}}},[r,l,m.paused]),p.useEffect(()=>{if(l){yT.add(m);const v=document.activeElement;if(!l.contains(v)){const y=new CustomEvent(bw,vT);l.addEventListener(bw,u),l.dispatchEvent(y),y.defaultPrevented||(Uee(Vee(n3(l)),{select:!0}),document.activeElement===v&&Ro(l))}return()=>{l.removeEventListener(bw,u),setTimeout(()=>{const y=new CustomEvent(ww,vT);l.addEventListener(ww,f),l.dispatchEvent(y),y.defaultPrevented||Ro(v??document.body,{select:!0}),l.removeEventListener(ww,f),yT.remove(m)},0)}}},[l,u,f,m]);const g=p.useCallback(v=>{if(!n&&!r||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const b=v.currentTarget,[w,j]=zee(b);w&&j?!v.shiftKey&&y===j?(v.preventDefault(),n&&Ro(w,{select:!0})):v.shiftKey&&y===w&&(v.preventDefault(),n&&Ro(j,{select:!0})):y===b&&v.preventDefault()}},[n,r,m.paused]);return i.jsx(Ge.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});gp.displayName=Bee;function Uee(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Ro(r,{select:t}),document.activeElement!==n)return}function zee(e){const t=n3(e),n=xT(t,e),r=xT(t.reverse(),e);return[n,r]}function n3(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function xT(e,t){for(const n of e)if(!qee(n,{upTo:t}))return n}function qee(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Wee(e){return e instanceof HTMLInputElement&&"select"in e}function Ro(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Wee(e)&&t&&e.select()}}var yT=Hee();function Hee(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=bT(e,t),e.unshift(t)},remove(t){var n;e=bT(e,t),(n=e[0])==null||n.resume()}}}function bT(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Vee(e){return e.filter(t=>t.tagName!=="A")}var Kee=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},uu=new WeakMap,yg=new WeakMap,bg={},jw=0,r3=function(e){return e&&(e.host||r3(e.parentNode))},Gee=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=r3(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Yee=function(e,t,n,r){var a=Gee(t,Array.isArray(e)?e:[e]);bg[n]||(bg[n]=new WeakMap);var s=bg[n],o=[],l=new Set,c=new Set(a),u=function(d){!d||l.has(d)||(l.add(d),u(d.parentNode))};a.forEach(u);var f=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(l.has(h))f(h);else try{var m=h.getAttribute(r),g=m!==null&&m!=="false",v=(uu.get(h)||0)+1,x=(s.get(h)||0)+1;uu.set(h,v),s.set(h,x),o.push(h),v===1&&g&&yg.set(h,!0),x===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return f(t),l.clear(),jw++,function(){o.forEach(function(d){var h=uu.get(d)-1,m=s.get(d)-1;uu.set(d,h),s.set(d,m),h||(yg.has(d)||d.removeAttribute(r),yg.delete(d)),m||d.removeAttribute(n)}),jw--,jw||(uu=new WeakMap,uu=new WeakMap,yg=new WeakMap,bg={})}},Qy=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Kee(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),Yee(r,a,n,"aria-hidden")):function(){return null}},as=function(){return as=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},as.apply(this,arguments)};function a3(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Xee(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,s;r<a;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var dv="right-scroll-bar-position",fv="width-before-scroll-bar",Jee="with-scroll-bars-hidden",Qee="--removed-body-scroll-bar-size";function _w(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Zee(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var ete=typeof window<"u"?p.useLayoutEffect:p.useEffect,wT=new WeakMap;function tte(e,t){var n=Zee(null,function(r){return e.forEach(function(a){return _w(a,r)})});return ete(function(){var r=wT.get(n);if(r){var a=new Set(r),s=new Set(e),o=n.current;a.forEach(function(l){s.has(l)||_w(l,null)}),s.forEach(function(l){a.has(l)||_w(l,o)})}wT.set(n,e)},[e]),n}function nte(e){return e}function rte(e,t){t===void 0&&(t=nte);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(s),o=n}var c=function(){var f=o;o=[],f.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){o.push(f),u()},filter:function(f){return o=o.filter(f),n}}}};return a}function ate(e){e===void 0&&(e={});var t=rte(null);return t.options=as({async:!0,ssr:!1},e),t}var i3=function(e){var t=e.sideCar,n=a3(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,as({},n))};i3.isSideCarExport=!0;function ite(e,t){return e.useMedium(t),i3}var s3=ate(),kw=function(){},Zy=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:kw,onWheelCapture:kw,onTouchMoveCapture:kw}),a=r[0],s=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,m=e.noRelative,g=e.noIsolation,v=e.inert,x=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,w=e.gapMode,j=a3(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=h,_=tte([n,t]),S=as(as({},j),a);return p.createElement(p.Fragment,null,f&&p.createElement(k,{sideCar:s3,removeScrollBar:u,shards:d,noRelative:m,noIsolation:g,inert:v,setCallbacks:s,allowPinchZoom:!!x,lockRef:n,gapMode:w}),o?p.cloneElement(p.Children.only(l),as(as({},S),{ref:_})):p.createElement(b,as({},S,{className:c,ref:_}),l))});Zy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Zy.classNames={fullWidth:fv,zeroRight:dv};var ste=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ote(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ste();return t&&e.setAttribute("nonce",t),e}function lte(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function cte(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ute=function(){var e=0,t=null;return{add:function(n){e==0&&(t=ote())&&(lte(t,n),cte(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},dte=function(){var e=ute();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},o3=function(){var e=dte(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},fte={left:0,top:0,right:0,gap:0},Sw=function(e){return parseInt(e||"",10)||0},hte=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Sw(n),Sw(r),Sw(a)]},mte=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return fte;var t=hte(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},pte=o3(),Zu="data-scroll-locked",gte=function(e,t,n,r){var a=e.left,s=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Jee,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Zu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(dv,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(fv,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(dv," .").concat(dv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(fv," .").concat(fv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Zu,`] {
    `).concat(Qee,": ").concat(l,`px;
  }
`)},jT=function(){var e=parseInt(document.body.getAttribute(Zu)||"0",10);return isFinite(e)?e:0},vte=function(){p.useEffect(function(){return document.body.setAttribute(Zu,(jT()+1).toString()),function(){var e=jT()-1;e<=0?document.body.removeAttribute(Zu):document.body.setAttribute(Zu,e.toString())}},[])},xte=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;vte();var s=p.useMemo(function(){return mte(a)},[a]);return p.createElement(pte,{styles:gte(s,!t,a,n?"":"!important")})},e_=!1;if(typeof window<"u")try{var wg=Object.defineProperty({},"passive",{get:function(){return e_=!0,!0}});window.addEventListener("test",wg,wg),window.removeEventListener("test",wg,wg)}catch{e_=!1}var du=e_?{passive:!1}:!1,yte=function(e){return e.tagName==="TEXTAREA"},l3=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!yte(e)&&n[t]==="visible")},bte=function(e){return l3(e,"overflowY")},wte=function(e){return l3(e,"overflowX")},_T=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=c3(e,r);if(a){var s=u3(e,r),o=s[1],l=s[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},jte=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},_te=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},c3=function(e,t){return e==="v"?bte(t):wte(t)},u3=function(e,t){return e==="v"?jte(t):_te(t)},kte=function(e,t){return e==="h"&&t==="rtl"?-1:1},Ste=function(e,t,n,r,a){var s=kte(e,window.getComputedStyle(t).direction),o=s*r,l=n.target,c=t.contains(l),u=!1,f=o>0,d=0,h=0;do{if(!l)break;var m=u3(e,l),g=m[0],v=m[1],x=m[2],y=v-x-s*g;(g||y)&&c3(e,l)&&(d+=y,h+=g);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(d)<1||!a)||!f&&(Math.abs(h)<1||!a))&&(u=!0),u},jg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},kT=function(e){return[e.deltaX,e.deltaY]},ST=function(e){return e&&"current"in e?e.current:e},Nte=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Cte=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Ate=0,fu=[];function Ete(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),a=p.useState(Ate++)[0],s=p.useState(o3)[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=Xee([e.lockRef.current],(e.shards||[]).map(ST),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var y=jg(v),b=n.current,w="deltaX"in v?v.deltaX:b[0]-y[0],j="deltaY"in v?v.deltaY:b[1]-y[1],k,_=v.target,S=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in v&&S==="h"&&_.type==="range")return!1;var A=_T(S,_);if(!A)return!0;if(A?k=S:(k=S==="v"?"h":"v",A=_T(S,_)),!A)return!1;if(!r.current&&"changedTouches"in v&&(w||j)&&(r.current=k),!k)return!0;var N=r.current||k;return Ste(N,x,v,N==="h"?w:j,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!fu.length||fu[fu.length-1]!==s)){var y="deltaY"in x?kT(x):jg(x),b=t.current.filter(function(k){return k.name===x.type&&(k.target===x.target||x.target===k.shadowParent)&&Nte(k.delta,y)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(ST).filter(Boolean).filter(function(k){return k.contains(x.target)}),j=w.length>0?l(x,w[0]):!o.current.noIsolation;j&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,y,b){var w={name:v,delta:x,target:y,should:b,shadowParent:Pte(y)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(j){return j!==w})},1)},[]),f=p.useCallback(function(v){n.current=jg(v),r.current=void 0},[]),d=p.useCallback(function(v){u(v.type,kT(v),v.target,l(v,e.lockRef.current))},[]),h=p.useCallback(function(v){u(v.type,jg(v),v.target,l(v,e.lockRef.current))},[]);p.useEffect(function(){return fu.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,du),document.addEventListener("touchmove",c,du),document.addEventListener("touchstart",f,du),function(){fu=fu.filter(function(v){return v!==s}),document.removeEventListener("wheel",c,du),document.removeEventListener("touchmove",c,du),document.removeEventListener("touchstart",f,du)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(s,{styles:Cte(a)}):null,m?p.createElement(xte,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Pte(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Tte=ite(s3,Ete);var vp=p.forwardRef(function(e,t){return p.createElement(Zy,as({},e,{ref:t,sideCar:Tte}))});vp.classNames=Zy.classNames;var t_=["Enter"," "],Ote=["ArrowDown","PageUp","Home"],d3=["ArrowUp","PageDown","End"],Ite=[...Ote,...d3],Rte={ltr:[...t_,"ArrowRight"],rtl:[...t_,"ArrowLeft"]},Mte={ltr:["ArrowLeft"],rtl:["ArrowRight"]},xp="Menu",[um,Dte,$te]=ip(xp),[Xc,f3]=_r(xp,[$te,jl,Yy]),eb=jl(),h3=Yy(),[Lte,Jc]=Xc(xp),[Fte,yp]=Xc(xp),m3=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:s,modal:o=!0}=e,l=eb(t),[c,u]=p.useState(null),f=p.useRef(!1),d=Kn(s),h=of(a);return p.useEffect(()=>{const m=()=>{f.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>f.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),i.jsx(Iy,{...l,children:i.jsx(Lte,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:u,children:i.jsx(Fte,{scope:t,onClose:p.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:h,modal:o,children:r})})})};m3.displayName=xp;var Bte="MenuAnchor",SN=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=eb(n);return i.jsx(dp,{...a,...r,ref:t})});SN.displayName=Bte;var NN="MenuPortal",[Ute,p3]=Xc(NN,{forceMount:void 0}),g3=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,s=Jc(NN,t);return i.jsx(Ute,{scope:t,forceMount:n,children:i.jsx(pr,{present:n||s.open,children:i.jsx(Zd,{asChild:!0,container:a,children:r})})})};g3.displayName=NN;var di="MenuContent",[zte,CN]=Xc(di),v3=p.forwardRef((e,t)=>{const n=p3(di,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,s=Jc(di,e.__scopeMenu),o=yp(di,e.__scopeMenu);return i.jsx(um.Provider,{scope:e.__scopeMenu,children:i.jsx(pr,{present:r||s.open,children:i.jsx(um.Slot,{scope:e.__scopeMenu,children:o.modal?i.jsx(qte,{...a,ref:t}):i.jsx(Wte,{...a,ref:t})})})})}),qte=p.forwardRef((e,t)=>{const n=Jc(di,e.__scopeMenu),r=p.useRef(null),a=St(t,r);return p.useEffect(()=>{const s=r.current;if(s)return Qy(s)},[]),i.jsx(AN,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ee(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Wte=p.forwardRef((e,t)=>{const n=Jc(di,e.__scopeMenu);return i.jsx(AN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Hte=fl("MenuContent.ScrollLock"),AN=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...v}=e,x=Jc(di,n),y=yp(di,n),b=eb(n),w=h3(n),j=Dte(n),[k,_]=p.useState(null),S=p.useRef(null),A=St(t,S,x.onContentChange),N=p.useRef(0),T=p.useRef(""),I=p.useRef(0),F=p.useRef(null),E=p.useRef("right"),O=p.useRef(0),M=g?vp:p.Fragment,B=g?{as:Hte,allowPinchZoom:!0}:void 0,R=$=>{var W,ee;const C=T.current+$,U=j().filter(X=>!X.disabled),D=document.activeElement,P=(W=U.find(X=>X.ref.current===D))==null?void 0:W.textValue,H=U.map(X=>X.textValue),G=rne(H,C,P),Y=(ee=U.find(X=>X.textValue===G))==null?void 0:ee.ref.current;(function X(ae){T.current=ae,window.clearTimeout(N.current),ae!==""&&(N.current=window.setTimeout(()=>X(""),1e3))})(C),Y&&setTimeout(()=>Y.focus())};p.useEffect(()=>()=>window.clearTimeout(N.current),[]),Jy();const L=p.useCallback($=>{var U,D;return E.current===((U=F.current)==null?void 0:U.side)&&ine($,(D=F.current)==null?void 0:D.area)},[]);return i.jsx(zte,{scope:n,searchRef:T,onItemEnter:p.useCallback($=>{L($)&&$.preventDefault()},[L]),onItemLeave:p.useCallback($=>{var C;L($)||((C=S.current)==null||C.focus(),_(null))},[L]),onTriggerLeave:p.useCallback($=>{L($)&&$.preventDefault()},[L]),pointerGraceTimerRef:I,onPointerGraceIntentChange:p.useCallback($=>{F.current=$},[]),children:i.jsx(M,{...B,children:i.jsx(gp,{asChild:!0,trapped:a,onMountAutoFocus:Ee(s,$=>{var C;$.preventDefault(),(C=S.current)==null||C.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(Kc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:i.jsx(FF,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:_,onEntryFocus:Ee(c,$=>{y.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Ry,{role:"menu","aria-orientation":"vertical","data-state":I3(x.open),"data-radix-menu-content":"",dir:y.dir,...b,...v,ref:A,style:{outline:"none",...v.style},onKeyDown:Ee(v.onKeyDown,$=>{const U=$.target.closest("[data-radix-menu-content]")===$.currentTarget,D=$.ctrlKey||$.altKey||$.metaKey,P=$.key.length===1;U&&($.key==="Tab"&&$.preventDefault(),!D&&P&&R($.key));const H=S.current;if($.target!==H||!Ite.includes($.key))return;$.preventDefault();const Y=j().filter(W=>!W.disabled).map(W=>W.ref.current);d3.includes($.key)&&Y.reverse(),tne(Y)}),onBlur:Ee(e.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(N.current),T.current="")}),onPointerMove:Ee(e.onPointerMove,dm($=>{const C=$.target,U=O.current!==$.clientX;if($.currentTarget.contains(C)&&U){const D=$.clientX>O.current?"right":"left";E.current=D,O.current=$.clientX}}))})})})})})})});v3.displayName=di;var Vte="MenuGroup",EN=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Ge.div,{role:"group",...r,ref:t})});EN.displayName=Vte;var Kte="MenuLabel",x3=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Ge.div,{...r,ref:t})});x3.displayName=Kte;var Qv="MenuItem",NT="menu.itemSelect",tb=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,s=p.useRef(null),o=yp(Qv,e.__scopeMenu),l=CN(Qv,e.__scopeMenu),c=St(t,s),u=p.useRef(!1),f=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(NT,{bubbles:!0,cancelable:!0});d.addEventListener(NT,m=>r==null?void 0:r(m),{once:!0}),KS(d,h),h.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(y3,{...a,ref:c,disabled:n,onClick:Ee(e.onClick,f),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),u.current=!0},onPointerUp:Ee(e.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:Ee(e.onKeyDown,d=>{const h=l.searchRef.current!=="";n||h&&d.key===" "||t_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});tb.displayName=Qv;var y3=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...s}=e,o=CN(Qv,n),l=h3(n),c=p.useRef(null),u=St(t,c),[f,d]=p.useState(!1),[h,m]=p.useState("");return p.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[s.children]),i.jsx(um.ItemSlot,{scope:n,disabled:r,textValue:a??h,children:i.jsx(BF,{asChild:!0,...l,focusable:!r,children:i.jsx(Ge.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:Ee(e.onPointerMove,dm(g=>{r?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ee(e.onPointerLeave,dm(g=>o.onItemLeave(g))),onFocus:Ee(e.onFocus,()=>d(!0)),onBlur:Ee(e.onBlur,()=>d(!1))})})})}),Gte="MenuCheckboxItem",b3=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return i.jsx(S3,{scope:e.__scopeMenu,checked:n,children:i.jsx(tb,{role:"menuitemcheckbox","aria-checked":Zv(n)?"mixed":n,...a,ref:t,"data-state":TN(n),onSelect:Ee(a.onSelect,()=>r==null?void 0:r(Zv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});b3.displayName=Gte;var w3="MenuRadioGroup",[Yte,Xte]=Xc(w3,{value:void 0,onValueChange:()=>{}}),j3=p.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,s=Kn(r);return i.jsx(Yte,{scope:e.__scopeMenu,value:n,onValueChange:s,children:i.jsx(EN,{...a,ref:t})})});j3.displayName=w3;var _3="MenuRadioItem",k3=p.forwardRef((e,t)=>{const{value:n,...r}=e,a=Xte(_3,e.__scopeMenu),s=n===a.value;return i.jsx(S3,{scope:e.__scopeMenu,checked:s,children:i.jsx(tb,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":TN(s),onSelect:Ee(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});k3.displayName=_3;var PN="MenuItemIndicator",[S3,Jte]=Xc(PN,{checked:!1}),N3=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,s=Jte(PN,n);return i.jsx(pr,{present:r||Zv(s.checked)||s.checked===!0,children:i.jsx(Ge.span,{...a,ref:t,"data-state":TN(s.checked)})})});N3.displayName=PN;var Qte="MenuSeparator",C3=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Ge.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});C3.displayName=Qte;var Zte="MenuArrow",A3=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=eb(n);return i.jsx(My,{...a,...r,ref:t})});A3.displayName=Zte;var ene="MenuSub",[u3e,E3]=Xc(ene),oh="MenuSubTrigger",P3=p.forwardRef((e,t)=>{const n=Jc(oh,e.__scopeMenu),r=yp(oh,e.__scopeMenu),a=E3(oh,e.__scopeMenu),s=CN(oh,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,u={__scopeMenu:e.__scopeMenu},f=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>f,[f]),p.useEffect(()=>{const d=l.current;return()=>{window.clearTimeout(d),c(null)}},[l,c]),i.jsx(SN,{asChild:!0,...u,children:i.jsx(y3,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":I3(n.open),...e,ref:ro(t,a.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ee(e.onPointerMove,dm(d=>{s.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ee(e.onPointerLeave,dm(d=>{var m,g;f();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(g=n.content)==null?void 0:g.dataset.side,x=v==="right",y=x?-5:5,b=h[x?"left":"right"],w=h[x?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:b,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:b,y:h.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:Ee(e.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";e.disabled||h&&d.key===" "||Rte[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});P3.displayName=oh;var T3="MenuSubContent",O3=p.forwardRef((e,t)=>{const n=p3(di,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,s=Jc(di,e.__scopeMenu),o=yp(di,e.__scopeMenu),l=E3(T3,e.__scopeMenu),c=p.useRef(null),u=St(t,c);return i.jsx(um.Provider,{scope:e.__scopeMenu,children:i.jsx(pr,{present:r||s.open,children:i.jsx(um.Slot,{scope:e.__scopeMenu,children:i.jsx(AN,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var d;o.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ee(e.onFocusOutside,f=>{f.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:Ee(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ee(e.onKeyDown,f=>{var m;const d=f.currentTarget.contains(f.target),h=Mte[o.dir].includes(f.key);d&&h&&(s.onOpenChange(!1),(m=l.trigger)==null||m.focus(),f.preventDefault())})})})})})});O3.displayName=T3;function I3(e){return e?"open":"closed"}function Zv(e){return e==="indeterminate"}function TN(e){return Zv(e)?"indeterminate":e?"checked":"unchecked"}function tne(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function nne(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function rne(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let o=nne(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function ane(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,f=l.y,d=c.x,h=c.y;f>r!=h>r&&n<(d-u)*(r-f)/(h-f)+u&&(a=!a)}return a}function ine(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return ane(n,t)}function dm(e){return t=>t.pointerType==="mouse"?e(t):void 0}var sne=m3,one=SN,lne=g3,cne=v3,une=EN,dne=x3,fne=tb,hne=b3,mne=j3,pne=k3,gne=N3,vne=C3,xne=A3,yne=P3,bne=O3,nb="DropdownMenu",[wne,d3e]=_r(nb,[f3]),la=f3(),[jne,R3]=wne(nb),M3=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:s,onOpenChange:o,modal:l=!0}=e,c=la(t),u=p.useRef(null),[f,d]=Ca({prop:a,defaultProp:s??!1,onChange:o,caller:nb});return i.jsx(jne,{scope:t,triggerId:ir(),triggerRef:u,contentId:ir(),open:f,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:l,children:i.jsx(sne,{...c,open:f,onOpenChange:d,dir:r,modal:l,children:n})})};M3.displayName=nb;var D3="DropdownMenuTrigger",$3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,s=R3(D3,n),o=la(n);return i.jsx(one,{asChild:!0,...o,children:i.jsx(Ge.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:ro(t,s.triggerRef),onPointerDown:Ee(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:Ee(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});$3.displayName=D3;var _ne="DropdownMenuPortal",L3=e=>{const{__scopeDropdownMenu:t,...n}=e,r=la(t);return i.jsx(lne,{...r,...n})};L3.displayName=_ne;var F3="DropdownMenuContent",B3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=R3(F3,n),s=la(n),o=p.useRef(!1);return i.jsx(cne,{id:a.contentId,"aria-labelledby":a.triggerId,...s,...r,ref:t,onCloseAutoFocus:Ee(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ee(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,f=c.button===2||u;(!a.modal||f)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});B3.displayName=F3;var kne="DropdownMenuGroup",Sne=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(une,{...a,...r,ref:t})});Sne.displayName=kne;var Nne="DropdownMenuLabel",U3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(dne,{...a,...r,ref:t})});U3.displayName=Nne;var Cne="DropdownMenuItem",z3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(fne,{...a,...r,ref:t})});z3.displayName=Cne;var Ane="DropdownMenuCheckboxItem",q3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(hne,{...a,...r,ref:t})});q3.displayName=Ane;var Ene="DropdownMenuRadioGroup",Pne=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(mne,{...a,...r,ref:t})});Pne.displayName=Ene;var Tne="DropdownMenuRadioItem",W3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(pne,{...a,...r,ref:t})});W3.displayName=Tne;var One="DropdownMenuItemIndicator",H3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(gne,{...a,...r,ref:t})});H3.displayName=One;var Ine="DropdownMenuSeparator",V3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(vne,{...a,...r,ref:t})});V3.displayName=Ine;var Rne="DropdownMenuArrow",Mne=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(xne,{...a,...r,ref:t})});Mne.displayName=Rne;var Dne="DropdownMenuSubTrigger",K3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(yne,{...a,...r,ref:t})});K3.displayName=Dne;var $ne="DropdownMenuSubContent",G3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=la(n);return i.jsx(bne,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});G3.displayName=$ne;var Lne=M3,Fne=$3,Bne=L3,Y3=B3,X3=U3,J3=z3,Q3=q3,Z3=W3,e5=H3,t5=V3,n5=K3,r5=G3;const _u=Lne,ku=Fne,Une=p.forwardRef(({className:e,inset:t,children:n,...r},a)=>i.jsxs(n5,{ref:a,className:ye("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,i.jsx(Ay,{className:"ml-auto h-4 w-4"})]}));Une.displayName=n5.displayName;const zne=p.forwardRef(({className:e,...t},n)=>i.jsx(r5,{ref:n,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));zne.displayName=r5.displayName;const ec=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(Bne,{children:i.jsx(Y3,{ref:r,sideOffset:t,className:ye("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));ec.displayName=Y3.displayName;const Za=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(J3,{ref:r,className:ye("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Za.displayName=J3.displayName;const qne=p.forwardRef(({className:e,children:t,checked:n,...r},a)=>i.jsxs(Q3,{ref:a,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(e5,{children:i.jsx(Cy,{className:"h-4 w-4"})})}),t]}));qne.displayName=Q3.displayName;const Wne=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(Z3,{ref:r,className:ye("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(e5,{children:i.jsx(WV,{className:"h-2 w-2 fill-current"})})}),t]}));Wne.displayName=Z3.displayName;const a5=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(X3,{ref:r,className:ye("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));a5.displayName=X3.displayName;const n_=p.forwardRef(({className:e,...t},n)=>i.jsx(t5,{ref:n,className:ye("-mx-1 my-1 h-px bg-muted",e),...t}));n_.displayName=t5.displayName;var i5={exports:{}},s5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sd=p;function Hne(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vne=typeof Object.is=="function"?Object.is:Hne,Kne=Sd.useState,Gne=Sd.useEffect,Yne=Sd.useLayoutEffect,Xne=Sd.useDebugValue;function Jne(e,t){var n=t(),r=Kne({inst:{value:n,getSnapshot:t}}),a=r[0].inst,s=r[1];return Yne(function(){a.value=n,a.getSnapshot=t,Nw(a)&&s({inst:a})},[e,n,t]),Gne(function(){return Nw(a)&&s({inst:a}),e(function(){Nw(a)&&s({inst:a})})},[e]),Xne(n),n}function Nw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vne(e,n)}catch{return!0}}function Qne(e,t){return t()}var Zne=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Qne:Jne;s5.useSyncExternalStore=Sd.useSyncExternalStore!==void 0?Sd.useSyncExternalStore:Zne;i5.exports=s5;var ere=i5.exports;function tre(){return ere.useSyncExternalStore(nre,()=>!0,()=>!1)}function nre(){return()=>{}}var ON="Avatar",[rre,f3e]=_r(ON),[are,o5]=rre(ON),l5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,s]=p.useState("idle");return i.jsx(are,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:s,children:i.jsx(Ge.span,{...r,ref:t})})});l5.displayName=ON;var c5="AvatarImage",u5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...s}=e,o=o5(c5,n),l=ire(r,s),c=Kn(u=>{a(u),o.onImageLoadingStatusChange(u)});return Xn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(Ge.img,{...s,ref:t,src:r}):null});u5.displayName=c5;var d5="AvatarFallback",f5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,s=o5(d5,n),[o,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?i.jsx(Ge.span,{...a,ref:t}):null});f5.displayName=d5;function CT(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ire(e,{referrerPolicy:t,crossOrigin:n}){const r=tre(),a=p.useRef(null),s=r?(a.current||(a.current=new window.Image),a.current):null,[o,l]=p.useState(()=>CT(s,e));return Xn(()=>{l(CT(s,e))},[s,e]),Xn(()=>{const c=d=>()=>{l(d)};if(!s)return;const u=c("loaded"),f=c("error");return s.addEventListener("load",u),s.addEventListener("error",f),t&&(s.referrerPolicy=t),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",u),s.removeEventListener("error",f)}},[s,n,t]),o}var h5=l5,m5=u5,p5=f5;const zr=p.forwardRef(({className:e,...t},n)=>i.jsx(h5,{ref:n,className:ye("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));zr.displayName=h5.displayName;const Us=p.forwardRef(({className:e,...t},n)=>i.jsx(m5,{ref:n,className:ye("aspect-square h-full w-full",e),...t}));Us.displayName=m5.displayName;const qr=p.forwardRef(({className:e,...t},n)=>i.jsx(p5,{ref:n,className:ye("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));qr.displayName=p5.displayName;var rb="Dialog",[g5,v5]=_r(rb),[sre,Ki]=g5(rb),x5=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,f]=Ca({prop:r,defaultProp:a??!1,onChange:s,caller:rb});return i.jsx(sre,{scope:t,triggerRef:l,contentRef:c,contentId:ir(),titleId:ir(),descriptionId:ir(),open:u,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(d=>!d),[f]),modal:o,children:n})};x5.displayName=rb;var y5="DialogTrigger",b5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Ki(y5,n),s=St(t,a.triggerRef);return i.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":MN(a.open),...r,ref:s,onClick:Ee(e.onClick,a.onOpenToggle)})});b5.displayName=y5;var IN="DialogPortal",[ore,w5]=g5(IN,{forceMount:void 0}),j5=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,s=Ki(IN,t);return i.jsx(ore,{scope:t,forceMount:n,children:p.Children.map(r,o=>i.jsx(pr,{present:n||s.open,children:i.jsx(Zd,{asChild:!0,container:a,children:o})}))})};j5.displayName=IN;var ex="DialogOverlay",_5=p.forwardRef((e,t)=>{const n=w5(ex,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=Ki(ex,e.__scopeDialog);return s.modal?i.jsx(pr,{present:r||s.open,children:i.jsx(cre,{...a,ref:t})}):null});_5.displayName=ex;var lre=fl("DialogOverlay.RemoveScroll"),cre=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Ki(ex,n);return i.jsx(vp,{as:lre,allowPinchZoom:!0,shards:[a.contentRef],children:i.jsx(Ge.div,{"data-state":MN(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Nc="DialogContent",k5=p.forwardRef((e,t)=>{const n=w5(Nc,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=Ki(Nc,e.__scopeDialog);return i.jsx(pr,{present:r||s.open,children:s.modal?i.jsx(ure,{...a,ref:t}):i.jsx(dre,{...a,ref:t})})});k5.displayName=Nc;var ure=p.forwardRef((e,t)=>{const n=Ki(Nc,e.__scopeDialog),r=p.useRef(null),a=St(t,n.contentRef,r);return p.useEffect(()=>{const s=r.current;if(s)return Qy(s)},[]),i.jsx(S5,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ee(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ee(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:Ee(e.onFocusOutside,s=>s.preventDefault())})}),dre=p.forwardRef((e,t)=>{const n=Ki(Nc,e.__scopeDialog),r=p.useRef(!1),a=p.useRef(!1);return i.jsx(S5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),S5=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,...o}=e,l=Ki(Nc,n),c=p.useRef(null),u=St(t,c);return Jy(),i.jsxs(i.Fragment,{children:[i.jsx(gp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(Kc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":MN(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(hre,{titleId:l.titleId}),i.jsx(pre,{contentRef:c,descriptionId:l.descriptionId})]})]})}),RN="DialogTitle",N5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Ki(RN,n);return i.jsx(Ge.h2,{id:a.titleId,...r,ref:t})});N5.displayName=RN;var C5="DialogDescription",A5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Ki(C5,n);return i.jsx(Ge.p,{id:a.descriptionId,...r,ref:t})});A5.displayName=C5;var E5="DialogClose",P5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Ki(E5,n);return i.jsx(Ge.button,{type:"button",...r,ref:t,onClick:Ee(e.onClick,()=>a.onOpenChange(!1))})});P5.displayName=E5;function MN(e){return e?"open":"closed"}var T5="DialogTitleWarning",[fre,O5]=W7(T5,{contentName:Nc,titleName:RN,docsSlug:"dialog"}),hre=({titleId:e})=>{const t=O5(T5),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},mre="DialogDescriptionWarning",pre=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${O5(mre).contentName}}.`;return p.useEffect(()=>{var s;const a=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},DN=x5,I5=b5,$N=j5,ab=_5,ib=k5,LN=N5,FN=A5,BN=P5;const mn=DN,UN=I5,gre=$N,R5=p.forwardRef(({className:e,...t},n)=>i.jsx(ab,{ref:n,className:ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));R5.displayName=ab.displayName;const cn=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(gre,{children:[i.jsx(R5,{}),i.jsxs(ib,{ref:r,className:ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(BN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(cp,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cn.displayName=ib.displayName;const un=({className:e,...t})=>i.jsx("div",{className:ye("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});un.displayName="DialogHeader";const ma=({className:e,...t})=>i.jsx("div",{className:ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ma.displayName="DialogFooter";const dn=p.forwardRef(({className:e,...t},n)=>i.jsx(LN,{ref:n,className:ye("text-lg font-semibold leading-none tracking-tight",e),...t}));dn.displayName=LN.displayName;const Er=p.forwardRef(({className:e,...t},n)=>i.jsx(FN,{ref:n,className:ye("text-sm text-muted-foreground",e),...t}));Er.displayName=FN.displayName;function vre({open:e,onClose:t,isMasterAgent:n,pausedByName:r,pausedAt:a,onOpenAdminPanel:s}){const o=a?new Date(a).toLocaleString():null;return i.jsx(mn,{open:e,onOpenChange:l=>{l||t()},children:i.jsxs(cn,{className:"max-w-lg",children:[i.jsxs(un,{children:[i.jsx(dn,{children:"AI Replies Are Currently Paused"}),i.jsx(Er,{children:n?i.jsxs("span",{children:["AI responses are paused across every channel. Synka will not send AI replies until you resume them in ",i.jsx("strong",{children:"Admin Panel  AI Controls"}),"."]}):i.jsx("span",{children:"A master agent paused all AI responses across every channel. Synka will not send AI replies until this setting is changed. Only a master agent can resume AI replies."})})]}),i.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[r?i.jsxs("div",{children:["Paused by: ",r]}):null,o?i.jsxs("div",{children:["At: ",o]}):null]}),i.jsxs(ma,{className:"gap-2",children:[n?i.jsx(Q,{variant:"ghost",onClick:s,children:"Open Admin Panel"}):null,i.jsx(Q,{onClick:t,children:"Got it"})]})]})})}function r_(e,[t,n]){return Math.min(n,Math.max(t,e))}function xre(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var zN="ScrollArea",[M5,h3e]=_r(zN),[yre,gi]=M5(zN),D5=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:s=600,...o}=e,[l,c]=p.useState(null),[u,f]=p.useState(null),[d,h]=p.useState(null),[m,g]=p.useState(null),[v,x]=p.useState(null),[y,b]=p.useState(0),[w,j]=p.useState(0),[k,_]=p.useState(!1),[S,A]=p.useState(!1),N=St(t,I=>c(I)),T=of(a);return i.jsx(yre,{scope:n,type:r,dir:T,scrollHideDelay:s,scrollArea:l,viewport:u,onViewportChange:f,content:d,onContentChange:h,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:k,onScrollbarXEnabledChange:_,scrollbarY:v,onScrollbarYChange:x,scrollbarYEnabled:S,onScrollbarYEnabledChange:A,onCornerWidthChange:b,onCornerHeightChange:j,children:i.jsx(Ge.div,{dir:T,...o,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});D5.displayName=zN;var $5="ScrollAreaViewport",L5=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...s}=e,o=gi($5,n),l=p.useRef(null),c=St(t,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),i.jsx(Ge.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});L5.displayName=$5;var js="ScrollAreaScrollbar",qN=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=gi(js,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return p.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),a.type==="hover"?i.jsx(bre,{...r,ref:t,forceMount:n}):a.type==="scroll"?i.jsx(wre,{...r,ref:t,forceMount:n}):a.type==="auto"?i.jsx(F5,{...r,ref:t,forceMount:n}):a.type==="always"?i.jsx(WN,{...r,ref:t}):null});qN.displayName=js;var bre=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=gi(js,e.__scopeScrollArea),[s,o]=p.useState(!1);return p.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},f=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),i.jsx(pr,{present:n||s,children:i.jsx(F5,{"data-state":s?"visible":"hidden",...r,ref:t})})}),wre=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=gi(js,e.__scopeScrollArea),s=e.orientation==="horizontal",o=ob(()=>c("SCROLL_END"),100),[l,c]=xre("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),p.useEffect(()=>{const u=a.viewport,f=s?"scrollLeft":"scrollTop";if(u){let d=u[f];const h=()=>{const m=u[f];d!==m&&(c("SCROLL"),o()),d=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,s,c,o]),i.jsx(pr,{present:n||l!=="hidden",children:i.jsx(WN,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ee(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Ee(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),F5=p.forwardRef((e,t)=>{const n=gi(js,e.__scopeScrollArea),{forceMount:r,...a}=e,[s,o]=p.useState(!1),l=e.orientation==="horizontal",c=ob(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:f)}},10);return Nd(n.viewport,c),Nd(n.content,c),i.jsx(pr,{present:r||s,children:i.jsx(WN,{"data-state":s?"visible":"hidden",...a,ref:t})})}),WN=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=gi(js,e.__scopeScrollArea),s=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=W5(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function d(h,m){return Cre(h,o.current,l,m)}return n==="horizontal"?i.jsx(jre,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollLeft,m=AT(h,l,a.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=d(h,a.dir))}}):n==="vertical"?i.jsx(_re,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollTop,m=AT(h,l);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=d(h))}}):null}),jre=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,s=gi(js,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=St(t,c,s.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(U5,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":sb(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),V5(h,d)&&f.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:nx(o.paddingLeft),paddingEnd:nx(o.paddingRight)}})}})}),_re=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,s=gi(js,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=St(t,c,s.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(U5,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":sb(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),V5(h,d)&&f.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:nx(o.paddingTop),paddingEnd:nx(o.paddingBottom)}})}})}),[kre,B5]=M5(js),U5=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:d,...h}=e,m=gi(js,n),[g,v]=p.useState(null),x=St(t,N=>v(N)),y=p.useRef(null),b=p.useRef(""),w=m.viewport,j=r.content-r.viewport,k=Kn(f),_=Kn(c),S=ob(d,10);function A(N){if(y.current){const T=N.clientX-y.current.left,I=N.clientY-y.current.top;u({x:T,y:I})}}return p.useEffect(()=>{const N=T=>{const I=T.target;(g==null?void 0:g.contains(I))&&k(T,j)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[w,g,j,k]),p.useEffect(_,[r,_]),Nd(g,S),Nd(m.content,S),i.jsx(kre,{scope:n,scrollbar:g,hasThumb:a,onThumbChange:Kn(s),onThumbPointerUp:Kn(o),onThumbPositionChange:_,onThumbPointerDown:Kn(l),children:i.jsx(Ge.div,{...h,ref:x,style:{position:"absolute",...h.style},onPointerDown:Ee(e.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),y.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),A(N))}),onPointerMove:Ee(e.onPointerMove,A),onPointerUp:Ee(e.onPointerUp,N=>{const T=N.target;T.hasPointerCapture(N.pointerId)&&T.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=b.current,m.viewport&&(m.viewport.style.scrollBehavior=""),y.current=null})})})}),tx="ScrollAreaThumb",z5=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=B5(tx,e.__scopeScrollArea);return i.jsx(pr,{present:n||a.hasThumb,children:i.jsx(Sre,{ref:t,...r})})}),Sre=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,s=gi(tx,n),o=B5(tx,n),{onThumbPositionChange:l}=o,c=St(t,d=>o.onThumbChange(d)),u=p.useRef(void 0),f=ob(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const d=s.viewport;if(d){const h=()=>{if(f(),!u.current){const m=Are(d,l);u.current=m,l()}};return l(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,f,l]),i.jsx(Ge.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ee(e.onPointerDownCapture,d=>{const m=d.target.getBoundingClientRect(),g=d.clientX-m.left,v=d.clientY-m.top;o.onThumbPointerDown({x:g,y:v})}),onPointerUp:Ee(e.onPointerUp,o.onThumbPointerUp)})});z5.displayName=tx;var HN="ScrollAreaCorner",q5=p.forwardRef((e,t)=>{const n=gi(HN,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(Nre,{...e,ref:t}):null});q5.displayName=HN;var Nre=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=gi(HN,n),[s,o]=p.useState(0),[l,c]=p.useState(0),u=!!(s&&l);return Nd(a.scrollbarX,()=>{var d;const f=((d=a.scrollbarX)==null?void 0:d.offsetHeight)||0;a.onCornerHeightChange(f),c(f)}),Nd(a.scrollbarY,()=>{var d;const f=((d=a.scrollbarY)==null?void 0:d.offsetWidth)||0;a.onCornerWidthChange(f),o(f)}),u?i.jsx(Ge.div,{...r,ref:t,style:{width:s,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function nx(e){return e?parseInt(e,10):0}function W5(e,t){const n=e/t;return isNaN(n)?0:n}function sb(e){const t=W5(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Cre(e,t,n,r="ltr"){const a=sb(n),s=a/2,o=t||s,l=a-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,d=r==="ltr"?[0,f]:[f*-1,0];return H5([c,u],d)(e)}function AT(e,t,n="ltr"){const r=sb(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-a,o=t.content-t.viewport,l=s-r,c=n==="ltr"?[0,o]:[o*-1,0],u=r_(e,c);return H5([0,o],[0,l])(u)}function H5(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function V5(e,t){return e>0&&e<t}var Are=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,l=n.top!==s.top;(o||l)&&t(),n=s,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function ob(e,t){const n=Kn(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Nd(e,t){const n=Kn(t);Xn(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var K5=D5,Ere=L5,Pre=q5;const lb=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(K5,{ref:r,className:ye("relative overflow-hidden",e),...n,children:[i.jsx(Ere,{className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(G5,{}),i.jsx(Pre,{})]}));lb.displayName=K5.displayName;const G5=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(qN,{ref:r,orientation:t,className:ye("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(z5,{className:"relative flex-1 rounded-full bg-border"})}));G5.displayName=qN.displayName;function Xt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Wa(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ta(e,t){const n=Xt(e);return isNaN(t)?Wa(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Hi(e,t){const n=Xt(e);if(isNaN(t))return Wa(e,NaN);if(!t)return n;const r=n.getDate(),a=Wa(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const s=a.getDate();return r>=s?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}const VN=6048e5,Tre=864e5;let Ore={};function bp(){return Ore}function xs(e,t){var l,c,u,f;const n=bp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,a=Xt(e),s=a.getDay(),o=(s<r?7:0)+s-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Cc(e){return xs(e,{weekStartsOn:1})}function Y5(e){const t=Xt(e),n=t.getFullYear(),r=Wa(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Cc(r),s=Wa(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=Cc(s);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Ac(e){const t=Xt(e);return t.setHours(0,0,0,0),t}function rx(e){const t=Xt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function ss(e,t){const n=Ac(e),r=Ac(t),a=+n-rx(n),s=+r-rx(r);return Math.round((a-s)/Tre)}function Ire(e){const t=Y5(e),n=Wa(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Cc(n)}function a_(e,t){const n=t*7;return ta(e,n)}function Rre(e,t){return Hi(e,t*12)}function Mre(e){let t;return e.forEach(function(n){const r=Xt(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function Dre(e){let t;return e.forEach(n=>{const r=Xt(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function ba(e,t){const n=Ac(e),r=Ac(t);return+n==+r}function KN(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function $re(e){if(!KN(e)&&typeof e!="number")return!1;const t=Xt(e);return!isNaN(Number(t))}function fm(e,t){const n=Xt(e),r=Xt(t),a=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return a*12+s}function Lre(e,t,n){const r=xs(e,n),a=xs(t,n),s=+r-rx(r),o=+a-rx(a);return Math.round((s-o)/VN)}function Fre(e){const t=Xt(e);return t.setHours(23,59,59,999),t}function GN(e){const t=Xt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Na(e){const t=Xt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function X5(e){const t=Xt(e),n=Wa(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function YN(e,t){var l,c,u,f;const n=bp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,a=Xt(e),s=a.getDay(),o=(s<r?-7:0)+6-(s-r);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function J5(e){return YN(e,{weekStartsOn:1})}const Bre={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ure=(e,t,n)=>{let r;const a=Bre[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Cw(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const zre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Wre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hre={date:Cw({formats:zre,defaultWidth:"full"}),time:Cw({formats:qre,defaultWidth:"full"}),dateTime:Cw({formats:Wre,defaultWidth:"full"})},Vre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Kre=(e,t,n,r)=>Vre[e];function Lf(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const Gre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Xre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Jre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Qre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Zre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eae=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},tae={ordinalNumber:eae,era:Lf({values:Gre,defaultWidth:"wide"}),quarter:Lf({values:Yre,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Lf({values:Xre,defaultWidth:"wide"}),day:Lf({values:Jre,defaultWidth:"wide"}),dayPeriod:Lf({values:Qre,defaultWidth:"wide",formattingValues:Zre,defaultFormattingWidth:"wide"})};function Ff(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?rae(l,d=>d.test(o)):nae(l,d=>d.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const f=t.slice(o.length);return{value:u,rest:f}}}function nae(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function rae(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function aae(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const iae=/^(\d+)(th|st|nd|rd)?/i,sae=/\d+/i,oae={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lae={any:[/^b/i,/^(a|c)/i]},cae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},uae={any:[/1/i,/2/i,/3/i,/4/i]},dae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},hae={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},mae={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gae={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},vae={ordinalNumber:aae({matchPattern:iae,parsePattern:sae,valueCallback:e=>parseInt(e,10)}),era:Ff({matchPatterns:oae,defaultMatchWidth:"wide",parsePatterns:lae,defaultParseWidth:"any"}),quarter:Ff({matchPatterns:cae,defaultMatchWidth:"wide",parsePatterns:uae,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ff({matchPatterns:dae,defaultMatchWidth:"wide",parsePatterns:fae,defaultParseWidth:"any"}),day:Ff({matchPatterns:hae,defaultMatchWidth:"wide",parsePatterns:mae,defaultParseWidth:"any"}),dayPeriod:Ff({matchPatterns:pae,defaultMatchWidth:"any",parsePatterns:gae,defaultParseWidth:"any"})},Q5={code:"en-US",formatDistance:Ure,formatLong:Hre,formatRelative:Kre,localize:tae,match:vae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function xae(e){const t=Xt(e);return ss(t,X5(t))+1}function Z5(e){const t=Xt(e),n=+Cc(t)-+Ire(t);return Math.round(n/VN)+1}function eB(e,t){var f,d,h,m;const n=Xt(e),r=n.getFullYear(),a=bp(),s=(t==null?void 0:t.firstWeekContainsDate)??((d=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=Wa(e,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const l=xs(o,t),c=Wa(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=xs(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function yae(e,t){var l,c,u,f;const n=bp(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,a=eB(e,t),s=Wa(e,0);return s.setFullYear(a,0,r),s.setHours(0,0,0,0),xs(s,t)}function tB(e,t){const n=Xt(e),r=+xs(n,t)-+yae(n,t);return Math.round(r/VN)+1}function hn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Po={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return hn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):hn(n+1,2)},d(e,t){return hn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return hn(e.getHours()%12||12,t.length)},H(e,t){return hn(e.getHours(),t.length)},m(e,t){return hn(e.getMinutes(),t.length)},s(e,t){return hn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return hn(a,t.length)}},hu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ET={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Po.y(e,t)},Y:function(e,t,n,r){const a=eB(e,r),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return hn(o,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):hn(s,t.length)},R:function(e,t){const n=Y5(e);return hn(n,t.length)},u:function(e,t){const n=e.getFullYear();return hn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return hn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return hn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Po.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return hn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=tB(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):hn(a,t.length)},I:function(e,t,n){const r=Z5(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):hn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Po.d(e,t)},D:function(e,t,n){const r=xae(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):hn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return hn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return hn(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return hn(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=hu.noon:r===0?a=hu.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=hu.evening:r>=12?a=hu.afternoon:r>=4?a=hu.morning:a=hu.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Po.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Po.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):hn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):hn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Po.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Po.s(e,t)},S:function(e,t){return Po.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return TT(r);case"XXXX":case"XX":return Gl(r);case"XXXXX":case"XXX":default:return Gl(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return TT(r);case"xxxx":case"xx":return Gl(r);case"xxxxx":case"xxx":default:return Gl(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+PT(r,":");case"OOOO":default:return"GMT"+Gl(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+PT(r,":");case"zzzz":default:return"GMT"+Gl(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return hn(r,t.length)},T:function(e,t,n){const r=e.getTime();return hn(r,t.length)}};function PT(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return s===0?n+String(a):n+String(a)+t+hn(s,2)}function TT(e,t){return e%60===0?(e>0?"-":"+")+hn(Math.abs(e)/60,2):Gl(e,t)}function Gl(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=hn(Math.trunc(r/60),2),s=hn(r%60,2);return n+a+t+s}const OT=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},nB=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},bae=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return OT(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",OT(r,t)).replace("{{time}}",nB(a,t))},wae={p:nB,P:bae},jae=/^D+$/,_ae=/^Y+$/,kae=["D","DD","YY","YYYY"];function Sae(e){return jae.test(e)}function Nae(e){return _ae.test(e)}function Cae(e,t,n){const r=Aae(e,t,n);if(console.warn(r),kae.includes(e))throw new RangeError(r)}function Aae(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Eae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Pae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Tae=/^'([^]*?)'?$/,Oae=/''/g,Iae=/[a-zA-Z]/;function oo(e,t,n){var f,d,h,m,g,v,x,y;const r=bp(),a=(n==null?void 0:n.locale)??r.locale??Q5,s=(n==null?void 0:n.firstWeekContainsDate)??((d=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((v=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((y=(x=r.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??0,l=Xt(e);if(!$re(l))throw new RangeError("Invalid time value");let c=t.match(Pae).map(b=>{const w=b[0];if(w==="p"||w==="P"){const j=wae[w];return j(b,a.formatLong)}return b}).join("").match(Eae).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const w=b[0];if(w==="'")return{isToken:!1,value:Rae(b)};if(ET[w])return{isToken:!0,value:b};if(w.match(Iae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:b}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(b=>{if(!b.isToken)return b.value;const w=b.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Nae(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Sae(w))&&Cae(w,t,String(e));const j=ET[w[0]];return j(l,w,a.localize,u)}).join("")}function Rae(e){const t=e.match(Tae);return t?t[1].replace(Oae,"'"):e}function Mae(e){const t=Xt(e),n=t.getFullYear(),r=t.getMonth(),a=Wa(e,0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function Dae(e){return Math.trunc(+Xt(e)/1e3)}function $ae(e){const t=Xt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function Lae(e,t){return Lre($ae(e),Na(e),t)+1}function i_(e,t){const n=Xt(e),r=Xt(t);return n.getTime()>r.getTime()}function rB(e,t){const n=Xt(e),r=Xt(t);return+n<+r}function XN(e,t){const n=Xt(e),r=Xt(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Fae(e,t){const n=Xt(e),r=Xt(t);return n.getFullYear()===r.getFullYear()}function Aw(e,t){return ta(e,-t)}function Ew(e,t){const n=Xt(e),r=n.getFullYear(),a=n.getDate(),s=Wa(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const o=Mae(s);return n.setMonth(t,Math.min(a,o)),n}function IT(e,t){const n=Xt(e);return isNaN(+n)?Wa(e,NaN):(n.setFullYear(t),n)}var kt=function(){return kt=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},kt.apply(this,arguments)};function Bae(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function aB(e,t,n){for(var r=0,a=t.length,s;r<a;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function wp(e){return e.mode==="multiple"}function jp(e){return e.mode==="range"}function cb(e){return e.mode==="single"}var Uae={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function zae(e,t){return oo(e,"LLLL y",t)}function qae(e,t){return oo(e,"d",t)}function Wae(e,t){return oo(e,"LLLL",t)}function Hae(e){return"".concat(e)}function Vae(e,t){return oo(e,"cccccc",t)}function Kae(e,t){return oo(e,"yyyy",t)}var Gae=Object.freeze({__proto__:null,formatCaption:zae,formatDay:qae,formatMonthCaption:Wae,formatWeekNumber:Hae,formatWeekdayName:Vae,formatYearCaption:Kae}),Yae=function(e,t,n){return oo(e,"do MMMM (EEEE)",n)},Xae=function(){return"Month: "},Jae=function(){return"Go to next month"},Qae=function(){return"Go to previous month"},Zae=function(e,t){return oo(e,"cccc",t)},eie=function(e){return"Week n. ".concat(e)},tie=function(){return"Year: "},nie=Object.freeze({__proto__:null,labelDay:Yae,labelMonthDropdown:Xae,labelNext:Jae,labelPrevious:Qae,labelWeekNumber:eie,labelWeekday:Zae,labelYearDropdown:tie});function rie(){var e="buttons",t=Uae,n=Q5,r={},a={},s=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:Gae,labels:nie,locale:n,modifiersClassNames:r,modifiers:a,numberOfMonths:s,styles:o,today:l,mode:"default"}}function aie(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,a=e.toMonth,s=e.fromDate,o=e.toDate;return r?s=Na(r):t&&(s=new Date(t,0,1)),a?o=GN(a):n&&(o=new Date(n,11,31)),{fromDate:s?Ac(s):void 0,toDate:o?Ac(o):void 0}}var iB=p.createContext(void 0);function iie(e){var t,n=e.initialProps,r=rie(),a=aie(n),s=a.fromDate,o=a.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!s||!o)&&(l="buttons");var c;(cb(n)||wp(n)||jp(n))&&(c=n.onSelect);var u=kt(kt(kt({},r),n),{captionLayout:l,classNames:kt(kt({},r.classNames),n.classNames),components:kt({},n.components),formatters:kt(kt({},r.formatters),n.formatters),fromDate:s,labels:kt(kt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:kt(kt({},r.modifiers),n.modifiers),modifiersClassNames:kt(kt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:kt(kt({},r.styles),n.styles),toDate:o});return i.jsx(iB.Provider,{value:u,children:e.children})}function Nn(){var e=p.useContext(iB);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function sB(e){var t=Nn(),n=t.locale,r=t.classNames,a=t.styles,s=t.formatters.formatCaption;return i.jsx("div",{className:r.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function sie(e){return i.jsx("svg",kt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function oB(e){var t,n,r=e.onChange,a=e.value,s=e.children,o=e.caption,l=e.className,c=e.style,u=Nn(),f=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:sie;return i.jsxs("div",{className:l,style:c,children:[i.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),i.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:r,children:s}),i.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(f,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function oie(e){var t,n=Nn(),r=n.fromDate,a=n.toDate,s=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,f=n.labels.labelMonthDropdown;if(!r)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});var d=[];if(Fae(r,a))for(var h=Na(r),m=r.getMonth();m<=a.getMonth();m++)d.push(Ew(h,m));else for(var h=Na(new Date),m=0;m<=11;m++)d.push(Ew(h,m));var g=function(x){var y=Number(x.target.value),b=Ew(Na(e.displayMonth),y);e.onChange(b)},v=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:oB;return i.jsx(v,{name:"months","aria-label":f(),className:c.dropdown_month,style:s.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:d.map(function(x){return i.jsx("option",{value:x.getMonth(),children:l(x,{locale:o})},x.getMonth())})})}function lie(e){var t,n=e.displayMonth,r=Nn(),a=r.fromDate,s=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,f=r.formatters.formatYearCaption,d=r.labels.labelYearDropdown,h=[];if(!a)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});for(var m=a.getFullYear(),g=s.getFullYear(),v=m;v<=g;v++)h.push(IT(X5(new Date),v));var x=function(b){var w=IT(Na(n),Number(b.target.value));e.onChange(w)},y=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:oB;return i.jsx(y,{name:"years","aria-label":d(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:n.getFullYear(),caption:f(n,{locale:o}),children:h.map(function(b){return i.jsx("option",{value:b.getFullYear(),children:f(b,{locale:o})},b.getFullYear())})})}function cie(e,t){var n=p.useState(e),r=n[0],a=n[1],s=t===void 0?r:t;return[s,a]}function uie(e){var t=e.month,n=e.defaultMonth,r=e.today,a=t||n||r||new Date,s=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&fm(s,a)<0){var u=-1*(c-1);a=Hi(s,u)}return o&&fm(a,o)<0&&(a=o),Na(a)}function die(){var e=Nn(),t=uie(e),n=cie(t,e.month),r=n[0],a=n[1],s=function(o){var l;if(!e.disableNavigation){var c=Na(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,s]}function fie(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,a=Na(e),s=Na(Hi(a,r)),o=fm(s,a),l=[],c=0;c<o;c++){var u=Hi(a,c);l.push(u)}return n&&(l=l.reverse()),l}function hie(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=r?s:1,l=Na(e);if(!n)return Hi(l,o);var c=fm(n,e);if(!(c<s))return Hi(l,o)}}function mie(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=r?s:1,l=Na(e);if(!n)return Hi(l,-o);var c=fm(l,n);if(!(c<=0))return Hi(l,-o)}}var lB=p.createContext(void 0);function pie(e){var t=Nn(),n=die(),r=n[0],a=n[1],s=fie(r,t),o=hie(r,t),l=mie(r,t),c=function(d){return s.some(function(h){return XN(d,h)})},u=function(d,h){c(d)||(h&&rB(d,h)?a(Hi(d,1+t.numberOfMonths*-1)):a(d))},f={currentMonth:r,displayMonths:s,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return i.jsx(lB.Provider,{value:f,children:e.children})}function _p(){var e=p.useContext(lB);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function RT(e){var t,n=Nn(),r=n.classNames,a=n.styles,s=n.components,o=_p().goToMonth,l=function(f){o(Hi(f,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:sB,u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth});return i.jsxs("div",{className:r.caption_dropdowns,style:a.caption_dropdowns,children:[i.jsx("div",{className:r.vhidden,children:u}),i.jsx(oie,{onChange:l,displayMonth:e.displayMonth}),i.jsx(lie,{onChange:l,displayMonth:e.displayMonth})]})}function gie(e){return i.jsx("svg",kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function vie(e){return i.jsx("svg",kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var ax=p.forwardRef(function(e,t){var n=Nn(),r=n.classNames,a=n.styles,s=[r.button_reset,r.button];e.className&&s.push(e.className);var o=s.join(" "),l=kt(kt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),i.jsx("button",kt({},e,{ref:t,type:"button",className:o,style:l}))});function xie(e){var t,n,r=Nn(),a=r.dir,s=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,f=c.labelNext,d=r.components;if(!e.nextMonth&&!e.previousMonth)return i.jsx(i.Fragment,{});var h=u(e.previousMonth,{locale:s}),m=[o.nav_button,o.nav_button_previous].join(" "),g=f(e.nextMonth,{locale:s}),v=[o.nav_button,o.nav_button_next].join(" "),x=(t=d==null?void 0:d.IconRight)!==null&&t!==void 0?t:vie,y=(n=d==null?void 0:d.IconLeft)!==null&&n!==void 0?n:gie;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&i.jsx(ax,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?i.jsx(x,{className:o.nav_icon,style:l.nav_icon}):i.jsx(y,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&i.jsx(ax,{name:"next-month","aria-label":g,className:v,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?i.jsx(y,{className:o.nav_icon,style:l.nav_icon}):i.jsx(x,{className:o.nav_icon,style:l.nav_icon})})]})}function MT(e){var t=Nn().numberOfMonths,n=_p(),r=n.previousMonth,a=n.nextMonth,s=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(g){return XN(e.displayMonth,g)}),c=l===0,u=l===o.length-1,f=t>1&&(c||!u),d=t>1&&(u||!c),h=function(){r&&s(r)},m=function(){a&&s(a)};return i.jsx(xie,{displayMonth:e.displayMonth,hideNext:f,hidePrevious:d,nextMonth:a,previousMonth:r,onPreviousClick:h,onNextClick:m})}function yie(e){var t,n=Nn(),r=n.classNames,a=n.disableNavigation,s=n.styles,o=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:sB,u;return a?u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=i.jsx(RT,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=i.jsxs(i.Fragment,{children:[i.jsx(RT,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),i.jsx(MT,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=i.jsxs(i.Fragment,{children:[i.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(MT,{displayMonth:e.displayMonth,id:e.id})]}),i.jsx("div",{className:r.caption,style:s.caption,children:u})}function bie(e){var t=Nn(),n=t.footer,r=t.styles,a=t.classNames.tfoot;return n?i.jsx("tfoot",{className:a,style:r.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:n})})}):i.jsx(i.Fragment,{})}function wie(e,t,n){for(var r=n?Cc(new Date):xs(new Date,{locale:e,weekStartsOn:t}),a=[],s=0;s<7;s++){var o=ta(r,s);a.push(o)}return a}function jie(){var e=Nn(),t=e.classNames,n=e.styles,r=e.showWeekNumber,a=e.locale,s=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=wie(a,s,o);return i.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&i.jsx("td",{style:n.head_cell,className:t.head_cell}),u.map(function(f,d){return i.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(f,{locale:a}),children:l(f,{locale:a})},d)})]})}function _ie(){var e,t=Nn(),n=t.classNames,r=t.styles,a=t.components,s=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:jie;return i.jsx("thead",{style:r.head,className:n.head,children:i.jsx(s,{})})}function kie(e){var t=Nn(),n=t.locale,r=t.formatters.formatDay;return i.jsx(i.Fragment,{children:r(e.date,{locale:n})})}var JN=p.createContext(void 0);function Sie(e){if(!wp(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return i.jsx(JN.Provider,{value:t,children:e.children})}return i.jsx(Nie,{initialProps:e.initialProps,children:e.children})}function Nie(e){var t=e.initialProps,n=e.children,r=t.selected,a=t.min,s=t.max,o=function(u,f,d){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,f,d);var g=!!(f.selected&&a&&(r==null?void 0:r.length)===a);if(!g){var v=!!(!f.selected&&s&&(r==null?void 0:r.length)===s);if(!v){var x=r?aB([],r):[];if(f.selected){var y=x.findIndex(function(b){return ba(u,b)});x.splice(y,1)}else x.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,x,u,f,d)}}},l={disabled:[]};r&&l.disabled.push(function(u){var f=s&&r.length>s-1,d=r.some(function(h){return ba(h,u)});return!!(f&&!d)});var c={selected:r,onDayClick:o,modifiers:l};return i.jsx(JN.Provider,{value:c,children:n})}function QN(){var e=p.useContext(JN);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Cie(e,t){var n=t||{},r=n.from,a=n.to;return r&&a?ba(a,e)&&ba(r,e)?void 0:ba(a,e)?{from:a,to:void 0}:ba(r,e)?void 0:i_(r,e)?{from:e,to:a}:{from:r,to:e}:a?i_(e,a)?{from:a,to:e}:{from:e,to:a}:r?rB(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var ZN=p.createContext(void 0);function Aie(e){if(!jp(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(ZN.Provider,{value:t,children:e.children})}return i.jsx(Eie,{initialProps:e.initialProps,children:e.children})}function Eie(e){var t=e.initialProps,n=e.children,r=t.selected,a=r||{},s=a.from,o=a.to,l=t.min,c=t.max,u=function(m,g,v){var x,y;(x=t.onDayClick)===null||x===void 0||x.call(t,m,g,v);var b=Cie(m,r);(y=t.onSelect)===null||y===void 0||y.call(t,b,m,g,v)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(f.range_start=[s],o?(f.range_end=[o],ba(s,o)||(f.range_middle=[{after:s,before:o}])):f.range_end=[s]):o&&(f.range_start=[o],f.range_end=[o]),l&&(s&&!o&&f.disabled.push({after:Aw(s,l-1),before:ta(s,l-1)}),s&&o&&f.disabled.push({after:s,before:ta(s,l-1)}),!s&&o&&f.disabled.push({after:Aw(o,l-1),before:ta(o,l-1)})),c){if(s&&!o&&(f.disabled.push({before:ta(s,-c+1)}),f.disabled.push({after:ta(s,c-1)})),s&&o){var d=ss(o,s)+1,h=c-d;f.disabled.push({before:Aw(s,h)}),f.disabled.push({after:ta(o,h)})}!s&&o&&(f.disabled.push({before:ta(o,-c+1)}),f.disabled.push({after:ta(o,c-1)}))}return i.jsx(ZN.Provider,{value:{selected:r,onDayClick:u,modifiers:f},children:n})}function eC(){var e=p.useContext(ZN);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function hv(e){return Array.isArray(e)?aB([],e):e!==void 0?[e]:[]}function Pie(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],a=n[1];t[r]=hv(a)}),t}var Vi;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Vi||(Vi={}));var Tie=Vi.Selected,As=Vi.Disabled,Oie=Vi.Hidden,Iie=Vi.Today,Pw=Vi.RangeEnd,Tw=Vi.RangeMiddle,Ow=Vi.RangeStart,Rie=Vi.Outside;function Mie(e,t,n){var r,a=(r={},r[Tie]=hv(e.selected),r[As]=hv(e.disabled),r[Oie]=hv(e.hidden),r[Iie]=[e.today],r[Pw]=[],r[Tw]=[],r[Ow]=[],r[Rie]=[],r);return e.fromDate&&a[As].push({before:e.fromDate}),e.toDate&&a[As].push({after:e.toDate}),wp(e)?a[As]=a[As].concat(t.modifiers[As]):jp(e)&&(a[As]=a[As].concat(n.modifiers[As]),a[Ow]=n.modifiers[Ow],a[Tw]=n.modifiers[Tw],a[Pw]=n.modifiers[Pw]),a}var cB=p.createContext(void 0);function Die(e){var t=Nn(),n=QN(),r=eC(),a=Mie(t,n,r),s=Pie(t.modifiers),o=kt(kt({},a),s);return i.jsx(cB.Provider,{value:o,children:e.children})}function uB(){var e=p.useContext(cB);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function $ie(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Lie(e){return!!(e&&typeof e=="object"&&"from"in e)}function Fie(e){return!!(e&&typeof e=="object"&&"after"in e)}function Bie(e){return!!(e&&typeof e=="object"&&"before"in e)}function Uie(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function zie(e,t){var n,r=t.from,a=t.to;if(r&&a){var s=ss(a,r)<0;s&&(n=[a,r],r=n[0],a=n[1]);var o=ss(e,r)>=0&&ss(a,e)>=0;return o}return a?ba(a,e):r?ba(r,e):!1}function qie(e){return KN(e)}function Wie(e){return Array.isArray(e)&&e.every(KN)}function Hie(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(qie(n))return ba(e,n);if(Wie(n))return n.includes(e);if(Lie(n))return zie(e,n);if(Uie(n))return n.dayOfWeek.includes(e.getDay());if($ie(n)){var r=ss(n.before,e),a=ss(n.after,e),s=r>0,o=a<0,l=i_(n.before,n.after);return l?o&&s:s||o}return Fie(n)?ss(e,n.after)>0:Bie(n)?ss(n.before,e)>0:typeof n=="function"?n(e):!1})}function tC(e,t,n){var r=Object.keys(t).reduce(function(s,o){var l=t[o];return Hie(e,l)&&s.push(o),s},[]),a={};return r.forEach(function(s){return a[s]=!0}),n&&!XN(e,n)&&(a.outside=!0),a}function Vie(e,t){for(var n=Na(e[0]),r=GN(e[e.length-1]),a,s,o=n;o<=r;){var l=tC(o,t),c=!l.disabled&&!l.hidden;if(!c){o=ta(o,1);continue}if(l.selected)return o;l.today&&!s&&(s=o),a||(a=o),o=ta(o,1)}return s||a}var Kie=365;function dB(e,t){var n=t.moveBy,r=t.direction,a=t.context,s=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,f=a.toDate,d=a.locale,h={day:ta,week:a_,month:Hi,year:Rre,startOfWeek:function(x){return a.ISOWeek?Cc(x):xs(x,{locale:d,weekStartsOn:c})},endOfWeek:function(x){return a.ISOWeek?J5(x):YN(x,{locale:d,weekStartsOn:c})}},m=h[n](e,r==="after"?1:-1);r==="before"&&u?m=Mre([u,m]):r==="after"&&f&&(m=Dre([f,m]));var g=!0;if(s){var v=tC(m,s);g=!v.disabled&&!v.hidden}return g?m:l.count>Kie?l.lastFocused:dB(m,{moveBy:n,direction:r,context:a,modifiers:s,retry:kt(kt({},l),{count:l.count+1})})}var fB=p.createContext(void 0);function Gie(e){var t=_p(),n=uB(),r=p.useState(),a=r[0],s=r[1],o=p.useState(),l=o[0],c=o[1],u=Vie(t.displayMonths,n),f=a??(l&&t.isDateDisplayed(l))?l:u,d=function(){c(a),s(void 0)},h=function(x){s(x)},m=Nn(),g=function(x,y){if(a){var b=dB(a,{moveBy:x,direction:y,context:m,modifiers:n});ba(a,b)||(t.goToDate(b,a),h(b))}},v={focusedDay:a,focusTarget:f,blur:d,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return i.jsx(fB.Provider,{value:v,children:e.children})}function nC(){var e=p.useContext(fB);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Yie(e,t){var n=uB(),r=tC(e,n,t);return r}var rC=p.createContext(void 0);function Xie(e){if(!cb(e.initialProps)){var t={selected:void 0};return i.jsx(rC.Provider,{value:t,children:e.children})}return i.jsx(Jie,{initialProps:e.initialProps,children:e.children})}function Jie(e){var t=e.initialProps,n=e.children,r=function(s,o,l){var c,u,f;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,s,o,l);return}(f=t.onSelect)===null||f===void 0||f.call(t,s,s,o,l)},a={selected:t.selected,onDayClick:r};return i.jsx(rC.Provider,{value:a,children:n})}function hB(){var e=p.useContext(rC);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function Qie(e,t){var n=Nn(),r=hB(),a=QN(),s=eC(),o=nC(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,f=o.focusWeekBefore,d=o.blur,h=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,v=o.focusYearBefore,x=o.focusYearAfter,y=o.focusStartOfWeek,b=o.focusEndOfWeek,w=function(R){var L,$,C,U;cb(n)?(L=r.onDayClick)===null||L===void 0||L.call(r,e,t,R):wp(n)?($=a.onDayClick)===null||$===void 0||$.call(a,e,t,R):jp(n)?(C=s.onDayClick)===null||C===void 0||C.call(s,e,t,R):(U=n.onDayClick)===null||U===void 0||U.call(n,e,t,R)},j=function(R){var L;h(e),(L=n.onDayFocus)===null||L===void 0||L.call(n,e,t,R)},k=function(R){var L;d(),(L=n.onDayBlur)===null||L===void 0||L.call(n,e,t,R)},_=function(R){var L;(L=n.onDayMouseEnter)===null||L===void 0||L.call(n,e,t,R)},S=function(R){var L;(L=n.onDayMouseLeave)===null||L===void 0||L.call(n,e,t,R)},A=function(R){var L;(L=n.onDayPointerEnter)===null||L===void 0||L.call(n,e,t,R)},N=function(R){var L;(L=n.onDayPointerLeave)===null||L===void 0||L.call(n,e,t,R)},T=function(R){var L;(L=n.onDayTouchCancel)===null||L===void 0||L.call(n,e,t,R)},I=function(R){var L;(L=n.onDayTouchEnd)===null||L===void 0||L.call(n,e,t,R)},F=function(R){var L;(L=n.onDayTouchMove)===null||L===void 0||L.call(n,e,t,R)},E=function(R){var L;(L=n.onDayTouchStart)===null||L===void 0||L.call(n,e,t,R)},O=function(R){var L;(L=n.onDayKeyUp)===null||L===void 0||L.call(n,e,t,R)},M=function(R){var L;switch(R.key){case"ArrowLeft":R.preventDefault(),R.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":R.preventDefault(),R.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":R.preventDefault(),R.stopPropagation(),u();break;case"ArrowUp":R.preventDefault(),R.stopPropagation(),f();break;case"PageUp":R.preventDefault(),R.stopPropagation(),R.shiftKey?v():m();break;case"PageDown":R.preventDefault(),R.stopPropagation(),R.shiftKey?x():g();break;case"Home":R.preventDefault(),R.stopPropagation(),y();break;case"End":R.preventDefault(),R.stopPropagation(),b();break}(L=n.onDayKeyDown)===null||L===void 0||L.call(n,e,t,R)},B={onClick:w,onFocus:j,onBlur:k,onKeyDown:M,onKeyUp:O,onMouseEnter:_,onMouseLeave:S,onPointerEnter:A,onPointerLeave:N,onTouchCancel:T,onTouchEnd:I,onTouchMove:F,onTouchStart:E};return B}function Zie(){var e=Nn(),t=hB(),n=QN(),r=eC(),a=cb(e)?t.selected:wp(e)?n.selected:jp(e)?r.selected:void 0;return a}function ese(e){return Object.values(Vi).includes(e)}function tse(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var a=e.modifiersClassNames[r];if(a)n.push(a);else if(ese(r)){var s=e.classNames["day_".concat(r)];s&&n.push(s)}}),n}function nse(e,t){var n=kt({},e.styles.day);return Object.keys(t).forEach(function(r){var a;n=kt(kt({},n),(a=e.modifiersStyles)===null||a===void 0?void 0:a[r])}),n}function rse(e,t,n){var r,a,s,o=Nn(),l=nC(),c=Yie(e,t),u=Qie(e,c),f=Zie(),d=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var _;c.outside||l.focusedDay&&d&&ba(l.focusedDay,e)&&((_=n.current)===null||_===void 0||_.focus())},[l.focusedDay,e,n,d,c.outside]);var h=tse(o,c).join(" "),m=nse(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),v=(s=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&s!==void 0?s:kie,x=i.jsx(v,{date:e,displayMonth:t,activeModifiers:c}),y={style:m,className:h,children:x,role:"gridcell"},b=l.focusTarget&&ba(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&ba(l.focusedDay,e),j=kt(kt(kt({},y),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=w||b?0:-1,r)),u),k={isButton:d,isHidden:g,activeModifiers:c,selectedDays:f,buttonProps:j,divProps:y};return k}function ase(e){var t=p.useRef(null),n=rse(e.date,e.displayMonth,t);return n.isHidden?i.jsx("div",{role:"gridcell"}):n.isButton?i.jsx(ax,kt({name:"day",ref:t},n.buttonProps)):i.jsx("div",kt({},n.divProps))}function ise(e){var t=e.number,n=e.dates,r=Nn(),a=r.onWeekNumberClick,s=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,f=u(Number(t),{locale:l});if(!a)return i.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:f});var d=c(Number(t),{locale:l}),h=function(m){a(t,n,m)};return i.jsx(ax,{name:"week-number","aria-label":d,className:o.weeknumber,style:s.weeknumber,onClick:h,children:f})}function sse(e){var t,n,r=Nn(),a=r.styles,s=r.classNames,o=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:ase,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:ise,f;return o&&(f=i.jsx("td",{className:s.cell,style:a.cell,children:i.jsx(u,{number:e.weekNumber,dates:e.dates})})),i.jsxs("tr",{className:s.row,style:a.row,children:[f,e.dates.map(function(d){return i.jsx("td",{className:s.cell,style:a.cell,role:"presentation",children:i.jsx(c,{displayMonth:e.displayMonth,date:d})},Dae(d))})]})}function DT(e,t,n){for(var r=n!=null&&n.ISOWeek?J5(t):YN(t,n),a=n!=null&&n.ISOWeek?Cc(e):xs(e,n),s=ss(r,a),o=[],l=0;l<=s;l++)o.push(ta(a,l));var c=o.reduce(function(u,f){var d=n!=null&&n.ISOWeek?Z5(f):tB(f,n),h=u.find(function(m){return m.weekNumber===d});return h?(h.dates.push(f),u):(u.push({weekNumber:d,dates:[f]}),u)},[]);return c}function ose(e,t){var n=DT(Na(e),GN(e),t);if(t!=null&&t.useFixedWeeks){var r=Lae(e,t);if(r<6){var a=n[n.length-1],s=a.dates[a.dates.length-1],o=a_(s,6-r),l=DT(a_(s,1),o,t);n.push.apply(n,l)}}return n}function lse(e){var t,n,r,a=Nn(),s=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,f=a.components,d=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,g=ose(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:s,weekStartsOn:d,firstWeekContainsDate:h}),v=(t=f==null?void 0:f.Head)!==null&&t!==void 0?t:_ie,x=(n=f==null?void 0:f.Row)!==null&&n!==void 0?n:sse,y=(r=f==null?void 0:f.Footer)!==null&&r!==void 0?r:bie;return i.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&i.jsx(v,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(b){return i.jsx(x,{displayMonth:e.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),i.jsx(y,{displayMonth:e.displayMonth})]})}function cse(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var use=cse()?p.useLayoutEffect:p.useEffect,Iw=!1,dse=0;function $T(){return"react-day-picker-".concat(++dse)}function fse(e){var t,n=e??(Iw?$T():null),r=p.useState(n),a=r[0],s=r[1];return use(function(){a===null&&s($T())},[]),p.useEffect(function(){Iw===!1&&(Iw=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function hse(e){var t,n,r=Nn(),a=r.dir,s=r.classNames,o=r.styles,l=r.components,c=_p().displayMonths,u=fse(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,d=[s.month],h=o.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,v=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(d.push(s.caption_start),h=kt(kt({},h),o.caption_start)),g&&(d.push(s.caption_end),h=kt(kt({},h),o.caption_end)),v&&(d.push(s.caption_between),h=kt(kt({},h),o.caption_between));var x=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:yie;return i.jsxs("div",{className:d.join(" "),style:h,children:[i.jsx(x,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(lse,{id:f,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function mse(e){var t=Nn(),n=t.classNames,r=t.styles;return i.jsx("div",{className:n.months,style:r.months,children:e.children})}function pse(e){var t,n,r=e.initialProps,a=Nn(),s=nC(),o=_p(),l=p.useState(!1),c=l[0],u=l[1];p.useEffect(function(){a.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[a.initialFocus,c,s.focus,s.focusTarget,s]);var f=[a.classNames.root,a.className];a.numberOfMonths>1&&f.push(a.classNames.multiple_months),a.showWeekNumber&&f.push(a.classNames.with_weeknumber);var d=kt(kt({},a.styles.root),a.style),h=Object.keys(r).filter(function(g){return g.startsWith("data-")}).reduce(function(g,v){var x;return kt(kt({},g),(x={},x[v]=r[v],x))},{}),m=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:mse;return i.jsx("div",kt({className:f.join(" "),style:d,dir:a.dir,id:a.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:i.jsx(m,{children:o.displayMonths.map(function(g,v){return i.jsx(hse,{displayIndex:v,displayMonth:g},v)})})}))}function gse(e){var t=e.children,n=Bae(e,["children"]);return i.jsx(iie,{initialProps:n,children:i.jsx(pie,{children:i.jsx(Xie,{initialProps:n,children:i.jsx(Sie,{initialProps:n,children:i.jsx(Aie,{initialProps:n,children:i.jsx(Die,{children:i.jsx(Gie,{children:t})})})})})})})}function vse(e){return i.jsx(gse,kt({},e,{children:i.jsx(pse,{initialProps:e})}))}function s_({className:e,classNames:t,showOutsideDays:n=!0,...r}){return i.jsx(vse,{showOutsideDays:n,className:ye("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ye(kd({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ye(kd({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>i.jsx(JS,{className:"h-4 w-4"}),IconRight:({...a})=>i.jsx(Ay,{className:"h-4 w-4"})},...r})}s_.displayName="Calendar";var ub="Popover",[mB,m3e]=_r(ub,[jl]),kp=jl(),[xse,Nl]=mB(ub),pB=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:s,modal:o=!1}=e,l=kp(t),c=p.useRef(null),[u,f]=p.useState(!1),[d,h]=Ca({prop:r,defaultProp:a??!1,onChange:s,caller:ub});return i.jsx(Iy,{...l,children:i.jsx(xse,{scope:t,contentId:ir(),triggerRef:c,open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>f(!0),[]),onCustomAnchorRemove:p.useCallback(()=>f(!1),[]),modal:o,children:n})})};pB.displayName=ub;var gB="PopoverAnchor",yse=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Nl(gB,n),s=kp(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return p.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(dp,{...s,...r,ref:t})});yse.displayName=gB;var vB="PopoverTrigger",xB=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Nl(vB,n),s=kp(n),o=St(t,a.triggerRef),l=i.jsx(Ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":_B(a.open),...r,ref:o,onClick:Ee(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:i.jsx(dp,{asChild:!0,...s,children:l})});xB.displayName=vB;var aC="PopoverPortal",[bse,wse]=mB(aC,{forceMount:void 0}),yB=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,s=Nl(aC,t);return i.jsx(bse,{scope:t,forceMount:n,children:i.jsx(pr,{present:n||s.open,children:i.jsx(Zd,{asChild:!0,container:a,children:r})})})};yB.displayName=aC;var Cd="PopoverContent",bB=p.forwardRef((e,t)=>{const n=wse(Cd,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,s=Nl(Cd,e.__scopePopover);return i.jsx(pr,{present:r||s.open,children:s.modal?i.jsx(_se,{...a,ref:t}):i.jsx(kse,{...a,ref:t})})});bB.displayName=Cd;var jse=fl("PopoverContent.RemoveScroll"),_se=p.forwardRef((e,t)=>{const n=Nl(Cd,e.__scopePopover),r=p.useRef(null),a=St(t,r),s=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return Qy(o)},[]),i.jsx(vp,{as:jse,allowPinchZoom:!0,children:i.jsx(wB,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ee(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),s.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Ee(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Ee(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),kse=p.forwardRef((e,t)=>{const n=Nl(Cd,e.__scopePopover),r=p.useRef(!1),a=p.useRef(!1);return i.jsx(wB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),wB=p.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:f,...d}=e,h=Nl(Cd,n),m=kp(n);return Jy(),i.jsx(gp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(Kc,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:i.jsx(Ry,{"data-state":_B(h.open),role:"dialog",id:h.contentId,...m,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),jB="PopoverClose",Sse=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Nl(jB,n);return i.jsx(Ge.button,{type:"button",...r,ref:t,onClick:Ee(e.onClick,()=>a.onOpenChange(!1))})});Sse.displayName=jB;var Nse="PopoverArrow",Cse=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=kp(n);return i.jsx(My,{...a,...r,ref:t})});Cse.displayName=Nse;function _B(e){return e?"open":"closed"}var Ase=pB,Ese=xB,Pse=yB,kB=bB;const os=Ase,ls=Ese,Mi=p.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},a)=>i.jsx(Pse,{children:i.jsx(kB,{ref:a,align:t,sideOffset:n,className:ye("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Mi.displayName=kB.displayName;function iC(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Tse=[" ","Enter","ArrowUp","ArrowDown"],Ose=[" ","Enter"],Ec="Select",[db,fb,Ise]=ip(Ec),[lf,p3e]=_r(Ec,[Ise,jl]),hb=jl(),[Rse,Cl]=lf(Ec),[Mse,Dse]=lf(Ec),SB=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:d,disabled:h,required:m,form:g}=e,v=hb(t),[x,y]=p.useState(null),[b,w]=p.useState(null),[j,k]=p.useState(!1),_=of(u),[S,A]=Ca({prop:r,defaultProp:a??!1,onChange:s,caller:Ec}),[N,T]=Ca({prop:o,defaultProp:l,onChange:c,caller:Ec}),I=p.useRef(null),F=x?g||!!x.closest("form"):!0,[E,O]=p.useState(new Set),M=Array.from(E).map(B=>B.props.value).join(";");return i.jsx(Iy,{...v,children:i.jsxs(Rse,{required:m,scope:t,trigger:x,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:j,onValueNodeHasChildrenChange:k,contentId:ir(),value:N,onValueChange:T,open:S,onOpenChange:A,dir:_,triggerPointerDownPosRef:I,disabled:h,children:[i.jsx(db.Provider,{scope:t,children:i.jsx(Mse,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(B=>{O(R=>new Set(R).add(B))},[]),onNativeOptionRemove:p.useCallback(B=>{O(R=>{const L=new Set(R);return L.delete(B),L})},[]),children:n})}),F?i.jsxs(YB,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:d,value:N,onChange:B=>T(B.target.value),disabled:h,form:g,children:[N===void 0?i.jsx("option",{value:""}):null,Array.from(E)]},M):null]})})};SB.displayName=Ec;var NB="SelectTrigger",CB=p.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,s=hb(n),o=Cl(NB,n),l=o.disabled||r,c=St(t,o.onTriggerChange),u=fb(n),f=p.useRef("touch"),[d,h,m]=JB(v=>{const x=u().filter(w=>!w.disabled),y=x.find(w=>w.value===o.value),b=QB(x,v,y);b!==void 0&&o.onValueChange(b.value)}),g=v=>{l||(o.onOpenChange(!0),m()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return i.jsx(dp,{asChild:!0,...s,children:i.jsx(Ge.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":XB(o.value)?"":void 0,...a,ref:c,onClick:Ee(a.onClick,v=>{v.currentTarget.focus(),f.current!=="mouse"&&g(v)}),onPointerDown:Ee(a.onPointerDown,v=>{f.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:Ee(a.onKeyDown,v=>{const x=d.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(x&&v.key===" ")&&Tse.includes(v.key)&&(g(),v.preventDefault())})})})});CB.displayName=NB;var AB="SelectValue",EB=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:s,placeholder:o="",...l}=e,c=Cl(AB,n),{onValueNodeHasChildrenChange:u}=c,f=s!==void 0,d=St(t,c.onValueNodeChange);return Xn(()=>{u(f)},[u,f]),i.jsx(Ge.span,{...l,ref:d,style:{pointerEvents:"none"},children:XB(c.value)?i.jsx(i.Fragment,{children:o}):s})});EB.displayName=AB;var $se="SelectIcon",PB=p.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return i.jsx(Ge.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});PB.displayName=$se;var Lse="SelectPortal",TB=e=>i.jsx(Zd,{asChild:!0,...e});TB.displayName=Lse;var Pc="SelectContent",OB=p.forwardRef((e,t)=>{const n=Cl(Pc,e.__scopeSelect),[r,a]=p.useState();if(Xn(()=>{a(new DocumentFragment)},[]),!n.open){const s=r;return s?Hc.createPortal(i.jsx(IB,{scope:e.__scopeSelect,children:i.jsx(db.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),s):null}return i.jsx(RB,{...e,ref:t})});OB.displayName=Pc;var ki=10,[IB,Al]=lf(Pc),Fse="SelectContentImpl",Bse=fl("SelectContent.RemoveScroll"),RB=p.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x,...y}=e,b=Cl(Pc,n),[w,j]=p.useState(null),[k,_]=p.useState(null),S=St(t,W=>j(W)),[A,N]=p.useState(null),[T,I]=p.useState(null),F=fb(n),[E,O]=p.useState(!1),M=p.useRef(!1);p.useEffect(()=>{if(w)return Qy(w)},[w]),Jy();const B=p.useCallback(W=>{const[ee,...X]=F().map(J=>J.ref.current),[ae]=X.slice(-1),re=document.activeElement;for(const J of W)if(J===re||(J==null||J.scrollIntoView({block:"nearest"}),J===ee&&k&&(k.scrollTop=0),J===ae&&k&&(k.scrollTop=k.scrollHeight),J==null||J.focus(),document.activeElement!==re))return},[F,k]),R=p.useCallback(()=>B([A,w]),[B,A,w]);p.useEffect(()=>{E&&R()},[E,R]);const{onOpenChange:L,triggerPointerDownPosRef:$}=b;p.useEffect(()=>{if(w){let W={x:0,y:0};const ee=ae=>{var re,J;W={x:Math.abs(Math.round(ae.pageX)-(((re=$.current)==null?void 0:re.x)??0)),y:Math.abs(Math.round(ae.pageY)-(((J=$.current)==null?void 0:J.y)??0))}},X=ae=>{W.x<=10&&W.y<=10?ae.preventDefault():w.contains(ae.target)||L(!1),document.removeEventListener("pointermove",ee),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",ee),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ee),document.removeEventListener("pointerup",X,{capture:!0})}}},[w,L,$]),p.useEffect(()=>{const W=()=>L(!1);return window.addEventListener("blur",W),window.addEventListener("resize",W),()=>{window.removeEventListener("blur",W),window.removeEventListener("resize",W)}},[L]);const[C,U]=JB(W=>{const ee=F().filter(re=>!re.disabled),X=ee.find(re=>re.ref.current===document.activeElement),ae=QB(ee,W,X);ae&&setTimeout(()=>ae.ref.current.focus())}),D=p.useCallback((W,ee,X)=>{const ae=!M.current&&!X;(b.value!==void 0&&b.value===ee||ae)&&(N(W),ae&&(M.current=!0))},[b.value]),P=p.useCallback(()=>w==null?void 0:w.focus(),[w]),H=p.useCallback((W,ee,X)=>{const ae=!M.current&&!X;(b.value!==void 0&&b.value===ee||ae)&&I(W)},[b.value]),G=r==="popper"?o_:MB,Y=G===o_?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x}:{};return i.jsx(IB,{scope:n,content:w,viewport:k,onViewportChange:_,itemRefCallback:D,selectedItem:A,onItemLeave:P,itemTextRefCallback:H,focusSelectedItem:R,selectedItemText:T,position:r,isPositioned:E,searchRef:C,children:i.jsx(vp,{as:Bse,allowPinchZoom:!0,children:i.jsx(gp,{asChild:!0,trapped:b.open,onMountAutoFocus:W=>{W.preventDefault()},onUnmountAutoFocus:Ee(a,W=>{var ee;(ee=b.trigger)==null||ee.focus({preventScroll:!0}),W.preventDefault()}),children:i.jsx(Kc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:W=>W.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:i.jsx(G,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:W=>W.preventDefault(),...y,...Y,onPlaced:()=>O(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ee(y.onKeyDown,W=>{const ee=W.ctrlKey||W.altKey||W.metaKey;if(W.key==="Tab"&&W.preventDefault(),!ee&&W.key.length===1&&U(W.key),["ArrowUp","ArrowDown","Home","End"].includes(W.key)){let ae=F().filter(re=>!re.disabled).map(re=>re.ref.current);if(["ArrowUp","End"].includes(W.key)&&(ae=ae.slice().reverse()),["ArrowUp","ArrowDown"].includes(W.key)){const re=W.target,J=ae.indexOf(re);ae=ae.slice(J+1)}setTimeout(()=>B(ae)),W.preventDefault()}})})})})})})});RB.displayName=Fse;var Use="SelectItemAlignedPosition",MB=p.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,s=Cl(Pc,n),o=Al(Pc,n),[l,c]=p.useState(null),[u,f]=p.useState(null),d=St(t,S=>f(S)),h=fb(n),m=p.useRef(!1),g=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:y,focusSelectedItem:b}=o,w=p.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&v&&x&&y){const S=s.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),N=s.valueNode.getBoundingClientRect(),T=y.getBoundingClientRect();if(s.dir!=="rtl"){const re=T.left-A.left,J=N.left-re,ve=S.left-J,z=S.width+ve,q=Math.max(z,A.width),ie=window.innerWidth-ki,oe=r_(J,[ki,Math.max(ki,ie-q)]);l.style.minWidth=z+"px",l.style.left=oe+"px"}else{const re=A.right-T.right,J=window.innerWidth-N.right-re,ve=window.innerWidth-S.right-J,z=S.width+ve,q=Math.max(z,A.width),ie=window.innerWidth-ki,oe=r_(J,[ki,Math.max(ki,ie-q)]);l.style.minWidth=z+"px",l.style.right=oe+"px"}const I=h(),F=window.innerHeight-ki*2,E=v.scrollHeight,O=window.getComputedStyle(u),M=parseInt(O.borderTopWidth,10),B=parseInt(O.paddingTop,10),R=parseInt(O.borderBottomWidth,10),L=parseInt(O.paddingBottom,10),$=M+B+E+L+R,C=Math.min(x.offsetHeight*5,$),U=window.getComputedStyle(v),D=parseInt(U.paddingTop,10),P=parseInt(U.paddingBottom,10),H=S.top+S.height/2-ki,G=F-H,Y=x.offsetHeight/2,W=x.offsetTop+Y,ee=M+B+W,X=$-ee;if(ee<=H){const re=I.length>0&&x===I[I.length-1].ref.current;l.style.bottom="0px";const J=u.clientHeight-v.offsetTop-v.offsetHeight,ve=Math.max(G,Y+(re?P:0)+J+R),z=ee+ve;l.style.height=z+"px"}else{const re=I.length>0&&x===I[0].ref.current;l.style.top="0px";const ve=Math.max(H,M+v.offsetTop+(re?D:0)+Y)+X;l.style.height=ve+"px",v.scrollTop=ee-H+v.offsetTop}l.style.margin=`${ki}px 0`,l.style.minHeight=C+"px",l.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,l,u,v,x,y,s.dir,r]);Xn(()=>w(),[w]);const[j,k]=p.useState();Xn(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const _=p.useCallback(S=>{S&&g.current===!0&&(w(),b==null||b(),g.current=!1)},[w,b]);return i.jsx(qse,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:_,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:i.jsx(Ge.div,{...a,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});MB.displayName=Use;var zse="SelectPopperPosition",o_=p.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=ki,...s}=e,o=hb(n);return i.jsx(Ry,{...o,...s,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});o_.displayName=zse;var[qse,sC]=lf(Pc,{}),l_="SelectViewport",DB=p.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,s=Al(l_,n),o=sC(l_,n),l=St(t,s.onViewportChange),c=p.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(db.Slot,{scope:n,children:i.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ee(a.onScroll,u=>{const f=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){const m=Math.abs(c.current-f.scrollTop);if(m>0){const g=window.innerHeight-ki*2,v=parseFloat(d.style.minHeight),x=parseFloat(d.style.height),y=Math.max(v,x);if(y<g){const b=y+m,w=Math.min(g,b),j=b-w;d.style.height=w+"px",d.style.bottom==="0px"&&(f.scrollTop=j>0?j:0,d.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});DB.displayName=l_;var $B="SelectGroup",[Wse,Hse]=lf($B),Vse=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=ir();return i.jsx(Wse,{scope:n,id:a,children:i.jsx(Ge.div,{role:"group","aria-labelledby":a,...r,ref:t})})});Vse.displayName=$B;var LB="SelectLabel",FB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Hse(LB,n);return i.jsx(Ge.div,{id:a.id,...r,ref:t})});FB.displayName=LB;var ix="SelectItem",[Kse,BB]=lf(ix),UB=p.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:s,...o}=e,l=Cl(ix,n),c=Al(ix,n),u=l.value===r,[f,d]=p.useState(s??""),[h,m]=p.useState(!1),g=St(t,b=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,b,r,a)}),v=ir(),x=p.useRef("touch"),y=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Kse,{scope:n,value:r,disabled:a,textId:v,isSelected:u,onItemTextChange:p.useCallback(b=>{d(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:i.jsx(db.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:i.jsx(Ge.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:Ee(o.onFocus,()=>m(!0)),onBlur:Ee(o.onBlur,()=>m(!1)),onClick:Ee(o.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:Ee(o.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:Ee(o.onPointerDown,b=>{x.current=b.pointerType}),onPointerMove:Ee(o.onPointerMove,b=>{var w;x.current=b.pointerType,a?(w=c.onItemLeave)==null||w.call(c):x.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ee(o.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Ee(o.onKeyDown,b=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&b.key===" "||(Ose.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});UB.displayName=ix;var lh="SelectItemText",zB=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...s}=e,o=Cl(lh,n),l=Al(lh,n),c=BB(lh,n),u=Dse(lh,n),[f,d]=p.useState(null),h=St(t,y=>d(y),c.onItemTextChange,y=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,y,c.value,c.disabled)}),m=f==null?void 0:f.textContent,g=p.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=u;return Xn(()=>(v(g),()=>x(g)),[v,x,g]),i.jsxs(i.Fragment,{children:[i.jsx(Ge.span,{id:c.textId,...s,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Hc.createPortal(s.children,o.valueNode):null]})});zB.displayName=lh;var qB="SelectItemIndicator",WB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return BB(qB,n).isSelected?i.jsx(Ge.span,{"aria-hidden":!0,...r,ref:t}):null});WB.displayName=qB;var c_="SelectScrollUpButton",HB=p.forwardRef((e,t)=>{const n=Al(c_,e.__scopeSelect),r=sC(c_,e.__scopeSelect),[a,s]=p.useState(!1),o=St(t,r.onScrollButtonChange);return Xn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?i.jsx(KB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});HB.displayName=c_;var u_="SelectScrollDownButton",VB=p.forwardRef((e,t)=>{const n=Al(u_,e.__scopeSelect),r=sC(u_,e.__scopeSelect),[a,s]=p.useState(!1),o=St(t,r.onScrollButtonChange);return Xn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;s(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?i.jsx(KB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});VB.displayName=u_;var KB=p.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,s=Al("SelectScrollButton",n),o=p.useRef(null),l=fb(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Xn(()=>{var f;const u=l().find(d=>d.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),i.jsx(Ge.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ee(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ee(a.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ee(a.onPointerLeave,()=>{c()})})}),Gse="SelectSeparator",GB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(Ge.div,{"aria-hidden":!0,...r,ref:t})});GB.displayName=Gse;var d_="SelectArrow",Yse=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=hb(n),s=Cl(d_,n),o=Al(d_,n);return s.open&&o.position==="popper"?i.jsx(My,{...a,...r,ref:t}):null});Yse.displayName=d_;var Xse="SelectBubbleInput",YB=p.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=p.useRef(null),s=St(r,a),o=iC(t);return p.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&f){const d=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(d)}},[o,t]),i.jsx(Ge.select,{...n,style:{...gL,...n.style},ref:s,defaultValue:t})});YB.displayName=Xse;function XB(e){return e===""||e===void 0}function JB(e){const t=Kn(e),n=p.useRef(""),r=p.useRef(0),a=p.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),s=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,s]}function QB(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let o=Jse(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function Jse(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Qse=SB,ZB=CB,Zse=EB,eoe=PB,toe=TB,eU=OB,noe=DB,tU=FB,nU=UB,roe=zB,aoe=WB,rU=HB,aU=VB,iU=GB;const Bt=Qse,It=Zse,Mt=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(ZB,{ref:r,className:ye("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(eoe,{asChild:!0,children:i.jsx(xa,{className:"h-4 w-4 opacity-50"})})]}));Mt.displayName=ZB.displayName;const sU=p.forwardRef(({className:e,...t},n)=>i.jsx(rU,{ref:n,className:ye("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(BL,{className:"h-4 w-4"})}));sU.displayName=rU.displayName;const oU=p.forwardRef(({className:e,...t},n)=>i.jsx(aU,{ref:n,className:ye("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(xa,{className:"h-4 w-4"})}));oU.displayName=aU.displayName;const Dt=p.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>i.jsx(toe,{children:i.jsxs(eU,{ref:a,className:ye("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(sU,{}),i.jsx(noe,{className:ye("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(oU,{})]})}));Dt.displayName=eU.displayName;const ioe=p.forwardRef(({className:e,...t},n)=>i.jsx(tU,{ref:n,className:ye("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));ioe.displayName=tU.displayName;const $e=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(nU,{ref:r,className:ye("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(aoe,{children:i.jsx(Cy,{className:"h-4 w-4"})})}),i.jsx(roe,{children:t})]}));$e.displayName=nU.displayName;const soe=p.forwardRef(({className:e,...t},n)=>i.jsx(iU,{ref:n,className:ye("-mx-1 my-1 h-px bg-muted",e),...t}));soe.displayName=iU.displayName;var LT=1,ooe=.9,loe=.8,coe=.17,Rw=.1,Mw=.999,uoe=.9999,doe=.99,foe=/[\\\/_+.#"@\[\(\{&]/,hoe=/[\\\/_+.#"@\[\(\{&]/g,moe=/[\s-]/,lU=/[\s-]/g;function f_(e,t,n,r,a,s,o){if(s===t.length)return a===e.length?LT:doe;var l=`${a},${s}`;if(o[l]!==void 0)return o[l];for(var c=r.charAt(s),u=n.indexOf(c,a),f=0,d,h,m,g;u>=0;)d=f_(e,t,n,r,u+1,s+1,o),d>f&&(u===a?d*=LT:foe.test(e.charAt(u-1))?(d*=loe,m=e.slice(a,u-1).match(hoe),m&&a>0&&(d*=Math.pow(Mw,m.length))):moe.test(e.charAt(u-1))?(d*=ooe,g=e.slice(a,u-1).match(lU),g&&a>0&&(d*=Math.pow(Mw,g.length))):(d*=coe,a>0&&(d*=Math.pow(Mw,u-a))),e.charAt(u)!==t.charAt(s)&&(d*=uoe)),(d<Rw&&n.charAt(u-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(u-1)!==r.charAt(s))&&(h=f_(e,t,n,r,u+1,s+2,o),h*Rw>d&&(d=h*Rw)),d>f&&(f=d),u=n.indexOf(c,u+1);return o[l]=f,f}function FT(e){return e.toLowerCase().replace(lU," ")}function poe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,f_(e,t,FT(e),FT(t),0,0,{})}var Bf='[cmdk-group=""]',Dw='[cmdk-group-items=""]',goe='[cmdk-group-heading=""]',cU='[cmdk-item=""]',BT=`${cU}:not([aria-disabled="true"])`,h_="cmdk-item-select",Su="data-value",voe=(e,t,n)=>poe(e,t,n),uU=p.createContext(void 0),Sp=()=>p.useContext(uU),dU=p.createContext(void 0),oC=()=>p.useContext(dU),fU=p.createContext(void 0),hU=p.forwardRef((e,t)=>{let n=Nu(()=>{var D,P;return{search:"",value:(P=(D=e.value)!=null?D:e.defaultValue)!=null?P:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Nu(()=>new Set),a=Nu(()=>new Map),s=Nu(()=>new Map),o=Nu(()=>new Set),l=mU(e),{label:c,children:u,value:f,onValueChange:d,filter:h,shouldFilter:m,loop:g,disablePointerSelection:v=!1,vimBindings:x=!0,...y}=e,b=ir(),w=ir(),j=ir(),k=p.useRef(null),_=Aoe();Tc(()=>{if(f!==void 0){let D=f.trim();n.current.value=D,S.emit()}},[f]),Tc(()=>{_(6,E)},[]);let S=p.useMemo(()=>({subscribe:D=>(o.current.add(D),()=>o.current.delete(D)),snapshot:()=>n.current,setState:(D,P,H)=>{var G,Y,W,ee;if(!Object.is(n.current[D],P)){if(n.current[D]=P,D==="search")F(),T(),_(1,I);else if(D==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let X=document.getElementById(j);X?X.focus():(G=document.getElementById(b))==null||G.focus()}if(_(7,()=>{var X;n.current.selectedItemId=(X=O())==null?void 0:X.id,S.emit()}),H||_(5,E),((Y=l.current)==null?void 0:Y.value)!==void 0){let X=P??"";(ee=(W=l.current).onValueChange)==null||ee.call(W,X);return}}S.emit()}},emit:()=>{o.current.forEach(D=>D())}}),[]),A=p.useMemo(()=>({value:(D,P,H)=>{var G;P!==((G=s.current.get(D))==null?void 0:G.value)&&(s.current.set(D,{value:P,keywords:H}),n.current.filtered.items.set(D,N(P,H)),_(2,()=>{T(),S.emit()}))},item:(D,P)=>(r.current.add(D),P&&(a.current.has(P)?a.current.get(P).add(D):a.current.set(P,new Set([D]))),_(3,()=>{F(),T(),n.current.value||I(),S.emit()}),()=>{s.current.delete(D),r.current.delete(D),n.current.filtered.items.delete(D);let H=O();_(4,()=>{F(),(H==null?void 0:H.getAttribute("id"))===D&&I(),S.emit()})}),group:D=>(a.current.has(D)||a.current.set(D,new Set),()=>{s.current.delete(D),a.current.delete(D)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:b,inputId:j,labelId:w,listInnerRef:k}),[]);function N(D,P){var H,G;let Y=(G=(H=l.current)==null?void 0:H.filter)!=null?G:voe;return D?Y(D,n.current.search,P):0}function T(){if(!n.current.search||l.current.shouldFilter===!1)return;let D=n.current.filtered.items,P=[];n.current.filtered.groups.forEach(G=>{let Y=a.current.get(G),W=0;Y.forEach(ee=>{let X=D.get(ee);W=Math.max(X,W)}),P.push([G,W])});let H=k.current;M().sort((G,Y)=>{var W,ee;let X=G.getAttribute("id"),ae=Y.getAttribute("id");return((W=D.get(ae))!=null?W:0)-((ee=D.get(X))!=null?ee:0)}).forEach(G=>{let Y=G.closest(Dw);Y?Y.appendChild(G.parentElement===Y?G:G.closest(`${Dw} > *`)):H.appendChild(G.parentElement===H?G:G.closest(`${Dw} > *`))}),P.sort((G,Y)=>Y[1]-G[1]).forEach(G=>{var Y;let W=(Y=k.current)==null?void 0:Y.querySelector(`${Bf}[${Su}="${encodeURIComponent(G[0])}"]`);W==null||W.parentElement.appendChild(W)})}function I(){let D=M().find(H=>H.getAttribute("aria-disabled")!=="true"),P=D==null?void 0:D.getAttribute(Su);S.setState("value",P||void 0)}function F(){var D,P,H,G;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Y=0;for(let W of r.current){let ee=(P=(D=s.current.get(W))==null?void 0:D.value)!=null?P:"",X=(G=(H=s.current.get(W))==null?void 0:H.keywords)!=null?G:[],ae=N(ee,X);n.current.filtered.items.set(W,ae),ae>0&&Y++}for(let[W,ee]of a.current)for(let X of ee)if(n.current.filtered.items.get(X)>0){n.current.filtered.groups.add(W);break}n.current.filtered.count=Y}function E(){var D,P,H;let G=O();G&&(((D=G.parentElement)==null?void 0:D.firstChild)===G&&((H=(P=G.closest(Bf))==null?void 0:P.querySelector(goe))==null||H.scrollIntoView({block:"nearest"})),G.scrollIntoView({block:"nearest"}))}function O(){var D;return(D=k.current)==null?void 0:D.querySelector(`${cU}[aria-selected="true"]`)}function M(){var D;return Array.from(((D=k.current)==null?void 0:D.querySelectorAll(BT))||[])}function B(D){let P=M()[D];P&&S.setState("value",P.getAttribute(Su))}function R(D){var P;let H=O(),G=M(),Y=G.findIndex(ee=>ee===H),W=G[Y+D];(P=l.current)!=null&&P.loop&&(W=Y+D<0?G[G.length-1]:Y+D===G.length?G[0]:G[Y+D]),W&&S.setState("value",W.getAttribute(Su))}function L(D){let P=O(),H=P==null?void 0:P.closest(Bf),G;for(;H&&!G;)H=D>0?Noe(H,Bf):Coe(H,Bf),G=H==null?void 0:H.querySelector(BT);G?S.setState("value",G.getAttribute(Su)):R(D)}let $=()=>B(M().length-1),C=D=>{D.preventDefault(),D.metaKey?$():D.altKey?L(1):R(1)},U=D=>{D.preventDefault(),D.metaKey?B(0):D.altKey?L(-1):R(-1)};return p.createElement(Ge.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:D=>{var P;(P=y.onKeyDown)==null||P.call(y,D);let H=D.nativeEvent.isComposing||D.keyCode===229;if(!(D.defaultPrevented||H))switch(D.key){case"n":case"j":{x&&D.ctrlKey&&C(D);break}case"ArrowDown":{C(D);break}case"p":case"k":{x&&D.ctrlKey&&U(D);break}case"ArrowUp":{U(D);break}case"Home":{D.preventDefault(),B(0);break}case"End":{D.preventDefault(),$();break}case"Enter":{D.preventDefault();let G=O();if(G){let Y=new Event(h_);G.dispatchEvent(Y)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:A.inputId,id:A.labelId,style:Poe},c),mb(e,D=>p.createElement(dU.Provider,{value:S},p.createElement(uU.Provider,{value:A},D))))}),xoe=p.forwardRef((e,t)=>{var n,r;let a=ir(),s=p.useRef(null),o=p.useContext(fU),l=Sp(),c=mU(e),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;Tc(()=>{if(!u)return l.item(a,o==null?void 0:o.id)},[u]);let f=pU(a,s,[e.value,e.children,s],e.keywords),d=oC(),h=gl(_=>_.value&&_.value===f.current),m=gl(_=>u||l.filter()===!1?!0:_.search?_.filtered.items.get(a)>0:!0);p.useEffect(()=>{let _=s.current;if(!(!_||e.disabled))return _.addEventListener(h_,g),()=>_.removeEventListener(h_,g)},[m,e.onSelect,e.disabled]);function g(){var _,S;v(),(S=(_=c.current).onSelect)==null||S.call(_,f.current)}function v(){d.setState("value",f.current,!0)}if(!m)return null;let{disabled:x,value:y,onSelect:b,forceMount:w,keywords:j,...k}=e;return p.createElement(Ge.div,{ref:ro(s,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!h,"data-disabled":!!x,"data-selected":!!h,onPointerMove:x||l.getDisablePointerSelection()?void 0:v,onClick:x?void 0:g},e.children)}),yoe=p.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...s}=e,o=ir(),l=p.useRef(null),c=p.useRef(null),u=ir(),f=Sp(),d=gl(m=>a||f.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);Tc(()=>f.group(o),[]),pU(o,l,[e.value,e.heading,c]);let h=p.useMemo(()=>({id:o,forceMount:a}),[a]);return p.createElement(Ge.div,{ref:ro(l,t),...s,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&p.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),mb(e,m=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},p.createElement(fU.Provider,{value:h},m))))}),boe=p.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=p.useRef(null),s=gl(o=>!o.search);return!n&&!s?null:p.createElement(Ge.div,{ref:ro(a,t),...r,"cmdk-separator":"",role:"separator"})}),woe=p.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,s=oC(),o=gl(u=>u.search),l=gl(u=>u.selectedItemId),c=Sp();return p.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),p.createElement(Ge.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:u=>{a||s.setState("search",u.target.value),n==null||n(u.target.value)}})}),joe=p.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,s=p.useRef(null),o=p.useRef(null),l=gl(u=>u.selectedItemId),c=Sp();return p.useEffect(()=>{if(o.current&&s.current){let u=o.current,f=s.current,d,h=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let m=u.offsetHeight;f.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return h.observe(u),()=>{cancelAnimationFrame(d),h.unobserve(u)}}},[]),p.createElement(Ge.div,{ref:ro(s,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:c.listId},mb(e,u=>p.createElement("div",{ref:ro(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),_oe=p.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:s,container:o,...l}=e;return p.createElement(DN,{open:n,onOpenChange:r},p.createElement($N,{container:o},p.createElement(ab,{"cmdk-overlay":"",className:a}),p.createElement(ib,{"aria-label":e.label,"cmdk-dialog":"",className:s},p.createElement(hU,{ref:t,...l}))))}),koe=p.forwardRef((e,t)=>gl(n=>n.filtered.count===0)?p.createElement(Ge.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Soe=p.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...s}=e;return p.createElement(Ge.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},mb(e,o=>p.createElement("div",{"aria-hidden":!0},o)))}),Aa=Object.assign(hU,{List:joe,Item:xoe,Input:woe,Group:yoe,Separator:boe,Dialog:_oe,Empty:koe,Loading:Soe});function Noe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Coe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function mU(e){let t=p.useRef(e);return Tc(()=>{t.current=e}),t}var Tc=typeof window>"u"?p.useEffect:p.useLayoutEffect;function Nu(e){let t=p.useRef();return t.current===void 0&&(t.current=e()),t}function gl(e){let t=oC(),n=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,n,n)}function pU(e,t,n,r=[]){let a=p.useRef(),s=Sp();return Tc(()=>{var o;let l=(()=>{var u;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(u=f.current.textContent)==null?void 0:u.trim():a.current}})(),c=r.map(u=>u.trim());s.value(e,l,c),(o=t.current)==null||o.setAttribute(Su,l),a.current=l}),a}var Aoe=()=>{let[e,t]=p.useState(),n=Nu(()=>new Map);return Tc(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function Eoe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function mb({asChild:e,children:t},n){return e&&p.isValidElement(t)?p.cloneElement(Eoe(t),{ref:t.ref},n(t.props.children)):n(t)}var Poe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Oc=p.forwardRef(({className:e,...t},n)=>i.jsx(Aa,{ref:n,className:ye("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Oc.displayName=Aa.displayName;const Ic=p.forwardRef(({className:e,...t},n)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(fs,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(Aa.Input,{ref:n,className:ye("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Ic.displayName=Aa.Input.displayName;const pb=p.forwardRef(({className:e,...t},n)=>i.jsx(Aa.List,{ref:n,className:ye("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));pb.displayName=Aa.List.displayName;const Rc=p.forwardRef((e,t)=>i.jsx(Aa.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Rc.displayName=Aa.Empty.displayName;const Mc=p.forwardRef(({className:e,...t},n)=>i.jsx(Aa.Group,{ref:n,className:ye("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Mc.displayName=Aa.Group.displayName;const Toe=p.forwardRef(({className:e,...t},n)=>i.jsx(Aa.Separator,{ref:n,className:ye("-mx-1 h-px bg-border",e),...t}));Toe.displayName=Aa.Separator.displayName;const Dc=p.forwardRef(({className:e,...t},n)=>i.jsx(Aa.Item,{ref:n,className:ye("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));Dc.displayName=Aa.Item.displayName;let $w=!1,Lw=null;function hm(){return $w?Promise.resolve():(Lw||(Lw=ne.auth.getSession().then(()=>{$w=!0}).catch(()=>{$w=!0})),Lw)}const gU=()=>{const{user:e}=Vr(),{userRoles:t,loading:n}=jr(),[r,a]=p.useState("none"),[s,o]=p.useState(null),[l,c]=p.useState(!0),[u,f]=p.useState(null),d=p.useMemo(()=>t.map(x=>((x==null?void 0:x.name)??"").toLowerCase()),[t]),h=d.includes("master_agent"),m=d.includes("super_agent"),g=d.includes("agent");return p.useEffect(()=>{let x=!0;const y=(b,w,j)=>{x&&((j==null?void 0:j.loading)!==void 0&&c(j.loading),(j==null?void 0:j.error)!==void 0&&f(j.error),a(b),o(w))};return e!=null&&e.id?n?(c(!0),()=>{x=!1}):h?(y("all",null,{loading:!1,error:null}),()=>{x=!1}):m?(y("super",e.id,{loading:!1,error:null}),()=>{x=!1}):g?(c(!0),f(null),(async()=>{try{await hm();const{data:b,error:w}=await ne.from("super_agent_members").select("super_agent_id").eq("agent_user_id",e.id).maybeSingle();if(!x)return;if(w)throw w;const j=(b==null?void 0:b.super_agent_id)??null;j?y("agent",j,{loading:!1,error:null}):y("none",null,{loading:!1,error:"Agent belum memiliki Super Agent penanggung jawab."})}catch(b){if(!x)return;console.error("Failed to resolve agent super scope",b),y("none",null,{loading:!1,error:b instanceof Error?b.message:"Gagal memuat cakupan agen AI."})}})(),()=>{x=!1}):(d.length>0?y("all",null,{loading:!1,error:null}):c(!0),()=>{x=!1}):(y("none",null,{loading:!1,error:null}),()=>{x=!1})},[e==null?void 0:e.id,n,h,m,g,d]),{mode:r,superAgentId:s,loading:l,error:u,refresh:async()=>{if(!(e!=null&&e.id)||!g)return s;c(!0),f(null);try{await hm();const{data:x,error:y}=await ne.from("super_agent_members").select("super_agent_id").eq("agent_user_id",e.id).maybeSingle();if(y)throw y;const b=(x==null?void 0:x.super_agent_id)??null;return b?(a("agent"),o(b)):(a("none"),o(null),f("Agent belum memiliki Super Agent penanggung jawab.")),b}catch(x){return console.error("Failed to refresh agent super scope",x),a("none"),o(null),f(x instanceof Error?x.message:"Gagal memuat cakupan agen AI."),null}finally{c(!1)}}}},Np=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),o=p.useState({current:null})[0],{user:l}=Vr(),{mode:c,superAgentId:u,loading:f,error:d}=gU(),h=p.useMemo(()=>{const g="v2",v=(l==null?void 0:l.id)??"anon";return c==="all"?`app.cachedAIAgents:${g}:${v}:all`:c==="none"?`app.cachedAIAgents:${g}:${v}:none`:`app.cachedAIAgents:${g}:${v}:${u??"none"}`},[c,u,l==null?void 0:l.id]),m=async()=>{if(!f)try{const g=`${c}:${u??"null"}`;if(o.current===g)return;if(o.current=g,r(!0),s(d??null),c==="none"){t([]);try{localStorage.setItem(h,JSON.stringify([]))}catch{}return}await hm();const v="id, org_id, name, description, system_prompt, welcome_message, transfer_conditions, stop_ai_after_handoff, response_temperature, created_at, auto_resolve_after_minutes, enable_resolve, super_agent_id";let x=null,y=null;if(c==="super"||c==="agent"){if(!u){t([]);try{localStorage.setItem(h,JSON.stringify([]))}catch{}return}const{data:b,error:w}=await ne.from("ai_profiles").select(v).eq("super_agent_id",u).order("created_at",{ascending:!1});if(x=b,y=w,(y==null?void 0:y.code)==="42703"){const j=await ne.from("ai_profiles").select(v).order("created_at",{ascending:!1});x=j.data,y=j.error}}else{const{data:b,error:w}=await ne.from("ai_profiles").select(v).order("created_at",{ascending:!1});x=b,y=w}if(y){console.error("Error fetching AI agents:",y),s(y.message),t([]);return}t(x||[]);try{localStorage.setItem(h,JSON.stringify(x||[]))}catch{}}catch(g){console.error("Error fetching AI agents:",g),s("Failed to fetch AI agents"),t([])}finally{o.current=null,r(!1)}};return p.useEffect(()=>{if(f){r(!0);return}if(c==="none"){t([]),s(d??"Tidak ada agen AI yang tersedia untuk akun ini."),r(!1);return}try{const x=localStorage.getItem(h);if(x){const y=JSON.parse(x);Array.isArray(y)&&t(y)}}catch{}const v=setTimeout(()=>m(),50);return()=>clearTimeout(v)},[f,c,d,h]),{aiAgents:e,loading:n||f,error:a,fetchAIAgents:m,scopeMode:c,superAgentId:u}},El=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null);let o=!1;const l=w=>{o=w},c=()=>{try{const w=localStorage.getItem("app.cachedAgents");if(!w)return!1;const j=JSON.parse(w);if(Array.isArray(j))return t(j),!0}catch{}return!1},u=w=>{const j=(w==null?void 0:w.filter(k=>k!=null))||[];return j.includes("master_agent")?"master_agent":j.includes("super_agent")?"super_agent":j.includes("agent")?"agent":null},f=6e4;globalThis.__agentsCache||(globalThis.__agentsCache={data:null,ts:0,inFlight:null});const d=globalThis.__agentsCache,h=w=>(w||[]).map(j=>{var S;const k=((S=j.roles)==null?void 0:S.filter(A=>A!=null))||[],_=u(j.roles||[]);return{user_id:j.id,email:j.email,display_name:j.display_name,avatar_url:j.avatar_url,timezone:j.timezone,created_at:j.created_at,roles:k,primaryRole:_,status:"Active",super_agent_id:null}}),m=async()=>(d.inFlight||(d.inFlight=(async()=>{await hm();const{data:w,error:j}=await ne.from("v_users").select("*").order("created_at",{ascending:!1});if(j)throw j;let k=h(w||[]);try{const{data:_}=await ne.from("super_agent_members").select("agent_user_id, super_agent_id");if(_&&Array.isArray(_)){const S={};_.forEach(A=>{S[A.agent_user_id]=A.super_agent_id}),k=k.map(A=>A.primaryRole==="agent"?{...A,super_agent_id:S[A.user_id]||null}:A)}}catch{}d.data=k,d.ts=Date.now(),d.inFlight=null;try{localStorage.setItem("app.cachedAgents",JSON.stringify(k))}catch{}return k})().catch(w=>{throw d.inFlight=null,w})),d.inFlight),g=async()=>d.data&&Date.now()-d.ts<f?d.data:await m(),v=async w=>{try{r(!0),s(null),w!=null&&w.force&&(d.ts=0);const j=await g();t(j)}catch(j){console.error("Error fetching human agents:",j),s("Failed to fetch human agents"),t([])}finally{r(!1)}},x=async w=>{var j,k;try{s(null);const _=w.email.trim().toLowerCase();if(w.role==="agent"&&!w.super_agent_id)throw new Error("Agents must be assigned to a super agent before they can be created.");const{data:S,error:A}=await ne.from("v_human_agents").select("user_id, confirmation_status").ilike("email",_).maybeSingle();if(A)throw A;if(S){const F=(()=>{switch(S.confirmation_status){case"accepted":return"assigned to an active member";case"waiting":return"pending for an existing invite";case"expired":return"associated with an expired invite";default:return"in use"}})();throw new Error(`The email ${_} is already ${F}. Choose a different email or manage the existing user instead.`)}const{data:N,error:T}=await ne.functions.invoke("admin-create-user",{headers:{"x-client-origin":typeof window<"u"?window.location.origin:""},body:{email:_,full_name:w.full_name,role:w.role,super_agent_id:w.super_agent_id??null,org_id:w.org_id??null}});if(T)throw T;try{const F=(N==null?void 0:N.id)||(N==null?void 0:N.user_id)||((j=N==null?void 0:N.user)==null?void 0:j.id)||null;F&&await ne.from("users_profile").update({is_2fa_email_enabled:o}).eq("user_id",F)}catch{}await v({force:!0});try{await Wt({action:"user.create",resource:"user",resourceId:(N==null?void 0:N.id)||null,context:w})}catch{}return{id:(N==null?void 0:N.id)||(N==null?void 0:N.user_id)||((k=N==null?void 0:N.user)==null?void 0:k.id)||null}}catch(_){throw console.error("Error creating agent:",_),s(_ instanceof Error?_.message:"Failed to create agent"),_}},y=async(w,j)=>{try{s(null);const{data:k,error:_}=await ne.from("roles").select("id").eq("name",j).single();if(_)throw _;const{error:S}=await ne.from("user_roles").delete().eq("user_id",w);if(S)throw S;const{error:A}=await ne.from("user_roles").insert([{user_id:w,role_id:k.id}]);if(A)throw A;await v({force:!0});try{await Wt({action:"user.update_role",resource:"user",resourceId:w,context:{role:j}})}catch{}}catch(k){throw console.error("Error updating agent role:",k),s(k instanceof Error?k.message:"Failed to update agent role"),k}},b=async w=>{try{s(null);const{data:j,error:k}=await ne.from("v_human_agents").select("role_name").eq("user_id",w).maybeSingle();if(k)throw k;if(j!=null&&j.role_name&&String(j.role_name).toLowerCase().includes("master"))throw new Error("Master agent tidak dapat dihapus.");const{error:_}=await ne.functions.invoke("admin-delete-user",{body:{user_id:w}});if(_)throw _;await v({force:!0});try{await Wt({action:"user.delete",resource:"user",resourceId:w})}catch{}}catch(j){throw console.error("Error deleting agent:",j),s(j instanceof Error?j.message:"Failed to delete agent"),j}};return p.useEffect(()=>{c()&&r(!1),v()},[]),{agents:e,teams:[],loading:n,error:a,fetchAgents:v,fetchTeams:()=>Promise.resolve(),createAgent:x,updateAgentStatus:()=>Promise.resolve(),updateAgentRole:y,deleteAgent:b,createTeam:()=>Promise.resolve(),addAgentToTeam:()=>Promise.resolve(),removeAgentFromTeam:()=>Promise.resolve(),setEnable2FAFlagForCreate:l}},Ooe=({onFilterChange:e})=>{var b,w;const[t,n]=p.useState(!1),[r,a]=p.useState(),[s,o]=p.useState(),[l,c]=p.useState(!1),[u,f]=p.useState(!1),[d,h]=p.useState({dateRange:{},inbox:"",label:[],agent:"",status:"",resolvedBy:"",aiAgent:"",pipelineStatus:"",channelType:"all"}),{aiAgents:m}=Np(),{agents:g}=El(),v=(j,k)=>{const _={...d,[j]:k};h(_)},x=()=>{const j={...d,dateRange:{from:r,to:s}};e(j),n(!1)},y=()=>{const j={dateRange:{},inbox:"",label:[],agent:"",status:"",resolvedBy:"",aiAgent:"",pipelineStatus:""};h(j),a(void 0),o(void 0),e(j)};return i.jsxs(mn,{open:t,onOpenChange:n,children:[i.jsx(UN,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(HL,{className:"h-4 w-4"})})}),i.jsxs(cn,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[i.jsx(un,{children:i.jsx(dn,{children:"Filter"})}),i.jsxs("div",{className:"grid gap-6 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date Range"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(os,{children:[i.jsx(ls,{asChild:!0,children:i.jsxs(Q,{variant:"outline",className:ye("w-full justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[i.jsx(Gh,{className:"mr-2 h-4 w-4"}),r?oo(r,"dd-MM-yyyy"):"DD-MM-YYYY"]})}),i.jsx(Mi,{className:"w-auto p-0",align:"start",children:i.jsx(s_,{mode:"single",selected:r,onSelect:a,initialFocus:!0,className:"pointer-events-auto"})})]}),i.jsx("span",{className:"self-center text-muted-foreground",children:"-"}),i.jsxs(os,{children:[i.jsx(ls,{asChild:!0,children:i.jsxs(Q,{variant:"outline",className:ye("w-full justify-start text-left font-normal",!s&&"text-muted-foreground"),children:[i.jsx(Gh,{className:"mr-2 h-4 w-4"}),s?oo(s,"dd-MM-yyyy"):"DD-MM-YYYY"]})}),i.jsx(Mi,{className:"w-auto p-0",align:"start",children:i.jsx(s_,{mode:"single",selected:s,onSelect:o,initialFocus:!0,className:"pointer-events-auto"})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Inbox"}),i.jsxs(Bt,{value:d.inbox,onValueChange:j=>v("inbox",j),children:[i.jsx(Mt,{children:i.jsx(It,{placeholder:"All Inbox"})}),i.jsxs(Dt,{children:[i.jsx($e,{value:"all",children:"All Inbox"}),i.jsx($e,{value:"whatsapp",children:"WhatsApp"}),i.jsx($e,{value:"telegram",children:"Telegram"}),i.jsx($e,{value:"email",children:"Email"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Label"}),i.jsxs(Bt,{value:d.label.join(","),onValueChange:j=>v("label",j.split(",").filter(Boolean)),children:[i.jsx(Mt,{children:i.jsx(It,{placeholder:"Choose Labels"})}),i.jsxs(Dt,{children:[i.jsx($e,{value:"urgent",children:"Urgent"}),i.jsx($e,{value:"important",children:"Important"}),i.jsx($e,{value:"follow-up",children:"Follow Up"}),i.jsx($e,{value:"resolved",children:"Resolved"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Resolved By"}),i.jsxs(os,{open:u,onOpenChange:f,children:[i.jsx(ls,{asChild:!0,children:i.jsx(Q,{variant:"outline",role:"combobox",className:"w-full justify-between",children:((b=g.find(j=>j.user_id===d.resolvedBy))==null?void 0:b.display_name)||"Choose Agent"})}),i.jsx(Mi,{className:"w-[320px] p-0",children:i.jsxs(Oc,{children:[i.jsx(Ic,{placeholder:"Search Resolved By Agent"}),i.jsx(Rc,{children:"No agent found."}),i.jsx(Mc,{children:g.map(j=>i.jsx(Dc,{onSelect:()=>{v("resolvedBy",j.user_id),f(!1)},children:i.jsx("span",{className:"ml-2",children:j.display_name||"Unknown"})},j.user_id))})]})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Agent"}),i.jsxs(os,{open:l,onOpenChange:c,children:[i.jsx(ls,{asChild:!0,children:i.jsx(Q,{variant:"outline",role:"combobox",className:"w-full justify-between",children:((w=g.find(j=>j.user_id===d.agent))==null?void 0:w.display_name)||"Choose Agent"})}),i.jsx(Mi,{className:"w-[320px] p-0",children:i.jsxs(Oc,{children:[i.jsx(Ic,{placeholder:"Search Handled By Agent"}),i.jsx(Rc,{children:"No agent found."}),i.jsx(Mc,{children:g.map(j=>i.jsx(Dc,{onSelect:()=>{v("agent",j.user_id),c(!1)},children:i.jsx("span",{className:"ml-2",children:j.display_name||"Unknown"})},j.user_id))})]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"AI Agent"}),i.jsxs(Bt,{value:d.aiAgent,onValueChange:j=>v("aiAgent",j),children:[i.jsx(Mt,{children:i.jsx(It,{placeholder:"Choose AI Agent"})}),i.jsxs(Dt,{children:[i.jsx($e,{value:"all",children:"All AI Agents"}),m.map(j=>i.jsx($e,{value:j.id,children:j.name},j.id))]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Channel Type"}),i.jsxs(Bt,{value:d.channelType,onValueChange:j=>v("channelType",j),children:[i.jsx(Mt,{children:i.jsx(It,{placeholder:"All Channels"})}),i.jsxs(Dt,{children:[i.jsx($e,{value:"all",children:"All Channels"}),i.jsx($e,{value:"whatsapp",children:"WhatsApp"}),i.jsx($e,{value:"telegram",children:"Telegram"}),i.jsx($e,{value:"web",children:"Live Chat"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),i.jsxs(Bt,{value:d.status,onValueChange:j=>v("status",j),children:[i.jsx(Mt,{children:i.jsx(It,{placeholder:"All Statuses"})}),i.jsxs(Dt,{children:[i.jsx($e,{value:"all",children:"All Statuses"}),i.jsx($e,{value:"open",children:"Open"}),i.jsx($e,{value:"pending",children:"Pending"}),i.jsx($e,{value:"closed",children:"Closed"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Pipeline Status"}),i.jsxs(Bt,{value:d.pipelineStatus,onValueChange:j=>v("pipelineStatus",j),children:[i.jsx(Mt,{children:i.jsx(It,{placeholder:"All Statuses"})}),i.jsxs(Dt,{children:[i.jsx($e,{value:"all",children:"All Statuses"}),i.jsx($e,{value:"new",children:"New"}),i.jsx($e,{value:"qualified",children:"Qualified"}),i.jsx($e,{value:"proposal",children:"Proposal"}),i.jsx($e,{value:"negotiation",children:"Negotiation"}),i.jsx($e,{value:"closed-won",children:"Closed Won"}),i.jsx($e,{value:"closed-lost",children:"Closed Lost"})]})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(Q,{variant:"outline",onClick:y,children:"Reset"}),i.jsx(Q,{onClick:x,children:"Apply"})]})]})]})},gb="https://bkynymyhbfrhvwxqqttk.supabase.co",Ioe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",Es=kF(gb,Ioe,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Roe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co"},ed=Roe??{},Uf=((ed==null?void 0:ed.VITE_WEBHOOK_BASE_URL)||"https://primary-production-376c.up.railway.app/webhook").replace(/\/$/,""),Moe=(ed==null?void 0:ed.VITE_WEBHOOK_PROXY_SLUG)||"proxy-n8n",Fw=`${gb}/functions/v1/${Moe}`.replace(/\/$/,""),Xr="route:",UT=e=>e.startsWith("/")?e:`/${e}`,ch=e=>e.startsWith(Xr),_g=e=>ch(e)?e.slice(Xr.length):null,Yn={BASE_URL:Uf,LEGACY_BASE_URL:Uf,PROXY_BASE_URL:Fw,ROUTE_PREFIX:Xr,ENDPOINTS:{WHATSAPP:{GET_LOGIN_QR:`${Xr}session.get_login_qr`,GET_SESSIONS:"/get_sessions",LOGOUT_SESSION:`${Xr}session.logout`,CREATE_PLATFORM:"/whatsapp/create-platform",CREATE_SESSION:`${Xr}session.create`,DISCONNECT_SESSION:"/disconnect_session",DELETE_SESSION:`${Xr}session.delete`},TELEGRAM:{CREATE_PLATFORM:`${Xr}telegram.create_platform`,SEND_MESSAGE:`${Xr}telegram.send_message`,DELETE_WEBHOOK:`${Xr}telegram.delete_webhook`,VERIFY_TOKEN:`${gb}/functions/v1/telegram-verify-token`},AI_AGENT:{CHAT_SETTINGS:`${Xr}chat.settings`,CHAT_TEST:`${Xr}chat.test`},KNOWLEDGE:{FILE_UPLOAD:"/knowledge/file-upload-dev",FILE_DELETE:"/knowledge/file-delete-dev"},MESSAGE:{DEFAULT:"/send-message",SEND_MESSAGE:"/send-message",WHATSAPP_SEND_MESSAGE:`${Xr}whatsapp.send_message`,TELEGRAM_SEND_MESSAGE:`${Xr}telegram.send_message`,WEB_SEND_MESSAGE:`${Xr}web.send_message`}},buildUrl:(e,t={})=>{if(!e)throw new Error("Endpoint must be provided");if(e.startsWith("http"))return e;if(!t.forceLegacy&&ch(e)){const n=_g(e);if(!n)throw new Error("Invalid proxy route key");return`${Fw}/${n}`}if(t.forceLegacy&&ch(e)){const n=_g(e);if(!n)throw new Error("Invalid proxy route key");return`${Uf}/${n}`}return`${Uf}${UT(e)}`},buildTestUrl:e=>{if(ch(e)){const n=_g(e);if(!n)throw new Error("Invalid proxy route key");return`${Fw}/${n}`}return`${Uf.replace("/webhook","/webhook-test")}${UT(e)}`},isProxyEndpoint:ch,extractRouteKey:_g},vU={telegram:Yn.ENDPOINTS.MESSAGE.TELEGRAM_SEND_MESSAGE,whatsapp:Yn.ENDPOINTS.MESSAGE.WHATSAPP_SEND_MESSAGE,web:Yn.ENDPOINTS.MESSAGE.WEB_SEND_MESSAGE},xU=e=>{const t=(e||"").toLowerCase();return t==="wa"||t==="waha"||t==="whatsapp_cloud"?"whatsapp":t==="tg"||t==="tele"?"telegram":t},Bw=e=>{const t=xU(e),n=vU[t]||Yn.ENDPOINTS.MESSAGE.DEFAULT;Yn.ENDPOINTS.MESSAGE.SEND_MESSAGE=n},Doe=e=>{const t=xU(e);return vU[t]||Yn.ENDPOINTS.MESSAGE.DEFAULT},$oe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co"},Loe=()=>{const e=$oe??{};return(e==null?void 0:e.VITE_SUPABASE_ANON_KEY)??null};async function wa(e,t={},n={}){const{forceLegacy:r=!1,skipAuth:a=!1}=n,s=Yn.buildUrl(e,{forceLegacy:r}),o=new Headers(t.headers),l=s.startsWith(gb)&&s.includes("/functions/v1/");if((!r&&Yn.isProxyEndpoint(e)||l)&&!a&&!o.has("Authorization")){const{data:{session:u}}=await ne.auth.getSession(),f=u==null?void 0:u.access_token;if(!f)throw new Error("Unable to call webhook without an active Supabase session");o.set("Authorization",`Bearer ${f}`);const d=Loe();d&&!o.has("apikey")&&o.set("apikey",d)}return fetch(s,{...t,headers:o})}let zT=0;const Foe=1e3,kg=(e="incoming")=>{try{if(!(localStorage.getItem("audioNotifications")!=="false")||document.visibilityState!=="visible")return;const n=Date.now();if(n-zT<Foe)return;zT=n;const r=new Audio;e==="incoming"?r.src="/tones/mixkit-message-pop-alert-2354.mp3":r.src="/tones/mixkit-long-pop-2358.wav",r.volume=.7,r.play().catch(()=>{})}catch{}},Boe=()=>{const[e,t]=p.useState([]),[n,r]=p.useState([]),[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState(null),f=p.useRef({}),[d,h]=p.useState({}),m=p.useRef(null),g=(E=400)=>{try{m.current&&(clearTimeout(m.current),m.current=null)}catch{}m.current=window.setTimeout(()=>{document.visibilityState==="visible"&&(a||x())},E)},v=(E,O)=>{t(M=>{const R=M.map(L=>L.id===E?{...L,last_message_preview:((O==null?void 0:O.body)||"").toString().replace(/\s+/g," ").trim()||"",last_message_direction:(O==null?void 0:O.direction)??null,last_message_role:(O==null?void 0:O.role)??null,last_msg_at:(O==null?void 0:O.created_at)||L.last_msg_at,unreplied:(O==null?void 0:O.direction)==="in"||(O==null?void 0:O.role)==="user"}:L).sort((L,$)=>{const C=new Date(L.last_msg_at??L.created_at??0).getTime();return new Date($.last_msg_at??$.created_at??0).getTime()-C});return console.log("Re-sorted conversations after message update"),R})},x=async E=>{try{s(!0),l(null),await hm();const O=E??f.current;E&&(f.current=E,h(E));let M=Nt.from("threads").select(`
          *,
          contacts(name, phone, email),
          channels(display_name, type, provider, external_id, logo_url, profile_photo_url),
          messages(id, body, role, direction, created_at, seq)
        `).order("last_msg_at",{ascending:!1}).order("created_at",{foreignTable:"messages",ascending:!1}).limit(1,{foreignTable:"messages"});const{dateRange:B,status:R,agent:L,resolvedBy:$,inbox:C,channelType:U,pipelineStatus:D}=O;R&&R!=="all"&&R!==""&&(M=M.eq("status",R)),L&&L!=="all"&&L!==""&&(M=M.eq("assignee_user_id",L)),$&&$!=="all"&&$!==""&&(M=M.eq("resolved_by_user_id",$)),C&&C!=="all"&&C!==""&&(M=M.eq("channels.provider",C)),U&&U!=="all"&&U!==""&&(M=M.eq("channels.type",U)),D&&D!=="all"&&D!==""&&(M=M.eq("pipeline_status",D));const P=new Promise((re,J)=>{const ve=setTimeout(()=>{clearTimeout(ve),J(new Error("timeout"))},8e3)}),{data:H,error:G}=await Promise.race([M,P]);if(G)throw G;const Y=Array.from(new Set((H||[]).flatMap(re=>[re.assigned_by_user_id,re.assignee_user_id,re.resolved_by_user_id]).filter(Boolean)));let W={};if(Y.length>0){const{data:re,error:J}=await Nt.from("users_profile").select("user_id, display_name").in("user_id",Y);if(J)throw J;W=Object.fromEntries((re||[]).map(ve=>[ve.user_id,ve.display_name||""]))}let X=(H||[]).map(re=>{var oe,be,Se,Le,ge,We,dt,yt,Et,te,me,Fe,He,Ue;const J=Array.isArray(re.messages)&&re.messages.length>0?re.messages[0]:null,ve=((J==null?void 0:J.body)||"").toString().replace(/\s+/g," ").trim(),z=(J==null?void 0:J.direction)??null,q=(J==null?void 0:J.role)??null,ie=z==="in"||q==="user";return{...re,contact_name:((oe=re.contacts)==null?void 0:oe.name)||"Unknown Contact",contact_phone:((be=re.contacts)==null?void 0:be.phone)||"",contact_email:((Se=re.contacts)==null?void 0:Se.email)||"",channel_name:((Le=re.channels)==null?void 0:Le.display_name)||"Unknown Channel",channel_type:((ge=re.channels)==null?void 0:ge.type)||"web",channel_provider:((We=re.channels)==null?void 0:We.provider)||void 0,channel:{provider:(dt=re.channels)==null?void 0:dt.provider,type:(yt=re.channels)==null?void 0:yt.type,display_name:(Et=re.channels)==null?void 0:Et.display_name,external_id:(te=re.channels)==null?void 0:te.external_id,logo_url:((me=re.channels)==null?void 0:me.logo_url)||null,profile_photo_url:((Fe=re.channels)==null?void 0:Fe.profile_photo_url)||null},channel_logo_url:((He=re.channels)==null?void 0:He.logo_url)||((Ue=re.channels)==null?void 0:Ue.profile_photo_url)||null,last_message_preview:ve||"",last_message_direction:z,last_message_role:q,last_msg_at:(J==null?void 0:J.created_at)||re.last_msg_at,message_count:0,assigned:!!re.assignee_user_id,assigned_by_name:re.assigned_by_user_id&&W[re.assigned_by_user_id]||"",assignee_name:re.assignee_user_id&&W[re.assignee_user_id]||"",resolved_by_name:re.resolved_by_user_id&&W[re.resolved_by_user_id]||"",unreplied:ie}});if(B!=null&&B.from){const re=Ac(B.from).getTime();X=X.filter(J=>new Date(J.last_msg_at).getTime()>=re)}if(B!=null&&B.to){const re=Fre(B.to).getTime();X=X.filter(J=>new Date(J.last_msg_at).getTime()<=re)}const ae=X.sort((re,J)=>{const ve=new Date(re.last_msg_at??re.created_at??0).getTime();return new Date(J.last_msg_at??J.created_at??0).getTime()-ve});t(ae)}catch(O){console.error("Error fetching conversations:",O),l(O instanceof Error?O.message:"Failed to fetch conversations")}finally{s(!1)}},y=async E=>{var O;try{l(null);const{data:M,error:B}=await ne.from("messages").select(`
          id,
          thread_id,
          direction,
          role,
          type,
          body,
          payload,
          actor_kind,
          actor_id,
          seq,
          in_reply_to,
          edited_at,
          edit_reason,
          created_at
        `).eq("thread_id",E).order("seq",{ascending:!0});if(B)throw B;const{data:R}=await ne.from("threads").select(`
          contacts(name, phone, email)
        `).eq("id",E).maybeSingle(),L=((O=R==null?void 0:R.contacts)==null?void 0:O.name)||"Unknown Contact",$=(M||[]).map(C=>{var U;return{...C,contact_name:L,contact_avatar:((U=L[0])==null?void 0:U.toUpperCase())||"U"}});r($),u(E)}catch(M){console.error("Error fetching messages:",M),l(M instanceof Error?M.message:"Failed to fetch messages")}},b=async(E,O,M="assistant")=>{var B,R;try{l(null);const{data:L,error:$}=await ne.from("threads").select("channel_id, contact_id, channels(provider)").eq("id",E).single();if($)throw $;const C={thread_id:E,direction:"out",role:M,type:"text",body:O,payload:{},actor_kind:"agent",actor_id:null},D={id:`tmp_${Math.random().toString(36).slice(2)}`,thread_id:E,direction:"out",role:M,type:"text",body:O,payload:{},actor_kind:"agent",actor_id:null,seq:0,in_reply_to:null,edited_at:null,edit_reason:null,created_at:new Date().toISOString(),contact_name:"",contact_avatar:"A",_status:"pending"};r(W=>[...W,D]);const{data:P,error:H}=await ne.from("messages").insert([C]).select().single();if(H)throw H;const{data:G,error:Y}=await ne.from("contacts").select("phone, external_id").eq("id",L.contact_id).single();Y&&console.warn("Error fetching contact details:",Y);try{const W=e.find(J=>J.id===E),ee=((B=W==null?void 0:W.channel)==null?void 0:B.provider)||((R=L==null?void 0:L.channels)==null?void 0:R.provider),X=Doe(ee),ae={channel_id:L.channel_id,contact_id:L.contact_id,contact_phone:(G==null?void 0:G.phone)||null,external_id:(G==null?void 0:G.external_id)||null,text:O,type:"text",direction:"out",role:M},re=await wa(X,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ae)});re.ok||console.warn("Webhook call failed:",re.status,re.statusText)}catch(W){console.error("Error calling webhook:",W)}await y(E),v(E,{body:O,direction:"out",role:M,created_at:new Date().toISOString()});try{await Wt({action:"message.send",resource:"message",resourceId:(P==null?void 0:P.id)??null,context:{thread_id:E,role:M}})}catch{}return P}catch(L){throw console.error("Error sending message:",L),l(L instanceof Error?L.message:"Failed to send message"),r($=>{const C=[...$];for(let U=C.length-1;U>=0;U--)if(C[U]._status==="pending"){C[U]._status="error";break}return C}),L}},w=async(E,O)=>{var M;try{l(null);const B={org_id:((M=(await ne.auth.getUser()).data.user)==null?void 0:M.id)||"00000000-0000-0000-0000-000000000001",contact_id:E,channel_id:O,status:"open",assignee_user_id:null},{data:R,error:L}=await ne.from("threads").insert([B]).select().single();if(L)throw L;await x();try{await Wt({action:"thread.create",resource:"thread",resourceId:(R==null?void 0:R.id)??null,context:{contact_id:E,channel_id:O}})}catch{}return R}catch(B){throw console.error("Error creating conversation:",B),l(B instanceof Error?B.message:"Failed to create conversation"),B}},j=async(E,O)=>{try{l(null);const{error:M}=await ne.from("threads").update({status:O}).eq("id",E);if(M)throw M;await x();try{await Wt({action:"thread.update_status",resource:"thread",resourceId:E,context:{status:O}})}catch{}}catch(M){throw console.error("Error updating thread status:",M),l(M instanceof Error?M.message:"Failed to update thread status"),M}},k=async(E,O)=>{var M,B,R;try{l(null);const{error:L}=await ne.rpc("takeover_thread",{p_thread_id:E});L&&console.warn("takeover_thread RPC failed; will attempt direct update",L);const{data:$}=await ne.auth.getUser(),C=((M=$==null?void 0:$.user)==null?void 0:M.id)||null;try{const{data:U}=await ne.from("threads").select("assignee_user_id").eq("id",E).single();if(!!!(U!=null&&U.assignee_user_id)&&C){const{error:P}=await ne.from("threads").update({assignee_user_id:C,assigned_by_user_id:C,assigned_at:new Date().toISOString(),handover_reason:"other:manual_takeover",ai_access_enabled:!1}).eq("id",E);P&&console.warn("Fallback assignment update failed",P)}}catch(U){console.warn("Failed verifying assignment state",U)}try{await Nt.from("threads").update({ai_access_enabled:!1}).eq("id",E)}catch{}try{const{data:U}=await ne.auth.getUser(),D=((B=U==null?void 0:U.user)==null?void 0:B.id)||null;let P=null;if(D){const{data:H}=await ne.from("users_profile").select("display_name").eq("user_id",D).single();P=(H==null?void 0:H.display_name)||null}await Nt.from("messages").insert([{thread_id:E,direction:null,role:"system",type:"event",body:`Conversation taken over by ${P||((R=U==null?void 0:U.user)==null?void 0:R.email)||"agent"}.`,payload:{event:"takeover",user_id:D}}])}catch(U){console.warn("Failed to insert takeover event message",U)}await x(),await y(E);try{await Wt({action:"thread.assign",resource:"thread",resourceId:E,context:{assignee_user_id:O}})}catch{}}catch(L){throw console.error("Error assigning thread:",L),l(L instanceof Error?L.message:"Failed to assign thread"),L}},_=async(E,O)=>{var M,B;try{l(null);const{data:R}=await ne.auth.getUser(),L=((M=R==null?void 0:R.user)==null?void 0:M.id)||null,$=new Date().toISOString(),{error:C}=await ne.from("threads").update({assignee_user_id:O,assigned_by_user_id:L,assigned_at:$,handover_reason:"other:manual_assign",ai_access_enabled:!1}).eq("id",E);if(C)throw C;try{const U=[L,O].filter(Boolean);let D={};if(U.length>0){const{data:G}=await ne.from("users_profile").select("user_id, display_name").in("user_id",U);D=Object.fromEntries((G||[]).map(Y=>[String(Y.user_id),String(Y.display_name||"")]))}const P=L&&(D[L]||((B=R==null?void 0:R.user)==null?void 0:B.email))||"agent",H=D[O]||"agent";await Nt.from("messages").insert([{thread_id:E,direction:null,role:"system",type:"event",body:`Conversation assigned to ${H} by ${P}.`,payload:{event:"assign",assigned_to:O,assigned_by:L}}])}catch(U){console.warn("Failed to insert assign event message",U)}await x(),await y(E);try{await Wt({action:"thread.assign",resource:"thread",resourceId:E,context:{assignee_user_id:O}})}catch{}}catch(R){throw console.error("Error assigning thread to user:",R),l(R instanceof Error?R.message:"Failed to assign thread"),R}},S=async(E,O)=>{try{l(null);const{error:M}=await ne.from("thread_collaborators").insert([{thread_id:E,user_id:O}]);if(M)throw M;try{await Wt({action:"thread.add_participant",resource:"thread",resourceId:E,context:{user_id:O}})}catch{}}catch(M){throw console.error("Error adding thread participant:",M),l(M instanceof Error?M.message:"Failed to add thread participant"),M}},A=async(E,O)=>{try{l(null);const{error:M}=await ne.from("thread_collaborators").delete().eq("thread_id",E).eq("user_id",O);if(M)throw M;try{await Wt({action:"thread.remove_participant",resource:"thread",resourceId:E,context:{user_id:O}})}catch{}}catch(M){throw console.error("Error removing thread participant:",M),l(M instanceof Error?M.message:"Failed to remove thread participant"),M}},N=async(E,O)=>{try{l(null);const{error:M}=await ne.from("thread_labels").insert([{thread_id:E,label_id:O}]);if(M)throw M;try{await Wt({action:"thread.add_label",resource:"thread",resourceId:E,context:{label_id:O}})}catch{}}catch(M){throw console.error("Error adding thread label:",M),l(M instanceof Error?M.message:"Failed to add thread label"),M}},T=async(E,O)=>{try{l(null);const{error:M}=await ne.from("thread_labels").delete().eq("thread_id",E).eq("label_id",O);if(M)throw M;try{await Wt({action:"thread.remove_label",resource:"thread",resourceId:E,context:{label_id:O}})}catch{}}catch(M){throw console.error("Error removing thread label:",M),l(M instanceof Error?M.message:"Failed to remove thread label"),M}},I=async E=>{try{l(null);const{error:O}=await ne.from("threads").delete().eq("id",E);if(O)throw O;Bs.invalidatePattern("^query:threads"),t(M=>M.filter(R=>R.id!==E)),c===E&&(u(null),r([]));try{await Wt({action:"thread.delete",resource:"thread",resourceId:E})}catch{}await x()}catch(O){throw console.error("Error deleting thread:",O),l(O instanceof Error?O.message:"Failed to delete conversation"),O}};p.useEffect(()=>{g(10)},[]),p.useEffect(()=>{const E=()=>{try{t([]),r([]),u(null),l(null)}catch{}try{g(50)}catch{}};try{window.addEventListener(sm,E)}catch{}return()=>{try{window.removeEventListener(sm,E)}catch{}}},[]);const F=async()=>{try{const{data:E,error:O}=await Nt.rpc("check_and_auto_resolve_threads");if(O){console.error("Auto-resolve check failed:",O);return}E&&E.length>0&&x()}catch(E){console.error("Auto-resolve check error:",E)}};return p.useEffect(()=>{const E=setInterval(()=>{document.visibilityState==="visible"&&F()},3e4);return()=>clearInterval(E)},[]),p.useEffect(()=>{const E=ne.channel("threads-realtime").on("postgres_changes",{event:"*",schema:"public",table:"threads"},()=>{document.visibilityState==="visible"&&g(200)}).subscribe();return()=>{try{ne.removeChannel(E)}catch{}}},[]),p.useEffect(()=>{const E=ne.channel("messages-realtime-for-convlist").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},O=>{const M=O.new;M&&M.direction==="in"&&document.visibilityState==="visible"?(kg("incoming"),v(M.thread_id,M),g(100),F()):M&&(M.role==="system"||M.type==="event")&&document.visibilityState==="visible"?(kg("incoming"),v(M.thread_id,M),g(200)):M&&M.direction==="out"&&(M.role==="agent"||M.role==="assistant")&&document.visibilityState==="visible"?(v(M.thread_id,M),g(200)):M&&M.role==="agent"&&M.direction==="out"&&document.visibilityState==="visible"&&F()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},()=>{document.visibilityState==="visible"&&g(500)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages"},()=>{document.visibilityState==="visible"&&g(300)}).subscribe();return()=>{try{ne.removeChannel(E)}catch{}try{m.current&&(clearTimeout(m.current),m.current=null)}catch{}}},[]),p.useEffect(()=>{if(!c)return;const E=setInterval(()=>{y(c)},3e4),O=ne.channel(`messages-${c}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},M=>{const B=M.new;B&&B.direction==="in"&&kg("incoming"),y(c)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},()=>{y(c)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},()=>{y(c)}).subscribe(M=>{M==="CHANNEL_ERROR"&&(console.error("Error subscribing to messages for thread:",c),setTimeout(()=>{y(c)},1e3))});return()=>{clearInterval(E);try{ne.removeChannel(O)}catch{}}},[c]),{conversations:e,messages:n,loading:a,error:o,selectedThreadId:c,fetchConversations:x,fetchMessages:y,sendMessage:b,refreshMessages:()=>{c&&y(c)},enableAudioNotifications:()=>{localStorage.setItem("audioNotifications","true")},disableAudioNotifications:()=>{localStorage.setItem("audioNotifications","false")},testAudioNotification:()=>{kg("incoming")},createConversation:w,updateThreadStatus:j,assignThread:k,assignThreadToUser:_,addThreadParticipant:S,removeThreadParticipant:A,addThreadLabel:N,removeThreadLabel:T,deleteThread:I,checkAutoResolve:F,activeFilters:d}},lC=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),[o,l]=p.useState(0),c=p.useRef({page:1,limit:100,searchQuery:void 0,filters:void 0}),u=async(g=1,v=100,x,y)=>{var b,w,j,k;try{c.current={page:g,limit:v,searchQuery:x,filters:y},r(!0),s(null);const _=!!(y!=null&&y.chatStatus||(b=y==null?void 0:y.dateRange)!=null&&b.from||(w=y==null?void 0:y.dateRange)!=null&&w.to||(y==null?void 0:y.handledBy)==="assigned");let S=Nt.from("contacts").select(`
          id, org_id, name, email, phone, locale, notes, created_at,
          threads${_?"!inner":""}(
            id, status, created_at, assignee_user_id,
            channels(display_name, provider, type)
          )
          `,{count:"exact"}).order("created_at",{ascending:!1});if(x&&(S=S.or(`name.ilike.%${x}%,phone.ilike.%${x}%,email.ilike.%${x}%`)),y&&(y.chatStatus&&(S=S.eq("threads.status",y.chatStatus)),y.handledBy==="assigned"&&(S=S.not("threads.assignee_user_id","is",null)),(j=y.dateRange)!=null&&j.from&&(S=S.gte("threads.created_at",y.dateRange.from)),(k=y.dateRange)!=null&&k.to)){const O=y.dateRange.to.length>10?y.dateRange.to:`${y.dateRange.to}T23:59:59.999Z`;S=S.lte("threads.created_at",O)}const A=(g-1)*v,N=A+v-1;S=S.range(A,N),S=S.order("created_at",{foreignTable:"threads",ascending:!1}).limit(1,{foreignTable:"threads"});const{data:T,error:I,count:F}=await S;if(I)throw I;let E=(T||[]).map(O=>{var L,$,C;const M=(O.threads||[])[0]||null,B=((L=M==null?void 0:M.channels)==null?void 0:L.display_name)||"",R=M!=null&&M.created_at?new Date(M.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(",",""):"";return{id:O.id,org_id:O.org_id,name:O.name,email:O.email,phone:O.phone,locale:O.locale,notes:O.notes,created_at:O.created_at,labelNames:"",inbox:B,channelProvider:(($=M==null?void 0:M.channels)==null?void 0:$.provider)||null,channelType:((C=M==null?void 0:M.channels)==null?void 0:C.type)||null,chatStatus:(M==null?void 0:M.status)||"",chatCreatedAt:R,chatCreatedAtISO:(M==null?void 0:M.created_at)||null,handledBy:M!=null&&M.assignee_user_id?"assigned":"unassigned"}});y&&(E=E.filter(O=>{var M,B;if(y.chatStatus&&O.chatStatus!==y.chatStatus||y.handledBy&&O.handledBy!==y.handledBy)return!1;if((M=y.dateRange)!=null&&M.from||(B=y.dateRange)!=null&&B.to){const R=new Date(O.created_at),L=y.dateRange.from?new Date(y.dateRange.from):null,$=y.dateRange.to?new Date(y.dateRange.to):null;if(L&&R<L||$&&R>$)return!1}return!0})),t(E),l(F||0)}catch(_){console.error("Error fetching contacts:",_),s(_ instanceof Error?_.message:"Failed to fetch contacts")}finally{r(!1)}},f=async g=>{try{s(null);const{data:v,error:x}=await Nt.from("contacts").insert([{...g,org_id:"00000000-0000-0000-0000-000000000001"}]).select().single();if(x)throw x;await u();try{await Wt({action:"contact.create",resource:"contact",resourceId:(v==null?void 0:v.id)??null,context:g})}catch{}return v}catch(v){throw console.error("Error creating contact:",v),s(v instanceof Error?v.message:"Failed to create contact"),v}},d=async(g,v)=>{try{s(null);const{error:x}=await Nt.from("contacts").update(v).eq("id",g);if(x)throw x;await u();try{await Wt({action:"contact.update",resource:"contact",resourceId:g,context:v})}catch{}}catch(x){throw console.error("Error updating contact:",x),s(x instanceof Error?x.message:"Failed to update contact"),x}},h=async g=>{try{s(null);const{error:v}=await ne.from("contacts").delete().eq("id",g);if(v)throw v;Bs.invalidatePattern("^query:contacts"),await u();try{await Wt({action:"contact.delete",resource:"contact",resourceId:g})}catch{}}catch(v){throw console.error("Error deleting contact:",v),s(v instanceof Error?v.message:"Failed to delete contact"),v}},m=async g=>{try{s(null);const{error:v}=await ne.from("contacts").delete().in("id",g);if(v)throw v;Bs.invalidatePattern("^query:contacts"),await u();try{await Wt({action:"contact.bulk_delete",resource:"contact",context:{ids:g}})}catch{}}catch(v){throw console.error("Error deleting contacts:",v),s(v instanceof Error?v.message:"Failed to delete contacts"),v}};return p.useEffect(()=>{u()},[]),p.useEffect(()=>{const g=()=>{try{t([]),l(0),s(null),r(!0)}catch{}try{const{page:v,limit:x,searchQuery:y,filters:b}=c.current;u(v,x,y,b)}catch{}};try{window.addEventListener(sm,g)}catch{}return()=>{try{window.removeEventListener(sm,g)}catch{}}},[]),{contacts:e,loading:n,error:a,totalCount:o,fetchContacts:u,createContact:f,updateContact:d,deleteContact:h,deleteMultipleContacts:m}},nr={MASTER_AGENT:"master_agent",SUPER_AGENT:"super_agent",AGENT:"agent"},Kt=p.forwardRef(({permission:e,permissions:t=[],requireAll:n=!1,fallback:r=null,children:a},s)=>{const{hasAnyPermission:o,hasAllPermissions:l,loading:c}=jr();if(c)return null;const u=e?[e,...t]:t,f=n?l(u):o(u),d=!Array.isArray(a)&&typeof a!="string"&&typeof a!="number";return f?d?i.jsx(VS,{ref:s,children:a}):i.jsx(i.Fragment,{children:a}):i.jsx(i.Fragment,{children:r})});var yU="AlertDialog",[Uoe,g3e]=_r(yU,[v5]),ho=v5(),bU=e=>{const{__scopeAlertDialog:t,...n}=e,r=ho(t);return i.jsx(DN,{...r,...n,modal:!0})};bU.displayName=yU;var zoe="AlertDialogTrigger",wU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ho(n);return i.jsx(I5,{...a,...r,ref:t})});wU.displayName=zoe;var qoe="AlertDialogPortal",jU=e=>{const{__scopeAlertDialog:t,...n}=e,r=ho(t);return i.jsx($N,{...r,...n})};jU.displayName=qoe;var Woe="AlertDialogOverlay",_U=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ho(n);return i.jsx(ab,{...a,...r,ref:t})});_U.displayName=Woe;var td="AlertDialogContent",[Hoe,Voe]=Uoe(td),Koe=fL("AlertDialogContent"),kU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,s=ho(n),o=p.useRef(null),l=St(t,o),c=p.useRef(null);return i.jsx(fre,{contentName:td,titleName:SU,docsSlug:"alert-dialog",children:i.jsx(Hoe,{scope:n,cancelRef:c,children:i.jsxs(ib,{role:"alertdialog",...s,...a,ref:l,onOpenAutoFocus:Ee(a.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(Koe,{children:r}),i.jsx(Yoe,{contentRef:o})]})})})});kU.displayName=td;var SU="AlertDialogTitle",NU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ho(n);return i.jsx(LN,{...a,...r,ref:t})});NU.displayName=SU;var CU="AlertDialogDescription",AU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ho(n);return i.jsx(FN,{...a,...r,ref:t})});AU.displayName=CU;var Goe="AlertDialogAction",EU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ho(n);return i.jsx(BN,{...a,...r,ref:t})});EU.displayName=Goe;var PU="AlertDialogCancel",TU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=Voe(PU,n),s=ho(n),o=St(t,a);return i.jsx(BN,{...s,...r,ref:o})});TU.displayName=PU;var Yoe=({contentRef:e})=>{const t=`\`${td}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${td}\` by passing a \`${CU}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${td}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Xoe=bU,Joe=wU,Qoe=jU,OU=_U,IU=kU,RU=EU,MU=TU,DU=NU,$U=AU;const vb=Xoe,Zoe=Joe,ele=Qoe,LU=p.forwardRef(({className:e,...t},n)=>i.jsx(OU,{className:ye("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));LU.displayName=OU.displayName;const Cp=p.forwardRef(({className:e,...t},n)=>i.jsxs(ele,{children:[i.jsx(LU,{}),i.jsx(IU,{ref:n,className:ye("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Cp.displayName=IU.displayName;const Ap=({className:e,...t})=>i.jsx("div",{className:ye("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ap.displayName="AlertDialogHeader";const Ep=({className:e,...t})=>i.jsx("div",{className:ye("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Ep.displayName="AlertDialogFooter";const Pp=p.forwardRef(({className:e,...t},n)=>i.jsx(DU,{ref:n,className:ye("text-lg font-semibold",e),...t}));Pp.displayName=DU.displayName;const Tp=p.forwardRef(({className:e,...t},n)=>i.jsx($U,{ref:n,className:ye("text-sm text-muted-foreground",e),...t}));Tp.displayName=$U.displayName;const Op=p.forwardRef(({className:e,...t},n)=>i.jsx(RU,{ref:n,className:ye(kd(),e),...t}));Op.displayName=RU.displayName;const Ip=p.forwardRef(({className:e,...t},n)=>i.jsx(MU,{ref:n,className:ye(kd({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Ip.displayName=MU.displayName;function tle({options:e,value:t,onChange:n,placeholder:r="Select...",searchPlaceholder:a="Search...",className:s,disabled:o=!1}){const[l,c]=p.useState(!1),u=p.useMemo(()=>{var f;return(f=e.find(d=>d.value===t))==null?void 0:f.label},[e,t]);return i.jsxs(os,{open:l,onOpenChange:c,children:[i.jsx(ls,{asChild:!0,children:i.jsxs(Q,{variant:"outline",role:"combobox","aria-expanded":l,className:ye("w-full justify-between font-normal",!t&&"text-muted-foreground",s),disabled:o,children:[i.jsx("span",{className:"truncate",children:t?u:r}),i.jsx(UL,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(Mi,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:i.jsxs(Oc,{children:[i.jsx(Ic,{placeholder:a}),i.jsxs(pb,{children:[i.jsx(Rc,{children:"No results found."}),i.jsx(Mc,{children:e.map(f=>i.jsxs(Dc,{value:f.label,onSelect:()=>{n(f.value),c(!1)},children:[i.jsx(Cy,{className:ye("mr-2 h-4 w-4",t===f.value?"opacity-100":"opacity-0")}),f.label]},f.value))})]})]})})]})}function nle({options:e,value:t=[],onChange:n,onAdd:r,onRemove:a,placeholder:s="Select...",searchPlaceholder:o="Search...",className:l,disabled:c=!1}){const[u,f]=p.useState(!1),d=p.useMemo(()=>t.map(v=>e.find(x=>x.value===v)||{value:v,label:v}),[t,e]),h=p.useMemo(()=>e.filter(v=>!t.includes(v.value)),[e,t]),m=v=>{if(t.includes(v))return;const x=[...t,v];n(x),r==null||r(v),f(!1)},g=v=>{const x=t.filter(y=>y!==v);n(x),a==null||a(v)};return i.jsxs("div",{className:ye("flex flex-col gap-2",l),children:[d.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-1",children:d.map(v=>i.jsxs(Ot,{variant:"secondary",className:"pr-1 py-1 flex items-center gap-1",children:[v.label,i.jsxs("button",{type:"button",className:"ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2 hover:bg-muted",onClick:x=>{x.preventDefault(),g(v.value)},disabled:c,children:[i.jsx(cp,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"}),i.jsxs("span",{className:"sr-only",children:["Remove ",v.label]})]})]},v.value))}),i.jsxs(os,{open:u,onOpenChange:f,children:[i.jsx(ls,{asChild:!0,children:i.jsxs(Q,{variant:"outline",role:"combobox","aria-expanded":u,className:"w-full justify-between font-normal text-muted-foreground",disabled:c,children:[i.jsx("span",{children:s}),i.jsx(UL,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(Mi,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:i.jsxs(Oc,{children:[i.jsx(Ic,{placeholder:o}),i.jsxs(pb,{children:[i.jsx(Rc,{children:"No results found."}),i.jsx(Mc,{children:h.map(v=>i.jsx(Dc,{value:v.label,onSelect:()=>m(v.value),children:v.label},v.value))})]})]})})]})]})}const rle=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ale=({message:e,isLastMessage:t,highlighted:n=!1,matches:r=[],activeMatchOrder:a=-1})=>{const s=e.role==="assistant"||e.role==="agent"||e.direction==="out",o=e.role==="system"||e.type==="event"||e.type==="note",l=e.role==="assistant",c=e.role==="agent",u=()=>{const f=e.body||"";if(!f||r.length===0)return f;const d=[...r].sort((g,v)=>g.start-v.start),h=[];let m=0;return d.forEach(({start:g,length:v},x)=>{g>m&&h.push(f.slice(m,g));const y=f.slice(g,g+v);h.push({type:"highlight",content:y,index:x}),m=g+v}),m<f.length&&h.push(f.slice(m)),h.map((g,v)=>{if(typeof g=="string")return i.jsx("span",{children:g},`seg-${v}`);const x=g.index===a;return i.jsx("mark",{className:`rounded-sm px-0.5 text-current text-black ${x?"bg-orange-300":"bg-yellow-200"}`,children:g.content},`highlight-${g.index}`)})};return o?i.jsx("div",{className:"flex justify-center my-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:e.body||"System event"}),i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),i.jsx("span",{children:""}),i.jsx("span",{children:"system"})]})]})}):i.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} mb-3`,children:i.jsxs("div",{className:`flex ${s?"flex-row-reverse":"flex-row"} items-end gap-2 max-w-[75%]`,children:[i.jsxs(zr,{className:"h-8 w-8",children:[i.jsx(Us,{src:""}),i.jsx(qr,{className:"text-xs",children:s?"A":e.contact_avatar})]}),i.jsxs("div",{className:`rounded-lg px-3 py-2 text-sm shadow-sm ${c?"bg-blue-600 text-white":l?"bg-blue-100 text-blue-900":"bg-muted text-foreground"} ${n?"ring-2 ring-yellow-300":""}`,children:[i.jsx("p",{className:"whitespace-pre-wrap",children:u()}),i.jsxs("div",{className:`mt-1 flex items-center gap-1 text-[10px] ${c?"text-blue-100":l?"text-blue-700":"text-muted-foreground"}`,children:[i.jsx("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),s&&(e._status==="pending"?i.jsx(Gt,{className:"h-3 w-3 animate-spin","aria-label":"pending"}):t?i.jsx(UV,{className:"h-3 w-3","aria-label":"sent"}):null)]})]})]})})};function ile(){var Ne,Re,et,pt;const[e,t]=vN(),[n,r]=p.useState(""),[a,s]=p.useState(""),[o,l]=p.useState(null),[c,u]=p.useState("assigned");p.useState(!1),p.useState(!1);const[f,d]=p.useState(""),[h,m]=p.useState(null),[g,v]=p.useState(0),x=p.useRef(null),y=p.useRef({}),b=f.trim(),{conversations:w,messages:j,loading:k,error:_,fetchConversations:S,fetchMessages:A,sendMessage:N,createConversation:T,addThreadParticipant:I,removeThreadParticipant:F,addThreadLabel:E,removeThreadLabel:O,assignThread:M,assignThreadToUser:B,deleteThread:R}=Boe();lC();const{agents:L}=El(),{user:$}=Vr(),{hasRole:C,hasPermission:U}=jr(),[D,P]=p.useState(!1),[H,G]=p.useState(null),[Y,W]=p.useState(!1),ee=U("contacts.delete"),[X,ae]=p.useState([]),[re,J]=p.useState(null),[ve,z]=p.useState([]),[q,ie]=p.useState({}),oe=p.useMemo(()=>L.map(Z=>({value:Z.user_id,label:Z.display_name||Z.email||"Unknown Agent"})),[L]),be=p.useMemo(()=>Object.fromEntries(L.map(Z=>[String(Z.user_id),String(Z.display_name||Z.email||"Unknown")])),[L]),Se=p.useMemo(()=>Z=>be[Z]||q[Z]||Z,[be,q]),Le=p.useMemo(()=>{if(!o)return null;const Z=w.find(ke=>ke.id===o);return(Z==null?void 0:Z.assignee_user_id)??null},[o,w]),ge=p.useMemo(()=>o?(re==null?void 0:re.threadId)===o?re.userId:Le:null,[o,re,Le]);p.useEffect(()=>{if(!o){J(null);return}(re==null?void 0:re.threadId)===o&&Le===re.userId&&J(null)},[o,Le,re]),p.useEffect(()=>{if(!ge){z([]);return}let Z=!0;return(async()=>{const{data:st,error:nt}=await Nt.from("super_agent_members").select("agent_user_id").eq("super_agent_id",ge);if(Z){if(nt){console.warn("Failed to fetch super agent members",nt),z([]);return}z((st||[]).map(Lt=>String(Lt.agent_user_id)))}})(),()=>{Z=!1}},[ge]),p.useEffect(()=>{const Z=Array.from(new Set([...ge?[ge]:[],...X,...ve].filter(Boolean)));if(Z.length===0)return;const ke=Z.filter(Lt=>!be[Lt]&&!q[Lt]);if(ke.length===0)return;let st=!0;return(async()=>{try{const{data:Lt,error:Rn}=await Nt.from("users_profile").select("user_id, display_name").in("user_id",ke);if(!st)return;if(Rn)throw Rn;const Cn=Object.fromEntries((Lt||[]).map(An=>[String(An.user_id),String(An.display_name||"")]));ie(An=>({...An,...Cn}))}catch(Lt){console.warn("Failed to fetch user labels",Lt)}})(),()=>{st=!1}},[ge,X,ve,be,q]);const We=p.useMemo(()=>{if(!ge)return[];const Z=new Set(ve);return oe.filter(ke=>Z.has(ke.value)).map(ke=>({...ke,label:Se(ke.value)}))},[oe,ge,ve,Se]),dt=p.useMemo(()=>{const Z=new Map;return We.forEach(ke=>Z.set(ke.value,ke)),X.forEach(ke=>{Z.has(ke)||Z.set(ke,{value:ke,label:Se(ke)})}),Array.from(Z.values())},[We,X,Se]);p.useEffect(()=>{if(!o){ae([]);return}let Z=!0;return(async()=>{const{data:st}=await Nt.from("thread_collaborators").select("user_id").eq("thread_id",o);Z&&st&&ae(st.map(nt=>nt.user_id))})(),()=>{Z=!1}},[o]);const yt=async Z=>{if(o)try{await I(o,Z),ae(ke=>[...ke,Z]),Ie.success("Collaborator added")}catch{}},Et=async Z=>{if(o)try{await F(o,Z),ae(ke=>ke.filter(st=>st!==Z)),Ie.success("Collaborator removed")}catch{}},te=p.useMemo(()=>{if(!b)return[];const Z=rle(b);return Z?j.flatMap(ke=>{const st=ke.body||"";if(!st)return[];const nt=new RegExp(Z,"gi"),Lt=[];let Rn=0,Cn;for(;(Cn=nt.exec(st))!==null;)Lt.push({messageId:ke.id,start:Cn.index,length:Cn[0].length,order:Rn}),Rn+=1,Cn.index===nt.lastIndex&&nt.lastIndex++;return Lt}):[]},[b,j]),me=p.useMemo(()=>{if(te.length===0)return{};const Z=te.reduce((ke,st)=>(ke[st.messageId]||(ke[st.messageId]=[]),ke[st.messageId].push({start:st.start,length:st.length}),ke),{});return Object.values(Z).forEach(ke=>{ke.sort((st,nt)=>st.start-nt.start)}),Z},[te]),Fe=te.length,He=Fe>0?te[g]:null,Ue=Z=>{S(Z)};p.useEffect(()=>{v(0)},[b]),p.useEffect(()=>{Fe>0&&g>=Fe&&v(0)},[g,Fe]),p.useEffect(()=>{if(!b||!He){m(null);return}m(He.messageId);const Z=y.current[He.messageId];Z&&Z.scrollIntoView({behavior:"smooth",block:"center"})},[b,He]);const he=()=>{Fe!==0&&v(Z=>(Z+1)%Fe)},Ut=()=>{Fe!==0&&v(Z=>(Z-1+Fe)%Fe)},bt=e.get("contact"),wt=e.get("tab"),xe=p.useRef(!1);p.useEffect(()=>{wt&&(xe.current||(wt==="assigned"||wt==="unassigned"||wt==="resolved")&&wt!==c&&u(wt))},[wt]);const _e=p.useMemo(()=>[...w.filter(ke=>`${ke.contact_name} ${ke.last_message_preview}`.toLowerCase().includes(n.toLowerCase()))].sort((ke,st)=>{const nt=new Date(ke.last_msg_at??ke.created_at??0).getTime();return new Date(st.last_msg_at??st.created_at??0).getTime()-nt}),[w,n]);p.useEffect(()=>{if(k||w.length===0)return;const Z=w.filter(nt=>nt.status!=="closed"&&nt.assigned).length,ke=w.filter(nt=>nt.status!=="closed"&&!nt.assigned).length,st=w.filter(nt=>nt.status==="closed").length;if(c==="assigned"&&Z===0&&ke>0){u("unassigned");return}if((c==="assigned"||c==="unassigned")&&Z===0&&ke===0&&st>0){u("resolved");return}},[w,k,c]),p.useEffect(()=>{if(wt===c)return;const ke=new URLSearchParams(window.location.search);ke.set("tab",c),xe.current=!0,t(ke,{replace:!0}),setTimeout(()=>{xe.current=!1},0)},[c]),p.useEffect(()=>{var ke;if(!bt||o||_e.length===0)return;const Z=_e.find(st=>st.contact_id===bt);Z&&(l(Z.id),Z.status==="closed"?u("resolved"):u(Z.assigned?"assigned":"unassigned"),A(Z.id),(ke=Z.channel)!=null&&ke.provider&&Bw(Z.channel.provider))},[bt,_e]);const Me=p.useMemo(()=>o&&_e.find(Z=>Z.id===o)||null,[o,_e]);p.useEffect(()=>{(async()=>{try{if(!(Me!=null&&Me.id)||!($!=null&&$.id)){P(!1);return}const{data:ke,error:st}=await Nt.from("thread_collaborators").select("user_id").eq("thread_id",Me.id).eq("user_id",$.id).limit(1);if(st)throw st;P(!!ke&&ke.length>0)}catch(ke){console.warn("Failed to check collaborator status",ke),P(!1)}})()},[Me==null?void 0:Me.id,$==null?void 0:$.id]);const le=async()=>{if(Me){if(!($!=null&&$.id)){Ie.error("You must be signed in to take over");return}try{const Z=C(nr.MASTER_AGENT)||C(nr.SUPER_AGENT);if(!D)if(Z)try{const{data:ke}=await Nt.from("thread_collaborators").select("user_id").eq("thread_id",Me.id).eq("user_id",$.id).limit(1);(!ke||ke.length===0)&&await I(Me.id,$.id),P(!0)}catch(ke){console.warn("Failed to ensure collaborator before takeover",ke),Ie.error("Please join as collaborator before taking over");return}else{Ie.error("Please join as collaborator before taking over");return}await M(Me.id,$.id),Ie.success("You are now assigned to this chat"),u("assigned"),await S()}catch{Ie.error("Failed to take over chat")}}};p.useEffect(()=>{var Z;(Z=x.current)==null||Z.scrollIntoView({behavior:"smooth"})},[j]);const Ze=async Z=>{var st;const ke=_e.find(nt=>nt.id===Z);(st=ke==null?void 0:ke.channel)!=null&&st.provider&&Bw(ke.channel.provider),l(Z);try{const nt=new URLSearchParams(window.location.search);nt.has("contact")&&(nt.delete("contact"),t(nt,{replace:!0}))}catch{}await A(Z)},Ke=async()=>{const Z=a.trim();if(!(!Z||!o))try{const{checkAIMessageLimit:ke,autoAssignToSuperAgent:st}=await Ys(async()=>{const{checkAIMessageLimit:Lt,autoAssignToSuperAgent:Rn}=await import("./aiMessageLimit-CzT5SAWG.js");return{checkAIMessageLimit:Lt,autoAssignToSuperAgent:Rn}},[]),nt=await ke(Nt,o);if(nt.isExceeded&&nt.superAgentId){if((await st(Nt,o,nt.superAgentId)).success){Ie.error(`Batas pesan AI telah tercapai (${nt.currentCount}/${nt.limit}). Percakapan telah dialihkan ke super agent dan AI access dinonaktifkan.`),await S();return}}else if(nt.isExceeded&&!nt.superAgentId){Ie.error(`Batas pesan AI telah tercapai (${nt.currentCount}/${nt.limit}). Tidak ada super agent yang tersedia untuk penanganan.`);return}if($!=null&&$.id){const{data:Lt}=await ne.from("users_profile").select("token_limit_enabled, max_tokens_per_day, max_tokens_per_month").eq("user_id",$.id).maybeSingle();if(Lt!=null&&Lt.token_limit_enabled){const Rn=new Date,Cn=new Date(Date.UTC(Rn.getUTCFullYear(),Rn.getUTCMonth(),Rn.getUTCDate(),0,0,0)).toISOString(),An=new Date(Date.UTC(Rn.getUTCFullYear(),Rn.getUTCMonth(),1,0,0,0)).toISOString(),[{data:yi},{data:Gr}]=await Promise.all([ne.from("token_usage_logs").select("total_tokens").eq("user_id",$.id).gte("made_at",Cn),ne.from("token_usage_logs").select("total_tokens").eq("user_id",$.id).gte("made_at",An)]),Dl=(yi||[]).reduce((xo,yo)=>xo+Number(yo.total_tokens||0),0),Ss=(Gr||[]).reduce((xo,yo)=>xo+Number(yo.total_tokens||0),0);if(Lt.max_tokens_per_day&&Dl>=Lt.max_tokens_per_day){Ie.error("Daily token limit reached");return}if(Lt.max_tokens_per_month&&Ss>=Lt.max_tokens_per_month){Ie.error("Monthly token limit reached");return}}}s(""),N(o,Z,"assistant"),Ie.success("Message sent successfully")}catch{Ie.error("Failed to send message")}},en=Z=>{Z.key==="Enter"&&!Z.shiftKey&&(Z.preventDefault(),Ke())};p.useEffect(()=>{var Z;(Z=Me==null?void 0:Me.channel)!=null&&Z.provider&&Bw(Me.channel.provider)},[(Ne=Me==null?void 0:Me.channel)==null?void 0:Ne.provider]);const _t=Z=>{if(!Z)return"";const ke=new Date(Z),Lt=(new Date().getTime()-ke.getTime())/(1e3*60*60);if(Lt<24&&Lt>=0)return ke.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(Lt>=24&&Lt<48)return"Yesterday";const Rn=String(ke.getMonth()+1).padStart(2,"0"),Cn=String(ke.getDate()).padStart(2,"0"),An=ke.getFullYear();return`${Rn}/${Cn}/${An}`},ut=Z=>Z.status==="closed"?i.jsx(Ot,{className:"bg-green-100 text-green-700 border-0",children:"Resolved"}):i.jsx(Ot,{className:Z.assigned?"bg-blue-100 text-blue-700 border-0":"bg-secondary text-secondary-foreground",children:Z.assigned?"Assigned":"Unassigned"}),$t=Z=>{const ke=Z.last_msg_at||Z.updated_at||Z.created_at||"";return _t(ke)},ze=async()=>{if(H){if(!ee){Ie.error("You do not have permission to delete conversations"),G(null);return}try{W(!0),await R(H.id),Ie.success("Conversation deleted"),o===H.id&&l(null),G(null)}catch{Ie.error("Failed to delete conversation")}finally{W(!1)}}},se=Z=>{if(!ee){Ie.error("You do not have permission to delete conversations");return}G(Z)};return k?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Gt,{className:"h-8 w-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading conversations..."})]}):_?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-red-600 mb-2",children:["Error: ",_]}),i.jsxs(Q,{onClick:()=>{S()},variant:"outline",children:[i.jsx(Ey,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}):i.jsxs("div",{className:"grid w-full grid-cols-[360px_1fr_320px] h-[calc(100vh-120px)] gap-4",children:[i.jsxs("aside",{className:"rounded-lg border bg-card p-3",children:[i.jsxs("div",{className:"mb-3 pb-2 border-b flex items-center justify-between",children:[i.jsx("h2",{className:"text-sm font-medium",children:"Conversations"}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx(Ooe,{onFilterChange:Ue})})]}),i.jsxs("div",{className:"relative mb-3",children:[i.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(Ve,{placeholder:"Search...",value:n,onChange:Z=>r(Z.target.value),className:"pl-10 h-8 text-sm"})]}),i.jsxs(pl,{value:c,onValueChange:Z=>{Z!==c&&u(Z)},className:"w-full",children:[i.jsxs(so,{className:"grid w-full grid-cols-[1fr_1fr_auto] mb-3 bg-white",children:[i.jsx(Gn,{value:"assigned",className:"text-xs border-b-2 border-transparent data-[state=active]:bg-blue-50 data-[state=active]:text-blue-600 data-[state=active]:border-blue-500",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("span",{className:"flex items-center",children:["Assigned",i.jsx(Ot,{variant:"secondary",className:"ml-2 h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:_e.filter(Z=>Z.status!=="closed"&&Z.assigned).length})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Lihat percakapan yang ditugaskan ke agen"})})]})}),i.jsx(Gn,{value:"unassigned",className:"text-xs border-b-2 border-transparent data-[state=active]:bg-red-50 data-[state=active]:text-red-600 data-[state=active]:border-red-500",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("span",{className:"flex items-center",children:["Unassigned",i.jsx(Ot,{variant:"secondary",className:"ml-2 h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:_e.filter(Z=>Z.status!=="closed"&&!Z.assigned).length})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Lihat percakapan yang menunggu penugasan"})})]})}),i.jsx(Gn,{value:"resolved",className:"justify-self-end h-8 px-2 rounded-full border-b-2 border-transparent data-[state=active]:bg-green-50 data-[state=active]:text-green-600 data-[state=active]:border-green-500","aria-label":"Resolved",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ih,{className:"h-4 w-4"}),i.jsx(Ot,{variant:"secondary",className:"h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:_e.filter(Z=>Z.status==="closed").length})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Lihat percakapan yang telah diselesaikan"})})]})})]}),i.jsx(Dn,{value:"assigned",className:"mt-0",children:i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:i.jsx("div",{className:"space-y-1",children:_e.filter(Z=>Z.status!=="closed"&&Z.assigned).map(Z=>{var ke,st;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Ze(Z.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===Z.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(zr,{className:"h-6 w-6",children:[i.jsx(Us,{src:Z.channel_logo_url||""}),i.jsx(qr,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-medium truncate",children:Z.contact_name}),i.jsx("p",{className:"text-xs text-gray-600 truncate mt-1",children:Z.last_message_preview||""}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Bo,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:((ke=Z.channel)==null?void 0:ke.display_name)||((st=Z.channel)==null?void 0:st.provider)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[120px]",children:[i.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:$t(Z)}),i.jsx("div",{className:"mt-1",children:ut(Z)})]})]})}),!Z.contact_id&&ee&&i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:nt=>{nt.stopPropagation(),se(Z)},children:i.jsx(Ar,{className:"h-4 w-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Delete conversation"})})]})]},Z.id)})})})}),i.jsx(Dn,{value:"unassigned",className:"mt-0",children:i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:i.jsx("div",{className:"space-y-1",children:_e.filter(Z=>Z.status!=="closed"&&!Z.assigned).map(Z=>{var ke,st;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Ze(Z.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===Z.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(zr,{className:"h-6 w-6",children:[i.jsx(Us,{src:""}),i.jsx(qr,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-semibold truncate",children:Z.contact_name}),i.jsx("p",{className:"text-xs text-gray-600 truncate",children:Z.last_message_preview}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Bo,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:((ke=Z.channel)==null?void 0:ke.display_name)||((st=Z.channel)==null?void 0:st.provider)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[120px]",children:[i.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:$t(Z)}),i.jsx("div",{className:"mt-1",children:ut(Z)})]})]})}),!Z.contact_id&&ee&&i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:nt=>{nt.stopPropagation(),se(Z)},children:i.jsx(Ar,{className:"h-4 w-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Delete conversation"})})]})]},Z.id)})})})}),i.jsx(Dn,{value:"resolved",className:"mt-0",children:i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:i.jsx("div",{className:"space-y-1",children:_e.filter(Z=>Z.status==="closed").map(Z=>{var ke;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Ze(Z.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===Z.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(zr,{className:"h-6 w-6",children:[i.jsx(Us,{src:""}),i.jsx(qr,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-semibold truncate",children:Z.contact_name}),i.jsx("p",{className:"text-xs text-gray-600 truncate",children:Z.last_message_preview}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Bo,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:((ke=Z.channel)==null?void 0:ke.display_name)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[120px]",children:[i.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:$t(Z)}),i.jsx("div",{className:"mt-1",children:ut(Z)})]})]})}),!Z.contact_id&&ee&&i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:st=>{st.stopPropagation(),se(Z)},children:i.jsx(Ar,{className:"h-4 w-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Delete conversation"})})]})]},Z.id)})})})})]}),i.jsx(vb,{open:!!H,onOpenChange:Z=>{Z||G(null)},children:i.jsxs(Cp,{children:[i.jsxs(Ap,{children:[i.jsx(Pp,{children:"Delete conversation?"}),i.jsx(Tp,{children:"This conversation is not linked to a saved contact. Deleting it will remove all associated messages permanently."})]}),i.jsxs(Ep,{children:[i.jsx(Ip,{disabled:Y,children:"Cancel"}),i.jsx(Op,{className:"bg-red-600 hover:bg-red-700",onClick:ze,disabled:Y,children:Y?"Deleting":"Delete"})]})]})})]}),i.jsx("article",{className:"flex min-h-[70vh] flex-col rounded-lg border bg-card",children:Me?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 border-b px-4 py-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(zr,{className:"h-10 w-10",children:[i.jsx(Us,{src:""}),i.jsx(qr,{className:"text-sm",children:Me.contact_name.charAt(0)})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-base font-semibold leading-tight",children:Me.contact_name}),Me.contact_phone&&i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:Me.contact_phone})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(fs,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),i.jsx(Ve,{value:f,onChange:Z=>d(Z.target.value),placeholder:"Search messages",className:"pl-7 h-8 w-44 text-xs"})]}),b&&i.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx("span",{className:"text-xs font-medium min-w-[48px] text-right",children:Fe>0?`${g+1}/${Fe}`:"0/0"}),i.jsx(Q,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Ut,disabled:Fe===0,"aria-label":"Temukan sebelumnya",children:i.jsx(BL,{className:"h-4 w-4"})}),i.jsx(Q,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:he,disabled:Fe===0,"aria-label":"Temukan berikutnya",children:i.jsx(xa,{className:"h-4 w-4"})})]})]}),Me.status!=="closed"&&i.jsx(Q,{size:"sm",className:"h-8 bg-green-600 hover:bg-green-700 text-white disabled:opacity-60",onClick:async()=>{if(Me.status==="closed")return;const{error:Z}=await Nt.from("threads").update({status:"closed",resolved_at:new Date().toISOString(),resolved_by_user_id:($==null?void 0:$.id)??null,handover_reason:null}).eq("id",Me.id);Z?Ie.error("Failed to resolve"):(Ie.success("Conversation resolved"),await S(),u("resolved"))},children:"Resolve"}),i.jsx(Ot,{className:Me.assigned?"bg-success text-success-foreground hover:bg-success":"bg-secondary text-secondary-foreground hover:bg-secondary",children:Me.assigned?"Assigned":"Unassigned"})]})]}),i.jsx(lb,{className:"flex-1 p-4",children:i.jsxs("div",{className:"space-y-2",children:[j.length===0?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No messages yet. Start the conversation!"}):j.map((Z,ke)=>i.jsx("div",{ref:st=>{y.current[Z.id]=st},children:i.jsx(ale,{message:Z,isLastMessage:ke===j.length-1,highlighted:h===Z.id,matches:me[Z.id]??[],activeMatchOrder:(He==null?void 0:He.messageId)===Z.id?He.order:-1})},Z.id)),i.jsx("div",{ref:x})]})}),i.jsx("div",{className:"border-t p-3",children:Me.status!=="closed"&&(Me.assigned?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ve,{placeholder:`Message ${Me.contact_name}...`,value:a,onChange:Z=>s(Z.target.value),onKeyDown:en,className:"flex-1",disabled:!U("messages.create")}),i.jsx(Q,{type:"button",onClick:Ke,disabled:!a.trim()||!U("messages.create"),title:U("messages.create")?"Send message":"No permission to send messages","aria-label":"Send message",children:i.jsx(Xh,{className:"h-4 w-4"})})]}):i.jsx(Kt,{permission:"threads.update",children:i.jsx(Q,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:le,disabled:!($!=null&&$.id),children:"Takeover Chat"})}))})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Bo,{className:"h-12 w-12 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No conversation selected"}),i.jsx("p",{children:"Select a conversation from the sidebar to start chatting"})]})})}),i.jsx("aside",{className:"rounded-lg border bg-card p-4",children:Me?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold",children:Me.contact_name||"Unknown Contact"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Bo,{className:"h-4 w-4 text-blue-500"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ot,{variant:"outline",className:"text-xs",children:((Re=Me.channel)==null?void 0:Re.display_name)||((et=Me.channel)==null?void 0:et.provider)||"Unknown"}),((pt=Me.channel)==null?void 0:pt.type)&&i.jsx(Ot,{variant:"secondary",className:"text-xs",children:Me.channel.type})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Handled By"}),i.jsx(tle,{options:oe,value:ge,onChange:async Z=>{Me&&(J({threadId:Me.id,userId:Z}),await B(Me.id,Z))},placeholder:"Assign Agent",searchPlaceholder:"Search agent...",className:"w-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Collaborators"}),i.jsx(nle,{options:dt,value:X,onChange:()=>{},onAdd:yt,onRemove:Et,placeholder:ge?"Add Collaborator":"Select handled by first",searchPlaceholder:"Search agent...",className:"w-full",disabled:!ge})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium mb-3",children:"Conversation Details"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Assigned By"}),i.jsx("span",{children:Me.assigned_by_name||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Handled By"}),i.jsx("span",{children:ge&&Se(ge)||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Resolved By"}),i.jsx("span",{children:Me.resolved_by_name||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"AI Handoff At"}),i.jsx("span",{children:Me.ai_handoff_at?new Date(Me.ai_handoff_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Assigned At"}),i.jsx("span",{children:Me.assigned_at?new Date(Me.assigned_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Created At"}),i.jsx("span",{children:Me.created_at?new Date(Me.created_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Resolved At"}),i.jsx("span",{children:Me.resolved_at?new Date(Me.resolved_at).toLocaleString():""})]})]})]})]}):i.jsx("div",{className:"text-sm text-muted-foreground",children:"No conversation selected"})})]})}var xb="Checkbox",[sle,v3e]=_r(xb),[ole,cC]=sle(xb);function lle(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:s,form:o,name:l,onCheckedChange:c,required:u,value:f="on",internal_do_not_use_render:d}=e,[h,m]=Ca({prop:n,defaultProp:a??!1,onChange:c,caller:xb}),[g,v]=p.useState(null),[x,y]=p.useState(null),b=p.useRef(!1),w=g?!!o||!!g.closest("form"):!0,j={checked:h,disabled:s,setChecked:m,control:g,setControl:v,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:ol(a)?!1:a,isFormControl:w,bubbleInput:x,setBubbleInput:y};return i.jsx(ole,{scope:t,...j,children:cle(d)?d(j):r})}var FU="CheckboxTrigger",BU=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:s,value:o,disabled:l,checked:c,required:u,setControl:f,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=cC(FU,e),v=St(a,f),x=p.useRef(c);return p.useEffect(()=>{const y=s==null?void 0:s.form;if(y){const b=()=>d(x.current);return y.addEventListener("reset",b),()=>y.removeEventListener("reset",b)}},[s,d]),i.jsx(Ge.button,{type:"button",role:"checkbox","aria-checked":ol(c)?"mixed":c,"aria-required":u,"data-state":HU(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:v,onKeyDown:Ee(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:Ee(n,y=>{d(b=>ol(b)?!0:!b),g&&m&&(h.current=y.isPropagationStopped(),h.current||y.stopPropagation())})})});BU.displayName=FU;var uC=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:s,required:o,disabled:l,value:c,onCheckedChange:u,form:f,...d}=e;return i.jsx(lle,{__scopeCheckbox:n,checked:a,defaultChecked:s,disabled:l,required:o,onCheckedChange:u,name:r,form:f,value:c,internal_do_not_use_render:({isFormControl:h})=>i.jsxs(i.Fragment,{children:[i.jsx(BU,{...d,ref:t,__scopeCheckbox:n}),h&&i.jsx(WU,{__scopeCheckbox:n})]})})});uC.displayName=xb;var UU="CheckboxIndicator",zU=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,s=cC(UU,n);return i.jsx(pr,{present:r||ol(s.checked)||s.checked===!0,children:i.jsx(Ge.span,{"data-state":HU(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});zU.displayName=UU;var qU="CheckboxBubbleInput",WU=p.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:s,defaultChecked:o,required:l,disabled:c,name:u,value:f,form:d,bubbleInput:h,setBubbleInput:m}=cC(qU,e),g=St(n,m),v=iC(s),x=cN(r);p.useEffect(()=>{const b=h;if(!b)return;const w=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(w,"checked").set,_=!a.current;if(v!==s&&k){const S=new Event("click",{bubbles:_});b.indeterminate=ol(s),k.call(b,ol(s)?!1:s),b.dispatchEvent(S)}},[h,v,s,a]);const y=p.useRef(ol(s)?!1:s);return i.jsx(Ge.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:l,disabled:c,name:u,value:f,form:d,...t,tabIndex:-1,ref:g,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});WU.displayName=qU;function cle(e){return typeof e=="function"}function ol(e){return e==="indeterminate"}function HU(e){return ol(e)?"indeterminate":e?"checked":"unchecked"}const mm=p.forwardRef(({className:e,...t},n)=>i.jsx(uC,{ref:n,className:ye("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(zU,{className:ye("flex items-center justify-center text-current"),children:i.jsx(Cy,{className:"h-4 w-4"})})}));mm.displayName=uC.displayName;const yb=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:ye("w-full caption-bottom text-sm",e),...t})}));yb.displayName="Table";const bb=p.forwardRef(({className:e,...t},n)=>i.jsx("thead",{ref:n,className:ye("[&_tr]:border-b",e),...t}));bb.displayName="TableHeader";const wb=p.forwardRef(({className:e,...t},n)=>i.jsx("tbody",{ref:n,className:ye("[&_tr:last-child]:border-0",e),...t}));wb.displayName="TableBody";const ule=p.forwardRef(({className:e,...t},n)=>i.jsx("tfoot",{ref:n,className:ye("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));ule.displayName="TableFooter";const zs=p.forwardRef(({className:e,...t},n)=>i.jsx("tr",{ref:n,className:ye("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));zs.displayName="TableRow";const Wn=p.forwardRef(({className:e,...t},n)=>i.jsx("th",{ref:n,className:ye("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Wn.displayName="TableHead";const Mn=p.forwardRef(({className:e,...t},n)=>i.jsx("td",{ref:n,className:ye("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Mn.displayName="TableCell";const dle=p.forwardRef(({className:e,...t},n)=>i.jsx("caption",{ref:n,className:ye("mt-4 text-sm text-muted-foreground",e),...t}));dle.displayName="TableCaption";const $a=p.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:ye("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));$a.displayName="Textarea";function fle(){var he,Ut,bt,wt;const{hasRole:e}=jr(),t=e("master_agent"),[n,r]=p.useState([]),[a,s]=p.useState(1),[o,l]=p.useState(""),[c,u]=p.useState(100),[f,d]=p.useState(null),[h,m]=p.useState(!0),[g,v]=p.useState(!1),[x,y]=p.useState({chatStatus:"",handledBy:"",dateRange:{}}),[b,w]=p.useState(!1),[j,k]=p.useState(!1),[_,S]=p.useState(!1),[A,N]=p.useState(""),[T,I]=p.useState(""),[F,E]=p.useState(""),[O,M]=p.useState(!1),[B,R]=p.useState(!1),[L,$]=p.useState(null),C=Ka(),{hasPermission:U}=jr(),D=U("contacts.delete"),{contacts:P,loading:H,error:G,totalCount:Y,fetchContacts:W,deleteContact:ee,updateContact:X,deleteMultipleContacts:ae}=lC();p.useEffect(()=>{const xe=setTimeout(()=>{W(a,c,o,x)},300);return()=>clearTimeout(xe)},[o,a,c,x]);const re=xe=>{r(xe?P.map(_e=>_e.id):[])},J=(xe,_e)=>{r(_e?[...n,xe]:n.filter(Me=>Me!==xe))},ve=()=>{if(n.length!==0){if(!D){Ie.error("You do not have permission to delete contacts");return}k(!0)}},z=xe=>{const _e=new URLSearchParams({menu:"chat",contact:xe.id});C({pathname:"/chat",search:_e.toString()}),Ie.success(`Opening conversation with ${xe.name||"contact"}`)},q=xe=>{$(xe),R(!0)},ie=xe=>{$(xe),N(xe.name||""),I(xe.phone||""),E(xe.notes||""),S(!0)},oe=async()=>{try{await ae(n),r([]),k(!1),Ie.success(`Successfully deleted ${n.length} contact(s)`)}catch{Ie.error("Failed to delete contacts")}},be=async()=>{if(L)try{M(!0),await X(L.id,{name:A.trim()||null,phone:T.trim()||null,notes:F.trim()||null}),Ie.success("Contact updated"),S(!1)}catch{Ie.error("Failed to update contact")}finally{M(!1)}},Se=()=>{W(a,c,o,x),Ie.info("Contacts refreshed")},Le=(xe,_e)=>{y(Me=>({...Me,[xe]:_e}))},ge=(xe,_e)=>{y(Me=>({...Me,dateRange:{...Me.dateRange,[xe]:_e}}))},We=()=>{y({chatStatus:"",handledBy:"",dateRange:{}})},dt=Object.values(x).some(xe=>typeof xe=="string"?xe!=="":Object.values(xe).some(_e=>_e!=="")),yt=n.length===P.length&&P.length>0,Et=n.length>0&&n.length<P.length,te=xe=>{f===xe?m(!h):(d(xe),m(!0))},me=(()=>{if(!f)return P;const xe=[...P];return xe.sort((_e,Me)=>{const le=_e[f],Ze=Me[f];if(le==null&&Ze==null)return 0;if(le==null)return h?1:-1;if(Ze==null)return h?-1:1;if(f==="chatCreatedAtISO"||f==="created_at"){const _t=new Date(le).getTime(),ut=new Date(Ze).getTime();return h?_t-ut:ut-_t}const Ke=String(le).toLowerCase(),en=String(Ze).toLowerCase();return Ke<en?h?-1:1:Ke>en?h?1:-1:0}),xe})(),Fe=(()=>{let xe=me;return x.handledBy&&x.handledBy!==""&&(xe=xe.filter(_e=>_e.handledBy===x.handledBy)),xe})(),He=Fe.length,Ue=xe=>{if(!xe||xe==="")return i.jsx("span",{className:"text-muted-foreground",children:""});const _e=xe==="open"?"bg-blue-100 text-blue-700":xe==="pending"?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700";return i.jsx(Ot,{className:`${_e} border-0`,children:xe})};return i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Contacts"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total Contacts: ",H?"...":`${He.toLocaleString()} of ${Y.toLocaleString()}`]})]}),i.jsxs("div",{className:"flex gap-4 items-center justify-between",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs(os,{open:g,onOpenChange:v,children:[i.jsx(ls,{asChild:!0,children:i.jsxs(Q,{variant:"outline",className:"gap-2",children:[i.jsx(HL,{className:"w-4 h-4"}),"Filter",dt&&i.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]})}),i.jsx(Mi,{className:"w-80 p-4",align:"start",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-medium",children:"Filter Contacts"}),dt&&i.jsx(Q,{variant:"ghost",size:"sm",onClick:We,className:"h-8 px-2 text-xs",children:"Clear All"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Chat Status"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Filter berdasarkan status percakapan: Open (terbuka), Pending (menunggu), atau Closed (tertutup)"})})]})]}),i.jsxs(Bt,{value:x.chatStatus,onValueChange:xe=>Le("chatStatus",xe==="all"?"":xe),children:[i.jsx(Mt,{className:"h-8",children:i.jsx(It,{placeholder:"All statuses"})}),i.jsxs(Dt,{children:[i.jsx($e,{value:"all",children:"All statuses"}),i.jsx($e,{value:"open",children:"Open"}),i.jsx($e,{value:"pending",children:"Pending"}),i.jsx($e,{value:"closed",children:"Closed"})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Handled By"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Filter berdasarkan siapa yang menangani percakapan: Assigned (ditugaskan ke agen) atau Unassigned (belum ditugaskan)"})})]})]}),i.jsxs(Bt,{value:x.handledBy||"",onValueChange:xe=>Le("handledBy",xe==="all"?"":xe),children:[i.jsx(Mt,{className:"h-8",children:i.jsx(It,{placeholder:"All agents"})}),i.jsxs(Dt,{children:[i.jsx($e,{value:"all",children:"All"}),i.jsx($e,{value:"assigned",children:"Assigned"}),i.jsx($e,{value:"unassigned",children:"Unassigned"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Filter berdasarkan rentang tanggal kontak dibuat. Pilih tanggal mulai dan tanggal akhir untuk membatasi hasil pencarian"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("div",{children:i.jsx(Ve,{type:"date",placeholder:"From",value:x.dateRange.from,onChange:xe=>ge("from",xe.target.value),className:"h-8 text-xs"})}),i.jsx("div",{children:i.jsx(Ve,{type:"date",placeholder:"To",value:x.dateRange.to,onChange:xe=>ge("to",xe.target.value),className:"h-8 text-xs"})})]})]})]})]})})]}),i.jsxs("div",{className:"relative",children:[i.jsx(fs,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),i.jsx(Ve,{placeholder:"Cari berdasarkan Nama atau Telepon",className:"pl-10 pr-8 w-80",value:o,onChange:xe=>l(xe.target.value)}),o&&i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("button",{type:"button",onClick:()=>l(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":"Clear search",children:i.jsx(cp,{className:"h-4 w-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Hapus pencarian"})})]})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"outline",size:"sm",onClick:Se,disabled:H,children:i.jsx(Ey,{className:`w-4 h-4 ${H?"animate-spin":""}`})})}),i.jsx(ce,{children:i.jsx("p",{children:"Segarkan daftar kontak"})})]})]}),i.jsxs("div",{className:"flex gap-2",children:[D&&i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs(Q,{variant:n.length>0?"destructive":"outline",className:n.length>0?"bg-red-600 hover:bg-red-700 text-white":"",onClick:ve,disabled:n.length===0,children:["Delete Selected (",n.length,")"]})}),i.jsx(ce,{children:i.jsx("p",{children:"Hapus kontak yang dipilih"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"outline",onClick:async()=>{try{w(!0);const{data:xe,error:_e}=await Nt.from("contacts").select(`
                            id,
                            name,
                            phone,
                            email,
                            notes,
                            created_at,
                            threads!left(
                              status,
                              assignee_user_id,
                              created_at,
                              channels(display_name, provider, type)
                            )
                          `);if(_e)throw _e;const Me=(xe||[]).map(_t=>{var $t,ze,se;const ut=(_t.threads||[])[0]||null;return{id:_t.id,name:_t.name??"",phone:_t.phone??"",email:_t.email??"",notes:_t.notes??"",contact_created_at:_t.created_at??"",chat_status:(ut==null?void 0:ut.status)??"",handled_by:(ut==null?void 0:ut.assignee_user_id)??"",chat_channel:(($t=ut==null?void 0:ut.channels)==null?void 0:$t.display_name)??"",chat_channel_provider:((ze=ut==null?void 0:ut.channels)==null?void 0:ze.provider)??"",chat_channel_type:((se=ut==null?void 0:ut.channels)==null?void 0:se.type)??"",chat_created_at:(ut==null?void 0:ut.created_at)??""}}),le=[["ID","Name","Phone","Email","Notes","Contact Created At","Chat Status","Handled By","Chat Channel","Chat Channel Provider","Chat Channel Type","Chat Created At"].join(","),...Me.map(_t=>{var ut;return[_t.id,_t.name,_t.phone,_t.email,(ut=_t.notes)==null?void 0:ut.replace(/"/g,'""'),_t.contact_created_at,_t.chat_status,_t.handled_by,_t.chat_channel,_t.chat_channel_provider,_t.chat_channel_type,_t.chat_created_at].map($t=>`"${$t??""}"`).join(",")})].join(`
`),Ze=new Blob([le],{type:"text/csv;charset=utf-8;"}),Ke=URL.createObjectURL(Ze),en=document.createElement("a");en.href=Ke,en.setAttribute("download",`contacts-${new Date().toISOString()}.csv`),document.body.appendChild(en),en.click(),document.body.removeChild(en),URL.revokeObjectURL(Ke),Ie.success("Contacts exported to CSV")}catch(xe){console.error("Failed to export contacts:",xe),Ie.error("Failed to export contacts")}finally{w(!1)}},disabled:b,children:b?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"}),"Exporting..."]}):"Export"})}),i.jsx(ce,{children:i.jsx("p",{children:"Ekspor daftar kontak"})})]})]})]})]}),G&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",G]})}),i.jsx(Ae,{children:i.jsx(Je,{className:"p-0",children:i.jsxs(yb,{children:[i.jsx(bb,{children:i.jsxs(zs,{children:[i.jsx(Wn,{className:"w-12",children:i.jsx(mm,{checked:yt,onCheckedChange:re,"aria-label":"Select all contacts",className:Et?"data-[state=checked]:bg-blue-600":""})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("span",{className:"cursor-help",children:"ACTION"})}),i.jsx(ce,{children:i.jsx("p",{children:"Aksi yang dapat dilakukan pada kontak (lihat, edit, hapus)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("name"),children:["NAME ",f==="name"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Nama kontak (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("phone"),children:["PHONE ",f==="phone"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Nomor telepon kontak (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("notes"),children:["NOTE ",f==="notes"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Catatan atau keterangan tambahan kontak (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("inbox"),children:["CHANNEL ",f==="inbox"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Saluran komunikasi kontak (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("channelType"),children:["PLATFORM ",f==="channelType"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Platform komunikasi (WhatsApp, Telegram, dll) (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("chatStatus"),children:["CHAT STATUS ",f==="chatStatus"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Status percakapan (Open, Pending, Closed) (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("chatCreatedAtISO"),children:["CREATED AT ",f==="chatCreatedAtISO"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Tanggal dan waktu kontak dibuat (klik untuk mengurutkan)"})})]})}),i.jsx(Wn,{className:"text-xs py-2",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>te("handledBy"),children:["HANDLED BY ",f==="handledBy"?h?i.jsx(No,{className:"h-3.5 w-3.5"}):i.jsx(ko,{className:"h-3.5 w-3.5"}):i.jsx(So,{className:"h-3.5 w-3.5"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Agen yang menangani percakapan (klik untuk mengurutkan)"})})]})})]})}),i.jsx(wb,{children:H?i.jsx(zs,{children:i.jsx(Mn,{colSpan:10,className:"text-center py-8",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(Gt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Loading contacts..."})]})})}):P.length===0?i.jsx(zs,{children:i.jsx(Mn,{colSpan:10,className:"text-center py-8",children:i.jsx("div",{className:"text-muted-foreground",children:o?"No contacts found matching your search.":"No contacts found."})})}):Fe.map(xe=>{var _e;return i.jsxs(zs,{className:`hover:bg-muted/50 ${n.includes(xe.id)?"bg-blue-50":""}`,children:[i.jsx(Mn,{children:i.jsx(mm,{checked:n.includes(xe.id),onCheckedChange:Me=>J(xe.id,Me),"aria-label":`Select ${xe.name}`})}),i.jsx(Mn,{children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-blue-600 hover:bg-blue-700 text-white","aria-label":"View detailed conversation",onClick:()=>z(xe),variant:"ghost",title:"Open conversation",children:i.jsx(Bo,{className:"h-4 w-4"})})}),i.jsx(ce,{children:"Open conversation"})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-green-600 hover:bg-green-700 text-white","aria-label":"View contact details",onClick:()=>q(xe),variant:"ghost",title:"View details",children:i.jsx(QS,{className:"h-4 w-4"})})}),i.jsx(ce,{children:"View details"})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white","aria-label":"Edit contact",onClick:()=>ie(xe),variant:"ghost",title:"Edit contact",children:i.jsx(ga,{className:"h-4 w-4"})})}),i.jsx(ce,{children:"Edit contact"})]})]})}),i.jsx(Mn,{className:"font-medium",children:i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx(zr,{className:"h-8 w-8",children:i.jsx(qr,{className:"text-xs",children:(_e=(xe.name||xe.phone||"?")[0])==null?void 0:_e.toUpperCase()})}),i.jsx("div",{className:"min-w-0",children:i.jsx("div",{className:"truncate",children:xe.name||"Unnamed Contact"})})]})}),i.jsx(Mn,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:xe.phone||"-"}),xe.phone&&i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{navigator.clipboard.writeText(xe.phone),Ie.success("Phone copied")},children:i.jsx(Z0,{className:"h-3 w-3"})})}),i.jsx(ce,{children:"Copy phone"})]})]})}),i.jsx(Mn,{children:xe.notes?i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("span",{className:"line-clamp-1 max-w-[260px] inline-block align-middle",children:xe.notes})}),i.jsx(ce,{className:"max-w-sm",children:xe.notes})]}):i.jsx("span",{className:"text-muted-foreground",children:"-"})}),i.jsx(Mn,{children:xe.inbox?i.jsx(Ot,{variant:"outline",children:xe.inbox}):""}),i.jsx(Mn,{children:xe.channelProvider?i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(Ot,{variant:"secondary",className:"capitalize",children:xe.channelProvider})}):i.jsx("span",{className:"text-muted-foreground",children:""})}),i.jsx(Mn,{children:Ue(xe.chatStatus)}),i.jsx(Mn,{className:"font-mono text-sm whitespace-nowrap",children:xe.chatCreatedAt||"-"}),i.jsx(Mn,{children:xe.handledBy&&xe.handledBy!==""?i.jsx(Ot,{className:"bg-purple-100 text-purple-700 border-0",children:xe.handledBy}):i.jsx("span",{className:"text-muted-foreground",children:""})})]},xe.id)})})]})})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Q,{variant:"outline",size:"sm",disabled:a===1||H,onClick:()=>s(a-1),children:i.jsx(JS,{className:"w-4 h-4"})}),i.jsxs("span",{className:"text-sm",children:["Page ",i.jsx("span",{className:"font-medium",children:a})," of ",i.jsx("span",{className:"font-medium",children:Math.max(1,Math.ceil(He/c))})]}),i.jsx(Q,{variant:"outline",size:"sm",disabled:a>=Math.ceil(He/c)||H,onClick:()=>s(a+1),children:i.jsx(Ay,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:"Items per page:"}),i.jsxs(Bt,{value:c.toString(),onValueChange:xe=>u(parseInt(xe)),children:[i.jsx(Mt,{className:"w-20 h-8",children:i.jsx(It,{})}),i.jsxs(Dt,{children:[i.jsx($e,{value:"50",children:"50"}),i.jsx($e,{value:"100",children:"100"}),i.jsx($e,{value:"200",children:"200"})]})]}),i.jsx("span",{children:"rows"})]}),i.jsxs("span",{children:["Total: ",i.jsx("span",{className:"font-medium",children:He.toLocaleString()})]})]})]}),i.jsx(vb,{open:j,onOpenChange:k,children:i.jsxs(Cp,{children:[i.jsxs(Ap,{children:[i.jsx(Pp,{children:"Are you sure?"}),i.jsxs(Tp,{children:["This action cannot be undone. This will permanently delete ",n.length," contact",n.length>1?"s":"","."]})]}),i.jsxs(Ep,{children:[i.jsx(Ip,{children:"Cancel"}),i.jsxs(Op,{onClick:oe,className:"bg-red-600 hover:bg-red-700",children:["Delete ",n.length," Contact",n.length>1?"s":""]})]})]})}),i.jsx(mn,{open:_,onOpenChange:S,children:i.jsxs(cn,{children:[i.jsx(un,{children:i.jsx(dn,{children:"Edit Contact"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(Be,{children:"Name"}),i.jsx(Ve,{value:A,onChange:xe=>N(xe.target.value),placeholder:"Full name"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Be,{children:"Phone"}),i.jsx(Ve,{value:T,onChange:xe=>I(xe.target.value),placeholder:"Phone number"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Be,{children:"Notes"}),i.jsx($a,{value:F,onChange:xe=>E(xe.target.value),placeholder:"Notes"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx(Q,{variant:"outline",onClick:()=>S(!1),disabled:O,children:"Cancel"}),i.jsx(Q,{onClick:be,disabled:O,className:"bg-blue-600 hover:bg-blue-700",children:O?"Saving":"Save"})]})]})]})}),i.jsx(mn,{open:B,onOpenChange:R,children:i.jsxs(cn,{className:"max-w-2xl",children:[i.jsx(un,{children:i.jsxs(dn,{className:"flex items-center gap-3",children:[i.jsx(zr,{className:"h-10 w-10",children:i.jsx(qr,{children:((Ut=(he=L==null?void 0:L.name)==null?void 0:he[0])==null?void 0:Ut.toUpperCase())||((wt=(bt=L==null?void 0:L.phone)==null?void 0:bt[0])==null?void 0:wt.toUpperCase())||"?"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:(L==null?void 0:L.name)||"Unnamed Contact"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact Details"})]})]})}),L&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Name"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zv,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:L.name||"Unnamed Contact"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(XV,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:L.phone||"-"}),L.phone&&i.jsx(Q,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{navigator.clipboard.writeText(L.phone),Ie.success("Phone copied to clipboard")},children:i.jsx(Z0,{className:"h-3 w-3"})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),i.jsx("div",{className:"p-3 bg-muted rounded-md",children:L.notes?i.jsx("p",{className:"text-sm",children:L.notes}):i.jsx("span",{className:"text-muted-foreground text-sm",children:"No notes"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Label Names"}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{children:L.labelNames||"-"})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Inbox"}),i.jsx("div",{className:"flex items-center gap-2",children:L.inbox?i.jsx(Ot,{variant:"outline",children:L.inbox}):i.jsx("span",{className:"text-muted-foreground",children:""})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Chat Status"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(cv,{className:"h-4 w-4 text-muted-foreground"}),Ue(L.chatStatus)]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Handled By"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(zv,{className:"h-4 w-4 text-muted-foreground"}),L.handledBy&&L.handledBy!==""?i.jsx(Ot,{className:"bg-purple-100 text-purple-700 border-0",children:L.handledBy}):i.jsx("span",{className:"text-muted-foreground",children:""})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Contact Created At"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gh,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-sm",children:L.created_at?new Date(L.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{className:"text-sm font-medium text-muted-foreground",children:"Chat Created At"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gh,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-sm",children:L.chatCreatedAt||"-"})]})]})]}),t&&L&&i.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[i.jsxs(Be,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[i.jsx(VL,{className:"h-4 w-4"}),"Contact UUID"]}),i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-md",children:[i.jsx("code",{className:"flex-1 font-mono text-xs text-foreground break-all",children:L.id}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 flex-shrink-0",onClick:()=>{navigator.clipboard.writeText(L.id),Ie.success("Contact UUID copied to clipboard")},children:i.jsx(Z0,{className:"h-4 w-4"})})}),i.jsx(ce,{children:"Copy UUID"})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique identifier for this contact. Use this UUID for GDPR deletion requests or system integrations."})]}),i.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[i.jsxs(Q,{onClick:()=>z(L),className:"flex-1",children:[i.jsx(Bo,{className:"h-4 w-4 mr-2"}),"View Conversation"]}),i.jsxs(Q,{variant:"outline",onClick:()=>ie(L),className:"flex-1",children:[i.jsx(ga,{className:"h-4 w-4 mr-2"}),"Edit Contact"]})]})]})]})})]})}const VU=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),o=async()=>{try{r(!0),s(null);const{data:{user:d}}=await ne.auth.getUser();if(!d){t([]);return}const{data:h,error:m}=await ne.from("org_members").select("org_id").eq("user_id",d.id);if(m||!h||h.length===0){t([]);return}const g=h.map(I=>I.org_id),{data:v}=await ne.from("user_roles").select("role_id").eq("user_id",d.id);let x=!1,y=!1,b=!1;if(v&&v.length>0){const I=v.map(O=>O.role_id),{data:F}=await ne.from("roles").select("id, name").in("id",I),E=(F||[]).map(O=>(O.name||"").toLowerCase());x=E.includes("master_agent"),y=E.includes("super_agent"),b=E.includes("agent")&&!x&&!y}let w=null;if(b){const{data:I}=await ne.from("channel_agents").select("channel_id").eq("user_id",d.id);w=new Set((I||[]).map(F=>F.channel_id))}const{data:j,error:k}=await ne.from("channels").select(`
          *
        `).in("org_id",g).order("created_at",{ascending:!1});if(k){console.error("Error fetching channels:",k),s(k.message);return}const{data:_,error:S}=await ne.from("org_members").select(`
          org_id,
          user_id,
          role,
          v_users!inner (
            display_name,
            email
          )
        `).in("org_id",g);S&&console.error("Error fetching org members for platforms:",S);const A={};for(const I of _||[]){const F=I.org_id;A[F]||(A[F]=[]),A[F].push(I)}const N=(j||[]).filter(I=>w?w.has(I.id):!0),T=await Promise.all(N.map(async I=>{try{const{data:F}=await ne.from("channel_agents").select("user_id").eq("channel_id",I.id),E=(F||[]).map(B=>B.user_id);let O=[];if(E.length>0){const[B,R]=await Promise.all([ne.from("users_profile").select("user_id, display_name").in("user_id",E),ne.from("v_users").select("id, display_name, email").in("id",E)]),L=B.data||[],$=R.data||[],C={};$.forEach(U=>{C[U.id]={display_name:U.display_name,email:U.email}}),L.forEach(U=>{var D,P;C[U.user_id]={display_name:U.display_name??((D=C[U.user_id])==null?void 0:D.display_name),email:(P=C[U.user_id])==null?void 0:P.email}}),O=Object.entries(C).map(([U,D])=>({user_id:U,...D}))}const M=E.map(B=>{const R=O.find(L=>L.user_id===B||L.id===B)||{};return{user_id:B,display_name:R.display_name||(R==null?void 0:R.display_name),email:R.email}});return{...I,provider:I.provider,status:I.is_active?"active":"inactive",human_agents:M,super_agent_id:I.super_agent_id??null,credentials:(I==null?void 0:I.credentials)??null}}catch{return{...I,provider:I.provider,status:I.is_active?"active":"inactive",human_agents:[],super_agent_id:I.super_agent_id??null,credentials:(I==null?void 0:I.credentials)??null}}}));t(T)}catch(d){console.error("Error fetching platforms:",d),s("Failed to fetch platforms")}finally{r(!1)}},l=async d=>{var h;try{s(null);const{data:{user:m}}=await ne.auth.getUser();if(!m)throw new Error("User not authenticated");const{data:g,error:v}=await ne.from("org_members").select("org_id").eq("user_id",m.id).limit(1);if(v)throw v;const x=(h=g==null?void 0:g[0])==null?void 0:h.org_id;if(!x)throw new Error("User not found in any organization");if(!d.ai_profile_id)throw new Error("AI agent is required when creating a platform");const{data:y,error:b}=await ne.from("ai_profiles").select("super_agent_id").eq("id",d.ai_profile_id).single();if(b)throw b;const w=y==null?void 0:y.super_agent_id;if(!w)throw new Error("Selected AI agent does not have a super agent assigned. Please update the AI agent first.");const{data:j,error:k}=await ne.from("channels").insert({org_id:x,display_name:d.display_name,credentials:{},provider:d.provider,type:"inbox",profile_photo_url:d.profile_photo_url,ai_profile_id:d.ai_profile_id,super_agent_id:w,is_active:!0}).select().single();if(k)throw k;if(d.human_agent_ids&&d.human_agent_ids.length>0){const _=d.human_agent_ids.map(A=>({channel_id:j.id,user_id:A})),{error:S}=await ne.from("channel_agents").insert(_);S&&console.warn("Failed to attach channel agents on create:",S)}await o();try{await Wt({action:"channel.create",resource:"channel",resourceId:(j==null?void 0:j.id)??null,context:{...d,super_agent_id:w}})}catch{}return j}catch(m){throw console.error("Error creating platform:",m),s(m.message||"Failed to create platform"),m}},c=async(d,h)=>{try{s(null);const m={};if(typeof h.display_name<"u"&&(m.display_name=h.display_name),typeof h.profile_photo_url<"u"&&(m.profile_photo_url=h.profile_photo_url),typeof h.ai_profile_id<"u"&&(m.ai_profile_id=h.ai_profile_id,h.ai_profile_id)){const{data:g,error:v}=await ne.from("ai_profiles").select("super_agent_id").eq("id",h.ai_profile_id).single();if(v)throw v;const x=g==null?void 0:g.super_agent_id;if(!x)throw new Error("Selected AI agent does not have a super agent assigned. Please update the AI agent first.");m.super_agent_id=x}if(typeof h.provider<"u"&&(m.provider=h.provider),Object.keys(m).length>0){const{error:g}=await ne.from("channels").update(m).eq("id",d);if(g)throw g}if(h.human_agent_ids!==void 0){const{error:g}=await ne.from("channel_agents").delete().eq("channel_id",d);if(g&&console.error("Error removing human agents:",g),h.human_agent_ids.length>0){const v=h.human_agent_ids.map(y=>({channel_id:d,user_id:y})),{error:x}=await ne.from("channel_agents").insert(v);x&&console.error("Error adding human agents:",x)}}await o();try{await Wt({action:"channel.update",resource:"channel",resourceId:d,context:h})}catch{}}catch(m){throw console.error("Error updating platform:",m),s(m.message||"Failed to update platform"),m}},u=async(d,h,m)=>{const g=[/^image\//i],v=/\.(png|jpe?g|webp)$/i;if(!(g.some(w=>w.test(h.type||""))||v.test(h.name||"")))throw new Error("Only image files are allowed (PNG, JPG, WEBP).");const y=5*1024*1024;if(typeof h.size=="number"&&h.size>y)throw new Error("Image is too large. Maximum size is 5 MB.");async function b(w){try{if(typeof window>"u")return null;const j=document.createElement("img"),k=URL.createObjectURL(w);try{await new Promise((N,T)=>{j.onload=()=>N(),j.onerror=T,j.src=k})}finally{URL.revokeObjectURL(k)}const _=document.createElement("canvas");_.width=j.naturalWidth||j.width,_.height=j.naturalHeight||j.height;const S=_.getContext("2d");return S?(S.drawImage(j,0,0,_.width,_.height),await new Promise(N=>_.toBlob(T=>N(T),"image/png"))):null}catch{return null}}try{const{data:{user:w}}=await ne.auth.getUser();if(!w)throw new Error("User not authenticated");let j=m||"";if(!j){const{data:O,error:M}=await ne.from("channels").select("org_id").eq("id",d).single();if(M)throw M;j=O==null?void 0:O.org_id}if(!j)throw new Error("Missing org_id for channel");const k="channel-assets",_=`${j}/${d}/profile/avatar.png`,S=await b(h),A=S||h,N=S?"image/png":h.type||"image/*",{error:T}=await ne.storage.from(k).upload(_,A,{cacheControl:"31536000",upsert:!0,contentType:N});if(T)throw T;const{data:I}=ne.storage.from(k).getPublicUrl(_),F=I==null?void 0:I.publicUrl,{error:E}=await ne.from("channels").update({logo_url:F,profile_photo_url:F}).eq("id",d);if(E)throw E;try{await Wt({action:"channel.avatar.update",resource:"channel",resourceId:d,context:{objectPath:_}})}catch{}return F}catch(w){throw console.error("Error uploading channel avatar:",w),new Error((w==null?void 0:w.message)||"Failed to upload channel avatar")}},f=async(d,h)=>{try{const{data:{user:m}}=await ne.auth.getUser();if(!m)throw new Error("User not authenticated");let g=h||"";if(!g){const{data:b,error:w}=await ne.from("channels").select("org_id").eq("id",d).single();if(w)throw w;g=b==null?void 0:b.org_id}if(!g)throw new Error("Missing org_id for channel");const v="channel-assets",x=`${g}/${d}/profile/avatar.png`;try{await ne.storage.from(v).remove([x])}catch{}const{error:y}=await ne.from("channels").update({logo_url:null,profile_photo_url:null}).eq("id",d);if(y)throw y;try{await Wt({action:"channel.avatar.delete",resource:"channel",resourceId:d,context:{objectPath:x}})}catch{}}catch(m){throw console.error("Error deleting channel avatar:",m),new Error((m==null?void 0:m.message)||"Failed to delete channel avatar")}};return p.useEffect(()=>{o()},[]),{platforms:e,loading:n,error:a,fetchPlatforms:o,createPlatform:l,updatePlatform:c,uploadChannelAvatar:u,deleteChannelAvatar:f}},hle=()=>{const[e,t]=p.useState({}),[n,r]=p.useState(!1),[a,s]=p.useState(null),o=p.useCallback(async l=>{if(!l)return[];try{r(!0),s(null);const{data:c,error:u}=await ne.from("channels").select("*").eq("org_id",l).order("created_at",{ascending:!1});if(u)return s(u.message),[];const f=c||[];return t(d=>({...d,[l]:f})),f}catch(c){return s(c instanceof Error?c.message:"Failed to fetch channels"),[]}finally{r(!1)}},[]);return{channelsByOrg:e,loading:n,error:a,fetchByOrgId:o}};function jb({options:e,value:t,onChange:n,onValueChange:r,placeholder:a="Select...",disabled:s,className:o}){const[l,c]=p.useState(!1),u=new Set(t),f=g=>{n&&n(g),r&&r(g)},d=g=>{const v=new Set(u);v.has(g)?v.delete(g):v.add(g),f(Array.from(v))},h=e.filter(g=>u.has(g.value)).map(g=>g.label),m=h.length===0?a:`${h.length} selected`;return i.jsxs(os,{open:l,onOpenChange:c,children:[i.jsx(ls,{asChild:!0,children:i.jsxs(Q,{type:"button",variant:"outline",role:"combobox","aria-expanded":l,disabled:s,className:ye("justify-between w-64",o),children:[i.jsx("span",{className:"truncate text-left",children:m}),i.jsx("span",{className:"ml-2 text-muted-foreground",children:""})]})}),i.jsx(Mi,{className:"p-0 w-80",align:"start",onOpenAutoFocus:g=>g.preventDefault(),children:i.jsxs(Oc,{children:[i.jsx(Ic,{placeholder:"Search..."}),i.jsxs(pb,{children:[i.jsx(Rc,{children:"No results found."}),i.jsx(Mc,{children:e.map(g=>i.jsxs(Dc,{onSelect:v=>{d(g.value)},className:"cursor-pointer",children:[i.jsx("div",{className:"mr-2 flex h-4 w-4 items-center justify-center",onClick:v=>{v.preventDefault(),v.stopPropagation(),d(g.value)},children:i.jsx(mm,{checked:u.has(g.value),onCheckedChange:()=>d(g.value)})}),i.jsx("span",{children:g.label})]},g.value))})]})]})})]})}const mle=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=Vc(),{user:s}=Vr(),{hasPermission:o}=jr(),{aiAgents:l,loading:c}=Np(),{agents:u,loading:f}=El(),[d,h]=p.useState({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,b]=p.useState(null),[w,j]=p.useState(null),[k,_]=p.useState(null);p.useRef(!1);const[S,A]=p.useState(!1),[N,T]=p.useState(!1),[I,F]=p.useState(null),E=o("channels.create");p.useMemo(()=>I&&u.find(U=>U.primaryRole==="super_agent"&&U.user_id===I)||null,[I,u]);const O="https://waha-plus-production-97c1.up.railway.app",M=async()=>{if(!s)return null;const{data:U}=await ne.from("org_members").select("org_id").eq("user_id",s.id).single();return(U==null?void 0:U.org_id)||null},B=async()=>{try{x(!0),_(null),b(null);const U=Yn.ENDPOINTS.WHATSAPP.CREATE_SESSION,D=`${Yn.BASE_URL}/2f6f9767-c3cb-4af3-b749-a496eefc2b74/waha`,P=(d.platformName||"default").replace(/\s/g,""),H={name:P,start:!0,config:{metadata:{"user.id":(s==null?void 0:s.id)||"","user.email":(s==null?void 0:s.email)||""},proxy:null,debug:!1,noweb:{store:{enabled:!0,fullSync:!1}},webhooks:[{url:D,events:["message","session.status","message.reaction","message.any","message.ack","message.waiting","message.revoked","state.change","group.join","group.leave","presence.update","poll.vote","poll.vote.failed","chat.archive","call.received","call.accepted","call.rejected","label.upsert","label.deleted","label.chat.added","label.chat.deleted","engine.event"],hmac:null,retries:null,customHeaders:null}]}};try{const W=await wa(U,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)});if(!W.ok){const ee=await W.text();if(W.status!==409)throw new Error(`Create session failed (${W.status}): ${ee||"Unknown error"}`)}}catch(W){throw W}const G=await wa(Yn.ENDPOINTS.WHATSAPP.GET_LOGIN_QR,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:P})});if(!G.ok)throw new Error(`Request failed with status ${G.status}`);const Y=G.headers.get("content-type");if(Y&&Y.includes("image/")){const W=await G.blob(),ee=URL.createObjectURL(W);return b(ee),j(P),x(!1),{qr:ee,sessionName:P}}else try{const W=await G.json(),ee=Array.isArray(W)?W[0]:W;if(!ee||!ee.data||!ee.mimetype)throw new Error("Invalid QR response shape");const X=`data:${ee.mimetype};base64,${ee.data}`;return b(X),j(P),x(!1),{qr:X,sessionName:P}}catch{const ee=await G.text();if(ee&&ee.length>0){const X=`data:image/png;base64,${ee}`;return b(X),j(P),x(!1),{qr:X,sessionName:P}}else throw new Error("Invalid response format")}return x(!1),null}catch(U){return _((U==null?void 0:U.message)||"Failed to generate QR"),x(!1),null}},R=async()=>{try{const D=await(async()=>{if(w&&w.trim().length>0)return w;try{const G=await M();if(!G)return"default";const{data:Y}=await ne.from("channels").select("display_name, provider").eq("org_id",G).eq("provider","whatsapp").order("created_at",{ascending:!1}).limit(1).maybeSingle();return((Y==null?void 0:Y.display_name)||"").replace(/\s/g,"")||"default"}catch{return"default"}})(),P=`${O}/api/sessions/${encodeURIComponent(D)}`,H=await fetch(P,{method:"GET",headers:{"Content-Type":"application/json"}});if(H.ok){const G=await H.json();return G&&G.status==="WORKING"&&G.me&&G.me.id?(g(!0),b(null),a({title:"Success",description:"WhatsApp connected successfully!"}),!0):(g(!1),!1)}return!1}catch(U){return console.error("Error checking session status:",U),!1}};p.useEffect(()=>{if(!y||m)return;const U=setInterval(async()=>{await R()&&clearInterval(U)},5e3);return()=>clearInterval(U)},[y,m]);const L=!!(d.platformName&&d.selectedAIAgent&&I&&E),$=async()=>{try{A(!0)}finally{A(!1),h({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),g(!1),x(!1),b(null),_(null),F(null),t()}},C=async()=>{try{if(T(!0),!E){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"}),T(!1);return}if(!I||!d.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"}),T(!1);return}if(!await M())throw new Error("User not found in any organization");const D=await B(),P={...d,phoneNumber:void 0,platformType:"whatsapp",selectedSuperAgentId:I};if(await n(P),a({title:"Success",description:"Channel successfully created."}),D)try{window.dispatchEvent(new CustomEvent("open-wa-qr",{detail:{sessionName:D.sessionName,qr:D.qr}}))}catch{}try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}t(),h({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),F(null)}catch(U){console.error("Error submitting form:",U),a({title:"Error",description:U.message||"Failed to create WhatsApp platform",variant:"destructive"})}finally{T(!1)}};return i.jsx(mn,{open:e,onOpenChange:t,children:i.jsx(cn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Setup WhatsApp Platform"}),i.jsx(Er,{children:"Configure your new WhatsApp platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"platformName",children:"Platform Name *"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama platform atau merek yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(Ve,{id:"platformName",placeholder:"Enter your platform or brand name",value:d.platformName,onChange:U=>h(D=>({...D,platformName:U.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di WhatsApp Business"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:d.profilePhoto?i.jsx("img",{src:URL.createObjectURL(d.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx(kc,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Ve,{id:"profilePhoto",type:"file",accept:"image/*",onChange:U=>{var P;const D=((P=U.target.files)==null?void 0:P[0])||null;h(H=>({...H,profilePhoto:D}))},className:"hidden"}),i.jsxs(Q,{variant:"outline",onClick:()=>{var U;return(U=document.getElementById("profilePhoto"))==null?void 0:U.click()},children:[i.jsx(kc,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"description",children:"Description"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx($a,{id:"description",placeholder:"Describe your business and what you offer",value:d.description,onChange:U=>h(D=>({...D,description:U.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-xs font-medium text-emerald-700",children:"Super Agent (1 max)"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform WhatsApp ini"})})]})]}),f?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(Bt,{value:I||"",onValueChange:U=>{F(U),h(D=>({...D,selectedAIAgent:"",selectedHumanAgents:[]}))},children:[i.jsx(Mt,{children:i.jsx(It,{placeholder:"Choose a Super Agent"})}),i.jsx(Dt,{className:"bg-background border z-50",children:u.filter(U=>U.primaryRole==="super_agent").map(U=>i.jsx($e,{value:U.user_id,children:U.display_name||U.email||U.user_id.slice(0,8)},U.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform WhatsApp ini"})})]})]}),c?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Bt,{value:d.selectedAIAgent,onValueChange:U=>{const D=l.find(P=>P.id===U);if(!I){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!D||D.super_agent_id!==I){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}h(P=>({...P,selectedAIAgent:U,selectedHumanAgents:[]}))},children:[i.jsx(Mt,{children:i.jsx(It,{placeholder:I?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(Dt,{className:"bg-background border z-50",children:l.filter(U=>I?U.super_agent_id===I:!1).map(U=>i.jsx($e,{value:U.id,children:U.name},U.id))})]})]}),d.selectedAIAgent&&!I&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{children:"Assign Agents"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-xs font-medium",children:["Agents ",I?"":"(select an AI agent first)"]}),(()=>{const D=u.filter(P=>P.primaryRole==="agent").filter(P=>!!I&&P.super_agent_id===I).map(P=>({value:P.user_id,label:P.display_name||P.email||`Agent ${P.user_id.slice(0,8)}`}));return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jb,{options:D,value:d.selectedHumanAgents,onValueChange:P=>h(H=>({...H,selectedHumanAgents:P})),disabled:!I,placeholder:I?"Select human agents":"Select an AI agent first"}),i.jsx(Q,{type:"button",variant:"outline",disabled:!I||D.length===0,onClick:()=>h(P=>({...P,selectedHumanAgents:D.map(H=>H.value)})),children:"Select All"}),i.jsx(Q,{type:"button",variant:"ghost",disabled:!I||d.selectedHumanAgents.length===0,onClick:()=>h(P=>({...P,selectedHumanAgents:[]})),children:"Unselect All"})]})})()]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(Q,{variant:"outline",onClick:$,disabled:r||S,className:"text-blue-700 border-blue-200 hover:bg-blue-50",children:S?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Cancelling..."]}):"Cancel"}),i.jsx(Q,{onClick:C,disabled:r||N||!L,className:"bg-blue-100 hover:bg-blue-200 text-blue-700 transition-all duration-200 hover:shadow-md active:scale-[.98]","aria-busy":r||N,children:r||N?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create WhatsApp Platform"})]})]})})})},ple=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=Vc(),{user:s}=Vr(),{hasPermission:o}=jr(),{aiAgents:l,loading:c}=Np(),{agents:u,loading:f}=El(),{uploadChannelAvatar:d}=VU(),[h,m]=p.useState({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[g,v]=p.useState(!1),[x,y]=p.useState(null),[b,w]=p.useState(!1),[j,k]=p.useState(null),_=(h.telegramBotToken||"").trim(),S=!!j&&j===_,A=o("channels.create"),N=p.useMemo(()=>x&&u.find(O=>O.primaryRole==="super_agent"&&O.user_id===x)||null,[x,u]),T=!!(h.displayName&&h.selectedAIAgent&&h.telegramBotToken&&x&&A&&S),I=async()=>{if(!s)return null;const{data:O}=await ne.from("org_members").select("org_id").eq("user_id",s.id).single();return(O==null?void 0:O.org_id)||null},F=async()=>{const O=(h.telegramBotToken||"").trim();if(!O){a({title:"Telegram bot token required",description:"Enter your BotFather token before validating.",variant:"destructive"});return}try{w(!0);const M=await I(),B={telegram_bot_token:O};M&&(B.org_id=M);const R=await wa(Yn.ENDPOINTS.TELEGRAM.VERIFY_TOKEN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});let L=null;try{const C=await R.text();L=C?JSON.parse(C):null}catch{throw new Error("Token is invalid")}if(!R.ok)throw new Error("Token is invalid");if(L===null||typeof L!="object"||Array.isArray(L))throw new Error("Token is invalid");const $=L.valid;if(typeof $!="boolean")throw new Error("Token is invalid");if($!==!0)throw new Error("Token is invalid");k(O),a({title:"Token validated",description:"Telegram bot token has been successfully verified."})}catch(M){console.error("Telegram token validation failed:",M),k(null);const B=M&&typeof M.message=="string"?M.message:"",R=String(B).toLowerCase();a({title:"Validation failed",description:R.includes("empty")||R.includes("required")?B||"Telegram bot token is required":"Token is invalid",variant:"destructive"})}finally{w(!1)}},E=async()=>{var O;try{if(g)return;if(v(!0),!A){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"}),v(!1);return}if(!x||!h.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"}),v(!1);return}if(!S){a({title:"Token validation required",description:"You must validate the Telegram bot token before creating this platform.",variant:"destructive"}),v(!1);return}const M=await I();if(!M)throw new Error("User not found in any organization");const B=(h.telegramBotToken||"").trim();if(!B)throw new Error("Telegram bot token is required");try{const{data:C}=await ne.from("channels").select("id").eq("provider","telegram").eq("external_id",B).limit(1);if(Array.isArray(C)&&C.length>0){a({title:"Duplicate token",description:"A Telegram bot with this BotFather token already exists.",variant:"destructive"}),v(!1);return}}catch{}const R={brand_name:h.displayName,display_name:h.displayName,description:h.description,telegram_bot_token:h.telegramBotToken,ai_profile_id:h.selectedAIAgent,human_agent_ids:h.selectedHumanAgents,super_agent_id:x,org_id:M,platform_type:"telegram"},L=await wa(Yn.ENDPOINTS.TELEGRAM.CREATE_PLATFORM,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!L.ok)throw new Error(`Telegram webhook failed with status ${L.status}`);let $=null;try{if((L.headers.get("content-type")||"").includes("application/json"))$=await L.json();else{const U=await L.text();try{$=U?JSON.parse(U):null}catch{$={raw:U||null}}}}catch{$=null}try{if(h.profilePhoto){let C=($==null?void 0:$.channel_id)||($==null?void 0:$.id)||((O=$==null?void 0:$.channel)==null?void 0:O.id)||null;if(!C){const{data:U}=await ne.from("channels").select("id").eq("org_id",M).eq("provider","telegram").eq("external_id",B).limit(1).maybeSingle();C=(U==null?void 0:U.id)||null}C&&await d(C,h.profilePhoto,M)}}catch(C){console.warn("Telegram avatar upload failed:",C)}a({title:"Success",description:"Telegram channel created successfully"});try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}t(),m({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),y(null)}catch(M){console.error("Error submitting form:",M),a({title:"Error",description:M.message||"Failed to create Telegram platform",variant:"destructive"})}finally{v(!1)}};return i.jsx(mn,{open:e,onOpenChange:t,children:i.jsx(cn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Setup Telegram Bot Platform"}),i.jsx(Er,{children:"Configure your new Telegram bot platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"displayName",children:"Display Name *"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama yang akan ditampilkan di widget chat Telegram"})})]})]}),i.jsx(Ve,{id:"displayName",placeholder:"Enter the display name",value:h.displayName,onChange:O=>m(M=>({...M,displayName:O.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"description",children:"Description"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx($a,{id:"description",placeholder:"Describe your business and what you offer",value:h.description,onChange:O=>m(M=>({...M,description:O.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di bot Telegram"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:h.profilePhoto?i.jsx("img",{src:URL.createObjectURL(h.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx(kc,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Ve,{id:"profilePhoto",type:"file",accept:"image/*",onChange:O=>{var B;const M=((B=O.target.files)==null?void 0:B[0])||null;m(R=>({...R,profilePhoto:M}))},className:"hidden"}),i.jsxs(Q,{variant:"outline",onClick:()=>{var O;return(O=document.getElementById("profilePhoto"))==null?void 0:O.click()},children:[i.jsx(kc,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/50",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx(Be,{className:"text-sm font-medium",children:"Telegram Bot Setup"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Follow these steps to set up your Telegram bot"})]})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 1: Create a bot with BotFather"}),i.jsxs("ol",{className:"list-decimal list-inside text-xs space-y-1 ml-2",children:[i.jsx("li",{children:"Open Telegram and search for @BotFather"}),i.jsx("li",{children:"Send /newbot command"}),i.jsx("li",{children:"Choose a name for your bot (organization name)"}),i.jsx("li",{children:"Choose a username (must end with 'bot')"}),i.jsx("li",{children:"Copy the bot token provided"})]})]}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 2: Configure bot settings"}),i.jsxs("ol",{className:"list-decimal list-inside text-xs space-y-1 ml-2",children:[i.jsx("li",{children:"Send /setdescription to set bot description"}),i.jsx("li",{children:"Send /setabouttext to set about text"}),i.jsx("li",{children:"Send /setcommands to set available commands"})]})]}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 3: Enable webhook (optional)"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Your bot will automatically receive messages once connected to our platform."})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"telegramBotToken",children:"Telegram Bot Token *"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Token bot Telegram yang diperoleh dari @BotFather untuk mengautentikasi bot"})})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ve,{id:"telegramBotToken",type:"password",placeholder:"1234567890:ABCdefGHIjklMNOpqrsTUVwxyz",value:h.telegramBotToken,onChange:O=>{const M=O.target.value;m(B=>({...B,telegramBotToken:M})),k(null)},className:"flex-1"}),i.jsx(Q,{type:"button",variant:S?"outline":"default",className:S?"border-emerald-600 text-emerald-700 hover:bg-emerald-50":"",onClick:F,disabled:b||!h.telegramBotToken,children:b?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"}),"Validating"]}):"Validate"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Get this token from @BotFather on Telegram. Format: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"}),S&&i.jsx("p",{className:"text-xs text-emerald-600",children:"Bot token validated. You can now create this Telegram platform."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{children:"Super Agent *"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform Telegram ini"})})]})]}),f?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(Bt,{value:x||"",onValueChange:O=>{y(O),m(M=>({...M,selectedAIAgent:"",selectedHumanAgents:[]}))},children:[i.jsx(Mt,{children:i.jsx(It,{placeholder:"Choose a Super Agent"})}),i.jsx(Dt,{className:"bg-background border z-50",children:u.filter(O=>O.primaryRole==="super_agent").map(O=>i.jsx($e,{value:O.user_id,children:O.display_name||O.email||O.user_id.slice(0,8)},O.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform Telegram ini"})})]})]}),c?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Bt,{value:h.selectedAIAgent,onValueChange:O=>{const M=l.find(B=>B.id===O);if(!x){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!M||M.super_agent_id!==x){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}m(B=>({...B,selectedAIAgent:O,selectedHumanAgents:[]}))},children:[i.jsx(Mt,{children:i.jsx(It,{placeholder:x?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(Dt,{className:"bg-background border z-50",children:l.filter(O=>x?O.super_agent_id===x:!1).map(O=>i.jsx($e,{value:O.id,children:O.name},O.id))})]}),x&&i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-md bg-muted px-3 py-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:"Super Agent:"}),i.jsx("span",{className:"font-medium",children:(N==null?void 0:N.display_name)||(N==null?void 0:N.email)||x.slice(0,8)})]})]}),h.selectedAIAgent&&!x&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{children:"Select Human Agents (optional)"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):(()=>{const M=u.filter(B=>B.primaryRole==="agent").filter(B=>!!x&&B.super_agent_id===x).map(B=>({value:B.user_id,label:B.display_name||B.email||`Agent ${B.user_id.slice(0,8)}`}));return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jb,{options:M,value:h.selectedHumanAgents,onValueChange:B=>m(R=>({...R,selectedHumanAgents:B})),disabled:!x,placeholder:x?"Select human agents":"Select an AI agent first"}),i.jsx(Q,{type:"button",variant:"outline",disabled:!x||M.length===0,onClick:()=>m(B=>({...B,selectedHumanAgents:M.map(R=>R.value)})),children:"Select All"}),i.jsx(Q,{type:"button",variant:"ghost",disabled:!x||h.selectedHumanAgents.length===0,onClick:()=>m(B=>({...B,selectedHumanAgents:[]})),children:"Unselect All"})]})})()]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(Q,{variant:"outline",onClick:()=>{g||(m({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),y(null),t())},disabled:r||g,children:"Cancel"}),i.jsx(Q,{onClick:E,disabled:r||g||!T,className:"bg-blue-600 hover:bg-blue-700 text-white",children:r||g?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"})," Creating..."]}):"Create Telegram Bot Platform"})]})]})})})},gle=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=Vc();Vr();const{hasPermission:s}=jr(),{aiAgents:o,loading:l}=Np(),{agents:c,loading:u}=El(),[f,d]=p.useState({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[h,m]=p.useState(!1),[g,v]=p.useState(null),x=s("channels.create"),y=p.useMemo(()=>g&&c.find(k=>k.primaryRole==="super_agent"&&k.user_id===g)||null,[g,c]),b=!!(f.displayName&&g&&f.selectedAIAgent&&x),w=async()=>{try{if(h)return;if(!x){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"});return}if(!g||!f.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"});return}m(!0);const k={...f,platformType:"web",selectedSuperAgentId:g};await n(k);try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}d({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),v(null),t()}catch(k){console.error("Error submitting form:",k)}finally{m(!1)}},j=()=>{h||(d({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),v(null),t())};return i.jsx(mn,{open:e,onOpenChange:t,children:i.jsx(cn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Setup Web Live Chat Platform"}),i.jsx(Er,{children:"Configure your new web live chat platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"description",children:"Description"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx($a,{id:"description",placeholder:"Describe your business and what you offer",value:f.description,onChange:k=>d(_=>({..._,description:k.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di widget live chat"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:f.profilePhoto?i.jsx("img",{src:URL.createObjectURL(f.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx(kc,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Ve,{id:"profilePhoto",type:"file",accept:"image/*",onChange:k=>{var S;const _=((S=k.target.files)==null?void 0:S[0])||null;d(A=>({...A,profilePhoto:_}))},className:"hidden"}),i.jsxs(Q,{variant:"outline",onClick:()=>{var k;return(k=document.getElementById("profilePhoto"))==null?void 0:k.click()},children:[i.jsx(kc,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"displayName",children:"Display Name *"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama yang akan ditampilkan di widget live chat"})})]})]}),i.jsx(Ve,{id:"displayName",placeholder:"Name that will appear in the chat widget",value:f.displayName,onChange:k=>d(_=>({..._,displayName:k.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{children:"Super Agent *"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform Live Chat ini"})})]})]}),u?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(Bt,{value:g||"",onValueChange:k=>{v(k),d(_=>({..._,selectedAIAgent:"",selectedHumanAgents:[]}))},children:[i.jsx(Mt,{children:i.jsx(It,{placeholder:"Choose a Super Agent"})}),i.jsx(Dt,{className:"bg-background border z-50",children:c.filter(k=>k.primaryRole==="super_agent").map(k=>i.jsx($e,{value:k.user_id,children:k.display_name||k.email||k.user_id.slice(0,8)},k.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform Live Chat ini"})})]})]}),l?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Bt,{value:f.selectedAIAgent,onValueChange:k=>{const _=o.find(S=>S.id===k);if(!g){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!_||_.super_agent_id!==g){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}d(S=>({...S,selectedAIAgent:k,selectedHumanAgents:[]}))},children:[i.jsx(Mt,{children:i.jsx(It,{placeholder:g?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(Dt,{className:"bg-background border z-50",children:o.filter(k=>g?k.super_agent_id===g:!1).map(k=>i.jsx($e,{value:k.id,children:k.name},k.id))})]}),g&&i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-md bg-muted px-3 py-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:"Super Agent:"}),i.jsx("span",{className:"font-medium",children:(y==null?void 0:y.display_name)||(y==null?void 0:y.email)||g.slice(0,8)})]})]}),f.selectedAIAgent&&!g&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{children:"Assign Agents"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),u?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-xs font-medium",children:["Agents ",g?"":"(select an AI agent first)"]}),(()=>{const _=c.filter(S=>S.primaryRole==="agent").filter(S=>!!g&&S.super_agent_id===g).map(S=>({value:S.user_id,label:S.display_name||S.email||`Agent ${S.user_id.slice(0,8)}`}));return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(jb,{options:_,value:f.selectedHumanAgents,onValueChange:S=>d(A=>({...A,selectedHumanAgents:S})),disabled:!g,placeholder:g?"Select human agents":"Select an AI agent first"}),i.jsx(Q,{type:"button",variant:"outline",disabled:!g||_.length===0,onClick:()=>d(S=>({...S,selectedHumanAgents:_.map(A=>A.value)})),children:"Select All"}),i.jsx(Q,{type:"button",variant:"ghost",disabled:!g||f.selectedHumanAgents.length===0,onClick:()=>d(S=>({...S,selectedHumanAgents:[]})),children:"Unselect All"})]})})})()]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(Q,{variant:"outline",onClick:j,disabled:r||h,children:"Cancel"}),i.jsx(Q,{onClick:w,disabled:r||h||!b,children:r||h?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"})," Creating..."]}):"Create Web Live Chat Platform"})]})]})})})},vle=()=>{var ze;const{toast:e}=Vc(),{platforms:t,loading:n,error:r,createPlatform:a,fetchPlatforms:s,updatePlatform:o,uploadChannelAvatar:l,deleteChannelAvatar:c}=VU(),{aiAgents:u,loading:f}=Np(),{agents:d,loading:h}=El(),{fetchByOrgId:m,channelsByOrg:g}=hle(),{hasRole:v}=jr(),[x,y]=p.useState(null),[b,w]=p.useState("whatsapp"),[j,k]=p.useState(""),[_,S]=p.useState(!1),[A,N]=p.useState(null),[T,I]=p.useState(!1),[F,E]=p.useState(!1),[O,M]=p.useState([]),[B,R]=p.useState(!1),[L,$]=p.useState(!1),[C,U]=p.useState(!1),D=p.useRef(null),[P,H]=p.useState([]),[G,Y]=p.useState(!1),[W,ee]=p.useState(null),[X,ae]=p.useState(new Set),[re,J]=p.useState(new Set),[ve,z]=p.useState(null),[q,ie]=p.useState(null),[oe,be]=p.useState(null),[Se,Le]=p.useState(!1),[ge,We]=p.useState(null),dt=p.useRef(null),[yt,Et]=p.useState(!1),te="https://waha-plus-production-97c1.up.railway.app",me=p.useRef(null),Fe=p.useRef(!1),He=p.useRef(0);p.useEffect(()=>{t.length>0&&!x&&y(t[0].id)},[t,x]),p.useEffect(()=>{u.length>0&&!j&&k(u[0].id)},[u,j]);const Ue=se=>{const Ne=se==null?void 0:se.provider;return Ne==="whatsapp"?"whatsapp":Ne==="telegram"?"telegram":"web"};p.useEffect(()=>{const se=t.find(Ne=>Ue(Ne)===b);(!x||x&&t.find(Ne=>Ne.id===x&&Ue(Ne)!==b))&&y((se==null?void 0:se.id)||null)},[t,b]);const he=t.find(se=>se.id===x);p.useEffect(()=>{k(he&&(he==null?void 0:he.ai_profile_id)||"")},[he==null?void 0:he.id,he==null?void 0:he.ai_profile_id]),p.useEffect(()=>{const se=Array.from(new Set(t.map(Ne=>Ne.org_id)));se.length!==0&&Promise.resolve().then(()=>{se.forEach(Ne=>{m(Ne)})})},[t]),p.useEffect(()=>{const se=()=>{s()};return window.addEventListener("refresh-platforms",se),()=>window.removeEventListener("refresh-platforms",se)},[s]);const Ut=he?Ue(he):null,bt=(he==null?void 0:he.human_agents)||[],wt=v("master_agent")||v("super_agent"),_e=d.filter(se=>se.primaryRole==="agent"&&!bt.some(Ne=>Ne.user_id===se.user_id)).map(se=>({value:se.user_id,label:se.display_name||se.email||se.user_id.slice(0,8)})),Me=se=>i.jsxs(i.Fragment,{children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-base flex items-center gap-2",children:["AI Agent",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform ini"})})]})]})}),i.jsx(Je,{children:f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Bt,{value:j||"",onValueChange:async Ne=>{he&&(await o(he.id,{ai_profile_id:Ne||void 0}),k(Ne))},children:[i.jsx(Mt,{children:i.jsx(It,{placeholder:"Choose an AI agent"})}),i.jsx(Dt,{children:u.map(Ne=>i.jsxs($e,{value:Ne.id,children:[" ",Ne.name]},Ne.id))})]})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-base flex items-center gap-2",children:["Super Agent",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform ini (hanya master agent yang dapat mengatur)"})})]})]})}),i.jsx(Je,{children:(()=>{const Ne=(he==null?void 0:he.super_agent_id)||null,et=(d||[]).find(pt=>pt.user_id===Ne&&pt.primaryRole==="super_agent")||null;return i.jsxs("div",{className:"text-sm space-y-2",children:[et?i.jsxs("div",{className:"inline-flex items-center gap-2 bg-muted px-3 py-1 rounded-md",children:[" ",et.display_name||et.email||et.user_id.slice(0,8)]}):i.jsx("span",{className:"text-muted-foreground",children:"No super agent assigned. Select an AI agent to link a super agent."}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Super agent assignment follows the selected AI agent. To change ownership, switch the AI agent for this platform."})]})})()})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-base flex items-center gap-2",children:["Human Agent",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]})}),i.jsxs(Je,{children:[h?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):bt.length>0?i.jsx("div",{className:"flex flex-wrap gap-2",children:bt.map(Ne=>i.jsxs("div",{className:"flex items-center gap-2 bg-muted px-3 py-1 rounded-md",children:[i.jsxs("span",{className:"text-sm",children:[" ",Ne.display_name||Ne.email||Ne.user_id]}),wt&&i.jsx(Q,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",disabled:F||!he,onClick:async()=>{if(he)try{E(!0);const Re=bt.filter(et=>et.user_id!==Ne.user_id).map(et=>et.user_id);await o(he.id,{human_agent_ids:Re})}finally{E(!1)}},children:i.jsx(cp,{className:"h-3 w-3"})})]},Ne.user_id))}):i.jsx("p",{className:"text-sm text-muted-foreground",children:"No agents connected"}),wt&&he&&i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsx(jb,{options:_e,value:O,onChange:M,placeholder:"Select human agents to add"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Kt,{permission:"channel_agents.update",children:i.jsx(Q,{variant:"outline",disabled:F||O.length===0,onClick:async()=>{if(he)try{E(!0);const Ne=bt.map(et=>et.user_id),Re=Array.from(new Set([...Ne,...O]));await o(he.id,{human_agent_ids:Re}),M([])}finally{E(!1)}},children:"Add selected"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Tambahkan agen manusia yang dipilih ke platform ini"})})]})]})]})]}),se&&i.jsxs(i.Fragment,{children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-base flex items-center gap-2",children:["Link LiveChat",i.jsx(De,{className:"h-4 w-4 text-muted-foreground"})]})}),i.jsx(Je,{children:i.jsx("div",{className:"bg-muted p-3 rounded-md",children:i.jsx(Ve,{value:`https://classy-frangollo-337599.netlify.app/livechat/${(he==null?void 0:he.id)||"{platform_id}"}`,readOnly:!0,className:"bg-background"})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-base flex items-center gap-2",children:["Embed Code",i.jsx(De,{className:"h-4 w-4 text-muted-foreground"})]})}),i.jsx(Je,{children:i.jsx($a,{value:`<script>
(function(){
  // Lightweight chat embed - uses YOUR project's origin
  var w=window,d=document; if(w.chatWidgetLoaded) return; w.chatWidgetLoaded=true;
  var cfg=w.chatConfig||{}; cfg.baseUrl=cfg.baseUrl||'https://classy-frangollo-337599.netlify.app'; cfg.platformId=cfg.platformId||'${(he==null?void 0:he.id)||"{platform_id}"}';
  cfg.position=cfg.position||'bottom-right'; cfg.width=cfg.width||'360px'; cfg.height=cfg.height||'560px';
  var css='#chat-bubble{position:fixed;right:20px;bottom:20px;z-index:999999;background:#1d4ed8;color:#fff;border-radius:9999px;width:56px;height:56px;box-shadow:0 8px 20px rgba(0,0,0,.2);border:0;cursor:pointer;font-size:24px;line-height:56px;text-align:center}'+
           '#chat-panel{position:fixed;right:20px;bottom:92px;width:'+cfg.width+';height:'+cfg.height+';max-width:calc(100% - 40px);max-height:70vh;z-index:999999;box-shadow:0 10px 30px rgba(0,0,0,.25);border-radius:12px;overflow:hidden;opacity:0;transform:translateY(10px);pointer-events:none;transition:opacity .2s ease,transform .2s ease;background:#fff}'+
           '#chat-panel.open{opacity:1;transform:translateY(0);pointer-events:auto}';
  var s=d.createElement('style'); s.type='text/css'; s.appendChild(d.createTextNode(css)); d.head.appendChild(s);
  var bubble=d.createElement('button'); bubble.id='chat-bubble'; bubble.setAttribute('aria-label','Open chat'); bubble.innerHTML='';
  var panel=d.createElement('div'); panel.id='chat-panel';
  var iframe=d.createElement('iframe'); iframe.src=cfg.baseUrl+'/livechat/'+encodeURIComponent(cfg.platformId); iframe.style.width='100%'; iframe.style.height='100%'; iframe.style.border='0'; panel.appendChild(iframe);
  bubble.addEventListener('click',function(){ panel.classList.toggle('open'); });
  d.body.appendChild(bubble); d.body.appendChild(panel);
})();
<\/script>`,readOnly:!0,className:"font-mono text-xs h-48 bg-muted"})})]})]})]}),le=se=>{N(se),S(!1)},Ze=async se=>{try{I(!0);const Ne={display_name:se.displayName||se.platformName||se.brandName,website_url:se.websiteUrl||void 0,business_category:se.businessCategory||void 0,description:se.description||void 0,ai_profile_id:se.selectedAIAgent||void 0,provider:A||"web",human_agent_ids:se.selectedHumanAgents},Re=await a(Ne);if(Re&&se.profilePhoto)try{await l(Re.id,se.profilePhoto,Re.org_id)}catch(et){e({title:"Avatar upload failed",description:(et==null?void 0:et.message)||"Could not upload avatar",variant:"destructive"})}e({title:"Success",description:"Platform created successfully!"}),N(null)}catch(Ne){e({title:"Error",description:Ne.message||"Failed to create platform",variant:"destructive"})}finally{I(!1)}},Ke=async()=>{if(!Fe.current){Fe.current=!0,Y(!0),ee(null);try{const se=`${te}/api/sessions`,Ne=await fetch(se,{method:"GET",headers:{"Content-Type":"application/json"}});if(!Ne.ok)throw new Error(`Request failed with status ${Ne.status}`);const Re=await Ne.json(),et=Array.isArray(Re)?Re:[Re];H(et),await en(et),Date.now()>=He.current&&(He.current=Date.now()+2e3,await s())}catch(se){ee((se==null?void 0:se.message)||"Failed to load sessions")}finally{Y(!1),Fe.current=!1}}},en=async se=>{var Ne,Re;try{const{data:et}=await ne.auth.getUser(),pt=et==null?void 0:et.user;if(!pt)return;const{data:Z}=await ne.from("org_members").select("org_id").eq("user_id",pt.id).limit(1),ke=(Ne=Z==null?void 0:Z[0])==null?void 0:Ne.org_id;if(!ke)return;const{data:st}=await ne.from("channels").select("id, display_name, provider").eq("org_id",ke).eq("provider","whatsapp");for(const nt of se){const Lt=(nt==null?void 0:nt.name)||"";if(!Lt)continue;const Rn=String((nt==null?void 0:nt.status)||"").toUpperCase(),Cn=((Re=nt==null?void 0:nt.me)==null?void 0:Re.id)||null,An=Rn==="WORKING"&&!!Cn,yi=(Lt||"").toLowerCase().replace(/\s/g,""),Gr=(st||[]).find(Dl=>(Dl.display_name||"").toLowerCase().replace(/\s/g,"")===yi);Gr&&await ne.from("channels").update({is_active:An,external_id:Cn,credentials:{waha_status:(nt==null?void 0:nt.status)||null,me_id:Cn}}).eq("id",Gr.id)}}catch(et){console.error("Failed to sync sessions to channels",et)}};p.useEffect(()=>{Ut==="whatsapp"&&me.current!=="whatsapp"&&(me.current="whatsapp",Ke()),Ut!=="whatsapp"&&(me.current=Ut||null)},[Ut]),p.useEffect(()=>{const se=Ne=>{const Re=(Ne==null?void 0:Ne.detail)||{};ie(Re.qr||null),Re.sessionName&&We(Re.sessionName),Le(!0)};return window.addEventListener("open-wa-qr",se),()=>window.removeEventListener("open-wa-qr",se)},[]),p.useEffect(()=>((()=>{if(!ge||!Se)return;const Ne=async()=>{var Re;try{if(!ge)return;const et=`${te}/api/sessions/${encodeURIComponent(ge)}`,pt=await fetch(et,{method:"GET",headers:{"Content-Type":"application/json"}});if(!pt.ok)return;const Z=await pt.json(),ke=String((Z==null?void 0:Z.status)||"").toUpperCase();if(!!((Re=Z==null?void 0:Z.me)!=null&&Re.id)&&ke==="WORKING"){Le(!1),ie(null),await Ke();try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}e({title:"Connected",description:"WhatsApp connected successfully."})}}catch{}};Ne(),dt.current=window.setInterval(Ne,3e3)})(),()=>{dt.current&&(clearInterval(dt.current),dt.current=null)}),[Se,ge]);const _t=async se=>{z(se),be(null),ie(null),Le(!0),We(se);try{const Ne=await wa(Yn.ENDPOINTS.WHATSAPP.GET_LOGIN_QR,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:se})});if(!Ne.ok)throw new Error(`QR request failed: ${Ne.status}`);const Re=Ne.headers.get("content-type");if(Re&&Re.includes("image/")){const et=await Ne.blob();ie(URL.createObjectURL(et))}else try{const et=await Ne.json(),pt=Array.isArray(et)?et[0]:et;if(!(pt!=null&&pt.data)||!(pt!=null&&pt.mimetype))throw new Error("Invalid QR");ie(`data:${pt.mimetype};base64,${pt.data}`)}catch{const et=await Ne.text();et&&ie(`data:image/png;base64,${et}`)}}catch(Ne){be((Ne==null?void 0:Ne.message)||"Failed to get QR")}finally{z(null)}},ut=async se=>{if(!se)throw new Error("Missing channel");const Ne=Ue(se);if(Ne==="telegram"){const et=await wa(Yn.ENDPOINTS.TELEGRAM.DELETE_WEBHOOK,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_id:se.id,org_id:se.org_id,bot_token:(se==null?void 0:se.external_id)||null})});if(!et.ok){const pt=await et.text().catch(()=>"");throw new Error(pt||`Telegram delete failed (${et.status})`)}return}if(Ne==="whatsapp"){const et=String((se==null?void 0:se.display_name)||"").toLowerCase().replace(/\s/g,""),pt=await wa(Yn.ENDPOINTS.WHATSAPP.DELETE_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:et})});if(!pt.ok){const Z=await pt.text().catch(()=>"");throw new Error(Z||`WhatsApp delete failed (${pt.status})`)}return}const{error:Re}=await ne.from("channels").delete().eq("id",se.id);if(Re)throw Re},$t=async se=>{var Ne;if(se){ae(Re=>new Set(Re).add(se));try{const Re=await wa(Yn.ENDPOINTS.WHATSAPP.DISCONNECT_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:se})});if(!Re.ok)throw new Error(`Disconnect failed ${Re.status}`);const et=Date.now();for(;Date.now()-et<2e4;){await Ke();const pt=P.find(nt=>(nt.name||"")===se),Z=String((pt==null?void 0:pt.status)||"").toUpperCase(),ke=!!((Ne=pt==null?void 0:pt.me)!=null&&Ne.id);if(!(Z==="WORKING"&&ke))break;await new Promise(nt=>setTimeout(nt,2e3))}e({title:"Disconnected",description:`Session ${se} disconnected`})}catch(Re){ee((Re==null?void 0:Re.message)||"Failed to disconnect session")}finally{ae(Re=>{const et=new Set(Re);return et.delete(se),et})}}};return i.jsxs("div",{className:"flex h-[calc(100vh-120px)]",children:[i.jsx("div",{className:"w-80 border-r border-border bg-card",children:i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h2",{className:"text-lg font-semibold",children:"Platforms"})}),i.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"This is where you can connect all your platforms"}),i.jsx(pl,{value:b,onValueChange:se=>w(se),className:"mb-3",children:i.jsxs(so,{className:"grid w-full grid-cols-3 bg-muted/50 p-1",children:[i.jsx(Gn,{value:"whatsapp",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("span",{children:"WhatsApp"})}),i.jsx(ce,{children:i.jsx("p",{children:"Kelola koneksi WhatsApp Business"})})]})}),i.jsx(Gn,{value:"telegram",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("span",{children:"Telegram"})}),i.jsx(ce,{children:i.jsx("p",{children:"Kelola koneksi Bot Telegram"})})]})}),i.jsx(Gn,{value:"web",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("span",{children:"Live Chat"})}),i.jsx(ce,{children:i.jsx("p",{children:"Kelola koneksi widget Live Chat"})})]})})]})}),n?i.jsx("div",{className:"space-y-2",children:[1,2,3].map(se=>i.jsx(Ae,{className:"animate-pulse",children:i.jsx(Je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]})})},se))}):r?i.jsx("div",{className:"text-sm text-red-600 p-4",children:r}):i.jsx("div",{className:"space-y-2",children:t.filter(se=>Ue(se)===b).length===0?i.jsx("div",{className:"text-sm text-muted-foreground p-4 text-center",children:"No platforms found. Create your first platform to get started."}):t.filter(se=>Ue(se)===b).map(se=>i.jsx(Ae,{className:`cursor-pointer transition-colors hover:bg-muted/50 ${x===se.id?"border-primary shadow-sm":""}`,onClick:()=>y(se.id),children:i.jsx(Je,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted flex items-center justify-center",children:se.profile_photo_url?i.jsx("img",{src:se.profile_photo_url,alt:se.display_name||"Platform",className:"h-10 w-10 rounded-full object-cover"}):i.jsx("span",{className:"text-xs font-medium text-foreground/70",children:(se.display_name||"").charAt(0)||"?"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-medium text-sm truncate",children:se.display_name||"Unnamed Platform"}),i.jsx("p",{className:"text-[11px] text-muted-foreground capitalize",children:Ue(se)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:se.description||se.website_url||""})]}),i.jsx("div",{className:`h-2.5 w-2.5 rounded-full ${se.status==="active"?"bg-green-500":"bg-gray-300"}`,"aria-label":se.status==="active"?"Active":"Inactive",title:se.status==="active"?"Active":"Inactive"})]})})},se.id))}),i.jsxs(mn,{open:_,onOpenChange:S,children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(UN,{asChild:!0,children:i.jsxs(Q,{variant:"outline",className:"w-full mt-4",children:[i.jsx(gs,{className:"h-4 w-4 mr-2"}),"Add Channel"]})})}),i.jsx(ce,{children:i.jsx("p",{children:"Tambahkan saluran atau platform baru"})})]}),i.jsxs(cn,{className:"sm:max-w-xl p-0 overflow-hidden",children:[i.jsxs(un,{className:"p-6 pb-4",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx(dn,{className:"text-lg font-semibold",children:"Platform"})}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Select the platform you wish to establish your new inbox."})]}),i.jsxs("div",{className:"px-6 pb-6",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsxs("button",{onClick:()=>le("whatsapp"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(cv,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"WhatsApp"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Connect your WhatsApp Business account"})]}),i.jsxs("button",{onClick:()=>le("web"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(fP,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"Web Live Chat"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Add live chat to your website"})]}),i.jsxs("button",{onClick:()=>le("telegram"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-400 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(Xh,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"Telegram Bot"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Connect your Telegram bot via BotFather"})]})]}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-xs text-muted-foreground",children:"More platforms coming soon"})})]})]})]}),i.jsx(mle,{isOpen:A==="whatsapp",onClose:()=>N(null),onSubmit:Ze,isSubmitting:T}),i.jsx(ple,{isOpen:A==="telegram",onClose:()=>N(null),onSubmit:Ze,isSubmitting:T}),i.jsx(gle,{isOpen:A==="web",onClose:()=>N(null),onSubmit:Ze,isSubmitting:T}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Add a new platform inbox"})]})}),i.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:i.jsxs("div",{className:"max-w-4xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:he!=null&&he.display_name?he.display_name.toUpperCase():"Select Platform"}),i.jsx("p",{className:"text-muted-foreground",children:he?he.description||he.website_url||"":"Choose a platform to manage"})]}),i.jsx("div",{className:"flex gap-2",children:he&&i.jsxs(i.Fragment,{children:[i.jsx(Q,{variant:"outline",size:"sm",disabled:B||!j||j===(he==null?void 0:he.ai_profile_id),onClick:async()=>{if(he)try{R(!0);const se={};if(j&&j!==(he==null?void 0:he.ai_profile_id)&&(se.ai_profile_id=j),Object.keys(se).length===0){e({title:"No changes",description:"There are no changes to save."});return}await o(he.id,se),e({title:"Saved",description:"Platform settings updated."});try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}await s()}catch(se){e({title:"Error",description:(se==null?void 0:se.message)||"Failed to save platform",variant:"destructive"})}finally{R(!1)}},children:B?i.jsx(Gt,{className:"h-4 w-4 animate-spin"}):"Save"}),i.jsx(Q,{variant:"outline",size:"sm",disabled:yt,onClick:async()=>{if(he)try{Et(!0),await ut(he),e({title:"Deleted",description:"Channel has been deleted."}),y(null),await s()}catch(se){e({title:"Error",description:(se==null?void 0:se.message)||"Failed to delete channel",variant:"destructive"})}finally{Et(!1)}},children:yt?i.jsx(Gt,{className:"h-4 w-4 animate-spin"}):i.jsx(Ar,{className:"h-4 w-4"})})]})})]}),i.jsxs("div",{className:"grid gap-6",children:[he?he&&i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-base",children:"Channel Details"})}),i.jsxs(Je,{className:"space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Provider",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Jenis platform komunikasi yang digunakan (WhatsApp, Telegram, Live Chat)"})})]})]}),i.jsx("div",{className:"capitalize",children:Ue(he)})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Status",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Status koneksi platform saat ini (Aktif atau Tidak Aktif)"})})]})]}),i.jsx("div",{children:he.status==="active"?"Active":"Inactive"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Display Name",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Nama yang ditampilkan untuk platform ini"})})]})]}),i.jsx("div",{children:he.display_name||""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["AI Agent",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Agen AI yang ditugaskan untuk menangani percakapan di platform ini"})})]})]}),i.jsx("div",{children:((ze=u.find(se=>se.id===(he==null?void 0:he.ai_profile_id)))==null?void 0:ze.name)||""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Created At",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Tanggal dan waktu platform ini dibuat"})})]})]}),i.jsx("div",{children:he.created_at?new Date(he.created_at).toLocaleString():""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Secret Token",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Token rahasia untuk autentikasi dan keamanan platform"})})]})]}),i.jsx("div",{children:(()=>{const se=he==null?void 0:he.secret_token;return se?se.length>8?`${se.slice(0,4)}${se.slice(-2)}`:"":""})()})]})]}),i.jsxs("div",{className:"rounded-lg border p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-3",children:["Channel Profile",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Kelola foto profil atau logo untuk platform ini"})})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-12 w-12 rounded-full bg-muted flex items-center justify-center overflow-hidden",children:he!=null&&he.profile_photo_url?i.jsx("img",{src:(he==null?void 0:he.profile_photo_url)||"",alt:"Avatar",className:"h-12 w-12 object-cover"}):i.jsx("span",{className:"text-xs text-foreground/70",children:((he==null?void 0:he.display_name)||"?").charAt(0)})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"outline",size:"sm",onClick:()=>{var se;return(se=D.current)==null?void 0:se.click()},disabled:!he||L||C,children:L?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"})," Uploading..."]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(kc,{className:"h-4 w-4"})," Upload Avatar"]})})}),i.jsx(ce,{children:i.jsx("p",{children:"Unggah foto profil atau logo untuk platform ini"})})]}),i.jsx("input",{ref:D,type:"file",accept:"image/png,image/jpeg,image/webp",className:"hidden",onChange:async se=>{var Re;const Ne=(Re=se.currentTarget.files)==null?void 0:Re[0];if(!(!Ne||!he))try{$(!0),await l(he.id,Ne,he.org_id),e({title:"Avatar updated"}),await s()}catch(et){e({title:"Avatar upload failed",description:(et==null?void 0:et.message)||"Please try again",variant:"destructive"})}finally{$(!1);try{se.currentTarget.value=""}catch{}}}}),!!(he!=null&&he.logo_url||he!=null&&he.profile_photo_url)&&i.jsx(Q,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",disabled:!he||L||C,onClick:async()=>{if(he)try{U(!0),await c(he.id,he.org_id),await s(),e({title:"Avatar removed"})}catch(se){e({title:"Failed to remove avatar",description:(se==null?void 0:se.message)||"Please try again",variant:"destructive"})}finally{U(!1)}},children:C?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"})," Removing..."]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Ar,{className:"h-4 w-4"})," Remove"]})})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-2 text-xs text-muted-foreground",children:["Accepted: PNG, JPG, WEBP  Max 5 MB",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Format file yang didukung: PNG, JPG, WEBP dengan ukuran maksimal 5 MB"})})]})]})]})]})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:i.jsx(cv,{className:"w-8 h-8 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Platform Selected"}),i.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:"Select a platform from the left panel to view its details, manage settings, and configure agents."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 w-full max-w-2xl",children:[i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(cv,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"WhatsApp"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect your WhatsApp business account"})]}),i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(Xh,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"Telegram"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Set up a Telegram bot for customer support"})]}),i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(fP,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"Live Chat"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Embed chat widget on your website"})]})]})]}),Ut==="web"&&i.jsx("div",{className:"grid gap-6",children:Me(!0)}),Ut==="whatsapp"&&i.jsxs("div",{className:"grid gap-6",children:[Me(!1),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-base",children:"WhatsApp Sessions"})}),i.jsxs(Je,{children:[G&&i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading sessions..."}),W&&i.jsx("div",{className:"text-sm text-red-600",children:W}),!G&&!W&&i.jsx("div",{className:"space-y-3",children:(()=>{const se=((he==null?void 0:he.display_name)||"").toLowerCase().replace(/\s/g,""),Ne=P.filter(Re=>((Re==null?void 0:Re.name)||"").toLowerCase().replace(/\s/g,"")===se);return Ne.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No session found for this channel."}):Ne.map((Re,et)=>{var yi,Gr;const pt=((yi=Re==null?void 0:Re.me)==null?void 0:yi.id)||"",Z=pt?pt.replace(/@c\.us$/,""):"",ke=((Gr=Re==null?void 0:Re.me)==null?void 0:Gr.pushName)||"-",st=String((Re==null?void 0:Re.status)||"UNKNOWN").toUpperCase(),nt=(Re==null?void 0:Re.name)||"",Lt=X.has(nt)||re.has(nt)||ve===nt,Rn=!!Z,Cn=st==="SCAN_QR_CODE",An=st==="WORKING"&&Rn;return i.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:ke}),i.jsx("div",{className:"text-xs text-muted-foreground",children:Cn||!Rn?"Not connected":Z})]}),i.jsx("div",{className:"flex items-center gap-2",children:An?i.jsx(Q,{variant:"outline",size:"sm",className:"text-amber-700 border-amber-200 hover:bg-amber-50",disabled:Lt,onClick:()=>$t(nt),children:X.has(nt)?i.jsx(Gt,{className:"h-3 w-3 animate-spin"}):"Disconnect"}):i.jsx(Q,{variant:"outline",className:"text-blue-600 border-blue-200 hover:bg-blue-50",size:"sm",disabled:Lt,onClick:()=>_t(nt),children:ve===nt?i.jsx(Gt,{className:"h-3 w-3 animate-spin"}):"Connect"})})]},et)})})()})]})]}),i.jsx(mn,{open:Se,onOpenChange:Le,children:i.jsxs(cn,{className:"sm:max-w-md",children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Connect WhatsApp"}),i.jsx(Er,{children:"Scan this QR with your WhatsApp app to connect."})]}),oe&&i.jsx("div",{className:"text-sm text-red-600",children:oe}),q?i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[i.jsx("img",{src:q,alt:"QR",className:"w-56 h-56 rounded border"}),i.jsx(Q,{variant:"outline",onClick:()=>_t(ge||((he==null?void 0:he.display_name)||"").replace(/\s/g,"")),disabled:!!ve,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:ve?i.jsx(Gt,{className:"h-4 w-4 animate-spin"}):"Refresh QR"})]}):i.jsx("div",{className:"flex items-center justify-center h-60",children:i.jsx(Gt,{className:"h-6 w-6 animate-spin"})})]})})]}),Ut==="telegram"&&i.jsx("div",{className:"grid gap-6",children:Me(!1)})]}),he&&i.jsx("div",{className:"mt-8",children:i.jsxs(Ae,{className:"bg-red-50 border-2 border-red-200",children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-base text-red-700 flex items-center gap-2",children:["Danger Zone",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-red-600 cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Zona berbahaya untuk tindakan yang tidak dapat dibatalkan seperti menghapus platform"})})]})]})}),i.jsx(Je,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-red-700",children:"Delete this channel"}),i.jsx("div",{className:"text-xs text-red-600/80",children:"This action cannot be undone."})]}),i.jsxs(vb,{children:[i.jsx(Zoe,{asChild:!0,children:i.jsx(Q,{className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Channel"})}),i.jsxs(Cp,{children:[i.jsxs(Ap,{children:[i.jsx(Pp,{children:"Delete channel?"}),i.jsxs(Tp,{children:["This will permanently delete ",(he==null?void 0:he.display_name)||"this channel",". This action cannot be undone."]})]}),i.jsxs(Ep,{children:[i.jsx(Ip,{children:"Cancel"}),i.jsx(Op,{className:`bg-red-600 hover:bg-red-700 text-white ${yt?"animate-pulse cursor-wait":""}`,"aria-busy":yt,disabled:yt,onClick:async()=>{if(he)try{Et(!0),await ut(he),e({title:"Deleted",description:"Channel has been deleted."}),y(null),await s()}catch(se){e({title:"Error",description:(se==null?void 0:se.message)||"Failed to delete channel",variant:"destructive"})}finally{Et(!1)}},children:yt?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Deleting"})]}):"Delete"})]})]})]})]})})]})})]})})]})};var xle=Array.isArray,Ea=xle,yle=typeof ar=="object"&&ar&&ar.Object===Object&&ar,KU=yle,ble=KU,wle=typeof self=="object"&&self&&self.Object===Object&&self,jle=ble||wle||Function("return this")(),_s=jle,_le=_s,kle=_le.Symbol,Rp=kle,qT=Rp,GU=Object.prototype,Sle=GU.hasOwnProperty,Nle=GU.toString,zf=qT?qT.toStringTag:void 0;function Cle(e){var t=Sle.call(e,zf),n=e[zf];try{e[zf]=void 0;var r=!0}catch{}var a=Nle.call(e);return r&&(t?e[zf]=n:delete e[zf]),a}var Ale=Cle,Ele=Object.prototype,Ple=Ele.toString;function Tle(e){return Ple.call(e)}var Ole=Tle,WT=Rp,Ile=Ale,Rle=Ole,Mle="[object Null]",Dle="[object Undefined]",HT=WT?WT.toStringTag:void 0;function $le(e){return e==null?e===void 0?Dle:Mle:HT&&HT in Object(e)?Ile(e):Rle(e)}var mo=$le;function Lle(e){return e!=null&&typeof e=="object"}var po=Lle,Fle=mo,Ble=po,Ule="[object Symbol]";function zle(e){return typeof e=="symbol"||Ble(e)&&Fle(e)==Ule}var cf=zle,qle=Ea,Wle=cf,Hle=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vle=/^\w*$/;function Kle(e,t){if(qle(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Wle(e)?!0:Vle.test(e)||!Hle.test(e)||t!=null&&e in Object(t)}var dC=Kle;function Gle(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Pl=Gle;const uf=fn(Pl);var Yle=mo,Xle=Pl,Jle="[object AsyncFunction]",Qle="[object Function]",Zle="[object GeneratorFunction]",ece="[object Proxy]";function tce(e){if(!Xle(e))return!1;var t=Yle(e);return t==Qle||t==Zle||t==Jle||t==ece}var fC=tce;const Ft=fn(fC);var nce=_s,rce=nce["__core-js_shared__"],ace=rce,Uw=ace,VT=function(){var e=/[^.]+$/.exec(Uw&&Uw.keys&&Uw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ice(e){return!!VT&&VT in e}var sce=ice,oce=Function.prototype,lce=oce.toString;function cce(e){if(e!=null){try{return lce.call(e)}catch{}try{return e+""}catch{}}return""}var YU=cce,uce=fC,dce=sce,fce=Pl,hce=YU,mce=/[\\^$.*+?()[\]{}|]/g,pce=/^\[object .+?Constructor\]$/,gce=Function.prototype,vce=Object.prototype,xce=gce.toString,yce=vce.hasOwnProperty,bce=RegExp("^"+xce.call(yce).replace(mce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wce(e){if(!fce(e)||dce(e))return!1;var t=uce(e)?bce:pce;return t.test(hce(e))}var jce=wce;function _ce(e,t){return e==null?void 0:e[t]}var kce=_ce,Sce=jce,Nce=kce;function Cce(e,t){var n=Nce(e,t);return Sce(n)?n:void 0}var Qc=Cce,Ace=Qc,Ece=Ace(Object,"create"),_b=Ece,KT=_b;function Pce(){this.__data__=KT?KT(null):{},this.size=0}var Tce=Pce;function Oce(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Ice=Oce,Rce=_b,Mce="__lodash_hash_undefined__",Dce=Object.prototype,$ce=Dce.hasOwnProperty;function Lce(e){var t=this.__data__;if(Rce){var n=t[e];return n===Mce?void 0:n}return $ce.call(t,e)?t[e]:void 0}var Fce=Lce,Bce=_b,Uce=Object.prototype,zce=Uce.hasOwnProperty;function qce(e){var t=this.__data__;return Bce?t[e]!==void 0:zce.call(t,e)}var Wce=qce,Hce=_b,Vce="__lodash_hash_undefined__";function Kce(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Hce&&t===void 0?Vce:t,this}var Gce=Kce,Yce=Tce,Xce=Ice,Jce=Fce,Qce=Wce,Zce=Gce;function df(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}df.prototype.clear=Yce;df.prototype.delete=Xce;df.prototype.get=Jce;df.prototype.has=Qce;df.prototype.set=Zce;var eue=df;function tue(){this.__data__=[],this.size=0}var nue=tue;function rue(e,t){return e===t||e!==e&&t!==t}var hC=rue,aue=hC;function iue(e,t){for(var n=e.length;n--;)if(aue(e[n][0],t))return n;return-1}var kb=iue,sue=kb,oue=Array.prototype,lue=oue.splice;function cue(e){var t=this.__data__,n=sue(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():lue.call(t,n,1),--this.size,!0}var uue=cue,due=kb;function fue(e){var t=this.__data__,n=due(t,e);return n<0?void 0:t[n][1]}var hue=fue,mue=kb;function pue(e){return mue(this.__data__,e)>-1}var gue=pue,vue=kb;function xue(e,t){var n=this.__data__,r=vue(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var yue=xue,bue=nue,wue=uue,jue=hue,_ue=gue,kue=yue;function ff(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ff.prototype.clear=bue;ff.prototype.delete=wue;ff.prototype.get=jue;ff.prototype.has=_ue;ff.prototype.set=kue;var Sb=ff,Sue=Qc,Nue=_s,Cue=Sue(Nue,"Map"),mC=Cue,GT=eue,Aue=Sb,Eue=mC;function Pue(){this.size=0,this.__data__={hash:new GT,map:new(Eue||Aue),string:new GT}}var Tue=Pue;function Oue(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Iue=Oue,Rue=Iue;function Mue(e,t){var n=e.__data__;return Rue(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Nb=Mue,Due=Nb;function $ue(e){var t=Due(this,e).delete(e);return this.size-=t?1:0,t}var Lue=$ue,Fue=Nb;function Bue(e){return Fue(this,e).get(e)}var Uue=Bue,zue=Nb;function que(e){return zue(this,e).has(e)}var Wue=que,Hue=Nb;function Vue(e,t){var n=Hue(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Kue=Vue,Gue=Tue,Yue=Lue,Xue=Uue,Jue=Wue,Que=Kue;function hf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}hf.prototype.clear=Gue;hf.prototype.delete=Yue;hf.prototype.get=Xue;hf.prototype.has=Jue;hf.prototype.set=Que;var pC=hf,XU=pC,Zue="Expected a function";function gC(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Zue);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var o=e.apply(this,r);return n.cache=s.set(a,o)||s,o};return n.cache=new(gC.Cache||XU),n}gC.Cache=XU;var JU=gC;const ede=fn(JU);var tde=JU,nde=500;function rde(e){var t=tde(e,function(r){return n.size===nde&&n.clear(),r}),n=t.cache;return t}var ade=rde,ide=ade,sde=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ode=/\\(\\)?/g,lde=ide(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(sde,function(n,r,a,s){t.push(a?s.replace(ode,"$1"):r||n)}),t}),cde=lde;function ude(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var vC=ude,YT=Rp,dde=vC,fde=Ea,hde=cf,mde=1/0,XT=YT?YT.prototype:void 0,JT=XT?XT.toString:void 0;function QU(e){if(typeof e=="string")return e;if(fde(e))return dde(e,QU)+"";if(hde(e))return JT?JT.call(e):"";var t=e+"";return t=="0"&&1/e==-mde?"-0":t}var pde=QU,gde=pde;function vde(e){return e==null?"":gde(e)}var ZU=vde,xde=Ea,yde=dC,bde=cde,wde=ZU;function jde(e,t){return xde(e)?e:yde(e,t)?[e]:bde(wde(e))}var ez=jde,_de=cf,kde=1/0;function Sde(e){if(typeof e=="string"||_de(e))return e;var t=e+"";return t=="0"&&1/e==-kde?"-0":t}var Cb=Sde,Nde=ez,Cde=Cb;function Ade(e,t){t=Nde(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Cde(t[n++])];return n&&n==r?e:void 0}var xC=Ade,Ede=xC;function Pde(e,t,n){var r=e==null?void 0:Ede(e,t);return r===void 0?n:r}var tz=Pde;const fi=fn(tz);function Tde(e){return e==null}var Ode=Tde;const sn=fn(Ode);var Ide=mo,Rde=Ea,Mde=po,Dde="[object String]";function $de(e){return typeof e=="string"||!Rde(e)&&Mde(e)&&Ide(e)==Dde}var Lde=$de;const $c=fn(Lde);var nz={exports:{}},gn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yC=Symbol.for("react.element"),bC=Symbol.for("react.portal"),Ab=Symbol.for("react.fragment"),Eb=Symbol.for("react.strict_mode"),Pb=Symbol.for("react.profiler"),Tb=Symbol.for("react.provider"),Ob=Symbol.for("react.context"),Fde=Symbol.for("react.server_context"),Ib=Symbol.for("react.forward_ref"),Rb=Symbol.for("react.suspense"),Mb=Symbol.for("react.suspense_list"),Db=Symbol.for("react.memo"),$b=Symbol.for("react.lazy"),Bde=Symbol.for("react.offscreen"),rz;rz=Symbol.for("react.module.reference");function vi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case yC:switch(e=e.type,e){case Ab:case Pb:case Eb:case Rb:case Mb:return e;default:switch(e=e&&e.$$typeof,e){case Fde:case Ob:case Ib:case $b:case Db:case Tb:return e;default:return t}}case bC:return t}}}gn.ContextConsumer=Ob;gn.ContextProvider=Tb;gn.Element=yC;gn.ForwardRef=Ib;gn.Fragment=Ab;gn.Lazy=$b;gn.Memo=Db;gn.Portal=bC;gn.Profiler=Pb;gn.StrictMode=Eb;gn.Suspense=Rb;gn.SuspenseList=Mb;gn.isAsyncMode=function(){return!1};gn.isConcurrentMode=function(){return!1};gn.isContextConsumer=function(e){return vi(e)===Ob};gn.isContextProvider=function(e){return vi(e)===Tb};gn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===yC};gn.isForwardRef=function(e){return vi(e)===Ib};gn.isFragment=function(e){return vi(e)===Ab};gn.isLazy=function(e){return vi(e)===$b};gn.isMemo=function(e){return vi(e)===Db};gn.isPortal=function(e){return vi(e)===bC};gn.isProfiler=function(e){return vi(e)===Pb};gn.isStrictMode=function(e){return vi(e)===Eb};gn.isSuspense=function(e){return vi(e)===Rb};gn.isSuspenseList=function(e){return vi(e)===Mb};gn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ab||e===Pb||e===Eb||e===Rb||e===Mb||e===Bde||typeof e=="object"&&e!==null&&(e.$$typeof===$b||e.$$typeof===Db||e.$$typeof===Tb||e.$$typeof===Ob||e.$$typeof===Ib||e.$$typeof===rz||e.getModuleId!==void 0)};gn.typeOf=vi;nz.exports=gn;var Ude=nz.exports,zde=mo,qde=po,Wde="[object Number]";function Hde(e){return typeof e=="number"||qde(e)&&zde(e)==Wde}var az=Hde;const Vde=fn(az);var Kde=az;function Gde(e){return Kde(e)&&e!=+e}var Yde=Gde;const Mp=fn(Yde);var Di=function(t){return t===0?0:t>0?1:-1},ic=function(t){return $c(t)&&t.indexOf("%")===t.length-1},qe=function(t){return Vde(t)&&!Mp(t)},Xde=function(t){return sn(t)},mr=function(t){return qe(t)||$c(t)},Jde=0,Lb=function(t){var n=++Jde;return"".concat(t||"").concat(n)},Lc=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!qe(t)&&!$c(t))return r;var s;if(ic(t)){var o=t.indexOf("%");s=n*parseFloat(t.slice(0,o))/100}else s=+t;return Mp(s)&&(s=r),a&&s>n&&(s=n),s},zo=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},Qde=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},mu=function(t,n){return qe(t)&&qe(n)?function(r){return t+r*(n-t)}:function(){return n}};function m_(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):fi(r,t))===n})}var Zde=function(t,n){return qe(t)&&qe(n)?t-n:$c(t)&&$c(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function nd(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function p_(e){"@babel/helpers - typeof";return p_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p_(e)}var efe=["viewBox","children"],tfe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],QT=["points","pathLength"],zw={svg:efe,polygon:QT,polyline:QT},wC=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],sx=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(p.isValidElement(t)&&(r=t.props),!uf(r))return null;var a={};return Object.keys(r).forEach(function(s){wC.includes(s)&&(a[s]=n||function(o){return r[s](r,o)})}),a},nfe=function(t,n,r){return function(a){return t(n,r,a),null}},ox=function(t,n,r){if(!uf(t)||p_(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(s){var o=t[s];wC.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=nfe(o,n,r))}),a},rfe=["children"],afe=["children"];function ZT(e,t){if(e==null)return{};var n=ife(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ife(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var e2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Xs=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},t2=null,qw=null,jC=function e(t){if(t===t2&&Array.isArray(qw))return qw;var n=[];return p.Children.forEach(t,function(r){sn(r)||(Ude.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),qw=n,t2=t,n};function Bi(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return Xs(a)}):r=[Xs(t)],jC(e).forEach(function(a){var s=fi(a,"type.displayName")||fi(a,"type.name");r.indexOf(s)!==-1&&n.push(a)}),n}function Ma(e,t){var n=Bi(e,t);return n&&n[0]}var n2=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!qe(r)||r<=0||!qe(a)||a<=0)},sfe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],ofe=function(t){return t&&t.type&&$c(t.type)&&sfe.indexOf(t.type)>=0},lfe=function(t,n,r,a){var s,o=(s=zw==null?void 0:zw[a])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Ft(t)&&(a&&o.includes(n)||tfe.includes(n))||r&&wC.includes(n)},an=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(p.isValidElement(t)&&(a=t.props),!uf(a))return null;var s={};return Object.keys(a).forEach(function(o){var l;lfe((l=a)===null||l===void 0?void 0:l[o],o,n,r)&&(s[o]=a[o])}),s},g_=function e(t,n){if(t===n)return!0;var r=p.Children.count(t);if(r!==p.Children.count(n))return!1;if(r===0)return!0;if(r===1)return r2(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var s=t[a],o=n[a];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!r2(s,o))return!1}return!0},r2=function(t,n){if(sn(t)&&sn(n))return!0;if(!sn(t)&&!sn(n)){var r=t.props||{},a=r.children,s=ZT(r,rfe),o=n.props||{},l=o.children,c=ZT(o,afe);return a&&l?nd(s,c)&&g_(a,l):!a&&!l?nd(s,c):!1}return!1},a2=function(t,n){var r=[],a={};return jC(t).forEach(function(s,o){if(ofe(s))r.push(s);else if(s){var l=Xs(s.type),c=n[l]||{},u=c.handler,f=c.once;if(u&&(!f||!a[l])){var d=u(s,l,o);r.push(d),a[l]=!0}}}),r},cfe=function(t){var n=t&&t.type;return n&&e2[n]?e2[n]:null},ufe=function(t,n){return jC(n).indexOf(t)},dfe=["children","width","height","viewBox","className","style","title","desc"];function v_(){return v_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v_.apply(this,arguments)}function ffe(e,t){if(e==null)return{};var n=hfe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hfe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function x_(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,u=ffe(e,dfe),f=a||{width:n,height:r,x:0,y:0},d=Zt("recharts-surface",s);return V.createElement("svg",v_({},an(u,!0,"svg"),{className:d,width:n,height:r,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),V.createElement("title",null,l),V.createElement("desc",null,c),t)}var mfe=["children","className"];function y_(){return y_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y_.apply(this,arguments)}function pfe(e,t){if(e==null)return{};var n=gfe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gfe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var br=V.forwardRef(function(e,t){var n=e.children,r=e.className,a=pfe(e,mfe),s=Zt("recharts-layer",r);return V.createElement("g",y_({className:s},an(a,!0),{ref:t}),n)}),Js=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s]};function vfe(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(a);++r<a;)s[r]=e[r+t];return s}var xfe=vfe,yfe=xfe;function bfe(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:yfe(e,t,n)}var wfe=bfe,jfe="\\ud800-\\udfff",_fe="\\u0300-\\u036f",kfe="\\ufe20-\\ufe2f",Sfe="\\u20d0-\\u20ff",Nfe=_fe+kfe+Sfe,Cfe="\\ufe0e\\ufe0f",Afe="\\u200d",Efe=RegExp("["+Afe+jfe+Nfe+Cfe+"]");function Pfe(e){return Efe.test(e)}var iz=Pfe;function Tfe(e){return e.split("")}var Ofe=Tfe,sz="\\ud800-\\udfff",Ife="\\u0300-\\u036f",Rfe="\\ufe20-\\ufe2f",Mfe="\\u20d0-\\u20ff",Dfe=Ife+Rfe+Mfe,$fe="\\ufe0e\\ufe0f",Lfe="["+sz+"]",b_="["+Dfe+"]",w_="\\ud83c[\\udffb-\\udfff]",Ffe="(?:"+b_+"|"+w_+")",oz="[^"+sz+"]",lz="(?:\\ud83c[\\udde6-\\uddff]){2}",cz="[\\ud800-\\udbff][\\udc00-\\udfff]",Bfe="\\u200d",uz=Ffe+"?",dz="["+$fe+"]?",Ufe="(?:"+Bfe+"(?:"+[oz,lz,cz].join("|")+")"+dz+uz+")*",zfe=dz+uz+Ufe,qfe="(?:"+[oz+b_+"?",b_,lz,cz,Lfe].join("|")+")",Wfe=RegExp(w_+"(?="+w_+")|"+qfe+zfe,"g");function Hfe(e){return e.match(Wfe)||[]}var Vfe=Hfe,Kfe=Ofe,Gfe=iz,Yfe=Vfe;function Xfe(e){return Gfe(e)?Yfe(e):Kfe(e)}var Jfe=Xfe,Qfe=wfe,Zfe=iz,ehe=Jfe,the=ZU;function nhe(e){return function(t){t=the(t);var n=Zfe(t)?ehe(t):void 0,r=n?n[0]:t.charAt(0),a=n?Qfe(n,1).join(""):t.slice(1);return r[e]()+a}}var rhe=nhe,ahe=rhe,ihe=ahe("toUpperCase"),she=ihe;const Fb=fn(she);function kn(e){return function(){return e}}const fz=Math.cos,lx=Math.sin,Gi=Math.sqrt,cx=Math.PI,Bb=2*cx,j_=Math.PI,__=2*j_,Yl=1e-6,ohe=__-Yl;function hz(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function lhe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return hz;const n=10**t;return function(r){this._+=r[0];for(let a=1,s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class che{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?hz:lhe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,s,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,a,s){if(t=+t,n=+n,r=+r,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=r-t,u=a-n,f=o-t,d=l-n,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>Yl)if(!(Math.abs(d*c-u*f)>Yl)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,g=a-l,v=c*c+u*u,x=m*m+g*g,y=Math.sqrt(v),b=Math.sqrt(h),w=s*Math.tan((j_-Math.acos((v+h-x)/(2*y*b)))/2),j=w/b,k=w/y;Math.abs(j-1)>Yl&&this._append`L${t+j*f},${n+j*d}`,this._append`A${s},${s},0,0,${+(d*m>f*g)},${this._x1=t+k*c},${this._y1=n+k*u}`}}arc(t,n,r,a,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),c=r*Math.sin(a),u=t+l,f=n+c,d=1^o,h=o?a-s:s-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Yl||Math.abs(this._y1-f)>Yl)&&this._append`L${u},${f}`,r&&(h<0&&(h=h%__+__),h>ohe?this._append`A${r},${r},0,1,${d},${t-l},${n-c}A${r},${r},0,1,${d},${this._x1=u},${this._y1=f}`:h>Yl&&this._append`A${r},${r},0,${+(h>=j_)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function _C(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new che(t)}function kC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mz(e){this._context=e}mz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ub(e){return new mz(e)}function pz(e){return e[0]}function gz(e){return e[1]}function vz(e,t){var n=kn(!0),r=null,a=Ub,s=null,o=_C(l);e=typeof e=="function"?e:e===void 0?pz:kn(e),t=typeof t=="function"?t:t===void 0?gz:kn(t);function l(c){var u,f=(c=kC(c)).length,d,h=!1,m;for(r==null&&(s=a(m=o())),u=0;u<=f;++u)!(u<f&&n(d=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(d,u,c),+t(d,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:kn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:kn(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:kn(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,r!=null&&(s=a(r)),l):a},l.context=function(c){return arguments.length?(c==null?r=s=null:s=a(r=c),l):r},l}function Sg(e,t,n){var r=null,a=kn(!0),s=null,o=Ub,l=null,c=_C(u);e=typeof e=="function"?e:e===void 0?pz:kn(+e),t=typeof t=="function"?t:kn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?gz:kn(+n);function u(d){var h,m,g,v=(d=kC(d)).length,x,y=!1,b,w=new Array(v),j=new Array(v);for(s==null&&(l=o(b=c())),h=0;h<=v;++h){if(!(h<v&&a(x=d[h],h,d))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(w[g],j[g]);l.lineEnd(),l.areaEnd()}y&&(w[h]=+e(x,h,d),j[h]=+t(x,h,d),l.point(r?+r(x,h,d):w[h],n?+n(x,h,d):j[h]))}if(b)return l=null,b+""||null}function f(){return vz().defined(a).curve(o).context(s)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:kn(+d),r=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:kn(+d),u):e},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:kn(+d),u):r},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:kn(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:kn(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:kn(+d),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:kn(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,s!=null&&(l=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=l=null:l=o(s=d),u):s},u}class xz{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function uhe(e){return new xz(e,!0)}function dhe(e){return new xz(e,!1)}const SC={draw(e,t){const n=Gi(t/cx);e.moveTo(n,0),e.arc(0,0,n,0,Bb)}},fhe={draw(e,t){const n=Gi(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},yz=Gi(1/3),hhe=yz*2,mhe={draw(e,t){const n=Gi(t/hhe),r=n*yz;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},phe={draw(e,t){const n=Gi(t),r=-n/2;e.rect(r,r,n,n)}},ghe=.8908130915292852,bz=lx(cx/10)/lx(7*cx/10),vhe=lx(Bb/10)*bz,xhe=-fz(Bb/10)*bz,yhe={draw(e,t){const n=Gi(t*ghe),r=vhe*n,a=xhe*n;e.moveTo(0,-n),e.lineTo(r,a);for(let s=1;s<5;++s){const o=Bb*s/5,l=fz(o),c=lx(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*a,c*r+l*a)}e.closePath()}},Ww=Gi(3),bhe={draw(e,t){const n=-Gi(t/(Ww*3));e.moveTo(0,n*2),e.lineTo(-Ww*n,-n),e.lineTo(Ww*n,-n),e.closePath()}},Ya=-.5,Xa=Gi(3)/2,k_=1/Gi(12),whe=(k_/2+1)*3,jhe={draw(e,t){const n=Gi(t/whe),r=n/2,a=n*k_,s=r,o=n*k_+n,l=-s,c=o;e.moveTo(r,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(Ya*r-Xa*a,Xa*r+Ya*a),e.lineTo(Ya*s-Xa*o,Xa*s+Ya*o),e.lineTo(Ya*l-Xa*c,Xa*l+Ya*c),e.lineTo(Ya*r+Xa*a,Ya*a-Xa*r),e.lineTo(Ya*s+Xa*o,Ya*o-Xa*s),e.lineTo(Ya*l+Xa*c,Ya*c-Xa*l),e.closePath()}};function _he(e,t){let n=null,r=_C(a);e=typeof e=="function"?e:kn(e||SC),t=typeof t=="function"?t:kn(t===void 0?64:+t);function a(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:kn(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:kn(+s),a):t},a.context=function(s){return arguments.length?(n=s??null,a):n},a}function ux(){}function dx(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function wz(e){this._context=e}wz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function khe(e){return new wz(e)}function jz(e){this._context=e}jz.prototype={areaStart:ux,areaEnd:ux,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:dx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function She(e){return new jz(e)}function _z(e){this._context=e}_z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:dx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Nhe(e){return new _z(e)}function kz(e){this._context=e}kz.prototype={areaStart:ux,areaEnd:ux,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Che(e){return new kz(e)}function i2(e){return e<0?-1:1}function s2(e,t,n){var r=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(s*a+o*r)/(r+a);return(i2(s)+i2(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function o2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Hw(e,t,n){var r=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-r)/3;e._context.bezierCurveTo(r+l,a+l*t,s-l,o-l*n,s,o)}function fx(e){this._context=e}fx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Hw(this,this._t0,o2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Hw(this,o2(this,n=s2(this,e,t)),n);break;default:Hw(this,this._t0,n=s2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Sz(e){this._context=new Nz(e)}(Sz.prototype=Object.create(fx.prototype)).point=function(e,t){fx.prototype.point.call(this,t,e)};function Nz(e){this._context=e}Nz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,s){this._context.bezierCurveTo(t,e,r,n,s,a)}};function Ahe(e){return new fx(e)}function Ehe(e){return new Sz(e)}function Cz(e){this._context=e}Cz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=l2(e),a=l2(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],a[0][s],r[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function l2(e){var t,n=e.length-1,r,a=new Array(n),s=new Array(n),o=new Array(n);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function Phe(e){return new Cz(e)}function zb(e,t){this._context=e,this._t=t}zb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function The(e){return new zb(e,.5)}function Ohe(e){return new zb(e,0)}function Ihe(e){return new zb(e,1)}function Ad(e,t){if((o=e.length)>1)for(var n=1,r,a,s=e[t[0]],o,l=s.length;n<o;++n)for(a=s,s=e[t[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function S_(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Rhe(e,t){return e[t]}function Mhe(e){const t=[];return t.key=e,t}function Dhe(){var e=kn([]),t=S_,n=Ad,r=Rhe;function a(s){var o=Array.from(e.apply(this,arguments),Mhe),l,c=o.length,u=-1,f;for(const d of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(d,o[l].key,u,s)]).data=d;for(l=0,f=kC(t(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:kn(Array.from(s)),a):e},a.value=function(s){return arguments.length?(r=typeof s=="function"?s:kn(+s),a):r},a.order=function(s){return arguments.length?(t=s==null?S_:typeof s=="function"?s:kn(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(n=s??Ad,a):n},a}function $he(e,t){if((r=e.length)>0){for(var n,r,a=0,s=e[0].length,o;a<s;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}Ad(e,t)}}function Lhe(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,s=r.length;n<s;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}Ad(e,t)}}function Fhe(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,s,o;r<s;++r){for(var l=0,c=0,u=0;l<o;++l){for(var f=e[t[l]],d=f[r][1]||0,h=f[r-1][1]||0,m=(d-h)/2,g=0;g<l;++g){var v=e[t[g]],x=v[r][1]||0,y=v[r-1][1]||0;m+=x-y}c+=d,u+=m*d}a[r-1][1]+=a[r-1][0]=n,c&&(n-=u/c)}a[r-1][1]+=a[r-1][0]=n,Ad(e,t)}}function pm(e){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pm(e)}var Bhe=["type","size","sizeType"];function N_(){return N_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N_.apply(this,arguments)}function c2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function u2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c2(Object(n),!0).forEach(function(r){Uhe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uhe(e,t,n){return t=zhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zhe(e){var t=qhe(e,"string");return pm(t)=="symbol"?t:t+""}function qhe(e,t){if(pm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Whe(e,t){if(e==null)return{};var n=Hhe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Hhe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Az={symbolCircle:SC,symbolCross:fhe,symbolDiamond:mhe,symbolSquare:phe,symbolStar:yhe,symbolTriangle:bhe,symbolWye:jhe},Vhe=Math.PI/180,Khe=function(t){var n="symbol".concat(Fb(t));return Az[n]||SC},Ghe=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Vhe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Yhe=function(t,n){Az["symbol".concat(Fb(t))]=n},NC=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,s=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=Whe(t,Bhe),u=u2(u2({},c),{},{type:r,size:s,sizeType:l}),f=function(){var x=Khe(r),y=_he().type(x).size(Ghe(s,l,r));return y()},d=u.className,h=u.cx,m=u.cy,g=an(u,!0);return h===+h&&m===+m&&s===+s?V.createElement("path",N_({},g,{className:Zt("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(m,")"),d:f()})):null};NC.registerSymbol=Yhe;function Ed(e){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function C_(){return C_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C_.apply(this,arguments)}function d2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Xhe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d2(Object(n),!0).forEach(function(r){gm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qhe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pz(r.key),r)}}function Zhe(e,t,n){return t&&Qhe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function eme(e,t,n){return t=hx(t),tme(e,Ez()?Reflect.construct(t,n||[],hx(e).constructor):t.apply(e,n))}function tme(e,t){if(t&&(Ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nme(e)}function nme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ez(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ez=function(){return!!e})()}function hx(e){return hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hx(e)}function rme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A_(e,t)}function A_(e,t){return A_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},A_(e,t)}function gm(e,t,n){return t=Pz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pz(e){var t=ame(e,"string");return Ed(t)=="symbol"?t:t+""}function ame(e,t){if(Ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ja=32,CC=function(e){function t(){return Jhe(this,t),eme(this,t,arguments)}return rme(t,e),Zhe(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,s=Ja/2,o=Ja/6,l=Ja/3,c=r.inactive?a:r.color;if(r.type==="plainline")return V.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:Ja,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return V.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(Ja,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return V.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Ja/8,"h").concat(Ja,"v").concat(Ja*3/4,"h").concat(-Ja,"z"),className:"recharts-legend-icon"});if(V.isValidElement(r.legendIcon)){var u=Xhe({},r);return delete u.legendIcon,V.cloneElement(r.legendIcon,u)}return V.createElement(NC,{fill:c,cx:s,cy:s,size:Ja,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,s=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:Ja,height:Ja},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,g){var v=m.formatter||c,x=Zt(gm(gm({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var y=Ft(m.value)?null:m.value;Js(!Ft(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return V.createElement("li",C_({className:x,style:d,key:"legend-item-".concat(g)},ox(r.props,m,g)),V.createElement(x_,{width:o,height:o,viewBox:f,style:h},r.renderIcon(m)),V.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},v?v(y,m,g):y))})}},{key:"render",value:function(){var r=this.props,a=r.payload,s=r.layout,o=r.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return V.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(p.PureComponent);gm(CC,"displayName","Legend");gm(CC,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var ime=Sb;function sme(){this.__data__=new ime,this.size=0}var ome=sme;function lme(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var cme=lme;function ume(e){return this.__data__.get(e)}var dme=ume;function fme(e){return this.__data__.has(e)}var hme=fme,mme=Sb,pme=mC,gme=pC,vme=200;function xme(e,t){var n=this.__data__;if(n instanceof mme){var r=n.__data__;if(!pme||r.length<vme-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new gme(r)}return n.set(e,t),this.size=n.size,this}var yme=xme,bme=Sb,wme=ome,jme=cme,_me=dme,kme=hme,Sme=yme;function mf(e){var t=this.__data__=new bme(e);this.size=t.size}mf.prototype.clear=wme;mf.prototype.delete=jme;mf.prototype.get=_me;mf.prototype.has=kme;mf.prototype.set=Sme;var Tz=mf,Nme="__lodash_hash_undefined__";function Cme(e){return this.__data__.set(e,Nme),this}var Ame=Cme;function Eme(e){return this.__data__.has(e)}var Pme=Eme,Tme=pC,Ome=Ame,Ime=Pme;function mx(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Tme;++t<n;)this.add(e[t])}mx.prototype.add=mx.prototype.push=Ome;mx.prototype.has=Ime;var Oz=mx;function Rme(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Iz=Rme;function Mme(e,t){return e.has(t)}var Rz=Mme,Dme=Oz,$me=Iz,Lme=Rz,Fme=1,Bme=2;function Ume(e,t,n,r,a,s){var o=n&Fme,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(e),f=s.get(t);if(u&&f)return u==t&&f==e;var d=-1,h=!0,m=n&Bme?new Dme:void 0;for(s.set(e,t),s.set(t,e);++d<l;){var g=e[d],v=t[d];if(r)var x=o?r(v,g,d,t,e,s):r(g,v,d,e,t,s);if(x!==void 0){if(x)continue;h=!1;break}if(m){if(!$me(t,function(y,b){if(!Lme(m,b)&&(g===y||a(g,y,n,r,s)))return m.push(b)})){h=!1;break}}else if(!(g===v||a(g,v,n,r,s))){h=!1;break}}return s.delete(e),s.delete(t),h}var Mz=Ume,zme=_s,qme=zme.Uint8Array,Wme=qme;function Hme(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var Vme=Hme;function Kme(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var AC=Kme,f2=Rp,h2=Wme,Gme=hC,Yme=Mz,Xme=Vme,Jme=AC,Qme=1,Zme=2,epe="[object Boolean]",tpe="[object Date]",npe="[object Error]",rpe="[object Map]",ape="[object Number]",ipe="[object RegExp]",spe="[object Set]",ope="[object String]",lpe="[object Symbol]",cpe="[object ArrayBuffer]",upe="[object DataView]",m2=f2?f2.prototype:void 0,Vw=m2?m2.valueOf:void 0;function dpe(e,t,n,r,a,s,o){switch(n){case upe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case cpe:return!(e.byteLength!=t.byteLength||!s(new h2(e),new h2(t)));case epe:case tpe:case ape:return Gme(+e,+t);case npe:return e.name==t.name&&e.message==t.message;case ipe:case ope:return e==t+"";case rpe:var l=Xme;case spe:var c=r&Qme;if(l||(l=Jme),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=Zme,o.set(e,t);var f=Yme(l(e),l(t),r,a,s,o);return o.delete(e),f;case lpe:if(Vw)return Vw.call(e)==Vw.call(t)}return!1}var fpe=dpe;function hpe(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var Dz=hpe,mpe=Dz,ppe=Ea;function gpe(e,t,n){var r=t(e);return ppe(e)?r:mpe(r,n(e))}var vpe=gpe;function xpe(e,t){for(var n=-1,r=e==null?0:e.length,a=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[a++]=o)}return s}var ype=xpe;function bpe(){return[]}var wpe=bpe,jpe=ype,_pe=wpe,kpe=Object.prototype,Spe=kpe.propertyIsEnumerable,p2=Object.getOwnPropertySymbols,Npe=p2?function(e){return e==null?[]:(e=Object(e),jpe(p2(e),function(t){return Spe.call(e,t)}))}:_pe,Cpe=Npe;function Ape(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Epe=Ape,Ppe=mo,Tpe=po,Ope="[object Arguments]";function Ipe(e){return Tpe(e)&&Ppe(e)==Ope}var Rpe=Ipe,g2=Rpe,Mpe=po,$z=Object.prototype,Dpe=$z.hasOwnProperty,$pe=$z.propertyIsEnumerable,Lpe=g2(function(){return arguments}())?g2:function(e){return Mpe(e)&&Dpe.call(e,"callee")&&!$pe.call(e,"callee")},EC=Lpe,px={exports:{}};function Fpe(){return!1}var Bpe=Fpe;px.exports;(function(e,t){var n=_s,r=Bpe,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(px,px.exports);var Lz=px.exports,Upe=9007199254740991,zpe=/^(?:0|[1-9]\d*)$/;function qpe(e,t){var n=typeof e;return t=t??Upe,!!t&&(n=="number"||n!="symbol"&&zpe.test(e))&&e>-1&&e%1==0&&e<t}var PC=qpe,Wpe=9007199254740991;function Hpe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Wpe}var TC=Hpe,Vpe=mo,Kpe=TC,Gpe=po,Ype="[object Arguments]",Xpe="[object Array]",Jpe="[object Boolean]",Qpe="[object Date]",Zpe="[object Error]",ege="[object Function]",tge="[object Map]",nge="[object Number]",rge="[object Object]",age="[object RegExp]",ige="[object Set]",sge="[object String]",oge="[object WeakMap]",lge="[object ArrayBuffer]",cge="[object DataView]",uge="[object Float32Array]",dge="[object Float64Array]",fge="[object Int8Array]",hge="[object Int16Array]",mge="[object Int32Array]",pge="[object Uint8Array]",gge="[object Uint8ClampedArray]",vge="[object Uint16Array]",xge="[object Uint32Array]",Tn={};Tn[uge]=Tn[dge]=Tn[fge]=Tn[hge]=Tn[mge]=Tn[pge]=Tn[gge]=Tn[vge]=Tn[xge]=!0;Tn[Ype]=Tn[Xpe]=Tn[lge]=Tn[Jpe]=Tn[cge]=Tn[Qpe]=Tn[Zpe]=Tn[ege]=Tn[tge]=Tn[nge]=Tn[rge]=Tn[age]=Tn[ige]=Tn[sge]=Tn[oge]=!1;function yge(e){return Gpe(e)&&Kpe(e.length)&&!!Tn[Vpe(e)]}var bge=yge;function wge(e){return function(t){return e(t)}}var Fz=wge,gx={exports:{}};gx.exports;(function(e,t){var n=KU,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===r,o=s&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(gx,gx.exports);var jge=gx.exports,_ge=bge,kge=Fz,v2=jge,x2=v2&&v2.isTypedArray,Sge=x2?kge(x2):_ge,Bz=Sge,Nge=Epe,Cge=EC,Age=Ea,Ege=Lz,Pge=PC,Tge=Bz,Oge=Object.prototype,Ige=Oge.hasOwnProperty;function Rge(e,t){var n=Age(e),r=!n&&Cge(e),a=!n&&!r&&Ege(e),s=!n&&!r&&!a&&Tge(e),o=n||r||a||s,l=o?Nge(e.length,String):[],c=l.length;for(var u in e)(t||Ige.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Pge(u,c)))&&l.push(u);return l}var Mge=Rge,Dge=Object.prototype;function $ge(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Dge;return e===n}var Lge=$ge;function Fge(e,t){return function(n){return e(t(n))}}var Uz=Fge,Bge=Uz,Uge=Bge(Object.keys,Object),zge=Uge,qge=Lge,Wge=zge,Hge=Object.prototype,Vge=Hge.hasOwnProperty;function Kge(e){if(!qge(e))return Wge(e);var t=[];for(var n in Object(e))Vge.call(e,n)&&n!="constructor"&&t.push(n);return t}var Gge=Kge,Yge=fC,Xge=TC;function Jge(e){return e!=null&&Xge(e.length)&&!Yge(e)}var Dp=Jge,Qge=Mge,Zge=Gge,eve=Dp;function tve(e){return eve(e)?Qge(e):Zge(e)}var qb=tve,nve=vpe,rve=Cpe,ave=qb;function ive(e){return nve(e,ave,rve)}var sve=ive,y2=sve,ove=1,lve=Object.prototype,cve=lve.hasOwnProperty;function uve(e,t,n,r,a,s){var o=n&ove,l=y2(e),c=l.length,u=y2(t),f=u.length;if(c!=f&&!o)return!1;for(var d=c;d--;){var h=l[d];if(!(o?h in t:cve.call(t,h)))return!1}var m=s.get(e),g=s.get(t);if(m&&g)return m==t&&g==e;var v=!0;s.set(e,t),s.set(t,e);for(var x=o;++d<c;){h=l[d];var y=e[h],b=t[h];if(r)var w=o?r(b,y,h,t,e,s):r(y,b,h,e,t,s);if(!(w===void 0?y===b||a(y,b,n,r,s):w)){v=!1;break}x||(x=h=="constructor")}if(v&&!x){var j=e.constructor,k=t.constructor;j!=k&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof k=="function"&&k instanceof k)&&(v=!1)}return s.delete(e),s.delete(t),v}var dve=uve,fve=Qc,hve=_s,mve=fve(hve,"DataView"),pve=mve,gve=Qc,vve=_s,xve=gve(vve,"Promise"),yve=xve,bve=Qc,wve=_s,jve=bve(wve,"Set"),zz=jve,_ve=Qc,kve=_s,Sve=_ve(kve,"WeakMap"),Nve=Sve,E_=pve,P_=mC,T_=yve,O_=zz,I_=Nve,qz=mo,pf=YU,b2="[object Map]",Cve="[object Object]",w2="[object Promise]",j2="[object Set]",_2="[object WeakMap]",k2="[object DataView]",Ave=pf(E_),Eve=pf(P_),Pve=pf(T_),Tve=pf(O_),Ove=pf(I_),Xl=qz;(E_&&Xl(new E_(new ArrayBuffer(1)))!=k2||P_&&Xl(new P_)!=b2||T_&&Xl(T_.resolve())!=w2||O_&&Xl(new O_)!=j2||I_&&Xl(new I_)!=_2)&&(Xl=function(e){var t=qz(e),n=t==Cve?e.constructor:void 0,r=n?pf(n):"";if(r)switch(r){case Ave:return k2;case Eve:return b2;case Pve:return w2;case Tve:return j2;case Ove:return _2}return t});var Ive=Xl,Kw=Tz,Rve=Mz,Mve=fpe,Dve=dve,S2=Ive,N2=Ea,C2=Lz,$ve=Bz,Lve=1,A2="[object Arguments]",E2="[object Array]",Ng="[object Object]",Fve=Object.prototype,P2=Fve.hasOwnProperty;function Bve(e,t,n,r,a,s){var o=N2(e),l=N2(t),c=o?E2:S2(e),u=l?E2:S2(t);c=c==A2?Ng:c,u=u==A2?Ng:u;var f=c==Ng,d=u==Ng,h=c==u;if(h&&C2(e)){if(!C2(t))return!1;o=!0,f=!1}if(h&&!f)return s||(s=new Kw),o||$ve(e)?Rve(e,t,n,r,a,s):Mve(e,t,c,n,r,a,s);if(!(n&Lve)){var m=f&&P2.call(e,"__wrapped__"),g=d&&P2.call(t,"__wrapped__");if(m||g){var v=m?e.value():e,x=g?t.value():t;return s||(s=new Kw),a(v,x,n,r,s)}}return h?(s||(s=new Kw),Dve(e,t,n,r,a,s)):!1}var Uve=Bve,zve=Uve,T2=po;function Wz(e,t,n,r,a){return e===t?!0:e==null||t==null||!T2(e)&&!T2(t)?e!==e&&t!==t:zve(e,t,n,r,Wz,a)}var OC=Wz,qve=Tz,Wve=OC,Hve=1,Vve=2;function Kve(e,t,n,r){var a=n.length,s=a,o=!r;if(e==null)return!s;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){l=n[a];var c=l[0],u=e[c],f=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var d=new qve;if(r)var h=r(u,f,c,e,t,d);if(!(h===void 0?Wve(f,u,Hve|Vve,r,d):h))return!1}}return!0}var Gve=Kve,Yve=Pl;function Xve(e){return e===e&&!Yve(e)}var Hz=Xve,Jve=Hz,Qve=qb;function Zve(e){for(var t=Qve(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Jve(a)]}return t}var exe=Zve;function txe(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var Vz=txe,nxe=Gve,rxe=exe,axe=Vz;function ixe(e){var t=rxe(e);return t.length==1&&t[0][2]?axe(t[0][0],t[0][1]):function(n){return n===e||nxe(n,e,t)}}var sxe=ixe;function oxe(e,t){return e!=null&&t in Object(e)}var lxe=oxe,cxe=ez,uxe=EC,dxe=Ea,fxe=PC,hxe=TC,mxe=Cb;function pxe(e,t,n){t=cxe(t,e);for(var r=-1,a=t.length,s=!1;++r<a;){var o=mxe(t[r]);if(!(s=e!=null&&n(e,o)))break;e=e[o]}return s||++r!=a?s:(a=e==null?0:e.length,!!a&&hxe(a)&&fxe(o,a)&&(dxe(e)||uxe(e)))}var gxe=pxe,vxe=lxe,xxe=gxe;function yxe(e,t){return e!=null&&xxe(e,t,vxe)}var bxe=yxe,wxe=OC,jxe=tz,_xe=bxe,kxe=dC,Sxe=Hz,Nxe=Vz,Cxe=Cb,Axe=1,Exe=2;function Pxe(e,t){return kxe(e)&&Sxe(t)?Nxe(Cxe(e),t):function(n){var r=jxe(n,e);return r===void 0&&r===t?_xe(n,e):wxe(t,r,Axe|Exe)}}var Txe=Pxe;function Oxe(e){return e}var gf=Oxe;function Ixe(e){return function(t){return t==null?void 0:t[e]}}var Rxe=Ixe,Mxe=xC;function Dxe(e){return function(t){return Mxe(t,e)}}var $xe=Dxe,Lxe=Rxe,Fxe=$xe,Bxe=dC,Uxe=Cb;function zxe(e){return Bxe(e)?Lxe(Uxe(e)):Fxe(e)}var qxe=zxe,Wxe=sxe,Hxe=Txe,Vxe=gf,Kxe=Ea,Gxe=qxe;function Yxe(e){return typeof e=="function"?e:e==null?Vxe:typeof e=="object"?Kxe(e)?Hxe(e[0],e[1]):Wxe(e):Gxe(e)}var Tl=Yxe;function Xxe(e,t,n,r){for(var a=e.length,s=n+(r?1:-1);r?s--:++s<a;)if(t(e[s],s,e))return s;return-1}var Kz=Xxe;function Jxe(e){return e!==e}var Qxe=Jxe;function Zxe(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var eye=Zxe,tye=Kz,nye=Qxe,rye=eye;function aye(e,t,n){return t===t?rye(e,t,n):tye(e,nye,n)}var iye=aye,sye=iye;function oye(e,t){var n=e==null?0:e.length;return!!n&&sye(e,t,0)>-1}var lye=oye;function cye(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var uye=cye;function dye(){}var fye=dye,Gw=zz,hye=fye,mye=AC,pye=1/0,gye=Gw&&1/mye(new Gw([,-0]))[1]==pye?function(e){return new Gw(e)}:hye,vye=gye,xye=Oz,yye=lye,bye=uye,wye=Rz,jye=vye,_ye=AC,kye=200;function Sye(e,t,n){var r=-1,a=yye,s=e.length,o=!0,l=[],c=l;if(n)o=!1,a=bye;else if(s>=kye){var u=t?null:jye(e);if(u)return _ye(u);o=!1,a=wye,c=new xye}else c=t?[]:l;e:for(;++r<s;){var f=e[r],d=t?t(f):f;if(f=n||f!==0?f:0,o&&d===d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),l.push(f)}else a(c,d,n)||(c!==l&&c.push(d),l.push(f))}return l}var Nye=Sye,Cye=Tl,Aye=Nye;function Eye(e,t){return e&&e.length?Aye(e,Cye(t)):[]}var Pye=Eye;const O2=fn(Pye);function Gz(e,t,n){return t===!0?O2(e,n):Ft(t)?O2(e,t):e}function Pd(e){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pd(e)}var Tye=["ref"];function I2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ps(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I2(Object(n),!0).forEach(function(r){Wb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xz(r.key),r)}}function Iye(e,t,n){return t&&R2(e.prototype,t),n&&R2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rye(e,t,n){return t=vx(t),Mye(e,Yz()?Reflect.construct(t,n||[],vx(e).constructor):t.apply(e,n))}function Mye(e,t){if(t&&(Pd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dye(e)}function Dye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yz=function(){return!!e})()}function vx(e){return vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vx(e)}function $ye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R_(e,t)}function R_(e,t){return R_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},R_(e,t)}function Wb(e,t,n){return t=Xz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xz(e){var t=Lye(e,"string");return Pd(t)=="symbol"?t:t+""}function Lye(e,t){if(Pd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fye(e,t){if(e==null)return{};var n=Bye(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Bye(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Uye(e){return e.value}function zye(e,t){if(V.isValidElement(e))return V.cloneElement(e,t);if(typeof e=="function")return V.createElement(e,t);t.ref;var n=Fye(t,Tye);return V.createElement(CC,n)}var M2=1,ii=function(e){function t(){var n;Oye(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=Rye(this,t,[].concat(a)),Wb(n,"lastBoundingBox",{width:-1,height:-1}),n}return $ye(t,e),Iye(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>M2||Math.abs(a.height-this.lastBoundingBox.height)>M2)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ps({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,s=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,f=a.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();d={left:((u||0)-m.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((f||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ps(Ps({},d),h)}},{key:"render",value:function(){var r=this,a=this.props,s=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,d=Ps(Ps({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return V.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(m){r.wrapperNode=m}},zye(s,Ps(Ps({},this.props),{},{payload:Gz(f,u,Uye)})))}}],[{key:"getWithHeight",value:function(r,a){var s=Ps(Ps({},this.defaultProps),r.props),o=s.layout;return o==="vertical"&&qe(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(p.PureComponent);Wb(ii,"displayName","Legend");Wb(ii,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var D2=Rp,qye=EC,Wye=Ea,$2=D2?D2.isConcatSpreadable:void 0;function Hye(e){return Wye(e)||qye(e)||!!($2&&e&&e[$2])}var Vye=Hye,Kye=Dz,Gye=Vye;function Jz(e,t,n,r,a){var s=-1,o=e.length;for(n||(n=Gye),a||(a=[]);++s<o;){var l=e[s];t>0&&n(l)?t>1?Jz(l,t-1,n,r,a):Kye(a,l):r||(a[a.length]=l)}return a}var Qz=Jz;function Yye(e){return function(t,n,r){for(var a=-1,s=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++a];if(n(s[c],c,s)===!1)break}return t}}var Xye=Yye,Jye=Xye,Qye=Jye(),Zye=Qye,ebe=Zye,tbe=qb;function nbe(e,t){return e&&ebe(e,t,tbe)}var Zz=nbe,rbe=Dp;function abe(e,t){return function(n,r){if(n==null)return n;if(!rbe(n))return e(n,r);for(var a=n.length,s=t?a:-1,o=Object(n);(t?s--:++s<a)&&r(o[s],s,o)!==!1;);return n}}var ibe=abe,sbe=Zz,obe=ibe,lbe=obe(sbe),IC=lbe,cbe=IC,ube=Dp;function dbe(e,t){var n=-1,r=ube(e)?Array(e.length):[];return cbe(e,function(a,s,o){r[++n]=t(a,s,o)}),r}var e6=dbe;function fbe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var hbe=fbe,L2=cf;function mbe(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,s=L2(e),o=t!==void 0,l=t===null,c=t===t,u=L2(t);if(!l&&!u&&!s&&e>t||s&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!a)return 1;if(!r&&!s&&!u&&e<t||u&&n&&a&&!r&&!s||l&&n&&a||!o&&a||!c)return-1}return 0}var pbe=mbe,gbe=pbe;function vbe(e,t,n){for(var r=-1,a=e.criteria,s=t.criteria,o=a.length,l=n.length;++r<o;){var c=gbe(a[r],s[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return e.index-t.index}var xbe=vbe,Yw=vC,ybe=xC,bbe=Tl,wbe=e6,jbe=hbe,_be=Fz,kbe=xbe,Sbe=gf,Nbe=Ea;function Cbe(e,t,n){t.length?t=Yw(t,function(s){return Nbe(s)?function(o){return ybe(o,s.length===1?s[0]:s)}:s}):t=[Sbe];var r=-1;t=Yw(t,_be(bbe));var a=wbe(e,function(s,o,l){var c=Yw(t,function(u){return u(s)});return{criteria:c,index:++r,value:s}});return jbe(a,function(s,o){return kbe(s,o,n)})}var Abe=Cbe;function Ebe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Pbe=Ebe,Tbe=Pbe,F2=Math.max;function Obe(e,t,n){return t=F2(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=F2(r.length-t,0),o=Array(s);++a<s;)o[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),Tbe(e,this,l)}}var Ibe=Obe;function Rbe(e){return function(){return e}}var Mbe=Rbe,Dbe=Qc,$be=function(){try{var e=Dbe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),t6=$be,Lbe=Mbe,B2=t6,Fbe=gf,Bbe=B2?function(e,t){return B2(e,"toString",{configurable:!0,enumerable:!1,value:Lbe(t),writable:!0})}:Fbe,Ube=Bbe,zbe=800,qbe=16,Wbe=Date.now;function Hbe(e){var t=0,n=0;return function(){var r=Wbe(),a=qbe-(r-n);if(n=r,a>0){if(++t>=zbe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Vbe=Hbe,Kbe=Ube,Gbe=Vbe,Ybe=Gbe(Kbe),Xbe=Ybe,Jbe=gf,Qbe=Ibe,Zbe=Xbe;function e0e(e,t){return Zbe(Qbe(e,t,Jbe),e+"")}var t0e=e0e,n0e=hC,r0e=Dp,a0e=PC,i0e=Pl;function s0e(e,t,n){if(!i0e(n))return!1;var r=typeof t;return(r=="number"?r0e(n)&&a0e(t,n.length):r=="string"&&t in n)?n0e(n[t],e):!1}var Hb=s0e,o0e=Qz,l0e=Abe,c0e=t0e,U2=Hb,u0e=c0e(function(e,t){if(e==null)return[];var n=t.length;return n>1&&U2(e,t[0],t[1])?t=[]:n>2&&U2(t[0],t[1],t[2])&&(t=[t[0]]),l0e(e,o0e(t,1),[])}),d0e=u0e;const RC=fn(d0e);function vm(e){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(e)}function M_(){return M_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M_.apply(this,arguments)}function f0e(e,t){return g0e(e)||p0e(e,t)||m0e(e,t)||h0e()}function h0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m0e(e,t){if(e){if(typeof e=="string")return z2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z2(e,t)}}function z2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function g0e(e){if(Array.isArray(e))return e}function q2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Xw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q2(Object(n),!0).forEach(function(r){v0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function v0e(e,t,n){return t=x0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x0e(e){var t=y0e(e,"string");return vm(t)=="symbol"?t:t+""}function y0e(e,t){if(vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b0e(e){return Array.isArray(e)&&mr(e[0])&&mr(e[1])?e.join(" ~ "):e}var w0e=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,s=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,d=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,v=t.label,x=t.labelFormatter,y=t.accessibilityLayer,b=y===void 0?!1:y,w=function(){if(f&&f.length){var F={padding:0,margin:0},E=(h?RC(f,h):f).map(function(O,M){if(O.type==="none")return null;var B=Xw({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},l),R=O.formatter||d||b0e,L=O.value,$=O.name,C=L,U=$;if(R&&C!=null&&U!=null){var D=R(L,$,O,M,f);if(Array.isArray(D)){var P=f0e(D,2);C=P[0],U=P[1]}else C=D}return V.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:B},mr(U)?V.createElement("span",{className:"recharts-tooltip-item-name"},U):null,mr(U)?V.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,V.createElement("span",{className:"recharts-tooltip-item-value"},C),V.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return V.createElement("ul",{className:"recharts-tooltip-item-list",style:F},E)}return null},j=Xw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),k=Xw({margin:0},u),_=!sn(v),S=_?v:"",A=Zt("recharts-default-tooltip",m),N=Zt("recharts-tooltip-label",g);_&&x&&f!==void 0&&f!==null&&(S=x(v,f));var T=b?{role:"status","aria-live":"assertive"}:{};return V.createElement("div",M_({className:A,style:j},T),V.createElement("p",{className:N,style:k},V.isValidElement(S)?S:"".concat(S)),w())};function xm(e){"@babel/helpers - typeof";return xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xm(e)}function Cg(e,t,n){return t=j0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j0e(e){var t=_0e(e,"string");return xm(t)=="symbol"?t:t+""}function _0e(e,t){if(xm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qf="recharts-tooltip-wrapper",k0e={visibility:"hidden"};function S0e(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Zt(qf,Cg(Cg(Cg(Cg({},"".concat(qf,"-right"),qe(n)&&t&&qe(t.x)&&n>=t.x),"".concat(qf,"-left"),qe(n)&&t&&qe(t.x)&&n<t.x),"".concat(qf,"-bottom"),qe(r)&&t&&qe(t.y)&&r>=t.y),"".concat(qf,"-top"),qe(r)&&t&&qe(t.y)&&r<t.y))}function W2(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(s&&qe(s[r]))return s[r];var f=n[r]-l-a,d=n[r]+a;if(t[r])return o[r]?f:d;if(o[r]){var h=f,m=c[r];return h<m?Math.max(d,c[r]):Math.max(f,c[r])}var g=d+l,v=c[r]+u;return g>v?Math.max(f,c[r]):Math.max(d,c[r])}function N0e(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function C0e(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,f,d;return o.height>0&&o.width>0&&n?(f=W2({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=W2({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=N0e({translateX:f,translateY:d,useTranslate3d:l})):u=k0e,{cssProperties:u,cssClasses:S0e({translateX:f,translateY:d,coordinate:n})}}function Td(e){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Td(e)}function H2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function V2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H2(Object(n),!0).forEach(function(r){$_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function A0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r6(r.key),r)}}function P0e(e,t,n){return t&&E0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function T0e(e,t,n){return t=xx(t),O0e(e,n6()?Reflect.construct(t,n||[],xx(e).constructor):t.apply(e,n))}function O0e(e,t){if(t&&(Td(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I0e(e)}function I0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n6=function(){return!!e})()}function xx(e){return xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xx(e)}function R0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D_(e,t)}function D_(e,t){return D_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},D_(e,t)}function $_(e,t,n){return t=r6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r6(e){var t=M0e(e,"string");return Td(t)=="symbol"?t:t+""}function M0e(e,t){if(Td(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K2=1,D0e=function(e){function t(){var n;A0e(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=T0e(this,t,[].concat(a)),$_(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),$_(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),n}return R0e(t,e),P0e(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>K2||Math.abs(r.height-this.state.lastBoundingBox.height)>K2)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,f=a.coordinate,d=a.hasPayload,h=a.isAnimationActive,m=a.offset,g=a.position,v=a.reverseDirection,x=a.useTranslate3d,y=a.viewBox,b=a.wrapperStyle,w=C0e({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:m,position:g,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:y}),j=w.cssClasses,k=w.cssProperties,_=V2(V2({transition:h&&s?"transform ".concat(l,"ms ").concat(c):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},b);return V.createElement("div",{tabIndex:-1,className:j,style:_,ref:function(A){r.wrapperNode=A}},u)}}])}(p.PureComponent),$0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ll={isSsr:$0e(),get:function(t){return ll[t]},set:function(t,n){if(typeof t=="string")ll[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(a){ll[a]=t[a]})}}};function Od(e){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Od(e)}function G2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Y2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G2(Object(n),!0).forEach(function(r){MC(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function L0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i6(r.key),r)}}function B0e(e,t,n){return t&&F0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function U0e(e,t,n){return t=yx(t),z0e(e,a6()?Reflect.construct(t,n||[],yx(e).constructor):t.apply(e,n))}function z0e(e,t){if(t&&(Od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q0e(e)}function q0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a6=function(){return!!e})()}function yx(e){return yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yx(e)}function W0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L_(e,t)}function L_(e,t){return L_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},L_(e,t)}function MC(e,t,n){return t=i6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i6(e){var t=H0e(e,"string");return Od(t)=="symbol"?t:t+""}function H0e(e,t){if(Od(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V0e(e){return e.dataKey}function K0e(e,t){return V.isValidElement(e)?V.cloneElement(e,t):typeof e=="function"?V.createElement(e,t):V.createElement(w0e,t)}var Qn=function(e){function t(){return L0e(this,t),U0e(this,t,arguments)}return W0e(t,e),B0e(t,[{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,f=a.coordinate,d=a.filterNull,h=a.isAnimationActive,m=a.offset,g=a.payload,v=a.payloadUniqBy,x=a.position,y=a.reverseDirection,b=a.useTranslate3d,w=a.viewBox,j=a.wrapperStyle,k=g??[];d&&k.length&&(k=Gz(g.filter(function(S){return S.value!=null&&(S.hide!==!0||r.props.includeHidden)}),v,V0e));var _=k.length>0;return V.createElement(D0e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:s,coordinate:f,hasPayload:_,offset:m,position:x,reverseDirection:y,useTranslate3d:b,viewBox:w,wrapperStyle:j},K0e(u,Y2(Y2({},this.props),{},{payload:k})))}}])}(p.PureComponent);MC(Qn,"displayName","Tooltip");MC(Qn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ll.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var G0e=_s,Y0e=function(){return G0e.Date.now()},X0e=Y0e,J0e=/\s/;function Q0e(e){for(var t=e.length;t--&&J0e.test(e.charAt(t)););return t}var Z0e=Q0e,ewe=Z0e,twe=/^\s+/;function nwe(e){return e&&e.slice(0,ewe(e)+1).replace(twe,"")}var rwe=nwe,awe=rwe,X2=Pl,iwe=cf,J2=NaN,swe=/^[-+]0x[0-9a-f]+$/i,owe=/^0b[01]+$/i,lwe=/^0o[0-7]+$/i,cwe=parseInt;function uwe(e){if(typeof e=="number")return e;if(iwe(e))return J2;if(X2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=X2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=awe(e);var n=owe.test(e);return n||lwe.test(e)?cwe(e.slice(2),n?2:8):swe.test(e)?J2:+e}var s6=uwe,dwe=Pl,Jw=X0e,Q2=s6,fwe="Expected a function",hwe=Math.max,mwe=Math.min;function pwe(e,t,n){var r,a,s,o,l,c,u=0,f=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(fwe);t=Q2(t)||0,dwe(n)&&(f=!!n.leading,d="maxWait"in n,s=d?hwe(Q2(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h);function m(_){var S=r,A=a;return r=a=void 0,u=_,o=e.apply(A,S),o}function g(_){return u=_,l=setTimeout(y,t),f?m(_):o}function v(_){var S=_-c,A=_-u,N=t-S;return d?mwe(N,s-A):N}function x(_){var S=_-c,A=_-u;return c===void 0||S>=t||S<0||d&&A>=s}function y(){var _=Jw();if(x(_))return b(_);l=setTimeout(y,v(_))}function b(_){return l=void 0,h&&r?m(_):(r=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,r=c=a=l=void 0}function j(){return l===void 0?o:b(Jw())}function k(){var _=Jw(),S=x(_);if(r=arguments,a=this,c=_,S){if(l===void 0)return g(c);if(d)return clearTimeout(l),l=setTimeout(y,t),m(c)}return l===void 0&&(l=setTimeout(y,t)),o}return k.cancel=w,k.flush=j,k}var gwe=pwe,vwe=gwe,xwe=Pl,ywe="Expected a function";function bwe(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(ywe);return xwe(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),vwe(e,t,{leading:r,maxWait:t,trailing:a})}var wwe=bwe;const o6=fn(wwe);function ym(e){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ym(e)}function Z2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ag(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z2(Object(n),!0).forEach(function(r){jwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jwe(e,t,n){return t=_we(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _we(e){var t=kwe(e,"string");return ym(t)=="symbol"?t:t+""}function kwe(e,t){if(ym(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Swe(e,t){return Ewe(e)||Awe(e,t)||Cwe(e,t)||Nwe()}function Nwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cwe(e,t){if(e){if(typeof e=="string")return eO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eO(e,t)}}function eO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Awe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Ewe(e){if(Array.isArray(e))return e}var ei=p.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,s=e.width,o=s===void 0?"100%":s,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,v=g===void 0?0:g,x=e.id,y=e.className,b=e.onResize,w=e.style,j=w===void 0?{}:w,k=p.useRef(null),_=p.useRef();_.current=b,p.useImperativeHandle(t,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var S=p.useState({containerWidth:a.width,containerHeight:a.height}),A=Swe(S,2),N=A[0],T=A[1],I=p.useCallback(function(E,O){T(function(M){var B=Math.round(E),R=Math.round(O);return M.containerWidth===B&&M.containerHeight===R?M:{containerWidth:B,containerHeight:R}})},[]);p.useEffect(function(){var E=function($){var C,U=$[0].contentRect,D=U.width,P=U.height;I(D,P),(C=_.current)===null||C===void 0||C.call(_,D,P)};v>0&&(E=o6(E,v,{trailing:!0,leading:!1}));var O=new ResizeObserver(E),M=k.current.getBoundingClientRect(),B=M.width,R=M.height;return I(B,R),O.observe(k.current),function(){O.disconnect()}},[I,v]);var F=p.useMemo(function(){var E=N.containerWidth,O=N.containerHeight;if(E<0||O<0)return null;Js(ic(o)||ic(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Js(!n||n>0,"The aspect(%s) must be greater than zero.",n);var M=ic(o)?E:o,B=ic(c)?O:c;n&&n>0&&(M?B=M/n:B&&(M=B*n),h&&B>h&&(B=h)),Js(M>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,B,o,c,f,d,n);var R=!Array.isArray(m)&&Xs(m.type).endsWith("Chart");return V.Children.map(m,function(L){return V.isValidElement(L)?p.cloneElement(L,Ag({width:M,height:B},R?{style:Ag({height:"100%",width:"100%",maxHeight:B,maxWidth:M},L.props.style)}:{})):L})},[n,m,c,h,d,f,N,o]);return V.createElement("div",{id:x?"".concat(x):void 0,className:Zt("recharts-responsive-container",y),style:Ag(Ag({},j),{},{width:o,height:c,minWidth:f,minHeight:d,maxHeight:h}),ref:k},F)}),l6=function(t){return null};l6.displayName="Cell";function bm(e){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(e)}function tO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function F_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tO(Object(n),!0).forEach(function(r){Pwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Pwe(e,t,n){return t=Twe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Twe(e){var t=Owe(e,"string");return bm(t)=="symbol"?t:t+""}function Owe(e,t){if(bm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pu={widthCache:{},cacheCount:0},Iwe=2e3,Rwe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},nO="recharts_measurement_span";function Mwe(e){var t=F_({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var kh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ll.isSsr)return{width:0,height:0};var r=Mwe(n),a=JSON.stringify({text:t,copyStyle:r});if(pu.widthCache[a])return pu.widthCache[a];try{var s=document.getElementById(nO);s||(s=document.createElement("span"),s.setAttribute("id",nO),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=F_(F_({},Rwe),r);Object.assign(s.style,o),s.textContent="".concat(t);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return pu.widthCache[a]=c,++pu.cacheCount>Iwe&&(pu.cacheCount=0,pu.widthCache={}),c}catch{return{width:0,height:0}}},Dwe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function wm(e){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wm(e)}function bx(e,t){return Bwe(e)||Fwe(e,t)||Lwe(e,t)||$we()}function $we(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lwe(e,t){if(e){if(typeof e=="string")return rO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rO(e,t)}}function rO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Bwe(e){if(Array.isArray(e))return e}function Uwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qwe(r.key),r)}}function zwe(e,t,n){return t&&aO(e.prototype,t),n&&aO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qwe(e){var t=Wwe(e,"string");return wm(t)=="symbol"?t:t+""}function Wwe(e,t){if(wm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var iO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Hwe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Vwe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,c6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Kwe=Object.keys(c6),zu="NaN";function Gwe(e,t){return e*c6[t]}var Eg=function(){function e(t,n){Uwe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!Hwe.test(n)&&(this.num=NaN,this.unit=""),Kwe.includes(n)&&(this.num=Gwe(t,n),this.unit="px")}return zwe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=Vwe.exec(n))!==null&&r!==void 0?r:[],s=bx(a,3),o=s[1],l=s[2];return new e(parseFloat(o),l??"")}}])}();function u6(e){if(e.includes(zu))return zu;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=iO.exec(t))!==null&&n!==void 0?n:[],a=bx(r,4),s=a[1],o=a[2],l=a[3],c=Eg.parse(s??""),u=Eg.parse(l??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return zu;t=t.replace(iO,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,h=(d=sO.exec(t))!==null&&d!==void 0?d:[],m=bx(h,4),g=m[1],v=m[2],x=m[3],y=Eg.parse(g??""),b=Eg.parse(x??""),w=v==="+"?y.add(b):y.subtract(b);if(w.isNaN())return zu;t=t.replace(sO,w.toString())}return t}var oO=/\(([^()]*)\)/;function Ywe(e){for(var t=e;t.includes("(");){var n=oO.exec(t),r=bx(n,2),a=r[1];t=t.replace(oO,u6(a))}return t}function Xwe(e){var t=e.replace(/\s+/g,"");return t=Ywe(t),t=u6(t),t}function Jwe(e){try{return Xwe(e)}catch{return zu}}function Qw(e){var t=Jwe(e.slice(5,-1));return t===zu?"":t}var Qwe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Zwe=["dx","dy","angle","className","breakAll"];function B_(){return B_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B_.apply(this,arguments)}function lO(e,t){if(e==null)return{};var n=eje(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function eje(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function cO(e,t){return aje(e)||rje(e,t)||nje(e,t)||tje()}function tje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nje(e,t){if(e){if(typeof e=="string")return uO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uO(e,t)}}function uO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function aje(e){if(Array.isArray(e))return e}var d6=/[ \f\n\r\t\v\u2028\u2029]+/,f6=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var s=[];sn(n)||(r?s=n.toString().split(""):s=n.toString().split(d6));var o=s.map(function(c){return{word:c,width:kh(c,a).width}}),l=r?0:kh("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},ije=function(t,n,r,a,s){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,f=qe(o),d=l,h=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce(function(B,R){var L=R.word,$=R.width,C=B[B.length-1];if(C&&(a==null||s||C.width+$+r<Number(a)))C.words.push(L),C.width+=$+r;else{var U={words:[L],width:$};B.push(U)}return B},[])},m=h(n),g=function(M){return M.reduce(function(B,R){return B.width>R.width?B:R})};if(!f)return m;for(var v="",x=function(M){var B=d.slice(0,M),R=f6({breakAll:u,style:c,children:B+v}).wordsWithComputedWidth,L=h(R),$=L.length>o||g(L).width>Number(a);return[$,L]},y=0,b=d.length-1,w=0,j;y<=b&&w<=d.length-1;){var k=Math.floor((y+b)/2),_=k-1,S=x(_),A=cO(S,2),N=A[0],T=A[1],I=x(k),F=cO(I,1),E=F[0];if(!N&&!E&&(y=k+1),N&&E&&(b=k-1),!N&&E){j=T;break}w++}return j||m},dO=function(t){var n=sn(t)?[]:t.toString().split(d6);return[{words:n}]},sje=function(t){var n=t.width,r=t.scaleToFit,a=t.children,s=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!ll.isSsr){var c,u,f=f6({breakAll:o,children:a,style:s});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;c=d,u=h}else return dO(a);return ije({breakAll:o,children:a,maxLines:l,style:s},c,u,n,r)}return dO(a)},fO="#808080",wx=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,d=f===void 0?!1:f,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,v=g===void 0?"end":g,x=t.fill,y=x===void 0?fO:x,b=lO(t,Qwe),w=p.useMemo(function(){return sje({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:d,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,d,b.style,b.width]),j=b.dx,k=b.dy,_=b.angle,S=b.className,A=b.breakAll,N=lO(b,Zwe);if(!mr(r)||!mr(s))return null;var T=r+(qe(j)?j:0),I=s+(qe(k)?k:0),F;switch(v){case"start":F=Qw("calc(".concat(u,")"));break;case"middle":F=Qw("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:F=Qw("calc(".concat(w.length-1," * -").concat(l,")"));break}var E=[];if(d){var O=w[0].width,M=b.width;E.push("scale(".concat((qe(M)?M/O:1)/O,")"))}return _&&E.push("rotate(".concat(_,", ").concat(T,", ").concat(I,")")),E.length&&(N.transform=E.join(" ")),V.createElement("text",B_({},an(N,!0),{x:T,y:I,className:Zt("recharts-text",S),textAnchor:m,fill:y.includes("url")?fO:y}),w.map(function(B,R){var L=B.words.join(A?"":" ");return V.createElement("tspan",{x:T,dy:R===0?F:l,key:"".concat(L,"-").concat(R)},L)}))};function cl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function oje(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function DC(e){let t,n,r;e.length!==2?(t=cl,n=(l,c)=>cl(e(l),c),r=(l,c)=>e(l)-c):(t=e===cl||e===oje?e:lje,n=e,r=e);function a(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;n(l[d],c)<0?u=d+1:f=d}while(u<f)}return u}function s(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;n(l[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function o(l,c,u=0,f=l.length){const d=a(l,c,u,f-1);return d>u&&r(l[d-1],c)>-r(l[d],c)?d-1:d}return{left:a,center:o,right:s}}function lje(){return 0}function h6(e){return e===null?NaN:+e}function*cje(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const uje=DC(cl),$p=uje.right;DC(h6).center;class hO extends Map{constructor(t,n=hje){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(mO(this,t))}has(t){return super.has(mO(this,t))}set(t,n){return super.set(dje(this,t),n)}delete(t){return super.delete(fje(this,t))}}function mO({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function dje({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function fje({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function hje(e){return e!==null&&typeof e=="object"?e.valueOf():e}function mje(e=cl){if(e===cl)return m6;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function m6(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const pje=Math.sqrt(50),gje=Math.sqrt(10),vje=Math.sqrt(2);function jx(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),s=r/Math.pow(10,a),o=s>=pje?10:s>=gje?5:s>=vje?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?jx(e,t,n*2):[l,c,u]}function U_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,s,o]=r?jx(t,e,n):jx(e,t,n);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function z_(e,t,n){return t=+t,e=+e,n=+n,jx(e,t,n)[2]}function q_(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?z_(t,e,n):z_(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function pO(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function gO(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function p6(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?m6:mje(a);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,f=Math.log(c),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(t-u*d/c+h)),g=Math.min(r,Math.floor(t+(c-u)*d/c+h));p6(e,t,m,g,a)}const s=e[t];let o=n,l=r;for(Wf(e,n,t),a(e[r],s)>0&&Wf(e,n,r);o<l;){for(Wf(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[n],s)===0?Wf(e,n,l):(++l,Wf(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function Wf(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function xje(e,t,n){if(e=Float64Array.from(cje(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return gO(e);if(t>=1)return pO(e);var r,a=(r-1)*t,s=Math.floor(a),o=pO(p6(e,s).subarray(0,s+1)),l=gO(e.subarray(s+1));return o+(l-o)*(a-s)}}function yje(e,t,n=h6){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,s=Math.floor(a),o=+n(e[s],s,e),l=+n(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function bje(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(a);++r<a;)s[r]=e+r*n;return s}function xi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function go(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const W_=Symbol("implicit");function $C(){var e=new hO,t=[],n=[],r=W_;function a(s){let o=e.get(s);if(o===void 0){if(r!==W_)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new hO;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return $C(t,n).unknown(r)},xi.apply(a,arguments),a}function jm(){var e=$C().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,s,o,l=!1,c=0,u=0,f=.5;delete e.unknown;function d(){var h=t().length,m=a<r,g=m?a:r,v=m?r:a;s=(v-g)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),g+=(v-g-s*(h-c))*f,o=s*(1-c),l&&(g=Math.round(g),o=Math.round(o));var x=bje(h).map(function(y){return g+s*y});return n(m?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([r,a]=h,r=+r,a=+a,d()):[r,a]},e.rangeRound=function(h){return[r,a]=h,r=+r,a=+a,l=!0,d()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,d()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),d()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),d()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.copy=function(){return jm(t(),[r,a]).round(l).paddingInner(c).paddingOuter(u).align(f)},xi.apply(d(),arguments)}function g6(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return g6(t())},e}function Sh(){return g6(jm.apply(null,arguments).paddingInner(1))}function LC(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function v6(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Lp(){}var _m=.7,_x=1/_m,rd="\\s*([+-]?\\d+)\\s*",km="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ms="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wje=/^#([0-9a-f]{3,8})$/,jje=new RegExp(`^rgb\\(${rd},${rd},${rd}\\)$`),_je=new RegExp(`^rgb\\(${ms},${ms},${ms}\\)$`),kje=new RegExp(`^rgba\\(${rd},${rd},${rd},${km}\\)$`),Sje=new RegExp(`^rgba\\(${ms},${ms},${ms},${km}\\)$`),Nje=new RegExp(`^hsl\\(${km},${ms},${ms}\\)$`),Cje=new RegExp(`^hsla\\(${km},${ms},${ms},${km}\\)$`),vO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};LC(Lp,Sm,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:xO,formatHex:xO,formatHex8:Aje,formatHsl:Eje,formatRgb:yO,toString:yO});function xO(){return this.rgb().formatHex()}function Aje(){return this.rgb().formatHex8()}function Eje(){return x6(this).formatHsl()}function yO(){return this.rgb().formatRgb()}function Sm(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=wje.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?bO(t):n===3?new ja(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Pg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Pg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=jje.exec(e))?new ja(t[1],t[2],t[3],1):(t=_je.exec(e))?new ja(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=kje.exec(e))?Pg(t[1],t[2],t[3],t[4]):(t=Sje.exec(e))?Pg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Nje.exec(e))?_O(t[1],t[2]/100,t[3]/100,1):(t=Cje.exec(e))?_O(t[1],t[2]/100,t[3]/100,t[4]):vO.hasOwnProperty(e)?bO(vO[e]):e==="transparent"?new ja(NaN,NaN,NaN,0):null}function bO(e){return new ja(e>>16&255,e>>8&255,e&255,1)}function Pg(e,t,n,r){return r<=0&&(e=t=n=NaN),new ja(e,t,n,r)}function Pje(e){return e instanceof Lp||(e=Sm(e)),e?(e=e.rgb(),new ja(e.r,e.g,e.b,e.opacity)):new ja}function H_(e,t,n,r){return arguments.length===1?Pje(e):new ja(e,t,n,r??1)}function ja(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}LC(ja,H_,v6(Lp,{brighter(e){return e=e==null?_x:Math.pow(_x,e),new ja(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_m:Math.pow(_m,e),new ja(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ja(vc(this.r),vc(this.g),vc(this.b),kx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wO,formatHex:wO,formatHex8:Tje,formatRgb:jO,toString:jO}));function wO(){return`#${sc(this.r)}${sc(this.g)}${sc(this.b)}`}function Tje(){return`#${sc(this.r)}${sc(this.g)}${sc(this.b)}${sc((isNaN(this.opacity)?1:this.opacity)*255)}`}function jO(){const e=kx(this.opacity);return`${e===1?"rgb(":"rgba("}${vc(this.r)}, ${vc(this.g)}, ${vc(this.b)}${e===1?")":`, ${e})`}`}function kx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function sc(e){return e=vc(e),(e<16?"0":"")+e.toString(16)}function _O(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ri(e,t,n,r)}function x6(e){if(e instanceof Ri)return new Ri(e.h,e.s,e.l,e.opacity);if(e instanceof Lp||(e=Sm(e)),!e)return new Ri;if(e instanceof Ri)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new Ri(o,l,c,e.opacity)}function Oje(e,t,n,r){return arguments.length===1?x6(e):new Ri(e,t,n,r??1)}function Ri(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}LC(Ri,Oje,v6(Lp,{brighter(e){return e=e==null?_x:Math.pow(_x,e),new Ri(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_m:Math.pow(_m,e),new Ri(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new ja(Zw(e>=240?e-240:e+120,a,r),Zw(e,a,r),Zw(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Ri(kO(this.h),Tg(this.s),Tg(this.l),kx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=kx(this.opacity);return`${e===1?"hsl(":"hsla("}${kO(this.h)}, ${Tg(this.s)*100}%, ${Tg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function kO(e){return e=(e||0)%360,e<0?e+360:e}function Tg(e){return Math.max(0,Math.min(1,e||0))}function Zw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const FC=e=>()=>e;function Ije(e,t){return function(n){return e+n*t}}function Rje(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Mje(e){return(e=+e)==1?y6:function(t,n){return n-t?Rje(t,n,e):FC(isNaN(t)?n:t)}}function y6(e,t){var n=t-e;return n?Ije(e,n):FC(isNaN(e)?t:e)}const SO=function e(t){var n=Mje(t);function r(a,s){var o=n((a=H_(a)).r,(s=H_(s)).r),l=n(a.g,s.g),c=n(a.b,s.b),u=y6(a.opacity,s.opacity);return function(f){return a.r=o(f),a.g=l(f),a.b=c(f),a.opacity=u(f),a+""}}return r.gamma=e,r}(1);function Dje(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(s){for(a=0;a<n;++a)r[a]=e[a]*(1-s)+t[a]*s;return r}}function $je(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Lje(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)a[o]=vf(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=a[o](l);return s}}function Fje(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Sx(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Bje(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=vf(e[a],t[a]):r[a]=t[a];return function(s){for(a in n)r[a]=n[a](s);return r}}var V_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ej=new RegExp(V_.source,"g");function Uje(e){return function(){return e}}function zje(e){return function(t){return e(t)+""}}function qje(e,t){var n=V_.lastIndex=ej.lastIndex=0,r,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=V_.exec(e))&&(a=ej.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Sx(r,a)})),n=ej.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?zje(c[0].x):Uje(t):(t=c.length,function(u){for(var f=0,d;f<t;++f)l[(d=c[f]).i]=d.x(u);return l.join("")})}function vf(e,t){var n=typeof t,r;return t==null||n==="boolean"?FC(t):(n==="number"?Sx:n==="string"?(r=Sm(t))?(t=r,SO):qje:t instanceof Sm?SO:t instanceof Date?Fje:$je(t)?Dje:Array.isArray(t)?Lje:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Bje:Sx)(e,t)}function BC(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Wje(e,t){t===void 0&&(t=e,e=vf);for(var n=0,r=t.length-1,a=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[l](o-l)}}function Hje(e){return function(){return e}}function Nx(e){return+e}var NO=[0,1];function aa(e){return e}function K_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Hje(isNaN(t)?NaN:.5)}function Vje(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Kje(e,t,n){var r=e[0],a=e[1],s=t[0],o=t[1];return a<r?(r=K_(a,r),s=n(o,s)):(r=K_(r,a),s=n(s,o)),function(l){return s(r(l))}}function Gje(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=K_(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(l){var c=$p(e,l,1,r)-1;return s[c](a[c](l))}}function Fp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Vb(){var e=NO,t=NO,n=vf,r,a,s,o=aa,l,c,u;function f(){var h=Math.min(e.length,t.length);return o!==aa&&(o=Vje(e[0],e[h-1])),l=h>2?Gje:Kje,c=u=null,d}function d(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(r),t,n)))(r(o(h)))}return d.invert=function(h){return o(a((u||(u=l(t,e.map(r),Sx)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,Nx),f()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),n=BC,f()},d.clamp=function(h){return arguments.length?(o=h?!0:aa,f()):o!==aa},d.interpolate=function(h){return arguments.length?(n=h,f()):n},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,m){return r=h,a=m,f()}}function UC(){return Vb()(aa,aa)}function Yje(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Cx(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Id(e){return e=Cx(Math.abs(e)),e?e[1]:NaN}function Xje(e,t){return function(n,r){for(var a=n.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(a-=l,a+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Jje(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Qje=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nm(e){if(!(t=Qje.exec(e)))throw new Error("invalid format: "+e);var t;return new zC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Nm.prototype=zC.prototype;function zC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}zC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zje(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var b6;function e1e(e,t){var n=Cx(e,t);if(!n)return e+"";var r=n[0],a=n[1],s=a-(b6=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Cx(e,Math.max(0,t+s-1))[0]}function CO(e,t){var n=Cx(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const AO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Yje,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>CO(e*100,t),r:CO,s:e1e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function EO(e){return e}var PO=Array.prototype.map,TO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function t1e(e){var t=e.grouping===void 0||e.thousands===void 0?EO:Xje(PO.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?EO:Jje(PO.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Nm(d);var h=d.fill,m=d.align,g=d.sign,v=d.symbol,x=d.zero,y=d.width,b=d.comma,w=d.precision,j=d.trim,k=d.type;k==="n"?(b=!0,k="g"):AO[k]||(w===void 0&&(w=12),j=!0,k="g"),(x||h==="0"&&m==="=")&&(x=!0,h="0",m="=");var _=v==="$"?n:v==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",S=v==="$"?r:/[%p]/.test(k)?o:"",A=AO[k],N=/[defgprs%]/.test(k);w=w===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function T(I){var F=_,E=S,O,M,B;if(k==="c")E=A(I)+E,I="";else{I=+I;var R=I<0||1/I<0;if(I=isNaN(I)?c:A(Math.abs(I),w),j&&(I=Zje(I)),R&&+I==0&&g!=="+"&&(R=!1),F=(R?g==="("?g:l:g==="-"||g==="("?"":g)+F,E=(k==="s"?TO[8+b6/3]:"")+E+(R&&g==="("?")":""),N){for(O=-1,M=I.length;++O<M;)if(B=I.charCodeAt(O),48>B||B>57){E=(B===46?a+I.slice(O+1):I.slice(O))+E,I=I.slice(0,O);break}}}b&&!x&&(I=t(I,1/0));var L=F.length+I.length+E.length,$=L<y?new Array(y-L+1).join(h):"";switch(b&&x&&(I=t($+I,$.length?y-E.length:1/0),$=""),m){case"<":I=F+I+E+$;break;case"=":I=F+$+I+E;break;case"^":I=$.slice(0,L=$.length>>1)+F+I+E+$.slice(L);break;default:I=$+F+I+E;break}return s(I)}return T.toString=function(){return d+""},T}function f(d,h){var m=u((d=Nm(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(Id(h)/3)))*3,v=Math.pow(10,-g),x=TO[8+g/3];return function(y){return m(v*y)+x}}return{format:u,formatPrefix:f}}var Og,qC,w6;n1e({thousands:",",grouping:[3],currency:["$",""]});function n1e(e){return Og=t1e(e),qC=Og.format,w6=Og.formatPrefix,Og}function r1e(e){return Math.max(0,-Id(Math.abs(e)))}function a1e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Id(t)/3)))*3-Id(Math.abs(e)))}function i1e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Id(t)-Id(e))+1}function j6(e,t,n,r){var a=q_(e,t,n),s;switch(r=Nm(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=a1e(a,o))&&(r.precision=s),w6(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=i1e(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=r1e(a))&&(r.precision=s-(r.type==="%")*2);break}}return qC(r)}function Ol(e){var t=e.domain;return e.ticks=function(n){var r=t();return U_(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return j6(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,s=r.length-1,o=r[a],l=r[s],c,u,f=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);f-- >0;){if(u=z_(o,l,n),u===c)return r[a]=o,r[s]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Ax(){var e=UC();return e.copy=function(){return Fp(e,Ax())},xi.apply(e,arguments),Ol(e)}function _6(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Nx),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return _6(e).unknown(t)},e=arguments.length?Array.from(e,Nx):[0,1],Ol(n)}function k6(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],s=e[r],o;return s<a&&(o=n,n=r,r=o,o=a,a=s,s=o),e[n]=t.floor(a),e[r]=t.ceil(s),e}function OO(e){return Math.log(e)}function IO(e){return Math.exp(e)}function s1e(e){return-Math.log(-e)}function o1e(e){return-Math.exp(-e)}function l1e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function c1e(e){return e===10?l1e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function u1e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function RO(e){return(t,n)=>-e(-t,n)}function WC(e){const t=e(OO,IO),n=t.domain;let r=10,a,s;function o(){return a=u1e(r),s=c1e(r),n()[0]<0?(a=RO(a),s=RO(s),e(s1e,o1e)):e(OO,IO),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let h=a(u),m=a(f),g,v;const x=l==null?10:+l;let y=[];if(!(r%1)&&m-h<x){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<r;++g)if(v=h<0?g/s(-h):g*s(h),!(v<u)){if(v>f)break;y.push(v)}}else for(;h<=m;++h)for(g=r-1;g>=1;--g)if(v=h>0?g/s(-h):g*s(h),!(v<u)){if(v>f)break;y.push(v)}y.length*2<x&&(y=U_(u,f,x))}else y=U_(h,m,Math.min(m-h,x)).map(s);return d?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Nm(c)).precision==null&&(c.trim=!0),c=qC(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return f=>{let d=f/s(Math.round(a(f)));return d*r<r-.5&&(d*=r),d<=u?c(f):""}},t.nice=()=>n(k6(n(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function S6(){const e=WC(Vb()).domain([1,10]);return e.copy=()=>Fp(e,S6()).base(e.base()),xi.apply(e,arguments),e}function MO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function DO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function HC(e){var t=1,n=e(MO(t),DO(t));return n.constant=function(r){return arguments.length?e(MO(t=+r),DO(t)):t},Ol(n)}function N6(){var e=HC(Vb());return e.copy=function(){return Fp(e,N6()).constant(e.constant())},xi.apply(e,arguments)}function $O(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function d1e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function f1e(e){return e<0?-e*e:e*e}function VC(e){var t=e(aa,aa),n=1;function r(){return n===1?e(aa,aa):n===.5?e(d1e,f1e):e($O(n),$O(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Ol(t)}function KC(){var e=VC(Vb());return e.copy=function(){return Fp(e,KC()).exponent(e.exponent())},xi.apply(e,arguments),e}function h1e(){return KC.apply(null,arguments).exponent(.5)}function LO(e){return Math.sign(e)*e*e}function m1e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function C6(){var e=UC(),t=[0,1],n=!1,r;function a(s){var o=m1e(e(s));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(s){return e.invert(LO(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,Nx)).map(LO)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(n=!!s,a):n},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return C6(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},xi.apply(a,arguments),Ol(a)}function A6(){var e=[],t=[],n=[],r;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=yje(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?r:t[$p(n,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(cl),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return A6().domain(e).range(t).unknown(r)},xi.apply(s,arguments)}function E6(){var e=0,t=1,n=1,r=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[$p(r,c,0,n)]:s}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return E6().domain([e,t]).range(a).unknown(s)},xi.apply(Ol(o),arguments)}function P6(){var e=[.5],t=[0,1],n,r=1;function a(s){return s!=null&&s<=s?t[$p(e,s,0,r)]:n}return a.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return P6().domain(e).range(t).unknown(n)},xi.apply(a,arguments)}const tj=new Date,nj=new Date;function gr(e,t,n,r){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>gr(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),n&&(a.count=(s,o)=>(tj.setTime(+s),nj.setTime(+o),e(tj),e(nj),Math.floor(n(tj,nj))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(r?o=>r(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const Ex=gr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ex.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?gr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Ex);Ex.range;const qs=1e3,li=qs*60,Ws=li*60,lo=Ws*24,GC=lo*7,FO=lo*30,rj=lo*365,oc=gr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*qs)},(e,t)=>(t-e)/qs,e=>e.getUTCSeconds());oc.range;const YC=gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qs)},(e,t)=>{e.setTime(+e+t*li)},(e,t)=>(t-e)/li,e=>e.getMinutes());YC.range;const XC=gr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*li)},(e,t)=>(t-e)/li,e=>e.getUTCMinutes());XC.range;const JC=gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*qs-e.getMinutes()*li)},(e,t)=>{e.setTime(+e+t*Ws)},(e,t)=>(t-e)/Ws,e=>e.getHours());JC.range;const QC=gr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ws)},(e,t)=>(t-e)/Ws,e=>e.getUTCHours());QC.range;const Bp=gr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*li)/lo,e=>e.getDate()-1);Bp.range;const Kb=gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lo,e=>e.getUTCDate()-1);Kb.range;const T6=gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lo,e=>Math.floor(e/lo));T6.range;function Zc(e){return gr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*li)/GC)}const Gb=Zc(0),Px=Zc(1),p1e=Zc(2),g1e=Zc(3),Rd=Zc(4),v1e=Zc(5),x1e=Zc(6);Gb.range;Px.range;p1e.range;g1e.range;Rd.range;v1e.range;x1e.range;function eu(e){return gr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/GC)}const Yb=eu(0),Tx=eu(1),y1e=eu(2),b1e=eu(3),Md=eu(4),w1e=eu(5),j1e=eu(6);Yb.range;Tx.range;y1e.range;b1e.range;Md.range;w1e.range;j1e.range;const ZC=gr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ZC.range;const eA=gr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());eA.range;const co=gr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());co.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});co.range;const uo=gr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());uo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});uo.range;function O6(e,t,n,r,a,s){const o=[[oc,1,qs],[oc,5,5*qs],[oc,15,15*qs],[oc,30,30*qs],[s,1,li],[s,5,5*li],[s,15,15*li],[s,30,30*li],[a,1,Ws],[a,3,3*Ws],[a,6,6*Ws],[a,12,12*Ws],[r,1,lo],[r,2,2*lo],[n,1,GC],[t,1,FO],[t,3,3*FO],[e,1,rj]];function l(u,f,d){const h=f<u;h&&([u,f]=[f,u]);const m=d&&typeof d.range=="function"?d:c(u,f,d),g=m?m.range(u,+f+1):[];return h?g.reverse():g}function c(u,f,d){const h=Math.abs(f-u)/d,m=DC(([,,x])=>x).right(o,h);if(m===o.length)return e.every(q_(u/rj,f/rj,d));if(m===0)return Ex.every(Math.max(q_(u,f,d),1));const[g,v]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(v)}return[l,c]}const[_1e,k1e]=O6(uo,eA,Yb,T6,QC,XC),[S1e,N1e]=O6(co,ZC,Gb,Bp,JC,YC);function aj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ij(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hf(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function C1e(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Vf(a),f=Kf(a),d=Vf(s),h=Kf(s),m=Vf(o),g=Kf(o),v=Vf(l),x=Kf(l),y=Vf(c),b=Kf(c),w={a:R,A:L,b:$,B:C,c:null,d:HO,e:HO,f:X1e,g:s_e,G:l_e,H:K1e,I:G1e,j:Y1e,L:I6,m:J1e,M:Q1e,p:U,q:D,Q:GO,s:YO,S:Z1e,u:e_e,U:t_e,V:n_e,w:r_e,W:a_e,x:null,X:null,y:i_e,Y:o_e,Z:c_e,"%":KO},j={a:P,A:H,b:G,B:Y,c:null,d:VO,e:VO,f:h_e,g:__e,G:S_e,H:u_e,I:d_e,j:f_e,L:M6,m:m_e,M:p_e,p:W,q:ee,Q:GO,s:YO,S:g_e,u:v_e,U:x_e,V:y_e,w:b_e,W:w_e,x:null,X:null,y:j_e,Y:k_e,Z:N_e,"%":KO},k={a:T,A:I,b:F,B:E,c:O,d:qO,e:qO,f:q1e,g:zO,G:UO,H:WO,I:WO,j:F1e,L:z1e,m:L1e,M:B1e,p:N,q:$1e,Q:H1e,s:V1e,S:U1e,u:O1e,U:I1e,V:R1e,w:T1e,W:M1e,x:M,X:B,y:zO,Y:UO,Z:D1e,"%":W1e};w.x=_(n,w),w.X=_(r,w),w.c=_(t,w),j.x=_(n,j),j.X=_(r,j),j.c=_(t,j);function _(X,ae){return function(re){var J=[],ve=-1,z=0,q=X.length,ie,oe,be;for(re instanceof Date||(re=new Date(+re));++ve<q;)X.charCodeAt(ve)===37&&(J.push(X.slice(z,ve)),(oe=BO[ie=X.charAt(++ve)])!=null?ie=X.charAt(++ve):oe=ie==="e"?" ":"0",(be=ae[ie])&&(ie=be(re,oe)),J.push(ie),z=ve+1);return J.push(X.slice(z,ve)),J.join("")}}function S(X,ae){return function(re){var J=Hf(1900,void 0,1),ve=A(J,X,re+="",0),z,q;if(ve!=re.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(ae&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(z=ij(Hf(J.y,0,1)),q=z.getUTCDay(),z=q>4||q===0?Tx.ceil(z):Tx(z),z=Kb.offset(z,(J.V-1)*7),J.y=z.getUTCFullYear(),J.m=z.getUTCMonth(),J.d=z.getUTCDate()+(J.w+6)%7):(z=aj(Hf(J.y,0,1)),q=z.getDay(),z=q>4||q===0?Px.ceil(z):Px(z),z=Bp.offset(z,(J.V-1)*7),J.y=z.getFullYear(),J.m=z.getMonth(),J.d=z.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),q="Z"in J?ij(Hf(J.y,0,1)).getUTCDay():aj(Hf(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(q+5)%7:J.w+J.U*7-(q+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,ij(J)):aj(J)}}function A(X,ae,re,J){for(var ve=0,z=ae.length,q=re.length,ie,oe;ve<z;){if(J>=q)return-1;if(ie=ae.charCodeAt(ve++),ie===37){if(ie=ae.charAt(ve++),oe=k[ie in BO?ae.charAt(ve++):ie],!oe||(J=oe(X,re,J))<0)return-1}else if(ie!=re.charCodeAt(J++))return-1}return J}function N(X,ae,re){var J=u.exec(ae.slice(re));return J?(X.p=f.get(J[0].toLowerCase()),re+J[0].length):-1}function T(X,ae,re){var J=m.exec(ae.slice(re));return J?(X.w=g.get(J[0].toLowerCase()),re+J[0].length):-1}function I(X,ae,re){var J=d.exec(ae.slice(re));return J?(X.w=h.get(J[0].toLowerCase()),re+J[0].length):-1}function F(X,ae,re){var J=y.exec(ae.slice(re));return J?(X.m=b.get(J[0].toLowerCase()),re+J[0].length):-1}function E(X,ae,re){var J=v.exec(ae.slice(re));return J?(X.m=x.get(J[0].toLowerCase()),re+J[0].length):-1}function O(X,ae,re){return A(X,t,ae,re)}function M(X,ae,re){return A(X,n,ae,re)}function B(X,ae,re){return A(X,r,ae,re)}function R(X){return o[X.getDay()]}function L(X){return s[X.getDay()]}function $(X){return c[X.getMonth()]}function C(X){return l[X.getMonth()]}function U(X){return a[+(X.getHours()>=12)]}function D(X){return 1+~~(X.getMonth()/3)}function P(X){return o[X.getUTCDay()]}function H(X){return s[X.getUTCDay()]}function G(X){return c[X.getUTCMonth()]}function Y(X){return l[X.getUTCMonth()]}function W(X){return a[+(X.getUTCHours()>=12)]}function ee(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var ae=_(X+="",w);return ae.toString=function(){return X},ae},parse:function(X){var ae=S(X+="",!1);return ae.toString=function(){return X},ae},utcFormat:function(X){var ae=_(X+="",j);return ae.toString=function(){return X},ae},utcParse:function(X){var ae=S(X+="",!0);return ae.toString=function(){return X},ae}}}var BO={"-":"",_:" ",0:"0"},kr=/^\s*\d+/,A1e=/^%/,E1e=/[\\^$*+?|[\]().{}]/g;function nn(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",s=a.length;return r+(s<n?new Array(n-s+1).join(t)+a:a)}function P1e(e){return e.replace(E1e,"\\$&")}function Vf(e){return new RegExp("^(?:"+e.map(P1e).join("|")+")","i")}function Kf(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function T1e(e,t,n){var r=kr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function O1e(e,t,n){var r=kr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function I1e(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function R1e(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function M1e(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function UO(e,t,n){var r=kr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function zO(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function D1e(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function $1e(e,t,n){var r=kr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function L1e(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function qO(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function F1e(e,t,n){var r=kr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function WO(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function B1e(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function U1e(e,t,n){var r=kr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function z1e(e,t,n){var r=kr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function q1e(e,t,n){var r=kr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function W1e(e,t,n){var r=A1e.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function H1e(e,t,n){var r=kr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function V1e(e,t,n){var r=kr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function HO(e,t){return nn(e.getDate(),t,2)}function K1e(e,t){return nn(e.getHours(),t,2)}function G1e(e,t){return nn(e.getHours()%12||12,t,2)}function Y1e(e,t){return nn(1+Bp.count(co(e),e),t,3)}function I6(e,t){return nn(e.getMilliseconds(),t,3)}function X1e(e,t){return I6(e,t)+"000"}function J1e(e,t){return nn(e.getMonth()+1,t,2)}function Q1e(e,t){return nn(e.getMinutes(),t,2)}function Z1e(e,t){return nn(e.getSeconds(),t,2)}function e_e(e){var t=e.getDay();return t===0?7:t}function t_e(e,t){return nn(Gb.count(co(e)-1,e),t,2)}function R6(e){var t=e.getDay();return t>=4||t===0?Rd(e):Rd.ceil(e)}function n_e(e,t){return e=R6(e),nn(Rd.count(co(e),e)+(co(e).getDay()===4),t,2)}function r_e(e){return e.getDay()}function a_e(e,t){return nn(Px.count(co(e)-1,e),t,2)}function i_e(e,t){return nn(e.getFullYear()%100,t,2)}function s_e(e,t){return e=R6(e),nn(e.getFullYear()%100,t,2)}function o_e(e,t){return nn(e.getFullYear()%1e4,t,4)}function l_e(e,t){var n=e.getDay();return e=n>=4||n===0?Rd(e):Rd.ceil(e),nn(e.getFullYear()%1e4,t,4)}function c_e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+nn(t/60|0,"0",2)+nn(t%60,"0",2)}function VO(e,t){return nn(e.getUTCDate(),t,2)}function u_e(e,t){return nn(e.getUTCHours(),t,2)}function d_e(e,t){return nn(e.getUTCHours()%12||12,t,2)}function f_e(e,t){return nn(1+Kb.count(uo(e),e),t,3)}function M6(e,t){return nn(e.getUTCMilliseconds(),t,3)}function h_e(e,t){return M6(e,t)+"000"}function m_e(e,t){return nn(e.getUTCMonth()+1,t,2)}function p_e(e,t){return nn(e.getUTCMinutes(),t,2)}function g_e(e,t){return nn(e.getUTCSeconds(),t,2)}function v_e(e){var t=e.getUTCDay();return t===0?7:t}function x_e(e,t){return nn(Yb.count(uo(e)-1,e),t,2)}function D6(e){var t=e.getUTCDay();return t>=4||t===0?Md(e):Md.ceil(e)}function y_e(e,t){return e=D6(e),nn(Md.count(uo(e),e)+(uo(e).getUTCDay()===4),t,2)}function b_e(e){return e.getUTCDay()}function w_e(e,t){return nn(Tx.count(uo(e)-1,e),t,2)}function j_e(e,t){return nn(e.getUTCFullYear()%100,t,2)}function __e(e,t){return e=D6(e),nn(e.getUTCFullYear()%100,t,2)}function k_e(e,t){return nn(e.getUTCFullYear()%1e4,t,4)}function S_e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Md(e):Md.ceil(e),nn(e.getUTCFullYear()%1e4,t,4)}function N_e(){return"+0000"}function KO(){return"%"}function GO(e){return+e}function YO(e){return Math.floor(+e/1e3)}var gu,$6,L6;C_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function C_e(e){return gu=C1e(e),$6=gu.format,gu.parse,L6=gu.utcFormat,gu.utcParse,gu}function A_e(e){return new Date(e)}function E_e(e){return e instanceof Date?+e:+new Date(+e)}function tA(e,t,n,r,a,s,o,l,c,u){var f=UC(),d=f.invert,h=f.domain,m=u(".%L"),g=u(":%S"),v=u("%I:%M"),x=u("%I %p"),y=u("%a %d"),b=u("%b %d"),w=u("%B"),j=u("%Y");function k(_){return(c(_)<_?m:l(_)<_?g:o(_)<_?v:s(_)<_?x:r(_)<_?a(_)<_?y:b:n(_)<_?w:j)(_)}return f.invert=function(_){return new Date(d(_))},f.domain=function(_){return arguments.length?h(Array.from(_,E_e)):h().map(A_e)},f.ticks=function(_){var S=h();return e(S[0],S[S.length-1],_??10)},f.tickFormat=function(_,S){return S==null?k:u(S)},f.nice=function(_){var S=h();return(!_||typeof _.range!="function")&&(_=t(S[0],S[S.length-1],_??10)),_?h(k6(S,_)):f},f.copy=function(){return Fp(f,tA(e,t,n,r,a,s,o,l,c,u))},f}function P_e(){return xi.apply(tA(S1e,N1e,co,ZC,Gb,Bp,JC,YC,oc,$6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function T_e(){return xi.apply(tA(_1e,k1e,uo,eA,Yb,Kb,QC,XC,oc,L6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xb(){var e=0,t=1,n,r,a,s,o=aa,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(a===0?.5:(d=(s(d)-n)*a,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=s(e=+e),r=s(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(h){var m,g;return arguments.length?([m,g]=h,o=d(m,g),u):[o(0),o(1)]}}return u.range=f(vf),u.rangeRound=f(BC),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return s=d,n=d(e),r=d(t),a=n===r?0:1/(r-n),u}}function Il(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function F6(){var e=Ol(Xb()(aa));return e.copy=function(){return Il(e,F6())},go.apply(e,arguments)}function B6(){var e=WC(Xb()).domain([1,10]);return e.copy=function(){return Il(e,B6()).base(e.base())},go.apply(e,arguments)}function U6(){var e=HC(Xb());return e.copy=function(){return Il(e,U6()).constant(e.constant())},go.apply(e,arguments)}function nA(){var e=VC(Xb());return e.copy=function(){return Il(e,nA()).exponent(e.exponent())},go.apply(e,arguments)}function O_e(){return nA.apply(null,arguments).exponent(.5)}function z6(){var e=[],t=aa;function n(r){if(r!=null&&!isNaN(r=+r))return t(($p(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(cl),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,s)=>xje(e,s/r))},n.copy=function(){return z6(t).domain(e)},go.apply(n,arguments)}function Jb(){var e=0,t=.5,n=1,r=1,a,s,o,l,c,u=aa,f,d=!1,h;function m(v){return isNaN(v=+v)?h:(v=.5+((v=+f(v))-s)*(r*v<r*s?l:c),u(d?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,n]=v,a=f(e=+e),s=f(t=+t),o=f(n=+n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,m):[e,t,n]},m.clamp=function(v){return arguments.length?(d=!!v,m):d},m.interpolator=function(v){return arguments.length?(u=v,m):u};function g(v){return function(x){var y,b,w;return arguments.length?([y,b,w]=x,u=Wje(v,[y,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=g(vf),m.rangeRound=g(BC),m.unknown=function(v){return arguments.length?(h=v,m):h},function(v){return f=v,a=v(e),s=v(t),o=v(n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,m}}function q6(){var e=Ol(Jb()(aa));return e.copy=function(){return Il(e,q6())},go.apply(e,arguments)}function W6(){var e=WC(Jb()).domain([.1,1,10]);return e.copy=function(){return Il(e,W6()).base(e.base())},go.apply(e,arguments)}function H6(){var e=HC(Jb());return e.copy=function(){return Il(e,H6()).constant(e.constant())},go.apply(e,arguments)}function rA(){var e=VC(Jb());return e.copy=function(){return Il(e,rA()).exponent(e.exponent())},go.apply(e,arguments)}function I_e(){return rA.apply(null,arguments).exponent(.5)}const XO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:jm,scaleDiverging:q6,scaleDivergingLog:W6,scaleDivergingPow:rA,scaleDivergingSqrt:I_e,scaleDivergingSymlog:H6,scaleIdentity:_6,scaleImplicit:W_,scaleLinear:Ax,scaleLog:S6,scaleOrdinal:$C,scalePoint:Sh,scalePow:KC,scaleQuantile:A6,scaleQuantize:E6,scaleRadial:C6,scaleSequential:F6,scaleSequentialLog:B6,scaleSequentialPow:nA,scaleSequentialQuantile:z6,scaleSequentialSqrt:O_e,scaleSequentialSymlog:U6,scaleSqrt:h1e,scaleSymlog:N6,scaleThreshold:P6,scaleTime:P_e,scaleUtc:T_e,tickFormat:j6},Symbol.toStringTag,{value:"Module"}));var R_e=cf;function M_e(e,t,n){for(var r=-1,a=e.length;++r<a;){var s=e[r],o=t(s);if(o!=null&&(l===void 0?o===o&&!R_e(o):n(o,l)))var l=o,c=s}return c}var V6=M_e;function D_e(e,t){return e>t}var $_e=D_e,L_e=V6,F_e=$_e,B_e=gf;function U_e(e){return e&&e.length?L_e(e,B_e,F_e):void 0}var z_e=U_e;const Qb=fn(z_e);function q_e(e,t){return e<t}var W_e=q_e,H_e=V6,V_e=W_e,K_e=gf;function G_e(e){return e&&e.length?H_e(e,K_e,V_e):void 0}var Y_e=G_e;const Zb=fn(Y_e);var X_e=vC,J_e=Tl,Q_e=e6,Z_e=Ea;function eke(e,t){var n=Z_e(e)?X_e:Q_e;return n(e,J_e(t))}var tke=eke,nke=Qz,rke=tke;function ake(e,t){return nke(rke(e,t),1)}var ike=ake;const ske=fn(ike);var oke=OC;function lke(e,t){return oke(e,t)}var cke=lke;const aA=fn(cke);var xf=1e9,uke={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},sA,Ln=!0,pi="[DecimalError] ",xc=pi+"Invalid argument: ",iA=pi+"Exponent out of range: ",yf=Math.floor,Jl=Math.pow,dke=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,La,xr=1e7,On=7,K6=9007199254740991,Ox=yf(K6/On),it={};it.absoluteValue=it.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};it.comparedTo=it.cmp=function(e){var t,n,r,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===a?0:r>a^s.s<0?1:-1};it.decimalPlaces=it.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*On;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};it.dividedBy=it.div=function(e){return Qs(this,new this.constructor(e))};it.dividedToIntegerBy=it.idiv=function(e){var t=this,n=t.constructor;return yn(Qs(t,new n(e),0,1),n.precision)};it.equals=it.eq=function(e){return!this.cmp(e)};it.exponent=function(){return or(this)};it.greaterThan=it.gt=function(e){return this.cmp(e)>0};it.greaterThanOrEqualTo=it.gte=function(e){return this.cmp(e)>=0};it.isInteger=it.isint=function(){return this.e>this.d.length-2};it.isNegative=it.isneg=function(){return this.s<0};it.isPositive=it.ispos=function(){return this.s>0};it.isZero=function(){return this.s===0};it.lessThan=it.lt=function(e){return this.cmp(e)<0};it.lessThanOrEqualTo=it.lte=function(e){return this.cmp(e)<1};it.logarithm=it.log=function(e){var t,n=this,r=n.constructor,a=r.precision,s=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(La))throw Error(pi+"NaN");if(n.s<1)throw Error(pi+(n.s?"NaN":"-Infinity"));return n.eq(La)?new r(0):(Ln=!1,t=Qs(Cm(n,s),Cm(e,s),s),Ln=!0,yn(t,a))};it.minus=it.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?X6(t,e):G6(t,(e.s=-e.s,e))};it.modulo=it.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(pi+"NaN");return n.s?(Ln=!1,t=Qs(n,e,0,1).times(e),Ln=!0,n.minus(t)):yn(new r(n),a)};it.naturalExponential=it.exp=function(){return Y6(this)};it.naturalLogarithm=it.ln=function(){return Cm(this)};it.negated=it.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};it.plus=it.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?G6(t,e):X6(t,(e.s=-e.s,e))};it.precision=it.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(xc+e);if(t=or(a)+1,r=a.d.length-1,n=r*On+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};it.squareRoot=it.sqrt=function(){var e,t,n,r,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(pi+"NaN")}for(e=or(l),Ln=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=cs(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=yf((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(s=r,r=s.plus(Qs(l,s,o+2)).times(.5),cs(s.d).slice(0,o)===(t=cs(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(yn(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(t!="9999")break;o+=4}return Ln=!0,yn(r,n)};it.times=it.mul=function(e){var t,n,r,a,s,o,l,c,u,f=this,d=f.constructor,h=f.d,m=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,n=f.e+e.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,o=c,c=u,u=o),s=[],o=c+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=s[a]+m[r]*h[a-r-1]+t,s[a--]=l%xr|0,t=l/xr|0;s[a]=(s[a]+t)%xr|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,Ln?yn(e,d.precision):e};it.toDecimalPlaces=it.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(ys(e,0,xf),t===void 0?t=r.rounding:ys(t,0,8),yn(n,e+or(n)+1,t))};it.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=Fc(r,!0):(ys(e,0,xf),t===void 0?t=a.rounding:ys(t,0,8),r=yn(new a(r),e+1,t),n=Fc(r,!0,e+1)),n};it.toFixed=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?Fc(a):(ys(e,0,xf),t===void 0?t=s.rounding:ys(t,0,8),r=yn(new s(a),e+or(a)+1,t),n=Fc(r.abs(),!1,e+or(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};it.toInteger=it.toint=function(){var e=this,t=e.constructor;return yn(new t(e),or(e)+1,t.rounding)};it.toNumber=function(){return+this};it.toPower=it.pow=function(e){var t,n,r,a,s,o,l=this,c=l.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(La);if(l=new c(l),!l.s){if(e.s<1)throw Error(pi+"Infinity");return l}if(l.eq(La))return l;if(r=c.precision,e.eq(La))return yn(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,s=l.s,o){if((n=f<0?-f:f)<=K6){for(a=new c(La),t=Math.ceil(r/On+4),Ln=!1;n%2&&(a=a.times(l),QO(a.d,t)),n=yf(n/2),n!==0;)l=l.times(l),QO(l.d,t);return Ln=!0,e.s<0?new c(La).div(a):yn(a,r)}}else if(s<0)throw Error(pi+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,Ln=!1,a=e.times(Cm(l,r+u)),Ln=!0,a=Y6(a),a.s=s,a};it.toPrecision=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?(n=or(a),r=Fc(a,n<=s.toExpNeg||n>=s.toExpPos)):(ys(e,1,xf),t===void 0?t=s.rounding:ys(t,0,8),a=yn(new s(a),e,t),n=or(a),r=Fc(a,e<=n||n<=s.toExpNeg,e)),r};it.toSignificantDigits=it.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(ys(e,1,xf),t===void 0?t=r.rounding:ys(t,0,8)),yn(new r(n),e,t)};it.toString=it.valueOf=it.val=it.toJSON=it[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=or(e),n=e.constructor;return Fc(e,t<=n.toExpNeg||t>=n.toExpPos)};function G6(e,t){var n,r,a,s,o,l,c,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Ln?yn(t,d):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(r=c,s=-s,l=u.length):(r=u,a=o,l=c.length),o=Math.ceil(d/On),l=o>l?o+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/xr|0,c[s]%=xr;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Ln?yn(t,d):t}function ys(e,t,n){if(e!==~~e||e<t||e>n)throw Error(xc+e)}function cs(e){var t,n,r,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)r=e[t]+"",n=On-r.length,n&&(s+=$o(n)),s+=r;o=e[t],r=o+"",n=On-r.length,n&&(s+=$o(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Qs=function(){function e(r,a){var s,o=0,l=r.length;for(r=r.slice();l--;)s=r[l]*a+o,r[l]=s%xr|0,o=s/xr|0;return o&&r.unshift(o),r}function t(r,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(r[l]!=a[l]){c=r[l]>a[l]?1:-1;break}return c}function n(r,a,s){for(var o=0;s--;)r[s]-=o,o=r[s]<a[s]?1:0,r[s]=o*xr+r[s]-a[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,s,o){var l,c,u,f,d,h,m,g,v,x,y,b,w,j,k,_,S,A,N=r.constructor,T=r.s==a.s?1:-1,I=r.d,F=a.d;if(!r.s)return new N(r);if(!a.s)throw Error(pi+"Division by zero");for(c=r.e-a.e,S=F.length,k=I.length,m=new N(T),g=m.d=[],u=0;F[u]==(I[u]||0);)++u;if(F[u]>(I[u]||0)&&--c,s==null?b=s=N.precision:o?b=s+(or(r)-or(a))+1:b=s,b<0)return new N(0);if(b=b/On+2|0,u=0,S==1)for(f=0,F=F[0],b++;(u<k||f)&&b--;u++)w=f*xr+(I[u]||0),g[u]=w/F|0,f=w%F|0;else{for(f=xr/(F[0]+1)|0,f>1&&(F=e(F,f),I=e(I,f),S=F.length,k=I.length),j=S,v=I.slice(0,S),x=v.length;x<S;)v[x++]=0;A=F.slice(),A.unshift(0),_=F[0],F[1]>=xr/2&&++_;do f=0,l=t(F,v,S,x),l<0?(y=v[0],S!=x&&(y=y*xr+(v[1]||0)),f=y/_|0,f>1?(f>=xr&&(f=xr-1),d=e(F,f),h=d.length,x=v.length,l=t(d,v,h,x),l==1&&(f--,n(d,S<h?A:F,h))):(f==0&&(l=f=1),d=F.slice()),h=d.length,h<x&&d.unshift(0),n(v,d,x),l==-1&&(x=v.length,l=t(F,v,S,x),l<1&&(f++,n(v,S<x?A:F,x))),x=v.length):l===0&&(f++,v=[0]),g[u++]=f,l&&v[0]?v[x++]=I[j]||0:(v=[I[j]],x=1);while((j++<k||v[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=c,yn(m,o?s+or(m)+1:s)}}();function Y6(e,t){var n,r,a,s,o,l,c=0,u=0,f=e.constructor,d=f.precision;if(or(e)>16)throw Error(iA+or(e));if(!e.s)return new f(La);for(t==null?(Ln=!1,l=d):l=t,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(Jl(2,u))/Math.LN10*2+5|0,l+=r,n=a=s=new f(La),f.precision=l;;){if(a=yn(a.times(e),l),n=n.times(++c),o=s.plus(Qs(a,n,l)),cs(o.d).slice(0,l)===cs(s.d).slice(0,l)){for(;u--;)s=yn(s.times(s),l);return f.precision=d,t==null?(Ln=!0,yn(s,d)):s}s=o}}function or(e){for(var t=e.e*On,n=e.d[0];n>=10;n/=10)t++;return t}function sj(e,t,n){if(t>e.LN10.sd())throw Ln=!0,n&&(e.precision=n),Error(pi+"LN10 precision limit exceeded");return yn(new e(e.LN10),t)}function $o(e){for(var t="";e--;)t+="0";return t}function Cm(e,t){var n,r,a,s,o,l,c,u,f,d=1,h=10,m=e,g=m.d,v=m.constructor,x=v.precision;if(m.s<1)throw Error(pi+(m.s?"NaN":"-Infinity"));if(m.eq(La))return new v(0);if(t==null?(Ln=!1,u=x):u=t,m.eq(10))return t==null&&(Ln=!0),sj(v,u);if(u+=h,v.precision=u,n=cs(g),r=n.charAt(0),s=or(m),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=cs(m.d),r=n.charAt(0),d++;s=or(m),r>1?(m=new v("0."+n),s++):m=new v(r+"."+n.slice(1))}else return c=sj(v,u+2,x).times(s+""),m=Cm(new v(r+"."+n.slice(1)),u-h).plus(c),v.precision=x,t==null?(Ln=!0,yn(m,x)):m;for(l=o=m=Qs(m.minus(La),m.plus(La),u),f=yn(m.times(m),u),a=3;;){if(o=yn(o.times(f),u),c=l.plus(Qs(o,new v(a),u)),cs(c.d).slice(0,u)===cs(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(sj(v,u+2,x).times(s+""))),l=Qs(l,new v(d),u),v.precision=x,t==null?(Ln=!0,yn(l,x)):l;l=c,a+=2}}function JO(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=yf(n/On),e.d=[],r=(n+1)%On,n<0&&(r+=On),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=On;r<a;)e.d.push(+t.slice(r,r+=On));t=t.slice(r),r=On-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),Ln&&(e.e>Ox||e.e<-Ox))throw Error(iA+n)}else e.s=0,e.e=0,e.d=[0];return e}function yn(e,t,n){var r,a,s,o,l,c,u,f,d=e.d;for(o=1,s=d[0];s>=10;s/=10)o++;if(r=t-o,r<0)r+=On,a=t,u=d[f=0];else{if(f=Math.ceil((r+1)/On),s=d.length,f>=s)return e;for(u=s=d[f],o=1;s>=10;s/=10)o++;r%=On,a=r-On+o}if(n!==void 0&&(s=Jl(10,o-a-1),l=u/s%10|0,c=t<0||d[f+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?a>0?u/Jl(10,o-a):0:d[f-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return c?(s=or(e),d.length=1,t=t-s-1,d[0]=Jl(10,(On-t%On)%On),e.e=yf(-t/On)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(r==0?(d.length=f,s=1,f--):(d.length=f+1,s=Jl(10,On-r),d[f]=a>0?(u/Jl(10,o-a)%Jl(10,a)|0)*s:0),c)for(;;)if(f==0){(d[0]+=s)==xr&&(d[0]=1,++e.e);break}else{if(d[f]+=s,d[f]!=xr)break;d[f--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if(Ln&&(e.e>Ox||e.e<-Ox))throw Error(iA+or(e));return e}function X6(e,t){var n,r,a,s,o,l,c,u,f,d,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ln?yn(t,m):t;if(c=e.d,d=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(f=o<0,f?(n=c,o=-o,l=d.length):(n=d,r=u,l=c.length),a=Math.max(Math.ceil(m/On),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=d.length,f=a<l,f&&(l=a),a=0;a<l;a++)if(c[a]!=d[a]){f=c[a]<d[a];break}o=0}for(f&&(n=c,c=d,d=n,t.s=-t.s),l=c.length,a=d.length-l;a>0;--a)c[l++]=0;for(a=d.length;a>o;){if(c[--a]<d[a]){for(s=a;s&&c[--s]===0;)c[s]=xr-1;--c[s],c[a]+=xr}c[a]-=d[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,Ln?yn(t,m):t):new h(0)}function Fc(e,t,n){var r,a=or(e),s=cs(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+$o(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+$o(-a-1)+s,n&&(r=n-o)>0&&(s+=$o(r))):a>=o?(s+=$o(a+1-o),n&&(r=n-a-1)>0&&(s=s+"."+$o(r))):((r=a+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(s+="."),s+=$o(r))),e.s<0?"-"+s:s}function QO(e,t){if(e.length>t)return e.length=t,!0}function J6(e){var t,n,r;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(xc+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return JO(o,s.toString())}else if(typeof s!="string")throw Error(xc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,dke.test(s))JO(o,s);else throw Error(xc+s)}if(a.prototype=it,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=J6,a.config=a.set=fke,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function fke(e){if(!e||typeof e!="object")throw Error(pi+"Object expected");var t,n,r,a=["precision",1,xf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(yf(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(xc+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(xc+n+": "+r);return this}var sA=J6(uke);La=new sA(1);const vn=sA;function hke(e){return vke(e)||gke(e)||pke(e)||mke()}function mke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pke(e,t){if(e){if(typeof e=="string")return G_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G_(e,t)}}function gke(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function vke(e){if(Array.isArray(e))return G_(e)}function G_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xke=function(t){return t},Q6={"@@functional/placeholder":!0},Z6=function(t){return t===Q6},ZO=function(t){return function n(){return arguments.length===0||arguments.length===1&&Z6(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},yke=function e(t,n){return t===1?n:ZO(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var o=a.filter(function(l){return l!==Q6}).length;return o>=t?n.apply(void 0,a):e(t-o,ZO(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=a.map(function(d){return Z6(d)?c.shift():d});return n.apply(void 0,hke(f).concat(c))}))})},e0=function(t){return yke(t.length,t)},Y_=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},bke=e0(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),wke=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return xke;var a=n.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},X_=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},e8=function(t){var n=null,r=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,r=t.apply(void 0,s)),r}};function jke(e){var t;return e===0?t=1:t=Math.floor(new vn(e).abs().log(10).toNumber())+1,t}function _ke(e,t,n){for(var r=new vn(e),a=0,s=[];r.lt(t)&&a<1e5;)s.push(r.toNumber()),r=r.add(n),a++;return s}var kke=e0(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),Ske=e0(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),Nke=e0(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const t0={rangeStep:_ke,getDigitCount:jke,interpolateNumber:kke,uninterpolateNumber:Ske,uninterpolateTruncation:Nke};function J_(e){return Eke(e)||Ake(e)||t8(e)||Cke()}function Cke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ake(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Eke(e){if(Array.isArray(e))return Q_(e)}function Am(e,t){return Oke(e)||Tke(e,t)||t8(e,t)||Pke()}function Pke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t8(e,t){if(e){if(typeof e=="string")return Q_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q_(e,t)}}function Q_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tke(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,s=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,s=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw s}}return n}}function Oke(e){if(Array.isArray(e))return e}function n8(e){var t=Am(e,2),n=t[0],r=t[1],a=n,s=r;return n>r&&(a=r,s=n),[a,s]}function r8(e,t,n){if(e.lte(0))return new vn(0);var r=t0.getDigitCount(e.toNumber()),a=new vn(10).pow(r),s=e.div(a),o=r!==1?.05:.1,l=new vn(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new vn(Math.ceil(c))}function Ike(e,t,n){var r=1,a=new vn(e);if(!a.isint()&&n){var s=Math.abs(e);s<1?(r=new vn(10).pow(t0.getDigitCount(e)-1),a=new vn(Math.floor(a.div(r).toNumber())).mul(r)):s>1&&(a=new vn(Math.floor(e)))}else e===0?a=new vn(Math.floor((t-1)/2)):n||(a=new vn(Math.floor(e)));var o=Math.floor((t-1)/2),l=wke(bke(function(c){return a.add(new vn(c-o).mul(r)).toNumber()}),Y_);return l(0,t)}function a8(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new vn(0),tickMin:new vn(0),tickMax:new vn(0)};var s=r8(new vn(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new vn(0):(o=new vn(e).add(t).div(2),o=o.sub(new vn(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new vn(t).sub(o).div(s).toNumber()),u=l+c+1;return u>n?a8(e,t,n,r,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:s,tickMin:o.sub(new vn(l).mul(s)),tickMax:o.add(new vn(c).mul(s))})}function Rke(e){var t=Am(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=n8([n,r]),c=Am(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(J_(Y_(0,a-1).map(function(){return 1/0}))):[].concat(J_(Y_(0,a-1).map(function(){return-1/0})),[f]);return n>r?X_(d):d}if(u===f)return Ike(u,a,s);var h=a8(u,f,o,s),m=h.step,g=h.tickMin,v=h.tickMax,x=t0.rangeStep(g,v.add(new vn(.1).mul(m)),m);return n>r?X_(x):x}function Mke(e,t){var n=Am(e,2),r=n[0],a=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=n8([r,a]),l=Am(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,a];if(c===u)return[c];var f=Math.max(t,2),d=r8(new vn(u).sub(c).div(f-1),s,0),h=[].concat(J_(t0.rangeStep(new vn(c),new vn(u).sub(new vn(.99).mul(d)),d)),[u]);return r>a?X_(h):h}var Dke=e8(Rke),$ke=e8(Mke),Lke="Invariant failed";function Bc(e,t){throw new Error(Lke)}var Fke=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Dd(e){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dd(e)}function Ix(){return Ix=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ix.apply(this,arguments)}function Bke(e,t){return Wke(e)||qke(e,t)||zke(e,t)||Uke()}function Uke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zke(e,t){if(e){if(typeof e=="string")return eI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eI(e,t)}}function eI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qke(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Wke(e){if(Array.isArray(e))return e}function Hke(e,t){if(e==null)return{};var n=Vke(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Vke(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Kke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o8(r.key),r)}}function Yke(e,t,n){return t&&Gke(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xke(e,t,n){return t=Rx(t),Jke(e,i8()?Reflect.construct(t,n||[],Rx(e).constructor):t.apply(e,n))}function Jke(e,t){if(t&&(Dd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qke(e)}function Qke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i8=function(){return!!e})()}function Rx(e){return Rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rx(e)}function Zke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z_(e,t)}function Z_(e,t){return Z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Z_(e,t)}function s8(e,t,n){return t=o8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o8(e){var t=eSe(e,"string");return Dd(t)=="symbol"?t:t+""}function eSe(e,t){if(Dd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Dd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n0=function(e){function t(){return Kke(this,t),Xke(this,t,arguments)}return Zke(t,e),Yke(t,[{key:"render",value:function(){var r=this.props,a=r.offset,s=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,f=r.xAxis,d=r.yAxis,h=Hke(r,Fke),m=an(h,!1);this.props.direction==="x"&&f.type!=="number"&&Bc();var g=c.map(function(v){var x=u(v,l),y=x.x,b=x.y,w=x.value,j=x.errorVal;if(!j)return null;var k=[],_,S;if(Array.isArray(j)){var A=Bke(j,2);_=A[0],S=A[1]}else _=S=j;if(s==="vertical"){var N=f.scale,T=b+a,I=T+o,F=T-o,E=N(w-_),O=N(w+S);k.push({x1:O,y1:I,x2:O,y2:F}),k.push({x1:E,y1:T,x2:O,y2:T}),k.push({x1:E,y1:I,x2:E,y2:F})}else if(s==="horizontal"){var M=d.scale,B=y+a,R=B-o,L=B+o,$=M(w-_),C=M(w+S);k.push({x1:R,y1:C,x2:L,y2:C}),k.push({x1:B,y1:$,x2:B,y2:C}),k.push({x1:R,y1:$,x2:L,y2:$})}return V.createElement(br,Ix({className:"recharts-errorBar",key:"bar-".concat(k.map(function(U){return"".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))},m),k.map(function(U){return V.createElement("line",Ix({},U,{key:"line-".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))}))});return V.createElement(br,{className:"recharts-errorBars"},g)}}])}(V.Component);s8(n0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});s8(n0,"displayName","ErrorBar");function Em(e){"@babel/helpers - typeof";return Em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Em(e)}function tI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tI(Object(n),!0).forEach(function(r){tSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tSe(e,t,n){return t=nSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nSe(e){var t=rSe(e,"string");return Em(t)=="symbol"?t:t+""}function rSe(e,t){if(Em(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Em(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l8=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,s=t.legendContent,o=Ma(n,ii);if(!o)return null;var l=ii.defaultProps,c=l!==void 0?zl(zl({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(r||[]).reduce(function(f,d){var h=d.item,m=d.props,g=m.sectors||m.data||[];return f.concat(g.map(function(v){return{type:o.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(r||[]).map(function(f){var d=f.item,h=d.type.defaultProps,m=h!==void 0?zl(zl({},h),d.props):{},g=m.dataKey,v=m.name,x=m.legendType,y=m.hide;return{inactive:y,dataKey:g,type:c.iconType||x||"square",color:oA(d),value:v||g,payload:m}}),zl(zl(zl({},c),ii.getWithHeight(o,a)),{},{payload:u,item:o})};function Pm(e){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(e)}function nI(e){return oSe(e)||sSe(e)||iSe(e)||aSe()}function aSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iSe(e,t){if(e){if(typeof e=="string")return ek(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ek(e,t)}}function sSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oSe(e){if(Array.isArray(e))return ek(e)}function ek(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rI(Object(n),!0).forEach(function(r){ad(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ad(e,t,n){return t=lSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lSe(e){var t=cSe(e,"string");return Pm(t)=="symbol"?t:t+""}function cSe(e,t){if(Pm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bs(e,t,n){return sn(e)||sn(t)?n:mr(t)?fi(e,t,n):Ft(t)?t(e):n}function Nh(e,t,n,r){var a=ske(e,function(l){return bs(l,t)});if(n==="number"){var s=a.filter(function(l){return qe(l)||parseFloat(l)});return s.length?[Zb(s),Qb(s)]:[1/0,-1/0]}var o=r?a.filter(function(l){return!sn(l)}):a;return o.map(function(l){return mr(l)||l instanceof Date?l:""})}var uSe=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var f=u>0?a[u-1].coordinate:a[l-1].coordinate,d=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(Di(d-f)!==Di(h-d)){var g=[];if(Di(h-d)===Di(c[1]-c[0])){m=h;var v=d+c[1]-c[0];g[0]=Math.min(v,(v+f)/2),g[1]=Math.max(v,(v+f)/2)}else{m=f;var x=h+c[1]-c[0];g[0]=Math.min(d,(x+d)/2),g[1]=Math.max(d,(x+d)/2)}var y=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(t>y[0]&&t<=y[1]||t>=g[0]&&t<=g[1]){o=a[u].index;break}}else{var b=Math.min(f,h),w=Math.max(f,h);if(t>(b+d)/2&&t<=(w+d)/2){o=a[u].index;break}}}else for(var j=0;j<l;j++)if(j===0&&t<=(r[j].coordinate+r[j+1].coordinate)/2||j>0&&j<l-1&&t>(r[j].coordinate+r[j-1].coordinate)/2&&t<=(r[j].coordinate+r[j+1].coordinate)/2||j===l-1&&t>(r[j].coordinate+r[j-1].coordinate)/2){o=r[j].index;break}return o},oA=function(t){var n,r=t,a=r.type.displayName,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Vn(Vn({},t.type.defaultProps),t.props):t.props,o=s.stroke,l=s.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},dSe=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var f=s[l[c]].stackGroups,d=Object.keys(f),h=0,m=d.length;h<m;h++){var g=f[d[h]],v=g.items,x=g.cateAxisId,y=v.filter(function(S){return Xs(S.type).indexOf("Bar")>=0});if(y&&y.length){var b=y[0].type.defaultProps,w=b!==void 0?Vn(Vn({},b),y[0].props):y[0].props,j=w.barSize,k=w[x];o[k]||(o[k]=[]);var _=sn(j)?n:j;o[k].push({item:y[0],stackList:y.slice(1),barSize:sn(_)?void 0:Lc(_,r,0)})}}return o},fSe=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,s=t.sizeList,o=s===void 0?[]:s,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Lc(n,a,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,g=o.reduce(function(j,k){return j+k.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&m>0&&(h=!0,m*=.9,g=c*m);var v=(a-g)/2>>0,x={offset:v-u,size:0};f=o.reduce(function(j,k){var _={item:k.item,position:{offset:x.offset+x.size+u,size:h?m:k.barSize}},S=[].concat(nI(j),[_]);return x=S[S.length-1].position,k.stackList&&k.stackList.length&&k.stackList.forEach(function(A){S.push({item:A,position:x})}),S},d)}else{var y=Lc(r,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var b=(a-2*y-(c-1)*u)/c;b>1&&(b>>=0);var w=l===+l?Math.min(b,l):b;f=o.reduce(function(j,k,_){var S=[].concat(nI(j),[{item:k.item,position:{offset:y+(b+u)*_+(b-w)/2,size:w}}]);return k.stackList&&k.stackList.length&&k.stackList.forEach(function(A){S.push({item:A,position:S[S.length-1].position})}),S},d)}return f},hSe=function(t,n,r,a){var s=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=l8({children:s,legendWidth:c});if(u){var f=a||{},d=f.width,h=f.height,m=u.align,g=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&g==="middle")&&m!=="center"&&qe(t[m]))return Vn(Vn({},t),{},ad({},m,t[m]+(d||0)));if((v==="horizontal"||v==="vertical"&&m==="center")&&g!=="middle"&&qe(t[g]))return Vn(Vn({},t),{},ad({},g,t[g]+(h||0)))}return t},mSe=function(t,n,r){return sn(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},c8=function(t,n,r,a,s){var o=n.props.children,l=Bi(o,n0).filter(function(u){return mSe(a,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=bs(f,r);if(sn(d))return u;var h=Array.isArray(d)?[Zb(d),Qb(d)]:[d,d],m=c.reduce(function(g,v){var x=bs(f,v,0),y=h[0]-Math.abs(Array.isArray(x)?x[0]:x),b=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(y,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},pSe=function(t,n,r,a,s){var o=n.map(function(l){return c8(t,l,r,s,a)}).filter(function(l){return!sn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},u8=function(t,n,r,a,s){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&c8(t,c,u,a)||Nh(t,u,r,s)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},d8=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},f8=function(t,n,r,a){if(a)return t.map(function(c){return c.coordinate});var s,o,l=t.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(r),l},Hs=function(t,n,r){if(!t)return null;var a=t.scale,s=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Di(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var h=s?s.indexOf(d):d;return{coordinate:a(h)+u,value:d,offset:u}});return f.filter(function(d){return!Mp(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,h){return{coordinate:a(d)+u,value:d,index:h,offset:u}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,h){return{coordinate:a(d)+u,value:s?s[d]:d,index:h,offset:u}})},oj=new WeakMap,Ig=function(t,n){if(typeof n!="function")return t;oj.has(t)||oj.set(t,new WeakMap);var r=oj.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},gSe=function(t,n,r){var a=t.scale,s=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:jm(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Ax(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Sh(),realScaleType:"point"}:s==="category"?{scale:jm(),realScaleType:"band"}:{scale:Ax(),realScaleType:"linear"};if($c(a)){var c="scale".concat(Fb(a));return{scale:(XO[c]||Sh)(),realScaleType:XO[c]?c:"point"}}return Ft(a)?{scale:a}:{scale:Sh(),realScaleType:"point"}},aI=1e-4,vSe=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),s=Math.min(a[0],a[1])-aI,o=Math.max(a[0],a[1])+aI,l=t(n[0]),c=t(n[r-1]);(l<s||l>o||c<s||c>o)&&t.domain([n[0],n[r-1]])}},xSe=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},ySe=function(t,n){if(!n||n.length!==2||!qe(n[0])||!qe(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),s=[t[0],t[1]];return(!qe(t[0])||t[0]<r)&&(s[0]=r),(!qe(t[1])||t[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<r&&(s[1]=r),s},bSe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0,l=0;l<n;++l){var c=Mp(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=s,t[l][r][1]=s+c,s=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},wSe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0;o<n;++o){var l=Mp(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=s,t[o][r][1]=s+l,s=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},jSe={sign:bSe,expand:$he,none:Ad,silhouette:Lhe,wiggle:Fhe,positive:wSe},_Se=function(t,n,r){var a=n.map(function(l){return l.props.dataKey}),s=jSe[r],o=Dhe().keys(a).value(function(l,c){return+bs(l,c,0)}).order(S_).offset(s);return o(t)},kSe=function(t,n,r,a,s,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(d,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Vn(Vn({},h.type.defaultProps),h.props):h.props,v=g.stackId,x=g.hide;if(x)return d;var y=g[r],b=d[y]||{hasStack:!1,stackGroups:{}};if(mr(v)){var w=b.stackGroups[v]||{numericAxisId:r,cateAxisId:a,items:[]};w.items.push(h),b.hasStack=!0,b.stackGroups[v]=w}else b.stackGroups[Lb("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[h]};return Vn(Vn({},d),{},ad({},y,b))},c),f={};return Object.keys(u).reduce(function(d,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(v,x){var y=m.stackGroups[x];return Vn(Vn({},v),{},ad({},x,{numericAxisId:r,cateAxisId:a,items:y.items,stackedData:_Se(t,y.items,s)}))},g)}return Vn(Vn({},d),{},ad({},h,m))},f)},SSe=function(t,n){var r=n.realScaleType,a=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=Dke(u,s,l);return t.domain([Zb(f),Qb(f)]),{niceTicks:f}}if(s&&a==="number"){var d=t.domain(),h=$ke(d,s,l);return{niceTicks:h}}return null},iI=function(t){var n=t.axis,r=t.ticks,a=t.offset,s=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+a:null;var c=bs(o,n.dataKey,n.domain[l]);return sn(c)?null:n.scale(c)-s/2+a},NSe=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return a<=0&&s>=0?0:s<0?s:a}return r[0]},CSe=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Vn(Vn({},t.type.defaultProps),t.props):t.props,s=a.stackId;if(mr(s)){var o=n[s];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},ASe=function(t){return t.reduce(function(n,r){return[Zb(r.concat([n[0]]).filter(qe)),Qb(r.concat([n[1]]).filter(qe))]},[1/0,-1/0])},h8=function(t,n,r){return Object.keys(t).reduce(function(a,s){var o=t[s],l=o.stackedData,c=l.reduce(function(u,f){var d=ASe(f.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},sI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,oI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tk=function(t,n,r){if(Ft(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(qe(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(sI.test(t[0])){var s=+sI.exec(t[0])[1];a[0]=n[0]-s}else Ft(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(qe(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(oI.test(t[1])){var o=+oI.exec(t[1])[1];a[1]=n[1]+o}else Ft(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},Mx=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var s=RC(n,function(d){return d.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],f=s[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},lI=function(t,n,r){return!t||!t.length||aA(t,fi(r,"type.defaultProps.domain"))?n:t},m8=function(t,n){var r=t.type.defaultProps?Vn(Vn({},t.type.defaultProps),t.props):t.props,a=r.dataKey,s=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,f=r.hide;return Vn(Vn({},an(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:s||a,color:oA(t),value:bs(n,a),type:c,payload:n,chartType:u,hide:f})};function Tm(e){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tm(e)}function cI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cI(Object(n),!0).forEach(function(r){ESe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ESe(e,t,n){return t=PSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PSe(e){var t=TSe(e,"string");return Tm(t)=="symbol"?t:t+""}function TSe(e,t){if(Tm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Tm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dx=Math.PI/180,OSe=function(t){return t*180/Math.PI},Pr=function(t,n,r,a){return{x:t+Math.cos(-Dx*a)*r,y:n+Math.sin(-Dx*a)*r}},ISe=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(a-o,2))},RSe=function(t,n){var r=t.x,a=t.y,s=n.cx,o=n.cy,l=ISe({x:r,y:a},{x:s,y:o});if(l<=0)return{radius:l};var c=(r-s)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:OSe(u),angleInRadian:u}},MSe=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(a,s);return{startAngle:n-o*360,endAngle:r-o*360}},DSe=function(t,n){var r=n.startAngle,a=n.endAngle,s=Math.floor(r/360),o=Math.floor(a/360),l=Math.min(s,o);return t+l*360},dI=function(t,n){var r=t.x,a=t.y,s=RSe({x:r,y:a},n),o=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=MSe(n),d=f.startAngle,h=f.endAngle,m=l,g;if(d<=h){for(;m>h;)m-=360;for(;m<d;)m+=360;g=m>=d&&m<=h}else{for(;m>d;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=d}return g?uI(uI({},n),{},{radius:o,angle:DSe(m,n)}):null};function Om(e){"@babel/helpers - typeof";return Om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Om(e)}var $Se=["offset"];function LSe(e){return zSe(e)||USe(e)||BSe(e)||FSe()}function FSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BSe(e,t){if(e){if(typeof e=="string")return nk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nk(e,t)}}function USe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zSe(e){if(Array.isArray(e))return nk(e)}function nk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qSe(e,t){if(e==null)return{};var n=WSe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function WSe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function fI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fI(Object(n),!0).forEach(function(r){HSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HSe(e,t,n){return t=VSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VSe(e){var t=KSe(e,"string");return Om(t)=="symbol"?t:t+""}function KSe(e,t){if(Om(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Im(){return Im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Im.apply(this,arguments)}var GSe=function(t){var n=t.value,r=t.formatter,a=sn(t.children)?n:t.children;return Ft(r)?r(a):a},YSe=function(t,n){var r=Di(n-t),a=Math.min(Math.abs(n-t),360);return r*a},XSe=function(t,n,r){var a=t.position,s=t.viewBox,o=t.offset,l=t.className,c=s,u=c.cx,f=c.cy,d=c.innerRadius,h=c.outerRadius,m=c.startAngle,g=c.endAngle,v=c.clockWise,x=(d+h)/2,y=YSe(m,g),b=y>=0?1:-1,w,j;a==="insideStart"?(w=m+b*o,j=v):a==="insideEnd"?(w=g-b*o,j=!v):a==="end"&&(w=g+b*o,j=v),j=y<=0?j:!j;var k=Pr(u,f,x,w),_=Pr(u,f,x,w+(j?1:-1)*359),S="M".concat(k.x,",").concat(k.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(j?0:1,`,
    `).concat(_.x,",").concat(_.y),A=sn(t.id)?Lb("recharts-radial-line-"):t.id;return V.createElement("text",Im({},r,{dominantBaseline:"central",className:Zt("recharts-radial-bar-label",l)}),V.createElement("defs",null,V.createElement("path",{id:A,d:S})),V.createElement("textPath",{xlinkHref:"#".concat(A)},n))},JSe=function(t){var n=t.viewBox,r=t.offset,a=t.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,f=s.startAngle,d=s.endAngle,h=(f+d)/2;if(a==="outside"){var m=Pr(o,l,u+r,h),g=m.x,v=m.y;return{x:g,y:v,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,y=Pr(o,l,x,h),b=y.x,w=y.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},QSe=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,s=t.position,o=n,l=o.x,c=o.y,u=o.width,f=o.height,d=f>=0?1:-1,h=d*a,m=d>0?"end":"start",g=d>0?"start":"end",v=u>=0?1:-1,x=v*a,y=v>0?"end":"start",b=v>0?"start":"end";if(s==="top"){var w={x:l+u/2,y:c-d*a,textAnchor:"middle",verticalAnchor:m};return cr(cr({},w),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var j={x:l+u/2,y:c+f+h,textAnchor:"middle",verticalAnchor:g};return cr(cr({},j),r?{height:Math.max(r.y+r.height-(c+f),0),width:u}:{})}if(s==="left"){var k={x:l-x,y:c+f/2,textAnchor:y,verticalAnchor:"middle"};return cr(cr({},k),r?{width:Math.max(k.x-r.x,0),height:f}:{})}if(s==="right"){var _={x:l+u+x,y:c+f/2,textAnchor:b,verticalAnchor:"middle"};return cr(cr({},_),r?{width:Math.max(r.x+r.width-_.x,0),height:f}:{})}var S=r?{width:u,height:f}:{};return s==="insideLeft"?cr({x:l+x,y:c+f/2,textAnchor:b,verticalAnchor:"middle"},S):s==="insideRight"?cr({x:l+u-x,y:c+f/2,textAnchor:y,verticalAnchor:"middle"},S):s==="insideTop"?cr({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},S):s==="insideBottom"?cr({x:l+u/2,y:c+f-h,textAnchor:"middle",verticalAnchor:m},S):s==="insideTopLeft"?cr({x:l+x,y:c+h,textAnchor:b,verticalAnchor:g},S):s==="insideTopRight"?cr({x:l+u-x,y:c+h,textAnchor:y,verticalAnchor:g},S):s==="insideBottomLeft"?cr({x:l+x,y:c+f-h,textAnchor:b,verticalAnchor:m},S):s==="insideBottomRight"?cr({x:l+u-x,y:c+f-h,textAnchor:y,verticalAnchor:m},S):uf(s)&&(qe(s.x)||ic(s.x))&&(qe(s.y)||ic(s.y))?cr({x:l+Lc(s.x,u),y:c+Lc(s.y,f),textAnchor:"end",verticalAnchor:"end"},S):cr({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},S)},ZSe=function(t){return"cx"in t&&qe(t.cx)};function Br(e){var t=e.offset,n=t===void 0?5:t,r=qSe(e,$Se),a=cr({offset:n},r),s=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,f=a.className,d=f===void 0?"":f,h=a.textBreakAll;if(!s||sn(l)&&sn(c)&&!p.isValidElement(u)&&!Ft(u))return null;if(p.isValidElement(u))return p.cloneElement(u,a);var m;if(Ft(u)){if(m=p.createElement(u,a),p.isValidElement(m))return m}else m=GSe(a);var g=ZSe(s),v=an(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return XSe(a,m,v);var x=g?JSe(a):QSe(a);return V.createElement(wx,Im({className:Zt("recharts-label",d)},v,x,{breakAll:h}),m)}Br.displayName="Label";var p8=function(t){var n=t.cx,r=t.cy,a=t.angle,s=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,h=t.y,m=t.top,g=t.left,v=t.width,x=t.height,y=t.clockWise,b=t.labelViewBox;if(b)return b;if(qe(v)&&qe(x)){if(qe(d)&&qe(h))return{x:d,y:h,width:v,height:x};if(qe(m)&&qe(g))return{x:m,y:g,width:v,height:x}}return qe(d)&&qe(h)?{x:d,y:h,width:0,height:0}:qe(n)&&qe(r)?{cx:n,cy:r,startAngle:s||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},eNe=function(t,n){return t?t===!0?V.createElement(Br,{key:"label-implicit",viewBox:n}):mr(t)?V.createElement(Br,{key:"label-implicit",viewBox:n,value:t}):p.isValidElement(t)?t.type===Br?p.cloneElement(t,{key:"label-implicit",viewBox:n}):V.createElement(Br,{key:"label-implicit",content:t,viewBox:n}):Ft(t)?V.createElement(Br,{key:"label-implicit",content:t,viewBox:n}):uf(t)?V.createElement(Br,Im({viewBox:n},t,{key:"label-implicit"})):null:null},tNe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,s=p8(t),o=Bi(a,Br).map(function(c,u){return p.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return o;var l=eNe(t.label,n||s);return[l].concat(LSe(o))};Br.parseViewBox=p8;Br.renderCallByParent=tNe;function nNe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var rNe=nNe;const aNe=fn(rNe);function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}var iNe=["valueAccessor"],sNe=["data","dataKey","clockWise","id","textBreakAll"];function oNe(e){return dNe(e)||uNe(e)||cNe(e)||lNe()}function lNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cNe(e,t){if(e){if(typeof e=="string")return rk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rk(e,t)}}function uNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function dNe(e){if(Array.isArray(e))return rk(e)}function rk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $x(){return $x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$x.apply(this,arguments)}function hI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function mI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hI(Object(n),!0).forEach(function(r){fNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fNe(e,t,n){return t=hNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hNe(e){var t=mNe(e,"string");return Rm(t)=="symbol"?t:t+""}function mNe(e,t){if(Rm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pI(e,t){if(e==null)return{};var n=pNe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function pNe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var gNe=function(t){return Array.isArray(t.value)?aNe(t.value):t.value};function $i(e){var t=e.valueAccessor,n=t===void 0?gNe:t,r=pI(e,iNe),a=r.data,s=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=pI(r,sNe);return!a||!a.length?null:V.createElement(br,{className:"recharts-label-list"},a.map(function(f,d){var h=sn(s)?n(f,d):bs(f&&f.payload,s),m=sn(l)?{}:{id:"".concat(l,"-").concat(d)};return V.createElement(Br,$x({},an(f,!0),u,m,{parentViewBox:f.parentViewBox,value:h,textBreakAll:c,viewBox:Br.parseViewBox(sn(o)?f:mI(mI({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}$i.displayName="LabelList";function vNe(e,t){return e?e===!0?V.createElement($i,{key:"labelList-implicit",data:t}):V.isValidElement(e)||Ft(e)?V.createElement($i,{key:"labelList-implicit",data:t,content:e}):uf(e)?V.createElement($i,$x({data:t},e,{key:"labelList-implicit"})):null:null}function xNe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=Bi(r,$i).map(function(o,l){return p.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var s=vNe(e.label,t);return[s].concat(oNe(a))}$i.renderCallByParent=xNe;function Mm(e){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mm(e)}function ak(){return ak=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ak.apply(this,arguments)}function gI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gI(Object(n),!0).forEach(function(r){yNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yNe(e,t,n){return t=bNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bNe(e){var t=wNe(e,"string");return Mm(t)=="symbol"?t:t+""}function wNe(e,t){if(Mm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jNe=function(t,n){var r=Di(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},Rg=function(t){var n=t.cx,r=t.cy,a=t.radius,s=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(l?1:-1)+a,d=Math.asin(c/f)/Dx,h=u?s:s+o*d,m=Pr(n,r,f,h),g=Pr(n,r,a,h),v=u?s-o*d:s,x=Pr(n,r,f*Math.cos(d*Dx),v);return{center:m,circleTangency:g,lineTangency:x,theta:d}},g8=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.startAngle,l=t.endAngle,c=jNe(o,l),u=o+c,f=Pr(n,r,s,o),d=Pr(n,r,s,u),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var m=Pr(n,r,a,o),g=Pr(n,r,a,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},_Ne=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Di(f-u),h=Rg({cx:n,cy:r,radius:s,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,g=h.lineTangency,v=h.theta,x=Rg({cx:n,cy:r,radius:s,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:c}),y=x.circleTangency,b=x.lineTangency,w=x.theta,j=c?Math.abs(u-f):Math.abs(u-f)-v-w;if(j<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):g8({cx:n,cy:r,innerRadius:a,outerRadius:s,startAngle:u,endAngle:f});var k="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(j>180),",").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var _=Rg({cx:n,cy:r,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=_.circleTangency,A=_.lineTangency,N=_.theta,T=Rg({cx:n,cy:r,radius:a,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),I=T.circleTangency,F=T.lineTangency,E=T.theta,O=c?Math.abs(u-f):Math.abs(u-f)-N-E;if(O<0&&o===0)return"".concat(k,"L").concat(n,",").concat(r,"Z");k+="L".concat(F.x,",").concat(F.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(O>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,"Z")}else k+="L".concat(n,",").concat(r,"Z");return k},kNe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},v8=function(t){var n=vI(vI({},kNe),t),r=n.cx,a=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,f=n.startAngle,d=n.endAngle,h=n.className;if(o<s||f===d)return null;var m=Zt("recharts-sector",h),g=o-s,v=Lc(l,g,0,!0),x;return v>0&&Math.abs(f-d)<360?x=_Ne({cx:r,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(v,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):x=g8({cx:r,cy:a,innerRadius:s,outerRadius:o,startAngle:f,endAngle:d}),V.createElement("path",ak({},an(n,!0),{className:m,d:x,role:"img"}))};function Dm(e){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dm(e)}function ik(){return ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ik.apply(this,arguments)}function xI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function yI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xI(Object(n),!0).forEach(function(r){SNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SNe(e,t,n){return t=NNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NNe(e){var t=CNe(e,"string");return Dm(t)=="symbol"?t:t+""}function CNe(e,t){if(Dm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bI={curveBasisClosed:She,curveBasisOpen:Nhe,curveBasis:khe,curveBumpX:uhe,curveBumpY:dhe,curveLinearClosed:Che,curveLinear:Ub,curveMonotoneX:Ahe,curveMonotoneY:Ehe,curveNatural:Phe,curveStep:The,curveStepAfter:Ihe,curveStepBefore:Ohe},Mg=function(t){return t.x===+t.x&&t.y===+t.y},Gf=function(t){return t.x},Yf=function(t){return t.y},ANe=function(t,n){if(Ft(t))return t;var r="curve".concat(Fb(t));return(r==="curveMonotone"||r==="curveBump")&&n?bI["".concat(r).concat(n==="vertical"?"Y":"X")]:bI[r]||Ub},ENe=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,s=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=ANe(r,l),d=u?s.filter(function(v){return Mg(v)}):s,h;if(Array.isArray(o)){var m=u?o.filter(function(v){return Mg(v)}):o,g=d.map(function(v,x){return yI(yI({},v),{},{base:m[x]})});return l==="vertical"?h=Sg().y(Yf).x1(Gf).x0(function(v){return v.base.x}):h=Sg().x(Gf).y1(Yf).y0(function(v){return v.base.y}),h.defined(Mg).curve(f),h(g)}return l==="vertical"&&qe(o)?h=Sg().y(Yf).x1(Gf).x0(o):qe(o)?h=Sg().x(Gf).y1(Yf).y0(o):h=vz().x(Gf).y(Yf),h.defined(Mg).curve(f),h(d)},wI=function(t){var n=t.className,r=t.points,a=t.path,s=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?ENe(t):a;return p.createElement("path",ik({},an(t,!1),sx(t),{className:Zt("recharts-curve",n),d:o,ref:s}))},x8={exports:{}},PNe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",TNe=PNe,ONe=TNe;function y8(){}function b8(){}b8.resetWarningCache=y8;var INe=function(){function e(r,a,s,o,l,c){if(c!==ONe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:b8,resetWarningCache:y8};return n.PropTypes=n,n};x8.exports=INe();var RNe=x8.exports;const ln=fn(RNe);var MNe=Object.getOwnPropertyNames,DNe=Object.getOwnPropertySymbols,$Ne=Object.prototype.hasOwnProperty;function jI(e,t){return function(r,a,s){return e(r,a,s)&&t(r,a,s)}}function Dg(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var s=a.cache,o=s.get(n),l=s.get(r);if(o&&l)return o===r&&l===n;s.set(n,r),s.set(r,n);var c=e(n,r,a);return s.delete(n),s.delete(r),c}}function _I(e){return MNe(e).concat(DNe(e))}var LNe=Object.hasOwn||function(e,t){return $Ne.call(e,t)};function tu(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var FNe="__v",BNe="__o",UNe="_owner",kI=Object.getOwnPropertyDescriptor,SI=Object.keys;function zNe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function qNe(e,t){return tu(e.getTime(),t.getTime())}function WNe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function HNe(e,t){return e===t}function NI(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=t.entries(),f=!1,d=0;(l=u.next())&&!l.done;){if(a[d]){d++;continue}var h=o.value,m=l.value;if(n.equals(h[0],m[0],c,d,e,t,n)&&n.equals(h[1],m[1],h[0],m[0],e,t,n)){f=a[d]=!0;break}d++}if(!f)return!1;c++}return!0}var VNe=tu;function KNe(e,t,n){var r=SI(e),a=r.length;if(SI(t).length!==a)return!1;for(;a-- >0;)if(!w8(e,t,n,r[a]))return!1;return!0}function Xf(e,t,n){var r=_I(e),a=r.length;if(_I(t).length!==a)return!1;for(var s,o,l;a-- >0;)if(s=r[a],!w8(e,t,n,s)||(o=kI(e,s),l=kI(t,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function GNe(e,t){return tu(e.valueOf(),t.valueOf())}function YNe(e,t){return e.source===t.source&&e.flags===t.flags}function CI(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.values(),o,l;(o=s.next())&&!o.done;){for(var c=t.values(),u=!1,f=0;(l=c.next())&&!l.done;){if(!a[f]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function XNe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function JNe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function w8(e,t,n,r){return(r===UNe||r===BNe||r===FNe)&&(e.$$typeof||t.$$typeof)?!0:LNe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var QNe="[object Arguments]",ZNe="[object Boolean]",eCe="[object Date]",tCe="[object Error]",nCe="[object Map]",rCe="[object Number]",aCe="[object Object]",iCe="[object RegExp]",sCe="[object Set]",oCe="[object String]",lCe="[object URL]",cCe=Array.isArray,AI=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,EI=Object.assign,uCe=Object.prototype.toString.call.bind(Object.prototype.toString);function dCe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,s=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,f=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,v,x){if(g===v)return!0;if(g==null||v==null)return!1;var y=typeof g;if(y!==typeof v)return!1;if(y!=="object")return y==="number"?o(g,v,x):y==="function"?a(g,v,x):!1;var b=g.constructor;if(b!==v.constructor)return!1;if(b===Object)return l(g,v,x);if(cCe(g))return t(g,v,x);if(AI!=null&&AI(g))return d(g,v,x);if(b===Date)return n(g,v,x);if(b===RegExp)return u(g,v,x);if(b===Map)return s(g,v,x);if(b===Set)return f(g,v,x);var w=uCe(g);return w===eCe?n(g,v,x):w===iCe?u(g,v,x):w===nCe?s(g,v,x):w===sCe?f(g,v,x):w===aCe?typeof g.then!="function"&&typeof v.then!="function"&&l(g,v,x):w===lCe?h(g,v,x):w===tCe?r(g,v,x):w===QNe?l(g,v,x):w===ZNe||w===rCe||w===oCe?c(g,v,x):!1}}function fCe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?Xf:zNe,areDatesEqual:qNe,areErrorsEqual:WNe,areFunctionsEqual:HNe,areMapsEqual:r?jI(NI,Xf):NI,areNumbersEqual:VNe,areObjectsEqual:r?Xf:KNe,arePrimitiveWrappersEqual:GNe,areRegExpsEqual:YNe,areSetsEqual:r?jI(CI,Xf):CI,areTypedArraysEqual:r?Xf:XNe,areUrlsEqual:JNe};if(n&&(a=EI({},a,n(a))),t){var s=Dg(a.areArraysEqual),o=Dg(a.areMapsEqual),l=Dg(a.areObjectsEqual),c=Dg(a.areSetsEqual);a=EI({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function hCe(e){return function(t,n,r,a,s,o,l){return e(t,n,l)}}function mCe(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,s=e.strict;if(r)return function(c,u){var f=r(),d=f.cache,h=d===void 0?t?new WeakMap:void 0:d,m=f.meta;return n(c,u,{cache:h,equals:a,meta:m,strict:s})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(c,u){return n(c,u,o)}}var pCe=Rl();Rl({strict:!0});Rl({circular:!0});Rl({circular:!0,strict:!0});Rl({createInternalComparator:function(){return tu}});Rl({strict:!0,createInternalComparator:function(){return tu}});Rl({circular:!0,createInternalComparator:function(){return tu}});Rl({circular:!0,createInternalComparator:function(){return tu},strict:!0});function Rl(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,s=e.strict,o=s===void 0?!1:s,l=fCe(e),c=dCe(l),u=r?r(c):hCe(c);return mCe({circular:n,comparator:c,createState:a,equals:u,strict:o})}function gCe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function PI(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(s){n<0&&(n=s),s-n>t?(e(s),n=-1):gCe(a)};requestAnimationFrame(r)}function sk(e){"@babel/helpers - typeof";return sk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sk(e)}function vCe(e){return wCe(e)||bCe(e)||yCe(e)||xCe()}function xCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yCe(e,t){if(e){if(typeof e=="string")return TI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TI(e,t)}}function TI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wCe(e){if(Array.isArray(e))return e}function jCe(){var e={},t=function(){return null},n=!1,r=function a(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=vCe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){PI(a.bind(null,u),c);return}a(c),PI(a.bind(null,u));return}sk(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}function OI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function II(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OI(Object(n),!0).forEach(function(r){j8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j8(e,t,n){return t=_Ce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Ce(e){var t=kCe(e,"string");return $m(t)==="symbol"?t:String(t)}function kCe(e,t){if($m(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($m(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SCe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(s){return a.includes(s)})})},NCe=function(t){return t},CCe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Ch=function(t,n){return Object.keys(n).reduce(function(r,a){return II(II({},r),{},j8({},a,t(a,n[a])))},{})},RI=function(t,n,r){return t.map(function(a){return"".concat(CCe(a)," ").concat(n,"ms ").concat(r)}).join(",")};function ACe(e,t){return TCe(e)||PCe(e,t)||_8(e,t)||ECe()}function ECe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function TCe(e){if(Array.isArray(e))return e}function OCe(e){return MCe(e)||RCe(e)||_8(e)||ICe()}function ICe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _8(e,t){if(e){if(typeof e=="string")return ok(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ok(e,t)}}function RCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function MCe(e){if(Array.isArray(e))return ok(e)}function ok(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lx=1e-4,k8=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},S8=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},MI=function(t,n){return function(r){var a=k8(t,n);return S8(a,r)}},DCe=function(t,n){return function(r){var a=k8(t,n),s=[].concat(OCe(a.map(function(o,l){return o*l}).slice(1)),[0]);return S8(s,r)}},DI=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,s=0,o=1,l=1;break;case"ease":a=.25,s=.1,o=.25,l=1;break;case"ease-in":a=.42,s=0,o=1,l=1;break;case"ease-out":a=.42,s=0,o=.58,l=1;break;case"ease-in-out":a=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=ACe(u,4);a=f[0],s=f[1],o=f[2],l=f[3]}}}var d=MI(a,o),h=MI(s,l),m=DCe(a,o),g=function(y){return y>1?1:y<0?0:y},v=function(y){for(var b=y>1?1:y,w=b,j=0;j<8;++j){var k=d(w)-b,_=m(w);if(Math.abs(k-b)<Lx||_<Lx)return h(w);w=g(w-k/_)}return h(w)};return v.isStepper=!1,v},$Ce=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,s=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(f,d,h){var m=-(f-d)*r,g=h*s,v=h+(m-g)*l/1e3,x=h*l/1e3+f;return Math.abs(x-d)<Lx&&Math.abs(v)<Lx?[d,0]:[x,v]};return c.isStepper=!0,c.dt=l,c},LCe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return DI(a);case"spring":return $Ce();default:if(a.split("(")[0]==="cubic-bezier")return DI(a)}return typeof a=="function"?a:null};function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}function $I(e){return UCe(e)||BCe(e)||N8(e)||FCe()}function FCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function UCe(e){if(Array.isArray(e))return ck(e)}function LI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LI(Object(n),!0).forEach(function(r){lk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lk(e,t,n){return t=zCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zCe(e){var t=qCe(e,"string");return Lm(t)==="symbol"?t:String(t)}function qCe(e,t){if(Lm(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Lm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WCe(e,t){return KCe(e)||VCe(e,t)||N8(e,t)||HCe()}function HCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N8(e,t){if(e){if(typeof e=="string")return ck(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ck(e,t)}}function ck(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function VCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function KCe(e){if(Array.isArray(e))return e}var Fx=function(t,n,r){return t+(n-t)*r},uk=function(t){var n=t.from,r=t.to;return n!==r},GCe=function e(t,n,r){var a=Ch(function(s,o){if(uk(o)){var l=t(o.from,o.to,o.velocity),c=WCe(l,2),u=c[0],f=c[1];return Nr(Nr({},o),{},{from:u,velocity:f})}return o},n);return r<1?Ch(function(s,o){return uk(o)?Nr(Nr({},o),{},{velocity:Fx(o.velocity,a[s].velocity,r),from:Fx(o.from,a[s].from,r)}):o},n):e(t,a,r-1)};const YCe=function(e,t,n,r,a){var s=SCe(e,t),o=s.reduce(function(x,y){return Nr(Nr({},x),{},lk({},y,[e[y],t[y]]))},{}),l=s.reduce(function(x,y){return Nr(Nr({},x),{},lk({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,f,d=function(){return null},h=function(){return Ch(function(y,b){return b.from},l)},m=function(){return!Object.values(l).filter(uk).length},g=function(y){u||(u=y);var b=y-u,w=b/n.dt;l=GCe(n,l,w),a(Nr(Nr(Nr({},e),t),h())),u=y,m()||(c=requestAnimationFrame(d))},v=function(y){f||(f=y);var b=(y-f)/r,w=Ch(function(k,_){return Fx.apply(void 0,$I(_).concat([n(b)]))},o);if(a(Nr(Nr(Nr({},e),t),w)),b<1)c=requestAnimationFrame(d);else{var j=Ch(function(k,_){return Fx.apply(void 0,$I(_).concat([n(1)]))},o);a(Nr(Nr(Nr({},e),t),j))}};return d=n.isStepper?g:v,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function $d(e){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$d(e)}var XCe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function JCe(e,t){if(e==null)return{};var n=QCe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function QCe(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function lj(e){return nAe(e)||tAe(e)||eAe(e)||ZCe()}function ZCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eAe(e,t){if(e){if(typeof e=="string")return dk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dk(e,t)}}function tAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nAe(e){if(Array.isArray(e))return dk(e)}function dk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function FI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ji(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FI(Object(n),!0).forEach(function(r){uh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uh(e,t,n){return t=C8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aAe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C8(r.key),r)}}function iAe(e,t,n){return t&&aAe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function C8(e){var t=sAe(e,"string");return $d(t)==="symbol"?t:String(t)}function sAe(e,t){if($d(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($d(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fk(e,t)}function fk(e,t){return fk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},fk(e,t)}function lAe(e){var t=cAe();return function(){var r=Bx(e),a;if(t){var s=Bx(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return hk(this,a)}}function hk(e,t){if(t&&($d(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mk(e)}function mk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bx(e){return Bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bx(e)}var vl=function(e){oAe(n,e);var t=lAe(n);function n(r,a){var s;rAe(this,n),s=t.call(this,r,a);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,f=o.to,d=o.steps,h=o.children,m=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(mk(s)),s.changeStyle=s.changeStyle.bind(mk(s)),!l||m<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:f}),hk(s);if(d&&d.length)s.state={style:d[0].style};else if(u){if(typeof h=="function")return s.state={style:u},hk(s);s.state={style:c?uh({},c,u):u}}else s.state={style:{}};return s}return iAe(n,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,f=s.to,d=s.from,h=this.state.style;if(l){if(!o){var m={style:c?uh({},c,f):f};this.state&&h&&(c&&h[c]!==f||!c&&h!==f)&&this.setState(m);return}if(!(pCe(a.to,f)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=g||u?d:a.to;if(this.state&&h){var x={style:c?uh({},c,v):v};(c&&h[c]!==v||!c&&h!==v)&&this.setState(x)}this.runAnimation(ji(ji({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,l=a.to,c=a.duration,u=a.easing,f=a.begin,d=a.onAnimationEnd,h=a.onAnimationStart,m=YCe(o,l,LCe(u),c,this.changeStyle),g=function(){s.stopJSAnimation=m()};this.manager.start([h,f,g,c,d])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],f=u.style,d=u.duration,h=d===void 0?0:d,m=function(v,x,y){if(y===0)return v;var b=x.duration,w=x.easing,j=w===void 0?"ease":w,k=x.style,_=x.properties,S=x.onAnimationEnd,A=y>0?o[y-1]:x,N=_||Object.keys(k);if(typeof j=="function"||j==="spring")return[].concat(lj(v),[s.runJSAnimation.bind(s,{from:A.style,to:k,duration:b,easing:j}),b]);var T=RI(N,b,j),I=ji(ji(ji({},A.style),k),{},{transition:T});return[].concat(lj(v),[I,b,S]).filter(NCe)};return this.manager.start([c].concat(lj(o.reduce(m,[f,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=jCe());var s=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,f=a.onAnimationStart,d=a.onAnimationEnd,h=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var v=l?uh({},l,c):c,x=RI(Object.keys(v),o,u);g.start([f,s,ji(ji({},v),{},{transition:x}),o,d])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=JCe(a,XCe),u=p.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!l||u===0||o<=0)return s;var d=function(m){var g=m.props,v=g.style,x=v===void 0?{}:v,y=g.className,b=p.cloneElement(m,ji(ji({},c),{},{style:ji(ji({},x),f),className:y}));return b};return u===1?d(p.Children.only(s)):V.createElement("div",null,p.Children.map(s,function(h){return d(h)}))}}]),n}(p.PureComponent);vl.displayName="Animate";vl.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};vl.propTypes={from:ln.oneOfType([ln.object,ln.string]),to:ln.oneOfType([ln.object,ln.string]),attributeName:ln.string,duration:ln.number,begin:ln.number,easing:ln.oneOfType([ln.string,ln.func]),steps:ln.arrayOf(ln.shape({duration:ln.number.isRequired,style:ln.object.isRequired,easing:ln.oneOfType([ln.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ln.func]),properties:ln.arrayOf("string"),onAnimationEnd:ln.func})),children:ln.oneOfType([ln.node,ln.func]),isActive:ln.bool,canBegin:ln.bool,onAnimationEnd:ln.func,shouldReAnimate:ln.bool,onAnimationStart:ln.func,onAnimationReStart:ln.func};function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}function Ux(){return Ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ux.apply(this,arguments)}function uAe(e,t){return mAe(e)||hAe(e,t)||fAe(e,t)||dAe()}function dAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fAe(e,t){if(e){if(typeof e=="string")return BI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BI(e,t)}}function BI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function mAe(e){if(Array.isArray(e))return e}function UI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UI(Object(n),!0).forEach(function(r){pAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pAe(e,t,n){return t=gAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gAe(e){var t=vAe(e,"string");return Fm(t)=="symbol"?t:t+""}function vAe(e,t){if(Fm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qI=function(t,n,r,a,s){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,c=r>=0?1:-1,u=a>=0&&r>=0||a<0&&r<0?1:0,f;if(o>0&&s instanceof Array){for(var d=[0,0,0,0],h=0,m=4;h<m;h++)d[h]=s[h]>o?o:s[h];f="M".concat(t,",").concat(n+l*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(n)),f+="L ".concat(t+r-c*d[1],",").concat(n),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*d[1])),f+="L ".concat(t+r,",").concat(n+a-l*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+r-c*d[2],",").concat(n+a)),f+="L ".concat(t+c*d[3],",").concat(n+a),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*d[3])),f+="Z"}else if(o>0&&s===+s&&s>0){var g=Math.min(o,s);f="M ".concat(t,",").concat(n+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(n,`
            L `).concat(t+r-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*g,`
            L `).concat(t+r,",").concat(n+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r-c*g,",").concat(n+a,`
            L `).concat(t+c*g,",").concat(n+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*g," Z")}else f="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return f},xAe=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),f=Math.max(s,s+l),d=Math.min(o,o+c),h=Math.max(o,o+c);return r>=u&&r<=f&&a>=d&&a<=h}return!1},yAe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lA=function(t){var n=zI(zI({},yAe),t),r=p.useRef(),a=p.useState(-1),s=uAe(a,2),o=s[0],l=s[1];p.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var j=r.current.getTotalLength();j&&l(j)}catch{}},[]);var c=n.x,u=n.y,f=n.width,d=n.height,h=n.radius,m=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,y=n.isAnimationActive,b=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var w=Zt("recharts-rectangle",m);return b?V.createElement(vl,{canBegin:o>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:v,animationEasing:g,isActive:b},function(j){var k=j.width,_=j.height,S=j.x,A=j.y;return V.createElement(vl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,isActive:y,easing:g},V.createElement("path",Ux({},an(n,!0),{className:w,d:qI(S,A,k,_,h),ref:r})))}):V.createElement("path",Ux({},an(n,!0),{className:w,d:qI(c,u,f,d,h)}))};function pk(){return pk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pk.apply(this,arguments)}var A8=function(t){var n=t.cx,r=t.cy,a=t.r,s=t.className,o=Zt("recharts-dot",s);return n===+n&&r===+r&&a===+a?p.createElement("circle",pk({},an(t,!1),sx(t),{className:o,cx:n,cy:r,r:a})):null};function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}var bAe=["x","y","top","left","width","height","className"];function gk(){return gk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gk.apply(this,arguments)}function WI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function wAe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WI(Object(n),!0).forEach(function(r){jAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jAe(e,t,n){return t=_Ae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Ae(e){var t=kAe(e,"string");return Bm(t)=="symbol"?t:t+""}function kAe(e,t){if(Bm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SAe(e,t){if(e==null)return{};var n=NAe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function NAe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var CAe=function(t,n,r,a,s,o){return"M".concat(t,",").concat(s,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},AAe=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,f=t.width,d=f===void 0?0:f,h=t.height,m=h===void 0?0:h,g=t.className,v=SAe(t,bAe),x=wAe({x:r,y:s,top:l,left:u,width:d,height:m},v);return!qe(r)||!qe(s)||!qe(d)||!qe(m)||!qe(l)||!qe(u)?null:V.createElement("path",gk({},an(x,!0),{className:Zt("recharts-cross",g),d:CAe(r,s,d,m,l,u)}))},EAe=Uz,PAe=EAe(Object.getPrototypeOf,Object),TAe=PAe,OAe=mo,IAe=TAe,RAe=po,MAe="[object Object]",DAe=Function.prototype,$Ae=Object.prototype,E8=DAe.toString,LAe=$Ae.hasOwnProperty,FAe=E8.call(Object);function BAe(e){if(!RAe(e)||OAe(e)!=MAe)return!1;var t=IAe(e);if(t===null)return!0;var n=LAe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&E8.call(n)==FAe}var UAe=BAe;const zAe=fn(UAe);var qAe=mo,WAe=po,HAe="[object Boolean]";function VAe(e){return e===!0||e===!1||WAe(e)&&qAe(e)==HAe}var KAe=VAe;const GAe=fn(KAe);function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function zx(){return zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zx.apply(this,arguments)}function YAe(e,t){return ZAe(e)||QAe(e,t)||JAe(e,t)||XAe()}function XAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JAe(e,t){if(e){if(typeof e=="string")return HI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HI(e,t)}}function HI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function QAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ZAe(e){if(Array.isArray(e))return e}function VI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function KI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VI(Object(n),!0).forEach(function(r){eEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eEe(e,t,n){return t=tEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tEe(e){var t=nEe(e,"string");return Um(t)=="symbol"?t:t+""}function nEe(e,t){if(Um(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GI=function(t,n,r,a,s){var o=r-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+s),l+="L ".concat(t+r-o/2-a,",").concat(n+s),l+="L ".concat(t,",").concat(n," Z"),l},rEe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},aEe=function(t){var n=KI(KI({},rEe),t),r=p.useRef(),a=p.useState(-1),s=YAe(a,2),o=s[0],l=s[1];p.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&l(w)}catch{}},[]);var c=n.x,u=n.y,f=n.upperWidth,d=n.lowerWidth,h=n.height,m=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,y=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var b=Zt("recharts-trapezoid",m);return y?V.createElement(vl,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:h,x:c,y:u},duration:v,animationEasing:g,isActive:y},function(w){var j=w.upperWidth,k=w.lowerWidth,_=w.height,S=w.x,A=w.y;return V.createElement(vl,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,easing:g},V.createElement("path",zx({},an(n,!0),{className:b,d:GI(S,A,j,k,_),ref:r})))}):V.createElement("g",null,V.createElement("path",zx({},an(n,!0),{className:b,d:GI(c,u,f,d,h)})))},iEe=["option","shapeType","propTransformer","activeClassName","isActive"];function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}function sEe(e,t){if(e==null)return{};var n=oEe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function oEe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function YI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function qx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YI(Object(n),!0).forEach(function(r){lEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lEe(e,t,n){return t=cEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cEe(e){var t=uEe(e,"string");return zm(t)=="symbol"?t:t+""}function uEe(e,t){if(zm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dEe(e,t){return qx(qx({},t),e)}function fEe(e,t){return e==="symbols"}function XI(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return V.createElement(lA,n);case"trapezoid":return V.createElement(aEe,n);case"sector":return V.createElement(v8,n);case"symbols":if(fEe(t))return V.createElement(NC,n);break;default:return null}}function hEe(e){return p.isValidElement(e)?e.props:e}function mEe(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?dEe:r,s=e.activeClassName,o=s===void 0?"recharts-active-shape":s,l=e.isActive,c=sEe(e,iEe),u;if(p.isValidElement(t))u=p.cloneElement(t,qx(qx({},c),hEe(t)));else if(Ft(t))u=t(c);else if(zAe(t)&&!GAe(t)){var f=a(t,c);u=V.createElement(XI,{shapeType:n,elementProps:f})}else{var d=c;u=V.createElement(XI,{shapeType:n,elementProps:d})}return l?V.createElement(br,{className:o},u):u}function r0(e,t){return t!=null&&"trapezoids"in e.props}function a0(e,t){return t!=null&&"sectors"in e.props}function qm(e,t){return t!=null&&"points"in e.props}function pEe(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,s=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&s}function gEe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function vEe(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function xEe(e,t){var n;return r0(e,t)?n=pEe:a0(e,t)?n=gEe:qm(e,t)&&(n=vEe),n}function yEe(e,t){var n;return r0(e,t)?n="trapezoids":a0(e,t)?n="sectors":qm(e,t)&&(n="points"),n}function bEe(e,t){if(r0(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(a0(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return qm(e,t)?t.payload:{}}function wEe(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=yEe(n,t),s=bEe(n,t),o=r.filter(function(c,u){var f=aA(s,c),d=n.props[a].filter(function(g){var v=xEe(n,t);return v(g,t)}),h=n.props[a].indexOf(d[d.length-1]),m=u===h;return f&&m}),l=r.indexOf(o[o.length-1]);return l}var jEe=Math.ceil,_Ee=Math.max;function kEe(e,t,n,r){for(var a=-1,s=_Ee(jEe((t-e)/(n||1)),0),o=Array(s);s--;)o[r?s:++a]=e,e+=n;return o}var SEe=kEe,NEe=s6,JI=1/0,CEe=17976931348623157e292;function AEe(e){if(!e)return e===0?e:0;if(e=NEe(e),e===JI||e===-JI){var t=e<0?-1:1;return t*CEe}return e===e?e:0}var P8=AEe,EEe=SEe,PEe=Hb,cj=P8;function TEe(e){return function(t,n,r){return r&&typeof r!="number"&&PEe(t,n,r)&&(n=r=void 0),t=cj(t),n===void 0?(n=t,t=0):n=cj(n),r=r===void 0?t<n?1:-1:cj(r),EEe(t,n,r,e)}}var OEe=TEe,IEe=OEe,REe=IEe(),MEe=REe;const Wx=fn(MEe);function Wm(e){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(e)}function QI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ZI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QI(Object(n),!0).forEach(function(r){T8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function T8(e,t,n){return t=DEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DEe(e){var t=$Ee(e,"string");return Wm(t)=="symbol"?t:t+""}function $Ee(e,t){if(Wm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LEe=["Webkit","Moz","O","ms"],FEe=function(t,n){var r=t.replace(/(\w)/,function(s){return s.toUpperCase()}),a=LEe.reduce(function(s,o){return ZI(ZI({},s),{},T8({},o+r,n))},{});return a[t]=n,a};function Ld(e){"@babel/helpers - typeof";return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ld(e)}function Hx(){return Hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hx.apply(this,arguments)}function eR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eR(Object(n),!0).forEach(function(r){Ia(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function BEe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I8(r.key),r)}}function UEe(e,t,n){return t&&tR(e.prototype,t),n&&tR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zEe(e,t,n){return t=Vx(t),qEe(e,O8()?Reflect.construct(t,n||[],Vx(e).constructor):t.apply(e,n))}function qEe(e,t){if(t&&(Ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WEe(e)}function WEe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O8=function(){return!!e})()}function Vx(e){return Vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vx(e)}function HEe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vk(e,t)}function vk(e,t){return vk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},vk(e,t)}function Ia(e,t,n){return t=I8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I8(e){var t=VEe(e,"string");return Ld(t)=="symbol"?t:t+""}function VEe(e,t){if(Ld(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ld(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KEe=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,s=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Sh().domain(Wx(0,c)).range([s,s+o-l]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(a),scale:u,scaleValues:f}},nR=function(t){return t.changedTouches&&!!t.changedTouches.length},Fd=function(e){function t(n){var r;return BEe(this,t),r=zEe(this,t,[n]),Ia(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),Ia(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),Ia(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,s=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:s,startIndex:l})}),r.detachDragEndListener()}),Ia(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ia(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ia(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ia(r,"handleSlideDragStart",function(a){var s=nR(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return HEe(t,e),UEe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,s=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,d=Math.min(a,s),h=Math.max(a,s),m=t.getIndexInRange(o,d),g=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:g===f?f:g-g%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,s=a.data,o=a.tickFormatter,l=a.dataKey,c=bs(s[r],l,r);return Ft(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,s=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,h=c.startIndex,m=c.endIndex,g=c.onChange,v=r.pageX-s;v>0?v=Math.min(v,u+f-d-l,u+f-d-o):v<0&&(v=Math.max(v,u-o,u-l));var x=this.getIndex({startX:o+v,endX:l+v});(x.startIndex!==h||x.endIndex!==m)&&g&&g(x),this.setState({startX:o+v,endX:l+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var s=nR(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],f=this.props,d=f.x,h=f.width,m=f.travellerWidth,g=f.onChange,v=f.gap,x=f.data,y={startX:this.state.startX,endX:this.state.endX},b=r.pageX-s;b>0?b=Math.min(b,d+h-m-u):b<0&&(b=Math.max(b,d-u)),y[o]=u+b;var w=this.getIndex(y),j=w.startIndex,k=w.endIndex,_=function(){var A=x.length-1;return o==="startX"&&(l>c?j%v===0:k%v===0)||l<c&&k===A||o==="endX"&&(l>c?k%v===0:j%v===0)||l>c&&k===A};this.setState(Ia(Ia({},o,u+b),"brushMoveStartX",r.pageX),function(){g&&_()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,f=this.state[a],d=l.indexOf(f);if(d!==-1){var h=d+r;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(Ia({},a,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return V.createElement("rect",{stroke:u,fill:c,x:a,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.data,u=r.children,f=r.padding,d=p.Children.only(u);return d?V.cloneElement(d,{x:a,y:s,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var s,o,l=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,h=c.traveller,m=c.ariaLabel,g=c.data,v=c.startIndex,x=c.endIndex,y=Math.max(r,this.props.x),b=uj(uj({},an(this.props,!1)),{},{x:y,y:u,width:f,height:d}),w=m||"Min value: ".concat((s=g[v])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=g[x])===null||o===void 0?void 0:o.name);return V.createElement(br,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(k){["ArrowLeft","ArrowRight"].includes(k.key)&&(k.preventDefault(),k.stopPropagation(),l.handleTravellerMoveKeyboard(k.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(r,a){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,f=Math.min(r,a)+u,d=Math.max(Math.abs(a-r)-u,0);return V.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:d,height:l})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,s=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,f=this.state,d=f.startX,h=f.endX,m=5,g={pointerEvents:"none",fill:u};return V.createElement(br,{className:"recharts-brush-texts"},V.createElement(wx,Hx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-m,y:o+l/2},g),this.getTextOfTick(a)),V.createElement(wx,Hx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+c+m,y:o+l/2},g),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,a=r.data,s=r.className,o=r.children,l=r.x,c=r.y,u=r.width,f=r.height,d=r.alwaysShowText,h=this.state,m=h.startX,g=h.endX,v=h.isTextActive,x=h.isSlideMoving,y=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!qe(l)||!qe(c)||!qe(u)||!qe(f)||u<=0||f<=0)return null;var w=Zt("recharts-brush",s),j=V.Children.count(o)===1,k=FEe("userSelect","none");return V.createElement(br,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:k},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(v||x||y||b||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,s=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(s+l/2)-1;return V.createElement(V.Fragment,null,V.createElement("rect",{x:a,y:s,width:o,height:l,fill:c,stroke:"none"}),V.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),V.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var s;return V.isValidElement(r)?s=V.cloneElement(r,a):Ft(r)?s=r(a):s=t.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(r,a){var s=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,f=r.startIndex,d=r.endIndex;if(s!==a.prevData||u!==a.prevUpdateId)return uj({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?KEe({data:s,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,a){for(var s=r.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>a?l=c:o=c}return a>=r[l]?l:o}}])}(p.PureComponent);Ia(Fd,"displayName","Brush");Ia(Fd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var GEe=IC;function YEe(e,t){var n;return GEe(e,function(r,a,s){return n=t(r,a,s),!n}),!!n}var XEe=YEe,JEe=Iz,QEe=Tl,ZEe=XEe,ePe=Ea,tPe=Hb;function nPe(e,t,n){var r=ePe(e)?JEe:ZEe;return n&&tPe(e,t,n)&&(t=void 0),r(e,QEe(t))}var rPe=nPe;const aPe=fn(rPe);var ps=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},rR=t6;function iPe(e,t,n){t=="__proto__"&&rR?rR(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var sPe=iPe,oPe=sPe,lPe=Zz,cPe=Tl;function uPe(e,t){var n={};return t=cPe(t),lPe(e,function(r,a,s){oPe(n,a,t(r,a,s))}),n}var dPe=uPe;const fPe=fn(dPe);function hPe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var mPe=hPe,pPe=IC;function gPe(e,t){var n=!0;return pPe(e,function(r,a,s){return n=!!t(r,a,s),n}),n}var vPe=gPe,xPe=mPe,yPe=vPe,bPe=Tl,wPe=Ea,jPe=Hb;function _Pe(e,t,n){var r=wPe(e)?xPe:yPe;return n&&jPe(e,t,n)&&(t=void 0),r(e,bPe(t))}var kPe=_Pe;const R8=fn(kPe);var SPe=["x","y"];function Hm(e){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hm(e)}function xk(){return xk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xk.apply(this,arguments)}function aR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Jf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aR(Object(n),!0).forEach(function(r){NPe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function NPe(e,t,n){return t=CPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CPe(e){var t=APe(e,"string");return Hm(t)=="symbol"?t:t+""}function APe(e,t){if(Hm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EPe(e,t){if(e==null)return{};var n=PPe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function PPe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function TPe(e,t){var n=e.x,r=e.y,a=EPe(e,SPe),s="".concat(n),o=parseInt(s,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||a.height),f=parseInt(u,10),d="".concat(t.width||a.width),h=parseInt(d,10);return Jf(Jf(Jf(Jf(Jf({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:h,name:t.name,radius:t.radius})}function iR(e){return V.createElement(mEe,xk({shapeType:"rectangle",propTransformer:TPe,activeClassName:"recharts-active-bar"},e))}var OPe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var s=qe(r)||Xde(r);return s?t(r,a):(s||Bc(),n)}},IPe=["value","background"],M8;function Bd(e){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bd(e)}function RPe(e,t){if(e==null)return{};var n=MPe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function MPe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Kx(){return Kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kx.apply(this,arguments)}function sR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sR(Object(n),!0).forEach(function(r){Jo(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$8(r.key),r)}}function $Pe(e,t,n){return t&&oR(e.prototype,t),n&&oR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function LPe(e,t,n){return t=Gx(t),FPe(e,D8()?Reflect.construct(t,n||[],Gx(e).constructor):t.apply(e,n))}function FPe(e,t){if(t&&(Bd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BPe(e)}function BPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D8=function(){return!!e})()}function Gx(e){return Gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gx(e)}function UPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yk(e,t)}function yk(e,t){return yk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},yk(e,t)}function Jo(e,t,n){return t=$8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $8(e){var t=zPe(e,"string");return Bd(t)=="symbol"?t:t+""}function zPe(e,t){if(Bd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fn=function(e){function t(){var n;DPe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=LPe(this,t,[].concat(a)),Jo(n,"state",{isAnimationFinished:!1}),Jo(n,"id",Lb("recharts-bar-")),Jo(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),Jo(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return UPe(t,e),$Pe(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,f=an(this.props,!1);return r&&r.map(function(d,h){var m=h===c,g=m?u:o,v=er(er(er({},f),d),{},{isActive:m,option:g,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return V.createElement(br,Kx({className:"recharts-bar-rectangle"},ox(a.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),V.createElement(iR,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,s=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,f=a.animationEasing,d=a.animationId,h=this.state.prevData;return V.createElement(vl,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,v=s.map(function(x,y){var b=h&&h[y];if(b){var w=mu(b.x,x.x),j=mu(b.y,x.y),k=mu(b.width,x.width),_=mu(b.height,x.height);return er(er({},x),{},{x:w(g),y:j(g),width:k(g),height:_(g)})}if(o==="horizontal"){var S=mu(0,x.height),A=S(g);return er(er({},x),{},{y:x.y+x.height-A,height:A})}var N=mu(0,x.width),T=N(g);return er(er({},x),{},{width:T})});return V.createElement(br,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,s=r.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!aA(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,s=a.data,o=a.dataKey,l=a.activeIndex,c=an(this.props.background,!1);return s.map(function(u,f){u.value;var d=u.background,h=RPe(u,IPe);if(!d)return null;var m=er(er(er(er(er({},h),{},{fill:"#eee"},d),c),ox(r.props,u,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return V.createElement(iR,Kx({key:"background-bar-".concat(f),option:r.props.background,isActive:f===l},m))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,d=Bi(f,n0);if(!d)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(x,y){var b=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:b,errorVal:bs(x,y)}},g={clipPath:r?"url(#clipPath-".concat(a,")"):null};return V.createElement(br,g,d.map(function(v){return V.cloneElement(v,{key:"error-bar-".concat(a,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,s=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,f=r.top,d=r.width,h=r.height,m=r.isAnimationActive,g=r.background,v=r.id;if(a||!s||!s.length)return null;var x=this.state.isAnimationFinished,y=Zt("recharts-bar",o),b=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,j=b||w,k=sn(v)?this.id:v;return V.createElement(br,{className:y},b||w?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(k)},V.createElement("rect",{x:b?u:u-d/2,y:w?f:f-h/2,width:b?d:d*2,height:w?h:h*2}))):null,V.createElement(br,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(k,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,k),(!m||x)&&$i.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(p.PureComponent);M8=Fn;Jo(Fn,"displayName","Bar");Jo(Fn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ll.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Jo(Fn,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,s=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,m=xSe(r,n);if(!m)return null;var g=t.layout,v=n.type.defaultProps,x=v!==void 0?er(er({},v),n.props):n.props,y=x.dataKey,b=x.children,w=x.minPointSize,j=g==="horizontal"?o:s,k=u?j.scale.domain():null,_=NSe({numericAxis:j}),S=Bi(b,l6),A=d.map(function(N,T){var I,F,E,O,M,B;u?I=ySe(u[f+T],k):(I=bs(N,y),Array.isArray(I)||(I=[_,I]));var R=OPe(w,M8.defaultProps.minPointSize)(I[1],T);if(g==="horizontal"){var L,$=[o.scale(I[0]),o.scale(I[1])],C=$[0],U=$[1];F=iI({axis:s,ticks:l,bandSize:a,offset:m.offset,entry:N,index:T}),E=(L=U??C)!==null&&L!==void 0?L:void 0,O=m.size;var D=C-U;if(M=Number.isNaN(D)?0:D,B={x:F,y:o.y,width:O,height:o.height},Math.abs(R)>0&&Math.abs(M)<Math.abs(R)){var P=Di(M||R)*(Math.abs(R)-Math.abs(M));E-=P,M+=P}}else{var H=[s.scale(I[0]),s.scale(I[1])],G=H[0],Y=H[1];if(F=G,E=iI({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:N,index:T}),O=Y-G,M=m.size,B={x:s.x,y:E,width:s.width,height:M},Math.abs(R)>0&&Math.abs(O)<Math.abs(R)){var W=Di(O||R)*(Math.abs(R)-Math.abs(O));O+=W}}return er(er(er({},N),{},{x:F,y:E,width:O,height:M,value:u?I:I[1],payload:N,background:B},S&&S[T]&&S[T].props),{},{tooltipPayload:[m8(n,N)],tooltipPosition:{x:F+O/2,y:E+M/2}})});return er({data:A,layout:g},h)});function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function qPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L8(r.key),r)}}function WPe(e,t,n){return t&&lR(e.prototype,t),n&&lR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cR(Object(n),!0).forEach(function(r){i0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function i0(e,t,n){return t=L8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L8(e){var t=HPe(e,"string");return Vm(t)=="symbol"?t:t+""}function HPe(e,t){if(Vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VPe=function(t,n,r,a,s){var o=t.width,l=t.height,c=t.layout,u=t.children,f=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},h=!!Ma(u,Fn);return f.reduce(function(m,g){var v=n[g],x=v.orientation,y=v.domain,b=v.padding,w=b===void 0?{}:b,j=v.mirror,k=v.reversed,_="".concat(x).concat(j?"Mirror":""),S,A,N,T,I;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var F=y[1]-y[0],E=1/0,O=v.categoricalDomain.sort(Zde);if(O.forEach(function(H,G){G>0&&(E=Math.min((H||0)-(O[G-1]||0),E))}),Number.isFinite(E)){var M=E/F,B=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(S=M*B/2),v.padding==="no-gap"){var R=Lc(t.barCategoryGap,M*B),L=M*B/2;S=L-R-(L-R)/B*R}}}a==="xAxis"?A=[r.left+(w.left||0)+(S||0),r.left+r.width-(w.right||0)-(S||0)]:a==="yAxis"?A=c==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(S||0),r.top+r.height-(w.bottom||0)-(S||0)]:A=v.range,k&&(A=[A[1],A[0]]);var $=gSe(v,s,h),C=$.scale,U=$.realScaleType;C.domain(y).range(A),vSe(C);var D=SSe(C,Oi(Oi({},v),{},{realScaleType:U}));a==="xAxis"?(I=x==="top"&&!j||x==="bottom"&&j,N=r.left,T=d[_]-I*v.height):a==="yAxis"&&(I=x==="left"&&!j||x==="right"&&j,N=d[_]-I*v.width,T=r.top);var P=Oi(Oi(Oi({},v),D),{},{realScaleType:U,x:N,y:T,scale:C,width:a==="xAxis"?r.width:v.width,height:a==="yAxis"?r.height:v.height});return P.bandSize=Mx(P,D),!v.hide&&a==="xAxis"?d[_]+=(I?-1:1)*P.height:v.hide||(d[_]+=(I?-1:1)*P.width),Oi(Oi({},m),{},i0({},g,P))},{})},F8=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return{x:Math.min(r,s),y:Math.min(a,o),width:Math.abs(s-r),height:Math.abs(o-a)}},KPe=function(t){var n=t.x1,r=t.y1,a=t.x2,s=t.y2;return F8({x:n,y:r},{x:a,y:s})},B8=function(){function e(t){qPe(this,e),this.scale=t}return WPe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],s=r[r.length-1];return a<=s?n>=a&&n<=s:n>=s&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();i0(B8,"EPS",1e-4);var cA=function(t){var n=Object.keys(t).reduce(function(r,a){return Oi(Oi({},r),{},i0({},a,B8.create(t[a])))},{});return Oi(Oi({},n),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return fPe(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return R8(a,function(s,o){return n[o].isInRange(s)})}})};function GPe(e){return(e%180+180)%180}var YPe=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=GPe(a),o=s*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},XPe=Tl,JPe=Dp,QPe=qb;function ZPe(e){return function(t,n,r){var a=Object(t);if(!JPe(t)){var s=XPe(n);t=QPe(t),n=function(l){return s(a[l],l,a)}}var o=e(t,n,r);return o>-1?a[s?t[o]:o]:void 0}}var eTe=ZPe,tTe=P8;function nTe(e){var t=tTe(e),n=t%1;return t===t?n?t-n:t:0}var rTe=nTe,aTe=Kz,iTe=Tl,sTe=rTe,oTe=Math.max;function lTe(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:sTe(n);return a<0&&(a=oTe(r+a,0)),aTe(e,iTe(t),a)}var cTe=lTe,uTe=eTe,dTe=cTe,fTe=uTe(dTe),hTe=fTe;const mTe=fn(hTe);var pTe=ede(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),uA=p.createContext(void 0),dA=p.createContext(void 0),U8=p.createContext(void 0),z8=p.createContext({}),q8=p.createContext(void 0),W8=p.createContext(0),H8=p.createContext(0),uR=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,s=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,f=pTe(s);return V.createElement(uA.Provider,{value:r},V.createElement(dA.Provider,{value:a},V.createElement(z8.Provider,{value:s},V.createElement(U8.Provider,{value:f},V.createElement(q8.Provider,{value:o},V.createElement(W8.Provider,{value:u},V.createElement(H8.Provider,{value:c},l)))))))},gTe=function(){return p.useContext(q8)},V8=function(t){var n=p.useContext(uA);n==null&&Bc();var r=n[t];return r==null&&Bc(),r},vTe=function(){var t=p.useContext(uA);return zo(t)},xTe=function(){var t=p.useContext(dA),n=mTe(t,function(r){return R8(r.domain,Number.isFinite)});return n||zo(t)},K8=function(t){var n=p.useContext(dA);n==null&&Bc();var r=n[t];return r==null&&Bc(),r},yTe=function(){var t=p.useContext(U8);return t},bTe=function(){return p.useContext(z8)},fA=function(){return p.useContext(H8)},hA=function(){return p.useContext(W8)};function Ud(e){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ud(e)}function wTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jTe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y8(r.key),r)}}function _Te(e,t,n){return t&&jTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kTe(e,t,n){return t=Yx(t),STe(e,G8()?Reflect.construct(t,n||[],Yx(e).constructor):t.apply(e,n))}function STe(e,t){if(t&&(Ud(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NTe(e)}function NTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G8=function(){return!!e})()}function Yx(e){return Yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yx(e)}function CTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bk(e,t)}function bk(e,t){return bk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},bk(e,t)}function dR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dR(Object(n),!0).forEach(function(r){mA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mA(e,t,n){return t=Y8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y8(e){var t=ATe(e,"string");return Ud(t)=="symbol"?t:t+""}function ATe(e,t){if(Ud(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ETe(e,t){return ITe(e)||OTe(e,t)||TTe(e,t)||PTe()}function PTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TTe(e,t){if(e){if(typeof e=="string")return hR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hR(e,t)}}function hR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function OTe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ITe(e){if(Array.isArray(e))return e}function wk(){return wk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wk.apply(this,arguments)}var RTe=function(t,n){var r;return V.isValidElement(t)?r=V.cloneElement(t,n):Ft(t)?r=t(n):r=V.createElement("line",wk({},n,{className:"recharts-reference-line-line"})),r},MTe=function(t,n,r,a,s,o,l,c,u){var f=s.x,d=s.y,h=s.width,m=s.height;if(r){var g=u.y,v=t.y.apply(g,{position:o});if(ps(u,"discard")&&!t.y.isInRange(v))return null;var x=[{x:f+h,y:v},{x:f,y:v}];return c==="left"?x.reverse():x}if(n){var y=u.x,b=t.x.apply(y,{position:o});if(ps(u,"discard")&&!t.x.isInRange(b))return null;var w=[{x:b,y:d+m},{x:b,y:d}];return l==="top"?w.reverse():w}if(a){var j=u.segment,k=j.map(function(_){return t.apply(_,{position:o})});return ps(u,"discard")&&aPe(k,function(_){return!t.isInRange(_)})?null:k}return null};function DTe(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=gTe(),f=V8(a),d=K8(s),h=yTe();if(!u||!h)return null;Js(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=cA({x:f.scale,y:d.scale}),g=mr(t),v=mr(n),x=r&&r.length===2,y=MTe(m,g,v,x,h,e.position,f.orientation,d.orientation,e);if(!y)return null;var b=ETe(y,2),w=b[0],j=w.x,k=w.y,_=b[1],S=_.x,A=_.y,N=ps(e,"hidden")?"url(#".concat(u,")"):void 0,T=fR(fR({clipPath:N},an(e,!0)),{},{x1:j,y1:k,x2:S,y2:A});return V.createElement(br,{className:Zt("recharts-reference-line",l)},RTe(o,T),Br.renderCallByParent(e,KPe({x1:j,y1:k,x2:S,y2:A})))}var pA=function(e){function t(){return wTe(this,t),kTe(this,t,arguments)}return CTe(t,e),_Te(t,[{key:"render",value:function(){return V.createElement(DTe,this.props)}}])}(V.Component);mA(pA,"displayName","ReferenceLine");mA(pA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function jk(){return jk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jk.apply(this,arguments)}function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}function mR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mR(Object(n),!0).forEach(function(r){s0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LTe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J8(r.key),r)}}function FTe(e,t,n){return t&&LTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function BTe(e,t,n){return t=Xx(t),UTe(e,X8()?Reflect.construct(t,n||[],Xx(e).constructor):t.apply(e,n))}function UTe(e,t){if(t&&(zd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zTe(e)}function zTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X8=function(){return!!e})()}function Xx(e){return Xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xx(e)}function qTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_k(e,t)}function _k(e,t){return _k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},_k(e,t)}function s0(e,t,n){return t=J8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J8(e){var t=WTe(e,"string");return zd(t)=="symbol"?t:t+""}function WTe(e,t){if(zd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HTe=function(t){var n=t.x,r=t.y,a=t.xAxis,s=t.yAxis,o=cA({x:a.scale,y:s.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return ps(t,"discard")&&!o.isInRange(l)?null:l},o0=function(e){function t(){return $Te(this,t),BTe(this,t,arguments)}return qTe(t,e),FTe(t,[{key:"render",value:function(){var r=this.props,a=r.x,s=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=mr(a),f=mr(s);if(Js(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=HTe(this.props);if(!d)return null;var h=d.x,m=d.y,g=this.props,v=g.shape,x=g.className,y=ps(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=pR(pR({clipPath:y},an(this.props,!0)),{},{cx:h,cy:m});return V.createElement(br,{className:Zt("recharts-reference-dot",x)},t.renderDot(v,b),Br.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(V.Component);s0(o0,"displayName","ReferenceDot");s0(o0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});s0(o0,"renderDot",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):Ft(e)?n=e(t):n=V.createElement(A8,jk({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function kk(){return kk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kk.apply(this,arguments)}function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}function gR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gR(Object(n),!0).forEach(function(r){l0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KTe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z8(r.key),r)}}function GTe(e,t,n){return t&&KTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function YTe(e,t,n){return t=Jx(t),XTe(e,Q8()?Reflect.construct(t,n||[],Jx(e).constructor):t.apply(e,n))}function XTe(e,t){if(t&&(qd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JTe(e)}function JTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q8=function(){return!!e})()}function Jx(e){return Jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jx(e)}function QTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sk(e,t)}function Sk(e,t){return Sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Sk(e,t)}function l0(e,t,n){return t=Z8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z8(e){var t=ZTe(e,"string");return qd(t)=="symbol"?t:t+""}function ZTe(e,t){if(qd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e2e=function(t,n,r,a,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,f=s.xAxis,d=s.yAxis;if(!f||!d)return null;var h=cA({x:f.scale,y:d.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:n?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return ps(s,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:F8(m,g)},c0=function(e){function t(){return VTe(this,t),YTe(this,t,arguments)}return QTe(t,e),GTe(t,[{key:"render",value:function(){var r=this.props,a=r.x1,s=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,f=r.clipPathId;Js(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=mr(a),h=mr(s),m=mr(o),g=mr(l),v=this.props.shape;if(!d&&!h&&!m&&!g&&!v)return null;var x=e2e(d,h,m,g,this.props);if(!x&&!v)return null;var y=ps(this.props,"hidden")?"url(#".concat(f,")"):void 0;return V.createElement(br,{className:Zt("recharts-reference-area",c)},t.renderRect(v,vR(vR({clipPath:y},an(this.props,!0)),x)),Br.renderCallByParent(this.props,x))}}])}(V.Component);l0(c0,"displayName","ReferenceArea");l0(c0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});l0(c0,"renderRect",function(e,t){var n;return V.isValidElement(e)?n=V.cloneElement(e,t):Ft(e)?n=e(t):n=V.createElement(lA,kk({},t,{className:"recharts-reference-area-rect"})),n});function eq(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function t2e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return YPe(r,n)}function n2e(e,t,n){var r=n==="width",a=e.x,s=e.y,o=e.width,l=e.height;return t===1?{start:r?a:s,end:r?a+o:s+l}:{start:r?a+o:s+l,end:r?a:s}}function Qx(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-a)<=0}function r2e(e,t){return eq(e,t+1)}function a2e(e,t,n,r,a){for(var s=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,f=o,d=function(){var g=r==null?void 0:r[c];if(g===void 0)return{v:eq(r,u)};var v=c,x,y=function(){return x===void 0&&(x=n(g,v)),x},b=g.coordinate,w=c===0||Qx(e,b,y,f,l);w||(c=0,f=o,u+=1),w&&(f=b+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=d(),h)return h.v;return[]}function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function xR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xR(Object(n),!0).forEach(function(r){i2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function i2e(e,t,n){return t=s2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s2e(e){var t=o2e(e,"string");return Km(t)=="symbol"?t:t+""}function o2e(e,t){if(Km(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l2e(e,t,n,r,a){for(var s=(r||[]).slice(),o=s.length,l=t.start,c=t.end,u=function(h){var m=s[h],g,v=function(){return g===void 0&&(g=n(m,h)),g};if(h===o-1){var x=e*(m.coordinate+e*v()/2-c);s[h]=m=Lr(Lr({},m),{},{tickCoord:x>0?m.coordinate-x*e:m.coordinate})}else s[h]=m=Lr(Lr({},m),{},{tickCoord:m.coordinate});var y=Qx(e,m.tickCoord,v,l,c);y&&(c=m.tickCoord-e*(v()/2+a),s[h]=Lr(Lr({},m),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return s}function c2e(e,t,n,r,a,s){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(s){var f=r[l-1],d=n(f,l-1),h=e*(f.coordinate+e*d/2-u);o[l-1]=f=Lr(Lr({},f),{},{tickCoord:h>0?f.coordinate-h*e:f.coordinate});var m=Qx(e,f.tickCoord,function(){return d},c,u);m&&(u=f.tickCoord-e*(d/2+a),o[l-1]=Lr(Lr({},f),{},{isShow:!0}))}for(var g=s?l-1:l,v=function(b){var w=o[b],j,k=function(){return j===void 0&&(j=n(w,b)),j};if(b===0){var _=e*(w.coordinate-e*k()/2-c);o[b]=w=Lr(Lr({},w),{},{tickCoord:_<0?w.coordinate-_*e:w.coordinate})}else o[b]=w=Lr(Lr({},w),{},{tickCoord:w.coordinate});var S=Qx(e,w.tickCoord,k,c,u);S&&(c=w.tickCoord+e*(k()/2+a),o[b]=Lr(Lr({},w),{},{isShow:!0}))},x=0;x<g;x++)v(x);return o}function gA(e,t,n){var r=e.tick,a=e.ticks,s=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!a||!a.length||!r)return[];if(qe(c)||ll.isSsr)return r2e(a,typeof c=="number"&&qe(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",g=f&&m==="width"?kh(f,{fontSize:t,letterSpacing:n}):{width:0,height:0},v=function(w,j){var k=Ft(u)?u(w.value,j):w.value;return m==="width"?t2e(kh(k,{fontSize:t,letterSpacing:n}),g,d):kh(k,{fontSize:t,letterSpacing:n})[m]},x=a.length>=2?Di(a[1].coordinate-a[0].coordinate):1,y=n2e(s,x,m);return c==="equidistantPreserveStart"?a2e(x,y,v,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=c2e(x,y,v,a,o,c==="preserveStartEnd"):h=l2e(x,y,v,a,o),h.filter(function(b){return b.isShow}))}var u2e=["viewBox"],d2e=["viewBox"],f2e=["ticks"];function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qu.apply(this,arguments)}function yR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yR(Object(n),!0).forEach(function(r){vA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dj(e,t){if(e==null)return{};var n=h2e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function h2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function m2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nq(r.key),r)}}function p2e(e,t,n){return t&&bR(e.prototype,t),n&&bR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g2e(e,t,n){return t=Zx(t),v2e(e,tq()?Reflect.construct(t,n||[],Zx(e).constructor):t.apply(e,n))}function v2e(e,t){if(t&&(Wd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x2e(e)}function x2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tq=function(){return!!e})()}function Zx(e){return Zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zx(e)}function y2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nk(e,t)}function Nk(e,t){return Nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Nk(e,t)}function vA(e,t,n){return t=nq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nq(e){var t=b2e(e,"string");return Wd(t)=="symbol"?t:t+""}function b2e(e,t){if(Wd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bf=function(e){function t(n){var r;return m2e(this,t),r=g2e(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return y2e(t,e),p2e(t,[{key:"shouldComponentUpdate",value:function(r,a){var s=r.viewBox,o=dj(r,u2e),l=this.props,c=l.viewBox,u=dj(l,d2e);return!nd(s,c)||!nd(o,u)||!nd(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,s=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,f=a.tickSize,d=a.mirror,h=a.tickMargin,m,g,v,x,y,b,w=d?-1:1,j=r.tickSize||f,k=qe(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=g=r.coordinate,x=o+ +!d*c,v=x-w*j,b=v-w*h,y=k;break;case"left":v=x=r.coordinate,g=s+ +!d*l,m=g-w*j,y=m-w*h,b=k;break;case"right":v=x=r.coordinate,g=s+ +d*l,m=g+w*j,y=m+w*h,b=k;break;default:m=g=r.coordinate,x=o+ +d*c,v=x+w*j,b=v+w*h,y=k;break}return{line:{x1:m,y1:v,x2:g,y2:x},tick:{x:y,y:b}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,f=r.axisLine,d=lr(lr(lr({},an(this.props,!1)),an(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);d=lr(lr({},d),{},{x1:a,y1:s+h*l,x2:a+o,y2:s+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);d=lr(lr({},d),{},{x1:a+m*o,y1:s,x2:a+m*o,y2:s+l})}return V.createElement("line",qu({},d,{className:Zt("recharts-cartesian-axis-line",fi(f,"className"))}))}},{key:"renderTicks",value:function(r,a,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,d=l.tickFormatter,h=l.unit,m=gA(lr(lr({},this.props),{},{ticks:r}),a,s),g=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),x=an(this.props,!1),y=an(f,!1),b=lr(lr({},x),{},{fill:"none"},an(c,!1)),w=m.map(function(j,k){var _=o.getTickLineCoord(j),S=_.line,A=_.tick,N=lr(lr(lr(lr({textAnchor:g,verticalAnchor:v},x),{},{stroke:"none",fill:u},y),A),{},{index:k,payload:j,visibleTicksCount:m.length,tickFormatter:d});return V.createElement(br,qu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},ox(o.props,j,k)),c&&V.createElement("line",qu({},b,S,{className:Zt("recharts-cartesian-axis-tick-line",fi(c,"className"))})),f&&t.renderTickItem(f,N,"".concat(Ft(d)?d(j.value,k):j.value).concat(h||"")))});return V.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,a=this.props,s=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var d=this.props,h=d.ticks,m=dj(d,f2e),g=h;return Ft(c)&&(g=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:V.createElement(br,{className:Zt("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},s&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Br.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,s){var o,l=Zt(a.className,"recharts-cartesian-axis-tick-value");return V.isValidElement(r)?o=V.cloneElement(r,lr(lr({},a),{},{className:l})):Ft(r)?o=r(lr(lr({},a),{},{className:l})):o=V.createElement(wx,qu({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(p.Component);vA(bf,"displayName","CartesianAxis");vA(bf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var w2e=["x1","y1","x2","y2","key"],j2e=["offset"];function Uc(e){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uc(e)}function wR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wR(Object(n),!0).forEach(function(r){_2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _2e(e,t,n){return t=k2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k2e(e){var t=S2e(e,"string");return Uc(t)=="symbol"?t:t+""}function S2e(e,t){if(Uc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Uc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lc.apply(this,arguments)}function jR(e,t){if(e==null)return{};var n=N2e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function N2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var C2e=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,c=t.ry;return V.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function rq(e,t){var n;if(V.isValidElement(e))n=V.cloneElement(e,t);else if(Ft(e))n=e(t);else{var r=t.x1,a=t.y1,s=t.x2,o=t.y2,l=t.key,c=jR(t,w2e),u=an(c,!1);u.offset;var f=jR(u,j2e);n=V.createElement("line",lc({},f,{x1:r,y1:a,x2:s,y2:o,fill:"none",key:l}))}return n}function A2e(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,s=e.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=Ur(Ur({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return rq(a,u)});return V.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function E2e(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,s=e.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=Ur(Ur({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return rq(a,u)});return V.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function P2e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,s=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==f[0]&&f.unshift(0);var d=f.map(function(h,m){var g=!f[m+1],v=g?a+o-h:f[m+1]-h;if(v<=0)return null;var x=m%t.length;return V.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:v,width:s,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function T2e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,s=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var f=u.map(function(h){return Math.round(h+s-s)}).sort(function(h,m){return h-m});s!==f[0]&&f.unshift(0);var d=f.map(function(h,m){var g=!f[m+1],v=g?s+l-h:f[m+1]-h;if(v<=0)return null;var x=m%r.length;return V.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:v,height:c,stroke:"none",fill:r[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var O2e=function(t,n){var r=t.xAxis,a=t.width,s=t.height,o=t.offset;return f8(gA(Ur(Ur(Ur({},bf.defaultProps),r),{},{ticks:Hs(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,n)},I2e=function(t,n){var r=t.yAxis,a=t.width,s=t.height,o=t.offset;return f8(gA(Ur(Ur(Ur({},bf.defaultProps),r),{},{ticks:Hs(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,n)},vu={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ck(e){var t,n,r,a,s,o,l=fA(),c=hA(),u=bTe(),f=Ur(Ur({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:vu.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:vu.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:vu.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:vu.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:vu.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:vu.verticalFill,x:qe(e.x)?e.x:u.left,y:qe(e.y)?e.y:u.top,width:qe(e.width)?e.width:u.width,height:qe(e.height)?e.height:u.height}),d=f.x,h=f.y,m=f.width,g=f.height,v=f.syncWithTicks,x=f.horizontalValues,y=f.verticalValues,b=vTe(),w=xTe();if(!qe(m)||m<=0||!qe(g)||g<=0||!qe(d)||d!==+d||!qe(h)||h!==+h)return null;var j=f.verticalCoordinatesGenerator||O2e,k=f.horizontalCoordinatesGenerator||I2e,_=f.horizontalPoints,S=f.verticalPoints;if((!_||!_.length)&&Ft(k)){var A=x&&x.length,N=k({yAxis:w?Ur(Ur({},w),{},{ticks:A?x:w.ticks}):void 0,width:l,height:c,offset:u},A?!0:v);Js(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Uc(N),"]")),Array.isArray(N)&&(_=N)}if((!S||!S.length)&&Ft(j)){var T=y&&y.length,I=j({xAxis:b?Ur(Ur({},b),{},{ticks:T?y:b.ticks}):void 0,width:l,height:c,offset:u},T?!0:v);Js(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Uc(I),"]")),Array.isArray(I)&&(S=I)}return V.createElement("g",{className:"recharts-cartesian-grid"},V.createElement(C2e,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),V.createElement(A2e,lc({},f,{offset:u,horizontalPoints:_,xAxis:b,yAxis:w})),V.createElement(E2e,lc({},f,{offset:u,verticalPoints:S,xAxis:b,yAxis:w})),V.createElement(P2e,lc({},f,{horizontalPoints:_})),V.createElement(T2e,lc({},f,{verticalPoints:S})))}Ck.displayName="CartesianGrid";function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function R2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sq(r.key),r)}}function D2e(e,t,n){return t&&M2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $2e(e,t,n){return t=ey(t),L2e(e,aq()?Reflect.construct(t,n||[],ey(e).constructor):t.apply(e,n))}function L2e(e,t){if(t&&(Hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F2e(e)}function F2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aq=function(){return!!e})()}function ey(e){return ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ey(e)}function B2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ak(e,t)}function Ak(e,t){return Ak=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ak(e,t)}function iq(e,t,n){return t=sq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sq(e){var t=U2e(e,"string");return Hd(t)=="symbol"?t:t+""}function U2e(e,t){if(Hd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ek(){return Ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ek.apply(this,arguments)}function z2e(e){var t=e.xAxisId,n=fA(),r=hA(),a=V8(t);return a==null?null:p.createElement(bf,Ek({},a,{className:Zt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return Hs(o,!0)}}))}var Qr=function(e){function t(){return R2e(this,t),$2e(this,t,arguments)}return B2e(t,e),D2e(t,[{key:"render",value:function(){return p.createElement(z2e,this.props)}}])}(p.Component);iq(Qr,"displayName","XAxis");iq(Qr,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Vd(e){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vd(e)}function q2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cq(r.key),r)}}function H2e(e,t,n){return t&&W2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function V2e(e,t,n){return t=ty(t),K2e(e,oq()?Reflect.construct(t,n||[],ty(e).constructor):t.apply(e,n))}function K2e(e,t){if(t&&(Vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G2e(e)}function G2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oq=function(){return!!e})()}function ty(e){return ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ty(e)}function Y2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pk(e,t)}function Pk(e,t){return Pk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Pk(e,t)}function lq(e,t,n){return t=cq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cq(e){var t=X2e(e,"string");return Vd(t)=="symbol"?t:t+""}function X2e(e,t){if(Vd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tk(){return Tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tk.apply(this,arguments)}var J2e=function(t){var n=t.yAxisId,r=fA(),a=hA(),s=K8(n);return s==null?null:p.createElement(bf,Tk({},s,{className:Zt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return Hs(l,!0)}}))},Zr=function(e){function t(){return q2e(this,t),V2e(this,t,arguments)}return Y2e(t,e),H2e(t,[{key:"render",value:function(){return p.createElement(J2e,this.props)}}])}(p.Component);lq(Zr,"displayName","YAxis");lq(Zr,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function _R(e){return tOe(e)||eOe(e)||Z2e(e)||Q2e()}function Q2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z2e(e,t){if(e){if(typeof e=="string")return Ok(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ok(e,t)}}function eOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tOe(e){if(Array.isArray(e))return Ok(e)}function Ok(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ik=function(t,n,r,a,s){var o=Bi(t,pA),l=Bi(t,o0),c=[].concat(_R(o),_R(l)),u=Bi(t,c0),f="".concat(a,"Id"),d=a[0],h=n;if(c.length&&(h=c.reduce(function(v,x){if(x.props[f]===r&&ps(x.props,"extendDomain")&&qe(x.props[d])){var y=x.props[d];return[Math.min(v[0],y),Math.max(v[1],y)]}return v},h)),u.length){var m="".concat(d,"1"),g="".concat(d,"2");h=u.reduce(function(v,x){if(x.props[f]===r&&ps(x.props,"extendDomain")&&qe(x.props[m])&&qe(x.props[g])){var y=x.props[m],b=x.props[g];return[Math.min(v[0],y,b),Math.max(v[1],y,b)]}return v},h)}return s&&s.length&&(h=s.reduce(function(v,x){return qe(x)?[Math.min(v[0],x),Math.max(v[1],x)]:v},h)),h},uq={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function s(c,u,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new a(f,d||c,h),g=n?n+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,m=d.length,g=new Array(m);h<m;h++)g[h]=d[h].fn;return g},l.prototype.listenerCount=function(u){var f=n?n+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,h,m,g){var v=n?n+u:u;if(!this._events[v])return!1;var x=this._events[v],y=arguments.length,b,w;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,d),!0;case 4:return x.fn.call(x.context,f,d,h),!0;case 5:return x.fn.call(x.context,f,d,h,m),!0;case 6:return x.fn.call(x.context,f,d,h,m,g),!0}for(w=1,b=new Array(y-1);w<y;w++)b[w-1]=arguments[w];x.fn.apply(x.context,b)}else{var j=x.length,k;for(w=0;w<j;w++)switch(x[w].once&&this.removeListener(u,x[w].fn,void 0,!0),y){case 1:x[w].fn.call(x[w].context);break;case 2:x[w].fn.call(x[w].context,f);break;case 3:x[w].fn.call(x[w].context,f,d);break;case 4:x[w].fn.call(x[w].context,f,d,h);break;default:if(!b)for(k=1,b=new Array(y-1);k<y;k++)b[k-1]=arguments[k];x[w].fn.apply(x[w].context,b)}}return!0},l.prototype.on=function(u,f,d){return s(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return s(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,h){var m=n?n+u:u;if(!this._events[m])return this;if(!f)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===f&&(!h||g.once)&&(!d||g.context===d)&&o(this,m);else{for(var v=0,x=[],y=g.length;v<y;v++)(g[v].fn!==f||h&&!g[v].once||d&&g[v].context!==d)&&x.push(g[v]);x.length?this._events[m]=x.length===1?x[0]:x:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(uq);var nOe=uq.exports;const rOe=fn(nOe);var fj=new rOe,hj="recharts.syncMouseEvents";function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function aOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dq(r.key),r)}}function sOe(e,t,n){return t&&iOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mj(e,t,n){return t=dq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dq(e){var t=oOe(e,"string");return Gm(t)=="symbol"?t:t+""}function oOe(e,t){if(Gm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lOe=function(){function e(){aOe(this,e),mj(this,"activeIndex",0),mj(this,"coordinateList",[]),mj(this,"layout","horizontal")}return sOe(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,s=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,f=n.offset,d=f===void 0?null:f,h=n.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=s+c+u,h=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function cOe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&qe(r)&&qe(a))return!0}return!1}function uOe(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function fq(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,s=e.endAngle,o=Pr(t,n,r,a),l=Pr(t,n,r,s);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:a,endAngle:s}}function dOe(e,t,n){var r,a,s,o;if(e==="horizontal")r=t.x,s=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,h=Pr(l,c,u,d),m=Pr(l,c,f,d);r=h.x,a=h.y,s=m.x,o=m.y}else return fq(t);return[{x:r,y:a},{x:s,y:o}]}function Ym(e){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ym(e)}function kR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $g(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kR(Object(n),!0).forEach(function(r){fOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fOe(e,t,n){return t=hOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hOe(e){var t=mOe(e,"string");return Ym(t)=="symbol"?t:t+""}function mOe(e,t){if(Ym(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pOe(e){var t,n,r=e.element,a=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,h=e.chartName,m=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!s||!o||h!=="ScatterChart"&&a!=="axis")return null;var g,v=wI;if(h==="ScatterChart")g=o,v=AAe;else if(h==="BarChart")g=uOe(d,o,c,f),v=lA;else if(d==="radial"){var x=fq(o),y=x.cx,b=x.cy,w=x.radius,j=x.startAngle,k=x.endAngle;g={cx:y,cy:b,startAngle:j,endAngle:k,innerRadius:w,outerRadius:w},v=v8}else g={points:dOe(d,o,c)},v=wI;var _=$g($g($g($g({stroke:"#ccc",pointerEvents:"none"},c),g),an(m,!1)),{},{payload:l,payloadIndex:u,className:Zt("recharts-tooltip-cursor",m.className)});return p.isValidElement(m)?p.cloneElement(m,_):p.createElement(v,_)}var gOe=["item"],vOe=["children","className","width","height","style","compact","title","desc"];function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}function Wu(){return Wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wu.apply(this,arguments)}function SR(e,t){return bOe(e)||yOe(e,t)||mq(e,t)||xOe()}function xOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yOe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function bOe(e){if(Array.isArray(e))return e}function NR(e,t){if(e==null)return{};var n=wOe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wOe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function jOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pq(r.key),r)}}function kOe(e,t,n){return t&&_Oe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function SOe(e,t,n){return t=ny(t),NOe(e,hq()?Reflect.construct(t,n||[],ny(e).constructor):t.apply(e,n))}function NOe(e,t){if(t&&(Kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return COe(e)}function COe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hq=function(){return!!e})()}function ny(e){return ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ny(e)}function AOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rk(e,t)}function Rk(e,t){return Rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Rk(e,t)}function Gd(e){return TOe(e)||POe(e)||mq(e)||EOe()}function EOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mq(e,t){if(e){if(typeof e=="string")return Mk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mk(e,t)}}function POe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function TOe(e){if(Array.isArray(e))return Mk(e)}function Mk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function CR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CR(Object(n),!0).forEach(function(r){xt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xt(e,t,n){return t=pq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pq(e){var t=OOe(e,"string");return Kd(t)=="symbol"?t:t+""}function OOe(e,t){if(Kd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IOe={xAxis:["bottom","top"],yAxis:["left","right"]},ROe={width:"100%",height:"100%"},gq={x:0,y:0};function Lg(e){return e}var MOe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},DOe=function(t,n,r,a){var s=n.find(function(f){return f&&f.index===r});if(s){if(t==="horizontal")return{x:s.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:s.coordinate};if(t==="centric"){var o=s.coordinate,l=a.radius;return pe(pe(pe({},a),Pr(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=a.angle;return pe(pe(pe({},a),Pr(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return gq},u0=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,s=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Gd(l),Gd(u)):l},[]);return o.length>0?o:t&&t.length&&qe(a)&&qe(s)?t.slice(a,s+1):[]};function vq(e){return e==="number"?[0,"auto"]:void 0}var Dk=function(t,n,r,a){var s=t.graphicalItems,o=t.tooltipAxis,l=u0(n,t);return r<0||!s||!s.length||r>=l.length?null:s.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:n;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=d===void 0?l:d;h=m_(m,o.dataKey,a)}else h=d&&d[r]||l[r];return h?[].concat(Gd(c),[m8(u,h)]):c},[])},AR=function(t,n,r,a){var s=a||{x:t.chartX,y:t.chartY},o=MOe(s,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=uSe(o,l,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,h=Dk(t,n,f,d),m=DOe(r,l,f,s);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:m}}return null},$Oe=function(t,n){var r=n.axes,a=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.layout,d=t.children,h=t.stackOffset,m=d8(f,s);return r.reduce(function(g,v){var x,y=v.type.defaultProps!==void 0?pe(pe({},v.type.defaultProps),v.props):v.props,b=y.type,w=y.dataKey,j=y.allowDataOverflow,k=y.allowDuplicatedCategory,_=y.scale,S=y.ticks,A=y.includeHidden,N=y[o];if(g[N])return g;var T=u0(t.data,{graphicalItems:a.filter(function(D){var P,H=o in D.props?D.props[o]:(P=D.type.defaultProps)===null||P===void 0?void 0:P[o];return H===N}),dataStartIndex:c,dataEndIndex:u}),I=T.length,F,E,O;cOe(y.domain,j,b)&&(F=tk(y.domain,null,j),m&&(b==="number"||_!=="auto")&&(O=Nh(T,w,"category")));var M=vq(b);if(!F||F.length===0){var B,R=(B=y.domain)!==null&&B!==void 0?B:M;if(w){if(F=Nh(T,w,b),b==="category"&&m){var L=Qde(F);k&&L?(E=F,F=Wx(0,I)):k||(F=lI(R,F,v).reduce(function(D,P){return D.indexOf(P)>=0?D:[].concat(Gd(D),[P])},[]))}else if(b==="category")k?F=F.filter(function(D){return D!==""&&!sn(D)}):F=lI(R,F,v).reduce(function(D,P){return D.indexOf(P)>=0||P===""||sn(P)?D:[].concat(Gd(D),[P])},[]);else if(b==="number"){var $=pSe(T,a.filter(function(D){var P,H,G=o in D.props?D.props[o]:(P=D.type.defaultProps)===null||P===void 0?void 0:P[o],Y="hide"in D.props?D.props.hide:(H=D.type.defaultProps)===null||H===void 0?void 0:H.hide;return G===N&&(A||!Y)}),w,s,f);$&&(F=$)}m&&(b==="number"||_!=="auto")&&(O=Nh(T,w,"category"))}else m?F=Wx(0,I):l&&l[N]&&l[N].hasStack&&b==="number"?F=h==="expand"?[0,1]:h8(l[N].stackGroups,c,u):F=u8(T,a.filter(function(D){var P=o in D.props?D.props[o]:D.type.defaultProps[o],H="hide"in D.props?D.props.hide:D.type.defaultProps.hide;return P===N&&(A||!H)}),b,f,!0);if(b==="number")F=Ik(d,F,N,s,S),R&&(F=tk(R,F,j));else if(b==="category"&&R){var C=R,U=F.every(function(D){return C.indexOf(D)>=0});U&&(F=C)}}return pe(pe({},g),{},xt({},N,pe(pe({},y),{},{axisType:s,domain:F,categoricalDomain:O,duplicateDomain:E,originalDomain:(x=y.domain)!==null&&x!==void 0?x:M,isCategorical:m,layout:f})))},{})},LOe=function(t,n){var r=n.graphicalItems,a=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.layout,d=t.children,h=u0(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=h.length,g=d8(f,s),v=-1;return r.reduce(function(x,y){var b=y.type.defaultProps!==void 0?pe(pe({},y.type.defaultProps),y.props):y.props,w=b[o],j=vq("number");if(!x[w]){v++;var k;return g?k=Wx(0,m):l&&l[w]&&l[w].hasStack?(k=h8(l[w].stackGroups,c,u),k=Ik(d,k,w,s)):(k=tk(j,u8(h,r.filter(function(_){var S,A,N=o in _.props?_.props[o]:(S=_.type.defaultProps)===null||S===void 0?void 0:S[o],T="hide"in _.props?_.props.hide:(A=_.type.defaultProps)===null||A===void 0?void 0:A.hide;return N===w&&!T}),"number",f),a.defaultProps.allowDataOverflow),k=Ik(d,k,w,s)),pe(pe({},x),{},xt({},w,pe(pe({axisType:s},a.defaultProps),{},{hide:!0,orientation:fi(IOe,"".concat(s,".").concat(v%2),null),domain:k,originalDomain:j,isCategorical:g,layout:f})))}return x},{})},FOe=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.children,d="".concat(a,"Id"),h=Bi(f,s),m={};return h&&h.length?m=$Oe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=LOe(t,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},BOe=function(t){var n=zo(t),r=Hs(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:RC(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Mx(n,r)}},ER=function(t){var n=t.children,r=t.defaultShowTooltip,a=Ma(n,Fd),s=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},UOe=function(t){return!t||!t.length?!1:t.some(function(n){var r=Xs(n&&n.type);return r&&r.indexOf("Bar")>=0})},PR=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},zOe=function(t,n){var r=t.props,a=t.graphicalItems,s=t.xAxisMap,o=s===void 0?{}:s,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,f=r.height,d=r.children,h=r.margin||{},m=Ma(d,Fd),g=Ma(d,ii),v=Object.keys(c).reduce(function(k,_){var S=c[_],A=S.orientation;return!S.mirror&&!S.hide?pe(pe({},k),{},xt({},A,k[A]+S.width)):k},{left:h.left||0,right:h.right||0}),x=Object.keys(o).reduce(function(k,_){var S=o[_],A=S.orientation;return!S.mirror&&!S.hide?pe(pe({},k),{},xt({},A,fi(k,"".concat(A))+S.height)):k},{top:h.top||0,bottom:h.bottom||0}),y=pe(pe({},x),v),b=y.bottom;m&&(y.bottom+=m.props.height||Fd.defaultProps.height),g&&n&&(y=hSe(y,a,r,n));var w=u-y.left-y.right,j=f-y.top-y.bottom;return pe(pe({brushBottom:b},y),{},{width:Math.max(w,0),height:Math.max(j,0)})},qOe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},WOe=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,s=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,h=function(y,b){var w=b.graphicalItems,j=b.stackGroups,k=b.offset,_=b.updateId,S=b.dataStartIndex,A=b.dataEndIndex,N=y.barSize,T=y.layout,I=y.barGap,F=y.barCategoryGap,E=y.maxBarSize,O=PR(T),M=O.numericAxisName,B=O.cateAxisName,R=UOe(w),L=[];return w.forEach(function($,C){var U=u0(y.data,{graphicalItems:[$],dataStartIndex:S,dataEndIndex:A}),D=$.type.defaultProps!==void 0?pe(pe({},$.type.defaultProps),$.props):$.props,P=D.dataKey,H=D.maxBarSize,G=D["".concat(M,"Id")],Y=D["".concat(B,"Id")],W={},ee=c.reduce(function(ge,We){var dt=b["".concat(We.axisType,"Map")],yt=D["".concat(We.axisType,"Id")];dt&&dt[yt]||We.axisType==="zAxis"||Bc();var Et=dt[yt];return pe(pe({},ge),{},xt(xt({},We.axisType,Et),"".concat(We.axisType,"Ticks"),Hs(Et)))},W),X=ee[B],ae=ee["".concat(B,"Ticks")],re=j&&j[G]&&j[G].hasStack&&CSe($,j[G].stackGroups),J=Xs($.type).indexOf("Bar")>=0,ve=Mx(X,ae),z=[],q=R&&dSe({barSize:N,stackGroups:j,totalSize:qOe(ee,B)});if(J){var ie,oe,be=sn(H)?E:H,Se=(ie=(oe=Mx(X,ae,!0))!==null&&oe!==void 0?oe:be)!==null&&ie!==void 0?ie:0;z=fSe({barGap:I,barCategoryGap:F,bandSize:Se!==ve?Se:ve,sizeList:q[Y],maxBarSize:be}),Se!==ve&&(z=z.map(function(ge){return pe(pe({},ge),{},{position:pe(pe({},ge.position),{},{offset:ge.position.offset-Se/2})})}))}var Le=$&&$.type&&$.type.getComposedData;Le&&L.push({props:pe(pe({},Le(pe(pe({},ee),{},{displayedData:U,props:y,dataKey:P,item:$,bandSize:ve,barPosition:z,offset:k,stackedData:re,layout:T,dataStartIndex:S,dataEndIndex:A}))),{},xt(xt(xt({key:$.key||"item-".concat(C)},M,ee[M]),B,ee[B]),"animationId",_)),childIndex:ufe($,y.children),item:$})}),L},m=function(y,b){var w=y.props,j=y.dataStartIndex,k=y.dataEndIndex,_=y.updateId;if(!n2({props:w}))return null;var S=w.children,A=w.layout,N=w.stackOffset,T=w.data,I=w.reverseStackOrder,F=PR(A),E=F.numericAxisName,O=F.cateAxisName,M=Bi(S,r),B=kSe(T,M,"".concat(E,"Id"),"".concat(O,"Id"),N,I),R=c.reduce(function(D,P){var H="".concat(P.axisType,"Map");return pe(pe({},D),{},xt({},H,FOe(w,pe(pe({},P),{},{graphicalItems:M,stackGroups:P.axisType===E&&B,dataStartIndex:j,dataEndIndex:k}))))},{}),L=zOe(pe(pe({},R),{},{props:w,graphicalItems:M}),b==null?void 0:b.legendBBox);Object.keys(R).forEach(function(D){R[D]=f(w,R[D],L,D.replace("Map",""),n)});var $=R["".concat(O,"Map")],C=BOe($),U=h(w,pe(pe({},R),{},{dataStartIndex:j,dataEndIndex:k,updateId:_,graphicalItems:M,stackGroups:B,offset:L}));return pe(pe({formattedGraphicalItems:U,graphicalItems:M,offset:L,stackGroups:B},C),R)},g=function(x){function y(b){var w,j,k;return jOe(this,y),k=SOe(this,y,[b]),xt(k,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),xt(k,"accessibilityManager",new lOe),xt(k,"handleLegendBBoxUpdate",function(_){if(_){var S=k.state,A=S.dataStartIndex,N=S.dataEndIndex,T=S.updateId;k.setState(pe({legendBBox:_},m({props:k.props,dataStartIndex:A,dataEndIndex:N,updateId:T},pe(pe({},k.state),{},{legendBBox:_}))))}}),xt(k,"handleReceiveSyncEvent",function(_,S,A){if(k.props.syncId===_){if(A===k.eventEmitterSymbol&&typeof k.props.syncMethod!="function")return;k.applySyncEvent(S)}}),xt(k,"handleBrushChange",function(_){var S=_.startIndex,A=_.endIndex;if(S!==k.state.dataStartIndex||A!==k.state.dataEndIndex){var N=k.state.updateId;k.setState(function(){return pe({dataStartIndex:S,dataEndIndex:A},m({props:k.props,dataStartIndex:S,dataEndIndex:A,updateId:N},k.state))}),k.triggerSyncEvent({dataStartIndex:S,dataEndIndex:A})}}),xt(k,"handleMouseEnter",function(_){var S=k.getMouseInfo(_);if(S){var A=pe(pe({},S),{},{isTooltipActive:!0});k.setState(A),k.triggerSyncEvent(A);var N=k.props.onMouseEnter;Ft(N)&&N(A,_)}}),xt(k,"triggeredAfterMouseMove",function(_){var S=k.getMouseInfo(_),A=S?pe(pe({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};k.setState(A),k.triggerSyncEvent(A);var N=k.props.onMouseMove;Ft(N)&&N(A,_)}),xt(k,"handleItemMouseEnter",function(_){k.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),xt(k,"handleItemMouseLeave",function(){k.setState(function(){return{isTooltipActive:!1}})}),xt(k,"handleMouseMove",function(_){_.persist(),k.throttleTriggeredAfterMouseMove(_)}),xt(k,"handleMouseLeave",function(_){k.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};k.setState(S),k.triggerSyncEvent(S);var A=k.props.onMouseLeave;Ft(A)&&A(S,_)}),xt(k,"handleOuterEvent",function(_){var S=cfe(_),A=fi(k.props,"".concat(S));if(S&&Ft(A)){var N,T;/.*touch.*/i.test(S)?T=k.getMouseInfo(_.changedTouches[0]):T=k.getMouseInfo(_),A((N=T)!==null&&N!==void 0?N:{},_)}}),xt(k,"handleClick",function(_){var S=k.getMouseInfo(_);if(S){var A=pe(pe({},S),{},{isTooltipActive:!0});k.setState(A),k.triggerSyncEvent(A);var N=k.props.onClick;Ft(N)&&N(A,_)}}),xt(k,"handleMouseDown",function(_){var S=k.props.onMouseDown;if(Ft(S)){var A=k.getMouseInfo(_);S(A,_)}}),xt(k,"handleMouseUp",function(_){var S=k.props.onMouseUp;if(Ft(S)){var A=k.getMouseInfo(_);S(A,_)}}),xt(k,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&k.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),xt(k,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&k.handleMouseDown(_.changedTouches[0])}),xt(k,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&k.handleMouseUp(_.changedTouches[0])}),xt(k,"handleDoubleClick",function(_){var S=k.props.onDoubleClick;if(Ft(S)){var A=k.getMouseInfo(_);S(A,_)}}),xt(k,"handleContextMenu",function(_){var S=k.props.onContextMenu;if(Ft(S)){var A=k.getMouseInfo(_);S(A,_)}}),xt(k,"triggerSyncEvent",function(_){k.props.syncId!==void 0&&fj.emit(hj,k.props.syncId,_,k.eventEmitterSymbol)}),xt(k,"applySyncEvent",function(_){var S=k.props,A=S.layout,N=S.syncMethod,T=k.state.updateId,I=_.dataStartIndex,F=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)k.setState(pe({dataStartIndex:I,dataEndIndex:F},m({props:k.props,dataStartIndex:I,dataEndIndex:F,updateId:T},k.state)));else if(_.activeTooltipIndex!==void 0){var E=_.chartX,O=_.chartY,M=_.activeTooltipIndex,B=k.state,R=B.offset,L=B.tooltipTicks;if(!R)return;if(typeof N=="function")M=N(L,_);else if(N==="value"){M=-1;for(var $=0;$<L.length;$++)if(L[$].value===_.activeLabel){M=$;break}}var C=pe(pe({},R),{},{x:R.left,y:R.top}),U=Math.min(E,C.x+C.width),D=Math.min(O,C.y+C.height),P=L[M]&&L[M].value,H=Dk(k.state,k.props.data,M),G=L[M]?{x:A==="horizontal"?L[M].coordinate:U,y:A==="horizontal"?D:L[M].coordinate}:gq;k.setState(pe(pe({},_),{},{activeLabel:P,activeCoordinate:G,activePayload:H,activeTooltipIndex:M}))}else k.setState(_)}),xt(k,"renderCursor",function(_){var S,A=k.state,N=A.isTooltipActive,T=A.activeCoordinate,I=A.activePayload,F=A.offset,E=A.activeTooltipIndex,O=A.tooltipAxisBandSize,M=k.getTooltipEventType(),B=(S=_.props.active)!==null&&S!==void 0?S:N,R=k.props.layout,L=_.key||"_recharts-cursor";return V.createElement(pOe,{key:L,activeCoordinate:T,activePayload:I,activeTooltipIndex:E,chartName:n,element:_,isActive:B,layout:R,offset:F,tooltipAxisBandSize:O,tooltipEventType:M})}),xt(k,"renderPolarAxis",function(_,S,A){var N=fi(_,"type.axisType"),T=fi(k.state,"".concat(N,"Map")),I=_.type.defaultProps,F=I!==void 0?pe(pe({},I),_.props):_.props,E=T&&T[F["".concat(N,"Id")]];return p.cloneElement(_,pe(pe({},E),{},{className:Zt(N,E.className),key:_.key||"".concat(S,"-").concat(A),ticks:Hs(E,!0)}))}),xt(k,"renderPolarGrid",function(_){var S=_.props,A=S.radialLines,N=S.polarAngles,T=S.polarRadius,I=k.state,F=I.radiusAxisMap,E=I.angleAxisMap,O=zo(F),M=zo(E),B=M.cx,R=M.cy,L=M.innerRadius,$=M.outerRadius;return p.cloneElement(_,{polarAngles:Array.isArray(N)?N:Hs(M,!0).map(function(C){return C.coordinate}),polarRadius:Array.isArray(T)?T:Hs(O,!0).map(function(C){return C.coordinate}),cx:B,cy:R,innerRadius:L,outerRadius:$,key:_.key||"polar-grid",radialLines:A})}),xt(k,"renderLegend",function(){var _=k.state.formattedGraphicalItems,S=k.props,A=S.children,N=S.width,T=S.height,I=k.props.margin||{},F=N-(I.left||0)-(I.right||0),E=l8({children:A,formattedGraphicalItems:_,legendWidth:F,legendContent:u});if(!E)return null;var O=E.item,M=NR(E,gOe);return p.cloneElement(O,pe(pe({},M),{},{chartWidth:N,chartHeight:T,margin:I,onBBoxUpdate:k.handleLegendBBoxUpdate}))}),xt(k,"renderTooltip",function(){var _,S=k.props,A=S.children,N=S.accessibilityLayer,T=Ma(A,Qn);if(!T)return null;var I=k.state,F=I.isTooltipActive,E=I.activeCoordinate,O=I.activePayload,M=I.activeLabel,B=I.offset,R=(_=T.props.active)!==null&&_!==void 0?_:F;return p.cloneElement(T,{viewBox:pe(pe({},B),{},{x:B.left,y:B.top}),active:R,label:M,payload:R?O:[],coordinate:E,accessibilityLayer:N})}),xt(k,"renderBrush",function(_){var S=k.props,A=S.margin,N=S.data,T=k.state,I=T.offset,F=T.dataStartIndex,E=T.dataEndIndex,O=T.updateId;return p.cloneElement(_,{key:_.key||"_recharts-brush",onChange:Ig(k.handleBrushChange,_.props.onChange),data:N,x:qe(_.props.x)?_.props.x:I.left,y:qe(_.props.y)?_.props.y:I.top+I.height+I.brushBottom-(A.bottom||0),width:qe(_.props.width)?_.props.width:I.width,startIndex:F,endIndex:E,updateId:"brush-".concat(O)})}),xt(k,"renderReferenceElement",function(_,S,A){if(!_)return null;var N=k,T=N.clipPathId,I=k.state,F=I.xAxisMap,E=I.yAxisMap,O=I.offset,M=_.type.defaultProps||{},B=_.props,R=B.xAxisId,L=R===void 0?M.xAxisId:R,$=B.yAxisId,C=$===void 0?M.yAxisId:$;return p.cloneElement(_,{key:_.key||"".concat(S,"-").concat(A),xAxis:F[L],yAxis:E[C],viewBox:{x:O.left,y:O.top,width:O.width,height:O.height},clipPathId:T})}),xt(k,"renderActivePoints",function(_){var S=_.item,A=_.activePoint,N=_.basePoint,T=_.childIndex,I=_.isRange,F=[],E=S.props.key,O=S.item.type.defaultProps!==void 0?pe(pe({},S.item.type.defaultProps),S.item.props):S.item.props,M=O.activeDot,B=O.dataKey,R=pe(pe({index:T,dataKey:B,cx:A.x,cy:A.y,r:4,fill:oA(S.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},an(M,!1)),sx(M));return F.push(y.renderActiveDot(M,R,"".concat(E,"-activePoint-").concat(T))),N?F.push(y.renderActiveDot(M,pe(pe({},R),{},{cx:N.x,cy:N.y}),"".concat(E,"-basePoint-").concat(T))):I&&F.push(null),F}),xt(k,"renderGraphicChild",function(_,S,A){var N=k.filterFormatItem(_,S,A);if(!N)return null;var T=k.getTooltipEventType(),I=k.state,F=I.isTooltipActive,E=I.tooltipAxis,O=I.activeTooltipIndex,M=I.activeLabel,B=k.props.children,R=Ma(B,Qn),L=N.props,$=L.points,C=L.isRange,U=L.baseLine,D=N.item.type.defaultProps!==void 0?pe(pe({},N.item.type.defaultProps),N.item.props):N.item.props,P=D.activeDot,H=D.hide,G=D.activeBar,Y=D.activeShape,W=!!(!H&&F&&R&&(P||G||Y)),ee={};T!=="axis"&&R&&R.props.trigger==="click"?ee={onClick:Ig(k.handleItemMouseEnter,_.props.onClick)}:T!=="axis"&&(ee={onMouseLeave:Ig(k.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:Ig(k.handleItemMouseEnter,_.props.onMouseEnter)});var X=p.cloneElement(_,pe(pe({},N.props),ee));function ae(We){return typeof E.dataKey=="function"?E.dataKey(We.payload):null}if(W)if(O>=0){var re,J;if(E.dataKey&&!E.allowDuplicatedCategory){var ve=typeof E.dataKey=="function"?ae:"payload.".concat(E.dataKey.toString());re=m_($,ve,M),J=C&&U&&m_(U,ve,M)}else re=$==null?void 0:$[O],J=C&&U&&U[O];if(Y||G){var z=_.props.activeIndex!==void 0?_.props.activeIndex:O;return[p.cloneElement(_,pe(pe(pe({},N.props),ee),{},{activeIndex:z})),null,null]}if(!sn(re))return[X].concat(Gd(k.renderActivePoints({item:N,activePoint:re,basePoint:J,childIndex:O,isRange:C})))}else{var q,ie=(q=k.getItemByXY(k.state.activeCoordinate))!==null&&q!==void 0?q:{graphicalItem:X},oe=ie.graphicalItem,be=oe.item,Se=be===void 0?_:be,Le=oe.childIndex,ge=pe(pe(pe({},N.props),ee),{},{activeIndex:Le});return[p.cloneElement(Se,ge),null,null]}return C?[X,null,null]:[X,null]}),xt(k,"renderCustomized",function(_,S,A){return p.cloneElement(_,pe(pe({key:"recharts-customized-".concat(A)},k.props),k.state))}),xt(k,"renderMap",{CartesianGrid:{handler:Lg,once:!0},ReferenceArea:{handler:k.renderReferenceElement},ReferenceLine:{handler:Lg},ReferenceDot:{handler:k.renderReferenceElement},XAxis:{handler:Lg},YAxis:{handler:Lg},Brush:{handler:k.renderBrush,once:!0},Bar:{handler:k.renderGraphicChild},Line:{handler:k.renderGraphicChild},Area:{handler:k.renderGraphicChild},Radar:{handler:k.renderGraphicChild},RadialBar:{handler:k.renderGraphicChild},Scatter:{handler:k.renderGraphicChild},Pie:{handler:k.renderGraphicChild},Funnel:{handler:k.renderGraphicChild},Tooltip:{handler:k.renderCursor,once:!0},PolarGrid:{handler:k.renderPolarGrid,once:!0},PolarAngleAxis:{handler:k.renderPolarAxis},PolarRadiusAxis:{handler:k.renderPolarAxis},Customized:{handler:k.renderCustomized}}),k.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:Lb("recharts"),"-clip"),k.throttleTriggeredAfterMouseMove=o6(k.triggeredAfterMouseMove,(j=b.throttleDelay)!==null&&j!==void 0?j:1e3/60),k.state={},k}return AOe(y,x),kOe(y,[{key:"componentDidMount",value:function(){var w,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,j=w.children,k=w.data,_=w.height,S=w.layout,A=Ma(j,Qn);if(A){var N=A.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,I=Dk(this.state,k,N,T),F=this.state.tooltipTicks[N].coordinate,E=(this.state.offset.top+_)/2,O=S==="horizontal",M=O?{x:F,y:E}:{y:F,x:E},B=this.state.formattedGraphicalItems.find(function(L){var $=L.item;return $.type.name==="Scatter"});B&&(M=pe(pe({},M),B.props.points[N].tooltipPosition),I=B.props.points[N].tooltipPayload);var R={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:T,activePayload:I,activeCoordinate:M};this.setState(R),this.renderCursor(A),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var k,_;this.accessibilityManager.setDetails({offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(w){g_([Ma(w.children,Qn)],[Ma(this.props.children,Qn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Ma(this.props.children,Qn);if(w&&typeof w.props.shared=="boolean"){var j=w.props.shared?"axis":"item";return l.indexOf(j)>=0?j:s}return s}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var j=this.container,k=j.getBoundingClientRect(),_=Dwe(k),S={chartX:Math.round(w.pageX-_.left),chartY:Math.round(w.pageY-_.top)},A=k.width/j.offsetWidth||1,N=this.inRange(S.chartX,S.chartY,A);if(!N)return null;var T=this.state,I=T.xAxisMap,F=T.yAxisMap,E=this.getTooltipEventType(),O=AR(this.state,this.props.data,this.props.layout,N);if(E!=="axis"&&I&&F){var M=zo(I).scale,B=zo(F).scale,R=M&&M.invert?M.invert(S.chartX):null,L=B&&B.invert?B.invert(S.chartY):null;return pe(pe({},S),{},{xValue:R,yValue:L},O)}return O?pe(pe({},S),O):null}},{key:"inRange",value:function(w,j){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,S=w/k,A=j/k;if(_==="horizontal"||_==="vertical"){var N=this.state.offset,T=S>=N.left&&S<=N.left+N.width&&A>=N.top&&A<=N.top+N.height;return T?{x:S,y:A}:null}var I=this.state,F=I.angleAxisMap,E=I.radiusAxisMap;if(F&&E){var O=zo(F);return dI({x:S,y:A},O)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,j=this.getTooltipEventType(),k=Ma(w,Qn),_={};k&&j==="axis"&&(k.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=sx(this.props,this.handleOuterEvent);return pe(pe({},S),_)}},{key:"addListener",value:function(){fj.on(hj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){fj.removeListener(hj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,j,k){for(var _=this.state.formattedGraphicalItems,S=0,A=_.length;S<A;S++){var N=_[S];if(N.item===w||N.props.key===w.key||j===Xs(N.item.type)&&k===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,j=this.state.offset,k=j.left,_=j.top,S=j.height,A=j.width;return V.createElement("defs",null,V.createElement("clipPath",{id:w},V.createElement("rect",{x:k,y:_,height:S,width:A})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(j,k){var _=SR(k,2),S=_[0],A=_[1];return pe(pe({},j),{},xt({},S,A.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(j,k){var _=SR(k,2),S=_[0],A=_[1];return pe(pe({},j),{},xt({},S,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[w])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(w){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[w])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(w){var j=this.state,k=j.formattedGraphicalItems,_=j.activeItem;if(k&&k.length)for(var S=0,A=k.length;S<A;S++){var N=k[S],T=N.props,I=N.item,F=I.type.defaultProps!==void 0?pe(pe({},I.type.defaultProps),I.props):I.props,E=Xs(I.type);if(E==="Bar"){var O=(T.data||[]).find(function(L){return xAe(w,L)});if(O)return{graphicalItem:N,payload:O}}else if(E==="RadialBar"){var M=(T.data||[]).find(function(L){return dI(w,L)});if(M)return{graphicalItem:N,payload:M}}else if(r0(N,_)||a0(N,_)||qm(N,_)){var B=wEe({graphicalItem:N,activeTooltipItem:_,itemData:F.data}),R=F.activeIndex===void 0?B:F.activeIndex;return{graphicalItem:pe(pe({},N),{},{childIndex:R}),payload:qm(N,_)?F.data[B]:N.props.data[B]}}}return null}},{key:"render",value:function(){var w=this;if(!n2(this))return null;var j=this.props,k=j.children,_=j.className,S=j.width,A=j.height,N=j.style,T=j.compact,I=j.title,F=j.desc,E=NR(j,vOe),O=an(E,!1);if(T)return V.createElement(uR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement(x_,Wu({},O,{width:S,height:A,title:I,desc:F}),this.renderClipPath(),a2(k,this.renderMap)));if(this.props.accessibilityLayer){var M,B;O.tabIndex=(M=this.props.tabIndex)!==null&&M!==void 0?M:0,O.role=(B=this.props.role)!==null&&B!==void 0?B:"application",O.onKeyDown=function(L){w.accessibilityManager.keyboardEvent(L)},O.onFocus=function(){w.accessibilityManager.focus()}}var R=this.parseEventsOfWrapper();return V.createElement(uR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement("div",Wu({className:Zt("recharts-wrapper",_),style:pe({position:"relative",cursor:"default",width:S,height:A},N)},R,{ref:function($){w.container=$}}),V.createElement(x_,Wu({},O,{width:S,height:A,title:I,desc:F,style:ROe}),this.renderClipPath(),a2(k,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(p.Component);xt(g,"displayName",n),xt(g,"defaultProps",pe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),xt(g,"getDerivedStateFromProps",function(x,y){var b=x.dataKey,w=x.data,j=x.children,k=x.width,_=x.height,S=x.layout,A=x.stackOffset,N=x.margin,T=y.dataStartIndex,I=y.dataEndIndex;if(y.updateId===void 0){var F=ER(x);return pe(pe(pe({},F),{},{updateId:0},m(pe(pe({props:x},F),{},{updateId:0}),y)),{},{prevDataKey:b,prevData:w,prevWidth:k,prevHeight:_,prevLayout:S,prevStackOffset:A,prevMargin:N,prevChildren:j})}if(b!==y.prevDataKey||w!==y.prevData||k!==y.prevWidth||_!==y.prevHeight||S!==y.prevLayout||A!==y.prevStackOffset||!nd(N,y.prevMargin)){var E=ER(x),O={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},M=pe(pe({},AR(y,w,S)),{},{updateId:y.updateId+1}),B=pe(pe(pe({},E),O),M);return pe(pe(pe({},B),m(pe({props:x},B),y)),{},{prevDataKey:b,prevData:w,prevWidth:k,prevHeight:_,prevLayout:S,prevStackOffset:A,prevMargin:N,prevChildren:j})}if(!g_(j,y.prevChildren)){var R,L,$,C,U=Ma(j,Fd),D=U&&(R=(L=U.props)===null||L===void 0?void 0:L.startIndex)!==null&&R!==void 0?R:T,P=U&&($=(C=U.props)===null||C===void 0?void 0:C.endIndex)!==null&&$!==void 0?$:I,H=D!==T||P!==I,G=!sn(w),Y=G&&!H?y.updateId:y.updateId+1;return pe(pe({updateId:Y},m(pe(pe({props:x},y),{},{updateId:Y,dataStartIndex:D,dataEndIndex:P}),y)),{},{prevChildren:j,dataStartIndex:D,dataEndIndex:P})}return null}),xt(g,"renderActiveDot",function(x,y,b){var w;return p.isValidElement(x)?w=p.cloneElement(x,y):Ft(x)?w=x(y):w=V.createElement(A8,y),V.createElement(br,{className:"recharts-active-dot",key:b},w)});var v=p.forwardRef(function(y,b){return V.createElement(g,Wu({},y,{ref:b}))});return v.displayName=g.displayName,v},ti=WOe({chartName:"BarChart",GraphicalChild:Fn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Qr},{axisType:"yAxis",AxisComp:Zr}],formatAxisMap:VPe});const HOe=[{name:"Resolved by Human",value:15},{name:"Resolved by AI",value:85}],Sr=["#60a5fa","#2563eb","#1d4ed8","#10b981","#f59e0b","#ef4444"],wn=({label:e,description:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:t})})]})]});function VOe(){p.useMemo(()=>Sr.slice(0,HOe.length),[]),jr();const[e,t]=p.useState(""),[n,r]=p.useState(""),[a,s]=p.useState([]),[o,l]=p.useState(0),[c,u]=p.useState(0),[f,d]=p.useState({total:0,ai:0,rate:0,handover:0,handover_rate:0}),[h,m]=p.useState("all"),[g,v]=p.useState([]),[x,y]=p.useState([]),[b,w]=p.useState(!1),[j,k]=p.useState([]),[_,S]=p.useState([]),[A,N]=p.useState([]),[T,I]=p.useState({input:0,output:0,total:0}),[F,E]=p.useState([]),[O,M]=p.useState([]),[B,R]=p.useState([]),[L,$]=p.useState("all"),[C,U]=p.useState([]),[D,P]=p.useState(null),[H,G]=p.useState(null),[Y,W]=p.useState([]),[ee,X]=p.useState(null),ae=z=>{if(!z||z.trim().length===0)return"(unspecified)";if(z.startsWith("other:"))return z.replace(/^other:/,"Other: ");switch(z){case"ambiguous":return"Ambiguous intent";case"payment":return"Payment-related";case"policy":return"Policy/compliance";default:return z}},re=()=>{const z=new Date,q=n?new Date(n):z,ie=e?new Date(e):new Date(z.getTime()-29*24*60*60*1e3),oe=new Date(Date.UTC(ie.getUTCFullYear(),ie.getUTCMonth(),ie.getUTCDate(),0,0,0)),be=new Date(Date.UTC(q.getUTCFullYear(),q.getUTCMonth(),q.getUTCDate()+1,0,0,0));return{start:oe.toISOString(),end:be.toISOString()}},J=async()=>{const{start:z,end:q}=re(),{data:ie}=await Nt.rpc("get_channel_chat_counts",{p_from:z,p_to:q});s((ie||[]).map(We=>({provider:We.provider,display_name:We.display_name,thread_count:Number(We.thread_count||0)})));const{data:oe}=await Nt.rpc("get_response_time_stats",{p_from:z,p_to:q,p_channel:h!=="all"?h:null});if(oe&&oe.length>0){const We=oe[0];l(Number(We.ai_avg||0)),u(Number(We.agent_avg||0))}const{data:be,error:Se}=await Nt.rpc("get_containment_and_handover",{p_from:z,p_to:q});if(!Se&&be&&be.length>0){const We=be[0];d({total:Number(We.total_threads||0),ai:Number(We.ai_resolved_count||0),rate:Number(We.containment_rate||0),handover:Number(We.handover_count||0),handover_rate:Number(We.handover_rate||0)})}else if(Se&&Se.code==="PGRST202"){const{data:We}=await Nt.rpc("get_containment",{p_from:z,p_to:q});let dt=0,yt=0,Et=0,te=0,me=0;if(We&&We.length>0){const Ue=We[0];dt=Number(Ue.total_threads||0),yt=Number(Ue.ai_resolved_count||0),Et=Number(Ue.rate||0)}const{data:Fe}=await Nt.rpc("get_handover_stats",{p_from:z,p_to:q}),He=(Fe||[]).reduce((Ue,he)=>Ue+Number(he.count||0),0);te=He,me=dt>0?He/dt:0,d({total:dt,ai:yt,rate:Et,handover:te,handover_rate:me})}const{data:Le}=await Nt.rpc("get_chats_timeseries",{p_from:z,p_to:q,p_channel:h!=="all"?h:null});v((Le||[]).map(We=>({bucket:We.bucket,provider:We.provider,count:Number(We.count||0)})));const{data:ge}=await Nt.rpc("get_handover_stats",{p_from:z,p_to:q});y((ge||[]).map(We=>({reason:ae(We.reason)||"(unspecified)",count:Number(We.count||0),total:Number(We.total||0),rate:Number(We.rate||0)})));try{const{data:We}=await ne.from("token_usage_logs").select("made_at, prompt_tokens, completion_tokens, total_tokens, model, channel_id").gte("made_at",z).lt("made_at",q).order("made_at",{ascending:!0}),dt={},yt={};let Et=0,te=0,me=0;for(const Ue of We||[]){const he=new Date(Ue.made_at).toISOString().slice(0,10),Ut=Number(Ue.prompt_tokens||0),bt=Number(Ue.completion_tokens||0),wt=Number(Ue.total_tokens||Ut+bt);dt[he]||(dt[he]={input:0,output:0,total:0}),dt[he].input+=Ut,dt[he].output+=bt,dt[he].total+=wt;const xe=String(Ue.model||"unknown");yt[xe]=(yt[xe]||0)+wt,Et+=Ut,te+=bt,me+=wt}const Fe=Object.keys(dt).sort().map(Ue=>({day:Ue,...dt[Ue]})),He=Object.entries(yt).sort((Ue,he)=>he[1]-Ue[1]).slice(0,8).map(([Ue,he])=>({model:Ue,tokens:he}));S(Fe),N(He),I({input:Et,output:te,total:me})}catch{}try{const{data:We}=await Nt.rpc("get_handover_by_super_agent",{p_from:z,p_to:q});E((We||[]).map(te=>({super_agent_id:te.super_agent_id,super_agent_name:te.super_agent_name,human_resolved:Number(te.human_resolved||0),ai_resolved:Number(te.ai_resolved||0),handover_rate:Number(te.handover_rate||0)})));const dt=L!=="all"?L:null,[{data:yt},{data:Et}]=await Promise.all([Nt.rpc("get_handover_by_agent",{p_from:z,p_to:q,p_super_agent_id:dt}),Nt.rpc("get_agent_kpis",{p_from:z,p_to:q,p_super_agent_id:dt})]);M((yt||[]).map(te=>({agent_user_id:te.agent_user_id,agent_name:te.agent_name,super_agent_id:te.super_agent_id,human_resolved:Number(te.human_resolved||0),ai_resolved:Number(te.ai_resolved||0),handover_rate:Number(te.handover_rate||0)}))),R((Et||[]).map(te=>({agent_user_id:te.agent_user_id,agent_name:te.agent_name,resolved_count:Number(te.resolved_count||0),avg_resolution_minutes:te.avg_resolution_minutes!=null?Number(te.avg_resolution_minutes):null})))}catch{}},ve=async()=>{try{const{data:z,error:q}=await Nt.rpc("get_database_stats_detailed");if(q){console.error("Error fetching database stats:",q);return}z&&(console.log("Database stats fetched:",z.length,"tables"),U(z.map(ge=>({tablename:ge.tablename,total_size_bytes:Number(ge.total_size_bytes||0),total_size_pretty:ge.total_size_pretty||"0 bytes",table_size_bytes:Number(ge.table_size_bytes||0),table_size_pretty:ge.table_size_pretty||"0 bytes",indexes_size_bytes:Number(ge.indexes_size_bytes||0),indexes_size_pretty:ge.indexes_size_pretty||"0 bytes",row_count:Number(ge.row_count||0),dead_rows:Number(ge.dead_rows||0),sequential_scans:Number(ge.sequential_scans||0),index_scans:Number(ge.index_scans||0),table_scan_ratio:Number(ge.table_scan_ratio||0),last_vacuum:ge.last_vacuum||null,last_autovacuum:ge.last_autovacuum||null,last_analyze:ge.last_analyze||null,last_autoanalyze:ge.last_autoanalyze||null,inserts:Number(ge.inserts||0),updates:Number(ge.updates||0),deletes:Number(ge.deletes||0),hot_updates:Number(ge.hot_updates||0)}))));const{data:ie,error:oe}=await Nt.rpc("get_database_overview");if(oe&&console.error("Error fetching database overview:",oe),ie&&ie.length>0){console.log("Database overview fetched:",ie);const ge=ie[0];P({total_size_bytes:Number(ge.total_size_bytes||0),total_size_pretty:ge.total_size_pretty||"0 bytes",data_size_bytes:Number(ge.data_size_bytes||0),data_size_pretty:ge.data_size_pretty||"0 bytes",indexes_size_bytes:Number(ge.indexes_size_bytes||0),indexes_size_pretty:ge.indexes_size_pretty||"0 bytes",total_tables:Number(ge.total_tables||0),total_rows:Number(ge.total_rows||0),total_indexes:Number(ge.total_indexes||0),total_sequences:Number(ge.total_sequences||0)})}const{data:be}=await Nt.rpc("get_database_memory_stats");if(be&&be.length>0){const ge=be[0];G({shared_buffers_hit:Number(ge.shared_buffers_hit||0),shared_buffers_read:Number(ge.shared_buffers_read||0),shared_buffers_hit_ratio:Number(ge.shared_buffers_hit_ratio||0),cache_hit_ratio:Number(ge.cache_hit_ratio||0),heap_hit_ratio:Number(ge.heap_hit_ratio||0),idx_scan_ratio:Number(ge.idx_scan_ratio||0),total_sequential_scans:Number(ge.total_sequential_scans||0),total_index_scans:Number(ge.total_index_scans||0)})}const{data:Se}=await Nt.rpc("get_index_stats");Se&&W(Se.map(ge=>({tablename:ge.tablename,indexname:ge.indexname,index_size_bytes:Number(ge.index_size_bytes||0),index_size_pretty:ge.index_size_pretty||"0 bytes",index_scans:Number(ge.index_scans||0),index_tup_reads:Number(ge.index_tup_reads||0),index_tup_fetches:Number(ge.index_tup_fetches||0),idx_blks_hit:Number(ge.idx_blks_hit||0),idx_blks_read:Number(ge.idx_blks_read||0)})));const{data:Le}=await Nt.rpc("get_database_activity");if(Le&&Le.length>0){const ge=Le[0];X({total_inserts:Number(ge.total_inserts||0),total_updates:Number(ge.total_updates||0),total_deletes:Number(ge.total_deletes||0),total_sequential_scans:Number(ge.total_sequential_scans||0),total_index_scans:Number(ge.total_index_scans||0),total_blocks_hit:Number(ge.total_blocks_hit||0),total_blocks_read:Number(ge.total_blocks_read||0),cache_hit_percentage:Number(ge.cache_hit_percentage||0)})}}catch(z){console.error("Failed to fetch database stats:",z),U([]),P(null),G(null),W([]),X(null)}};return p.useEffect(()=>{(()=>{J(),ve()})()},[e,n,h]),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Analytics"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"High-level KPIs for conversations, AI agents, and human agents."})]}),i.jsxs("div",{className:"flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"From"}),i.jsx(Ve,{type:"date",value:e,max:n||new Date().toISOString().slice(0,10),onChange:z=>{const q=z.target.value;t(q),n&&q&&q>n&&r(q)},className:"h-9 w-[180px]"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"To"}),i.jsx(Ve,{type:"date",value:n,min:e||void 0,max:new Date().toISOString().slice(0,10),onChange:z=>{const q=z.target.value;r(q),e&&q&&q<e&&t(q)},className:"h-9 w-[180px]"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Channel"}),i.jsxs(Bt,{value:h,onValueChange:async z=>{m(z);try{await Wt({action:"analytics.channel_filter",resource:"analytics",context:{channel:z}})}catch{}},children:[i.jsx(Mt,{className:"h-9 w-[180px]",children:i.jsx(It,{placeholder:"All"})}),i.jsxs(Dt,{children:[i.jsx($e,{value:"all",children:"All"}),i.jsx($e,{value:"whatsapp",children:"WhatsApp"}),i.jsx($e,{value:"web",children:"Web"}),i.jsx($e,{value:"telegram",children:"Telegram"})]})]})]}),i.jsx(Q,{variant:"outline",className:"h-9",onClick:()=>{J(),ve()},children:"Refresh"})]}),i.jsxs(pl,{defaultValue:"conversation",className:"w-full mt-4",children:[i.jsxs(so,{className:"grid w-full max-w-2xl grid-cols-5 bg-muted/50 p-1",children:[i.jsx(Gn,{value:"conversation",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("span",{children:"Conversation"})}),i.jsx(ce,{children:i.jsx("p",{children:"Lihat analitik percakapan dan KPI"})})]})}),i.jsx(Gn,{value:"ai-agent",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("span",{children:"AI Agent"})}),i.jsx(ce,{children:i.jsx("p",{children:"Lihat metrik kinerja agen AI"})})]})}),i.jsx(Gn,{value:"human-agent",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("span",{children:"Human Agent"})}),i.jsx(ce,{children:i.jsx("p",{children:"Lihat metrik kinerja agen manusia"})})]})}),i.jsx(Gn,{value:"database",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("span",{children:"Database"})}),i.jsx(ce,{children:i.jsx("p",{children:"Lihat statistik penggunaan database dan ukuran tabel"})})]})})]}),i.jsxs(Dn,{value:"conversation",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Chats",description:"Jumlah total percakapan yang terjadi dalam periode yang dipilih"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:f.total})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"AI Containment Rate",description:"Persentase percakapan yang berhasil diselesaikan oleh AI tanpa perlu intervensi manusia. Semakin tinggi semakin baik."})})}),i.jsxs(Je,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Math.round(f.rate*100),"%"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.ai," / ",f.total]}),i.jsx(Q,{variant:"outline",className:"mt-2 h-8",onClick:async()=>{w(!0);const{start:z,end:q}=re(),{data:ie}=await Nt.rpc("get_non_contained",{p_from:z,p_to:q,p_limit:100,p_offset:0});k(ie||[])},children:"View non-contained"})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Handover Rate",description:"Persentase percakapan yang dialihkan dari AI ke agen manusia karena memerlukan intervensi manual"})})}),i.jsxs(Je,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Math.round(f.handover_rate*100),"%"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.handover," / ",f.total]})]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Chats per Channel",description:"Distribusi jumlah percakapan berdasarkan saluran komunikasi (WhatsApp, Telegram, Web Chat, dll)"})})}),i.jsx(Je,{className:"h-64",children:i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:a.map(z=>({name:z.display_name||z.provider,count:z.thread_count})),children:[i.jsx(Qr,{dataKey:"name"}),i.jsx(Zr,{}),i.jsx(Qn,{}),i.jsx(Fn,{dataKey:"count",fill:Sr[2],radius:[4,4,0,0],children:i.jsx($i,{dataKey:"count",position:"top"})})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Chats Time Series (Asia/Jakarta)",description:"Grafik tren jumlah percakapan dari waktu ke waktu dalam zona waktu Asia/Jakarta, dikelompokkan berdasarkan saluran"})})}),i.jsx(Je,{className:"h-64",children:i.jsx(ei,{width:"100%",height:"100%",children:(()=>{const z=Array.from(new Set(g.map(oe=>oe.provider))),ie=Array.from(new Set(g.map(oe=>oe.bucket))).sort().map(oe=>{var Se;const be={bucket:new Date(oe).toLocaleDateString("en-US",{timeZone:"Asia/Jakarta"})};for(const Le of z)be[Le]=((Se=g.find(ge=>ge.bucket===oe&&ge.provider===Le))==null?void 0:Se.count)||0;return be});return i.jsxs(ti,{data:ie,children:[i.jsx(Qr,{dataKey:"bucket"}),i.jsx(Zr,{}),i.jsx(Qn,{}),i.jsx(ii,{}),z.map((oe,be)=>i.jsx(Fn,{dataKey:oe,stackId:void 0,fill:Sr[be%(Sr.length-1)+1]},oe))]})})()})})]})]}),i.jsxs(Dn,{value:"ai-agent",className:"space-y-6",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"AI Token Usage (by day)",description:"Penggunaan token AI per hari, menunjukkan token input (prompt) dan output (completion). Token adalah unit penggunaan untuk menghitung biaya AI"})})}),i.jsxs(Je,{className:"h-64",children:[i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:_.map(z=>({day:new Date(z.day).toLocaleDateString("en-US",{timeZone:"Asia/Jakarta"}),input:z.input,output:z.output})),children:[i.jsx(Qr,{dataKey:"day"}),i.jsx(Zr,{}),i.jsx(Qn,{}),i.jsx(ii,{}),i.jsx(Fn,{dataKey:"input",stackId:"tokens",fill:Sr[1],name:"Prompt tokens"}),i.jsx(Fn,{dataKey:"output",stackId:"tokens",fill:Sr[2],name:"Completion tokens"})]})}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Total tokens: ",T.total.toLocaleString()," (input ",T.input.toLocaleString(),", output ",T.output.toLocaleString(),")"]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Top Models by Tokens",description:"Model AI yang paling banyak menggunakan token, diurutkan berdasarkan total penggunaan. Membantu mengidentifikasi model mana yang paling banyak digunakan"})})}),i.jsx(Je,{className:"h-64",children:i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:A.map(z=>({name:z.model,tokens:z.tokens})),layout:"vertical",children:[i.jsx(Qr,{type:"number"}),i.jsx(Zr,{type:"category",dataKey:"name",width:160}),i.jsx(Qn,{}),i.jsx(Fn,{dataKey:"tokens",fill:Sr[4],radius:[0,4,4,0],children:i.jsx($i,{dataKey:"tokens",position:"right"})})]})})})]})]}),i.jsxs(Dn,{value:"human-agent",className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Super Agent"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Filter untuk melihat metrik agen yang berada di bawah super agent tertentu. Pilih 'All' untuk melihat semua agen"})})]})]}),i.jsxs(Bt,{value:L,onValueChange:z=>$(z),children:[i.jsx(Mt,{className:"w-[220px] h-9",children:i.jsx(It,{placeholder:"All"})}),i.jsxs(Dt,{children:[i.jsx($e,{value:"all",children:"All"}),F.map(z=>i.jsx($e,{value:String(z.super_agent_id||"none"),children:z.super_agent_name||""},z.super_agent_id||"none"))]})]}),i.jsx(Q,{variant:"outline",className:"h-9",onClick:J,children:"Apply"})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Agent KPIs",description:"Key Performance Indicators untuk setiap agen manusia: jumlah percakapan yang diselesaikan dan waktu rata-rata penyelesaian (dalam menit)"})})}),i.jsx(Je,{className:"h-64",children:i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:B.map(z=>({name:z.agent_name||"",resolved:z.resolved_count,avgMin:Math.round(z.avg_resolution_minutes||0)})),children:[i.jsx(Qr,{dataKey:"name"}),i.jsx(Zr,{}),i.jsx(Qn,{}),i.jsx(ii,{}),i.jsx(Fn,{dataKey:"resolved",name:"Resolved",fill:Sr[3],radius:[4,4,0,0]}),i.jsx(Fn,{dataKey:"avgMin",name:"Avg Resolution (min)",fill:Sr[5],radius:[4,4,0,0]})]})})})]})]}),i.jsxs(Dn,{value:"database",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Database Size",description:"Total ukuran database termasuk semua tabel, indeks, dan metadata dalam format yang mudah dibaca"})})}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:(D==null?void 0:D.total_size_pretty)||"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Data: ",(D==null?void 0:D.data_size_pretty)||""," | Indexes: ",(D==null?void 0:D.indexes_size_pretty)||""]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Tables",description:"Jumlah total tabel yang ada di database public schema"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:(D==null?void 0:D.total_tables)||0})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Rows",description:"Jumlah total baris data di semua tabel database"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((D==null?void 0:D.total_rows)||0).toLocaleString()})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Indexes",description:"Jumlah total indeks yang ada di database. Indeks membantu mempercepat query"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:(D==null?void 0:D.total_indexes)||0})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Cache Hit Ratio",description:"Persentase data yang ditemukan di cache memory. Semakin tinggi semakin baik (idealnya >95%). Menunjukkan efisiensi penggunaan memory"})})}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:H?`${(H.cache_hit_ratio*100).toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Hits: ",H?H.shared_buffers_hit.toLocaleString():""," | Reads: ",H?H.shared_buffers_read.toLocaleString():""]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Index Scan Ratio",description:"Persentase scan yang menggunakan indeks dibanding sequential scan. Semakin tinggi semakin baik. Menunjukkan efektivitas indeks"})})}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:H?`${(H.idx_scan_ratio*100).toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Index: ",H?H.total_index_scans.toLocaleString():""," | Seq: ",H?H.total_sequential_scans.toLocaleString():""]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Heap Hit Ratio",description:"Persentase hit pada heap (tabel data) di cache memory. Semakin tinggi semakin baik"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:H?`${(H.heap_hit_ratio*100).toFixed(2)}%`:"Loading..."})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Inserts",description:"Jumlah total operasi INSERT yang pernah dilakukan di semua tabel"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((ee==null?void 0:ee.total_inserts)||0).toLocaleString()})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Updates",description:"Jumlah total operasi UPDATE yang pernah dilakukan di semua tabel"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((ee==null?void 0:ee.total_updates)||0).toLocaleString()})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Total Deletes",description:"Jumlah total operasi DELETE yang pernah dilakukan di semua tabel"})})}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((ee==null?void 0:ee.total_deletes)||0).toLocaleString()})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Cache Hit %",description:"Persentase blok yang ditemukan di cache vs yang dibaca dari disk. Semakin tinggi semakin baik untuk performa"})})}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:ee?`${ee.cache_hit_percentage.toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Hits: ",ee?ee.total_blocks_hit.toLocaleString():""," | Reads: ",ee?ee.total_blocks_read.toLocaleString():""]})]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Table Sizes",description:"Ukuran total (termasuk indeks) untuk setiap tabel diurutkan dari yang terbesar. Membantu mengidentifikasi tabel yang memakan banyak ruang"})})}),i.jsx(Je,{className:"h-64",children:C.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:C.slice(0,10).map(z=>({name:z.tablename,size:z.total_size_bytes/1024})),layout:"vertical",children:[i.jsx(Qr,{type:"number"}),i.jsx(Zr,{type:"category",dataKey:"name",width:160}),i.jsx(Qn,{formatter:z=>`${z.toFixed(2)} KB`,labelFormatter:z=>`Table: ${z}`}),i.jsx(Fn,{dataKey:"size",fill:Sr[1],radius:[0,4,4,0],children:i.jsx($i,{dataKey:"size",position:"right",formatter:z=>`${z.toFixed(2)} KB`})})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Row Counts by Table",description:"Jumlah baris data per tabel, diurutkan dari yang terbanyak. Menunjukkan tabel mana yang paling aktif menyimpan data"})})}),i.jsx(Je,{className:"h-64",children:C.filter(z=>z.row_count>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:C.filter(z=>z.row_count>0).slice(0,10).map(z=>({name:z.tablename,rows:z.row_count})),layout:"vertical",children:[i.jsx(Qr,{type:"number"}),i.jsx(Zr,{type:"category",dataKey:"name",width:160}),i.jsx(Qn,{}),i.jsx(Fn,{dataKey:"rows",fill:Sr[3],radius:[0,4,4,0],children:i.jsx($i,{dataKey:"rows",position:"right"})})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Index Sizes (Top 15)",description:"Ukuran setiap indeks diurutkan dari yang terbesar. Indeks besar mungkin perlu dioptimasi"})})}),i.jsx(Je,{className:"h-64",children:Y.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:Y.slice(0,15).map(z=>({name:`${z.tablename}.${z.indexname}`.substring(0,30),size:z.index_size_bytes/1024,scans:z.index_scans})),layout:"vertical",children:[i.jsx(Qr,{type:"number"}),i.jsx(Zr,{type:"category",dataKey:"name",width:200}),i.jsx(Qn,{formatter:(z,q)=>q==="size"?`${z.toFixed(2)} KB`:z.toLocaleString(),labelFormatter:z=>`Index: ${z}`}),i.jsx(ii,{}),i.jsx(Fn,{dataKey:"size",name:"Size (KB)",fill:Sr[1],radius:[0,4,4,0]})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Table Activity (Top 10)",description:"Jumlah operasi INSERT, UPDATE, dan DELETE per tabel. Menunjukkan tabel mana yang paling aktif"})})}),i.jsx(Je,{className:"h-64",children:C.filter(z=>z.inserts+z.updates+z.deletes>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:C.filter(z=>z.inserts+z.updates+z.deletes>0).slice(0,10).map(z=>({name:z.tablename,inserts:z.inserts,updates:z.updates,deletes:z.deletes})),layout:"vertical",children:[i.jsx(Qr,{type:"number"}),i.jsx(Zr,{type:"category",dataKey:"name",width:160}),i.jsx(Qn,{}),i.jsx(ii,{}),i.jsx(Fn,{dataKey:"inserts",stackId:"activity",fill:Sr[2],name:"Inserts"}),i.jsx(Fn,{dataKey:"updates",stackId:"activity",fill:Sr[4],name:"Updates"}),i.jsx(Fn,{dataKey:"deletes",stackId:"activity",fill:Sr[5],name:"Deletes"})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Table Scan Ratios",description:"Rasio sequential scan vs index scan per tabel. Sequential scan tinggi menunjukkan perlu indeks yang lebih baik"})})}),i.jsx(Je,{className:"h-64",children:C.filter(z=>z.sequential_scans+z.index_scans>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:C.filter(z=>z.sequential_scans+z.index_scans>0).slice(0,10).map(z=>({name:z.tablename,seqRatio:Number((z.table_scan_ratio*100).toFixed(1)),idxRatio:Number(((1-z.table_scan_ratio)*100).toFixed(1))})),layout:"vertical",children:[i.jsx(Qr,{type:"number",domain:[0,100]}),i.jsx(Zr,{type:"category",dataKey:"name",width:160}),i.jsx(Qn,{formatter:z=>`${z}%`}),i.jsx(ii,{}),i.jsx(Fn,{dataKey:"seqRatio",stackId:"scan",fill:Sr[5],name:"Seq Scan %"}),i.jsx(Fn,{dataKey:"idxRatio",stackId:"scan",fill:Sr[3],name:"Index Scan %"})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Comprehensive Table Statistics",description:"Rincian lengkap setiap tabel: ukuran, baris, statistik scan, operasi DML, dan informasi maintenance"})})}),i.jsx(Je,{children:i.jsx("div",{className:"max-h-96 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2 px-2 sticky left-0 bg-background",children:"Table"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Total Size"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Rows"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Dead Rows"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Inserts"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Updates"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Deletes"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Seq Scans"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Idx Scans"}),i.jsx("th",{className:"text-left py-2 px-2",children:"Last Vacuum"})]})}),i.jsx("tbody",{children:C.slice(0,25).map(z=>i.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[i.jsx("td",{className:"py-2 px-2 font-medium sticky left-0 bg-background",children:z.tablename}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.total_size_pretty}),i.jsx("td",{className:"py-2 px-2 text-right",children:z.row_count.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.dead_rows>0?i.jsx("span",{className:"text-orange-600",children:z.dead_rows.toLocaleString()}):"0"}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.inserts.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.updates.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.deletes.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.sequential_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.index_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-left text-xs text-muted-foreground",children:z.last_vacuum?new Date(z.last_vacuum).toLocaleDateString():z.last_autovacuum?`Auto: ${new Date(z.last_autovacuum).toLocaleDateString()}`:"Never"})]},z.tablename))})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:i.jsx(wn,{label:"Index Statistics",description:"Statistik lengkap setiap indeks: ukuran, jumlah scan, dan performa cache. Membantu mengidentifikasi indeks yang tidak digunakan atau perlu dioptimasi"})})}),i.jsx(Je,{children:i.jsx("div",{className:"max-h-96 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2 px-2 sticky left-0 bg-background",children:"Table"}),i.jsx("th",{className:"text-left py-2 px-2",children:"Index"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Size"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Scans"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Tuples Read"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Tuples Fetched"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Cache Hits"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Cache Reads"})]})}),i.jsx("tbody",{children:Y.slice(0,30).map((z,q)=>i.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[i.jsx("td",{className:"py-2 px-2 font-medium sticky left-0 bg-background",children:z.tablename}),i.jsx("td",{className:"py-2 px-2 font-mono text-xs",children:z.indexname}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.index_size_pretty}),i.jsx("td",{className:"py-2 px-2 text-right",children:z.index_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.index_tup_reads.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.index_tup_fetches.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.idx_blks_hit.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.idx_blks_read.toLocaleString()})]},q))})]})})})]})]})]}),i.jsx(mn,{open:b,onOpenChange:w,children:i.jsxs(cn,{className:"max-w-3xl",children:[i.jsx(un,{children:i.jsx(dn,{children:"Non-contained Conversations"})}),i.jsx("div",{className:"max-h-80 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2",children:"Time"}),i.jsx("th",{className:"text-left py-2",children:"Contact"}),i.jsx("th",{className:"text-left py-2",children:"Handover Reason"}),i.jsx("th",{className:"text-left py-2",children:"Status"})]})}),i.jsx("tbody",{children:j.map(z=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-1",children:new Date(z.created_at).toLocaleString()}),i.jsx("td",{className:"py-1",children:z.contact_name}),i.jsx("td",{className:"py-1",children:z.handover_reason||"(none)"}),i.jsx("td",{className:"py-1",children:z.status})]},z.id))})]})})]})})]})}var d0="Switch",[KOe,x3e]=_r(d0),[GOe,YOe]=KOe(d0),xq=p.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=e,[h,m]=p.useState(null),g=St(t,w=>m(w)),v=p.useRef(!1),x=h?f||!!h.closest("form"):!0,[y,b]=Ca({prop:a,defaultProp:s??!1,onChange:u,caller:d0});return i.jsxs(GOe,{scope:n,checked:y,disabled:l,children:[i.jsx(Ge.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":jq(y),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:g,onClick:Ee(e.onClick,w=>{b(j=>!j),x&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),x&&i.jsx(wq,{control:h,bubbles:!v.current,name:r,value:c,checked:y,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});xq.displayName=d0;var yq="SwitchThumb",bq=p.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=YOe(yq,n);return i.jsx(Ge.span,{"data-state":jq(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});bq.displayName=yq;var XOe="SwitchBubbleInput",wq=p.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},s)=>{const o=p.useRef(null),l=St(o,s),c=iC(n),u=cN(t);return p.useEffect(()=>{const f=o.current;if(!f)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(c!==n&&m){const g=new Event("click",{bubbles:r});m.call(f,n),f.dispatchEvent(g)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});wq.displayName=XOe;function jq(e){return e?"checked":"unchecked"}var _q=xq,JOe=bq;const xl=p.forwardRef(({className:e,...t},n)=>i.jsx(_q,{className:ye("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:i.jsx(JOe,{className:ye("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));xl.displayName=_q.displayName;var f0="Collapsible",[QOe,kq]=_r(f0),[ZOe,xA]=QOe(f0),Sq=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:s,onOpenChange:o,...l}=e,[c,u]=Ca({prop:r,defaultProp:a??!1,onChange:o,caller:f0});return i.jsx(ZOe,{scope:n,disabled:s,contentId:ir(),open:c,onOpenToggle:p.useCallback(()=>u(f=>!f),[u]),children:i.jsx(Ge.div,{"data-state":jA(c),"data-disabled":s?"":void 0,...l,ref:t})})});Sq.displayName=f0;var Nq="CollapsibleTrigger",yA=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=xA(Nq,n);return i.jsx(Ge.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":jA(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:Ee(e.onClick,a.onOpenToggle)})});yA.displayName=Nq;var bA="CollapsibleContent",wA=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=xA(bA,e.__scopeCollapsible);return i.jsx(pr,{present:n||a.open,children:({present:s})=>i.jsx(eIe,{...r,ref:t,present:s})})});wA.displayName=bA;var eIe=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...s}=e,o=xA(bA,n),[l,c]=p.useState(r),u=p.useRef(null),f=St(t,u),d=p.useRef(0),h=d.current,m=p.useRef(0),g=m.current,v=o.open||l,x=p.useRef(v),y=p.useRef(void 0);return p.useEffect(()=>{const b=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(b)},[]),Xn(()=>{const b=u.current;if(b){y.current=y.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const w=b.getBoundingClientRect();d.current=w.height,m.current=w.width,x.current||(b.style.transitionDuration=y.current.transitionDuration,b.style.animationName=y.current.animationName),c(r)}},[o.open,r]),i.jsx(Ge.div,{"data-state":jA(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...s,ref:f,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:v&&a})});function jA(e){return e?"open":"closed"}var Cq=Sq,tIe=yA,nIe=wA;const TR=Cq,OR=yA,IR=wA,Aq=e=>{const[t,n]=p.useState(!0),[r,a]=p.useState(!1),[s,o]=p.useState(null),[l,c]=p.useState(null),u=async()=>{try{if(n(!0),c(null),e){const{data:m,error:g}=await ne.from("ai_profiles").select("*").eq("id",e).single();if(g)throw g;m&&o(m)}else o(null)}catch(m){console.error("Error fetching AI profile:",m),c(m instanceof Error?m.message:"Failed to fetch profile")}finally{n(!1)}},f=async m=>{try{if(a(!0),c(null),s!=null&&s.id){const{error:g}=await ne.from("ai_profiles").update(m).eq("id",s.id);try{await Wt({action:"ai_profile.update",resource:"ai_profile",resourceId:s.id,context:m})}catch{}if(g)throw g}else{const{data:g,error:v}=await ne.from("ai_profiles").insert([{...m,org_id:"00000000-0000-0000-0000-000000000001"}]).select().single();if(v)throw v;g&&o(g);try{await Wt({action:"ai_profile.create",resource:"ai_profile",resourceId:(g==null?void 0:g.id)??null,context:m})}catch{}}await u()}catch(g){console.error("Error saving AI profile:",g),c(g instanceof Error?g.message:"Failed to save profile")}finally{a(!1)}},d=async m=>{try{n(!0),c(null);const{data:g,error:v}=await ne.from("ai_profiles").select("*").eq("org_id",m||"00000000-0000-0000-0000-000000000001").order("created_at",{ascending:!1});if(v)throw v;return g}catch(g){return console.error("Error fetching AI profiles:",g),c(g instanceof Error?g.message:"Failed to fetch profiles"),[]}finally{n(!1)}},h=async m=>{try{a(!0),c(null);const{error:g}=await ne.from("ai_profiles").delete().eq("id",m);try{await Wt({action:"ai_profile.delete",resource:"ai_profile",resourceId:m})}catch{}if(g)throw g}catch(g){throw console.error("Error deleting AI profile:",g),c(g instanceof Error?g.message:"Failed to delete profile"),g}finally{a(!1)}};return p.useEffect(()=>{e?u():n(!1)},[e]),{profile:s,loading:t,saving:r,error:l,fetchProfile:u,saveProfile:f,fetchAllProfiles:d,deleteProfile:h}},rIe={Conservative:.3,Balanced:.5,Creative:.7};function Eq(e,t=.5){if(!e)return t;const n=e.trim();return rIe[n]??t}const aIe="00000000-0000-0000-0000-000000000001",iIe=({welcomeMessage:e,systemPrompt:t,modelDisplay:n,profile:r,profileId:a,modelName:s,temperature:o,transfer_conditions:l})=>{const c=r==null?void 0:r.response_temperature,u=c?Eq(c,o||.5):o||.5,[f,d]=p.useState([]);p.useEffect(()=>{d([{id:"1",content:e||"Halo!  Selamat datang di Okbang Top Up Center~",sender:"ai",timestamp:new Date}])},[e]);const[h,m]=p.useState(""),[g,v]=p.useState(!1),[x,y]=p.useState(!0),[b,w]=p.useState(""),j=p.useRef(null),k=p.useRef(null);p.useEffect(()=>{(()=>{const F=Date.now(),E=Math.random().toString(36).substring(2,15),O=`session_${F}_${E}`;w(O),console.log("Generated session ID:",O)})()},[]);const _=()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)};p.useEffect(()=>{_()},[f]);const S=async()=>{if(!h.trim()||g)return;const I={id:Date.now().toString(),content:h,sender:"user",timestamp:new Date};d(F=>[...F,I]),m(""),v(!0);try{const F={message:h,model:s,temperature:u,session_id:b,timestamp:new Date().toISOString(),ai_profile_id:(r==null?void 0:r.id)||a};console.log("Sending request to API:",F);const E=await wa(Yn.ENDPOINTS.AI_AGENT.CHAT_TEST,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!E.ok)throw new Error(`HTTP error! status: ${E.status}`);const O=await E.json();console.log("API Response:",O);const M={id:(Date.now()+1).toString(),content:O.output||"Sorry, I couldn't process your message.",sender:"ai",timestamp:new Date};d(B=>[...B,M]),Ie.success("Message sent successfully!"),y(!0)}catch(F){console.error("Error sending message:",F),Ie.error("Failed to send message"),y(!1);const E={id:(Date.now()+1).toString(),content:"Sorry, I'm having trouble connecting right now. Please try again later.",sender:"ai",timestamp:new Date};d(O=>[...O,E])}finally{v(!1)}},A=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),S())},N=()=>{d([{id:"1",content:e||"Halo!  Selamat datang di Okbang Top Up Center~",sender:"ai",timestamp:new Date}]),Ie.info("Chat history cleared")},T=()=>{const I=Date.now(),F=Math.random().toString(36).substring(2,15),E=`session_${I}_${F}`;w(E),d([{id:"1",content:e||"Halo!  Selamat datang di Okbang Top Up Center~",sender:"ai",timestamp:new Date}]),Ie.success("Session refreshed! New session ID: "+E),console.log("New session ID:",E)};return i.jsxs(Ae,{className:"flex flex-col h-[600px] border-2 border-primary/20",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 border-b bg-primary/5",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:i.jsx(LL,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"font-medium",children:"AI Agent Chat"}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Model: ",n,"  Temp: ",c||"Legacy"," (",u,i.jsx("span",{className:`ml-2 px-1 rounded text-xs ${x?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x?"Connected":"Disconnected"})]}),b&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Session: ",b.substring(0,20),"..."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[g&&i.jsx(Gt,{className:"w-4 h-4 animate-spin"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"sm",onClick:T,"aria-label":"Refresh session",children:i.jsx(Ey,{className:"w-4 h-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Segarkan sesi"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"sm",onClick:N,"aria-label":"Clear chat history",children:i.jsx(GL,{className:"w-4 h-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Hapus riwayat chat"})})]})]})]}),i.jsxs("div",{ref:k,className:"flex-1 p-4 space-y-4 overflow-auto max-h-[400px]",children:[f.map(I=>i.jsx("div",{className:`flex ${I.sender==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${I.sender==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:I.content}),i.jsx("p",{className:"text-xs opacity-70 mt-1",children:I.timestamp.toLocaleTimeString()})]})},I.id)),g&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-muted p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Gt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{className:"text-sm",children:"AI is typing..."})]})})}),i.jsx("div",{ref:j})]}),i.jsxs("div",{className:"p-4 border-t bg-muted/30",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("textarea",{value:h,onChange:I=>m(I.target.value),onKeyPress:A,placeholder:"Type your message...",className:"flex-1 p-3 border rounded-lg text-sm resize-none focus:ring-2 focus:ring-primary/20",rows:2,disabled:g,title:g?"Please wait":void 0}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{size:"sm",onClick:S,disabled:!h.trim()||g,className:"px-4",children:i.jsx(Xh,{className:"w-4 h-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Kirim pesan ke agen AI"})})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Press Enter to send, Shift+Enter for new line"})]})]})},xu=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown",Fg=e=>e==null?"Pricing on request":`${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e>=1?2:3}).format(e)} / 1M`,sIe=({agentName:e,onBack:t,profileId:n,initialModelId:r})=>{var wo,jo,we,ot,ht;const[a,s]=p.useState("general"),[o,l]=p.useState("text"),[c,u]=p.useState({behavior:!0,welcome:!0,transfer:!1}),f=K=>{u(fe=>({...fe,[K]:!fe[K]}))},d=!n,{hasPermission:h,hasRole:m}=jr(),{user:g}=Vr(),v=m==null?void 0:m("master_agent"),x=m==null?void 0:m("super_agent"),y=h("ai_agent_files.manage")||h("ai_agent_files.create"),b=(K,fe,Ce)=>Number.isNaN(K)?fe:Math.min(Ce,Math.max(fe,K)),w=24e3,j=2e5,k=40,_=1e3,S=25,A=24*60,{profile:N,loading:T,saving:I,error:F,saveProfile:E}=Aq(n),[O,M]=p.useState((N==null?void 0:N.super_agent_id)??null),[B,R]=p.useState([]),[L,$]=p.useState(!1),[C,U]=p.useState(null);p.useEffect(()=>{N!=null&&N.super_agent_id?M(N.super_agent_id):x&&(g!=null&&g.id)?M(g.id):N!=null&&N.super_agent_id||M(null)},[N==null?void 0:N.super_agent_id,x,g==null?void 0:g.id]),p.useEffect(()=>{if(d&&!O)try{const K=localStorage.getItem("ai.new.super_agent_id");K&&(M(K),localStorage.removeItem("ai.new.super_agent_id"))}catch{}},[d,O]),p.useEffect(()=>{let K=!1;return(async()=>{try{$(!0),U(null);const{data:Ce,error:rt}=await Es.from("v_human_agents").select("user_id, agent_name, email, role_name").eq("org_id",(N==null?void 0:N.org_id)??aIe).ilike("role_name","%super%");if(rt)throw rt;if(K)return;const Te=(Ce||[]).map(lt=>({id:lt.user_id,name:lt.agent_name||lt.email||String(lt.user_id).slice(0,8)}));R(Te),N!=null&&N.super_agent_id||(x&&(g!=null&&g.id)?M(g.id):Te.length===1&&!x&&v&&M(Te[0].id))}catch(Ce){K||U(Ce instanceof Error?Ce.message:"Failed to load super agents")}finally{K||$(!1)}})(),()=>{K=!0}},[N==null?void 0:N.org_id,N==null?void 0:N.super_agent_id,x,v,g==null?void 0:g.id]);const[D,P]=p.useState(d?"You are a helpful AI assistant for customer service. Be friendly, professional, and helpful. Always respond in Indonesian unless the customer speaks in another language.":(N==null?void 0:N.system_prompt)||""),[H,G]=p.useState(d?"Halo!  Selamat datang! Ada yang bisa saya bantu hari ini?":(N==null?void 0:N.welcome_message)||""),[Y,W]=p.useState(d?`Transfer to human agent when:
- Customer requests to speak with a human
- Complex technical issues arise
- Customer is dissatisfied or angry
- Payment or billing issues
- Escalation is needed`:(N==null?void 0:N.transfer_conditions)||""),[ee,X]=p.useState((N==null?void 0:N.stop_ai_after_handoff)??!0),[ae,re]=p.useState([]),[J,ve]=p.useState([]),[z,q]=p.useState(""),[ie,oe]=p.useState("");p.useState(()=>{const K=(N==null?void 0:N.temperature)??.3;return Math.max(0,Math.min(1,K))});const[be,Se]=p.useState(""),[Le,ge]=p.useState(!!((N==null?void 0:N.enable_resolve)??!1)),[We,dt]=p.useState(""),[yt,Et]=p.useState(()=>b((N==null?void 0:N.read_file_limit)??3,0,S)),[te,me]=p.useState(""),[Fe,He]=p.useState((N==null?void 0:N.response_temperature)??"Balanced"),[Ue,he]=p.useState((N==null?void 0:N.message_await)??3),[Ut,bt]=p.useState(""),wt=K=>K.replace(/[^0-9]/g,""),xe=K=>{if(!K)return 0;const fe=parseInt(K,10);return Number.isNaN(fe)?0:fe};p.useEffect(()=>{(async()=>{var fe,Ce;try{const{data:rt,error:Te}=await Es.from("ai_models").select("*").eq("is_active",!0).order("display_name",{ascending:!0});if(Te)throw Te;const lt=rt||[],Xe=lt.filter(ft=>(ft.display_name||"").toLowerCase()!=="fallback"),jt=lt.filter(ft=>(ft.display_name||"").toLowerCase()==="fallback");re(Xe),ve(jt);const ct=(N==null?void 0:N.model_id)||r||"";z||(ct&&Xe.some(ft=>ft.id===ct)?q(ct):Xe.length>0&&q(((fe=Xe[0])==null?void 0:fe.id)||"")),!ie&&jt.length>0&&oe(((Ce=jt[0])==null?void 0:Ce.id)||"")}catch(rt){console.error("Failed to load ai_models",rt)}})()},[N==null?void 0:N.id,r]),p.useEffect(()=>{!z&&(N!=null&&N.model_id)&&ae.some(K=>K.id===N.model_id)&&q(N.model_id)},[ae,N==null?void 0:N.model_id]),p.useEffect(()=>{if(!N)return;const K=N==null?void 0:N.auto_resolve_after_minutes;Se(typeof K=="number"&&!Number.isNaN(K)?K.toString():"0");const fe=b((N==null?void 0:N.history_limit)??w,0,j);dt(fe.toString());const Ce=b((N==null?void 0:N.context_limit)??28,0,k);me(Ce.toString());const rt=b((N==null?void 0:N.message_limit)??_,0,_);bt(rt.toString())},[N==null?void 0:N.id]);const _e=ae.find(K=>K.id===z)||null,Me=p.useMemo(()=>{const K=_e==null?void 0:_e.max_context_tokens;return typeof K=="number"&&K>0?b(K,0,j):j},[_e==null?void 0:_e.max_context_tokens]),le=p.useMemo(()=>{const K=_e==null?void 0:_e.max_context_tokens;return typeof K=="number"&&K>0?Math.max(1,Math.floor(K/1e3)):k},[_e==null?void 0:_e.max_context_tokens]);p.useEffect(()=>{if(!te)return;const K=parseInt(te,10);Number.isNaN(K)||K>le&&me(le.toString())},[te,le]),p.useEffect(()=>{if(!We)return;const K=parseInt(We,10);Number.isNaN(K)||K>Me&&dt(Me.toString())},[We,Me]);const Ze=K=>{const fe=wt(K);if(fe===""){Se("");return}const Ce=b(parseInt(fe,10),0,A);Se(Ce.toString())},Ke=K=>{const fe=wt(K);if(fe===""){dt("");return}const Ce=b(parseInt(fe,10),0,Me);dt(Ce.toString())},en=K=>{const fe=wt(K);if(fe===""){me("");return}const Ce=b(parseInt(fe,10),0,le);me(Ce.toString())},_t=K=>{const fe=wt(K);if(fe===""){bt("");return}const Ce=b(parseInt(fe,10),0,_);bt(Ce.toString())},[ut,$t]=p.useState([]),ze=p.useRef(null),[se,Ne]=p.useState(!1),Re=async()=>{const K=(N==null?void 0:N.id)??n;if(!K)throw new Error("Please save the AI Agent first before uploading files.");let fe=(N==null?void 0:N.org_id)??null;if(!fe){const{data:{user:Ce}}=await Es.auth.getUser();if(Ce){const{data:rt}=await Es.from("org_members").select("org_id").eq("user_id",Ce.id).limit(1).maybeSingle();fe=(rt==null?void 0:rt.org_id)??null}}if(!fe)throw new Error("Could not determine your organization. Please re-login or contact support.");return{orgId:fe,profileId:K}},et=async(K,fe)=>{try{if(!y)throw new Error("You do not have permission to upload agent files.");const Ce=((K==null?void 0:K.type)||"").toLowerCase()==="application/pdf",rt=((K==null?void 0:K.name)||"").toLowerCase().endsWith(".pdf");if(!Ce&&!rt)throw new Error("Only PDF files are supported");const{orgId:Te,profileId:lt}=await Re(),Xe=await K.arrayBuffer(),jt=await crypto.subtle.digest("SHA-256",Xe),ft=Array.from(new Uint8Array(jt)).map(Ns=>Ns.toString(16).padStart(2,"0")).join(""),ca=((K==null?void 0:K.name)||"file.pdf").replace(/[^a-zA-Z0-9_.-]/g,"").replace(/\.pdf$/i,""),ua=`${ft}_${ca}.pdf`,vr=`org_${Te}/profile_${lt}/${ua}`,on=new FormData;on.append("file",K),on.append("file_name",K.name||"file.pdf"),on.append("org_id",Te),on.append("profile_id",lt),on.append("hashFile",ft);const xn=await wa(Yn.ENDPOINTS.KNOWLEDGE.FILE_UPLOAD,{method:"POST",body:on});if(!xn.ok){let Ns=`Upload failed (${xn.status})`;try{const j0=await xn.json();Ns=(j0==null?void 0:j0.message)||Ns}catch{}throw new Error(Ns)}const gt=await xn.json().catch(()=>({})),Jn=(gt==null?void 0:gt.document_id)||(gt==null?void 0:gt.documentId)||void 0,mt=String((gt==null?void 0:gt.status)||"").toLowerCase();if(mt==="duplicate"){const Ns=new Error("duplicate");throw Ns.code="DUPLICATE_CONTENT",Ns}if(mt!=="success")throw new Error(`Upload webhook returned unexpected status: ${mt||"unknown"}`);let Wp=null;const{error:da}=await Es.storage.from("ai-agent-files").upload(vr,K,{cacheControl:"31536000",contentType:"application/pdf",upsert:!1});if(da&&!(typeof(da==null?void 0:da.message)=="string"&&/exists|duplicate|409/i.test(da.message)))throw da;const{data:Fl,error:Ir}=await Es.storage.from("ai-agent-files").createSignedUrl(vr,60*60*24*7);return!Ir&&(Fl!=null&&Fl.signedUrl)&&(Wp=Fl.signedUrl),{url:Wp||"",filePath:vr,documentId:Jn}}catch(Ce){throw console.error("Error uploading file to Supabase:",Ce),new Error(`Failed to upload ${K.name}: ${(Ce==null?void 0:Ce.message)||"Unknown error"}`)}},pt=async()=>{try{Ne(!0);const{orgId:K,profileId:fe}=await Re(),Ce=`org_${K}/profile_${fe}`,rt=`profile_${fe}`,Te=async ft=>{const{data:rn,error:ca}=await Es.storage.from("ai-agent-files").list(ft,{limit:100});return ca?[]:(rn||[]).map(ua=>({...ua,__prefix:ft}))},[lt,Xe]=await Promise.all([Te(Ce),Te(rt)]),jt=[...lt,...Xe];if(jt.length===0){$t([]);return}const ct=[];for(const ft of jt){if(!ft||!ft.name)continue;const rn=String(ft.name);if(rn.endsWith("/")||rn===".emptyFolderPlaceholder"||rn===".emptyfolderplaceholder")continue;const ca=`${ft.__prefix}/${ft.name}`,ua=ft.metadata&&typeof ft.metadata.size<"u"?ft.metadata.size:0,vr=typeof ua=="number"?ua:Number(ua||0);let on="";const{data:xn}=await Es.storage.from("ai-agent-files").createSignedUrl(ca,60*60*24*7);on=(xn==null?void 0:xn.signedUrl)||"",ct.push({id:Date.now()+Math.random(),name:ft.name,size:vr,uploadedAt:ft.updated_at||ft.created_at||new Date().toISOString(),status:"ready",url:on,filePath:ca})}ct.sort((ft,rn)=>new Date(rn.uploadedAt).getTime()-new Date(ft.uploadedAt).getTime()),$t(ct)}catch(K){console.error("Failed to load knowledge files:",K)}finally{Ne(!1)}};p.useEffect(()=>{o==="file"&&pt()},[o,N==null?void 0:N.id,n]);const Z=async K=>{const fe=Array.from(K.target.files||[]);if(fe.length===0)return;try{await Re()}catch(Te){Ie.error((Te==null?void 0:Te.message)||"Unable to upload at this time"),ze.current&&(ze.current.value="");return}const Ce=new Date().toISOString(),rt=fe.map(Te=>({id:Date.now()+Math.random(),name:Te.name,size:Te.size,uploadedAt:Ce,status:"uploading"}));$t(Te=>[...rt,...Te]);for(let Te=0;Te<fe.length;Te++){const lt=fe[Te],Xe=rt[Te];try{const{url:jt,filePath:ct}=await et(lt,Xe.id);$t(ft=>ft.map(rn=>rn.id===Xe.id?{...rn,status:"ready",url:jt,filePath:ct}:rn)),Ie.success(`${lt.name} uploaded successfully!`)}catch(jt){if(String((jt==null?void 0:jt.message)||"").toLowerCase().includes("duplicate")||(jt==null?void 0:jt.code)==="DUPLICATE_CONTENT"){$t(ct=>ct.map(ft=>ft.id===Xe.id?{...ft,status:"ready"}:ft)),setTimeout(()=>{var ct,ft;(ft=(ct=pt())==null?void 0:ct.catch)==null||ft.call(ct,()=>{})},0),Ie.info(`${lt.name} already exists. Skipped re-upload.`);continue}$t(ct=>ct.map(ft=>ft.id===Xe.id?{...ft,status:"failed"}:ft)),Ie.error(jt.message||`Failed to upload ${lt.name}`)}}ze.current&&(ze.current.value="")},ke=async K=>{K.preventDefault();const fe=Array.from(K.dataTransfer.files||[]);if(fe.length===0)return;try{await Re()}catch(Te){Ie.error((Te==null?void 0:Te.message)||"Unable to upload at this time");return}const Ce=new Date().toISOString(),rt=fe.map(Te=>({id:Date.now()+Math.random(),name:Te.name,size:Te.size,uploadedAt:Ce,status:"uploading"}));$t(Te=>[...rt,...Te]);for(let Te=0;Te<fe.length;Te++){const lt=fe[Te],Xe=rt[Te];try{const{url:jt,filePath:ct}=await et(lt,Xe.id);$t(ft=>ft.map(rn=>rn.id===Xe.id?{...rn,status:"ready",url:jt,filePath:ct}:rn)),Ie.success(`${lt.name} uploaded successfully!`)}catch(jt){$t(ct=>ct.map(ft=>ft.id===Xe.id?{...ft,status:"failed"}:ft)),Ie.error(jt.message||`Failed to upload ${lt.name}`)}}},st=K=>{K.preventDefault()},nt=async K=>{const fe=ut.find(Ce=>Ce.id===K);try{const{orgId:Ce,profileId:rt}=await Re();if(fe!=null&&fe.filePath){const Te=await wa(Yn.ENDPOINTS.KNOWLEDGE.FILE_DELETE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({org_id:Ce,profile_id:rt,file_key:fe.filePath,document_id:(fe==null?void 0:fe.documentId)||void 0})});if(!Te.ok){let jt=`Delete failed (${Te.status})`;try{const ct=await Te.json();jt=(ct==null?void 0:ct.message)||jt}catch{}throw new Error(jt)}let lt={};try{lt=await Te.json()}catch{}if(String((lt==null?void 0:lt.status)||"").toLowerCase()!=="deleted")throw new Error((lt==null?void 0:lt.message)||"Delete not confirmed by webhook")}$t(Te=>Te.filter(lt=>lt.id!==K)),Ie.info(`${(fe==null?void 0:fe.name)||"File"} removed`)}catch(Ce){console.error("Error deleting file via webhook:",Ce),Ie.error((Ce==null?void 0:Ce.message)||"Failed to delete file")}},Lt=async K=>{try{const fe=K.filePath;if(!fe)throw new Error("Missing file path");const{data:Ce,error:rt}=await Es.storage.from("ai-agent-files").createSignedUrl(fe,60*60,{download:K.name||"file.pdf"});if(rt)throw rt;const Te=(Ce==null?void 0:Ce.signedUrl)||K.url||"";if(!Te)throw new Error("Unable to generate download link");const lt=document.createElement("a");lt.href=Te,lt.download=K.name||"",lt.target="_blank",lt.rel="noopener",document.body.appendChild(lt),lt.click(),lt.remove()}catch(fe){Ie.error((fe==null?void 0:fe.message)||"Failed to download file")}},Rn=async()=>{const K=ut.filter(fe=>fe.filePath);if(K.length>0)try{const{orgId:fe,profileId:Ce}=await Re();await Promise.all(K.map(async rt=>{try{const Te=await wa(Yn.ENDPOINTS.KNOWLEDGE.FILE_DELETE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({org_id:fe,profile_id:Ce,file_key:rt.filePath,document_id:(rt==null?void 0:rt.documentId)||void 0})});if(Te.ok){let lt={};try{lt=await Te.json()}catch{}const Xe=String((lt==null?void 0:lt.status)||"").toLowerCase();Xe!=="deleted"&&console.warn("Delete webhook did not confirm deletion for",rt.filePath,Xe)}else{let lt=`Delete failed (${Te.status})`;try{const Xe=await Te.json();lt=(Xe==null?void 0:Xe.message)||lt}catch{}console.warn("Delete webhook failed for",rt.filePath,lt)}}catch(Te){console.warn("Delete webhook error for",rt.filePath,Te)}}))}catch(fe){console.error("Error clearing files via webhook:",fe)}$t([]),Ie.info("All files cleared")},[Cn,An]=p.useState([{id:Date.now(),question:"",answer:""}]),[yi,Gr]=p.useState([{id:Date.now(),question:"",answer:""}]),Dl=()=>{const K={id:Date.now()+Math.random(),question:"",answer:""};An(fe=>[K,...fe]),Gr(fe=>[JSON.parse(JSON.stringify(K)),...fe])},Ss=K=>{An(fe=>fe.filter(Ce=>Ce.id!==K)),Gr(fe=>fe.filter(Ce=>Ce.id!==K))},xo=(K,fe,Ce)=>{An(rt=>rt.map(Te=>Te.id===K?{...Te,[fe]:Ce}:Te))},yo=K=>{const fe=yi.find(Te=>Te.id===K.id),Ce=(K.question||"").trim(),rt=(K.answer||"").trim();return fe?Ce!==(fe.question||"").trim()||rt!==(fe.answer||"").trim():Ce!==""||rt!==""},[bo,ru]=p.useState([{id:1,prompt:"Hai! Ada yang bisa saya bantu lagi?",delay:60,expanded:!1},{id:2,prompt:"Jika ada pertanyaan lain, jangan ragu untuk bertanya!",delay:120,expanded:!1}]),w0=()=>{const K={id:Date.now(),prompt:"",delay:60,expanded:!1};ru([...bo,K])},$l=K=>{ru(bo.filter(fe=>fe.id!==K))},_f=(K,fe,Ce)=>{ru(bo.map(rt=>rt.id===K?{...rt,[fe]:Ce}:rt))},Ga=K=>{ru(bo.map(fe=>fe.id===K?{...fe,expanded:!fe.expanded}:fe))};p.useEffect(()=>{if(N&&!d){P(N.system_prompt||""),G(N.welcome_message||""),W(N.transfer_conditions||""),X(N.stop_ai_after_handoff),Se(String((N==null?void 0:N.auto_resolve_after_minutes)??0)),ge(!!((N==null?void 0:N.enable_resolve)??!1)),dt(String(b((N==null?void 0:N.history_limit)??w,0,j))),Et(b((N==null?void 0:N.read_file_limit)??3,0,S)),me(String(b((N==null?void 0:N.context_limit)??28,0,k))),He((N==null?void 0:N.response_temperature)??"Balanced"),he((N==null?void 0:N.message_await)??3),bt(String(b((N==null?void 0:N.message_limit)??_,0,_)));const K=N==null?void 0:N.qna;if(K&&Array.isArray(K)){const fe=K.map((Ce,rt)=>({id:Date.now()+rt,question:Ce.q??Ce.question??"",answer:Ce.a??Ce.answer??""}));An(fe),Gr(JSON.parse(JSON.stringify(fe)))}}},[N,d]),p.useEffect(()=>{d&&Gr(JSON.parse(JSON.stringify(Cn)))},[]);const Ll=async()=>{if(!O){Ie.error("Please assign a super agent before saving this AI agent.");return}const K=b(xe(be),0,A),fe=b(xe(We),0,Me),Ce=b(xe(te),0,le),rt=b(xe(Ut),0,_),Te={system_prompt:D,welcome_message:H,transfer_conditions:Y,stop_ai_after_handoff:ee,model_id:z||null,name:e,auto_resolve_after_minutes:K,enable_resolve:Le,history_limit:fe,read_file_limit:yt,context_limit:Ce,response_temperature:Fe,message_await:Ue,message_limit:rt,super_agent_id:O,qna:Cn.filter(lt=>{var Xe,jt;return((Xe=lt.question)==null?void 0:Xe.trim())||((jt=lt.answer)==null?void 0:jt.trim())}).map(({question:lt,answer:Xe})=>({q:lt.trim(),a:Xe.trim()}))};try{await E(Te),Ie.success(d?"AI agent created successfully!":"AI agent settings saved successfully!")}catch{Ie.error(d?"Failed to create AI agent":"Failed to save AI agent settings")}};return T&&!d?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Gt,{className:"w-8 h-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading AI profile..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs(Q,{variant:"ghost",size:"sm",onClick:t,className:"gap-2",children:[i.jsx(lp,{className:"w-4 h-4"}),"Back"]})}),i.jsx(ce,{children:i.jsx("p",{children:"Kembali ke daftar agen AI"})})]}),i.jsx("h1",{className:"text-2xl font-bold",children:e}),d?i.jsx(Ot,{variant:"outline",className:"text-blue-600 border-blue-600",children:"New Agent"}):N&&i.jsxs(Ot,{variant:"secondary",children:["Last Updated: ",new Date(N.created_at).toLocaleDateString()]})]}),F&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",F]})}),i.jsxs(pl,{value:a,onValueChange:s,children:[i.jsxs(so,{className:"grid w-full grid-cols-2 bg-muted/60 p-1 rounded-lg",children:[i.jsx(Gn,{value:"general",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:bg-muted/40 transition-colors",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Ks,{className:"w-4 h-4"}),i.jsx("span",{children:"General"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Konfigurasi pengaturan umum agen AI"})})]})}),i.jsx(Gn,{value:"knowledge",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:bg-muted/40 transition-colors",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(lv,{className:"w-4 h-4"}),i.jsx("span",{children:"Knowledge Sources"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Kelola sumber pengetahuan dan pasangan T&J"})})]})})]}),i.jsx(Dn,{value:"general",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-6",children:[i.jsxs("div",{className:"xl:col-span-3 space-y-4",children:[i.jsxs(Ae,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center text-lg font-semibold",children:e.charAt(0)}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:e}),i.jsx("p",{className:"text-muted-foreground",children:d?"New AI Agent - Configure your settings below":(N==null?void 0:N.description)||"AI Agent"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:d?"Not saved yet":`Last Updated: ${N?new Date(N.created_at).toLocaleString():"Never"}`})]})]}),i.jsxs("div",{className:"space-y-2 pt-4",children:[i.jsx("span",{className:"text-sm font-medium",children:"Assigned Super Agent"}),L?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading super agents..."}):C?i.jsx("div",{className:"text-sm text-destructive",children:C}):x&&(g!=null&&g.id)?i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-md bg-muted px-3 py-2 text-sm",children:[i.jsxs("span",{children:[" ",((wo=B.find(K=>K.id===g.id))==null?void 0:wo.name)||g.email||"You"]}),i.jsx(Ot,{variant:"secondary",children:"Your account"})]}):B.length===0?i.jsx("div",{className:"rounded-md border border-dashed border-muted-foreground/40 bg-muted/30 px-3 py-2 text-sm text-muted-foreground",children:"No super agents available. Create a super agent first before assigning this AI agent."}):i.jsxs(Bt,{value:O||"",onValueChange:K=>M(K),disabled:!v,children:[i.jsx(Mt,{className:"w-full",children:i.jsx(It,{placeholder:"Choose a super agent"})}),i.jsx(Dt,{className:"bg-background border z-50",children:B.map(K=>i.jsxs($e,{value:K.id,children:[" ",K.name]},K.id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Only the assigned super agent and their human agents can view and use this AI agent."})]})]}),i.jsx(Ae,{className:"p-4",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"AI Model"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Pilih model AI yang menentukan kecepatan dan kualitas respons."})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the balance between speed and intelligence for this agent."})]}),_e&&i.jsx(Ot,{variant:"secondary",className:"whitespace-nowrap",children:xu(_e==null?void 0:_e.provider)})]}),i.jsxs(Bt,{value:z,onValueChange:q,disabled:ae.length===0,children:[i.jsx(Mt,{className:"w-full py-3",children:_e?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[(_e==null?void 0:_e.display_name)||"Custom","  ",Fg(_e==null?void 0:_e.cost_per_1m_tokens),"  ",xu(_e==null?void 0:_e.provider)]})}):i.jsx(It,{placeholder:"Select an AI model"})}),i.jsx(Dt,{className:"bg-background border z-50",children:ae.map(K=>i.jsx($e,{value:K.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("span",{className:"font-semibold leading-tight",children:[(K==null?void 0:K.display_name)||"Custom","  ",Fg(K==null?void 0:K.cost_per_1m_tokens)]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:(K==null?void 0:K.description)||"No description available"}),i.jsxs("span",{className:"text-[11px] text-muted-foreground font-mono",children:[K==null?void 0:K.model_name,"  ",xu(K==null?void 0:K.provider)]})]})},K.id))})]}),ae.length===0&&i.jsx("p",{className:"text-xs text-destructive mt-2",children:"No AI models available. Please contact your administrator."})]}),J.length>0&&i.jsxs("div",{className:"border-t pt-6",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Fallback Model"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Model yang digunakan secara otomatis jika model utama tidak tersedia."})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatic backup model used when primary model is unavailable."})]}),J.find(K=>K.id===ie)&&i.jsx(Ot,{variant:"secondary",className:"whitespace-nowrap",children:xu((jo=J.find(K=>K.id===ie))==null?void 0:jo.provider)})]}),i.jsxs(Bt,{value:ie,onValueChange:oe,disabled:J.length===0,children:[i.jsx(Mt,{className:"w-full py-3",children:J.find(K=>K.id===ie)?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[((we=J.find(K=>K.id===ie))==null?void 0:we.display_name)||"Custom","  ",Fg((ot=J.find(K=>K.id===ie))==null?void 0:ot.cost_per_1m_tokens),"  ",xu((ht=J.find(K=>K.id===ie))==null?void 0:ht.provider)]})}):i.jsx(It,{placeholder:"Select a fallback model"})}),i.jsx(Dt,{className:"bg-background border z-50",children:J.map(K=>i.jsx($e,{value:K.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("span",{className:"font-semibold leading-tight",children:[(K==null?void 0:K.display_name)||"Custom","  ",Fg(K==null?void 0:K.cost_per_1m_tokens)]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:(K==null?void 0:K.description)||"No description available"}),i.jsxs("span",{className:"text-[11px] text-muted-foreground font-mono",children:[K==null?void 0:K.model_name,"  ",xu(K==null?void 0:K.provider)]})]})},K.id))})]})]})]})}),i.jsxs(Ae,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("behavior"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"AI Agent Behavior"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Konfigurasi kepribadian dan perilaku agen AI untuk menentukan cara berinteraksi dengan pelanggan"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure AI personality and behavior"})]}),i.jsx(xa,{className:`w-5 h-5 transition-transform ${c.behavior?"rotate-180":""}`})]}),c.behavior&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx($a,{className:"min-h-[120px]",value:D,onChange:K=>P(K.target.value),placeholder:d?"Define your AI's personality, behavior, and capabilities here...":"Enter system prompt..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[D.length,"/15000"]})]})]}),i.jsxs(Ae,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("welcome"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Welcome Message"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Pesan selamat datang yang dikirim otomatis kepada pelanggan saat memulai percakapan"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"First message sent to users"})]}),i.jsx(xa,{className:`w-5 h-5 transition-transform ${c.welcome?"rotate-180":""}`})]}),c.welcome&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx($a,{className:"min-h-[80px]",value:H,onChange:K=>G(K.target.value),placeholder:d?"This is the first message your AI will send to customers...":"Enter welcome message..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[H.length,"/5000"]})]})]}),i.jsxs(Ae,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("transfer"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Agent Transfer Conditions"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Kondisi yang menentukan kapan percakapan dialihkan dari agen AI ke agen manusia"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"When to transfer to human agents"})]}),i.jsx(xa,{className:`w-5 h-5 transition-transform ${c.transfer?"rotate-180":""}`})]}),c.transfer&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx($a,{className:"min-h-[80px]",value:Y,onChange:K=>W(K.target.value),placeholder:d?"Define when your AI should transfer the conversation to a human agent...":"Enter transfer conditions..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[Y.length,"/750"]})]})]}),i.jsx(Ae,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Stop AI after Handoff"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Menghentikan agen AI mengirim pesan setelah percakapan dialihkan ke agen manusia"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Stop AI from sending messages after handoff"})]}),i.jsx(xl,{checked:ee,onCheckedChange:X})]})}),i.jsx(Ae,{className:"p-6",children:i.jsxs(TR,{defaultOpen:!1,children:[i.jsxs(OR,{className:"flex w-full items-center justify-between py-1 font-medium [&[data-state=open]>svg]:rotate-180",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Additional Settings"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Pengaturan tambahan untuk konfigurasi lanjutan agen AI seperti batas riwayat, konteks, dan resolusi otomatis"})})]})]}),i.jsx(xa,{className:"w-5 h-5 transition-transform"})]}),i.jsx(IR,{className:"mt-4 data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Enable auto-resolve"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Mengaktifkan resolusi otomatis percakapan setelah waktu tertentu tanpa respons pelanggan"})})]})]}),i.jsx("div",{className:"mt-2",children:i.jsx(xl,{checked:Le,onCheckedChange:ge})})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Auto-resolve timeout (minutes)"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Waktu dalam menit sebelum percakapan secara otomatis diselesaikan (0 = nonaktif)"})})]})]}),i.jsx(Ve,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 30",value:be,onChange:K=>Ze(K.target.value),disabled:!Le,className:`mt-1 ${Le?"":"opacity-60 cursor-not-allowed bg-muted/50"}`}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Le?"Set 0 to disable auto-resolve.":"Enable Auto-resolve to edit this value."})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Conversation History (tokens)"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Batas maksimal riwayat percakapan yang dapat diingat AI (dalam token)"})})]})]}),i.jsx(Ve,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:`Max ${Me.toLocaleString()}`,value:We,onChange:K=>Ke(K.target.value),className:"mt-1"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:_e!=null&&_e.display_name?`${_e.display_name} supports up to ${Me.toLocaleString()} tokens.`:`Supports up to ${Me.toLocaleString()} tokens.`})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Context Window (K tokens)"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Batas maksimal konteks yang dapat diproses AI dalam satu respons (dalam K tokens)"})})]})]}),i.jsx(Ve,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:`Max ${le}K`,value:te,onChange:K=>en(K.target.value),className:"mt-1"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:_e!=null&&_e.display_name?`${_e.display_name} supports up to ${le}K tokens.`:`Supports up to ${le}K tokens.`})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creativity Preset"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Preset kreativitas AI: Conservative (akurat), Balanced (seimbang), Creative (kreatif)"})})]})]}),i.jsxs("select",{value:Fe,onChange:K=>He(K.target.value),className:"w-full p-2 border rounded-lg mt-1",children:[i.jsx("option",{value:"Conservative",children:"Conservative"}),i.jsx("option",{value:"Balanced",children:"Balanced"}),i.jsx("option",{value:"Creative",children:"Creative"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"AI Message Cap"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Batas maksimal jumlah pesan yang dapat dikirim AI dalam satu percakapan"})})]})]}),i.jsx(Ve,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 1000",value:Ut,onChange:K=>_t(K.target.value),className:"mt-1"})]})]})})]})}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{className:"w-full",onClick:Ll,disabled:I,children:I?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"w-4 h-4 mr-2 animate-spin"}),d?"Creating...":"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ks,{className:"w-4 h-4 mr-2"}),d?"Create AI Agent":"Save AI Settings"]})})}),i.jsx(ce,{children:i.jsx("p",{children:d?"Buat agen AI baru dengan pengaturan ini":"Simpan semua pengaturan saat ini"})})]})]}),i.jsx("div",{className:"xl:col-span-2",children:i.jsx(iIe,{welcomeMessage:H,systemPrompt:D,modelDisplay:(_e==null?void 0:_e.display_name)||(_e==null?void 0:_e.model_name)||"Not selected",profile:N,profileId:n,modelName:(_e==null?void 0:_e.model_name)||"",temperature:Eq(Fe),transfer_conditions:Y})})]})}),i.jsx(Dn,{value:"knowledge",className:"space-y-6",children:i.jsx(Ae,{className:"p-6",children:i.jsxs(pl,{value:o,onValueChange:l,className:"w-full",children:[i.jsxs(so,{className:"grid w-full grid-cols-3 mb-6",children:[i.jsxs(Gn,{value:"text",className:"gap-2",children:[i.jsx(VV,{className:"w-4 h-4"}),"Text"]}),i.jsxs(Gn,{value:"file",className:"gap-2",children:[i.jsx(tw,{className:"w-4 h-4"}),"File"]}),i.jsxs(Gn,{value:"qa",className:"gap-2",children:[i.jsx(De,{className:"w-4 h-4"}),"Q&A"]})]}),i.jsxs(Dn,{value:"text",className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs(Q,{size:"sm",className:"gap-2",children:[i.jsx(YV,{className:"w-4 h-4"}),"Add"]})}),i.jsx(ce,{children:i.jsx("p",{children:"Tambah item pengetahuan baru"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"outline",size:"sm",children:"Default"})}),i.jsx(ce,{children:i.jsx("p",{children:"Gunakan item pengetahuan default"})})]})]}),i.jsxs("div",{className:"flex items-center gap-1 p-2 border rounded-md bg-muted/30",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(QV,{className:"w-4 h-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Batal"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(JV,{className:"w-4 h-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Ulang"})})]}),i.jsx("div",{className:"w-px h-6 bg-border mx-1"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(BV,{className:"w-4 h-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Tebal"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(KV,{className:"w-4 h-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Miring"})})]}),i.jsx("div",{className:"w-px h-6 bg-border mx-1"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(LV,{className:"w-4 h-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Rata Kiri"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(DV,{className:"w-4 h-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Rata Tengah"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(FV,{className:"w-4 h-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Rata Kanan"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx($V,{className:"w-4 h-4"})})}),i.jsx(ce,{children:i.jsx("p",{children:"Rata Kiri-Kanan"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Panduan Umum: Deposit, Withdraw & Tambah Rekening"})]}),i.jsx("div",{className:"pl-6 space-y-2 text-sm",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-orange-500",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Cara Isi Saldo / Deposit"}),i.jsx("p",{className:"text-muted-foreground",children:"Lakukan transfer ke rekening tujuan yang tertera di menu DEPOSIT > REKENING TUJUAN."}),i.jsx("p",{className:"text-muted-foreground",children:"Gunakan metode ATM atau M-Banking (tidak tersedia autodebet)."}),i.jsx("p",{className:"text-muted-foreground",children:"Setelah transfer, wajib upload bukti transfer agar diproses lebih cepat."})]})]})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Khusus Bank BCA"})]}),i.jsxs("div",{className:"pl-6 text-sm text-muted-foreground",children:[i.jsx("p",{children:"Wajib menggunakan rekening BCA atas nama yang terdaftar di website."}),i.jsx("p",{children:"Tidak bisa menggunakan rekening BCA milik orang lain."})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Tambah Rekening / E-Wallet"})]}),i.jsxs("div",{className:"pl-6 text-sm text-muted-foreground",children:[i.jsx("p",{children:"Bisa menambahkan rekening atau e-wallet selama nama pemiliknya sama dengan yang sudah terdaftar."}),i.jsx("p",{children:"Akses dari halaman utama > klik menu REKENING > TAMBAH REKENING."})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("p",{children:"Minimal deposit Via Bank BCA, MANDIRI, BRI, BNI, CIMB, OCBC, BANK JAGO, & Dan Semua Jenis E-wallet adalah 5.000"}),i.jsx("p",{children:"Minimal deposit QRIS = 10.000"}),i.jsx("p",{children:"Minimal withdraw Bank & E-wallet = 50.000"}),i.jsx("p",{children:"Jika menggunakan pulsa, akan dikenakan potongan 20%"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Lupa User ID atau Password?"})]}),i.jsxs("div",{className:"pl-6 text-sm text-muted-foreground",children:[i.jsx("p",{children:"Format reset:"}),i.jsx("p",{children:"Nama Rekening :"}),i.jsx("p",{children:"Nomor Rekening :"}),i.jsx("p",{children:"Bank / E-wallet :"})]})]})]}),i.jsx("div",{className:"text-right text-xs text-muted-foreground",children:"10931 Characters"})]}),i.jsxs(Dn,{value:"website",className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Provide Link"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Provide a link to the page you want the AI to learn from."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Q,{variant:"default",size:"sm",className:"bg-muted text-foreground hover:bg-muted/80",children:"Batch Link"}),i.jsx(Q,{variant:"outline",size:"sm",children:"Single Link"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Web Link Collector"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ve,{placeholder:"Link URL",className:"flex-1"}),i.jsx(Q,{className:"bg-blue-600 hover:bg-blue-700",children:"Collect Link"})]}),i.jsxs("div",{className:"flex items-start gap-2 text-sm text-blue-600",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-600 flex items-center justify-center mt-0.5",children:i.jsx("span",{className:"text-white text-xs",children:"!"})}),i.jsxs("p",{children:["Start with URL and this tool will gather up to ",i.jsx("strong",{children:"30 unique"})," links from the site, excluding any files"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Trained Link"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"select-all",className:"rounded"}),i.jsx("label",{htmlFor:"select-all",className:"text-sm text-blue-600 cursor-pointer",children:"Select"})]}),i.jsx(Ve,{placeholder:"Search Links",className:"flex-1"})]})]})]}),i.jsxs(Dn,{value:"file",className:"space-y-6",children:[i.jsxs("div",{onDrop:y?ke:void 0,onDragOver:y?st:void 0,className:`border border-dashed rounded-lg p-6 text-center ${y?"bg-muted/30":"bg-muted/50 opacity-70"}`,children:[i.jsx("input",{ref:ze,type:"file",multiple:!0,hidden:!0,onChange:Z,disabled:!y}),i.jsx(tw,{className:"w-10 h-10 mx-auto mb-3 text-muted-foreground"}),y?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Drag & drop documents here, or"}),i.jsx(Q,{size:"sm",onClick:()=>{var K;return(K=ze.current)==null?void 0:K.click()},children:"Browse Files"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Supported: PDF"})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"You don't have permission to upload files."}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requires permission: ai_agent_files.create"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-sm font-medium",children:["Uploaded Files (",ut.length,")"]}),ut.length>0&&i.jsx(Q,{variant:"ghost",size:"sm",onClick:Rn,className:"text-red-600 hover:text-red-700",children:"Clear All"})]}),se?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading files..."}):ut.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No files uploaded yet."}):i.jsx("div",{className:"border rounded-md divide-y",children:ut.map(K=>i.jsxs("div",{className:"flex items-center justify-between p-3",children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx("div",{className:"w-8 h-8 rounded bg-muted flex items-center justify-center",children:i.jsx(tw,{className:"w-4 h-4"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"truncate text-sm font-medium",children:K.name}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[(K.size/1024).toFixed(1)," KB  ",new Date(K.uploadedAt).toLocaleString()]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${K.status==="ready"?"bg-green-100 text-green-700":K.status==="uploading"?"bg-blue-100 text-blue-700":K.status==="processing"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:K.status==="uploading"?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Gt,{className:"w-3 h-3 animate-spin"}),"uploading"]}):K.status}),i.jsx(Q,{size:"sm",variant:"outline",onClick:()=>Lt(K),disabled:K.status==="uploading",children:"Download"}),i.jsx(Q,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>nt(K.id),disabled:K.status==="uploading",children:i.jsx(Ar,{className:"w-4 h-4"})})]})]},K.id))})]})]}),i.jsxs(Dn,{value:"qa",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Q&A Knowledge"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Add questionanswer pairs the AI can reference."})]}),i.jsxs(Q,{size:"sm",onClick:()=>{l("qa"),Dl()},className:"gap-2",children:[i.jsx(gs,{className:"w-4 h-4"}),"Add Pair"]})]}),Cn.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No Q&A pairs. Click Add Pair to create one."}):i.jsx("div",{className:"space-y-3",children:Cn.map(K=>i.jsx(Ae,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx(Ve,{placeholder:"Question",value:K.question,onChange:fe=>xo(K.id,"question",fe.target.value)}),i.jsx($a,{placeholder:"Answer",className:"min-h-[80px]",value:K.answer,onChange:fe=>xo(K.id,"answer",fe.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[yo(K)&&i.jsx(Q,{variant:"outline",size:"sm",onClick:async fe=>{fe.preventDefault(),fe.stopPropagation(),l("qa");try{await E({qna:Cn.filter(Ce=>{var rt,Te;return((rt=Ce.question)==null?void 0:rt.trim())||((Te=Ce.answer)==null?void 0:Te.trim())}).map(({question:Ce,answer:rt})=>({q:Ce.trim(),a:rt.trim()}))}),Gr(JSON.parse(JSON.stringify(Cn))),Ie.success("Q&A saved")}catch(Ce){Ie.error((Ce==null?void 0:Ce.message)||"Failed to save Q&A")}},children:"Save"}),i.jsx(Q,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>Ss(K.id),children:i.jsx(Ar,{className:"w-4 h-4"})})]})]})},K.id))})]}),i.jsx(Dn,{value:"product",children:i.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[i.jsx(GV,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Product knowledge and catalog integration"})]})})]})})}),i.jsx(Dn,{value:"integrations",children:i.jsxs(Ae,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Integrations"}),i.jsx("p",{className:"text-muted-foreground",children:"Set up integrations with external services."})]})}),i.jsx(Dn,{value:"followups",className:"space-y-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Followups"}),i.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Tambahkan pesan Followup yang akan dikirim kepada ",i.jsx("span",{className:"text-blue-600",children:"pelanggan setelah jeda waktu tertentu"}),"."]}),i.jsx("p",{children:"Isi dengan prompt. Prompt adalah arahan yang AI akan pakai untuk menulis Followup sesuai dengan history chat dan knowledge anda."}),i.jsx("p",{children:"Anda juga bisa menulis kondisi Handoff to Agent anda di Prompt"}),i.jsx("p",{className:"text-blue-600",children:"Anda bisa mengirim gambar di followup. Klik disini untuk Upload gambar."})]})]}),i.jsx("div",{className:"space-y-4",children:bo.map((K,fe)=>i.jsx(Ae,{className:"p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:"Prompt:"}),i.jsx(Q,{variant:"ghost",size:"sm",onClick:()=>$l(K.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:i.jsx(Ar,{className:"w-4 h-4"})})]}),i.jsx($a,{value:K.prompt,onChange:Ce=>_f(K.id,"prompt",Ce.target.value),className:"min-h-[80px]",placeholder:"Enter followup message..."}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Delay (min):"}),i.jsx(Ve,{type:"number",value:K.delay,onChange:Ce=>_f(K.id,"delay",parseInt(Ce.target.value)||1),className:"w-20",min:"1"})]})}),i.jsxs(TR,{children:[i.jsxs(OR,{onClick:()=>Ga(K.id),className:"flex items-center gap-2 text-sm font-medium hover:text-primary",children:[i.jsx(xa,{className:`w-4 h-4 transition-transform ${K.expanded?"rotate-180":""}`}),"Options"]}),i.jsx(IR,{className:"pt-4 data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden",children:i.jsx("div",{className:"text-sm text-muted-foreground",children:"Additional options for this followup message can be configured here."})})]})]})},K.id))}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs(Q,{onClick:w0,className:"gap-2",children:[i.jsx(gs,{className:"w-4 h-4"}),"Add Followup"]})}),i.jsx(ce,{children:i.jsx("p",{children:"Tambah pesan tindak lanjut baru"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{className:"bg-green-600 hover:bg-green-700",children:"Save Followups"})}),i.jsx(ce,{children:i.jsx("p",{children:"Simpan semua pesan tindak lanjut"})})]})]})]})}),i.jsx(Dn,{value:"evaluation",children:i.jsxs(Ae,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Evaluation"}),i.jsx("p",{className:"text-muted-foreground",children:"Review AI agent performance metrics."})]})})]})]})},Bg=e=>e==null?"Pricing on request":`${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e>=1?2:3}).format(e)} / 1M`,Cu=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown",Ug="00000000-0000-0000-0000-000000000001",oIe=({agent:e,onSettings:t,onDelete:n})=>i.jsxs(Ae,{className:"p-6 text-center space-y-4 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center text-xl font-semibold text-muted-foreground",children:e.initials}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:e.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.creator}),e.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),(e.modelName||e.provider)&&i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.modelName?`Model: ${e.modelName}`:null,e.modelName&&e.provider?"  ":"",e.provider?`Provider: ${Cu(e.provider)}`:null]}),i.jsxs("div",{className:"space-y-1 mt-1",children:[i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Super Agent: ",e.superAgentName??"Unassigned"]})]})]})]}),i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Kt,{permission:"ai_profiles.update",children:i.jsxs(Q,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>t(e),children:[i.jsx(Ks,{className:"w-4 h-4"}),"Settings"]})})}),i.jsx(ce,{children:i.jsx("p",{children:"Konfigurasi pengaturan agen AI"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Kt,{permission:"ai_profiles.delete",children:i.jsxs(Q,{variant:"outline",size:"sm",className:"gap-2 text-destructive hover:text-destructive",onClick:()=>n(e.id),children:[i.jsx(Ar,{className:"w-4 h-4"}),"Delete"]})})}),i.jsx(ce,{children:i.jsx("p",{children:"Hapus agen AI ini"})})]})]})]}),lIe=({onClick:e})=>i.jsx(Ae,{className:"p-6 text-center space-y-4 hover:shadow-md transition-shadow bg-blue-600 text-white cursor-pointer group",onClick:e,children:i.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center group-hover:bg-white/30 transition-colors",children:i.jsx(gs,{className:"w-8 h-8"})}),i.jsx("h3",{className:"font-semibold text-lg",children:"Create New"})]})}),cIe=()=>{const[e,t]=p.useState(null),[n,r]=p.useState([]),[a,s]=p.useState(!0),[o,l]=p.useState(!1),[c,u]=p.useState(null),[f,d]=p.useState(!1),[h,m]=p.useState(""),[g,v]=p.useState("customer-service"),[x,y]=p.useState([]),[b,w]=p.useState([]),[j,k]=p.useState(!1),[_,S]=p.useState(null),[A,N]=p.useState(""),[T,I]=p.useState(""),[F,E]=p.useState(""),[O,M]=p.useState(""),[B,R]=p.useState("all"),[L,$]=p.useState("all"),[C,U]=p.useState("newest"),[D,P]=p.useState(0),[H,G]=p.useState(0),[Y,W]=p.useState(null),[ee,X]=p.useState(null),[ae,re]=p.useState(!1),J=p.useRef(!0);Vr();const{mode:ve,superAgentId:z,loading:q,error:ie}=gU(),{agents:oe}=El(),[be,Se]=p.useState(!1),[Le,ge]=p.useState(null),We=le=>le.replace(/[%_\\]/g,Ze=>`\\${Ze}`).replace(/'/g,"''"),dt=p.useMemo(()=>{const le=new Map;return[...x,...b].forEach(Ze=>{le.set(Ze.id,Ze)}),le},[x,b]),{deleteProfile:yt}=Aq(),Et=(le,Ze,Ke)=>({id:le.id,name:le.name,initials:le.name.split(" ").map(en=>en.charAt(0)).join("").toUpperCase().slice(0,2),creator:"Admin",description:le.description||void 0,created_at:le.created_at,modelId:le.model_id,modelName:(Ze==null?void 0:Ze.display_name)??(Ze==null?void 0:Ze.model_name)??null,provider:(Ze==null?void 0:Ze.provider)??null,superAgentId:(le==null?void 0:le.super_agent_id)??null,superAgentName:Ke??null}),te=p.useCallback(async()=>{if(!q){if(ve==="none"){G(0),W(null);return}try{let le=ne.from("ai_profiles").select("id",{count:"exact",head:!0}).eq("org_id",Ug);if(ve==="super"||ve==="agent"){if(!z){G(0),W(null);return}le=le.eq("super_agent_id",z)}const{count:Ze}=await le;if(G(Ze||0),(Ze||0)>0){let Ke=ne.from("ai_profiles").select("created_at").order("created_at",{ascending:!1}).limit(1).eq("org_id",Ug);(ve==="super"||ve==="agent")&&z&&(Ke=Ke.eq("super_agent_id",z));const{data:en}=await Ke.maybeSingle();W(en?new Date(en.created_at):null)}else W(null)}catch(le){console.error("Error fetching AI agent stats:",le)}}},[ve,z,q]),me=p.useCallback(async()=>{if(q){s(!0);return}try{if(J.current?s(!0):l(!0),u(null),ve==="none"){J.current=!1,r([]),P(0),s(!1),l(!1),u(ie??"Tidak ada agen AI yang tersedia untuk akun ini.");return}let le=ne.from("ai_profiles").select("*, ai_models:ai_models!ai_profiles_model_id_fkey(id, display_name, model_name, provider)",{count:"exact"}).eq("org_id",Ug);if(ve==="super"||ve==="agent"){if(!z){J.current=!1,r([]),P(0),s(!1),l(!1),u(ie??"Tidak ada agen AI yang tersedia untuk akun ini.");return}le=le.eq("super_agent_id",z)}if(O){const ze=We(O);le=le.or(`name.ilike.%${ze}%,description.ilike.%${ze}%`)}L!=="all"&&(le=le.eq("model_id",L)),B!=="all"&&(B==="unknown"?le=le.or("model_id.is.null,ai_models.provider.is.null"):le=le.eq("ai_models.provider",B)),C==="az"?le=le.order("name",{ascending:!0,nullsFirst:!1}):C==="oldest"?le=le.order("created_at",{ascending:!0}):le=le.order("created_at",{ascending:!1});const{data:Ze,error:Ke,count:en}=await le;if(Ke)throw Ke;const _t=Array.from(new Set(Ze.map(ze=>ze==null?void 0:ze.super_agent_id).filter(ze=>!!ze)));let ut=new Map;if(_t.length){const{data:ze}=await ne.from("v_human_agents").select("user_id, agent_name, email").in("user_id",_t);ze==null||ze.forEach(se=>{const Ne=se.agent_name||se.email||String(se.user_id).slice(0,8);ut.set(se.user_id,Ne)})}P(en||0);const $t=(Ze||[]).map(ze=>Et(ze,ze.ai_models||(ze.model_id?dt.get(ze.model_id):void 0),ut.get((ze==null?void 0:ze.super_agent_id)??"")??null));r($t)}catch(le){console.error("Error fetching AI agents:",le),u("Failed to load AI agents"),Ie.error("Failed to load AI agents"),r([]),P(0)}finally{J.current?(J.current=!1,s(!1)):l(!1)}},[O,L,B,C,dt,ve,z,q,ie]),Fe=p.useMemo(()=>{const le=new Set;return[...x,...b].forEach(Ze=>{Ze.provider&&le.add(Ze.provider)}),le.add("unknown"),Array.from(le).sort((Ze,Ke)=>Ze.localeCompare(Ke))},[x,b]),He=p.useMemo(()=>{const le=new Map;return[...x,...b].forEach(Ze=>{le.set(Ze.id,Ze.display_name||Ze.model_name||"Unnamed")}),Array.from(le.entries()).sort((Ze,Ke)=>Ze[1].localeCompare(Ke[1]))},[x,b]);p.useEffect(()=>{const le=setTimeout(()=>M(F.trim()),250);return()=>clearTimeout(le)},[F]),p.useEffect(()=>{me()},[me]),p.useEffect(()=>{te()},[te]),p.useEffect(()=>{B!=="all"&&!Fe.includes(B)&&R("all")},[B,Fe]),p.useEffect(()=>{L!=="all"&&!He.some(([le])=>le===L)&&$("all")},[L,He]);const Ue=le=>{const Ze=n.find(Ke=>Ke.id===le);Ze&&X(Ze)},he=async()=>{if(ee)try{re(!0),await yt(ee.id),await Promise.all([me(),te()]),Ie.success(`"${ee.name}" has been deleted successfully`),X(null)}catch(le){console.error("Error deleting agent:",le),u("Failed to delete AI agent"),Ie.error("Failed to delete AI agent")}finally{re(!1)}},Ut=()=>{d(!0)},bt=async()=>{var le,Ze;if(!h.trim()){Ie.error("Please enter an AI agent name");return}if(!A){Ie.error("Please select an AI model");return}if(!Le){Ie.error("Please choose a Super Agent");return}try{const{data:Ke,error:en}=await ne.from("ai_profiles").insert([{org_id:Ug,name:h.trim(),description:null,system_prompt:"",welcome_message:"",transfer_conditions:"",stop_ai_after_handoff:!0,model_id:A,super_agent_id:Le}]).select("id, name, created_at, model_id, super_agent_id").single();if(en)throw en;const ut={id:Ke==null?void 0:Ke.id,name:(Ke==null?void 0:Ke.name)||h.trim(),initials:((Ke==null?void 0:Ke.name)||h.trim()).split(" ").map($t=>$t.charAt(0)).join("").toUpperCase().slice(0,2),creator:"Admin",created_at:(Ke==null?void 0:Ke.created_at)||new Date().toISOString(),modelId:(Ke==null?void 0:Ke.model_id)||A,modelName:((le=x.find($t=>$t.id===((Ke==null?void 0:Ke.model_id)||A)))==null?void 0:le.display_name)||void 0,provider:((Ze=x.find($t=>$t.id===((Ke==null?void 0:Ke.model_id)||A)))==null?void 0:Ze.provider)||null,superAgentId:(Ke==null?void 0:Ke.super_agent_id)||Le,superAgentName:void 0};t(ut),d(!1),m(""),v("customer-service"),ge(null),Ie.success("AI agent created successfully"),me(),te()}catch(Ke){console.error("Create AI Agent failed:",Ke),Ie.error((Ke==null?void 0:Ke.message)||"Failed to create AI agent")}},wt=p.useRef(!1),xe=p.useCallback(async()=>{try{k(!0),S(null);const{data:le,error:Ze}=await ne.from("ai_models").select("id, display_name, model_name, provider, cost_per_1m_tokens, is_active").eq("is_active",!0).order("display_name",{ascending:!0});if(Ze)throw Ze;const Ke=le||[],en=Ke.filter(ut=>(ut.display_name||"").toLowerCase()!=="fallback"),_t=Ke.filter(ut=>(ut.display_name||"").toLowerCase()==="fallback");y(en),w(_t),wt.current||(en.length>0&&N(ut=>ut||en[0].id),_t.length>0&&I(ut=>ut||_t[0].id),wt.current=!0)}catch(le){console.error("Error loading AI models:",le),S("Failed to load AI models"),Ie.error("Failed to load AI models")}finally{k(!1)}},[]);if(p.useEffect(()=>{xe()},[xe]),p.useEffect(()=>{me()},[]),e)return i.jsx(sIe,{agentName:e.name,onBack:()=>{t(null),me(),te()},profileId:e.id==="new"?void 0:e.id,initialModelId:e.modelId||void 0});if(a)return i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Gt,{className:"w-8 h-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading AI agents..."})]});const _e=n.length,Me=Fe.length?Fe:[];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"AI Agents"}),i.jsxs("div",{className:"text-muted-foreground max-w-2xl mx-auto",children:[i.jsx("p",{children:"Ini adalah halaman di mana Anda dapat mengunjungi AI yang telah Anda buat sebelumnya."}),i.jsx("p",{children:"Jangan ragu untuk membuat perubahan dan membuat chatbot sebanyak yang Anda inginkan kapan saja!"})]})]}),c&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",c]}),i.jsx(Q,{variant:"outline",size:"sm",className:"mt-2",onClick:me,children:"Retry"})]}),i.jsxs("div",{className:"grid gap-3 rounded-lg border bg-card p-4 md:flex md:items-center md:justify-between",children:[i.jsxs("div",{className:"relative w-full md:w-72",children:[i.jsx(fs,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Ve,{value:F,onChange:le=>E(le.target.value),placeholder:"Search AI agents...",className:"pl-9"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs(Bt,{value:B,onValueChange:R,children:[i.jsx(Mt,{className:"w-[160px] bg-background border",children:i.jsx(It,{placeholder:"Provider"})}),i.jsxs(Dt,{className:"bg-background border z-50",children:[i.jsx($e,{value:"all",children:"All providers"}),Me.map(le=>i.jsx($e,{value:le,children:le==="unknown"?"Unknown":Cu(le)},le))]})]}),i.jsxs(Bt,{value:L,onValueChange:$,children:[i.jsx(Mt,{className:"w-[160px] bg-background border",children:i.jsx(It,{placeholder:"AI model"})}),i.jsxs(Dt,{className:"bg-background border z-50",children:[i.jsx($e,{value:"all",children:"All models"}),He.map(([le,Ze])=>i.jsx($e,{value:le,children:Ze},le))]})]}),i.jsxs(Bt,{value:C,onValueChange:le=>U(le),children:[i.jsx(Mt,{className:"w-[150px] bg-background border",children:i.jsx(It,{placeholder:"Sort"})}),i.jsxs(Dt,{className:"bg-background border z-50",children:[i.jsx($e,{value:"newest",children:"Newest first"}),i.jsx($e,{value:"oldest",children:"Oldest first"}),i.jsx($e,{value:"az",children:"Name AZ"})]})]})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",_e," of ",H," agents"]}),o&&!a&&i.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Updating list"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ae,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-primary",children:H}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total AI Agents"})]}),i.jsxs(Ae,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:_e}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Matching Filters"})]}),i.jsxs(Ae,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Y?Y.toLocaleDateString():"N/A"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Last Created"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.map(le=>i.jsx(oIe,{agent:le,onSettings:t,onDelete:Ue},le.id)),i.jsx(Kt,{permission:"ai_profiles.create",children:i.jsx(lIe,{onClick:Ut})})]}),_e===0&&!a&&H===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center",children:i.jsx(gs,{className:"w-12 h-12 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No AI Agents Yet"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first AI agent to get started with automated customer support."}),i.jsxs(Q,{onClick:Ut,children:[i.jsx(gs,{className:"w-4 h-4 mr-2"}),"Create Your First AI Agent"]})]}),_e===0&&!a&&H>0&&i.jsx("div",{className:"rounded-lg border border-dashed p-6 text-center text-sm text-muted-foreground",children:"No AI agents match your current filters. Try adjusting the search or filter settings above."}),i.jsx(Kt,{permission:"ai_profiles.create",children:i.jsx(mn,{open:f,onOpenChange:d,children:i.jsxs(cn,{className:"sm:max-w-[425px]",children:[i.jsx(un,{children:i.jsx(dn,{className:"text-xl font-semibold",children:"Create New AI Agent"})}),i.jsxs("div",{className:"space-y-6 pt-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Name"}),i.jsx(Ve,{placeholder:"Enter AI name",value:h,onChange:le=>m(le.target.value),className:"w-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Super Agent *"}),i.jsxs(os,{open:be,onOpenChange:Se,children:[i.jsx(ls,{asChild:!0,children:i.jsx(Q,{variant:"outline",role:"combobox",className:"w-full justify-between",children:(()=>{const le=oe.find(Ze=>Ze.primaryRole==="super_agent"&&Ze.user_id===Le);return(le==null?void 0:le.display_name)||(le==null?void 0:le.email)||Le||"Choose a super agent"})()})}),i.jsx(Mi,{className:"w-[360px] p-0",children:i.jsxs(Oc,{children:[i.jsx(Ic,{placeholder:"Search super agents..."}),i.jsx(Rc,{children:"No super agents found."}),i.jsx(Mc,{children:oe.filter(le=>le.primaryRole==="super_agent").map(le=>i.jsx(Dc,{onSelect:()=>{ge(le.user_id),Se(!1)},children:i.jsx("span",{className:"ml-2",children:le.display_name||le.email||le.user_id.slice(0,8)})},le.user_id))})]})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Assign a super agent who will own and manage this AI agent."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Template"}),i.jsxs(Bt,{value:g,onValueChange:v,children:[i.jsx(Mt,{className:"w-full",children:i.jsx(It,{placeholder:"Select a template"})}),i.jsx(Dt,{})]}),g==="customer-service"&&i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"and sales inquiries for your business."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"AI Model"}),i.jsxs(Bt,{value:A,onValueChange:N,disabled:j||x.length===0,children:[i.jsx(Mt,{className:"w-full py-3",children:A?(()=>{const le=x.find(Ze=>Ze.id===A);return le?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[le.display_name||"Custom","  ",Bg(le.cost_per_1m_tokens),"  ",Cu(le.provider)]})}):i.jsx(It,{placeholder:j?"Loading models...":"Select an AI model"})})():i.jsx(It,{placeholder:j?"Loading models...":"Select an AI model"})}),i.jsx(Dt,{side:"bottom",align:"start",sideOffset:4,children:x.map(le=>i.jsx($e,{value:le.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm font-medium",children:[i.jsx("span",{children:le.display_name||"Custom"}),i.jsx("span",{className:"text-muted-foreground",children:Bg(le.cost_per_1m_tokens)})]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:le.description||"No description available"}),i.jsxs("span",{className:"text-[11px] font-mono text-muted-foreground",children:[le.model_name,"  ",Cu(le.provider)]})]})},le.id))})]}),_&&i.jsx("p",{className:"text-xs text-destructive",children:_})]}),b.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Fallback Model"}),i.jsxs(Bt,{value:T,onValueChange:I,disabled:j||b.length===0,children:[i.jsx(Mt,{className:"w-full py-3",children:T?(()=>{const le=b.find(Ze=>Ze.id===T);return le?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[le.display_name||"Custom","  ",Bg(le.cost_per_1m_tokens),"  ",Cu(le.provider)]})}):i.jsx(It,{placeholder:j?"Loading models...":"Select a fallback model"})})():i.jsx(It,{placeholder:j?"Loading models...":"Select a fallback model"})}),i.jsx(Dt,{side:"bottom",align:"start",sideOffset:4,children:b.map(le=>i.jsx($e,{value:le.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm font-medium",children:[i.jsx("span",{children:le.display_name||"Custom"}),i.jsx("span",{className:"text-muted-foreground",children:Bg(le.cost_per_1m_tokens)})]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:le.description||"No description available"}),i.jsxs("span",{className:"text-[11px] font-mono text-muted-foreground",children:[le.model_name,"  ",Cu(le.provider)]})]})},le.id))})]})]}),i.jsx(Q,{onClick:bt,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:!h.trim()||!A||!Le,children:"Create AI Agent"})]})]})})})]}),i.jsx(vb,{open:!!ee,onOpenChange:le=>{!le&&!ae&&X(null)},children:i.jsxs(Cp,{children:[i.jsxs(Ap,{children:[i.jsx(Pp,{children:"Delete AI Agent?"}),i.jsx(Tp,{children:ee?`Are you sure you want to delete "${ee.name}"? This action cannot be undone.`:"Are you sure you want to delete this AI agent?"})]}),i.jsxs(Ep,{children:[i.jsx(Ip,{disabled:ae,children:"Cancel"}),i.jsx(Op,{onClick:he,disabled:ae,className:"bg-destructive hover:bg-destructive/90 focus:ring-destructive/50",children:ae?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})},Pq=({className:e,...t})=>i.jsx("nav",{role:"navigation","aria-label":"pagination",className:ye("mx-auto flex w-full justify-center",e),...t});Pq.displayName="Pagination";const Tq=p.forwardRef(({className:e,...t},n)=>i.jsx("ul",{ref:n,className:ye("flex flex-row items-center gap-1",e),...t}));Tq.displayName="PaginationContent";const mv=p.forwardRef(({className:e,...t},n)=>i.jsx("li",{ref:n,className:ye("",e),...t}));mv.displayName="PaginationItem";const _A=({className:e,isActive:t,size:n="icon",...r})=>i.jsx("a",{"aria-current":t?"page":void 0,className:ye(kd({variant:t?"outline":"ghost",size:n}),e),...r});_A.displayName="PaginationLink";const Oq=({className:e,...t})=>i.jsxs(_A,{"aria-label":"Go to previous page",size:"default",className:ye("gap-1 pl-2.5",e),...t,children:[i.jsx(JS,{className:"h-4 w-4"}),i.jsx("span",{children:"Previous"})]});Oq.displayName="PaginationPrevious";const Iq=({className:e,...t})=>i.jsxs(_A,{"aria-label":"Go to next page",size:"default",className:ye("gap-1 pr-2.5",e),...t,children:[i.jsx("span",{children:"Next"}),i.jsx(Ay,{className:"h-4 w-4"})]});Iq.displayName="PaginationNext";const uIe=()=>{const[e,t]=p.useState(!1),[n,r]=p.useState(!1),[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState(!1),[f,d]=p.useState({enabled:!1,perDay:0,perMonth:0,twoFA:!1}),[h,m]=p.useState("7d"),[g,v]=p.useState("7d"),[x,y]=p.useState(null),[b,w]=p.useState(!1),[j,k]=p.useState(null),[_,S]=p.useState({}),[A,N]=p.useState(!1),[T,I]=p.useState(null),[F,E]=p.useState({name:"",email:"",role:"agent"}),[O,M]=p.useState(!1),[B,R]=p.useState(!1),[L,$]=p.useState(null),[C,U]=p.useState(!1),[D,P]=p.useState(!1),[H,G]=p.useState(null),{toast:Y}=Vc(),W=p.useRef(null),{hasPermission:ee,hasRole:X}=jr(),[ae,re]=p.useState([]),[J,ve]=p.useState([]),[z,q]=p.useState(0),[ie,oe]=p.useState(0),[be,Se]=p.useState(1),[Le,ge]=p.useState(1),[We,dt]=p.useState(10),[yt,Et]=p.useState(10),[te,me]=p.useState(!1),[Fe,He]=p.useState(!1),[Ue,he]=p.useState("active"),[Ut,bt]=p.useState({}),[wt,xe]=p.useState(null),[_e,Me]=p.useState(""),[le,Ze]=p.useState(""),[Ke,en]=p.useState("all"),[_t,ut]=p.useState("all"),[$t,ze]=p.useState("all");p.useEffect(()=>{const we=setTimeout(()=>Ze(_e.trim()),300);return()=>clearTimeout(we)},[_e]),p.useEffect(()=>{!X(nr.MASTER_AGENT)&&F.role==="super_agent"&&E({...F,role:"agent"})},[X,F.role]);const se=we=>we.replace(/[%_\\]/g,ot=>`\\${ot}`).replace(/'/g,"''"),Ne=F.name.trim()&&F.email.trim()&&(F.role!=="agent"||L),{agents:Re,loading:et,error:pt,fetchAgents:Z,createAgent:ke,updateAgentStatus:st,updateAgentRole:nt,deleteAgent:Lt,setEnable2FAFlagForCreate:Rn}=El();p.useEffect(()=>{pt&&pt!==W.current&&(Y({title:"Error",description:pt,variant:"destructive"}),W.current=pt),pt||(W.current=null)},[pt,Y]);const Cn=we=>{if(!we)return null;const ot=String(we).toLowerCase();return ot.includes("master")?"master_agent":ot.includes("super")?"super_agent":ot.includes("agent")?"agent":null},An=async({invited:we,page:ot,pageSize:ht,search:K,role:fe,activeStatus:Ce,pendingStatus:rt})=>{try{we?He(!0):me(!0);const Te=(ot-1)*ht,lt=Te+ht-1;let Xe=ne.from("v_human_agents").select("*",{count:"exact"});const jt=K?se(K):"";if(jt&&(Xe=Xe.or(`agent_name.ilike.%${jt}%,email.ilike.%${jt}%`)),fe&&fe!=="all"){const vr=fe==="master_agent"?"%master%":fe==="super_agent"?"%super%":"%agent%";Xe=Xe.ilike("role_name",vr)}const ct=X(nr.MASTER_AGENT);if(X(nr.SUPER_AGENT)){if(!T){we?He(!1):me(!1);return}try{let vr=ne.from("super_agent_members").select("agent_user_id").eq("super_agent_id",T);wt&&(vr=vr.eq("org_id",wt));const{data:on}=await vr,xn=[T,...(on||[]).map(gt=>String(gt.agent_user_id)).filter(Boolean)];xn.length>0?Xe=Xe.in("user_id",xn):Xe=Xe.eq("user_id",T)}catch{Xe=Xe.eq("user_id",T)}}else if(!ct){we?(ve([]),oe(0),He(!1)):(re([]),q(0),me(!1));return}we?rt==="expired"?Xe=Xe.eq("confirmation_status","expired"):rt==="invited"?Xe=Xe.or("confirmation_status.is.null,confirmation_status.eq.invited,confirmation_status.eq.pending"):Xe=Xe.or("confirmation_status.is.null,confirmation_status.neq.accepted"):(Xe=Xe.eq("confirmation_status","accepted"),Ce&&Ce!=="all"&&(Xe=Xe.eq("is_active",Ce==="active")));const{data:rn,count:ca,error:ua}=await Xe.order("agent_name",{ascending:!0}).range(Te,lt);if(ua)throw ua;if(we)ve(rn||[]),oe(ca||0);else{const vr=rn||[];re(vr),q(ca||0);try{const on=vr.filter(xn=>String((xn==null?void 0:xn.role_name)||"").toLowerCase()==="agent").map(xn=>xn.user_id);if(on.length>0){let xn=ne.from("super_agent_members").select("agent_user_id, super_agent_id").in("agent_user_id",on);wt&&(xn=xn.eq("org_id",wt));const{data:gt}=await xn,Jn={};(gt||[]).forEach(mt=>{mt!=null&&mt.agent_user_id&&(Jn[String(mt.agent_user_id)]=String(mt.super_agent_id||""))}),bt(Jn)}else bt({})}catch{bt({})}}}catch(Te){Y({title:"Error",description:(Te==null?void 0:Te.message)||"Failed to fetch agents",variant:"destructive"}),we?(ve([]),oe(0)):(re([]),q(0))}finally{we?He(!1):me(!1)}};p.useEffect(()=>{An({invited:!1,page:be,pageSize:We,search:le,role:Ke,activeStatus:_t})},[be,We,le,Ke,_t]),p.useEffect(()=>{be!==1&&Se(1)},[le,Ke,_t]),p.useEffect(()=>{Ue==="pending"&&An({invited:!0,page:Le,pageSize:yt,search:le,role:Ke,pendingStatus:$t})},[Ue,Le,yt,le,Ke,$t]),p.useEffect(()=>{Ue==="pending"&&Le!==1&&ge(1)},[le,Ke,$t,Ue]);const yi=(we,ot,ht,K,fe,Ce,rt,Te,lt)=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"rounded-lg border bg-card",children:[i.jsxs("div",{className:`grid gap-4 p-4 border-b bg-muted/50 font-medium text-sm ${Te?"grid-cols-[240px,1fr,220px,120px,160px]":"grid-cols-[240px,1fr,220px,160px,120px,120px]"}`,children:[i.jsx("div",{children:"Agent Name"}),i.jsx("div",{children:"Email"}),i.jsx("div",{children:"Role"}),!Te&&i.jsx("div",{children:"Token Usage"}),i.jsx("div",{children:"Status"}),i.jsx("div",{children:"Action"})]}),i.jsx("div",{className:"divide-y",children:ot?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Gt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Loading agents..."})]})}):we.length===0?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(eN,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),i.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["No ",Te?"Pending":"Active"," Agents"]}),i.jsx("p",{className:"text-muted-foreground",children:Te?"Invited users will appear here until they sign in.":"Create your first agent to get started."})]})}):!Te&&lt?(()=>{const Xe=gt=>String(gt||"").toLowerCase(),jt=gt=>Xe(gt.role_name).includes("master"),ct=gt=>Xe(gt.role_name).includes("super"),ft=gt=>{const Jn=Xe(gt.role_name);return Jn==="agent"||Jn==="agent_only"},rn=we.filter(jt),ca=we.filter(ct),ua=we.filter(ft),vr=Object.fromEntries(ca.map(gt=>[String(gt.user_id),gt])),on={},xn=[];for(const gt of ua){const Jn=lt[String(gt.user_id)];Jn&&vr[Jn]?(on[Jn]=on[Jn]||[]).push(gt):xn.push(gt)}return i.jsxs(i.Fragment,{children:[rn.map(gt=>{const Jn="master_agent",mt={user_id:String(gt.user_id),email:gt.email||"",display_name:gt.agent_name||gt.email||"Unknown",avatar_url:gt.avatar_url||null,timezone:null,created_at:"",roles:[Jn],primaryRole:Jn,status:gt.is_active?"Active":"Inactive",super_agent_id:null};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-blue-50/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zr,{className:"h-8 w-8",children:i.jsx(qr,{className:"text-xs bg-blue-100 text-blue-700",children:Ll(mt.display_name||"U")})}),i.jsx("span",{className:"font-medium text-blue-600",children:mt.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:mt.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(Ot,{className:`text-xs ${jo(mt.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Master Agent"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(_u,{children:[i.jsx(ku,{asChild:!0,children:i.jsxs(Q,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:mt.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${wo(mt.status)}`}),i.jsx("span",{className:"text-xs",children:mt.status}),mt.primaryRole!=="master_agent"&&i.jsx(xa,{className:"h-3 w-3"})]})}),i.jsxs(ec,{className:"bg-background border z-50",children:[i.jsx(Za,{onClick:()=>Ga(mt.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(Za,{onClick:()=>Ga(mt.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Kt,{permission:"users_profile.update_token_limit",children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Ss(mt),title:"Edit limits",children:i.jsx(ga,{className:"h-4 w-4"})})}),X(nr.MASTER_AGENT)&&i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>$l(mt),title:"View token usage",children:i.jsx(Of,{className:"h-4 w-4"})}),mt.primaryRole!=="master_agent"&&i.jsx(Kt,{permission:"super_agents.delete",children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{G(mt),U(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]},`master-${gt.user_id}`)}),ca.map(gt=>{const Jn="super_agent",mt={user_id:String(gt.user_id),email:gt.email||"",display_name:gt.agent_name||gt.email||"Unknown",avatar_url:gt.avatar_url||null,timezone:null,created_at:"",roles:[Jn],primaryRole:Jn,status:gt.is_active?"Active":"Inactive",super_agent_id:null},Wp=on[String(gt.user_id)]||[];return i.jsxs("div",{className:"",children:[i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-green-50/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zr,{className:"h-8 w-8",children:i.jsx(qr,{className:"text-xs bg-green-100 text-green-700",children:Ll(mt.display_name||"U")})}),i.jsx("span",{className:"font-medium text-green-600",children:mt.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:mt.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(Ot,{className:`text-xs ${jo(mt.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Super Agent"})}),i.jsx("div",{className:"text-sm font-medium",children:A?"":(_[mt.user_id]??0).toLocaleString()}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(_u,{children:[i.jsx(ku,{asChild:!0,children:i.jsxs(Q,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:mt.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${wo(mt.status)}`}),i.jsx("span",{className:"text-xs",children:mt.status}),mt.primaryRole!=="master_agent"&&i.jsx(xa,{className:"h-3 w-3"})]})}),i.jsxs(ec,{className:"bg-background border z-50",children:[i.jsx(Za,{onClick:()=>Ga(mt.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(Za,{onClick:()=>Ga(mt.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Kt,{permission:"users_profile.update_token_limit",children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Ss(mt),title:"Edit limits",children:i.jsx(ga,{className:"h-4 w-4"})})}),X(nr.MASTER_AGENT)&&i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>$l(mt),title:"View token usage",children:i.jsx(Of,{className:"h-4 w-4"})}),mt.primaryRole!=="master_agent"&&i.jsx(Kt,{permission:"super_agents.delete",children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{G(mt),U(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]}),Wp.map(da=>{const Fl="agent",Ir={user_id:String(da.user_id),email:da.email||"",display_name:da.agent_name||da.email||"Unknown",avatar_url:da.avatar_url||null,timezone:null,created_at:"",roles:[Fl],primaryRole:Fl,status:da.is_active?"Active":"Inactive",super_agent_id:mt.user_id};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-gray-50/30 pl-12",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 border-l-2 border-b-2 border-gray-300 rounded-bl"})}),i.jsx(zr,{className:"h-8 w-8",children:i.jsx(qr,{className:"text-xs bg-gray-100 text-gray-700",children:Ll(Ir.display_name||"U")})}),i.jsx("span",{className:"font-medium text-gray-600",children:Ir.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:Ir.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(Ot,{className:`text-xs ${jo(Ir.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Agent"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(_u,{children:[i.jsx(ku,{asChild:!0,children:i.jsxs(Q,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:Ir.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${wo(Ir.status)}`}),i.jsx("span",{className:"text-xs",children:Ir.status}),Ir.primaryRole!=="master_agent"&&i.jsx(xa,{className:"h-3 w-3"})]})}),i.jsxs(ec,{className:"bg-background border z-50",children:[i.jsx(Za,{onClick:()=>Ga(Ir.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(Za,{onClick:()=>Ga(Ir.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Kt,{permission:"users_profile.update_token_limit",children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Ss(Ir),title:"Edit limits",children:i.jsx(ga,{className:"h-4 w-4"})})}),X(nr.MASTER_AGENT)&&i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>$l(Ir),title:"View token usage",children:i.jsx(Of,{className:"h-4 w-4"})}),Ir.primaryRole!=="master_agent"&&i.jsx(Kt,{permission:"super_agents.delete",children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{G(Ir),U(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]},`agent-${da.user_id}`)})]},`super-${gt.user_id}`)}),xn.map(gt=>{const Jn="agent",mt={user_id:String(gt.user_id),email:gt.email||"",display_name:gt.agent_name||gt.email||"Unknown",avatar_url:gt.avatar_url||null,timezone:null,created_at:"",roles:[Jn],primaryRole:Jn,status:gt.is_active?"Active":"Inactive",super_agent_id:null};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-orange-50/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zr,{className:"h-8 w-8",children:i.jsx(qr,{className:"text-xs bg-orange-100 text-orange-700",children:Ll(mt.display_name||"U")})}),i.jsx("span",{className:"font-medium text-orange-600",children:mt.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:mt.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(Ot,{className:`text-xs ${jo(mt.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Agent (Unassigned)"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(_u,{children:[i.jsx(ku,{asChild:!0,children:i.jsxs(Q,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:mt.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${wo(mt.status)}`}),i.jsx("span",{className:"text-xs",children:mt.status}),mt.primaryRole!=="master_agent"&&i.jsx(xa,{className:"h-3 w-3"})]})}),i.jsxs(ec,{className:"bg-background border z-50",children:[i.jsx(Za,{onClick:()=>Ga(mt.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(Za,{onClick:()=>Ga(mt.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Kt,{permission:"users_profile.update_token_limit",children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Ss(mt),title:"Edit limits",children:i.jsx(ga,{className:"h-4 w-4"})})}),X(nr.MASTER_AGENT)&&i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>$l(mt),title:"View token usage",children:i.jsx(Of,{className:"h-4 w-4"})}),mt.primaryRole!=="master_agent"&&i.jsx(Kt,{permission:"super_agents.delete",children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{G(mt),U(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]},`unassigned-${gt.user_id}`)})]})})():we.map(Xe=>{const jt=Cn(Xe.role_name),ct={user_id:String(Xe.user_id),email:Xe.email||"",display_name:Xe.agent_name||Xe.email||"Unknown",avatar_url:Xe.avatar_url||null,timezone:null,created_at:"",roles:jt?[jt]:[],primaryRole:jt,status:Xe.is_active?"Active":"Inactive",super_agent_id:null},ft=String(Xe.confirmation_status||"").toLowerCase()==="expired";return i.jsxs("div",{className:`grid gap-4 p-4 items-center hover:bg-muted/30 transition-colors ${Te?"grid-cols-[240px,1fr,220px,120px,160px]":"grid-cols-[240px,1fr,220px,160px,120px,120px]"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zr,{className:"h-8 w-8",children:i.jsx(qr,{className:"text-xs",children:Ll(ct.display_name||"U")})}),i.jsx("span",{className:"font-medium",children:ct.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:ct.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(Ot,{className:`text-xs ${jo(ct.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:ct.primaryRole==="master_agent"?"Master Agent":ct.primaryRole==="super_agent"?"Super Agent":"Agent"})}),!Te&&i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:Te?i.jsx(Ot,{className:`text-xs leading-none h-6 px-2 inline-flex items-center ${ft?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:ft?"Expired":"Invited"}):i.jsxs(_u,{children:[i.jsx(ku,{asChild:!0,children:i.jsxs(Q,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:ct.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${wo(ct.status)}`}),i.jsx("span",{className:"text-xs",children:ct.status}),ct.primaryRole!=="master_agent"&&i.jsx(xa,{className:"h-3 w-3"})]})}),i.jsxs(ec,{className:"bg-background border z-50",children:[i.jsx(Za,{onClick:()=>Ga(ct.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(Za,{onClick:()=>Ga(ct.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[!Te&&i.jsx(Kt,{permission:"users_profile.update_token_limit",children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Ss(ct),title:"Edit limits",children:i.jsx(ga,{className:"h-4 w-4"})})}),X(nr.MASTER_AGENT)&&!Te&&i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>$l(ct),title:"View token usage",children:i.jsx(Of,{className:"h-4 w-4"})}),Te?i.jsxs(i.Fragment,{children:[ft&&i.jsx(Kt,{permission:"super_agents.create",children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-blue-600 hover:bg-blue-700 text-white",onClick:async()=>{try{await ne.functions.invoke("admin-create-user",{body:{email:ct.email,full_name:ct.display_name,role:ct.primaryRole||"agent",reinvite:!0}}),Y({title:"Reinvite sent",description:`${ct.email}`}),An({invited:!0,page:K,pageSize:fe})}catch(rn){Y({title:"Error",description:(rn==null?void 0:rn.message)||"Failed to reinvite",variant:"destructive"})}},title:"Reinvite user",children:i.jsx(GL,{className:"h-4 w-4"})})}),ct.primaryRole!=="master_agent"&&i.jsx(Kt,{permission:"super_agents.delete",children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{G(ct),U(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]}):ct.primaryRole!=="master_agent"&&i.jsx(Kt,{permission:"super_agents.delete",children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{G(ct),U(!0)},children:i.jsx(Ar,{className:"h-4 w-4"})})})]})]},Xe.user_id)})})]}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:ht>0?i.jsxs("span",{children:["Showing ",Math.min((K-1)*fe+1,ht),"",Math.min(K*fe,ht)," of ",ht]}):i.jsx("span",{children:"0 results"})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx(Be,{className:"text-sm text-muted-foreground",children:"Rows"}),i.jsxs(Bt,{value:String(fe),onValueChange:Xe=>rt(Number(Xe)),children:[i.jsx(Mt,{className:"h-8 w-[100px] bg-background border",children:i.jsx(It,{})}),i.jsxs(Dt,{className:"bg-background border z-50",children:[i.jsx($e,{value:"10",children:"10"}),i.jsx($e,{value:"20",children:"20"}),i.jsx($e,{value:"50",children:"50"})]})]})]}),i.jsx(Pq,{children:i.jsxs(Tq,{children:[i.jsx(mv,{children:i.jsx(Oq,{className:K<=1?"pointer-events-none opacity-50":"",onClick:()=>K>1&&Ce(K-1),href:"#"})}),i.jsx(mv,{children:i.jsxs("span",{className:"text-sm text-muted-foreground px-2",children:["Page ",K," of ",Math.max(1,Math.ceil((ht||0)/Math.max(1,fe)))]})}),i.jsx(mv,{children:i.jsx(Iq,{className:K>=Math.max(1,Math.ceil((ht||0)/Math.max(1,fe)))?"pointer-events-none opacity-50":"",onClick:()=>K<Math.max(1,Math.ceil((ht||0)/Math.max(1,fe)))&&Ce(K+1),href:"#"})})]})})]})]})]}),Gr=async()=>{var we,ot;if(!F.name||!F.email){Y({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}if(F.role==="agent"&&!L){Y({title:"Error",description:"Please select a Super Agent for this agent",variant:"destructive"});return}try{R(!0),Rn(O);let ht=wt||null;if(!ht)try{const{data:fe}=await ne.auth.getUser(),{data:Ce}=await ne.from("org_members").select("org_id").eq("user_id",((we=fe==null?void 0:fe.user)==null?void 0:we.id)||"").limit(1);ht=((ot=Ce==null?void 0:Ce[0])==null?void 0:ot.org_id)||null}catch{}const K=await ke({full_name:F.name,email:F.email,role:F.role,super_agent_id:F.role==="agent"&&L||null,org_id:ht});E({name:"",email:"",role:"agent"}),$(null),M(!1),t(!1),Y({title:"Success",description:"Agent created successfully"})}catch(ht){Y({title:"Error",description:ht instanceof Error?ht.message:"Failed to create agent",variant:"destructive"})}finally{R(!1)}},Dl=async we=>{var ot,ht,K;try{if((H==null?void 0:H.primaryRole)==="master_agent"||(K=(ht=(ot=ae.find(fe=>String(fe.user_id)===we))==null?void 0:ot.role_name)==null?void 0:ht.toLowerCase)!=null&&K.call(ht).includes("master")){Y({title:"Error",description:"Master agent tidak dapat dihapus.",variant:"destructive"}),U(!1),G(null);return}P(!0),await Lt(we),Y({title:"Success",description:"Agent deleted successfully"}),U(!1),G(null),Ue==="pending"?J.length<=1&&Le>1?ge(fe=>Math.max(1,fe-1)):await An({invited:!0,page:Le,pageSize:yt,search:le,role:Ke,pendingStatus:$t}):ae.length<=1&&be>1?Se(fe=>Math.max(1,fe-1)):await An({invited:!1,page:be,pageSize:We,search:le,role:Ke,activeStatus:_t})}catch(fe){Y({title:"Error",description:fe instanceof Error?fe.message:"Failed to delete agent",variant:"destructive"})}finally{P(!1)}},Ss=async we=>{try{l(we);const{data:ot,error:ht}=await ne.from("users_profile").select("token_limit_enabled, max_tokens_per_day, max_tokens_per_month, is_2fa_email_enabled").eq("user_id",we.user_id).maybeSingle();if(ht)throw ht;d({enabled:!!(ot!=null&&ot.token_limit_enabled),perDay:Number((ot==null?void 0:ot.max_tokens_per_day)??0),perMonth:Number((ot==null?void 0:ot.max_tokens_per_month)??0),twoFA:!!(ot!=null&&ot.is_2fa_email_enabled)}),r(!0)}catch(ot){Y({title:"Error",description:(ot==null?void 0:ot.message)||"Failed to load token limits",variant:"destructive"})}},xo=async()=>{if(o)try{u(!0);const{error:we}=await ne.from("users_profile").update({token_limit_enabled:f.enabled,max_tokens_per_day:Math.max(0,Math.floor(f.perDay||0)),max_tokens_per_month:Math.max(0,Math.floor(f.perMonth||0)),is_2fa_email_enabled:f.twoFA}).eq("user_id",o.user_id);if(we)throw we;Y({title:"Saved",description:"Token limits updated."}),r(!1)}catch(we){Y({title:"Error",description:(we==null?void 0:we.message)||"Failed to save token limits",variant:"destructive"})}finally{u(!1)}},yo=we=>{const ot=new Date;let ht;if(we==="this_month")ht=new Date(Date.UTC(ot.getUTCFullYear(),ot.getUTCMonth(),1,0,0,0));else{const fe=we==="7d"?7:30;ht=new Date(Date.UTC(ot.getUTCFullYear(),ot.getUTCMonth(),ot.getUTCDate(),0,0,0)),ht.setUTCDate(ht.getUTCDate()-(fe-1))}const K=ot;return{start:ht.toISOString(),end:K.toISOString()}},bo=async we=>{try{N(!0);const ot=w0.filter(fe=>fe.primaryRole==="super_agent").map(fe=>fe.user_id);if(ot.length===0){S({});return}let ht={};if(we==="all")try{const{data:fe}=await ne.from("v_super_agent_token_usage").select("super_agent_id,total_tokens");for(const Ce of fe||[]){const rt=String(Ce.super_agent_id||"");rt&&(ht[rt]=Number(Ce.total_tokens||0))}}catch{}else{const{start:fe,end:Ce}=yo(we),{data:rt}=await ne.from("token_usage_logs").select("id,channel_id,total_tokens,made_at").gte("made_at",fe).lt("made_at",Ce),Te=Array.from(new Set((rt||[]).map(jt=>jt.channel_id).filter(Boolean)));let lt={};if(Te.length>0){const{data:jt}=await ne.from("channels").select("id,super_agent_id").in("id",Te);lt=Object.fromEntries((jt||[]).map(ct=>[String(ct.id),String(ct.super_agent_id||"")]))}const Xe=new Set;for(const jt of rt||[]){const ct=String(jt.id);if(Xe.has(ct))continue;Xe.add(ct);const ft=String(jt.channel_id||""),rn=ft&&lt[ft]||"";rn&&(ht[rn]=(ht[rn]||0)+Number(jt.total_tokens||0))}}const K={};for(const fe of ot)K[fe]=ht[fe]||0;S(K)}catch(ot){Y({title:"Error",description:(ot==null?void 0:ot.message)||"Failed to load usage",variant:"destructive"})}finally{N(!1)}};p.useEffect(()=>{Re.length>0&&bo(h)},[Re,h]),p.useEffect(()=>{(async()=>{var we,ot;try{const{data:ht}=await ne.auth.getUser();I(((we=ht==null?void 0:ht.user)==null?void 0:we.id)||null);try{const{data:K}=await ne.from("org_members").select("org_id").eq("user_id",((ot=ht==null?void 0:ht.user)==null?void 0:ot.id)||"").limit(1).maybeSingle();xe((K==null?void 0:K.org_id)||null)}catch{}}catch{}})()},[]),p.useEffect(()=>{T&&(An({invited:!1,page:be,pageSize:We}),Ue==="pending"&&An({invited:!0,page:Le,pageSize:yt}))},[T]);const ru=()=>X(nr.MASTER_AGENT)?Re:X(nr.SUPER_AGENT)?T?Re.filter(we=>we.primaryRole==="super_agent"&&we.user_id===T||we.primaryRole==="agent"&&we.super_agent_id===T):[]:[],w0=p.useMemo(()=>ru(),[Re,X,T]),$l=async we=>{l(we),s(!0),await _f(we.user_id,g)},_f=async(we,ot)=>{var ht;try{w(!0);const{start:K,end:fe}=yo(ot),Ce=((ht=Re.find(on=>on.user_id===we))==null?void 0:ht.super_agent_id)||null,rt=Ce?Re.filter(on=>on.primaryRole==="agent"&&on.super_agent_id===Ce).map(on=>on.user_id):[we],{data:Te}=await ne.from("threads").select("id").in("assignee_user_id",rt).gte("created_at",K).lt("created_at",fe),lt=(Te||[]).map(on=>on.id),[Xe,jt]=await Promise.all([lt.length>0?ne.from("token_usage_logs").select("id,total_tokens").in("thread_id",lt).gte("made_at",K).lt("made_at",fe):Promise.resolve({data:[]}),ne.from("token_usage_logs").select("id,total_tokens").in("user_id",rt).gte("made_at",K).lt("made_at",fe)]),ct=new Set;let ft=0;for(const on of[...Xe.data||[],...jt.data||[]]){const xn=String(on.id);ct.has(xn)||(ct.add(xn),ft+=Number(on.total_tokens||0))}y(ft);const[rn,ca,ua,vr]=await Promise.all([ne.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",K).lt("created_at",fe).eq("assignee_user_id",we),ne.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",K).lt("created_at",fe).eq("assigned_by_user_id",we),ne.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",K).lt("created_at",fe).eq("resolved_by_user_id",we),ne.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",K).lt("created_at",fe).eq("assignee_user_id",we).not("ai_handoff_at","is",null)]);k({assignedTo:rn.count||0,assignedBy:ca.count||0,resolvedBy:ua.count||0,handoverFromAI:vr.count||0})}catch(K){y(null),k(null),Y({title:"Error",description:(K==null?void 0:K.message)||"Failed to load usage",variant:"destructive"})}finally{w(!1)}},Ga=async(we,ot)=>{try{const{error:ht}=await ne.from("users_profile").update({is_active:ot==="Active"}).eq("user_id",we);if(ht)throw ht;Y({title:"Success",description:`Status changed to ${ot}`}),await Z()}catch(ht){Y({title:"Error",description:(ht==null?void 0:ht.message)||"Failed to change status",variant:"destructive"})}},Ll=we=>we.split(" ").map(ot=>ot[0]).join("").toUpperCase().slice(0,2),wo=we=>we==="Active"?"bg-green-500":"bg-gray-400",jo=we=>we==="master_agent"?"bg-blue-100 text-blue-700":we==="super_agent"?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-700";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Human Agent Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your human agents"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx(Be,{className:"text-sm text-muted-foreground",children:"Usage"}),i.jsxs(Bt,{value:h,onValueChange:async we=>{const ot=we;m(ot);try{await bo(ot)}catch{}},children:[i.jsx(Mt,{className:"h-8 w-[160px] bg-background border",children:i.jsx(It,{placeholder:"Range"})}),i.jsxs(Dt,{className:"bg-background border z-50",children:[i.jsx($e,{value:"all",children:"All time"}),i.jsx($e,{value:"7d",children:"Last 7 days"}),i.jsx($e,{value:"30d",children:"Last 30 days"}),i.jsx($e,{value:"this_month",children:"This month"})]})]})]}),i.jsx(Kt,{permission:"users_profile.create",fallback:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("span",{children:i.jsxs(Q,{className:"gap-2 bg-blue-600 text-white",disabled:!0,children:[i.jsx(gs,{className:"h-4 w-4"}),"Create Agent"]})})}),i.jsx(ce,{children:i.jsx("p",{children:"You do not have permission to create agents."})})]}),children:i.jsxs(mn,{open:e,onOpenChange:t,children:[i.jsx(UN,{asChild:!0,children:i.jsxs(Q,{className:"gap-2 bg-blue-600 hover:bg-blue-700 text-white",children:[i.jsx(gs,{className:"h-4 w-4"}),"Create Agent"]})}),i.jsxs(cn,{className:"sm:max-w-md bg-background border",children:[i.jsx(un,{children:i.jsx(dn,{children:"Create New Agent"})}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"agent-name",children:["Agent Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Ve,{id:"agent-name",value:F.name,onChange:we=>E({...F,name:we.target.value}),placeholder:"Enter agent name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"agent-email",children:["Email ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Ve,{id:"agent-email",type:"email",value:F.email,onChange:we=>E({...F,email:we.target.value}),placeholder:"Enter email address"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"agent-phone",children:"Phone (Optional)"}),i.jsx(Ve,{id:"agent-phone",type:"tel",value:F.phone||"",onChange:we=>E({...F,phone:we.target.value}),placeholder:"Enter phone number"})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[i.jsx(mm,{id:"agent-2fa",checked:O,onCheckedChange:we=>M(!!we)}),i.jsx(Be,{htmlFor:"agent-2fa",className:"text-sm",children:"Enable email 2FA for this agent"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Be,{htmlFor:"agent-role",children:"Role"}),!X(nr.MASTER_AGENT)&&i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Hanya Master Agent yang dapat membuat Super Agent"})})]})]}),i.jsxs(Bt,{value:F.role,onValueChange:we=>E({...F,role:we}),children:[i.jsx(Mt,{className:"bg-background border",children:i.jsx(It,{})}),i.jsxs(Dt,{className:"bg-background border z-50",children:[i.jsx($e,{value:"agent",children:"Agent"}),X(nr.MASTER_AGENT)&&i.jsx($e,{value:"super_agent",children:"Super Agent"})]})]})]}),F.role==="agent"&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{children:["Attach to Super Agent ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs(Bt,{value:L||"",onValueChange:we=>$(we),children:[i.jsx(Mt,{className:"bg-background border",children:i.jsx(It,{placeholder:"Select Super Agent"})}),i.jsx(Dt,{className:"bg-background border z-50",children:Re.filter(we=>we.primaryRole==="super_agent").map(we=>i.jsx($e,{value:we.user_id,children:we.display_name||we.email},we.user_id))})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Fields marked with ",i.jsx("span",{className:"text-red-500",children:"*"})," are required."]}),F.role==="agent"&&i.jsx("p",{className:"mt-1",children:"Agents must be attached to a Super Agent."})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(Q,{onClick:Gr,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",disabled:B||!Ne,children:B?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"}),"Creating..."]}):"Create Agent"}),i.jsx(Q,{variant:"outline",onClick:()=>t(!1),className:"flex-1",disabled:B,children:"Cancel"})]})]})]})]})})]})]}),i.jsxs("div",{className:"grid gap-3 rounded-lg border bg-card p-4 md:flex md:items-center md:justify-between",children:[i.jsxs("div",{className:"relative w-full md:w-64",children:[i.jsx(fs,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Ve,{value:_e,onChange:we=>Me(we.target.value),placeholder:"Search name or email",className:"pl-9"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs(Bt,{value:Ke,onValueChange:we=>en(we),children:[i.jsx(Mt,{className:"w-[150px] bg-background border",children:i.jsx(It,{placeholder:"Role"})}),i.jsxs(Dt,{className:"bg-background border z-50",children:[i.jsx($e,{value:"all",children:"All roles"}),i.jsx($e,{value:"master_agent",children:"Master Agent"}),i.jsx($e,{value:"super_agent",children:"Super Agent"}),i.jsx($e,{value:"agent",children:"Agent"})]})]}),Ue==="pending"?i.jsxs(Bt,{value:$t,onValueChange:we=>ze(we),children:[i.jsx(Mt,{className:"w-[150px] bg-background border",children:i.jsx(It,{placeholder:"Invitation status"})}),i.jsxs(Dt,{className:"bg-background border z-50",children:[i.jsx($e,{value:"all",children:"All invitations"}),i.jsx($e,{value:"invited",children:"Invited"}),i.jsx($e,{value:"expired",children:"Expired"})]})]}):i.jsxs(Bt,{value:_t,onValueChange:we=>ut(we),children:[i.jsx(Mt,{className:"w-[150px] bg-background border",children:i.jsx(It,{placeholder:"Status"})}),i.jsxs(Dt,{className:"bg-background border z-50",children:[i.jsx($e,{value:"all",children:"All statuses"}),i.jsx($e,{value:"active",children:"Active"}),i.jsx($e,{value:"inactive",children:"Inactive"})]})]})]})]}),i.jsxs(pl,{value:Ue,onValueChange:we=>he(we),className:"space-y-6",children:[i.jsxs(so,{className:"grid w-full max-w-md grid-cols-2",children:[i.jsxs(Gn,{value:"active",className:"gap-2",children:[i.jsx(ZV,{className:"h-4 w-4"}),"Active"]}),i.jsxs(Gn,{value:"pending",className:"gap-2",children:[i.jsx(eK,{className:"h-4 w-4"}),"Pending"]})]}),i.jsx(Dn,{value:"active",className:"space-y-4",children:yi(ae,te||et,z,be,We,Se,dt,!1,Ut)}),i.jsx(Dn,{value:"pending",className:"space-y-4",children:yi(J,Fe,ie,Le,yt,ge,Et,!0)})]}),i.jsx(mn,{open:C,onOpenChange:we=>{D||U(we)},children:i.jsxs(cn,{className:"sm:max-w-md bg-background border",children:[i.jsx(un,{children:i.jsx(dn,{children:"Delete Agent"})}),i.jsxs("div",{className:"space-y-3 py-2",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Are you sure you want to permanently delete ",(H==null?void 0:H.display_name)||"this agent","? This will remove their profile and role assignments. This action cannot be undone."]}),i.jsxs("div",{className:"rounded-md border p-3 bg-muted/30 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",(H==null?void 0:H.display_name)||""]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",(H==null?void 0:H.email)||""]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Role:"})," ",(H==null?void 0:H.primaryRole)||""]})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsx(Q,{variant:"destructive",className:"flex-1",onClick:()=>H&&Dl(H.user_id),disabled:D,children:D?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"}),i.jsx(Q,{variant:"outline",className:"flex-1",onClick:()=>U(!1),disabled:D,children:"Cancel"})]})]})]})}),i.jsx(mn,{open:n,onOpenChange:r,children:i.jsxs(cn,{className:"sm:max-w-md bg-background border",children:[i.jsx(un,{children:i.jsxs(dn,{children:["Token Limits",o?`  ${o.display_name||o.email}`:""]})}),i.jsxs("div",{className:"space-y-4 py-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(Be,{className:"text-sm font-medium",children:"Enable Limits"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Block token-consuming actions when exceeded."})]}),i.jsx(xl,{checked:f.enabled,onCheckedChange:we=>d({...f,enabled:!!we})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(Be,{className:"text-sm font-medium",children:"Require Email 2FA"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"User must enter a one-time code at sign-in."})]}),i.jsx(xl,{checked:f.twoFA,onCheckedChange:we=>d({...f,twoFA:!!we})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"limit-day",children:"Max Tokens / Day"}),i.jsx(Ve,{id:"limit-day",type:"number",min:0,placeholder:"0",value:f.perDay===0?"":f.perDay,onChange:we=>d({...f,perDay:Number(we.target.value||"0")})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"limit-month",children:"Max Tokens / Month"}),i.jsx(Ve,{id:"limit-month",type:"number",min:0,placeholder:"0",value:f.perMonth===0?"":f.perMonth,onChange:we=>d({...f,perMonth:Number(we.target.value||"0")})})]})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{onClick:xo,disabled:c,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:"Save"})}),i.jsx(ce,{children:i.jsx("p",{children:"Simpan batas token"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"})}),i.jsx(ce,{children:i.jsx("p",{children:"Batal"})})]})]})]})]})}),i.jsx(mn,{open:a,onOpenChange:s,children:i.jsxs(cn,{className:"sm:max-w-md bg-background border",children:[i.jsx(un,{children:i.jsxs(dn,{children:["Token Usage",o?`  ${o.display_name||o.email}`:""]})}),i.jsxs("div",{className:"space-y-4 py-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{children:"Timeframe"}),i.jsxs(Bt,{value:g,onValueChange:async we=>{const ot=we;v(ot),o&&await _f(o.user_id,ot)},children:[i.jsx(Mt,{className:"bg-background border",children:i.jsx(It,{})}),i.jsxs(Dt,{className:"bg-background border z-50",children:[i.jsx($e,{value:"7d",children:"Last 7 days"}),i.jsx($e,{value:"30d",children:"Last 30 days"}),i.jsx($e,{value:"this_month",children:"This month"})]})]})]}),i.jsxs("div",{className:"rounded-md border p-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tokens"}),i.jsx("div",{className:"text-2xl font-bold",children:b?"":(x==null?void 0:x.toLocaleString())??0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Assigned To Agent"}),i.jsx("div",{className:"text-xl font-semibold",children:(j==null?void 0:j.assignedTo)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Takeovers Initiated"}),i.jsx("div",{className:"text-xl font-semibold",children:(j==null?void 0:j.assignedBy)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Resolved by Agent"}),i.jsx("div",{className:"text-xl font-semibold",children:(j==null?void 0:j.resolvedBy)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"AIAgent Handovers"}),i.jsx("div",{className:"text-xl font-semibold",children:(j==null?void 0:j.handoverFromAI)??0})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"outline",onClick:()=>s(!1),children:"Close"})}),i.jsx(ce,{children:i.jsx("p",{children:"Tutup"})})]})})]})]})})]})},dIe=e=>e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),RR=e=>e==="read_own"?"Own":e==="read_all"?"All":e==="read_channel_owned"?"My Channels":e==="read_collaborator"?"Collaborator":e==="read"?"Read":e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),fIe=({permissions:e,assignedPermissionIds:t,onToggle:n,isReadOnly:r=!1,className:a})=>{const[s,o]=p.useState(""),[l,c]=p.useState({}),[u,f]=p.useState(new Set),d=p.useMemo(()=>{const y={};return e.forEach(b=>{y[b.resource]||(y[b.resource]={}),y[b.resource][b.action]=b}),y},[e]),h=p.useMemo(()=>{const y=s.toLowerCase().trim();return y?Object.keys(Uu).filter(b=>b.toLowerCase().includes(y)?!0:Uu[b].some(j=>j.toLowerCase().includes(y))):Object.keys(Uu)},[s]),m=async(y,b)=>{if(!(r||u.has(y)))try{f(w=>new Set(w).add(y)),await n(y,b)}catch(w){console.error("Failed to toggle permission",w)}finally{f(w=>{const j=new Set(w);return j.delete(y),j})}},g=async(y,b)=>{if(r||l[y])return;const w=b.map(_=>{var S;return(S=d[y])==null?void 0:S[_]}).filter(_=>!!_);if(w.length===0)return;const k=!w.every(_=>t.includes(_.id));c(_=>({..._,[y]:!0}));try{const _=b.filter(E=>E==="read"||E.startsWith("read_")),S=w.filter(E=>!_.includes(E.action)),A=w.filter(E=>_.includes(E.action)),T=["read_own","read_channel_owned","read_collaborator","read_all","read"].findLast(E=>A.some(O=>O.action===E))||null,I=[];if(k){for(const E of S)t.includes(E.id)||I.push(n(E.id,!0));for(const E of A){const O=T?E.action===T:!1;t.includes(E.id)!==O&&I.push(n(E.id,O))}}else for(const E of[...S,...A])t.includes(E.id)&&I.push(n(E.id,!1));const F=5;for(let E=0;E<I.length;E+=F)await Promise.all(I.slice(E,E+F))}catch(_){console.error(`Failed to bulk toggle for ${y}`,_)}finally{c(_=>({..._,[y]:!1}))}},v=(y,b,w,j=!1)=>{var T;const k=(T=d[y])==null?void 0:T[b];if(!k)return null;const _=t.includes(k.id),S=aee(b),A=u.has(k.id)||l[y],N=w||RR(b);return i.jsxs("div",{className:ye("flex items-center justify-between p-2 rounded-md transition-colors text-sm",_?"bg-primary/5":"hover:bg-muted/50",S&&_&&"bg-red-50 dark:bg-red-950/20"),children:[i.jsx("div",{className:"flex items-center gap-2 flex-1",children:i.jsxs(Be,{htmlFor:k.id,className:ye("cursor-pointer font-medium flex items-center gap-2",S?"text-red-600 dark:text-red-400":"text-foreground"),children:[N,S&&j&&i.jsx(Ds,{className:"h-3 w-3 text-red-500"})]})}),i.jsx(xl,{id:k.id,checked:_,onCheckedChange:I=>m(k.id,I),disabled:r||A,className:ye(S&&_&&"data-[state=checked]:bg-red-500")})]},b)},x=(y,b)=>{const w=b.filter(A=>A==="read"||A.startsWith("read_"));if(w.length===0)return null;const k=["read_own","read_channel_owned","read_collaborator","read_all","read"].filter(A=>w.includes(A)),_=k.findLast(A=>{var T,I;const N=(I=(T=d[y])==null?void 0:T[A])==null?void 0:I.id;return N?t.includes(N):!1})||null,S=async A=>{var T,I;if(r)return;const N=[];for(const F of k){const E=(T=d[y])==null?void 0:T[F];if(!E)continue;const O=t.includes(E.id),M=A===F;O!==M&&N.push(n(E.id,M))}if(A===null)for(const F of k){const E=(I=d[y])==null?void 0:I[F];if(!E)continue;t.includes(E.id)&&N.push(n(E.id,!1))}await Promise.all(N)};return i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"inline-flex flex-wrap items-center gap-1 rounded-md border p-1 bg-muted/30",children:[i.jsx(Q,{size:"sm",variant:_===null?"default":"ghost",className:ye("h-7 text-xs"),onClick:()=>S(null),disabled:r,children:"None"}),k.map(A=>{const N=RR(A),T=y==="threads"&&(A==="read_channel_owned"||A==="read_collaborator")||y==="messages"&&A==="read_collaborator",I=y==="threads"&&A==="read_channel_owned"?"Can view threads that belong to channels assigned to this agent.":y==="threads"&&A==="read_collaborator"?"Can view threads where the user is directly involved (assignee, creator, resolver, or collaborator).":y==="messages"&&A==="read_collaborator"?"Can view messages in threads where the user is involved as collaborator or assignee.":"",F=i.jsx(Q,{size:"sm",variant:_===A?"default":"ghost",className:ye("h-7 text-xs"),onClick:()=>S(A),disabled:r,children:N},A);return T?i.jsx(I1,{children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:F}),i.jsx(ce,{side:"top",children:i.jsx("div",{className:"max-w-xs text-xs",children:I})})]})},A):F})]})})};return i.jsxs("div",{className:ye("space-y-6",a),children:[i.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur pb-4 pt-2",children:i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(fs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Ve,{placeholder:"Search resources or actions...",value:s,onChange:y=>o(y.target.value),className:"pl-9 bg-background"})]})}),i.jsxs("div",{className:"columns-1 md:columns-2 xl:columns-3 gap-6 space-y-6",children:[h.map(y=>{const b=Uu[y],w=b.map(I=>{var F;return(F=d[y])==null?void 0:F[I]}).filter(Boolean);if(w.length===0)return null;const j=w.every(I=>t.includes(I==null?void 0:I.id)),k=l[y],_=b.filter(I=>{const F=gw(I);return["create","update","delete"].includes(F)}),S=b.filter(I=>gw(I)==="read"),A=b.filter(I=>gw(I)==="special"),N=S.filter(I=>I==="read"||I.startsWith("read_")),T=S.filter(I=>!N.includes(I));return i.jsx("div",{className:"break-inside-avoid mb-6",children:i.jsxs(Ae,{className:ye("h-full border-t-4 shadow-sm",j?"border-t-primary":"border-t-muted"),children:[i.jsx(tt,{className:"pb-3 bg-muted/30 pt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(Qe,{className:"text-base font-semibold flex items-center gap-2",children:[y==="security"?i.jsx(Yh,{className:"h-4 w-4 text-orange-500"}):y==="analytics"?i.jsx(fs,{className:"h-4 w-4 text-blue-500"}):i.jsx(Gs,{className:"h-4 w-4 text-muted-foreground"}),dIe(y)]}),!r&&i.jsx(Q,{variant:"ghost",size:"sm",className:"h-7 text-xs text-muted-foreground hover:text-primary",onClick:()=>g(y,b),disabled:k,children:k?"...":j?"Unselect All":"Select All"})]})}),i.jsxs(Je,{className:"pt-4 space-y-4",children:[_.length>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Manage"}),i.jsx("div",{className:"grid gap-1",children:_.map(I=>v(y,I,y==="admin_panel"&&I==="update"?"Update Settings":void 0))})]}),S.length>0&&i.jsxs("div",{className:ye(_.length>0&&"pt-2 border-t"),children:[i.jsx("div",{className:"flex items-center justify-between mb-2 mt-2",children:i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider flex items-center gap-1",children:"Access Level"})}),N.length>0&&x(y,b),T.length>0&&i.jsx("div",{className:"mt-2 grid gap-1",children:T.map(I=>v(y,I))})]}),A.length>0&&i.jsxs("div",{className:ye((_.length>0||S.length>0)&&"pt-2 border-t"),children:[i.jsx("h4",{className:"text-xs font-semibold text-orange-600/80 dark:text-orange-400/80 uppercase tracking-wider mb-2 mt-2 flex items-center gap-1",children:"Special Actions"}),i.jsx("div",{className:"grid gap-1",children:A.map(I=>{const E=v(y,I,y==="alerts"&&I==="ack"?"Acknowledge":y==="messages"&&I==="send"?"Send":void 0,!0);return y==="alerts"&&I==="ack"&&E?i.jsx(I1,{children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("div",{children:E})}),i.jsx(ce,{side:"top",children:i.jsx("div",{className:"max-w-xs text-xs",children:"Mark alerts as acknowledged on behalf of this role."})})]})},I):E})})]})]})]})},y)}),h.length===0&&i.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center border-2 border-dashed rounded-lg",children:[i.jsx(fs,{className:"h-10 w-10 text-muted-foreground mb-3"}),i.jsx("h3",{className:"text-lg font-medium",children:"No matching permissions"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Try adjusting your search terms."})]})]})]})},hIe=()=>{const[e,t]=p.useState([]),[n,r]=p.useState([]),[a,s]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState(null),[f,d]=p.useState("roles"),{toast:h}=Vc(),{refreshRBAC:m,hasPermission:g,hasRole:v}=jr(),[x,y]=p.useState({}),[b,w]=p.useState(!1),[j,k]=p.useState(null),[_,S]=p.useState(""),[A,N]=p.useState(""),[T,I]=p.useState(!1),[F,E]=p.useState(!1),[O,M]=p.useState(null),[B,R]=p.useState(!1),L=(c==null?void 0:c.name)==="master_agent",$=g("roles.create"),C=g("roles.update"),U=g("roles.delete"),D=g("roles.update"),P=g("roles.update"),H=async()=>{try{l(!0);const{data:q,error:ie}=await ne.from("roles").select("*").order("name");if(ie)throw ie;t(q||[]);const{data:oe,error:be}=await ne.from("permissions").select("*").order("resource",{ascending:!0});if(be)throw be;r(oe||[]);const{data:Se,error:Le}=await ne.from("role_permissions").select("*");if(Le)throw Le;s(Se||[])}catch(q){console.error("Error fetching RBAC data:",q),h({title:"Error",description:"Failed to fetch permissions data",variant:"destructive"})}finally{l(!1)}};p.useEffect(()=>{H()},[]);const G=()=>{k(null),S(""),N(""),w(!0)},Y=q=>{k(q),S(q.name),N(q.description),w(!0)},W=async()=>{try{if(I(!0),j){if(!C){h({title:"Forbidden",description:"You do not have permission to update roles",variant:"destructive"});return}const{error:q}=await ne.from("roles").update({name:_,description:A}).eq("id",j.id);if(q)throw q;try{await Wt({action:"roles.update",resource:"roles",resourceId:j.id,context:{name:_}})}catch{}h({title:"Saved",description:"Role updated"})}else{if(!$){h({title:"Forbidden",description:"You do not have permission to create roles",variant:"destructive"});return}const{data:q,error:ie}=await ne.from("roles").insert([{name:_,description:A}]).select("id").single();if(ie)throw ie;try{await Wt({action:"roles.create",resource:"roles",resourceId:(q==null?void 0:q.id)??null,context:{name:_}})}catch{}h({title:"Created",description:"Role created"})}w(!1),await H()}catch{h({title:"Error",description:"Failed to save role",variant:"destructive"})}finally{I(!1)}},ee=async q=>{try{if(!U){h({title:"Forbidden",description:"You do not have permission to delete roles",variant:"destructive"});return}y(oe=>({...oe,[q.id]:!0})),R(!0),await ne.from("role_permissions").delete().eq("role_id",q.id),await ne.from("user_roles").delete().eq("role_id",q.id);const{error:ie}=await ne.from("roles").delete().eq("id",q.id);if(ie)throw ie;try{await Wt({action:"roles.delete",resource:"roles",resourceId:q.id})}catch{}h({title:"Deleted",description:"Role deleted"}),E(!1),M(null),await H()}catch{h({title:"Error",description:"Failed to delete role",variant:"destructive"})}finally{y(ie=>({...ie,[q.id]:!1})),R(!1)}},X=(q,ie)=>a.some(oe=>oe.role_id===q&&oe.permission_id===ie),ae=p.useRef(null),re=()=>{ae.current&&clearTimeout(ae.current),ae.current=setTimeout(()=>{m().catch(()=>{})},250)},J=async(q,ie)=>{try{const oe=X(q,ie),be=`${q}:${ie}`;if(y(Se=>({...Se,[be]:!0})),oe){if(!P){h({title:"Forbidden",description:"You do not have permission to revoke role permissions",variant:"destructive"});return}const{error:Se}=await ne.rpc("revoke_role_permission",{p_role:q,p_perm:ie});if(Se)throw Se;s(Le=>Le.filter(ge=>!(ge.role_id===q&&ge.permission_id===ie)));try{await Wt({action:"rbac.revoke",resource:"rbac",context:{role_id:q,permission_id:ie}})}catch{}}else{if(!D){h({title:"Forbidden",description:"You do not have permission to grant role permissions",variant:"destructive"});return}const{error:Se}=await ne.rpc("grant_role_permission",{p_role:q,p_perm:ie});if(Se)throw Se;s(Le=>[...Le,{role_id:q,permission_id:ie}]);try{await Wt({action:"rbac.grant",resource:"rbac",context:{role_id:q,permission_id:ie}})}catch{}}re(),h({title:"Success",description:`Permission ${oe?"removed from":"added to"} role`})}catch(oe){console.error("Error updating role permission:",oe),h({title:"Error",description:"Failed to update permission",variant:"destructive"})}finally{const oe=`${q}:${ie}`;y(be=>({...be,[oe]:!1}))}},ve=q=>a.filter(oe=>oe.role_id===q).length,z=q=>q.replace("_"," ").toUpperCase();return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Role Permissions"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage role permissions"})]}),i.jsx(Kt,{permission:"roles.create",children:i.jsxs(Q,{onClick:G,children:[i.jsx(gs,{className:"h-4 w-4 mr-2"})," New Role"]})})]}),i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Gs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4 animate-pulse"}),i.jsx("p",{className:"text-muted-foreground",children:"Loading roles..."})]})})]}):f==="roles"?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Role Permissions"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage role permissions"})]}),i.jsxs(Q,{onClick:G,disabled:!$,title:$?void 0:"No permission: roles.create",children:[i.jsx(gs,{className:"h-4 w-4 mr-2"})," New Role"]})]}),i.jsxs(Ae,{className:"pt-2",children:[i.jsxs(tt,{children:[i.jsx(Qe,{children:"Roles"}),i.jsx(ui,{children:"Click on a role to manage its permissions"})]}),i.jsx(Je,{children:i.jsxs(yb,{children:[i.jsx(bb,{children:i.jsxs(zs,{children:[i.jsx(Wn,{children:"Role Name"}),i.jsx(Wn,{children:"Description"}),i.jsx(Wn,{children:"Permissions"}),i.jsx(Wn,{children:"Actions"})]})}),i.jsx(wb,{children:e.map(q=>i.jsxs(zs,{children:[i.jsx(Mn,{className:"font-medium",children:i.jsx(Ot,{variant:"outline",children:z(q.name)})}),i.jsx(Mn,{children:q.description}),i.jsx(Mn,{children:i.jsxs(Ot,{variant:"secondary",children:[ve(q.id)," permissions"]})}),i.jsx(Mn,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kt,{permission:"roles.read",children:i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>{u(q),d("configure")},children:[i.jsx(Ks,{className:"h-4 w-4 mr-2"}),"Configure"]})}),i.jsx(ce,{children:i.jsx("p",{children:"Konfigurasi aturan akses untuk peran ini"})})]})}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Kt,{permission:"roles.update",children:i.jsx(Q,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Y(q),"aria-label":"Edit role",children:i.jsx(ga,{className:"h-4 w-4"})})})}),i.jsx(ce,{children:i.jsx("p",{children:"Edit peran ini"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Kt,{permission:"roles.delete",children:i.jsx(Q,{size:"sm",onClick:()=>{M(q),E(!0)},disabled:!!x[q.id],className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white","aria-label":"Delete role",children:i.jsx(Ar,{className:"h-4 w-4"})})})}),i.jsx(ce,{children:i.jsx("p",{children:"Hapus peran ini"})})]})]})})]},q.id))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ae,{children:[i.jsxs(tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Qe,{className:"text-sm font-medium",children:"Total Roles"}),i.jsx(Gs,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),i.jsxs(Ae,{children:[i.jsxs(tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Qe,{className:"text-sm font-medium",children:"Total Permissions"}),i.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(Je,{children:i.jsx("div",{className:"text-2xl font-bold",children:n.length})})]}),i.jsxs(Ae,{children:[i.jsxs(tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Qe,{className:"text-sm font-medium",children:"Resources"}),i.jsx(Ks,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-2xl font-bold",children:new Set(n.map(q=>q.resource)).size}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique resources"})]})]})]}),i.jsx(Kt,{permission:"roles.update",children:i.jsx(mn,{open:b,onOpenChange:w,children:i.jsxs(cn,{children:[i.jsx(un,{children:i.jsx(dn,{children:j?"Edit Role":"Create Role"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(Be,{htmlFor:"rname",children:"Name"}),i.jsx(Ve,{id:"rname",value:_,onChange:q=>S(q.target.value),placeholder:"e.g. Super Agent"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(Be,{htmlFor:"rdesc",children:"Description"}),i.jsx(Ve,{id:"rdesc",value:A,onChange:q=>N(q.target.value),placeholder:"Optional"})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[i.jsx(Q,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),i.jsx(Q,{onClick:W,disabled:T||!_.trim()||(j?!C:!$),title:j?C?void 0:"No permission: roles.update":$?void 0:"No permission: roles.create",children:T?"Saving":"Save"})]})]})]})})}),i.jsx(Kt,{permission:"roles.delete",children:i.jsx(mn,{open:F,onOpenChange:E,children:i.jsxs(cn,{children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Delete Role"}),i.jsxs(Er,{children:["This will permanently delete the role",O?` "${z(O.name)}"`:""," and all its permissions."]})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[i.jsx(Q,{variant:"outline",onClick:()=>E(!1),disabled:B,children:"Cancel"}),i.jsx(Q,{variant:"destructive",onClick:()=>O&&ee(O),disabled:B||!U,title:U?void 0:"No permission: roles.delete",children:B?"Deleting":"Delete"})]})]})})})]}):f==="configure"&&c?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx(Q,{variant:"ghost",onClick:()=>d("roles"),className:"mb-2",children:" Back to Roles"}),i.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Configure ",z(c.name)]}),i.jsx("p",{className:"text-muted-foreground",children:c.description})]})}),L&&i.jsx(Ae,{children:i.jsxs(tt,{children:[i.jsx(Qe,{children:"Root Role"}),i.jsx(ui,{children:"Master Agent is a root role with full privileges across the system."})]})}),i.jsxs("div",{className:"py-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Full Permission Matrix"}),i.jsx(fIe,{permissions:n,assignedPermissionIds:a.filter(q=>q.role_id===c.id).map(q=>q.permission_id),onToggle:async(q,ie)=>{X(c.id,q)!==ie&&await J(c.id,q)},isReadOnly:!D&&!P})]})]}):null},mIe={maxSize:100,dedupeWindow:1e3,batchWindow:100,maxBatchSize:10};class pIe{constructor(t={}){zt(this,"queue",[]);zt(this,"processing",!1);zt(this,"pendingRequests",new Map);zt(this,"config");this.config={...mIe,...t}}async enqueue(t,n={operation:"read"}){const{operation:r="read",endpoint:a,priority:s=0,dedupeKey:o}=n,l=o||this.generateDedupeKey(t,a),c=this.pendingRequests.get(l);if(c)return c;if(this.queue.length>=this.config.maxSize){this.queue.sort((g,v)=>v.priority-g.priority);const m=this.queue.pop();m&&m.reject(new Error("Request queue full"))}let u,f;const d=new Promise((m,g)=>{u=m,f=g});this.pendingRequests.set(l,d);const h={id:l,fn:t,priority:s,timestamp:Date.now(),operation:r,endpoint:a,resolve:u,reject:f};return this.queue.push(h),this.queue.sort((m,g)=>g.priority-m.priority),this.processQueue(),d.finally(()=>{this.pendingRequests.delete(l)}),d}async processQueue(){if(!(this.processing||this.queue.length===0)){this.processing=!0;try{for(;this.queue.length>0;){const t=this.getBatch();if(t.length===1){const n=t[0];try{const r=await n.fn();n.resolve(r)}catch(r){n.reject(r)}}else await Promise.allSettled(t.map(async n=>{try{const r=await n.fn();n.resolve(r)}catch(r){n.reject(r)}}))}}finally{this.processing=!1}}}getBatch(){if(this.queue.length===0)return[];const t=Date.now(),n=[],r=this.queue[0];for(let a=0;a<this.queue.length&&n.length<this.config.maxBatchSize;a++){const s=this.queue[a],o=t-s.timestamp;s.operation===r.operation&&o<=this.config.batchWindow&&(!r.endpoint||s.endpoint===r.endpoint)&&n.push(s)}return n.forEach(a=>{const s=this.queue.findIndex(o=>o.id===a.id);s>=0&&this.queue.splice(s,1)}),n}generateDedupeKey(t,n){return`${t.toString()}:${n||""}`.slice(0,100)}debounce(t,n=300,r={}){return new Promise((a,s)=>{let o=null,l=Date.now();const c=async()=>{try{const f=await this.enqueue(t,{...r,dedupeKey:`debounce:${r.endpoint||"default"}`});a(f)}catch(f){s(f)}},u=()=>{o&&clearTimeout(o),o=setTimeout(()=>{Date.now()-l>=n?c():u()},n)};u()})}getStats(){return{queueLength:this.queue.length,pendingRequests:this.pendingRequests.size,processing:this.processing}}clear(){this.queue.forEach(t=>{t.reject(new Error("Queue cleared"))}),this.queue=[],this.pendingRequests.clear()}}const MR=new pIe,DR=["#60a5fa","#2563eb","#1d4ed8","#10b981","#f59e0b","#ef4444"],Qa=({label:e,description:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:t})})]})]});function gIe(){const[e,t]=p.useState(Jt.getStats()),[n,r]=p.useState(null),[a,s]=p.useState(MR.getStats()),[o,l]=p.useState(Bs.getStats()),[c,u]=p.useState(0),{hasPermission:f}=jr(),[d,h]=p.useState(!1),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,b]=p.useState(!1),[w,j]=p.useState(!1),[k,_]=p.useState(!1),[S,A]=p.useState(!1),[N,T]=p.useState(!1),[I,F]=p.useState(""),[E,O]=p.useState(Jt.getConfig()),[M,B]=p.useState(Jt.getConfig()),[R,L]=p.useState(Rt.getConfig()),[$,C]=p.useState(Rt.getConfig()),[U,D]=p.useState({read:Rt.getMultiplier("read"),write:Rt.getMultiplier("write"),rpc:Rt.getMultiplier("rpc"),auth:Rt.getMultiplier("auth")});f("admin_panel.update"),p.useEffect(()=>{const oe=setInterval(()=>{t(Jt.getStats()),s(MR.getStats()),l(Bs.getStats()),O(Jt.getConfig()),L(Rt.getConfig()),D({read:Rt.getMultiplier("read"),write:Rt.getMultiplier("write"),rpc:Rt.getMultiplier("rpc"),auth:Rt.getMultiplier("auth")})},1e3),be=()=>{t(Jt.getStats()),u(Se=>Se+1)};return Jt.on("stateChange",be),Jt.on("failure",be),Jt.on("success",be),P(),()=>{clearInterval(oe),Jt.off(be)}},[]);const P=async()=>{try{const oe=await NF();r(oe)}catch(oe){console.error("Failed to load metrics:",oe)}},H=oe=>{switch(oe){case Kl.CLOSED:return"bg-green-100 text-green-800 border-green-200";case Kl.OPEN:return"bg-red-100 text-red-800 border-red-200";case Kl.HALF_OPEN:return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},G=oe=>{switch(oe){case Kl.CLOSED:return i.jsx(ih,{className:"h-5 w-5 text-green-600"});case Kl.OPEN:return i.jsx(Ds,{className:"h-5 w-5 text-red-600"});case Kl.HALF_OPEN:return i.jsx(uP,{className:"h-5 w-5 text-yellow-600"});default:return null}},Y=()=>{h(!0)},W=()=>{Jt.reset(),t(Jt.getStats()),u(oe=>oe+1),h(!1),F(" Circuit breaker berhasil direset!"),A(!0)},ee=()=>{g(!0)},X=()=>{Jt.open(),t(Jt.getStats()),u(oe=>oe+1),g(!1),F(" Circuit breaker telah dibuka! Semua request database akan diblokir."),A(!0)},ae=()=>{x(!0)},re=async()=>{try{await im.forceFlush(),x(!1),F(" Metrik berhasil dikirim ke database!"),A(!0)}catch(oe){x(!1),F(" Gagal mengirim metrik: "+(oe instanceof Error?oe.message:"Unknown error")),T(!0)}},J=()=>{B(Jt.getConfig()),b(!0)},ve=()=>{Jt.updateConfig(M),O(Jt.getConfig()),b(!1),F(" Konfigurasi circuit breaker berhasil diperbarui!"),A(!0)},z=()=>{C(Rt.getConfig()),j(!0)},q=()=>{Rt.updateConfig($),L(Rt.getConfig()),D({read:Rt.getMultiplier("read"),write:Rt.getMultiplier("write"),rpc:Rt.getMultiplier("rpc"),auth:Rt.getMultiplier("auth")}),j(!1),F(" Konfigurasi adaptive rate limiter berhasil diperbarui!"),A(!0)},ie=e.totalRequests>0?((e.totalRequests-e.failures)/e.totalRequests*100).toFixed(1):"0";return Array.from({length:10},(oe,be)=>({time:new Date(Date.now()-(9-be)*6e4).toLocaleTimeString(),requests:Math.floor(Math.random()*50)+10,failures:Math.floor(Math.random()*5)})),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold",children:"Circuit Breaker Status"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor database protection and performance"})]}),i.jsxs(Q,{variant:"outline",size:"sm",onClick:P,children:[i.jsx(Ey,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Circuit State",description:"Status circuit breaker saat ini: CLOSED (normal, semua request diizinkan), OPEN (terhenti, memblokir semua request untuk melindungi database), atau HALF_OPEN (testing, mencoba menghubungkan kembali)"})})}),i.jsxs(Je,{children:[i.jsxs("div",{className:`flex items-center gap-3 px-3 py-2 rounded-md border ${H(e.state)}`,children:[G(e.state),i.jsx("span",{className:"font-semibold",children:e.state})]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Changed: ",new Date(e.stateChangedAt).toLocaleTimeString()]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Success Rate",description:"Persentase request database yang berhasil dari total request. Indikator kesehatan sistem - semakin tinggi semakin baik. Nilai rendah menunjukkan masalah potensial dengan database atau koneksi"})})}),i.jsxs(Je,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[ie,"%"]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.totalRequests-e.failures," / ",e.totalRequests," requests"]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Total Requests",description:"Jumlah total request database yang telah diproses sejak circuit breaker diinisialisasi. Termasuk request yang berhasil dan gagal"})})}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:e.totalRequests.toLocaleString()}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.failures," failures, ",e.successes," successes"]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Last Activity",description:"Waktu terakhir request database berhasil atau gagal. Membantu mengidentifikasi kapan masalah terakhir terjadi atau kapan sistem terakhir berfungsi normal"})})}),i.jsxs(Je,{children:[i.jsx("div",{className:"text-sm",children:e.lastSuccessTime?i.jsxs("div",{children:[i.jsx("span",{className:"text-green-600",children:"Last Success:"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.lastSuccessTime).toLocaleTimeString()})]}):null}),i.jsx("div",{className:"text-sm mt-2",children:e.lastFailureTime?i.jsxs("div",{children:[i.jsx("span",{className:"text-red-600",children:"Last Failure:"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.lastFailureTime).toLocaleTimeString()})]}):null})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(pP,{className:"h-4 w-4"}),i.jsx(Qa,{label:"Request Queue",description:"Antrian request database yang menunggu untuk diproses. Membantu menangani beban tinggi dengan mengatur prioritas dan menghindari duplikasi request"})]})}),i.jsx(Je,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Queue Length:",i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Jumlah total request dalam antrian, termasuk yang menunggu dan sedang diproses"})})]}),i.jsx("span",{className:"font-semibold",children:a.queueLength})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Pending Requests:",i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Jumlah request yang menunggu untuk diproses, belum dieksekusi"})})]}),i.jsx("span",{className:"font-semibold",children:a.pendingRequests})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Processing:",i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Status apakah queue sedang memproses request atau idle"})})]}),i.jsx(Ot,{variant:a.processing?"default":"secondary",children:a.processing?"Yes":"No"})]})]})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(Gs,{className:"h-4 w-4"}),i.jsx(Qa,{label:"Rate Limiter (Adaptive)",description:"Sistem pembatas kecepatan request adaptif yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem. Melindungi database dari traffic spike dan overload"})]})}),i.jsxs(Je,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Reads Limit:",i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ce,{children:i.jsxs("p",{children:["Batas maksimal request baca data per menit (dinamis: ",Rt.getEffectiveLimit("read")," request/menit, ",(U.read*100).toFixed(0),"% dari base ",R.baseConfig.read.limit,"). Limit menyesuaikan otomatis berdasarkan kondisi sistem"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Rt.getEffectiveLimit("read"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(U.read*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Writes Limit:",i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ce,{children:i.jsxs("p",{children:["Batas maksimal request tulis data per menit (dinamis: ",Rt.getEffectiveLimit("write")," request/menit, ",(U.write*100).toFixed(0),"% dari base ",R.baseConfig.write.limit,"). Lebih ketat dari reads karena write lebih berisiko terhadap database"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Rt.getEffectiveLimit("write"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(U.write*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["RPC Limit:",i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ce,{children:i.jsxs("p",{children:["Batas maksimal panggilan fungsi database (RPC) per menit (dinamis: ",Rt.getEffectiveLimit("rpc")," request/menit, ",(U.rpc*100).toFixed(0),"% dari base ",R.baseConfig.rpc.limit,"). Fungsi database biasanya lebih berat dari query biasa"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Rt.getEffectiveLimit("rpc"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(U.rpc*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Auth Limit:",i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ce,{children:i.jsxs("p",{children:["Batas maksimal operasi autentikasi per menit (dinamis: ",Rt.getEffectiveLimit("auth")," request/menit, ",(U.auth*100).toFixed(0),"% dari base ",R.baseConfig.auth.limit,")"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[Rt.getEffectiveLimit("auth"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(U.auth*100).toFixed(0),"%)"]})]})]})]}),i.jsx("div",{className:"mt-3 pt-3 border-t text-xs text-muted-foreground",children:i.jsx("p",{children:" Limit berubah otomatis berdasarkan response time dan error rate sistem"})})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ew,{className:"h-4 w-4"}),i.jsx(Qa,{label:"Cache",description:"Sistem penyimpanan sementara untuk hasil query database. Mengurangi beban database dengan menyimpan hasil yang sering digunakan dan meningkatkan kecepatan response"})]})}),i.jsx(Je,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Cached Entries:",i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Jumlah hasil query yang saat ini tersimpan di cache. Semakin banyak semakin baik untuk performa, selama tidak melebihi batas maksimal"})})]}),i.jsx("span",{className:"font-semibold",children:o.size})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Max Size:",i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(ce,{children:i.jsx("p",{children:"Batas maksimal jumlah entry yang bisa disimpan di cache. Setelah mencapai limit, entry lama akan dihapus (LRU policy)"})})]}),i.jsx("span",{className:"font-semibold",children:o.maxSize})]}),i.jsx(Q,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>{Bs.clear(),l(Bs.getStats())},children:"Clear Cache"})]})})]})]}),n&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Operations by Type",description:"Distribusi operasi database berdasarkan jenis (read, write, RPC, auth). Membantu memahami pola penggunaan database dan mengidentifikasi jenis operasi yang paling banyak digunakan"})})}),i.jsx(Je,{className:"h-64",children:i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:Object.entries(n.operationsByType||{}).map(([oe,be])=>({type:oe,count:be})),children:[i.jsx(Ck,{strokeDasharray:"3 3"}),i.jsx(Qr,{dataKey:"type"}),i.jsx(Zr,{}),i.jsx(Qn,{}),i.jsx(Fn,{dataKey:"count",fill:DR[1]})]})})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Circuit Breaker States",description:"Distribusi status circuit breaker saat operasi database dilakukan. Menunjukkan berapa banyak operasi yang terjadi pada setiap state (CLOSED, OPEN, HALF_OPEN)"})})}),i.jsx(Je,{className:"h-64",children:i.jsx(ei,{width:"100%",height:"100%",children:i.jsxs(ti,{data:Object.entries(n.circuitBreakerStates||{}).map(([oe,be])=>({state:oe,count:be})),children:[i.jsx(Ck,{strokeDasharray:"3 3"}),i.jsx(Qr,{dataKey:"state"}),i.jsx(Zr,{}),i.jsx(Qn,{}),i.jsx(Fn,{dataKey:"count",fill:DR[3]})]})})})]})]}),i.jsxs(Kt,{permission:"admin_panel.update",children:[i.jsxs(Ae,{className:"mb-4",children:[i.jsx(tt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Limit Configuration",description:"Konfigurasi threshold dan timeout untuk circuit breaker. Klik Edit untuk mengubah nilai-nilai ini"})}),i.jsxs(Q,{variant:"outline",size:"sm",onClick:J,children:[i.jsx(ga,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),i.jsx(Je,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Failure Threshold"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsxs("p",{children:["Buka circuit setelah ",E.failureThreshold," kegagalan"]})})]})]}),i.jsx(Ve,{value:E.failureThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Buka circuit setelah ",E.failureThreshold," kegagalan"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Reset Timeout (ms)"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsxs("p",{children:["Tunggu ",(E.resetTimeout/1e3).toFixed(0),"s sebelum uji pemulihan"]})})]})]}),i.jsx(Ve,{value:E.resetTimeout,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tunggu ",(E.resetTimeout/1e3).toFixed(0),"s sebelum uji pemulihan"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Success Threshold"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsxs("p",{children:["Tutup circuit setelah ",E.successThreshold," sukses"]})})]})]}),i.jsx(Ve,{value:E.successThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tutup circuit setelah ",E.successThreshold," sukses"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Monitoring Period (ms)"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsxs("p",{children:["Jendela waktu: ",(E.monitoringPeriod/1e3).toFixed(0),"s"]})})]})]}),i.jsx(Ve,{value:E.monitoringPeriod,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Jendela waktu: ",(E.monitoringPeriod/1e3).toFixed(0),"s"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Request Timeout (ms)"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsxs("p",{children:["Timeout request: ",(E.timeout/1e3).toFixed(0),"s"]})})]})]}),i.jsx(Ve,{value:E.timeout,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Timeout request: ",(E.timeout/1e3).toFixed(0),"s"]})]})]})})]}),i.jsxs(Ae,{className:"mb-4",children:[i.jsx(tt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Qe,{className:"text-sm font-medium",children:i.jsx(Qa,{label:"Adaptive Rate Limiter Configuration",description:"Konfigurasi untuk adaptive rate limiter yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem. Menangani traffic spike dengan lebih baik"})}),i.jsxs(Q,{variant:"outline",size:"sm",onClick:z,children:[i.jsx(ga,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),i.jsxs(Je,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Reads Base Limit"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Limit dasar untuk operasi read. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Ve,{value:R.baseConfig.read.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Rt.getEffectiveLimit("read"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(U.read*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Writes Base Limit"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Limit dasar untuk operasi write. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Ve,{value:R.baseConfig.write.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Rt.getEffectiveLimit("write"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(U.write*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"RPC Base Limit"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Limit dasar untuk operasi RPC. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Ve,{value:R.baseConfig.rpc.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Rt.getEffectiveLimit("rpc"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(U.rpc*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Auth Base Limit"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Limit dasar untuk operasi autentikasi. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Ve,{value:R.baseConfig.auth.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[Rt.getEffectiveLimit("auth"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(U.auth*100).toFixed(0),"%)"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Min Multiplier"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Multiplier minimum (misal: 0.5 = 50% dari base limit). Digunakan saat sistem dalam kondisi stres"})})]})]}),i.jsx(Ve,{value:R.minMultiplier,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Minimum: ",(R.minMultiplier*100).toFixed(0),"% dari base"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Max Multiplier"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Multiplier maksimum (misal: 2.0 = 200% dari base limit). Digunakan saat sistem dalam kondisi sehat"})})]})]}),i.jsx(Ve,{value:R.maxMultiplier,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum: ",(R.maxMultiplier*100).toFixed(0),"% dari base"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Be,{className:"text-xs text-muted-foreground",children:"Adjustment Interval (ms)"}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Frekuensi pengecekan dan penyesuaian limit (dalam milliseconds)"})})]})]}),i.jsx(Ve,{value:R.adjustmentInterval,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Setiap ",(R.adjustmentInterval/1e3).toFixed(0)," detik"]})]})]}),i.jsx("div",{className:"mt-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:[" ",i.jsx("strong",{children:"Status:"})," Adaptive rate limiter aktif dan melindungi database. Limit akan otomatis menyesuaikan berdasarkan metrik sistem (response time, error rate)."]})})]})]}),i.jsx(Ae,{className:"mb-4 bg-blue-50 dark:bg-blue-950/10 border-blue-200 dark:border-blue-800",children:i.jsx(tt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[i.jsx(lv,{className:"h-5 w-5"}),"Dokumentasi Circuit Breaker"]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pelajari cara kerja circuit breaker dan apa yang harus dilakukan jika terjadi masalah"})]}),i.jsxs(Q,{variant:"outline",size:"sm",onClick:()=>_(!0),children:[i.jsx(lv,{className:"h-4 w-4 mr-2"}),"Lihat Dokumentasi Circuit Breaker"]})]})})}),i.jsxs(Ae,{className:"border-red-200 dark:border-red-800",children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"text-sm font-medium flex items-center gap-2 text-red-600 dark:text-red-400",children:[i.jsx(zL,{className:"h-5 w-5"}),i.jsx(Qa,{label:"Danger Zone",description:"Tindakan berbahaya yang dapat mempengaruhi seluruh aplikasi. Gunakan dengan sangat hati-hati!"})]})}),i.jsxs(Je,{children:[i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"outline",onClick:Y,children:"Reset Circuit Breaker"})}),i.jsx(ce,{children:i.jsx("p",{children:"Reset semua statistik dan state circuit breaker ke kondisi awal. Menghapus riwayat kegagalan dan mengembalikan state ke CLOSED"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"destructive",onClick:ee,children:"Manually Open Circuit"})}),i.jsx(ce,{children:i.jsx("p",{children:"Paksa buka circuit breaker secara manual. Akan MEMBLOKIR SEMUA REQUEST DATABASE dan menyebabkan aplikasi berhenti berfungsi. Gunakan hanya dalam keadaan darurat!"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Q,{variant:"outline",onClick:ae,children:"Flush Metrics"})}),i.jsx(ce,{children:i.jsx("p",{children:"Kirim semua metrik yang tertunda ke database secara paksa. Tidak berbahaya, hanya memperbarui data metrik di Supabase"})})]})]}),i.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-red-700 dark:text-red-300 font-semibold",children:[" ",i.jsx("strong",{children:"PERINGATAN KRITIS:"})," Tindakan di zona ini dapat menghentikan seluruh aplikasi dan memblokir semua operasi database. Gunakan dengan sangat hati-hati dan hanya jika benar-benar diperlukan!"]})})]})]})]}),i.jsx(mn,{open:d,onOpenChange:h,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsxs(un,{children:[i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx(Ds,{className:"h-5 w-5 text-orange-500"}),"Reset Circuit Breaker"]}),i.jsx(Er,{children:"Apakah Anda yakin ingin mereset circuit breaker?"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-orange-800 dark:text-orange-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-orange-700 dark:text-orange-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Menghapus semua statistik circuit breaker"}),i.jsx("li",{children:"Mereset state ke CLOSED"}),i.jsx("li",{children:"Menghapus riwayat kegagalan"})]}),i.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-3 font-semibold",children:" Tindakan ini TIDAK DAPAT DIBATALKAN!"})]})}),i.jsxs(ma,{children:[i.jsx(Q,{variant:"outline",onClick:()=>h(!1),children:"Batal"}),i.jsx(Q,{variant:"default",onClick:W,children:"Reset"})]})]})}),i.jsx(mn,{open:m,onOpenChange:g,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsxs(un,{children:[i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx(Ds,{className:"h-5 w-5 text-red-500"}),"Buka Circuit Breaker Secara Manual"]}),i.jsx(Er,{children:"PERINGATAN KRITIS: Tindakan ini sangat berbahaya!"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-red-800 dark:text-red-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-red-700 dark:text-red-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:i.jsx("strong",{children:"MENGHENTIKAN SEMUA REQUEST DATABASE"})}),i.jsx("li",{children:"Memblokir semua operasi aplikasi"}),i.jsx("li",{children:"Menyebabkan error pada semua fitur yang membutuhkan database"})]}),i.jsxs("div",{className:"mt-3 bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded p-2",children:[i.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 font-semibold",children:" APLIKASI AKAN BERHENTI BERFUNGSI!"}),i.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"Gunakan hanya dalam keadaan darurat atau untuk testing."})]})]})}),i.jsxs(ma,{children:[i.jsx(Q,{variant:"outline",onClick:()=>g(!1),children:"Batal"}),i.jsx(Q,{variant:"destructive",onClick:X,children:"Buka Circuit"})]})]})}),i.jsx(mn,{open:v,onOpenChange:x,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsxs(un,{children:[i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx(ew,{className:"h-5 w-5 text-blue-500"}),"Kirim Metrik ke Database"]}),i.jsx(Er,{children:"Apakah Anda yakin ingin mengirim semua metrik yang tertunda?"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-blue-800 dark:text-blue-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Mengirim semua metrik yang tersimpan di memori ke Supabase"}),i.jsx("li",{children:"Memperbarui tabel circuit_breaker_metrics"}),i.jsx("li",{children:"Menghapus metrik dari antrian lokal"})]})]})}),i.jsxs(ma,{children:[i.jsx(Q,{variant:"outline",onClick:()=>x(!1),children:"Batal"}),i.jsx(Q,{variant:"default",onClick:re,children:"Kirim Metrik"})]})]})}),i.jsx(mn,{open:S,onOpenChange:A,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsx(un,{children:i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx(ih,{className:"h-5 w-5 text-green-500"}),"Berhasil"]})}),i.jsx("div",{className:"py-4",children:i.jsx("p",{className:"text-sm",children:I})}),i.jsx(ma,{children:i.jsx(Q,{variant:"default",onClick:()=>A(!1),children:"Tutup"})})]})}),i.jsx(mn,{open:k,onOpenChange:_,children:i.jsxs(cn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(un,{children:[i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx(lv,{className:"h-5 w-5 text-blue-500"}),"Dokumentasi Circuit Breaker"]}),i.jsx(Er,{children:"Panduan lengkap tentang cara kerja circuit breaker dan langkah-langkah troubleshooting"})]}),i.jsxs("div",{className:"py-4 space-y-6",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Gs,{className:"h-5 w-5 text-blue-600"}),"Apa itu Circuit Breaker?"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-2",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Circuit Breaker"})," adalah mekanisme perlindungan yang mencegah kegagalan sistem database merambat ke seluruh aplikasi. Seperti sekring listrik, circuit breaker akan memutuskan koneksi sementara ketika mendeteksi terlalu banyak kegagalan, sehingga memberikan waktu untuk sistem pulih dan mencegah beban berlebih."]}),i.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"Melindungi database dari beban berlebih dan kegagalan cascade"}),i.jsx("li",{children:"Mengurangi risiko aplikasi crash saat database bermasalah"}),i.jsx("li",{children:"Memberikan waktu recovery otomatis untuk sistem"}),i.jsx("li",{children:"Monitoring dan pelaporan metrik untuk analisis"})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ga,{className:"h-5 w-5 text-blue-600"}),"Penjelasan Detail Setiap Input Circuit Breaker"]}),i.jsx("div",{className:"space-y-4",children:i.jsx("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:i.jsxs("div",{className:"text-sm space-y-4 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"1. Failure Threshold (Ambang Kegagalan)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jumlah maksimal kegagalan yang dapat terjadi dalam jendela waktu monitoring sebelum circuit breaker terbuka (OPEN)."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Failure Threshold: ",E.failureThreshold]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 5 kegagalan (range: 1 - 100)",i.jsx("br",{})," Sistem akan menghitung jumlah kegagalan dalam jendela waktu ",(E.monitoringPeriod/1e3).toFixed(0)," detik",i.jsx("br",{})," Jika mencapai ",E.failureThreshold," kegagalan atau lebih  Circuit breaker akan ",i.jsx("strong",{children:"OPEN"})," (blokir semua request)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah kegagalan cascade dengan memblokir request sebelum sistem benar-benar crash",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu rendah (1-3): Circuit breaker terlalu sensitif, sering terbuka karena error sementara",i.jsx("br",{}),"- Nilai terlalu tinggi (20+): Circuit breaker kurang responsif, database bisa overload sebelum terbuka",i.jsx("br",{}),"- Rekomendasi: 5-10 untuk aplikasi production, 3-5 untuk aplikasi kritis",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Jika threshold = ",E.failureThreshold,", dan terjadi ",E.failureThreshold," timeout/error dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik terakhir  Circuit OPEN"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"2. Reset Timeout (Waktu Tunggu Reset)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Waktu yang harus ditunggu setelah circuit breaker OPEN sebelum mencoba uji pemulihan (transisi ke HALF_OPEN)."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Reset Timeout: ",(E.resetTimeout/1e3).toFixed(0)," detik (",E.resetTimeout,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 30 detik (30000ms, range: 5s - 600s)",i.jsx("br",{})," Setelah circuit OPEN, sistem akan menunggu ",E.resetTimeout/1e3," detik sebelum mencoba uji pemulihan",i.jsx("br",{})," Setelah timeout, circuit breaker akan transisi ke ",i.jsx("strong",{children:"HALF_OPEN"})," (mengizinkan beberapa request terbatas untuk testing)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memberi waktu database untuk recovery sebelum mengizinkan request lagi",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (5-10s): Tidak cukup waktu untuk recovery, circuit langsung terbuka lagi",i.jsx("br",{}),"- Nilai terlalu panjang (300s+): Aplikasi terlalu lama tidak bisa digunakan",i.jsx("br",{}),"- Rekomendasi: 30-60 detik untuk masalah network sementara, 60-120 detik untuk masalah database serius",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Circuit OPEN  Tunggu ",E.resetTimeout/1e3," detik  Uji dengan ",E.successThreshold," request terbatas  Jika semua sukses, kembali CLOSED"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"3. Success Threshold (Ambang Keberhasilan)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jumlah minimal request yang harus berhasil berturut-turut dalam fase HALF_OPEN sebelum circuit breaker kembali CLOSED."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Success Threshold: ",E.successThreshold]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 2 sukses berturut-turut (range: 1 - 10)",i.jsx("br",{})," Setelah circuit HALF_OPEN (uji pemulihan), sistem akan mengizinkan beberapa request terbatas",i.jsx("br",{})," Jika ",E.successThreshold," request berhasil berturut-turut  Circuit breaker akan ",i.jsx("strong",{children:"CLOSED"})," (kembali normal)",i.jsx("br",{})," Jika ada 1 request gagal  Circuit breaker kembali ",i.jsx("strong",{children:"OPEN"})," (tunggu reset timeout lagi)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memastikan sistem benar-benar pulih sebelum mengizinkan semua request",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu rendah (1): Terlalu mudah kembali CLOSED, bisa langsung OPEN lagi",i.jsx("br",{}),"- Nilai terlalu tinggi (5+): Terlalu lama di HALF_OPEN, memperlambat recovery",i.jsx("br",{}),"- Rekomendasi: 2-3 untuk aplikasi production",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Circuit HALF_OPEN  Request 1 sukses  Request 2 sukses (",E.successThreshold," tercapai)  Circuit CLOSED"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"4. Monitoring Period (Jendela Waktu Monitoring)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jendela waktu (sliding window) untuk menghitung jumlah kegagalan. Hanya kegagalan dalam jendela waktu ini yang dihitung untuk menentukan apakah circuit harus terbuka."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Monitoring Period: ",(E.monitoringPeriod/1e3).toFixed(0)," detik (",E.monitoringPeriod,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 10 detik (10000ms, range: 5s - 300s)",i.jsx("br",{})," Sistem hanya menghitung kegagalan yang terjadi dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik terakhir",i.jsx("br",{})," Kegagalan yang lebih lama dari ",(E.monitoringPeriod/1e3).toFixed(0)," detik tidak dihitung (expired)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah kegagalan lama mempengaruhi keputusan saat ini, fokus pada kondisi terbaru",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (5s): Terlalu fokus pada kondisi saat ini, tidak melihat tren",i.jsx("br",{}),"- Nilai terlalu panjang (60s+): Kegagalan lama masih mempengaruhi, recovery lebih lambat",i.jsx("br",{}),"- Rekomendasi: 10-30 detik untuk balance antara responsivitas dan stabilitas",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Jika monitoring period = ",(E.monitoringPeriod/1e3).toFixed(0),"s, dan terjadi ",E.failureThreshold," kegagalan dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik terakhir  Circuit OPEN. Kegagalan yang lebih dari ",(E.monitoringPeriod/1e3).toFixed(0)," detik tidak dihitung."]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"5. Request Timeout (Waktu Maksimal Request)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Waktu maksimal yang diizinkan untuk setiap request database. Request yang melebihi timeout ini akan dianggap gagal dan dibatalkan."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Request Timeout: ",(E.timeout/1e3).toFixed(0)," detik (",E.timeout,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 10 detik (10000ms, range: 1s - 60s)",i.jsx("br",{})," Setiap request database akan dibatalkan jika melebihi ",(E.timeout/1e3).toFixed(0)," detik dan dianggap gagal",i.jsx("br",{})," Timeout ini diterapkan sebelum request mencapai database (client-side timeout)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah request yang hang/tidak merespons menumpuk dan membebani sistem",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (1-3s): Request normal bisa dianggap gagal, false positive tinggi",i.jsx("br",{}),"- Nilai terlalu panjang (30s+): Request hang akan menunggu terlalu lama, resource terbuang",i.jsx("br",{}),"- Rekomendasi:",i.jsx("br",{})," Read queries: 5-10 detik",i.jsx("br",{})," Write queries: 10-15 detik",i.jsx("br",{})," RPC/complex queries: 15-30 detik",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Request dimulai  Jika belum selesai dalam ",(E.timeout/1e3).toFixed(0)," detik  Request dibatalkan  Dianggap gagal  Dihitung untuk failure threshold"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"6. Cara Kerja Bersama-Sama"}),i.jsx("p",{className:"mt-1 mb-2",children:"Semua parameter ini bekerja bersama untuk melindungi database dengan cara yang terkoordinasi."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{className:"text-xs space-y-2",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Alur Lengkap:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Request masuk  Sistem cek ",i.jsx("strong",{children:"Request Timeout"})," (max ",(E.timeout/1e3).toFixed(0),"s)"]}),i.jsx("li",{children:"Request dieksekusi  Jika melebihi timeout  Dianggap gagal"}),i.jsxs("li",{children:["Kegagalan dicatat dalam ",i.jsx("strong",{children:"Monitoring Period"})," (",(E.monitoringPeriod/1e3).toFixed(0),"s terakhir)"]}),i.jsx("li",{children:"Sistem hitung total kegagalan dalam jendela waktu"}),i.jsxs("li",{children:["Jika mencapai ",i.jsx("strong",{children:"Failure Threshold"})," (",E.failureThreshold," kegagalan)  Circuit OPEN"]}),i.jsxs("li",{children:["Tunggu ",i.jsx("strong",{children:"Reset Timeout"})," (",(E.resetTimeout/1e3).toFixed(0),"s)  Transisi ke HALF_OPEN"]}),i.jsxs("li",{children:["Uji dengan beberapa request  Jika ",i.jsx("strong",{children:"Success Threshold"})," (",E.successThreshold," sukses) tercapai  CLOSED"]}),i.jsx("li",{children:"Jika gagal dalam HALF_OPEN  Kembali OPEN, tunggu reset timeout lagi"})]})]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-green-700 dark:text-green-300",children:[i.jsx("strong",{children:" Contoh Skenario:"}),i.jsx("br",{}),"1. 5 request gagal (timeout) dalam 10 detik  Threshold tercapai (",E.failureThreshold,")",i.jsx("br",{}),"2. Circuit OPEN  Semua request diblokir",i.jsx("br",{}),"3. Tunggu ",E.resetTimeout/1e3," detik  Database punya waktu recovery",i.jsx("br",{}),"4. Circuit HALF_OPEN  Uji dengan 2 request",i.jsx("br",{}),"5. Kedua request sukses (",E.successThreshold,")  Circuit CLOSED  Kembali normal"]})})]})})]})]})})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(pP,{className:"h-5 w-5 text-blue-600"}),"Bagaimana Circuit Breaker Bekerja?"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-blue-800 dark:text-blue-200",children:"Tiga Status Circuit Breaker:"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(ih,{className:"h-5 w-5 text-green-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"CLOSED (Tertutup)"}),i.jsx("p",{className:"text-muted-foreground",children:"Status normal. Semua request database diizinkan. Circuit breaker memantau setiap request dan menghitung kegagalan dalam jendela waktu tertentu."})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Ds,{className:"h-5 w-5 text-red-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-red-700 dark:text-red-300",children:"OPEN (Terbuka)"}),i.jsxs("p",{className:"text-muted-foreground",children:["Circuit breaker mendeteksi terlalu banyak kegagalan ( ",E.failureThreshold," dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik). Semua request database diblokir untuk melindungi sistem. Status ini akan bertahan selama ",E.resetTimeout/1e3," detik sebelum mencoba uji pemulihan."]})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(uP,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-yellow-700 dark:text-yellow-300",children:"HALF_OPEN (Setengah Terbuka)"}),i.jsxs("p",{className:"text-muted-foreground",children:["Fase uji pemulihan. Setelah ",E.resetTimeout/1e3," detik di status OPEN, circuit breaker mengizinkan beberapa request terbatas untuk mengecek apakah sistem sudah pulih. Jika ",E.successThreshold," request berhasil berturut-turut, kembali ke CLOSED. Jika gagal, kembali ke OPEN."]})]})]})]})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-purple-800 dark:text-purple-200",children:"Alur Kerja:"}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"1."}),i.jsx("span",{children:"Request database masuk  Circuit breaker memeriksa status"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"2."}),i.jsx("span",{children:"Jika CLOSED  Request diizinkan dan dimonitor"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"3."}),i.jsxs("span",{children:["Jika terjadi kegagalan  Dihitung dalam jendela waktu ",(E.monitoringPeriod/1e3).toFixed(0)," detik"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"4."}),i.jsxs("span",{children:["Jika  ",E.failureThreshold," kegagalan  Beralih ke OPEN (blokir semua request)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"5."}),i.jsxs("span",{children:["Tunggu ",E.resetTimeout/1e3," detik  Beralih ke HALF_OPEN (uji pemulihan)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"6."}),i.jsxs("span",{children:["Jika ",E.successThreshold," sukses  Kembali ke CLOSED. Jika gagal  Kembali ke OPEN"]})]})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Ds,{className:"h-5 w-5 text-orange-600"}),"Apa yang Harus Dilakukan Jika Circuit Breaker Terbuka (OPEN)?"]}),i.jsx("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 space-y-3",children:i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"1. Jangan Panik - Ini Tindakan Perlindungan Otomatis"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Circuit breaker terbuka adalah mekanisme perlindungan yang bekerja secara otomatis. Aplikasi sengaja memblokir request untuk mencegah database crash."})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"2. Identifikasi Penyebab Masalah"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Periksa kemungkinan penyebab:"}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsx("li",{children:"Database server sedang down atau overload"}),i.jsx("li",{children:"Koneksi network bermasalah"}),i.jsx("li",{children:"Query database terlalu lambat (timeout)"}),i.jsx("li",{children:"Terlalu banyak request bersamaan (adaptive rate limiter sedang mengurangi limit)"}),i.jsx("li",{children:"Masalah pada Supabase (jika menggunakan Supabase)"})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"3. Periksa Metrik dan Log"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:'Lihat bagian "Metrics Charts" untuk memahami:'}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsx("li",{children:"Jenis operasi yang paling banyak gagal (read/write/RPC)"}),i.jsx("li",{children:"Error category yang dominan (network/timeout/database)"}),i.jsx("li",{children:"Response time rata-rata sebelum circuit terbuka"})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"4. Tunggu Pemulihan Otomatis"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Circuit breaker akan otomatis mencoba uji pemulihan setelah ",E.resetTimeout/1e3," detik. Jika sistem sudah pulih, akan kembali ke status CLOSED secara otomatis."]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"5. Tindakan Manual (Jika Diperlukan)"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Jika masalah berlanjut setelah beberapa siklus recovery:"}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Reset Circuit Breaker:"})," Hapus statistik dan mulai fresh (gunakan dengan hati-hati)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Periksa Status Database:"})," Pastikan database server berjalan normal"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Hubungi Tim DevOps/Database:"})," Jika masalah bersifat infrastruktur"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Review Query Performance:"})," Optimalkan query yang lambat"]})]})]})]})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Gs,{className:"h-5 w-5 text-purple-600"}),"Adaptive Rate Limiter: Menangani Traffic Spike"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-purple-800 dark:text-purple-200",children:"Apa itu Adaptive Rate Limiter?"}),i.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:[i.jsx("strong",{children:"Adaptive Rate Limiter"})," adalah sistem pembatas kecepatan yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem database. Berbeda dengan rate limiter statis yang memiliki limit tetap, adaptive rate limiter akan:"]}),i.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Meningkatkan limit"})," saat sistem dalam kondisi sehat (response time rendah, error rate rendah)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Menurunkan limit"})," saat sistem dalam kondisi stres (response time tinggi, error rate tinggi)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Melindungi database"})," dari traffic spike dan overload dengan penyesuaian otomatis"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Mengurangi false positives"})," dengan memberikan waktu recovery sebelum circuit breaker terbuka"]})]})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-green-800 dark:text-green-200",children:"Bagaimana Menangani Traffic Spike?"}),i.jsxs("div",{className:"text-sm space-y-3",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"1. Deteksi Traffic Spike"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Saat traffic spike terjadi, database mulai lambat (response time meningkat) atau terjadi error rate tinggi. Adaptive rate limiter memantau metrik ini setiap ",R.adjustmentInterval/1e3," detik dari tabel ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:"circuit_breaker_metrics"})," di Supabase."]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"2. Penyesuaian Otomatis"}),i.jsxs("div",{className:"mt-2 space-y-2",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-2",children:[i.jsxs("strong",{className:"text-xs",children:["Sistem Sehat (Response Time < ",R.healthyLatencyThreshold,"ms, Error < 5%):"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" Limit meningkat hingga ",(R.maxMultiplier*100).toFixed(0),"% dari base limit",i.jsx("br",{})," Contoh: Reads base ",R.baseConfig.read.limit,"/min dapat naik hingga ",Math.round(R.baseConfig.read.limit*R.maxMultiplier),"/min"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-2",children:[i.jsxs("strong",{className:"text-xs",children:["Sistem Stres (Response Time > ",R.stressLatencyThreshold,"ms atau Error > 20%):"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" Limit menurun hingga ",(R.minMultiplier*100).toFixed(0),"% dari base limit",i.jsx("br",{})," Contoh: Reads base ",R.baseConfig.read.limit,"/min dapat turun hingga ",Math.round(R.baseConfig.read.limit*R.minMultiplier),"/min",i.jsx("br",{})," Memberi waktu recovery untuk database tanpa langsung memicu circuit breaker OPEN"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"3. Skenario Traffic Spike"}),i.jsxs("div",{className:"mt-2 space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"A."}),i.jsxs("div",{children:[i.jsx("strong",{children:"Spike Normal (Dapat Dihandle):"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Request melonjak  Rate limiter dengan limit adaptif menangani sebagian request  Jika masih dalam batas, semua diizinkan  Jika melebihi, request diblokir dengan HTTP 429"})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"B."}),i.jsxs("div",{children:[i.jsx("strong",{children:"Spike Besar (Database Mulai Lambat):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Response time naik di atas ",R.stressLatencyThreshold,"ms  Adaptive limiter turunkan limit secara bertahap  Memberi waktu database pulih  Mencegah circuit breaker langsung OPEN"]})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"C."}),i.jsxs("div",{children:[i.jsx("strong",{children:"DDoS/Attack:"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Ribuan request masuk  Adaptive limiter turunkan limit drastis (hingga ",(R.minMultiplier*100).toFixed(0),"%)  Sebagian besar request diblokir  Database terlindungi  Circuit breaker OPEN sebagai last resort jika masih gagal"]})]})]})]})]})]})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-3 text-red-800 dark:text-red-200",children:" Input Konfigurasi untuk Traffic Spike & DDoS Protection"}),i.jsxs("div",{className:"text-sm space-y-3 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-red-700 dark:text-red-300 text-base",children:"Input Utama untuk Perlindungan:"}),i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-red-500",children:[i.jsx("strong",{className:"text-sm text-red-700 dark:text-red-300",children:"1. Min Multiplier (PALING PENTING untuk DDoS)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Min Multiplier = ",(R.minMultiplier*100).toFixed(0),"% (range: 0.1 - 1.0)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Menentukan seberapa rendah limit dapat turun saat sistem diserang",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (0.1-0.3) = Limit turun drastis  90-70% request diblokir  ",i.jsx("strong",{children:"SANGAT EFEKTIF"}),i.jsx("br",{}),"- Nilai sedang (0.4-0.6) = Limit turun sedang  60-40% request diblokir  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Nilai tinggi (0.7-1.0) = Limit turun sedikit  30-0% request diblokir  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 0.1 - 0.3 (10-30% dari base limit)",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Base Reads = ",R.baseConfig.read.limit,"/min, Min Multiplier = ",R.minMultiplier,"  Limit minimum = ",Math.round(R.baseConfig.read.limit*R.minMultiplier),"/min saat diserang"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-orange-500",children:[i.jsx("strong",{className:"text-sm text-orange-700 dark:text-orange-300",children:"2. Stress Latency Threshold (Deteksi Serangan)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Stress Latency Threshold = ",R.stressLatencyThreshold,"ms (range: 500ms - 10000ms)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Mendeteksi kapan sistem mulai stres/overload akibat traffic spike",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (500-1000ms) = Deteksi cepat saat serangan  Limit turun cepat  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Nilai sedang (1000-2000ms) = Deteksi sedang  ",i.jsx("strong",{children:"SEIMBANG"}),i.jsx("br",{}),"- Nilai tinggi (3000ms+) = Deteksi lambat  Database bisa crash dulu  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 500-1000ms (deteksi cepat)",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Saat DDoS, response time naik cepat  Jika ",">"," ",R.stressLatencyThreshold,"ms  Sistem langsung turunkan limit"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-yellow-500",children:[i.jsx("strong",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"3. Base Limits (Garis Pertahanan Awal)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Base Limits untuk Reads/Writes/RPC/Auth",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Limit dasar sebelum penyesuaian adaptif",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Base limit rendah = Kurang request yang diizinkan  Lebih aman tapi bisa blokir user normal",i.jsx("br",{}),"- Base limit tinggi = Lebih banyak request diizinkan  Lebih toleran tapi kurang proteksi",i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"}),i.jsx("br",{}),"- Reads: 50-100/min (default: ",R.baseConfig.read.limit,"/min)",i.jsx("br",{}),"- Writes: 20-30/min (default: ",R.baseConfig.write.limit,"/min)",i.jsx("br",{}),"- RPC: 10-20/min (default: ",R.baseConfig.rpc.limit,"/min)",i.jsx("br",{}),"- Auth: 5-10/min (default: ",R.baseConfig.auth.limit,"/min)",i.jsx("br",{})," ",i.jsx("strong",{children:"Penting:"})," Base limit ini akan dikalikan dengan min multiplier saat serangan, jadi limit efektif minimum = base  min multiplier"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-blue-500",children:[i.jsx("strong",{className:"text-sm text-blue-700 dark:text-blue-300",children:"4. Adjustment Interval (Kecepatan Respons)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Adjustment Interval = ",R.adjustmentInterval/1e3,"s (range: 10s - 600s)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Seberapa sering sistem memeriksa kondisi dan menyesuaikan limit",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Interval pendek (10-30s) = Respons cepat  Limit turun cepat saat serangan  ",i.jsx("strong",{children:"SANGAT EFEKTIF"}),i.jsx("br",{}),"- Interval sedang (30-60s) = Respons seimbang  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Interval panjang (60s+) = Respons lambat  Serangan bisa damage dulu  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 10-30 detik (respons cepat)",i.jsx("br",{})," ",i.jsx("strong",{children:"Catatan:"})," Interval terlalu pendek (","<"," 10s) bisa menyebabkan limit berubah-ubah terlalu sering"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-purple-500",children:[i.jsx("strong",{className:"text-sm text-purple-700 dark:text-purple-300",children:"5. Circuit Breaker Failure Threshold (Last Resort)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Failure Threshold = ",E.failureThreshold," (range: 1-100)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Jika adaptive rate limiter tidak cukup, circuit breaker akan OPEN dan blokir SEMUA request",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (3-5) = Circuit terbuka cepat  Semua request diblokir  ",i.jsx("strong",{children:"SANGAT PROTEKTIF"}),i.jsx("br",{}),"- Nilai sedang (5-10) = Balance  ",i.jsx("strong",{children:"SEIMBANG"}),i.jsx("br",{}),"- Nilai tinggi (10+) = Circuit lambat terbuka  Database bisa crash dulu  ",i.jsx("strong",{children:"KURANG PROTEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 3-5 kegagalan dalam monitoring period",i.jsx("br",{})," ",i.jsx("strong",{children:"Penting:"})," Ini adalah lapisan terakhir - gunakan jika rate limiter tidak cukup"]})]})]})]}),i.jsxs("div",{className:"bg-red-100 dark:bg-red-950/40 border border-red-300 dark:border-red-700 rounded p-3 mt-3",children:[i.jsx("strong",{className:"text-sm text-red-800 dark:text-red-200",children:" Konfigurasi Optimal untuk DDoS Protection:"}),i.jsxs("div",{className:"text-xs mt-2 space-y-1 text-red-700 dark:text-red-300",children:[i.jsx("p",{children:"Untuk perlindungan maksimal terhadap DDoS attack, gunakan konfigurasi berikut:"}),i.jsxs("ul",{className:"list-disc list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Min Multiplier:"})," 0.1 - 0.3 (limit turun hingga 10-30% dari base)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Stress Latency Threshold:"})," 500 - 1000ms (deteksi cepat)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Adjustment Interval:"})," 10 - 30 detik (respons cepat)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Base Limits:"})," Konservatif (Reads: 50-100, Writes: 20-30, RPC: 10-20, Auth: 5-10)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Circuit Breaker Failure Threshold:"})," 3-5 (last resort protection)"]})]}),i.jsx("p",{className:"mt-2 font-semibold",children:"Dengan konfigurasi ini, saat DDoS attack terjadi:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Response time naik ",">"," ",R.stressLatencyThreshold,"ms (dalam 10-30 detik)"]}),i.jsxs("li",{children:["Adaptive limiter turunkan limit ke ",(R.minMultiplier*100).toFixed(0),"% (minimal)"]}),i.jsx("li",{children:"70-90% request diblokir dengan HTTP 429"}),i.jsx("li",{children:"Jika masih gagal, circuit breaker OPEN  100% request diblokir"}),i.jsx("li",{children:"Database terlindungi dari crash"})]})]})]})]})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-yellow-800 dark:text-yellow-200",children:"Lapisan Perlindungan Berlapis"}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"1"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Adaptive Rate Limiter (Lapisan Pertama):"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Membatasi jumlah request per menit dengan limit yang dinamis. Mencegah database overload dengan menyesuaikan limit berdasarkan kondisi sistem."})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"2"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Request Timeout (Lapisan Kedua):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Setiap request memiliki timeout maksimal ",E.timeout/1e3," detik. Request yang terlalu lama dianggap gagal dan tidak menumpuk di database."]})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"3"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Circuit Breaker (Lapisan Ketiga):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Jika tetap terjadi ",E.failureThreshold," kegagalan dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik, circuit breaker akan OPEN dan memblokir semua request untuk melindungi database sepenuhnya."]})]})]})]})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-blue-800 dark:text-blue-200",children:"Penjelasan Detail Setiap Input Konfigurasi"}),i.jsxs("div",{className:"text-sm space-y-4 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"1. Base Limits (Limit Dasar)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Limit dasar adalah jumlah maksimal request per menit yang diizinkan saat sistem dalam kondisi normal. Limit aktual akan disesuaikan otomatis berdasarkan kondisi sistem (dikalikan dengan multiplier)."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Reads Base Limit: ",R.baseConfig.read.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"READ"})," (membaca data dari database). Operasi ini termasuk SELECT queries, fetching data, dll.",i.jsx("br",{})," Operasi read biasanya lebih aman dan lebih cepat dibanding write",i.jsx("br",{})," Limit default: 100 request/menit (dapat disesuaikan 10-1000)",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(R.baseConfig.read.limit*R.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(R.baseConfig.read.limit*R.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Writes Base Limit: ",R.baseConfig.write.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"WRITE"})," (menulis/mengubah data di database). Operasi ini termasuk INSERT, UPDATE, DELETE, UPSERT.",i.jsx("br",{})," Operasi write lebih berisiko dan lebih lambat dibanding read",i.jsx("br",{})," Limit default: 30 request/menit (dapat disesuaikan 5-500)",i.jsx("br",{})," Lebih ketat dari reads karena dapat menyebabkan race condition atau data corruption jika terlalu banyak",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(R.baseConfig.write.limit*R.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(R.baseConfig.write.limit*R.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["RPC Base Limit: ",R.baseConfig.rpc.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"RPC"})," (Remote Procedure Call / fungsi database). Operasi ini termasuk panggilan fungsi PostgreSQL, stored procedures, dll.",i.jsx("br",{})," RPC biasanya lebih kompleks dan lebih berat dibanding query biasa",i.jsx("br",{})," Limit default: 20 request/menit (dapat disesuaikan 5-200)",i.jsx("br",{})," RPC sering digunakan untuk operasi batch atau analytics, jadi perlu lebih ketat",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(R.baseConfig.rpc.limit*R.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(R.baseConfig.rpc.limit*R.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Auth Base Limit: ",R.baseConfig.auth.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"AUTH"})," (autentikasi dan otorisasi). Operasi ini termasuk login, logout, refresh token, verifikasi session.",i.jsx("br",{})," Operasi auth sangat penting untuk keamanan, jadi perlu dibatasi",i.jsx("br",{})," Limit default: 10 request/menit (dapat disesuaikan 2-100)",i.jsx("br",{})," Mencegah brute force attack dan credential stuffing",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(R.baseConfig.auth.limit*R.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(R.baseConfig.auth.limit*R.minMultiplier),"/min"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"2. Multiplier Range (Rentang Pengali)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Multiplier menentukan seberapa banyak limit base dapat berubah. Sistem akan mengalikan base limit dengan multiplier saat ini untuk mendapatkan limit efektif."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Min Multiplier: ",(R.minMultiplier*100).toFixed(0),"%"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Multiplier ",i.jsx("strong",{children:"minimum"})," yang akan digunakan saat sistem dalam kondisi ",i.jsx("strong",{children:"stres"}),".",i.jsx("br",{})," Nilai: 0.5 = 50% dari base limit (default: 0.5, range: 0.1 - 1.0)",i.jsx("br",{})," Digunakan ketika: Response time > ",R.stressLatencyThreshold,"ms ATAU error rate > 20%",i.jsx("br",{})," Contoh: Jika Reads base = ",R.baseConfig.read.limit,", min multiplier = ",R.minMultiplier,", maka limit efektif minimum = ",Math.round(R.baseConfig.read.limit*R.minMultiplier),"/min",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memberi waktu recovery untuk database dengan mengurangi beban saat sistem stres, mencegah overload total"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Max Multiplier: ",(R.maxMultiplier*100).toFixed(0),"%"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Multiplier ",i.jsx("strong",{children:"maksimum"})," yang akan digunakan saat sistem dalam kondisi ",i.jsx("strong",{children:"sehat"}),".",i.jsx("br",{})," Nilai: 2.0 = 200% dari base limit (default: 2.0, range: 1.0 - 5.0)",i.jsx("br",{})," Digunakan ketika: Response time < ",R.healthyLatencyThreshold,"ms DAN error rate < 5%",i.jsx("br",{})," Contoh: Jika Reads base = ",R.baseConfig.read.limit,", max multiplier = ",R.maxMultiplier,", maka limit efektif maksimum = ",Math.round(R.baseConfig.read.limit*R.maxMultiplier),"/min",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memanfaatkan kapasitas database saat kondisi optimal, meningkatkan throughput aplikasi"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"3. Latency Thresholds (Ambang Waktu Respons)"}),i.jsx("p",{className:"mt-1 mb-2",children:'Threshold menentukan kapan sistem dianggap "sehat" atau "stres" berdasarkan waktu respons database. Sistem menggunakan threshold ini untuk memutuskan apakah harus meningkatkan atau menurunkan limit.'}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Healthy Latency Threshold: ",R.healthyLatencyThreshold,"ms"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Batas atas response time yang dianggap ",i.jsx("strong",{children:"sehat"}),". Jika response time database di bawah nilai ini, sistem akan meningkatkan limit.",i.jsx("br",{})," Default: 200ms (range: 50ms - 1000ms)",i.jsx("br",{})," Kondisi: Response time < ",R.healthyLatencyThreshold,"ms DAN error rate < 5%",i.jsx("br",{})," Aksi: Limit akan ",i.jsx("strong",{children:"naik secara bertahap"})," (maks 10% per adjustment) hingga mencapai max multiplier",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mengidentifikasi saat database dapat menangani lebih banyak request, memaksimalkan throughput",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"})," Jika database Anda biasanya sangat cepat (< 50ms), turunkan nilai ini. Jika database lambat, naikkan."]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Stress Latency Threshold: ",R.stressLatencyThreshold,"ms"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Batas bawah response time yang dianggap ",i.jsx("strong",{children:"stres"}),". Jika response time database di atas nilai ini, sistem akan menurunkan limit.",i.jsx("br",{})," Default: 1000ms (range: 500ms - 10000ms)",i.jsx("br",{})," Kondisi: Response time > ",R.stressLatencyThreshold,"ms ATAU error rate > 20%",i.jsx("br",{})," Aksi: Limit akan ",i.jsx("strong",{children:"turun secara bertahap"})," (maks 20% per adjustment) hingga mencapai min multiplier",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mengidentifikasi saat database mulai overload, mengurangi beban sebelum database benar-benar crash",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"})," Jika database Anda dapat menangani response time tinggi (> 2s), naikkan nilai ini. Jika database sensitif, turunkan."]})]}),i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:[i.jsx("strong",{children:" Catatan:"})," Jika response time di antara ",R.healthyLatencyThreshold,"ms dan ",R.stressLatencyThreshold,"ms, sistem akan perlahan mengembalikan multiplier ke 1.0 (100% dari base limit)."]})})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"4. Adjustment Interval (Interval Penyesuaian)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Interval menentukan seberapa sering sistem memeriksa metrik dan menyesuaikan limit. Sistem akan query metrik dari Supabase dan menghitung response time serta error rate untuk memutuskan apakah perlu mengubah multiplier."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Adjustment Interval: ",R.adjustmentInterval/1e3," detik (",R.adjustmentInterval,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Frekuensi pengecekan dan penyesuaian limit oleh sistem.",i.jsx("br",{})," Default: 60 detik (60000ms, range: 10s - 600s)",i.jsx("br",{})," Setiap interval, sistem akan:",i.jsx("br",{}),"1. Query metrik dari tabel ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"circuit_breaker_metrics"})," di Supabase (5 menit terakhir)",i.jsx("br",{}),"2. Hitung rata-rata response time dan error rate",i.jsx("br",{}),"3. Bandingkan dengan threshold (healthy/stress)",i.jsx("br",{}),"4. Sesuaikan multiplier untuk setiap operasi (read/write/rpc/auth)",i.jsx("br",{}),"5. Simpan multiplier baru ke localStorage dan update limit efektif",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"}),i.jsx("br",{}),"- Interval terlalu pendek: Sistem terlalu reaktif, limit berubah-ubah terlalu sering (tidak stabil)",i.jsx("br",{}),"- Interval terlalu panjang: Sistem lambat merespons perubahan kondisi (tidak efektif)",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Untuk aplikasi dengan traffic stabil: Gunakan 60-120 detik",i.jsx("br",{}),"- Untuk aplikasi dengan traffic volatile: Gunakan 30-60 detik",i.jsx("br",{}),"- Jangan kurang dari 10 detik (terlalu agresif)",i.jsx("br",{}),"- Jangan lebih dari 600 detik (terlalu lambat)"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"5. Cara Kerja Bersama-Sama"}),i.jsx("p",{className:"mt-1 mb-2",children:"Semua parameter ini bekerja bersama untuk menciptakan sistem perlindungan yang adaptif dan responsif."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{className:"text-xs",children:[i.jsx("strong",{children:"Alur Kerja:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Sistem memantau setiap request database dan mencatat metrik (response time, success/failure) ke ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"circuit_breaker_metrics"})]}),i.jsxs("li",{children:["Setiap ",R.adjustmentInterval/1e3," detik, adaptive rate limiter memeriksa metrik 5 menit terakhir"]}),i.jsx("li",{children:"Menghitung rata-rata response time dan error rate"}),i.jsxs("li",{children:["Membandingkan dengan threshold:",i.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1",children:[i.jsxs("li",{children:["Jika response time < ",R.healthyLatencyThreshold,"ms DAN error < 5%  ",i.jsx("strong",{children:"Naikkan limit"})," (max ",(R.maxMultiplier*100).toFixed(0),"%)"]}),i.jsxs("li",{children:["Jika response time > ",R.stressLatencyThreshold,"ms ATAU error > 20%  ",i.jsx("strong",{children:"Turunkan limit"})," (min ",(R.minMultiplier*100).toFixed(0),"%)"]}),i.jsxs("li",{children:["Jika di antara keduanya  ",i.jsx("strong",{children:"Kembalikan limit"})," perlahan ke 100%"]})]})]}),i.jsx("li",{children:"Update multiplier dan hitung limit efektif baru (base limit  multiplier saat ini)"}),i.jsx("li",{children:"Limit efektif baru diterapkan untuk semua request berikutnya"}),i.jsxs("li",{children:["Proses ini berulang setiap ",R.adjustmentInterval/1e3," detik"]})]})]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:[i.jsx("strong",{children:" Contoh Praktis:"}),i.jsx("br",{}),"Base Reads Limit = ",R.baseConfig.read.limit,"/min",i.jsx("br",{}),"Sistem sehat (response < ",R.healthyLatencyThreshold,"ms)  Multiplier = ",R.maxMultiplier,"  Effective Limit = ",Math.round(R.baseConfig.read.limit*R.maxMultiplier),"/min",i.jsx("br",{}),"Sistem stres (response > ",R.stressLatencyThreshold,"ms)  Multiplier = ",R.minMultiplier,"  Effective Limit = ",Math.round(R.baseConfig.read.limit*R.minMultiplier),"/min",i.jsx("br",{}),"Sistem normal  Multiplier = 1.0  Effective Limit = ",R.baseConfig.read.limit,"/min (base)"]})})]})]}),i.jsxs("p",{className:"text-xs mt-3 pt-2 border-t",children:[" ",i.jsx("strong",{children:"Tip Penting:"}),' Limit efektif saat ini dapat dilihat di bagian "Adaptive Rate Limiter Configuration" di atas. Limit akan berubah secara real-time berdasarkan kondisi sistem. Perhatikan perubahan multiplier - jika terus turun, itu berarti sistem sedang stres dan perlu perhatian.']})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ew,{className:"h-5 w-5 text-blue-600"}),"Memahami Metrik Circuit Breaker"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Success Rate:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Persentase request yang berhasil. Nilai rendah (< 90%) menunjukkan masalah potensial dengan database atau koneksi."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Total Requests:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Jumlah total request sejak inisialisasi. Membantu memahami volume traffic aplikasi."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Operations by Type:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Distribusi operasi berdasarkan jenis (read/write/RPC/auth). Membantu mengidentifikasi jenis operasi yang paling bermasalah."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Circuit Breaker States:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Menunjukkan berapa banyak operasi yang terjadi pada setiap state. Banyak operasi di OPEN state = sistem sering bermasalah."})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ih,{className:"h-5 w-5 text-green-600"}),"Best Practices"]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4 space-y-2 text-sm",children:i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"Monitor metrik secara berkala untuk mendeteksi masalah sejak dini"}),i.jsx("li",{children:"Biarkan adaptive rate limiter bekerja otomatis - jangan sering reset manual kecuali benar-benar diperlukan"}),i.jsx("li",{children:"Jika circuit sering terbuka, pertimbangkan untuk optimasi query atau scaling database"}),i.jsx("li",{children:"Gunakan cache untuk mengurangi beban database pada query yang sering digunakan"}),i.jsx("li",{children:"Review dan sesuaikan threshold jika circuit breaker terlalu sensitif atau tidak sensitif"}),i.jsx("li",{children:"Perhatikan perubahan limit adaptive rate limiter - penurunan drastis menunjukkan sistem sedang stres"}),i.jsx("li",{children:"Dokumentasikan setiap insiden circuit breaker dan traffic spike untuk analisis tren"}),i.jsx("li",{children:"Trust the adaptive system - limit akan menyesuaikan otomatis berdasarkan kondisi sistem"})]})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ga,{className:"h-5 w-5 text-blue-600"}),"Referensi Konfigurasi"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Circuit Breaker Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Failure Threshold:"})," ",E.failureThreshold,i.jsx("p",{className:"text-xs text-muted-foreground",children:"Buka circuit setelah kegagalan ini"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Reset Timeout:"})," ",E.resetTimeout/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Tunggu sebelum uji pemulihan"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Success Threshold:"})," ",E.successThreshold,i.jsx("p",{className:"text-xs text-muted-foreground",children:"Sukses untuk tutup circuit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Monitoring Period:"})," ",E.monitoringPeriod/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Jendela waktu hitungan"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("strong",{children:"Request Timeout:"})," ",E.timeout/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Timeout maksimal per request"})]})]})]}),i.jsxs("div",{className:"pt-3 border-t",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Adaptive Rate Limiter Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Reads Base Limit:"})," ",R.baseConfig.read.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Rt.getEffectiveLimit("read"),"/min (",(U.read*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Writes Base Limit:"})," ",R.baseConfig.write.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Rt.getEffectiveLimit("write"),"/min (",(U.write*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"RPC Base Limit:"})," ",R.baseConfig.rpc.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Rt.getEffectiveLimit("rpc"),"/min (",(U.rpc*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Auth Base Limit:"})," ",R.baseConfig.auth.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",Rt.getEffectiveLimit("auth"),"/min (",(U.auth*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Multiplier Range:"})," ",(R.minMultiplier*100).toFixed(0),"% - ",(R.maxMultiplier*100).toFixed(0),"%",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Range penyesuaian limit otomatis"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Adjustment Interval:"})," ",R.adjustmentInterval/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Frekuensi penyesuaian limit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Healthy Threshold:"})," < ",R.healthyLatencyThreshold,"ms",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time untuk meningkatkan limit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stress Threshold:"})," > ",R.stressLatencyThreshold,"ms",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time untuk menurunkan limit"})]})]})]})]})]})]}),i.jsx(ma,{children:i.jsx(Q,{variant:"default",onClick:()=>_(!1),children:"Tutup"})})]})}),i.jsx(mn,{open:w,onOpenChange:j,children:i.jsxs(cn,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(un,{children:[i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx(ga,{className:"h-5 w-5 text-blue-500"}),"Edit Adaptive Rate Limiter Configuration"]}),i.jsx(Er,{children:"Ubah konfigurasi adaptive rate limiter. Limit akan secara otomatis menyesuaikan berdasarkan kondisi sistem."})]}),i.jsxs("div",{className:"py-4 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Base Limits (per menit)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"readLimit",children:["Reads Base Limit",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Limit dasar untuk operasi read (min: 10, max: 1000)"})})]})]}),i.jsx(Ve,{id:"readLimit",type:"number",min:10,max:1e3,value:$.baseConfig.read.limit,onChange:oe=>C({...$,baseConfig:{...$.baseConfig,read:{...$.baseConfig.read,limit:parseInt(oe.target.value)||100}}})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"writeLimit",children:["Writes Base Limit",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Limit dasar untuk operasi write (min: 5, max: 500)"})})]})]}),i.jsx(Ve,{id:"writeLimit",type:"number",min:5,max:500,value:$.baseConfig.write.limit,onChange:oe=>C({...$,baseConfig:{...$.baseConfig,write:{...$.baseConfig.write,limit:parseInt(oe.target.value)||30}}})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"rpcLimit",children:["RPC Base Limit",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Limit dasar untuk operasi RPC (min: 5, max: 200)"})})]})]}),i.jsx(Ve,{id:"rpcLimit",type:"number",min:5,max:200,value:$.baseConfig.rpc.limit,onChange:oe=>C({...$,baseConfig:{...$.baseConfig,rpc:{...$.baseConfig.rpc,limit:parseInt(oe.target.value)||20}}})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"authLimit",children:["Auth Base Limit",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Limit dasar untuk operasi autentikasi (min: 2, max: 100)"})})]})]}),i.jsx(Ve,{id:"authLimit",type:"number",min:2,max:100,value:$.baseConfig.auth.limit,onChange:oe=>C({...$,baseConfig:{...$.baseConfig,auth:{...$.baseConfig.auth,limit:parseInt(oe.target.value)||10}}})})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Adjustment Parameters"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"minMultiplier",children:["Min Multiplier",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Multiplier minimum (misal: 0.5 = 50%). Digunakan saat sistem stres (min: 0.1, max: 1.0)"})})]})]}),i.jsx(Ve,{id:"minMultiplier",type:"number",min:.1,max:1,step:.1,value:$.minMultiplier,onChange:oe=>C({...$,minMultiplier:parseFloat(oe.target.value)||.5})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Minimum: ",($.minMultiplier*100).toFixed(0),"% dari base limit"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"maxMultiplier",children:["Max Multiplier",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Multiplier maksimum (misal: 2.0 = 200%). Digunakan saat sistem sehat (min: 1.0, max: 5.0)"})})]})]}),i.jsx(Ve,{id:"maxMultiplier",type:"number",min:1,max:5,step:.1,value:$.maxMultiplier,onChange:oe=>C({...$,maxMultiplier:parseFloat(oe.target.value)||2})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum: ",($.maxMultiplier*100).toFixed(0),"% dari base limit"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"healthyLatency",children:["Healthy Latency Threshold (ms)",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Response time di bawah ini dianggap sehat. Sistem akan meningkatkan limit (min: 50ms, max: 1000ms)"})})]})]}),i.jsx(Ve,{id:"healthyLatency",type:"number",min:50,max:1e3,step:50,value:$.healthyLatencyThreshold,onChange:oe=>C({...$,healthyLatencyThreshold:parseInt(oe.target.value)||200})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"stressLatency",children:["Stress Latency Threshold (ms)",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Response time di atas ini dianggap stres. Sistem akan menurunkan limit (min: 500ms, max: 10000ms)"})})]})]}),i.jsx(Ve,{id:"stressLatency",type:"number",min:500,max:1e4,step:100,value:$.stressLatencyThreshold,onChange:oe=>C({...$,stressLatencyThreshold:parseInt(oe.target.value)||1e3})})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs(Be,{htmlFor:"adjustmentInterval",children:["Adjustment Interval (ms)",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Frekuensi pengecekan dan penyesuaian limit (min: 10000ms, max: 600000ms)"})})]})]}),i.jsx(Ve,{id:"adjustmentInterval",type:"number",min:1e4,max:6e5,step:1e4,value:$.adjustmentInterval,onChange:oe=>C({...$,adjustmentInterval:parseInt(oe.target.value)||6e4})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Setiap ",($.adjustmentInterval/1e3).toFixed(0)," detik"]})]})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",i.jsx("strong",{children:"Tips:"})," Adaptive rate limiter secara otomatis menyesuaikan limit berdasarkan metrik sistem (response time, error rate). Saat sistem sehat, limit akan naik. Saat sistem stres, limit akan turun untuk melindungi database dari overload."]})})]}),i.jsxs(ma,{children:[i.jsx(Q,{variant:"outline",onClick:()=>j(!1),children:"Batal"}),i.jsx(Q,{variant:"default",onClick:q,children:"Simpan Perubahan"})]})]})}),i.jsx(mn,{open:y,onOpenChange:b,children:i.jsxs(cn,{className:"max-w-2xl",children:[i.jsxs(un,{children:[i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx(ga,{className:"h-5 w-5 text-blue-500"}),"Edit Circuit Breaker Configuration"]}),i.jsx(Er,{children:"Ubah threshold dan timeout untuk circuit breaker. Perubahan akan langsung diterapkan."})]}),i.jsxs("div",{className:"py-4 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"failureThreshold",children:["Failure Threshold",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Jumlah kegagalan yang diperlukan sebelum circuit breaker terbuka (min: 1, max: 100)"})})]})]}),i.jsx(Ve,{id:"failureThreshold",type:"number",min:1,max:100,value:M.failureThreshold,onChange:oe=>B({...M,failureThreshold:parseInt(oe.target.value)||5})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"resetTimeout",children:["Reset Timeout (milliseconds)",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Waktu tunggu sebelum mencoba pemulihan (transisi ke HALF_OPEN). Min: 5000ms, Max: 300000ms"})})]})]}),i.jsx(Ve,{id:"resetTimeout",type:"number",min:5e3,max:3e5,step:1e3,value:M.resetTimeout,onChange:oe=>B({...M,resetTimeout:parseInt(oe.target.value)||3e4})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(M.resetTimeout/1e3).toFixed(0)," seconds"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"successThreshold",children:["Success Threshold",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Jumlah sukses berturut-turut di HALF_OPEN untuk menutup circuit (min: 1, max: 10)"})})]})]}),i.jsx(Ve,{id:"successThreshold",type:"number",min:1,max:10,value:M.successThreshold,onChange:oe=>B({...M,successThreshold:parseInt(oe.target.value)||2})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(Be,{htmlFor:"monitoringPeriod",children:["Monitoring Period (milliseconds)",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Jendela waktu untuk menghitung kegagalan. Kegagalan di luar jendela ini tidak dihitung. Min: 1000ms, Max: 60000ms"})})]})]}),i.jsx(Ve,{id:"monitoringPeriod",type:"number",min:1e3,max:6e4,step:1e3,value:M.monitoringPeriod,onChange:oe=>B({...M,monitoringPeriod:parseInt(oe.target.value)||1e4})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(M.monitoringPeriod/1e3).toFixed(0)," seconds"]})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs(Be,{htmlFor:"timeout",children:["Request Timeout (milliseconds)",i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(De,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(ce,{children:i.jsx("p",{children:"Timeout maksimal untuk setiap request database. Request yang melebihi waktu ini akan dianggap gagal. Min: 1000ms, Max: 60000ms"})})]})]}),i.jsx(Ve,{id:"timeout",type:"number",min:1e3,max:6e4,step:1e3,value:M.timeout,onChange:oe=>B({...M,timeout:parseInt(oe.target.value)||1e4})}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(M.timeout/1e3).toFixed(0)," seconds"]})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",i.jsx("strong",{children:"Tips:"})," Threshold yang terlalu rendah dapat membuat circuit breaker terlalu sensitif. Threshold yang terlalu tinggi dapat menunda respons terhadap masalah database. Gunakan nilai yang sesuai dengan karakteristik aplikasi Anda."]})})]}),i.jsxs(ma,{children:[i.jsx(Q,{variant:"outline",onClick:()=>b(!1),children:"Batal"}),i.jsx(Q,{variant:"default",onClick:ve,children:"Simpan Perubahan"})]})]})}),i.jsx(mn,{open:N,onOpenChange:T,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsx(un,{children:i.jsxs(dn,{className:"flex items-center gap-2",children:[i.jsx(Ds,{className:"h-5 w-5 text-red-500"}),"Error"]})}),i.jsx("div",{className:"py-4",children:i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:I})}),i.jsx(ma,{children:i.jsx(Q,{variant:"destructive",onClick:()=>T(!1),children:"Tutup"})})]})})]})}const Rq=p.forwardRef(({role:e,roles:t=[],requireAll:n=!1,fallback:r=null,children:a},s)=>{const{hasRole:o,hasAnyRole:l,loading:c}=jr();if(c)return null;const u=e?[e,...t]:t,f=n?u.every(h=>o(h)):l(u),d=!Array.isArray(a)&&typeof a!="string"&&typeof a!="number";return f?d?i.jsx(VS,{ref:s,children:a}):i.jsx(i.Fragment,{children:a}):i.jsx(i.Fragment,{children:r})});function vIe(){const[e,t]=vN(),{deleteMultipleContacts:n}=lC(),[r,a]=p.useState(""),[s,o]=p.useState(!1),[l,c]=p.useState(null),[u,f]=p.useState(!1),[d,h]=p.useState(90),[m,g]=p.useState(!1),[v,x]=p.useState(""),[y,b]=p.useState(null),[w,j]=p.useState(!1),[k,_]=p.useState(!1),[S,A]=p.useState(null),[N,T]=p.useState(null),[I,F]=p.useState(null),[E,O]=p.useState(null),[M,B]=p.useState(null),[R,L]=p.useState(!1),[$,C]=p.useState(!1),[U,D]=p.useState(""),P=p.useMemo(()=>Array.from(new Set(r.split(/[\s,\n]+/).map(q=>q.trim()).filter(Boolean))),[r]),H=q=>{const ie=new URLSearchParams(e);ie.set("menu",q),t(ie)},G=()=>{try{Bs.clear(),Ie.success("Local caches cleared")}catch{Ie.error("Failed to clear cache")}},Y=async()=>{try{const{data:{user:q}}=await ne.auth.getUser();if(!q)return null;const{data:ie}=await ne.from("org_members").select("org_id").eq("user_id",q.id).limit(1).maybeSingle();return(ie==null?void 0:ie.org_id)??null}catch{return null}},W=async()=>{try{const q=await Y();if(!q)return;const{data:ie,error:oe}=await Nt.from("org_settings").select("retention_days").eq("org_id",q).maybeSingle();if(oe)throw oe;c((ie==null?void 0:ie.retention_days)??90),h((ie==null?void 0:ie.retention_days)??90)}catch(q){console.error("Failed to fetch retention settings:",q)}},ee=async()=>{try{const q=await Y();if(!q)return;const{data:ie,error:oe}=await Nt.from("org_settings").select("ai_paused, ai_paused_reason, ai_paused_at, ai_paused_by_user_id").eq("org_id",q).maybeSingle();if(oe)throw oe;A(!!(ie!=null&&ie.ai_paused)),T((ie==null?void 0:ie.ai_paused_reason)??null),F((ie==null?void 0:ie.ai_paused_at)??null);const be=(ie==null?void 0:ie.ai_paused_by_user_id)??null;if(O(be),be)try{const{data:Se}=await Nt.from("users_profile").select("user_id, display_name").eq("user_id",be).maybeSingle();if(Se!=null&&Se.display_name)B(Se.display_name);else{const{data:Le}=await Nt.from("v_users").select("id, email").eq("id",be).maybeSingle();B((Le==null?void 0:Le.email)??be)}}catch{B(be)}else B(null)}catch(q){console.error("Failed to fetch AI pause status:",q)}},X=async()=>{try{L(!0);const q=await Y();if(!q)throw new Error("Unable to resolve organization");const{error:ie}=await Nt.from("org_settings").update({ai_paused:!1,ai_paused_reason:null,ai_paused_at:null,ai_paused_by_user_id:null}).eq("org_id",q);if(ie)throw ie;A(!1),T(null),F(null),O(null),B(null),Ie.success("AI auto responses resumed");try{await Wt({action:"ai.resume",resource:"org_settings"})}catch{}}catch(q){Ie.error((q==null?void 0:q.message)||"Failed to resume AI responses")}finally{L(!1)}},ae=async()=>{try{L(!0);const{data:{user:q}}=await ne.auth.getUser(),ie=(q==null?void 0:q.id)??null,oe=await Y();if(!oe)throw new Error("Unable to resolve organization");const{error:be}=await Nt.from("org_settings").update({ai_paused:!0,ai_paused_reason:(U==null?void 0:U.trim())||null,ai_paused_at:new Date().toISOString(),ai_paused_by_user_id:ie}).eq("org_id",oe);if(be)throw be;A(!0),T((U==null?void 0:U.trim())||null),F(new Date().toISOString()),O(ie),B(null),C(!1),Ie.success("AI auto responses paused");try{await Wt({action:"ai.pause",resource:"org_settings",context:{reason:(U==null?void 0:U.trim())||null}})}catch{}ee()}catch(q){Ie.error((q==null?void 0:q.message)||"Failed to pause AI responses")}finally{L(!1),D("")}},re=async()=>{try{j(!0);const q=await Y();if(!q)throw new Error("Unable to resolve organization");const{error:ie}=await Nt.from("org_settings").update({retention_days:d}).eq("org_id",q);if(ie)throw ie;c(d),f(!1),Ie.success(`Retention period updated to ${d} days`);try{await Wt({action:"retention.update",resource:"org_settings",context:{retention_days:d}})}catch{}}catch(q){Ie.error((q==null?void 0:q.message)||"Failed to update retention settings")}finally{j(!1)}},J=async()=>{try{j(!0);const{data:q,error:ie}=await Nt.rpc("cleanup_old_chat_data",{p_days:l??90});if(ie)throw ie;b(q),Ie.success(`Cleanup completed: ${(q==null?void 0:q.threads_deleted)||0} threads, ${(q==null?void 0:q.messages_deleted)||0} messages deleted`);try{await Wt({action:"retention.cleanup",resource:"chat_data",context:q})}catch{}}catch(q){Ie.error((q==null?void 0:q.message)||"Failed to run cleanup")}finally{j(!1)}},ve=async()=>{if(!v.trim()){Ie.error("Please enter contact UUID");return}try{_(!0);const{data:q,error:ie}=await Nt.rpc("gdpr_delete_user_data",{p_contact_id:v.trim()});if(ie)throw ie;Ie.success(`GDPR deletion completed: ${(q==null?void 0:q.threads_deleted)||0} threads, ${(q==null?void 0:q.messages_deleted)||0} messages, ${(q==null?void 0:q.contact_deleted)||0} contacts deleted`),g(!1),x("");try{await Wt({action:"gdpr.delete_request",resource:"contact",resourceId:v,context:q})}catch{}}catch(q){Ie.error((q==null?void 0:q.message)||"Failed to execute GDPR deletion")}finally{_(!1)}};p.useEffect(()=>{W(),ee()},[]);const z=async()=>{if(P.length===0){Ie.error("Provide at least one contact UUID");return}if(window.confirm(`Delete ${P.length} contact(s)? This cannot be undone.`))try{o(!0),await n(P),a(""),Ie.success("Contacts deleted")}catch{Ie.error("Bulk delete failed")}finally{o(!1)}};return i.jsx(Rq,{role:nr.MASTER_AGENT,fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"Admin Panel is available to Master Agents only."}),children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Panel"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Centralized controls for master agents."})]}),i.jsx(Ot,{className:"bg-blue-100 text-blue-700 border-0",children:"Master Agent"})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"flex items-center gap-2",children:[i.jsx(Gs,{className:"h-4 w-4"})," Access & Management"]})}),i.jsxs(Je,{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[i.jsxs(Q,{variant:"outline",className:"justify-start",onClick:()=>H("permissions"),children:[i.jsx(YL,{className:"h-4 w-4 mr-2"})," Manage Roles & Permissions"]}),i.jsxs(Q,{variant:"outline",className:"justify-start",onClick:()=>H("humanagents"),children:[i.jsx(eN,{className:"h-4 w-4 mr-2"})," Human Agents"]}),i.jsxs(Q,{variant:"outline",className:"justify-start",onClick:()=>H("platforms"),children:[i.jsx(KL,{className:"h-4 w-4 mr-2"})," Platforms & Integrations"]}),i.jsxs(Q,{variant:"outline",className:"justify-start",onClick:()=>H("analytics"),children:[i.jsx(FL,{className:"h-4 w-4 mr-2"})," Analytics"]}),i.jsxs(Q,{variant:"outline",className:"justify-start",onClick:()=>H("logs"),children:[i.jsx(qL,{className:"h-4 w-4 mr-2"})," Audit Logs"]}),i.jsxs(Q,{variant:"outline",className:"justify-start",onClick:()=>H("contacts"),children:[i.jsx(VL,{className:"h-4 w-4 mr-2"})," Contacts"]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"flex items-center gap-2",children:[i.jsx(Ks,{className:"h-4 w-4"})," Reliability & Circuit Breaker"]})}),i.jsx(Je,{children:i.jsx(gIe,{})})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"flex items-center gap-2",children:[i.jsx(Ks,{className:"h-4 w-4"})," AI Auto Responses"]})}),i.jsxs(Je,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:"Status:"}),S?i.jsx(Ot,{className:"bg-red-100 text-red-700 border-0",children:"Paused"}):i.jsx(Ot,{className:"bg-emerald-100 text-emerald-700 border-0",children:"Active"})]}),S&&i.jsxs("div",{className:"mt-2 text-xs text-muted-foreground space-y-1",children:[N?i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Reason:"})," ",N]}):null,i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Paused"}),M?i.jsxs(i.Fragment,{children:[" by ",M]}):null,I?i.jsxs(i.Fragment,{children:[" at ",new Date(I).toLocaleString()]}):null]})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:S?i.jsxs(Q,{onClick:X,disabled:R,children:[i.jsx(qV,{className:"h-4 w-4 mr-2"})," ",R?"Resuming...":"Resume AI Responses"]}):i.jsxs(Q,{variant:"destructive",onClick:()=>C(!0),disabled:R,children:[i.jsx(zV,{className:"h-4 w-4 mr-2"})," Pause AI Responses"]})})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"When paused, AI will not auto reply across all channels until resumed."})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"flex items-center gap-2",children:[i.jsx(dP,{className:"h-4 w-4"})," Utilities"]})}),i.jsx(Je,{className:"flex flex-wrap gap-2",children:i.jsxs(Q,{variant:"outline",onClick:G,children:[i.jsx(dP,{className:"h-4 w-4 mr-2"})," Clear Local Cache"]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{className:"flex items-center gap-2",children:"Data Retention Policy"})}),i.jsxs(Je,{className:"space-y-3",children:[i.jsx(Be,{className:"text-sm font-medium",children:"Retention Period (days)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ve,{type:"number",value:l??90,onChange:q=>h(parseInt(q.target.value)||90),className:"max-w-xs"}),i.jsx(Q,{variant:"outline",onClick:()=>{h(l??90),f(!0)},children:"Edit"})]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Current: ",l??90," days. Chats older than this will be automatically deleted."]}),i.jsx(Q,{onClick:J,disabled:w,className:"w-full",children:w?"Running Cleanup...":"Run Cleanup Now"}),y&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last cleanup: ",y.threads_deleted," threads, ",y.messages_deleted," messages, ",y.contacts_deleted," contacts"]})]})]}),i.jsxs(Ae,{className:"border-red-200",children:[i.jsx(tt,{children:i.jsx(Qe,{className:"flex items-center gap-2 text-red-700",children:"GDPR/PDPA Right to Erasure"})}),i.jsxs(Je,{className:"space-y-3",children:[i.jsx(Be,{className:"text-sm font-medium",children:"Contact ID"}),i.jsx(Ve,{placeholder:"Enter contact UUID",value:v,onChange:q=>x(q.target.value)}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Enter the contact ID (UUID) gotten from contact detail to delete all associated data permanently."}),i.jsx(Kt,{permission:"contacts.delete",children:i.jsx(Q,{variant:"destructive",onClick:()=>g(!0),disabled:!v.trim()||k,className:"w-full",children:"Delete User Data"})}),i.jsx("div",{className:"text-xs text-red-600",children:"Warning: This action permanently deletes all data and cannot be undone."})]})]})]}),i.jsx(mn,{open:u,onOpenChange:f,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Configure Data Retention"}),i.jsx(Er,{children:"Set how many days to retain chat data. Data older than this period will be automatically deleted."})]}),i.jsxs("div",{className:"py-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx(Be,{htmlFor:"retention-days",children:"Retention Period (days)"}),i.jsx(Ve,{id:"retention-days",type:"number",value:d,onChange:q=>h(parseInt(q.target.value)||90)})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Automatic cleanup runs daily at 2 AM UTC. You can also trigger manual cleanup from the main panel."})]}),i.jsxs(ma,{children:[i.jsx(Q,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),i.jsx(Q,{onClick:re,disabled:w,children:w?"Saving...":"Save"})]})]})}),i.jsx(mn,{open:$,onOpenChange:C,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Pause AI Auto Responses"}),i.jsx(Er,{children:"This will pause all AI auto replies across all platforms. You can resume anytime."})]}),i.jsx("div",{className:"py-4 space-y-4",children:i.jsxs("div",{children:[i.jsx(Be,{htmlFor:"pause-reason",children:"Reason (optional)"}),i.jsx($a,{id:"pause-reason",placeholder:"Enter a reason for pausing (visible to admins)",value:U,onChange:q=>D(q.target.value),className:"min-h-[90px]"})]})}),i.jsxs(ma,{children:[i.jsx(Q,{variant:"outline",onClick:()=>C(!1),disabled:R,children:"Cancel"}),i.jsx(Q,{variant:"destructive",onClick:ae,disabled:R,children:R?"Pausing...":"Confirm Pause"})]})]})}),i.jsx(mn,{open:m,onOpenChange:g,children:i.jsxs(cn,{className:"max-w-md",children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Confirm GDPR Data Deletion"}),i.jsxs(Er,{children:["This action will permanently delete all data associated with contact ID: ",i.jsx("code",{className:"bg-muted px-1 rounded",children:v})]})]}),i.jsxs(ma,{children:[i.jsx(Q,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),i.jsx(Q,{variant:"destructive",onClick:ve,disabled:k,children:k?"Deleting...":"Confirm Deletion"})]})]})}),i.jsxs(Ae,{className:"border-red-200",children:[i.jsx(tt,{children:i.jsxs(Qe,{className:"flex items-center gap-2 text-red-700",children:[i.jsx(Ds,{className:"h-4 w-4"})," Danger Zone"]})}),i.jsx(Je,{className:"space-y-3",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Paste contact UUIDs (comma/newline separated) to delete permanently."}),i.jsx($a,{value:r,onChange:q=>a(q.target.value),placeholder:"uuid-1, uuid-2, uuid-3",className:"min-h-[120px]"}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Parsed: ",P.length]}),i.jsx(Kt,{permission:"contacts.delete",children:i.jsxs(Q,{variant:"destructive",onClick:z,disabled:s||P.length===0,children:[i.jsx(Ar,{className:"h-4 w-4 mr-2"})," Delete ",P.length||""," Contact",P.length>1?"s":""]})})]})]})})]})]})})}function xIe(){var O,M;Vr();const[e,t]=p.useState([]),[n,r]=p.useState(20),[a,s]=p.useState(1),[o,l]=p.useState(0),[c,u]=p.useState("all"),[f,d]=p.useState("all"),[h,m]=p.useState(""),[g,v]=p.useState(""),[x,y]=p.useState([]),[b,w]=p.useState([]),[j,k]=p.useState({}),[_,S]=p.useState(!1),[A,N]=p.useState(null),T=p.useMemo(()=>({from:h?new Date(h).toISOString():null,to:g?new Date(g).toISOString():null}),[h,g]),I=async()=>{const{data:B}=await ne.from("audit_logs").select("user_id").not("user_id","is",null).limit(1e3),R=Array.from(new Set((B||[]).map($=>$.user_id)));if(R.length>0){const{data:$}=await ne.from("v_users").select("id,email,display_name").in("id",R),C=($||[]).map(D=>({id:D.id,email:D.email}));y(C);const U={};for(const D of $||[])U[D.id]={email:D.email,display_name:D.display_name};k(D=>({...D,...U}))}else y([]);const{data:L}=await ne.from("audit_logs").select("action").limit(1e3);w(Array.from(new Set((L||[]).map($=>$.action))))},F=async()=>{const B=(a-1)*n,{data:R,error:L}=await ne.rpc("get_audit_logs",{p_user_id:c!=="all"?c:null,p_action:f!=="all"?f:null,p_from:T.from,p_to:T.to,p_limit:n,p_offset:B});if(!L){const $=R||[];t($);let C=ne.from("audit_logs").select("id",{count:"exact"});c!=="all"&&(C=C.eq("user_id",c)),f!=="all"&&(C=C.eq("action",f)),T.from&&(C=C.gte("created_at",T.from)),T.to&&(C=C.lte("created_at",T.to));const{count:U}=await C;l(U||0);const P=Array.from(new Set($.map(H=>H.user_id).filter(Boolean))).filter(H=>!j[H]);if(P.length>0){const{data:H}=await ne.from("v_users").select("id,email,display_name").in("id",P),G={};for(const Y of H||[])G[Y.id]={email:Y.email,display_name:Y.display_name};Object.keys(G).length&&k(Y=>({...Y,...G}))}}};p.useEffect(()=>{I()},[]),p.useEffect(()=>{F()},[a,n,c,f,T.from,T.to]),p.useEffect(()=>{const B=ne.channel("realtime:logs").on("postgres_changes",{event:"INSERT",schema:"public",table:"audit_logs"},R=>{const L=R.new;t(C=>[L,...C].slice(0,n));const $=L.user_id;$&&!j[$]&&ne.from("v_users").select("id,email,display_name").eq("id",$).maybeSingle().then(({data:C})=>{C&&k(U=>({...U,[C.id]:{email:C.email,display_name:C.display_name}}))}),l(C=>C+1)}).subscribe();return()=>{ne.removeChannel(B)}},[n]);const E=Math.max(1,Math.ceil(o/n));return i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Logs"}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsx(Qe,{children:"Filters"})}),i.jsxs(Je,{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"User"}),i.jsxs(Bt,{value:c,onValueChange:u,children:[i.jsx(Mt,{className:"h-9",children:i.jsx(It,{placeholder:"All"})}),i.jsxs(Dt,{children:[i.jsx($e,{value:"all",children:"All"}),x.map(B=>i.jsx($e,{value:B.id,children:B.email},B.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"Action"}),i.jsxs(Bt,{value:f,onValueChange:d,children:[i.jsx(Mt,{className:"h-9",children:i.jsx(It,{placeholder:"All"})}),i.jsxs(Dt,{children:[i.jsx($e,{value:"all",children:"All"}),b.map(B=>i.jsx($e,{value:B,children:B},B))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"From"}),i.jsx(Ve,{type:"date",value:h,onChange:B=>m(B.target.value),className:"h-9"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"To"}),i.jsx(Ve,{type:"date",value:g,onChange:B=>v(B.target.value),className:"h-9"})]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsxs(Bt,{value:String(n),onValueChange:B=>r(Number(B)),children:[i.jsx(Mt,{className:"h-9",children:i.jsx(It,{placeholder:"Page size"})}),i.jsx(Dt,{children:[10,20,50,100].map(B=>i.jsxs($e,{value:String(B),children:[B," / page"]},B))})]}),i.jsx(Q,{variant:"outline",onClick:()=>{const B=e.map(R=>{var L;return{time:new Date(R.created_at).toISOString(),user:R.user_id?((L=j[R.user_id])==null?void 0:L.email)||R.user_id:"",action:R.action,resource:R.resource,resource_id:R.resource_id||"",ip:R.ip?R.ip.replace(/(\d+\.\d+\.\d+)\.\d+/,"$1.*"):"",context:JSON.stringify(t4(R.context||{}))}});RK(`logs_${new Date().toISOString()}.csv`,B)},children:"Export CSV"})]})]})]}),i.jsxs(Ae,{children:[i.jsx(tt,{children:i.jsxs(Qe,{children:["Entries (",o,")"]})}),i.jsxs(Je,{children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(yb,{children:[i.jsx(bb,{children:i.jsxs(zs,{children:[i.jsx(Wn,{children:"Time"}),i.jsx(Wn,{children:"User"}),i.jsx(Wn,{children:"Action"}),i.jsx(Wn,{children:"Resource"}),i.jsx(Wn,{children:"Resource ID"}),i.jsx(Wn,{children:"IP"}),i.jsx(Wn,{})]})}),i.jsx(wb,{children:e.map(B=>{var R,L;return i.jsxs(zs,{children:[i.jsx(Mn,{children:new Date(B.created_at).toLocaleString()}),i.jsx(Mn,{children:B.user_id?((R=j[B.user_id])==null?void 0:R.display_name)||((L=j[B.user_id])==null?void 0:L.email)||B.user_id:""}),i.jsx(Mn,{children:B.action}),i.jsx(Mn,{children:B.resource}),i.jsx(Mn,{children:B.resource_id||""}),i.jsx(Mn,{children:B.ip||""}),i.jsx(Mn,{className:"text-right",children:i.jsx(Q,{variant:"outline",size:"sm",onClick:()=>{N(B),S(!0)},children:"Details"})})]},B.id)})})]})}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",a," of ",E]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Q,{variant:"outline",disabled:a<=1,onClick:()=>s(B=>Math.max(1,B-1)),children:"Prev"}),i.jsx(Q,{variant:"outline",disabled:a>=E,onClick:()=>s(B=>Math.min(E,B+1)),children:"Next"})]})]})]})]}),i.jsx(mn,{open:_,onOpenChange:S,children:i.jsxs(cn,{className:"max-w-2xl",children:[i.jsxs(un,{children:[i.jsx(dn,{children:"Log Details"}),i.jsx(Er,{children:A?new Date(A.created_at).toLocaleString():""})]}),A&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"User"}),i.jsx("div",{children:A.user_id?((O=j[A.user_id])==null?void 0:O.display_name)||((M=j[A.user_id])==null?void 0:M.email)||A.user_id:""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Action"}),i.jsx("div",{children:A.action})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Resource"}),i.jsx("div",{children:A.resource})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Resource ID"}),i.jsx("div",{children:A.resource_id||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"IP"}),i.jsx("div",{children:A.ip||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"User Agent"}),i.jsx("div",{className:"truncate",title:A.user_agent||void 0,children:A.user_agent||""})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Context"}),i.jsx("pre",{className:"max-h-64 overflow-auto rounded bg-muted p-3 text-xs",children:JSON.stringify(A.context??{},null,2)})]})]}),i.jsx(ma,{children:i.jsx(Q,{variant:"outline",onClick:()=>S(!1),children:"Close"})})]})})]})}const $R=({children:e})=>{var d,h,m,g;const{user:t,signOut:n}=Vr();p.useState("profile");const[r,a]=p.useState(!0),[s,o]=p.useState(!1),l=Ka(),c=(v,x)=>v?v.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2):x.substring(0,2).toUpperCase(),u=async()=>{try{await n()}catch(v){console.error("Error signing out:",v)}},f=()=>{l("/reset-password")};return i.jsxs(os,{children:[i.jsx(ls,{asChild:!0,children:e}),i.jsx(Mi,{className:"w-[300px] h-[320px] p-0 overflow-hidden",side:"left",align:"start",children:i.jsx("div",{className:"flex h-full",children:i.jsx("div",{className:"flex-1 p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(zr,{className:"h-10 w-10",children:[i.jsx(Us,{src:(d=t==null?void 0:t.user_metadata)==null?void 0:d.avatar_url,alt:((h=t==null?void 0:t.user_metadata)==null?void 0:h.full_name)||(t==null?void 0:t.email)}),i.jsx(qr,{className:"text-sm bg-blue-100 text-blue-600",children:c((m=t==null?void 0:t.user_metadata)==null?void 0:m.full_name,(t==null?void 0:t.email)||"")})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-sm font-semibold",children:((g=t==null?void 0:t.user_metadata)==null?void 0:g.full_name)||"Audit 4"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t==null?void 0:t.email})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Online Status"}),i.jsx("div",{className:"text-xs font-medium",children:"Online"})]}),i.jsx(xl,{checked:r,onCheckedChange:a,className:"scale-75"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Notifications"}),i.jsx("div",{className:"text-xs font-medium",children:"Disabled"})]}),i.jsx(xl,{checked:s,onCheckedChange:o,className:"scale-75"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium",children:"Reset Password"}),i.jsx(Q,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:f,children:i.jsx(Yh,{className:"h-3 w-3 text-muted-foreground"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium",children:"Log Out"}),i.jsx(Q,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:u,children:i.jsx(ZS,{className:"h-3 w-3 text-muted-foreground"})})]})]})]})})})})]})};function yIe({icon:e,label:t,active:n=!1,onClick:r,collapsed:a,permissions:s,requireAll:o=!1,resourceAny:l=[],requiredRoles:c=[]}){const{hasAnyPermission:u,hasAllPermissions:f,hasAnyRole:d,loading:h}=jr();if(h)return null;const m=o?f(s):u(s),g=c.length===0||d(c);return!m||!g?null:i.jsxs("button",{type:"button",onClick:r,className:ye("group grid h-10 w-full grid-cols-[1.125rem,1fr] items-center rounded-md px-3 text-left text-sm transition-all duration-200 gap-2",n?"bg-blue-100 text-blue-700 border border-blue-200":"text-muted-foreground hover:bg-blue-50 hover:text-blue-600 hover:border hover:border-blue-100",a&&"grid-cols-[1.125rem,0fr]"),"aria-current":n?"page":void 0,title:a?t:void 0,children:[i.jsx(e,{className:`h-4 w-4 shrink-0 transition-colors ${n?"text-blue-600":"group-hover:text-blue-600"}`}),i.jsx("span",{className:ye("overflow-hidden whitespace-nowrap text-ellipsis transition-opacity duration-200",a&&"opacity-0 pointer-events-none"),children:t})]})}const yu=e=>{const t=Uu[e];return Array.isArray(t)?t.filter(n=>n==="read"||n.startsWith("read_")).map(n=>`${e}.${n}`):[]},zg={admin:{key:"admin",label:"Admin Panel",icon:Ks,permissions:["admin_panel.read"],requireAll:!1,requiredRoles:[nr.MASTER_AGENT],description:"Master agent control center"},chat:{key:"chat",label:"Chat",icon:Bo,permissions:yu("threads"),requireAll:!1,description:"View and manage conversations"},analytics:{key:"analytics",label:"Analytics",icon:FL,permissions:yu("analytics"),requireAll:!1,description:"View performance metrics and insights"},logs:{key:"logs",label:"Logs",icon:qL,permissions:["audit_logs.read"],requireAll:!0,description:"View user action logs"},contacts:{key:"contacts",label:"Contacts",icon:eN,permissions:yu("contacts"),requireAll:!1,description:"Manage customer contacts and identities"},platforms:{key:"platforms",label:"Connected Platforms",icon:KL,permissions:yu("channels"),requireAll:!1,description:"Manage connected channels and integrations"},aiagents:{key:"aiagents",label:"AI Agents",icon:LL,permissions:yu("ai_profiles"),requireAll:!1,description:"Configure and manage AI agents"},humanagents:{key:"humanagents",label:"Human Agents",icon:YL,permissions:yu("super_agents"),requireAll:!1,description:"Manage human agent assignments and roles"},permissions:{key:"permissions",label:"Permissions",icon:Gs,permissions:["roles.read"],requireAll:!0,requiredRoles:[nr.MASTER_AGENT],description:"Manage roles and permissions"}},$k=["admin","chat","analytics","logs","contacts","platforms","aiagents","humanagents","permissions"];function bIe(){const{hasAnyPermission:e,hasAllPermissions:t,hasAnyRole:n,hasPermissionDB:r,userRoles:a,userPermissions:s,loading:o}=jr(),[l,c]=p.useState({});p.useEffect(()=>{if(o)return;let m=!1;return(async()=>{const v=await Promise.all($k.map(async x=>{const y=zg[x],b=!y.requiredRoles||y.requiredRoles.length===0?!0:n(y.requiredRoles),w=await Promise.all(y.permissions.map(async k=>{const _=k.indexOf(".");if(_<0)return!1;const S=k.slice(0,_),A=k.slice(_+1);return await r(S,A)})),j=y.requireAll?w.every(Boolean):w.some(Boolean);return[x,b&&j]}));if(!m){const x={};for(const[y,b]of v)x[y]=b;c(x)}})(),()=>{m=!0}},[n,a,s,o]);const u=m=>{const g=zg[m];if(!g)return!1;if(l[m]===!0)return!0;const v=g.requireAll?t(g.permissions):e(g.permissions),x=!g.requiredRoles||g.requiredRoles.length===0?!0:n(g.requiredRoles);return v&&x},f=()=>$k.filter(m=>u(m));return{canAccessNavItem:u,getAccessibleNavItems:f,getDefaultNavItem:()=>{const m=f();return m.length>0?m[0]:null},getNavItem:m=>zg[m],navigationConfig:zg}}const qg=({step:e,title:t,description:n,emoji:r})=>i.jsxs("div",{className:"flex items-start gap-4 rounded-lg border border-border bg-card p-4 shadow-sm transition-transform hover:-translate-y-0.5",children:[i.jsx("div",{className:"text-2xl animate-float","aria-hidden":!0,children:r}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Ot,{variant:"secondary",children:[e,"."]}),i.jsx("h3",{className:"text-base font-semibold text-foreground",children:t})]}),i.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n})]})]}),LR=()=>{var M,B,R,L,$;const[e,t]=p.useState("chat"),[n,r]=p.useState(!1),{user:a,signOut:s,setAccountDeactivated:o,accountDeactivated:l}=Vr();Ka();const[c,u]=vN(),{loading:f,hasRole:d}=jr(),{getDefaultNavItem:h,getNavItem:m,canAccessNavItem:g,getAccessibleNavItems:v}=bIe(),[x,y]=p.useState(!1),[b,w]=p.useState(!1),[j,k]=p.useState(null),[_,S]=p.useState(null),A="synka_ai_paused_ack",N=$k,T=(C,U)=>{const D=new URLSearchParams(c);D.set("menu",C),u(D,U)};p.useEffect(()=>{if(f)return;const C=c.get("menu");if(C&&N.includes(C)){const U=C;if(g(U))U!==e&&t(U);else{const D=h();D&&D!==e&&(t(D),T(D,{replace:!0}))}}else if(!C){const U=h();T(U||"chat",{replace:!0})}},[c,g,h,f]),p.useEffect(()=>{if(f)return;const C=h();(!N.includes(e)||!g(e))&&C&&(t(C),T(C,{replace:!0}))},[h,g,e,N,f]);const I=async()=>{try{await s()}catch(C){console.error("Error signing out:",C)}},F=(C,U)=>C?C.split(" ").map(D=>D[0]).join("").toUpperCase().slice(0,2):U.substring(0,2).toUpperCase();p.useEffect(()=>{(async()=>{var U;try{const{data:D}=await ne.auth.getUser(),P=(U=D==null?void 0:D.user)==null?void 0:U.id;if(!P)return;const{data:H}=await ne.from("org_members").select("org_id").eq("user_id",P).limit(1).maybeSingle(),G=H==null?void 0:H.org_id;if(!G)return;const{data:Y,error:W}=await Nt.from("org_settings").select("ai_paused, ai_paused_at, ai_paused_by_user_id").eq("org_id",G).maybeSingle();if(W)throw W;const ee=!!(Y!=null&&Y.ai_paused);w(ee),k((Y==null?void 0:Y.ai_paused_at)??null);const X=Y==null?void 0:Y.ai_paused_by_user_id;if(X){let ae=null;try{const{data:re}=await Nt.from("users_profile").select("user_id, display_name").eq("user_id",X).maybeSingle();if(ae=(re==null?void 0:re.display_name)??null,!ae){const{data:J}=await Nt.from("v_users").select("id, email").eq("id",X).maybeSingle();ae=(J==null?void 0:J.email)??X}}catch{ae=X}S(ae)}else S(null)}catch{}})()},[]),p.useEffect(()=>{b?localStorage.getItem(A)||y(!0):(localStorage.removeItem(A),y(!1))},[b]);const E=()=>{try{localStorage.setItem(A,Date.now().toString())}catch{}y(!1)},O=()=>{t("admin"),T("admin")};return l?i.jsx("div",{className:"min-h-screen bg-background text-foreground",children:i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Akun Dinonaktifkan"}),i.jsx("p",{className:"text-gray-600",children:"Akun Anda telah dinonaktifkan dan tidak dapat mengakses sistem."})]})})}):i.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[i.jsxs("div",{className:"mx-auto flex min-h-screen",children:[i.jsxs("aside",{className:`shrink-0 border-r border-sidebar-border bg-sidebar transition-all duration-300 ease-in-out ${n?"w-64":"w-[4.7rem]"} md:flex md:flex-col p-4 sticky top-0 h-screen overflow-y-auto`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[i.jsx("div",{className:"flex items-center justify-center px-2 py-3 transition-all duration-200",children:n?i.jsx("img",{src:"/synka.png",alt:"Synka",className:"h-10 w-auto object-contain transition-all duration-300 scale-125"}):i.jsx("img",{src:"/synka_logo.png",alt:"Synka Logo",className:"h-10 w-auto object-contain transition-all duration-300 scale-110"})}),i.jsx(cm,{className:"mb-4 mt-1"}),i.jsx("nav",{className:"flex flex-col gap-1 flex-1",children:v().map(C=>{const U=m(C);return i.jsx(yIe,{icon:U.icon,label:U.label,active:e===C,onClick:()=>{t(C),T(C)},collapsed:!n,permissions:U.permissions,requireAll:U.requireAll,resourceAny:U.resourceAny,requiredRoles:U.requiredRoles},C)})}),i.jsxs("div",{className:"mt-auto flex flex-col gap-1 pt-6",children:[i.jsx(cm,{className:"mb-3"}),i.jsx($R,{children:i.jsxs("button",{type:"button",className:ye("group grid h-10 w-full grid-cols-[1.125rem,1fr] items-center rounded-md px-3 text-left text-sm transition-all duration-200 gap-2","text-muted-foreground hover:bg-blue-50 hover:text-blue-600 hover:border hover:border-blue-100",!n&&"grid-cols-[1.125rem,0fr]"),title:n?void 0:"Profile",children:[i.jsx(tK,{className:"h-4 w-4 shrink-0 transition-colors group-hover:text-blue-600"}),i.jsx("span",{className:ye("overflow-hidden whitespace-nowrap text-ellipsis transition-opacity duration-200",!n&&"opacity-0 pointer-events-none"),children:"Profile"})]})})]})]}),i.jsxs("main",{className:"flex-1",children:[i.jsx("header",{className:"sticky top-0 z-10 border-b border-border bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:i.jsxs("div",{className:"flex items-center justify-between gap-4 px-4 py-3 md:px-8",children:[i.jsx("div",{className:"flex items-center gap-2 md:gap-3"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx(Ot,{className:"hidden sm:inline-flex bg-success text-success-foreground cursor-help",children:"Online"})}),i.jsx(ce,{children:i.jsx("p",{children:"Status pengguna saat ini: Online"})})]}),i.jsxs("div",{className:"text-right hidden sm:block min-w-0",children:[i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("div",{className:"text-sm font-medium max-w-[28ch] truncate cursor-help",children:((M=a==null?void 0:a.user_metadata)==null?void 0:M.full_name)||"User"})}),i.jsx(ce,{children:i.jsx("p",{children:"Nama lengkap pengguna"})})]}),i.jsxs(ue,{children:[i.jsx(de,{asChild:!0,children:i.jsx("div",{className:"text-xs text-muted-foreground max-w-[32ch] truncate cursor-help",children:a==null?void 0:a.email})}),i.jsx(ce,{children:i.jsx("p",{children:"Alamat email pengguna"})})]})]}),i.jsxs(_u,{children:[i.jsx(ku,{asChild:!0,children:i.jsx(Q,{variant:"ghost",className:"relative h-9 w-9 rounded-full",children:i.jsxs(zr,{className:"h-9 w-9",children:[i.jsx(Us,{src:(B=a==null?void 0:a.user_metadata)==null?void 0:B.avatar_url,alt:((R=a==null?void 0:a.user_metadata)==null?void 0:R.full_name)||(a==null?void 0:a.email)}),i.jsx(qr,{className:"text-sm",children:F((L=a==null?void 0:a.user_metadata)==null?void 0:L.full_name,(a==null?void 0:a.email)||"")})]})})}),i.jsxs(ec,{className:"w-56",align:"end",forceMount:!0,children:[i.jsx(a5,{className:"font-normal",children:i.jsxs("div",{className:"flex flex-col space-y-1",children:[i.jsx("p",{className:"text-sm font-medium leading-none",children:(($=a==null?void 0:a.user_metadata)==null?void 0:$.full_name)||"User"}),i.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:a==null?void 0:a.email})]})}),i.jsx(n_,{}),i.jsx($R,{children:i.jsxs("button",{className:"flex items-center w-full px-2 py-1.5 text-sm text-left hover:bg-accent hover:text-accent-foreground rounded-sm",children:[i.jsx(zv,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Profile"})]})}),i.jsx(n_,{}),i.jsxs(Za,{onClick:I,children:[i.jsx(ZS,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Log out"})]})]})]})]})]})}),i.jsx("section",{className:"px-4 py-6 md:px-8",children:e==="admin"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Admin Panel"}),i.jsx(vIe,{})]}):e==="chat"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Chat Inbox"}),i.jsx(ile,{})]}):e==="analytics"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Analytics Dashboard"}),i.jsx(Kt,{permission:"analytics.read",children:i.jsx(VOe,{})})]}):e==="contacts"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Contacts Management"}),i.jsx(Kt,{permission:"contacts.read",children:i.jsx(fle,{})})]}):e==="platforms"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Connected Platforms"}),i.jsx(Kt,{permission:"channels.read",children:i.jsx(vle,{})})]}):e==="aiagents"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"AI Agents"}),i.jsx(Kt,{permission:"ai_profiles.read",children:i.jsx(cIe,{})})]}):e==="humanagents"?i.jsxs(Kt,{permission:"super_agents.read",fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Human Agents."}),children:[i.jsx("h1",{className:"sr-only",children:"Human Agents"}),i.jsx(uIe,{})]}):e==="permissions"?i.jsx(Rq,{role:nr.MASTER_AGENT,fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Permissions."}),children:i.jsxs(Kt,{permission:"roles.read",children:[i.jsx("h1",{className:"sr-only",children:"Permissions"}),i.jsx(hIe,{})]})}):e==="logs"?i.jsxs(Kt,{permission:"audit_logs.read",fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Logs."}),children:[i.jsx("h1",{className:"sr-only",children:"Logs"}),i.jsx(xIe,{})]}):i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Selamat datang kembali di Synka!"}),i.jsxs("div",{className:"mt-6 grid gap-4 md:max-w-2xl",children:[i.jsx(qg,{step:1,title:"Hubungkan Platform",description:"Mulai terima pesan dari Whatsapp, IG, dan FB Anda!",emoji:""}),i.jsx(qg,{step:2,title:"Buat AI Agent",description:"Jawab pesan masuk dengan Agent AI Anda.",emoji:""}),i.jsx(qg,{step:3,title:"Undang Agen Manusia",description:"Undang tim Anda untuk membantu menjawab chat.",emoji:""}),i.jsx(qg,{step:4,title:"Konek AI Agent ke Inbox",description:"Hubungkan AI Agent dan Human Agent ke platform.",emoji:""})]}),i.jsxs("p",{className:"mt-4 text-sm text-muted-foreground",children:["Butuh bantuan lebih? ",i.jsx("a",{className:"text-brand underline underline-offset-4",href:"#",children:"Lihat Tutorial Youtube kami"})]})]})})]})]}),i.jsx(vre,{open:x,onClose:E,isMasterAgent:d(nr.MASTER_AGENT),pausedByName:_,pausedAt:j,onOpenAdminPanel:d(nr.MASTER_AGENT)?O:void 0})]})};function wIe(){var l,c,u,f;const{user:e,signOut:t}=Vr(),[n,r]=p.useState(!1),a=async()=>{r(!0);try{await t(),Ie.success("Signed out successfully")}catch{Ie.error("Failed to sign out")}finally{r(!1)}};if(!e)return null;const s=(d,h)=>d?d.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2):h.substring(0,2).toUpperCase(),o=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return i.jsxs(Ae,{className:"w-full max-w-md mx-auto",children:[i.jsxs(tt,{className:"text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsxs(zr,{className:"h-20 w-20",children:[i.jsx(Us,{src:(l=e.user_metadata)==null?void 0:l.avatar_url,alt:((c=e.user_metadata)==null?void 0:c.full_name)||e.email}),i.jsx(qr,{className:"text-lg",children:s((u=e.user_metadata)==null?void 0:u.full_name,e.email||"")})]})}),i.jsx(Qe,{className:"text-xl",children:((f=e.user_metadata)==null?void 0:f.full_name)||"User"}),i.jsx(ui,{children:e.email}),i.jsx("div",{className:"flex justify-center mt-2",children:i.jsxs(Ot,{variant:"secondary",className:"flex items-center gap-1",children:[i.jsx(Gs,{className:"w-3 h-3"}),e.email_confirmed_at?"Verified":"Unverified"]})})]}),i.jsxs(Je,{className:"space-y-4",children:[i.jsx(cm,{}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Uv,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.email})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Gh,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Member since"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:o(e.created_at)})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zv,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"User ID"}),i.jsxs("p",{className:"text-sm text-muted-foreground font-mono",children:[e.id.substring(0,8),"..."]})]})]})]}),i.jsx(cm,{}),i.jsxs(Q,{variant:"outline",className:"w-full",onClick:a,disabled:n,children:[i.jsx(ZS,{className:"w-4 h-4 mr-2"}),n?"Signing out...":"Sign Out"]})]})]})}function jIe(){const e=Ka();return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs(Q,{variant:"ghost",onClick:()=>e("/"),className:"mb-4",children:[i.jsx(lp,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your account settings and preferences"})]}),i.jsx(wIe,{})]})})}const _Ie=[{id:"lowercase",test:e=>/[a-z]/.test(e),message:"Minimal 1 huruf kecil (a-z)"},{id:"uppercase",test:e=>/[A-Z]/.test(e),message:"Minimal 1 huruf besar (A-Z)"},{id:"number",test:e=>/[0-9]/.test(e),message:"Minimal 1 angka (0-9)"},{id:"symbol",test:e=>/[^A-Za-z0-9]/.test(e),message:"Minimal 1 simbol (contoh: !@#$)"},{id:"length",test:e=>e.length>=8,message:"Minimal 8 karakter"}],FR=e=>_Ie.filter(t=>!t.test(e)).map(t=>t.message);function BR(){const[e,t]=p.useState(""),[n,r]=p.useState(""),[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[f,d]=p.useState(!1),[h,m]=p.useState(!1),g=Ka();p.useEffect(()=>{(async()=>{try{const j=new URL(window.location.href).searchParams.get("code");j&&await ne.auth.exchangeCodeForSession(j);const{data:{session:k}}=await ne.auth.getSession();k||u("Invalid or expired reset link. Please request a new password reset.")}catch(w){console.warn("Password setup init failed",w)}})()},[]);const v=async b=>{if(b.preventDefault(),l(!0),u(null),!e){u("Kata sandi baru belum diisi."),m(!0),l(!1);return}if(FR(e).length>0){u("Pastikan kata sandi memenuhi semua persyaratan."),m(!0),l(!1);return}if(e!==n){u("Konfirmasi kata sandi tidak sama."),l(!1);return}try{const{error:j}=await ne.auth.updateUser({password:e});if(j)throw j;try{const{data:{user:k}}=await ne.auth.getUser();k&&await ne.from("users_profile").update({password_set:!0}).eq("user_id",k.id)}catch(k){console.warn("Failed to update password_set flag:",k)}d(!0),Ie.success("Password updated successfully!");try{await ne.auth.signOut()}catch{}try{localStorage.removeItem("otpVerified"),localStorage.removeItem("otpRequired"),localStorage.removeItem("app.lastAuthEvent"),localStorage.removeItem("auth.intent")}catch{}setTimeout(()=>{g("/")},1500)}catch(j){console.error("Password reset error:",j),u(j instanceof Error?j.message:"Gagal memperbarui kata sandi."),Ie.error("Gagal memperbarui kata sandi.")}finally{l(!1)}},x=h&&e.length>0,y=p.useMemo(()=>x?FR(e):[],[e,x]);return f?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Ae,{className:"w-full max-w-md",children:[i.jsxs(tt,{className:"text-center",children:[i.jsx(Qe,{className:"text-2xl font-bold text-green-600",children:"Success!"}),i.jsx(ui,{children:"Your password has been updated successfully. You will be redirected to the login page shortly."})]}),i.jsx(Je,{className:"text-center",children:i.jsx(Q,{onClick:()=>g("/"),className:"w-full",children:"Go to Login"})})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Ae,{className:"w-full max-w-md",children:[i.jsxs(tt,{className:"space-y-1",children:[i.jsxs(Q,{variant:"ghost",size:"sm",onClick:()=>g("/"),className:"absolute top-4 left-4",children:[i.jsx(lp,{className:"w-4 h-4 mr-2"}),"Back to Login"]}),i.jsxs("div",{className:"text-center",children:[i.jsx(Qe,{className:"text-2xl font-bold",children:"Reset Password"}),i.jsx(ui,{children:"Enter your new password below"})]})]}),i.jsxs(Je,{children:[c&&i.jsx(om,{className:"mb-4 border-red-200 bg-red-50",children:i.jsx(lm,{className:"text-red-800",children:c})}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"password",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ve,{id:"password",type:a?"text":"password",placeholder:"Enter new password",value:e,onChange:b=>{h||m(!0),t(b.target.value)},className:"pl-10 pr-10",required:!0,minLength:8}),i.jsx(Q,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>s(!a),children:a?i.jsx(WL,{className:"h-4 w-4"}):i.jsx(QS,{className:"h-4 w-4"})})]}),y.length>0&&i.jsx("div",{className:"mt-2 space-y-1",children:y.map(b=>i.jsxs("p",{className:"flex items-center gap-2 text-xs text-red-600",children:[i.jsx(zL,{className:"h-3 w-3"}),b]},b))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Be,{htmlFor:"confirm-password",children:"Confirm New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Yh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ve,{id:"confirm-password",type:a?"text":"password",placeholder:"Confirm new password",value:n,onChange:b=>r(b.target.value),className:"pl-10",required:!0,minLength:8})]})]}),i.jsx(Q,{type:"submit",className:"w-full",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating password..."]}):"Update Password"})]})]})]})})}var kIe=Object.defineProperty,SIe=Object.defineProperties,NIe=Object.getOwnPropertyDescriptors,ry=Object.getOwnPropertySymbols,Mq=Object.prototype.hasOwnProperty,Dq=Object.prototype.propertyIsEnumerable,UR=(e,t,n)=>t in e?kIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,CIe=(e,t)=>{for(var n in t||(t={}))Mq.call(t,n)&&UR(e,n,t[n]);if(ry)for(var n of ry(t))Dq.call(t,n)&&UR(e,n,t[n]);return e},AIe=(e,t)=>SIe(e,NIe(t)),EIe=(e,t)=>{var n={};for(var r in e)Mq.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ry)for(var r of ry(e))t.indexOf(r)<0&&Dq.call(e,r)&&(n[r]=e[r]);return n};function PIe(e){let t=setTimeout(e,0),n=setTimeout(e,10),r=setTimeout(e,50);return[t,n,r]}function TIe(e){let t=p.useRef();return p.useEffect(()=>{t.current=e}),t.current}var OIe=18,$q=40,IIe=`${$q}px`,RIe=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function MIe({containerRef:e,inputRef:t,pushPasswordManagerStrategy:n,isFocused:r}){let[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(!1),f=p.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&a&&o,[a,o,n]),d=p.useCallback(()=>{let h=e.current,m=t.current;if(!h||!m||c||n==="none")return;let g=h,v=g.getBoundingClientRect().left+g.offsetWidth,x=g.getBoundingClientRect().top+g.offsetHeight/2,y=v-OIe,b=x;document.querySelectorAll(RIe).length===0&&document.elementFromPoint(y,b)===h||(s(!0),u(!0))},[e,t,c,n]);return p.useEffect(()=>{let h=e.current;if(!h||n==="none")return;function m(){let v=window.innerWidth-h.getBoundingClientRect().right;l(v>=$q)}m();let g=setInterval(m,1e3);return()=>{clearInterval(g)}},[e,n]),p.useEffect(()=>{let h=r||document.activeElement===t.current;if(n==="none"||!h)return;let m=setTimeout(d,0),g=setTimeout(d,2e3),v=setTimeout(d,5e3),x=setTimeout(()=>{u(!0)},6e3);return()=>{clearTimeout(m),clearTimeout(g),clearTimeout(v),clearTimeout(x)}},[t,r,n,d]),{hasPWMBadge:a,willPushPWMBadge:f,PWM_BADGE_SPACE_WIDTH:IIe}}var Lq=p.createContext({}),Fq=p.forwardRef((e,t)=>{var n=e,{value:r,onChange:a,maxLength:s,textAlign:o="left",pattern:l,placeholder:c,inputMode:u="numeric",onComplete:f,pushPasswordManagerStrategy:d="increase-width",pasteTransformer:h,containerClassName:m,noScriptCSSFallback:g=DIe,render:v,children:x}=n,y=EIe(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),b,w,j,k,_;let[S,A]=p.useState(typeof y.defaultValue=="string"?y.defaultValue:""),N=r??S,T=TIe(N),I=p.useCallback(z=>{a==null||a(z),A(z)},[a]),F=p.useMemo(()=>l?typeof l=="string"?new RegExp(l):l:null,[l]),E=p.useRef(null),O=p.useRef(null),M=p.useRef({value:N,onChange:I,isIOS:typeof window<"u"&&((w=(b=window==null?void 0:window.CSS)==null?void 0:b.supports)==null?void 0:w.call(b,"-webkit-touch-callout","none"))}),B=p.useRef({prev:[(j=E.current)==null?void 0:j.selectionStart,(k=E.current)==null?void 0:k.selectionEnd,(_=E.current)==null?void 0:_.selectionDirection]});p.useImperativeHandle(t,()=>E.current,[]),p.useEffect(()=>{let z=E.current,q=O.current;if(!z||!q)return;M.current.value!==z.value&&M.current.onChange(z.value),B.current.prev=[z.selectionStart,z.selectionEnd,z.selectionDirection];function ie(){if(document.activeElement!==z){D(null),H(null);return}let Se=z.selectionStart,Le=z.selectionEnd,ge=z.selectionDirection,We=z.maxLength,dt=z.value,yt=B.current.prev,Et=-1,te=-1,me;if(dt.length!==0&&Se!==null&&Le!==null){let he=Se===Le,Ut=Se===dt.length&&dt.length<We;if(he&&!Ut){let bt=Se;if(bt===0)Et=0,te=1,me="forward";else if(bt===We)Et=bt-1,te=bt,me="backward";else if(We>1&&dt.length>1){let wt=0;if(yt[0]!==null&&yt[1]!==null){me=bt<yt[1]?"backward":"forward";let xe=yt[0]===yt[1]&&yt[0]<We;me==="backward"&&!xe&&(wt=-1)}Et=wt+bt,te=wt+bt+1}}Et!==-1&&te!==-1&&Et!==te&&E.current.setSelectionRange(Et,te,me)}let Fe=Et!==-1?Et:Se,He=te!==-1?te:Le,Ue=me??ge;D(Fe),H(He),B.current.prev=[Fe,He,Ue]}if(document.addEventListener("selectionchange",ie,{capture:!0}),ie(),document.activeElement===z&&C(!0),!document.getElementById("input-otp-style")){let Se=document.createElement("style");if(Se.id="input-otp-style",document.head.appendChild(Se),Se.sheet){let Le="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Qf(Se.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Qf(Se.sheet,`[data-input-otp]:autofill { ${Le} }`),Qf(Se.sheet,`[data-input-otp]:-webkit-autofill { ${Le} }`),Qf(Se.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Qf(Se.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let oe=()=>{q&&q.style.setProperty("--root-height",`${z.clientHeight}px`)};oe();let be=new ResizeObserver(oe);return be.observe(z),()=>{document.removeEventListener("selectionchange",ie,{capture:!0}),be.disconnect()}},[]);let[R,L]=p.useState(!1),[$,C]=p.useState(!1),[U,D]=p.useState(null),[P,H]=p.useState(null);p.useEffect(()=>{PIe(()=>{var z,q,ie,oe;(z=E.current)==null||z.dispatchEvent(new Event("input"));let be=(q=E.current)==null?void 0:q.selectionStart,Se=(ie=E.current)==null?void 0:ie.selectionEnd,Le=(oe=E.current)==null?void 0:oe.selectionDirection;be!==null&&Se!==null&&(D(be),H(Se),B.current.prev=[be,Se,Le])})},[N,$]),p.useEffect(()=>{T!==void 0&&N!==T&&T.length<s&&N.length===s&&(f==null||f(N))},[s,f,T,N]);let G=MIe({containerRef:O,inputRef:E,pushPasswordManagerStrategy:d,isFocused:$}),Y=p.useCallback(z=>{let q=z.currentTarget.value.slice(0,s);if(q.length>0&&F&&!F.test(q)){z.preventDefault();return}typeof T=="string"&&q.length<T.length&&document.dispatchEvent(new Event("selectionchange")),I(q)},[s,I,T,F]),W=p.useCallback(()=>{var z;if(E.current){let q=Math.min(E.current.value.length,s-1),ie=E.current.value.length;(z=E.current)==null||z.setSelectionRange(q,ie),D(q),H(ie)}C(!0)},[s]),ee=p.useCallback(z=>{var q,ie;let oe=E.current;if(!h&&(!M.current.isIOS||!z.clipboardData||!oe))return;let be=z.clipboardData.getData("text/plain"),Se=h?h(be):be;z.preventDefault();let Le=(q=E.current)==null?void 0:q.selectionStart,ge=(ie=E.current)==null?void 0:ie.selectionEnd,We=(Le!==ge?N.slice(0,Le)+Se+N.slice(ge):N.slice(0,Le)+Se+N.slice(Le)).slice(0,s);if(We.length>0&&F&&!F.test(We))return;oe.value=We,I(We);let dt=Math.min(We.length,s-1),yt=We.length;oe.setSelectionRange(dt,yt),D(dt),H(yt)},[s,I,F,N]),X=p.useMemo(()=>({position:"relative",cursor:y.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[y.disabled]),ae=p.useMemo(()=>({position:"absolute",inset:0,width:G.willPushPWMBadge?`calc(100% + ${G.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:G.willPushPWMBadge?`inset(0 ${G.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[G.PWM_BADGE_SPACE_WIDTH,G.willPushPWMBadge,o]),re=p.useMemo(()=>p.createElement("input",AIe(CIe({autoComplete:y.autoComplete||"one-time-code"},y),{"data-input-otp":!0,"data-input-otp-placeholder-shown":N.length===0||void 0,"data-input-otp-mss":U,"data-input-otp-mse":P,inputMode:u,pattern:F==null?void 0:F.source,"aria-placeholder":c,style:ae,maxLength:s,value:N,ref:E,onPaste:z=>{var q;ee(z),(q=y.onPaste)==null||q.call(y,z)},onChange:Y,onMouseOver:z=>{var q;L(!0),(q=y.onMouseOver)==null||q.call(y,z)},onMouseLeave:z=>{var q;L(!1),(q=y.onMouseLeave)==null||q.call(y,z)},onFocus:z=>{var q;W(),(q=y.onFocus)==null||q.call(y,z)},onBlur:z=>{var q;C(!1),(q=y.onBlur)==null||q.call(y,z)}})),[Y,W,ee,u,ae,s,P,U,y,F==null?void 0:F.source,N]),J=p.useMemo(()=>({slots:Array.from({length:s}).map((z,q)=>{var ie;let oe=$&&U!==null&&P!==null&&(U===P&&q===U||q>=U&&q<P),be=N[q]!==void 0?N[q]:null,Se=N[0]!==void 0?null:(ie=c==null?void 0:c[q])!=null?ie:null;return{char:be,placeholderChar:Se,isActive:oe,hasFakeCaret:oe&&be===null}}),isFocused:$,isHovering:!y.disabled&&R}),[$,R,s,P,U,y.disabled,N]),ve=p.useMemo(()=>v?v(J):p.createElement(Lq.Provider,{value:J},x),[x,J,v]);return p.createElement(p.Fragment,null,g!==null&&p.createElement("noscript",null,p.createElement("style",null,g)),p.createElement("div",{ref:O,"data-input-otp-container":!0,style:X,className:m},ve,p.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},re)))});Fq.displayName="Input";function Qf(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var DIe=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const Bq=p.forwardRef(({className:e,containerClassName:t,...n},r)=>i.jsx(Fq,{ref:r,containerClassName:ye("flex items-center gap-2 has-[:disabled]:opacity-50",t),className:ye("disabled:cursor-not-allowed",e),...n}));Bq.displayName="InputOTP";const Uq=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:ye("flex items-center",e),...t}));Uq.displayName="InputOTPGroup";const Ql=p.forwardRef(({index:e,className:t,...n},r)=>{const a=p.useContext(Lq),{char:s,hasFakeCaret:o,isActive:l}=a.slots[e];return i.jsxs("div",{ref:r,className:ye("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",l&&"z-10 ring-2 ring-ring ring-offset-background",t),...n,children:[s,o&&i.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});Ql.displayName="InputOTPSlot";const $Ie=p.forwardRef(({...e},t)=>i.jsx("div",{ref:t,role:"separator",...e,children:i.jsx(HV,{})}));$Ie.displayName="InputOTPSeparator";function LIe(){const e=Ka(),t=kl(),{user:n,session:r,otpRequired:a,setOtpVerified:s}=Vr(),[o,l]=p.useState(""),[c,u]=p.useState(!1),[f,d]=p.useState(!1),[h,m]=p.useState(null),[g,v]=p.useState(null),[x,y]=p.useState(!1),[b,w]=p.useState(0),[j,k]=p.useState(0);p.useEffect(()=>{v((n==null?void 0:n.email)??null),(!n||!a)&&e("/",{replace:!0});try{const N=new URL(window.location.href),T=N.searchParams.get("type"),I=!!N.searchParams.get("code"),E=(window.location.hash||"").includes("access_token=");y(T==="recovery"||I||E);const O=localStorage.getItem("otpCooldownUntil"),M=O?parseInt(O,10):0;M&&M>Date.now()&&w(M)}catch{}},[n,a,e]),p.useEffect(()=>{if(!b){k(0);return}const N=()=>{const I=Math.ceil((b-Date.now())/1e3);if(I<=0){k(0),w(0);try{localStorage.removeItem("otpCooldownUntil")}catch{}}else k(I)};N();const T=setInterval(N,1e3);return()=>clearInterval(T)},[b]);const _=async N=>{var T,I;N.preventDefault(),u(!0),m(null);try{const F=n==null?void 0:n.email,{data:E,error:O}=await ne.rpc("verify_email_2fa",{p_code:o,p_session_minutes:10,p_user:n==null?void 0:n.id});if(O)throw O;if(!E)throw new Error("Invalid code");s(!0);try{localStorage.setItem("otpVerified","true"),localStorage.removeItem("auth.intent")}catch{}if(Ie.success("Verification successful"),(((T=t==null?void 0:t.state)==null?void 0:T.intent)||null)==="recovery"||x)e("/reset-password",{replace:!0});else{const B=((I=t==null?void 0:t.state)==null?void 0:I.from)||"/";e(B,{replace:!0})}}catch(F){m((F==null?void 0:F.message)||"Verification failed"),Ie.error("Verification failed")}finally{u(!1)}},S=async()=>{if(!(j>0)){d(!0);try{await ne.functions.invoke("send-2fa-login-email",{headers:r!=null&&r.access_token?{Authorization:`Bearer ${r.access_token}`}:void 0}),Ie.success("A new code was sent");const N=Date.now()+3e4;w(N);try{localStorage.setItem("otpCooldownUntil",String(N))}catch{}}catch{Ie.error("Could not resend code")}finally{d(!1)}}},A=async()=>{try{await ne.auth.signOut()}catch{}try{localStorage.removeItem("otpVerified"),localStorage.removeItem("otpRequired"),localStorage.removeItem("auth.intent"),localStorage.removeItem("otpCooldownUntil")}catch{}e("/",{replace:!0})};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Ae,{className:"w-full max-w-md",children:[i.jsxs(tt,{className:"space-y-1 text-center",children:[i.jsx(Qe,{className:"text-2xl font-bold",children:"Enter verification code"}),i.jsxs(ui,{children:["We sent a 6-digit code to ",g?i.jsx("span",{className:"font-medium",children:g}):"your email","."]})]}),i.jsxs(Je,{children:[h&&i.jsx(om,{className:"mb-4 border-red-200 bg-red-50",children:i.jsx(lm,{className:"text-red-800",children:h})}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx(Bq,{maxLength:6,value:o,onChange:l,autoFocus:!0,children:i.jsxs(Uq,{children:[i.jsx(Ql,{index:0}),i.jsx(Ql,{index:1}),i.jsx(Ql,{index:2}),i.jsx(Ql,{index:3}),i.jsx(Ql,{index:4}),i.jsx(Ql,{index:5})]})})}),i.jsx(Q,{type:"submit",className:"w-full",disabled:c||o.length!==6,children:c?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify"}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsx("span",{children:"Didn't get the code?"}),i.jsx(Q,{type:"button",variant:"link",className:"px-0",onClick:S,disabled:f||j>0,children:f?"Resending...":j>0?`Resend in ${j}s`:"Resend code"})]}),i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(Q,{type:"button",variant:"ghost",onClick:A,children:"Sign out"})})]})]})]})})}function FIe(){const e=Ka();return p.useEffect(()=>{(async()=>{try{try{const n=[];for(let a=0;a<localStorage.length;a++){const s=localStorage.key(a);s&&n.push(s)}n.forEach(a=>{try{localStorage.removeItem(a)}catch{}});const r=[];for(let a=0;a<sessionStorage.length;a++){const s=sessionStorage.key(a);s&&r.push(s)}r.forEach(a=>{try{sessionStorage.removeItem(a)}catch{}})}catch(n){console.warn("Error clearing cache:",n)}await ne.auth.signOut()}catch{}e("/",{replace:!0})})()},[e]),null}const BIe=()=>{const e=kl();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function UIe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const zIe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,qIe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,WIe={};function zR(e,t){return(WIe.jsx?qIe:zIe).test(e)}const HIe=/[ \t\n\f\r]/g;function VIe(e){return typeof e=="object"?e.type==="text"?qR(e.value):!1:qR(e)}function qR(e){return e.replace(HIe,"")===""}class Up{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}Up.prototype.normal={};Up.prototype.property={};Up.prototype.space=void 0;function zq(e,t){const n={},r={};for(const a of e)Object.assign(n,a.property),Object.assign(r,a.normal);return new Up(n,r,t)}function Lk(e){return e.toLowerCase()}class Pa{constructor(t,n){this.attribute=n,this.property=t}}Pa.prototype.attribute="";Pa.prototype.booleanish=!1;Pa.prototype.boolean=!1;Pa.prototype.commaOrSpaceSeparated=!1;Pa.prototype.commaSeparated=!1;Pa.prototype.defined=!1;Pa.prototype.mustUseProperty=!1;Pa.prototype.number=!1;Pa.prototype.overloadedBoolean=!1;Pa.prototype.property="";Pa.prototype.spaceSeparated=!1;Pa.prototype.space=void 0;let KIe=0;const Tt=nu(),tr=nu(),Fk=nu(),Oe=nu(),_n=nu(),id=nu(),Oa=nu();function nu(){return 2**++KIe}const Bk=Object.freeze(Object.defineProperty({__proto__:null,boolean:Tt,booleanish:tr,commaOrSpaceSeparated:Oa,commaSeparated:id,number:Oe,overloadedBoolean:Fk,spaceSeparated:_n},Symbol.toStringTag,{value:"Module"})),pj=Object.keys(Bk);class kA extends Pa{constructor(t,n,r,a){let s=-1;if(super(t,n),WR(this,"space",a),typeof r=="number")for(;++s<pj.length;){const o=pj[s];WR(this,pj[s],(r&Bk[o])===Bk[o])}}}kA.prototype.defined=!0;function WR(e,t,n){n&&(e[t]=n)}function wf(e){const t={},n={};for(const[r,a]of Object.entries(e.properties)){const s=new kA(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Lk(r)]=r,n[Lk(s.attribute)]=r}return new Up(t,n,e.space)}const qq=wf({properties:{ariaActiveDescendant:null,ariaAtomic:tr,ariaAutoComplete:null,ariaBusy:tr,ariaChecked:tr,ariaColCount:Oe,ariaColIndex:Oe,ariaColSpan:Oe,ariaControls:_n,ariaCurrent:null,ariaDescribedBy:_n,ariaDetails:null,ariaDisabled:tr,ariaDropEffect:_n,ariaErrorMessage:null,ariaExpanded:tr,ariaFlowTo:_n,ariaGrabbed:tr,ariaHasPopup:null,ariaHidden:tr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:_n,ariaLevel:Oe,ariaLive:null,ariaModal:tr,ariaMultiLine:tr,ariaMultiSelectable:tr,ariaOrientation:null,ariaOwns:_n,ariaPlaceholder:null,ariaPosInSet:Oe,ariaPressed:tr,ariaReadOnly:tr,ariaRelevant:null,ariaRequired:tr,ariaRoleDescription:_n,ariaRowCount:Oe,ariaRowIndex:Oe,ariaRowSpan:Oe,ariaSelected:tr,ariaSetSize:Oe,ariaSort:null,ariaValueMax:Oe,ariaValueMin:Oe,ariaValueNow:Oe,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Wq(e,t){return t in e?e[t]:t}function Hq(e,t){return Wq(e,t.toLowerCase())}const GIe=wf({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:id,acceptCharset:_n,accessKey:_n,action:null,allow:null,allowFullScreen:Tt,allowPaymentRequest:Tt,allowUserMedia:Tt,alt:null,as:null,async:Tt,autoCapitalize:null,autoComplete:_n,autoFocus:Tt,autoPlay:Tt,blocking:_n,capture:null,charSet:null,checked:Tt,cite:null,className:_n,cols:Oe,colSpan:null,content:null,contentEditable:tr,controls:Tt,controlsList:_n,coords:Oe|id,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Tt,defer:Tt,dir:null,dirName:null,disabled:Tt,download:Fk,draggable:tr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Tt,formTarget:null,headers:_n,height:Oe,hidden:Fk,high:Oe,href:null,hrefLang:null,htmlFor:_n,httpEquiv:_n,id:null,imageSizes:null,imageSrcSet:null,inert:Tt,inputMode:null,integrity:null,is:null,isMap:Tt,itemId:null,itemProp:_n,itemRef:_n,itemScope:Tt,itemType:_n,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Tt,low:Oe,manifest:null,max:null,maxLength:Oe,media:null,method:null,min:null,minLength:Oe,multiple:Tt,muted:Tt,name:null,nonce:null,noModule:Tt,noValidate:Tt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Tt,optimum:Oe,pattern:null,ping:_n,placeholder:null,playsInline:Tt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Tt,referrerPolicy:null,rel:_n,required:Tt,reversed:Tt,rows:Oe,rowSpan:Oe,sandbox:_n,scope:null,scoped:Tt,seamless:Tt,selected:Tt,shadowRootClonable:Tt,shadowRootDelegatesFocus:Tt,shadowRootMode:null,shape:null,size:Oe,sizes:null,slot:null,span:Oe,spellCheck:tr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Oe,step:null,style:null,tabIndex:Oe,target:null,title:null,translate:null,type:null,typeMustMatch:Tt,useMap:null,value:tr,width:Oe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:_n,axis:null,background:null,bgColor:null,border:Oe,borderColor:null,bottomMargin:Oe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Tt,declare:Tt,event:null,face:null,frame:null,frameBorder:null,hSpace:Oe,leftMargin:Oe,link:null,longDesc:null,lowSrc:null,marginHeight:Oe,marginWidth:Oe,noResize:Tt,noHref:Tt,noShade:Tt,noWrap:Tt,object:null,profile:null,prompt:null,rev:null,rightMargin:Oe,rules:null,scheme:null,scrolling:tr,standby:null,summary:null,text:null,topMargin:Oe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Oe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Tt,disableRemotePlayback:Tt,prefix:null,property:null,results:Oe,security:null,unselectable:null},space:"html",transform:Hq}),YIe=wf({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Oa,accentHeight:Oe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Oe,amplitude:Oe,arabicForm:null,ascent:Oe,attributeName:null,attributeType:null,azimuth:Oe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Oe,by:null,calcMode:null,capHeight:Oe,className:_n,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Oe,diffuseConstant:Oe,direction:null,display:null,dur:null,divisor:Oe,dominantBaseline:null,download:Tt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Oe,enableBackground:null,end:null,event:null,exponent:Oe,externalResourcesRequired:null,fill:null,fillOpacity:Oe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:id,g2:id,glyphName:id,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Oe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Oe,horizOriginX:Oe,horizOriginY:Oe,id:null,ideographic:Oe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Oe,k:Oe,k1:Oe,k2:Oe,k3:Oe,k4:Oe,kernelMatrix:Oa,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Oe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Oe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Oe,overlineThickness:Oe,paintOrder:null,panose1:null,path:null,pathLength:Oe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:_n,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Oe,pointsAtY:Oe,pointsAtZ:Oe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Oa,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Oa,rev:Oa,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Oa,requiredFeatures:Oa,requiredFonts:Oa,requiredFormats:Oa,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Oe,specularExponent:Oe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Oe,strikethroughThickness:Oe,string:null,stroke:null,strokeDashArray:Oa,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Oe,strokeOpacity:Oe,strokeWidth:null,style:null,surfaceScale:Oe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Oa,tabIndex:Oe,tableValues:null,target:null,targetX:Oe,targetY:Oe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Oa,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Oe,underlineThickness:Oe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Oe,values:null,vAlphabetic:Oe,vMathematical:Oe,vectorEffect:null,vHanging:Oe,vIdeographic:Oe,version:null,vertAdvY:Oe,vertOriginX:Oe,vertOriginY:Oe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Oe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Wq}),Vq=wf({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Kq=wf({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Hq}),Gq=wf({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),XIe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},JIe=/[A-Z]/g,HR=/-[a-z]/g,QIe=/^data[-\w.:]+$/i;function ZIe(e,t){const n=Lk(t);let r=t,a=Pa;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&QIe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(HR,tRe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!HR.test(s)){let o=s.replace(JIe,eRe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}a=kA}return new a(r,t)}function eRe(e){return"-"+e.toLowerCase()}function tRe(e){return e.charAt(1).toUpperCase()}const nRe=zq([qq,GIe,Vq,Kq,Gq],"html"),SA=zq([qq,YIe,Vq,Kq,Gq],"svg");function rRe(e){return e.join(" ").trim()}var NA={},VR=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,aRe=/\n/g,iRe=/^\s*/,sRe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,oRe=/^:\s*/,lRe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,cRe=/^[;\s]*/,uRe=/^\s+|\s+$/g,dRe=`
`,KR="/",GR="*",tc="",fRe="comment",hRe="declaration",mRe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function a(g){var v=g.match(aRe);v&&(n+=v.length);var x=g.lastIndexOf(dRe);r=~x?g.length-x:r+g.length}function s(){var g={line:n,column:r};return function(v){return v.position=new o(g),u(),v}}function o(g){this.start=g,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(g){var v=new Error(t.source+":"+n+":"+r+": "+g);if(v.reason=g,v.filename=t.source,v.line=n,v.column=r,v.source=e,!t.silent)throw v}function c(g){var v=g.exec(e);if(v){var x=v[0];return a(x),e=e.slice(x.length),v}}function u(){c(iRe)}function f(g){var v;for(g=g||[];v=d();)v!==!1&&g.push(v);return g}function d(){var g=s();if(!(KR!=e.charAt(0)||GR!=e.charAt(1))){for(var v=2;tc!=e.charAt(v)&&(GR!=e.charAt(v)||KR!=e.charAt(v+1));)++v;if(v+=2,tc===e.charAt(v-1))return l("End of comment missing");var x=e.slice(2,v-2);return r+=2,a(x),e=e.slice(v),r+=2,g({type:fRe,comment:x})}}function h(){var g=s(),v=c(sRe);if(v){if(d(),!c(oRe))return l("property missing ':'");var x=c(lRe),y=g({type:hRe,property:YR(v[0].replace(VR,tc)),value:x?YR(x[0].replace(VR,tc)):tc});return c(cRe),y}}function m(){var g=[];f(g);for(var v;v=h();)v!==!1&&(g.push(v),f(g));return g}return u(),m()};function YR(e){return e?e.replace(uRe,tc):tc}var pRe=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(NA,"__esModule",{value:!0});NA.default=vRe;var gRe=pRe(mRe);function vRe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,gRe.default)(e),a=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,l=s.value;a?t(o,l,s):l&&(n=n||{},n[o]=l)}}),n}var h0={};Object.defineProperty(h0,"__esModule",{value:!0});h0.camelCase=void 0;var xRe=/^--[a-zA-Z0-9_-]+$/,yRe=/-([a-z])/g,bRe=/^[^-]+$/,wRe=/^-(webkit|moz|ms|o|khtml)-/,jRe=/^-(ms)-/,_Re=function(e){return!e||bRe.test(e)||xRe.test(e)},kRe=function(e,t){return t.toUpperCase()},XR=function(e,t){return"".concat(t,"-")},SRe=function(e,t){return t===void 0&&(t={}),_Re(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(jRe,XR):e=e.replace(wRe,XR),e.replace(yRe,kRe))};h0.camelCase=SRe;var NRe=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},CRe=NRe(NA),ARe=h0;function Uk(e,t){var n={};return!e||typeof e!="string"||(0,CRe.default)(e,function(r,a){r&&a&&(n[(0,ARe.camelCase)(r,t)]=a)}),n}Uk.default=Uk;var ERe=Uk;const PRe=fn(ERe),Yq=Xq("end"),CA=Xq("start");function Xq(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function TRe(e){const t=CA(e),n=Yq(e);if(t&&n)return{start:t,end:n}}function Ah(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?JR(e.position):"start"in e||"end"in e?JR(e):"line"in e||"column"in e?zk(e):""}function zk(e){return QR(e&&e.line)+":"+QR(e&&e.column)}function JR(e){return zk(e&&e.start)+"-"+zk(e&&e.end)}function QR(e){return e&&typeof e=="number"?e:1}class Kr extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let a="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?a=t:!s.cause&&t&&(o=!0,a=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=l?l.line:void 0,this.name=Ah(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Kr.prototype.file="";Kr.prototype.name="";Kr.prototype.reason="";Kr.prototype.message="";Kr.prototype.stack="";Kr.prototype.column=void 0;Kr.prototype.line=void 0;Kr.prototype.ancestors=void 0;Kr.prototype.cause=void 0;Kr.prototype.fatal=void 0;Kr.prototype.place=void 0;Kr.prototype.ruleId=void 0;Kr.prototype.source=void 0;const AA={}.hasOwnProperty,ORe=new Map,IRe=/[A-Z]/g,RRe=new Set(["table","tbody","thead","tfoot","tr"]),MRe=new Set(["td","th"]),Jq="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function DRe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=WRe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=qRe(n,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?SA:nRe,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Qq(a,e,void 0);return s&&typeof s!="string"?s:a.create(e,a.Fragment,{children:s||void 0},void 0)}function Qq(e,t,n){if(t.type==="element")return $Re(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return LRe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return BRe(e,t,n);if(t.type==="mdxjsEsm")return FRe(e,t);if(t.type==="root")return URe(e,t,n);if(t.type==="text")return zRe(e,t)}function $Re(e,t,n){const r=e.schema;let a=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(a=SA,e.schema=a),e.ancestors.push(t);const s=eW(e,t.tagName,!1),o=HRe(e,t);let l=PA(e,t);return RRe.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!VIe(c):!0})),Zq(e,o,s,t),EA(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function LRe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Xm(e,t.position)}function FRe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Xm(e,t.position)}function BRe(e,t,n){const r=e.schema;let a=r;t.name==="svg"&&r.space==="html"&&(a=SA,e.schema=a),e.ancestors.push(t);const s=t.name===null?e.Fragment:eW(e,t.name,!0),o=VRe(e,t),l=PA(e,t);return Zq(e,o,s,t),EA(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function URe(e,t,n){const r={};return EA(r,PA(e,t)),e.create(t,e.Fragment,r,n)}function zRe(e,t){return t.value}function Zq(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function EA(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function qRe(e,t,n){return r;function r(a,s,o,l){const u=Array.isArray(o.children)?n:t;return l?u(s,o,l):u(s,o)}}function WRe(e,t){return n;function n(r,a,s,o){const l=Array.isArray(s.children),c=CA(r);return t(a,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function HRe(e,t){const n={};let r,a;for(a in t.properties)if(a!=="children"&&AA.call(t.properties,a)){const s=KRe(e,a,t.properties[a]);if(s){const[o,l]=s;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&MRe.has(t.tagName)?r=l:n[o]=l}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function VRe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Xm(e,t.position);else{const a=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,s=e.evaluater.evaluateExpression(l.expression)}else Xm(e,t.position);else s=r.value===null?!0:r.value;n[a]=s}return n}function PA(e,t){const n=[];let r=-1;const a=e.passKeys?new Map:ORe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const u=a.get(c)||0;o=c+"-"+u,a.set(c,u+1)}}const l=Qq(e,s,o);l!==void 0&&n.push(l)}return n}function KRe(e,t,n){const r=ZIe(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?UIe(n):rRe(n)),r.property==="style"){let a=typeof n=="object"?n:GRe(e,String(n));return e.stylePropertyNameCase==="css"&&(a=YRe(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&r.space?XIe[r.property]||r.property:r.attribute,n]}}function GRe(e,t){try{return PRe(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,a=new Kr("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=Jq+"#cannot-parse-style-attribute",a}}function eW(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let s=-1,o;for(;++s<a.length;){const l=zR(a[s])?{type:"Identifier",name:a[s]}:{type:"Literal",value:a[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}r=o}else r=zR(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const a=r.value;return AA.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(r);Xm(e)}function Xm(e,t){const n=new Kr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Jq+"#cannot-handle-mdx-estrees-without-createevaluater",n}function YRe(e){const t={};let n;for(n in e)AA.call(e,n)&&(t[XRe(n)]=e[n]);return t}function XRe(e){let t=e.replace(IRe,JRe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function JRe(e){return"-"+e.toLowerCase()}const gj={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},QRe={};function TA(e,t){const n=QRe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return tW(e,r,a)}function tW(e,t,n){if(ZRe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ZR(e.children,t,n)}return Array.isArray(e)?ZR(e,t,n):""}function ZR(e,t,n){const r=[];let a=-1;for(;++a<e.length;)r[a]=tW(e[a],t,n);return r.join("")}function ZRe(e){return!!(e&&typeof e=="object")}const eM=document.createElement("i");function OA(e){const t="&"+e+";";eM.innerHTML=t;const n=eM.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function za(e,t,n,r){const a=e.length;let s=0,o;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function si(e,t){return e.length>0?(za(e,e.length,0,t),e):t}const tM={}.hasOwnProperty;function nW(e){const t={};let n=-1;for(;++n<e.length;)eMe(t,e[n]);return t}function eMe(e,t){let n;for(n in t){const a=(tM.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){tM.call(a,o)||(a[o]=[]);const l=s[o];tMe(a[o],Array.isArray(l)?l:l?[l]:[])}}}function tMe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);za(e,0,0,r)}function rW(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Ui(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const ra=Ml(/[A-Za-z]/),Wr=Ml(/[\dA-Za-z]/),nMe=Ml(/[#-'*+\--9=?A-Z^-~]/);function ay(e){return e!==null&&(e<32||e===127)}const qk=Ml(/\d/),rMe=Ml(/[\dA-Fa-f]/),aMe=Ml(/[!-/:-@[-`{-~]/);function vt(e){return e!==null&&e<-2}function bn(e){return e!==null&&(e<0||e===32)}function Ht(e){return e===-2||e===-1||e===32}const m0=Ml(new RegExp("\\p{P}|\\p{S}","u")),zc=Ml(/\s/);function Ml(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function jf(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Wr(e.charCodeAt(n+1))&&Wr(e.charCodeAt(n+2)))a=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=e.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),a=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+a+1,o=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function Yt(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return Ht(c)?(e.enter(n),l(c)):t(c)}function l(c){return Ht(c)&&s++<a?(e.consume(c),l):(e.exit(n),t(c))}}const iMe={tokenize:sMe};function sMe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Yt(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),s(l)}function s(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return vt(l)?(e.consume(l),e.exit("chunkText"),s):(e.consume(l),o)}}const oMe={tokenize:lMe},nM={tokenize:cMe};function lMe(e){const t=this,n=[];let r=0,a,s,o;return l;function l(w){if(r<n.length){const j=n[r];return t.containerState=j[1],e.attempt(j[0].continuation,c,u)(w)}return u(w)}function c(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&b();const j=t.events.length;let k=j,_;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){_=t.events[k][1].end;break}y(r);let S=j;for(;S<t.events.length;)t.events[S][1].end={..._},S++;return za(t.events,k+1,0,t.events.slice(j)),t.events.length=S,u(w)}return l(w)}function u(w){if(r===n.length){if(!a)return h(w);if(a.currentConstruct&&a.currentConstruct.concrete)return g(w);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(nM,f,d)(w)}function f(w){return a&&b(),y(r),h(w)}function d(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,g(w)}function h(w){return t.containerState={},e.attempt(nM,m,g)(w)}function m(w){return r++,n.push([t.currentConstruct,t.containerState]),h(w)}function g(w){if(w===null){a&&b(),y(0),e.consume(w);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:s}),v(w)}function v(w){if(w===null){x(e.exit("chunkFlow"),!0),y(0),e.consume(w);return}return vt(w)?(e.consume(w),x(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(w),v)}function x(w,j){const k=t.sliceStream(w);if(j&&k.push(null),w.previous=s,s&&(s.next=w),s=w,a.defineSkip(w.start),a.write(k),t.parser.lazy[w.start.line]){let _=a.events.length;for(;_--;)if(a.events[_][1].start.offset<o&&(!a.events[_][1].end||a.events[_][1].end.offset>o))return;const S=t.events.length;let A=S,N,T;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(N){T=t.events[A][1].end;break}N=!0}for(y(r),_=S;_<t.events.length;)t.events[_][1].end={...T},_++;za(t.events,A+1,0,t.events.slice(S)),t.events.length=_}}function y(w){let j=n.length;for(;j-- >w;){const k=n[j];t.containerState=k[1],k[0].exit.call(t,e)}n.length=w}function b(){a.write([null]),s=void 0,a=void 0,t.containerState._closeFlow=void 0}}function cMe(e,t,n){return Yt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Yd(e){if(e===null||bn(e)||zc(e))return 1;if(m0(e))return 2}function p0(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const s=e[a].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const Wk={name:"attention",resolveAll:uMe,tokenize:dMe};function uMe(e,t){let n=-1,r,a,s,o,l,c,u,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},h={...e[n][1].start};rM(d,-c),rM(h,c),o={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},s={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},a={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=si(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=si(u,[["enter",a,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=si(u,p0(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=si(u,[["exit",s,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,u=si(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,za(e,r-1,n-r+3,u),n=r+u.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function dMe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=Yd(r);let s;return o;function o(c){return s=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===s)return e.consume(c),l;const u=e.exit("attentionSequence"),f=Yd(c),d=!f||f===2&&a||n.includes(c),h=!a||a===2&&f||n.includes(r);return u._open=!!(s===42?d:d&&(a||!h)),u._close=!!(s===42?h:h&&(f||!d)),t(c)}}function rM(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const fMe={name:"autolink",tokenize:hMe};function hMe(e,t,n){let r=0;return a;function a(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(m){return ra(m)?(e.consume(m),o):m===64?n(m):u(m)}function o(m){return m===43||m===45||m===46||Wr(m)?(r=1,l(m)):u(m)}function l(m){return m===58?(e.consume(m),r=0,c):(m===43||m===45||m===46||Wr(m))&&r++<32?(e.consume(m),l):(r=0,u(m))}function c(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||ay(m)?n(m):(e.consume(m),c)}function u(m){return m===64?(e.consume(m),f):nMe(m)?(e.consume(m),u):n(m)}function f(m){return Wr(m)?d(m):n(m)}function d(m){return m===46?(e.consume(m),r=0,f):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):h(m)}function h(m){if((m===45||Wr(m))&&r++<63){const g=m===45?h:d;return e.consume(m),g}return n(m)}}const zp={partial:!0,tokenize:mMe};function mMe(e,t,n){return r;function r(s){return Ht(s)?Yt(e,a,"linePrefix")(s):a(s)}function a(s){return s===null||vt(s)?t(s):n(s)}}const aW={continuation:{tokenize:gMe},exit:vMe,name:"blockQuote",tokenize:pMe};function pMe(e,t,n){const r=this;return a;function a(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Ht(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function gMe(e,t,n){const r=this;return a;function a(o){return Ht(o)?Yt(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(aW,t,n)(o)}}function vMe(e){e.exit("blockQuote")}const iW={name:"characterEscape",tokenize:xMe};function xMe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),a}function a(s){return aMe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const sW={name:"characterReference",tokenize:yMe};function yMe(e,t,n){const r=this;let a=0,s,o;return l;function l(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),c}function c(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=Wr,f(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=rMe,f):(e.enter("characterReferenceValue"),s=7,o=qk,f(d))}function f(d){if(d===59&&a){const h=e.exit("characterReferenceValue");return o===Wr&&!OA(r.sliceSerialize(h))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&a++<s?(e.consume(d),f):n(d)}}const aM={partial:!0,tokenize:wMe},iM={concrete:!0,name:"codeFenced",tokenize:bMe};function bMe(e,t,n){const r=this,a={partial:!0,tokenize:k};let s=0,o=0,l;return c;function c(_){return u(_)}function u(_){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,l=_,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(_)}function f(_){return _===l?(o++,e.consume(_),f):o<3?n(_):(e.exit("codeFencedFenceSequence"),Ht(_)?Yt(e,d,"whitespace")(_):d(_))}function d(_){return _===null||vt(_)?(e.exit("codeFencedFence"),r.interrupt?t(_):e.check(aM,v,j)(_)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(_))}function h(_){return _===null||vt(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(_)):Ht(_)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Yt(e,m,"whitespace")(_)):_===96&&_===l?n(_):(e.consume(_),h)}function m(_){return _===null||vt(_)?d(_):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(_))}function g(_){return _===null||vt(_)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(_)):_===96&&_===l?n(_):(e.consume(_),g)}function v(_){return e.attempt(a,j,x)(_)}function x(_){return e.enter("lineEnding"),e.consume(_),e.exit("lineEnding"),y}function y(_){return s>0&&Ht(_)?Yt(e,b,"linePrefix",s+1)(_):b(_)}function b(_){return _===null||vt(_)?e.check(aM,v,j)(_):(e.enter("codeFlowValue"),w(_))}function w(_){return _===null||vt(_)?(e.exit("codeFlowValue"),b(_)):(e.consume(_),w)}function j(_){return e.exit("codeFenced"),t(_)}function k(_,S,A){let N=0;return T;function T(M){return _.enter("lineEnding"),_.consume(M),_.exit("lineEnding"),I}function I(M){return _.enter("codeFencedFence"),Ht(M)?Yt(_,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):F(M)}function F(M){return M===l?(_.enter("codeFencedFenceSequence"),E(M)):A(M)}function E(M){return M===l?(N++,_.consume(M),E):N>=o?(_.exit("codeFencedFenceSequence"),Ht(M)?Yt(_,O,"whitespace")(M):O(M)):A(M)}function O(M){return M===null||vt(M)?(_.exit("codeFencedFence"),S(M)):A(M)}}}function wMe(e,t,n){const r=this;return a;function a(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const vj={name:"codeIndented",tokenize:_Me},jMe={partial:!0,tokenize:kMe};function _Me(e,t,n){const r=this;return a;function a(u){return e.enter("codeIndented"),Yt(e,s,"linePrefix",5)(u)}function s(u){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):vt(u)?e.attempt(jMe,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||vt(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function kMe(e,t,n){const r=this;return a;function a(o){return r.parser.lazy[r.now().line]?n(o):vt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):Yt(e,s,"linePrefix",5)(o)}function s(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):vt(o)?a(o):n(o)}}const SMe={name:"codeText",previous:CMe,resolve:NMe,tokenize:AMe};function NMe(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function CMe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function AMe(e,t,n){let r=0,a,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),l(d)}function l(d){return d===96?(e.consume(d),r++,l):(e.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),c):d===96?(s=e.enter("codeTextSequence"),a=0,f(d)):vt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||vt(d)?(e.exit("codeTextData"),c(d)):(e.consume(d),u)}function f(d){return d===96?(e.consume(d),a++,f):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",u(d))}}class EMe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const a=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return r&&Zf(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Zf(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Zf(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Zf(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Zf(this.left,n.reverse())}}}function Zf(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function oW(e){const t={};let n=-1,r,a,s,o,l,c,u;const f=new EMe(e);for(;++n<f.length;){for(;n in t;)n=t[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,PMe(f,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,a=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(f.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(r[1].end={...f.get(a)[1].start},l=f.slice(a,n),l.unshift(r),f.splice(a,n-a+1,l))}}return za(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function PMe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let a=t-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let f,d,h=-1,m=n,g=0,v=0;const x=[v];for(;m;){for(;e.get(++a)[1]!==m;);s.push(a),m._tokenizer||(f=r.sliceStream(m),m.next||f.push(null),d&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=m,m=m.next}for(m=n;++h<l.length;)l[h][0]==="exit"&&l[h-1][0]==="enter"&&l[h][1].type===l[h-1][1].type&&l[h][1].start.line!==l[h][1].end.line&&(v=h+1,x.push(v),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):x.pop(),h=x.length;h--;){const y=l.slice(x[h],x[h+1]),b=s.pop();c.push([b,b+y.length-1]),e.splice(b,2,y)}for(c.reverse(),h=-1;++h<c.length;)u[g+c[h][0]]=g+c[h][1],g+=c[h][1]-c[h][0]-1;return u}const TMe={resolve:IMe,tokenize:RMe},OMe={partial:!0,tokenize:MMe};function IMe(e){return oW(e),e}function RMe(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?s(l):vt(l)?e.check(OMe,o,s)(l):(e.consume(l),a)}function s(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function MMe(e,t,n){const r=this;return a;function a(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Yt(e,s,"linePrefix")}function s(o){if(o===null||vt(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function lW(e,t,n,r,a,s,o,l,c){const u=c||Number.POSITIVE_INFINITY;let f=0;return d;function d(y){return y===60?(e.enter(r),e.enter(a),e.enter(s),e.consume(y),e.exit(s),h):y===null||y===32||y===41||ay(y)?n(y):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(y))}function h(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(a),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===62?(e.exit("chunkString"),e.exit(l),h(y)):y===null||y===60||vt(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===60||y===62||y===92?(e.consume(y),m):m(y)}function v(y){return!f&&(y===null||y===41||bn(y))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(y)):f<u&&y===40?(e.consume(y),f++,v):y===41?(e.consume(y),f--,v):y===null||y===32||y===40||ay(y)?n(y):(e.consume(y),y===92?x:v)}function x(y){return y===40||y===41||y===92?(e.consume(y),v):v(y)}}function cW(e,t,n,r,a,s){const o=this;let l=0,c;return u;function u(m){return e.enter(r),e.enter(a),e.consume(m),e.exit(a),e.enter(s),f}function f(m){return l>999||m===null||m===91||m===93&&!c||m===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(e.exit(s),e.enter(a),e.consume(m),e.exit(a),e.exit(r),t):vt(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===null||m===91||m===93||vt(m)||l++>999?(e.exit("chunkString"),f(m)):(e.consume(m),c||(c=!Ht(m)),m===92?h:d)}function h(m){return m===91||m===92||m===93?(e.consume(m),l++,d):d(m)}}function uW(e,t,n,r,a,s){let o;return l;function l(h){return h===34||h===39||h===40?(e.enter(r),e.enter(a),e.consume(h),e.exit(a),o=h===40?41:h,c):n(h)}function c(h){return h===o?(e.enter(a),e.consume(h),e.exit(a),e.exit(r),t):(e.enter(s),u(h))}function u(h){return h===o?(e.exit(s),c(o)):h===null?n(h):vt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Yt(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===o||h===null||vt(h)?(e.exit("chunkString"),u(h)):(e.consume(h),h===92?d:f)}function d(h){return h===o||h===92?(e.consume(h),f):f(h)}}function Eh(e,t){let n;return r;function r(a){return vt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):Ht(a)?Yt(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}const DMe={name:"definition",tokenize:LMe},$Me={partial:!0,tokenize:FMe};function LMe(e,t,n){const r=this;let a;return s;function s(m){return e.enter("definition"),o(m)}function o(m){return cW.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function l(m){return a=Ui(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),c):n(m)}function c(m){return bn(m)?Eh(e,u)(m):u(m)}function u(m){return lW(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function f(m){return e.attempt($Me,d,d)(m)}function d(m){return Ht(m)?Yt(e,h,"whitespace")(m):h(m)}function h(m){return m===null||vt(m)?(e.exit("definition"),r.parser.defined.push(a),t(m)):n(m)}}function FMe(e,t,n){return r;function r(l){return bn(l)?Eh(e,a)(l):n(l)}function a(l){return uW(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Ht(l)?Yt(e,o,"whitespace")(l):o(l)}function o(l){return l===null||vt(l)?t(l):n(l)}}const BMe={name:"hardBreakEscape",tokenize:UMe};function UMe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),a}function a(s){return vt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const zMe={name:"headingAtx",resolve:qMe,tokenize:WMe};function qMe(e,t){let n=e.length-2,r=3,a,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},za(e,r,n-r+1,[["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t]])),e}function WMe(e,t,n){let r=0;return a;function a(f){return e.enter("atxHeading"),s(f)}function s(f){return e.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&r++<6?(e.consume(f),o):f===null||bn(f)?(e.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(e.enter("atxHeadingSequence"),c(f)):f===null||vt(f)?(e.exit("atxHeading"),t(f)):Ht(f)?Yt(e,l,"whitespace")(f):(e.enter("atxHeadingText"),u(f))}function c(f){return f===35?(e.consume(f),c):(e.exit("atxHeadingSequence"),l(f))}function u(f){return f===null||f===35||bn(f)?(e.exit("atxHeadingText"),l(f)):(e.consume(f),u)}}const HMe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sM=["pre","script","style","textarea"],VMe={concrete:!0,name:"htmlFlow",resolveTo:YMe,tokenize:XMe},KMe={partial:!0,tokenize:QMe},GMe={partial:!0,tokenize:JMe};function YMe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function XMe(e,t,n){const r=this;let a,s,o,l,c;return u;function u(P){return f(P)}function f(P){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(P),d}function d(P){return P===33?(e.consume(P),h):P===47?(e.consume(P),s=!0,v):P===63?(e.consume(P),a=3,r.interrupt?t:C):ra(P)?(e.consume(P),o=String.fromCharCode(P),x):n(P)}function h(P){return P===45?(e.consume(P),a=2,m):P===91?(e.consume(P),a=5,l=0,g):ra(P)?(e.consume(P),a=4,r.interrupt?t:C):n(P)}function m(P){return P===45?(e.consume(P),r.interrupt?t:C):n(P)}function g(P){const H="CDATA[";return P===H.charCodeAt(l++)?(e.consume(P),l===H.length?r.interrupt?t:F:g):n(P)}function v(P){return ra(P)?(e.consume(P),o=String.fromCharCode(P),x):n(P)}function x(P){if(P===null||P===47||P===62||bn(P)){const H=P===47,G=o.toLowerCase();return!H&&!s&&sM.includes(G)?(a=1,r.interrupt?t(P):F(P)):HMe.includes(o.toLowerCase())?(a=6,H?(e.consume(P),y):r.interrupt?t(P):F(P)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(P):s?b(P):w(P))}return P===45||Wr(P)?(e.consume(P),o+=String.fromCharCode(P),x):n(P)}function y(P){return P===62?(e.consume(P),r.interrupt?t:F):n(P)}function b(P){return Ht(P)?(e.consume(P),b):T(P)}function w(P){return P===47?(e.consume(P),T):P===58||P===95||ra(P)?(e.consume(P),j):Ht(P)?(e.consume(P),w):T(P)}function j(P){return P===45||P===46||P===58||P===95||Wr(P)?(e.consume(P),j):k(P)}function k(P){return P===61?(e.consume(P),_):Ht(P)?(e.consume(P),k):w(P)}function _(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),c=P,S):Ht(P)?(e.consume(P),_):A(P)}function S(P){return P===c?(e.consume(P),c=null,N):P===null||vt(P)?n(P):(e.consume(P),S)}function A(P){return P===null||P===34||P===39||P===47||P===60||P===61||P===62||P===96||bn(P)?k(P):(e.consume(P),A)}function N(P){return P===47||P===62||Ht(P)?w(P):n(P)}function T(P){return P===62?(e.consume(P),I):n(P)}function I(P){return P===null||vt(P)?F(P):Ht(P)?(e.consume(P),I):n(P)}function F(P){return P===45&&a===2?(e.consume(P),B):P===60&&a===1?(e.consume(P),R):P===62&&a===4?(e.consume(P),U):P===63&&a===3?(e.consume(P),C):P===93&&a===5?(e.consume(P),$):vt(P)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(KMe,D,E)(P)):P===null||vt(P)?(e.exit("htmlFlowData"),E(P)):(e.consume(P),F)}function E(P){return e.check(GMe,O,D)(P)}function O(P){return e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),M}function M(P){return P===null||vt(P)?E(P):(e.enter("htmlFlowData"),F(P))}function B(P){return P===45?(e.consume(P),C):F(P)}function R(P){return P===47?(e.consume(P),o="",L):F(P)}function L(P){if(P===62){const H=o.toLowerCase();return sM.includes(H)?(e.consume(P),U):F(P)}return ra(P)&&o.length<8?(e.consume(P),o+=String.fromCharCode(P),L):F(P)}function $(P){return P===93?(e.consume(P),C):F(P)}function C(P){return P===62?(e.consume(P),U):P===45&&a===2?(e.consume(P),C):F(P)}function U(P){return P===null||vt(P)?(e.exit("htmlFlowData"),D(P)):(e.consume(P),U)}function D(P){return e.exit("htmlFlow"),t(P)}}function JMe(e,t,n){const r=this;return a;function a(o){return vt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function QMe(e,t,n){return r;function r(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(zp,t,n)}}const ZMe={name:"htmlText",tokenize:eDe};function eDe(e,t,n){const r=this;let a,s,o;return l;function l(C){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(C),c}function c(C){return C===33?(e.consume(C),u):C===47?(e.consume(C),k):C===63?(e.consume(C),w):ra(C)?(e.consume(C),A):n(C)}function u(C){return C===45?(e.consume(C),f):C===91?(e.consume(C),s=0,g):ra(C)?(e.consume(C),b):n(C)}function f(C){return C===45?(e.consume(C),m):n(C)}function d(C){return C===null?n(C):C===45?(e.consume(C),h):vt(C)?(o=d,R(C)):(e.consume(C),d)}function h(C){return C===45?(e.consume(C),m):d(C)}function m(C){return C===62?B(C):C===45?h(C):d(C)}function g(C){const U="CDATA[";return C===U.charCodeAt(s++)?(e.consume(C),s===U.length?v:g):n(C)}function v(C){return C===null?n(C):C===93?(e.consume(C),x):vt(C)?(o=v,R(C)):(e.consume(C),v)}function x(C){return C===93?(e.consume(C),y):v(C)}function y(C){return C===62?B(C):C===93?(e.consume(C),y):v(C)}function b(C){return C===null||C===62?B(C):vt(C)?(o=b,R(C)):(e.consume(C),b)}function w(C){return C===null?n(C):C===63?(e.consume(C),j):vt(C)?(o=w,R(C)):(e.consume(C),w)}function j(C){return C===62?B(C):w(C)}function k(C){return ra(C)?(e.consume(C),_):n(C)}function _(C){return C===45||Wr(C)?(e.consume(C),_):S(C)}function S(C){return vt(C)?(o=S,R(C)):Ht(C)?(e.consume(C),S):B(C)}function A(C){return C===45||Wr(C)?(e.consume(C),A):C===47||C===62||bn(C)?N(C):n(C)}function N(C){return C===47?(e.consume(C),B):C===58||C===95||ra(C)?(e.consume(C),T):vt(C)?(o=N,R(C)):Ht(C)?(e.consume(C),N):B(C)}function T(C){return C===45||C===46||C===58||C===95||Wr(C)?(e.consume(C),T):I(C)}function I(C){return C===61?(e.consume(C),F):vt(C)?(o=I,R(C)):Ht(C)?(e.consume(C),I):N(C)}function F(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(e.consume(C),a=C,E):vt(C)?(o=F,R(C)):Ht(C)?(e.consume(C),F):(e.consume(C),O)}function E(C){return C===a?(e.consume(C),a=void 0,M):C===null?n(C):vt(C)?(o=E,R(C)):(e.consume(C),E)}function O(C){return C===null||C===34||C===39||C===60||C===61||C===96?n(C):C===47||C===62||bn(C)?N(C):(e.consume(C),O)}function M(C){return C===47||C===62||bn(C)?N(C):n(C)}function B(C){return C===62?(e.consume(C),e.exit("htmlTextData"),e.exit("htmlText"),t):n(C)}function R(C){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),L}function L(C){return Ht(C)?Yt(e,$,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(C):$(C)}function $(C){return e.enter("htmlTextData"),o(C)}}const IA={name:"labelEnd",resolveAll:aDe,resolveTo:iDe,tokenize:sDe},tDe={tokenize:oDe},nDe={tokenize:lDe},rDe={tokenize:cDe};function aDe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const a=r.type==="labelImage"?4:2;r.type="data",t+=a}}return e.length!==n.length&&za(e,0,e.length,n),e}function iDe(e,t){let n=e.length,r=0,a,s,o,l;for(;n--;)if(a=e[n][1],s){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(s=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(o=n);const c={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},f={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=si(l,e.slice(s+1,s+r+3)),l=si(l,[["enter",f,t]]),l=si(l,p0(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),l=si(l,[["exit",f,t],e[o-2],e[o-1],["exit",u,t]]),l=si(l,e.slice(o+1)),l=si(l,[["exit",c,t]]),za(e,s,e.length,l),e}function sDe(e,t,n){const r=this;let a=r.events.length,s,o;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){s=r.events[a][1];break}return l;function l(h){return s?s._inactive?d(h):(o=r.parser.defined.includes(Ui(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),c):n(h)}function c(h){return h===40?e.attempt(tDe,f,o?f:d)(h):h===91?e.attempt(nDe,f,o?u:d)(h):o?f(h):d(h)}function u(h){return e.attempt(rDe,f,d)(h)}function f(h){return t(h)}function d(h){return s._balanced=!0,n(h)}}function oDe(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),a}function a(d){return bn(d)?Eh(e,s)(d):s(d)}function s(d){return d===41?f(d):lW(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return bn(d)?Eh(e,c)(d):f(d)}function l(d){return n(d)}function c(d){return d===34||d===39||d===40?uW(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):f(d)}function u(d){return bn(d)?Eh(e,f)(d):f(d)}function f(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function lDe(e,t,n){const r=this;return a;function a(l){return cW.call(r,e,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(Ui(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function cDe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),a}function a(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const uDe={name:"labelStartImage",resolveAll:IA.resolveAll,tokenize:dDe};function dDe(e,t,n){const r=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),s}function s(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const fDe={name:"labelStartLink",resolveAll:IA.resolveAll,tokenize:hDe};function hDe(e,t,n){const r=this;return a;function a(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const xj={name:"lineEnding",tokenize:mDe};function mDe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Yt(e,t,"linePrefix")}}const pv={name:"thematicBreak",tokenize:pDe};function pDe(e,t,n){let r=0,a;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return a=u,l(u)}function l(u){return u===a?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||vt(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===a?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),Ht(u)?Yt(e,l,"whitespace")(u):l(u))}}const fa={continuation:{tokenize:yDe},exit:wDe,name:"list",tokenize:xDe},gDe={partial:!0,tokenize:jDe},vDe={partial:!0,tokenize:bDe};function xDe(e,t,n){const r=this,a=r.events[r.events.length-1];let s=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return l;function l(m){const g=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:qk(m)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(pv,n,u)(m):u(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(m)}return n(m)}function c(m){return qk(m)&&++o<10?(e.consume(m),c):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),u(m)):n(m)}function u(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(zp,r.interrupt?n:f,e.attempt(gDe,h,d))}function f(m){return r.containerState.initialBlankLine=!0,s++,h(m)}function d(m){return Ht(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),h):n(m)}function h(m){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function yDe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(zp,a,s);function a(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Yt(e,t,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!Ht(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(vDe,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Yt(e,e.attempt(fa,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function bDe(e,t,n){const r=this;return Yt(e,a,"listItemIndent",r.containerState.size+1);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function wDe(e){e.exit(this.containerState.type)}function jDe(e,t,n){const r=this;return Yt(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(s){const o=r.events[r.events.length-1];return!Ht(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const oM={name:"setextUnderline",resolveTo:_De,tokenize:kDe};function _De(e,t){let n=e.length,r,a,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",s?(e.splice(a,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function kDe(e,t,n){const r=this;let a;return s;function s(u){let f=r.events.length,d;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){d=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),a=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===a?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),Ht(u)?Yt(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||vt(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const SDe={tokenize:NDe};function NDe(e){const t=this,n=e.attempt(zp,r,e.attempt(this.parser.constructs.flowInitial,a,Yt(e,e.attempt(this.parser.constructs.flow,a,e.attempt(TMe,a)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const CDe={resolveAll:fW()},ADe=dW("string"),EDe=dW("text");function dW(e){return{resolveAll:fW(e==="text"?PDe:void 0),tokenize:t};function t(n){const r=this,a=this.parser.constructs[e],s=n.attempt(a,o,l);return o;function o(f){return u(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return u(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function u(f){if(f===null)return!0;const d=a[f];let h=-1;if(d)for(;++h<d.length;){const m=d[h];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function fW(e){return t;function t(n,r){let a=-1,s;for(;++a<=n.length;)s===void 0?n[a]&&n[a][1].type==="data"&&(s=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==s+2&&(n[s][1].end=n[a-1][1].end,n.splice(s+2,a-s-2),a=s+2),s=void 0);return e?e(n,r):n}}function PDe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let s=a.length,o=-1,l=0,c;for(;s--;){const u=a[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const TDe={42:fa,43:fa,45:fa,48:fa,49:fa,50:fa,51:fa,52:fa,53:fa,54:fa,55:fa,56:fa,57:fa,62:aW},ODe={91:DMe},IDe={[-2]:vj,[-1]:vj,32:vj},RDe={35:zMe,42:pv,45:[oM,pv],60:VMe,61:oM,95:pv,96:iM,126:iM},MDe={38:sW,92:iW},DDe={[-5]:xj,[-4]:xj,[-3]:xj,33:uDe,38:sW,42:Wk,60:[fMe,ZMe],91:fDe,92:[BMe,iW],93:IA,95:Wk,96:SMe},$De={null:[Wk,CDe]},LDe={null:[42,95]},FDe={null:[]},BDe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:LDe,contentInitial:ODe,disable:FDe,document:TDe,flow:RDe,flowInitial:IDe,insideSpan:$De,string:MDe,text:DDe},Symbol.toStringTag,{value:"Module"}));function UDe(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},s=[];let o=[],l=[];const c={attempt:S(k),check:S(_),consume:b,enter:w,exit:j,interrupt:S(_,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:g,parser:e,previous:null,sliceSerialize:h,sliceStream:m,write:d};let f=t.tokenize.call(u,c);return t.resolveAll&&s.push(t),u;function d(I){return o=si(o,I),x(),o[o.length-1]!==null?[]:(A(t,0),u.events=p0(s,u.events,u),u.events)}function h(I,F){return qDe(m(I),F)}function m(I){return zDe(o,I)}function g(){const{_bufferIndex:I,_index:F,line:E,column:O,offset:M}=r;return{_bufferIndex:I,_index:F,line:E,column:O,offset:M}}function v(I){a[I.line]=I.column,T()}function x(){let I;for(;r._index<o.length;){const F=o[r._index];if(typeof F=="string")for(I=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===I&&r._bufferIndex<F.length;)y(F.charCodeAt(r._bufferIndex));else y(F)}}function y(I){f=f(I)}function b(I){vt(I)?(r.line++,r.column=1,r.offset+=I===-3?2:1,T()):I!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=I}function w(I,F){const E=F||{};return E.type=I,E.start=g(),u.events.push(["enter",E,u]),l.push(E),E}function j(I){const F=l.pop();return F.end=g(),u.events.push(["exit",F,u]),F}function k(I,F){A(I,F.from)}function _(I,F){F.restore()}function S(I,F){return E;function E(O,M,B){let R,L,$,C;return Array.isArray(O)?D(O):"tokenize"in O?D([O]):U(O);function U(Y){return W;function W(ee){const X=ee!==null&&Y[ee],ae=ee!==null&&Y.null,re=[...Array.isArray(X)?X:X?[X]:[],...Array.isArray(ae)?ae:ae?[ae]:[]];return D(re)(ee)}}function D(Y){return R=Y,L=0,Y.length===0?B:P(Y[L])}function P(Y){return W;function W(ee){return C=N(),$=Y,Y.partial||(u.currentConstruct=Y),Y.name&&u.parser.constructs.disable.null.includes(Y.name)?G():Y.tokenize.call(F?Object.assign(Object.create(u),F):u,c,H,G)(ee)}}function H(Y){return I($,C),M}function G(Y){return C.restore(),++L<R.length?P(R[L]):B}}}function A(I,F){I.resolveAll&&!s.includes(I)&&s.push(I),I.resolve&&za(u.events,F,u.events.length-F,I.resolve(u.events.slice(F),u)),I.resolveTo&&(u.events=I.resolveTo(u.events,u))}function N(){const I=g(),F=u.previous,E=u.currentConstruct,O=u.events.length,M=Array.from(l);return{from:O,restore:B};function B(){r=I,u.previous=F,u.currentConstruct=E,u.events.length=O,l=M,T()}}function T(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function zDe(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,s=t.end._bufferIndex;let o;if(n===a)o=[e[n].slice(r,s)];else{if(o=e.slice(n,a),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}s>0&&o.push(e[a].slice(0,s))}return o}function qDe(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&a)continue;o=" ";break}default:o=String.fromCharCode(s)}a=s===-2,r.push(o)}return r.join("")}function WDe(e){const r={constructs:nW([BDe,...(e||{}).extensions||[]]),content:a(iMe),defined:[],document:a(oMe),flow:a(SDe),lazy:{},string:a(ADe),text:a(EDe)};return r;function a(s){return o;function o(l){return UDe(r,s,l)}}}function HDe(e){for(;!oW(e););return e}const lM=/[\0\t\n\r]/g;function VDe(){let e=1,t="",n=!0,r;return a;function a(s,o,l){const c=[];let u,f,d,h,m;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(lM.lastIndex=d,u=lM.exec(s),h=u&&u.index!==void 0?u.index:s.length,m=s.charCodeAt(h),!u){t=s.slice(d);break}if(m===10&&d===h&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),d<h&&(c.push(s.slice(d,h)),e+=h-d),m){case 0:{c.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,c.push(-2);e++<f;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}d=h+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const KDe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function GDe(e){return e.replace(KDe,YDe)}function YDe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),s=a===120||a===88;return rW(n.slice(s?2:1),s?16:10)}return OA(n)||e}const hW={}.hasOwnProperty;function XDe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),JDe(n)(HDe(WDe(n).document().write(VDe()(e,t,!0))))}function JDe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Se),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(q),blockQuote:s(ae),characterEscape:N,characterReference:N,codeFenced:s(re),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(re,o),codeText:s(J,o),codeTextData:N,data:N,codeFlowValue:N,definition:s(ve),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(z),hardBreakEscape:s(ie),hardBreakTrailing:s(ie),htmlFlow:s(oe,o),htmlFlowData:N,htmlText:s(oe,o),htmlTextData:N,image:s(be),label:o,link:s(Se),listItem:s(ge),listItemValue:h,listOrdered:s(Le,d),listUnordered:s(Le),paragraph:s(We),reference:P,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(q),strong:s(dt),thematicBreak:s(Et)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:X,autolinkProtocol:ee,blockQuote:c(),characterEscapeValue:T,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:Y,characterReference:W,codeFenced:c(x),codeFencedFence:v,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:T,codeIndented:c(y),codeText:c(M),codeTextData:T,data:T,definition:c(),definitionDestinationString:j,definitionLabelString:b,definitionTitleString:w,emphasis:c(),hardBreakEscape:c(F),hardBreakTrailing:c(F),htmlFlow:c(E),htmlFlowData:T,htmlText:c(O),htmlTextData:T,image:c(R),label:$,labelText:L,lineEnding:I,link:c(B),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:H,resourceDestinationString:C,resourceTitleString:U,resource:D,setextHeading:c(A),setextHeadingLineSequence:S,setextHeadingText:_,strong:c(),thematicBreak:c()}};mW(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(te){let me={type:"root",children:[]};const Fe={stack:[me],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:f,data:n},He=[];let Ue=-1;for(;++Ue<te.length;)if(te[Ue][1].type==="listOrdered"||te[Ue][1].type==="listUnordered")if(te[Ue][0]==="enter")He.push(Ue);else{const he=He.pop();Ue=a(te,he,Ue)}for(Ue=-1;++Ue<te.length;){const he=t[te[Ue][0]];hW.call(he,te[Ue][1].type)&&he[te[Ue][1].type].call(Object.assign({sliceSerialize:te[Ue][2].sliceSerialize},Fe),te[Ue][1])}if(Fe.tokenStack.length>0){const he=Fe.tokenStack[Fe.tokenStack.length-1];(he[1]||cM).call(Fe,void 0,he[0])}for(me.position={start:To(te.length>0?te[0][1].start:{line:1,column:1,offset:0}),end:To(te.length>0?te[te.length-2][1].end:{line:1,column:1,offset:0})},Ue=-1;++Ue<t.transforms.length;)me=t.transforms[Ue](me)||me;return me}function a(te,me,Fe){let He=me-1,Ue=-1,he=!1,Ut,bt,wt,xe;for(;++He<=Fe;){const _e=te[He];switch(_e[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{_e[0]==="enter"?Ue++:Ue--,xe=void 0;break}case"lineEndingBlank":{_e[0]==="enter"&&(Ut&&!xe&&!Ue&&!wt&&(wt=He),xe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:xe=void 0}if(!Ue&&_e[0]==="enter"&&_e[1].type==="listItemPrefix"||Ue===-1&&_e[0]==="exit"&&(_e[1].type==="listUnordered"||_e[1].type==="listOrdered")){if(Ut){let Me=He;for(bt=void 0;Me--;){const le=te[Me];if(le[1].type==="lineEnding"||le[1].type==="lineEndingBlank"){if(le[0]==="exit")continue;bt&&(te[bt][1].type="lineEndingBlank",he=!0),le[1].type="lineEnding",bt=Me}else if(!(le[1].type==="linePrefix"||le[1].type==="blockQuotePrefix"||le[1].type==="blockQuotePrefixWhitespace"||le[1].type==="blockQuoteMarker"||le[1].type==="listItemIndent"))break}wt&&(!bt||wt<bt)&&(Ut._spread=!0),Ut.end=Object.assign({},bt?te[bt][1].start:_e[1].end),te.splice(bt||He,0,["exit",Ut,_e[2]]),He++,Fe++}if(_e[1].type==="listItemPrefix"){const Me={type:"listItem",_spread:!1,start:Object.assign({},_e[1].start),end:void 0};Ut=Me,te.splice(He,0,["enter",Me,_e[2]]),He++,Fe++,wt=void 0,xe=!0}}}return te[me][1]._spread=he,Fe}function s(te,me){return Fe;function Fe(He){l.call(this,te(He),He),me&&me.call(this,He)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(te,me,Fe){this.stack[this.stack.length-1].children.push(te),this.stack.push(te),this.tokenStack.push([me,Fe||void 0]),te.position={start:To(me.start),end:void 0}}function c(te){return me;function me(Fe){te&&te.call(this,Fe),u.call(this,Fe)}}function u(te,me){const Fe=this.stack.pop(),He=this.tokenStack.pop();if(He)He[0].type!==te.type&&(me?me.call(this,te,He[0]):(He[1]||cM).call(this,te,He[0]));else throw new Error("Cannot close `"+te.type+"` ("+Ah({start:te.start,end:te.end})+"): its not open");Fe.position.end=To(te.end)}function f(){return TA(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(te){if(this.data.expectingFirstListItemValue){const me=this.stack[this.stack.length-2];me.start=Number.parseInt(this.sliceSerialize(te),10),this.data.expectingFirstListItemValue=void 0}}function m(){const te=this.resume(),me=this.stack[this.stack.length-1];me.lang=te}function g(){const te=this.resume(),me=this.stack[this.stack.length-1];me.meta=te}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const te=this.resume(),me=this.stack[this.stack.length-1];me.value=te.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const te=this.resume(),me=this.stack[this.stack.length-1];me.value=te.replace(/(\r?\n|\r)$/g,"")}function b(te){const me=this.resume(),Fe=this.stack[this.stack.length-1];Fe.label=me,Fe.identifier=Ui(this.sliceSerialize(te)).toLowerCase()}function w(){const te=this.resume(),me=this.stack[this.stack.length-1];me.title=te}function j(){const te=this.resume(),me=this.stack[this.stack.length-1];me.url=te}function k(te){const me=this.stack[this.stack.length-1];if(!me.depth){const Fe=this.sliceSerialize(te).length;me.depth=Fe}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function S(te){const me=this.stack[this.stack.length-1];me.depth=this.sliceSerialize(te).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function N(te){const Fe=this.stack[this.stack.length-1].children;let He=Fe[Fe.length-1];(!He||He.type!=="text")&&(He=yt(),He.position={start:To(te.start),end:void 0},Fe.push(He)),this.stack.push(He)}function T(te){const me=this.stack.pop();me.value+=this.sliceSerialize(te),me.position.end=To(te.end)}function I(te){const me=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Fe=me.children[me.children.length-1];Fe.position.end=To(te.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(me.type)&&(N.call(this,te),T.call(this,te))}function F(){this.data.atHardBreak=!0}function E(){const te=this.resume(),me=this.stack[this.stack.length-1];me.value=te}function O(){const te=this.resume(),me=this.stack[this.stack.length-1];me.value=te}function M(){const te=this.resume(),me=this.stack[this.stack.length-1];me.value=te}function B(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=me,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function R(){const te=this.stack[this.stack.length-1];if(this.data.inReference){const me=this.data.referenceType||"shortcut";te.type+="Reference",te.referenceType=me,delete te.url,delete te.title}else delete te.identifier,delete te.label;this.data.referenceType=void 0}function L(te){const me=this.sliceSerialize(te),Fe=this.stack[this.stack.length-2];Fe.label=GDe(me),Fe.identifier=Ui(me).toLowerCase()}function $(){const te=this.stack[this.stack.length-1],me=this.resume(),Fe=this.stack[this.stack.length-1];if(this.data.inReference=!0,Fe.type==="link"){const He=te.children;Fe.children=He}else Fe.alt=me}function C(){const te=this.resume(),me=this.stack[this.stack.length-1];me.url=te}function U(){const te=this.resume(),me=this.stack[this.stack.length-1];me.title=te}function D(){this.data.inReference=void 0}function P(){this.data.referenceType="collapsed"}function H(te){const me=this.resume(),Fe=this.stack[this.stack.length-1];Fe.label=me,Fe.identifier=Ui(this.sliceSerialize(te)).toLowerCase(),this.data.referenceType="full"}function G(te){this.data.characterReferenceType=te.type}function Y(te){const me=this.sliceSerialize(te),Fe=this.data.characterReferenceType;let He;Fe?(He=rW(me,Fe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):He=OA(me);const Ue=this.stack[this.stack.length-1];Ue.value+=He}function W(te){const me=this.stack.pop();me.position.end=To(te.end)}function ee(te){T.call(this,te);const me=this.stack[this.stack.length-1];me.url=this.sliceSerialize(te)}function X(te){T.call(this,te);const me=this.stack[this.stack.length-1];me.url="mailto:"+this.sliceSerialize(te)}function ae(){return{type:"blockquote",children:[]}}function re(){return{type:"code",lang:null,meta:null,value:""}}function J(){return{type:"inlineCode",value:""}}function ve(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function z(){return{type:"emphasis",children:[]}}function q(){return{type:"heading",depth:0,children:[]}}function ie(){return{type:"break"}}function oe(){return{type:"html",value:""}}function be(){return{type:"image",title:null,url:"",alt:null}}function Se(){return{type:"link",title:null,url:"",children:[]}}function Le(te){return{type:"list",ordered:te.type==="listOrdered",start:null,spread:te._spread,children:[]}}function ge(te){return{type:"listItem",spread:te._spread,checked:null,children:[]}}function We(){return{type:"paragraph",children:[]}}function dt(){return{type:"strong",children:[]}}function yt(){return{type:"text",value:""}}function Et(){return{type:"thematicBreak"}}}function To(e){return{line:e.line,column:e.column,offset:e.offset}}function mW(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?mW(e,r):QDe(e,r)}}function QDe(e,t){let n;for(n in t)if(hW.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function cM(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ah({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ah({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ah({start:t.start,end:t.end})+") is still open")}function ZDe(e){const t=this;t.parser=n;function n(r){return XDe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function e$e(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function t$e(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function n$e(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function r$e(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function a$e(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function i$e(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=jf(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function s$e(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function o$e(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function pW(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const a=e.all(t),s=a[0];s&&s.type==="text"?s.value="["+s.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=r:a.push({type:"text",value:r}),a}function l$e(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return pW(e,t);const a={src:jf(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,s),e.applyData(t,s)}function c$e(e,t){const n={src:jf(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function u$e(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function d$e(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return pW(e,t);const a={href:jf(r.url||"")};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function f$e(e,t){const n={href:jf(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function h$e(e,t,n){const r=e.all(t),a=n?m$e(n):gW(t),s={},o=[];if(typeof t.checked=="boolean"){const f=r[0];let d;f&&f.type==="element"&&f.tagName==="p"?d=f:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const f=r[l];(a||l!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!a?o.push(...f.children):o.push(f)}const c=r[r.length-1];c&&(a||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function m$e(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=gW(n[r])}return t}function gW(e){const t=e.spread;return t??e.children.length>1}function p$e(e,t){const n={},r=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++a<r.length;){const o=r[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function g$e(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function v$e(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function x$e(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function y$e(e,t){const n=e.all(t),r=n.shift(),a=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),a.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=CA(t.children[1]),c=Yq(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),a.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,s),e.applyData(t,s)}function b$e(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const d=t.children[c],h={},m=o?o[c]:void 0;m&&(h.align=m);let g={type:"element",tagName:s,properties:h,children:[]};d&&(g.children=e.all(d),e.patch(d,g),g=e.applyData(d,g)),u.push(g)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,f),e.applyData(t,f)}function w$e(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const uM=9,dM=32;function j$e(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const s=[];for(;r;)s.push(fM(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return s.push(fM(t.slice(a),a>0,!1)),s.join("")}function fM(e,t,n){let r=0,a=e.length;if(t){let s=e.codePointAt(r);for(;s===uM||s===dM;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(a-1);for(;s===uM||s===dM;)a--,s=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function _$e(e,t){const n={type:"text",value:j$e(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function k$e(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const S$e={blockquote:e$e,break:t$e,code:n$e,delete:r$e,emphasis:a$e,footnoteReference:i$e,heading:s$e,html:o$e,imageReference:l$e,image:c$e,inlineCode:u$e,linkReference:d$e,link:f$e,listItem:h$e,list:p$e,paragraph:g$e,root:v$e,strong:x$e,table:y$e,tableCell:w$e,tableRow:b$e,text:_$e,thematicBreak:k$e,toml:Wg,yaml:Wg,definition:Wg,footnoteDefinition:Wg};function Wg(){}const vW=-1,g0=0,Ph=1,iy=2,RA=3,MA=4,DA=5,$A=6,xW=7,yW=8,hM=typeof self=="object"?self:globalThis,N$e=(e,t)=>{const n=(a,s)=>(e.set(s,a),a),r=a=>{if(e.has(a))return e.get(a);const[s,o]=t[a];switch(s){case g0:case vW:return n(o,a);case Ph:{const l=n([],a);for(const c of o)l.push(r(c));return l}case iy:{const l=n({},a);for(const[c,u]of o)l[r(c)]=r(u);return l}case RA:return n(new Date(o),a);case MA:{const{source:l,flags:c}=o;return n(new RegExp(l,c),a)}case DA:{const l=n(new Map,a);for(const[c,u]of o)l.set(r(c),r(u));return l}case $A:{const l=n(new Set,a);for(const c of o)l.add(r(c));return l}case xW:{const{name:l,message:c}=o;return n(new hM[l](c),a)}case yW:return n(BigInt(o),a);case"BigInt":return n(Object(BigInt(o)),a);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new hM[s](o),a)};return r},mM=e=>N$e(new Map,e)(0),bu="",{toString:C$e}={},{keys:A$e}=Object,eh=e=>{const t=typeof e;if(t!=="object"||!e)return[g0,t];const n=C$e.call(e).slice(8,-1);switch(n){case"Array":return[Ph,bu];case"Object":return[iy,bu];case"Date":return[RA,bu];case"RegExp":return[MA,bu];case"Map":return[DA,bu];case"Set":return[$A,bu];case"DataView":return[Ph,n]}return n.includes("Array")?[Ph,n]:n.includes("Error")?[xW,n]:[iy,n]},Hg=([e,t])=>e===g0&&(t==="function"||t==="symbol"),E$e=(e,t,n,r)=>{const a=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=eh(o);switch(l){case g0:{let f=o;switch(c){case"bigint":l=yW,f=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return a([vW],o)}return a([l,f],o)}case Ph:{if(c){let h=o;return c==="DataView"?h=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(h=new Uint8Array(o)),a([c,[...h]],o)}const f=[],d=a([l,f],o);for(const h of o)f.push(s(h));return d}case iy:{if(c)switch(c){case"BigInt":return a([c,o.toString()],o);case"Boolean":case"Number":case"String":return a([c,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const f=[],d=a([l,f],o);for(const h of A$e(o))(e||!Hg(eh(o[h])))&&f.push([s(h),s(o[h])]);return d}case RA:return a([l,o.toISOString()],o);case MA:{const{source:f,flags:d}=o;return a([l,{source:f,flags:d}],o)}case DA:{const f=[],d=a([l,f],o);for(const[h,m]of o)(e||!(Hg(eh(h))||Hg(eh(m))))&&f.push([s(h),s(m)]);return d}case $A:{const f=[],d=a([l,f],o);for(const h of o)(e||!Hg(eh(h)))&&f.push(s(h));return d}}const{message:u}=o;return a([l,{name:c,message:u}],o)};return s},pM=(e,{json:t,lossy:n}={})=>{const r=[];return E$e(!(t||n),!!t,new Map,r)(e),r},sy=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?mM(pM(e,t)):structuredClone(e):(e,t)=>mM(pM(e,t));function P$e(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function T$e(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function O$e(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||P$e,r=e.options.footnoteBackLabel||T$e,a=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const f=e.all(u),d=String(u.identifier).toUpperCase(),h=jf(d.toLowerCase());let m=0;const g=[],v=e.footnoteCounts.get(d);for(;v!==void 0&&++m<=v;){g.length>0&&g.push({type:"text",value:" "});let b=typeof n=="string"?n:n(c,m);typeof b=="string"&&(b={type:"text",value:b}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,m),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const x=f[f.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const b=x.children[x.children.length-1];b&&b.type==="text"?b.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...g)}else f.push(...g);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(f,!0)};e.patch(u,y),l.push(y)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...sy(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const v0=function(e){if(e==null)return D$e;if(typeof e=="function")return x0(e);if(typeof e=="object")return Array.isArray(e)?I$e(e):R$e(e);if(typeof e=="string")return M$e(e);throw new Error("Expected function, string, or object as test")};function I$e(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=v0(e[n]);return x0(r);function r(...a){let s=-1;for(;++s<t.length;)if(t[s].apply(this,a))return!0;return!1}}function R$e(e){const t=e;return x0(n);function n(r){const a=r;let s;for(s in e)if(a[s]!==t[s])return!1;return!0}}function M$e(e){return x0(t);function t(n){return n&&n.type===e}}function x0(e){return t;function t(n,r,a){return!!($$e(n)&&e.call(this,n,typeof r=="number"?r:void 0,a||void 0))}}function D$e(){return!0}function $$e(e){return e!==null&&typeof e=="object"&&"type"in e}const bW=[],L$e=!0,Hk=!1,F$e="skip";function wW(e,t,n,r){let a;typeof t=="function"&&typeof n!="function"?(r=n,n=t):a=t;const s=v0(a),o=r?-1:1;l(e,void 0,[])();function l(c,u,f){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const m=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(m?"<"+m+">":""))+")"})}return h;function h(){let m=bW,g,v,x;if((!t||s(c,u,f[f.length-1]||void 0))&&(m=B$e(n(c,f)),m[0]===Hk))return m;if("children"in c&&c.children){const y=c;if(y.children&&m[0]!==F$e)for(v=(r?y.children.length:-1)+o,x=f.concat(y);v>-1&&v<y.children.length;){const b=y.children[v];if(g=l(b,v,x)(),g[0]===Hk)return g;v=typeof g[1]=="number"?g[1]:v+o}}return m}}}function B$e(e){return Array.isArray(e)?e:typeof e=="number"?[L$e,e]:e==null?bW:[e]}function LA(e,t,n,r){let a,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,a=n):(s=t,o=n,a=r),wW(e,s,l,a);function l(c,u){const f=u[u.length-1],d=f?f.children.indexOf(c):void 0;return o(c,d,f)}}const Vk={}.hasOwnProperty,U$e={};function z$e(e,t){const n=t||U$e,r=new Map,a=new Map,s=new Map,o={...S$e,...n.handlers},l={all:u,applyData:W$e,definitionById:r,footnoteById:a,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:q$e,wrap:V$e};return LA(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const d=f.type==="definition"?r:a,h=String(f.identifier).toUpperCase();d.has(h)||d.set(h,f)}}),l;function c(f,d){const h=f.type,m=l.handlers[h];if(Vk.call(l.handlers,h)&&m)return m(l,f,d);if(l.options.passThrough&&l.options.passThrough.includes(h)){if("children"in f){const{children:v,...x}=f,y=sy(x);return y.children=l.all(f),y}return sy(f)}return(l.options.unknownHandler||H$e)(l,f,d)}function u(f){const d=[];if("children"in f){const h=f.children;let m=-1;for(;++m<h.length;){const g=l.one(h[m],f);if(g){if(m&&h[m-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=gM(g.value)),!Array.isArray(g)&&g.type==="element")){const v=g.children[0];v&&v.type==="text"&&(v.value=gM(v.value))}Array.isArray(g)?d.push(...g):d.push(g)}}}return d}}function q$e(e,t){e.position&&(t.position=TRe(e))}function W$e(e,t){let n=t;if(e&&e.data){const r=e.data.hName,a=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,sy(s)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function H$e(e,t){const n=t.data||{},r="value"in t&&!(Vk.call(n,"hProperties")||Vk.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function V$e(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function gM(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function vM(e,t){const n=z$e(e,t),r=n.one(e,void 0),a=O$e(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return a&&s.children.push({type:"text",value:`
`},a),s}function K$e(e,t){return e&&"run"in e?async function(n,r){const a=vM(n,{file:r,...t});await e.run(a,r)}:function(n,r){return vM(n,{file:r,...e||t})}}function xM(e){if(e)throw e}var gv=Object.prototype.hasOwnProperty,jW=Object.prototype.toString,yM=Object.defineProperty,bM=Object.getOwnPropertyDescriptor,wM=function(t){return typeof Array.isArray=="function"?Array.isArray(t):jW.call(t)==="[object Array]"},jM=function(t){if(!t||jW.call(t)!=="[object Object]")return!1;var n=gv.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&gv.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var a;for(a in t);return typeof a>"u"||gv.call(t,a)},_M=function(t,n){yM&&n.name==="__proto__"?yM(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},kM=function(t,n){if(n==="__proto__")if(gv.call(t,n)){if(bM)return bM(t,n).value}else return;return t[n]},G$e=function e(){var t,n,r,a,s,o,l=arguments[0],c=1,u=arguments.length,f=!1;for(typeof l=="boolean"&&(f=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=kM(l,n),a=kM(t,n),l!==a&&(f&&a&&(jM(a)||(s=wM(a)))?(s?(s=!1,o=r&&wM(r)?r:[]):o=r&&jM(r)?r:{},_M(l,{name:n,newValue:e(f,o,a)})):typeof a<"u"&&_M(l,{name:n,newValue:a}));return l};const yj=fn(G$e);function Kk(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Y$e(){const e=[],t={run:n,use:r};return t;function n(...a){let s=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...a);function l(c,...u){const f=e[++s];let d=-1;if(c){o(c);return}for(;++d<a.length;)(u[d]===null||u[d]===void 0)&&(u[d]=a[d]);a=u,f?X$e(f,l)(...u):o(null,...u)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function X$e(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(a);try{c=e.apply(this,o)}catch(u){const f=u;if(l&&n)throw f;return a(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,a):c instanceof Error?a(c):s(c))}function a(o,...l){n||(n=!0,t(o,...l))}function s(o){a(null,o)}}const Zi={basename:J$e,dirname:Q$e,extname:Z$e,join:eLe,sep:"/"};function J$e(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');qp(e);let n=0,r=-1,a=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else r<0&&(s=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else o<0&&(s=!0,o=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(r=a):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Q$e(e){if(qp(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Z$e(e){qp(e);let t=e.length,n=-1,r=0,a=-1,s=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?a<0?a=t:s!==1&&(s=1):a>-1&&(s=-1)}return a<0||n<0||s===0||s===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function eLe(...e){let t=-1,n;for(;++t<e.length;)qp(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":tLe(n)}function tLe(e){qp(e);const t=e.codePointAt(0)===47;let n=nLe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function nLe(e,t){let n="",r=0,a=-1,s=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(a===o-1||s===1))if(a!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),a=o,s=0;continue}}else if(n.length>0){n="",r=0,a=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function qp(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const rLe={cwd:aLe};function aLe(){return"/"}function Gk(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function iLe(e){if(typeof e=="string")e=new URL(e);else if(!Gk(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return sLe(e)}function sLe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const bj=["history","path","basename","stem","extname","dirname"];class _W{constructor(t){let n;t?Gk(t)?n={path:t}:typeof t=="string"||oLe(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":rLe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<bj.length;){const s=bj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let a;for(a in n)bj.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?Zi.basename(this.path):void 0}set basename(t){jj(t,"basename"),wj(t,"basename"),this.path=Zi.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Zi.dirname(this.path):void 0}set dirname(t){SM(this.basename,"dirname"),this.path=Zi.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Zi.extname(this.path):void 0}set extname(t){if(wj(t,"extname"),SM(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Zi.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Gk(t)&&(t=iLe(t)),jj(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Zi.basename(this.path,this.extname):void 0}set stem(t){jj(t,"stem"),wj(t,"stem"),this.path=Zi.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=void 0,a}message(t,n,r){const a=new Kr(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function wj(e,t){if(e&&e.includes(Zi.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Zi.sep+"`")}function jj(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function SM(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function oLe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const lLe=function(e){const r=this.constructor.prototype,a=r[e],s=function(){return a.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},cLe={}.hasOwnProperty;class FA extends lLe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Y$e()}copy(){const t=new FA;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(yj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Sj("data",this.frozen),this.namespace[t]=n,this):cLe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Sj("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const a=n.call(t,...r);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Vg(t),r=this.parser||this.Parser;return _j("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),_j("process",this.parser||this.Parser),kj("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(s,o){const l=Vg(t),c=r.parse(l);r.run(c,l,function(f,d,h){if(f||!d||!h)return u(f);const m=d,g=r.stringify(m,h);fLe(g)?h.value=g:h.result=g,u(f,h)});function u(f,d){f||!d?o(f):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),_j("processSync",this.parser||this.Parser),kj("processSync",this.compiler||this.Compiler),this.process(t,a),CM("processSync","process",n),r;function a(s,o){n=!0,xM(s),r=o}}run(t,n,r){NM(t),this.freeze();const a=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,l){const c=Vg(n);a.run(t,c,u);function u(f,d,h){const m=d||t;f?l(f):o?o(m):r(void 0,m,h)}}}runSync(t,n){let r=!1,a;return this.run(t,n,s),CM("runSync","run",r),a;function s(o,l){xM(o),a=l,r=!0}}stringify(t,n){this.freeze();const r=Vg(n),a=this.compiler||this.Compiler;return kj("stringify",a),NM(t),a(t,r)}use(t,...n){const r=this.attachers,a=this.namespace;if(Sj("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...d]=u;c(f,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(a.settings=yj(!0,a.settings,u.settings))}function l(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const d=u[f];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,f){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===u){h=d;break}if(h===-1)r.push([u,...f]);else if(f.length>0){let[m,...g]=f;const v=r[h][1];Kk(v)&&Kk(m)&&(m=yj(!0,v,m)),r[h]=[u,m,...g]}}}}const uLe=new FA().freeze();function _j(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function kj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Sj(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function NM(e){if(!Kk(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function CM(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Vg(e){return dLe(e)?e:new _W(e)}function dLe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function fLe(e){return typeof e=="string"||hLe(e)}function hLe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const mLe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",AM=[],EM={allowDangerousHtml:!0},pLe=/^(https?|ircs?|mailto|xmpp)$/i,gLe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function PM(e){const t=vLe(e),n=xLe(e);return yLe(t.runSync(t.parse(n),n),e)}function vLe(e){const t=e.rehypePlugins||AM,n=e.remarkPlugins||AM,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...EM}:EM;return uLe().use(ZDe).use(n).use(K$e,r).use(t)}function xLe(e){const t=e.children||"",n=new _W;return typeof t=="string"&&(n.value=t),n}function yLe(e,t){const n=t.allowedElements,r=t.allowElement,a=t.components,s=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||bLe;for(const f of gLe)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+mLe+f.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),LA(e,u),DRe(e,{Fragment:i.Fragment,components:a,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function u(f,d,h){if(f.type==="raw"&&h&&typeof d=="number")return o?h.children.splice(d,1):h.children[d]={type:"text",value:f.value},d;if(f.type==="element"){let m;for(m in gj)if(Object.hasOwn(gj,m)&&Object.hasOwn(f.properties,m)){const g=f.properties[m],v=gj[m];(v===null||v.includes(f.tagName))&&(f.properties[m]=c(String(g||""),m,f))}}if(f.type==="element"){let m=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!m&&r&&typeof d=="number"&&(m=!r(f,d,h)),m&&h&&typeof d=="number")return l&&f.children?h.children.splice(d,1,...f.children):h.children.splice(d,1),d}}}function bLe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||n!==-1&&t>n||r!==-1&&t>r||pLe.test(e.slice(0,t))?e:""}function TM(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,a=n.indexOf(t);for(;a!==-1;)r++,a=n.indexOf(t,a+t.length);return r}function wLe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function jLe(e,t,n){const a=v0((n||{}).ignore||[]),s=_Le(t);let o=-1;for(;++o<s.length;)wW(e,"text",l);function l(u,f){let d=-1,h;for(;++d<f.length;){const m=f[d],g=h?h.children:void 0;if(a(m,g?g.indexOf(m):void 0,h))return;h=m}if(h)return c(u,f)}function c(u,f){const d=f[f.length-1],h=s[o][0],m=s[o][1];let g=0;const x=d.children.indexOf(u);let y=!1,b=[];h.lastIndex=0;let w=h.exec(u.value);for(;w;){const j=w.index,k={index:w.index,input:w.input,stack:[...f,u]};let _=m(...w,k);if(typeof _=="string"&&(_=_.length>0?{type:"text",value:_}:void 0),_===!1?h.lastIndex=j+1:(g!==j&&b.push({type:"text",value:u.value.slice(g,j)}),Array.isArray(_)?b.push(..._):_&&b.push(_),g=j+w[0].length,y=!0),!h.global)break;w=h.exec(u.value)}return y?(g<u.value.length&&b.push({type:"text",value:u.value.slice(g)}),d.children.splice(x,1,...b)):b=[u],x+b.length}}function _Le(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const a=n[r];t.push([kLe(a[0]),SLe(a[1])])}return t}function kLe(e){return typeof e=="string"?new RegExp(wLe(e),"g"):e}function SLe(e){return typeof e=="function"?e:function(){return e}}const Nj="phrasing",Cj=["autolink","link","image","label"];function NLe(){return{transforms:[ILe],enter:{literalAutolink:ALe,literalAutolinkEmail:Aj,literalAutolinkHttp:Aj,literalAutolinkWww:Aj},exit:{literalAutolink:OLe,literalAutolinkEmail:TLe,literalAutolinkHttp:ELe,literalAutolinkWww:PLe}}}function CLe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Nj,notInConstruct:Cj},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Nj,notInConstruct:Cj},{character:":",before:"[ps]",after:"\\/",inConstruct:Nj,notInConstruct:Cj}]}}function ALe(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Aj(e){this.config.enter.autolinkProtocol.call(this,e)}function ELe(e){this.config.exit.autolinkProtocol.call(this,e)}function PLe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function TLe(e){this.config.exit.autolinkEmail.call(this,e)}function OLe(e){this.exit(e)}function ILe(e){jLe(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,RLe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),MLe]],{ignore:["link","linkReference"]})}function RLe(e,t,n,r,a){let s="";if(!kW(a)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!DLe(n)))return!1;const o=$Le(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:s+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function MLe(e,t,n,r){return!kW(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function DLe(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function $Le(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const a=TM(e,"(");let s=TM(e,")");for(;r!==-1&&a>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function kW(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||zc(n)||m0(n))&&(!t||n!==47)}SW.peek=VLe;function LLe(){this.buffer()}function FLe(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function BLe(){this.buffer()}function ULe(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function zLe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ui(this.sliceSerialize(e)).toLowerCase(),n.label=t}function qLe(e){this.exit(e)}function WLe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Ui(this.sliceSerialize(e)).toLowerCase(),n.label=t}function HLe(e){this.exit(e)}function VLe(){return"["}function SW(e,t,n,r){const a=n.createTracker(r);let s=a.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=a.move(n.safe(n.associationId(e),{after:"]",before:s})),l(),o(),s+=a.move("]"),s}function KLe(){return{enter:{gfmFootnoteCallString:LLe,gfmFootnoteCall:FLe,gfmFootnoteDefinitionLabelString:BLe,gfmFootnoteDefinition:ULe},exit:{gfmFootnoteCallString:zLe,gfmFootnoteCall:qLe,gfmFootnoteDefinitionLabelString:WLe,gfmFootnoteDefinition:HLe}}}function GLe(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:SW},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,a,s,o){const l=s.createTracker(o);let c=l.move("[^");const u=s.enter("footnoteDefinition"),f=s.enter("label");return c+=l.move(s.safe(s.associationId(r),{before:c,after:"]"})),f(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,l.current()),t?NW:YLe))),u(),c}}function YLe(e,t,n){return t===0?e:NW(e,t,n)}function NW(e,t,n){return(n?"":"    ")+e}const XLe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];CW.peek=t4e;function JLe(){return{canContainEols:["delete"],enter:{strikethrough:ZLe},exit:{strikethrough:e4e}}}function QLe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:XLe}],handlers:{delete:CW}}}function ZLe(e){this.enter({type:"delete",children:[]},e)}function e4e(e){this.exit(e)}function CW(e,t,n,r){const a=n.createTracker(r),s=n.enter("strikethrough");let o=a.move("~~");return o+=n.containerPhrasing(e,{...a.current(),before:o,after:"~"}),o+=a.move("~~"),s(),o}function t4e(){return"~"}function n4e(e){return e.length}function r4e(e,t){const n=t||{},r=(n.align||[]).concat(),a=n.stringLength||n4e,s=[],o=[],l=[],c=[];let u=0,f=-1;for(;++f<e.length;){const v=[],x=[];let y=-1;for(e[f].length>u&&(u=e[f].length);++y<e[f].length;){const b=a4e(e[f][y]);if(n.alignDelimiters!==!1){const w=a(b);x[y]=w,(c[y]===void 0||w>c[y])&&(c[y]=w)}v.push(b)}o[f]=v,l[f]=x}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<u;)s[d]=OM(r[d]);else{const v=OM(r);for(;++d<u;)s[d]=v}d=-1;const h=[],m=[];for(;++d<u;){const v=s[d];let x="",y="";v===99?(x=":",y=":"):v===108?x=":":v===114&&(y=":");let b=n.alignDelimiters===!1?1:Math.max(1,c[d]-x.length-y.length);const w=x+"-".repeat(b)+y;n.alignDelimiters!==!1&&(b=x.length+b+y.length,b>c[d]&&(c[d]=b),m[d]=b),h[d]=w}o.splice(1,0,h),l.splice(1,0,m),f=-1;const g=[];for(;++f<o.length;){const v=o[f],x=l[f];d=-1;const y=[];for(;++d<u;){const b=v[d]||"";let w="",j="";if(n.alignDelimiters!==!1){const k=c[d]-(x[d]||0),_=s[d];_===114?w=" ".repeat(k):_===99?k%2?(w=" ".repeat(k/2+.5),j=" ".repeat(k/2-.5)):(w=" ".repeat(k/2),j=w):j=" ".repeat(k)}n.delimiterStart!==!1&&!d&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&b==="")&&(n.delimiterStart!==!1||d)&&y.push(" "),n.alignDelimiters!==!1&&y.push(w),y.push(b),n.alignDelimiters!==!1&&y.push(j),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&y.push("|")}g.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return g.join(`
`)}function a4e(e){return e==null?"":String(e)}function OM(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function i4e(e,t,n,r){const a=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(e,s.current()),s4e);return a(),o}function s4e(e,t,n){return">"+(n?"":" ")+e}function o4e(e,t){return IM(e,t.inConstruct,!0)&&!IM(e,t.notInConstruct,!1)}function IM(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function RM(e,t,n,r){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&o4e(n.stack,n.unsafe[a]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function l4e(e,t){const n=String(e);let r=n.indexOf(t),a=r,s=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===a?++s>o&&(o=s):s=1,a=r+t.length,r=n.indexOf(t,a);return o}function c4e(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function u4e(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function d4e(e,t,n,r){const a=u4e(n),s=e.value||"",o=a==="`"?"GraveAccent":"Tilde";if(c4e(e,n)){const d=n.enter("codeIndented"),h=n.indentLines(s,f4e);return d(),h}const l=n.createTracker(r),c=a.repeat(Math.max(l4e(s,a)+1,3)),u=n.enter("codeFenced");let f=l.move(c);if(e.lang){const d=n.enter(`codeFencedLang${o}`);f+=l.move(n.safe(e.lang,{before:f,after:" ",encode:["`"],...l.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${o}`);f+=l.move(" "),f+=l.move(n.safe(e.meta,{before:f,after:`
`,encode:["`"],...l.current()})),d()}return f+=l.move(`
`),s&&(f+=l.move(s+`
`)),f+=l.move(c),u(),f}function f4e(e,t,n){return(n?"":"    ")+e}function BA(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function h4e(e,t,n,r){const a=BA(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),o(),u}function m4e(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Jm(e){return"&#x"+e.toString(16).toUpperCase()+";"}function oy(e,t,n){const r=Yd(e),a=Yd(t);return r===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}AW.peek=p4e;function AW(e,t,n,r){const a=m4e(n),s=n.enter("emphasis"),o=n.createTracker(r),l=o.move(a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),f=oy(r.before.charCodeAt(r.before.length-1),u,a);f.inside&&(c=Jm(u)+c.slice(1));const d=c.charCodeAt(c.length-1),h=oy(r.after.charCodeAt(0),d,a);h.inside&&(c=c.slice(0,-1)+Jm(d));const m=o.move(a);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},l+c+m}function p4e(e,t,n){return n.options.emphasis||"*"}function g4e(e,t){let n=!1;return LA(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Hk}),!!((!e.depth||e.depth<3)&&TA(e)&&(t.options.setext||n))}function v4e(e,t,n,r){const a=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(g4e(e,n)){const f=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return d(),f(),h+`
`+(a===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(a),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Jm(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u}EW.peek=x4e;function EW(e){return e.value||""}function x4e(){return"<"}PW.peek=y4e;function PW(e,t,n,r){const a=BA(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),u+=c.move(")"),o(),u}function y4e(){return"!"}TW.peek=b4e;function TW(e,t,n,r){const a=e.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!u||u!==d?c+=l.move(d+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function b4e(){return"!"}OW.peek=w4e;function OW(e,t,n){let r=e.value||"",a="`",s=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(r);)a+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return a+r+a}function w4e(){return"`"}function IW(e,t){const n=TA(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}RW.peek=j4e;function RW(e,t,n,r){const a=BA(n),s=a==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,c;if(IW(e,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(e,{before:d,after:">",...o.current()})),d+=o.move(">"),l(),n.stack=f,d}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),c(),e.title&&(c=n.enter(`title${s}`),u+=o.move(" "+a),u+=o.move(n.safe(e.title,{before:u,after:a,...o.current()})),u+=o.move(a),c()),u+=o.move(")"),l(),u}function j4e(e,t,n){return IW(e,n)?"<":"["}MW.peek=_4e;function MW(e,t,n,r){const a=e.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!u||u!==d?c+=l.move(d+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function _4e(){return"["}function UA(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function k4e(e){const t=UA(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function S4e(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function DW(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function N4e(e,t,n,r){const a=n.enter("list"),s=n.bulletCurrent;let o=e.ordered?S4e(n):UA(n);const l=e.ordered?o==="."?")":".":k4e(n);let c=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const f=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),DW(n)===o&&f){let d=-1;for(;++d<e.children.length;){const h=e.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=s,a(),u}function C4e(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function A4e(e,t,n,r){const a=C4e(n);let s=n.bulletCurrent||UA(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),f);return c(),u;function f(d,h,m){return h?(m?"":" ".repeat(o))+d:(m?s:s+" ".repeat(o-s.length))+d}}function E4e(e,t,n,r){const a=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(e,r);return s(),a(),o}const P4e=v0(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function T4e(e,t,n,r){return(e.children.some(function(o){return P4e(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function O4e(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}$W.peek=I4e;function $W(e,t,n,r){const a=O4e(n),s=n.enter("strong"),o=n.createTracker(r),l=o.move(a+a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),f=oy(r.before.charCodeAt(r.before.length-1),u,a);f.inside&&(c=Jm(u)+c.slice(1));const d=c.charCodeAt(c.length-1),h=oy(r.after.charCodeAt(0),d,a);h.inside&&(c=c.slice(0,-1)+Jm(d));const m=o.move(a+a);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},l+c+m}function I4e(e,t,n){return n.options.strong||"*"}function R4e(e,t,n,r){return n.safe(e.value,r)}function M4e(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function D4e(e,t,n){const r=(DW(n)+(n.options.ruleSpaces?" ":"")).repeat(M4e(n));return n.options.ruleSpaces?r.slice(0,-1):r}const LW={blockquote:i4e,break:RM,code:d4e,definition:h4e,emphasis:AW,hardBreak:RM,heading:v4e,html:EW,image:PW,imageReference:TW,inlineCode:OW,link:RW,linkReference:MW,list:N4e,listItem:A4e,paragraph:E4e,root:T4e,strong:$W,text:R4e,thematicBreak:D4e};function $4e(){return{enter:{table:L4e,tableData:MM,tableHeader:MM,tableRow:B4e},exit:{codeText:U4e,table:F4e,tableData:Ej,tableHeader:Ej,tableRow:Ej}}}function L4e(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function F4e(e){this.exit(e),this.data.inTable=void 0}function B4e(e){this.enter({type:"tableRow",children:[]},e)}function Ej(e){this.exit(e)}function MM(e){this.enter({type:"tableCell",children:[]},e)}function U4e(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,z4e));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function z4e(e,t){return t==="|"?t:e}function q4e(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,a=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:c,tableRow:l}};function o(m,g,v,x){return u(f(m,v,x),m.align)}function l(m,g,v,x){const y=d(m,v,x),b=u([y]);return b.slice(0,b.indexOf(`
`))}function c(m,g,v,x){const y=v.enter("tableCell"),b=v.enter("phrasing"),w=v.containerPhrasing(m,{...x,before:s,after:s});return b(),y(),w}function u(m,g){return r4e(m,{align:g,alignDelimiters:r,padding:n,stringLength:a})}function f(m,g,v){const x=m.children;let y=-1;const b=[],w=g.enter("table");for(;++y<x.length;)b[y]=d(x[y],g,v);return w(),b}function d(m,g,v){const x=m.children;let y=-1;const b=[],w=g.enter("tableRow");for(;++y<x.length;)b[y]=c(x[y],m,g,v);return w(),b}function h(m,g,v){let x=LW.inlineCode(m,g,v);return v.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function W4e(){return{exit:{taskListCheckValueChecked:DM,taskListCheckValueUnchecked:DM,paragraph:V4e}}}function H4e(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:K4e}}}function DM(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function V4e(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const a=t.children;let s=-1,o;for(;++s<a.length;){const l=a[s];if(l.type==="paragraph"){o=l;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function K4e(e,t,n,r){const a=e.children[0],s=typeof e.checked=="boolean"&&a&&a.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);s&&l.move(o);let c=LW.listItem(e,t,n,{...r,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(f){return f+o}}function G4e(){return[NLe(),KLe(),JLe(),$4e(),W4e()]}function Y4e(e){return{extensions:[CLe(),GLe(e),QLe(),q4e(e),H4e()]}}const X4e={tokenize:nFe,partial:!0},FW={tokenize:rFe,partial:!0},BW={tokenize:aFe,partial:!0},UW={tokenize:iFe,partial:!0},J4e={tokenize:sFe,partial:!0},zW={name:"wwwAutolink",tokenize:eFe,previous:WW},qW={name:"protocolAutolink",tokenize:tFe,previous:HW},vo={name:"emailAutolink",tokenize:Z4e,previous:VW},ks={};function Q4e(){return{text:ks}}let ql=48;for(;ql<123;)ks[ql]=vo,ql++,ql===58?ql=65:ql===91&&(ql=97);ks[43]=vo;ks[45]=vo;ks[46]=vo;ks[95]=vo;ks[72]=[vo,qW];ks[104]=[vo,qW];ks[87]=[vo,zW];ks[119]=[vo,zW];function Z4e(e,t,n){const r=this;let a,s;return o;function o(d){return!Yk(d)||!VW.call(r,r.previous)||zA(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(d))}function l(d){return Yk(d)?(e.consume(d),l):d===64?(e.consume(d),c):n(d)}function c(d){return d===46?e.check(J4e,f,u)(d):d===45||d===95||Wr(d)?(s=!0,e.consume(d),c):f(d)}function u(d){return e.consume(d),a=!0,c}function f(d){return s&&a&&ra(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function eFe(e,t,n){const r=this;return a;function a(o){return o!==87&&o!==119||!WW.call(r,r.previous)||zA(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(X4e,e.attempt(FW,e.attempt(BW,s),n),n)(o))}function s(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function tFe(e,t,n){const r=this;let a="",s=!1;return o;function o(d){return(d===72||d===104)&&HW.call(r,r.previous)&&!zA(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(d),e.consume(d),l):n(d)}function l(d){if(ra(d)&&a.length<5)return a+=String.fromCodePoint(d),e.consume(d),l;if(d===58){const h=a.toLowerCase();if(h==="http"||h==="https")return e.consume(d),c}return n(d)}function c(d){return d===47?(e.consume(d),s?u:(s=!0,c)):n(d)}function u(d){return d===null||ay(d)||bn(d)||zc(d)||m0(d)?n(d):e.attempt(FW,e.attempt(BW,f),n)(d)}function f(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function nFe(e,t,n){let r=0;return a;function a(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),a):o===46&&r===3?(e.consume(o),s):n(o)}function s(o){return o===null?n(o):t(o)}}function rFe(e,t,n){let r,a,s;return o;function o(u){return u===46||u===95?e.check(UW,c,l)(u):u===null||bn(u)||zc(u)||u!==45&&m0(u)?c(u):(s=!0,e.consume(u),o)}function l(u){return u===95?r=!0:(a=r,r=void 0),e.consume(u),o}function c(u){return a||r||!s?n(u):t(u)}}function aFe(e,t){let n=0,r=0;return a;function a(o){return o===40?(n++,e.consume(o),a):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(UW,t,s)(o):o===null||bn(o)||zc(o)?t(o):(e.consume(o),a)}function s(o){return o===41&&r++,e.consume(o),a}}function iFe(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),s):l===93?(e.consume(l),a):l===60||l===null||bn(l)||zc(l)?t(l):n(l)}function a(l){return l===null||l===40||l===91||bn(l)||zc(l)?t(l):r(l)}function s(l){return ra(l)?o(l):n(l)}function o(l){return l===59?(e.consume(l),r):ra(l)?(e.consume(l),o):n(l)}}function sFe(e,t,n){return r;function r(s){return e.consume(s),a}function a(s){return Wr(s)?n(s):t(s)}}function WW(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||bn(e)}function HW(e){return!ra(e)}function VW(e){return!(e===47||Yk(e))}function Yk(e){return e===43||e===45||e===46||e===95||Wr(e)}function zA(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const oFe={tokenize:pFe,partial:!0};function lFe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:fFe,continuation:{tokenize:hFe},exit:mFe}},text:{91:{name:"gfmFootnoteCall",tokenize:dFe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:cFe,resolveTo:uFe}}}}function cFe(e,t,n){const r=this;let a=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;a--;){const c=r.events[a][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const u=Ui(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function uFe(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function dFe(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return l;function l(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(d){if(s>999||d===93&&!o||d===null||d===91||bn(d))return n(d);if(d===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return a.includes(Ui(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return bn(d)||(o=!0),s++,e.consume(d),d===92?f:u}function f(d){return d===91||d===92||d===93?(e.consume(d),s++,u):u(d)}}function fFe(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(g){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(g){return g===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):n(g)}function f(g){if(o>999||g===93&&!l||g===null||g===91||bn(g))return n(g);if(g===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return s=Ui(r.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return bn(g)||(l=!0),o++,e.consume(g),g===92?d:f}function d(g){return g===91||g===92||g===93?(e.consume(g),o++,f):f(g)}function h(g){return g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),a.includes(s)||a.push(s),Yt(e,m,"gfmFootnoteDefinitionWhitespace")):n(g)}function m(g){return t(g)}}function hFe(e,t,n){return e.check(zp,t,e.attempt(oFe,t,n))}function mFe(e){e.exit("gfmFootnoteDefinition")}function pFe(e,t,n){const r=this;return Yt(e,a,"gfmFootnoteDefinitionIndent",5);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(s):n(s)}}function gFe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:a};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function a(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},d={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},h=[["enter",f,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",d,l]],m=l.parser.constructs.insideSpan.null;m&&za(h,h.length,0,p0(m,o.slice(u+1,c),l)),za(h,h.length,0,[["exit",d,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",f,l]]),za(o,u-1,c-u+3,h),c=u+h.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const u=this.previous,f=this.events;let d=0;return h;function h(g){return u===126&&f[f.length-1][1].type!=="characterEscape"?c(g):(o.enter("strikethroughSequenceTemporary"),m(g))}function m(g){const v=Yd(u);if(g===126)return d>1?c(g):(o.consume(g),d++,m);if(d<2&&!n)return c(g);const x=o.exit("strikethroughSequenceTemporary"),y=Yd(g);return x._open=!y||y===2&&!!v,x._close=!v||v===2&&!!y,l(g)}}}class vFe{constructor(){this.map=[]}add(t,n,r){xFe(this,t,n,r)}consume(t){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let a=r.pop();for(;a;){for(const s of a)t.push(s);a=r.pop()}this.map.length=0}}function xFe(e,t,n,r){let a=0;if(!(n===0&&r.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=n,e.map[a][2].push(...r);return}a+=1}e.map.push([t,n,r])}}function yFe(e,t){let n=!1;const r=[];for(;t<e.length;){const a=e[t];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function bFe(){return{flow:{null:{name:"table",tokenize:wFe,resolveAll:jFe}}}}function wFe(e,t,n){const r=this;let a=0,s=0,o;return l;function l(T){let I=r.events.length-1;for(;I>-1;){const O=r.events[I][1].type;if(O==="lineEnding"||O==="linePrefix")I--;else break}const F=I>-1?r.events[I][1].type:null,E=F==="tableHead"||F==="tableRow"?_:c;return E===_&&r.parser.lazy[r.now().line]?n(T):E(T)}function c(T){return e.enter("tableHead"),e.enter("tableRow"),u(T)}function u(T){return T===124||(o=!0,s+=1),f(T)}function f(T){return T===null?n(T):vt(T)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),m):n(T):Ht(T)?Yt(e,f,"whitespace")(T):(s+=1,o&&(o=!1,a+=1),T===124?(e.enter("tableCellDivider"),e.consume(T),e.exit("tableCellDivider"),o=!0,f):(e.enter("data"),d(T)))}function d(T){return T===null||T===124||bn(T)?(e.exit("data"),f(T)):(e.consume(T),T===92?h:d)}function h(T){return T===92||T===124?(e.consume(T),d):d(T)}function m(T){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(T):(e.enter("tableDelimiterRow"),o=!1,Ht(T)?Yt(e,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):g(T))}function g(T){return T===45||T===58?x(T):T===124?(o=!0,e.enter("tableCellDivider"),e.consume(T),e.exit("tableCellDivider"),v):k(T)}function v(T){return Ht(T)?Yt(e,x,"whitespace")(T):x(T)}function x(T){return T===58?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(T),e.exit("tableDelimiterMarker"),y):T===45?(s+=1,y(T)):T===null||vt(T)?j(T):k(T)}function y(T){return T===45?(e.enter("tableDelimiterFiller"),b(T)):k(T)}function b(T){return T===45?(e.consume(T),b):T===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(T),e.exit("tableDelimiterMarker"),w):(e.exit("tableDelimiterFiller"),w(T))}function w(T){return Ht(T)?Yt(e,j,"whitespace")(T):j(T)}function j(T){return T===124?g(T):T===null||vt(T)?!o||a!==s?k(T):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(T)):k(T)}function k(T){return n(T)}function _(T){return e.enter("tableRow"),S(T)}function S(T){return T===124?(e.enter("tableCellDivider"),e.consume(T),e.exit("tableCellDivider"),S):T===null||vt(T)?(e.exit("tableRow"),t(T)):Ht(T)?Yt(e,S,"whitespace")(T):(e.enter("data"),A(T))}function A(T){return T===null||T===124||bn(T)?(e.exit("data"),S(T)):(e.consume(T),T===92?N:A)}function N(T){return T===92||T===124?(e.consume(T),A):A(T)}}function jFe(e,t){let n=-1,r=!0,a=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,f,d;const h=new vFe;for(;++n<e.length;){const m=e[n],g=m[1];m[0]==="enter"?g.type==="tableHead"?(l=!1,c!==0&&($M(h,t,c,u,f),f=void 0,c=0),u={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",u,t]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",f,t]])),a=g.type==="tableDelimiterRow"?2:f?3:1):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=Kg(h,t,s,a,void 0,d),s=[0,0,0,0]),o[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],d=Kg(h,t,s,a,void 0,d)),s=o,o=[s[1],n,0,0])):g.type==="tableHead"?(l=!0,c=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],d=Kg(h,t,s,a,n,d)):o[1]!==0&&(d=Kg(h,t,o,a,n,d)),a=0):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&$M(h,t,c,u,f),h.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=yFe(t.events,n))}return e}function Kg(e,t,n,r,a,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Au(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const c=Au(t.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const u=Au(t.events,n[2]),f=Au(t.events,n[3]),d={type:l,start:Object.assign({},u),end:Object.assign({},f)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const h=t.events[n[2]],m=t.events[n[3]];if(h[1].end=Object.assign({},m[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,v=n[3]-n[2]-1;e.add(g,v,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return a!==void 0&&(s.end=Object.assign({},Au(t.events,a)),e.add(a,0,[["exit",s,t]]),s=void 0),s}function $M(e,t,n,r,a){const s=[],o=Au(t.events,n);a&&(a.end=Object.assign({},o),s.push(["exit",a,t])),r.end=Object.assign({},o),s.push(["exit",r,t]),e.add(n+1,0,s)}function Au(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const _Fe={name:"tasklistCheck",tokenize:SFe};function kFe(){return{text:{91:_Fe}}}function SFe(e,t,n){const r=this;return a;function a(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),s)}function s(c){return bn(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return vt(c)?t(c):Ht(c)?e.check({tokenize:NFe},t,n)(c):n(c)}}function NFe(e,t,n){return Yt(e,r,"whitespace");function r(a){return a===null?n(a):t(a)}}function CFe(e){return nW([Q4e(),lFe(),gFe(e),bFe(),kFe()])}const AFe={};function LM(e){const t=this,n=e||AFe,r=t.data(),a=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);a.push(CFe(n)),s.push(G4e()),o.push(Y4e(n))}var Yi="Accordion",EFe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[qA,PFe,TFe]=ip(Yi),[y0,y3e]=_r(Yi,[TFe,kq]),WA=kq(),KW=V.forwardRef((e,t)=>{const{type:n,...r}=e,a=r,s=r;return i.jsx(qA.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?i.jsx(MFe,{...s,ref:t}):i.jsx(RFe,{...a,ref:t})})});KW.displayName=Yi;var[GW,OFe]=y0(Yi),[YW,IFe]=y0(Yi,{collapsible:!1}),RFe=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},collapsible:s=!1,...o}=e,[l,c]=Ca({prop:n,defaultProp:r??"",onChange:a,caller:Yi});return i.jsx(GW,{scope:e.__scopeAccordion,value:V.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:V.useCallback(()=>s&&c(""),[s,c]),children:i.jsx(YW,{scope:e.__scopeAccordion,collapsible:s,children:i.jsx(XW,{...o,ref:t})})})}),MFe=V.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},...s}=e,[o,l]=Ca({prop:n,defaultProp:r??[],onChange:a,caller:Yi}),c=V.useCallback(f=>l((d=[])=>[...d,f]),[l]),u=V.useCallback(f=>l((d=[])=>d.filter(h=>h!==f)),[l]);return i.jsx(GW,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:i.jsx(YW,{scope:e.__scopeAccordion,collapsible:!0,children:i.jsx(XW,{...s,ref:t})})})}),[DFe,b0]=y0(Yi),XW=V.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:a,orientation:s="vertical",...o}=e,l=V.useRef(null),c=St(l,t),u=PFe(n),d=of(a)==="ltr",h=Ee(e.onKeyDown,m=>{var A;if(!EFe.includes(m.key))return;const g=m.target,v=u().filter(N=>{var T;return!((T=N.ref.current)!=null&&T.disabled)}),x=v.findIndex(N=>N.ref.current===g),y=v.length;if(x===-1)return;m.preventDefault();let b=x;const w=0,j=y-1,k=()=>{b=x+1,b>j&&(b=w)},_=()=>{b=x-1,b<w&&(b=j)};switch(m.key){case"Home":b=w;break;case"End":b=j;break;case"ArrowRight":s==="horizontal"&&(d?k():_());break;case"ArrowDown":s==="vertical"&&k();break;case"ArrowLeft":s==="horizontal"&&(d?_():k());break;case"ArrowUp":s==="vertical"&&_();break}const S=b%y;(A=v[S].ref.current)==null||A.focus()});return i.jsx(DFe,{scope:n,disabled:r,direction:a,orientation:s,children:i.jsx(qA.Slot,{scope:n,children:i.jsx(Ge.div,{...o,"data-orientation":s,ref:c,onKeyDown:r?void 0:h})})})}),ly="AccordionItem",[$Fe,HA]=y0(ly),JW=V.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...a}=e,s=b0(ly,n),o=OFe(ly,n),l=WA(n),c=ir(),u=r&&o.value.includes(r)||!1,f=s.disabled||e.disabled;return i.jsx($Fe,{scope:n,open:u,disabled:f,triggerId:c,children:i.jsx(Cq,{"data-orientation":s.orientation,"data-state":r9(u),...l,...a,ref:t,disabled:f,open:u,onOpenChange:d=>{d?o.onItemOpen(r):o.onItemClose(r)}})})});JW.displayName=ly;var QW="AccordionHeader",ZW=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=b0(Yi,n),s=HA(QW,n);return i.jsx(Ge.h3,{"data-orientation":a.orientation,"data-state":r9(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:t})});ZW.displayName=QW;var Xk="AccordionTrigger",e9=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=b0(Yi,n),s=HA(Xk,n),o=IFe(Xk,n),l=WA(n);return i.jsx(qA.ItemSlot,{scope:n,children:i.jsx(tIe,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:s.triggerId,...l,...r,ref:t})})});e9.displayName=Xk;var t9="AccordionContent",n9=V.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=b0(Yi,n),s=HA(t9,n),o=WA(n);return i.jsx(nIe,{role:"region","aria-labelledby":s.triggerId,"data-orientation":a.orientation,...o,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});n9.displayName=t9;function r9(e){return e?"open":"closed"}var LFe=KW,FFe=JW,BFe=ZW,a9=e9,i9=n9;const UFe=LFe,s9=p.forwardRef(({className:e,...t},n)=>i.jsx(FFe,{ref:n,className:ye("border-b",e),...t}));s9.displayName="AccordionItem";const o9=p.forwardRef(({className:e,children:t,...n},r)=>i.jsx(BFe,{className:"flex",children:i.jsxs(a9,{ref:r,className:ye("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,i.jsx(xa,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));o9.displayName=a9.displayName;const l9=p.forwardRef(({className:e,children:t,...n},r)=>i.jsx(i9,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:i.jsx("div",{className:ye("pb-4 pt-0",e),children:t})}));l9.displayName=i9.displayName;const FM=`# Change Log
# [0.1.16] FE WEB CEKAT 2025-12-20
### UI Components
- **SearchableSelect Component**: Added a new reusable searchable single-select dropdown component.
  - Provides searchable dropdown functionality with keyboard navigation support.
  - Includes proper accessibility attributes and visual feedback for selected items.
  - Used for improved agent assignment interface in conversation management.

- **SearchableMultiSelect Component**: Added a new reusable searchable multi-select component.
  - Supports selecting multiple items with badge display for selected values.
  - Includes add/remove callbacks for granular control over selection changes.
  - Displays selected items as removable badges with clear visual indicators.

### Conversation Management
- **Enhanced Agent Assignment UI**: Replaced popover-based assignment interface with searchable select components.
  - "Handled By" field now uses \`SearchableSelect\` for improved searchability and UX.
  - Streamlined assignment flow with better visual feedback and state management.
  - Added optimistic UI updates with proper state synchronization.

- **Improved Collaborator Management**: Enhanced thread collaborator interface with multi-select support.
  - Replaced popover-based collaborator addition with \`SearchableMultiSelect\` component.
  - Collaborator list now displays as removable badges for better visibility.
  - Added support for super agent member filtering - only members of the assigned super agent can be added as collaborators.
  - Collaborator selection is disabled until a "Handled By" agent is assigned.
  - Automatic fetching of super agent members when an agent is assigned.

- **Manual Thread Assignment**: Added \`assignThreadToUser\` function for supervisor-level thread reassignment.
  - Allows supervisors to manually assign conversations to specific users.
  - Automatically creates system event messages when assignments occur.
  - Updates thread metadata including \`assigned_by_user_id\`, \`assigned_at\`, and \`handover_reason\`.
  - Disables AI access when manually assigned (\`ai_access_enabled: false\`).

- **User Label Resolution**: Improved user display name resolution for agents and collaborators.
  - Fetches user profile data for agents not present in the human agents list.
  - Caches user labels to avoid redundant API calls.
  - Provides fallback display names when profile data is unavailable.

### Bug Fixes
- **Fixed Handled By State Leak**: Resolved critical bug where assigning a thread to an agent would incorrectly show that agent as assigned to all other threads.
  - Scoped \`handledByOverride\` state to specific thread IDs instead of using global state.
  - Optimistic UI updates now only apply to the thread being assigned, preventing state leakage when navigating between conversations.
  - Fixed issue where changing "Handled By" for one thread would temporarily display the same value for all threads until server refresh.

# [0.1.15] FE WEB CEKAT 2025-12-19
### Database & Policies
- **Threads Update Policy**: Master agents can now resolve conversations across all environments.
  - Updated the \`threads update perm update_own\` policy to allow updates when \`is_master_agent_in_org(org_id)\` is true.
  - Applied the policy change to main, development, and backup Supabase projects and added a migration for consistency.

### Conversation Management
- **Resolved Thread Cleanup**: UI now hides take-over controls once a thread is closed.
  - Removed the takeover button and composer input when \`status === 'closed'\`, preventing accidental actions on resolved chats.

### Contacts
- **Unassigned Filter Accuracy**: Ensured the contacts list reflects only unassigned records without altering assigned data.
  - Adjusted Supabase querying and client filtering so contacts with no assigned agent (or no thread yet) display correctly.
  - Total counters and pagination now show filtered counts (e.g. \`12 of 16\`) when a handled-by filter is active.
- **Export to CSV**: Added a one-click export that downloads the current contact dataset (with latest thread info) as a CSV.
  - Includes contact fields (name, phone, email, notes, created_at) and latest thread metadata (status, handled by, channel).
- **Toolbar Cleanup**: Removed the unused Customize Columns button for a leaner toolbar experience.

# [0.1.14] FE WEB CEKAT 2025-12-18
### Platform Forms (WhatsApp / Telegram / Web)
- **Top Spacing Layout Fix**: Standardized form spacing under dialog headers for a cleaner, consistent layout across all platform setup forms.

### Telegram Platform
- **Bot Token Validation (Required)**: Added a **Validate** button beside the Telegram Bot Token field and made validation mandatory before creating a Telegram platform.
  - Create is blocked with an error until the token has been validated.
- **Token Verification via Supabase Edge Function**: Token verification now calls the Supabase Edge Function endpoint (\`/functions/v1/telegram-verify-token\`) with a strict response contract (\`{ valid: boolean }\`).
  - \`callWebhook()\` now auto-attaches Supabase auth headers for Supabase Edge Function URLs.

# [0.1.13] FE WEB CEKAT 2025-12-17
### Conversation Management
- **Date Filter Fix**: Resolved an issue where the date filter in the conversations menu would incorrectly exclude valid conversations.
  - Switched from server-side filtering on \`created_at\`/\`last_msg_at\` (which could be stale) to client-side filtering using the computed last message time.
  - Ensures the filter now perfectly matches the dates displayed in the UI, correctly showing threads active within the selected range.

# [0.1.12] FE WEB CEKAT 2025-12-14
### Human Agents UI Protection
- **Master Agent UI Safeguards**: Enhanced protection for master agent accounts in the Human Agents interface.
  - Status dropdown button is now disabled for master agents across all sections (master agents, super agents, regular agents, and pending invitations).
  - Chevron dropdown icon is conditionally hidden for master agents to provide clear visual indication that status cannot be changed.
  - Delete button is completely hidden for master agents (replacing the previous disabled button with tooltip approach) across all agent sections.
  - Applied consistent protection logic using \`primaryRole === 'master_agent'\` checks throughout the component.
  - Provides cleaner UI experience by removing non-functional controls rather than showing disabled states.

### Authentication & OTP
- **2FA Email Edge Function Update**: Updated edge function reference for login-specific 2FA emails.
  - Changed edge function call from \`send-2fa-email\` to \`send-2fa-login-email\` in \`AuthContext.tsx\` and \`Otp.tsx\`.
  - Aligns with backend function naming convention for better clarity and separation of login vs other 2FA email flows.

# [0.1.11] FE WEB CEKAT 2025-12-10
### Conversation Management
- **Status Filter Cleanup**: Removed the redundant "Resolved" option from the conversation status filter.
  - The "Closed" status now serves as the single source of truth for completed conversations.
  - Simplified the filtering logic to remove unnecessary status checks.

# [0.1.10] FE WEB CEKAT 2025-12-09
### Human Agents & Permissions
- **Create Agent Permission Gate**: Simplified and hardened the Create Agent button on the Human Agents page.
  - Button is now directly gated by \`users_profile.create\` via \`PermissionGate\`, following the same pattern as other RBAC-protected actions.
  - When the user lacks permission, the button stays visible but disabled with a clear tooltip (You do not have permission to create agents.).
  - Removed the extra client-side lookup against the \`permissions\` table and associated state (\`createPermissionKey\`, \`checkingCreatePermission\`) to reduce complexity and runtime edge cases.

### Navigation & RBAC Consistency
- **Super Agents Schema Alignment**: Updated \`PERMISSIONS_SCHEMA\` to include the full \`super_agents\` action set (\`create\`, \`update\`, \`delete\`, \`read_all\`, \`read_own\`), matching the backend \`permissions\` table.
- **Navigation Read-Gates**: Centralized navigation gating to use read scopes consistently:
  - Added a defensive \`readPerms(resource)\` helper that safely derives \`resource.read*\` keys from \`PERMISSIONS_SCHEMA\`.
  - Human Agents sidebar item now depends on any \`super_agents\` read scope (e.g. \`super_agents.read_all\` / \`super_agents.read_own\`), keeping menu visibility aligned with DB permissions.
- **useNavigation Stability**: Adjusted \`useNavigation\` to skip DB permission recomputation while RBAC is still loading, preventing transient context errors during hot reloads while keeping the existing has_perm-first behavior.

# [0.1.9] FE WEB CEKAT 2025-12-03
### AI Agents
- Replaced the browser \`confirm()\` with a first-class modal when deleting AI agents.
  - Uses the shared \`AlertDialog\` component with explicit cancel/confirm controls.
  - Shows the agent name inside the confirmation copy and blocks dismissal while the request is in flight.
  - Surfaces loader feedback and only closes when the Supabase delete succeeds.

# [0.1.8] FE WEB CEKAT 2025-12-03
### Platform Forms: Super Agent Management & Scoping
- **Explicit Super Agent Selection**: All platform forms (WhatsApp, Telegram, Web) now require explicit Super Agent selection before AI Agent selection
  - Super Agent field is now a required, selectable dropdown (previously derived from AI Agent)
  - Field appears above AI Agent selection with clear labeling and tooltips
  - Form validation prevents submission without Super Agent selection
  - Helper text explains that Super Agent can be changed independently of AI Agent

- **AI Agent Filtering by Super Agent**: Enhanced AI Agent selection with strict scoping
  - AI Agent dropdown only shows agents belonging to the selected Super Agent
  - Validation prevents selecting AI agents that don't belong to the selected Super Agent
  - Error toast notifications when attempting invalid selections
  - Form automatically resets AI Agent selection when Super Agent changes
  - Warning message displayed if selected AI Agent lacks a Super Agent assignment

- **Human Agent Scoping**: Improved human agent assignment with role-based filtering
  - Human Agent multi-select only shows agents assigned to the selected Super Agent
  - "Select All" and "Unselect All" buttons for quick agent assignment
  - Multi-select disabled until Super Agent is selected
  - Clear placeholder text indicating selection requirements
  - Consistent behavior across all platform types (WhatsApp, Telegram, Web)

- **AI Agent Creation Enhancement**: Super Agent assignment during creation
  - Super Agent selection required in AI Agent creation dialog
  - Searchable dropdown for Super Agent selection
  - Super Agent information displayed in AI Agent cards
  - Validation ensures Super Agent is selected before agent creation

### Navigation & Permissions Updates
- **Navigation Configuration**: Updated navigation items and permission mappings
  - Refined permission checks for navigation visibility
  - Enhanced role-based access control for navigation items
  - Improved database permission checks in useNavigation hook

- **Permission Schema**: Updated permissions configuration
  - Aligned permission schema with backend requirements
  - Enhanced permission categorization and validation

### Live Chat Improvements
- **Message Handling**: Enhanced message synchronization and streaming
  - Improved realtime message updates
  - Better handling of streaming responses
  - Optimized message deduplication logic
  - Enhanced user message timeout handling

### Webhook Configuration
- **Webhook Routing**: Updated webhook endpoint configuration
  - Enhanced proxy-aware routing
  - Improved endpoint resolution for different providers
  - Better error handling for webhook calls

### Technical Improvements
- **Hooks Enhancement**: Improved data fetching and scoping
  - Enhanced useAIAgents hook with better super agent scoping
  - Improved useNavigation hook with database permission checks
  - Better error handling and loading states
  - Optimized cache management

# [0.1.7] FE WEB CEKAT 2025-12-03
### RBAC & Permissions (Finalized Alignment)
- Standardized PERMISSIONS_SCHEMA to match production backend exactly:
  analytics, ai_profiles, ai_sessions, channels, contacts, contact_identities, threads, messages, ai_agent_files, admin_panel, roles, audit_logs, alerts.
- Permission Matrix UX revamp (purely permission-driven):
  - Card sections enforced per resource: Manage (create/update/delete), Access Level (read variants), Special Actions (send/ack).
  - Mutually exclusive Access Level pills; Threads uses My Channels (read_channel_owned), Collaborator, All.
  - Special actions exposed as toggles: messages.send (Send), alerts.ack (Acknowledge).
  - Select All sets Manage + Special Actions ON and selects the most permissive single read level; Unselect All resets to None.
  - Labels updated (Update Settings for admin_panel.update); consistent wording across cards.
  - Added concise tooltips for threads/messages read scopes and alerts.ack.
- Removed bundle-based Menu Access from PermissionsPage; no more ghost toggles or bundles.
- Fixed toggle handler so switches reflect intended state; role permission grant/revoke now gated by roles.update.
- Debounced RBAC refresh during bulk edits to prevent UI lag.

### Navigation & Visibility (Policy-First)
- Menu visibility now depends on DB has_perm checks; items are hidden if the user lacks any read scope for that section.
- Updated gating keys to align with schema:
  - Admin Panel: admin_panel.read (menu), admin_panel.update (controls)
  - Permissions: roles.read
  - Chat: threads.read_* (any of read_all/read_channel_owned/read_collaborator)
  - Analytics: analytics.read
  - Contacts: contacts.read_*; Platforms: channels.read_*; AI Agents: ai_profiles.read_*; Logs: audit_logs.read
- Sidebar renders only items from getAccessibleNavItems(); fixed ReferenceError by properly destructuring the hook return.
- Reduced has_perm spam: policy checks recompute only when RBAC roles/permissions change.

### Admin Panel
- Replaced legacy access_rules.configure gates:
  - Controls now use admin_panel.update; navigation uses admin_panel.read.

### Misc
- Added contact_identities to schema.
- Consistency/cleanup across labels, ordering, and spacing in Permission Matrix.

# [0.1.6] FE WEB CEKAT 2025-11-30
### Cache Management & Session Reliability
- **Comprehensive Cache Clearing on Logout**: Enhanced logout functionality to clear all cached data
  - Clears all localStorage items (including \`app.cached*\`, \`app.currentUserId\`, etc.)
  - Clears all sessionStorage items
  - Clears all Supabase auth tokens
  - Prevents stale data from persisting after logout
  - Applied to both \`AuthContext.signOut()\` and \`Logout.tsx\` page

- **localStorage-Based User ID Storage**: Improved session reliability by storing user ID in localStorage
  - User ID and email stored in localStorage as \`app.currentUserId\` and \`app.currentUserEmail\` on login
  - Added \`getCurrentUserId()\` helper function that prefers localStorage over Supabase session
  - Updated \`logAction()\` to use localStorage user_id first, then fallback to Supabase session
  - Ensures consistent user identification even when Supabase session is temporarily unavailable

### Bug Fixes
- **Merge Conflict Resolution**: Resolved merge conflict in \`useAIAgents.ts\` by combining \`scopeMode\` and \`superAgentId\` logic
- **Policy Role Fix**: Fixed \`threads_master_read\` policy to use \`authenticated\` role instead of \`public\` role
- **Cache Persistence**: Fixed issue where cached data persisted after logout, causing users to see unauthorized data

# [0.1.5] FE WEB CEKAT 2025-11-30
### Webhook & Supabase URL Consistency
- **Single Source for Supabase URL**: Exported a shared \`SUPABASE_URL\` constant from the Supabase client so all front-end integrations reference the same base URL sinstead of duplicating it.
- **Proxy Edge Function Alignment**: Updated \`WEBHOOK_CONFIG\` to derive the proxy base (\`/functions/v1/proxy-n8n\`) from the shared \`SUPABASE_URL\`, removing the old hardcoded Supabase project host and keeping proxy routing aligned with the active project.
- **WhatsApp WAHA Webhook Normalization**: Swapped the hardcoded Railway webhook host in \`WhatsAppPlatformForm\` for \`WEBHOOK_CONFIG.BASE_URL\`, ensuring WAHA sessions always post back into the currently configured webhook environment.

# [0.1.4] FE WEB CEKAT 2025-11-28
### Bug Fixes
- **PermissionsPage Duplicate Declaration Fix**: Resolved "Identifier 'permissionSearch' has already been declared" syntax error
  - Removed duplicate state declarations for \`permissionSearch\`, \`permissionResourceFilter\`, and \`permissionActionFilter\`
  - Kept the properly typed versions of these state variables
  - Fixed runtime error that prevented the Permissions page from loading

# [0.1.3] FE WEB CEKAT 2025-11-28
### AI Agent Visibility
- Agents now only see AI agents owned by their assigned super agent; a new \`useSuperAgentScope\` hook drives consistent filtering across dashboards, dropdowns, and cached data.
- The AI Agents list and helpers surface localized messaging when an agent has no supervising cluster, preventing stale cross-team data from leaking through local storage.
### Database Access Control
- Tightened the \`ai_profiles\` RLS guard so master agents retain full visibility, super agents stay scoped to their own records, and agents inherit their supervising super agents access.

# [0.1.2] FE WEB CEKAT 2025-11-26
### Platform Form Enhancements for Super Agents
- **Super Agent Field Auto-Prefill**: All platform creation forms (Telegram, WhatsApp, Web) now automatically prefill the super agent field when the current user is a super agent
  - Super agent field is automatically populated with the current user's super agent username/ID when form opens
  - Field becomes readonly (visual indication with reduced opacity) when user is a super agent
  - Helper text updated to indicate super agent is determined by current user's account for super agent users
  - Prevents super agent users from changing their own super agent assignment

- **AI Agent Filtering for Super Agents**: Enhanced platform forms to filter AI agents based on super agent role
  - Super agent users only see AI agents that belong to their account in the AI agent dropdown
  - Validation prevents selecting AI agents that don't belong to the super agent's account
  - Error toast notification shown when attempting to select invalid AI agents
  - Master agents continue to see all AI agents as before

- **Role-Based Form Behavior**: Implemented role-aware form logic across all platform types
  - Added \`useRBAC()\` hook integration to check for \`ROLES.SUPER_AGENT\` role
  - Automatic super agent ID detection from \`humanAgents\` list when form opens
  - Form reset logic preserves super agent ID for super agent users
  - Consistent behavior across Telegram, WhatsApp, and Web platform forms

### Technical Improvements
- **Component Updates**: Enhanced platform form components with role-based logic
  - Added \`useEffect\` hooks to prefill super agent field on form open
  - Integrated \`useRBAC\` context for role checking
  - Added conditional rendering and validation based on user role
  - Improved form state management to preserve super agent selection for super agent users

# [0.1.1] FE WEB CEKAT 2025-11-27
### Permissions Console
- **Regression Fix**: Reintroduced missing permission search and filter state in \`PermissionsPage\`; restores the role configuration screen and avoids the \`permissionSearch is not defined\` runtime error.
- **Master Agent Safety Rail**: Hard-blocked deletion of the Master Agent from both UI and API helpers; delete buttons are disabled with guidance and back-end guards stop any direct calls.
### UI Localization
- **Master Agent Deletion Message**: Updated the modal tooltip and toast that appear when attempting to delete a master agent; the copy now follows the latest localization requirements.

# [0.1.0] FE WEB CEKAT 2025-11-27
### FINALIZED FOR PRODUCTION
### Agent Creation UX
- **Modal-Friendly Errors**: Duplicate-email validation now surfaces purely as a toast; the Create Agent dialog stays open and no longer renders the full-page error banner, making it easy to adjust the address and resubmit.

# [0.0.49] FE WEB CEKAT 2025-11-27
### Human Agents Roster
- **Duplicate Entry Cleanup**: Adjusted role grouping logic so master agents no longer appear in both the master and agent sections of the Human Agents table; prevents a single email from showing twice and keeps assignment status accurate.

### Login & Session Guardrails
- **Refresh Spinner Fix**: Added watchdog timers around Supabase session/bootstrap calls so a stalled \`auth.getSession()\` or 2FA profile check cant trap users behind the infinite Loading screen; stale sessions now fall back to the login view within a few seconds.
- **Account Status Timeouts**: Soft-capped the account status RPC to keep token refreshes responsive even if the database briefly stops responding.

# [0.0.48] FE WEB CEKAT 2025-11-26
### RBAC & Permissions System Enhancements
- **Master Agent Root Role Treatment**: Master Agent is now treated as root role with full system privileges
  - Master Agent role is designated as root role with unrestricted access across the system
  - Permission matrix editing is disabled for Master Agent to prevent accidental permission removal
  - Root role status ensures Master Agent maintains full privileges regardless of permission configuration

- **Permission Matrix UI Updates**: Disabled permission matrix editing for Master Agent role
  - Added root role detection in PermissionsPage component (\`isRootSelected\` check)
  - Permission matrix sections (Menu Access, CRUD Permissions, Special Permissions) are disabled when configuring Master Agent
  - Added informational "Root Role" card explaining Master Agent's full privilege status
  - All permission checkboxes and bundle toggles are disabled with helpful tooltips ("Master Agent is root; matrix disabled")
  - Clear visual indication that Master Agent has full privileges and doesn't require permission configuration
  - Prevents accidental permission removal for root role through UI safeguards
  - Early return guards prevent any permission toggle operations when Master Agent is selected

### Technical Improvements
- **PermissionsPage Component**: Enhanced role configuration logic
  - Added \`isRootSelected\` state check based on role name comparison
  - Conditional rendering of root role information card
  - Disabled state applied to all permission matrix controls for Master Agent
  - Improved tooltip messaging for disabled root role controls
- **Open Conversation Navigation Fix**: Ensured contacts page button opens chat inbox
  - \`Open conversation\` now routes to chat inbox with \`menu=chat\`
  - Automatically selects the relevant contact thread when available

# [0.0.47] FE WEB CEKAT 2025-11-25
### Supabase Baseline Refresh
- **Single Source Migration**: Replaced the entire migrations stack with \`20251124230847_baseline.sql\`, capturing todays production schema so every environment can rebuild from a single, clean baseline.
- **Vector Extension Guardrails**: Ensured the baseline creates the \`vector\` extension in the \`public\` schema and updates every dependent function/column to reference the schema-qualified type.
- **Config Hardening**: Explicitly pins Supabase Storage to \`v1.31.1\` in \`supabase/config.toml\`, preventing CLI diffs from failing on missing storage migrations.

### Branch & Data Maintenance
- **Development Branch Reset**: Repaired Supabase migration history, reapplied the new baseline, and reset the \`development\` branch so it replays the trimmed migration set without legacy drift.
- **Main  Dev Data Parity**: Dumped production \`public\` + \`auth\` data and restored it into the development branch, then pruned historic test accounts to keep both environments aligned.
- **Backup Hygiene**: Ran the same user cleanup on the backup project (\`igtizjvhxgajijjjxnzi\`) to ensure the automated sync worker starts from a consistent dataset.

# [0.0.46] FE WEB CEKAT 2025-11-24
### Database Migration Hardening
- **Legacy Platform Support**: Updated the \`20250828000000_merge_platforms_into_channels.sql\` migration to add any missing \`platforms\` columns (\`display_name\`, \`website_url\`, \`status\`, \`secret_token\`, \`profile_photo_url\`, \`ai_profile_id\`) on the fly so historical environments can replay migrations without schema drift.
- **Main Branch Hotfix Migration**: Applied Supabase migration \`20250827950000_fix_platforms_schema\` on production to backfill those columns immediately, unblocking rebase operations across environments.
- **Rebase Reliability**: Re-ran the Supabase rebase workflow to verify the new safeguards; future branch syncs no longer fail on missing column errors when promoting channels data.

# [0.0.45] FE WEB CEKAT 2025-11-23
### QA Testing Guide Expansion
- **End-to-End Flow Coverage**: Expanded \`DOCUMENTATION.md\` with exhaustive step-by-step flows covering login, OTP, password reset, human/AI agent lifecycle, contacts, permissions, admin utilities, analytics, and audit logs so QA can validate every button and path without code access.
- **Button & Validation Matrix**: Documented the enabled/disabled states, confirmation dialogs, toasts, and edge-case behaviour for all primary actions (create, save, delete, export, toggle) across the application.
- **Role-Based Walkthroughs**: Added guidance on testing from master, super, and agent perspectives, including navigation expectations and restricted-card behaviour on the dashboard.

### Documentation Quality Improvements
- **Live Chat & Admin Deep Dives**: Added detailed instructions for conversation tools (notes, tags, canned responses, SLAs), AI pause/resume workflow, circuit breaker monitoring, and platform onboarding (WhatsApp, Telegram, Web).
- **Human Agent Lifecycle**: Documented invite, resend, cancellation, token limit management, usage analytics, and removal to ensure QA covers onboarding and offboarding scenarios end-to-end.
- **Changelog & Profile Flows**: Captured interactive changelog behaviour, search/filter expectations, and full profile/session management (2FA toggle, password change, device sign-out).

### Super Agent Clustering
- **AI Agent Ownership**: Introduced \`super_agent_id\` on \`ai_profiles\`, enforced via migrations and new RLS policies. Super agents only see/manage their own AI agents; master agents can reassign via settings.
- **Auto-Inherited Platform Ownership**: Platform creation/editing now derives \`channels.super_agent_id\` from the selected AI agent, eliminating manual super agent selection while keeping human-agent assignment intact.
- **Scoped Listings**: AI agent lists, stats, and platform forms filter to the current super agent automatically; agents without clusters are prevented from being used until assigned.

### Platform Assignment Guard
- **Scoped Agent Dropdowns**: When creating WhatsApp, Telegram, or Web platforms as a master agent, the human-agent selector now lists only agents assigned to the chosen super agentpreventing unassigned agents from appearing in the multi-select.

# [0.0.44] FE WEB CEKAT 2025-11-19
### Changelog Experience Revamp
- **Interactive Release Browser**: Introduced a dynamic changelog page with searchable release list, color-coded highlights, and accordion sections for each area of work.
- **Dual View Modes**: Added interactive and classic tabs so readers can switch between the immersive UI and the original Markdown in one place.
- **Automatic Highlight Extraction**: Generate summary badges from markdown bullet points to surface the most important updates per release.
- **Styling Updates**: Applied gradient backgrounds, elevated cards, and refined typography for a colorful, engaging presentation.
- **Comprehensive Documentation**: Added \`DOCUMENTATION.md\` detailing auth flows, feature modules, Supabase schema, and operational processes.

# [0.0.43] FE WEB CEKAT 2025-11-18
### AI Pause Notification System
- **New AI Paused Modal Component**: Created dedicated modal for org-wide AI pause notifications
  - Modal displays when AI responses are paused across all channels
  - Shows who paused AI and when (for master agents)
  - Different messaging for master agents vs regular agents
  - Master agents can directly navigate to Admin Panel from modal
  - Modal appears once per browser session (acknowledgment stored in localStorage)
  - Integrated into main Index page with automatic status checking

- **Org-Wide AI Pause Status Monitoring**: Enhanced AI pause state management
  - Automatic fetching of org-wide AI pause status on app load
  - Resolves paused-by user name from profile or email
  - Modal auto-dismisses when AI pause is lifted
  - Session-based acknowledgment prevents modal spam

### Conversation Page UI Improvements
- **Fixed Tab Color Styling**: Resolved issue where selected tab colors were not displaying
  - Restructured Tooltip/TabsTrigger relationship (Tooltip now inside TabsTrigger)
  - Assigned tab: Blue background and text when active
  - Unassigned tab: Red background and text when active
  - Resolved tab: Green background and text when active
  - Proper \`data-[state=active]\` attribute application from Radix UI

- **Improved Conversation Sorting**: Enhanced conversation list sorting logic
  - Removed unreplied priority sorting (now purely by latest activity)
  - Conversations sorted by \`last_msg_at\` timestamp (most recent first)
  - Fallback to \`created_at\` if \`last_msg_at\` unavailable
  - More intuitive ordering based on actual activity

- **Enhanced Timestamp Display**: Improved date/time formatting in conversation list
  - Added "Yesterday" display for messages from previous day
  - Changed date format from \`dd/MM/yy\` to \`MM/dd/yyyy\` for better clarity
  - Better hour-based calculations for relative time display
  - More accurate time representation

- **TypeScript Fixes**: Resolved type errors
  - Removed reference to non-existent \`updated_at\` field on \`ConversationWithDetails\`
  - Fixed sorting logic to use only available timestamp fields

### Code Quality Improvements
- **Conversation Hooks Cleanup**: Minor refactoring in \`useConversations\` hook
  - Code cleanup and optimization
  - Improved type safety

# [0.0.42] FE WEB CEKAT 2025-11-03
### Admin Panel & Centralized Management
- **New Admin Panel Component**: Created centralized admin control center for master agents
  - New dedicated Admin Panel page accessible via navigation (master agents only)
  - Moved data retention and GDPR controls from Analytics to Admin Panel for better organization
  - Added quick access links to all admin sections (Permissions, Human Agents, Platforms, Analytics, Logs, Contacts)
  - Integrated Circuit Breaker Status monitoring directly in admin panel
  - Added cache clearing utility for local storage cleanup
  - Bulk contact deletion interface with UUID parsing (comma/newline separated)
  - Enhanced data retention controls with manual cleanup trigger
  - GDPR/PDPA deletion interface with confirmation modals
  - All admin features consolidated in single, role-gated interface

### Webhook Infrastructure Refactoring
- **Centralized Webhook Client**: Created new \`webhookClient.ts\` for unified webhook handling
  - Automatic authentication for proxy endpoints using Supabase session tokens
  - Support for both legacy and proxy-based endpoints
  - Automatic API key injection for proxy requests
  - Consistent error handling across all webhook calls
  - \`callWebhook()\` function replaces direct \`fetch()\` calls throughout application

- **Proxy-Aware Webhook Configuration**: Major refactoring of webhook routing system
  - Introduced \`route:\` prefix system for proxy-based endpoints
  - Automatic routing to Supabase Edge Function proxy (\`proxy-n8n\`) for prefixed endpoints
  - Legacy endpoint support maintained for backward compatibility
  - Provider-specific endpoint resolution (\`resolveSendMessageEndpoint()\`)
  - Enhanced provider normalization (wa/whatsapp_cloud  whatsapp, tg/tele  telegram)
  - All platform forms (WhatsApp, Telegram) now use centralized webhook client
  - Live Chat component updated to use new webhook client

### AI Agent Enhancements
- **AI Model Selection System**: Comprehensive model management in AI Agent creation and settings
  - Model selection dropdown in AI Agent creation dialog with pricing and provider information
  - Fallback model selection for automatic failover when primary model unavailable
  - Model-specific context window and history limit validation
  - Dynamic limit calculation based on selected model capabilities
  - Enhanced model display with cost per 1M tokens, provider badges, and descriptions
  - Model filtering (regular vs fallback models) for better UX
  - Auto-selection of first available model on load

- **AI Agent Settings UI Improvements**: Enhanced settings interface with better input handling
  - Replaced numeric inputs with text inputs using \`inputMode="numeric"\` for better mobile support
  - Added input validation with clamping to model-specific maximums
  - Context window input now in "K tokens" format with model-specific limits
  - History limit shows model-specific maximums with helpful descriptions
  - Auto-resolve timeout input with proper validation (0-1440 minutes)
  - Message cap input with placeholder examples
  - Removed "AI Read File Limit" field (commented out, not in use)
  - Better label clarity: "Enable auto-resolve", "Auto-resolve timeout", "Conversation History (tokens)", "Context Window (K tokens)", "Creativity Preset", "AI Message Cap"
  - Model selection card with primary and fallback model sections
  - Real-time display of model capabilities and limits

- **AI Agent Creation Flow**: Enhanced creation process
  - Model selection required before agent creation
  - Fallback model optional selection during creation
  - Better validation and error messages
  - Improved dialog with cancel button and loading states

### Analytics Component Cleanup
- **Removed Admin Controls**: Moved data retention and GDPR controls to Admin Panel
  - Removed data retention policy card from Analytics Conversation tab
  - Removed GDPR deletion card from Analytics
  - Removed Circuit Breaker Status from Analytics (now in Admin Panel)
  - Simplified Analytics component focusing on analytics and reporting only
  - Better separation of concerns between analytics and administration

### Database & Permissions
- **New Migration**: Added \`users_profile.create\` permission
  - Created migration \`20251103_add_users_profile_create_permission.sql\`
  - Grants \`users_profile.create\` permission to \`master_agent\` and \`super_agent\` roles
  - Enables proper RBAC for user profile creation operations

### Enhanced Caching & Performance
- **Query Signature-Based Caching**: Improved cache key generation in \`supabaseProtected.ts\`
  - Added query signature serialization for more accurate cache keys
  - Cache keys now include query method signatures and arguments
  - Prevents cache collisions between similar but different queries
  - Better cache invalidation with pattern matching
  - Enhanced cache hit rates with more granular key generation

- **Cache Invalidation Improvements**: Better cache management
  - Contact deletion now invalidates related query caches
  - Thread deletion invalidates conversation caches
  - Pattern-based cache invalidation using \`defaultFallbackHandler.invalidatePattern()\`

### Conversation & Contact Management
- **Enhanced Conversation Hooks**: Improved conversation management
  - Added \`deleteThread()\` function to \`useConversations\` hook
  - Provider-aware message sending using \`resolveSendMessageEndpoint()\`
  - Better provider detection from conversation data
  - Cache invalidation on thread deletion

- **Contact Management**: Improved deletion handling
  - Enhanced bulk deletion with cache invalidation
  - Better error handling in contact operations
  - Improved cache management for contact queries

### Platform Integration Updates
- **WhatsApp Platform**: Updated to use new webhook client
  - Session creation, login QR, logout, disconnect, and delete operations use \`callWebhook()\`
  - Consistent error handling across all WhatsApp operations

- **Telegram Platform**: Updated to use new webhook client
  - Platform creation and webhook deletion use centralized webhook client
  - Better error handling and response parsing

- **Connected Platforms**: Enhanced platform management
  - All webhook calls migrated to \`callWebhook()\` function
  - Better error handling and user feedback
  - Consistent authentication across all platform operations

### Navigation & Routing
- **New Admin Panel Route**: Added admin panel to navigation
  - New "Admin Panel" navigation item (master agents only)
  - Requires \`access_rules.configure\` permission
  - Added to navigation config and routing
  - Default navigation fallback improved to handle permission-based routing

### UI/UX Improvements
- **Human Agents**: Enhanced creation dialog
  - Better validation and error messages
  - Cancel button in creation dialog
  - Improved loading states
  - Permission-based UI (disabled buttons with tooltips when permission missing)

- **Input Improvements**: Better form inputs throughout application
  - Numeric inputs use \`inputMode="numeric"\` for mobile keyboards
  - Better placeholder text and validation messages
  - Improved accessibility with proper input types

### Technical Improvements
- **Code Organization**: Better separation of concerns
  - Admin functionality centralized in Admin Panel component
  - Webhook logic centralized in webhook client
  - Better component structure and maintainability

- **Type Safety**: Enhanced TypeScript types
  - Added \`model_id\` to AIProfile interface
  - Better type definitions for webhook responses
  - Improved type safety in platform forms

- **Error Handling**: Consistent error handling
  - Unified error handling in webhook client
  - Better error messages throughout application
  - Improved user feedback with toast notifications

# [0.0.41] FE WEB CEKAT 2025-11-01
### Data Retention & GDPR Compliance
- **Data Retention Policy System**: Implemented configurable data retention with automatic cleanup
  - Added 90-day default retention policy (adjustable from 1-365 days) stored in \`org_settings\` table
  - Created \`cleanup_old_chat_data()\` PostgreSQL function for automatic deletion of old chat data
  - Scheduled daily cleanup job at 2 AM UTC via \`pg_cron\` extension
  - Respects organization-specific retention periods stored in \`org_settings.retention_days\`
  - Only deletes data older than retention period (rolling window, not everything daily)
  - Deletes old threads, messages, and orphaned contacts based on \`created_at\` timestamps
  - Supports both org-specific cleanup and global cleanup for all organizations

- **GDPR/PDPA Right to Erasure**: Implemented compliant user data deletion functionality
  - Created \`gdpr_delete_user_data()\` PostgreSQL function for permanent deletion of user data
  - Deletes all threads, messages, and contact records for a specific contact UUID
  - Validates contact belongs to requesting organization before deletion
  - Returns detailed deletion results (threads, messages, contacts deleted count)
  - Permanently removes all user-associated data in compliance with GDPR/PDPA regulations
  - Action cannot be undone with clear warning messages in UI

- **Admin Controls in Analytics**: Added data retention and GDPR controls in Conversation tab
  - Data Retention Policy card with current retention period display and edit functionality
  - Manual "Run Cleanup Now" button for immediate cleanup execution
  - GDPR/PDPA deletion card with contact UUID input field
  - Restricted to users with \`access_rules.configure\` permission (master/super agents only)
  - Real-time success/error message display for all operations
  - Last cleanup results display showing threads, messages, and contacts deleted counts

- **Database Migration**: Applied comprehensive migration for data retention features
  - Migration \`20250102_data_retention_and_gdpr.sql\` successfully applied via Supabase MCP
  - Created \`cleanup_old_chat_data()\` and \`gdpr_delete_user_data()\` functions with proper security
  - Added RLS policies for \`org_settings\` table updates restricted to master/super agents
  - Initialized default 90-day retention for all existing organizations
  - Ensured \`is_current_user_active()\` dependency function exists for RLS checks

### Contact Management Enhancements
- **Contact UUID Detail Modal**: Added master agent-only contact UUID display
  - New UUID section in contact details modal visible only to master agents
  - Displays contact UUID with copy-to-clipboard functionality
  - Includes helpful description for GDPR deletion requests and system integrations
  - Uses RBAC role check (\`hasRole('master_agent')\`) to restrict visibility
  - Styled with monospace font and muted background for clear readability
  - Badge indicator showing "Master Agent Only" restriction

### Technical Improvements
- **Supabase Integration**: Full integration with Supabase database functions
  - \`fetchRetentionSettings()\` reads from \`org_settings\` table via protected Supabase client
  - \`saveRetentionDays()\` updates retention period using upsert operation
  - \`triggerCleanup()\` calls \`cleanup_old_chat_data\` RPC function
  - \`executeGdprDeletion()\` calls \`gdpr_delete_user_data\` RPC function
  - All operations use \`protectedSupabase\` client respecting circuit breaker and RLS
  - Proper error handling and user feedback for all database operations

- **RBAC Integration**: Enhanced role-based access control for admin features
  - Permission gates around data retention and GDPR controls
  - Master agent role check for contact UUID visibility
  - Secure access control using \`useRBAC\` context hooks

### UI/UX Enhancements
- **Data Retention UI**: Comprehensive admin interface for retention management
  - Edit modal for configuring retention period (1-365 days range)
  - Visual display of current retention period with clear descriptions
  - Warning messages explaining automatic cleanup schedule
  - Success/error message toasts for user feedback

- **GDPR Deletion UI**: Secure and user-friendly deletion interface
  - Two-step confirmation process with warning modal
  - Clear indication of what will be deleted (threads, messages, contacts)
  - Contact UUID input with validation
  - Destructive button styling to indicate permanent action

### Security & Compliance
- **Data Protection**: Enhanced data protection mechanisms
  - Row Level Security (RLS) policies enforce master/super agent access only
  - Automatic cleanup respects retention periods to prevent accidental data loss
  - GDPR deletion function validates organization membership before deletion
  - All database operations use security definer functions with proper permissions

# [0.0.40] FE WEB CEKAT 2025-11-01
### Adaptive Rate Limiter Integration & DDoS Protection
- **Adaptive Rate Limiter Full Integration**: Integrated adaptive rate limiter into Supabase protection system
  - Enhanced AdaptiveRateLimiter class with getConfig() and updateConfig() methods for runtime configuration
  - Added localStorage persistence for adaptive rate limiter configuration and multipliers
  - Integrated adaptive rate limiter into supabaseProtected.ts, replacing static rate limiter for all operations
  - Implemented automatic limit adjustment based on system health metrics (response time, error rate)
  - Added query to circuit_breaker_metrics table in Supabase for real-time metrics analysis
  - Automatic adjustment loop runs every adjustment interval to update limits dynamically

- **Adaptive Rate Limiter Configuration UI**: Added comprehensive configuration interface
  - Created new "Adaptive Rate Limiter Configuration" section in Limit Configuration
  - Display base limits for all 4 operations (Reads, Writes, RPC, Auth) with current effective limits
  - Real-time display of multipliers (percentage) for each operation type
  - Show min/max multiplier, adjustment interval, and latency thresholds
  - Added "Edit" button with comprehensive modal for editing all adaptive rate limiter parameters
  - Visual status indicator showing adaptive rate limiter is active and protecting database
  - All configuration values are editable with proper validation and range limits

- **Enhanced Rate Limiter Card**: Updated to show adaptive limits
  - Changed card title to "Rate Limiter (Adaptive)" to reflect dynamic nature
  - Display effective limits (dynamically calculated) instead of static limits
  - Show multiplier percentage for each operation type
  - Real-time updates every second to reflect current adaptive limits
  - Informative tooltips explaining how adaptive limits work for traffic spike protection

- **Comprehensive Circuit Breaker Documentation Updates**: Enhanced documentation with detailed input explanations
  - Added detailed explanation section for all Circuit Breaker inputs (5 parameters)
    - Failure Threshold: When circuit opens, tips, recommendations
    - Reset Timeout: Recovery time, tips for different scenarios
    - Success Threshold: Recovery validation, recommendations
    - Monitoring Period: Sliding window explanation, impact on detection
    - Request Timeout: Timeout handling, recommendations per operation type
  - Added comprehensive explanation for all Adaptive Rate Limiter inputs (7+ parameters)
    - Base Limits: Explanation for Reads/Writes/RPC/Auth with recommendations
    - Min/Max Multiplier: How multipliers affect limits, examples with calculations
    - Latency Thresholds: Healthy vs Stress thresholds, tips for optimization
    - Adjustment Interval: How often limits adjust, recommendations for different scenarios
  - Added "How They Work Together" sections showing complete workflow for both systems

- **DDoS & Traffic Spike Protection Guide**: Added dedicated protection guide
  - Created comprehensive guide section explaining inputs specifically for DDoS protection
  - Ranked inputs by importance: Min Multiplier (most important), Stress Threshold, Base Limits, etc.
  - Detailed recommendations for each input with effectiveness ratings
  - Provided optimal configuration preset for maximum DDoS protection
  - Explained complete attack scenario flow (5-step process)
  - Visual color-coded sections for easy reference (red borders for critical inputs)

- **Documentation Improvements**: Enhanced existing documentation sections
  - Updated "Best Practices" section to include adaptive rate limiter tips
  - Enhanced "Configuration Reference" to show both Circuit Breaker and Adaptive Rate Limiter configs
  - Added effective limits display with multiplier percentages in configuration reference
  - Updated troubleshooting section to mention adaptive rate limiter as protection layer
  - All documentation now uses dynamic values from current configuration (real-time)

### Technical Improvements
- **Type System Enhancements**: Improved TypeScript type exports
  - Re-exported OperationType from adaptiveRateLimiter for better type consistency
  - Fixed import issues in CircuitBreakerStatus component
  - All types properly exported and available for external use

- **Storage Management**: Enhanced persistence system
  - Adaptive rate limiter config persists to localStorage with multipliers
  - Automatic loading of saved configuration on initialization
  - Interval ID management for proper cleanup when adjustment interval changes
  - Backward compatible with existing localStorage data

### UI/UX Enhancements
- **Configuration Visualization**: Better display of adaptive limits
  - Show both base limit and effective limit side-by-side
  - Multiplier percentage displayed with color coding (green for healthy)
  - Real-time status indicators showing system is actively protecting
  - Clear distinction between static base limits and dynamic effective limits

- **Documentation UX**: Improved documentation readability
  - Color-coded input explanations (red, orange, yellow, blue, purple borders)
  - Step-by-step workflows with numbered lists
  - Practical examples using actual configuration values
  - Tips and recommendations clearly separated from explanations
  - Warning boxes for critical information

### Performance & Security
- **DDoS Protection**: Multi-layered defense system
  - Adaptive rate limiter as first line of defense (reduces limits automatically)
  - Request timeout as second layer (cancels slow requests)
  - Circuit breaker as last resort (blocks all requests if needed)
  - Complete protection against traffic spikes and DDoS attacks

- **Smart Limit Adjustment**: Intelligent limit management
  - Limits increase when system is healthy (up to 200% of base)
  - Limits decrease when system is stressed (down to 50% of base by default)
  - Gradual adjustment prevents sudden changes (max 10% increase, 20% decrease per cycle)
  - Automatic return to normal limits when system recovers

# [0.0.39] FE WEB CEKAT 2025-11-01
### Circuit Breaker Enhancements & Documentation
- **Circuit Breaker Configuration Management**: Added comprehensive limit configuration interface for admins
  - Created "Limit Configuration" section displaying all circuit breaker thresholds (disabled by default)
  - Added "Edit" button to open configuration modal for modifying limits
  - Implemented getConfig() and updateConfig() methods in CircuitBreaker class
  - Added configuration persistence to localStorage for client-side recovery
  - Configuration values are now dynamically displayed and editable
  - Each configuration field includes descriptive tooltips explaining the purpose

- **Circuit Breaker Documentation System**: Implemented comprehensive documentation modal
  - Added documentation card section above "Danger Zone" with "Lihat Dokumentasi Circuit Breaker" button
  - Created detailed documentation modal covering:
    - What is Circuit Breaker and its purpose
    - How Circuit Breaker works (three states: CLOSED, OPEN, HALF_OPEN)
    - Step-by-step workflow with dynamic configuration values
    - What to do when circuit breaker opens (troubleshooting guide)
    - Understanding metrics and their meanings
    - Best practices for monitoring and optimization
    - Configuration reference with current values
  - All documentation content in Indonesian language with clear formatting
  - Modal is scrollable and responsive for better readability

- **Enhanced UI/UX for Circuit Breaker Analytics**: Improved user experience and safety
  - Added question mark icons (HelpCircle) beside all labels in "Limit Configuration" section
  - Each icon displays informative tooltip on hover with Indonesian descriptions
  - Reorganized admin controls into two distinct sections:
    - "Limit Configuration": For viewing and editing circuit breaker thresholds
    - "Danger Zone": For critical admin actions with enhanced warnings
  - Added tooltips to all buttons in "Danger Zone" explaining their effects
  - Enhanced visual hierarchy with color-coded sections (blue for docs, red for danger)
  - All tooltips and descriptions use dynamic values from current configuration

- **Circuit Breaker Class Improvements**: Enhanced circuit breaker functionality
  - Added getConfig() method to retrieve current configuration
  - Added updateConfig() method to modify configuration at runtime
  - Configuration is automatically saved to localStorage on update
  - Configuration is automatically loaded from localStorage on initialization
  - Maintains backward compatibility with existing circuit breaker state

### AI Agent Settings Cleanup
- **Removed Timezone Field**: Cleaned up unused timezone configuration
  - Removed timezone field from AI Agent Settings UI component
  - Dropped timezone column from ai_profiles table via database migration
  - Removed timezone state variables and related logic from frontend
  - Updated TypeScript types to remove timezone references
  - Note: timezone field in users_profile table remains unchanged (separate feature)

### Technical Improvements
- **Code Organization**: Better separation of concerns in Circuit Breaker Status component
  - Split admin controls into logical sections (Documentation, Limit Configuration, Danger Zone)
  - Improved component structure for better maintainability
  - Enhanced modal management with dedicated state variables
  - Better error handling and user feedback

### UI/UX Enhancements
- **Documentation Integration**: Added comprehensive help system
  - Documentation card with prominent call-to-action button
  - Modal-based documentation with scrollable content
  - Color-coded sections for better visual hierarchy
  - Responsive design for all screen sizes
  - Dark mode support throughout documentation modal

- **Enhanced Tooltips**: Improved user guidance
  - Question mark icons next to all configuration labels
  - Contextual tooltips explaining each configuration parameter
  - Tooltips on danger zone buttons with detailed warnings
  - All tooltips in Indonesian language for consistency


# [0.0.38] FE WEB CEKAT 2025-10-30
### Refactor Authentication & RBAC
- Removed unnecessary debug logging from authentication and RBAC components.
- Enhanced role checks within navigation for more secure access control.
- Improved account status handling to better manage user states.
- Added role-based restrictions directly in navigation configuration.
- Updated related components for improved clarity and performance.

# [0.0.37] FE WEB CEKAT 2025-10-30
### Circuit Breaker & Database Protection System
- **Comprehensive Circuit Breaker Implementation**: Implemented full-featured circuit breaker system for database protection
  - Created core CircuitBreaker class with state machine (CLOSED, OPEN, HALF_OPEN) and configurable thresholds
  - Added state persistence using localStorage for client-side recovery across page refreshes
  - Implemented event emitter pattern for real-time monitoring and state change notifications
  - Added time-windowed failure counting (10s monitoring period) with automatic state transitions

- **Rate Limiting & Request Management**: Implemented advanced rate limiting and request optimization
  - Created sliding window rate limiter with per-user and per-endpoint tracking
  - Implemented request queue with deduplication, priority handling, and debouncing
  - Added request batching for similar queries to reduce total request count
  - Created adaptive rate limiter that adjusts limits based on system health metrics

- **Enhanced Error Handling & Caching**: Implemented comprehensive error management and response caching
  - Created error classifier utility mapping Supabase error codes to categories (network, database, auth, rate limit, timeout)
  - Implemented retry logic with exponential backoff (1s, 2s, 4s, 8s max) and error-specific strategies
  - Added response caching with IndexedDB/localStorage using stale-while-revalidate pattern
  - Implemented offline mode support with write operation queuing and sync on connection restore

- **Database Analytics & Monitoring**: Added comprehensive database performance monitoring
  - Created new "Database" tab in Analytics section with detailed database statistics
  - Implemented PostgreSQL functions for database metrics (table sizes, row counts, index performance, memory stats)
  - Added real-time database activity monitoring with KPI cards and interactive charts
  - Created comprehensive table statistics view with scan ratios, vacuum timestamps, and DML operations

- **Circuit Breaker Analytics Dashboard**: Integrated circuit breaker monitoring into Analytics section
  - Added new "Circuit Breaker" tab displaying real-time status and metrics
  - Created CircuitBreakerStatus component with admin controls and visual indicators
  - Implemented metrics collection and storage in circuit_breaker_metrics table
  - Added comprehensive help tooltips with Indonesian descriptions for all labels

- **Protected Supabase Integration**: Wrapped all database operations with circuit breaker protection
  - Created protectedSupabase wrapper replacing direct Supabase calls in critical components
  - Integrated circuit breaker, rate limiting, caching, and metrics collection
  - Updated Analytics, ConversationPage, and useConversations hooks to use protected wrapper
  - Implemented graceful degradation and fallback mechanisms for failed operations

- **Admin Controls & Safety Features**: Added comprehensive admin controls with safety measures
  - Implemented custom modal dialogs replacing browser confirm/alert dialogs
  - Added confirmation popups with detailed Indonesian warnings for all admin actions
  - Created color-coded modal themes (orange for reset, red for critical actions, blue for info)
  - Added success/error feedback modals with proper error handling

### Technical Improvements
- **Performance Optimizations**: Resolved application freezing and lag issues
  - Fixed infinite loop in background cache refresh mechanism
  - Optimized metrics collection with batching and throttling (50 batch size, 30s interval)
  - Implemented caching for getUserId calls with 1-minute TTL and 500ms timeout
  - Added cooldown periods to prevent refresh storms (30s for queries, 60s for RPCs)
  - Made rate limiting more lenient for read operations to prevent blocking

- **Database Schema Updates**: Enhanced database with circuit breaker metrics
  - Created circuit_breaker_metrics table with comprehensive operation tracking
  - Added RLS policies and indexes for efficient metrics querying
  - Implemented 30-day retention policy with cleanup_old_metrics function
  - Added database analytics functions for comprehensive performance monitoring

### UI/UX Enhancements
- **Modal System**: Replaced browser dialogs with custom modal components
  - Created consistent modal design matching application theme
  - Added proper dark mode support and responsive design
  - Implemented clear visual hierarchy with icons and color coding
  - Added comprehensive warning messages in Indonesian language

- **Help System**: Enhanced user guidance throughout the application
  - Added question mark icons with tooltips to all analytics labels
  - Implemented LabelWithHelp component for consistent help integration
  - Created comprehensive Indonesian descriptions for all circuit breaker features
  - Added contextual help for admin controls and safety warnings


# [0.0.36] FE WEB CEKAT 2025-10-25
### Security & Authentication
- **Account Deactivation System**: Implemented comprehensive account deactivation blocking system
  - Added database-level RLS policies to prevent deactivated users from accessing system resources
  - Created dedicated \`/account-deactivated\` warning page with Indonesian content
  - Implemented pre-login account status validation to prevent deactivated users from authenticating
  - Added automatic redirect to warning page when deactivated account is detected
  - Enhanced security with "fail closed" approach - blocks access if account status cannot be verified

### User Experience Improvements
- **Enhanced Navigation**: Fixed navigation issues and improved user flow
  - Replaced modal-based account deactivation with dedicated warning page
  - Added "Kembali ke Halaman Login" button with complete cleanup functionality
  - Implemented localStorage clearing and user signout on account deactivation
  - Fixed infinite loading issues caused by component conflicts
  - Added loading states and prevented multiple button clicks during navigation

### Technical Improvements
- **Component Architecture**: Streamlined authentication flow components
  - Removed deprecated \`AccountDeactivatedModal\` component
  - Created dedicated \`AccountDeactivated\` page component with proper routing
  - Fixed Router context issues by restructuring component hierarchy in App.tsx
  - Enhanced error handling and timeout management for signOut operations
  - Added comprehensive debugging and logging for authentication flow

### Database & Security
- **Row Level Security (RLS)**: Enhanced database security policies
  - Updated RLS policies to include active user checks for all major tables
  - Created \`is_current_user_active()\` helper function for consistent security checks
  - Applied security policies to \`users_profile\`, \`org_members\`, \`channels\`, \`contacts\`, \`threads\`, and \`messages\` tables
  - Implemented strict access control preventing deactivated users from reading sensitive data

### Bug Fixes
- **Authentication Flow**: Resolved multiple authentication-related issues
  - Fixed flicker when logging in with deactivated accounts
  - Resolved race conditions in account status checking
  - Fixed logout button functionality by preventing account deactivation interference
  - Corrected database column name from \`is_f2a_email_enabled\` to \`is_2fa_email_enabled\`
  - Fixed CORS errors with edge function approach by implementing direct database validation

### UI/UX Enhancements
- **Account Deactivation Warning Page**: Created comprehensive user feedback system
  - Added clear Indonesian messaging explaining account deactivation
  - Implemented contact instructions for Master Agent reactivation
  - Added visual warning indicators with appropriate icons and styling
  - Created responsive design with proper loading states and button interactions

# [0.0.35] FE WEB CEKAT 2025-16-09
### Updates
- Added HCaptcha site key to .env for CAPTCHA validation.
- Enhanced Login component to include CAPTCHA verification.
- Improved ConversationPage to display channel logos.
- Updated HumanAgents component for better pagination and agent management.
- Adjusted useConversations and useHumanAgents hooks to support new fields for channel logos and agent organization.
- Implemented strict checks for super agent assignments in usePlatforms hook.

# [0.0.34] FE WEB CEKAT 2025-11-09
### Updates
### AIAgentSettings
* Added new state variables:
  * \`historyLimit\`
  * \`readFileLimit\`
  * \`contextLimit\`
  * \`responseTemperature\`
  * \`messageAwait\`
  * \`messageLimit\`
  * \`timezone\`
* Improved overall usage tracking and configurability.

### HumanAgent
* Introduced **usage range option** for better monitoring.
* Refactored **agent visibility logic** for clearer access control.
* Enhanced handling of **agent roles and statuses** for more robust management.

# [0.0.33] FE WEB CEKAT 2025-10-09
### Updates
- Update project branding, enhance chat functionality, and improve permissions management
- Added aria-labels for accessibility in chat components
- Refined URL state synchronization in ConversationPage
- Implemented sorting and editing features in Contacts
- Removed legacy policy editing from PermissionsPage
- Updated navigation permissions for better clarity

# [0.0.32] FE WEB CEKAT 2025-10-04
### Updates
- Fixed Live chat error and detail chat
- Update project branding to **Synka AI**
- Enhance **chat functionality**
- Improve **permissions management**
- Key changes include:
  - Renaming titles and meta descriptions
  - Adding a direct route to the chat inbox
  - Updating permission checks
  - Refining UI elements for better user experience

Updating permission checks

Refining UI elements for better user experience
# [0.0.31] FE WEB CEKAT 2025-10-04
### Updates
- Introduced a new endpoint \`CHAT_TEST\` for testing AI agent chat settings.
- Updated \`AIAgentSettings\` component to include profile handling and improved UI with collapsible sections for behavior, welcome message, and transfer conditions.
- Enhanced \`ChatPreview\` to support profile ID and adjusted styling for better user experience.
- Refactored platform forms to remove profile photo upload functionality.

# [0.0.30] FE WEB CEKAT 2025-10-04
### Updates
- Fix invite

# [0.0.29] FE WEB CEKAT 2025-10-04
Commit: Invite flow fixes, required field validation, form improvements
### Updates
- Invite Flow Fixes
  - Fixed invite flow to redirect users directly to password creation page instead of 2FA page
  - Added invite flow detection to skip 2FA requirements for invited users
  - Prevented duplicate 2FA emails for invited users
  - Added \`/invite\` route for proper invite handling
  - Enhanced ProtectedRoute to detect and redirect invite flows appropriately
- Form Validation Improvements
  - Made "Attach to Super Agent" field required for regular agents
  - Added visual indicators (red asterisks) for all required fields
  - Implemented real-time form validation with disabled submit button
  - Added contextual help text explaining field requirements
  - Enhanced error messages with specific validation feedback
- User Experience Enhancements
  - Submit button now disabled until all required fields are filled
  - Clear visual hierarchy distinguishing required vs optional fields
  - Real-time validation feedback as users type/select
  - Improved form accessibility with proper labeling
- Bug Fixes
  - Fixed invite users being incorrectly redirected to 2FA page
  - Resolved duplicate 2FA email sending for invited users
  - Corrected form submission logic for agent creation
  - Enhanced error handling for missing required fields

# [0.0.28] FE WEB CEKAT 2025-10-04
Commit: Auto-resolve functionality, thread timestamp fixes, audio notifications, UI improvements
### Updates
- Auto-Resolve System
  - Fixed auto-resolve functionality to work correctly with AI agents
  - Database triggers now properly set \`auto_resolve_at\` timestamp when AI responds
  - Auto-resolve function uses correct enum value \`'closed'\` instead of \`'resolved'\`
  - Periodic checking every 30 seconds for threads ready to auto-resolve
  - Real-time auto-resolve checks on message events
  - Threads auto-resolve after specified minutes of inactivity without user response
- Thread List Improvements
  - Fixed thread list to show latest message timestamp instead of first message timestamp
  - WhatsApp-style conversation sorting with unreplied threads at top
  - Real-time conversation preview updates without full list refresh
- Audio Notifications
  - Added audio notification system for new messages in opened threads
  - Two notification sounds: incoming (\`mixkit-message-pop-alert-2354.mp3\`) and outgoing (\`mixkit-long-pop-2358.wav\`)
  - Debounced notifications to prevent duplicate sounds
  - Tab visibility checks to only play sounds when tab is active
  - User controls: enable/disable audio notifications, test notification
- UI Improvements
  - Removed clock icon from chat message bubbles for cleaner appearance
  - Enhanced message streaming with better real-time updates
  - Improved conversation list performance with optimized refresh logic
- Database Schema Updates
  - Added \`channel_id\` to \`token_usage_logs\` table for better analytics
  - Added \`super_agent_id\` to \`channels\` table (moved from \`ai_profiles\`)
  - Updated RLS policies to use \`channels.super_agent_id\` for proper clustering
  - Fixed foreign key constraints and relationships
- Bug Fixes
  - Fixed page reload issues when alt+tabbing between browser tabs
  - Resolved conversation data leakage between different super agents
  - Fixed AI Agent dropdown filtering logic
  - Corrected thread timestamp display in conversation list

# [0.0.27] FE WEB CEKAT 2025-10-03
- Enabling AI Profiles fetch instead of using cache 

# [0.0.26] FE WEB CEKAT 2025-10-03
Commit: Live Chat realtime + anon policies, auto-resolve with enable flag, reopen on user reply, UI polish
### Updates
- Live Chat (Embed)
  - Messages now stream from Supabase realtime (\`public.messages\`); webhook response is ignored for content.
  - Sends \`channel_id\`, \`session_id\`, and a persistent friendly \`username\` (stored per host in localStorage). Removed \`platform_id\` from payload.
  - Ringtones wired to \`public/tones\` assets; low = \`mixkit-message-pop-alert-2354.mp3\`, high = \`mixkit-long-pop-2358.wav\`.
  - Thread lookup uses \`contacts(name)\` with \`maybeSingle()\` (fixes PGRST116 when 0 rows).
- Database (Supabase)
  - Added anon SELECT RLS for web embed:
    - \`channels\`: \`allow_public_select_web_channels\` (provider='web' and active only).
    - \`threads\`: \`public_read_web_threads\` (via web channels).
    - \`messages\`: \`public_read_web_messages\` (via web channels).
    - Fixes 401/42501 when opening standalone live chat.
  - Auto-resolve framework:
    - \`ai_profiles.auto_resolve_after_minutes\` (int) and \`enable_resolve\` (bool).
    - \`threads.auto_resolve_at\` scheduled by trigger \`set_thread_auto_resolve_after_message\` on agent/assistant replies; cleared on user replies.
    - Function \`auto_close_due_threads()\` (cron-friendly) and helper \`schedule_auto_resolve_for_open_threads()\` for backfill.
  - Auto-reopen: trigger \`reopen_thread_on_user_message\` reopens closed threads and unassigns when a new user message arrives.
- AI Agent Settings
  - Enable Auto-resolve switch added; Auto-resolve after (minutes) is disabled when switch is off.
  - Removed sending \`system_prompt\` to webhook; UI still saves prompt to profile.
- Conversations UI
  - Unreplied badge restyled (soft red background, darker red text) to match Assigned styling.

# [0.0.25] FE WEB CEKAT 2025-10-02
Commit: Human vs AI handover analytics, WAHA sessions fetch, realtime chats, Platforms loop fix, UI polish
### Updates
- Analytics (Human Agent)
  - Handover rate redefined as Human/(Human+AI) across all conversations (not only resolved).
  - Added breakdowns: by Super Agent and by Agent, with Super Agent filter.
- Database (Supabase)
  - New/updated RPCs: \`get_handover_by_super_agent\`, \`get_handover_by_agent\`, \`get_agent_kpis\`.
  - Enabled realtime by adding \`public.threads\` and \`public.messages\` to \`supabase_realtime\`.
- Platforms (WhatsApp)
  - Fetch sessions from WAHA (\`/api/sessions\` and \`/api/sessions/{name}\`); removed dependency on webhook \`/get_sessions\` calls in UI.
  - Filter sessions to selected channel; debounced refresh; fixed infinite refresh loop on Platforms page.
  - QR polling uses WAHA session endpoint; Disconnect/Delete refresh safely.
- Conversations
  - Live-updating conversation list and counts via realtime subscriptions to \`threads\` and \`messages\` (debounced).
- UI
  - Delete Channel button shows spinner + Deleting and subtle pulse while processing.
- Changelog
  - Source from root \`CHANGELOG.md\` only; removed \`public/CHANGELOG.md\`; scripts updated to skip copy.

# [0.0.24] FE WEB CEKAT 2025-09-30
### Updates
- Enhance message handling in ConversationPage and useConversations hooks.
- Optimistic UI updates for message status

# [0.0.23] FE WEB CEKAT 2025-10-02
### Updates
- Live Chat
  - New embedded-only chat page at \`/livechat/:platform_id\` with blue-white palette, gradient background, glassy card, and clearer borders.
  - Sound notifications: low note on send, high note on AI reply; ringtone-style sequences; support external audio and synthesized chimes.
  - Netlify SPA routing for \`/livechat/*\` via redirects in \`netlify.toml\` and \`public/_redirects\`.

- Connected Platforms
  - Live chat link and embed now use \`https://classy-frangollo-337599.netlify.app/livechat/{platform_id}\`.
  - Added Super Agent section (single-select; master-only). Human Agents now a searchable multi-select of regular agents only.
  - Removed Teams card. Agent chips show proper names and can be removed.

- Platform Forms (Web, WhatsApp, Telegram)
  - Enforce Super Agent selection; filter AI/Human Agents by the selected Super Agent.
  - Fixed Telegram \`useEffect\` import error; safer webhook response handling.
  - Only selected human agents are attached on create.

- Hooks and data
  - \`usePlatforms\`: join \`channel_agents\`; insert/remove on create/update; read/update \`channels.credentials.super_agent_id\`.
  - \`useAIAgents\`/\`LiveChat\`: dropped non-existent \`model\`; filter by \`super_agent_id\`.
  - \`useHumanAgents\`: include \`super_agent_id\` via \`super_agent_members\`.

- Human Agents page
  - Clustering UI to manage Super Agents  Agents & AI Agents; token totals by cluster.

- Database (Supabase)
  - New \`super_agent_members\` table (RLS) and \`ai_profiles.super_agent_id\` (NOT NULL).
  - Added \`users_profile.used_tokens\` plus \`refresh_used_tokens_for_super_agents\` function and trigger to aggregate token usage per super agent.
  - Deployed and backfilled via Supabase MCP; membership mappings added where needed.

- Fixes
  - Resolved SPA 404s for \`/livechat/*\`.
  - Fixed \`users_profile.email\` and \`ai_profiles.model\` 42703 errors.
  - Ensured agent removal updates \`channel_agents\` and access.

# [0.0.22] FE WEB CEKAT 2025-09-30
### Updates
- Fix platform creating for telegram
- Add saving functionality for selected AI agent in ConnectedPlatforms and prevent duplicate Telegram bot tokens in TelegramPlatform Form
- Enhance AI Agent Settings: Implement file upload functionality with Supabase integration, including upload progress tracking and error handling. Update UI to reflect file statuses and permissions. Add new knowledgebase endpoints for file management.
- Enhance file upload process in AIAgentSettings: pre-compute content hash for stable key, include additional metadata (storageName, storageSize, storageUpdatedAt) in upload response, and improve file validation checks.

# [0.0.21] FE WEB CEKAT 2025-09-30
### Updates
- Update CHANGELOG and enhance Analytics and HumanAgents components. 
- Added token usage tracking in Analytics with visualizations for daily usage and top models. 
- Improved token aggregation logic in HumanAgents to account for super-agent clusters.

# [0.0.20] FE WEB CEKAT 2025-09-30
### Updates
- Platform agent assignment
  - Persist selected agents on create to \`channel_agents\`; updates replace assignments.
  - Agents now only see platforms theyre assigned to; master/super see all.
  - Platforms list shows only attached human agents (no more org-wide members).

- Platform details UI
  - New Super Agent section: shows assigned super agent; single-select; editable by master agents only; stored in \`channels.credentials.super_agent_id\`.
  - Human Agent manager: chips with remove (X) + searchable multi-select to add; lists only regular agents (excludes super/master).
  - Removed unused Teams card; unified details behavior across providers.

- Telegram platform creation
  - Hits \`POST /telegram/create-platform\` (CREATE_PLATFORM) before channel insert.
  - Sends \`brand_name, display_name, description, telegram_bot_token, ai_profile_id, human_agent_ids, org_id\`.
  - Robust response handling for empty/non-JSON bodies; emits refresh after success.

- Data fetching and names
  - Human agent names prefer \`users_profile.display_name\` with fallback to \`v_users.display_name\`; email sourced from \`v_users\`.
  - Fixed error when \`users_profile.email\` was selected (column doesnt exist).

- Components
  - Added \`ui/multi-select\` (popover + search + checkbox) for multi-add of agents.

- Fixes
  - Agent chips now display the correct agent name (not internal IDs).
  - Only the agents selected during platform creation are attached (no more all agents issue).
  - Resolved Telegram JSON parse errors and \`42703 users_profile.email\` error.

# [0.0.19] FE WEB CEKAT 2025-09-23
### Updates
- Automatically switch to the Resolved tab when only closed conversations are present
- Updated Resolved tab UI to display the count of closed conversations.

# [0.0.18] FE WEB CEKAT 2025-09-20
### Updates
- Added provider tabs (WhatsApp, Telegram, Live Chat) to filter the list; auto-select first item in active tab
- Replaced black status dot with green (active) / gray (inactive) indicator

# [0.0.17] FE WEB CEKAT 2025-09-20
### Updates
- Scope data fetching and realtime to visible pages and active routes (Conversations, Human Agents, Platforms, Contacts, AI Agents, RBAC, Analytics)
- Add tab-visibility guards to avoid background fetch on tab-restore; hydrate from cache first where applicable
- Standardize React Query defaults (staleTime=60s, gc=5m, disable refetch on focus/reconnect)
- Reduce audit log verbosity: ignore refresh/update events; add 3s debounce in \`logAction\`; include current route in log context
- Analytics
  - Default to last 30 days and align to full-day UTC boundaries
  - Prevent invalid date ranges (From  To; To  From) with input min/max and clamping
  - Fetch once per change; removed duplicate initial fetch
- UI consistency: set Telegram Platform create button to blue
- Utilities: add \`isDocumentHidden\` and \`onDocumentVisible\` helpers

# [0.0.16] FE WEB CEKAT 2025-09-19
### Updates
- Enhance real-time synchronization for conversations and messages; always fetch fresh data on mount

# [0.0.15] FE WEB CEKAT 2025-09-19
### Updates
- Auth/OTP: eliminate redirect flicker by gating on \`otpEvaluated\`; \`ProtectedRoute\` and \`Otp\` now wait for evaluation; \`ResetPassword\` handles magic-link \`?code=\` with \`exchangeCodeForSession\`.
- Changelog page: render Markdown (react-markdown + GFM), Tailwind Typography, compact heading sizes; added Netlify \`public/_redirects\`; added \`prebuild\`/\`predev\` to copy root \`CHANGELOG.md\` to \`public/\`.
- Build: remove top-level await in \`main.tsx\` (wrap in async IIFE).
- Analytics (global): add graceful fallback when \`get_containment_and_handover\` is missing; improved handover reason labels; added per-user analytics (Assigned To, Takeovers Initiated, Resolved By, AIAgent Handovers).
- Human Agents:
  - Create Agent dialog with loader; 2FA enable checkbox on create; colored CTAs.
  - Add confirmation dialog with loader for deletion; wire hard delete.
  - Status changed to Active/Inactive; add \`users_profile.is_active\` column and update UI/actions.
  - Edit dialog shows Require Email 2FA switch and token limits; loads/saves \`is_2fa_email_enabled\`.
  - Role badges and submenu restyled (blue/green/gray).
- Edge Functions: \`admin-create-user\` (invite + profile + role, CORS) and \`admin-delete-user\` (hard delete auth user and related rows).
- Logging: \`logAction\` falls back to default org when \`org_id\` cannot be resolved (fixes audit log NOT NULL).
- UI theming: replaced remaining dark/black buttons with blue/green/red where appropriate.

# [0.0.14] FE WEB CEKAT 2025-09-19
### Updates
- Fix changelog is not accessible in staging

# [0.0.13] FE WEB CEKAT 2025-09-19
### Updates
- Implement OTP flow for login and enhance ProtectedRoute for OTP verification. 
- Added new Otp and Logout pages
- Updated AuthContext to manage OTP state 
- Modified Login component to handle OTP requirements.

# [0.0.12] FE WEB CEKAT 2025-09-18
### Updates
- Enhance authentication flow with local storage caching and session restoration
- Implemented local storage caching for AI agents and conversations to improve performance and reduce flicker on refresh.
- Added session restoration from local storage to ensure user authentication state is maintained across page reloads.
- Updated AuthContext to prioritize local storage for session data before reconciling with Supabase.
- Introduced a loading state management to handle UI updates more smoothly during data fetching.

# [0.0.11] FE WEB CEKAT 2025-09-17
### Updates
- Audit Logs self-read policy for non-master users.
- Added \`get_audit_logs\` RPC with server-side filters, paging, and master-only org-wide access.
- Analytics foundations: date-range controls and labeled charts; wired to secure RPCs.
- KPI RPCs: \`get_chats_timeseries\` and \`get_response_time_stats\` (avg/median/p90) with Asia/Jakarta bucketing.
- RBAC and conversation label changes now emit audit log entries.
- Analytics UI now uses new KPI RPCs with channel filter, time-series, and labeled bars.
- Containment/Handover groundwork: added \`threads.resolution\`, \`end_reason\`, \`handover_reason\`, AI auto-resolution trigger.
- Analytics RPCs: \`get_containment\` (with previous period) and \`get_handover_stats\` (reason breakdown).
- Server-side validation: handover reason now required when handover happens; added helpful indexes for analytics.
- Added \`get_non_contained\` RPC for drilldown of non-contained conversations.
- Containment/Handover dashboard cards with drilldown and reason pie chart.
- RBAC policy engine scaffold: \`rbac_policies\` table, RPCs (\`get_role_policy\`, \`put_role_policy\`, \`apply_role_policy\`), extended \`has_perm\` to honor policies.
- Role Policy editor UI (matrix) to manage per-resource actions; policy changes logged.
- Added docs/ANALYTICS_AND_LOGS.md covering RPCs, validation, and telemetry.
- Added PII sanitization tests for log CSV export.
- Added analytics time-series, containment, handover, and RBAC policy tests; basic E2E seed.
- TODO roadmap (server-validated) added for Analytics KPIs, Containment/Handover, RBAC policies, indexes, docs, and tests.
- implement OTP flow in login
- enhance ProtectedRoute for OTP verification

# [0.0.10] FE WEB CEKAT 2025-09-16
### Updates
- fix: remove duplicate import of useRBAC in ConversationPage component

# [0.0.9] FE WEB CEKAT 2025-09-16
### Updates
- Created loggings for every users, and only admin can access.
- Made Role Management for admins to setting the role.

# [0.0.8] FE WEB CEKAT 2025-09-14
### Updates
- Replaced thread participants with collaborators in the database schema.
- Implemented checks for user collaboration status on conversations.
- Enhanced thread assignment logic to ensure proper user assignment and audit fields.
- Updated UI elements for chat takeover functionality to reflect new collaborator roles.

# [0.0.7] FE WEB CEKAT 2025-09-13
### Updates
- Removed static permission constants in favor of direct string references for better alignment with database values.
- Updated components to utilize new permission string format, enhancing consistency across the application.
- Improved navigation logic to enforce permission checks when syncing active tabs, ensuring users only access permitted items.
- Streamlined permission-related code in various components, enhancing maintainability and readability.

# [0.0.6] FE WEB CEKAT 2025-09-03
### Updates
- Implement OpenAI usage tracking and enhance analytics component
- Added OpenAI API key configuration to .env for usage tracking.
- Refactored vite.config.ts to include a usage proxy plugin for fetching OpenAI usage data.
- Enhanced Analytics component to display OpenAI token usage with dynamic date range selection and improved UI elements.
- Integrated charts to visualize input, output, and total tokens over selected time ranges.
- Implemented error handling and loading states for better user experience during data fetching.

# [0.0.5] FE WEB CEKAT 2025-09-03
### Updates
- Updated PermissionNavItem and NavigationItem interfaces to use string arrays for permissions instead of PermissionName type for better flexibility.
- Modified NAVIGATION_CONFIG to replace permission constants with string representations for improved readability and consistency.
- Enhanced RBACProvider's hasPermission function to support various permission formats, including direct matches and synonyms for better user experience.
- Integrated a new PermissionsPage component into the main Index page, ensuring proper permission checks with PermissionGate.


# [0.0.4] FE WEB CEKAT 2025-09-03
### Updates
- Integrate RBAC and enhance agent management features
- Added RBACProvider to App component for role-based access control.
- Updated HumanAgents component to utilize PermissionGate for role management and agent creation.
- Refactored agent role handling to support new roles: master_agent and super_agent.
- Enhanced ConversationPage to display channel provider information for better context.
- Improved useHumanAgents hook to fetch agents from the new v_users view, streamlining data retrieval and role assignment.

# [0.0.3] FE WEB CEKAT 2025-09-03
### Updates
- Implement WhatsApp session polling and enhance deletion handling
- Added polling mechanism to check WhatsApp session status while the QR modal is open, improving user feedback on connection status.
- Introduced loading state management for channel deletion actions to prevent multiple submissions and enhance user experience.
- Removed phone number input from WhatsAppPlatformForm as per updated requirements, streamlining the form submission process.

# [0.0.2] FE WEB CEKAT 2025-09-01
### Updates
- Deleted AUTHENTICATION_SETUP.md, CHAT_SETUP.md, HUMAN_AGENTS_SETUP.md, sample_data.sql, and simple_sample_data.sql as they are no longer relevant to the current project structure.
- Updated package.json version to 0.0.1 and removed unnecessary dev dependencies from package-lock.json.
- Enhanced Login component to display the current version of the application.
- Enhanced Whatsapp channel connecting flow and validation

# [0.0.1] FE WEB CEKAT 2025-09-01
### Updates
- Enhance ClientEditProfileForm: Make company industry selection read-only for non-admin users`,BM=["from-sky-400/60 via-cyan-400/20 to-transparent border-sky-500/40","from-fuchsia-400/60 via-purple-500/20 to-transparent border-fuchsia-500/30","from-emerald-400/60 via-lime-400/20 to-transparent border-emerald-500/30","from-amber-400/60 via-orange-400/20 to-transparent border-amber-500/30","from-indigo-400/60 via-violet-500/20 to-transparent border-indigo-500/30","from-rose-400/60 via-pink-500/20 to-transparent border-rose-500/30"];function UM(e){return e.split(`
`).map(t=>t.trim()).filter(t=>/^-\s*\*\*/.test(t)).map(t=>{const n=t.match(/^-\s*\*\*(.+?)\*\*:?\s*(.*)$/);if(!n)return t.replace(/^-+\s*/,"");const[,r,a]=n;return a?`${r.trim()}  ${a.trim()}`:r.trim()})}function c9(e){var a,s;const t=e.replace(/\r/g,"").trim();if(!t)return[];const n=t.split(/\n(?=# \[)/g).map(o=>o.trim()).filter(Boolean),r=[];for(const o of n){if(o.startsWith("# Change Log")){const x=o.replace(/^# Change Log\s*/,"").trim();if(!x)continue;const y=c9(x);r.push(...y);continue}const l=o.match(/^# \[(?<version>[^\]]+)\](?<title>.*?)(?:\n|$)/);if(!(l!=null&&l.groups))continue;const c=(a=l.groups.version)==null?void 0:a.trim();if(!c)continue;const u=((s=l.groups.title)==null?void 0:s.trim())??"";let f=u||void 0,d;if(u){const x=u.match(/(\d{4}-\d{2}-\d{2})/);x&&(d=x[1],f=u.replace(x[1],"").trim()||void 0)}const h=o.slice(l[0].length).trim(),m=h?h.split(/\n(?=### )/g).map(x=>x.trim()).filter(Boolean):[],g=m.length?m.map((x,y)=>{const[b,...w]=x.split(`
`),j=b.replace(/^###\s*/,"").trim()||`Section ${y+1}`,k=w.join(`
`).trim();return{heading:j,body:k,highlights:UM(k)}}):h?[{heading:"Updates",body:h,highlights:UM(h)}]:[],v=g.flatMap(x=>x.highlights).filter(Boolean).slice(0,5);r.push({version:c,label:f,date:d,sections:g,summary:v,raw:h})}return r}const zFe={p:({children:e})=>i.jsx("p",{className:"text-sm leading-relaxed text-slate-200",children:e}),ul:({children:e})=>i.jsx("ul",{className:"space-y-2 text-sm text-slate-200",children:e}),li:({children:e})=>i.jsxs("li",{className:"relative pl-6",children:[i.jsx("span",{className:"absolute left-0 top-2 h-2 w-2 rounded-full bg-gradient-to-r from-sky-400 to-blue-500 shadow-[0_0_12px_rgba(56,189,248,0.6)]"}),i.jsx("div",{className:"space-y-1",children:e})]}),strong:({children:e})=>i.jsx("span",{className:"font-semibold text-sky-200",children:e}),code:({children:e})=>i.jsx("code",{className:"rounded-md bg-slate-900/80 px-1.5 py-0.5 text-xs text-sky-200",children:e}),a:({children:e,href:t})=>i.jsx("a",{href:t,className:"text-sky-300 underline decoration-dotted underline-offset-4 transition hover:text-sky-200",target:"_blank",rel:"noreferrer",children:e})};function qFe(){var f;const e=p.useMemo(()=>c9(FM),[]),[t,n]=p.useState(""),[r,a]=p.useState("interactive"),[s,o]=p.useState(((f=e[0])==null?void 0:f.version)??""),l=t.trim().toLowerCase(),c=p.useMemo(()=>l?e.filter(d=>[d.version,d.label??"",d.date??"",d.raw,...d.sections.map(m=>m.heading),...d.sections.map(m=>m.body)].join(" ").toLowerCase().includes(l)?!0:d.sections.some(m=>m.highlights.some(g=>g.toLowerCase().includes(l)))):e,[e,l]);p.useEffect(()=>{var h;if(!c.length){o("");return}c.some(m=>m.version===s)||o(((h=c[0])==null?void 0:h.version)??"")},[c,s]);const u=c.find(d=>d.version===s)||c[0];return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-10 text-foreground",children:i.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-6",children:[i.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[i.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-white md:text-4xl",children:"Release Notes & Progress Journal"}),i.jsx("p",{className:"mx-auto max-w-2xl text-sm text-slate-300 md:text-base",children:"Explore every release with rich summaries, vivid highlights, and interactive sections. Filter by keyword, skim highlights, or dive deep into the full notes."})]}),i.jsxs(pl,{value:r,onValueChange:d=>a(d),className:"w-full",children:[i.jsxs(so,{className:"mx-auto grid w-full max-w-xs grid-cols-2 bg-slate-900/60 p-1 shadow-inner shadow-slate-800/40",children:[i.jsx(Gn,{value:"interactive",className:"data-[state=active]:bg-sky-500/20 data-[state=active]:text-sky-100",children:"Interactive"}),i.jsx(Gn,{value:"markdown",className:"data-[state=active]:bg-slate-700/40 data-[state=active]:text-slate-100",children:"Classic"})]}),i.jsx(Dn,{value:"interactive",className:"mt-6",children:i.jsxs("div",{className:"grid gap-6 lg:grid-cols-[320px_1fr]",children:[i.jsxs(Ae,{className:"border border-white/10 bg-slate-950/60 shadow-[0_12px_40px_-24px_rgba(56,189,248,0.65)] backdrop-blur",children:[i.jsxs(tt,{className:"space-y-4",children:[i.jsxs(Qe,{className:"flex items-center gap-2 text-lg text-white",children:[i.jsx(mP,{className:"h-4 w-4 text-sky-300"}),"Releases"]}),i.jsx(ui,{className:"text-xs text-slate-300",children:"Search and choose any release to explore tailored highlights and details. Recent entries glow brighter."}),i.jsxs("div",{className:"relative",children:[i.jsx(fs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),i.jsx(Ve,{placeholder:"Search versions, features, or dates...",value:t,onChange:d=>n(d.target.value),className:"bg-slate-900/70 pl-9 text-sm text-slate-100 placeholder:text-slate-400 focus-visible:ring-sky-400"})]})]}),i.jsx(Je,{className:"p-0",children:i.jsx(lb,{className:"h-[540px]",children:i.jsxs("div",{className:"flex flex-col divide-y divide-white/5",children:[c.length===0&&i.jsx("div",{className:"p-6 text-center text-sm text-slate-400",children:"No release notes match your search. Try another term."}),c.map((d,h)=>{const m=d.version===(u==null?void 0:u.version);return i.jsx("button",{onClick:()=>o(d.version),className:ye("group relative flex w-full flex-col items-start gap-3 px-5 py-4 text-left transition",m?"bg-sky-500/15":"hover:bg-slate-900/70"),children:i.jsxs("div",{className:"flex w-full items-start gap-3",children:[i.jsx("span",{className:ye("mt-2 h-2.5 w-2.5 rounded-full bg-sky-400 shadow-[0_0_12px_rgba(56,189,248,0.7)] transition-transform",m&&"scale-125")}),i.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("span",{className:"text-sm font-semibold text-slate-100",children:["v",d.version]}),d.label&&i.jsx(Ot,{variant:"outline",className:"border-slate-500/50 bg-slate-900/60 px-2 py-0 text-[10px] font-medium uppercase tracking-wide text-slate-300",children:d.label}),d.date&&i.jsxs("span",{className:"flex items-center gap-1 text-[11px] uppercase tracking-wide text-slate-400",children:[i.jsx(cP,{className:"h-3 w-3 text-slate-400"}),d.date]})]}),d.summary.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:d.summary.slice(0,3).map(g=>i.jsx(Ot,{variant:"secondary",className:"max-w-full truncate bg-sky-500/15 text-[10px] font-medium text-sky-100",title:g,children:g},g))})]})]})},d.version)})]})})})]}),i.jsx("div",{className:"space-y-6",children:u?i.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-white/10 bg-slate-950/70 p-1 shadow-[0_45px_90px_-60px_rgba(56,189,248,0.8)] backdrop-blur",children:[i.jsx("div",{className:"absolute -left-32 -top-32 h-64 w-64 rounded-full bg-sky-500/20 blur-3xl"}),i.jsx("div",{className:"absolute -bottom-24 -right-24 h-64 w-64 rounded-full bg-fuchsia-500/10 blur-3xl"}),i.jsxs("div",{className:"relative z-10 rounded-[calc(theme(borderRadius.3xl))] border border-white/10 bg-slate-950/80 px-8 py-8",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsxs(Ot,{className:"bg-sky-500/30 text-sky-50",children:["Version ",u.version]}),u.label&&i.jsx("h2",{className:"text-xl font-semibold text-white md:text-2xl",children:u.label}),u.date&&i.jsxs("span",{className:"flex items-center gap-1 text-sm text-slate-300",children:[i.jsx(cP,{className:"h-4 w-4 text-sky-300"}),u.date]})]}),u.summary.length>0&&i.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:u.summary.map(d=>i.jsxs(Ot,{variant:"outline",className:"gap-1 border-sky-400/40 bg-sky-500/15 px-3 py-1 text-[11px] font-medium text-sky-100",title:d,children:[i.jsx(mP,{className:"h-3 w-3 text-sky-200"}),i.jsx("span",{className:"max-w-[220px] truncate",children:d})]},d))}),i.jsx("div",{className:"mt-8 space-y-4",children:i.jsxs(UFe,{type:"multiple",defaultValue:u.sections.map((d,h)=>`section-${h}`),className:"space-y-4",children:[u.sections.map((d,h)=>{const m=BM[h%BM.length];return i.jsxs(s9,{value:`section-${h}`,className:ye("border border-white/5","rounded-2xl bg-slate-950/60 shadow-[0_24px_60px_-35px_rgba(56,189,248,0.55)]"),children:[i.jsxs(o9,{className:"px-6 py-5 text-left hover:no-underline data-[state=open]:bg-slate-900/60",children:[i.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:ye("h-2.5 w-2.5 rounded-full bg-gradient-to-r shadow-[0_0_12px_rgba(56,189,248,0.6)]",m)}),i.jsx("span",{className:"text-base font-semibold text-white md:text-lg",children:d.heading})]}),d.highlights.length>0&&i.jsx("p",{className:"text-xs text-slate-300 md:text-sm",children:d.highlights[0]})]}),i.jsx(hP,{className:"h-4 w-4 text-sky-300"})]}),i.jsx(l9,{className:"px-6 pb-6",children:i.jsxs("div",{className:ye("relative overflow-hidden rounded-xl border border-white/5 bg-slate-950/80 px-5 py-5","shadow-[inset_0_0_40px_-25px_rgba(56,189,248,0.75)]"),children:[i.jsx("div",{className:ye("pointer-events-none absolute inset-0 bg-gradient-to-br opacity-40",m)}),i.jsx(PM,{remarkPlugins:[LM],components:zFe,className:"relative z-10 space-y-3",children:d.body})]})})]},d.heading+h)}),u.sections.length===0&&i.jsx("p",{className:"text-sm text-slate-300",children:"No detailed sections were found for this release. Check the classic view for raw notes."})]},u.version)})]})]}):i.jsxs(Ae,{className:"border border-white/10 bg-slate-950/60 p-12 text-center text-slate-300",children:[i.jsx(Qe,{className:"text-xl text-white",children:"No entries available"}),i.jsx(ui,{className:"mt-2 text-sm text-slate-300",children:"Try clearing the search filter to view release notes."})]})})]})}),i.jsx(Dn,{value:"markdown",className:"mt-6",children:i.jsxs(Ae,{className:"border border-white/10 bg-slate-950/70 shadow-[0_30px_80px_-60px_rgba(15,23,42,0.95)]",children:[i.jsxs(tt,{children:[i.jsxs(Qe,{className:"flex items-center gap-2 text-white",children:[i.jsx(hP,{className:"h-5 w-5 text-sky-300"}),"Full Markdown"]}),i.jsx(ui,{className:"text-xs text-slate-300",children:"Prefer the traditional view? Browse the original changelog with full Markdown formatting."})]}),i.jsx(Je,{children:i.jsx("article",{className:"prose prose-sm max-w-none text-slate-200 dark:prose-invert prose-headings:text-white prose-a:text-sky-300 prose-strong:text-sky-200",children:i.jsx(PM,{remarkPlugins:[LM],children:FM})})})]})})]})]})})}function zM(){const{platform_id:e,platformId:t}=eJ(),n=p.useMemo(()=>e||t||"unknown",[e,t]),[r,a]=p.useState([]),[s,o]=p.useState(""),[l,c]=p.useState(!1),[u,f]=p.useState(!0),[d,h]=p.useState("session_"+Date.now()),[m,g]=p.useState(null),[v,x]=p.useState(""),[y,b]=p.useState(null),[w,j]=p.useState(null),k=p.useRef(null),_=p.useRef(null),S=p.useRef(null),A=p.useRef(null),N="/tones/mixkit-message-pop-alert-2354.mp3",T="/tones/mixkit-long-pop-2358.wav",I=()=>{const C=window.AudioContext||window.webkitAudioContext;return _.current=_.current??new C,_.current},F=(C,U,D,P,H=.05,G="sine")=>{const Y=C.createOscillator(),W=C.createGain();Y.type=G,Y.frequency.value=D,W.gain.value=1e-4,Y.connect(W),W.connect(C.destination);const ee=U+P/1e3;W.gain.setValueAtTime(1e-4,U),W.gain.exponentialRampToValueAtTime(H,U+.02),W.gain.setValueAtTime(H,Math.max(U+.02,ee-.05)),W.gain.exponentialRampToValueAtTime(1e-4,ee),Y.start(U),Y.stop(ee)},E=(C,U=110,D=.06)=>{try{const P=I(),H=P.currentTime+.01;C.forEach((G,Y)=>{const W=H+Y*U/1e3,ee=U*.9;Array.isArray(G)?G.forEach(X=>F(P,W,X,ee,D,"sine")):F(P,W,G,ee,D,"triangle")})}catch{}},O=async C=>{var U,D;try{const H=(C==="low"?(U=window.chatConfig)==null?void 0:U.sendToneUrl:(D=window.chatConfig)==null?void 0:D.replyToneUrl)||(C==="low"?N:T),G=C==="low"?S.current??(S.current=new Audio(H)):A.current??(A.current=new Audio(H));return G.src!==H&&(G.src=H),G.currentTime=0,G.volume=C==="low"?.35:.45,await G.play(),!0}catch{return!1}},M=async()=>{await O("low")||E([493.88,523.25,493.88,523.25],110,.045)},B=async()=>{await O("high")||E([1046.5,1318.5,1568,[1046.5,1318.5,1568,2093]],120,.06)};p.useEffect(()=>{try{const C=typeof window<"u"?window.location.host:"unknown",U=`livechat_username_${n}_${C}`;let D="";try{D=localStorage.getItem(U)||""}catch{}if(!D){const P=["Happy","Bright","Calm","Brave","Kind","Sunny","Lucky","Cheerful","Swift","Clever"],H=["User","Visitor","Friend","Guest","Buddy","Pal","Explorer","Champion","Star","Hero"],G=P[Math.floor(Math.random()*P.length)],Y=H[Math.floor(Math.random()*H.length)],W=Math.floor(100+Math.random()*900);D=`${G} ${Y} ${W}`;try{localStorage.setItem(U,D)}catch{}}x(D)}catch{}},[n]),p.useEffect(()=>{var C;(C=k.current)==null||C.scrollIntoView({behavior:"smooth"})},[r.length]),p.useEffect(()=>{(async()=>{try{const{data:U,error:D}=await ne.from("channels").select("count").limit(1);D&&console.error("Supabase connection error:",D)}catch(U){console.error("Supabase connection test failed:",U)}})()},[]),p.useEffect(()=>()=>{w&&j(null)},[w]),p.useEffect(()=>{if(!m)return;const U=setInterval(async()=>{try{const{data:D}=await ne.from("messages").select("id, role, body, created_at").eq("thread_id",m).order("created_at",{ascending:!0});Array.isArray(D)&&a(P=>{const H=new Map;P.forEach(Y=>H.set(Y.id,Y));for(const Y of D){if(!(Y!=null&&Y.id))continue;const W=Y.role==="agent"||Y.role==="assistant"?"assistant":"user";if(W==="user")continue;const ee={id:Y.id,role:W,body:Y.body||"",at:Y.created_at||new Date().toISOString()};H.set(ee.id,ee)}const G=Array.from(H.values());return G.sort((Y,W)=>new Date(Y.at).getTime()-new Date(W.at).getTime()),G})}catch(D){console.error("Error refreshing messages:",D)}},2e3);return()=>clearInterval(U)},[m]),p.useEffect(()=>{n&&n!=="unknown"&&(async()=>{try{const{data:U,error:D}=await ne.from("channels").select("ai_profile_id").eq("id",n).maybeSingle();!D&&(U!=null&&U.ai_profile_id)&&b(U.ai_profile_id)}catch(U){console.error("Error fetching AI profile ID:",U)}})()},[n]),p.useEffect(()=>{let C=null,U=null;const D=G=>{!G||G.length===0||a(Y=>{const W=new Map;Y.forEach(X=>W.set(X.id,X));for(const X of G){if(!(X!=null&&X.id))continue;const ae=X.role==="agent"||X.role==="assistant"?"assistant":"user",re={id:X.id,role:ae,body:X.body||"",at:X.created_at||new Date().toISOString()};if(ae==="user"){for(const[J,ve]of W.entries())if(ve.id.startsWith("temp-")&&ve.role==="user"&&ve.body===X.body&&Math.abs(new Date(ve.at).getTime()-new Date(X.created_at).getTime())<1e4){W.delete(J);break}}if(ae==="assistant"&&w){for(const[J,ve]of W.entries())if(ve.id===w){W.delete(J);break}}W.has(re.id)||W.set(re.id,re)}const ee=Array.from(W.values());return ee.sort((X,ae)=>new Date(X.at).getTime()-new Date(ae.at).getTime()),ee})},P=async G=>{g(G);try{const{data:Y}=await ne.from("messages").select("id, role, body, created_at").eq("thread_id",G).order("created_at",{ascending:!0});Array.isArray(Y)&&D(Y)}catch{}C=ne.channel(`livechat-msgs-${G}`).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`thread_id=eq.${G}`},Y=>{const W=Y==null?void 0:Y.eventType,ee=(Y==null?void 0:Y.new)||(Y==null?void 0:Y.old);ee&&(ee==null?void 0:ee.role)!=="user"&&(((ee==null?void 0:ee.role)==="agent"||(ee==null?void 0:ee.role)==="assistant")&&D([ee]),W==="INSERT"&&(ee==null?void 0:ee.role)==="agent"&&w&&j(null))}).subscribe(),f(!1)};return(async()=>{try{const{data:G}=await ne.from("threads").select("id, contact_id, contacts(name)").eq("channel_id",n).eq("contacts.name",v).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(G!=null&&G.id){await P(G.id);return}}catch{}U=ne.channel(`livechat-threads-${n}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"threads",filter:`channel_id=eq.${n}`},async G=>{var ee,X;const Y=(ee=G==null?void 0:G.new)==null?void 0:ee.id,W=(X=G==null?void 0:G.new)==null?void 0:X.contact_id;if(!(!Y||!W))try{const{data:ae}=await ne.from("contacts").select("id, name").eq("id",W).maybeSingle();ae!=null&&ae.name&&v&&ae.name===v&&await P(Y)}catch{}}).subscribe(()=>f(!1))})(),()=>{try{C&&ne.removeChannel(C)}catch{}try{U&&ne.removeChannel(U)}catch{}}},[n,v]);const R=async()=>{const C=s.trim();if(!C)return;if(m)try{const{checkAIMessageLimit:G,autoAssignToSuperAgent:Y}=await Ys(async()=>{const{checkAIMessageLimit:ee,autoAssignToSuperAgent:X}=await import("./aiMessageLimit-CzT5SAWG.js");return{checkAIMessageLimit:ee,autoAssignToSuperAgent:X}},[]),W=await G(ne,m);if(W.isExceeded&&W.superAgentId){if((await Y(ne,m,W.superAgentId)).success){const{toast:X}=await Ys(async()=>{const{toast:ae}=await Promise.resolve().then(()=>wP);return{toast:ae}},void 0);X.error(`Batas pesan AI telah tercapai (${W.currentCount}/${W.limit}). Percakapan telah dialihkan ke super agent.`);return}}else if(W.isExceeded&&!W.superAgentId){const{toast:ee}=await Ys(async()=>{const{toast:X}=await Promise.resolve().then(()=>wP);return{toast:X}},void 0);ee.error(`Batas pesan AI telah tercapai (${W.currentCount}/${W.limit}). Tidak ada super agent yang tersedia untuk penanganan.`);return}}catch(G){console.error("Error checking AI message limit:",G)}o("");const U=`temp-${Date.now()}`;a(G=>[...G,{id:U,role:"user",body:C,at:new Date().toISOString()}]),M(),c(!0);const D=setTimeout(()=>{a(G=>(G.findIndex(W=>W.id===U)>=0,G))},3e3),P=`streaming-${Date.now()}`;j(P);const H=setTimeout(()=>{w===P&&(j(null),a(G=>G.map(Y=>Y.id===P?{...Y,streaming:!1,body:Y.body||"Waiting for response..."}:Y)))},1e4);try{const G={message:C,session_id:d,timestamp:new Date().toISOString(),channel_id:n,username:v||void 0,ai_profile_id:y,stream:!0};let Y=!1;try{const{data:{session:ee}}=await ne.auth.getSession();Y=!ee}catch{Y=!0}const W=await wa(Yn.ENDPOINTS.AI_AGENT.CHAT_SETTINGS,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)},{forceLegacy:Y});if(!W.ok)throw new Error(`Webhook failed ${W.status}`);if(W.body){const ee=W.body.getReader(),X=new TextDecoder;let ae="";try{for(;;){const{done:re,value:J}=await ee.read();if(re)break;ae+=X.decode(J,{stream:!0});const ve=ae.split(`
`);ae=ve.pop()||"";for(const z of ve)if(z.trim()!=="")try{if(z.startsWith("data: ")){const q=z.slice(6);if(q==="[DONE]"){a(oe=>oe.map(be=>be.id===P?{...be,streaming:!1}:be)),j(null);break}const ie=JSON.parse(q);if(ie.content||ie.delta){const oe=ie.content||ie.delta;a(be=>{const Se=be.findIndex(Le=>Le.id===P);if(Se>=0){const Le=be.slice();return Le[Se]={...Le[Se],body:Le[Se].body+oe},Le}else return[...be,{id:P,role:"assistant",body:oe,at:new Date().toISOString(),streaming:!0}]})}}else{const q=JSON.parse(z);if(q.content||q.delta){const ie=q.content||q.delta;a(oe=>{const be=oe.findIndex(Se=>Se.id===P);if(be>=0){const Se=oe.slice();return Se[be]={...Se[be],body:Se[be].body+ie},Se}else return[...oe,{id:P,role:"assistant",body:ie,at:new Date().toISOString(),streaming:!0}]})}}}catch{a(ie=>{const oe=ie.findIndex(be=>be.id===P);if(oe>=0){const be=ie.slice();return be[oe]={...be[oe],body:be[oe].body+z},be}else return[...ie,{id:P,role:"assistant",body:z,at:new Date().toISOString(),streaming:!0}]})}}}finally{ee.releaseLock()}}else try{const ee=await W.json(),X=ee.output||ee.content||ee.message||"Sorry, I couldn't process your message.";a(ae=>{const re=ae.findIndex(J=>J.id===P);if(re>=0){const J=ae.slice();return J[re]={...J[re],body:X,streaming:!1},J}else return[...ae,{id:P,role:"assistant",body:X,at:new Date().toISOString(),streaming:!1}]}),j(null)}catch(ee){console.error("Failed to parse JSON response:",ee),a(X=>[...X,{id:P,role:"assistant",body:"I'm processing your message, please wait...",at:new Date().toISOString(),streaming:!1}]),j(null)}B(),setTimeout(()=>{m&&ne.from("messages").select("id, role, body, created_at").eq("thread_id",m).order("created_at",{ascending:!0}).then(({data:ee})=>{Array.isArray(ee)&&a(X=>{const ae=new Map;X.forEach(J=>ae.set(J.id,J));for(const J of ee){if(!(J!=null&&J.id))continue;const ve=J.role==="agent"||J.role==="assistant"?"assistant":"user";if(ve==="user")continue;const z={id:J.id,role:ve,body:J.body||"",at:J.created_at||new Date().toISOString()};ae.set(z.id,z)}const re=Array.from(ae.values());return re.sort((J,ve)=>new Date(J.at).getTime()-new Date(ve.at).getTime()),re})})},1e3)}catch(G){console.error("Streaming error:",G),a(Y=>Y.filter(W=>W.id!==P).concat({id:crypto.randomUUID(),role:"assistant",body:"Sorry, I'm having trouble right now. Please try again later.",at:new Date().toISOString()})),j(null),B()}finally{clearTimeout(H),clearTimeout(D),c(!1)}},L=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),R())},$=C=>new Date(C).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center",children:i.jsx("div",{className:"mx-auto w-full max-w-xl h-full",children:i.jsx(Ae,{className:"border border-blue-100 shadow-xl rounded-2xl bg-white/90 backdrop-blur",children:i.jsxs(Je,{className:"p-0",children:[i.jsx("div",{className:"flex items-center justify-between px-4 py-3 rounded-t-2xl bg-gradient-to-r from-blue-600 to-blue-500 text-white",children:i.jsx("div",{className:"text-sm font-medium tracking-wide",children:"Live Chat"})}),i.jsx(lb,{className:"h-[450px] p-4",children:i.jsxs("div",{className:"space-y-3",children:[u&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin text-blue-600"}),"Preparing chat"]}),r.map(C=>!C.body||C.streaming&&C.body.trim()===""?null:i.jsx("div",{className:`flex ${C.role==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:"max-w-[80%] space-y-1",children:[i.jsx("div",{className:`px-4 py-2 text-sm rounded-2xl shadow-sm transition-colors ${C.role==="user"?"bg-blue-600 text-white rounded-br-md":"bg-white text-slate-900 border border-blue-100 rounded-bl-md"}`,children:i.jsx("span",{className:"whitespace-pre-wrap",children:C.body})}),i.jsx("div",{className:`text-[10px] ${C.role==="user"?"text-blue-200 text-right":"text-slate-400"}`,children:$(C.at)})]})},C.id)),l&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(Gt,{className:"h-4 w-4 animate-spin text-blue-600"}),"Typing"]}),i.jsx("div",{ref:k})]})}),i.jsx("div",{className:"p-3 border-t border-blue-100 rounded-b-2xl bg-blue-50/40",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ve,{placeholder:"Type a message",value:s,onChange:C=>o(C.target.value),onKeyPress:L,className:"rounded-full h-10 px-4 border-blue-200 focus-visible:ring-blue-500 placeholder:text-slate-400"}),i.jsx(Q,{onClick:R,disabled:!s.trim(),className:"rounded-full h-10 w-10 p-0 bg-blue-600 hover:bg-blue-700 text-white",children:i.jsx(Xh,{className:"h-4 w-4"})})]})})]})})})})}function WFe(){const{signOut:e}=Vr(),t=Ka(),[n,r]=p.useState(!1),a=async()=>{if(!n){r(!0);try{localStorage.clear(),e().catch(()=>{}),t("/",{replace:!0})}catch(s){console.error("AccountDeactivated: Error in handleBackToLogin:",s),t("/",{replace:!0})}finally{r(!1)}}};return i.jsx("div",{className:"min-h-screen bg-background text-foreground flex items-center justify-center p-4",children:i.jsxs(Ae,{className:"w-full max-w-md",children:[i.jsxs(tt,{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:i.jsx(Ds,{className:"h-8 w-8 text-red-600"})}),i.jsx(Qe,{className:"text-2xl font-bold text-red-800",children:"Akun Dinonaktifkan"})]}),i.jsx(ui,{className:"text-gray-600 text-base",children:"Akun Anda telah dinonaktifkan dan tidak dapat mengakses sistem."})]}),i.jsxs(Je,{className:"space-y-6",children:[i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Uv,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Hubungi Master Agent"}),i.jsx("p",{className:"text-sm text-red-700",children:"Untuk mengaktifkan kembali akun Anda, silakan hubungi Master Agent di organisasi Anda. Mereka dapat mengaktifkan akun Anda kembali."})]})]})}),i.jsx("div",{className:"text-sm text-gray-600",children:i.jsx("p",{children:"Jika Anda yakin ini adalah kesalahan, silakan hubungi administrator sistem untuk bantuan lebih lanjut."})}),i.jsx("div",{className:"flex flex-col gap-3",children:i.jsxs(Q,{onClick:a,variant:"outline",className:"w-full",disabled:n,children:[i.jsx(lp,{className:"h-4 w-4 mr-2"}),n?"Memproses...":"Kembali ke Halaman Login"]})})]})]})})}const HFe=new _X({defaultOptions:{queries:{staleTime:6e4,gcTime:5*6e4,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:1},mutations:{retry:0}}}),VFe=()=>i.jsx(SX,{client:HFe,children:i.jsx(_J,{children:i.jsx(ree,{children:i.jsx(lee,{children:i.jsxs(I1,{children:[i.jsx(LK,{}),i.jsx(o4,{}),i.jsxs(pJ,{children:[i.jsx(Ta,{path:"/",element:i.jsx(xg,{children:i.jsx(LR,{})})}),i.jsx(Ta,{path:"/chat",element:i.jsx(xg,{children:i.jsx(LR,{})})}),i.jsx(Ta,{path:"/profile",element:i.jsx(xg,{children:i.jsx(jIe,{})})}),i.jsx(Ta,{path:"/reset-password",element:i.jsx(BR,{})}),i.jsx(Ta,{path:"/invite",element:i.jsx(BR,{})}),i.jsx(Ta,{path:"/account-deactivated",element:i.jsx(WFe,{})}),i.jsx(Ta,{path:"/otp",element:i.jsx(xg,{children:i.jsx(LIe,{})})}),i.jsx(Ta,{path:"/logout",element:i.jsx(FIe,{})}),i.jsx(Ta,{path:"/changelog",element:i.jsx(qFe,{})}),i.jsx(Ta,{path:"/livechat/:platform_id",element:i.jsx(zM,{})}),i.jsx(Ta,{path:"/livechat/:platformId",element:i.jsx(zM,{})}),i.jsx(Ta,{path:"*",element:i.jsx(BIe,{})})]})]})})})})}),KFe="sb-yoekcpoppfudmqtvjcby-auth-token";async function GFe(){var e,t;try{const n=localStorage.getItem(KFe);if(!n)return;const r=JSON.parse(n),a=(r==null?void 0:r.access_token)||((e=r==null?void 0:r.currentSession)==null?void 0:e.access_token),s=(r==null?void 0:r.refresh_token)||((t=r==null?void 0:r.currentSession)==null?void 0:t.refresh_token);a&&s&&await ne.auth.setSession({access_token:a,refresh_token:s})}catch{}}(async()=>{try{await GFe()}catch{}uL(document.getElementById("root")).render(i.jsx(VFe,{}))})();

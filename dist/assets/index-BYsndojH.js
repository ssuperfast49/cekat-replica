var pW=Object.defineProperty;var YA=e=>{throw TypeError(e)};var gW=(e,t,n)=>t in e?pW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Lt=(e,t,n)=>gW(e,typeof t!="symbol"?t+"":t,n),_0=(e,t,n)=>t.has(e)||YA("Cannot "+n);var Ce=(e,t,n)=>(_0(e,t,"read from private field"),n?n.call(e):t.get(e)),tn=(e,t,n)=>t.has(e)?YA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),At=(e,t,n,r)=>(_0(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Lr=(e,t,n)=>(_0(e,t,"access private method"),n);var Hp=(e,t,n,r)=>({set _(a){At(e,t,a,n)},get _(){return Ce(e,t,r)}});function vW(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(r,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();var rr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function un(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function xW(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var eD={exports:{}},uy={},tD={exports:{}},Wt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np=Symbol.for("react.element"),yW=Symbol.for("react.portal"),bW=Symbol.for("react.fragment"),wW=Symbol.for("react.strict_mode"),jW=Symbol.for("react.profiler"),_W=Symbol.for("react.provider"),kW=Symbol.for("react.context"),SW=Symbol.for("react.forward_ref"),NW=Symbol.for("react.suspense"),CW=Symbol.for("react.memo"),AW=Symbol.for("react.lazy"),XA=Symbol.iterator;function EW(e){return e===null||typeof e!="object"?null:(e=XA&&e[XA]||e["@@iterator"],typeof e=="function"?e:null)}var nD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rD=Object.assign,aD={};function Zd(e,t,n){this.props=e,this.context=t,this.refs=aD,this.updater=n||nD}Zd.prototype.isReactComponent={};Zd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function iD(){}iD.prototype=Zd.prototype;function Qk(e,t,n){this.props=e,this.context=t,this.refs=aD,this.updater=n||nD}var Zk=Qk.prototype=new iD;Zk.constructor=Qk;rD(Zk,Zd.prototype);Zk.isPureReactComponent=!0;var JA=Array.isArray,sD=Object.prototype.hasOwnProperty,eS={current:null},oD={key:!0,ref:!0,__self:!0,__source:!0};function lD(e,t,n){var r,a={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)sD.call(t,r)&&!oD.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:np,type:e,key:s,ref:o,props:a,_owner:eS.current}}function PW(e,t){return{$$typeof:np,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function tS(e){return typeof e=="object"&&e!==null&&e.$$typeof===np}function TW(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var QA=/\/+/g;function k0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?TW(""+e.key):t.toString(36)}function Gg(e,t,n,r,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case np:case yW:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+k0(o,0):r,JA(a)?(n="",e!=null&&(n=e.replace(QA,"$&/")+"/"),Gg(a,t,n,"",function(u){return u})):a!=null&&(tS(a)&&(a=PW(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(QA,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",JA(e))for(var l=0;l<e.length;l++){s=e[l];var c=r+k0(s,l);o+=Gg(s,t,n,c,a)}else if(c=EW(e),typeof c=="function")for(e=c.call(e),l=0;!(s=e.next()).done;)s=s.value,c=r+k0(s,l++),o+=Gg(s,t,n,c,a);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Vp(e,t,n){if(e==null)return e;var r=[],a=0;return Gg(e,r,"","",function(s){return t.call(n,s,a++)}),r}function OW(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ua={current:null},Yg={transition:null},IW={ReactCurrentDispatcher:ua,ReactCurrentBatchConfig:Yg,ReactCurrentOwner:eS};function cD(){throw Error("act(...) is not supported in production builds of React.")}Wt.Children={map:Vp,forEach:function(e,t,n){Vp(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Vp(e,function(){t++}),t},toArray:function(e){return Vp(e,function(t){return t})||[]},only:function(e){if(!tS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Wt.Component=Zd;Wt.Fragment=bW;Wt.Profiler=jW;Wt.PureComponent=Qk;Wt.StrictMode=wW;Wt.Suspense=NW;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IW;Wt.act=cD;Wt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=rD({},e.props),a=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=eS.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)sD.call(t,c)&&!oD.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:np,type:e.type,key:a,ref:s,props:r,_owner:o}};Wt.createContext=function(e){return e={$$typeof:kW,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_W,_context:e},e.Consumer=e};Wt.createElement=lD;Wt.createFactory=function(e){var t=lD.bind(null,e);return t.type=e,t};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(e){return{$$typeof:SW,render:e}};Wt.isValidElement=tS;Wt.lazy=function(e){return{$$typeof:AW,_payload:{_status:-1,_result:e},_init:OW}};Wt.memo=function(e,t){return{$$typeof:CW,type:e,compare:t===void 0?null:t}};Wt.startTransition=function(e){var t=Yg.transition;Yg.transition={};try{e()}finally{Yg.transition=t}};Wt.unstable_act=cD;Wt.useCallback=function(e,t){return ua.current.useCallback(e,t)};Wt.useContext=function(e){return ua.current.useContext(e)};Wt.useDebugValue=function(){};Wt.useDeferredValue=function(e){return ua.current.useDeferredValue(e)};Wt.useEffect=function(e,t){return ua.current.useEffect(e,t)};Wt.useId=function(){return ua.current.useId()};Wt.useImperativeHandle=function(e,t,n){return ua.current.useImperativeHandle(e,t,n)};Wt.useInsertionEffect=function(e,t){return ua.current.useInsertionEffect(e,t)};Wt.useLayoutEffect=function(e,t){return ua.current.useLayoutEffect(e,t)};Wt.useMemo=function(e,t){return ua.current.useMemo(e,t)};Wt.useReducer=function(e,t,n){return ua.current.useReducer(e,t,n)};Wt.useRef=function(e){return ua.current.useRef(e)};Wt.useState=function(e){return ua.current.useState(e)};Wt.useSyncExternalStore=function(e,t,n){return ua.current.useSyncExternalStore(e,t,n)};Wt.useTransition=function(){return ua.current.useTransition()};Wt.version="18.3.1";tD.exports=Wt;var p=tD.exports;const X=un(p),nS=vW({__proto__:null,default:X},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RW=p,MW=Symbol.for("react.element"),DW=Symbol.for("react.fragment"),$W=Object.prototype.hasOwnProperty,LW=RW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FW={key:!0,ref:!0,__self:!0,__source:!0};function uD(e,t,n){var r,a={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)$W.call(t,r)&&!FW.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:MW,type:e,key:s,ref:o,props:a,_owner:LW.current}}uy.Fragment=DW;uy.jsx=uD;uy.jsxs=uD;eD.exports=uy;var i=eD.exports,dD={exports:{}},Ja={},fD={exports:{}},hD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,L){var N=$.length;$.push(L);e:for(;0<N;){var U=N-1>>>1,D=$[U];if(0<a(D,L))$[U]=L,$[N]=D,N=U;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var L=$[0],N=$.pop();if(N!==L){$[0]=N;e:for(var U=0,D=$.length,R=D>>>1;U<R;){var K=2*(U+1)-1,Q=$[K],H=K+1,V=$[H];if(0>a(Q,N))H<D&&0>a(V,Q)?($[U]=V,$[H]=N,U=H):($[U]=Q,$[K]=N,U=K);else if(H<D&&0>a(V,N))$[U]=V,$[H]=N,U=H;else break e}}return L}function a($,L){var N=$.sortIndex-L.sortIndex;return N!==0?N:$.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,d=null,h=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=$)r(u),L.sortIndex=L.expirationTime,t(c,L);else break;L=n(u)}}function k($){if(v=!1,w($),!g)if(n(c)!==null)g=!0,B(_);else{var L=n(u);L!==null&&O(k,L.startTime-$)}}function _($,L){g=!1,v&&(v=!1,y(A),A=-1),m=!0;var N=h;try{for(w(L),d=n(c);d!==null&&(!(d.expirationTime>L)||$&&!M());){var U=d.callback;if(typeof U=="function"){d.callback=null,h=d.priorityLevel;var D=U(d.expirationTime<=L);L=e.unstable_now(),typeof D=="function"?d.callback=D:d===n(c)&&r(c),w(L)}else r(c);d=n(c)}if(d!==null)var R=!0;else{var K=n(u);K!==null&&O(k,K.startTime-L),R=!1}return R}finally{d=null,h=N,m=!1}}var j=!1,S=null,A=-1,C=5,T=-1;function M(){return!(e.unstable_now()-T<C)}function F(){if(S!==null){var $=e.unstable_now();T=$;var L=!0;try{L=S(!0,$)}finally{L?E():(j=!1,S=null)}}else j=!1}var E;if(typeof b=="function")E=function(){b(F)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,P=I.port2;I.port1.onmessage=F,E=function(){P.postMessage(null)}}else E=function(){x(F,0)};function B($){S=$,j||(j=!0,E())}function O($,L){A=x(function(){$(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,B(_))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var N=h;h=L;try{return $()}finally{h=N}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,L){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var N=h;h=$;try{return L()}finally{h=N}},e.unstable_scheduleCallback=function($,L,N){var U=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?U+N:U):N=U,$){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=N+D,$={id:f++,callback:L,priorityLevel:$,startTime:N,expirationTime:D,sortIndex:-1},N>U?($.sortIndex=N,t(u,$),n(c)===null&&$===n(u)&&(v?(y(A),A=-1):v=!0,O(k,N-U))):($.sortIndex=D,t(c,$),g||m||(g=!0,B(_))),$},e.unstable_shouldYield=M,e.unstable_wrapCallback=function($){var L=h;return function(){var N=h;h=L;try{return $.apply(this,arguments)}finally{h=N}}}})(hD);fD.exports=hD;var BW=fD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UW=p,Ya=BW;function $e(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mD=new Set,Ih={};function Hc(e,t){vd(e,t),vd(e+"Capture",t)}function vd(e,t){for(Ih[e]=t,e=0;e<t.length;e++)mD.add(t[e])}var lo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pj=Object.prototype.hasOwnProperty,zW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ZA={},eE={};function qW(e){return Pj.call(eE,e)?!0:Pj.call(ZA,e)?!1:zW.test(e)?eE[e]=!0:(ZA[e]=!0,!1)}function WW(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function HW(e,t,n,r){if(t===null||typeof t>"u"||WW(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function da(e,t,n,r,a,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Ir={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ir[e]=new da(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ir[t]=new da(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ir[e]=new da(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ir[e]=new da(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ir[e]=new da(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ir[e]=new da(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ir[e]=new da(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ir[e]=new da(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ir[e]=new da(e,5,!1,e.toLowerCase(),null,!1,!1)});var rS=/[\-:]([a-z])/g;function aS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(rS,aS);Ir[t]=new da(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(rS,aS);Ir[t]=new da(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(rS,aS);Ir[t]=new da(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ir[e]=new da(e,1,!1,e.toLowerCase(),null,!1,!1)});Ir.xlinkHref=new da("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ir[e]=new da(e,1,!1,e.toLowerCase(),null,!0,!0)});function iS(e,t,n,r){var a=Ir.hasOwnProperty(t)?Ir[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(HW(t,n,a,r)&&(n=null),r||a===null?qW(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var wo=UW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kp=Symbol.for("react.element"),Pu=Symbol.for("react.portal"),Tu=Symbol.for("react.fragment"),sS=Symbol.for("react.strict_mode"),Tj=Symbol.for("react.profiler"),pD=Symbol.for("react.provider"),gD=Symbol.for("react.context"),oS=Symbol.for("react.forward_ref"),Oj=Symbol.for("react.suspense"),Ij=Symbol.for("react.suspense_list"),lS=Symbol.for("react.memo"),Uo=Symbol.for("react.lazy"),vD=Symbol.for("react.offscreen"),tE=Symbol.iterator;function Nf(e){return e===null||typeof e!="object"?null:(e=tE&&e[tE]||e["@@iterator"],typeof e=="function"?e:null)}var Un=Object.assign,S0;function rh(e){if(S0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);S0=t&&t[1]||""}return`
`+S0+e}var N0=!1;function C0(e,t){if(!e||N0)return"";N0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),s=r.stack.split(`
`),o=a.length-1,l=s.length-1;1<=o&&0<=l&&a[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==s[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{N0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?rh(e):""}function VW(e){switch(e.tag){case 5:return rh(e.type);case 16:return rh("Lazy");case 13:return rh("Suspense");case 19:return rh("SuspenseList");case 0:case 2:case 15:return e=C0(e.type,!1),e;case 11:return e=C0(e.type.render,!1),e;case 1:return e=C0(e.type,!0),e;default:return""}}function Rj(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tu:return"Fragment";case Pu:return"Portal";case Tj:return"Profiler";case sS:return"StrictMode";case Oj:return"Suspense";case Ij:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gD:return(e.displayName||"Context")+".Consumer";case pD:return(e._context.displayName||"Context")+".Provider";case oS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case lS:return t=e.displayName||null,t!==null?t:Rj(e.type)||"Memo";case Uo:t=e._payload,e=e._init;try{return Rj(e(t))}catch{}}return null}function KW(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rj(t);case 8:return t===sS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function GW(e){var t=xD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gp(e){e._valueTracker||(e._valueTracker=GW(e))}function yD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=xD(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function xv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Mj(e,t){var n=t.checked;return Un({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function nE(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=gl(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bD(e,t){t=t.checked,t!=null&&iS(e,"checked",t,!1)}function Dj(e,t){bD(e,t);var n=gl(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$j(e,t.type,n):t.hasOwnProperty("defaultValue")&&$j(e,t.type,gl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rE(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function $j(e,t,n){(t!=="number"||xv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ah=Array.isArray;function Vu(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+gl(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Lj(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($e(91));return Un({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function aE(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error($e(92));if(ah(n)){if(1<n.length)throw Error($e(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:gl(n)}}function wD(e,t){var n=gl(t.value),r=gl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function iE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fj(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yp,_D=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yp=Yp||document.createElement("div"),Yp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yp.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var hh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YW=["Webkit","ms","Moz","O"];Object.keys(hh).forEach(function(e){YW.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),hh[t]=hh[e]})});function kD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||hh.hasOwnProperty(e)&&hh[e]?(""+t).trim():t+"px"}function SD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=kD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var XW=Un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bj(e,t){if(t){if(XW[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($e(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($e(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($e(61))}if(t.style!=null&&typeof t.style!="object")throw Error($e(62))}}function Uj(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zj=null;function cS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qj=null,Ku=null,Gu=null;function sE(e){if(e=ip(e)){if(typeof qj!="function")throw Error($e(280));var t=e.stateNode;t&&(t=py(t),qj(e.stateNode,e.type,t))}}function ND(e){Ku?Gu?Gu.push(e):Gu=[e]:Ku=e}function CD(){if(Ku){var e=Ku,t=Gu;if(Gu=Ku=null,sE(e),t)for(e=0;e<t.length;e++)sE(t[e])}}function AD(e,t){return e(t)}function ED(){}var A0=!1;function PD(e,t,n){if(A0)return e(t,n);A0=!0;try{return AD(e,t,n)}finally{A0=!1,(Ku!==null||Gu!==null)&&(ED(),CD())}}function Mh(e,t){var n=e.stateNode;if(n===null)return null;var r=py(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error($e(231,t,typeof n));return n}var Wj=!1;if(lo)try{var Cf={};Object.defineProperty(Cf,"passive",{get:function(){Wj=!0}}),window.addEventListener("test",Cf,Cf),window.removeEventListener("test",Cf,Cf)}catch{Wj=!1}function JW(e,t,n,r,a,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(f){this.onError(f)}}var mh=!1,yv=null,bv=!1,Hj=null,QW={onError:function(e){mh=!0,yv=e}};function ZW(e,t,n,r,a,s,o,l,c){mh=!1,yv=null,JW.apply(QW,arguments)}function eH(e,t,n,r,a,s,o,l,c){if(ZW.apply(this,arguments),mh){if(mh){var u=yv;mh=!1,yv=null}else throw Error($e(198));bv||(bv=!0,Hj=u)}}function Vc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function TD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oE(e){if(Vc(e)!==e)throw Error($e(188))}function tH(e){var t=e.alternate;if(!t){if(t=Vc(e),t===null)throw Error($e(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var s=a.alternate;if(s===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return oE(a),e;if(s===r)return oE(a),t;s=s.sibling}throw Error($e(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o)throw Error($e(189))}}if(n.alternate!==r)throw Error($e(190))}if(n.tag!==3)throw Error($e(188));return n.stateNode.current===n?e:t}function OD(e){return e=tH(e),e!==null?ID(e):null}function ID(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ID(e);if(t!==null)return t;e=e.sibling}return null}var RD=Ya.unstable_scheduleCallback,lE=Ya.unstable_cancelCallback,nH=Ya.unstable_shouldYield,rH=Ya.unstable_requestPaint,Qn=Ya.unstable_now,aH=Ya.unstable_getCurrentPriorityLevel,uS=Ya.unstable_ImmediatePriority,MD=Ya.unstable_UserBlockingPriority,wv=Ya.unstable_NormalPriority,iH=Ya.unstable_LowPriority,DD=Ya.unstable_IdlePriority,dy=null,js=null;function sH(e){if(js&&typeof js.onCommitFiberRoot=="function")try{js.onCommitFiberRoot(dy,e,void 0,(e.current.flags&128)===128)}catch{}}var Ki=Math.clz32?Math.clz32:cH,oH=Math.log,lH=Math.LN2;function cH(e){return e>>>=0,e===0?32:31-(oH(e)/lH|0)|0}var Xp=64,Jp=4194304;function ih(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jv(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=ih(l):(s&=o,s!==0&&(r=ih(s)))}else o=n&~a,o!==0?r=ih(o):s!==0&&(r=ih(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,s=t&-t,a>=s||a===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ki(t),a=1<<n,r|=e[n],t&=~a;return r}function uH(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dH(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ki(s),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=uH(l,t)):c<=t&&(e.expiredLanes|=l),s&=~l}}function Vj(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $D(){var e=Xp;return Xp<<=1,!(Xp&4194240)&&(Xp=64),e}function E0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function rp(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ki(t),e[t]=n}function fH(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ki(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}function dS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ki(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var hn=0;function LD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var FD,fS,BD,UD,zD,Kj=!1,Qp=[],al=null,il=null,sl=null,Dh=new Map,$h=new Map,Wo=[],hH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cE(e,t){switch(e){case"focusin":case"focusout":al=null;break;case"dragenter":case"dragleave":il=null;break;case"mouseover":case"mouseout":sl=null;break;case"pointerover":case"pointerout":Dh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$h.delete(t.pointerId)}}function Af(e,t,n,r,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},t!==null&&(t=ip(t),t!==null&&fS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function mH(e,t,n,r,a){switch(t){case"focusin":return al=Af(al,e,t,n,r,a),!0;case"dragenter":return il=Af(il,e,t,n,r,a),!0;case"mouseover":return sl=Af(sl,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Dh.set(s,Af(Dh.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,$h.set(s,Af($h.get(s)||null,e,t,n,r,a)),!0}return!1}function qD(e){var t=ac(e.target);if(t!==null){var n=Vc(t);if(n!==null){if(t=n.tag,t===13){if(t=TD(n),t!==null){e.blockedOn=t,zD(e.priority,function(){BD(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gj(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);zj=r,n.target.dispatchEvent(r),zj=null}else return t=ip(n),t!==null&&fS(t),e.blockedOn=n,!1;t.shift()}return!0}function uE(e,t,n){Xg(e)&&n.delete(t)}function pH(){Kj=!1,al!==null&&Xg(al)&&(al=null),il!==null&&Xg(il)&&(il=null),sl!==null&&Xg(sl)&&(sl=null),Dh.forEach(uE),$h.forEach(uE)}function Ef(e,t){e.blockedOn===t&&(e.blockedOn=null,Kj||(Kj=!0,Ya.unstable_scheduleCallback(Ya.unstable_NormalPriority,pH)))}function Lh(e){function t(a){return Ef(a,e)}if(0<Qp.length){Ef(Qp[0],e);for(var n=1;n<Qp.length;n++){var r=Qp[n];r.blockedOn===e&&(r.blockedOn=null)}}for(al!==null&&Ef(al,e),il!==null&&Ef(il,e),sl!==null&&Ef(sl,e),Dh.forEach(t),$h.forEach(t),n=0;n<Wo.length;n++)r=Wo[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Wo.length&&(n=Wo[0],n.blockedOn===null);)qD(n),n.blockedOn===null&&Wo.shift()}var Yu=wo.ReactCurrentBatchConfig,_v=!0;function gH(e,t,n,r){var a=hn,s=Yu.transition;Yu.transition=null;try{hn=1,hS(e,t,n,r)}finally{hn=a,Yu.transition=s}}function vH(e,t,n,r){var a=hn,s=Yu.transition;Yu.transition=null;try{hn=4,hS(e,t,n,r)}finally{hn=a,Yu.transition=s}}function hS(e,t,n,r){if(_v){var a=Gj(e,t,n,r);if(a===null)F0(e,t,r,kv,n),cE(e,r);else if(mH(a,e,t,n,r))r.stopPropagation();else if(cE(e,r),t&4&&-1<hH.indexOf(e)){for(;a!==null;){var s=ip(a);if(s!==null&&FD(s),s=Gj(e,t,n,r),s===null&&F0(e,t,r,kv,n),s===a)break;a=s}a!==null&&r.stopPropagation()}else F0(e,t,r,null,n)}}var kv=null;function Gj(e,t,n,r){if(kv=null,e=cS(r),e=ac(e),e!==null)if(t=Vc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=TD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return kv=e,null}function WD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aH()){case uS:return 1;case MD:return 4;case wv:case iH:return 16;case DD:return 536870912;default:return 16}default:return 16}}var el=null,mS=null,Jg=null;function HD(){if(Jg)return Jg;var e,t=mS,n=t.length,r,a="value"in el?el.value:el.textContent,s=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[s-r];r++);return Jg=a.slice(e,1<r?1-r:void 0)}function Qg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zp(){return!0}function dE(){return!1}function Qa(e){function t(n,r,a,s,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zp:dE,this.isPropagationStopped=dE,this}return Un(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zp)},persist:function(){},isPersistent:Zp}),t}var ef={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pS=Qa(ef),ap=Un({},ef,{view:0,detail:0}),xH=Qa(ap),P0,T0,Pf,fy=Un({},ap,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pf&&(Pf&&e.type==="mousemove"?(P0=e.screenX-Pf.screenX,T0=e.screenY-Pf.screenY):T0=P0=0,Pf=e),P0)},movementY:function(e){return"movementY"in e?e.movementY:T0}}),fE=Qa(fy),yH=Un({},fy,{dataTransfer:0}),bH=Qa(yH),wH=Un({},ap,{relatedTarget:0}),O0=Qa(wH),jH=Un({},ef,{animationName:0,elapsedTime:0,pseudoElement:0}),_H=Qa(jH),kH=Un({},ef,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),SH=Qa(kH),NH=Un({},ef,{data:0}),hE=Qa(NH),CH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PH(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=EH[e])?!!t[e]:!1}function gS(){return PH}var TH=Un({},ap,{key:function(e){if(e.key){var t=CH[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?AH[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gS,charCode:function(e){return e.type==="keypress"?Qg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),OH=Qa(TH),IH=Un({},fy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mE=Qa(IH),RH=Un({},ap,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gS}),MH=Qa(RH),DH=Un({},ef,{propertyName:0,elapsedTime:0,pseudoElement:0}),$H=Qa(DH),LH=Un({},fy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),FH=Qa(LH),BH=[9,13,27,32],vS=lo&&"CompositionEvent"in window,ph=null;lo&&"documentMode"in document&&(ph=document.documentMode);var UH=lo&&"TextEvent"in window&&!ph,VD=lo&&(!vS||ph&&8<ph&&11>=ph),pE=" ",gE=!1;function KD(e,t){switch(e){case"keyup":return BH.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ou=!1;function zH(e,t){switch(e){case"compositionend":return GD(t);case"keypress":return t.which!==32?null:(gE=!0,pE);case"textInput":return e=t.data,e===pE&&gE?null:e;default:return null}}function qH(e,t){if(Ou)return e==="compositionend"||!vS&&KD(e,t)?(e=HD(),Jg=mS=el=null,Ou=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return VD&&t.locale!=="ko"?null:t.data;default:return null}}var WH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!WH[e.type]:t==="textarea"}function YD(e,t,n,r){ND(r),t=Sv(t,"onChange"),0<t.length&&(n=new pS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var gh=null,Fh=null;function HH(e){s$(e,0)}function hy(e){var t=Mu(e);if(yD(t))return e}function VH(e,t){if(e==="change")return t}var XD=!1;if(lo){var I0;if(lo){var R0="oninput"in document;if(!R0){var xE=document.createElement("div");xE.setAttribute("oninput","return;"),R0=typeof xE.oninput=="function"}I0=R0}else I0=!1;XD=I0&&(!document.documentMode||9<document.documentMode)}function yE(){gh&&(gh.detachEvent("onpropertychange",JD),Fh=gh=null)}function JD(e){if(e.propertyName==="value"&&hy(Fh)){var t=[];YD(t,Fh,e,cS(e)),PD(HH,t)}}function KH(e,t,n){e==="focusin"?(yE(),gh=t,Fh=n,gh.attachEvent("onpropertychange",JD)):e==="focusout"&&yE()}function GH(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hy(Fh)}function YH(e,t){if(e==="click")return hy(t)}function XH(e,t){if(e==="input"||e==="change")return hy(t)}function JH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ji=typeof Object.is=="function"?Object.is:JH;function Bh(e,t){if(Ji(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Pj.call(t,a)||!Ji(e[a],t[a]))return!1}return!0}function bE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wE(e,t){var n=bE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bE(n)}}function QD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?QD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ZD(){for(var e=window,t=xv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xv(e.document)}return t}function xS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function QH(e){var t=ZD(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&QD(n.ownerDocument.documentElement,n)){if(r!==null&&xS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=r.end===void 0?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=wE(n,s);var o=wE(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ZH=lo&&"documentMode"in document&&11>=document.documentMode,Iu=null,Yj=null,vh=null,Xj=!1;function jE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xj||Iu==null||Iu!==xv(r)||(r=Iu,"selectionStart"in r&&xS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vh&&Bh(vh,r)||(vh=r,r=Sv(Yj,"onSelect"),0<r.length&&(t=new pS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Iu)))}function eg(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ru={animationend:eg("Animation","AnimationEnd"),animationiteration:eg("Animation","AnimationIteration"),animationstart:eg("Animation","AnimationStart"),transitionend:eg("Transition","TransitionEnd")},M0={},e$={};lo&&(e$=document.createElement("div").style,"AnimationEvent"in window||(delete Ru.animationend.animation,delete Ru.animationiteration.animation,delete Ru.animationstart.animation),"TransitionEvent"in window||delete Ru.transitionend.transition);function my(e){if(M0[e])return M0[e];if(!Ru[e])return e;var t=Ru[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in e$)return M0[e]=t[n];return e}var t$=my("animationend"),n$=my("animationiteration"),r$=my("animationstart"),a$=my("transitionend"),i$=new Map,_E="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sl(e,t){i$.set(e,t),Hc(t,[e])}for(var D0=0;D0<_E.length;D0++){var $0=_E[D0],e7=$0.toLowerCase(),t7=$0[0].toUpperCase()+$0.slice(1);Sl(e7,"on"+t7)}Sl(t$,"onAnimationEnd");Sl(n$,"onAnimationIteration");Sl(r$,"onAnimationStart");Sl("dblclick","onDoubleClick");Sl("focusin","onFocus");Sl("focusout","onBlur");Sl(a$,"onTransitionEnd");vd("onMouseEnter",["mouseout","mouseover"]);vd("onMouseLeave",["mouseout","mouseover"]);vd("onPointerEnter",["pointerout","pointerover"]);vd("onPointerLeave",["pointerout","pointerover"]);Hc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n7=new Set("cancel close invalid load scroll toggle".split(" ").concat(sh));function kE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,eH(r,t,void 0,e),e.currentTarget=null}function s$(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&a.isPropagationStopped())break e;kE(a,l,u),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&a.isPropagationStopped())break e;kE(a,l,u),s=c}}}if(bv)throw e=Hj,bv=!1,Hj=null,e}function Cn(e,t){var n=t[t1];n===void 0&&(n=t[t1]=new Set);var r=e+"__bubble";n.has(r)||(o$(t,e,2,!1),n.add(r))}function L0(e,t,n){var r=0;t&&(r|=4),o$(n,e,r,t)}var tg="_reactListening"+Math.random().toString(36).slice(2);function Uh(e){if(!e[tg]){e[tg]=!0,mD.forEach(function(n){n!=="selectionchange"&&(n7.has(n)||L0(n,!1,e),L0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tg]||(t[tg]=!0,L0("selectionchange",!1,t))}}function o$(e,t,n,r){switch(WD(t)){case 1:var a=gH;break;case 4:a=vH;break;default:a=hS}n=a.bind(null,t,n,e),a=void 0,!Wj||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function F0(e,t,n,r,a){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=ac(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}PD(function(){var u=s,f=cS(n),d=[];e:{var h=i$.get(e);if(h!==void 0){var m=pS,g=e;switch(e){case"keypress":if(Qg(n)===0)break e;case"keydown":case"keyup":m=OH;break;case"focusin":g="focus",m=O0;break;case"focusout":g="blur",m=O0;break;case"beforeblur":case"afterblur":m=O0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=fE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=bH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=MH;break;case t$:case n$:case r$:m=_H;break;case a$:m=$H;break;case"scroll":m=xH;break;case"wheel":m=FH;break;case"copy":case"cut":case"paste":m=SH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=mE}var v=(t&4)!==0,x=!v&&e==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var b=u,w;b!==null;){w=b;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,y!==null&&(k=Mh(b,y),k!=null&&v.push(zh(b,k,w)))),x)break;b=b.return}0<v.length&&(h=new m(h,g,null,n,f),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&n!==zj&&(g=n.relatedTarget||n.fromElement)&&(ac(g)||g[co]))break e;if((m||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?ac(g):null,g!==null&&(x=Vc(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=fE,k="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=mE,k="onPointerLeave",y="onPointerEnter",b="pointer"),x=m==null?h:Mu(m),w=g==null?h:Mu(g),h=new v(k,b+"leave",m,n,f),h.target=x,h.relatedTarget=w,k=null,ac(f)===u&&(v=new v(y,b+"enter",g,n,f),v.target=w,v.relatedTarget=x,k=v),x=k,m&&g)t:{for(v=m,y=g,b=0,w=v;w;w=iu(w))b++;for(w=0,k=y;k;k=iu(k))w++;for(;0<b-w;)v=iu(v),b--;for(;0<w-b;)y=iu(y),w--;for(;b--;){if(v===y||y!==null&&v===y.alternate)break t;v=iu(v),y=iu(y)}v=null}else v=null;m!==null&&SE(d,h,m,v,!1),g!==null&&x!==null&&SE(d,x,g,v,!0)}}e:{if(h=u?Mu(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var _=VH;else if(vE(h))if(XD)_=XH;else{_=GH;var j=KH}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=YH);if(_&&(_=_(e,u))){YD(d,_,n,f);break e}j&&j(e,h,u),e==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&$j(h,"number",h.value)}switch(j=u?Mu(u):window,e){case"focusin":(vE(j)||j.contentEditable==="true")&&(Iu=j,Yj=u,vh=null);break;case"focusout":vh=Yj=Iu=null;break;case"mousedown":Xj=!0;break;case"contextmenu":case"mouseup":case"dragend":Xj=!1,jE(d,n,f);break;case"selectionchange":if(ZH)break;case"keydown":case"keyup":jE(d,n,f)}var S;if(vS)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Ou?KD(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(VD&&n.locale!=="ko"&&(Ou||A!=="onCompositionStart"?A==="onCompositionEnd"&&Ou&&(S=HD()):(el=f,mS="value"in el?el.value:el.textContent,Ou=!0)),j=Sv(u,A),0<j.length&&(A=new hE(A,e,null,n,f),d.push({event:A,listeners:j}),S?A.data=S:(S=GD(n),S!==null&&(A.data=S)))),(S=UH?zH(e,n):qH(e,n))&&(u=Sv(u,"onBeforeInput"),0<u.length&&(f=new hE("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=S))}s$(d,t)})}function zh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Sv(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=Mh(e,n),s!=null&&r.unshift(zh(e,s,a)),s=Mh(e,t),s!=null&&r.push(zh(e,s,a))),e=e.return}return r}function iu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function SE(e,t,n,r,a){for(var s=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,a?(c=Mh(n,s),c!=null&&o.unshift(zh(n,c,l))):a||(c=Mh(n,s),c!=null&&o.push(zh(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var r7=/\r\n?/g,a7=/\u0000|\uFFFD/g;function NE(e){return(typeof e=="string"?e:""+e).replace(r7,`
`).replace(a7,"")}function ng(e,t,n){if(t=NE(t),NE(e)!==t&&n)throw Error($e(425))}function Nv(){}var Jj=null,Qj=null;function Zj(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var e1=typeof setTimeout=="function"?setTimeout:void 0,i7=typeof clearTimeout=="function"?clearTimeout:void 0,CE=typeof Promise=="function"?Promise:void 0,s7=typeof queueMicrotask=="function"?queueMicrotask:typeof CE<"u"?function(e){return CE.resolve(null).then(e).catch(o7)}:e1;function o7(e){setTimeout(function(){throw e})}function B0(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Lh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Lh(t)}function ol(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function AE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var tf=Math.random().toString(36).slice(2),ps="__reactFiber$"+tf,qh="__reactProps$"+tf,co="__reactContainer$"+tf,t1="__reactEvents$"+tf,l7="__reactListeners$"+tf,c7="__reactHandles$"+tf;function ac(e){var t=e[ps];if(t)return t;for(var n=e.parentNode;n;){if(t=n[co]||n[ps]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=AE(e);e!==null;){if(n=e[ps])return n;e=AE(e)}return t}e=n,n=e.parentNode}return null}function ip(e){return e=e[ps]||e[co],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($e(33))}function py(e){return e[qh]||null}var n1=[],Du=-1;function Nl(e){return{current:e}}function Pn(e){0>Du||(e.current=n1[Du],n1[Du]=null,Du--)}function _n(e,t){Du++,n1[Du]=e.current,e.current=t}var vl={},Yr=Nl(vl),Ea=Nl(!1),wc=vl;function xd(e,t){var n=e.type.contextTypes;if(!n)return vl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in n)a[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pa(e){return e=e.childContextTypes,e!=null}function Cv(){Pn(Ea),Pn(Yr)}function EE(e,t,n){if(Yr.current!==vl)throw Error($e(168));_n(Yr,t),_n(Ea,n)}function l$(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error($e(108,KW(e)||"Unknown",a));return Un({},n,r)}function Av(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vl,wc=Yr.current,_n(Yr,e),_n(Ea,Ea.current),!0}function PE(e,t,n){var r=e.stateNode;if(!r)throw Error($e(169));n?(e=l$(e,t,wc),r.__reactInternalMemoizedMergedChildContext=e,Pn(Ea),Pn(Yr),_n(Yr,e)):Pn(Ea),_n(Ea,n)}var Ws=null,gy=!1,U0=!1;function c$(e){Ws===null?Ws=[e]:Ws.push(e)}function u7(e){gy=!0,c$(e)}function Cl(){if(!U0&&Ws!==null){U0=!0;var e=0,t=hn;try{var n=Ws;for(hn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ws=null,gy=!1}catch(a){throw Ws!==null&&(Ws=Ws.slice(e+1)),RD(uS,Cl),a}finally{hn=t,U0=!1}}return null}var $u=[],Lu=0,Ev=null,Pv=0,li=[],ci=0,jc=null,Ks=1,Gs="";function Vl(e,t){$u[Lu++]=Pv,$u[Lu++]=Ev,Ev=e,Pv=t}function u$(e,t,n){li[ci++]=Ks,li[ci++]=Gs,li[ci++]=jc,jc=e;var r=Ks;e=Gs;var a=32-Ki(r)-1;r&=~(1<<a),n+=1;var s=32-Ki(t)+a;if(30<s){var o=a-a%5;s=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Ks=1<<32-Ki(t)+a|n<<a|r,Gs=s+e}else Ks=1<<s|n<<a|r,Gs=e}function yS(e){e.return!==null&&(Vl(e,1),u$(e,1,0))}function bS(e){for(;e===Ev;)Ev=$u[--Lu],$u[Lu]=null,Pv=$u[--Lu],$u[Lu]=null;for(;e===jc;)jc=li[--ci],li[ci]=null,Gs=li[--ci],li[ci]=null,Ks=li[--ci],li[ci]=null}var Va=null,Ha=null,Dn=!1,zi=null;function d$(e,t){var n=fi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function TE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Va=e,Ha=ol(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Va=e,Ha=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=jc!==null?{id:Ks,overflow:Gs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=fi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Va=e,Ha=null,!0):!1;default:return!1}}function r1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function a1(e){if(Dn){var t=Ha;if(t){var n=t;if(!TE(e,t)){if(r1(e))throw Error($e(418));t=ol(n.nextSibling);var r=Va;t&&TE(e,t)?d$(r,n):(e.flags=e.flags&-4097|2,Dn=!1,Va=e)}}else{if(r1(e))throw Error($e(418));e.flags=e.flags&-4097|2,Dn=!1,Va=e}}}function OE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Va=e}function rg(e){if(e!==Va)return!1;if(!Dn)return OE(e),Dn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zj(e.type,e.memoizedProps)),t&&(t=Ha)){if(r1(e))throw f$(),Error($e(418));for(;t;)d$(e,t),t=ol(t.nextSibling)}if(OE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($e(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ha=ol(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ha=null}}else Ha=Va?ol(e.stateNode.nextSibling):null;return!0}function f$(){for(var e=Ha;e;)e=ol(e.nextSibling)}function yd(){Ha=Va=null,Dn=!1}function wS(e){zi===null?zi=[e]:zi.push(e)}var d7=wo.ReactCurrentBatchConfig;function Tf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($e(309));var r=n.stateNode}if(!r)throw Error($e(147,e));var a=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var l=a.refs;o===null?delete l[s]:l[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error($e(284));if(!n._owner)throw Error($e(290,e))}return e}function ag(e,t){throw e=Object.prototype.toString.call(t),Error($e(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function IE(e){var t=e._init;return t(e._payload)}function h$(e){function t(y,b){if(e){var w=y.deletions;w===null?(y.deletions=[b],y.flags|=16):w.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function a(y,b){return y=dl(y,b),y.index=0,y.sibling=null,y}function s(y,b,w){return y.index=w,e?(w=y.alternate,w!==null?(w=w.index,w<b?(y.flags|=2,b):w):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,b,w,k){return b===null||b.tag!==6?(b=G0(w,y.mode,k),b.return=y,b):(b=a(b,w),b.return=y,b)}function c(y,b,w,k){var _=w.type;return _===Tu?f(y,b,w.props.children,k,w.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Uo&&IE(_)===b.type)?(k=a(b,w.props),k.ref=Tf(y,b,w),k.return=y,k):(k=iv(w.type,w.key,w.props,null,y.mode,k),k.ref=Tf(y,b,w),k.return=y,k)}function u(y,b,w,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=Y0(w,y.mode,k),b.return=y,b):(b=a(b,w.children||[]),b.return=y,b)}function f(y,b,w,k,_){return b===null||b.tag!==7?(b=xc(w,y.mode,k,_),b.return=y,b):(b=a(b,w),b.return=y,b)}function d(y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=G0(""+b,y.mode,w),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Kp:return w=iv(b.type,b.key,b.props,null,y.mode,w),w.ref=Tf(y,null,b),w.return=y,w;case Pu:return b=Y0(b,y.mode,w),b.return=y,b;case Uo:var k=b._init;return d(y,k(b._payload),w)}if(ah(b)||Nf(b))return b=xc(b,y.mode,w,null),b.return=y,b;ag(y,b)}return null}function h(y,b,w,k){var _=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:l(y,b,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Kp:return w.key===_?c(y,b,w,k):null;case Pu:return w.key===_?u(y,b,w,k):null;case Uo:return _=w._init,h(y,b,_(w._payload),k)}if(ah(w)||Nf(w))return _!==null?null:f(y,b,w,k,null);ag(y,w)}return null}function m(y,b,w,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(w)||null,l(b,y,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Kp:return y=y.get(k.key===null?w:k.key)||null,c(b,y,k,_);case Pu:return y=y.get(k.key===null?w:k.key)||null,u(b,y,k,_);case Uo:var j=k._init;return m(y,b,w,j(k._payload),_)}if(ah(k)||Nf(k))return y=y.get(w)||null,f(b,y,k,_,null);ag(b,k)}return null}function g(y,b,w,k){for(var _=null,j=null,S=b,A=b=0,C=null;S!==null&&A<w.length;A++){S.index>A?(C=S,S=null):C=S.sibling;var T=h(y,S,w[A],k);if(T===null){S===null&&(S=C);break}e&&S&&T.alternate===null&&t(y,S),b=s(T,b,A),j===null?_=T:j.sibling=T,j=T,S=C}if(A===w.length)return n(y,S),Dn&&Vl(y,A),_;if(S===null){for(;A<w.length;A++)S=d(y,w[A],k),S!==null&&(b=s(S,b,A),j===null?_=S:j.sibling=S,j=S);return Dn&&Vl(y,A),_}for(S=r(y,S);A<w.length;A++)C=m(S,y,A,w[A],k),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?A:C.key),b=s(C,b,A),j===null?_=C:j.sibling=C,j=C);return e&&S.forEach(function(M){return t(y,M)}),Dn&&Vl(y,A),_}function v(y,b,w,k){var _=Nf(w);if(typeof _!="function")throw Error($e(150));if(w=_.call(w),w==null)throw Error($e(151));for(var j=_=null,S=b,A=b=0,C=null,T=w.next();S!==null&&!T.done;A++,T=w.next()){S.index>A?(C=S,S=null):C=S.sibling;var M=h(y,S,T.value,k);if(M===null){S===null&&(S=C);break}e&&S&&M.alternate===null&&t(y,S),b=s(M,b,A),j===null?_=M:j.sibling=M,j=M,S=C}if(T.done)return n(y,S),Dn&&Vl(y,A),_;if(S===null){for(;!T.done;A++,T=w.next())T=d(y,T.value,k),T!==null&&(b=s(T,b,A),j===null?_=T:j.sibling=T,j=T);return Dn&&Vl(y,A),_}for(S=r(y,S);!T.done;A++,T=w.next())T=m(S,y,A,T.value,k),T!==null&&(e&&T.alternate!==null&&S.delete(T.key===null?A:T.key),b=s(T,b,A),j===null?_=T:j.sibling=T,j=T);return e&&S.forEach(function(F){return t(y,F)}),Dn&&Vl(y,A),_}function x(y,b,w,k){if(typeof w=="object"&&w!==null&&w.type===Tu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Kp:e:{for(var _=w.key,j=b;j!==null;){if(j.key===_){if(_=w.type,_===Tu){if(j.tag===7){n(y,j.sibling),b=a(j,w.props.children),b.return=y,y=b;break e}}else if(j.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Uo&&IE(_)===j.type){n(y,j.sibling),b=a(j,w.props),b.ref=Tf(y,j,w),b.return=y,y=b;break e}n(y,j);break}else t(y,j);j=j.sibling}w.type===Tu?(b=xc(w.props.children,y.mode,k,w.key),b.return=y,y=b):(k=iv(w.type,w.key,w.props,null,y.mode,k),k.ref=Tf(y,b,w),k.return=y,y=k)}return o(y);case Pu:e:{for(j=w.key;b!==null;){if(b.key===j)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(y,b.sibling),b=a(b,w.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else t(y,b);b=b.sibling}b=Y0(w,y.mode,k),b.return=y,y=b}return o(y);case Uo:return j=w._init,x(y,b,j(w._payload),k)}if(ah(w))return g(y,b,w,k);if(Nf(w))return v(y,b,w,k);ag(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(y,b.sibling),b=a(b,w),b.return=y,y=b):(n(y,b),b=G0(w,y.mode,k),b.return=y,y=b),o(y)):n(y,b)}return x}var bd=h$(!0),m$=h$(!1),Tv=Nl(null),Ov=null,Fu=null,jS=null;function _S(){jS=Fu=Ov=null}function kS(e){var t=Tv.current;Pn(Tv),e._currentValue=t}function i1(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xu(e,t){Ov=e,jS=Fu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Sa=!0),e.firstContext=null)}function xi(e){var t=e._currentValue;if(jS!==e)if(e={context:e,memoizedValue:t,next:null},Fu===null){if(Ov===null)throw Error($e(308));Fu=e,Ov.dependencies={lanes:0,firstContext:e}}else Fu=Fu.next=e;return t}var ic=null;function SS(e){ic===null?ic=[e]:ic.push(e)}function p$(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,SS(t)):(n.next=a.next,a.next=n),t.interleaved=n,uo(e,r)}function uo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var zo=!1;function NS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g$(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function to(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ll(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Qt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,uo(e,n)}return a=r.interleaved,a===null?(t.next=t,SS(r)):(t.next=a.next,a.next=t),r.interleaved=t,uo(e,n)}function Zg(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dS(e,n)}}function RE(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?a=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?a=s=t:s=s.next=t}else a=s=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Iv(e,t,n,r){var a=e.updateQueue;zo=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(s!==null){var d=a.baseState;o=0,f=u=c=null,l=s;do{var h=l.lane,m=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(h=t,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(m,d,h):g,h==null)break e;d=Un({},d,h);break e;case 2:zo=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=m,c=d):f=f.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(f===null&&(c=d),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=f,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else s===null&&(a.shared.lanes=0);kc|=o,e.lanes=o,e.memoizedState=d}}function ME(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error($e(191,a));a.call(r)}}}var sp={},_s=Nl(sp),Wh=Nl(sp),Hh=Nl(sp);function sc(e){if(e===sp)throw Error($e(174));return e}function CS(e,t){switch(_n(Hh,t),_n(Wh,e),_n(_s,sp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fj(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Fj(t,e)}Pn(_s),_n(_s,t)}function wd(){Pn(_s),Pn(Wh),Pn(Hh)}function v$(e){sc(Hh.current);var t=sc(_s.current),n=Fj(t,e.type);t!==n&&(_n(Wh,e),_n(_s,n))}function AS(e){Wh.current===e&&(Pn(_s),Pn(Wh))}var Fn=Nl(0);function Rv(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var z0=[];function ES(){for(var e=0;e<z0.length;e++)z0[e]._workInProgressVersionPrimary=null;z0.length=0}var ev=wo.ReactCurrentDispatcher,q0=wo.ReactCurrentBatchConfig,_c=0,Bn=null,fr=null,br=null,Mv=!1,xh=!1,Vh=0,f7=0;function Fr(){throw Error($e(321))}function PS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ji(e[n],t[n]))return!1;return!0}function TS(e,t,n,r,a,s){if(_c=s,Bn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ev.current=e===null||e.memoizedState===null?g7:v7,e=n(r,a),xh){s=0;do{if(xh=!1,Vh=0,25<=s)throw Error($e(301));s+=1,br=fr=null,t.updateQueue=null,ev.current=x7,e=n(r,a)}while(xh)}if(ev.current=Dv,t=fr!==null&&fr.next!==null,_c=0,br=fr=Bn=null,Mv=!1,t)throw Error($e(300));return e}function OS(){var e=Vh!==0;return Vh=0,e}function cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?Bn.memoizedState=br=e:br=br.next=e,br}function yi(){if(fr===null){var e=Bn.alternate;e=e!==null?e.memoizedState:null}else e=fr.next;var t=br===null?Bn.memoizedState:br.next;if(t!==null)br=t,fr=e;else{if(e===null)throw Error($e(310));fr=e,e={memoizedState:fr.memoizedState,baseState:fr.baseState,baseQueue:fr.baseQueue,queue:fr.queue,next:null},br===null?Bn.memoizedState=br=e:br=br.next=e}return br}function Kh(e,t){return typeof t=="function"?t(e):t}function W0(e){var t=yi(),n=t.queue;if(n===null)throw Error($e(311));n.lastRenderedReducer=e;var r=fr,a=r.baseQueue,s=n.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}r.baseQueue=a=s,n.pending=null}if(a!==null){s=a.next,r=r.baseState;var l=o=null,c=null,u=s;do{var f=u.lane;if((_c&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=r):c=c.next=d,Bn.lanes|=f,kc|=f}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=l,Ji(r,t.memoizedState)||(Sa=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do s=a.lane,Bn.lanes|=s,kc|=s,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function H0(e){var t=yi(),n=t.queue;if(n===null)throw Error($e(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do s=e(s,o.action),o=o.next;while(o!==a);Ji(s,t.memoizedState)||(Sa=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function x$(){}function y$(e,t){var n=Bn,r=yi(),a=t(),s=!Ji(r.memoizedState,a);if(s&&(r.memoizedState=a,Sa=!0),r=r.queue,IS(j$.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||br!==null&&br.memoizedState.tag&1){if(n.flags|=2048,Gh(9,w$.bind(null,n,r,a,t),void 0,null),jr===null)throw Error($e(349));_c&30||b$(n,t,a)}return a}function b$(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Bn.updateQueue,t===null?(t={lastEffect:null,stores:null},Bn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function w$(e,t,n,r){t.value=n,t.getSnapshot=r,_$(t)&&k$(e)}function j$(e,t,n){return n(function(){_$(t)&&k$(e)})}function _$(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ji(e,n)}catch{return!0}}function k$(e){var t=uo(e,1);t!==null&&Gi(t,e,1,-1)}function DE(e){var t=cs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kh,lastRenderedState:e},t.queue=e,e=e.dispatch=p7.bind(null,Bn,e),[t.memoizedState,e]}function Gh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Bn.updateQueue,t===null?(t={lastEffect:null,stores:null},Bn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function S$(){return yi().memoizedState}function tv(e,t,n,r){var a=cs();Bn.flags|=e,a.memoizedState=Gh(1|t,n,void 0,r===void 0?null:r)}function vy(e,t,n,r){var a=yi();r=r===void 0?null:r;var s=void 0;if(fr!==null){var o=fr.memoizedState;if(s=o.destroy,r!==null&&PS(r,o.deps)){a.memoizedState=Gh(t,n,s,r);return}}Bn.flags|=e,a.memoizedState=Gh(1|t,n,s,r)}function $E(e,t){return tv(8390656,8,e,t)}function IS(e,t){return vy(2048,8,e,t)}function N$(e,t){return vy(4,2,e,t)}function C$(e,t){return vy(4,4,e,t)}function A$(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function E$(e,t,n){return n=n!=null?n.concat([e]):null,vy(4,4,A$.bind(null,t,e),n)}function RS(){}function P$(e,t){var n=yi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&PS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function T$(e,t){var n=yi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&PS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function O$(e,t,n){return _c&21?(Ji(n,t)||(n=$D(),Bn.lanes|=n,kc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Sa=!0),e.memoizedState=n)}function h7(e,t){var n=hn;hn=n!==0&&4>n?n:4,e(!0);var r=q0.transition;q0.transition={};try{e(!1),t()}finally{hn=n,q0.transition=r}}function I$(){return yi().memoizedState}function m7(e,t,n){var r=ul(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},R$(e))M$(t,n);else if(n=p$(e,t,n,r),n!==null){var a=ca();Gi(n,e,r,a),D$(n,t,r)}}function p7(e,t,n){var r=ul(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(R$(e))M$(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,l=s(o,n);if(a.hasEagerState=!0,a.eagerState=l,Ji(l,o)){var c=t.interleaved;c===null?(a.next=a,SS(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=p$(e,t,a,r),n!==null&&(a=ca(),Gi(n,e,r,a),D$(n,t,r))}}function R$(e){var t=e.alternate;return e===Bn||t!==null&&t===Bn}function M$(e,t){xh=Mv=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function D$(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,dS(e,n)}}var Dv={readContext:xi,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useInsertionEffect:Fr,useLayoutEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useMutableSource:Fr,useSyncExternalStore:Fr,useId:Fr,unstable_isNewReconciler:!1},g7={readContext:xi,useCallback:function(e,t){return cs().memoizedState=[e,t===void 0?null:t],e},useContext:xi,useEffect:$E,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,tv(4194308,4,A$.bind(null,t,e),n)},useLayoutEffect:function(e,t){return tv(4194308,4,e,t)},useInsertionEffect:function(e,t){return tv(4,2,e,t)},useMemo:function(e,t){var n=cs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=cs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=m7.bind(null,Bn,e),[r.memoizedState,e]},useRef:function(e){var t=cs();return e={current:e},t.memoizedState=e},useState:DE,useDebugValue:RS,useDeferredValue:function(e){return cs().memoizedState=e},useTransition:function(){var e=DE(!1),t=e[0];return e=h7.bind(null,e[1]),cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Bn,a=cs();if(Dn){if(n===void 0)throw Error($e(407));n=n()}else{if(n=t(),jr===null)throw Error($e(349));_c&30||b$(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,$E(j$.bind(null,r,s,e),[e]),r.flags|=2048,Gh(9,w$.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=cs(),t=jr.identifierPrefix;if(Dn){var n=Gs,r=Ks;n=(r&~(1<<32-Ki(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Vh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=f7++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},v7={readContext:xi,useCallback:P$,useContext:xi,useEffect:IS,useImperativeHandle:E$,useInsertionEffect:N$,useLayoutEffect:C$,useMemo:T$,useReducer:W0,useRef:S$,useState:function(){return W0(Kh)},useDebugValue:RS,useDeferredValue:function(e){var t=yi();return O$(t,fr.memoizedState,e)},useTransition:function(){var e=W0(Kh)[0],t=yi().memoizedState;return[e,t]},useMutableSource:x$,useSyncExternalStore:y$,useId:I$,unstable_isNewReconciler:!1},x7={readContext:xi,useCallback:P$,useContext:xi,useEffect:IS,useImperativeHandle:E$,useInsertionEffect:N$,useLayoutEffect:C$,useMemo:T$,useReducer:H0,useRef:S$,useState:function(){return H0(Kh)},useDebugValue:RS,useDeferredValue:function(e){var t=yi();return fr===null?t.memoizedState=e:O$(t,fr.memoizedState,e)},useTransition:function(){var e=H0(Kh)[0],t=yi().memoizedState;return[e,t]},useMutableSource:x$,useSyncExternalStore:y$,useId:I$,unstable_isNewReconciler:!1};function Ri(e,t){if(e&&e.defaultProps){t=Un({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function s1(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Un({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var xy={isMounted:function(e){return(e=e._reactInternals)?Vc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ca(),a=ul(e),s=to(r,a);s.payload=t,n!=null&&(s.callback=n),t=ll(e,s,a),t!==null&&(Gi(t,e,a,r),Zg(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ca(),a=ul(e),s=to(r,a);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=ll(e,s,a),t!==null&&(Gi(t,e,a,r),Zg(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ca(),r=ul(e),a=to(n,r);a.tag=2,t!=null&&(a.callback=t),t=ll(e,a,r),t!==null&&(Gi(t,e,r,n),Zg(t,e,r))}};function LE(e,t,n,r,a,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Bh(n,r)||!Bh(a,s):!0}function $$(e,t,n){var r=!1,a=vl,s=t.contextType;return typeof s=="object"&&s!==null?s=xi(s):(a=Pa(t)?wc:Yr.current,r=t.contextTypes,s=(r=r!=null)?xd(e,a):vl),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=xy,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function FE(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xy.enqueueReplaceState(t,t.state,null)}function o1(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},NS(e);var s=t.contextType;typeof s=="object"&&s!==null?a.context=xi(s):(s=Pa(t)?wc:Yr.current,a.context=xd(e,s)),a.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(s1(e,t,s,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&xy.enqueueReplaceState(a,a.state,null),Iv(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function jd(e,t){try{var n="",r=t;do n+=VW(r),r=r.return;while(r);var a=n}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:a,digest:null}}function V0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function l1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var y7=typeof WeakMap=="function"?WeakMap:Map;function L$(e,t,n){n=to(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Lv||(Lv=!0,x1=r),l1(e,t)},n}function F$(e,t,n){n=to(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){l1(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){l1(e,t),typeof r!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function BE(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new y7;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=I7.bind(null,e,t,n),t.then(e,e))}function UE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function zE(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=to(-1,1),t.tag=2,ll(n,t,1))),n.lanes|=1),e)}var b7=wo.ReactCurrentOwner,Sa=!1;function aa(e,t,n,r){t.child=e===null?m$(t,null,n,r):bd(t,e.child,n,r)}function qE(e,t,n,r,a){n=n.render;var s=t.ref;return Xu(t,a),r=TS(e,t,n,r,s,a),n=OS(),e!==null&&!Sa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,fo(e,t,a)):(Dn&&n&&yS(t),t.flags|=1,aa(e,t,r,a),t.child)}function WE(e,t,n,r,a){if(e===null){var s=n.type;return typeof s=="function"&&!zS(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,B$(e,t,s,r,a)):(e=iv(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&a)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Bh,n(o,r)&&e.ref===t.ref)return fo(e,t,a)}return t.flags|=1,e=dl(s,r),e.ref=t.ref,e.return=t,t.child=e}function B$(e,t,n,r,a){if(e!==null){var s=e.memoizedProps;if(Bh(s,r)&&e.ref===t.ref)if(Sa=!1,t.pendingProps=r=s,(e.lanes&a)!==0)e.flags&131072&&(Sa=!0);else return t.lanes=e.lanes,fo(e,t,a)}return c1(e,t,n,r,a)}function U$(e,t,n){var r=t.pendingProps,a=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(Uu,Ba),Ba|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_n(Uu,Ba),Ba|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_n(Uu,Ba),Ba|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,_n(Uu,Ba),Ba|=r;return aa(e,t,a,n),t.child}function z$(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function c1(e,t,n,r,a){var s=Pa(n)?wc:Yr.current;return s=xd(t,s),Xu(t,a),n=TS(e,t,n,r,s,a),r=OS(),e!==null&&!Sa?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,fo(e,t,a)):(Dn&&r&&yS(t),t.flags|=1,aa(e,t,n,a),t.child)}function HE(e,t,n,r,a){if(Pa(n)){var s=!0;Av(t)}else s=!1;if(Xu(t,a),t.stateNode===null)nv(e,t),$$(t,n,r),o1(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=xi(u):(u=Pa(n)?wc:Yr.current,u=xd(t,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&FE(t,o,r,u),zo=!1;var h=t.memoizedState;o.state=h,Iv(t,r,o,a),c=t.memoizedState,l!==r||h!==c||Ea.current||zo?(typeof f=="function"&&(s1(t,n,f,r),c=t.memoizedState),(l=zo||LE(t,n,l,r,h,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,g$(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ri(t.type,l),o.props=u,d=t.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=xi(c):(c=Pa(n)?wc:Yr.current,c=xd(t,c));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||h!==c)&&FE(t,o,r,c),zo=!1,h=t.memoizedState,o.state=h,Iv(t,r,o,a);var g=t.memoizedState;l!==d||h!==g||Ea.current||zo?(typeof m=="function"&&(s1(t,n,m,r),g=t.memoizedState),(u=zo||LE(t,n,u,r,h,g,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return u1(e,t,n,r,s,a)}function u1(e,t,n,r,a,s){z$(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&PE(t,n,!1),fo(e,t,s);r=t.stateNode,b7.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=bd(t,e.child,null,s),t.child=bd(t,null,l,s)):aa(e,t,l,s),t.memoizedState=r.state,a&&PE(t,n,!0),t.child}function q$(e){var t=e.stateNode;t.pendingContext?EE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&EE(e,t.context,!1),CS(e,t.containerInfo)}function VE(e,t,n,r,a){return yd(),wS(a),t.flags|=256,aa(e,t,n,r),t.child}var d1={dehydrated:null,treeContext:null,retryLane:0};function f1(e){return{baseLanes:e,cachePool:null,transitions:null}}function W$(e,t,n){var r=t.pendingProps,a=Fn.current,s=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),_n(Fn,a&1),e===null)return a1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=wy(o,r,0,null),e=xc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=f1(n),t.memoizedState=d1,e):MS(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return w7(e,t,o,r,l,a,n);if(s){s=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=dl(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?s=dl(l,s):(s=xc(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?f1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=d1,r}return s=e.child,e=s.sibling,r=dl(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function MS(e,t){return t=wy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ig(e,t,n,r){return r!==null&&wS(r),bd(t,e.child,null,n),e=MS(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function w7(e,t,n,r,a,s,o){if(n)return t.flags&256?(t.flags&=-257,r=V0(Error($e(422))),ig(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=wy({mode:"visible",children:r.children},a,0,null),s=xc(s,a,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&bd(t,e.child,null,o),t.child.memoizedState=f1(o),t.memoizedState=d1,s);if(!(t.mode&1))return ig(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error($e(419)),r=V0(s,r,void 0),ig(e,t,o,r)}if(l=(o&e.childLanes)!==0,Sa||l){if(r=jr,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,uo(e,a),Gi(r,e,a,-1))}return US(),r=V0(Error($e(421))),ig(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=R7.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,Ha=ol(a.nextSibling),Va=t,Dn=!0,zi=null,e!==null&&(li[ci++]=Ks,li[ci++]=Gs,li[ci++]=jc,Ks=e.id,Gs=e.overflow,jc=t),t=MS(t,r.children),t.flags|=4096,t)}function KE(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),i1(e.return,t,n)}function K0(e,t,n,r,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function H$(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(aa(e,t,r.children,n),r=Fn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&KE(e,n,t);else if(e.tag===19)KE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_n(Fn,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Rv(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),K0(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Rv(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}K0(t,!0,n,null,s);break;case"together":K0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),kc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($e(153));if(t.child!==null){for(e=t.child,n=dl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=dl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function j7(e,t,n){switch(t.tag){case 3:q$(t),yd();break;case 5:v$(t);break;case 1:Pa(t.type)&&Av(t);break;case 4:CS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;_n(Tv,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(_n(Fn,Fn.current&1),t.flags|=128,null):n&t.child.childLanes?W$(e,t,n):(_n(Fn,Fn.current&1),e=fo(e,t,n),e!==null?e.sibling:null);_n(Fn,Fn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return H$(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),_n(Fn,Fn.current),r)break;return null;case 22:case 23:return t.lanes=0,U$(e,t,n)}return fo(e,t,n)}var V$,h1,K$,G$;V$=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};h1=function(){};K$=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,sc(_s.current);var s=null;switch(n){case"input":a=Mj(e,a),r=Mj(e,r),s=[];break;case"select":a=Un({},a,{value:void 0}),r=Un({},r,{value:void 0}),s=[];break;case"textarea":a=Lj(e,a),r=Lj(e,r),s=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Nv)}Bj(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ih.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ih.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Cn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};G$=function(e,t,n,r){n!==r&&(t.flags|=4)};function Of(e,t){if(!Dn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Br(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _7(e,t,n){var r=t.pendingProps;switch(bS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(t),null;case 1:return Pa(t.type)&&Cv(),Br(t),null;case 3:return r=t.stateNode,wd(),Pn(Ea),Pn(Yr),ES(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(rg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zi!==null&&(w1(zi),zi=null))),h1(e,t),Br(t),null;case 5:AS(t);var a=sc(Hh.current);if(n=t.type,e!==null&&t.stateNode!=null)K$(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error($e(166));return Br(t),null}if(e=sc(_s.current),rg(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ps]=t,r[qh]=s,e=(t.mode&1)!==0,n){case"dialog":Cn("cancel",r),Cn("close",r);break;case"iframe":case"object":case"embed":Cn("load",r);break;case"video":case"audio":for(a=0;a<sh.length;a++)Cn(sh[a],r);break;case"source":Cn("error",r);break;case"img":case"image":case"link":Cn("error",r),Cn("load",r);break;case"details":Cn("toggle",r);break;case"input":nE(r,s),Cn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Cn("invalid",r);break;case"textarea":aE(r,s),Cn("invalid",r)}Bj(n,s),a=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ng(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ng(r.textContent,l,e),a=["children",""+l]):Ih.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Cn("scroll",r)}switch(n){case"input":Gp(r),rE(r,s,!0);break;case"textarea":Gp(r),iE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Nv)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ps]=t,e[qh]=r,V$(e,t,!1,!1),t.stateNode=e;e:{switch(o=Uj(n,r),n){case"dialog":Cn("cancel",e),Cn("close",e),a=r;break;case"iframe":case"object":case"embed":Cn("load",e),a=r;break;case"video":case"audio":for(a=0;a<sh.length;a++)Cn(sh[a],e);a=r;break;case"source":Cn("error",e),a=r;break;case"img":case"image":case"link":Cn("error",e),Cn("load",e),a=r;break;case"details":Cn("toggle",e),a=r;break;case"input":nE(e,r),a=Mj(e,r),Cn("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Un({},r,{value:void 0}),Cn("invalid",e);break;case"textarea":aE(e,r),a=Lj(e,r),Cn("invalid",e);break;default:a=r}Bj(n,a),l=a;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?SD(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_D(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Rh(e,c):typeof c=="number"&&Rh(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ih.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Cn("scroll",e):c!=null&&iS(e,s,c,o))}switch(n){case"input":Gp(e),rE(e,r,!1);break;case"textarea":Gp(e),iE(e);break;case"option":r.value!=null&&e.setAttribute("value",""+gl(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Vu(e,!!r.multiple,s,!1):r.defaultValue!=null&&Vu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Nv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Br(t),null;case 6:if(e&&t.stateNode!=null)G$(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error($e(166));if(n=sc(Hh.current),sc(_s.current),rg(t)){if(r=t.stateNode,n=t.memoizedProps,r[ps]=t,(s=r.nodeValue!==n)&&(e=Va,e!==null))switch(e.tag){case 3:ng(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ng(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ps]=t,t.stateNode=r}return Br(t),null;case 13:if(Pn(Fn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Dn&&Ha!==null&&t.mode&1&&!(t.flags&128))f$(),yd(),t.flags|=98560,s=!1;else if(s=rg(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error($e(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($e(317));s[ps]=t}else yd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Br(t),s=!1}else zi!==null&&(w1(zi),zi=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Fn.current&1?hr===0&&(hr=3):US())),t.updateQueue!==null&&(t.flags|=4),Br(t),null);case 4:return wd(),h1(e,t),e===null&&Uh(t.stateNode.containerInfo),Br(t),null;case 10:return kS(t.type._context),Br(t),null;case 17:return Pa(t.type)&&Cv(),Br(t),null;case 19:if(Pn(Fn),s=t.memoizedState,s===null)return Br(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Of(s,!1);else{if(hr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Rv(e),o!==null){for(t.flags|=128,Of(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _n(Fn,Fn.current&1|2),t.child}e=e.sibling}s.tail!==null&&Qn()>_d&&(t.flags|=128,r=!0,Of(s,!1),t.lanes=4194304)}else{if(!r)if(e=Rv(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Of(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Dn)return Br(t),null}else 2*Qn()-s.renderingStartTime>_d&&n!==1073741824&&(t.flags|=128,r=!0,Of(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Qn(),t.sibling=null,n=Fn.current,_n(Fn,r?n&1|2:n&1),t):(Br(t),null);case 22:case 23:return BS(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ba&1073741824&&(Br(t),t.subtreeFlags&6&&(t.flags|=8192)):Br(t),null;case 24:return null;case 25:return null}throw Error($e(156,t.tag))}function k7(e,t){switch(bS(t),t.tag){case 1:return Pa(t.type)&&Cv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wd(),Pn(Ea),Pn(Yr),ES(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return AS(t),null;case 13:if(Pn(Fn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($e(340));yd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pn(Fn),null;case 4:return wd(),null;case 10:return kS(t.type._context),null;case 22:case 23:return BS(),null;case 24:return null;default:return null}}var sg=!1,qr=!1,S7=typeof WeakSet=="function"?WeakSet:Set,ot=null;function Bu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wn(e,t,r)}else n.current=null}function m1(e,t,n){try{n()}catch(r){Wn(e,t,r)}}var GE=!1;function N7(e,t){if(Jj=_v,e=ZD(),xS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var m;d!==n||a!==0&&d.nodeType!==3||(l=o+a),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)h=d,d=m;for(;;){if(d===e)break t;if(h===n&&++u===a&&(l=o),h===s&&++f===r&&(c=o),(m=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qj={focusedElem:e,selectionRange:n},_v=!1,ot=t;ot!==null;)if(t=ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ot=e;else for(;ot!==null;){t=ot;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Ri(t.type,v),x);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($e(163))}}catch(k){Wn(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,ot=e;break}ot=t.return}return g=GE,GE=!1,g}function yh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,s!==void 0&&m1(t,n,s)}a=a.next}while(a!==r)}}function yy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function p1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Y$(e){var t=e.alternate;t!==null&&(e.alternate=null,Y$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ps],delete t[qh],delete t[t1],delete t[l7],delete t[c7])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function X$(e){return e.tag===5||e.tag===3||e.tag===4}function YE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||X$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function g1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Nv));else if(r!==4&&(e=e.child,e!==null))for(g1(e,t,n),e=e.sibling;e!==null;)g1(e,t,n),e=e.sibling}function v1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(v1(e,t,n),e=e.sibling;e!==null;)v1(e,t,n),e=e.sibling}var Ar=null,Fi=!1;function Eo(e,t,n){for(n=n.child;n!==null;)J$(e,t,n),n=n.sibling}function J$(e,t,n){if(js&&typeof js.onCommitFiberUnmount=="function")try{js.onCommitFiberUnmount(dy,n)}catch{}switch(n.tag){case 5:qr||Bu(n,t);case 6:var r=Ar,a=Fi;Ar=null,Eo(e,t,n),Ar=r,Fi=a,Ar!==null&&(Fi?(e=Ar,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ar.removeChild(n.stateNode));break;case 18:Ar!==null&&(Fi?(e=Ar,n=n.stateNode,e.nodeType===8?B0(e.parentNode,n):e.nodeType===1&&B0(e,n),Lh(e)):B0(Ar,n.stateNode));break;case 4:r=Ar,a=Fi,Ar=n.stateNode.containerInfo,Fi=!0,Eo(e,t,n),Ar=r,Fi=a;break;case 0:case 11:case 14:case 15:if(!qr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var s=a,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&m1(n,t,o),a=a.next}while(a!==r)}Eo(e,t,n);break;case 1:if(!qr&&(Bu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Wn(n,t,l)}Eo(e,t,n);break;case 21:Eo(e,t,n);break;case 22:n.mode&1?(qr=(r=qr)||n.memoizedState!==null,Eo(e,t,n),qr=r):Eo(e,t,n);break;default:Eo(e,t,n)}}function XE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new S7),t.forEach(function(r){var a=M7.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Ei(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ar=l.stateNode,Fi=!1;break e;case 3:Ar=l.stateNode.containerInfo,Fi=!0;break e;case 4:Ar=l.stateNode.containerInfo,Fi=!0;break e}l=l.return}if(Ar===null)throw Error($e(160));J$(s,o,a),Ar=null,Fi=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Wn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Q$(t,e),t=t.sibling}function Q$(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ei(t,e),os(e),r&4){try{yh(3,e,e.return),yy(3,e)}catch(v){Wn(e,e.return,v)}try{yh(5,e,e.return)}catch(v){Wn(e,e.return,v)}}break;case 1:Ei(t,e),os(e),r&512&&n!==null&&Bu(n,n.return);break;case 5:if(Ei(t,e),os(e),r&512&&n!==null&&Bu(n,n.return),e.flags&32){var a=e.stateNode;try{Rh(a,"")}catch(v){Wn(e,e.return,v)}}if(r&4&&(a=e.stateNode,a!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&bD(a,s),Uj(l,o);var u=Uj(l,s);for(o=0;o<c.length;o+=2){var f=c[o],d=c[o+1];f==="style"?SD(a,d):f==="dangerouslySetInnerHTML"?_D(a,d):f==="children"?Rh(a,d):iS(a,f,d,u)}switch(l){case"input":Dj(a,s);break;case"textarea":wD(a,s);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Vu(a,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?Vu(a,!!s.multiple,s.defaultValue,!0):Vu(a,!!s.multiple,s.multiple?[]:"",!1))}a[qh]=s}catch(v){Wn(e,e.return,v)}}break;case 6:if(Ei(t,e),os(e),r&4){if(e.stateNode===null)throw Error($e(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(v){Wn(e,e.return,v)}}break;case 3:if(Ei(t,e),os(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lh(t.containerInfo)}catch(v){Wn(e,e.return,v)}break;case 4:Ei(t,e),os(e);break;case 13:Ei(t,e),os(e),a=e.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(LS=Qn())),r&4&&XE(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(qr=(u=qr)||f,Ei(t,e),qr=u):Ei(t,e),os(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(ot=e,f=e.child;f!==null;){for(d=ot=f;ot!==null;){switch(h=ot,m=h.child,h.tag){case 0:case 11:case 14:case 15:yh(4,h,h.return);break;case 1:Bu(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Wn(r,n,v)}}break;case 5:Bu(h,h.return);break;case 22:if(h.memoizedState!==null){QE(d);continue}}m!==null?(m.return=h,ot=m):QE(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{a=d.stateNode,u?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=kD("display",o))}catch(v){Wn(e,e.return,v)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){Wn(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ei(t,e),os(e),r&4&&XE(e);break;case 21:break;default:Ei(t,e),os(e)}}function os(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(X$(n)){var r=n;break e}n=n.return}throw Error($e(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Rh(a,""),r.flags&=-33);var s=YE(e);v1(e,s,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=YE(e);g1(e,l,o);break;default:throw Error($e(161))}}catch(c){Wn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function C7(e,t,n){ot=e,Z$(e)}function Z$(e,t,n){for(var r=(e.mode&1)!==0;ot!==null;){var a=ot,s=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||sg;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||qr;l=sg;var u=qr;if(sg=o,(qr=c)&&!u)for(ot=a;ot!==null;)o=ot,c=o.child,o.tag===22&&o.memoizedState!==null?ZE(a):c!==null?(c.return=o,ot=c):ZE(a);for(;s!==null;)ot=s,Z$(s),s=s.sibling;ot=a,sg=l,qr=u}JE(e)}else a.subtreeFlags&8772&&s!==null?(s.return=a,ot=s):JE(e)}}function JE(e){for(;ot!==null;){var t=ot;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qr||yy(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!qr)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ri(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&ME(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ME(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Lh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($e(163))}qr||t.flags&512&&p1(t)}catch(h){Wn(t,t.return,h)}}if(t===e){ot=null;break}if(n=t.sibling,n!==null){n.return=t.return,ot=n;break}ot=t.return}}function QE(e){for(;ot!==null;){var t=ot;if(t===e){ot=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ot=n;break}ot=t.return}}function ZE(e){for(;ot!==null;){var t=ot;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yy(4,t)}catch(c){Wn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){Wn(t,a,c)}}var s=t.return;try{p1(t)}catch(c){Wn(t,s,c)}break;case 5:var o=t.return;try{p1(t)}catch(c){Wn(t,o,c)}}}catch(c){Wn(t,t.return,c)}if(t===e){ot=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ot=l;break}ot=t.return}}var A7=Math.ceil,$v=wo.ReactCurrentDispatcher,DS=wo.ReactCurrentOwner,mi=wo.ReactCurrentBatchConfig,Qt=0,jr=null,nr=null,Or=0,Ba=0,Uu=Nl(0),hr=0,Yh=null,kc=0,by=0,$S=0,bh=null,wa=null,LS=0,_d=1/0,zs=null,Lv=!1,x1=null,cl=null,og=!1,tl=null,Fv=0,wh=0,y1=null,rv=-1,av=0;function ca(){return Qt&6?Qn():rv!==-1?rv:rv=Qn()}function ul(e){return e.mode&1?Qt&2&&Or!==0?Or&-Or:d7.transition!==null?(av===0&&(av=$D()),av):(e=hn,e!==0||(e=window.event,e=e===void 0?16:WD(e.type)),e):1}function Gi(e,t,n,r){if(50<wh)throw wh=0,y1=null,Error($e(185));rp(e,n,r),(!(Qt&2)||e!==jr)&&(e===jr&&(!(Qt&2)&&(by|=n),hr===4&&Ho(e,Or)),Ta(e,r),n===1&&Qt===0&&!(t.mode&1)&&(_d=Qn()+500,gy&&Cl()))}function Ta(e,t){var n=e.callbackNode;dH(e,t);var r=jv(e,e===jr?Or:0);if(r===0)n!==null&&lE(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&lE(n),t===1)e.tag===0?u7(eP.bind(null,e)):c$(eP.bind(null,e)),s7(function(){!(Qt&6)&&Cl()}),n=null;else{switch(LD(r)){case 1:n=uS;break;case 4:n=MD;break;case 16:n=wv;break;case 536870912:n=DD;break;default:n=wv}n=oL(n,eL.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function eL(e,t){if(rv=-1,av=0,Qt&6)throw Error($e(327));var n=e.callbackNode;if(Ju()&&e.callbackNode!==n)return null;var r=jv(e,e===jr?Or:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Bv(e,r);else{t=r;var a=Qt;Qt|=2;var s=nL();(jr!==e||Or!==t)&&(zs=null,_d=Qn()+500,vc(e,t));do try{T7();break}catch(l){tL(e,l)}while(!0);_S(),$v.current=s,Qt=a,nr!==null?t=0:(jr=null,Or=0,t=hr)}if(t!==0){if(t===2&&(a=Vj(e),a!==0&&(r=a,t=b1(e,a))),t===1)throw n=Yh,vc(e,0),Ho(e,r),Ta(e,Qn()),n;if(t===6)Ho(e,r);else{if(a=e.current.alternate,!(r&30)&&!E7(a)&&(t=Bv(e,r),t===2&&(s=Vj(e),s!==0&&(r=s,t=b1(e,s))),t===1))throw n=Yh,vc(e,0),Ho(e,r),Ta(e,Qn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error($e(345));case 2:Kl(e,wa,zs);break;case 3:if(Ho(e,r),(r&130023424)===r&&(t=LS+500-Qn(),10<t)){if(jv(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){ca(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=e1(Kl.bind(null,e,wa,zs),t);break}Kl(e,wa,zs);break;case 4:if(Ho(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Ki(r);s=1<<o,o=t[o],o>a&&(a=o),r&=~s}if(r=a,r=Qn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*A7(r/1960))-r,10<r){e.timeoutHandle=e1(Kl.bind(null,e,wa,zs),r);break}Kl(e,wa,zs);break;case 5:Kl(e,wa,zs);break;default:throw Error($e(329))}}}return Ta(e,Qn()),e.callbackNode===n?eL.bind(null,e):null}function b1(e,t){var n=bh;return e.current.memoizedState.isDehydrated&&(vc(e,t).flags|=256),e=Bv(e,t),e!==2&&(t=wa,wa=n,t!==null&&w1(t)),e}function w1(e){wa===null?wa=e:wa.push.apply(wa,e)}function E7(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!Ji(s(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ho(e,t){for(t&=~$S,t&=~by,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ki(t),r=1<<n;e[n]=-1,t&=~r}}function eP(e){if(Qt&6)throw Error($e(327));Ju();var t=jv(e,0);if(!(t&1))return Ta(e,Qn()),null;var n=Bv(e,t);if(e.tag!==0&&n===2){var r=Vj(e);r!==0&&(t=r,n=b1(e,r))}if(n===1)throw n=Yh,vc(e,0),Ho(e,t),Ta(e,Qn()),n;if(n===6)throw Error($e(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kl(e,wa,zs),Ta(e,Qn()),null}function FS(e,t){var n=Qt;Qt|=1;try{return e(t)}finally{Qt=n,Qt===0&&(_d=Qn()+500,gy&&Cl())}}function Sc(e){tl!==null&&tl.tag===0&&!(Qt&6)&&Ju();var t=Qt;Qt|=1;var n=mi.transition,r=hn;try{if(mi.transition=null,hn=1,e)return e()}finally{hn=r,mi.transition=n,Qt=t,!(Qt&6)&&Cl()}}function BS(){Ba=Uu.current,Pn(Uu)}function vc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,i7(n)),nr!==null)for(n=nr.return;n!==null;){var r=n;switch(bS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cv();break;case 3:wd(),Pn(Ea),Pn(Yr),ES();break;case 5:AS(r);break;case 4:wd();break;case 13:Pn(Fn);break;case 19:Pn(Fn);break;case 10:kS(r.type._context);break;case 22:case 23:BS()}n=n.return}if(jr=e,nr=e=dl(e.current,null),Or=Ba=t,hr=0,Yh=null,$S=by=kc=0,wa=bh=null,ic!==null){for(t=0;t<ic.length;t++)if(n=ic[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=a,r.next=o}n.pending=r}ic=null}return e}function tL(e,t){do{var n=nr;try{if(_S(),ev.current=Dv,Mv){for(var r=Bn.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Mv=!1}if(_c=0,br=fr=Bn=null,xh=!1,Vh=0,DS.current=null,n===null||n.return===null){hr=1,Yh=t,nr=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Or,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=UE(o);if(m!==null){m.flags&=-257,zE(m,o,l,s,t),m.mode&1&&BE(s,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(c),t.updateQueue=v}else g.add(c);break e}else{if(!(t&1)){BE(s,u,t),US();break e}c=Error($e(426))}}else if(Dn&&l.mode&1){var x=UE(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),zE(x,o,l,s,t),wS(jd(c,l));break e}}s=c=jd(c,l),hr!==4&&(hr=2),bh===null?bh=[s]:bh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=L$(s,c,t);RE(s,y);break e;case 1:l=c;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(cl===null||!cl.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t;var k=F$(s,l,t);RE(s,k);break e}}s=s.return}while(s!==null)}aL(n)}catch(_){t=_,nr===n&&n!==null&&(nr=n=n.return);continue}break}while(!0)}function nL(){var e=$v.current;return $v.current=Dv,e===null?Dv:e}function US(){(hr===0||hr===3||hr===2)&&(hr=4),jr===null||!(kc&268435455)&&!(by&268435455)||Ho(jr,Or)}function Bv(e,t){var n=Qt;Qt|=2;var r=nL();(jr!==e||Or!==t)&&(zs=null,vc(e,t));do try{P7();break}catch(a){tL(e,a)}while(!0);if(_S(),Qt=n,$v.current=r,nr!==null)throw Error($e(261));return jr=null,Or=0,hr}function P7(){for(;nr!==null;)rL(nr)}function T7(){for(;nr!==null&&!nH();)rL(nr)}function rL(e){var t=sL(e.alternate,e,Ba);e.memoizedProps=e.pendingProps,t===null?aL(e):nr=t,DS.current=null}function aL(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=k7(n,t),n!==null){n.flags&=32767,nr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{hr=6,nr=null;return}}else if(n=_7(n,t,Ba),n!==null){nr=n;return}if(t=t.sibling,t!==null){nr=t;return}nr=t=e}while(t!==null);hr===0&&(hr=5)}function Kl(e,t,n){var r=hn,a=mi.transition;try{mi.transition=null,hn=1,O7(e,t,n,r)}finally{mi.transition=a,hn=r}return null}function O7(e,t,n,r){do Ju();while(tl!==null);if(Qt&6)throw Error($e(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error($e(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(fH(e,s),e===jr&&(nr=jr=null,Or=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||og||(og=!0,oL(wv,function(){return Ju(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mi.transition,mi.transition=null;var o=hn;hn=1;var l=Qt;Qt|=4,DS.current=null,N7(e,n),Q$(n,e),QH(Qj),_v=!!Jj,Qj=Jj=null,e.current=n,C7(n),rH(),Qt=l,hn=o,mi.transition=s}else e.current=n;if(og&&(og=!1,tl=e,Fv=a),s=e.pendingLanes,s===0&&(cl=null),sH(n.stateNode),Ta(e,Qn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Lv)throw Lv=!1,e=x1,x1=null,e;return Fv&1&&e.tag!==0&&Ju(),s=e.pendingLanes,s&1?e===y1?wh++:(wh=0,y1=e):wh=0,Cl(),null}function Ju(){if(tl!==null){var e=LD(Fv),t=mi.transition,n=hn;try{if(mi.transition=null,hn=16>e?16:e,tl===null)var r=!1;else{if(e=tl,tl=null,Fv=0,Qt&6)throw Error($e(331));var a=Qt;for(Qt|=4,ot=e.current;ot!==null;){var s=ot,o=s.child;if(ot.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ot=u;ot!==null;){var f=ot;switch(f.tag){case 0:case 11:case 15:yh(8,f,s)}var d=f.child;if(d!==null)d.return=f,ot=d;else for(;ot!==null;){f=ot;var h=f.sibling,m=f.return;if(Y$(f),f===u){ot=null;break}if(h!==null){h.return=m,ot=h;break}ot=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}ot=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ot=o;else e:for(;ot!==null;){if(s=ot,s.flags&2048)switch(s.tag){case 0:case 11:case 15:yh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ot=y;break e}ot=s.return}}var b=e.current;for(ot=b;ot!==null;){o=ot;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ot=w;else e:for(o=b;ot!==null;){if(l=ot,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:yy(9,l)}}catch(_){Wn(l,l.return,_)}if(l===o){ot=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,ot=k;break e}ot=l.return}}if(Qt=a,Cl(),js&&typeof js.onPostCommitFiberRoot=="function")try{js.onPostCommitFiberRoot(dy,e)}catch{}r=!0}return r}finally{hn=n,mi.transition=t}}return!1}function tP(e,t,n){t=jd(n,t),t=L$(e,t,1),e=ll(e,t,1),t=ca(),e!==null&&(rp(e,1,t),Ta(e,t))}function Wn(e,t,n){if(e.tag===3)tP(e,e,n);else for(;t!==null;){if(t.tag===3){tP(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cl===null||!cl.has(r))){e=jd(n,e),e=F$(t,e,1),t=ll(t,e,1),e=ca(),t!==null&&(rp(t,1,e),Ta(t,e));break}}t=t.return}}function I7(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ca(),e.pingedLanes|=e.suspendedLanes&n,jr===e&&(Or&n)===n&&(hr===4||hr===3&&(Or&130023424)===Or&&500>Qn()-LS?vc(e,0):$S|=n),Ta(e,t)}function iL(e,t){t===0&&(e.mode&1?(t=Jp,Jp<<=1,!(Jp&130023424)&&(Jp=4194304)):t=1);var n=ca();e=uo(e,t),e!==null&&(rp(e,t,n),Ta(e,n))}function R7(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),iL(e,n)}function M7(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error($e(314))}r!==null&&r.delete(t),iL(e,n)}var sL;sL=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ea.current)Sa=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Sa=!1,j7(e,t,n);Sa=!!(e.flags&131072)}else Sa=!1,Dn&&t.flags&1048576&&u$(t,Pv,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;nv(e,t),e=t.pendingProps;var a=xd(t,Yr.current);Xu(t,n),a=TS(null,t,r,e,a,n);var s=OS();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pa(r)?(s=!0,Av(t)):s=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,NS(t),a.updater=xy,t.stateNode=a,a._reactInternals=t,o1(t,r,e,n),t=u1(null,t,r,!0,s,n)):(t.tag=0,Dn&&s&&yS(t),aa(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(nv(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=$7(r),e=Ri(r,e),a){case 0:t=c1(null,t,r,e,n);break e;case 1:t=HE(null,t,r,e,n);break e;case 11:t=qE(null,t,r,e,n);break e;case 14:t=WE(null,t,r,Ri(r.type,e),n);break e}throw Error($e(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ri(r,a),c1(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ri(r,a),HE(e,t,r,a,n);case 3:e:{if(q$(t),e===null)throw Error($e(387));r=t.pendingProps,s=t.memoizedState,a=s.element,g$(e,t),Iv(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){a=jd(Error($e(423)),t),t=VE(e,t,r,n,a);break e}else if(r!==a){a=jd(Error($e(424)),t),t=VE(e,t,r,n,a);break e}else for(Ha=ol(t.stateNode.containerInfo.firstChild),Va=t,Dn=!0,zi=null,n=m$(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yd(),r===a){t=fo(e,t,n);break e}aa(e,t,r,n)}t=t.child}return t;case 5:return v$(t),e===null&&a1(t),r=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,o=a.children,Zj(r,a)?o=null:s!==null&&Zj(r,s)&&(t.flags|=32),z$(e,t),aa(e,t,o,n),t.child;case 6:return e===null&&a1(t),null;case 13:return W$(e,t,n);case 4:return CS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=bd(t,null,r,n):aa(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ri(r,a),qE(e,t,r,a,n);case 7:return aa(e,t,t.pendingProps,n),t.child;case 8:return aa(e,t,t.pendingProps.children,n),t.child;case 12:return aa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,_n(Tv,r._currentValue),r._currentValue=o,s!==null)if(Ji(s.value,o)){if(s.children===a.children&&!Ea.current){t=fo(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=to(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),i1(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($e(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),i1(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}aa(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Xu(t,n),a=xi(a),r=r(a),t.flags|=1,aa(e,t,r,n),t.child;case 14:return r=t.type,a=Ri(r,t.pendingProps),a=Ri(r.type,a),WE(e,t,r,a,n);case 15:return B$(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ri(r,a),nv(e,t),t.tag=1,Pa(r)?(e=!0,Av(t)):e=!1,Xu(t,n),$$(t,r,a),o1(t,r,a,n),u1(null,t,r,!0,e,n);case 19:return H$(e,t,n);case 22:return U$(e,t,n)}throw Error($e(156,t.tag))};function oL(e,t){return RD(e,t)}function D7(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fi(e,t,n,r){return new D7(e,t,n,r)}function zS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $7(e){if(typeof e=="function")return zS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oS)return 11;if(e===lS)return 14}return 2}function dl(e,t){var n=e.alternate;return n===null?(n=fi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function iv(e,t,n,r,a,s){var o=2;if(r=e,typeof e=="function")zS(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Tu:return xc(n.children,a,s,t);case sS:o=8,a|=8;break;case Tj:return e=fi(12,n,t,a|2),e.elementType=Tj,e.lanes=s,e;case Oj:return e=fi(13,n,t,a),e.elementType=Oj,e.lanes=s,e;case Ij:return e=fi(19,n,t,a),e.elementType=Ij,e.lanes=s,e;case vD:return wy(n,a,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pD:o=10;break e;case gD:o=9;break e;case oS:o=11;break e;case lS:o=14;break e;case Uo:o=16,r=null;break e}throw Error($e(130,e==null?e:typeof e,""))}return t=fi(o,n,t,a),t.elementType=e,t.type=r,t.lanes=s,t}function xc(e,t,n,r){return e=fi(7,e,r,t),e.lanes=n,e}function wy(e,t,n,r){return e=fi(22,e,r,t),e.elementType=vD,e.lanes=n,e.stateNode={isHidden:!1},e}function G0(e,t,n){return e=fi(6,e,null,t),e.lanes=n,e}function Y0(e,t,n){return t=fi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function L7(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=E0(0),this.expirationTimes=E0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E0(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function qS(e,t,n,r,a,s,o,l,c){return e=new L7(e,t,n,l,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=fi(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},NS(s),e}function F7(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function lL(e){if(!e)return vl;e=e._reactInternals;e:{if(Vc(e)!==e||e.tag!==1)throw Error($e(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($e(171))}if(e.tag===1){var n=e.type;if(Pa(n))return l$(e,n,t)}return t}function cL(e,t,n,r,a,s,o,l,c){return e=qS(n,r,!0,e,a,s,o,l,c),e.context=lL(null),n=e.current,r=ca(),a=ul(n),s=to(r,a),s.callback=t??null,ll(n,s,a),e.current.lanes=a,rp(e,a,r),Ta(e,r),e}function jy(e,t,n,r){var a=t.current,s=ca(),o=ul(a);return n=lL(n),t.context===null?t.context=n:t.pendingContext=n,t=to(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ll(a,t,o),e!==null&&(Gi(e,a,o,s),Zg(e,a,o)),o}function Uv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nP(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function WS(e,t){nP(e,t),(e=e.alternate)&&nP(e,t)}function B7(){return null}var uL=typeof reportError=="function"?reportError:function(e){console.error(e)};function HS(e){this._internalRoot=e}_y.prototype.render=HS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($e(409));jy(e,t,null,null)};_y.prototype.unmount=HS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Sc(function(){jy(null,e,null,null)}),t[co]=null}};function _y(e){this._internalRoot=e}_y.prototype.unstable_scheduleHydration=function(e){if(e){var t=UD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Wo.length&&t!==0&&t<Wo[n].priority;n++);Wo.splice(n,0,e),n===0&&qD(e)}};function VS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ky(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rP(){}function U7(e,t,n,r,a){if(a){if(typeof r=="function"){var s=r;r=function(){var u=Uv(o);s.call(u)}}var o=cL(t,r,e,0,null,!1,!1,"",rP);return e._reactRootContainer=o,e[co]=o.current,Uh(e.nodeType===8?e.parentNode:e),Sc(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var u=Uv(c);l.call(u)}}var c=qS(e,0,!1,null,null,!1,!1,"",rP);return e._reactRootContainer=c,e[co]=c.current,Uh(e.nodeType===8?e.parentNode:e),Sc(function(){jy(t,c,n,r)}),c}function Sy(e,t,n,r,a){var s=n._reactRootContainer;if(s){var o=s;if(typeof a=="function"){var l=a;a=function(){var c=Uv(o);l.call(c)}}jy(t,o,e,a)}else o=U7(n,t,e,a,r);return Uv(o)}FD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ih(t.pendingLanes);n!==0&&(dS(t,n|1),Ta(t,Qn()),!(Qt&6)&&(_d=Qn()+500,Cl()))}break;case 13:Sc(function(){var r=uo(e,1);if(r!==null){var a=ca();Gi(r,e,1,a)}}),WS(e,1)}};fS=function(e){if(e.tag===13){var t=uo(e,134217728);if(t!==null){var n=ca();Gi(t,e,134217728,n)}WS(e,134217728)}};BD=function(e){if(e.tag===13){var t=ul(e),n=uo(e,t);if(n!==null){var r=ca();Gi(n,e,t,r)}WS(e,t)}};UD=function(){return hn};zD=function(e,t){var n=hn;try{return hn=e,t()}finally{hn=n}};qj=function(e,t,n){switch(t){case"input":if(Dj(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=py(r);if(!a)throw Error($e(90));yD(r),Dj(r,a)}}}break;case"textarea":wD(e,n);break;case"select":t=n.value,t!=null&&Vu(e,!!n.multiple,t,!1)}};AD=FS;ED=Sc;var z7={usingClientEntryPoint:!1,Events:[ip,Mu,py,ND,CD,FS]},If={findFiberByHostInstance:ac,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q7={bundleType:If.bundleType,version:If.version,rendererPackageName:If.rendererPackageName,rendererConfig:If.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=OD(e),e===null?null:e.stateNode},findFiberByHostInstance:If.findFiberByHostInstance||B7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lg.isDisabled&&lg.supportsFiber)try{dy=lg.inject(q7),js=lg}catch{}}Ja.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z7;Ja.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!VS(t))throw Error($e(200));return F7(e,t,null,n)};Ja.createRoot=function(e,t){if(!VS(e))throw Error($e(299));var n=!1,r="",a=uL;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=qS(e,1,!1,null,null,n,!1,r,a),e[co]=t.current,Uh(e.nodeType===8?e.parentNode:e),new HS(t)};Ja.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($e(188)):(e=Object.keys(e).join(","),Error($e(268,e)));return e=OD(t),e=e===null?null:e.stateNode,e};Ja.flushSync=function(e){return Sc(e)};Ja.hydrate=function(e,t,n){if(!ky(t))throw Error($e(200));return Sy(null,e,t,!0,n)};Ja.hydrateRoot=function(e,t,n){if(!VS(e))throw Error($e(405));var r=n!=null&&n.hydratedSources||null,a=!1,s="",o=uL;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=cL(t,null,e,1,n??null,a,!1,s,o),e[co]=t.current,Uh(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new _y(t)};Ja.render=function(e,t,n){if(!ky(t))throw Error($e(200));return Sy(null,e,t,!1,n)};Ja.unmountComponentAtNode=function(e){if(!ky(e))throw Error($e(40));return e._reactRootContainer?(Sc(function(){Sy(null,null,e,!1,function(){e._reactRootContainer=null,e[co]=null})}),!0):!1};Ja.unstable_batchedUpdates=FS;Ja.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ky(n))throw Error($e(200));if(e==null||e._reactInternals===void 0)throw Error($e(38));return Sy(e,t,n,!1,r)};Ja.version="18.3.1-next-f1338f8080-20240426";function dL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dL)}catch(e){console.error(e)}}dL(),dD.exports=Ja;var Kc=dD.exports;const fL=un(Kc);var hL,aP=Kc;hL=aP.createRoot,aP.hydrateRoot;const W7=1,H7=1e6;let X0=0;function V7(){return X0=(X0+1)%Number.MAX_SAFE_INTEGER,X0.toString()}const J0=new Map,iP=e=>{if(J0.has(e))return;const t=setTimeout(()=>{J0.delete(e),jh({type:"REMOVE_TOAST",toastId:e})},H7);J0.set(e,t)},K7=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,W7)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?iP(n):e.toasts.forEach(r=>{iP(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},sv=[];let ov={toasts:[]};function jh(e){ov=K7(ov,e),sv.forEach(t=>{t(ov)})}function G7({...e}){const t=V7(),n=a=>jh({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>jh({type:"DISMISS_TOAST",toastId:t});return jh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function Gc(){const[e,t]=p.useState(ov);return p.useEffect(()=>(sv.push(t),()=>{const n=sv.indexOf(t);n>-1&&sv.splice(n,1)}),[e]),{...e,toast:G7,dismiss:n=>jh({type:"DISMISS_TOAST",toastId:n})}}function De(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function sP(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ho(...e){return t=>{let n=!1;const r=e.map(a=>{const s=sP(a,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let a=0;a<r.length;a++){const s=r[a];typeof s=="function"?s():sP(e[a],null)}}}}function Nt(...e){return p.useCallback(ho(...e),e)}function Y7(e,t){const n=p.createContext(t),r=s=>{const{children:o,...l}=s,c=p.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function a(s){const o=p.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${s}\` must be used within \`${e}\``)}return[r,a]}function kr(e,t=[]){let n=[];function r(s,o){const l=p.createContext(o),c=n.length;n=[...n,o];const u=d=>{var y;const{scope:h,children:m,...g}=d,v=((y=h==null?void 0:h[e])==null?void 0:y[c])||l,x=p.useMemo(()=>g,Object.values(g));return i.jsx(v.Provider,{value:x,children:m})};u.displayName=s+"Provider";function f(d,h){var v;const m=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,g=p.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[u,f]}const a=()=>{const s=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||s;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,X7(a,...t)]}function X7(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const d=c(s)[`__scope${u}`];return{...l,...d}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function xl(e){const t=J7(e),n=p.forwardRef((r,a)=>{const{children:s,...o}=r,l=p.Children.toArray(s),c=l.find(Q7);if(c){const u=c.props.children,f=l.map(d=>d===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:d);return i.jsx(t,{...o,ref:a,children:p.isValidElement(u)?p.cloneElement(u,void 0,f):null})}return i.jsx(t,{...o,ref:a,children:s})});return n.displayName=`${e}.Slot`,n}var KS=xl("Slot");function J7(e){const t=p.forwardRef((n,r)=>{const{children:a,...s}=n;if(p.isValidElement(a)){const o=eV(a),l=Z7(s,a.props);return a.type!==p.Fragment&&(l.ref=r?ho(r,o):o),p.cloneElement(a,l)}return p.Children.count(a)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var mL=Symbol("radix.slottable");function pL(e){const t=({children:n})=>i.jsx(i.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=mL,t}function Q7(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===mL}function Z7(e,t){const n={...t};for(const r in t){const a=e[r],s=t[r];/^on[A-Z]/.test(r)?a&&s?n[r]=(...l)=>{const c=s(...l);return a(...l),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...s}:r==="className"&&(n[r]=[a,s].filter(Boolean).join(" "))}return{...e,...n}}function eV(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function op(e){const t=e+"CollectionProvider",[n,r]=kr(t),[a,s]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:x,children:y}=v,b=X.useRef(null),w=X.useRef(new Map).current;return i.jsx(a,{scope:x,itemMap:w,collectionRef:b,children:y})};o.displayName=t;const l=e+"CollectionSlot",c=xl(l),u=X.forwardRef((v,x)=>{const{scope:y,children:b}=v,w=s(l,y),k=Nt(x,w.collectionRef);return i.jsx(c,{ref:k,children:b})});u.displayName=l;const f=e+"CollectionItemSlot",d="data-radix-collection-item",h=xl(f),m=X.forwardRef((v,x)=>{const{scope:y,children:b,...w}=v,k=X.useRef(null),_=Nt(x,k),j=s(f,y);return X.useEffect(()=>(j.itemMap.set(k,{ref:k,...w}),()=>void j.itemMap.delete(k))),i.jsx(h,{[d]:"",ref:_,children:b})});m.displayName=f;function g(v){const x=s(e+"CollectionConsumer",v);return X.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((j,S)=>w.indexOf(j.ref.current)-w.indexOf(S.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},g,r]}var tV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qe=tV.reduce((e,t)=>{const n=xl(`Primitive.${t}`),r=p.forwardRef((a,s)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function GS(e,t){e&&Kc.flushSync(()=>e.dispatchEvent(t))}function Vn(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function nV(e,t=globalThis==null?void 0:globalThis.document){const n=Vn(e);p.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var rV="DismissableLayer",j1="dismissableLayer.update",aV="dismissableLayer.pointerDownOutside",iV="dismissableLayer.focusOutside",oP,gL=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yc=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...c}=e,u=p.useContext(gL),[f,d]=p.useState(null),h=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=Nt(t,S=>d(S)),v=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),b=f?v.indexOf(f):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,k=b>=y,_=oV(S=>{const A=S.target,C=[...u.branches].some(T=>T.contains(A));!k||C||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},h),j=lV(S=>{const A=S.target;[...u.branches].some(T=>T.contains(A))||(s==null||s(S),o==null||o(S),S.defaultPrevented||l==null||l())},h);return nV(S=>{b===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},h),p.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(oP=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),lP(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=oP)}},[f,h,n,u]),p.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),lP())},[f,u]),p.useEffect(()=>{const S=()=>m({});return document.addEventListener(j1,S),()=>document.removeEventListener(j1,S)},[]),i.jsx(Qe.div,{...c,ref:g,style:{pointerEvents:w?k?"auto":"none":void 0,...e.style},onFocusCapture:De(e.onFocusCapture,j.onFocusCapture),onBlurCapture:De(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:De(e.onPointerDownCapture,_.onPointerDownCapture)})});Yc.displayName=rV;var sV="DismissableLayerBranch",vL=p.forwardRef((e,t)=>{const n=p.useContext(gL),r=p.useRef(null),a=Nt(t,r);return p.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),i.jsx(Qe.div,{...e,ref:a})});vL.displayName=sV;function oV(e,t=globalThis==null?void 0:globalThis.document){const n=Vn(e),r=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let c=function(){xL(aV,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",s),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function lV(e,t=globalThis==null?void 0:globalThis.document){const n=Vn(e),r=p.useRef(!1);return p.useEffect(()=>{const a=s=>{s.target&&!r.current&&xL(iV,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function lP(){const e=new CustomEvent(j1);document.dispatchEvent(e)}function xL(e,t,n,{discrete:r}){const a=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?GS(a,s):a.dispatchEvent(s)}var cV=Yc,uV=vL,Yn=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},dV="Portal",nf=p.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,s]=p.useState(!1);Yn(()=>s(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?fL.createPortal(i.jsx(Qe.div,{...r,ref:t}),o):null});nf.displayName=dV;function fV(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var pr=e=>{const{present:t,children:n}=e,r=hV(t),a=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),s=Nt(r.ref,mV(a));return typeof n=="function"||r.isPresent?p.cloneElement(a,{ref:s}):null};pr.displayName="Presence";function hV(e){const[t,n]=p.useState(),r=p.useRef(null),a=p.useRef(e),s=p.useRef("none"),o=e?"mounted":"unmounted",[l,c]=fV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=cg(r.current);s.current=l==="mounted"?u:"none"},[l]),Yn(()=>{const u=r.current,f=a.current;if(f!==e){const h=s.current,m=cg(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(f&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Yn(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,d=m=>{const v=cg(r.current).includes(m.animationName);if(m.target===t&&v&&(c("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},h=m=>{m.target===t&&(s.current=cg(r.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function cg(e){return(e==null?void 0:e.animationName)||"none"}function mV(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var pV=nS[" useInsertionEffect ".trim().toString()]||Yn;function Ia({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,s,o]=gV({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const f=p.useRef(e!==void 0);p.useEffect(()=>{const d=f.current;d!==l&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const u=p.useCallback(f=>{var d;if(l){const h=vV(f)?f(e):f;h!==e&&((d=o.current)==null||d.call(o,h))}else s(f)},[l,e,s,o]);return[c,u]}function gV({defaultProp:e,onChange:t}){const[n,r]=p.useState(e),a=p.useRef(n),s=p.useRef(t);return pV(()=>{s.current=t},[t]),p.useEffect(()=>{var o;a.current!==n&&((o=s.current)==null||o.call(s,n),a.current=n)},[n,a]),[n,r,s]}function vV(e){return typeof e=="function"}var yL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),xV="VisuallyHidden",Ny=p.forwardRef((e,t)=>i.jsx(Qe.span,{...e,ref:t,style:{...yL,...e.style}}));Ny.displayName=xV;var yV=Ny,YS="ToastProvider",[XS,bV,wV]=op("Toast"),[bL,f3e]=kr("Toast",[wV]),[jV,Cy]=bL(YS),wL=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:s=50,children:o}=e,[l,c]=p.useState(null),[u,f]=p.useState(0),d=p.useRef(!1),h=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${YS}\`. Expected non-empty \`string\`.`),i.jsx(XS.Provider,{scope:t,children:i.jsx(jV,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:s,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>f(m=>m+1),[]),onToastRemove:p.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};wL.displayName=YS;var jL="ToastViewport",_V=["F8"],_1="toast.viewportPause",k1="toast.viewportResume",_L=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=_V,label:a="Notifications ({hotkey})",...s}=e,o=Cy(jL,n),l=bV(n),c=p.useRef(null),u=p.useRef(null),f=p.useRef(null),d=p.useRef(null),h=Nt(t,d,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;p.useEffect(()=>{const x=y=>{var w;r.length!==0&&r.every(k=>y[k]||y.code===k)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),p.useEffect(()=>{const x=c.current,y=d.current;if(g&&x&&y){const b=()=>{if(!o.isClosePausedRef.current){const j=new CustomEvent(_1);y.dispatchEvent(j),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const j=new CustomEvent(k1);y.dispatchEvent(j),o.isClosePausedRef.current=!1}},k=j=>{!x.contains(j.relatedTarget)&&w()},_=()=>{x.contains(document.activeElement)||w()};return x.addEventListener("focusin",b),x.addEventListener("focusout",k),x.addEventListener("pointermove",b),x.addEventListener("pointerleave",_),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{x.removeEventListener("focusin",b),x.removeEventListener("focusout",k),x.removeEventListener("pointermove",b),x.removeEventListener("pointerleave",_),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:x})=>{const b=l().map(w=>{const k=w.ref.current,_=[k,...DV(k)];return x==="forwards"?_:_.reverse()});return(x==="forwards"?b.reverse():b).flat()},[l]);return p.useEffect(()=>{const x=d.current;if(x){const y=b=>{var _,j,S;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const A=document.activeElement,C=b.shiftKey;if(b.target===x&&C){(_=u.current)==null||_.focus();return}const F=v({tabbingDirection:C?"backwards":"forwards"}),E=F.findIndex(I=>I===A);Q0(F.slice(E+1))?b.preventDefault():C?(j=u.current)==null||j.focus():(S=f.current)==null||S.focus()}};return x.addEventListener("keydown",y),()=>x.removeEventListener("keydown",y)}},[l,v]),i.jsxs(uV,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&i.jsx(S1,{ref:u,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});Q0(x)}}),i.jsx(XS.Slot,{scope:n,children:i.jsx(Qe.ol,{tabIndex:-1,...s,ref:h})}),g&&i.jsx(S1,{ref:f,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});Q0(x)}})]})});_L.displayName=jL;var kL="ToastFocusProxy",S1=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,s=Cy(kL,n);return i.jsx(Ny,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=s.viewport)!=null&&u.contains(l))&&r()}})});S1.displayName=kL;var lp="Toast",kV="toast.swipeStart",SV="toast.swipeMove",NV="toast.swipeCancel",CV="toast.swipeEnd",SL=p.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:s,...o}=e,[l,c]=Ia({prop:r,defaultProp:a??!0,onChange:s,caller:lp});return i.jsx(pr,{present:n||l,children:i.jsx(PV,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Vn(e.onPause),onResume:Vn(e.onResume),onSwipeStart:De(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:De(e.onSwipeMove,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:De(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:De(e.onSwipeEnd,u=>{const{x:f,y:d}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});SL.displayName=lp;var[AV,EV]=bL(lp,{onClose(){}}),PV=p.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:s,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:m,...g}=e,v=Cy(lp,n),[x,y]=p.useState(null),b=Nt(t,I=>y(I)),w=p.useRef(null),k=p.useRef(null),_=a||v.duration,j=p.useRef(0),S=p.useRef(_),A=p.useRef(0),{onToastAdd:C,onToastRemove:T}=v,M=Vn(()=>{var P;(x==null?void 0:x.contains(document.activeElement))&&((P=v.viewport)==null||P.focus()),o()}),F=p.useCallback(I=>{!I||I===1/0||(window.clearTimeout(A.current),j.current=new Date().getTime(),A.current=window.setTimeout(M,I))},[M]);p.useEffect(()=>{const I=v.viewport;if(I){const P=()=>{F(S.current),u==null||u()},B=()=>{const O=new Date().getTime()-j.current;S.current=S.current-O,window.clearTimeout(A.current),c==null||c()};return I.addEventListener(_1,B),I.addEventListener(k1,P),()=>{I.removeEventListener(_1,B),I.removeEventListener(k1,P)}}},[v.viewport,_,c,u,F]),p.useEffect(()=>{s&&!v.isClosePausedRef.current&&F(_)},[s,_,v.isClosePausedRef,F]),p.useEffect(()=>(C(),()=>T()),[C,T]);const E=p.useMemo(()=>x?OL(x):null,[x]);return v.viewport?i.jsxs(i.Fragment,{children:[E&&i.jsx(TV,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:E}),i.jsx(AV,{scope:n,onClose:M,children:Kc.createPortal(i.jsx(XS.ItemSlot,{scope:n,children:i.jsx(cV,{asChild:!0,onEscapeKeyDown:De(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||M(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Qe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:De(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:De(e.onPointerDown,I=>{I.button===0&&(w.current={x:I.clientX,y:I.clientY})}),onPointerMove:De(e.onPointerMove,I=>{if(!w.current)return;const P=I.clientX-w.current.x,B=I.clientY-w.current.y,O=!!k.current,$=["left","right"].includes(v.swipeDirection),L=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,N=$?L(0,P):0,U=$?0:L(0,B),D=I.pointerType==="touch"?10:2,R={x:N,y:U},K={originalEvent:I,delta:R};O?(k.current=R,ug(SV,d,K,{discrete:!1})):cP(R,v.swipeDirection,D)?(k.current=R,ug(kV,f,K,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(P)>D||Math.abs(B)>D)&&(w.current=null)}),onPointerUp:De(e.onPointerUp,I=>{const P=k.current,B=I.target;if(B.hasPointerCapture(I.pointerId)&&B.releasePointerCapture(I.pointerId),k.current=null,w.current=null,P){const O=I.currentTarget,$={originalEvent:I,delta:P};cP(P,v.swipeDirection,v.swipeThreshold)?ug(CV,m,$,{discrete:!0}):ug(NV,h,$,{discrete:!0}),O.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),TV=e=>{const{__scopeToast:t,children:n,...r}=e,a=Cy(lp,t),[s,o]=p.useState(!1),[l,c]=p.useState(!1);return RV(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(nf,{asChild:!0,children:i.jsx(Ny,{...r,children:s&&i.jsxs(i.Fragment,{children:[a.label," ",n]})})})},OV="ToastTitle",NL=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Qe.div,{...r,ref:t})});NL.displayName=OV;var IV="ToastDescription",CL=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Qe.div,{...r,ref:t})});CL.displayName=IV;var AL="ToastAction",EL=p.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(TL,{altText:n,asChild:!0,children:i.jsx(JS,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${AL}\`. Expected non-empty \`string\`.`),null)});EL.displayName=AL;var PL="ToastClose",JS=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=EV(PL,n);return i.jsx(TL,{asChild:!0,children:i.jsx(Qe.button,{type:"button",...r,ref:t,onClick:De(e.onClick,a.onClose)})})});JS.displayName=PL;var TL=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return i.jsx(Qe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function OL(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),MV(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!a)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...OL(r))}}),t}function ug(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,s=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?GS(a,s):a.dispatchEvent(s)}var cP=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),s=r>a;return t==="left"||t==="right"?s&&r>n:!s&&a>n};function RV(e=()=>{}){const t=Vn(e);Yn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function MV(e){return e.nodeType===e.ELEMENT_NODE}function DV(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Q0(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var $V=wL,IL=_L,RL=SL,ML=NL,DL=CL,$L=EL,LL=JS;function FL(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=FL(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Zt(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=FL(e))&&(r&&(r+=" "),r+=t);return r}const uP=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,dP=Zt,cp=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return dP(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:s}=t,o=Object.keys(a).map(u=>{const f=n==null?void 0:n[u],d=s==null?void 0:s[u];if(f===null)return null;const h=uP(f)||uP(d);return a[u][h]}),l=n&&Object.entries(n).reduce((u,f)=>{let[d,h]=f;return h===void 0||(u[d]=h),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:d,className:h,...m}=f;return Object.entries(m).every(g=>{let[v,x]=g;return Array.isArray(x)?x.includes({...s,...l}[v]):{...s,...l}[v]===x})?[...u,d,h]:u},[]);return dP(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LV=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BL=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:s,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...FV,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:BL("lucide",a),...l},[...o.map(([u,f])=>p.createElement(u,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=(e,t)=>{const n=p.forwardRef(({className:r,...a},s)=>p.createElement(BV,{ref:s,iconNode:t,className:BL(`lucide-${LV(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UV=Ze("AlignCenter",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=Ze("AlignJustify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=Ze("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=Ze("AlignRight",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=Ze("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=Ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Ze("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=Ze("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=Ze("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Ze("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=Ze("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=Ze("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=Ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rf=Ze("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=Ze("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=Ze("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=Ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=Ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=Ze("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=Ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=Ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=Ze("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=Ze("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=Ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=Ze("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=Ze("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=Ze("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=Ze("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=Ze("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=Ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=Ze("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=Ze("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=Ze("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=Ze("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=Ze("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=Ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=Ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=Ze("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=Ze("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=Ze("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=Ze("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=Ze("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=Ze("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=Ze("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=Ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=Ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=Ze("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Ze("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=Ze("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=Ze("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=Ze("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=Ze("PlugZap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=Ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=Ze("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=Ze("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=Ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=Ze("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=Ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=Ze("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=Ze("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=Ze("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=Ze("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rK=Ze("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=Ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aK=Ze("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=Ze("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=Ze("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=Ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=Ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=Ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=Ze("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),nN="-",oK=e=>{const t=cK(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(nN);return l[0]===""&&l.length!==1&&l.shift(),ZL(l,t)||lK(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},ZL=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?ZL(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const s=e.join(nN);return(o=t.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},yP=/^\[(.+)\]$/,lK=e=>{if(yP.test(e)){const t=yP.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},cK=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return dK(Object.entries(e.classGroups),n).forEach(([s,o])=>{N1(o,r,s,t)}),r},N1=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const s=a===""?t:bP(t,a);s.classGroupId=n;return}if(typeof a=="function"){if(uK(a)){N1(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([s,o])=>{N1(o,bP(t,s),n,r)})})},bP=(e,t)=>{let n=e;return t.split(nN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},uK=e=>e.isThemeGetter,dK=(e,t)=>t?e.map(([n,r])=>{const a=r.map(s=>typeof s=="string"?t+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[t+o,l])):s);return[n,a]}):e,fK=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(s,o)=>{n.set(s,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return a(s,o),o},set(s,o){n.has(s)?n.set(s,o):a(s,o)}}},e4="!",hK=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],s=t.length,o=l=>{const c=[];let u=0,f=0,d;for(let x=0;x<l.length;x++){let y=l[x];if(u===0){if(y===a&&(r||l.slice(x,x+s)===t)){c.push(l.slice(f,x)),f=x+s;continue}if(y==="/"){d=x;continue}}y==="["?u++:y==="]"&&u--}const h=c.length===0?l:l.substring(f),m=h.startsWith(e4),g=m?h.substring(1):h,v=d&&d>f?d-f:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:o}):o},mK=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},pK=e=>({cache:fK(e.cacheSize),parseClassName:hK(e),...oK(e)}),gK=/\s+/,vK=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,s=[],o=e.trim().split(gK);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:f,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:m}=n(u);let g=!!m,v=r(g?h.substring(0,m):h);if(!v){if(!g){l=u+(l.length>0?" "+l:l);continue}if(v=r(h),!v){l=u+(l.length>0?" "+l:l);continue}g=!1}const x=mK(f).join(":"),y=d?x+e4:x,b=y+v;if(s.includes(b))continue;s.push(b);const w=a(v,g);for(let k=0;k<w.length;++k){const _=w[k];s.push(y+_)}l=u+(l.length>0?" "+l:l)}return l};function xK(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=t4(t))&&(r&&(r+=" "),r+=n);return r}const t4=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=t4(e[r]))&&(n&&(n+=" "),n+=t);return n};function yK(e,...t){let n,r,a,s=o;function o(c){const u=t.reduce((f,d)=>d(f),e());return n=pK(u),r=n.cache.get,a=n.cache.set,s=l,l(c)}function l(c){const u=r(c);if(u)return u;const f=vK(c,n);return a(c,f),f}return function(){return s(xK.apply(null,arguments))}}const Nn=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},n4=/^\[(?:([a-z-]+):)?(.+)\]$/i,bK=/^\d+\/\d+$/,wK=new Set(["px","full","screen"]),jK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_K=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,SK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,$s=e=>Qu(e)||wK.has(e)||bK.test(e),Io=e=>rf(e,"length",RK),Qu=e=>!!e&&!Number.isNaN(Number(e)),nw=e=>rf(e,"number",Qu),Mf=e=>!!e&&Number.isInteger(Number(e)),CK=e=>e.endsWith("%")&&Qu(e.slice(0,-1)),Tt=e=>n4.test(e),Ro=e=>jK.test(e),AK=new Set(["length","size","percentage"]),EK=e=>rf(e,AK,r4),PK=e=>rf(e,"position",r4),TK=new Set(["image","url"]),OK=e=>rf(e,TK,DK),IK=e=>rf(e,"",MK),Df=()=>!0,rf=(e,t,n)=>{const r=n4.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},RK=e=>_K.test(e)&&!kK.test(e),r4=()=>!1,MK=e=>SK.test(e),DK=e=>NK.test(e),$K=()=>{const e=Nn("colors"),t=Nn("spacing"),n=Nn("blur"),r=Nn("brightness"),a=Nn("borderColor"),s=Nn("borderRadius"),o=Nn("borderSpacing"),l=Nn("borderWidth"),c=Nn("contrast"),u=Nn("grayscale"),f=Nn("hueRotate"),d=Nn("invert"),h=Nn("gap"),m=Nn("gradientColorStops"),g=Nn("gradientColorStopPositions"),v=Nn("inset"),x=Nn("margin"),y=Nn("opacity"),b=Nn("padding"),w=Nn("saturate"),k=Nn("scale"),_=Nn("sepia"),j=Nn("skew"),S=Nn("space"),A=Nn("translate"),C=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",Tt,t],F=()=>[Tt,t],E=()=>["",$s,Io],I=()=>["auto",Qu,Tt],P=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",Tt],N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[Qu,Tt];return{cacheSize:500,separator:":",theme:{colors:[Df],spacing:[$s,Io],blur:["none","",Ro,Tt],brightness:U(),borderColor:[e],borderRadius:["none","","full",Ro,Tt],borderSpacing:F(),borderWidth:E(),contrast:U(),grayscale:L(),hueRotate:U(),invert:L(),gap:F(),gradientColorStops:[e],gradientColorStopPositions:[CK,Io],inset:M(),margin:M(),opacity:U(),padding:F(),saturate:U(),scale:U(),sepia:L(),skew:U(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Tt]}],container:["container"],columns:[{columns:[Ro]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...P(),Tt]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Mf,Tt]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Tt]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Mf,Tt]}],"grid-cols":[{"grid-cols":[Df]}],"col-start-end":[{col:["auto",{span:["full",Mf,Tt]},Tt]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[Df]}],"row-start-end":[{row:["auto",{span:[Mf,Tt]},Tt]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Tt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Tt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Tt,t]}],"min-w":[{"min-w":[Tt,t,"min","max","fit"]}],"max-w":[{"max-w":[Tt,t,"none","full","min","max","fit","prose",{screen:[Ro]},Ro]}],h:[{h:[Tt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Tt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Tt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Tt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ro,Io]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nw]}],"font-family":[{font:[Df]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Tt]}],"line-clamp":[{"line-clamp":["none",Qu,nw]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",$s,Tt]}],"list-image":[{"list-image":["none",Tt]}],"list-style-type":[{list:["none","disc","decimal",Tt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",$s,Io]}],"underline-offset":[{"underline-offset":["auto",$s,Tt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Tt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Tt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...P(),PK]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",EK]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},OK]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:B()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[$s,Tt]}],"outline-w":[{outline:[$s,Io]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[$s,Io]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ro,IK]}],"shadow-color":[{shadow:[Df]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ro,Tt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Tt]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",Tt]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",Tt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Mf,Tt]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Tt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Tt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Tt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[$s,Io,nw]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},LK=yK($K);function Se(...e){return LK(Zt(e))}function FK(e,t){if(!t||t.length===0)return;const n=Object.keys(t[0]),r=[n.join(","),...t.map(l=>n.map(c=>{const u=l[c],f=u==null?"":String(u),d='"'+f.replace(/"/g,'""')+'"';return/[",\n]/.test(f)?d:f}).join(","))].join(`
`),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),o=URL.createObjectURL(a);s.setAttribute("href",o),s.setAttribute("download",e),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}function a4(e){if(typeof e=="string"){let t=e.replace(/([A-Z0-9._%+-]+)@([A-Z0-9.-]+)\.[A-Z]{2,}/gi,"***@***");return t=t.replace(/\b\+?\d[\d\s-]{6,}\b/g,n=>n.slice(0,Math.max(0,n.length-4)).replace(/\d/g,"*")+n.slice(-4)),t=t.replace(/(\d+\.\d+\.\d+)\.\d+/g,"$1.*"),t}if(e&&typeof e=="object"){const t=Array.isArray(e)?[]:{};for(const n of Object.keys(e))t[n]=a4(e[n]);return t}return e}const BK=$V,i4=p.forwardRef(({className:e,...t},n)=>i.jsx(IL,{ref:n,className:Se("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));i4.displayName=IL.displayName;const UK=cp("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),s4=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx(RL,{ref:r,className:Se(UK({variant:t}),e),...n}));s4.displayName=RL.displayName;const zK=p.forwardRef(({className:e,...t},n)=>i.jsx($L,{ref:n,className:Se("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));zK.displayName=$L.displayName;const o4=p.forwardRef(({className:e,...t},n)=>i.jsx(LL,{ref:n,className:Se("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(dp,{className:"h-4 w-4"})}));o4.displayName=LL.displayName;const l4=p.forwardRef(({className:e,...t},n)=>i.jsx(ML,{ref:n,className:Se("text-sm font-semibold",e),...t}));l4.displayName=ML.displayName;const c4=p.forwardRef(({className:e,...t},n)=>i.jsx(DL,{ref:n,className:Se("text-sm opacity-90",e),...t}));c4.displayName=DL.displayName;function qK(){const{toasts:e}=Gc();return i.jsxs(BK,{children:[e.map(function({id:t,title:n,description:r,action:a,...s}){return i.jsxs(s4,{...s,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(l4,{children:n}),r&&i.jsx(c4,{children:r})]}),a,i.jsx(o4,{})]},t)}),i.jsx(i4,{})]})}var wP=["light","dark"],WK="(prefers-color-scheme: dark)",HK=p.createContext(void 0),VK={setTheme:e=>{},themes:[]},KK=()=>{var e;return(e=p.useContext(HK))!=null?e:VK};p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:s,value:o,attrs:l,nonce:c})=>{let u=s==="system",f=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=a?wP.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(g,v=!1,x=!0)=>{let y=o?o[g]:g,b=v?g+"|| ''":`'${y}'`,w="";return a&&x&&!v&&wP.includes(g)&&(w+=`d.style.colorScheme = '${g}';`),n==="class"?v||y?w+=`c.add(${b})`:w+="null":y&&(w+=`d[s](n,${b})`),w},m=e?`!function(){${f}${h(e)}}()`:r?`!function(){try{${f}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${WK}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${u?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${f}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var GK=e=>{switch(e){case"success":return JK;case"info":return ZK;case"warning":return QK;case"error":return eG;default:return null}},YK=Array(12).fill(0),XK=({visible:e,className:t})=>X.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},X.createElement("div",{className:"sonner-spinner"},YK.map((n,r)=>X.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),JK=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),QK=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ZK=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),eG=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),tG=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},X.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),X.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),nG=()=>{let[e,t]=X.useState(document.hidden);return X.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},C1=1,rG=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:C1++,s=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),s?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0,s,o=r.then(async c=>{if(s=["resolve",c],X.isValidElement(c))a=!1,this.create({id:n,type:"default",message:c});else if(iG(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,f=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:f})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:f})}}).catch(async c=>{if(s=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,f=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:f})}}).finally(()=>{var c;a&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>s[0]==="reject"?u(s[1]):c(s[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||C1++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ya=new rG,aG=(e,t)=>{let n=(t==null?void 0:t.id)||C1++;return ya.addToast({title:e,...t,id:n}),n},iG=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",sG=aG,oG=()=>ya.toasts,lG=()=>ya.getActiveToasts(),Fe=Object.assign(sG,{success:ya.success,info:ya.info,warning:ya.warning,error:ya.error,custom:ya.custom,message:ya.message,promise:ya.promise,dismiss:ya.dismiss,loading:ya.loading},{getHistory:oG,getToasts:lG});function cG(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}cG(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function dg(e){return e.label!==void 0}var uG=3,dG="32px",fG="16px",jP=4e3,hG=356,mG=14,pG=20,gG=200;function Pi(...e){return e.filter(Boolean).join(" ")}function vG(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var xG=e=>{var t,n,r,a,s,o,l,c,u,f,d;let{invert:h,toast:m,unstyled:g,interacting:v,setHeights:x,visibleToasts:y,heights:b,index:w,toasts:k,expanded:_,removeToast:j,defaultRichColors:S,closeButton:A,style:C,cancelButtonStyle:T,actionButtonStyle:M,className:F="",descriptionClassName:E="",duration:I,position:P,gap:B,loadingIcon:O,expandByDefault:$,classNames:L,icons:N,closeButtonAriaLabel:U="Close toast",pauseWhenPageIsHidden:D}=e,[R,K]=X.useState(null),[Q,H]=X.useState(null),[V,ie]=X.useState(!1),[G,le]=X.useState(!1),[se,Z]=X.useState(!1),[_e,z]=X.useState(!1),[q,ce]=X.useState(!1),[ke,Ae]=X.useState(0),[Pe,Ie]=X.useState(0),Ne=X.useRef(m.duration||I||jP),ze=X.useRef(null),at=X.useRef(null),pt=w===0,_t=w+1<=y,re=m.type,pe=m.dismissible!==!1,He=m.className||"",Ue=m.descriptionClassName||"",oe=X.useMemo(()=>b.findIndex(ee=>ee.toastId===m.id)||0,[b,m.id]),ct=X.useMemo(()=>{var ee;return(ee=m.closeButton)!=null?ee:A},[m.closeButton,A]),Pt=X.useMemo(()=>m.duration||I||jP,[m.duration,I]),kt=X.useRef(0),Xe=X.useRef(0),ye=X.useRef(0),it=X.useRef(null),[$t,ue]=P.split("-"),We=X.useMemo(()=>b.reduce((ee,ve,Re)=>Re>=oe?ee:ee+ve.height,0),[b,oe]),ne=nG(),Ee=m.invert||h,be=re==="loading";Xe.current=X.useMemo(()=>oe*B+We,[oe,We]),X.useEffect(()=>{Ne.current=Pt},[Pt]),X.useEffect(()=>{ie(!0)},[]),X.useEffect(()=>{let ee=at.current;if(ee){let ve=ee.getBoundingClientRect().height;return Ie(ve),x(Re=>[{toastId:m.id,height:ve,position:m.position},...Re]),()=>x(Re=>Re.filter(Ke=>Ke.toastId!==m.id))}},[x,m.id]),X.useLayoutEffect(()=>{if(!V)return;let ee=at.current,ve=ee.style.height;ee.style.height="auto";let Re=ee.getBoundingClientRect().height;ee.style.height=ve,Ie(Re),x(Ke=>Ke.find(ft=>ft.toastId===m.id)?Ke.map(ft=>ft.toastId===m.id?{...ft,height:Re}:ft):[{toastId:m.id,height:Re,position:m.position},...Ke])},[V,m.title,m.description,x,m.id]);let Te=X.useCallback(()=>{le(!0),Ae(Xe.current),x(ee=>ee.filter(ve=>ve.toastId!==m.id)),setTimeout(()=>{j(m)},gG)},[m,j,x,Xe]);X.useEffect(()=>{if(m.promise&&re==="loading"||m.duration===1/0||m.type==="loading")return;let ee;return _||v||D&&ne?(()=>{if(ye.current<kt.current){let ve=new Date().getTime()-kt.current;Ne.current=Ne.current-ve}ye.current=new Date().getTime()})():Ne.current!==1/0&&(kt.current=new Date().getTime(),ee=setTimeout(()=>{var ve;(ve=m.onAutoClose)==null||ve.call(m,m),Te()},Ne.current)),()=>clearTimeout(ee)},[_,v,m,re,D,ne,Te]),X.useEffect(()=>{m.delete&&Te()},[Te,m.delete]);function ut(){var ee,ve,Re;return N!=null&&N.loading?X.createElement("div",{className:Pi(L==null?void 0:L.loader,(ee=m==null?void 0:m.classNames)==null?void 0:ee.loader,"sonner-loader"),"data-visible":re==="loading"},N.loading):O?X.createElement("div",{className:Pi(L==null?void 0:L.loader,(ve=m==null?void 0:m.classNames)==null?void 0:ve.loader,"sonner-loader"),"data-visible":re==="loading"},O):X.createElement(XK,{className:Pi(L==null?void 0:L.loader,(Re=m==null?void 0:m.classNames)==null?void 0:Re.loader),visible:re==="loading"})}return X.createElement("li",{tabIndex:0,ref:at,className:Pi(F,He,L==null?void 0:L.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,L==null?void 0:L.default,L==null?void 0:L[re],(n=m==null?void 0:m.classNames)==null?void 0:n[re]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:S,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":V,"data-promise":!!m.promise,"data-swiped":q,"data-removed":G,"data-visible":_t,"data-y-position":$t,"data-x-position":ue,"data-index":w,"data-front":pt,"data-swiping":se,"data-dismissible":pe,"data-type":re,"data-invert":Ee,"data-swipe-out":_e,"data-swipe-direction":Q,"data-expanded":!!(_||$&&V),style:{"--index":w,"--toasts-before":w,"--z-index":k.length-w,"--offset":`${G?ke:Xe.current}px`,"--initial-height":$?"auto":`${Pe}px`,...C,...m.style},onDragEnd:()=>{Z(!1),K(null),it.current=null},onPointerDown:ee=>{be||!pe||(ze.current=new Date,Ae(Xe.current),ee.target.setPointerCapture(ee.pointerId),ee.target.tagName!=="BUTTON"&&(Z(!0),it.current={x:ee.clientX,y:ee.clientY}))},onPointerUp:()=>{var ee,ve,Re,Ke;if(_e||!pe)return;it.current=null;let ft=Number(((ee=at.current)==null?void 0:ee.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Rt=Number(((ve=at.current)==null?void 0:ve.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Gt=new Date().getTime()-((Re=ze.current)==null?void 0:Re.getTime()),Je=R==="x"?ft:Rt,en=Math.abs(Je)/Gt;if(Math.abs(Je)>=pG||en>.11){Ae(Xe.current),(Ke=m.onDismiss)==null||Ke.call(m,m),H(R==="x"?ft>0?"right":"left":Rt>0?"down":"up"),Te(),z(!0),ce(!1);return}Z(!1),K(null)},onPointerMove:ee=>{var ve,Re,Ke,ft;if(!it.current||!pe||((ve=window.getSelection())==null?void 0:ve.toString().length)>0)return;let Rt=ee.clientY-it.current.y,Gt=ee.clientX-it.current.x,Je=(Re=e.swipeDirections)!=null?Re:vG(P);!R&&(Math.abs(Gt)>1||Math.abs(Rt)>1)&&K(Math.abs(Gt)>Math.abs(Rt)?"x":"y");let en={x:0,y:0};R==="y"?(Je.includes("top")||Je.includes("bottom"))&&(Je.includes("top")&&Rt<0||Je.includes("bottom")&&Rt>0)&&(en.y=Rt):R==="x"&&(Je.includes("left")||Je.includes("right"))&&(Je.includes("left")&&Gt<0||Je.includes("right")&&Gt>0)&&(en.x=Gt),(Math.abs(en.x)>0||Math.abs(en.y)>0)&&ce(!0),(Ke=at.current)==null||Ke.style.setProperty("--swipe-amount-x",`${en.x}px`),(ft=at.current)==null||ft.style.setProperty("--swipe-amount-y",`${en.y}px`)}},ct&&!m.jsx?X.createElement("button",{"aria-label":U,"data-disabled":be,"data-close-button":!0,onClick:be||!pe?()=>{}:()=>{var ee;Te(),(ee=m.onDismiss)==null||ee.call(m,m)},className:Pi(L==null?void 0:L.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(s=N==null?void 0:N.close)!=null?s:tG):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:X.createElement(X.Fragment,null,re||m.icon||m.promise?X.createElement("div",{"data-icon":"",className:Pi(L==null?void 0:L.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||ut():null,m.type!=="loading"?m.icon||(N==null?void 0:N[re])||GK(re):null):null,X.createElement("div",{"data-content":"",className:Pi(L==null?void 0:L.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},X.createElement("div",{"data-title":"",className:Pi(L==null?void 0:L.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?X.createElement("div",{"data-description":"",className:Pi(E,Ue,L==null?void 0:L.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&dg(m.cancel)?X.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||T,onClick:ee=>{var ve,Re;dg(m.cancel)&&pe&&((Re=(ve=m.cancel).onClick)==null||Re.call(ve,ee),Te())},className:Pi(L==null?void 0:L.cancelButton,(f=m==null?void 0:m.classNames)==null?void 0:f.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&dg(m.action)?X.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||M,onClick:ee=>{var ve,Re;dg(m.action)&&((Re=(ve=m.action).onClick)==null||Re.call(ve,ee),!ee.defaultPrevented&&Te())},className:Pi(L==null?void 0:L.actionButton,(d=m==null?void 0:m.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function _P(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function yG(e,t){let n={};return[e,t].forEach((r,a)=>{let s=a===1,o=s?"--mobile-offset":"--offset",l=s?fG:dG;function c(u){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var bG=p.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:c,mobileOffset:u,theme:f="light",richColors:d,duration:h,style:m,visibleToasts:g=uG,toastOptions:v,dir:x=_P(),gap:y=mG,loadingIcon:b,icons:w,containerAriaLabel:k="Notifications",pauseWhenPageIsHidden:_}=e,[j,S]=X.useState([]),A=X.useMemo(()=>Array.from(new Set([r].concat(j.filter(D=>D.position).map(D=>D.position)))),[j,r]),[C,T]=X.useState([]),[M,F]=X.useState(!1),[E,I]=X.useState(!1),[P,B]=X.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=X.useRef(null),$=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=X.useRef(null),N=X.useRef(!1),U=X.useCallback(D=>{S(R=>{var K;return(K=R.find(Q=>Q.id===D.id))!=null&&K.delete||ya.dismiss(D.id),R.filter(({id:Q})=>Q!==D.id)})},[]);return X.useEffect(()=>ya.subscribe(D=>{if(D.dismiss){S(R=>R.map(K=>K.id===D.id?{...K,delete:!0}:K));return}setTimeout(()=>{fL.flushSync(()=>{S(R=>{let K=R.findIndex(Q=>Q.id===D.id);return K!==-1?[...R.slice(0,K),{...R[K],...D},...R.slice(K+1)]:[D,...R]})})})}),[]),X.useEffect(()=>{if(f!=="system"){B(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;let D=window.matchMedia("(prefers-color-scheme: dark)");try{D.addEventListener("change",({matches:R})=>{B(R?"dark":"light")})}catch{D.addListener(({matches:K})=>{try{B(K?"dark":"light")}catch(Q){console.error(Q)}})}},[f]),X.useEffect(()=>{j.length<=1&&F(!1)},[j]),X.useEffect(()=>{let D=R=>{var K,Q;a.every(H=>R[H]||R.code===H)&&(F(!0),(K=O.current)==null||K.focus()),R.code==="Escape"&&(document.activeElement===O.current||(Q=O.current)!=null&&Q.contains(document.activeElement))&&F(!1)};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[a]),X.useEffect(()=>{if(O.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,N.current=!1)}},[O.current]),X.createElement("section",{ref:t,"aria-label":`${k} ${$}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},A.map((D,R)=>{var K;let[Q,H]=D.split("-");return j.length?X.createElement("ol",{key:D,dir:x==="auto"?_P():x,tabIndex:-1,ref:O,className:l,"data-sonner-toaster":!0,"data-theme":P,"data-y-position":Q,"data-lifted":M&&j.length>1&&!s,"data-x-position":H,style:{"--front-toast-height":`${((K=C[0])==null?void 0:K.height)||0}px`,"--width":`${hG}px`,"--gap":`${y}px`,...m,...yG(c,u)},onBlur:V=>{N.current&&!V.currentTarget.contains(V.relatedTarget)&&(N.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||N.current||(N.current=!0,L.current=V.relatedTarget)},onMouseEnter:()=>F(!0),onMouseMove:()=>F(!0),onMouseLeave:()=>{E||F(!1)},onDragEnd:()=>F(!1),onPointerDown:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},j.filter(V=>!V.position&&R===0||V.position===D).map((V,ie)=>{var G,le;return X.createElement(xG,{key:V.id,icons:w,index:ie,toast:V,defaultRichColors:d,duration:(G=v==null?void 0:v.duration)!=null?G:h,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:g,closeButton:(le=v==null?void 0:v.closeButton)!=null?le:o,interacting:E,position:D,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:U,toasts:j.filter(se=>se.position==V.position),heights:C.filter(se=>se.position==V.position),setHeights:T,expandByDefault:s,gap:y,loadingIcon:b,expanded:M,pauseWhenPageIsHidden:_,swipeDirections:e.swipeDirections})})):null}))});const u4=({...e})=>{const{theme:t="system"}=KK();return i.jsx(bG,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})},kP=Object.freeze(Object.defineProperty({__proto__:null,Toaster:u4,toast:Fe},Symbol.toStringTag,{value:"Module"}));var wG=nS[" useId ".trim().toString()]||(()=>{}),jG=0;function ar(e){const[t,n]=p.useState(wG());return Yn(()=>{e||n(r=>r??String(jG++))},[e]),e||(t?`radix-${t}`:"")}const _G=["top","right","bottom","left"],yl=Math.min,za=Math.max,Wv=Math.round,fg=Math.floor,Ss=e=>({x:e,y:e}),kG={left:"right",right:"left",bottom:"top",top:"bottom"},SG={start:"end",end:"start"};function A1(e,t,n){return za(e,yl(t,n))}function mo(e,t){return typeof e=="function"?e(t):e}function po(e){return e.split("-")[0]}function af(e){return e.split("-")[1]}function rN(e){return e==="x"?"y":"x"}function aN(e){return e==="y"?"height":"width"}const NG=new Set(["top","bottom"]);function vs(e){return NG.has(po(e))?"y":"x"}function iN(e){return rN(vs(e))}function CG(e,t,n){n===void 0&&(n=!1);const r=af(e),a=iN(e),s=aN(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Hv(o)),[o,Hv(o)]}function AG(e){const t=Hv(e);return[E1(e),t,E1(t)]}function E1(e){return e.replace(/start|end/g,t=>SG[t])}const SP=["left","right"],NP=["right","left"],EG=["top","bottom"],PG=["bottom","top"];function TG(e,t,n){switch(e){case"top":case"bottom":return n?t?NP:SP:t?SP:NP;case"left":case"right":return t?EG:PG;default:return[]}}function OG(e,t,n,r){const a=af(e);let s=TG(po(e),n==="start",r);return a&&(s=s.map(o=>o+"-"+a),t&&(s=s.concat(s.map(E1)))),s}function Hv(e){return e.replace(/left|right|bottom|top/g,t=>kG[t])}function IG(e){return{top:0,right:0,bottom:0,left:0,...e}}function d4(e){return typeof e!="number"?IG(e):{top:e,right:e,bottom:e,left:e}}function Vv(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function CP(e,t,n){let{reference:r,floating:a}=e;const s=vs(t),o=iN(t),l=aN(o),c=po(t),u=s==="y",f=r.x+r.width/2-a.width/2,d=r.y+r.height/2-a.height/2,h=r[l]/2-a[l]/2;let m;switch(c){case"top":m={x:f,y:r.y-a.height};break;case"bottom":m={x:f,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-a.width,y:d};break;default:m={x:r.x,y:r.y}}switch(af(t)){case"start":m[o]-=h*(n&&u?-1:1);break;case"end":m[o]+=h*(n&&u?-1:1);break}return m}const RG=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:d}=CP(u,r,c),h=r,m={},g=0;for(let v=0;v<l.length;v++){const{name:x,fn:y}=l[v],{x:b,y:w,data:k,reset:_}=await y({x:f,y:d,initialPlacement:r,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});f=b??f,d=w??d,m={...m,[x]:{...m[x],...k}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(u=_.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):_.rects),{x:f,y:d}=CP(u,h,c)),v=-1)}return{x:f,y:d,placement:h,strategy:a,middlewareData:m}};async function Zh(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:s,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:h=!1,padding:m=0}=mo(t,e),g=d4(m),x=l[h?d==="floating"?"reference":"floating":d],y=Vv(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(x)))==null||n?x:x.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),b=d==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),k=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},_=Vv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(y.top-_.top+g.top)/k.y,bottom:(_.bottom-y.bottom+g.bottom)/k.y,left:(y.left-_.left+g.left)/k.x,right:(_.right-y.right+g.right)/k.x}}const MG=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:s,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=mo(e,t)||{};if(u==null)return{};const d=d4(f),h={x:n,y:r},m=iN(a),g=aN(m),v=await o.getDimensions(u),x=m==="y",y=x?"top":"left",b=x?"bottom":"right",w=x?"clientHeight":"clientWidth",k=s.reference[g]+s.reference[m]-h[m]-s.floating[g],_=h[m]-s.reference[m],j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=j?j[w]:0;(!S||!await(o.isElement==null?void 0:o.isElement(j)))&&(S=l.floating[w]||s.floating[g]);const A=k/2-_/2,C=S/2-v[g]/2-1,T=yl(d[y],C),M=yl(d[b],C),F=T,E=S-v[g]-M,I=S/2-v[g]/2+A,P=A1(F,I,E),B=!c.arrow&&af(a)!=null&&I!==P&&s.reference[g]/2-(I<F?T:M)-v[g]/2<0,O=B?I<F?I-F:I-E:0;return{[m]:h[m]+O,data:{[m]:P,centerOffset:I-P-O,...B&&{alignmentOffset:O}},reset:B}}}),DG=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:s,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...x}=mo(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=po(a),b=vs(l),w=po(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(u.floating)),_=h||(w||!v?[Hv(l)]:AG(l)),j=g!=="none";!h&&j&&_.push(...OG(l,v,g,k));const S=[l,..._],A=await Zh(t,x),C=[];let T=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&C.push(A[y]),d){const I=CG(a,o,k);C.push(A[I[0]],A[I[1]])}if(T=[...T,{placement:a,overflows:C}],!C.every(I=>I<=0)){var M,F;const I=(((M=s.flip)==null?void 0:M.index)||0)+1,P=S[I];if(P&&(!(d==="alignment"?b!==vs(P):!1)||T.every($=>$.overflows[0]>0&&vs($.placement)===b)))return{data:{index:I,overflows:T},reset:{placement:P}};let B=(F=T.filter(O=>O.overflows[0]<=0).sort((O,$)=>O.overflows[1]-$.overflows[1])[0])==null?void 0:F.placement;if(!B)switch(m){case"bestFit":{var E;const O=(E=T.filter($=>{if(j){const L=vs($.placement);return L===b||L==="y"}return!0}).map($=>[$.placement,$.overflows.filter(L=>L>0).reduce((L,N)=>L+N,0)]).sort(($,L)=>$[1]-L[1])[0])==null?void 0:E[0];O&&(B=O);break}case"initialPlacement":B=l;break}if(a!==B)return{reset:{placement:B}}}return{}}}};function AP(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function EP(e){return _G.some(t=>e[t]>=0)}const $G=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=mo(e,t);switch(r){case"referenceHidden":{const s=await Zh(t,{...a,elementContext:"reference"}),o=AP(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:EP(o)}}}case"escaped":{const s=await Zh(t,{...a,altBoundary:!0}),o=AP(s,n.floating);return{data:{escapedOffsets:o,escaped:EP(o)}}}default:return{}}}}},f4=new Set(["left","top"]);async function LG(e,t){const{placement:n,platform:r,elements:a}=e,s=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=po(n),l=af(n),c=vs(n)==="y",u=f4.has(o)?-1:1,f=s&&c?-1:1,d=mo(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*f,y:h*u}:{x:h*u,y:m*f}}const FG=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:s,placement:o,middlewareData:l}=t,c=await LG(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:s+c.y,data:{...c,placement:o}}}}},BG=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:y,y:b}=x;return{x:y,y:b}}},...c}=mo(e,t),u={x:n,y:r},f=await Zh(t,c),d=vs(po(a)),h=rN(d);let m=u[h],g=u[d];if(s){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=m+f[x],w=m-f[y];m=A1(b,m,w)}if(o){const x=d==="y"?"top":"left",y=d==="y"?"bottom":"right",b=g+f[x],w=g-f[y];g=A1(b,g,w)}const v=l.fn({...t,[h]:m,[d]:g});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:s,[d]:o}}}}}},UG=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:s,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=mo(e,t),f={x:n,y:r},d=vs(a),h=rN(d);let m=f[h],g=f[d];const v=mo(l,t),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=h==="y"?"height":"width",k=s.reference[h]-s.floating[w]+x.mainAxis,_=s.reference[h]+s.reference[w]-x.mainAxis;m<k?m=k:m>_&&(m=_)}if(u){var y,b;const w=h==="y"?"width":"height",k=f4.has(po(a)),_=s.reference[d]-s.floating[w]+(k&&((y=o.offset)==null?void 0:y[d])||0)+(k?0:x.crossAxis),j=s.reference[d]+s.reference[w]+(k?0:((b=o.offset)==null?void 0:b[d])||0)-(k?x.crossAxis:0);g<_?g=_:g>j&&(g=j)}return{[h]:m,[d]:g}}}},zG=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:s,platform:o,elements:l}=t,{apply:c=()=>{},...u}=mo(e,t),f=await Zh(t,u),d=po(a),h=af(a),m=vs(a)==="y",{width:g,height:v}=s.floating;let x,y;d==="top"||d==="bottom"?(x=d,y=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(y=d,x=h==="end"?"top":"bottom");const b=v-f.top-f.bottom,w=g-f.left-f.right,k=yl(v-f[x],b),_=yl(g-f[y],w),j=!t.middlewareData.shift;let S=k,A=_;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(S=b),j&&!h){const T=za(f.left,0),M=za(f.right,0),F=za(f.top,0),E=za(f.bottom,0);m?A=g-2*(T!==0||M!==0?T+M:za(f.left,f.right)):S=v-2*(F!==0||E!==0?F+E:za(f.top,f.bottom))}await c({...t,availableWidth:A,availableHeight:S});const C=await o.getDimensions(l.floating);return g!==C.width||v!==C.height?{reset:{rects:!0}}:{}}}};function Ty(){return typeof window<"u"}function sf(e){return h4(e)?(e.nodeName||"").toLowerCase():"#document"}function Ka(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Is(e){var t;return(t=(h4(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function h4(e){return Ty()?e instanceof Node||e instanceof Ka(e).Node:!1}function Qi(e){return Ty()?e instanceof Element||e instanceof Ka(e).Element:!1}function Es(e){return Ty()?e instanceof HTMLElement||e instanceof Ka(e).HTMLElement:!1}function PP(e){return!Ty()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ka(e).ShadowRoot}const qG=new Set(["inline","contents"]);function fp(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Zi(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!qG.has(a)}const WG=new Set(["table","td","th"]);function HG(e){return WG.has(sf(e))}const VG=[":popover-open",":modal"];function Oy(e){return VG.some(t=>{try{return e.matches(t)}catch{return!1}})}const KG=["transform","translate","scale","rotate","perspective"],GG=["transform","translate","scale","rotate","perspective","filter"],YG=["paint","layout","strict","content"];function sN(e){const t=oN(),n=Qi(e)?Zi(e):e;return KG.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||GG.some(r=>(n.willChange||"").includes(r))||YG.some(r=>(n.contain||"").includes(r))}function XG(e){let t=bl(e);for(;Es(t)&&!kd(t);){if(sN(t))return t;if(Oy(t))return null;t=bl(t)}return null}function oN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const JG=new Set(["html","body","#document"]);function kd(e){return JG.has(sf(e))}function Zi(e){return Ka(e).getComputedStyle(e)}function Iy(e){return Qi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function bl(e){if(sf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||PP(e)&&e.host||Is(e);return PP(t)?t.host:t}function m4(e){const t=bl(e);return kd(t)?e.ownerDocument?e.ownerDocument.body:e.body:Es(t)&&fp(t)?t:m4(t)}function em(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=m4(e),s=a===((r=e.ownerDocument)==null?void 0:r.body),o=Ka(a);if(s){const l=P1(o);return t.concat(o,o.visualViewport||[],fp(a)?a:[],l&&n?em(l):[])}return t.concat(a,em(a,[],n))}function P1(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function p4(e){const t=Zi(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Es(e),s=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=Wv(n)!==s||Wv(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function lN(e){return Qi(e)?e:e.contextElement}function Zu(e){const t=lN(e);if(!Es(t))return Ss(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:s}=p4(t);let o=(s?Wv(n.width):n.width)/r,l=(s?Wv(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const QG=Ss(0);function g4(e){const t=Ka(e);return!oN()||!t.visualViewport?QG:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ZG(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ka(e)?!1:t}function Cc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),s=lN(e);let o=Ss(1);t&&(r?Qi(r)&&(o=Zu(r)):o=Zu(e));const l=ZG(s,n,r)?g4(s):Ss(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,f=a.width/o.x,d=a.height/o.y;if(s){const h=Ka(s),m=r&&Qi(r)?Ka(r):r;let g=h,v=P1(g);for(;v&&r&&m!==g;){const x=Zu(v),y=v.getBoundingClientRect(),b=Zi(v),w=y.left+(v.clientLeft+parseFloat(b.paddingLeft))*x.x,k=y.top+(v.clientTop+parseFloat(b.paddingTop))*x.y;c*=x.x,u*=x.y,f*=x.x,d*=x.y,c+=w,u+=k,g=Ka(v),v=P1(g)}}return Vv({width:f,height:d,x:c,y:u})}function cN(e,t){const n=Iy(e).scrollLeft;return t?t.left+n:Cc(Is(e)).left+n}function v4(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:cN(e,r)),s=r.top+t.scrollTop;return{x:a,y:s}}function eY(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const s=a==="fixed",o=Is(r),l=t?Oy(t.floating):!1;if(r===o||l&&s)return n;let c={scrollLeft:0,scrollTop:0},u=Ss(1);const f=Ss(0),d=Es(r);if((d||!d&&!s)&&((sf(r)!=="body"||fp(o))&&(c=Iy(r)),Es(r))){const m=Cc(r);u=Zu(r),f.x=m.x+r.clientLeft,f.y=m.y+r.clientTop}const h=o&&!d&&!s?v4(o,c,!0):Ss(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+h.x,y:n.y*u.y-c.scrollTop*u.y+f.y+h.y}}function tY(e){return Array.from(e.getClientRects())}function nY(e){const t=Is(e),n=Iy(e),r=e.ownerDocument.body,a=za(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=za(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+cN(e);const l=-n.scrollTop;return Zi(r).direction==="rtl"&&(o+=za(t.clientWidth,r.clientWidth)-a),{width:a,height:s,x:o,y:l}}function rY(e,t){const n=Ka(e),r=Is(e),a=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){s=a.width,o=a.height;const u=oN();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:s,height:o,x:l,y:c}}const aY=new Set(["absolute","fixed"]);function iY(e,t){const n=Cc(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,s=Es(e)?Zu(e):Ss(1),o=e.clientWidth*s.x,l=e.clientHeight*s.y,c=a*s.x,u=r*s.y;return{width:o,height:l,x:c,y:u}}function TP(e,t,n){let r;if(t==="viewport")r=rY(e,n);else if(t==="document")r=nY(Is(e));else if(Qi(t))r=iY(t,n);else{const a=g4(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Vv(r)}function x4(e,t){const n=bl(e);return n===t||!Qi(n)||kd(n)?!1:Zi(n).position==="fixed"||x4(n,t)}function sY(e,t){const n=t.get(e);if(n)return n;let r=em(e,[],!1).filter(l=>Qi(l)&&sf(l)!=="body"),a=null;const s=Zi(e).position==="fixed";let o=s?bl(e):e;for(;Qi(o)&&!kd(o);){const l=Zi(o),c=sN(o);!c&&l.position==="fixed"&&(a=null),(s?!c&&!a:!c&&l.position==="static"&&!!a&&aY.has(a.position)||fp(o)&&!c&&x4(e,o))?r=r.filter(f=>f!==o):a=l,o=bl(o)}return t.set(e,r),r}function oY(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Oy(t)?[]:sY(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,f)=>{const d=TP(t,f,a);return u.top=za(d.top,u.top),u.right=yl(d.right,u.right),u.bottom=yl(d.bottom,u.bottom),u.left=za(d.left,u.left),u},TP(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function lY(e){const{width:t,height:n}=p4(e);return{width:t,height:n}}function cY(e,t,n){const r=Es(t),a=Is(t),s=n==="fixed",o=Cc(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const c=Ss(0);function u(){c.x=cN(a)}if(r||!r&&!s)if((sf(t)!=="body"||fp(a))&&(l=Iy(t)),r){const m=Cc(t,!0,s,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();s&&!r&&a&&u();const f=a&&!r&&!s?v4(a,l):Ss(0),d=o.left+l.scrollLeft-c.x-f.x,h=o.top+l.scrollTop-c.y-f.y;return{x:d,y:h,width:o.width,height:o.height}}function rw(e){return Zi(e).position==="static"}function OP(e,t){if(!Es(e)||Zi(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Is(e)===n&&(n=n.ownerDocument.body),n}function y4(e,t){const n=Ka(e);if(Oy(e))return n;if(!Es(e)){let a=bl(e);for(;a&&!kd(a);){if(Qi(a)&&!rw(a))return a;a=bl(a)}return n}let r=OP(e,t);for(;r&&HG(r)&&rw(r);)r=OP(r,t);return r&&kd(r)&&rw(r)&&!sN(r)?n:r||XG(e)||n}const uY=async function(e){const t=this.getOffsetParent||y4,n=this.getDimensions,r=await n(e.floating);return{reference:cY(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function dY(e){return Zi(e).direction==="rtl"}const fY={convertOffsetParentRelativeRectToViewportRelativeRect:eY,getDocumentElement:Is,getClippingRect:oY,getOffsetParent:y4,getElementRects:uY,getClientRects:tY,getDimensions:lY,getScale:Zu,isElement:Qi,isRTL:dY};function b4(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function hY(e,t){let n=null,r;const a=Is(e);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),s();const u=e.getBoundingClientRect(),{left:f,top:d,width:h,height:m}=u;if(l||t(),!h||!m)return;const g=fg(d),v=fg(a.clientWidth-(f+h)),x=fg(a.clientHeight-(d+m)),y=fg(f),w={rootMargin:-g+"px "+-v+"px "+-x+"px "+-y+"px",threshold:za(0,yl(1,c))||1};let k=!0;function _(j){const S=j[0].intersectionRatio;if(S!==c){if(!k)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!b4(u,e.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(_,{...w,root:a.ownerDocument})}catch{n=new IntersectionObserver(_,w)}n.observe(e)}return o(!0),s}function mY(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=lN(e),f=a||s?[...u?em(u):[],...em(t)]:[];f.forEach(y=>{a&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=u&&l?hY(u,n):null;let h=-1,m=null;o&&(m=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let g,v=c?Cc(e):null;c&&x();function x(){const y=Cc(e);v&&!b4(v,y)&&n(),v=y,g=requestAnimationFrame(x)}return n(),()=>{var y;f.forEach(b=>{a&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d==null||d(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const pY=FG,gY=BG,vY=DG,xY=zG,yY=$G,IP=MG,bY=UG,wY=(e,t,n)=>{const r=new Map,a={platform:fY,...n},s={...a.platform,_c:r};return RG(e,t,{...a,platform:s})};var jY=typeof document<"u",_Y=function(){},uv=jY?p.useLayoutEffect:_Y;function Kv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Kv(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const s=a[r];if(!(s==="_owner"&&e.$$typeof)&&!Kv(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function w4(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function RP(e,t){const n=w4(e);return Math.round(t*n)/n}function aw(e){const t=p.useRef(e);return uv(()=>{t.current=e}),t}function kY(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,d]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(r);Kv(h,r)||m(r);const[g,v]=p.useState(null),[x,y]=p.useState(null),b=p.useCallback($=>{$!==j.current&&(j.current=$,v($))},[]),w=p.useCallback($=>{$!==S.current&&(S.current=$,y($))},[]),k=s||g,_=o||x,j=p.useRef(null),S=p.useRef(null),A=p.useRef(f),C=c!=null,T=aw(c),M=aw(a),F=aw(u),E=p.useCallback(()=>{if(!j.current||!S.current)return;const $={placement:t,strategy:n,middleware:h};M.current&&($.platform=M.current),wY(j.current,S.current,$).then(L=>{const N={...L,isPositioned:F.current!==!1};I.current&&!Kv(A.current,N)&&(A.current=N,Kc.flushSync(()=>{d(N)}))})},[h,t,n,M,F]);uv(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,d($=>({...$,isPositioned:!1})))},[u]);const I=p.useRef(!1);uv(()=>(I.current=!0,()=>{I.current=!1}),[]),uv(()=>{if(k&&(j.current=k),_&&(S.current=_),k&&_){if(T.current)return T.current(k,_,E);E()}},[k,_,E,T,C]);const P=p.useMemo(()=>({reference:j,floating:S,setReference:b,setFloating:w}),[b,w]),B=p.useMemo(()=>({reference:k,floating:_}),[k,_]),O=p.useMemo(()=>{const $={position:n,left:0,top:0};if(!B.floating)return $;const L=RP(B.floating,f.x),N=RP(B.floating,f.y);return l?{...$,transform:"translate("+L+"px, "+N+"px)",...w4(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:N}},[n,l,B.floating,f.x,f.y]);return p.useMemo(()=>({...f,update:E,refs:P,elements:B,floatingStyles:O}),[f,E,P,B,O])}const SY=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?IP({element:r.current,padding:a}).fn(n):{}:r?IP({element:r,padding:a}).fn(n):{}}}},NY=(e,t)=>({...pY(e),options:[e,t]}),CY=(e,t)=>({...gY(e),options:[e,t]}),AY=(e,t)=>({...bY(e),options:[e,t]}),EY=(e,t)=>({...vY(e),options:[e,t]}),PY=(e,t)=>({...xY(e),options:[e,t]}),TY=(e,t)=>({...yY(e),options:[e,t]}),OY=(e,t)=>({...SY(e),options:[e,t]});var IY="Arrow",j4=p.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...s}=e;return i.jsx(Qe.svg,{...s,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});j4.displayName=IY;var RY=j4;function uN(e){const[t,n]=p.useState(void 0);return Yn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const s=a[0];let o,l;if("borderBoxSize"in s){const c=s.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var dN="Popper",[_4,Al]=kr(dN),[MY,k4]=_4(dN),S4=e=>{const{__scopePopper:t,children:n}=e,[r,a]=p.useState(null);return i.jsx(MY,{scope:t,anchor:r,onAnchorChange:a,children:n})};S4.displayName=dN;var N4="PopperAnchor",C4=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,s=k4(N4,n),o=p.useRef(null),l=Nt(t,o);return p.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(Qe.div,{...a,ref:l})});C4.displayName=N4;var fN="PopperContent",[DY,$Y]=_4(fN),A4=p.forwardRef((e,t)=>{var V,ie,G,le,se,Z;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=e,x=k4(fN,n),[y,b]=p.useState(null),w=Nt(t,_e=>b(_e)),[k,_]=p.useState(null),j=uN(k),S=(j==null?void 0:j.width)??0,A=(j==null?void 0:j.height)??0,C=r+(s!=="center"?"-"+s:""),T=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},M=Array.isArray(u)?u:[u],F=M.length>0,E={padding:T,boundary:M.filter(FY),altBoundary:F},{refs:I,floatingStyles:P,placement:B,isPositioned:O,middlewareData:$}=kY({strategy:"fixed",placement:C,whileElementsMounted:(..._e)=>mY(..._e,{animationFrame:m==="always"}),elements:{reference:x.anchor},middleware:[NY({mainAxis:a+A,alignmentAxis:o}),c&&CY({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?AY():void 0,...E}),c&&EY({...E}),PY({...E,apply:({elements:_e,rects:z,availableWidth:q,availableHeight:ce})=>{const{width:ke,height:Ae}=z.reference,Pe=_e.floating.style;Pe.setProperty("--radix-popper-available-width",`${q}px`),Pe.setProperty("--radix-popper-available-height",`${ce}px`),Pe.setProperty("--radix-popper-anchor-width",`${ke}px`),Pe.setProperty("--radix-popper-anchor-height",`${Ae}px`)}}),k&&OY({element:k,padding:l}),BY({arrowWidth:S,arrowHeight:A}),h&&TY({strategy:"referenceHidden",...E})]}),[L,N]=T4(B),U=Vn(g);Yn(()=>{O&&(U==null||U())},[O,U]);const D=(V=$.arrow)==null?void 0:V.x,R=(ie=$.arrow)==null?void 0:ie.y,K=((G=$.arrow)==null?void 0:G.centerOffset)!==0,[Q,H]=p.useState();return Yn(()=>{y&&H(window.getComputedStyle(y).zIndex)},[y]),i.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...P,transform:O?P.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[(le=$.transformOrigin)==null?void 0:le.x,(se=$.transformOrigin)==null?void 0:se.y].join(" "),...((Z=$.hide)==null?void 0:Z.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(DY,{scope:n,placedSide:L,onArrowChange:_,arrowX:D,arrowY:R,shouldHideArrow:K,children:i.jsx(Qe.div,{"data-side":L,"data-align":N,...v,ref:w,style:{...v.style,animation:O?void 0:"none"}})})})});A4.displayName=fN;var E4="PopperArrow",LY={top:"bottom",right:"left",bottom:"top",left:"right"},P4=p.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,s=$Y(E4,r),o=LY[s.placedSide];return i.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:i.jsx(RY,{...a,ref:n,style:{...a.style,display:"block"}})})});P4.displayName=E4;function FY(e){return e!==null}var BY=e=>({name:"transformOrigin",options:e,fn(t){var x,y,b;const{placement:n,rects:r,middlewareData:a}=t,o=((x=a.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,f]=T4(n),d={start:"0%",center:"50%",end:"100%"}[f],h=(((y=a.arrow)==null?void 0:y.x)??0)+l/2,m=(((b=a.arrow)==null?void 0:b.y)??0)+c/2;let g="",v="";return u==="bottom"?(g=o?d:`${h}px`,v=`${-c}px`):u==="top"?(g=o?d:`${h}px`,v=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,v=o?d:`${m}px`):u==="left"&&(g=`${r.floating.width+c}px`,v=o?d:`${m}px`),{data:{x:g,y:v}}}});function T4(e){const[t,n="center"]=e.split("-");return[t,n]}var Ry=S4,hp=C4,My=A4,Dy=P4,[$y,h3e]=kr("Tooltip",[Al]),Ly=Al(),O4="TooltipProvider",UY=700,T1="tooltip.open",[zY,hN]=$y(O4),I4=e=>{const{__scopeTooltip:t,delayDuration:n=UY,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:s}=e,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(zY,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:s})};I4.displayName=O4;var tm="Tooltip",[qY,Fy]=$y(tm),R4=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:s,disableHoverableContent:o,delayDuration:l}=e,c=hN(tm,e.__scopeTooltip),u=Ly(t),[f,d]=p.useState(null),h=ar(),m=p.useRef(0),g=o??c.disableHoverableContent,v=l??c.delayDuration,x=p.useRef(!1),[y,b]=Ia({prop:r,defaultProp:a??!1,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(T1))):c.onClose(),s==null||s(S)},caller:tm}),w=p.useMemo(()=>y?x.current?"delayed-open":"instant-open":"closed",[y]),k=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,x.current=!1,b(!0)},[b]),_=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b(!1)},[b]),j=p.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{x.current=!0,b(!0),m.current=0},v)},[v,b]);return p.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),i.jsx(Ry,{...u,children:i.jsx(qY,{scope:t,contentId:h,open:y,stateAttribute:w,trigger:f,onTriggerChange:d,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayedRef.current?j():k()},[c.isOpenDelayedRef,j,k]),onTriggerLeave:p.useCallback(()=>{g?_():(window.clearTimeout(m.current),m.current=0)},[_,g]),onOpen:k,onClose:_,disableHoverableContent:g,children:n})})};R4.displayName=tm;var O1="TooltipTrigger",M4=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Fy(O1,n),s=hN(O1,n),o=Ly(n),l=p.useRef(null),c=Nt(t,l,a.onTriggerChange),u=p.useRef(!1),f=p.useRef(!1),d=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),i.jsx(hp,{asChild:!0,...o,children:i.jsx(Qe.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:De(e.onPointerMove,h=>{h.pointerType!=="touch"&&!f.current&&!s.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:De(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:De(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:De(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:De(e.onBlur,a.onClose),onClick:De(e.onClick,a.onClose)})})});M4.displayName=O1;var WY="TooltipPortal",[m3e,HY]=$y(WY,{forceMount:void 0}),Sd="TooltipContent",D4=p.forwardRef((e,t)=>{const n=HY(Sd,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...s}=e,o=Fy(Sd,e.__scopeTooltip);return i.jsx(pr,{present:r||o.open,children:o.disableHoverableContent?i.jsx($4,{side:a,...s,ref:t}):i.jsx(VY,{side:a,...s,ref:t})})}),VY=p.forwardRef((e,t)=>{const n=Fy(Sd,e.__scopeTooltip),r=hN(Sd,e.__scopeTooltip),a=p.useRef(null),s=Nt(t,a),[o,l]=p.useState(null),{trigger:c,onClose:u}=n,f=a.current,{onPointerInTransitChange:d}=r,h=p.useCallback(()=>{l(null),d(!1)},[d]),m=p.useCallback((g,v)=>{const x=g.currentTarget,y={x:g.clientX,y:g.clientY},b=JY(y,x.getBoundingClientRect()),w=QY(y,b),k=ZY(v.getBoundingClientRect()),_=tX([...w,...k]);l(_),d(!0)},[d]);return p.useEffect(()=>()=>h(),[h]),p.useEffect(()=>{if(c&&f){const g=x=>m(x,f),v=x=>m(x,c);return c.addEventListener("pointerleave",g),f.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",g),f.removeEventListener("pointerleave",v)}}},[c,f,m,h]),p.useEffect(()=>{if(o){const g=v=>{const x=v.target,y={x:v.clientX,y:v.clientY},b=(c==null?void 0:c.contains(x))||(f==null?void 0:f.contains(x)),w=!eX(y,o);b?h():w&&(h(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,f,o,u,h]),i.jsx($4,{...e,ref:s})}),[KY,GY]=$y(tm,{isInside:!1}),YY=pL("TooltipContent"),$4=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=e,c=Fy(Sd,n),u=Ly(n),{onClose:f}=c;return p.useEffect(()=>(document.addEventListener(T1,f),()=>document.removeEventListener(T1,f)),[f]),p.useEffect(()=>{if(c.trigger){const d=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&f()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,f]),i.jsx(Yc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:f,children:i.jsxs(My,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(YY,{children:r}),i.jsx(KY,{scope:n,isInside:!0,children:i.jsx(yV,{id:c.contentId,role:"tooltip",children:a||r})})]})})});D4.displayName=Sd;var L4="TooltipArrow",XY=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Ly(n);return GY(L4,n).isInside?null:i.jsx(Dy,{...a,...r,ref:t})});XY.displayName=L4;function JY(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,a,s)){case s:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function QY(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function ZY(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function eX(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,f=l.y,d=c.x,h=c.y;f>r!=h>r&&n<(d-u)*(r-f)/(h-f)+u&&(a=!a)}return a}function tX(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),nX(t)}function nX(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const s=t[t.length-1],o=t[t.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var rX=I4,aX=R4,iX=M4,F4=D4;const I1=rX,he=aX,me=iX,fe=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(F4,{ref:r,sideOffset:t,className:Se("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));fe.displayName=F4.displayName;var By=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Uy=typeof window>"u"||"Deno"in globalThis;function Mi(){}function sX(e,t){return typeof e=="function"?e(t):e}function oX(e){return typeof e=="number"&&e>=0&&e!==1/0}function lX(e,t){return Math.max(e+(t||0)-Date.now(),0)}function R1(e,t){return typeof e=="function"?e(t):e}function cX(e,t){return typeof e=="function"?e(t):e}function MP(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:s,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==mN(o,t.options))return!1}else if(!rm(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||s&&!s(t))}function DP(e,t){const{exact:n,status:r,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(n){if(nm(t.options.mutationKey)!==nm(s))return!1}else if(!rm(t.options.mutationKey,s))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function mN(e,t){return((t==null?void 0:t.queryKeyHashFn)||nm)(e)}function nm(e){return JSON.stringify(e,(t,n)=>M1(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function rm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>rm(e[n],t[n])):!1}function B4(e,t){if(e===t)return e;const n=$P(e)&&$P(t);if(n||M1(e)&&M1(t)){const r=n?e:Object.keys(e),a=r.length,s=n?t:Object.keys(t),o=s.length,l=n?[]:{},c=new Set(r);let u=0;for(let f=0;f<o;f++){const d=n?f:s[f];(!n&&c.has(d)||n)&&e[d]===void 0&&t[d]===void 0?(l[d]=void 0,u++):(l[d]=B4(e[d],t[d]),l[d]===e[d]&&e[d]!==void 0&&u++)}return a===o&&u===a?e:l}return t}function $P(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function M1(e){if(!LP(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!LP(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function LP(e){return Object.prototype.toString.call(e)==="[object Object]"}function uX(e){return new Promise(t=>{setTimeout(t,e)})}function dX(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?B4(e,t):t}function fX(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function hX(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var pN=Symbol();function U4(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===pN?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var dc,Yo,cd,VM,mX=(VM=class extends By{constructor(){super();tn(this,dc);tn(this,Yo);tn(this,cd);At(this,cd,t=>{if(!Uy&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Ce(this,Yo)||this.setEventListener(Ce(this,cd))}onUnsubscribe(){var t;this.hasListeners()||((t=Ce(this,Yo))==null||t.call(this),At(this,Yo,void 0))}setEventListener(t){var n;At(this,cd,t),(n=Ce(this,Yo))==null||n.call(this),At(this,Yo,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Ce(this,dc)!==t&&(At(this,dc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Ce(this,dc)=="boolean"?Ce(this,dc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},dc=new WeakMap,Yo=new WeakMap,cd=new WeakMap,VM),z4=new mX,ud,Xo,dd,KM,pX=(KM=class extends By{constructor(){super();tn(this,ud,!0);tn(this,Xo);tn(this,dd);At(this,dd,t=>{if(!Uy&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Ce(this,Xo)||this.setEventListener(Ce(this,dd))}onUnsubscribe(){var t;this.hasListeners()||((t=Ce(this,Xo))==null||t.call(this),At(this,Xo,void 0))}setEventListener(t){var n;At(this,dd,t),(n=Ce(this,Xo))==null||n.call(this),At(this,Xo,t(this.setOnline.bind(this)))}setOnline(t){Ce(this,ud)!==t&&(At(this,ud,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Ce(this,ud)}},ud=new WeakMap,Xo=new WeakMap,dd=new WeakMap,KM),Gv=new pX;function gX(){let e,t;const n=new Promise((a,s)=>{e=a,t=s});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}function vX(e){return Math.min(1e3*2**e,3e4)}function q4(e){return(e??"online")==="online"?Gv.isOnline():!0}var W4=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function iw(e){return e instanceof W4}function H4(e){let t=!1,n=0,r=!1,a;const s=gX(),o=v=>{var x;r||(h(new W4(v)),(x=e.abort)==null||x.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>z4.isFocused()&&(e.networkMode==="always"||Gv.isOnline())&&e.canRun(),f=()=>q4(e.networkMode)&&e.canRun(),d=v=>{var x;r||(r=!0,(x=e.onSuccess)==null||x.call(e,v),a==null||a(),s.resolve(v))},h=v=>{var x;r||(r=!0,(x=e.onError)==null||x.call(e,v),a==null||a(),s.reject(v))},m=()=>new Promise(v=>{var x;a=y=>{(r||u())&&v(y)},(x=e.onPause)==null||x.call(e)}).then(()=>{var v;a=void 0,r||(v=e.onContinue)==null||v.call(e)}),g=()=>{if(r)return;let v;const x=n===0?e.initialPromise:void 0;try{v=x??e.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(d).catch(y=>{var j;if(r)return;const b=e.retry??(Uy?0:3),w=e.retryDelay??vX,k=typeof w=="function"?w(n,y):w,_=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(t||!_){h(y);return}n++,(j=e.onFail)==null||j.call(e,n,y),uX(k).then(()=>u()?void 0:m()).then(()=>{t?h(y):g()})})};return{promise:s,cancel:o,continue:()=>(a==null||a(),s),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?g():m().then(g),s)}}var xX=e=>setTimeout(e,0);function yX(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=xX;const s=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var sa=yX(),fc,GM,V4=(GM=class{constructor(){tn(this,fc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),oX(this.gcTime)&&At(this,fc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Uy?1/0:5*60*1e3))}clearGcTimeout(){Ce(this,fc)&&(clearTimeout(Ce(this,fc)),At(this,fc,void 0))}},fc=new WeakMap,GM),fd,hc,oi,mc,Ur,ep,pc,$i,Bs,YM,bX=(YM=class extends V4{constructor(t){super();tn(this,$i);tn(this,fd);tn(this,hc);tn(this,oi);tn(this,mc);tn(this,Ur);tn(this,ep);tn(this,pc);At(this,pc,!1),At(this,ep,t.defaultOptions),this.setOptions(t.options),this.observers=[],At(this,mc,t.client),At(this,oi,Ce(this,mc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,At(this,fd,jX(this.options)),this.state=t.state??Ce(this,fd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ce(this,Ur))==null?void 0:t.promise}setOptions(t){this.options={...Ce(this,ep),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ce(this,oi).remove(this)}setData(t,n){const r=dX(this.state.data,t,this.options);return Lr(this,$i,Bs).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Lr(this,$i,Bs).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=Ce(this,Ur))==null?void 0:r.promise;return(a=Ce(this,Ur))==null||a.cancel(t),n?n.then(Mi).catch(Mi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ce(this,fd))}isActive(){return this.observers.some(t=>cX(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===pN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>R1(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!lX(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Ce(this,Ur))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Ce(this,Ur))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ce(this,oi).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Ce(this,Ur)&&(Ce(this,pc)?Ce(this,Ur).cancel({revert:!0}):Ce(this,Ur).cancelRetry()),this.scheduleGc()),Ce(this,oi).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Lr(this,$i,Bs).call(this,{type:"invalidate"})}fetch(t,n){var u,f,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Ce(this,Ur))return Ce(this,Ur).continueRetry(),Ce(this,Ur).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(At(this,pc,!0),r.signal)})},s=()=>{const h=U4(this.options,n),g=(()=>{const v={client:Ce(this,mc),queryKey:this.queryKey,meta:this.meta};return a(v),v})();return At(this,pc,!1),this.options.persister?this.options.persister(h,g,this):h(g)},l=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Ce(this,mc),state:this.state,fetchFn:s};return a(h),h})();(u=this.options.behavior)==null||u.onFetch(l,this),At(this,hc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&Lr(this,$i,Bs).call(this,{type:"fetch",meta:(d=l.fetchOptions)==null?void 0:d.meta});const c=h=>{var m,g,v,x;iw(h)&&h.silent||Lr(this,$i,Bs).call(this,{type:"error",error:h}),iw(h)||((g=(m=Ce(this,oi).config).onError)==null||g.call(m,h,this),(x=(v=Ce(this,oi).config).onSettled)==null||x.call(v,this.state.data,h,this)),this.scheduleGc()};return At(this,Ur,H4({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var m,g,v,x;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(g=(m=Ce(this,oi).config).onSuccess)==null||g.call(m,h,this),(x=(v=Ce(this,oi).config).onSettled)==null||x.call(v,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,m)=>{Lr(this,$i,Bs).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{Lr(this,$i,Bs).call(this,{type:"pause"})},onContinue:()=>{Lr(this,$i,Bs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Ce(this,Ur).start()}},fd=new WeakMap,hc=new WeakMap,oi=new WeakMap,mc=new WeakMap,Ur=new WeakMap,ep=new WeakMap,pc=new WeakMap,$i=new WeakSet,Bs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...wX(r.data,this.options),fetchMeta:t.meta??null};case"success":return At(this,hc,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return iw(a)&&a.revert&&Ce(this,hc)?{...Ce(this,hc),fetchStatus:"idle"}:{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),sa.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Ce(this,oi).notify({query:this,type:"updated",action:t})})},YM);function wX(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:q4(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function jX(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var fs,XM,_X=(XM=class extends By{constructor(t={}){super();tn(this,fs);this.config=t,At(this,fs,new Map)}build(t,n,r){const a=n.queryKey,s=n.queryHash??mN(a,n);let o=this.get(s);return o||(o=new bX({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Ce(this,fs).has(t.queryHash)||(Ce(this,fs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Ce(this,fs).get(t.queryHash);n&&(t.destroy(),n===t&&Ce(this,fs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){sa.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ce(this,fs).get(t)}getAll(){return[...Ce(this,fs).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>MP(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>MP(t,r)):n}notify(t){sa.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){sa.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){sa.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},fs=new WeakMap,XM),hs,ta,gc,ms,Lo,JM,kX=(JM=class extends V4{constructor(t){super();tn(this,ms);tn(this,hs);tn(this,ta);tn(this,gc);this.mutationId=t.mutationId,At(this,ta,t.mutationCache),At(this,hs,[]),this.state=t.state||SX(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ce(this,hs).includes(t)||(Ce(this,hs).push(t),this.clearGcTimeout(),Ce(this,ta).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){At(this,hs,Ce(this,hs).filter(n=>n!==t)),this.scheduleGc(),Ce(this,ta).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ce(this,hs).length||(this.state.status==="pending"?this.scheduleGc():Ce(this,ta).remove(this))}continue(){var t;return((t=Ce(this,gc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,l,c,u,f,d,h,m,g,v,x,y,b,w,k,_,j,S,A;const n=()=>{Lr(this,ms,Lo).call(this,{type:"continue"})};At(this,gc,H4({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,T)=>{Lr(this,ms,Lo).call(this,{type:"failed",failureCount:C,error:T})},onPause:()=>{Lr(this,ms,Lo).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ce(this,ta).canRun(this)}));const r=this.state.status==="pending",a=!Ce(this,gc).canStart();try{if(r)n();else{Lr(this,ms,Lo).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(s=Ce(this,ta).config).onMutate)==null?void 0:o.call(s,t,this));const T=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));T!==this.state.context&&Lr(this,ms,Lo).call(this,{type:"pending",context:T,variables:t,isPaused:a})}const C=await Ce(this,gc).start();return await((f=(u=Ce(this,ta).config).onSuccess)==null?void 0:f.call(u,C,t,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,C,t,this.state.context)),await((g=(m=Ce(this,ta).config).onSettled)==null?void 0:g.call(m,C,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,C,null,t,this.state.context)),Lr(this,ms,Lo).call(this,{type:"success",data:C}),C}catch(C){try{throw await((b=(y=Ce(this,ta).config).onError)==null?void 0:b.call(y,C,t,this.state.context,this)),await((k=(w=this.options).onError)==null?void 0:k.call(w,C,t,this.state.context)),await((j=(_=Ce(this,ta).config).onSettled)==null?void 0:j.call(_,void 0,C,this.state.variables,this.state.context,this)),await((A=(S=this.options).onSettled)==null?void 0:A.call(S,void 0,C,t,this.state.context)),C}finally{Lr(this,ms,Lo).call(this,{type:"error",error:C})}}finally{Ce(this,ta).runNext(this)}}},hs=new WeakMap,ta=new WeakMap,gc=new WeakMap,ms=new WeakSet,Lo=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),sa.batch(()=>{Ce(this,hs).forEach(r=>{r.onMutationUpdate(t)}),Ce(this,ta).notify({mutation:this,type:"updated",action:t})})},JM);function SX(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Vs,Li,tp,QM,NX=(QM=class extends By{constructor(t={}){super();tn(this,Vs);tn(this,Li);tn(this,tp);this.config=t,At(this,Vs,new Set),At(this,Li,new Map),At(this,tp,0)}build(t,n,r){const a=new kX({mutationCache:this,mutationId:++Hp(this,tp)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){Ce(this,Vs).add(t);const n=hg(t);if(typeof n=="string"){const r=Ce(this,Li).get(n);r?r.push(t):Ce(this,Li).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ce(this,Vs).delete(t)){const n=hg(t);if(typeof n=="string"){const r=Ce(this,Li).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&Ce(this,Li).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=hg(t);if(typeof n=="string"){const r=Ce(this,Li).get(n),a=r==null?void 0:r.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=hg(t);if(typeof n=="string"){const a=(r=Ce(this,Li).get(n))==null?void 0:r.find(s=>s!==t&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){sa.batch(()=>{Ce(this,Vs).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ce(this,Vs).clear(),Ce(this,Li).clear()})}getAll(){return Array.from(Ce(this,Vs))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>DP(n,r))}findAll(t={}){return this.getAll().filter(n=>DP(t,n))}notify(t){sa.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return sa.batch(()=>Promise.all(t.map(n=>n.continue().catch(Mi))))}},Vs=new WeakMap,Li=new WeakMap,tp=new WeakMap,QM);function hg(e){var t;return(t=e.options.scope)==null?void 0:t.id}function FP(e){return{onFetch:(t,n)=>{var f,d,h,m,g;const r=t.options,a=(h=(d=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,s=((m=t.state.data)==null?void 0:m.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const x=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},y=U4(t.options,t.fetchOptions),b=async(w,k,_)=>{if(v)return Promise.reject();if(k==null&&w.pages.length)return Promise.resolve(w);const S=(()=>{const M={client:t.client,queryKey:t.queryKey,pageParam:k,direction:_?"backward":"forward",meta:t.options.meta};return x(M),M})(),A=await y(S),{maxPages:C}=t.options,T=_?hX:fX;return{pages:T(w.pages,A,C),pageParams:T(w.pageParams,k,C)}};if(a&&s.length){const w=a==="backward",k=w?CX:BP,_={pages:s,pageParams:o},j=k(r,_);l=await b(_,j,w)}else{const w=e??s.length;do{const k=c===0?o[0]??r.initialPageParam:BP(r,l);if(c>0&&k==null)break;l=await b(l,k),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var v,x;return(x=(v=t.options).persister)==null?void 0:x.call(v,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function BP(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function CX(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var zn,Jo,Qo,hd,md,Zo,pd,gd,ZM,AX=(ZM=class{constructor(e={}){tn(this,zn);tn(this,Jo);tn(this,Qo);tn(this,hd);tn(this,md);tn(this,Zo);tn(this,pd);tn(this,gd);At(this,zn,e.queryCache||new _X),At(this,Jo,e.mutationCache||new NX),At(this,Qo,e.defaultOptions||{}),At(this,hd,new Map),At(this,md,new Map),At(this,Zo,0)}mount(){Hp(this,Zo)._++,Ce(this,Zo)===1&&(At(this,pd,z4.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ce(this,zn).onFocus())})),At(this,gd,Gv.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ce(this,zn).onOnline())})))}unmount(){var e,t;Hp(this,Zo)._--,Ce(this,Zo)===0&&((e=Ce(this,pd))==null||e.call(this),At(this,pd,void 0),(t=Ce(this,gd))==null||t.call(this),At(this,gd,void 0))}isFetching(e){return Ce(this,zn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ce(this,Jo).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Ce(this,zn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Ce(this,zn).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(R1(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Ce(this,zn).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=Ce(this,zn).get(r.queryHash),s=a==null?void 0:a.state.data,o=sX(t,s);if(o!==void 0)return Ce(this,zn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return sa.batch(()=>Ce(this,zn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Ce(this,zn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Ce(this,zn);sa.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Ce(this,zn);return sa.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=sa.batch(()=>Ce(this,zn).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(Mi).catch(Mi)}invalidateQueries(e,t={}){return sa.batch(()=>(Ce(this,zn).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=sa.batch(()=>Ce(this,zn).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,n);return n.throwOnError||(s=s.catch(Mi)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Mi)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Ce(this,zn).build(this,t);return n.isStaleByTime(R1(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Mi).catch(Mi)}fetchInfiniteQuery(e){return e.behavior=FP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Mi).catch(Mi)}ensureInfiniteQueryData(e){return e.behavior=FP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Gv.isOnline()?Ce(this,Jo).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ce(this,zn)}getMutationCache(){return Ce(this,Jo)}getDefaultOptions(){return Ce(this,Qo)}setDefaultOptions(e){At(this,Qo,e)}setQueryDefaults(e,t){Ce(this,hd).set(nm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ce(this,hd).values()],n={};return t.forEach(r=>{rm(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){Ce(this,md).set(nm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ce(this,md).values()],n={};return t.forEach(r=>{rm(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ce(this,Qo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=mN(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===pN&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ce(this,Qo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ce(this,zn).clear(),Ce(this,Jo).clear()}},zn=new WeakMap,Jo=new WeakMap,Qo=new WeakMap,hd=new WeakMap,md=new WeakMap,Zo=new WeakMap,pd=new WeakMap,gd=new WeakMap,ZM),EX=p.createContext(void 0),PX=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(EX.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function am(){return am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},am.apply(this,arguments)}var nl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(nl||(nl={}));const UP="popstate";function TX(e){e===void 0&&(e={});function t(r,a){let{pathname:s,search:o,hash:l}=r.location;return D1("",{pathname:s,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Yv(a)}return IX(t,n,null,e)}function ir(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function K4(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function OX(){return Math.random().toString(36).substr(2,8)}function zP(e,t){return{usr:e.state,key:e.key,idx:t}}function D1(e,t,n,r){return n===void 0&&(n=null),am({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?of(t):t,{state:n,key:t&&t.key||r||OX()})}function Yv(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function of(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function IX(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:s=!1}=r,o=a.history,l=nl.Pop,c=null,u=f();u==null&&(u=0,o.replaceState(am({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function d(){l=nl.Pop;let x=f(),y=x==null?null:x-u;u=x,c&&c({action:l,location:v.location,delta:y})}function h(x,y){l=nl.Push;let b=D1(v.location,x,y);u=f()+1;let w=zP(b,u),k=v.createHref(b);try{o.pushState(w,"",k)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;a.location.assign(k)}s&&c&&c({action:l,location:v.location,delta:1})}function m(x,y){l=nl.Replace;let b=D1(v.location,x,y);u=f();let w=zP(b,u),k=v.createHref(b);o.replaceState(w,"",k),s&&c&&c({action:l,location:v.location,delta:0})}function g(x){let y=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof x=="string"?x:Yv(x);return b=b.replace(/ $/,"%20"),ir(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let v={get action(){return l},get location(){return e(a,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(UP,d),c=x,()=>{a.removeEventListener(UP,d),c=null}},createHref(x){return t(a,x)},createURL:g,encodeLocation(x){let y=g(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(x){return o.go(x)}};return v}var qP;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qP||(qP={}));function RX(e,t,n){return n===void 0&&(n="/"),MX(e,t,n,!1)}function MX(e,t,n,r){let a=typeof t=="string"?of(t):t,s=gN(a.pathname||"/",n);if(s==null)return null;let o=G4(e);DX(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=KX(s);l=HX(o[c],u,r)}return l}function G4(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(ir(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=fl([r,c.relativePath]),f=n.concat(c);s.children&&s.children.length>0&&(ir(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),G4(s.children,t,f,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:qX(u,s.index),routesMeta:f})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let c of Y4(s.path))a(s,o,c)}),t}function Y4(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return a?[s,""]:[s];let o=Y4(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function DX(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:WX(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $X=/^:[\w-]+$/,LX=3,FX=2,BX=1,UX=10,zX=-2,WP=e=>e==="*";function qX(e,t){let n=e.split("/"),r=n.length;return n.some(WP)&&(r+=zX),t&&(r+=FX),n.filter(a=>!WP(a)).reduce((a,s)=>a+($X.test(s)?LX:s===""?BX:UX),r)}function WX(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function HX(e,t,n){let{routesMeta:r}=e,a={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,f=s==="/"?t:t.slice(s.length)||"/",d=HP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=HP({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!d)return null;Object.assign(a,d.params),o.push({params:a,pathname:fl([s,d.pathname]),pathnameBase:JX(fl([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=fl([s,d.pathnameBase]))}return o}function HP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=VX(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let s=a[0],o=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((u,f,d)=>{let{paramName:h,isOptional:m}=f;if(h==="*"){let v=l[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[d];return m&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function VX(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),K4(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function KX(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return K4(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function gN(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function GX(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?of(e):e;return{pathname:n?n.startsWith("/")?n:YX(n,t):t,search:QX(r),hash:ZX(a)}}function YX(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function sw(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XX(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function X4(e,t){let n=XX(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function J4(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=of(e):(a=am({},e),ir(!a.pathname||!a.pathname.includes("?"),sw("?","pathname","search",a)),ir(!a.pathname||!a.pathname.includes("#"),sw("#","pathname","hash",a)),ir(!a.search||!a.search.includes("#"),sw("#","search","hash",a)));let s=e===""||a.pathname==="",o=s?"/":a.pathname,l;if(o==null)l=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;a.pathname=h.join("/")}l=d>=0?t[d]:"/"}let c=GX(a,l),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const fl=e=>e.join("/").replace(/\/\/+/g,"/"),JX=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),QX=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ZX=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function eJ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Q4=["post","put","patch","delete"];new Set(Q4);const tJ=["get",...Q4];new Set(tJ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function im(){return im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},im.apply(this,arguments)}const vN=p.createContext(null),nJ=p.createContext(null),Xc=p.createContext(null),zy=p.createContext(null),El=p.createContext({outlet:null,matches:[],isDataRoute:!1}),Z4=p.createContext(null);function rJ(e,t){let{relative:n}=t===void 0?{}:t;mp()||ir(!1);let{basename:r,navigator:a}=p.useContext(Xc),{hash:s,pathname:o,search:l}=tF(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:fl([r,o])),a.createHref({pathname:c,search:l,hash:s})}function mp(){return p.useContext(zy)!=null}function Pl(){return mp()||ir(!1),p.useContext(zy).location}function eF(e){p.useContext(Xc).static||p.useLayoutEffect(e)}function Za(){let{isDataRoute:e}=p.useContext(El);return e?vJ():aJ()}function aJ(){mp()||ir(!1);let e=p.useContext(vN),{basename:t,future:n,navigator:r}=p.useContext(Xc),{matches:a}=p.useContext(El),{pathname:s}=Pl(),o=JSON.stringify(X4(a,n.v7_relativeSplatPath)),l=p.useRef(!1);return eF(()=>{l.current=!0}),p.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=J4(u,JSON.parse(o),s,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:fl([t,d.pathname])),(f.replace?r.replace:r.push)(d,f.state,f)},[t,r,o,s,e])}function iJ(){let{matches:e}=p.useContext(El),t=e[e.length-1];return t?t.params:{}}function tF(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=p.useContext(Xc),{matches:a}=p.useContext(El),{pathname:s}=Pl(),o=JSON.stringify(X4(a,r.v7_relativeSplatPath));return p.useMemo(()=>J4(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function sJ(e,t){return oJ(e,t)}function oJ(e,t,n,r){mp()||ir(!1);let{navigator:a}=p.useContext(Xc),{matches:s}=p.useContext(El),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Pl(),f;if(t){var d;let x=typeof t=="string"?of(t):t;c==="/"||(d=x.pathname)!=null&&d.startsWith(c)||ir(!1),f=x}else f=u;let h=f.pathname||"/",m=h;if(c!=="/"){let x=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let g=RX(e,{pathname:m}),v=fJ(g&&g.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:fl([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:fl([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return t&&v?p.createElement(zy.Provider,{value:{location:im({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:nl.Pop}},v):v}function lJ(){let e=gJ(),t=eJ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:a},n):null,null)}const cJ=p.createElement(lJ,null);class uJ extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement(El.Provider,{value:this.props.routeContext},p.createElement(Z4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dJ(e){let{routeContext:t,match:n,children:r}=e,a=p.useContext(vN);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(El.Provider,{value:t},r)}function fJ(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let f=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);f>=0||ir(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:m}=n,g=d.route.loader&&h[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,d,h)=>{let m,g=!1,v=null,x=null;n&&(m=l&&d.route.id?l[d.route.id]:void 0,v=d.route.errorElement||cJ,c&&(u<0&&h===0?(g=!0,x=null):u===h&&(g=!0,x=d.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,h+1)),b=()=>{let w;return m?w=v:g?w=x:d.route.Component?w=p.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=f,p.createElement(dJ,{match:d,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?p.createElement(uJ,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var nF=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(nF||{}),Xv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Xv||{});function hJ(e){let t=p.useContext(vN);return t||ir(!1),t}function mJ(e){let t=p.useContext(nJ);return t||ir(!1),t}function pJ(e){let t=p.useContext(El);return t||ir(!1),t}function rF(e){let t=pJ(),n=t.matches[t.matches.length-1];return n.route.id||ir(!1),n.route.id}function gJ(){var e;let t=p.useContext(Z4),n=mJ(Xv.UseRouteError),r=rF(Xv.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function vJ(){let{router:e}=hJ(nF.UseNavigateStable),t=rF(Xv.UseNavigateStable),n=p.useRef(!1);return eF(()=>{n.current=!0}),p.useCallback(function(a,s){s===void 0&&(s={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,im({fromRouteId:t},s)))},[e,t])}function xJ(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function $a(e){ir(!1)}function yJ(e){let{basename:t="/",children:n=null,location:r,navigationType:a=nl.Pop,navigator:s,static:o=!1,future:l}=e;mp()&&ir(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:s,static:o,future:im({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=of(r));let{pathname:f="/",search:d="",hash:h="",state:m=null,key:g="default"}=r,v=p.useMemo(()=>{let x=gN(f,c);return x==null?null:{location:{pathname:x,search:d,hash:h,state:m,key:g},navigationType:a}},[c,f,d,h,m,g,a]);return v==null?null:p.createElement(Xc.Provider,{value:u},p.createElement(zy.Provider,{children:n,value:v}))}function bJ(e){let{children:t,location:n}=e;return sJ($1(t),n)}new Promise(()=>{});function $1(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,a)=>{if(!p.isValidElement(r))return;let s=[...t,a];if(r.type===p.Fragment){n.push.apply(n,$1(r.props.children,s));return}r.type!==$a&&ir(!1),!r.props.index||!r.props.children||ir(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=$1(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function L1(){return L1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L1.apply(this,arguments)}function wJ(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function jJ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function _J(e,t){return e.button===0&&(!t||t==="_self")&&!jJ(e)}function F1(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function kJ(e,t){let n=F1(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(s=>{n.append(a,s)})}),n}const SJ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NJ="6";try{window.__reactRouterVersion=NJ}catch{}const CJ="startTransition",VP=nS[CJ];function AJ(e){let{basename:t,children:n,future:r,window:a}=e,s=p.useRef();s.current==null&&(s.current=TX({window:a,v5Compat:!0}));let o=s.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},f=p.useCallback(d=>{u&&VP?VP(()=>c(d)):c(d)},[c,u]);return p.useLayoutEffect(()=>o.listen(f),[o,f]),p.useEffect(()=>xJ(r),[r]),p.createElement(yJ,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const EJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PJ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KP=p.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:f,viewTransition:d}=t,h=wJ(t,SJ),{basename:m}=p.useContext(Xc),g,v=!1;if(typeof u=="string"&&PJ.test(u)&&(g=u,EJ))try{let w=new URL(window.location.href),k=u.startsWith("//")?new URL(w.protocol+u):new URL(u),_=gN(k.pathname,m);k.origin===w.origin&&_!=null?u=_+k.search+k.hash:v=!0}catch{}let x=rJ(u,{relative:a}),y=TJ(u,{replace:o,state:l,target:c,preventScrollReset:f,relative:a,viewTransition:d});function b(w){r&&r(w),w.defaultPrevented||y(w)}return p.createElement("a",L1({},h,{href:g||x,onClick:v||s?r:b,ref:n,target:c}))});var GP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(GP||(GP={}));var YP;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(YP||(YP={}));function TJ(e,t){let{target:n,replace:r,state:a,preventScrollReset:s,relative:o,viewTransition:l}=t===void 0?{}:t,c=Za(),u=Pl(),f=tF(e,{relative:o});return p.useCallback(d=>{if(_J(d,n)){d.preventDefault();let h=r!==void 0?r:Yv(u)===Yv(f);c(e,{replace:h,state:a,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,f,r,a,n,e,s,o,l])}function xN(e){let t=p.useRef(F1(e)),n=p.useRef(!1),r=Pl(),a=p.useMemo(()=>kJ(r.search,n.current?null:t.current),[r.search]),s=Za(),o=p.useCallback((l,c)=>{const u=F1(typeof l=="function"?l(a):l);n.current=!0,s("?"+u,c)},[s,a]);return[a,o]}const OJ="modulepreload",IJ=function(e){return"/"+e},XP={},ao=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=IJ(c),c in XP)return;XP[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":OJ,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((h,m)=>{d.addEventListener("load",h),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},RJ=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ao(async()=>{const{default:r}=await Promise.resolve().then(()=>lf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class yN extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class MJ extends yN{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class JP extends yN{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class QP extends yN{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var B1;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(B1||(B1={}));var DJ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class $J{constructor(t,{headers:n={},customFetch:r,region:a=B1.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=RJ(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return DJ(this,void 0,void 0,function*(){try{const{headers:a,method:s,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let f;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=o):typeof o=="string"?(l["Content-Type"]="text/plain",f=o):typeof FormData<"u"&&o instanceof FormData?f=o:(l["Content-Type"]="application/json",f=JSON.stringify(o)));const d=yield this.fetch(u.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:f}).catch(v=>{throw new MJ(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new JP(d);if(!d.ok)throw new QP(d);let m=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield d.json():m==="application/octet-stream"?g=yield d.blob():m==="text/event-stream"?g=d:m==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null,response:d}}catch(a){return{data:null,error:a,response:a instanceof QP||a instanceof JP?a.context:void 0}}})}}var _a={},bN={},qy={},pp={},Wy={},Hy={},LJ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Nd=LJ();const FJ=Nd.fetch,aF=Nd.fetch.bind(Nd),iF=Nd.Headers,BJ=Nd.Request,UJ=Nd.Response,lf=Object.freeze(Object.defineProperty({__proto__:null,Headers:iF,Request:BJ,Response:UJ,default:aF,fetch:FJ},Symbol.toStringTag,{value:"Module"})),zJ=xW(lf);var Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});let qJ=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Vy.default=qJ;var sF=rr&&rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hy,"__esModule",{value:!0});const WJ=sF(zJ),HJ=sF(Vy);let VJ=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=WJ.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,l,c;let u=null,f=null,d=null,h=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=y:f=JSON.parse(y))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,d=null,h=406,m="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const v=await s.text();try{u=JSON.parse(v),Array.isArray(u)&&s.status===404&&(f=[],u=null,h=200,m="OK")}catch{s.status===404&&v===""?(h=204,m="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,m="OK"),u&&this.shouldThrowOnError)throw new HJ.default(u)}return{error:u,data:f,count:d,status:h,statusText:m}});return this.shouldThrowOnError||(a=a.catch(s=>{var o,l,c;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};Hy.default=VJ;var KJ=rr&&rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wy,"__esModule",{value:!0});const GJ=KJ(Hy);let YJ=class extends GJ.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:s=a}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const s=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:s=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Wy.default=YJ;var XJ=rr&&rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pp,"__esModule",{value:!0});const JJ=XJ(Wy);let QJ=class extends JJ.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let s="";a==="plain"?s="pl":a==="phrase"?s="ph":a==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};pp.default=QJ;var ZJ=rr&&rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qy,"__esModule",{value:!0});const $f=ZJ(pp);let eQ=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=n,this.schema=r,this.fetch=a}select(t,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let s=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new $f.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const a="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new $f.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:s=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new $f.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new $f.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new $f.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};qy.default=eQ;var Ky={},Gy={};Object.defineProperty(Gy,"__esModule",{value:!0});Gy.version=void 0;Gy.version="0.0.0-automated";Object.defineProperty(Ky,"__esModule",{value:!0});Ky.DEFAULT_HEADERS=void 0;const tQ=Gy;Ky.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${tQ.version}`};var oF=rr&&rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bN,"__esModule",{value:!0});const nQ=oF(qy),rQ=oF(pp),aQ=Ky;let iQ=class lF{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},aQ.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new nQ.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new lF(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:s}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;r||a?(o=r?"HEAD":"GET",Object.entries(n).filter(([f,d])=>d!==void 0).map(([f,d])=>[f,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([f,d])=>{l.searchParams.append(f,d)})):(o="POST",c=n);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new rQ.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};bN.default=iQ;var cf=rr&&rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_a,"__esModule",{value:!0});_a.PostgrestError=_a.PostgrestBuilder=_a.PostgrestTransformBuilder=_a.PostgrestFilterBuilder=_a.PostgrestQueryBuilder=_a.PostgrestClient=void 0;const cF=cf(bN);_a.PostgrestClient=cF.default;const uF=cf(qy);_a.PostgrestQueryBuilder=uF.default;const dF=cf(pp);_a.PostgrestFilterBuilder=dF.default;const fF=cf(Wy);_a.PostgrestTransformBuilder=fF.default;const hF=cf(Hy);_a.PostgrestBuilder=hF.default;const mF=cf(Vy);_a.PostgrestError=mF.default;var sQ=_a.default={PostgrestClient:cF.default,PostgrestQueryBuilder:uF.default,PostgrestFilterBuilder:dF.default,PostgrestTransformBuilder:fF.default,PostgrestBuilder:hF.default,PostgrestError:mF.default};const{PostgrestClient:oQ,PostgrestQueryBuilder:b3e,PostgrestFilterBuilder:w3e,PostgrestTransformBuilder:j3e,PostgrestBuilder:_3e,PostgrestError:k3e}=sQ;class lQ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const cQ="2.15.1",uQ=`realtime-js/${cQ}`,dQ="1.0.0",U1=1e4,fQ=1e3,hQ=100;var _h;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(_h||(_h={}));var ur;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ur||(ur={}));var Bi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Bi||(Bi={}));var z1;(function(e){e.websocket="websocket"})(z1||(z1={}));var tc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(tc||(tc={}));class mQ{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class pF{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var bn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(bn||(bn={}));const ZP=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((s,o)=>(s[o]=pQ(o,e,t,a),s),{})},pQ=(e,t,n,r)=>{const a=t.find(l=>l.name===e),s=a==null?void 0:a.type,o=n[e];return s&&!r.includes(s)?gF(s,o):q1(o)},gF=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return yQ(t,n)}switch(e){case bn.bool:return gQ(t);case bn.float4:case bn.float8:case bn.int2:case bn.int4:case bn.int8:case bn.numeric:case bn.oid:return vQ(t);case bn.json:case bn.jsonb:return xQ(t);case bn.timestamp:return bQ(t);case bn.abstime:case bn.date:case bn.daterange:case bn.int4range:case bn.int8range:case bn.money:case bn.reltime:case bn.text:case bn.time:case bn.timestamptz:case bn.timetz:case bn.tsrange:case bn.tstzrange:return q1(t);default:return q1(t)}},q1=e=>e,gQ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},vQ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},xQ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},yQ=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let s;const o=e.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>gF(t,l))}return e},bQ=e=>typeof e=="string"?e.replace(" ","T"):e,vF=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ow{constructor(t,n,r={},a=U1){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var eT;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(eT||(eT={}));class kh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=kh.syncState(this.state,a,s,o),this.pendingDiffs.forEach(c=>{this.state=kh.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=kh.syncDiff(this.state,a,s,o),l())}),this.onJoin((a,s,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:o})}),this.onLeave((a,s,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const s=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(s,(u,f)=>{o[u]||(c[u]=f)}),this.map(o,(u,f)=>{const d=s[u];if(d){const h=f.map(x=>x.presence_ref),m=d.map(x=>x.presence_ref),g=f.filter(x=>m.indexOf(x.presence_ref)<0),v=d.filter(x=>h.indexOf(x.presence_ref)<0);g.length>0&&(l[u]=g),v.length>0&&(c[u]=v)}else l[u]=f}),this.syncDiff(s,{joins:l,leaves:c},r,a)}static syncDiff(t,n,r,a){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(s,(l,c)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),f.length>0){const d=t[l].map(m=>m.presence_ref),h=f.filter(m=>d.indexOf(m.presence_ref)<0);t[l].unshift(...h)}r(l,f,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const f=c.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var tT;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(tT||(tT={}));var Sh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Sh||(Sh={}));var qs;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(qs||(qs={}));class wN{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=ur.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ow(this,Bi.join,this.params,this.timeout),this.rejoinTimer=new pF(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ur.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ur.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bi.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new kh(this),this.broadcastEndpointURL=vF(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ur.closed){const{config:{broadcast:s,presence:o,private:l}}=this.params,c=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[Sh.PRESENCE]&&this.bindings[Sh.PRESENCE].length>0,f={},d={broadcast:s,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(qs.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(qs.CLOSED)),this.updateJoinPayload(Object.assign({config:d},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var m;if(this.socket.setAuth(),h===void 0){t==null||t(qs.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,x=[];for(let y=0;y<v;y++){const b=g[y],{filter:{event:w,schema:k,table:_,filter:j}}=b,S=h&&h[y];if(S&&S.event===w&&S.schema===k&&S.table===_&&S.filter===j)x.push(Object.assign(Object.assign({},b),{id:S.id}));else{this.unsubscribe(),this.state=ur.errored,t==null||t(qs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(qs.SUBSCRIBED);return}}).receive("error",h=>{this.state=ur.errored,t==null||t(qs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(qs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===ur.joined&&t===Sh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:s,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ur.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new ow(this,Bi.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ur.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,s=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(s),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new ow(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>hQ){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,s;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:f}=Bi;if(r&&[l,c,u,f].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,v,x;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(m=>m.callback(h,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var g,v,x,y,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const k=m.id,_=(g=m.filter)===null||g===void 0?void 0:g.event;return k&&((v=n.ids)===null||v===void 0?void 0:v.includes(k))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((x=n.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const k=(b=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return k==="*"||k===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:x,commit_timestamp:y,type:b,errors:w}=g;h=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:y,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(h,r)})}_isClosed(){return this.state===ur.closed}_isJoined(){return this.state===ur.joined}_isJoining(){return this.state===ur.joining}_isLeaving(){return this.state===ur.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),s={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&wN.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Bi.close,{},t)}_onError(t){this._on(Bi.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ur.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=ZP(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=ZP(t.columns,t.old_record)),n}}const nT=()=>{},mg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},wQ=[1e3,2e3,5e3,1e4],jQ=1e4,_Q=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kQ{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=U1,this.transport=null,this.heartbeatIntervalMs=mg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nT,this.ref=0,this.reconnectTimer=null,this.logger=nT,this.conn=null,this.sendBuffer=[],this.serializer=new mQ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let s;return a?s=a:typeof fetch>"u"?s=(...o)=>ao(async()=>{const{default:l}=await Promise.resolve().then(()=>lf);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${z1.websocket}`,this.httpEndpoint=vF(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=lQ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:dQ}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case _h.connecting:return tc.Connecting;case _h.open:return tc.Open;case _h.closing:return tc.Closing;default:return tc.Closed}}isConnected(){return this.connectionState()===tc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(s=>s.topic===r);if(a)return a;{const s=new wN(`realtime:${t}`,n,this);return this.channels.push(s),s}}push(t){const{topic:n,event:r,payload:a,ref:s}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${s})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(fQ,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},mg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:s,ref:o}=n,l=o?`(${o})`:"",c=s.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Bi.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([_Q],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:uQ};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Bi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new pF(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},mg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,s,o,l,c,u;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:U1,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:mg.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:f=>wQ[f-1]||jQ,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(f,d)=>d(JSON.stringify(f)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class jN extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function dr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class SQ extends jN{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class W1 extends jN{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var NQ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const xF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ao(async()=>{const{default:r}=await Promise.resolve().then(()=>lf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},CQ=()=>NQ(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ao(()=>Promise.resolve().then(()=>lf),void 0)).Response:Response}),H1=e=>{if(Array.isArray(e))return e.map(n=>H1(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=H1(r)}),t},AQ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Jc=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const lw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),EQ=(e,t,n)=>Jc(void 0,void 0,void 0,function*(){const r=yield CQ();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const s=e.status||500,o=(a==null?void 0:a.statusCode)||s+"";t(new SQ(lw(a),s,o))}).catch(a=>{t(new W1(lw(a),a))}):t(new W1(lw(e),e))}),PQ=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(AQ(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function gp(e,t,n,r,a,s){return Jc(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,PQ(t,r,a,s)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>EQ(c,l,r))})})}function Jv(e,t,n,r){return Jc(this,void 0,void 0,function*(){return gp(e,"GET",t,n,r)})}function us(e,t,n,r,a){return Jc(this,void 0,void 0,function*(){return gp(e,"POST",t,r,a,n)})}function V1(e,t,n,r,a){return Jc(this,void 0,void 0,function*(){return gp(e,"PUT",t,r,a,n)})}function TQ(e,t,n,r){return Jc(this,void 0,void 0,function*(){return gp(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function yF(e,t,n,r,a){return Jc(this,void 0,void 0,function*(){return gp(e,"DELETE",t,r,a,n)})}var Zr=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const OQ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},rT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class IQ{constructor(t,n={},r,a){this.url=t,this.headers=n,this.bucketId=r,this.fetch=xF(a)}uploadOrUpdate(t,n,r,a){return Zr(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},rT),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),d=yield(t=="PUT"?V1:us)(this.fetch,`${this.url}/object/${f}`,s,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(s){if(dr(s))return{data:null,error:s};throw s}})}upload(t,n,r){return Zr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return Zr(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:rT.upsert},a),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const d=yield V1(this.fetch,l.toString(),c,{headers:f});return{data:{path:s,fullPath:d.Key},error:null}}catch(c){if(dr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Zr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const s=yield us(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new jN("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}update(t,n,r){return Zr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Zr(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}copy(t,n,r){return Zr(this,void 0,void 0,function*(){try{return{data:{path:(yield us(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return Zr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),s=yield us(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return Zr(this,void 0,void 0,function*(){try{const a=yield us(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}download(t,n){return Zr(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Jv(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(dr(l))return{data:null,error:l};throw l}})}info(t){return Zr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Jv(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:H1(r),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}exists(t){return Zr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield TQ(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(dr(r)&&r instanceof W1){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&a.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Zr(this,void 0,void 0,function*(){try{return{data:yield yF(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}list(t,n,r){return Zr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},OQ),n),{prefix:t||""});return{data:yield us(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(dr(a))return{data:null,error:a};throw a}})}listV2(t,n){return Zr(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield us(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const RQ="2.11.0",MQ={"X-Client-Info":`storage-js/${RQ}`};var su=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class DQ{constructor(t,n={},r,a){const s=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},MQ),n),this.fetch=xF(r)}listBuckets(){return su(this,void 0,void 0,function*(){try{return{data:yield Jv(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(dr(t))return{data:null,error:t};throw t}})}getBucket(t){return su(this,void 0,void 0,function*(){try{return{data:yield Jv(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return su(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return su(this,void 0,void 0,function*(){try{return{data:yield V1(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(dr(r))return{data:null,error:r};throw r}})}emptyBucket(t){return su(this,void 0,void 0,function*(){try{return{data:yield us(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}deleteBucket(t){return su(this,void 0,void 0,function*(){try{return{data:yield yF(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(dr(n))return{data:null,error:n};throw n}})}}class $Q extends DQ{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new IQ(this.url,this.headers,t,this.fetch)}}const LQ="2.55.0";let lh="";typeof Deno<"u"?lh="deno":typeof document<"u"?lh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?lh="react-native":lh="node";const FQ={"X-Client-Info":`supabase-js-${lh}/${LQ}`},BQ={headers:FQ},UQ={schema:"public"},zQ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qQ={};var WQ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const HQ=e=>{let t;return e?t=e:typeof fetch>"u"?t=aF:t=fetch,(...n)=>t(...n)},VQ=()=>typeof Headers>"u"?iF:Headers,KQ=(e,t,n)=>{const r=HQ(n),a=VQ();return(s,o)=>WQ(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var GQ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function YQ(e){return e.endsWith("/")?e:e+"/"}function XQ(e,t){var n,r;const{db:a,auth:s,realtime:o,global:l}=e,{db:c,auth:u,realtime:f,global:d}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},f),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>GQ(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const bF="2.71.1",ju=30*1e3,K1=3,cw=K1*ju,JQ="http://localhost:9999",QQ="supabase.auth.token",ZQ={"X-Client-Info":`gotrue-js/${bF}`},G1="X-Supabase-Api-Version",wF={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},eZ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tZ=10*60*1e3;class _N extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Et(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class nZ extends _N{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function rZ(e){return Et(e)&&e.name==="AuthApiError"}class jF extends _N{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Tl extends _N{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Fo extends Tl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function aZ(e){return Et(e)&&e.name==="AuthSessionMissingError"}class pg extends Tl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gg extends Tl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class vg extends Tl{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function iZ(e){return Et(e)&&e.name==="AuthImplicitGrantRedirectError"}class aT extends Tl{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Y1 extends Tl{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function uw(e){return Et(e)&&e.name==="AuthRetryableFetchError"}class iT extends Tl{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class X1 extends Tl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sT=` 	
\r=`.split(""),sZ=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<sT.length;t+=1)e[sT[t].charCodeAt(0)]=-2;for(let t=0;t<Qv.length;t+=1)e[Qv[t].charCodeAt(0)]=t;return e})();function oT(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Qv[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Qv[r]),t.queuedBits-=6}}function _F(e,t,n){const r=sZ[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function lT(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=o=>{cZ(o,r,n)};for(let o=0;o<e.length;o+=1)_F(e.charCodeAt(o),a,s);return t.join("")}function oZ(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function lZ(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}oZ(r,t)}}function cZ(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function uZ(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)_F(e.charCodeAt(a),n,r);return new Uint8Array(t)}function dZ(e){const t=[];return lZ(e,n=>t.push(n)),new Uint8Array(t)}function fZ(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>oT(a,n,r)),oT(null,n,r),t.join("")}function hZ(e){return Math.round(Date.now()/1e3)+e}function mZ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Oi=()=>typeof window<"u"&&typeof document<"u",zl={tested:!1,writable:!1},kF=()=>{if(!Oi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zl.tested)return zl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zl.tested=!0,zl.writable=!0}catch{zl.tested=!0,zl.writable=!1}return zl.writable};function pZ(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const SF=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>ao(async()=>{const{default:r}=await Promise.resolve().then(()=>lf);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},gZ=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",_u=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ql=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Mo=async(e,t)=>{await e.removeItem(t)};class Yy{constructor(){this.promise=new Yy.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Yy.promiseConstructor=Promise;function dw(e){const t=e.split(".");if(t.length!==3)throw new X1("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!eZ.test(t[r]))throw new X1("JWT not in base64url format");return{header:JSON.parse(lT(t[0])),payload:JSON.parse(lT(t[1])),signature:uZ(t[2]),raw:{header:t[0],payload:t[1]}}}async function vZ(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function xZ(e,t){return new Promise((r,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await e(s);if(!t(s,null,o)){r(o);return}}catch(o){if(!t(s,o)){a(o);return}}})()})}function yZ(e){return("0"+e.toString(16)).substr(-2)}function bZ(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let s=0;s<56;s++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,yZ).join("")}async function wZ(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function jZ(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await wZ(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ou(e,t,n=!1){const r=bZ();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await _u(e,`${t}-code-verifier`,a);const s=await jZ(r);return[s,r===s?"plain":"s256"]}const _Z=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kZ(e){const t=e.headers.get(G1);if(!t||!t.match(_Z))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function SZ(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function NZ(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const CZ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lu(e){if(!CZ.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function fw(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function cT(e){return JSON.parse(JSON.stringify(e))}var AZ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Gl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),EZ=[502,503,504];async function uT(e){var t;if(!gZ(e))throw new Y1(Gl(e),0);if(EZ.includes(e.status))throw new Y1(Gl(e),e.status);let n;try{n=await e.json()}catch(s){throw new jF(Gl(s),s)}let r;const a=kZ(e);if(a&&a.getTime()>=wF["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new iT(Gl(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Fo}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new iT(Gl(n),e.status,n.weak_password.reasons);throw new nZ(Gl(n),e.status||500,r)}const PZ=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function Ft(e,t,n,r){var a;const s=Object.assign({},r==null?void 0:r.headers);s[G1]||(s[G1]=wF["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await TZ(e,t,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function TZ(e,t,n,r,a,s){const o=PZ(t,r,a,s);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new Y1(Gl(c),0)}if(l.ok||await uT(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await uT(c)}}function Us(e){var t;let n=null;MZ(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=hZ(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function dT(e){const t=Us(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ko(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function OZ(e){return{data:e,error:null}}function IZ(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s}=e,o=AZ(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function RZ(e){return e}function MZ(e){return e.access_token&&e.refresh_token&&e.expires_in}const hw=["global","local","others"];var DZ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class $Z{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=SF(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=hw[0]){if(hw.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hw.join(", ")}`);try{return await Ft(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Et(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ft(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ko})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=DZ(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Ft(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:IZ,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Et(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ft(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ko})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,s,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await Ft(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:RZ});if(f.error)throw f.error;const d=await f.json(),h=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(g.split(";")[1].split("=")[1]);u[`${x}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(Et(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){lu(t);try{return await Ft(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ko})}catch(n){if(Et(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){lu(t);try{return await Ft(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ko})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){lu(t);try{return await Ft(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ko})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){lu(t.userId);try{const{data:n,error:r}=await Ft(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(Et(n))return{data:null,error:n};throw n}}async _deleteFactor(t){lu(t.userId),lu(t.id);try{return{data:await Ft(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Et(n))return{data:null,error:n};throw n}}}function fT(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function LZ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const cu={debug:!!(globalThis&&kF()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class NF extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class FZ extends NF{}async function BZ(e,t,n){cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),cu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw cu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new FZ(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(cu.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}LZ();const UZ={url:JQ,storageKey:QQ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ZQ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hT(e,t,n){return await n()}const uu={};class sm{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=sm.nextInstanceID,sm.nextInstanceID+=1,this.instanceID>0&&Oi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},UZ),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new $Z({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=SF(a.fetch),this.lock=a.lock||hT,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Oi()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=BZ:this.lock=hT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:kF()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fT(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=fT(this.memoryStorage)),Oi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=uu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){uu[this.storageKey]=Object.assign(Object.assign({},uu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=uu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){uu[this.storageKey]=Object.assign(Object.assign({},uu[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${bF}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=pZ(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Oi()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),iZ(s)){const c=(t=s.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Et(n)?{error:n}:{error:new jF("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const s=await Ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Us}),{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Et(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(t){var n,r,a;try{let s;if("email"in t){const{email:f,password:d,options:h}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await ou(this.storage,this.storageKey)),s=await Ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:f,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:g},xform:Us})}else if("phone"in t){const{phone:f,password:d,options:h}=t;s=await Ft(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Us})}else throw new gg("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Et(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(t){try{let n;if("email"in t){const{email:s,password:o,options:l}=t;n=await Ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dT})}else if("phone"in t){const{phone:s,password:o,options:l}=t;n=await Ft(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:dT})}else throw new gg("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new pg}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(Et(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,a,s,o,l,c,u,f,d,h,m;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:x,wallet:y,statement:b,options:w}=t;let k;if(Oi())if(typeof y=="object")k=y;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))k=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=y}const _=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const j=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),b?{statement:b}:null));let S;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")S=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)S=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),v=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((d=(f=w==null?void 0:w.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...w.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const j=await k.signMessage(new TextEncoder().encode(g),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=j}}try{const{data:x,error:y}=await Ft(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:fZ(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Us});if(y)throw y;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new pg}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:y})}catch(x){if(Et(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(t){const n=await ql(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:s,error:o}=await Ft(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Us});if(await Mo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new pg}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:o})}catch(s){if(Et(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:s,nonce:o}=t,l=await Ft(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Us}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new pg}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(Et(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,s,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await ou(this.storage,this.storageKey));const{error:d}=await Ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:f}=await Ft(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f}}throw new gg("You must provide either an email or phone number.")}catch(l){if(Et(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,s;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,s=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Ft(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:Us});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Et(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await ou(this.storage,this.storageKey)),await Ft(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:OZ})}catch(s){if(Et(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Fo;const{error:a}=await Ft(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Et(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:s}=t,{error:o}=await Ft(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:s}=t,{data:o,error:l}=await Ft(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new gg("You must provide either an email or phone number and a type")}catch(n){if(Et(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ql(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<cw:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await ql(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=fw()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,f)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,f))})}return{data:{session:t},error:null}}const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{session:null},error:s}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ko}):await this._useSession(async n=>{var r,a,s;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fo}:await Ft(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:Ko})})}catch(n){if(Et(n))return aZ(n)&&(await this._removeSession(),await Mo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:s}=r;if(s)throw s;if(!a.session)throw new Fo;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ou(this.storage,this.storageKey));const{data:u,error:f}=await Ft(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ko});if(f)throw f;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Et(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fo;const n=Date.now()/1e3;let r=n,a=!0,s=null;const{payload:o}=dw(t.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Et(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Fo;const{session:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?{data:{user:null,session:null},error:s}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Et(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Oi())throw new vg("No browser detected.");if(t.error||t.error_description||t.error_code)throw new vg(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new aT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vg("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new aT("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!s||!l||!o||!u)throw new vg("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(l);let h=f+d;c&&(h=parseInt(c));const m=h-f;m*1e3<=ju&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const g=h-d;f-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,f):f-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,f);const{data:v,error:x}=await this._getUser(s);if(x)throw x;const y={provider_token:r,provider_refresh_token:a,access_token:s,expires_in:d,expires_at:h,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(r){if(Et(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ql(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:s}=n;if(s)return{error:s};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(rZ(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Mo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=mZ(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await ou(this.storage,this.storageKey,!0));try{return await Ft(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Et(s))return{data:null,error:s};throw s}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Et(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:a}=await this._useSession(async s=>{var o,l,c,u,f;const{data:d,error:h}=s;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ft(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(a)throw a;return Oi()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Et(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:s,error:o}=n;if(o)throw o;return await Ft(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Et(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await xZ(async a=>(a>0&&await vZ(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Ft(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Us})),(a,s)=>{const o=200*Math.pow(2,a);return s&&uw(s)&&Date.now()+o-r<ju})}catch(r){if(this._debug(n,"error",r),Et(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Oi()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await ql(this.storage,this.storageKey);if(a&&this.userStorage){let o=await ql(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await _u(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:fw()}else if(a&&!a.user&&!a.user){const o=await ql(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Mo(this.storage,this.storageKey+"-user"),await _u(this.storage,this.storageKey,a)):a.user=fw()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const s=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<cw;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${cw}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),uw(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Fo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Yy;const{data:s,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!s.session)throw new Fo;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(a,"error",s),Et(s)){const o={session:null,error:s};return uw(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await _u(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const s=cT(a);await _u(this.storage,this.storageKey,s)}else{const a=cT(n);await _u(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Mo(this.storage,this.storageKey),await Mo(this.storage,this.storageKey+"-code-verifier"),await Mo(this.storage,this.storageKey+"-user"),this.userStorage&&await Mo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Oi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ju);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/ju);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${ju}ms, refresh threshold is ${K1} ticks`),a<=K1&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof NF)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Oi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await ou(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);a.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;return s?{data:null,error:s}:await Ft(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Et(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:s,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Ft(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Et(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:l}=await Ft(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Et(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:s}=n;return s?{data:null,error:s}:await Ft(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Et(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:s}=t;if(s)return{data:null,error:s};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=dw(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const f=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+tZ>a)return r;const{data:s,error:o}=await Ft(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,r=s.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};r=m.session.access_token}const{header:a,payload:s,signature:o,raw:{header:l,payload:c}}=dw(r);n!=null&&n.allowExpired||SZ(s.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:a,signature:o},error:null}}const f=NZ(a.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,o,dZ(`${l}.${c}`)))throw new X1("Invalid JWT signature");return{data:{claims:s,header:a,signature:o},error:null}}catch(r){if(Et(r))return{data:null,error:r};throw r}}}sm.nextInstanceID=0;const zZ=sm;class qZ extends zZ{constructor(t){super(t)}}var WZ=function(e,t,n,r){function a(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{u(r.next(f))}catch(d){o(d)}}function c(f){try{u(r.throw(f))}catch(d){o(d)}}function u(f){f.done?s(f.value):a(f.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class HZ{constructor(t,n,r){var a,s,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=YQ(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:UQ,realtime:qQ,auth:Object.assign(Object.assign({},zQ),{storageKey:u}),global:BQ},d=XQ(r??{},f);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=KQ(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new oQ(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new $Q(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new $J(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return WZ(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,storageKey:s,flowType:o,lock:l,debug:c},u,f){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qZ({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:s,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,flowType:o,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new kQ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const VZ=(e,t,n)=>new HZ(e,t,n);function KZ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}KZ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const GZ={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co"},ed=GZ??{},YZ="https://bkynymyhbfrhvwxqqttk.supabase.co",XZ="https://api.cssuper.com",JZ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",QZ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRncm14bGJudXR4cGV3Zm1vZmR4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5MDY0NzgsImV4cCI6MjA3MDQ4MjQ3OH0.ijDctaGPXK3Ce9uao72YaaYCX9fpPFZGpmrsWp9IfU8",ZZ=e=>e.replace(/\/$/,""),J1=ed==null?void 0:ed.VITE_SUPABASE_URL,eee=ed==null?void 0:ed.VITE_SUPABASE_ANON_KEY,CF=e=>ZZ(e.trim()),tee=e=>{const t=CF(e);return t.includes("api.cssuper.com")?"prod":(t.includes("bkynymyhbfrhvwxqqttk.supabase.co"),"dev")};let kN="dev";J1&&(kN=tee(J1));const nee=kN==="prod"?XZ:YZ,ree=kN==="prod"?QZ:JZ,Xy=CF(J1||nee),aee=(eee||ree).trim(),ls=VZ(Xy,aee,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});var Yl=(e=>(e.CLOSED="CLOSED",e.OPEN="OPEN",e.HALF_OPEN="HALF_OPEN",e))(Yl||{});const iee={failureThreshold:5,resetTimeout:3e4,successThreshold:2,monitoringPeriod:1e4,timeout:1e4},see="circuit_breaker_";class oee{constructor(t,n={}){Lt(this,"config");Lt(this,"state");Lt(this,"failures",[]);Lt(this,"successes",0);Lt(this,"stateChangedAt");Lt(this,"lastFailureTime",null);Lt(this,"lastSuccessTime",null);Lt(this,"totalRequests",0);Lt(this,"listeners",[]);Lt(this,"storageKey");this.name=t,this.config={...iee,...n},this.storageKey=`${see}${t}`,this.state=this.loadState()||"CLOSED",this.stateChangedAt=Date.now(),this.failures=[],this.loadFromStorage()}async execute(t,n){if(this.totalRequests++,!this.canExecute()){const a=new Error(`Circuit breaker is ${this.state}. Request rejected.`);throw a.circuitBreaker={state:this.state,name:this.name},a}const r=n||this.config.timeout;try{const a=new Promise((o,l)=>{setTimeout(()=>{l(new Error(`Request timeout after ${r}ms`))},r)}),s=await Promise.race([t(),a]);return this.recordSuccess(),s}catch(a){throw a instanceof Error&&a.message.includes("timeout")&&this.emitEvent({type:"timeout"}),this.recordFailure(a),a}}canExecute(){const t=Date.now();switch(this.state){case"CLOSED":return!0;case"OPEN":return t-this.stateChangedAt>=this.config.resetTimeout?(this.transitionTo("HALF_OPEN"),!0):!1;case"HALF_OPEN":return!0;default:return!1}}recordSuccess(){this.lastSuccessTime=Date.now(),this.emitEvent({type:"success"}),this.state==="HALF_OPEN"&&(this.successes++,this.successes>=this.config.successThreshold&&(this.transitionTo("CLOSED"),this.successes=0,this.failures=[])),this.saveToStorage()}recordFailure(t){const n=Date.now();this.lastFailureTime=n,this.emitEvent({type:"failure",error:t}),this.failures.push({time:n});const r=n-this.config.monitoringPeriod;this.failures=this.failures.filter(a=>a.time>r),(this.state==="CLOSED"||this.state==="HALF_OPEN")&&this.failures.length>=this.config.failureThreshold&&(this.transitionTo("OPEN"),this.successes=0),this.state==="HALF_OPEN"&&(this.transitionTo("OPEN"),this.successes=0),this.saveToStorage()}transitionTo(t){if(this.state===t)return;const n=this.state;this.state=t,this.stateChangedAt=Date.now(),this.emitEvent({type:"stateChange",from:n,to:t}),this.saveToStorage()}getStats(){return{failures:this.failures.length,successes:this.successes,state:this.state,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime,stateChangedAt:this.stateChangedAt,totalRequests:this.totalRequests}}getState(){return this.state}getConfig(){return{...this.config}}updateConfig(t){this.config={...this.config,...t};try{if(typeof localStorage<"u"){const n=localStorage.getItem(this.storageKey),r=n?JSON.parse(n):{};r.config=this.config,localStorage.setItem(this.storageKey,JSON.stringify(r))}}catch(n){console.warn("Failed to save circuit breaker config:",n)}}reset(){this.transitionTo("CLOSED"),this.failures=[],this.successes=0,this.lastFailureTime=null,this.lastSuccessTime=null,this.totalRequests=0,this.saveToStorage()}open(){this.transitionTo("OPEN")}on(t,n){this.listeners.push(n)}off(t){this.listeners=this.listeners.filter(n=>n!==t)}emitEvent(t){this.listeners.forEach(n=>{try{n(t)}catch(r){console.error("Circuit breaker event listener error:",r)}})}saveToStorage(){try{if(typeof localStorage<"u"){const t={state:this.state,stateChangedAt:this.stateChangedAt,failures:this.failures,successes:this.successes,lastFailureTime:this.lastFailureTime,lastSuccessTime:this.lastSuccessTime,totalRequests:this.totalRequests};localStorage.setItem(this.storageKey,JSON.stringify(t))}}catch(t){console.warn("Failed to save circuit breaker state:",t)}}loadState(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t)return JSON.parse(t).state}}catch(t){console.warn("Failed to load circuit breaker state:",t)}return null}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t){const n=JSON.parse(t);n.config&&(this.config={...this.config,...n.config}),this.state=n.state||"CLOSED",this.stateChangedAt=n.stateChangedAt||Date.now(),this.failures=(n.failures||[]).filter(r=>{const a=Date.now()-this.config.monitoringPeriod;return r.time>a}),this.successes=n.successes||0,this.lastFailureTime=n.lastFailureTime||null,this.lastSuccessTime=n.lastSuccessTime||null,this.totalRequests=n.totalRequests||0,this.state==="OPEN"&&Date.now()-this.stateChangedAt>=this.config.resetTimeout&&this.transitionTo("HALF_OPEN")}}}catch(t){console.warn("Failed to load circuit breaker state:",t)}}}const Jt=new oee("database",{failureThreshold:5,resetTimeout:3e4,successThreshold:2,monitoringPeriod:1e4,timeout:1e4}),lee=["ECONNRESET","ENOTFOUND","ETIMEDOUT","ECONNREFUSED","NetworkError"],cee=["Timeout","ETIMEDOUT"],uee=[500,502,503,504,429];function Di(e){var a;const t=(e==null?void 0:e.message)||String(e),n=(e==null?void 0:e.code)||(e==null?void 0:e.error_code)||"",r=(e==null?void 0:e.status)||(e==null?void 0:e.statusCode)||((a=e==null?void 0:e.response)==null?void 0:a.status);if(lee.some(s=>t.includes(s)||n.includes(s)||t.toLowerCase().includes("network")))return{category:"NETWORK",isRetryable:!0,retryDelay:1e3,userMessage:"Koneksi jaringan bermasalah. Mencoba lagi...",originalError:e};if(cee.some(s=>t.includes(s)||n.includes(s)||t.toLowerCase().includes("timeout")))return{category:"TIMEOUT",isRetryable:!0,retryDelay:2e3,userMessage:"Permintaan memakan waktu terlalu lama. Mencoba lagi...",originalError:e};if(r===429||t.includes("rate limit")||t.includes("too many requests")||n==="PGRST301")return{category:"RATE_LIMIT",isRetryable:!0,retryDelay:5e3,userMessage:"Terlalu banyak permintaan. Mohon tunggu sebentar...",originalError:e};if(r===401||r===403||t.includes("JWT")||t.includes("token")||t.includes("unauthorized")||t.includes("forbidden")||n==="PGRST301"||n==="PGRST302")return{category:"AUTH_ERROR",isRetryable:!1,userMessage:"Sesi Anda telah berakhir. Silakan login kembali.",originalError:e};if(r===400||t.includes("validation")||t.includes("invalid")||t.includes("constraint")||n==="23505"||n==="23503"||n==="23514")return{category:"VALIDATION_ERROR",isRetryable:!1,userMessage:"Data yang dimasukkan tidak valid. Silakan periksa kembali.",originalError:e};if(uee.includes(r)||n!=null&&n.startsWith("PGRST")||n!=null&&n.startsWith("P0001")||t.includes("database")||t.includes("connection")){const s=r>=500||r===429;return{category:"DATABASE_ERROR",isRetryable:s,retryDelay:s?2e3:void 0,userMessage:s?"Database sedang bermasalah. Mencoba lagi...":"Terjadi kesalahan database. Silakan coba lagi nanti.",originalError:e}}return r===404?{category:"VALIDATION_ERROR",isRetryable:!1,userMessage:"Data yang dicari tidak ditemukan.",originalError:e}:{category:"UNKNOWN",isRetryable:!0,retryDelay:1e3,userMessage:"Terjadi kesalahan. Mencoba lagi...",originalError:e}}const AF={reads:{limit:100,window:6e4},writes:{limit:30,window:6e4},rpc:{limit:20,window:6e4},auth:{limit:10,window:6e4}},dee="rate_limit_";class Q1{constructor(t="default",n={}){Lt(this,"config");Lt(this,"requests",new Map);Lt(this,"storageKey");this.name=t,this.config={...AF,...n},this.storageKey=`${dee}${t}`,this.loadFromStorage(),typeof window<"u"&&setInterval(()=>this.cleanup(),6e4)}checkLimit(t,n,r){const a=this.getKey(t,n,r),s=Date.now(),o=this.getConfig(n);let l=this.requests.get(a)||[];const c=s-o.window;l=l.filter(v=>v.timestamp>c);const u=l.length,f=u<o.limit,d=l[0],h=d?d.timestamp+o.window:s+o.window,m=f?void 0:Math.ceil((h-s)/1e3)*1e3,g={allowed:f,remaining:Math.max(0,o.limit-u-1),resetAt:h,retryAfter:m};return f&&(l.push({timestamp:s,operation:n,endpoint:r}),this.requests.set(a,l),this.saveToStorage(a,l)),g}recordRequest(t,n,r){const a=this.getKey(t,n,r),s=Date.now();let o=this.requests.get(a)||[];o.push({timestamp:s,operation:n,endpoint:r});const l=this.getConfig(n),c=s-l.window;o=o.filter(u=>u.timestamp>c),this.requests.set(a,o),this.saveToStorage(a,o)}getUsage(t,n,r){const a=this.getKey(t,n,r),s=Date.now(),o=this.getConfig(n);let l=this.requests.get(a)||[];const c=s-o.window;l=l.filter(d=>d.timestamp>c);const u=l[0],f=u?u.timestamp+o.window:s+o.window;return{count:l.length,limit:o.limit,resetAt:f}}reset(t,n,r){if(n){const a=this.getKey(t,n,r);this.requests.delete(a),this.deleteFromStorage(a)}else{const a=t?`${t}:`:"anonymous:";for(const s of this.requests.keys())s.startsWith(a)&&(this.requests.delete(s),this.deleteFromStorage(s))}}cleanup(){const t=Date.now(),n=Math.max(this.config.reads.window,this.config.writes.window,this.config.rpc.window,this.config.auth.window),r=t-n;for(const[a,s]of this.requests.entries()){const o=s.filter(l=>l.timestamp>r);o.length===0?(this.requests.delete(a),this.deleteFromStorage(a)):o.length!==s.length&&(this.requests.set(a,o),this.saveToStorage(a,o))}}getConfig(t){return this.config[t]}getKey(t,n,r){return`${t||"anonymous"}:${n}${r?`:${r}`:""}`}saveToStorage(t,n){try{if(typeof localStorage<"u"){const r=`${this.storageKey}:${t}`,a=Date.now(),s=n.filter(o=>a-o.timestamp<6e4);localStorage.setItem(r,JSON.stringify({requests:s,savedAt:a}))}}catch(r){console.warn("Failed to save rate limit data:",r)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=Date.now(),n=`${this.storageKey}:`;for(let r=0;r<localStorage.length;r++){const a=localStorage.key(r);if(a&&a.startsWith(n))try{const s=JSON.parse(localStorage.getItem(a)||"{}"),o=s.savedAt||0;if(t-o<3e5){const l=(s.requests||[]).filter(c=>{const u=c.operation||"read",f=this.getConfig(u);return t-c.timestamp<f.window});if(l.length>0){const c=a.replace(n,"");this.requests.set(c,l)}else localStorage.removeItem(a)}else localStorage.removeItem(a)}catch{localStorage.removeItem(a)}}}}catch(t){console.warn("Failed to load rate limit data:",t)}}deleteFromStorage(t){try{if(typeof localStorage<"u"){const n=`${this.storageKey}:${t}`;localStorage.removeItem(n)}}catch{}}}new Q1("default",AF);class fee{constructor(){Lt(this,"queue",[]);Lt(this,"batchSize",50);Lt(this,"batchInterval",3e4);Lt(this,"intervalId",null);Lt(this,"enabled",!0);Lt(this,"lastFlushTime",0);Lt(this,"flushThrottle",1e4);typeof window<"u"&&this.startBatching()}record(t){if(!this.enabled)return;this.queue.length>=1e3&&(this.queue=this.queue.slice(-500)),this.queue.push({...t,timestamp:Date.now()});const n=Date.now();this.queue.length>=this.batchSize&&n-this.lastFlushTime>=this.flushThrottle&&this.flush()}startBatching(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(()=>{this.flush()},this.batchInterval)}stopBatching(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}async flush(){if(this.queue.length===0)return;const t=Date.now();if(t-this.lastFlushTime<this.flushThrottle)return;const n=[...this.queue];this.queue=[],this.lastFlushTime=t;try{const{error:r}=await ae.from("circuit_breaker_metrics").insert(n.map(a=>({operation_type:a.operationType,endpoint:a.endpoint||null,user_id:a.userId||null,circuit_breaker_state:a.circuitBreakerState,success:a.success,error_category:a.errorCategory||null,response_time_ms:a.responseTimeMs,metadata:a.metadata||{}})));r&&(console.warn("Failed to send metrics:",r),this.queue.length<100&&(this.queue=[...n,...this.queue]))}catch(r){console.warn("Failed to flush metrics:",r),this.queue.length<100&&(this.queue=[...n,...this.queue])}}setEnabled(t){this.enabled=t,t?this.startBatching():(this.stopBatching(),this.queue=[])}getQueueSize(){return this.queue.length}async forceFlush(){await this.flush()}}function mw(e,t){if(e.length===0)return 0;const n=[...e].sort((a,s)=>a-s),r=Math.ceil(t/100*n.length)-1;return n[Math.max(0,r)]}async function EF(e,t,n){try{let r=ae.from("circuit_breaker_metrics").select("*");e&&(r=r.gte("created_at",e.toISOString())),t&&(r=r.lt("created_at",t.toISOString()));const{data:a,error:s}=await r;if(s||!a)return{totalOperations:0,successRate:0,failureRate:0,avgResponseTime:0,p50ResponseTime:0,p95ResponseTime:0,p99ResponseTime:0,circuitBreakerStates:{},errorCategories:{},operationsByType:{}};const o=a.length,l=a.filter(g=>g.success).length,c=a.filter(g=>!g.success).length,u=a.map(g=>g.response_time_ms||0).filter(g=>g>0),f={},d={},h={};a.forEach(g=>{const v=g.circuit_breaker_state||"UNKNOWN";if(f[v]=(f[v]||0)+1,g.error_category){const y=g.error_category;d[y]=(d[y]||0)+1}const x=g.operation_type||"unknown";h[x]=(h[x]||0)+1});const m=u.length>0?u.reduce((g,v)=>g+v,0)/u.length:0;return{totalOperations:o,successRate:o>0?l/o:0,failureRate:o>0?c/o:0,avgResponseTime:m,p50ResponseTime:mw(u,50),p95ResponseTime:mw(u,95),p99ResponseTime:mw(u,99),circuitBreakerStates:f,errorCategories:d,operationsByType:h}}catch(r){return console.error("Failed to get metrics stats:",r),{totalOperations:0,successRate:0,failureRate:0,avgResponseTime:0,p50ResponseTime:0,p95ResponseTime:0,p99ResponseTime:0,circuitBreakerStates:{},errorCategories:{},operationsByType:{}}}}const om=new fee,mT={baseConfig:{read:{limit:100,window:6e4},write:{limit:30,window:6e4},rpc:{limit:20,window:6e4},auth:{limit:10,window:6e4}},minMultiplier:.5,maxMultiplier:2,adjustmentInterval:6e4,healthyLatencyThreshold:200,stressLatencyThreshold:1e3};class hee{constructor(t={}){Lt(this,"config");Lt(this,"currentMultipliers",new Map);Lt(this,"lastAdjustment",Date.now());Lt(this,"rateLimiters",new Map);Lt(this,"storageKey","adaptive_rate_limiter");Lt(this,"adjustmentIntervalId",null);this.config={...mT,...t},this.loadFromStorage(),Object.keys(this.config.baseConfig).forEach(n=>{this.currentMultipliers.has(n)||this.currentMultipliers.set(n,1)}),typeof window<"u"&&(this.adjustmentIntervalId=setInterval(()=>this.adjustLimits(),this.config.adjustmentInterval))}getLimiter(t){if(!this.rateLimiters.has(t)){const n=this.config.baseConfig[t],r=this.currentMultipliers.get(t)||1,a={limit:Math.round(n.limit*r),window:n.window};this.rateLimiters.set(t,new Q1(`adaptive_${t}`,{[t]:a}))}return this.rateLimiters.get(t)}async adjustLimits(){try{const t=Date.now(),n=new Date(t-5*60*1e3),r=await this.getRecentStats(n,new Date(t));for(const a of Object.keys(this.config.baseConfig))await this.adjustOperationLimit(a,r);this.lastAdjustment=t}catch(t){console.warn("Failed to adjust rate limits:",t)}}async getRecentStats(t,n){try{const r=await EF(t,n);return{avgResponseTime:r.avgResponseTime,errorRate:r.failureRate,requestVolume:r.totalOperations}}catch{return{avgResponseTime:300,errorRate:.01,requestVolume:100}}}async adjustOperationLimit(t,n){const r=this.currentMultipliers.get(t)||1,a=this.config.baseConfig[t];let s=r;const{avgResponseTime:o,errorRate:l}=n;o<this.config.healthyLatencyThreshold&&l<.05?s=Math.min(r*1.1,this.config.maxMultiplier):o>this.config.stressLatencyThreshold||l>.2?s=Math.max(r*.8,this.config.minMultiplier):r>1?s=Math.max(r*.95,1):r<1&&(s=Math.min(r*1.05,1)),this.currentMultipliers.set(t,s);const c={limit:Math.round(a.limit*s),window:a.window};this.rateLimiters.set(t,new Q1(`adaptive_${t}`,{[t]:c})),this.saveToStorage()}getMultiplier(t){return this.currentMultipliers.get(t)||1}getEffectiveLimit(t){const n=this.config.baseConfig[t],r=this.currentMultipliers.get(t)||1;return Math.round(n.limit*r)}reset(){Object.keys(this.config.baseConfig).forEach(t=>{this.currentMultipliers.set(t,1),this.rateLimiters.delete(t)}),this.saveToStorage()}getConfig(){return{...this.config}}updateConfig(t){this.config={...this.config,...t},t.adjustmentInterval&&typeof window<"u"&&(this.adjustmentIntervalId&&clearInterval(this.adjustmentIntervalId),this.adjustmentIntervalId=setInterval(()=>this.adjustLimits(),this.config.adjustmentInterval)),this.rateLimiters.clear(),this.saveToStorage()}checkLimit(t,n,r){return this.getLimiter(n).checkLimit(t,n,r)}recordRequest(t,n,r){this.getLimiter(n).recordRequest(t,n,r)}getUsage(t,n,r){return this.getLimiter(n).getUsage(t,n,r)}saveToStorage(){try{if(typeof localStorage<"u"){const t={config:this.config,multipliers:Object.fromEntries(this.currentMultipliers),lastAdjustment:this.lastAdjustment};localStorage.setItem(this.storageKey,JSON.stringify(t))}}catch(t){console.warn("Failed to save adaptive rate limiter config:",t)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);if(t){const n=JSON.parse(t);n.config&&(this.config={...mT,...n.config}),n.multipliers&&Object.entries(n.multipliers).forEach(([r,a])=>{this.currentMultipliers.set(r,a)}),n.lastAdjustment&&(this.lastAdjustment=n.lastAdjustment)}}}catch(t){console.warn("Failed to load adaptive rate limiter config:",t)}}}const It=new hee;async function PF(e,t=3,n=1e3){let r;for(let a=0;a<=t;a++)try{return await e()}catch(s){r=s;const o=Di(s);if(!o.isRetryable||Jt.getState()!=="CLOSED")throw s;if(a>=t)break;const l=Math.min(n*Math.pow(2,a),8e3),c=o.retryDelay||l;await new Promise(u=>setTimeout(u,c))}throw r}let Lf=null,pw=0;const mee=6e4;async function SN(e,t=!1){var r,a;const n=Date.now();if(!t&&Lf!==null&&n-pw<mee)return Lf;try{const s=e.auth.getSession(),o=new Promise(c=>{setTimeout(()=>c({data:{session:null}}),500)}),{data:l}=await Promise.race([s,o]);return Lf=((a=(r=l==null?void 0:l.session)==null?void 0:r.user)==null?void 0:a.id)||null,pw=n,Lf}catch{return Lf=null,pw=n,null}}async function TF(e,t,n,r,a=!1){if(a)return;const s=r!==void 0?r:await SN(e).catch(()=>null);if(t==="rpc"){const l=It.getUsage(s,t,n);if(l.count<l.limit*.9){It.recordRequest(s,t,n);return}const c=It.checkLimit(s,t,n);if(!c.allowed){const u=new Error(c.retryAfter?`Rate limit exceeded. Please wait ${Math.ceil(c.retryAfter/1e3)} seconds.`:"Rate limit exceeded. Please try again later.");throw u.code="RATE_LIMIT_EXCEEDED",u.status=429,u.retryAfter=c.retryAfter,u.category="RATE_LIMIT",u}return}const o=It.checkLimit(s,t,n);if(!o.allowed){const l=new Error(o.retryAfter?`Rate limit exceeded. Please wait ${Math.ceil(o.retryAfter/1e3)} seconds.`:"Rate limit exceeded. Please try again later.");throw l.code="RATE_LIMIT_EXCEEDED",l.status=429,l.retryAfter=o.retryAfter,l.category="RATE_LIMIT",l}}function Z1(e){return e===void 0?"u":e===null?"n":typeof e=="function"?"f":typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"?`p:${String(e)}`:typeof e=="string"?`s:${e}`:e instanceof Date?`d:${e.toISOString()}`:Array.isArray(e)?`a:[${e.map(t=>Z1(t)).join(",")}]`:typeof e=="object"?`o:{${Object.keys(e).sort().map(r=>`${r}:${Z1(e[r])}`).join(",")}}`:`x:${String(e)}`}function pee(e){return!e||e.length===0?"":e.map(t=>Z1(t)).join("|")}function gee(e){if(!e)return"base";let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return Math.abs(t).toString(36)}function OF(e,t,n="read",r,a=!1,s=""){return new Proxy(e,{get(o,l){const c=o[l];let u=n;if((l==="insert"||l==="update"||l==="upsert"||l==="delete")&&(u="write"),l==="then"||l==="catch"||l==="finally"){const f=Promise.resolve(o),d=(async()=>{const h=Date.now();gee(s);const m=SN(t).catch(()=>null),g=Jt.getState();try{const w=await Promise.race([m,new Promise(k=>setTimeout(()=>k(null),100))]);u==="read"?It.recordRequest(w,u,r):await TF(t,u,r,w)}catch(w){if(w.code==="RATE_LIMIT_EXCEEDED")throw w}let v;try{v=await Jt.execute(()=>PF(async()=>await f))}catch(w){v={data:null,error:w}}const x=Date.now()-h,y=v!=null&&v.error?Di(v.error).category:void 0,b=await m.catch(()=>null);return Promise.resolve().then(()=>{try{om.record({operationType:u,endpoint:r,userId:b||void 0,circuitBreakerState:g,success:!(v!=null&&v.error),errorCategory:y,responseTimeMs:x,metadata:v!=null&&v.error?{error:v.error.message}:{}})}catch{}}),v})().catch(h=>{const m=Date.now()-startTime,g=Di(h);return om.record({operationType:u,endpoint:r,userId:userId||void 0,circuitBreakerState:circuitState,success:!1,errorCategory:g.category,responseTimeMs:m,metadata:{error:h instanceof Error?h.message:String(h)}}),h.code==="RATE_LIMIT_EXCEEDED"?{data:null,error:{message:h.message,code:"RATE_LIMIT_EXCEEDED",status:429,category:"RATE_LIMIT",retryAfter:h.retryAfter,circuitBreaker:Jt.getState()}}:h&&typeof h=="object"&&("data"in h||"error"in h)?{data:h.data||null,error:{...h.error||h,message:g.userMessage,category:g.category,circuitBreaker:Jt.getState()}}:{data:null,error:{...g.originalError,message:g.userMessage,category:g.category,circuitBreaker:Jt.getState()}}});return(h,m)=>d[l](h,m)}return typeof c=="function"?(...f)=>{const d=c.apply(o,f),h=pee(f),m=h?`${l}(${h})`:`${l}()`,g=s?`${s}|${m}`:m;return OF(d,t,u,r,a,g)}:c}})}function vee(e){const t=e;return{from:n=>{const r=t.from(n);return OF(r,t,"read",n)},rpc:async(n,r,a)=>{const s=Date.now(),o=SN(t).catch(()=>null),l=Jt.getState();try{try{const h=await Promise.race([o,new Promise(m=>setTimeout(()=>m(null),100))]);await TF(t,"rpc",n,h,!1)}catch(h){if(h.code==="RATE_LIMIT_EXCEEDED")throw h}const c=await Jt.execute(()=>PF(async()=>await t.rpc(n,r,a))),u=Date.now()-s,f=c!=null&&c.error?Di(c.error).category:void 0,d=await o.catch(()=>null);return Promise.resolve().then(()=>{try{om.record({operationType:"rpc",endpoint:n,userId:d||void 0,circuitBreakerState:l,success:!(c!=null&&c.error),errorCategory:f,responseTimeMs:u,metadata:c!=null&&c.error?{error:c.error.message}:{}})}catch{}}),c}catch(c){const u=Di(c),f=Date.now()-s,d=await o.catch(()=>null);return Promise.resolve().then(()=>{try{om.record({operationType:"rpc",endpoint:n,userId:d||void 0,circuitBreakerState:l,success:!1,errorCategory:u.category,responseTimeMs:f,metadata:{error:c instanceof Error?c.message:String(c)}})}catch{}}),{data:null,error:{...u.originalError,message:u.userMessage,category:u.category,circuitBreaker:l}}}},auth:{getSession:async()=>{try{return await Jt.execute(()=>t.auth.getSession(),5e3)}catch(n){const r=Di(n);throw new Error(r.userMessage)}},getUser:async()=>{try{return await Jt.execute(()=>t.auth.getUser(),5e3)}catch(n){const r=Di(n);throw new Error(r.userMessage)}},signOut:async()=>{try{return await Jt.execute(()=>t.auth.signOut(),5e3)}catch(n){const r=Di(n);throw new Error(r.userMessage)}},signInWithPassword:async n=>{try{return await Jt.execute(()=>t.auth.signInWithPassword(n),1e4)}catch(r){const a=Di(r);throw new Error(a.userMessage)}},signInWithOtp:async(n,r)=>{try{return await Jt.execute(()=>t.auth.signInWithOtp({email:n,options:r}),1e4)}catch(a){const s=Di(a);throw new Error(s.userMessage)}},verifyOtp:async n=>{try{return await Jt.execute(()=>t.auth.verifyOtp(n),1e4)}catch(r){const a=Di(r);throw new Error(a.userMessage)}},onAuthStateChange:t.auth.onAuthStateChange.bind(t.auth),resetPasswordForEmail:t.auth.resetPasswordForEmail.bind(t.auth),refreshSession:t.auth.refreshSession.bind(t.auth),updateUser:t.auth.updateUser.bind(t.auth),setSession:t.auth.setSession.bind(t.auth)},storage:t.storage,channel:t.channel.bind(t),removeChannel:t.removeChannel.bind(t),removeAllChannels:t.removeAllChannels.bind(t),getChannels:t.getChannels.bind(t),getCircuitBreaker:()=>Jt,getCircuitBreakerStats:()=>Jt.getStats()}}const ae=ls,wt=vee(ae);async function Bt(e){var t;try{const{action:n,resource:r,resourceId:a=null,context:s={},ip:o=null,userAgent:l=null}=e;let c=e.userId??null;if(!c)try{const d=typeof localStorage<"u"?localStorage.getItem("app.currentUserId"):null;d&&(c=d)}catch{}if(!c){const{data:d}=await ae.auth.getUser();c=((t=d==null?void 0:d.user)==null?void 0:t.id)??null}let u=e.orgId??null;if(!u&&c&&(authData!=null&&authData.user))try{const{data:d}=await ae.from("org_members").select("org_id").eq("user_id",c).limit(1).maybeSingle();u=(d==null?void 0:d.org_id)??null}catch{return}if(!u&&n==="auth.logout")return;if(!u)try{const{data:d}=await ae.from("orgs").select("id").limit(1).maybeSingle();u=(d==null?void 0:d.id)??null}catch{return}try{const d=`logAction:${n}:${r}:${c||"anon"}`,h=Date.now(),m=typeof localStorage<"u"?localStorage.getItem(d):null;if(m){const g=Number(m)||0;if(h-g<3e3)return}typeof localStorage<"u"&&localStorage.setItem(d,String(h))}catch{}if(!u)return;const{error:f}=await ae.rpc("log_action",{p_action:n,p_resource:r,p_resource_id:a,p_context:{...s,route:typeof window<"u"?window.location.pathname:null},p_ip:o,p_user_agent:l,p_org_id:u,p_user_id:c});f&&console.warn("logAction failed",f)}catch(n){console.warn("logAction threw",n)}}const IF=p.createContext(void 0);function xee({children:e}){var $;const t=Za(),[n,r]=p.useState(null),[a,s]=p.useState(null),[o,l]=p.useState(!0),c=p.useRef(null),[u,f]=p.useState(!1),[d,h]=p.useState(()=>{var L;try{if(localStorage.getItem("otpVerified")==="true")return!0;const U=localStorage.getItem("app.lastAuthEvent");if(U)try{const D=JSON.parse(U),R=(L=D==null?void 0:D.user)==null?void 0:L.id;if(R)return localStorage.getItem(`otpVerified:${R}`)==="true"}catch{}return!1}catch{return!1}}),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,b]=p.useState(!1),[w,k]=p.useState(!1),[_,j]=p.useState(0);p.useEffect(()=>{b(!1)},[n==null?void 0:n.id]);const[S,A]=p.useState(!1),C=p.useRef(null),T=p.useRef(null);p.useEffect(()=>{T.current=(n==null?void 0:n.id)??null},[n==null?void 0:n.id]);const M=p.useCallback(L=>{var N;h(L);try{const U=(N=a==null?void 0:a.user)!=null&&N.id?`otpVerified:${a.user.id}`:"otpVerified";L?(localStorage.setItem(U,"true"),localStorage.setItem("otpVerified","true")):(localStorage.removeItem(U),localStorage.removeItem("otpVerified"))}catch{}},[($=a==null?void 0:a.user)==null?void 0:$.id]),F=async L=>{var D,R;const N=(D=L==null?void 0:L.user)==null?void 0:D.id,U=_+1;if(j(U),!N)return x(!1),!0;if(w||y&&((R=L==null?void 0:L.user)==null?void 0:R.id)===(n==null?void 0:n.id))return!v;k(!0);try{const{data:K,error:Q}=await ae.from("users_profile").select("is_active").eq("user_id",N).maybeSingle();return Q?(console.error("Error checking account status:",Q),!v):K?K.is_active===!0?(x(!1),b(!0),!0):(t("/account-deactivated",{replace:!0}),!1):!v}catch(K){return console.error("Failed to check account status",K),!v}finally{k(!1)}},E=async L=>{var U,D,R,K,Q;const N=(U=L==null?void 0:L.user)==null?void 0:U.id;if(!N){f(!1);try{const H=(D=L==null?void 0:L.user)!=null&&D.id?`otpRequired:${L.user.id}`:"otpRequired";localStorage.removeItem(H)}catch{}return!1}try{const{data:H,error:V}=await ae.from("users_profile").select("is_2fa_email_enabled").eq("user_id",N).maybeSingle();if(V)throw V;if(!H){f(!0);try{const G=(R=L==null?void 0:L.user)!=null&&R.id?`otpRequired:${L.user.id}`:"otpRequired";localStorage.setItem(G,"true")}catch{}return!0}const ie=(H==null?void 0:H.is_2fa_email_enabled)===!0;f(!!ie);try{const G=(K=L==null?void 0:L.user)!=null&&K.id?`otpRequired:${L.user.id}`:"otpRequired";ie?localStorage.setItem(G,"true"):localStorage.removeItem(G)}catch{}return!!ie}catch(H){console.warn("Failed to evaluate 2FA profile flag",H),f(!0);try{const V=(Q=L==null?void 0:L.user)!=null&&Q.id?`otpRequired:${L.user.id}`:"otpRequired";localStorage.setItem(V,"true")}catch{}return!0}},I=L=>{let N=!1;const U=window.setTimeout(()=>{N||g(!0)},5e3);return L.finally(()=>{N=!0,window.clearTimeout(U),g(!0)})};p.useEffect(()=>{(async()=>{var R,K,Q;l(!0),g(!1);let U=!1;const D=window.setTimeout(()=>{U=!0,l(!1),g(!0)},5e3);try{try{localStorage.removeItem("otpRequired"),localStorage.removeItem("otpVerified")}catch{}try{const le=Object.keys(localStorage).filter(se=>se.startsWith("sb-")&&se.endsWith("-auth-token"));for(const se of le)try{const Z=localStorage.getItem(se);if(!Z)continue;const _e=JSON.parse(Z);if(_e!=null&&_e.access_token&&(_e!=null&&_e.user)){s(_e),r(_e.user);break}}catch{}localStorage.removeItem("sb-tgrmxlbnutxpewfmofdx-auth-token"),localStorage.removeItem("sb-yoekcpoppfudmqtvjcby-auth-token")}catch{}const H=await Promise.race([ae.auth.getSession().catch(()=>({data:{session:null}})),new Promise(le=>{setTimeout(()=>le({data:{session:null}}),4e3)})]),V=((R=H==null?void 0:H.data)==null?void 0:R.session)??null;s(V),r((V==null?void 0:V.user)??null);const ie=await Promise.race([ae.auth.getUser().catch(()=>({data:{user:null}})),new Promise(le=>{setTimeout(()=>le({data:{user:null}}),4e3)})]);if(!(((K=ie==null?void 0:ie.data)==null?void 0:K.user)??null)){s(null),r(null),f(!1),M(!1),g(!0);return}if(V){if(!await Promise.race([F(V),new Promise(se=>setTimeout(()=>se(!0),3e3))])){s(V),r(V.user),f(!1),M(!1),g(!0),l(!1);return}s(V),r(V.user);try{(Q=V.user)!=null&&Q.id&&(localStorage.setItem("app.currentUserId",V.user.id),localStorage.setItem("app.currentUserEmail",V.user.email||""))}catch{}U||(window.clearTimeout(D),l(!1)),I(E(V).then(se=>{f(!!se)}));return}else f(!1),M(!1),g(!0)}finally{U||(window.clearTimeout(D),l(!1))}})();const{data:{subscription:N}}=ae.auth.onAuthStateChange(async(U,D)=>{var R,K,Q,H;try{if(U==="SIGNED_IN"){const V=T.current,ie=((R=D==null?void 0:D.user)==null?void 0:R.id)||null;if(!!V&&!!ie&&V===ie){s(D),r((D==null?void 0:D.user)??null);return}if(S){s(D),r((D==null?void 0:D.user)??null);return}if(!await Promise.race([F(D),new Promise(_e=>setTimeout(()=>_e(!0),3e3))])){s(D),r((D==null?void 0:D.user)??null),f(!1),M(!1),g(!0),l(!1);return}s(D),r((D==null?void 0:D.user)??null);const se=((K=D==null?void 0:D.user)==null?void 0:K.id)||null;if(se&&C.current!==se){Bt({action:"auth.login",resource:"auth",userId:se,context:{}}).catch(()=>{}),C.current=se;try{localStorage.setItem("app.currentUserId",se),localStorage.setItem("app.currentUserEmail",((Q=D==null?void 0:D.user)==null?void 0:Q.email)||"")}catch{}}let Z=!1;try{const _e=se?`otpVerified:${se}`:"otpVerified";Z=localStorage.getItem(_e)==="true"||localStorage.getItem("otpVerified")==="true"}catch{}M(!!Z);try{const _e=(H=D==null?void 0:D.user)!=null&&H.id?`otpRequired:${D.user.id}`:"otpRequired";localStorage.removeItem(_e)}catch{}g(!1),l(!1),I(E(D).then(_e=>{var z;if(_e&&!Z){const q=((z=D==null?void 0:D.user)==null?void 0:z.id)||null;q&&c.current!==q&&ae.functions.invoke("send-2fa-login-email",{headers:D!=null&&D.access_token?{Authorization:`Bearer ${D.access_token}`}:void 0}).then(()=>{c.current=q}).catch(ce=>{console.warn("2FA send function failed",ce)})}f(!!_e)}));try{localStorage.setItem("app.lastAuthEvent",JSON.stringify({event:U,at:Date.now(),user:(D==null?void 0:D.user)||null}))}catch{}return}if(U==="PASSWORD_RECOVERY"){try{localStorage.setItem("auth.intent","recovery")}catch{}try{if(window.location.hash){const V=new URL(window.location.href);V.hash="",window.history.replaceState({},document.title,V.toString())}}catch{}window.location.pathname!=="/reset-password"&&t("/reset-password",{replace:!0}),g(!1),I((async()=>{try{const V=await E(D);f(!!V),V&&M(!1)}catch{f(!1)}})());return}if(U==="TOKEN_REFRESHED"||U==="USER_UPDATED")return;if(U==="SIGNED_OUT"){n!=null&&n.id&&Bt({action:"auth.logout",resource:"auth",userId:n.id,context:{}}).catch(()=>{}),f(!1),M(!1),A(!1),x(!1);try{const V=[];for(let G=0;G<localStorage.length;G++){const le=localStorage.key(G);le&&V.push(le)}V.forEach(G=>{try{localStorage.removeItem(G)}catch{}});const ie=[];for(let G=0;G<sessionStorage.length;G++){const le=sessionStorage.key(G);le&&ie.push(le)}ie.forEach(G=>{try{sessionStorage.removeItem(G)}catch{}})}catch(V){console.warn("Error clearing cache on sign out:",V)}}}catch{}U!=="SIGNED_IN"&&(s(D),r((D==null?void 0:D.user)??null)),g(!0),l(!1)});return()=>N.unsubscribe()},[]),p.useEffect(()=>{const L=async()=>{try{await ae.auth.getSession()}catch{}},N=()=>{try{document.visibilityState==="visible"&&L()}catch{}};window.addEventListener("focus",L),document.addEventListener("visibilitychange",N);const U=window.setInterval(()=>{try{document.visibilityState==="visible"&&ae.auth.getSession().catch(()=>{})}catch{}},4*60*1e3);return()=>{window.removeEventListener("focus",L),document.removeEventListener("visibilitychange",N);try{clearInterval(U)}catch{}}},[]);const P=p.useCallback(async()=>{try{A(!0);try{const L=[];for(let D=0;D<localStorage.length;D++){const R=localStorage.key(D);R&&L.push(R)}L.forEach(D=>{try{localStorage.removeItem(D)}catch{}});const N=[];for(let D=0;D<sessionStorage.length;D++){const R=sessionStorage.key(D);R&&N.push(R)}N.forEach(D=>{try{sessionStorage.removeItem(D)}catch{}});const U=["app.cached","app.lastAuthEvent","app.currentUserId","app.currentUserEmail","otpVerified","otpRequired","auth.intent","sb-"];Object.keys(localStorage).forEach(D=>{if(U.some(R=>D.includes(R)))try{localStorage.removeItem(D)}catch{}})}catch(L){console.warn("Error clearing cache:",L)}await ae.auth.signOut()}catch(L){console.error("Error signing out:",L)}finally{A(!1)}},[]),B=p.useCallback(async()=>{try{const{data:{user:L}}=await ae.auth.getUser();r(L)}catch(L){console.error("Error refreshing user:",L)}},[]),O=p.useMemo(()=>({user:n,session:a,loading:o,signOut:P,refreshUser:B,otpRequired:u,otpVerified:d,setOtpVerified:M,otpEvaluated:m,accountDeactivated:v,setAccountDeactivated:x}),[n,a,o,P,B,u,d,M,m,v,x]);return i.jsx(IF.Provider,{value:O,children:e})}function Xr(){const e=p.useContext(IF);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const zu={analytics:["read"],ai_profiles:["create","update","delete","read_all","read_own"],ai_sessions:["create","update","delete","read_all","read_own"],channels:["create","update","delete","read_all","read_own"],contacts:["create","update","delete","read_all","read_own"],contact_identities:["create","update","delete","read_all","read_own"],threads:["create","update","delete","read_all","read_channel_owned","read_collaborator"],messages:["create","update","delete","send","read_all","read_collaborator"],ai_agent_files:["create","read","delete"],admin_panel:["read","update"],super_agents:["create","update","delete","read_all","read_own"],users_profile:["create","update","delete","read"],roles:["create","read","update","delete"],audit_logs:["read"],alerts:["read","ack"]},gw=e=>e==="create"?"create":e==="update"?"update":e==="delete"?"delete":e.startsWith("read")||e.startsWith("view")?"read":"special",yee=e=>["delete","manage_2fa","configure","update_token_limit","manage"].some(n=>e.includes(n)),bee={defaultTtl:5*60*1e3,maxSize:100,strategy:"stale-while-revalidate"},Ff="supabase_cache_",pT="1";class wee{constructor(t={}){Lt(this,"cache",new Map);Lt(this,"config");this.config={...bee,...t},this.loadFromStorage(),typeof window<"u"&&setInterval(()=>this.cleanup(),6e4)}get(t){const n=this.cache.get(t);if(!n)return null;const r=Date.now(),a=n.ttl||this.config.defaultTtl;return n.timestamp+a<r?(this.cache.delete(t),this.deleteFromStorage(t),null):n.data}set(t,n,r){const a={data:n,timestamp:Date.now(),ttl:r||this.config.defaultTtl,version:parseInt(pT)};if(this.cache.size>=this.config.maxSize){const s=this.findOldestEntry();s&&(this.cache.delete(s),this.deleteFromStorage(s))}this.cache.set(t,a),this.saveToStorage(t,a)}async execute(t,n,r,a){const s=r||this.config.strategy,o=this.get(t);switch(s){case"cache-first":if(o)return o;try{const l=await n();return this.set(t,l,a),l}catch(l){if(o)return o;throw l}case"network-first":try{const l=await n();return this.set(t,l,a),l}catch(l){if(o)return o;throw l}case"stale-while-revalidate":if(o)return n().then(l=>{this.set(t,l,a)}).catch(()=>{}),o;try{const l=await n();return this.set(t,l,a),l}catch(l){throw l}case"network-only":try{const l=await n();return this.set(t,l,a),l}catch(l){throw l}case"cache-only":if(o)return o;throw new Error("No cached data available");default:return await n()}}invalidate(t){this.cache.delete(t),this.deleteFromStorage(t)}invalidatePattern(t){const n=new RegExp(t);for(const r of this.cache.keys())n.test(r)&&this.invalidate(r)}clear(){this.cache.clear();try{if(typeof localStorage<"u")for(let t=localStorage.length-1;t>=0;t--){const n=localStorage.key(t);n&&n.startsWith(Ff)&&localStorage.removeItem(n)}}catch(t){console.warn("Failed to clear cache from storage:",t)}}findOldestEntry(){let t=null,n=1/0;for(const[r,a]of this.cache.entries())a.timestamp<n&&(n=a.timestamp,t=r);return t}cleanup(){const t=Date.now();for(const[n,r]of this.cache.entries()){const a=r.ttl||this.config.defaultTtl;r.timestamp+a<t&&(this.cache.delete(n),this.deleteFromStorage(n))}}saveToStorage(t,n){try{if(typeof localStorage<"u"){const r=`${Ff}${t}`;localStorage.setItem(r,JSON.stringify(n))}}catch(r){console.warn("Failed to save cache entry:",r)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=Date.now();for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);if(r&&r.startsWith(Ff))try{const s=JSON.parse(localStorage.getItem(r)||"{}");if(s.version&&s.version!==parseInt(pT)){localStorage.removeItem(r);continue}const o=s.ttl||this.config.defaultTtl;if(s.timestamp+o<t){localStorage.removeItem(r);continue}const l=r.replace(Ff,"");this.cache.set(l,s)}catch{localStorage.removeItem(r)}}}}catch(t){console.warn("Failed to load cache from storage:",t)}}deleteFromStorage(t){try{if(typeof localStorage<"u"){const n=`${Ff}${t}`;localStorage.removeItem(n)}}catch{}}getStats(){const t=Date.now(),n=Array.from(this.cache.entries()).map(([r,a])=>({key:r,age:t-a.timestamp,ttl:a.ttl||this.config.defaultTtl}));return{size:this.cache.size,maxSize:this.config.maxSize,entries:n}}}const Ys=new wee;class jee{constructor(){Lt(this,"queue",[]);Lt(this,"processing",!1);Lt(this,"maxRetries",3);Lt(this,"storageKey","offline_queue");this.loadFromStorage(),typeof window<"u"&&window.addEventListener("online",()=>{this.processQueue()})}add(t){const n={...t,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),retries:0};return this.queue.push(n),this.saveToStorage(),typeof navigator<"u"&&navigator.onLine&&this.processQueue(),n.id}async processQueue(t){if(!(this.processing||this.queue.length===0)&&t){this.processing=!0;try{const n=[...this.queue];this.queue=[];for(const r of n)try{await t(r),this.remove(r.id)}catch{r.retries++,r.retries<this.maxRetries?this.queue.push(r):(console.error("Failed to sync write operation after max retries:",r),this.remove(r.id))}this.saveToStorage()}finally{this.processing=!1}}}remove(t){this.queue=this.queue.filter(n=>n.id!==t),this.saveToStorage()}size(){return this.queue.length}clear(){this.queue=[],this.saveToStorage()}getAll(){return[...this.queue]}saveToStorage(){try{typeof localStorage<"u"&&localStorage.setItem(this.storageKey,JSON.stringify(this.queue))}catch(t){console.warn("Failed to save offline queue:",t)}}loadFromStorage(){try{if(typeof localStorage<"u"){const t=localStorage.getItem(this.storageKey);t&&(this.queue=JSON.parse(t))}}catch(t){console.warn("Failed to load offline queue:",t)}}}new jee;const lm="app:authz-changed";function gT(){try{Ys.clear()}catch{}try{if(typeof localStorage>"u")return;const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&e.push(n)}for(const t of e)if(t.startsWith("app.cached"))try{localStorage.removeItem(t)}catch{}}catch{}try{const e=globalThis;e.__agentsCache&&(e.__agentsCache.data=null,e.__agentsCache.ts=0,e.__agentsCache.inFlight=null)}catch{}}function vT(e){try{if(typeof window>"u")return;window.dispatchEvent(new CustomEvent(lm,{detail:{reason:e}}))}catch{}}const RF=p.createContext(void 0);function _ee({children:e}){const{user:t,accountDeactivated:n}=Xr(),[r,a]=p.useState([]),[s,o]=p.useState([]),[l,c]=p.useState(null),[u,f]=p.useState(!0),[d,h]=p.useState(null),m=(E,I)=>{const P=E.map(O=>String((O==null?void 0:O.name)??"").trim().toLowerCase()).filter(Boolean).sort().join(","),B=I.map(O=>`${String((O==null?void 0:O.resource)??"").trim().toLowerCase()}.${String((O==null?void 0:O.action)??"").trim().toLowerCase()}`).filter(O=>O!==".").sort().join(",");return`roles:${P}|perms:${B}`},g=(E,I)=>{try{const P=`app.authzFingerprint:${E}`,B=typeof localStorage<"u"?localStorage.getItem(P):null;B&&B!==I&&(gT(),vT("rbac-fingerprint-changed")),typeof localStorage<"u"&&localStorage.setItem(P,I)}catch{}},v=async(E,I)=>{try{I!=null&&I.background||f(!0),h(null);const{data:P,error:B}=await ae.from("v_current_user_permissions").select("*");if(B)throw B;const O=P||[];o(O);const{data:$,error:L}=await ae.from("user_roles").select("role_id").eq("user_id",E);if(L)throw L;if(!$||$.length===0){g(E,m([],O)),a([]),c({user_id:E,roles:[],permissions:O});return}const N=$.map(Q=>Q.role_id),{data:U,error:D}=await ae.from("roles").select("*").in("id",N);if(D)throw D;const R=U||[];g(E,m(R,O)),a(R);const K=R.map(Q=>({...Q,permissions:O}));c({user_id:E,roles:K,permissions:O})}catch(P){console.error("Error fetching user RBAC:",P),h(P instanceof Error?P.message:"Failed to fetch user permissions")}finally{I!=null&&I.background||f(!1)}},x=async()=>{t!=null&&t.id&&await v(t.id,{background:!0})};p.useEffect(()=>{t!=null&&t.id&&!n?v(t.id):(a([]),o([]),c(null),f(!1))},[t==null?void 0:t.id,n]),p.useEffect(()=>{if(!(t!=null&&t.id)||n)return;const E=t.id,I=ae.channel(`rbac-user-roles:${E}`).on("postgres_changes",{event:"*",schema:"public",table:"user_roles",filter:`user_id=eq.${E}`},async()=>{gT(),vT("user_roles-realtime-change");try{await v(E,{background:!0})}catch{}}).subscribe();return()=>{try{ae.removeChannel(I)}catch{}}},[t==null?void 0:t.id,n]);const y=E=>{if(!E)return!1;if(r.some($=>$.name==="master_agent"))return!0;const I=String(E).trim().toLowerCase();if(s.some($=>($.name||"").trim().toLowerCase()===I)||s.some($=>`${$.resource}.${$.action}`.toLowerCase()===I))return!0;const O=I.indexOf(".");if(O>0){const $=I.slice(0,O),L=I.slice(O+1),U={edit:["update"],update:["edit"],remove:["delete"],delete:["remove"],send:["create"],read:["read_all","read_own","read_channel_owned","read_collaborator"],read_all:["read"]}[L]||[];if(U.length>0&&s.some(R=>U.some(K=>`${R.resource}.${R.action}`.toLowerCase()===`${$}.${K}`)))return!0}return!1},b=E=>E.some(I=>y(I)),w=E=>E.every(I=>y(I)),k=E=>r.some(I=>I.name===E),F={userRoles:r,userPermissions:s,userWithRoles:l,hasPermission:y,hasAnyPermission:b,hasAllPermissions:w,hasRole:k,hasAnyRole:E=>E.some(I=>k(I)),hasPermissionDB:async(E,I)=>{try{const{data:P,error:B}=await ae.rpc("has_perm",{p_resource:E,p_action:I});return B?(console.error("Error checking permission:",B),!1):P===!0}catch(P){return console.error("Error in hasPermissionDB:",P),!1}},can:(E,...I)=>!E||I.length===0?!1:I.every(P=>y(`${E}.${P}`)),canRead:E=>{const I=zu[E];if(!Array.isArray(I))return!1;const P=I.filter(B=>B==="read"||B.startsWith("read_"));return P.length===0?!1:P.some(B=>y(`${E}.${B}`))},canCreate:E=>y(`${E}.create`),canUpdate:E=>y(`${E}.update`),canDelete:E=>y(`${E}.delete`),loading:u,error:d,refreshRBAC:x};return i.jsx(RF.Provider,{value:F,children:e})}function _r(){const e=p.useContext(RF);if(e===void 0)throw new Error("useRBAC must be used within an RBACProvider");return e}const Cd=cp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},s)=>{const o=r?KS:"button";return i.jsx(o,{className:Se(Cd({variant:t,size:n,className:e})),ref:s,...a})});te.displayName="Button";const Me=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Se("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Me.displayName="Card";const nt=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Se("flex flex-col space-y-1.5 p-6",e),...t}));nt.displayName="CardHeader";const tt=p.forwardRef(({className:e,...t},n)=>i.jsx("h3",{ref:n,className:Se("text-2xl font-semibold leading-none tracking-tight",e),...t}));tt.displayName="CardTitle";const pi=p.forwardRef(({className:e,...t},n)=>i.jsx("p",{ref:n,className:Se("text-sm text-muted-foreground",e),...t}));pi.displayName="CardDescription";const et=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Se("p-6 pt-0",e),...t}));et.displayName="CardContent";const kee=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Se("flex items-center p-6 pt-0",e),...t}));kee.displayName="CardFooter";const Ye=p.forwardRef(({className:e,type:t,...n},r)=>i.jsx("input",{type:t,className:Se("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Ye.displayName="Input";var See="Label",MF=p.forwardRef((e,t)=>i.jsx(Qe.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));MF.displayName=See;var DF=MF;const Nee=cp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),qe=p.forwardRef(({className:e,...t},n)=>i.jsx(DF,{ref:n,className:Se(Nee(),e),...t}));qe.displayName=DF.displayName;var Cee=p.createContext(void 0);function uf(e){const t=p.useContext(Cee);return e||t||"ltr"}var vw="rovingFocusGroup.onEntryFocus",Aee={bubbles:!1,cancelable:!0},vp="RovingFocusGroup",[e_,$F,Eee]=op(vp),[Pee,Jy]=kr(vp,[Eee]),[Tee,Oee]=Pee(vp),LF=p.forwardRef((e,t)=>i.jsx(e_.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(e_.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Iee,{...e,ref:t})})}));LF.displayName=vp;var Iee=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...d}=e,h=p.useRef(null),m=Nt(t,h),g=uf(s),[v,x]=Ia({prop:o,defaultProp:l??null,onChange:c,caller:vp}),[y,b]=p.useState(!1),w=Vn(u),k=$F(n),_=p.useRef(!1),[j,S]=p.useState(0);return p.useEffect(()=>{const A=h.current;if(A)return A.addEventListener(vw,w),()=>A.removeEventListener(vw,w)},[w]),i.jsx(Tee,{scope:n,orientation:r,dir:g,loop:a,currentTabStopId:v,onItemFocus:p.useCallback(A=>x(A),[x]),onItemShiftTab:p.useCallback(()=>b(!0),[]),onFocusableItemAdd:p.useCallback(()=>S(A=>A+1),[]),onFocusableItemRemove:p.useCallback(()=>S(A=>A-1),[]),children:i.jsx(Qe.div,{tabIndex:y||j===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:De(e.onMouseDown,()=>{_.current=!0}),onFocus:De(e.onFocus,A=>{const C=!_.current;if(A.target===A.currentTarget&&C&&!y){const T=new CustomEvent(vw,Aee);if(A.currentTarget.dispatchEvent(T),!T.defaultPrevented){const M=k().filter(B=>B.focusable),F=M.find(B=>B.active),E=M.find(B=>B.id===v),P=[F,E,...M].filter(Boolean).map(B=>B.ref.current);UF(P,f)}}_.current=!1}),onBlur:De(e.onBlur,()=>b(!1))})})}),FF="RovingFocusGroupItem",BF=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:s,children:o,...l}=e,c=ar(),u=s||c,f=Oee(FF,n),d=f.currentTabStopId===u,h=$F(n),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:v}=f;return p.useEffect(()=>{if(r)return m(),()=>g()},[r,m,g]),i.jsx(e_.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:i.jsx(Qe.span,{tabIndex:d?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:De(e.onMouseDown,x=>{r?f.onItemFocus(u):x.preventDefault()}),onFocus:De(e.onFocus,()=>f.onItemFocus(u)),onKeyDown:De(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=Dee(x,f.orientation,f.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let w=h().filter(k=>k.focusable).map(k=>k.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const k=w.indexOf(x.currentTarget);w=f.loop?$ee(w,k+1):w.slice(k+1)}setTimeout(()=>UF(w))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:v!=null}):o})})});BF.displayName=FF;var Ree={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Mee(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Dee(e,t,n){const r=Mee(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Ree[r]}function UF(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function $ee(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var zF=LF,qF=BF,Qy="Tabs",[Lee,S3e]=kr(Qy,[Jy]),WF=Jy(),[Fee,NN]=Lee(Qy),HF=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,f=uf(l),[d,h]=Ia({prop:r,onChange:a,defaultProp:s??"",caller:Qy});return i.jsx(Fee,{scope:n,baseId:ar(),value:d,onValueChange:h,orientation:o,dir:f,activationMode:c,children:i.jsx(Qe.div,{dir:f,"data-orientation":o,...u,ref:t})})});HF.displayName=Qy;var VF="TabsList",KF=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,s=NN(VF,n),o=WF(n);return i.jsx(zF,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:i.jsx(Qe.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:t})})});KF.displayName=VF;var GF="TabsTrigger",YF=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...s}=e,o=NN(GF,n),l=WF(n),c=QF(o.baseId,r),u=ZF(o.baseId,r),f=r===o.value;return i.jsx(qF,{asChild:!0,...l,focusable:!a,active:f,children:i.jsx(Qe.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":u,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...s,ref:t,onMouseDown:De(e.onMouseDown,d=>{!a&&d.button===0&&d.ctrlKey===!1?o.onValueChange(r):d.preventDefault()}),onKeyDown:De(e.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(r)}),onFocus:De(e.onFocus,()=>{const d=o.activationMode!=="manual";!f&&!a&&d&&o.onValueChange(r)})})})});YF.displayName=GF;var XF="TabsContent",JF=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:s,...o}=e,l=NN(XF,n),c=QF(l.baseId,r),u=ZF(l.baseId,r),f=r===l.value,d=p.useRef(f);return p.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),i.jsx(pr,{present:a||f,children:({present:h})=>i.jsx(Qe.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:h&&s})})});JF.displayName=XF;function QF(e,t){return`${e}-trigger-${t}`}function ZF(e,t){return`${e}-content-${t}`}var Bee=HF,e3=KF,t3=YF,n3=JF;const wl=Bee,go=p.forwardRef(({className:e,...t},n)=>i.jsx(e3,{ref:n,className:Se("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));go.displayName=e3.displayName;const Kn=p.forwardRef(({className:e,...t},n)=>i.jsx(t3,{ref:n,className:Se("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Kn.displayName=t3.displayName;const Mn=p.forwardRef(({className:e,...t},n)=>i.jsx(n3,{ref:n,className:Se("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Mn.displayName=n3.displayName;const Uee=cp("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),cm=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:Se(Uee({variant:t}),e),...n}));cm.displayName="Alert";const zee=p.forwardRef(({className:e,...t},n)=>i.jsx("h5",{ref:n,className:Se("mb-1 font-medium leading-none tracking-tight",e),...t}));zee.displayName="AlertTitle";const um=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Se("text-sm [&_p]:leading-relaxed",e),...t}));um.displayName="AlertDescription";function qee({sitekey:e,onVerify:t,onExpire:n,className:r}){const a=p.useRef(null),s=p.useRef(null);return p.useEffect(()=>(new Promise(l=>{if(window.hcaptcha)return l();const c=document.createElement("script");c.src="https://js.hcaptcha.com/1/api.js",c.async=!0,c.defer=!0,c.onload=()=>l(),document.head.appendChild(c)}).then(()=>{a.current&&s.current===null&&(s.current=window.hcaptcha.render(a.current,{sitekey:e,callback:l=>t(l),"expired-callback":()=>n&&n()}))}),()=>{try{s.current!==null&&window.hcaptcha&&window.hcaptcha.remove(s.current)}catch{}}),[e]),i.jsx("div",{className:r,children:i.jsx("div",{ref:a})})}const Wee="vite_react_shadcn_ts",Hee="0.1.16",Vee="module",Kee={predev:"echo skip changelog copy",dev:"vite",prebuild:"echo skip changelog copy",build:"vite build","build:dev":"vite build --mode development",lint:"eslint .",preview:"vite preview",test:"vitest",sync:"node sync/index.js"},Gee={"@hookform/resolvers":"^3.10.0","@radix-ui/react-accordion":"^1.2.11","@radix-ui/react-alert-dialog":"^1.1.14","@radix-ui/react-aspect-ratio":"^1.1.7","@radix-ui/react-avatar":"^1.1.10","@radix-ui/react-checkbox":"^1.3.2","@radix-ui/react-collapsible":"^1.1.11","@radix-ui/react-context-menu":"^2.2.15","@radix-ui/react-dialog":"^1.1.14","@radix-ui/react-dropdown-menu":"^2.1.15","@radix-ui/react-hover-card":"^1.1.14","@radix-ui/react-label":"^2.1.7","@radix-ui/react-menubar":"^1.1.15","@radix-ui/react-navigation-menu":"^1.2.13","@radix-ui/react-popover":"^1.1.14","@radix-ui/react-progress":"^1.1.7","@radix-ui/react-radio-group":"^1.3.7","@radix-ui/react-scroll-area":"^1.2.9","@radix-ui/react-select":"^2.2.5","@radix-ui/react-separator":"^1.1.7","@radix-ui/react-slider":"^1.3.5","@radix-ui/react-slot":"^1.2.3","@radix-ui/react-switch":"^1.2.5","@radix-ui/react-tabs":"^1.1.12","@radix-ui/react-toast":"^1.2.14","@radix-ui/react-toggle":"^1.1.9","@radix-ui/react-toggle-group":"^1.1.10","@radix-ui/react-tooltip":"^1.2.7","@supabase/supabase-js":"^2.55.0","@tanstack/react-query":"^5.83.0","class-variance-authority":"^0.7.1",clsx:"^2.1.1",cmdk:"^1.1.1","date-fns":"^3.6.0","embla-carousel-react":"^8.6.0","input-otp":"^1.4.2","lucide-react":"^0.462.0","next-themes":"^0.3.0",react:"^18.3.1","react-day-picker":"^8.10.1","react-dom":"^18.3.1","react-hook-form":"^7.61.1","react-markdown":"^9.1.0","react-resizable-panels":"^2.1.9","react-router-dom":"^6.30.1",recharts:"^2.15.4","remark-gfm":"^4.0.1",sonner:"^1.7.4",dotenv:"^16.4.5","tailwind-merge":"^2.6.0","tailwindcss-animate":"^1.0.7",vaul:"^0.9.9",ws:"^8.18.0",zod:"^3.25.76"},Yee={"@eslint/js":"^9.32.0","@tailwindcss/typography":"^0.5.16","@types/node":"^22.16.5","@types/react":"^18.3.23","@types/react-dom":"^18.3.7","@vitejs/plugin-react-swc":"^3.11.0",autoprefixer:"^10.4.21",eslint:"^9.32.0","eslint-plugin-react-hooks":"^5.2.0","eslint-plugin-react-refresh":"^0.4.20",globals:"^15.15.0",postcss:"^8.5.6",tailwindcss:"^3.4.17",typescript:"^5.8.3","typescript-eslint":"^8.38.0",vite:"^5.4.19",vitest:"^1.6.0"},xw={name:Wee,private:!0,version:Hee,type:Vee,scripts:Kee,dependencies:Gee,devDependencies:Yee};function Xee({onBack:e}){const t=Za(),[n,r]=p.useState("login"),[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[f,d]=p.useState(null),[h,m]=p.useState(null),[g,v]=p.useState(null),x="30583a2e-84ac-496a-8ec2-23043ae06dc0",y=!!x,b=()=>{var T,M;try{(M=(T=window==null?void 0:window.hcaptcha)==null?void 0:T.reset)==null||M.call(T)}catch{}},[w,k]=p.useState(""),[_,j]=p.useState("");p.useState(""),p.useState("");const S=async T=>{var M;if(T.preventDefault(),s(!0),u(null),v(null),!h){v("Please complete the CAPTCHA"),s(!1);return}try{const{data:F,error:E}=await ae.auth.signInWithPassword({email:w,password:_,...y&&h?{options:{captchaToken:h}}:{}});if(E)throw E;const I=(M=F.user)==null?void 0:M.id;if(I)try{const{data:P,error:B}=await ae.from("users_profile").select("is_active, is_2fa_email_enabled").eq("user_id",I).maybeSingle();if(B)throw console.error("Profile fetch error:",B),B;if(!P){await ae.auth.signOut(),u("Your account profile is missing. Please contact your Master Agent."),s(!1);return}if(P.is_active===!1){t("/account-deactivated",{replace:!0});return}const O=(P==null?void 0:P.is_2fa_email_enabled)===!0;Fe.success("Login successful!"),t("/",{replace:!0});return}catch(P){console.warn("Profile fetch failed:",P),Fe.success("Login successful!")}else Fe.success("Login successful!");t("/",{replace:!0})}catch(F){console.error("Login error:",F),u(F instanceof Error?F.message:"Failed to login"),Fe.error("Login failed"),b()}finally{s(!1)}},A=async T=>{T.preventDefault(),s(!0),u(null);try{const{error:M}=await ae.auth.resetPasswordForEmail(w,{redirectTo:`${window.location.origin}/reset-password`});if(M)throw M;d("Password reset email sent! Please check your inbox."),Fe.success("Password reset email sent!")}catch(M){console.error("Password reset error:",M),u(M instanceof Error?M.message:"Failed to send reset email"),Fe.error("Failed to send reset email")}finally{s(!1)}},C=()=>{u(null),d(null)};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Me,{className:"w-full max-w-md",children:[i.jsxs(nt,{className:"space-y-1",children:[e&&i.jsxs(te,{variant:"ghost",size:"sm",onClick:e,className:"absolute top-4 left-4",children:[i.jsx(up,{className:"w-4 h-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"text-center",children:[i.jsx(tt,{className:"text-2xl font-bold",children:"Welcome back"}),i.jsx(pi,{children:"Sign in to continue to Chatflow"})]})]}),i.jsx(et,{children:i.jsxs(wl,{value:n,onValueChange:T=>{r(T),C()},children:[i.jsxs(go,{className:"grid w-full grid-cols-2",children:[i.jsx(Kn,{value:"login",children:"Login"}),i.jsx(Kn,{value:"reset",children:"Reset"})]}),c&&i.jsx(cm,{className:"mt-4 border-red-200 bg-red-50",children:i.jsx(um,{className:"text-red-800",children:c})}),f&&i.jsx(cm,{className:"mt-4 border-green-200 bg-green-50",children:i.jsx(um,{className:"text-green-800",children:f})}),i.jsx(Mn,{value:"login",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:S,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"login-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(zv,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ye,{id:"login-email",type:"email",placeholder:"Enter your email",value:w,onChange:T=>k(T.target.value),className:"pl-10",required:!0})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Well send a one-time code after login."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"login-password",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Jh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ye,{id:"login-password",type:o?"text":"password",placeholder:"Enter your password",value:_,onChange:T=>j(T.target.value),className:"pl-10 pr-10",required:!0}),i.jsx(te,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?i.jsx(KL,{className:"h-4 w-4"}):i.jsx(ZS,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"flex items-center justify-end text-xs",children:i.jsx(KP,{to:"/reset-password",className:"hover:underline",children:"Forgot password?"})})]}),i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx(qee,{sitekey:x,onVerify:T=>m(T),onExpire:()=>{m(null)}}),g&&i.jsx("p",{className:"text-xs text-red-600 mt-1",children:g})]}),i.jsx(te,{type:"submit",className:"w-full",disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"}),i.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:i.jsxs(KP,{to:"/changelog",className:"hover:underline",children:["v",xw==null?void 0:xw.version]})})]})}),i.jsx(Mn,{value:"reset",className:"space-y-4 mt-4",children:i.jsxs("form",{onSubmit:A,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"reset-email",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(zv,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ye,{id:"reset-email",type:"email",placeholder:"Enter your email",value:w,onChange:T=>k(T.target.value),className:"pl-10",required:!0})]})]}),i.jsx(te,{type:"submit",className:"w-full",disabled:a,children:a?i.jsxs(i.Fragment,{children:[i.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending reset email..."]}):"Send Reset Email"})]})})]})})]})})}function xg({children:e}){const{user:t,loading:n,otpRequired:r,otpVerified:a,otpEvaluated:s}=Xr(),o=Za(),l=Pl();if(p.useEffect(()=>{var u;if(!n&&s&&t){const f=l.pathname==="/otp",d=l.pathname==="/reset-password",h=l.pathname==="/invite";let m=!1;try{const g=new URL(window.location.href),v=g.searchParams.get("type"),x=g.searchParams.get("code"),y=window.location.hash||"";m=v==="invite"||x&&!y.includes("access_token=")||y.includes("type=invite")||window.location.pathname==="/invite"}catch{}if(t&&(async()=>{try{const{data:g}=await ae.from("users_profile").select("password_set").eq("user_id",t.id).single();if(g&&g.password_set===!1){setTimeout(()=>o("/reset-password",{replace:!0}),0);return}}catch{}})(),m&&!d&&!h){setTimeout(()=>o("/reset-password",{replace:!0}),0);return}if(r&&!a&&!f){let g="2fa";try{new URL(window.location.href).searchParams.get("type")==="recovery"&&(g="recovery"),(u=window.location.hash)!=null&&u.includes("access_token=")&&(g="recovery"),localStorage.getItem("auth.intent")==="recovery"&&(g="recovery")}catch{}setTimeout(()=>o("/otp",{replace:!0,state:{from:l.pathname,intent:g}}),0)}}},[t,n,s,r,a,l.pathname,o]),n)return i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),i.jsx("span",{children:"Loading..."})]})});if(!t)return i.jsx(Xee,{});const c=l.pathname==="/otp";return t&&r&&!a&&!c?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),i.jsx("span",{children:"Redirecting"})]})}):i.jsx(i.Fragment,{children:e})}const Jee=cp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:opacity-90",secondary:"border-transparent bg-secondary text-secondary-foreground hover:opacity-90",destructive:"border-transparent bg-destructive text-destructive-foreground hover:opacity-90",outline:"text-foreground hover:opacity-90"}},defaultVariants:{variant:"default"}}),St=p.forwardRef(({className:e,variant:t,...n},r)=>i.jsx("div",{ref:r,className:Se(Jee({variant:t}),e),...n}));St.displayName="Badge";var Qee="Separator",xT="horizontal",Zee=["horizontal","vertical"],r3=p.forwardRef((e,t)=>{const{decorative:n,orientation:r=xT,...a}=e,s=ete(r)?r:xT,l=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return i.jsx(Qe.div,{"data-orientation":s,...l,...a,ref:t})});r3.displayName=Qee;function ete(e){return Zee.includes(e)}var a3=r3;const dm=p.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>i.jsx(a3,{ref:a,decorative:n,orientation:t,className:Se("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));dm.displayName=a3.displayName;var yw=0;function Zy(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??yT()),document.body.insertAdjacentElement("beforeend",e[1]??yT()),yw++,()=>{yw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),yw--}},[])}function yT(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var bw="focusScope.autoFocusOnMount",ww="focusScope.autoFocusOnUnmount",bT={bubbles:!1,cancelable:!0},tte="FocusScope",xp=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...o}=e,[l,c]=p.useState(null),u=Vn(a),f=Vn(s),d=p.useRef(null),h=Nt(t,v=>c(v)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(w){if(m.paused||!l)return;const k=w.target;l.contains(k)?d.current=k:Bo(d.current,{select:!0})},x=function(w){if(m.paused||!l)return;const k=w.relatedTarget;k!==null&&(l.contains(k)||Bo(d.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&Bo(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const b=new MutationObserver(y);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),b.disconnect()}}},[r,l,m.paused]),p.useEffect(()=>{if(l){jT.add(m);const v=document.activeElement;if(!l.contains(v)){const y=new CustomEvent(bw,bT);l.addEventListener(bw,u),l.dispatchEvent(y),y.defaultPrevented||(nte(ote(i3(l)),{select:!0}),document.activeElement===v&&Bo(l))}return()=>{l.removeEventListener(bw,u),setTimeout(()=>{const y=new CustomEvent(ww,bT);l.addEventListener(ww,f),l.dispatchEvent(y),y.defaultPrevented||Bo(v??document.body,{select:!0}),l.removeEventListener(ww,f),jT.remove(m)},0)}}},[l,u,f,m]);const g=p.useCallback(v=>{if(!n&&!r||m.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const b=v.currentTarget,[w,k]=rte(b);w&&k?!v.shiftKey&&y===k?(v.preventDefault(),n&&Bo(w,{select:!0})):v.shiftKey&&y===w&&(v.preventDefault(),n&&Bo(k,{select:!0})):y===b&&v.preventDefault()}},[n,r,m.paused]);return i.jsx(Qe.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});xp.displayName=tte;function nte(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Bo(r,{select:t}),document.activeElement!==n)return}function rte(e){const t=i3(e),n=wT(t,e),r=wT(t.reverse(),e);return[n,r]}function i3(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function wT(e,t){for(const n of e)if(!ate(n,{upTo:t}))return n}function ate(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ite(e){return e instanceof HTMLInputElement&&"select"in e}function Bo(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&ite(e)&&t&&e.select()}}var jT=ste();function ste(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=_T(e,t),e.unshift(t)},remove(t){var n;e=_T(e,t),(n=e[0])==null||n.resume()}}}function _T(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function ote(e){return e.filter(t=>t.tagName!=="A")}var lte=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},du=new WeakMap,yg=new WeakMap,bg={},jw=0,s3=function(e){return e&&(e.host||s3(e.parentNode))},cte=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=s3(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},ute=function(e,t,n,r){var a=cte(t,Array.isArray(e)?e:[e]);bg[n]||(bg[n]=new WeakMap);var s=bg[n],o=[],l=new Set,c=new Set(a),u=function(d){!d||l.has(d)||(l.add(d),u(d.parentNode))};a.forEach(u);var f=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(l.has(h))f(h);else try{var m=h.getAttribute(r),g=m!==null&&m!=="false",v=(du.get(h)||0)+1,x=(s.get(h)||0)+1;du.set(h,v),s.set(h,x),o.push(h),v===1&&g&&yg.set(h,!0),x===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return f(t),l.clear(),jw++,function(){o.forEach(function(d){var h=du.get(d)-1,m=s.get(d)-1;du.set(d,h),s.set(d,m),h||(yg.has(d)||d.removeAttribute(r),yg.delete(d)),m||d.removeAttribute(n)}),jw--,jw||(du=new WeakMap,du=new WeakMap,yg=new WeakMap,bg={})}},eb=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=lte(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),ute(r,a,n,"aria-hidden")):function(){return null}},gs=function(){return gs=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},gs.apply(this,arguments)};function o3(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function dte(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,s;r<a;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var dv="right-scroll-bar-position",fv="width-before-scroll-bar",fte="with-scroll-bars-hidden",hte="--removed-body-scroll-bar-size";function _w(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function mte(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var pte=typeof window<"u"?p.useLayoutEffect:p.useEffect,kT=new WeakMap;function gte(e,t){var n=mte(null,function(r){return e.forEach(function(a){return _w(a,r)})});return pte(function(){var r=kT.get(n);if(r){var a=new Set(r),s=new Set(e),o=n.current;a.forEach(function(l){s.has(l)||_w(l,null)}),s.forEach(function(l){a.has(l)||_w(l,o)})}kT.set(n,e)},[e]),n}function vte(e){return e}function xte(e,t){t===void 0&&(t=vte);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(s),o=n}var c=function(){var f=o;o=[],f.forEach(s)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){o.push(f),u()},filter:function(f){return o=o.filter(f),n}}}};return a}function yte(e){e===void 0&&(e={});var t=xte(null);return t.options=gs({async:!0,ssr:!1},e),t}var l3=function(e){var t=e.sideCar,n=o3(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,gs({},n))};l3.isSideCarExport=!0;function bte(e,t){return e.useMedium(t),l3}var c3=yte(),kw=function(){},tb=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:kw,onWheelCapture:kw,onTouchMoveCapture:kw}),a=r[0],s=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,d=e.shards,h=e.sideCar,m=e.noRelative,g=e.noIsolation,v=e.inert,x=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,w=e.gapMode,k=o3(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=h,j=gte([n,t]),S=gs(gs({},k),a);return p.createElement(p.Fragment,null,f&&p.createElement(_,{sideCar:c3,removeScrollBar:u,shards:d,noRelative:m,noIsolation:g,inert:v,setCallbacks:s,allowPinchZoom:!!x,lockRef:n,gapMode:w}),o?p.cloneElement(p.Children.only(l),gs(gs({},S),{ref:j})):p.createElement(b,gs({},S,{className:c,ref:j}),l))});tb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};tb.classNames={fullWidth:fv,zeroRight:dv};var wte=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jte(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=wte();return t&&e.setAttribute("nonce",t),e}function _te(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function kte(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Ste=function(){var e=0,t=null;return{add:function(n){e==0&&(t=jte())&&(_te(t,n),kte(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Nte=function(){var e=Ste();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},u3=function(){var e=Nte(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Cte={left:0,top:0,right:0,gap:0},Sw=function(e){return parseInt(e||"",10)||0},Ate=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Sw(n),Sw(r),Sw(a)]},Ete=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Cte;var t=Ate(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Pte=u3(),td="data-scroll-locked",Tte=function(e,t,n,r){var a=e.left,s=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(fte,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(td,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(dv,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(fv,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(dv," .").concat(dv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(fv," .").concat(fv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(td,`] {
    `).concat(hte,": ").concat(l,`px;
  }
`)},ST=function(){var e=parseInt(document.body.getAttribute(td)||"0",10);return isFinite(e)?e:0},Ote=function(){p.useEffect(function(){return document.body.setAttribute(td,(ST()+1).toString()),function(){var e=ST()-1;e<=0?document.body.removeAttribute(td):document.body.setAttribute(td,e.toString())}},[])},Ite=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Ote();var s=p.useMemo(function(){return Ete(a)},[a]);return p.createElement(Pte,{styles:Tte(s,!t,a,n?"":"!important")})},t_=!1;if(typeof window<"u")try{var wg=Object.defineProperty({},"passive",{get:function(){return t_=!0,!0}});window.addEventListener("test",wg,wg),window.removeEventListener("test",wg,wg)}catch{t_=!1}var fu=t_?{passive:!1}:!1,Rte=function(e){return e.tagName==="TEXTAREA"},d3=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Rte(e)&&n[t]==="visible")},Mte=function(e){return d3(e,"overflowY")},Dte=function(e){return d3(e,"overflowX")},NT=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=f3(e,r);if(a){var s=h3(e,r),o=s[1],l=s[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},$te=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Lte=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},f3=function(e,t){return e==="v"?Mte(t):Dte(t)},h3=function(e,t){return e==="v"?$te(t):Lte(t)},Fte=function(e,t){return e==="h"&&t==="rtl"?-1:1},Bte=function(e,t,n,r,a){var s=Fte(e,window.getComputedStyle(t).direction),o=s*r,l=n.target,c=t.contains(l),u=!1,f=o>0,d=0,h=0;do{if(!l)break;var m=h3(e,l),g=m[0],v=m[1],x=m[2],y=v-x-s*g;(g||y)&&f3(e,l)&&(d+=y,h+=g);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(d)<1||!a)||!f&&(Math.abs(h)<1||!a))&&(u=!0),u},jg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},CT=function(e){return[e.deltaX,e.deltaY]},AT=function(e){return e&&"current"in e?e.current:e},Ute=function(e,t){return e[0]===t[0]&&e[1]===t[1]},zte=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},qte=0,hu=[];function Wte(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),a=p.useState(qte++)[0],s=p.useState(u3)[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=dte([e.lockRef.current],(e.shards||[]).map(AT),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var y=jg(v),b=n.current,w="deltaX"in v?v.deltaX:b[0]-y[0],k="deltaY"in v?v.deltaY:b[1]-y[1],_,j=v.target,S=Math.abs(w)>Math.abs(k)?"h":"v";if("touches"in v&&S==="h"&&j.type==="range")return!1;var A=NT(S,j);if(!A)return!0;if(A?_=S:(_=S==="v"?"h":"v",A=NT(S,j)),!A)return!1;if(!r.current&&"changedTouches"in v&&(w||k)&&(r.current=_),!_)return!0;var C=r.current||_;return Bte(C,x,v,C==="h"?w:k,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!hu.length||hu[hu.length-1]!==s)){var y="deltaY"in x?CT(x):jg(x),b=t.current.filter(function(_){return _.name===x.type&&(_.target===x.target||x.target===_.shadowParent)&&Ute(_.delta,y)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(AT).filter(Boolean).filter(function(_){return _.contains(x.target)}),k=w.length>0?l(x,w[0]):!o.current.noIsolation;k&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,y,b){var w={name:v,delta:x,target:y,should:b,shadowParent:Hte(y)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(k){return k!==w})},1)},[]),f=p.useCallback(function(v){n.current=jg(v),r.current=void 0},[]),d=p.useCallback(function(v){u(v.type,CT(v),v.target,l(v,e.lockRef.current))},[]),h=p.useCallback(function(v){u(v.type,jg(v),v.target,l(v,e.lockRef.current))},[]);p.useEffect(function(){return hu.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,fu),document.addEventListener("touchmove",c,fu),document.addEventListener("touchstart",f,fu),function(){hu=hu.filter(function(v){return v!==s}),document.removeEventListener("wheel",c,fu),document.removeEventListener("touchmove",c,fu),document.removeEventListener("touchstart",f,fu)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(s,{styles:zte(a)}):null,m?p.createElement(Ite,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Hte(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Vte=bte(c3,Wte);var yp=p.forwardRef(function(e,t){return p.createElement(tb,gs({},e,{ref:t,sideCar:Vte}))});yp.classNames=tb.classNames;var n_=["Enter"," "],Kte=["ArrowDown","PageUp","Home"],m3=["ArrowUp","PageDown","End"],Gte=[...Kte,...m3],Yte={ltr:[...n_,"ArrowRight"],rtl:[...n_,"ArrowLeft"]},Xte={ltr:["ArrowLeft"],rtl:["ArrowRight"]},bp="Menu",[fm,Jte,Qte]=op(bp),[Qc,p3]=kr(bp,[Qte,Al,Jy]),nb=Al(),g3=Jy(),[Zte,Zc]=Qc(bp),[ene,wp]=Qc(bp),v3=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:s,modal:o=!0}=e,l=nb(t),[c,u]=p.useState(null),f=p.useRef(!1),d=Vn(s),h=uf(a);return p.useEffect(()=>{const m=()=>{f.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>f.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),i.jsx(Ry,{...l,children:i.jsx(Zte,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:u,children:i.jsx(ene,{scope:t,onClose:p.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:f,dir:h,modal:o,children:r})})})};v3.displayName=bp;var tne="MenuAnchor",CN=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=nb(n);return i.jsx(hp,{...a,...r,ref:t})});CN.displayName=tne;var AN="MenuPortal",[nne,x3]=Qc(AN,{forceMount:void 0}),y3=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,s=Zc(AN,t);return i.jsx(nne,{scope:t,forceMount:n,children:i.jsx(pr,{present:n||s.open,children:i.jsx(nf,{asChild:!0,container:a,children:r})})})};y3.displayName=AN;var gi="MenuContent",[rne,EN]=Qc(gi),b3=p.forwardRef((e,t)=>{const n=x3(gi,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,s=Zc(gi,e.__scopeMenu),o=wp(gi,e.__scopeMenu);return i.jsx(fm.Provider,{scope:e.__scopeMenu,children:i.jsx(pr,{present:r||s.open,children:i.jsx(fm.Slot,{scope:e.__scopeMenu,children:o.modal?i.jsx(ane,{...a,ref:t}):i.jsx(ine,{...a,ref:t})})})})}),ane=p.forwardRef((e,t)=>{const n=Zc(gi,e.__scopeMenu),r=p.useRef(null),a=Nt(t,r);return p.useEffect(()=>{const s=r.current;if(s)return eb(s)},[]),i.jsx(PN,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:De(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ine=p.forwardRef((e,t)=>{const n=Zc(gi,e.__scopeMenu);return i.jsx(PN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),sne=xl("MenuContent.ScrollLock"),PN=p.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...v}=e,x=Zc(gi,n),y=wp(gi,n),b=nb(n),w=g3(n),k=Jte(n),[_,j]=p.useState(null),S=p.useRef(null),A=Nt(t,S,x.onContentChange),C=p.useRef(0),T=p.useRef(""),M=p.useRef(0),F=p.useRef(null),E=p.useRef("right"),I=p.useRef(0),P=g?yp:p.Fragment,B=g?{as:sne,allowPinchZoom:!0}:void 0,O=L=>{var V,ie;const N=T.current+L,U=k().filter(G=>!G.disabled),D=document.activeElement,R=(V=U.find(G=>G.ref.current===D))==null?void 0:V.textValue,K=U.map(G=>G.textValue),Q=xne(K,N,R),H=(ie=U.find(G=>G.textValue===Q))==null?void 0:ie.ref.current;(function G(le){T.current=le,window.clearTimeout(C.current),le!==""&&(C.current=window.setTimeout(()=>G(""),1e3))})(N),H&&setTimeout(()=>H.focus())};p.useEffect(()=>()=>window.clearTimeout(C.current),[]),Zy();const $=p.useCallback(L=>{var U,D;return E.current===((U=F.current)==null?void 0:U.side)&&bne(L,(D=F.current)==null?void 0:D.area)},[]);return i.jsx(rne,{scope:n,searchRef:T,onItemEnter:p.useCallback(L=>{$(L)&&L.preventDefault()},[$]),onItemLeave:p.useCallback(L=>{var N;$(L)||((N=S.current)==null||N.focus(),j(null))},[$]),onTriggerLeave:p.useCallback(L=>{$(L)&&L.preventDefault()},[$]),pointerGraceTimerRef:M,onPointerGraceIntentChange:p.useCallback(L=>{F.current=L},[]),children:i.jsx(P,{...B,children:i.jsx(xp,{asChild:!0,trapped:a,onMountAutoFocus:De(s,L=>{var N;L.preventDefault(),(N=S.current)==null||N.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(Yc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:d,onInteractOutside:h,onDismiss:m,children:i.jsx(zF,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:_,onCurrentTabStopIdChange:j,onEntryFocus:De(c,L=>{y.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(My,{role:"menu","aria-orientation":"vertical","data-state":D3(x.open),"data-radix-menu-content":"",dir:y.dir,...b,...v,ref:A,style:{outline:"none",...v.style},onKeyDown:De(v.onKeyDown,L=>{const U=L.target.closest("[data-radix-menu-content]")===L.currentTarget,D=L.ctrlKey||L.altKey||L.metaKey,R=L.key.length===1;U&&(L.key==="Tab"&&L.preventDefault(),!D&&R&&O(L.key));const K=S.current;if(L.target!==K||!Gte.includes(L.key))return;L.preventDefault();const H=k().filter(V=>!V.disabled).map(V=>V.ref.current);m3.includes(L.key)&&H.reverse(),gne(H)}),onBlur:De(e.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(C.current),T.current="")}),onPointerMove:De(e.onPointerMove,hm(L=>{const N=L.target,U=I.current!==L.clientX;if(L.currentTarget.contains(N)&&U){const D=L.clientX>I.current?"right":"left";E.current=D,I.current=L.clientX}}))})})})})})})});b3.displayName=gi;var one="MenuGroup",TN=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Qe.div,{role:"group",...r,ref:t})});TN.displayName=one;var lne="MenuLabel",w3=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Qe.div,{...r,ref:t})});w3.displayName=lne;var Zv="MenuItem",ET="menu.itemSelect",rb=p.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,s=p.useRef(null),o=wp(Zv,e.__scopeMenu),l=EN(Zv,e.__scopeMenu),c=Nt(t,s),u=p.useRef(!1),f=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(ET,{bubbles:!0,cancelable:!0});d.addEventListener(ET,m=>r==null?void 0:r(m),{once:!0}),GS(d,h),h.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(j3,{...a,ref:c,disabled:n,onClick:De(e.onClick,f),onPointerDown:d=>{var h;(h=e.onPointerDown)==null||h.call(e,d),u.current=!0},onPointerUp:De(e.onPointerUp,d=>{var h;u.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:De(e.onKeyDown,d=>{const h=l.searchRef.current!=="";n||h&&d.key===" "||n_.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});rb.displayName=Zv;var j3=p.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...s}=e,o=EN(Zv,n),l=g3(n),c=p.useRef(null),u=Nt(t,c),[f,d]=p.useState(!1),[h,m]=p.useState("");return p.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[s.children]),i.jsx(fm.ItemSlot,{scope:n,disabled:r,textValue:a??h,children:i.jsx(qF,{asChild:!0,...l,focusable:!r,children:i.jsx(Qe.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:u,onPointerMove:De(e.onPointerMove,hm(g=>{r?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:De(e.onPointerLeave,hm(g=>o.onItemLeave(g))),onFocus:De(e.onFocus,()=>d(!0)),onBlur:De(e.onBlur,()=>d(!1))})})})}),cne="MenuCheckboxItem",_3=p.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return i.jsx(A3,{scope:e.__scopeMenu,checked:n,children:i.jsx(rb,{role:"menuitemcheckbox","aria-checked":ex(n)?"mixed":n,...a,ref:t,"data-state":IN(n),onSelect:De(a.onSelect,()=>r==null?void 0:r(ex(n)?!0:!n),{checkForDefaultPrevented:!1})})})});_3.displayName=cne;var k3="MenuRadioGroup",[une,dne]=Qc(k3,{value:void 0,onValueChange:()=>{}}),S3=p.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,s=Vn(r);return i.jsx(une,{scope:e.__scopeMenu,value:n,onValueChange:s,children:i.jsx(TN,{...a,ref:t})})});S3.displayName=k3;var N3="MenuRadioItem",C3=p.forwardRef((e,t)=>{const{value:n,...r}=e,a=dne(N3,e.__scopeMenu),s=n===a.value;return i.jsx(A3,{scope:e.__scopeMenu,checked:s,children:i.jsx(rb,{role:"menuitemradio","aria-checked":s,...r,ref:t,"data-state":IN(s),onSelect:De(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});C3.displayName=N3;var ON="MenuItemIndicator",[A3,fne]=Qc(ON,{checked:!1}),E3=p.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,s=fne(ON,n);return i.jsx(pr,{present:r||ex(s.checked)||s.checked===!0,children:i.jsx(Qe.span,{...a,ref:t,"data-state":IN(s.checked)})})});E3.displayName=ON;var hne="MenuSeparator",P3=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return i.jsx(Qe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});P3.displayName=hne;var mne="MenuArrow",T3=p.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=nb(n);return i.jsx(Dy,{...a,...r,ref:t})});T3.displayName=mne;var pne="MenuSub",[N3e,O3]=Qc(pne),ch="MenuSubTrigger",I3=p.forwardRef((e,t)=>{const n=Zc(ch,e.__scopeMenu),r=wp(ch,e.__scopeMenu),a=O3(ch,e.__scopeMenu),s=EN(ch,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,u={__scopeMenu:e.__scopeMenu},f=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>f,[f]),p.useEffect(()=>{const d=l.current;return()=>{window.clearTimeout(d),c(null)}},[l,c]),i.jsx(CN,{asChild:!0,...u,children:i.jsx(j3,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":D3(n.open),...e,ref:ho(t,a.onTriggerChange),onClick:d=>{var h;(h=e.onClick)==null||h.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:De(e.onPointerMove,hm(d=>{s.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:De(e.onPointerLeave,hm(d=>{var m,g;f();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(g=n.content)==null?void 0:g.dataset.side,x=v==="right",y=x?-5:5,b=h[x?"left":"right"],w=h[x?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:b,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:b,y:h.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:De(e.onKeyDown,d=>{var m;const h=s.searchRef.current!=="";e.disabled||h&&d.key===" "||Yte[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});I3.displayName=ch;var R3="MenuSubContent",M3=p.forwardRef((e,t)=>{const n=x3(gi,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,s=Zc(gi,e.__scopeMenu),o=wp(gi,e.__scopeMenu),l=O3(R3,e.__scopeMenu),c=p.useRef(null),u=Nt(t,c);return i.jsx(fm.Provider,{scope:e.__scopeMenu,children:i.jsx(pr,{present:r||s.open,children:i.jsx(fm.Slot,{scope:e.__scopeMenu,children:i.jsx(PN,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var d;o.isUsingKeyboardRef.current&&((d=c.current)==null||d.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:De(e.onFocusOutside,f=>{f.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:De(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:De(e.onKeyDown,f=>{var m;const d=f.currentTarget.contains(f.target),h=Xte[o.dir].includes(f.key);d&&h&&(s.onOpenChange(!1),(m=l.trigger)==null||m.focus(),f.preventDefault())})})})})})});M3.displayName=R3;function D3(e){return e?"open":"closed"}function ex(e){return e==="indeterminate"}function IN(e){return ex(e)?"indeterminate":e?"checked":"unchecked"}function gne(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function vne(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function xne(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let o=vne(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function yne(e,t){const{x:n,y:r}=e;let a=!1;for(let s=0,o=t.length-1;s<t.length;o=s++){const l=t[s],c=t[o],u=l.x,f=l.y,d=c.x,h=c.y;f>r!=h>r&&n<(d-u)*(r-f)/(h-f)+u&&(a=!a)}return a}function bne(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return yne(n,t)}function hm(e){return t=>t.pointerType==="mouse"?e(t):void 0}var wne=v3,jne=CN,_ne=y3,kne=b3,Sne=TN,Nne=w3,Cne=rb,Ane=_3,Ene=S3,Pne=C3,Tne=E3,One=P3,Ine=T3,Rne=I3,Mne=M3,ab="DropdownMenu",[Dne,C3e]=kr(ab,[p3]),fa=p3(),[$ne,$3]=Dne(ab),L3=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:s,onOpenChange:o,modal:l=!0}=e,c=fa(t),u=p.useRef(null),[f,d]=Ia({prop:a,defaultProp:s??!1,onChange:o,caller:ab});return i.jsx($ne,{scope:t,triggerId:ar(),triggerRef:u,contentId:ar(),open:f,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:l,children:i.jsx(wne,{...c,open:f,onOpenChange:d,dir:r,modal:l,children:n})})};L3.displayName=ab;var F3="DropdownMenuTrigger",B3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,s=$3(F3,n),o=fa(n);return i.jsx(jne,{asChild:!0,...o,children:i.jsx(Qe.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:ho(t,s.triggerRef),onPointerDown:De(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:De(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});B3.displayName=F3;var Lne="DropdownMenuPortal",U3=e=>{const{__scopeDropdownMenu:t,...n}=e,r=fa(t);return i.jsx(_ne,{...r,...n})};U3.displayName=Lne;var z3="DropdownMenuContent",q3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=$3(z3,n),s=fa(n),o=p.useRef(!1);return i.jsx(kne,{id:a.contentId,"aria-labelledby":a.triggerId,...s,...r,ref:t,onCloseAutoFocus:De(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:De(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,f=c.button===2||u;(!a.modal||f)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});q3.displayName=z3;var Fne="DropdownMenuGroup",Bne=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fa(n);return i.jsx(Sne,{...a,...r,ref:t})});Bne.displayName=Fne;var Une="DropdownMenuLabel",W3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fa(n);return i.jsx(Nne,{...a,...r,ref:t})});W3.displayName=Une;var zne="DropdownMenuItem",H3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fa(n);return i.jsx(Cne,{...a,...r,ref:t})});H3.displayName=zne;var qne="DropdownMenuCheckboxItem",V3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fa(n);return i.jsx(Ane,{...a,...r,ref:t})});V3.displayName=qne;var Wne="DropdownMenuRadioGroup",Hne=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fa(n);return i.jsx(Ene,{...a,...r,ref:t})});Hne.displayName=Wne;var Vne="DropdownMenuRadioItem",K3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fa(n);return i.jsx(Pne,{...a,...r,ref:t})});K3.displayName=Vne;var Kne="DropdownMenuItemIndicator",G3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fa(n);return i.jsx(Tne,{...a,...r,ref:t})});G3.displayName=Kne;var Gne="DropdownMenuSeparator",Y3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fa(n);return i.jsx(One,{...a,...r,ref:t})});Y3.displayName=Gne;var Yne="DropdownMenuArrow",Xne=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fa(n);return i.jsx(Ine,{...a,...r,ref:t})});Xne.displayName=Yne;var Jne="DropdownMenuSubTrigger",X3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fa(n);return i.jsx(Rne,{...a,...r,ref:t})});X3.displayName=Jne;var Qne="DropdownMenuSubContent",J3=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=fa(n);return i.jsx(Mne,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});J3.displayName=Qne;var Zne=L3,ere=B3,tre=U3,Q3=q3,Z3=W3,e5=H3,t5=V3,n5=K3,r5=G3,a5=Y3,i5=X3,s5=J3;const ku=Zne,Su=ere,nre=p.forwardRef(({className:e,inset:t,children:n,...r},a)=>i.jsxs(i5,{ref:a,className:Se("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,i.jsx(Ey,{className:"ml-auto h-4 w-4"})]}));nre.displayName=i5.displayName;const rre=p.forwardRef(({className:e,...t},n)=>i.jsx(s5,{ref:n,className:Se("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));rre.displayName=s5.displayName;const nc=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>i.jsx(tre,{children:i.jsx(Q3,{ref:r,sideOffset:t,className:Se("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));nc.displayName=Q3.displayName;const ai=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(e5,{ref:r,className:Se("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));ai.displayName=e5.displayName;const are=p.forwardRef(({className:e,children:t,checked:n,...r},a)=>i.jsxs(t5,{ref:a,className:Se("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(r5,{children:i.jsx(Ay,{className:"h-4 w-4"})})}),t]}));are.displayName=t5.displayName;const ire=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(n5,{ref:r,className:Se("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(r5,{children:i.jsx(YV,{className:"h-2 w-2 fill-current"})})}),t]}));ire.displayName=n5.displayName;const o5=p.forwardRef(({className:e,inset:t,...n},r)=>i.jsx(Z3,{ref:r,className:Se("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));o5.displayName=Z3.displayName;const r_=p.forwardRef(({className:e,...t},n)=>i.jsx(a5,{ref:n,className:Se("-mx-1 my-1 h-px bg-muted",e),...t}));r_.displayName=a5.displayName;var l5={exports:{}},c5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ad=p;function sre(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ore=typeof Object.is=="function"?Object.is:sre,lre=Ad.useState,cre=Ad.useEffect,ure=Ad.useLayoutEffect,dre=Ad.useDebugValue;function fre(e,t){var n=t(),r=lre({inst:{value:n,getSnapshot:t}}),a=r[0].inst,s=r[1];return ure(function(){a.value=n,a.getSnapshot=t,Nw(a)&&s({inst:a})},[e,n,t]),cre(function(){return Nw(a)&&s({inst:a}),e(function(){Nw(a)&&s({inst:a})})},[e]),dre(n),n}function Nw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ore(e,n)}catch{return!0}}function hre(e,t){return t()}var mre=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?hre:fre;c5.useSyncExternalStore=Ad.useSyncExternalStore!==void 0?Ad.useSyncExternalStore:mre;l5.exports=c5;var pre=l5.exports;function gre(){return pre.useSyncExternalStore(vre,()=>!0,()=>!1)}function vre(){return()=>{}}var RN="Avatar",[xre,A3e]=kr(RN),[yre,u5]=xre(RN),d5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,s]=p.useState("idle");return i.jsx(yre,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:s,children:i.jsx(Qe.span,{...r,ref:t})})});d5.displayName=RN;var f5="AvatarImage",h5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...s}=e,o=u5(f5,n),l=bre(r,s),c=Vn(u=>{a(u),o.onImageLoadingStatusChange(u)});return Yn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(Qe.img,{...s,ref:t,src:r}):null});h5.displayName=f5;var m5="AvatarFallback",p5=p.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,s=u5(m5,n),[o,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&s.imageLoadingStatus!=="loaded"?i.jsx(Qe.span,{...a,ref:t}):null});p5.displayName=m5;function PT(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function bre(e,{referrerPolicy:t,crossOrigin:n}){const r=gre(),a=p.useRef(null),s=r?(a.current||(a.current=new window.Image),a.current):null,[o,l]=p.useState(()=>PT(s,e));return Yn(()=>{l(PT(s,e))},[s,e]),Yn(()=>{const c=d=>()=>{l(d)};if(!s)return;const u=c("loaded"),f=c("error");return s.addEventListener("load",u),s.addEventListener("error",f),t&&(s.referrerPolicy=t),typeof n=="string"&&(s.crossOrigin=n),()=>{s.removeEventListener("load",u),s.removeEventListener("error",f)}},[s,n,t]),o}var g5=d5,v5=h5,x5=p5;const Vr=p.forwardRef(({className:e,...t},n)=>i.jsx(g5,{ref:n,className:Se("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Vr.displayName=g5.displayName;const Xs=p.forwardRef(({className:e,...t},n)=>i.jsx(v5,{ref:n,className:Se("aspect-square h-full w-full",e),...t}));Xs.displayName=v5.displayName;const Kr=p.forwardRef(({className:e,...t},n)=>i.jsx(x5,{ref:n,className:Se("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Kr.displayName=x5.displayName;var ib="Dialog",[y5,b5]=kr(ib),[wre,ns]=y5(ib),w5=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,f]=Ia({prop:r,defaultProp:a??!1,onChange:s,caller:ib});return i.jsx(wre,{scope:t,triggerRef:l,contentRef:c,contentId:ar(),titleId:ar(),descriptionId:ar(),open:u,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(d=>!d),[f]),modal:o,children:n})};w5.displayName=ib;var j5="DialogTrigger",_5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ns(j5,n),s=Nt(t,a.triggerRef);return i.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":$N(a.open),...r,ref:s,onClick:De(e.onClick,a.onOpenToggle)})});_5.displayName=j5;var MN="DialogPortal",[jre,k5]=y5(MN,{forceMount:void 0}),S5=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,s=ns(MN,t);return i.jsx(jre,{scope:t,forceMount:n,children:p.Children.map(r,o=>i.jsx(pr,{present:n||s.open,children:i.jsx(nf,{asChild:!0,container:a,children:o})}))})};S5.displayName=MN;var tx="DialogOverlay",N5=p.forwardRef((e,t)=>{const n=k5(tx,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=ns(tx,e.__scopeDialog);return s.modal?i.jsx(pr,{present:r||s.open,children:i.jsx(kre,{...a,ref:t})}):null});N5.displayName=tx;var _re=xl("DialogOverlay.RemoveScroll"),kre=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ns(tx,n);return i.jsx(yp,{as:_re,allowPinchZoom:!0,shards:[a.contentRef],children:i.jsx(Qe.div,{"data-state":$N(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ac="DialogContent",C5=p.forwardRef((e,t)=>{const n=k5(Ac,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,s=ns(Ac,e.__scopeDialog);return i.jsx(pr,{present:r||s.open,children:s.modal?i.jsx(Sre,{...a,ref:t}):i.jsx(Nre,{...a,ref:t})})});C5.displayName=Ac;var Sre=p.forwardRef((e,t)=>{const n=ns(Ac,e.__scopeDialog),r=p.useRef(null),a=Nt(t,n.contentRef,r);return p.useEffect(()=>{const s=r.current;if(s)return eb(s)},[]),i.jsx(A5,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:De(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:De(e.onFocusOutside,s=>s.preventDefault())})}),Nre=p.forwardRef((e,t)=>{const n=ns(Ac,e.__scopeDialog),r=p.useRef(!1),a=p.useRef(!1);return i.jsx(A5,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),A5=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,...o}=e,l=ns(Ac,n),c=p.useRef(null),u=Nt(t,c);return Zy(),i.jsxs(i.Fragment,{children:[i.jsx(xp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(Yc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":$N(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Are,{titleId:l.titleId}),i.jsx(Pre,{contentRef:c,descriptionId:l.descriptionId})]})]})}),DN="DialogTitle",E5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ns(DN,n);return i.jsx(Qe.h2,{id:a.titleId,...r,ref:t})});E5.displayName=DN;var P5="DialogDescription",T5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ns(P5,n);return i.jsx(Qe.p,{id:a.descriptionId,...r,ref:t})});T5.displayName=P5;var O5="DialogClose",I5=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ns(O5,n);return i.jsx(Qe.button,{type:"button",...r,ref:t,onClick:De(e.onClick,()=>a.onOpenChange(!1))})});I5.displayName=O5;function $N(e){return e?"open":"closed"}var R5="DialogTitleWarning",[Cre,M5]=Y7(R5,{contentName:Ac,titleName:DN,docsSlug:"dialog"}),Are=({titleId:e})=>{const t=M5(R5),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Ere="DialogDescriptionWarning",Pre=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${M5(Ere).contentName}}.`;return p.useEffect(()=>{var s;const a=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},LN=w5,D5=_5,FN=S5,sb=N5,ob=C5,BN=E5,UN=T5,zN=I5;const fn=LN,qN=D5,Tre=FN,$5=p.forwardRef(({className:e,...t},n)=>i.jsx(sb,{ref:n,className:Se("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));$5.displayName=sb.displayName;const on=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(Tre,{children:[i.jsx($5,{}),i.jsxs(ob,{ref:r,className:Se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,i.jsxs(zN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(dp,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));on.displayName=ob.displayName;const ln=({className:e,...t})=>i.jsx("div",{className:Se("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ln.displayName="DialogHeader";const ba=({className:e,...t})=>i.jsx("div",{className:Se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ba.displayName="DialogFooter";const cn=p.forwardRef(({className:e,...t},n)=>i.jsx(BN,{ref:n,className:Se("text-lg font-semibold leading-none tracking-tight",e),...t}));cn.displayName=BN.displayName;const Pr=p.forwardRef(({className:e,...t},n)=>i.jsx(UN,{ref:n,className:Se("text-sm text-muted-foreground",e),...t}));Pr.displayName=UN.displayName;function Ore({open:e,onClose:t,isMasterAgent:n,pausedByName:r,pausedAt:a,onOpenAdminPanel:s}){const o=a?new Date(a).toLocaleString():null;return i.jsx(fn,{open:e,onOpenChange:l=>{l||t()},children:i.jsxs(on,{className:"max-w-lg",children:[i.jsxs(ln,{children:[i.jsx(cn,{children:"AI Replies Are Currently Paused"}),i.jsx(Pr,{children:n?i.jsxs("span",{children:["AI responses are paused across every channel. Synka will not send AI replies until you resume them in ",i.jsx("strong",{children:"Admin Panel  AI Controls"}),"."]}):i.jsx("span",{children:"A master agent paused all AI responses across every channel. Synka will not send AI replies until this setting is changed. Only a master agent can resume AI replies."})})]}),i.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[r?i.jsxs("div",{children:["Paused by: ",r]}):null,o?i.jsxs("div",{children:["At: ",o]}):null]}),i.jsxs(ba,{className:"gap-2",children:[n?i.jsx(te,{variant:"ghost",onClick:s,children:"Open Admin Panel"}):null,i.jsx(te,{onClick:t,children:"Got it"})]})]})})}function a_(e,[t,n]){return Math.min(n,Math.max(t,e))}function Ire(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var WN="ScrollArea",[L5,E3e]=kr(WN),[Rre,wi]=L5(WN),F5=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:s=600,...o}=e,[l,c]=p.useState(null),[u,f]=p.useState(null),[d,h]=p.useState(null),[m,g]=p.useState(null),[v,x]=p.useState(null),[y,b]=p.useState(0),[w,k]=p.useState(0),[_,j]=p.useState(!1),[S,A]=p.useState(!1),C=Nt(t,M=>c(M)),T=uf(a);return i.jsx(Rre,{scope:n,type:r,dir:T,scrollHideDelay:s,scrollArea:l,viewport:u,onViewportChange:f,content:d,onContentChange:h,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:_,onScrollbarXEnabledChange:j,scrollbarY:v,onScrollbarYChange:x,scrollbarYEnabled:S,onScrollbarYEnabledChange:A,onCornerWidthChange:b,onCornerHeightChange:k,children:i.jsx(Qe.div,{dir:T,...o,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});F5.displayName=WN;var B5="ScrollAreaViewport",U5=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...s}=e,o=wi(B5,n),l=p.useRef(null),c=Nt(t,l,o.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),i.jsx(Qe.div,{"data-radix-scroll-area-viewport":"",...s,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:i.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});U5.displayName=B5;var Rs="ScrollAreaScrollbar",HN=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=wi(Rs,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return p.useEffect(()=>(l?s(!0):o(!0),()=>{l?s(!1):o(!1)}),[l,s,o]),a.type==="hover"?i.jsx(Mre,{...r,ref:t,forceMount:n}):a.type==="scroll"?i.jsx(Dre,{...r,ref:t,forceMount:n}):a.type==="auto"?i.jsx(z5,{...r,ref:t,forceMount:n}):a.type==="always"?i.jsx(VN,{...r,ref:t}):null});HN.displayName=Rs;var Mre=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=wi(Rs,e.__scopeScrollArea),[s,o]=p.useState(!1);return p.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},f=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),i.jsx(pr,{present:n||s,children:i.jsx(z5,{"data-state":s?"visible":"hidden",...r,ref:t})})}),Dre=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=wi(Rs,e.__scopeScrollArea),s=e.orientation==="horizontal",o=cb(()=>c("SCROLL_END"),100),[l,c]=Ire("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),p.useEffect(()=>{const u=a.viewport,f=s?"scrollLeft":"scrollTop";if(u){let d=u[f];const h=()=>{const m=u[f];d!==m&&(c("SCROLL"),o()),d=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,s,c,o]),i.jsx(pr,{present:n||l!=="hidden",children:i.jsx(VN,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:De(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:De(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),z5=p.forwardRef((e,t)=>{const n=wi(Rs,e.__scopeScrollArea),{forceMount:r,...a}=e,[s,o]=p.useState(!1),l=e.orientation==="horizontal",c=cb(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:f)}},10);return Ed(n.viewport,c),Ed(n.content,c),i.jsx(pr,{present:r||s,children:i.jsx(VN,{"data-state":s?"visible":"hidden",...a,ref:t})})}),VN=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=wi(Rs,e.__scopeScrollArea),s=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=K5(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function d(h,m){return zre(h,o.current,l,m)}return n==="horizontal"?i.jsx($re,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollLeft,m=TT(h,l,a.dir);s.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=d(h,a.dir))}}):n==="vertical"?i.jsx(Lre,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&s.current){const h=a.viewport.scrollTop,m=TT(h,l);s.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=d(h))}}):null}),$re=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,s=wi(Rs,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Nt(t,c,s.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(W5,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":lb(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),Y5(h,d)&&f.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:rx(o.paddingLeft),paddingEnd:rx(o.paddingRight)}})}})}),Lre=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,s=wi(Rs,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=Nt(t,c,s.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(W5,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":lb(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(s.viewport){const h=s.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),Y5(h,d)&&f.preventDefault()}},onResize:()=>{c.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:rx(o.paddingTop),paddingEnd:rx(o.paddingBottom)}})}})}),[Fre,q5]=L5(Rs),W5=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:d,...h}=e,m=wi(Rs,n),[g,v]=p.useState(null),x=Nt(t,C=>v(C)),y=p.useRef(null),b=p.useRef(""),w=m.viewport,k=r.content-r.viewport,_=Vn(f),j=Vn(c),S=cb(d,10);function A(C){if(y.current){const T=C.clientX-y.current.left,M=C.clientY-y.current.top;u({x:T,y:M})}}return p.useEffect(()=>{const C=T=>{const M=T.target;(g==null?void 0:g.contains(M))&&_(T,k)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[w,g,k,_]),p.useEffect(j,[r,j]),Ed(g,S),Ed(m.content,S),i.jsx(Fre,{scope:n,scrollbar:g,hasThumb:a,onThumbChange:Vn(s),onThumbPointerUp:Vn(o),onThumbPositionChange:j,onThumbPointerDown:Vn(l),children:i.jsx(Qe.div,{...h,ref:x,style:{position:"absolute",...h.style},onPointerDown:De(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),y.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),A(C))}),onPointerMove:De(e.onPointerMove,A),onPointerUp:De(e.onPointerUp,C=>{const T=C.target;T.hasPointerCapture(C.pointerId)&&T.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=b.current,m.viewport&&(m.viewport.style.scrollBehavior=""),y.current=null})})})}),nx="ScrollAreaThumb",H5=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=q5(nx,e.__scopeScrollArea);return i.jsx(pr,{present:n||a.hasThumb,children:i.jsx(Bre,{ref:t,...r})})}),Bre=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,s=wi(nx,n),o=q5(nx,n),{onThumbPositionChange:l}=o,c=Nt(t,d=>o.onThumbChange(d)),u=p.useRef(void 0),f=cb(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const d=s.viewport;if(d){const h=()=>{if(f(),!u.current){const m=qre(d,l);u.current=m,l()}};return l(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,f,l]),i.jsx(Qe.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:De(e.onPointerDownCapture,d=>{const m=d.target.getBoundingClientRect(),g=d.clientX-m.left,v=d.clientY-m.top;o.onThumbPointerDown({x:g,y:v})}),onPointerUp:De(e.onPointerUp,o.onThumbPointerUp)})});H5.displayName=nx;var KN="ScrollAreaCorner",V5=p.forwardRef((e,t)=>{const n=wi(KN,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(Ure,{...e,ref:t}):null});V5.displayName=KN;var Ure=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=wi(KN,n),[s,o]=p.useState(0),[l,c]=p.useState(0),u=!!(s&&l);return Ed(a.scrollbarX,()=>{var d;const f=((d=a.scrollbarX)==null?void 0:d.offsetHeight)||0;a.onCornerHeightChange(f),c(f)}),Ed(a.scrollbarY,()=>{var d;const f=((d=a.scrollbarY)==null?void 0:d.offsetWidth)||0;a.onCornerWidthChange(f),o(f)}),u?i.jsx(Qe.div,{...r,ref:t,style:{width:s,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function rx(e){return e?parseInt(e,10):0}function K5(e,t){const n=e/t;return isNaN(n)?0:n}function lb(e){const t=K5(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function zre(e,t,n,r="ltr"){const a=lb(n),s=a/2,o=t||s,l=a-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,d=r==="ltr"?[0,f]:[f*-1,0];return G5([c,u],d)(e)}function TT(e,t,n="ltr"){const r=lb(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-a,o=t.content-t.viewport,l=s-r,c=n==="ltr"?[0,o]:[o*-1,0],u=a_(e,c);return G5([0,o],[0,l])(u)}function G5(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Y5(e,t){return e>0&&e<t}var qre=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,l=n.top!==s.top;(o||l)&&t(),n=s,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function cb(e,t){const n=Vn(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Ed(e,t){const n=Vn(t);Yn(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var X5=F5,Wre=U5,Hre=V5;const ub=p.forwardRef(({className:e,children:t,viewportRef:n,...r},a)=>i.jsxs(X5,{ref:a,className:Se("relative overflow-hidden",e),...r,children:[i.jsx(Wre,{ref:n,className:"h-full w-full rounded-[inherit]",children:t}),i.jsx(J5,{}),i.jsx(Hre,{})]}));ub.displayName=X5.displayName;const J5=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>i.jsx(HN,{ref:r,orientation:t,className:Se("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:i.jsx(H5,{className:"relative flex-1 rounded-full bg-border"})}));J5.displayName=HN.displayName;function Xt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Xa(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ia(e,t){const n=Xt(e);return isNaN(t)?Xa(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function es(e,t){const n=Xt(e);if(isNaN(t))return Xa(e,NaN);if(!t)return n;const r=n.getDate(),a=Xa(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const s=a.getDate();return r>=s?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}const GN=6048e5,Vre=864e5;let Kre={};function jp(){return Kre}function Ps(e,t){var l,c,u,f;const n=jp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,a=Xt(e),s=a.getDay(),o=(s<r?7:0)+s-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Ec(e){return Ps(e,{weekStartsOn:1})}function Q5(e){const t=Xt(e),n=t.getFullYear(),r=Xa(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Ec(r),s=Xa(e,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=Ec(s);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Pc(e){const t=Xt(e);return t.setHours(0,0,0,0),t}function ax(e){const t=Xt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function xs(e,t){const n=Pc(e),r=Pc(t),a=+n-ax(n),s=+r-ax(r);return Math.round((a-s)/Vre)}function Gre(e){const t=Q5(e),n=Xa(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Ec(n)}function i_(e,t){const n=t*7;return ia(e,n)}function Yre(e,t){return es(e,t*12)}function Xre(e){let t;return e.forEach(function(n){const r=Xt(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function Jre(e){let t;return e.forEach(n=>{const r=Xt(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function Na(e,t){const n=Pc(e),r=Pc(t);return+n==+r}function YN(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Qre(e){if(!YN(e)&&typeof e!="number")return!1;const t=Xt(e);return!isNaN(Number(t))}function mm(e,t){const n=Xt(e),r=Xt(t),a=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return a*12+s}function Zre(e,t,n){const r=Ps(e,n),a=Ps(t,n),s=+r-ax(r),o=+a-ax(a);return Math.round((s-o)/GN)}function eae(e){const t=Xt(e);return t.setHours(23,59,59,999),t}function XN(e){const t=Xt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Oa(e){const t=Xt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Z5(e){const t=Xt(e),n=Xa(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function JN(e,t){var l,c,u,f;const n=jp(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,a=Xt(e),s=a.getDay(),o=(s<r?-7:0)+6-(s-r);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function eB(e){return JN(e,{weekStartsOn:1})}const tae={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},nae=(e,t,n)=>{let r;const a=tae[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Cw(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const rae={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},aae={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},iae={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sae={date:Cw({formats:rae,defaultWidth:"full"}),time:Cw({formats:aae,defaultWidth:"full"}),dateTime:Cw({formats:iae,defaultWidth:"full"})},oae={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},lae=(e,t,n,r)=>oae[e];function Bf(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return a[s]}}const cae={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},uae={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},dae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},fae={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mae={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pae=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},gae={ordinalNumber:pae,era:Bf({values:cae,defaultWidth:"wide"}),quarter:Bf({values:uae,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Bf({values:dae,defaultWidth:"wide"}),day:Bf({values:fae,defaultWidth:"wide"}),dayPeriod:Bf({values:hae,defaultWidth:"wide",formattingValues:mae,defaultFormattingWidth:"wide"})};function Uf(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(a);if(!s)return null;const o=s[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?xae(l,d=>d.test(o)):vae(l,d=>d.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const f=t.slice(o.length);return{value:u,rest:f}}}function vae(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function xae(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function yae(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const bae=/^(\d+)(th|st|nd|rd)?/i,wae=/\d+/i,jae={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_ae={any:[/^b/i,/^(a|c)/i]},kae={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Sae={any:[/1/i,/2/i,/3/i,/4/i]},Nae={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Cae={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Aae={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Eae={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Pae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Tae={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Oae={ordinalNumber:yae({matchPattern:bae,parsePattern:wae,valueCallback:e=>parseInt(e,10)}),era:Uf({matchPatterns:jae,defaultMatchWidth:"wide",parsePatterns:_ae,defaultParseWidth:"any"}),quarter:Uf({matchPatterns:kae,defaultMatchWidth:"wide",parsePatterns:Sae,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Uf({matchPatterns:Nae,defaultMatchWidth:"wide",parsePatterns:Cae,defaultParseWidth:"any"}),day:Uf({matchPatterns:Aae,defaultMatchWidth:"wide",parsePatterns:Eae,defaultParseWidth:"any"}),dayPeriod:Uf({matchPatterns:Pae,defaultMatchWidth:"any",parsePatterns:Tae,defaultParseWidth:"any"})},tB={code:"en-US",formatDistance:nae,formatLong:sae,formatRelative:lae,localize:gae,match:Oae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Iae(e){const t=Xt(e);return xs(t,Z5(t))+1}function nB(e){const t=Xt(e),n=+Ec(t)-+Gre(t);return Math.round(n/GN)+1}function rB(e,t){var f,d,h,m;const n=Xt(e),r=n.getFullYear(),a=jp(),s=(t==null?void 0:t.firstWeekContainsDate)??((d=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=Xa(e,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const l=Ps(o,t),c=Xa(e,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=Ps(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function Rae(e,t){var l,c,u,f;const n=jp(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,a=rB(e,t),s=Xa(e,0);return s.setFullYear(a,0,r),s.setHours(0,0,0,0),Ps(s,t)}function aB(e,t){const n=Xt(e),r=+Ps(n,t)-+Rae(n,t);return Math.round(r/GN)+1}function dn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Do={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return dn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):dn(n+1,2)},d(e,t){return dn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return dn(e.getHours()%12||12,t.length)},H(e,t){return dn(e.getHours(),t.length)},m(e,t){return dn(e.getMinutes(),t.length)},s(e,t){return dn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return dn(a,t.length)}},mu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},OT={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Do.y(e,t)},Y:function(e,t,n,r){const a=rB(e,r),s=a>0?a:1-a;if(t==="YY"){const o=s%100;return dn(o,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):dn(s,t.length)},R:function(e,t){const n=Q5(e);return dn(n,t.length)},u:function(e,t){const n=e.getFullYear();return dn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return dn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return dn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Do.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return dn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=aB(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):dn(a,t.length)},I:function(e,t,n){const r=nB(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):dn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Do.d(e,t)},D:function(e,t,n){const r=Iae(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):dn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return dn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return dn(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return dn(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=mu.noon:r===0?a=mu.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=mu.evening:r>=12?a=mu.afternoon:r>=4?a=mu.morning:a=mu.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Do.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Do.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):dn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):dn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Do.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Do.s(e,t)},S:function(e,t){return Do.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return RT(r);case"XXXX":case"XX":return Xl(r);case"XXXXX":case"XXX":default:return Xl(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return RT(r);case"xxxx":case"xx":return Xl(r);case"xxxxx":case"xxx":default:return Xl(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+IT(r,":");case"OOOO":default:return"GMT"+Xl(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+IT(r,":");case"zzzz":default:return"GMT"+Xl(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return dn(r,t.length)},T:function(e,t,n){const r=e.getTime();return dn(r,t.length)}};function IT(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),s=r%60;return s===0?n+String(a):n+String(a)+t+dn(s,2)}function RT(e,t){return e%60===0?(e>0?"-":"+")+dn(Math.abs(e)/60,2):Xl(e,t)}function Xl(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=dn(Math.trunc(r/60),2),s=dn(r%60,2);return n+a+t+s}const MT=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},iB=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Mae=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return MT(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",MT(r,t)).replace("{{time}}",iB(a,t))},Dae={p:iB,P:Mae},$ae=/^D+$/,Lae=/^Y+$/,Fae=["D","DD","YY","YYYY"];function Bae(e){return $ae.test(e)}function Uae(e){return Lae.test(e)}function zae(e,t,n){const r=qae(e,t,n);if(console.warn(r),Fae.includes(e))throw new RangeError(r)}function qae(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Wae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Hae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Vae=/^'([^]*?)'?$/,Kae=/''/g,Gae=/[a-zA-Z]/;function vo(e,t,n){var f,d,h,m,g,v,x,y;const r=jp(),a=(n==null?void 0:n.locale)??r.locale??tB,s=(n==null?void 0:n.firstWeekContainsDate)??((d=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((v=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((y=(x=r.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??0,l=Xt(e);if(!Qre(l))throw new RangeError("Invalid time value");let c=t.match(Hae).map(b=>{const w=b[0];if(w==="p"||w==="P"){const k=Dae[w];return k(b,a.formatLong)}return b}).join("").match(Wae).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const w=b[0];if(w==="'")return{isToken:!1,value:Yae(b)};if(OT[w])return{isToken:!0,value:b};if(w.match(Gae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:b}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(b=>{if(!b.isToken)return b.value;const w=b.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Uae(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Bae(w))&&zae(w,t,String(e));const k=OT[w[0]];return k(l,w,a.localize,u)}).join("")}function Yae(e){const t=e.match(Vae);return t?t[1].replace(Kae,"'"):e}function Xae(e){const t=Xt(e),n=t.getFullYear(),r=t.getMonth(),a=Xa(e,0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function Jae(e){return Math.trunc(+Xt(e)/1e3)}function Qae(e){const t=Xt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function Zae(e,t){return Zre(Qae(e),Oa(e),t)+1}function s_(e,t){const n=Xt(e),r=Xt(t);return n.getTime()>r.getTime()}function sB(e,t){const n=Xt(e),r=Xt(t);return+n<+r}function QN(e,t){const n=Xt(e),r=Xt(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function eie(e,t){const n=Xt(e),r=Xt(t);return n.getFullYear()===r.getFullYear()}function Aw(e,t){return ia(e,-t)}function Ew(e,t){const n=Xt(e),r=n.getFullYear(),a=n.getDate(),s=Xa(e,0);s.setFullYear(r,t,15),s.setHours(0,0,0,0);const o=Xae(s);return n.setMonth(t,Math.min(a,o)),n}function DT(e,t){const n=Xt(e);return isNaN(+n)?Xa(e,NaN):(n.setFullYear(t),n)}var jt=function(){return jt=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},jt.apply(this,arguments)};function tie(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function oB(e,t,n){for(var r=0,a=t.length,s;r<a;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function _p(e){return e.mode==="multiple"}function kp(e){return e.mode==="range"}function db(e){return e.mode==="single"}var nie={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function rie(e,t){return vo(e,"LLLL y",t)}function aie(e,t){return vo(e,"d",t)}function iie(e,t){return vo(e,"LLLL",t)}function sie(e){return"".concat(e)}function oie(e,t){return vo(e,"cccccc",t)}function lie(e,t){return vo(e,"yyyy",t)}var cie=Object.freeze({__proto__:null,formatCaption:rie,formatDay:aie,formatMonthCaption:iie,formatWeekNumber:sie,formatWeekdayName:oie,formatYearCaption:lie}),uie=function(e,t,n){return vo(e,"do MMMM (EEEE)",n)},die=function(){return"Month: "},fie=function(){return"Go to next month"},hie=function(){return"Go to previous month"},mie=function(e,t){return vo(e,"cccc",t)},pie=function(e){return"Week n. ".concat(e)},gie=function(){return"Year: "},vie=Object.freeze({__proto__:null,labelDay:uie,labelMonthDropdown:die,labelNext:fie,labelPrevious:hie,labelWeekNumber:pie,labelWeekday:mie,labelYearDropdown:gie});function xie(){var e="buttons",t=nie,n=tB,r={},a={},s=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:cie,labels:vie,locale:n,modifiersClassNames:r,modifiers:a,numberOfMonths:s,styles:o,today:l,mode:"default"}}function yie(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,a=e.toMonth,s=e.fromDate,o=e.toDate;return r?s=Oa(r):t&&(s=new Date(t,0,1)),a?o=XN(a):n&&(o=new Date(n,11,31)),{fromDate:s?Pc(s):void 0,toDate:o?Pc(o):void 0}}var lB=p.createContext(void 0);function bie(e){var t,n=e.initialProps,r=xie(),a=yie(n),s=a.fromDate,o=a.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!s||!o)&&(l="buttons");var c;(db(n)||_p(n)||kp(n))&&(c=n.onSelect);var u=jt(jt(jt({},r),n),{captionLayout:l,classNames:jt(jt({},r.classNames),n.classNames),components:jt({},n.components),formatters:jt(jt({},r.formatters),n.formatters),fromDate:s,labels:jt(jt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:jt(jt({},r.modifiers),n.modifiers),modifiersClassNames:jt(jt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:jt(jt({},r.styles),n.styles),toDate:o});return i.jsx(lB.Provider,{value:u,children:e.children})}function kn(){var e=p.useContext(lB);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function cB(e){var t=kn(),n=t.locale,r=t.classNames,a=t.styles,s=t.formatters.formatCaption;return i.jsx("div",{className:r.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:s(e.displayMonth,{locale:n})})}function wie(e){return i.jsx("svg",jt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function uB(e){var t,n,r=e.onChange,a=e.value,s=e.children,o=e.caption,l=e.className,c=e.style,u=kn(),f=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:wie;return i.jsxs("div",{className:l,style:c,children:[i.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),i.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:r,children:s}),i.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(f,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function jie(e){var t,n=kn(),r=n.fromDate,a=n.toDate,s=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,f=n.labels.labelMonthDropdown;if(!r)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});var d=[];if(eie(r,a))for(var h=Oa(r),m=r.getMonth();m<=a.getMonth();m++)d.push(Ew(h,m));else for(var h=Oa(new Date),m=0;m<=11;m++)d.push(Ew(h,m));var g=function(x){var y=Number(x.target.value),b=Ew(Oa(e.displayMonth),y);e.onChange(b)},v=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:uB;return i.jsx(v,{name:"months","aria-label":f(),className:c.dropdown_month,style:s.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:d.map(function(x){return i.jsx("option",{value:x.getMonth(),children:l(x,{locale:o})},x.getMonth())})})}function _ie(e){var t,n=e.displayMonth,r=kn(),a=r.fromDate,s=r.toDate,o=r.locale,l=r.styles,c=r.classNames,u=r.components,f=r.formatters.formatYearCaption,d=r.labels.labelYearDropdown,h=[];if(!a)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});for(var m=a.getFullYear(),g=s.getFullYear(),v=m;v<=g;v++)h.push(DT(Z5(new Date),v));var x=function(b){var w=DT(Oa(n),Number(b.target.value));e.onChange(w)},y=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:uB;return i.jsx(y,{name:"years","aria-label":d(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:n.getFullYear(),caption:f(n,{locale:o}),children:h.map(function(b){return i.jsx("option",{value:b.getFullYear(),children:f(b,{locale:o})},b.getFullYear())})})}function kie(e,t){var n=p.useState(e),r=n[0],a=n[1],s=t===void 0?r:t;return[s,a]}function Sie(e){var t=e.month,n=e.defaultMonth,r=e.today,a=t||n||r||new Date,s=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(s&&mm(s,a)<0){var u=-1*(c-1);a=es(s,u)}return o&&mm(a,o)<0&&(a=o),Oa(a)}function Nie(){var e=kn(),t=Sie(e),n=kie(t,e.month),r=n[0],a=n[1],s=function(o){var l;if(!e.disableNavigation){var c=Oa(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,s]}function Cie(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,a=Oa(e),s=Oa(es(a,r)),o=mm(s,a),l=[],c=0;c<o;c++){var u=es(a,c);l.push(u)}return n&&(l=l.reverse()),l}function Aie(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=r?s:1,l=Oa(e);if(!n)return es(l,o);var c=mm(n,e);if(!(c<s))return es(l,o)}}function Eie(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,a=t.numberOfMonths,s=a===void 0?1:a,o=r?s:1,l=Oa(e);if(!n)return es(l,-o);var c=mm(l,n);if(!(c<=0))return es(l,-o)}}var dB=p.createContext(void 0);function Pie(e){var t=kn(),n=Nie(),r=n[0],a=n[1],s=Cie(r,t),o=Aie(r,t),l=Eie(r,t),c=function(d){return s.some(function(h){return QN(d,h)})},u=function(d,h){c(d)||(h&&sB(d,h)?a(es(d,1+t.numberOfMonths*-1)):a(d))},f={currentMonth:r,displayMonths:s,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return i.jsx(dB.Provider,{value:f,children:e.children})}function Sp(){var e=p.useContext(dB);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function $T(e){var t,n=kn(),r=n.classNames,a=n.styles,s=n.components,o=Sp().goToMonth,l=function(f){o(es(f,e.displayIndex?-e.displayIndex:0))},c=(t=s==null?void 0:s.CaptionLabel)!==null&&t!==void 0?t:cB,u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth});return i.jsxs("div",{className:r.caption_dropdowns,style:a.caption_dropdowns,children:[i.jsx("div",{className:r.vhidden,children:u}),i.jsx(jie,{onChange:l,displayMonth:e.displayMonth}),i.jsx(_ie,{onChange:l,displayMonth:e.displayMonth})]})}function Tie(e){return i.jsx("svg",jt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Oie(e){return i.jsx("svg",jt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var ix=p.forwardRef(function(e,t){var n=kn(),r=n.classNames,a=n.styles,s=[r.button_reset,r.button];e.className&&s.push(e.className);var o=s.join(" "),l=jt(jt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),i.jsx("button",jt({},e,{ref:t,type:"button",className:o,style:l}))});function Iie(e){var t,n,r=kn(),a=r.dir,s=r.locale,o=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,f=c.labelNext,d=r.components;if(!e.nextMonth&&!e.previousMonth)return i.jsx(i.Fragment,{});var h=u(e.previousMonth,{locale:s}),m=[o.nav_button,o.nav_button_previous].join(" "),g=f(e.nextMonth,{locale:s}),v=[o.nav_button,o.nav_button_next].join(" "),x=(t=d==null?void 0:d.IconRight)!==null&&t!==void 0?t:Oie,y=(n=d==null?void 0:d.IconLeft)!==null&&n!==void 0?n:Tie;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&i.jsx(ix,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?i.jsx(x,{className:o.nav_icon,style:l.nav_icon}):i.jsx(y,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&i.jsx(ix,{name:"next-month","aria-label":g,className:v,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?i.jsx(y,{className:o.nav_icon,style:l.nav_icon}):i.jsx(x,{className:o.nav_icon,style:l.nav_icon})})]})}function LT(e){var t=kn().numberOfMonths,n=Sp(),r=n.previousMonth,a=n.nextMonth,s=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(g){return QN(e.displayMonth,g)}),c=l===0,u=l===o.length-1,f=t>1&&(c||!u),d=t>1&&(u||!c),h=function(){r&&s(r)},m=function(){a&&s(a)};return i.jsx(Iie,{displayMonth:e.displayMonth,hideNext:f,hidePrevious:d,nextMonth:a,previousMonth:r,onPreviousClick:h,onNextClick:m})}function Rie(e){var t,n=kn(),r=n.classNames,a=n.disableNavigation,s=n.styles,o=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:cB,u;return a?u=i.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=i.jsx($T,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=i.jsxs(i.Fragment,{children:[i.jsx($T,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),i.jsx(LT,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=i.jsxs(i.Fragment,{children:[i.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(LT,{displayMonth:e.displayMonth,id:e.id})]}),i.jsx("div",{className:r.caption,style:s.caption,children:u})}function Mie(e){var t=kn(),n=t.footer,r=t.styles,a=t.classNames.tfoot;return n?i.jsx("tfoot",{className:a,style:r.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:n})})}):i.jsx(i.Fragment,{})}function Die(e,t,n){for(var r=n?Ec(new Date):Ps(new Date,{locale:e,weekStartsOn:t}),a=[],s=0;s<7;s++){var o=ia(r,s);a.push(o)}return a}function $ie(){var e=kn(),t=e.classNames,n=e.styles,r=e.showWeekNumber,a=e.locale,s=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=Die(a,s,o);return i.jsxs("tr",{style:n.head_row,className:t.head_row,children:[r&&i.jsx("td",{style:n.head_cell,className:t.head_cell}),u.map(function(f,d){return i.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(f,{locale:a}),children:l(f,{locale:a})},d)})]})}function Lie(){var e,t=kn(),n=t.classNames,r=t.styles,a=t.components,s=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:$ie;return i.jsx("thead",{style:r.head,className:n.head,children:i.jsx(s,{})})}function Fie(e){var t=kn(),n=t.locale,r=t.formatters.formatDay;return i.jsx(i.Fragment,{children:r(e.date,{locale:n})})}var ZN=p.createContext(void 0);function Bie(e){if(!_p(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return i.jsx(ZN.Provider,{value:t,children:e.children})}return i.jsx(Uie,{initialProps:e.initialProps,children:e.children})}function Uie(e){var t=e.initialProps,n=e.children,r=t.selected,a=t.min,s=t.max,o=function(u,f,d){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,f,d);var g=!!(f.selected&&a&&(r==null?void 0:r.length)===a);if(!g){var v=!!(!f.selected&&s&&(r==null?void 0:r.length)===s);if(!v){var x=r?oB([],r):[];if(f.selected){var y=x.findIndex(function(b){return Na(u,b)});x.splice(y,1)}else x.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,x,u,f,d)}}},l={disabled:[]};r&&l.disabled.push(function(u){var f=s&&r.length>s-1,d=r.some(function(h){return Na(h,u)});return!!(f&&!d)});var c={selected:r,onDayClick:o,modifiers:l};return i.jsx(ZN.Provider,{value:c,children:n})}function eC(){var e=p.useContext(ZN);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function zie(e,t){var n=t||{},r=n.from,a=n.to;return r&&a?Na(a,e)&&Na(r,e)?void 0:Na(a,e)?{from:a,to:void 0}:Na(r,e)?void 0:s_(r,e)?{from:e,to:a}:{from:r,to:e}:a?s_(e,a)?{from:a,to:e}:{from:e,to:a}:r?sB(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var tC=p.createContext(void 0);function qie(e){if(!kp(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(tC.Provider,{value:t,children:e.children})}return i.jsx(Wie,{initialProps:e.initialProps,children:e.children})}function Wie(e){var t=e.initialProps,n=e.children,r=t.selected,a=r||{},s=a.from,o=a.to,l=t.min,c=t.max,u=function(m,g,v){var x,y;(x=t.onDayClick)===null||x===void 0||x.call(t,m,g,v);var b=zie(m,r);(y=t.onSelect)===null||y===void 0||y.call(t,b,m,g,v)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(f.range_start=[s],o?(f.range_end=[o],Na(s,o)||(f.range_middle=[{after:s,before:o}])):f.range_end=[s]):o&&(f.range_start=[o],f.range_end=[o]),l&&(s&&!o&&f.disabled.push({after:Aw(s,l-1),before:ia(s,l-1)}),s&&o&&f.disabled.push({after:s,before:ia(s,l-1)}),!s&&o&&f.disabled.push({after:Aw(o,l-1),before:ia(o,l-1)})),c){if(s&&!o&&(f.disabled.push({before:ia(s,-c+1)}),f.disabled.push({after:ia(s,c-1)})),s&&o){var d=xs(o,s)+1,h=c-d;f.disabled.push({before:Aw(s,h)}),f.disabled.push({after:ia(o,h)})}!s&&o&&(f.disabled.push({before:ia(o,-c+1)}),f.disabled.push({after:ia(o,c-1)}))}return i.jsx(tC.Provider,{value:{selected:r,onDayClick:u,modifiers:f},children:n})}function nC(){var e=p.useContext(tC);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function hv(e){return Array.isArray(e)?oB([],e):e!==void 0?[e]:[]}function Hie(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],a=n[1];t[r]=hv(a)}),t}var ts;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(ts||(ts={}));var Vie=ts.Selected,Ls=ts.Disabled,Kie=ts.Hidden,Gie=ts.Today,Pw=ts.RangeEnd,Tw=ts.RangeMiddle,Ow=ts.RangeStart,Yie=ts.Outside;function Xie(e,t,n){var r,a=(r={},r[Vie]=hv(e.selected),r[Ls]=hv(e.disabled),r[Kie]=hv(e.hidden),r[Gie]=[e.today],r[Pw]=[],r[Tw]=[],r[Ow]=[],r[Yie]=[],r);return e.fromDate&&a[Ls].push({before:e.fromDate}),e.toDate&&a[Ls].push({after:e.toDate}),_p(e)?a[Ls]=a[Ls].concat(t.modifiers[Ls]):kp(e)&&(a[Ls]=a[Ls].concat(n.modifiers[Ls]),a[Ow]=n.modifiers[Ow],a[Tw]=n.modifiers[Tw],a[Pw]=n.modifiers[Pw]),a}var fB=p.createContext(void 0);function Jie(e){var t=kn(),n=eC(),r=nC(),a=Xie(t,n,r),s=Hie(t.modifiers),o=jt(jt({},a),s);return i.jsx(fB.Provider,{value:o,children:e.children})}function hB(){var e=p.useContext(fB);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Qie(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Zie(e){return!!(e&&typeof e=="object"&&"from"in e)}function ese(e){return!!(e&&typeof e=="object"&&"after"in e)}function tse(e){return!!(e&&typeof e=="object"&&"before"in e)}function nse(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function rse(e,t){var n,r=t.from,a=t.to;if(r&&a){var s=xs(a,r)<0;s&&(n=[a,r],r=n[0],a=n[1]);var o=xs(e,r)>=0&&xs(a,e)>=0;return o}return a?Na(a,e):r?Na(r,e):!1}function ase(e){return YN(e)}function ise(e){return Array.isArray(e)&&e.every(YN)}function sse(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(ase(n))return Na(e,n);if(ise(n))return n.includes(e);if(Zie(n))return rse(e,n);if(nse(n))return n.dayOfWeek.includes(e.getDay());if(Qie(n)){var r=xs(n.before,e),a=xs(n.after,e),s=r>0,o=a<0,l=s_(n.before,n.after);return l?o&&s:s||o}return ese(n)?xs(e,n.after)>0:tse(n)?xs(n.before,e)>0:typeof n=="function"?n(e):!1})}function rC(e,t,n){var r=Object.keys(t).reduce(function(s,o){var l=t[o];return sse(e,l)&&s.push(o),s},[]),a={};return r.forEach(function(s){return a[s]=!0}),n&&!QN(e,n)&&(a.outside=!0),a}function ose(e,t){for(var n=Oa(e[0]),r=XN(e[e.length-1]),a,s,o=n;o<=r;){var l=rC(o,t),c=!l.disabled&&!l.hidden;if(!c){o=ia(o,1);continue}if(l.selected)return o;l.today&&!s&&(s=o),a||(a=o),o=ia(o,1)}return s||a}var lse=365;function mB(e,t){var n=t.moveBy,r=t.direction,a=t.context,s=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,f=a.toDate,d=a.locale,h={day:ia,week:i_,month:es,year:Yre,startOfWeek:function(x){return a.ISOWeek?Ec(x):Ps(x,{locale:d,weekStartsOn:c})},endOfWeek:function(x){return a.ISOWeek?eB(x):JN(x,{locale:d,weekStartsOn:c})}},m=h[n](e,r==="after"?1:-1);r==="before"&&u?m=Xre([u,m]):r==="after"&&f&&(m=Jre([f,m]));var g=!0;if(s){var v=rC(m,s);g=!v.disabled&&!v.hidden}return g?m:l.count>lse?l.lastFocused:mB(m,{moveBy:n,direction:r,context:a,modifiers:s,retry:jt(jt({},l),{count:l.count+1})})}var pB=p.createContext(void 0);function cse(e){var t=Sp(),n=hB(),r=p.useState(),a=r[0],s=r[1],o=p.useState(),l=o[0],c=o[1],u=ose(t.displayMonths,n),f=a??(l&&t.isDateDisplayed(l))?l:u,d=function(){c(a),s(void 0)},h=function(x){s(x)},m=kn(),g=function(x,y){if(a){var b=mB(a,{moveBy:x,direction:y,context:m,modifiers:n});Na(a,b)||(t.goToDate(b,a),h(b))}},v={focusedDay:a,focusTarget:f,blur:d,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return i.jsx(pB.Provider,{value:v,children:e.children})}function aC(){var e=p.useContext(pB);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function use(e,t){var n=hB(),r=rC(e,n,t);return r}var iC=p.createContext(void 0);function dse(e){if(!db(e.initialProps)){var t={selected:void 0};return i.jsx(iC.Provider,{value:t,children:e.children})}return i.jsx(fse,{initialProps:e.initialProps,children:e.children})}function fse(e){var t=e.initialProps,n=e.children,r=function(s,o,l){var c,u,f;if((c=t.onDayClick)===null||c===void 0||c.call(t,s,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,s,o,l);return}(f=t.onSelect)===null||f===void 0||f.call(t,s,s,o,l)},a={selected:t.selected,onDayClick:r};return i.jsx(iC.Provider,{value:a,children:n})}function gB(){var e=p.useContext(iC);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function hse(e,t){var n=kn(),r=gB(),a=eC(),s=nC(),o=aC(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,f=o.focusWeekBefore,d=o.blur,h=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,v=o.focusYearBefore,x=o.focusYearAfter,y=o.focusStartOfWeek,b=o.focusEndOfWeek,w=function(O){var $,L,N,U;db(n)?($=r.onDayClick)===null||$===void 0||$.call(r,e,t,O):_p(n)?(L=a.onDayClick)===null||L===void 0||L.call(a,e,t,O):kp(n)?(N=s.onDayClick)===null||N===void 0||N.call(s,e,t,O):(U=n.onDayClick)===null||U===void 0||U.call(n,e,t,O)},k=function(O){var $;h(e),($=n.onDayFocus)===null||$===void 0||$.call(n,e,t,O)},_=function(O){var $;d(),($=n.onDayBlur)===null||$===void 0||$.call(n,e,t,O)},j=function(O){var $;($=n.onDayMouseEnter)===null||$===void 0||$.call(n,e,t,O)},S=function(O){var $;($=n.onDayMouseLeave)===null||$===void 0||$.call(n,e,t,O)},A=function(O){var $;($=n.onDayPointerEnter)===null||$===void 0||$.call(n,e,t,O)},C=function(O){var $;($=n.onDayPointerLeave)===null||$===void 0||$.call(n,e,t,O)},T=function(O){var $;($=n.onDayTouchCancel)===null||$===void 0||$.call(n,e,t,O)},M=function(O){var $;($=n.onDayTouchEnd)===null||$===void 0||$.call(n,e,t,O)},F=function(O){var $;($=n.onDayTouchMove)===null||$===void 0||$.call(n,e,t,O)},E=function(O){var $;($=n.onDayTouchStart)===null||$===void 0||$.call(n,e,t,O)},I=function(O){var $;($=n.onDayKeyUp)===null||$===void 0||$.call(n,e,t,O)},P=function(O){var $;switch(O.key){case"ArrowLeft":O.preventDefault(),O.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":O.preventDefault(),O.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":O.preventDefault(),O.stopPropagation(),u();break;case"ArrowUp":O.preventDefault(),O.stopPropagation(),f();break;case"PageUp":O.preventDefault(),O.stopPropagation(),O.shiftKey?v():m();break;case"PageDown":O.preventDefault(),O.stopPropagation(),O.shiftKey?x():g();break;case"Home":O.preventDefault(),O.stopPropagation(),y();break;case"End":O.preventDefault(),O.stopPropagation(),b();break}($=n.onDayKeyDown)===null||$===void 0||$.call(n,e,t,O)},B={onClick:w,onFocus:k,onBlur:_,onKeyDown:P,onKeyUp:I,onMouseEnter:j,onMouseLeave:S,onPointerEnter:A,onPointerLeave:C,onTouchCancel:T,onTouchEnd:M,onTouchMove:F,onTouchStart:E};return B}function mse(){var e=kn(),t=gB(),n=eC(),r=nC(),a=db(e)?t.selected:_p(e)?n.selected:kp(e)?r.selected:void 0;return a}function pse(e){return Object.values(ts).includes(e)}function gse(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var a=e.modifiersClassNames[r];if(a)n.push(a);else if(pse(r)){var s=e.classNames["day_".concat(r)];s&&n.push(s)}}),n}function vse(e,t){var n=jt({},e.styles.day);return Object.keys(t).forEach(function(r){var a;n=jt(jt({},n),(a=e.modifiersStyles)===null||a===void 0?void 0:a[r])}),n}function xse(e,t,n){var r,a,s,o=kn(),l=aC(),c=use(e,t),u=hse(e,c),f=mse(),d=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var j;c.outside||l.focusedDay&&d&&Na(l.focusedDay,e)&&((j=n.current)===null||j===void 0||j.focus())},[l.focusedDay,e,n,d,c.outside]);var h=gse(o,c).join(" "),m=vse(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),v=(s=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&s!==void 0?s:Fie,x=i.jsx(v,{date:e,displayMonth:t,activeModifiers:c}),y={style:m,className:h,children:x,role:"gridcell"},b=l.focusTarget&&Na(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&Na(l.focusedDay,e),k=jt(jt(jt({},y),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=w||b?0:-1,r)),u),_={isButton:d,isHidden:g,activeModifiers:c,selectedDays:f,buttonProps:k,divProps:y};return _}function yse(e){var t=p.useRef(null),n=xse(e.date,e.displayMonth,t);return n.isHidden?i.jsx("div",{role:"gridcell"}):n.isButton?i.jsx(ix,jt({name:"day",ref:t},n.buttonProps)):i.jsx("div",jt({},n.divProps))}function bse(e){var t=e.number,n=e.dates,r=kn(),a=r.onWeekNumberClick,s=r.styles,o=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,f=u(Number(t),{locale:l});if(!a)return i.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:f});var d=c(Number(t),{locale:l}),h=function(m){a(t,n,m)};return i.jsx(ix,{name:"week-number","aria-label":d,className:o.weeknumber,style:s.weeknumber,onClick:h,children:f})}function wse(e){var t,n,r=kn(),a=r.styles,s=r.classNames,o=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:yse,u=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:bse,f;return o&&(f=i.jsx("td",{className:s.cell,style:a.cell,children:i.jsx(u,{number:e.weekNumber,dates:e.dates})})),i.jsxs("tr",{className:s.row,style:a.row,children:[f,e.dates.map(function(d){return i.jsx("td",{className:s.cell,style:a.cell,role:"presentation",children:i.jsx(c,{displayMonth:e.displayMonth,date:d})},Jae(d))})]})}function FT(e,t,n){for(var r=n!=null&&n.ISOWeek?eB(t):JN(t,n),a=n!=null&&n.ISOWeek?Ec(e):Ps(e,n),s=xs(r,a),o=[],l=0;l<=s;l++)o.push(ia(a,l));var c=o.reduce(function(u,f){var d=n!=null&&n.ISOWeek?nB(f):aB(f,n),h=u.find(function(m){return m.weekNumber===d});return h?(h.dates.push(f),u):(u.push({weekNumber:d,dates:[f]}),u)},[]);return c}function jse(e,t){var n=FT(Oa(e),XN(e),t);if(t!=null&&t.useFixedWeeks){var r=Zae(e,t);if(r<6){var a=n[n.length-1],s=a.dates[a.dates.length-1],o=i_(s,6-r),l=FT(i_(s,1),o,t);n.push.apply(n,l)}}return n}function _se(e){var t,n,r,a=kn(),s=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,f=a.components,d=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,g=jse(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:s,weekStartsOn:d,firstWeekContainsDate:h}),v=(t=f==null?void 0:f.Head)!==null&&t!==void 0?t:Lie,x=(n=f==null?void 0:f.Row)!==null&&n!==void 0?n:wse,y=(r=f==null?void 0:f.Footer)!==null&&r!==void 0?r:Mie;return i.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&i.jsx(v,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(b){return i.jsx(x,{displayMonth:e.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),i.jsx(y,{displayMonth:e.displayMonth})]})}function kse(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Sse=kse()?p.useLayoutEffect:p.useEffect,Iw=!1,Nse=0;function BT(){return"react-day-picker-".concat(++Nse)}function Cse(e){var t,n=e??(Iw?BT():null),r=p.useState(n),a=r[0],s=r[1];return Sse(function(){a===null&&s(BT())},[]),p.useEffect(function(){Iw===!1&&(Iw=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function Ase(e){var t,n,r=kn(),a=r.dir,s=r.classNames,o=r.styles,l=r.components,c=Sp().displayMonths,u=Cse(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,d=[s.month],h=o.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,v=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(d.push(s.caption_start),h=jt(jt({},h),o.caption_start)),g&&(d.push(s.caption_end),h=jt(jt({},h),o.caption_end)),v&&(d.push(s.caption_between),h=jt(jt({},h),o.caption_between));var x=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:Rie;return i.jsxs("div",{className:d.join(" "),style:h,children:[i.jsx(x,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),i.jsx(_se,{id:f,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function Ese(e){var t=kn(),n=t.classNames,r=t.styles;return i.jsx("div",{className:n.months,style:r.months,children:e.children})}function Pse(e){var t,n,r=e.initialProps,a=kn(),s=aC(),o=Sp(),l=p.useState(!1),c=l[0],u=l[1];p.useEffect(function(){a.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[a.initialFocus,c,s.focus,s.focusTarget,s]);var f=[a.classNames.root,a.className];a.numberOfMonths>1&&f.push(a.classNames.multiple_months),a.showWeekNumber&&f.push(a.classNames.with_weeknumber);var d=jt(jt({},a.styles.root),a.style),h=Object.keys(r).filter(function(g){return g.startsWith("data-")}).reduce(function(g,v){var x;return jt(jt({},g),(x={},x[v]=r[v],x))},{}),m=(n=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:Ese;return i.jsx("div",jt({className:f.join(" "),style:d,dir:a.dir,id:a.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:i.jsx(m,{children:o.displayMonths.map(function(g,v){return i.jsx(Ase,{displayIndex:v,displayMonth:g},v)})})}))}function Tse(e){var t=e.children,n=tie(e,["children"]);return i.jsx(bie,{initialProps:n,children:i.jsx(Pie,{children:i.jsx(dse,{initialProps:n,children:i.jsx(Bie,{initialProps:n,children:i.jsx(qie,{initialProps:n,children:i.jsx(Jie,{children:i.jsx(cse,{children:t})})})})})})})}function Ose(e){return i.jsx(Tse,jt({},e,{children:i.jsx(Pse,{initialProps:e})}))}function o_({className:e,classNames:t,showOutsideDays:n=!0,...r}){return i.jsx(Ose,{showOutsideDays:n,className:Se("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Se(Cd({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Se(Cd({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>i.jsx(QS,{className:"h-4 w-4"}),IconRight:({...a})=>i.jsx(Ey,{className:"h-4 w-4"})},...r})}o_.displayName="Calendar";var fb="Popover",[vB,P3e]=kr(fb,[Al]),Np=Al(),[Ise,Ol]=vB(fb),xB=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:s,modal:o=!1}=e,l=Np(t),c=p.useRef(null),[u,f]=p.useState(!1),[d,h]=Ia({prop:r,defaultProp:a??!1,onChange:s,caller:fb});return i.jsx(Ry,{...l,children:i.jsx(Ise,{scope:t,contentId:ar(),triggerRef:c,open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>f(!0),[]),onCustomAnchorRemove:p.useCallback(()=>f(!1),[]),modal:o,children:n})})};xB.displayName=fb;var yB="PopoverAnchor",Rse=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Ol(yB,n),s=Np(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return p.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(hp,{...s,...r,ref:t})});Rse.displayName=yB;var bB="PopoverTrigger",wB=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Ol(bB,n),s=Np(n),o=Nt(t,a.triggerRef),l=i.jsx(Qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":NB(a.open),...r,ref:o,onClick:De(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:i.jsx(hp,{asChild:!0,...s,children:l})});wB.displayName=bB;var sC="PopoverPortal",[Mse,Dse]=vB(sC,{forceMount:void 0}),jB=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,s=Ol(sC,t);return i.jsx(Mse,{scope:t,forceMount:n,children:i.jsx(pr,{present:n||s.open,children:i.jsx(nf,{asChild:!0,container:a,children:r})})})};jB.displayName=sC;var Pd="PopoverContent",_B=p.forwardRef((e,t)=>{const n=Dse(Pd,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,s=Ol(Pd,e.__scopePopover);return i.jsx(pr,{present:r||s.open,children:s.modal?i.jsx(Lse,{...a,ref:t}):i.jsx(Fse,{...a,ref:t})})});_B.displayName=Pd;var $se=xl("PopoverContent.RemoveScroll"),Lse=p.forwardRef((e,t)=>{const n=Ol(Pd,e.__scopePopover),r=p.useRef(null),a=Nt(t,r),s=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return eb(o)},[]),i.jsx(yp,{as:$se,allowPinchZoom:!0,children:i.jsx(kB,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),s.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:De(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;s.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:De(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Fse=p.forwardRef((e,t)=>{const n=Ol(Pd,e.__scopePopover),r=p.useRef(!1),a=p.useRef(!1);return i.jsx(kB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:s=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),kB=p.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:f,...d}=e,h=Ol(Pd,n),m=Np(n);return Zy(),i.jsx(xp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(Yc,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:i.jsx(My,{"data-state":NB(h.open),role:"dialog",id:h.contentId,...m,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),SB="PopoverClose",Bse=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Ol(SB,n);return i.jsx(Qe.button,{type:"button",...r,ref:t,onClick:De(e.onClick,()=>a.onOpenChange(!1))})});Bse.displayName=SB;var Use="PopoverArrow",zse=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Np(n);return i.jsx(Dy,{...a,...r,ref:t})});zse.displayName=Use;function NB(e){return e?"open":"closed"}var qse=xB,Wse=wB,Hse=jB,CB=_B;const ys=qse,bs=Wse,Wi=p.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},a)=>i.jsx(Hse,{children:i.jsx(CB,{ref:a,align:t,sideOffset:n,className:Se("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Wi.displayName=CB.displayName;function oC(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Vse=[" ","Enter","ArrowUp","ArrowDown"],Kse=[" ","Enter"],Tc="Select",[hb,mb,Gse]=op(Tc),[df,T3e]=kr(Tc,[Gse,Al]),pb=Al(),[Yse,Il]=df(Tc),[Xse,Jse]=df(Tc),AB=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:s,value:o,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:d,disabled:h,required:m,form:g}=e,v=pb(t),[x,y]=p.useState(null),[b,w]=p.useState(null),[k,_]=p.useState(!1),j=uf(u),[S,A]=Ia({prop:r,defaultProp:a??!1,onChange:s,caller:Tc}),[C,T]=Ia({prop:o,defaultProp:l,onChange:c,caller:Tc}),M=p.useRef(null),F=x?g||!!x.closest("form"):!0,[E,I]=p.useState(new Set),P=Array.from(E).map(B=>B.props.value).join(";");return i.jsx(Ry,{...v,children:i.jsxs(Yse,{required:m,scope:t,trigger:x,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:k,onValueNodeHasChildrenChange:_,contentId:ar(),value:C,onValueChange:T,open:S,onOpenChange:A,dir:j,triggerPointerDownPosRef:M,disabled:h,children:[i.jsx(hb.Provider,{scope:t,children:i.jsx(Xse,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(B=>{I(O=>new Set(O).add(B))},[]),onNativeOptionRemove:p.useCallback(B=>{I(O=>{const $=new Set(O);return $.delete(B),$})},[]),children:n})}),F?i.jsxs(QB,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:d,value:C,onChange:B=>T(B.target.value),disabled:h,form:g,children:[C===void 0?i.jsx("option",{value:""}):null,Array.from(E)]},P):null]})})};AB.displayName=Tc;var EB="SelectTrigger",PB=p.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,s=pb(n),o=Il(EB,n),l=o.disabled||r,c=Nt(t,o.onTriggerChange),u=mb(n),f=p.useRef("touch"),[d,h,m]=eU(v=>{const x=u().filter(w=>!w.disabled),y=x.find(w=>w.value===o.value),b=tU(x,v,y);b!==void 0&&o.onValueChange(b.value)}),g=v=>{l||(o.onOpenChange(!0),m()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return i.jsx(hp,{asChild:!0,...s,children:i.jsx(Qe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":ZB(o.value)?"":void 0,...a,ref:c,onClick:De(a.onClick,v=>{v.currentTarget.focus(),f.current!=="mouse"&&g(v)}),onPointerDown:De(a.onPointerDown,v=>{f.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:De(a.onKeyDown,v=>{const x=d.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(x&&v.key===" ")&&Vse.includes(v.key)&&(g(),v.preventDefault())})})})});PB.displayName=EB;var TB="SelectValue",OB=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:s,placeholder:o="",...l}=e,c=Il(TB,n),{onValueNodeHasChildrenChange:u}=c,f=s!==void 0,d=Nt(t,c.onValueNodeChange);return Yn(()=>{u(f)},[u,f]),i.jsx(Qe.span,{...l,ref:d,style:{pointerEvents:"none"},children:ZB(c.value)?i.jsx(i.Fragment,{children:o}):s})});OB.displayName=TB;var Qse="SelectIcon",IB=p.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return i.jsx(Qe.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});IB.displayName=Qse;var Zse="SelectPortal",RB=e=>i.jsx(nf,{asChild:!0,...e});RB.displayName=Zse;var Oc="SelectContent",MB=p.forwardRef((e,t)=>{const n=Il(Oc,e.__scopeSelect),[r,a]=p.useState();if(Yn(()=>{a(new DocumentFragment)},[]),!n.open){const s=r;return s?Kc.createPortal(i.jsx(DB,{scope:e.__scopeSelect,children:i.jsx(hb.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),s):null}return i.jsx($B,{...e,ref:t})});MB.displayName=Oc;var Ii=10,[DB,Rl]=df(Oc),eoe="SelectContentImpl",toe=xl("SelectContent.RemoveScroll"),$B=p.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x,...y}=e,b=Il(Oc,n),[w,k]=p.useState(null),[_,j]=p.useState(null),S=Nt(t,V=>k(V)),[A,C]=p.useState(null),[T,M]=p.useState(null),F=mb(n),[E,I]=p.useState(!1),P=p.useRef(!1);p.useEffect(()=>{if(w)return eb(w)},[w]),Zy();const B=p.useCallback(V=>{const[ie,...G]=F().map(Z=>Z.ref.current),[le]=G.slice(-1),se=document.activeElement;for(const Z of V)if(Z===se||(Z==null||Z.scrollIntoView({block:"nearest"}),Z===ie&&_&&(_.scrollTop=0),Z===le&&_&&(_.scrollTop=_.scrollHeight),Z==null||Z.focus(),document.activeElement!==se))return},[F,_]),O=p.useCallback(()=>B([A,w]),[B,A,w]);p.useEffect(()=>{E&&O()},[E,O]);const{onOpenChange:$,triggerPointerDownPosRef:L}=b;p.useEffect(()=>{if(w){let V={x:0,y:0};const ie=le=>{var se,Z;V={x:Math.abs(Math.round(le.pageX)-(((se=L.current)==null?void 0:se.x)??0)),y:Math.abs(Math.round(le.pageY)-(((Z=L.current)==null?void 0:Z.y)??0))}},G=le=>{V.x<=10&&V.y<=10?le.preventDefault():w.contains(le.target)||$(!1),document.removeEventListener("pointermove",ie),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",G,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",G,{capture:!0})}}},[w,$,L]),p.useEffect(()=>{const V=()=>$(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[$]);const[N,U]=eU(V=>{const ie=F().filter(se=>!se.disabled),G=ie.find(se=>se.ref.current===document.activeElement),le=tU(ie,V,G);le&&setTimeout(()=>le.ref.current.focus())}),D=p.useCallback((V,ie,G)=>{const le=!P.current&&!G;(b.value!==void 0&&b.value===ie||le)&&(C(V),le&&(P.current=!0))},[b.value]),R=p.useCallback(()=>w==null?void 0:w.focus(),[w]),K=p.useCallback((V,ie,G)=>{const le=!P.current&&!G;(b.value!==void 0&&b.value===ie||le)&&M(V)},[b.value]),Q=r==="popper"?l_:LB,H=Q===l_?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:d,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:x}:{};return i.jsx(DB,{scope:n,content:w,viewport:_,onViewportChange:j,itemRefCallback:D,selectedItem:A,onItemLeave:R,itemTextRefCallback:K,focusSelectedItem:O,selectedItemText:T,position:r,isPositioned:E,searchRef:N,children:i.jsx(yp,{as:toe,allowPinchZoom:!0,children:i.jsx(xp,{asChild:!0,trapped:b.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:De(a,V=>{var ie;(ie=b.trigger)==null||ie.focus({preventScroll:!0}),V.preventDefault()}),children:i.jsx(Yc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:i.jsx(Q,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:V=>V.preventDefault(),...y,...H,onPlaced:()=>I(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:De(y.onKeyDown,V=>{const ie=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!ie&&V.key.length===1&&U(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let le=F().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(V.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const se=V.target,Z=le.indexOf(se);le=le.slice(Z+1)}setTimeout(()=>B(le)),V.preventDefault()}})})})})})})});$B.displayName=eoe;var noe="SelectItemAlignedPosition",LB=p.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,s=Il(Oc,n),o=Rl(Oc,n),[l,c]=p.useState(null),[u,f]=p.useState(null),d=Nt(t,S=>f(S)),h=mb(n),m=p.useRef(!1),g=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:y,focusSelectedItem:b}=o,w=p.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&u&&v&&x&&y){const S=s.trigger.getBoundingClientRect(),A=u.getBoundingClientRect(),C=s.valueNode.getBoundingClientRect(),T=y.getBoundingClientRect();if(s.dir!=="rtl"){const se=T.left-A.left,Z=C.left-se,_e=S.left-Z,z=S.width+_e,q=Math.max(z,A.width),ce=window.innerWidth-Ii,ke=a_(Z,[Ii,Math.max(Ii,ce-q)]);l.style.minWidth=z+"px",l.style.left=ke+"px"}else{const se=A.right-T.right,Z=window.innerWidth-C.right-se,_e=window.innerWidth-S.right-Z,z=S.width+_e,q=Math.max(z,A.width),ce=window.innerWidth-Ii,ke=a_(Z,[Ii,Math.max(Ii,ce-q)]);l.style.minWidth=z+"px",l.style.right=ke+"px"}const M=h(),F=window.innerHeight-Ii*2,E=v.scrollHeight,I=window.getComputedStyle(u),P=parseInt(I.borderTopWidth,10),B=parseInt(I.paddingTop,10),O=parseInt(I.borderBottomWidth,10),$=parseInt(I.paddingBottom,10),L=P+B+E+$+O,N=Math.min(x.offsetHeight*5,L),U=window.getComputedStyle(v),D=parseInt(U.paddingTop,10),R=parseInt(U.paddingBottom,10),K=S.top+S.height/2-Ii,Q=F-K,H=x.offsetHeight/2,V=x.offsetTop+H,ie=P+B+V,G=L-ie;if(ie<=K){const se=M.length>0&&x===M[M.length-1].ref.current;l.style.bottom="0px";const Z=u.clientHeight-v.offsetTop-v.offsetHeight,_e=Math.max(Q,H+(se?R:0)+Z+O),z=ie+_e;l.style.height=z+"px"}else{const se=M.length>0&&x===M[0].ref.current;l.style.top="0px";const _e=Math.max(K,P+v.offsetTop+(se?D:0)+H)+G;l.style.height=_e+"px",v.scrollTop=ie-K+v.offsetTop}l.style.margin=`${Ii}px 0`,l.style.minHeight=N+"px",l.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[h,s.trigger,s.valueNode,l,u,v,x,y,s.dir,r]);Yn(()=>w(),[w]);const[k,_]=p.useState();Yn(()=>{u&&_(window.getComputedStyle(u).zIndex)},[u]);const j=p.useCallback(S=>{S&&g.current===!0&&(w(),b==null||b(),g.current=!1)},[w,b]);return i.jsx(aoe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:j,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:i.jsx(Qe.div,{...a,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});LB.displayName=noe;var roe="SelectPopperPosition",l_=p.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Ii,...s}=e,o=pb(n);return i.jsx(My,{...o,...s,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});l_.displayName=roe;var[aoe,lC]=df(Oc,{}),c_="SelectViewport",FB=p.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,s=Rl(c_,n),o=lC(c_,n),l=Nt(t,s.onViewportChange),c=p.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(hb.Slot,{scope:n,children:i.jsx(Qe.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:De(a.onScroll,u=>{const f=u.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){const m=Math.abs(c.current-f.scrollTop);if(m>0){const g=window.innerHeight-Ii*2,v=parseFloat(d.style.minHeight),x=parseFloat(d.style.height),y=Math.max(v,x);if(y<g){const b=y+m,w=Math.min(g,b),k=b-w;d.style.height=w+"px",d.style.bottom==="0px"&&(f.scrollTop=k>0?k:0,d.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});FB.displayName=c_;var BB="SelectGroup",[ioe,soe]=df(BB),ooe=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=ar();return i.jsx(ioe,{scope:n,id:a,children:i.jsx(Qe.div,{role:"group","aria-labelledby":a,...r,ref:t})})});ooe.displayName=BB;var UB="SelectLabel",zB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=soe(UB,n);return i.jsx(Qe.div,{id:a.id,...r,ref:t})});zB.displayName=UB;var sx="SelectItem",[loe,qB]=df(sx),WB=p.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:s,...o}=e,l=Il(sx,n),c=Rl(sx,n),u=l.value===r,[f,d]=p.useState(s??""),[h,m]=p.useState(!1),g=Nt(t,b=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,b,r,a)}),v=ar(),x=p.useRef("touch"),y=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(loe,{scope:n,value:r,disabled:a,textId:v,isSelected:u,onItemTextChange:p.useCallback(b=>{d(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:i.jsx(hb.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:i.jsx(Qe.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:De(o.onFocus,()=>m(!0)),onBlur:De(o.onBlur,()=>m(!1)),onClick:De(o.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:De(o.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:De(o.onPointerDown,b=>{x.current=b.pointerType}),onPointerMove:De(o.onPointerMove,b=>{var w;x.current=b.pointerType,a?(w=c.onItemLeave)==null||w.call(c):x.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:De(o.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:De(o.onKeyDown,b=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&b.key===" "||(Kse.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});WB.displayName=sx;var uh="SelectItemText",HB=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...s}=e,o=Il(uh,n),l=Rl(uh,n),c=qB(uh,n),u=Jse(uh,n),[f,d]=p.useState(null),h=Nt(t,y=>d(y),c.onItemTextChange,y=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,y,c.value,c.disabled)}),m=f==null?void 0:f.textContent,g=p.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=u;return Yn(()=>(v(g),()=>x(g)),[v,x,g]),i.jsxs(i.Fragment,{children:[i.jsx(Qe.span,{id:c.textId,...s,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Kc.createPortal(s.children,o.valueNode):null]})});HB.displayName=uh;var VB="SelectItemIndicator",KB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return qB(VB,n).isSelected?i.jsx(Qe.span,{"aria-hidden":!0,...r,ref:t}):null});KB.displayName=VB;var u_="SelectScrollUpButton",GB=p.forwardRef((e,t)=>{const n=Rl(u_,e.__scopeSelect),r=lC(u_,e.__scopeSelect),[a,s]=p.useState(!1),o=Nt(t,r.onScrollButtonChange);return Yn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;s(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?i.jsx(XB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});GB.displayName=u_;var d_="SelectScrollDownButton",YB=p.forwardRef((e,t)=>{const n=Rl(d_,e.__scopeSelect),r=lC(d_,e.__scopeSelect),[a,s]=p.useState(!1),o=Nt(t,r.onScrollButtonChange);return Yn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;s(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?i.jsx(XB,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});YB.displayName=d_;var XB=p.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,s=Rl("SelectScrollButton",n),o=p.useRef(null),l=mb(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Yn(()=>{var f;const u=l().find(d=>d.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),i.jsx(Qe.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:De(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:De(a.onPointerMove,()=>{var u;(u=s.onItemLeave)==null||u.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:De(a.onPointerLeave,()=>{c()})})}),coe="SelectSeparator",JB=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return i.jsx(Qe.div,{"aria-hidden":!0,...r,ref:t})});JB.displayName=coe;var f_="SelectArrow",uoe=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=pb(n),s=Il(f_,n),o=Rl(f_,n);return s.open&&o.position==="popper"?i.jsx(Dy,{...a,...r,ref:t}):null});uoe.displayName=f_;var doe="SelectBubbleInput",QB=p.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=p.useRef(null),s=Nt(r,a),o=oC(t);return p.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&f){const d=new Event("change",{bubbles:!0});f.call(l,t),l.dispatchEvent(d)}},[o,t]),i.jsx(Qe.select,{...n,style:{...yL,...n.style},ref:s,defaultValue:t})});QB.displayName=doe;function ZB(e){return e===""||e===void 0}function eU(e){const t=Vn(e),n=p.useRef(""),r=p.useRef(0),a=p.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),s=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,s]}function tU(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let o=foe(e,Math.max(s,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function foe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var hoe=AB,nU=PB,moe=OB,poe=IB,goe=RB,rU=MB,voe=FB,aU=zB,iU=WB,xoe=HB,yoe=KB,sU=GB,oU=YB,lU=JB;const Ht=hoe,Dt=moe,Ut=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(nU,{ref:r,className:Se("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,i.jsx(poe,{asChild:!0,children:i.jsx(ka,{className:"h-4 w-4 opacity-50"})})]}));Ut.displayName=nU.displayName;const cU=p.forwardRef(({className:e,...t},n)=>i.jsx(sU,{ref:n,className:Se("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(qL,{className:"h-4 w-4"})}));cU.displayName=sU.displayName;const uU=p.forwardRef(({className:e,...t},n)=>i.jsx(oU,{ref:n,className:Se("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(ka,{className:"h-4 w-4"})}));uU.displayName=oU.displayName;const zt=p.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>i.jsx(goe,{children:i.jsxs(rU,{ref:a,className:Se("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[i.jsx(cU,{}),i.jsx(voe,{className:Se("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(uU,{})]})}));zt.displayName=rU.displayName;const boe=p.forwardRef(({className:e,...t},n)=>i.jsx(aU,{ref:n,className:Se("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));boe.displayName=aU.displayName;const Ge=p.forwardRef(({className:e,children:t,...n},r)=>i.jsxs(iU,{ref:r,className:Se("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(yoe,{children:i.jsx(Ay,{className:"h-4 w-4"})})}),i.jsx(xoe,{children:t})]}));Ge.displayName=iU.displayName;const woe=p.forwardRef(({className:e,...t},n)=>i.jsx(lU,{ref:n,className:Se("-mx-1 my-1 h-px bg-muted",e),...t}));woe.displayName=lU.displayName;var UT=1,joe=.9,_oe=.8,koe=.17,Rw=.1,Mw=.999,Soe=.9999,Noe=.99,Coe=/[\\\/_+.#"@\[\(\{&]/,Aoe=/[\\\/_+.#"@\[\(\{&]/g,Eoe=/[\s-]/,dU=/[\s-]/g;function h_(e,t,n,r,a,s,o){if(s===t.length)return a===e.length?UT:Noe;var l=`${a},${s}`;if(o[l]!==void 0)return o[l];for(var c=r.charAt(s),u=n.indexOf(c,a),f=0,d,h,m,g;u>=0;)d=h_(e,t,n,r,u+1,s+1,o),d>f&&(u===a?d*=UT:Coe.test(e.charAt(u-1))?(d*=_oe,m=e.slice(a,u-1).match(Aoe),m&&a>0&&(d*=Math.pow(Mw,m.length))):Eoe.test(e.charAt(u-1))?(d*=joe,g=e.slice(a,u-1).match(dU),g&&a>0&&(d*=Math.pow(Mw,g.length))):(d*=koe,a>0&&(d*=Math.pow(Mw,u-a))),e.charAt(u)!==t.charAt(s)&&(d*=Soe)),(d<Rw&&n.charAt(u-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(u-1)!==r.charAt(s))&&(h=h_(e,t,n,r,u+1,s+2,o),h*Rw>d&&(d=h*Rw)),d>f&&(f=d),u=n.indexOf(c,u+1);return o[l]=f,f}function zT(e){return e.toLowerCase().replace(dU," ")}function Poe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,h_(e,t,zT(e),zT(t),0,0,{})}var zf='[cmdk-group=""]',Dw='[cmdk-group-items=""]',Toe='[cmdk-group-heading=""]',fU='[cmdk-item=""]',qT=`${fU}:not([aria-disabled="true"])`,m_="cmdk-item-select",Nu="data-value",Ooe=(e,t,n)=>Poe(e,t,n),hU=p.createContext(void 0),Cp=()=>p.useContext(hU),mU=p.createContext(void 0),cC=()=>p.useContext(mU),pU=p.createContext(void 0),gU=p.forwardRef((e,t)=>{let n=Cu(()=>{var D,R;return{search:"",value:(R=(D=e.value)!=null?D:e.defaultValue)!=null?R:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Cu(()=>new Set),a=Cu(()=>new Map),s=Cu(()=>new Map),o=Cu(()=>new Set),l=vU(e),{label:c,children:u,value:f,onValueChange:d,filter:h,shouldFilter:m,loop:g,disablePointerSelection:v=!1,vimBindings:x=!0,...y}=e,b=ar(),w=ar(),k=ar(),_=p.useRef(null),j=qoe();Ic(()=>{if(f!==void 0){let D=f.trim();n.current.value=D,S.emit()}},[f]),Ic(()=>{j(6,E)},[]);let S=p.useMemo(()=>({subscribe:D=>(o.current.add(D),()=>o.current.delete(D)),snapshot:()=>n.current,setState:(D,R,K)=>{var Q,H,V,ie;if(!Object.is(n.current[D],R)){if(n.current[D]=R,D==="search")F(),T(),j(1,M);else if(D==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let G=document.getElementById(k);G?G.focus():(Q=document.getElementById(b))==null||Q.focus()}if(j(7,()=>{var G;n.current.selectedItemId=(G=I())==null?void 0:G.id,S.emit()}),K||j(5,E),((H=l.current)==null?void 0:H.value)!==void 0){let G=R??"";(ie=(V=l.current).onValueChange)==null||ie.call(V,G);return}}S.emit()}},emit:()=>{o.current.forEach(D=>D())}}),[]),A=p.useMemo(()=>({value:(D,R,K)=>{var Q;R!==((Q=s.current.get(D))==null?void 0:Q.value)&&(s.current.set(D,{value:R,keywords:K}),n.current.filtered.items.set(D,C(R,K)),j(2,()=>{T(),S.emit()}))},item:(D,R)=>(r.current.add(D),R&&(a.current.has(R)?a.current.get(R).add(D):a.current.set(R,new Set([D]))),j(3,()=>{F(),T(),n.current.value||M(),S.emit()}),()=>{s.current.delete(D),r.current.delete(D),n.current.filtered.items.delete(D);let K=I();j(4,()=>{F(),(K==null?void 0:K.getAttribute("id"))===D&&M(),S.emit()})}),group:D=>(a.current.has(D)||a.current.set(D,new Set),()=>{s.current.delete(D),a.current.delete(D)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:b,inputId:k,labelId:w,listInnerRef:_}),[]);function C(D,R){var K,Q;let H=(Q=(K=l.current)==null?void 0:K.filter)!=null?Q:Ooe;return D?H(D,n.current.search,R):0}function T(){if(!n.current.search||l.current.shouldFilter===!1)return;let D=n.current.filtered.items,R=[];n.current.filtered.groups.forEach(Q=>{let H=a.current.get(Q),V=0;H.forEach(ie=>{let G=D.get(ie);V=Math.max(G,V)}),R.push([Q,V])});let K=_.current;P().sort((Q,H)=>{var V,ie;let G=Q.getAttribute("id"),le=H.getAttribute("id");return((V=D.get(le))!=null?V:0)-((ie=D.get(G))!=null?ie:0)}).forEach(Q=>{let H=Q.closest(Dw);H?H.appendChild(Q.parentElement===H?Q:Q.closest(`${Dw} > *`)):K.appendChild(Q.parentElement===K?Q:Q.closest(`${Dw} > *`))}),R.sort((Q,H)=>H[1]-Q[1]).forEach(Q=>{var H;let V=(H=_.current)==null?void 0:H.querySelector(`${zf}[${Nu}="${encodeURIComponent(Q[0])}"]`);V==null||V.parentElement.appendChild(V)})}function M(){let D=P().find(K=>K.getAttribute("aria-disabled")!=="true"),R=D==null?void 0:D.getAttribute(Nu);S.setState("value",R||void 0)}function F(){var D,R,K,Q;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let H=0;for(let V of r.current){let ie=(R=(D=s.current.get(V))==null?void 0:D.value)!=null?R:"",G=(Q=(K=s.current.get(V))==null?void 0:K.keywords)!=null?Q:[],le=C(ie,G);n.current.filtered.items.set(V,le),le>0&&H++}for(let[V,ie]of a.current)for(let G of ie)if(n.current.filtered.items.get(G)>0){n.current.filtered.groups.add(V);break}n.current.filtered.count=H}function E(){var D,R,K;let Q=I();Q&&(((D=Q.parentElement)==null?void 0:D.firstChild)===Q&&((K=(R=Q.closest(zf))==null?void 0:R.querySelector(Toe))==null||K.scrollIntoView({block:"nearest"})),Q.scrollIntoView({block:"nearest"}))}function I(){var D;return(D=_.current)==null?void 0:D.querySelector(`${fU}[aria-selected="true"]`)}function P(){var D;return Array.from(((D=_.current)==null?void 0:D.querySelectorAll(qT))||[])}function B(D){let R=P()[D];R&&S.setState("value",R.getAttribute(Nu))}function O(D){var R;let K=I(),Q=P(),H=Q.findIndex(ie=>ie===K),V=Q[H+D];(R=l.current)!=null&&R.loop&&(V=H+D<0?Q[Q.length-1]:H+D===Q.length?Q[0]:Q[H+D]),V&&S.setState("value",V.getAttribute(Nu))}function $(D){let R=I(),K=R==null?void 0:R.closest(zf),Q;for(;K&&!Q;)K=D>0?Uoe(K,zf):zoe(K,zf),Q=K==null?void 0:K.querySelector(qT);Q?S.setState("value",Q.getAttribute(Nu)):O(D)}let L=()=>B(P().length-1),N=D=>{D.preventDefault(),D.metaKey?L():D.altKey?$(1):O(1)},U=D=>{D.preventDefault(),D.metaKey?B(0):D.altKey?$(-1):O(-1)};return p.createElement(Qe.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:D=>{var R;(R=y.onKeyDown)==null||R.call(y,D);let K=D.nativeEvent.isComposing||D.keyCode===229;if(!(D.defaultPrevented||K))switch(D.key){case"n":case"j":{x&&D.ctrlKey&&N(D);break}case"ArrowDown":{N(D);break}case"p":case"k":{x&&D.ctrlKey&&U(D);break}case"ArrowUp":{U(D);break}case"Home":{D.preventDefault(),B(0);break}case"End":{D.preventDefault(),L();break}case"Enter":{D.preventDefault();let Q=I();if(Q){let H=new Event(m_);Q.dispatchEvent(H)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:A.inputId,id:A.labelId,style:Hoe},c),gb(e,D=>p.createElement(mU.Provider,{value:S},p.createElement(hU.Provider,{value:A},D))))}),Ioe=p.forwardRef((e,t)=>{var n,r;let a=ar(),s=p.useRef(null),o=p.useContext(pU),l=Cp(),c=vU(e),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;Ic(()=>{if(!u)return l.item(a,o==null?void 0:o.id)},[u]);let f=xU(a,s,[e.value,e.children,s],e.keywords),d=cC(),h=jl(j=>j.value&&j.value===f.current),m=jl(j=>u||l.filter()===!1?!0:j.search?j.filtered.items.get(a)>0:!0);p.useEffect(()=>{let j=s.current;if(!(!j||e.disabled))return j.addEventListener(m_,g),()=>j.removeEventListener(m_,g)},[m,e.onSelect,e.disabled]);function g(){var j,S;v(),(S=(j=c.current).onSelect)==null||S.call(j,f.current)}function v(){d.setState("value",f.current,!0)}if(!m)return null;let{disabled:x,value:y,onSelect:b,forceMount:w,keywords:k,..._}=e;return p.createElement(Qe.div,{ref:ho(s,t),..._,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!h,"data-disabled":!!x,"data-selected":!!h,onPointerMove:x||l.getDisablePointerSelection()?void 0:v,onClick:x?void 0:g},e.children)}),Roe=p.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...s}=e,o=ar(),l=p.useRef(null),c=p.useRef(null),u=ar(),f=Cp(),d=jl(m=>a||f.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);Ic(()=>f.group(o),[]),xU(o,l,[e.value,e.heading,c]);let h=p.useMemo(()=>({id:o,forceMount:a}),[a]);return p.createElement(Qe.div,{ref:ho(l,t),...s,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&p.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),gb(e,m=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},p.createElement(pU.Provider,{value:h},m))))}),Moe=p.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=p.useRef(null),s=jl(o=>!o.search);return!n&&!s?null:p.createElement(Qe.div,{ref:ho(a,t),...r,"cmdk-separator":"",role:"separator"})}),Doe=p.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,s=cC(),o=jl(u=>u.search),l=jl(u=>u.selectedItemId),c=Cp();return p.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),p.createElement(Qe.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:u=>{a||s.setState("search",u.target.value),n==null||n(u.target.value)}})}),$oe=p.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,s=p.useRef(null),o=p.useRef(null),l=jl(u=>u.selectedItemId),c=Cp();return p.useEffect(()=>{if(o.current&&s.current){let u=o.current,f=s.current,d,h=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let m=u.offsetHeight;f.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return h.observe(u),()=>{cancelAnimationFrame(d),h.unobserve(u)}}},[]),p.createElement(Qe.div,{ref:ho(s,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:c.listId},gb(e,u=>p.createElement("div",{ref:ho(o,c.listInnerRef),"cmdk-list-sizer":""},u)))}),Loe=p.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:s,container:o,...l}=e;return p.createElement(LN,{open:n,onOpenChange:r},p.createElement(FN,{container:o},p.createElement(sb,{"cmdk-overlay":"",className:a}),p.createElement(ob,{"aria-label":e.label,"cmdk-dialog":"",className:s},p.createElement(gU,{ref:t,...l}))))}),Foe=p.forwardRef((e,t)=>jl(n=>n.filtered.count===0)?p.createElement(Qe.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Boe=p.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...s}=e;return p.createElement(Qe.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},gb(e,o=>p.createElement("div",{"aria-hidden":!0},o)))}),Ra=Object.assign(gU,{List:$oe,Item:Ioe,Input:Doe,Group:Roe,Separator:Moe,Dialog:Loe,Empty:Foe,Loading:Boe});function Uoe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function zoe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function vU(e){let t=p.useRef(e);return Ic(()=>{t.current=e}),t}var Ic=typeof window>"u"?p.useEffect:p.useLayoutEffect;function Cu(e){let t=p.useRef();return t.current===void 0&&(t.current=e()),t}function jl(e){let t=cC(),n=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,n,n)}function xU(e,t,n,r=[]){let a=p.useRef(),s=Cp();return Ic(()=>{var o;let l=(()=>{var u;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(u=f.current.textContent)==null?void 0:u.trim():a.current}})(),c=r.map(u=>u.trim());s.value(e,l,c),(o=t.current)==null||o.setAttribute(Nu,l),a.current=l}),a}var qoe=()=>{let[e,t]=p.useState(),n=Cu(()=>new Map);return Ic(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function Woe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function gb({asChild:e,children:t},n){return e&&p.isValidElement(t)?p.cloneElement(Woe(t),{ref:t.ref},n(t.props.children)):n(t)}var Hoe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Rc=p.forwardRef(({className:e,...t},n)=>i.jsx(Ra,{ref:n,className:Se("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Rc.displayName=Ra.displayName;const Mc=p.forwardRef(({className:e,...t},n)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(ks,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(Ra.Input,{ref:n,className:Se("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Mc.displayName=Ra.Input.displayName;const vb=p.forwardRef(({className:e,...t},n)=>i.jsx(Ra.List,{ref:n,className:Se("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));vb.displayName=Ra.List.displayName;const Dc=p.forwardRef((e,t)=>i.jsx(Ra.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Dc.displayName=Ra.Empty.displayName;const $c=p.forwardRef(({className:e,...t},n)=>i.jsx(Ra.Group,{ref:n,className:Se("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));$c.displayName=Ra.Group.displayName;const Voe=p.forwardRef(({className:e,...t},n)=>i.jsx(Ra.Separator,{ref:n,className:Se("-mx-1 h-px bg-border",e),...t}));Voe.displayName=Ra.Separator.displayName;const Lc=p.forwardRef(({className:e,...t},n)=>i.jsx(Ra.Item,{ref:n,className:Se("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));Lc.displayName=Ra.Item.displayName;let $w=!1,Lw=null;function pm(){return $w?Promise.resolve():(Lw||(Lw=ae.auth.getSession().then(()=>{$w=!0}).catch(()=>{$w=!0})),Lw)}const Ml=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null);let o=!1;const l=w=>{o=w},c=()=>{try{const w=localStorage.getItem("app.cachedAgents");if(!w)return!1;const k=JSON.parse(w);if(Array.isArray(k))return t(k),!0}catch{}return!1},u=w=>{const k=(w==null?void 0:w.filter(_=>_!=null))||[];return k.includes("master_agent")?"master_agent":k.includes("super_agent")?"super_agent":k.includes("agent")?"agent":null},f=6e4;globalThis.__agentsCache||(globalThis.__agentsCache={data:null,ts:0,inFlight:null});const d=globalThis.__agentsCache,h=w=>(w||[]).map(k=>{var S;const _=((S=k.roles)==null?void 0:S.filter(A=>A!=null))||[],j=u(k.roles||[]);return{user_id:k.id,email:k.email,display_name:k.display_name,avatar_url:k.avatar_url,timezone:k.timezone,created_at:k.created_at,roles:_,primaryRole:j,status:"Active",super_agent_id:null}}),m=async()=>(d.inFlight||(d.inFlight=(async()=>{await pm();const{data:w,error:k}=await ae.from("v_users").select("*").order("created_at",{ascending:!1});if(k)throw k;let _=h(w||[]);try{const{data:j}=await ae.from("super_agent_members").select("agent_user_id, super_agent_id");if(j&&Array.isArray(j)){const S={};j.forEach(A=>{S[A.agent_user_id]=A.super_agent_id}),_=_.map(A=>A.primaryRole==="agent"?{...A,super_agent_id:S[A.user_id]||null}:A)}}catch{}d.data=_,d.ts=Date.now(),d.inFlight=null;try{localStorage.setItem("app.cachedAgents",JSON.stringify(_))}catch{}return _})().catch(w=>{throw d.inFlight=null,w})),d.inFlight),g=async()=>d.data&&Date.now()-d.ts<f?d.data:await m(),v=async w=>{try{r(!0),s(null),w!=null&&w.force&&(d.ts=0);const k=await g();t(k)}catch(k){console.error("Error fetching human agents:",k),s("Failed to fetch human agents"),t([])}finally{r(!1)}},x=async w=>{var k,_;try{s(null);const j=w.email.trim().toLowerCase();if(w.role==="agent"&&!w.super_agent_id)throw new Error("Agents must be assigned to a super agent before they can be created.");const{data:S,error:A}=await ae.from("v_human_agents").select("user_id, confirmation_status").ilike("email",j).maybeSingle();if(A)throw A;if(S){const F=(()=>{switch(S.confirmation_status){case"accepted":return"assigned to an active member";case"waiting":return"pending for an existing invite";case"expired":return"associated with an expired invite";default:return"in use"}})();throw new Error(`The email ${j} is already ${F}. Choose a different email or manage the existing user instead.`)}const{data:C,error:T}=await ae.functions.invoke("admin-create-user",{headers:{"x-client-origin":typeof window<"u"?window.location.origin:""},body:{email:j,full_name:w.full_name,role:w.role,super_agent_id:w.super_agent_id??null,org_id:w.org_id??null}});if(T)throw T;try{const F=(C==null?void 0:C.id)||(C==null?void 0:C.user_id)||((k=C==null?void 0:C.user)==null?void 0:k.id)||null;F&&await ae.from("users_profile").update({is_2fa_email_enabled:o}).eq("user_id",F)}catch{}await v({force:!0});try{await Bt({action:"user.create",resource:"user",resourceId:(C==null?void 0:C.id)||null,context:w})}catch{}return{id:(C==null?void 0:C.id)||(C==null?void 0:C.user_id)||((_=C==null?void 0:C.user)==null?void 0:_.id)||null}}catch(j){throw console.error("Error creating agent:",j),s(j instanceof Error?j.message:"Failed to create agent"),j}},y=async(w,k)=>{try{s(null);const{data:_,error:j}=await ae.from("roles").select("id").eq("name",k).single();if(j)throw j;const{error:S}=await ae.from("user_roles").delete().eq("user_id",w);if(S)throw S;const{error:A}=await ae.from("user_roles").insert([{user_id:w,role_id:_.id}]);if(A)throw A;await v({force:!0});try{await Bt({action:"user.update_role",resource:"user",resourceId:w,context:{role:k}})}catch{}}catch(_){throw console.error("Error updating agent role:",_),s(_ instanceof Error?_.message:"Failed to update agent role"),_}},b=async w=>{try{s(null);const{data:k,error:_}=await ae.from("v_human_agents").select("role_name").eq("user_id",w).maybeSingle();if(_)throw _;if(k!=null&&k.role_name&&String(k.role_name).toLowerCase().includes("master"))throw new Error("Master agent tidak dapat dihapus.");const{error:j}=await ae.functions.invoke("admin-delete-user",{body:{user_id:w}});if(j)throw j;await v({force:!0});try{await Bt({action:"user.delete",resource:"user",resourceId:w})}catch{}}catch(k){throw console.error("Error deleting agent:",k),s(k instanceof Error?k.message:"Failed to delete agent"),k}};return p.useEffect(()=>{c()&&r(!1),v()},[]),{agents:e,teams:[],loading:n,error:a,fetchAgents:v,fetchTeams:()=>Promise.resolve(),createAgent:x,updateAgentStatus:()=>Promise.resolve(),updateAgentRole:y,deleteAgent:b,createTeam:()=>Promise.resolve(),addAgentToTeam:()=>Promise.resolve(),removeAgentFromTeam:()=>Promise.resolve(),setEnable2FAFlagForCreate:l}},Koe=({value:e,onFilterChange:t})=>{var _,j,S,A;const[n,r]=p.useState(!1),[a,s]=p.useState(),[o,l]=p.useState(),[c,u]=p.useState(!1),[f,d]=p.useState(!1),[h,m]=p.useState([]),[g,v]=p.useState({dateRange:{},inbox:"",label:[],agent:"",status:"",resolvedBy:"",platformId:"",channelType:"all"}),{agents:x}=Ml();p.useEffect(()=>{e&&(v(C=>({...C,...e,dateRange:e.dateRange??C.dateRange})),e.dateRange&&(s(e.dateRange.from),l(e.dateRange.to)))},[n,e==null?void 0:e.inbox,e==null?void 0:e.agent,e==null?void 0:e.status,e==null?void 0:e.resolvedBy,e==null?void 0:e.platformId,e==null?void 0:e.channelType,(_=e==null?void 0:e.dateRange)!=null&&_.from?e.dateRange.from.getTime():0,(j=e==null?void 0:e.dateRange)!=null&&j.to?e.dateRange.to.getTime():0]),p.useEffect(()=>{let C=!0;return(async()=>{try{const{data:M,error:F}=await wt.from("channels").select("id, display_name, provider, type").order("created_at",{ascending:!1});if(!C)return;if(F)throw F;m(M||[])}catch{if(!C)return;m([])}})(),()=>{C=!1}},[]);const y=(C,T)=>{const M={...g,[C]:T};v(M)},b=C=>{v(T=>({...T,channelType:C,platformId:""}))},w=()=>{const C={...g,dateRange:{from:a,to:o}};t(C),r(!1)},k=()=>{const C={dateRange:{},inbox:"",label:[],agent:"",status:"",resolvedBy:"",platformId:"",channelType:"all"};v(C),s(void 0),l(void 0),t(C)};return i.jsxs(fn,{open:n,onOpenChange:r,children:[i.jsx(qN,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(GL,{className:"h-4 w-4"})})}),i.jsxs(on,{className:"sm:max-w-[800px] max-h-[80vh] overflow-y-auto",children:[i.jsx(ln,{children:i.jsx(cn,{children:"Filter"})}),i.jsxs("div",{className:"grid gap-6 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Date Range"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ys,{children:[i.jsx(bs,{asChild:!0,children:i.jsxs(te,{variant:"outline",className:Se("w-full justify-start text-left font-normal",!a&&"text-muted-foreground"),children:[i.jsx(Xh,{className:"mr-2 h-4 w-4"}),a?vo(a,"dd-MM-yyyy"):"DD-MM-YYYY"]})}),i.jsx(Wi,{className:"w-auto p-0",align:"start",children:i.jsx(o_,{mode:"single",selected:a,onSelect:s,initialFocus:!0,className:"pointer-events-auto"})})]}),i.jsx("span",{className:"self-center text-muted-foreground",children:"-"}),i.jsxs(ys,{children:[i.jsx(bs,{asChild:!0,children:i.jsxs(te,{variant:"outline",className:Se("w-full justify-start text-left font-normal",!o&&"text-muted-foreground"),children:[i.jsx(Xh,{className:"mr-2 h-4 w-4"}),o?vo(o,"dd-MM-yyyy"):"DD-MM-YYYY"]})}),i.jsx(Wi,{className:"w-auto p-0",align:"start",children:i.jsx(o_,{mode:"single",selected:o,onSelect:l,initialFocus:!0,className:"pointer-events-auto"})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Inbox"}),i.jsxs(Ht,{value:g.inbox,onValueChange:C=>y("inbox",C),children:[i.jsx(Ut,{children:i.jsx(Dt,{placeholder:"All Inbox"})}),i.jsxs(zt,{children:[i.jsx(Ge,{value:"all",children:"All Inbox"}),i.jsx(Ge,{value:"whatsapp",children:"WhatsApp"}),i.jsx(Ge,{value:"telegram",children:"Telegram"}),i.jsx(Ge,{value:"email",children:"Email"})]})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Resolved By"}),i.jsxs(ys,{open:f,onOpenChange:d,children:[i.jsx(bs,{asChild:!0,children:i.jsx(te,{variant:"outline",role:"combobox",className:"w-full justify-between",children:((S=x.find(C=>C.user_id===g.resolvedBy))==null?void 0:S.display_name)||"Choose Agent"})}),i.jsx(Wi,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",sideOffset:4,children:i.jsxs(Rc,{children:[i.jsx(Mc,{placeholder:"Search Resolved By Agent"}),i.jsx(Dc,{children:"No agent found."}),i.jsx($c,{children:x.map(C=>i.jsx(Lc,{onSelect:()=>{y("resolvedBy",C.user_id),d(!1)},children:i.jsx("span",{className:"ml-2",children:C.display_name||"Unknown"})},C.user_id))})]})})]})]})}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Agent"}),i.jsxs(ys,{open:c,onOpenChange:u,children:[i.jsx(bs,{asChild:!0,children:i.jsx(te,{variant:"outline",role:"combobox",className:"w-full justify-between",children:((A=x.find(C=>C.user_id===g.agent))==null?void 0:A.display_name)||"Choose Agent"})}),i.jsx(Wi,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",sideOffset:4,children:i.jsxs(Rc,{children:[i.jsx(Mc,{placeholder:"Search Handled By Agent"}),i.jsx(Dc,{children:"No agent found."}),i.jsx($c,{children:x.map(C=>i.jsx(Lc,{onSelect:()=>{y("agent",C.user_id),u(!1)},children:i.jsx("span",{className:"ml-2",children:C.display_name||"Unknown"})},C.user_id))})]})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Channel Type"}),i.jsxs(Ht,{value:g.channelType,onValueChange:b,children:[i.jsx(Ut,{children:i.jsx(Dt,{placeholder:"All Channels"})}),i.jsxs(zt,{children:[i.jsx(Ge,{value:"all",children:"All Channels"}),i.jsx(Ge,{value:"whatsapp",children:"WhatsApp"}),i.jsx(Ge,{value:"telegram",children:"Telegram"}),i.jsx(Ge,{value:"web",children:"Live Chat"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Platform"}),i.jsxs(Ht,{value:g.platformId,onValueChange:C=>y("platformId",C),disabled:!g.channelType||g.channelType==="all",children:[i.jsx(Ut,{children:i.jsx(Dt,{placeholder:g.channelType&&g.channelType!=="all"?"Choose Platform":"Select channel type first"})}),i.jsxs(zt,{children:[i.jsx(Ge,{value:"all",children:"All Platforms"}),(()=>{const C=g.channelType&&g.channelType!=="all"?h.filter(T=>String(T.provider||"").toLowerCase()===String(g.channelType).toLowerCase()):[];return!g.channelType||g.channelType==="all"?null:C.length===0?i.jsx(Ge,{value:"__none",disabled:!0,children:"No platforms found for this channel type"}):C.map(T=>i.jsx(Ge,{value:T.id,children:T.display_name??"Unknown"},T.id))})()]})]})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),i.jsxs(Ht,{value:g.status,onValueChange:C=>y("status",C),children:[i.jsx(Ut,{children:i.jsx(Dt,{placeholder:"All Statuses"})}),i.jsxs(zt,{children:[i.jsx(Ge,{value:"all",children:"All Statuses"}),i.jsx(Ge,{value:"open",children:"Open"}),i.jsx(Ge,{value:"pending",children:"Pending"}),i.jsx(Ge,{value:"closed",children:"Closed"})]})]})]})})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(te,{variant:"outline",onClick:k,children:"Reset"}),i.jsx(te,{onClick:w,children:"Apply"})]})]})]})},Goe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co"},nd=Goe??{},qf=((nd==null?void 0:nd.VITE_WEBHOOK_BASE_URL)||"https://primary-production-376c.up.railway.app/webhook").replace(/\/$/,""),Yoe=(nd==null?void 0:nd.VITE_WEBHOOK_PROXY_SLUG)||"proxy-n8n",Fw=`${Xy}/functions/v1/${Yoe}`.replace(/\/$/,""),ea="route:",WT=e=>e.startsWith("/")?e:`/${e}`,dh=e=>e.startsWith(ea),_g=e=>dh(e)?e.slice(ea.length):null,Gn={BASE_URL:qf,LEGACY_BASE_URL:qf,PROXY_BASE_URL:Fw,ROUTE_PREFIX:ea,ENDPOINTS:{WHATSAPP:{GET_LOGIN_QR:`${ea}session.get_login_qr`,GET_SESSIONS:"/get_sessions",LOGOUT_SESSION:`${ea}session.logout`,CREATE_PLATFORM:"/whatsapp/create-platform",CREATE_SESSION:`${ea}session.create`,DISCONNECT_SESSION:"/disconnect_session",DELETE_SESSION:`${ea}session.delete`},TELEGRAM:{CREATE_PLATFORM:`${ea}telegram.create_platform`,SEND_MESSAGE:`${ea}telegram.send_message`,DELETE_WEBHOOK:`${ea}telegram.delete_webhook`,VERIFY_TOKEN:`${Xy}/functions/v1/telegram-verify-token`},AI_AGENT:{CHAT_SETTINGS:`${ea}chat.settings`,CHAT_TEST:`${ea}chat.test`},KNOWLEDGE:{FILE_UPLOAD:"/knowledge/file-upload-dev",FILE_DELETE:"/knowledge/file-delete-dev"},MESSAGE:{DEFAULT:"/send-message",SEND_MESSAGE:"/send-message",WHATSAPP_SEND_MESSAGE:`${ea}whatsapp.send_message`,TELEGRAM_SEND_MESSAGE:`${ea}telegram.send_message`,WEB_SEND_MESSAGE:`${ea}web.send_message`}},buildUrl:(e,t={})=>{if(!e)throw new Error("Endpoint must be provided");if(e.startsWith("http"))return e;if(!t.forceLegacy&&dh(e)){const n=_g(e);if(!n)throw new Error("Invalid proxy route key");return`${Fw}/${n}`}if(t.forceLegacy&&dh(e)){const n=_g(e);if(!n)throw new Error("Invalid proxy route key");return`${qf}/${n}`}return`${qf}${WT(e)}`},buildTestUrl:e=>{if(dh(e)){const n=_g(e);if(!n)throw new Error("Invalid proxy route key");return`${Fw}/${n}`}return`${qf.replace("/webhook","/webhook-test")}${WT(e)}`},isProxyEndpoint:dh,extractRouteKey:_g},yU={telegram:Gn.ENDPOINTS.MESSAGE.TELEGRAM_SEND_MESSAGE,whatsapp:Gn.ENDPOINTS.MESSAGE.WHATSAPP_SEND_MESSAGE,web:Gn.ENDPOINTS.MESSAGE.WEB_SEND_MESSAGE},bU=e=>{const t=(e||"").toLowerCase();return t==="wa"||t==="waha"||t==="whatsapp_cloud"?"whatsapp":t==="tg"||t==="tele"?"telegram":t},Bw=e=>{const t=bU(e),n=yU[t]||Gn.ENDPOINTS.MESSAGE.DEFAULT;Gn.ENDPOINTS.MESSAGE.SEND_MESSAGE=n},Xoe=e=>{const t=bU(e);return yU[t]||Gn.ENDPOINTS.MESSAGE.DEFAULT},Joe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co"},Qoe=()=>{const e=Joe??{};return(e==null?void 0:e.VITE_SUPABASE_ANON_KEY)??null};async function Ca(e,t={},n={}){const{forceLegacy:r=!1,skipAuth:a=!1}=n,s=Gn.buildUrl(e,{forceLegacy:r}),o=new Headers(t.headers),l=s.startsWith(Xy)&&s.includes("/functions/v1/");if((!r&&Gn.isProxyEndpoint(e)||l)&&!a&&!o.has("Authorization")){const{data:{session:u}}=await ae.auth.getSession(),f=u==null?void 0:u.access_token;if(!f)throw new Error("Unable to call webhook without an active Supabase session");o.set("Authorization",`Bearer ${f}`);const d=Qoe();d&&!o.has("apikey")&&o.set("apikey",d)}return fetch(s,{...t,headers:o})}let HT=0;const Zoe=1e3,kg=(e="incoming")=>{try{if(!(localStorage.getItem("audioNotifications")!=="false")||document.visibilityState!=="visible")return;const n=Date.now();if(n-HT<Zoe)return;HT=n;const r=new Audio;e==="incoming"?r.src="/tones/mixkit-message-pop-alert-2354.mp3":r.src="/tones/mixkit-long-pop-2358.wav",r.volume=.7,r.play().catch(()=>{})}catch{}},ele=()=>{const[e,t]=p.useState([]),[n,r]=p.useState([]),[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState(null),f=p.useRef({}),[d,h]=p.useState({}),m=p.useRef(null),g=(E=400)=>{try{m.current&&(clearTimeout(m.current),m.current=null)}catch{}m.current=window.setTimeout(()=>{document.visibilityState==="visible"&&(a||x())},E)},v=(E,I)=>{t(P=>{const O=P.map($=>$.id===E?{...$,last_message_preview:((I==null?void 0:I.body)||"").toString().replace(/\s+/g," ").trim()||"",last_message_direction:(I==null?void 0:I.direction)??null,last_message_role:(I==null?void 0:I.role)??null,last_msg_at:(I==null?void 0:I.created_at)||$.last_msg_at,unreplied:(I==null?void 0:I.direction)==="in"||(I==null?void 0:I.role)==="user"}:$).sort(($,L)=>{const N=new Date($.last_msg_at??$.created_at??0).getTime();return new Date(L.last_msg_at??L.created_at??0).getTime()-N});return console.log("Re-sorted conversations after message update"),O})},x=async E=>{try{s(!0),l(null),await pm();const I=E??f.current;E&&(f.current=E,h(E));let P=wt.from("threads").select(`
          *,
          contacts(name, phone, email),
          channels!inner(display_name, type, provider, external_id, logo_url, profile_photo_url),
          messages(id, body, role, direction, created_at, seq)
        `).order("last_msg_at",{ascending:!1}).order("created_at",{foreignTable:"messages",ascending:!1}).limit(1,{foreignTable:"messages"});const{dateRange:B,status:O,agent:$,resolvedBy:L,inbox:N,channelType:U,platformId:D}=I;O&&O!=="all"&&O!==""&&(P=P.eq("status",O)),$&&$!=="all"&&$!==""&&(P=P.eq("assignee_user_id",$)),L&&L!=="all"&&L!==""&&(P=P.eq("resolved_by_user_id",L)),N&&N!=="all"&&N!==""&&(P=P.eq("channels.provider",N)),U&&U!=="all"&&U!==""&&(P=P.eq("channels.provider",U)),D&&D!=="all"&&D!==""&&(P=P.eq("channel_id",D));const R=new Promise((se,Z)=>{const _e=setTimeout(()=>{clearTimeout(_e),Z(new Error("timeout"))},8e3)}),{data:K,error:Q}=await Promise.race([P,R]);if(Q)throw Q;const H=Array.from(new Set((K||[]).flatMap(se=>[se.assigned_by_user_id,se.assignee_user_id,se.resolved_by_user_id]).filter(Boolean)));let V={};if(H.length>0){const{data:se,error:Z}=await wt.from("users_profile").select("user_id, display_name").in("user_id",H);if(Z)throw Z;V=Object.fromEntries((se||[]).map(_e=>[_e.user_id,_e.display_name||""]))}let G=(K||[]).map(se=>{var ke,Ae,Pe,Ie,Ne,ze,at,pt,_t,re,pe,He,Ue,oe;const Z=Array.isArray(se.messages)&&se.messages.length>0?se.messages[0]:null,_e=((Z==null?void 0:Z.body)||"").toString().replace(/\s+/g," ").trim(),z=(Z==null?void 0:Z.direction)??null,q=(Z==null?void 0:Z.role)??null,ce=z==="in"||q==="user";return{...se,contact_name:((ke=se.contacts)==null?void 0:ke.name)||"Unknown Contact",contact_phone:((Ae=se.contacts)==null?void 0:Ae.phone)||"",contact_email:((Pe=se.contacts)==null?void 0:Pe.email)||"",channel_name:((Ie=se.channels)==null?void 0:Ie.display_name)||"Unknown Channel",channel_type:((Ne=se.channels)==null?void 0:Ne.type)||"web",channel_provider:((ze=se.channels)==null?void 0:ze.provider)||void 0,channel:{provider:(at=se.channels)==null?void 0:at.provider,type:(pt=se.channels)==null?void 0:pt.type,display_name:(_t=se.channels)==null?void 0:_t.display_name,external_id:(re=se.channels)==null?void 0:re.external_id,logo_url:((pe=se.channels)==null?void 0:pe.logo_url)||null,profile_photo_url:((He=se.channels)==null?void 0:He.profile_photo_url)||null},channel_logo_url:((Ue=se.channels)==null?void 0:Ue.logo_url)||((oe=se.channels)==null?void 0:oe.profile_photo_url)||null,last_message_preview:_e||"",last_message_direction:z,last_message_role:q,last_msg_at:(Z==null?void 0:Z.created_at)||se.last_msg_at,message_count:0,assigned:!!se.assignee_user_id,assigned_by_name:se.assigned_by_user_id&&V[se.assigned_by_user_id]||"",assignee_name:se.assignee_user_id&&V[se.assignee_user_id]||"",resolved_by_name:se.resolved_by_user_id&&V[se.resolved_by_user_id]||"",unreplied:ce}});if(B!=null&&B.from){const se=Pc(B.from).getTime();G=G.filter(Z=>new Date(Z.last_msg_at).getTime()>=se)}if(B!=null&&B.to){const se=eae(B.to).getTime();G=G.filter(Z=>new Date(Z.last_msg_at).getTime()<=se)}N&&N!=="all"&&N!==""&&(G=G.filter(se=>{var Z;return String(se.channel_provider||((Z=se.channel)==null?void 0:Z.provider)||"").toLowerCase()===String(N).toLowerCase()})),U&&U!=="all"&&U!==""&&(G=G.filter(se=>{var Z;return String(se.channel_provider||((Z=se.channel)==null?void 0:Z.provider)||"").toLowerCase()===String(U).toLowerCase()})),D&&D!=="all"&&D!==""&&(G=G.filter(se=>String(se.channel_id||"")===String(D)));const le=G.sort((se,Z)=>{const _e=new Date(se.last_msg_at??se.created_at??0).getTime();return new Date(Z.last_msg_at??Z.created_at??0).getTime()-_e});t(le)}catch(I){console.error("Error fetching conversations:",I),l(I instanceof Error?I.message:"Failed to fetch conversations")}finally{s(!1)}},y=async E=>{var I;try{l(null);const{data:P,error:B}=await ae.from("messages").select(`
          id,
          thread_id,
          direction,
          role,
          type,
          body,
          payload,
          actor_kind,
          actor_id,
          seq,
          in_reply_to,
          edited_at,
          edit_reason,
          created_at
        `).eq("thread_id",E).order("seq",{ascending:!0});if(B)throw B;const{data:O}=await ae.from("threads").select(`
          contacts(name, phone, email)
        `).eq("id",E).maybeSingle(),$=((I=O==null?void 0:O.contacts)==null?void 0:I.name)||"Unknown Contact",L=(P||[]).map(N=>{var U;return{...N,contact_name:$,contact_avatar:((U=$[0])==null?void 0:U.toUpperCase())||"U"}});r(L),u(E)}catch(P){console.error("Error fetching messages:",P),l(P instanceof Error?P.message:"Failed to fetch messages")}},b=async(E,I,P="assistant")=>{var B,O;try{l(null);const{data:$,error:L}=await ae.from("threads").select("channel_id, contact_id, channels(provider)").eq("id",E).single();if(L)throw L;const N={thread_id:E,direction:"out",role:P,type:"text",body:I,payload:{},actor_kind:"agent",actor_id:null},D={id:`tmp_${Math.random().toString(36).slice(2)}`,thread_id:E,direction:"out",role:P,type:"text",body:I,payload:{},actor_kind:"agent",actor_id:null,seq:0,in_reply_to:null,edited_at:null,edit_reason:null,created_at:new Date().toISOString(),contact_name:"",contact_avatar:"A",_status:"pending"};r(V=>[...V,D]);const{data:R,error:K}=await ae.from("messages").insert([N]).select().single();if(K)throw K;const{data:Q,error:H}=await ae.from("contacts").select("phone, external_id").eq("id",$.contact_id).single();H&&console.warn("Error fetching contact details:",H);try{const V=e.find(Z=>Z.id===E),ie=((B=V==null?void 0:V.channel)==null?void 0:B.provider)||((O=$==null?void 0:$.channels)==null?void 0:O.provider),G=Xoe(ie),le={channel_id:$.channel_id,contact_id:$.contact_id,contact_phone:(Q==null?void 0:Q.phone)||null,external_id:(Q==null?void 0:Q.external_id)||null,text:I,type:"text",direction:"out",role:P},se=await Ca(G,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(le)});se.ok||console.warn("Webhook call failed:",se.status,se.statusText)}catch(V){console.error("Error calling webhook:",V)}await y(E),v(E,{body:I,direction:"out",role:P,created_at:new Date().toISOString()});try{await Bt({action:"message.send",resource:"message",resourceId:(R==null?void 0:R.id)??null,context:{thread_id:E,role:P}})}catch{}return R}catch($){throw console.error("Error sending message:",$),l($ instanceof Error?$.message:"Failed to send message"),r(L=>{const N=[...L];for(let U=N.length-1;U>=0;U--)if(N[U]._status==="pending"){N[U]._status="error";break}return N}),$}},w=async(E,I)=>{var P;try{l(null);const B={org_id:((P=(await ae.auth.getUser()).data.user)==null?void 0:P.id)||"00000000-0000-0000-0000-000000000001",contact_id:E,channel_id:I,status:"open",assignee_user_id:null},{data:O,error:$}=await ae.from("threads").insert([B]).select().single();if($)throw $;await x();try{await Bt({action:"thread.create",resource:"thread",resourceId:(O==null?void 0:O.id)??null,context:{contact_id:E,channel_id:I}})}catch{}return O}catch(B){throw console.error("Error creating conversation:",B),l(B instanceof Error?B.message:"Failed to create conversation"),B}},k=async(E,I)=>{try{l(null);const{error:P}=await ae.from("threads").update({status:I}).eq("id",E);if(P)throw P;await x();try{await Bt({action:"thread.update_status",resource:"thread",resourceId:E,context:{status:I}})}catch{}}catch(P){throw console.error("Error updating thread status:",P),l(P instanceof Error?P.message:"Failed to update thread status"),P}},_=async(E,I)=>{var P,B,O;try{l(null);const{error:$}=await ae.rpc("takeover_thread",{p_thread_id:E});$&&console.warn("takeover_thread RPC failed; will attempt direct update",$);const{data:L}=await ae.auth.getUser(),N=((P=L==null?void 0:L.user)==null?void 0:P.id)||null;try{const{data:U}=await ae.from("threads").select("assignee_user_id").eq("id",E).single();if(!!!(U!=null&&U.assignee_user_id)&&N){const{error:R}=await ae.from("threads").update({assignee_user_id:N,assigned_by_user_id:N,assigned_at:new Date().toISOString(),handover_reason:"other:manual_takeover",ai_access_enabled:!1}).eq("id",E);R&&console.warn("Fallback assignment update failed",R)}}catch(U){console.warn("Failed verifying assignment state",U)}try{await wt.from("threads").update({ai_access_enabled:!1}).eq("id",E)}catch{}try{const{data:U}=await ae.auth.getUser(),D=((B=U==null?void 0:U.user)==null?void 0:B.id)||null;let R=null;if(D){const{data:K}=await ae.from("users_profile").select("display_name").eq("user_id",D).single();R=(K==null?void 0:K.display_name)||null}await wt.from("messages").insert([{thread_id:E,direction:null,role:"system",type:"event",body:`Conversation taken over by ${R||((O=U==null?void 0:U.user)==null?void 0:O.email)||"agent"}.`,payload:{event:"takeover",user_id:D}}])}catch(U){console.warn("Failed to insert takeover event message",U)}await x(),await y(E);try{await Bt({action:"thread.assign",resource:"thread",resourceId:E,context:{assignee_user_id:I}})}catch{}}catch($){throw console.error("Error assigning thread:",$),l($ instanceof Error?$.message:"Failed to assign thread"),$}},j=async(E,I)=>{var P,B;try{l(null);const{data:O}=await ae.auth.getUser(),$=((P=O==null?void 0:O.user)==null?void 0:P.id)||null,L=new Date().toISOString(),{error:N}=await ae.from("threads").update({assignee_user_id:I,assigned_by_user_id:$,assigned_at:L,handover_reason:"other:manual_assign",ai_access_enabled:!1}).eq("id",E);if(N)throw N;try{const U=[$,I].filter(Boolean);let D={};if(U.length>0){const{data:Q}=await ae.from("users_profile").select("user_id, display_name").in("user_id",U);D=Object.fromEntries((Q||[]).map(H=>[String(H.user_id),String(H.display_name||"")]))}const R=$&&(D[$]||((B=O==null?void 0:O.user)==null?void 0:B.email))||"agent",K=D[I]||"agent";await wt.from("messages").insert([{thread_id:E,direction:null,role:"system",type:"event",body:`Conversation assigned to ${K} by ${R}.`,payload:{event:"assign",assigned_to:I,assigned_by:$}}])}catch(U){console.warn("Failed to insert assign event message",U)}await x(),await y(E);try{await Bt({action:"thread.assign",resource:"thread",resourceId:E,context:{assignee_user_id:I}})}catch{}}catch(O){throw console.error("Error assigning thread to user:",O),l(O instanceof Error?O.message:"Failed to assign thread"),O}},S=async(E,I)=>{try{l(null);const{error:P}=await ae.from("thread_collaborators").insert([{thread_id:E,user_id:I}]);if(P)throw P;try{await Bt({action:"thread.add_participant",resource:"thread",resourceId:E,context:{user_id:I}})}catch{}}catch(P){throw console.error("Error adding thread participant:",P),l(P instanceof Error?P.message:"Failed to add thread participant"),P}},A=async(E,I)=>{try{l(null);const{error:P}=await ae.from("thread_collaborators").delete().eq("thread_id",E).eq("user_id",I);if(P)throw P;try{await Bt({action:"thread.remove_participant",resource:"thread",resourceId:E,context:{user_id:I}})}catch{}}catch(P){throw console.error("Error removing thread participant:",P),l(P instanceof Error?P.message:"Failed to remove thread participant"),P}},C=async(E,I)=>{try{l(null);const{error:P}=await ae.from("thread_labels").insert([{thread_id:E,label_id:I}]);if(P)throw P;try{await Bt({action:"thread.add_label",resource:"thread",resourceId:E,context:{label_id:I}})}catch{}}catch(P){throw console.error("Error adding thread label:",P),l(P instanceof Error?P.message:"Failed to add thread label"),P}},T=async(E,I)=>{try{l(null);const{error:P}=await ae.from("thread_labels").delete().eq("thread_id",E).eq("label_id",I);if(P)throw P;try{await Bt({action:"thread.remove_label",resource:"thread",resourceId:E,context:{label_id:I}})}catch{}}catch(P){throw console.error("Error removing thread label:",P),l(P instanceof Error?P.message:"Failed to remove thread label"),P}},M=async E=>{try{l(null);const{error:I}=await ae.from("threads").delete().eq("id",E);if(I)throw I;Ys.invalidatePattern("^query:threads"),t(P=>P.filter(O=>O.id!==E)),c===E&&(u(null),r([]));try{await Bt({action:"thread.delete",resource:"thread",resourceId:E})}catch{}await x()}catch(I){throw console.error("Error deleting thread:",I),l(I instanceof Error?I.message:"Failed to delete conversation"),I}};p.useEffect(()=>{g(10)},[]),p.useEffect(()=>{const E=()=>{try{t([]),r([]),u(null),l(null)}catch{}try{g(50)}catch{}};try{window.addEventListener(lm,E)}catch{}return()=>{try{window.removeEventListener(lm,E)}catch{}}},[]);const F=async()=>{try{const{data:E,error:I}=await wt.rpc("check_and_auto_resolve_threads");if(I){console.error("Auto-resolve check failed:",I);return}E&&E.length>0&&x()}catch(E){console.error("Auto-resolve check error:",E)}};return p.useEffect(()=>{const E=setInterval(()=>{document.visibilityState==="visible"&&F()},3e4);return()=>clearInterval(E)},[]),p.useEffect(()=>{const E=ae.channel("threads-realtime").on("postgres_changes",{event:"*",schema:"public",table:"threads"},()=>{document.visibilityState==="visible"&&g(200)}).subscribe();return()=>{try{ae.removeChannel(E)}catch{}}},[]),p.useEffect(()=>{const E=ae.channel("messages-realtime-for-convlist").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},I=>{const P=I.new;P&&P.direction==="in"&&document.visibilityState==="visible"?(kg("incoming"),v(P.thread_id,P),g(100),F()):P&&(P.role==="system"||P.type==="event")&&document.visibilityState==="visible"?(kg("incoming"),v(P.thread_id,P),g(200)):P&&P.direction==="out"&&(P.role==="agent"||P.role==="assistant")&&document.visibilityState==="visible"?(v(P.thread_id,P),g(200)):P&&P.role==="agent"&&P.direction==="out"&&document.visibilityState==="visible"&&F()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},()=>{document.visibilityState==="visible"&&g(500)}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages"},()=>{document.visibilityState==="visible"&&g(300)}).subscribe();return()=>{try{ae.removeChannel(E)}catch{}try{m.current&&(clearTimeout(m.current),m.current=null)}catch{}}},[]),p.useEffect(()=>{if(!c)return;const E=setInterval(()=>{y(c)},3e4),I=ae.channel(`messages-${c}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},P=>{const B=P.new;B&&B.direction==="in"&&kg("incoming"),r(O=>{var R,K,Q,H;if(O.some(V=>V.id===(B==null?void 0:B.id)))return O;const L=((R=O[0])==null?void 0:R.contact_name)||"",N=((K=O[0])==null?void 0:K.contact_avatar)||(((H=(Q=L==null?void 0:L[0])==null?void 0:Q.toUpperCase)==null?void 0:H.call(Q))??"U"),U={...B||{},contact_name:L,contact_avatar:N},D=[...O,U];return D.sort((V,ie)=>(V.seq??0)-(ie.seq??0)),D})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},P=>{const B=P.new;r(O=>{const $=O.findIndex(U=>U.id===(B==null?void 0:B.id));if($<0)return O;const L={...O[$],...B||{}},N=[...O];return N[$]=L,N.sort((U,D)=>(U.seq??0)-(D.seq??0)),N})}).on("postgres_changes",{event:"DELETE",schema:"public",table:"messages",filter:`thread_id=eq.${c}`},P=>{const B=P.old||P.new,O=B==null?void 0:B.id;O&&r($=>$.filter(L=>L.id!==O))}).subscribe(P=>{P==="CHANNEL_ERROR"&&(console.error("Error subscribing to messages for thread:",c),setTimeout(()=>{y(c)},1e3))});return()=>{clearInterval(E);try{ae.removeChannel(I)}catch{}}},[c]),{conversations:e,messages:n,loading:a,error:o,selectedThreadId:c,fetchConversations:x,fetchMessages:y,sendMessage:b,refreshMessages:()=>{c&&y(c)},enableAudioNotifications:()=>{localStorage.setItem("audioNotifications","true")},disableAudioNotifications:()=>{localStorage.setItem("audioNotifications","false")},testAudioNotification:()=>{kg("incoming")},createConversation:w,updateThreadStatus:k,assignThread:_,assignThreadToUser:j,addThreadParticipant:S,removeThreadParticipant:A,addThreadLabel:C,removeThreadLabel:T,deleteThread:M,checkAutoResolve:F,activeFilters:d}},uC=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),[o,l]=p.useState(0),c=p.useRef({page:1,limit:100,searchQuery:void 0,filters:void 0}),u=async(g=1,v=100,x,y)=>{var b,w,k,_;try{c.current={page:g,limit:v,searchQuery:x,filters:y},r(!0),s(null);const j=!!(y!=null&&y.chatStatus||(b=y==null?void 0:y.dateRange)!=null&&b.from||(w=y==null?void 0:y.dateRange)!=null&&w.to||(y==null?void 0:y.handledBy)==="assigned");let S=wt.from("contacts").select(`
          id, org_id, name, email, phone, locale, notes, created_at,
          threads${j?"!inner":""}(
            id, status, created_at, assignee_user_id,
            channels(display_name, provider, type)
          )
          `,{count:"exact"}).order("created_at",{ascending:!1});if(x&&(S=S.or(`name.ilike.%${x}%,phone.ilike.%${x}%,email.ilike.%${x}%`)),y&&(y.chatStatus&&(S=S.eq("threads.status",y.chatStatus)),y.handledBy==="assigned"&&(S=S.not("threads.assignee_user_id","is",null)),(k=y.dateRange)!=null&&k.from&&(S=S.gte("threads.created_at",y.dateRange.from)),(_=y.dateRange)!=null&&_.to)){const I=y.dateRange.to.length>10?y.dateRange.to:`${y.dateRange.to}T23:59:59.999Z`;S=S.lte("threads.created_at",I)}const A=(g-1)*v,C=A+v-1;S=S.range(A,C),S=S.order("created_at",{foreignTable:"threads",ascending:!1}).limit(1,{foreignTable:"threads"});const{data:T,error:M,count:F}=await S;if(M)throw M;let E=(T||[]).map(I=>{var $,L,N;const P=(I.threads||[])[0]||null,B=(($=P==null?void 0:P.channels)==null?void 0:$.display_name)||"",O=P!=null&&P.created_at?new Date(P.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(",",""):"";return{id:I.id,org_id:I.org_id,name:I.name,email:I.email,phone:I.phone,locale:I.locale,notes:I.notes,created_at:I.created_at,labelNames:"",inbox:B,channelProvider:((L=P==null?void 0:P.channels)==null?void 0:L.provider)||null,channelType:((N=P==null?void 0:P.channels)==null?void 0:N.type)||null,chatStatus:(P==null?void 0:P.status)||"",chatCreatedAt:O,chatCreatedAtISO:(P==null?void 0:P.created_at)||null,handledBy:P!=null&&P.assignee_user_id?"assigned":"unassigned"}});y&&(E=E.filter(I=>{var P,B;if(y.chatStatus&&I.chatStatus!==y.chatStatus||y.handledBy&&I.handledBy!==y.handledBy)return!1;if((P=y.dateRange)!=null&&P.from||(B=y.dateRange)!=null&&B.to){const O=new Date(I.created_at),$=y.dateRange.from?new Date(y.dateRange.from):null,L=y.dateRange.to?new Date(y.dateRange.to):null;if($&&O<$||L&&O>L)return!1}return!0})),t(E),l(F||0)}catch(j){console.error("Error fetching contacts:",j),s(j instanceof Error?j.message:"Failed to fetch contacts")}finally{r(!1)}},f=async g=>{try{s(null);const{data:v,error:x}=await wt.from("contacts").insert([{...g,org_id:"00000000-0000-0000-0000-000000000001"}]).select().single();if(x)throw x;await u();try{await Bt({action:"contact.create",resource:"contact",resourceId:(v==null?void 0:v.id)??null,context:g})}catch{}return v}catch(v){throw console.error("Error creating contact:",v),s(v instanceof Error?v.message:"Failed to create contact"),v}},d=async(g,v)=>{try{s(null);const{error:x}=await wt.from("contacts").update(v).eq("id",g);if(x)throw x;await u();try{await Bt({action:"contact.update",resource:"contact",resourceId:g,context:v})}catch{}}catch(x){throw console.error("Error updating contact:",x),s(x instanceof Error?x.message:"Failed to update contact"),x}},h=async g=>{try{s(null);const{error:v}=await ae.from("contacts").delete().eq("id",g);if(v)throw v;Ys.invalidatePattern("^query:contacts"),await u();try{await Bt({action:"contact.delete",resource:"contact",resourceId:g})}catch{}}catch(v){throw console.error("Error deleting contact:",v),s(v instanceof Error?v.message:"Failed to delete contact"),v}},m=async g=>{try{s(null);const{error:v}=await ae.from("contacts").delete().in("id",g);if(v)throw v;Ys.invalidatePattern("^query:contacts"),await u();try{await Bt({action:"contact.bulk_delete",resource:"contact",context:{ids:g}})}catch{}}catch(v){throw console.error("Error deleting contacts:",v),s(v instanceof Error?v.message:"Failed to delete contacts"),v}};return p.useEffect(()=>{u()},[]),p.useEffect(()=>{const g=()=>{try{t([]),l(0),s(null),r(!0)}catch{}try{const{page:v,limit:x,searchQuery:y,filters:b}=c.current;u(v,x,y,b)}catch{}};try{window.addEventListener(lm,g)}catch{}return()=>{try{window.removeEventListener(lm,g)}catch{}}},[]),{contacts:e,loading:n,error:a,totalCount:o,fetchContacts:u,createContact:f,updateContact:d,deleteContact:h,deleteMultipleContacts:m}},tr={MASTER_AGENT:"master_agent",SUPER_AGENT:"super_agent",AGENT:"agent"},Vt=p.forwardRef(({permission:e,permissions:t=[],requireAll:n=!1,fallback:r=null,children:a},s)=>{const{hasAnyPermission:o,hasAllPermissions:l,loading:c}=_r();if(c)return null;const u=e?[e,...t]:t,f=n?l(u):o(u),d=!Array.isArray(a)&&typeof a!="string"&&typeof a!="number";return f?d?i.jsx(KS,{ref:s,children:a}):i.jsx(i.Fragment,{children:a}):i.jsx(i.Fragment,{children:r})});var wU="AlertDialog",[tle,O3e]=kr(wU,[b5]),jo=b5(),jU=e=>{const{__scopeAlertDialog:t,...n}=e,r=jo(t);return i.jsx(LN,{...r,...n,modal:!0})};jU.displayName=wU;var nle="AlertDialogTrigger",_U=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=jo(n);return i.jsx(D5,{...a,...r,ref:t})});_U.displayName=nle;var rle="AlertDialogPortal",kU=e=>{const{__scopeAlertDialog:t,...n}=e,r=jo(t);return i.jsx(FN,{...r,...n})};kU.displayName=rle;var ale="AlertDialogOverlay",SU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=jo(n);return i.jsx(sb,{...a,...r,ref:t})});SU.displayName=ale;var rd="AlertDialogContent",[ile,sle]=tle(rd),ole=pL("AlertDialogContent"),NU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,s=jo(n),o=p.useRef(null),l=Nt(t,o),c=p.useRef(null);return i.jsx(Cre,{contentName:rd,titleName:CU,docsSlug:"alert-dialog",children:i.jsx(ile,{scope:n,cancelRef:c,children:i.jsxs(ob,{role:"alertdialog",...s,...a,ref:l,onOpenAutoFocus:De(a.onOpenAutoFocus,u=>{var f;u.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(ole,{children:r}),i.jsx(cle,{contentRef:o})]})})})});NU.displayName=rd;var CU="AlertDialogTitle",AU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=jo(n);return i.jsx(BN,{...a,...r,ref:t})});AU.displayName=CU;var EU="AlertDialogDescription",PU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=jo(n);return i.jsx(UN,{...a,...r,ref:t})});PU.displayName=EU;var lle="AlertDialogAction",TU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=jo(n);return i.jsx(zN,{...a,...r,ref:t})});TU.displayName=lle;var OU="AlertDialogCancel",IU=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=sle(OU,n),s=jo(n),o=Nt(t,a);return i.jsx(zN,{...s,...r,ref:o})});IU.displayName=OU;var cle=({contentRef:e})=>{const t=`\`${rd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${rd}\` by passing a \`${EU}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${rd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},ule=jU,dle=_U,fle=kU,RU=SU,MU=NU,DU=TU,$U=IU,LU=AU,FU=PU;const xb=ule,hle=dle,mle=fle,BU=p.forwardRef(({className:e,...t},n)=>i.jsx(RU,{className:Se("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));BU.displayName=RU.displayName;const Ap=p.forwardRef(({className:e,...t},n)=>i.jsxs(mle,{children:[i.jsx(BU,{}),i.jsx(MU,{ref:n,className:Se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Ap.displayName=MU.displayName;const Ep=({className:e,...t})=>i.jsx("div",{className:Se("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ep.displayName="AlertDialogHeader";const Pp=({className:e,...t})=>i.jsx("div",{className:Se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Pp.displayName="AlertDialogFooter";const Tp=p.forwardRef(({className:e,...t},n)=>i.jsx(LU,{ref:n,className:Se("text-lg font-semibold",e),...t}));Tp.displayName=LU.displayName;const Op=p.forwardRef(({className:e,...t},n)=>i.jsx(FU,{ref:n,className:Se("text-sm text-muted-foreground",e),...t}));Op.displayName=FU.displayName;const Ip=p.forwardRef(({className:e,...t},n)=>i.jsx(DU,{ref:n,className:Se(Cd(),e),...t}));Ip.displayName=DU.displayName;const Rp=p.forwardRef(({className:e,...t},n)=>i.jsx($U,{ref:n,className:Se(Cd({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Rp.displayName=$U.displayName;function ple({options:e,value:t,onChange:n,placeholder:r="Select...",searchPlaceholder:a="Search...",className:s,disabled:o=!1}){const[l,c]=p.useState(!1),u=p.useMemo(()=>{var f;return(f=e.find(d=>d.value===t))==null?void 0:f.label},[e,t]);return i.jsxs(ys,{open:l,onOpenChange:c,children:[i.jsx(bs,{asChild:!0,children:i.jsxs(te,{variant:"outline",role:"combobox","aria-expanded":l,className:Se("w-full justify-between font-normal",!t&&"text-muted-foreground",s),disabled:o,children:[i.jsx("span",{className:"truncate",children:t?u:r}),i.jsx(WL,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(Wi,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:i.jsxs(Rc,{children:[i.jsx(Mc,{placeholder:a}),i.jsxs(vb,{children:[i.jsx(Dc,{children:"No results found."}),i.jsx($c,{children:e.map(f=>i.jsxs(Lc,{value:f.label,onSelect:()=>{n(f.value),c(!1)},children:[i.jsx(Ay,{className:Se("mr-2 h-4 w-4",t===f.value?"opacity-100":"opacity-0")}),f.label]},f.value))})]})]})})]})}function gle({options:e,value:t=[],onChange:n,onAdd:r,onRemove:a,placeholder:s="Select...",searchPlaceholder:o="Search...",className:l,disabled:c=!1}){const[u,f]=p.useState(!1),d=p.useMemo(()=>t.map(v=>e.find(x=>x.value===v)||{value:v,label:v}),[t,e]),h=p.useMemo(()=>e.filter(v=>!t.includes(v.value)),[e,t]),m=v=>{if(t.includes(v))return;const x=[...t,v];n(x),r==null||r(v),f(!1)},g=v=>{const x=t.filter(y=>y!==v);n(x),a==null||a(v)};return i.jsxs("div",{className:Se("flex flex-col gap-2",l),children:[d.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-1",children:d.map(v=>i.jsxs(St,{variant:"secondary",className:"pr-1 py-1 flex items-center gap-1",children:[v.label,i.jsxs("button",{type:"button",className:"ml-1 rounded-full outline-none ring-offset-background focus:ring-2 focus:ring-ring focus:ring-offset-2 hover:bg-muted",onClick:x=>{x.preventDefault(),g(v.value)},disabled:c,children:[i.jsx(dp,{className:"h-3 w-3 text-muted-foreground hover:text-foreground"}),i.jsxs("span",{className:"sr-only",children:["Remove ",v.label]})]})]},v.value))}),i.jsxs(ys,{open:u,onOpenChange:f,children:[i.jsx(bs,{asChild:!0,children:i.jsxs(te,{variant:"outline",role:"combobox","aria-expanded":u,className:"w-full justify-between font-normal text-muted-foreground",disabled:c,children:[i.jsx("span",{children:s}),i.jsx(WL,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(Wi,{className:"w-[--radix-popover-trigger-width] p-0",align:"start",children:i.jsxs(Rc,{children:[i.jsx(Mc,{placeholder:o}),i.jsxs(vb,{children:[i.jsx(Dc,{children:"No results found."}),i.jsx($c,{children:h.map(v=>i.jsx(Lc,{value:v.label,onSelect:()=>m(v.value),children:v.label},v.value))})]})]})})]})]})}const vle=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),xle=({message:e,isLastMessage:t,highlighted:n=!1,matches:r=[],activeMatchOrder:a=-1})=>{const s=e.role==="assistant"||e.role==="agent"||e.direction==="out",o=e.role==="system"||e.type==="event"||e.type==="note",l=e.role==="assistant",c=e.role==="agent",u=()=>{const f=e.body||"";if(!f||r.length===0)return f;const d=[...r].sort((g,v)=>g.start-v.start),h=[];let m=0;return d.forEach(({start:g,length:v},x)=>{g>m&&h.push(f.slice(m,g));const y=f.slice(g,g+v);h.push({type:"highlight",content:y,index:x}),m=g+v}),m<f.length&&h.push(f.slice(m)),h.map((g,v)=>{if(typeof g=="string")return i.jsx("span",{children:g},`seg-${v}`);const x=g.index===a;return i.jsx("mark",{className:`rounded-sm px-0.5 text-current text-black ${x?"bg-orange-300":"bg-yellow-200"}`,children:g.content},`highlight-${g.index}`)})};return o?i.jsx("div",{className:"flex justify-center my-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:e.body||"System event"}),i.jsxs("div",{className:"flex items-center justify-center gap-2 mt-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),i.jsx("span",{children:""}),i.jsx("span",{children:"system"})]})]})}):i.jsx("div",{className:`flex ${s?"justify-end":"justify-start"} mb-3`,children:i.jsxs("div",{className:`flex ${s?"flex-row-reverse":"flex-row"} items-end gap-2 max-w-[75%]`,children:[i.jsxs(Vr,{className:"h-8 w-8",children:[i.jsx(Xs,{src:""}),i.jsx(Kr,{className:"text-xs",children:s?"A":e.contact_avatar})]}),i.jsxs("div",{className:`rounded-lg px-3 py-2 text-sm shadow-sm ${c?"bg-blue-600 text-white":l?"bg-blue-100 text-blue-900":"bg-muted text-foreground"} ${n?"ring-2 ring-yellow-300":""}`,children:[i.jsx("p",{className:"whitespace-pre-wrap",children:u()}),i.jsxs("div",{className:`mt-1 flex items-center gap-1 text-[10px] ${c?"text-blue-100":l?"text-blue-700":"text-muted-foreground"}`,children:[i.jsx("span",{children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),s&&(e._status==="pending"?i.jsx(Kt,{className:"h-3 w-3 animate-spin","aria-label":"pending"}):t?i.jsx(VV,{className:"h-3 w-3","aria-label":"sent"}):null)]})]})]})})};function yle(){var Mr,Co,ki,Si,is,ss,Ni,Ao;const[e,t]=xN(),[n,r]=p.useState(""),[a,s]=p.useState(""),[o,l]=p.useState(null),[c,u]=p.useState("assigned");p.useState(!1),p.useState(!1);const[f,d]=p.useState(""),[h,m]=p.useState(null),[g,v]=p.useState(0),x=p.useRef(null),y=p.useRef({}),b=f.trim(),{conversations:w,messages:k,loading:_,error:j,fetchConversations:S,fetchMessages:A,sendMessage:C,createConversation:T,addThreadParticipant:M,removeThreadParticipant:F,addThreadLabel:E,removeThreadLabel:I,assignThread:P,assignThreadToUser:B,deleteThread:O}=ele();uC();const{agents:$}=Ml(),{user:L}=Xr(),{hasRole:N,hasPermission:U}=_r(),[D,R]=p.useState(!1),[K,Q]=p.useState(null),[H,V]=p.useState(!1),ie=U("contacts.delete"),[G,le]=p.useState({}),se=p.useRef(!1),Z=p.useRef(!1),_e=p.useMemo(()=>`chat.threadFilters.v1:${(L==null?void 0:L.id)||"anon"}`,[L==null?void 0:L.id]),[z,q]=p.useState({}),[ce,ke]=p.useState({}),[Ae,Pe]=p.useState([]),[Ie,Ne]=p.useState(null),[ze,at]=p.useState([]),[pt,_t]=p.useState({}),re=p.useMemo(()=>$.filter(J=>String((J==null?void 0:J.primaryRole)||"").toLowerCase()==="super_agent").map(J=>({value:J.user_id,label:J.display_name||J.email||"Unknown Agent"})),[$]),pe=p.useMemo(()=>$.map(J=>({value:J.user_id,label:J.display_name||J.email||"Unknown Agent"})),[$]),He=p.useMemo(()=>Object.fromEntries($.map(J=>[String(J.user_id),String(J.display_name||J.email||"Unknown")])),[$]),Ue=p.useMemo(()=>J=>He[J]||pt[J]||J,[He,pt]),oe=p.useMemo(()=>{if(!o)return null;const J=w.find(ge=>ge.id===o);return(J==null?void 0:J.assignee_user_id)??null},[o,w]),ct=p.useMemo(()=>o?(Ie==null?void 0:Ie.threadId)===o?Ie.userId:oe:null,[o,Ie,oe]);p.useEffect(()=>{if(!o){Ne(null);return}(Ie==null?void 0:Ie.threadId)===o&&oe===Ie.userId&&Ne(null)},[o,oe,Ie]),p.useEffect(()=>{if(!ct){at([]);return}let J=!0;return(async()=>{const{data:rt,error:W}=await wt.from("super_agent_members").select("agent_user_id").eq("super_agent_id",ct);if(J){if(W){console.warn("Failed to fetch super agent members",W),at([]);return}at((rt||[]).map(Y=>String(Y.agent_user_id)))}})(),()=>{J=!1}},[ct]),p.useEffect(()=>{const J=Array.from(new Set([...ct?[ct]:[],...Ae,...ze].filter(Boolean)));if(J.length===0)return;const ge=J.filter(Y=>!He[Y]&&!pt[Y]);if(ge.length===0)return;let rt=!0;return(async()=>{try{const{data:Y,error:de}=await wt.from("users_profile").select("user_id, display_name").in("user_id",ge);if(!rt)return;if(de)throw de;const xe=Object.fromEntries((Y||[]).map(je=>[String(je.user_id),String(je.display_name||"")]));_t(je=>({...je,...xe}))}catch(Y){console.warn("Failed to fetch user labels",Y)}})(),()=>{rt=!1}},[ct,Ae,ze,He,pt]);const Pt=p.useMemo(()=>{if(!ct)return[];const J=new Set(ze);return pe.filter(ge=>J.has(ge.value)).map(ge=>({...ge,label:Ue(ge.value)}))},[pe,ct,ze,Ue]),kt=p.useMemo(()=>{const J=new Map;return Pt.forEach(ge=>J.set(ge.value,ge)),Ae.forEach(ge=>{J.has(ge)||J.set(ge,{value:ge,label:Ue(ge)})}),Array.from(J.values())},[Pt,Ae,Ue]);p.useEffect(()=>{if(!o){Pe([]);return}let J=!0;return(async()=>{const{data:rt}=await wt.from("thread_collaborators").select("user_id").eq("thread_id",o);J&&rt&&Pe(rt.map(W=>W.user_id))})(),()=>{J=!1}},[o]);const Xe=async J=>{if(o)try{await M(o,J),Pe(ge=>[...ge,J]),Fe.success("Collaborator added")}catch{}},ye=async J=>{if(o)try{await F(o,J),Pe(ge=>ge.filter(rt=>rt!==J)),Fe.success("Collaborator removed")}catch{}},it=p.useMemo(()=>{if(!b)return[];const J=vle(b);return J?k.flatMap(ge=>{const rt=ge.body||"";if(!rt)return[];const W=new RegExp(J,"gi"),Y=[];let de=0,xe;for(;(xe=W.exec(rt))!==null;)Y.push({messageId:ge.id,start:xe.index,length:xe[0].length,order:de}),de+=1,xe.index===W.lastIndex&&W.lastIndex++;return Y}):[]},[b,k]),$t=p.useMemo(()=>{if(it.length===0)return{};const J=it.reduce((ge,rt)=>(ge[rt.messageId]||(ge[rt.messageId]=[]),ge[rt.messageId].push({start:rt.start,length:rt.length}),ge),{});return Object.values(J).forEach(ge=>{ge.sort((rt,W)=>rt.start-W.start)}),J},[it]),ue=it.length,We=ue>0?it[g]:null,ne=J=>{const ge=(J??"").toString();return!ge||ge==="all"?"":ge},Ee=J=>{var ge,rt;return!!((ge=J.dateRange)!=null&&ge.from||(rt=J.dateRange)!=null&&rt.to||ne(J.inbox)||ne(J.channelType)||ne(J.platformId)||ne(J.status)||ne(J.agent)||ne(J.resolvedBy))},be=J=>{var W,Y;const ge=(W=J.dateRange)!=null&&W.from?J.dateRange.from.getTime():0,rt=(Y=J.dateRange)!=null&&Y.to?J.dateRange.to.getTime():0;return[ge,rt,ne(J.inbox),ne(J.channelType),ne(J.platformId),ne(J.status),ne(J.agent),ne(J.resolvedBy)].join("|")},Te=J=>{const ge=J.get("f_from"),rt=J.get("f_to"),W=ge?Number(ge):0,Y=rt?Number(rt):0,de=W||Y?{from:W?new Date(W):void 0,to:Y?new Date(Y):void 0}:void 0,xe=ne(J.get("f_inbox")),je=ne(J.get("f_channelType")),Oe=ne(J.get("f_platformId")),ht=ne(J.get("f_status")),xt=ne(J.get("f_agent")),mt=ne(J.get("f_resolvedBy")),st={};return de&&(st.dateRange=de),xe&&(st.inbox=xe),je&&(st.channelType=je),Oe&&(st.platformId=Oe),ht&&(st.status=ht),xt&&(st.agent=xt),mt&&(st.resolvedBy=mt),st},ut=(J,ge)=>{var W,Y;["f_from","f_to","f_inbox","f_channelType","f_platformId","f_status","f_agent","f_resolvedBy"].forEach(de=>J.delete(de)),(W=ge.dateRange)!=null&&W.from&&J.set("f_from",String(ge.dateRange.from.getTime())),(Y=ge.dateRange)!=null&&Y.to&&J.set("f_to",String(ge.dateRange.to.getTime())),ne(ge.inbox)&&J.set("f_inbox",ne(ge.inbox)),ne(ge.channelType)&&J.set("f_channelType",ne(ge.channelType)),ne(ge.platformId)&&J.set("f_platformId",ne(ge.platformId)),ne(ge.status)&&J.set("f_status",ne(ge.status)),ne(ge.agent)&&J.set("f_agent",ne(ge.agent)),ne(ge.resolvedBy)&&J.set("f_resolvedBy",ne(ge.resolvedBy))},ee=J=>{le(J);try{localStorage.setItem(_e,JSON.stringify({...J,dateRange:J.dateRange?{from:J.dateRange.from?J.dateRange.from.getTime():void 0,to:J.dateRange.to?J.dateRange.to.getTime():void 0}:void 0}))}catch{}const ge=new URLSearchParams(window.location.search);ut(ge,J),se.current=!0,t(ge,{replace:!0}),setTimeout(()=>{se.current=!1},0),S(J)};p.useEffect(()=>{v(0)},[b]),p.useEffect(()=>{ue>0&&g>=ue&&v(0)},[g,ue]),p.useEffect(()=>{if(!b||!We){m(null);return}m(We.messageId);const J=y.current[We.messageId];J&&J.scrollIntoView({behavior:"smooth",block:"center"})},[b,We]);const ve=()=>{ue!==0&&v(J=>(J+1)%ue)},Re=()=>{ue!==0&&v(J=>(J-1+ue)%ue)},Ke=e.get("contact"),ft=e.get("tab"),Rt=p.useRef(!1);p.useEffect(()=>{ft&&(Rt.current||(ft==="assigned"||ft==="unassigned"||ft==="resolved")&&ft!==c&&u(ft))},[ft]),p.useEffect(()=>{let J=!0;return(async()=>{try{const{data:rt,error:W}=await wt.from("channels").select("id, display_name, provider").order("created_at",{ascending:!1});if(!J)return;if(W)throw W;const Y={},de={};(rt||[]).forEach(xe=>{Y[String(xe.id)]=String(xe.display_name||"Unknown"),de[String(xe.id)]=String(xe.provider||"")}),q(Y),ke(de)}catch{if(!J)return;q({}),ke({})}})(),()=>{J=!1}},[]),p.useEffect(()=>{if(se.current)return;const J=Te(e);if(!Z.current&&(Z.current=!0,!Ee(J)))try{const W=localStorage.getItem(_e);if(W){const Y=JSON.parse(W||"{}"),de={...Y,dateRange:Y!=null&&Y.dateRange?{from:Y.dateRange.from?new Date(Number(Y.dateRange.from)):void 0,to:Y.dateRange.to?new Date(Number(Y.dateRange.to)):void 0}:void 0};le(de);const xe=new URLSearchParams(window.location.search);ut(xe,de),se.current=!0,t(xe,{replace:!0}),setTimeout(()=>{se.current=!1},0),S(de);return}}catch{}const ge=be(J),rt=be(G);ge!==rt&&(le(J),S(J))},[e.toString(),_e]);const Gt=p.useMemo(()=>[...w.filter(ge=>`${ge.contact_name} ${ge.last_message_preview}`.toLowerCase().includes(n.toLowerCase()))].sort((ge,rt)=>{const W=new Date(ge.last_msg_at??ge.created_at??0).getTime();return new Date(rt.last_msg_at??rt.created_at??0).getTime()-W}),[w,n]);p.useEffect(()=>{if(_||w.length===0)return;const J=w.filter(W=>W.status!=="closed"&&W.assigned).length,ge=w.filter(W=>W.status!=="closed"&&!W.assigned).length,rt=w.filter(W=>W.status==="closed").length;if(c==="assigned"&&J===0&&ge>0){u("unassigned");return}if((c==="assigned"||c==="unassigned")&&J===0&&ge===0&&rt>0){u("resolved");return}},[w,_,c]),p.useEffect(()=>{if(ft===c)return;const ge=new URLSearchParams(window.location.search);ge.set("tab",c),Rt.current=!0,t(ge,{replace:!0}),setTimeout(()=>{Rt.current=!1},0)},[c]),p.useEffect(()=>{var ge;if(!Ke||o||Gt.length===0)return;const J=Gt.find(rt=>rt.contact_id===Ke);J&&(l(J.id),J.status==="closed"?u("resolved"):u(J.assigned?"assigned":"unassigned"),A(J.id),(ge=J.channel)!=null&&ge.provider&&Bw(J.channel.provider))},[Ke,Gt]);const Je=p.useMemo(()=>o&&Gt.find(J=>J.id===o)||null,[o,Gt]);p.useEffect(()=>{(async()=>{try{if(!(Je!=null&&Je.id)||!(L!=null&&L.id)){R(!1);return}const{data:ge,error:rt}=await wt.from("thread_collaborators").select("user_id").eq("thread_id",Je.id).eq("user_id",L.id).limit(1);if(rt)throw rt;R(!!ge&&ge.length>0)}catch(ge){console.warn("Failed to check collaborator status",ge),R(!1)}})()},[Je==null?void 0:Je.id,L==null?void 0:L.id]);const en=async()=>{if(Je){if(!(L!=null&&L.id)){Fe.error("You must be signed in to take over");return}try{const J=N(tr.MASTER_AGENT)||N(tr.SUPER_AGENT);if(!D)if(J)try{const{data:ge}=await wt.from("thread_collaborators").select("user_id").eq("thread_id",Je.id).eq("user_id",L.id).limit(1);(!ge||ge.length===0)&&await M(Je.id,L.id),R(!0)}catch(ge){console.warn("Failed to ensure collaborator before takeover",ge),Fe.error("Please join as collaborator before taking over");return}else{Fe.error("Please join as collaborator before taking over");return}await P(Je.id,L.id),Fe.success("You are now assigned to this chat"),u("assigned"),await S()}catch{Fe.error("Failed to take over chat")}}};p.useLayoutEffect(()=>{const J=x.current;if(J)try{J.scrollTop=J.scrollHeight}catch{}},[k,o]);const Sn=async J=>{var rt;const ge=Gt.find(W=>W.id===J);(rt=ge==null?void 0:ge.channel)!=null&&rt.provider&&Bw(ge.channel.provider),l(J);try{const W=new URLSearchParams(window.location.search);W.has("contact")&&(W.delete("contact"),t(W,{replace:!0}))}catch{}await A(J)},ha=async()=>{const J=a.trim();if(!(!J||!o))try{const{checkAIMessageLimit:ge,autoAssignToSuperAgent:rt}=await ao(async()=>{const{checkAIMessageLimit:Y,autoAssignToSuperAgent:de}=await import("./aiMessageLimit-CzT5SAWG.js");return{checkAIMessageLimit:Y,autoAssignToSuperAgent:de}},[]),W=await ge(wt,o);if(W.isExceeded&&W.superAgentId){if((await rt(wt,o,W.superAgentId)).success){Fe.error(`Batas pesan AI telah tercapai (${W.currentCount}/${W.limit}). Percakapan telah dialihkan ke super agent dan AI access dinonaktifkan.`),await S();return}}else if(W.isExceeded&&!W.superAgentId){Fe.error(`Batas pesan AI telah tercapai (${W.currentCount}/${W.limit}). Tidak ada super agent yang tersedia untuk penanganan.`);return}if(L!=null&&L.id){const{data:Y}=await ae.from("users_profile").select("token_limit_enabled, max_tokens_per_day, max_tokens_per_month").eq("user_id",L.id).maybeSingle();if(Y!=null&&Y.token_limit_enabled){const de=new Date,xe=new Date(Date.UTC(de.getUTCFullYear(),de.getUTCMonth(),de.getUTCDate(),0,0,0)).toISOString(),je=new Date(Date.UTC(de.getUTCFullYear(),de.getUTCMonth(),1,0,0,0)).toISOString(),[{data:Oe},{data:ht}]=await Promise.all([ae.from("token_usage_logs").select("total_tokens").eq("user_id",L.id).gte("made_at",xe),ae.from("token_usage_logs").select("total_tokens").eq("user_id",L.id).gte("made_at",je)]),xt=(Oe||[]).reduce((st,dt)=>st+Number(dt.total_tokens||0),0),mt=(ht||[]).reduce((st,dt)=>st+Number(dt.total_tokens||0),0);if(Y.max_tokens_per_day&&xt>=Y.max_tokens_per_day){Fe.error("Daily token limit reached");return}if(Y.max_tokens_per_month&&mt>=Y.max_tokens_per_month){Fe.error("Monthly token limit reached");return}}}s(""),C(o,J,"assistant"),Fe.success("Message sent successfully")}catch{Fe.error("Failed to send message")}},ma=J=>{J.key==="Enter"&&!J.shiftKey&&(J.preventDefault(),ha())};p.useEffect(()=>{var J;(J=Je==null?void 0:Je.channel)!=null&&J.provider&&Bw(Je.channel.provider)},[(Mr=Je==null?void 0:Je.channel)==null?void 0:Mr.provider]);const pa=J=>{if(!J)return"";const ge=new Date(J),Y=(new Date().getTime()-ge.getTime())/(1e3*60*60);if(Y<24&&Y>=0)return ge.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(Y>=24&&Y<48)return"Yesterday";const de=String(ge.getMonth()+1).padStart(2,"0"),xe=String(ge.getDate()).padStart(2,"0"),je=ge.getFullYear();return`${de}/${xe}/${je}`},vr=J=>J.status==="closed"?i.jsx(St,{className:"bg-green-100 text-green-700 border-0",children:"Resolved"}):i.jsx(St,{className:J.assigned?"bg-blue-100 text-blue-700 border-0":"bg-secondary text-secondary-foreground",children:J.assigned?"Assigned":"Unassigned"}),Qr=J=>{const ge=J.last_msg_at||J.updated_at||J.created_at||"";return pa(ge)},Rr=async()=>{if(K){if(!ie){Fe.error("You do not have permission to delete conversations"),Q(null);return}try{V(!0),await O(K.id),Fe.success("Conversation deleted"),o===K.id&&l(null),Q(null)}catch{Fe.error("Failed to delete conversation")}finally{V(!1)}}},or=J=>{if(!ie){Fe.error("You do not have permission to delete conversations");return}Q(J)};return _?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Kt,{className:"h-8 w-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading conversations..."})]}):j?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("p",{className:"text-red-600 mb-2",children:["Error: ",j]}),i.jsxs(te,{onClick:()=>{S()},variant:"outline",children:[i.jsx(Py,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}):i.jsxs("div",{className:"grid w-full grid-cols-[360px_1fr_320px] h-[calc(100vh-120px)] gap-4",children:[i.jsxs("aside",{className:"rounded-lg border bg-card p-3",children:[i.jsxs("div",{className:"mb-3 pb-2 border-b flex items-center justify-between",children:[i.jsx("h2",{className:"text-sm font-medium",children:"Conversations"}),i.jsx("div",{className:"flex items-center gap-1",children:i.jsx(Koe,{value:{dateRange:G.dateRange||{},inbox:G.inbox||"",label:[],agent:G.agent||"",status:G.status||"",resolvedBy:G.resolvedBy||"",platformId:G.platformId||"",channelType:G.channelType||"all"},onFilterChange:ee})})]}),Ee(G)&&i.jsxs("div",{className:"mb-2 flex flex-wrap gap-1",children:[G.channelType&&i.jsxs(St,{variant:"secondary",children:["Channel: ",String(G.channelType).toLowerCase()==="web"?"Live Chat":String(G.channelType)]}),G.platformId&&i.jsxs(St,{variant:"secondary",children:["Platform: ",z[String(G.platformId)]||String(G.platformId)]}),G.status&&i.jsxs(St,{variant:"secondary",children:["Status: ",String(G.status)]}),G.agent&&i.jsxs(St,{variant:"secondary",children:["Agent: ",Ue(String(G.agent))]}),G.resolvedBy&&i.jsxs(St,{variant:"secondary",children:["Resolved By: ",Ue(String(G.resolvedBy))]}),(((Co=G.dateRange)==null?void 0:Co.from)||((ki=G.dateRange)==null?void 0:ki.to))&&i.jsxs(St,{variant:"secondary",children:["Date: ",(Si=G.dateRange)!=null&&Si.from?new Date(G.dateRange.from).toLocaleDateString():""," "," ",(is=G.dateRange)!=null&&is.to?new Date(G.dateRange.to).toLocaleDateString():""]}),G.inbox&&i.jsxs(St,{variant:"secondary",children:["Inbox: ",String(G.inbox)]})]}),i.jsxs("div",{className:"relative mb-3",children:[i.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),i.jsx(Ye,{placeholder:"Search...",value:n,onChange:J=>r(J.target.value),className:"pl-10 h-8 text-sm"})]}),i.jsxs(wl,{value:c,onValueChange:J=>{J!==c&&u(J)},className:"w-full",children:[i.jsxs(go,{className:"grid w-full grid-cols-[1fr_1fr_auto] mb-3 bg-white",children:[i.jsx(Kn,{value:"assigned",className:"text-xs border-b-2 border-transparent data-[state=active]:bg-blue-50 data-[state=active]:text-blue-600 data-[state=active]:border-blue-500",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("span",{className:"flex items-center",children:["Assigned",i.jsx(St,{variant:"secondary",className:"ml-2 h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:Gt.filter(J=>J.status!=="closed"&&J.assigned).length})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Lihat percakapan yang ditugaskan ke agen"})})]})}),i.jsx(Kn,{value:"unassigned",className:"text-xs border-b-2 border-transparent data-[state=active]:bg-red-50 data-[state=active]:text-red-600 data-[state=active]:border-red-500",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("span",{className:"flex items-center",children:["Unassigned",i.jsx(St,{variant:"secondary",className:"ml-2 h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:Gt.filter(J=>J.status!=="closed"&&!J.assigned).length})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Lihat percakapan yang menunggu penugasan"})})]})}),i.jsx(Kn,{value:"resolved",className:"justify-self-end h-8 px-2 rounded-full border-b-2 border-transparent data-[state=active]:bg-green-50 data-[state=active]:text-green-600 data-[state=active]:border-green-500","aria-label":"Resolved",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(oh,{className:"h-4 w-4"}),i.jsx(St,{variant:"secondary",className:"h-5 text-xs","aria-live":"polite","aria-atomic":"true",children:Gt.filter(J=>J.status==="closed").length})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Lihat percakapan yang telah diselesaikan"})})]})})]}),i.jsx(Mn,{value:"assigned",className:"mt-0",children:i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:i.jsx("div",{className:"space-y-1",children:Gt.filter(J=>J.status!=="closed"&&J.assigned).map(J=>{var ge,rt;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Sn(J.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===J.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(Vr,{className:"h-6 w-6",children:[i.jsx(Xs,{src:J.channel_logo_url||""}),i.jsx(Kr,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-medium truncate",children:J.contact_name}),i.jsx("p",{className:"text-xs text-gray-600 truncate mt-1",children:J.last_message_preview||""}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Vo,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:((ge=J.channel)==null?void 0:ge.display_name)||((rt=J.channel)==null?void 0:rt.provider)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[120px]",children:[i.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:Qr(J)}),i.jsx("div",{className:"mt-1",children:vr(J)})]})]})}),!J.contact_id&&ie&&i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:W=>{W.stopPropagation(),or(J)},children:i.jsx(Er,{className:"h-4 w-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Delete conversation"})})]})]},J.id)})})})}),i.jsx(Mn,{value:"unassigned",className:"mt-0",children:i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:i.jsx("div",{className:"space-y-1",children:Gt.filter(J=>J.status!=="closed"&&!J.assigned).map(J=>{var ge,rt;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Sn(J.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===J.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(Vr,{className:"h-6 w-6",children:[i.jsx(Xs,{src:""}),i.jsx(Kr,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-semibold truncate",children:J.contact_name}),i.jsx("p",{className:"text-xs text-gray-600 truncate",children:J.last_message_preview}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Vo,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:((ge=J.channel)==null?void 0:ge.display_name)||((rt=J.channel)==null?void 0:rt.provider)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[120px]",children:[i.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:Qr(J)}),i.jsx("div",{className:"mt-1",children:vr(J)})]})]})}),!J.contact_id&&ie&&i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:W=>{W.stopPropagation(),or(J)},children:i.jsx(Er,{className:"h-4 w-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Delete conversation"})})]})]},J.id)})})})}),i.jsx(Mn,{value:"resolved",className:"mt-0",children:i.jsx("div",{className:"h-[calc(100vh-280px)] overflow-y-auto",children:i.jsx("div",{className:"space-y-1",children:Gt.filter(J=>J.status==="closed").map(J=>{var ge;return i.jsxs("div",{className:"relative",children:[i.jsx("button",{type:"button",onClick:()=>Sn(J.id),className:`w-full p-3 pr-12 text-left transition-colors rounded-lg ${o===J.id?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[i.jsxs(Vr,{className:"h-6 w-6",children:[i.jsx(Xs,{src:""}),i.jsx(Kr,{className:"text-[10px]",children:""})]}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h3",{className:"text-sm font-semibold truncate",children:J.contact_name}),i.jsx("p",{className:"text-xs text-gray-600 truncate",children:J.last_message_preview}),i.jsxs("div",{className:"mt-1 flex items-center gap-1.5 min-w-0",children:[i.jsx(Vo,{className:"h-3.5 w-3.5 text-blue-500 shrink-0"}),i.jsx("span",{className:"text-xs text-gray-600 truncate",children:((ge=J.channel)==null?void 0:ge.display_name)||"Unknown"})]})]})]}),i.jsxs("div",{className:"flex flex-col items-end shrink-0 w-[120px]",children:[i.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:Qr(J)}),i.jsx("div",{className:"mt-1",children:vr(J)})]})]})}),!J.contact_id&&ie&&i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 z-10 h-7 w-7 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:rt=>{rt.stopPropagation(),or(J)},children:i.jsx(Er,{className:"h-4 w-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Delete conversation"})})]})]},J.id)})})})})]}),i.jsx(xb,{open:!!K,onOpenChange:J=>{J||Q(null)},children:i.jsxs(Ap,{children:[i.jsxs(Ep,{children:[i.jsx(Tp,{children:"Delete conversation?"}),i.jsx(Op,{children:"This conversation is not linked to a saved contact. Deleting it will remove all associated messages permanently."})]}),i.jsxs(Pp,{children:[i.jsx(Rp,{disabled:H,children:"Cancel"}),i.jsx(Ip,{className:"bg-red-600 hover:bg-red-700",onClick:Rr,disabled:H,children:H?"Deleting":"Delete"})]})]})})]}),i.jsx("article",{className:"flex min-h-[70vh] flex-col rounded-lg border bg-card",children:Je?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 border-b px-4 py-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Vr,{className:"h-10 w-10",children:[i.jsx(Xs,{src:""}),i.jsx(Kr,{className:"text-sm",children:Je.contact_name.charAt(0)})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-base font-semibold leading-tight",children:Je.contact_name}),Je.contact_phone&&i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:Je.contact_phone})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(ks,{className:"absolute left-2 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground"}),i.jsx(Ye,{value:f,onChange:J=>d(J.target.value),placeholder:"Search messages",className:"pl-7 h-8 w-44 text-xs"})]}),b&&i.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[i.jsx("span",{className:"text-xs font-medium min-w-[48px] text-right",children:ue>0?`${g+1}/${ue}`:"0/0"}),i.jsx(te,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:Re,disabled:ue===0,"aria-label":"Temukan sebelumnya",children:i.jsx(qL,{className:"h-4 w-4"})}),i.jsx(te,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8",onClick:ve,disabled:ue===0,"aria-label":"Temukan berikutnya",children:i.jsx(ka,{className:"h-4 w-4"})})]})]}),Je.status!=="closed"&&i.jsx(te,{size:"sm",className:"h-8 bg-green-600 hover:bg-green-700 text-white disabled:opacity-60",onClick:async()=>{if(Je.status==="closed")return;const{error:J}=await wt.from("threads").update({status:"closed",resolved_at:new Date().toISOString(),resolved_by_user_id:(L==null?void 0:L.id)??null,handover_reason:null}).eq("id",Je.id);J?Fe.error("Failed to resolve"):(Fe.success("Conversation resolved"),await S(),u("resolved"))},children:"Resolve"}),i.jsx(St,{className:Je.assigned?"bg-success text-success-foreground hover:bg-success":"bg-secondary text-secondary-foreground hover:bg-secondary",children:Je.assigned?"Assigned":"Unassigned"})]})]}),i.jsx(ub,{viewportRef:x,className:"flex-1 p-4",children:i.jsx("div",{className:"space-y-2",children:k.length===0?i.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No messages yet. Start the conversation!"}):k.map((J,ge)=>i.jsx("div",{ref:rt=>{y.current[J.id]=rt},children:i.jsx(xle,{message:J,isLastMessage:ge===k.length-1,highlighted:h===J.id,matches:$t[J.id]??[],activeMatchOrder:(We==null?void 0:We.messageId)===J.id?We.order:-1})},J.id))})}),i.jsx("div",{className:"border-t p-3",children:Je.status!=="closed"&&(Je.assigned?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ye,{placeholder:`Message ${Je.contact_name}...`,value:a,onChange:J=>s(J.target.value),onKeyDown:ma,className:"flex-1",disabled:!U("messages.create")}),i.jsx(te,{type:"button",onClick:ha,disabled:!a.trim()||!U("messages.create"),title:U("messages.create")?"Send message":"No permission to send messages","aria-label":"Send message",children:i.jsx(Qh,{className:"h-4 w-4"})})]}):i.jsx(Vt,{permission:"threads.update",children:i.jsx(te,{type:"button",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:en,disabled:!(L!=null&&L.id),children:"Takeover Chat"})}))})]}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Vo,{className:"h-12 w-12 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No conversation selected"}),i.jsx("p",{children:"Select a conversation from the sidebar to start chatting"})]})})}),i.jsx("aside",{className:"rounded-lg border bg-card p-4",children:Je?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold",children:Je.contact_name||"Unknown Contact"}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(Vo,{className:"h-4 w-4 text-blue-500"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(St,{variant:"outline",className:"text-xs",children:((ss=Je.channel)==null?void 0:ss.display_name)||((Ni=Je.channel)==null?void 0:Ni.provider)||"Unknown"}),((Ao=Je.channel)==null?void 0:Ao.type)&&i.jsx(St,{variant:"secondary",className:"text-xs",children:Je.channel.type})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Handled By"}),i.jsx(ple,{options:re,value:ct,onChange:async J=>{if(Je){try{const ge=Je.id,rt=J;Pe([]);try{const W=new Set([rt,(L==null?void 0:L.id)||""].filter(Boolean)),{data:Y}=await wt.from("thread_collaborators").select("user_id").eq("thread_id",ge),xe=(Y||[]).map(je=>String(je.user_id)).filter(je=>!W.has(je));xe.length>0&&await wt.from("thread_collaborators").delete().eq("thread_id",ge).in("user_id",xe)}catch(W){console.warn("Failed to clear collaborators on handled-by change",W)}}catch{}Ne({threadId:Je.id,userId:J}),await B(Je.id,J)}},placeholder:"Assign Agent",searchPlaceholder:"Search agent...",className:"w-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Collaborators"}),i.jsx(gle,{options:kt,value:Ae,onChange:()=>{},onAdd:Xe,onRemove:ye,placeholder:ct?"Add Collaborator":"Select handled by first",searchPlaceholder:"Search agent...",className:"w-full",disabled:!ct})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium mb-3",children:"Conversation Details"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Assigned By"}),i.jsx("span",{children:Je.assigned_by_name||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Handled By"}),i.jsx("span",{children:ct&&Ue(ct)||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Resolved By"}),i.jsx("span",{children:Je.resolved_by_name||""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"AI Handoff At"}),i.jsx("span",{children:Je.ai_handoff_at?new Date(Je.ai_handoff_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Assigned At"}),i.jsx("span",{children:Je.assigned_at?new Date(Je.assigned_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Created At"}),i.jsx("span",{children:Je.created_at?new Date(Je.created_at).toLocaleString():""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-muted-foreground",children:"Resolved At"}),i.jsx("span",{children:Je.resolved_at?new Date(Je.resolved_at).toLocaleString():""})]})]})]})]}):i.jsx("div",{className:"text-sm text-muted-foreground",children:"No conversation selected"})})]})}var yb="Checkbox",[ble,I3e]=kr(yb),[wle,dC]=ble(yb);function jle(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:s,form:o,name:l,onCheckedChange:c,required:u,value:f="on",internal_do_not_use_render:d}=e,[h,m]=Ia({prop:n,defaultProp:a??!1,onChange:c,caller:yb}),[g,v]=p.useState(null),[x,y]=p.useState(null),b=p.useRef(!1),w=g?!!o||!!g.closest("form"):!0,k={checked:h,disabled:s,setChecked:m,control:g,setControl:v,name:l,form:o,value:f,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:hl(a)?!1:a,isFormControl:w,bubbleInput:x,setBubbleInput:y};return i.jsx(wle,{scope:t,...k,children:_le(d)?d(k):r})}var UU="CheckboxTrigger",zU=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:s,value:o,disabled:l,checked:c,required:u,setControl:f,setChecked:d,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:g}=dC(UU,e),v=Nt(a,f),x=p.useRef(c);return p.useEffect(()=>{const y=s==null?void 0:s.form;if(y){const b=()=>d(x.current);return y.addEventListener("reset",b),()=>y.removeEventListener("reset",b)}},[s,d]),i.jsx(Qe.button,{type:"button",role:"checkbox","aria-checked":hl(c)?"mixed":c,"aria-required":u,"data-state":KU(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:v,onKeyDown:De(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:De(n,y=>{d(b=>hl(b)?!0:!b),g&&m&&(h.current=y.isPropagationStopped(),h.current||y.stopPropagation())})})});zU.displayName=UU;var fC=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:s,required:o,disabled:l,value:c,onCheckedChange:u,form:f,...d}=e;return i.jsx(jle,{__scopeCheckbox:n,checked:a,defaultChecked:s,disabled:l,required:o,onCheckedChange:u,name:r,form:f,value:c,internal_do_not_use_render:({isFormControl:h})=>i.jsxs(i.Fragment,{children:[i.jsx(zU,{...d,ref:t,__scopeCheckbox:n}),h&&i.jsx(VU,{__scopeCheckbox:n})]})})});fC.displayName=yb;var qU="CheckboxIndicator",WU=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,s=dC(qU,n);return i.jsx(pr,{present:r||hl(s.checked)||s.checked===!0,children:i.jsx(Qe.span,{"data-state":KU(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});WU.displayName=qU;var HU="CheckboxBubbleInput",VU=p.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:s,defaultChecked:o,required:l,disabled:c,name:u,value:f,form:d,bubbleInput:h,setBubbleInput:m}=dC(HU,e),g=Nt(n,m),v=oC(s),x=uN(r);p.useEffect(()=>{const b=h;if(!b)return;const w=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(w,"checked").set,j=!a.current;if(v!==s&&_){const S=new Event("click",{bubbles:j});b.indeterminate=hl(s),_.call(b,hl(s)?!1:s),b.dispatchEvent(S)}},[h,v,s,a]);const y=p.useRef(hl(s)?!1:s);return i.jsx(Qe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??y.current,required:l,disabled:c,name:u,value:f,form:d,...t,tabIndex:-1,ref:g,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});VU.displayName=HU;function _le(e){return typeof e=="function"}function hl(e){return e==="indeterminate"}function KU(e){return hl(e)?"indeterminate":e?"checked":"unchecked"}const gm=p.forwardRef(({className:e,...t},n)=>i.jsx(fC,{ref:n,className:Se("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(WU,{className:Se("flex items-center justify-center text-current"),children:i.jsx(Ay,{className:"h-4 w-4"})})}));gm.displayName=fC.displayName;const bb=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:Se("w-full caption-bottom text-sm",e),...t})}));bb.displayName="Table";const wb=p.forwardRef(({className:e,...t},n)=>i.jsx("thead",{ref:n,className:Se("[&_tr]:border-b",e),...t}));wb.displayName="TableHeader";const jb=p.forwardRef(({className:e,...t},n)=>i.jsx("tbody",{ref:n,className:Se("[&_tr:last-child]:border-0",e),...t}));jb.displayName="TableBody";const kle=p.forwardRef(({className:e,...t},n)=>i.jsx("tfoot",{ref:n,className:Se("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));kle.displayName="TableFooter";const Js=p.forwardRef(({className:e,...t},n)=>i.jsx("tr",{ref:n,className:Se("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Js.displayName="TableRow";const qn=p.forwardRef(({className:e,...t},n)=>i.jsx("th",{ref:n,className:Se("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));qn.displayName="TableHead";const Rn=p.forwardRef(({className:e,...t},n)=>i.jsx("td",{ref:n,className:Se("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Rn.displayName="TableCell";const Sle=p.forwardRef(({className:e,...t},n)=>i.jsx("caption",{ref:n,className:Se("mt-4 text-sm text-muted-foreground",e),...t}));Sle.displayName="TableCaption";const qa=p.forwardRef(({className:e,...t},n)=>i.jsx("textarea",{className:Se("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));qa.displayName="Textarea";function Nle(){var ct,Pt,kt,Xe;const{hasRole:e}=_r(),t=e("master_agent"),[n,r]=p.useState([]),[a,s]=p.useState(1),[o,l]=p.useState(""),[c,u]=p.useState(100),[f,d]=p.useState(null),[h,m]=p.useState(!0),[g,v]=p.useState(!1),[x,y]=p.useState({chatStatus:"",handledBy:"",dateRange:{}}),[b,w]=p.useState(!1),[k,_]=p.useState(!1),[j,S]=p.useState(!1),[A,C]=p.useState(""),[T,M]=p.useState(""),[F,E]=p.useState(""),[I,P]=p.useState(!1),[B,O]=p.useState(!1),[$,L]=p.useState(null),N=Za(),{hasPermission:U}=_r(),D=U("contacts.delete"),{contacts:R,loading:K,error:Q,totalCount:H,fetchContacts:V,deleteContact:ie,updateContact:G,deleteMultipleContacts:le}=uC();p.useEffect(()=>{const ye=setTimeout(()=>{V(a,c,o,x)},300);return()=>clearTimeout(ye)},[o,a,c,x]);const se=ye=>{r(ye?R.map(it=>it.id):[])},Z=(ye,it)=>{r(it?[...n,ye]:n.filter($t=>$t!==ye))},_e=()=>{if(n.length!==0){if(!D){Fe.error("You do not have permission to delete contacts");return}_(!0)}},z=ye=>{const it=new URLSearchParams({menu:"chat",contact:ye.id});N({pathname:"/chat",search:it.toString()}),Fe.success(`Opening conversation with ${ye.name||"contact"}`)},q=ye=>{L(ye),O(!0)},ce=ye=>{L(ye),C(ye.name||""),M(ye.phone||""),E(ye.notes||""),S(!0)},ke=async()=>{try{await le(n),r([]),_(!1),Fe.success(`Successfully deleted ${n.length} contact(s)`)}catch{Fe.error("Failed to delete contacts")}},Ae=async()=>{if($)try{P(!0),await G($.id,{name:A.trim()||null,phone:T.trim()||null,notes:F.trim()||null}),Fe.success("Contact updated"),S(!1)}catch{Fe.error("Failed to update contact")}finally{P(!1)}},Pe=()=>{V(a,c,o,x),Fe.info("Contacts refreshed")},Ie=(ye,it)=>{y($t=>({...$t,[ye]:it}))},Ne=(ye,it)=>{y($t=>({...$t,dateRange:{...$t.dateRange,[ye]:it}}))},ze=()=>{y({chatStatus:"",handledBy:"",dateRange:{}})},at=Object.values(x).some(ye=>typeof ye=="string"?ye!=="":Object.values(ye).some(it=>it!=="")),pt=n.length===R.length&&R.length>0,_t=n.length>0&&n.length<R.length,re=ye=>{f===ye?m(!h):(d(ye),m(!0))},pe=(()=>{if(!f)return R;const ye=[...R];return ye.sort((it,$t)=>{const ue=it[f],We=$t[f];if(ue==null&&We==null)return 0;if(ue==null)return h?1:-1;if(We==null)return h?-1:1;if(f==="chatCreatedAtISO"||f==="created_at"){const be=new Date(ue).getTime(),Te=new Date(We).getTime();return h?be-Te:Te-be}const ne=String(ue).toLowerCase(),Ee=String(We).toLowerCase();return ne<Ee?h?-1:1:ne>Ee?h?1:-1:0}),ye})(),He=(()=>{let ye=pe;return x.handledBy&&x.handledBy!==""&&(ye=ye.filter(it=>it.handledBy===x.handledBy)),ye})(),Ue=He.length,oe=ye=>{if(!ye||ye==="")return i.jsx("span",{className:"text-muted-foreground",children:""});const it=ye==="open"?"bg-blue-100 text-blue-700":ye==="pending"?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700";return i.jsx(St,{className:`${it} border-0`,children:ye})};return i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Contacts"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total Contacts: ",K?"...":`${Ue.toLocaleString()} of ${H.toLocaleString()}`]})]}),i.jsxs("div",{className:"flex gap-4 items-center justify-between",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs(ys,{open:g,onOpenChange:v,children:[i.jsx(bs,{asChild:!0,children:i.jsxs(te,{variant:"outline",className:"gap-2",children:[i.jsx(GL,{className:"w-4 h-4"}),"Filter",at&&i.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]})}),i.jsx(Wi,{className:"w-80 p-4",align:"start",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-medium",children:"Filter Contacts"}),at&&i.jsx(te,{variant:"ghost",size:"sm",onClick:ze,className:"h-8 px-2 text-xs",children:"Clear All"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Chat Status"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Filter berdasarkan status percakapan: Open (terbuka), Pending (menunggu), atau Closed (tertutup)"})})]})]}),i.jsxs(Ht,{value:x.chatStatus,onValueChange:ye=>Ie("chatStatus",ye==="all"?"":ye),children:[i.jsx(Ut,{className:"h-8",children:i.jsx(Dt,{placeholder:"All statuses"})}),i.jsxs(zt,{children:[i.jsx(Ge,{value:"all",children:"All statuses"}),i.jsx(Ge,{value:"open",children:"Open"}),i.jsx(Ge,{value:"pending",children:"Pending"}),i.jsx(Ge,{value:"closed",children:"Closed"})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Handled By"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Filter berdasarkan siapa yang menangani percakapan: Assigned (ditugaskan ke agen) atau Unassigned (belum ditugaskan)"})})]})]}),i.jsxs(Ht,{value:x.handledBy||"",onValueChange:ye=>Ie("handledBy",ye==="all"?"":ye),children:[i.jsx(Ut,{className:"h-8",children:i.jsx(Dt,{placeholder:"All agents"})}),i.jsxs(zt,{children:[i.jsx(Ge,{value:"all",children:"All"}),i.jsx(Ge,{value:"assigned",children:"Assigned"}),i.jsx(Ge,{value:"unassigned",children:"Unassigned"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"w-4 h-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Filter berdasarkan rentang tanggal kontak dibuat. Pilih tanggal mulai dan tanggal akhir untuk membatasi hasil pencarian"})})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("div",{children:i.jsx(Ye,{type:"date",placeholder:"From",value:x.dateRange.from,onChange:ye=>Ne("from",ye.target.value),className:"h-8 text-xs"})}),i.jsx("div",{children:i.jsx(Ye,{type:"date",placeholder:"To",value:x.dateRange.to,onChange:ye=>Ne("to",ye.target.value),className:"h-8 text-xs"})})]})]})]})]})})]}),i.jsxs("div",{className:"relative",children:[i.jsx(ks,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),i.jsx(Ye,{placeholder:"Cari berdasarkan Nama atau Telepon",className:"pl-10 pr-8 w-80",value:o,onChange:ye=>l(ye.target.value)}),o&&i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("button",{type:"button",onClick:()=>l(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","aria-label":"Clear search",children:i.jsx(dp,{className:"h-4 w-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Hapus pencarian"})})]})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"outline",size:"sm",onClick:Pe,disabled:K,children:i.jsx(Py,{className:`w-4 h-4 ${K?"animate-spin":""}`})})}),i.jsx(fe,{children:i.jsx("p",{children:"Segarkan daftar kontak"})})]})]}),i.jsxs("div",{className:"flex gap-2",children:[D&&i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs(te,{variant:n.length>0?"destructive":"outline",className:n.length>0?"bg-red-600 hover:bg-red-700 text-white":"",onClick:_e,disabled:n.length===0,children:["Delete Selected (",n.length,")"]})}),i.jsx(fe,{children:i.jsx("p",{children:"Hapus kontak yang dipilih"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"outline",onClick:async()=>{try{w(!0);const{data:ye,error:it}=await wt.from("contacts").select(`
                            id,
                            name,
                            phone,
                            email,
                            notes,
                            created_at,
                            threads!left(
                              status,
                              assignee_user_id,
                              created_at,
                              channels(display_name, provider, type)
                            )
                          `);if(it)throw it;const $t=(ye||[]).map(be=>{var ut,ee,ve;const Te=(be.threads||[])[0]||null;return{id:be.id,name:be.name??"",phone:be.phone??"",email:be.email??"",notes:be.notes??"",contact_created_at:be.created_at??"",chat_status:(Te==null?void 0:Te.status)??"",handled_by:(Te==null?void 0:Te.assignee_user_id)??"",chat_channel:((ut=Te==null?void 0:Te.channels)==null?void 0:ut.display_name)??"",chat_channel_provider:((ee=Te==null?void 0:Te.channels)==null?void 0:ee.provider)??"",chat_channel_type:((ve=Te==null?void 0:Te.channels)==null?void 0:ve.type)??"",chat_created_at:(Te==null?void 0:Te.created_at)??""}}),ue=[["ID","Name","Phone","Email","Notes","Contact Created At","Chat Status","Handled By","Chat Channel","Chat Channel Provider","Chat Channel Type","Chat Created At"].join(","),...$t.map(be=>{var Te;return[be.id,be.name,be.phone,be.email,(Te=be.notes)==null?void 0:Te.replace(/"/g,'""'),be.contact_created_at,be.chat_status,be.handled_by,be.chat_channel,be.chat_channel_provider,be.chat_channel_type,be.chat_created_at].map(ut=>`"${ut??""}"`).join(",")})].join(`
`),We=new Blob([ue],{type:"text/csv;charset=utf-8;"}),ne=URL.createObjectURL(We),Ee=document.createElement("a");Ee.href=ne,Ee.setAttribute("download",`contacts-${new Date().toISOString()}.csv`),document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee),URL.revokeObjectURL(ne),Fe.success("Contacts exported to CSV")}catch(ye){console.error("Failed to export contacts:",ye),Fe.error("Failed to export contacts")}finally{w(!1)}},disabled:b,children:b?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 animate-spin"}),"Exporting..."]}):"Export"})}),i.jsx(fe,{children:i.jsx("p",{children:"Ekspor daftar kontak"})})]})]})]})]}),Q&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",Q]})}),i.jsx(Me,{children:i.jsx(et,{className:"p-0",children:i.jsxs(bb,{children:[i.jsx(wb,{children:i.jsxs(Js,{children:[i.jsx(qn,{className:"w-12",children:i.jsx(gm,{checked:pt,onCheckedChange:se,"aria-label":"Select all contacts",className:_t?"data-[state=checked]:bg-blue-600":""})}),i.jsx(qn,{className:"text-xs py-2",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("span",{className:"cursor-help",children:"ACTION"})}),i.jsx(fe,{children:i.jsx("p",{children:"Aksi yang dapat dilakukan pada kontak (lihat, edit, hapus)"})})]})}),i.jsx(qn,{className:"text-xs py-2",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>re("name"),children:["NAME ",f==="name"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Nama kontak (klik untuk mengurutkan)"})})]})}),i.jsx(qn,{className:"text-xs py-2",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>re("phone"),children:["PHONE ",f==="phone"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Nomor telepon kontak (klik untuk mengurutkan)"})})]})}),i.jsx(qn,{className:"text-xs py-2",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>re("notes"),children:["NOTE ",f==="notes"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Catatan atau keterangan tambahan kontak (klik untuk mengurutkan)"})})]})}),i.jsx(qn,{className:"text-xs py-2",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>re("inbox"),children:["CHANNEL ",f==="inbox"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Saluran komunikasi kontak (klik untuk mengurutkan)"})})]})}),i.jsx(qn,{className:"text-xs py-2",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>re("channelType"),children:["PLATFORM ",f==="channelType"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Platform komunikasi (WhatsApp, Telegram, dll) (klik untuk mengurutkan)"})})]})}),i.jsx(qn,{className:"text-xs py-2",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>re("chatStatus"),children:["CHAT STATUS ",f==="chatStatus"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Status percakapan (Open, Pending, Closed) (klik untuk mengurutkan)"})})]})}),i.jsx(qn,{className:"text-xs py-2",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>re("chatCreatedAtISO"),children:["CREATED AT ",f==="chatCreatedAtISO"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Tanggal dan waktu kontak dibuat (klik untuk mengurutkan)"})})]})}),i.jsx(qn,{className:"text-xs py-2",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("button",{className:"flex items-center gap-1 text-xs",onClick:()=>re("handledBy"),children:["HANDLED BY ",f==="handledBy"?h?i.jsx(Oo,{className:"h-3.5 w-3.5"}):i.jsx(Po,{className:"h-3.5 w-3.5"}):i.jsx(To,{className:"h-3.5 w-3.5"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Agen yang menangani percakapan (klik untuk mengurutkan)"})})]})})]})}),i.jsx(jb,{children:K?i.jsx(Js,{children:i.jsx(Rn,{colSpan:10,className:"text-center py-8",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(Kt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Loading contacts..."})]})})}):R.length===0?i.jsx(Js,{children:i.jsx(Rn,{colSpan:10,className:"text-center py-8",children:i.jsx("div",{className:"text-muted-foreground",children:o?"No contacts found matching your search.":"No contacts found."})})}):He.map(ye=>{var it;return i.jsxs(Js,{className:`hover:bg-muted/50 ${n.includes(ye.id)?"bg-blue-50":""}`,children:[i.jsx(Rn,{children:i.jsx(gm,{checked:n.includes(ye.id),onCheckedChange:$t=>Z(ye.id,$t),"aria-label":`Select ${ye.name}`})}),i.jsx(Rn,{children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-blue-600 hover:bg-blue-700 text-white","aria-label":"View detailed conversation",onClick:()=>z(ye),variant:"ghost",title:"Open conversation",children:i.jsx(Vo,{className:"h-4 w-4"})})}),i.jsx(fe,{children:"Open conversation"})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-green-600 hover:bg-green-700 text-white","aria-label":"View contact details",onClick:()=>q(ye),variant:"ghost",title:"View details",children:i.jsx(ZS,{className:"h-4 w-4"})})}),i.jsx(fe,{children:"View details"})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white","aria-label":"Edit contact",onClick:()=>ce(ye),variant:"ghost",title:"Edit contact",children:i.jsx(ja,{className:"h-4 w-4"})})}),i.jsx(fe,{children:"Edit contact"})]})]})}),i.jsx(Rn,{className:"font-medium",children:i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx(Vr,{className:"h-8 w-8",children:i.jsx(Kr,{className:"text-xs",children:(it=(ye.name||ye.phone||"?")[0])==null?void 0:it.toUpperCase()})}),i.jsx("div",{className:"min-w-0",children:i.jsx("div",{className:"truncate",children:ye.name||"Unnamed Contact"})})]})}),i.jsx(Rn,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:ye.phone||"-"}),ye.phone&&i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{navigator.clipboard.writeText(ye.phone),Fe.success("Phone copied")},children:i.jsx(Z0,{className:"h-3 w-3"})})}),i.jsx(fe,{children:"Copy phone"})]})]})}),i.jsx(Rn,{children:ye.notes?i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("span",{className:"line-clamp-1 max-w-[260px] inline-block align-middle",children:ye.notes})}),i.jsx(fe,{className:"max-w-sm",children:ye.notes})]}):i.jsx("span",{className:"text-muted-foreground",children:"-"})}),i.jsx(Rn,{children:ye.inbox?i.jsx(St,{variant:"outline",children:ye.inbox}):""}),i.jsx(Rn,{children:ye.channelProvider?i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(St,{variant:"secondary",className:"capitalize",children:ye.channelProvider})}):i.jsx("span",{className:"text-muted-foreground",children:""})}),i.jsx(Rn,{children:oe(ye.chatStatus)}),i.jsx(Rn,{className:"font-mono text-sm whitespace-nowrap",children:ye.chatCreatedAt||"-"}),i.jsx(Rn,{children:ye.handledBy&&ye.handledBy!==""?i.jsx(St,{className:"bg-purple-100 text-purple-700 border-0",children:ye.handledBy}):i.jsx("span",{className:"text-muted-foreground",children:""})})]},ye.id)})})]})})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(te,{variant:"outline",size:"sm",disabled:a===1||K,onClick:()=>s(a-1),children:i.jsx(QS,{className:"w-4 h-4"})}),i.jsxs("span",{className:"text-sm",children:["Page ",i.jsx("span",{className:"font-medium",children:a})," of ",i.jsx("span",{className:"font-medium",children:Math.max(1,Math.ceil(Ue/c))})]}),i.jsx(te,{variant:"outline",size:"sm",disabled:a>=Math.ceil(Ue/c)||K,onClick:()=>s(a+1),children:i.jsx(Ey,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:"Items per page:"}),i.jsxs(Ht,{value:c.toString(),onValueChange:ye=>u(parseInt(ye)),children:[i.jsx(Ut,{className:"w-20 h-8",children:i.jsx(Dt,{})}),i.jsxs(zt,{children:[i.jsx(Ge,{value:"50",children:"50"}),i.jsx(Ge,{value:"100",children:"100"}),i.jsx(Ge,{value:"200",children:"200"})]})]}),i.jsx("span",{children:"rows"})]}),i.jsxs("span",{children:["Total: ",i.jsx("span",{className:"font-medium",children:Ue.toLocaleString()})]})]})]}),i.jsx(xb,{open:k,onOpenChange:_,children:i.jsxs(Ap,{children:[i.jsxs(Ep,{children:[i.jsx(Tp,{children:"Are you sure?"}),i.jsxs(Op,{children:["This action cannot be undone. This will permanently delete ",n.length," contact",n.length>1?"s":"","."]})]}),i.jsxs(Pp,{children:[i.jsx(Rp,{children:"Cancel"}),i.jsxs(Ip,{onClick:ke,className:"bg-red-600 hover:bg-red-700",children:["Delete ",n.length," Contact",n.length>1?"s":""]})]})]})}),i.jsx(fn,{open:j,onOpenChange:S,children:i.jsxs(on,{children:[i.jsx(ln,{children:i.jsx(cn,{children:"Edit Contact"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(qe,{children:"Name"}),i.jsx(Ye,{value:A,onChange:ye=>C(ye.target.value),placeholder:"Full name"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(qe,{children:"Phone"}),i.jsx(Ye,{value:T,onChange:ye=>M(ye.target.value),placeholder:"Phone number"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(qe,{children:"Notes"}),i.jsx(qa,{value:F,onChange:ye=>E(ye.target.value),placeholder:"Notes"})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx(te,{variant:"outline",onClick:()=>S(!1),disabled:I,children:"Cancel"}),i.jsx(te,{onClick:Ae,disabled:I,className:"bg-blue-600 hover:bg-blue-700",children:I?"Saving":"Save"})]})]})]})}),i.jsx(fn,{open:B,onOpenChange:O,children:i.jsxs(on,{className:"max-w-2xl",children:[i.jsx(ln,{children:i.jsxs(cn,{className:"flex items-center gap-3",children:[i.jsx(Vr,{className:"h-10 w-10",children:i.jsx(Kr,{children:((Pt=(ct=$==null?void 0:$.name)==null?void 0:ct[0])==null?void 0:Pt.toUpperCase())||((Xe=(kt=$==null?void 0:$.phone)==null?void 0:kt[0])==null?void 0:Xe.toUpperCase())||"?"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-semibold",children:($==null?void 0:$.name)||"Unnamed Contact"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Contact Details"})]})]})}),$&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Name"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qv,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:$.name||"Unnamed Contact"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(tK,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{children:$.phone||"-"}),$.phone&&i.jsx(te,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{navigator.clipboard.writeText($.phone),Fe.success("Phone copied to clipboard")},children:i.jsx(Z0,{className:"h-3 w-3"})})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),i.jsx("div",{className:"p-3 bg-muted rounded-md",children:$.notes?i.jsx("p",{className:"text-sm",children:$.notes}):i.jsx("span",{className:"text-muted-foreground text-sm",children:"No notes"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Label Names"}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx("span",{children:$.labelNames||"-"})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Inbox"}),i.jsx("div",{className:"flex items-center gap-2",children:$.inbox?i.jsx(St,{variant:"outline",children:$.inbox}):i.jsx("span",{className:"text-muted-foreground",children:""})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Chat Status"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(cv,{className:"h-4 w-4 text-muted-foreground"}),oe($.chatStatus)]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Handled By"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qv,{className:"h-4 w-4 text-muted-foreground"}),$.handledBy&&$.handledBy!==""?i.jsx(St,{className:"bg-purple-100 text-purple-700 border-0",children:$.handledBy}):i.jsx("span",{className:"text-muted-foreground",children:""})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Contact Created At"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xh,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-sm",children:$.created_at?new Date($.created_at).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{className:"text-sm font-medium text-muted-foreground",children:"Chat Created At"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xh,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"font-mono text-sm",children:$.chatCreatedAt||"-"})]})]})]}),t&&$&&i.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[i.jsxs(qe,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[i.jsx(YL,{className:"h-4 w-4"}),"Contact UUID"]}),i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-md",children:[i.jsx("code",{className:"flex-1 font-mono text-xs text-foreground break-all",children:$.id}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 flex-shrink-0",onClick:()=>{navigator.clipboard.writeText($.id),Fe.success("Contact UUID copied to clipboard")},children:i.jsx(Z0,{className:"h-4 w-4"})})}),i.jsx(fe,{children:"Copy UUID"})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique identifier for this contact. Use this UUID for GDPR deletion requests or system integrations."})]}),i.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[i.jsxs(te,{onClick:()=>z($),className:"flex-1",children:[i.jsx(Vo,{className:"h-4 w-4 mr-2"}),"View Conversation"]}),i.jsxs(te,{variant:"outline",onClick:()=>ce($),className:"flex-1",children:[i.jsx(ja,{className:"h-4 w-4 mr-2"}),"Edit Contact"]})]})]})]})})]})}const GU=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),o=async()=>{try{r(!0),s(null);const{data:{user:d}}=await ae.auth.getUser();if(!d){t([]);return}const{data:h,error:m}=await ae.from("org_members").select("org_id").eq("user_id",d.id);if(m||!h||h.length===0){t([]);return}const g=h.map(M=>M.org_id),{data:v}=await ae.from("user_roles").select("role_id").eq("user_id",d.id);let x=!1,y=!1,b=!1;if(v&&v.length>0){const M=v.map(I=>I.role_id),{data:F}=await ae.from("roles").select("id, name").in("id",M),E=(F||[]).map(I=>(I.name||"").toLowerCase());x=E.includes("master_agent"),y=E.includes("super_agent"),b=E.includes("agent")&&!x&&!y}let w=null;if(b){const{data:M}=await ae.from("channel_agents").select("channel_id").eq("user_id",d.id);w=new Set((M||[]).map(F=>F.channel_id))}const{data:k,error:_}=await ae.from("channels").select(`
          *
        `).in("org_id",g).order("created_at",{ascending:!1});if(_){console.error("Error fetching channels:",_),s(_.message);return}const{data:j,error:S}=await ae.from("org_members").select(`
          org_id,
          user_id,
          role,
          v_users!inner (
            display_name,
            email
          )
        `).in("org_id",g);S&&console.error("Error fetching org members for platforms:",S);const A={};for(const M of j||[]){const F=M.org_id;A[F]||(A[F]=[]),A[F].push(M)}const C=(k||[]).filter(M=>w?w.has(M.id):!0),T=await Promise.all(C.map(async M=>{try{const{data:F}=await ae.from("channel_agents").select("user_id").eq("channel_id",M.id),E=(F||[]).map(B=>B.user_id);let I=[];if(E.length>0){const[B,O]=await Promise.all([ae.from("users_profile").select("user_id, display_name").in("user_id",E),ae.from("v_users").select("id, display_name, email").in("id",E)]),$=B.data||[],L=O.data||[],N={};L.forEach(U=>{N[U.id]={display_name:U.display_name,email:U.email}}),$.forEach(U=>{var D,R;N[U.user_id]={display_name:U.display_name??((D=N[U.user_id])==null?void 0:D.display_name),email:(R=N[U.user_id])==null?void 0:R.email}}),I=Object.entries(N).map(([U,D])=>({user_id:U,...D}))}const P=E.map(B=>{const O=I.find($=>$.user_id===B||$.id===B)||{};return{user_id:B,display_name:O.display_name||(O==null?void 0:O.display_name),email:O.email}});return{...M,provider:M.provider,status:M.is_active?"active":"inactive",human_agents:P,super_agent_id:M.super_agent_id??null,credentials:(M==null?void 0:M.credentials)??null}}catch{return{...M,provider:M.provider,status:M.is_active?"active":"inactive",human_agents:[],super_agent_id:M.super_agent_id??null,credentials:(M==null?void 0:M.credentials)??null}}}));t(T)}catch(d){console.error("Error fetching platforms:",d),s("Failed to fetch platforms")}finally{r(!1)}},l=async d=>{var h;try{s(null);const{data:{user:m}}=await ae.auth.getUser();if(!m)throw new Error("User not authenticated");const{data:g,error:v}=await ae.from("org_members").select("org_id").eq("user_id",m.id).limit(1);if(v)throw v;const x=(h=g==null?void 0:g[0])==null?void 0:h.org_id;if(!x)throw new Error("User not found in any organization");if(!d.ai_profile_id)throw new Error("AI agent is required when creating a platform");const{data:y,error:b}=await ae.from("ai_profiles").select("super_agent_id").eq("id",d.ai_profile_id).single();if(b)throw b;const w=y==null?void 0:y.super_agent_id;if(!w)throw new Error("Selected AI agent does not have a super agent assigned. Please update the AI agent first.");const k=d.provider==="whatsapp"?String(d.display_name||"").toLowerCase().replace(/\s/g,""):null,{data:_,error:j}=await ae.from("channels").insert({org_id:x,display_name:d.display_name,credentials:d.provider==="whatsapp"?{waha_session_name:k}:{},provider:d.provider,type:"inbox",profile_photo_url:d.profile_photo_url,ai_profile_id:d.ai_profile_id,super_agent_id:w,is_active:!0,external_id:d.provider==="whatsapp"?k:null}).select().single();if(j)throw j;if(d.human_agent_ids&&d.human_agent_ids.length>0){const S=d.human_agent_ids.map(C=>({channel_id:_.id,user_id:C})),{error:A}=await ae.from("channel_agents").insert(S);A&&console.warn("Failed to attach channel agents on create:",A)}await o();try{await Bt({action:"channel.create",resource:"channel",resourceId:(_==null?void 0:_.id)??null,context:{...d,super_agent_id:w}})}catch{}return _}catch(m){throw console.error("Error creating platform:",m),s(m.message||"Failed to create platform"),m}},c=async(d,h)=>{try{s(null);const m={};if(typeof h.display_name<"u"&&(m.display_name=h.display_name),typeof h.profile_photo_url<"u"&&(m.profile_photo_url=h.profile_photo_url),typeof h.ai_profile_id<"u"&&(m.ai_profile_id=h.ai_profile_id,h.ai_profile_id)){const{data:g,error:v}=await ae.from("ai_profiles").select("super_agent_id").eq("id",h.ai_profile_id).single();if(v)throw v;const x=g==null?void 0:g.super_agent_id;if(!x)throw new Error("Selected AI agent does not have a super agent assigned. Please update the AI agent first.");m.super_agent_id=x}if(typeof h.provider<"u"&&(m.provider=h.provider),Object.keys(m).length>0){const{error:g}=await ae.from("channels").update(m).eq("id",d);if(g)throw g}if(h.human_agent_ids!==void 0){const{error:g}=await ae.from("channel_agents").delete().eq("channel_id",d);if(g&&console.error("Error removing human agents:",g),h.human_agent_ids.length>0){const v=h.human_agent_ids.map(y=>({channel_id:d,user_id:y})),{error:x}=await ae.from("channel_agents").insert(v);x&&console.error("Error adding human agents:",x)}}await o();try{await Bt({action:"channel.update",resource:"channel",resourceId:d,context:h})}catch{}}catch(m){throw console.error("Error updating platform:",m),s(m.message||"Failed to update platform"),m}},u=async(d,h,m)=>{const g=[/^image\//i],v=/\.(png|jpe?g|webp)$/i;if(!(g.some(w=>w.test(h.type||""))||v.test(h.name||"")))throw new Error("Only image files are allowed (PNG, JPG, WEBP).");const y=5*1024*1024;if(typeof h.size=="number"&&h.size>y)throw new Error("Image is too large. Maximum size is 5 MB.");async function b(w){try{if(typeof window>"u")return null;const k=document.createElement("img"),_=URL.createObjectURL(w);try{await new Promise((C,T)=>{k.onload=()=>C(),k.onerror=T,k.src=_})}finally{URL.revokeObjectURL(_)}const j=document.createElement("canvas");j.width=k.naturalWidth||k.width,j.height=k.naturalHeight||k.height;const S=j.getContext("2d");return S?(S.drawImage(k,0,0,j.width,j.height),await new Promise(C=>j.toBlob(T=>C(T),"image/png"))):null}catch{return null}}try{const{data:{user:w}}=await ae.auth.getUser();if(!w)throw new Error("User not authenticated");let k=m||"";if(!k){const{data:I,error:P}=await ae.from("channels").select("org_id").eq("id",d).single();if(P)throw P;k=I==null?void 0:I.org_id}if(!k)throw new Error("Missing org_id for channel");const _="channel-assets",j=`${k}/${d}/profile/avatar.png`,S=await b(h),A=S||h,C=S?"image/png":h.type||"image/*",{error:T}=await ae.storage.from(_).upload(j,A,{cacheControl:"31536000",upsert:!0,contentType:C});if(T)throw T;const{data:M}=ae.storage.from(_).getPublicUrl(j),F=M==null?void 0:M.publicUrl,{error:E}=await ae.from("channels").update({logo_url:F,profile_photo_url:F}).eq("id",d);if(E)throw E;try{await Bt({action:"channel.avatar.update",resource:"channel",resourceId:d,context:{objectPath:j}})}catch{}return F}catch(w){throw console.error("Error uploading channel avatar:",w),new Error((w==null?void 0:w.message)||"Failed to upload channel avatar")}},f=async(d,h)=>{try{const{data:{user:m}}=await ae.auth.getUser();if(!m)throw new Error("User not authenticated");let g=h||"";if(!g){const{data:b,error:w}=await ae.from("channels").select("org_id").eq("id",d).single();if(w)throw w;g=b==null?void 0:b.org_id}if(!g)throw new Error("Missing org_id for channel");const v="channel-assets",x=`${g}/${d}/profile/avatar.png`;try{await ae.storage.from(v).remove([x])}catch{}const{error:y}=await ae.from("channels").update({logo_url:null,profile_photo_url:null}).eq("id",d);if(y)throw y;try{await Bt({action:"channel.avatar.delete",resource:"channel",resourceId:d,context:{objectPath:x}})}catch{}}catch(m){throw console.error("Error deleting channel avatar:",m),new Error((m==null?void 0:m.message)||"Failed to delete channel avatar")}};return p.useEffect(()=>{o()},[]),{platforms:e,loading:n,error:a,fetchPlatforms:o,createPlatform:l,updatePlatform:c,uploadChannelAvatar:u,deleteChannelAvatar:f}},Cle=()=>{const[e,t]=p.useState({}),[n,r]=p.useState(!1),[a,s]=p.useState(null),o=p.useCallback(async l=>{if(!l)return[];try{r(!0),s(null);const{data:c,error:u}=await ae.from("channels").select("*").eq("org_id",l).order("created_at",{ascending:!1});if(u)return s(u.message),[];const f=c||[];return t(d=>({...d,[l]:f})),f}catch(c){return s(c instanceof Error?c.message:"Failed to fetch channels"),[]}finally{r(!1)}},[]);return{channelsByOrg:e,loading:n,error:a,fetchByOrgId:o}},YU=()=>{const{user:e}=Xr(),{userRoles:t,loading:n}=_r(),[r,a]=p.useState("none"),[s,o]=p.useState(null),[l,c]=p.useState(!0),[u,f]=p.useState(null),d=p.useMemo(()=>t.map(x=>((x==null?void 0:x.name)??"").toLowerCase()),[t]),h=d.includes("master_agent"),m=d.includes("super_agent"),g=d.includes("agent");return p.useEffect(()=>{let x=!0;const y=(b,w,k)=>{x&&((k==null?void 0:k.loading)!==void 0&&c(k.loading),(k==null?void 0:k.error)!==void 0&&f(k.error),a(b),o(w))};return e!=null&&e.id?n?(c(!0),()=>{x=!1}):h?(y("all",null,{loading:!1,error:null}),()=>{x=!1}):m?(y("super",e.id,{loading:!1,error:null}),()=>{x=!1}):g?(c(!0),f(null),(async()=>{try{await pm();const{data:b,error:w}=await ae.from("super_agent_members").select("super_agent_id").eq("agent_user_id",e.id).maybeSingle();if(!x)return;if(w)throw w;const k=(b==null?void 0:b.super_agent_id)??null;k?y("agent",k,{loading:!1,error:null}):y("none",null,{loading:!1,error:"Agent belum memiliki Super Agent penanggung jawab."})}catch(b){if(!x)return;console.error("Failed to resolve agent super scope",b),y("none",null,{loading:!1,error:b instanceof Error?b.message:"Gagal memuat cakupan agen AI."})}})(),()=>{x=!1}):(d.length>0?y("all",null,{loading:!1,error:null}):c(!0),()=>{x=!1}):(y("none",null,{loading:!1,error:null}),()=>{x=!1})},[e==null?void 0:e.id,n,h,m,g,d]),{mode:r,superAgentId:s,loading:l,error:u,refresh:async()=>{if(!(e!=null&&e.id)||!g)return s;c(!0),f(null);try{await pm();const{data:x,error:y}=await ae.from("super_agent_members").select("super_agent_id").eq("agent_user_id",e.id).maybeSingle();if(y)throw y;const b=(x==null?void 0:x.super_agent_id)??null;return b?(a("agent"),o(b)):(a("none"),o(null),f("Agent belum memiliki Super Agent penanggung jawab.")),b}catch(x){return console.error("Failed to refresh agent super scope",x),a("none"),o(null),f(x instanceof Error?x.message:"Gagal memuat cakupan agen AI."),null}finally{c(!1)}}}},_b=()=>{const[e,t]=p.useState([]),[n,r]=p.useState(!0),[a,s]=p.useState(null),o=p.useState({current:null})[0],{user:l}=Xr(),{mode:c,superAgentId:u,loading:f,error:d}=YU(),h=p.useMemo(()=>{const g="v2",v=(l==null?void 0:l.id)??"anon";return c==="all"?`app.cachedAIAgents:${g}:${v}:all`:c==="none"?`app.cachedAIAgents:${g}:${v}:none`:`app.cachedAIAgents:${g}:${v}:${u??"none"}`},[c,u,l==null?void 0:l.id]),m=async()=>{if(!f)try{const g=`${c}:${u??"null"}`;if(o.current===g)return;if(o.current=g,r(!0),s(d??null),c==="none"){t([]);try{localStorage.setItem(h,JSON.stringify([]))}catch{}return}await pm();const v="id, org_id, name, description, system_prompt, welcome_message, transfer_conditions, stop_ai_after_handoff, response_temperature, created_at, auto_resolve_after_minutes, enable_resolve, super_agent_id";let x=null,y=null;if(c==="super"||c==="agent"){if(!u){t([]);try{localStorage.setItem(h,JSON.stringify([]))}catch{}return}const{data:b,error:w}=await ae.from("ai_profiles").select(v).eq("super_agent_id",u).order("created_at",{ascending:!1});if(x=b,y=w,(y==null?void 0:y.code)==="42703"){const k=await ae.from("ai_profiles").select(v).order("created_at",{ascending:!1});x=k.data,y=k.error}}else{const{data:b,error:w}=await ae.from("ai_profiles").select(v).order("created_at",{ascending:!1});x=b,y=w}if(y){console.error("Error fetching AI agents:",y),s(y.message),t([]);return}t(x||[]);try{localStorage.setItem(h,JSON.stringify(x||[]))}catch{}}catch(g){console.error("Error fetching AI agents:",g),s("Failed to fetch AI agents"),t([])}finally{o.current=null,r(!1)}};return p.useEffect(()=>{if(f){r(!0);return}if(c==="none"){t([]),s(d??"Tidak ada agen AI yang tersedia untuk akun ini."),r(!1);return}try{const x=localStorage.getItem(h);if(x){const y=JSON.parse(x);Array.isArray(y)&&t(y)}}catch{}const v=setTimeout(()=>m(),50);return()=>clearTimeout(v)},[f,c,d,h]),{aiAgents:e,loading:n||f,error:a,fetchAIAgents:m,scopeMode:c,superAgentId:u}};function kb({options:e,value:t,onChange:n,onValueChange:r,placeholder:a="Select...",disabled:s,className:o}){const[l,c]=p.useState(!1),u=new Set(t),f=g=>{n&&n(g),r&&r(g)},d=g=>{const v=new Set(u);v.has(g)?v.delete(g):v.add(g),f(Array.from(v))},h=e.filter(g=>u.has(g.value)).map(g=>g.label),m=h.length===0?a:`${h.length} selected`;return i.jsxs(ys,{open:l,onOpenChange:c,children:[i.jsx(bs,{asChild:!0,children:i.jsxs(te,{type:"button",variant:"outline",role:"combobox","aria-expanded":l,disabled:s,className:Se("justify-between w-64",o),children:[i.jsx("span",{className:"truncate text-left",children:m}),i.jsx("span",{className:"ml-2 text-muted-foreground",children:""})]})}),i.jsx(Wi,{className:"p-0 w-80",align:"start",onOpenAutoFocus:g=>g.preventDefault(),children:i.jsxs(Rc,{children:[i.jsx(Mc,{placeholder:"Search..."}),i.jsxs(vb,{children:[i.jsx(Dc,{children:"No results found."}),i.jsx($c,{children:e.map(g=>i.jsxs(Lc,{onSelect:v=>{d(g.value)},className:"cursor-pointer",children:[i.jsx("div",{className:"mr-2 flex h-4 w-4 items-center justify-center",onClick:v=>{v.preventDefault(),v.stopPropagation(),d(g.value)},children:i.jsx(gm,{checked:u.has(g.value),onCheckedChange:()=>d(g.value)})}),i.jsx("span",{children:g.label})]},g.value))})]})]})})]})}const Ale={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_HCAPTCHA_SITEKEY:"30583a2e-84ac-496a-8ec2-23043ae06dc0",VITE_SUPABASE_PROJECT_ID:"bkynymyhbfrhvwxqqttk",VITE_SUPABASE_PUBLISHABLE_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJreW55bXloYmZyaHZ3eHFxdHRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM5Mzk1NzIsImV4cCI6MjA3OTUxNTU3Mn0.4ELI9s6908SdW2jd1BM_ht8pTIyLAwPpsqGiGNCdcC0",VITE_SUPABASE_URL:"https://bkynymyhbfrhvwxqqttk.supabase.co"},ad=Ale??{},XU=e=>e.replace(/\/$/,""),JU=(()=>{const e=ad==null?void 0:ad.VITE_APP_ORIGIN;return e?XU(e):"https://synkaai.netlify.app"})(),Ele=e=>`${JU}/livechat/${e}`,mv=(()=>{const e=ad==null?void 0:ad.VITE_WAHA_BASE_URL;return XU(e||"https://waha-plus-production-97c1.up.railway.app")})(),Ple=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=Gc(),{user:s}=Xr(),{hasPermission:o}=_r(),{aiAgents:l,loading:c}=_b(),{agents:u,loading:f}=Ml(),[d,h]=p.useState({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,b]=p.useState(null),[w,k]=p.useState(null),[_,j]=p.useState(null);p.useRef(!1);const[S,A]=p.useState(!1),[C,T]=p.useState(!1),[M,F]=p.useState(null),E=o("channels.create");p.useMemo(()=>M&&u.find(N=>N.primaryRole==="super_agent"&&N.user_id===M)||null,[M,u]);const I=async()=>{if(!s)return null;const{data:N}=await ae.from("org_members").select("org_id").eq("user_id",s.id).single();return(N==null?void 0:N.org_id)||null},P=async()=>{try{x(!0),j(null),b(null);const N=Gn.ENDPOINTS.WHATSAPP.CREATE_SESSION,U=`${Gn.BASE_URL}/2f6f9767-c3cb-4af3-b749-a496eefc2b74/waha`,D=(d.platformName||"default").toLowerCase().replace(/\s/g,""),R={name:D,start:!0,config:{metadata:{"user.id":(s==null?void 0:s.id)||"","user.email":(s==null?void 0:s.email)||""},proxy:null,debug:!1,noweb:{store:{enabled:!0,fullSync:!1}},webhooks:[{url:U,events:["message","session.status","message.reaction","message.any","message.ack","message.waiting","message.revoked","state.change","group.join","group.leave","presence.update","poll.vote","poll.vote.failed","chat.archive","call.received","call.accepted","call.rejected","label.upsert","label.deleted","label.chat.added","label.chat.deleted","engine.event"],hmac:null,retries:null,customHeaders:null}]}};try{const H=await Ca(N,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!H.ok){const V=await H.text();if(H.status!==409)throw new Error(`Create session failed (${H.status}): ${V||"Unknown error"}`)}}catch(H){throw H}const K=await Ca(Gn.ENDPOINTS.WHATSAPP.GET_LOGIN_QR,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:D})});if(!K.ok)throw new Error(`Request failed with status ${K.status}`);const Q=K.headers.get("content-type");if(Q&&Q.includes("image/")){const H=await K.blob(),V=URL.createObjectURL(H);return b(V),k(D),x(!1),{qr:V,sessionName:D}}else try{const H=await K.json(),V=Array.isArray(H)?H[0]:H;if(!V||!V.data||!V.mimetype)throw new Error("Invalid QR response shape");const ie=`data:${V.mimetype};base64,${V.data}`;return b(ie),k(D),x(!1),{qr:ie,sessionName:D}}catch{const V=await K.text();if(V&&V.length>0){const ie=`data:image/png;base64,${V}`;return b(ie),k(D),x(!1),{qr:ie,sessionName:D}}else throw new Error("Invalid response format")}return x(!1),null}catch(N){return j((N==null?void 0:N.message)||"Failed to generate QR"),x(!1),null}},B=async()=>{try{const U=await(async()=>{if(w&&w.trim().length>0)return w;try{const K=await I();if(!K)return"default";const{data:Q}=await ae.from("channels").select("display_name, provider").eq("org_id",K).eq("provider","whatsapp").order("created_at",{ascending:!1}).limit(1).maybeSingle();return((Q==null?void 0:Q.display_name)||"").replace(/\s/g,"")||"default"}catch{return"default"}})(),D=`${mv}/api/sessions/${encodeURIComponent(U)}`,R=await fetch(D,{method:"GET",headers:{"Content-Type":"application/json"}});if(R.ok){const K=await R.json();return K&&K.status==="WORKING"&&K.me&&K.me.id?(g(!0),b(null),a({title:"Success",description:"WhatsApp connected successfully!"}),!0):(g(!1),!1)}return!1}catch(N){return console.error("Error checking session status:",N),!1}};p.useEffect(()=>{if(!y||m)return;const N=setInterval(async()=>{await B()&&clearInterval(N)},5e3);return()=>clearInterval(N)},[y,m]);const O=!!(d.platformName&&d.selectedAIAgent&&M&&E),$=async()=>{try{A(!0)}finally{A(!1),h({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),g(!1),x(!1),b(null),j(null),F(null),t()}},L=async()=>{try{if(T(!0),!E){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"}),T(!1);return}if(!M||!d.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"}),T(!1);return}if(!await I())throw new Error("User not found in any organization");const U=await P(),D={...d,phoneNumber:void 0,platformType:"whatsapp",selectedSuperAgentId:M};if(await n(D),a({title:"Success",description:"Channel successfully created."}),U)try{window.dispatchEvent(new CustomEvent("open-wa-qr",{detail:{sessionName:U.sessionName,qr:U.qr}}))}catch{}try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}t(),h({platformName:"",description:"",phoneNumber:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),F(null)}catch(N){console.error("Error submitting form:",N),a({title:"Error",description:N.message||"Failed to create WhatsApp platform",variant:"destructive"})}finally{T(!1)}};return i.jsx(fn,{open:e,onOpenChange:t,children:i.jsx(on,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(ln,{children:[i.jsx(cn,{children:"Setup WhatsApp Platform"}),i.jsx(Pr,{children:"Configure your new WhatsApp platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"platformName",children:"Platform Name *"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama platform atau merek yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(Ye,{id:"platformName",placeholder:"Enter your platform or brand name",value:d.platformName,onChange:N=>h(U=>({...U,platformName:N.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di WhatsApp Business"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:d.profilePhoto?i.jsx("img",{src:URL.createObjectURL(d.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx(Nc,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Ye,{id:"profilePhoto",type:"file",accept:"image/*",onChange:N=>{var D;const U=((D=N.target.files)==null?void 0:D[0])||null;h(R=>({...R,profilePhoto:U}))},className:"hidden"}),i.jsxs(te,{variant:"outline",onClick:()=>{var N;return(N=document.getElementById("profilePhoto"))==null?void 0:N.click()},children:[i.jsx(Nc,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"description",children:"Description"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(qa,{id:"description",placeholder:"Describe your business and what you offer",value:d.description,onChange:N=>h(U=>({...U,description:N.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-xs font-medium text-emerald-700",children:"Super Agent (1 max)"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform WhatsApp ini"})})]})]}),f?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(Ht,{value:M||"",onValueChange:N=>{F(N),h(U=>({...U,selectedAIAgent:"",selectedHumanAgents:[]}))},children:[i.jsx(Ut,{children:i.jsx(Dt,{placeholder:"Choose a Super Agent"})}),i.jsx(zt,{className:"bg-background border z-50",children:u.filter(N=>N.primaryRole==="super_agent").map(N=>i.jsx(Ge,{value:N.user_id,children:N.display_name||N.email||N.user_id.slice(0,8)},N.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform WhatsApp ini"})})]})]}),c?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Ht,{value:d.selectedAIAgent,onValueChange:N=>{const U=l.find(D=>D.id===N);if(!M){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!U||U.super_agent_id!==M){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}h(D=>({...D,selectedAIAgent:N,selectedHumanAgents:[]}))},children:[i.jsx(Ut,{children:i.jsx(Dt,{placeholder:M?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(zt,{className:"bg-background border z-50",children:l.filter(N=>M?N.super_agent_id===M:!1).map(N=>i.jsx(Ge,{value:N.id,children:N.name},N.id))})]})]}),d.selectedAIAgent&&!M&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{children:"Assign Agents"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-xs font-medium",children:["Agents ",M?"":"(select an AI agent first)"]}),(()=>{const U=u.filter(D=>D.primaryRole==="agent").filter(D=>!!M&&D.super_agent_id===M).map(D=>({value:D.user_id,label:D.display_name||D.email||`Agent ${D.user_id.slice(0,8)}`}));return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(kb,{options:U,value:d.selectedHumanAgents,onValueChange:D=>h(R=>({...R,selectedHumanAgents:D})),disabled:!M,placeholder:M?"Select human agents":"Select an AI agent first"}),i.jsx(te,{type:"button",variant:"outline",disabled:!M||U.length===0,onClick:()=>h(D=>({...D,selectedHumanAgents:U.map(R=>R.value)})),children:"Select All"}),i.jsx(te,{type:"button",variant:"ghost",disabled:!M||d.selectedHumanAgents.length===0,onClick:()=>h(D=>({...D,selectedHumanAgents:[]})),children:"Unselect All"})]})})()]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(te,{variant:"outline",onClick:$,disabled:r||S,className:"text-blue-700 border-blue-200 hover:bg-blue-50",children:S?i.jsxs(i.Fragment,{children:[i.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Cancelling..."]}):"Cancel"}),i.jsx(te,{onClick:L,disabled:r||C||!O,className:"bg-blue-100 hover:bg-blue-200 text-blue-700 transition-all duration-200 hover:shadow-md active:scale-[.98]","aria-busy":r||C,children:r||C?i.jsxs(i.Fragment,{children:[i.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create WhatsApp Platform"})]})]})})})},Tle=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=Gc(),{user:s}=Xr(),{hasPermission:o}=_r(),{aiAgents:l,loading:c}=_b(),{agents:u,loading:f}=Ml(),{uploadChannelAvatar:d}=GU(),[h,m]=p.useState({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[g,v]=p.useState(!1),[x,y]=p.useState(null),[b,w]=p.useState(!1),[k,_]=p.useState(null),j=(h.telegramBotToken||"").trim(),S=!!k&&k===j,A=o("channels.create"),C=p.useMemo(()=>x&&u.find(I=>I.primaryRole==="super_agent"&&I.user_id===x)||null,[x,u]),T=!!(h.displayName&&h.selectedAIAgent&&h.telegramBotToken&&x&&A&&S),M=async()=>{if(!s)return null;const{data:I}=await ae.from("org_members").select("org_id").eq("user_id",s.id).single();return(I==null?void 0:I.org_id)||null},F=async()=>{const I=(h.telegramBotToken||"").trim();if(!I){a({title:"Telegram bot token required",description:"Enter your BotFather token before validating.",variant:"destructive"});return}try{w(!0);const P=await M(),B={telegram_bot_token:I};P&&(B.org_id=P);const O=await Ca(Gn.ENDPOINTS.TELEGRAM.VERIFY_TOKEN,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(B)});let $=null;try{const N=await O.text();$=N?JSON.parse(N):null}catch{throw new Error("Token is invalid")}if(!O.ok)throw new Error("Token is invalid");if($===null||typeof $!="object"||Array.isArray($))throw new Error("Token is invalid");const L=$.valid;if(typeof L!="boolean")throw new Error("Token is invalid");if(L!==!0)throw new Error("Token is invalid");_(I),a({title:"Token validated",description:"Telegram bot token has been successfully verified."})}catch(P){console.error("Telegram token validation failed:",P),_(null);const B=P&&typeof P.message=="string"?P.message:"",O=String(B).toLowerCase();a({title:"Validation failed",description:O.includes("empty")||O.includes("required")?B||"Telegram bot token is required":"Token is invalid",variant:"destructive"})}finally{w(!1)}},E=async()=>{var I;try{if(g)return;if(v(!0),!A){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"}),v(!1);return}if(!x||!h.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"}),v(!1);return}if(!S){a({title:"Token validation required",description:"You must validate the Telegram bot token before creating this platform.",variant:"destructive"}),v(!1);return}const P=await M();if(!P)throw new Error("User not found in any organization");const B=(h.telegramBotToken||"").trim();if(!B)throw new Error("Telegram bot token is required");try{const{data:N}=await ae.from("channels").select("id").eq("provider","telegram").eq("external_id",B).limit(1);if(Array.isArray(N)&&N.length>0){a({title:"Duplicate token",description:"A Telegram bot with this BotFather token already exists.",variant:"destructive"}),v(!1);return}}catch{}const O={brand_name:h.displayName,display_name:h.displayName,description:h.description,telegram_bot_token:h.telegramBotToken,ai_profile_id:h.selectedAIAgent,human_agent_ids:h.selectedHumanAgents,super_agent_id:x,org_id:P,platform_type:"telegram"},$=await Ca(Gn.ENDPOINTS.TELEGRAM.CREATE_PLATFORM,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!$.ok)throw new Error(`Telegram webhook failed with status ${$.status}`);let L=null;try{if(($.headers.get("content-type")||"").includes("application/json"))L=await $.json();else{const U=await $.text();try{L=U?JSON.parse(U):null}catch{L={raw:U||null}}}}catch{L=null}try{if(h.profilePhoto){let N=(L==null?void 0:L.channel_id)||(L==null?void 0:L.id)||((I=L==null?void 0:L.channel)==null?void 0:I.id)||null;if(!N){const{data:U}=await ae.from("channels").select("id").eq("org_id",P).eq("provider","telegram").eq("external_id",B).limit(1).maybeSingle();N=(U==null?void 0:U.id)||null}N&&await d(N,h.profilePhoto,P)}}catch(N){console.warn("Telegram avatar upload failed:",N)}a({title:"Success",description:"Telegram channel created successfully"});try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}t(),m({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),y(null)}catch(P){console.error("Error submitting form:",P),a({title:"Error",description:P.message||"Failed to create Telegram platform",variant:"destructive"})}finally{v(!1)}};return i.jsx(fn,{open:e,onOpenChange:t,children:i.jsx(on,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(ln,{children:[i.jsx(cn,{children:"Setup Telegram Bot Platform"}),i.jsx(Pr,{children:"Configure your new Telegram bot platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"displayName",children:"Display Name *"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama yang akan ditampilkan di widget chat Telegram"})})]})]}),i.jsx(Ye,{id:"displayName",placeholder:"Enter the display name",value:h.displayName,onChange:I=>m(P=>({...P,displayName:I.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"description",children:"Description"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(qa,{id:"description",placeholder:"Describe your business and what you offer",value:h.description,onChange:I=>m(P=>({...P,description:I.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di bot Telegram"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:h.profilePhoto?i.jsx("img",{src:URL.createObjectURL(h.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx(Nc,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Ye,{id:"profilePhoto",type:"file",accept:"image/*",onChange:I=>{var B;const P=((B=I.target.files)==null?void 0:B[0])||null;m(O=>({...O,profilePhoto:P}))},className:"hidden"}),i.jsxs(te,{variant:"outline",onClick:()=>{var I;return(I=document.getElementById("profilePhoto"))==null?void 0:I.click()},children:[i.jsx(Nc,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/50",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx(qe,{className:"text-sm font-medium",children:"Telegram Bot Setup"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Follow these steps to set up your Telegram bot"})]})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 1: Create a bot with BotFather"}),i.jsxs("ol",{className:"list-decimal list-inside text-xs space-y-1 ml-2",children:[i.jsx("li",{children:"Open Telegram and search for @BotFather"}),i.jsx("li",{children:"Send /newbot command"}),i.jsx("li",{children:"Choose a name for your bot (organization name)"}),i.jsx("li",{children:"Choose a username (must end with 'bot')"}),i.jsx("li",{children:"Copy the bot token provided"})]})]}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 2: Configure bot settings"}),i.jsxs("ol",{className:"list-decimal list-inside text-xs space-y-1 ml-2",children:[i.jsx("li",{children:"Send /setdescription to set bot description"}),i.jsx("li",{children:"Send /setabouttext to set about text"}),i.jsx("li",{children:"Send /setcommands to set available commands"})]})]}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsx("p",{className:"font-medium",children:"Step 3: Enable webhook (optional)"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Your bot will automatically receive messages once connected to our platform."})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"telegramBotToken",children:"Telegram Bot Token *"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Token bot Telegram yang diperoleh dari @BotFather untuk mengautentikasi bot"})})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ye,{id:"telegramBotToken",type:"password",placeholder:"1234567890:ABCdefGHIjklMNOpqrsTUVwxyz",value:h.telegramBotToken,onChange:I=>{const P=I.target.value;m(B=>({...B,telegramBotToken:P})),_(null)},className:"flex-1"}),i.jsx(te,{type:"button",variant:S?"outline":"default",className:S?"border-emerald-600 text-emerald-700 hover:bg-emerald-50":"",onClick:F,disabled:b||!h.telegramBotToken,children:b?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 animate-spin"}),"Validating"]}):"Validate"})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Get this token from @BotFather on Telegram. Format: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"}),S&&i.jsx("p",{className:"text-xs text-emerald-600",children:"Bot token validated. You can now create this Telegram platform."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{children:"Super Agent *"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform Telegram ini"})})]})]}),f?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(Ht,{value:x||"",onValueChange:I=>{y(I),m(P=>({...P,selectedAIAgent:"",selectedHumanAgents:[]}))},children:[i.jsx(Ut,{children:i.jsx(Dt,{placeholder:"Choose a Super Agent"})}),i.jsx(zt,{className:"bg-background border z-50",children:u.filter(I=>I.primaryRole==="super_agent").map(I=>i.jsx(Ge,{value:I.user_id,children:I.display_name||I.email||I.user_id.slice(0,8)},I.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform Telegram ini"})})]})]}),c?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Ht,{value:h.selectedAIAgent,onValueChange:I=>{const P=l.find(B=>B.id===I);if(!x){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!P||P.super_agent_id!==x){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}m(B=>({...B,selectedAIAgent:I,selectedHumanAgents:[]}))},children:[i.jsx(Ut,{children:i.jsx(Dt,{placeholder:x?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(zt,{className:"bg-background border z-50",children:l.filter(I=>x?I.super_agent_id===x:!1).map(I=>i.jsx(Ge,{value:I.id,children:I.name},I.id))})]}),x&&i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-md bg-muted px-3 py-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:"Super Agent:"}),i.jsx("span",{className:"font-medium",children:(C==null?void 0:C.display_name)||(C==null?void 0:C.email)||x.slice(0,8)})]})]}),h.selectedAIAgent&&!x&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{children:"Select Human Agents (optional)"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):(()=>{const P=u.filter(B=>B.primaryRole==="agent").filter(B=>!!x&&B.super_agent_id===x).map(B=>({value:B.user_id,label:B.display_name||B.email||`Agent ${B.user_id.slice(0,8)}`}));return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(kb,{options:P,value:h.selectedHumanAgents,onValueChange:B=>m(O=>({...O,selectedHumanAgents:B})),disabled:!x,placeholder:x?"Select human agents":"Select an AI agent first"}),i.jsx(te,{type:"button",variant:"outline",disabled:!x||P.length===0,onClick:()=>m(B=>({...B,selectedHumanAgents:P.map(O=>O.value)})),children:"Select All"}),i.jsx(te,{type:"button",variant:"ghost",disabled:!x||h.selectedHumanAgents.length===0,onClick:()=>m(B=>({...B,selectedHumanAgents:[]})),children:"Unselect All"})]})})()]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(te,{variant:"outline",onClick:()=>{g||(m({displayName:"",description:"",telegramBotToken:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),y(null),t())},disabled:r||g,children:"Cancel"}),i.jsx(te,{onClick:E,disabled:r||g||!T,className:"bg-blue-600 hover:bg-blue-700 text-white",children:r||g?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 animate-spin"})," Creating..."]}):"Create Telegram Bot Platform"})]})]})})})},Ole=({isOpen:e,onClose:t,onSubmit:n,isSubmitting:r=!1})=>{const{toast:a}=Gc();Xr();const{hasPermission:s}=_r(),{aiAgents:o,loading:l}=_b(),{agents:c,loading:u}=Ml(),[f,d]=p.useState({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),[h,m]=p.useState(!1),[g,v]=p.useState(null),x=s("channels.create"),y=p.useMemo(()=>g&&c.find(_=>_.primaryRole==="super_agent"&&_.user_id===g)||null,[g,c]),b=!!(f.displayName&&g&&f.selectedAIAgent&&x),w=async()=>{try{if(h)return;if(!x){a({title:"Permission denied",description:"You do not have permission to create channels.",variant:"destructive"});return}if(!g||!f.selectedAIAgent){a({title:"Missing required fields",description:"Please select a Super Agent and an AI Agent.",variant:"destructive"});return}m(!0);const _={...f,platformType:"web",selectedSuperAgentId:g};await n(_);try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}d({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),v(null),t()}catch(_){console.error("Error submitting form:",_)}finally{m(!1)}},k=()=>{h||(d({description:"",displayName:"",websiteUrl:"",businessCategory:"",selectedAIAgent:"",selectedHumanAgents:[],profilePhoto:null}),v(null),t())};return i.jsx(fn,{open:e,onOpenChange:t,children:i.jsx(on,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",style:{overflowX:"visible",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsxs(ln,{children:[i.jsx(cn,{children:"Setup Web Live Chat Platform"}),i.jsx(Pr,{children:"Configure your new web live chat platform with all the necessary information."})]}),i.jsxs("div",{className:"mt-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"description",children:"Description"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Deskripsi bisnis dan layanan yang akan ditampilkan kepada pelanggan"})})]})]}),i.jsx(qa,{id:"description",placeholder:"Describe your business and what you offer",value:f.description,onChange:_=>d(j=>({...j,description:_.target.value})),rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"profilePhoto",children:"Profile Photo / Logo"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Foto profil atau logo yang akan ditampilkan di widget live chat"})})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-16 w-16 rounded-full bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:f.profilePhoto?i.jsx("img",{src:URL.createObjectURL(f.profilePhoto),alt:"Profile",className:"h-16 w-16 rounded-full object-cover"}):i.jsx(Nc,{className:"h-6 w-6 text-muted-foreground"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(Ye,{id:"profilePhoto",type:"file",accept:"image/*",onChange:_=>{var S;const j=((S=_.target.files)==null?void 0:S[0])||null;d(A=>({...A,profilePhoto:j}))},className:"hidden"}),i.jsxs(te,{variant:"outline",onClick:()=>{var _;return(_=document.getElementById("profilePhoto"))==null?void 0:_.click()},children:[i.jsx(Nc,{className:"h-4 w-4 mr-2"})," Upload Photo"]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"displayName",children:"Display Name *"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Nama yang akan ditampilkan di widget live chat"})})]})]}),i.jsx(Ye,{id:"displayName",placeholder:"Name that will appear in the chat widget",value:f.displayName,onChange:_=>d(j=>({...j,displayName:_.target.value}))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{children:"Super Agent *"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform Live Chat ini"})})]})]}),u?i.jsx("div",{className:"rounded-md border bg-muted px-3 py-2 text-sm",children:"Loading super agents..."}):i.jsxs(Ht,{value:g||"",onValueChange:_=>{v(_),d(j=>({...j,selectedAIAgent:"",selectedHumanAgents:[]}))},children:[i.jsx(Ut,{children:i.jsx(Dt,{placeholder:"Choose a Super Agent"})}),i.jsx(zt,{className:"bg-background border z-50",children:c.filter(_=>_.primaryRole==="super_agent").map(_=>i.jsx(Ge,{value:_.user_id,children:_.display_name||_.email||_.user_id.slice(0,8)},_.user_id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Default mengikuti super agent pada AI agent terpilih. Anda bisa mengubahnya di sini."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"aiAgent",children:"Select AI Agent *"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform Live Chat ini"})})]})]}),l?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Ht,{value:f.selectedAIAgent,onValueChange:_=>{const j=o.find(S=>S.id===_);if(!g){a({title:"Select a Super Agent first",description:"Pilih super agent terlebih dahulu, lalu pilih AI agent.",variant:"destructive"});return}if(!j||j.super_agent_id!==g){a({title:"AI agent tidak sesuai",description:"AI agent yang dipilih tidak berada di bawah super agent terpilih.",variant:"destructive"});return}d(S=>({...S,selectedAIAgent:_,selectedHumanAgents:[]}))},children:[i.jsx(Ut,{children:i.jsx(Dt,{placeholder:g?"Choose an AI agent":"Select a Super Agent first"})}),i.jsx(zt,{className:"bg-background border z-50",children:o.filter(_=>g?_.super_agent_id===g:!1).map(_=>i.jsx(Ge,{value:_.id,children:_.name},_.id))})]}),g&&i.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 rounded-md bg-muted px-3 py-1 text-xs text-muted-foreground",children:[i.jsx("span",{children:"Super Agent:"}),i.jsx("span",{className:"font-medium",children:(y==null?void 0:y.display_name)||(y==null?void 0:y.email)||g.slice(0,8)})]})]}),f.selectedAIAgent&&!g&&i.jsx("p",{className:"text-xs text-amber-600",children:"AI agent terpilih belum memiliki super agent. Tetapkan super agent di halaman AI Agents terlebih dahulu."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{children:"Assign Agents"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{className:"z-[9999] max-w-xs",side:"top",align:"start",sideOffset:5,avoidCollisions:!0,collisionPadding:20,sticky:"always",children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]}),u?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-xs font-medium",children:["Agents ",g?"":"(select an AI agent first)"]}),(()=>{const j=c.filter(S=>S.primaryRole==="agent").filter(S=>!!g&&S.super_agent_id===g).map(S=>({value:S.user_id,label:S.display_name||S.email||`Agent ${S.user_id.slice(0,8)}`}));return i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(kb,{options:j,value:f.selectedHumanAgents,onValueChange:S=>d(A=>({...A,selectedHumanAgents:S})),disabled:!g,placeholder:g?"Select human agents":"Select an AI agent first"}),i.jsx(te,{type:"button",variant:"outline",disabled:!g||j.length===0,onClick:()=>d(S=>({...S,selectedHumanAgents:j.map(A=>A.value)})),children:"Select All"}),i.jsx(te,{type:"button",variant:"ghost",disabled:!g||f.selectedHumanAgents.length===0,onClick:()=>d(S=>({...S,selectedHumanAgents:[]})),children:"Unselect All"})]})})})()]})})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(te,{variant:"outline",onClick:k,disabled:r||h,children:"Cancel"}),i.jsx(te,{onClick:w,disabled:r||h||!b,children:r||h?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 animate-spin"})," Creating..."]}):"Create Web Live Chat Platform"})]})]})})})},Ile=()=>{var ut;const{toast:e}=Gc(),{platforms:t,loading:n,error:r,createPlatform:a,fetchPlatforms:s,updatePlatform:o,uploadChannelAvatar:l,deleteChannelAvatar:c}=GU(),{aiAgents:u,loading:f}=_b(),{agents:d,loading:h}=Ml(),{fetchByOrgId:m,channelsByOrg:g}=Cle(),{hasRole:v}=_r(),[x,y]=p.useState(null),[b,w]=p.useState("whatsapp"),[k,_]=p.useState(""),[j,S]=p.useState(!1),[A,C]=p.useState(null),[T,M]=p.useState(!1),[F,E]=p.useState(!1),[I,P]=p.useState([]),[B,O]=p.useState(!1),[$,L]=p.useState(!1),[N,U]=p.useState(!1),D=p.useRef(null),[R,K]=p.useState([]),[Q,H]=p.useState(!1),[V,ie]=p.useState(null),[G,le]=p.useState(new Set),[se,Z]=p.useState(new Set),[_e,z]=p.useState(null),[q,ce]=p.useState(null),[ke,Ae]=p.useState(null),[Pe,Ie]=p.useState(!1),[Ne,ze]=p.useState(null),at=p.useRef(null),[pt,_t]=p.useState(!1),re=p.useRef(null),pe=p.useRef(!1),He=p.useRef(0);p.useEffect(()=>{t.length>0&&!x&&y(t[0].id)},[t,x]),p.useEffect(()=>{u.length>0&&!k&&_(u[0].id)},[u,k]);const Ue=ee=>{const ve=ee==null?void 0:ee.provider;return ve==="whatsapp"?"whatsapp":ve==="telegram"?"telegram":"web"};p.useEffect(()=>{const ee=t.find(ve=>Ue(ve)===b);(!x||x&&t.find(ve=>ve.id===x&&Ue(ve)!==b))&&y((ee==null?void 0:ee.id)||null)},[t,b]);const oe=t.find(ee=>ee.id===x);p.useEffect(()=>{_(oe&&(oe==null?void 0:oe.ai_profile_id)||"")},[oe==null?void 0:oe.id,oe==null?void 0:oe.ai_profile_id]),p.useEffect(()=>{const ee=Array.from(new Set(t.map(ve=>ve.org_id)));ee.length!==0&&Promise.resolve().then(()=>{ee.forEach(ve=>{m(ve)})})},[t]),p.useEffect(()=>{const ee=()=>{s()};return window.addEventListener("refresh-platforms",ee),()=>window.removeEventListener("refresh-platforms",ee)},[s]);const ct=oe?Ue(oe):null,Pt=(oe==null?void 0:oe.human_agents)||[],kt=v("master_agent")||v("super_agent"),ye=d.filter(ee=>ee.primaryRole==="agent"&&!Pt.some(ve=>ve.user_id===ee.user_id)).map(ee=>({value:ee.user_id,label:ee.display_name||ee.email||ee.user_id.slice(0,8)})),it=ee=>i.jsxs(i.Fragment,{children:[i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsxs(tt,{className:"text-base flex items-center gap-2",children:["AI Agent",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Agen AI yang akan menangani percakapan otomatis di platform ini"})})]})]})}),i.jsx(et,{children:f?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading AI agents..."}):i.jsxs(Ht,{value:k||"",onValueChange:async ve=>{oe&&(await o(oe.id,{ai_profile_id:ve||void 0}),_(ve))},children:[i.jsx(Ut,{children:i.jsx(Dt,{placeholder:"Choose an AI agent"})}),i.jsx(zt,{children:u.map(ve=>i.jsxs(Ge,{value:ve.id,children:[" ",ve.name]},ve.id))})]})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsxs(tt,{className:"text-base flex items-center gap-2",children:["Super Agent",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Super Agent yang akan mengawasi dan mengelola platform ini (hanya master agent yang dapat mengatur)"})})]})]})}),i.jsx(et,{children:(()=>{const ve=(oe==null?void 0:oe.super_agent_id)||null,Ke=(d||[]).find(ft=>ft.user_id===ve&&ft.primaryRole==="super_agent")||null;return i.jsxs("div",{className:"text-sm space-y-2",children:[Ke?i.jsxs("div",{className:"inline-flex items-center gap-2 bg-muted px-3 py-1 rounded-md",children:[" ",Ke.display_name||Ke.email||Ke.user_id.slice(0,8)]}):i.jsx("span",{className:"text-muted-foreground",children:"No super agent assigned. Select an AI agent to link a super agent."}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Super agent assignment follows the selected AI agent. To change ownership, switch the AI agent for this platform."})]})})()})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsxs(tt,{className:"text-base flex items-center gap-2",children:["Human Agent",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Agen manusia yang akan menangani percakapan yang memerlukan intervensi manual"})})]})]})}),i.jsxs(et,{children:[h?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading human agents..."}):Pt.length>0?i.jsx("div",{className:"flex flex-wrap gap-2",children:Pt.map(ve=>i.jsxs("div",{className:"flex items-center gap-2 bg-muted px-3 py-1 rounded-md",children:[i.jsxs("span",{className:"text-sm",children:[" ",ve.display_name||ve.email||ve.user_id]}),kt&&i.jsx(te,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0",disabled:F||!oe,onClick:async()=>{if(oe)try{E(!0);const Re=Pt.filter(Ke=>Ke.user_id!==ve.user_id).map(Ke=>Ke.user_id);await o(oe.id,{human_agent_ids:Re})}finally{E(!1)}},children:i.jsx(dp,{className:"h-3 w-3"})})]},ve.user_id))}):i.jsx("p",{className:"text-sm text-muted-foreground",children:"No agents connected"}),kt&&oe&&i.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[i.jsx(kb,{options:ye,value:I,onChange:P,placeholder:"Select human agents to add"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Vt,{permission:"channel_agents.update",children:i.jsx(te,{variant:"outline",disabled:F||I.length===0,onClick:async()=>{if(oe)try{E(!0);const ve=Pt.map(Ke=>Ke.user_id),Re=Array.from(new Set([...ve,...I]));await o(oe.id,{human_agent_ids:Re}),P([])}finally{E(!1)}},children:"Add selected"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Tambahkan agen manusia yang dipilih ke platform ini"})})]})]})]})]}),ee&&i.jsxs(i.Fragment,{children:[i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsxs(tt,{className:"text-base flex items-center gap-2",children:["Link LiveChat",i.jsx(Be,{className:"h-4 w-4 text-muted-foreground"})]})}),i.jsx(et,{children:i.jsx("div",{className:"bg-muted p-3 rounded-md",children:i.jsx(Ye,{value:Ele(String((oe==null?void 0:oe.id)||"{platform_id}")),readOnly:!0,className:"bg-background"})})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsxs(tt,{className:"text-base flex items-center gap-2",children:["Embed Code",i.jsx(Be,{className:"h-4 w-4 text-muted-foreground"})]})}),i.jsx(et,{children:i.jsx(qa,{value:`<script>
(function(){
  // Lightweight chat embed - uses YOUR project's origin
  var w=window,d=document; if(w.chatWidgetLoaded) return; w.chatWidgetLoaded=true;
  var cfg=w.chatConfig||{}; cfg.baseUrl=cfg.baseUrl||'${JU}'; cfg.platformId=cfg.platformId||'${(oe==null?void 0:oe.id)||"{platform_id}"}';
  cfg.position=cfg.position||'bottom-right'; cfg.width=cfg.width||'360px'; cfg.height=cfg.height||'560px';
  var css='#chat-bubble{position:fixed;right:20px;bottom:20px;z-index:999999;background:#1d4ed8;color:#fff;border-radius:9999px;width:56px;height:56px;box-shadow:0 8px 20px rgba(0,0,0,.2);border:0;cursor:pointer;font-size:24px;line-height:56px;text-align:center}'+
           '#chat-panel{position:fixed;right:20px;bottom:92px;width:'+cfg.width+';height:'+cfg.height+';max-width:calc(100% - 40px);max-height:70vh;z-index:999999;box-shadow:0 10px 30px rgba(0,0,0,.25);border-radius:12px;overflow:hidden;opacity:0;transform:translateY(10px);pointer-events:none;transition:opacity .2s ease,transform .2s ease;background:#fff}'+
           '#chat-panel.open{opacity:1;transform:translateY(0);pointer-events:auto}';
  var s=d.createElement('style'); s.type='text/css'; s.appendChild(d.createTextNode(css)); d.head.appendChild(s);
  var bubble=d.createElement('button'); bubble.id='chat-bubble'; bubble.setAttribute('aria-label','Open chat'); bubble.innerHTML='';
  var panel=d.createElement('div'); panel.id='chat-panel';
  var iframe=d.createElement('iframe'); iframe.src=cfg.baseUrl+'/livechat/'+encodeURIComponent(cfg.platformId); iframe.style.width='100%'; iframe.style.height='100%'; iframe.style.border='0'; panel.appendChild(iframe);
  bubble.addEventListener('click',function(){ panel.classList.toggle('open'); });
  d.body.appendChild(bubble); d.body.appendChild(panel);
})();
<\/script>`,readOnly:!0,className:"font-mono text-xs h-48 bg-muted"})})]})]})]}),$t=ee=>{C(ee),S(!1)},ue=async ee=>{try{M(!0);const ve={display_name:ee.displayName||ee.platformName||ee.brandName,website_url:ee.websiteUrl||void 0,business_category:ee.businessCategory||void 0,description:ee.description||void 0,ai_profile_id:ee.selectedAIAgent||void 0,provider:A||"web",human_agent_ids:ee.selectedHumanAgents},Re=await a(ve);if(Re&&ee.profilePhoto)try{await l(Re.id,ee.profilePhoto,Re.org_id)}catch(Ke){e({title:"Avatar upload failed",description:(Ke==null?void 0:Ke.message)||"Could not upload avatar",variant:"destructive"})}e({title:"Success",description:"Platform created successfully!"}),C(null)}catch(ve){e({title:"Error",description:ve.message||"Failed to create platform",variant:"destructive"})}finally{M(!1)}},We=async()=>{if(!pe.current){pe.current=!0,H(!0),ie(null);try{const ee=`${mv}/api/sessions`,ve=await fetch(ee,{method:"GET",headers:{"Content-Type":"application/json"}});if(!ve.ok)throw new Error(`Request failed with status ${ve.status}`);const Re=await ve.json(),Ke=Array.isArray(Re)?Re:[Re];K(Ke),await ne(Ke),Date.now()>=He.current&&(He.current=Date.now()+2e3,await s())}catch(ee){ie((ee==null?void 0:ee.message)||"Failed to load sessions")}finally{H(!1),pe.current=!1}}},ne=async ee=>{var ve,Re,Ke;try{const{data:ft}=await ae.auth.getUser(),Rt=ft==null?void 0:ft.user;if(!Rt)return;const{data:Gt}=await ae.from("org_members").select("org_id").eq("user_id",Rt.id).limit(1),Je=(ve=Gt==null?void 0:Gt[0])==null?void 0:ve.org_id;if(!Je)return;const{data:en}=await ae.from("channels").select("id, display_name, provider, external_id, credentials").eq("org_id",Je).eq("provider","whatsapp");for(const Sn of ee){const ha=(Sn==null?void 0:Sn.name)||"";if(!ha)continue;const ma=String((Sn==null?void 0:Sn.status)||"").toUpperCase();let pa=((Re=Sn==null?void 0:Sn.me)==null?void 0:Re.id)||null;if(!pa&&ma==="WORKING")try{const ki=`${mv}/api/sessions/${encodeURIComponent(ha)}`,Si=await fetch(ki,{method:"GET",headers:{"Content-Type":"application/json"}});if(Si.ok){const is=await Si.json(),ss=Array.isArray(is)?is[0]:is;pa=((Ke=ss==null?void 0:ss.me)==null?void 0:Ke.id)||pa}}catch{}const vr=ma==="WORKING"&&!!pa,Qr=(ha||"").toLowerCase().replace(/\s/g,""),Rr=(en||[]).find(ki=>(ki.display_name||"").toLowerCase().replace(/\s/g,"")===Qr);if(!Rr)continue;const or=Rr!=null&&Rr.credentials&&typeof Rr.credentials=="object"?Rr.credentials:{},Mr=ha||Qr||null,Co=pa||(Rr==null?void 0:Rr.external_id)||(or==null?void 0:or.waha_session_name)||Mr;await ae.from("channels").update({is_active:vr,external_id:Co,credentials:{...or,waha_status:(Sn==null?void 0:Sn.status)||null,me_id:pa,waha_session_name:(or==null?void 0:or.waha_session_name)||Mr}}).eq("id",Rr.id)}}catch(ft){console.error("Failed to sync sessions to channels",ft)}};p.useEffect(()=>{ct==="whatsapp"&&re.current!=="whatsapp"&&(re.current="whatsapp",We()),ct!=="whatsapp"&&(re.current=ct||null)},[ct]),p.useEffect(()=>{const ee=ve=>{const Re=(ve==null?void 0:ve.detail)||{};ce(Re.qr||null),Re.sessionName&&ze(Re.sessionName),Ie(!0)};return window.addEventListener("open-wa-qr",ee),()=>window.removeEventListener("open-wa-qr",ee)},[]),p.useEffect(()=>((()=>{if(!Ne||!Pe)return;const ve=async()=>{var Re;try{if(!Ne)return;const Ke=`${mv}/api/sessions/${encodeURIComponent(Ne)}`,ft=await fetch(Ke,{method:"GET",headers:{"Content-Type":"application/json"}});if(!ft.ok)return;const Rt=await ft.json(),Gt=String((Rt==null?void 0:Rt.status)||"").toUpperCase();if(!!((Re=Rt==null?void 0:Rt.me)!=null&&Re.id)&&Gt==="WORKING"){Ie(!1),ce(null),await We();try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}e({title:"Connected",description:"WhatsApp connected successfully."})}}catch{}};ve(),at.current=window.setInterval(ve,3e3)})(),()=>{at.current&&(clearInterval(at.current),at.current=null)}),[Pe,Ne]);const Ee=async ee=>{z(ee),Ae(null),ce(null),Ie(!0),ze(ee);try{const ve=await Ca(Gn.ENDPOINTS.WHATSAPP.GET_LOGIN_QR,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:ee})});if(!ve.ok)throw new Error(`QR request failed: ${ve.status}`);const Re=ve.headers.get("content-type");if(Re&&Re.includes("image/")){const Ke=await ve.blob();ce(URL.createObjectURL(Ke))}else try{const Ke=await ve.json(),ft=Array.isArray(Ke)?Ke[0]:Ke;if(!(ft!=null&&ft.data)||!(ft!=null&&ft.mimetype))throw new Error("Invalid QR");ce(`data:${ft.mimetype};base64,${ft.data}`)}catch{const Ke=await ve.text();Ke&&ce(`data:image/png;base64,${Ke}`)}}catch(ve){Ae((ve==null?void 0:ve.message)||"Failed to get QR")}finally{z(null)}},be=async ee=>{if(!ee)throw new Error("Missing channel");const ve=Ue(ee);if(ve==="telegram"){const Ke=await Ca(Gn.ENDPOINTS.TELEGRAM.DELETE_WEBHOOK,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_id:ee.id,org_id:ee.org_id,bot_token:(ee==null?void 0:ee.external_id)||null})});if(!Ke.ok){const ft=await Ke.text().catch(()=>"");throw new Error(ft||`Telegram delete failed (${Ke.status})`)}return}if(ve==="whatsapp"){const Ke=String((ee==null?void 0:ee.display_name)||"").toLowerCase().replace(/\s/g,""),ft=await Ca(Gn.ENDPOINTS.WHATSAPP.DELETE_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({channel_id:ee.id,org_id:ee.org_id,session_name:Ke})});if(!ft.ok){const Rt=await ft.text().catch(()=>"");throw new Error(Rt||`WhatsApp delete failed (${ft.status})`)}return}const{error:Re}=await ae.from("channels").delete().eq("id",ee.id);if(Re)throw Re},Te=async ee=>{var ve;if(ee){le(Re=>new Set(Re).add(ee));try{const Re=await Ca(Gn.ENDPOINTS.WHATSAPP.DISCONNECT_SESSION,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_name:ee})});if(!Re.ok)throw new Error(`Disconnect failed ${Re.status}`);const Ke=Date.now();for(;Date.now()-Ke<2e4;){await We();const ft=R.find(en=>(en.name||"")===ee),Rt=String((ft==null?void 0:ft.status)||"").toUpperCase(),Gt=!!((ve=ft==null?void 0:ft.me)!=null&&ve.id);if(!(Rt==="WORKING"&&Gt))break;await new Promise(en=>setTimeout(en,2e3))}e({title:"Disconnected",description:`Session ${ee} disconnected`})}catch(Re){ie((Re==null?void 0:Re.message)||"Failed to disconnect session")}finally{le(Re=>{const Ke=new Set(Re);return Ke.delete(ee),Ke})}}};return i.jsxs("div",{className:"flex h-[calc(100vh-120px)]",children:[i.jsx("div",{className:"w-80 border-r border-border bg-card",children:i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h2",{className:"text-lg font-semibold",children:"Platforms"})}),i.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"This is where you can connect all your platforms"}),i.jsx(wl,{value:b,onValueChange:ee=>w(ee),className:"mb-3",children:i.jsxs(go,{className:"grid w-full grid-cols-3 bg-muted/50 p-1",children:[i.jsx(Kn,{value:"whatsapp",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("span",{children:"WhatsApp"})}),i.jsx(fe,{children:i.jsx("p",{children:"Kelola koneksi WhatsApp Business"})})]})}),i.jsx(Kn,{value:"telegram",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("span",{children:"Telegram"})}),i.jsx(fe,{children:i.jsx("p",{children:"Kelola koneksi Bot Telegram"})})]})}),i.jsx(Kn,{value:"web",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("span",{children:"Live Chat"})}),i.jsx(fe,{children:i.jsx("p",{children:"Kelola koneksi widget Live Chat"})})]})})]})}),n?i.jsx("div",{className:"space-y-2",children:[1,2,3].map(ee=>i.jsx(Me,{className:"animate-pulse",children:i.jsx(et,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),i.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})]})})},ee))}):r?i.jsx("div",{className:"text-sm text-red-600 p-4",children:r}):i.jsx("div",{className:"space-y-2",children:t.filter(ee=>Ue(ee)===b).length===0?i.jsx("div",{className:"text-sm text-muted-foreground p-4 text-center",children:"No platforms found. Create your first platform to get started."}):t.filter(ee=>Ue(ee)===b).map(ee=>i.jsx(Me,{className:`cursor-pointer transition-colors hover:bg-muted/50 ${x===ee.id?"border-primary shadow-sm":""}`,onClick:()=>y(ee.id),children:i.jsx(et,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-10 w-10 rounded-full bg-muted flex items-center justify-center",children:ee.profile_photo_url?i.jsx("img",{src:ee.profile_photo_url,alt:ee.display_name||"Platform",className:"h-10 w-10 rounded-full object-cover"}):i.jsx("span",{className:"text-xs font-medium text-foreground/70",children:(ee.display_name||"").charAt(0)||"?"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-medium text-sm truncate",children:ee.display_name||"Unnamed Platform"}),i.jsx("p",{className:"text-[11px] text-muted-foreground capitalize",children:Ue(ee)}),i.jsx("p",{className:"text-xs text-muted-foreground",children:ee.description||ee.website_url||""})]}),i.jsx("div",{className:`h-2.5 w-2.5 rounded-full ${ee.status==="active"?"bg-green-500":"bg-gray-300"}`,"aria-label":ee.status==="active"?"Active":"Inactive",title:ee.status==="active"?"Active":"Inactive"})]})})},ee.id))}),i.jsxs(fn,{open:j,onOpenChange:S,children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(qN,{asChild:!0,children:i.jsxs(te,{variant:"outline",className:"w-full mt-4",children:[i.jsx(As,{className:"h-4 w-4 mr-2"}),"Add Channel"]})})}),i.jsx(fe,{children:i.jsx("p",{children:"Tambahkan saluran atau platform baru"})})]}),i.jsxs(on,{className:"sm:max-w-xl p-0 overflow-hidden",children:[i.jsxs(ln,{className:"p-6 pb-4",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx(cn,{className:"text-lg font-semibold",children:"Platform"})}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Select the platform you wish to establish your new inbox."})]}),i.jsxs("div",{className:"px-6 pb-6",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsxs("button",{onClick:()=>$t("whatsapp"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(cv,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"WhatsApp"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Connect your WhatsApp Business account"})]}),i.jsxs("button",{onClick:()=>$t("web"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(pP,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"Web Live Chat"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Add live chat to your website"})]}),i.jsxs("button",{onClick:()=>$t("telegram"),className:"flex flex-col items-center p-4 rounded-lg border-2 border-border hover:border-primary hover:bg-accent/50 transition-all duration-200 group",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-400 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform duration-200",children:i.jsx(Qh,{className:"h-6 w-6 text-white"})}),i.jsx("span",{className:"text-sm font-medium text-center",children:"Telegram Bot"}),i.jsx("span",{className:"text-xs text-muted-foreground text-center mt-1",children:"Connect your Telegram bot via BotFather"})]})]}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-xs text-muted-foreground",children:"More platforms coming soon"})})]})]})]}),i.jsx(Ple,{isOpen:A==="whatsapp",onClose:()=>C(null),onSubmit:ue,isSubmitting:T}),i.jsx(Tle,{isOpen:A==="telegram",onClose:()=>C(null),onSubmit:ue,isSubmitting:T}),i.jsx(Ole,{isOpen:A==="web",onClose:()=>C(null),onSubmit:ue,isSubmitting:T}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Add a new platform inbox"})]})}),i.jsx("div",{className:"flex-1 p-6 overflow-y-auto",children:i.jsxs("div",{className:"max-w-4xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:oe!=null&&oe.display_name?oe.display_name.toUpperCase():"Select Platform"}),i.jsx("p",{className:"text-muted-foreground",children:oe?oe.description||oe.website_url||"":"Choose a platform to manage"})]}),i.jsx("div",{className:"flex gap-2",children:oe&&i.jsxs(i.Fragment,{children:[i.jsx(te,{variant:"outline",size:"sm",disabled:B||!k||k===(oe==null?void 0:oe.ai_profile_id),onClick:async()=>{if(oe)try{O(!0);const ee={};if(k&&k!==(oe==null?void 0:oe.ai_profile_id)&&(ee.ai_profile_id=k),Object.keys(ee).length===0){e({title:"No changes",description:"There are no changes to save."});return}await o(oe.id,ee),e({title:"Saved",description:"Platform settings updated."});try{window.dispatchEvent(new CustomEvent("refresh-platforms"))}catch{}await s()}catch(ee){e({title:"Error",description:(ee==null?void 0:ee.message)||"Failed to save platform",variant:"destructive"})}finally{O(!1)}},children:B?i.jsx(Kt,{className:"h-4 w-4 animate-spin"}):"Save"}),i.jsx(te,{variant:"outline",size:"sm",disabled:pt,onClick:async()=>{if(oe)try{_t(!0),await be(oe),e({title:"Deleted",description:"Channel has been deleted."}),y(null),await s()}catch(ee){e({title:"Error",description:(ee==null?void 0:ee.message)||"Failed to delete channel",variant:"destructive"})}finally{_t(!1)}},children:pt?i.jsx(Kt,{className:"h-4 w-4 animate-spin"}):i.jsx(Er,{className:"h-4 w-4"})})]})})]}),i.jsxs("div",{className:"grid gap-6",children:[oe?oe&&i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{className:"text-base",children:"Channel Details"})}),i.jsxs(et,{className:"space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Provider",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Jenis platform komunikasi yang digunakan (WhatsApp, Telegram, Live Chat)"})})]})]}),i.jsx("div",{className:"capitalize",children:Ue(oe)})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Status",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Status koneksi platform saat ini (Aktif atau Tidak Aktif)"})})]})]}),i.jsx("div",{children:oe.status==="active"?"Active":"Inactive"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Display Name",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Nama yang ditampilkan untuk platform ini"})})]})]}),i.jsx("div",{children:oe.display_name||""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["AI Agent",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Agen AI yang ditugaskan untuk menangani percakapan di platform ini"})})]})]}),i.jsx("div",{children:((ut=u.find(ee=>ee.id===(oe==null?void 0:oe.ai_profile_id)))==null?void 0:ut.name)||""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Created At",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Tanggal dan waktu platform ini dibuat"})})]})]}),i.jsx("div",{children:oe.created_at?new Date(oe.created_at).toLocaleString():""})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:["Secret Token",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Token rahasia untuk autentikasi dan keamanan platform"})})]})]}),i.jsx("div",{children:(()=>{const ee=oe==null?void 0:oe.secret_token;return ee?ee.length>8?`${ee.slice(0,4)}${ee.slice(-2)}`:"":""})()})]})]}),i.jsxs("div",{className:"rounded-lg border p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium mb-3",children:["Channel Profile",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Kelola foto profil atau logo untuk platform ini"})})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-12 w-12 rounded-full bg-muted flex items-center justify-center overflow-hidden",children:oe!=null&&oe.profile_photo_url?i.jsx("img",{src:(oe==null?void 0:oe.profile_photo_url)||"",alt:"Avatar",className:"h-12 w-12 object-cover"}):i.jsx("span",{className:"text-xs text-foreground/70",children:((oe==null?void 0:oe.display_name)||"?").charAt(0)})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"outline",size:"sm",onClick:()=>{var ee;return(ee=D.current)==null?void 0:ee.click()},disabled:!oe||$||N,children:$?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 animate-spin"})," Uploading..."]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Nc,{className:"h-4 w-4"})," Upload Avatar"]})})}),i.jsx(fe,{children:i.jsx("p",{children:"Unggah foto profil atau logo untuk platform ini"})})]}),i.jsx("input",{ref:D,type:"file",accept:"image/png,image/jpeg,image/webp",className:"hidden",onChange:async ee=>{var Re;const ve=(Re=ee.currentTarget.files)==null?void 0:Re[0];if(!(!ve||!oe))try{L(!0),await l(oe.id,ve,oe.org_id),e({title:"Avatar updated"}),await s()}catch(Ke){e({title:"Avatar upload failed",description:(Ke==null?void 0:Ke.message)||"Please try again",variant:"destructive"})}finally{L(!1);try{ee.currentTarget.value=""}catch{}}}}),!!(oe!=null&&oe.logo_url||oe!=null&&oe.profile_photo_url)&&i.jsx(te,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",disabled:!oe||$||N,onClick:async()=>{if(oe)try{U(!0),await c(oe.id,oe.org_id),await s(),e({title:"Avatar removed"})}catch(ee){e({title:"Failed to remove avatar",description:(ee==null?void 0:ee.message)||"Please try again",variant:"destructive"})}finally{U(!1)}},children:N?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 animate-spin"})," Removing..."]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Er,{className:"h-4 w-4"})," Remove"]})})]}),i.jsxs("div",{className:"flex items-center gap-2 ml-2 text-xs text-muted-foreground",children:["Accepted: PNG, JPG, WEBP  Max 5 MB",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Format file yang didukung: PNG, JPG, WEBP dengan ukuran maksimal 5 MB"})})]})]})]})]})]})]}):i.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:i.jsx(cv,{className:"w-8 h-8 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Platform Selected"}),i.jsx("p",{className:"text-muted-foreground mb-6 max-w-md",children:"Select a platform from the left panel to view its details, manage settings, and configure agents."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 w-full max-w-2xl",children:[i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(cv,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"WhatsApp"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect your WhatsApp business account"})]}),i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(Qh,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"Telegram"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Set up a Telegram bot for customer support"})]}),i.jsxs("div",{className:"p-4 border rounded-lg text-center",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-2",children:i.jsx(pP,{className:"w-4 h-4 text-blue-600"})}),i.jsx("h4",{className:"font-medium mb-1",children:"Live Chat"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Embed chat widget on your website"})]})]})]}),ct==="web"&&i.jsx("div",{className:"grid gap-6",children:it(!0)}),ct==="whatsapp"&&i.jsxs("div",{className:"grid gap-6",children:[it(!1),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{className:"text-base",children:"WhatsApp Sessions"})}),i.jsxs(et,{children:[Q&&i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading sessions..."}),V&&i.jsx("div",{className:"text-sm text-red-600",children:V}),!Q&&!V&&i.jsx("div",{className:"space-y-3",children:(()=>{const ee=((oe==null?void 0:oe.display_name)||"").toLowerCase().replace(/\s/g,""),ve=R.filter(Re=>((Re==null?void 0:Re.name)||"").toLowerCase().replace(/\s/g,"")===ee);return ve.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No session found for this channel."}):ve.map((Re,Ke)=>{var vr,Qr;const ft=((vr=Re==null?void 0:Re.me)==null?void 0:vr.id)||"",Rt=ft?ft.replace(/@c\.us$/,""):"",Gt=((Qr=Re==null?void 0:Re.me)==null?void 0:Qr.pushName)||"-",Je=String((Re==null?void 0:Re.status)||"UNKNOWN").toUpperCase(),en=(Re==null?void 0:Re.name)||"",Sn=G.has(en)||se.has(en)||_e===en,ha=!!Rt,ma=Je==="SCAN_QR_CODE",pa=Je==="WORKING"&&ha;return i.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:Gt}),i.jsx("div",{className:"text-xs text-muted-foreground",children:ma||!ha?"Not connected":Rt})]}),i.jsx("div",{className:"flex items-center gap-2",children:pa?i.jsx(te,{variant:"outline",size:"sm",className:"text-amber-700 border-amber-200 hover:bg-amber-50",disabled:Sn,onClick:()=>Te(en),children:G.has(en)?i.jsx(Kt,{className:"h-3 w-3 animate-spin"}):"Disconnect"}):i.jsx(te,{variant:"outline",className:"text-blue-600 border-blue-200 hover:bg-blue-50",size:"sm",disabled:Sn,onClick:()=>Ee(en),children:_e===en?i.jsx(Kt,{className:"h-3 w-3 animate-spin"}):"Connect"})})]},Ke)})})()})]})]}),i.jsx(fn,{open:Pe,onOpenChange:Ie,children:i.jsxs(on,{className:"sm:max-w-md",children:[i.jsxs(ln,{children:[i.jsx(cn,{children:"Connect WhatsApp"}),i.jsx(Pr,{children:"Scan this QR with your WhatsApp app to connect."})]}),ke&&i.jsx("div",{className:"text-sm text-red-600",children:ke}),q?i.jsxs("div",{className:"flex flex-col items-center gap-3",children:[i.jsx("img",{src:q,alt:"QR",className:"w-56 h-56 rounded border"}),i.jsx(te,{variant:"outline",onClick:()=>Ee(Ne||((oe==null?void 0:oe.display_name)||"").replace(/\s/g,"")),disabled:!!_e,className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:_e?i.jsx(Kt,{className:"h-4 w-4 animate-spin"}):"Refresh QR"})]}):i.jsx("div",{className:"flex items-center justify-center h-60",children:i.jsx(Kt,{className:"h-6 w-6 animate-spin"})})]})})]}),ct==="telegram"&&i.jsx("div",{className:"grid gap-6",children:it(!1)})]}),oe&&i.jsx("div",{className:"mt-8",children:i.jsxs(Me,{className:"bg-red-50 border-2 border-red-200",children:[i.jsx(nt,{children:i.jsxs(tt,{className:"text-base text-red-700 flex items-center gap-2",children:["Danger Zone",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-red-600 cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Zona berbahaya untuk tindakan yang tidak dapat dibatalkan seperti menghapus platform"})})]})]})}),i.jsx(et,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-red-700",children:"Delete this channel"}),i.jsx("div",{className:"text-xs text-red-600/80",children:"This action cannot be undone."})]}),i.jsxs(xb,{children:[i.jsx(hle,{asChild:!0,children:i.jsx(te,{className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete Channel"})}),i.jsxs(Ap,{children:[i.jsxs(Ep,{children:[i.jsx(Tp,{children:"Delete channel?"}),i.jsxs(Op,{children:["This will permanently delete ",(oe==null?void 0:oe.display_name)||"this channel",". This action cannot be undone."]})]}),i.jsxs(Pp,{children:[i.jsx(Rp,{children:"Cancel"}),i.jsx(Ip,{className:`bg-red-600 hover:bg-red-700 text-white ${pt?"animate-pulse cursor-wait":""}`,"aria-busy":pt,disabled:pt,onClick:async()=>{if(oe)try{_t(!0),await be(oe),e({title:"Deleted",description:"Channel has been deleted."}),y(null),await s()}catch(ee){e({title:"Error",description:(ee==null?void 0:ee.message)||"Failed to delete channel",variant:"destructive"})}finally{_t(!1)}},children:pt?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Deleting"})]}):"Delete"})]})]})]})]})})]})})]})})]})};var Rle=Array.isArray,Ma=Rle,Mle=typeof rr=="object"&&rr&&rr.Object===Object&&rr,QU=Mle,Dle=QU,$le=typeof self=="object"&&self&&self.Object===Object&&self,Lle=Dle||$le||Function("return this")(),Ms=Lle,Fle=Ms,Ble=Fle.Symbol,Mp=Ble,VT=Mp,ZU=Object.prototype,Ule=ZU.hasOwnProperty,zle=ZU.toString,Wf=VT?VT.toStringTag:void 0;function qle(e){var t=Ule.call(e,Wf),n=e[Wf];try{e[Wf]=void 0;var r=!0}catch{}var a=zle.call(e);return r&&(t?e[Wf]=n:delete e[Wf]),a}var Wle=qle,Hle=Object.prototype,Vle=Hle.toString;function Kle(e){return Vle.call(e)}var Gle=Kle,KT=Mp,Yle=Wle,Xle=Gle,Jle="[object Null]",Qle="[object Undefined]",GT=KT?KT.toStringTag:void 0;function Zle(e){return e==null?e===void 0?Qle:Jle:GT&&GT in Object(e)?Yle(e):Xle(e)}var _o=Zle;function ece(e){return e!=null&&typeof e=="object"}var ko=ece,tce=_o,nce=ko,rce="[object Symbol]";function ace(e){return typeof e=="symbol"||nce(e)&&tce(e)==rce}var ff=ace,ice=Ma,sce=ff,oce=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lce=/^\w*$/;function cce(e,t){if(ice(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||sce(e)?!0:lce.test(e)||!oce.test(e)||t!=null&&e in Object(t)}var hC=cce;function uce(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Dl=uce;const hf=un(Dl);var dce=_o,fce=Dl,hce="[object AsyncFunction]",mce="[object Function]",pce="[object GeneratorFunction]",gce="[object Proxy]";function vce(e){if(!fce(e))return!1;var t=dce(e);return t==mce||t==pce||t==hce||t==gce}var mC=vce;const Mt=un(mC);var xce=Ms,yce=xce["__core-js_shared__"],bce=yce,Uw=bce,YT=function(){var e=/[^.]+$/.exec(Uw&&Uw.keys&&Uw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function wce(e){return!!YT&&YT in e}var jce=wce,_ce=Function.prototype,kce=_ce.toString;function Sce(e){if(e!=null){try{return kce.call(e)}catch{}try{return e+""}catch{}}return""}var ez=Sce,Nce=mC,Cce=jce,Ace=Dl,Ece=ez,Pce=/[\\^$.*+?()[\]{}|]/g,Tce=/^\[object .+?Constructor\]$/,Oce=Function.prototype,Ice=Object.prototype,Rce=Oce.toString,Mce=Ice.hasOwnProperty,Dce=RegExp("^"+Rce.call(Mce).replace(Pce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $ce(e){if(!Ace(e)||Cce(e))return!1;var t=Nce(e)?Dce:Tce;return t.test(Ece(e))}var Lce=$ce;function Fce(e,t){return e==null?void 0:e[t]}var Bce=Fce,Uce=Lce,zce=Bce;function qce(e,t){var n=zce(e,t);return Uce(n)?n:void 0}var eu=qce,Wce=eu,Hce=Wce(Object,"create"),Sb=Hce,XT=Sb;function Vce(){this.__data__=XT?XT(null):{},this.size=0}var Kce=Vce;function Gce(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Yce=Gce,Xce=Sb,Jce="__lodash_hash_undefined__",Qce=Object.prototype,Zce=Qce.hasOwnProperty;function eue(e){var t=this.__data__;if(Xce){var n=t[e];return n===Jce?void 0:n}return Zce.call(t,e)?t[e]:void 0}var tue=eue,nue=Sb,rue=Object.prototype,aue=rue.hasOwnProperty;function iue(e){var t=this.__data__;return nue?t[e]!==void 0:aue.call(t,e)}var sue=iue,oue=Sb,lue="__lodash_hash_undefined__";function cue(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=oue&&t===void 0?lue:t,this}var uue=cue,due=Kce,fue=Yce,hue=tue,mue=sue,pue=uue;function mf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}mf.prototype.clear=due;mf.prototype.delete=fue;mf.prototype.get=hue;mf.prototype.has=mue;mf.prototype.set=pue;var gue=mf;function vue(){this.__data__=[],this.size=0}var xue=vue;function yue(e,t){return e===t||e!==e&&t!==t}var pC=yue,bue=pC;function wue(e,t){for(var n=e.length;n--;)if(bue(e[n][0],t))return n;return-1}var Nb=wue,jue=Nb,_ue=Array.prototype,kue=_ue.splice;function Sue(e){var t=this.__data__,n=jue(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():kue.call(t,n,1),--this.size,!0}var Nue=Sue,Cue=Nb;function Aue(e){var t=this.__data__,n=Cue(t,e);return n<0?void 0:t[n][1]}var Eue=Aue,Pue=Nb;function Tue(e){return Pue(this.__data__,e)>-1}var Oue=Tue,Iue=Nb;function Rue(e,t){var n=this.__data__,r=Iue(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Mue=Rue,Due=xue,$ue=Nue,Lue=Eue,Fue=Oue,Bue=Mue;function pf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pf.prototype.clear=Due;pf.prototype.delete=$ue;pf.prototype.get=Lue;pf.prototype.has=Fue;pf.prototype.set=Bue;var Cb=pf,Uue=eu,zue=Ms,que=Uue(zue,"Map"),gC=que,JT=gue,Wue=Cb,Hue=gC;function Vue(){this.size=0,this.__data__={hash:new JT,map:new(Hue||Wue),string:new JT}}var Kue=Vue;function Gue(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Yue=Gue,Xue=Yue;function Jue(e,t){var n=e.__data__;return Xue(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Ab=Jue,Que=Ab;function Zue(e){var t=Que(this,e).delete(e);return this.size-=t?1:0,t}var ede=Zue,tde=Ab;function nde(e){return tde(this,e).get(e)}var rde=nde,ade=Ab;function ide(e){return ade(this,e).has(e)}var sde=ide,ode=Ab;function lde(e,t){var n=ode(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var cde=lde,ude=Kue,dde=ede,fde=rde,hde=sde,mde=cde;function gf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}gf.prototype.clear=ude;gf.prototype.delete=dde;gf.prototype.get=fde;gf.prototype.has=hde;gf.prototype.set=mde;var vC=gf,tz=vC,pde="Expected a function";function xC(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(pde);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],s=n.cache;if(s.has(a))return s.get(a);var o=e.apply(this,r);return n.cache=s.set(a,o)||s,o};return n.cache=new(xC.Cache||tz),n}xC.Cache=tz;var nz=xC;const gde=un(nz);var vde=nz,xde=500;function yde(e){var t=vde(e,function(r){return n.size===xde&&n.clear(),r}),n=t.cache;return t}var bde=yde,wde=bde,jde=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_de=/\\(\\)?/g,kde=wde(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(jde,function(n,r,a,s){t.push(a?s.replace(_de,"$1"):r||n)}),t}),Sde=kde;function Nde(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var yC=Nde,QT=Mp,Cde=yC,Ade=Ma,Ede=ff,Pde=1/0,ZT=QT?QT.prototype:void 0,e2=ZT?ZT.toString:void 0;function rz(e){if(typeof e=="string")return e;if(Ade(e))return Cde(e,rz)+"";if(Ede(e))return e2?e2.call(e):"";var t=e+"";return t=="0"&&1/e==-Pde?"-0":t}var Tde=rz,Ode=Tde;function Ide(e){return e==null?"":Ode(e)}var az=Ide,Rde=Ma,Mde=hC,Dde=Sde,$de=az;function Lde(e,t){return Rde(e)?e:Mde(e,t)?[e]:Dde($de(e))}var iz=Lde,Fde=ff,Bde=1/0;function Ude(e){if(typeof e=="string"||Fde(e))return e;var t=e+"";return t=="0"&&1/e==-Bde?"-0":t}var Eb=Ude,zde=iz,qde=Eb;function Wde(e,t){t=zde(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[qde(t[n++])];return n&&n==r?e:void 0}var bC=Wde,Hde=bC;function Vde(e,t,n){var r=e==null?void 0:Hde(e,t);return r===void 0?n:r}var sz=Vde;const vi=un(sz);function Kde(e){return e==null}var Gde=Kde;const an=un(Gde);var Yde=_o,Xde=Ma,Jde=ko,Qde="[object String]";function Zde(e){return typeof e=="string"||!Xde(e)&&Jde(e)&&Yde(e)==Qde}var efe=Zde;const Fc=un(efe);var oz={exports:{}},mn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wC=Symbol.for("react.element"),jC=Symbol.for("react.portal"),Pb=Symbol.for("react.fragment"),Tb=Symbol.for("react.strict_mode"),Ob=Symbol.for("react.profiler"),Ib=Symbol.for("react.provider"),Rb=Symbol.for("react.context"),tfe=Symbol.for("react.server_context"),Mb=Symbol.for("react.forward_ref"),Db=Symbol.for("react.suspense"),$b=Symbol.for("react.suspense_list"),Lb=Symbol.for("react.memo"),Fb=Symbol.for("react.lazy"),nfe=Symbol.for("react.offscreen"),lz;lz=Symbol.for("react.module.reference");function ji(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wC:switch(e=e.type,e){case Pb:case Ob:case Tb:case Db:case $b:return e;default:switch(e=e&&e.$$typeof,e){case tfe:case Rb:case Mb:case Fb:case Lb:case Ib:return e;default:return t}}case jC:return t}}}mn.ContextConsumer=Rb;mn.ContextProvider=Ib;mn.Element=wC;mn.ForwardRef=Mb;mn.Fragment=Pb;mn.Lazy=Fb;mn.Memo=Lb;mn.Portal=jC;mn.Profiler=Ob;mn.StrictMode=Tb;mn.Suspense=Db;mn.SuspenseList=$b;mn.isAsyncMode=function(){return!1};mn.isConcurrentMode=function(){return!1};mn.isContextConsumer=function(e){return ji(e)===Rb};mn.isContextProvider=function(e){return ji(e)===Ib};mn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wC};mn.isForwardRef=function(e){return ji(e)===Mb};mn.isFragment=function(e){return ji(e)===Pb};mn.isLazy=function(e){return ji(e)===Fb};mn.isMemo=function(e){return ji(e)===Lb};mn.isPortal=function(e){return ji(e)===jC};mn.isProfiler=function(e){return ji(e)===Ob};mn.isStrictMode=function(e){return ji(e)===Tb};mn.isSuspense=function(e){return ji(e)===Db};mn.isSuspenseList=function(e){return ji(e)===$b};mn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Pb||e===Ob||e===Tb||e===Db||e===$b||e===nfe||typeof e=="object"&&e!==null&&(e.$$typeof===Fb||e.$$typeof===Lb||e.$$typeof===Ib||e.$$typeof===Rb||e.$$typeof===Mb||e.$$typeof===lz||e.getModuleId!==void 0)};mn.typeOf=ji;oz.exports=mn;var rfe=oz.exports,afe=_o,ife=ko,sfe="[object Number]";function ofe(e){return typeof e=="number"||ife(e)&&afe(e)==sfe}var cz=ofe;const lfe=un(cz);var cfe=cz;function ufe(e){return cfe(e)&&e!=+e}var dfe=ufe;const Dp=un(dfe);var Hi=function(t){return t===0?0:t>0?1:-1},oc=function(t){return Fc(t)&&t.indexOf("%")===t.length-1},Ve=function(t){return lfe(t)&&!Dp(t)},ffe=function(t){return an(t)},mr=function(t){return Ve(t)||Fc(t)},hfe=0,Bb=function(t){var n=++hfe;return"".concat(t||"").concat(n)},Bc=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ve(t)&&!Fc(t))return r;var s;if(oc(t)){var o=t.indexOf("%");s=n*parseFloat(t.slice(0,o))/100}else s=+t;return Dp(s)&&(s=r),a&&s>n&&(s=n),s},Go=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},mfe=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},pu=function(t,n){return Ve(t)&&Ve(n)?function(r){return t+r*(n-t)}:function(){return n}};function p_(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):vi(r,t))===n})}var pfe=function(t,n){return Ve(t)&&Ve(n)?t-n:Fc(t)&&Fc(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function id(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function g_(e){"@babel/helpers - typeof";return g_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g_(e)}var gfe=["viewBox","children"],vfe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],t2=["points","pathLength"],zw={svg:gfe,polygon:t2,polyline:t2},_C=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ox=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(p.isValidElement(t)&&(r=t.props),!hf(r))return null;var a={};return Object.keys(r).forEach(function(s){_C.includes(s)&&(a[s]=n||function(o){return r[s](r,o)})}),a},xfe=function(t,n,r){return function(a){return t(n,r,a),null}},lx=function(t,n,r){if(!hf(t)||g_(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(s){var o=t[s];_C.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=xfe(o,n,r))}),a},yfe=["children"],bfe=["children"];function n2(e,t){if(e==null)return{};var n=wfe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wfe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var r2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},io=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},a2=null,qw=null,kC=function e(t){if(t===a2&&Array.isArray(qw))return qw;var n=[];return p.Children.forEach(t,function(r){an(r)||(rfe.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),qw=n,a2=t,n};function Yi(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return io(a)}):r=[io(t)],kC(e).forEach(function(a){var s=vi(a,"type.displayName")||vi(a,"type.name");r.indexOf(s)!==-1&&n.push(a)}),n}function Ua(e,t){var n=Yi(e,t);return n&&n[0]}var i2=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!Ve(r)||r<=0||!Ve(a)||a<=0)},jfe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],_fe=function(t){return t&&t.type&&Fc(t.type)&&jfe.indexOf(t.type)>=0},kfe=function(t,n,r,a){var s,o=(s=zw==null?void 0:zw[a])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Mt(t)&&(a&&o.includes(n)||vfe.includes(n))||r&&_C.includes(n)},rn=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(p.isValidElement(t)&&(a=t.props),!hf(a))return null;var s={};return Object.keys(a).forEach(function(o){var l;kfe((l=a)===null||l===void 0?void 0:l[o],o,n,r)&&(s[o]=a[o])}),s},v_=function e(t,n){if(t===n)return!0;var r=p.Children.count(t);if(r!==p.Children.count(n))return!1;if(r===0)return!0;if(r===1)return s2(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var s=t[a],o=n[a];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!s2(s,o))return!1}return!0},s2=function(t,n){if(an(t)&&an(n))return!0;if(!an(t)&&!an(n)){var r=t.props||{},a=r.children,s=n2(r,yfe),o=n.props||{},l=o.children,c=n2(o,bfe);return a&&l?id(s,c)&&v_(a,l):!a&&!l?id(s,c):!1}return!1},o2=function(t,n){var r=[],a={};return kC(t).forEach(function(s,o){if(_fe(s))r.push(s);else if(s){var l=io(s.type),c=n[l]||{},u=c.handler,f=c.once;if(u&&(!f||!a[l])){var d=u(s,l,o);r.push(d),a[l]=!0}}}),r},Sfe=function(t){var n=t&&t.type;return n&&r2[n]?r2[n]:null},Nfe=function(t,n){return kC(n).indexOf(t)},Cfe=["children","width","height","viewBox","className","style","title","desc"];function x_(){return x_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x_.apply(this,arguments)}function Afe(e,t){if(e==null)return{};var n=Efe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Efe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function y_(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,u=Afe(e,Cfe),f=a||{width:n,height:r,x:0,y:0},d=Zt("recharts-surface",s);return X.createElement("svg",x_({},rn(u,!0,"svg"),{className:d,width:n,height:r,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),X.createElement("title",null,l),X.createElement("desc",null,c),t)}var Pfe=["children","className"];function b_(){return b_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b_.apply(this,arguments)}function Tfe(e,t){if(e==null)return{};var n=Ofe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ofe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var wr=X.forwardRef(function(e,t){var n=e.children,r=e.className,a=Tfe(e,Pfe),s=Zt("recharts-layer",r);return X.createElement("g",b_({className:s},rn(a,!0),{ref:t}),n)}),so=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s]};function Ife(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(a);++r<a;)s[r]=e[r+t];return s}var Rfe=Ife,Mfe=Rfe;function Dfe(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:Mfe(e,t,n)}var $fe=Dfe,Lfe="\\ud800-\\udfff",Ffe="\\u0300-\\u036f",Bfe="\\ufe20-\\ufe2f",Ufe="\\u20d0-\\u20ff",zfe=Ffe+Bfe+Ufe,qfe="\\ufe0e\\ufe0f",Wfe="\\u200d",Hfe=RegExp("["+Wfe+Lfe+zfe+qfe+"]");function Vfe(e){return Hfe.test(e)}var uz=Vfe;function Kfe(e){return e.split("")}var Gfe=Kfe,dz="\\ud800-\\udfff",Yfe="\\u0300-\\u036f",Xfe="\\ufe20-\\ufe2f",Jfe="\\u20d0-\\u20ff",Qfe=Yfe+Xfe+Jfe,Zfe="\\ufe0e\\ufe0f",ehe="["+dz+"]",w_="["+Qfe+"]",j_="\\ud83c[\\udffb-\\udfff]",the="(?:"+w_+"|"+j_+")",fz="[^"+dz+"]",hz="(?:\\ud83c[\\udde6-\\uddff]){2}",mz="[\\ud800-\\udbff][\\udc00-\\udfff]",nhe="\\u200d",pz=the+"?",gz="["+Zfe+"]?",rhe="(?:"+nhe+"(?:"+[fz,hz,mz].join("|")+")"+gz+pz+")*",ahe=gz+pz+rhe,ihe="(?:"+[fz+w_+"?",w_,hz,mz,ehe].join("|")+")",she=RegExp(j_+"(?="+j_+")|"+ihe+ahe,"g");function ohe(e){return e.match(she)||[]}var lhe=ohe,che=Gfe,uhe=uz,dhe=lhe;function fhe(e){return uhe(e)?dhe(e):che(e)}var hhe=fhe,mhe=$fe,phe=uz,ghe=hhe,vhe=az;function xhe(e){return function(t){t=vhe(t);var n=phe(t)?ghe(t):void 0,r=n?n[0]:t.charAt(0),a=n?mhe(n,1).join(""):t.slice(1);return r[e]()+a}}var yhe=xhe,bhe=yhe,whe=bhe("toUpperCase"),jhe=whe;const Ub=un(jhe);function jn(e){return function(){return e}}const vz=Math.cos,cx=Math.sin,rs=Math.sqrt,ux=Math.PI,zb=2*ux,__=Math.PI,k_=2*__,Jl=1e-6,_he=k_-Jl;function xz(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function khe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return xz;const n=10**t;return function(r){this._+=r[0];for(let a=1,s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class She{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?xz:khe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,s,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,a,s){if(t=+t,n=+n,r=+r,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=r-t,u=a-n,f=o-t,d=l-n,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>Jl)if(!(Math.abs(d*c-u*f)>Jl)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,g=a-l,v=c*c+u*u,x=m*m+g*g,y=Math.sqrt(v),b=Math.sqrt(h),w=s*Math.tan((__-Math.acos((v+h-x)/(2*y*b)))/2),k=w/b,_=w/y;Math.abs(k-1)>Jl&&this._append`L${t+k*f},${n+k*d}`,this._append`A${s},${s},0,0,${+(d*m>f*g)},${this._x1=t+_*c},${this._y1=n+_*u}`}}arc(t,n,r,a,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),c=r*Math.sin(a),u=t+l,f=n+c,d=1^o,h=o?a-s:s-a;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Jl||Math.abs(this._y1-f)>Jl)&&this._append`L${u},${f}`,r&&(h<0&&(h=h%k_+k_),h>_he?this._append`A${r},${r},0,1,${d},${t-l},${n-c}A${r},${r},0,1,${d},${this._x1=u},${this._y1=f}`:h>Jl&&this._append`A${r},${r},0,${+(h>=__)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function SC(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new She(t)}function NC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yz(e){this._context=e}yz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function qb(e){return new yz(e)}function bz(e){return e[0]}function wz(e){return e[1]}function jz(e,t){var n=jn(!0),r=null,a=qb,s=null,o=SC(l);e=typeof e=="function"?e:e===void 0?bz:jn(e),t=typeof t=="function"?t:t===void 0?wz:jn(t);function l(c){var u,f=(c=NC(c)).length,d,h=!1,m;for(r==null&&(s=a(m=o())),u=0;u<=f;++u)!(u<f&&n(d=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(d,u,c),+t(d,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:jn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:jn(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:jn(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,r!=null&&(s=a(r)),l):a},l.context=function(c){return arguments.length?(c==null?r=s=null:s=a(r=c),l):r},l}function Sg(e,t,n){var r=null,a=jn(!0),s=null,o=qb,l=null,c=SC(u);e=typeof e=="function"?e:e===void 0?bz:jn(+e),t=typeof t=="function"?t:jn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?wz:jn(+n);function u(d){var h,m,g,v=(d=NC(d)).length,x,y=!1,b,w=new Array(v),k=new Array(v);for(s==null&&(l=o(b=c())),h=0;h<=v;++h){if(!(h<v&&a(x=d[h],h,d))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(w[g],k[g]);l.lineEnd(),l.areaEnd()}y&&(w[h]=+e(x,h,d),k[h]=+t(x,h,d),l.point(r?+r(x,h,d):w[h],n?+n(x,h,d):k[h]))}if(b)return l=null,b+""||null}function f(){return jz().defined(a).curve(o).context(s)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:jn(+d),r=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:jn(+d),u):e},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:jn(+d),u):r},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:jn(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:jn(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:jn(+d),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:jn(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,s!=null&&(l=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=l=null:l=o(s=d),u):s},u}class _z{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Nhe(e){return new _z(e,!0)}function Che(e){return new _z(e,!1)}const CC={draw(e,t){const n=rs(t/ux);e.moveTo(n,0),e.arc(0,0,n,0,zb)}},Ahe={draw(e,t){const n=rs(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},kz=rs(1/3),Ehe=kz*2,Phe={draw(e,t){const n=rs(t/Ehe),r=n*kz;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},The={draw(e,t){const n=rs(t),r=-n/2;e.rect(r,r,n,n)}},Ohe=.8908130915292852,Sz=cx(ux/10)/cx(7*ux/10),Ihe=cx(zb/10)*Sz,Rhe=-vz(zb/10)*Sz,Mhe={draw(e,t){const n=rs(t*Ohe),r=Ihe*n,a=Rhe*n;e.moveTo(0,-n),e.lineTo(r,a);for(let s=1;s<5;++s){const o=zb*s/5,l=vz(o),c=cx(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*a,c*r+l*a)}e.closePath()}},Ww=rs(3),Dhe={draw(e,t){const n=-rs(t/(Ww*3));e.moveTo(0,n*2),e.lineTo(-Ww*n,-n),e.lineTo(Ww*n,-n),e.closePath()}},ei=-.5,ti=rs(3)/2,S_=1/rs(12),$he=(S_/2+1)*3,Lhe={draw(e,t){const n=rs(t/$he),r=n/2,a=n*S_,s=r,o=n*S_+n,l=-s,c=o;e.moveTo(r,a),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(ei*r-ti*a,ti*r+ei*a),e.lineTo(ei*s-ti*o,ti*s+ei*o),e.lineTo(ei*l-ti*c,ti*l+ei*c),e.lineTo(ei*r+ti*a,ei*a-ti*r),e.lineTo(ei*s+ti*o,ei*o-ti*s),e.lineTo(ei*l+ti*c,ei*c-ti*l),e.closePath()}};function Fhe(e,t){let n=null,r=SC(a);e=typeof e=="function"?e:jn(e||CC),t=typeof t=="function"?t:jn(t===void 0?64:+t);function a(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:jn(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:jn(+s),a):t},a.context=function(s){return arguments.length?(n=s??null,a):n},a}function dx(){}function fx(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Nz(e){this._context=e}Nz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bhe(e){return new Nz(e)}function Cz(e){this._context=e}Cz.prototype={areaStart:dx,areaEnd:dx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:fx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Uhe(e){return new Cz(e)}function Az(e){this._context=e}Az.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:fx(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zhe(e){return new Az(e)}function Ez(e){this._context=e}Ez.prototype={areaStart:dx,areaEnd:dx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function qhe(e){return new Ez(e)}function l2(e){return e<0?-1:1}function c2(e,t,n){var r=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(s*a+o*r)/(r+a);return(l2(s)+l2(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function u2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Hw(e,t,n){var r=e._x0,a=e._y0,s=e._x1,o=e._y1,l=(s-r)/3;e._context.bezierCurveTo(r+l,a+l*t,s-l,o-l*n,s,o)}function hx(e){this._context=e}hx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Hw(this,this._t0,u2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Hw(this,u2(this,n=c2(this,e,t)),n);break;default:Hw(this,this._t0,n=c2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Pz(e){this._context=new Tz(e)}(Pz.prototype=Object.create(hx.prototype)).point=function(e,t){hx.prototype.point.call(this,t,e)};function Tz(e){this._context=e}Tz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,s){this._context.bezierCurveTo(t,e,r,n,s,a)}};function Whe(e){return new hx(e)}function Hhe(e){return new Pz(e)}function Oz(e){this._context=e}Oz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=d2(e),a=d2(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],a[0][s],r[1][s],a[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function d2(e){var t,n=e.length-1,r,a=new Array(n),s=new Array(n),o=new Array(n);for(a[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/s[t];for(s[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function Vhe(e){return new Oz(e)}function Wb(e,t){this._context=e,this._t=t}Wb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Khe(e){return new Wb(e,.5)}function Ghe(e){return new Wb(e,0)}function Yhe(e){return new Wb(e,1)}function Td(e,t){if((o=e.length)>1)for(var n=1,r,a,s=e[t[0]],o,l=s.length;n<o;++n)for(a=s,s=e[t[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function N_(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Xhe(e,t){return e[t]}function Jhe(e){const t=[];return t.key=e,t}function Qhe(){var e=jn([]),t=N_,n=Td,r=Xhe;function a(s){var o=Array.from(e.apply(this,arguments),Jhe),l,c=o.length,u=-1,f;for(const d of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(d,o[l].key,u,s)]).data=d;for(l=0,f=NC(t(o));l<c;++l)o[f[l]].index=l;return n(o,f),o}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:jn(Array.from(s)),a):e},a.value=function(s){return arguments.length?(r=typeof s=="function"?s:jn(+s),a):r},a.order=function(s){return arguments.length?(t=s==null?N_:typeof s=="function"?s:jn(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(n=s??Td,a):n},a}function Zhe(e,t){if((r=e.length)>0){for(var n,r,a=0,s=e[0].length,o;a<s;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}Td(e,t)}}function eme(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,s=r.length;n<s;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}Td(e,t)}}function tme(e,t){if(!(!((o=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,s,o;r<s;++r){for(var l=0,c=0,u=0;l<o;++l){for(var f=e[t[l]],d=f[r][1]||0,h=f[r-1][1]||0,m=(d-h)/2,g=0;g<l;++g){var v=e[t[g]],x=v[r][1]||0,y=v[r-1][1]||0;m+=x-y}c+=d,u+=m*d}a[r-1][1]+=a[r-1][0]=n,c&&(n-=u/c)}a[r-1][1]+=a[r-1][0]=n,Td(e,t)}}function vm(e){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(e)}var nme=["type","size","sizeType"];function C_(){return C_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C_.apply(this,arguments)}function f2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function h2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f2(Object(n),!0).forEach(function(r){rme(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rme(e,t,n){return t=ame(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ame(e){var t=ime(e,"string");return vm(t)=="symbol"?t:t+""}function ime(e,t){if(vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sme(e,t){if(e==null)return{};var n=ome(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ome(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Iz={symbolCircle:CC,symbolCross:Ahe,symbolDiamond:Phe,symbolSquare:The,symbolStar:Mhe,symbolTriangle:Dhe,symbolWye:Lhe},lme=Math.PI/180,cme=function(t){var n="symbol".concat(Ub(t));return Iz[n]||CC},ume=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*lme;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},dme=function(t,n){Iz["symbol".concat(Ub(t))]=n},AC=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,s=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=sme(t,nme),u=h2(h2({},c),{},{type:r,size:s,sizeType:l}),f=function(){var x=cme(r),y=Fhe().type(x).size(ume(s,l,r));return y()},d=u.className,h=u.cx,m=u.cy,g=rn(u,!0);return h===+h&&m===+m&&s===+s?X.createElement("path",C_({},g,{className:Zt("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(m,")"),d:f()})):null};AC.registerSymbol=dme;function Od(e){"@babel/helpers - typeof";return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Od(e)}function A_(){return A_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A_.apply(this,arguments)}function m2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fme(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m2(Object(n),!0).forEach(function(r){xm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mz(r.key),r)}}function pme(e,t,n){return t&&mme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gme(e,t,n){return t=mx(t),vme(e,Rz()?Reflect.construct(t,n||[],mx(e).constructor):t.apply(e,n))}function vme(e,t){if(t&&(Od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xme(e)}function xme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rz(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rz=function(){return!!e})()}function mx(e){return mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mx(e)}function yme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E_(e,t)}function E_(e,t){return E_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},E_(e,t)}function xm(e,t,n){return t=Mz(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mz(e){var t=bme(e,"string");return Od(t)=="symbol"?t:t+""}function bme(e,t){if(Od(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ni=32,EC=function(e){function t(){return hme(this,t),gme(this,t,arguments)}return yme(t,e),pme(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,s=ni/2,o=ni/6,l=ni/3,c=r.inactive?a:r.color;if(r.type==="plainline")return X.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:ni,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return X.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(ni,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return X.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ni/8,"h").concat(ni,"v").concat(ni*3/4,"h").concat(-ni,"z"),className:"recharts-legend-icon"});if(X.isValidElement(r.legendIcon)){var u=fme({},r);return delete u.legendIcon,X.cloneElement(r.legendIcon,u)}return X.createElement(AC,{fill:c,cx:s,cy:s,size:ni,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,s=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,f={x:0,y:0,width:ni,height:ni},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,g){var v=m.formatter||c,x=Zt(xm(xm({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var y=Mt(m.value)?null:m.value;so(!Mt(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return X.createElement("li",A_({className:x,style:d,key:"legend-item-".concat(g)},lx(r.props,m,g)),X.createElement(y_,{width:o,height:o,viewBox:f,style:h},r.renderIcon(m)),X.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},v?v(y,m,g):y))})}},{key:"render",value:function(){var r=this.props,a=r.payload,s=r.layout,o=r.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return X.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(p.PureComponent);xm(EC,"displayName","Legend");xm(EC,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var wme=Cb;function jme(){this.__data__=new wme,this.size=0}var _me=jme;function kme(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Sme=kme;function Nme(e){return this.__data__.get(e)}var Cme=Nme;function Ame(e){return this.__data__.has(e)}var Eme=Ame,Pme=Cb,Tme=gC,Ome=vC,Ime=200;function Rme(e,t){var n=this.__data__;if(n instanceof Pme){var r=n.__data__;if(!Tme||r.length<Ime-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ome(r)}return n.set(e,t),this.size=n.size,this}var Mme=Rme,Dme=Cb,$me=_me,Lme=Sme,Fme=Cme,Bme=Eme,Ume=Mme;function vf(e){var t=this.__data__=new Dme(e);this.size=t.size}vf.prototype.clear=$me;vf.prototype.delete=Lme;vf.prototype.get=Fme;vf.prototype.has=Bme;vf.prototype.set=Ume;var Dz=vf,zme="__lodash_hash_undefined__";function qme(e){return this.__data__.set(e,zme),this}var Wme=qme;function Hme(e){return this.__data__.has(e)}var Vme=Hme,Kme=vC,Gme=Wme,Yme=Vme;function px(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Kme;++t<n;)this.add(e[t])}px.prototype.add=px.prototype.push=Gme;px.prototype.has=Yme;var $z=px;function Xme(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Lz=Xme;function Jme(e,t){return e.has(t)}var Fz=Jme,Qme=$z,Zme=Lz,epe=Fz,tpe=1,npe=2;function rpe(e,t,n,r,a,s){var o=n&tpe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(e),f=s.get(t);if(u&&f)return u==t&&f==e;var d=-1,h=!0,m=n&npe?new Qme:void 0;for(s.set(e,t),s.set(t,e);++d<l;){var g=e[d],v=t[d];if(r)var x=o?r(v,g,d,t,e,s):r(g,v,d,e,t,s);if(x!==void 0){if(x)continue;h=!1;break}if(m){if(!Zme(t,function(y,b){if(!epe(m,b)&&(g===y||a(g,y,n,r,s)))return m.push(b)})){h=!1;break}}else if(!(g===v||a(g,v,n,r,s))){h=!1;break}}return s.delete(e),s.delete(t),h}var Bz=rpe,ape=Ms,ipe=ape.Uint8Array,spe=ipe;function ope(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var lpe=ope;function cpe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var PC=cpe,p2=Mp,g2=spe,upe=pC,dpe=Bz,fpe=lpe,hpe=PC,mpe=1,ppe=2,gpe="[object Boolean]",vpe="[object Date]",xpe="[object Error]",ype="[object Map]",bpe="[object Number]",wpe="[object RegExp]",jpe="[object Set]",_pe="[object String]",kpe="[object Symbol]",Spe="[object ArrayBuffer]",Npe="[object DataView]",v2=p2?p2.prototype:void 0,Vw=v2?v2.valueOf:void 0;function Cpe(e,t,n,r,a,s,o){switch(n){case Npe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Spe:return!(e.byteLength!=t.byteLength||!s(new g2(e),new g2(t)));case gpe:case vpe:case bpe:return upe(+e,+t);case xpe:return e.name==t.name&&e.message==t.message;case wpe:case _pe:return e==t+"";case ype:var l=fpe;case jpe:var c=r&mpe;if(l||(l=hpe),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=ppe,o.set(e,t);var f=dpe(l(e),l(t),r,a,s,o);return o.delete(e),f;case kpe:if(Vw)return Vw.call(e)==Vw.call(t)}return!1}var Ape=Cpe;function Epe(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var Uz=Epe,Ppe=Uz,Tpe=Ma;function Ope(e,t,n){var r=t(e);return Tpe(e)?r:Ppe(r,n(e))}var Ipe=Ope;function Rpe(e,t){for(var n=-1,r=e==null?0:e.length,a=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[a++]=o)}return s}var Mpe=Rpe;function Dpe(){return[]}var $pe=Dpe,Lpe=Mpe,Fpe=$pe,Bpe=Object.prototype,Upe=Bpe.propertyIsEnumerable,x2=Object.getOwnPropertySymbols,zpe=x2?function(e){return e==null?[]:(e=Object(e),Lpe(x2(e),function(t){return Upe.call(e,t)}))}:Fpe,qpe=zpe;function Wpe(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Hpe=Wpe,Vpe=_o,Kpe=ko,Gpe="[object Arguments]";function Ype(e){return Kpe(e)&&Vpe(e)==Gpe}var Xpe=Ype,y2=Xpe,Jpe=ko,zz=Object.prototype,Qpe=zz.hasOwnProperty,Zpe=zz.propertyIsEnumerable,ege=y2(function(){return arguments}())?y2:function(e){return Jpe(e)&&Qpe.call(e,"callee")&&!Zpe.call(e,"callee")},TC=ege,gx={exports:{}};function tge(){return!1}var nge=tge;gx.exports;(function(e,t){var n=Ms,r=nge,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(gx,gx.exports);var qz=gx.exports,rge=9007199254740991,age=/^(?:0|[1-9]\d*)$/;function ige(e,t){var n=typeof e;return t=t??rge,!!t&&(n=="number"||n!="symbol"&&age.test(e))&&e>-1&&e%1==0&&e<t}var OC=ige,sge=9007199254740991;function oge(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=sge}var IC=oge,lge=_o,cge=IC,uge=ko,dge="[object Arguments]",fge="[object Array]",hge="[object Boolean]",mge="[object Date]",pge="[object Error]",gge="[object Function]",vge="[object Map]",xge="[object Number]",yge="[object Object]",bge="[object RegExp]",wge="[object Set]",jge="[object String]",_ge="[object WeakMap]",kge="[object ArrayBuffer]",Sge="[object DataView]",Nge="[object Float32Array]",Cge="[object Float64Array]",Age="[object Int8Array]",Ege="[object Int16Array]",Pge="[object Int32Array]",Tge="[object Uint8Array]",Oge="[object Uint8ClampedArray]",Ige="[object Uint16Array]",Rge="[object Uint32Array]",An={};An[Nge]=An[Cge]=An[Age]=An[Ege]=An[Pge]=An[Tge]=An[Oge]=An[Ige]=An[Rge]=!0;An[dge]=An[fge]=An[kge]=An[hge]=An[Sge]=An[mge]=An[pge]=An[gge]=An[vge]=An[xge]=An[yge]=An[bge]=An[wge]=An[jge]=An[_ge]=!1;function Mge(e){return uge(e)&&cge(e.length)&&!!An[lge(e)]}var Dge=Mge;function $ge(e){return function(t){return e(t)}}var Wz=$ge,vx={exports:{}};vx.exports;(function(e,t){var n=QU,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===r,o=s&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(vx,vx.exports);var Lge=vx.exports,Fge=Dge,Bge=Wz,b2=Lge,w2=b2&&b2.isTypedArray,Uge=w2?Bge(w2):Fge,Hz=Uge,zge=Hpe,qge=TC,Wge=Ma,Hge=qz,Vge=OC,Kge=Hz,Gge=Object.prototype,Yge=Gge.hasOwnProperty;function Xge(e,t){var n=Wge(e),r=!n&&qge(e),a=!n&&!r&&Hge(e),s=!n&&!r&&!a&&Kge(e),o=n||r||a||s,l=o?zge(e.length,String):[],c=l.length;for(var u in e)(t||Yge.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Vge(u,c)))&&l.push(u);return l}var Jge=Xge,Qge=Object.prototype;function Zge(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Qge;return e===n}var eve=Zge;function tve(e,t){return function(n){return e(t(n))}}var Vz=tve,nve=Vz,rve=nve(Object.keys,Object),ave=rve,ive=eve,sve=ave,ove=Object.prototype,lve=ove.hasOwnProperty;function cve(e){if(!ive(e))return sve(e);var t=[];for(var n in Object(e))lve.call(e,n)&&n!="constructor"&&t.push(n);return t}var uve=cve,dve=mC,fve=IC;function hve(e){return e!=null&&fve(e.length)&&!dve(e)}var $p=hve,mve=Jge,pve=uve,gve=$p;function vve(e){return gve(e)?mve(e):pve(e)}var Hb=vve,xve=Ipe,yve=qpe,bve=Hb;function wve(e){return xve(e,bve,yve)}var jve=wve,j2=jve,_ve=1,kve=Object.prototype,Sve=kve.hasOwnProperty;function Nve(e,t,n,r,a,s){var o=n&_ve,l=j2(e),c=l.length,u=j2(t),f=u.length;if(c!=f&&!o)return!1;for(var d=c;d--;){var h=l[d];if(!(o?h in t:Sve.call(t,h)))return!1}var m=s.get(e),g=s.get(t);if(m&&g)return m==t&&g==e;var v=!0;s.set(e,t),s.set(t,e);for(var x=o;++d<c;){h=l[d];var y=e[h],b=t[h];if(r)var w=o?r(b,y,h,t,e,s):r(y,b,h,e,t,s);if(!(w===void 0?y===b||a(y,b,n,r,s):w)){v=!1;break}x||(x=h=="constructor")}if(v&&!x){var k=e.constructor,_=t.constructor;k!=_&&"constructor"in e&&"constructor"in t&&!(typeof k=="function"&&k instanceof k&&typeof _=="function"&&_ instanceof _)&&(v=!1)}return s.delete(e),s.delete(t),v}var Cve=Nve,Ave=eu,Eve=Ms,Pve=Ave(Eve,"DataView"),Tve=Pve,Ove=eu,Ive=Ms,Rve=Ove(Ive,"Promise"),Mve=Rve,Dve=eu,$ve=Ms,Lve=Dve($ve,"Set"),Kz=Lve,Fve=eu,Bve=Ms,Uve=Fve(Bve,"WeakMap"),zve=Uve,P_=Tve,T_=gC,O_=Mve,I_=Kz,R_=zve,Gz=_o,xf=ez,_2="[object Map]",qve="[object Object]",k2="[object Promise]",S2="[object Set]",N2="[object WeakMap]",C2="[object DataView]",Wve=xf(P_),Hve=xf(T_),Vve=xf(O_),Kve=xf(I_),Gve=xf(R_),Ql=Gz;(P_&&Ql(new P_(new ArrayBuffer(1)))!=C2||T_&&Ql(new T_)!=_2||O_&&Ql(O_.resolve())!=k2||I_&&Ql(new I_)!=S2||R_&&Ql(new R_)!=N2)&&(Ql=function(e){var t=Gz(e),n=t==qve?e.constructor:void 0,r=n?xf(n):"";if(r)switch(r){case Wve:return C2;case Hve:return _2;case Vve:return k2;case Kve:return S2;case Gve:return N2}return t});var Yve=Ql,Kw=Dz,Xve=Bz,Jve=Ape,Qve=Cve,A2=Yve,E2=Ma,P2=qz,Zve=Hz,exe=1,T2="[object Arguments]",O2="[object Array]",Ng="[object Object]",txe=Object.prototype,I2=txe.hasOwnProperty;function nxe(e,t,n,r,a,s){var o=E2(e),l=E2(t),c=o?O2:A2(e),u=l?O2:A2(t);c=c==T2?Ng:c,u=u==T2?Ng:u;var f=c==Ng,d=u==Ng,h=c==u;if(h&&P2(e)){if(!P2(t))return!1;o=!0,f=!1}if(h&&!f)return s||(s=new Kw),o||Zve(e)?Xve(e,t,n,r,a,s):Jve(e,t,c,n,r,a,s);if(!(n&exe)){var m=f&&I2.call(e,"__wrapped__"),g=d&&I2.call(t,"__wrapped__");if(m||g){var v=m?e.value():e,x=g?t.value():t;return s||(s=new Kw),a(v,x,n,r,s)}}return h?(s||(s=new Kw),Qve(e,t,n,r,a,s)):!1}var rxe=nxe,axe=rxe,R2=ko;function Yz(e,t,n,r,a){return e===t?!0:e==null||t==null||!R2(e)&&!R2(t)?e!==e&&t!==t:axe(e,t,n,r,Yz,a)}var RC=Yz,ixe=Dz,sxe=RC,oxe=1,lxe=2;function cxe(e,t,n,r){var a=n.length,s=a,o=!r;if(e==null)return!s;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){l=n[a];var c=l[0],u=e[c],f=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var d=new ixe;if(r)var h=r(u,f,c,e,t,d);if(!(h===void 0?sxe(f,u,oxe|lxe,r,d):h))return!1}}return!0}var uxe=cxe,dxe=Dl;function fxe(e){return e===e&&!dxe(e)}var Xz=fxe,hxe=Xz,mxe=Hb;function pxe(e){for(var t=mxe(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,hxe(a)]}return t}var gxe=pxe;function vxe(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var Jz=vxe,xxe=uxe,yxe=gxe,bxe=Jz;function wxe(e){var t=yxe(e);return t.length==1&&t[0][2]?bxe(t[0][0],t[0][1]):function(n){return n===e||xxe(n,e,t)}}var jxe=wxe;function _xe(e,t){return e!=null&&t in Object(e)}var kxe=_xe,Sxe=iz,Nxe=TC,Cxe=Ma,Axe=OC,Exe=IC,Pxe=Eb;function Txe(e,t,n){t=Sxe(t,e);for(var r=-1,a=t.length,s=!1;++r<a;){var o=Pxe(t[r]);if(!(s=e!=null&&n(e,o)))break;e=e[o]}return s||++r!=a?s:(a=e==null?0:e.length,!!a&&Exe(a)&&Axe(o,a)&&(Cxe(e)||Nxe(e)))}var Oxe=Txe,Ixe=kxe,Rxe=Oxe;function Mxe(e,t){return e!=null&&Rxe(e,t,Ixe)}var Dxe=Mxe,$xe=RC,Lxe=sz,Fxe=Dxe,Bxe=hC,Uxe=Xz,zxe=Jz,qxe=Eb,Wxe=1,Hxe=2;function Vxe(e,t){return Bxe(e)&&Uxe(t)?zxe(qxe(e),t):function(n){var r=Lxe(n,e);return r===void 0&&r===t?Fxe(n,e):$xe(t,r,Wxe|Hxe)}}var Kxe=Vxe;function Gxe(e){return e}var yf=Gxe;function Yxe(e){return function(t){return t==null?void 0:t[e]}}var Xxe=Yxe,Jxe=bC;function Qxe(e){return function(t){return Jxe(t,e)}}var Zxe=Qxe,eye=Xxe,tye=Zxe,nye=hC,rye=Eb;function aye(e){return nye(e)?eye(rye(e)):tye(e)}var iye=aye,sye=jxe,oye=Kxe,lye=yf,cye=Ma,uye=iye;function dye(e){return typeof e=="function"?e:e==null?lye:typeof e=="object"?cye(e)?oye(e[0],e[1]):sye(e):uye(e)}var $l=dye;function fye(e,t,n,r){for(var a=e.length,s=n+(r?1:-1);r?s--:++s<a;)if(t(e[s],s,e))return s;return-1}var Qz=fye;function hye(e){return e!==e}var mye=hye;function pye(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var gye=pye,vye=Qz,xye=mye,yye=gye;function bye(e,t,n){return t===t?yye(e,t,n):vye(e,xye,n)}var wye=bye,jye=wye;function _ye(e,t){var n=e==null?0:e.length;return!!n&&jye(e,t,0)>-1}var kye=_ye;function Sye(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var Nye=Sye;function Cye(){}var Aye=Cye,Gw=Kz,Eye=Aye,Pye=PC,Tye=1/0,Oye=Gw&&1/Pye(new Gw([,-0]))[1]==Tye?function(e){return new Gw(e)}:Eye,Iye=Oye,Rye=$z,Mye=kye,Dye=Nye,$ye=Fz,Lye=Iye,Fye=PC,Bye=200;function Uye(e,t,n){var r=-1,a=Mye,s=e.length,o=!0,l=[],c=l;if(n)o=!1,a=Dye;else if(s>=Bye){var u=t?null:Lye(e);if(u)return Fye(u);o=!1,a=$ye,c=new Rye}else c=t?[]:l;e:for(;++r<s;){var f=e[r],d=t?t(f):f;if(f=n||f!==0?f:0,o&&d===d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),l.push(f)}else a(c,d,n)||(c!==l&&c.push(d),l.push(f))}return l}var zye=Uye,qye=$l,Wye=zye;function Hye(e,t){return e&&e.length?Wye(e,qye(t)):[]}var Vye=Hye;const M2=un(Vye);function Zz(e,t,n){return t===!0?M2(e,n):Mt(t)?M2(e,t):e}function Id(e){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Id(e)}var Kye=["ref"];function D2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Fs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D2(Object(n),!0).forEach(function(r){Vb(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Gye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t6(r.key),r)}}function Yye(e,t,n){return t&&$2(e.prototype,t),n&&$2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xye(e,t,n){return t=xx(t),Jye(e,e6()?Reflect.construct(t,n||[],xx(e).constructor):t.apply(e,n))}function Jye(e,t){if(t&&(Id(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qye(e)}function Qye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e6=function(){return!!e})()}function xx(e){return xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xx(e)}function Zye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M_(e,t)}function M_(e,t){return M_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},M_(e,t)}function Vb(e,t,n){return t=t6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t6(e){var t=ebe(e,"string");return Id(t)=="symbol"?t:t+""}function ebe(e,t){if(Id(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tbe(e,t){if(e==null)return{};var n=nbe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function nbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function rbe(e){return e.value}function abe(e,t){if(X.isValidElement(e))return X.cloneElement(e,t);if(typeof e=="function")return X.createElement(e,t);t.ref;var n=tbe(t,Kye);return X.createElement(EC,n)}var L2=1,ui=function(e){function t(){var n;Gye(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=Xye(this,t,[].concat(a)),Vb(n,"lastBoundingBox",{width:-1,height:-1}),n}return Zye(t,e),Yye(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>L2||Math.abs(a.height-this.lastBoundingBox.height)>L2)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Fs({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,s=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,f=a.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();d={left:((u||0)-m.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((f||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Fs(Fs({},d),h)}},{key:"render",value:function(){var r=this,a=this.props,s=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,f=a.payload,d=Fs(Fs({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return X.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(m){r.wrapperNode=m}},abe(s,Fs(Fs({},this.props),{},{payload:Zz(f,u,rbe)})))}}],[{key:"getWithHeight",value:function(r,a){var s=Fs(Fs({},this.defaultProps),r.props),o=s.layout;return o==="vertical"&&Ve(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(p.PureComponent);Vb(ui,"displayName","Legend");Vb(ui,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var F2=Mp,ibe=TC,sbe=Ma,B2=F2?F2.isConcatSpreadable:void 0;function obe(e){return sbe(e)||ibe(e)||!!(B2&&e&&e[B2])}var lbe=obe,cbe=Uz,ube=lbe;function n6(e,t,n,r,a){var s=-1,o=e.length;for(n||(n=ube),a||(a=[]);++s<o;){var l=e[s];t>0&&n(l)?t>1?n6(l,t-1,n,r,a):cbe(a,l):r||(a[a.length]=l)}return a}var r6=n6;function dbe(e){return function(t,n,r){for(var a=-1,s=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++a];if(n(s[c],c,s)===!1)break}return t}}var fbe=dbe,hbe=fbe,mbe=hbe(),pbe=mbe,gbe=pbe,vbe=Hb;function xbe(e,t){return e&&gbe(e,t,vbe)}var a6=xbe,ybe=$p;function bbe(e,t){return function(n,r){if(n==null)return n;if(!ybe(n))return e(n,r);for(var a=n.length,s=t?a:-1,o=Object(n);(t?s--:++s<a)&&r(o[s],s,o)!==!1;);return n}}var wbe=bbe,jbe=a6,_be=wbe,kbe=_be(jbe),MC=kbe,Sbe=MC,Nbe=$p;function Cbe(e,t){var n=-1,r=Nbe(e)?Array(e.length):[];return Sbe(e,function(a,s,o){r[++n]=t(a,s,o)}),r}var i6=Cbe;function Abe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Ebe=Abe,U2=ff;function Pbe(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,s=U2(e),o=t!==void 0,l=t===null,c=t===t,u=U2(t);if(!l&&!u&&!s&&e>t||s&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!a)return 1;if(!r&&!s&&!u&&e<t||u&&n&&a&&!r&&!s||l&&n&&a||!o&&a||!c)return-1}return 0}var Tbe=Pbe,Obe=Tbe;function Ibe(e,t,n){for(var r=-1,a=e.criteria,s=t.criteria,o=a.length,l=n.length;++r<o;){var c=Obe(a[r],s[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return e.index-t.index}var Rbe=Ibe,Yw=yC,Mbe=bC,Dbe=$l,$be=i6,Lbe=Ebe,Fbe=Wz,Bbe=Rbe,Ube=yf,zbe=Ma;function qbe(e,t,n){t.length?t=Yw(t,function(s){return zbe(s)?function(o){return Mbe(o,s.length===1?s[0]:s)}:s}):t=[Ube];var r=-1;t=Yw(t,Fbe(Dbe));var a=$be(e,function(s,o,l){var c=Yw(t,function(u){return u(s)});return{criteria:c,index:++r,value:s}});return Lbe(a,function(s,o){return Bbe(s,o,n)})}var Wbe=qbe;function Hbe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Vbe=Hbe,Kbe=Vbe,z2=Math.max;function Gbe(e,t,n){return t=z2(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=z2(r.length-t,0),o=Array(s);++a<s;)o[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),Kbe(e,this,l)}}var Ybe=Gbe;function Xbe(e){return function(){return e}}var Jbe=Xbe,Qbe=eu,Zbe=function(){try{var e=Qbe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),s6=Zbe,e0e=Jbe,q2=s6,t0e=yf,n0e=q2?function(e,t){return q2(e,"toString",{configurable:!0,enumerable:!1,value:e0e(t),writable:!0})}:t0e,r0e=n0e,a0e=800,i0e=16,s0e=Date.now;function o0e(e){var t=0,n=0;return function(){var r=s0e(),a=i0e-(r-n);if(n=r,a>0){if(++t>=a0e)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var l0e=o0e,c0e=r0e,u0e=l0e,d0e=u0e(c0e),f0e=d0e,h0e=yf,m0e=Ybe,p0e=f0e;function g0e(e,t){return p0e(m0e(e,t,h0e),e+"")}var v0e=g0e,x0e=pC,y0e=$p,b0e=OC,w0e=Dl;function j0e(e,t,n){if(!w0e(n))return!1;var r=typeof t;return(r=="number"?y0e(n)&&b0e(t,n.length):r=="string"&&t in n)?x0e(n[t],e):!1}var Kb=j0e,_0e=r6,k0e=Wbe,S0e=v0e,W2=Kb,N0e=S0e(function(e,t){if(e==null)return[];var n=t.length;return n>1&&W2(e,t[0],t[1])?t=[]:n>2&&W2(t[0],t[1],t[2])&&(t=[t[0]]),k0e(e,_0e(t,1),[])}),C0e=N0e;const DC=un(C0e);function ym(e){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ym(e)}function D_(){return D_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D_.apply(this,arguments)}function A0e(e,t){return O0e(e)||T0e(e,t)||P0e(e,t)||E0e()}function E0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P0e(e,t){if(e){if(typeof e=="string")return H2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H2(e,t)}}function H2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function O0e(e){if(Array.isArray(e))return e}function V2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Xw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V2(Object(n),!0).forEach(function(r){I0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function I0e(e,t,n){return t=R0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R0e(e){var t=M0e(e,"string");return ym(t)=="symbol"?t:t+""}function M0e(e,t){if(ym(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D0e(e){return Array.isArray(e)&&mr(e[0])&&mr(e[1])?e.join(" ~ "):e}var $0e=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,s=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,d=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,v=t.label,x=t.labelFormatter,y=t.accessibilityLayer,b=y===void 0?!1:y,w=function(){if(f&&f.length){var F={padding:0,margin:0},E=(h?DC(f,h):f).map(function(I,P){if(I.type==="none")return null;var B=Xw({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},l),O=I.formatter||d||D0e,$=I.value,L=I.name,N=$,U=L;if(O&&N!=null&&U!=null){var D=O($,L,I,P,f);if(Array.isArray(D)){var R=A0e(D,2);N=R[0],U=R[1]}else N=D}return X.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:B},mr(U)?X.createElement("span",{className:"recharts-tooltip-item-name"},U):null,mr(U)?X.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,X.createElement("span",{className:"recharts-tooltip-item-value"},N),X.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return X.createElement("ul",{className:"recharts-tooltip-item-list",style:F},E)}return null},k=Xw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),_=Xw({margin:0},u),j=!an(v),S=j?v:"",A=Zt("recharts-default-tooltip",m),C=Zt("recharts-tooltip-label",g);j&&x&&f!==void 0&&f!==null&&(S=x(v,f));var T=b?{role:"status","aria-live":"assertive"}:{};return X.createElement("div",D_({className:A,style:k},T),X.createElement("p",{className:C,style:_},X.isValidElement(S)?S:"".concat(S)),w())};function bm(e){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bm(e)}function Cg(e,t,n){return t=L0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L0e(e){var t=F0e(e,"string");return bm(t)=="symbol"?t:t+""}function F0e(e,t){if(bm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hf="recharts-tooltip-wrapper",B0e={visibility:"hidden"};function U0e(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Zt(Hf,Cg(Cg(Cg(Cg({},"".concat(Hf,"-right"),Ve(n)&&t&&Ve(t.x)&&n>=t.x),"".concat(Hf,"-left"),Ve(n)&&t&&Ve(t.x)&&n<t.x),"".concat(Hf,"-bottom"),Ve(r)&&t&&Ve(t.y)&&r>=t.y),"".concat(Hf,"-top"),Ve(r)&&t&&Ve(t.y)&&r<t.y))}function K2(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(s&&Ve(s[r]))return s[r];var f=n[r]-l-a,d=n[r]+a;if(t[r])return o[r]?f:d;if(o[r]){var h=f,m=c[r];return h<m?Math.max(d,c[r]):Math.max(f,c[r])}var g=d+l,v=c[r]+u;return g>v?Math.max(f,c[r]):Math.max(d,c[r])}function z0e(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function q0e(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,s=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,f,d;return o.height>0&&o.width>0&&n?(f=K2({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=K2({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=z0e({translateX:f,translateY:d,useTranslate3d:l})):u=B0e,{cssProperties:u,cssClasses:U0e({translateX:f,translateY:d,coordinate:n})}}function Rd(e){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rd(e)}function G2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Y2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G2(Object(n),!0).forEach(function(r){L_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l6(r.key),r)}}function V0e(e,t,n){return t&&H0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function K0e(e,t,n){return t=yx(t),G0e(e,o6()?Reflect.construct(t,n||[],yx(e).constructor):t.apply(e,n))}function G0e(e,t){if(t&&(Rd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y0e(e)}function Y0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o6=function(){return!!e})()}function yx(e){return yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yx(e)}function X0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$_(e,t)}function $_(e,t){return $_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},$_(e,t)}function L_(e,t,n){return t=l6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l6(e){var t=J0e(e,"string");return Rd(t)=="symbol"?t:t+""}function J0e(e,t){if(Rd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X2=1,Q0e=function(e){function t(){var n;W0e(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=K0e(this,t,[].concat(a)),L_(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),L_(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),n}return X0e(t,e),V0e(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>X2||Math.abs(r.height-this.state.lastBoundingBox.height)>X2)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,f=a.coordinate,d=a.hasPayload,h=a.isAnimationActive,m=a.offset,g=a.position,v=a.reverseDirection,x=a.useTranslate3d,y=a.viewBox,b=a.wrapperStyle,w=q0e({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:m,position:g,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:y}),k=w.cssClasses,_=w.cssProperties,j=Y2(Y2({transition:h&&s?"transform ".concat(l,"ms ").concat(c):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&d?"visible":"hidden",position:"absolute",top:0,left:0},b);return X.createElement("div",{tabIndex:-1,className:k,style:j,ref:function(A){r.wrapperNode=A}},u)}}])}(p.PureComponent),Z0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ml={isSsr:Z0e(),get:function(t){return ml[t]},set:function(t,n){if(typeof t=="string")ml[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(a){ml[a]=t[a]})}}};function Md(e){"@babel/helpers - typeof";return Md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Md(e)}function J2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Q2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J2(Object(n),!0).forEach(function(r){$C(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ewe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function twe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u6(r.key),r)}}function nwe(e,t,n){return t&&twe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rwe(e,t,n){return t=bx(t),awe(e,c6()?Reflect.construct(t,n||[],bx(e).constructor):t.apply(e,n))}function awe(e,t){if(t&&(Md(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iwe(e)}function iwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c6=function(){return!!e})()}function bx(e){return bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bx(e)}function swe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F_(e,t)}function F_(e,t){return F_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},F_(e,t)}function $C(e,t,n){return t=u6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u6(e){var t=owe(e,"string");return Md(t)=="symbol"?t:t+""}function owe(e,t){if(Md(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Md(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lwe(e){return e.dataKey}function cwe(e,t){return X.isValidElement(e)?X.cloneElement(e,t):typeof e=="function"?X.createElement(e,t):X.createElement($0e,t)}var Jn=function(e){function t(){return ewe(this,t),rwe(this,t,arguments)}return swe(t,e),nwe(t,[{key:"render",value:function(){var r=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,f=a.coordinate,d=a.filterNull,h=a.isAnimationActive,m=a.offset,g=a.payload,v=a.payloadUniqBy,x=a.position,y=a.reverseDirection,b=a.useTranslate3d,w=a.viewBox,k=a.wrapperStyle,_=g??[];d&&_.length&&(_=Zz(g.filter(function(S){return S.value!=null&&(S.hide!==!0||r.props.includeHidden)}),v,lwe));var j=_.length>0;return X.createElement(Q0e,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:s,coordinate:f,hasPayload:j,offset:m,position:x,reverseDirection:y,useTranslate3d:b,viewBox:w,wrapperStyle:k},cwe(u,Q2(Q2({},this.props),{},{payload:_})))}}])}(p.PureComponent);$C(Jn,"displayName","Tooltip");$C(Jn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ml.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var uwe=Ms,dwe=function(){return uwe.Date.now()},fwe=dwe,hwe=/\s/;function mwe(e){for(var t=e.length;t--&&hwe.test(e.charAt(t)););return t}var pwe=mwe,gwe=pwe,vwe=/^\s+/;function xwe(e){return e&&e.slice(0,gwe(e)+1).replace(vwe,"")}var ywe=xwe,bwe=ywe,Z2=Dl,wwe=ff,eO=NaN,jwe=/^[-+]0x[0-9a-f]+$/i,_we=/^0b[01]+$/i,kwe=/^0o[0-7]+$/i,Swe=parseInt;function Nwe(e){if(typeof e=="number")return e;if(wwe(e))return eO;if(Z2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Z2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=bwe(e);var n=_we.test(e);return n||kwe.test(e)?Swe(e.slice(2),n?2:8):jwe.test(e)?eO:+e}var d6=Nwe,Cwe=Dl,Jw=fwe,tO=d6,Awe="Expected a function",Ewe=Math.max,Pwe=Math.min;function Twe(e,t,n){var r,a,s,o,l,c,u=0,f=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(Awe);t=tO(t)||0,Cwe(n)&&(f=!!n.leading,d="maxWait"in n,s=d?Ewe(tO(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h);function m(j){var S=r,A=a;return r=a=void 0,u=j,o=e.apply(A,S),o}function g(j){return u=j,l=setTimeout(y,t),f?m(j):o}function v(j){var S=j-c,A=j-u,C=t-S;return d?Pwe(C,s-A):C}function x(j){var S=j-c,A=j-u;return c===void 0||S>=t||S<0||d&&A>=s}function y(){var j=Jw();if(x(j))return b(j);l=setTimeout(y,v(j))}function b(j){return l=void 0,h&&r?m(j):(r=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,r=c=a=l=void 0}function k(){return l===void 0?o:b(Jw())}function _(){var j=Jw(),S=x(j);if(r=arguments,a=this,c=j,S){if(l===void 0)return g(c);if(d)return clearTimeout(l),l=setTimeout(y,t),m(c)}return l===void 0&&(l=setTimeout(y,t)),o}return _.cancel=w,_.flush=k,_}var Owe=Twe,Iwe=Owe,Rwe=Dl,Mwe="Expected a function";function Dwe(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(Mwe);return Rwe(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Iwe(e,t,{leading:r,maxWait:t,trailing:a})}var $we=Dwe;const f6=un($we);function wm(e){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wm(e)}function nO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ag(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nO(Object(n),!0).forEach(function(r){Lwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lwe(e,t,n){return t=Fwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fwe(e){var t=Bwe(e,"string");return wm(t)=="symbol"?t:t+""}function Bwe(e,t){if(wm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uwe(e,t){return Hwe(e)||Wwe(e,t)||qwe(e,t)||zwe()}function zwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qwe(e,t){if(e){if(typeof e=="string")return rO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rO(e,t)}}function rO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Hwe(e){if(Array.isArray(e))return e}var ii=p.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,s=e.width,o=s===void 0?"100%":s,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,v=g===void 0?0:g,x=e.id,y=e.className,b=e.onResize,w=e.style,k=w===void 0?{}:w,_=p.useRef(null),j=p.useRef();j.current=b,p.useImperativeHandle(t,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var S=p.useState({containerWidth:a.width,containerHeight:a.height}),A=Uwe(S,2),C=A[0],T=A[1],M=p.useCallback(function(E,I){T(function(P){var B=Math.round(E),O=Math.round(I);return P.containerWidth===B&&P.containerHeight===O?P:{containerWidth:B,containerHeight:O}})},[]);p.useEffect(function(){var E=function(L){var N,U=L[0].contentRect,D=U.width,R=U.height;M(D,R),(N=j.current)===null||N===void 0||N.call(j,D,R)};v>0&&(E=f6(E,v,{trailing:!0,leading:!1}));var I=new ResizeObserver(E),P=_.current.getBoundingClientRect(),B=P.width,O=P.height;return M(B,O),I.observe(_.current),function(){I.disconnect()}},[M,v]);var F=p.useMemo(function(){var E=C.containerWidth,I=C.containerHeight;if(E<0||I<0)return null;so(oc(o)||oc(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),so(!n||n>0,"The aspect(%s) must be greater than zero.",n);var P=oc(o)?E:o,B=oc(c)?I:c;n&&n>0&&(P?B=P/n:B&&(P=B*n),h&&B>h&&(B=h)),so(P>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,B,o,c,f,d,n);var O=!Array.isArray(m)&&io(m.type).endsWith("Chart");return X.Children.map(m,function($){return X.isValidElement($)?p.cloneElement($,Ag({width:P,height:B},O?{style:Ag({height:"100%",width:"100%",maxHeight:B,maxWidth:P},$.props.style)}:{})):$})},[n,m,c,h,d,f,C,o]);return X.createElement("div",{id:x?"".concat(x):void 0,className:Zt("recharts-responsive-container",y),style:Ag(Ag({},k),{},{width:o,height:c,minWidth:f,minHeight:d,maxHeight:h}),ref:_},F)}),h6=function(t){return null};h6.displayName="Cell";function jm(e){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jm(e)}function aO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function B_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(n),!0).forEach(function(r){Vwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vwe(e,t,n){return t=Kwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kwe(e){var t=Gwe(e,"string");return jm(t)=="symbol"?t:t+""}function Gwe(e,t){if(jm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gu={widthCache:{},cacheCount:0},Ywe=2e3,Xwe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},iO="recharts_measurement_span";function Jwe(e){var t=B_({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Nh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ml.isSsr)return{width:0,height:0};var r=Jwe(n),a=JSON.stringify({text:t,copyStyle:r});if(gu.widthCache[a])return gu.widthCache[a];try{var s=document.getElementById(iO);s||(s=document.createElement("span"),s.setAttribute("id",iO),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=B_(B_({},Xwe),r);Object.assign(s.style,o),s.textContent="".concat(t);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return gu.widthCache[a]=c,++gu.cacheCount>Ywe&&(gu.cacheCount=0,gu.widthCache={}),c}catch{return{width:0,height:0}}},Qwe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function _m(e){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_m(e)}function wx(e,t){return nje(e)||tje(e,t)||eje(e,t)||Zwe()}function Zwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eje(e,t){if(e){if(typeof e=="string")return sO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sO(e,t)}}function sO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function nje(e){if(Array.isArray(e))return e}function rje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ije(r.key),r)}}function aje(e,t,n){return t&&oO(e.prototype,t),n&&oO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ije(e){var t=sje(e,"string");return _m(t)=="symbol"?t:t+""}function sje(e,t){if(_m(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(_m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,oje=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,lje=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,m6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},cje=Object.keys(m6),qu="NaN";function uje(e,t){return e*m6[t]}var Eg=function(){function e(t,n){rje(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!oje.test(n)&&(this.num=NaN,this.unit=""),cje.includes(n)&&(this.num=uje(t,n),this.unit="px")}return aje(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=lje.exec(n))!==null&&r!==void 0?r:[],s=wx(a,3),o=s[1],l=s[2];return new e(parseFloat(o),l??"")}}])}();function p6(e){if(e.includes(qu))return qu;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=lO.exec(t))!==null&&n!==void 0?n:[],a=wx(r,4),s=a[1],o=a[2],l=a[3],c=Eg.parse(s??""),u=Eg.parse(l??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return qu;t=t.replace(lO,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,h=(d=cO.exec(t))!==null&&d!==void 0?d:[],m=wx(h,4),g=m[1],v=m[2],x=m[3],y=Eg.parse(g??""),b=Eg.parse(x??""),w=v==="+"?y.add(b):y.subtract(b);if(w.isNaN())return qu;t=t.replace(cO,w.toString())}return t}var uO=/\(([^()]*)\)/;function dje(e){for(var t=e;t.includes("(");){var n=uO.exec(t),r=wx(n,2),a=r[1];t=t.replace(uO,p6(a))}return t}function fje(e){var t=e.replace(/\s+/g,"");return t=dje(t),t=p6(t),t}function hje(e){try{return fje(e)}catch{return qu}}function Qw(e){var t=hje(e.slice(5,-1));return t===qu?"":t}var mje=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],pje=["dx","dy","angle","className","breakAll"];function U_(){return U_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U_.apply(this,arguments)}function dO(e,t){if(e==null)return{};var n=gje(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gje(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function fO(e,t){return bje(e)||yje(e,t)||xje(e,t)||vje()}function vje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xje(e,t){if(e){if(typeof e=="string")return hO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hO(e,t)}}function hO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function bje(e){if(Array.isArray(e))return e}var g6=/[ \f\n\r\t\v\u2028\u2029]+/,v6=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var s=[];an(n)||(r?s=n.toString().split(""):s=n.toString().split(g6));var o=s.map(function(c){return{word:c,width:Nh(c,a).width}}),l=r?0:Nh("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},wje=function(t,n,r,a,s){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,f=Ve(o),d=l,h=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce(function(B,O){var $=O.word,L=O.width,N=B[B.length-1];if(N&&(a==null||s||N.width+L+r<Number(a)))N.words.push($),N.width+=L+r;else{var U={words:[$],width:L};B.push(U)}return B},[])},m=h(n),g=function(P){return P.reduce(function(B,O){return B.width>O.width?B:O})};if(!f)return m;for(var v="",x=function(P){var B=d.slice(0,P),O=v6({breakAll:u,style:c,children:B+v}).wordsWithComputedWidth,$=h(O),L=$.length>o||g($).width>Number(a);return[L,$]},y=0,b=d.length-1,w=0,k;y<=b&&w<=d.length-1;){var _=Math.floor((y+b)/2),j=_-1,S=x(j),A=fO(S,2),C=A[0],T=A[1],M=x(_),F=fO(M,1),E=F[0];if(!C&&!E&&(y=_+1),C&&E&&(b=_-1),!C&&E){k=T;break}w++}return k||m},mO=function(t){var n=an(t)?[]:t.toString().split(g6);return[{words:n}]},jje=function(t){var n=t.width,r=t.scaleToFit,a=t.children,s=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!ml.isSsr){var c,u,f=v6({breakAll:o,children:a,style:s});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;c=d,u=h}else return mO(a);return wje({breakAll:o,children:a,maxLines:l,style:s},c,u,n,r)}return mO(a)},pO="#808080",jx=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,d=f===void 0?!1:f,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,v=g===void 0?"end":g,x=t.fill,y=x===void 0?pO:x,b=dO(t,mje),w=p.useMemo(function(){return jje({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:d,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,d,b.style,b.width]),k=b.dx,_=b.dy,j=b.angle,S=b.className,A=b.breakAll,C=dO(b,pje);if(!mr(r)||!mr(s))return null;var T=r+(Ve(k)?k:0),M=s+(Ve(_)?_:0),F;switch(v){case"start":F=Qw("calc(".concat(u,")"));break;case"middle":F=Qw("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:F=Qw("calc(".concat(w.length-1," * -").concat(l,")"));break}var E=[];if(d){var I=w[0].width,P=b.width;E.push("scale(".concat((Ve(P)?P/I:1)/I,")"))}return j&&E.push("rotate(".concat(j,", ").concat(T,", ").concat(M,")")),E.length&&(C.transform=E.join(" ")),X.createElement("text",U_({},rn(C,!0),{x:T,y:M,className:Zt("recharts-text",S),textAnchor:m,fill:y.includes("url")?pO:y}),w.map(function(B,O){var $=B.words.join(A?"":" ");return X.createElement("tspan",{x:T,dy:O===0?F:l,key:"".concat($,"-").concat(O)},$)}))};function pl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _je(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function LC(e){let t,n,r;e.length!==2?(t=pl,n=(l,c)=>pl(e(l),c),r=(l,c)=>e(l)-c):(t=e===pl||e===_je?e:kje,n=e,r=e);function a(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;n(l[d],c)<0?u=d+1:f=d}while(u<f)}return u}function s(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;n(l[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function o(l,c,u=0,f=l.length){const d=a(l,c,u,f-1);return d>u&&r(l[d-1],c)>-r(l[d],c)?d-1:d}return{left:a,center:o,right:s}}function kje(){return 0}function x6(e){return e===null?NaN:+e}function*Sje(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Nje=LC(pl),Lp=Nje.right;LC(x6).center;class gO extends Map{constructor(t,n=Eje){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(vO(this,t))}has(t){return super.has(vO(this,t))}set(t,n){return super.set(Cje(this,t),n)}delete(t){return super.delete(Aje(this,t))}}function vO({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Cje({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Aje({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Eje(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Pje(e=pl){if(e===pl)return y6;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function y6(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Tje=Math.sqrt(50),Oje=Math.sqrt(10),Ije=Math.sqrt(2);function _x(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),s=r/Math.pow(10,a),o=s>=Tje?10:s>=Oje?5:s>=Ije?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?_x(e,t,n*2):[l,c,u]}function z_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,s,o]=r?_x(t,e,n):_x(e,t,n);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function q_(e,t,n){return t=+t,e=+e,n=+n,_x(e,t,n)[2]}function W_(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?q_(t,e,n):q_(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function xO(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function yO(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function b6(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?y6:Pje(a);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,f=Math.log(c),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(t-u*d/c+h)),g=Math.min(r,Math.floor(t+(c-u)*d/c+h));b6(e,t,m,g,a)}const s=e[t];let o=n,l=r;for(Vf(e,n,t),a(e[r],s)>0&&Vf(e,n,r);o<l;){for(Vf(e,o,l),++o,--l;a(e[o],s)<0;)++o;for(;a(e[l],s)>0;)--l}a(e[n],s)===0?Vf(e,n,l):(++l,Vf(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function Vf(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Rje(e,t,n){if(e=Float64Array.from(Sje(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return yO(e);if(t>=1)return xO(e);var r,a=(r-1)*t,s=Math.floor(a),o=xO(b6(e,s).subarray(0,s+1)),l=yO(e.subarray(s+1));return o+(l-o)*(a-s)}}function Mje(e,t,n=x6){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,s=Math.floor(a),o=+n(e[s],s,e),l=+n(e[s+1],s+1,e);return o+(l-o)*(a-s)}}function Dje(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(a);++r<a;)s[r]=e+r*n;return s}function _i(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function So(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const H_=Symbol("implicit");function FC(){var e=new gO,t=[],n=[],r=H_;function a(s){let o=e.get(s);if(o===void 0){if(r!==H_)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new gO;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(s){return arguments.length?(n=Array.from(s),a):n.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return FC(t,n).unknown(r)},_i.apply(a,arguments),a}function km(){var e=FC().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,s,o,l=!1,c=0,u=0,f=.5;delete e.unknown;function d(){var h=t().length,m=a<r,g=m?a:r,v=m?r:a;s=(v-g)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),g+=(v-g-s*(h-c))*f,o=s*(1-c),l&&(g=Math.round(g),o=Math.round(o));var x=Dje(h).map(function(y){return g+s*y});return n(m?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([r,a]=h,r=+r,a=+a,d()):[r,a]},e.rangeRound=function(h){return[r,a]=h,r=+r,a=+a,l=!0,d()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(h){return arguments.length?(l=!!h,d()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),d()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),d()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.copy=function(){return km(t(),[r,a]).round(l).paddingInner(c).paddingOuter(u).align(f)},_i.apply(d(),arguments)}function w6(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return w6(t())},e}function Ch(){return w6(km.apply(null,arguments).paddingInner(1))}function BC(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function j6(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Fp(){}var Sm=.7,kx=1/Sm,sd="\\s*([+-]?\\d+)\\s*",Nm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ns="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$je=/^#([0-9a-f]{3,8})$/,Lje=new RegExp(`^rgb\\(${sd},${sd},${sd}\\)$`),Fje=new RegExp(`^rgb\\(${Ns},${Ns},${Ns}\\)$`),Bje=new RegExp(`^rgba\\(${sd},${sd},${sd},${Nm}\\)$`),Uje=new RegExp(`^rgba\\(${Ns},${Ns},${Ns},${Nm}\\)$`),zje=new RegExp(`^hsl\\(${Nm},${Ns},${Ns}\\)$`),qje=new RegExp(`^hsla\\(${Nm},${Ns},${Ns},${Nm}\\)$`),bO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};BC(Fp,Cm,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wO,formatHex:wO,formatHex8:Wje,formatHsl:Hje,formatRgb:jO,toString:jO});function wO(){return this.rgb().formatHex()}function Wje(){return this.rgb().formatHex8()}function Hje(){return _6(this).formatHsl()}function jO(){return this.rgb().formatRgb()}function Cm(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$je.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?_O(t):n===3?new Aa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Pg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Pg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Lje.exec(e))?new Aa(t[1],t[2],t[3],1):(t=Fje.exec(e))?new Aa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Bje.exec(e))?Pg(t[1],t[2],t[3],t[4]):(t=Uje.exec(e))?Pg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=zje.exec(e))?NO(t[1],t[2]/100,t[3]/100,1):(t=qje.exec(e))?NO(t[1],t[2]/100,t[3]/100,t[4]):bO.hasOwnProperty(e)?_O(bO[e]):e==="transparent"?new Aa(NaN,NaN,NaN,0):null}function _O(e){return new Aa(e>>16&255,e>>8&255,e&255,1)}function Pg(e,t,n,r){return r<=0&&(e=t=n=NaN),new Aa(e,t,n,r)}function Vje(e){return e instanceof Fp||(e=Cm(e)),e?(e=e.rgb(),new Aa(e.r,e.g,e.b,e.opacity)):new Aa}function V_(e,t,n,r){return arguments.length===1?Vje(e):new Aa(e,t,n,r??1)}function Aa(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}BC(Aa,V_,j6(Fp,{brighter(e){return e=e==null?kx:Math.pow(kx,e),new Aa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Sm:Math.pow(Sm,e),new Aa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Aa(yc(this.r),yc(this.g),yc(this.b),Sx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kO,formatHex:kO,formatHex8:Kje,formatRgb:SO,toString:SO}));function kO(){return`#${lc(this.r)}${lc(this.g)}${lc(this.b)}`}function Kje(){return`#${lc(this.r)}${lc(this.g)}${lc(this.b)}${lc((isNaN(this.opacity)?1:this.opacity)*255)}`}function SO(){const e=Sx(this.opacity);return`${e===1?"rgb(":"rgba("}${yc(this.r)}, ${yc(this.g)}, ${yc(this.b)}${e===1?")":`, ${e})`}`}function Sx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function lc(e){return e=yc(e),(e<16?"0":"")+e.toString(16)}function NO(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new qi(e,t,n,r)}function _6(e){if(e instanceof qi)return new qi(e.h,e.s,e.l,e.opacity);if(e instanceof Fp||(e=Cm(e)),!e)return new qi;if(e instanceof qi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-a,c=(s+a)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new qi(o,l,c,e.opacity)}function Gje(e,t,n,r){return arguments.length===1?_6(e):new qi(e,t,n,r??1)}function qi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}BC(qi,Gje,j6(Fp,{brighter(e){return e=e==null?kx:Math.pow(kx,e),new qi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Sm:Math.pow(Sm,e),new qi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Aa(Zw(e>=240?e-240:e+120,a,r),Zw(e,a,r),Zw(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new qi(CO(this.h),Tg(this.s),Tg(this.l),Sx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Sx(this.opacity);return`${e===1?"hsl(":"hsla("}${CO(this.h)}, ${Tg(this.s)*100}%, ${Tg(this.l)*100}%${e===1?")":`, ${e})`}`}}));function CO(e){return e=(e||0)%360,e<0?e+360:e}function Tg(e){return Math.max(0,Math.min(1,e||0))}function Zw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const UC=e=>()=>e;function Yje(e,t){return function(n){return e+n*t}}function Xje(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Jje(e){return(e=+e)==1?k6:function(t,n){return n-t?Xje(t,n,e):UC(isNaN(t)?n:t)}}function k6(e,t){var n=t-e;return n?Yje(e,n):UC(isNaN(e)?t:e)}const AO=function e(t){var n=Jje(t);function r(a,s){var o=n((a=V_(a)).r,(s=V_(s)).r),l=n(a.g,s.g),c=n(a.b,s.b),u=k6(a.opacity,s.opacity);return function(f){return a.r=o(f),a.g=l(f),a.b=c(f),a.opacity=u(f),a+""}}return r.gamma=e,r}(1);function Qje(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(s){for(a=0;a<n;++a)r[a]=e[a]*(1-s)+t[a]*s;return r}}function Zje(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function e1e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)a[o]=bf(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=a[o](l);return s}}function t1e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Nx(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function n1e(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=bf(e[a],t[a]):r[a]=t[a];return function(s){for(a in n)r[a]=n[a](s);return r}}var K_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ej=new RegExp(K_.source,"g");function r1e(e){return function(){return e}}function a1e(e){return function(t){return e(t)+""}}function i1e(e,t){var n=K_.lastIndex=ej.lastIndex=0,r,a,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=K_.exec(e))&&(a=ej.exec(t));)(s=a.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Nx(r,a)})),n=ej.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?a1e(c[0].x):r1e(t):(t=c.length,function(u){for(var f=0,d;f<t;++f)l[(d=c[f]).i]=d.x(u);return l.join("")})}function bf(e,t){var n=typeof t,r;return t==null||n==="boolean"?UC(t):(n==="number"?Nx:n==="string"?(r=Cm(t))?(t=r,AO):i1e:t instanceof Cm?AO:t instanceof Date?t1e:Zje(t)?Qje:Array.isArray(t)?e1e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?n1e:Nx)(e,t)}function zC(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function s1e(e,t){t===void 0&&(t=e,e=bf);for(var n=0,r=t.length-1,a=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[l](o-l)}}function o1e(e){return function(){return e}}function Cx(e){return+e}var EO=[0,1];function la(e){return e}function G_(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:o1e(isNaN(t)?NaN:.5)}function l1e(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function c1e(e,t,n){var r=e[0],a=e[1],s=t[0],o=t[1];return a<r?(r=G_(a,r),s=n(o,s)):(r=G_(r,a),s=n(s,o)),function(l){return s(r(l))}}function u1e(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=G_(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(l){var c=Lp(e,l,1,r)-1;return s[c](a[c](l))}}function Bp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gb(){var e=EO,t=EO,n=bf,r,a,s,o=la,l,c,u;function f(){var h=Math.min(e.length,t.length);return o!==la&&(o=l1e(e[0],e[h-1])),l=h>2?u1e:c1e,c=u=null,d}function d(h){return h==null||isNaN(h=+h)?s:(c||(c=l(e.map(r),t,n)))(r(o(h)))}return d.invert=function(h){return o(a((u||(u=l(t,e.map(r),Nx)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,Cx),f()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),n=zC,f()},d.clamp=function(h){return arguments.length?(o=h?!0:la,f()):o!==la},d.interpolate=function(h){return arguments.length?(n=h,f()):n},d.unknown=function(h){return arguments.length?(s=h,d):s},function(h,m){return r=h,a=m,f()}}function qC(){return Gb()(la,la)}function d1e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ax(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Dd(e){return e=Ax(Math.abs(e)),e?e[1]:NaN}function f1e(e,t){return function(n,r){for(var a=n.length,s=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(a-=l,a+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function h1e(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var m1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Am(e){if(!(t=m1e.exec(e)))throw new Error("invalid format: "+e);var t;return new WC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Am.prototype=WC.prototype;function WC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}WC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function p1e(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var S6;function g1e(e,t){var n=Ax(e,t);if(!n)return e+"";var r=n[0],a=n[1],s=a-(S6=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Ax(e,Math.max(0,t+s-1))[0]}function PO(e,t){var n=Ax(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const TO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:d1e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>PO(e*100,t),r:PO,s:g1e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function OO(e){return e}var IO=Array.prototype.map,RO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function v1e(e){var t=e.grouping===void 0||e.thousands===void 0?OO:f1e(IO.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?OO:h1e(IO.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Am(d);var h=d.fill,m=d.align,g=d.sign,v=d.symbol,x=d.zero,y=d.width,b=d.comma,w=d.precision,k=d.trim,_=d.type;_==="n"?(b=!0,_="g"):TO[_]||(w===void 0&&(w=12),k=!0,_="g"),(x||h==="0"&&m==="=")&&(x=!0,h="0",m="=");var j=v==="$"?n:v==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=v==="$"?r:/[%p]/.test(_)?o:"",A=TO[_],C=/[defgprs%]/.test(_);w=w===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function T(M){var F=j,E=S,I,P,B;if(_==="c")E=A(M)+E,M="";else{M=+M;var O=M<0||1/M<0;if(M=isNaN(M)?c:A(Math.abs(M),w),k&&(M=p1e(M)),O&&+M==0&&g!=="+"&&(O=!1),F=(O?g==="("?g:l:g==="-"||g==="("?"":g)+F,E=(_==="s"?RO[8+S6/3]:"")+E+(O&&g==="("?")":""),C){for(I=-1,P=M.length;++I<P;)if(B=M.charCodeAt(I),48>B||B>57){E=(B===46?a+M.slice(I+1):M.slice(I))+E,M=M.slice(0,I);break}}}b&&!x&&(M=t(M,1/0));var $=F.length+M.length+E.length,L=$<y?new Array(y-$+1).join(h):"";switch(b&&x&&(M=t(L+M,L.length?y-E.length:1/0),L=""),m){case"<":M=F+M+E+L;break;case"=":M=F+L+M+E;break;case"^":M=L.slice(0,$=L.length>>1)+F+M+E+L.slice($);break;default:M=L+F+M+E;break}return s(M)}return T.toString=function(){return d+""},T}function f(d,h){var m=u((d=Am(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(Dd(h)/3)))*3,v=Math.pow(10,-g),x=RO[8+g/3];return function(y){return m(v*y)+x}}return{format:u,formatPrefix:f}}var Og,HC,N6;x1e({thousands:",",grouping:[3],currency:["$",""]});function x1e(e){return Og=v1e(e),HC=Og.format,N6=Og.formatPrefix,Og}function y1e(e){return Math.max(0,-Dd(Math.abs(e)))}function b1e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Dd(t)/3)))*3-Dd(Math.abs(e)))}function w1e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Dd(t)-Dd(e))+1}function C6(e,t,n,r){var a=W_(e,t,n),s;switch(r=Am(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=b1e(a,o))&&(r.precision=s),N6(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=w1e(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=y1e(a))&&(r.precision=s-(r.type==="%")*2);break}}return HC(r)}function Ll(e){var t=e.domain;return e.ticks=function(n){var r=t();return z_(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return C6(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,s=r.length-1,o=r[a],l=r[s],c,u,f=10;for(l<o&&(u=o,o=l,l=u,u=a,a=s,s=u);f-- >0;){if(u=q_(o,l,n),u===c)return r[a]=o,r[s]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Ex(){var e=qC();return e.copy=function(){return Bp(e,Ex())},_i.apply(e,arguments),Ll(e)}function A6(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Cx),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return A6(e).unknown(t)},e=arguments.length?Array.from(e,Cx):[0,1],Ll(n)}function E6(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],s=e[r],o;return s<a&&(o=n,n=r,r=o,o=a,a=s,s=o),e[n]=t.floor(a),e[r]=t.ceil(s),e}function MO(e){return Math.log(e)}function DO(e){return Math.exp(e)}function j1e(e){return-Math.log(-e)}function _1e(e){return-Math.exp(-e)}function k1e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function S1e(e){return e===10?k1e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function N1e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function $O(e){return(t,n)=>-e(-t,n)}function VC(e){const t=e(MO,DO),n=t.domain;let r=10,a,s;function o(){return a=N1e(r),s=S1e(r),n()[0]<0?(a=$O(a),s=$O(s),e(j1e,_1e)):e(MO,DO),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let h=a(u),m=a(f),g,v;const x=l==null?10:+l;let y=[];if(!(r%1)&&m-h<x){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(g=1;g<r;++g)if(v=h<0?g/s(-h):g*s(h),!(v<u)){if(v>f)break;y.push(v)}}else for(;h<=m;++h)for(g=r-1;g>=1;--g)if(v=h>0?g/s(-h):g*s(h),!(v<u)){if(v>f)break;y.push(v)}y.length*2<x&&(y=z_(u,f,x))}else y=z_(h,m,Math.min(m-h,x)).map(s);return d?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Am(c)).precision==null&&(c.trim=!0),c=HC(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return f=>{let d=f/s(Math.round(a(f)));return d*r<r-.5&&(d*=r),d<=u?c(f):""}},t.nice=()=>n(E6(n(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),t}function P6(){const e=VC(Gb()).domain([1,10]);return e.copy=()=>Bp(e,P6()).base(e.base()),_i.apply(e,arguments),e}function LO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function FO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function KC(e){var t=1,n=e(LO(t),FO(t));return n.constant=function(r){return arguments.length?e(LO(t=+r),FO(t)):t},Ll(n)}function T6(){var e=KC(Gb());return e.copy=function(){return Bp(e,T6()).constant(e.constant())},_i.apply(e,arguments)}function BO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function C1e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function A1e(e){return e<0?-e*e:e*e}function GC(e){var t=e(la,la),n=1;function r(){return n===1?e(la,la):n===.5?e(C1e,A1e):e(BO(n),BO(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Ll(t)}function YC(){var e=GC(Gb());return e.copy=function(){return Bp(e,YC()).exponent(e.exponent())},_i.apply(e,arguments),e}function E1e(){return YC.apply(null,arguments).exponent(.5)}function UO(e){return Math.sign(e)*e*e}function P1e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function O6(){var e=qC(),t=[0,1],n=!1,r;function a(s){var o=P1e(e(s));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(s){return e.invert(UO(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,Cx)).map(UO)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(n=!!s,a):n},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return O6(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},_i.apply(a,arguments),Ll(a)}function I6(){var e=[],t=[],n=[],r;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=Mje(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Lp(n,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(pl),a()},s.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return I6().domain(e).range(t).unknown(r)},_i.apply(s,arguments)}function R6(){var e=0,t=1,n=1,r=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Lp(r,c,0,n)]:s}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return R6().domain([e,t]).range(a).unknown(s)},_i.apply(Ll(o),arguments)}function M6(){var e=[.5],t=[0,1],n,r=1;function a(s){return s!=null&&s<=s?t[Lp(e,s,0,r)]:n}return a.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return M6().domain(e).range(t).unknown(n)},_i.apply(a,arguments)}const tj=new Date,nj=new Date;function gr(e,t,n,r){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},a.filter=s=>gr(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),n&&(a.count=(s,o)=>(tj.setTime(+s),nj.setTime(+o),e(tj),e(nj),Math.floor(n(tj,nj))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(r?o=>r(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const Px=gr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Px.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?gr(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Px);Px.range;const Qs=1e3,hi=Qs*60,Zs=hi*60,xo=Zs*24,XC=xo*7,zO=xo*30,rj=xo*365,cc=gr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Qs)},(e,t)=>(t-e)/Qs,e=>e.getUTCSeconds());cc.range;const JC=gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qs)},(e,t)=>{e.setTime(+e+t*hi)},(e,t)=>(t-e)/hi,e=>e.getMinutes());JC.range;const QC=gr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*hi)},(e,t)=>(t-e)/hi,e=>e.getUTCMinutes());QC.range;const ZC=gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qs-e.getMinutes()*hi)},(e,t)=>{e.setTime(+e+t*Zs)},(e,t)=>(t-e)/Zs,e=>e.getHours());ZC.range;const eA=gr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Zs)},(e,t)=>(t-e)/Zs,e=>e.getUTCHours());eA.range;const Up=gr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hi)/xo,e=>e.getDate()-1);Up.range;const Yb=gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xo,e=>e.getUTCDate()-1);Yb.range;const D6=gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xo,e=>Math.floor(e/xo));D6.range;function tu(e){return gr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*hi)/XC)}const Xb=tu(0),Tx=tu(1),T1e=tu(2),O1e=tu(3),$d=tu(4),I1e=tu(5),R1e=tu(6);Xb.range;Tx.range;T1e.range;O1e.range;$d.range;I1e.range;R1e.range;function nu(e){return gr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/XC)}const Jb=nu(0),Ox=nu(1),M1e=nu(2),D1e=nu(3),Ld=nu(4),$1e=nu(5),L1e=nu(6);Jb.range;Ox.range;M1e.range;D1e.range;Ld.range;$1e.range;L1e.range;const tA=gr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());tA.range;const nA=gr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());nA.range;const yo=gr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());yo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});yo.range;const bo=gr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());bo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});bo.range;function $6(e,t,n,r,a,s){const o=[[cc,1,Qs],[cc,5,5*Qs],[cc,15,15*Qs],[cc,30,30*Qs],[s,1,hi],[s,5,5*hi],[s,15,15*hi],[s,30,30*hi],[a,1,Zs],[a,3,3*Zs],[a,6,6*Zs],[a,12,12*Zs],[r,1,xo],[r,2,2*xo],[n,1,XC],[t,1,zO],[t,3,3*zO],[e,1,rj]];function l(u,f,d){const h=f<u;h&&([u,f]=[f,u]);const m=d&&typeof d.range=="function"?d:c(u,f,d),g=m?m.range(u,+f+1):[];return h?g.reverse():g}function c(u,f,d){const h=Math.abs(f-u)/d,m=LC(([,,x])=>x).right(o,h);if(m===o.length)return e.every(W_(u/rj,f/rj,d));if(m===0)return Px.every(Math.max(W_(u,f,d),1));const[g,v]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(v)}return[l,c]}const[F1e,B1e]=$6(bo,nA,Jb,D6,eA,QC),[U1e,z1e]=$6(yo,tA,Xb,Up,ZC,JC);function aj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ij(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Kf(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function q1e(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Gf(a),f=Yf(a),d=Gf(s),h=Yf(s),m=Gf(o),g=Yf(o),v=Gf(l),x=Yf(l),y=Gf(c),b=Yf(c),w={a:O,A:$,b:L,B:N,c:null,d:GO,e:GO,f:f_e,g:j_e,G:k_e,H:c_e,I:u_e,j:d_e,L:L6,m:h_e,M:m_e,p:U,q:D,Q:JO,s:QO,S:p_e,u:g_e,U:v_e,V:x_e,w:y_e,W:b_e,x:null,X:null,y:w_e,Y:__e,Z:S_e,"%":XO},k={a:R,A:K,b:Q,B:H,c:null,d:YO,e:YO,f:E_e,g:F_e,G:U_e,H:N_e,I:C_e,j:A_e,L:B6,m:P_e,M:T_e,p:V,q:ie,Q:JO,s:QO,S:O_e,u:I_e,U:R_e,V:M_e,w:D_e,W:$_e,x:null,X:null,y:L_e,Y:B_e,Z:z_e,"%":XO},_={a:T,A:M,b:F,B:E,c:I,d:VO,e:VO,f:i_e,g:HO,G:WO,H:KO,I:KO,j:t_e,L:a_e,m:e_e,M:n_e,p:C,q:Z1e,Q:o_e,s:l_e,S:r_e,u:G1e,U:Y1e,V:X1e,w:K1e,W:J1e,x:P,X:B,y:HO,Y:WO,Z:Q1e,"%":s_e};w.x=j(n,w),w.X=j(r,w),w.c=j(t,w),k.x=j(n,k),k.X=j(r,k),k.c=j(t,k);function j(G,le){return function(se){var Z=[],_e=-1,z=0,q=G.length,ce,ke,Ae;for(se instanceof Date||(se=new Date(+se));++_e<q;)G.charCodeAt(_e)===37&&(Z.push(G.slice(z,_e)),(ke=qO[ce=G.charAt(++_e)])!=null?ce=G.charAt(++_e):ke=ce==="e"?" ":"0",(Ae=le[ce])&&(ce=Ae(se,ke)),Z.push(ce),z=_e+1);return Z.push(G.slice(z,_e)),Z.join("")}}function S(G,le){return function(se){var Z=Kf(1900,void 0,1),_e=A(Z,G,se+="",0),z,q;if(_e!=se.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if(le&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(z=ij(Kf(Z.y,0,1)),q=z.getUTCDay(),z=q>4||q===0?Ox.ceil(z):Ox(z),z=Yb.offset(z,(Z.V-1)*7),Z.y=z.getUTCFullYear(),Z.m=z.getUTCMonth(),Z.d=z.getUTCDate()+(Z.w+6)%7):(z=aj(Kf(Z.y,0,1)),q=z.getDay(),z=q>4||q===0?Tx.ceil(z):Tx(z),z=Up.offset(z,(Z.V-1)*7),Z.y=z.getFullYear(),Z.m=z.getMonth(),Z.d=z.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),q="Z"in Z?ij(Kf(Z.y,0,1)).getUTCDay():aj(Kf(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(q+5)%7:Z.w+Z.U*7-(q+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,ij(Z)):aj(Z)}}function A(G,le,se,Z){for(var _e=0,z=le.length,q=se.length,ce,ke;_e<z;){if(Z>=q)return-1;if(ce=le.charCodeAt(_e++),ce===37){if(ce=le.charAt(_e++),ke=_[ce in qO?le.charAt(_e++):ce],!ke||(Z=ke(G,se,Z))<0)return-1}else if(ce!=se.charCodeAt(Z++))return-1}return Z}function C(G,le,se){var Z=u.exec(le.slice(se));return Z?(G.p=f.get(Z[0].toLowerCase()),se+Z[0].length):-1}function T(G,le,se){var Z=m.exec(le.slice(se));return Z?(G.w=g.get(Z[0].toLowerCase()),se+Z[0].length):-1}function M(G,le,se){var Z=d.exec(le.slice(se));return Z?(G.w=h.get(Z[0].toLowerCase()),se+Z[0].length):-1}function F(G,le,se){var Z=y.exec(le.slice(se));return Z?(G.m=b.get(Z[0].toLowerCase()),se+Z[0].length):-1}function E(G,le,se){var Z=v.exec(le.slice(se));return Z?(G.m=x.get(Z[0].toLowerCase()),se+Z[0].length):-1}function I(G,le,se){return A(G,t,le,se)}function P(G,le,se){return A(G,n,le,se)}function B(G,le,se){return A(G,r,le,se)}function O(G){return o[G.getDay()]}function $(G){return s[G.getDay()]}function L(G){return c[G.getMonth()]}function N(G){return l[G.getMonth()]}function U(G){return a[+(G.getHours()>=12)]}function D(G){return 1+~~(G.getMonth()/3)}function R(G){return o[G.getUTCDay()]}function K(G){return s[G.getUTCDay()]}function Q(G){return c[G.getUTCMonth()]}function H(G){return l[G.getUTCMonth()]}function V(G){return a[+(G.getUTCHours()>=12)]}function ie(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var le=j(G+="",w);return le.toString=function(){return G},le},parse:function(G){var le=S(G+="",!1);return le.toString=function(){return G},le},utcFormat:function(G){var le=j(G+="",k);return le.toString=function(){return G},le},utcParse:function(G){var le=S(G+="",!0);return le.toString=function(){return G},le}}}var qO={"-":"",_:" ",0:"0"},Sr=/^\s*\d+/,W1e=/^%/,H1e=/[\\^$*+?|[\]().{}]/g;function nn(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",s=a.length;return r+(s<n?new Array(n-s+1).join(t)+a:a)}function V1e(e){return e.replace(H1e,"\\$&")}function Gf(e){return new RegExp("^(?:"+e.map(V1e).join("|")+")","i")}function Yf(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function K1e(e,t,n){var r=Sr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function G1e(e,t,n){var r=Sr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Y1e(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function X1e(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function J1e(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function WO(e,t,n){var r=Sr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function HO(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Q1e(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Z1e(e,t,n){var r=Sr.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function e_e(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function VO(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function t_e(e,t,n){var r=Sr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function KO(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function n_e(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function r_e(e,t,n){var r=Sr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function a_e(e,t,n){var r=Sr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function i_e(e,t,n){var r=Sr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function s_e(e,t,n){var r=W1e.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function o_e(e,t,n){var r=Sr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function l_e(e,t,n){var r=Sr.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function GO(e,t){return nn(e.getDate(),t,2)}function c_e(e,t){return nn(e.getHours(),t,2)}function u_e(e,t){return nn(e.getHours()%12||12,t,2)}function d_e(e,t){return nn(1+Up.count(yo(e),e),t,3)}function L6(e,t){return nn(e.getMilliseconds(),t,3)}function f_e(e,t){return L6(e,t)+"000"}function h_e(e,t){return nn(e.getMonth()+1,t,2)}function m_e(e,t){return nn(e.getMinutes(),t,2)}function p_e(e,t){return nn(e.getSeconds(),t,2)}function g_e(e){var t=e.getDay();return t===0?7:t}function v_e(e,t){return nn(Xb.count(yo(e)-1,e),t,2)}function F6(e){var t=e.getDay();return t>=4||t===0?$d(e):$d.ceil(e)}function x_e(e,t){return e=F6(e),nn($d.count(yo(e),e)+(yo(e).getDay()===4),t,2)}function y_e(e){return e.getDay()}function b_e(e,t){return nn(Tx.count(yo(e)-1,e),t,2)}function w_e(e,t){return nn(e.getFullYear()%100,t,2)}function j_e(e,t){return e=F6(e),nn(e.getFullYear()%100,t,2)}function __e(e,t){return nn(e.getFullYear()%1e4,t,4)}function k_e(e,t){var n=e.getDay();return e=n>=4||n===0?$d(e):$d.ceil(e),nn(e.getFullYear()%1e4,t,4)}function S_e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+nn(t/60|0,"0",2)+nn(t%60,"0",2)}function YO(e,t){return nn(e.getUTCDate(),t,2)}function N_e(e,t){return nn(e.getUTCHours(),t,2)}function C_e(e,t){return nn(e.getUTCHours()%12||12,t,2)}function A_e(e,t){return nn(1+Yb.count(bo(e),e),t,3)}function B6(e,t){return nn(e.getUTCMilliseconds(),t,3)}function E_e(e,t){return B6(e,t)+"000"}function P_e(e,t){return nn(e.getUTCMonth()+1,t,2)}function T_e(e,t){return nn(e.getUTCMinutes(),t,2)}function O_e(e,t){return nn(e.getUTCSeconds(),t,2)}function I_e(e){var t=e.getUTCDay();return t===0?7:t}function R_e(e,t){return nn(Jb.count(bo(e)-1,e),t,2)}function U6(e){var t=e.getUTCDay();return t>=4||t===0?Ld(e):Ld.ceil(e)}function M_e(e,t){return e=U6(e),nn(Ld.count(bo(e),e)+(bo(e).getUTCDay()===4),t,2)}function D_e(e){return e.getUTCDay()}function $_e(e,t){return nn(Ox.count(bo(e)-1,e),t,2)}function L_e(e,t){return nn(e.getUTCFullYear()%100,t,2)}function F_e(e,t){return e=U6(e),nn(e.getUTCFullYear()%100,t,2)}function B_e(e,t){return nn(e.getUTCFullYear()%1e4,t,4)}function U_e(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ld(e):Ld.ceil(e),nn(e.getUTCFullYear()%1e4,t,4)}function z_e(){return"+0000"}function XO(){return"%"}function JO(e){return+e}function QO(e){return Math.floor(+e/1e3)}var vu,z6,q6;q_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function q_e(e){return vu=q1e(e),z6=vu.format,vu.parse,q6=vu.utcFormat,vu.utcParse,vu}function W_e(e){return new Date(e)}function H_e(e){return e instanceof Date?+e:+new Date(+e)}function rA(e,t,n,r,a,s,o,l,c,u){var f=qC(),d=f.invert,h=f.domain,m=u(".%L"),g=u(":%S"),v=u("%I:%M"),x=u("%I %p"),y=u("%a %d"),b=u("%b %d"),w=u("%B"),k=u("%Y");function _(j){return(c(j)<j?m:l(j)<j?g:o(j)<j?v:s(j)<j?x:r(j)<j?a(j)<j?y:b:n(j)<j?w:k)(j)}return f.invert=function(j){return new Date(d(j))},f.domain=function(j){return arguments.length?h(Array.from(j,H_e)):h().map(W_e)},f.ticks=function(j){var S=h();return e(S[0],S[S.length-1],j??10)},f.tickFormat=function(j,S){return S==null?_:u(S)},f.nice=function(j){var S=h();return(!j||typeof j.range!="function")&&(j=t(S[0],S[S.length-1],j??10)),j?h(E6(S,j)):f},f.copy=function(){return Bp(f,rA(e,t,n,r,a,s,o,l,c,u))},f}function V_e(){return _i.apply(rA(U1e,z1e,yo,tA,Xb,Up,ZC,JC,cc,z6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function K_e(){return _i.apply(rA(F1e,B1e,bo,nA,Jb,Yb,eA,QC,cc,q6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qb(){var e=0,t=1,n,r,a,s,o=la,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(a===0?.5:(d=(s(d)-n)*a,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=s(e=+e),r=s(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(h){var m,g;return arguments.length?([m,g]=h,o=d(m,g),u):[o(0),o(1)]}}return u.range=f(bf),u.rangeRound=f(zC),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return s=d,n=d(e),r=d(t),a=n===r?0:1/(r-n),u}}function Fl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function W6(){var e=Ll(Qb()(la));return e.copy=function(){return Fl(e,W6())},So.apply(e,arguments)}function H6(){var e=VC(Qb()).domain([1,10]);return e.copy=function(){return Fl(e,H6()).base(e.base())},So.apply(e,arguments)}function V6(){var e=KC(Qb());return e.copy=function(){return Fl(e,V6()).constant(e.constant())},So.apply(e,arguments)}function aA(){var e=GC(Qb());return e.copy=function(){return Fl(e,aA()).exponent(e.exponent())},So.apply(e,arguments)}function G_e(){return aA.apply(null,arguments).exponent(.5)}function K6(){var e=[],t=la;function n(r){if(r!=null&&!isNaN(r=+r))return t((Lp(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(pl),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,s)=>Rje(e,s/r))},n.copy=function(){return K6(t).domain(e)},So.apply(n,arguments)}function Zb(){var e=0,t=.5,n=1,r=1,a,s,o,l,c,u=la,f,d=!1,h;function m(v){return isNaN(v=+v)?h:(v=.5+((v=+f(v))-s)*(r*v<r*s?l:c),u(d?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,n]=v,a=f(e=+e),s=f(t=+t),o=f(n=+n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,m):[e,t,n]},m.clamp=function(v){return arguments.length?(d=!!v,m):d},m.interpolator=function(v){return arguments.length?(u=v,m):u};function g(v){return function(x){var y,b,w;return arguments.length?([y,b,w]=x,u=s1e(v,[y,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=g(bf),m.rangeRound=g(zC),m.unknown=function(v){return arguments.length?(h=v,m):h},function(v){return f=v,a=v(e),s=v(t),o=v(n),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),r=s<a?-1:1,m}}function G6(){var e=Ll(Zb()(la));return e.copy=function(){return Fl(e,G6())},So.apply(e,arguments)}function Y6(){var e=VC(Zb()).domain([.1,1,10]);return e.copy=function(){return Fl(e,Y6()).base(e.base())},So.apply(e,arguments)}function X6(){var e=KC(Zb());return e.copy=function(){return Fl(e,X6()).constant(e.constant())},So.apply(e,arguments)}function iA(){var e=GC(Zb());return e.copy=function(){return Fl(e,iA()).exponent(e.exponent())},So.apply(e,arguments)}function Y_e(){return iA.apply(null,arguments).exponent(.5)}const ZO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:km,scaleDiverging:G6,scaleDivergingLog:Y6,scaleDivergingPow:iA,scaleDivergingSqrt:Y_e,scaleDivergingSymlog:X6,scaleIdentity:A6,scaleImplicit:H_,scaleLinear:Ex,scaleLog:P6,scaleOrdinal:FC,scalePoint:Ch,scalePow:YC,scaleQuantile:I6,scaleQuantize:R6,scaleRadial:O6,scaleSequential:W6,scaleSequentialLog:H6,scaleSequentialPow:aA,scaleSequentialQuantile:K6,scaleSequentialSqrt:G_e,scaleSequentialSymlog:V6,scaleSqrt:E1e,scaleSymlog:T6,scaleThreshold:M6,scaleTime:V_e,scaleUtc:K_e,tickFormat:C6},Symbol.toStringTag,{value:"Module"}));var X_e=ff;function J_e(e,t,n){for(var r=-1,a=e.length;++r<a;){var s=e[r],o=t(s);if(o!=null&&(l===void 0?o===o&&!X_e(o):n(o,l)))var l=o,c=s}return c}var J6=J_e;function Q_e(e,t){return e>t}var Z_e=Q_e,eke=J6,tke=Z_e,nke=yf;function rke(e){return e&&e.length?eke(e,nke,tke):void 0}var ake=rke;const e0=un(ake);function ike(e,t){return e<t}var ske=ike,oke=J6,lke=ske,cke=yf;function uke(e){return e&&e.length?oke(e,cke,lke):void 0}var dke=uke;const t0=un(dke);var fke=yC,hke=$l,mke=i6,pke=Ma;function gke(e,t){var n=pke(e)?fke:mke;return n(e,hke(t))}var vke=gke,xke=r6,yke=vke;function bke(e,t){return xke(yke(e,t),1)}var wke=bke;const jke=un(wke);var _ke=RC;function kke(e,t){return _ke(e,t)}var Ske=kke;const sA=un(Ske);var wf=1e9,Nke={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},lA,$n=!0,bi="[DecimalError] ",bc=bi+"Invalid argument: ",oA=bi+"Exponent out of range: ",jf=Math.floor,Zl=Math.pow,Cke=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Wa,yr=1e7,En=7,Q6=9007199254740991,Ix=jf(Q6/En),lt={};lt.absoluteValue=lt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};lt.comparedTo=lt.cmp=function(e){var t,n,r,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(r=s.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===a?0:r>a^s.s<0?1:-1};lt.decimalPlaces=lt.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*En;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};lt.dividedBy=lt.div=function(e){return oo(this,new this.constructor(e))};lt.dividedToIntegerBy=lt.idiv=function(e){var t=this,n=t.constructor;return gn(oo(t,new n(e),0,1),n.precision)};lt.equals=lt.eq=function(e){return!this.cmp(e)};lt.exponent=function(){return sr(this)};lt.greaterThan=lt.gt=function(e){return this.cmp(e)>0};lt.greaterThanOrEqualTo=lt.gte=function(e){return this.cmp(e)>=0};lt.isInteger=lt.isint=function(){return this.e>this.d.length-2};lt.isNegative=lt.isneg=function(){return this.s<0};lt.isPositive=lt.ispos=function(){return this.s>0};lt.isZero=function(){return this.s===0};lt.lessThan=lt.lt=function(e){return this.cmp(e)<0};lt.lessThanOrEqualTo=lt.lte=function(e){return this.cmp(e)<1};lt.logarithm=lt.log=function(e){var t,n=this,r=n.constructor,a=r.precision,s=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Wa))throw Error(bi+"NaN");if(n.s<1)throw Error(bi+(n.s?"NaN":"-Infinity"));return n.eq(Wa)?new r(0):($n=!1,t=oo(Em(n,s),Em(e,s),s),$n=!0,gn(t,a))};lt.minus=lt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?t8(t,e):Z6(t,(e.s=-e.s,e))};lt.modulo=lt.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(bi+"NaN");return n.s?($n=!1,t=oo(n,e,0,1).times(e),$n=!0,n.minus(t)):gn(new r(n),a)};lt.naturalExponential=lt.exp=function(){return e8(this)};lt.naturalLogarithm=lt.ln=function(){return Em(this)};lt.negated=lt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};lt.plus=lt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Z6(t,e):t8(t,(e.s=-e.s,e))};lt.precision=lt.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(bc+e);if(t=sr(a)+1,r=a.d.length-1,n=r*En+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};lt.squareRoot=lt.sqrt=function(){var e,t,n,r,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(bi+"NaN")}for(e=sr(l),$n=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=ws(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=jf((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(s=r,r=s.plus(oo(l,s,o+2)).times(.5),ws(s.d).slice(0,o)===(t=ws(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(gn(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(t!="9999")break;o+=4}return $n=!0,gn(r,n)};lt.times=lt.mul=function(e){var t,n,r,a,s,o,l,c,u,f=this,d=f.constructor,h=f.d,m=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,n=f.e+e.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,o=c,c=u,u=o),s=[],o=c+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=s[a]+m[r]*h[a-r-1]+t,s[a--]=l%yr|0,t=l/yr|0;s[a]=(s[a]+t)%yr|0}for(;!s[--o];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,$n?gn(e,d.precision):e};lt.toDecimalPlaces=lt.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ts(e,0,wf),t===void 0?t=r.rounding:Ts(t,0,8),gn(n,e+sr(n)+1,t))};lt.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=Uc(r,!0):(Ts(e,0,wf),t===void 0?t=a.rounding:Ts(t,0,8),r=gn(new a(r),e+1,t),n=Uc(r,!0,e+1)),n};lt.toFixed=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?Uc(a):(Ts(e,0,wf),t===void 0?t=s.rounding:Ts(t,0,8),r=gn(new s(a),e+sr(a)+1,t),n=Uc(r.abs(),!1,e+sr(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};lt.toInteger=lt.toint=function(){var e=this,t=e.constructor;return gn(new t(e),sr(e)+1,t.rounding)};lt.toNumber=function(){return+this};lt.toPower=lt.pow=function(e){var t,n,r,a,s,o,l=this,c=l.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(Wa);if(l=new c(l),!l.s){if(e.s<1)throw Error(bi+"Infinity");return l}if(l.eq(Wa))return l;if(r=c.precision,e.eq(Wa))return gn(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,s=l.s,o){if((n=f<0?-f:f)<=Q6){for(a=new c(Wa),t=Math.ceil(r/En+4),$n=!1;n%2&&(a=a.times(l),tI(a.d,t)),n=jf(n/2),n!==0;)l=l.times(l),tI(l.d,t);return $n=!0,e.s<0?new c(Wa).div(a):gn(a,r)}}else if(s<0)throw Error(bi+"NaN");return s=s<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,$n=!1,a=e.times(Em(l,r+u)),$n=!0,a=e8(a),a.s=s,a};lt.toPrecision=function(e,t){var n,r,a=this,s=a.constructor;return e===void 0?(n=sr(a),r=Uc(a,n<=s.toExpNeg||n>=s.toExpPos)):(Ts(e,1,wf),t===void 0?t=s.rounding:Ts(t,0,8),a=gn(new s(a),e,t),n=sr(a),r=Uc(a,e<=n||n<=s.toExpNeg,e)),r};lt.toSignificantDigits=lt.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ts(e,1,wf),t===void 0?t=r.rounding:Ts(t,0,8)),gn(new r(n),e,t)};lt.toString=lt.valueOf=lt.val=lt.toJSON=lt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=sr(e),n=e.constructor;return Uc(e,t<=n.toExpNeg||t>=n.toExpPos)};function Z6(e,t){var n,r,a,s,o,l,c,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),$n?gn(t,d):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),s=o-a,s){for(s<0?(r=c,s=-s,l=u.length):(r=u,a=o,l=c.length),o=Math.ceil(d/En),l=o>l?o+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/yr|0,c[s]%=yr;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,$n?gn(t,d):t}function Ts(e,t,n){if(e!==~~e||e<t||e>n)throw Error(bc+e)}function ws(e){var t,n,r,a=e.length-1,s="",o=e[0];if(a>0){for(s+=o,t=1;t<a;t++)r=e[t]+"",n=En-r.length,n&&(s+=qo(n)),s+=r;o=e[t],r=o+"",n=En-r.length,n&&(s+=qo(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var oo=function(){function e(r,a){var s,o=0,l=r.length;for(r=r.slice();l--;)s=r[l]*a+o,r[l]=s%yr|0,o=s/yr|0;return o&&r.unshift(o),r}function t(r,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(r[l]!=a[l]){c=r[l]>a[l]?1:-1;break}return c}function n(r,a,s){for(var o=0;s--;)r[s]-=o,o=r[s]<a[s]?1:0,r[s]=o*yr+r[s]-a[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,s,o){var l,c,u,f,d,h,m,g,v,x,y,b,w,k,_,j,S,A,C=r.constructor,T=r.s==a.s?1:-1,M=r.d,F=a.d;if(!r.s)return new C(r);if(!a.s)throw Error(bi+"Division by zero");for(c=r.e-a.e,S=F.length,_=M.length,m=new C(T),g=m.d=[],u=0;F[u]==(M[u]||0);)++u;if(F[u]>(M[u]||0)&&--c,s==null?b=s=C.precision:o?b=s+(sr(r)-sr(a))+1:b=s,b<0)return new C(0);if(b=b/En+2|0,u=0,S==1)for(f=0,F=F[0],b++;(u<_||f)&&b--;u++)w=f*yr+(M[u]||0),g[u]=w/F|0,f=w%F|0;else{for(f=yr/(F[0]+1)|0,f>1&&(F=e(F,f),M=e(M,f),S=F.length,_=M.length),k=S,v=M.slice(0,S),x=v.length;x<S;)v[x++]=0;A=F.slice(),A.unshift(0),j=F[0],F[1]>=yr/2&&++j;do f=0,l=t(F,v,S,x),l<0?(y=v[0],S!=x&&(y=y*yr+(v[1]||0)),f=y/j|0,f>1?(f>=yr&&(f=yr-1),d=e(F,f),h=d.length,x=v.length,l=t(d,v,h,x),l==1&&(f--,n(d,S<h?A:F,h))):(f==0&&(l=f=1),d=F.slice()),h=d.length,h<x&&d.unshift(0),n(v,d,x),l==-1&&(x=v.length,l=t(F,v,S,x),l<1&&(f++,n(v,S<x?A:F,x))),x=v.length):l===0&&(f++,v=[0]),g[u++]=f,l&&v[0]?v[x++]=M[k]||0:(v=[M[k]],x=1);while((k++<_||v[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=c,gn(m,o?s+sr(m)+1:s)}}();function e8(e,t){var n,r,a,s,o,l,c=0,u=0,f=e.constructor,d=f.precision;if(sr(e)>16)throw Error(oA+sr(e));if(!e.s)return new f(Wa);for(t==null?($n=!1,l=d):l=t,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(Zl(2,u))/Math.LN10*2+5|0,l+=r,n=a=s=new f(Wa),f.precision=l;;){if(a=gn(a.times(e),l),n=n.times(++c),o=s.plus(oo(a,n,l)),ws(o.d).slice(0,l)===ws(s.d).slice(0,l)){for(;u--;)s=gn(s.times(s),l);return f.precision=d,t==null?($n=!0,gn(s,d)):s}s=o}}function sr(e){for(var t=e.e*En,n=e.d[0];n>=10;n/=10)t++;return t}function sj(e,t,n){if(t>e.LN10.sd())throw $n=!0,n&&(e.precision=n),Error(bi+"LN10 precision limit exceeded");return gn(new e(e.LN10),t)}function qo(e){for(var t="";e--;)t+="0";return t}function Em(e,t){var n,r,a,s,o,l,c,u,f,d=1,h=10,m=e,g=m.d,v=m.constructor,x=v.precision;if(m.s<1)throw Error(bi+(m.s?"NaN":"-Infinity"));if(m.eq(Wa))return new v(0);if(t==null?($n=!1,u=x):u=t,m.eq(10))return t==null&&($n=!0),sj(v,u);if(u+=h,v.precision=u,n=ws(g),r=n.charAt(0),s=sr(m),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=ws(m.d),r=n.charAt(0),d++;s=sr(m),r>1?(m=new v("0."+n),s++):m=new v(r+"."+n.slice(1))}else return c=sj(v,u+2,x).times(s+""),m=Em(new v(r+"."+n.slice(1)),u-h).plus(c),v.precision=x,t==null?($n=!0,gn(m,x)):m;for(l=o=m=oo(m.minus(Wa),m.plus(Wa),u),f=gn(m.times(m),u),a=3;;){if(o=gn(o.times(f),u),c=l.plus(oo(o,new v(a),u)),ws(c.d).slice(0,u)===ws(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(sj(v,u+2,x).times(s+""))),l=oo(l,new v(d),u),v.precision=x,t==null?($n=!0,gn(l,x)):l;l=c,a+=2}}function eI(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=jf(n/En),e.d=[],r=(n+1)%En,n<0&&(r+=En),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=En;r<a;)e.d.push(+t.slice(r,r+=En));t=t.slice(r),r=En-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),$n&&(e.e>Ix||e.e<-Ix))throw Error(oA+n)}else e.s=0,e.e=0,e.d=[0];return e}function gn(e,t,n){var r,a,s,o,l,c,u,f,d=e.d;for(o=1,s=d[0];s>=10;s/=10)o++;if(r=t-o,r<0)r+=En,a=t,u=d[f=0];else{if(f=Math.ceil((r+1)/En),s=d.length,f>=s)return e;for(u=s=d[f],o=1;s>=10;s/=10)o++;r%=En,a=r-En+o}if(n!==void 0&&(s=Zl(10,o-a-1),l=u/s%10|0,c=t<0||d[f+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?a>0?u/Zl(10,o-a):0:d[f-1])%10&1||n==(e.s<0?8:7))),t<1||!d[0])return c?(s=sr(e),d.length=1,t=t-s-1,d[0]=Zl(10,(En-t%En)%En),e.e=jf(-t/En)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(r==0?(d.length=f,s=1,f--):(d.length=f+1,s=Zl(10,En-r),d[f]=a>0?(u/Zl(10,o-a)%Zl(10,a)|0)*s:0),c)for(;;)if(f==0){(d[0]+=s)==yr&&(d[0]=1,++e.e);break}else{if(d[f]+=s,d[f]!=yr)break;d[f--]=0,s=1}for(r=d.length;d[--r]===0;)d.pop();if($n&&(e.e>Ix||e.e<-Ix))throw Error(oA+sr(e));return e}function t8(e,t){var n,r,a,s,o,l,c,u,f,d,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),$n?gn(t,m):t;if(c=e.d,d=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(f=o<0,f?(n=c,o=-o,l=d.length):(n=d,r=u,l=c.length),a=Math.max(Math.ceil(m/En),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=d.length,f=a<l,f&&(l=a),a=0;a<l;a++)if(c[a]!=d[a]){f=c[a]<d[a];break}o=0}for(f&&(n=c,c=d,d=n,t.s=-t.s),l=c.length,a=d.length-l;a>0;--a)c[l++]=0;for(a=d.length;a>o;){if(c[--a]<d[a]){for(s=a;s&&c[--s]===0;)c[s]=yr-1;--c[s],c[a]+=yr}c[a]-=d[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,$n?gn(t,m):t):new h(0)}function Uc(e,t,n){var r,a=sr(e),s=ws(e.d),o=s.length;return t?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+qo(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+qo(-a-1)+s,n&&(r=n-o)>0&&(s+=qo(r))):a>=o?(s+=qo(a+1-o),n&&(r=n-a-1)>0&&(s=s+"."+qo(r))):((r=a+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(s+="."),s+=qo(r))),e.s<0?"-"+s:s}function tI(e,t){if(e.length>t)return e.length=t,!0}function n8(e){var t,n,r;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(bc+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return eI(o,s.toString())}else if(typeof s!="string")throw Error(bc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,Cke.test(s))eI(o,s);else throw Error(bc+s)}if(a.prototype=lt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=n8,a.config=a.set=Ake,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function Ake(e){if(!e||typeof e!="object")throw Error(bi+"Object expected");var t,n,r,a=["precision",1,wf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(jf(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(bc+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(bc+n+": "+r);return this}var lA=n8(Nke);Wa=new lA(1);const pn=lA;function Eke(e){return Ike(e)||Oke(e)||Tke(e)||Pke()}function Pke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tke(e,t){if(e){if(typeof e=="string")return Y_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y_(e,t)}}function Oke(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Ike(e){if(Array.isArray(e))return Y_(e)}function Y_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rke=function(t){return t},r8={"@@functional/placeholder":!0},a8=function(t){return t===r8},nI=function(t){return function n(){return arguments.length===0||arguments.length===1&&a8(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Mke=function e(t,n){return t===1?n:nI(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];var o=a.filter(function(l){return l!==r8}).length;return o>=t?n.apply(void 0,a):e(t-o,nI(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=a.map(function(d){return a8(d)?c.shift():d});return n.apply(void 0,Eke(f).concat(c))}))})},n0=function(t){return Mke(t.length,t)},X_=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},Dke=n0(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),$ke=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return Rke;var a=n.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},J_=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},i8=function(t){var n=null,r=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n&&s.every(function(l,c){return l===n[c]})||(n=s,r=t.apply(void 0,s)),r}};function Lke(e){var t;return e===0?t=1:t=Math.floor(new pn(e).abs().log(10).toNumber())+1,t}function Fke(e,t,n){for(var r=new pn(e),a=0,s=[];r.lt(t)&&a<1e5;)s.push(r.toNumber()),r=r.add(n),a++;return s}var Bke=n0(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),Uke=n0(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),zke=n0(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const r0={rangeStep:Fke,getDigitCount:Lke,interpolateNumber:Bke,uninterpolateNumber:Uke,uninterpolateTruncation:zke};function Q_(e){return Hke(e)||Wke(e)||s8(e)||qke()}function qke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wke(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Hke(e){if(Array.isArray(e))return Z_(e)}function Pm(e,t){return Gke(e)||Kke(e,t)||s8(e,t)||Vke()}function Vke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s8(e,t){if(e){if(typeof e=="string")return Z_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z_(e,t)}}function Z_(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kke(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,s=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,s=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw s}}return n}}function Gke(e){if(Array.isArray(e))return e}function o8(e){var t=Pm(e,2),n=t[0],r=t[1],a=n,s=r;return n>r&&(a=r,s=n),[a,s]}function l8(e,t,n){if(e.lte(0))return new pn(0);var r=r0.getDigitCount(e.toNumber()),a=new pn(10).pow(r),s=e.div(a),o=r!==1?.05:.1,l=new pn(Math.ceil(s.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new pn(Math.ceil(c))}function Yke(e,t,n){var r=1,a=new pn(e);if(!a.isint()&&n){var s=Math.abs(e);s<1?(r=new pn(10).pow(r0.getDigitCount(e)-1),a=new pn(Math.floor(a.div(r).toNumber())).mul(r)):s>1&&(a=new pn(Math.floor(e)))}else e===0?a=new pn(Math.floor((t-1)/2)):n||(a=new pn(Math.floor(e)));var o=Math.floor((t-1)/2),l=$ke(Dke(function(c){return a.add(new pn(c-o).mul(r)).toNumber()}),X_);return l(0,t)}function c8(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new pn(0),tickMin:new pn(0),tickMax:new pn(0)};var s=l8(new pn(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new pn(0):(o=new pn(e).add(t).div(2),o=o.sub(new pn(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new pn(t).sub(o).div(s).toNumber()),u=l+c+1;return u>n?c8(e,t,n,r,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:s,tickMin:o.sub(new pn(l).mul(s)),tickMax:o.add(new pn(c).mul(s))})}function Xke(e){var t=Pm(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=o8([n,r]),c=Pm(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(Q_(X_(0,a-1).map(function(){return 1/0}))):[].concat(Q_(X_(0,a-1).map(function(){return-1/0})),[f]);return n>r?J_(d):d}if(u===f)return Yke(u,a,s);var h=c8(u,f,o,s),m=h.step,g=h.tickMin,v=h.tickMax,x=r0.rangeStep(g,v.add(new pn(.1).mul(m)),m);return n>r?J_(x):x}function Jke(e,t){var n=Pm(e,2),r=n[0],a=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=o8([r,a]),l=Pm(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,a];if(c===u)return[c];var f=Math.max(t,2),d=l8(new pn(u).sub(c).div(f-1),s,0),h=[].concat(Q_(r0.rangeStep(new pn(c),new pn(u).sub(new pn(.99).mul(d)),d)),[u]);return r>a?J_(h):h}var Qke=i8(Xke),Zke=i8(Jke),eSe="Invariant failed";function zc(e,t){throw new Error(eSe)}var tSe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Fd(e){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fd(e)}function Rx(){return Rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rx.apply(this,arguments)}function nSe(e,t){return sSe(e)||iSe(e,t)||aSe(e,t)||rSe()}function rSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aSe(e,t){if(e){if(typeof e=="string")return rI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rI(e,t)}}function rI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iSe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function sSe(e){if(Array.isArray(e))return e}function oSe(e,t){if(e==null)return{};var n=lSe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function lSe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function cSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uSe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f8(r.key),r)}}function dSe(e,t,n){return t&&uSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fSe(e,t,n){return t=Mx(t),hSe(e,u8()?Reflect.construct(t,n||[],Mx(e).constructor):t.apply(e,n))}function hSe(e,t){if(t&&(Fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mSe(e)}function mSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u8=function(){return!!e})()}function Mx(e){return Mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mx(e)}function pSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ek(e,t)}function ek(e,t){return ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ek(e,t)}function d8(e,t,n){return t=f8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f8(e){var t=gSe(e,"string");return Fd(t)=="symbol"?t:t+""}function gSe(e,t){if(Fd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Fd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a0=function(e){function t(){return cSe(this,t),fSe(this,t,arguments)}return pSe(t,e),dSe(t,[{key:"render",value:function(){var r=this.props,a=r.offset,s=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,f=r.xAxis,d=r.yAxis,h=oSe(r,tSe),m=rn(h,!1);this.props.direction==="x"&&f.type!=="number"&&zc();var g=c.map(function(v){var x=u(v,l),y=x.x,b=x.y,w=x.value,k=x.errorVal;if(!k)return null;var _=[],j,S;if(Array.isArray(k)){var A=nSe(k,2);j=A[0],S=A[1]}else j=S=k;if(s==="vertical"){var C=f.scale,T=b+a,M=T+o,F=T-o,E=C(w-j),I=C(w+S);_.push({x1:I,y1:M,x2:I,y2:F}),_.push({x1:E,y1:T,x2:I,y2:T}),_.push({x1:E,y1:M,x2:E,y2:F})}else if(s==="horizontal"){var P=d.scale,B=y+a,O=B-o,$=B+o,L=P(w-j),N=P(w+S);_.push({x1:O,y1:N,x2:$,y2:N}),_.push({x1:B,y1:L,x2:B,y2:N}),_.push({x1:O,y1:L,x2:$,y2:L})}return X.createElement(wr,Rx({className:"recharts-errorBar",key:"bar-".concat(_.map(function(U){return"".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))},m),_.map(function(U){return X.createElement("line",Rx({},U,{key:"line-".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))}))});return X.createElement(wr,{className:"recharts-errorBars"},g)}}])}(X.Component);d8(a0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});d8(a0,"displayName","ErrorBar");function Tm(e){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tm(e)}function aI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aI(Object(n),!0).forEach(function(r){vSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vSe(e,t,n){return t=xSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xSe(e){var t=ySe(e,"string");return Tm(t)=="symbol"?t:t+""}function ySe(e,t){if(Tm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Tm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h8=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,s=t.legendContent,o=Ua(n,ui);if(!o)return null;var l=ui.defaultProps,c=l!==void 0?Wl(Wl({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(r||[]).reduce(function(f,d){var h=d.item,m=d.props,g=m.sectors||m.data||[];return f.concat(g.map(function(v){return{type:o.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(r||[]).map(function(f){var d=f.item,h=d.type.defaultProps,m=h!==void 0?Wl(Wl({},h),d.props):{},g=m.dataKey,v=m.name,x=m.legendType,y=m.hide;return{inactive:y,dataKey:g,type:c.iconType||x||"square",color:cA(d),value:v||g,payload:m}}),Wl(Wl(Wl({},c),ui.getWithHeight(o,a)),{},{payload:u,item:o})};function Om(e){"@babel/helpers - typeof";return Om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Om(e)}function iI(e){return _Se(e)||jSe(e)||wSe(e)||bSe()}function bSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wSe(e,t){if(e){if(typeof e=="string")return tk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tk(e,t)}}function jSe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _Se(e){if(Array.isArray(e))return tk(e)}function tk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sI(Object(n),!0).forEach(function(r){od(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function od(e,t,n){return t=kSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kSe(e){var t=SSe(e,"string");return Om(t)=="symbol"?t:t+""}function SSe(e,t){if(Om(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Os(e,t,n){return an(e)||an(t)?n:mr(t)?vi(e,t,n):Mt(t)?t(e):n}function Ah(e,t,n,r){var a=jke(e,function(l){return Os(l,t)});if(n==="number"){var s=a.filter(function(l){return Ve(l)||parseFloat(l)});return s.length?[t0(s),e0(s)]:[1/0,-1/0]}var o=r?a.filter(function(l){return!an(l)}):a;return o.map(function(l){return mr(l)||l instanceof Date?l:""})}var NSe=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var f=u>0?a[u-1].coordinate:a[l-1].coordinate,d=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(Hi(d-f)!==Hi(h-d)){var g=[];if(Hi(h-d)===Hi(c[1]-c[0])){m=h;var v=d+c[1]-c[0];g[0]=Math.min(v,(v+f)/2),g[1]=Math.max(v,(v+f)/2)}else{m=f;var x=h+c[1]-c[0];g[0]=Math.min(d,(x+d)/2),g[1]=Math.max(d,(x+d)/2)}var y=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(t>y[0]&&t<=y[1]||t>=g[0]&&t<=g[1]){o=a[u].index;break}}else{var b=Math.min(f,h),w=Math.max(f,h);if(t>(b+d)/2&&t<=(w+d)/2){o=a[u].index;break}}}else for(var k=0;k<l;k++)if(k===0&&t<=(r[k].coordinate+r[k+1].coordinate)/2||k>0&&k<l-1&&t>(r[k].coordinate+r[k-1].coordinate)/2&&t<=(r[k].coordinate+r[k+1].coordinate)/2||k===l-1&&t>(r[k].coordinate+r[k-1].coordinate)/2){o=r[k].index;break}return o},cA=function(t){var n,r=t,a=r.type.displayName,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Hn(Hn({},t.type.defaultProps),t.props):t.props,o=s.stroke,l=s.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},CSe=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var f=s[l[c]].stackGroups,d=Object.keys(f),h=0,m=d.length;h<m;h++){var g=f[d[h]],v=g.items,x=g.cateAxisId,y=v.filter(function(S){return io(S.type).indexOf("Bar")>=0});if(y&&y.length){var b=y[0].type.defaultProps,w=b!==void 0?Hn(Hn({},b),y[0].props):y[0].props,k=w.barSize,_=w[x];o[_]||(o[_]=[]);var j=an(k)?n:k;o[_].push({item:y[0],stackList:y.slice(1),barSize:an(j)?void 0:Bc(j,r,0)})}}return o},ASe=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,s=t.sizeList,o=s===void 0?[]:s,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Bc(n,a,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,g=o.reduce(function(k,_){return k+_.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&m>0&&(h=!0,m*=.9,g=c*m);var v=(a-g)/2>>0,x={offset:v-u,size:0};f=o.reduce(function(k,_){var j={item:_.item,position:{offset:x.offset+x.size+u,size:h?m:_.barSize}},S=[].concat(iI(k),[j]);return x=S[S.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(A){S.push({item:A,position:x})}),S},d)}else{var y=Bc(r,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var b=(a-2*y-(c-1)*u)/c;b>1&&(b>>=0);var w=l===+l?Math.min(b,l):b;f=o.reduce(function(k,_,j){var S=[].concat(iI(k),[{item:_.item,position:{offset:y+(b+u)*j+(b-w)/2,size:w}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(A){S.push({item:A,position:S[S.length-1].position})}),S},d)}return f},ESe=function(t,n,r,a){var s=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=h8({children:s,legendWidth:c});if(u){var f=a||{},d=f.width,h=f.height,m=u.align,g=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&g==="middle")&&m!=="center"&&Ve(t[m]))return Hn(Hn({},t),{},od({},m,t[m]+(d||0)));if((v==="horizontal"||v==="vertical"&&m==="center")&&g!=="middle"&&Ve(t[g]))return Hn(Hn({},t),{},od({},g,t[g]+(h||0)))}return t},PSe=function(t,n,r){return an(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},m8=function(t,n,r,a,s){var o=n.props.children,l=Yi(o,a0).filter(function(u){return PSe(a,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=Os(f,r);if(an(d))return u;var h=Array.isArray(d)?[t0(d),e0(d)]:[d,d],m=c.reduce(function(g,v){var x=Os(f,v,0),y=h[0]-Math.abs(Array.isArray(x)?x[0]:x),b=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(y,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},TSe=function(t,n,r,a,s){var o=n.map(function(l){return m8(t,l,r,s,a)}).filter(function(l){return!an(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},p8=function(t,n,r,a,s){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&m8(t,c,u,a)||Ah(t,u,r,s)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},g8=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},v8=function(t,n,r,a){if(a)return t.map(function(c){return c.coordinate});var s,o,l=t.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(o=!0),c.coordinate});return s||l.push(n),o||l.push(r),l},eo=function(t,n,r){if(!t)return null;var a=t.scale,s=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Hi(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var h=s?s.indexOf(d):d;return{coordinate:a(h)+u,value:d,offset:u}});return f.filter(function(d){return!Dp(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,h){return{coordinate:a(d)+u,value:d,index:h,offset:u}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,h){return{coordinate:a(d)+u,value:s?s[d]:d,index:h,offset:u}})},oj=new WeakMap,Ig=function(t,n){if(typeof n!="function")return t;oj.has(t)||oj.set(t,new WeakMap);var r=oj.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},OSe=function(t,n,r){var a=t.scale,s=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:km(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Ex(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Ch(),realScaleType:"point"}:s==="category"?{scale:km(),realScaleType:"band"}:{scale:Ex(),realScaleType:"linear"};if(Fc(a)){var c="scale".concat(Ub(a));return{scale:(ZO[c]||Ch)(),realScaleType:ZO[c]?c:"point"}}return Mt(a)?{scale:a}:{scale:Ch(),realScaleType:"point"}},oI=1e-4,ISe=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),s=Math.min(a[0],a[1])-oI,o=Math.max(a[0],a[1])+oI,l=t(n[0]),c=t(n[r-1]);(l<s||l>o||c<s||c>o)&&t.domain([n[0],n[r-1]])}},RSe=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},MSe=function(t,n){if(!n||n.length!==2||!Ve(n[0])||!Ve(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),s=[t[0],t[1]];return(!Ve(t[0])||t[0]<r)&&(s[0]=r),(!Ve(t[1])||t[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<r&&(s[1]=r),s},DSe=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0,l=0;l<n;++l){var c=Dp(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=s,t[l][r][1]=s+c,s=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},$Se=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var s=0,o=0;o<n;++o){var l=Dp(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=s,t[o][r][1]=s+l,s=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},LSe={sign:DSe,expand:Zhe,none:Td,silhouette:eme,wiggle:tme,positive:$Se},FSe=function(t,n,r){var a=n.map(function(l){return l.props.dataKey}),s=LSe[r],o=Qhe().keys(a).value(function(l,c){return+Os(l,c,0)}).order(N_).offset(s);return o(t)},BSe=function(t,n,r,a,s,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(d,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Hn(Hn({},h.type.defaultProps),h.props):h.props,v=g.stackId,x=g.hide;if(x)return d;var y=g[r],b=d[y]||{hasStack:!1,stackGroups:{}};if(mr(v)){var w=b.stackGroups[v]||{numericAxisId:r,cateAxisId:a,items:[]};w.items.push(h),b.hasStack=!0,b.stackGroups[v]=w}else b.stackGroups[Bb("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[h]};return Hn(Hn({},d),{},od({},y,b))},c),f={};return Object.keys(u).reduce(function(d,h){var m=u[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(v,x){var y=m.stackGroups[x];return Hn(Hn({},v),{},od({},x,{numericAxisId:r,cateAxisId:a,items:y.items,stackedData:FSe(t,y.items,s)}))},g)}return Hn(Hn({},d),{},od({},h,m))},f)},USe=function(t,n){var r=n.realScaleType,a=n.type,s=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=Qke(u,s,l);return t.domain([t0(f),e0(f)]),{niceTicks:f}}if(s&&a==="number"){var d=t.domain(),h=Zke(d,s,l);return{niceTicks:h}}return null},lI=function(t){var n=t.axis,r=t.ticks,a=t.offset,s=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+a:null;var c=Os(o,n.dataKey,n.domain[l]);return an(c)?null:n.scale(c)-s/2+a},zSe=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return a<=0&&s>=0?0:s<0?s:a}return r[0]},qSe=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Hn(Hn({},t.type.defaultProps),t.props):t.props,s=a.stackId;if(mr(s)){var o=n[s];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},WSe=function(t){return t.reduce(function(n,r){return[t0(r.concat([n[0]]).filter(Ve)),e0(r.concat([n[1]]).filter(Ve))]},[1/0,-1/0])},x8=function(t,n,r){return Object.keys(t).reduce(function(a,s){var o=t[s],l=o.stackedData,c=l.reduce(function(u,f){var d=WSe(f.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},cI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nk=function(t,n,r){if(Mt(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(Ve(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(cI.test(t[0])){var s=+cI.exec(t[0])[1];a[0]=n[0]-s}else Mt(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(Ve(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(uI.test(t[1])){var o=+uI.exec(t[1])[1];a[1]=n[1]+o}else Mt(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},Dx=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var s=DC(n,function(d){return d.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],f=s[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},dI=function(t,n,r){return!t||!t.length||sA(t,vi(r,"type.defaultProps.domain"))?n:t},y8=function(t,n){var r=t.type.defaultProps?Hn(Hn({},t.type.defaultProps),t.props):t.props,a=r.dataKey,s=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,f=r.hide;return Hn(Hn({},rn(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:s||a,color:cA(t),value:Os(n,a),type:c,payload:n,chartType:u,hide:f})};function Im(e){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(e)}function fI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fI(Object(n),!0).forEach(function(r){HSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function HSe(e,t,n){return t=VSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VSe(e){var t=KSe(e,"string");return Im(t)=="symbol"?t:t+""}function KSe(e,t){if(Im(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $x=Math.PI/180,GSe=function(t){return t*180/Math.PI},Tr=function(t,n,r,a){return{x:t+Math.cos(-$x*a)*r,y:n+Math.sin(-$x*a)*r}},YSe=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(a-o,2))},XSe=function(t,n){var r=t.x,a=t.y,s=n.cx,o=n.cy,l=YSe({x:r,y:a},{x:s,y:o});if(l<=0)return{radius:l};var c=(r-s)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:GSe(u),angleInRadian:u}},JSe=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(a,s);return{startAngle:n-o*360,endAngle:r-o*360}},QSe=function(t,n){var r=n.startAngle,a=n.endAngle,s=Math.floor(r/360),o=Math.floor(a/360),l=Math.min(s,o);return t+l*360},mI=function(t,n){var r=t.x,a=t.y,s=XSe({x:r,y:a},n),o=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=JSe(n),d=f.startAngle,h=f.endAngle,m=l,g;if(d<=h){for(;m>h;)m-=360;for(;m<d;)m+=360;g=m>=d&&m<=h}else{for(;m>d;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=d}return g?hI(hI({},n),{},{radius:o,angle:QSe(m,n)}):null};function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}var ZSe=["offset"];function eNe(e){return aNe(e)||rNe(e)||nNe(e)||tNe()}function tNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nNe(e,t){if(e){if(typeof e=="string")return rk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rk(e,t)}}function rNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function aNe(e){if(Array.isArray(e))return rk(e)}function rk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iNe(e,t){if(e==null)return{};var n=sNe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function sNe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function pI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pI(Object(n),!0).forEach(function(r){oNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oNe(e,t,n){return t=lNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lNe(e){var t=cNe(e,"string");return Rm(t)=="symbol"?t:t+""}function cNe(e,t){if(Rm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mm(){return Mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mm.apply(this,arguments)}var uNe=function(t){var n=t.value,r=t.formatter,a=an(t.children)?n:t.children;return Mt(r)?r(a):a},dNe=function(t,n){var r=Hi(n-t),a=Math.min(Math.abs(n-t),360);return r*a},fNe=function(t,n,r){var a=t.position,s=t.viewBox,o=t.offset,l=t.className,c=s,u=c.cx,f=c.cy,d=c.innerRadius,h=c.outerRadius,m=c.startAngle,g=c.endAngle,v=c.clockWise,x=(d+h)/2,y=dNe(m,g),b=y>=0?1:-1,w,k;a==="insideStart"?(w=m+b*o,k=v):a==="insideEnd"?(w=g-b*o,k=!v):a==="end"&&(w=g+b*o,k=v),k=y<=0?k:!k;var _=Tr(u,f,x,w),j=Tr(u,f,x,w+(k?1:-1)*359),S="M".concat(_.x,",").concat(_.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(k?0:1,`,
    `).concat(j.x,",").concat(j.y),A=an(t.id)?Bb("recharts-radial-line-"):t.id;return X.createElement("text",Mm({},r,{dominantBaseline:"central",className:Zt("recharts-radial-bar-label",l)}),X.createElement("defs",null,X.createElement("path",{id:A,d:S})),X.createElement("textPath",{xlinkHref:"#".concat(A)},n))},hNe=function(t){var n=t.viewBox,r=t.offset,a=t.position,s=n,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,f=s.startAngle,d=s.endAngle,h=(f+d)/2;if(a==="outside"){var m=Tr(o,l,u+r,h),g=m.x,v=m.y;return{x:g,y:v,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,y=Tr(o,l,x,h),b=y.x,w=y.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},mNe=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,s=t.position,o=n,l=o.x,c=o.y,u=o.width,f=o.height,d=f>=0?1:-1,h=d*a,m=d>0?"end":"start",g=d>0?"start":"end",v=u>=0?1:-1,x=v*a,y=v>0?"end":"start",b=v>0?"start":"end";if(s==="top"){var w={x:l+u/2,y:c-d*a,textAnchor:"middle",verticalAnchor:m};return cr(cr({},w),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var k={x:l+u/2,y:c+f+h,textAnchor:"middle",verticalAnchor:g};return cr(cr({},k),r?{height:Math.max(r.y+r.height-(c+f),0),width:u}:{})}if(s==="left"){var _={x:l-x,y:c+f/2,textAnchor:y,verticalAnchor:"middle"};return cr(cr({},_),r?{width:Math.max(_.x-r.x,0),height:f}:{})}if(s==="right"){var j={x:l+u+x,y:c+f/2,textAnchor:b,verticalAnchor:"middle"};return cr(cr({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:f}:{})}var S=r?{width:u,height:f}:{};return s==="insideLeft"?cr({x:l+x,y:c+f/2,textAnchor:b,verticalAnchor:"middle"},S):s==="insideRight"?cr({x:l+u-x,y:c+f/2,textAnchor:y,verticalAnchor:"middle"},S):s==="insideTop"?cr({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},S):s==="insideBottom"?cr({x:l+u/2,y:c+f-h,textAnchor:"middle",verticalAnchor:m},S):s==="insideTopLeft"?cr({x:l+x,y:c+h,textAnchor:b,verticalAnchor:g},S):s==="insideTopRight"?cr({x:l+u-x,y:c+h,textAnchor:y,verticalAnchor:g},S):s==="insideBottomLeft"?cr({x:l+x,y:c+f-h,textAnchor:b,verticalAnchor:m},S):s==="insideBottomRight"?cr({x:l+u-x,y:c+f-h,textAnchor:y,verticalAnchor:m},S):hf(s)&&(Ve(s.x)||oc(s.x))&&(Ve(s.y)||oc(s.y))?cr({x:l+Bc(s.x,u),y:c+Bc(s.y,f),textAnchor:"end",verticalAnchor:"end"},S):cr({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},S)},pNe=function(t){return"cx"in t&&Ve(t.cx)};function Wr(e){var t=e.offset,n=t===void 0?5:t,r=iNe(e,ZSe),a=cr({offset:n},r),s=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,f=a.className,d=f===void 0?"":f,h=a.textBreakAll;if(!s||an(l)&&an(c)&&!p.isValidElement(u)&&!Mt(u))return null;if(p.isValidElement(u))return p.cloneElement(u,a);var m;if(Mt(u)){if(m=p.createElement(u,a),p.isValidElement(m))return m}else m=uNe(a);var g=pNe(s),v=rn(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return fNe(a,m,v);var x=g?hNe(a):mNe(a);return X.createElement(jx,Mm({className:Zt("recharts-label",d)},v,x,{breakAll:h}),m)}Wr.displayName="Label";var b8=function(t){var n=t.cx,r=t.cy,a=t.angle,s=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,h=t.y,m=t.top,g=t.left,v=t.width,x=t.height,y=t.clockWise,b=t.labelViewBox;if(b)return b;if(Ve(v)&&Ve(x)){if(Ve(d)&&Ve(h))return{x:d,y:h,width:v,height:x};if(Ve(m)&&Ve(g))return{x:m,y:g,width:v,height:x}}return Ve(d)&&Ve(h)?{x:d,y:h,width:0,height:0}:Ve(n)&&Ve(r)?{cx:n,cy:r,startAngle:s||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},gNe=function(t,n){return t?t===!0?X.createElement(Wr,{key:"label-implicit",viewBox:n}):mr(t)?X.createElement(Wr,{key:"label-implicit",viewBox:n,value:t}):p.isValidElement(t)?t.type===Wr?p.cloneElement(t,{key:"label-implicit",viewBox:n}):X.createElement(Wr,{key:"label-implicit",content:t,viewBox:n}):Mt(t)?X.createElement(Wr,{key:"label-implicit",content:t,viewBox:n}):hf(t)?X.createElement(Wr,Mm({viewBox:n},t,{key:"label-implicit"})):null:null},vNe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,s=b8(t),o=Yi(a,Wr).map(function(c,u){return p.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return o;var l=gNe(t.label,n||s);return[l].concat(eNe(o))};Wr.parseViewBox=b8;Wr.renderCallByParent=vNe;function xNe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var yNe=xNe;const bNe=un(yNe);function Dm(e){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dm(e)}var wNe=["valueAccessor"],jNe=["data","dataKey","clockWise","id","textBreakAll"];function _Ne(e){return CNe(e)||NNe(e)||SNe(e)||kNe()}function kNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SNe(e,t){if(e){if(typeof e=="string")return ak(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ak(e,t)}}function NNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function CNe(e){if(Array.isArray(e))return ak(e)}function ak(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lx(){return Lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lx.apply(this,arguments)}function gI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gI(Object(n),!0).forEach(function(r){ANe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ANe(e,t,n){return t=ENe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ENe(e){var t=PNe(e,"string");return Dm(t)=="symbol"?t:t+""}function PNe(e,t){if(Dm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xI(e,t){if(e==null)return{};var n=TNe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function TNe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var ONe=function(t){return Array.isArray(t.value)?bNe(t.value):t.value};function Vi(e){var t=e.valueAccessor,n=t===void 0?ONe:t,r=xI(e,wNe),a=r.data,s=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=xI(r,jNe);return!a||!a.length?null:X.createElement(wr,{className:"recharts-label-list"},a.map(function(f,d){var h=an(s)?n(f,d):Os(f&&f.payload,s),m=an(l)?{}:{id:"".concat(l,"-").concat(d)};return X.createElement(Wr,Lx({},rn(f,!0),u,m,{parentViewBox:f.parentViewBox,value:h,textBreakAll:c,viewBox:Wr.parseViewBox(an(o)?f:vI(vI({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}Vi.displayName="LabelList";function INe(e,t){return e?e===!0?X.createElement(Vi,{key:"labelList-implicit",data:t}):X.isValidElement(e)||Mt(e)?X.createElement(Vi,{key:"labelList-implicit",data:t,content:e}):hf(e)?X.createElement(Vi,Lx({data:t},e,{key:"labelList-implicit"})):null:null}function RNe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=Yi(r,Vi).map(function(o,l){return p.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var s=INe(e.label,t);return[s].concat(_Ne(a))}Vi.renderCallByParent=RNe;function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}function ik(){return ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ik.apply(this,arguments)}function yI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function bI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yI(Object(n),!0).forEach(function(r){MNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MNe(e,t,n){return t=DNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DNe(e){var t=$Ne(e,"string");return $m(t)=="symbol"?t:t+""}function $Ne(e,t){if($m(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LNe=function(t,n){var r=Hi(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},Rg=function(t){var n=t.cx,r=t.cy,a=t.radius,s=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(l?1:-1)+a,d=Math.asin(c/f)/$x,h=u?s:s+o*d,m=Tr(n,r,f,h),g=Tr(n,r,a,h),v=u?s-o*d:s,x=Tr(n,r,f*Math.cos(d*$x),v);return{center:m,circleTangency:g,lineTangency:x,theta:d}},w8=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.startAngle,l=t.endAngle,c=LNe(o,l),u=o+c,f=Tr(n,r,s,o),d=Tr(n,r,s,u),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var m=Tr(n,r,a,o),g=Tr(n,r,a,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},FNe=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Hi(f-u),h=Rg({cx:n,cy:r,radius:s,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,g=h.lineTangency,v=h.theta,x=Rg({cx:n,cy:r,radius:s,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:c}),y=x.circleTangency,b=x.lineTangency,w=x.theta,k=c?Math.abs(u-f):Math.abs(u-f)-v-w;if(k<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):w8({cx:n,cy:r,innerRadius:a,outerRadius:s,startAngle:u,endAngle:f});var _="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(k>180),",").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var j=Rg({cx:n,cy:r,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=j.circleTangency,A=j.lineTangency,C=j.theta,T=Rg({cx:n,cy:r,radius:a,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),M=T.circleTangency,F=T.lineTangency,E=T.theta,I=c?Math.abs(u-f):Math.abs(u-f)-C-E;if(I<0&&o===0)return"".concat(_,"L").concat(n,",").concat(r,"Z");_+="L".concat(F.x,",").concat(F.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(I>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,"Z")}else _+="L".concat(n,",").concat(r,"Z");return _},BNe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},j8=function(t){var n=bI(bI({},BNe),t),r=n.cx,a=n.cy,s=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,f=n.startAngle,d=n.endAngle,h=n.className;if(o<s||f===d)return null;var m=Zt("recharts-sector",h),g=o-s,v=Bc(l,g,0,!0),x;return v>0&&Math.abs(f-d)<360?x=FNe({cx:r,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(v,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):x=w8({cx:r,cy:a,innerRadius:s,outerRadius:o,startAngle:f,endAngle:d}),X.createElement("path",ik({},rn(n,!0),{className:m,d:x,role:"img"}))};function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}function sk(){return sk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sk.apply(this,arguments)}function wI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function jI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wI(Object(n),!0).forEach(function(r){UNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UNe(e,t,n){return t=zNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zNe(e){var t=qNe(e,"string");return Lm(t)=="symbol"?t:t+""}function qNe(e,t){if(Lm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _I={curveBasisClosed:Uhe,curveBasisOpen:zhe,curveBasis:Bhe,curveBumpX:Nhe,curveBumpY:Che,curveLinearClosed:qhe,curveLinear:qb,curveMonotoneX:Whe,curveMonotoneY:Hhe,curveNatural:Vhe,curveStep:Khe,curveStepAfter:Yhe,curveStepBefore:Ghe},Mg=function(t){return t.x===+t.x&&t.y===+t.y},Xf=function(t){return t.x},Jf=function(t){return t.y},WNe=function(t,n){if(Mt(t))return t;var r="curve".concat(Ub(t));return(r==="curveMonotone"||r==="curveBump")&&n?_I["".concat(r).concat(n==="vertical"?"Y":"X")]:_I[r]||qb},HNe=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,s=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=WNe(r,l),d=u?s.filter(function(v){return Mg(v)}):s,h;if(Array.isArray(o)){var m=u?o.filter(function(v){return Mg(v)}):o,g=d.map(function(v,x){return jI(jI({},v),{},{base:m[x]})});return l==="vertical"?h=Sg().y(Jf).x1(Xf).x0(function(v){return v.base.x}):h=Sg().x(Xf).y1(Jf).y0(function(v){return v.base.y}),h.defined(Mg).curve(f),h(g)}return l==="vertical"&&Ve(o)?h=Sg().y(Jf).x1(Xf).x0(o):Ve(o)?h=Sg().x(Xf).y1(Jf).y0(o):h=jz().x(Xf).y(Jf),h.defined(Mg).curve(f),h(d)},kI=function(t){var n=t.className,r=t.points,a=t.path,s=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?HNe(t):a;return p.createElement("path",sk({},rn(t,!1),ox(t),{className:Zt("recharts-curve",n),d:o,ref:s}))},_8={exports:{}},VNe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",KNe=VNe,GNe=KNe;function k8(){}function S8(){}S8.resetWarningCache=k8;var YNe=function(){function e(r,a,s,o,l,c){if(c!==GNe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:S8,resetWarningCache:k8};return n.PropTypes=n,n};_8.exports=YNe();var XNe=_8.exports;const sn=un(XNe);var JNe=Object.getOwnPropertyNames,QNe=Object.getOwnPropertySymbols,ZNe=Object.prototype.hasOwnProperty;function SI(e,t){return function(r,a,s){return e(r,a,s)&&t(r,a,s)}}function Dg(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var s=a.cache,o=s.get(n),l=s.get(r);if(o&&l)return o===r&&l===n;s.set(n,r),s.set(r,n);var c=e(n,r,a);return s.delete(n),s.delete(r),c}}function NI(e){return JNe(e).concat(QNe(e))}var eCe=Object.hasOwn||function(e,t){return ZNe.call(e,t)};function ru(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var tCe="__v",nCe="__o",rCe="_owner",CI=Object.getOwnPropertyDescriptor,AI=Object.keys;function aCe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function iCe(e,t){return ru(e.getTime(),t.getTime())}function sCe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function oCe(e,t){return e===t}function EI(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=t.entries(),f=!1,d=0;(l=u.next())&&!l.done;){if(a[d]){d++;continue}var h=o.value,m=l.value;if(n.equals(h[0],m[0],c,d,e,t,n)&&n.equals(h[1],m[1],h[0],m[0],e,t,n)){f=a[d]=!0;break}d++}if(!f)return!1;c++}return!0}var lCe=ru;function cCe(e,t,n){var r=AI(e),a=r.length;if(AI(t).length!==a)return!1;for(;a-- >0;)if(!N8(e,t,n,r[a]))return!1;return!0}function Qf(e,t,n){var r=NI(e),a=r.length;if(NI(t).length!==a)return!1;for(var s,o,l;a-- >0;)if(s=r[a],!N8(e,t,n,s)||(o=CI(e,s),l=CI(t,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function uCe(e,t){return ru(e.valueOf(),t.valueOf())}function dCe(e,t){return e.source===t.source&&e.flags===t.flags}function PI(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),s=e.values(),o,l;(o=s.next())&&!o.done;){for(var c=t.values(),u=!1,f=0;(l=c.next())&&!l.done;){if(!a[f]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[f]=!0;break}f++}if(!u)return!1}return!0}function fCe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function hCe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function N8(e,t,n,r){return(r===rCe||r===nCe||r===tCe)&&(e.$$typeof||t.$$typeof)?!0:eCe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var mCe="[object Arguments]",pCe="[object Boolean]",gCe="[object Date]",vCe="[object Error]",xCe="[object Map]",yCe="[object Number]",bCe="[object Object]",wCe="[object RegExp]",jCe="[object Set]",_Ce="[object String]",kCe="[object URL]",SCe=Array.isArray,TI=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,OI=Object.assign,NCe=Object.prototype.toString.call.bind(Object.prototype.toString);function CCe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,s=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,f=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,v,x){if(g===v)return!0;if(g==null||v==null)return!1;var y=typeof g;if(y!==typeof v)return!1;if(y!=="object")return y==="number"?o(g,v,x):y==="function"?a(g,v,x):!1;var b=g.constructor;if(b!==v.constructor)return!1;if(b===Object)return l(g,v,x);if(SCe(g))return t(g,v,x);if(TI!=null&&TI(g))return d(g,v,x);if(b===Date)return n(g,v,x);if(b===RegExp)return u(g,v,x);if(b===Map)return s(g,v,x);if(b===Set)return f(g,v,x);var w=NCe(g);return w===gCe?n(g,v,x):w===wCe?u(g,v,x):w===xCe?s(g,v,x):w===jCe?f(g,v,x):w===bCe?typeof g.then!="function"&&typeof v.then!="function"&&l(g,v,x):w===kCe?h(g,v,x):w===vCe?r(g,v,x):w===mCe?l(g,v,x):w===pCe||w===yCe||w===_Ce?c(g,v,x):!1}}function ACe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?Qf:aCe,areDatesEqual:iCe,areErrorsEqual:sCe,areFunctionsEqual:oCe,areMapsEqual:r?SI(EI,Qf):EI,areNumbersEqual:lCe,areObjectsEqual:r?Qf:cCe,arePrimitiveWrappersEqual:uCe,areRegExpsEqual:dCe,areSetsEqual:r?SI(PI,Qf):PI,areTypedArraysEqual:r?Qf:fCe,areUrlsEqual:hCe};if(n&&(a=OI({},a,n(a))),t){var s=Dg(a.areArraysEqual),o=Dg(a.areMapsEqual),l=Dg(a.areObjectsEqual),c=Dg(a.areSetsEqual);a=OI({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function ECe(e){return function(t,n,r,a,s,o,l){return e(t,n,l)}}function PCe(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,s=e.strict;if(r)return function(c,u){var f=r(),d=f.cache,h=d===void 0?t?new WeakMap:void 0:d,m=f.meta;return n(c,u,{cache:h,equals:a,meta:m,strict:s})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(c,u){return n(c,u,o)}}var TCe=Bl();Bl({strict:!0});Bl({circular:!0});Bl({circular:!0,strict:!0});Bl({createInternalComparator:function(){return ru}});Bl({strict:!0,createInternalComparator:function(){return ru}});Bl({circular:!0,createInternalComparator:function(){return ru}});Bl({circular:!0,createInternalComparator:function(){return ru},strict:!0});function Bl(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,s=e.strict,o=s===void 0?!1:s,l=ACe(e),c=CCe(l),u=r?r(c):ECe(c);return PCe({circular:n,comparator:c,createState:a,equals:u,strict:o})}function OCe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function II(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(s){n<0&&(n=s),s-n>t?(e(s),n=-1):OCe(a)};requestAnimationFrame(r)}function ok(e){"@babel/helpers - typeof";return ok=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ok(e)}function ICe(e){return $Ce(e)||DCe(e)||MCe(e)||RCe()}function RCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MCe(e,t){if(e){if(typeof e=="string")return RI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RI(e,t)}}function RI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function DCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $Ce(e){if(Array.isArray(e))return e}function LCe(){var e={},t=function(){return null},n=!1,r=function a(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,l=ICe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){II(a.bind(null,u),c);return}a(c),II(a.bind(null,u));return}ok(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}function MI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function DI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MI(Object(n),!0).forEach(function(r){C8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function C8(e,t,n){return t=FCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FCe(e){var t=BCe(e,"string");return Fm(t)==="symbol"?t:String(t)}function BCe(e,t){if(Fm(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Fm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UCe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(s){return a.includes(s)})})},zCe=function(t){return t},qCe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Eh=function(t,n){return Object.keys(n).reduce(function(r,a){return DI(DI({},r),{},C8({},a,t(a,n[a])))},{})},$I=function(t,n,r){return t.map(function(a){return"".concat(qCe(a)," ").concat(n,"ms ").concat(r)}).join(",")};function WCe(e,t){return KCe(e)||VCe(e,t)||A8(e,t)||HCe()}function HCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function KCe(e){if(Array.isArray(e))return e}function GCe(e){return JCe(e)||XCe(e)||A8(e)||YCe()}function YCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A8(e,t){if(e){if(typeof e=="string")return lk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lk(e,t)}}function XCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function JCe(e){if(Array.isArray(e))return lk(e)}function lk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fx=1e-4,E8=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},P8=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},LI=function(t,n){return function(r){var a=E8(t,n);return P8(a,r)}},QCe=function(t,n){return function(r){var a=E8(t,n),s=[].concat(GCe(a.map(function(o,l){return o*l}).slice(1)),[0]);return P8(s,r)}},FI=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],s=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,s=0,o=1,l=1;break;case"ease":a=.25,s=.1,o=.25,l=1;break;case"ease-in":a=.42,s=0,o=1,l=1;break;case"ease-out":a=.42,s=0,o=.58,l=1;break;case"ease-in-out":a=0,s=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=WCe(u,4);a=f[0],s=f[1],o=f[2],l=f[3]}}}var d=LI(a,o),h=LI(s,l),m=QCe(a,o),g=function(y){return y>1?1:y<0?0:y},v=function(y){for(var b=y>1?1:y,w=b,k=0;k<8;++k){var _=d(w)-b,j=m(w);if(Math.abs(_-b)<Fx||j<Fx)return h(w);w=g(w-_/j)}return h(w)};return v.isStepper=!1,v},ZCe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,s=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(f,d,h){var m=-(f-d)*r,g=h*s,v=h+(m-g)*l/1e3,x=h*l/1e3+f;return Math.abs(x-d)<Fx&&Math.abs(v)<Fx?[d,0]:[x,v]};return c.isStepper=!0,c.dt=l,c},eAe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return FI(a);case"spring":return ZCe();default:if(a.split("(")[0]==="cubic-bezier")return FI(a)}return typeof a=="function"?a:null};function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}function BI(e){return rAe(e)||nAe(e)||T8(e)||tAe()}function tAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rAe(e){if(Array.isArray(e))return uk(e)}function UI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UI(Object(n),!0).forEach(function(r){ck(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ck(e,t,n){return t=aAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aAe(e){var t=iAe(e,"string");return Bm(t)==="symbol"?t:String(t)}function iAe(e,t){if(Bm(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sAe(e,t){return cAe(e)||lAe(e,t)||T8(e,t)||oAe()}function oAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T8(e,t){if(e){if(typeof e=="string")return uk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uk(e,t)}}function uk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function cAe(e){if(Array.isArray(e))return e}var Bx=function(t,n,r){return t+(n-t)*r},dk=function(t){var n=t.from,r=t.to;return n!==r},uAe=function e(t,n,r){var a=Eh(function(s,o){if(dk(o)){var l=t(o.from,o.to,o.velocity),c=sAe(l,2),u=c[0],f=c[1];return Cr(Cr({},o),{},{from:u,velocity:f})}return o},n);return r<1?Eh(function(s,o){return dk(o)?Cr(Cr({},o),{},{velocity:Bx(o.velocity,a[s].velocity,r),from:Bx(o.from,a[s].from,r)}):o},n):e(t,a,r-1)};const dAe=function(e,t,n,r,a){var s=UCe(e,t),o=s.reduce(function(x,y){return Cr(Cr({},x),{},ck({},y,[e[y],t[y]]))},{}),l=s.reduce(function(x,y){return Cr(Cr({},x),{},ck({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,f,d=function(){return null},h=function(){return Eh(function(y,b){return b.from},l)},m=function(){return!Object.values(l).filter(dk).length},g=function(y){u||(u=y);var b=y-u,w=b/n.dt;l=uAe(n,l,w),a(Cr(Cr(Cr({},e),t),h())),u=y,m()||(c=requestAnimationFrame(d))},v=function(y){f||(f=y);var b=(y-f)/r,w=Eh(function(_,j){return Bx.apply(void 0,BI(j).concat([n(b)]))},o);if(a(Cr(Cr(Cr({},e),t),w)),b<1)c=requestAnimationFrame(d);else{var k=Eh(function(_,j){return Bx.apply(void 0,BI(j).concat([n(1)]))},o);a(Cr(Cr(Cr({},e),t),k))}};return d=n.isStepper?g:v,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function Bd(e){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bd(e)}var fAe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function hAe(e,t){if(e==null)return{};var n=mAe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mAe(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,s;for(s=0;s<r.length;s++)a=r[s],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function lj(e){return xAe(e)||vAe(e)||gAe(e)||pAe()}function pAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gAe(e,t){if(e){if(typeof e=="string")return fk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fk(e,t)}}function vAe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xAe(e){if(Array.isArray(e))return fk(e)}function fk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ti(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zI(Object(n),!0).forEach(function(r){fh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fh(e,t,n){return t=O8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bAe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O8(r.key),r)}}function wAe(e,t,n){return t&&bAe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function O8(e){var t=jAe(e,"string");return Bd(t)==="symbol"?t:String(t)}function jAe(e,t){if(Bd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bd(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Ae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hk(e,t)}function hk(e,t){return hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},hk(e,t)}function kAe(e){var t=SAe();return function(){var r=Ux(e),a;if(t){var s=Ux(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return mk(this,a)}}function mk(e,t){if(t&&(Bd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pk(e)}function pk(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SAe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ux(e){return Ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ux(e)}var _l=function(e){_Ae(n,e);var t=kAe(n);function n(r,a){var s;yAe(this,n),s=t.call(this,r,a);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,f=o.to,d=o.steps,h=o.children,m=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(pk(s)),s.changeStyle=s.changeStyle.bind(pk(s)),!l||m<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:f}),mk(s);if(d&&d.length)s.state={style:d[0].style};else if(u){if(typeof h=="function")return s.state={style:u},mk(s);s.state={style:c?fh({},c,u):u}}else s.state={style:{}};return s}return wAe(n,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,f=s.to,d=s.from,h=this.state.style;if(l){if(!o){var m={style:c?fh({},c,f):f};this.state&&h&&(c&&h[c]!==f||!c&&h!==f)&&this.setState(m);return}if(!(TCe(a.to,f)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=g||u?d:a.to;if(this.state&&h){var x={style:c?fh({},c,v):v};(c&&h[c]!==v||!c&&h!==v)&&this.setState(x)}this.runAnimation(Ti(Ti({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,l=a.to,c=a.duration,u=a.easing,f=a.begin,d=a.onAnimationEnd,h=a.onAnimationStart,m=dAe(o,l,eAe(u),c,this.changeStyle),g=function(){s.stopJSAnimation=m()};this.manager.start([h,f,g,c,d])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],f=u.style,d=u.duration,h=d===void 0?0:d,m=function(v,x,y){if(y===0)return v;var b=x.duration,w=x.easing,k=w===void 0?"ease":w,_=x.style,j=x.properties,S=x.onAnimationEnd,A=y>0?o[y-1]:x,C=j||Object.keys(_);if(typeof k=="function"||k==="spring")return[].concat(lj(v),[s.runJSAnimation.bind(s,{from:A.style,to:_,duration:b,easing:k}),b]);var T=$I(C,b,k),M=Ti(Ti(Ti({},A.style),_),{},{transition:T});return[].concat(lj(v),[M,b,S]).filter(zCe)};return this.manager.start([c].concat(lj(o.reduce(m,[f,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=LCe());var s=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,f=a.onAnimationStart,d=a.onAnimationEnd,h=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var v=l?fh({},l,c):c,x=$I(Object.keys(v),o,u);g.start([f,s,Ti(Ti({},v),{},{transition:x}),o,d])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=hAe(a,fAe),u=p.Children.count(s),f=this.state.style;if(typeof s=="function")return s(f);if(!l||u===0||o<=0)return s;var d=function(m){var g=m.props,v=g.style,x=v===void 0?{}:v,y=g.className,b=p.cloneElement(m,Ti(Ti({},c),{},{style:Ti(Ti({},x),f),className:y}));return b};return u===1?d(p.Children.only(s)):X.createElement("div",null,p.Children.map(s,function(h){return d(h)}))}}]),n}(p.PureComponent);_l.displayName="Animate";_l.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};_l.propTypes={from:sn.oneOfType([sn.object,sn.string]),to:sn.oneOfType([sn.object,sn.string]),attributeName:sn.string,duration:sn.number,begin:sn.number,easing:sn.oneOfType([sn.string,sn.func]),steps:sn.arrayOf(sn.shape({duration:sn.number.isRequired,style:sn.object.isRequired,easing:sn.oneOfType([sn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),sn.func]),properties:sn.arrayOf("string"),onAnimationEnd:sn.func})),children:sn.oneOfType([sn.node,sn.func]),isActive:sn.bool,canBegin:sn.bool,onAnimationEnd:sn.func,shouldReAnimate:sn.bool,onAnimationStart:sn.func,onAnimationReStart:sn.func};function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function zx(){return zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zx.apply(this,arguments)}function NAe(e,t){return PAe(e)||EAe(e,t)||AAe(e,t)||CAe()}function CAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AAe(e,t){if(e){if(typeof e=="string")return qI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qI(e,t)}}function qI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function EAe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function PAe(e){if(Array.isArray(e))return e}function WI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function HI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WI(Object(n),!0).forEach(function(r){TAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TAe(e,t,n){return t=OAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OAe(e){var t=IAe(e,"string");return Um(t)=="symbol"?t:t+""}function IAe(e,t){if(Um(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VI=function(t,n,r,a,s){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,c=r>=0?1:-1,u=a>=0&&r>=0||a<0&&r<0?1:0,f;if(o>0&&s instanceof Array){for(var d=[0,0,0,0],h=0,m=4;h<m;h++)d[h]=s[h]>o?o:s[h];f="M".concat(t,",").concat(n+l*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(n)),f+="L ".concat(t+r-c*d[1],",").concat(n),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*d[1])),f+="L ".concat(t+r,",").concat(n+a-l*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+r-c*d[2],",").concat(n+a)),f+="L ".concat(t+c*d[3],",").concat(n+a),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*d[3])),f+="Z"}else if(o>0&&s===+s&&s>0){var g=Math.min(o,s);f="M ".concat(t,",").concat(n+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(n,`
            L `).concat(t+r-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*g,`
            L `).concat(t+r,",").concat(n+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r-c*g,",").concat(n+a,`
            L `).concat(t+c*g,",").concat(n+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*g," Z")}else f="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return f},RAe=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,s=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),f=Math.max(s,s+l),d=Math.min(o,o+c),h=Math.max(o,o+c);return r>=u&&r<=f&&a>=d&&a<=h}return!1},MAe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uA=function(t){var n=HI(HI({},MAe),t),r=p.useRef(),a=p.useState(-1),s=NAe(a,2),o=s[0],l=s[1];p.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var k=r.current.getTotalLength();k&&l(k)}catch{}},[]);var c=n.x,u=n.y,f=n.width,d=n.height,h=n.radius,m=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,y=n.isAnimationActive,b=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var w=Zt("recharts-rectangle",m);return b?X.createElement(_l,{canBegin:o>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:v,animationEasing:g,isActive:b},function(k){var _=k.width,j=k.height,S=k.x,A=k.y;return X.createElement(_l,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,isActive:y,easing:g},X.createElement("path",zx({},rn(n,!0),{className:w,d:VI(S,A,_,j,h),ref:r})))}):X.createElement("path",zx({},rn(n,!0),{className:w,d:VI(c,u,f,d,h)}))};function gk(){return gk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gk.apply(this,arguments)}var I8=function(t){var n=t.cx,r=t.cy,a=t.r,s=t.className,o=Zt("recharts-dot",s);return n===+n&&r===+r&&a===+a?p.createElement("circle",gk({},rn(t,!1),ox(t),{className:o,cx:n,cy:r,r:a})):null};function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}var DAe=["x","y","top","left","width","height","className"];function vk(){return vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vk.apply(this,arguments)}function KI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $Ae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KI(Object(n),!0).forEach(function(r){LAe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LAe(e,t,n){return t=FAe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FAe(e){var t=BAe(e,"string");return zm(t)=="symbol"?t:t+""}function BAe(e,t){if(zm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UAe(e,t){if(e==null)return{};var n=zAe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zAe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var qAe=function(t,n,r,a,s,o){return"M".concat(t,",").concat(s,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},WAe=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,s=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,f=t.width,d=f===void 0?0:f,h=t.height,m=h===void 0?0:h,g=t.className,v=UAe(t,DAe),x=$Ae({x:r,y:s,top:l,left:u,width:d,height:m},v);return!Ve(r)||!Ve(s)||!Ve(d)||!Ve(m)||!Ve(l)||!Ve(u)?null:X.createElement("path",vk({},rn(x,!0),{className:Zt("recharts-cross",g),d:qAe(r,s,d,m,l,u)}))},HAe=Vz,VAe=HAe(Object.getPrototypeOf,Object),KAe=VAe,GAe=_o,YAe=KAe,XAe=ko,JAe="[object Object]",QAe=Function.prototype,ZAe=Object.prototype,R8=QAe.toString,eEe=ZAe.hasOwnProperty,tEe=R8.call(Object);function nEe(e){if(!XAe(e)||GAe(e)!=JAe)return!1;var t=YAe(e);if(t===null)return!0;var n=eEe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&R8.call(n)==tEe}var rEe=nEe;const aEe=un(rEe);var iEe=_o,sEe=ko,oEe="[object Boolean]";function lEe(e){return e===!0||e===!1||sEe(e)&&iEe(e)==oEe}var cEe=lEe;const uEe=un(cEe);function qm(e){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qm(e)}function qx(){return qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qx.apply(this,arguments)}function dEe(e,t){return pEe(e)||mEe(e,t)||hEe(e,t)||fEe()}function fEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hEe(e,t){if(e){if(typeof e=="string")return GI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GI(e,t)}}function GI(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mEe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function pEe(e){if(Array.isArray(e))return e}function YI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function XI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YI(Object(n),!0).forEach(function(r){gEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gEe(e,t,n){return t=vEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vEe(e){var t=xEe(e,"string");return qm(t)=="symbol"?t:t+""}function xEe(e,t){if(qm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JI=function(t,n,r,a,s){var o=r-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+s),l+="L ".concat(t+r-o/2-a,",").concat(n+s),l+="L ".concat(t,",").concat(n," Z"),l},yEe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bEe=function(t){var n=XI(XI({},yEe),t),r=p.useRef(),a=p.useState(-1),s=dEe(a,2),o=s[0],l=s[1];p.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&l(w)}catch{}},[]);var c=n.x,u=n.y,f=n.upperWidth,d=n.lowerWidth,h=n.height,m=n.className,g=n.animationEasing,v=n.animationDuration,x=n.animationBegin,y=n.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var b=Zt("recharts-trapezoid",m);return y?X.createElement(_l,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:h,x:c,y:u},duration:v,animationEasing:g,isActive:y},function(w){var k=w.upperWidth,_=w.lowerWidth,j=w.height,S=w.x,A=w.y;return X.createElement(_l,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,easing:g},X.createElement("path",qx({},rn(n,!0),{className:b,d:JI(S,A,k,_,j),ref:r})))}):X.createElement("g",null,X.createElement("path",qx({},rn(n,!0),{className:b,d:JI(c,u,f,d,h)})))},wEe=["option","shapeType","propTransformer","activeClassName","isActive"];function Wm(e){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(e)}function jEe(e,t){if(e==null)return{};var n=_Ee(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _Ee(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function QI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QI(Object(n),!0).forEach(function(r){kEe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kEe(e,t,n){return t=SEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SEe(e){var t=NEe(e,"string");return Wm(t)=="symbol"?t:t+""}function NEe(e,t){if(Wm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CEe(e,t){return Wx(Wx({},t),e)}function AEe(e,t){return e==="symbols"}function ZI(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return X.createElement(uA,n);case"trapezoid":return X.createElement(bEe,n);case"sector":return X.createElement(j8,n);case"symbols":if(AEe(t))return X.createElement(AC,n);break;default:return null}}function EEe(e){return p.isValidElement(e)?e.props:e}function PEe(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?CEe:r,s=e.activeClassName,o=s===void 0?"recharts-active-shape":s,l=e.isActive,c=jEe(e,wEe),u;if(p.isValidElement(t))u=p.cloneElement(t,Wx(Wx({},c),EEe(t)));else if(Mt(t))u=t(c);else if(aEe(t)&&!uEe(t)){var f=a(t,c);u=X.createElement(ZI,{shapeType:n,elementProps:f})}else{var d=c;u=X.createElement(ZI,{shapeType:n,elementProps:d})}return l?X.createElement(wr,{className:o},u):u}function i0(e,t){return t!=null&&"trapezoids"in e.props}function s0(e,t){return t!=null&&"sectors"in e.props}function Hm(e,t){return t!=null&&"points"in e.props}function TEe(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,s=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&s}function OEe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function IEe(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function REe(e,t){var n;return i0(e,t)?n=TEe:s0(e,t)?n=OEe:Hm(e,t)&&(n=IEe),n}function MEe(e,t){var n;return i0(e,t)?n="trapezoids":s0(e,t)?n="sectors":Hm(e,t)&&(n="points"),n}function DEe(e,t){if(i0(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(s0(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Hm(e,t)?t.payload:{}}function $Ee(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=MEe(n,t),s=DEe(n,t),o=r.filter(function(c,u){var f=sA(s,c),d=n.props[a].filter(function(g){var v=REe(n,t);return v(g,t)}),h=n.props[a].indexOf(d[d.length-1]),m=u===h;return f&&m}),l=r.indexOf(o[o.length-1]);return l}var LEe=Math.ceil,FEe=Math.max;function BEe(e,t,n,r){for(var a=-1,s=FEe(LEe((t-e)/(n||1)),0),o=Array(s);s--;)o[r?s:++a]=e,e+=n;return o}var UEe=BEe,zEe=d6,eR=1/0,qEe=17976931348623157e292;function WEe(e){if(!e)return e===0?e:0;if(e=zEe(e),e===eR||e===-eR){var t=e<0?-1:1;return t*qEe}return e===e?e:0}var M8=WEe,HEe=UEe,VEe=Kb,cj=M8;function KEe(e){return function(t,n,r){return r&&typeof r!="number"&&VEe(t,n,r)&&(n=r=void 0),t=cj(t),n===void 0?(n=t,t=0):n=cj(n),r=r===void 0?t<n?1:-1:cj(r),HEe(t,n,r,e)}}var GEe=KEe,YEe=GEe,XEe=YEe(),JEe=XEe;const Hx=un(JEe);function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function tR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function nR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tR(Object(n),!0).forEach(function(r){D8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function D8(e,t,n){return t=QEe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QEe(e){var t=ZEe(e,"string");return Vm(t)=="symbol"?t:t+""}function ZEe(e,t){if(Vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ePe=["Webkit","Moz","O","ms"],tPe=function(t,n){var r=t.replace(/(\w)/,function(s){return s.toUpperCase()}),a=ePe.reduce(function(s,o){return nR(nR({},s),{},D8({},o+r,n))},{});return a[t]=n,a};function Ud(e){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ud(e)}function Vx(){return Vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vx.apply(this,arguments)}function rR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rR(Object(n),!0).forEach(function(r){Fa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L8(r.key),r)}}function rPe(e,t,n){return t&&aR(e.prototype,t),n&&aR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function aPe(e,t,n){return t=Kx(t),iPe(e,$8()?Reflect.construct(t,n||[],Kx(e).constructor):t.apply(e,n))}function iPe(e,t){if(t&&(Ud(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sPe(e)}function sPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($8=function(){return!!e})()}function Kx(e){return Kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kx(e)}function oPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xk(e,t)}function xk(e,t){return xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},xk(e,t)}function Fa(e,t,n){return t=L8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L8(e){var t=lPe(e,"string");return Ud(t)=="symbol"?t:t+""}function lPe(e,t){if(Ud(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cPe=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,s=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Ch().domain(Hx(0,c)).range([s,s+o-l]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(a),scale:u,scaleValues:f}},iR=function(t){return t.changedTouches&&!!t.changedTouches.length},zd=function(e){function t(n){var r;return nPe(this,t),r=aPe(this,t,[n]),Fa(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),Fa(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),Fa(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,s=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:s,startIndex:l})}),r.detachDragEndListener()}),Fa(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Fa(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Fa(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Fa(r,"handleSlideDragStart",function(a){var s=iR(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return oPe(t,e),rPe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,s=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,d=Math.min(a,s),h=Math.max(a,s),m=t.getIndexInRange(o,d),g=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:g===f?f:g-g%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,s=a.data,o=a.tickFormatter,l=a.dataKey,c=Os(s[r],l,r);return Mt(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,s=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,h=c.startIndex,m=c.endIndex,g=c.onChange,v=r.pageX-s;v>0?v=Math.min(v,u+f-d-l,u+f-d-o):v<0&&(v=Math.max(v,u-o,u-l));var x=this.getIndex({startX:o+v,endX:l+v});(x.startIndex!==h||x.endIndex!==m)&&g&&g(x),this.setState({startX:o+v,endX:l+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var s=iR(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],f=this.props,d=f.x,h=f.width,m=f.travellerWidth,g=f.onChange,v=f.gap,x=f.data,y={startX:this.state.startX,endX:this.state.endX},b=r.pageX-s;b>0?b=Math.min(b,d+h-m-u):b<0&&(b=Math.max(b,d-u)),y[o]=u+b;var w=this.getIndex(y),k=w.startIndex,_=w.endIndex,j=function(){var A=x.length-1;return o==="startX"&&(l>c?k%v===0:_%v===0)||l<c&&_===A||o==="endX"&&(l>c?_%v===0:k%v===0)||l>c&&_===A};this.setState(Fa(Fa({},o,u+b),"brushMoveStartX",r.pageX),function(){g&&j()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,f=this.state[a],d=l.indexOf(f);if(d!==-1){var h=d+r;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(Fa({},a,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return X.createElement("rect",{stroke:u,fill:c,x:a,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.data,u=r.children,f=r.padding,d=p.Children.only(u);return d?X.cloneElement(d,{x:a,y:s,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var s,o,l=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,h=c.traveller,m=c.ariaLabel,g=c.data,v=c.startIndex,x=c.endIndex,y=Math.max(r,this.props.x),b=uj(uj({},rn(this.props,!1)),{},{x:y,y:u,width:f,height:d}),w=m||"Min value: ".concat((s=g[v])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=g[x])===null||o===void 0?void 0:o.name);return X.createElement(wr,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),l.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(r,a){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,f=Math.min(r,a)+u,d=Math.max(Math.abs(a-r)-u,0);return X.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:d,height:l})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,s=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,f=this.state,d=f.startX,h=f.endX,m=5,g={pointerEvents:"none",fill:u};return X.createElement(wr,{className:"recharts-brush-texts"},X.createElement(jx,Vx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-m,y:o+l/2},g),this.getTextOfTick(a)),X.createElement(jx,Vx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+c+m,y:o+l/2},g),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,a=r.data,s=r.className,o=r.children,l=r.x,c=r.y,u=r.width,f=r.height,d=r.alwaysShowText,h=this.state,m=h.startX,g=h.endX,v=h.isTextActive,x=h.isSlideMoving,y=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!Ve(l)||!Ve(c)||!Ve(u)||!Ve(f)||u<=0||f<=0)return null;var w=Zt("recharts-brush",s),k=X.Children.count(o)===1,_=tPe("userSelect","none");return X.createElement(wr,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),k&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(v||x||y||b||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,s=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(s+l/2)-1;return X.createElement(X.Fragment,null,X.createElement("rect",{x:a,y:s,width:o,height:l,fill:c,stroke:"none"}),X.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),X.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var s;return X.isValidElement(r)?s=X.cloneElement(r,a):Mt(r)?s=r(a):s=t.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(r,a){var s=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,f=r.startIndex,d=r.endIndex;if(s!==a.prevData||u!==a.prevUpdateId)return uj({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?cPe({data:s,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,a){for(var s=r.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>a?l=c:o=c}return a>=r[l]?l:o}}])}(p.PureComponent);Fa(zd,"displayName","Brush");Fa(zd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var uPe=MC;function dPe(e,t){var n;return uPe(e,function(r,a,s){return n=t(r,a,s),!n}),!!n}var fPe=dPe,hPe=Lz,mPe=$l,pPe=fPe,gPe=Ma,vPe=Kb;function xPe(e,t,n){var r=gPe(e)?hPe:pPe;return n&&vPe(e,t,n)&&(t=void 0),r(e,mPe(t))}var yPe=xPe;const bPe=un(yPe);var Cs=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},sR=s6;function wPe(e,t,n){t=="__proto__"&&sR?sR(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var jPe=wPe,_Pe=jPe,kPe=a6,SPe=$l;function NPe(e,t){var n={};return t=SPe(t),kPe(e,function(r,a,s){_Pe(n,a,t(r,a,s))}),n}var CPe=NPe;const APe=un(CPe);function EPe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var PPe=EPe,TPe=MC;function OPe(e,t){var n=!0;return TPe(e,function(r,a,s){return n=!!t(r,a,s),n}),n}var IPe=OPe,RPe=PPe,MPe=IPe,DPe=$l,$Pe=Ma,LPe=Kb;function FPe(e,t,n){var r=$Pe(e)?RPe:MPe;return n&&LPe(e,t,n)&&(t=void 0),r(e,DPe(t))}var BPe=FPe;const F8=un(BPe);var UPe=["x","y"];function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function yk(){return yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yk.apply(this,arguments)}function oR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Zf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oR(Object(n),!0).forEach(function(r){zPe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zPe(e,t,n){return t=qPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qPe(e){var t=WPe(e,"string");return Km(t)=="symbol"?t:t+""}function WPe(e,t){if(Km(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HPe(e,t){if(e==null)return{};var n=VPe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function VPe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function KPe(e,t){var n=e.x,r=e.y,a=HPe(e,UPe),s="".concat(n),o=parseInt(s,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||a.height),f=parseInt(u,10),d="".concat(t.width||a.width),h=parseInt(d,10);return Zf(Zf(Zf(Zf(Zf({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:h,name:t.name,radius:t.radius})}function lR(e){return X.createElement(PEe,yk({shapeType:"rectangle",propTransformer:KPe,activeClassName:"recharts-active-bar"},e))}var GPe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var s=Ve(r)||ffe(r);return s?t(r,a):(s||zc(),n)}},YPe=["value","background"],B8;function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}function XPe(e,t){if(e==null)return{};var n=JPe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function JPe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Gx(){return Gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gx.apply(this,arguments)}function cR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cR(Object(n),!0).forEach(function(r){rl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function QPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z8(r.key),r)}}function ZPe(e,t,n){return t&&uR(e.prototype,t),n&&uR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function eTe(e,t,n){return t=Yx(t),tTe(e,U8()?Reflect.construct(t,n||[],Yx(e).constructor):t.apply(e,n))}function tTe(e,t){if(t&&(qd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nTe(e)}function nTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U8=function(){return!!e})()}function Yx(e){return Yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yx(e)}function rTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bk(e,t)}function bk(e,t){return bk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},bk(e,t)}function rl(e,t,n){return t=z8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z8(e){var t=aTe(e,"string");return qd(t)=="symbol"?t:t+""}function aTe(e,t){if(qd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ln=function(e){function t(){var n;QPe(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=eTe(this,t,[].concat(a)),rl(n,"state",{isAnimationFinished:!1}),rl(n,"id",Bb("recharts-bar-")),rl(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),rl(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return rTe(t,e),ZPe(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,f=rn(this.props,!1);return r&&r.map(function(d,h){var m=h===c,g=m?u:o,v=Zn(Zn(Zn({},f),d),{},{isActive:m,option:g,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return X.createElement(wr,Gx({className:"recharts-bar-rectangle"},lx(a.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),X.createElement(lR,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,s=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,f=a.animationEasing,d=a.animationId,h=this.state.prevData;return X.createElement(_l,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,v=s.map(function(x,y){var b=h&&h[y];if(b){var w=pu(b.x,x.x),k=pu(b.y,x.y),_=pu(b.width,x.width),j=pu(b.height,x.height);return Zn(Zn({},x),{},{x:w(g),y:k(g),width:_(g),height:j(g)})}if(o==="horizontal"){var S=pu(0,x.height),A=S(g);return Zn(Zn({},x),{},{y:x.y+x.height-A,height:A})}var C=pu(0,x.width),T=C(g);return Zn(Zn({},x),{},{width:T})});return X.createElement(wr,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,s=r.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!sA(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,s=a.data,o=a.dataKey,l=a.activeIndex,c=rn(this.props.background,!1);return s.map(function(u,f){u.value;var d=u.background,h=XPe(u,YPe);if(!d)return null;var m=Zn(Zn(Zn(Zn(Zn({},h),{},{fill:"#eee"},d),c),lx(r.props,u,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return X.createElement(lR,Gx({key:"background-bar-".concat(f),option:r.props.background,isActive:f===l},m))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,f=s.children,d=Yi(f,a0);if(!d)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(x,y){var b=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:b,errorVal:Os(x,y)}},g={clipPath:r?"url(#clipPath-".concat(a,")"):null};return X.createElement(wr,g,d.map(function(v){return X.cloneElement(v,{key:"error-bar-".concat(a,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,s=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,f=r.top,d=r.width,h=r.height,m=r.isAnimationActive,g=r.background,v=r.id;if(a||!s||!s.length)return null;var x=this.state.isAnimationFinished,y=Zt("recharts-bar",o),b=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,k=b||w,_=an(v)?this.id:v;return X.createElement(wr,{className:y},b||w?X.createElement("defs",null,X.createElement("clipPath",{id:"clipPath-".concat(_)},X.createElement("rect",{x:b?u:u-d/2,y:w?f:f-h/2,width:b?d:d*2,height:w?h:h*2}))):null,X.createElement(wr,{className:"recharts-bar-rectangles",clipPath:k?"url(#clipPath-".concat(_,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(k,_),(!m||x)&&Vi.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(p.PureComponent);B8=Ln;rl(Ln,"displayName","Bar");rl(Ln,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ml.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});rl(Ln,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,s=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,m=RSe(r,n);if(!m)return null;var g=t.layout,v=n.type.defaultProps,x=v!==void 0?Zn(Zn({},v),n.props):n.props,y=x.dataKey,b=x.children,w=x.minPointSize,k=g==="horizontal"?o:s,_=u?k.scale.domain():null,j=zSe({numericAxis:k}),S=Yi(b,h6),A=d.map(function(C,T){var M,F,E,I,P,B;u?M=MSe(u[f+T],_):(M=Os(C,y),Array.isArray(M)||(M=[j,M]));var O=GPe(w,B8.defaultProps.minPointSize)(M[1],T);if(g==="horizontal"){var $,L=[o.scale(M[0]),o.scale(M[1])],N=L[0],U=L[1];F=lI({axis:s,ticks:l,bandSize:a,offset:m.offset,entry:C,index:T}),E=($=U??N)!==null&&$!==void 0?$:void 0,I=m.size;var D=N-U;if(P=Number.isNaN(D)?0:D,B={x:F,y:o.y,width:I,height:o.height},Math.abs(O)>0&&Math.abs(P)<Math.abs(O)){var R=Hi(P||O)*(Math.abs(O)-Math.abs(P));E-=R,P+=R}}else{var K=[s.scale(M[0]),s.scale(M[1])],Q=K[0],H=K[1];if(F=Q,E=lI({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:C,index:T}),I=H-Q,P=m.size,B={x:s.x,y:E,width:s.width,height:P},Math.abs(O)>0&&Math.abs(I)<Math.abs(O)){var V=Hi(I||O)*(Math.abs(O)-Math.abs(I));I+=V}}return Zn(Zn(Zn({},C),{},{x:F,y:E,width:I,height:P,value:u?M:M[1],payload:C,background:B},S&&S[T]&&S[T].props),{},{tooltipPayload:[y8(n,C)],tooltipPosition:{x:F+I/2,y:E+P/2}})});return Zn({data:A,layout:g},h)});function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function iTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q8(r.key),r)}}function sTe(e,t,n){return t&&dR(e.prototype,t),n&&dR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fR(Object(n),!0).forEach(function(r){o0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o0(e,t,n){return t=q8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q8(e){var t=oTe(e,"string");return Gm(t)=="symbol"?t:t+""}function oTe(e,t){if(Gm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lTe=function(t,n,r,a,s){var o=t.width,l=t.height,c=t.layout,u=t.children,f=Object.keys(n),d={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},h=!!Ua(u,Ln);return f.reduce(function(m,g){var v=n[g],x=v.orientation,y=v.domain,b=v.padding,w=b===void 0?{}:b,k=v.mirror,_=v.reversed,j="".concat(x).concat(k?"Mirror":""),S,A,C,T,M;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var F=y[1]-y[0],E=1/0,I=v.categoricalDomain.sort(pfe);if(I.forEach(function(K,Q){Q>0&&(E=Math.min((K||0)-(I[Q-1]||0),E))}),Number.isFinite(E)){var P=E/F,B=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(S=P*B/2),v.padding==="no-gap"){var O=Bc(t.barCategoryGap,P*B),$=P*B/2;S=$-O-($-O)/B*O}}}a==="xAxis"?A=[r.left+(w.left||0)+(S||0),r.left+r.width-(w.right||0)-(S||0)]:a==="yAxis"?A=c==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(S||0),r.top+r.height-(w.bottom||0)-(S||0)]:A=v.range,_&&(A=[A[1],A[0]]);var L=OSe(v,s,h),N=L.scale,U=L.realScaleType;N.domain(y).range(A),ISe(N);var D=USe(N,Ui(Ui({},v),{},{realScaleType:U}));a==="xAxis"?(M=x==="top"&&!k||x==="bottom"&&k,C=r.left,T=d[j]-M*v.height):a==="yAxis"&&(M=x==="left"&&!k||x==="right"&&k,C=d[j]-M*v.width,T=r.top);var R=Ui(Ui(Ui({},v),D),{},{realScaleType:U,x:C,y:T,scale:N,width:a==="xAxis"?r.width:v.width,height:a==="yAxis"?r.height:v.height});return R.bandSize=Dx(R,D),!v.hide&&a==="xAxis"?d[j]+=(M?-1:1)*R.height:v.hide||(d[j]+=(M?-1:1)*R.width),Ui(Ui({},m),{},o0({},g,R))},{})},W8=function(t,n){var r=t.x,a=t.y,s=n.x,o=n.y;return{x:Math.min(r,s),y:Math.min(a,o),width:Math.abs(s-r),height:Math.abs(o-a)}},cTe=function(t){var n=t.x1,r=t.y1,a=t.x2,s=t.y2;return W8({x:n,y:r},{x:a,y:s})},H8=function(){function e(t){iTe(this,e),this.scale=t}return sTe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],s=r[r.length-1];return a<=s?n>=a&&n<=s:n>=s&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();o0(H8,"EPS",1e-4);var dA=function(t){var n=Object.keys(t).reduce(function(r,a){return Ui(Ui({},r),{},o0({},a,H8.create(t[a])))},{});return Ui(Ui({},n),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return APe(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return F8(a,function(s,o){return n[o].isInRange(s)})}})};function uTe(e){return(e%180+180)%180}var dTe=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=uTe(a),o=s*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},fTe=$l,hTe=$p,mTe=Hb;function pTe(e){return function(t,n,r){var a=Object(t);if(!hTe(t)){var s=fTe(n);t=mTe(t),n=function(l){return s(a[l],l,a)}}var o=e(t,n,r);return o>-1?a[s?t[o]:o]:void 0}}var gTe=pTe,vTe=M8;function xTe(e){var t=vTe(e),n=t%1;return t===t?n?t-n:t:0}var yTe=xTe,bTe=Qz,wTe=$l,jTe=yTe,_Te=Math.max;function kTe(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:jTe(n);return a<0&&(a=_Te(r+a,0)),bTe(e,wTe(t),a)}var STe=kTe,NTe=gTe,CTe=STe,ATe=NTe(CTe),ETe=ATe;const PTe=un(ETe);var TTe=gde(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),fA=p.createContext(void 0),hA=p.createContext(void 0),V8=p.createContext(void 0),K8=p.createContext({}),G8=p.createContext(void 0),Y8=p.createContext(0),X8=p.createContext(0),hR=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,s=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,f=TTe(s);return X.createElement(fA.Provider,{value:r},X.createElement(hA.Provider,{value:a},X.createElement(K8.Provider,{value:s},X.createElement(V8.Provider,{value:f},X.createElement(G8.Provider,{value:o},X.createElement(Y8.Provider,{value:u},X.createElement(X8.Provider,{value:c},l)))))))},OTe=function(){return p.useContext(G8)},J8=function(t){var n=p.useContext(fA);n==null&&zc();var r=n[t];return r==null&&zc(),r},ITe=function(){var t=p.useContext(fA);return Go(t)},RTe=function(){var t=p.useContext(hA),n=PTe(t,function(r){return F8(r.domain,Number.isFinite)});return n||Go(t)},Q8=function(t){var n=p.useContext(hA);n==null&&zc();var r=n[t];return r==null&&zc(),r},MTe=function(){var t=p.useContext(V8);return t},DTe=function(){return p.useContext(K8)},mA=function(){return p.useContext(X8)},pA=function(){return p.useContext(Y8)};function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function $Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LTe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eq(r.key),r)}}function FTe(e,t,n){return t&&LTe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function BTe(e,t,n){return t=Xx(t),UTe(e,Z8()?Reflect.construct(t,n||[],Xx(e).constructor):t.apply(e,n))}function UTe(e,t){if(t&&(Wd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zTe(e)}function zTe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z8=function(){return!!e})()}function Xx(e){return Xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xx(e)}function qTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wk(e,t)}function wk(e,t){return wk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},wk(e,t)}function mR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mR(Object(n),!0).forEach(function(r){gA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gA(e,t,n){return t=eq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eq(e){var t=WTe(e,"string");return Wd(t)=="symbol"?t:t+""}function WTe(e,t){if(Wd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HTe(e,t){return YTe(e)||GTe(e,t)||KTe(e,t)||VTe()}function VTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KTe(e,t){if(e){if(typeof e=="string")return gR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gR(e,t)}}function gR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GTe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function YTe(e){if(Array.isArray(e))return e}function jk(){return jk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jk.apply(this,arguments)}var XTe=function(t,n){var r;return X.isValidElement(t)?r=X.cloneElement(t,n):Mt(t)?r=t(n):r=X.createElement("line",jk({},n,{className:"recharts-reference-line-line"})),r},JTe=function(t,n,r,a,s,o,l,c,u){var f=s.x,d=s.y,h=s.width,m=s.height;if(r){var g=u.y,v=t.y.apply(g,{position:o});if(Cs(u,"discard")&&!t.y.isInRange(v))return null;var x=[{x:f+h,y:v},{x:f,y:v}];return c==="left"?x.reverse():x}if(n){var y=u.x,b=t.x.apply(y,{position:o});if(Cs(u,"discard")&&!t.x.isInRange(b))return null;var w=[{x:b,y:d+m},{x:b,y:d}];return l==="top"?w.reverse():w}if(a){var k=u.segment,_=k.map(function(j){return t.apply(j,{position:o})});return Cs(u,"discard")&&bPe(_,function(j){return!t.isInRange(j)})?null:_}return null};function QTe(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=OTe(),f=J8(a),d=Q8(s),h=MTe();if(!u||!h)return null;so(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=dA({x:f.scale,y:d.scale}),g=mr(t),v=mr(n),x=r&&r.length===2,y=JTe(m,g,v,x,h,e.position,f.orientation,d.orientation,e);if(!y)return null;var b=HTe(y,2),w=b[0],k=w.x,_=w.y,j=b[1],S=j.x,A=j.y,C=Cs(e,"hidden")?"url(#".concat(u,")"):void 0,T=pR(pR({clipPath:C},rn(e,!0)),{},{x1:k,y1:_,x2:S,y2:A});return X.createElement(wr,{className:Zt("recharts-reference-line",l)},XTe(o,T),Wr.renderCallByParent(e,cTe({x1:k,y1:_,x2:S,y2:A})))}var vA=function(e){function t(){return $Te(this,t),BTe(this,t,arguments)}return qTe(t,e),FTe(t,[{key:"render",value:function(){return X.createElement(QTe,this.props)}}])}(X.Component);gA(vA,"displayName","ReferenceLine");gA(vA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function _k(){return _k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_k.apply(this,arguments)}function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function vR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function xR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vR(Object(n),!0).forEach(function(r){l0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nq(r.key),r)}}function t2e(e,t,n){return t&&e2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function n2e(e,t,n){return t=Jx(t),r2e(e,tq()?Reflect.construct(t,n||[],Jx(e).constructor):t.apply(e,n))}function r2e(e,t){if(t&&(Hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a2e(e)}function a2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tq=function(){return!!e})()}function Jx(e){return Jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jx(e)}function i2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kk(e,t)}function kk(e,t){return kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},kk(e,t)}function l0(e,t,n){return t=nq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nq(e){var t=s2e(e,"string");return Hd(t)=="symbol"?t:t+""}function s2e(e,t){if(Hd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o2e=function(t){var n=t.x,r=t.y,a=t.xAxis,s=t.yAxis,o=dA({x:a.scale,y:s.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Cs(t,"discard")&&!o.isInRange(l)?null:l},c0=function(e){function t(){return ZTe(this,t),n2e(this,t,arguments)}return i2e(t,e),t2e(t,[{key:"render",value:function(){var r=this.props,a=r.x,s=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=mr(a),f=mr(s);if(so(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=o2e(this.props);if(!d)return null;var h=d.x,m=d.y,g=this.props,v=g.shape,x=g.className,y=Cs(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=xR(xR({clipPath:y},rn(this.props,!0)),{},{cx:h,cy:m});return X.createElement(wr,{className:Zt("recharts-reference-dot",x)},t.renderDot(v,b),Wr.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(X.Component);l0(c0,"displayName","ReferenceDot");l0(c0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});l0(c0,"renderDot",function(e,t){var n;return X.isValidElement(e)?n=X.cloneElement(e,t):Mt(e)?n=e(t):n=X.createElement(I8,_k({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function Sk(){return Sk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sk.apply(this,arguments)}function Vd(e){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vd(e)}function yR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function bR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yR(Object(n),!0).forEach(function(r){u0(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,aq(r.key),r)}}function u2e(e,t,n){return t&&c2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function d2e(e,t,n){return t=Qx(t),f2e(e,rq()?Reflect.construct(t,n||[],Qx(e).constructor):t.apply(e,n))}function f2e(e,t){if(t&&(Vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h2e(e)}function h2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rq=function(){return!!e})()}function Qx(e){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qx(e)}function m2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nk(e,t)}function Nk(e,t){return Nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Nk(e,t)}function u0(e,t,n){return t=aq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aq(e){var t=p2e(e,"string");return Vd(t)=="symbol"?t:t+""}function p2e(e,t){if(Vd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var g2e=function(t,n,r,a,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,f=s.xAxis,d=s.yAxis;if(!f||!d)return null;var h=dA({x:f.scale,y:d.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:n?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Cs(s,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:W8(m,g)},d0=function(e){function t(){return l2e(this,t),d2e(this,t,arguments)}return m2e(t,e),u2e(t,[{key:"render",value:function(){var r=this.props,a=r.x1,s=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,f=r.clipPathId;so(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=mr(a),h=mr(s),m=mr(o),g=mr(l),v=this.props.shape;if(!d&&!h&&!m&&!g&&!v)return null;var x=g2e(d,h,m,g,this.props);if(!x&&!v)return null;var y=Cs(this.props,"hidden")?"url(#".concat(f,")"):void 0;return X.createElement(wr,{className:Zt("recharts-reference-area",c)},t.renderRect(v,bR(bR({clipPath:y},rn(this.props,!0)),x)),Wr.renderCallByParent(this.props,x))}}])}(X.Component);u0(d0,"displayName","ReferenceArea");u0(d0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});u0(d0,"renderRect",function(e,t){var n;return X.isValidElement(e)?n=X.cloneElement(e,t):Mt(e)?n=e(t):n=X.createElement(uA,Sk({},t,{className:"recharts-reference-area-rect"})),n});function iq(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function v2e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return dTe(r,n)}function x2e(e,t,n){var r=n==="width",a=e.x,s=e.y,o=e.width,l=e.height;return t===1?{start:r?a:s,end:r?a+o:s+l}:{start:r?a+o:s+l,end:r?a:s}}function Zx(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var s=n();return e*(t-e*s/2-r)>=0&&e*(t+e*s/2-a)<=0}function y2e(e,t){return iq(e,t+1)}function b2e(e,t,n,r,a){for(var s=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,f=o,d=function(){var g=r==null?void 0:r[c];if(g===void 0)return{v:iq(r,u)};var v=c,x,y=function(){return x===void 0&&(x=n(g,v)),x},b=g.coordinate,w=c===0||Zx(e,b,y,f,l);w||(c=0,f=o,u+=1),w&&(f=b+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=d(),h)return h.v;return[]}function Ym(e){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ym(e)}function wR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wR(Object(n),!0).forEach(function(r){w2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w2e(e,t,n){return t=j2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j2e(e){var t=_2e(e,"string");return Ym(t)=="symbol"?t:t+""}function _2e(e,t){if(Ym(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k2e(e,t,n,r,a){for(var s=(r||[]).slice(),o=s.length,l=t.start,c=t.end,u=function(h){var m=s[h],g,v=function(){return g===void 0&&(g=n(m,h)),g};if(h===o-1){var x=e*(m.coordinate+e*v()/2-c);s[h]=m=zr(zr({},m),{},{tickCoord:x>0?m.coordinate-x*e:m.coordinate})}else s[h]=m=zr(zr({},m),{},{tickCoord:m.coordinate});var y=Zx(e,m.tickCoord,v,l,c);y&&(c=m.tickCoord-e*(v()/2+a),s[h]=zr(zr({},m),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return s}function S2e(e,t,n,r,a,s){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(s){var f=r[l-1],d=n(f,l-1),h=e*(f.coordinate+e*d/2-u);o[l-1]=f=zr(zr({},f),{},{tickCoord:h>0?f.coordinate-h*e:f.coordinate});var m=Zx(e,f.tickCoord,function(){return d},c,u);m&&(u=f.tickCoord-e*(d/2+a),o[l-1]=zr(zr({},f),{},{isShow:!0}))}for(var g=s?l-1:l,v=function(b){var w=o[b],k,_=function(){return k===void 0&&(k=n(w,b)),k};if(b===0){var j=e*(w.coordinate-e*_()/2-c);o[b]=w=zr(zr({},w),{},{tickCoord:j<0?w.coordinate-j*e:w.coordinate})}else o[b]=w=zr(zr({},w),{},{tickCoord:w.coordinate});var S=Zx(e,w.tickCoord,_,c,u);S&&(c=w.tickCoord+e*(_()/2+a),o[b]=zr(zr({},w),{},{isShow:!0}))},x=0;x<g;x++)v(x);return o}function xA(e,t,n){var r=e.tick,a=e.ticks,s=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!a||!a.length||!r)return[];if(Ve(c)||ml.isSsr)return y2e(a,typeof c=="number"&&Ve(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",g=f&&m==="width"?Nh(f,{fontSize:t,letterSpacing:n}):{width:0,height:0},v=function(w,k){var _=Mt(u)?u(w.value,k):w.value;return m==="width"?v2e(Nh(_,{fontSize:t,letterSpacing:n}),g,d):Nh(_,{fontSize:t,letterSpacing:n})[m]},x=a.length>=2?Hi(a[1].coordinate-a[0].coordinate):1,y=x2e(s,x,m);return c==="equidistantPreserveStart"?b2e(x,y,v,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=S2e(x,y,v,a,o,c==="preserveStartEnd"):h=k2e(x,y,v,a,o),h.filter(function(b){return b.isShow}))}var N2e=["viewBox"],C2e=["viewBox"],A2e=["ticks"];function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}function Wu(){return Wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wu.apply(this,arguments)}function jR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jR(Object(n),!0).forEach(function(r){yA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dj(e,t){if(e==null)return{};var n=E2e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function E2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function P2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oq(r.key),r)}}function T2e(e,t,n){return t&&_R(e.prototype,t),n&&_R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function O2e(e,t,n){return t=ey(t),I2e(e,sq()?Reflect.construct(t,n||[],ey(e).constructor):t.apply(e,n))}function I2e(e,t){if(t&&(Kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R2e(e)}function R2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sq=function(){return!!e})()}function ey(e){return ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ey(e)}function M2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ck(e,t)}function Ck(e,t){return Ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ck(e,t)}function yA(e,t,n){return t=oq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oq(e){var t=D2e(e,"string");return Kd(t)=="symbol"?t:t+""}function D2e(e,t){if(Kd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Kd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _f=function(e){function t(n){var r;return P2e(this,t),r=O2e(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return M2e(t,e),T2e(t,[{key:"shouldComponentUpdate",value:function(r,a){var s=r.viewBox,o=dj(r,N2e),l=this.props,c=l.viewBox,u=dj(l,C2e);return!id(s,c)||!id(o,u)||!id(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,s=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,f=a.tickSize,d=a.mirror,h=a.tickMargin,m,g,v,x,y,b,w=d?-1:1,k=r.tickSize||f,_=Ve(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=g=r.coordinate,x=o+ +!d*c,v=x-w*k,b=v-w*h,y=_;break;case"left":v=x=r.coordinate,g=s+ +!d*l,m=g-w*k,y=m-w*h,b=_;break;case"right":v=x=r.coordinate,g=s+ +d*l,m=g+w*k,y=m+w*h,b=_;break;default:m=g=r.coordinate,x=o+ +d*c,v=x+w*k,b=v+w*h,y=_;break}return{line:{x1:m,y1:v,x2:g,y2:x},tick:{x:y,y:b}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,s=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,s=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,f=r.axisLine,d=lr(lr(lr({},rn(this.props,!1)),rn(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);d=lr(lr({},d),{},{x1:a,y1:s+h*l,x2:a+o,y2:s+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);d=lr(lr({},d),{},{x1:a+m*o,y1:s,x2:a+m*o,y2:s+l})}return X.createElement("line",Wu({},d,{className:Zt("recharts-cartesian-axis-line",vi(f,"className"))}))}},{key:"renderTicks",value:function(r,a,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,d=l.tickFormatter,h=l.unit,m=xA(lr(lr({},this.props),{},{ticks:r}),a,s),g=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),x=rn(this.props,!1),y=rn(f,!1),b=lr(lr({},x),{},{fill:"none"},rn(c,!1)),w=m.map(function(k,_){var j=o.getTickLineCoord(k),S=j.line,A=j.tick,C=lr(lr(lr(lr({textAnchor:g,verticalAnchor:v},x),{},{stroke:"none",fill:u},y),A),{},{index:_,payload:k,visibleTicksCount:m.length,tickFormatter:d});return X.createElement(wr,Wu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(k.value,"-").concat(k.coordinate,"-").concat(k.tickCoord)},lx(o.props,k,_)),c&&X.createElement("line",Wu({},b,S,{className:Zt("recharts-cartesian-axis-tick-line",vi(c,"className"))})),f&&t.renderTickItem(f,C,"".concat(Mt(d)?d(k.value,_):k.value).concat(h||"")))});return X.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,a=this.props,s=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,f=a.hide;if(f)return null;var d=this.props,h=d.ticks,m=dj(d,A2e),g=h;return Mt(c)&&(g=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:X.createElement(wr,{className:Zt("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},s&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Wr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,s){var o,l=Zt(a.className,"recharts-cartesian-axis-tick-value");return X.isValidElement(r)?o=X.cloneElement(r,lr(lr({},a),{},{className:l})):Mt(r)?o=r(lr(lr({},a),{},{className:l})):o=X.createElement(jx,Wu({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(p.Component);yA(_f,"displayName","CartesianAxis");yA(_f,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var $2e=["x1","y1","x2","y2","key"],L2e=["offset"];function qc(e){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qc(e)}function kR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kR(Object(n),!0).forEach(function(r){F2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function F2e(e,t,n){return t=B2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B2e(e){var t=U2e(e,"string");return qc(t)=="symbol"?t:t+""}function U2e(e,t){if(qc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uc(){return uc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uc.apply(this,arguments)}function SR(e,t){if(e==null)return{};var n=z2e(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function z2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var q2e=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,c=t.ry;return X.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function lq(e,t){var n;if(X.isValidElement(e))n=X.cloneElement(e,t);else if(Mt(e))n=e(t);else{var r=t.x1,a=t.y1,s=t.x2,o=t.y2,l=t.key,c=SR(t,$2e),u=rn(c,!1);u.offset;var f=SR(u,L2e);n=X.createElement("line",uc({},f,{x1:r,y1:a,x2:s,y2:o,fill:"none",key:l}))}return n}function W2e(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,s=e.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=Hr(Hr({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return lq(a,u)});return X.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function H2e(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,s=e.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var u=Hr(Hr({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return lq(a,u)});return X.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function V2e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,s=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==f[0]&&f.unshift(0);var d=f.map(function(h,m){var g=!f[m+1],v=g?a+o-h:f[m+1]-h;if(v<=0)return null;var x=m%t.length;return X.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:v,width:s,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function K2e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,s=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var f=u.map(function(h){return Math.round(h+s-s)}).sort(function(h,m){return h-m});s!==f[0]&&f.unshift(0);var d=f.map(function(h,m){var g=!f[m+1],v=g?s+l-h:f[m+1]-h;if(v<=0)return null;var x=m%r.length;return X.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:v,height:c,stroke:"none",fill:r[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var G2e=function(t,n){var r=t.xAxis,a=t.width,s=t.height,o=t.offset;return v8(xA(Hr(Hr(Hr({},_f.defaultProps),r),{},{ticks:eo(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,n)},Y2e=function(t,n){var r=t.yAxis,a=t.width,s=t.height,o=t.offset;return v8(xA(Hr(Hr(Hr({},_f.defaultProps),r),{},{ticks:eo(r,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,n)},xu={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ak(e){var t,n,r,a,s,o,l=mA(),c=pA(),u=DTe(),f=Hr(Hr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:xu.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:xu.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:xu.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:xu.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:xu.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:xu.verticalFill,x:Ve(e.x)?e.x:u.left,y:Ve(e.y)?e.y:u.top,width:Ve(e.width)?e.width:u.width,height:Ve(e.height)?e.height:u.height}),d=f.x,h=f.y,m=f.width,g=f.height,v=f.syncWithTicks,x=f.horizontalValues,y=f.verticalValues,b=ITe(),w=RTe();if(!Ve(m)||m<=0||!Ve(g)||g<=0||!Ve(d)||d!==+d||!Ve(h)||h!==+h)return null;var k=f.verticalCoordinatesGenerator||G2e,_=f.horizontalCoordinatesGenerator||Y2e,j=f.horizontalPoints,S=f.verticalPoints;if((!j||!j.length)&&Mt(_)){var A=x&&x.length,C=_({yAxis:w?Hr(Hr({},w),{},{ticks:A?x:w.ticks}):void 0,width:l,height:c,offset:u},A?!0:v);so(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(qc(C),"]")),Array.isArray(C)&&(j=C)}if((!S||!S.length)&&Mt(k)){var T=y&&y.length,M=k({xAxis:b?Hr(Hr({},b),{},{ticks:T?y:b.ticks}):void 0,width:l,height:c,offset:u},T?!0:v);so(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(qc(M),"]")),Array.isArray(M)&&(S=M)}return X.createElement("g",{className:"recharts-cartesian-grid"},X.createElement(q2e,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),X.createElement(W2e,uc({},f,{offset:u,horizontalPoints:j,xAxis:b,yAxis:w})),X.createElement(H2e,uc({},f,{offset:u,verticalPoints:S,xAxis:b,yAxis:w})),X.createElement(V2e,uc({},f,{horizontalPoints:j})),X.createElement(K2e,uc({},f,{verticalPoints:S})))}Ak.displayName="CartesianGrid";function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}function X2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,dq(r.key),r)}}function Q2e(e,t,n){return t&&J2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z2e(e,t,n){return t=ty(t),eOe(e,cq()?Reflect.construct(t,n||[],ty(e).constructor):t.apply(e,n))}function eOe(e,t){if(t&&(Gd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tOe(e)}function tOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cq=function(){return!!e})()}function ty(e){return ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ty(e)}function nOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ek(e,t)}function Ek(e,t){return Ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ek(e,t)}function uq(e,t,n){return t=dq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dq(e){var t=rOe(e,"string");return Gd(t)=="symbol"?t:t+""}function rOe(e,t){if(Gd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pk(){return Pk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pk.apply(this,arguments)}function aOe(e){var t=e.xAxisId,n=mA(),r=pA(),a=J8(t);return a==null?null:p.createElement(_f,Pk({},a,{className:Zt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return eo(o,!0)}}))}var na=function(e){function t(){return X2e(this,t),Z2e(this,t,arguments)}return nOe(t,e),Q2e(t,[{key:"render",value:function(){return p.createElement(aOe,this.props)}}])}(p.Component);uq(na,"displayName","XAxis");uq(na,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function iOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mq(r.key),r)}}function oOe(e,t,n){return t&&sOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lOe(e,t,n){return t=ny(t),cOe(e,fq()?Reflect.construct(t,n||[],ny(e).constructor):t.apply(e,n))}function cOe(e,t){if(t&&(Yd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uOe(e)}function uOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fq=function(){return!!e})()}function ny(e){return ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ny(e)}function dOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tk(e,t)}function Tk(e,t){return Tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Tk(e,t)}function hq(e,t,n){return t=mq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mq(e){var t=fOe(e,"string");return Yd(t)=="symbol"?t:t+""}function fOe(e,t){if(Yd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ok(){return Ok=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ok.apply(this,arguments)}var hOe=function(t){var n=t.yAxisId,r=mA(),a=pA(),s=Q8(n);return s==null?null:p.createElement(_f,Ok({},s,{className:Zt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return eo(l,!0)}}))},ra=function(e){function t(){return iOe(this,t),lOe(this,t,arguments)}return dOe(t,e),oOe(t,[{key:"render",value:function(){return p.createElement(hOe,this.props)}}])}(p.Component);hq(ra,"displayName","YAxis");hq(ra,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function NR(e){return vOe(e)||gOe(e)||pOe(e)||mOe()}function mOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pOe(e,t){if(e){if(typeof e=="string")return Ik(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ik(e,t)}}function gOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vOe(e){if(Array.isArray(e))return Ik(e)}function Ik(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rk=function(t,n,r,a,s){var o=Yi(t,vA),l=Yi(t,c0),c=[].concat(NR(o),NR(l)),u=Yi(t,d0),f="".concat(a,"Id"),d=a[0],h=n;if(c.length&&(h=c.reduce(function(v,x){if(x.props[f]===r&&Cs(x.props,"extendDomain")&&Ve(x.props[d])){var y=x.props[d];return[Math.min(v[0],y),Math.max(v[1],y)]}return v},h)),u.length){var m="".concat(d,"1"),g="".concat(d,"2");h=u.reduce(function(v,x){if(x.props[f]===r&&Cs(x.props,"extendDomain")&&Ve(x.props[m])&&Ve(x.props[g])){var y=x.props[m],b=x.props[g];return[Math.min(v[0],y,b),Math.max(v[1],y,b)]}return v},h)}return s&&s.length&&(h=s.reduce(function(v,x){return Ve(x)?[Math.min(v[0],x),Math.max(v[1],x)]:v},h)),h},pq={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function s(c,u,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var m=new a(f,d||c,h),g=n?n+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,m=d.length,g=new Array(m);h<m;h++)g[h]=d[h].fn;return g},l.prototype.listenerCount=function(u){var f=n?n+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,h,m,g){var v=n?n+u:u;if(!this._events[v])return!1;var x=this._events[v],y=arguments.length,b,w;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,d),!0;case 4:return x.fn.call(x.context,f,d,h),!0;case 5:return x.fn.call(x.context,f,d,h,m),!0;case 6:return x.fn.call(x.context,f,d,h,m,g),!0}for(w=1,b=new Array(y-1);w<y;w++)b[w-1]=arguments[w];x.fn.apply(x.context,b)}else{var k=x.length,_;for(w=0;w<k;w++)switch(x[w].once&&this.removeListener(u,x[w].fn,void 0,!0),y){case 1:x[w].fn.call(x[w].context);break;case 2:x[w].fn.call(x[w].context,f);break;case 3:x[w].fn.call(x[w].context,f,d);break;case 4:x[w].fn.call(x[w].context,f,d,h);break;default:if(!b)for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];x[w].fn.apply(x[w].context,b)}}return!0},l.prototype.on=function(u,f,d){return s(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return s(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,h){var m=n?n+u:u;if(!this._events[m])return this;if(!f)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===f&&(!h||g.once)&&(!d||g.context===d)&&o(this,m);else{for(var v=0,x=[],y=g.length;v<y;v++)(g[v].fn!==f||h&&!g[v].once||d&&g[v].context!==d)&&x.push(g[v]);x.length?this._events[m]=x.length===1?x[0]:x:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(pq);var xOe=pq.exports;const yOe=un(xOe);var fj=new yOe,hj="recharts.syncMouseEvents";function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}function bOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gq(r.key),r)}}function jOe(e,t,n){return t&&wOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mj(e,t,n){return t=gq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gq(e){var t=_Oe(e,"string");return Xm(t)=="symbol"?t:t+""}function _Oe(e,t){if(Xm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kOe=function(){function e(){bOe(this,e),mj(this,"activeIndex",0),mj(this,"coordinateList",[]),mj(this,"layout","horizontal")}return jOe(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,s=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,f=n.offset,d=f===void 0?null:f,h=n.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=s+c+u,h=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function SOe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&Ve(r)&&Ve(a))return!0}return!1}function NOe(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function vq(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,s=e.endAngle,o=Tr(t,n,r,a),l=Tr(t,n,r,s);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:a,endAngle:s}}function COe(e,t,n){var r,a,s,o;if(e==="horizontal")r=t.x,s=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,s=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,h=Tr(l,c,u,d),m=Tr(l,c,f,d);r=h.x,a=h.y,s=m.x,o=m.y}else return vq(t);return[{x:r,y:a},{x:s,y:o}]}function Jm(e){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}function CR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $g(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CR(Object(n),!0).forEach(function(r){AOe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function AOe(e,t,n){return t=EOe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EOe(e){var t=POe(e,"string");return Jm(t)=="symbol"?t:t+""}function POe(e,t){if(Jm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TOe(e){var t,n,r=e.element,a=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,h=e.chartName,m=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!s||!o||h!=="ScatterChart"&&a!=="axis")return null;var g,v=kI;if(h==="ScatterChart")g=o,v=WAe;else if(h==="BarChart")g=NOe(d,o,c,f),v=uA;else if(d==="radial"){var x=vq(o),y=x.cx,b=x.cy,w=x.radius,k=x.startAngle,_=x.endAngle;g={cx:y,cy:b,startAngle:k,endAngle:_,innerRadius:w,outerRadius:w},v=j8}else g={points:COe(d,o,c)},v=kI;var j=$g($g($g($g({stroke:"#ccc",pointerEvents:"none"},c),g),rn(m,!1)),{},{payload:l,payloadIndex:u,className:Zt("recharts-tooltip-cursor",m.className)});return p.isValidElement(m)?p.cloneElement(m,j):p.createElement(v,j)}var OOe=["item"],IOe=["children","className","width","height","style","compact","title","desc"];function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function Hu(){return Hu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hu.apply(this,arguments)}function AR(e,t){return DOe(e)||MOe(e,t)||yq(e,t)||ROe()}function ROe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MOe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,s,o,l=[],c=!0,u=!1;try{if(s=(n=n.call(e)).next,t!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,a=f}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function DOe(e){if(Array.isArray(e))return e}function ER(e,t){if(e==null)return{};var n=$Oe(e,t),r,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $Oe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function LOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FOe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bq(r.key),r)}}function BOe(e,t,n){return t&&FOe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UOe(e,t,n){return t=ry(t),zOe(e,xq()?Reflect.construct(t,n||[],ry(e).constructor):t.apply(e,n))}function zOe(e,t){if(t&&(Xd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qOe(e)}function qOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xq=function(){return!!e})()}function ry(e){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ry(e)}function WOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mk(e,t)}function Mk(e,t){return Mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Mk(e,t)}function Jd(e){return KOe(e)||VOe(e)||yq(e)||HOe()}function HOe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yq(e,t){if(e){if(typeof e=="string")return Dk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dk(e,t)}}function VOe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KOe(e){if(Array.isArray(e))return Dk(e)}function Dk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function PR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PR(Object(n),!0).forEach(function(r){bt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bt(e,t,n){return t=bq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bq(e){var t=GOe(e,"string");return Xd(t)=="symbol"?t:t+""}function GOe(e,t){if(Xd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YOe={xAxis:["bottom","top"],yAxis:["left","right"]},XOe={width:"100%",height:"100%"},wq={x:0,y:0};function Lg(e){return e}var JOe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},QOe=function(t,n,r,a){var s=n.find(function(f){return f&&f.index===r});if(s){if(t==="horizontal")return{x:s.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:s.coordinate};if(t==="centric"){var o=s.coordinate,l=a.radius;return we(we(we({},a),Tr(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=a.angle;return we(we(we({},a),Tr(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return wq},f0=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,s=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Jd(l),Jd(u)):l},[]);return o.length>0?o:t&&t.length&&Ve(a)&&Ve(s)?t.slice(a,s+1):[]};function jq(e){return e==="number"?[0,"auto"]:void 0}var $k=function(t,n,r,a){var s=t.graphicalItems,o=t.tooltipAxis,l=f0(n,t);return r<0||!s||!s.length||r>=l.length?null:s.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:n;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=d===void 0?l:d;h=p_(m,o.dataKey,a)}else h=d&&d[r]||l[r];return h?[].concat(Jd(c),[y8(u,h)]):c},[])},TR=function(t,n,r,a){var s=a||{x:t.chartX,y:t.chartY},o=JOe(s,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=NSe(o,l,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,h=$k(t,n,f,d),m=QOe(r,l,f,s);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:m}}return null},ZOe=function(t,n){var r=n.axes,a=n.graphicalItems,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.layout,d=t.children,h=t.stackOffset,m=g8(f,s);return r.reduce(function(g,v){var x,y=v.type.defaultProps!==void 0?we(we({},v.type.defaultProps),v.props):v.props,b=y.type,w=y.dataKey,k=y.allowDataOverflow,_=y.allowDuplicatedCategory,j=y.scale,S=y.ticks,A=y.includeHidden,C=y[o];if(g[C])return g;var T=f0(t.data,{graphicalItems:a.filter(function(D){var R,K=o in D.props?D.props[o]:(R=D.type.defaultProps)===null||R===void 0?void 0:R[o];return K===C}),dataStartIndex:c,dataEndIndex:u}),M=T.length,F,E,I;SOe(y.domain,k,b)&&(F=nk(y.domain,null,k),m&&(b==="number"||j!=="auto")&&(I=Ah(T,w,"category")));var P=jq(b);if(!F||F.length===0){var B,O=(B=y.domain)!==null&&B!==void 0?B:P;if(w){if(F=Ah(T,w,b),b==="category"&&m){var $=mfe(F);_&&$?(E=F,F=Hx(0,M)):_||(F=dI(O,F,v).reduce(function(D,R){return D.indexOf(R)>=0?D:[].concat(Jd(D),[R])},[]))}else if(b==="category")_?F=F.filter(function(D){return D!==""&&!an(D)}):F=dI(O,F,v).reduce(function(D,R){return D.indexOf(R)>=0||R===""||an(R)?D:[].concat(Jd(D),[R])},[]);else if(b==="number"){var L=TSe(T,a.filter(function(D){var R,K,Q=o in D.props?D.props[o]:(R=D.type.defaultProps)===null||R===void 0?void 0:R[o],H="hide"in D.props?D.props.hide:(K=D.type.defaultProps)===null||K===void 0?void 0:K.hide;return Q===C&&(A||!H)}),w,s,f);L&&(F=L)}m&&(b==="number"||j!=="auto")&&(I=Ah(T,w,"category"))}else m?F=Hx(0,M):l&&l[C]&&l[C].hasStack&&b==="number"?F=h==="expand"?[0,1]:x8(l[C].stackGroups,c,u):F=p8(T,a.filter(function(D){var R=o in D.props?D.props[o]:D.type.defaultProps[o],K="hide"in D.props?D.props.hide:D.type.defaultProps.hide;return R===C&&(A||!K)}),b,f,!0);if(b==="number")F=Rk(d,F,C,s,S),O&&(F=nk(O,F,k));else if(b==="category"&&O){var N=O,U=F.every(function(D){return N.indexOf(D)>=0});U&&(F=N)}}return we(we({},g),{},bt({},C,we(we({},y),{},{axisType:s,domain:F,categoricalDomain:I,duplicateDomain:E,originalDomain:(x=y.domain)!==null&&x!==void 0?x:P,isCategorical:m,layout:f})))},{})},eIe=function(t,n){var r=n.graphicalItems,a=n.Axis,s=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.layout,d=t.children,h=f0(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=h.length,g=g8(f,s),v=-1;return r.reduce(function(x,y){var b=y.type.defaultProps!==void 0?we(we({},y.type.defaultProps),y.props):y.props,w=b[o],k=jq("number");if(!x[w]){v++;var _;return g?_=Hx(0,m):l&&l[w]&&l[w].hasStack?(_=x8(l[w].stackGroups,c,u),_=Rk(d,_,w,s)):(_=nk(k,p8(h,r.filter(function(j){var S,A,C=o in j.props?j.props[o]:(S=j.type.defaultProps)===null||S===void 0?void 0:S[o],T="hide"in j.props?j.props.hide:(A=j.type.defaultProps)===null||A===void 0?void 0:A.hide;return C===w&&!T}),"number",f),a.defaultProps.allowDataOverflow),_=Rk(d,_,w,s)),we(we({},x),{},bt({},w,we(we({axisType:s},a.defaultProps),{},{hide:!0,orientation:vi(YOe,"".concat(s,".").concat(v%2),null),domain:_,originalDomain:k,isCategorical:g,layout:f})))}return x},{})},tIe=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,s=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,f=t.children,d="".concat(a,"Id"),h=Yi(f,s),m={};return h&&h.length?m=ZOe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=eIe(t,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},nIe=function(t){var n=Go(t),r=eo(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:DC(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Dx(n,r)}},OR=function(t){var n=t.children,r=t.defaultShowTooltip,a=Ua(n,zd),s=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},rIe=function(t){return!t||!t.length?!1:t.some(function(n){var r=io(n&&n.type);return r&&r.indexOf("Bar")>=0})},IR=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},aIe=function(t,n){var r=t.props,a=t.graphicalItems,s=t.xAxisMap,o=s===void 0?{}:s,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,f=r.height,d=r.children,h=r.margin||{},m=Ua(d,zd),g=Ua(d,ui),v=Object.keys(c).reduce(function(_,j){var S=c[j],A=S.orientation;return!S.mirror&&!S.hide?we(we({},_),{},bt({},A,_[A]+S.width)):_},{left:h.left||0,right:h.right||0}),x=Object.keys(o).reduce(function(_,j){var S=o[j],A=S.orientation;return!S.mirror&&!S.hide?we(we({},_),{},bt({},A,vi(_,"".concat(A))+S.height)):_},{top:h.top||0,bottom:h.bottom||0}),y=we(we({},x),v),b=y.bottom;m&&(y.bottom+=m.props.height||zd.defaultProps.height),g&&n&&(y=ESe(y,a,r,n));var w=u-y.left-y.right,k=f-y.top-y.bottom;return we(we({brushBottom:b},y),{},{width:Math.max(w,0),height:Math.max(k,0)})},iIe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},sIe=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,s=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,h=function(y,b){var w=b.graphicalItems,k=b.stackGroups,_=b.offset,j=b.updateId,S=b.dataStartIndex,A=b.dataEndIndex,C=y.barSize,T=y.layout,M=y.barGap,F=y.barCategoryGap,E=y.maxBarSize,I=IR(T),P=I.numericAxisName,B=I.cateAxisName,O=rIe(w),$=[];return w.forEach(function(L,N){var U=f0(y.data,{graphicalItems:[L],dataStartIndex:S,dataEndIndex:A}),D=L.type.defaultProps!==void 0?we(we({},L.type.defaultProps),L.props):L.props,R=D.dataKey,K=D.maxBarSize,Q=D["".concat(P,"Id")],H=D["".concat(B,"Id")],V={},ie=c.reduce(function(Ne,ze){var at=b["".concat(ze.axisType,"Map")],pt=D["".concat(ze.axisType,"Id")];at&&at[pt]||ze.axisType==="zAxis"||zc();var _t=at[pt];return we(we({},Ne),{},bt(bt({},ze.axisType,_t),"".concat(ze.axisType,"Ticks"),eo(_t)))},V),G=ie[B],le=ie["".concat(B,"Ticks")],se=k&&k[Q]&&k[Q].hasStack&&qSe(L,k[Q].stackGroups),Z=io(L.type).indexOf("Bar")>=0,_e=Dx(G,le),z=[],q=O&&CSe({barSize:C,stackGroups:k,totalSize:iIe(ie,B)});if(Z){var ce,ke,Ae=an(K)?E:K,Pe=(ce=(ke=Dx(G,le,!0))!==null&&ke!==void 0?ke:Ae)!==null&&ce!==void 0?ce:0;z=ASe({barGap:M,barCategoryGap:F,bandSize:Pe!==_e?Pe:_e,sizeList:q[H],maxBarSize:Ae}),Pe!==_e&&(z=z.map(function(Ne){return we(we({},Ne),{},{position:we(we({},Ne.position),{},{offset:Ne.position.offset-Pe/2})})}))}var Ie=L&&L.type&&L.type.getComposedData;Ie&&$.push({props:we(we({},Ie(we(we({},ie),{},{displayedData:U,props:y,dataKey:R,item:L,bandSize:_e,barPosition:z,offset:_,stackedData:se,layout:T,dataStartIndex:S,dataEndIndex:A}))),{},bt(bt(bt({key:L.key||"item-".concat(N)},P,ie[P]),B,ie[B]),"animationId",j)),childIndex:Nfe(L,y.children),item:L})}),$},m=function(y,b){var w=y.props,k=y.dataStartIndex,_=y.dataEndIndex,j=y.updateId;if(!i2({props:w}))return null;var S=w.children,A=w.layout,C=w.stackOffset,T=w.data,M=w.reverseStackOrder,F=IR(A),E=F.numericAxisName,I=F.cateAxisName,P=Yi(S,r),B=BSe(T,P,"".concat(E,"Id"),"".concat(I,"Id"),C,M),O=c.reduce(function(D,R){var K="".concat(R.axisType,"Map");return we(we({},D),{},bt({},K,tIe(w,we(we({},R),{},{graphicalItems:P,stackGroups:R.axisType===E&&B,dataStartIndex:k,dataEndIndex:_}))))},{}),$=aIe(we(we({},O),{},{props:w,graphicalItems:P}),b==null?void 0:b.legendBBox);Object.keys(O).forEach(function(D){O[D]=f(w,O[D],$,D.replace("Map",""),n)});var L=O["".concat(I,"Map")],N=nIe(L),U=h(w,we(we({},O),{},{dataStartIndex:k,dataEndIndex:_,updateId:j,graphicalItems:P,stackGroups:B,offset:$}));return we(we({formattedGraphicalItems:U,graphicalItems:P,offset:$,stackGroups:B},N),O)},g=function(x){function y(b){var w,k,_;return LOe(this,y),_=UOe(this,y,[b]),bt(_,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),bt(_,"accessibilityManager",new kOe),bt(_,"handleLegendBBoxUpdate",function(j){if(j){var S=_.state,A=S.dataStartIndex,C=S.dataEndIndex,T=S.updateId;_.setState(we({legendBBox:j},m({props:_.props,dataStartIndex:A,dataEndIndex:C,updateId:T},we(we({},_.state),{},{legendBBox:j}))))}}),bt(_,"handleReceiveSyncEvent",function(j,S,A){if(_.props.syncId===j){if(A===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(S)}}),bt(_,"handleBrushChange",function(j){var S=j.startIndex,A=j.endIndex;if(S!==_.state.dataStartIndex||A!==_.state.dataEndIndex){var C=_.state.updateId;_.setState(function(){return we({dataStartIndex:S,dataEndIndex:A},m({props:_.props,dataStartIndex:S,dataEndIndex:A,updateId:C},_.state))}),_.triggerSyncEvent({dataStartIndex:S,dataEndIndex:A})}}),bt(_,"handleMouseEnter",function(j){var S=_.getMouseInfo(j);if(S){var A=we(we({},S),{},{isTooltipActive:!0});_.setState(A),_.triggerSyncEvent(A);var C=_.props.onMouseEnter;Mt(C)&&C(A,j)}}),bt(_,"triggeredAfterMouseMove",function(j){var S=_.getMouseInfo(j),A=S?we(we({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(A),_.triggerSyncEvent(A);var C=_.props.onMouseMove;Mt(C)&&C(A,j)}),bt(_,"handleItemMouseEnter",function(j){_.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),bt(_,"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),bt(_,"handleMouseMove",function(j){j.persist(),_.throttleTriggeredAfterMouseMove(j)}),bt(_,"handleMouseLeave",function(j){_.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};_.setState(S),_.triggerSyncEvent(S);var A=_.props.onMouseLeave;Mt(A)&&A(S,j)}),bt(_,"handleOuterEvent",function(j){var S=Sfe(j),A=vi(_.props,"".concat(S));if(S&&Mt(A)){var C,T;/.*touch.*/i.test(S)?T=_.getMouseInfo(j.changedTouches[0]):T=_.getMouseInfo(j),A((C=T)!==null&&C!==void 0?C:{},j)}}),bt(_,"handleClick",function(j){var S=_.getMouseInfo(j);if(S){var A=we(we({},S),{},{isTooltipActive:!0});_.setState(A),_.triggerSyncEvent(A);var C=_.props.onClick;Mt(C)&&C(A,j)}}),bt(_,"handleMouseDown",function(j){var S=_.props.onMouseDown;if(Mt(S)){var A=_.getMouseInfo(j);S(A,j)}}),bt(_,"handleMouseUp",function(j){var S=_.props.onMouseUp;if(Mt(S)){var A=_.getMouseInfo(j);S(A,j)}}),bt(_,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),bt(_,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&_.handleMouseDown(j.changedTouches[0])}),bt(_,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&_.handleMouseUp(j.changedTouches[0])}),bt(_,"handleDoubleClick",function(j){var S=_.props.onDoubleClick;if(Mt(S)){var A=_.getMouseInfo(j);S(A,j)}}),bt(_,"handleContextMenu",function(j){var S=_.props.onContextMenu;if(Mt(S)){var A=_.getMouseInfo(j);S(A,j)}}),bt(_,"triggerSyncEvent",function(j){_.props.syncId!==void 0&&fj.emit(hj,_.props.syncId,j,_.eventEmitterSymbol)}),bt(_,"applySyncEvent",function(j){var S=_.props,A=S.layout,C=S.syncMethod,T=_.state.updateId,M=j.dataStartIndex,F=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)_.setState(we({dataStartIndex:M,dataEndIndex:F},m({props:_.props,dataStartIndex:M,dataEndIndex:F,updateId:T},_.state)));else if(j.activeTooltipIndex!==void 0){var E=j.chartX,I=j.chartY,P=j.activeTooltipIndex,B=_.state,O=B.offset,$=B.tooltipTicks;if(!O)return;if(typeof C=="function")P=C($,j);else if(C==="value"){P=-1;for(var L=0;L<$.length;L++)if($[L].value===j.activeLabel){P=L;break}}var N=we(we({},O),{},{x:O.left,y:O.top}),U=Math.min(E,N.x+N.width),D=Math.min(I,N.y+N.height),R=$[P]&&$[P].value,K=$k(_.state,_.props.data,P),Q=$[P]?{x:A==="horizontal"?$[P].coordinate:U,y:A==="horizontal"?D:$[P].coordinate}:wq;_.setState(we(we({},j),{},{activeLabel:R,activeCoordinate:Q,activePayload:K,activeTooltipIndex:P}))}else _.setState(j)}),bt(_,"renderCursor",function(j){var S,A=_.state,C=A.isTooltipActive,T=A.activeCoordinate,M=A.activePayload,F=A.offset,E=A.activeTooltipIndex,I=A.tooltipAxisBandSize,P=_.getTooltipEventType(),B=(S=j.props.active)!==null&&S!==void 0?S:C,O=_.props.layout,$=j.key||"_recharts-cursor";return X.createElement(TOe,{key:$,activeCoordinate:T,activePayload:M,activeTooltipIndex:E,chartName:n,element:j,isActive:B,layout:O,offset:F,tooltipAxisBandSize:I,tooltipEventType:P})}),bt(_,"renderPolarAxis",function(j,S,A){var C=vi(j,"type.axisType"),T=vi(_.state,"".concat(C,"Map")),M=j.type.defaultProps,F=M!==void 0?we(we({},M),j.props):j.props,E=T&&T[F["".concat(C,"Id")]];return p.cloneElement(j,we(we({},E),{},{className:Zt(C,E.className),key:j.key||"".concat(S,"-").concat(A),ticks:eo(E,!0)}))}),bt(_,"renderPolarGrid",function(j){var S=j.props,A=S.radialLines,C=S.polarAngles,T=S.polarRadius,M=_.state,F=M.radiusAxisMap,E=M.angleAxisMap,I=Go(F),P=Go(E),B=P.cx,O=P.cy,$=P.innerRadius,L=P.outerRadius;return p.cloneElement(j,{polarAngles:Array.isArray(C)?C:eo(P,!0).map(function(N){return N.coordinate}),polarRadius:Array.isArray(T)?T:eo(I,!0).map(function(N){return N.coordinate}),cx:B,cy:O,innerRadius:$,outerRadius:L,key:j.key||"polar-grid",radialLines:A})}),bt(_,"renderLegend",function(){var j=_.state.formattedGraphicalItems,S=_.props,A=S.children,C=S.width,T=S.height,M=_.props.margin||{},F=C-(M.left||0)-(M.right||0),E=h8({children:A,formattedGraphicalItems:j,legendWidth:F,legendContent:u});if(!E)return null;var I=E.item,P=ER(E,OOe);return p.cloneElement(I,we(we({},P),{},{chartWidth:C,chartHeight:T,margin:M,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),bt(_,"renderTooltip",function(){var j,S=_.props,A=S.children,C=S.accessibilityLayer,T=Ua(A,Jn);if(!T)return null;var M=_.state,F=M.isTooltipActive,E=M.activeCoordinate,I=M.activePayload,P=M.activeLabel,B=M.offset,O=(j=T.props.active)!==null&&j!==void 0?j:F;return p.cloneElement(T,{viewBox:we(we({},B),{},{x:B.left,y:B.top}),active:O,label:P,payload:O?I:[],coordinate:E,accessibilityLayer:C})}),bt(_,"renderBrush",function(j){var S=_.props,A=S.margin,C=S.data,T=_.state,M=T.offset,F=T.dataStartIndex,E=T.dataEndIndex,I=T.updateId;return p.cloneElement(j,{key:j.key||"_recharts-brush",onChange:Ig(_.handleBrushChange,j.props.onChange),data:C,x:Ve(j.props.x)?j.props.x:M.left,y:Ve(j.props.y)?j.props.y:M.top+M.height+M.brushBottom-(A.bottom||0),width:Ve(j.props.width)?j.props.width:M.width,startIndex:F,endIndex:E,updateId:"brush-".concat(I)})}),bt(_,"renderReferenceElement",function(j,S,A){if(!j)return null;var C=_,T=C.clipPathId,M=_.state,F=M.xAxisMap,E=M.yAxisMap,I=M.offset,P=j.type.defaultProps||{},B=j.props,O=B.xAxisId,$=O===void 0?P.xAxisId:O,L=B.yAxisId,N=L===void 0?P.yAxisId:L;return p.cloneElement(j,{key:j.key||"".concat(S,"-").concat(A),xAxis:F[$],yAxis:E[N],viewBox:{x:I.left,y:I.top,width:I.width,height:I.height},clipPathId:T})}),bt(_,"renderActivePoints",function(j){var S=j.item,A=j.activePoint,C=j.basePoint,T=j.childIndex,M=j.isRange,F=[],E=S.props.key,I=S.item.type.defaultProps!==void 0?we(we({},S.item.type.defaultProps),S.item.props):S.item.props,P=I.activeDot,B=I.dataKey,O=we(we({index:T,dataKey:B,cx:A.x,cy:A.y,r:4,fill:cA(S.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},rn(P,!1)),ox(P));return F.push(y.renderActiveDot(P,O,"".concat(E,"-activePoint-").concat(T))),C?F.push(y.renderActiveDot(P,we(we({},O),{},{cx:C.x,cy:C.y}),"".concat(E,"-basePoint-").concat(T))):M&&F.push(null),F}),bt(_,"renderGraphicChild",function(j,S,A){var C=_.filterFormatItem(j,S,A);if(!C)return null;var T=_.getTooltipEventType(),M=_.state,F=M.isTooltipActive,E=M.tooltipAxis,I=M.activeTooltipIndex,P=M.activeLabel,B=_.props.children,O=Ua(B,Jn),$=C.props,L=$.points,N=$.isRange,U=$.baseLine,D=C.item.type.defaultProps!==void 0?we(we({},C.item.type.defaultProps),C.item.props):C.item.props,R=D.activeDot,K=D.hide,Q=D.activeBar,H=D.activeShape,V=!!(!K&&F&&O&&(R||Q||H)),ie={};T!=="axis"&&O&&O.props.trigger==="click"?ie={onClick:Ig(_.handleItemMouseEnter,j.props.onClick)}:T!=="axis"&&(ie={onMouseLeave:Ig(_.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:Ig(_.handleItemMouseEnter,j.props.onMouseEnter)});var G=p.cloneElement(j,we(we({},C.props),ie));function le(ze){return typeof E.dataKey=="function"?E.dataKey(ze.payload):null}if(V)if(I>=0){var se,Z;if(E.dataKey&&!E.allowDuplicatedCategory){var _e=typeof E.dataKey=="function"?le:"payload.".concat(E.dataKey.toString());se=p_(L,_e,P),Z=N&&U&&p_(U,_e,P)}else se=L==null?void 0:L[I],Z=N&&U&&U[I];if(H||Q){var z=j.props.activeIndex!==void 0?j.props.activeIndex:I;return[p.cloneElement(j,we(we(we({},C.props),ie),{},{activeIndex:z})),null,null]}if(!an(se))return[G].concat(Jd(_.renderActivePoints({item:C,activePoint:se,basePoint:Z,childIndex:I,isRange:N})))}else{var q,ce=(q=_.getItemByXY(_.state.activeCoordinate))!==null&&q!==void 0?q:{graphicalItem:G},ke=ce.graphicalItem,Ae=ke.item,Pe=Ae===void 0?j:Ae,Ie=ke.childIndex,Ne=we(we(we({},C.props),ie),{},{activeIndex:Ie});return[p.cloneElement(Pe,Ne),null,null]}return N?[G,null,null]:[G,null]}),bt(_,"renderCustomized",function(j,S,A){return p.cloneElement(j,we(we({key:"recharts-customized-".concat(A)},_.props),_.state))}),bt(_,"renderMap",{CartesianGrid:{handler:Lg,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:Lg},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:Lg},YAxis:{handler:Lg},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:Bb("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=f6(_.triggeredAfterMouseMove,(k=b.throttleDelay)!==null&&k!==void 0?k:1e3/60),_.state={},_}return WOe(y,x),BOe(y,[{key:"componentDidMount",value:function(){var w,k;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(k=this.props.margin.top)!==null&&k!==void 0?k:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,k=w.children,_=w.data,j=w.height,S=w.layout,A=Ua(k,Jn);if(A){var C=A.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,M=$k(this.state,_,C,T),F=this.state.tooltipTicks[C].coordinate,E=(this.state.offset.top+j)/2,I=S==="horizontal",P=I?{x:F,y:E}:{y:F,x:E},B=this.state.formattedGraphicalItems.find(function($){var L=$.item;return L.type.name==="Scatter"});B&&(P=we(we({},P),B.props.points[C].tooltipPosition),M=B.props.points[C].tooltipPayload);var O={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:T,activePayload:M,activeCoordinate:P};this.setState(O),this.renderCursor(A),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,k){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==k.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var _,j;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0}})}return null}},{key:"componentDidUpdate",value:function(w){v_([Ua(w.children,Jn)],[Ua(this.props.children,Jn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Ua(this.props.children,Jn);if(w&&typeof w.props.shared=="boolean"){var k=w.props.shared?"axis":"item";return l.indexOf(k)>=0?k:s}return s}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var k=this.container,_=k.getBoundingClientRect(),j=Qwe(_),S={chartX:Math.round(w.pageX-j.left),chartY:Math.round(w.pageY-j.top)},A=_.width/k.offsetWidth||1,C=this.inRange(S.chartX,S.chartY,A);if(!C)return null;var T=this.state,M=T.xAxisMap,F=T.yAxisMap,E=this.getTooltipEventType(),I=TR(this.state,this.props.data,this.props.layout,C);if(E!=="axis"&&M&&F){var P=Go(M).scale,B=Go(F).scale,O=P&&P.invert?P.invert(S.chartX):null,$=B&&B.invert?B.invert(S.chartY):null;return we(we({},S),{},{xValue:O,yValue:$},I)}return I?we(we({},S),I):null}},{key:"inRange",value:function(w,k){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=this.props.layout,S=w/_,A=k/_;if(j==="horizontal"||j==="vertical"){var C=this.state.offset,T=S>=C.left&&S<=C.left+C.width&&A>=C.top&&A<=C.top+C.height;return T?{x:S,y:A}:null}var M=this.state,F=M.angleAxisMap,E=M.radiusAxisMap;if(F&&E){var I=Go(F);return mI({x:S,y:A},I)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,k=this.getTooltipEventType(),_=Ua(w,Jn),j={};_&&k==="axis"&&(_.props.trigger==="click"?j={onClick:this.handleClick}:j={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=ox(this.props,this.handleOuterEvent);return we(we({},S),j)}},{key:"addListener",value:function(){fj.on(hj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){fj.removeListener(hj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,k,_){for(var j=this.state.formattedGraphicalItems,S=0,A=j.length;S<A;S++){var C=j[S];if(C.item===w||C.props.key===w.key||k===io(C.item.type)&&_===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,k=this.state.offset,_=k.left,j=k.top,S=k.height,A=k.width;return X.createElement("defs",null,X.createElement("clipPath",{id:w},X.createElement("rect",{x:_,y:j,height:S,width:A})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(k,_){var j=AR(_,2),S=j[0],A=j[1];return we(we({},k),{},bt({},S,A.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(k,_){var j=AR(_,2),S=j[0],A=j[1];return we(we({},k),{},bt({},S,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var k;return(k=this.state.xAxisMap)===null||k===void 0||(k=k[w])===null||k===void 0?void 0:k.scale}},{key:"getYScaleByAxisId",value:function(w){var k;return(k=this.state.yAxisMap)===null||k===void 0||(k=k[w])===null||k===void 0?void 0:k.scale}},{key:"getItemByXY",value:function(w){var k=this.state,_=k.formattedGraphicalItems,j=k.activeItem;if(_&&_.length)for(var S=0,A=_.length;S<A;S++){var C=_[S],T=C.props,M=C.item,F=M.type.defaultProps!==void 0?we(we({},M.type.defaultProps),M.props):M.props,E=io(M.type);if(E==="Bar"){var I=(T.data||[]).find(function($){return RAe(w,$)});if(I)return{graphicalItem:C,payload:I}}else if(E==="RadialBar"){var P=(T.data||[]).find(function($){return mI(w,$)});if(P)return{graphicalItem:C,payload:P}}else if(i0(C,j)||s0(C,j)||Hm(C,j)){var B=$Ee({graphicalItem:C,activeTooltipItem:j,itemData:F.data}),O=F.activeIndex===void 0?B:F.activeIndex;return{graphicalItem:we(we({},C),{},{childIndex:O}),payload:Hm(C,j)?F.data[B]:C.props.data[B]}}}return null}},{key:"render",value:function(){var w=this;if(!i2(this))return null;var k=this.props,_=k.children,j=k.className,S=k.width,A=k.height,C=k.style,T=k.compact,M=k.title,F=k.desc,E=ER(k,IOe),I=rn(E,!1);if(T)return X.createElement(hR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement(y_,Hu({},I,{width:S,height:A,title:M,desc:F}),this.renderClipPath(),o2(_,this.renderMap)));if(this.props.accessibilityLayer){var P,B;I.tabIndex=(P=this.props.tabIndex)!==null&&P!==void 0?P:0,I.role=(B=this.props.role)!==null&&B!==void 0?B:"application",I.onKeyDown=function($){w.accessibilityManager.keyboardEvent($)},I.onFocus=function(){w.accessibilityManager.focus()}}var O=this.parseEventsOfWrapper();return X.createElement(hR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},X.createElement("div",Hu({className:Zt("recharts-wrapper",j),style:we({position:"relative",cursor:"default",width:S,height:A},C)},O,{ref:function(L){w.container=L}}),X.createElement(y_,Hu({},I,{width:S,height:A,title:M,desc:F,style:XOe}),this.renderClipPath(),o2(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(p.Component);bt(g,"displayName",n),bt(g,"defaultProps",we({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),bt(g,"getDerivedStateFromProps",function(x,y){var b=x.dataKey,w=x.data,k=x.children,_=x.width,j=x.height,S=x.layout,A=x.stackOffset,C=x.margin,T=y.dataStartIndex,M=y.dataEndIndex;if(y.updateId===void 0){var F=OR(x);return we(we(we({},F),{},{updateId:0},m(we(we({props:x},F),{},{updateId:0}),y)),{},{prevDataKey:b,prevData:w,prevWidth:_,prevHeight:j,prevLayout:S,prevStackOffset:A,prevMargin:C,prevChildren:k})}if(b!==y.prevDataKey||w!==y.prevData||_!==y.prevWidth||j!==y.prevHeight||S!==y.prevLayout||A!==y.prevStackOffset||!id(C,y.prevMargin)){var E=OR(x),I={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},P=we(we({},TR(y,w,S)),{},{updateId:y.updateId+1}),B=we(we(we({},E),I),P);return we(we(we({},B),m(we({props:x},B),y)),{},{prevDataKey:b,prevData:w,prevWidth:_,prevHeight:j,prevLayout:S,prevStackOffset:A,prevMargin:C,prevChildren:k})}if(!v_(k,y.prevChildren)){var O,$,L,N,U=Ua(k,zd),D=U&&(O=($=U.props)===null||$===void 0?void 0:$.startIndex)!==null&&O!==void 0?O:T,R=U&&(L=(N=U.props)===null||N===void 0?void 0:N.endIndex)!==null&&L!==void 0?L:M,K=D!==T||R!==M,Q=!an(w),H=Q&&!K?y.updateId:y.updateId+1;return we(we({updateId:H},m(we(we({props:x},y),{},{updateId:H,dataStartIndex:D,dataEndIndex:R}),y)),{},{prevChildren:k,dataStartIndex:D,dataEndIndex:R})}return null}),bt(g,"renderActiveDot",function(x,y,b){var w;return p.isValidElement(x)?w=p.cloneElement(x,y):Mt(x)?w=x(y):w=X.createElement(I8,y),X.createElement(wr,{className:"recharts-active-dot",key:b},w)});var v=p.forwardRef(function(y,b){return X.createElement(g,Hu({},y,{ref:b}))});return v.displayName=g.displayName,v},si=sIe({chartName:"BarChart",GraphicalChild:Ln,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:na},{axisType:"yAxis",AxisComp:ra}],formatAxisMap:lTe});const oIe=[{name:"Resolved by Human",value:15},{name:"Resolved by AI",value:85}],Nr=["#60a5fa","#2563eb","#1d4ed8","#10b981","#f59e0b","#ef4444"],yn=({label:e,description:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:t})})]})]});function lIe(){p.useMemo(()=>Nr.slice(0,oIe.length),[]),_r();const[e,t]=p.useState(""),[n,r]=p.useState(""),[a,s]=p.useState([]),[o,l]=p.useState(0),[c,u]=p.useState(0),[f,d]=p.useState({total:0,ai:0,rate:0,handover:0,handover_rate:0}),[h,m]=p.useState("all"),[g,v]=p.useState([]),[x,y]=p.useState([]),[b,w]=p.useState(!1),[k,_]=p.useState([]),[j,S]=p.useState([]),[A,C]=p.useState([]),[T,M]=p.useState({input:0,output:0,total:0}),[F,E]=p.useState([]),[I,P]=p.useState([]),[B,O]=p.useState([]),[$,L]=p.useState("all"),[N,U]=p.useState([]),[D,R]=p.useState(null),[K,Q]=p.useState(null),[H,V]=p.useState([]),[ie,G]=p.useState(null),le=z=>{if(!z||z.trim().length===0)return"(unspecified)";if(z.startsWith("other:"))return z.replace(/^other:/,"Other: ");switch(z){case"ambiguous":return"Ambiguous intent";case"payment":return"Payment-related";case"policy":return"Policy/compliance";default:return z}},se=()=>{const z=new Date,q=n?new Date(n):z,ce=e?new Date(e):new Date(z.getTime()-29*24*60*60*1e3),ke=new Date(Date.UTC(ce.getUTCFullYear(),ce.getUTCMonth(),ce.getUTCDate(),0,0,0)),Ae=new Date(Date.UTC(q.getUTCFullYear(),q.getUTCMonth(),q.getUTCDate()+1,0,0,0));return{start:ke.toISOString(),end:Ae.toISOString()}},Z=async()=>{const{start:z,end:q}=se(),{data:ce}=await wt.rpc("get_channel_chat_counts",{p_from:z,p_to:q});s((ce||[]).map(ze=>({provider:ze.provider,display_name:ze.display_name,thread_count:Number(ze.thread_count||0)})));const{data:ke}=await wt.rpc("get_response_time_stats",{p_from:z,p_to:q,p_channel:h!=="all"?h:null});if(ke&&ke.length>0){const ze=ke[0];l(Number(ze.ai_avg||0)),u(Number(ze.agent_avg||0))}const{data:Ae,error:Pe}=await wt.rpc("get_containment_and_handover",{p_from:z,p_to:q});if(!Pe&&Ae&&Ae.length>0){const ze=Ae[0];d({total:Number(ze.total_threads||0),ai:Number(ze.ai_resolved_count||0),rate:Number(ze.containment_rate||0),handover:Number(ze.handover_count||0),handover_rate:Number(ze.handover_rate||0)})}else if(Pe&&Pe.code==="PGRST202"){const{data:ze}=await wt.rpc("get_containment",{p_from:z,p_to:q});let at=0,pt=0,_t=0,re=0,pe=0;if(ze&&ze.length>0){const oe=ze[0];at=Number(oe.total_threads||0),pt=Number(oe.ai_resolved_count||0),_t=Number(oe.rate||0)}const{data:He}=await wt.rpc("get_handover_stats",{p_from:z,p_to:q}),Ue=(He||[]).reduce((oe,ct)=>oe+Number(ct.count||0),0);re=Ue,pe=at>0?Ue/at:0,d({total:at,ai:pt,rate:_t,handover:re,handover_rate:pe})}const{data:Ie}=await wt.rpc("get_chats_timeseries",{p_from:z,p_to:q,p_channel:h!=="all"?h:null});v((Ie||[]).map(ze=>({bucket:ze.bucket,provider:ze.provider,count:Number(ze.count||0)})));const{data:Ne}=await wt.rpc("get_handover_stats",{p_from:z,p_to:q});y((Ne||[]).map(ze=>({reason:le(ze.reason)||"(unspecified)",count:Number(ze.count||0),total:Number(ze.total||0),rate:Number(ze.rate||0)})));try{const{data:ze}=await ae.from("token_usage_logs").select("made_at, prompt_tokens, completion_tokens, total_tokens, model, channel_id").gte("made_at",z).lt("made_at",q).order("made_at",{ascending:!0}),at={},pt={};let _t=0,re=0,pe=0;for(const oe of ze||[]){const ct=new Date(oe.made_at).toISOString().slice(0,10),Pt=Number(oe.prompt_tokens||0),kt=Number(oe.completion_tokens||0),Xe=Number(oe.total_tokens||Pt+kt);at[ct]||(at[ct]={input:0,output:0,total:0}),at[ct].input+=Pt,at[ct].output+=kt,at[ct].total+=Xe;const ye=String(oe.model||"unknown");pt[ye]=(pt[ye]||0)+Xe,_t+=Pt,re+=kt,pe+=Xe}const He=Object.keys(at).sort().map(oe=>({day:oe,...at[oe]})),Ue=Object.entries(pt).sort((oe,ct)=>ct[1]-oe[1]).slice(0,8).map(([oe,ct])=>({model:oe,tokens:ct}));S(He),C(Ue),M({input:_t,output:re,total:pe})}catch{}try{const{data:ze}=await wt.rpc("get_handover_by_super_agent",{p_from:z,p_to:q});E((ze||[]).map(re=>({super_agent_id:re.super_agent_id,super_agent_name:re.super_agent_name,human_resolved:Number(re.human_resolved||0),ai_resolved:Number(re.ai_resolved||0),handover_rate:Number(re.handover_rate||0)})));const at=$!=="all"?$:null,[{data:pt},{data:_t}]=await Promise.all([wt.rpc("get_handover_by_agent",{p_from:z,p_to:q,p_super_agent_id:at}),wt.rpc("get_agent_kpis",{p_from:z,p_to:q,p_super_agent_id:at})]);P((pt||[]).map(re=>({agent_user_id:re.agent_user_id,agent_name:re.agent_name,super_agent_id:re.super_agent_id,human_resolved:Number(re.human_resolved||0),ai_resolved:Number(re.ai_resolved||0),handover_rate:Number(re.handover_rate||0)}))),O((_t||[]).map(re=>({agent_user_id:re.agent_user_id,agent_name:re.agent_name,resolved_count:Number(re.resolved_count||0),avg_resolution_minutes:re.avg_resolution_minutes!=null?Number(re.avg_resolution_minutes):null})))}catch{}},_e=async()=>{try{const{data:z,error:q}=await wt.rpc("get_database_stats_detailed");if(q){console.error("Error fetching database stats:",q);return}z&&(console.log("Database stats fetched:",z.length,"tables"),U(z.map(Ne=>({tablename:Ne.tablename,total_size_bytes:Number(Ne.total_size_bytes||0),total_size_pretty:Ne.total_size_pretty||"0 bytes",table_size_bytes:Number(Ne.table_size_bytes||0),table_size_pretty:Ne.table_size_pretty||"0 bytes",indexes_size_bytes:Number(Ne.indexes_size_bytes||0),indexes_size_pretty:Ne.indexes_size_pretty||"0 bytes",row_count:Number(Ne.row_count||0),dead_rows:Number(Ne.dead_rows||0),sequential_scans:Number(Ne.sequential_scans||0),index_scans:Number(Ne.index_scans||0),table_scan_ratio:Number(Ne.table_scan_ratio||0),last_vacuum:Ne.last_vacuum||null,last_autovacuum:Ne.last_autovacuum||null,last_analyze:Ne.last_analyze||null,last_autoanalyze:Ne.last_autoanalyze||null,inserts:Number(Ne.inserts||0),updates:Number(Ne.updates||0),deletes:Number(Ne.deletes||0),hot_updates:Number(Ne.hot_updates||0)}))));const{data:ce,error:ke}=await wt.rpc("get_database_overview");if(ke&&console.error("Error fetching database overview:",ke),ce&&ce.length>0){console.log("Database overview fetched:",ce);const Ne=ce[0];R({total_size_bytes:Number(Ne.total_size_bytes||0),total_size_pretty:Ne.total_size_pretty||"0 bytes",data_size_bytes:Number(Ne.data_size_bytes||0),data_size_pretty:Ne.data_size_pretty||"0 bytes",indexes_size_bytes:Number(Ne.indexes_size_bytes||0),indexes_size_pretty:Ne.indexes_size_pretty||"0 bytes",total_tables:Number(Ne.total_tables||0),total_rows:Number(Ne.total_rows||0),total_indexes:Number(Ne.total_indexes||0),total_sequences:Number(Ne.total_sequences||0)})}const{data:Ae}=await wt.rpc("get_database_memory_stats");if(Ae&&Ae.length>0){const Ne=Ae[0];Q({shared_buffers_hit:Number(Ne.shared_buffers_hit||0),shared_buffers_read:Number(Ne.shared_buffers_read||0),shared_buffers_hit_ratio:Number(Ne.shared_buffers_hit_ratio||0),cache_hit_ratio:Number(Ne.cache_hit_ratio||0),heap_hit_ratio:Number(Ne.heap_hit_ratio||0),idx_scan_ratio:Number(Ne.idx_scan_ratio||0),total_sequential_scans:Number(Ne.total_sequential_scans||0),total_index_scans:Number(Ne.total_index_scans||0)})}const{data:Pe}=await wt.rpc("get_index_stats");Pe&&V(Pe.map(Ne=>({tablename:Ne.tablename,indexname:Ne.indexname,index_size_bytes:Number(Ne.index_size_bytes||0),index_size_pretty:Ne.index_size_pretty||"0 bytes",index_scans:Number(Ne.index_scans||0),index_tup_reads:Number(Ne.index_tup_reads||0),index_tup_fetches:Number(Ne.index_tup_fetches||0),idx_blks_hit:Number(Ne.idx_blks_hit||0),idx_blks_read:Number(Ne.idx_blks_read||0)})));const{data:Ie}=await wt.rpc("get_database_activity");if(Ie&&Ie.length>0){const Ne=Ie[0];G({total_inserts:Number(Ne.total_inserts||0),total_updates:Number(Ne.total_updates||0),total_deletes:Number(Ne.total_deletes||0),total_sequential_scans:Number(Ne.total_sequential_scans||0),total_index_scans:Number(Ne.total_index_scans||0),total_blocks_hit:Number(Ne.total_blocks_hit||0),total_blocks_read:Number(Ne.total_blocks_read||0),cache_hit_percentage:Number(Ne.cache_hit_percentage||0)})}}catch(z){console.error("Failed to fetch database stats:",z),U([]),R(null),Q(null),V([]),G(null)}};return p.useEffect(()=>{(()=>{Z(),_e()})()},[e,n,h]),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Analytics"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"High-level KPIs for conversations, AI agents, and human agents."})]}),i.jsxs("div",{className:"flex items-end gap-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"From"}),i.jsx(Ye,{type:"date",value:e,max:n||new Date().toISOString().slice(0,10),onChange:z=>{const q=z.target.value;t(q),n&&q&&q>n&&r(q)},className:"h-9 w-[180px]"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"To"}),i.jsx(Ye,{type:"date",value:n,min:e||void 0,max:new Date().toISOString().slice(0,10),onChange:z=>{const q=z.target.value;r(q),e&&q&&q<e&&t(q)},className:"h-9 w-[180px]"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Channel"}),i.jsxs(Ht,{value:h,onValueChange:async z=>{m(z);try{await Bt({action:"analytics.channel_filter",resource:"analytics",context:{channel:z}})}catch{}},children:[i.jsx(Ut,{className:"h-9 w-[180px]",children:i.jsx(Dt,{placeholder:"All"})}),i.jsxs(zt,{children:[i.jsx(Ge,{value:"all",children:"All"}),i.jsx(Ge,{value:"whatsapp",children:"WhatsApp"}),i.jsx(Ge,{value:"web",children:"Web"}),i.jsx(Ge,{value:"telegram",children:"Telegram"})]})]})]}),i.jsx(te,{variant:"outline",className:"h-9",onClick:()=>{Z(),_e()},children:"Refresh"})]}),i.jsxs(wl,{defaultValue:"conversation",className:"w-full mt-4",children:[i.jsxs(go,{className:"grid w-full max-w-2xl grid-cols-5 bg-muted/50 p-1",children:[i.jsx(Kn,{value:"conversation",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("span",{children:"Conversation"})}),i.jsx(fe,{children:i.jsx("p",{children:"Lihat analitik percakapan dan KPI"})})]})}),i.jsx(Kn,{value:"ai-agent",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("span",{children:"AI Agent"})}),i.jsx(fe,{children:i.jsx("p",{children:"Lihat metrik kinerja agen AI"})})]})}),i.jsx(Kn,{value:"human-agent",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("span",{children:"Human Agent"})}),i.jsx(fe,{children:i.jsx("p",{children:"Lihat metrik kinerja agen manusia"})})]})}),i.jsx(Kn,{value:"database",className:"data-[state=active]:bg-white data-[state=active]:text-black data-[state=inactive]:text-muted-foreground data-[state=inactive]:bg-transparent data-[state=inactive]:hover:bg-muted/30",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("span",{children:"Database"})}),i.jsx(fe,{children:i.jsx("p",{children:"Lihat statistik penggunaan database dan ukuran tabel"})})]})})]}),i.jsxs(Mn,{value:"conversation",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Total Chats",description:"Jumlah total percakapan yang terjadi dalam periode yang dipilih"})})}),i.jsx(et,{children:i.jsx("div",{className:"text-2xl font-semibold",children:f.total})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"AI Containment Rate",description:"Persentase percakapan yang berhasil diselesaikan oleh AI tanpa perlu intervensi manusia. Semakin tinggi semakin baik."})})}),i.jsxs(et,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Math.round(f.rate*100),"%"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.ai," / ",f.total]}),i.jsx(te,{variant:"outline",className:"mt-2 h-8",onClick:async()=>{w(!0);const{start:z,end:q}=se(),{data:ce}=await wt.rpc("get_non_contained",{p_from:z,p_to:q,p_limit:100,p_offset:0});_(ce||[])},children:"View non-contained"})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Handover Rate",description:"Persentase percakapan yang dialihkan dari AI ke agen manusia karena memerlukan intervensi manual"})})}),i.jsxs(et,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Math.round(f.handover_rate*100),"%"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.handover," / ",f.total]})]})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Chats per Channel",description:"Distribusi jumlah percakapan berdasarkan saluran komunikasi (WhatsApp, Telegram, Web Chat, dll)"})})}),i.jsx(et,{className:"h-64",children:i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:a.map(z=>({name:z.display_name||z.provider,count:z.thread_count})),children:[i.jsx(na,{dataKey:"name"}),i.jsx(ra,{}),i.jsx(Jn,{}),i.jsx(Ln,{dataKey:"count",fill:Nr[2],radius:[4,4,0,0],children:i.jsx(Vi,{dataKey:"count",position:"top"})})]})})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Chats Time Series (Asia/Jakarta)",description:"Grafik tren jumlah percakapan dari waktu ke waktu dalam zona waktu Asia/Jakarta, dikelompokkan berdasarkan saluran"})})}),i.jsx(et,{className:"h-64",children:i.jsx(ii,{width:"100%",height:"100%",children:(()=>{const z=Array.from(new Set(g.map(ke=>ke.provider))),ce=Array.from(new Set(g.map(ke=>ke.bucket))).sort().map(ke=>{var Pe;const Ae={bucket:new Date(ke).toLocaleDateString("en-US",{timeZone:"Asia/Jakarta"})};for(const Ie of z)Ae[Ie]=((Pe=g.find(Ne=>Ne.bucket===ke&&Ne.provider===Ie))==null?void 0:Pe.count)||0;return Ae});return i.jsxs(si,{data:ce,children:[i.jsx(na,{dataKey:"bucket"}),i.jsx(ra,{}),i.jsx(Jn,{}),i.jsx(ui,{}),z.map((ke,Ae)=>i.jsx(Ln,{dataKey:ke,stackId:void 0,fill:Nr[Ae%(Nr.length-1)+1]},ke))]})})()})})]})]}),i.jsxs(Mn,{value:"ai-agent",className:"space-y-6",children:[i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"AI Token Usage (by day)",description:"Penggunaan token AI per hari, menunjukkan token input (prompt) dan output (completion). Token adalah unit penggunaan untuk menghitung biaya AI"})})}),i.jsxs(et,{className:"h-64",children:[i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:j.map(z=>({day:new Date(z.day).toLocaleDateString("en-US",{timeZone:"Asia/Jakarta"}),input:z.input,output:z.output})),children:[i.jsx(na,{dataKey:"day"}),i.jsx(ra,{}),i.jsx(Jn,{}),i.jsx(ui,{}),i.jsx(Ln,{dataKey:"input",stackId:"tokens",fill:Nr[1],name:"Prompt tokens"}),i.jsx(Ln,{dataKey:"output",stackId:"tokens",fill:Nr[2],name:"Completion tokens"})]})}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Total tokens: ",T.total.toLocaleString()," (input ",T.input.toLocaleString(),", output ",T.output.toLocaleString(),")"]})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Top Models by Tokens",description:"Model AI yang paling banyak menggunakan token, diurutkan berdasarkan total penggunaan. Membantu mengidentifikasi model mana yang paling banyak digunakan"})})}),i.jsx(et,{className:"h-64",children:i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:A.map(z=>({name:z.model,tokens:z.tokens})),layout:"vertical",children:[i.jsx(na,{type:"number"}),i.jsx(ra,{type:"category",dataKey:"name",width:160}),i.jsx(Jn,{}),i.jsx(Ln,{dataKey:"tokens",fill:Nr[4],radius:[0,4,4,0],children:i.jsx(Vi,{dataKey:"tokens",position:"right"})})]})})})]})]}),i.jsxs(Mn,{value:"human-agent",className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Super Agent"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Filter untuk melihat metrik agen yang berada di bawah super agent tertentu. Pilih 'All' untuk melihat semua agen"})})]})]}),i.jsxs(Ht,{value:$,onValueChange:z=>L(z),children:[i.jsx(Ut,{className:"w-[220px] h-9",children:i.jsx(Dt,{placeholder:"All"})}),i.jsxs(zt,{children:[i.jsx(Ge,{value:"all",children:"All"}),F.map(z=>i.jsx(Ge,{value:String(z.super_agent_id||"none"),children:z.super_agent_name||""},z.super_agent_id||"none"))]})]}),i.jsx(te,{variant:"outline",className:"h-9",onClick:Z,children:"Apply"})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Agent KPIs",description:"Key Performance Indicators untuk setiap agen manusia: jumlah percakapan yang diselesaikan dan waktu rata-rata penyelesaian (dalam menit)"})})}),i.jsx(et,{className:"h-64",children:i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:B.map(z=>({name:z.agent_name||"",resolved:z.resolved_count,avgMin:Math.round(z.avg_resolution_minutes||0)})),children:[i.jsx(na,{dataKey:"name"}),i.jsx(ra,{}),i.jsx(Jn,{}),i.jsx(ui,{}),i.jsx(Ln,{dataKey:"resolved",name:"Resolved",fill:Nr[3],radius:[4,4,0,0]}),i.jsx(Ln,{dataKey:"avgMin",name:"Avg Resolution (min)",fill:Nr[5],radius:[4,4,0,0]})]})})})]})]}),i.jsxs(Mn,{value:"database",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Total Database Size",description:"Total ukuran database termasuk semua tabel, indeks, dan metadata dalam format yang mudah dibaca"})})}),i.jsxs(et,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:(D==null?void 0:D.total_size_pretty)||"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Data: ",(D==null?void 0:D.data_size_pretty)||""," | Indexes: ",(D==null?void 0:D.indexes_size_pretty)||""]})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Total Tables",description:"Jumlah total tabel yang ada di database public schema"})})}),i.jsx(et,{children:i.jsx("div",{className:"text-2xl font-semibold",children:(D==null?void 0:D.total_tables)||0})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Total Rows",description:"Jumlah total baris data di semua tabel database"})})}),i.jsx(et,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((D==null?void 0:D.total_rows)||0).toLocaleString()})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Total Indexes",description:"Jumlah total indeks yang ada di database. Indeks membantu mempercepat query"})})}),i.jsx(et,{children:i.jsx("div",{className:"text-2xl font-semibold",children:(D==null?void 0:D.total_indexes)||0})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Cache Hit Ratio",description:"Persentase data yang ditemukan di cache memory. Semakin tinggi semakin baik (idealnya >95%). Menunjukkan efisiensi penggunaan memory"})})}),i.jsxs(et,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:K?`${(K.cache_hit_ratio*100).toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Hits: ",K?K.shared_buffers_hit.toLocaleString():""," | Reads: ",K?K.shared_buffers_read.toLocaleString():""]})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Index Scan Ratio",description:"Persentase scan yang menggunakan indeks dibanding sequential scan. Semakin tinggi semakin baik. Menunjukkan efektivitas indeks"})})}),i.jsxs(et,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:K?`${(K.idx_scan_ratio*100).toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Index: ",K?K.total_index_scans.toLocaleString():""," | Seq: ",K?K.total_sequential_scans.toLocaleString():""]})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Heap Hit Ratio",description:"Persentase hit pada heap (tabel data) di cache memory. Semakin tinggi semakin baik"})})}),i.jsx(et,{children:i.jsx("div",{className:"text-2xl font-semibold",children:K?`${(K.heap_hit_ratio*100).toFixed(2)}%`:"Loading..."})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Total Inserts",description:"Jumlah total operasi INSERT yang pernah dilakukan di semua tabel"})})}),i.jsx(et,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((ie==null?void 0:ie.total_inserts)||0).toLocaleString()})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Total Updates",description:"Jumlah total operasi UPDATE yang pernah dilakukan di semua tabel"})})}),i.jsx(et,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((ie==null?void 0:ie.total_updates)||0).toLocaleString()})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Total Deletes",description:"Jumlah total operasi DELETE yang pernah dilakukan di semua tabel"})})}),i.jsx(et,{children:i.jsx("div",{className:"text-2xl font-semibold",children:((ie==null?void 0:ie.total_deletes)||0).toLocaleString()})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Cache Hit %",description:"Persentase blok yang ditemukan di cache vs yang dibaca dari disk. Semakin tinggi semakin baik untuk performa"})})}),i.jsxs(et,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:ie?`${ie.cache_hit_percentage.toFixed(2)}%`:"Loading..."}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Hits: ",ie?ie.total_blocks_hit.toLocaleString():""," | Reads: ",ie?ie.total_blocks_read.toLocaleString():""]})]})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Table Sizes",description:"Ukuran total (termasuk indeks) untuk setiap tabel diurutkan dari yang terbesar. Membantu mengidentifikasi tabel yang memakan banyak ruang"})})}),i.jsx(et,{className:"h-64",children:N.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:N.slice(0,10).map(z=>({name:z.tablename,size:z.total_size_bytes/1024})),layout:"vertical",children:[i.jsx(na,{type:"number"}),i.jsx(ra,{type:"category",dataKey:"name",width:160}),i.jsx(Jn,{formatter:z=>`${z.toFixed(2)} KB`,labelFormatter:z=>`Table: ${z}`}),i.jsx(Ln,{dataKey:"size",fill:Nr[1],radius:[0,4,4,0],children:i.jsx(Vi,{dataKey:"size",position:"right",formatter:z=>`${z.toFixed(2)} KB`})})]})})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Row Counts by Table",description:"Jumlah baris data per tabel, diurutkan dari yang terbanyak. Menunjukkan tabel mana yang paling aktif menyimpan data"})})}),i.jsx(et,{className:"h-64",children:N.filter(z=>z.row_count>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:N.filter(z=>z.row_count>0).slice(0,10).map(z=>({name:z.tablename,rows:z.row_count})),layout:"vertical",children:[i.jsx(na,{type:"number"}),i.jsx(ra,{type:"category",dataKey:"name",width:160}),i.jsx(Jn,{}),i.jsx(Ln,{dataKey:"rows",fill:Nr[3],radius:[0,4,4,0],children:i.jsx(Vi,{dataKey:"rows",position:"right"})})]})})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Index Sizes (Top 15)",description:"Ukuran setiap indeks diurutkan dari yang terbesar. Indeks besar mungkin perlu dioptimasi"})})}),i.jsx(et,{className:"h-64",children:H.length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:H.slice(0,15).map(z=>({name:`${z.tablename}.${z.indexname}`.substring(0,30),size:z.index_size_bytes/1024,scans:z.index_scans})),layout:"vertical",children:[i.jsx(na,{type:"number"}),i.jsx(ra,{type:"category",dataKey:"name",width:200}),i.jsx(Jn,{formatter:(z,q)=>q==="size"?`${z.toFixed(2)} KB`:z.toLocaleString(),labelFormatter:z=>`Index: ${z}`}),i.jsx(ui,{}),i.jsx(Ln,{dataKey:"size",name:"Size (KB)",fill:Nr[1],radius:[0,4,4,0]})]})})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Table Activity (Top 10)",description:"Jumlah operasi INSERT, UPDATE, dan DELETE per tabel. Menunjukkan tabel mana yang paling aktif"})})}),i.jsx(et,{className:"h-64",children:N.filter(z=>z.inserts+z.updates+z.deletes>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:N.filter(z=>z.inserts+z.updates+z.deletes>0).slice(0,10).map(z=>({name:z.tablename,inserts:z.inserts,updates:z.updates,deletes:z.deletes})),layout:"vertical",children:[i.jsx(na,{type:"number"}),i.jsx(ra,{type:"category",dataKey:"name",width:160}),i.jsx(Jn,{}),i.jsx(ui,{}),i.jsx(Ln,{dataKey:"inserts",stackId:"activity",fill:Nr[2],name:"Inserts"}),i.jsx(Ln,{dataKey:"updates",stackId:"activity",fill:Nr[4],name:"Updates"}),i.jsx(Ln,{dataKey:"deletes",stackId:"activity",fill:Nr[5],name:"Deletes"})]})})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Table Scan Ratios",description:"Rasio sequential scan vs index scan per tabel. Sequential scan tinggi menunjukkan perlu indeks yang lebih baik"})})}),i.jsx(et,{className:"h-64",children:N.filter(z=>z.sequential_scans+z.index_scans>0).length===0?i.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No data available"}):i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:N.filter(z=>z.sequential_scans+z.index_scans>0).slice(0,10).map(z=>({name:z.tablename,seqRatio:Number((z.table_scan_ratio*100).toFixed(1)),idxRatio:Number(((1-z.table_scan_ratio)*100).toFixed(1))})),layout:"vertical",children:[i.jsx(na,{type:"number",domain:[0,100]}),i.jsx(ra,{type:"category",dataKey:"name",width:160}),i.jsx(Jn,{formatter:z=>`${z}%`}),i.jsx(ui,{}),i.jsx(Ln,{dataKey:"seqRatio",stackId:"scan",fill:Nr[5],name:"Seq Scan %"}),i.jsx(Ln,{dataKey:"idxRatio",stackId:"scan",fill:Nr[3],name:"Index Scan %"})]})})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Comprehensive Table Statistics",description:"Rincian lengkap setiap tabel: ukuran, baris, statistik scan, operasi DML, dan informasi maintenance"})})}),i.jsx(et,{children:i.jsx("div",{className:"max-h-96 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2 px-2 sticky left-0 bg-background",children:"Table"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Total Size"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Rows"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Dead Rows"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Inserts"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Updates"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Deletes"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Seq Scans"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Idx Scans"}),i.jsx("th",{className:"text-left py-2 px-2",children:"Last Vacuum"})]})}),i.jsx("tbody",{children:N.slice(0,25).map(z=>i.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[i.jsx("td",{className:"py-2 px-2 font-medium sticky left-0 bg-background",children:z.tablename}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.total_size_pretty}),i.jsx("td",{className:"py-2 px-2 text-right",children:z.row_count.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.dead_rows>0?i.jsx("span",{className:"text-orange-600",children:z.dead_rows.toLocaleString()}):"0"}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.inserts.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.updates.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.deletes.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.sequential_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.index_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-left text-xs text-muted-foreground",children:z.last_vacuum?new Date(z.last_vacuum).toLocaleDateString():z.last_autovacuum?`Auto: ${new Date(z.last_autovacuum).toLocaleDateString()}`:"Never"})]},z.tablename))})]})})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:i.jsx(yn,{label:"Index Statistics",description:"Statistik lengkap setiap indeks: ukuran, jumlah scan, dan performa cache. Membantu mengidentifikasi indeks yang tidak digunakan atau perlu dioptimasi"})})}),i.jsx(et,{children:i.jsx("div",{className:"max-h-96 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b",children:[i.jsx("th",{className:"text-left py-2 px-2 sticky left-0 bg-background",children:"Table"}),i.jsx("th",{className:"text-left py-2 px-2",children:"Index"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Size"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Scans"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Tuples Read"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Tuples Fetched"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Cache Hits"}),i.jsx("th",{className:"text-right py-2 px-2",children:"Cache Reads"})]})}),i.jsx("tbody",{children:H.slice(0,30).map((z,q)=>i.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[i.jsx("td",{className:"py-2 px-2 font-medium sticky left-0 bg-background",children:z.tablename}),i.jsx("td",{className:"py-2 px-2 font-mono text-xs",children:z.indexname}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.index_size_pretty}),i.jsx("td",{className:"py-2 px-2 text-right",children:z.index_scans.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.index_tup_reads.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.index_tup_fetches.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.idx_blks_hit.toLocaleString()}),i.jsx("td",{className:"py-2 px-2 text-right text-muted-foreground",children:z.idx_blks_read.toLocaleString()})]},q))})]})})})]})]})]}),i.jsx(fn,{open:b,onOpenChange:w,children:i.jsxs(on,{className:"max-w-3xl",children:[i.jsx(ln,{children:i.jsx(cn,{children:"Non-contained Conversations"})}),i.jsx("div",{className:"max-h-80 overflow-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left py-2",children:"Time"}),i.jsx("th",{className:"text-left py-2",children:"Contact"}),i.jsx("th",{className:"text-left py-2",children:"Handover Reason"}),i.jsx("th",{className:"text-left py-2",children:"Status"})]})}),i.jsx("tbody",{children:k.map(z=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-1",children:new Date(z.created_at).toLocaleString()}),i.jsx("td",{className:"py-1",children:z.contact_name}),i.jsx("td",{className:"py-1",children:z.handover_reason||"(none)"}),i.jsx("td",{className:"py-1",children:z.status})]},z.id))})]})})]})})]})}var h0="Switch",[cIe,R3e]=kr(h0),[uIe,dIe]=cIe(h0),_q=p.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:u,form:f,...d}=e,[h,m]=p.useState(null),g=Nt(t,w=>m(w)),v=p.useRef(!1),x=h?f||!!h.closest("form"):!0,[y,b]=Ia({prop:a,defaultProp:s??!1,onChange:u,caller:h0});return i.jsxs(uIe,{scope:n,checked:y,disabled:l,children:[i.jsx(Qe.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":Cq(y),"data-disabled":l?"":void 0,disabled:l,value:c,...d,ref:g,onClick:De(e.onClick,w=>{b(k=>!k),x&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),x&&i.jsx(Nq,{control:h,bubbles:!v.current,name:r,value:c,checked:y,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});_q.displayName=h0;var kq="SwitchThumb",Sq=p.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=dIe(kq,n);return i.jsx(Qe.span,{"data-state":Cq(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});Sq.displayName=kq;var fIe="SwitchBubbleInput",Nq=p.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},s)=>{const o=p.useRef(null),l=Nt(o,s),c=oC(n),u=uN(t);return p.useEffect(()=>{const f=o.current;if(!f)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(c!==n&&m){const g=new Event("click",{bubbles:r});m.call(f,n),f.dispatchEvent(g)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Nq.displayName=fIe;function Cq(e){return e?"checked":"unchecked"}var Aq=_q,hIe=Sq;const kl=p.forwardRef(({className:e,...t},n)=>i.jsx(Aq,{className:Se("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:i.jsx(hIe,{className:Se("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));kl.displayName=Aq.displayName;var m0="Collapsible",[mIe,Eq]=kr(m0),[pIe,bA]=mIe(m0),Pq=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:s,onOpenChange:o,...l}=e,[c,u]=Ia({prop:r,defaultProp:a??!1,onChange:o,caller:m0});return i.jsx(pIe,{scope:n,disabled:s,contentId:ar(),open:c,onOpenToggle:p.useCallback(()=>u(f=>!f),[u]),children:i.jsx(Qe.div,{"data-state":kA(c),"data-disabled":s?"":void 0,...l,ref:t})})});Pq.displayName=m0;var Tq="CollapsibleTrigger",wA=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=bA(Tq,n);return i.jsx(Qe.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":kA(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:De(e.onClick,a.onOpenToggle)})});wA.displayName=Tq;var jA="CollapsibleContent",_A=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=bA(jA,e.__scopeCollapsible);return i.jsx(pr,{present:n||a.open,children:({present:s})=>i.jsx(gIe,{...r,ref:t,present:s})})});_A.displayName=jA;var gIe=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...s}=e,o=bA(jA,n),[l,c]=p.useState(r),u=p.useRef(null),f=Nt(t,u),d=p.useRef(0),h=d.current,m=p.useRef(0),g=m.current,v=o.open||l,x=p.useRef(v),y=p.useRef(void 0);return p.useEffect(()=>{const b=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(b)},[]),Yn(()=>{const b=u.current;if(b){y.current=y.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const w=b.getBoundingClientRect();d.current=w.height,m.current=w.width,x.current||(b.style.transitionDuration=y.current.transitionDuration,b.style.animationName=y.current.animationName),c(r)}},[o.open,r]),i.jsx(Qe.div,{"data-state":kA(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...s,ref:f,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:v&&a})});function kA(e){return e?"open":"closed"}var Oq=Pq,vIe=wA,xIe=_A;const RR=Oq,MR=wA,DR=_A,Iq=e=>{const[t,n]=p.useState(!0),[r,a]=p.useState(!1),[s,o]=p.useState(null),[l,c]=p.useState(null),u=async()=>{try{if(n(!0),c(null),e){const{data:m,error:g}=await ae.from("ai_profiles").select("*").eq("id",e).single();if(g)throw g;m&&o(m)}else o(null)}catch(m){console.error("Error fetching AI profile:",m),c(m instanceof Error?m.message:"Failed to fetch profile")}finally{n(!1)}},f=async m=>{try{if(a(!0),c(null),s!=null&&s.id){const{error:g}=await ae.from("ai_profiles").update(m).eq("id",s.id);try{await Bt({action:"ai_profile.update",resource:"ai_profile",resourceId:s.id,context:m})}catch{}if(g)throw g}else{const{data:g,error:v}=await ae.from("ai_profiles").insert([{...m,org_id:"00000000-0000-0000-0000-000000000001"}]).select().single();if(v)throw v;g&&o(g);try{await Bt({action:"ai_profile.create",resource:"ai_profile",resourceId:(g==null?void 0:g.id)??null,context:m})}catch{}}await u()}catch(g){console.error("Error saving AI profile:",g),c(g instanceof Error?g.message:"Failed to save profile")}finally{a(!1)}},d=async m=>{try{n(!0),c(null);const{data:g,error:v}=await ae.from("ai_profiles").select("*").eq("org_id",m||"00000000-0000-0000-0000-000000000001").order("created_at",{ascending:!1});if(v)throw v;return g}catch(g){return console.error("Error fetching AI profiles:",g),c(g instanceof Error?g.message:"Failed to fetch profiles"),[]}finally{n(!1)}},h=async m=>{try{a(!0),c(null);const{error:g}=await ae.from("ai_profiles").delete().eq("id",m);try{await Bt({action:"ai_profile.delete",resource:"ai_profile",resourceId:m})}catch{}if(g)throw g}catch(g){throw console.error("Error deleting AI profile:",g),c(g instanceof Error?g.message:"Failed to delete profile"),g}finally{a(!1)}};return p.useEffect(()=>{e?u():n(!1)},[e]),{profile:s,loading:t,saving:r,error:l,fetchProfile:u,saveProfile:f,fetchAllProfiles:d,deleteProfile:h}},yIe={Conservative:.3,Balanced:.5,Creative:.7};function Rq(e,t=.5){if(!e)return t;const n=e.trim();return yIe[n]??t}const bIe="00000000-0000-0000-0000-000000000001",wIe=({welcomeMessage:e,systemPrompt:t,modelDisplay:n,profile:r,profileId:a,modelName:s,temperature:o,transfer_conditions:l})=>{const c=r==null?void 0:r.response_temperature,u=c?Rq(c,o||.5):o||.5,[f,d]=p.useState([]);p.useEffect(()=>{d([{id:"1",content:e||"Halo!  Selamat datang di Okbang Top Up Center~",sender:"ai",timestamp:new Date}])},[e]);const[h,m]=p.useState(""),[g,v]=p.useState(!1),[x,y]=p.useState(!0),[b,w]=p.useState(""),k=p.useRef(null),_=p.useRef(null);p.useEffect(()=>{(()=>{const F=Date.now(),E=Math.random().toString(36).substring(2,15),I=`session_${F}_${E}`;w(I),console.log("Generated session ID:",I)})()},[]);const j=()=>{_.current&&(_.current.scrollTop=_.current.scrollHeight)};p.useEffect(()=>{j()},[f]);const S=async()=>{if(!h.trim()||g)return;const M={id:Date.now().toString(),content:h,sender:"user",timestamp:new Date};d(F=>[...F,M]),m(""),v(!0);try{const F={message:h,model:s,temperature:u,session_id:b,timestamp:new Date().toISOString(),ai_profile_id:(r==null?void 0:r.id)||a};console.log("Sending request to API:",F);const E=await Ca(Gn.ENDPOINTS.AI_AGENT.CHAT_TEST,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)});if(!E.ok)throw new Error(`HTTP error! status: ${E.status}`);const I=await E.json();console.log("API Response:",I);const P={id:(Date.now()+1).toString(),content:I.output||"Sorry, I couldn't process your message.",sender:"ai",timestamp:new Date};d(B=>[...B,P]),Fe.success("Message sent successfully!"),y(!0)}catch(F){console.error("Error sending message:",F),Fe.error("Failed to send message"),y(!1);const E={id:(Date.now()+1).toString(),content:"Sorry, I'm having trouble connecting right now. Please try again later.",sender:"ai",timestamp:new Date};d(I=>[...I,E])}finally{v(!1)}},A=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),S())},C=()=>{d([{id:"1",content:e||"Halo!  Selamat datang di Okbang Top Up Center~",sender:"ai",timestamp:new Date}]),Fe.info("Chat history cleared")},T=()=>{const M=Date.now(),F=Math.random().toString(36).substring(2,15),E=`session_${M}_${F}`;w(E),d([{id:"1",content:e||"Halo!  Selamat datang di Okbang Top Up Center~",sender:"ai",timestamp:new Date}]),Fe.success("Session refreshed! New session ID: "+E),console.log("New session ID:",E)};return i.jsxs(Me,{className:"flex flex-col h-[600px] border-2 border-primary/20",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 border-b bg-primary/5",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center",children:i.jsx(UL,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("span",{className:"font-medium",children:"AI Agent Chat"}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Model: ",n,"  Temp: ",c||"Legacy"," (",u,i.jsx("span",{className:`ml-2 px-1 rounded text-xs ${x?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x?"Connected":"Disconnected"})]}),b&&i.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Session: ",b.substring(0,20),"..."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[g&&i.jsx(Kt,{className:"w-4 h-4 animate-spin"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",onClick:T,"aria-label":"Refresh session",children:i.jsx(Py,{className:"w-4 h-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Segarkan sesi"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",onClick:C,"aria-label":"Clear chat history",children:i.jsx(JL,{className:"w-4 h-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Hapus riwayat chat"})})]})]})]}),i.jsxs("div",{ref:_,className:"flex-1 p-4 space-y-4 overflow-auto max-h-[400px]",children:[f.map(M=>i.jsx("div",{className:`flex ${M.sender==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${M.sender==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[i.jsx("p",{className:"text-sm whitespace-pre-wrap",children:M.content}),i.jsx("p",{className:"text-xs opacity-70 mt-1",children:M.timestamp.toLocaleTimeString()})]})},M.id)),g&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-muted p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Kt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{className:"text-sm",children:"AI is typing..."})]})})}),i.jsx("div",{ref:k})]}),i.jsxs("div",{className:"p-4 border-t bg-muted/30",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("textarea",{value:h,onChange:M=>m(M.target.value),onKeyPress:A,placeholder:"Type your message...",className:"flex-1 p-3 border rounded-lg text-sm resize-none focus:ring-2 focus:ring-primary/20",rows:2,disabled:g,title:g?"Please wait":void 0}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{size:"sm",onClick:S,disabled:!h.trim()||g,className:"px-4",children:i.jsx(Qh,{className:"w-4 h-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Kirim pesan ke agen AI"})})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:"Press Enter to send, Shift+Enter for new line"})]})]})},yu=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown",Fg=e=>e==null?"Pricing on request":`${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e>=1?2:3}).format(e)} / 1M`,jIe=({agentName:e,onBack:t,profileId:n,initialModelId:r})=>{var Ni,Ao,J,ge,rt;const[a,s]=p.useState("general"),[o,l]=p.useState("text"),[c,u]=p.useState({behavior:!0,welcome:!0,transfer:!1}),f=W=>{u(Y=>({...Y,[W]:!Y[W]}))},d=!n,{hasPermission:h,hasRole:m}=_r(),{user:g}=Xr(),v=m==null?void 0:m("master_agent"),x=m==null?void 0:m("super_agent"),y=h("ai_agent_files.manage")||h("ai_agent_files.create"),b=(W,Y,de)=>Number.isNaN(W)?Y:Math.min(de,Math.max(Y,W)),w=24e3,k=2e5,_=40,j=1e3,S=25,A=24*60,{profile:C,loading:T,saving:M,error:F,saveProfile:E}=Iq(n),[I,P]=p.useState((C==null?void 0:C.super_agent_id)??null),[B,O]=p.useState([]),[$,L]=p.useState(!1),[N,U]=p.useState(null);p.useEffect(()=>{C!=null&&C.super_agent_id?P(C.super_agent_id):x&&(g!=null&&g.id)?P(g.id):C!=null&&C.super_agent_id||P(null)},[C==null?void 0:C.super_agent_id,x,g==null?void 0:g.id]),p.useEffect(()=>{if(d&&!I)try{const W=localStorage.getItem("ai.new.super_agent_id");W&&(P(W),localStorage.removeItem("ai.new.super_agent_id"))}catch{}},[d,I]),p.useEffect(()=>{let W=!1;return(async()=>{try{L(!0),U(null);const{data:de,error:xe}=await ls.from("v_human_agents").select("user_id, agent_name, email, role_name").eq("org_id",(C==null?void 0:C.org_id)??bIe).ilike("role_name","%super%");if(xe)throw xe;if(W)return;const je=(de||[]).map(Oe=>({id:Oe.user_id,name:Oe.agent_name||Oe.email||String(Oe.user_id).slice(0,8)}));O(je),C!=null&&C.super_agent_id||(x&&(g!=null&&g.id)?P(g.id):je.length===1&&!x&&v&&P(je[0].id))}catch(de){W||U(de instanceof Error?de.message:"Failed to load super agents")}finally{W||L(!1)}})(),()=>{W=!0}},[C==null?void 0:C.org_id,C==null?void 0:C.super_agent_id,x,v,g==null?void 0:g.id]);const[D,R]=p.useState(d?"You are a helpful AI assistant for customer service. Be friendly, professional, and helpful. Always respond in Indonesian unless the customer speaks in another language.":(C==null?void 0:C.system_prompt)||""),[K,Q]=p.useState(d?"Halo!  Selamat datang! Ada yang bisa saya bantu hari ini?":(C==null?void 0:C.welcome_message)||""),[H,V]=p.useState(d?`Transfer to human agent when:
- Customer requests to speak with a human
- Complex technical issues arise
- Customer is dissatisfied or angry
- Payment or billing issues
- Escalation is needed`:(C==null?void 0:C.transfer_conditions)||""),[ie,G]=p.useState((C==null?void 0:C.stop_ai_after_handoff)??!0),[le,se]=p.useState([]),[Z,_e]=p.useState([]),[z,q]=p.useState(""),[ce,ke]=p.useState("");p.useState(()=>{const W=(C==null?void 0:C.temperature)??.3;return Math.max(0,Math.min(1,W))});const[Ae,Pe]=p.useState(""),[Ie,Ne]=p.useState(!!((C==null?void 0:C.enable_resolve)??!1)),[ze,at]=p.useState(""),[pt,_t]=p.useState(()=>b((C==null?void 0:C.read_file_limit)??3,0,S)),[re,pe]=p.useState((C==null?void 0:C.response_temperature)??"Balanced"),[He,Ue]=p.useState((C==null?void 0:C.message_await)??3),[oe,ct]=p.useState(""),Pt=W=>W.replace(/[^0-9]/g,""),kt=W=>{if(!W)return 0;const Y=parseInt(W,10);return Number.isNaN(Y)?0:Y};p.useEffect(()=>{(async()=>{var Y,de;try{const{data:xe,error:je}=await ls.from("ai_models").select("*").eq("is_active",!0).order("display_name",{ascending:!0});if(je)throw je;const Oe=xe||[],ht=Oe.filter(st=>(st.display_name||"").toLowerCase()!=="fallback"),xt=Oe.filter(st=>(st.display_name||"").toLowerCase()==="fallback");se(ht),_e(xt);const mt=(C==null?void 0:C.model_id)||r||"";z||(mt&&ht.some(st=>st.id===mt)?q(mt):ht.length>0&&q(((Y=ht[0])==null?void 0:Y.id)||"")),!ce&&xt.length>0&&ke(((de=xt[0])==null?void 0:de.id)||"")}catch(xe){console.error("Failed to load ai_models",xe)}})()},[C==null?void 0:C.id,r]),p.useEffect(()=>{!z&&(C!=null&&C.model_id)&&le.some(W=>W.id===C.model_id)&&q(C.model_id)},[le,C==null?void 0:C.model_id]),p.useEffect(()=>{if(!C)return;const W=C==null?void 0:C.auto_resolve_after_minutes;Pe(typeof W=="number"&&!Number.isNaN(W)?W.toString():"0");const Y=b((C==null?void 0:C.history_limit)??w,0,k);at(Y.toString());const de=b((C==null?void 0:C.message_limit)??j,0,j);ct(de.toString())},[C==null?void 0:C.id]);const Xe=le.find(W=>W.id===z)||null,ye=p.useMemo(()=>{const W=Xe==null?void 0:Xe.max_context_tokens;return typeof W=="number"&&W>0?b(W,0,k):k},[Xe==null?void 0:Xe.max_context_tokens]);p.useEffect(()=>{if(!ze)return;const W=parseInt(ze,10);Number.isNaN(W)||W>ye&&at(ye.toString())},[ze,ye]);const it=W=>{const Y=Pt(W);if(Y===""){Pe("");return}const de=b(parseInt(Y,10),0,A);Pe(de.toString())},$t=W=>{const Y=Pt(W);if(Y===""){at("");return}const de=b(parseInt(Y,10),0,ye);at(de.toString())},ue=W=>{const Y=Pt(W);if(Y===""){ct("");return}const de=b(parseInt(Y,10),0,j);ct(de.toString())},[We,ne]=p.useState([]),Ee=p.useRef(null),[be,Te]=p.useState(!1),ut=async()=>{const W=(C==null?void 0:C.id)??n;if(!W)throw new Error("Please save the AI Agent first before uploading files.");let Y=(C==null?void 0:C.org_id)??null;if(!Y){const{data:{user:de}}=await ls.auth.getUser();if(de){const{data:xe}=await ls.from("org_members").select("org_id").eq("user_id",de.id).limit(1).maybeSingle();Y=(xe==null?void 0:xe.org_id)??null}}if(!Y)throw new Error("Could not determine your organization. Please re-login or contact support.");return{orgId:Y,profileId:W}},ee=async(W,Y)=>{try{if(!y)throw new Error("You do not have permission to upload agent files.");const de=((W==null?void 0:W.type)||"").toLowerCase()==="application/pdf",xe=((W==null?void 0:W.name)||"").toLowerCase().endsWith(".pdf");if(!de&&!xe)throw new Error("Only PDF files are supported");const{orgId:je,profileId:Oe}=await ut(),ht=await W.arrayBuffer(),xt=await crypto.subtle.digest("SHA-256",ht),st=Array.from(new Uint8Array(xt)).map(Ci=>Ci.toString(16).padStart(2,"0")).join(""),xn=((W==null?void 0:W.name)||"file.pdf").replace(/[^a-zA-Z0-9_.-]/g,"").replace(/\.pdf$/i,""),Ct=`${st}_${xn}.pdf`,xr=`org_${je}/profile_${Oe}/${Ct}`,Tn=new FormData;Tn.append("file",W),Tn.append("file_name",W.name||"file.pdf"),Tn.append("org_id",je),Tn.append("profile_id",Oe),Tn.append("hashFile",st);const Dr=await Ca(Gn.ENDPOINTS.KNOWLEDGE.FILE_UPLOAD,{method:"POST",body:Tn});if(!Dr.ok){let Ci=`Upload failed (${Dr.status})`;try{const Ai=await Dr.json();Ci=(Ai==null?void 0:Ai.message)||Ci}catch{}throw new Error(Ci)}const $r=await Dr.json().catch(()=>({})),ga=($r==null?void 0:$r.document_id)||($r==null?void 0:$r.documentId)||void 0,On=String(($r==null?void 0:$r.status)||"").toLowerCase();if(On==="duplicate"){const Ci=new Error("duplicate");throw Ci.code="DUPLICATE_CONTENT",Ci}if(On!=="success")throw new Error(`Upload webhook returned unexpected status: ${On||"unknown"}`);let Xn=null;const{error:yt}=await ls.storage.from("ai-agent-files").upload(xr,W,{cacheControl:"31536000",contentType:"application/pdf",upsert:!1});if(yt&&!(typeof(yt==null?void 0:yt.message)=="string"&&/exists|duplicate|409/i.test(yt.message)))throw yt;const{data:In,error:gt}=await ls.storage.from("ai-agent-files").createSignedUrl(xr,60*60*24*7);return!gt&&(In!=null&&In.signedUrl)&&(Xn=In.signedUrl),{url:Xn||"",filePath:xr,documentId:ga}}catch(de){throw console.error("Error uploading file to Supabase:",de),new Error(`Failed to upload ${W.name}: ${(de==null?void 0:de.message)||"Unknown error"}`)}},ve=async()=>{try{Te(!0);const{orgId:W,profileId:Y}=await ut(),de=`org_${W}/profile_${Y}`,xe=`profile_${Y}`,je=async st=>{const{data:dt,error:xn}=await ls.storage.from("ai-agent-files").list(st,{limit:100});return xn?[]:(dt||[]).map(Ct=>({...Ct,__prefix:st}))},[Oe,ht]=await Promise.all([je(de),je(xe)]),xt=[...Oe,...ht];if(xt.length===0){ne([]);return}const mt=[];for(const st of xt){if(!st||!st.name)continue;const dt=String(st.name);if(dt.endsWith("/")||dt===".emptyFolderPlaceholder"||dt===".emptyfolderplaceholder")continue;const xn=`${st.__prefix}/${st.name}`,Ct=st.metadata&&typeof st.metadata.size<"u"?st.metadata.size:0,xr=typeof Ct=="number"?Ct:Number(Ct||0);let Tn="";const{data:Dr}=await ls.storage.from("ai-agent-files").createSignedUrl(xn,60*60*24*7);Tn=(Dr==null?void 0:Dr.signedUrl)||"",mt.push({id:Date.now()+Math.random(),name:st.name,size:xr,uploadedAt:st.updated_at||st.created_at||new Date().toISOString(),status:"ready",url:Tn,filePath:xn})}mt.sort((st,dt)=>new Date(dt.uploadedAt).getTime()-new Date(st.uploadedAt).getTime()),ne(mt)}catch(W){console.error("Failed to load knowledge files:",W)}finally{Te(!1)}};p.useEffect(()=>{o==="file"&&ve()},[o,C==null?void 0:C.id,n]);const Re=async W=>{const Y=Array.from(W.target.files||[]);if(Y.length===0)return;try{await ut()}catch(je){Fe.error((je==null?void 0:je.message)||"Unable to upload at this time"),Ee.current&&(Ee.current.value="");return}const de=new Date().toISOString(),xe=Y.map(je=>({id:Date.now()+Math.random(),name:je.name,size:je.size,uploadedAt:de,status:"uploading"}));ne(je=>[...xe,...je]);for(let je=0;je<Y.length;je++){const Oe=Y[je],ht=xe[je];try{const{url:xt,filePath:mt}=await ee(Oe,ht.id);ne(st=>st.map(dt=>dt.id===ht.id?{...dt,status:"ready",url:xt,filePath:mt}:dt)),Fe.success(`${Oe.name} uploaded successfully!`)}catch(xt){if(String((xt==null?void 0:xt.message)||"").toLowerCase().includes("duplicate")||(xt==null?void 0:xt.code)==="DUPLICATE_CONTENT"){ne(mt=>mt.map(st=>st.id===ht.id?{...st,status:"ready"}:st)),setTimeout(()=>{var mt,st;(st=(mt=ve())==null?void 0:mt.catch)==null||st.call(mt,()=>{})},0),Fe.info(`${Oe.name} already exists. Skipped re-upload.`);continue}ne(mt=>mt.map(st=>st.id===ht.id?{...st,status:"failed"}:st)),Fe.error(xt.message||`Failed to upload ${Oe.name}`)}}Ee.current&&(Ee.current.value="")},Ke=async W=>{W.preventDefault();const Y=Array.from(W.dataTransfer.files||[]);if(Y.length===0)return;try{await ut()}catch(je){Fe.error((je==null?void 0:je.message)||"Unable to upload at this time");return}const de=new Date().toISOString(),xe=Y.map(je=>({id:Date.now()+Math.random(),name:je.name,size:je.size,uploadedAt:de,status:"uploading"}));ne(je=>[...xe,...je]);for(let je=0;je<Y.length;je++){const Oe=Y[je],ht=xe[je];try{const{url:xt,filePath:mt}=await ee(Oe,ht.id);ne(st=>st.map(dt=>dt.id===ht.id?{...dt,status:"ready",url:xt,filePath:mt}:dt)),Fe.success(`${Oe.name} uploaded successfully!`)}catch(xt){ne(mt=>mt.map(st=>st.id===ht.id?{...st,status:"failed"}:st)),Fe.error(xt.message||`Failed to upload ${Oe.name}`)}}},ft=W=>{W.preventDefault()},Rt=async W=>{const Y=We.find(de=>de.id===W);try{const{orgId:de,profileId:xe}=await ut();if(Y!=null&&Y.filePath){const je=await Ca(Gn.ENDPOINTS.KNOWLEDGE.FILE_DELETE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({org_id:de,profile_id:xe,file_key:Y.filePath,document_id:(Y==null?void 0:Y.documentId)||void 0})});if(!je.ok){let xt=`Delete failed (${je.status})`;try{const mt=await je.json();xt=(mt==null?void 0:mt.message)||xt}catch{}throw new Error(xt)}let Oe={};try{Oe=await je.json()}catch{}if(String((Oe==null?void 0:Oe.status)||"").toLowerCase()!=="deleted")throw new Error((Oe==null?void 0:Oe.message)||"Delete not confirmed by webhook")}ne(je=>je.filter(Oe=>Oe.id!==W)),Fe.info(`${(Y==null?void 0:Y.name)||"File"} removed`)}catch(de){console.error("Error deleting file via webhook:",de),Fe.error((de==null?void 0:de.message)||"Failed to delete file")}},Gt=async W=>{try{const Y=W.filePath;if(!Y)throw new Error("Missing file path");const{data:de,error:xe}=await ls.storage.from("ai-agent-files").createSignedUrl(Y,60*60,{download:W.name||"file.pdf"});if(xe)throw xe;const je=(de==null?void 0:de.signedUrl)||W.url||"";if(!je)throw new Error("Unable to generate download link");const Oe=document.createElement("a");Oe.href=je,Oe.download=W.name||"",Oe.target="_blank",Oe.rel="noopener",document.body.appendChild(Oe),Oe.click(),Oe.remove()}catch(Y){Fe.error((Y==null?void 0:Y.message)||"Failed to download file")}},Je=async()=>{const W=We.filter(Y=>Y.filePath);if(W.length>0)try{const{orgId:Y,profileId:de}=await ut();await Promise.all(W.map(async xe=>{try{const je=await Ca(Gn.ENDPOINTS.KNOWLEDGE.FILE_DELETE,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({org_id:Y,profile_id:de,file_key:xe.filePath,document_id:(xe==null?void 0:xe.documentId)||void 0})});if(je.ok){let Oe={};try{Oe=await je.json()}catch{}const ht=String((Oe==null?void 0:Oe.status)||"").toLowerCase();ht!=="deleted"&&console.warn("Delete webhook did not confirm deletion for",xe.filePath,ht)}else{let Oe=`Delete failed (${je.status})`;try{const ht=await je.json();Oe=(ht==null?void 0:ht.message)||Oe}catch{}console.warn("Delete webhook failed for",xe.filePath,Oe)}}catch(je){console.warn("Delete webhook error for",xe.filePath,je)}}))}catch(Y){console.error("Error clearing files via webhook:",Y)}ne([]),Fe.info("All files cleared")},[en,Sn]=p.useState([{id:Date.now(),question:"",answer:""}]),[ha,ma]=p.useState([{id:Date.now(),question:"",answer:""}]),pa=()=>{const W={id:Date.now()+Math.random(),question:"",answer:""};Sn(Y=>[W,...Y]),ma(Y=>[JSON.parse(JSON.stringify(W)),...Y])},vr=W=>{Sn(Y=>Y.filter(de=>de.id!==W)),ma(Y=>Y.filter(de=>de.id!==W))},Qr=(W,Y,de)=>{Sn(xe=>xe.map(je=>je.id===W?{...je,[Y]:de}:je))},Rr=W=>{const Y=ha.find(je=>je.id===W.id),de=(W.question||"").trim(),xe=(W.answer||"").trim();return Y?de!==(Y.question||"").trim()||xe!==(Y.answer||"").trim():de!==""||xe!==""},[or,Mr]=p.useState([{id:1,prompt:"Hai! Ada yang bisa saya bantu lagi?",delay:60,expanded:!1},{id:2,prompt:"Jika ada pertanyaan lain, jangan ragu untuk bertanya!",delay:120,expanded:!1}]),Co=()=>{const W={id:Date.now(),prompt:"",delay:60,expanded:!1};Mr([...or,W])},ki=W=>{Mr(or.filter(Y=>Y.id!==W))},Si=(W,Y,de)=>{Mr(or.map(xe=>xe.id===W?{...xe,[Y]:de}:xe))},is=W=>{Mr(or.map(Y=>Y.id===W?{...Y,expanded:!Y.expanded}:Y))};p.useEffect(()=>{if(C&&!d){R(C.system_prompt||""),Q(C.welcome_message||""),V(C.transfer_conditions||""),G(C.stop_ai_after_handoff),Pe(String((C==null?void 0:C.auto_resolve_after_minutes)??0)),Ne(!!((C==null?void 0:C.enable_resolve)??!1)),at(String(b((C==null?void 0:C.history_limit)??w,0,k))),_t(b((C==null?void 0:C.read_file_limit)??3,0,S)),pe((C==null?void 0:C.response_temperature)??"Balanced"),Ue((C==null?void 0:C.message_await)??3),ct(String(b((C==null?void 0:C.message_limit)??j,0,j)));const W=C==null?void 0:C.qna;if(W&&Array.isArray(W)){const Y=W.map((de,xe)=>({id:Date.now()+xe,question:de.q??de.question??"",answer:de.a??de.answer??""}));Sn(Y),ma(JSON.parse(JSON.stringify(Y)))}}},[C,d]),p.useEffect(()=>{d&&ma(JSON.parse(JSON.stringify(en)))},[]);const ss=async()=>{if(!I){Fe.error("Please assign a super agent before saving this AI agent.");return}const W=b(kt(Ae),0,A),Y=b(kt(ze),0,ye),de=b(kt(oe),0,j),xe=(()=>{const ht=Xe==null?void 0:Xe.max_context_tokens;return typeof ht=="number"&&ht>0?Math.max(1,Math.floor(ht/1e3)):_})(),je=b(b((C==null?void 0:C.context_limit)??28,0,_),0,xe),Oe={system_prompt:D,welcome_message:K,transfer_conditions:H,stop_ai_after_handoff:ie,model_id:z||null,name:e,auto_resolve_after_minutes:W,enable_resolve:Ie,history_limit:Y,read_file_limit:pt,context_limit:je,response_temperature:re,message_await:He,message_limit:de,super_agent_id:I,qna:en.filter(ht=>{var xt,mt;return((xt=ht.question)==null?void 0:xt.trim())||((mt=ht.answer)==null?void 0:mt.trim())}).map(({question:ht,answer:xt})=>({q:ht.trim(),a:xt.trim()}))};try{await E(Oe),Fe.success(d?"AI agent created successfully!":"AI agent settings saved successfully!")}catch{Fe.error(d?"Failed to create AI agent":"Failed to save AI agent settings")}};return T&&!d?i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Kt,{className:"w-8 h-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading AI profile..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs(te,{variant:"ghost",size:"sm",onClick:t,className:"gap-2",children:[i.jsx(up,{className:"w-4 h-4"}),"Back"]})}),i.jsx(fe,{children:i.jsx("p",{children:"Kembali ke daftar agen AI"})})]}),i.jsx("h1",{className:"text-2xl font-bold",children:e}),d?i.jsx(St,{variant:"outline",className:"text-blue-600 border-blue-600",children:"New Agent"}):C&&i.jsxs(St,{variant:"secondary",children:["Last Updated: ",new Date(C.created_at).toLocaleDateString()]})]}),F&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",F]})}),i.jsxs(wl,{value:a,onValueChange:s,children:[i.jsxs(go,{className:"grid w-full grid-cols-2 bg-muted/60 p-1 rounded-lg",children:[i.jsx(Kn,{value:"general",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:bg-muted/40 transition-colors",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(no,{className:"w-4 h-4"}),i.jsx("span",{children:"General"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Konfigurasi pengaturan umum agen AI"})})]})}),i.jsx(Kn,{value:"knowledge",className:"data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=inactive]:text-muted-foreground data-[state=inactive]:hover:bg-muted/40 transition-colors",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(lv,{className:"w-4 h-4"}),i.jsx("span",{children:"Knowledge Sources"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Kelola sumber pengetahuan dan pasangan T&J"})})]})})]}),i.jsx(Mn,{value:"general",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-6",children:[i.jsxs("div",{className:"xl:col-span-3 space-y-4",children:[i.jsxs(Me,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center text-lg font-semibold",children:e.charAt(0)}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:e}),i.jsx("p",{className:"text-muted-foreground",children:d?"New AI Agent - Configure your settings below":(C==null?void 0:C.description)||"AI Agent"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:d?"Not saved yet":`Last Updated: ${C?new Date(C.created_at).toLocaleString():"Never"}`})]})]}),i.jsxs("div",{className:"space-y-2 pt-4",children:[i.jsx("span",{className:"text-sm font-medium",children:"Assigned Super Agent"}),$?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading super agents..."}):N?i.jsx("div",{className:"text-sm text-destructive",children:N}):x&&(g!=null&&g.id)?i.jsxs("div",{className:"inline-flex items-center gap-2 rounded-md bg-muted px-3 py-2 text-sm",children:[i.jsxs("span",{children:[" ",((Ni=B.find(W=>W.id===g.id))==null?void 0:Ni.name)||g.email||"You"]}),i.jsx(St,{variant:"secondary",children:"Your account"})]}):B.length===0?i.jsx("div",{className:"rounded-md border border-dashed border-muted-foreground/40 bg-muted/30 px-3 py-2 text-sm text-muted-foreground",children:"No super agents available. Create a super agent first before assigning this AI agent."}):i.jsxs(Ht,{value:I||"",onValueChange:W=>P(W),disabled:!v,children:[i.jsx(Ut,{className:"w-full",children:i.jsx(Dt,{placeholder:"Choose a super agent"})}),i.jsx(zt,{className:"bg-background border z-50",children:B.map(W=>i.jsxs(Ge,{value:W.id,children:[" ",W.name]},W.id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Only the assigned super agent and their human agents can view and use this AI agent."})]})]}),i.jsx(Me,{className:"p-4",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"AI Model"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Pilih model AI yang menentukan kecepatan dan kualitas respons."})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose the balance between speed and intelligence for this agent."})]}),Xe&&i.jsx(St,{variant:"secondary",className:"whitespace-nowrap",children:yu(Xe==null?void 0:Xe.provider)})]}),i.jsxs(Ht,{value:z,onValueChange:q,disabled:le.length===0,children:[i.jsx(Ut,{className:"w-full py-3",children:Xe?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[(Xe==null?void 0:Xe.display_name)||"Custom","  ",Fg(Xe==null?void 0:Xe.cost_per_1m_tokens),"  ",yu(Xe==null?void 0:Xe.provider)]})}):i.jsx(Dt,{placeholder:"Select an AI model"})}),i.jsx(zt,{className:"bg-background border z-50",children:le.map(W=>i.jsx(Ge,{value:W.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("span",{className:"font-semibold leading-tight",children:[(W==null?void 0:W.display_name)||"Custom","  ",Fg(W==null?void 0:W.cost_per_1m_tokens)]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:(W==null?void 0:W.description)||"No description available"}),i.jsxs("span",{className:"text-[11px] text-muted-foreground font-mono",children:[W==null?void 0:W.model_name,"  ",yu(W==null?void 0:W.provider)]})]})},W.id))})]}),le.length===0&&i.jsx("p",{className:"text-xs text-destructive mt-2",children:"No AI models available. Please contact your administrator."})]}),Z.length>0&&i.jsxs("div",{className:"border-t pt-6",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Fallback Model"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Model yang digunakan secara otomatis jika model utama tidak tersedia."})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatic backup model used when primary model is unavailable."})]}),Z.find(W=>W.id===ce)&&i.jsx(St,{variant:"secondary",className:"whitespace-nowrap",children:yu((Ao=Z.find(W=>W.id===ce))==null?void 0:Ao.provider)})]}),i.jsxs(Ht,{value:ce,onValueChange:ke,disabled:Z.length===0,children:[i.jsx(Ut,{className:"w-full py-3",children:Z.find(W=>W.id===ce)?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[((J=Z.find(W=>W.id===ce))==null?void 0:J.display_name)||"Custom","  ",Fg((ge=Z.find(W=>W.id===ce))==null?void 0:ge.cost_per_1m_tokens),"  ",yu((rt=Z.find(W=>W.id===ce))==null?void 0:rt.provider)]})}):i.jsx(Dt,{placeholder:"Select a fallback model"})}),i.jsx(zt,{className:"bg-background border z-50",children:Z.map(W=>i.jsx(Ge,{value:W.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("span",{className:"font-semibold leading-tight",children:[(W==null?void 0:W.display_name)||"Custom","  ",Fg(W==null?void 0:W.cost_per_1m_tokens)]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:(W==null?void 0:W.description)||"No description available"}),i.jsxs("span",{className:"text-[11px] text-muted-foreground font-mono",children:[W==null?void 0:W.model_name,"  ",yu(W==null?void 0:W.provider)]})]})},W.id))})]})]})]})}),i.jsxs(Me,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("behavior"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"AI Agent Behavior"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Konfigurasi kepribadian dan perilaku agen AI untuk menentukan cara berinteraksi dengan pelanggan"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure AI personality and behavior"})]}),i.jsx(ka,{className:`w-5 h-5 transition-transform ${c.behavior?"rotate-180":""}`})]}),c.behavior&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx(qa,{className:"min-h-[120px]",value:D,onChange:W=>R(W.target.value),placeholder:d?"Define your AI's personality, behavior, and capabilities here...":"Enter system prompt..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[D.length,"/15000"]})]})]}),i.jsxs(Me,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("welcome"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Welcome Message"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Pesan selamat datang yang dikirim otomatis kepada pelanggan saat memulai percakapan"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"First message sent to users"})]}),i.jsx(ka,{className:`w-5 h-5 transition-transform ${c.welcome?"rotate-180":""}`})]}),c.welcome&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx(qa,{className:"min-h-[80px]",value:K,onChange:W=>Q(W.target.value),placeholder:d?"This is the first message your AI will send to customers...":"Enter welcome message..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[K.length,"/5000"]})]})]}),i.jsxs(Me,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>f("transfer"),children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Agent Transfer Conditions"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Kondisi yang menentukan kapan percakapan dialihkan dari agen AI ke agen manusia"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"When to transfer to human agents"})]}),i.jsx(ka,{className:`w-5 h-5 transition-transform ${c.transfer?"rotate-180":""}`})]}),c.transfer&&i.jsxs("div",{className:"mt-4 space-y-4",children:[i.jsx(qa,{className:"min-h-[80px]",value:H,onChange:W=>V(W.target.value),placeholder:d?"Define when your AI should transfer the conversation to a human agent...":"Enter transfer conditions..."}),i.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[H.length,"/750"]})]})]}),i.jsx(Me,{className:"p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Stop AI after Handoff"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Menghentikan agen AI mengirim pesan setelah percakapan dialihkan ke agen manusia"})})]})]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Stop AI from sending messages after handoff"})]}),i.jsx(kl,{checked:ie,onCheckedChange:G})]})}),i.jsx(Me,{className:"p-6",children:i.jsxs(RR,{defaultOpen:!1,children:[i.jsxs(MR,{className:"flex w-full items-center justify-between py-1 font-medium [&[data-state=open]>svg]:rotate-180",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Additional Settings"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Pengaturan tambahan untuk konfigurasi lanjutan agen AI seperti batas riwayat, konteks, dan resolusi otomatis"})})]})]}),i.jsx(ka,{className:"w-5 h-5 transition-transform"})]}),i.jsx(DR,{className:"mt-4 data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Enable auto-resolve"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Mengaktifkan resolusi otomatis percakapan setelah waktu tertentu tanpa respons pelanggan"})})]})]}),i.jsx("div",{className:"mt-2",children:i.jsx(kl,{checked:Ie,onCheckedChange:Ne})})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Auto-resolve timeout (minutes)"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Waktu dalam menit sebelum percakapan secara otomatis diselesaikan (0 = nonaktif)"})})]})]}),i.jsx(Ye,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 30",value:Ae,onChange:W=>it(W.target.value),disabled:!Ie,className:`mt-1 ${Ie?"":"opacity-60 cursor-not-allowed bg-muted/50"}`}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Ie?"Set 0 to disable auto-resolve.":"Enable Auto-resolve to edit this value."})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Conversation History (tokens)"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Batas maksimal riwayat percakapan yang dapat diingat AI (dalam token)"})})]})]}),i.jsx(Ye,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:`Max ${ye.toLocaleString()}`,value:ze,onChange:W=>$t(W.target.value),className:"mt-1"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Xe!=null&&Xe.display_name?`${Xe.display_name} supports up to ${ye.toLocaleString()} tokens.`:`Supports up to ${ye.toLocaleString()} tokens.`})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Creativity Preset"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Preset kreativitas AI: Conservative (akurat), Balanced (seimbang), Creative (kreatif)"})})]})]}),i.jsxs("select",{value:re,onChange:W=>pe(W.target.value),className:"w-full p-2 border rounded-lg mt-1",children:[i.jsx("option",{value:"Conservative",children:"Conservative"}),i.jsx("option",{value:"Balanced",children:"Balanced"}),i.jsx("option",{value:"Creative",children:"Creative"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"AI Message Cap"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Batas maksimal jumlah pesan yang dapat dikirim AI dalam satu percakapan"})})]})]}),i.jsx(Ye,{type:"text",inputMode:"numeric",pattern:"[0-9]*",placeholder:"e.g. 1000",value:oe,onChange:W=>ue(W.target.value),className:"mt-1"})]})]})})]})}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{className:"w-full",onClick:ss,disabled:M,children:M?i.jsxs(i.Fragment,{children:[i.jsx(Kt,{className:"w-4 h-4 mr-2 animate-spin"}),d?"Creating...":"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(no,{className:"w-4 h-4 mr-2"}),d?"Create AI Agent":"Save AI Settings"]})})}),i.jsx(fe,{children:i.jsx("p",{children:d?"Buat agen AI baru dengan pengaturan ini":"Simpan semua pengaturan saat ini"})})]})]}),i.jsx("div",{className:"xl:col-span-2",children:i.jsx(wIe,{welcomeMessage:K,systemPrompt:D,modelDisplay:(Xe==null?void 0:Xe.display_name)||(Xe==null?void 0:Xe.model_name)||"Not selected",profile:C,profileId:n,modelName:(Xe==null?void 0:Xe.model_name)||"",temperature:Rq(re),transfer_conditions:H})})]})}),i.jsx(Mn,{value:"knowledge",className:"space-y-6",children:i.jsx(Me,{className:"p-6",children:i.jsxs(wl,{value:o,onValueChange:l,className:"w-full",children:[i.jsxs(go,{className:"grid w-full grid-cols-3 mb-6",children:[i.jsxs(Kn,{value:"text",className:"gap-2",children:[i.jsx(JV,{className:"w-4 h-4"}),"Text"]}),i.jsxs(Kn,{value:"file",className:"gap-2",children:[i.jsx(tw,{className:"w-4 h-4"}),"File"]}),i.jsxs(Kn,{value:"qa",className:"gap-2",children:[i.jsx(Be,{className:"w-4 h-4"}),"Q&A"]})]}),i.jsxs(Mn,{value:"text",className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs(te,{size:"sm",className:"gap-2",children:[i.jsx(eK,{className:"w-4 h-4"}),"Add"]})}),i.jsx(fe,{children:i.jsx("p",{children:"Tambah item pengetahuan baru"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"outline",size:"sm",children:"Default"})}),i.jsx(fe,{children:i.jsx("p",{children:"Gunakan item pengetahuan default"})})]})]}),i.jsxs("div",{className:"flex items-center gap-1 p-2 border rounded-md bg-muted/30",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(rK,{className:"w-4 h-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Batal"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(nK,{className:"w-4 h-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Ulang"})})]}),i.jsx("div",{className:"w-px h-6 bg-border mx-1"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(HV,{className:"w-4 h-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Tebal"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(QV,{className:"w-4 h-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Miring"})})]}),i.jsx("div",{className:"w-px h-6 bg-border mx-1"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(qV,{className:"w-4 h-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Rata Kiri"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(UV,{className:"w-4 h-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Rata Tengah"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(WV,{className:"w-4 h-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Rata Kanan"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(zV,{className:"w-4 h-4"})})}),i.jsx(fe,{children:i.jsx("p",{children:"Rata Kiri-Kanan"})})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Panduan Umum: Deposit, Withdraw & Tambah Rekening"})]}),i.jsx("div",{className:"pl-6 space-y-2 text-sm",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-orange-500",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Cara Isi Saldo / Deposit"}),i.jsx("p",{className:"text-muted-foreground",children:"Lakukan transfer ke rekening tujuan yang tertera di menu DEPOSIT > REKENING TUJUAN."}),i.jsx("p",{className:"text-muted-foreground",children:"Gunakan metode ATM atau M-Banking (tidak tersedia autodebet)."}),i.jsx("p",{className:"text-muted-foreground",children:"Setelah transfer, wajib upload bukti transfer agar diproses lebih cepat."})]})]})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Khusus Bank BCA"})]}),i.jsxs("div",{className:"pl-6 text-sm text-muted-foreground",children:[i.jsx("p",{children:"Wajib menggunakan rekening BCA atas nama yang terdaftar di website."}),i.jsx("p",{children:"Tidak bisa menggunakan rekening BCA milik orang lain."})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Tambah Rekening / E-Wallet"})]}),i.jsxs("div",{className:"pl-6 text-sm text-muted-foreground",children:[i.jsx("p",{children:"Bisa menambahkan rekening atau e-wallet selama nama pemiliknya sama dengan yang sudah terdaftar."}),i.jsx("p",{children:"Akses dari halaman utama > klik menu REKENING > TAMBAH REKENING."})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("p",{children:"Minimal deposit Via Bank BCA, MANDIRI, BRI, BNI, CIMB, OCBC, BANK JAGO, & Dan Semua Jenis E-wallet adalah 5.000"}),i.jsx("p",{children:"Minimal deposit QRIS = 10.000"}),i.jsx("p",{children:"Minimal withdraw Bank & E-wallet = 50.000"}),i.jsx("p",{children:"Jika menggunakan pulsa, akan dikenakan potongan 20%"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[i.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-sm flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs",children:""})}),i.jsx("span",{children:"Lupa User ID atau Password?"})]}),i.jsxs("div",{className:"pl-6 text-sm text-muted-foreground",children:[i.jsx("p",{children:"Format reset:"}),i.jsx("p",{children:"Nama Rekening :"}),i.jsx("p",{children:"Nomor Rekening :"}),i.jsx("p",{children:"Bank / E-wallet :"})]})]})]}),i.jsx("div",{className:"text-right text-xs text-muted-foreground",children:"10931 Characters"})]}),i.jsxs(Mn,{value:"website",className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Provide Link"}),i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Provide a link to the page you want the AI to learn from."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(te,{variant:"default",size:"sm",className:"bg-muted text-foreground hover:bg-muted/80",children:"Batch Link"}),i.jsx(te,{variant:"outline",size:"sm",children:"Single Link"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Web Link Collector"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Ye,{placeholder:"Link URL",className:"flex-1"}),i.jsx(te,{className:"bg-blue-600 hover:bg-blue-700",children:"Collect Link"})]}),i.jsxs("div",{className:"flex items-start gap-2 text-sm text-blue-600",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-600 flex items-center justify-center mt-0.5",children:i.jsx("span",{className:"text-white text-xs",children:"!"})}),i.jsxs("p",{children:["Start with URL and this tool will gather up to ",i.jsx("strong",{children:"30 unique"})," links from the site, excluding any files"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Trained Link"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"select-all",className:"rounded"}),i.jsx("label",{htmlFor:"select-all",className:"text-sm text-blue-600 cursor-pointer",children:"Select"})]}),i.jsx(Ye,{placeholder:"Search Links",className:"flex-1"})]})]})]}),i.jsxs(Mn,{value:"file",className:"space-y-6",children:[i.jsxs("div",{onDrop:y?Ke:void 0,onDragOver:y?ft:void 0,className:`border border-dashed rounded-lg p-6 text-center ${y?"bg-muted/30":"bg-muted/50 opacity-70"}`,children:[i.jsx("input",{ref:Ee,type:"file",multiple:!0,hidden:!0,onChange:Re,disabled:!y}),i.jsx(tw,{className:"w-10 h-10 mx-auto mb-3 text-muted-foreground"}),y?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Drag & drop documents here, or"}),i.jsx(te,{size:"sm",onClick:()=>{var W;return(W=Ee.current)==null?void 0:W.click()},children:"Browse Files"}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Supported: PDF"})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"You don't have permission to upload files."}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requires permission: ai_agent_files.create"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-sm font-medium",children:["Uploaded Files (",We.length,")"]}),We.length>0&&i.jsx(te,{variant:"ghost",size:"sm",onClick:Je,className:"text-red-600 hover:text-red-700",children:"Clear All"})]}),be?i.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading files..."}):We.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No files uploaded yet."}):i.jsx("div",{className:"border rounded-md divide-y",children:We.map(W=>i.jsxs("div",{className:"flex items-center justify-between p-3",children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx("div",{className:"w-8 h-8 rounded bg-muted flex items-center justify-center",children:i.jsx(tw,{className:"w-4 h-4"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"truncate text-sm font-medium",children:W.name}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[(W.size/1024).toFixed(1)," KB  ",new Date(W.uploadedAt).toLocaleString()]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${W.status==="ready"?"bg-green-100 text-green-700":W.status==="uploading"?"bg-blue-100 text-blue-700":W.status==="processing"?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:W.status==="uploading"?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Kt,{className:"w-3 h-3 animate-spin"}),"uploading"]}):W.status}),i.jsx(te,{size:"sm",variant:"outline",onClick:()=>Gt(W),disabled:W.status==="uploading",children:"Download"}),i.jsx(te,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700",onClick:()=>Rt(W.id),disabled:W.status==="uploading",children:i.jsx(Er,{className:"w-4 h-4"})})]})]},W.id))})]})]}),i.jsxs(Mn,{value:"qa",className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Q&A Knowledge"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Add questionanswer pairs the AI can reference."})]}),i.jsxs(te,{size:"sm",onClick:()=>{l("qa"),pa()},className:"gap-2",children:[i.jsx(As,{className:"w-4 h-4"}),"Add Pair"]})]}),en.length===0?i.jsx("div",{className:"text-sm text-muted-foreground",children:"No Q&A pairs. Click Add Pair to create one."}):i.jsx("div",{className:"space-y-3",children:en.map(W=>i.jsx(Me,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx(Ye,{placeholder:"Question",value:W.question,onChange:Y=>Qr(W.id,"question",Y.target.value)}),i.jsx(qa,{placeholder:"Answer",className:"min-h-[80px]",value:W.answer,onChange:Y=>Qr(W.id,"answer",Y.target.value)})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[Rr(W)&&i.jsx(te,{variant:"outline",size:"sm",onClick:async Y=>{Y.preventDefault(),Y.stopPropagation(),l("qa");try{await E({qna:en.filter(de=>{var xe,je;return((xe=de.question)==null?void 0:xe.trim())||((je=de.answer)==null?void 0:je.trim())}).map(({question:de,answer:xe})=>({q:de.trim(),a:xe.trim()}))}),ma(JSON.parse(JSON.stringify(en))),Fe.success("Q&A saved")}catch(de){Fe.error((de==null?void 0:de.message)||"Failed to save Q&A")}},children:"Save"}),i.jsx(te,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",onClick:()=>vr(W.id),children:i.jsx(Er,{className:"w-4 h-4"})})]})]})},W.id))})]}),i.jsx(Mn,{value:"product",children:i.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[i.jsx(ZV,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Product knowledge and catalog integration"})]})})]})})}),i.jsx(Mn,{value:"integrations",children:i.jsxs(Me,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Integrations"}),i.jsx("p",{className:"text-muted-foreground",children:"Set up integrations with external services."})]})}),i.jsx(Mn,{value:"followups",className:"space-y-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Followups"}),i.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Tambahkan pesan Followup yang akan dikirim kepada ",i.jsx("span",{className:"text-blue-600",children:"pelanggan setelah jeda waktu tertentu"}),"."]}),i.jsx("p",{children:"Isi dengan prompt. Prompt adalah arahan yang AI akan pakai untuk menulis Followup sesuai dengan history chat dan knowledge anda."}),i.jsx("p",{children:"Anda juga bisa menulis kondisi Handoff to Agent anda di Prompt"}),i.jsx("p",{className:"text-blue-600",children:"Anda bisa mengirim gambar di followup. Klik disini untuk Upload gambar."})]})]}),i.jsx("div",{className:"space-y-4",children:or.map((W,Y)=>i.jsx(Me,{className:"p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:"Prompt:"}),i.jsx(te,{variant:"ghost",size:"sm",onClick:()=>ki(W.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:i.jsx(Er,{className:"w-4 h-4"})})]}),i.jsx(qa,{value:W.prompt,onChange:de=>Si(W.id,"prompt",de.target.value),className:"min-h-[80px]",placeholder:"Enter followup message..."}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium",children:"Delay (min):"}),i.jsx(Ye,{type:"number",value:W.delay,onChange:de=>Si(W.id,"delay",parseInt(de.target.value)||1),className:"w-20",min:"1"})]})}),i.jsxs(RR,{children:[i.jsxs(MR,{onClick:()=>is(W.id),className:"flex items-center gap-2 text-sm font-medium hover:text-primary",children:[i.jsx(ka,{className:`w-4 h-4 transition-transform ${W.expanded?"rotate-180":""}`}),"Options"]}),i.jsx(DR,{className:"pt-4 data-[state=closed]:animate-collapsible-up data-[state=open]:animate-collapsible-down overflow-hidden",children:i.jsx("div",{className:"text-sm text-muted-foreground",children:"Additional options for this followup message can be configured here."})})]})]})},W.id))}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs(te,{onClick:Co,className:"gap-2",children:[i.jsx(As,{className:"w-4 h-4"}),"Add Followup"]})}),i.jsx(fe,{children:i.jsx("p",{children:"Tambah pesan tindak lanjut baru"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{className:"bg-green-600 hover:bg-green-700",children:"Save Followups"})}),i.jsx(fe,{children:i.jsx("p",{children:"Simpan semua pesan tindak lanjut"})})]})]})]})}),i.jsx(Mn,{value:"evaluation",children:i.jsxs(Me,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Evaluation"}),i.jsx("p",{className:"text-muted-foreground",children:"Review AI agent performance metrics."})]})})]})]})},Bg=e=>e==null?"Pricing on request":`${new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:e>=1?2:3}).format(e)} / 1M`,Au=e=>e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown",Ug="00000000-0000-0000-0000-000000000001",_Ie=({agent:e,onSettings:t,onDelete:n})=>i.jsxs(Me,{className:"p-6 text-center space-y-4 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center text-xl font-semibold text-muted-foreground",children:e.initials}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:e.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.creator}),e.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e.description}),(e.modelName||e.provider)&&i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[e.modelName?`Model: ${e.modelName}`:null,e.modelName&&e.provider?"  ":"",e.provider?`Provider: ${Au(e.provider)}`:null]}),i.jsxs("div",{className:"space-y-1 mt-1",children:[i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(e.created_at).toLocaleDateString()]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Super Agent: ",e.superAgentName??"Unassigned"]})]})]})]}),i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Vt,{permission:"ai_profiles.update",children:i.jsxs(te,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>t(e),children:[i.jsx(no,{className:"w-4 h-4"}),"Settings"]})})}),i.jsx(fe,{children:i.jsx("p",{children:"Konfigurasi pengaturan agen AI"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Vt,{permission:"ai_profiles.delete",children:i.jsxs(te,{variant:"outline",size:"sm",className:"gap-2 text-destructive hover:text-destructive",onClick:()=>n(e.id),children:[i.jsx(Er,{className:"w-4 h-4"}),"Delete"]})})}),i.jsx(fe,{children:i.jsx("p",{children:"Hapus agen AI ini"})})]})]})]}),kIe=({onClick:e})=>i.jsx(Me,{className:"p-6 text-center space-y-4 hover:shadow-md transition-shadow bg-blue-600 text-white cursor-pointer group",onClick:e,children:i.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center group-hover:bg-white/30 transition-colors",children:i.jsx(As,{className:"w-8 h-8"})}),i.jsx("h3",{className:"font-semibold text-lg",children:"Create New"})]})}),SIe=()=>{const[e,t]=p.useState(null),[n,r]=p.useState([]),[a,s]=p.useState(!0),[o,l]=p.useState(!1),[c,u]=p.useState(null),[f,d]=p.useState(!1),[h,m]=p.useState(""),[g,v]=p.useState("customer-service"),[x,y]=p.useState([]),[b,w]=p.useState([]),[k,_]=p.useState(!1),[j,S]=p.useState(null),[A,C]=p.useState(""),[T,M]=p.useState(""),[F,E]=p.useState(""),[I,P]=p.useState(""),[B,O]=p.useState("all"),[$,L]=p.useState("all"),[N,U]=p.useState("newest"),[D,R]=p.useState(0),[K,Q]=p.useState(0),[H,V]=p.useState(null),[ie,G]=p.useState(null),[le,se]=p.useState(!1),Z=p.useRef(!0);Xr();const{mode:_e,superAgentId:z,loading:q,error:ce}=YU(),{agents:ke}=Ml(),[Ae,Pe]=p.useState(!1),[Ie,Ne]=p.useState(null),ze=ue=>ue.replace(/[%_\\]/g,We=>`\\${We}`).replace(/'/g,"''"),at=p.useMemo(()=>{const ue=new Map;return[...x,...b].forEach(We=>{ue.set(We.id,We)}),ue},[x,b]),{deleteProfile:pt}=Iq(),_t=(ue,We,ne)=>({id:ue.id,name:ue.name,initials:ue.name.split(" ").map(Ee=>Ee.charAt(0)).join("").toUpperCase().slice(0,2),creator:"Admin",description:ue.description||void 0,created_at:ue.created_at,modelId:ue.model_id,modelName:(We==null?void 0:We.display_name)??(We==null?void 0:We.model_name)??null,provider:(We==null?void 0:We.provider)??null,superAgentId:(ue==null?void 0:ue.super_agent_id)??null,superAgentName:ne??null}),re=p.useCallback(async()=>{if(!q){if(_e==="none"){Q(0),V(null);return}try{let ue=ae.from("ai_profiles").select("id",{count:"exact",head:!0}).eq("org_id",Ug);if(_e==="super"||_e==="agent"){if(!z){Q(0),V(null);return}ue=ue.eq("super_agent_id",z)}const{count:We}=await ue;if(Q(We||0),(We||0)>0){let ne=ae.from("ai_profiles").select("created_at").order("created_at",{ascending:!1}).limit(1).eq("org_id",Ug);(_e==="super"||_e==="agent")&&z&&(ne=ne.eq("super_agent_id",z));const{data:Ee}=await ne.maybeSingle();V(Ee?new Date(Ee.created_at):null)}else V(null)}catch(ue){console.error("Error fetching AI agent stats:",ue)}}},[_e,z,q]),pe=p.useCallback(async()=>{if(q){s(!0);return}try{if(Z.current?s(!0):l(!0),u(null),_e==="none"){Z.current=!1,r([]),R(0),s(!1),l(!1),u(ce??"Tidak ada agen AI yang tersedia untuk akun ini.");return}let ue=ae.from("ai_profiles").select("*, ai_models:ai_models!ai_profiles_model_id_fkey(id, display_name, model_name, provider)",{count:"exact"}).eq("org_id",Ug);if(_e==="super"||_e==="agent"){if(!z){Z.current=!1,r([]),R(0),s(!1),l(!1),u(ce??"Tidak ada agen AI yang tersedia untuk akun ini.");return}ue=ue.eq("super_agent_id",z)}if(I){const ee=ze(I);ue=ue.or(`name.ilike.%${ee}%,description.ilike.%${ee}%`)}$!=="all"&&(ue=ue.eq("model_id",$)),B!=="all"&&(B==="unknown"?ue=ue.or("model_id.is.null,ai_models.provider.is.null"):ue=ue.eq("ai_models.provider",B)),N==="az"?ue=ue.order("name",{ascending:!0,nullsFirst:!1}):N==="oldest"?ue=ue.order("created_at",{ascending:!0}):ue=ue.order("created_at",{ascending:!1});const{data:We,error:ne,count:Ee}=await ue;if(ne)throw ne;const be=Array.from(new Set(We.map(ee=>ee==null?void 0:ee.super_agent_id).filter(ee=>!!ee)));let Te=new Map;if(be.length){const{data:ee}=await ae.from("v_human_agents").select("user_id, agent_name, email").in("user_id",be);ee==null||ee.forEach(ve=>{const Re=ve.agent_name||ve.email||String(ve.user_id).slice(0,8);Te.set(ve.user_id,Re)})}R(Ee||0);const ut=(We||[]).map(ee=>_t(ee,ee.ai_models||(ee.model_id?at.get(ee.model_id):void 0),Te.get((ee==null?void 0:ee.super_agent_id)??"")??null));r(ut)}catch(ue){console.error("Error fetching AI agents:",ue),u("Failed to load AI agents"),Fe.error("Failed to load AI agents"),r([]),R(0)}finally{Z.current?(Z.current=!1,s(!1)):l(!1)}},[I,$,B,N,at,_e,z,q,ce]),He=p.useMemo(()=>{const ue=new Set;return[...x,...b].forEach(We=>{We.provider&&ue.add(We.provider)}),ue.add("unknown"),Array.from(ue).sort((We,ne)=>We.localeCompare(ne))},[x,b]),Ue=p.useMemo(()=>{const ue=new Map;return[...x,...b].forEach(We=>{ue.set(We.id,We.display_name||We.model_name||"Unnamed")}),Array.from(ue.entries()).sort((We,ne)=>We[1].localeCompare(ne[1]))},[x,b]);p.useEffect(()=>{const ue=setTimeout(()=>P(F.trim()),250);return()=>clearTimeout(ue)},[F]),p.useEffect(()=>{pe()},[pe]),p.useEffect(()=>{re()},[re]),p.useEffect(()=>{B!=="all"&&!He.includes(B)&&O("all")},[B,He]),p.useEffect(()=>{$!=="all"&&!Ue.some(([ue])=>ue===$)&&L("all")},[$,Ue]);const oe=ue=>{const We=n.find(ne=>ne.id===ue);We&&G(We)},ct=async()=>{if(ie)try{se(!0),await pt(ie.id),await Promise.all([pe(),re()]),Fe.success(`"${ie.name}" has been deleted successfully`),G(null)}catch(ue){console.error("Error deleting agent:",ue),u("Failed to delete AI agent"),Fe.error("Failed to delete AI agent")}finally{se(!1)}},Pt=()=>{d(!0)},kt=async()=>{var ue,We;if(!h.trim()){Fe.error("Please enter an AI agent name");return}if(!A){Fe.error("Please select an AI model");return}if(!Ie){Fe.error("Please choose a Super Agent");return}try{const{data:ne,error:Ee}=await ae.from("ai_profiles").insert([{org_id:Ug,name:h.trim(),description:null,system_prompt:"",welcome_message:"",transfer_conditions:"",stop_ai_after_handoff:!0,model_id:A,super_agent_id:Ie}]).select("id, name, created_at, model_id, super_agent_id").single();if(Ee)throw Ee;const Te={id:ne==null?void 0:ne.id,name:(ne==null?void 0:ne.name)||h.trim(),initials:((ne==null?void 0:ne.name)||h.trim()).split(" ").map(ut=>ut.charAt(0)).join("").toUpperCase().slice(0,2),creator:"Admin",created_at:(ne==null?void 0:ne.created_at)||new Date().toISOString(),modelId:(ne==null?void 0:ne.model_id)||A,modelName:((ue=x.find(ut=>ut.id===((ne==null?void 0:ne.model_id)||A)))==null?void 0:ue.display_name)||void 0,provider:((We=x.find(ut=>ut.id===((ne==null?void 0:ne.model_id)||A)))==null?void 0:We.provider)||null,superAgentId:(ne==null?void 0:ne.super_agent_id)||Ie,superAgentName:void 0};t(Te),d(!1),m(""),v("customer-service"),Ne(null),Fe.success("AI agent created successfully"),pe(),re()}catch(ne){console.error("Create AI Agent failed:",ne),Fe.error((ne==null?void 0:ne.message)||"Failed to create AI agent")}},Xe=p.useRef(!1),ye=p.useCallback(async()=>{try{_(!0),S(null);const{data:ue,error:We}=await ae.from("ai_models").select("id, display_name, model_name, provider, cost_per_1m_tokens, is_active").eq("is_active",!0).order("display_name",{ascending:!0});if(We)throw We;const ne=ue||[],Ee=ne.filter(Te=>(Te.display_name||"").toLowerCase()!=="fallback"),be=ne.filter(Te=>(Te.display_name||"").toLowerCase()==="fallback");y(Ee),w(be),Xe.current||(Ee.length>0&&C(Te=>Te||Ee[0].id),be.length>0&&M(Te=>Te||be[0].id),Xe.current=!0)}catch(ue){console.error("Error loading AI models:",ue),S("Failed to load AI models"),Fe.error("Failed to load AI models")}finally{_(!1)}},[]);if(p.useEffect(()=>{ye()},[ye]),p.useEffect(()=>{pe()},[]),e)return i.jsx(jIe,{agentName:e.name,onBack:()=>{t(null),pe(),re()},profileId:e.id==="new"?void 0:e.id,initialModelId:e.modelId||void 0});if(a)return i.jsxs("div",{className:"flex items-center justify-center h-64",children:[i.jsx(Kt,{className:"w-8 h-8 animate-spin"}),i.jsx("span",{className:"ml-2",children:"Loading AI agents..."})]});const it=n.length,$t=He.length?He:[];return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"AI Agents"}),i.jsxs("div",{className:"text-muted-foreground max-w-2xl mx-auto",children:[i.jsx("p",{children:"Ini adalah halaman di mana Anda dapat mengunjungi AI yang telah Anda buat sebelumnya."}),i.jsx("p",{children:"Jangan ragu untuk membuat perubahan dan membuat chatbot sebanyak yang Anda inginkan kapan saja!"})]})]}),c&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[i.jsxs("p",{className:"text-red-800 text-sm",children:["Error: ",c]}),i.jsx(te,{variant:"outline",size:"sm",className:"mt-2",onClick:pe,children:"Retry"})]}),i.jsxs("div",{className:"grid gap-3 rounded-lg border bg-card p-4 md:flex md:items-center md:justify-between",children:[i.jsxs("div",{className:"relative w-full md:w-72",children:[i.jsx(ks,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Ye,{value:F,onChange:ue=>E(ue.target.value),placeholder:"Search AI agents...",className:"pl-9"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs(Ht,{value:B,onValueChange:O,children:[i.jsx(Ut,{className:"w-[160px] bg-background border",children:i.jsx(Dt,{placeholder:"Provider"})}),i.jsxs(zt,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"all",children:"All providers"}),$t.map(ue=>i.jsx(Ge,{value:ue,children:ue==="unknown"?"Unknown":Au(ue)},ue))]})]}),i.jsxs(Ht,{value:$,onValueChange:L,children:[i.jsx(Ut,{className:"w-[160px] bg-background border",children:i.jsx(Dt,{placeholder:"AI model"})}),i.jsxs(zt,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"all",children:"All models"}),Ue.map(([ue,We])=>i.jsx(Ge,{value:ue,children:We},ue))]})]}),i.jsxs(Ht,{value:N,onValueChange:ue=>U(ue),children:[i.jsx(Ut,{className:"w-[150px] bg-background border",children:i.jsx(Dt,{placeholder:"Sort"})}),i.jsxs(zt,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"newest",children:"Newest first"}),i.jsx(Ge,{value:"oldest",children:"Oldest first"}),i.jsx(Ge,{value:"az",children:"Name AZ"})]})]})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",it," of ",K," agents"]}),o&&!a&&i.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Kt,{className:"h-4 w-4 animate-spin"}),i.jsx("span",{children:"Updating list"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Me,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-primary",children:K}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total AI Agents"})]}),i.jsxs(Me,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:it}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Matching Filters"})]}),i.jsxs(Me,{className:"p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:H?H.toLocaleDateString():"N/A"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Last Created"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.map(ue=>i.jsx(_Ie,{agent:ue,onSettings:t,onDelete:oe},ue.id)),i.jsx(Vt,{permission:"ai_profiles.create",children:i.jsx(kIe,{onClick:Pt})})]}),it===0&&!a&&K===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full bg-muted flex items-center justify-center",children:i.jsx(As,{className:"w-12 h-12 text-muted-foreground"})}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No AI Agents Yet"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first AI agent to get started with automated customer support."}),i.jsxs(te,{onClick:Pt,children:[i.jsx(As,{className:"w-4 h-4 mr-2"}),"Create Your First AI Agent"]})]}),it===0&&!a&&K>0&&i.jsx("div",{className:"rounded-lg border border-dashed p-6 text-center text-sm text-muted-foreground",children:"No AI agents match your current filters. Try adjusting the search or filter settings above."}),i.jsx(Vt,{permission:"ai_profiles.create",children:i.jsx(fn,{open:f,onOpenChange:d,children:i.jsxs(on,{className:"sm:max-w-[425px]",children:[i.jsx(ln,{children:i.jsx(cn,{className:"text-xl font-semibold",children:"Create New AI Agent"})}),i.jsxs("div",{className:"space-y-6 pt-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Name"}),i.jsx(Ye,{placeholder:"Enter AI name",value:h,onChange:ue=>m(ue.target.value),className:"w-full"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Super Agent *"}),i.jsxs(ys,{open:Ae,onOpenChange:Pe,children:[i.jsx(bs,{asChild:!0,children:i.jsx(te,{variant:"outline",role:"combobox",className:"w-full justify-between",children:(()=>{const ue=ke.find(We=>We.primaryRole==="super_agent"&&We.user_id===Ie);return(ue==null?void 0:ue.display_name)||(ue==null?void 0:ue.email)||Ie||"Choose a super agent"})()})}),i.jsx(Wi,{className:"w-[360px] p-0",children:i.jsxs(Rc,{children:[i.jsx(Mc,{placeholder:"Search super agents..."}),i.jsx(Dc,{children:"No super agents found."}),i.jsx($c,{children:ke.filter(ue=>ue.primaryRole==="super_agent").map(ue=>i.jsx(Lc,{onSelect:()=>{Ne(ue.user_id),Pe(!1)},children:i.jsx("span",{className:"ml-2",children:ue.display_name||ue.email||ue.user_id.slice(0,8)})},ue.user_id))})]})})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Assign a super agent who will own and manage this AI agent."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Template"}),i.jsxs(Ht,{value:g,onValueChange:v,children:[i.jsx(Ut,{className:"w-full",children:i.jsx(Dt,{placeholder:"Select a template"})}),i.jsx(zt,{})]}),g==="customer-service"&&i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"and sales inquiries for your business."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"AI Model"}),i.jsxs(Ht,{value:A,onValueChange:C,disabled:k||x.length===0,children:[i.jsx(Ut,{className:"w-full py-3",children:A?(()=>{const ue=x.find(We=>We.id===A);return ue?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[ue.display_name||"Custom","  ",Bg(ue.cost_per_1m_tokens),"  ",Au(ue.provider)]})}):i.jsx(Dt,{placeholder:k?"Loading models...":"Select an AI model"})})():i.jsx(Dt,{placeholder:k?"Loading models...":"Select an AI model"})}),i.jsx(zt,{side:"bottom",align:"start",sideOffset:4,children:x.map(ue=>i.jsx(Ge,{value:ue.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm font-medium",children:[i.jsx("span",{children:ue.display_name||"Custom"}),i.jsx("span",{className:"text-muted-foreground",children:Bg(ue.cost_per_1m_tokens)})]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:ue.description||"No description available"}),i.jsxs("span",{className:"text-[11px] font-mono text-muted-foreground",children:[ue.model_name,"  ",Au(ue.provider)]})]})},ue.id))})]}),j&&i.jsx("p",{className:"text-xs text-destructive",children:j})]}),b.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Fallback Model"}),i.jsxs(Ht,{value:T,onValueChange:M,disabled:k||b.length===0,children:[i.jsx(Ut,{className:"w-full py-3",children:T?(()=>{const ue=b.find(We=>We.id===T);return ue?i.jsx("span",{className:"flex w-full items-center gap-2 text-sm font-medium truncate pr-2",children:i.jsxs("span",{className:"truncate",children:[ue.display_name||"Custom","  ",Bg(ue.cost_per_1m_tokens),"  ",Au(ue.provider)]})}):i.jsx(Dt,{placeholder:k?"Loading models...":"Select a fallback model"})})():i.jsx(Dt,{placeholder:k?"Loading models...":"Select a fallback model"})}),i.jsx(zt,{side:"bottom",align:"start",sideOffset:4,children:b.map(ue=>i.jsx(Ge,{value:ue.id,children:i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm font-medium",children:[i.jsx("span",{children:ue.display_name||"Custom"}),i.jsx("span",{className:"text-muted-foreground",children:Bg(ue.cost_per_1m_tokens)})]}),i.jsx("span",{className:"text-xs text-muted-foreground leading-tight",children:ue.description||"No description available"}),i.jsxs("span",{className:"text-[11px] font-mono text-muted-foreground",children:[ue.model_name,"  ",Au(ue.provider)]})]})},ue.id))})]})]}),i.jsx(te,{onClick:kt,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:!h.trim()||!A||!Ie,children:"Create AI Agent"})]})]})})})]}),i.jsx(xb,{open:!!ie,onOpenChange:ue=>{!ue&&!le&&G(null)},children:i.jsxs(Ap,{children:[i.jsxs(Ep,{children:[i.jsx(Tp,{children:"Delete AI Agent?"}),i.jsx(Op,{children:ie?`Are you sure you want to delete "${ie.name}"? This action cannot be undone.`:"Are you sure you want to delete this AI agent?"})]}),i.jsxs(Pp,{children:[i.jsx(Rp,{disabled:le,children:"Cancel"}),i.jsx(Ip,{onClick:ct,disabled:le,className:"bg-destructive hover:bg-destructive/90 focus:ring-destructive/50",children:le?i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Kt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]})},Mq=({className:e,...t})=>i.jsx("nav",{role:"navigation","aria-label":"pagination",className:Se("mx-auto flex w-full justify-center",e),...t});Mq.displayName="Pagination";const Dq=p.forwardRef(({className:e,...t},n)=>i.jsx("ul",{ref:n,className:Se("flex flex-row items-center gap-1",e),...t}));Dq.displayName="PaginationContent";const pv=p.forwardRef(({className:e,...t},n)=>i.jsx("li",{ref:n,className:Se("",e),...t}));pv.displayName="PaginationItem";const SA=({className:e,isActive:t,size:n="icon",...r})=>i.jsx("a",{"aria-current":t?"page":void 0,className:Se(Cd({variant:t?"outline":"ghost",size:n}),e),...r});SA.displayName="PaginationLink";const $q=({className:e,...t})=>i.jsxs(SA,{"aria-label":"Go to previous page",size:"default",className:Se("gap-1 pl-2.5",e),...t,children:[i.jsx(QS,{className:"h-4 w-4"}),i.jsx("span",{children:"Previous"})]});$q.displayName="PaginationPrevious";const Lq=({className:e,...t})=>i.jsxs(SA,{"aria-label":"Go to next page",size:"default",className:Se("gap-1 pr-2.5",e),...t,children:[i.jsx("span",{children:"Next"}),i.jsx(Ey,{className:"h-4 w-4"})]});Lq.displayName="PaginationNext";const NIe=()=>{const[e,t]=p.useState(!1),[n,r]=p.useState(!1),[a,s]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState(!1),[f,d]=p.useState({enabled:!1,perDay:0,perMonth:0,twoFA:!1}),[h,m]=p.useState("7d"),[g,v]=p.useState("7d"),[x,y]=p.useState(null),[b,w]=p.useState(!1),[k,_]=p.useState(null),[j,S]=p.useState({}),[A,C]=p.useState(!1),[T,M]=p.useState(null),[F,E]=p.useState({name:"",email:"",role:"agent"}),[I,P]=p.useState(!1),[B,O]=p.useState(!1),[$,L]=p.useState(null),[N,U]=p.useState(!1),[D,R]=p.useState(!1),[K,Q]=p.useState(null),{toast:H}=Gc(),V=p.useRef(null),{hasPermission:ie,hasRole:G}=_r(),[le,se]=p.useState([]),[Z,_e]=p.useState([]),[z,q]=p.useState(0),[ce,ke]=p.useState(0),[Ae,Pe]=p.useState(1),[Ie,Ne]=p.useState(1),[ze,at]=p.useState(10),[pt,_t]=p.useState(10),[re,pe]=p.useState(!1),[He,Ue]=p.useState(!1),[oe,ct]=p.useState("active"),[Pt,kt]=p.useState({}),[Xe,ye]=p.useState(null),[it,$t]=p.useState(""),[ue,We]=p.useState(""),[ne,Ee]=p.useState("all"),[be,Te]=p.useState("all"),[ut,ee]=p.useState("all");p.useEffect(()=>{const Y=setTimeout(()=>We(it.trim()),300);return()=>clearTimeout(Y)},[it]),p.useEffect(()=>{!G(tr.MASTER_AGENT)&&F.role==="super_agent"&&E({...F,role:"agent"})},[G,F.role]);const ve=Y=>Y.replace(/[%_\\]/g,de=>`\\${de}`).replace(/'/g,"''"),Re=F.name.trim()&&F.email.trim()&&(F.role!=="agent"||$),{agents:Ke,loading:ft,error:Rt,fetchAgents:Gt,createAgent:Je,updateAgentStatus:en,updateAgentRole:Sn,deleteAgent:ha,setEnable2FAFlagForCreate:ma}=Ml();p.useEffect(()=>{Rt&&Rt!==V.current&&(H({title:"Error",description:Rt,variant:"destructive"}),V.current=Rt),Rt||(V.current=null)},[Rt,H]);const pa=Y=>{if(!Y)return null;const de=String(Y).toLowerCase();return de.includes("master")?"master_agent":de.includes("super")?"super_agent":de.includes("agent")?"agent":null},vr=async({invited:Y,page:de,pageSize:xe,search:je,role:Oe,activeStatus:ht,pendingStatus:xt})=>{try{Y?Ue(!0):pe(!0);const mt=(de-1)*xe,st=mt+xe-1;let dt=ae.from("v_human_agents").select("*",{count:"exact"});const xn=je?ve(je):"";if(xn&&(dt=dt.or(`agent_name.ilike.%${xn}%,email.ilike.%${xn}%`)),Oe&&Oe!=="all"){const ga=Oe==="master_agent"?"%master%":Oe==="super_agent"?"%super%":"%agent%";dt=dt.ilike("role_name",ga)}const Ct=G(tr.MASTER_AGENT);if(G(tr.SUPER_AGENT)){if(!T){Y?Ue(!1):pe(!1);return}try{let ga=ae.from("super_agent_members").select("agent_user_id").eq("super_agent_id",T);Xe&&(ga=ga.eq("org_id",Xe));const{data:On}=await ga,Xn=[T,...(On||[]).map(yt=>String(yt.agent_user_id)).filter(Boolean)];Xn.length>0?dt=dt.in("user_id",Xn):dt=dt.eq("user_id",T)}catch{dt=dt.eq("user_id",T)}}else if(!Ct){Y?(_e([]),ke(0),Ue(!1)):(se([]),q(0),pe(!1));return}Y?xt==="expired"?dt=dt.eq("confirmation_status","expired"):xt==="invited"?dt=dt.or("confirmation_status.is.null,confirmation_status.eq.invited,confirmation_status.eq.pending"):dt=dt.or("confirmation_status.is.null,confirmation_status.neq.accepted"):(dt=dt.eq("confirmation_status","accepted"),ht&&ht!=="all"&&(dt=dt.eq("is_active",ht==="active")));const{data:Tn,count:Dr,error:$r}=await dt.order("agent_name",{ascending:!0}).range(mt,st);if($r)throw $r;if(Y)_e(Tn||[]),ke(Dr||0);else{const ga=Tn||[];se(ga),q(Dr||0);try{const On=ga.filter(Xn=>String((Xn==null?void 0:Xn.role_name)||"").toLowerCase()==="agent").map(Xn=>Xn.user_id);if(On.length>0){let Xn=ae.from("super_agent_members").select("agent_user_id, super_agent_id").in("agent_user_id",On);Xe&&(Xn=Xn.eq("org_id",Xe));const{data:yt}=await Xn,In={};(yt||[]).forEach(gt=>{gt!=null&&gt.agent_user_id&&(In[String(gt.agent_user_id)]=String(gt.super_agent_id||""))}),kt(In)}else kt({})}catch{kt({})}}}catch(mt){H({title:"Error",description:(mt==null?void 0:mt.message)||"Failed to fetch agents",variant:"destructive"}),Y?(_e([]),ke(0)):(se([]),q(0))}finally{Y?Ue(!1):pe(!1)}};p.useEffect(()=>{vr({invited:!1,page:Ae,pageSize:ze,search:ue,role:ne,activeStatus:be})},[Ae,ze,ue,ne,be]),p.useEffect(()=>{Ae!==1&&Pe(1)},[ue,ne,be]),p.useEffect(()=>{oe==="pending"&&vr({invited:!0,page:Ie,pageSize:pt,search:ue,role:ne,pendingStatus:ut})},[oe,Ie,pt,ue,ne,ut]),p.useEffect(()=>{oe==="pending"&&Ie!==1&&Ne(1)},[ue,ne,ut,oe]);const Qr=(Y,de,xe,je,Oe,ht,xt,mt,st)=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"rounded-lg border bg-card",children:[i.jsxs("div",{className:`grid gap-4 p-4 border-b bg-muted/50 font-medium text-sm ${mt?"grid-cols-[240px,1fr,220px,120px,160px]":"grid-cols-[240px,1fr,220px,160px,120px,120px]"}`,children:[i.jsx("div",{children:"Agent Name"}),i.jsx("div",{children:"Email"}),i.jsx("div",{children:"Role"}),!mt&&i.jsx("div",{children:"Token Usage"}),i.jsx("div",{children:"Status"}),i.jsx("div",{children:"Action"})]}),i.jsx("div",{className:"divide-y",children:de?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Kt,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Loading agents..."})]})}):Y.length===0?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(tN,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),i.jsxs("h3",{className:"text-lg font-semibold mb-2",children:["No ",mt?"Pending":"Active"," Agents"]}),i.jsx("p",{className:"text-muted-foreground",children:mt?"Invited users will appear here until they sign in.":"Create your first agent to get started."})]})}):!mt&&st?(()=>{const dt=yt=>String(yt||"").toLowerCase(),xn=yt=>dt(yt.role_name).includes("master"),Ct=yt=>dt(yt.role_name).includes("super"),xr=yt=>{const In=dt(yt.role_name);return In==="agent"||In==="agent_only"},Tn=Y.filter(xn),Dr=Y.filter(Ct),$r=Y.filter(xr),ga=Object.fromEntries(Dr.map(yt=>[String(yt.user_id),yt])),On={},Xn=[];for(const yt of $r){const In=st[String(yt.user_id)];In&&ga[In]?(On[In]=On[In]||[]).push(yt):Xn.push(yt)}return i.jsxs(i.Fragment,{children:[Tn.map(yt=>{const In="master_agent",gt={user_id:String(yt.user_id),email:yt.email||"",display_name:yt.agent_name||yt.email||"Unknown",avatar_url:yt.avatar_url||null,timezone:null,created_at:"",roles:[In],primaryRole:In,status:yt.is_active?"Active":"Inactive",super_agent_id:null};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-blue-50/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Vr,{className:"h-8 w-8",children:i.jsx(Kr,{className:"text-xs bg-blue-100 text-blue-700",children:ge(gt.display_name||"U")})}),i.jsx("span",{className:"font-medium text-blue-600",children:gt.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:gt.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(St,{className:`text-xs ${W(gt.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Master Agent"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(ku,{children:[i.jsx(Su,{asChild:!0,children:i.jsxs(te,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:gt.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${rt(gt.status)}`}),i.jsx("span",{className:"text-xs",children:gt.status}),gt.primaryRole!=="master_agent"&&i.jsx(ka,{className:"h-3 w-3"})]})}),i.jsxs(nc,{className:"bg-background border z-50",children:[i.jsx(ai,{onClick:()=>J(gt.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ai,{onClick:()=>J(gt.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Vt,{permission:"users_profile.update_token_limit",children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Mr(gt),title:"Edit limits",children:i.jsx(ja,{className:"h-4 w-4"})})}),G(tr.MASTER_AGENT)&&i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>Ni(gt),title:"View token usage",children:i.jsx(Rf,{className:"h-4 w-4"})}),gt.primaryRole!=="master_agent"&&i.jsx(Vt,{permission:"super_agents.delete",children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Q(gt),U(!0)},children:i.jsx(Er,{className:"h-4 w-4"})})})]})]},`master-${yt.user_id}`)}),Dr.map(yt=>{const In="super_agent",gt={user_id:String(yt.user_id),email:yt.email||"",display_name:yt.agent_name||yt.email||"Unknown",avatar_url:yt.avatar_url||null,timezone:null,created_at:"",roles:[In],primaryRole:In,status:yt.is_active?"Active":"Inactive",super_agent_id:null},Ci=On[String(yt.user_id)]||[];return i.jsxs("div",{className:"",children:[i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-green-50/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Vr,{className:"h-8 w-8",children:i.jsx(Kr,{className:"text-xs bg-green-100 text-green-700",children:ge(gt.display_name||"U")})}),i.jsx("span",{className:"font-medium text-green-600",children:gt.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:gt.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(St,{className:`text-xs ${W(gt.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Super Agent"})}),i.jsx("div",{className:"text-sm font-medium",children:A?"":(j[gt.user_id]??0).toLocaleString()}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(ku,{children:[i.jsx(Su,{asChild:!0,children:i.jsxs(te,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:gt.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${rt(gt.status)}`}),i.jsx("span",{className:"text-xs",children:gt.status}),gt.primaryRole!=="master_agent"&&i.jsx(ka,{className:"h-3 w-3"})]})}),i.jsxs(nc,{className:"bg-background border z-50",children:[i.jsx(ai,{onClick:()=>J(gt.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ai,{onClick:()=>J(gt.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Vt,{permission:"users_profile.update_token_limit",children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Mr(gt),title:"Edit limits",children:i.jsx(ja,{className:"h-4 w-4"})})}),G(tr.MASTER_AGENT)&&i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>Ni(gt),title:"View token usage",children:i.jsx(Rf,{className:"h-4 w-4"})}),gt.primaryRole!=="master_agent"&&i.jsx(Vt,{permission:"super_agents.delete",children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Q(gt),U(!0)},children:i.jsx(Er,{className:"h-4 w-4"})})})]})]}),Ci.map(Ai=>{const GA="agent",va={user_id:String(Ai.user_id),email:Ai.email||"",display_name:Ai.agent_name||Ai.email||"Unknown",avatar_url:Ai.avatar_url||null,timezone:null,created_at:"",roles:[GA],primaryRole:GA,status:Ai.is_active?"Active":"Inactive",super_agent_id:gt.user_id};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-gray-50/30 pl-12",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 border-l-2 border-b-2 border-gray-300 rounded-bl"})}),i.jsx(Vr,{className:"h-8 w-8",children:i.jsx(Kr,{className:"text-xs bg-gray-100 text-gray-700",children:ge(va.display_name||"U")})}),i.jsx("span",{className:"font-medium text-gray-600",children:va.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:va.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(St,{className:`text-xs ${W(va.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Agent"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(ku,{children:[i.jsx(Su,{asChild:!0,children:i.jsxs(te,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:va.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${rt(va.status)}`}),i.jsx("span",{className:"text-xs",children:va.status}),va.primaryRole!=="master_agent"&&i.jsx(ka,{className:"h-3 w-3"})]})}),i.jsxs(nc,{className:"bg-background border z-50",children:[i.jsx(ai,{onClick:()=>J(va.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ai,{onClick:()=>J(va.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Vt,{permission:"users_profile.update_token_limit",children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Mr(va),title:"Edit limits",children:i.jsx(ja,{className:"h-4 w-4"})})}),G(tr.MASTER_AGENT)&&i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>Ni(va),title:"View token usage",children:i.jsx(Rf,{className:"h-4 w-4"})}),va.primaryRole!=="master_agent"&&i.jsx(Vt,{permission:"super_agents.delete",children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Q(va),U(!0)},children:i.jsx(Er,{className:"h-4 w-4"})})})]})]},`agent-${Ai.user_id}`)})]},`super-${yt.user_id}`)}),Xn.map(yt=>{const In="agent",gt={user_id:String(yt.user_id),email:yt.email||"",display_name:yt.agent_name||yt.email||"Unknown",avatar_url:yt.avatar_url||null,timezone:null,created_at:"",roles:[In],primaryRole:In,status:yt.is_active?"Active":"Inactive",super_agent_id:null};return i.jsxs("div",{className:"grid grid-cols-[240px,1fr,220px,160px,120px,120px] gap-4 p-4 items-center hover:bg-muted/30 transition-colors bg-orange-50/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Vr,{className:"h-8 w-8",children:i.jsx(Kr,{className:"text-xs bg-orange-100 text-orange-700",children:ge(gt.display_name||"U")})}),i.jsx("span",{className:"font-medium text-orange-600",children:gt.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:gt.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(St,{className:`text-xs ${W(gt.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:"Agent (Unassigned)"})}),i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs(ku,{children:[i.jsx(Su,{asChild:!0,children:i.jsxs(te,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:gt.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${rt(gt.status)}`}),i.jsx("span",{className:"text-xs",children:gt.status}),gt.primaryRole!=="master_agent"&&i.jsx(ka,{className:"h-3 w-3"})]})}),i.jsxs(nc,{className:"bg-background border z-50",children:[i.jsx(ai,{onClick:()=>J(gt.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ai,{onClick:()=>J(gt.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Vt,{permission:"users_profile.update_token_limit",children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Mr(gt),title:"Edit limits",children:i.jsx(ja,{className:"h-4 w-4"})})}),G(tr.MASTER_AGENT)&&i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>Ni(gt),title:"View token usage",children:i.jsx(Rf,{className:"h-4 w-4"})}),gt.primaryRole!=="master_agent"&&i.jsx(Vt,{permission:"super_agents.delete",children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Q(gt),U(!0)},children:i.jsx(Er,{className:"h-4 w-4"})})})]})]},`unassigned-${yt.user_id}`)})]})})():Y.map(dt=>{const xn=pa(dt.role_name),Ct={user_id:String(dt.user_id),email:dt.email||"",display_name:dt.agent_name||dt.email||"Unknown",avatar_url:dt.avatar_url||null,timezone:null,created_at:"",roles:xn?[xn]:[],primaryRole:xn,status:dt.is_active?"Active":"Inactive",super_agent_id:null},xr=String(dt.confirmation_status||"").toLowerCase()==="expired";return i.jsxs("div",{className:`grid gap-4 p-4 items-center hover:bg-muted/30 transition-colors ${mt?"grid-cols-[240px,1fr,220px,120px,160px]":"grid-cols-[240px,1fr,220px,160px,120px,120px]"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Vr,{className:"h-8 w-8",children:i.jsx(Kr,{className:"text-xs",children:ge(Ct.display_name||"U")})}),i.jsx("span",{className:"font-medium",children:Ct.display_name})]}),i.jsx("div",{className:"text-sm text-muted-foreground",children:Ct.email||""}),i.jsx("div",{className:"flex items-center h-8",children:i.jsx(St,{className:`text-xs ${W(Ct.primaryRole)} leading-none h-6 px-2 inline-flex items-center`,children:Ct.primaryRole==="master_agent"?"Master Agent":Ct.primaryRole==="super_agent"?"Super Agent":"Agent"})}),!mt&&i.jsx("div",{className:"text-sm text-muted-foreground",children:""}),i.jsx("div",{className:"flex items-center gap-2",children:mt?i.jsx(St,{className:`text-xs leading-none h-6 px-2 inline-flex items-center ${xr?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:xr?"Expired":"Invited"}):i.jsxs(ku,{children:[i.jsx(Su,{asChild:!0,children:i.jsxs(te,{variant:"ghost",size:"sm",className:"gap-2 h-8",disabled:Ct.primaryRole==="master_agent",children:[i.jsx("div",{className:`h-2 w-2 rounded-full ${rt(Ct.status)}`}),i.jsx("span",{className:"text-xs",children:Ct.status}),Ct.primaryRole!=="master_agent"&&i.jsx(ka,{className:"h-3 w-3"})]})}),i.jsxs(nc,{className:"bg-background border z-50",children:[i.jsx(ai,{onClick:()=>J(Ct.user_id,"Active"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),"Active"]})}),i.jsx(ai,{onClick:()=>J(Ct.user_id,"Inactive"),children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-2 w-2 rounded-full bg-gray-400"}),"Inactive"]})})]})]})}),i.jsxs("div",{className:"flex items-center gap-1",children:[!mt&&i.jsx(Vt,{permission:"users_profile.update_token_limit",children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>Mr(Ct),title:"Edit limits",children:i.jsx(ja,{className:"h-4 w-4"})})}),G(tr.MASTER_AGENT)&&!mt&&i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-emerald-600 hover:bg-emerald-700 text-white",onClick:()=>Ni(Ct),title:"View token usage",children:i.jsx(Rf,{className:"h-4 w-4"})}),mt?i.jsxs(i.Fragment,{children:[xr&&i.jsx(Vt,{permission:"super_agents.create",children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-blue-600 hover:bg-blue-700 text-white",onClick:async()=>{try{await ae.functions.invoke("admin-create-user",{body:{email:Ct.email,full_name:Ct.display_name,role:Ct.primaryRole||"agent",reinvite:!0}}),H({title:"Reinvite sent",description:`${Ct.email}`}),vr({invited:!0,page:je,pageSize:Oe})}catch(Tn){H({title:"Error",description:(Tn==null?void 0:Tn.message)||"Failed to reinvite",variant:"destructive"})}},title:"Reinvite user",children:i.jsx(JL,{className:"h-4 w-4"})})}),Ct.primaryRole!=="master_agent"&&i.jsx(Vt,{permission:"super_agents.delete",children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Q(Ct),U(!0)},children:i.jsx(Er,{className:"h-4 w-4"})})})]}):Ct.primaryRole!=="master_agent"&&i.jsx(Vt,{permission:"super_agents.delete",children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white",onClick:()=>{Q(Ct),U(!0)},children:i.jsx(Er,{className:"h-4 w-4"})})})]})]},dt.user_id)})})]}),i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:xe>0?i.jsxs("span",{children:["Showing ",Math.min((je-1)*Oe+1,xe),"",Math.min(je*Oe,xe)," of ",xe]}):i.jsx("span",{children:"0 results"})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx(qe,{className:"text-sm text-muted-foreground",children:"Rows"}),i.jsxs(Ht,{value:String(Oe),onValueChange:dt=>xt(Number(dt)),children:[i.jsx(Ut,{className:"h-8 w-[100px] bg-background border",children:i.jsx(Dt,{})}),i.jsxs(zt,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"10",children:"10"}),i.jsx(Ge,{value:"20",children:"20"}),i.jsx(Ge,{value:"50",children:"50"})]})]})]}),i.jsx(Mq,{children:i.jsxs(Dq,{children:[i.jsx(pv,{children:i.jsx($q,{className:je<=1?"pointer-events-none opacity-50":"",onClick:()=>je>1&&ht(je-1),href:"#"})}),i.jsx(pv,{children:i.jsxs("span",{className:"text-sm text-muted-foreground px-2",children:["Page ",je," of ",Math.max(1,Math.ceil((xe||0)/Math.max(1,Oe)))]})}),i.jsx(pv,{children:i.jsx(Lq,{className:je>=Math.max(1,Math.ceil((xe||0)/Math.max(1,Oe)))?"pointer-events-none opacity-50":"",onClick:()=>je<Math.max(1,Math.ceil((xe||0)/Math.max(1,Oe)))&&ht(je+1),href:"#"})})]})})]})]})]}),Rr=async()=>{var Y,de;if(!F.name||!F.email){H({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}if(F.role==="agent"&&!$){H({title:"Error",description:"Please select a Super Agent for this agent",variant:"destructive"});return}try{O(!0),ma(I);let xe=Xe||null;if(!xe)try{const{data:Oe}=await ae.auth.getUser(),{data:ht}=await ae.from("org_members").select("org_id").eq("user_id",((Y=Oe==null?void 0:Oe.user)==null?void 0:Y.id)||"").limit(1);xe=((de=ht==null?void 0:ht[0])==null?void 0:de.org_id)||null}catch{}const je=await Je({full_name:F.name,email:F.email,role:F.role,super_agent_id:F.role==="agent"&&$||null,org_id:xe});E({name:"",email:"",role:"agent"}),L(null),P(!1),t(!1),H({title:"Success",description:"Agent created successfully"})}catch(xe){H({title:"Error",description:xe instanceof Error?xe.message:"Failed to create agent",variant:"destructive"})}finally{O(!1)}},or=async Y=>{var de,xe,je;try{if((K==null?void 0:K.primaryRole)==="master_agent"||(je=(xe=(de=le.find(Oe=>String(Oe.user_id)===Y))==null?void 0:de.role_name)==null?void 0:xe.toLowerCase)!=null&&je.call(xe).includes("master")){H({title:"Error",description:"Master agent tidak dapat dihapus.",variant:"destructive"}),U(!1),Q(null);return}R(!0),await ha(Y),H({title:"Success",description:"Agent deleted successfully"}),U(!1),Q(null),oe==="pending"?Z.length<=1&&Ie>1?Ne(Oe=>Math.max(1,Oe-1)):await vr({invited:!0,page:Ie,pageSize:pt,search:ue,role:ne,pendingStatus:ut}):le.length<=1&&Ae>1?Pe(Oe=>Math.max(1,Oe-1)):await vr({invited:!1,page:Ae,pageSize:ze,search:ue,role:ne,activeStatus:be})}catch(Oe){H({title:"Error",description:Oe instanceof Error?Oe.message:"Failed to delete agent",variant:"destructive"})}finally{R(!1)}},Mr=async Y=>{try{l(Y);const{data:de,error:xe}=await ae.from("users_profile").select("token_limit_enabled, max_tokens_per_day, max_tokens_per_month, is_2fa_email_enabled").eq("user_id",Y.user_id).maybeSingle();if(xe)throw xe;d({enabled:!!(de!=null&&de.token_limit_enabled),perDay:Number((de==null?void 0:de.max_tokens_per_day)??0),perMonth:Number((de==null?void 0:de.max_tokens_per_month)??0),twoFA:!!(de!=null&&de.is_2fa_email_enabled)}),r(!0)}catch(de){H({title:"Error",description:(de==null?void 0:de.message)||"Failed to load token limits",variant:"destructive"})}},Co=async()=>{if(o)try{u(!0);const{error:Y}=await ae.from("users_profile").update({token_limit_enabled:f.enabled,max_tokens_per_day:Math.max(0,Math.floor(f.perDay||0)),max_tokens_per_month:Math.max(0,Math.floor(f.perMonth||0)),is_2fa_email_enabled:f.twoFA}).eq("user_id",o.user_id);if(Y)throw Y;H({title:"Saved",description:"Token limits updated."}),r(!1)}catch(Y){H({title:"Error",description:(Y==null?void 0:Y.message)||"Failed to save token limits",variant:"destructive"})}finally{u(!1)}},ki=Y=>{const de=new Date;let xe;if(Y==="this_month")xe=new Date(Date.UTC(de.getUTCFullYear(),de.getUTCMonth(),1,0,0,0));else{const Oe=Y==="7d"?7:30;xe=new Date(Date.UTC(de.getUTCFullYear(),de.getUTCMonth(),de.getUTCDate(),0,0,0)),xe.setUTCDate(xe.getUTCDate()-(Oe-1))}const je=de;return{start:xe.toISOString(),end:je.toISOString()}},Si=async Y=>{try{C(!0);const de=ss.filter(Oe=>Oe.primaryRole==="super_agent").map(Oe=>Oe.user_id);if(de.length===0){S({});return}let xe={};if(Y==="all")try{const{data:Oe}=await ae.from("v_super_agent_token_usage").select("super_agent_id,total_tokens");for(const ht of Oe||[]){const xt=String(ht.super_agent_id||"");xt&&(xe[xt]=Number(ht.total_tokens||0))}}catch{}else{const{start:Oe,end:ht}=ki(Y),{data:xt}=await ae.from("token_usage_logs").select("id,channel_id,total_tokens,made_at").gte("made_at",Oe).lt("made_at",ht),mt=Array.from(new Set((xt||[]).map(xn=>xn.channel_id).filter(Boolean)));let st={};if(mt.length>0){const{data:xn}=await ae.from("channels").select("id,super_agent_id").in("id",mt);st=Object.fromEntries((xn||[]).map(Ct=>[String(Ct.id),String(Ct.super_agent_id||"")]))}const dt=new Set;for(const xn of xt||[]){const Ct=String(xn.id);if(dt.has(Ct))continue;dt.add(Ct);const xr=String(xn.channel_id||""),Tn=xr&&st[xr]||"";Tn&&(xe[Tn]=(xe[Tn]||0)+Number(xn.total_tokens||0))}}const je={};for(const Oe of de)je[Oe]=xe[Oe]||0;S(je)}catch(de){H({title:"Error",description:(de==null?void 0:de.message)||"Failed to load usage",variant:"destructive"})}finally{C(!1)}};p.useEffect(()=>{Ke.length>0&&Si(h)},[Ke,h]),p.useEffect(()=>{(async()=>{var Y,de;try{const{data:xe}=await ae.auth.getUser();M(((Y=xe==null?void 0:xe.user)==null?void 0:Y.id)||null);try{const{data:je}=await ae.from("org_members").select("org_id").eq("user_id",((de=xe==null?void 0:xe.user)==null?void 0:de.id)||"").limit(1).maybeSingle();ye((je==null?void 0:je.org_id)||null)}catch{}}catch{}})()},[]),p.useEffect(()=>{T&&(vr({invited:!1,page:Ae,pageSize:ze}),oe==="pending"&&vr({invited:!0,page:Ie,pageSize:pt}))},[T]);const is=()=>G(tr.MASTER_AGENT)?Ke:G(tr.SUPER_AGENT)?T?Ke.filter(Y=>Y.primaryRole==="super_agent"&&Y.user_id===T||Y.primaryRole==="agent"&&Y.super_agent_id===T):[]:[],ss=p.useMemo(()=>is(),[Ke,G,T]),Ni=async Y=>{l(Y),s(!0),await Ao(Y.user_id,g)},Ao=async(Y,de)=>{var xe;try{w(!0);const{start:je,end:Oe}=ki(de),ht=((xe=Ke.find(On=>On.user_id===Y))==null?void 0:xe.super_agent_id)||null,xt=ht?Ke.filter(On=>On.primaryRole==="agent"&&On.super_agent_id===ht).map(On=>On.user_id):[Y],{data:mt}=await ae.from("threads").select("id").in("assignee_user_id",xt).gte("created_at",je).lt("created_at",Oe),st=(mt||[]).map(On=>On.id),[dt,xn]=await Promise.all([st.length>0?ae.from("token_usage_logs").select("id,total_tokens").in("thread_id",st).gte("made_at",je).lt("made_at",Oe):Promise.resolve({data:[]}),ae.from("token_usage_logs").select("id,total_tokens").in("user_id",xt).gte("made_at",je).lt("made_at",Oe)]),Ct=new Set;let xr=0;for(const On of[...dt.data||[],...xn.data||[]]){const Xn=String(On.id);Ct.has(Xn)||(Ct.add(Xn),xr+=Number(On.total_tokens||0))}y(xr);const[Tn,Dr,$r,ga]=await Promise.all([ae.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",je).lt("created_at",Oe).eq("assignee_user_id",Y),ae.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",je).lt("created_at",Oe).eq("assigned_by_user_id",Y),ae.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",je).lt("created_at",Oe).eq("resolved_by_user_id",Y),ae.from("threads").select("id",{count:"exact",head:!0}).gte("created_at",je).lt("created_at",Oe).eq("assignee_user_id",Y).not("ai_handoff_at","is",null)]);_({assignedTo:Tn.count||0,assignedBy:Dr.count||0,resolvedBy:$r.count||0,handoverFromAI:ga.count||0})}catch(je){y(null),_(null),H({title:"Error",description:(je==null?void 0:je.message)||"Failed to load usage",variant:"destructive"})}finally{w(!1)}},J=async(Y,de)=>{try{const{error:xe}=await ae.from("users_profile").update({is_active:de==="Active"}).eq("user_id",Y);if(xe)throw xe;H({title:"Success",description:`Status changed to ${de}`}),await Gt()}catch(xe){H({title:"Error",description:(xe==null?void 0:xe.message)||"Failed to change status",variant:"destructive"})}},ge=Y=>Y.split(" ").map(de=>de[0]).join("").toUpperCase().slice(0,2),rt=Y=>Y==="Active"?"bg-green-500":"bg-gray-400",W=Y=>Y==="master_agent"?"bg-blue-100 text-blue-700":Y==="super_agent"?"bg-emerald-100 text-emerald-700":"bg-gray-100 text-gray-700";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Human Agent Settings"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your human agents"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx(qe,{className:"text-sm text-muted-foreground",children:"Usage"}),i.jsxs(Ht,{value:h,onValueChange:async Y=>{const de=Y;m(de);try{await Si(de)}catch{}},children:[i.jsx(Ut,{className:"h-8 w-[160px] bg-background border",children:i.jsx(Dt,{placeholder:"Range"})}),i.jsxs(zt,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"all",children:"All time"}),i.jsx(Ge,{value:"7d",children:"Last 7 days"}),i.jsx(Ge,{value:"30d",children:"Last 30 days"}),i.jsx(Ge,{value:"this_month",children:"This month"})]})]})]}),i.jsx(Vt,{permission:"users_profile.create",fallback:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("span",{children:i.jsxs(te,{className:"gap-2 bg-blue-600 text-white",disabled:!0,children:[i.jsx(As,{className:"h-4 w-4"}),"Create Agent"]})})}),i.jsx(fe,{children:i.jsx("p",{children:"You do not have permission to create agents."})})]}),children:i.jsxs(fn,{open:e,onOpenChange:t,children:[i.jsx(qN,{asChild:!0,children:i.jsxs(te,{className:"gap-2 bg-blue-600 hover:bg-blue-700 text-white",children:[i.jsx(As,{className:"h-4 w-4"}),"Create Agent"]})}),i.jsxs(on,{className:"sm:max-w-md bg-background border",children:[i.jsx(ln,{children:i.jsx(cn,{children:"Create New Agent"})}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"agent-name",children:["Agent Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Ye,{id:"agent-name",value:F.name,onChange:Y=>E({...F,name:Y.target.value}),placeholder:"Enter agent name"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"agent-email",children:["Email ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx(Ye,{id:"agent-email",type:"email",value:F.email,onChange:Y=>E({...F,email:Y.target.value}),placeholder:"Enter email address"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"agent-phone",children:"Phone (Optional)"}),i.jsx(Ye,{id:"agent-phone",type:"tel",value:F.phone||"",onChange:Y=>E({...F,phone:Y.target.value}),placeholder:"Enter phone number"})]}),i.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[i.jsx(gm,{id:"agent-2fa",checked:I,onCheckedChange:Y=>P(!!Y)}),i.jsx(qe,{htmlFor:"agent-2fa",className:"text-sm",children:"Enable email 2FA for this agent"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qe,{htmlFor:"agent-role",children:"Role"}),!G(tr.MASTER_AGENT)&&i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Hanya Master Agent yang dapat membuat Super Agent"})})]})]}),i.jsxs(Ht,{value:F.role,onValueChange:Y=>E({...F,role:Y}),children:[i.jsx(Ut,{className:"bg-background border",children:i.jsx(Dt,{})}),i.jsxs(zt,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"agent",children:"Agent"}),G(tr.MASTER_AGENT)&&i.jsx(Ge,{value:"super_agent",children:"Super Agent"})]})]})]}),F.role==="agent"&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{children:["Attach to Super Agent ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs(Ht,{value:$||"",onValueChange:Y=>L(Y),children:[i.jsx(Ut,{className:"bg-background border",children:i.jsx(Dt,{placeholder:"Select Super Agent"})}),i.jsx(zt,{className:"bg-background border z-50",children:Ke.filter(Y=>Y.primaryRole==="super_agent").map(Y=>i.jsx(Ge,{value:Y.user_id,children:Y.display_name||Y.email},Y.user_id))})]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsxs("p",{children:["Fields marked with ",i.jsx("span",{className:"text-red-500",children:"*"})," are required."]}),F.role==="agent"&&i.jsx("p",{className:"mt-1",children:"Agents must be attached to a Super Agent."})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(te,{onClick:Rr,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",disabled:B||!Re,children:B?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 animate-spin"}),"Creating..."]}):"Create Agent"}),i.jsx(te,{variant:"outline",onClick:()=>t(!1),className:"flex-1",disabled:B,children:"Cancel"})]})]})]})]})})]})]}),i.jsxs("div",{className:"grid gap-3 rounded-lg border bg-card p-4 md:flex md:items-center md:justify-between",children:[i.jsxs("div",{className:"relative w-full md:w-64",children:[i.jsx(ks,{className:"pointer-events-none absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Ye,{value:it,onChange:Y=>$t(Y.target.value),placeholder:"Search name or email",className:"pl-9"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs(Ht,{value:ne,onValueChange:Y=>Ee(Y),children:[i.jsx(Ut,{className:"w-[150px] bg-background border",children:i.jsx(Dt,{placeholder:"Role"})}),i.jsxs(zt,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"all",children:"All roles"}),i.jsx(Ge,{value:"master_agent",children:"Master Agent"}),i.jsx(Ge,{value:"super_agent",children:"Super Agent"}),i.jsx(Ge,{value:"agent",children:"Agent"})]})]}),oe==="pending"?i.jsxs(Ht,{value:ut,onValueChange:Y=>ee(Y),children:[i.jsx(Ut,{className:"w-[150px] bg-background border",children:i.jsx(Dt,{placeholder:"Invitation status"})}),i.jsxs(zt,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"all",children:"All invitations"}),i.jsx(Ge,{value:"invited",children:"Invited"}),i.jsx(Ge,{value:"expired",children:"Expired"})]})]}):i.jsxs(Ht,{value:be,onValueChange:Y=>Te(Y),children:[i.jsx(Ut,{className:"w-[150px] bg-background border",children:i.jsx(Dt,{placeholder:"Status"})}),i.jsxs(zt,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"all",children:"All statuses"}),i.jsx(Ge,{value:"active",children:"Active"}),i.jsx(Ge,{value:"inactive",children:"Inactive"})]})]})]})]}),i.jsxs(wl,{value:oe,onValueChange:Y=>ct(Y),className:"space-y-6",children:[i.jsxs(go,{className:"grid w-full max-w-md grid-cols-2",children:[i.jsxs(Kn,{value:"active",className:"gap-2",children:[i.jsx(aK,{className:"h-4 w-4"}),"Active"]}),i.jsxs(Kn,{value:"pending",className:"gap-2",children:[i.jsx(iK,{className:"h-4 w-4"}),"Pending"]})]}),i.jsx(Mn,{value:"active",className:"space-y-4",children:Qr(le,re||ft,z,Ae,ze,Pe,at,!1,Pt)}),i.jsx(Mn,{value:"pending",className:"space-y-4",children:Qr(Z,He,ce,Ie,pt,Ne,_t,!0)})]}),i.jsx(fn,{open:N,onOpenChange:Y=>{D||U(Y)},children:i.jsxs(on,{className:"sm:max-w-md bg-background border",children:[i.jsx(ln,{children:i.jsx(cn,{children:"Delete Agent"})}),i.jsxs("div",{className:"space-y-3 py-2",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Are you sure you want to permanently delete ",(K==null?void 0:K.display_name)||"this agent","? This will remove their profile and role assignments. This action cannot be undone."]}),i.jsxs("div",{className:"rounded-md border p-3 bg-muted/30 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Name:"})," ",(K==null?void 0:K.display_name)||""]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Email:"})," ",(K==null?void 0:K.email)||""]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Role:"})," ",(K==null?void 0:K.primaryRole)||""]})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsx(te,{variant:"destructive",className:"flex-1",onClick:()=>K&&or(K.user_id),disabled:D,children:D?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"}),i.jsx(te,{variant:"outline",className:"flex-1",onClick:()=>U(!1),disabled:D,children:"Cancel"})]})]})]})}),i.jsx(fn,{open:n,onOpenChange:r,children:i.jsxs(on,{className:"sm:max-w-md bg-background border",children:[i.jsx(ln,{children:i.jsxs(cn,{children:["Token Limits",o?`  ${o.display_name||o.email}`:""]})}),i.jsxs("div",{className:"space-y-4 py-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(qe,{className:"text-sm font-medium",children:"Enable Limits"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Block token-consuming actions when exceeded."})]}),i.jsx(kl,{checked:f.enabled,onCheckedChange:Y=>d({...f,enabled:!!Y})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(qe,{className:"text-sm font-medium",children:"Require Email 2FA"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"User must enter a one-time code at sign-in."})]}),i.jsx(kl,{checked:f.twoFA,onCheckedChange:Y=>d({...f,twoFA:!!Y})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"limit-day",children:"Max Tokens / Day"}),i.jsx(Ye,{id:"limit-day",type:"number",min:0,placeholder:"0",value:f.perDay===0?"":f.perDay,onChange:Y=>d({...f,perDay:Number(Y.target.value||"0")})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"limit-month",children:"Max Tokens / Month"}),i.jsx(Ye,{id:"limit-month",type:"number",min:0,placeholder:"0",value:f.perMonth===0?"":f.perMonth,onChange:Y=>d({...f,perMonth:Number(Y.target.value||"0")})})]})]}),i.jsxs("div",{className:"flex gap-2 pt-2",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{onClick:Co,disabled:c,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:"Save"})}),i.jsx(fe,{children:i.jsx("p",{children:"Simpan batas token"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"})}),i.jsx(fe,{children:i.jsx("p",{children:"Batal"})})]})]})]})]})}),i.jsx(fn,{open:a,onOpenChange:s,children:i.jsxs(on,{className:"sm:max-w-md bg-background border",children:[i.jsx(ln,{children:i.jsxs(cn,{children:["Token Usage",o?`  ${o.display_name||o.email}`:""]})}),i.jsxs("div",{className:"space-y-4 py-2",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{children:"Timeframe"}),i.jsxs(Ht,{value:g,onValueChange:async Y=>{const de=Y;v(de),o&&await Ao(o.user_id,de)},children:[i.jsx(Ut,{className:"bg-background border",children:i.jsx(Dt,{})}),i.jsxs(zt,{className:"bg-background border z-50",children:[i.jsx(Ge,{value:"7d",children:"Last 7 days"}),i.jsx(Ge,{value:"30d",children:"Last 30 days"}),i.jsx(Ge,{value:"this_month",children:"This month"})]})]})]}),i.jsxs("div",{className:"rounded-md border p-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tokens"}),i.jsx("div",{className:"text-2xl font-bold",children:b?"":(x==null?void 0:x.toLocaleString())??0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Assigned To Agent"}),i.jsx("div",{className:"text-xl font-semibold",children:(k==null?void 0:k.assignedTo)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Takeovers Initiated"}),i.jsx("div",{className:"text-xl font-semibold",children:(k==null?void 0:k.assignedBy)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Resolved by Agent"}),i.jsx("div",{className:"text-xl font-semibold",children:(k==null?void 0:k.resolvedBy)??0})]}),i.jsxs("div",{className:"rounded-md border p-3",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"AIAgent Handovers"}),i.jsx("div",{className:"text-xl font-semibold",children:(k==null?void 0:k.handoverFromAI)??0})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"outline",onClick:()=>s(!1),children:"Close"})}),i.jsx(fe,{children:i.jsx("p",{children:"Tutup"})})]})})]})]})})]})},CIe=e=>e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),$R=e=>e==="read_own"?"Own":e==="read_all"?"All":e==="read_channel_owned"?"My Channels":e==="read_collaborator"?"Collaborator":e==="read"?"Read":e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()),AIe=({permissions:e,assignedPermissionIds:t,onToggle:n,isReadOnly:r=!1,className:a})=>{const[s,o]=p.useState(""),[l,c]=p.useState({}),[u,f]=p.useState(new Set),d=p.useMemo(()=>{const y={};return e.forEach(b=>{y[b.resource]||(y[b.resource]={}),y[b.resource][b.action]=b}),y},[e]),h=p.useMemo(()=>{const y=s.toLowerCase().trim();return y?Object.keys(zu).filter(b=>b.toLowerCase().includes(y)?!0:zu[b].some(k=>k.toLowerCase().includes(y))):Object.keys(zu)},[s]),m=async(y,b)=>{if(!(r||u.has(y)))try{f(w=>new Set(w).add(y)),await n(y,b)}catch(w){console.error("Failed to toggle permission",w)}finally{f(w=>{const k=new Set(w);return k.delete(y),k})}},g=async(y,b)=>{if(r||l[y])return;const w=b.map(j=>{var S;return(S=d[y])==null?void 0:S[j]}).filter(j=>!!j);if(w.length===0)return;const _=!w.every(j=>t.includes(j.id));c(j=>({...j,[y]:!0}));try{const j=b.filter(E=>E==="read"||E.startsWith("read_")),S=w.filter(E=>!j.includes(E.action)),A=w.filter(E=>j.includes(E.action)),T=["read_own","read_channel_owned","read_collaborator","read_all","read"].findLast(E=>A.some(I=>I.action===E))||null,M=[];if(_){for(const E of S)t.includes(E.id)||M.push(n(E.id,!0));for(const E of A){const I=T?E.action===T:!1;t.includes(E.id)!==I&&M.push(n(E.id,I))}}else for(const E of[...S,...A])t.includes(E.id)&&M.push(n(E.id,!1));const F=5;for(let E=0;E<M.length;E+=F)await Promise.all(M.slice(E,E+F))}catch(j){console.error(`Failed to bulk toggle for ${y}`,j)}finally{c(j=>({...j,[y]:!1}))}},v=(y,b,w,k=!1)=>{var T;const _=(T=d[y])==null?void 0:T[b];if(!_)return null;const j=t.includes(_.id),S=yee(b),A=u.has(_.id)||l[y],C=w||$R(b);return i.jsxs("div",{className:Se("flex items-center justify-between p-2 rounded-md transition-colors text-sm",j?"bg-primary/5":"hover:bg-muted/50",S&&j&&"bg-red-50 dark:bg-red-950/20"),children:[i.jsx("div",{className:"flex items-center gap-2 flex-1",children:i.jsxs(qe,{htmlFor:_.id,className:Se("cursor-pointer font-medium flex items-center gap-2",S?"text-red-600 dark:text-red-400":"text-foreground"),children:[C,S&&k&&i.jsx(Hs,{className:"h-3 w-3 text-red-500"})]})}),i.jsx(kl,{id:_.id,checked:j,onCheckedChange:M=>m(_.id,M),disabled:r||A,className:Se(S&&j&&"data-[state=checked]:bg-red-500")})]},b)},x=(y,b)=>{const w=b.filter(A=>A==="read"||A.startsWith("read_"));if(w.length===0)return null;const _=["read_own","read_channel_owned","read_collaborator","read_all","read"].filter(A=>w.includes(A)),j=_.findLast(A=>{var T,M;const C=(M=(T=d[y])==null?void 0:T[A])==null?void 0:M.id;return C?t.includes(C):!1})||null,S=async A=>{var T,M;if(r)return;const C=[];for(const F of _){const E=(T=d[y])==null?void 0:T[F];if(!E)continue;const I=t.includes(E.id),P=A===F;I!==P&&C.push(n(E.id,P))}if(A===null)for(const F of _){const E=(M=d[y])==null?void 0:M[F];if(!E)continue;t.includes(E.id)&&C.push(n(E.id,!1))}await Promise.all(C)};return i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"inline-flex flex-wrap items-center gap-1 rounded-md border p-1 bg-muted/30",children:[i.jsx(te,{size:"sm",variant:j===null?"default":"ghost",className:Se("h-7 text-xs"),onClick:()=>S(null),disabled:r,children:"None"}),_.map(A=>{const C=$R(A),T=y==="threads"&&(A==="read_channel_owned"||A==="read_collaborator")||y==="messages"&&A==="read_collaborator",M=y==="threads"&&A==="read_channel_owned"?"Can view threads that belong to channels assigned to this agent.":y==="threads"&&A==="read_collaborator"?"Can view threads where the user is directly involved (assignee, creator, resolver, or collaborator).":y==="messages"&&A==="read_collaborator"?"Can view messages in threads where the user is involved as collaborator or assignee.":"",F=i.jsx(te,{size:"sm",variant:j===A?"default":"ghost",className:Se("h-7 text-xs"),onClick:()=>S(A),disabled:r,children:C},A);return T?i.jsx(I1,{children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:F}),i.jsx(fe,{side:"top",children:i.jsx("div",{className:"max-w-xs text-xs",children:M})})]})},A):F})]})})};return i.jsxs("div",{className:Se("space-y-6",a),children:[i.jsx("div",{className:"sticky top-0 z-10 bg-background/95 backdrop-blur pb-4 pt-2",children:i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(ks,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),i.jsx(Ye,{placeholder:"Search resources or actions...",value:s,onChange:y=>o(y.target.value),className:"pl-9 bg-background"})]})}),i.jsxs("div",{className:"columns-1 md:columns-2 xl:columns-3 gap-6 space-y-6",children:[h.map(y=>{const b=zu[y],w=b.map(M=>{var F;return(F=d[y])==null?void 0:F[M]}).filter(Boolean);if(w.length===0)return null;const k=w.every(M=>t.includes(M==null?void 0:M.id)),_=l[y],j=b.filter(M=>{const F=gw(M);return["create","update","delete"].includes(F)}),S=b.filter(M=>gw(M)==="read"),A=b.filter(M=>gw(M)==="special"),C=S.filter(M=>M==="read"||M.startsWith("read_")),T=S.filter(M=>!C.includes(M));return i.jsx("div",{className:"break-inside-avoid mb-6",children:i.jsxs(Me,{className:Se("h-full border-t-4 shadow-sm",k?"border-t-primary":"border-t-muted"),children:[i.jsx(nt,{className:"pb-3 bg-muted/30 pt-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(tt,{className:"text-base font-semibold flex items-center gap-2",children:[y==="security"?i.jsx(Jh,{className:"h-4 w-4 text-orange-500"}):y==="analytics"?i.jsx(ks,{className:"h-4 w-4 text-blue-500"}):i.jsx(ro,{className:"h-4 w-4 text-muted-foreground"}),CIe(y)]}),!r&&i.jsx(te,{variant:"ghost",size:"sm",className:"h-7 text-xs text-muted-foreground hover:text-primary",onClick:()=>g(y,b),disabled:_,children:_?"...":k?"Unselect All":"Select All"})]})}),i.jsxs(et,{className:"pt-4 space-y-4",children:[j.length>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Manage"}),i.jsx("div",{className:"grid gap-1",children:j.map(M=>v(y,M,y==="admin_panel"&&M==="update"?"Update Settings":void 0))})]}),S.length>0&&i.jsxs("div",{className:Se(j.length>0&&"pt-2 border-t"),children:[i.jsx("div",{className:"flex items-center justify-between mb-2 mt-2",children:i.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider flex items-center gap-1",children:"Access Level"})}),C.length>0&&x(y,b),T.length>0&&i.jsx("div",{className:"mt-2 grid gap-1",children:T.map(M=>v(y,M))})]}),A.length>0&&i.jsxs("div",{className:Se((j.length>0||S.length>0)&&"pt-2 border-t"),children:[i.jsx("h4",{className:"text-xs font-semibold text-orange-600/80 dark:text-orange-400/80 uppercase tracking-wider mb-2 mt-2 flex items-center gap-1",children:"Special Actions"}),i.jsx("div",{className:"grid gap-1",children:A.map(M=>{const E=v(y,M,y==="alerts"&&M==="ack"?"Acknowledge":y==="messages"&&M==="send"?"Send":void 0,!0);return y==="alerts"&&M==="ack"&&E?i.jsx(I1,{children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("div",{children:E})}),i.jsx(fe,{side:"top",children:i.jsx("div",{className:"max-w-xs text-xs",children:"Mark alerts as acknowledged on behalf of this role."})})]})},M):E})})]})]})]})},y)}),h.length===0&&i.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-12 text-center border-2 border-dashed rounded-lg",children:[i.jsx(ks,{className:"h-10 w-10 text-muted-foreground mb-3"}),i.jsx("h3",{className:"text-lg font-medium",children:"No matching permissions"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Try adjusting your search terms."})]})]})]})},EIe=()=>{const[e,t]=p.useState([]),[n,r]=p.useState([]),[a,s]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState(null),[f,d]=p.useState("roles"),{toast:h}=Gc(),{refreshRBAC:m,hasPermission:g,hasRole:v}=_r(),[x,y]=p.useState({}),[b,w]=p.useState(!1),[k,_]=p.useState(null),[j,S]=p.useState(""),[A,C]=p.useState(""),[T,M]=p.useState(!1),[F,E]=p.useState(!1),[I,P]=p.useState(null),[B,O]=p.useState(!1),$=(c==null?void 0:c.name)==="master_agent",L=g("roles.create"),N=g("roles.update"),U=g("roles.delete"),D=g("roles.update"),R=g("roles.update"),K=async()=>{try{l(!0);const{data:q,error:ce}=await ae.from("roles").select("*").order("name");if(ce)throw ce;t(q||[]);const{data:ke,error:Ae}=await ae.from("permissions").select("*").order("resource",{ascending:!0});if(Ae)throw Ae;r(ke||[]);const{data:Pe,error:Ie}=await ae.from("role_permissions").select("*");if(Ie)throw Ie;s(Pe||[])}catch(q){console.error("Error fetching RBAC data:",q),h({title:"Error",description:"Failed to fetch permissions data",variant:"destructive"})}finally{l(!1)}};p.useEffect(()=>{K()},[]);const Q=()=>{_(null),S(""),C(""),w(!0)},H=q=>{_(q),S(q.name),C(q.description),w(!0)},V=async()=>{try{if(M(!0),k){if(!N){h({title:"Forbidden",description:"You do not have permission to update roles",variant:"destructive"});return}const{error:q}=await ae.from("roles").update({name:j,description:A}).eq("id",k.id);if(q)throw q;try{await Bt({action:"roles.update",resource:"roles",resourceId:k.id,context:{name:j}})}catch{}h({title:"Saved",description:"Role updated"})}else{if(!L){h({title:"Forbidden",description:"You do not have permission to create roles",variant:"destructive"});return}const{data:q,error:ce}=await ae.from("roles").insert([{name:j,description:A}]).select("id").single();if(ce)throw ce;try{await Bt({action:"roles.create",resource:"roles",resourceId:(q==null?void 0:q.id)??null,context:{name:j}})}catch{}h({title:"Created",description:"Role created"})}w(!1),await K()}catch{h({title:"Error",description:"Failed to save role",variant:"destructive"})}finally{M(!1)}},ie=async q=>{try{if(!U){h({title:"Forbidden",description:"You do not have permission to delete roles",variant:"destructive"});return}y(ke=>({...ke,[q.id]:!0})),O(!0),await ae.from("role_permissions").delete().eq("role_id",q.id),await ae.from("user_roles").delete().eq("role_id",q.id);const{error:ce}=await ae.from("roles").delete().eq("id",q.id);if(ce)throw ce;try{await Bt({action:"roles.delete",resource:"roles",resourceId:q.id})}catch{}h({title:"Deleted",description:"Role deleted"}),E(!1),P(null),await K()}catch{h({title:"Error",description:"Failed to delete role",variant:"destructive"})}finally{y(ce=>({...ce,[q.id]:!1})),O(!1)}},G=(q,ce)=>a.some(ke=>ke.role_id===q&&ke.permission_id===ce),le=p.useRef(null),se=()=>{le.current&&clearTimeout(le.current),le.current=setTimeout(()=>{m().catch(()=>{})},250)},Z=async(q,ce)=>{try{const ke=G(q,ce),Ae=`${q}:${ce}`;if(y(Pe=>({...Pe,[Ae]:!0})),ke){if(!R){h({title:"Forbidden",description:"You do not have permission to revoke role permissions",variant:"destructive"});return}const{error:Pe}=await ae.rpc("revoke_role_permission",{p_role:q,p_perm:ce});if(Pe)throw Pe;s(Ie=>Ie.filter(Ne=>!(Ne.role_id===q&&Ne.permission_id===ce)));try{await Bt({action:"rbac.revoke",resource:"rbac",context:{role_id:q,permission_id:ce}})}catch{}}else{if(!D){h({title:"Forbidden",description:"You do not have permission to grant role permissions",variant:"destructive"});return}const{error:Pe}=await ae.rpc("grant_role_permission",{p_role:q,p_perm:ce});if(Pe)throw Pe;s(Ie=>[...Ie,{role_id:q,permission_id:ce}]);try{await Bt({action:"rbac.grant",resource:"rbac",context:{role_id:q,permission_id:ce}})}catch{}}se(),h({title:"Success",description:`Permission ${ke?"removed from":"added to"} role`})}catch(ke){console.error("Error updating role permission:",ke),h({title:"Error",description:"Failed to update permission",variant:"destructive"})}finally{const ke=`${q}:${ce}`;y(Ae=>({...Ae,[ke]:!1}))}},_e=q=>a.filter(ke=>ke.role_id===q).length,z=q=>q.replace("_"," ").toUpperCase();return o?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Role Permissions"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage role permissions"})]}),i.jsx(Vt,{permission:"roles.create",children:i.jsxs(te,{onClick:Q,children:[i.jsx(As,{className:"h-4 w-4 mr-2"})," New Role"]})})]}),i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx(ro,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4 animate-pulse"}),i.jsx("p",{className:"text-muted-foreground",children:"Loading roles..."})]})})]}):f==="roles"?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Role Permissions"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage role permissions"})]}),i.jsxs(te,{onClick:Q,disabled:!L,title:L?void 0:"No permission: roles.create",children:[i.jsx(As,{className:"h-4 w-4 mr-2"})," New Role"]})]}),i.jsxs(Me,{className:"pt-2",children:[i.jsxs(nt,{children:[i.jsx(tt,{children:"Roles"}),i.jsx(pi,{children:"Click on a role to manage its permissions"})]}),i.jsx(et,{children:i.jsxs(bb,{children:[i.jsx(wb,{children:i.jsxs(Js,{children:[i.jsx(qn,{children:"Role Name"}),i.jsx(qn,{children:"Description"}),i.jsx(qn,{children:"Permissions"}),i.jsx(qn,{children:"Actions"})]})}),i.jsx(jb,{children:e.map(q=>i.jsxs(Js,{children:[i.jsx(Rn,{className:"font-medium",children:i.jsx(St,{variant:"outline",children:z(q.name)})}),i.jsx(Rn,{children:q.description}),i.jsx(Rn,{children:i.jsxs(St,{variant:"secondary",children:[_e(q.id)," permissions"]})}),i.jsx(Rn,{children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vt,{permission:"roles.read",children:i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{u(q),d("configure")},children:[i.jsx(no,{className:"h-4 w-4 mr-2"}),"Configure"]})}),i.jsx(fe,{children:i.jsx("p",{children:"Konfigurasi aturan akses untuk peran ini"})})]})}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Vt,{permission:"roles.update",children:i.jsx(te,{size:"sm",className:"h-8 w-8 p-0 bg-yellow-500 hover:bg-yellow-600 text-white",onClick:()=>H(q),"aria-label":"Edit role",children:i.jsx(ja,{className:"h-4 w-4"})})})}),i.jsx(fe,{children:i.jsx("p",{children:"Edit peran ini"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Vt,{permission:"roles.delete",children:i.jsx(te,{size:"sm",onClick:()=>{P(q),E(!0)},disabled:!!x[q.id],className:"h-8 w-8 p-0 bg-red-600 hover:bg-red-700 text-white","aria-label":"Delete role",children:i.jsx(Er,{className:"h-4 w-4"})})})}),i.jsx(fe,{children:i.jsx("p",{children:"Hapus peran ini"})})]})]})})]},q.id))})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Me,{children:[i.jsxs(nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(tt,{className:"text-sm font-medium",children:"Total Roles"}),i.jsx(ro,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(et,{children:i.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),i.jsxs(Me,{children:[i.jsxs(nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(tt,{className:"text-sm font-medium",children:"Total Permissions"}),i.jsx(no,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx(et,{children:i.jsx("div",{className:"text-2xl font-bold",children:n.length})})]}),i.jsxs(Me,{children:[i.jsxs(nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(tt,{className:"text-sm font-medium",children:"Resources"}),i.jsx(no,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(et,{children:[i.jsx("div",{className:"text-2xl font-bold",children:new Set(n.map(q=>q.resource)).size}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique resources"})]})]})]}),i.jsx(Vt,{permission:"roles.update",children:i.jsx(fn,{open:b,onOpenChange:w,children:i.jsxs(on,{children:[i.jsx(ln,{children:i.jsx(cn,{children:k?"Edit Role":"Create Role"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(qe,{htmlFor:"rname",children:"Name"}),i.jsx(Ye,{id:"rname",value:j,onChange:q=>S(q.target.value),placeholder:"e.g. Super Agent"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(qe,{htmlFor:"rdesc",children:"Description"}),i.jsx(Ye,{id:"rdesc",value:A,onChange:q=>C(q.target.value),placeholder:"Optional"})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[i.jsx(te,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),i.jsx(te,{onClick:V,disabled:T||!j.trim()||(k?!N:!L),title:k?N?void 0:"No permission: roles.update":L?void 0:"No permission: roles.create",children:T?"Saving":"Save"})]})]})]})})}),i.jsx(Vt,{permission:"roles.delete",children:i.jsx(fn,{open:F,onOpenChange:E,children:i.jsxs(on,{children:[i.jsxs(ln,{children:[i.jsx(cn,{children:"Delete Role"}),i.jsxs(Pr,{children:["This will permanently delete the role",I?` "${z(I.name)}"`:""," and all its permissions."]})]}),i.jsxs("div",{className:"pt-2 flex justify-end gap-2",children:[i.jsx(te,{variant:"outline",onClick:()=>E(!1),disabled:B,children:"Cancel"}),i.jsx(te,{variant:"destructive",onClick:()=>I&&ie(I),disabled:B||!U,title:U?void 0:"No permission: roles.delete",children:B?"Deleting":"Delete"})]})]})})})]}):f==="configure"&&c?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx(te,{variant:"ghost",onClick:()=>d("roles"),className:"mb-2",children:" Back to Roles"}),i.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Configure ",z(c.name)]}),i.jsx("p",{className:"text-muted-foreground",children:c.description})]})}),$&&i.jsx(Me,{children:i.jsxs(nt,{children:[i.jsx(tt,{children:"Root Role"}),i.jsx(pi,{children:"Master Agent is a root role with full privileges across the system."})]})}),i.jsxs("div",{className:"py-4",children:[i.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Full Permission Matrix"}),i.jsx(AIe,{permissions:n,assignedPermissionIds:a.filter(q=>q.role_id===c.id).map(q=>q.permission_id),onToggle:async(q,ce)=>{G(c.id,q)!==ce&&await Z(c.id,q)},isReadOnly:!D&&!R})]})]}):null},PIe={maxSize:100,dedupeWindow:1e3,batchWindow:100,maxBatchSize:10};class TIe{constructor(t={}){Lt(this,"queue",[]);Lt(this,"processing",!1);Lt(this,"pendingRequests",new Map);Lt(this,"config");this.config={...PIe,...t}}async enqueue(t,n={operation:"read"}){const{operation:r="read",endpoint:a,priority:s=0,dedupeKey:o}=n,l=o||this.generateDedupeKey(t,a),c=this.pendingRequests.get(l);if(c)return c;if(this.queue.length>=this.config.maxSize){this.queue.sort((g,v)=>v.priority-g.priority);const m=this.queue.pop();m&&m.reject(new Error("Request queue full"))}let u,f;const d=new Promise((m,g)=>{u=m,f=g});this.pendingRequests.set(l,d);const h={id:l,fn:t,priority:s,timestamp:Date.now(),operation:r,endpoint:a,resolve:u,reject:f};return this.queue.push(h),this.queue.sort((m,g)=>g.priority-m.priority),this.processQueue(),d.finally(()=>{this.pendingRequests.delete(l)}),d}async processQueue(){if(!(this.processing||this.queue.length===0)){this.processing=!0;try{for(;this.queue.length>0;){const t=this.getBatch();if(t.length===1){const n=t[0];try{const r=await n.fn();n.resolve(r)}catch(r){n.reject(r)}}else await Promise.allSettled(t.map(async n=>{try{const r=await n.fn();n.resolve(r)}catch(r){n.reject(r)}}))}}finally{this.processing=!1}}}getBatch(){if(this.queue.length===0)return[];const t=Date.now(),n=[],r=this.queue[0];for(let a=0;a<this.queue.length&&n.length<this.config.maxBatchSize;a++){const s=this.queue[a],o=t-s.timestamp;s.operation===r.operation&&o<=this.config.batchWindow&&(!r.endpoint||s.endpoint===r.endpoint)&&n.push(s)}return n.forEach(a=>{const s=this.queue.findIndex(o=>o.id===a.id);s>=0&&this.queue.splice(s,1)}),n}generateDedupeKey(t,n){return`${t.toString()}:${n||""}`.slice(0,100)}debounce(t,n=300,r={}){return new Promise((a,s)=>{let o=null,l=Date.now();const c=async()=>{try{const f=await this.enqueue(t,{...r,dedupeKey:`debounce:${r.endpoint||"default"}`});a(f)}catch(f){s(f)}},u=()=>{o&&clearTimeout(o),o=setTimeout(()=>{Date.now()-l>=n?c():u()},n)};u()})}getStats(){return{queueLength:this.queue.length,pendingRequests:this.pendingRequests.size,processing:this.processing}}clear(){this.queue.forEach(t=>{t.reject(new Error("Queue cleared"))}),this.queue=[],this.pendingRequests.clear()}}const LR=new TIe,FR=["#60a5fa","#2563eb","#1d4ed8","#10b981","#f59e0b","#ef4444"],ri=({label:e,description:t})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:t})})]})]});function OIe(){const[e,t]=p.useState(Jt.getStats()),[n,r]=p.useState(null),[a,s]=p.useState(LR.getStats()),[o,l]=p.useState(Ys.getStats()),[c,u]=p.useState(0),{hasPermission:f}=_r(),[d,h]=p.useState(!1),[m,g]=p.useState(!1),[v,x]=p.useState(!1),[y,b]=p.useState(!1),[w,k]=p.useState(!1),[_,j]=p.useState(!1),[S,A]=p.useState(!1),[C,T]=p.useState(!1),[M,F]=p.useState(""),[E,I]=p.useState(Jt.getConfig()),[P,B]=p.useState(Jt.getConfig()),[O,$]=p.useState(It.getConfig()),[L,N]=p.useState(It.getConfig()),U=ne=>Number.isFinite(ne)?ne.toFixed(3).replace(/\.?0+$/,""):"",[D,R]=p.useState(()=>U(It.getConfig().minMultiplier)),[K,Q]=p.useState(()=>U(It.getConfig().maxMultiplier)),[H,V]=p.useState({read:It.getMultiplier("read"),write:It.getMultiplier("write"),rpc:It.getMultiplier("rpc"),auth:It.getMultiplier("auth")});f("admin_panel.update"),p.useEffect(()=>{const ne=setInterval(()=>{t(Jt.getStats()),s(LR.getStats()),l(Ys.getStats()),I(Jt.getConfig()),$(It.getConfig()),V({read:It.getMultiplier("read"),write:It.getMultiplier("write"),rpc:It.getMultiplier("rpc"),auth:It.getMultiplier("auth")})},1e3),Ee=()=>{t(Jt.getStats()),u(be=>be+1)};return Jt.on("stateChange",Ee),Jt.on("failure",Ee),Jt.on("success",Ee),ie(),()=>{clearInterval(ne),Jt.off(Ee)}},[]);const ie=async()=>{try{const ne=await EF();r(ne)}catch(ne){console.error("Failed to load metrics:",ne)}},G=ne=>{switch(ne){case Yl.CLOSED:return"bg-green-100 text-green-800 border-green-200";case Yl.OPEN:return"bg-red-100 text-red-800 border-red-200";case Yl.HALF_OPEN:return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},le=ne=>{switch(ne){case Yl.CLOSED:return i.jsx(oh,{className:"h-5 w-5 text-green-600"});case Yl.OPEN:return i.jsx(Hs,{className:"h-5 w-5 text-red-600"});case Yl.HALF_OPEN:return i.jsx(hP,{className:"h-5 w-5 text-yellow-600"});default:return null}},se=()=>{h(!0)},Z=()=>{Jt.reset(),t(Jt.getStats()),u(ne=>ne+1),h(!1),F(" Circuit breaker berhasil direset!"),A(!0)},_e=()=>{g(!0)},z=()=>{Jt.open(),t(Jt.getStats()),u(ne=>ne+1),g(!1),F(" Circuit breaker telah dibuka! Semua request database akan diblokir."),A(!0)},q=()=>{x(!0)},ce=async()=>{try{await om.forceFlush(),x(!1),F(" Metrik berhasil dikirim ke database!"),A(!0)}catch(ne){x(!1),F(" Gagal mengirim metrik: "+(ne instanceof Error?ne.message:"Unknown error")),T(!0)}},ke=()=>{B(Jt.getConfig()),b(!0)},Ae=()=>{Jt.updateConfig(P),I(Jt.getConfig()),b(!1),F(" Konfigurasi circuit breaker berhasil diperbarui!"),A(!0)},Pe=()=>{const ne=It.getConfig();N(ne),R(U(ne.minMultiplier)),Q(U(ne.maxMultiplier)),k(!0)},Ie=()=>{It.updateConfig(L),$(It.getConfig()),V({read:It.getMultiplier("read"),write:It.getMultiplier("write"),rpc:It.getMultiplier("rpc"),auth:It.getMultiplier("auth")}),k(!1),F(" Konfigurasi adaptive rate limiter berhasil diperbarui!"),A(!0)},Ne=e.totalRequests>0?((e.totalRequests-e.failures)/e.totalRequests*100).toFixed(1):"0",ze=L.baseConfig.read.limit,at=L.baseConfig.write.limit,pt=L.baseConfig.rpc.limit,_t=L.baseConfig.auth.limit,re=L.minMultiplier,pe=L.maxMultiplier,He=L.healthyLatencyThreshold,Ue=L.stressLatencyThreshold,oe=L.adjustmentInterval,ct=Number.isFinite(ze)&&ze>=10&&ze<=1e3,Pt=Number.isFinite(at)&&at>=5&&at<=500,kt=Number.isFinite(pt)&&pt>=5&&pt<=200,Xe=Number.isFinite(_t)&&_t>=2&&_t<=100,ye=Number.isFinite(re)&&re>=.1&&re<=1,it=Number.isFinite(pe)&&pe>=1&&pe<=5,$t=Number.isFinite(He)&&He>=50&&He<=1e3,ue=Number.isFinite(Ue)&&Ue>=500&&Ue<=1e4,We=Number.isFinite(oe)&&oe>=1e4&&oe<=6e5;return Array.from({length:10},(ne,Ee)=>({time:new Date(Date.now()-(9-Ee)*6e4).toLocaleTimeString(),requests:Math.floor(Math.random()*50)+10,failures:Math.floor(Math.random()*5)})),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold",children:"Circuit Breaker Status"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor database protection and performance"})]}),i.jsxs(te,{variant:"outline",size:"sm",onClick:ie,children:[i.jsx(Py,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Circuit State",description:"Status circuit breaker saat ini: CLOSED (normal, semua request diizinkan), OPEN (terhenti, memblokir semua request untuk melindungi database), atau HALF_OPEN (testing, mencoba menghubungkan kembali)"})})}),i.jsxs(et,{children:[i.jsxs("div",{className:`flex items-center gap-3 px-3 py-2 rounded-md border ${G(e.state)}`,children:[le(e.state),i.jsx("span",{className:"font-semibold",children:e.state})]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Changed: ",new Date(e.stateChangedAt).toLocaleTimeString()]})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Success Rate",description:"Persentase request database yang berhasil dari total request. Indikator kesehatan sistem - semakin tinggi semakin baik. Nilai rendah menunjukkan masalah potensial dengan database atau koneksi"})})}),i.jsxs(et,{children:[i.jsxs("div",{className:"text-2xl font-semibold",children:[Ne,"%"]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.totalRequests-e.failures," / ",e.totalRequests," requests"]})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Total Requests",description:"Jumlah total request database yang telah diproses sejak circuit breaker diinisialisasi. Termasuk request yang berhasil dan gagal"})})}),i.jsxs(et,{children:[i.jsx("div",{className:"text-2xl font-semibold",children:e.totalRequests.toLocaleString()}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.failures," failures, ",e.successes," successes"]})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Last Activity",description:"Waktu terakhir request database berhasil atau gagal. Membantu mengidentifikasi kapan masalah terakhir terjadi atau kapan sistem terakhir berfungsi normal"})})}),i.jsxs(et,{children:[i.jsx("div",{className:"text-sm",children:e.lastSuccessTime?i.jsxs("div",{children:[i.jsx("span",{className:"text-green-600",children:"Last Success:"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.lastSuccessTime).toLocaleTimeString()})]}):null}),i.jsx("div",{className:"text-sm mt-2",children:e.lastFailureTime?i.jsxs("div",{children:[i.jsx("span",{className:"text-red-600",children:"Last Failure:"}),i.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(e.lastFailureTime).toLocaleTimeString()})]}):null})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsxs(tt,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(xP,{className:"h-4 w-4"}),i.jsx(ri,{label:"Request Queue",description:"Antrian request database yang menunggu untuk diproses. Membantu menangani beban tinggi dengan mengatur prioritas dan menghindari duplikasi request"})]})}),i.jsx(et,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Queue Length:",i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Jumlah total request dalam antrian, termasuk yang menunggu dan sedang diproses"})})]}),i.jsx("span",{className:"font-semibold",children:a.queueLength})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Pending Requests:",i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Jumlah request yang menunggu untuk diproses, belum dieksekusi"})})]}),i.jsx("span",{className:"font-semibold",children:a.pendingRequests})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Processing:",i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Status apakah queue sedang memproses request atau idle"})})]}),i.jsx(St,{variant:a.processing?"default":"secondary",children:a.processing?"Yes":"No"})]})]})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsxs(tt,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ro,{className:"h-4 w-4"}),i.jsx(ri,{label:"Rate Limiter (Adaptive)",description:"Sistem pembatas kecepatan request adaptif yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem. Melindungi database dari traffic spike dan overload"})]})}),i.jsxs(et,{children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Reads Limit:",i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(fe,{children:i.jsxs("p",{children:["Batas maksimal request baca data per menit (dinamis: ",It.getEffectiveLimit("read")," request/menit, ",(H.read*100).toFixed(0),"% dari base ",O.baseConfig.read.limit,"). Limit menyesuaikan otomatis berdasarkan kondisi sistem"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[It.getEffectiveLimit("read"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(H.read*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Writes Limit:",i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(fe,{children:i.jsxs("p",{children:["Batas maksimal request tulis data per menit (dinamis: ",It.getEffectiveLimit("write")," request/menit, ",(H.write*100).toFixed(0),"% dari base ",O.baseConfig.write.limit,"). Lebih ketat dari reads karena write lebih berisiko terhadap database"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[It.getEffectiveLimit("write"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(H.write*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["RPC Limit:",i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(fe,{children:i.jsxs("p",{children:["Batas maksimal panggilan fungsi database (RPC) per menit (dinamis: ",It.getEffectiveLimit("rpc")," request/menit, ",(H.rpc*100).toFixed(0),"% dari base ",O.baseConfig.rpc.limit,"). Fungsi database biasanya lebih berat dari query biasa"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[It.getEffectiveLimit("rpc"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(H.rpc*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Auth Limit:",i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(fe,{children:i.jsxs("p",{children:["Batas maksimal operasi autentikasi per menit (dinamis: ",It.getEffectiveLimit("auth")," request/menit, ",(H.auth*100).toFixed(0),"% dari base ",O.baseConfig.auth.limit,")"]})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"font-semibold",children:[It.getEffectiveLimit("auth"),"/min"]}),i.jsxs("span",{className:"text-xs text-muted-foreground ml-1",children:["(",(H.auth*100).toFixed(0),"%)"]})]})]})]}),i.jsx("div",{className:"mt-3 pt-3 border-t text-xs text-muted-foreground",children:i.jsx("p",{children:" Limit berubah otomatis berdasarkan response time dan error rate sistem"})})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsxs(tt,{className:"text-sm font-medium flex items-center gap-2",children:[i.jsx(ew,{className:"h-4 w-4"}),i.jsx(ri,{label:"Cache",description:"Sistem penyimpanan sementara untuk hasil query database. Mengurangi beban database dengan menyimpan hasil yang sering digunakan dan meningkatkan kecepatan response"})]})}),i.jsx(et,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Cached Entries:",i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Jumlah hasil query yang saat ini tersimpan di cache. Semakin banyak semakin baik untuk performa, selama tidak melebihi batas maksimal"})})]}),i.jsx("span",{className:"font-semibold",children:o.size})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsxs("span",{className:"text-sm flex items-center gap-1",children:["Max Size:",i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})]})}),i.jsx(fe,{children:i.jsx("p",{children:"Batas maksimal jumlah entry yang bisa disimpan di cache. Setelah mencapai limit, entry lama akan dihapus (LRU policy)"})})]}),i.jsx("span",{className:"font-semibold",children:o.maxSize})]}),i.jsx(te,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>{Ys.clear(),l(Ys.getStats())},children:"Clear Cache"})]})})]})]}),n&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Operations by Type",description:"Distribusi operasi database berdasarkan jenis (read, write, RPC, auth). Membantu memahami pola penggunaan database dan mengidentifikasi jenis operasi yang paling banyak digunakan"})})}),i.jsx(et,{className:"h-64",children:i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:Object.entries(n.operationsByType||{}).map(([ne,Ee])=>({type:ne,count:Ee})),children:[i.jsx(Ak,{strokeDasharray:"3 3"}),i.jsx(na,{dataKey:"type"}),i.jsx(ra,{}),i.jsx(Jn,{}),i.jsx(Ln,{dataKey:"count",fill:FR[1]})]})})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Circuit Breaker States",description:"Distribusi status circuit breaker saat operasi database dilakukan. Menunjukkan berapa banyak operasi yang terjadi pada setiap state (CLOSED, OPEN, HALF_OPEN)"})})}),i.jsx(et,{className:"h-64",children:i.jsx(ii,{width:"100%",height:"100%",children:i.jsxs(si,{data:Object.entries(n.circuitBreakerStates||{}).map(([ne,Ee])=>({state:ne,count:Ee})),children:[i.jsx(Ak,{strokeDasharray:"3 3"}),i.jsx(na,{dataKey:"state"}),i.jsx(ra,{}),i.jsx(Jn,{}),i.jsx(Ln,{dataKey:"count",fill:FR[3]})]})})})]})]}),i.jsxs(Vt,{permission:"admin_panel.update",children:[i.jsxs(Me,{className:"mb-4",children:[i.jsx(nt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(tt,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Limit Configuration",description:"Konfigurasi threshold dan timeout untuk circuit breaker. Klik Edit untuk mengubah nilai-nilai ini"})}),i.jsxs(te,{variant:"outline",size:"sm",onClick:ke,children:[i.jsx(ja,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),i.jsx(et,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Failure Threshold"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsxs("p",{children:["Buka circuit setelah ",E.failureThreshold," kegagalan"]})})]})]}),i.jsx(Ye,{value:E.failureThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Buka circuit setelah ",E.failureThreshold," kegagalan"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Reset Timeout (ms)"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsxs("p",{children:["Tunggu ",(E.resetTimeout/1e3).toFixed(0),"s sebelum uji pemulihan"]})})]})]}),i.jsx(Ye,{value:E.resetTimeout,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tunggu ",(E.resetTimeout/1e3).toFixed(0),"s sebelum uji pemulihan"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Success Threshold"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsxs("p",{children:["Tutup circuit setelah ",E.successThreshold," sukses"]})})]})]}),i.jsx(Ye,{value:E.successThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Tutup circuit setelah ",E.successThreshold," sukses"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Monitoring Period (ms)"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsxs("p",{children:["Jendela waktu: ",(E.monitoringPeriod/1e3).toFixed(0),"s"]})})]})]}),i.jsx(Ye,{value:E.monitoringPeriod,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Jendela waktu: ",(E.monitoringPeriod/1e3).toFixed(0),"s"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Request Timeout (ms)"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsxs("p",{children:["Timeout request: ",(E.timeout/1e3).toFixed(0),"s"]})})]})]}),i.jsx(Ye,{value:E.timeout,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Timeout request: ",(E.timeout/1e3).toFixed(0),"s"]})]})]})})]}),i.jsxs(Me,{className:"mb-4",children:[i.jsx(nt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(tt,{className:"text-sm font-medium",children:i.jsx(ri,{label:"Adaptive Rate Limiter Configuration",description:"Konfigurasi untuk adaptive rate limiter yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem. Menangani traffic spike dengan lebih baik"})}),i.jsxs(te,{variant:"outline",size:"sm",onClick:Pe,children:[i.jsx(ja,{className:"h-4 w-4 mr-2"}),"Edit"]})]})}),i.jsxs(et,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Reads Base Limit"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Limit dasar untuk operasi read. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Ye,{value:O.baseConfig.read.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[It.getEffectiveLimit("read"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(H.read*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Writes Base Limit"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Limit dasar untuk operasi write. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Ye,{value:O.baseConfig.write.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[It.getEffectiveLimit("write"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(H.write*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"RPC Base Limit"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Limit dasar untuk operasi RPC. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Ye,{value:O.baseConfig.rpc.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[It.getEffectiveLimit("rpc"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(H.rpc*100).toFixed(0),"%)"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Auth Base Limit"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Limit dasar untuk operasi autentikasi. Limit aktual akan disesuaikan secara otomatis berdasarkan kondisi sistem"})})]})]}),i.jsx(Ye,{value:O.baseConfig.auth.limit,disabled:!0,className:"font-mono"}),i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("span",{className:"text-muted-foreground",children:"Effective:"}),i.jsxs("span",{className:"font-semibold",children:[It.getEffectiveLimit("auth"),"/min"]}),i.jsxs("span",{className:"text-green-600",children:["(",(H.auth*100).toFixed(0),"%)"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 pt-4 border-t",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Min Multiplier"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Multiplier minimum (misal: 0.5 = 50% dari base limit). Digunakan saat sistem dalam kondisi stres"})})]})]}),i.jsx(Ye,{value:O.minMultiplier,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Minimum: ",(O.minMultiplier*100).toFixed(0),"% dari base"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Max Multiplier"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Multiplier maksimum (misal: 2.0 = 200% dari base limit). Digunakan saat sistem dalam kondisi sehat"})})]})]}),i.jsx(Ye,{value:O.maxMultiplier,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum: ",(O.maxMultiplier*100).toFixed(0),"% dari base"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Healthy Latency Threshold (ms)"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Response time di bawah ini dianggap sehat. Sistem akan meningkatkan limit (min: 50ms, max: 1000ms)"})})]})]}),i.jsx(Ye,{value:O.healthyLatencyThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(O.healthyLatencyThreshold/1e3).toFixed(1)," seconds"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Stress Latency Threshold (ms)"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Response time di atas ini dianggap stres. Sistem akan menurunkan limit (min: 500ms, max: 10000ms)"})})]})]}),i.jsx(Ye,{value:O.stressLatencyThreshold,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(O.stressLatencyThreshold/1e3).toFixed(1)," seconds"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qe,{className:"text-xs text-muted-foreground",children:"Adjustment Interval (ms)"}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Frekuensi pengecekan dan penyesuaian limit (dalam milliseconds)"})})]})]}),i.jsx(Ye,{value:O.adjustmentInterval,disabled:!0,className:"font-mono"}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Setiap ",(O.adjustmentInterval/1e3).toFixed(0)," detik"]})]})]}),i.jsx("div",{className:"mt-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:[" ",i.jsx("strong",{children:"Status:"})," Adaptive rate limiter aktif dan melindungi database. Limit akan otomatis menyesuaikan berdasarkan metrik sistem (response time, error rate)."]})})]})]}),i.jsx(Me,{className:"mb-4 bg-blue-50 dark:bg-blue-950/10 border-blue-200 dark:border-blue-800",children:i.jsx(nt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs(tt,{className:"text-sm font-medium flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[i.jsx(lv,{className:"h-5 w-5"}),"Dokumentasi Circuit Breaker"]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pelajari cara kerja circuit breaker dan apa yang harus dilakukan jika terjadi masalah"})]}),i.jsxs(te,{variant:"outline",size:"sm",onClick:()=>j(!0),children:[i.jsx(lv,{className:"h-4 w-4 mr-2"}),"Lihat Dokumentasi Circuit Breaker"]})]})})}),i.jsxs(Me,{className:"border-red-200 dark:border-red-800",children:[i.jsx(nt,{children:i.jsxs(tt,{className:"text-sm font-medium flex items-center gap-2 text-red-600 dark:text-red-400",children:[i.jsx(HL,{className:"h-5 w-5"}),i.jsx(ri,{label:"Danger Zone",description:"Tindakan berbahaya yang dapat mempengaruhi seluruh aplikasi. Gunakan dengan sangat hati-hati!"})]})}),i.jsxs(et,{children:[i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"outline",onClick:se,children:"Reset Circuit Breaker"})}),i.jsx(fe,{children:i.jsx("p",{children:"Reset semua statistik dan state circuit breaker ke kondisi awal. Menghapus riwayat kegagalan dan mengembalikan state ke CLOSED"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"destructive",onClick:_e,children:"Manually Open Circuit"})}),i.jsx(fe,{children:i.jsx("p",{children:"Paksa buka circuit breaker secara manual. Akan MEMBLOKIR SEMUA REQUEST DATABASE dan menyebabkan aplikasi berhenti berfungsi. Gunakan hanya dalam keadaan darurat!"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(te,{variant:"outline",onClick:q,children:"Flush Metrics"})}),i.jsx(fe,{children:i.jsx("p",{children:"Kirim semua metrik yang tertunda ke database secara paksa. Tidak berbahaya, hanya memperbarui data metrik di Supabase"})})]})]}),i.jsx("div",{className:"mt-4 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-red-700 dark:text-red-300 font-semibold",children:[" ",i.jsx("strong",{children:"PERINGATAN KRITIS:"})," Tindakan di zona ini dapat menghentikan seluruh aplikasi dan memblokir semua operasi database. Gunakan dengan sangat hati-hati dan hanya jika benar-benar diperlukan!"]})})]})]})]}),i.jsx(fn,{open:d,onOpenChange:h,children:i.jsxs(on,{className:"max-w-md",children:[i.jsxs(ln,{children:[i.jsxs(cn,{className:"flex items-center gap-2",children:[i.jsx(Hs,{className:"h-5 w-5 text-orange-500"}),"Reset Circuit Breaker"]}),i.jsx(Pr,{children:"Apakah Anda yakin ingin mereset circuit breaker?"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-orange-800 dark:text-orange-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-orange-700 dark:text-orange-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Menghapus semua statistik circuit breaker"}),i.jsx("li",{children:"Mereset state ke CLOSED"}),i.jsx("li",{children:"Menghapus riwayat kegagalan"})]}),i.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-3 font-semibold",children:" Tindakan ini TIDAK DAPAT DIBATALKAN!"})]})}),i.jsxs(ba,{children:[i.jsx(te,{variant:"outline",onClick:()=>h(!1),children:"Batal"}),i.jsx(te,{variant:"default",onClick:Z,children:"Reset"})]})]})}),i.jsx(fn,{open:m,onOpenChange:g,children:i.jsxs(on,{className:"max-w-md",children:[i.jsxs(ln,{children:[i.jsxs(cn,{className:"flex items-center gap-2",children:[i.jsx(Hs,{className:"h-5 w-5 text-red-500"}),"Buka Circuit Breaker Secara Manual"]}),i.jsx(Pr,{children:"PERINGATAN KRITIS: Tindakan ini sangat berbahaya!"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-red-800 dark:text-red-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-red-700 dark:text-red-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:i.jsx("strong",{children:"MENGHENTIKAN SEMUA REQUEST DATABASE"})}),i.jsx("li",{children:"Memblokir semua operasi aplikasi"}),i.jsx("li",{children:"Menyebabkan error pada semua fitur yang membutuhkan database"})]}),i.jsxs("div",{className:"mt-3 bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded p-2",children:[i.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-300 font-semibold",children:" APLIKASI AKAN BERHENTI BERFUNGSI!"}),i.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"Gunakan hanya dalam keadaan darurat atau untuk testing."})]})]})}),i.jsxs(ba,{children:[i.jsx(te,{variant:"outline",onClick:()=>g(!1),children:"Batal"}),i.jsx(te,{variant:"destructive",onClick:z,children:"Buka Circuit"})]})]})}),i.jsx(fn,{open:v,onOpenChange:x,children:i.jsxs(on,{className:"max-w-md",children:[i.jsxs(ln,{children:[i.jsxs(cn,{className:"flex items-center gap-2",children:[i.jsx(ew,{className:"h-5 w-5 text-blue-500"}),"Kirim Metrik ke Database"]}),i.jsx(Pr,{children:"Apakah Anda yakin ingin mengirim semua metrik yang tertunda?"})]}),i.jsx("div",{className:"py-4",children:i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 space-y-2",children:[i.jsx("p",{className:"font-semibold text-sm text-blue-800 dark:text-blue-200",children:"Tindakan ini akan:"}),i.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1 list-disc list-inside",children:[i.jsx("li",{children:"Mengirim semua metrik yang tersimpan di memori ke Supabase"}),i.jsx("li",{children:"Memperbarui tabel circuit_breaker_metrics"}),i.jsx("li",{children:"Menghapus metrik dari antrian lokal"})]})]})}),i.jsxs(ba,{children:[i.jsx(te,{variant:"outline",onClick:()=>x(!1),children:"Batal"}),i.jsx(te,{variant:"default",onClick:ce,children:"Kirim Metrik"})]})]})}),i.jsx(fn,{open:S,onOpenChange:A,children:i.jsxs(on,{className:"max-w-md",children:[i.jsx(ln,{children:i.jsxs(cn,{className:"flex items-center gap-2",children:[i.jsx(oh,{className:"h-5 w-5 text-green-500"}),"Berhasil"]})}),i.jsx("div",{className:"py-4",children:i.jsx("p",{className:"text-sm",children:M})}),i.jsx(ba,{children:i.jsx(te,{variant:"default",onClick:()=>A(!1),children:"Tutup"})})]})}),i.jsx(fn,{open:_,onOpenChange:j,children:i.jsxs(on,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(ln,{children:[i.jsxs(cn,{className:"flex items-center gap-2",children:[i.jsx(lv,{className:"h-5 w-5 text-blue-500"}),"Dokumentasi Circuit Breaker"]}),i.jsx(Pr,{children:"Panduan lengkap tentang cara kerja circuit breaker dan langkah-langkah troubleshooting"})]}),i.jsxs("div",{className:"py-4 space-y-6",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ro,{className:"h-5 w-5 text-blue-600"}),"Apa itu Circuit Breaker?"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-2",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{children:"Circuit Breaker"})," adalah mekanisme perlindungan yang mencegah kegagalan sistem database merambat ke seluruh aplikasi. Seperti sekring listrik, circuit breaker akan memutuskan koneksi sementara ketika mendeteksi terlalu banyak kegagalan, sehingga memberikan waktu untuk sistem pulih dan mencegah beban berlebih."]}),i.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"Melindungi database dari beban berlebih dan kegagalan cascade"}),i.jsx("li",{children:"Mengurangi risiko aplikasi crash saat database bermasalah"}),i.jsx("li",{children:"Memberikan waktu recovery otomatis untuk sistem"}),i.jsx("li",{children:"Monitoring dan pelaporan metrik untuk analisis"})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ja,{className:"h-5 w-5 text-blue-600"}),"Penjelasan Detail Setiap Input Circuit Breaker"]}),i.jsx("div",{className:"space-y-4",children:i.jsx("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:i.jsxs("div",{className:"text-sm space-y-4 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"1. Failure Threshold (Ambang Kegagalan)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jumlah maksimal kegagalan yang dapat terjadi dalam jendela waktu monitoring sebelum circuit breaker terbuka (OPEN)."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Failure Threshold: ",E.failureThreshold]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 5 kegagalan (range: 1 - 100)",i.jsx("br",{})," Sistem akan menghitung jumlah kegagalan dalam jendela waktu ",(E.monitoringPeriod/1e3).toFixed(0)," detik",i.jsx("br",{})," Jika mencapai ",E.failureThreshold," kegagalan atau lebih  Circuit breaker akan ",i.jsx("strong",{children:"OPEN"})," (blokir semua request)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah kegagalan cascade dengan memblokir request sebelum sistem benar-benar crash",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu rendah (1-3): Circuit breaker terlalu sensitif, sering terbuka karena error sementara",i.jsx("br",{}),"- Nilai terlalu tinggi (20+): Circuit breaker kurang responsif, database bisa overload sebelum terbuka",i.jsx("br",{}),"- Rekomendasi: 5-10 untuk aplikasi production, 3-5 untuk aplikasi kritis",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Jika threshold = ",E.failureThreshold,", dan terjadi ",E.failureThreshold," timeout/error dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik terakhir  Circuit OPEN"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"2. Reset Timeout (Waktu Tunggu Reset)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Waktu yang harus ditunggu setelah circuit breaker OPEN sebelum mencoba uji pemulihan (transisi ke HALF_OPEN)."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Reset Timeout: ",(E.resetTimeout/1e3).toFixed(0)," detik (",E.resetTimeout,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 30 detik (30000ms, range: 5s - 600s)",i.jsx("br",{})," Setelah circuit OPEN, sistem akan menunggu ",E.resetTimeout/1e3," detik sebelum mencoba uji pemulihan",i.jsx("br",{})," Setelah timeout, circuit breaker akan transisi ke ",i.jsx("strong",{children:"HALF_OPEN"})," (mengizinkan beberapa request terbatas untuk testing)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memberi waktu database untuk recovery sebelum mengizinkan request lagi",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (5-10s): Tidak cukup waktu untuk recovery, circuit langsung terbuka lagi",i.jsx("br",{}),"- Nilai terlalu panjang (300s+): Aplikasi terlalu lama tidak bisa digunakan",i.jsx("br",{}),"- Rekomendasi: 30-60 detik untuk masalah network sementara, 60-120 detik untuk masalah database serius",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Circuit OPEN  Tunggu ",E.resetTimeout/1e3," detik  Uji dengan ",E.successThreshold," request terbatas  Jika semua sukses, kembali CLOSED"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"3. Success Threshold (Ambang Keberhasilan)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jumlah minimal request yang harus berhasil berturut-turut dalam fase HALF_OPEN sebelum circuit breaker kembali CLOSED."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Success Threshold: ",E.successThreshold]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 2 sukses berturut-turut (range: 1 - 10)",i.jsx("br",{})," Setelah circuit HALF_OPEN (uji pemulihan), sistem akan mengizinkan beberapa request terbatas",i.jsx("br",{})," Jika ",E.successThreshold," request berhasil berturut-turut  Circuit breaker akan ",i.jsx("strong",{children:"CLOSED"})," (kembali normal)",i.jsx("br",{})," Jika ada 1 request gagal  Circuit breaker kembali ",i.jsx("strong",{children:"OPEN"})," (tunggu reset timeout lagi)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memastikan sistem benar-benar pulih sebelum mengizinkan semua request",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu rendah (1): Terlalu mudah kembali CLOSED, bisa langsung OPEN lagi",i.jsx("br",{}),"- Nilai terlalu tinggi (5+): Terlalu lama di HALF_OPEN, memperlambat recovery",i.jsx("br",{}),"- Rekomendasi: 2-3 untuk aplikasi production",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Circuit HALF_OPEN  Request 1 sukses  Request 2 sukses (",E.successThreshold," tercapai)  Circuit CLOSED"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"4. Monitoring Period (Jendela Waktu Monitoring)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Jendela waktu (sliding window) untuk menghitung jumlah kegagalan. Hanya kegagalan dalam jendela waktu ini yang dihitung untuk menentukan apakah circuit harus terbuka."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Monitoring Period: ",(E.monitoringPeriod/1e3).toFixed(0)," detik (",E.monitoringPeriod,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 10 detik (10000ms, range: 5s - 300s)",i.jsx("br",{})," Sistem hanya menghitung kegagalan yang terjadi dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik terakhir",i.jsx("br",{})," Kegagalan yang lebih lama dari ",(E.monitoringPeriod/1e3).toFixed(0)," detik tidak dihitung (expired)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah kegagalan lama mempengaruhi keputusan saat ini, fokus pada kondisi terbaru",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (5s): Terlalu fokus pada kondisi saat ini, tidak melihat tren",i.jsx("br",{}),"- Nilai terlalu panjang (60s+): Kegagalan lama masih mempengaruhi, recovery lebih lambat",i.jsx("br",{}),"- Rekomendasi: 10-30 detik untuk balance antara responsivitas dan stabilitas",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Jika monitoring period = ",(E.monitoringPeriod/1e3).toFixed(0),"s, dan terjadi ",E.failureThreshold," kegagalan dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik terakhir  Circuit OPEN. Kegagalan yang lebih dari ",(E.monitoringPeriod/1e3).toFixed(0)," detik tidak dihitung."]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"5. Request Timeout (Waktu Maksimal Request)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Waktu maksimal yang diizinkan untuk setiap request database. Request yang melebihi timeout ini akan dianggap gagal dan dibatalkan."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Request Timeout: ",(E.timeout/1e3).toFixed(0)," detik (",E.timeout,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:[i.jsx("br",{})," Default: 10 detik (10000ms, range: 1s - 60s)",i.jsx("br",{})," Setiap request database akan dibatalkan jika melebihi ",(E.timeout/1e3).toFixed(0)," detik dan dianggap gagal",i.jsx("br",{})," Timeout ini diterapkan sebelum request mencapai database (client-side timeout)",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mencegah request yang hang/tidak merespons menumpuk dan membebani sistem",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Nilai terlalu pendek (1-3s): Request normal bisa dianggap gagal, false positive tinggi",i.jsx("br",{}),"- Nilai terlalu panjang (30s+): Request hang akan menunggu terlalu lama, resource terbuang",i.jsx("br",{}),"- Rekomendasi:",i.jsx("br",{})," Read queries: 5-10 detik",i.jsx("br",{})," Write queries: 10-15 detik",i.jsx("br",{})," RPC/complex queries: 15-30 detik",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Request dimulai  Jika belum selesai dalam ",(E.timeout/1e3).toFixed(0)," detik  Request dibatalkan  Dianggap gagal  Dihitung untuk failure threshold"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-purple-700 dark:text-purple-300 text-base",children:"6. Cara Kerja Bersama-Sama"}),i.jsx("p",{className:"mt-1 mb-2",children:"Semua parameter ini bekerja bersama untuk melindungi database dengan cara yang terkoordinasi."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{className:"text-xs space-y-2",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Alur Lengkap:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Request masuk  Sistem cek ",i.jsx("strong",{children:"Request Timeout"})," (max ",(E.timeout/1e3).toFixed(0),"s)"]}),i.jsx("li",{children:"Request dieksekusi  Jika melebihi timeout  Dianggap gagal"}),i.jsxs("li",{children:["Kegagalan dicatat dalam ",i.jsx("strong",{children:"Monitoring Period"})," (",(E.monitoringPeriod/1e3).toFixed(0),"s terakhir)"]}),i.jsx("li",{children:"Sistem hitung total kegagalan dalam jendela waktu"}),i.jsxs("li",{children:["Jika mencapai ",i.jsx("strong",{children:"Failure Threshold"})," (",E.failureThreshold," kegagalan)  Circuit OPEN"]}),i.jsxs("li",{children:["Tunggu ",i.jsx("strong",{children:"Reset Timeout"})," (",(E.resetTimeout/1e3).toFixed(0),"s)  Transisi ke HALF_OPEN"]}),i.jsxs("li",{children:["Uji dengan beberapa request  Jika ",i.jsx("strong",{children:"Success Threshold"})," (",E.successThreshold," sukses) tercapai  CLOSED"]}),i.jsx("li",{children:"Jika gagal dalam HALF_OPEN  Kembali OPEN, tunggu reset timeout lagi"})]})]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-green-700 dark:text-green-300",children:[i.jsx("strong",{children:" Contoh Skenario:"}),i.jsx("br",{}),"1. 5 request gagal (timeout) dalam 10 detik  Threshold tercapai (",E.failureThreshold,")",i.jsx("br",{}),"2. Circuit OPEN  Semua request diblokir",i.jsx("br",{}),"3. Tunggu ",E.resetTimeout/1e3," detik  Database punya waktu recovery",i.jsx("br",{}),"4. Circuit HALF_OPEN  Uji dengan 2 request",i.jsx("br",{}),"5. Kedua request sukses (",E.successThreshold,")  Circuit CLOSED  Kembali normal"]})})]})})]})]})})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(xP,{className:"h-5 w-5 text-blue-600"}),"Bagaimana Circuit Breaker Bekerja?"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-blue-800 dark:text-blue-200",children:"Tiga Status Circuit Breaker:"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(oh,{className:"h-5 w-5 text-green-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"CLOSED (Tertutup)"}),i.jsx("p",{className:"text-muted-foreground",children:"Status normal. Semua request database diizinkan. Circuit breaker memantau setiap request dan menghitung kegagalan dalam jendela waktu tertentu."})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Hs,{className:"h-5 w-5 text-red-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-red-700 dark:text-red-300",children:"OPEN (Terbuka)"}),i.jsxs("p",{className:"text-muted-foreground",children:["Circuit breaker mendeteksi terlalu banyak kegagalan ( ",E.failureThreshold," dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik). Semua request database diblokir untuk melindungi sistem. Status ini akan bertahan selama ",E.resetTimeout/1e3," detik sebelum mencoba uji pemulihan."]})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(hP,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-yellow-700 dark:text-yellow-300",children:"HALF_OPEN (Setengah Terbuka)"}),i.jsxs("p",{className:"text-muted-foreground",children:["Fase uji pemulihan. Setelah ",E.resetTimeout/1e3," detik di status OPEN, circuit breaker mengizinkan beberapa request terbatas untuk mengecek apakah sistem sudah pulih. Jika ",E.successThreshold," request berhasil berturut-turut, kembali ke CLOSED. Jika gagal, kembali ke OPEN."]})]})]})]})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-purple-800 dark:text-purple-200",children:"Alur Kerja:"}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"1."}),i.jsx("span",{children:"Request database masuk  Circuit breaker memeriksa status"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"2."}),i.jsx("span",{children:"Jika CLOSED  Request diizinkan dan dimonitor"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"3."}),i.jsxs("span",{children:["Jika terjadi kegagalan  Dihitung dalam jendela waktu ",(E.monitoringPeriod/1e3).toFixed(0)," detik"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"4."}),i.jsxs("span",{children:["Jika  ",E.failureThreshold," kegagalan  Beralih ke OPEN (blokir semua request)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"5."}),i.jsxs("span",{children:["Tunggu ",E.resetTimeout/1e3," detik  Beralih ke HALF_OPEN (uji pemulihan)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"6."}),i.jsxs("span",{children:["Jika ",E.successThreshold," sukses  Kembali ke CLOSED. Jika gagal  Kembali ke OPEN"]})]})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(Hs,{className:"h-5 w-5 text-orange-600"}),"Apa yang Harus Dilakukan Jika Circuit Breaker Terbuka (OPEN)?"]}),i.jsx("div",{className:"bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4 space-y-3",children:i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"1. Jangan Panik - Ini Tindakan Perlindungan Otomatis"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Circuit breaker terbuka adalah mekanisme perlindungan yang bekerja secara otomatis. Aplikasi sengaja memblokir request untuk mencegah database crash."})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"2. Identifikasi Penyebab Masalah"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Periksa kemungkinan penyebab:"}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsx("li",{children:"Database server sedang down atau overload"}),i.jsx("li",{children:"Koneksi network bermasalah"}),i.jsx("li",{children:"Query database terlalu lambat (timeout)"}),i.jsx("li",{children:"Terlalu banyak request bersamaan (adaptive rate limiter sedang mengurangi limit)"}),i.jsx("li",{children:"Masalah pada Supabase (jika menggunakan Supabase)"})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"3. Periksa Metrik dan Log"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:'Lihat bagian "Metrics Charts" untuk memahami:'}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsx("li",{children:"Jenis operasi yang paling banyak gagal (read/write/RPC)"}),i.jsx("li",{children:"Error category yang dominan (network/timeout/database)"}),i.jsx("li",{children:"Response time rata-rata sebelum circuit terbuka"})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"4. Tunggu Pemulihan Otomatis"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Circuit breaker akan otomatis mencoba uji pemulihan setelah ",E.resetTimeout/1e3," detik. Jika sistem sudah pulih, akan kembali ke status CLOSED secara otomatis."]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-orange-800 dark:text-orange-200",children:"5. Tindakan Manual (Jika Diperlukan)"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Jika masalah berlanjut setelah beberapa siklus recovery:"}),i.jsxs("ul",{className:"list-disc list-inside ml-4 text-muted-foreground mt-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Reset Circuit Breaker:"})," Hapus statistik dan mulai fresh (gunakan dengan hati-hati)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Periksa Status Database:"})," Pastikan database server berjalan normal"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Hubungi Tim DevOps/Database:"})," Jika masalah bersifat infrastruktur"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Review Query Performance:"})," Optimalkan query yang lambat"]})]})]})]})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ro,{className:"h-5 w-5 text-purple-600"}),"Adaptive Rate Limiter: Menangani Traffic Spike"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-950/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-purple-800 dark:text-purple-200",children:"Apa itu Adaptive Rate Limiter?"}),i.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:[i.jsx("strong",{children:"Adaptive Rate Limiter"})," adalah sistem pembatas kecepatan yang secara otomatis menyesuaikan limit berdasarkan kondisi sistem database. Berbeda dengan rate limiter statis yang memiliki limit tetap, adaptive rate limiter akan:"]}),i.jsxs("ul",{className:"text-sm list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Meningkatkan limit"})," saat sistem dalam kondisi sehat (response time rendah, error rate rendah)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Menurunkan limit"})," saat sistem dalam kondisi stres (response time tinggi, error rate tinggi)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Melindungi database"})," dari traffic spike dan overload dengan penyesuaian otomatis"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Mengurangi false positives"})," dengan memberikan waktu recovery sebelum circuit breaker terbuka"]})]})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-green-800 dark:text-green-200",children:"Bagaimana Menangani Traffic Spike?"}),i.jsxs("div",{className:"text-sm space-y-3",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"1. Deteksi Traffic Spike"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Saat traffic spike terjadi, database mulai lambat (response time meningkat) atau terjadi error rate tinggi. Adaptive rate limiter memantau metrik ini setiap ",O.adjustmentInterval/1e3," detik dari tabel ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:"circuit_breaker_metrics"})," di Supabase."]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"2. Penyesuaian Otomatis"}),i.jsxs("div",{className:"mt-2 space-y-2",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-2",children:[i.jsxs("strong",{className:"text-xs",children:["Sistem Sehat (Response Time < ",O.healthyLatencyThreshold,"ms, Error < 5%):"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" Limit meningkat hingga ",(O.maxMultiplier*100).toFixed(0),"% dari base limit",i.jsx("br",{})," Contoh: Reads base ",O.baseConfig.read.limit,"/min dapat naik hingga ",Math.round(O.baseConfig.read.limit*O.maxMultiplier),"/min"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-2",children:[i.jsxs("strong",{className:"text-xs",children:["Sistem Stres (Response Time > ",O.stressLatencyThreshold,"ms atau Error > 20%):"]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" Limit menurun hingga ",(O.minMultiplier*100).toFixed(0),"% dari base limit",i.jsx("br",{})," Contoh: Reads base ",O.baseConfig.read.limit,"/min dapat turun hingga ",Math.round(O.baseConfig.read.limit*O.minMultiplier),"/min",i.jsx("br",{})," Memberi waktu recovery untuk database tanpa langsung memicu circuit breaker OPEN"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-green-700 dark:text-green-300",children:"3. Skenario Traffic Spike"}),i.jsxs("div",{className:"mt-2 space-y-2 text-xs",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"A."}),i.jsxs("div",{children:[i.jsx("strong",{children:"Spike Normal (Dapat Dihandle):"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Request melonjak  Rate limiter dengan limit adaptif menangani sebagian request  Jika masih dalam batas, semua diizinkan  Jika melebihi, request diblokir dengan HTTP 429"})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"B."}),i.jsxs("div",{children:[i.jsx("strong",{children:"Spike Besar (Database Mulai Lambat):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Response time naik di atas ",O.stressLatencyThreshold,"ms  Adaptive limiter turunkan limit secara bertahap  Memberi waktu database pulih  Mencegah circuit breaker langsung OPEN"]})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"C."}),i.jsxs("div",{children:[i.jsx("strong",{children:"DDoS/Attack:"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Ribuan request masuk  Adaptive limiter turunkan limit drastis (hingga ",(O.minMultiplier*100).toFixed(0),"%)  Sebagian besar request diblokir  Database terlindungi  Circuit breaker OPEN sebagai last resort jika masih gagal"]})]})]})]})]})]})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-3 text-red-800 dark:text-red-200",children:" Input Konfigurasi untuk Traffic Spike & DDoS Protection"}),i.jsxs("div",{className:"text-sm space-y-3 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-red-700 dark:text-red-300 text-base",children:"Input Utama untuk Perlindungan:"}),i.jsxs("div",{className:"mt-2 space-y-3",children:[i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-red-500",children:[i.jsx("strong",{className:"text-sm text-red-700 dark:text-red-300",children:"1. Min Multiplier (PALING PENTING untuk DDoS)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Min Multiplier = ",(O.minMultiplier*100).toFixed(0),"% (range: 0.1 - 1.0)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Menentukan seberapa rendah limit dapat turun saat sistem diserang",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (0.1-0.3) = Limit turun drastis  90-70% request diblokir  ",i.jsx("strong",{children:"SANGAT EFEKTIF"}),i.jsx("br",{}),"- Nilai sedang (0.4-0.6) = Limit turun sedang  60-40% request diblokir  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Nilai tinggi (0.7-1.0) = Limit turun sedikit  30-0% request diblokir  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 0.1 - 0.3 (10-30% dari base limit)",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Base Reads = ",O.baseConfig.read.limit,"/min, Min Multiplier = ",O.minMultiplier,"  Limit minimum = ",Math.round(O.baseConfig.read.limit*O.minMultiplier),"/min saat diserang"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-orange-500",children:[i.jsx("strong",{className:"text-sm text-orange-700 dark:text-orange-300",children:"2. Stress Latency Threshold (Deteksi Serangan)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Stress Latency Threshold = ",O.stressLatencyThreshold,"ms (range: 500ms - 10000ms)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Mendeteksi kapan sistem mulai stres/overload akibat traffic spike",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (500-1000ms) = Deteksi cepat saat serangan  Limit turun cepat  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Nilai sedang (1000-2000ms) = Deteksi sedang  ",i.jsx("strong",{children:"SEIMBANG"}),i.jsx("br",{}),"- Nilai tinggi (3000ms+) = Deteksi lambat  Database bisa crash dulu  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 500-1000ms (deteksi cepat)",i.jsx("br",{})," ",i.jsx("strong",{children:"Contoh:"})," Saat DDoS, response time naik cepat  Jika ",">"," ",O.stressLatencyThreshold,"ms  Sistem langsung turunkan limit"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-yellow-500",children:[i.jsx("strong",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"3. Base Limits (Garis Pertahanan Awal)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Base Limits untuk Reads/Writes/RPC/Auth",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Limit dasar sebelum penyesuaian adaptif",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Base limit rendah = Kurang request yang diizinkan  Lebih aman tapi bisa blokir user normal",i.jsx("br",{}),"- Base limit tinggi = Lebih banyak request diizinkan  Lebih toleran tapi kurang proteksi",i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"}),i.jsx("br",{}),"- Reads: 50-100/min (default: ",O.baseConfig.read.limit,"/min)",i.jsx("br",{}),"- Writes: 20-30/min (default: ",O.baseConfig.write.limit,"/min)",i.jsx("br",{}),"- RPC: 10-20/min (default: ",O.baseConfig.rpc.limit,"/min)",i.jsx("br",{}),"- Auth: 5-10/min (default: ",O.baseConfig.auth.limit,"/min)",i.jsx("br",{})," ",i.jsx("strong",{children:"Penting:"})," Base limit ini akan dikalikan dengan min multiplier saat serangan, jadi limit efektif minimum = base  min multiplier"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-blue-500",children:[i.jsx("strong",{className:"text-sm text-blue-700 dark:text-blue-300",children:"4. Adjustment Interval (Kecepatan Respons)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Adjustment Interval = ",O.adjustmentInterval/1e3,"s (range: 10s - 600s)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Seberapa sering sistem memeriksa kondisi dan menyesuaikan limit",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Interval pendek (10-30s) = Respons cepat  Limit turun cepat saat serangan  ",i.jsx("strong",{children:"SANGAT EFEKTIF"}),i.jsx("br",{}),"- Interval sedang (30-60s) = Respons seimbang  ",i.jsx("strong",{children:"EFEKTIF"}),i.jsx("br",{}),"- Interval panjang (60s+) = Respons lambat  Serangan bisa damage dulu  ",i.jsx("strong",{children:"KURANG EFEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 10-30 detik (respons cepat)",i.jsx("br",{})," ",i.jsx("strong",{children:"Catatan:"})," Interval terlalu pendek (","<"," 10s) bisa menyebabkan limit berubah-ubah terlalu sering"]})]}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 border-l-4 border-purple-500",children:[i.jsx("strong",{className:"text-sm text-purple-700 dark:text-purple-300",children:"5. Circuit Breaker Failure Threshold (Last Resort)"}),i.jsxs("p",{className:"text-xs mt-1",children:[" ",i.jsx("strong",{children:"Input ini:"})," Failure Threshold = ",E.failureThreshold," (range: 1-100)",i.jsx("br",{})," ",i.jsx("strong",{children:"Fungsi:"})," Jika adaptive rate limiter tidak cukup, circuit breaker akan OPEN dan blokir SEMUA request",i.jsx("br",{})," ",i.jsx("strong",{children:"Untuk DDoS:"}),i.jsx("br",{}),"- Nilai rendah (3-5) = Circuit terbuka cepat  Semua request diblokir  ",i.jsx("strong",{children:"SANGAT PROTEKTIF"}),i.jsx("br",{}),"- Nilai sedang (5-10) = Balance  ",i.jsx("strong",{children:"SEIMBANG"}),i.jsx("br",{}),"- Nilai tinggi (10+) = Circuit lambat terbuka  Database bisa crash dulu  ",i.jsx("strong",{children:"KURANG PROTEKTIF"}),i.jsx("br",{})," ",i.jsx("strong",{children:"Rekomendasi DDoS:"})," 3-5 kegagalan dalam monitoring period",i.jsx("br",{})," ",i.jsx("strong",{children:"Penting:"})," Ini adalah lapisan terakhir - gunakan jika rate limiter tidak cukup"]})]})]})]}),i.jsxs("div",{className:"bg-red-100 dark:bg-red-950/40 border border-red-300 dark:border-red-700 rounded p-3 mt-3",children:[i.jsx("strong",{className:"text-sm text-red-800 dark:text-red-200",children:" Konfigurasi Optimal untuk DDoS Protection:"}),i.jsxs("div",{className:"text-xs mt-2 space-y-1 text-red-700 dark:text-red-300",children:[i.jsx("p",{children:"Untuk perlindungan maksimal terhadap DDoS attack, gunakan konfigurasi berikut:"}),i.jsxs("ul",{className:"list-disc list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Min Multiplier:"})," 0.1 - 0.3 (limit turun hingga 10-30% dari base)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Stress Latency Threshold:"})," 500 - 1000ms (deteksi cepat)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Adjustment Interval:"})," 10 - 30 detik (respons cepat)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Base Limits:"})," Konservatif (Reads: 50-100, Writes: 20-30, RPC: 10-20, Auth: 5-10)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Circuit Breaker Failure Threshold:"})," 3-5 (last resort protection)"]})]}),i.jsx("p",{className:"mt-2 font-semibold",children:"Dengan konfigurasi ini, saat DDoS attack terjadi:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Response time naik ",">"," ",O.stressLatencyThreshold,"ms (dalam 10-30 detik)"]}),i.jsxs("li",{children:["Adaptive limiter turunkan limit ke ",(O.minMultiplier*100).toFixed(0),"% (minimal)"]}),i.jsx("li",{children:"70-90% request diblokir dengan HTTP 429"}),i.jsx("li",{children:"Jika masih gagal, circuit breaker OPEN  100% request diblokir"}),i.jsx("li",{children:"Database terlindungi dari crash"})]})]})]})]})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-yellow-800 dark:text-yellow-200",children:"Lapisan Perlindungan Berlapis"}),i.jsxs("div",{className:"text-sm space-y-2",children:[i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"1"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Adaptive Rate Limiter (Lapisan Pertama):"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Membatasi jumlah request per menit dengan limit yang dinamis. Mencegah database overload dengan menyesuaikan limit berdasarkan kondisi sistem."})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"2"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Request Timeout (Lapisan Kedua):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Setiap request memiliki timeout maksimal ",E.timeout/1e3," detik. Request yang terlalu lama dianggap gagal dan tidak menumpuk di database."]})]})]}),i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"font-mono bg-white dark:bg-gray-800 px-2 py-1 rounded",children:"3"}),i.jsxs("div",{children:[i.jsx("strong",{children:"Circuit Breaker (Lapisan Ketiga):"}),i.jsxs("p",{className:"text-muted-foreground mt-1",children:["Jika tetap terjadi ",E.failureThreshold," kegagalan dalam ",(E.monitoringPeriod/1e3).toFixed(0)," detik, circuit breaker akan OPEN dan memblokir semua request untuk melindungi database sepenuhnya."]})]})]})]})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2 text-blue-800 dark:text-blue-200",children:"Penjelasan Detail Setiap Input Konfigurasi"}),i.jsxs("div",{className:"text-sm space-y-4 text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"1. Base Limits (Limit Dasar)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Limit dasar adalah jumlah maksimal request per menit yang diizinkan saat sistem dalam kondisi normal. Limit aktual akan disesuaikan otomatis berdasarkan kondisi sistem (dikalikan dengan multiplier)."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Reads Base Limit: ",O.baseConfig.read.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"READ"})," (membaca data dari database). Operasi ini termasuk SELECT queries, fetching data, dll.",i.jsx("br",{})," Operasi read biasanya lebih aman dan lebih cepat dibanding write",i.jsx("br",{})," Limit default: 100 request/menit (dapat disesuaikan 10-1000)",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(O.baseConfig.read.limit*O.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(O.baseConfig.read.limit*O.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Writes Base Limit: ",O.baseConfig.write.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"WRITE"})," (menulis/mengubah data di database). Operasi ini termasuk INSERT, UPDATE, DELETE, UPSERT.",i.jsx("br",{})," Operasi write lebih berisiko dan lebih lambat dibanding read",i.jsx("br",{})," Limit default: 30 request/menit (dapat disesuaikan 5-500)",i.jsx("br",{})," Lebih ketat dari reads karena dapat menyebabkan race condition atau data corruption jika terlalu banyak",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(O.baseConfig.write.limit*O.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(O.baseConfig.write.limit*O.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["RPC Base Limit: ",O.baseConfig.rpc.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"RPC"})," (Remote Procedure Call / fungsi database). Operasi ini termasuk panggilan fungsi PostgreSQL, stored procedures, dll.",i.jsx("br",{})," RPC biasanya lebih kompleks dan lebih berat dibanding query biasa",i.jsx("br",{})," Limit default: 20 request/menit (dapat disesuaikan 5-200)",i.jsx("br",{})," RPC sering digunakan untuk operasi batch atau analytics, jadi perlu lebih ketat",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(O.baseConfig.rpc.limit*O.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(O.baseConfig.rpc.limit*O.minMultiplier),"/min"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Auth Base Limit: ",O.baseConfig.auth.limit,"/min"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Limit dasar untuk operasi ",i.jsx("strong",{children:"AUTH"})," (autentikasi dan otorisasi). Operasi ini termasuk login, logout, refresh token, verifikasi session.",i.jsx("br",{})," Operasi auth sangat penting untuk keamanan, jadi perlu dibatasi",i.jsx("br",{})," Limit default: 10 request/menit (dapat disesuaikan 2-100)",i.jsx("br",{})," Mencegah brute force attack dan credential stuffing",i.jsx("br",{})," Saat sistem sehat: Dapat naik hingga ",Math.round(O.baseConfig.auth.limit*O.maxMultiplier),"/min",i.jsx("br",{})," Saat sistem stres: Dapat turun hingga ",Math.round(O.baseConfig.auth.limit*O.minMultiplier),"/min"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"2. Multiplier Range (Rentang Pengali)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Multiplier menentukan seberapa banyak limit base dapat berubah. Sistem akan mengalikan base limit dengan multiplier saat ini untuk mendapatkan limit efektif."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Min Multiplier: ",(O.minMultiplier*100).toFixed(0),"%"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Multiplier ",i.jsx("strong",{children:"minimum"})," yang akan digunakan saat sistem dalam kondisi ",i.jsx("strong",{children:"stres"}),".",i.jsx("br",{})," Nilai: 0.5 = 50% dari base limit (default: 0.5, range: 0.1 - 1.0)",i.jsx("br",{})," Digunakan ketika: Response time > ",O.stressLatencyThreshold,"ms ATAU error rate > 20%",i.jsx("br",{})," Contoh: Jika Reads base = ",O.baseConfig.read.limit,", min multiplier = ",O.minMultiplier,", maka limit efektif minimum = ",Math.round(O.baseConfig.read.limit*O.minMultiplier),"/min",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memberi waktu recovery untuk database dengan mengurangi beban saat sistem stres, mencegah overload total"]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Max Multiplier: ",(O.maxMultiplier*100).toFixed(0),"%"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Multiplier ",i.jsx("strong",{children:"maksimum"})," yang akan digunakan saat sistem dalam kondisi ",i.jsx("strong",{children:"sehat"}),".",i.jsx("br",{})," Nilai: 2.0 = 200% dari base limit (default: 2.0, range: 1.0 - 5.0)",i.jsx("br",{})," Digunakan ketika: Response time < ",O.healthyLatencyThreshold,"ms DAN error rate < 5%",i.jsx("br",{})," Contoh: Jika Reads base = ",O.baseConfig.read.limit,", max multiplier = ",O.maxMultiplier,", maka limit efektif maksimum = ",Math.round(O.baseConfig.read.limit*O.maxMultiplier),"/min",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Memanfaatkan kapasitas database saat kondisi optimal, meningkatkan throughput aplikasi"]})]})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"3. Latency Thresholds (Ambang Waktu Respons)"}),i.jsx("p",{className:"mt-1 mb-2",children:'Threshold menentukan kapan sistem dianggap "sehat" atau "stres" berdasarkan waktu respons database. Sistem menggunakan threshold ini untuk memutuskan apakah harus meningkatkan atau menurunkan limit.'}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Healthy Latency Threshold: ",O.healthyLatencyThreshold,"ms"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Batas atas response time yang dianggap ",i.jsx("strong",{children:"sehat"}),". Jika response time database di bawah nilai ini, sistem akan meningkatkan limit.",i.jsx("br",{})," Default: 200ms (range: 50ms - 1000ms)",i.jsx("br",{})," Kondisi: Response time < ",O.healthyLatencyThreshold,"ms DAN error rate < 5%",i.jsx("br",{})," Aksi: Limit akan ",i.jsx("strong",{children:"naik secara bertahap"})," (maks 10% per adjustment) hingga mencapai max multiplier",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mengidentifikasi saat database dapat menangani lebih banyak request, memaksimalkan throughput",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"})," Jika database Anda biasanya sangat cepat (< 50ms), turunkan nilai ini. Jika database lambat, naikkan."]})]}),i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Stress Latency Threshold: ",O.stressLatencyThreshold,"ms"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Batas bawah response time yang dianggap ",i.jsx("strong",{children:"stres"}),". Jika response time database di atas nilai ini, sistem akan menurunkan limit.",i.jsx("br",{})," Default: 1000ms (range: 500ms - 10000ms)",i.jsx("br",{})," Kondisi: Response time > ",O.stressLatencyThreshold,"ms ATAU error rate > 20%",i.jsx("br",{})," Aksi: Limit akan ",i.jsx("strong",{children:"turun secara bertahap"})," (maks 20% per adjustment) hingga mencapai min multiplier",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"})," Mengidentifikasi saat database mulai overload, mengurangi beban sebelum database benar-benar crash",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"})," Jika database Anda dapat menangani response time tinggi (> 2s), naikkan nilai ini. Jika database sensitif, turunkan."]})]}),i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:[i.jsx("strong",{children:" Catatan:"})," Jika response time di antara ",O.healthyLatencyThreshold,"ms dan ",O.stressLatencyThreshold,"ms, sistem akan perlahan mengembalikan multiplier ke 1.0 (100% dari base limit)."]})})]})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"4. Adjustment Interval (Interval Penyesuaian)"}),i.jsx("p",{className:"mt-1 mb-2",children:"Interval menentukan seberapa sering sistem memeriksa metrik dan menyesuaikan limit. Sistem akan query metrik dari Supabase dan menghitung response time serta error rate untuk memutuskan apakah perlu mengubah multiplier."}),i.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-3",children:i.jsxs("div",{children:[i.jsxs("strong",{className:"text-sm",children:["Adjustment Interval: ",O.adjustmentInterval/1e3," detik (",O.adjustmentInterval,"ms)"]}),i.jsxs("p",{className:"text-xs mt-1",children:["Frekuensi pengecekan dan penyesuaian limit oleh sistem.",i.jsx("br",{})," Default: 60 detik (60000ms, range: 10s - 600s)",i.jsx("br",{})," Setiap interval, sistem akan:",i.jsx("br",{}),"1. Query metrik dari tabel ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"circuit_breaker_metrics"})," di Supabase (5 menit terakhir)",i.jsx("br",{}),"2. Hitung rata-rata response time dan error rate",i.jsx("br",{}),"3. Bandingkan dengan threshold (healthy/stress)",i.jsx("br",{}),"4. Sesuaikan multiplier untuk setiap operasi (read/write/rpc/auth)",i.jsx("br",{}),"5. Simpan multiplier baru ke localStorage dan update limit efektif",i.jsx("br",{})," ",i.jsx("strong",{children:"Mengapa penting?"}),i.jsx("br",{}),"- Interval terlalu pendek: Sistem terlalu reaktif, limit berubah-ubah terlalu sering (tidak stabil)",i.jsx("br",{}),"- Interval terlalu panjang: Sistem lambat merespons perubahan kondisi (tidak efektif)",i.jsx("br",{})," ",i.jsx("strong",{children:"Tips:"}),i.jsx("br",{}),"- Untuk aplikasi dengan traffic stabil: Gunakan 60-120 detik",i.jsx("br",{}),"- Untuk aplikasi dengan traffic volatile: Gunakan 30-60 detik",i.jsx("br",{}),"- Jangan kurang dari 10 detik (terlalu agresif)",i.jsx("br",{}),"- Jangan lebih dari 600 detik (terlalu lambat)"]})]})})]}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-blue-700 dark:text-blue-300 text-base",children:"5. Cara Kerja Bersama-Sama"}),i.jsx("p",{className:"mt-1 mb-2",children:"Semua parameter ini bekerja bersama untuk menciptakan sistem perlindungan yang adaptif dan responsif."}),i.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded p-3 space-y-2",children:[i.jsxs("div",{className:"text-xs",children:[i.jsx("strong",{children:"Alur Kerja:"}),i.jsxs("ol",{className:"list-decimal list-inside ml-2 mt-1 space-y-1",children:[i.jsxs("li",{children:["Sistem memantau setiap request database dan mencatat metrik (response time, success/failure) ke ",i.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"circuit_breaker_metrics"})]}),i.jsxs("li",{children:["Setiap ",O.adjustmentInterval/1e3," detik, adaptive rate limiter memeriksa metrik 5 menit terakhir"]}),i.jsx("li",{children:"Menghitung rata-rata response time dan error rate"}),i.jsxs("li",{children:["Membandingkan dengan threshold:",i.jsxs("ul",{className:"list-disc list-inside ml-4 mt-1",children:[i.jsxs("li",{children:["Jika response time < ",O.healthyLatencyThreshold,"ms DAN error < 5%  ",i.jsx("strong",{children:"Naikkan limit"})," (max ",(O.maxMultiplier*100).toFixed(0),"%)"]}),i.jsxs("li",{children:["Jika response time > ",O.stressLatencyThreshold,"ms ATAU error > 20%  ",i.jsx("strong",{children:"Turunkan limit"})," (min ",(O.minMultiplier*100).toFixed(0),"%)"]}),i.jsxs("li",{children:["Jika di antara keduanya  ",i.jsx("strong",{children:"Kembalikan limit"})," perlahan ke 100%"]})]})]}),i.jsx("li",{children:"Update multiplier dan hitung limit efektif baru (base limit  multiplier saat ini)"}),i.jsx("li",{children:"Limit efektif baru diterapkan untuk semua request berikutnya"}),i.jsxs("li",{children:["Proses ini berulang setiap ",O.adjustmentInterval/1e3," detik"]})]})]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded p-2 mt-2",children:i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:[i.jsx("strong",{children:" Contoh Praktis:"}),i.jsx("br",{}),"Base Reads Limit = ",O.baseConfig.read.limit,"/min",i.jsx("br",{}),"Sistem sehat (response < ",O.healthyLatencyThreshold,"ms)  Multiplier = ",O.maxMultiplier,"  Effective Limit = ",Math.round(O.baseConfig.read.limit*O.maxMultiplier),"/min",i.jsx("br",{}),"Sistem stres (response > ",O.stressLatencyThreshold,"ms)  Multiplier = ",O.minMultiplier,"  Effective Limit = ",Math.round(O.baseConfig.read.limit*O.minMultiplier),"/min",i.jsx("br",{}),"Sistem normal  Multiplier = 1.0  Effective Limit = ",O.baseConfig.read.limit,"/min (base)"]})})]})]}),i.jsxs("p",{className:"text-xs mt-3 pt-2 border-t",children:[" ",i.jsx("strong",{children:"Tip Penting:"}),' Limit efektif saat ini dapat dilihat di bagian "Adaptive Rate Limiter Configuration" di atas. Limit akan berubah secara real-time berdasarkan kondisi sistem. Perhatikan perubahan multiplier - jika terus turun, itu berarti sistem sedang stres dan perlu perhatian.']})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ew,{className:"h-5 w-5 text-blue-600"}),"Memahami Metrik Circuit Breaker"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Success Rate:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Persentase request yang berhasil. Nilai rendah (< 90%) menunjukkan masalah potensial dengan database atau koneksi."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Total Requests:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Jumlah total request sejak inisialisasi. Membantu memahami volume traffic aplikasi."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Operations by Type:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Distribusi operasi berdasarkan jenis (read/write/RPC/auth). Membantu mengidentifikasi jenis operasi yang paling bermasalah."})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Circuit Breaker States:"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Menunjukkan berapa banyak operasi yang terjadi pada setiap state. Banyak operasi di OPEN state = sistem sering bermasalah."})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(oh,{className:"h-5 w-5 text-green-600"}),"Best Practices"]}),i.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4 space-y-2 text-sm",children:i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[i.jsx("li",{children:"Monitor metrik secara berkala untuk mendeteksi masalah sejak dini"}),i.jsx("li",{children:"Biarkan adaptive rate limiter bekerja otomatis - jangan sering reset manual kecuali benar-benar diperlukan"}),i.jsx("li",{children:"Jika circuit sering terbuka, pertimbangkan untuk optimasi query atau scaling database"}),i.jsx("li",{children:"Gunakan cache untuk mengurangi beban database pada query yang sering digunakan"}),i.jsx("li",{children:"Review dan sesuaikan threshold jika circuit breaker terlalu sensitif atau tidak sensitif"}),i.jsx("li",{children:"Perhatikan perubahan limit adaptive rate limiter - penurunan drastis menunjukkan sistem sedang stres"}),i.jsx("li",{children:"Dokumentasikan setiap insiden circuit breaker dan traffic spike untuk analisis tren"}),i.jsx("li",{children:"Trust the adaptive system - limit akan menyesuaikan otomatis berdasarkan kondisi sistem"})]})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[i.jsx(ja,{className:"h-5 w-5 text-blue-600"}),"Referensi Konfigurasi"]}),i.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Circuit Breaker Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Failure Threshold:"})," ",E.failureThreshold,i.jsx("p",{className:"text-xs text-muted-foreground",children:"Buka circuit setelah kegagalan ini"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Reset Timeout:"})," ",E.resetTimeout/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Tunggu sebelum uji pemulihan"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Success Threshold:"})," ",E.successThreshold,i.jsx("p",{className:"text-xs text-muted-foreground",children:"Sukses untuk tutup circuit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Monitoring Period:"})," ",E.monitoringPeriod/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Jendela waktu hitungan"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("strong",{children:"Request Timeout:"})," ",E.timeout/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Timeout maksimal per request"})]})]})]}),i.jsxs("div",{className:"pt-3 border-t",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Adaptive Rate Limiter Configuration"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Reads Base Limit:"})," ",O.baseConfig.read.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",It.getEffectiveLimit("read"),"/min (",(H.read*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Writes Base Limit:"})," ",O.baseConfig.write.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",It.getEffectiveLimit("write"),"/min (",(H.write*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"RPC Base Limit:"})," ",O.baseConfig.rpc.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",It.getEffectiveLimit("rpc"),"/min (",(H.rpc*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Auth Base Limit:"})," ",O.baseConfig.auth.limit,"/min",i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Effective: ",It.getEffectiveLimit("auth"),"/min (",(H.auth*100).toFixed(0),"%)"]})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Multiplier Range:"})," ",(O.minMultiplier*100).toFixed(0),"% - ",(O.maxMultiplier*100).toFixed(0),"%",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Range penyesuaian limit otomatis"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Adjustment Interval:"})," ",O.adjustmentInterval/1e3,"s",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Frekuensi penyesuaian limit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Healthy Threshold:"})," < ",O.healthyLatencyThreshold,"ms",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time untuk meningkatkan limit"})]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Stress Threshold:"})," > ",O.stressLatencyThreshold,"ms",i.jsx("p",{className:"text-xs text-muted-foreground",children:"Response time untuk menurunkan limit"})]})]})]})]})]})]}),i.jsx(ba,{children:i.jsx(te,{variant:"default",onClick:()=>j(!1),children:"Tutup"})})]})}),i.jsx(fn,{open:w,onOpenChange:k,children:i.jsxs(on,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(ln,{children:[i.jsxs(cn,{className:"flex items-center gap-2",children:[i.jsx(ja,{className:"h-5 w-5 text-blue-500"}),"Edit Adaptive Rate Limiter Configuration"]}),i.jsx(Pr,{children:"Ubah konfigurasi adaptive rate limiter. Limit akan secara otomatis menyesuaikan berdasarkan kondisi sistem."})]}),i.jsxs("div",{className:"py-4 space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Base Limits (per menit)"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"readLimit",children:["Reads Base Limit",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{side:"right",align:"start",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi read (min: 10, max: 1000)"})})]})]}),i.jsx(Ye,{id:"readLimit",inputMode:"numeric",pattern:"[0-9]*",min:10,max:1e3,onKeyDown:ne=>{["e","E","+","-","."].includes(ne.key)&&ne.preventDefault()},value:Number.isFinite(ze)?ze:"",onChange:ne=>{const Ee=ne.target.value.replace(/\D/g,"");N(be=>{if(Ee==="")return{...be,baseConfig:{...be.baseConfig,read:{...be.baseConfig.read,limit:NaN}}};const Te=parseInt(Ee,10);if(!Number.isFinite(Te))return{...be,baseConfig:{...be.baseConfig,read:{...be.baseConfig.read,limit:NaN}}};const ut=Math.min(1e3,Te);return{...be,baseConfig:{...be.baseConfig,read:{...be.baseConfig.read,limit:ut}}}})}}),!ct&&i.jsx("p",{className:"text-xs text-red-500",children:"Reads base limit must be between 10 and 1000 requests per minute."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"writeLimit",children:["Writes Base Limit",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{side:"left",align:"end",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi write (min: 5, max: 500)"})})]})]}),i.jsx(Ye,{id:"writeLimit",inputMode:"numeric",pattern:"[0-9]*",min:5,max:500,onKeyDown:ne=>{["e","E","+","-","."].includes(ne.key)&&ne.preventDefault()},value:Number.isFinite(at)?at:"",onChange:ne=>{const Ee=ne.target.value.replace(/\D/g,"");N(be=>{if(Ee==="")return{...be,baseConfig:{...be.baseConfig,write:{...be.baseConfig.write,limit:NaN}}};const Te=parseInt(Ee,10);if(!Number.isFinite(Te))return{...be,baseConfig:{...be.baseConfig,write:{...be.baseConfig.write,limit:NaN}}};const ut=Math.min(500,Te);return{...be,baseConfig:{...be.baseConfig,write:{...be.baseConfig.write,limit:ut}}}})}}),!Pt&&i.jsx("p",{className:"text-xs text-red-500",children:"Writes base limit must be between 5 and 500 requests per minute."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"rpcLimit",children:["RPC Base Limit",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{side:"right",align:"start",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi RPC (min: 5, max: 200)"})})]})]}),i.jsx(Ye,{id:"rpcLimit",inputMode:"numeric",pattern:"[0-9]*",min:5,max:200,onKeyDown:ne=>{["e","E","+","-","."].includes(ne.key)&&ne.preventDefault()},value:Number.isFinite(pt)?pt:"",onChange:ne=>{const Ee=ne.target.value.replace(/\D/g,"");N(be=>{if(Ee==="")return{...be,baseConfig:{...be.baseConfig,rpc:{...be.baseConfig.rpc,limit:NaN}}};const Te=parseInt(Ee,10);if(!Number.isFinite(Te))return{...be,baseConfig:{...be.baseConfig,rpc:{...be.baseConfig.rpc,limit:NaN}}};const ut=Math.min(200,Te);return{...be,baseConfig:{...be.baseConfig,rpc:{...be.baseConfig.rpc,limit:ut}}}})}}),!kt&&i.jsx("p",{className:"text-xs text-red-500",children:"RPC base limit must be between 5 and 200 requests per minute."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"authLimit",children:["Auth Base Limit",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{side:"left",align:"end",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Limit dasar untuk operasi autentikasi (min: 2, max: 100)"})})]})]}),i.jsx(Ye,{id:"authLimit",inputMode:"numeric",pattern:"[0-9]*",min:2,max:100,onKeyDown:ne=>{["e","E","+","-","."].includes(ne.key)&&ne.preventDefault()},value:Number.isFinite(_t)?_t:"",onChange:ne=>{const Ee=ne.target.value.replace(/\D/g,"");N(be=>{if(Ee==="")return{...be,baseConfig:{...be.baseConfig,auth:{...be.baseConfig.auth,limit:NaN}}};const Te=parseInt(Ee,10);if(!Number.isFinite(Te))return{...be,baseConfig:{...be.baseConfig,auth:{...be.baseConfig.auth,limit:NaN}}};const ut=Math.min(100,Te);return{...be,baseConfig:{...be.baseConfig,auth:{...be.baseConfig.auth,limit:ut}}}})}}),!Xe&&i.jsx("p",{className:"text-xs text-red-500",children:"Auth base limit must be between 2 and 100 requests per minute."})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-sm mb-3",children:"Adjustment Parameters"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"minMultiplier",children:["Min Multiplier",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{side:"right",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Multiplier minimum (misal: 0.5 = 50%). Digunakan saat sistem stres (min: 0.1, max: 1.0)"})})]})]}),i.jsx(Ye,{id:"minMultiplier",inputMode:"decimal",pattern:"^[0-9]*[.]?[0-9]*$",min:.1,max:1,step:.1,onKeyDown:ne=>{["e","E","+","-"].includes(ne.key)&&ne.preventDefault()},value:D,onChange:ne=>{var ee;let Ee=ne.target.value.replace(/[^0-9.]/g,"");if((((ee=Ee.match(/\./g))==null?void 0:ee.length)??0)>1)return;if(Ee.startsWith(".")&&(Ee=`0${Ee}`),Ee.includes(".")){const[ve,Re]=Ee.split("."),Ke=(Re??"").slice(0,3);Ee=`${ve}.${Ke}`}if(Ee===""||Ee==="."){R(""),N(ve=>({...ve,minMultiplier:NaN}));return}const be=parseFloat(Ee);if(!Number.isFinite(be)){R(""),N(ve=>({...ve,minMultiplier:NaN}));return}const Te=Math.min(1,be),ut=be>Te?Te.toFixed(3).replace(/\.?0+$/,""):Ee;R(ut),N(ve=>({...ve,minMultiplier:parseFloat(ut)}))}}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Minimum:"," ",Number.isFinite(re)?`${(re*100).toFixed(0)}% dari base limit`:"Enter a minimum multiplier value"]}),!ye&&i.jsx("p",{className:"text-xs text-red-500",children:"Min multiplier must be between 0.1 and 1.0."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"maxMultiplier",children:["Max Multiplier",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{side:"left",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Multiplier maksimum (misal: 2.0 = 200%). Digunakan saat sistem sehat (min: 1.0, max: 5.0)"})})]})]}),i.jsx(Ye,{id:"maxMultiplier",inputMode:"decimal",pattern:"^[0-9]*[.]?[0-9]*$",min:1,max:5,step:.1,onKeyDown:ne=>{["e","E","+","-"].includes(ne.key)&&ne.preventDefault()},value:K,onChange:ne=>{var ee;let Ee=ne.target.value.replace(/[^0-9.]/g,"");if((((ee=Ee.match(/\./g))==null?void 0:ee.length)??0)>1)return;if(Ee.startsWith(".")&&(Ee=`0${Ee}`),Ee.includes(".")){const[ve,Re]=Ee.split("."),Ke=(Re??"").slice(0,3);Ee=`${ve}.${Ke}`}if(Ee===""||Ee==="."){Q(""),N(ve=>({...ve,maxMultiplier:NaN}));return}const be=parseFloat(Ee);if(!Number.isFinite(be)){Q(""),N(ve=>({...ve,maxMultiplier:NaN}));return}const Te=Math.min(5,be),ut=be>Te?Te.toFixed(3).replace(/\.?0+$/,""):Ee;Q(ut),N(ve=>({...ve,maxMultiplier:parseFloat(ut)}))}}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum:"," ",Number.isFinite(pe)?`${(pe*100).toFixed(0)}% dari base limit`:"Enter a maximum multiplier value"]}),!it&&i.jsx("p",{className:"text-xs text-red-500",children:"Max multiplier must be between 1.0 and 5.0."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"healthyLatency",children:["Healthy Latency Threshold (ms)",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{side:"right",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Response time di bawah ini dianggap sehat. Sistem akan meningkatkan limit (min: 50ms, max: 1000ms)"})})]})]}),i.jsx(Ye,{id:"healthyLatency",inputMode:"numeric",pattern:"[0-9]*",min:50,max:1e3,step:50,onKeyDown:ne=>{["e","E","+","-","."].includes(ne.key)&&ne.preventDefault()},value:Number.isFinite(He)?He:"",onChange:ne=>{const Ee=ne.target.value.replace(/\D/g,"");N(be=>{if(Ee==="")return{...be,healthyLatencyThreshold:NaN};const Te=parseInt(Ee,10);if(!Number.isFinite(Te))return{...be,healthyLatencyThreshold:NaN};const ut=Math.min(1e3,Te);return{...be,healthyLatencyThreshold:ut}})}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(He)?`${(He/1e3).toFixed(1)} seconds`:"Enter a value between 50 and 1000 milliseconds"}),!$t&&i.jsx("p",{className:"text-xs text-red-500",children:"Healthy latency threshold must be between 50 and 1000 milliseconds."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"stressLatency",children:["Stress Latency Threshold (ms)",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{side:"left",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Response time di atas ini dianggap stres. Sistem akan menurunkan limit (min: 500ms, max: 10000ms)"})})]})]}),i.jsx(Ye,{id:"stressLatency",inputMode:"numeric",pattern:"[0-9]*",min:500,max:1e4,step:100,onKeyDown:ne=>{["e","E","+","-","."].includes(ne.key)&&ne.preventDefault()},value:Number.isFinite(Ue)?Ue:"",onChange:ne=>{const Ee=ne.target.value.replace(/\D/g,"");N(be=>{if(Ee==="")return{...be,stressLatencyThreshold:NaN};const Te=parseInt(Ee,10);if(!Number.isFinite(Te))return{...be,stressLatencyThreshold:NaN};const ut=Math.min(1e4,Te);return{...be,stressLatencyThreshold:ut}})}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(Ue)?`${(Ue/1e3).toFixed(1)} seconds`:"Enter a value between 500 and 10000 milliseconds"}),!ue&&i.jsx("p",{className:"text-xs text-red-500",children:"Stress latency threshold must be between 500 and 10000 milliseconds."})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs(qe,{htmlFor:"adjustmentInterval",children:["Adjustment Interval (ms)",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{side:"right",align:"center",sideOffset:12,className:"max-w-xs whitespace-normal break-words",children:i.jsx("p",{children:"Frekuensi pengecekan dan penyesuaian limit (min: 10000ms, max: 600000ms)"})})]})]}),i.jsx(Ye,{id:"adjustmentInterval",inputMode:"numeric",pattern:"[0-9]*",min:1e4,max:6e5,step:1e4,onKeyDown:ne=>{["e","E","+","-","."].includes(ne.key)&&ne.preventDefault()},value:Number.isFinite(oe)?oe:"",onChange:ne=>{const Ee=ne.target.value.replace(/\D/g,"");N(be=>{if(Ee==="")return{...be,adjustmentInterval:NaN};const Te=parseInt(Ee,10);if(!Number.isFinite(Te))return{...be,adjustmentInterval:NaN};const ut=Math.min(6e5,Te);return{...be,adjustmentInterval:ut}})}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(oe)?`Setiap ${(oe/1e3).toFixed(0)} detik`:"Enter an interval between 10000 and 600000 milliseconds."}),!We&&i.jsx("p",{className:"text-xs text-red-500",children:"Adjustment interval must be between 10000 and 600000 milliseconds."})]})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",i.jsx("strong",{children:"Tips:"})," Adaptive rate limiter secara otomatis menyesuaikan limit berdasarkan metrik sistem (response time, error rate). Saat sistem sehat, limit akan naik. Saat sistem stres, limit akan turun untuk melindungi database dari overload."]})})]}),i.jsxs(ba,{children:[i.jsx(te,{variant:"outline",onClick:()=>k(!1),children:"Batal"}),i.jsx(te,{variant:"default",onClick:Ie,disabled:!ct||!Pt||!kt||!Xe||!ye||!it||!$t||!ue||!We,children:"Simpan Perubahan"})]})]})}),i.jsx(fn,{open:y,onOpenChange:b,children:i.jsxs(on,{className:"max-w-2xl",children:[i.jsxs(ln,{children:[i.jsxs(cn,{className:"flex items-center gap-2",children:[i.jsx(ja,{className:"h-5 w-5 text-blue-500"}),"Edit Circuit Breaker Configuration"]}),i.jsx(Pr,{children:"Ubah threshold dan timeout untuk circuit breaker. Perubahan akan langsung diterapkan."})]}),i.jsxs("div",{className:"py-4 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"failureThreshold",children:["Failure Threshold",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Jumlah kegagalan yang diperlukan sebelum circuit breaker terbuka (min: 1, max: 100)"})})]})]}),i.jsx(Ye,{id:"failureThreshold",inputMode:"numeric",pattern:"[0-9]*",min:1,max:100,value:Number.isFinite(P.failureThreshold)?P.failureThreshold:"",onChange:ne=>{const Ee=ne.target.value.replace(/\D/g,"");if(Ee===""){B(Te=>({...Te,failureThreshold:1}));return}const be=Math.min(100,Math.max(1,parseInt(Ee,10)));B(Te=>({...Te,failureThreshold:be}))}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"resetTimeout",children:["Reset Timeout (milliseconds)",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Waktu tunggu sebelum mencoba pemulihan (transisi ke HALF_OPEN). Min: 10000ms, Max: 300000ms"})})]})]}),i.jsx(Ye,{id:"resetTimeout",inputMode:"numeric",pattern:"[0-9]*",min:1e4,max:3e5,step:1e3,onKeyDown:ne=>{["e","E","+","-","."].includes(ne.key)&&ne.preventDefault()},value:Number.isFinite(P.resetTimeout)?P.resetTimeout:"",onChange:ne=>{const Ee=ne.target.value.replace(/\D/g,"");if(Ee===""){B(Te=>({...Te,resetTimeout:NaN}));return}const be=parseInt(Ee,10);if(!Number.isFinite(be)){B(Te=>({...Te,resetTimeout:NaN}));return}B(Te=>({...Te,resetTimeout:be}))}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(P.resetTimeout)?`${(P.resetTimeout/1e3).toFixed(0)} seconds`:"Enter a value between 10000 and 300000"}),Number.isFinite(P.resetTimeout)&&P.resetTimeout<1e4&&i.jsx("p",{className:"text-xs text-red-500",children:"Minimum reset timeout is 10000 milliseconds (10 seconds)."}),Number.isFinite(P.resetTimeout)&&P.resetTimeout>3e5&&i.jsx("p",{className:"text-xs text-red-500",children:"Maximum reset timeout is 300000 milliseconds."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"successThreshold",children:["Success Threshold",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Jumlah sukses berturut-turut di HALF_OPEN untuk menutup circuit (min: 1, max: 10)"})})]})]}),i.jsx(Ye,{id:"successThreshold",inputMode:"numeric",pattern:"[0-9]*",min:1,max:10,onKeyDown:ne=>{["e","E","+","-","."].includes(ne.key)&&ne.preventDefault()},value:Number.isFinite(P.successThreshold)?P.successThreshold:"",onChange:ne=>{const Ee=ne.target.value.replace(/\D/g,"");if(Ee===""){B(ut=>({...ut,successThreshold:NaN}));return}const be=parseInt(Ee,10);if(!Number.isFinite(be)){B(ut=>({...ut,successThreshold:NaN}));return}const Te=Math.min(10,Math.max(1,be));B(ut=>({...ut,successThreshold:Te}))}}),(!Number.isFinite(P.successThreshold)||P.successThreshold<1||P.successThreshold>10)&&i.jsx("p",{className:"text-xs text-red-500",children:"Success threshold must be a number between 1 and 10."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(qe,{htmlFor:"monitoringPeriod",children:["Monitoring Period (milliseconds)",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Jendela waktu untuk menghitung kegagalan. Kegagalan di luar jendela ini tidak dihitung. Min: 1000ms, Max: 60000ms"})})]})]}),i.jsx(Ye,{id:"monitoringPeriod",inputMode:"numeric",pattern:"[0-9]*",min:1e3,max:6e4,step:1e3,onKeyDown:ne=>{["e","E","+","-","."].includes(ne.key)&&ne.preventDefault()},value:Number.isFinite(P.monitoringPeriod)?P.monitoringPeriod:"",onChange:ne=>{const Ee=ne.target.value.replace(/\D/g,"");if(Ee===""){B(Te=>({...Te,monitoringPeriod:NaN}));return}const be=parseInt(Ee,10);if(!Number.isFinite(be)){B(Te=>({...Te,monitoringPeriod:NaN}));return}B(Te=>({...Te,monitoringPeriod:be}))}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(P.monitoringPeriod)?`${(P.monitoringPeriod/1e3).toFixed(0)} seconds`:"Enter a value between 1000 and 60000"}),Number.isFinite(P.monitoringPeriod)&&P.monitoringPeriod<1e3&&i.jsx("p",{className:"text-xs text-red-500",children:"Minimum monitoring period is 1000 milliseconds (1 second)."}),Number.isFinite(P.monitoringPeriod)&&P.monitoringPeriod>6e4&&i.jsx("p",{className:"text-xs text-red-500",children:"Maximum monitoring period is 60000 milliseconds (60 seconds)."})]}),i.jsxs("div",{className:"space-y-2 md:col-span-2",children:[i.jsxs(qe,{htmlFor:"timeout",children:["Request Timeout (milliseconds)",i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(Be,{className:"h-3 w-3 inline ml-1 text-muted-foreground cursor-help"})}),i.jsx(fe,{children:i.jsx("p",{children:"Timeout maksimal untuk setiap request database. Request yang melebihi waktu ini akan dianggap gagal. Min: 1000ms, Max: 60000ms"})})]})]}),i.jsx(Ye,{id:"timeout",inputMode:"numeric",pattern:"[0-9]*",min:1e3,max:6e4,step:1e3,onKeyDown:ne=>{["e","E","+","-","."].includes(ne.key)&&ne.preventDefault()},value:Number.isFinite(P.timeout)?P.timeout:"",onChange:ne=>{const Ee=ne.target.value.replace(/\D/g,"");if(Ee===""){B(ut=>({...ut,timeout:NaN}));return}const be=parseInt(Ee,10);if(!Number.isFinite(be)){B(ut=>({...ut,timeout:NaN}));return}const Te=Math.min(6e4,be);B(ut=>({...ut,timeout:Te}))}}),i.jsx("p",{className:"text-xs text-muted-foreground",children:Number.isFinite(P.timeout)?`${(P.timeout/1e3).toFixed(0)} seconds`:"Enter a value between 1000 and 60000"}),Number.isFinite(P.timeout)&&P.timeout<1e3&&i.jsx("p",{className:"text-xs text-red-500",children:"Minimum request timeout is 1000 milliseconds (1 second)."})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:[" ",i.jsx("strong",{children:"Tips:"})," Threshold yang terlalu rendah dapat membuat circuit breaker terlalu sensitif. Threshold yang terlalu tinggi dapat menunda respons terhadap masalah database. Gunakan nilai yang sesuai dengan karakteristik aplikasi Anda."]})})]}),i.jsxs(ba,{children:[i.jsx(te,{variant:"outline",onClick:()=>b(!1),children:"Batal"}),i.jsx(te,{variant:"default",onClick:Ae,disabled:!Number.isFinite(P.resetTimeout)||P.resetTimeout<1e4||P.resetTimeout>3e5||!Number.isFinite(P.failureThreshold)||P.failureThreshold<1||P.failureThreshold>100||!Number.isFinite(P.successThreshold)||P.successThreshold<1||P.successThreshold>10||!Number.isFinite(P.monitoringPeriod)||P.monitoringPeriod<1e3||P.monitoringPeriod>6e4||!Number.isFinite(P.timeout)||P.timeout<1e3||P.timeout>6e4||!ct||!Pt||!kt||!Xe||!ye||!it||!$t||!ue||!We,children:"Simpan Perubahan"})]})]})}),i.jsx(fn,{open:C,onOpenChange:T,children:i.jsxs(on,{className:"max-w-md",children:[i.jsx(ln,{children:i.jsxs(cn,{className:"flex items-center gap-2",children:[i.jsx(Hs,{className:"h-5 w-5 text-red-500"}),"Error"]})}),i.jsx("div",{className:"py-4",children:i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:M})}),i.jsx(ba,{children:i.jsx(te,{variant:"destructive",onClick:()=>T(!1),children:"Tutup"})})]})})]})}const Fq=p.forwardRef(({role:e,roles:t=[],requireAll:n=!1,fallback:r=null,children:a},s)=>{const{hasRole:o,hasAnyRole:l,loading:c}=_r();if(c)return null;const u=e?[e,...t]:t,f=n?u.every(h=>o(h)):l(u),d=!Array.isArray(a)&&typeof a!="string"&&typeof a!="number";return f?d?i.jsx(KS,{ref:s,children:a}):i.jsx(i.Fragment,{children:a}):i.jsx(i.Fragment,{children:r})});function IIe(){const[e,t]=xN(),{deleteMultipleContacts:n}=uC(),[r,a]=p.useState(""),[s,o]=p.useState(!1),[l,c]=p.useState(null),[u,f]=p.useState(!1),[d,h]=p.useState(90),[m,g]=p.useState(!1),[v,x]=p.useState(""),[y,b]=p.useState(null),[w,k]=p.useState(!1),[_,j]=p.useState(!1),[S,A]=p.useState(null),[C,T]=p.useState(null),[M,F]=p.useState(null),[E,I]=p.useState(null),[P,B]=p.useState(null),[O,$]=p.useState(!1),[L,N]=p.useState(!1),[U,D]=p.useState(""),R=p.useMemo(()=>Array.from(new Set(r.split(/[\s,\n]+/).map(q=>q.trim()).filter(Boolean))),[r]),K=q=>{const ce=new URLSearchParams(e);ce.set("menu",q),t(ce)},Q=()=>{try{Ys.clear(),Fe.success("Local caches cleared")}catch{Fe.error("Failed to clear cache")}},H=async()=>{try{const{data:{user:q}}=await ae.auth.getUser();if(!q)return null;const{data:ce}=await ae.from("org_members").select("org_id").eq("user_id",q.id).limit(1).maybeSingle();return(ce==null?void 0:ce.org_id)??null}catch{return null}},V=async()=>{try{const q=await H();if(!q)return;const{data:ce,error:ke}=await wt.from("org_settings").select("retention_days").eq("org_id",q).maybeSingle();if(ke)throw ke;c((ce==null?void 0:ce.retention_days)??90),h((ce==null?void 0:ce.retention_days)??90)}catch(q){console.error("Failed to fetch retention settings:",q)}},ie=async()=>{try{const q=await H();if(!q)return;const{data:ce,error:ke}=await wt.from("org_settings").select("ai_paused, ai_paused_reason, ai_paused_at, ai_paused_by_user_id").eq("org_id",q).maybeSingle();if(ke)throw ke;A(!!(ce!=null&&ce.ai_paused)),T((ce==null?void 0:ce.ai_paused_reason)??null),F((ce==null?void 0:ce.ai_paused_at)??null);const Ae=(ce==null?void 0:ce.ai_paused_by_user_id)??null;if(I(Ae),Ae)try{const{data:Pe}=await wt.from("users_profile").select("user_id, display_name").eq("user_id",Ae).maybeSingle();if(Pe!=null&&Pe.display_name)B(Pe.display_name);else{const{data:Ie}=await wt.from("v_users").select("id, email").eq("id",Ae).maybeSingle();B((Ie==null?void 0:Ie.email)??Ae)}}catch{B(Ae)}else B(null)}catch(q){console.error("Failed to fetch AI pause status:",q)}},G=async()=>{try{$(!0);const q=await H();if(!q)throw new Error("Unable to resolve organization");const{error:ce}=await wt.from("org_settings").update({ai_paused:!1,ai_paused_reason:null,ai_paused_at:null,ai_paused_by_user_id:null}).eq("org_id",q);if(ce)throw ce;A(!1),T(null),F(null),I(null),B(null),Fe.success("AI auto responses resumed");try{await Bt({action:"ai.resume",resource:"org_settings"})}catch{}}catch(q){Fe.error((q==null?void 0:q.message)||"Failed to resume AI responses")}finally{$(!1)}},le=async()=>{try{$(!0);const{data:{user:q}}=await ae.auth.getUser(),ce=(q==null?void 0:q.id)??null,ke=await H();if(!ke)throw new Error("Unable to resolve organization");const{error:Ae}=await wt.from("org_settings").update({ai_paused:!0,ai_paused_reason:(U==null?void 0:U.trim())||null,ai_paused_at:new Date().toISOString(),ai_paused_by_user_id:ce}).eq("org_id",ke);if(Ae)throw Ae;A(!0),T((U==null?void 0:U.trim())||null),F(new Date().toISOString()),I(ce),B(null),N(!1),Fe.success("AI auto responses paused");try{await Bt({action:"ai.pause",resource:"org_settings",context:{reason:(U==null?void 0:U.trim())||null}})}catch{}ie()}catch(q){Fe.error((q==null?void 0:q.message)||"Failed to pause AI responses")}finally{$(!1),D("")}},se=async()=>{try{k(!0);const q=await H();if(!q)throw new Error("Unable to resolve organization");const{error:ce}=await wt.from("org_settings").update({retention_days:d}).eq("org_id",q);if(ce)throw ce;c(d),f(!1),Fe.success(`Retention period updated to ${d} days`);try{await Bt({action:"retention.update",resource:"org_settings",context:{retention_days:d}})}catch{}}catch(q){Fe.error((q==null?void 0:q.message)||"Failed to update retention settings")}finally{k(!1)}},Z=async()=>{try{k(!0);const{data:q,error:ce}=await wt.rpc("cleanup_old_chat_data",{p_days:l??90});if(ce)throw ce;b(q),Fe.success(`Cleanup completed: ${(q==null?void 0:q.threads_deleted)||0} threads, ${(q==null?void 0:q.messages_deleted)||0} messages deleted`);try{await Bt({action:"retention.cleanup",resource:"chat_data",context:q})}catch{}}catch(q){Fe.error((q==null?void 0:q.message)||"Failed to run cleanup")}finally{k(!1)}},_e=async()=>{if(!v.trim()){Fe.error("Please enter contact UUID");return}try{j(!0);const{data:q,error:ce}=await wt.rpc("gdpr_delete_user_data",{p_contact_id:v.trim()});if(ce)throw ce;Fe.success(`GDPR deletion completed: ${(q==null?void 0:q.threads_deleted)||0} threads, ${(q==null?void 0:q.messages_deleted)||0} messages, ${(q==null?void 0:q.contact_deleted)||0} contacts deleted`),g(!1),x("");try{await Bt({action:"gdpr.delete_request",resource:"contact",resourceId:v,context:q})}catch{}}catch(q){Fe.error((q==null?void 0:q.message)||"Failed to execute GDPR deletion")}finally{j(!1)}};p.useEffect(()=>{V(),ie()},[]);const z=async()=>{if(R.length===0){Fe.error("Provide at least one contact UUID");return}if(window.confirm(`Delete ${R.length} contact(s)? This cannot be undone.`))try{o(!0),await n(R),a(""),Fe.success("Contacts deleted")}catch{Fe.error("Bulk delete failed")}finally{o(!1)}};return i.jsx(Fq,{role:tr.MASTER_AGENT,fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"Admin Panel is available to Master Agents only."}),children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Admin Panel"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Centralized controls for master agents."})]}),i.jsx(St,{className:"bg-blue-100 text-blue-700 border-0",children:"Master Agent"})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsxs(tt,{className:"flex items-center gap-2",children:[i.jsx(ro,{className:"h-4 w-4"})," Access & Management"]})}),i.jsxs(et,{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[i.jsxs(te,{variant:"outline",className:"justify-start",onClick:()=>K("permissions"),children:[i.jsx(QL,{className:"h-4 w-4 mr-2"})," Manage Roles & Permissions"]}),i.jsxs(te,{variant:"outline",className:"justify-start",onClick:()=>K("humanagents"),children:[i.jsx(tN,{className:"h-4 w-4 mr-2"})," Human Agents"]}),i.jsxs(te,{variant:"outline",className:"justify-start",onClick:()=>K("platforms"),children:[i.jsx(XL,{className:"h-4 w-4 mr-2"})," Platforms & Integrations"]}),i.jsxs(te,{variant:"outline",className:"justify-start",onClick:()=>K("analytics"),children:[i.jsx(zL,{className:"h-4 w-4 mr-2"})," Analytics"]}),i.jsxs(te,{variant:"outline",className:"justify-start",onClick:()=>K("logs"),children:[i.jsx(VL,{className:"h-4 w-4 mr-2"})," Audit Logs"]}),i.jsxs(te,{variant:"outline",className:"justify-start",onClick:()=>K("contacts"),children:[i.jsx(YL,{className:"h-4 w-4 mr-2"})," Contacts"]})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsxs(tt,{className:"flex items-center gap-2",children:[i.jsx(no,{className:"h-4 w-4"})," Reliability & Circuit Breaker"]})}),i.jsx(et,{children:i.jsx(OIe,{})})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsxs(tt,{className:"flex items-center gap-2",children:[i.jsx(no,{className:"h-4 w-4"})," AI Auto Responses"]})}),i.jsxs(et,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:"Status:"}),S?i.jsx(St,{className:"bg-red-100 text-red-700 border-0",children:"Paused"}):i.jsx(St,{className:"bg-emerald-100 text-emerald-700 border-0",children:"Active"})]}),S&&i.jsxs("div",{className:"mt-2 text-xs text-muted-foreground space-y-1",children:[C?i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Reason:"})," ",C]}):null,i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Paused"}),P?i.jsxs(i.Fragment,{children:[" by ",P]}):null,M?i.jsxs(i.Fragment,{children:[" at ",new Date(M).toLocaleString()]}):null]})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:S?i.jsxs(te,{onClick:G,disabled:O,children:[i.jsx(GV,{className:"h-4 w-4 mr-2"})," ",O?"Resuming...":"Resume AI Responses"]}):i.jsxs(te,{variant:"destructive",onClick:()=>N(!0),disabled:O,children:[i.jsx(KV,{className:"h-4 w-4 mr-2"})," Pause AI Responses"]})})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"When paused, AI will not auto reply across all channels until resumed."})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsxs(tt,{className:"flex items-center gap-2",children:[i.jsx(mP,{className:"h-4 w-4"})," Utilities"]})}),i.jsx(et,{className:"flex flex-wrap gap-2",children:i.jsxs(te,{variant:"outline",onClick:Q,children:[i.jsx(mP,{className:"h-4 w-4 mr-2"})," Clear Local Cache"]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{className:"flex items-center gap-2",children:"Data Retention Policy"})}),i.jsxs(et,{className:"space-y-3",children:[i.jsx(qe,{className:"text-sm font-medium",children:"Retention Period (days)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ye,{type:"number",value:l??90,onChange:q=>h(parseInt(q.target.value)||90),className:"max-w-xs"}),i.jsx(te,{variant:"outline",onClick:()=>{h(l??90),f(!0)},children:"Edit"})]}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Current: ",l??90," days. Chats older than this will be automatically deleted."]}),i.jsx(te,{onClick:Z,disabled:w,className:"w-full",children:w?"Running Cleanup...":"Run Cleanup Now"}),y&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last cleanup: ",y.threads_deleted," threads, ",y.messages_deleted," messages, ",y.contacts_deleted," contacts"]})]})]}),i.jsxs(Me,{className:"border-red-200",children:[i.jsx(nt,{children:i.jsx(tt,{className:"flex items-center gap-2 text-red-700",children:"GDPR/PDPA Right to Erasure"})}),i.jsxs(et,{className:"space-y-3",children:[i.jsx(qe,{className:"text-sm font-medium",children:"Contact ID"}),i.jsx(Ye,{placeholder:"Enter contact UUID",value:v,onChange:q=>x(q.target.value)}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Enter the contact ID (UUID) gotten from contact detail to delete all associated data permanently."}),i.jsx(Vt,{permission:"contacts.delete",children:i.jsx(te,{variant:"destructive",onClick:()=>g(!0),disabled:!v.trim()||_,className:"w-full",children:"Delete User Data"})}),i.jsx("div",{className:"text-xs text-red-600",children:"Warning: This action permanently deletes all data and cannot be undone."})]})]})]}),i.jsx(fn,{open:u,onOpenChange:f,children:i.jsxs(on,{className:"max-w-md",children:[i.jsxs(ln,{children:[i.jsx(cn,{children:"Configure Data Retention"}),i.jsx(Pr,{children:"Set how many days to retain chat data. Data older than this period will be automatically deleted."})]}),i.jsxs("div",{className:"py-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx(qe,{htmlFor:"retention-days",children:"Retention Period (days)"}),i.jsx(Ye,{id:"retention-days",type:"number",value:d,onChange:q=>h(parseInt(q.target.value)||90)})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:"Automatic cleanup runs daily at 2 AM UTC. You can also trigger manual cleanup from the main panel."})]}),i.jsxs(ba,{children:[i.jsx(te,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),i.jsx(te,{onClick:se,disabled:w,children:w?"Saving...":"Save"})]})]})}),i.jsx(fn,{open:L,onOpenChange:N,children:i.jsxs(on,{className:"max-w-md",children:[i.jsxs(ln,{children:[i.jsx(cn,{children:"Pause AI Auto Responses"}),i.jsx(Pr,{children:"This will pause all AI auto replies across all platforms. You can resume anytime."})]}),i.jsx("div",{className:"py-4 space-y-4",children:i.jsxs("div",{children:[i.jsx(qe,{htmlFor:"pause-reason",children:"Reason (optional)"}),i.jsx(qa,{id:"pause-reason",placeholder:"Enter a reason for pausing (visible to admins)",value:U,onChange:q=>D(q.target.value),className:"min-h-[90px]"})]})}),i.jsxs(ba,{children:[i.jsx(te,{variant:"outline",onClick:()=>N(!1),disabled:O,children:"Cancel"}),i.jsx(te,{variant:"destructive",onClick:le,disabled:O,children:O?"Pausing...":"Confirm Pause"})]})]})}),i.jsx(fn,{open:m,onOpenChange:g,children:i.jsxs(on,{className:"max-w-md",children:[i.jsxs(ln,{children:[i.jsx(cn,{children:"Confirm GDPR Data Deletion"}),i.jsxs(Pr,{children:["This action will permanently delete all data associated with contact ID: ",i.jsx("code",{className:"bg-muted px-1 rounded",children:v})]})]}),i.jsxs(ba,{children:[i.jsx(te,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),i.jsx(te,{variant:"destructive",onClick:_e,disabled:_,children:_?"Deleting...":"Confirm Deletion"})]})]})}),i.jsxs(Me,{className:"border-red-200",children:[i.jsx(nt,{children:i.jsxs(tt,{className:"flex items-center gap-2 text-red-700",children:[i.jsx(Hs,{className:"h-4 w-4"})," Danger Zone"]})}),i.jsx(et,{className:"space-y-3",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Paste contact UUIDs (comma/newline separated) to delete permanently."}),i.jsx(qa,{value:r,onChange:q=>a(q.target.value),placeholder:"uuid-1, uuid-2, uuid-3",className:"min-h-[120px]"}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Parsed: ",R.length]}),i.jsx(Vt,{permission:"contacts.delete",children:i.jsxs(te,{variant:"destructive",onClick:z,disabled:s||R.length===0,children:[i.jsx(Er,{className:"h-4 w-4 mr-2"})," Delete ",R.length||""," Contact",R.length>1?"s":""]})})]})]})})]})]})})}function RIe(){var I,P;Xr();const[e,t]=p.useState([]),[n,r]=p.useState(20),[a,s]=p.useState(1),[o,l]=p.useState(0),[c,u]=p.useState("all"),[f,d]=p.useState("all"),[h,m]=p.useState(""),[g,v]=p.useState(""),[x,y]=p.useState([]),[b,w]=p.useState([]),[k,_]=p.useState({}),[j,S]=p.useState(!1),[A,C]=p.useState(null),T=p.useMemo(()=>({from:h?new Date(h).toISOString():null,to:g?new Date(g).toISOString():null}),[h,g]),M=async()=>{const{data:B}=await ae.from("audit_logs").select("user_id").not("user_id","is",null).limit(1e3),O=Array.from(new Set((B||[]).map(L=>L.user_id)));if(O.length>0){const{data:L}=await ae.from("v_users").select("id,email,display_name").in("id",O),N=(L||[]).map(D=>({id:D.id,email:D.email}));y(N);const U={};for(const D of L||[])U[D.id]={email:D.email,display_name:D.display_name};_(D=>({...D,...U}))}else y([]);const{data:$}=await ae.from("audit_logs").select("action").limit(1e3);w(Array.from(new Set(($||[]).map(L=>L.action))))},F=async()=>{const B=(a-1)*n,{data:O,error:$}=await ae.rpc("get_audit_logs",{p_user_id:c!=="all"?c:null,p_action:f!=="all"?f:null,p_from:T.from,p_to:T.to,p_limit:n,p_offset:B});if(!$){const L=O||[];t(L);let N=ae.from("audit_logs").select("id",{count:"exact"});c!=="all"&&(N=N.eq("user_id",c)),f!=="all"&&(N=N.eq("action",f)),T.from&&(N=N.gte("created_at",T.from)),T.to&&(N=N.lte("created_at",T.to));const{count:U}=await N;l(U||0);const R=Array.from(new Set(L.map(K=>K.user_id).filter(Boolean))).filter(K=>!k[K]);if(R.length>0){const{data:K}=await ae.from("v_users").select("id,email,display_name").in("id",R),Q={};for(const H of K||[])Q[H.id]={email:H.email,display_name:H.display_name};Object.keys(Q).length&&_(H=>({...H,...Q}))}}};p.useEffect(()=>{M()},[]),p.useEffect(()=>{F()},[a,n,c,f,T.from,T.to]),p.useEffect(()=>{const B=ae.channel("realtime:logs").on("postgres_changes",{event:"INSERT",schema:"public",table:"audit_logs"},O=>{const $=O.new;t(N=>[$,...N].slice(0,n));const L=$.user_id;L&&!k[L]&&ae.from("v_users").select("id,email,display_name").eq("id",L).maybeSingle().then(({data:N})=>{N&&_(U=>({...U,[N.id]:{email:N.email,display_name:N.display_name}}))}),l(N=>N+1)}).subscribe();return()=>{ae.removeChannel(B)}},[n]);const E=Math.max(1,Math.ceil(o/n));return i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsx("h1",{className:"text-2xl font-semibold",children:"Logs"}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsx(tt,{children:"Filters"})}),i.jsxs(et,{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"User"}),i.jsxs(Ht,{value:c,onValueChange:u,children:[i.jsx(Ut,{className:"h-9",children:i.jsx(Dt,{placeholder:"All"})}),i.jsxs(zt,{children:[i.jsx(Ge,{value:"all",children:"All"}),x.map(B=>i.jsx(Ge,{value:B.id,children:B.email},B.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"Action"}),i.jsxs(Ht,{value:f,onValueChange:d,children:[i.jsx(Ut,{className:"h-9",children:i.jsx(Dt,{placeholder:"All"})}),i.jsxs(zt,{children:[i.jsx(Ge,{value:"all",children:"All"}),b.map(B=>i.jsx(Ge,{value:B,children:B},B))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"From"}),i.jsx(Ye,{type:"date",value:h,onChange:B=>m(B.target.value),className:"h-9"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-muted-foreground",children:"To"}),i.jsx(Ye,{type:"date",value:g,onChange:B=>v(B.target.value),className:"h-9"})]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsxs(Ht,{value:String(n),onValueChange:B=>r(Number(B)),children:[i.jsx(Ut,{className:"h-9",children:i.jsx(Dt,{placeholder:"Page size"})}),i.jsx(zt,{children:[10,20,50,100].map(B=>i.jsxs(Ge,{value:String(B),children:[B," / page"]},B))})]}),i.jsx(te,{variant:"outline",onClick:()=>{const B=e.map(O=>{var $;return{time:new Date(O.created_at).toISOString(),user:O.user_id?(($=k[O.user_id])==null?void 0:$.email)||O.user_id:"",action:O.action,resource:O.resource,resource_id:O.resource_id||"",ip:O.ip?O.ip.replace(/(\d+\.\d+\.\d+)\.\d+/,"$1.*"):"",context:JSON.stringify(a4(O.context||{}))}});FK(`logs_${new Date().toISOString()}.csv`,B)},children:"Export CSV"})]})]})]}),i.jsxs(Me,{children:[i.jsx(nt,{children:i.jsxs(tt,{children:["Entries (",o,")"]})}),i.jsxs(et,{children:[i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(bb,{children:[i.jsx(wb,{children:i.jsxs(Js,{children:[i.jsx(qn,{children:"Time"}),i.jsx(qn,{children:"User"}),i.jsx(qn,{children:"Action"}),i.jsx(qn,{children:"Resource"}),i.jsx(qn,{children:"Resource ID"}),i.jsx(qn,{children:"IP"}),i.jsx(qn,{})]})}),i.jsx(jb,{children:e.map(B=>{var O,$;return i.jsxs(Js,{children:[i.jsx(Rn,{children:new Date(B.created_at).toLocaleString()}),i.jsx(Rn,{children:B.user_id?((O=k[B.user_id])==null?void 0:O.display_name)||(($=k[B.user_id])==null?void 0:$.email)||B.user_id:""}),i.jsx(Rn,{children:B.action}),i.jsx(Rn,{children:B.resource}),i.jsx(Rn,{children:B.resource_id||""}),i.jsx(Rn,{children:B.ip||""}),i.jsx(Rn,{className:"text-right",children:i.jsx(te,{variant:"outline",size:"sm",onClick:()=>{C(B),S(!0)},children:"Details"})})]},B.id)})})]})}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",a," of ",E]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(te,{variant:"outline",disabled:a<=1,onClick:()=>s(B=>Math.max(1,B-1)),children:"Prev"}),i.jsx(te,{variant:"outline",disabled:a>=E,onClick:()=>s(B=>Math.min(E,B+1)),children:"Next"})]})]})]})]}),i.jsx(fn,{open:j,onOpenChange:S,children:i.jsxs(on,{className:"max-w-2xl",children:[i.jsxs(ln,{children:[i.jsx(cn,{children:"Log Details"}),i.jsx(Pr,{children:A?new Date(A.created_at).toLocaleString():""})]}),A&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"User"}),i.jsx("div",{children:A.user_id?((I=k[A.user_id])==null?void 0:I.display_name)||((P=k[A.user_id])==null?void 0:P.email)||A.user_id:""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Action"}),i.jsx("div",{children:A.action})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Resource"}),i.jsx("div",{children:A.resource})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Resource ID"}),i.jsx("div",{children:A.resource_id||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"IP"}),i.jsx("div",{children:A.ip||""})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"User Agent"}),i.jsx("div",{className:"truncate",title:A.user_agent||void 0,children:A.user_agent||""})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Context"}),i.jsx("pre",{className:"max-h-64 overflow-auto rounded bg-muted p-3 text-xs",children:JSON.stringify(A.context??{},null,2)})]})]}),i.jsx(ba,{children:i.jsx(te,{variant:"outline",onClick:()=>S(!1),children:"Close"})})]})})]})}const BR=({children:e})=>{var d,h,m,g;const{user:t,signOut:n}=Xr();p.useState("profile");const[r,a]=p.useState(!0),[s,o]=p.useState(!1),l=Za(),c=(v,x)=>v?v.split(" ").map(y=>y[0]).join("").toUpperCase().slice(0,2):x.substring(0,2).toUpperCase(),u=async()=>{try{await n()}catch(v){console.error("Error signing out:",v)}},f=()=>{l("/reset-password")};return i.jsxs(ys,{children:[i.jsx(bs,{asChild:!0,children:e}),i.jsx(Wi,{className:"w-[300px] h-[320px] p-0 overflow-hidden",side:"left",align:"start",children:i.jsx("div",{className:"flex h-full",children:i.jsx("div",{className:"flex-1 p-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Vr,{className:"h-10 w-10",children:[i.jsx(Xs,{src:(d=t==null?void 0:t.user_metadata)==null?void 0:d.avatar_url,alt:((h=t==null?void 0:t.user_metadata)==null?void 0:h.full_name)||(t==null?void 0:t.email)}),i.jsx(Kr,{className:"text-sm bg-blue-100 text-blue-600",children:c((m=t==null?void 0:t.user_metadata)==null?void 0:m.full_name,(t==null?void 0:t.email)||"")})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-sm font-semibold",children:((g=t==null?void 0:t.user_metadata)==null?void 0:g.full_name)||"Audit 4"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:t==null?void 0:t.email})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Online Status"}),i.jsx("div",{className:"text-xs font-medium",children:"Online"})]}),i.jsx(kl,{checked:r,onCheckedChange:a,className:"scale-75"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-xs text-muted-foreground",children:"Notifications"}),i.jsx("div",{className:"text-xs font-medium",children:"Disabled"})]}),i.jsx(kl,{checked:s,onCheckedChange:o,className:"scale-75"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium",children:"Reset Password"}),i.jsx(te,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:f,children:i.jsx(Jh,{className:"h-3 w-3 text-muted-foreground"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-medium",children:"Log Out"}),i.jsx(te,{variant:"ghost",size:"sm",className:"p-1 h-6 w-6",onClick:u,children:i.jsx(eN,{className:"h-3 w-3 text-muted-foreground"})})]})]})]})})})})]})};function MIe({icon:e,label:t,active:n=!1,onClick:r,collapsed:a,permissions:s,requireAll:o=!1,resourceAny:l=[],requiredRoles:c=[]}){const{hasAnyPermission:u,hasAllPermissions:f,hasAnyRole:d,loading:h}=_r();if(h)return null;const m=o?f(s):u(s),g=c.length===0||d(c);return!m||!g?null:i.jsxs("button",{type:"button",onClick:r,className:Se("group grid h-10 w-full grid-cols-[1.125rem,1fr] items-center rounded-md px-3 text-left text-sm transition-all duration-200 gap-2",n?"bg-blue-100 text-blue-700 border border-blue-200":"text-muted-foreground hover:bg-blue-50 hover:text-blue-600 hover:border hover:border-blue-100",a&&"grid-cols-[1.125rem,0fr]"),"aria-current":n?"page":void 0,title:a?t:void 0,children:[i.jsx(e,{className:`h-4 w-4 shrink-0 transition-colors ${n?"text-blue-600":"group-hover:text-blue-600"}`}),i.jsx("span",{className:Se("overflow-hidden whitespace-nowrap text-ellipsis transition-opacity duration-200",a&&"opacity-0 pointer-events-none"),children:t})]})}const bu=e=>{const t=zu[e];return Array.isArray(t)?t.filter(n=>n==="read"||n.startsWith("read_")).map(n=>`${e}.${n}`):[]},zg={admin:{key:"admin",label:"Admin Panel",icon:no,permissions:["admin_panel.read"],requireAll:!1,requiredRoles:[tr.MASTER_AGENT],description:"Master agent control center"},chat:{key:"chat",label:"Chat",icon:Vo,permissions:bu("threads"),requireAll:!1,description:"View and manage conversations"},analytics:{key:"analytics",label:"Analytics",icon:zL,permissions:bu("analytics"),requireAll:!1,description:"View performance metrics and insights"},logs:{key:"logs",label:"Logs",icon:VL,permissions:["audit_logs.read"],requireAll:!0,description:"View user action logs"},contacts:{key:"contacts",label:"Contacts",icon:tN,permissions:bu("contacts"),requireAll:!1,description:"Manage customer contacts and identities"},platforms:{key:"platforms",label:"Connected Platforms",icon:XL,permissions:bu("channels"),requireAll:!1,description:"Manage connected channels and integrations"},aiagents:{key:"aiagents",label:"AI Agents",icon:UL,permissions:bu("ai_profiles"),requireAll:!1,description:"Configure and manage AI agents"},humanagents:{key:"humanagents",label:"Human Agents",icon:QL,permissions:bu("super_agents"),requireAll:!1,description:"Manage human agent assignments and roles"},permissions:{key:"permissions",label:"Permissions",icon:ro,permissions:["roles.read"],requireAll:!0,requiredRoles:[tr.MASTER_AGENT],description:"Manage roles and permissions"}},Lk=["admin","chat","analytics","logs","contacts","platforms","aiagents","humanagents","permissions"];function DIe(){const{hasAnyPermission:e,hasAllPermissions:t,hasAnyRole:n,hasPermissionDB:r,userRoles:a,userPermissions:s,loading:o}=_r(),[l,c]=p.useState({});p.useEffect(()=>{if(o)return;let m=!1;return(async()=>{const v=await Promise.all(Lk.map(async x=>{const y=zg[x],b=!y.requiredRoles||y.requiredRoles.length===0?!0:n(y.requiredRoles),w=await Promise.all(y.permissions.map(async _=>{const j=_.indexOf(".");if(j<0)return!1;const S=_.slice(0,j),A=_.slice(j+1);return await r(S,A)})),k=y.requireAll?w.every(Boolean):w.some(Boolean);return[x,b&&k]}));if(!m){const x={};for(const[y,b]of v)x[y]=b;c(x)}})(),()=>{m=!0}},[n,a,s,o]);const u=m=>{const g=zg[m];if(!g)return!1;if(l[m]===!0)return!0;const v=g.requireAll?t(g.permissions):e(g.permissions),x=!g.requiredRoles||g.requiredRoles.length===0?!0:n(g.requiredRoles);return v&&x},f=()=>Lk.filter(m=>u(m));return{canAccessNavItem:u,getAccessibleNavItems:f,getDefaultNavItem:()=>{const m=f();return m.length>0?m[0]:null},getNavItem:m=>zg[m],navigationConfig:zg}}const qg=({step:e,title:t,description:n,emoji:r})=>i.jsxs("div",{className:"flex items-start gap-4 rounded-lg border border-border bg-card p-4 shadow-sm transition-transform hover:-translate-y-0.5",children:[i.jsx("div",{className:"text-2xl animate-float","aria-hidden":!0,children:r}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(St,{variant:"secondary",children:[e,"."]}),i.jsx("h3",{className:"text-base font-semibold text-foreground",children:t})]}),i.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:n})]})]}),UR=()=>{var P,B,O,$,L;const[e,t]=p.useState("chat"),[n,r]=p.useState(!1),{user:a,signOut:s,setAccountDeactivated:o,accountDeactivated:l}=Xr();Za();const[c,u]=xN(),{loading:f,hasRole:d}=_r(),{getDefaultNavItem:h,getNavItem:m,canAccessNavItem:g,getAccessibleNavItems:v}=DIe(),[x,y]=p.useState(!1),[b,w]=p.useState(!1),[k,_]=p.useState(null),[j,S]=p.useState(null),A="synka_ai_paused_ack",C=Lk,T=(N,U)=>{const D=new URLSearchParams(c);D.set("menu",N),u(D,U)};p.useEffect(()=>{if(f)return;const N=c.get("menu");if(N&&C.includes(N)){const U=N;if(g(U))U!==e&&t(U);else{const D=h();D&&D!==e&&(t(D),T(D,{replace:!0}))}}else if(!N){const U=h();T(U||"chat",{replace:!0})}},[c,g,h,f]),p.useEffect(()=>{if(f)return;const N=h();(!C.includes(e)||!g(e))&&N&&(t(N),T(N,{replace:!0}))},[h,g,e,C,f]);const M=async()=>{try{await s()}catch(N){console.error("Error signing out:",N)}},F=(N,U)=>N?N.split(" ").map(D=>D[0]).join("").toUpperCase().slice(0,2):U.substring(0,2).toUpperCase();p.useEffect(()=>{(async()=>{var U;try{const{data:D}=await ae.auth.getUser(),R=(U=D==null?void 0:D.user)==null?void 0:U.id;if(!R)return;const{data:K}=await ae.from("org_members").select("org_id").eq("user_id",R).limit(1).maybeSingle(),Q=K==null?void 0:K.org_id;if(!Q)return;const{data:H,error:V}=await wt.from("org_settings").select("ai_paused, ai_paused_at, ai_paused_by_user_id").eq("org_id",Q).maybeSingle();if(V)throw V;const ie=!!(H!=null&&H.ai_paused);w(ie),_((H==null?void 0:H.ai_paused_at)??null);const G=H==null?void 0:H.ai_paused_by_user_id;if(G){let le=null;try{const{data:se}=await wt.from("users_profile").select("user_id, display_name").eq("user_id",G).maybeSingle();if(le=(se==null?void 0:se.display_name)??null,!le){const{data:Z}=await wt.from("v_users").select("id, email").eq("id",G).maybeSingle();le=(Z==null?void 0:Z.email)??G}}catch{le=G}S(le)}else S(null)}catch{}})()},[]),p.useEffect(()=>{b?localStorage.getItem(A)||y(!0):(localStorage.removeItem(A),y(!1))},[b]);const E=()=>{try{localStorage.setItem(A,Date.now().toString())}catch{}y(!1)},I=()=>{t("admin"),T("admin")};return l?i.jsx("div",{className:"min-h-screen bg-background text-foreground",children:i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Akun Dinonaktifkan"}),i.jsx("p",{className:"text-gray-600",children:"Akun Anda telah dinonaktifkan dan tidak dapat mengakses sistem."})]})})}):i.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[i.jsxs("div",{className:"mx-auto flex min-h-screen",children:[i.jsxs("aside",{className:`shrink-0 border-r border-sidebar-border bg-sidebar transition-all duration-300 ease-in-out ${n?"w-64":"w-[4.7rem]"} md:flex md:flex-col p-4 sticky top-0 h-screen overflow-y-auto`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[i.jsx("div",{className:"flex items-center justify-center px-2 py-3 transition-all duration-200",children:n?i.jsx("img",{src:"/synka.png",alt:"Synka",className:"h-10 w-auto object-contain transition-all duration-300 scale-125"}):i.jsx("img",{src:"/synka_logo.png",alt:"Synka Logo",className:"h-10 w-auto object-contain transition-all duration-300 scale-110"})}),i.jsx(dm,{className:"mb-4 mt-1"}),i.jsx("nav",{className:"flex flex-col gap-1 flex-1",children:v().map(N=>{const U=m(N);return i.jsx(MIe,{icon:U.icon,label:U.label,active:e===N,onClick:()=>{t(N),T(N)},collapsed:!n,permissions:U.permissions,requireAll:U.requireAll,resourceAny:U.resourceAny,requiredRoles:U.requiredRoles},N)})}),i.jsxs("div",{className:"mt-auto flex flex-col gap-1 pt-6",children:[i.jsx(dm,{className:"mb-3"}),i.jsx(BR,{children:i.jsxs("button",{type:"button",className:Se("group grid h-10 w-full grid-cols-[1.125rem,1fr] items-center rounded-md px-3 text-left text-sm transition-all duration-200 gap-2","text-muted-foreground hover:bg-blue-50 hover:text-blue-600 hover:border hover:border-blue-100",!n&&"grid-cols-[1.125rem,0fr]"),title:n?void 0:"Profile",children:[i.jsx(sK,{className:"h-4 w-4 shrink-0 transition-colors group-hover:text-blue-600"}),i.jsx("span",{className:Se("overflow-hidden whitespace-nowrap text-ellipsis transition-opacity duration-200",!n&&"opacity-0 pointer-events-none"),children:"Profile"})]})})]})]}),i.jsxs("main",{className:"flex-1",children:[i.jsx("header",{className:"sticky top-0 z-10 border-b border-border bg-background/80 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:i.jsxs("div",{className:"flex items-center justify-between gap-4 px-4 py-3 md:px-8",children:[i.jsx("div",{className:"flex items-center gap-2 md:gap-3"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx(St,{className:"hidden sm:inline-flex bg-success text-success-foreground cursor-help",children:"Online"})}),i.jsx(fe,{children:i.jsx("p",{children:"Status pengguna saat ini: Online"})})]}),i.jsxs("div",{className:"text-right hidden sm:block min-w-0",children:[i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("div",{className:"text-sm font-medium max-w-[28ch] truncate cursor-help",children:((P=a==null?void 0:a.user_metadata)==null?void 0:P.full_name)||"User"})}),i.jsx(fe,{children:i.jsx("p",{children:"Nama lengkap pengguna"})})]}),i.jsxs(he,{children:[i.jsx(me,{asChild:!0,children:i.jsx("div",{className:"text-xs text-muted-foreground max-w-[32ch] truncate cursor-help",children:a==null?void 0:a.email})}),i.jsx(fe,{children:i.jsx("p",{children:"Alamat email pengguna"})})]})]}),i.jsxs(ku,{children:[i.jsx(Su,{asChild:!0,children:i.jsx(te,{variant:"ghost",className:"relative h-9 w-9 rounded-full",children:i.jsxs(Vr,{className:"h-9 w-9",children:[i.jsx(Xs,{src:(B=a==null?void 0:a.user_metadata)==null?void 0:B.avatar_url,alt:((O=a==null?void 0:a.user_metadata)==null?void 0:O.full_name)||(a==null?void 0:a.email)}),i.jsx(Kr,{className:"text-sm",children:F(($=a==null?void 0:a.user_metadata)==null?void 0:$.full_name,(a==null?void 0:a.email)||"")})]})})}),i.jsxs(nc,{className:"w-56",align:"end",forceMount:!0,children:[i.jsx(o5,{className:"font-normal",children:i.jsxs("div",{className:"flex flex-col space-y-1",children:[i.jsx("p",{className:"text-sm font-medium leading-none",children:((L=a==null?void 0:a.user_metadata)==null?void 0:L.full_name)||"User"}),i.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:a==null?void 0:a.email})]})}),i.jsx(r_,{}),i.jsx(BR,{children:i.jsxs("button",{className:"flex items-center w-full px-2 py-1.5 text-sm text-left hover:bg-accent hover:text-accent-foreground rounded-sm",children:[i.jsx(qv,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Profile"})]})}),i.jsx(r_,{}),i.jsxs(ai,{onClick:M,children:[i.jsx(eN,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Log out"})]})]})]})]})]})}),i.jsx("section",{className:"px-4 py-6 md:px-8",children:e==="admin"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Admin Panel"}),i.jsx(IIe,{})]}):e==="chat"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Chat Inbox"}),i.jsx(yle,{})]}):e==="analytics"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Analytics Dashboard"}),i.jsx(Vt,{permission:"analytics.read",children:i.jsx(lIe,{})})]}):e==="contacts"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Contacts Management"}),i.jsx(Vt,{permission:"contacts.read",children:i.jsx(Nle,{})})]}):e==="platforms"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"Connected Platforms"}),i.jsx(Vt,{permission:"channels.read",children:i.jsx(Ile,{})})]}):e==="aiagents"?i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"sr-only",children:"AI Agents"}),i.jsx(Vt,{permission:"ai_profiles.read",children:i.jsx(SIe,{})})]}):e==="humanagents"?i.jsxs(Vt,{permission:"super_agents.read",fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Human Agents."}),children:[i.jsx("h1",{className:"sr-only",children:"Human Agents"}),i.jsx(NIe,{})]}):e==="permissions"?i.jsx(Fq,{role:tr.MASTER_AGENT,fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Permissions."}),children:i.jsxs(Vt,{permission:"roles.read",children:[i.jsx("h1",{className:"sr-only",children:"Permissions"}),i.jsx(EIe,{})]})}):e==="logs"?i.jsxs(Vt,{permission:"audit_logs.read",fallback:i.jsx("div",{className:"text-sm text-muted-foreground",children:"You do not have access to Logs."}),children:[i.jsx("h1",{className:"sr-only",children:"Logs"}),i.jsx(RIe,{})]}):i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Selamat datang kembali di Synka!"}),i.jsxs("div",{className:"mt-6 grid gap-4 md:max-w-2xl",children:[i.jsx(qg,{step:1,title:"Hubungkan Platform",description:"Mulai terima pesan dari Whatsapp, IG, dan FB Anda!",emoji:""}),i.jsx(qg,{step:2,title:"Buat AI Agent",description:"Jawab pesan masuk dengan Agent AI Anda.",emoji:""}),i.jsx(qg,{step:3,title:"Undang Agen Manusia",description:"Undang tim Anda untuk membantu menjawab chat.",emoji:""}),i.jsx(qg,{step:4,title:"Konek AI Agent ke Inbox",description:"Hubungkan AI Agent dan Human Agent ke platform.",emoji:""})]}),i.jsxs("p",{className:"mt-4 text-sm text-muted-foreground",children:["Butuh bantuan lebih? ",i.jsx("a",{className:"text-brand underline underline-offset-4",href:"#",children:"Lihat Tutorial Youtube kami"})]})]})})]})]}),i.jsx(Ore,{open:x,onClose:E,isMasterAgent:d(tr.MASTER_AGENT),pausedByName:j,pausedAt:k,onOpenAdminPanel:d(tr.MASTER_AGENT)?I:void 0})]})};function $Ie(){var l,c,u,f;const{user:e,signOut:t}=Xr(),[n,r]=p.useState(!1),a=async()=>{r(!0);try{await t(),Fe.success("Signed out successfully")}catch{Fe.error("Failed to sign out")}finally{r(!1)}};if(!e)return null;const s=(d,h)=>d?d.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2):h.substring(0,2).toUpperCase(),o=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return i.jsxs(Me,{className:"w-full max-w-md mx-auto",children:[i.jsxs(nt,{className:"text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsxs(Vr,{className:"h-20 w-20",children:[i.jsx(Xs,{src:(l=e.user_metadata)==null?void 0:l.avatar_url,alt:((c=e.user_metadata)==null?void 0:c.full_name)||e.email}),i.jsx(Kr,{className:"text-lg",children:s((u=e.user_metadata)==null?void 0:u.full_name,e.email||"")})]})}),i.jsx(tt,{className:"text-xl",children:((f=e.user_metadata)==null?void 0:f.full_name)||"User"}),i.jsx(pi,{children:e.email}),i.jsx("div",{className:"flex justify-center mt-2",children:i.jsxs(St,{variant:"secondary",className:"flex items-center gap-1",children:[i.jsx(ro,{className:"w-3 h-3"}),e.email_confirmed_at?"Verified":"Unverified"]})})]}),i.jsxs(et,{className:"space-y-4",children:[i.jsx(dm,{}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zv,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Email"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.email})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Xh,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"Member since"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:o(e.created_at)})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(qv,{className:"w-4 h-4 text-muted-foreground"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"User ID"}),i.jsxs("p",{className:"text-sm text-muted-foreground font-mono",children:[e.id.substring(0,8),"..."]})]})]})]}),i.jsx(dm,{}),i.jsxs(te,{variant:"outline",className:"w-full",onClick:a,disabled:n,children:[i.jsx(eN,{className:"w-4 h-4 mr-2"}),n?"Signing out...":"Sign Out"]})]})]})}function LIe(){const e=Za();return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs(te,{variant:"ghost",onClick:()=>e("/"),className:"mb-4",children:[i.jsx(up,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile"}),i.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your account settings and preferences"})]}),i.jsx($Ie,{})]})})}const FIe=[{id:"lowercase",test:e=>/[a-z]/.test(e),message:"Minimal 1 huruf kecil (a-z)"},{id:"uppercase",test:e=>/[A-Z]/.test(e),message:"Minimal 1 huruf besar (A-Z)"},{id:"number",test:e=>/[0-9]/.test(e),message:"Minimal 1 angka (0-9)"},{id:"symbol",test:e=>/[^A-Za-z0-9]/.test(e),message:"Minimal 1 simbol (contoh: !@#$)"},{id:"length",test:e=>e.length>=8,message:"Minimal 8 karakter"}],zR=e=>FIe.filter(t=>!t.test(e)).map(t=>t.message);function qR(){const[e,t]=p.useState(""),[n,r]=p.useState(""),[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(null),[f,d]=p.useState(!1),[h,m]=p.useState(!1),g=Za();p.useEffect(()=>{(async()=>{try{const k=new URL(window.location.href).searchParams.get("code");k&&await ae.auth.exchangeCodeForSession(k);const{data:{session:_}}=await ae.auth.getSession();_||u("Invalid or expired reset link. Please request a new password reset.")}catch(w){console.warn("Password setup init failed",w)}})()},[]);const v=async b=>{if(b.preventDefault(),l(!0),u(null),!e){u("Kata sandi baru belum diisi."),m(!0),l(!1);return}if(zR(e).length>0){u("Pastikan kata sandi memenuhi semua persyaratan."),m(!0),l(!1);return}if(e!==n){u("Konfirmasi kata sandi tidak sama."),l(!1);return}try{const{error:k}=await ae.auth.updateUser({password:e});if(k)throw k;try{const{data:{user:_}}=await ae.auth.getUser();_&&await ae.from("users_profile").update({password_set:!0}).eq("user_id",_.id)}catch(_){console.warn("Failed to update password_set flag:",_)}d(!0),Fe.success("Password updated successfully!");try{await ae.auth.signOut()}catch{}try{localStorage.removeItem("otpVerified"),localStorage.removeItem("otpRequired"),localStorage.removeItem("app.lastAuthEvent"),localStorage.removeItem("auth.intent")}catch{}setTimeout(()=>{g("/")},1500)}catch(k){console.error("Password reset error:",k),u(k instanceof Error?k.message:"Gagal memperbarui kata sandi."),Fe.error("Gagal memperbarui kata sandi.")}finally{l(!1)}},x=h&&e.length>0,y=p.useMemo(()=>x?zR(e):[],[e,x]);return f?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Me,{className:"w-full max-w-md",children:[i.jsxs(nt,{className:"text-center",children:[i.jsx(tt,{className:"text-2xl font-bold text-green-600",children:"Success!"}),i.jsx(pi,{children:"Your password has been updated successfully. You will be redirected to the login page shortly."})]}),i.jsx(et,{className:"text-center",children:i.jsx(te,{onClick:()=>g("/"),className:"w-full",children:"Go to Login"})})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Me,{className:"w-full max-w-md",children:[i.jsxs(nt,{className:"space-y-1",children:[i.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>g("/"),className:"absolute top-4 left-4",children:[i.jsx(up,{className:"w-4 h-4 mr-2"}),"Back to Login"]}),i.jsxs("div",{className:"text-center",children:[i.jsx(tt,{className:"text-2xl font-bold",children:"Reset Password"}),i.jsx(pi,{children:"Enter your new password below"})]})]}),i.jsxs(et,{children:[c&&i.jsx(cm,{className:"mb-4 border-red-200 bg-red-50",children:i.jsx(um,{className:"text-red-800",children:c})}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"password",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Jh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ye,{id:"password",type:a?"text":"password",placeholder:"Enter new password",value:e,onChange:b=>{h||m(!0),t(b.target.value)},className:"pl-10 pr-10",required:!0,minLength:8}),i.jsx(te,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>s(!a),children:a?i.jsx(KL,{className:"h-4 w-4"}):i.jsx(ZS,{className:"h-4 w-4"})})]}),y.length>0&&i.jsx("div",{className:"mt-2 space-y-1",children:y.map(b=>i.jsxs("p",{className:"flex items-center gap-2 text-xs text-red-600",children:[i.jsx(HL,{className:"h-3 w-3"}),b]},b))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(qe,{htmlFor:"confirm-password",children:"Confirm New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Jh,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(Ye,{id:"confirm-password",type:a?"text":"password",placeholder:"Confirm new password",value:n,onChange:b=>r(b.target.value),className:"pl-10",required:!0,minLength:8})]})]}),i.jsx(te,{type:"submit",className:"w-full",disabled:o,children:o?i.jsxs(i.Fragment,{children:[i.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating password..."]}):"Update Password"})]})]})]})})}var BIe=Object.defineProperty,UIe=Object.defineProperties,zIe=Object.getOwnPropertyDescriptors,ay=Object.getOwnPropertySymbols,Bq=Object.prototype.hasOwnProperty,Uq=Object.prototype.propertyIsEnumerable,WR=(e,t,n)=>t in e?BIe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qIe=(e,t)=>{for(var n in t||(t={}))Bq.call(t,n)&&WR(e,n,t[n]);if(ay)for(var n of ay(t))Uq.call(t,n)&&WR(e,n,t[n]);return e},WIe=(e,t)=>UIe(e,zIe(t)),HIe=(e,t)=>{var n={};for(var r in e)Bq.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ay)for(var r of ay(e))t.indexOf(r)<0&&Uq.call(e,r)&&(n[r]=e[r]);return n};function VIe(e){let t=setTimeout(e,0),n=setTimeout(e,10),r=setTimeout(e,50);return[t,n,r]}function KIe(e){let t=p.useRef();return p.useEffect(()=>{t.current=e}),t.current}var GIe=18,zq=40,YIe=`${zq}px`,XIe=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function JIe({containerRef:e,inputRef:t,pushPasswordManagerStrategy:n,isFocused:r}){let[a,s]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(!1),f=p.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&a&&o,[a,o,n]),d=p.useCallback(()=>{let h=e.current,m=t.current;if(!h||!m||c||n==="none")return;let g=h,v=g.getBoundingClientRect().left+g.offsetWidth,x=g.getBoundingClientRect().top+g.offsetHeight/2,y=v-GIe,b=x;document.querySelectorAll(XIe).length===0&&document.elementFromPoint(y,b)===h||(s(!0),u(!0))},[e,t,c,n]);return p.useEffect(()=>{let h=e.current;if(!h||n==="none")return;function m(){let v=window.innerWidth-h.getBoundingClientRect().right;l(v>=zq)}m();let g=setInterval(m,1e3);return()=>{clearInterval(g)}},[e,n]),p.useEffect(()=>{let h=r||document.activeElement===t.current;if(n==="none"||!h)return;let m=setTimeout(d,0),g=setTimeout(d,2e3),v=setTimeout(d,5e3),x=setTimeout(()=>{u(!0)},6e3);return()=>{clearTimeout(m),clearTimeout(g),clearTimeout(v),clearTimeout(x)}},[t,r,n,d]),{hasPWMBadge:a,willPushPWMBadge:f,PWM_BADGE_SPACE_WIDTH:YIe}}var qq=p.createContext({}),Wq=p.forwardRef((e,t)=>{var n=e,{value:r,onChange:a,maxLength:s,textAlign:o="left",pattern:l,placeholder:c,inputMode:u="numeric",onComplete:f,pushPasswordManagerStrategy:d="increase-width",pasteTransformer:h,containerClassName:m,noScriptCSSFallback:g=QIe,render:v,children:x}=n,y=HIe(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),b,w,k,_,j;let[S,A]=p.useState(typeof y.defaultValue=="string"?y.defaultValue:""),C=r??S,T=KIe(C),M=p.useCallback(z=>{a==null||a(z),A(z)},[a]),F=p.useMemo(()=>l?typeof l=="string"?new RegExp(l):l:null,[l]),E=p.useRef(null),I=p.useRef(null),P=p.useRef({value:C,onChange:M,isIOS:typeof window<"u"&&((w=(b=window==null?void 0:window.CSS)==null?void 0:b.supports)==null?void 0:w.call(b,"-webkit-touch-callout","none"))}),B=p.useRef({prev:[(k=E.current)==null?void 0:k.selectionStart,(_=E.current)==null?void 0:_.selectionEnd,(j=E.current)==null?void 0:j.selectionDirection]});p.useImperativeHandle(t,()=>E.current,[]),p.useEffect(()=>{let z=E.current,q=I.current;if(!z||!q)return;P.current.value!==z.value&&P.current.onChange(z.value),B.current.prev=[z.selectionStart,z.selectionEnd,z.selectionDirection];function ce(){if(document.activeElement!==z){D(null),K(null);return}let Pe=z.selectionStart,Ie=z.selectionEnd,Ne=z.selectionDirection,ze=z.maxLength,at=z.value,pt=B.current.prev,_t=-1,re=-1,pe;if(at.length!==0&&Pe!==null&&Ie!==null){let ct=Pe===Ie,Pt=Pe===at.length&&at.length<ze;if(ct&&!Pt){let kt=Pe;if(kt===0)_t=0,re=1,pe="forward";else if(kt===ze)_t=kt-1,re=kt,pe="backward";else if(ze>1&&at.length>1){let Xe=0;if(pt[0]!==null&&pt[1]!==null){pe=kt<pt[1]?"backward":"forward";let ye=pt[0]===pt[1]&&pt[0]<ze;pe==="backward"&&!ye&&(Xe=-1)}_t=Xe+kt,re=Xe+kt+1}}_t!==-1&&re!==-1&&_t!==re&&E.current.setSelectionRange(_t,re,pe)}let He=_t!==-1?_t:Pe,Ue=re!==-1?re:Ie,oe=pe??Ne;D(He),K(Ue),B.current.prev=[He,Ue,oe]}if(document.addEventListener("selectionchange",ce,{capture:!0}),ce(),document.activeElement===z&&N(!0),!document.getElementById("input-otp-style")){let Pe=document.createElement("style");if(Pe.id="input-otp-style",document.head.appendChild(Pe),Pe.sheet){let Ie="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";eh(Pe.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),eh(Pe.sheet,`[data-input-otp]:autofill { ${Ie} }`),eh(Pe.sheet,`[data-input-otp]:-webkit-autofill { ${Ie} }`),eh(Pe.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),eh(Pe.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let ke=()=>{q&&q.style.setProperty("--root-height",`${z.clientHeight}px`)};ke();let Ae=new ResizeObserver(ke);return Ae.observe(z),()=>{document.removeEventListener("selectionchange",ce,{capture:!0}),Ae.disconnect()}},[]);let[O,$]=p.useState(!1),[L,N]=p.useState(!1),[U,D]=p.useState(null),[R,K]=p.useState(null);p.useEffect(()=>{VIe(()=>{var z,q,ce,ke;(z=E.current)==null||z.dispatchEvent(new Event("input"));let Ae=(q=E.current)==null?void 0:q.selectionStart,Pe=(ce=E.current)==null?void 0:ce.selectionEnd,Ie=(ke=E.current)==null?void 0:ke.selectionDirection;Ae!==null&&Pe!==null&&(D(Ae),K(Pe),B.current.prev=[Ae,Pe,Ie])})},[C,L]),p.useEffect(()=>{T!==void 0&&C!==T&&T.length<s&&C.length===s&&(f==null||f(C))},[s,f,T,C]);let Q=JIe({containerRef:I,inputRef:E,pushPasswordManagerStrategy:d,isFocused:L}),H=p.useCallback(z=>{let q=z.currentTarget.value.slice(0,s);if(q.length>0&&F&&!F.test(q)){z.preventDefault();return}typeof T=="string"&&q.length<T.length&&document.dispatchEvent(new Event("selectionchange")),M(q)},[s,M,T,F]),V=p.useCallback(()=>{var z;if(E.current){let q=Math.min(E.current.value.length,s-1),ce=E.current.value.length;(z=E.current)==null||z.setSelectionRange(q,ce),D(q),K(ce)}N(!0)},[s]),ie=p.useCallback(z=>{var q,ce;let ke=E.current;if(!h&&(!P.current.isIOS||!z.clipboardData||!ke))return;let Ae=z.clipboardData.getData("text/plain"),Pe=h?h(Ae):Ae;z.preventDefault();let Ie=(q=E.current)==null?void 0:q.selectionStart,Ne=(ce=E.current)==null?void 0:ce.selectionEnd,ze=(Ie!==Ne?C.slice(0,Ie)+Pe+C.slice(Ne):C.slice(0,Ie)+Pe+C.slice(Ie)).slice(0,s);if(ze.length>0&&F&&!F.test(ze))return;ke.value=ze,M(ze);let at=Math.min(ze.length,s-1),pt=ze.length;ke.setSelectionRange(at,pt),D(at),K(pt)},[s,M,F,C]),G=p.useMemo(()=>({position:"relative",cursor:y.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[y.disabled]),le=p.useMemo(()=>({position:"absolute",inset:0,width:Q.willPushPWMBadge?`calc(100% + ${Q.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:Q.willPushPWMBadge?`inset(0 ${Q.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[Q.PWM_BADGE_SPACE_WIDTH,Q.willPushPWMBadge,o]),se=p.useMemo(()=>p.createElement("input",WIe(qIe({autoComplete:y.autoComplete||"one-time-code"},y),{"data-input-otp":!0,"data-input-otp-placeholder-shown":C.length===0||void 0,"data-input-otp-mss":U,"data-input-otp-mse":R,inputMode:u,pattern:F==null?void 0:F.source,"aria-placeholder":c,style:le,maxLength:s,value:C,ref:E,onPaste:z=>{var q;ie(z),(q=y.onPaste)==null||q.call(y,z)},onChange:H,onMouseOver:z=>{var q;$(!0),(q=y.onMouseOver)==null||q.call(y,z)},onMouseLeave:z=>{var q;$(!1),(q=y.onMouseLeave)==null||q.call(y,z)},onFocus:z=>{var q;V(),(q=y.onFocus)==null||q.call(y,z)},onBlur:z=>{var q;N(!1),(q=y.onBlur)==null||q.call(y,z)}})),[H,V,ie,u,le,s,R,U,y,F==null?void 0:F.source,C]),Z=p.useMemo(()=>({slots:Array.from({length:s}).map((z,q)=>{var ce;let ke=L&&U!==null&&R!==null&&(U===R&&q===U||q>=U&&q<R),Ae=C[q]!==void 0?C[q]:null,Pe=C[0]!==void 0?null:(ce=c==null?void 0:c[q])!=null?ce:null;return{char:Ae,placeholderChar:Pe,isActive:ke,hasFakeCaret:ke&&Ae===null}}),isFocused:L,isHovering:!y.disabled&&O}),[L,O,s,R,U,y.disabled,C]),_e=p.useMemo(()=>v?v(Z):p.createElement(qq.Provider,{value:Z},x),[x,Z,v]);return p.createElement(p.Fragment,null,g!==null&&p.createElement("noscript",null,p.createElement("style",null,g)),p.createElement("div",{ref:I,"data-input-otp-container":!0,style:G,className:m},_e,p.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},se)))});Wq.displayName="Input";function eh(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var QIe=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const Hq=p.forwardRef(({className:e,containerClassName:t,...n},r)=>i.jsx(Wq,{ref:r,containerClassName:Se("flex items-center gap-2 has-[:disabled]:opacity-50",t),className:Se("disabled:cursor-not-allowed",e),...n}));Hq.displayName="InputOTP";const Vq=p.forwardRef(({className:e,...t},n)=>i.jsx("div",{ref:n,className:Se("flex items-center",e),...t}));Vq.displayName="InputOTPGroup";const ec=p.forwardRef(({index:e,className:t,...n},r)=>{const a=p.useContext(qq),{char:s,hasFakeCaret:o,isActive:l}=a.slots[e];return i.jsxs("div",{ref:r,className:Se("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",l&&"z-10 ring-2 ring-ring ring-offset-background",t),...n,children:[s,o&&i.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});ec.displayName="InputOTPSlot";const ZIe=p.forwardRef(({...e},t)=>i.jsx("div",{ref:t,role:"separator",...e,children:i.jsx(XV,{})}));ZIe.displayName="InputOTPSeparator";function eRe(){const e=Za(),t=Pl(),{user:n,session:r,otpRequired:a,setOtpVerified:s}=Xr(),[o,l]=p.useState(""),[c,u]=p.useState(!1),[f,d]=p.useState(!1),[h,m]=p.useState(null),[g,v]=p.useState(null),[x,y]=p.useState(!1),[b,w]=p.useState(0),[k,_]=p.useState(0);p.useEffect(()=>{v((n==null?void 0:n.email)??null),(!n||!a)&&e("/",{replace:!0});try{const C=new URL(window.location.href),T=C.searchParams.get("type"),M=!!C.searchParams.get("code"),E=(window.location.hash||"").includes("access_token=");y(T==="recovery"||M||E);const I=localStorage.getItem("otpCooldownUntil"),P=I?parseInt(I,10):0;P&&P>Date.now()&&w(P)}catch{}},[n,a,e]),p.useEffect(()=>{if(!b){_(0);return}const C=()=>{const M=Math.ceil((b-Date.now())/1e3);if(M<=0){_(0),w(0);try{localStorage.removeItem("otpCooldownUntil")}catch{}}else _(M)};C();const T=setInterval(C,1e3);return()=>clearInterval(T)},[b]);const j=async C=>{var T,M;C.preventDefault(),u(!0),m(null);try{const F=n==null?void 0:n.email,{data:E,error:I}=await ae.rpc("verify_email_2fa",{p_code:o,p_session_minutes:10,p_user:n==null?void 0:n.id});if(I)throw I;if(!E)throw new Error("Invalid code");s(!0);try{localStorage.setItem("otpVerified","true"),localStorage.removeItem("auth.intent")}catch{}if(Fe.success("Verification successful"),(((T=t==null?void 0:t.state)==null?void 0:T.intent)||null)==="recovery"||x)e("/reset-password",{replace:!0});else{const B=((M=t==null?void 0:t.state)==null?void 0:M.from)||"/";e(B,{replace:!0})}}catch(F){m((F==null?void 0:F.message)||"Verification failed"),Fe.error("Verification failed")}finally{u(!1)}},S=async()=>{if(!(k>0)){d(!0);try{await ae.functions.invoke("send-2fa-login-email",{headers:r!=null&&r.access_token?{Authorization:`Bearer ${r.access_token}`}:void 0}),Fe.success("A new code was sent");const C=Date.now()+3e4;w(C);try{localStorage.setItem("otpCooldownUntil",String(C))}catch{}}catch{Fe.error("Could not resend code")}finally{d(!1)}}},A=async()=>{try{await ae.auth.signOut()}catch{}try{localStorage.removeItem("otpVerified"),localStorage.removeItem("otpRequired"),localStorage.removeItem("auth.intent"),localStorage.removeItem("otpCooldownUntil")}catch{}e("/",{replace:!0})};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs(Me,{className:"w-full max-w-md",children:[i.jsxs(nt,{className:"space-y-1 text-center",children:[i.jsx(tt,{className:"text-2xl font-bold",children:"Enter verification code"}),i.jsxs(pi,{children:["We sent a 6-digit code to ",g?i.jsx("span",{className:"font-medium",children:g}):"your email","."]})]}),i.jsxs(et,{children:[h&&i.jsx(cm,{className:"mb-4 border-red-200 bg-red-50",children:i.jsx(um,{className:"text-red-800",children:h})}),i.jsxs("form",{onSubmit:j,className:"space-y-6",children:[i.jsx("div",{className:"flex justify-center",children:i.jsx(Hq,{maxLength:6,value:o,onChange:l,autoFocus:!0,children:i.jsxs(Vq,{children:[i.jsx(ec,{index:0}),i.jsx(ec,{index:1}),i.jsx(ec,{index:2}),i.jsx(ec,{index:3}),i.jsx(ec,{index:4}),i.jsx(ec,{index:5})]})})}),i.jsx(te,{type:"submit",className:"w-full",disabled:c||o.length!==6,children:c?i.jsxs(i.Fragment,{children:[i.jsx(Kt,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify"}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsx("span",{children:"Didn't get the code?"}),i.jsx(te,{type:"button",variant:"link",className:"px-0",onClick:S,disabled:f||k>0,children:f?"Resending...":k>0?`Resend in ${k}s`:"Resend code"})]}),i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(te,{type:"button",variant:"ghost",onClick:A,children:"Sign out"})})]})]})]})})}function tRe(){const e=Za();return p.useEffect(()=>{(async()=>{try{try{const n=[];for(let a=0;a<localStorage.length;a++){const s=localStorage.key(a);s&&n.push(s)}n.forEach(a=>{try{localStorage.removeItem(a)}catch{}});const r=[];for(let a=0;a<sessionStorage.length;a++){const s=sessionStorage.key(a);s&&r.push(s)}r.forEach(a=>{try{sessionStorage.removeItem(a)}catch{}})}catch(n){console.warn("Error clearing cache:",n)}await ae.auth.signOut()}catch{}e("/",{replace:!0})})()},[e]),null}const nRe=()=>{const e=Pl();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function rRe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const aRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,iRe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,sRe={};function HR(e,t){return(sRe.jsx?iRe:aRe).test(e)}const oRe=/[ \t\n\f\r]/g;function lRe(e){return typeof e=="object"?e.type==="text"?VR(e.value):!1:VR(e)}function VR(e){return e.replace(oRe,"")===""}class zp{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}}zp.prototype.normal={};zp.prototype.property={};zp.prototype.space=void 0;function Kq(e,t){const n={},r={};for(const a of e)Object.assign(n,a.property),Object.assign(r,a.normal);return new zp(n,r,t)}function Fk(e){return e.toLowerCase()}class Da{constructor(t,n){this.attribute=n,this.property=t}}Da.prototype.attribute="";Da.prototype.booleanish=!1;Da.prototype.boolean=!1;Da.prototype.commaOrSpaceSeparated=!1;Da.prototype.commaSeparated=!1;Da.prototype.defined=!1;Da.prototype.mustUseProperty=!1;Da.prototype.number=!1;Da.prototype.overloadedBoolean=!1;Da.prototype.property="";Da.prototype.spaceSeparated=!1;Da.prototype.space=void 0;let cRe=0;const Ot=au(),er=au(),Bk=au(),Le=au(),wn=au(),ld=au(),La=au();function au(){return 2**++cRe}const Uk=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ot,booleanish:er,commaOrSpaceSeparated:La,commaSeparated:ld,number:Le,overloadedBoolean:Bk,spaceSeparated:wn},Symbol.toStringTag,{value:"Module"})),pj=Object.keys(Uk);class NA extends Da{constructor(t,n,r,a){let s=-1;if(super(t,n),KR(this,"space",a),typeof r=="number")for(;++s<pj.length;){const o=pj[s];KR(this,pj[s],(r&Uk[o])===Uk[o])}}}NA.prototype.defined=!0;function KR(e,t,n){n&&(e[t]=n)}function kf(e){const t={},n={};for(const[r,a]of Object.entries(e.properties)){const s=new NA(r,e.transform(e.attributes||{},r),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Fk(r)]=r,n[Fk(s.attribute)]=r}return new zp(t,n,e.space)}const Gq=kf({properties:{ariaActiveDescendant:null,ariaAtomic:er,ariaAutoComplete:null,ariaBusy:er,ariaChecked:er,ariaColCount:Le,ariaColIndex:Le,ariaColSpan:Le,ariaControls:wn,ariaCurrent:null,ariaDescribedBy:wn,ariaDetails:null,ariaDisabled:er,ariaDropEffect:wn,ariaErrorMessage:null,ariaExpanded:er,ariaFlowTo:wn,ariaGrabbed:er,ariaHasPopup:null,ariaHidden:er,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:wn,ariaLevel:Le,ariaLive:null,ariaModal:er,ariaMultiLine:er,ariaMultiSelectable:er,ariaOrientation:null,ariaOwns:wn,ariaPlaceholder:null,ariaPosInSet:Le,ariaPressed:er,ariaReadOnly:er,ariaRelevant:null,ariaRequired:er,ariaRoleDescription:wn,ariaRowCount:Le,ariaRowIndex:Le,ariaRowSpan:Le,ariaSelected:er,ariaSetSize:Le,ariaSort:null,ariaValueMax:Le,ariaValueMin:Le,ariaValueNow:Le,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function Yq(e,t){return t in e?e[t]:t}function Xq(e,t){return Yq(e,t.toLowerCase())}const uRe=kf({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ld,acceptCharset:wn,accessKey:wn,action:null,allow:null,allowFullScreen:Ot,allowPaymentRequest:Ot,allowUserMedia:Ot,alt:null,as:null,async:Ot,autoCapitalize:null,autoComplete:wn,autoFocus:Ot,autoPlay:Ot,blocking:wn,capture:null,charSet:null,checked:Ot,cite:null,className:wn,cols:Le,colSpan:null,content:null,contentEditable:er,controls:Ot,controlsList:wn,coords:Le|ld,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ot,defer:Ot,dir:null,dirName:null,disabled:Ot,download:Bk,draggable:er,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ot,formTarget:null,headers:wn,height:Le,hidden:Bk,high:Le,href:null,hrefLang:null,htmlFor:wn,httpEquiv:wn,id:null,imageSizes:null,imageSrcSet:null,inert:Ot,inputMode:null,integrity:null,is:null,isMap:Ot,itemId:null,itemProp:wn,itemRef:wn,itemScope:Ot,itemType:wn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ot,low:Le,manifest:null,max:null,maxLength:Le,media:null,method:null,min:null,minLength:Le,multiple:Ot,muted:Ot,name:null,nonce:null,noModule:Ot,noValidate:Ot,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ot,optimum:Le,pattern:null,ping:wn,placeholder:null,playsInline:Ot,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ot,referrerPolicy:null,rel:wn,required:Ot,reversed:Ot,rows:Le,rowSpan:Le,sandbox:wn,scope:null,scoped:Ot,seamless:Ot,selected:Ot,shadowRootClonable:Ot,shadowRootDelegatesFocus:Ot,shadowRootMode:null,shape:null,size:Le,sizes:null,slot:null,span:Le,spellCheck:er,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Le,step:null,style:null,tabIndex:Le,target:null,title:null,translate:null,type:null,typeMustMatch:Ot,useMap:null,value:er,width:Le,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:wn,axis:null,background:null,bgColor:null,border:Le,borderColor:null,bottomMargin:Le,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ot,declare:Ot,event:null,face:null,frame:null,frameBorder:null,hSpace:Le,leftMargin:Le,link:null,longDesc:null,lowSrc:null,marginHeight:Le,marginWidth:Le,noResize:Ot,noHref:Ot,noShade:Ot,noWrap:Ot,object:null,profile:null,prompt:null,rev:null,rightMargin:Le,rules:null,scheme:null,scrolling:er,standby:null,summary:null,text:null,topMargin:Le,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Le,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ot,disableRemotePlayback:Ot,prefix:null,property:null,results:Le,security:null,unselectable:null},space:"html",transform:Xq}),dRe=kf({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:La,accentHeight:Le,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Le,amplitude:Le,arabicForm:null,ascent:Le,attributeName:null,attributeType:null,azimuth:Le,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Le,by:null,calcMode:null,capHeight:Le,className:wn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Le,diffuseConstant:Le,direction:null,display:null,dur:null,divisor:Le,dominantBaseline:null,download:Ot,dx:null,dy:null,edgeMode:null,editable:null,elevation:Le,enableBackground:null,end:null,event:null,exponent:Le,externalResourcesRequired:null,fill:null,fillOpacity:Le,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ld,g2:ld,glyphName:ld,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Le,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Le,horizOriginX:Le,horizOriginY:Le,id:null,ideographic:Le,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Le,k:Le,k1:Le,k2:Le,k3:Le,k4:Le,kernelMatrix:La,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Le,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Le,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Le,overlineThickness:Le,paintOrder:null,panose1:null,path:null,pathLength:Le,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:wn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Le,pointsAtY:Le,pointsAtZ:Le,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:La,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:La,rev:La,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:La,requiredFeatures:La,requiredFonts:La,requiredFormats:La,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Le,specularExponent:Le,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Le,strikethroughThickness:Le,string:null,stroke:null,strokeDashArray:La,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Le,strokeOpacity:Le,strokeWidth:null,style:null,surfaceScale:Le,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:La,tabIndex:Le,tableValues:null,target:null,targetX:Le,targetY:Le,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:La,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Le,underlineThickness:Le,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Le,values:null,vAlphabetic:Le,vMathematical:Le,vectorEffect:null,vHanging:Le,vIdeographic:Le,version:null,vertAdvY:Le,vertOriginX:Le,vertOriginY:Le,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Le,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Yq}),Jq=kf({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),Qq=kf({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Xq}),Zq=kf({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),fRe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},hRe=/[A-Z]/g,GR=/-[a-z]/g,mRe=/^data[-\w.:]+$/i;function pRe(e,t){const n=Fk(t);let r=t,a=Da;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&mRe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(GR,vRe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!GR.test(s)){let o=s.replace(hRe,gRe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}a=NA}return new a(r,t)}function gRe(e){return"-"+e.toLowerCase()}function vRe(e){return e.charAt(1).toUpperCase()}const xRe=Kq([Gq,uRe,Jq,Qq,Zq],"html"),CA=Kq([Gq,dRe,Jq,Qq,Zq],"svg");function yRe(e){return e.join(" ").trim()}var AA={},YR=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,bRe=/\n/g,wRe=/^\s*/,jRe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,_Re=/^:\s*/,kRe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,SRe=/^[;\s]*/,NRe=/^\s+|\s+$/g,CRe=`
`,XR="/",JR="*",rc="",ARe="comment",ERe="declaration",PRe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function a(g){var v=g.match(bRe);v&&(n+=v.length);var x=g.lastIndexOf(CRe);r=~x?g.length-x:r+g.length}function s(){var g={line:n,column:r};return function(v){return v.position=new o(g),u(),v}}function o(g){this.start=g,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(g){var v=new Error(t.source+":"+n+":"+r+": "+g);if(v.reason=g,v.filename=t.source,v.line=n,v.column=r,v.source=e,!t.silent)throw v}function c(g){var v=g.exec(e);if(v){var x=v[0];return a(x),e=e.slice(x.length),v}}function u(){c(wRe)}function f(g){var v;for(g=g||[];v=d();)v!==!1&&g.push(v);return g}function d(){var g=s();if(!(XR!=e.charAt(0)||JR!=e.charAt(1))){for(var v=2;rc!=e.charAt(v)&&(JR!=e.charAt(v)||XR!=e.charAt(v+1));)++v;if(v+=2,rc===e.charAt(v-1))return l("End of comment missing");var x=e.slice(2,v-2);return r+=2,a(x),e=e.slice(v),r+=2,g({type:ARe,comment:x})}}function h(){var g=s(),v=c(jRe);if(v){if(d(),!c(_Re))return l("property missing ':'");var x=c(kRe),y=g({type:ERe,property:QR(v[0].replace(YR,rc)),value:x?QR(x[0].replace(YR,rc)):rc});return c(SRe),y}}function m(){var g=[];f(g);for(var v;v=h();)v!==!1&&(g.push(v),f(g));return g}return u(),m()};function QR(e){return e?e.replace(NRe,rc):rc}var TRe=rr&&rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(AA,"__esModule",{value:!0});AA.default=IRe;var ORe=TRe(PRe);function IRe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,ORe.default)(e),a=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,l=s.value;a?t(o,l,s):l&&(n=n||{},n[o]=l)}}),n}var p0={};Object.defineProperty(p0,"__esModule",{value:!0});p0.camelCase=void 0;var RRe=/^--[a-zA-Z0-9_-]+$/,MRe=/-([a-z])/g,DRe=/^[^-]+$/,$Re=/^-(webkit|moz|ms|o|khtml)-/,LRe=/^-(ms)-/,FRe=function(e){return!e||DRe.test(e)||RRe.test(e)},BRe=function(e,t){return t.toUpperCase()},ZR=function(e,t){return"".concat(t,"-")},URe=function(e,t){return t===void 0&&(t={}),FRe(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(LRe,ZR):e=e.replace($Re,ZR),e.replace(MRe,BRe))};p0.camelCase=URe;var zRe=rr&&rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},qRe=zRe(AA),WRe=p0;function zk(e,t){var n={};return!e||typeof e!="string"||(0,qRe.default)(e,function(r,a){r&&a&&(n[(0,WRe.camelCase)(r,t)]=a)}),n}zk.default=zk;var HRe=zk;const VRe=un(HRe),e9=t9("end"),EA=t9("start");function t9(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function KRe(e){const t=EA(e),n=e9(e);if(t&&n)return{start:t,end:n}}function Ph(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?eM(e.position):"start"in e||"end"in e?eM(e):"line"in e||"column"in e?qk(e):""}function qk(e){return tM(e&&e.line)+":"+tM(e&&e.column)}function eM(e){return qk(e&&e.start)+"-"+qk(e&&e.end)}function tM(e){return e&&typeof e=="number"?e:1}class Jr extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let a="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?a=t:!s.cause&&t&&(o=!0,a=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=l?l.line:void 0,this.name=Ph(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Jr.prototype.file="";Jr.prototype.name="";Jr.prototype.reason="";Jr.prototype.message="";Jr.prototype.stack="";Jr.prototype.column=void 0;Jr.prototype.line=void 0;Jr.prototype.ancestors=void 0;Jr.prototype.cause=void 0;Jr.prototype.fatal=void 0;Jr.prototype.place=void 0;Jr.prototype.ruleId=void 0;Jr.prototype.source=void 0;const PA={}.hasOwnProperty,GRe=new Map,YRe=/[A-Z]/g,XRe=new Set(["table","tbody","thead","tfoot","tr"]),JRe=new Set(["td","th"]),n9="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function QRe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=sMe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=iMe(n,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?CA:xRe,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=r9(a,e,void 0);return s&&typeof s!="string"?s:a.create(e,a.Fragment,{children:s||void 0},void 0)}function r9(e,t,n){if(t.type==="element")return ZRe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return eMe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return nMe(e,t,n);if(t.type==="mdxjsEsm")return tMe(e,t);if(t.type==="root")return rMe(e,t,n);if(t.type==="text")return aMe(e,t)}function ZRe(e,t,n){const r=e.schema;let a=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(a=CA,e.schema=a),e.ancestors.push(t);const s=i9(e,t.tagName,!1),o=oMe(e,t);let l=OA(e,t);return XRe.has(t.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!lRe(c):!0})),a9(e,o,s,t),TA(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function eMe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}Qm(e,t.position)}function tMe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Qm(e,t.position)}function nMe(e,t,n){const r=e.schema;let a=r;t.name==="svg"&&r.space==="html"&&(a=CA,e.schema=a),e.ancestors.push(t);const s=t.name===null?e.Fragment:i9(e,t.name,!0),o=lMe(e,t),l=OA(e,t);return a9(e,o,s,t),TA(o,l),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function rMe(e,t,n){const r={};return TA(r,OA(e,t)),e.create(t,e.Fragment,r,n)}function aMe(e,t){return t.value}function a9(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function TA(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function iMe(e,t,n){return r;function r(a,s,o,l){const u=Array.isArray(o.children)?n:t;return l?u(s,o,l):u(s,o)}}function sMe(e,t){return n;function n(r,a,s,o){const l=Array.isArray(s.children),c=EA(r);return t(a,s,o,l,{columnNumber:c?c.column-1:void 0,fileName:e,lineNumber:c?c.line:void 0},void 0)}}function oMe(e,t){const n={};let r,a;for(a in t.properties)if(a!=="children"&&PA.call(t.properties,a)){const s=cMe(e,a,t.properties[a]);if(s){const[o,l]=s;e.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&JRe.has(t.tagName)?r=l:n[o]=l}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function lMe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,e.evaluater.evaluateExpression(l.argument))}else Qm(e,t.position);else{const a=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const l=r.value.data.estree.body[0];l.type,s=e.evaluater.evaluateExpression(l.expression)}else Qm(e,t.position);else s=r.value===null?!0:r.value;n[a]=s}return n}function OA(e,t){const n=[];let r=-1;const a=e.passKeys?new Map:GRe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const u=a.get(c)||0;o=c+"-"+u,a.set(c,u+1)}}const l=r9(e,s,o);l!==void 0&&n.push(l)}return n}function cMe(e,t,n){const r=pRe(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?rRe(n):yRe(n)),r.property==="style"){let a=typeof n=="object"?n:uMe(e,String(n));return e.stylePropertyNameCase==="css"&&(a=dMe(a)),["style",a]}return[e.elementAttributeNameCase==="react"&&r.space?fRe[r.property]||r.property:r.attribute,n]}}function uMe(e,t){try{return VRe(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,a=new Jr("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=e.filePath||void 0,a.url=n9+"#cannot-parse-style-attribute",a}}function i9(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const a=t.split(".");let s=-1,o;for(;++s<a.length;){const l=HR(a[s])?{type:"Identifier",name:a[s]}:{type:"Literal",value:a[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}r=o}else r=HR(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const a=r.value;return PA.call(e.components,a)?e.components[a]:a}if(e.evaluater)return e.evaluater.evaluateExpression(r);Qm(e)}function Qm(e,t){const n=new Jr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=n9+"#cannot-handle-mdx-estrees-without-createevaluater",n}function dMe(e){const t={};let n;for(n in e)PA.call(e,n)&&(t[fMe(n)]=e[n]);return t}function fMe(e){let t=e.replace(YRe,hMe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function hMe(e){return"-"+e.toLowerCase()}const gj={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},mMe={};function IA(e,t){const n=mMe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return s9(e,r,a)}function s9(e,t,n){if(pMe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return nM(e.children,t,n)}return Array.isArray(e)?nM(e,t,n):""}function nM(e,t,n){const r=[];let a=-1;for(;++a<e.length;)r[a]=s9(e[a],t,n);return r.join("")}function pMe(e){return!!(e&&typeof e=="object")}const rM=document.createElement("i");function RA(e){const t="&"+e+";";rM.innerHTML=t;const n=rM.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Ga(e,t,n,r){const a=e.length;let s=0,o;if(t<0?t=-t>a?0:a+t:t=t>a?a:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function di(e,t){return e.length>0?(Ga(e,e.length,0,t),e):t}const aM={}.hasOwnProperty;function o9(e){const t={};let n=-1;for(;++n<e.length;)gMe(t,e[n]);return t}function gMe(e,t){let n;for(n in t){const a=(aM.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){aM.call(a,o)||(a[o]=[]);const l=s[o];vMe(a[o],Array.isArray(l)?l:l?[l]:[])}}}function vMe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Ga(e,0,0,r)}function l9(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Xi(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const oa=Ul(/[A-Za-z]/),Gr=Ul(/[\dA-Za-z]/),xMe=Ul(/[#-'*+\--9=?A-Z^-~]/);function iy(e){return e!==null&&(e<32||e===127)}const Wk=Ul(/\d/),yMe=Ul(/[\dA-Fa-f]/),bMe=Ul(/[!-/:-@[-`{-~]/);function vt(e){return e!==null&&e<-2}function vn(e){return e!==null&&(e<0||e===32)}function qt(e){return e===-2||e===-1||e===32}const g0=Ul(new RegExp("\\p{P}|\\p{S}","u")),Wc=Ul(/\s/);function Ul(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Sf(e){const t=[];let n=-1,r=0,a=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Gr(e.charCodeAt(n+1))&&Gr(e.charCodeAt(n+2)))a=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=e.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),a=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+a+1,o=""),a&&(n+=a,a=0)}return t.join("")+e.slice(r)}function Yt(e,t,n,r){const a=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(c){return qt(c)?(e.enter(n),l(c)):t(c)}function l(c){return qt(c)&&s++<a?(e.consume(c),l):(e.exit(n),t(c))}}const wMe={tokenize:jMe};function jMe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,a);let n;return t;function r(l){if(l===null){e.consume(l);return}return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),Yt(e,t,"linePrefix")}function a(l){return e.enter("paragraph"),s(l)}function s(l){const c=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,o(l)}function o(l){if(l===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(l);return}return vt(l)?(e.consume(l),e.exit("chunkText"),s):(e.consume(l),o)}}const _Me={tokenize:kMe},iM={tokenize:SMe};function kMe(e){const t=this,n=[];let r=0,a,s,o;return l;function l(w){if(r<n.length){const k=n[r];return t.containerState=k[1],e.attempt(k[0].continuation,c,u)(w)}return u(w)}function c(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,a&&b();const k=t.events.length;let _=k,j;for(;_--;)if(t.events[_][0]==="exit"&&t.events[_][1].type==="chunkFlow"){j=t.events[_][1].end;break}y(r);let S=k;for(;S<t.events.length;)t.events[S][1].end={...j},S++;return Ga(t.events,_+1,0,t.events.slice(k)),t.events.length=S,u(w)}return l(w)}function u(w){if(r===n.length){if(!a)return h(w);if(a.currentConstruct&&a.currentConstruct.concrete)return g(w);t.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(iM,f,d)(w)}function f(w){return a&&b(),y(r),h(w)}function d(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,g(w)}function h(w){return t.containerState={},e.attempt(iM,m,g)(w)}function m(w){return r++,n.push([t.currentConstruct,t.containerState]),h(w)}function g(w){if(w===null){a&&b(),y(0),e.consume(w);return}return a=a||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:s}),v(w)}function v(w){if(w===null){x(e.exit("chunkFlow"),!0),y(0),e.consume(w);return}return vt(w)?(e.consume(w),x(e.exit("chunkFlow")),r=0,t.interrupt=void 0,l):(e.consume(w),v)}function x(w,k){const _=t.sliceStream(w);if(k&&_.push(null),w.previous=s,s&&(s.next=w),s=w,a.defineSkip(w.start),a.write(_),t.parser.lazy[w.start.line]){let j=a.events.length;for(;j--;)if(a.events[j][1].start.offset<o&&(!a.events[j][1].end||a.events[j][1].end.offset>o))return;const S=t.events.length;let A=S,C,T;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(C){T=t.events[A][1].end;break}C=!0}for(y(r),j=S;j<t.events.length;)t.events[j][1].end={...T},j++;Ga(t.events,A+1,0,t.events.slice(S)),t.events.length=j}}function y(w){let k=n.length;for(;k-- >w;){const _=n[k];t.containerState=_[1],_[0].exit.call(t,e)}n.length=w}function b(){a.write([null]),s=void 0,a=void 0,t.containerState._closeFlow=void 0}}function SMe(e,t,n){return Yt(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Qd(e){if(e===null||vn(e)||Wc(e))return 1;if(g0(e))return 2}function v0(e,t,n){const r=[];let a=-1;for(;++a<e.length;){const s=e[a].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const Hk={name:"attention",resolveAll:NMe,tokenize:CMe};function NMe(e,t){let n=-1,r,a,s,o,l,c,u,f;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;c=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},h={...e[n][1].start};sM(d,-c),sM(h,c),o={type:c>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:h},s={type:c>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},a={type:c>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},e[r][1].end={...o.start},e[n][1].start={...l.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=di(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=di(u,[["enter",a,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=di(u,v0(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=di(u,[["exit",s,t],["enter",l,t],["exit",l,t],["exit",a,t]]),e[n][1].end.offset-e[n][1].start.offset?(f=2,u=di(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):f=0,Ga(e,r-1,n-r+3,u),n=r+u.length-f-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function CMe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,a=Qd(r);let s;return o;function o(c){return s=c,e.enter("attentionSequence"),l(c)}function l(c){if(c===s)return e.consume(c),l;const u=e.exit("attentionSequence"),f=Qd(c),d=!f||f===2&&a||n.includes(c),h=!a||a===2&&f||n.includes(r);return u._open=!!(s===42?d:d&&(a||!h)),u._close=!!(s===42?h:h&&(f||!d)),t(c)}}function sM(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const AMe={name:"autolink",tokenize:EMe};function EMe(e,t,n){let r=0;return a;function a(m){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(m){return oa(m)?(e.consume(m),o):m===64?n(m):u(m)}function o(m){return m===43||m===45||m===46||Gr(m)?(r=1,l(m)):u(m)}function l(m){return m===58?(e.consume(m),r=0,c):(m===43||m===45||m===46||Gr(m))&&r++<32?(e.consume(m),l):(r=0,u(m))}function c(m){return m===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):m===null||m===32||m===60||iy(m)?n(m):(e.consume(m),c)}function u(m){return m===64?(e.consume(m),f):xMe(m)?(e.consume(m),u):n(m)}function f(m){return Gr(m)?d(m):n(m)}function d(m){return m===46?(e.consume(m),r=0,f):m===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(m),e.exit("autolinkMarker"),e.exit("autolink"),t):h(m)}function h(m){if((m===45||Gr(m))&&r++<63){const g=m===45?h:d;return e.consume(m),g}return n(m)}}const qp={partial:!0,tokenize:PMe};function PMe(e,t,n){return r;function r(s){return qt(s)?Yt(e,a,"linePrefix")(s):a(s)}function a(s){return s===null||vt(s)?t(s):n(s)}}const c9={continuation:{tokenize:OMe},exit:IMe,name:"blockQuote",tokenize:TMe};function TMe(e,t,n){const r=this;return a;function a(o){if(o===62){const l=r.containerState;return l.open||(e.enter("blockQuote",{_container:!0}),l.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return qt(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function OMe(e,t,n){const r=this;return a;function a(o){return qt(o)?Yt(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(c9,t,n)(o)}}function IMe(e){e.exit("blockQuote")}const u9={name:"characterEscape",tokenize:RMe};function RMe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),a}function a(s){return bMe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const d9={name:"characterReference",tokenize:MMe};function MMe(e,t,n){const r=this;let a=0,s,o;return l;function l(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),c}function c(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=Gr,f(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=yMe,f):(e.enter("characterReferenceValue"),s=7,o=Wk,f(d))}function f(d){if(d===59&&a){const h=e.exit("characterReferenceValue");return o===Gr&&!RA(r.sliceSerialize(h))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&a++<s?(e.consume(d),f):n(d)}}const oM={partial:!0,tokenize:$Me},lM={concrete:!0,name:"codeFenced",tokenize:DMe};function DMe(e,t,n){const r=this,a={partial:!0,tokenize:_};let s=0,o=0,l;return c;function c(j){return u(j)}function u(j){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,l=j,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),f(j)}function f(j){return j===l?(o++,e.consume(j),f):o<3?n(j):(e.exit("codeFencedFenceSequence"),qt(j)?Yt(e,d,"whitespace")(j):d(j))}function d(j){return j===null||vt(j)?(e.exit("codeFencedFence"),r.interrupt?t(j):e.check(oM,v,k)(j)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(j))}function h(j){return j===null||vt(j)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(j)):qt(j)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Yt(e,m,"whitespace")(j)):j===96&&j===l?n(j):(e.consume(j),h)}function m(j){return j===null||vt(j)?d(j):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(j))}function g(j){return j===null||vt(j)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(j)):j===96&&j===l?n(j):(e.consume(j),g)}function v(j){return e.attempt(a,k,x)(j)}function x(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),y}function y(j){return s>0&&qt(j)?Yt(e,b,"linePrefix",s+1)(j):b(j)}function b(j){return j===null||vt(j)?e.check(oM,v,k)(j):(e.enter("codeFlowValue"),w(j))}function w(j){return j===null||vt(j)?(e.exit("codeFlowValue"),b(j)):(e.consume(j),w)}function k(j){return e.exit("codeFenced"),t(j)}function _(j,S,A){let C=0;return T;function T(P){return j.enter("lineEnding"),j.consume(P),j.exit("lineEnding"),M}function M(P){return j.enter("codeFencedFence"),qt(P)?Yt(j,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):F(P)}function F(P){return P===l?(j.enter("codeFencedFenceSequence"),E(P)):A(P)}function E(P){return P===l?(C++,j.consume(P),E):C>=o?(j.exit("codeFencedFenceSequence"),qt(P)?Yt(j,I,"whitespace")(P):I(P)):A(P)}function I(P){return P===null||vt(P)?(j.exit("codeFencedFence"),S(P)):A(P)}}}function $Me(e,t,n){const r=this;return a;function a(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const vj={name:"codeIndented",tokenize:FMe},LMe={partial:!0,tokenize:BMe};function FMe(e,t,n){const r=this;return a;function a(u){return e.enter("codeIndented"),Yt(e,s,"linePrefix",5)(u)}function s(u){const f=r.events[r.events.length-1];return f&&f[1].type==="linePrefix"&&f[2].sliceSerialize(f[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?c(u):vt(u)?e.attempt(LMe,o,c)(u):(e.enter("codeFlowValue"),l(u))}function l(u){return u===null||vt(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),l)}function c(u){return e.exit("codeIndented"),t(u)}}function BMe(e,t,n){const r=this;return a;function a(o){return r.parser.lazy[r.now().line]?n(o):vt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),a):Yt(e,s,"linePrefix",5)(o)}function s(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):vt(o)?a(o):n(o)}}const UMe={name:"codeText",previous:qMe,resolve:zMe,tokenize:WMe};function zMe(e){let t=e.length-4,n=3,r,a;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)a===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(a=r):(r===t||e[r][1].type==="lineEnding")&&(e[a][1].type="codeTextData",r!==a+2&&(e[a][1].end=e[r-1][1].end,e.splice(a+2,r-a-2),t-=r-a-2,r=a+2),a=void 0);return e}function qMe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function WMe(e,t,n){let r=0,a,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),l(d)}function l(d){return d===96?(e.consume(d),r++,l):(e.exit("codeTextSequence"),c(d))}function c(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),c):d===96?(s=e.enter("codeTextSequence"),a=0,f(d)):vt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||vt(d)?(e.exit("codeTextData"),c(d)):(e.consume(d),u)}function f(d){return d===96?(e.consume(d),a++,f):a===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",u(d))}}class HMe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const a=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return r&&th(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),th(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),th(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);th(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);th(this.left,n.reverse())}}}function th(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function f9(e){const t={};let n=-1,r,a,s,o,l,c,u;const f=new HMe(e);for(;++n<f.length;){for(;n in t;)n=t[n];if(r=f.get(n),n&&r[1].type==="chunkFlow"&&f.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,VMe(f,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,a=void 0;s--;)if(o=f.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(a&&(f.get(a)[1].type="lineEndingBlank"),o[1].type="lineEnding",a=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;a&&(r[1].end={...f.get(a)[1].start},l=f.slice(a,n),l.unshift(r),f.splice(a,n-a+1,l))}}return Ga(e,0,Number.POSITIVE_INFINITY,f.slice(0)),!u}function VMe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let a=t-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,c=[],u={};let f,d,h=-1,m=n,g=0,v=0;const x=[v];for(;m;){for(;e.get(++a)[1]!==m;);s.push(a),m._tokenizer||(f=r.sliceStream(m),m.next||f.push(null),d&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(f),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=m,m=m.next}for(m=n;++h<l.length;)l[h][0]==="exit"&&l[h-1][0]==="enter"&&l[h][1].type===l[h-1][1].type&&l[h][1].start.line!==l[h][1].end.line&&(v=h+1,x.push(v),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):x.pop(),h=x.length;h--;){const y=l.slice(x[h],x[h+1]),b=s.pop();c.push([b,b+y.length-1]),e.splice(b,2,y)}for(c.reverse(),h=-1;++h<c.length;)u[g+c[h][0]]=g+c[h][1],g+=c[h][1]-c[h][0]-1;return u}const KMe={resolve:YMe,tokenize:XMe},GMe={partial:!0,tokenize:JMe};function YMe(e){return f9(e),e}function XMe(e,t){let n;return r;function r(l){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),a(l)}function a(l){return l===null?s(l):vt(l)?e.check(GMe,o,s)(l):(e.consume(l),a)}function s(l){return e.exit("chunkContent"),e.exit("content"),t(l)}function o(l){return e.consume(l),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function JMe(e,t,n){const r=this;return a;function a(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Yt(e,s,"linePrefix")}function s(o){if(o===null||vt(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function h9(e,t,n,r,a,s,o,l,c){const u=c||Number.POSITIVE_INFINITY;let f=0;return d;function d(y){return y===60?(e.enter(r),e.enter(a),e.enter(s),e.consume(y),e.exit(s),h):y===null||y===32||y===41||iy(y)?n(y):(e.enter(r),e.enter(o),e.enter(l),e.enter("chunkString",{contentType:"string"}),v(y))}function h(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(a),e.exit(r),t):(e.enter(l),e.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===62?(e.exit("chunkString"),e.exit(l),h(y)):y===null||y===60||vt(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===60||y===62||y===92?(e.consume(y),m):m(y)}function v(y){return!f&&(y===null||y===41||vn(y))?(e.exit("chunkString"),e.exit(l),e.exit(o),e.exit(r),t(y)):f<u&&y===40?(e.consume(y),f++,v):y===41?(e.consume(y),f--,v):y===null||y===32||y===40||iy(y)?n(y):(e.consume(y),y===92?x:v)}function x(y){return y===40||y===41||y===92?(e.consume(y),v):v(y)}}function m9(e,t,n,r,a,s){const o=this;let l=0,c;return u;function u(m){return e.enter(r),e.enter(a),e.consume(m),e.exit(a),e.enter(s),f}function f(m){return l>999||m===null||m===91||m===93&&!c||m===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(e.exit(s),e.enter(a),e.consume(m),e.exit(a),e.exit(r),t):vt(m)?(e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),f):(e.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===null||m===91||m===93||vt(m)||l++>999?(e.exit("chunkString"),f(m)):(e.consume(m),c||(c=!qt(m)),m===92?h:d)}function h(m){return m===91||m===92||m===93?(e.consume(m),l++,d):d(m)}}function p9(e,t,n,r,a,s){let o;return l;function l(h){return h===34||h===39||h===40?(e.enter(r),e.enter(a),e.consume(h),e.exit(a),o=h===40?41:h,c):n(h)}function c(h){return h===o?(e.enter(a),e.consume(h),e.exit(a),e.exit(r),t):(e.enter(s),u(h))}function u(h){return h===o?(e.exit(s),c(o)):h===null?n(h):vt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),Yt(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===o||h===null||vt(h)?(e.exit("chunkString"),u(h)):(e.consume(h),h===92?d:f)}function d(h){return h===o||h===92?(e.consume(h),f):f(h)}}function Th(e,t){let n;return r;function r(a){return vt(a)?(e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,r):qt(a)?Yt(e,r,n?"linePrefix":"lineSuffix")(a):t(a)}}const QMe={name:"definition",tokenize:eDe},ZMe={partial:!0,tokenize:tDe};function eDe(e,t,n){const r=this;let a;return s;function s(m){return e.enter("definition"),o(m)}function o(m){return m9.call(r,e,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function l(m){return a=Xi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(e.enter("definitionMarker"),e.consume(m),e.exit("definitionMarker"),c):n(m)}function c(m){return vn(m)?Th(e,u)(m):u(m)}function u(m){return h9(e,f,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function f(m){return e.attempt(ZMe,d,d)(m)}function d(m){return qt(m)?Yt(e,h,"whitespace")(m):h(m)}function h(m){return m===null||vt(m)?(e.exit("definition"),r.parser.defined.push(a),t(m)):n(m)}}function tDe(e,t,n){return r;function r(l){return vn(l)?Th(e,a)(l):n(l)}function a(l){return p9(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return qt(l)?Yt(e,o,"whitespace")(l):o(l)}function o(l){return l===null||vt(l)?t(l):n(l)}}const nDe={name:"hardBreakEscape",tokenize:rDe};function rDe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),a}function a(s){return vt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const aDe={name:"headingAtx",resolve:iDe,tokenize:sDe};function iDe(e,t){let n=e.length-2,r=3,a,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(a={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Ga(e,r,n-r+1,[["enter",a,t],["enter",s,t],["exit",s,t],["exit",a,t]])),e}function sDe(e,t,n){let r=0;return a;function a(f){return e.enter("atxHeading"),s(f)}function s(f){return e.enter("atxHeadingSequence"),o(f)}function o(f){return f===35&&r++<6?(e.consume(f),o):f===null||vn(f)?(e.exit("atxHeadingSequence"),l(f)):n(f)}function l(f){return f===35?(e.enter("atxHeadingSequence"),c(f)):f===null||vt(f)?(e.exit("atxHeading"),t(f)):qt(f)?Yt(e,l,"whitespace")(f):(e.enter("atxHeadingText"),u(f))}function c(f){return f===35?(e.consume(f),c):(e.exit("atxHeadingSequence"),l(f))}function u(f){return f===null||f===35||vn(f)?(e.exit("atxHeadingText"),l(f)):(e.consume(f),u)}}const oDe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],cM=["pre","script","style","textarea"],lDe={concrete:!0,name:"htmlFlow",resolveTo:dDe,tokenize:fDe},cDe={partial:!0,tokenize:mDe},uDe={partial:!0,tokenize:hDe};function dDe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function fDe(e,t,n){const r=this;let a,s,o,l,c;return u;function u(R){return f(R)}function f(R){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(R),d}function d(R){return R===33?(e.consume(R),h):R===47?(e.consume(R),s=!0,v):R===63?(e.consume(R),a=3,r.interrupt?t:N):oa(R)?(e.consume(R),o=String.fromCharCode(R),x):n(R)}function h(R){return R===45?(e.consume(R),a=2,m):R===91?(e.consume(R),a=5,l=0,g):oa(R)?(e.consume(R),a=4,r.interrupt?t:N):n(R)}function m(R){return R===45?(e.consume(R),r.interrupt?t:N):n(R)}function g(R){const K="CDATA[";return R===K.charCodeAt(l++)?(e.consume(R),l===K.length?r.interrupt?t:F:g):n(R)}function v(R){return oa(R)?(e.consume(R),o=String.fromCharCode(R),x):n(R)}function x(R){if(R===null||R===47||R===62||vn(R)){const K=R===47,Q=o.toLowerCase();return!K&&!s&&cM.includes(Q)?(a=1,r.interrupt?t(R):F(R)):oDe.includes(o.toLowerCase())?(a=6,K?(e.consume(R),y):r.interrupt?t(R):F(R)):(a=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(R):s?b(R):w(R))}return R===45||Gr(R)?(e.consume(R),o+=String.fromCharCode(R),x):n(R)}function y(R){return R===62?(e.consume(R),r.interrupt?t:F):n(R)}function b(R){return qt(R)?(e.consume(R),b):T(R)}function w(R){return R===47?(e.consume(R),T):R===58||R===95||oa(R)?(e.consume(R),k):qt(R)?(e.consume(R),w):T(R)}function k(R){return R===45||R===46||R===58||R===95||Gr(R)?(e.consume(R),k):_(R)}function _(R){return R===61?(e.consume(R),j):qt(R)?(e.consume(R),_):w(R)}function j(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(e.consume(R),c=R,S):qt(R)?(e.consume(R),j):A(R)}function S(R){return R===c?(e.consume(R),c=null,C):R===null||vt(R)?n(R):(e.consume(R),S)}function A(R){return R===null||R===34||R===39||R===47||R===60||R===61||R===62||R===96||vn(R)?_(R):(e.consume(R),A)}function C(R){return R===47||R===62||qt(R)?w(R):n(R)}function T(R){return R===62?(e.consume(R),M):n(R)}function M(R){return R===null||vt(R)?F(R):qt(R)?(e.consume(R),M):n(R)}function F(R){return R===45&&a===2?(e.consume(R),B):R===60&&a===1?(e.consume(R),O):R===62&&a===4?(e.consume(R),U):R===63&&a===3?(e.consume(R),N):R===93&&a===5?(e.consume(R),L):vt(R)&&(a===6||a===7)?(e.exit("htmlFlowData"),e.check(cDe,D,E)(R)):R===null||vt(R)?(e.exit("htmlFlowData"),E(R)):(e.consume(R),F)}function E(R){return e.check(uDe,I,D)(R)}function I(R){return e.enter("lineEnding"),e.consume(R),e.exit("lineEnding"),P}function P(R){return R===null||vt(R)?E(R):(e.enter("htmlFlowData"),F(R))}function B(R){return R===45?(e.consume(R),N):F(R)}function O(R){return R===47?(e.consume(R),o="",$):F(R)}function $(R){if(R===62){const K=o.toLowerCase();return cM.includes(K)?(e.consume(R),U):F(R)}return oa(R)&&o.length<8?(e.consume(R),o+=String.fromCharCode(R),$):F(R)}function L(R){return R===93?(e.consume(R),N):F(R)}function N(R){return R===62?(e.consume(R),U):R===45&&a===2?(e.consume(R),N):F(R)}function U(R){return R===null||vt(R)?(e.exit("htmlFlowData"),D(R)):(e.consume(R),U)}function D(R){return e.exit("htmlFlow"),t(R)}}function hDe(e,t,n){const r=this;return a;function a(o){return vt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function mDe(e,t,n){return r;function r(a){return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),e.attempt(qp,t,n)}}const pDe={name:"htmlText",tokenize:gDe};function gDe(e,t,n){const r=this;let a,s,o;return l;function l(N){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(N),c}function c(N){return N===33?(e.consume(N),u):N===47?(e.consume(N),_):N===63?(e.consume(N),w):oa(N)?(e.consume(N),A):n(N)}function u(N){return N===45?(e.consume(N),f):N===91?(e.consume(N),s=0,g):oa(N)?(e.consume(N),b):n(N)}function f(N){return N===45?(e.consume(N),m):n(N)}function d(N){return N===null?n(N):N===45?(e.consume(N),h):vt(N)?(o=d,O(N)):(e.consume(N),d)}function h(N){return N===45?(e.consume(N),m):d(N)}function m(N){return N===62?B(N):N===45?h(N):d(N)}function g(N){const U="CDATA[";return N===U.charCodeAt(s++)?(e.consume(N),s===U.length?v:g):n(N)}function v(N){return N===null?n(N):N===93?(e.consume(N),x):vt(N)?(o=v,O(N)):(e.consume(N),v)}function x(N){return N===93?(e.consume(N),y):v(N)}function y(N){return N===62?B(N):N===93?(e.consume(N),y):v(N)}function b(N){return N===null||N===62?B(N):vt(N)?(o=b,O(N)):(e.consume(N),b)}function w(N){return N===null?n(N):N===63?(e.consume(N),k):vt(N)?(o=w,O(N)):(e.consume(N),w)}function k(N){return N===62?B(N):w(N)}function _(N){return oa(N)?(e.consume(N),j):n(N)}function j(N){return N===45||Gr(N)?(e.consume(N),j):S(N)}function S(N){return vt(N)?(o=S,O(N)):qt(N)?(e.consume(N),S):B(N)}function A(N){return N===45||Gr(N)?(e.consume(N),A):N===47||N===62||vn(N)?C(N):n(N)}function C(N){return N===47?(e.consume(N),B):N===58||N===95||oa(N)?(e.consume(N),T):vt(N)?(o=C,O(N)):qt(N)?(e.consume(N),C):B(N)}function T(N){return N===45||N===46||N===58||N===95||Gr(N)?(e.consume(N),T):M(N)}function M(N){return N===61?(e.consume(N),F):vt(N)?(o=M,O(N)):qt(N)?(e.consume(N),M):C(N)}function F(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(e.consume(N),a=N,E):vt(N)?(o=F,O(N)):qt(N)?(e.consume(N),F):(e.consume(N),I)}function E(N){return N===a?(e.consume(N),a=void 0,P):N===null?n(N):vt(N)?(o=E,O(N)):(e.consume(N),E)}function I(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||vn(N)?C(N):(e.consume(N),I)}function P(N){return N===47||N===62||vn(N)?C(N):n(N)}function B(N){return N===62?(e.consume(N),e.exit("htmlTextData"),e.exit("htmlText"),t):n(N)}function O(N){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),$}function $(N){return qt(N)?Yt(e,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):L(N)}function L(N){return e.enter("htmlTextData"),o(N)}}const MA={name:"labelEnd",resolveAll:bDe,resolveTo:wDe,tokenize:jDe},vDe={tokenize:_De},xDe={tokenize:kDe},yDe={tokenize:SDe};function bDe(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const a=r.type==="labelImage"?4:2;r.type="data",t+=a}}return e.length!==n.length&&Ga(e,0,e.length,n),e}function wDe(e,t){let n=e.length,r=0,a,s,o,l;for(;n--;)if(a=e[n][1],s){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;e[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(s=n,a.type!=="labelLink")){r=2;break}}else a.type==="labelEnd"&&(o=n);const c={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},f={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[o-2][1].start}};return l=[["enter",c,t],["enter",u,t]],l=di(l,e.slice(s+1,s+r+3)),l=di(l,[["enter",f,t]]),l=di(l,v0(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),l=di(l,[["exit",f,t],e[o-2],e[o-1],["exit",u,t]]),l=di(l,e.slice(o+1)),l=di(l,[["exit",c,t]]),Ga(e,s,e.length,l),e}function jDe(e,t,n){const r=this;let a=r.events.length,s,o;for(;a--;)if((r.events[a][1].type==="labelImage"||r.events[a][1].type==="labelLink")&&!r.events[a][1]._balanced){s=r.events[a][1];break}return l;function l(h){return s?s._inactive?d(h):(o=r.parser.defined.includes(Xi(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(h),e.exit("labelMarker"),e.exit("labelEnd"),c):n(h)}function c(h){return h===40?e.attempt(vDe,f,o?f:d)(h):h===91?e.attempt(xDe,f,o?u:d)(h):o?f(h):d(h)}function u(h){return e.attempt(yDe,f,d)(h)}function f(h){return t(h)}function d(h){return s._balanced=!0,n(h)}}function _De(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),a}function a(d){return vn(d)?Th(e,s)(d):s(d)}function s(d){return d===41?f(d):h9(e,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return vn(d)?Th(e,c)(d):f(d)}function l(d){return n(d)}function c(d){return d===34||d===39||d===40?p9(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):f(d)}function u(d){return vn(d)?Th(e,f)(d):f(d)}function f(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function kDe(e,t,n){const r=this;return a;function a(l){return m9.call(r,e,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(Xi(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(l):n(l)}function o(l){return n(l)}}function SDe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),a}function a(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const NDe={name:"labelStartImage",resolveAll:MA.resolveAll,tokenize:CDe};function CDe(e,t,n){const r=this;return a;function a(l){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(l),e.exit("labelImageMarker"),s}function s(l){return l===91?(e.enter("labelMarker"),e.consume(l),e.exit("labelMarker"),e.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):t(l)}}const ADe={name:"labelStartLink",resolveAll:MA.resolveAll,tokenize:EDe};function EDe(e,t,n){const r=this;return a;function a(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const xj={name:"lineEnding",tokenize:PDe};function PDe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Yt(e,t,"linePrefix")}}const gv={name:"thematicBreak",tokenize:TDe};function TDe(e,t,n){let r=0,a;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return a=u,l(u)}function l(u){return u===a?(e.enter("thematicBreakSequence"),c(u)):r>=3&&(u===null||vt(u))?(e.exit("thematicBreak"),t(u)):n(u)}function c(u){return u===a?(e.consume(u),r++,c):(e.exit("thematicBreakSequence"),qt(u)?Yt(e,l,"whitespace")(u):l(u))}}const xa={continuation:{tokenize:MDe},exit:$De,name:"list",tokenize:RDe},ODe={partial:!0,tokenize:LDe},IDe={partial:!0,tokenize:DDe};function RDe(e,t,n){const r=this,a=r.events[r.events.length-1];let s=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,o=0;return l;function l(m){const g=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:Wk(m)){if(r.containerState.type||(r.containerState.type=g,e.enter(g,{_container:!0})),g==="listUnordered")return e.enter("listItemPrefix"),m===42||m===45?e.check(gv,n,u)(m):u(m);if(!r.interrupt||m===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),c(m)}return n(m)}function c(m){return Wk(m)&&++o<10?(e.consume(m),c):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(e.exit("listItemValue"),u(m)):n(m)}function u(m){return e.enter("listItemMarker"),e.consume(m),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,e.check(qp,r.interrupt?n:f,e.attempt(ODe,h,d))}function f(m){return r.containerState.initialBlankLine=!0,s++,h(m)}function d(m){return qt(m)?(e.enter("listItemPrefixWhitespace"),e.consume(m),e.exit("listItemPrefixWhitespace"),h):n(m)}function h(m){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(m)}}function MDe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(qp,a,s);function a(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Yt(e,t,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!qt(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(IDe,t,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,Yt(e,e.attempt(xa,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function DDe(e,t,n){const r=this;return Yt(e,a,"listItemIndent",r.containerState.size+1);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function $De(e){e.exit(this.containerState.type)}function LDe(e,t,n){const r=this;return Yt(e,a,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(s){const o=r.events[r.events.length-1];return!qt(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const uM={name:"setextUnderline",resolveTo:FDe,tokenize:BDe};function FDe(e,t){let n=e.length,r,a,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(a=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[a][1].type="setextHeadingText",s?(e.splice(a,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function BDe(e,t,n){const r=this;let a;return s;function s(u){let f=r.events.length,d;for(;f--;)if(r.events[f][1].type!=="lineEnding"&&r.events[f][1].type!=="linePrefix"&&r.events[f][1].type!=="content"){d=r.events[f][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),a=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===a?(e.consume(u),l):(e.exit("setextHeadingLineSequence"),qt(u)?Yt(e,c,"lineSuffix")(u):c(u))}function c(u){return u===null||vt(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const UDe={tokenize:zDe};function zDe(e){const t=this,n=e.attempt(qp,r,e.attempt(this.parser.constructs.flowInitial,a,Yt(e,e.attempt(this.parser.constructs.flow,a,e.attempt(KMe,a)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function a(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const qDe={resolveAll:v9()},WDe=g9("string"),HDe=g9("text");function g9(e){return{resolveAll:v9(e==="text"?VDe:void 0),tokenize:t};function t(n){const r=this,a=this.parser.constructs[e],s=n.attempt(a,o,l);return o;function o(f){return u(f)?s(f):l(f)}function l(f){if(f===null){n.consume(f);return}return n.enter("data"),n.consume(f),c}function c(f){return u(f)?(n.exit("data"),s(f)):(n.consume(f),c)}function u(f){if(f===null)return!0;const d=a[f];let h=-1;if(d)for(;++h<d.length;){const m=d[h];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function v9(e){return t;function t(n,r){let a=-1,s;for(;++a<=n.length;)s===void 0?n[a]&&n[a][1].type==="data"&&(s=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==s+2&&(n[s][1].end=n[a-1][1].end,n.splice(s+2,a-s-2),a=s+2),s=void 0);return e?e(n,r):n}}function VDe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],a=t.sliceStream(r);let s=a.length,o=-1,l=0,c;for(;s--;){const u=a[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)c=!0,l++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const u={type:n===e.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const KDe={42:xa,43:xa,45:xa,48:xa,49:xa,50:xa,51:xa,52:xa,53:xa,54:xa,55:xa,56:xa,57:xa,62:c9},GDe={91:QMe},YDe={[-2]:vj,[-1]:vj,32:vj},XDe={35:aDe,42:gv,45:[uM,gv],60:lDe,61:uM,95:gv,96:lM,126:lM},JDe={38:d9,92:u9},QDe={[-5]:xj,[-4]:xj,[-3]:xj,33:NDe,38:d9,42:Hk,60:[AMe,pDe],91:ADe,92:[nDe,u9],93:MA,95:Hk,96:UMe},ZDe={null:[Hk,qDe]},e$e={null:[42,95]},t$e={null:[]},n$e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:e$e,contentInitial:GDe,disable:t$e,document:KDe,flow:XDe,flowInitial:YDe,insideSpan:ZDe,string:JDe,text:QDe},Symbol.toStringTag,{value:"Module"}));function r$e(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},s=[];let o=[],l=[];const c={attempt:S(_),check:S(j),consume:b,enter:w,exit:k,interrupt:S(j,{interrupt:!0})},u={code:null,containerState:{},defineSkip:v,events:[],now:g,parser:e,previous:null,sliceSerialize:h,sliceStream:m,write:d};let f=t.tokenize.call(u,c);return t.resolveAll&&s.push(t),u;function d(M){return o=di(o,M),x(),o[o.length-1]!==null?[]:(A(t,0),u.events=v0(s,u.events,u),u.events)}function h(M,F){return i$e(m(M),F)}function m(M){return a$e(o,M)}function g(){const{_bufferIndex:M,_index:F,line:E,column:I,offset:P}=r;return{_bufferIndex:M,_index:F,line:E,column:I,offset:P}}function v(M){a[M.line]=M.column,T()}function x(){let M;for(;r._index<o.length;){const F=o[r._index];if(typeof F=="string")for(M=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===M&&r._bufferIndex<F.length;)y(F.charCodeAt(r._bufferIndex));else y(F)}}function y(M){f=f(M)}function b(M){vt(M)?(r.line++,r.column=1,r.offset+=M===-3?2:1,T()):M!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=M}function w(M,F){const E=F||{};return E.type=M,E.start=g(),u.events.push(["enter",E,u]),l.push(E),E}function k(M){const F=l.pop();return F.end=g(),u.events.push(["exit",F,u]),F}function _(M,F){A(M,F.from)}function j(M,F){F.restore()}function S(M,F){return E;function E(I,P,B){let O,$,L,N;return Array.isArray(I)?D(I):"tokenize"in I?D([I]):U(I);function U(H){return V;function V(ie){const G=ie!==null&&H[ie],le=ie!==null&&H.null,se=[...Array.isArray(G)?G:G?[G]:[],...Array.isArray(le)?le:le?[le]:[]];return D(se)(ie)}}function D(H){return O=H,$=0,H.length===0?B:R(H[$])}function R(H){return V;function V(ie){return N=C(),L=H,H.partial||(u.currentConstruct=H),H.name&&u.parser.constructs.disable.null.includes(H.name)?Q():H.tokenize.call(F?Object.assign(Object.create(u),F):u,c,K,Q)(ie)}}function K(H){return M(L,N),P}function Q(H){return N.restore(),++$<O.length?R(O[$]):B}}}function A(M,F){M.resolveAll&&!s.includes(M)&&s.push(M),M.resolve&&Ga(u.events,F,u.events.length-F,M.resolve(u.events.slice(F),u)),M.resolveTo&&(u.events=M.resolveTo(u.events,u))}function C(){const M=g(),F=u.previous,E=u.currentConstruct,I=u.events.length,P=Array.from(l);return{from:I,restore:B};function B(){r=M,u.previous=F,u.currentConstruct=E,u.events.length=I,l=P,T()}}function T(){r.line in a&&r.column<2&&(r.column=a[r.line],r.offset+=a[r.line]-1)}}function a$e(e,t){const n=t.start._index,r=t.start._bufferIndex,a=t.end._index,s=t.end._bufferIndex;let o;if(n===a)o=[e[n].slice(r,s)];else{if(o=e.slice(n,a),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}s>0&&o.push(e[a].slice(0,s))}return o}function i$e(e,t){let n=-1;const r=[];let a;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&a)continue;o=" ";break}default:o=String.fromCharCode(s)}a=s===-2,r.push(o)}return r.join("")}function s$e(e){const r={constructs:o9([n$e,...(e||{}).extensions||[]]),content:a(wMe),defined:[],document:a(_Me),flow:a(UDe),lazy:{},string:a(WDe),text:a(HDe)};return r;function a(s){return o;function o(l){return r$e(r,s,l)}}}function o$e(e){for(;!f9(e););return e}const dM=/[\0\t\n\r]/g;function l$e(){let e=1,t="",n=!0,r;return a;function a(s,o,l){const c=[];let u,f,d,h,m;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(dM.lastIndex=d,u=dM.exec(s),h=u&&u.index!==void 0?u.index:s.length,m=s.charCodeAt(h),!u){t=s.slice(d);break}if(m===10&&d===h&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),d<h&&(c.push(s.slice(d,h)),e+=h-d),m){case 0:{c.push(65533),e++;break}case 9:{for(f=Math.ceil(e/4)*4,c.push(-2);e++<f;)c.push(-1);break}case 10:{c.push(-4),e=1;break}default:r=!0,e=1}d=h+1}return l&&(r&&c.push(-5),t&&c.push(t),c.push(null)),c}}const c$e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function u$e(e){return e.replace(c$e,d$e)}function d$e(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),s=a===120||a===88;return l9(n.slice(s?2:1),s?16:10)}return RA(n)||e}const x9={}.hasOwnProperty;function f$e(e,t,n){return typeof t!="string"&&(n=t,t=void 0),h$e(n)(o$e(s$e(n).document().write(l$e()(e,t,!0))))}function h$e(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Pe),autolinkProtocol:C,autolinkEmail:C,atxHeading:s(q),blockQuote:s(le),characterEscape:C,characterReference:C,codeFenced:s(se),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(se,o),codeText:s(Z,o),codeTextData:C,data:C,codeFlowValue:C,definition:s(_e),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(z),hardBreakEscape:s(ce),hardBreakTrailing:s(ce),htmlFlow:s(ke,o),htmlFlowData:C,htmlText:s(ke,o),htmlTextData:C,image:s(Ae),label:o,link:s(Pe),listItem:s(Ne),listItemValue:h,listOrdered:s(Ie,d),listUnordered:s(Ie),paragraph:s(ze),reference:R,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(q),strong:s(at),thematicBreak:s(_t)},exit:{atxHeading:c(),atxHeadingSequence:_,autolink:c(),autolinkEmail:G,autolinkProtocol:ie,blockQuote:c(),characterEscapeValue:T,characterReferenceMarkerHexadecimal:Q,characterReferenceMarkerNumeric:Q,characterReferenceValue:H,characterReference:V,codeFenced:c(x),codeFencedFence:v,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:T,codeIndented:c(y),codeText:c(P),codeTextData:T,data:T,definition:c(),definitionDestinationString:k,definitionLabelString:b,definitionTitleString:w,emphasis:c(),hardBreakEscape:c(F),hardBreakTrailing:c(F),htmlFlow:c(E),htmlFlowData:T,htmlText:c(I),htmlTextData:T,image:c(O),label:L,labelText:$,lineEnding:M,link:c(B),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:K,resourceDestinationString:N,resourceTitleString:U,resource:D,setextHeading:c(A),setextHeadingLineSequence:S,setextHeadingText:j,strong:c(),thematicBreak:c()}};y9(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(re){let pe={type:"root",children:[]};const He={stack:[pe],tokenStack:[],config:t,enter:l,exit:u,buffer:o,resume:f,data:n},Ue=[];let oe=-1;for(;++oe<re.length;)if(re[oe][1].type==="listOrdered"||re[oe][1].type==="listUnordered")if(re[oe][0]==="enter")Ue.push(oe);else{const ct=Ue.pop();oe=a(re,ct,oe)}for(oe=-1;++oe<re.length;){const ct=t[re[oe][0]];x9.call(ct,re[oe][1].type)&&ct[re[oe][1].type].call(Object.assign({sliceSerialize:re[oe][2].sliceSerialize},He),re[oe][1])}if(He.tokenStack.length>0){const ct=He.tokenStack[He.tokenStack.length-1];(ct[1]||fM).call(He,void 0,ct[0])}for(pe.position={start:$o(re.length>0?re[0][1].start:{line:1,column:1,offset:0}),end:$o(re.length>0?re[re.length-2][1].end:{line:1,column:1,offset:0})},oe=-1;++oe<t.transforms.length;)pe=t.transforms[oe](pe)||pe;return pe}function a(re,pe,He){let Ue=pe-1,oe=-1,ct=!1,Pt,kt,Xe,ye;for(;++Ue<=He;){const it=re[Ue];switch(it[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{it[0]==="enter"?oe++:oe--,ye=void 0;break}case"lineEndingBlank":{it[0]==="enter"&&(Pt&&!ye&&!oe&&!Xe&&(Xe=Ue),ye=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ye=void 0}if(!oe&&it[0]==="enter"&&it[1].type==="listItemPrefix"||oe===-1&&it[0]==="exit"&&(it[1].type==="listUnordered"||it[1].type==="listOrdered")){if(Pt){let $t=Ue;for(kt=void 0;$t--;){const ue=re[$t];if(ue[1].type==="lineEnding"||ue[1].type==="lineEndingBlank"){if(ue[0]==="exit")continue;kt&&(re[kt][1].type="lineEndingBlank",ct=!0),ue[1].type="lineEnding",kt=$t}else if(!(ue[1].type==="linePrefix"||ue[1].type==="blockQuotePrefix"||ue[1].type==="blockQuotePrefixWhitespace"||ue[1].type==="blockQuoteMarker"||ue[1].type==="listItemIndent"))break}Xe&&(!kt||Xe<kt)&&(Pt._spread=!0),Pt.end=Object.assign({},kt?re[kt][1].start:it[1].end),re.splice(kt||Ue,0,["exit",Pt,it[2]]),Ue++,He++}if(it[1].type==="listItemPrefix"){const $t={type:"listItem",_spread:!1,start:Object.assign({},it[1].start),end:void 0};Pt=$t,re.splice(Ue,0,["enter",$t,it[2]]),Ue++,He++,Xe=void 0,ye=!0}}}return re[pe][1]._spread=ct,He}function s(re,pe){return He;function He(Ue){l.call(this,re(Ue),Ue),pe&&pe.call(this,Ue)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(re,pe,He){this.stack[this.stack.length-1].children.push(re),this.stack.push(re),this.tokenStack.push([pe,He||void 0]),re.position={start:$o(pe.start),end:void 0}}function c(re){return pe;function pe(He){re&&re.call(this,He),u.call(this,He)}}function u(re,pe){const He=this.stack.pop(),Ue=this.tokenStack.pop();if(Ue)Ue[0].type!==re.type&&(pe?pe.call(this,re,Ue[0]):(Ue[1]||fM).call(this,re,Ue[0]));else throw new Error("Cannot close `"+re.type+"` ("+Ph({start:re.start,end:re.end})+"): its not open");He.position.end=$o(re.end)}function f(){return IA(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(re){if(this.data.expectingFirstListItemValue){const pe=this.stack[this.stack.length-2];pe.start=Number.parseInt(this.sliceSerialize(re),10),this.data.expectingFirstListItemValue=void 0}}function m(){const re=this.resume(),pe=this.stack[this.stack.length-1];pe.lang=re}function g(){const re=this.resume(),pe=this.stack[this.stack.length-1];pe.meta=re}function v(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function x(){const re=this.resume(),pe=this.stack[this.stack.length-1];pe.value=re.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const re=this.resume(),pe=this.stack[this.stack.length-1];pe.value=re.replace(/(\r?\n|\r)$/g,"")}function b(re){const pe=this.resume(),He=this.stack[this.stack.length-1];He.label=pe,He.identifier=Xi(this.sliceSerialize(re)).toLowerCase()}function w(){const re=this.resume(),pe=this.stack[this.stack.length-1];pe.title=re}function k(){const re=this.resume(),pe=this.stack[this.stack.length-1];pe.url=re}function _(re){const pe=this.stack[this.stack.length-1];if(!pe.depth){const He=this.sliceSerialize(re).length;pe.depth=He}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function S(re){const pe=this.stack[this.stack.length-1];pe.depth=this.sliceSerialize(re).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function C(re){const He=this.stack[this.stack.length-1].children;let Ue=He[He.length-1];(!Ue||Ue.type!=="text")&&(Ue=pt(),Ue.position={start:$o(re.start),end:void 0},He.push(Ue)),this.stack.push(Ue)}function T(re){const pe=this.stack.pop();pe.value+=this.sliceSerialize(re),pe.position.end=$o(re.end)}function M(re){const pe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const He=pe.children[pe.children.length-1];He.position.end=$o(re.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(pe.type)&&(C.call(this,re),T.call(this,re))}function F(){this.data.atHardBreak=!0}function E(){const re=this.resume(),pe=this.stack[this.stack.length-1];pe.value=re}function I(){const re=this.resume(),pe=this.stack[this.stack.length-1];pe.value=re}function P(){const re=this.resume(),pe=this.stack[this.stack.length-1];pe.value=re}function B(){const re=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";re.type+="Reference",re.referenceType=pe,delete re.url,delete re.title}else delete re.identifier,delete re.label;this.data.referenceType=void 0}function O(){const re=this.stack[this.stack.length-1];if(this.data.inReference){const pe=this.data.referenceType||"shortcut";re.type+="Reference",re.referenceType=pe,delete re.url,delete re.title}else delete re.identifier,delete re.label;this.data.referenceType=void 0}function $(re){const pe=this.sliceSerialize(re),He=this.stack[this.stack.length-2];He.label=u$e(pe),He.identifier=Xi(pe).toLowerCase()}function L(){const re=this.stack[this.stack.length-1],pe=this.resume(),He=this.stack[this.stack.length-1];if(this.data.inReference=!0,He.type==="link"){const Ue=re.children;He.children=Ue}else He.alt=pe}function N(){const re=this.resume(),pe=this.stack[this.stack.length-1];pe.url=re}function U(){const re=this.resume(),pe=this.stack[this.stack.length-1];pe.title=re}function D(){this.data.inReference=void 0}function R(){this.data.referenceType="collapsed"}function K(re){const pe=this.resume(),He=this.stack[this.stack.length-1];He.label=pe,He.identifier=Xi(this.sliceSerialize(re)).toLowerCase(),this.data.referenceType="full"}function Q(re){this.data.characterReferenceType=re.type}function H(re){const pe=this.sliceSerialize(re),He=this.data.characterReferenceType;let Ue;He?(Ue=l9(pe,He==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ue=RA(pe);const oe=this.stack[this.stack.length-1];oe.value+=Ue}function V(re){const pe=this.stack.pop();pe.position.end=$o(re.end)}function ie(re){T.call(this,re);const pe=this.stack[this.stack.length-1];pe.url=this.sliceSerialize(re)}function G(re){T.call(this,re);const pe=this.stack[this.stack.length-1];pe.url="mailto:"+this.sliceSerialize(re)}function le(){return{type:"blockquote",children:[]}}function se(){return{type:"code",lang:null,meta:null,value:""}}function Z(){return{type:"inlineCode",value:""}}function _e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function z(){return{type:"emphasis",children:[]}}function q(){return{type:"heading",depth:0,children:[]}}function ce(){return{type:"break"}}function ke(){return{type:"html",value:""}}function Ae(){return{type:"image",title:null,url:"",alt:null}}function Pe(){return{type:"link",title:null,url:"",children:[]}}function Ie(re){return{type:"list",ordered:re.type==="listOrdered",start:null,spread:re._spread,children:[]}}function Ne(re){return{type:"listItem",spread:re._spread,checked:null,children:[]}}function ze(){return{type:"paragraph",children:[]}}function at(){return{type:"strong",children:[]}}function pt(){return{type:"text",value:""}}function _t(){return{type:"thematicBreak"}}}function $o(e){return{line:e.line,column:e.column,offset:e.offset}}function y9(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?y9(e,r):m$e(e,r)}}function m$e(e,t){let n;for(n in t)if(x9.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function fM(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ph({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ph({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ph({start:t.start,end:t.end})+") is still open")}function p$e(e){const t=this;t.parser=n;function n(r){return f$e(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function g$e(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function v$e(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function x$e(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a}function y$e(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function b$e(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function w$e(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),a=Sf(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,l=e.footnoteCounts.get(r);l===void 0?(l=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,l+=1,e.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,c);const u={type:"element",tagName:"sup",properties:{},children:[c]};return e.patch(t,u),e.applyData(t,u)}function j$e(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function _$e(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function b9(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const a=e.all(t),s=a[0];s&&s.type==="text"?s.value="["+s.value:a.unshift({type:"text",value:"["});const o=a[a.length-1];return o&&o.type==="text"?o.value+=r:a.push({type:"text",value:r}),a}function k$e(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return b9(e,t);const a={src:Sf(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,s),e.applyData(t,s)}function S$e(e,t){const n={src:Sf(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function N$e(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function C$e(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return b9(e,t);const a={href:Sf(r.url||"")};r.title!==null&&r.title!==void 0&&(a.title=r.title);const s={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function A$e(e,t){const n={href:Sf(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function E$e(e,t,n){const r=e.all(t),a=n?P$e(n):w9(t),s={},o=[];if(typeof t.checked=="boolean"){const f=r[0];let d;f&&f.type==="element"&&f.tagName==="p"?d=f:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const f=r[l];(a||l!==0||f.type!=="element"||f.tagName!=="p")&&o.push({type:"text",value:`
`}),f.type==="element"&&f.tagName==="p"&&!a?o.push(...f.children):o.push(f)}const c=r[r.length-1];c&&(a||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function P$e(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=w9(n[r])}return t}function w9(e){const t=e.spread;return t??e.children.length>1}function T$e(e,t){const n={},r=e.all(t);let a=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++a<r.length;){const o=r[a];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function O$e(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function I$e(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function R$e(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function M$e(e,t){const n=e.all(t),r=n.shift(),a=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),a.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},l=EA(t.children[1]),c=e9(t.children[t.children.length-1]);l&&c&&(o.position={start:l,end:c}),a.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,s),e.applyData(t,s)}function D$e(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:t.children.length;let c=-1;const u=[];for(;++c<l;){const d=t.children[c],h={},m=o?o[c]:void 0;m&&(h.align=m);let g={type:"element",tagName:s,properties:h,children:[]};d&&(g.children=e.all(d),e.patch(d,g),g=e.applyData(d,g)),u.push(g)}const f={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,f),e.applyData(t,f)}function $$e(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const hM=9,mM=32;function L$e(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),a=0;const s=[];for(;r;)s.push(pM(t.slice(a,r.index),a>0,!0),r[0]),a=r.index+r[0].length,r=n.exec(t);return s.push(pM(t.slice(a),a>0,!1)),s.join("")}function pM(e,t,n){let r=0,a=e.length;if(t){let s=e.codePointAt(r);for(;s===hM||s===mM;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(a-1);for(;s===hM||s===mM;)a--,s=e.codePointAt(a-1)}return a>r?e.slice(r,a):""}function F$e(e,t){const n={type:"text",value:L$e(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function B$e(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const U$e={blockquote:g$e,break:v$e,code:x$e,delete:y$e,emphasis:b$e,footnoteReference:w$e,heading:j$e,html:_$e,imageReference:k$e,image:S$e,inlineCode:N$e,linkReference:C$e,link:A$e,listItem:E$e,list:T$e,paragraph:O$e,root:I$e,strong:R$e,table:M$e,tableCell:$$e,tableRow:D$e,text:F$e,thematicBreak:B$e,toml:Wg,yaml:Wg,definition:Wg,footnoteDefinition:Wg};function Wg(){}const j9=-1,x0=0,Oh=1,sy=2,DA=3,$A=4,LA=5,FA=6,_9=7,k9=8,gM=typeof self=="object"?self:globalThis,z$e=(e,t)=>{const n=(a,s)=>(e.set(s,a),a),r=a=>{if(e.has(a))return e.get(a);const[s,o]=t[a];switch(s){case x0:case j9:return n(o,a);case Oh:{const l=n([],a);for(const c of o)l.push(r(c));return l}case sy:{const l=n({},a);for(const[c,u]of o)l[r(c)]=r(u);return l}case DA:return n(new Date(o),a);case $A:{const{source:l,flags:c}=o;return n(new RegExp(l,c),a)}case LA:{const l=n(new Map,a);for(const[c,u]of o)l.set(r(c),r(u));return l}case FA:{const l=n(new Set,a);for(const c of o)l.add(r(c));return l}case _9:{const{name:l,message:c}=o;return n(new gM[l](c),a)}case k9:return n(BigInt(o),a);case"BigInt":return n(Object(BigInt(o)),a);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new gM[s](o),a)};return r},vM=e=>z$e(new Map,e)(0),wu="",{toString:q$e}={},{keys:W$e}=Object,nh=e=>{const t=typeof e;if(t!=="object"||!e)return[x0,t];const n=q$e.call(e).slice(8,-1);switch(n){case"Array":return[Oh,wu];case"Object":return[sy,wu];case"Date":return[DA,wu];case"RegExp":return[$A,wu];case"Map":return[LA,wu];case"Set":return[FA,wu];case"DataView":return[Oh,n]}return n.includes("Array")?[Oh,n]:n.includes("Error")?[_9,n]:[sy,n]},Hg=([e,t])=>e===x0&&(t==="function"||t==="symbol"),H$e=(e,t,n,r)=>{const a=(o,l)=>{const c=r.push(o)-1;return n.set(l,c),c},s=o=>{if(n.has(o))return n.get(o);let[l,c]=nh(o);switch(l){case x0:{let f=o;switch(c){case"bigint":l=k9,f=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+c);f=null;break;case"undefined":return a([j9],o)}return a([l,f],o)}case Oh:{if(c){let h=o;return c==="DataView"?h=new Uint8Array(o.buffer):c==="ArrayBuffer"&&(h=new Uint8Array(o)),a([c,[...h]],o)}const f=[],d=a([l,f],o);for(const h of o)f.push(s(h));return d}case sy:{if(c)switch(c){case"BigInt":return a([c,o.toString()],o);case"Boolean":case"Number":case"String":return a([c,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const f=[],d=a([l,f],o);for(const h of W$e(o))(e||!Hg(nh(o[h])))&&f.push([s(h),s(o[h])]);return d}case DA:return a([l,o.toISOString()],o);case $A:{const{source:f,flags:d}=o;return a([l,{source:f,flags:d}],o)}case LA:{const f=[],d=a([l,f],o);for(const[h,m]of o)(e||!(Hg(nh(h))||Hg(nh(m))))&&f.push([s(h),s(m)]);return d}case FA:{const f=[],d=a([l,f],o);for(const h of o)(e||!Hg(nh(h)))&&f.push(s(h));return d}}const{message:u}=o;return a([l,{name:c,message:u}],o)};return s},xM=(e,{json:t,lossy:n}={})=>{const r=[];return H$e(!(t||n),!!t,new Map,r)(e),r},oy=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?vM(xM(e,t)):structuredClone(e):(e,t)=>vM(xM(e,t));function V$e(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function K$e(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function G$e(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||V$e,r=e.options.footnoteBackLabel||K$e,a=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[c]);if(!u)continue;const f=e.all(u),d=String(u.identifier).toUpperCase(),h=Sf(d.toLowerCase());let m=0;const g=[],v=e.footnoteCounts.get(d);for(;v!==void 0&&++m<=v;){g.length>0&&g.push({type:"text",value:" "});let b=typeof n=="string"?n:n(c,m);typeof b=="string"&&(b={type:"text",value:b}),g.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+h+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,m),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const x=f[f.length-1];if(x&&x.type==="element"&&x.tagName==="p"){const b=x.children[x.children.length-1];b&&b.type==="text"?b.value+=" ":x.children.push({type:"text",value:" "}),x.children.push(...g)}else f.push(...g);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+h},children:e.wrap(f,!0)};e.patch(u,y),l.push(y)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...oy(o),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(l,!0)},{type:"text",value:`
`}]}}const y0=function(e){if(e==null)return Q$e;if(typeof e=="function")return b0(e);if(typeof e=="object")return Array.isArray(e)?Y$e(e):X$e(e);if(typeof e=="string")return J$e(e);throw new Error("Expected function, string, or object as test")};function Y$e(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=y0(e[n]);return b0(r);function r(...a){let s=-1;for(;++s<t.length;)if(t[s].apply(this,a))return!0;return!1}}function X$e(e){const t=e;return b0(n);function n(r){const a=r;let s;for(s in e)if(a[s]!==t[s])return!1;return!0}}function J$e(e){return b0(t);function t(n){return n&&n.type===e}}function b0(e){return t;function t(n,r,a){return!!(Z$e(n)&&e.call(this,n,typeof r=="number"?r:void 0,a||void 0))}}function Q$e(){return!0}function Z$e(e){return e!==null&&typeof e=="object"&&"type"in e}const S9=[],eLe=!0,Vk=!1,tLe="skip";function N9(e,t,n,r){let a;typeof t=="function"&&typeof n!="function"?(r=n,n=t):a=t;const s=y0(a),o=r?-1:1;l(e,void 0,[])();function l(c,u,f){const d=c&&typeof c=="object"?c:{};if(typeof d.type=="string"){const m=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(c.type+(m?"<"+m+">":""))+")"})}return h;function h(){let m=S9,g,v,x;if((!t||s(c,u,f[f.length-1]||void 0))&&(m=nLe(n(c,f)),m[0]===Vk))return m;if("children"in c&&c.children){const y=c;if(y.children&&m[0]!==tLe)for(v=(r?y.children.length:-1)+o,x=f.concat(y);v>-1&&v<y.children.length;){const b=y.children[v];if(g=l(b,v,x)(),g[0]===Vk)return g;v=typeof g[1]=="number"?g[1]:v+o}}return m}}}function nLe(e){return Array.isArray(e)?e:typeof e=="number"?[eLe,e]:e==null?S9:[e]}function BA(e,t,n,r){let a,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,a=n):(s=t,o=n,a=r),N9(e,s,l,a);function l(c,u){const f=u[u.length-1],d=f?f.children.indexOf(c):void 0;return o(c,d,f)}}const Kk={}.hasOwnProperty,rLe={};function aLe(e,t){const n=t||rLe,r=new Map,a=new Map,s=new Map,o={...U$e,...n.handlers},l={all:u,applyData:sLe,definitionById:r,footnoteById:a,footnoteCounts:s,footnoteOrder:[],handlers:o,one:c,options:n,patch:iLe,wrap:lLe};return BA(e,function(f){if(f.type==="definition"||f.type==="footnoteDefinition"){const d=f.type==="definition"?r:a,h=String(f.identifier).toUpperCase();d.has(h)||d.set(h,f)}}),l;function c(f,d){const h=f.type,m=l.handlers[h];if(Kk.call(l.handlers,h)&&m)return m(l,f,d);if(l.options.passThrough&&l.options.passThrough.includes(h)){if("children"in f){const{children:v,...x}=f,y=oy(x);return y.children=l.all(f),y}return oy(f)}return(l.options.unknownHandler||oLe)(l,f,d)}function u(f){const d=[];if("children"in f){const h=f.children;let m=-1;for(;++m<h.length;){const g=l.one(h[m],f);if(g){if(m&&h[m-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=yM(g.value)),!Array.isArray(g)&&g.type==="element")){const v=g.children[0];v&&v.type==="text"&&(v.value=yM(v.value))}Array.isArray(g)?d.push(...g):d.push(g)}}}return d}}function iLe(e,t){e.position&&(t.position=KRe(e))}function sLe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,a=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,oy(s)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function oLe(e,t){const n=t.data||{},r="value"in t&&!(Kk.call(n,"hProperties")||Kk.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function lLe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function yM(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function bM(e,t){const n=aLe(e,t),r=n.one(e,void 0),a=G$e(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return a&&s.children.push({type:"text",value:`
`},a),s}function cLe(e,t){return e&&"run"in e?async function(n,r){const a=bM(n,{file:r,...t});await e.run(a,r)}:function(n,r){return bM(n,{file:r,...e||t})}}function wM(e){if(e)throw e}var vv=Object.prototype.hasOwnProperty,C9=Object.prototype.toString,jM=Object.defineProperty,_M=Object.getOwnPropertyDescriptor,kM=function(t){return typeof Array.isArray=="function"?Array.isArray(t):C9.call(t)==="[object Array]"},SM=function(t){if(!t||C9.call(t)!=="[object Object]")return!1;var n=vv.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&vv.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var a;for(a in t);return typeof a>"u"||vv.call(t,a)},NM=function(t,n){jM&&n.name==="__proto__"?jM(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},CM=function(t,n){if(n==="__proto__")if(vv.call(t,n)){if(_M)return _M(t,n).value}else return;return t[n]},uLe=function e(){var t,n,r,a,s,o,l=arguments[0],c=1,u=arguments.length,f=!1;for(typeof l=="boolean"&&(f=l,l=arguments[1]||{},c=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});c<u;++c)if(t=arguments[c],t!=null)for(n in t)r=CM(l,n),a=CM(t,n),l!==a&&(f&&a&&(SM(a)||(s=kM(a)))?(s?(s=!1,o=r&&kM(r)?r:[]):o=r&&SM(r)?r:{},NM(l,{name:n,newValue:e(f,o,a)})):typeof a<"u"&&NM(l,{name:n,newValue:a}));return l};const yj=un(uLe);function Gk(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function dLe(){const e=[],t={run:n,use:r};return t;function n(...a){let s=-1;const o=a.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...a);function l(c,...u){const f=e[++s];let d=-1;if(c){o(c);return}for(;++d<a.length;)(u[d]===null||u[d]===void 0)&&(u[d]=a[d]);a=u,f?fLe(f,l)(...u):o(null,...u)}}function r(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return e.push(a),t}}function fLe(e,t){let n;return r;function r(...o){const l=e.length>o.length;let c;l&&o.push(a);try{c=e.apply(this,o)}catch(u){const f=u;if(l&&n)throw f;return a(f)}l||(c&&c.then&&typeof c.then=="function"?c.then(s,a):c instanceof Error?a(c):s(c))}function a(o,...l){n||(n=!0,t(o,...l))}function s(o){a(null,o)}}const ds={basename:hLe,dirname:mLe,extname:pLe,join:gLe,sep:"/"};function hLe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Wp(e);let n=0,r=-1,a=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else r<0&&(s=!0,r=a+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,l=t.length-1;for(;a--;)if(e.codePointAt(a)===47){if(s){n=a+1;break}}else o<0&&(s=!0,o=a+1),l>-1&&(e.codePointAt(a)===t.codePointAt(l--)?l<0&&(r=a):(l=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function mLe(e){if(Wp(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function pLe(e){Wp(e);let t=e.length,n=-1,r=0,a=-1,s=0,o;for(;t--;){const l=e.codePointAt(t);if(l===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),l===46?a<0?a=t:s!==1&&(s=1):a>-1&&(s=-1)}return a<0||n<0||s===0||s===1&&a===n-1&&a===r+1?"":e.slice(a,n)}function gLe(...e){let t=-1,n;for(;++t<e.length;)Wp(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":vLe(n)}function vLe(e){Wp(e);const t=e.codePointAt(0)===47;let n=xLe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function xLe(e,t){let n="",r=0,a=-1,s=0,o=-1,l,c;for(;++o<=e.length;){if(o<e.length)l=e.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(a===o-1||s===1))if(a!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),a=o,s=0;continue}}else if(n.length>0){n="",r=0,a=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Wp(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const yLe={cwd:bLe};function bLe(){return"/"}function Yk(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function wLe(e){if(typeof e=="string")e=new URL(e);else if(!Yk(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return jLe(e)}function jLe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(t)}const bj=["history","path","basename","stem","extname","dirname"];class A9{constructor(t){let n;t?Yk(t)?n={path:t}:typeof t=="string"||_Le(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":yLe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<bj.length;){const s=bj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let a;for(a in n)bj.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?ds.basename(this.path):void 0}set basename(t){jj(t,"basename"),wj(t,"basename"),this.path=ds.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?ds.dirname(this.path):void 0}set dirname(t){AM(this.basename,"dirname"),this.path=ds.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?ds.extname(this.path):void 0}set extname(t){if(wj(t,"extname"),AM(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ds.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Yk(t)&&(t=wLe(t)),jj(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?ds.basename(this.path,this.extname):void 0}set stem(t){jj(t,"stem"),wj(t,"stem"),this.path=ds.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const a=this.message(t,n,r);throw a.fatal=!0,a}info(t,n,r){const a=this.message(t,n,r);return a.fatal=void 0,a}message(t,n,r){const a=new Jr(t,n,r);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function wj(e,t){if(e&&e.includes(ds.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ds.sep+"`")}function jj(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function AM(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function _Le(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const kLe=function(e){const r=this.constructor.prototype,a=r[e],s=function(){return a.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},SLe={}.hasOwnProperty;class UA extends kLe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=dLe()}copy(){const t=new UA;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(yj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Sj("data",this.frozen),this.namespace[t]=n,this):SLe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Sj("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const a=n.call(t,...r);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=Vg(t),r=this.parser||this.Parser;return _j("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),_j("process",this.parser||this.Parser),kj("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(s,o){const l=Vg(t),c=r.parse(l);r.run(c,l,function(f,d,h){if(f||!d||!h)return u(f);const m=d,g=r.stringify(m,h);ALe(g)?h.value=g:h.result=g,u(f,h)});function u(f,d){f||!d?o(f):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),_j("processSync",this.parser||this.Parser),kj("processSync",this.compiler||this.Compiler),this.process(t,a),PM("processSync","process",n),r;function a(s,o){n=!0,wM(s),r=o}}run(t,n,r){EM(t),this.freeze();const a=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,l){const c=Vg(n);a.run(t,c,u);function u(f,d,h){const m=d||t;f?l(f):o?o(m):r(void 0,m,h)}}}runSync(t,n){let r=!1,a;return this.run(t,n,s),PM("runSync","run",r),a;function s(o,l){wM(o),a=l,r=!0}}stringify(t,n){this.freeze();const r=Vg(n),a=this.compiler||this.Compiler;return kj("stringify",a),EM(t),a(t,r)}use(t,...n){const r=this.attachers,a=this.namespace;if(Sj("use",this.frozen),t!=null)if(typeof t=="function")c(t,n);else if(typeof t=="object")Array.isArray(t)?l(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")c(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[f,...d]=u;c(f,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(a.settings=yj(!0,a.settings,u.settings))}function l(u){let f=-1;if(u!=null)if(Array.isArray(u))for(;++f<u.length;){const d=u[f];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function c(u,f){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===u){h=d;break}if(h===-1)r.push([u,...f]);else if(f.length>0){let[m,...g]=f;const v=r[h][1];Gk(v)&&Gk(m)&&(m=yj(!0,v,m)),r[h]=[u,m,...g]}}}}const NLe=new UA().freeze();function _j(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function kj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Sj(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function EM(e){if(!Gk(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function PM(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Vg(e){return CLe(e)?e:new A9(e)}function CLe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function ALe(e){return typeof e=="string"||ELe(e)}function ELe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const PLe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",TM=[],OM={allowDangerousHtml:!0},TLe=/^(https?|ircs?|mailto|xmpp)$/i,OLe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function IM(e){const t=ILe(e),n=RLe(e);return MLe(t.runSync(t.parse(n),n),e)}function ILe(e){const t=e.rehypePlugins||TM,n=e.remarkPlugins||TM,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...OM}:OM;return NLe().use(p$e).use(n).use(cLe,r).use(t)}function RLe(e){const t=e.children||"",n=new A9;return typeof t=="string"&&(n.value=t),n}function MLe(e,t){const n=t.allowedElements,r=t.allowElement,a=t.components,s=t.disallowedElements,o=t.skipHtml,l=t.unwrapDisallowed,c=t.urlTransform||DLe;for(const f of OLe)Object.hasOwn(t,f.from)&&(""+f.from+(f.to?"use `"+f.to+"` instead":"remove it")+PLe+f.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),BA(e,u),QRe(e,{Fragment:i.Fragment,components:a,ignoreInvalidStyle:!0,jsx:i.jsx,jsxs:i.jsxs,passKeys:!0,passNode:!0});function u(f,d,h){if(f.type==="raw"&&h&&typeof d=="number")return o?h.children.splice(d,1):h.children[d]={type:"text",value:f.value},d;if(f.type==="element"){let m;for(m in gj)if(Object.hasOwn(gj,m)&&Object.hasOwn(f.properties,m)){const g=f.properties[m],v=gj[m];(v===null||v.includes(f.tagName))&&(f.properties[m]=c(String(g||""),m,f))}}if(f.type==="element"){let m=n?!n.includes(f.tagName):s?s.includes(f.tagName):!1;if(!m&&r&&typeof d=="number"&&(m=!r(f,d,h)),m&&h&&typeof d=="number")return l&&f.children?h.children.splice(d,1,...f.children):h.children.splice(d,1),d}}}function DLe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),a=e.indexOf("/");return t===-1||a!==-1&&t>a||n!==-1&&t>n||r!==-1&&t>r||TLe.test(e.slice(0,t))?e:""}function RM(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,a=n.indexOf(t);for(;a!==-1;)r++,a=n.indexOf(t,a+t.length);return r}function $Le(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function LLe(e,t,n){const a=y0((n||{}).ignore||[]),s=FLe(t);let o=-1;for(;++o<s.length;)N9(e,"text",l);function l(u,f){let d=-1,h;for(;++d<f.length;){const m=f[d],g=h?h.children:void 0;if(a(m,g?g.indexOf(m):void 0,h))return;h=m}if(h)return c(u,f)}function c(u,f){const d=f[f.length-1],h=s[o][0],m=s[o][1];let g=0;const x=d.children.indexOf(u);let y=!1,b=[];h.lastIndex=0;let w=h.exec(u.value);for(;w;){const k=w.index,_={index:w.index,input:w.input,stack:[...f,u]};let j=m(...w,_);if(typeof j=="string"&&(j=j.length>0?{type:"text",value:j}:void 0),j===!1?h.lastIndex=k+1:(g!==k&&b.push({type:"text",value:u.value.slice(g,k)}),Array.isArray(j)?b.push(...j):j&&b.push(j),g=k+w[0].length,y=!0),!h.global)break;w=h.exec(u.value)}return y?(g<u.value.length&&b.push({type:"text",value:u.value.slice(g)}),d.children.splice(x,1,...b)):b=[u],x+b.length}}function FLe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const a=n[r];t.push([BLe(a[0]),ULe(a[1])])}return t}function BLe(e){return typeof e=="string"?new RegExp($Le(e),"g"):e}function ULe(e){return typeof e=="function"?e:function(){return e}}const Nj="phrasing",Cj=["autolink","link","image","label"];function zLe(){return{transforms:[YLe],enter:{literalAutolink:WLe,literalAutolinkEmail:Aj,literalAutolinkHttp:Aj,literalAutolinkWww:Aj},exit:{literalAutolink:GLe,literalAutolinkEmail:KLe,literalAutolinkHttp:HLe,literalAutolinkWww:VLe}}}function qLe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Nj,notInConstruct:Cj},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Nj,notInConstruct:Cj},{character:":",before:"[ps]",after:"\\/",inConstruct:Nj,notInConstruct:Cj}]}}function WLe(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Aj(e){this.config.enter.autolinkProtocol.call(this,e)}function HLe(e){this.config.exit.autolinkProtocol.call(this,e)}function VLe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function KLe(e){this.config.exit.autolinkEmail.call(this,e)}function GLe(e){this.exit(e)}function YLe(e){LLe(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,XLe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),JLe]],{ignore:["link","linkReference"]})}function XLe(e,t,n,r,a){let s="";if(!E9(a)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!QLe(n)))return!1;const o=ZLe(n+r);if(!o[0])return!1;const l={type:"link",title:null,url:s+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function JLe(e,t,n,r){return!E9(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function QLe(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function ZLe(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const a=RM(e,"(");let s=RM(e,")");for(;r!==-1&&a>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function E9(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Wc(n)||g0(n))&&(!t||n!==47)}P9.peek=l4e;function e4e(){this.buffer()}function t4e(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function n4e(){this.buffer()}function r4e(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function a4e(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Xi(this.sliceSerialize(e)).toLowerCase(),n.label=t}function i4e(e){this.exit(e)}function s4e(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Xi(this.sliceSerialize(e)).toLowerCase(),n.label=t}function o4e(e){this.exit(e)}function l4e(){return"["}function P9(e,t,n,r){const a=n.createTracker(r);let s=a.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=a.move(n.safe(n.associationId(e),{after:"]",before:s})),l(),o(),s+=a.move("]"),s}function c4e(){return{enter:{gfmFootnoteCallString:e4e,gfmFootnoteCall:t4e,gfmFootnoteDefinitionLabelString:n4e,gfmFootnoteDefinition:r4e},exit:{gfmFootnoteCallString:a4e,gfmFootnoteCall:i4e,gfmFootnoteDefinitionLabelString:s4e,gfmFootnoteDefinition:o4e}}}function u4e(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:P9},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,a,s,o){const l=s.createTracker(o);let c=l.move("[^");const u=s.enter("footnoteDefinition"),f=s.enter("label");return c+=l.move(s.safe(s.associationId(r),{before:c,after:"]"})),f(),c+=l.move("]:"),r.children&&r.children.length>0&&(l.shift(4),c+=l.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,l.current()),t?T9:d4e))),u(),c}}function d4e(e,t,n){return t===0?e:T9(e,t,n)}function T9(e,t,n){return(n?"":"    ")+e}const f4e=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];O9.peek=v4e;function h4e(){return{canContainEols:["delete"],enter:{strikethrough:p4e},exit:{strikethrough:g4e}}}function m4e(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:f4e}],handlers:{delete:O9}}}function p4e(e){this.enter({type:"delete",children:[]},e)}function g4e(e){this.exit(e)}function O9(e,t,n,r){const a=n.createTracker(r),s=n.enter("strikethrough");let o=a.move("~~");return o+=n.containerPhrasing(e,{...a.current(),before:o,after:"~"}),o+=a.move("~~"),s(),o}function v4e(){return"~"}function x4e(e){return e.length}function y4e(e,t){const n=t||{},r=(n.align||[]).concat(),a=n.stringLength||x4e,s=[],o=[],l=[],c=[];let u=0,f=-1;for(;++f<e.length;){const v=[],x=[];let y=-1;for(e[f].length>u&&(u=e[f].length);++y<e[f].length;){const b=b4e(e[f][y]);if(n.alignDelimiters!==!1){const w=a(b);x[y]=w,(c[y]===void 0||w>c[y])&&(c[y]=w)}v.push(b)}o[f]=v,l[f]=x}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<u;)s[d]=MM(r[d]);else{const v=MM(r);for(;++d<u;)s[d]=v}d=-1;const h=[],m=[];for(;++d<u;){const v=s[d];let x="",y="";v===99?(x=":",y=":"):v===108?x=":":v===114&&(y=":");let b=n.alignDelimiters===!1?1:Math.max(1,c[d]-x.length-y.length);const w=x+"-".repeat(b)+y;n.alignDelimiters!==!1&&(b=x.length+b+y.length,b>c[d]&&(c[d]=b),m[d]=b),h[d]=w}o.splice(1,0,h),l.splice(1,0,m),f=-1;const g=[];for(;++f<o.length;){const v=o[f],x=l[f];d=-1;const y=[];for(;++d<u;){const b=v[d]||"";let w="",k="";if(n.alignDelimiters!==!1){const _=c[d]-(x[d]||0),j=s[d];j===114?w=" ".repeat(_):j===99?_%2?(w=" ".repeat(_/2+.5),k=" ".repeat(_/2-.5)):(w=" ".repeat(_/2),k=w):k=" ".repeat(_)}n.delimiterStart!==!1&&!d&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&b==="")&&(n.delimiterStart!==!1||d)&&y.push(" "),n.alignDelimiters!==!1&&y.push(w),y.push(b),n.alignDelimiters!==!1&&y.push(k),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&y.push("|")}g.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return g.join(`
`)}function b4e(e){return e==null?"":String(e)}function MM(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function w4e(e,t,n,r){const a=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(e,s.current()),j4e);return a(),o}function j4e(e,t,n){return">"+(n?"":" ")+e}function _4e(e,t){return DM(e,t.inConstruct,!0)&&!DM(e,t.notInConstruct,!1)}function DM(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function $M(e,t,n,r){let a=-1;for(;++a<n.unsafe.length;)if(n.unsafe[a].character===`
`&&_4e(n.stack,n.unsafe[a]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function k4e(e,t){const n=String(e);let r=n.indexOf(t),a=r,s=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===a?++s>o&&(o=s):s=1,a=r+t.length,r=n.indexOf(t,a);return o}function S4e(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function N4e(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function C4e(e,t,n,r){const a=N4e(n),s=e.value||"",o=a==="`"?"GraveAccent":"Tilde";if(S4e(e,n)){const d=n.enter("codeIndented"),h=n.indentLines(s,A4e);return d(),h}const l=n.createTracker(r),c=a.repeat(Math.max(k4e(s,a)+1,3)),u=n.enter("codeFenced");let f=l.move(c);if(e.lang){const d=n.enter(`codeFencedLang${o}`);f+=l.move(n.safe(e.lang,{before:f,after:" ",encode:["`"],...l.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${o}`);f+=l.move(" "),f+=l.move(n.safe(e.meta,{before:f,after:`
`,encode:["`"],...l.current()})),d()}return f+=l.move(`
`),s&&(f+=l.move(s+`
`)),f+=l.move(c),u(),f}function A4e(e,t,n){return(n?"":"    ")+e}function zA(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function E4e(e,t,n,r){const a=zA(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("[");return u+=c.move(n.safe(n.associationId(e),{before:u,after:"]",...c.current()})),u+=c.move("]: "),l(),!e.url||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),o(),u}function P4e(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function Zm(e){return"&#x"+e.toString(16).toUpperCase()+";"}function ly(e,t,n){const r=Qd(e),a=Qd(t);return r===void 0?a===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:a===void 0?{inside:!1,outside:!1}:a===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}I9.peek=T4e;function I9(e,t,n,r){const a=P4e(n),s=n.enter("emphasis"),o=n.createTracker(r),l=o.move(a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),f=ly(r.before.charCodeAt(r.before.length-1),u,a);f.inside&&(c=Zm(u)+c.slice(1));const d=c.charCodeAt(c.length-1),h=ly(r.after.charCodeAt(0),d,a);h.inside&&(c=c.slice(0,-1)+Zm(d));const m=o.move(a);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},l+c+m}function T4e(e,t,n){return n.options.emphasis||"*"}function O4e(e,t){let n=!1;return BA(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,Vk}),!!((!e.depth||e.depth<3)&&IA(e)&&(t.options.setext||n))}function I4e(e,t,n,r){const a=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(O4e(e,n)){const f=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return d(),f(),h+`
`+(a===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(a),l=n.enter("headingAtx"),c=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Zm(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),c(),l(),u}R9.peek=R4e;function R9(e){return e.value||""}function R4e(){return"<"}M9.peek=M4e;function M9(e,t,n,r){const a=zA(n),s=a==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const c=n.createTracker(r);let u=c.move("![");return u+=c.move(n.safe(e.alt,{before:u,after:"]",...c.current()})),u+=c.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=c.move("<"),u+=c.move(n.safe(e.url,{before:u,after:">",...c.current()})),u+=c.move(">")):(l=n.enter("destinationRaw"),u+=c.move(n.safe(e.url,{before:u,after:e.title?" ":")",...c.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=c.move(" "+a),u+=c.move(n.safe(e.title,{before:u,after:a,...c.current()})),u+=c.move(a),l()),u+=c.move(")"),o(),u}function M4e(){return"!"}D9.peek=D4e;function D9(e,t,n,r){const a=e.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("![");const u=n.safe(e.alt,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!u||u!==d?c+=l.move(d+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function D4e(){return"!"}$9.peek=$4e;function $9(e,t,n){let r=e.value||"",a="`",s=-1;for(;new RegExp("(^|[^`])"+a+"([^`]|$)").test(r);)a+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let c;if(o.atBreak)for(;c=l.exec(r);){let u=c.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(c.index+1)}}return a+r+a}function $4e(){return"`"}function L9(e,t){const n=IA(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}F9.peek=L4e;function F9(e,t,n,r){const a=zA(n),s=a==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let l,c;if(L9(e,n)){const f=n.stack;n.stack=[],l=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(e,{before:d,after:">",...o.current()})),d+=o.move(">"),l(),n.stack=f,d}l=n.enter("link"),c=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),c(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(c=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(c=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),c(),e.title&&(c=n.enter(`title${s}`),u+=o.move(" "+a),u+=o.move(n.safe(e.title,{before:u,after:a,...o.current()})),u+=o.move(a),c()),u+=o.move(")"),l(),u}function L4e(e,t,n){return L9(e,n)?"<":"["}B9.peek=F4e;function B9(e,t,n,r){const a=e.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(r);let c=l.move("[");const u=n.containerPhrasing(e,{before:c,after:"]",...l.current()});c+=l.move(u+"]["),o();const f=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:c,after:"]",...l.current()});return o(),n.stack=f,s(),a==="full"||!u||u!==d?c+=l.move(d+"]"):a==="shortcut"?c=c.slice(0,-1):c+=l.move("]"),c}function F4e(){return"["}function qA(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function B4e(e){const t=qA(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function U4e(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function U9(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function z4e(e,t,n,r){const a=n.enter("list"),s=n.bulletCurrent;let o=e.ordered?U4e(n):qA(n);const l=e.ordered?o==="."?")":".":B4e(n);let c=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const f=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&f&&(!f.children||!f.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(c=!0),U9(n)===o&&f){let d=-1;for(;++d<e.children.length;){const h=e.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){c=!0;break}}}}c&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=s,a(),u}function q4e(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function W4e(e,t,n,r){const a=q4e(n);let s=n.bulletCurrent||qA(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(a==="tab"||a==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(r);l.move(s+" ".repeat(o-s.length)),l.shift(o);const c=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,l.current()),f);return c(),u;function f(d,h,m){return h?(m?"":" ".repeat(o))+d:(m?s:s+" ".repeat(o-s.length))+d}}function H4e(e,t,n,r){const a=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(e,r);return s(),a(),o}const V4e=y0(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function K4e(e,t,n,r){return(e.children.some(function(o){return V4e(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function G4e(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}z9.peek=Y4e;function z9(e,t,n,r){const a=G4e(n),s=n.enter("strong"),o=n.createTracker(r),l=o.move(a+a);let c=o.move(n.containerPhrasing(e,{after:a,before:l,...o.current()}));const u=c.charCodeAt(0),f=ly(r.before.charCodeAt(r.before.length-1),u,a);f.inside&&(c=Zm(u)+c.slice(1));const d=c.charCodeAt(c.length-1),h=ly(r.after.charCodeAt(0),d,a);h.inside&&(c=c.slice(0,-1)+Zm(d));const m=o.move(a+a);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:f.outside},l+c+m}function Y4e(e,t,n){return n.options.strong||"*"}function X4e(e,t,n,r){return n.safe(e.value,r)}function J4e(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Q4e(e,t,n){const r=(U9(n)+(n.options.ruleSpaces?" ":"")).repeat(J4e(n));return n.options.ruleSpaces?r.slice(0,-1):r}const q9={blockquote:w4e,break:$M,code:C4e,definition:E4e,emphasis:I9,hardBreak:$M,heading:I4e,html:R9,image:M9,imageReference:D9,inlineCode:$9,link:F9,linkReference:B9,list:z4e,listItem:W4e,paragraph:H4e,root:K4e,strong:z9,text:X4e,thematicBreak:Q4e};function Z4e(){return{enter:{table:eFe,tableData:LM,tableHeader:LM,tableRow:nFe},exit:{codeText:rFe,table:tFe,tableData:Ej,tableHeader:Ej,tableRow:Ej}}}function eFe(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function tFe(e){this.exit(e),this.data.inTable=void 0}function nFe(e){this.enter({type:"tableRow",children:[]},e)}function Ej(e){this.exit(e)}function LM(e){this.enter({type:"tableCell",children:[]},e)}function rFe(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,aFe));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function aFe(e,t){return t==="|"?t:e}function iFe(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,a=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:c,tableRow:l}};function o(m,g,v,x){return u(f(m,v,x),m.align)}function l(m,g,v,x){const y=d(m,v,x),b=u([y]);return b.slice(0,b.indexOf(`
`))}function c(m,g,v,x){const y=v.enter("tableCell"),b=v.enter("phrasing"),w=v.containerPhrasing(m,{...x,before:s,after:s});return b(),y(),w}function u(m,g){return y4e(m,{align:g,alignDelimiters:r,padding:n,stringLength:a})}function f(m,g,v){const x=m.children;let y=-1;const b=[],w=g.enter("table");for(;++y<x.length;)b[y]=d(x[y],g,v);return w(),b}function d(m,g,v){const x=m.children;let y=-1;const b=[],w=g.enter("tableRow");for(;++y<x.length;)b[y]=c(x[y],m,g,v);return w(),b}function h(m,g,v){let x=q9.inlineCode(m,g,v);return v.stack.includes("tableCell")&&(x=x.replace(/\|/g,"\\$&")),x}}function sFe(){return{exit:{taskListCheckValueChecked:FM,taskListCheckValueUnchecked:FM,paragraph:lFe}}}function oFe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:cFe}}}function FM(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function lFe(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const a=t.children;let s=-1,o;for(;++s<a.length;){const l=a[s];if(l.type==="paragraph"){o=l;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function cFe(e,t,n,r){const a=e.children[0],s=typeof e.checked=="boolean"&&a&&a.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",l=n.createTracker(r);s&&l.move(o);let c=q9.listItem(e,t,n,{...r,...l.current()});return s&&(c=c.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),c;function u(f){return f+o}}function uFe(){return[zLe(),c4e(),h4e(),Z4e(),sFe()]}function dFe(e){return{extensions:[qLe(),u4e(e),m4e(),iFe(e),oFe()]}}const fFe={tokenize:xFe,partial:!0},W9={tokenize:yFe,partial:!0},H9={tokenize:bFe,partial:!0},V9={tokenize:wFe,partial:!0},hFe={tokenize:jFe,partial:!0},K9={name:"wwwAutolink",tokenize:gFe,previous:Y9},G9={name:"protocolAutolink",tokenize:vFe,previous:X9},No={name:"emailAutolink",tokenize:pFe,previous:J9},Ds={};function mFe(){return{text:Ds}}let Hl=48;for(;Hl<123;)Ds[Hl]=No,Hl++,Hl===58?Hl=65:Hl===91&&(Hl=97);Ds[43]=No;Ds[45]=No;Ds[46]=No;Ds[95]=No;Ds[72]=[No,G9];Ds[104]=[No,G9];Ds[87]=[No,K9];Ds[119]=[No,K9];function pFe(e,t,n){const r=this;let a,s;return o;function o(d){return!Xk(d)||!J9.call(r,r.previous)||WA(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),l(d))}function l(d){return Xk(d)?(e.consume(d),l):d===64?(e.consume(d),c):n(d)}function c(d){return d===46?e.check(hFe,f,u)(d):d===45||d===95||Gr(d)?(s=!0,e.consume(d),c):f(d)}function u(d){return e.consume(d),a=!0,c}function f(d){return s&&a&&oa(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function gFe(e,t,n){const r=this;return a;function a(o){return o!==87&&o!==119||!Y9.call(r,r.previous)||WA(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(fFe,e.attempt(W9,e.attempt(H9,s),n),n)(o))}function s(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function vFe(e,t,n){const r=this;let a="",s=!1;return o;function o(d){return(d===72||d===104)&&X9.call(r,r.previous)&&!WA(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),a+=String.fromCodePoint(d),e.consume(d),l):n(d)}function l(d){if(oa(d)&&a.length<5)return a+=String.fromCodePoint(d),e.consume(d),l;if(d===58){const h=a.toLowerCase();if(h==="http"||h==="https")return e.consume(d),c}return n(d)}function c(d){return d===47?(e.consume(d),s?u:(s=!0,c)):n(d)}function u(d){return d===null||iy(d)||vn(d)||Wc(d)||g0(d)?n(d):e.attempt(W9,e.attempt(H9,f),n)(d)}function f(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function xFe(e,t,n){let r=0;return a;function a(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),a):o===46&&r===3?(e.consume(o),s):n(o)}function s(o){return o===null?n(o):t(o)}}function yFe(e,t,n){let r,a,s;return o;function o(u){return u===46||u===95?e.check(V9,c,l)(u):u===null||vn(u)||Wc(u)||u!==45&&g0(u)?c(u):(s=!0,e.consume(u),o)}function l(u){return u===95?r=!0:(a=r,r=void 0),e.consume(u),o}function c(u){return a||r||!s?n(u):t(u)}}function bFe(e,t){let n=0,r=0;return a;function a(o){return o===40?(n++,e.consume(o),a):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(V9,t,s)(o):o===null||vn(o)||Wc(o)?t(o):(e.consume(o),a)}function s(o){return o===41&&r++,e.consume(o),a}}function wFe(e,t,n){return r;function r(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(e.consume(l),r):l===38?(e.consume(l),s):l===93?(e.consume(l),a):l===60||l===null||vn(l)||Wc(l)?t(l):n(l)}function a(l){return l===null||l===40||l===91||vn(l)||Wc(l)?t(l):r(l)}function s(l){return oa(l)?o(l):n(l)}function o(l){return l===59?(e.consume(l),r):oa(l)?(e.consume(l),o):n(l)}}function jFe(e,t,n){return r;function r(s){return e.consume(s),a}function a(s){return Gr(s)?n(s):t(s)}}function Y9(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||vn(e)}function X9(e){return!oa(e)}function J9(e){return!(e===47||Xk(e))}function Xk(e){return e===43||e===45||e===46||e===95||Gr(e)}function WA(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const _Fe={tokenize:TFe,partial:!0};function kFe(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:AFe,continuation:{tokenize:EFe},exit:PFe}},text:{91:{name:"gfmFootnoteCall",tokenize:CFe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:SFe,resolveTo:NFe}}}}function SFe(e,t,n){const r=this;let a=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;a--;){const c=r.events[a][1];if(c.type==="labelImage"){o=c;break}if(c.type==="gfmFootnoteCall"||c.type==="labelLink"||c.type==="label"||c.type==="image"||c.type==="link")break}return l;function l(c){if(!o||!o._balanced)return n(c);const u=Xi(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(c):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),t(c))}}function NFe(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},a={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};a.end.column++,a.end.offset++,a.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},a.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",a,t],["exit",a,t],["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...l),e}function CFe(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return l;function l(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),c}function c(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(d){if(s>999||d===93&&!o||d===null||d===91||vn(d))return n(d);if(d===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return a.includes(Xi(r.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return vn(d)||(o=!0),s++,e.consume(d),d===92?f:u}function f(d){return d===91||d===92||d===93?(e.consume(d),s++,u):u(d)}}function AFe(e,t,n){const r=this,a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,l;return c;function c(g){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(g){return g===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):n(g)}function f(g){if(o>999||g===93&&!l||g===null||g===91||vn(g))return n(g);if(g===93){e.exit("chunkString");const v=e.exit("gfmFootnoteDefinitionLabelString");return s=Xi(r.sliceSerialize(v)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(g),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return vn(g)||(l=!0),o++,e.consume(g),g===92?d:f}function d(g){return g===91||g===92||g===93?(e.consume(g),o++,f):f(g)}function h(g){return g===58?(e.enter("definitionMarker"),e.consume(g),e.exit("definitionMarker"),a.includes(s)||a.push(s),Yt(e,m,"gfmFootnoteDefinitionWhitespace")):n(g)}function m(g){return t(g)}}function EFe(e,t,n){return e.check(qp,t,e.attempt(_Fe,t,n))}function PFe(e){e.exit("gfmFootnoteDefinition")}function TFe(e,t,n){const r=this;return Yt(e,a,"gfmFootnoteDefinitionIndent",5);function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(s):n(s)}}function OFe(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:a};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function a(o,l){let c=-1;for(;++c<o.length;)if(o[c][0]==="enter"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._close){let u=c;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[c][1].end.offset-o[c][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[c][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[c][1].end)},d={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[c][1].start)},h=[["enter",f,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",d,l]],m=l.parser.constructs.insideSpan.null;m&&Ga(h,h.length,0,v0(m,o.slice(u+1,c),l)),Ga(h,h.length,0,[["exit",d,l],["enter",o[c][1],l],["exit",o[c][1],l],["exit",f,l]]),Ga(o,u-1,c-u+3,h),c=u+h.length-2;break}}for(c=-1;++c<o.length;)o[c][1].type==="strikethroughSequenceTemporary"&&(o[c][1].type="data");return o}function s(o,l,c){const u=this.previous,f=this.events;let d=0;return h;function h(g){return u===126&&f[f.length-1][1].type!=="characterEscape"?c(g):(o.enter("strikethroughSequenceTemporary"),m(g))}function m(g){const v=Qd(u);if(g===126)return d>1?c(g):(o.consume(g),d++,m);if(d<2&&!n)return c(g);const x=o.exit("strikethroughSequenceTemporary"),y=Qd(g);return x._open=!y||y===2&&!!v,x._close=!v||v===2&&!!y,l(g)}}}class IFe{constructor(){this.map=[]}add(t,n,r){RFe(this,t,n,r)}consume(t){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let a=r.pop();for(;a;){for(const s of a)t.push(s);a=r.pop()}this.map.length=0}}function RFe(e,t,n,r){let a=0;if(!(n===0&&r.length===0)){for(;a<e.map.length;){if(e.map[a][0]===t){e.map[a][1]+=n,e.map[a][2].push(...r);return}a+=1}e.map.push([t,n,r])}}function MFe(e,t){let n=!1;const r=[];for(;t<e.length;){const a=e[t];if(n){if(a[0]==="enter")a[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(a[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(a[1].type==="tableDelimiterRow")break}else a[0]==="enter"&&a[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function DFe(){return{flow:{null:{name:"table",tokenize:$Fe,resolveAll:LFe}}}}function $Fe(e,t,n){const r=this;let a=0,s=0,o;return l;function l(T){let M=r.events.length-1;for(;M>-1;){const I=r.events[M][1].type;if(I==="lineEnding"||I==="linePrefix")M--;else break}const F=M>-1?r.events[M][1].type:null,E=F==="tableHead"||F==="tableRow"?j:c;return E===j&&r.parser.lazy[r.now().line]?n(T):E(T)}function c(T){return e.enter("tableHead"),e.enter("tableRow"),u(T)}function u(T){return T===124||(o=!0,s+=1),f(T)}function f(T){return T===null?n(T):vt(T)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),m):n(T):qt(T)?Yt(e,f,"whitespace")(T):(s+=1,o&&(o=!1,a+=1),T===124?(e.enter("tableCellDivider"),e.consume(T),e.exit("tableCellDivider"),o=!0,f):(e.enter("data"),d(T)))}function d(T){return T===null||T===124||vn(T)?(e.exit("data"),f(T)):(e.consume(T),T===92?h:d)}function h(T){return T===92||T===124?(e.consume(T),d):d(T)}function m(T){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(T):(e.enter("tableDelimiterRow"),o=!1,qt(T)?Yt(e,g,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(T):g(T))}function g(T){return T===45||T===58?x(T):T===124?(o=!0,e.enter("tableCellDivider"),e.consume(T),e.exit("tableCellDivider"),v):_(T)}function v(T){return qt(T)?Yt(e,x,"whitespace")(T):x(T)}function x(T){return T===58?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(T),e.exit("tableDelimiterMarker"),y):T===45?(s+=1,y(T)):T===null||vt(T)?k(T):_(T)}function y(T){return T===45?(e.enter("tableDelimiterFiller"),b(T)):_(T)}function b(T){return T===45?(e.consume(T),b):T===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(T),e.exit("tableDelimiterMarker"),w):(e.exit("tableDelimiterFiller"),w(T))}function w(T){return qt(T)?Yt(e,k,"whitespace")(T):k(T)}function k(T){return T===124?g(T):T===null||vt(T)?!o||a!==s?_(T):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(T)):_(T)}function _(T){return n(T)}function j(T){return e.enter("tableRow"),S(T)}function S(T){return T===124?(e.enter("tableCellDivider"),e.consume(T),e.exit("tableCellDivider"),S):T===null||vt(T)?(e.exit("tableRow"),t(T)):qt(T)?Yt(e,S,"whitespace")(T):(e.enter("data"),A(T))}function A(T){return T===null||T===124||vn(T)?(e.exit("data"),S(T)):(e.consume(T),T===92?C:A)}function C(T){return T===92||T===124?(e.consume(T),A):A(T)}}function LFe(e,t){let n=-1,r=!0,a=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,c=0,u,f,d;const h=new IFe;for(;++n<e.length;){const m=e[n],g=m[1];m[0]==="enter"?g.type==="tableHead"?(l=!1,c!==0&&(BM(h,t,c,u,f),f=void 0,c=0),u={type:"table",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",u,t]])):g.type==="tableRow"||g.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,f={type:"tableBody",start:Object.assign({},g.start),end:Object.assign({},g.end)},h.add(n,0,[["enter",f,t]])),a=g.type==="tableDelimiterRow"?2:f?3:1):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=Kg(h,t,s,a,void 0,d),s=[0,0,0,0]),o[2]=n)):g.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],d=Kg(h,t,s,a,void 0,d)),s=o,o=[s[1],n,0,0])):g.type==="tableHead"?(l=!0,c=n):g.type==="tableRow"||g.type==="tableDelimiterRow"?(c=n,s[1]!==0?(o[0]=o[1],d=Kg(h,t,s,a,n,d)):o[1]!==0&&(d=Kg(h,t,o,a,n,d)),a=0):a&&(g.type==="data"||g.type==="tableDelimiterMarker"||g.type==="tableDelimiterFiller")&&(o[3]=n)}for(c!==0&&BM(h,t,c,u,f),h.consume(t.events),n=-1;++n<t.events.length;){const m=t.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=MFe(t.events,n))}return e}function Kg(e,t,n,r,a,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Eu(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const c=Eu(t.events,n[1]);if(s={type:o,start:Object.assign({},c),end:Object.assign({},c)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const u=Eu(t.events,n[2]),f=Eu(t.events,n[3]),d={type:l,start:Object.assign({},u),end:Object.assign({},f)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const h=t.events[n[2]],m=t.events[n[3]];if(h[1].end=Object.assign({},m[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const g=n[2]+1,v=n[3]-n[2]-1;e.add(g,v,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return a!==void 0&&(s.end=Object.assign({},Eu(t.events,a)),e.add(a,0,[["exit",s,t]]),s=void 0),s}function BM(e,t,n,r,a){const s=[],o=Eu(t.events,n);a&&(a.end=Object.assign({},o),s.push(["exit",a,t])),r.end=Object.assign({},o),s.push(["exit",r,t]),e.add(n+1,0,s)}function Eu(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const FFe={name:"tasklistCheck",tokenize:UFe};function BFe(){return{text:{91:FFe}}}function UFe(e,t,n){const r=this;return a;function a(c){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(c):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),s)}function s(c){return vn(c)?(e.enter("taskListCheckValueUnchecked"),e.consume(c),e.exit("taskListCheckValueUnchecked"),o):c===88||c===120?(e.enter("taskListCheckValueChecked"),e.consume(c),e.exit("taskListCheckValueChecked"),o):n(c)}function o(c){return c===93?(e.enter("taskListCheckMarker"),e.consume(c),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),l):n(c)}function l(c){return vt(c)?t(c):qt(c)?e.check({tokenize:zFe},t,n)(c):n(c)}}function zFe(e,t,n){return Yt(e,r,"whitespace");function r(a){return a===null?n(a):t(a)}}function qFe(e){return o9([mFe(),kFe(),OFe(e),DFe(),BFe()])}const WFe={};function UM(e){const t=this,n=e||WFe,r=t.data(),a=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);a.push(qFe(n)),s.push(uFe()),o.push(dFe(n))}var as="Accordion",HFe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[HA,VFe,KFe]=op(as),[w0,M3e]=kr(as,[KFe,Eq]),VA=Eq(),Q9=X.forwardRef((e,t)=>{const{type:n,...r}=e,a=r,s=r;return i.jsx(HA.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?i.jsx(JFe,{...s,ref:t}):i.jsx(XFe,{...a,ref:t})})});Q9.displayName=as;var[Z9,GFe]=w0(as),[eW,YFe]=w0(as,{collapsible:!1}),XFe=X.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},collapsible:s=!1,...o}=e,[l,c]=Ia({prop:n,defaultProp:r??"",onChange:a,caller:as});return i.jsx(Z9,{scope:e.__scopeAccordion,value:X.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:X.useCallback(()=>s&&c(""),[s,c]),children:i.jsx(eW,{scope:e.__scopeAccordion,collapsible:s,children:i.jsx(tW,{...o,ref:t})})})}),JFe=X.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:a=()=>{},...s}=e,[o,l]=Ia({prop:n,defaultProp:r??[],onChange:a,caller:as}),c=X.useCallback(f=>l((d=[])=>[...d,f]),[l]),u=X.useCallback(f=>l((d=[])=>d.filter(h=>h!==f)),[l]);return i.jsx(Z9,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:i.jsx(eW,{scope:e.__scopeAccordion,collapsible:!0,children:i.jsx(tW,{...s,ref:t})})})}),[QFe,j0]=w0(as),tW=X.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:a,orientation:s="vertical",...o}=e,l=X.useRef(null),c=Nt(l,t),u=VFe(n),d=uf(a)==="ltr",h=De(e.onKeyDown,m=>{var A;if(!HFe.includes(m.key))return;const g=m.target,v=u().filter(C=>{var T;return!((T=C.ref.current)!=null&&T.disabled)}),x=v.findIndex(C=>C.ref.current===g),y=v.length;if(x===-1)return;m.preventDefault();let b=x;const w=0,k=y-1,_=()=>{b=x+1,b>k&&(b=w)},j=()=>{b=x-1,b<w&&(b=k)};switch(m.key){case"Home":b=w;break;case"End":b=k;break;case"ArrowRight":s==="horizontal"&&(d?_():j());break;case"ArrowDown":s==="vertical"&&_();break;case"ArrowLeft":s==="horizontal"&&(d?j():_());break;case"ArrowUp":s==="vertical"&&j();break}const S=b%y;(A=v[S].ref.current)==null||A.focus()});return i.jsx(QFe,{scope:n,disabled:r,direction:a,orientation:s,children:i.jsx(HA.Slot,{scope:n,children:i.jsx(Qe.div,{...o,"data-orientation":s,ref:c,onKeyDown:r?void 0:h})})})}),cy="AccordionItem",[ZFe,KA]=w0(cy),nW=X.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...a}=e,s=j0(cy,n),o=GFe(cy,n),l=VA(n),c=ar(),u=r&&o.value.includes(r)||!1,f=s.disabled||e.disabled;return i.jsx(ZFe,{scope:n,open:u,disabled:f,triggerId:c,children:i.jsx(Oq,{"data-orientation":s.orientation,"data-state":lW(u),...l,...a,ref:t,disabled:f,open:u,onOpenChange:d=>{d?o.onItemOpen(r):o.onItemClose(r)}})})});nW.displayName=cy;var rW="AccordionHeader",aW=X.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=j0(as,n),s=KA(rW,n);return i.jsx(Qe.h3,{"data-orientation":a.orientation,"data-state":lW(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:t})});aW.displayName=rW;var Jk="AccordionTrigger",iW=X.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=j0(as,n),s=KA(Jk,n),o=YFe(Jk,n),l=VA(n);return i.jsx(HA.ItemSlot,{scope:n,children:i.jsx(vIe,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:s.triggerId,...l,...r,ref:t})})});iW.displayName=Jk;var sW="AccordionContent",oW=X.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,a=j0(as,n),s=KA(sW,n),o=VA(n);return i.jsx(xIe,{role:"region","aria-labelledby":s.triggerId,"data-orientation":a.orientation,...o,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});oW.displayName=sW;function lW(e){return e?"open":"closed"}var e3e=Q9,t3e=nW,n3e=aW,cW=iW,uW=oW;const r3e=e3e,dW=p.forwardRef(({className:e,...t},n)=>i.jsx(t3e,{ref:n,className:Se("border-b",e),...t}));dW.displayName="AccordionItem";const fW=p.forwardRef(({className:e,children:t,...n},r)=>i.jsx(n3e,{className:"flex",children:i.jsxs(cW,{ref:r,className:Se("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,i.jsx(ka,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));fW.displayName=cW.displayName;const hW=p.forwardRef(({className:e,children:t,...n},r)=>i.jsx(uW,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:i.jsx("div",{className:Se("pb-4 pt-0",e),children:t})}));hW.displayName=uW.displayName;const zM=`# Change Log
# [0.1.20] FE WEB CEKAT 2025-12-24
### Conversations: Filter UX & Correctness
- **Channel Type Filter Fixed**: Channel Type now correctly filters threads at the query level.
  - Updated \`useConversations\` to use an inner join (\`channels!inner(...)\`) so \`channels.provider\` filters actually constrain \`threads\` results (PostgREST behavior).
  - Added defensive client-side filtering for \`channelType\`, \`inbox\`, and \`platformId\` to ensure consistent UI results.

- **Persistent Applied Filters**: Applied filters now persist and are shareable.
  - Filters are serialized into URL query params (\`f_*\`) so refresh/back/forward retains the exact filtered view.
  - If URL has no filter params, the last applied filters are restored from localStorage (per-user key).

- **Visible Active Filters**: Users can now see whats currently applied.
  - \`ConversationPage\` renders active filter badges under the Conversations header (Channel, Platform, Status, Agent, Resolved By, Date, Inbox).
  - \`ChatFilter\` modal is now controlled via a \`value\` prop so reopening the modal shows the currently applied values.

### Configuration & Environment Management
- **Centralized URL Configuration**: Created comprehensive URL and environment configuration system
  - New \`src/config/urls.ts\` centralizes all app base URLs (APP_ORIGIN, WAHA_BASE_URL) with environment-aware defaults
  - New \`src/config/supabase.ts\` centralizes Supabase URL and key configuration with automatic dev/prod switching
  - Production app origin now defaults to \`https://synkaai.netlify.app\` (even in dev) for consistent LiveChat links
  - Supabase URL automatically switches: DEV  \`bkynymyhbfrhvwxqqttk.supabase.co\`, PROD  \`api.cssuper.com\`
  - All configuration supports \`VITE_*\` environment variable overrides for flexible deployment
  - Removed all hardcoded Netlify and Supabase URLs from components

- **Platform URL Updates**: Updated all platform-related URLs to use centralized configuration
  - \`ConnectedPlatforms.tsx\` now uses \`APP_ORIGIN\` and \`livechatUrl()\` helper instead of hardcoded URLs
  - LiveChat embed code now uses configurable \`APP_ORIGIN\` instead of hardcoded domain
  - \`WhatsAppPlatformForm.tsx\` uses \`WAHA_BASE_URL\` from config instead of hardcoded Railway URL
  - All platform forms now reference single source of truth for base URLs

### AI Agent Settings Cleanup
- **Removed Context Window Field**: Removed "Context Window (K tokens)" from Additional Settings UI
  - Field no longer visible or editable in AI Agent Settings interface
  - Removed all related state variables (\`contextLimitInput\`, \`contextLimitMax\`)
  - Removed input handler (\`handleContextLimitChange\`) and validation logic
  - Save logic still automatically persists safe default value (existing value or 28K tokens, clamped to model capability)
  - Ensures database writes continue to work without breaking changes

### Conversation Filtering
- **Removed Pipeline Status Filter**: Cleaned up thread filter interface
  - Removed "Pipeline Status" dropdown from chat filter dialog
  - Removed \`pipelineStatus\` from filter state and type definitions
  - Removed \`pipeline_status\` query filtering from \`useConversations\` hook
  - Simplified filter UI with cleaner, more focused options

### Technical Improvements
- **Code Organization**: Improved maintainability and consistency
  - Single source of truth for all environment-specific URLs
  - Consistent configuration pattern across all services
  - Better separation of concerns between UI and configuration
  - Enhanced type safety with centralized config exports

# [0.1.19] FE WEB CEKAT 2025-12-24
### Circuit Breaker Settings
- **Robust Numeric Validation**: Reset timeout, monitoring period, request timeout, and threshold fields now accept temporary clears but enforce min/max bounds before saving.
  - Inline error messages and disabled save state prevent invalid submissions.
  - Inputs strip non-numeric characters, block scientific notation, and clamp values to their allowed ranges.
- **Latency Feedback**: Healthy and stress latency controls show live seconds previews, clarifying millisecond inputs.
- **Tooltip Refinement**: Repositioned tooltips to render beside their triggers, preventing clipping inside the modal.

### Adaptive Rate Limiter Configuration
- **Precision Controls**: Base limits and multiplier inputs now sanitize numeric entry, limit decimals to three places, and sync their raw display strings with validated state.
- **Validation Guardrails**: All adaptive fields surface inline errors and keep the save button disabled until values fall within allowed ranges.
- **Enhanced Summary**: Read-only configuration card now surfaces latency thresholds (with seconds) alongside existing multiplier and interval details.
- **Modal Tooltips**: Every helper tooltip aligns left/right relative to its column, ensuring full visibility within the dialog.

# [0.1.18] FE WEB CEKAT 2025-12-24
### Bug Fixes
- **Fixed Platform Filter Not Finding Channels**: Resolved critical bug where selecting a channel type (Telegram, WhatsApp, Web) would show no platforms.
  - Changed platform filtering from \`channels.type\` to \`channels.provider\` to match actual database schema.
  - In database, \`channels.provider\` contains transport values (\`telegram\`, \`web\`, \`whatsapp\`) while \`channels.type\` contains implementation details (\`bot\`, \`inbox\`).
  - Updated both \`ChatFilter.tsx\` (UI filtering) and \`useConversations.ts\` (query filtering) to use \`channels.provider\`.
  - Telegram and other channel types now correctly display their platforms when selected.

### Conversation Management
- **Hierarchical Channel Type  Platform Filter**: Enhanced chat filter with parent-child filter relationship.
  - Platform filter now requires Channel Type selection first (Platform dropdown disabled until Channel Type is chosen).
  - Placeholder text changes to "Select channel type first" when Channel Type is not selected.
  - Changing Channel Type automatically clears Platform selection to prevent stale selections.
  - Improved UX with clear dependency indication between filters.

- **Empty State for Platform Filter**: Added user-friendly empty state handling.
  - When selected Channel Type has no matching platforms, dropdown shows disabled option: "No platforms found for this channel type".
  - Prevents confusion when no results are available for a selected channel type.
  - Platform display simplified to show only \`display_name\` without provider/type suffix for cleaner UI.

# [0.1.17] FE WEB CEKAT 2025-12-22
### Bug Fixes
- **Fixed Stale Data Persistence After Role Changes**: Resolved critical issue where threads and contacts persisted in the UI after role changes in the database.
  - Removed localStorage caching for threads (\`app.cachedConversations\`) to prevent stale data from persisting after authorization changes.
  - Disabled query caching for authorization-sensitive operations (threads, contacts) in \`protectedSupabase\` wrapper to ensure fresh data on role changes.
  - Threads and contacts now immediately clear and refetch when user roles change, preventing unauthorized data from being displayed.
  - Fixed issue where changing a user's role from \`master_agent\` to \`super_agent\` (or vice versa) in the database would not immediately reflect in the UI.

### Technical Improvements
- **Realtime Role Change Detection**: Implemented comprehensive authorization change detection system.
  - Added realtime subscription to \`user_roles\` table in \`RBACContext\` to detect role changes for the current user.
  - Created \`authz.ts\` utility module for centralized authorization change handling and cache invalidation.
  - Implemented event-based system (\`authzChanged\` event) to notify hooks when authorization changes occur.
  - \`useConversations\` and \`useContacts\` hooks now listen for authorization changes and automatically reset state + refetch data.
  - Ensures UI always reflects current user permissions without requiring manual refresh or logout/login.

- **Cache Invalidation Strategy**: Enhanced cache management for authorization-sensitive data.
  - Authorization changes now trigger comprehensive cache clearing (localStorage, query cache, fallback handler).
  - Removed role-agnostic caching that could serve stale results after permission changes.
  - All authorization-sensitive queries now bypass cache to ensure data accuracy.
  - Improved security by preventing cached data from persisting after role downgrades.

# [0.1.16] FE WEB CEKAT 2025-12-20
### UI Components
- **SearchableSelect Component**: Added a new reusable searchable single-select dropdown component.
  - Provides searchable dropdown functionality with keyboard navigation support.
  - Includes proper accessibility attributes and visual feedback for selected items.
  - Used for improved agent assignment interface in conversation management.

- **SearchableMultiSelect Component**: Added a new reusable searchable multi-select component.
  - Supports selecting multiple items with badge display for selected values.
  - Includes add/remove callbacks for granular control over selection changes.
  - Displays selected items as removable badges with clear visual indicators.

### Conversation Management
- **Enhanced Agent Assignment UI**: Replaced popover-based assignment interface with searchable select components.
  - "Handled By" field now uses \`SearchableSelect\` for improved searchability and UX.
  - Streamlined assignment flow with better visual feedback and state management.
  - Added optimistic UI updates with proper state synchronization.

- **Improved Collaborator Management**: Enhanced thread collaborator interface with multi-select support.
  - Replaced popover-based collaborator addition with \`SearchableMultiSelect\` component.
  - Collaborator list now displays as removable badges for better visibility.
  - Added support for super agent member filtering - only members of the assigned super agent can be added as collaborators.
  - Collaborator selection is disabled until a "Handled By" agent is assigned.
  - Automatic fetching of super agent members when an agent is assigned.

- **Manual Thread Assignment**: Added \`assignThreadToUser\` function for supervisor-level thread reassignment.
  - Allows supervisors to manually assign conversations to specific users.
  - Automatically creates system event messages when assignments occur.
  - Updates thread metadata including \`assigned_by_user_id\`, \`assigned_at\`, and \`handover_reason\`.
  - Disables AI access when manually assigned (\`ai_access_enabled: false\`).

- **User Label Resolution**: Improved user display name resolution for agents and collaborators.
  - Fetches user profile data for agents not present in the human agents list.
  - Caches user labels to avoid redundant API calls.
  - Provides fallback display names when profile data is unavailable.

### Bug Fixes
- **Fixed Handled By State Leak**: Resolved critical bug where assigning a thread to an agent would incorrectly show that agent as assigned to all other threads.
  - Scoped \`handledByOverride\` state to specific thread IDs instead of using global state.
  - Optimistic UI updates now only apply to the thread being assigned, preventing state leakage when navigating between conversations.
  - Fixed issue where changing "Handled By" for one thread would temporarily display the same value for all threads until server refresh.

# [0.1.15] FE WEB CEKAT 2025-12-19
### Database & Policies
- **Threads Update Policy**: Master agents can now resolve conversations across all environments.
  - Updated the \`threads update perm update_own\` policy to allow updates when \`is_master_agent_in_org(org_id)\` is true.
  - Applied the policy change to main, development, and backup Supabase projects and added a migration for consistency.

### Conversation Management
- **Resolved Thread Cleanup**: UI now hides take-over controls once a thread is closed.
  - Removed the takeover button and composer input when \`status === 'closed'\`, preventing accidental actions on resolved chats.

### Contacts
- **Unassigned Filter Accuracy**: Ensured the contacts list reflects only unassigned records without altering assigned data.
  - Adjusted Supabase querying and client filtering so contacts with no assigned agent (or no thread yet) display correctly.
  - Total counters and pagination now show filtered counts (e.g. \`12 of 16\`) when a handled-by filter is active.
- **Export to CSV**: Added a one-click export that downloads the current contact dataset (with latest thread info) as a CSV.
  - Includes contact fields (name, phone, email, notes, created_at) and latest thread metadata (status, handled by, channel).
- **Toolbar Cleanup**: Removed the unused Customize Columns button for a leaner toolbar experience.

# [0.1.14] FE WEB CEKAT 2025-12-18
### Platform Forms (WhatsApp / Telegram / Web)
- **Top Spacing Layout Fix**: Standardized form spacing under dialog headers for a cleaner, consistent layout across all platform setup forms.

### Telegram Platform
- **Bot Token Validation (Required)**: Added a **Validate** button beside the Telegram Bot Token field and made validation mandatory before creating a Telegram platform.
  - Create is blocked with an error until the token has been validated.
- **Token Verification via Supabase Edge Function**: Token verification now calls the Supabase Edge Function endpoint (\`/functions/v1/telegram-verify-token\`) with a strict response contract (\`{ valid: boolean }\`).
  - \`callWebhook()\` now auto-attaches Supabase auth headers for Supabase Edge Function URLs.

# [0.1.13] FE WEB CEKAT 2025-12-17
### Conversation Management
- **Date Filter Fix**: Resolved an issue where the date filter in the conversations menu would incorrectly exclude valid conversations.
  - Switched from server-side filtering on \`created_at\`/\`last_msg_at\` (which could be stale) to client-side filtering using the computed last message time.
  - Ensures the filter now perfectly matches the dates displayed in the UI, correctly showing threads active within the selected range.

# [0.1.12] FE WEB CEKAT 2025-12-14
### Human Agents UI Protection
- **Master Agent UI Safeguards**: Enhanced protection for master agent accounts in the Human Agents interface.
  - Status dropdown button is now disabled for master agents across all sections (master agents, super agents, regular agents, and pending invitations).
  - Chevron dropdown icon is conditionally hidden for master agents to provide clear visual indication that status cannot be changed.
  - Delete button is completely hidden for master agents (replacing the previous disabled button with tooltip approach) across all agent sections.
  - Applied consistent protection logic using \`primaryRole === 'master_agent'\` checks throughout the component.
  - Provides cleaner UI experience by removing non-functional controls rather than showing disabled states.

### Authentication & OTP
- **2FA Email Edge Function Update**: Updated edge function reference for login-specific 2FA emails.
  - Changed edge function call from \`send-2fa-email\` to \`send-2fa-login-email\` in \`AuthContext.tsx\` and \`Otp.tsx\`.
  - Aligns with backend function naming convention for better clarity and separation of login vs other 2FA email flows.

# [0.1.11] FE WEB CEKAT 2025-12-10
### Conversation Management
- **Status Filter Cleanup**: Removed the redundant "Resolved" option from the conversation status filter.
  - The "Closed" status now serves as the single source of truth for completed conversations.
  - Simplified the filtering logic to remove unnecessary status checks.

# [0.1.10] FE WEB CEKAT 2025-12-09
### Human Agents & Permissions
- **Create Agent Permission Gate**: Simplified and hardened the Create Agent button on the Human Agents page.
  - Button is now directly gated by \`users_profile.create\` via \`PermissionGate\`, following the same pattern as other RBAC-protected actions.
  - When the user lacks permission, the button stays visible but disabled with a clear tooltip (You do not have permission to create agents.).
  - Removed the extra client-side lookup against the \`permissions\` table and associated state (\`createPermissionKey\`, \`checkingCreatePermission\`) to reduce complexity and runtime edge cases.

### Navigation & RBAC Consistency
- **Super Agents Schema Alignment**: Updated \`PERMISSIONS_SCHEMA\` to include the full \`super_agents\` action set (\`create\`, \`update\`, \`delete\`, \`read_all\`, \`read_own\`), matching the backend \`permissions\` table.
- **Navigation Read-Gates**: Centralized navigation gating to use read scopes consistently:
  - Added a defensive \`readPerms(resource)\` helper that safely derives \`resource.read*\` keys from \`PERMISSIONS_SCHEMA\`.
  - Human Agents sidebar item now depends on any \`super_agents\` read scope (e.g. \`super_agents.read_all\` / \`super_agents.read_own\`), keeping menu visibility aligned with DB permissions.
- **useNavigation Stability**: Adjusted \`useNavigation\` to skip DB permission recomputation while RBAC is still loading, preventing transient context errors during hot reloads while keeping the existing has_perm-first behavior.

# [0.1.9] FE WEB CEKAT 2025-12-03
### AI Agents
- Replaced the browser \`confirm()\` with a first-class modal when deleting AI agents.
  - Uses the shared \`AlertDialog\` component with explicit cancel/confirm controls.
  - Shows the agent name inside the confirmation copy and blocks dismissal while the request is in flight.
  - Surfaces loader feedback and only closes when the Supabase delete succeeds.

# [0.1.8] FE WEB CEKAT 2025-12-03
### Platform Forms: Super Agent Management & Scoping
- **Explicit Super Agent Selection**: All platform forms (WhatsApp, Telegram, Web) now require explicit Super Agent selection before AI Agent selection
  - Super Agent field is now a required, selectable dropdown (previously derived from AI Agent)
  - Field appears above AI Agent selection with clear labeling and tooltips
  - Form validation prevents submission without Super Agent selection
  - Helper text explains that Super Agent can be changed independently of AI Agent

- **AI Agent Filtering by Super Agent**: Enhanced AI Agent selection with strict scoping
  - AI Agent dropdown only shows agents belonging to the selected Super Agent
  - Validation prevents selecting AI agents that don't belong to the selected Super Agent
  - Error toast notifications when attempting invalid selections
  - Form automatically resets AI Agent selection when Super Agent changes
  - Warning message displayed if selected AI Agent lacks a Super Agent assignment

- **Human Agent Scoping**: Improved human agent assignment with role-based filtering
  - Human Agent multi-select only shows agents assigned to the selected Super Agent
  - "Select All" and "Unselect All" buttons for quick agent assignment
  - Multi-select disabled until Super Agent is selected
  - Clear placeholder text indicating selection requirements
  - Consistent behavior across all platform types (WhatsApp, Telegram, Web)

- **AI Agent Creation Enhancement**: Super Agent assignment during creation
  - Super Agent selection required in AI Agent creation dialog
  - Searchable dropdown for Super Agent selection
  - Super Agent information displayed in AI Agent cards
  - Validation ensures Super Agent is selected before agent creation

### Navigation & Permissions Updates
- **Navigation Configuration**: Updated navigation items and permission mappings
  - Refined permission checks for navigation visibility
  - Enhanced role-based access control for navigation items
  - Improved database permission checks in useNavigation hook

- **Permission Schema**: Updated permissions configuration
  - Aligned permission schema with backend requirements
  - Enhanced permission categorization and validation

### Live Chat Improvements
- **Message Handling**: Enhanced message synchronization and streaming
  - Improved realtime message updates
  - Better handling of streaming responses
  - Optimized message deduplication logic
  - Enhanced user message timeout handling

### Webhook Configuration
- **Webhook Routing**: Updated webhook endpoint configuration
  - Enhanced proxy-aware routing
  - Improved endpoint resolution for different providers
  - Better error handling for webhook calls

### Technical Improvements
- **Hooks Enhancement**: Improved data fetching and scoping
  - Enhanced useAIAgents hook with better super agent scoping
  - Improved useNavigation hook with database permission checks
  - Better error handling and loading states
  - Optimized cache management

# [0.1.7] FE WEB CEKAT 2025-12-03
### RBAC & Permissions (Finalized Alignment)
- Standardized PERMISSIONS_SCHEMA to match production backend exactly:
  analytics, ai_profiles, ai_sessions, channels, contacts, contact_identities, threads, messages, ai_agent_files, admin_panel, roles, audit_logs, alerts.
- Permission Matrix UX revamp (purely permission-driven):
  - Card sections enforced per resource: Manage (create/update/delete), Access Level (read variants), Special Actions (send/ack).
  - Mutually exclusive Access Level pills; Threads uses My Channels (read_channel_owned), Collaborator, All.
  - Special actions exposed as toggles: messages.send (Send), alerts.ack (Acknowledge).
  - Select All sets Manage + Special Actions ON and selects the most permissive single read level; Unselect All resets to None.
  - Labels updated (Update Settings for admin_panel.update); consistent wording across cards.
  - Added concise tooltips for threads/messages read scopes and alerts.ack.
- Removed bundle-based Menu Access from PermissionsPage; no more ghost toggles or bundles.
- Fixed toggle handler so switches reflect intended state; role permission grant/revoke now gated by roles.update.
- Debounced RBAC refresh during bulk edits to prevent UI lag.

### Navigation & Visibility (Policy-First)
- Menu visibility now depends on DB has_perm checks; items are hidden if the user lacks any read scope for that section.
- Updated gating keys to align with schema:
  - Admin Panel: admin_panel.read (menu), admin_panel.update (controls)
  - Permissions: roles.read
  - Chat: threads.read_* (any of read_all/read_channel_owned/read_collaborator)
  - Analytics: analytics.read
  - Contacts: contacts.read_*; Platforms: channels.read_*; AI Agents: ai_profiles.read_*; Logs: audit_logs.read
- Sidebar renders only items from getAccessibleNavItems(); fixed ReferenceError by properly destructuring the hook return.
- Reduced has_perm spam: policy checks recompute only when RBAC roles/permissions change.

### Admin Panel
- Replaced legacy access_rules.configure gates:
  - Controls now use admin_panel.update; navigation uses admin_panel.read.

### Misc
- Added contact_identities to schema.
- Consistency/cleanup across labels, ordering, and spacing in Permission Matrix.

# [0.1.6] FE WEB CEKAT 2025-11-30
### Cache Management & Session Reliability
- **Comprehensive Cache Clearing on Logout**: Enhanced logout functionality to clear all cached data
  - Clears all localStorage items (including \`app.cached*\`, \`app.currentUserId\`, etc.)
  - Clears all sessionStorage items
  - Clears all Supabase auth tokens
  - Prevents stale data from persisting after logout
  - Applied to both \`AuthContext.signOut()\` and \`Logout.tsx\` page

- **localStorage-Based User ID Storage**: Improved session reliability by storing user ID in localStorage
  - User ID and email stored in localStorage as \`app.currentUserId\` and \`app.currentUserEmail\` on login
  - Added \`getCurrentUserId()\` helper function that prefers localStorage over Supabase session
  - Updated \`logAction()\` to use localStorage user_id first, then fallback to Supabase session
  - Ensures consistent user identification even when Supabase session is temporarily unavailable

### Bug Fixes
- **Merge Conflict Resolution**: Resolved merge conflict in \`useAIAgents.ts\` by combining \`scopeMode\` and \`superAgentId\` logic
- **Policy Role Fix**: Fixed \`threads_master_read\` policy to use \`authenticated\` role instead of \`public\` role
- **Cache Persistence**: Fixed issue where cached data persisted after logout, causing users to see unauthorized data

# [0.1.5] FE WEB CEKAT 2025-11-30
### Webhook & Supabase URL Consistency
- **Single Source for Supabase URL**: Exported a shared \`SUPABASE_URL\` constant from the Supabase client so all front-end integrations reference the same base URL sinstead of duplicating it.
- **Proxy Edge Function Alignment**: Updated \`WEBHOOK_CONFIG\` to derive the proxy base (\`/functions/v1/proxy-n8n\`) from the shared \`SUPABASE_URL\`, removing the old hardcoded Supabase project host and keeping proxy routing aligned with the active project.
- **WhatsApp WAHA Webhook Normalization**: Swapped the hardcoded Railway webhook host in \`WhatsAppPlatformForm\` for \`WEBHOOK_CONFIG.BASE_URL\`, ensuring WAHA sessions always post back into the currently configured webhook environment.

# [0.1.4] FE WEB CEKAT 2025-11-28
### Bug Fixes
- **PermissionsPage Duplicate Declaration Fix**: Resolved "Identifier 'permissionSearch' has already been declared" syntax error
  - Removed duplicate state declarations for \`permissionSearch\`, \`permissionResourceFilter\`, and \`permissionActionFilter\`
  - Kept the properly typed versions of these state variables
  - Fixed runtime error that prevented the Permissions page from loading

# [0.1.3] FE WEB CEKAT 2025-11-28
### AI Agent Visibility
- Agents now only see AI agents owned by their assigned super agent; a new \`useSuperAgentScope\` hook drives consistent filtering across dashboards, dropdowns, and cached data.
- The AI Agents list and helpers surface localized messaging when an agent has no supervising cluster, preventing stale cross-team data from leaking through local storage.
### Database Access Control
- Tightened the \`ai_profiles\` RLS guard so master agents retain full visibility, super agents stay scoped to their own records, and agents inherit their supervising super agents access.

# [0.1.2] FE WEB CEKAT 2025-11-26
### Platform Form Enhancements for Super Agents
- **Super Agent Field Auto-Prefill**: All platform creation forms (Telegram, WhatsApp, Web) now automatically prefill the super agent field when the current user is a super agent
  - Super agent field is automatically populated with the current user's super agent username/ID when form opens
  - Field becomes readonly (visual indication with reduced opacity) when user is a super agent
  - Helper text updated to indicate super agent is determined by current user's account for super agent users
  - Prevents super agent users from changing their own super agent assignment

- **AI Agent Filtering for Super Agents**: Enhanced platform forms to filter AI agents based on super agent role
  - Super agent users only see AI agents that belong to their account in the AI agent dropdown
  - Validation prevents selecting AI agents that don't belong to the super agent's account
  - Error toast notification shown when attempting to select invalid AI agents
  - Master agents continue to see all AI agents as before

- **Role-Based Form Behavior**: Implemented role-aware form logic across all platform types
  - Added \`useRBAC()\` hook integration to check for \`ROLES.SUPER_AGENT\` role
  - Automatic super agent ID detection from \`humanAgents\` list when form opens
  - Form reset logic preserves super agent ID for super agent users
  - Consistent behavior across Telegram, WhatsApp, and Web platform forms

### Technical Improvements
- **Component Updates**: Enhanced platform form components with role-based logic
  - Added \`useEffect\` hooks to prefill super agent field on form open
  - Integrated \`useRBAC\` context for role checking
  - Added conditional rendering and validation based on user role
  - Improved form state management to preserve super agent selection for super agent users

# [0.1.1] FE WEB CEKAT 2025-11-27
### Permissions Console
- **Regression Fix**: Reintroduced missing permission search and filter state in \`PermissionsPage\`; restores the role configuration screen and avoids the \`permissionSearch is not defined\` runtime error.
- **Master Agent Safety Rail**: Hard-blocked deletion of the Master Agent from both UI and API helpers; delete buttons are disabled with guidance and back-end guards stop any direct calls.
### UI Localization
- **Master Agent Deletion Message**: Updated the modal tooltip and toast that appear when attempting to delete a master agent; the copy now follows the latest localization requirements.

# [0.1.0] FE WEB CEKAT 2025-11-27
### FINALIZED FOR PRODUCTION
### Agent Creation UX
- **Modal-Friendly Errors**: Duplicate-email validation now surfaces purely as a toast; the Create Agent dialog stays open and no longer renders the full-page error banner, making it easy to adjust the address and resubmit.

# [0.0.49] FE WEB CEKAT 2025-11-27
### Human Agents Roster
- **Duplicate Entry Cleanup**: Adjusted role grouping logic so master agents no longer appear in both the master and agent sections of the Human Agents table; prevents a single email from showing twice and keeps assignment status accurate.

### Login & Session Guardrails
- **Refresh Spinner Fix**: Added watchdog timers around Supabase session/bootstrap calls so a stalled \`auth.getSession()\` or 2FA profile check cant trap users behind the infinite Loading screen; stale sessions now fall back to the login view within a few seconds.
- **Account Status Timeouts**: Soft-capped the account status RPC to keep token refreshes responsive even if the database briefly stops responding.

# [0.0.48] FE WEB CEKAT 2025-11-26
### RBAC & Permissions System Enhancements
- **Master Agent Root Role Treatment**: Master Agent is now treated as root role with full system privileges
  - Master Agent role is designated as root role with unrestricted access across the system
  - Permission matrix editing is disabled for Master Agent to prevent accidental permission removal
  - Root role status ensures Master Agent maintains full privileges regardless of permission configuration

- **Permission Matrix UI Updates**: Disabled permission matrix editing for Master Agent role
  - Added root role detection in PermissionsPage component (\`isRootSelected\` check)
  - Permission matrix sections (Menu Access, CRUD Permissions, Special Permissions) are disabled when configuring Master Agent
  - Added informational "Root Role" card explaining Master Agent's full privilege status
  - All permission checkboxes and bundle toggles are disabled with helpful tooltips ("Master Agent is root; matrix disabled")
  - Clear visual indication that Master Agent has full privileges and doesn't require permission configuration
  - Prevents accidental permission removal for root role through UI safeguards
  - Early return guards prevent any permission toggle operations when Master Agent is selected

### Technical Improvements
- **PermissionsPage Component**: Enhanced role configuration logic
  - Added \`isRootSelected\` state check based on role name comparison
  - Conditional rendering of root role information card
  - Disabled state applied to all permission matrix controls for Master Agent
  - Improved tooltip messaging for disabled root role controls
- **Open Conversation Navigation Fix**: Ensured contacts page button opens chat inbox
  - \`Open conversation\` now routes to chat inbox with \`menu=chat\`
  - Automatically selects the relevant contact thread when available

# [0.0.47] FE WEB CEKAT 2025-11-25
### Supabase Baseline Refresh
- **Single Source Migration**: Replaced the entire migrations stack with \`20251124230847_baseline.sql\`, capturing todays production schema so every environment can rebuild from a single, clean baseline.
- **Vector Extension Guardrails**: Ensured the baseline creates the \`vector\` extension in the \`public\` schema and updates every dependent function/column to reference the schema-qualified type.
- **Config Hardening**: Explicitly pins Supabase Storage to \`v1.31.1\` in \`supabase/config.toml\`, preventing CLI diffs from failing on missing storage migrations.

### Branch & Data Maintenance
- **Development Branch Reset**: Repaired Supabase migration history, reapplied the new baseline, and reset the \`development\` branch so it replays the trimmed migration set without legacy drift.
- **Main  Dev Data Parity**: Dumped production \`public\` + \`auth\` data and restored it into the development branch, then pruned historic test accounts to keep both environments aligned.
- **Backup Hygiene**: Ran the same user cleanup on the backup project (\`igtizjvhxgajijjjxnzi\`) to ensure the automated sync worker starts from a consistent dataset.

# [0.0.46] FE WEB CEKAT 2025-11-24
### Database Migration Hardening
- **Legacy Platform Support**: Updated the \`20250828000000_merge_platforms_into_channels.sql\` migration to add any missing \`platforms\` columns (\`display_name\`, \`website_url\`, \`status\`, \`secret_token\`, \`profile_photo_url\`, \`ai_profile_id\`) on the fly so historical environments can replay migrations without schema drift.
- **Main Branch Hotfix Migration**: Applied Supabase migration \`20250827950000_fix_platforms_schema\` on production to backfill those columns immediately, unblocking rebase operations across environments.
- **Rebase Reliability**: Re-ran the Supabase rebase workflow to verify the new safeguards; future branch syncs no longer fail on missing column errors when promoting channels data.

# [0.0.45] FE WEB CEKAT 2025-11-23
### QA Testing Guide Expansion
- **End-to-End Flow Coverage**: Expanded \`DOCUMENTATION.md\` with exhaustive step-by-step flows covering login, OTP, password reset, human/AI agent lifecycle, contacts, permissions, admin utilities, analytics, and audit logs so QA can validate every button and path without code access.
- **Button & Validation Matrix**: Documented the enabled/disabled states, confirmation dialogs, toasts, and edge-case behaviour for all primary actions (create, save, delete, export, toggle) across the application.
- **Role-Based Walkthroughs**: Added guidance on testing from master, super, and agent perspectives, including navigation expectations and restricted-card behaviour on the dashboard.

### Documentation Quality Improvements
- **Live Chat & Admin Deep Dives**: Added detailed instructions for conversation tools (notes, tags, canned responses, SLAs), AI pause/resume workflow, circuit breaker monitoring, and platform onboarding (WhatsApp, Telegram, Web).
- **Human Agent Lifecycle**: Documented invite, resend, cancellation, token limit management, usage analytics, and removal to ensure QA covers onboarding and offboarding scenarios end-to-end.
- **Changelog & Profile Flows**: Captured interactive changelog behaviour, search/filter expectations, and full profile/session management (2FA toggle, password change, device sign-out).

### Super Agent Clustering
- **AI Agent Ownership**: Introduced \`super_agent_id\` on \`ai_profiles\`, enforced via migrations and new RLS policies. Super agents only see/manage their own AI agents; master agents can reassign via settings.
- **Auto-Inherited Platform Ownership**: Platform creation/editing now derives \`channels.super_agent_id\` from the selected AI agent, eliminating manual super agent selection while keeping human-agent assignment intact.
- **Scoped Listings**: AI agent lists, stats, and platform forms filter to the current super agent automatically; agents without clusters are prevented from being used until assigned.

### Platform Assignment Guard
- **Scoped Agent Dropdowns**: When creating WhatsApp, Telegram, or Web platforms as a master agent, the human-agent selector now lists only agents assigned to the chosen super agentpreventing unassigned agents from appearing in the multi-select.

# [0.0.44] FE WEB CEKAT 2025-11-19
### Changelog Experience Revamp
- **Interactive Release Browser**: Introduced a dynamic changelog page with searchable release list, color-coded highlights, and accordion sections for each area of work.
- **Dual View Modes**: Added interactive and classic tabs so readers can switch between the immersive UI and the original Markdown in one place.
- **Automatic Highlight Extraction**: Generate summary badges from markdown bullet points to surface the most important updates per release.
- **Styling Updates**: Applied gradient backgrounds, elevated cards, and refined typography for a colorful, engaging presentation.
- **Comprehensive Documentation**: Added \`DOCUMENTATION.md\` detailing auth flows, feature modules, Supabase schema, and operational processes.

# [0.0.43] FE WEB CEKAT 2025-11-18
### AI Pause Notification System
- **New AI Paused Modal Component**: Created dedicated modal for org-wide AI pause notifications
  - Modal displays when AI responses are paused across all channels
  - Shows who paused AI and when (for master agents)
  - Different messaging for master agents vs regular agents
  - Master agents can directly navigate to Admin Panel from modal
  - Modal appears once per browser session (acknowledgment stored in localStorage)
  - Integrated into main Index page with automatic status checking

- **Org-Wide AI Pause Status Monitoring**: Enhanced AI pause state management
  - Automatic fetching of org-wide AI pause status on app load
  - Resolves paused-by user name from profile or email
  - Modal auto-dismisses when AI pause is lifted
  - Session-based acknowledgment prevents modal spam

### Conversation Page UI Improvements
- **Fixed Tab Color Styling**: Resolved issue where selected tab colors were not displaying
  - Restructured Tooltip/TabsTrigger relationship (Tooltip now inside TabsTrigger)
  - Assigned tab: Blue background and text when active
  - Unassigned tab: Red background and text when active
  - Resolved tab: Green background and text when active
  - Proper \`data-[state=active]\` attribute application from Radix UI

- **Improved Conversation Sorting**: Enhanced conversation list sorting logic
  - Removed unreplied priority sorting (now purely by latest activity)
  - Conversations sorted by \`last_msg_at\` timestamp (most recent first)
  - Fallback to \`created_at\` if \`last_msg_at\` unavailable
  - More intuitive ordering based on actual activity

- **Enhanced Timestamp Display**: Improved date/time formatting in conversation list
  - Added "Yesterday" display for messages from previous day
  - Changed date format from \`dd/MM/yy\` to \`MM/dd/yyyy\` for better clarity
  - Better hour-based calculations for relative time display
  - More accurate time representation

- **TypeScript Fixes**: Resolved type errors
  - Removed reference to non-existent \`updated_at\` field on \`ConversationWithDetails\`
  - Fixed sorting logic to use only available timestamp fields

### Code Quality Improvements
- **Conversation Hooks Cleanup**: Minor refactoring in \`useConversations\` hook
  - Code cleanup and optimization
  - Improved type safety

# [0.0.42] FE WEB CEKAT 2025-11-03
### Admin Panel & Centralized Management
- **New Admin Panel Component**: Created centralized admin control center for master agents
  - New dedicated Admin Panel page accessible via navigation (master agents only)
  - Moved data retention and GDPR controls from Analytics to Admin Panel for better organization
  - Added quick access links to all admin sections (Permissions, Human Agents, Platforms, Analytics, Logs, Contacts)
  - Integrated Circuit Breaker Status monitoring directly in admin panel
  - Added cache clearing utility for local storage cleanup
  - Bulk contact deletion interface with UUID parsing (comma/newline separated)
  - Enhanced data retention controls with manual cleanup trigger
  - GDPR/PDPA deletion interface with confirmation modals
  - All admin features consolidated in single, role-gated interface

### Webhook Infrastructure Refactoring
- **Centralized Webhook Client**: Created new \`webhookClient.ts\` for unified webhook handling
  - Automatic authentication for proxy endpoints using Supabase session tokens
  - Support for both legacy and proxy-based endpoints
  - Automatic API key injection for proxy requests
  - Consistent error handling across all webhook calls
  - \`callWebhook()\` function replaces direct \`fetch()\` calls throughout application

- **Proxy-Aware Webhook Configuration**: Major refactoring of webhook routing system
  - Introduced \`route:\` prefix system for proxy-based endpoints
  - Automatic routing to Supabase Edge Function proxy (\`proxy-n8n\`) for prefixed endpoints
  - Legacy endpoint support maintained for backward compatibility
  - Provider-specific endpoint resolution (\`resolveSendMessageEndpoint()\`)
  - Enhanced provider normalization (wa/whatsapp_cloud  whatsapp, tg/tele  telegram)
  - All platform forms (WhatsApp, Telegram) now use centralized webhook client
  - Live Chat component updated to use new webhook client

### AI Agent Enhancements
- **AI Model Selection System**: Comprehensive model management in AI Agent creation and settings
  - Model selection dropdown in AI Agent creation dialog with pricing and provider information
  - Fallback model selection for automatic failover when primary model unavailable
  - Model-specific context window and history limit validation
  - Dynamic limit calculation based on selected model capabilities
  - Enhanced model display with cost per 1M tokens, provider badges, and descriptions
  - Model filtering (regular vs fallback models) for better UX
  - Auto-selection of first available model on load

- **AI Agent Settings UI Improvements**: Enhanced settings interface with better input handling
  - Replaced numeric inputs with text inputs using \`inputMode="numeric"\` for better mobile support
  - Added input validation with clamping to model-specific maximums
  - Context window input now in "K tokens" format with model-specific limits
  - History limit shows model-specific maximums with helpful descriptions
  - Auto-resolve timeout input with proper validation (0-1440 minutes)
  - Message cap input with placeholder examples
  - Removed "AI Read File Limit" field (commented out, not in use)
  - Better label clarity: "Enable auto-resolve", "Auto-resolve timeout", "Conversation History (tokens)", "Context Window (K tokens)", "Creativity Preset", "AI Message Cap"
  - Model selection card with primary and fallback model sections
  - Real-time display of model capabilities and limits

- **AI Agent Creation Flow**: Enhanced creation process
  - Model selection required before agent creation
  - Fallback model optional selection during creation
  - Better validation and error messages
  - Improved dialog with cancel button and loading states

### Analytics Component Cleanup
- **Removed Admin Controls**: Moved data retention and GDPR controls to Admin Panel
  - Removed data retention policy card from Analytics Conversation tab
  - Removed GDPR deletion card from Analytics
  - Removed Circuit Breaker Status from Analytics (now in Admin Panel)
  - Simplified Analytics component focusing on analytics and reporting only
  - Better separation of concerns between analytics and administration

### Database & Permissions
- **New Migration**: Added \`users_profile.create\` permission
  - Created migration \`20251103_add_users_profile_create_permission.sql\`
  - Grants \`users_profile.create\` permission to \`master_agent\` and \`super_agent\` roles
  - Enables proper RBAC for user profile creation operations

### Enhanced Caching & Performance
- **Query Signature-Based Caching**: Improved cache key generation in \`supabaseProtected.ts\`
  - Added query signature serialization for more accurate cache keys
  - Cache keys now include query method signatures and arguments
  - Prevents cache collisions between similar but different queries
  - Better cache invalidation with pattern matching
  - Enhanced cache hit rates with more granular key generation

- **Cache Invalidation Improvements**: Better cache management
  - Contact deletion now invalidates related query caches
  - Thread deletion invalidates conversation caches
  - Pattern-based cache invalidation using \`defaultFallbackHandler.invalidatePattern()\`

### Conversation & Contact Management
- **Enhanced Conversation Hooks**: Improved conversation management
  - Added \`deleteThread()\` function to \`useConversations\` hook
  - Provider-aware message sending using \`resolveSendMessageEndpoint()\`
  - Better provider detection from conversation data
  - Cache invalidation on thread deletion

- **Contact Management**: Improved deletion handling
  - Enhanced bulk deletion with cache invalidation
  - Better error handling in contact operations
  - Improved cache management for contact queries

### Platform Integration Updates
- **WhatsApp Platform**: Updated to use new webhook client
  - Session creation, login QR, logout, disconnect, and delete operations use \`callWebhook()\`
  - Consistent error handling across all WhatsApp operations

- **Telegram Platform**: Updated to use new webhook client
  - Platform creation and webhook deletion use centralized webhook client
  - Better error handling and response parsing

- **Connected Platforms**: Enhanced platform management
  - All webhook calls migrated to \`callWebhook()\` function
  - Better error handling and user feedback
  - Consistent authentication across all platform operations

### Navigation & Routing
- **New Admin Panel Route**: Added admin panel to navigation
  - New "Admin Panel" navigation item (master agents only)
  - Requires \`access_rules.configure\` permission
  - Added to navigation config and routing
  - Default navigation fallback improved to handle permission-based routing

### UI/UX Improvements
- **Human Agents**: Enhanced creation dialog
  - Better validation and error messages
  - Cancel button in creation dialog
  - Improved loading states
  - Permission-based UI (disabled buttons with tooltips when permission missing)

- **Input Improvements**: Better form inputs throughout application
  - Numeric inputs use \`inputMode="numeric"\` for mobile keyboards
  - Better placeholder text and validation messages
  - Improved accessibility with proper input types

### Technical Improvements
- **Code Organization**: Better separation of concerns
  - Admin functionality centralized in Admin Panel component
  - Webhook logic centralized in webhook client
  - Better component structure and maintainability

- **Type Safety**: Enhanced TypeScript types
  - Added \`model_id\` to AIProfile interface
  - Better type definitions for webhook responses
  - Improved type safety in platform forms

- **Error Handling**: Consistent error handling
  - Unified error handling in webhook client
  - Better error messages throughout application
  - Improved user feedback with toast notifications

# [0.0.41] FE WEB CEKAT 2025-11-01
### Data Retention & GDPR Compliance
- **Data Retention Policy System**: Implemented configurable data retention with automatic cleanup
  - Added 90-day default retention policy (adjustable from 1-365 days) stored in \`org_settings\` table
  - Created \`cleanup_old_chat_data()\` PostgreSQL function for automatic deletion of old chat data
  - Scheduled daily cleanup job at 2 AM UTC via \`pg_cron\` extension
  - Respects organization-specific retention periods stored in \`org_settings.retention_days\`
  - Only deletes data older than retention period (rolling window, not everything daily)
  - Deletes old threads, messages, and orphaned contacts based on \`created_at\` timestamps
  - Supports both org-specific cleanup and global cleanup for all organizations

- **GDPR/PDPA Right to Erasure**: Implemented compliant user data deletion functionality
  - Created \`gdpr_delete_user_data()\` PostgreSQL function for permanent deletion of user data
  - Deletes all threads, messages, and contact records for a specific contact UUID
  - Validates contact belongs to requesting organization before deletion
  - Returns detailed deletion results (threads, messages, contacts deleted count)
  - Permanently removes all user-associated data in compliance with GDPR/PDPA regulations
  - Action cannot be undone with clear warning messages in UI

- **Admin Controls in Analytics**: Added data retention and GDPR controls in Conversation tab
  - Data Retention Policy card with current retention period display and edit functionality
  - Manual "Run Cleanup Now" button for immediate cleanup execution
  - GDPR/PDPA deletion card with contact UUID input field
  - Restricted to users with \`access_rules.configure\` permission (master/super agents only)
  - Real-time success/error message display for all operations
  - Last cleanup results display showing threads, messages, and contacts deleted counts

- **Database Migration**: Applied comprehensive migration for data retention features
  - Migration \`20250102_data_retention_and_gdpr.sql\` successfully applied via Supabase MCP
  - Created \`cleanup_old_chat_data()\` and \`gdpr_delete_user_data()\` functions with proper security
  - Added RLS policies for \`org_settings\` table updates restricted to master/super agents
  - Initialized default 90-day retention for all existing organizations
  - Ensured \`is_current_user_active()\` dependency function exists for RLS checks

### Contact Management Enhancements
- **Contact UUID Detail Modal**: Added master agent-only contact UUID display
  - New UUID section in contact details modal visible only to master agents
  - Displays contact UUID with copy-to-clipboard functionality
  - Includes helpful description for GDPR deletion requests and system integrations
  - Uses RBAC role check (\`hasRole('master_agent')\`) to restrict visibility
  - Styled with monospace font and muted background for clear readability
  - Badge indicator showing "Master Agent Only" restriction

### Technical Improvements
- **Supabase Integration**: Full integration with Supabase database functions
  - \`fetchRetentionSettings()\` reads from \`org_settings\` table via protected Supabase client
  - \`saveRetentionDays()\` updates retention period using upsert operation
  - \`triggerCleanup()\` calls \`cleanup_old_chat_data\` RPC function
  - \`executeGdprDeletion()\` calls \`gdpr_delete_user_data\` RPC function
  - All operations use \`protectedSupabase\` client respecting circuit breaker and RLS
  - Proper error handling and user feedback for all database operations

- **RBAC Integration**: Enhanced role-based access control for admin features
  - Permission gates around data retention and GDPR controls
  - Master agent role check for contact UUID visibility
  - Secure access control using \`useRBAC\` context hooks

### UI/UX Enhancements
- **Data Retention UI**: Comprehensive admin interface for retention management
  - Edit modal for configuring retention period (1-365 days range)
  - Visual display of current retention period with clear descriptions
  - Warning messages explaining automatic cleanup schedule
  - Success/error message toasts for user feedback

- **GDPR Deletion UI**: Secure and user-friendly deletion interface
  - Two-step confirmation process with warning modal
  - Clear indication of what will be deleted (threads, messages, contacts)
  - Contact UUID input with validation
  - Destructive button styling to indicate permanent action

### Security & Compliance
- **Data Protection**: Enhanced data protection mechanisms
  - Row Level Security (RLS) policies enforce master/super agent access only
  - Automatic cleanup respects retention periods to prevent accidental data loss
  - GDPR deletion function validates organization membership before deletion
  - All database operations use security definer functions with proper permissions

# [0.0.40] FE WEB CEKAT 2025-11-01
### Adaptive Rate Limiter Integration & DDoS Protection
- **Adaptive Rate Limiter Full Integration**: Integrated adaptive rate limiter into Supabase protection system
  - Enhanced AdaptiveRateLimiter class with getConfig() and updateConfig() methods for runtime configuration
  - Added localStorage persistence for adaptive rate limiter configuration and multipliers
  - Integrated adaptive rate limiter into supabaseProtected.ts, replacing static rate limiter for all operations
  - Implemented automatic limit adjustment based on system health metrics (response time, error rate)
  - Added query to circuit_breaker_metrics table in Supabase for real-time metrics analysis
  - Automatic adjustment loop runs every adjustment interval to update limits dynamically

- **Adaptive Rate Limiter Configuration UI**: Added comprehensive configuration interface
  - Created new "Adaptive Rate Limiter Configuration" section in Limit Configuration
  - Display base limits for all 4 operations (Reads, Writes, RPC, Auth) with current effective limits
  - Real-time display of multipliers (percentage) for each operation type
  - Show min/max multiplier, adjustment interval, and latency thresholds
  - Added "Edit" button with comprehensive modal for editing all adaptive rate limiter parameters
  - Visual status indicator showing adaptive rate limiter is active and protecting database
  - All configuration values are editable with proper validation and range limits

- **Enhanced Rate Limiter Card**: Updated to show adaptive limits
  - Changed card title to "Rate Limiter (Adaptive)" to reflect dynamic nature
  - Display effective limits (dynamically calculated) instead of static limits
  - Show multiplier percentage for each operation type
  - Real-time updates every second to reflect current adaptive limits
  - Informative tooltips explaining how adaptive limits work for traffic spike protection

- **Comprehensive Circuit Breaker Documentation Updates**: Enhanced documentation with detailed input explanations
  - Added detailed explanation section for all Circuit Breaker inputs (5 parameters)
    - Failure Threshold: When circuit opens, tips, recommendations
    - Reset Timeout: Recovery time, tips for different scenarios
    - Success Threshold: Recovery validation, recommendations
    - Monitoring Period: Sliding window explanation, impact on detection
    - Request Timeout: Timeout handling, recommendations per operation type
  - Added comprehensive explanation for all Adaptive Rate Limiter inputs (7+ parameters)
    - Base Limits: Explanation for Reads/Writes/RPC/Auth with recommendations
    - Min/Max Multiplier: How multipliers affect limits, examples with calculations
    - Latency Thresholds: Healthy vs Stress thresholds, tips for optimization
    - Adjustment Interval: How often limits adjust, recommendations for different scenarios
  - Added "How They Work Together" sections showing complete workflow for both systems

- **DDoS & Traffic Spike Protection Guide**: Added dedicated protection guide
  - Created comprehensive guide section explaining inputs specifically for DDoS protection
  - Ranked inputs by importance: Min Multiplier (most important), Stress Threshold, Base Limits, etc.
  - Detailed recommendations for each input with effectiveness ratings
  - Provided optimal configuration preset for maximum DDoS protection
  - Explained complete attack scenario flow (5-step process)
  - Visual color-coded sections for easy reference (red borders for critical inputs)

- **Documentation Improvements**: Enhanced existing documentation sections
  - Updated "Best Practices" section to include adaptive rate limiter tips
  - Enhanced "Configuration Reference" to show both Circuit Breaker and Adaptive Rate Limiter configs
  - Added effective limits display with multiplier percentages in configuration reference
  - Updated troubleshooting section to mention adaptive rate limiter as protection layer
  - All documentation now uses dynamic values from current configuration (real-time)

### Technical Improvements
- **Type System Enhancements**: Improved TypeScript type exports
  - Re-exported OperationType from adaptiveRateLimiter for better type consistency
  - Fixed import issues in CircuitBreakerStatus component
  - All types properly exported and available for external use

- **Storage Management**: Enhanced persistence system
  - Adaptive rate limiter config persists to localStorage with multipliers
  - Automatic loading of saved configuration on initialization
  - Interval ID management for proper cleanup when adjustment interval changes
  - Backward compatible with existing localStorage data

### UI/UX Enhancements
- **Configuration Visualization**: Better display of adaptive limits
  - Show both base limit and effective limit side-by-side
  - Multiplier percentage displayed with color coding (green for healthy)
  - Real-time status indicators showing system is actively protecting
  - Clear distinction between static base limits and dynamic effective limits

- **Documentation UX**: Improved documentation readability
  - Color-coded input explanations (red, orange, yellow, blue, purple borders)
  - Step-by-step workflows with numbered lists
  - Practical examples using actual configuration values
  - Tips and recommendations clearly separated from explanations
  - Warning boxes for critical information

### Performance & Security
- **DDoS Protection**: Multi-layered defense system
  - Adaptive rate limiter as first line of defense (reduces limits automatically)
  - Request timeout as second layer (cancels slow requests)
  - Circuit breaker as last resort (blocks all requests if needed)
  - Complete protection against traffic spikes and DDoS attacks

- **Smart Limit Adjustment**: Intelligent limit management
  - Limits increase when system is healthy (up to 200% of base)
  - Limits decrease when system is stressed (down to 50% of base by default)
  - Gradual adjustment prevents sudden changes (max 10% increase, 20% decrease per cycle)
  - Automatic return to normal limits when system recovers

# [0.0.39] FE WEB CEKAT 2025-11-01
### Circuit Breaker Enhancements & Documentation
- **Circuit Breaker Configuration Management**: Added comprehensive limit configuration interface for admins
  - Created "Limit Configuration" section displaying all circuit breaker thresholds (disabled by default)
  - Added "Edit" button to open configuration modal for modifying limits
  - Implemented getConfig() and updateConfig() methods in CircuitBreaker class
  - Added configuration persistence to localStorage for client-side recovery
  - Configuration values are now dynamically displayed and editable
  - Each configuration field includes descriptive tooltips explaining the purpose

- **Circuit Breaker Documentation System**: Implemented comprehensive documentation modal
  - Added documentation card section above "Danger Zone" with "Lihat Dokumentasi Circuit Breaker" button
  - Created detailed documentation modal covering:
    - What is Circuit Breaker and its purpose
    - How Circuit Breaker works (three states: CLOSED, OPEN, HALF_OPEN)
    - Step-by-step workflow with dynamic configuration values
    - What to do when circuit breaker opens (troubleshooting guide)
    - Understanding metrics and their meanings
    - Best practices for monitoring and optimization
    - Configuration reference with current values
  - All documentation content in Indonesian language with clear formatting
  - Modal is scrollable and responsive for better readability

- **Enhanced UI/UX for Circuit Breaker Analytics**: Improved user experience and safety
  - Added question mark icons (HelpCircle) beside all labels in "Limit Configuration" section
  - Each icon displays informative tooltip on hover with Indonesian descriptions
  - Reorganized admin controls into two distinct sections:
    - "Limit Configuration": For viewing and editing circuit breaker thresholds
    - "Danger Zone": For critical admin actions with enhanced warnings
  - Added tooltips to all buttons in "Danger Zone" explaining their effects
  - Enhanced visual hierarchy with color-coded sections (blue for docs, red for danger)
  - All tooltips and descriptions use dynamic values from current configuration

- **Circuit Breaker Class Improvements**: Enhanced circuit breaker functionality
  - Added getConfig() method to retrieve current configuration
  - Added updateConfig() method to modify configuration at runtime
  - Configuration is automatically saved to localStorage on update
  - Configuration is automatically loaded from localStorage on initialization
  - Maintains backward compatibility with existing circuit breaker state

### AI Agent Settings Cleanup
- **Removed Timezone Field**: Cleaned up unused timezone configuration
  - Removed timezone field from AI Agent Settings UI component
  - Dropped timezone column from ai_profiles table via database migration
  - Removed timezone state variables and related logic from frontend
  - Updated TypeScript types to remove timezone references
  - Note: timezone field in users_profile table remains unchanged (separate feature)

### Technical Improvements
- **Code Organization**: Better separation of concerns in Circuit Breaker Status component
  - Split admin controls into logical sections (Documentation, Limit Configuration, Danger Zone)
  - Improved component structure for better maintainability
  - Enhanced modal management with dedicated state variables
  - Better error handling and user feedback

### UI/UX Enhancements
- **Documentation Integration**: Added comprehensive help system
  - Documentation card with prominent call-to-action button
  - Modal-based documentation with scrollable content
  - Color-coded sections for better visual hierarchy
  - Responsive design for all screen sizes
  - Dark mode support throughout documentation modal

- **Enhanced Tooltips**: Improved user guidance
  - Question mark icons next to all configuration labels
  - Contextual tooltips explaining each configuration parameter
  - Tooltips on danger zone buttons with detailed warnings
  - All tooltips in Indonesian language for consistency


# [0.0.38] FE WEB CEKAT 2025-10-30
### Refactor Authentication & RBAC
- Removed unnecessary debug logging from authentication and RBAC components.
- Enhanced role checks within navigation for more secure access control.
- Improved account status handling to better manage user states.
- Added role-based restrictions directly in navigation configuration.
- Updated related components for improved clarity and performance.

# [0.0.37] FE WEB CEKAT 2025-10-30
### Circuit Breaker & Database Protection System
- **Comprehensive Circuit Breaker Implementation**: Implemented full-featured circuit breaker system for database protection
  - Created core CircuitBreaker class with state machine (CLOSED, OPEN, HALF_OPEN) and configurable thresholds
  - Added state persistence using localStorage for client-side recovery across page refreshes
  - Implemented event emitter pattern for real-time monitoring and state change notifications
  - Added time-windowed failure counting (10s monitoring period) with automatic state transitions

- **Rate Limiting & Request Management**: Implemented advanced rate limiting and request optimization
  - Created sliding window rate limiter with per-user and per-endpoint tracking
  - Implemented request queue with deduplication, priority handling, and debouncing
  - Added request batching for similar queries to reduce total request count
  - Created adaptive rate limiter that adjusts limits based on system health metrics

- **Enhanced Error Handling & Caching**: Implemented comprehensive error management and response caching
  - Created error classifier utility mapping Supabase error codes to categories (network, database, auth, rate limit, timeout)
  - Implemented retry logic with exponential backoff (1s, 2s, 4s, 8s max) and error-specific strategies
  - Added response caching with IndexedDB/localStorage using stale-while-revalidate pattern
  - Implemented offline mode support with write operation queuing and sync on connection restore

- **Database Analytics & Monitoring**: Added comprehensive database performance monitoring
  - Created new "Database" tab in Analytics section with detailed database statistics
  - Implemented PostgreSQL functions for database metrics (table sizes, row counts, index performance, memory stats)
  - Added real-time database activity monitoring with KPI cards and interactive charts
  - Created comprehensive table statistics view with scan ratios, vacuum timestamps, and DML operations

- **Circuit Breaker Analytics Dashboard**: Integrated circuit breaker monitoring into Analytics section
  - Added new "Circuit Breaker" tab displaying real-time status and metrics
  - Created CircuitBreakerStatus component with admin controls and visual indicators
  - Implemented metrics collection and storage in circuit_breaker_metrics table
  - Added comprehensive help tooltips with Indonesian descriptions for all labels

- **Protected Supabase Integration**: Wrapped all database operations with circuit breaker protection
  - Created protectedSupabase wrapper replacing direct Supabase calls in critical components
  - Integrated circuit breaker, rate limiting, caching, and metrics collection
  - Updated Analytics, ConversationPage, and useConversations hooks to use protected wrapper
  - Implemented graceful degradation and fallback mechanisms for failed operations

- **Admin Controls & Safety Features**: Added comprehensive admin controls with safety measures
  - Implemented custom modal dialogs replacing browser confirm/alert dialogs
  - Added confirmation popups with detailed Indonesian warnings for all admin actions
  - Created color-coded modal themes (orange for reset, red for critical actions, blue for info)
  - Added success/error feedback modals with proper error handling

### Technical Improvements
- **Performance Optimizations**: Resolved application freezing and lag issues
  - Fixed infinite loop in background cache refresh mechanism
  - Optimized metrics collection with batching and throttling (50 batch size, 30s interval)
  - Implemented caching for getUserId calls with 1-minute TTL and 500ms timeout
  - Added cooldown periods to prevent refresh storms (30s for queries, 60s for RPCs)
  - Made rate limiting more lenient for read operations to prevent blocking

- **Database Schema Updates**: Enhanced database with circuit breaker metrics
  - Created circuit_breaker_metrics table with comprehensive operation tracking
  - Added RLS policies and indexes for efficient metrics querying
  - Implemented 30-day retention policy with cleanup_old_metrics function
  - Added database analytics functions for comprehensive performance monitoring

### UI/UX Enhancements
- **Modal System**: Replaced browser dialogs with custom modal components
  - Created consistent modal design matching application theme
  - Added proper dark mode support and responsive design
  - Implemented clear visual hierarchy with icons and color coding
  - Added comprehensive warning messages in Indonesian language

- **Help System**: Enhanced user guidance throughout the application
  - Added question mark icons with tooltips to all analytics labels
  - Implemented LabelWithHelp component for consistent help integration
  - Created comprehensive Indonesian descriptions for all circuit breaker features
  - Added contextual help for admin controls and safety warnings


# [0.0.36] FE WEB CEKAT 2025-10-25
### Security & Authentication
- **Account Deactivation System**: Implemented comprehensive account deactivation blocking system
  - Added database-level RLS policies to prevent deactivated users from accessing system resources
  - Created dedicated \`/account-deactivated\` warning page with Indonesian content
  - Implemented pre-login account status validation to prevent deactivated users from authenticating
  - Added automatic redirect to warning page when deactivated account is detected
  - Enhanced security with "fail closed" approach - blocks access if account status cannot be verified

### User Experience Improvements
- **Enhanced Navigation**: Fixed navigation issues and improved user flow
  - Replaced modal-based account deactivation with dedicated warning page
  - Added "Kembali ke Halaman Login" button with complete cleanup functionality
  - Implemented localStorage clearing and user signout on account deactivation
  - Fixed infinite loading issues caused by component conflicts
  - Added loading states and prevented multiple button clicks during navigation

### Technical Improvements
- **Component Architecture**: Streamlined authentication flow components
  - Removed deprecated \`AccountDeactivatedModal\` component
  - Created dedicated \`AccountDeactivated\` page component with proper routing
  - Fixed Router context issues by restructuring component hierarchy in App.tsx
  - Enhanced error handling and timeout management for signOut operations
  - Added comprehensive debugging and logging for authentication flow

### Database & Security
- **Row Level Security (RLS)**: Enhanced database security policies
  - Updated RLS policies to include active user checks for all major tables
  - Created \`is_current_user_active()\` helper function for consistent security checks
  - Applied security policies to \`users_profile\`, \`org_members\`, \`channels\`, \`contacts\`, \`threads\`, and \`messages\` tables
  - Implemented strict access control preventing deactivated users from reading sensitive data

### Bug Fixes
- **Authentication Flow**: Resolved multiple authentication-related issues
  - Fixed flicker when logging in with deactivated accounts
  - Resolved race conditions in account status checking
  - Fixed logout button functionality by preventing account deactivation interference
  - Corrected database column name from \`is_f2a_email_enabled\` to \`is_2fa_email_enabled\`
  - Fixed CORS errors with edge function approach by implementing direct database validation

### UI/UX Enhancements
- **Account Deactivation Warning Page**: Created comprehensive user feedback system
  - Added clear Indonesian messaging explaining account deactivation
  - Implemented contact instructions for Master Agent reactivation
  - Added visual warning indicators with appropriate icons and styling
  - Created responsive design with proper loading states and button interactions

# [0.0.35] FE WEB CEKAT 2025-16-09
### Updates
- Added HCaptcha site key to .env for CAPTCHA validation.
- Enhanced Login component to include CAPTCHA verification.
- Improved ConversationPage to display channel logos.
- Updated HumanAgents component for better pagination and agent management.
- Adjusted useConversations and useHumanAgents hooks to support new fields for channel logos and agent organization.
- Implemented strict checks for super agent assignments in usePlatforms hook.

# [0.0.34] FE WEB CEKAT 2025-11-09
### Updates
### AIAgentSettings
* Added new state variables:
  * \`historyLimit\`
  * \`readFileLimit\`
  * \`contextLimit\`
  * \`responseTemperature\`
  * \`messageAwait\`
  * \`messageLimit\`
  * \`timezone\`
* Improved overall usage tracking and configurability.

### HumanAgent
* Introduced **usage range option** for better monitoring.
* Refactored **agent visibility logic** for clearer access control.
* Enhanced handling of **agent roles and statuses** for more robust management.

# [0.0.33] FE WEB CEKAT 2025-10-09
### Updates
- Update project branding, enhance chat functionality, and improve permissions management
- Added aria-labels for accessibility in chat components
- Refined URL state synchronization in ConversationPage
- Implemented sorting and editing features in Contacts
- Removed legacy policy editing from PermissionsPage
- Updated navigation permissions for better clarity

# [0.0.32] FE WEB CEKAT 2025-10-04
### Updates
- Fixed Live chat error and detail chat
- Update project branding to **Synka AI**
- Enhance **chat functionality**
- Improve **permissions management**
- Key changes include:
  - Renaming titles and meta descriptions
  - Adding a direct route to the chat inbox
  - Updating permission checks
  - Refining UI elements for better user experience

Updating permission checks

Refining UI elements for better user experience
# [0.0.31] FE WEB CEKAT 2025-10-04
### Updates
- Introduced a new endpoint \`CHAT_TEST\` for testing AI agent chat settings.
- Updated \`AIAgentSettings\` component to include profile handling and improved UI with collapsible sections for behavior, welcome message, and transfer conditions.
- Enhanced \`ChatPreview\` to support profile ID and adjusted styling for better user experience.
- Refactored platform forms to remove profile photo upload functionality.

# [0.0.30] FE WEB CEKAT 2025-10-04
### Updates
- Fix invite

# [0.0.29] FE WEB CEKAT 2025-10-04
Commit: Invite flow fixes, required field validation, form improvements
### Updates
- Invite Flow Fixes
  - Fixed invite flow to redirect users directly to password creation page instead of 2FA page
  - Added invite flow detection to skip 2FA requirements for invited users
  - Prevented duplicate 2FA emails for invited users
  - Added \`/invite\` route for proper invite handling
  - Enhanced ProtectedRoute to detect and redirect invite flows appropriately
- Form Validation Improvements
  - Made "Attach to Super Agent" field required for regular agents
  - Added visual indicators (red asterisks) for all required fields
  - Implemented real-time form validation with disabled submit button
  - Added contextual help text explaining field requirements
  - Enhanced error messages with specific validation feedback
- User Experience Enhancements
  - Submit button now disabled until all required fields are filled
  - Clear visual hierarchy distinguishing required vs optional fields
  - Real-time validation feedback as users type/select
  - Improved form accessibility with proper labeling
- Bug Fixes
  - Fixed invite users being incorrectly redirected to 2FA page
  - Resolved duplicate 2FA email sending for invited users
  - Corrected form submission logic for agent creation
  - Enhanced error handling for missing required fields

# [0.0.28] FE WEB CEKAT 2025-10-04
Commit: Auto-resolve functionality, thread timestamp fixes, audio notifications, UI improvements
### Updates
- Auto-Resolve System
  - Fixed auto-resolve functionality to work correctly with AI agents
  - Database triggers now properly set \`auto_resolve_at\` timestamp when AI responds
  - Auto-resolve function uses correct enum value \`'closed'\` instead of \`'resolved'\`
  - Periodic checking every 30 seconds for threads ready to auto-resolve
  - Real-time auto-resolve checks on message events
  - Threads auto-resolve after specified minutes of inactivity without user response
- Thread List Improvements
  - Fixed thread list to show latest message timestamp instead of first message timestamp
  - WhatsApp-style conversation sorting with unreplied threads at top
  - Real-time conversation preview updates without full list refresh
- Audio Notifications
  - Added audio notification system for new messages in opened threads
  - Two notification sounds: incoming (\`mixkit-message-pop-alert-2354.mp3\`) and outgoing (\`mixkit-long-pop-2358.wav\`)
  - Debounced notifications to prevent duplicate sounds
  - Tab visibility checks to only play sounds when tab is active
  - User controls: enable/disable audio notifications, test notification
- UI Improvements
  - Removed clock icon from chat message bubbles for cleaner appearance
  - Enhanced message streaming with better real-time updates
  - Improved conversation list performance with optimized refresh logic
- Database Schema Updates
  - Added \`channel_id\` to \`token_usage_logs\` table for better analytics
  - Added \`super_agent_id\` to \`channels\` table (moved from \`ai_profiles\`)
  - Updated RLS policies to use \`channels.super_agent_id\` for proper clustering
  - Fixed foreign key constraints and relationships
- Bug Fixes
  - Fixed page reload issues when alt+tabbing between browser tabs
  - Resolved conversation data leakage between different super agents
  - Fixed AI Agent dropdown filtering logic
  - Corrected thread timestamp display in conversation list

# [0.0.27] FE WEB CEKAT 2025-10-03
- Enabling AI Profiles fetch instead of using cache 

# [0.0.26] FE WEB CEKAT 2025-10-03
Commit: Live Chat realtime + anon policies, auto-resolve with enable flag, reopen on user reply, UI polish
### Updates
- Live Chat (Embed)
  - Messages now stream from Supabase realtime (\`public.messages\`); webhook response is ignored for content.
  - Sends \`channel_id\`, \`session_id\`, and a persistent friendly \`username\` (stored per host in localStorage). Removed \`platform_id\` from payload.
  - Ringtones wired to \`public/tones\` assets; low = \`mixkit-message-pop-alert-2354.mp3\`, high = \`mixkit-long-pop-2358.wav\`.
  - Thread lookup uses \`contacts(name)\` with \`maybeSingle()\` (fixes PGRST116 when 0 rows).
- Database (Supabase)
  - Added anon SELECT RLS for web embed:
    - \`channels\`: \`allow_public_select_web_channels\` (provider='web' and active only).
    - \`threads\`: \`public_read_web_threads\` (via web channels).
    - \`messages\`: \`public_read_web_messages\` (via web channels).
    - Fixes 401/42501 when opening standalone live chat.
  - Auto-resolve framework:
    - \`ai_profiles.auto_resolve_after_minutes\` (int) and \`enable_resolve\` (bool).
    - \`threads.auto_resolve_at\` scheduled by trigger \`set_thread_auto_resolve_after_message\` on agent/assistant replies; cleared on user replies.
    - Function \`auto_close_due_threads()\` (cron-friendly) and helper \`schedule_auto_resolve_for_open_threads()\` for backfill.
  - Auto-reopen: trigger \`reopen_thread_on_user_message\` reopens closed threads and unassigns when a new user message arrives.
- AI Agent Settings
  - Enable Auto-resolve switch added; Auto-resolve after (minutes) is disabled when switch is off.
  - Removed sending \`system_prompt\` to webhook; UI still saves prompt to profile.
- Conversations UI
  - Unreplied badge restyled (soft red background, darker red text) to match Assigned styling.

# [0.0.25] FE WEB CEKAT 2025-10-02
Commit: Human vs AI handover analytics, WAHA sessions fetch, realtime chats, Platforms loop fix, UI polish
### Updates
- Analytics (Human Agent)
  - Handover rate redefined as Human/(Human+AI) across all conversations (not only resolved).
  - Added breakdowns: by Super Agent and by Agent, with Super Agent filter.
- Database (Supabase)
  - New/updated RPCs: \`get_handover_by_super_agent\`, \`get_handover_by_agent\`, \`get_agent_kpis\`.
  - Enabled realtime by adding \`public.threads\` and \`public.messages\` to \`supabase_realtime\`.
- Platforms (WhatsApp)
  - Fetch sessions from WAHA (\`/api/sessions\` and \`/api/sessions/{name}\`); removed dependency on webhook \`/get_sessions\` calls in UI.
  - Filter sessions to selected channel; debounced refresh; fixed infinite refresh loop on Platforms page.
  - QR polling uses WAHA session endpoint; Disconnect/Delete refresh safely.
- Conversations
  - Live-updating conversation list and counts via realtime subscriptions to \`threads\` and \`messages\` (debounced).
- UI
  - Delete Channel button shows spinner + Deleting and subtle pulse while processing.
- Changelog
  - Source from root \`CHANGELOG.md\` only; removed \`public/CHANGELOG.md\`; scripts updated to skip copy.

# [0.0.24] FE WEB CEKAT 2025-09-30
### Updates
- Enhance message handling in ConversationPage and useConversations hooks.
- Optimistic UI updates for message status

# [0.0.23] FE WEB CEKAT 2025-10-02
### Updates
- Live Chat
  - New embedded-only chat page at \`/livechat/:platform_id\` with blue-white palette, gradient background, glassy card, and clearer borders.
  - Sound notifications: low note on send, high note on AI reply; ringtone-style sequences; support external audio and synthesized chimes.
  - Netlify SPA routing for \`/livechat/*\` via redirects in \`netlify.toml\` and \`public/_redirects\`.

- Connected Platforms
  - Live chat link and embed now use \`https://synkaai.netlify.app/livechat/{platform_id}\`.
  - Added Super Agent section (single-select; master-only). Human Agents now a searchable multi-select of regular agents only.
  - Removed Teams card. Agent chips show proper names and can be removed.

- Platform Forms (Web, WhatsApp, Telegram)
  - Enforce Super Agent selection; filter AI/Human Agents by the selected Super Agent.
  - Fixed Telegram \`useEffect\` import error; safer webhook response handling.
  - Only selected human agents are attached on create.

- Hooks and data
  - \`usePlatforms\`: join \`channel_agents\`; insert/remove on create/update; read/update \`channels.credentials.super_agent_id\`.
  - \`useAIAgents\`/\`LiveChat\`: dropped non-existent \`model\`; filter by \`super_agent_id\`.
  - \`useHumanAgents\`: include \`super_agent_id\` via \`super_agent_members\`.

- Human Agents page
  - Clustering UI to manage Super Agents  Agents & AI Agents; token totals by cluster.

- Database (Supabase)
  - New \`super_agent_members\` table (RLS) and \`ai_profiles.super_agent_id\` (NOT NULL).
  - Added \`users_profile.used_tokens\` plus \`refresh_used_tokens_for_super_agents\` function and trigger to aggregate token usage per super agent.
  - Deployed and backfilled via Supabase MCP; membership mappings added where needed.

- Fixes
  - Resolved SPA 404s for \`/livechat/*\`.
  - Fixed \`users_profile.email\` and \`ai_profiles.model\` 42703 errors.
  - Ensured agent removal updates \`channel_agents\` and access.

# [0.0.22] FE WEB CEKAT 2025-09-30
### Updates
- Fix platform creating for telegram
- Add saving functionality for selected AI agent in ConnectedPlatforms and prevent duplicate Telegram bot tokens in TelegramPlatform Form
- Enhance AI Agent Settings: Implement file upload functionality with Supabase integration, including upload progress tracking and error handling. Update UI to reflect file statuses and permissions. Add new knowledgebase endpoints for file management.
- Enhance file upload process in AIAgentSettings: pre-compute content hash for stable key, include additional metadata (storageName, storageSize, storageUpdatedAt) in upload response, and improve file validation checks.

# [0.0.21] FE WEB CEKAT 2025-09-30
### Updates
- Update CHANGELOG and enhance Analytics and HumanAgents components. 
- Added token usage tracking in Analytics with visualizations for daily usage and top models. 
- Improved token aggregation logic in HumanAgents to account for super-agent clusters.

# [0.0.20] FE WEB CEKAT 2025-09-30
### Updates
- Platform agent assignment
  - Persist selected agents on create to \`channel_agents\`; updates replace assignments.
  - Agents now only see platforms theyre assigned to; master/super see all.
  - Platforms list shows only attached human agents (no more org-wide members).

- Platform details UI
  - New Super Agent section: shows assigned super agent; single-select; editable by master agents only; stored in \`channels.credentials.super_agent_id\`.
  - Human Agent manager: chips with remove (X) + searchable multi-select to add; lists only regular agents (excludes super/master).
  - Removed unused Teams card; unified details behavior across providers.

- Telegram platform creation
  - Hits \`POST /telegram/create-platform\` (CREATE_PLATFORM) before channel insert.
  - Sends \`brand_name, display_name, description, telegram_bot_token, ai_profile_id, human_agent_ids, org_id\`.
  - Robust response handling for empty/non-JSON bodies; emits refresh after success.

- Data fetching and names
  - Human agent names prefer \`users_profile.display_name\` with fallback to \`v_users.display_name\`; email sourced from \`v_users\`.
  - Fixed error when \`users_profile.email\` was selected (column doesnt exist).

- Components
  - Added \`ui/multi-select\` (popover + search + checkbox) for multi-add of agents.

- Fixes
  - Agent chips now display the correct agent name (not internal IDs).
  - Only the agents selected during platform creation are attached (no more all agents issue).
  - Resolved Telegram JSON parse errors and \`42703 users_profile.email\` error.

# [0.0.19] FE WEB CEKAT 2025-09-23
### Updates
- Automatically switch to the Resolved tab when only closed conversations are present
- Updated Resolved tab UI to display the count of closed conversations.

# [0.0.18] FE WEB CEKAT 2025-09-20
### Updates
- Added provider tabs (WhatsApp, Telegram, Live Chat) to filter the list; auto-select first item in active tab
- Replaced black status dot with green (active) / gray (inactive) indicator

# [0.0.17] FE WEB CEKAT 2025-09-20
### Updates
- Scope data fetching and realtime to visible pages and active routes (Conversations, Human Agents, Platforms, Contacts, AI Agents, RBAC, Analytics)
- Add tab-visibility guards to avoid background fetch on tab-restore; hydrate from cache first where applicable
- Standardize React Query defaults (staleTime=60s, gc=5m, disable refetch on focus/reconnect)
- Reduce audit log verbosity: ignore refresh/update events; add 3s debounce in \`logAction\`; include current route in log context
- Analytics
  - Default to last 30 days and align to full-day UTC boundaries
  - Prevent invalid date ranges (From  To; To  From) with input min/max and clamping
  - Fetch once per change; removed duplicate initial fetch
- UI consistency: set Telegram Platform create button to blue
- Utilities: add \`isDocumentHidden\` and \`onDocumentVisible\` helpers

# [0.0.16] FE WEB CEKAT 2025-09-19
### Updates
- Enhance real-time synchronization for conversations and messages; always fetch fresh data on mount

# [0.0.15] FE WEB CEKAT 2025-09-19
### Updates
- Auth/OTP: eliminate redirect flicker by gating on \`otpEvaluated\`; \`ProtectedRoute\` and \`Otp\` now wait for evaluation; \`ResetPassword\` handles magic-link \`?code=\` with \`exchangeCodeForSession\`.
- Changelog page: render Markdown (react-markdown + GFM), Tailwind Typography, compact heading sizes; added Netlify \`public/_redirects\`; added \`prebuild\`/\`predev\` to copy root \`CHANGELOG.md\` to \`public/\`.
- Build: remove top-level await in \`main.tsx\` (wrap in async IIFE).
- Analytics (global): add graceful fallback when \`get_containment_and_handover\` is missing; improved handover reason labels; added per-user analytics (Assigned To, Takeovers Initiated, Resolved By, AIAgent Handovers).
- Human Agents:
  - Create Agent dialog with loader; 2FA enable checkbox on create; colored CTAs.
  - Add confirmation dialog with loader for deletion; wire hard delete.
  - Status changed to Active/Inactive; add \`users_profile.is_active\` column and update UI/actions.
  - Edit dialog shows Require Email 2FA switch and token limits; loads/saves \`is_2fa_email_enabled\`.
  - Role badges and submenu restyled (blue/green/gray).
- Edge Functions: \`admin-create-user\` (invite + profile + role, CORS) and \`admin-delete-user\` (hard delete auth user and related rows).
- Logging: \`logAction\` falls back to default org when \`org_id\` cannot be resolved (fixes audit log NOT NULL).
- UI theming: replaced remaining dark/black buttons with blue/green/red where appropriate.

# [0.0.14] FE WEB CEKAT 2025-09-19
### Updates
- Fix changelog is not accessible in staging

# [0.0.13] FE WEB CEKAT 2025-09-19
### Updates
- Implement OTP flow for login and enhance ProtectedRoute for OTP verification. 
- Added new Otp and Logout pages
- Updated AuthContext to manage OTP state 
- Modified Login component to handle OTP requirements.

# [0.0.12] FE WEB CEKAT 2025-09-18
### Updates
- Enhance authentication flow with local storage caching and session restoration
- Implemented local storage caching for AI agents and conversations to improve performance and reduce flicker on refresh.
- Added session restoration from local storage to ensure user authentication state is maintained across page reloads.
- Updated AuthContext to prioritize local storage for session data before reconciling with Supabase.
- Introduced a loading state management to handle UI updates more smoothly during data fetching.

# [0.0.11] FE WEB CEKAT 2025-09-17
### Updates
- Audit Logs self-read policy for non-master users.
- Added \`get_audit_logs\` RPC with server-side filters, paging, and master-only org-wide access.
- Analytics foundations: date-range controls and labeled charts; wired to secure RPCs.
- KPI RPCs: \`get_chats_timeseries\` and \`get_response_time_stats\` (avg/median/p90) with Asia/Jakarta bucketing.
- RBAC and conversation label changes now emit audit log entries.
- Analytics UI now uses new KPI RPCs with channel filter, time-series, and labeled bars.
- Containment/Handover groundwork: added \`threads.resolution\`, \`end_reason\`, \`handover_reason\`, AI auto-resolution trigger.
- Analytics RPCs: \`get_containment\` (with previous period) and \`get_handover_stats\` (reason breakdown).
- Server-side validation: handover reason now required when handover happens; added helpful indexes for analytics.
- Added \`get_non_contained\` RPC for drilldown of non-contained conversations.
- Containment/Handover dashboard cards with drilldown and reason pie chart.
- RBAC policy engine scaffold: \`rbac_policies\` table, RPCs (\`get_role_policy\`, \`put_role_policy\`, \`apply_role_policy\`), extended \`has_perm\` to honor policies.
- Role Policy editor UI (matrix) to manage per-resource actions; policy changes logged.
- Added docs/ANALYTICS_AND_LOGS.md covering RPCs, validation, and telemetry.
- Added PII sanitization tests for log CSV export.
- Added analytics time-series, containment, handover, and RBAC policy tests; basic E2E seed.
- TODO roadmap (server-validated) added for Analytics KPIs, Containment/Handover, RBAC policies, indexes, docs, and tests.
- implement OTP flow in login
- enhance ProtectedRoute for OTP verification

# [0.0.10] FE WEB CEKAT 2025-09-16
### Updates
- fix: remove duplicate import of useRBAC in ConversationPage component

# [0.0.9] FE WEB CEKAT 2025-09-16
### Updates
- Created loggings for every users, and only admin can access.
- Made Role Management for admins to setting the role.

# [0.0.8] FE WEB CEKAT 2025-09-14
### Updates
- Replaced thread participants with collaborators in the database schema.
- Implemented checks for user collaboration status on conversations.
- Enhanced thread assignment logic to ensure proper user assignment and audit fields.
- Updated UI elements for chat takeover functionality to reflect new collaborator roles.

# [0.0.7] FE WEB CEKAT 2025-09-13
### Updates
- Removed static permission constants in favor of direct string references for better alignment with database values.
- Updated components to utilize new permission string format, enhancing consistency across the application.
- Improved navigation logic to enforce permission checks when syncing active tabs, ensuring users only access permitted items.
- Streamlined permission-related code in various components, enhancing maintainability and readability.

# [0.0.6] FE WEB CEKAT 2025-09-03
### Updates
- Implement OpenAI usage tracking and enhance analytics component
- Added OpenAI API key configuration to .env for usage tracking.
- Refactored vite.config.ts to include a usage proxy plugin for fetching OpenAI usage data.
- Enhanced Analytics component to display OpenAI token usage with dynamic date range selection and improved UI elements.
- Integrated charts to visualize input, output, and total tokens over selected time ranges.
- Implemented error handling and loading states for better user experience during data fetching.

# [0.0.5] FE WEB CEKAT 2025-09-03
### Updates
- Updated PermissionNavItem and NavigationItem interfaces to use string arrays for permissions instead of PermissionName type for better flexibility.
- Modified NAVIGATION_CONFIG to replace permission constants with string representations for improved readability and consistency.
- Enhanced RBACProvider's hasPermission function to support various permission formats, including direct matches and synonyms for better user experience.
- Integrated a new PermissionsPage component into the main Index page, ensuring proper permission checks with PermissionGate.


# [0.0.4] FE WEB CEKAT 2025-09-03
### Updates
- Integrate RBAC and enhance agent management features
- Added RBACProvider to App component for role-based access control.
- Updated HumanAgents component to utilize PermissionGate for role management and agent creation.
- Refactored agent role handling to support new roles: master_agent and super_agent.
- Enhanced ConversationPage to display channel provider information for better context.
- Improved useHumanAgents hook to fetch agents from the new v_users view, streamlining data retrieval and role assignment.

# [0.0.3] FE WEB CEKAT 2025-09-03
### Updates
- Implement WhatsApp session polling and enhance deletion handling
- Added polling mechanism to check WhatsApp session status while the QR modal is open, improving user feedback on connection status.
- Introduced loading state management for channel deletion actions to prevent multiple submissions and enhance user experience.
- Removed phone number input from WhatsAppPlatformForm as per updated requirements, streamlining the form submission process.

# [0.0.2] FE WEB CEKAT 2025-09-01
### Updates
- Deleted AUTHENTICATION_SETUP.md, CHAT_SETUP.md, HUMAN_AGENTS_SETUP.md, sample_data.sql, and simple_sample_data.sql as they are no longer relevant to the current project structure.
- Updated package.json version to 0.0.1 and removed unnecessary dev dependencies from package-lock.json.
- Enhanced Login component to display the current version of the application.
- Enhanced Whatsapp channel connecting flow and validation

# [0.0.1] FE WEB CEKAT 2025-09-01
### Updates
- Enhance ClientEditProfileForm: Make company industry selection read-only for non-admin users`,qM=["from-sky-400/60 via-cyan-400/20 to-transparent border-sky-500/40","from-fuchsia-400/60 via-purple-500/20 to-transparent border-fuchsia-500/30","from-emerald-400/60 via-lime-400/20 to-transparent border-emerald-500/30","from-amber-400/60 via-orange-400/20 to-transparent border-amber-500/30","from-indigo-400/60 via-violet-500/20 to-transparent border-indigo-500/30","from-rose-400/60 via-pink-500/20 to-transparent border-rose-500/30"];function WM(e){return e.split(`
`).map(t=>t.trim()).filter(t=>/^-\s*\*\*/.test(t)).map(t=>{const n=t.match(/^-\s*\*\*(.+?)\*\*:?\s*(.*)$/);if(!n)return t.replace(/^-+\s*/,"");const[,r,a]=n;return a?`${r.trim()}  ${a.trim()}`:r.trim()})}function mW(e){var a,s;const t=e.replace(/\r/g,"").trim();if(!t)return[];const n=t.split(/\n(?=# \[)/g).map(o=>o.trim()).filter(Boolean),r=[];for(const o of n){if(o.startsWith("# Change Log")){const x=o.replace(/^# Change Log\s*/,"").trim();if(!x)continue;const y=mW(x);r.push(...y);continue}const l=o.match(/^# \[(?<version>[^\]]+)\](?<title>.*?)(?:\n|$)/);if(!(l!=null&&l.groups))continue;const c=(a=l.groups.version)==null?void 0:a.trim();if(!c)continue;const u=((s=l.groups.title)==null?void 0:s.trim())??"";let f=u||void 0,d;if(u){const x=u.match(/(\d{4}-\d{2}-\d{2})/);x&&(d=x[1],f=u.replace(x[1],"").trim()||void 0)}const h=o.slice(l[0].length).trim(),m=h?h.split(/\n(?=### )/g).map(x=>x.trim()).filter(Boolean):[],g=m.length?m.map((x,y)=>{const[b,...w]=x.split(`
`),k=b.replace(/^###\s*/,"").trim()||`Section ${y+1}`,_=w.join(`
`).trim();return{heading:k,body:_,highlights:WM(_)}}):h?[{heading:"Updates",body:h,highlights:WM(h)}]:[],v=g.flatMap(x=>x.highlights).filter(Boolean).slice(0,5);r.push({version:c,label:f,date:d,sections:g,summary:v,raw:h})}return r}const a3e={p:({children:e})=>i.jsx("p",{className:"text-sm leading-relaxed text-slate-200",children:e}),ul:({children:e})=>i.jsx("ul",{className:"space-y-2 text-sm text-slate-200",children:e}),li:({children:e})=>i.jsxs("li",{className:"relative pl-6",children:[i.jsx("span",{className:"absolute left-0 top-2 h-2 w-2 rounded-full bg-gradient-to-r from-sky-400 to-blue-500 shadow-[0_0_12px_rgba(56,189,248,0.6)]"}),i.jsx("div",{className:"space-y-1",children:e})]}),strong:({children:e})=>i.jsx("span",{className:"font-semibold text-sky-200",children:e}),code:({children:e})=>i.jsx("code",{className:"rounded-md bg-slate-900/80 px-1.5 py-0.5 text-xs text-sky-200",children:e}),a:({children:e,href:t})=>i.jsx("a",{href:t,className:"text-sky-300 underline decoration-dotted underline-offset-4 transition hover:text-sky-200",target:"_blank",rel:"noreferrer",children:e})};function i3e(){var f;const e=p.useMemo(()=>mW(zM),[]),[t,n]=p.useState(""),[r,a]=p.useState("interactive"),[s,o]=p.useState(((f=e[0])==null?void 0:f.version)??""),l=t.trim().toLowerCase(),c=p.useMemo(()=>l?e.filter(d=>[d.version,d.label??"",d.date??"",d.raw,...d.sections.map(m=>m.heading),...d.sections.map(m=>m.body)].join(" ").toLowerCase().includes(l)?!0:d.sections.some(m=>m.highlights.some(g=>g.toLowerCase().includes(l)))):e,[e,l]);p.useEffect(()=>{var h;if(!c.length){o("");return}c.some(m=>m.version===s)||o(((h=c[0])==null?void 0:h.version)??"")},[c,s]);const u=c.find(d=>d.version===s)||c[0];return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-10 text-foreground",children:i.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-6",children:[i.jsxs("div",{className:"flex flex-col gap-2 text-center",children:[i.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-white md:text-4xl",children:"Release Notes & Progress Journal"}),i.jsx("p",{className:"mx-auto max-w-2xl text-sm text-slate-300 md:text-base",children:"Explore every release with rich summaries, vivid highlights, and interactive sections. Filter by keyword, skim highlights, or dive deep into the full notes."})]}),i.jsxs(wl,{value:r,onValueChange:d=>a(d),className:"w-full",children:[i.jsxs(go,{className:"mx-auto grid w-full max-w-xs grid-cols-2 bg-slate-900/60 p-1 shadow-inner shadow-slate-800/40",children:[i.jsx(Kn,{value:"interactive",className:"data-[state=active]:bg-sky-500/20 data-[state=active]:text-sky-100",children:"Interactive"}),i.jsx(Kn,{value:"markdown",className:"data-[state=active]:bg-slate-700/40 data-[state=active]:text-slate-100",children:"Classic"})]}),i.jsx(Mn,{value:"interactive",className:"mt-6",children:i.jsxs("div",{className:"grid gap-6 lg:grid-cols-[320px_1fr]",children:[i.jsxs(Me,{className:"border border-white/10 bg-slate-950/60 shadow-[0_12px_40px_-24px_rgba(56,189,248,0.65)] backdrop-blur",children:[i.jsxs(nt,{className:"space-y-4",children:[i.jsxs(tt,{className:"flex items-center gap-2 text-lg text-white",children:[i.jsx(vP,{className:"h-4 w-4 text-sky-300"}),"Releases"]}),i.jsx(pi,{className:"text-xs text-slate-300",children:"Search and choose any release to explore tailored highlights and details. Recent entries glow brighter."}),i.jsxs("div",{className:"relative",children:[i.jsx(ks,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),i.jsx(Ye,{placeholder:"Search versions, features, or dates...",value:t,onChange:d=>n(d.target.value),className:"bg-slate-900/70 pl-9 text-sm text-slate-100 placeholder:text-slate-400 focus-visible:ring-sky-400"})]})]}),i.jsx(et,{className:"p-0",children:i.jsx(ub,{className:"h-[540px]",children:i.jsxs("div",{className:"flex flex-col divide-y divide-white/5",children:[c.length===0&&i.jsx("div",{className:"p-6 text-center text-sm text-slate-400",children:"No release notes match your search. Try another term."}),c.map((d,h)=>{const m=d.version===(u==null?void 0:u.version);return i.jsx("button",{onClick:()=>o(d.version),className:Se("group relative flex w-full flex-col items-start gap-3 px-5 py-4 text-left transition",m?"bg-sky-500/15":"hover:bg-slate-900/70"),children:i.jsxs("div",{className:"flex w-full items-start gap-3",children:[i.jsx("span",{className:Se("mt-2 h-2.5 w-2.5 rounded-full bg-sky-400 shadow-[0_0_12px_rgba(56,189,248,0.7)] transition-transform",m&&"scale-125")}),i.jsxs("div",{className:"flex flex-1 flex-col gap-1",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("span",{className:"text-sm font-semibold text-slate-100",children:["v",d.version]}),d.label&&i.jsx(St,{variant:"outline",className:"border-slate-500/50 bg-slate-900/60 px-2 py-0 text-[10px] font-medium uppercase tracking-wide text-slate-300",children:d.label}),d.date&&i.jsxs("span",{className:"flex items-center gap-1 text-[11px] uppercase tracking-wide text-slate-400",children:[i.jsx(fP,{className:"h-3 w-3 text-slate-400"}),d.date]})]}),d.summary.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:d.summary.slice(0,3).map(g=>i.jsx(St,{variant:"secondary",className:"max-w-full truncate bg-sky-500/15 text-[10px] font-medium text-sky-100",title:g,children:g},g))})]})]})},d.version)})]})})})]}),i.jsx("div",{className:"space-y-6",children:u?i.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-white/10 bg-slate-950/70 p-1 shadow-[0_45px_90px_-60px_rgba(56,189,248,0.8)] backdrop-blur",children:[i.jsx("div",{className:"absolute -left-32 -top-32 h-64 w-64 rounded-full bg-sky-500/20 blur-3xl"}),i.jsx("div",{className:"absolute -bottom-24 -right-24 h-64 w-64 rounded-full bg-fuchsia-500/10 blur-3xl"}),i.jsxs("div",{className:"relative z-10 rounded-[calc(theme(borderRadius.3xl))] border border-white/10 bg-slate-950/80 px-8 py-8",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsxs(St,{className:"bg-sky-500/30 text-sky-50",children:["Version ",u.version]}),u.label&&i.jsx("h2",{className:"text-xl font-semibold text-white md:text-2xl",children:u.label}),u.date&&i.jsxs("span",{className:"flex items-center gap-1 text-sm text-slate-300",children:[i.jsx(fP,{className:"h-4 w-4 text-sky-300"}),u.date]})]}),u.summary.length>0&&i.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:u.summary.map(d=>i.jsxs(St,{variant:"outline",className:"gap-1 border-sky-400/40 bg-sky-500/15 px-3 py-1 text-[11px] font-medium text-sky-100",title:d,children:[i.jsx(vP,{className:"h-3 w-3 text-sky-200"}),i.jsx("span",{className:"max-w-[220px] truncate",children:d})]},d))}),i.jsx("div",{className:"mt-8 space-y-4",children:i.jsxs(r3e,{type:"multiple",defaultValue:u.sections.map((d,h)=>`section-${h}`),className:"space-y-4",children:[u.sections.map((d,h)=>{const m=qM[h%qM.length];return i.jsxs(dW,{value:`section-${h}`,className:Se("border border-white/5","rounded-2xl bg-slate-950/60 shadow-[0_24px_60px_-35px_rgba(56,189,248,0.55)]"),children:[i.jsxs(fW,{className:"px-6 py-5 text-left hover:no-underline data-[state=open]:bg-slate-900/60",children:[i.jsxs("div",{className:"flex flex-1 flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:Se("h-2.5 w-2.5 rounded-full bg-gradient-to-r shadow-[0_0_12px_rgba(56,189,248,0.6)]",m)}),i.jsx("span",{className:"text-base font-semibold text-white md:text-lg",children:d.heading})]}),d.highlights.length>0&&i.jsx("p",{className:"text-xs text-slate-300 md:text-sm",children:d.highlights[0]})]}),i.jsx(gP,{className:"h-4 w-4 text-sky-300"})]}),i.jsx(hW,{className:"px-6 pb-6",children:i.jsxs("div",{className:Se("relative overflow-hidden rounded-xl border border-white/5 bg-slate-950/80 px-5 py-5","shadow-[inset_0_0_40px_-25px_rgba(56,189,248,0.75)]"),children:[i.jsx("div",{className:Se("pointer-events-none absolute inset-0 bg-gradient-to-br opacity-40",m)}),i.jsx(IM,{remarkPlugins:[UM],components:a3e,className:"relative z-10 space-y-3",children:d.body})]})})]},d.heading+h)}),u.sections.length===0&&i.jsx("p",{className:"text-sm text-slate-300",children:"No detailed sections were found for this release. Check the classic view for raw notes."})]},u.version)})]})]}):i.jsxs(Me,{className:"border border-white/10 bg-slate-950/60 p-12 text-center text-slate-300",children:[i.jsx(tt,{className:"text-xl text-white",children:"No entries available"}),i.jsx(pi,{className:"mt-2 text-sm text-slate-300",children:"Try clearing the search filter to view release notes."})]})})]})}),i.jsx(Mn,{value:"markdown",className:"mt-6",children:i.jsxs(Me,{className:"border border-white/10 bg-slate-950/70 shadow-[0_30px_80px_-60px_rgba(15,23,42,0.95)]",children:[i.jsxs(nt,{children:[i.jsxs(tt,{className:"flex items-center gap-2 text-white",children:[i.jsx(gP,{className:"h-5 w-5 text-sky-300"}),"Full Markdown"]}),i.jsx(pi,{className:"text-xs text-slate-300",children:"Prefer the traditional view? Browse the original changelog with full Markdown formatting."})]}),i.jsx(et,{children:i.jsx("article",{className:"prose prose-sm max-w-none text-slate-200 dark:prose-invert prose-headings:text-white prose-a:text-sky-300 prose-strong:text-sky-200",children:i.jsx(IM,{remarkPlugins:[UM],children:zM})})})]})})]})]})})}function HM(){const{platform_id:e,platformId:t}=iJ(),n=p.useMemo(()=>e||t||"unknown",[e,t]),[r,a]=p.useState([]),[s,o]=p.useState(""),[l,c]=p.useState(!1),[u,f]=p.useState(!0),[d,h]=p.useState("session_"+Date.now()),[m,g]=p.useState(null),[v,x]=p.useState(""),[y,b]=p.useState(null),[w,k]=p.useState(null),_=p.useRef(null),j=p.useRef(null),S=p.useRef(null),A=p.useRef(null),C="/tones/mixkit-message-pop-alert-2354.mp3",T="/tones/mixkit-long-pop-2358.wav",M=()=>{const N=window.AudioContext||window.webkitAudioContext;return j.current=j.current??new N,j.current},F=(N,U,D,R,K=.05,Q="sine")=>{const H=N.createOscillator(),V=N.createGain();H.type=Q,H.frequency.value=D,V.gain.value=1e-4,H.connect(V),V.connect(N.destination);const ie=U+R/1e3;V.gain.setValueAtTime(1e-4,U),V.gain.exponentialRampToValueAtTime(K,U+.02),V.gain.setValueAtTime(K,Math.max(U+.02,ie-.05)),V.gain.exponentialRampToValueAtTime(1e-4,ie),H.start(U),H.stop(ie)},E=(N,U=110,D=.06)=>{try{const R=M(),K=R.currentTime+.01;N.forEach((Q,H)=>{const V=K+H*U/1e3,ie=U*.9;Array.isArray(Q)?Q.forEach(G=>F(R,V,G,ie,D,"sine")):F(R,V,Q,ie,D,"triangle")})}catch{}},I=async N=>{var U,D;try{const K=(N==="low"?(U=window.chatConfig)==null?void 0:U.sendToneUrl:(D=window.chatConfig)==null?void 0:D.replyToneUrl)||(N==="low"?C:T),Q=N==="low"?S.current??(S.current=new Audio(K)):A.current??(A.current=new Audio(K));return Q.src!==K&&(Q.src=K),Q.currentTime=0,Q.volume=N==="low"?.35:.45,await Q.play(),!0}catch{return!1}},P=async()=>{await I("low")||E([493.88,523.25,493.88,523.25],110,.045)},B=async()=>{await I("high")||E([1046.5,1318.5,1568,[1046.5,1318.5,1568,2093]],120,.06)};p.useEffect(()=>{try{const N=typeof window<"u"?window.location.host:"unknown",U=`livechat_username_${n}_${N}`;let D="";try{D=localStorage.getItem(U)||""}catch{}if(!D){const R=["Happy","Bright","Calm","Brave","Kind","Sunny","Lucky","Cheerful","Swift","Clever"],K=["User","Visitor","Friend","Guest","Buddy","Pal","Explorer","Champion","Star","Hero"],Q=R[Math.floor(Math.random()*R.length)],H=K[Math.floor(Math.random()*K.length)],V=Math.floor(100+Math.random()*900);D=`${Q} ${H} ${V}`;try{localStorage.setItem(U,D)}catch{}}x(D)}catch{}},[n]),p.useEffect(()=>{var N;(N=_.current)==null||N.scrollIntoView({behavior:"smooth"})},[r.length]),p.useEffect(()=>{(async()=>{try{const{data:U,error:D}=await ae.from("channels").select("count").limit(1);D&&console.error("Supabase connection error:",D)}catch(U){console.error("Supabase connection test failed:",U)}})()},[]),p.useEffect(()=>()=>{w&&k(null)},[w]),p.useEffect(()=>{if(!m)return;const U=setInterval(async()=>{try{const{data:D}=await ae.from("messages").select("id, role, body, created_at").eq("thread_id",m).order("created_at",{ascending:!0});Array.isArray(D)&&a(R=>{const K=new Map;R.forEach(H=>K.set(H.id,H));for(const H of D){if(!(H!=null&&H.id))continue;const V=H.role==="agent"||H.role==="assistant"?"assistant":"user";if(V==="user")continue;const ie={id:H.id,role:V,body:H.body||"",at:H.created_at||new Date().toISOString()};K.set(ie.id,ie)}const Q=Array.from(K.values());return Q.sort((H,V)=>new Date(H.at).getTime()-new Date(V.at).getTime()),Q})}catch(D){console.error("Error refreshing messages:",D)}},2e3);return()=>clearInterval(U)},[m]),p.useEffect(()=>{n&&n!=="unknown"&&(async()=>{try{const{data:U,error:D}=await ae.from("channels").select("ai_profile_id").eq("id",n).maybeSingle();!D&&(U!=null&&U.ai_profile_id)&&b(U.ai_profile_id)}catch(U){console.error("Error fetching AI profile ID:",U)}})()},[n]),p.useEffect(()=>{let N=null,U=null;const D=Q=>{!Q||Q.length===0||a(H=>{const V=new Map;H.forEach(G=>V.set(G.id,G));for(const G of Q){if(!(G!=null&&G.id))continue;const le=G.role==="agent"||G.role==="assistant"?"assistant":"user",se={id:G.id,role:le,body:G.body||"",at:G.created_at||new Date().toISOString()};if(le==="user"){for(const[Z,_e]of V.entries())if(_e.id.startsWith("temp-")&&_e.role==="user"&&_e.body===G.body&&Math.abs(new Date(_e.at).getTime()-new Date(G.created_at).getTime())<1e4){V.delete(Z);break}}if(le==="assistant"&&w){for(const[Z,_e]of V.entries())if(_e.id===w){V.delete(Z);break}}V.has(se.id)||V.set(se.id,se)}const ie=Array.from(V.values());return ie.sort((G,le)=>new Date(G.at).getTime()-new Date(le.at).getTime()),ie})},R=async Q=>{g(Q);try{const{data:H}=await ae.from("messages").select("id, role, body, created_at").eq("thread_id",Q).order("created_at",{ascending:!0});Array.isArray(H)&&D(H)}catch{}N=ae.channel(`livechat-msgs-${Q}`).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`thread_id=eq.${Q}`},H=>{const V=H==null?void 0:H.eventType,ie=(H==null?void 0:H.new)||(H==null?void 0:H.old);ie&&(ie==null?void 0:ie.role)!=="user"&&(((ie==null?void 0:ie.role)==="agent"||(ie==null?void 0:ie.role)==="assistant")&&D([ie]),V==="INSERT"&&(ie==null?void 0:ie.role)==="agent"&&w&&k(null))}).subscribe(),f(!1)};return(async()=>{try{const{data:Q}=await ae.from("threads").select("id, contact_id, contacts(name)").eq("channel_id",n).eq("contacts.name",v).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(Q!=null&&Q.id){await R(Q.id);return}}catch{}U=ae.channel(`livechat-threads-${n}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"threads",filter:`channel_id=eq.${n}`},async Q=>{var ie,G;const H=(ie=Q==null?void 0:Q.new)==null?void 0:ie.id,V=(G=Q==null?void 0:Q.new)==null?void 0:G.contact_id;if(!(!H||!V))try{const{data:le}=await ae.from("contacts").select("id, name").eq("id",V).maybeSingle();le!=null&&le.name&&v&&le.name===v&&await R(H)}catch{}}).subscribe(()=>f(!1))})(),()=>{try{N&&ae.removeChannel(N)}catch{}try{U&&ae.removeChannel(U)}catch{}}},[n,v]);const O=async()=>{const N=s.trim();if(!N)return;if(m)try{const{checkAIMessageLimit:Q,autoAssignToSuperAgent:H}=await ao(async()=>{const{checkAIMessageLimit:ie,autoAssignToSuperAgent:G}=await import("./aiMessageLimit-CzT5SAWG.js");return{checkAIMessageLimit:ie,autoAssignToSuperAgent:G}},[]),V=await Q(ae,m);if(V.isExceeded&&V.superAgentId){if((await H(ae,m,V.superAgentId)).success){const{toast:G}=await ao(async()=>{const{toast:le}=await Promise.resolve().then(()=>kP);return{toast:le}},void 0);G.error(`Batas pesan AI telah tercapai (${V.currentCount}/${V.limit}). Percakapan telah dialihkan ke super agent.`);return}}else if(V.isExceeded&&!V.superAgentId){const{toast:ie}=await ao(async()=>{const{toast:G}=await Promise.resolve().then(()=>kP);return{toast:G}},void 0);ie.error(`Batas pesan AI telah tercapai (${V.currentCount}/${V.limit}). Tidak ada super agent yang tersedia untuk penanganan.`);return}}catch(Q){console.error("Error checking AI message limit:",Q)}o("");const U=`temp-${Date.now()}`;a(Q=>[...Q,{id:U,role:"user",body:N,at:new Date().toISOString()}]),P(),c(!0);const D=setTimeout(()=>{a(Q=>(Q.findIndex(V=>V.id===U)>=0,Q))},3e3),R=`streaming-${Date.now()}`;k(R);const K=setTimeout(()=>{w===R&&(k(null),a(Q=>Q.map(H=>H.id===R?{...H,streaming:!1,body:H.body||"Waiting for response..."}:H)))},1e4);try{const Q={message:N,session_id:d,timestamp:new Date().toISOString(),channel_id:n,username:v||void 0,ai_profile_id:y,stream:!0};let H=!1;try{const{data:{session:ie}}=await ae.auth.getSession();H=!ie}catch{H=!0}const V=await Ca(Gn.ENDPOINTS.AI_AGENT.CHAT_SETTINGS,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Q)},{forceLegacy:H});if(!V.ok)throw new Error(`Webhook failed ${V.status}`);if(V.body){const ie=V.body.getReader(),G=new TextDecoder;let le="";try{for(;;){const{done:se,value:Z}=await ie.read();if(se)break;le+=G.decode(Z,{stream:!0});const _e=le.split(`
`);le=_e.pop()||"";for(const z of _e)if(z.trim()!=="")try{if(z.startsWith("data: ")){const q=z.slice(6);if(q==="[DONE]"){a(ke=>ke.map(Ae=>Ae.id===R?{...Ae,streaming:!1}:Ae)),k(null);break}const ce=JSON.parse(q);if(ce.content||ce.delta){const ke=ce.content||ce.delta;a(Ae=>{const Pe=Ae.findIndex(Ie=>Ie.id===R);if(Pe>=0){const Ie=Ae.slice();return Ie[Pe]={...Ie[Pe],body:Ie[Pe].body+ke},Ie}else return[...Ae,{id:R,role:"assistant",body:ke,at:new Date().toISOString(),streaming:!0}]})}}else{const q=JSON.parse(z);if(q.content||q.delta){const ce=q.content||q.delta;a(ke=>{const Ae=ke.findIndex(Pe=>Pe.id===R);if(Ae>=0){const Pe=ke.slice();return Pe[Ae]={...Pe[Ae],body:Pe[Ae].body+ce},Pe}else return[...ke,{id:R,role:"assistant",body:ce,at:new Date().toISOString(),streaming:!0}]})}}}catch{a(ce=>{const ke=ce.findIndex(Ae=>Ae.id===R);if(ke>=0){const Ae=ce.slice();return Ae[ke]={...Ae[ke],body:Ae[ke].body+z},Ae}else return[...ce,{id:R,role:"assistant",body:z,at:new Date().toISOString(),streaming:!0}]})}}}finally{ie.releaseLock()}}else try{const ie=await V.json(),G=ie.output||ie.content||ie.message||"Sorry, I couldn't process your message.";a(le=>{const se=le.findIndex(Z=>Z.id===R);if(se>=0){const Z=le.slice();return Z[se]={...Z[se],body:G,streaming:!1},Z}else return[...le,{id:R,role:"assistant",body:G,at:new Date().toISOString(),streaming:!1}]}),k(null)}catch(ie){console.error("Failed to parse JSON response:",ie),a(G=>[...G,{id:R,role:"assistant",body:"I'm processing your message, please wait...",at:new Date().toISOString(),streaming:!1}]),k(null)}B(),setTimeout(()=>{m&&ae.from("messages").select("id, role, body, created_at").eq("thread_id",m).order("created_at",{ascending:!0}).then(({data:ie})=>{Array.isArray(ie)&&a(G=>{const le=new Map;G.forEach(Z=>le.set(Z.id,Z));for(const Z of ie){if(!(Z!=null&&Z.id))continue;const _e=Z.role==="agent"||Z.role==="assistant"?"assistant":"user";if(_e==="user")continue;const z={id:Z.id,role:_e,body:Z.body||"",at:Z.created_at||new Date().toISOString()};le.set(z.id,z)}const se=Array.from(le.values());return se.sort((Z,_e)=>new Date(Z.at).getTime()-new Date(_e.at).getTime()),se})})},1e3)}catch(Q){console.error("Streaming error:",Q),a(H=>H.filter(V=>V.id!==R).concat({id:crypto.randomUUID(),role:"assistant",body:"Sorry, I'm having trouble right now. Please try again later.",at:new Date().toISOString()})),k(null),B()}finally{clearTimeout(K),clearTimeout(D),c(!1)}},$=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),O())},L=N=>new Date(N).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center",children:i.jsx("div",{className:"mx-auto w-full max-w-xl h-full",children:i.jsx(Me,{className:"border border-blue-100 shadow-xl rounded-2xl bg-white/90 backdrop-blur",children:i.jsxs(et,{className:"p-0",children:[i.jsx("div",{className:"flex items-center justify-between px-4 py-3 rounded-t-2xl bg-gradient-to-r from-blue-600 to-blue-500 text-white",children:i.jsx("div",{className:"text-sm font-medium tracking-wide",children:"Live Chat"})}),i.jsx(ub,{className:"h-[450px] p-4",children:i.jsxs("div",{className:"space-y-3",children:[u&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(Kt,{className:"h-4 w-4 animate-spin text-blue-600"}),"Preparing chat"]}),r.map(N=>!N.body||N.streaming&&N.body.trim()===""?null:i.jsx("div",{className:`flex ${N.role==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:"max-w-[80%] space-y-1",children:[i.jsx("div",{className:`px-4 py-2 text-sm rounded-2xl shadow-sm transition-colors ${N.role==="user"?"bg-blue-600 text-white rounded-br-md":"bg-white text-slate-900 border border-blue-100 rounded-bl-md"}`,children:i.jsx("span",{className:"whitespace-pre-wrap",children:N.body})}),i.jsx("div",{className:`text-[10px] ${N.role==="user"?"text-blue-200 text-right":"text-slate-400"}`,children:L(N.at)})]})},N.id)),l&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[i.jsx(Kt,{className:"h-4 w-4 animate-spin text-blue-600"}),"Typing"]}),i.jsx("div",{ref:_})]})}),i.jsx("div",{className:"p-3 border-t border-blue-100 rounded-b-2xl bg-blue-50/40",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ye,{placeholder:"Type a message",value:s,onChange:N=>o(N.target.value),onKeyPress:$,className:"rounded-full h-10 px-4 border-blue-200 focus-visible:ring-blue-500 placeholder:text-slate-400"}),i.jsx(te,{onClick:O,disabled:!s.trim(),className:"rounded-full h-10 w-10 p-0 bg-blue-600 hover:bg-blue-700 text-white",children:i.jsx(Qh,{className:"h-4 w-4"})})]})})]})})})})}function s3e(){const{signOut:e}=Xr(),t=Za(),[n,r]=p.useState(!1),a=async()=>{if(!n){r(!0);try{localStorage.clear(),e().catch(()=>{}),t("/",{replace:!0})}catch(s){console.error("AccountDeactivated: Error in handleBackToLogin:",s),t("/",{replace:!0})}finally{r(!1)}}};return i.jsx("div",{className:"min-h-screen bg-background text-foreground flex items-center justify-center p-4",children:i.jsxs(Me,{className:"w-full max-w-md",children:[i.jsxs(nt,{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:i.jsx(Hs,{className:"h-8 w-8 text-red-600"})}),i.jsx(tt,{className:"text-2xl font-bold text-red-800",children:"Akun Dinonaktifkan"})]}),i.jsx(pi,{className:"text-gray-600 text-base",children:"Akun Anda telah dinonaktifkan dan tidak dapat mengakses sistem."})]}),i.jsxs(et,{className:"space-y-6",children:[i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(zv,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Hubungi Master Agent"}),i.jsx("p",{className:"text-sm text-red-700",children:"Untuk mengaktifkan kembali akun Anda, silakan hubungi Master Agent di organisasi Anda. Mereka dapat mengaktifkan akun Anda kembali."})]})]})}),i.jsx("div",{className:"text-sm text-gray-600",children:i.jsx("p",{children:"Jika Anda yakin ini adalah kesalahan, silakan hubungi administrator sistem untuk bantuan lebih lanjut."})}),i.jsx("div",{className:"flex flex-col gap-3",children:i.jsxs(te,{onClick:a,variant:"outline",className:"w-full",disabled:n,children:[i.jsx(up,{className:"h-4 w-4 mr-2"}),n?"Memproses...":"Kembali ke Halaman Login"]})})]})]})})}const o3e=new AX({defaultOptions:{queries:{staleTime:6e4,gcTime:5*6e4,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:1},mutations:{retry:0}}}),l3e=()=>i.jsx(PX,{client:o3e,children:i.jsx(AJ,{children:i.jsx(xee,{children:i.jsx(_ee,{children:i.jsxs(I1,{children:[i.jsx(qK,{}),i.jsx(u4,{}),i.jsxs(bJ,{children:[i.jsx($a,{path:"/",element:i.jsx(xg,{children:i.jsx(UR,{})})}),i.jsx($a,{path:"/chat",element:i.jsx(xg,{children:i.jsx(UR,{})})}),i.jsx($a,{path:"/profile",element:i.jsx(xg,{children:i.jsx(LIe,{})})}),i.jsx($a,{path:"/reset-password",element:i.jsx(qR,{})}),i.jsx($a,{path:"/invite",element:i.jsx(qR,{})}),i.jsx($a,{path:"/account-deactivated",element:i.jsx(s3e,{})}),i.jsx($a,{path:"/otp",element:i.jsx(xg,{children:i.jsx(eRe,{})})}),i.jsx($a,{path:"/logout",element:i.jsx(tRe,{})}),i.jsx($a,{path:"/changelog",element:i.jsx(i3e,{})}),i.jsx($a,{path:"/livechat/:platform_id",element:i.jsx(HM,{})}),i.jsx($a,{path:"/livechat/:platformId",element:i.jsx(HM,{})}),i.jsx($a,{path:"*",element:i.jsx(nRe,{})})]})]})})})})}),c3e="sb-yoekcpoppfudmqtvjcby-auth-token";async function u3e(){var e,t;try{const n=localStorage.getItem(c3e);if(!n)return;const r=JSON.parse(n),a=(r==null?void 0:r.access_token)||((e=r==null?void 0:r.currentSession)==null?void 0:e.access_token),s=(r==null?void 0:r.refresh_token)||((t=r==null?void 0:r.currentSession)==null?void 0:t.refresh_token);a&&s&&await ae.auth.setSession({access_token:a,refresh_token:s})}catch{}}(async()=>{try{await u3e()}catch{}hL(document.getElementById("root")).render(i.jsx(l3e,{}))})();
